[{"tags": ["ruby-on-rails", "ruby", "heroku", "apt-get", "pdf2htmlex"], "comments": [{"owner": {"reputation": 3013, "user_id": 1060382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y2Y5d.jpg?s=128&g=1", "display_name": "Joel Teply", "link": "https://stackoverflow.com/users/1060382/joel-teply"}, "edited": false, "score": 0, "creation_date": 1451367778, "post_id": 34324162, "comment_id": 56752049, "body": "Switch to AWS and stop using heroku (I am in the same position)"}], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 2557090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/559471ab572138c5e7586750f0b7e6bb?s=128&d=identicon&r=PG", "display_name": "James Gibson", "link": "https://stackoverflow.com/users/2557090/james-gibson"}, "is_accepted": true, "score": 0, "last_activity_date": 1452466217, "creation_date": 1452466217, "answer_id": 34711704, "question_id": 34324162, "link": "https://stackoverflow.com/questions/34324162/running-pdf2htmlex-on-heroku/34711704#34711704", "title": "Running pdf2htmlEX on Heroku", "body": "<p>I just got this working - many thanks for the post that set me in the right direction.</p>\n\n<p>First, I ended up using <a href=\"https://launchpad.net/~coolwanglu/+archive/ubuntu/pdf2htmlex/+files/pdf2htmlex_0.12-1~git201411121058r1a6ec-0ubuntu1~trusty1_amd64.deb\" rel=\"nofollow\">this package</a> from the ppa instead of the debian package you referenced. </p>\n\n<p>It looks like the issue is that the package you referenced was compiled against different versions of libstdc++6 than the one that is installed by your <code>libstdc++6</code> line in your <code>Aptfile</code>. To fix, we replaced the <code>libstdc++6</code> line with an explicit reference to a specific, more recent <code>.deb</code> - I used \n<a href=\"http://mirrors.kernel.org/ubuntu/pool/main/g/gcc-5/libstdc++6_5.3.1-5ubuntu2_amd64.deb\" rel=\"nofollow\">this version hosted on kernel.org</a></p>\n\n<p>I also replaced the libpoppler57 reference, but you may not need to.</p>\n\n<p>My final, working Aptfile:</p>\n\n<pre><code>libc6\nlibfontforge1\nlibgcc1\nlibjs-pdf\nhttp://mirrors.kernel.org/ubuntu/pool/main/g/gcc-5/libstdc++6_5.3.1-5ubuntu2_amd64.deb\nhttps://mirrors.kernel.org/ubuntu/pool/main/p/poppler/libpoppler57_0.38.0-0.ubuntu1_amd64.deb\nhttps://launchpad.net/~coolwanglu/+archive/ubuntu/pdf2htmlex/+files/pdf2htmlex_0.12-1~git201411121058r1a6ec-0ubuntu1~trusty1_adm64.deb\nttfautohint\n</code></pre>\n\n<p>Hope this helps!</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 1848832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/azDxT.jpg?s=128&g=1", "display_name": "nishant3150", "link": "https://stackoverflow.com/users/1848832/nishant3150"}, "is_accepted": false, "score": 1, "last_activity_date": 1598127634, "last_edit_date": 1598127634, "creation_date": 1595853568, "answer_id": 63115553, "question_id": 34324162, "link": "https://stackoverflow.com/questions/34324162/running-pdf2htmlex-on-heroku/63115553#63115553", "title": "Running pdf2htmlEX on Heroku", "body": "<p>Along with the above mentioned libraries in Aptfile please supply <code>data-dir</code> to pdf2htmlEX while converting.</p>\n<p>One of the main issue while converting is on Ubuntu pdf2htmlEX gets installed on <code>/usr/bin/pdf2htmlEX</code> whereas on heroku it is installed at <code>/app/.apt/usr/bin/pdf2htmlEX</code>. And when we don't supply <em>data-dir</em> while converting it by default looks for <code>/usr/bin/pdf2htmlEX</code>.</p>\n<p>Tested on <strong>heroku-18</strong> with <a href=\"https://github.com/pdf2htmlEX/pdf2htmlEX/tree/v0.16.0-poppler-0.62.0-ubuntu-18.04\" rel=\"nofollow noreferrer\">v0.16.0-poppler-0.62.0-ubuntu-18.04</a></p>\n<p>If you are using ruby you can use <a href=\"https://github.com/ricn/kristin\" rel=\"nofollow noreferrer\">Kristin</a> gem with <em>master</em> branch</p>\n"}], "owner": {"reputation": 193, "user_id": 834188, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C4EQe.png?s=128&g=1", "display_name": "Anthony Silva", "link": "https://stackoverflow.com/users/834188/anthony-silva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 598, "favorite_count": 2, "accepted_answer_id": 34711704, "answer_count": 2, "score": 3, "last_activity_date": 1598127634, "creation_date": 1450308784, "question_id": 34324162, "link": "https://stackoverflow.com/questions/34324162/running-pdf2htmlex-on-heroku", "title": "Running pdf2htmlEX on Heroku", "body": "<p>I'm trying to run <a href=\"https://github.com/coolwanglu/pdf2htmlEX\" rel=\"nofollow\">pdf2htmlEX</a> on Heroku. At first I thought of compiling pdf2htmlEX on a VM with the same stack as Heroku and then including the binary on the git repo. That did not work (I kept getting problems with dependencies).</p>\n\n<p>As there is no heroku buildpack for running <code>pdf2htmlEX</code> specifically, I decided to try using <a href=\"https://github.com/ddollar/heroku-buildpack-multi\" rel=\"nofollow\">heroku-buildpack-multi</a> with <code>heroku-buildpack-ruby</code> and <a href=\"https://github.com/ddollar/heroku-buildpack-apt\" rel=\"nofollow\">heroku buildpack-apt</a> (buildpack-apt adds support for apt-based dependencies during both compile and runtime). The pdf2htmlEX package is not in the main PPA's (it's in ppa:coolwanglu/pdf2htmlex) I couldn't just add pdf2htmlEX to the <code>Aptfile</code> (which is where you specify your apt dependencies). </p>\n\n<p>I ended up getting the dependencies for pdf2htmlEX:</p>\n\n<pre><code>pdf2htmlex\n  Depends: libc6\n  Depends: libcairo2\n  Depends: libfontforge1\n  Depends: libfreetype6\n  Depends: libgcc1\n  Depends: libpoppler44\n  Depends: libstdc++6\n  Suggests: ttfautohint\n</code></pre>\n\n<p>Taking this into account I made my Aptfile the following:</p>\n\n<pre><code>libc6\nlibcairo2\nlibfontforge1\nlibfreetype6\nlibpoppler44\nlibgcc1\nlibstdc++6\nttfautohint\nhttp://ftp.us.debian.org/debian/pool/main/p/pdf2htmlex/pdf2htmlex_0.14.6+ds-1+b1_amd64.deb\n</code></pre>\n\n<p>The issue is that if I get a bash prompt in a one-off dyno and try to run \npdf2htmlEX I get the following error:</p>\n\n<pre><code>pdf2htmlEX: /app/.apt/usr/lib/x86_64-linux-gnu/libstdc++.so.6: version `GLIBCXX_3.4.20' not found (required by pdf2htmlEX)\npdf2htmlEX: /app/.apt/usr/lib/x86_64-linux-gnu/libstdc++.so.6: version `GLIBCXX_3.4.21' not found (required by pdf2htmlEX)\npdf2htmlEX: /app/.apt/usr/lib/x86_64-linux-gnu/libstdc++.so.6: version `GLIBCXX_3.4.20' not found (required by /app/.apt/usr/lib/x86_64-linux-gnu/libpoppler.so.57)\n</code></pre>\n\n<p>The few articles I found on stackoverflow about this specific error were not particularly helpful. It seems to be something to do with <code>libstdc++6</code> but I can't figure out how to solve it. </p>\n\n<p>Any ideas? Also, if you know an easier way of running pdf2htmlEX on heroku, please do let me know.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 17254, "user_id": 920371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sJHH1.jpg?s=128&g=1", "display_name": "fivedigit", "link": "https://stackoverflow.com/users/920371/fivedigit"}, "edited": false, "score": 1, "creation_date": 1450308783, "post_id": 34324081, "comment_id": 56390064, "body": "Not sure if <code>profile.product_review</code> is a typo, it&#39;s probably the plural form. You haven&#39;t posted a lot of code so this might not work, but try something like this: <code>current_user.profile.product_reviews.where(product: @product).exists?</code>"}, {"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "reply_to_user": {"reputation": 17254, "user_id": 920371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sJHH1.jpg?s=128&g=1", "display_name": "fivedigit", "link": "https://stackoverflow.com/users/920371/fivedigit"}, "edited": false, "score": 0, "creation_date": 1450309387, "post_id": 34324081, "comment_id": 56390257, "body": "Ouch, its supposed tobe <code>profile.product_reviews</code>. Sorry for less code, didnt put routes/associations. Reviews <code>Many and&#47;to belongs</code>. Profile <code>has_and_belongs_to_many</code>"}, {"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "reply_to_user": {"reputation": 17254, "user_id": 920371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sJHH1.jpg?s=128&g=1", "display_name": "fivedigit", "link": "https://stackoverflow.com/users/920371/fivedigit"}, "edited": false, "score": 0, "creation_date": 1450309664, "post_id": 34324081, "comment_id": 56390347, "body": "Thanks, its worked: <code>&lt;% unless current_user.profile.product_reviews.where(product: @product).exists? %&gt;</code>"}, {"owner": {"reputation": 17254, "user_id": 920371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sJHH1.jpg?s=128&g=1", "display_name": "fivedigit", "link": "https://stackoverflow.com/users/920371/fivedigit"}, "edited": false, "score": 0, "creation_date": 1450309910, "post_id": 34324081, "comment_id": 56390408, "body": "You&#39;re welcome! I&#39;ve added it as an answer. :)"}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1450310468, "post_id": 34324342, "comment_id": 56390565, "body": "<i>WHY</i> should the OP use this? Providing code is nice, but explaining why the code works is very important as it teaches how to reuse it. It&#39;s akin to giving someone a fish or teaching them how to fish."}, {"owner": {"reputation": 17254, "user_id": 920371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sJHH1.jpg?s=128&g=1", "display_name": "fivedigit", "link": "https://stackoverflow.com/users/920371/fivedigit"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1450311040, "post_id": 34324342, "comment_id": 56390742, "body": "I&#39;ve added fishing instructions :)"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1450311568, "post_id": 34324342, "comment_id": 56390921, "body": "Excellent. Thank you. :-)"}], "tags": [], "owner": {"reputation": 17254, "user_id": 920371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sJHH1.jpg?s=128&g=1", "display_name": "fivedigit", "link": "https://stackoverflow.com/users/920371/fivedigit"}, "is_accepted": true, "score": 1, "last_activity_date": 1450310731, "last_edit_date": 1450310731, "creation_date": 1450309880, "answer_id": 34324342, "question_id": 34324081, "link": "https://stackoverflow.com/questions/34324081/filtering-product-review-if-the-exist-in-rails/34324342#34324342", "title": "Filtering &quot;Product review&quot; if the exist in Rails", "body": "<p>Try something like this:</p>\n\n<pre><code>current_user.profile.product_reviews.where(product: @product).exists?\n</code></pre>\n\n<p>This returns <code>true</code> if the user has already reviewed <code>@product</code>.</p>\n\n<p>This solution is quite efficient as it executes a single database query rather than fetching records and performing equality checks in Ruby.</p>\n\n<p>Also read the Rails documentation on <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-exists-3F\" rel=\"nofollow\"><code>exists?</code></a> and <a href=\"http://guides.rubyonrails.org/active_record_querying.html\" rel=\"nofollow\">ActiveRecord queries</a>.</p>\n"}], "owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 34324342, "answer_count": 1, "score": 0, "last_activity_date": 1450310731, "creation_date": 1450308407, "last_edit_date": 1450310350, "question_id": 34324081, "link": "https://stackoverflow.com/questions/34324081/filtering-product-review-if-the-exist-in-rails", "title": "Filtering &quot;Product review&quot; if the exist in Rails", "body": "<p>My code works fine, but I want to know if there is an easy and faster way to filter it? </p>\n\n<p>I'm doing: \"If <code>current_user</code> already has a review, do not let him review and hide form\".</p>\n\n<p>products_helper.rb:</p>\n\n<pre><code>def current_user_commented?\n    @product.product_reviews.each do |p|\n        current_user.profile.product_reviews.each do |r|\n            return false if r == p\n        end\n    end\nend\n</code></pre>\n\n<p>show.html.rb:</p>\n\n<pre><code>&lt;% if logged_in? %&gt;\n  &lt;% if current_user_commented? %&gt;\n    &lt;%= form_for ([@product, ProductReview.new]) do |f| %&gt;\n      &lt;div id=\"star-reviewing\"&gt;&lt;/div&gt;\n        &lt;div class=\"form-group\"&gt;\n          &lt;%= f.label :comment %&gt;\n          &lt;%= f.text_field :body %&gt;\n      &lt;/div&gt;\n      &lt;%= f.submit 'add Comment' %&gt;\n    &lt;% end %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "regex", "bioinformatics", "sequences"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1450308524, "post_id": 34324080, "comment_id": 56389976, "body": "Just use <code>aug.*?(?:uaa|uag|uga)</code> or even <code>aug.*?(?:u(?:a[ag]|ga))</code>."}], "answers": [{"comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1450308662, "post_id": 34324103, "comment_id": 56390025, "body": "You forgot the <code>?</code> in your second sentence."}], "tags": [], "owner": {"reputation": 10490, "user_id": 513951, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6cace4406e1ea825e78ec0134a5ea6fd?s=128&d=identicon&r=PG&f=1", "display_name": "user513951", "link": "https://stackoverflow.com/users/513951/user513951"}, "is_accepted": true, "score": 2, "last_activity_date": 1450308692, "last_edit_date": 1450308692, "creation_date": 1450308512, "answer_id": 34324103, "question_id": 34324080, "link": "https://stackoverflow.com/questions/34324080/ruby-regular-expression-for-sequence-with-specified-start-and-end/34324103#34324103", "title": "Ruby regular expression for sequence with specified start and end", "body": "<p>The <code>.*</code> operator is known as \"greedy,\" which means it will grab up as many characters as it can while still matching the pattern.</p>\n\n<p>To grab the smallest possible number of characters, use the \"non-greedy\" operator, <code>.*?</code>.</p>\n\n<p>Modifying your original regex:</p>\n\n<pre><code>mRNA.gsub!(/(aug.*?uaa)|(aug.*?uag)|(aug.*?uga)/, &amp;:upcase)\n</code></pre>\n\n<p>There are certainly smaller regexes that will do the job, though. Using @stribizhev's suggestion:</p>\n\n<pre><code>mRNA.gsub!(/aug.*?(?:uaa|uag|uga)/, &amp;:upcase)\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5377757, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153590110853851/picture?type=large", "display_name": "Cindy Ella", "link": "https://stackoverflow.com/users/5377757/cindy-ella"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "closed_date": 1450308673, "accepted_answer_id": 34324103, "answer_count": 1, "score": 2, "last_activity_date": 1567379252, "creation_date": 1450308407, "last_edit_date": 1450308781, "question_id": 34324080, "link": "https://stackoverflow.com/questions/34324080/ruby-regular-expression-for-sequence-with-specified-start-and-end", "closed_reason": "Duplicate", "title": "Ruby regular expression for sequence with specified start and end", "body": "<p>I have this string:</p>\n\n<pre><code>mRNA = \"gcgagcgagcaugacgcauguactugacaugguuuaaggccgauuagugaaugugcagacgcgcauaguggcgagcuaaaaacat\"\n</code></pre>\n\n<p>I want to upcase subsequences out of this given sequence. A subsequence should start with <code>aug</code> and should end with either <code>uaa</code>, <code>uag</code> or <code>uga</code>. \nWhen I use the following regular expression in combination with <code>gsub!</code>: </p>\n\n<p><code>mRNA.gsub!(/(aug.*uaa)|(aug.*uag)|(aug.*uga)/, &amp;:upcase)</code></p>\n\n<p>it results in</p>\n\n<p><code>gcgagcgagcAUGACGCAUGUACTUGACAUGGUUUAAGGCCGAUUAGUGAAUGUGCAGACGCGCAUAGUGGCGAGCUAAaaacat</code></p>\n\n<p>I don\u2019t understand why it upcases one whole chunk instead of giving me two subsequences like this:\n<code>gcgagcgagcAUGACGCAUGUACTUGACAUGGUUUAAggccgauuagugaAUGUGCAGACGCGCAUAGuggcgagcuaaaaacat</code></p>\n\n<p>What regular expression can I use to achieve this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "undefined"], "answers": [{"comments": [{"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1450307159, "post_id": 34323766, "comment_id": 56389460, "body": "Thank you! Weird that it worked for next tho and not previous. I&#39;ll checkmark your answer in 6 minutes when SO lets me :)"}, {"owner": {"reputation": 17254, "user_id": 920371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sJHH1.jpg?s=128&g=1", "display_name": "fivedigit", "link": "https://stackoverflow.com/users/920371/fivedigit"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 2, "creation_date": 1450307543, "post_id": 34323766, "comment_id": 56389613, "body": "You&#39;re welcome! <code>String</code> in fact defines a method called <code>next</code>. For <code>&quot;&#47;blog&#47;4&quot;</code> it would return <code>&quot;&#47;blog&#47;5&quot;</code>. It also defines <code>last</code>, which would return <code>&quot;4&quot;</code>. That would explain why the other options did succeed :)"}], "tags": [], "owner": {"reputation": 17254, "user_id": 920371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sJHH1.jpg?s=128&g=1", "display_name": "fivedigit", "link": "https://stackoverflow.com/users/920371/fivedigit"}, "is_accepted": true, "score": 1, "last_activity_date": 1450306773, "creation_date": 1450306773, "answer_id": 34323766, "question_id": 34323736, "link": "https://stackoverflow.com/questions/34323736/undefined-method-prev-for/34323766#34323766", "title": "undefined method `prev&#39; for", "body": "<p>You're calling <code>previous</code> and <code>next</code> on the <code>blog_path</code> method, which returns just a plain <code>String</code>.</p>\n\n<p>You need to make sure to call it on <code>@post</code>:</p>\n\n<pre><code>blog_path(@post.previous)\n</code></pre>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 34323766, "answer_count": 1, "score": 0, "last_activity_date": 1450306773, "creation_date": 1450306588, "question_id": 34323736, "link": "https://stackoverflow.com/questions/34323736/undefined-method-prev-for", "title": "undefined method `prev&#39; for", "body": "<h2>_form</h2>\n\n<pre><code>&lt;%= link_to 'Previous Post', blog_path(@post).previous if @post.previous %&gt;\n&lt;%= link_to 'Next Post', blog_path(@post).next if @post.next %&gt;\n</code></pre>\n\n<p>I'm so confused here, guys. <code>next</code> works, but <code>previous</code> gives me the error <code>undefined method 'previous' for \"/blog/4\":String</code></p>\n\n<h2>post.rb</h2>\n\n<pre><code>  def next\n    Post.where(\"id &gt; ?\", id).first\n  end\n\n  def previous\n    Post.where(\"id &lt; ?\", id).last\n  end\n</code></pre>\n\n<p>If I switch the word <code>previous</code> to <code>last</code> then the error goes away, but instead of linking to the previous post it links to the current post.</p>\n"}, {"tags": ["ruby", "smalltalk"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 2, "creation_date": 1450310786, "post_id": 34323633, "comment_id": 56390655, "body": "Something to consider is that Ruby isn&#39;t SmallTalk. While they have similarities, trying to make one language use the other&#39;s syntax or methods results in code that isn&#39;t intuitive, especially to others who have to work on it after you wrote it. Maintenance, and being kind to co-workers, is extremely important for the viability of code. I&#39;d recommend embracing Ruby&#39;s own way of doing things for Ruby code, and remain true to SmallTalk&#39;s way when writing code there. You&#39;ll find that as you work in more languages it becomes easier to jump back and forth. Or you&#39;ll go crazy. Like most of us."}, {"owner": {"reputation": 13136, "user_id": 4081336, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/XXiEG.jpg?s=128&g=1", "display_name": "Leandro Caniglia", "link": "https://stackoverflow.com/users/4081336/leandro-caniglia"}, "edited": false, "score": 2, "creation_date": 1450312041, "post_id": 34323633, "comment_id": 56391055, "body": "Smalltalk isn&#39;t SmallTalk either ;)"}, {"owner": {"reputation": 129875, "user_id": 325418, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/eb71c362ddeda80c2668d2575e97bc70?s=128&d=identicon&r=PG", "display_name": "nonopolarity", "link": "https://stackoverflow.com/users/325418/nonopolarity"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1450318498, "post_id": 34323633, "comment_id": 56392892, "body": "@theTinMan actually, Ruby followed Smalltalk in making all the values objects, so it does make sense if object prints itself out, like how it was done some 50 years ago.  Of course, if Ruby didn&#39;t do it that way and everybody is following suit, wouldn&#39;t that be the way it is... but if there is a <code>display_nl</code>, then I don&#39;t see why using it has negative impact other than other people not familiar with it"}, {"owner": {"reputation": 129875, "user_id": 325418, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/eb71c362ddeda80c2668d2575e97bc70?s=128&d=identicon&r=PG", "display_name": "nonopolarity", "link": "https://stackoverflow.com/users/325418/nonopolarity"}, "reply_to_user": {"reputation": 13136, "user_id": 4081336, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/XXiEG.jpg?s=128&g=1", "display_name": "Leandro Caniglia", "link": "https://stackoverflow.com/users/4081336/leandro-caniglia"}, "edited": false, "score": 0, "creation_date": 1450318658, "post_id": 34323633, "comment_id": 56392949, "body": "@LeandroCaniglia so it is JavaScript and Smalltalk huh..."}], "answers": [{"comments": [{"owner": {"reputation": 129875, "user_id": 325418, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/eb71c362ddeda80c2668d2575e97bc70?s=128&d=identicon&r=PG", "display_name": "nonopolarity", "link": "https://stackoverflow.com/users/325418/nonopolarity"}, "edited": false, "score": 0, "creation_date": 1450311297, "post_id": 34324264, "comment_id": 56390831, "body": "I was using <code>display</code> just so that it has the same behavior... not sure if <code>puts</code> has everything identical to <code>display</code>... by the way, you are aware, at least on the Mac and maybe Linux, you can press Ctrl-a and the cursor will move to front of line?"}, {"owner": {"reputation": 10490, "user_id": 513951, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6cace4406e1ea825e78ec0134a5ea6fd?s=128&d=identicon&r=PG&f=1", "display_name": "user513951", "link": "https://stackoverflow.com/users/513951/user513951"}, "reply_to_user": {"reputation": 129875, "user_id": 325418, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/eb71c362ddeda80c2668d2575e97bc70?s=128&d=identicon&r=PG", "display_name": "nonopolarity", "link": "https://stackoverflow.com/users/325418/nonopolarity"}, "edited": false, "score": 0, "creation_date": 1450311749, "post_id": 34324264, "comment_id": 56390980, "body": "I&#39;m aware of Ctrl-a. There&#39;s more to it than just going to the front of the line. Sometimes you need to wrap the whole thing in parentheses because you&#39;ve used <code>{}</code> inline block syntax, which messes up <code>puts</code>. In every case, it&#39;d be easier to just have a method you can tack onto the end, like what you&#39;ve suggested here."}, {"owner": {"reputation": 129875, "user_id": 325418, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/eb71c362ddeda80c2668d2575e97bc70?s=128&d=identicon&r=PG", "display_name": "nonopolarity", "link": "https://stackoverflow.com/users/325418/nonopolarity"}, "edited": false, "score": 0, "creation_date": 1450318015, "post_id": 34324264, "comment_id": 56392751, "body": "yeah, isn&#39;t it true that if there is a <code>.display_nl</code>, then polymorphism can work, such as if the app want to print out something in the console and also send that string to a GUI window that shows at most 5 lines of status at the top of the graph it is plotting... or something like that, then redefine <code>display</code> and everything will work"}, {"owner": {"reputation": 10490, "user_id": 513951, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6cace4406e1ea825e78ec0134a5ea6fd?s=128&d=identicon&r=PG&f=1", "display_name": "user513951", "link": "https://stackoverflow.com/users/513951/user513951"}, "reply_to_user": {"reputation": 129875, "user_id": 325418, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/eb71c362ddeda80c2668d2575e97bc70?s=128&d=identicon&r=PG", "display_name": "nonopolarity", "link": "https://stackoverflow.com/users/325418/nonopolarity"}, "edited": false, "score": 1, "creation_date": 1450318347, "post_id": 34324264, "comment_id": 56392853, "body": "Submit a feature request: go to <a href=\"https://bugs.ruby-lang.org/projects/ruby-trunk/issues/new\" rel=\"nofollow noreferrer\">bugs.ruby-lang.org/projects/ruby-trunk/issues/new</a> and register if you aren&#39;t already. Better yet, create the patch first and add it to your submission to the issue tracker. I&#39;d support it."}], "tags": [], "owner": {"reputation": 10490, "user_id": 513951, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6cace4406e1ea825e78ec0134a5ea6fd?s=128&d=identicon&r=PG&f=1", "display_name": "user513951", "link": "https://stackoverflow.com/users/513951/user513951"}, "is_accepted": false, "score": 2, "last_activity_date": 1450309369, "creation_date": 1450309369, "answer_id": 34324264, "question_id": 34323633, "link": "https://stackoverflow.com/questions/34323633/in-ruby-is-there-an-equivalent-method-of-printnl-as-in-smalltalk/34324264#34324264", "title": "In Ruby, is there an equivalent method of printNl as in Smalltalk?", "body": "<p>There is no such equivalent. Your example is a valid implementation, though maybe not the most idiomatic in Ruby.</p>\n\n<p>Ruby methods use <code>snake_case</code> as opposed to <code>camelCase</code>. Also, it'd be simpler to just use <code>puts</code> in your method, as <code>puts</code> automatically appends a newline character.</p>\n\n<pre><code>class Object\n  def display_nl\n    puts self\n  end\nend\n</code></pre>\n\n<p>I've often wished for a method like this after typing a long line into IRB. Rather than moving the cursor back to the beginning of the line to add <code>puts</code> in front of everything, I'll usually just use <code>puts _</code> on the next line. A postfix method like this would be lovely.</p>\n"}, {"comments": [{"owner": {"reputation": 129875, "user_id": 325418, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/eb71c362ddeda80c2668d2575e97bc70?s=128&d=identicon&r=PG", "display_name": "nonopolarity", "link": "https://stackoverflow.com/users/325418/nonopolarity"}, "edited": false, "score": 1, "creation_date": 1450359951, "post_id": 34327811, "comment_id": 56413515, "body": "but if you say, why should a string know how to print itself, then you may say, why should a shape or circle or rectangle know how to draw itself, so <code>rectangle.draw</code> or <code>view.draw</code> all shouldn&#39;t do that and it should be <code>window.draw(view)</code> and then in <code>window.draw()</code>, you will use a <code>case</code> statement to switch between drawing a view or a textbox or a button, then polymorphism is not at work."}, {"owner": {"reputation": 10490, "user_id": 513951, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6cace4406e1ea825e78ec0134a5ea6fd?s=128&d=identicon&r=PG&f=1", "display_name": "user513951", "link": "https://stackoverflow.com/users/513951/user513951"}, "edited": false, "score": 0, "creation_date": 1450385376, "post_id": 34327811, "comment_id": 56429513, "body": "I&#39;m not going to flag it (I actually upvoted), but isn&#39;t this technically &quot;not an answer&quot;?"}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 3, "last_activity_date": 1450337006, "last_edit_date": 1450337006, "creation_date": 1450332935, "answer_id": 34327811, "question_id": 34323633, "link": "https://stackoverflow.com/questions/34323633/in-ruby-is-there-an-equivalent-method-of-printnl-as-in-smalltalk/34327811#34327811", "title": "In Ruby, is there an equivalent method of printNl as in Smalltalk?", "body": "<blockquote>\n  <p>I wonder if it may be not good if it contaminates the <code>Object</code> class</p>\n</blockquote>\n\n<p>Exactly! Why should it be the responsibility of an object to print itself to the console? Doesn't it make more sense to be the responsibility of the console to print strings?</p>\n\n<p>That's exactly how it works in Ruby: <a href=\"http://ruby-doc.org/core/IO.html#method-i-print\" rel=\"nofollow\"><code>IO#print</code></a> (and <a href=\"http://ruby-doc.org/core/IO.html#method-i-puts\" rel=\"nofollow\"><code>IO#puts</code></a>) allows an <a href=\"http://ruby-doc.org/core/IO.html\" rel=\"nofollow\"><code>IO</code></a> object to print strings to itself, and the <a href=\"http://ruby-doc.org/core/Object.html#method-i-to_s\" rel=\"nofollow\"><code>#to_s</code></a> protocol allows any object to represent itself as a string.</p>\n\n<p><a href=\"http://ruby-doc.org/core/Kernel.html#method-i-print\" rel=\"nofollow\"><code>Kernel#print</code></a> (and <a href=\"http://ruby-doc.org/core/Kernel.html#method-i-puts\" rel=\"nofollow\"><code>Kernel#puts</code></a>, <a href=\"http://ruby-doc.org/core/Kernel.html#method-i-p\" rel=\"nofollow\"><code>Kernel#p</code></a>) is simply a convenience method, which basically looks like this:</p>\n\n<pre><code>module Kernel\n  private def print(*args)\n    $&gt;.print(*args)\n  end\nend\n</code></pre>\n\n<p><code>$&gt;</code> is the default output stream, at startup it is the same as <code>$stdout</code> and <a href=\"http://ruby-doc.org/core/Object.html#STDOUT\" rel=\"nofollow\"><code>STDOUT</code></a>, but it can be re-assigned. It is an instance of <code>IO</code>.</p>\n\n<p><code>IO#print</code>, in turn, looks like this:</p>\n\n<pre><code>class IO\n  def print(*args)\n    args.map(&amp;:to_s).each do |str|\n      some_internal_io_method_to_print_strings(str)\n      # in a C-based Ruby implementation probably calling fputs from the libc\n    end\n  end\nend\n</code></pre>\n\n<p>So, in other words, Ruby <em>does</em> it the \"OO way\". There are <code>IO</code> objects which know how to print strings, and there's the <code>#to_s</code> method which allows an object to represent itself as a string.</p>\n\n<hr>\n\n<p>In other words: I consider <a href=\"http://ruby-doc.org/core/Object.html#display\" rel=\"nofollow\"><code>Object#display</code></a> a mistake.</p>\n\n<p>You might notice, that in YARV, it is actually defined in <a href=\"https://github.com/ruby/ruby/blob/trunk/io.c\" rel=\"nofollow\"><code>io.c</code></a> and not in <a href=\"https://github.com/ruby/ruby/blob/trunk/object.c\" rel=\"nofollow\"><code>object.c</code></a>, so even the authors seem to agree that this functionality belongs to <code>IO</code>, not <code>Object</code>.</p>\n\n<p>It is a rather old method, <a href=\"https://github.com/ruby/ruby/blame/210367ec889f5910e270d6ea2c7ddb8a8d939e61/io.c#L1706-L1721\" rel=\"nofollow\">the oldest trace</a> I could find is <a href=\"https://github.com/ruby/ruby/commit/210367ec889f5910e270d6ea2c7ddb8a8d939e61\" rel=\"nofollow\">this commit from January, 1999</a>, which seems to be from the <a href=\"https://github.com/ruby/ruby/blob/210367ec889f5910e270d6ea2c7ddb8a8d939e61/version.h\" rel=\"nofollow\">version 1.3.1 release</a>. Here, it is actually <a href=\"https://github.com/ruby/ruby/blame/210367ec889f5910e270d6ea2c7ddb8a8d939e61/io.c#L2723\" rel=\"nofollow\">defined in <code>Kernel</code>, not <code>Object</code></a>.</p>\n\n<p>Before that, the trace gets lost in the mist of the CVS2SVN conversion.</p>\n"}], "owner": {"reputation": 129875, "user_id": 325418, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/eb71c362ddeda80c2668d2575e97bc70?s=128&d=identicon&r=PG", "display_name": "nonopolarity", "link": "https://stackoverflow.com/users/325418/nonopolarity"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1450337006, "creation_date": 1450306105, "last_edit_date": 1450311908, "question_id": 34323633, "link": "https://stackoverflow.com/questions/34323633/in-ruby-is-there-an-equivalent-method-of-printnl-as-in-smalltalk", "title": "In Ruby, is there an equivalent method of printNl as in Smalltalk?", "body": "<p>If Ruby is strongly influenced by Smalltalk, I wonder if there is an equivalent method in Ruby that is similar to <code>printNl</code> in Smalltalk?  </p>\n\n<p>I was quite fascinated by the idea that in Smalltalk, you actually have something, like a string, and then you send the message <code>printNl</code> (for print with Newline) to the string object.  It is doing it in the OOP way, instead of the procedural way of <code>p obj</code> or <code>puts obj</code>.</p>\n\n<p>I found only a <code>display</code> method for <code>Object</code>, which doesn't have a <code>displayNl</code> alternative.  Is there one in Ruby?</p>\n\n<p>Just for fun I did the following, but I wonder if it may be not good if it contaminates the Object class:</p>\n\n<pre><code>class Object\n  def displayNl\n    self.display\n    \"\\n\".display\n  end\nend\n\n\"hello world\".displayNl\n5.displayNl\n3.14.displayNl\nTime.now.displayNl\nTime.displayNl\nFixnum.displayNl\n[1,3,5].displayNl\n{foo: \"bar\"}.displayNl\n\n-----------------\n\n$ ruby try.rb \nhello world\n5\n3.14\n2015-12-16 14:44:09 -0800\nTime\nFixnum\n[1, 3, 5]\n{:foo=&gt;\"bar\"}\n</code></pre>\n"}, {"tags": ["ruby", "csv"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1450305580, "post_id": 34323426, "comment_id": 56388753, "body": "You say you&#39;re receiving tab-delimited files with embedded JSON in them, but the examples you&#39;ve shown are comma-delimited strings with no (valid) JSON. Please edit your question to include a real-world example of your input data and the actual code you&#39;re handling it with."}, {"owner": {"reputation": 33, "user_id": 3225005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aca08ffad1aa51994fd7c88aba5bc601?s=128&d=identicon&r=PG&f=1", "display_name": "pdxdev", "link": "https://stackoverflow.com/users/3225005/pdxdev"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1450306230, "post_id": 34323426, "comment_id": 56389059, "body": "Thanks for responding. The embedded JSON isn&#39;t specific to the error. Any column data with curly braces next to double-quotes causes the same error. That&#39;s why I supplied a minimalist example that produces the same error."}], "answers": [{"tags": [], "owner": {"reputation": 1905, "user_id": 794627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f0faa9b905f0eeff93547ec33fc59b?s=128&d=identicon&r=PG", "display_name": "Aldehir", "link": "https://stackoverflow.com/users/794627/aldehir"}, "is_accepted": true, "score": 1, "last_activity_date": 1450306673, "last_edit_date": 1450306673, "creation_date": 1450306286, "answer_id": 34323672, "question_id": 34323426, "link": "https://stackoverflow.com/questions/34323426/parsing-embedded-json-out-of-a-csv-file/34323672#34323672", "title": "Parsing embedded JSON out of a CSV file", "body": "<p>Double quotes (<code>\"</code>) is, by default, the character used to surround fields that may contain the CSV column delimiter (tab in your case).</p>\n\n<p>You can get around this by setting the <code>:quote_char</code> option to something else, such as backticks or <code>\\0</code>. Additionally, for tab-delimited data you're going to need to set <code>:col_sep</code>.</p>\n\n<p>This should give you what you're looking for,</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>'red,{\"blue\"},green'.parse_csv(quote_char: '`')\n=&gt; [\"red\", \"{\\\"blue\\\"}\", \"green\"]\n\n%Q{red\\t{\"blue\"}\\tgreen}.parse_csv(quote_char: '`', col_sep: \"\\t\")\n=&gt; [\"red\", \"{\\\"blue\\\"}\", \"green\"]\n</code></pre>\n\n<p>Note that this breaks if either</p>\n\n<ul>\n<li>The JSON column contains tabs and not surrounded by <code>:quote_char</code> or</li>\n<li>The JSON data contains <code>:quote_char</code> (e.g. it contains a backtick).</li>\n</ul>\n"}], "owner": {"reputation": 33, "user_id": 3225005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aca08ffad1aa51994fd7c88aba5bc601?s=128&d=identicon&r=PG&f=1", "display_name": "pdxdev", "link": "https://stackoverflow.com/users/3225005/pdxdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 2, "accepted_answer_id": 34323672, "answer_count": 1, "score": 1, "last_activity_date": 1450306673, "creation_date": 1450305254, "question_id": 34323426, "link": "https://stackoverflow.com/questions/34323426/parsing-embedded-json-out-of-a-csv-file", "title": "Parsing embedded JSON out of a CSV file", "body": "<p>I'm receiving tab delimited files with embedded JSON data in one of the columns. My goal is to split the columns, then do some work to process the JSON. \nWhen I try to use the built-in Ruby CSV library (with Ruby 2.2.3) I get the following error: </p>\n\n<pre><code>Illegal quoting in line 1. (CSV::MalformedCSVError)\n</code></pre>\n\n<p>Here's an minimalist example that helps demonstrate the problem. The following lines work fine:</p>\n\n<pre><code>puts 'red,\"blue\",green'.parse_csv\nputs 'red,{blue},green'.parse_csv\n</code></pre>\n\n<p>But this line produces the MalformedCSVError message:</p>\n\n<pre><code>puts 'red,{\"blue\"},green'.parse_csv\n</code></pre>\n\n<p>Any idea how I can parse that file and treat the middle value (which happens to be JSON) as a string literal?</p>\n\n<p>thanks in advance!</p>\n"}, {"tags": ["ruby", "methods", "syntax-error"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 3, "creation_date": 1450301393, "post_id": 34322404, "comment_id": 56386640, "body": "What&#39;s the expected value? Your <code>greet</code> param names should <i>not</i> have <code>@</code> signs, and you don&#39;t need them anyway since you&#39;re interpolating instance variables. Also, when your code has an error you should post it."}, {"owner": {"reputation": 1267, "user_id": 987016, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/11d18b668f681117ceebb69c55692b0d?s=128&d=identicon&r=PG", "display_name": "Justin E", "link": "https://stackoverflow.com/users/987016/justin-e"}, "edited": false, "score": 2, "creation_date": 1450301829, "post_id": 34322404, "comment_id": 56386859, "body": "I agree, you should add more detail when asking a question. The way it is worded makes it seem like a homework assignment."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1450311722, "post_id": 34322404, "comment_id": 56390967, "body": "Welcome to Stack Overflow. &quot;Correct this code&quot;? Let&#39;s consider what Stack Overflow is: We help you debug problems with your code after you&#39;ve given us the appropriate needed information. Read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; and see if you&#39;ve done that."}], "answers": [{"tags": [], "owner": {"reputation": 249903, "user_id": 2422776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2353050223ebecb113741c29458de4b2?s=128&d=identicon&r=PG", "display_name": "Mureinik", "link": "https://stackoverflow.com/users/2422776/mureinik"}, "is_accepted": false, "score": 1, "last_activity_date": 1450301535, "creation_date": 1450301535, "answer_id": 34322509, "question_id": 34322404, "link": "https://stackoverflow.com/questions/34322404/ruby-def-function-code-not-working/34322509#34322509", "title": "ruby def function code not working", "body": "<p>Instance variables are stored in the class' instance, you don't need to pass them as arguments:</p>\n\n<pre><code>def greet()\n\n    \"Hi #{@other_name}, my name is #{@name}\"\n\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "is_accepted": false, "score": 3, "last_activity_date": 1452999500, "last_edit_date": 1452999500, "creation_date": 1450301559, "answer_id": 34322517, "question_id": 34322404, "link": "https://stackoverflow.com/questions/34322404/ruby-def-function-code-not-working/34322517#34322517", "title": "ruby def function code not working", "body": "<p>You could rewrite it as:</p>\n\n<pre><code>class Person \n  def initialize(name, other_name)\n    @name = name\n    @other_name = other_name\n  end\n\n  def greet\n    \"Hi #{@other_name}, my name is #{@name}\"\n  end\nend\n\nc = Person.new(\"Sam\", \"Ruby\")\n\n2.1.0 :073 &gt; c.greet\n =&gt; \"Hi Ruby, my name is Sam\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 70, "user_id": 3363690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zTeOn.jpg?s=128&g=1", "display_name": "redVaryant", "link": "https://stackoverflow.com/users/3363690/redvaryant"}, "is_accepted": false, "score": 1, "last_activity_date": 1450301620, "last_edit_date": 1450301620, "creation_date": 1450301580, "answer_id": 34322522, "question_id": 34322404, "link": "https://stackoverflow.com/questions/34322404/ruby-def-function-code-not-working/34322522#34322522", "title": "ruby def function code not working", "body": "<p>You need to remove the @ signs from the greet method. Arguments cannot be instance variables.</p>\n"}], "owner": {"reputation": 41, "user_id": 5688533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea71d667320e3f27e853313523744157?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/5688533/john-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "closed_date": 1450311748, "answer_count": 3, "score": -7, "last_activity_date": 1452999500, "creation_date": 1450301143, "last_edit_date": 1450301734, "question_id": 34322404, "link": "https://stackoverflow.com/questions/34322404/ruby-def-function-code-not-working", "closed_reason": "Not suitable for this site", "title": "ruby def function code not working", "body": "<p>Correct this code, so that the greet function returns the expected value.</p>\n\n<pre><code>class Person\n\n  def initialize(name, other_name)\n\n    @name = name\n\n    @other_name = other_name\n\n  end\n\n\n\n  def greet(@other_name, @name)\n\n    \"Hi #{@other_name}, my name is #{@name}\"\n\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 22313, "user_id": 1128103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bba5478400d2a3253746c614c6896bcc?s=128&d=identicon&r=PG", "display_name": "Baldrick", "link": "https://stackoverflow.com/users/1128103/baldrick"}, "edited": false, "score": 1, "creation_date": 1450305356, "post_id": 34322367, "comment_id": 56388640, "body": "I don&#39;t think you should use <code>seed.rb</code> for your test data. Use fixtures instead ( <a href=\"http://guides.rubyonrails.org/testing.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/testing.html</a> ) or tools like Factory girl ( <a href=\"http://www.rubydoc.info/gems/factory_girl/file/GETTING_STARTED.md\" rel=\"nofollow noreferrer\">rubydoc.info/gems/factory_girl/file/GETTING_STARTED.md</a> ). This will help you to create consistent test data."}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 1457646, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/VoFGc.jpg?s=128&g=1", "display_name": "Subrat Rout", "link": "https://stackoverflow.com/users/1457646/subrat-rout"}, "edited": false, "score": 0, "creation_date": 1450734063, "post_id": 34374068, "comment_id": 56551378, "body": "Thanks Peter. It worked. I was passing hard coded id so was getting the error."}, {"owner": {"reputation": 26839, "user_id": 1008891, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/BbcgE.jpg?s=128&g=1", "display_name": "Peter Alfvin", "link": "https://stackoverflow.com/users/1008891/peter-alfvin"}, "reply_to_user": {"reputation": 95, "user_id": 1457646, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/VoFGc.jpg?s=128&g=1", "display_name": "Subrat Rout", "link": "https://stackoverflow.com/users/1457646/subrat-rout"}, "edited": false, "score": 0, "creation_date": 1450749840, "post_id": 34374068, "comment_id": 56556549, "body": "@SubratRout Great! Assuming your question is resolved, please accept the answer so others don&#39;t spend time looking at it."}], "tags": [], "owner": {"reputation": 26839, "user_id": 1008891, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/BbcgE.jpg?s=128&g=1", "display_name": "Peter Alfvin", "link": "https://stackoverflow.com/users/1008891/peter-alfvin"}, "is_accepted": true, "score": 1, "last_activity_date": 1450550218, "creation_date": 1450550218, "answer_id": 34374068, "question_id": 34322367, "link": "https://stackoverflow.com/questions/34322367/cant-pass-the-test-for-seed-db/34374068#34374068", "title": "Can&#39;t pass the test for seed.db", "body": "<p>Since you're not specifying an <code>id</code> on <code>User</code> creation, it doesn't make sense to assume a particular user will have a particular <code>id</code>, as Rails makes no assertions in this regard.</p>\n\n<p>Instead of providing a <code>user_id</code> value by providing a literal integer when creating a <code>TodoList</code>, you should reference the <code>id</code> of the user in question, as in:</p>\n\n<pre><code>{ list_name: \"Something1\", list_due_date: next_due, created_at: \"\", updated_at: \"\", user_id: User.find_by_username('Fiorina').id }\n</code></pre>\n\n<p>Alternatively, of course, you can save the users in variables when you create them, so that you can more readily reference them later. If you're using associations, you can also reference them by their association name, rather than by their <code>id</code> as in:</p>\n\n<p>{ list_name: \"Something1\", list_due_date: next_due, created_at: \"\", updated_at: \"\", user: User.find_by_username('Fiorina') }</p>\n"}], "owner": {"reputation": 95, "user_id": 1457646, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/VoFGc.jpg?s=128&g=1", "display_name": "Subrat Rout", "link": "https://stackoverflow.com/users/1457646/subrat-rout"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 34374068, "answer_count": 1, "score": 0, "last_activity_date": 1450550218, "creation_date": 1450301030, "last_edit_date": 1450303715, "question_id": 34322367, "link": "https://stackoverflow.com/questions/34322367/cant-pass-the-test-for-seed-db", "title": "Can&#39;t pass the test for seed.db", "body": "<p>My seed.db file is following:</p>\n\n<pre><code>today = Date.today\nnext_due = today + 1.year\n\nUser.destroy_all\nTodoList.destroy_all\nTodoItem.destroy_all\n\nUser.create! [\n  { username: \"Fiorina\", password_digest: \"xyx123\" },\n  { username: \"Trump\", password_digest: \"xyx123\" },\n  { username: \"Carson\", password_digest: \"xyx123\" },\n  { username: \"Clinton\", password_digest: \"xyx123\" },\n]\n\nProfile.create! [\n  { first_name:\"Carly\", last_name: \"Fiorina\", gender: \"female\", birth_year: 1954, created_at: \"\", updated_at: \"\", user_id: 1 },\n  { first_name:\"Donald\", last_name: \"Trump\", gender: \"male\", birth_year: 1946, created_at: \"\", updated_at: \"\", user_id: 2 },\n  { first_name: \"Ben\", last_name: \"Carson\", gender: \"male\", birth_year: 1951, created_at: \"\", updated_at: \"\", user_id: 3 },\n  { first_name: \"Hillary\", last_name: \"Clinton\", gender:\"female\", birth_year: 1947, created_at: \"\", updated_at: \"\", user_id: 4 }\n]\n\nTodoList.create! [\n  { list_name: \"Something1\", list_due_date: next_due, created_at: \"\", updated_at: \"\", user_id: 1 },\n  { list_name: \"Something2\", list_due_date: next_due, created_at: \"\", updated_at: \"\", user_id: 2 },\n  { list_name: \"Something3\", list_due_date: next_due, created_at: \"\", updated_at: \"\", user_id: 3 },\n  { list_name: \"Something4\", list_due_date: next_due, created_at: \"\", updated_at: \"\", user_id: 4 }\n]\n\n(1..5).each do |item|\n  TodoItem.create! [\n    { title: \"Task 1\", due_date: next_due, description: \"very important task TEST#{item}\", todo_list_id: 1, completed: false },\n    { title: \"Task 2\", due_date: next_due, description: \"do something else TEST2#{item}\", todo_list_id: 2, completed: true },\n    { title: \"Task 3\", due_date: next_due, description: \"do something else TEST3#{item}\", todo_list_id: 3, completed: true },\n    { title: \"Task 4\", due_date: next_due, description: \"do something else TEST4#{item}\", todo_list_id: 4, completed: true }\n  ]\nend\n</code></pre>\n\n<p>Test File is:</p>\n\n<pre><code>context \"rq09\" do\n  context \"check seed file\" do\n    user_list = [\n      [ \"Carly\", \"Fiorina\", \"female\", 1954 ],\n      [ \"Donald\", \"Trump\", \"male\", 1946 ],\n      [ \"Ben\", \"Carson\", \"male\", 1951 ],\n      [ \"Hillary\", \"Clinton\", \"female\", 1947 ]\n    ]\n\n    before do\n      User.destroy_all\n      TodoList.destroy_all\n      TodoItem.destroy_all\n      Profile.destroy_all\n      load \"#{Rails.root}/db/seeds.rb\"\n    end\n\n    it \"has a file for seeding the database\" do\n      expect(File).to exist(\"#{Rails.root}/db/seeds.rb\")\n    end\n    it \"must have Users with lastnames for usernames as directed in assignment\" do\n      expect(User.all.to_a.length).to be(4)\n      expect(User.all.map {|x| x.username }).to include(\"Trump\", \"Fiorina\", \"Carson\", \"Clinton\")\n    end\n\n    it \"must have Profiles set up for each user with the given data\" do\n      expect(Profile.all.length).to be(4)\n      user_list.each do |fname, lname, gender, byear|\n        p = Profile.find_by(last_name: lname)\n        expect(p.first_name).to eql(fname)\n        expect(p.gender).to eql(gender)\n        expect(p.birth_year).to eql(byear)\n      end\n    end\n\n    it \"must have TodoList set up as directed\" do\n      expect(TodoList.all.length).to be(4)\n      user_list.each do |fname, lname, gender, byear|\n        expect(TodoList.find_by(user: User.find_by(username: lname))).to_not be_nil\n      end\n    end\n\n    it \"must have TodoItems set up as directed\" do\n      expect(TodoItem.all.length).to be(20)\n      user_list.each do |fname, lname, gender, byear|\n        user = User.find_by(username: lname)\n        expect(user.todo_items.count).to be(5)\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>However, when I rspec I get following result:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Failure/Error: expect(TodoList.find_by(user: User.find_by(username: lname))).to_not be_nil\n\nexpected: not nil\ngot: nil\n\n./spec/assignment_spec.rb:229:in `block (5 levels) in &lt;top (required)&gt;'\n./spec/assignment_spec.rb:228:in `each'\n./spec/assignment_spec.rb:228:in `block (4 levels) in &lt;top (required)&gt;'\n./spec/assignment_spec.rb:12:in `block (2 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>When I looked into database and use rails console I see my user id are different(Not 1,2,3,4 anymore). Due to several times rake db:seed there were few rows of user id deleted and recreated. So I can't associate with user id to TodoList dynamically. So my question is how to validate the seed.db file todoList data?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1450304353, "post_id": 34322352, "comment_id": 56388135, "body": "could you give more clues? i mean what is the relation between those rows?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1450311922, "post_id": 34322352, "comment_id": 56391028, "body": "Welcome to Stack Overflow. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. As is we can&#39;t duplicate any problem because your code and question won&#39;t run."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 5688500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4b8c3bb02f32c4d7496d4ad91626e11?s=128&d=identicon&r=PG", "display_name": "Suo Huang", "link": "https://stackoverflow.com/users/5688500/suo-huang"}, "edited": false, "score": 0, "creation_date": 1450301396, "post_id": 34322425, "comment_id": 56386643, "body": "Awesome! Thanks a lot! getting loving ruby now :)"}], "tags": [], "owner": {"reputation": 51826, "user_id": 1223693, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/viu9Y.jpg?s=128&g=1", "display_name": "tckmn", "link": "https://stackoverflow.com/users/1223693/tckmn"}, "is_accepted": false, "score": 0, "last_activity_date": 1450301214, "creation_date": 1450301214, "answer_id": 34322425, "question_id": 34322352, "link": "https://stackoverflow.com/questions/34322352/how-to-use-hash-table-with-multiple-keys/34322425#34322425", "title": "How to use hash table with multiple keys", "body": "<p>This is a bit more elegant:</p>\n\n<pre><code>if (t[:a_Min]...t[:a_Max]).include? a &amp;&amp;\n        (t[:b_Min]...t[:b_Max]).include? b\n    # ...\nend\n</code></pre>\n\n<p>Notice the three dots\u2014if you want to include the last number, you would use <code>..</code>, but you've used <code>&lt;</code> in your post.</p>\n\n<p>It would be a better idea to store these as ranges in the first place, so you don't have to rebuild them every time you call the function.</p>\n"}], "owner": {"reputation": 9, "user_id": 5688500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4b8c3bb02f32c4d7496d4ad91626e11?s=128&d=identicon&r=PG", "display_name": "Suo Huang", "link": "https://stackoverflow.com/users/5688500/suo-huang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1450306646, "creation_date": 1450300975, "last_edit_date": 1450306646, "question_id": 34322352, "link": "https://stackoverflow.com/questions/34322352/how-to-use-hash-table-with-multiple-keys", "title": "How to use hash table with multiple keys", "body": "<p>Considering creating a hash table:</p>\n\n<pre><code>a_Min   a_Max   b_Min   b_Max   p1   p2    p3     p4      p5       p6\n40.000  47.95   -95.0   -74.01  12.8 6.5 177.82 0.9150   68.62    0.9020\n42.000  47.95   -68.0   -59.50  11.0 5.8 185.20 0.9377   -11.80   0.9538\n44.000  47.95   -74.2   -68.05  12.8 6.5 157.45 0.9194   37.55    0.9297\n46.000  66.00   -59.5   -51.00  8.8  3.7 164.96 0.9465   -207.54  1.0342\n47.951  66.00   -79.0   -59.55  12.8 6.5 157.45 0.9194   37.55    0.9297\n47.951  66.00   -95.0   -79.01  12.8 6.5 177.82 0.9150   68.62    0.9020\n...\n</code></pre>\n\n<p>if giving any <code>(a,b)</code>, it will fall within the four boundary control values in the hash table <code>(a_Min, a_Max, b_min, b_Max)</code> and returns its relative parameters <code>(p1, p2, p3....)</code></p>\n\n<p>I am trying something like this:</p>\n\n<pre><code>def functionXXX(a, b)\n    threshold = XXX\n    for t in threshold do   \n       if (t[:a_Min]&lt;=a &amp;&amp; a&lt;t[:a_Max] &amp;&amp; t[:b_Min]&lt;=b &amp;&amp; b&lt;t[:b_Max]) then\n          return t\n          break\n       end\n    end\nend\n</code></pre>\n\n<p>Is this the correct way to do this task?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1450301341, "post_id": 34322195, "comment_id": 56386611, "body": "What do you get with <code>rake routes</code>?"}, {"owner": {"reputation": 1755, "user_id": 3247496, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/nDtef.png?s=128&g=1", "display_name": "Ahmad Al-kheat", "link": "https://stackoverflow.com/users/3247496/ahmad-al-kheat"}, "reply_to_user": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1450301816, "post_id": 34322195, "comment_id": 56386857, "body": "<code>api_user GET    &#47;users&#47;:id(.:format)           api&#47;v1&#47;users#show {:format=&gt;:json, :constraint=&gt;{:subdomain=&gt;&quot;api&quot;}}</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1755, "user_id": 3247496, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/nDtef.png?s=128&g=1", "display_name": "Ahmad Al-kheat", "link": "https://stackoverflow.com/users/3247496/ahmad-al-kheat"}, "is_accepted": false, "score": 0, "last_activity_date": 1450315732, "creation_date": 1450315732, "answer_id": 34325180, "question_id": 34322195, "link": "https://stackoverflow.com/questions/34322195/functional-test-for-scoped-controller-cant-find-the-right-route/34325180#34325180", "title": "Functional test for scoped controller can&#39;t find the right route", "body": "<p>I just needed to add the constraint to the test: </p>\n\n<pre><code>get :show, id: @user.id, format: :json, :constraint=&gt;{:subdomain=&gt;\"api\"}\n</code></pre>\n"}], "owner": {"reputation": 1755, "user_id": 3247496, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/nDtef.png?s=128&g=1", "display_name": "Ahmad Al-kheat", "link": "https://stackoverflow.com/users/3247496/ahmad-al-kheat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 174, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1450315732, "creation_date": 1450300422, "question_id": 34322195, "link": "https://stackoverflow.com/questions/34322195/functional-test-for-scoped-controller-cant-find-the-right-route", "title": "Functional test for scoped controller can&#39;t find the right route", "body": "<p>My <code>routes.rb</code> is : </p>\n\n<pre><code>Rails.application.routes.draw do\n  namespace :api, path: \"/\", constraint: { subdomain: \"api\" }, defaults: { format: :json } do \n    scope module: :v1 do \n      resources :users, only: [:show]\n\n    end\n  end\nend\n</code></pre>\n\n<p>My <code>users_controller.rb</code> is : </p>\n\n<pre><code>class Api::V1::UsersController &lt; ApplicationController\n  respond_to :json\n\n  def show\n    respond_with User.find(params[:id])\n  end\n\nend\n</code></pre>\n\n<p>My test is : </p>\n\n<pre><code>require 'test_helper'\nclass Api::V1::UsersControllerTest &lt; ActionController::TestCase\n\n  test '#show displays the specific user' do \n    @user = FactoryGirl.create(:user)\n\n    get :show, id: @user.id, format: :json\n    assert_response :success\n  end\nend\n</code></pre>\n\n<p>Why does this test give the following error: </p>\n\n<pre><code>ActionController::UrlGenerationError: No route matches {:action=&gt;\"show\", :controller=&gt;\"api/v1/users\", :format=&gt;:json, :id=&gt;1}\n</code></pre>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "postgresql", "activerecord"], "comments": [{"owner": {"reputation": 473266, "user_id": 939860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed7cecf2bd835cf5670d271d0d104f51?s=128&d=identicon&r=PG", "display_name": "Erwin Brandstetter", "link": "https://stackoverflow.com/users/939860/erwin-brandstetter"}, "edited": false, "score": 0, "creation_date": 1450303615, "post_id": 34321403, "comment_id": 56387747, "body": "Your fiddle is for MySQL. You&#39;ll want to change that to Postgres to match your question: <a href=\"http://sqlfiddle.com/#!15/77901/1\" rel=\"nofollow noreferrer\">sqlfiddle.com/#!15/77901/1</a>. Also, you neglected to mention possible NULL values in <code>returned_at</code> (I also adapted the schema to match your column names.)"}, {"owner": {"reputation": 473266, "user_id": 939860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed7cecf2bd835cf5670d271d0d104f51?s=128&d=identicon&r=PG", "display_name": "Erwin Brandstetter", "link": "https://stackoverflow.com/users/939860/erwin-brandstetter"}, "edited": false, "score": 0, "creation_date": 1451439874, "post_id": 34321403, "comment_id": 56785098, "body": "So do you have your answer?"}, {"owner": {"reputation": 2071, "user_id": 1499260, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cf6ki.jpg?s=128&g=1", "display_name": "jackerman09", "link": "https://stackoverflow.com/users/1499260/jackerman09"}, "reply_to_user": {"reputation": 473266, "user_id": 939860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed7cecf2bd835cf5670d271d0d104f51?s=128&d=identicon&r=PG", "display_name": "Erwin Brandstetter", "link": "https://stackoverflow.com/users/939860/erwin-brandstetter"}, "edited": false, "score": 0, "creation_date": 1451631826, "post_id": 34321403, "comment_id": 56851243, "body": "@ErwinBrandstetter - sorry for the delay in selecting an answer, I&#39;ve been out of the country, but I will be working to implement your solution and as soon as I do I will accept the answer. Thanks again"}], "answers": [{"comments": [{"owner": {"reputation": 2071, "user_id": 1499260, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cf6ki.jpg?s=128&g=1", "display_name": "jackerman09", "link": "https://stackoverflow.com/users/1499260/jackerman09"}, "edited": false, "score": 0, "creation_date": 1450301812, "post_id": 34322476, "comment_id": 56386855, "body": "Thanks for the quick and detailed response! I will review/test this and report back!"}, {"owner": {"reputation": 2071, "user_id": 1499260, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cf6ki.jpg?s=128&g=1", "display_name": "jackerman09", "link": "https://stackoverflow.com/users/1499260/jackerman09"}, "edited": false, "score": 0, "creation_date": 1450305854, "post_id": 34322476, "comment_id": 56388893, "body": "When I copy your query into my fiddle, I get this error: <code>You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;numeric &#39;100&#39;) &#47; g.capacity, 2) AS pct FROM ( SELECT ts, c.garage_id, count(&#39; at line 1</code>, should that have worked directly as you had it written?"}, {"owner": {"reputation": 473266, "user_id": 939860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed7cecf2bd835cf5670d271d0d104f51?s=128&d=identicon&r=PG", "display_name": "Erwin Brandstetter", "link": "https://stackoverflow.com/users/939860/erwin-brandstetter"}, "reply_to_user": {"reputation": 2071, "user_id": 1499260, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cf6ki.jpg?s=128&g=1", "display_name": "jackerman09", "link": "https://stackoverflow.com/users/1499260/jackerman09"}, "edited": false, "score": 0, "creation_date": 1450307445, "post_id": 34322476, "comment_id": 56389567, "body": "@jackerman09: Because <i>your</i>  fiddle  is for MySQL (which is simply wrong for a question tagged for Postgres). Try <i>my</i> fiddle, it works."}], "tags": [], "owner": {"reputation": 473266, "user_id": 939860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed7cecf2bd835cf5670d271d0d104f51?s=128&d=identicon&r=PG", "display_name": "Erwin Brandstetter", "link": "https://stackoverflow.com/users/939860/erwin-brandstetter"}, "is_accepted": false, "score": 4, "last_activity_date": 1451439947, "last_edit_date": 1495541042, "creation_date": 1450301394, "answer_id": 34322476, "question_id": 34321403, "link": "https://stackoverflow.com/questions/34321403/reporting-on-a-grouped-average-over-a-group-of-records/34322476#34322476", "title": "Reporting on a grouped average over a group of records", "body": "<p>This query would do it all (adapted to your added fiddle):</p>\n\n<pre><code>SELECT a.ts, g.*, round((a.ct * numeric '100') / g.capacity, 2) AS pct\nFROM  (\n   SELECT ts, c.garage_id, count(*) AS ct\n   FROM   generate_series(timestamp '2015-06-01 00:00'  -- lower and\n                        , timestamp '2015-12-01 00:00'  -- upper bound of range\n                        , interval  '4h') ts\n   JOIN   appointment a ON a.picked_up_at &lt;= ts     -- incl. lower\n                       AND (a.returned_at &gt;  ts OR\n                            a.returned_at IS NULL)  -- excl. upper bound\n   JOIN   car c ON c.id = a.car_id\n   GROUP  BY 1, 2\n   ) a\nJOIN   garage g ON g.id = a.garage_id\nORDER  BY 1, 2;\n</code></pre>\n\n<p><a href=\"http://sqlfiddle.com/#!15/77901/1\" rel=\"nofollow noreferrer\"><strong>SQL Fiddle.</strong></a></p>\n\n<p>If <code>returned_at IS NULL</code>, this query assumes that the car is still in use. So NULL shouldn't occur for other cases or you have an error in the calculation.</p>\n\n<p>First, I build the time series with the convenient <a href=\"http://www.postgresql.org/docs/current/interactive/functions-srf.html#FUNCTIONS-SRF-SERIES\" rel=\"nofollow noreferrer\"><code>generate_series()</code></a> function.</p>\n\n<p>Then join to appointments where the timestamp falls inside a booking.<br>\nI assume every appointment with including lower and excluding upper timestamp as it the widespread convention.</p>\n\n<p>Aggregate and count before we join to garages (faster this way). Compare:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/16018237/aggregate-a-single-column-in-query-with-many-columns/16023336#16023336\">Aggregate a single column in query with many columns</a></li>\n</ul>\n\n<p>Percent calculations in the outer <code>SELECT</code>.<br>\nI multiply the <code>bigint</code> number with <code>numeric</code> (or optionally <code>real</code> or <code>float</code>) to preserve fractional digits, which would be cut off in an integer division. Then I round to two fractional digits.</p>\n\n<p><strong>Note</strong> that this is not exactly the average percentage of each 4-hour period, but only the current percentage at each point in time, which is an approximation of the true average. You might start with an odd timestamp like '2015-06-01 01:17' so not to fall in between bookings that would probably turn over at full hours or something, which might increase the mean error of the approximation.</p>\n\n<p>You can do an exact calculation for 4h periods, too, but that's more sophisticated. One simple technique would be to reduce the interval to 10 minutes or some granularity that's detailed enough to capture the full picture.</p>\n\n<p>Related (with an example for exact calculation):</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/1839319/calculate-working-hours-between-2-dates-in-postgresql/17282639#17282639\">Calculate working hours between 2 dates in PostgreSQL</a></li>\n<li><a href=\"https://stackoverflow.com/questions/25247911/average-stock-history-table/25252274#25252274\">Average stock history table</a></li>\n</ul>\n"}], "owner": {"reputation": 2071, "user_id": 1499260, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cf6ki.jpg?s=128&g=1", "display_name": "jackerman09", "link": "https://stackoverflow.com/users/1499260/jackerman09"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 1, "answer_count": 1, "score": 5, "last_activity_date": 1451439947, "creation_date": 1450297459, "last_edit_date": 1450303023, "question_id": 34321403, "link": "https://stackoverflow.com/questions/34321403/reporting-on-a-grouped-average-over-a-group-of-records", "title": "Reporting on a grouped average over a group of records", "body": "<p>My goal is to generate a report showing the average occupancy of a garage (y-axis) at a given day of the week and/or time of day. My data model is as follows:</p>\n\n<ul>\n<li>Garage <code>has_many</code> Cars and Garage <code>has_many</code> Appointments, <code>through: :cars</code></li>\n<li>Car <code>has_many</code> Appointments</li>\n<li>Appointment has fields such as:\n\n<ul>\n<li>picked_up_at (datetime)</li>\n<li>returned_at (datetime)</li>\n</ul></li>\n</ul>\n\n<p>Also, Garage has a field <code>capacity (integer)</code>, which is the maximum number of cars that will fit in the garage.</p>\n\n<p>If I have a list of Appointments spanning the last 6 months, and I would like to generate a line-graph with the x-axis showing each day of the week, broken down into 4-hour intervals, and the y-axis showing the average % occupancy (# of cars in the garage / capacity) over the 6 month period for the given day/hour interval, how can I go about gathering this data to report on?</p>\n\n<p>E.g. a car is <code>In</code> from the time of one Appointment's return until the next Appointment's pickup, and <code>Out</code> from the Appointment's pickup until it's <code>returned_at</code> time.</p>\n\n<p>I am having a lot of trouble making the connection from these data points to the best way to meaningfully report on and present them to the end user.</p>\n\n<p>I am using Rails 4.1 and Ruby 2.0.</p>\n\n<p>Edit: SQL Fiddle - <a href=\"http://sqlfiddle.com/#!9/a72fe/1\" rel=\"nofollow\">http://sqlfiddle.com/#!9/a72fe/1</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ubuntu", "god"], "owner": {"reputation": 113, "user_id": 2293422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a55fbe589bb1db0de7f6d52b79c037e2?s=128&d=identicon&r=PG", "display_name": "oppositeday", "link": "https://stackoverflow.com/users/2293422/oppositeday"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 226, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1450302618, "creation_date": 1450297404, "last_edit_date": 1450302618, "question_id": 34321392, "link": "https://stackoverflow.com/questions/34321392/can-god-run-and-monitor-processes-for-multiple-environments-on-the-same-machine", "title": "Can god run and monitor processes for multiple environments on the same machine?", "body": "<p>I have a staging and development environment of a rails app on the same machine. Both us god to run and monitor a few processes.</p>\n\n<p>I've set up a god service that starts/stops/restarts the god process. It starts the process by running the following command:</p>\n\n<pre><code>/path/to/god -P /var/run/god.pid -c /opt/god/master.conf\n</code></pre>\n\n<p>And the master.conf:</p>\n\n<pre><code>ENV['RAILS_ENV'] = \"staging\"\nrails_root = ENV['RAILS_ROOT'] = \"/path/to/staging/root\"\n\nload \"#{rails_root}/config/god/process_one.god.rb\"\nload \"#{rails_root}/config/god/process_two.god.rb\"\n</code></pre>\n\n<p>I can run this successfully for one environment or the other but not both at the same time. How do I run it for both environments simultaneously?</p>\n"}, {"tags": ["ruby", "bash", "twitter-bootstrap", "gruntjs"], "comments": [{"owner": {"reputation": 1074, "user_id": 4265939, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7be5ce9e1d544a283c67748565132bab?s=128&d=identicon&r=PG&f=1", "display_name": "neilsimp1", "link": "https://stackoverflow.com/users/4265939/neilsimp1"}, "edited": false, "score": 1, "creation_date": 1463966683, "post_id": 34321360, "comment_id": 62273648, "body": "I had the same issue. I solved it by deleting the bootstrap folder in <code>node_modules</code> and replacing it with a git clone of <code>https:&#47;&#47;github.com&#47;twbs&#47;bootstrap&#47;tree&#47;v4-dev</code>. Then a cd into the folder and <code>npm install</code>, <code>grunt dist</code>."}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1569096955, "post_id": 34321360, "comment_id": 102487793, "body": "Please take a look at: <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 92945, "user_id": 1420197, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/84352b749bca68ff058e27fca784d2d5?s=128&d=identicon&r=PG", "display_name": "Ionic\u0103 Biz\u0103u", "link": "https://stackoverflow.com/users/1420197/ionic%c4%83-biz%c4%83u"}, "is_accepted": true, "score": 1, "last_activity_date": 1560247450, "creation_date": 1560247450, "answer_id": 56541270, "question_id": 34321360, "link": "https://stackoverflow.com/questions/34321360/cannot-load-grunt-sauce-browsers-yml-on-grunt-dist-with-bootstrap-4-alpha-2/56541270#56541270", "title": "Cannot load grunt/sauce_browsers.yml on grunt dist with Bootstrap 4 Alpha 2", "body": "<p>As <a href=\"https://stackoverflow.com/questions/34321360/cannot-load-grunt-sauce-browsers-yml-on-grunt-dist-with-bootstrap-4-alpha-2#comment62273648_34321360\">@neilsimp1 commented</a> a solution seems to be to delete the <code>bootstrap</code> folder in <code>node_modules</code>, do a clone of the branch and install Bootstrap there:</p>\n\n<pre><code># 1. Delete the bootstrap directory\ncd node_modules\nrm -rf bootstrap\n\n# 2. Clone the repo\ngit clone https://github.com/twbs/bootstrap --depth 1\n\n# 3. Switch to v4\ncd bootstrap\ngit checkout v4-dev\n\n# 4. Install and build\nnpm install\ngrunt dist\n</code></pre>\n\n<p>(lines starting with <code>#</code> are comments)</p>\n"}], "owner": {"reputation": 367, "user_id": 4754996, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/587280544745894/picture?type=large", "display_name": "Stalin Kay", "link": "https://stackoverflow.com/users/4754996/stalin-kay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 3, "accepted_answer_id": 56541270, "answer_count": 1, "score": 14, "last_activity_date": 1560247458, "creation_date": 1450297305, "last_edit_date": 1560247458, "question_id": 34321360, "link": "https://stackoverflow.com/questions/34321360/cannot-load-grunt-sauce-browsers-yml-on-grunt-dist-with-bootstrap-4-alpha-2", "title": "Cannot load grunt/sauce_browsers.yml on grunt dist with Bootstrap 4 Alpha 2", "body": "<p>I'm trying to compile a custom version of bootstrap v4 alpha2 but I keep getting 2 errors. Please help. I'm a noob at ruby.</p>\n\n<p>I managed to install</p>\n\n<pre><code>$ gem install bundler\n</code></pre>\n\n<p>In fact, there is no .bundle directory under bootstrap</p>\n\n<p>Running the following fails, from /node_modules/bootstrap</p>\n\n<pre><code>$ bundle install\n</code></pre>\n\n<p>The following also fails:</p>\n\n<pre><code>$ grunt dist\n\n\nLoading \"Gruntfile.js\" tasks...ERROR\n&gt;&gt; Error: Unable to read \"grunt/sauce_browsers.yml\" file (Error code: ENOENT).\nWarning: Task \"dist\" not found. Use --force to continue.\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "installation", "rubygems", "rvm"], "comments": [{"owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 0, "creation_date": 1450298039, "post_id": 34321123, "comment_id": 56384797, "body": "set your default ruby version in rvm using this <code>$ rvm --default use 2.2.3</code> or to whatever ruby version you want and they try to install gem."}], "answers": [{"tags": [], "owner": {"reputation": 197, "user_id": 7096491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x9P7Z.jpg?s=128&g=1", "display_name": "mrabins", "link": "https://stackoverflow.com/users/7096491/mrabins"}, "is_accepted": false, "score": 0, "last_activity_date": 1487005584, "creation_date": 1487005584, "answer_id": 42209587, "question_id": 34321123, "link": "https://stackoverflow.com/questions/34321123/issues-installing-ruby-gems/42209587#42209587", "title": "Issues installing ruby gems", "body": "<p>It's not an issue per se, but you might find incompatibilities between old gems and current version of rails. </p>\n\n<p>Run <code>rvm list</code> and then set the default to the latest version of rails and update your gems. </p>\n"}], "owner": {"reputation": 10190, "user_id": 5236226, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ffj4X.jpg?s=128&g=1", "display_name": "Caleb Kleveter", "link": "https://stackoverflow.com/users/5236226/caleb-kleveter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 924, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487005584, "creation_date": 1450296439, "question_id": 34321123, "link": "https://stackoverflow.com/questions/34321123/issues-installing-ruby-gems", "title": "Issues installing ruby gems", "body": "<p>I am trying to install bundler using ruby gems and RVM, but I am running into this error when I run the <code>bundle init</code> command:</p>\n\n<pre><code>/Library/Ruby/Site/2.0.0/rubygems/dependency.rb:315:in `to_specs': Could not find 'bundler' (&gt;= 0) among 13 total gem(s) (Gem::LoadError)\nChecked in 'GEM_PATH=/Users/CalebKleveter/.rvm/gems/ruby-2.2.3:/Users/CalebKleveter/.rvm/gems/ruby-2.2.3@global', execute `gem env` for more information\n    from /Library/Ruby/Site/2.0.0/rubygems/dependency.rb:324:in `to_spec'\n    from /Library/Ruby/Site/2.0.0/rubygems/core_ext/kernel_gem.rb:64:in `gem'\n    from /Users/CalebKleveter/.gem/ruby/2.0.0/bin/bundle:22:in `&lt;main&gt;'\n</code></pre>\n\n<p>I am installing it using this command:</p>\n\n<pre><code>gem install --user-install bundler\n</code></pre>\n\n<p>I was having issues before when downloading bundler. I was getting this error:</p>\n\n<pre><code>WARNING:  You don't have /Users/CalebKleveter/.gem/ruby/2.2.0/bin in your PATH,\n      gem executables will not run.\n</code></pre>\n\n<p>So I ran this command to fix it:</p>\n\n<pre><code>PATH=$PATH:/Users/CalebKleveter/.gem/ruby/2.2.0/bin export PATH\n</code></pre>\n\n<p>Am I installing it in the wrong spot?</p>\n\n<p>All gems were working earlier, but I ran this command:</p>\n\n<pre><code>rvm use 2.2.3\n</code></pre>\n\n<p>So I am using ruby version 2.2.3, I was using version 2.0.0 before if I remember correctly. Is that the issue?</p>\n"}, {"tags": ["ruby", "sass", "rubygems"], "comments": [{"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 1, "creation_date": 1450297640, "post_id": 34320904, "comment_id": 56384553, "body": "The saas gem doesn&#39;t have any executables. What were you expecting to happen."}, {"owner": {"reputation": 77, "user_id": 3949744, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/884e16bbac2525e3a95a271214eafb86?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Saini", "link": "https://stackoverflow.com/users/3949744/gaurav-saini"}, "reply_to_user": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1450357612, "post_id": 34320904, "comment_id": 56411856, "body": "Shouldn&#39;t it create an executable for Sass and place it in the bin so that I can run Sass commands. If not how do I run Sass now?"}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1450357661, "post_id": 34320904, "comment_id": 56411892, "body": "You haven&#39;t installed sass. You&#39;ve installed saas"}], "owner": {"reputation": 77, "user_id": 3949744, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/884e16bbac2525e3a95a271214eafb86?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Saini", "link": "https://stackoverflow.com/users/3949744/gaurav-saini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1521944179, "creation_date": 1450295649, "last_edit_date": 1521944179, "question_id": 34320904, "link": "https://stackoverflow.com/questions/34320904/not-able-to-find-saas-on-osx", "title": "Not able to find saas on osx", "body": "<p>I installed saas using gem. It got installed successfully.</p>\n\n<pre><code>Fetching: saas-0.1.1.gem (100%)\nSuccessfully installed saas-0.1.1\nParsing documentation for saas-0.1.1\nInstalling ri documentation for saas-0.1.1\n1 gem installed\n</code></pre>\n\n<p>But now when i do saas -v, i get:</p>\n\n<pre><code>-bash: saas: command not found\n</code></pre>\n\n<p>There are tons of question regarding the same but nothing works for me.</p>\n\n<p>gem env gives this output:</p>\n\n<pre><code>RubyGems Environment:\n  - RUBYGEMS VERSION: 2.0.14\n  - RUBY VERSION: 2.0.0 (2014-05-08 patchlevel 481) [universal.x86_64-darwin14]\n  - INSTALLATION DIRECTORY: /Users/gaurav/.gem\n  - RUBY EXECUTABLE: /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby\n  - EXECUTABLE DIRECTORY: /Users/gaurav/.gem/bin\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - universal-darwin-14\n  - GEM PATHS:\n     - /Users/gaurav/.gem\n     - /Users/gaurav/.gem/ruby/2.0.0\n     - /Library/Ruby/Gems/2.0.0\n     - /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/gems/2.0.0\n  - GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n  - REMOTE SOURCES:\n     - https://rubygems.org/\n</code></pre>\n\n<p>The bin and ruby directory is not present in /Users/gaurav/.gem/. </p>\n"}, {"tags": ["ruby", "coding-style"], "comments": [{"owner": {"reputation": 887, "user_id": 4664086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca859ce2ca107d4a1110965ef40d7f6?s=128&d=identicon&r=PG&f=1", "display_name": "Damiano Stoffie", "link": "https://stackoverflow.com/users/4664086/damiano-stoffie"}, "edited": false, "score": 0, "creation_date": 1450296316, "post_id": 34320808, "comment_id": 56383850, "body": "The first thing you <b>absolutely</b> want to do is store the countries inside a hash"}, {"owner": {"reputation": 25, "user_id": 3774287, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0C3t.png?s=128&g=1", "display_name": "TristanBomb", "link": "https://stackoverflow.com/users/3774287/tristanbomb"}, "reply_to_user": {"reputation": 887, "user_id": 4664086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca859ce2ca107d4a1110965ef40d7f6?s=128&d=identicon&r=PG&f=1", "display_name": "Damiano Stoffie", "link": "https://stackoverflow.com/users/4664086/damiano-stoffie"}, "edited": false, "score": 0, "creation_date": 1450296395, "post_id": 34320808, "comment_id": 56383886, "body": "@DamianoStoffie Do you mean replacing the array or replacing the class?"}, {"owner": {"reputation": 213, "user_id": 2304511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf3c73ff695a758432f256d3cfd76472?s=128&d=identicon&r=PG", "display_name": "R. Peereboom", "link": "https://stackoverflow.com/users/2304511/r-peereboom"}, "edited": false, "score": 0, "creation_date": 1450363948, "post_id": 34320808, "comment_id": 56416256, "body": "The solution by @spickermann is one that I would recommend, but there are some bigger issues here regarding class design. It might be worth reading up on the <a href=\"https://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29\" rel=\"nofollow noreferrer\">SOLID principles</a>, especially the Single Responsibility Principle and <a href=\"https://en.wikipedia.org/wiki/Don&#39;t_repeat_yourself\" rel=\"nofollow noreferrer\">DRY</a>."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 3774287, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0C3t.png?s=128&g=1", "display_name": "TristanBomb", "link": "https://stackoverflow.com/users/3774287/tristanbomb"}, "edited": false, "score": 0, "creation_date": 1450301765, "post_id": 34321427, "comment_id": 56386838, "body": "Thank you! I considered using a JSON file, but it seemed like more hassle than it was worth."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 3, "last_activity_date": 1450297537, "creation_date": 1450297537, "answer_id": 34321427, "question_id": 34320808, "link": "https://stackoverflow.com/questions/34320808/rubyish-way-of-adding-many-variables-to-a-class/34321427#34321427", "title": "Rubyish way of adding many variables to a class", "body": "<p>I would store the countries` details in a file (e.q. countries.yml or a csv file) or a database:</p>\n\n<pre><code># in countries.yml\nafganistan:\n  name: Afganistan\n  tags:\n    - authoritarian\n    - reactionary\n    - sunni\n    - capitalist\n    - militarist\n    - southern_asia\n    - unstable\n  gdp: 20444\n  population: 26023\nalbania:\n  name: Albania\n  tags:\n    ...\n    ...\n</code></pre>\n\n<p>Then your class simplified to:</p>\n\n<pre><code>require 'yaml'\n\nclass Countries\n  include Singleton\n\n  def get(country)\n    @countries[country]\n  end\n\n  def initialize\n    @countries = {}\n\n    YAML.load_file('countries.yml').each do |country_key, options|\n      country = Country.new(options['name'], options['tags'])\n      country.gdp = options['gdp']\n      country.population = options['population']\n\n      @countries[country_key] = country\n    end\n\n    @countries.keys # just to keep the interface compatible with your example \n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 3774287, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0C3t.png?s=128&g=1", "display_name": "TristanBomb", "link": "https://stackoverflow.com/users/3774287/tristanbomb"}, "edited": false, "score": 0, "creation_date": 1450299734, "post_id": 34321464, "comment_id": 56385812, "body": "Thank you very much for the help, although I think having 3 separate objects to get from the table to the hash seems like a bit much. You know better, though."}], "tags": [], "owner": {"reputation": 887, "user_id": 4664086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca859ce2ca107d4a1110965ef40d7f6?s=128&d=identicon&r=PG&f=1", "display_name": "Damiano Stoffie", "link": "https://stackoverflow.com/users/4664086/damiano-stoffie"}, "is_accepted": false, "score": 2, "last_activity_date": 1450297625, "creation_date": 1450297625, "answer_id": 34321464, "question_id": 34320808, "link": "https://stackoverflow.com/questions/34320808/rubyish-way-of-adding-many-variables-to-a-class/34321464#34321464", "title": "Rubyish way of adding many variables to a class", "body": "<p>There are hundreds of ways you can DRY your code, but your error is essentially not using a <a href=\"http://ruby-doc.org/core-1.9.3/Hash.html\" rel=\"nofollow\">hash data stucture</a> (or an external file, as suggested).</p>\n\n<p>This is how I would do it, I made some assumptions, hope this helps!</p>\n\n<pre><code># I'll assume that Country is an actual class with a purpose, and not a simple\n# structure.\nCountry = Struct.new(:name, :tags, :gdp, :population)\n\n# list of all the countries\nCOUNTRIES_TABLE = [\n  [\"Afghanistan\", [:authoritarian, :reactionary], 20444, 26023],\n  [\"Albania\", [:hybrid, :conservative], 13276, 2893]\n  # etc..\n]\n\nCOUNTRIES = COUNTRIES_TABLE.map { |e| Country.new(*e) }\n# we could have directly defined the hash instead of a table, but this keeps\n# everything more DRY\nCOUNTRIES_HASH = COUNTRIES.map {|e| [e.name, e]}.to_h\n\nputs COUNTRIES_HASH[\"Albania\"].name\n\nCOUNTRIES_HASH.map do |k,v|\n  puts v.name\nend\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 3774287, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0C3t.png?s=128&g=1", "display_name": "TristanBomb", "link": "https://stackoverflow.com/users/3774287/tristanbomb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 34321427, "answer_count": 2, "score": 2, "last_activity_date": 1450297625, "creation_date": 1450295293, "question_id": 34320808, "link": "https://stackoverflow.com/questions/34320808/rubyish-way-of-adding-many-variables-to-a-class", "title": "Rubyish way of adding many variables to a class", "body": "<p>I've been working on a game (more of a web toy if anything) that requires a long list of countries to simulate, and I've managed to get it to work, but I can't help but feel that my solution is neither a Rubyish nor elegant way of doing it.</p>\n\n<p>The code looks a bit like this:</p>\n\n<pre><code>class Countries\n    include Singleton\n\n    def get(tag)\n        return eval \"@#{tag}\"\n    end\n\n    def initialize\n        @array = []\n\n        @afghanistan = Country.new(\"Afghanistan\", [:authoritarian, :reactionary, :sunni, :capitalist, :militarist, :southern_asia, :unstable])\n        @afghanistan.gdp = 20444\n        @afghanistan.population = 26023\n        @array &lt;&lt; :afghanistan\n\n        @albania = Country.new(\"Albania\", [:hybrid, :conservative, :sunni, :capitalist, :pacifist, :southern_europe])\n        @albania.gdp = 13276\n        @albania.population = 2893\n        @array &lt;&lt; :albania\n    #and so on and so forth\n    end\n    attr_accessor :array\nend\n\ncountries = Countries.instance\nputs countries.get(\"usa\").name\nputs\nfor i in 0..(countries.array.size-1)\n    puts countries.get(countries.array[i]).name\nend\n</code></pre>\n\n<p>And I get the expected output of</p>\n\n<pre><code>United States\n\nAfghanistan\nAlbania\nAlgeria\n...\n</code></pre>\n\n<p>But ideally an elegant solution would not require .get(), and this really doesn't seem like a Ruby-like way of solving this issue. Is there a better-practice way of doing this?</p>\n\n<p>I mostly learned the little bit I know from Stack Overflow, the Ruby docs, and testing, so it's very possible I have violated a lot of best practices along the way. The Country class's initializer takes a string for the name and an array of tags to add, while other properties are intended to be added in separate lines.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "selenium", "capybara", "poltergeist"], "comments": [{"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1450296161, "post_id": 34320768, "comment_id": 56383761, "body": "What errors do you get for each - and what is the html like?  Are some of the controls hidden via css?"}, {"owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 0, "creation_date": 1450296461, "post_id": 34320768, "comment_id": 56383922, "body": "Could you please choose a better title? It is very unclear what you want from the title alone."}], "answers": [{"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": false, "score": 1, "last_activity_date": 1450296347, "creation_date": 1450296347, "answer_id": 34321099, "question_id": 34320768, "link": "https://stackoverflow.com/questions/34320768/capybara-poltergeist-and-selenium-different/34321099#34321099", "title": "Capybara Poltergeist and Selenium different", "body": "<p>It looks like you're passing XPath selectors to <code>#find</code> while telling it they are css -- its pure chance either of those works - you probably want</p>\n\n<pre><code>find(:css, 'input#component_1').set(true)\n</code></pre>\n\n<p>or just</p>\n\n<pre><code>check('component_1')  # I'm assuming this is a checkbox due to setting true/clicking label being enough\n</code></pre>\n\n<p>if the checkbox is hidden then you won't be able to set it in which case you should be able to do the following</p>\n\n<pre><code>find(:css, 'label[for=component_1]').click\n</code></pre>\n"}], "owner": {"reputation": 163, "user_id": 5323557, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8355c158ed15ea9a285b630674655ff1?s=128&d=identicon&r=PG&f=1", "display_name": "KotaBear233", "link": "https://stackoverflow.com/users/5323557/kotabear233"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1450296347, "creation_date": 1450295140, "question_id": 34320768, "link": "https://stackoverflow.com/questions/34320768/capybara-poltergeist-and-selenium-different", "title": "Capybara Poltergeist and Selenium different", "body": "<pre><code>  find(:css, \"//input[@id='component_1']\").set(true) #poltergeist\n  # find(:css, \"//label[@for='component_1']\").click #selenium\n</code></pre>\n\n<p>I have an issue alternating between selenium and poltergeist:</p>\n\n<p>The top find method only works in Poltergeist and I need to comment out the bottom one. The bottom method only works in Selenium and not Poltergeist.</p>\n\n<p>I have to set the INPUT to true in Poltergeist and click the LABEL in selenium to work.</p>\n\n<p>This is to select a radio button.</p>\n\n<p>I would like one method that worked in both. Any advice would be appreciated.</p>\n"}, {"tags": ["ruby", "linux", "windows", "multithreading", "virtual-machine"], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1450300124, "post_id": 34320876, "comment_id": 56386026, "body": "VirtualBox doesn&#39;t emulate, it virtualizes. That&#39;s what makes it a hypervisor in the first place. (In fact, with modern guest operating systems, it actually paravirtualizes.) There are some parts which VirtualBox emulates, such as networking, but the most important parts (CPU, memory) are virtualized for older guests and paravirtualized for modern guests."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1450305902, "post_id": 34320876, "comment_id": 56388918, "body": "@J&#246;rgWMittag: while it is true that the VM industry usually uses the words &quot;emulate&quot; and &quot;virtualize&quot; with specific technical meanings, I think you risk confusing the OP by introducing them.  The dictionary definition for the word &quot;emulate&quot; covers both emulation and virtualization, and the distinction simply doesn&#39;t matter in this context."}], "tags": [], "owner": {"reputation": 2473, "user_id": 4683460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24dafd813f96fc34b9b3f7c0455f9011?s=128&d=identicon&r=PG", "display_name": "Joel C", "link": "https://stackoverflow.com/users/4683460/joel-c"}, "is_accepted": true, "score": 2, "last_activity_date": 1450295569, "creation_date": 1450295569, "answer_id": 34320876, "question_id": 34320605, "link": "https://stackoverflow.com/questions/34320605/does-a-type-2-virtual-host-suffer-the-same-limitations-as-the-host-os/34320876#34320876", "title": "Does a Type 2 virtual host suffer the same limitations as the host OS?", "body": "<p>Short answer: No</p>\n\n<p>Longer answer:</p>\n\n<p>A type-2 hypervisor such as VirtualBox emulates the entire hardware platform that the guest (such as Linux) runs on. As such, the guest OS does not actually call any host OS system calls, which allows the guest to bypass any limitations of the host OS (such as the <code>fork</code>ing limitation on Windows).</p>\n"}], "owner": {"reputation": 582, "user_id": 1373512, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/bXEMm.jpg?s=128&g=1", "display_name": "HedonicHedgehog", "link": "https://stackoverflow.com/users/1373512/hedonichedgehog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 34320876, "answer_count": 1, "score": 0, "last_activity_date": 1450295569, "creation_date": 1450294544, "question_id": 34320605, "link": "https://stackoverflow.com/questions/34320605/does-a-type-2-virtual-host-suffer-the-same-limitations-as-the-host-os", "title": "Does a Type 2 virtual host suffer the same limitations as the host OS?", "body": "<p>Does the host OS impose limitations on the guest OS for a Type 2 virtual host (i.e. VirtualBox)?</p>\n\n<p>For example:\n   In Ruby, creating a child process is as easy as making a call to fork. However, forking on windows is not supported and instead an entire process must be spawned for multithreaded.</p>\n\n<p>As I understand, this is a limitation of the operating system and not the programming language. Will having Windows as the host OS force these restrictions on a linux guest OS?</p>\n\n<p>How are commands given to the guest OS passed to the host OS?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "minitest"], "answers": [{"tags": [], "owner": {"reputation": 4457, "user_id": 4856698, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YF1b0zyYypU/AAAAAAAAAAI/AAAAAAAAAB0/6hdTAeg_61s/photo.jpg?sz=128", "display_name": "NickGnd", "link": "https://stackoverflow.com/users/4856698/nickgnd"}, "is_accepted": true, "score": 1, "last_activity_date": 1450294567, "creation_date": 1450294567, "answer_id": 34320617, "question_id": 34320524, "link": "https://stackoverflow.com/questions/34320524/how-to-make-the-test-name-match-the-controller-name/34320617#34320617", "title": "How to make the test name match the controller name?", "body": "<p>I think you miss </p>\n\n<pre><code>require 'test_helper'\n</code></pre>\n\n<p>at the top of your file. Give a try.</p>\n"}], "owner": {"reputation": 1755, "user_id": 3247496, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/nDtef.png?s=128&g=1", "display_name": "Ahmad Al-kheat", "link": "https://stackoverflow.com/users/3247496/ahmad-al-kheat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 34320617, "answer_count": 1, "score": 1, "last_activity_date": 1450294567, "creation_date": 1450294267, "question_id": 34320524, "link": "https://stackoverflow.com/questions/34320524/how-to-make-the-test-name-match-the-controller-name", "title": "How to make the test name match the controller name?", "body": "<p>I have this <code>users_controller</code> </p>\n\n<pre><code>class Api::V1::UsersController &lt; ApplicationController\n  respond_to :json\n\n  def show\n    respond_with User.find(params[:id])\n  end\n\nend\n</code></pre>\n\n<p>The file is in <code>app/controllers/api/v1/</code></p>\n\n<p>And my test is : </p>\n\n<pre><code>class Api::V1::UsersControllerTest &lt; ActionController::TestCase\n\n  test '#show displays the specific user' do \n    @user = FactoryGirl.build(:user)\n\n    get :show, id: @user.id\n    assert_response :success\n  end\nend\n</code></pre>\n\n<p>The file is in <code>test/controllers/api/v1</code> </p>\n\n<p>When I run the test I get this error : </p>\n\n<pre><code>NameError: uninitialized constant Api\n/Users/Ahmad/rails_apps/json_api/test/controllers/api/v1/users_controller_test.rb:1:in `&lt;top (required)&gt;'\n</code></pre>\n\n<p>What's going on? </p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "polymorphism"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1450295396, "post_id": 34319834, "comment_id": 56383374, "body": "<a href=\"http://stackoverflow.com/questions/11502433/what-is-the-difference-between-polymorphism-and-duck-typing?rq=1\" title=\"what is the difference between polymorphism and duck typing\">stackoverflow.com/questions/11502433/&hellip;</a> , <a href=\"http://stackoverflow.com/questions/19165430/how-to-work-with-ruby-duck-typing?rq=1\" title=\"how to work with ruby duck typing\">stackoverflow.com/questions/19165430/&hellip;</a> and <a href=\"http://stackoverflow.com/questions/137661/how-do-you-do-polymorphism-in-ruby?rq=1\" title=\"how do you do polymorphism in ruby\">stackoverflow.com/questions/137661/&hellip;</a> are pertinent."}], "answers": [{"comments": [{"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1450294810, "post_id": 34319985, "comment_id": 56383042, "body": "Matz : &quot;Ruby is dynamic (interpreted), strongly typed (mostly), dynamically typed (known as duck typing)&quot;(<a href=\"https://searchcode.com/codesearch/view/15583534/\" rel=\"nofollow noreferrer\">searchcode.com/codesearch/view/15583534</a>)"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1450300314, "post_id": 34319985, "comment_id": 56386117, "body": "Please, don&#39;t spread misinformation. Even if that misinformation comes from the ruby-lang website. There is no such thing as an interpreted language. A language is an abstract mathematical object, a set of logical rules and restrictions. A language isn&#39;t compiled or interpreted. A language just <i>is</i>. Compilation or interpretation are traits of the compiler or interpreter (duh!), not the language. Case in point: all currently existing implementations of Ruby are compiled: YARV compiles Ruby to YARV bytecode, Rubinius compiles Ruby to Rubinius bytecode which it then translates to Rubinius IR \u2026"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1450300507, "post_id": 34319985, "comment_id": 56386203, "body": "\u2026 which it then translates to LLVM IR which it then compiles to native code, so Rubinius actually contains <i>at least</i> two compilers and up to 4 or even more depending on how you count. JRuby compiles to JRuby IR which it then further compiles to JVM bytecode, even ahead-of-time if you want to. JRuby+Truffle+Graal compiles to native code. Topaz compiles to Topaz bytecode which it then further compiles to native code. Opal compiles to ECMAScript. MagLev compiles to Gemstone/S bytecode which it then further compiles to native code. MRuby compiles to MRuby bytecode. RubyMotion compiles to native \u2026"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1450300584, "post_id": 34319985, "comment_id": 56386233, "body": "\u2026 code. IronRuby compiles to DLR trees which the DLR then compiles to CIL intcode. The only production-quality Ruby implementation in the history of Ruby that had no compiler was MRI, which is now obsolete and unmaintained."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1450300840, "post_id": 34319985, "comment_id": 56386358, "body": "Also, please don&#39;t use badly-defined terms like &quot;loosely-typed&quot; and &quot;strict type checking&quot; without defining them, so we know what you are talking about. Unlike the terms &quot;static&quot;, &quot;dynamic&quot;, &quot;explicit&quot; and &quot;implicit&quot;, those terms (&quot;strict&quot;, &quot;loose&quot;, &quot;weak&quot;, &quot;strong&quot;) do not have a widely agreed-upon definition. Everybody has their own definition, and if you don&#39;t provide <i>yours</i>, then the term is meaningless."}, {"owner": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1450312140, "post_id": 34319985, "comment_id": 56391078, "body": "@J&#246;rgWMittag: I&#39;ve been using Ruby for about 6 months. I like to think I&#39;m at least decent at it, but now you&#39;ve made me confused. When I type <code>ruby</code> into my terminal and pass it a <code>*.rb</code> as an argument. What am I using?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "edited": false, "score": 0, "creation_date": 1450344353, "post_id": 34319985, "comment_id": 56403206, "body": "@c650: Current versions of OSX come with a version of YARV pre-installed. Older versions of OSX come with a version of MRI pre-installed. Sometime in between, they also had an additional private version of MacRuby pre-installed. So, if you are using OSX, the answer is probably YARV if you didn&#39;t install anything yourself, otherwise it&#39;s whatever you installed. If you are using another operating system, it&#39;s whatever you installed, since to my knowledge no current mainstream OS comes with a Ruby implementation pre-installed."}, {"owner": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1450371876, "post_id": 34319985, "comment_id": 56421957, "body": "@J&#246;rgWMittag I have RVM. So... is my Ruby code actually being compiled these days?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "edited": false, "score": 0, "creation_date": 1450443871, "post_id": 34319985, "comment_id": 56454043, "body": "@c650: RVM is just a tool for installing and managing Ruby implementations, it is not a Ruby implementation. I cannot tell which Ruby implementations you installed using RVM, so I cannot answer your question. However, like I said, there has only been a single Ruby implementation without a compiler in the entire history of Ruby, namely MRI, and that implementation is no longer being developed, maintained, or supported for almost two and a half years now. So, unless you installed this very old and unmaintained version, yes, you are using a Ruby implementation with a compiler. The most likely \u2026"}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1450445252, "post_id": 34319985, "comment_id": 56454936, "body": "@J&#246;rgWMittag Please feel free to add to the answer, I have made it community wiki"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1450445545, "post_id": 34319985, "comment_id": 56455085, "body": "\u2026 guess is that you are using YARV, which compiles Ruby sourcecode to YARV bytecode which it then interprets. You can check which Ruby implementation you are using, by checking the value of the global constant <code>RUBY_ENGINE</code>. It will be something like <code>&#39;jruby&#39;</code> for JRuby, <code>&#39;ironruby&#39;</code> for IronRuby, <code>&#39;mruby&#39;</code> for MRuby, <code>&#39;topaz&#39;</code> for Topaz, and so on. Confusingly, YARV will just say <code>&#39;ruby&#39;</code>, even more confusingly, MRI will <i>also</i> just say <code>&#39;ruby&#39;</code>."}, {"owner": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1450461704, "post_id": 34319985, "comment_id": 56464798, "body": "@J&#246;rgWMittag: I am very aware that RVM is just a version manager. I just figured it had a default Ruby implementation."}, {"owner": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1450552071, "post_id": 34319985, "comment_id": 56490513, "body": "@J&#246;rgWMittag also, would that mean that &quot;interpreted&quot; languages aren&#39;t really interpreted, or is this limited to Ruby?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "edited": false, "score": 0, "creation_date": 1450585291, "post_id": 34319985, "comment_id": 56497381, "body": "@c650: This question is non-sensical, it cannot even be answered with &quot;No&quot;, because that would imply that the question makes sense to be asked. There is no such thing as an interpreted language. Period. A language is an abstract mathematical object, a set of logical rules and restrictions. A language isn&#39;t compiled or interpreted. A language just is. Compilation or interpretation are traits of the compiler or interpreter (duh!), not the language. If English were a typed language, the term &quot;interpreted language&quot; would be a type error. Every language can be implemented with a compiler and \u2026"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1450585517, "post_id": 34319985, "comment_id": 56497425, "body": "\u2026 every language can be implemented with an interpreter. Most languages have both interpreted and compiled implementations. Most modern high-performance language implementations combine compilers and interpreters in a single implementation. There are compilers for Ruby (e.g. Opal, JRuby), ECMAScript (e.g. V8), and PHP (Quercus, P8). There are interpreters for C and C++ (Cint, Cling). JRuby started out as a pure interpreter, and later they added a JIT and an AOT compiler for performance reasons. IronRuby started out as a pure compiler, and later they added an interpreter for performance reasons"}], "tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": false, "score": 1, "last_activity_date": 1450444984, "last_edit_date": 1495539876, "creation_date": 1450292340, "answer_id": 34319985, "question_id": 34319834, "link": "https://stackoverflow.com/questions/34319834/what-is-the-difference-between-duck-typing-and-polymorphism-in-ruby/34319985#34319985", "title": "What is the difference between duck-typing and polymorphism in Ruby?", "body": "<p>Ruby being <del>loosely</del> <strong>dynamically-typed</strong> <del>and interpreted</del> language, <del>there is no strict type checking</del> type checking is done at runtime.  When you invoke a method on an object, as long as it has that method defined - you will be able to invoke it and Ruby will not complain.  This is duck-typing - \"It's a duck if it quacks like a duck\" - in other words, \"If an object responds to all the methods of a class, then, may be its type is that class\".  Ruby doesn't really care much about classes - it's all about calling methods on objects.</p>\n\n<p>You can't really demonstrate polymorphism in stricter sense as can be done in <del>strongly</del> statically-typed compiled languages like Java where an object's class must be either of the type of the variable it is being assigned to or must be a derived class of variable's type or implement the interface if the variable's type is interface.</p>\n\n<p>One can verify whether an object's type is a specific class if need be as explained in \"<a href=\"http://stackover.flow.com/questions/3424782/ruby-on-rails-how-do-i-check-if-a-variable-in-an-instance-of-a-class\" rel=\"nofollow noreferrer\">How do I check if a variable in an instance of a class?</a>\".</p>\n\n<p>You may also want to <a href=\"https://stackoverflow.com/a/2696369/794242\">read discussion to understand the terminologies used to characterize languages based on the type system</a>.</p>\n"}], "owner": {"reputation": 8818, "user_id": 2714301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/23c7ba1f14e71e14f65b7b95516b0f19?s=128&d=identicon&r=PG", "display_name": "Jwan622", "link": "https://stackoverflow.com/users/2714301/jwan622"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 756, "favorite_count": 0, "closed_date": 1450300891, "answer_count": 1, "score": 0, "last_activity_date": 1450444984, "creation_date": 1450291761, "last_edit_date": 1450294995, "question_id": 34319834, "link": "https://stackoverflow.com/questions/34319834/what-is-the-difference-between-duck-typing-and-polymorphism-in-ruby", "closed_reason": "Duplicate", "title": "What is the difference between duck-typing and polymorphism in Ruby?", "body": "<p>I was reading \"<a href=\"https://robots.thoughtbot.com/back-to-basics-polymorphism-and-ruby\" rel=\"nofollow\">Back to Basics: Polymorphism and Ruby</a>\" and it seems like they define polymorphism as:</p>\n\n<blockquote>\n  <p>Polymorphism - the provision of a single interface to entities of different types</p>\n</blockquote>\n\n<p>which sounds a lot like</p>\n\n<blockquote>\n  <p>duck-typing: In computer programming with object-oriented programming languages, duck typing is a layer of programming language and design rules on top of typing. Typing is concerned with assigning a type to any object. Duck typing is concerned with establishing the suitability of an object for some purpose. With normal typing, suitability is assumed to be determined by an object's type only. In duck typing, an object's suitability is determined by the presence of certain methods and properties (with appropriate meaning), rather than the actual type of the object.</p>\n</blockquote>\n\n<p>According to the link, duck-typing seems to be when a method behaves differently depending on the object that receives its message. But that sounds a lot like polymorphism, no?</p>\n"}, {"tags": ["python", "ruby", "firefox", "selenium", "watir"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5684480"}, "edited": false, "score": 0, "creation_date": 1450322775, "post_id": 34319890, "comment_id": 56394115, "body": "When I create a profile by &quot;firefox -p&quot;, how would I know its path?"}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "edited": false, "score": 0, "creation_date": 1450326445, "post_id": 34319890, "comment_id": 56395101, "body": "@PeterT. usually, to get the profile path, you go to Help -&gt; Troubleshooting information -&gt; Profile folder."}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": false, "score": 3, "last_activity_date": 1450292002, "creation_date": 1450292002, "answer_id": 34319890, "question_id": 34319832, "link": "https://stackoverflow.com/questions/34319832/load-a-profile-of-firefox-in-python-selenium/34319890#34319890", "title": "Load a profile of Firefox in python selenium", "body": "<p>In Python, you can <em>load a specific profile by path</em>:</p>\n\n<pre><code>from selenium import webdriver\n\nprofile = webdriver.FirefoxProfile(profile_directory=\"path/to/profile\")\ndriver = webdriver.Firefox(firefox_profile=profile)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22, "user_id": 5658493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12cdfb082c886dffd5e99d98b3fe5ba3?s=128&d=identicon&r=PG&f=1", "display_name": "NDP", "link": "https://stackoverflow.com/users/5658493/ndp"}, "is_accepted": false, "score": 0, "last_activity_date": 1450326096, "creation_date": 1450326096, "answer_id": 34326575, "question_id": 34319832, "link": "https://stackoverflow.com/questions/34319832/load-a-profile-of-firefox-in-python-selenium/34326575#34326575", "title": "Load a profile of Firefox in python selenium", "body": "<p>Just put the name of the profile. It'll automatically load from the default location.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5684480"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1115, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1450326096, "creation_date": 1450291756, "last_edit_date": 1450292023, "question_id": 34319832, "link": "https://stackoverflow.com/questions/34319832/load-a-profile-of-firefox-in-python-selenium", "title": "Load a profile of Firefox in python selenium", "body": "<p>In ruby I can load a certain profile of FireFox like this:</p>\n\n<pre><code>profile = Selenium::WebDriver::Firefox::Profile.from_name 'MyProfile'\nb = Watir::Browser.new :firefox, :profile =&gt; profile\nb.goto 'http://192.168.0.1'\n</code></pre>\n\n<p>How can I do that in Python? As far as I know, in Python it's not supported <a href=\"http://selenium-python.readthedocs.org/api.html\" rel=\"nofollow\">http://selenium-python.readthedocs.org/api.html</a> </p>\n"}, {"tags": ["ruby", "windows-8", "gem", "zlib"], "comments": [{"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1450290314, "post_id": 34319310, "comment_id": 56380428, "body": "Do you have Ruby Devkit installed - <a href=\"http://rubyinstaller.org/add-ons/devkit/\" rel=\"nofollow noreferrer\">rubyinstaller.org/add-ons/devkit</a> ?"}, {"owner": {"reputation": 151, "user_id": 3807342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6892cdd136d25bcc3ae90cb4b9a2a66a?s=128&d=identicon&r=PG&f=1", "display_name": "Cezary Kluczy\u0144ski", "link": "https://stackoverflow.com/users/3807342/cezary-kluczy%c5%84ski"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1450377859, "post_id": 34319310, "comment_id": 56425332, "body": "Yes, I do. Other gems that require DevKit are installed without issues."}], "answers": [{"tags": [], "owner": {"reputation": 151, "user_id": 3807342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6892cdd136d25bcc3ae90cb4b9a2a66a?s=128&d=identicon&r=PG&f=1", "display_name": "Cezary Kluczy\u0144ski", "link": "https://stackoverflow.com/users/3807342/cezary-kluczy%c5%84ski"}, "is_accepted": true, "score": 0, "last_activity_date": 1450635868, "creation_date": 1450635868, "answer_id": 34384292, "question_id": 34319310, "link": "https://stackoverflow.com/questions/34319310/failed-to-install-charlock-holmes-on-windows-8-due-to-missing-zlib/34384292#34384292", "title": "Failed to install charlock_holmes on Windows 8 due to missing zlib", "body": "<p>libz.a goes to [devkit-dir]/mingw/lib, not [devkit-dir]/lib. Problem solved.</p>\n"}], "owner": {"reputation": 151, "user_id": 3807342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6892cdd136d25bcc3ae90cb4b9a2a66a?s=128&d=identicon&r=PG&f=1", "display_name": "Cezary Kluczy\u0144ski", "link": "https://stackoverflow.com/users/3807342/cezary-kluczy%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 431, "favorite_count": 0, "accepted_answer_id": 34384292, "answer_count": 1, "score": 0, "last_activity_date": 1450635868, "creation_date": 1450289903, "question_id": 34319310, "link": "https://stackoverflow.com/questions/34319310/failed-to-install-charlock-holmes-on-windows-8-due-to-missing-zlib", "title": "Failed to install charlock_holmes on Windows 8 due to missing zlib", "body": "<p>I'm trying to install charlock_holmes on Windows 8, but I can't point it to a valid zlib binary. I tried vaiours dll's from Cygwin and from zlib.net, with no luck. The question is, how to link to zlib properly?</p>\n\n<pre><code>gem install charlock_holmes -- --with-icu-dir=D:\\download\\icu4c-4_0_1-Win64-msvc8\\usr\\local  --with-icui18nlib=icuin --with-icudatalib=icudt --with-zlib=WHATHEVER_WONT_WORK\nTemporarily enhancing PATH to include DevKit...\nBuilding native extensions.  This could take a while...\nERROR:  Error installing charlock_holmes:\n        ERROR: Failed to build gem native extension.\n\n        d:/bin/Ruby193/bin/ruby.exe extconf.rb --with-icu-dir=D:\\download\\icu4c-4_0_1-Win64-msvc8\\usr\\local --with-icui18nlib=icuin --with-icudatalib=icudt --with-    zlib=WHATHEVER_WONT_WORK\nchecking for main() in -licuin... yes\nchecking for main() in -licuin... yes\nchecking for unicode/ucnv.h... yes\nchecking for main() in -lWHATHEVER_WONT_WORK... no\nlibz missing\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of\nnecessary libraries and/or headers.  Check the mkmf.log file for more\ndetails.  You may need configuration options.\n\nProvided configuration options:\n        --with-opt-dir\n        --without-opt-dir\n        --with-opt-include\n        --without-opt-include=${opt-dir}/include\n        --with-opt-lib\n        --without-opt-lib=${opt-dir}/lib\n        --with-make-prog\n        --without-make-prog\n        --srcdir=.\n        --curdir\n        --ruby=d:/bin/Ruby193/bin/ruby\n        --with-icu-dir\n        --with-icu-include\n        --without-icu-include=${icu-dir}/include\n        --with-icu-lib\n        --without-icu-lib=${icu-dir}/lib\n        --with-icui18nlib\n        --with-icui18nlib\n        --with-zlib\n\n\nGem files will remain installed in d:/bin/Ruby193/lib/ruby/gems/1.9.1/gems/charlock_holmes-0.7.3 for inspection.\nResults logged to d:/bin/Ruby193/lib/ruby/gems/1.9.1/gems/charlock_holmes-0.7.3/ext/charlock_holmes/gem_make.out\n</code></pre>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "edited": false, "score": 1, "creation_date": 1450289160, "post_id": 34319032, "comment_id": 56379737, "body": "more like a regexp question than ruby related. <code>\\w+[.-]\\w+</code>"}, {"owner": {"reputation": 16919, "user_id": 152825, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e990c2bcb4dfb7fd0c398098da9bca59?s=128&d=identicon&r=PG", "display_name": "timpone", "link": "https://stackoverflow.com/users/152825/timpone"}, "reply_to_user": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "edited": false, "score": 0, "creation_date": 1450289234, "post_id": 34319032, "comment_id": 56379779, "body": "@radubogdan true -  adjusted"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1450290158, "post_id": 34319032, "comment_id": 56380329, "body": "I believe you wanted <code>&#47;\\w(?:[.-]\\w+)*)&#47;</code>."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1450290183, "post_id": 34319032, "comment_id": 56380350, "body": "This is answered in the <a href=\"http://ruby-doc.org/core-2.2.3/Regexp.html\" rel=\"nofollow noreferrer\">Regexp documentation</a>. Please take the time to research as it&#39;s very elementary and core to regular expressions and is well covered in multiple places. <a href=\"http://rubular.com\" rel=\"nofollow noreferrer\">rubular.com</a>, <a href=\"http://regexr.com\" rel=\"nofollow noreferrer\">regexr.com</a> and <a href=\"https://www.regex101.com\" rel=\"nofollow noreferrer\">regex101.com</a> all make it easy to learn. <a href=\"http://meta.stackoverflow.com/questions/261592/how-much-research-effort-is-expected-of-stack-overflow-users?lq=1\" title=\"how much research effort is expected of stack overflow users\">meta.stackoverflow.com/questions/261592/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1450289378, "post_id": 34319088, "comment_id": 56379872, "body": "Might I suggest the regular expression <code>&#47;\\w+[.-]\\w+&#47;</code> instead?"}, {"owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "edited": false, "score": 0, "creation_date": 1450289465, "post_id": 34319088, "comment_id": 56379924, "body": "Well your idea is long in the comment section under the question, but w/e."}, {"owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "edited": false, "score": 1, "creation_date": 1450289534, "post_id": 34319088, "comment_id": 56379960, "body": "@spickermann And btw, the only thing that must be escaped in square brackets is a square bracket."}, {"owner": {"reputation": 16919, "user_id": 152825, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e990c2bcb4dfb7fd0c398098da9bca59?s=128&d=identicon&r=PG", "display_name": "timpone", "link": "https://stackoverflow.com/users/152825/timpone"}, "edited": false, "score": 0, "creation_date": 1450289567, "post_id": 34319088, "comment_id": 56379976, "body": "hmm... so this works for the question but the word boundary causes words like &#39;a.o.c&#39; to get returned as &#39;a.o&#39; rather than returned as &#39;a.o.c&#39; - is there any way to tell the word boundary to ONLY be a space. Or to handle a word like &#39;a.c-things&#39;. (btw, I hate when people do what I do - sorry)"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 16919, "user_id": 152825, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e990c2bcb4dfb7fd0c398098da9bca59?s=128&d=identicon&r=PG", "display_name": "timpone", "link": "https://stackoverflow.com/users/152825/timpone"}, "edited": false, "score": 1, "creation_date": 1450289640, "post_id": 34319088, "comment_id": 56380023, "body": "Interesting @timpone, that&#39;s a change of requirement."}, {"owner": {"reputation": 16919, "user_id": 152825, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e990c2bcb4dfb7fd0c398098da9bca59?s=128&d=identicon&r=PG", "display_name": "timpone", "link": "https://stackoverflow.com/users/152825/timpone"}, "edited": false, "score": 0, "creation_date": 1450289695, "post_id": 34319088, "comment_id": 56380058, "body": "agreed  - will just do as a separate question"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 3, "last_activity_date": 1450289743, "last_edit_date": 1450289743, "creation_date": 1450289135, "answer_id": 34319088, "question_id": 34319032, "link": "https://stackoverflow.com/questions/34319032/how-to-scan-and-return-a-set-of-words-with-specific-characters-in-them-in-ruby/34319088#34319088", "title": "How to scan and return a set of words with specific characters in them in Ruby", "body": "<p>You need to include the word characters into your regexp too. For example by adding <code>\\w+</code> to the regexp which means: At least one word character:</p>\n\n<pre><code>b = \"here a.b are things a.d long-thing others\"\nb.scan(/\\w+[.-]\\w+/)\n#=&gt; [\"a.b\", \"a.d\", \"long-thing\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1450290437, "post_id": 34319407, "comment_id": 56380509, "body": "I like the Regexp version."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1450290454, "post_id": 34319407, "comment_id": 56380518, "body": "Might I suggest <code>\\S</code> instead of <code>[^ ]</code>? <code>\\S</code> includes all non-whitespace characters."}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 1, "creation_date": 1450290582, "post_id": 34319407, "comment_id": 56380604, "body": "Both versions use Regex and Ruby.  Also, may I suggest to get rid of that scroll bar in code by reducing number of chars on that line - may be declare a variable <code>s=&quot;here a.b .....&quot;</code>"}, {"owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1450290674, "post_id": 34319407, "comment_id": 56380669, "body": "Well that&#39;s true @WandMaker. What I meant in with &quot;ruby version&quot; was more an idiomatic approach."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1450291616, "post_id": 34319407, "comment_id": 56381221, "body": "There&#39;s nothing unidiomatic about <code>String#scan</code>. I think it&#39;s much more idiomatic to solve the problem with a single, simple regex than with <code>split</code> and <code>select</code>. Also, why not <code>&#47;\\S+[.-]\\S+&#47;</code>? (P.S. I upvoted your answer; I don&#39;t want you to think I&#39;m nitpicking just to be contrary\u2014it&#39;s a good answer!)"}, {"owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "edited": false, "score": 0, "creation_date": 1450292041, "post_id": 34319407, "comment_id": 56381470, "body": "Well I agree with <code>\\S+</code> it&#39;s just that I forgot to change the last part. Also I updated the answer and I got rid of the &quot;idiomatic&quot; thingy. It was my personal favourite because you can see the logic in it and it&#39;s more natural than reading a bunch of characters in a scan (but this is a very simple scan). This is just my personal opinion. I don&#39;t think you&#39;re nitpicking, I appreciate your intervention."}], "tags": [], "owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "is_accepted": false, "score": 4, "last_activity_date": 1450291751, "last_edit_date": 1450291751, "creation_date": 1450290253, "answer_id": 34319407, "question_id": 34319032, "link": "https://stackoverflow.com/questions/34319032/how-to-scan-and-return-a-set-of-words-with-specific-characters-in-them-in-ruby/34319407#34319407", "title": "How to scan and return a set of words with specific characters in them in Ruby", "body": "<p>For your question and your updated question and your future updated question, I'd use something like split and grep regexp.</p>\n\n<p><strong>Regexp version (with condition to not have <code>.</code> or <code>-</code> at the end:</strong></p>\n\n<pre><code>\"here a.b are things a.d long-thing others a.b.c a.c-things\".scan(/\\S+[.-]\\S+/)\n</code></pre>\n\n<p><strong>#split, #select and regexp</strong></p>\n\n<pre><code> s = \"here a.b are things a.d long-thing others a.b.c a.c-things\"\n s.split(\" \").select { |el| el[/[.-]/] }\n</code></pre>\n\n<p><strong>#split, #select, #include?</strong></p>\n\n<pre><code> s.split(\" \").select { |el| el.include?(\".\") || el.include?(\"-\") }\n</code></pre>\n\n<p>Last one can be modified by sending <code>el</code> to a function where you decide all the logic. Right now it catches a lot of junk, but that's for you to fix.</p>\n\n<p>Regards</p>\n"}], "owner": {"reputation": 16919, "user_id": 152825, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e990c2bcb4dfb7fd0c398098da9bca59?s=128&d=identicon&r=PG", "display_name": "timpone", "link": "https://stackoverflow.com/users/152825/timpone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 34319088, "answer_count": 2, "score": 0, "last_activity_date": 1450291751, "creation_date": 1450288955, "last_edit_date": 1450290436, "question_id": 34319032, "link": "https://stackoverflow.com/questions/34319032/how-to-scan-and-return-a-set-of-words-with-specific-characters-in-them-in-ruby", "title": "How to scan and return a set of words with specific characters in them in Ruby", "body": "<p>I'd like to have a match function that returns words with periods or dashes in them (and possibly a growing list). I was thinking:</p>\n\n<pre><code>b=\"here a.b are things a.d long-thing others\".scan(/\\.|-/)\n</code></pre>\n\n<p>which could return an array of <code>[\"a.b\",\"a.d\",\"long-thing\"]</code> rather than <code>[\".\",\".\",\"-\"]</code>. </p>\n\n<p>How would I tell scan to return the whole word?</p>\n"}, {"tags": ["ruby", "division", "nomethoderror"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 2, "creation_date": 1450288744, "post_id": 34318897, "comment_id": 56379497, "body": "I guess <code>arr[2]</code> or <code>arr[3]</code> is undefined? What is <code>arr</code>?"}, {"owner": {"reputation": 14632, "user_id": 428260, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/Jr7uO.png?s=128&g=1", "display_name": "iltempo", "link": "https://stackoverflow.com/users/428260/iltempo"}, "edited": false, "score": 0, "creation_date": 1450288780, "post_id": 34318897, "comment_id": 56379520, "body": "It&#39;s an incomplete statement. Please give some context."}, {"owner": {"reputation": 1, "user_id": 5687882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de9bc7951215ddfdc34455bcc4db7c?s=128&d=identicon&r=PG&f=1", "display_name": "Tumult", "link": "https://stackoverflow.com/users/5687882/tumult"}, "edited": false, "score": 0, "creation_date": 1450289021, "post_id": 34318897, "comment_id": 56379650, "body": "Will edit. Complete code is  def ArithGeo(arr) \tif arr[2]/arr[1] == arr[3]/arr[2] \t\treturn &quot;Geometric&quot; \telse \t\treturn &quot;Arithmetic&quot; \tend end print ArithGeo(STDIN.gets)"}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "edited": false, "score": 1, "creation_date": 1450289148, "post_id": 34318897, "comment_id": 56379730, "body": "You should show us the contents of <code>arr</code> object, Do a: <code>p arr</code> before you use this conditional and show the output."}, {"owner": {"reputation": 1, "user_id": 5687882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de9bc7951215ddfdc34455bcc4db7c?s=128&d=identicon&r=PG&f=1", "display_name": "Tumult", "link": "https://stackoverflow.com/users/5687882/tumult"}, "edited": false, "score": 0, "creation_date": 1450289254, "post_id": 34318897, "comment_id": 56379792, "body": "ruby test.rb [1,2,3,100] &quot;[1,2,3,100]\\n&quot; test.rb:4:in <code>ArithGeo&#39;: undefined method </code>/&#39; for &quot;,&quot;:String (NoMethodError) \tfrom test.rb:12:in `&lt;main&gt;&#39; Shelbys-MacBook-Air:Desktop shelbyhaverda$"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1450290830, "post_id": 34318897, "comment_id": 56380766, "body": "Rather than add information that is essential to the question in a comment, edit the question and insert the missing information into it where it would have gone if you&#39;d supplied it originally. Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5687882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de9bc7951215ddfdc34455bcc4db7c?s=128&d=identicon&r=PG&f=1", "display_name": "Tumult", "link": "https://stackoverflow.com/users/5687882/tumult"}, "edited": false, "score": 0, "creation_date": 1450288854, "post_id": 34318977, "comment_id": 56379554, "body": "Apologies, should&#39;ve included more. The array is all numbers."}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "reply_to_user": {"reputation": 1, "user_id": 5687882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de9bc7951215ddfdc34455bcc4db7c?s=128&d=identicon&r=PG&f=1", "display_name": "Tumult", "link": "https://stackoverflow.com/users/5687882/tumult"}, "edited": false, "score": 0, "creation_date": 1450288887, "post_id": 34318977, "comment_id": 56379576, "body": "Then please show the <code>arr</code> to us and the full code snippet."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 1, "user_id": 5687882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de9bc7951215ddfdc34455bcc4db7c?s=128&d=identicon&r=PG&f=1", "display_name": "Tumult", "link": "https://stackoverflow.com/users/5687882/tumult"}, "edited": false, "score": 1, "creation_date": 1450289203, "post_id": 34318977, "comment_id": 56379767, "body": "@Tumult: judging from the code you posted, array contains strings, not numbers. In fact, there&#39;s no array at all, just one string."}, {"owner": {"reputation": 1, "user_id": 5687882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de9bc7951215ddfdc34455bcc4db7c?s=128&d=identicon&r=PG&f=1", "display_name": "Tumult", "link": "https://stackoverflow.com/users/5687882/tumult"}, "edited": false, "score": 0, "creation_date": 1450289323, "post_id": 34318977, "comment_id": 56379831, "body": "What? [1,2,3,100] is an array? ~.^ Sorry if I&#39;m ordering this super confusingly; just new to both stack overflow and coding."}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "reply_to_user": {"reputation": 1, "user_id": 5687882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de9bc7951215ddfdc34455bcc4db7c?s=128&d=identicon&r=PG&f=1", "display_name": "Tumult", "link": "https://stackoverflow.com/users/5687882/tumult"}, "edited": false, "score": 0, "creation_date": 1450289384, "post_id": 34318977, "comment_id": 56379879, "body": "@Tumult the way you are taking the input from console: <code>STDIN.gets</code> will give you just a string. You need to modify the code to convert that to an array."}, {"owner": {"reputation": 1, "user_id": 5687882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de9bc7951215ddfdc34455bcc4db7c?s=128&d=identicon&r=PG&f=1", "display_name": "Tumult", "link": "https://stackoverflow.com/users/5687882/tumult"}, "edited": false, "score": 0, "creation_date": 1450289588, "post_id": 34318977, "comment_id": 56379992, "body": "Oh!  Well.. how do I make sure the input is seen as an array? :X"}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "edited": false, "score": 0, "creation_date": 1450289727, "post_id": 34318977, "comment_id": 56380083, "body": "You can use String#split to convert a string to an array. <a href=\"http://ruby-doc.org/core-2.2.0/String.html#method-i-split\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.2.0/String.html#method-i-split</a>"}, {"owner": {"reputation": 1, "user_id": 5687882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de9bc7951215ddfdc34455bcc4db7c?s=128&d=identicon&r=PG&f=1", "display_name": "Tumult", "link": "https://stackoverflow.com/users/5687882/tumult"}, "edited": false, "score": 0, "creation_date": 1450290026, "post_id": 34318977, "comment_id": 56380252, "body": "Okay, thank you. I am familiar with .split. Let me ask you one more question please! :) So the reason the following code works and doesn&#39;t have my problem of being a string is because the explicitly create an array in lines 2 and 3 before pushing their answers into the different arrays?  def ArithGeo(arr)  diff1 = []  diff2 = []  arr.each_index do |x| if(x + 1 &lt; arr.length)  diff1 &lt;&lt; arr[x + 1] - arr[x]  diff2 &lt;&lt; arr[x + 1] / arr[x]  end  end  diff1.uniq.size == 1 ? &quot;Arithmetic&quot; : diff2.uniq.size == 1 ? &quot;Geometric&quot; : -1 end"}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "edited": false, "score": 0, "creation_date": 1450292928, "post_id": 34318977, "comment_id": 56381966, "body": "Yes, you can fix the problems in several ways. All you need to do is to convert the input string into an array. See my updated answer as well. And let me know if you have any other question."}], "tags": [], "owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "is_accepted": false, "score": 0, "last_activity_date": 1450292818, "last_edit_date": 1450292818, "creation_date": 1450288774, "answer_id": 34318977, "question_id": 34318897, "link": "https://stackoverflow.com/questions/34318897/division-ruby-no-method-error/34318977#34318977", "title": "Division: Ruby no method error", "body": "<p>It depends on your <code>arr</code> elements. Say, if <code>arr</code> elements are strings, then you will get a <code>undefined method '/' for String (NoMethodError)</code>.</p>\n\n<p>You need to make sure your <code>arr</code> elements are numbers i.e. integer or floats etc. on which the division (<code>/</code>) method is implemented.</p>\n\n<h3>Update</h3>\n\n<p>You can input the values comma separated and convert that string to an array using <a href=\"http://ruby-doc.org/core-2.2.0/String.html#method-i-split\" rel=\"nofollow\">String#split</a> method as I mentioned in the comment:</p>\n\n<pre><code>def ArithGeo(str)\n  arr = str.split(',').map(&amp;:to_i) # split the values by comma and make them integer and put in array arr\n  # then you can use the following beause now your arr is an array, make sure you have at least 4 elements as you\n  # used index 3 in the calculation  \n  if arr[2]/arr[1] == arr[3]/arr[2]\n      return \"Geometric\"\n  else\n      return \"Arithmetic\"\n  end\nend\n\nprint ArithGeo(STDIN.gets)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5687882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de9bc7951215ddfdc34455bcc4db7c?s=128&d=identicon&r=PG&f=1", "display_name": "Tumult", "link": "https://stackoverflow.com/users/5687882/tumult"}, "edited": false, "score": 0, "creation_date": 1450289621, "post_id": 34319173, "comment_id": 56380009, "body": "Okay, so the arr is being seen as a string. How do I get it to be seen as an array when i Input [1,2,3,100]?"}, {"owner": {"reputation": 339, "user_id": 5678403, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JB4YW.jpg?s=128&g=1", "display_name": "Ohad Dahan", "link": "https://stackoverflow.com/users/5678403/ohad-dahan"}, "edited": false, "score": 0, "creation_date": 1450290632, "post_id": 34319173, "comment_id": 56380635, "body": "Check my answer &quot;ArithGeo(eval STDIN.gets )&quot; for easy input of Ruby syntax based elements."}, {"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "reply_to_user": {"reputation": 339, "user_id": 5678403, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JB4YW.jpg?s=128&g=1", "display_name": "Ohad Dahan", "link": "https://stackoverflow.com/users/5678403/ohad-dahan"}, "edited": false, "score": 0, "creation_date": 1450290880, "post_id": 34319173, "comment_id": 56380793, "body": "@OhadDahan agreed, <code>eval</code> is a neat little function I didn&#39;t know about."}, {"owner": {"reputation": 339, "user_id": 5678403, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JB4YW.jpg?s=128&g=1", "display_name": "Ohad Dahan", "link": "https://stackoverflow.com/users/5678403/ohad-dahan"}, "edited": false, "score": 0, "creation_date": 1450291037, "post_id": 34319173, "comment_id": 56380889, "body": "@Mike eval is nothing compared to Mutex-hell you helped me solved yesterday :)"}], "tags": [], "owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1450290103, "last_edit_date": 1450290103, "creation_date": 1450289438, "answer_id": 34319173, "question_id": 34318897, "link": "https://stackoverflow.com/questions/34318897/division-ruby-no-method-error/34319173#34319173", "title": "Division: Ruby no method error", "body": "<p>One (or more) of the elements in your <code>arr</code> is a <code>String</code>.</p>\n\n<pre><code>irb(main):009:0&gt; \"string\"/\"another string\"\nNoMethodError: undefined method `/' for \"string\":String\n</code></pre>\n\n<p>When you call <code>to_i</code> on a <code>String</code> it becomes 0.</p>\n\n<pre><code>irb(main):013:0* \"string\".to_i\n=&gt; 0\n</code></pre>\n\n<p>When you divide by 0 you get an error because you can't do that.</p>\n\n<pre><code>irb(main):011:0&gt; \"string\".to_i/\"another string\".to_i\nZeroDivisionError: divided by 0\n</code></pre>\n\n<p>You can fix your code by changing this line:</p>\n\n<pre><code>print ArithGeo(STDIN.gets)\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>print ArithGeo(STDIN.gets.strip.split(',').map(&amp;:to_i))\n</code></pre>\n\n<p>Then enter your inputs like this:</p>\n\n<pre><code>1,2,3,100 # don't include the \"[]\" around the numbers\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1450301046, "post_id": 34319324, "comment_id": 56386477, "body": "And what if instead of <code>[1, 2, 3, 100]</code>, the input is <code>require &#39;fileutils&#39;; FileUtils.rm_rf &#39;&#47;&#39;</code> ?"}, {"owner": {"reputation": 339, "user_id": 5678403, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JB4YW.jpg?s=128&g=1", "display_name": "Ohad Dahan", "link": "https://stackoverflow.com/users/5678403/ohad-dahan"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1450302807, "post_id": 34319324, "comment_id": 56387371, "body": "What if the user won&#39;t run it at all and run &quot;rm -fr /*&quot; instead? Forgot it&#39;s STDIN? It means someone is running this interactively. Also it doesn&#39;t look like actual real life application but some programming exercise. So no security measures are required."}], "tags": [], "owner": {"reputation": 339, "user_id": 5678403, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JB4YW.jpg?s=128&g=1", "display_name": "Ohad Dahan", "link": "https://stackoverflow.com/users/5678403/ohad-dahan"}, "is_accepted": false, "score": 1, "last_activity_date": 1481050390, "last_edit_date": 1481050390, "creation_date": 1450289971, "answer_id": 34319324, "question_id": 34318897, "link": "https://stackoverflow.com/questions/34318897/division-ruby-no-method-error/34319324#34319324", "title": "Division: Ruby no method error", "body": "<p>Since your input is of ruby syntax [1,2,3,100] you need to evaluate it.</p>\n\n<pre><code>def ArithGeo(arr)\n    puts \"#{arr.class} , #{arr}\"\n    if arr[2]/arr[1] == arr[3]/arr[2]\n        return \"Geometric\"\n    else\n        return \"Arithmetic\"\n    end\nend\nputs ArithGeo(eval STDIN.gets )\n</code></pre>\n\n<p>The input:</p>\n\n<pre><code>[1, 2, 3, 100]\n</code></pre>\n\n<p>The result:</p>\n\n<pre><code>Array , [1, 2, 3, 100]\nArithmetic\n</code></pre>\n\n<p>Also , I would recommend using floats to prevent integer rounding.</p>\n\n<pre><code>    if arr[2].to_f/arr[1] == arr[3].to_f/arr[2]\n</code></pre>\n\n<p>Edit:</p>\n\n<p>A much better (safer + more generic) is to use:</p>\n\n<pre><code>JSON.parse( array_string )\n</code></pre>\n\n<p>For example:</p>\n\n<pre><code>JSON.parse(\"[1 , 2]\")\n=&gt; [1, 2]\n\nJSON.parse(\"[1 , 2]\").class\n=&gt; Array\n</code></pre>\n\n<p>And if you really want to be on the safe side , you'll need to add exception handling for JSON parsing errors.</p>\n"}, {"tags": [], "owner": {"reputation": 85, "user_id": 3160670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9633028183d10ffc326989259e6bdc?s=128&d=identicon&r=PG&f=1", "display_name": "Munyari", "link": "https://stackoverflow.com/users/3160670/munyari"}, "is_accepted": false, "score": 0, "last_activity_date": 1450290870, "creation_date": 1450290870, "answer_id": 34319587, "question_id": 34318897, "link": "https://stackoverflow.com/questions/34318897/division-ruby-no-method-error/34319587#34319587", "title": "Division: Ruby no method error", "body": "<p>You're passing a String to your method (<a href=\"http://ruby-doc.org/core-2.2.3/IO.html#method-i-gets\" rel=\"nofollow\"><code>IO.gets</code> returns a string</a>) when what you really want is an array of integers. If you just pass in this string, you will find that division is not defined for Strings. If you attempt to convert the input to an integer first, any leading non-numeric characters will cause the string to be converted to 0.</p>\n\n<p>Try</p>\n\n<pre><code>arr = STDIN.gets.split(', ').map(&amp;:to_i)\nArithGeo(arr)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5687882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de9bc7951215ddfdc34455bcc4db7c?s=128&d=identicon&r=PG&f=1", "display_name": "Tumult", "link": "https://stackoverflow.com/users/5687882/tumult"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 522, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1481050390, "creation_date": 1450288505, "last_edit_date": 1450310505, "question_id": 34318897, "link": "https://stackoverflow.com/questions/34318897/division-ruby-no-method-error", "title": "Division: Ruby no method error", "body": "<p>I am trying to run this:</p>\n\n<pre><code>def ArithGeo(arr)\n    if arr[2]/arr[1] == arr[3]/arr[2]\n        return \"Geometric\"\n    else\n        return \"Arithmetic\"\n    end\nend\nprint ArithGeo(STDIN.gets)\n</code></pre>\n\n<p>It comes back with line 2 having an \"undefined method\" when I run this in terminal.</p>\n\n<p>Why? The array is all numbers when testing with <code>[1,2,3,100]</code>. (And yes I know that this will return \"Arithmetic\" when it isn't. I haven't gotten to that part yet.)</p>\n\n<p>Also, is <code>to_i</code> necessary? If items in an array are already considered an integer, they're an integer, right? I also tried with <code>to_i</code> on each array item but it returned a \"division by zero\" error even when none of the items in the array were 0, and I wasn't using position 0.</p>\n"}, {"tags": ["ruby", "data-structures", "ocaml", "variant"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 2, "creation_date": 1450289244, "post_id": 34318500, "comment_id": 56379786, "body": "Your question is unclear. Please edit it to include more detail. What is your input like? What is the result that you want? If you &quot;can&#39;t figure how to do this in a a clean, safe and concise way&quot; to do this, it would be very helpful for us to see what you&#39;ve attempted, even if it&#39;s not clean, safe, or concise."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1450291947, "post_id": 34318500, "comment_id": 56381419, "body": "Welcome to Stack Overflow. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and <a href=\"http://meta.stackoverflow.com/a/265834/128421\">meta.stackoverflow.com/a/265834/128421</a>. While we&#39;d like to help, your question is in need of more detail."}], "answers": [{"tags": [], "owner": {"reputation": 6173, "user_id": 1372399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8282947398571ff83ee0b3fa325ef49f?s=128&d=identicon&r=PG", "display_name": "Thomash", "link": "https://stackoverflow.com/users/1372399/thomash"}, "is_accepted": true, "score": 0, "last_activity_date": 1450289434, "creation_date": 1450289434, "answer_id": 34319172, "question_id": 34318500, "link": "https://stackoverflow.com/questions/34318500/equivalent-to-ocaml-variants-in-ruby/34319172#34319172", "title": "Equivalent to OCaml variants in Ruby", "body": "<p>In languages that don't have a native support for sum types, the usual method is to use a product type with a tag and all the fields that appear in the sum type. In your case this would give:</p>\n\n<pre><code>type tag = Sent | Paid | New\ntype status = {tag: tag; date : date_time; location: location}\n</code></pre>\n\n<p>Here the field <code>date</code> is meaningful only if <code>tag</code> has the value <code>Sent</code> or <code>Paid</code> and the field <code>location</code> is meaningful only if <code>tag</code> has the value <code>Sent</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 1, "creation_date": 1450351277, "post_id": 34319178, "comment_id": 56407887, "body": "Checking something&#39;s class is not duck typing. Duck typing is when you only care which methods something responds to, not what its class is."}], "tags": [], "owner": {"reputation": 887, "user_id": 4664086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca859ce2ca107d4a1110965ef40d7f6?s=128&d=identicon&r=PG&f=1", "display_name": "Damiano Stoffie", "link": "https://stackoverflow.com/users/4664086/damiano-stoffie"}, "is_accepted": false, "score": 1, "last_activity_date": 1450291559, "last_edit_date": 1450291559, "creation_date": 1450289457, "answer_id": 34319178, "question_id": 34318500, "link": "https://stackoverflow.com/questions/34318500/equivalent-to-ocaml-variants-in-ruby/34319178#34319178", "title": "Equivalent to OCaml variants in Ruby", "body": "<p>This is how I would do it, probably someone can come up with something better than this. This is not as <em>clean, safe, concise</em> as it would be in OCaml. Ruby is meant to be strong on other things, or at least this is what I like to say to myself. :-)</p>\n\n<pre><code>module Status\n  Sent = Struct.new(:date, :location)\n  Paid = Struct.new(:date)\n  Processing = Class.new\nend\n\nstatus = Status::Sent.new(\"right now dude!\", \"location unknown\")\n\ncase status\nwhen Status::Sent\n  puts status.date, status.location\nwhen Status::Paid\n  puts status.date\nwhen Status::Processing\n  puts \"Processing things\"\nelse\n  puts \"I don't know what is going on\"\nend\n</code></pre>\n\n<p>As you see, you use duck typing instead of statically checking types and you substitute pattern matching with the case statement  </p>\n"}, {"tags": [], "owner": {"reputation": 8208, "user_id": 1971598, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2dadb39a8fbedbdb2c473a162c251b2a?s=128&d=identicon&r=PG", "display_name": "Edgar Aroutiounian", "link": "https://stackoverflow.com/users/1971598/edgar-aroutiounian"}, "is_accepted": false, "score": 1, "last_activity_date": 1450290560, "creation_date": 1450290560, "answer_id": 34319495, "question_id": 34318500, "link": "https://stackoverflow.com/questions/34318500/equivalent-to-ocaml-variants-in-ruby/34319495#34319495", "title": "Equivalent to OCaml variants in Ruby", "body": "<p>Its doable, here's an great example done by really good OCaml programmers but in Python (Python should be close enough to ruby)</p>\n\n<p><a href=\"https://github.com/BinaryAnalysisPlatform/bap/blob/master/python/adt.py\" rel=\"nofollow\">https://github.com/BinaryAnalysisPlatform/bap/blob/master/python/adt.py</a></p>\n"}], "owner": {"reputation": 858, "user_id": 3545547, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/zh5TH.jpg?s=128&g=1", "display_name": "Morniak", "link": "https://stackoverflow.com/users/3545547/morniak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 34319172, "answer_count": 3, "score": 1, "last_activity_date": 1450295548, "creation_date": 1450287301, "last_edit_date": 1450295548, "question_id": 34318500, "link": "https://stackoverflow.com/questions/34318500/equivalent-to-ocaml-variants-in-ruby", "title": "Equivalent to OCaml variants in Ruby", "body": "<p>Is there a way to create in Ruby something like the OCaml <a href=\"https://realworldocaml.org/v1/en/html/variants.html\" rel=\"nofollow\">variants</a>?</p>\n\n<p>I'm trying to do something like this:</p>\n\n<pre><code>type status =\n| sent of DateTime * Location\n| paid of DateTime\n| new\n</code></pre>\n\n<p>But I can't figure how to do this in a a clean, safe and concise way.</p>\n\n<p>I have an <code>Order</code> class with a <code>status</code> member. Possible value for this field are <code>sent</code>, <code>paid</code> or <code>new</code>. Some of the member of my class are set and used only for some states of <code>status</code>. </p>\n\n<pre><code>class Order\n    field :status # can be :sent, :paid or :new\n    field :paid_at # DateTime\n    field :sent_at # DateTime\n    filed :sent_to # Symbol\nend\n</code></pre>\n\n<p>It work well but in term of design I'm wondering if there is a better way to do that. For exemple, here the <code>sent_to</code> field can be accessed even when status is not <code>:sent</code>. Another problem with this design is readability: expect the members name, nothing indicate that <code>:sent_to</code> is linked to the <code>:sent</code> state while <code>send_at</code> is linked to <code>:paid</code>. In this exemple, readability is ok because there is only few fields linked to a state and fields names are obvious but I'm not sure it will still be the case with bigger classes.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "unit-testing", "rubygems", "minitest"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1450287034, "post_id": 34318345, "comment_id": 56378504, "body": "Because <code>test&#47;unit</code> is deprecated : <a href=\"http://stackoverflow.com/a/28598052/2483313\">stackoverflow.com/a/28598052/2483313</a>"}, {"owner": {"reputation": 389, "user_id": 4585201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cab6e9e5524e6a3394f4ac92c1adb7ad?s=128&d=identicon&r=PG&f=1", "display_name": "Rajnish", "link": "https://stackoverflow.com/users/4585201/rajnish"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1450287174, "post_id": 34318345, "comment_id": 56378575, "body": "@spickermann i wanted to know the reason behing it, i know code would work if i replace it, but y do i have to do that. Any insight"}], "answers": [{"tags": [], "owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "is_accepted": true, "score": 5, "last_activity_date": 1450294165, "last_edit_date": 1495539958, "creation_date": 1450294165, "answer_id": 34320499, "question_id": 34318345, "link": "https://stackoverflow.com/questions/34318345/why-do-i-need-to-use-minitest-autorun/34320499#34320499", "title": "Why do i need to use minitest/autorun?", "body": "<p>Your code example will end in a NameError: <code>uninitialized constant Minitest</code>.</p>\n\n<p>You have two possibilities:</p>\n\n<ul>\n<li>Use <code>test/unit</code> in combination with <code>Test::Unit::TestCase</code> or</li>\n<li>use <code>require 'minitest/autorun'</code> in combination with <code>Minitest::Test</code>.</li>\n</ul>\n\n<p><code>test/unit</code> is deprecated and it is recommended to use minitest (MiniTest is faster and smaller). </p>\n\n<p>If you switch the test gem you must change perhaps some more things:</p>\n\n<ul>\n<li>replace <code>require \"test/unit\"</code> with <code>require \"minitest/autorun\"</code></li>\n<li>replace <code>Test::Unit::TestCase with</code> with <code>Minitest::Test</code></li>\n<li>There is no <code>assert_nothing_raised</code> (<a href=\"https://stackoverflow.com/questions/12499259/why-doesnt-minitestspec-have-a-wont-raise-assertion\">details</a>)</li>\n<li><code>assert_raise</code> becomes <code>assert_raises</code>.</li>\n<li>perhaps some other issues</li>\n</ul>\n\n<p>You may use <code>require 'minitest'</code> instead <code>require 'minitest/autorun'</code> - you will get no syntax error, but there is also no test execution. If you want to execute tests, you must call them on your own (see <a href=\"https://stackoverflow.com/questions/28609208/minitest-a-test-suite-with-method-level-granularity\">minitest-a-test-suite-with-method-level-granularity</a>)</p>\n"}], "owner": {"reputation": 389, "user_id": 4585201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cab6e9e5524e6a3394f4ac92c1adb7ad?s=128&d=identicon&r=PG&f=1", "display_name": "Rajnish", "link": "https://stackoverflow.com/users/4585201/rajnish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1358, "favorite_count": 1, "accepted_answer_id": 34320499, "answer_count": 1, "score": 7, "last_activity_date": 1450294239, "creation_date": 1450286795, "last_edit_date": 1450294239, "question_id": 34318345, "link": "https://stackoverflow.com/questions/34318345/why-do-i-need-to-use-minitest-autorun", "title": "Why do i need to use minitest/autorun?", "body": "<p>Why do i require <code>minitest/autorun</code> instead of <code>test/unit</code> for generating unit test </p>\n\n<pre><code>require 'test/unit'\n\nclass Brokened\n  def uh_oh\n    \"I needs fixing\"\n  end\nend\n\nclass BrokenedTest &lt; Minitest::Test\n  def test_uh_of\n    actual = Brokened.new\n    assert_equal(\"I'm all better now\", actual.uh_oh)\n  end\nend\n</code></pre>\n\n<blockquote>\n  <p>Running the above code, interpreter raise warning </p>\n  \n  <blockquote>\n    <p>You should require 'minitest/autorun' instead</p>\n  </blockquote>\n</blockquote>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1450287601, "post_id": 34318212, "comment_id": 56378816, "body": "Can you edit your question to include your expected result?"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1450288915, "post_id": 34318212, "comment_id": 56379592, "body": "The problem is there isn&#39;t a good way to assign an instance variable by name in Ruby. Which is pretty much by design. You can&#39;t even do it with <code>eval</code> anymore. As you pointed out, what you&#39;re trying to do isn&#39;t &quot;great.&quot; Perhaps if you could explain in more detail the problem you&#39;re trying to solve by doing this, we could help you find a better solution?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1450298736, "post_id": 34318212, "comment_id": 56385253, "body": "@Jordan, I think you meant &quot;...assign a local variable...&quot;. I was initially thinking along the same lines, but your argument has to do with creating a local variable (which cannot now be done), not programmatically changing the value of an existing local variable, which is a different kettle of fish."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1450298858, "post_id": 34318212, "comment_id": 56385331, "body": "Yes, you&#39;re correct, I meant &quot;local variable&quot;!"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1451895409, "post_id": 34318212, "comment_id": 56919131, "body": "If you found at least one answer useful, please consider selecting the one you found most helpful."}], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 4, "last_activity_date": 1450300095, "last_edit_date": 1450300095, "creation_date": 1450289064, "answer_id": 34319069, "question_id": 34318212, "link": "https://stackoverflow.com/questions/34318212/ruby-loop-over-array-of-variable-names-apply-method-to-each-and-replace-variab/34319069#34319069", "title": "Ruby, loop over array of variable names, apply method to each and replace variable value", "body": "<p>My understanding is that you want to programmatically change the values of local variables. You could do that using:</p>\n\n<ul>\n<li><a href=\"http://ruby-doc.org/core-2.2.3/Kernel.html#method-i-binding\" rel=\"nofollow\">Kernel#binding</a></li>\n<li><a href=\"http://ruby-doc.org/core-2.2.3/Kernel.html#method-i-local_variables\" rel=\"nofollow\">Kernel#local_variables</a></li>\n<li><a href=\"http://ruby-doc.org/core-2.2.0/Binding.html#method-i-local_variable_get\" rel=\"nofollow\">Binding#local_variable_get</a></li>\n<li><a href=\"http://ruby-doc.org/core-2.2.0/Binding.html#method-i-local_variable_set\" rel=\"nofollow\">Binding#local_variable_set</a></li>\n</ul>\n\n<p>as follows:</p>\n\n<pre><code>choose_one_classes = [\"ramjet-transform\"]\nadd_classes = [\"btn\", \"btn-md\", \"btn-success\"]\nlist_group_classes = [\"list-group\", \"list-group-border\", \"choose-one-list\"]\n\nlocal_vars = local_variables - [:local_vars, :_]\n  #=&gt; [:list_group_classes, :add_classes, :choose_one_classes] \nanother_local_var = 3\n\nb = binding\n  #=&gt; #&lt;Binding:0x007fcd39a10eb0&gt; \n\nlocal_vars.each do |var_sym| \n  a = b.local_variable_get(var_sym)\n  b.local_variable_set(var_sym, a.join(' '))\nend\n\nchoose_one_classes\n  #=&gt; \"ramjet-transform\" \nadd_classes\n  #=&gt; \"btn btn-md btn-success\" \nlist_group_classes\n  #=&gt; \"list-group list-group-border choose-one-list\" \n</code></pre>\n\n<p>Notes:</p>\n\n<ul>\n<li>The local values of interest must be defined before any other local values are defined, so that <code>local_variables</code> will return an array of symbols for those local variables only (plus <code>local-vars</code>, which is removed, but not <code>another_local_var</code>).</li>\n<li>Pulling <code>:_</code> from the array returned by <code>local_variables</code> is only to make the code work in IRB.</li>\n<li>If you try running this in IRB, you'll need to reload IRB each time you run it.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1450311958, "post_id": 34319327, "comment_id": 56391033, "body": "You are modifying the elements of the arrays. The OP wants to convert the values of the local variables from arrays to strings, which is a different problem."}], "tags": [], "owner": {"reputation": 2637, "user_id": 3223249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hri7E.jpg?s=128&g=1", "display_name": "Inpego", "link": "https://stackoverflow.com/users/3223249/inpego"}, "is_accepted": false, "score": 5, "last_activity_date": 1450289988, "creation_date": 1450289988, "answer_id": 34319327, "question_id": 34318212, "link": "https://stackoverflow.com/questions/34318212/ruby-loop-over-array-of-variable-names-apply-method-to-each-and-replace-variab/34319327#34319327", "title": "Ruby, loop over array of variable names, apply method to each and replace variable value", "body": "<p><code>.map!</code> only affects this implicitly created array and is equivalent to the following code:</p>\n\n<pre><code>all_classes = [choose_one_classes, add_classes, list_group_classes]\nall_classes.map! { |e| e.length } # all_classes is modified\nall_classes # [1, 3, 3]\n</code></pre>\n\n<p>But you need to modify each array's member that you could only do with a bang-method (with an exclamation sign at the end). Such a bang-method doesn't necessarily have to be <code>.map!</code>, for example:</p>\n\n<pre><code>[choose_one_classes, add_classes, list_group_classes].each do |arr|\n  arr.map! { |e| e.upcase }\nend\nchoose_one_classes # [\"RAMJET-TRANSFORM\"]\nadd_classes # [\"BTN\", \"BTN-MD\", \"BTN-SUCCESS\"]\nlist_group_classes # [\"LIST-GROUP\", \"LIST-GROUP-BORDER\", \"CHOOSE-ONE-LIST\"]\n</code></pre>\n\n<p>But arrays have no method <code>.join!</code> because their method <code>.join</code> returns string instead of array.</p>\n"}, {"tags": [], "owner": {"reputation": 1717, "user_id": 1034924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecedc78563223e4f7742bbfc66992905?s=128&d=identicon&r=PG", "display_name": "nzajt", "link": "https://stackoverflow.com/users/1034924/nzajt"}, "is_accepted": false, "score": 0, "last_activity_date": 1450290503, "creation_date": 1450290503, "answer_id": 34319476, "question_id": 34318212, "link": "https://stackoverflow.com/questions/34318212/ruby-loop-over-array-of-variable-names-apply-method-to-each-and-replace-variab/34319476#34319476", "title": "Ruby, loop over array of variable names, apply method to each and replace variable value", "body": "<p>If you are going to do this a lot you could make a method like this.</p>\n\n<pre><code>def join_classes classes\n  classes.join(\" \")\nend\n</code></pre>\n\n<p>then you would just call it like so.</p>\n\n<pre><code>choose_one_classes = join_classes([\"ramjet-transform\"])\nadd_classes = join_classes([\"btn\", \"btn-md\", \"btn-success\"])\nlist_group_classes = join_classes([\"list-group\", \"list-group-border\", \"choose-one-list\"])\n</code></pre>\n\n<p>that would give you this result.</p>\n\n<pre><code>choose_one_classes = \"ramjet-transform\"\nadd_classes = \"btn btn-md btn-success\"\nlist_group_classes = \"list-group list-group-border choose-one-list\"\n</code></pre>\n\n<p>But I have to ask, why not just do?</p>\n\n<pre><code>add_classes = [\"btn\", \"btn-md\", \"btn-success\"].join(\" \")\n</code></pre>\n\n<p>or</p>\n\n<pre><code>add_classes = \"btn btn-md btn-success\"\n</code></pre>\n\n<p>seems like that is easier? Are you pulling in the values from somewhere else, like a database? </p>\n"}], "owner": {"reputation": 1516, "user_id": 838517, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/dT8Ll.png?s=128&g=1", "display_name": "Riveascore", "link": "https://stackoverflow.com/users/838517/riveascore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1450300095, "creation_date": 1450286416, "last_edit_date": 1450287835, "question_id": 34318212, "link": "https://stackoverflow.com/questions/34318212/ruby-loop-over-array-of-variable-names-apply-method-to-each-and-replace-variab", "title": "Ruby, loop over array of variable names, apply method to each and replace variable value", "body": "<p>I have an array of variables, each is an array of class name strings. I want to loop over each, and replace the values of those variables with the returned valued of a function applied.</p>\n\n<p>I tried using <code>#map!</code> with object modification, but that doesn't appear to be working.</p>\n\n<pre><code>choose_one_classes = [\"ramjet-transform\"]\nadd_classes = [\"btn\", \"btn-md\", \"btn-success\"]\nlist_group_classes = [\"list-group\", \"list-group-border\", \"choose-one-list\"]\n\n[choose_one_classes, add_classes, list_group_classes].map! do |var|\n  var.join(\" \")\nend\n</code></pre>\n\n<p>I know I could just do this:</p>\n\n<pre><code>choose_one_classes, add_classes, list_group_classes = [choose_one_classes, add_classes, list_group_classes].map do |var|\n  var.join(\" \")\nend\n</code></pre>\n\n<p>But I was hoping there was another better way. I guess technically what I'm trying to do isn't \"great\" because I should stick to not modifying variables a lot because good functional practices, threading etc. But I'm curious.</p>\n\n<p><strong>Edit</strong></p>\n\n<h3>Expected Result:</h3>\n\n<pre><code>choose_one_classes = \"ramjet-transform\"\nadd_classes = \"btn btn-md btn-success\"\nlist_group_classes = \"list-group list-group-border choose-one-list\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "payment-gateway", "ccavenue"], "comments": [{"owner": {"reputation": 616, "user_id": 1887564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fcaccfd6eb7d2ec0b7a6a3da9fb6124?s=128&d=identicon&r=PG", "display_name": "Himesh", "link": "https://stackoverflow.com/users/1887564/himesh"}, "edited": false, "score": 0, "creation_date": 1466173214, "post_id": 34317997, "comment_id": 63222549, "body": "Were you able to figure this out"}, {"owner": {"reputation": 111, "user_id": 1213245, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/a58efeee01e2d1e85e12137430fa0374?s=128&d=identicon&r=PG", "display_name": "Priya Saini", "link": "https://stackoverflow.com/users/1213245/priya-saini"}, "edited": false, "score": 0, "creation_date": 1498642399, "post_id": 34317997, "comment_id": 76577528, "body": "Any solution to this? I need to integrate this on a Rails 2.3.8 application."}, {"owner": {"reputation": 2300, "user_id": 2874507, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-bTf3QWEeXi0/AAAAAAAAAAI/AAAAAAAAAvA/G7Uh0JZWsOk/photo.jpg?sz=128", "display_name": "Abhilash", "link": "https://stackoverflow.com/users/2874507/abhilash"}, "reply_to_user": {"reputation": 111, "user_id": 1213245, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/a58efeee01e2d1e85e12137430fa0374?s=128&d=identicon&r=PG", "display_name": "Priya Saini", "link": "https://stackoverflow.com/users/1213245/priya-saini"}, "edited": false, "score": 0, "creation_date": 1498733865, "post_id": 34317997, "comment_id": 76626193, "body": "@priyasaini should work..before finding a solution i moved to another payment gateway"}], "owner": {"reputation": 2300, "user_id": 2874507, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-bTf3QWEeXi0/AAAAAAAAAAI/AAAAAAAAAvA/G7Uh0JZWsOk/photo.jpg?sz=128", "display_name": "Abhilash", "link": "https://stackoverflow.com/users/2874507/abhilash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 495, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1561743163, "creation_date": 1450285743, "last_edit_date": 1450286237, "question_id": 34317997, "link": "https://stackoverflow.com/questions/34317997/integrating-ccavenue-payment-gateway-in-rails", "title": "integrating ccavenue payment gateway in rails", "body": "<p>I am trying to integrate ccavenue payment gateway in my rails app..But I cant find any proper documentation. All they provide is 4 files for the integration. I cant figure out how to fit all these together.</p>\n\n<p><strong>1) ccavRequestHandler.html.erb</strong></p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt; Iframe&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;center&gt;\n&lt;%\n  merchantData=\"\"\n  working_key=\"\"   #Put in the 32 Bit Working Key provided by CCAVENUES.  \n  access_code=\"\"   #Put in the Access Code in quotes provided by CCAVENUES.\n\n  params.each do |key,value|\n      merchantData += key+\"=\"+value+\"&amp;\" \n  end\n\n  crypto = Crypto.new\n  encrypted_data = crypto.encrypt(merchantData,working_key)\n\n%&gt;\n  &lt;iframe  width=\"482\" height=\"500\" scrolling=\"No\" frameborder=\"0\"  id=\"paymentFrame\" src=\"https://test.ccavenue.com/transaction/transaction.do?command=initiateTransaction&amp;encRequest=&lt;%=encrypted_data %&gt;&amp;access_code=&lt;%=access_code %&gt;\"&gt;&lt;/iframe&gt;\n&lt;/center&gt;\n\n&lt;script type=\"text/javascript\" src=\"assets/javascripts/jquery-1.7.2.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\"&gt;\n      $(document).ready(function(){\n        $('iframe#paymentFrame').load(function() {\n         window.addEventListener('message', function(e) {\n             $(\"#paymentFrame\").css(\"height\",e.data['newHeight']+'px');    \n         }, false);\n       }); \n      });\n  &lt;/script&gt;\n&lt;/body&gt; \n&lt;/html&gt;\n</code></pre>\n\n<p><strong>2) ccavResponseHandler.html.erb</strong></p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;  \n  &lt;title&gt;Response Handler&lt;/title&gt;\n  &lt;%= csrf_meta_tags%&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;%  \n  workingKey=\"\"#Put in the 32 Bit Working Key provided by CCAVENUES.   \n  encResponse=params[:encResp]\n  crypto = Crypto.new \n  decResp=crypto.decrypt(encResponse,workingKey);\n  decResp = decResp.split(\"&amp;\")\n%&gt;\n&lt;center&gt;\n    &lt;font size=\"4\" color=\"blue\"&gt;&lt;b&gt;Response Page&lt;/b&gt;&lt;/font&gt;\n    &lt;table border=\"1\"&gt;\n&lt;tr&gt;\n  &lt;td&gt;&lt;b&gt;Parameter Name&lt;/b&gt;&lt;/td&gt;\n  &lt;td&gt;&lt;b&gt;Parameter Value&lt;/b&gt;&lt;/td&gt;\n\n  &lt;%decResp.each do |key|%&gt; \n    &lt;tr&gt;\n      &lt;td&gt;&lt;%=key.from(0).to(key.index(\"=\")-1)%&gt; &lt;/td&gt;\n      &lt;td&gt;&lt;%=key.from(key.index(\"=\")+1).to(-1)%&gt; &lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;%end%&gt;\n&lt;/table&gt;\n&lt;/center&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p><strong>3) crypto.rb</strong></p>\n\n<pre><code>#*****************************************************************\n#           * COMPANY    - AVENUES INDIA PVT Ltd.,\n#*****************************************************************\n\n#Name of the Program : AES Encryption/Decryption\n#Created by          : AVENUES INDIA PVT Ltd., TC-Team\n#Created On          : 16-02-2014\n#Version             : Version 1.0\n#Contribution       : eLitmus Evaluation Pvt Ltd\n#***************************************************************** \n\n\n\nclass Crypto &lt; ActiveRecord::Base\n\n  INIT_VECTOR = (0..15).to_a.pack(\"C*\")    \n\n  def encrypt(plain_text, key)\n      secret_key =  [Digest::MD5.hexdigest(key)].pack(\"H*\") \n      cipher = OpenSSL::Cipher::Cipher.new('aes-128-cbc')\n      cipher.encrypt\n      cipher.key = secret_key\n      cipher.iv  = INIT_VECTOR\n      encrypted_text = cipher.update(plain_text) + cipher.final\n      return (encrypted_text.unpack(\"H*\")).first\n  end\n\n  def decrypt(cipher_text,key)\n      secret_key =  [Digest::MD5.hexdigest(key)].pack(\"H*\")\n      encrypted_text = [cipher_text].pack(\"H*\")\n      decipher = OpenSSL::Cipher::Cipher.new('aes-128-cbc')\n      decipher.decrypt\n      decipher.key = secret_key\n      decipher.iv  = INIT_VECTOR\n      decrypted_text = (decipher.update(encrypted_text) + decipher.final).gsub(/\\0+$/, '')\n      return decrypted_text\n  end\nend\n</code></pre>\n\n<p><strong>4) dataForm.html.erb</strong></p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;form method=\"POST\" name=\"customerData\" action=\"/transaction/ccavRequestHandler\"&gt;\n        &lt;table width=\"40%\" height=\"1\" border='1' align=\"center\"&gt;&lt;caption&gt;&lt;font size=\"4\" color=\"blue\"&gt;&lt;b&gt;Integration Kit&lt;/b&gt;&lt;/font&gt;&lt;/caption&gt;&lt;/table&gt;\n            &lt;table width=\"40%\" height=\"100\" border='1' align=\"center\"&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;Parameter Name:&lt;/td&gt;&lt;td&gt;Parameter Value:&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td colspan=\"2\"&gt; Compulsory information&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;Merchant Id :&lt;/td&gt;&lt;td&gt;&lt;input type=\"text\" name=\"merchant_id\" value=\"2954\"/&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;Order Id    :&lt;/td&gt;&lt;td&gt;&lt;input type=\"text\" name=\"order_id\" value=\"123654789\"/&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;Amount  :&lt;/td&gt;&lt;td&gt;&lt;input type=\"text\" name=\"amount\" value=\"1.00\"/&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;Currency    :&lt;/td&gt;&lt;td&gt;&lt;input type=\"text\" name=\"currency\" value=\"INR\"/&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;Redirect URL    :&lt;/td&gt;&lt;td&gt;&lt;input type=\"text\" name=\"redirect_url\" value=\"http://merchantdomain/transaction/ccavResponseHandler\"/&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;Cancel URL  :&lt;/td&gt;&lt;td&gt;&lt;input type=\"text\" name=\"cancel_url\" value=\"http://merchantdomain/transaction/ccavResponseHandler\"/&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;Language    :&lt;/td&gt;&lt;td&gt;&lt;input type=\"text\" name=\"language\" value=\"EN\"/&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td colspan=\"2\"&gt;Billing information(optional):&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;Billing Name    :&lt;/td&gt;&lt;td&gt;&lt;input type=\"text\" name=\"billing_name\" value=\"Charli\"/&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;Billing Address :&lt;/td&gt;&lt;td&gt;&lt;input type=\"text\" name=\"billing_address\" value=\"Room no 1101, near Railway station Ambad\"/&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;Billing City    :&lt;/td&gt;&lt;td&gt;&lt;input type=\"text\" name=\"billing_city\" value=\"Indore\"/&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;Billing State   :&lt;/td&gt;&lt;td&gt;&lt;input type=\"text\" name=\"billing_state\" value=\"MP\"/&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;Billing Zip :&lt;/td&gt;&lt;td&gt;&lt;input type=\"text\" name=\"billing_zip\" value=\"425001\"/&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;Billing Country :&lt;/td&gt;&lt;td&gt;&lt;input type=\"text\" name=\"billing_country\" value=\"India\"/&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;Billing Tel :&lt;/td&gt;&lt;td&gt;&lt;input type=\"text\" name=\"billing_tel\" value=\"9876543210\"/&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;Billing Email   :&lt;/td&gt;&lt;td&gt;&lt;input type=\"text\" name=\"billing_email\" value=\"person@gmail.com\"/&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td colspan=\"2\"&gt;Shipping information(optional)&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;Shipping Name   :&lt;/td&gt;&lt;td&gt;&lt;input type=\"text\" name=\"delivery_name\" value=\"Chaplin\"/&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;Shipping Address    :&lt;/td&gt;&lt;td&gt;&lt;input type=\"text\" name=\"delivery_address\" value=\"room no.701 near bus stand\"/&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;shipping City   :&lt;/td&gt;&lt;td&gt;&lt;input type=\"text\" name=\"delivery_city\" value=\"Hyderabad\"/&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;shipping State  :&lt;/td&gt;&lt;td&gt;&lt;input type=\"text\" name=\"delivery_state\" value=\"Andhra\"/&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;shipping Zip    :&lt;/td&gt;&lt;td&gt;&lt;input type=\"text\" name=\"delivery_zip\" value=\"425001\"/&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;shipping Country    :&lt;/td&gt;&lt;td&gt;&lt;input type=\"text\" name=\"delivery_country\" value=\"India\"/&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;Shipping Tel    :&lt;/td&gt;&lt;td&gt;&lt;input type=\"text\" name=\"delivery_tel\" value=\"9595226054\"/&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;Merchant Param1 :&lt;/td&gt;&lt;td&gt;&lt;input type=\"text\" name=\"merchant_param1\" value=\"additional Info.\"/&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;Merchant Param2 :&lt;/td&gt;&lt;td&gt;&lt;input type=\"text\" name=\"merchant_param2\" value=\"additional Info.\"/&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;Merchant Param3 :&lt;/td&gt;&lt;td&gt;&lt;input type=\"text\" name=\"merchant_param3\" value=\"additional Info.\"/&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;Merchant Param4 :&lt;/td&gt;&lt;td&gt;&lt;input type=\"text\" name=\"merchant_param4\" value=\"additional Info.\"/&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;Merchant Param5 :&lt;/td&gt;&lt;td&gt;&lt;input type=\"text\" name=\"merchant_param5\" value=\"additional Info.\"/&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;Promo Code  :&lt;/td&gt;&lt;td&gt;&lt;input type=\"text\" name=\"promo_code\" value=\"\"/&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;Vault Info. :&lt;/td&gt;&lt;td&gt;&lt;input type=\"text\" name=\"customer_identifier\" value=\"\"/&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;Integration Type    :&lt;/td&gt;&lt;td&gt;&lt;input type=\"text\" name=\"integration_type\" value=\"iframe_normal\"/&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;INPUT TYPE=\"submit\" value=\"CheckOut\"&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n            &lt;/table&gt;\n          &lt;/form&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>These 4 files is the only docs they provides..</p>\n\n<p>I can also see that in html.erb file they want us to put the keys?? Is it safe??\nThe gem they provide is really outdated and hence didnt even mention about it.. I really cant figure out where to start with this..Can someone give me a rough idea on how to do this???</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "bigdecimal"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1450286783, "post_id": 34317538, "comment_id": 56378368, "body": "Three hours? Please read <a href=\"http://meta.stackoverflow.com/questions/261592/how-much-research-effort-is-expected-of-stack-overflow-users\" title=\"how much research effort is expected of stack overflow users\">meta.stackoverflow.com/questions/261592/&hellip;</a>. Please don&#39;t ask duplicate questions. Instead, read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. Duplicates dilute the effort of those answering and frustrate them when their work seemingly didn&#39;t help. It also confuses those searching."}, {"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1450287100, "post_id": 34317538, "comment_id": 56378541, "body": "@theTinMan your comment is taken on board, will put it down to a bad day and will try harder next time to resolve on my own, though I am still confused as to why <code>&lt;IMAGEPRICE:0X007F0431BB0850&gt;</code> was being returned, maybe you could assist ?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1450289860, "post_id": 34317538, "comment_id": 56380162, "body": "The question was answered in your selected answer. You have to provide a <code>to_s</code> method to output the value in a meaningful/appropriate way. Ruby has no clue what you want to see so it defaults to an <code>inspect</code>-type output."}], "answers": [{"comments": [{"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1450285566, "post_id": 34317887, "comment_id": 56377611, "body": "ok so that seems like the most simple solution ever :-), thank you so much. question though, how is <code>to_s</code> called when I dont use <code>to_s</code> in my form ?"}, {"owner": {"reputation": 8160, "user_id": 163640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63f02794544d271573750a83842cf59?s=128&d=identicon&r=PG", "display_name": "eugen", "link": "https://stackoverflow.com/users/163640/eugen"}, "reply_to_user": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1450288404, "post_id": 34317887, "comment_id": 56379297, "body": "<code>to_s</code> on a model instance is generally used by <code>simple_form</code> or <code>formtastic</code> to generate the labels for each element in a collection. If you&#39;re curious you can check out the source code for those gems. <code>simple_form</code> even has on option to specify which method to use for generating form labels."}, {"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1450288459, "post_id": 34317887, "comment_id": 56379332, "body": "thank you, that helps a lot, would you know why <code>&lt;IMAGEPRICE:0X007F0431BB0850&gt;</code> was being rendered ?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1450289257, "post_id": 34317887, "comment_id": 56379794, "body": "Ruby will use it automatically when interpolating a value into a string or appending to a string."}, {"owner": {"reputation": 8160, "user_id": 163640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63f02794544d271573750a83842cf59?s=128&d=identicon&r=PG", "display_name": "eugen", "link": "https://stackoverflow.com/users/163640/eugen"}, "edited": false, "score": 0, "creation_date": 1450289272, "post_id": 34317887, "comment_id": 56379807, "body": "If you call <code>to_s</code> on an object that doesn&#39;t provide its own <code>to_s</code> method, the default return result is the object class followed by its id. See <a href=\"http://ruby-doc.org/core-2.2.3/Object.html#method-i-to_s\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.2.3/Object.html#method-i-to_s</a>"}], "tags": [], "owner": {"reputation": 8160, "user_id": 163640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63f02794544d271573750a83842cf59?s=128&d=identicon&r=PG", "display_name": "eugen", "link": "https://stackoverflow.com/users/163640/eugen"}, "is_accepted": true, "score": 4, "last_activity_date": 1450285369, "creation_date": 1450285369, "answer_id": 34317887, "question_id": 34317538, "link": "https://stackoverflow.com/questions/34317538/how-to-take-bigdecimal-value-in-database-and-make-it-human-readable-in-view/34317887#34317887", "title": "How to take BigDecimal value in database and make it human readable in view", "body": "<p>If the only problem is the image prices showing in the check box list as <code>#&lt;IMAGEPRICE:0X007F0431BB0850&gt;</code>, just define a <code>to_s</code> method in your <code>ImagePrice</code> model and have it return a string representation of the price. For example, if the decimal value of that price is stored in a <code>price</code> attribute, your method would look like</p>\n\n<pre><code>class ImagePrice &lt; ActiveRecord::Base\n  # ...\n  def to_s\n    price.to_s\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 813, "favorite_count": 1, "accepted_answer_id": 34317887, "answer_count": 1, "score": 2, "last_activity_date": 1450286969, "creation_date": 1450284382, "last_edit_date": 1450286969, "question_id": 34317538, "link": "https://stackoverflow.com/questions/34317538/how-to-take-bigdecimal-value-in-database-and-make-it-human-readable-in-view", "title": "How to take BigDecimal value in database and make it human readable in view", "body": "<p>I want to show prices for products, and read that using Decimal is far more reliable than Integer or using Floats.</p>\n\n<p>I would like to know how to extract the actual number 17.99 from the database when it is stored as <code>&lt;BigDecimal:646c8b8,'0.2E2',9(18)</code> for example. I need to show this value in a form.</p>\n\n<p>So far I have: </p>\n\n<pre><code>f.input :image_prices, as: :check_boxes\n</code></pre>\n\n<p>Which will output in my view:</p>\n\n<pre><code>#&lt;IMAGEPRICE:0X007F0431BB0850&gt;\n#&lt;IMAGEPRICE:0X007F0431BB0710&gt;\n#&lt;IMAGEPRICE:0X007F0431BB05D0&gt;\n#&lt;IMAGEPRICE:0X007F0431BB0490&gt;\n</code></pre>\n\n<p>But when saving the correct ids are stored. The model relationships are as follows:</p>\n\n<pre><code>class Image &lt; ActiveRecord::Base\n  has_many :image_options, dependent: :destroy\n  has_many :image_prices, through: :image_options\nend\n\nclass ImageOption &lt; ActiveRecord::Base\n  belongs_to :image_price\n  belongs_to :image\nend\n\nclass ImagePrice &lt; ActiveRecord::Base\n  has_many :image_options\n  has_many :images, through: :image_options\nend\n</code></pre>\n\n<p>I am so stuck at the moment and have tried for a good 3 hours now to no avail.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "websocket", "faye"], "answers": [{"comments": [{"owner": {"reputation": 140, "user_id": 5586159, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-uqwCXYX_2ho/AAAAAAAAAAI/AAAAAAAABkQ/D7zjzcmzfxk/photo.jpg?sz=128", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u041b\u0438\u0442\u0432\u0438\u043d\u0435\u043d\u043a\u043e", "link": "https://stackoverflow.com/users/5586159/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%9b%d0%b8%d1%82%d0%b2%d0%b8%d0%bd%d0%b5%d0%bd%d0%ba%d0%be"}, "edited": false, "score": 0, "creation_date": 1450350730, "post_id": 34317558, "comment_id": 56407537, "body": "Please give example, I don&#39;t understand how make this."}, {"owner": {"reputation": 140, "user_id": 5586159, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-uqwCXYX_2ho/AAAAAAAAAAI/AAAAAAAABkQ/D7zjzcmzfxk/photo.jpg?sz=128", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u041b\u0438\u0442\u0432\u0438\u043d\u0435\u043d\u043a\u043e", "link": "https://stackoverflow.com/users/5586159/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%9b%d0%b8%d1%82%d0%b2%d0%b8%d0%bd%d0%b5%d0%bd%d0%ba%d0%be"}, "edited": false, "score": 1, "creation_date": 1450429912, "post_id": 34317558, "comment_id": 56445644, "body": "If we use Ruby version of Faye. Then we need to set Faye.logger to be a logger object, for example: <code>Faye.logger = Logger.new(STDOUT)</code> Anything that conforms to the Logger interface should work. Thanks <b>brito</b>"}], "tags": [], "owner": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "is_accepted": true, "score": 2, "last_activity_date": 1450284436, "creation_date": 1450284436, "answer_id": 34317558, "question_id": 34317302, "link": "https://stackoverflow.com/questions/34317302/faye-server-logging/34317558#34317558", "title": "Faye server logging", "body": "<p><code>log_level</code> has been deprecated in that version of Faye.</p>\n\n<p>You should set the log level on a <code>Logger</code> object and then pass it to <code>Faye.logger</code>.</p>\n"}], "owner": {"reputation": 140, "user_id": 5586159, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-uqwCXYX_2ho/AAAAAAAAAAI/AAAAAAAABkQ/D7zjzcmzfxk/photo.jpg?sz=128", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u041b\u0438\u0442\u0432\u0438\u043d\u0435\u043d\u043a\u043e", "link": "https://stackoverflow.com/users/5586159/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%9b%d0%b8%d1%82%d0%b2%d0%b8%d0%bd%d0%b5%d0%bd%d0%ba%d0%be"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1027, "favorite_count": 1, "accepted_answer_id": 34317558, "answer_count": 1, "score": 4, "last_activity_date": 1450284436, "creation_date": 1450283664, "question_id": 34317302, "link": "https://stackoverflow.com/questions/34317302/faye-server-logging", "title": "Faye server logging", "body": "<p>How to enable logging on Faye server?\nI am tying:</p>\n\n<p><code>Faye::Logging.log_level = :debug\n Faye.logger = lambda { |m| puts m }</code></p>\n\n<p>I am getting the following error:</p>\n\n<pre><code>/faye.ru:5:in `block in &lt;main&gt;': undefined method `log_level=' for Faye::Logging:Module (NoMethodError)\n</code></pre>\n\n<p>I use Faye version <strong>1.1.2</strong> on Ruby on Rails <strong>4</strong></p>\n"}, {"tags": ["ruby", "sinatra", "capistrano"], "answers": [{"comments": [{"owner": {"reputation": 2908, "user_id": 662503, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/881a236ca533281bb9c9ac92f380b5a0?s=128&d=identicon&r=PG", "display_name": "rubyist", "link": "https://stackoverflow.com/users/662503/rubyist"}, "edited": false, "score": 0, "creation_date": 1450288571, "post_id": 34318575, "comment_id": 56379392, "body": "So the things I need to install are bundler  ruby nginx, unicorn and ruby gems and  rbenv set up by hand manually doing ssh into ubuntu?? I dont require git and any database since my app is not using any db"}, {"owner": {"reputation": 1265, "user_id": 1235795, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cq1OZ.jpg?s=128&g=1", "display_name": "Fabian Winkler", "link": "https://stackoverflow.com/users/1235795/fabian-winkler"}, "reply_to_user": {"reputation": 2908, "user_id": 662503, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/881a236ca533281bb9c9ac92f380b5a0?s=128&d=identicon&r=PG", "display_name": "rubyist", "link": "https://stackoverflow.com/users/662503/rubyist"}, "edited": false, "score": 0, "creation_date": 1450289552, "post_id": 34318575, "comment_id": 56379969, "body": "Yes. But as far as I know capistrano requires a version control system such as git."}, {"owner": {"reputation": 2908, "user_id": 662503, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/881a236ca533281bb9c9ac92f380b5a0?s=128&d=identicon&r=PG", "display_name": "rubyist", "link": "https://stackoverflow.com/users/662503/rubyist"}, "edited": false, "score": 0, "creation_date": 1450289836, "post_id": 34318575, "comment_id": 56380145, "body": "yes..  we will be installing git in my local machine only.. not in the ubuntu server where i want to deploy the code right??"}, {"owner": {"reputation": 1265, "user_id": 1235795, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cq1OZ.jpg?s=128&g=1", "display_name": "Fabian Winkler", "link": "https://stackoverflow.com/users/1235795/fabian-winkler"}, "reply_to_user": {"reputation": 2908, "user_id": 662503, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/881a236ca533281bb9c9ac92f380b5a0?s=128&d=identicon&r=PG", "display_name": "rubyist", "link": "https://stackoverflow.com/users/662503/rubyist"}, "edited": false, "score": 0, "creation_date": 1450291544, "post_id": 34318575, "comment_id": 56381176, "body": "I&#39;m afraid you&#39;ll need a public accessible git repository. But since you have a server you can host your repository there."}], "tags": [], "owner": {"reputation": 1265, "user_id": 1235795, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cq1OZ.jpg?s=128&g=1", "display_name": "Fabian Winkler", "link": "https://stackoverflow.com/users/1235795/fabian-winkler"}, "is_accepted": false, "score": 0, "last_activity_date": 1450446695, "last_edit_date": 1450446695, "creation_date": 1450287494, "answer_id": 34318575, "question_id": 34317223, "link": "https://stackoverflow.com/questions/34317223/capistrano-set-up-for-ruby-sinatra-app-in-new-ubuntu-server/34318575#34318575", "title": "capistrano set up for ruby sinatra app in new ubuntu server", "body": "<p>I'm using capistrano only with ruby on rails, so I can't offer any advice on sinatra specific issues. But the basic setup should be similar.</p>\n\n<p>At first you should install ruby, nginx, git and the basic tool chain to install (and compile) the most common gems:</p>\n\n<pre><code>apt-get install --no-install-recommends ruby ruby-dev gcc g++ libc6-dev zlib1g-dev git nginx\n</code></pre>\n\n<p>Depending on the database you're going to use, you'll need the relevant headers too. If you plan to use postgres, you'll need to install the following packages:</p>\n\n<pre><code>apt-get install --no-install-recommends postgresql libpq-dev \n</code></pre>\n\n<p>The only gem you need to install by hand is bundler:</p>\n\n<pre><code>gem install bundler\n</code></pre>\n\n<p>At least with ruby on rails all other gems will be installed by capistrano automatically (through the Gemfile).\nThen you're supposed to setup a deploy user as suggested by the <a href=\"http://capistranorb.com/documentation/getting-started/authentication-and-authorisation/\" rel=\"nofollow\">capistrano documentation</a> and configure your sinatra application accordingly.</p>\n"}], "owner": {"reputation": 2908, "user_id": 662503, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/881a236ca533281bb9c9ac92f380b5a0?s=128&d=identicon&r=PG", "display_name": "rubyist", "link": "https://stackoverflow.com/users/662503/rubyist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1450446695, "creation_date": 1450283390, "question_id": 34317223, "link": "https://stackoverflow.com/questions/34317223/capistrano-set-up-for-ruby-sinatra-app-in-new-ubuntu-server", "title": "capistrano set up for ruby sinatra app in new ubuntu server", "body": "<p>I have a ruby sinatra app which needs to be deployed.\nI am trying to set up capistrano for deployment to a new ubuntu server. \nSo when i get a fresh ubuntu server, how should I proceed with setting up capistrano. </p>\n\n<p>I see that in the blogs, initially the unicorn and nginx are installed manually.</p>\n\n<p>Should I ssh into that ubuntu machine and manually install ruby, rubygems , unicorn and nginx and set up rbenv in that machine  and then set up capistrano from my local machine.??\nOr is there any better way to approach.??</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "omniauth", "slack-api"], "comments": [{"owner": {"reputation": 316, "user_id": 951619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dbd51d3c62ddf3763f9ae70c523de2a?s=128&d=identicon&r=PG", "display_name": "ryaz", "link": "https://stackoverflow.com/users/951619/ryaz"}, "edited": false, "score": 0, "creation_date": 1490125507, "post_id": 34317176, "comment_id": 72970465, "body": "you should dig into <code>auth_hash</code> which is built by omniauth"}], "owner": {"reputation": 43, "user_id": 2486049, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ab9a06485dd8e15ce22885ed3fea37a0?s=128&d=identicon&r=PG", "display_name": "Marc Rosenfeld", "link": "https://stackoverflow.com/users/2486049/marc-rosenfeld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 405, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1482753004, "creation_date": 1450283254, "last_edit_date": 1482753004, "question_id": 34317176, "link": "https://stackoverflow.com/questions/34317176/retrieve-slack-bot-token-with-devise-and-omniauth-slack-on-rails", "title": "Retrieve Slack bot token with devise and omniauth-slack on Rails", "body": "<p>I'm authenticating Slack users with <em>devise</em> and <em>omniauth-slack</em> on Rails and I'm currently able to retrieve user's token as expected.</p>\n\n<p>The problem is that, with Slack addition to include \"bot\" scoping, we also need to <strong>retrieve the bot's token</strong> and for that, we must retrieve the first (and unique) token response --as explained in <a href=\"https://api.slack.com/bot-users#Retrieving%20your%20bot%20user%20token\" rel=\"nofollow\">their documentation</a></p>\n\n<p>Is there a way to access this response in our <code>Devise::OmniauthCallbacksController</code> ?</p>\n\n<p>If not, is there another way I could retrieve this response?</p>\n"}, {"tags": ["ruby", "nokogiri", "cyrillic", "windows-1251"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1450292118, "post_id": 34317057, "comment_id": 56381519, "body": "Welcome to Stack Overflow. Please provide the minimal input data and the expected output. That helps us help you, and provides others who are searching for a similar answer an idea of how your code will fit their use-case."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1450292370, "post_id": 34317057, "comment_id": 56381664, "body": "Also, in Ruby, methods and variables are written in snake_case not camelCase. It&#39;s_a_matter_of_readability AndCodeStyleInTheCommunity."}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1450298242, "post_id": 34317057, "comment_id": 56384932, "body": "Do you really want force_encoding rather than encode ?"}, {"owner": {"reputation": 514, "user_id": 4613443, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/abfa85562e754636c46ac3dc3f67decd?s=128&d=identicon&r=PG", "display_name": "mohnstrudel", "link": "https://stackoverflow.com/users/4613443/mohnstrudel"}, "reply_to_user": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1450328774, "post_id": 34317057, "comment_id": 56395723, "body": "@FrederickCheung I tried both, but it didn&#39;t work."}, {"owner": {"reputation": 514, "user_id": 4613443, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/abfa85562e754636c46ac3dc3f67decd?s=128&d=identicon&r=PG", "display_name": "mohnstrudel", "link": "https://stackoverflow.com/users/4613443/mohnstrudel"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1450329000, "post_id": 34317057, "comment_id": 56395789, "body": "@theTinMan Thank your for your feedback, updated my question."}], "answers": [{"tags": [], "owner": {"reputation": 514, "user_id": 4613443, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/abfa85562e754636c46ac3dc3f67decd?s=128&d=identicon&r=PG", "display_name": "mohnstrudel", "link": "https://stackoverflow.com/users/4613443/mohnstrudel"}, "is_accepted": false, "score": 0, "last_activity_date": 1451382866, "last_edit_date": 1495542184, "creation_date": 1451382866, "answer_id": 34508575, "question_id": 34317057, "link": "https://stackoverflow.com/questions/34317057/nokogiri-xml-builder-with-cyrillic-text-windows-1251/34508575#34508575", "title": "Nokogiri XML builder with cyrillic text (windows 1251)", "body": "<p>After hours of trying found this post - <a href=\"https://stackoverflow.com/questions/1600526/how-do-i-encode-decode-html-entities-in-ruby\">How do I encode/decode HTML entities in Ruby?</a></p>\n\n<p>You need do decode such values as <code>&amp;#x421;</code> according to this table:\n<a href=\"http://webdesign.about.com/od/localization/l/blhtmlcodes-ru.htm\" rel=\"nofollow noreferrer\">http://webdesign.about.com/od/localization/l/blhtmlcodes-ru.htm</a></p>\n\n<p>CGI didn't help me, but HTMLEntities did.</p>\n\n<p>This is my working code right now:</p>\n\n<pre><code>require 'htmlentities'\nputs HTMLEntities.new.decode(buildXML(cleansedArray).to_xml)\n</code></pre>\n\n<p>And finally the desired output:</p>\n\n<pre><code>  &lt;item&gt;\n    &lt;articleNumber&gt;055794&lt;/articleNumber&gt;\n    &lt;description&gt;\u0421\u041e\u041a \u0421\u0412\u0415\u0416\u0415\u0412\u042b\u0416\u0410\u0422\u042b\u0419 \u0412 \u0410\u0421\u0421\u041e\u0420\u0422\u0418\u041c\u0415\u041d\u0422\u0415 (200\u041c\u041b) 1 \u0448\u0442&lt;/description&gt;\n    &lt;shtrihCode&gt;2400000036425&lt;/shtrihCode&gt;\n  &lt;/item&gt;\n  &lt;item&gt;\n    &lt;articleNumber&gt;058270&lt;/articleNumber&gt;\n    &lt;description&gt;\u0421\u041e\u041a \u0421\u0412\u0415\u0416\u0415\u0412\u042b\u0416\u0410\u0422\u042b\u0419 \u041a\u041b\u0423\u0411\u041d\u0418\u041a\u0410 +\u042f\u0411\u041b\u041e\u041a\u041e 200 \u041c\u041b (\u0444\u0440\u0435\u0448 \u0434\u043d\u044f) 1 \u0448\u0442&lt;/description&gt;\n    &lt;shtrihCode&gt;2400000037149&lt;/shtrihCode&gt;\n  &lt;/item&gt;\n&lt;/products&gt;\n</code></pre>\n"}], "owner": {"reputation": 514, "user_id": 4613443, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/abfa85562e754636c46ac3dc3f67decd?s=128&d=identicon&r=PG", "display_name": "mohnstrudel", "link": "https://stackoverflow.com/users/4613443/mohnstrudel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 407, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1451382866, "creation_date": 1450282920, "last_edit_date": 1450328977, "question_id": 34317057, "link": "https://stackoverflow.com/questions/34317057/nokogiri-xml-builder-with-cyrillic-text-windows-1251", "title": "Nokogiri XML builder with cyrillic text (windows 1251)", "body": "<p>I am trying to create an XML file from an array. This is my builder code:</p>\n\n<pre><code>def buildXML(formattedText)\n    builder = Nokogiri::XML::Builder.new do |xml|\n        xml.products {\n            formattedText.each do |lineItem|\n                xml.item {\n                    xml.articleNumber lineItem[0]\n                    description = lineItem[1..(findIndexOnShtrih(lineItem)-1)].join(\" \").force_encoding(Encoding::Windows_1251)\n                    xml.description description\n                    xml.shtrihCode lineItem.at(findIndexOnShtrih(lineItem))\n                }\n            end\n\n        }\n    end\nend\n</code></pre>\n\n<p>My input looks like this (it contains always an article number on 1st index, then there goes the description from 2nd to N-3 index, N-2 till N-1 is amount and Nth index contains the bar code):</p>\n\n<pre><code>[\"047609\", \"\u0421\u041e\u041a\", \"\u0421\u0412\u0415\u0416\u0415\u0412\u042b\u0416\u0410\u0422\u042b\u0419\", \"\u0422\u041e\u041c\u0410\u0422\", \"200\", \"\u041c\u041b\", \"(\u0444\u0440\u0435\u0448\", \"\u0434\u043d\u044f)\", \"1\", \"\u0448\u0442\", \"2400000032731\"][\"048504\", \"\u0412\u041e\u0414\u0410\", \"\u0413\u0410\u0417\u0418\u0420\u041e\u0412\u0410\u041d\u041d\u0410\u042f\", \"\u0421\", \"\u041d\u0410\u0422\u0423\u0420\u0410\u041b\u042c\u041d\u042b\u041c\", \"\u0421\u0418\u0420\u041e\u041f\u041e\u041c\", \"(200\u041c\u041b)\", \"1\", \"\u0448\u0442\", \"2400000032953\"][\"055794\", \"\u0421\u041e\u041a\", \"\u0421\u0412\u0415\u0416\u0415\u0412\u042b\u0416\u0410\u0422\u042b\u0419\", \"\u0412\", \"\u0410\u0421\u0421\u041e\u0420\u0422\u0418\u041c\u0415\u041d\u0422\u0415\", \"(200\u041c\u041b)\", \"1\", \"\u0448\u0442\", \"2400000036425\"][\"058270\", \"\u0421\u041e\u041a\", \"\u0421\u0412\u0415\u0416\u0415\u0412\u042b\u0416\u0410\u0422\u042b\u0419\", \"\u041a\u041b\u0423\u0411\u041d\u0418\u041a\u0410\", \"+\u042f\u0411\u041b\u041e\u041a\u041e\", \"200\", \"\u041c\u041b\", \"(\u0444\u0440\u0435\u0448\", \"\u0434\u043d\u044f)\", \"1\", \"\u0448\u0442\", \"2400000037149\"]\n</code></pre>\n\n<p>This leads to stuff like this:</p>\n\n<pre><code>    &lt;articleNumber&gt;055794&lt;/articleNumber&gt;\n    &lt;description&gt;&amp;#x421;&amp;#x41E;&amp;#x41A; &amp;#x421;&amp;#x412;&amp;#x415;&amp;#x416;&amp;#x415;&amp;#x412;&amp;#x42B;&amp;#x416;&amp;#x410;&amp;#x422;&amp;#x42B;&amp;#x419; &amp;#x412; &amp;#x410;&amp;#x421;&amp;#x421;&amp;#x41E;&amp;#x420;&amp;#x422;&amp;#x418;&amp;#x41C;&amp;#x415;&amp;#x41D;&amp;#x422;&amp;#x415; (200&amp;#x41C;&amp;#x41B;) 1 &amp;#x448;&amp;#x442;&lt;/description&gt;\n    &lt;shtrihCode&gt;2400000036425&lt;/shtrihCode&gt;\n  &lt;/item&gt;\n  &lt;item&gt;\n    &lt;articleNumber&gt;058270&lt;/articleNumber&gt;\n    &lt;description&gt;&amp;#x421;&amp;#x41E;&amp;#x41A; &amp;#x421;&amp;#x412;&amp;#x415;&amp;#x416;&amp;#x415;&amp;#x412;&amp;#x42B;&amp;#x416;&amp;#x410;&amp;#x422;&amp;#x42B;&amp;#x419; &amp;#x41A;&amp;#x41B;&amp;#x423;&amp;#x411;&amp;#x41D;&amp;#x418;&amp;#x41A;&amp;#x410; +&amp;#x42F;&amp;#x411;&amp;#x41B;&amp;#x41E;&amp;#x41A;&amp;#x41E; 200 &amp;#x41C;&amp;#x41B; (&amp;#x444;&amp;#x440;&amp;#x435;&amp;#x448; &amp;#x434;&amp;#x43D;&amp;#x44F;) 1 &amp;#x448;&amp;#x442;&lt;/description&gt;\n    &lt;shtrihCode&gt;2400000037149&lt;/shtrihCode&gt;\n  &lt;/item&gt;\n&lt;/products&gt;\n</code></pre>\n\n<p>Basically, I want the description in the XML to show proper cyrillic letters.</p>\n\n<p>Can I somehow force the builder to use specific encoding? I've found a lot of material on how to open XML files with certain encoding, using <code>Nokogiri::XML(a, nil, \"UTF-8\")</code> for example, but nothing on how to build a valid XML.</p>\n\n<p>Surprisingly enough if I omit the code block on my text, SO displays my text just fine.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "rails-api", "api-versioning"], "answers": [{"tags": [], "owner": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "is_accepted": false, "score": 2, "last_activity_date": 1473766882, "creation_date": 1473766882, "answer_id": 39469149, "question_id": 34316913, "link": "https://stackoverflow.com/questions/34316913/devise-token-auth-and-versioning/39469149#39469149", "title": "Devise token auth and versioning", "body": "<p>I forgot to post an answer to my question. I had to define v2 with</p>\n\n<pre><code>scope module: :v2, as: 'v2', constraints: ApiConstraints.new(version: 2, default: true) do\n    mount_devise_token_auth_for 'User', at: '/auth', skip: [  ],  controllers: {\n       registrations:      'v2/users/registrations',\n       sessions:           'v2/users/sessions'\n    }\nend\n</code></pre>\n\n<p>The 'as: v2' part generates unique named routes helpers and everything works.</p>\n"}], "owner": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 521, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1473766882, "creation_date": 1450282491, "last_edit_date": 1450295748, "question_id": 34316913, "link": "https://stackoverflow.com/questions/34316913/devise-token-auth-and-versioning", "title": "Devise token auth and versioning", "body": "<p>I have a problem implementing the <strong>mount_devise_token_auth_for</strong> with api versions.<br>\nLet's say:  </p>\n\n<pre><code>scope module: :v1, constraints: ApiConstraints.new(version: 1) do\n    mount_devise_token_auth_for 'User', at: '/auth', skip: [  ],  controllers: {\n       registrations:      'v1/users/registrations',\n       sessions:           'v1/users/sessions'\n    }\nend\n</code></pre>\n\n<p>If I want to add v2 and mount the authentication at the same path like this:  </p>\n\n<pre><code>scope module: :v2, constraints: ApiConstraints.new(version: 2, default: true) do\n    mount_devise_token_auth_for 'User', at: '/auth', skip: [  ],  controllers: {\n       registrations:      'v2/users/registrations',\n       sessions:           'v2/users/sessions'\n    }\nend\n</code></pre>\n\n<p>It fails because the named routes helper for devise already exists with those names.<br>\nI could use namespace to deal with that, but we don't want the versions in the URI.<br>\nPlease advise.<br>\nThanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "nomethoderror"], "comments": [{"owner": {"reputation": 2678, "user_id": 2483138, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1320d18fa8806488f96baad70b29ce4c?s=128&d=identicon&r=PG", "display_name": "ABMagil", "link": "https://stackoverflow.com/users/2483138/abmagil"}, "edited": false, "score": 0, "creation_date": 1450287861, "post_id": 34316883, "comment_id": 56378972, "body": "This is not the smallest amount of code required to replicate your issue."}], "answers": [{"comments": [{"owner": {"reputation": 172, "user_id": 5599690, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b3813c9d9b90f260d11d99d9b606dad9?s=128&d=identicon&r=PG&f=1", "display_name": "Sarahshuffle", "link": "https://stackoverflow.com/users/5599690/sarahshuffle"}, "edited": false, "score": 0, "creation_date": 1450284218, "post_id": 34317032, "comment_id": 56376811, "body": "ok, I realised I was testing it on an old customer. Now calendar is not nil, but I am still getting the error:  NoMethodError in EventsController#create undefined method `build&#39; for #&lt;Calendar:0x605ef98&gt;  on the same line. Is this a syntax error?"}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "reply_to_user": {"reputation": 172, "user_id": 5599690, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b3813c9d9b90f260d11d99d9b606dad9?s=128&d=identicon&r=PG&f=1", "display_name": "Sarahshuffle", "link": "https://stackoverflow.com/users/5599690/sarahshuffle"}, "edited": false, "score": 0, "creation_date": 1450284305, "post_id": 34317032, "comment_id": 56376863, "body": "Try: <code>@calendar.events.build(event_params)</code>."}], "tags": [], "owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "is_accepted": true, "score": 1, "last_activity_date": 1450287633, "last_edit_date": 1450287633, "creation_date": 1450282851, "answer_id": 34317032, "question_id": 34316883, "link": "https://stackoverflow.com/questions/34316883/nomethoderror-in-eventscontrollercreate-undefined-method-build-for-nilnilcla/34317032#34317032", "title": "NoMethodError in EventsController#create undefined method `build&#39; for nil:NilClass?", "body": "<pre><code>@calendar = current_customer.calendar\n@event = @calendar.build.event(event_params)\n</code></pre>\n\n<p>According to the error message, <code>@calendar</code> is <code>nil</code>, so when you call <code>@calendar.build.event(event_params)</code> in the next line, it calls: <code>nil.build</code> and hence you get the error.</p>\n\n<p>For some reason, your <code>current_customer</code>'s <code>calendar</code> is <code>nil</code> for that request. Figure that out and make sure the <code>current_customer</code> has a <code>calendar</code> present in the database, then it should work.</p>\n\n<p>Also, you need to change:</p>\n\n<pre><code>@event = @calendar.build.event(event_params)\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>@event = @calendar.events.build(event_params)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 172, "user_id": 5599690, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b3813c9d9b90f260d11d99d9b606dad9?s=128&d=identicon&r=PG&f=1", "display_name": "Sarahshuffle", "link": "https://stackoverflow.com/users/5599690/sarahshuffle"}, "edited": false, "score": 0, "creation_date": 1450284126, "post_id": 34317123, "comment_id": 56376759, "body": "ok, silly me I was testing it on an old customer which was created before I had implemented calendars. Now the error has changed to  NoMethodError in EventsController#create    undefined method `build&#39; for #&lt;Calendar:0x605ef98&gt;      Is this a syntax error?"}, {"owner": {"reputation": 83, "user_id": 5441472, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/svdiV.png?s=128&g=1", "display_name": "P3rishable", "link": "https://stackoverflow.com/users/5441472/p3rishable"}, "reply_to_user": {"reputation": 172, "user_id": 5599690, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b3813c9d9b90f260d11d99d9b606dad9?s=128&d=identicon&r=PG&f=1", "display_name": "Sarahshuffle", "link": "https://stackoverflow.com/users/5599690/sarahshuffle"}, "edited": false, "score": 0, "creation_date": 1450357774, "post_id": 34317123, "comment_id": 56411964, "body": "Take a look at this post. I think your syntax is a bit off <a href=\"http://stackoverflow.com/a/4954542/5441472\">stackoverflow.com/a/4954542/5441472</a>  ```    @event = @calendar.event.build(event_params) ```"}], "tags": [], "owner": {"reputation": 83, "user_id": 5441472, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/svdiV.png?s=128&g=1", "display_name": "P3rishable", "link": "https://stackoverflow.com/users/5441472/p3rishable"}, "is_accepted": false, "score": 0, "last_activity_date": 1450283113, "creation_date": 1450283113, "answer_id": 34317123, "question_id": 34316883, "link": "https://stackoverflow.com/questions/34316883/nomethoderror-in-eventscontrollercreate-undefined-method-build-for-nilnilcla/34317123#34317123", "title": "NoMethodError in EventsController#create undefined method `build&#39; for nil:NilClass?", "body": "<p>It would seem that @calendar is nil in the events controller. </p>\n\n<p>Start by checking the current_customer passes back the customer you were expecting. </p>\n\n<p>Then check that the current_customer has a calendar created for you to reference. </p>\n"}], "owner": {"reputation": 172, "user_id": 5599690, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b3813c9d9b90f260d11d99d9b606dad9?s=128&d=identicon&r=PG&f=1", "display_name": "Sarahshuffle", "link": "https://stackoverflow.com/users/5599690/sarahshuffle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 819, "favorite_count": 0, "accepted_answer_id": 34317032, "answer_count": 2, "score": -1, "last_activity_date": 1459939507, "creation_date": 1450282409, "last_edit_date": 1459939507, "question_id": 34316883, "link": "https://stackoverflow.com/questions/34316883/nomethoderror-in-eventscontrollercreate-undefined-method-build-for-nilnilcla", "title": "NoMethodError in EventsController#create undefined method `build&#39; for nil:NilClass?", "body": "<p>I'm getting a bit confused as to why I am receiving this error as (i think) it is suggesting that my current_customer returns nil. I do not know how to fix this, is it a problem with my current_customer method, sessions controller, or my events_controller... </p>\n\n<p>Event Model:</p>\n\n<pre><code>class Event &lt; ActiveRecord::Base\n  belongs_to :calendar\n\nend\n</code></pre>\n\n<p>Events Controller:</p>\n\n<pre><code>class EventsController &lt; ApplicationController\n\n  def new\n    @event = Event.new\n    @calendar = current_customer.calendar #WHY IS IT NOT ERRORING HERE TOO?\n\n  end\n\n\n  def create\n\n    **@calendar = current_customer.calendar #IT IS CALLING ERROR HERE**\n    @event = @calendar.build.event(event_params)\n    if @event.save\n      redirect_to '/main'\n    else\n      redirect_to '/compose'\n    end\n  end\n\n\n  private\n  def event_params\n    params.require(:event).permit(:calendar_id, :name, :starts_at, :ends_at) \n  end\n</code></pre>\n\n<p>Customer model:</p>\n\n<pre><code>class Customer &lt; ActiveRecord::Base\n  belongs_to :business\n  has_one :calendar\n\n  has_secure_password\n\n  attr_accessor :remember_token\n\n  #remembers a user in the database for  use in persistent sessions\n  def remember\n    self.remember_token = Customer.new_token\n    update_attribute(:remember_digest, Customer.digest(remember_token))\n  end\n\n  def Customer.digest(string)\n    cost = ActiveModel::SecurePassword.min_cost ? BCrypt::Engine::MIN_COST :\n        BCrypt::Engine.cost\n    BCrypt::Password.create(string, cost: cost)\n  end\n\n  def forget\n    update_attribute(:remember_digest, nil)\n  end\n\n  def Customer.new_token\n    SecureRandom.urlsafe_base64\n  end\n\n  #returns true if the given token matches the digest\n  def authenticated?(remember_token)\n    BCrypt::Password.new(remember_digest).is_password?(remember_token)\n  end\n\n\nend\n</code></pre>\n\n<p>Customer controller:</p>\n\n<pre><code>class CustomersController &lt; ApplicationController\n\n  def new\n\n    @customer = Customer.new\n    @businesses = Business.all\n    @calendar = Calendar.new\n\n  end\n\n  def create\n\n    @customer = Customer.create(customer_params)\n\n    @calendar = @customer.build_calendar\n    @customer.save!\n    session[:customer_id] = @customer.id\n\n    redirect_to '/'\n  rescue ActiveRecord::RecordInvalid =&gt; ex\n    render action: 'new', alert: ex.message\n  end\n\n  private\n  def customer_params\n    params.require(:customer).permit(:first_name, :last_name, :business_no, :email, :password, :business_id)\n  end\n\nend\n</code></pre>\n\n<p>Sessions controller:</p>\n\n<pre><code>class SessionsController &lt; ApplicationController\n\n  def new\n\n  end\n\n  def create\n    @customer = Customer.find_by_email(params[:session][:email])\n    if @customer &amp;&amp; @customer.authenticate(params[:session][:password])\n      session[:customer_id] = @customer.id #log in\n      @customer.remember\n      cookies.permanent.signed[:customer_id] = @customer.id\n      cookies.permanent[:remember_token] = @customer.remember_token\n      redirect_to '/main'\n    else\n      #need to add flash error: invalid password/email combination\n      redirect_to '/login'\n    end\n  end\n\n  def destroy\n    @current_customer.forget\n    cookies.delete(:customer_id)\n    cookies.delete(:remember_token)\n    session.delete(:customer_id)\n    @current_customer = nil\n    redirect_to '/'\n  end\nend\n</code></pre>\n\n<p>Current_customer method within application.controller:</p>\n\n<pre><code>helper_method :current_customer\n\n  def current_customer\n    if (customer_id = session[:customer_id])\n      @current_customer ||= Customer.find_by(id: customer_id)\n    elsif (customer_id = cookies.signed[:customer_id])\n      customer = Customer.find_by(id: customer_id)\n      if customer &amp;&amp; customer.authenticated?(cookies[:remember_token])\n        session[:customer_id] = customer.id #log in\n        @current_customer = customer\n\n      end\n    end\n  end\n</code></pre>\n\n<p>Calendar model:</p>\n\n<pre><code>class Calendar &lt; ActiveRecord::Base\n  belongs_to :customer\n  has_many :events\n\nend\n</code></pre>\n\n<p>calendars_controller:</p>\n\n<pre><code>class CalendarsController &lt; ApplicationController\n\n  def new\n    @calendar = Calendar.new(calendar_params)\n\n  end\n\n  def create\n    @calendar = Calendar.new(calendar_params)\n  end\n\nprivate\n  def calendar_params\n    params.require(:customer_id)\n  end\n\nend\n</code></pre>\n\n<p>I am new to Ruby/Rails so I would really appreciate any explanations and answers, please help! thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1450282058, "post_id": 34316723, "comment_id": 56375291, "body": "Can you post the errors generated."}, {"owner": {"reputation": 2883, "user_id": 1735223, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0f9cbf40bed746f8248593ec435e3cd8?s=128&d=identicon&r=PG", "display_name": "anoop", "link": "https://stackoverflow.com/users/1735223/anoop"}, "reply_to_user": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1450282254, "post_id": 34316723, "comment_id": 56375432, "body": "@j-dexx well, there are no errors. I do not see the text fields in the UI. It is supposed to come if the associations are built."}], "answers": [{"comments": [{"owner": {"reputation": 2883, "user_id": 1735223, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0f9cbf40bed746f8248593ec435e3cd8?s=128&d=identicon&r=PG", "display_name": "anoop", "link": "https://stackoverflow.com/users/1735223/anoop"}, "edited": false, "score": 0, "creation_date": 1450282552, "post_id": 34316888, "comment_id": 56375647, "body": "Thanks @spickermann ... Damn, I guess i should take a nap now :P"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 4, "last_activity_date": 1450282421, "creation_date": 1450282421, "answer_id": 34316888, "question_id": 34316723, "link": "https://stackoverflow.com/questions/34316723/rails-build-assosciation-not-working-rails/34316888#34316888", "title": "Rails .build assosciation not working rails", "body": "<p>You are missing a <code>=</code>, therefore the <code>fields_for</code> block isn't rendered to the page. Change this line</p>\n\n<pre><code>&lt;% f.fields_for :company_users do |cu| %&gt;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>&lt;%= f.fields_for :company_users do |cu| %&gt;\n</code></pre>\n"}], "owner": {"reputation": 2883, "user_id": 1735223, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0f9cbf40bed746f8248593ec435e3cd8?s=128&d=identicon&r=PG", "display_name": "anoop", "link": "https://stackoverflow.com/users/1735223/anoop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "accepted_answer_id": 34316888, "answer_count": 1, "score": 0, "last_activity_date": 1450282421, "creation_date": 1450281975, "question_id": 34316723, "link": "https://stackoverflow.com/questions/34316723/rails-build-assosciation-not-working-rails", "title": "Rails .build assosciation not working rails", "body": "<p>I have a <code>User</code> model as below,</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  devise :database_authenticatable, :registerable\n  has_many :company_users\n  accepts_nested_attributes_for :company_users, :allow_destroy =&gt; true\n\n  has_many :companies, :through =&gt; :company_users\n  has_many :roles, :through =&gt; :company_users\nend\n</code></pre>\n\n<p>and its associated model <code>CompanyUser</code> as below,</p>\n\n<pre><code>class CompanyUser &lt; ActiveRecord::Base\n  belongs_to :user\n  belongs_to :company\n  belongs_to :role\nend\n</code></pre>\n\n<p>I am trying to build the associations as below but it seems like not working</p>\n\n<pre><code>  # GET /users/new\n  def new\n    @user = User.new\n    @user.company_users.build\n  end\n</code></pre>\n\n<p>View file is as follows,</p>\n\n<pre><code>&lt;%= form_for(@user) do |f| %&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :name %&gt;&lt;br&gt;\n    &lt;%= f.text_field :name %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :email %&gt;&lt;br&gt;\n    &lt;%= f.text_field :email %&gt;\n  &lt;/div&gt;\n  &lt;h3&gt;Companies and Roles&lt;/h3&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;% f.fields_for :company_users do |cu| %&gt;\n       &lt;p&gt;\n         &lt;%= cu.label :company_id %&gt;\n         &lt;%= cu.text_field :company_id%&gt;\n         &lt;%= cu.label :role_id %&gt;\n         &lt;%= cu.text_field :role_id %&gt;\n         &lt;%= cu.check_box :_destroy %&gt;\n         &lt;%= cu.label :_destroy, 'delete' %&gt;\n        &lt;/p&gt;\n     &lt;% end %&gt;\n    &lt;p&gt;\n       &lt;%= f.submit 'Add to user', :name =&gt; \"add_company_user\" %&gt;\n       &lt;%= f.submit 'Delete from user', :name =&gt; \"remove_company_user\" %&gt;\n    &lt;/p&gt;\n  &lt;/div&gt;\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>I am trying to figure out where it is going wrong.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "config", "formatter"], "answers": [{"comments": [{"owner": {"reputation": 973, "user_id": 1333436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81c3e738c6c4d4ec282b2df918cf882c?s=128&d=identicon&r=PG", "display_name": "Jesus Castello", "link": "https://stackoverflow.com/users/1333436/jesus-castello"}, "reply_to_user": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "edited": false, "score": 0, "creation_date": 1450282011, "post_id": 34316575, "comment_id": 56375250, "body": "Then you might be dealing with a permissions problem, can you post a listing for <code>ls -lh</code>? Also you may want to try using <code>strace</code> with the <code>-e open</code> flag to see what files rspec is trying to read."}, {"owner": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "edited": false, "score": 0, "creation_date": 1450282156, "post_id": 34316575, "comment_id": 56375359, "body": "with <code>ls -lh</code>my .rspec file is not appearing... permissions are -rw-r--r--"}, {"owner": {"reputation": 973, "user_id": 1333436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81c3e738c6c4d4ec282b2df918cf882c?s=128&d=identicon&r=PG", "display_name": "Jesus Castello", "link": "https://stackoverflow.com/users/1333436/jesus-castello"}, "reply_to_user": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "edited": false, "score": 0, "creation_date": 1450282226, "post_id": 34316575, "comment_id": 56375409, "body": "Sorry, <code>ls -lha</code>, forgot that you need the <code>a</code> option to show dot files. Can you also try using <code>~&#47;.rspec</code> (home dir) and see if that works?"}, {"owner": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "edited": false, "score": 0, "creation_date": 1450282323, "post_id": 34316575, "comment_id": 56375484, "body": "-rw-r--r--   1 my_user  my_group    23B 16 dic 16:39 .rspec"}, {"owner": {"reputation": 973, "user_id": 1333436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81c3e738c6c4d4ec282b2df918cf882c?s=128&d=identicon&r=PG", "display_name": "Jesus Castello", "link": "https://stackoverflow.com/users/1333436/jesus-castello"}, "reply_to_user": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "edited": false, "score": 0, "creation_date": 1450282428, "post_id": 34316575, "comment_id": 56375555, "body": "These permissions sound ok. I would try a few other things, like using one of the other file names / locations and closing and opening a new terminal. If you can&#39;t fix it I can take a look later via team viewer or something like that."}, {"owner": {"reputation": 973, "user_id": 1333436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81c3e738c6c4d4ec282b2df918cf882c?s=128&d=identicon&r=PG", "display_name": "Jesus Castello", "link": "https://stackoverflow.com/users/1333436/jesus-castello"}, "reply_to_user": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "edited": false, "score": 0, "creation_date": 1450282463, "post_id": 34316575, "comment_id": 56375583, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/98139/discussion-between-jesus-castello-and-fabersky\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 973, "user_id": 1333436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81c3e738c6c4d4ec282b2df918cf882c?s=128&d=identicon&r=PG", "display_name": "Jesus Castello", "link": "https://stackoverflow.com/users/1333436/jesus-castello"}, "is_accepted": false, "score": 1, "last_activity_date": 1450281572, "creation_date": 1450281572, "answer_id": 34316575, "question_id": 34316316, "link": "https://stackoverflow.com/questions/34316316/cant-set-custom-options-in-rspec/34316575#34316575", "title": "Can&#39;t set custom options in .rspec", "body": "<p>Where is your <code>.rspec</code> file located? There is only 3 places where Rspec will look for this file:</p>\n\n<ul>\n<li><code>$PROJECT_ROOT/.rspec-local</code></li>\n<li><code>$PROJECT_ROOT/.rspec</code></li>\n<li><code>~/.rspec</code></li>\n</ul>\n\n<blockquote>\n  <p><code>$PROJECT_ROOT</code> is not an actual environment variable, but the full path to your project.</p>\n</blockquote>\n\n<p>Please make sure your <code>.rspec</code> file is in one of these locations, and not inside the <code>spec</code> directory or something like that.</p>\n\n<p>Source: <a href=\"https://www.relishapp.com/rspec/rspec-core/v/3-0/docs/configuration/read-command-line-configuration-options-from-files\" rel=\"nofollow\">https://www.relishapp.com/rspec/rspec-core/v/3-0/docs/configuration/read-command-line-configuration-options-from-files</a></p>\n"}, {"tags": [], "owner": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "is_accepted": true, "score": 0, "last_activity_date": 1527074467, "creation_date": 1527074467, "answer_id": 50487098, "question_id": 34316316, "link": "https://stackoverflow.com/questions/34316316/cant-set-custom-options-in-rspec/50487098#50487098", "title": "Can&#39;t set custom options in .rspec", "body": "<p>The problem was the location of the <code>.rspec</code> file.\nThe correct structure should be</p>\n\n<p>-- my_tests/<br>\n---- spec/<br>\n------ folder1/<br>\n------ folder2/<br>\n------ folder3/<br>\n------ spec_helper.rb<br>\n----- .rspec</p>\n"}], "owner": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "accepted_answer_id": 50487098, "answer_count": 2, "score": 0, "last_activity_date": 1527074467, "creation_date": 1450280903, "question_id": 34316316, "link": "https://stackoverflow.com/questions/34316316/cant-set-custom-options-in-rspec", "title": "Can&#39;t set custom options in .rspec", "body": "<p>I'm trying to put some custom options in my <code>.rspec</code> because I'd like to have <a href=\"https://github.com/thekompanee/fuubar\" rel=\"nofollow\">this custom formatter</a>.</p>\n\n<p>This is the only content of my <code>.rspec</code> file:</p>\n\n<pre><code>--format Fuubar\n--color\n</code></pre>\n\n<p>When i'm launching my tests with </p>\n\n<blockquote>\n  <p>rspec some_spec.rb</p>\n</blockquote>\n\n<p>nothing is happening, but when I'm using</p>\n\n<blockquote>\n  <p>rspec some_spec.rb --format Fuubar --color spec</p>\n</blockquote>\n\n<p>or putting the options in my <code>spec_helper.rb</code></p>\n\n<pre><code>config.color = true\nconfig.formatter = \"Fuubar\"\n</code></pre>\n\n<p>everything is working fine, so i think there's something I'm missing with the <code>.rspec</code> file.</p>\n\n<p>Any idea?</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "refactoring"], "answers": [{"comments": [{"owner": {"reputation": 312231, "user_id": 2225682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4958f4712d94ab82fe55fa471308e4b5?s=128&d=identicon&r=PG", "display_name": "falsetru", "link": "https://stackoverflow.com/users/2225682/falsetru"}, "edited": false, "score": 0, "creation_date": 1450280003, "post_id": 34315933, "comment_id": 56373639, "body": "If the <code>@arrayOne</code> is <code>nil</code>, this will throw <code>NoMethodError: undefined method &#39;blank?&#39; for nil:NilClass</code>. (Same for <code>@user_json[:user_stuff]</code>, <code>@user_json[:more_user_stuff]</code>)"}, {"owner": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "reply_to_user": {"reputation": 312231, "user_id": 2225682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4958f4712d94ab82fe55fa471308e4b5?s=128&d=identicon&r=PG", "display_name": "falsetru", "link": "https://stackoverflow.com/users/2225682/falsetru"}, "edited": false, "score": 0, "creation_date": 1450280295, "post_id": 34315933, "comment_id": 56373864, "body": "@falsetru do you mean if @arrayOne etc are <code>undefined</code>? AFAIK <code>blank?</code> tests for nil before testing empty, such that <code>nil.blank?</code> returns true."}, {"owner": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "reply_to_user": {"reputation": 312231, "user_id": 2225682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4958f4712d94ab82fe55fa471308e4b5?s=128&d=identicon&r=PG", "display_name": "falsetru", "link": "https://stackoverflow.com/users/2225682/falsetru"}, "edited": false, "score": 1, "creation_date": 1450280656, "post_id": 34315933, "comment_id": 56374139, "body": "@falsetru <a href=\"http://apidock.com/rails/Object/blank%3F\" rel=\"nofollow noreferrer\">blank?</a> is a Rails API function, not a Ruby core function. Calling blank? in irb will in fact result in the undefined error."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 3, "creation_date": 1450281640, "post_id": 34315933, "comment_id": 56374964, "body": "<code>!foo.blank?</code> could be written as <code>foo.present?</code>. What reads much nice IMHO."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1450283067, "post_id": 34315933, "comment_id": 56375989, "body": "It&#39;s not necessary to use Rails to take advantage of <code>blank?</code> or <code>present?</code>. See <a href=\"http://stackoverflow.com/questions/4238867/how-do-i-use-active-support-core-extensions/4239625#4239625\" title=\"how do i use active support core extensions\">stackoverflow.com/questions/4238867/&hellip;</a>."}], "tags": [], "owner": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "is_accepted": true, "score": 5, "last_activity_date": 1450283112, "last_edit_date": 1450283112, "creation_date": 1450279797, "answer_id": 34315933, "question_id": 34315892, "link": "https://stackoverflow.com/questions/34315892/refactoring-ruby/34315933#34315933", "title": "Refactoring Ruby", "body": "<p>You can use <code>array.blank?</code> (assuming you're using Rails of course) to check whether an array is nil or empty, such as:</p>\n\n<pre><code>&lt;% if !@arrayOne.blank? || !@user_json[:user_stuff].blank? || !@user_json[:more_user_stuff].blank? %&gt;\n</code></pre>\n\n<p>Rule of thumb you should move as much logic to the controller as you can.</p>\n\n<hr>\n\n<p>As suggested in the comments, you can also use <code>present?</code>, which is the same as <code>!blank?</code>, improving readability a bit:</p>\n\n<pre><code>&lt;% if @arrayOne.present? || @user_json[:user_stuff].present? || @user_json[:more_user_stuff].present? %&gt; \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 312231, "user_id": 2225682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4958f4712d94ab82fe55fa471308e4b5?s=128&d=identicon&r=PG", "display_name": "falsetru", "link": "https://stackoverflow.com/users/2225682/falsetru"}, "is_accepted": false, "score": 3, "last_activity_date": 1450279965, "creation_date": 1450279965, "answer_id": 34315987, "question_id": 34315892, "link": "https://stackoverflow.com/questions/34315892/refactoring-ruby/34315987#34315987", "title": "Refactoring Ruby", "body": "<p>You can use <a href=\"http://ruby-doc.org/core/Enumerable.html#method-i-all-3F\" rel=\"nofollow\"><code>Enumerable#all?</code></a>:</p>\n\n<pre><code>&lt;% if [!@arrayOne, @user_json[:user_stuff], @user_json[:more_user_stuff]].all? { |x|\n  x &amp;&amp; x.count &gt; 0\n} %&gt;\n  ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1450281453, "creation_date": 1450281453, "answer_id": 34316526, "question_id": 34315892, "link": "https://stackoverflow.com/questions/34315892/refactoring-ruby/34316526#34316526", "title": "Refactoring Ruby", "body": "<p>I would start with something like this: </p>\n\n<pre><code>if [@arrayOne, @user_json[:user_stuff], @user_json[:more_user_stuff]].any?(&amp;:present?)\n</code></pre>\n\n<p>In a next step I would move that condition into a helper with a nice name. Unfortunately you did not provide why you need this check (that why would hint a good name). But as an idea:</p>\n\n<pre><code># in a helper\ndef something_to_show?\n  [ @arrayOne, @user_json[:user_stuff], @user_json[:more_user_stuff]\n  ].any?(&amp;:present?)\nend\n\n# in the view\n&lt;% if something_to_show? %&gt;\n  &lt;h1&gt;Hello World&lt;/h1&gt;\n&lt;% else %&gt;\n  &lt;h1&gt;Boo&lt;/h1&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "is_accepted": false, "score": 0, "last_activity_date": 1580235961, "last_edit_date": 1580235961, "creation_date": 1450309955, "answer_id": 34324354, "question_id": 34315892, "link": "https://stackoverflow.com/questions/34315892/refactoring-ruby/34324354#34324354", "title": "Refactoring Ruby", "body": "<p>A simple way that doesn't require Rails:</p>\n\n<pre><code>puts [a, b, c].map(&amp;:to_a).all?(&amp;:empty?) ? 'Boo' : 'Hello World'\n</code></pre>\n"}], "owner": {"reputation": 163, "user_id": 5323557, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8355c158ed15ea9a285b630674655ff1?s=128&d=identicon&r=PG&f=1", "display_name": "KotaBear233", "link": "https://stackoverflow.com/users/5323557/kotabear233"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 34315933, "answer_count": 4, "score": 3, "last_activity_date": 1580235961, "creation_date": 1450279687, "last_edit_date": 1450282974, "question_id": 34315892, "link": "https://stackoverflow.com/questions/34315892/refactoring-ruby", "title": "Refactoring Ruby", "body": "<p>I have three arrays, two of which come from JSON.</p>\n\n<p>I need to check if each array is not nil and the count is greater than 0. If any are greater than 0 display \"Hello World\" else display \"Boo\".</p>\n\n<pre><code>&lt;% if !@arrayOne.nil? &amp;&amp; @arrayOne.count &gt; 0 || !@user_json[:user_stuff].nil? &amp;&amp; @user_json[:user_stuff].count &gt; 0 || !@user_json[:more_user_stuff].nil? &amp;&amp; @user_json[:more_user_stuff].count &gt; 0 %&gt;\n&lt;h1&gt;Hello World&lt;/h1&gt;\n  &lt;% else %&gt;\n&lt;h1&gt;Boo&lt;/h1&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>I need some help refactoring this code and would like to learn other ways to approach this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "answers": [{"tags": [], "owner": {"reputation": 1780, "user_id": 828277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/4PoTf.jpg?s=128&g=1", "display_name": "ben", "link": "https://stackoverflow.com/users/828277/ben"}, "is_accepted": true, "score": 0, "last_activity_date": 1450279079, "creation_date": 1450279079, "answer_id": 34315660, "question_id": 34315572, "link": "https://stackoverflow.com/questions/34315572/cant-start-server/34315660#34315660", "title": "Can&#39;t start server", "body": "<p>You are missing configuration variable(s) and the pusher initializer cannot read the url, because its missing an url. You see it this line from your backtrace:</p>\n\n<pre><code>from /Users/abdullahatkaev/the247clinic/config/initializers/pusher.rb:1:in `&lt;top (required)&gt;'\n</code></pre>\n\n<p>Check this file to see what you need exactly. It depends on your project how you can set the url. Either through rails or something like dotenv.</p>\n"}], "owner": {"reputation": 3793, "user_id": 5685381, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/37NvF.jpg?s=128&g=1", "display_name": "Said-Abdulla Atkaev", "link": "https://stackoverflow.com/users/5685381/said-abdulla-atkaev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 34315660, "answer_count": 1, "score": 0, "last_activity_date": 1450279079, "creation_date": 1450278797, "last_edit_date": 1450278865, "question_id": 34315572, "link": "https://stackoverflow.com/questions/34315572/cant-start-server", "title": "Can&#39;t start server", "body": "<p>Cloned project from heroku and installed all gems with bundle.\nThat is what my server say to me.</p>\n\n<pre><code>$ rails s\n=&gt; Booting Puma\n=&gt; Rails 4.2.2 application starting in development on http://localhost:3000\n=&gt; Run `rails server -h` for more startup options\n=&gt; Ctrl-C to shutdown server\nExiting\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/uri/common.rb:176:in `split': bad URI(is not URI?):  (URI::InvalidURIError)\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/uri/common.rb:211:in `parse'\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/uri/common.rb:747:in `parse'\nfrom /Library/Ruby/Gems/2.0.0/gems/pusher-0.15.1/lib/pusher/client.rb:53:in `url='\nfrom /Users/abdullahatkaev/the247clinic/config/initializers/pusher.rb:1:in `&lt;top (required)&gt;'\nfrom /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.2/lib/active_support/dependencies.rb:268:in `load'\nfrom /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.2/lib/active_support/dependencies.rb:268:in `block in load'\nfrom /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.2/lib/active_support/dependencies.rb:240:in `load_dependency'\nfrom /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.2/lib/active_support/dependencies.rb:268:in `load'\nfrom /Library/Ruby/Gems/2.0.0/gems/railties-4.2.2/lib/rails/engine.rb:652:in `block in load_config_initializer'\nfrom /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.2/lib/active_support/notifications.rb:166:in `instrument'\nfrom /Library/Ruby/Gems/2.0.0/gems/railties-4.2.2/lib/rails/engine.rb:651:in `load_config_initializer'\nfrom /Library/Ruby/Gems/2.0.0/gems/railties-4.2.2/lib/rails/engine.rb:616:in `block (2 levels) in &lt;class:Engine&gt;'\nfrom /Library/Ruby/Gems/2.0.0/gems/railties-4.2.2/lib/rails/engine.rb:615:in `each'\nfrom /Library/Ruby/Gems/2.0.0/gems/railties-4.2.2/lib/rails/engine.rb:615:in `block in &lt;class:Engine&gt;'\nfrom /Library/Ruby/Gems/2.0.0/gems/railties-4.2.2/lib/rails/initializable.rb:30:in `instance_exec'\nfrom /Library/Ruby/Gems/2.0.0/gems/railties-4.2.2/lib/rails/initializable.rb:30:in `run'\nfrom /Library/Ruby/Gems/2.0.0/gems/railties-4.2.2/lib/rails/initializable.rb:55:in `block in run_initializers'\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/tsort.rb:150:in `block in tsort_each'\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/tsort.rb:183:in `block (2 levels) in each_strongly_connected_component'\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/tsort.rb:210:in `block (2 levels) in each_strongly_connected_component_from'\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/tsort.rb:219:in `each_strongly_connected_component_from'\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/tsort.rb:209:in `block in each_strongly_connected_component_from'\nfrom /Library/Ruby/Gems/2.0.0/gems/railties-4.2.2/lib/rails/initializable.rb:44:in `each'\nfrom /Library/Ruby/Gems/2.0.0/gems/railties-4.2.2/lib/rails/initializable.rb:44:in `tsort_each_child'\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/tsort.rb:203:in `each_strongly_connected_component_from'\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/tsort.rb:182:in `block in each_strongly_connected_component'\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/tsort.rb:180:in `each'\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/tsort.rb:180:in `each_strongly_connected_component'\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/tsort.rb:148:in `tsort_each'\nfrom /Library/Ruby/Gems/2.0.0/gems/railties-4.2.2/lib/rails/initializable.rb:54:in `run_initializers'\nfrom /Library/Ruby/Gems/2.0.0/gems/railties-4.2.2/lib/rails/application.rb:352:in `initialize!'\nfrom /Users/abdullahatkaev/the247clinic/config/environment.rb:5:in `&lt;top (required)&gt;'\nfrom /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.2/lib/active_support/dependencies.rb:274:in `require'\nfrom /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.2/lib/active_support/dependencies.rb:274:in `block in require'\nfrom /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.2/lib/active_support/dependencies.rb:240:in `load_dependency'\nfrom /Library/Ruby/Gems/2.0.0/gems/activesupport-4.2.2/lib/active_support/dependencies.rb:274:in `require'\nfrom /Users/abdullahatkaev/the247clinic/config.ru:3:in `block in &lt;main&gt;'\nfrom /Library/Ruby/Gems/2.0.0/gems/rack-1.6.4/lib/rack/builder.rb:55:in `instance_eval'\nfrom /Library/Ruby/Gems/2.0.0/gems/rack-1.6.4/lib/rack/builder.rb:55:in `initialize'\nfrom /Users/abdullahatkaev/the247clinic/config.ru:in `new'\nfrom /Users/abdullahatkaev/the247clinic/config.ru:in `&lt;main&gt;'\nfrom /Library/Ruby/Gems/2.0.0/gems/rack-1.6.4/lib/rack/builder.rb:49:in `eval'\nfrom /Library/Ruby/Gems/2.0.0/gems/rack-1.6.4/lib/rack/builder.rb:49:in `new_from_string'\nfrom /Library/Ruby/Gems/2.0.0/gems/rack-1.6.4/lib/rack/builder.rb:40:in `parse_file'\nfrom /Library/Ruby/Gems/2.0.0/gems/rack-1.6.4/lib/rack/server.rb:299:in `build_app_and_options_from_config'\nfrom /Library/Ruby/Gems/2.0.0/gems/rack-1.6.4/lib/rack/server.rb:208:in `app'\nfrom /Library/Ruby/Gems/2.0.0/gems/railties-4.2.2/lib/rails/commands/server.rb:61:in `app'\nfrom /Library/Ruby/Gems/2.0.0/gems/rack-1.6.4/lib/rack/server.rb:336:in `wrapped_app'\nfrom /Library/Ruby/Gems/2.0.0/gems/railties-4.2.2/lib/rails/commands/server.rb:139:in `log_to_stdout'\nfrom /Library/Ruby/Gems/2.0.0/gems/railties-4.2.2/lib/rails/commands/server.rb:78:in `start'\nfrom /Library/Ruby/Gems/2.0.0/gems/railties-4.2.2/lib/rails/commands/commands_tasks.rb:80:in `block in server'\nfrom /Library/Ruby/Gems/2.0.0/gems/railties-4.2.2/lib/rails/commands/commands_tasks.rb:75:in `tap'\nfrom /Library/Ruby/Gems/2.0.0/gems/railties-4.2.2/lib/rails/commands/commands_tasks.rb:75:in `server'\nfrom /Library/Ruby/Gems/2.0.0/gems/railties-4.2.2/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\nfrom /Library/Ruby/Gems/2.0.0/gems/railties-4.2.2/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\nfrom /Users/abdullahatkaev/the247clinic/bin/rails:8:in `require'\nfrom /Users/abdullahatkaev/the247clinic/bin/rails:8:in `&lt;top (required)&gt;'\nfrom /Library/Ruby/Gems/2.0.0/gems/spring-1.1.3/lib/spring/client/rails.rb:27:in `load'\nfrom /Library/Ruby/Gems/2.0.0/gems/spring-1.1.3/lib/spring/client/rails.rb:27:in `call'\nfrom /Library/Ruby/Gems/2.0.0/gems/spring-1.1.3/lib/spring/client/command.rb:7:in `call'\nfrom /Library/Ruby/Gems/2.0.0/gems/spring-1.1.3/lib/spring/client.rb:26:in `run'\nfrom /Library/Ruby/Gems/2.0.0/gems/spring-1.1.3/bin/spring:48:in `&lt;top (required)&gt;'\nfrom /Library/Ruby/Gems/2.0.0/gems/spring-1.1.3/lib/spring/binstub.rb:11:in `load'\nfrom /Library/Ruby/Gems/2.0.0/gems/spring-1.1.3/lib/spring/binstub.rb:11:in `&lt;top (required)&gt;'\nfrom /Library/Ruby/Site/2.0.0/rubygems/core_ext/kernel_require.rb:54:in `require'\nfrom /Library/Ruby/Site/2.0.0/rubygems/core_ext/kernel_require.rb:54:in `require'\nfrom /Users/abdullahatkaev/the247clinic/bin/spring:13:in `&lt;top (required)&gt;'\nfrom bin/rails:3:in `load'\nfrom bin/rails:3:in `&lt;main&gt;'\n</code></pre>\n\n<p>Anybody knows how to fix it?\nMaybe i should to do something more then only bundle. I am just starting, sorry if its to easy.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 9409, "user_id": 1577308, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/53064348edf1b31e158bd67613651826?s=128&d=identicon&r=PG", "display_name": "fs_tigre", "link": "https://stackoverflow.com/users/1577308/fs-tigre"}, "edited": false, "score": 0, "creation_date": 1450282372, "post_id": 34315604, "comment_id": 56375518, "body": "Thank you for the clearification. I thought <code>:chainring</code> and <code>:cog</code> were symbols, I read somewhere that you define symbols by using the colon &quot;<code>:</code>&quot;. I&#39;m not familiar with symbols either anyways. Thanks"}, {"owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "reply_to_user": {"reputation": 9409, "user_id": 1577308, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/53064348edf1b31e158bd67613651826?s=128&d=identicon&r=PG", "display_name": "fs_tigre", "link": "https://stackoverflow.com/users/1577308/fs-tigre"}, "edited": false, "score": 2, "creation_date": 1450282714, "post_id": 34315604, "comment_id": 56375754, "body": "@fs_tigre The <code>:chainring</code> is a symbol. It&#39;s also a parameter of the method <a href=\"http://ruby-doc.org/core-2.2.3/Module.html#method-i-attr_reader\" rel=\"nofollow noreferrer\"><code>attr_reader()</code></a>. This method creates simple getter methods."}, {"owner": {"reputation": 9409, "user_id": 1577308, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/53064348edf1b31e158bd67613651826?s=128&d=identicon&r=PG", "display_name": "fs_tigre", "link": "https://stackoverflow.com/users/1577308/fs-tigre"}, "reply_to_user": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "edited": false, "score": 0, "creation_date": 1450284216, "post_id": 34315604, "comment_id": 56376810, "body": "@sschmeck Hmm, I need to read more about this whole concept of symbols and accessor/readers. Thanks"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1450286301, "post_id": 34315604, "comment_id": 56378063, "body": "fs, you could also write <code>attr_reader &quot;chainring&quot;, :cog</code>. Many (most? all?) of Ruby&#39;s methods (<a href=\"http://ruby-doc.org/core-2.0.0/Module.html#method-i-attr_accessor\" rel=\"nofollow noreferrer\">Module#attr_accessor</a> being one) allow an argument to be either a symbol or a string when it represents a method. (Why not?)"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 4, "last_activity_date": 1450278899, "creation_date": 1450278899, "answer_id": 34315604, "question_id": 34315447, "link": "https://stackoverflow.com/questions/34315447/understanding-ruby-code-presented-in-book-practical-object-oriented-design/34315604#34315604", "title": "Understanding Ruby-code presented in book Practical Object Oriented Design", "body": "<p>Two methods (<code>chainring</code> and <code>cog</code>) are implicitly defined by <a href=\"http://ruby-doc.org/core-2.1.1/Module.html#method-i-attr_reader\" rel=\"nofollow\"><code>attr_reader</code></a>:</p>\n\n<pre><code>attr_reader :chainring, :cog  \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1450281368, "post_id": 34315784, "comment_id": 56374743, "body": "<code>attr_reader</code> is by no mean \u201ca macro.\u201d It is plain old good method, defined on <code>Module</code> class."}, {"owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1450281846, "post_id": 34315784, "comment_id": 56375105, "body": "@mudasobwa I call it macro because of its usage. It doesn&#39;t matter where it&#39;s defined. How do you define macro in the Ruby world?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1450281983, "post_id": 34315784, "comment_id": 56375227, "body": "I won\u2019t. This question is similar to \u201chow would you define \u2018leaf\u2019 in pine-trees world.\u201d :)"}, {"owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1450282467, "post_id": 34315784, "comment_id": 56375588, "body": "BTW I&#39;ve taken my definition from <a href=\"https://pragprog.com/book/ppmetr/metaprogramming-ruby\" rel=\"nofollow noreferrer\"><i>Metaprogramming Ruby</i></a>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1450288534, "post_id": 34315784, "comment_id": 56379371, "body": "There&#39;s an analogy here with the use of the term &quot;operator&quot; to describe what is in fact a method. Nevertheless, I must side with @mudasobwa, because &quot;operator&quot; is part of the official Ruby documentation (but never defined?) and is sprinkled throughout every book on Ruby. By contrast, I don&#39;t recall seeing &quot;macro&quot; in any of those places (including <i>Metaprogramming Ruby</i>, though I don&#39;t question that it&#39;s there). Also, the term may be confusing those new to Ruby who are familiar to C-type macros. Lastly, by using the term &quot;method&quot; you are educating readers who do not realize that&#39;s what it is."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1450291422, "post_id": 34315784, "comment_id": 56381105, "body": "@CarySwoveland yes, I beware of those newbies who would treat the term \u201cmacro\u201d as having <i>anything</i> in common with <code>C</code>-type macros. It is a challenge to meet a really object oriented language and to accept it\u2019s paradigms. On the other hand, Elixir evolved \u201cmacro\u201d term and even made it acceptable :) So, I am uncertain whether I love \u201cmacro\u201d term, or not, but anyway \u201cyou are educating readers who do not realize that&#39;s what it is.\u201d Thanks for pointing this out."}], "tags": [], "owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "is_accepted": false, "score": 4, "last_activity_date": 1450279387, "creation_date": 1450279387, "answer_id": 34315784, "question_id": 34315447, "link": "https://stackoverflow.com/questions/34315447/understanding-ruby-code-presented-in-book-practical-object-oriented-design/34315784#34315784", "title": "Understanding Ruby-code presented in book Practical Object Oriented Design", "body": "<p>The methods are created with the <code>attr_reader</code> macro. You can show all methods in your example with <code>instance_methods</code>.</p>\n\n<pre><code>p Gear.instance_methods(false)\n#=&gt; [:chainring, :cog, :ratio]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 2, "last_activity_date": 1450279510, "creation_date": 1450279510, "answer_id": 34315828, "question_id": 34315447, "link": "https://stackoverflow.com/questions/34315447/understanding-ruby-code-presented-in-book-practical-object-oriented-design/34315828#34315828", "title": "Understanding Ruby-code presented in book Practical Object Oriented Design", "body": "<pre><code>attr_reader :chainring, :cog  \n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>def chainring\n  @chainring\nend\n\ndef cog\n  @cog\nend\n</code></pre>\n\n<p>Writing methods like these by hand is boring, so ruby provides a shortcut.</p>\n"}], "owner": {"reputation": 9409, "user_id": 1577308, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/53064348edf1b31e158bd67613651826?s=128&d=identicon&r=PG", "display_name": "fs_tigre", "link": "https://stackoverflow.com/users/1577308/fs-tigre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 34315604, "answer_count": 3, "score": 1, "last_activity_date": 1484054776, "creation_date": 1450278415, "last_edit_date": 1484054776, "question_id": 34315447, "link": "https://stackoverflow.com/questions/34315447/understanding-ruby-code-presented-in-book-practical-object-oriented-design", "title": "Understanding Ruby-code presented in book Practical Object Oriented Design", "body": "<p>I'm currently reading the book called <code>Practical Object Oriented Design in Ruby</code>. I'm new to Ruby and I know that understanding the code presented in the book is not required as long as you understand the concepts, which I do but a piece of code that I found in chapter 2 is bothering me a bit.</p>\n\n<p>In chapter 2 the author shows the following Ruby class...</p>\n\n<pre><code>class Gear  \n    attr_reader :chainring, :cog  \n    def initialize(chainring, cog)  \n        @chainring = chainring \n        @cog       = cog  6    \n    end  \n\n     def ratio  \n        chainring / cog.to_f \n    end \nend \n\nputs Gear.new(52, 11).ratio        \nputs Gear.new(30, 27).ratio\n</code></pre>\n\n<p>The part that I don't know understand is that she say this class contains three methods, <code>chainring</code>,<code>cog</code> and <code>ratio</code> but I only see one method (<code>ratio</code>) and two symbols (<code>chainring</code> and <code>cog</code>).</p>\n\n<p>Can someone verify the code above and tell me if this is a mistake of the author or in fact there are three methods?</p>\n\n<p>Quote from the book:</p>\n\n<blockquote>\n  <p>Each instance implements three methods:<code>chainring</code>,<code>cog</code> and <code>ratio</code>.</p>\n</blockquote>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 887, "user_id": 5651918, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/63f1beb509753125879b1d07507d2a4f?s=128&d=identicon&r=PG&f=1", "display_name": "handkock", "link": "https://stackoverflow.com/users/5651918/handkock"}, "edited": false, "score": 0, "creation_date": 1450276732, "post_id": 34314748, "comment_id": 56371255, "body": "how do i take then any variables from outside in my controller ?"}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": false, "score": 1, "last_activity_date": 1450277063, "last_edit_date": 1450277063, "creation_date": 1450276531, "answer_id": 34314748, "question_id": 34314696, "link": "https://stackoverflow.com/questions/34314696/wrong-number-of-arguments-0-for-2-method-error/34314748#34314748", "title": "wrong number of arguments (0 for 2) - method error", "body": "<p>Your controller actions doesn't take any arguments, you pass any parameter into them with the use of <code>params</code> method. For example, your <code>upvote</code> link would look like this:</p>\n\n<pre><code>upvote_dashboard_path(user_id: f.id, post_id: i)\n</code></pre>\n\n<p>And you can access it in your controller with <code>params[:user_id]</code> and <code>params[:post_id]</code>. </p>\n\n<p>Also, I <strong>strongly</strong> recommend you reading some Rails tutorials, as this is really basic Rails knowledge.</p>\n"}, {"tags": [], "owner": {"reputation": 677, "user_id": 5306420, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/fdf6d0a7c2a4d6a5e4d1b772175da542?s=128&d=identicon&r=PG&f=1", "display_name": "punitcse", "link": "https://stackoverflow.com/users/5306420/punitcse"}, "is_accepted": false, "score": 0, "last_activity_date": 1450277034, "creation_date": 1450277034, "answer_id": 34314933, "question_id": 34314696, "link": "https://stackoverflow.com/questions/34314696/wrong-number-of-arguments-0-for-2-method-error/34314933#34314933", "title": "wrong number of arguments (0 for 2) - method error", "body": "<p>You can not write controller <code>actions</code> like this.You have to write</p>\n\n<pre><code>def upvote\n  @user= User find(params[:user_id])\n  @user.posts.find(params[:post_id]).increment!(:votes)\n  redirect_to action: \"view\"\nend\n</code></pre>\n\n<p>and on the view part</p>\n\n<pre><code>#app/views/dashboard/view.html.erb\n&lt;%=f.posts.find(i).votes%&gt;, &lt;%= link_to \"+\", upvote_dashboard_path(user_id: f.id, post_id: i) %&gt;\n</code></pre>\n"}], "owner": {"reputation": 887, "user_id": 5651918, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/63f1beb509753125879b1d07507d2a4f?s=128&d=identicon&r=PG&f=1", "display_name": "handkock", "link": "https://stackoverflow.com/users/5651918/handkock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1450277118, "creation_date": 1450276405, "question_id": 34314696, "link": "https://stackoverflow.com/questions/34314696/wrong-number-of-arguments-0-for-2-method-error", "title": "wrong number of arguments (0 for 2) - method error", "body": "<p>Why do i become such a error message ? \nHere's my controller:</p>\n\n<pre><code>#app/controllers/dashboard_controller.rb\ndef upvote(user, post_id)\n  @user=user\n  @user.posts.find(post_id).increment!(:votes)\n  redirect_to action: \"view\"\nend\n</code></pre>\n\n<p>Here i use my function:</p>\n\n<pre><code>#app/views/dashboard/view.html.erb\n&lt;%=f.posts.find(i).votes%&gt;, &lt;%= link_to \"+\", upvote_dashboard_path(f,i) %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "foreign-keys", "sti"], "comments": [{"owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1450286049, "post_id": 34314578, "comment_id": 56377903, "body": "Inheritance is for specialization, and subclasses should be usable anywhere their superclasses are. If <code>Nested</code> is not STI, it should not be inheriting from something that is. If you state your actual goal in creating <code>Nested</code>, maybe we can help you with your design."}, {"owner": {"reputation": 2994, "user_id": 4175647, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/cdc00400f3017caba1581296dc6c4f01?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Roz", "link": "https://stackoverflow.com/users/4175647/nick-roz"}, "reply_to_user": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1450355302, "post_id": 34314578, "comment_id": 56410418, "body": "@Kristj&#225;n, no, this is not a design problem and I&#39;m aware of purposes of inheritance and STI as well. But there are many different cases in the programming when circumstances are over conventions. The example fits my needs one hundred percent. The question is only about redefining all foreign keys at once"}, {"owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1450368284, "post_id": 34314578, "comment_id": 56419351, "body": "Everything is a design problem :)"}, {"owner": {"reputation": 2994, "user_id": 4175647, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/cdc00400f3017caba1581296dc6c4f01?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Roz", "link": "https://stackoverflow.com/users/4175647/nick-roz"}, "reply_to_user": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1450701794, "post_id": 34314578, "comment_id": 56533116, "body": "Well, It might be in Rails itself"}], "answers": [{"comments": [{"owner": {"reputation": 2994, "user_id": 4175647, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/cdc00400f3017caba1581296dc6c4f01?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Roz", "link": "https://stackoverflow.com/users/4175647/nick-roz"}, "edited": false, "score": 0, "creation_date": 1450861329, "post_id": 34339724, "comment_id": 56604855, "body": "Well, what I&#39;m doing is exactly that &#39;inadvisable overriding <code>Nested.name</code>&#39;"}], "tags": [], "owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "is_accepted": false, "score": 2, "last_activity_date": 1450751577, "last_edit_date": 1450751577, "creation_date": 1450370047, "answer_id": 34339724, "question_id": 34314578, "link": "https://stackoverflow.com/questions/34314578/redefine-foreign-key-name-for-all-associations-in-rails/34339724#34339724", "title": "Redefine foreign key name for all associations in Rails", "body": "<p>If all your <code>has_many</code> associations are declared on <code>MyModel</code>, you should be fine, or you may benefit from upgrading Rails; the following works perfectly for me in 4.2.4. Rails uses the class that declares <code>has_many</code> to generate the <code>foreign_key</code>, so even when <code>Nested</code> inherits, <code>:things</code> still get looked up by <code>my_model_id</code>. </p>\n\n<pre><code>class MyModel &lt; ActiveRecord::Base\n  has_many :things\nend\n\nclass MyA &lt; MyModel\nend\n\nclass Nested &lt; MyModel\n  self.inheritance_column = nil\nend\n\nclass Thing &lt; ActiveRecord::Base\n  belongs_to :my_model\nend\n</code></pre>\n\n<pre class=\"lang-irb prettyprint-override\"><code>&gt; m = MyModel.create\n =&gt; #&lt;MyModel id: 1, type: nil, created_at: \"2015-12-22 02:21:16\", updated_at: \"2015-12-22 02:21:16\"&gt;\n&gt; m.things.create\n =&gt; #&lt;ActiveRecord::Associations::CollectionProxy [#&lt;Thing id: 1, my_model_id: 1, created_at: \"2015-12-22 02:21:19\", updated_at: \"2015-12-22 02:21:19\"&gt;]&gt;\n&gt; n = Nested.create\n =&gt; #&lt;Nested id: 2, type: nil, created_at: \"2015-12-22 02:21:27\", updated_at: \"2015-12-22 02:21:27\"&gt;\n&gt; n.things.create\n =&gt; #&lt;ActiveRecord::Associations::CollectionProxy [#&lt;Thing id: 2, my_model_id: 2, created_at: \"2015-12-22 02:21:32\", updated_at: \"2015-12-22 02:21:32\"&gt;]&gt;\n&gt; n.reload.things\n  Nested Load (0.2ms)  SELECT  \"my_models\".* FROM \"my_models\" WHERE \"my_models\".\"id\" = ? LIMIT 1  [[\"id\", 2]]\n  Thing Load (0.1ms)  SELECT \"things\".* FROM \"things\" WHERE \"things\".\"my_model_id\" = ?  [[\"my_model_id\", 2]]\n =&gt; #&lt;ActiveRecord::Associations::CollectionProxy [#&lt;Thing id: 2, my_model_id: 2, created_at: \"2015-12-22 02:21:32\", updated_at: \"2015-12-22 02:21:32\"&gt;]&gt;\n</code></pre>\n\n<hr>\n\n<p>If you're giving <code>Nested</code> its own <code>has_many</code> associations, the code that generates foreign keys is pretty deep and inaccessible. You end up in the <a href=\"https://github.com/rails/rails/blob/v4.2.4/activerecord/lib/active_record/reflection.rb#L575\" rel=\"nofollow\"><code>HasManyReflection</code></a>, which either uses the <code>foreign_key</code> (or <code>as</code>) option declared on your <code>has_many</code> or derives it from the class name. There's no obvious way to customize those methods unless you do something inadvisable like override <code>Nested.name</code>.</p>\n\n<p><a href=\"https://github.com/rails/rails/blob/v4.2.4/activerecord/lib/active_record/reflection.rb#L305-L307\" rel=\"nofollow\"><code>foreign_key</code></a>:</p>\n\n<pre><code>def foreign_key\n  @foreign_key ||= options[:foreign_key] || derive_foreign_key\nend\n</code></pre>\n\n<p><a href=\"https://github.com/rails/rails/blob/v4.2.4/activerecord/lib/active_record/reflection.rb#L556-L564\" rel=\"nofollow\"><code>derive_foreign_key</code></a>:</p>\n\n<pre><code>def derive_foreign_key\n  if belongs_to?\n    \"#{name}_id\"\n  elsif options[:as]\n    \"#{options[:as]}_id\"\n  else\n    active_record.name.foreign_key\n  end\nend\n</code></pre>\n\n<p>So the simplest way to go about this might just be a loop:</p>\n\n<pre><code>class Nested &lt; MyModel\n  self.inheritance_column = nil\n\n  %i[things other_things].each do |association|\n    has_many association, foreign_key: 'my_model_id'\n  end\nend\n</code></pre>\n\n<p>Or if you're feeling metaprogrammy, redefine <code>has_many</code>:</p>\n\n<pre><code>class Nested &lt; MyModel\n  self.inheritance_column = nil\n\n  def self.has_many(klass, options={})\n    options.reverse_merge!(foreign_key: 'my_model_id')\n    super\n  end\n\n  has_many :things\n  has_many :other_things\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2994, "user_id": 4175647, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/cdc00400f3017caba1581296dc6c4f01?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Roz", "link": "https://stackoverflow.com/users/4175647/nick-roz"}, "edited": false, "score": 0, "creation_date": 1451055169, "post_id": 34432131, "comment_id": 56669456, "body": "If smb knows the drawbacks of this approach, let me know"}], "tags": [], "owner": {"reputation": 2994, "user_id": 4175647, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/cdc00400f3017caba1581296dc6c4f01?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Roz", "link": "https://stackoverflow.com/users/4175647/nick-roz"}, "is_accepted": true, "score": -1, "last_activity_date": 1450861974, "creation_date": 1450861974, "answer_id": 34432131, "question_id": 34314578, "link": "https://stackoverflow.com/questions/34314578/redefine-foreign-key-name-for-all-associations-in-rails/34432131#34432131", "title": "Redefine foreign key name for all associations in Rails", "body": "<p>My solution might be is not recommended, but it works. Here it is:</p>\n\n<pre><code>class Nested &lt; MyModel\n  def self.name\n    MyModel.name\n  end\nend\n</code></pre>\n\n<p><code>ActiveRecord</code> will be looking for <code>my_model_id</code> foreign key for all the associations defined or redefined in <code>Nested</code> and <code>MyModel</code> classes.</p>\n"}], "owner": {"reputation": 2994, "user_id": 4175647, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/cdc00400f3017caba1581296dc6c4f01?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Roz", "link": "https://stackoverflow.com/users/4175647/nick-roz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 317, "favorite_count": 1, "accepted_answer_id": 34432131, "answer_count": 2, "score": 1, "last_activity_date": 1450861974, "creation_date": 1450276043, "last_edit_date": 1450711284, "question_id": 34314578, "link": "https://stackoverflow.com/questions/34314578/redefine-foreign-key-name-for-all-associations-in-rails", "title": "Redefine foreign key name for all associations in Rails", "body": "<p>I have <strong>an STI</strong> model with many associations:</p>\n\n<pre><code>class MyModel &lt; ActiveRecord::base\n  has_many :things\n  has_many :other_things\n  # ... a lot of `has_many`\nend\n</code></pre>\n\n<p>Then I add <strong>non STI</strong> model as nested just to add some specific behaviour to <code>MyModel</code> without extending it directly:</p>\n\n<pre><code>class Nested &lt; MyModel\n  self.inheritance_column = nil\nend\n</code></pre>\n\n<p>But then my associations don't work. They have <code>my_model_id</code> column because they refer to <code>MyModel</code> and they should refer to <code>Nested</code> as well. But all these <code>has_many</code>'s expect to use <code>nested_id</code> column as a foreign key (it depends on class name).</p>\n\n<p>I could've typed inside <code>class Nested</code>:</p>\n\n<pre><code>has_many :things, foreign_key: 'my_model_id'\nhas_many :other_things, foreign_key: 'my_model_id'\n</code></pre>\n\n<p>But if it's possible, <strong>how to specify the foreign key for all the associations at once</strong> in <code>Nested</code> class?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1450274511, "post_id": 34313830, "comment_id": 56369604, "body": "What is your question?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1450283980, "post_id": 34313830, "comment_id": 56376669, "body": "Using regular expressions to find valid email strings is very difficult, because there are <a href=\"http://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address\">a huge number of variations on valid addresses</a>."}], "answers": [{"comments": [{"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 1, "creation_date": 1450274277, "post_id": 34313912, "comment_id": 56369448, "body": "Also, the regex is not correct - <code>.</code> has to be escaped in both <code>[]</code>."}, {"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "reply_to_user": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1450274308, "post_id": 34313912, "comment_id": 56369466, "body": "didnt notice that. Thanks will update it in my answer"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 3, "creation_date": 1450274692, "post_id": 34313912, "comment_id": 56369735, "body": "@BroiSatse this is wrong. Dot <i>does not</i> need escaping inside square brackets."}], "tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 1, "last_activity_date": 1450285493, "last_edit_date": 1450285493, "creation_date": 1450274115, "answer_id": 34313912, "question_id": 34313830, "link": "https://stackoverflow.com/questions/34313830/searching-a-string-to-find-an-email-address-in-ruby/34313912#34313912", "title": "Searching a string to find an email address in ruby", "body": "<p>You are applying <code>match</code> on a Hash. </p>\n\n<p><code>challenge_params</code> is a Hash. Going by the error message, this hash contains a key <code>content</code> which is where you want to use with <code>match</code>, hence rewriting the <code>match</code> line to:</p>\n\n<pre><code>challenge_params[\"content\"].match(/\\b[A-Z0-9\\._%+-]+@[A-Z0-9\\.-]+\\.[A-Z]{2,4}\\b/i)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 1, "creation_date": 1450276306, "post_id": 34314555, "comment_id": 56370919, "body": "problem with this approach is, what if you get a string like: <code>&quot;some random special chars 1@#$%! my email: test@gmail.com&quot;</code>"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1450283701, "post_id": 34314555, "comment_id": 56376463, "body": "While the description is nice, you need to show code. We appreciate that you&#39;re new to Ruby, however solutions to problems almost always need code."}, {"owner": {"reputation": 17, "user_id": 5683864, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cCvxUEyHrn8/AAAAAAAAAAI/AAAAAAAAf3M/lG_JI9XHVHo/photo.jpg?sz=128", "display_name": "Margal", "link": "https://stackoverflow.com/users/5683864/margal"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1450292184, "post_id": 34314555, "comment_id": 56381558, "body": "@theTinMan: sorry about that. I edited my original answer including sample code..."}], "tags": [], "owner": {"reputation": 17, "user_id": 5683864, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cCvxUEyHrn8/AAAAAAAAAAI/AAAAAAAAf3M/lG_JI9XHVHo/photo.jpg?sz=128", "display_name": "Margal", "link": "https://stackoverflow.com/users/5683864/margal"}, "is_accepted": false, "score": 0, "last_activity_date": 1450291466, "last_edit_date": 1450291466, "creation_date": 1450275972, "answer_id": 34314555, "question_id": 34313830, "link": "https://stackoverflow.com/questions/34313830/searching-a-string-to-find-an-email-address-in-ruby/34314555#34314555", "title": "Searching a string to find an email address in ruby", "body": "<p>I'm new to ruby so my answer may be very \"amateur-ish\", but sometimes the simplest ideas are the best...\nThe way I would do this is search for index of @ sign. Then analyze each character before and after the sign until you get to blank space and save those index numbers. Use those index numbers to extract the email address from your string.</p>\n\n<pre><code>def email_address(str)\nat_index = str.index('@')\ntemp = (at_index - 1)\nwhile str[temp] != ' '\n    temp -= 1\nend\nbegining_index = (temp + 1)\ntemp = (at_index + 1)\nwhile str[temp] != ' '\n    temp += 1\nend\nend_index = temp\nreturn str[begining_index..end_index]\n</code></pre>\n\n<p>end</p>\n"}], "owner": {"reputation": 11, "user_id": 5682302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fb7dfb830f540b7600bd7a978c75a8e?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Yevoli", "link": "https://stackoverflow.com/users/5682302/joe-yevoli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1450291466, "creation_date": 1450273909, "last_edit_date": 1450274512, "question_id": 34313830, "link": "https://stackoverflow.com/questions/34313830/searching-a-string-to-find-an-email-address-in-ruby", "title": "Searching a string to find an email address in ruby", "body": "<p>I'm trying to write code that will let me search the content submitted through a form and find the email address in the content.  Below is the code, and the error message I'm receiving.</p>\n\n<pre><code>Error: undefined method `match' for {\"content\"=&gt;\"this is a test testemail@gmail.com\"}:ActionController::Parameters\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>class ChallengesController &lt; ApplicationController\n  def create\n    @challenge = current_user.challenges.build(challenge_params)\n    challenge_params.match(/\\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}\\b/i)\n    # ...\n  end\n\n  private\n\n  def challenge_params\n    params.require(:challenge).permit(:content)\n  end \nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "nginx", "unicorn"], "answers": [{"tags": [], "owner": {"reputation": 1231, "user_id": 1082010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EiEby.png?s=128&g=1", "display_name": "Mareq", "link": "https://stackoverflow.com/users/1082010/mareq"}, "is_accepted": false, "score": 0, "last_activity_date": 1450279221, "creation_date": 1450279221, "answer_id": 34315718, "question_id": 34313440, "link": "https://stackoverflow.com/questions/34313440/upload-multiple-files-with-nginx/34315718#34315718", "title": "Upload multiple files with nginx", "body": "<p>I had similar problem and I've switched Unicorn to Rainbows! <a href=\"http://rainbows.bogomips.org/\" rel=\"nofollow\">http://rainbows.bogomips.org/</a> with minor configuration changes.\nAs they claim:</p>\n\n<blockquote>\n  <p>Rainbows! is an HTTP server for sleepy Rack applications. It is based\n  on unicorn, but designed to handle applications that expect long\n  request/response times and/or slow clients.</p>\n</blockquote>\n\n<p>For me that worked for years.</p>\n"}], "owner": {"reputation": 628, "user_id": 2070577, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1ee42bbc4496d24a120db7048c462231?s=128&d=identicon&r=PG", "display_name": "Frederico Novack Amaral Pereir", "link": "https://stackoverflow.com/users/2070577/frederico-novack-amaral-pereir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 259, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1450279221, "creation_date": 1450272834, "question_id": 34313440, "link": "https://stackoverflow.com/questions/34313440/upload-multiple-files-with-nginx", "title": "Upload multiple files with nginx", "body": "<p>I'm using a paperclip for attaching multiple images to a table row, but unicorn get a time out and don't complete the upload. I need know how to make multiple files upload from nginx, without getting this time out.</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 3, "creation_date": 1450272893, "post_id": 34313430, "comment_id": 56368433, "body": "A whole word can be checked with <code>\\b</code>s around the search term. <code>\\b</code> is a word boundary. Try <code>&#47;\\b#{scan_string}\\b&#47;i</code>."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1450273187, "post_id": 34313430, "comment_id": 56368620, "body": "Almost the same regex is present in the accepted answer in the original question."}, {"owner": {"reputation": 4451, "user_id": 788652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1daf5af7198f084898f5c0d5c4b909d5?s=128&d=identicon&r=PG", "display_name": "Hendrik", "link": "https://stackoverflow.com/users/788652/hendrik"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1450273313, "post_id": 34313430, "comment_id": 56368710, "body": "How is that in terms of performance? I am looking for a solution that is faster than the one I have right now."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1450273709, "post_id": 34313430, "comment_id": 56369024, "body": "@Hendrik doesn&#39;t Ruby come with a Benchmark module? ;-)"}, {"owner": {"reputation": 4451, "user_id": 788652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1daf5af7198f084898f5c0d5c4b909d5?s=128&d=identicon&r=PG", "display_name": "Hendrik", "link": "https://stackoverflow.com/users/788652/hendrik"}, "edited": false, "score": 0, "creation_date": 1450274030, "post_id": 34313430, "comment_id": 56369280, "body": "True, just exploring the options. Maybe a simple index for the search string would also be faster."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1450274849, "post_id": 34313430, "comment_id": 56369861, "body": "But you need a whole word search. A regex is meant to help right in these situations."}], "owner": {"reputation": 4451, "user_id": 788652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1daf5af7198f084898f5c0d5c4b909d5?s=128&d=identicon&r=PG", "display_name": "Hendrik", "link": "https://stackoverflow.com/users/788652/hendrik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "closed_date": 1450273156, "answer_count": 0, "score": 0, "last_activity_date": 1450272807, "creation_date": 1450272807, "question_id": 34313430, "link": "https://stackoverflow.com/questions/34313430/faster-alternative-than-a-regex-maybe-also-the-regex-approach-wrong", "closed_reason": "Duplicate", "title": "Faster alternative than a regex? Maybe also the regex approach wrong", "body": "<p>I have the following code. We run it on a large amount of data. However things are becoming quite slow on the more data points we run it at. Our whole code has 90% execution time at the following code.</p>\n\n<p>We use it to detect if the text contains a few of our provided synonyms. In this case we are using it to make data from another data source to our data.</p>\n\n<pre><code># returns true or false if the scan string can be found in the text\n# see: http://rubular.com/r/GFX6nE9r8u\n#\ndef scan_name_for_whole_word(text, scan_string)\n  # barcelona, spain - not OK\n  # barcelona the spa - OK\n  # barcelona spa centers - OK\n  # spa in barcelona - OK\n  # spa - OK\n  # Look for a whole word\n  !!(text =~ /(\\W#{scan_string}$|^#{scan_string}\\W|\\W#{scan_string}\\W|^#{scan_string}$|^#{scan_string}[s])/i)\nend\n\n# Measuring this:\nbm = Benchmark.measure do\n  100000.times {\n    scan_name_for_whole_word(\"barcelona the spa\", \"spa\")\n  }\nend\n\n# 2.710000   0.040000   2.750000 (  2.755910)\n</code></pre>\n\n<p><strong>Questions:</strong></p>\n\n<ul>\n<li>Is this the correct approach?</li>\n<li>Is there a way to make this faster?</li>\n<li>If so, how could I make it faster?</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby", "multithreading", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "edited": false, "score": 2, "creation_date": 1450272491, "post_id": 34313295, "comment_id": 56368153, "body": "Threads aren&#39;t parallel on some runtimes, e.g. MRI. What do you use?"}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1450272761, "post_id": 34313295, "comment_id": 56368335, "body": "Even with MRI it&#39;s not quite as simple, e.g. if calling through to native code that releases the GVL or spawning an ffmpeg process"}, {"owner": {"reputation": 199, "user_id": 4523131, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/86cf048bc70e51aaf75da31c5f43ea36?s=128&d=identicon&r=PG&f=1", "display_name": "rs41", "link": "https://stackoverflow.com/users/4523131/rs41"}, "edited": false, "score": 0, "creation_date": 1450285902, "post_id": 34313295, "comment_id": 56377807, "body": "I am using <a href=\"https://github.com/tra/spawnling\" rel=\"nofollow noreferrer\">spawnling gem</a>, I am added additional example to first message"}], "answers": [{"comments": [{"owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "edited": false, "score": 1, "creation_date": 1450290028, "post_id": 34319087, "comment_id": 56380255, "body": "And if you don&#39;t want to load all your unprocessed videos at once, set up a 5th thread that sleeps until the queue is below some threshold, then refills it."}, {"owner": {"reputation": 199, "user_id": 4523131, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/86cf048bc70e51aaf75da31c5f43ea36?s=128&d=identicon&r=PG&f=1", "display_name": "rs41", "link": "https://stackoverflow.com/users/4523131/rs41"}, "edited": false, "score": 0, "creation_date": 1450337372, "post_id": 34319087, "comment_id": 56399252, "body": "@Wand Maker, thanks&#39;s a lot for suggestion !  2 notices:  1) For your logic , if we have this array  <code>[&quot;v1&quot;, &quot;v2&quot;, &quot;v3&quot;, &quot;v4&quot;, &quot;v5&quot;, &quot;v6&quot;]</code> The script add <code>[&quot;v1&quot;, &quot;v2&quot;, &quot;v3&quot;, &quot;v4&quot;, &quot;v5&quot;, &quot;v6&quot;]</code> to first thread, and none to other second, third and fourth thread, because untill is a loop with condition  But I need that to first thread added &quot;v1&quot;, to second &quot;v2&quot;, to 3-th &quot;v3&quot;, to 4-th &quot;v4&quot;, to first &quot;v5&quot;, to second &quot;v6&quot; and etc"}, {"owner": {"reputation": 199, "user_id": 4523131, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/86cf048bc70e51aaf75da31c5f43ea36?s=128&d=identicon&r=PG&f=1", "display_name": "rs41", "link": "https://stackoverflow.com/users/4523131/rs41"}, "edited": false, "score": 0, "creation_date": 1450337379, "post_id": 34319087, "comment_id": 56399259, "body": "2) It looks, that your example added videos at once, and after that process whole array But sometimes, manager of project periodically add new videos, and I want to add this videos to Existing queue, not to new queue( So videos must async added to queue and script must be add this videos to current 4 threads).  What you think about it?"}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "reply_to_user": {"reputation": 199, "user_id": 4523131, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/86cf048bc70e51aaf75da31c5f43ea36?s=128&d=identicon&r=PG&f=1", "display_name": "rs41", "link": "https://stackoverflow.com/users/4523131/rs41"}, "edited": false, "score": 0, "creation_date": 1450337685, "post_id": 34319087, "comment_id": 56399414, "body": "@rs41  I think each thread pops only one video at a time - so all 4 threads (once they are running) should be pulling videos one by one.  The <code>Queue</code> class provides a way to synchronize communication between threads."}], "tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": false, "score": 1, "last_activity_date": 1450290037, "last_edit_date": 1495535239, "creation_date": 1450289133, "answer_id": 34319087, "question_id": 34313295, "link": "https://stackoverflow.com/questions/34313295/run-scripts-in-parallel-in-ruby/34319087#34319087", "title": "Run scripts in parallel in ruby", "body": "<p>If your goal is to keep processing videos by using just 4 threads (or whatever Spawnling is configured to use - as it supports fork and thread), then, you could use a <a href=\"http://ruby-doc.org/stdlib-2.0.0/libdoc/thread/rdoc/Queue.html\" rel=\"nofollow noreferrer\">Queue</a> to queue all your video records to be processed, spawn 4 threads and let them keep processing records one by one until queue is empty.</p>\n\n<pre><code>require \"rails\"\nrequire \"spawnling\"\n\n# In your case, videos are read from DB, below array is for illustration\nvideos = [\"v1\", \"v2\", \"v3\", \"v4\", \"v5\", \"v6\", \"...\"]\n\n\nTHREAD_COUNT = 4\n\nspawns = []\n\nq = Queue.new \n\nvideos.each {|i| q.push(i) }\n\nTHREAD_COUNT.times do\n  spawns &lt;&lt; Spawnling.new do\n    until q.empty? do\n      v = q.pop\n\n      # simulate processing\n      puts \"Processing video #{v}\"\n\n      # simulate processing time\n      sleep(rand(10))\n    end\n  end\nend\n\nSpawnling.wait(spawns)\n</code></pre>\n\n<p>This answer is inspired from <a href=\"https://stackoverflow.com/a/32516381/794242\">this answer</a></p>\n\n<p><strong><sub>PS: I have added few requires and defined <code>videos</code> array to make above code self-contained running example.</sub></strong></p>\n"}], "owner": {"reputation": 199, "user_id": 4523131, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/86cf048bc70e51aaf75da31c5f43ea36?s=128&d=identicon&r=PG&f=1", "display_name": "rs41", "link": "https://stackoverflow.com/users/4523131/rs41"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 514, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1450290037, "creation_date": 1450272388, "last_edit_date": 1450286228, "question_id": 34313295, "link": "https://stackoverflow.com/questions/34313295/run-scripts-in-parallel-in-ruby", "title": "Run scripts in parallel in ruby", "body": "<p>I need to convert videos in 4 threads</p>\n\n<p>For example I have Active Record models Video with titles: Video1, Video2, Video3, Video4, Video5</p>\n\n<p>So, I need to execute something like this</p>\n\n<pre><code>bundle exec script/video_converter start\n</code></pre>\n\n<p>Where script will process unconverted videos for 4 threads, for example </p>\n\n<pre><code>Video.where(state: 'unconverted').first.process\n</code></pre>\n\n<p>But if one of 4 videos are converted, next video must be automatically added to thread</p>\n\n<p>What is the best solution for this ? Sidekiq gem? Daemons gem + Ruby Threads manually?</p>\n\n<p>For now I am using this script:</p>\n\n<pre><code>THREAD_COUNT = 4\nSLEEP_TIME = 5\nlogger = CONVERTATION_LOG\nspawns = []\nloop do\n  videos = Video.where(state:'unconverted').limit(THREAD_COUNT).reorder(\"ID DESC\")\n  videos.each do |video|\n    spawns &lt;&lt; Spawnling.new do\n      result = video.process\n      if result.nil?\n        video.create_thumbnail!\n      else\n        video.failured!\n      end\n    end\n  end\n  Spawnling.wait(spawns)\n  sleep(SLEEP_TIME)\nend\n</code></pre>\n\n<p>But this script waits 4 videos, and after it takes another 4 videos. I want, that after one of 4-th video converted, it will be automatically added to new thread, which is empty.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "associations", "rails-activerecord"], "comments": [{"owner": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "edited": false, "score": 1, "creation_date": 1450270928, "post_id": 34312629, "comment_id": 56367050, "body": "Could you post the full error message?"}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 3, "creation_date": 1450271583, "post_id": 34312629, "comment_id": 56367531, "body": "<code>but it throws error</code> - when you get an error in the app and you are asking SO question, you should always include the full error message together with a stacktrace. From what you posted it seems that you missed <code>new</code> somewhere and you are calling <code>Calendar(params)</code>. To tell where exactly you need to check the very first line of the stacktrace. That is assuming your error is really saying <code>Calendar</code>, not <code>calendar</code>. I have a feeling it is <code>calendar</code> though, and the full message will be <code>undefined method calendar for NilClass</code>, is it right?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1450271694, "post_id": 34312629, "comment_id": 56367612, "body": "Please include your models in the post as well, it\u2019s clear the error came from models."}, {"owner": {"reputation": 172, "user_id": 5599690, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b3813c9d9b90f260d11d99d9b606dad9?s=128&d=identicon&r=PG&f=1", "display_name": "Sarahshuffle", "link": "https://stackoverflow.com/users/5599690/sarahshuffle"}, "edited": false, "score": 0, "creation_date": 1450276612, "post_id": 34312629, "comment_id": 56371154, "body": "I have edited my post now to include the models. the full error message is:  NoMethodError in EventsController#new    undefined method `Calendar&#39; for #&lt;Customer:0x63df0b0&gt;"}, {"owner": {"reputation": 172, "user_id": 5599690, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b3813c9d9b90f260d11d99d9b606dad9?s=128&d=identicon&r=PG&f=1", "display_name": "Sarahshuffle", "link": "https://stackoverflow.com/users/5599690/sarahshuffle"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1450277092, "post_id": 34312629, "comment_id": 56371548, "body": "@mudasobwa ok, for some reason it is no longer throwing this error, however it is still not working I think, because when i highlight &#39;calendar&#39; in current_customer.calendar  it just refers to &amp;calendar on the same line. Am I getting the wrong end of the stick here? would this really be all the code I need to retrieve a specific customer&#39;s calendar?"}, {"owner": {"reputation": 172, "user_id": 5599690, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b3813c9d9b90f260d11d99d9b606dad9?s=128&d=identicon&r=PG&f=1", "display_name": "Sarahshuffle", "link": "https://stackoverflow.com/users/5599690/sarahshuffle"}, "reply_to_user": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1450277242, "post_id": 34312629, "comment_id": 56371639, "body": "@BroiSatse - if I change my code to &#39;at&#39;calendar = &#39;at&#39;customer.calendar this error occurs. Am I supposed to be using &#39;at&#39;customer or current_customer?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1450277909, "post_id": 34312629, "comment_id": 56372121, "body": "Your <code>current_customer</code> returns <code>nil</code> if there is no logged in user found. Calling <code>calendar</code> on <code>nil</code> produces the error you see. Make sure you call this method if and only the <code>current_customer</code> returns not nil value."}, {"owner": {"reputation": 172, "user_id": 5599690, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b3813c9d9b90f260d11d99d9b606dad9?s=128&d=identicon&r=PG&f=1", "display_name": "Sarahshuffle", "link": "https://stackoverflow.com/users/5599690/sarahshuffle"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1450278997, "post_id": 34312629, "comment_id": 56372930, "body": "@mudasobwa ok that makes sense. Now when I activate the create method for events, it throws the error:  NoMethodError in EventsController#create    undefined method `build&#39; for nil:NilClass. This happens on the line @event = @calendar.build.event(event_params)"}], "answers": [{"tags": [], "owner": {"reputation": 4054, "user_id": 3626701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/401db4625e42a7797db528d1f7ddcb00?s=128&d=identicon&r=PG", "display_name": "Oss", "link": "https://stackoverflow.com/users/3626701/oss"}, "is_accepted": false, "score": 0, "last_activity_date": 1450296436, "creation_date": 1450296436, "answer_id": 34321120, "question_id": 34312629, "link": "https://stackoverflow.com/questions/34312629/how-to-retrieve-nested-model-data-from-another-model-undefined-method-error/34321120#34321120", "title": "How to retrieve nested model data from another model? : undefined method error", "body": "<p>Your <code>current_customer</code> can be <code>nil</code> at times. To avoid this you can add a <code>before_filter</code> callback that checks if there is a customer that is logged in or not.</p>\n\n<p>In your <code>application_controller</code> create a method called <code>customer_found?</code></p>\n\n<pre><code>def customer_found?\n  current_customer.present?\nend\n</code></pre>\n\n<p>Change your events controller to</p>\n\n<pre><code>class EventsController &lt; ApplicationController\n  before_filter :customer_found?\n  before_filter :prepare_calendar, only: [:new, :create]\n\n  def new\n    @event = Event.new    \n  end\n\n  def create\n    if @event = @current_calendar.build.event(event_params)\n      redirect_to '/main'\n    else\n      redirect_to '/compose'\n    end\n  end\n\n  private\n\n  def prepare_calendar\n    @current_calendar = current_customer.calendar\n  end\n\n  def event_params\n    params.require(:event).permit(:calendar_id, :name, :starts_at, :ends_at) \n  end\nend\n</code></pre>\n\n<p>Since you did not assign your <code>@current_calendar</code> in your create method then you are gonna get <code>undefined method build for nil class</code>. You need to initialize the variable since it can not get it from the <code>new</code> method. Each action has its own independent variables so make sure to prepare all necessary variables before using them. </p>\n"}], "owner": {"reputation": 172, "user_id": 5599690, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b3813c9d9b90f260d11d99d9b606dad9?s=128&d=identicon&r=PG&f=1", "display_name": "Sarahshuffle", "link": "https://stackoverflow.com/users/5599690/sarahshuffle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1450296436, "creation_date": 1450270399, "last_edit_date": 1450276765, "question_id": 34312629, "link": "https://stackoverflow.com/questions/34312629/how-to-retrieve-nested-model-data-from-another-model-undefined-method-error", "title": "How to retrieve nested model data from another model? : undefined method error", "body": "<p>So the basis of my code so far is:</p>\n\n<p>a customer <code>has_one</code> calendar</p>\n\n<p>a calendar <code>belongs_to</code> a customer</p>\n\n<p>a calendar <code>has_many</code> events</p>\n\n<p>an event <code>belongs_to</code> a calendar</p>\n\n<p>I am trying to, when creating a new event, specify the customer and calendar it belongs to but it throws error \"undefined method `Calendar'\": </p>\n\n<pre><code>class EventsController &lt; ApplicationController\n\n  def new\n    @event = Event.new\n    @currentcalendar = current_customer.calendar # this is where it is failing\n\n  end\n\n  def create\n    if @event = @currentcalendar.build.event(event_params)\n      redirect_to '/main'\n    else\n      redirect_to '/compose'\n    end\n  end\n\n  private\n\n  def event_params\n    params.require(:event).permit(:calendar_id, :name, :starts_at, :ends_at) \n  end\nend\n</code></pre>\n\n<p>this is my current_customer method within application_controller:</p>\n\n<pre><code>def current_customer\n    if (customer_id = session[:customer_id])\n      @current_customer ||= Customer.find_by(id: customer_id)\n    elsif (customer_id = cookies.signed[:customer_id])\n      customer = Customer.find_by(id: customer_id)\n      if customer &amp;&amp; customer.authenticated?(cookies[:remember_token])\n        session[:customer_id] = customer.id #log in\n        @current_customer = customer\n\n      end\n    end\n  end\n</code></pre>\n\n<p>Here are the related controller files. Customer:</p>\n\n<pre><code>class CustomersController &lt; ApplicationController\n\n  def new\n\n    @customer = Customer.new\n    @businesses = Business.all\n    @calendar = Calendar.new\n\n  end\n\n  def create\n\n    @customer = Customer.create(customer_params)\n\n    @calendar = @customer.build_calendar\n    @customer.save!\n    session[:customer_id] = @customer.id\n\n    redirect_to '/'\n  rescue ActiveRecord::RecordInvalid =&gt; ex\n    render action: 'new', alert: ex.message\n  end\n\n  private\n  def customer_params\n    params.require(:customer).permit(:first_name, :last_name, :business_no, :email, :password, :business_id)\n  end\n</code></pre>\n\n<p>Calendar:</p>\n\n<pre><code>class CalendarsController &lt; ApplicationController\n\n  def new\n    @calendar = Calendar.new(calendar_params)\n\n  end\n\n  def create\n    @calendar = Calendar.new(calendar_params)\n  end\n\nprivate\n  def calendar_params\n    params.require(:customer_id)\n  end\n\nend\n</code></pre>\n\n<p>I'm very new to Ruby/ Rails and so can't figure this out by myself. Is this problem occurring because I have wrongly created my calendar? I wanted it to be created when its user is created, which works, but I just don't know how to get to the calendar and user within the events controller.</p>\n\n<p>Thanks for your help! </p>\n\n<p>EDIT: these are the model classes.</p>\n\n<p>customer:</p>\n\n<pre><code>class Customer &lt; ActiveRecord::Base\n  belongs_to :business\n  has_one :calendar\n\n  has_secure_password\n\n  attr_accessor :remember_token\n\n  #remembers a user in the database for  use in persistent sessions\n  def remember\n    self.remember_token = Customer.new_token\n    update_attribute(:remember_digest, Customer.digest(remember_token))\n  end\n\n  def Customer.digest(string)\n    cost = ActiveModel::SecurePassword.min_cost ? BCrypt::Engine::MIN_COST :\n        BCrypt::Engine.cost\n    BCrypt::Password.create(string, cost: cost)\n  end\n\n  def forget\n    update_attribute(:remember_digest, nil)\n  end\n\n  def Customer.new_token\n    SecureRandom.urlsafe_base64\n  end\n\n  #returns true if the given token matches the digest\n  def authenticated?(remember_token)\n    BCrypt::Password.new(remember_digest).is_password?(remember_token)\n  end\n\n\nend\n</code></pre>\n\n<p>calendar:</p>\n\n<pre><code>class Calendar &lt; ActiveRecord::Base\n  belongs_to :customer\n  has_many :events\n\n\nend\n</code></pre>\n\n<p>event:</p>\n\n<pre><code>class Event &lt; ActiveRecord::Base\n  belongs_to :calendar\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "imagemagick"], "comments": [{"owner": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "edited": false, "score": 0, "creation_date": 1450271593, "post_id": 34312347, "comment_id": 56367540, "body": "Please check the terminal where you are executing <code>rails s</code> and look for an error message when you load the page."}, {"owner": {"reputation": 1, "user_id": 5685760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b98de6dd7a14acddd2e3ed6b3bd0328c?s=128&d=identicon&r=PG&f=1", "display_name": "novacevski", "link": "https://stackoverflow.com/users/5685760/novacevski"}, "reply_to_user": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "edited": false, "score": 0, "creation_date": 1450272125, "post_id": 34312347, "comment_id": 56367917, "body": "The server log doesn&#39;t show any errors, just this  Processing by  **HomeController#index as HTML   Rendered text template (0.0ms) Sent data gift_front.jpg (2.3ms)   Rendered home/index.html.erb within layouts/application (610.1ms) Completed 200 OK in 747ms (Views: 719.6ms | ActiveRecord: 0.0ms)"}], "owner": {"reputation": 1, "user_id": 5685760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b98de6dd7a14acddd2e3ed6b3bd0328c?s=128&d=identicon&r=PG&f=1", "display_name": "novacevski", "link": "https://stackoverflow.com/users/5685760/novacevski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1450273425, "creation_date": 1450269619, "last_edit_date": 1450273425, "question_id": 34312347, "link": "https://stackoverflow.com/questions/34312347/rails-4-throws-image-has-errors-when-i-use-send-data-with-image-magick-image", "title": "Rails 4 throws image has errors when i use send_data with image magick image", "body": "<p>I have an issue when I send an image with <code>send_data</code> method in Rails.\nI have a controller with a helper method that sends the image data to an image tag</p>\n\n<pre><code>class HomeController &lt; ApplicationController\n\n helper_method :img\n\n\n def index\n\n end\n\n def img\n   image.resize '1600x900'\n   image.rotate '180'\n\n   File.open(image.path, 'r') do |f|\n     send_data f, filename: 'gift_front.jpg', :type =&gt; 'image/jpeg', :disposition =&gt; 'inline'\n   end\n\n end\nend\n</code></pre>\n\n<p>And the view is just this line:</p>\n\n<pre><code>&lt;%= image_tag img, alt: 'Loading Image...', title: 'image' %&gt;\n</code></pre>\n\n<p>But when the page is loaded in the browser I get this error:</p>\n\n<blockquote>\n  <p>The image \u201c<a href=\"http://localhost:3000/\" rel=\"nofollow\">http://localhost:3000/</a>\u201d cannot be displayed because it contains errors.</p>\n</blockquote>\n\n<p>I use rails 4.1.2 and ruby 2.2.2. The rails log doesn\u2019t show any errors. I need to get a functionality where image data is sent to the browser, from an image out of the project, and this looks like the only solution, but I can't find a solution to this error.</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "class"], "answers": [{"tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": false, "score": 5, "last_activity_date": 1450269690, "creation_date": 1450269690, "answer_id": 34312371, "question_id": 34312344, "link": "https://stackoverflow.com/questions/34312344/getting-error-when-trying-to-give-a-submit-button-a-class-in-rails/34312371#34312371", "title": "Getting error when trying to give a submit button a class in Rails", "body": "<p>You shouldn't add comma before the parameters passed to the method. It should be:</p>\n\n<pre><code>&lt;%= f.submit :class =&gt; 'blog-submit' %&gt;\n</code></pre>\n\n<p>or: </p>\n\n<pre><code>&lt;%= f.submit class: 'blog-submit' %&gt;\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 4453306, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/0779232b9a018bcdf5434e44e58c769e?s=128&d=identicon&r=PG&f=1", "display_name": "user242491", "link": "https://stackoverflow.com/users/4453306/user242491"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "closed_date": 1450515572, "answer_count": 1, "score": -2, "last_activity_date": 1450271363, "creation_date": 1450269616, "question_id": 34312344, "link": "https://stackoverflow.com/questions/34312344/getting-error-when-trying-to-give-a-submit-button-a-class-in-rails", "closed_reason": "Not suitable for this site", "title": "Getting error when trying to give a submit button a class in Rails", "body": "<p>So basicly this is my code for a class that works:</p>\n\n<pre><code>    &lt;p&gt;\n        &lt;%= f.label :text %&gt;\n        &lt;%= f.text_area :text, :class =&gt;\"create-text\" %&gt;\n    &lt;/p&gt;\n</code></pre>\n\n<p>however I can't get this to work:</p>\n\n<pre><code>    &lt;p&gt;\n        &lt;%= f.submit, :class =&gt; \"blog-submit\" %&gt;\n    &lt;/p&gt;\n</code></pre>\n\n<p>This is what the error message shows me on the local Webserver</p>\n\n<pre><code>app/views/articles/_form.html.erb:25: syntax error, unexpected =&gt;, expecting :: or '[' or '.' ...er.append=( f.submit, :class =&gt;\"blog-submit\" );@output_buffe... ... ^\n</code></pre>\n\n<p>Just to be clear, line 25 in the error message points to this:</p>\n\n<pre><code>        &lt;%= f.submit, :class =&gt; \"blog-submit\" %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "bundler"], "answers": [{"tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": true, "score": 2, "last_activity_date": 1450269043, "creation_date": 1450269043, "answer_id": 34312129, "question_id": 34312015, "link": "https://stackoverflow.com/questions/34312015/issue-with-bundle-install/34312129#34312129", "title": "Issue with bundle install", "body": "<p>If you carefully read the explanation, it's quite clear where the problem is.</p>\n\n<pre><code>paperclip was resolved to 4.3.1, which depends on\n  activesupport (&gt;= 3.2.0)\n</code></pre>\n\n<p>This specific gem requires an <code>activesupport</code> version which is at least 3.2, but your project has Rails (and consequently <code>activesupport</code>) freezed at 3.0.20.</p>\n\n<p>You need to use a <code>paperclip</code> version which is compatible with older versions of Rails. Edit your <code>Gemfile</code> and specify an older <code>paperclip</code> version.</p>\n\n<p>You can check the <a href=\"https://rubygems.org/gems/paperclip\" rel=\"nofollow\">paperclip dependencies on RubyGems</a> and select the proper version.</p>\n"}, {"tags": [], "owner": {"reputation": 3401, "user_id": 589620, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/bd618bcfa88646d7fea535ad2073ffec?s=128&d=identicon&r=PG", "display_name": "Alexander Shlenchack", "link": "https://stackoverflow.com/users/589620/alexander-shlenchack"}, "is_accepted": false, "score": 0, "last_activity_date": 1450269057, "creation_date": 1450269057, "answer_id": 34312138, "question_id": 34312015, "link": "https://stackoverflow.com/questions/34312015/issue-with-bundle-install/34312138#34312138", "title": "Issue with bundle install", "body": "<p>You should decrease your <code>paperclip</code> gem version.</p>\n"}], "owner": {"reputation": 73, "user_id": 5639840, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/901aa5889c731865bce18c06fe7ec1ff?s=128&d=identicon&r=PG&f=1", "display_name": "D.Kamenov", "link": "https://stackoverflow.com/users/5639840/d-kamenov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 34312129, "answer_count": 2, "score": 0, "last_activity_date": 1450270754, "creation_date": 1450268719, "last_edit_date": 1450270754, "question_id": 34312015, "link": "https://stackoverflow.com/questions/34312015/issue-with-bundle-install", "title": "Issue with bundle install", "body": "<p>I'm trying to run an old project but I have problem. I'm using:</p>\n\n<ul>\n<li>Ruby - 1.9.3 </li>\n<li>Rails - 3.0.20</li>\n</ul>\n\n<p>I'm getting the following error while installing the gems. How do I install these gems? </p>\n\n<pre><code>Resolving dependencies...................................................................................................................\nBundler could not find compatible versions for gem \"activesupport\":\n  In Gemfile:\n    active_form was resolved to 1.0.4, which depends on\n      activesupport (&gt;= 3.0.0)\n\n    active_form was resolved to 1.0.4, which depends on\n      activesupport (&gt;= 3.0.0)\n\n    paper_trail (~&gt; 3.0.1) was resolved to 3.0.9, which depends on\n      activesupport (&lt; 5.0, &gt;= 3.0)\n\n    paperclip was resolved to 4.3.1, which depends on\n      activesupport (&gt;= 3.2.0)\n\n    rails (= 3.0.20) was resolved to 3.0.20, which depends on\n      activesupport (= 3.0.20)\n\n    rails (= 3.0.20) was resolved to 3.0.20, which depends on\n      activesupport (= 3.0.20)\n\n    rails (= 3.0.20) was resolved to 3.0.20, which depends on\n      activesupport (= 3.0.20)\n\n    rails (= 3.0.20) was resolved to 3.0.20, which depends on\n      activesupport (= 3.0.20)\n\n    rails (= 3.0.20) was resolved to 3.0.20, which depends on\n      activesupport (= 3.0.20)\n\n    rspec-rails (~&gt; 2.14.0) was resolved to 2.14.2, which depends on\n      activesupport (&gt;= 3.0)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "delayed-job", "bunny"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1450269138, "post_id": 34311973, "comment_id": 56365769, "body": "DelayedJob will get its own instance of this. Did you want to share the very same object across multiple processes?"}, {"owner": {"reputation": 63, "user_id": 1388744, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4c5cb08f5ac78cd2f4985727bbf7e531?s=128&d=identicon&r=PG", "display_name": "Manoj Venkat", "link": "https://stackoverflow.com/users/1388744/manoj-venkat"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1450270381, "post_id": 34311973, "comment_id": 56366657, "body": "I don&#39;t need share the same object across multiple processes. But, it&#39;ll be great as it will help me avoid duplicate code. So, is there a way to share the very same object like you mentioned? Thanks."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1450270531, "post_id": 34311973, "comment_id": 56366762, "body": "No, there&#39;s no way. :) Also I don&#39;t see how it would save you from duplicate code. You don&#39;t need to duplicate any code here. Just make sure that <code>Setting.RABBITMQ_ENABLED[Rails.env]</code> is truthy in DJ environment."}, {"owner": {"reputation": 63, "user_id": 1388744, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4c5cb08f5ac78cd2f4985727bbf7e531?s=128&d=identicon&r=PG", "display_name": "Manoj Venkat", "link": "https://stackoverflow.com/users/1388744/manoj-venkat"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1450270768, "post_id": 34311973, "comment_id": 56366930, "body": "So, if I declare all the variables in the bunny.rb in delayed_job.rb as well, right?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1450270879, "post_id": 34311973, "comment_id": 56367021, "body": "No, bunny.rb initializer will run in DJ too."}, {"owner": {"reputation": 4054, "user_id": 3626701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/401db4625e42a7797db528d1f7ddcb00?s=128&d=identicon&r=PG", "display_name": "Oss", "link": "https://stackoverflow.com/users/3626701/oss"}, "edited": false, "score": 0, "creation_date": 1450271032, "post_id": 34311973, "comment_id": 56367123, "body": "Can you attach the lines in your worker in which you call this global variable?"}, {"owner": {"reputation": 63, "user_id": 1388744, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4c5cb08f5ac78cd2f4985727bbf7e531?s=128&d=identicon&r=PG", "display_name": "Manoj Venkat", "link": "https://stackoverflow.com/users/1388744/manoj-venkat"}, "edited": false, "score": 0, "creation_date": 1450271525, "post_id": 34311973, "comment_id": 56367486, "body": "I attached my worker code as well."}, {"owner": {"reputation": 63, "user_id": 1388744, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4c5cb08f5ac78cd2f4985727bbf7e531?s=128&d=identicon&r=PG", "display_name": "Manoj Venkat", "link": "https://stackoverflow.com/users/1388744/manoj-venkat"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1450271776, "post_id": 34311973, "comment_id": 56367670, "body": "@SergioTulentsev If I am using rake jobs:work it&#39;s in the foreground, it&#39;s recognizing the SmsHandle global variable but if run in the background using &quot;bin/delayed_job start&quot;, then it&#39;s unable to recognize this variable."}], "owner": {"reputation": 63, "user_id": 1388744, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4c5cb08f5ac78cd2f4985727bbf7e531?s=128&d=identicon&r=PG", "display_name": "Manoj Venkat", "link": "https://stackoverflow.com/users/1388744/manoj-venkat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 592, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1450271457, "creation_date": 1450268624, "last_edit_date": 1450271457, "question_id": 34311973, "link": "https://stackoverflow.com/questions/34311973/how-to-define-a-global-variable-that-can-be-accessed-in-delayed-job-in-rails", "title": "How to define a global variable that can be accessed in Delayed Job in rails?", "body": "<p>This is my config/initializers/bunny.rb file: </p>\n\n<pre><code>  if Setting.RABBITMQ_ENABLED[Rails.env]\n     conn = Bunny.new Setting.MERCURY_URL[Rails.env]\n     conn.start\n\n     bunny_settings = Setting.BUNNY_SETTINGS\n\n     ## Channel &amp;&amp; Topic for sending SMS-es.\n     sms_ch = conn.create_channel\n     ::SmsHandle = sms_ch.topic(bunny_settings[\"sms_topic_name\"], :durable =&gt; true, :auto_delete =&gt; true)\n\n     ## Channel &amp;&amp; Topic for sending seller requests\n     seller_ch = conn.create_channel\n     exchange = seller_ch.topic(bunny_settings[\"seller_topic_name\"], :durable =&gt; true, :auto_delete =&gt; true)\n\n     seller_ch.queue(bunny_settings[\"seller_queue_name\"], :durable =&gt; true, :auto_delete =&gt; true, :arguments =&gt; {}, :exclusive =&gt; false).bind(exchange, :routing_key =&gt; bunny_settings[\"seller_routing_key\"]).subscribe do |delivery_info, properties, payload|\n     payload_json = JSON.parse payload\n     BunnyConsumer.consume_seller_request(delivery_info, properties, payload_json)\n   end\n end\n</code></pre>\n\n<p>As you can see, I declared SmsHandle as a global variable to use it anywhere.</p>\n\n<p>Worker code: </p>\n\n<pre><code>  def send_sms(message_handle, caller_params)\n    if Setting.RABBITMQ_ENABLED[Rails.env]\n      pay_load = {:usertype =&gt; \"custom\", :triggers =&gt; [message_handle], :type =&gt; \"notification\", :caller_params =&gt; caller_params}.to_json\n      SmsHandle.publish(pay_load, :routing_key =&gt; \"route_key\" + rand(0..9).to_s, :content_type =&gt; \"application/json\", :type =&gt; \"transport\")\n      self.notification_events.create!(handle_name: message_handle, notification_type: SellerLead::NotificationType::SMS, payload: caller_params.to_json)\n    end\n  end\n</code></pre>\n\n<p>But, the problem for me here is that I unable to use it in any method that'll be called in a delayed_job. </p>\n\n<p>So, how can I enable the delayed_job to use this particular variable. </p>\n\n<p>Should I declare variable like this in the config/initializer/delayed_job.rb? Even this doesn't seem to working. Can someone point to the right way of doing this?</p>\n"}, {"tags": ["ruby", "loops", "rescue"], "answers": [{"tags": [], "owner": {"reputation": 3401, "user_id": 589620, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/bd618bcfa88646d7fea535ad2073ffec?s=128&d=identicon&r=PG", "display_name": "Alexander Shlenchack", "link": "https://stackoverflow.com/users/589620/alexander-shlenchack"}, "is_accepted": true, "score": 5, "last_activity_date": 1450264975, "last_edit_date": 1450264975, "creation_date": 1450264810, "answer_id": 34310681, "question_id": 34310579, "link": "https://stackoverflow.com/questions/34310579/ruby-do-loop-and-rescue/34310681#34310681", "title": "Ruby - &quot;Do&quot; loop and &quot;rescue&quot;", "body": "<p>You <code>map</code> block should have <code>end</code> </p>\n\n<pre><code>begin\n  values = json_data['faces'].map do |result|\n    # ...\n  end\nrescue\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3401, "user_id": 589620, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/bd618bcfa88646d7fea535ad2073ffec?s=128&d=identicon&r=PG", "display_name": "Alexander Shlenchack", "link": "https://stackoverflow.com/users/589620/alexander-shlenchack"}, "edited": false, "score": 0, "creation_date": 1450265763, "post_id": 34310957, "comment_id": 56363381, "body": "Your code will raise an error when json_data is present and it&#39;s not an hash"}, {"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "reply_to_user": {"reputation": 3401, "user_id": 589620, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/bd618bcfa88646d7fea535ad2073ffec?s=128&d=identicon&r=PG", "display_name": "Alexander Shlenchack", "link": "https://stackoverflow.com/users/589620/alexander-shlenchack"}, "edited": false, "score": 0, "creation_date": 1450287250, "post_id": 34310957, "comment_id": 56378619, "body": "@AlexanderShlenchack that&#39;s true - but emphasises my point. You should build your code to deal with the errors you know about, and let other errors bubble up through the system. The only error mentioned that needs handling programmatically is <code>json_data == nil</code>. If json can be something other than hash or nil then that will need to be handled too, but there is nothing in the question that states that to be the case."}, {"owner": {"reputation": 3401, "user_id": 589620, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/bd618bcfa88646d7fea535ad2073ffec?s=128&d=identicon&r=PG", "display_name": "Alexander Shlenchack", "link": "https://stackoverflow.com/users/589620/alexander-shlenchack"}, "edited": false, "score": 1, "creation_date": 1450297081, "post_id": 34310957, "comment_id": 56384245, "body": "I completely agree with you. It was my little remark, nothing more."}], "tags": [], "owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "is_accepted": false, "score": 2, "last_activity_date": 1450265602, "creation_date": 1450265602, "answer_id": 34310957, "question_id": 34310579, "link": "https://stackoverflow.com/questions/34310579/ruby-do-loop-and-rescue/34310957#34310957", "title": "Ruby - &quot;Do&quot; loop and &quot;rescue&quot;", "body": "<p>As Alexander points out, the lack of an <code>end</code> to the <code>do</code> statement explains the unexpected keyword error.</p>\n\n<p>However, using rescue in this way is <a href=\"https://robots.thoughtbot.com/rescue-standarderror-not-exception\" rel=\"nofollow\">not good practice</a>. It will effectively mask any problems that occur in the future. You should always be specific in what you rescue. So this would be better:</p>\n\n<pre><code>begin\n  values = json_data['faces'].map do |result|\n    ...\n  end\nrescue NoMethodError\nend\n</code></pre>\n\n<p>However, the error is telling you that <code>json_data</code> is nil. So to handle this issue, a simpler solution is:</p>\n\n<pre><code>if json_data\n  values = json_data['faces'].map do |result|\n     ...\n  end\nelse\n  values = [] # or whatever you want values to be if there are none\nend\n</code></pre>\n"}], "owner": {"reputation": 936, "user_id": 5080273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b26b400d54f2a52add7900c381fb1778?s=128&d=identicon&r=PG&f=1", "display_name": "semiflex", "link": "https://stackoverflow.com/users/5080273/semiflex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 645, "favorite_count": 0, "accepted_answer_id": 34310681, "answer_count": 2, "score": -2, "last_activity_date": 1450265743, "creation_date": 1450264508, "last_edit_date": 1450264604, "question_id": 34310579, "link": "https://stackoverflow.com/questions/34310579/ruby-do-loop-and-rescue", "title": "Ruby - &quot;Do&quot; loop and &quot;rescue&quot;", "body": "<p>I'm using the Microsoft computer vision API. The API can recognise faces and gives data on how many people are in an image, what estimated age they are, and what estimated gender. However, I have a \"do\" loop which I can't \"rescue.\" Here's the code below: </p>\n\n<pre><code> values = json_data['faces'].map do |result| \n</code></pre>\n\n<p>Here's the error I receive:</p>\n\n<pre><code>C:/Users/KVadher/Desktop/micr1.rb:122:in `block in &lt;main&gt;': undefined method `[]' for nil:NilClass (NoMethodError)\n</code></pre>\n\n<p>I want my code to look something like this:</p>\n\n<pre><code> begin\n  values = json_data['faces'].map do |result| \n rescue\n end\n</code></pre>\n\n<p>However, when I do this, I get the following error:</p>\n\n<pre><code>C:/Users/USERNAME/Desktop/micr1.rb:123: syntax error, unexpected keyword_rescue\n</code></pre>\n\n<p>How do I pass my code if a request doesn't apply to it? </p>\n"}, {"tags": ["sql", "ruby", "ruby-on-rails-4", "join"], "comments": [{"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 0, "creation_date": 1450264003, "post_id": 34310317, "comment_id": 56362171, "body": "where are you using <code>map</code>? Please post exact error trace."}, {"owner": {"reputation": 45, "user_id": 4194893, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/148353803e1e8a205759260b32d5b449?s=128&d=identicon&r=PG&f=1", "display_name": "Fergus Morton", "link": "https://stackoverflow.com/users/4194893/fergus-morton"}, "reply_to_user": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 0, "creation_date": 1450264332, "post_id": 34310317, "comment_id": 56362417, "body": "Posted the full trace in OP"}, {"owner": {"reputation": 3692, "user_id": 2102591, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/18ebe6ebe65a7aff45e6d09e96af9701?s=128&d=identicon&r=PG", "display_name": "Andrew Schwartz", "link": "https://stackoverflow.com/users/2102591/andrew-schwartz"}, "edited": false, "score": 0, "creation_date": 1450265668, "post_id": 34310317, "comment_id": 56363319, "body": "I&#39;m assuming the 7th line in you code snippet is line 72, am I correct? Can you confirm in the console if User.find_by_sql(&quot;...&quot;).each{|user| user.id} gives the same error?"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1450265694, "post_id": 34310317, "comment_id": 56363339, "body": "That&#39;s not the full stack trace. It is missing at least the first line - the one with the exact error message and line number in which the error occurred."}, {"owner": {"reputation": 45, "user_id": 4194893, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/148353803e1e8a205759260b32d5b449?s=128&d=identicon&r=PG&f=1", "display_name": "Fergus Morton", "link": "https://stackoverflow.com/users/4194893/fergus-morton"}, "reply_to_user": {"reputation": 3692, "user_id": 2102591, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/18ebe6ebe65a7aff45e6d09e96af9701?s=128&d=identicon&r=PG", "display_name": "Andrew Schwartz", "link": "https://stackoverflow.com/users/2102591/andrew-schwartz"}, "edited": false, "score": 0, "creation_date": 1450266286, "post_id": 34310317, "comment_id": 56363781, "body": "@AndrewSchwartz Yes that is the correct line (72). I&#39;m not sure exactly how to run that command directly into the console?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1450266715, "post_id": 34310317, "comment_id": 56364067, "body": "What is your question?"}, {"owner": {"reputation": 45, "user_id": 4194893, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/148353803e1e8a205759260b32d5b449?s=128&d=identicon&r=PG&f=1", "display_name": "Fergus Morton", "link": "https://stackoverflow.com/users/4194893/fergus-morton"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1450266841, "post_id": 34310317, "comment_id": 56364154, "body": "@sawa how to resolve the error and have a working query that performs the task I outlined in the op"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 4194893, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/148353803e1e8a205759260b32d5b449?s=128&d=identicon&r=PG&f=1", "display_name": "Fergus Morton", "link": "https://stackoverflow.com/users/4194893/fergus-morton"}, "edited": false, "score": 0, "creation_date": 1450266780, "post_id": 34311227, "comment_id": 56364116, "body": "Thanks for the suggestion but that query gave me the error &#39;SQLite3::SQLException: no such column: clients.id: SELECT &quot;users&quot;.* FROM &quot;users&quot; INNER JOIN interests_users ON clients.id = interests_users.client_id WHERE (interests_users.interest_id = 1)&#39;"}, {"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "reply_to_user": {"reputation": 45, "user_id": 4194893, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/148353803e1e8a205759260b32d5b449?s=128&d=identicon&r=PG&f=1", "display_name": "Fergus Morton", "link": "https://stackoverflow.com/users/4194893/fergus-morton"}, "edited": false, "score": 0, "creation_date": 1450266980, "post_id": 34311227, "comment_id": 56364266, "body": "I just copied your Inner Join query. You may need to fix that yourself as I dont know your table structures."}, {"owner": {"reputation": 45, "user_id": 4194893, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/148353803e1e8a205759260b32d5b449?s=128&d=identicon&r=PG&f=1", "display_name": "Fergus Morton", "link": "https://stackoverflow.com/users/4194893/fergus-morton"}, "edited": false, "score": 0, "creation_date": 1450267119, "post_id": 34311227, "comment_id": 56364347, "body": "Ok thank you. Can you explain to me what rails is referring to when it gives a &#39;map&#39; error?"}, {"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "reply_to_user": {"reputation": 45, "user_id": 4194893, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/148353803e1e8a205759260b32d5b449?s=128&d=identicon&r=PG&f=1", "display_name": "Fergus Morton", "link": "https://stackoverflow.com/users/4194893/fergus-morton"}, "edited": false, "score": 0, "creation_date": 1450267306, "post_id": 34311227, "comment_id": 56364472, "body": "as per my understanding <code>find_by_sql</code> method is internally mapping results. Since we just discovered the join query is incorrect, (most probably) therefore <code>map</code> is encountering <code>nil</code> instead of an Array object. Hence the error. Fixing join statement, may itself solve your issue."}], "tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 1, "last_activity_date": 1450266434, "last_edit_date": 1495541245, "creation_date": 1450266434, "answer_id": 34311227, "question_id": 34310317, "link": "https://stackoverflow.com/questions/34310317/undefined-method-map-for-1fixnum/34311227#34311227", "title": "Undefined method `map&#39; for 1:Fixnum", "body": "<p>Try re-framing your query. Here:</p>\n\n<pre><code>User.joins('INNER JOIN interests_users ON clients.id = interests_users.client_id').where(\"interests_users.interest_id = ?\", interest.id)\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/a/22153180/3035830\">As per a similar SO</a>:</p>\n\n<blockquote>\n  <p><code>find_by_sql</code> doesn't work well with query placeholders</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 4194893, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/148353803e1e8a205759260b32d5b449?s=128&d=identicon&r=PG&f=1", "display_name": "Fergus Morton", "link": "https://stackoverflow.com/users/4194893/fergus-morton"}, "edited": false, "score": 0, "creation_date": 1450271724, "post_id": 34312924, "comment_id": 56367633, "body": "Thanks for the suggestion. I am getting an error relating to the query and its tables because I have gotten the query logic wrong. Ugh I hate querys..."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1450271265, "creation_date": 1450271265, "answer_id": 34312924, "question_id": 34310317, "link": "https://stackoverflow.com/questions/34310317/undefined-method-map-for-1fixnum/34312924#34312924", "title": "Undefined method `map&#39; for 1:Fixnum", "body": "<p><a href=\"http://apidock.com/rails/ActiveRecord/Querying/find_by_sql\" rel=\"nofollow\"><code>find_by_sql</code> expects</a> an array as a parameter:</p>\n\n<pre><code>User.find_by_sql([\n    \"SELECT * FROM users\n       INNER JOIN interests_users \n       ON clients.id = interests_users.client_id\n       WHERE interests_users.interest_id = ?\",\n     interest.id]).each do |user|\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 4194893, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/148353803e1e8a205759260b32d5b449?s=128&d=identicon&r=PG&f=1", "display_name": "Fergus Morton", "link": "https://stackoverflow.com/users/4194893/fergus-morton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 610, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1450271265, "creation_date": 1450263806, "last_edit_date": 1450266338, "question_id": 34310317, "link": "https://stackoverflow.com/questions/34310317/undefined-method-map-for-1fixnum", "title": "Undefined method `map&#39; for 1:Fixnum", "body": "<p>I want to email users every time a new treatment that is under the category they are interested in is added.</p>\n\n<p>I have a join table <code>interests_users</code> which is holds a <code>user_id</code> and a <code>interest_id</code>. Treatments has a variable called <code>category</code> which is used to compare against interests.</p>\n\n<p>This is what the create block in my treatments controller looks like.</p>\n\n<pre><code>def create\n  @treatment = Treatment.new(treatment_params)\n  respond_to do |format|\n    if @treatment.save\n      interest = Interest.find_by(name: @treatment.category)\n      if interest\n        User.find_by_sql(\"SELECT * FROM users\n                    INNER JOIN interests_users ON clients.id =    interests_users.client_id\n                    WHERE interests_users.interest_id = ?\", interest.id).each do |user|\n          Bestevermailer.treatmentNotification(user, @treatment).deliver\n        end\n      end\n\n      format.html { redirect_to @treatment, notice: 'Treatment was successfully created.' }\n      format.json { render :show, status: :created, location: @treatment }\n    else\n      format.html { render :new }\n      format.json { render json: @treatment.errors, status: :unprocessable_entity }\n    end\n  end\nend\n</code></pre>\n\n<p>Full Trace </p>\n\n<pre><code>activerecord (4.2.5) lib/active_record/connection_adapters/sqlite3_adapter.rb:289:in `exec_query'\nactiverecord (4.2.5) lib/active_record/connection_adapters/abstract/database_statements.rb:355:in `select'\nactiverecord (4.2.5) lib/active_record/connection_adapters/abstract/database_statements.rb:32:in `select_all'\nactiverecord (4.2.5) lib/active_record/connection_adapters/abstract/query_cache.rb:68:in `block in select_all'\nactiverecord (4.2.5) lib/active_record/connection_adapters/abstract/query_cache.rb:83:in `cache_sql'\nactiverecord (4.2.5) lib/active_record/connection_adapters/abstract/query_cache.rb:68:in `select_all'\nactiverecord (4.2.5) lib/active_record/querying.rb:39:in `find_by_sql'\napp/controllers/treatments_controller.rb:72:in `block in create'\nactionpack (4.2.5) lib/action_controller/metal/mime_responds.rb:212:in `respond_to'\napp/controllers/treatments_controller.rb:68:in `create'\nactionpack (4.2.5) lib/action_controller/metal/implicit_render.rb:4:in `send_action'\nactionpack (4.2.5) lib/abstract_controller/base.rb:198:in `process_action'\nactionpack (4.2.5) lib/action_controller/metal/rendering.rb:10:in `process_action'\nactionpack (4.2.5) lib/abstract_controller/callbacks.rb:20:in `block in process_action'\nactivesupport (4.2.5) lib/active_support/callbacks.rb:117:in `call'\nactivesupport (4.2.5) lib/active_support/callbacks.rb:117:in `call'\nactivesupport (4.2.5) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'\nactivesupport (4.2.5) lib/active_support/callbacks.rb:505:in `call'\nactivesupport (4.2.5) lib/active_support/callbacks.rb:505:in `call'\nactivesupport (4.2.5) lib/active_support/callbacks.rb:92:in `__run_callbacks__'\nactivesupport (4.2.5) lib/active_support/callbacks.rb:778:in `_run_process_action_callbacks'\nactivesupport (4.2.5) lib/active_support/callbacks.rb:81:in `run_callbacks'\nactionpack (4.2.5) lib/abstract_controller/callbacks.rb:19:in `process_action'\nactionpack (4.2.5) lib/action_controller/metal/rescue.rb:29:in `process_action'\nactionpack (4.2.5) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'\nactivesupport (4.2.5) lib/active_support/notifications.rb:164:in `block in instrument'\nactivesupport (4.2.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'\nactivesupport (4.2.5) lib/active_support/notifications.rb:164:in `instrument'\nactionpack (4.2.5) lib/action_controller/metal/instrumentation.rb:30:in `process_action'\nactionpack (4.2.5) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'\nactiverecord (4.2.5) lib/active_record/railties/controller_runtime.rb:18:in `process_action'\nactionpack (4.2.5) lib/abstract_controller/base.rb:137:in `process'\nactionview (4.2.5) lib/action_view/rendering.rb:30:in `process'\nactionpack (4.2.5) lib/action_controller/metal.rb:196:in `dispatch'\nactionpack (4.2.5) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'\nactionpack (4.2.5) lib/action_controller/metal.rb:237:in `block in action'\nactionpack (4.2.5) lib/action_dispatch/routing/route_set.rb:76:in `call'\nactionpack (4.2.5) lib/action_dispatch/routing/route_set.rb:76:in `dispatch'\nactionpack (4.2.5) lib/action_dispatch/routing/route_set.rb:45:in `serve'\nactionpack (4.2.5) lib/action_dispatch/journey/router.rb:43:in `block in serve'\nactionpack (4.2.5) lib/action_dispatch/journey/router.rb:30:in `each'\nactionpack (4.2.5) lib/action_dispatch/journey/router.rb:30:in `serve'\nactionpack (4.2.5) lib/action_dispatch/routing/route_set.rb:817:in `call'\nrack (1.6.4) lib/rack/etag.rb:24:in `call'\nrack (1.6.4) lib/rack/conditionalget.rb:38:in `call'\nrack (1.6.4) lib/rack/head.rb:13:in `call'\nactionpack (4.2.5) lib/action_dispatch/middleware/params_parser.rb:27:in `call'\nactionpack (4.2.5) lib/action_dispatch/middleware/flash.rb:260:in `call'\nrack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'\nrack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'\nactionpack (4.2.5) lib/action_dispatch/middleware/cookies.rb:560:in `call'\nactiverecord (4.2.5) lib/active_record/query_cache.rb:36:in `call'\nactiverecord (4.2.5) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'\nactiverecord (4.2.5) lib/active_record/migration.rb:377:in `call'\nactionpack (4.2.5) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'\nactivesupport (4.2.5) lib/active_support/callbacks.rb:88:in `__run_callbacks__'\nactivesupport (4.2.5) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'\nactivesupport (4.2.5) lib/active_support/callbacks.rb:81:in `run_callbacks'\nactionpack (4.2.5) lib/action_dispatch/middleware/callbacks.rb:27:in `call'\nactionpack (4.2.5) lib/action_dispatch/middleware/reloader.rb:73:in `call'\nactionpack (4.2.5) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'\nactionpack (4.2.5) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'\nweb-console (2.2.1) lib/web_console/middleware.rb:39:in `call'\nactionpack (4.2.5) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\nrailties (4.2.5) lib/rails/rack/logger.rb:38:in `call_app'\nrailties (4.2.5) lib/rails/rack/logger.rb:20:in `block in call'\nactivesupport (4.2.5) lib/active_support/tagged_logging.rb:68:in `block in tagged'\nactivesupport (4.2.5) lib/active_support/tagged_logging.rb:26:in `tagged'\nactivesupport (4.2.5) lib/active_support/tagged_logging.rb:68:in `tagged'\nrailties (4.2.5) lib/rails/rack/logger.rb:20:in `call'\nactionpack (4.2.5) lib/action_dispatch/middleware/request_id.rb:21:in `call'\nrack (1.6.4) lib/rack/methodoverride.rb:22:in `call'\nrack (1.6.4) lib/rack/runtime.rb:18:in `call'\nactivesupport (4.2.5) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'\nrack (1.6.4) lib/rack/lock.rb:17:in `call'\nactionpack (4.2.5) lib/action_dispatch/middleware/static.rb:116:in `call'\nrack (1.6.4) lib/rack/sendfile.rb:113:in `call'\nrailties (4.2.5) lib/rails/engine.rb:518:in `call'\nrailties (4.2.5) lib/rails/application.rb:165:in `call'\nrack (1.6.4) lib/rack/lock.rb:17:in `call'\nrack (1.6.4) lib/rack/content_length.rb:15:in `call'\nrack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'\nC:/RailsInstaller/Ruby2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'\nC:/RailsInstaller/Ruby2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'\nC:/RailsInstaller/Ruby2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ssl", "openssl", "rvm"], "answers": [{"comments": [{"owner": {"reputation": 2034, "user_id": 1980165, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0e1a38e5deca1c31b3bfa86d531864b2?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/1980165/steve"}, "edited": false, "score": 0, "creation_date": 1450262635, "post_id": 34309672, "comment_id": 56361221, "body": "That didn&#39;t work unfortunately. I think the problem is that installing 2.2.3 has minced my <code>cert.pem</code> file"}], "tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": false, "score": 0, "last_activity_date": 1450262035, "creation_date": 1450262035, "answer_id": 34309672, "question_id": 34309289, "link": "https://stackoverflow.com/questions/34309289/bundle-ssl-issues-after-ruby-2-2-3-installation/34309672#34309672", "title": "Bundle SSL Issues after Ruby 2.2.3 installation", "body": "<p>I had a similar SSL validation issue. In my case I was getting an error similar to</p>\n\n<blockquote>\n  <p>~/.rvm/rubies/ruby-2.2.3/lib/ruby/2.2.0/net/http.rb:923:in `connect': SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed</p>\n</blockquote>\n\n<p>The default RVM binaries may be linking to an OpenSSL path which is not the one configured in your system.</p>\n\n<p>I suggest you to remove Ruby 2.2.3 and reinstall it compiling the binaries on your machine so that the proper OpenSSL version is linked.</p>\n\n<pre><code>rvm remove 2.2.3\nrvm install 2.2.3 --disable-binary\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2034, "user_id": 1980165, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0e1a38e5deca1c31b3bfa86d531864b2?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/1980165/steve"}, "is_accepted": true, "score": 0, "last_activity_date": 1450263347, "last_edit_date": 1495541254, "creation_date": 1450263347, "answer_id": 34310138, "question_id": 34309289, "link": "https://stackoverflow.com/questions/34309289/bundle-ssl-issues-after-ruby-2-2-3-installation/34310138#34310138", "title": "Bundle SSL Issues after Ruby 2.2.3 installation", "body": "<p>I was able to bundle again after doing the following:</p>\n\n<pre><code>cd /usr/local/etc/openssl/\nmv cert.pem cert.pem.old\nwget http://curl.haxx.se/ca/cacert.pem\nmv cacert.pem cert.pm\n</code></pre>\n\n<p>This will change your certificates to use this Bundle of CA Root Certificates.</p>\n\n<p>Disclaimer: I am not sure if there are any caveats of using these certificates.</p>\n\n<p>A similar (but not the same) issue can be found here:\n<a href=\"https://stackoverflow.com/questions/8101377/certificate-verify-failed-openssl-error-when-using-ruby-1-9-3\">&quot;Certificate verify failed&quot; OpenSSL error when using Ruby 1.9.3</a></p>\n"}], "owner": {"reputation": 2034, "user_id": 1980165, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0e1a38e5deca1c31b3bfa86d531864b2?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/1980165/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 280, "favorite_count": 0, "accepted_answer_id": 34310138, "answer_count": 2, "score": 0, "last_activity_date": 1450263347, "creation_date": 1450261047, "question_id": 34309289, "link": "https://stackoverflow.com/questions/34309289/bundle-ssl-issues-after-ruby-2-2-3-installation", "title": "Bundle SSL Issues after Ruby 2.2.3 installation", "body": "<pre><code>Could not verify the SSL certificate for https://rubygems.&lt;domain_removed&gt;.com/.\nThere is a chance you are experiencing a man-in-the-middle attack, but most likely your system\ndoesn't have the CA certificates needed for verification. For information about OpenSSL\ncertificates, see bit.ly/ruby-ssl. To connect without using SSL, edit your Gemfile sources and\nchange 'https' to 'http'.\n</code></pre>\n\n<p>I got the error above when trying to bundle an existing rails app that uses a pre 2.0 version of rails. When I do <code>ruby --version</code> in the dir I get:\n<code>ruby 1.9.3p545 (2014-02-24 revision 45159) [x86_64-darwin14.1.0]</code></p>\n\n<p>I used RVM last night to install <code>ruby-2.2.3</code> which seems to have meddled with my certificates. How can I undo this or fix the problem?</p>\n\n<pre><code>\u279c  homedev  rvm install ruby-2.2.3\nWarning, new version of rvm available '1.26.11', you are using older version '1.26.10'.\nYou can disable this warning with:    echo rvm_autoupdate_flag=0 &gt;&gt; ~/.rvmrc\nYou can enable  auto-update  with:    echo rvm_autoupdate_flag=2 &gt;&gt; ~/.rvmrc\nSearching for binary rubies, this might take some time.\nFound remote file https://rvm_io.global.ssl.fastly.net/binaries/osx/10.10/x86_64/ruby-2.2.3.tar.bz2\nChecking requirements for osx.\nUpdating certificates in '/usr/local/etc/openssl/cert.pem'.\nRequirements installation successful.\nruby-2.2.3 - #configure\nruby-2.2.3 - #download\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100 6338k  100 6338k    0     0   250k      0  0:00:25  0:00:25 --:--:--  334k\nNo checksum for downloaded archive, recording checksum in user configuration.\nruby-2.2.3 - #validate archive\nruby-2.2.3 - #extract\nruby-2.2.3 - #validate binary\nruby-2.2.3 - #setup\nruby-2.2.3 - #gemset created /Users/stevebissett/.rvm/gems/ruby-2.2.3@global\nruby-2.2.3 - #importing gemset /Users/stevebissett/.rvm/gemsets/global.gems.......................-\nruby-2.2.3 - #generating global wrappers........\nruby-2.2.3 - #gemset created /Users/stevebissett/.rvm/gems/ruby-2.2.3\nruby-2.2.3 - #importing gemsetfile /Users/stevebissett/.rvm/gemsets/default.gems evaluated to empty gem list\nruby-2.2.3 - #generating default wrappers........\nUpdating certificates in '/etc/openssl/cert.pem'.\n</code></pre>\n"}, {"tags": ["ruby", "proxy", "http-status-codes", "httparty"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5685981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/838d07875df1b7fe05185709a8329a2d?s=128&d=identicon&r=PG&f=1", "display_name": "Harvordey", "link": "https://stackoverflow.com/users/5685981/harvordey"}, "edited": false, "score": 0, "creation_date": 1450261768, "post_id": 34309205, "comment_id": 56360594, "body": "mm therefore, to have my vps&#39;s ip from my httparty script, I should set up http connection on my vps?"}, {"owner": {"reputation": 8160, "user_id": 163640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63f02794544d271573750a83842cf59?s=128&d=identicon&r=PG", "display_name": "eugen", "link": "https://stackoverflow.com/users/163640/eugen"}, "reply_to_user": {"reputation": 3, "user_id": 5685981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/838d07875df1b7fe05185709a8329a2d?s=128&d=identicon&r=PG&f=1", "display_name": "Harvordey", "link": "https://stackoverflow.com/users/5685981/harvordey"}, "edited": false, "score": 0, "creation_date": 1450262067, "post_id": 34309205, "comment_id": 56360809, "body": "You need to set up a HTTP proxy server on <code>aaadress</code> machine, not a ssh server, and tell HTTParty to connect through that proxy. This is not a programming task, it&#39;s more of a system administration task, maybe someone with experience in that area can help you set up the proxy server."}], "tags": [], "owner": {"reputation": 8160, "user_id": 163640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63f02794544d271573750a83842cf59?s=128&d=identicon&r=PG", "display_name": "eugen", "link": "https://stackoverflow.com/users/163640/eugen"}, "is_accepted": true, "score": 0, "last_activity_date": 1450261331, "last_edit_date": 1450261331, "creation_date": 1450260830, "answer_id": 34309205, "question_id": 34309126, "link": "https://stackoverflow.com/questions/34309126/httparty-with-proxying-raises-wrong-status-line/34309205#34309205", "title": "HTTParty with proxying raises &#39;wrong status line&#39;", "body": "<p>A ssh server is not an HTTP proxy. You're mixing services here.</p>\n"}], "owner": {"reputation": 3, "user_id": 5685981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/838d07875df1b7fe05185709a8329a2d?s=128&d=identicon&r=PG&f=1", "display_name": "Harvordey", "link": "https://stackoverflow.com/users/5685981/harvordey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 323, "favorite_count": 0, "accepted_answer_id": 34309205, "answer_count": 1, "score": 0, "last_activity_date": 1450261331, "creation_date": 1450260593, "question_id": 34309126, "link": "https://stackoverflow.com/questions/34309126/httparty-with-proxying-raises-wrong-status-line", "title": "HTTParty with proxying raises &#39;wrong status line&#39;", "body": "<p>This is my <strong>proxy credentials</strong>, and this will successfully connect to the server:</p>\n\n<pre><code>\u276f ssh uuuser@aaaddress -p 22                                         \n  uuuser@aaaddress password: pppassword\n</code></pre>\n\n<p>Now I'm trying send request through this proxy with <strong>HTTParty</strong>:</p>\n\n<pre><code>response = HTTParty.post 'my_url', { \n        body: { \"my body\" },\n        http_proxyaddr: aaadress,\n        http_proxyport: 22,\n        http_proxyuser: uuuser,\n        http_proxypass: pppassword\n}\n</code></pre>\n\n<p>But this request raises <code>wrong status line: \"SSH-2.0-OpenSSH_5.3\"</code> error. What could be the issue?</p>\n"}, {"tags": ["arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "edited": false, "score": 2, "creation_date": 1450259635, "post_id": 34308561, "comment_id": 56359130, "body": "You can use <code>&lt;&lt;</code> multiple times in one row since it returns the updated array, <code>my_hash[&quot;paths&quot;] &lt;&lt; &quot;new path&quot; &lt;&lt; &quot;an other new path&quot;</code>."}, {"owner": {"reputation": 2805, "user_id": 2398147, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/931e3a76cecf3278312736081d4622cc?s=128&d=identicon&r=PG", "display_name": "Dangling Cruze", "link": "https://stackoverflow.com/users/2398147/dangling-cruze"}, "reply_to_user": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "edited": false, "score": 0, "creation_date": 1450259780, "post_id": 34308561, "comment_id": 56359245, "body": "Great. Didn&#39;t know that. Thanks."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1450264671, "post_id": 34308561, "comment_id": 56362665, "body": "&quot;I want to do it in one line.&quot; \u2013 What is this obsession with &quot;one line&quot;? In Ruby, you can (almost) always replace linebreaks with semicolons, making it possible to write <i>every</i> Ruby program in one line. However, I don&#39;t think that&#39;s terribly useful, so does everybody keep asking about &quot;one line&quot;? Here&#39;s your code in one line: <code>my_hash[&quot;paths&quot;] &lt;&lt; &quot;new path&quot;; my_hash[&quot;paths&quot;] &lt;&lt; &quot;an other new path&quot;</code> Do you think that is somehow better?"}, {"owner": {"reputation": 2805, "user_id": 2398147, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/931e3a76cecf3278312736081d4622cc?s=128&d=identicon&r=PG", "display_name": "Dangling Cruze", "link": "https://stackoverflow.com/users/2398147/dangling-cruze"}, "edited": false, "score": 0, "creation_date": 1450265820, "post_id": 34308561, "comment_id": 56363430, "body": "Sorry for your misunderstanding. I just thought doing same thing again and again would be too lame and if I could add all values at once."}], "answers": [{"tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": false, "score": 2, "last_activity_date": 1450259154, "creation_date": 1450259154, "answer_id": 34308601, "question_id": 34308561, "link": "https://stackoverflow.com/questions/34308561/append-multiple-new-values-to-existing-hash-key-in-ruby/34308601#34308601", "title": "Append multiple new values to existing hash key in Ruby", "body": "<p>You can use <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-concat\" rel=\"nofollow\"><code>concat</code></a> method, provided your <code>my_hash['paths']</code> is an <code>Array</code>:</p>\n\n<pre><code>my_hash['paths'].concat(paths_array)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2805, "user_id": 2398147, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/931e3a76cecf3278312736081d4622cc?s=128&d=identicon&r=PG", "display_name": "Dangling Cruze", "link": "https://stackoverflow.com/users/2398147/dangling-cruze"}, "edited": false, "score": 0, "creation_date": 1450259740, "post_id": 34308606, "comment_id": 56359214, "body": "Yes, it does. Thanks."}], "tags": [], "owner": {"reputation": 8160, "user_id": 163640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63f02794544d271573750a83842cf59?s=128&d=identicon&r=PG", "display_name": "eugen", "link": "https://stackoverflow.com/users/163640/eugen"}, "is_accepted": false, "score": 1, "last_activity_date": 1450259169, "creation_date": 1450259169, "answer_id": 34308606, "question_id": 34308561, "link": "https://stackoverflow.com/questions/34308561/append-multiple-new-values-to-existing-hash-key-in-ruby/34308606#34308606", "title": "Append multiple new values to existing hash key in Ruby", "body": "<p>This should work: </p>\n\n<pre><code>my_hash[\"paths\"].concat([\"new path\", \"an other new path\"])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 42085, "user_id": 3444240, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/OjOru.jpg?s=128&g=1", "display_name": "potashin", "link": "https://stackoverflow.com/users/3444240/potashin"}, "is_accepted": true, "score": 4, "last_activity_date": 1450259197, "creation_date": 1450259197, "answer_id": 34308619, "question_id": 34308561, "link": "https://stackoverflow.com/questions/34308561/append-multiple-new-values-to-existing-hash-key-in-ruby/34308619#34308619", "title": "Append multiple new values to existing hash key in Ruby", "body": "<p>Use <code>push</code>:</p>\n\n<pre><code>my_hash[\"paths\"].push(\"new path\", \"an other new path\")\n</code></pre>\n\n<p><a href=\"https://repl.it/B8ru\" rel=\"nofollow\"><strong>Demo</strong></a></p>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1450262414, "post_id": 34308658, "comment_id": 56361067, "body": "In addition I&#39;d use the <a href=\"http://ruby-doc.org/core-2.2.3/doc/syntax/literals_rdoc.html#label-Percent+Strings\" rel=\"nofollow noreferrer\"><code>%W</code> literal</a>: <code>+= %W(new&#47;path another&#47;new&#47;path)</code> (path names usually don&#39;t contain spaces)"}], "tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 5, "last_activity_date": 1450259323, "creation_date": 1450259323, "answer_id": 34308658, "question_id": 34308561, "link": "https://stackoverflow.com/questions/34308561/append-multiple-new-values-to-existing-hash-key-in-ruby/34308658#34308658", "title": "Append multiple new values to existing hash key in Ruby", "body": "<p>Just for sake of options, here's another way to do this:</p>\n\n<pre><code>my_hash[\"paths\"] += [\"new path\", \"an other new path\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": false, "score": 1, "last_activity_date": 1450260396, "last_edit_date": 1495540783, "creation_date": 1450259852, "answer_id": 34308842, "question_id": 34308561, "link": "https://stackoverflow.com/questions/34308561/append-multiple-new-values-to-existing-hash-key-in-ruby/34308842#34308842", "title": "Append multiple new values to existing hash key in Ruby", "body": "<p>By little modifying <strong><a href=\"https://stackoverflow.com/questions/34308561/append-multiple-new-values-to-existing-hash-key-in-ruby#answer-34308658\">shivam's answer</a></strong> : </p>\n\n<pre><code>&gt; my_hash[\"paths\"] |= [\"new path\", \"an other new path\", \"tests/**\", \"new path\", \"an other new path\"]\n#=&gt; [\"tests/**\", \"new path\", \"an other new path\"]\n</code></pre>\n\n<p><strong>Note:</strong> This will not allow to push duplicate entry..</p>\n\n<h2><a href=\"https://repl.it/B8sM\" rel=\"nofollow noreferrer\">Demo</a></h2>\n"}], "owner": {"reputation": 2805, "user_id": 2398147, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/931e3a76cecf3278312736081d4622cc?s=128&d=identicon&r=PG", "display_name": "Dangling Cruze", "link": "https://stackoverflow.com/users/2398147/dangling-cruze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1567, "favorite_count": 0, "accepted_answer_id": 34308619, "answer_count": 5, "score": 2, "last_activity_date": 1457620973, "creation_date": 1450259007, "last_edit_date": 1457620973, "question_id": 34308561, "link": "https://stackoverflow.com/questions/34308561/append-multiple-new-values-to-existing-hash-key-in-ruby", "title": "Append multiple new values to existing hash key in Ruby", "body": "<p>I have a hash with existing key:</p>\n\n<pre><code>my_hash[\"paths\"] = [\"tests/**\"]\n</code></pre>\n\n<p>I have to append multiple values to the key <code>paths</code>.</p>\n\n<p>Right now, I'm doing this:</p>\n\n<pre><code>my_hash[\"paths\"] &lt;&lt; \"new path\"\nmy_hash[\"paths\"] &lt;&lt; \"an other new path\"\n... and so on\n</code></pre>\n\n<p>I want to do it in one line. Say, have a list of values that I can then push into the existing key directly.</p>\n\n<p>I'll be glad for the help. Thank You.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 33893, "user_id": 498256, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Pn7lt.jpg?s=128&g=1", "display_name": "BMW", "link": "https://stackoverflow.com/users/498256/bmw"}, "edited": false, "score": 0, "creation_date": 1450259375, "post_id": 34308554, "comment_id": 56358937, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/12445336/local-time-zone-in-ruby\">Local Time Zone in Ruby</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1699, "user_id": 783825, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/cce2622c5ccd49a3cbf2007491ab1075?s=128&d=identicon&r=PG", "display_name": "Neikos", "link": "https://stackoverflow.com/users/783825/neikos"}, "is_accepted": false, "score": 0, "last_activity_date": 1450259749, "creation_date": 1450259749, "answer_id": 34308805, "question_id": 34308554, "link": "https://stackoverflow.com/questions/34308554/ruby-getting-the-configured-region-on-redhat-centos/34308805#34308805", "title": "Ruby: Getting the configured region on RedHat/CentOS", "body": "<p>Since you are on CentOS 7 you could use something akin to <code>timedatectl | grep Time zone</code> and parse the timezone out of that.</p>\n\n<p>This is obviously not portable to non-systemd systems.</p>\n\n<p>As a not so pretty oneliner:</p>\n\n<pre><code>`timedatectl | grep \"Time zone\"`.split(/:|\\(/)[1].strip\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5685870, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156505558935727/picture?type=large", "display_name": "markussh", "link": "https://stackoverflow.com/users/5685870/markussh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1450423991, "creation_date": 1450258988, "last_edit_date": 1495540749, "question_id": 34308554, "link": "https://stackoverflow.com/questions/34308554/ruby-getting-the-configured-region-on-redhat-centos", "title": "Ruby: Getting the configured region on RedHat/CentOS", "body": "<p>I have a Rails application running on a CentOS 7 machine. I would like to read the system-configured region (Olson time zone) into a string (e.g. 'Europe/Stockholm', 'US/Eastern', etc).</p>\n\n<p>I'm not interested in results that differ depending on whether daylight saving is active - 'CET' and 'CEST' and stuff like that won't do it for me. I've dug around <code>Time</code> and <code>TZInfo</code> but can't seem to find anything fitting.</p>\n\n<p>Any ideas?</p>\n\n<p>EDIT: It turns out Rails has no native way of getting the Olson time zone - one would have to do it in the shell, something like <a href=\"https://stackoverflow.com/a/26915292/5685870\">this</a>. Neikos' <a href=\"https://stackoverflow.com/a/34308805/5685870\">suggestion below</a> is shorter but doesn't work for me because my machine is a modified version of CentOS 7 which is stripped of <code>timedatectl</code> but is perhaps useful for someone else.</p>\n\n<p>EDIT 2: I ended up calling the following shell script from within ruby:</p>\n\n<pre><code>#!/bin/bash\n\nchecksum=`md5sum /etc/localtime | cut -d ' ' -f1`\nfind /usr/share/zoneinfo/ -type f | xargs md5sum 2&gt; /dev/null |\n    grep \"^$checksum\" | sed \"s,.*/usr/share/zoneinfo/,,\" |\n    sort -n | head -n1\n</code></pre>\n"}, {"tags": ["javascript", "html", "ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 7359, "user_id": 599989, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d752d2574aeb36bc66471f4d0f8811aa?s=128&d=identicon&r=PG", "display_name": "Bijendra", "link": "https://stackoverflow.com/users/599989/bijendra"}, "edited": false, "score": 0, "creation_date": 1450258118, "post_id": 34308117, "comment_id": 56358038, "body": "qsn looks confusing to me, can you post some code to explain it"}, {"owner": {"reputation": 154038, "user_id": 462627, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f0285ad1973e938e2d2f40254c247f6f?s=128&d=identicon&r=PG", "display_name": "Praveen Kumar Purushothaman", "link": "https://stackoverflow.com/users/462627/praveen-kumar-purushothaman"}, "edited": false, "score": 0, "creation_date": 1450258562, "post_id": 34308117, "comment_id": 56358348, "body": "OKay, so what have you got in it? Why JavaScript and RoR?"}, {"owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "edited": false, "score": 0, "creation_date": 1450258978, "post_id": 34308117, "comment_id": 56358644, "body": "I don&#39;t have this specifically, but I can write about a shopping cart I have implemented if you&#39;d benefit from that"}, {"owner": {"reputation": 213, "user_id": 2264575, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/962b9dd1f672090aa79e5f2f7fb97520?s=128&d=identicon&r=PG", "display_name": "shamshul2007", "link": "https://stackoverflow.com/users/2264575/shamshul2007"}, "edited": false, "score": 0, "creation_date": 1451584081, "post_id": 34308117, "comment_id": 56841974, "body": "If you are using DTM then it is very easy to get the URL with the help of Data Element.The question seems to be incomplete and sorry but ROR+JS confuse me."}], "owner": {"reputation": 39, "user_id": 5676382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4121ab7a8d743fdf752baf0037adcebf?s=128&d=identicon&r=PG&f=1", "display_name": "Anand Sharma", "link": "https://stackoverflow.com/users/5676382/anand-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1450433505, "creation_date": 1450257713, "last_edit_date": 1450433505, "question_id": 34308117, "link": "https://stackoverflow.com/questions/34308117/not-getting-current-url", "title": "not Getting current URL", "body": "<p>I'm trying to add a product to <code>cart</code> by using url </p>\n\n<pre><code>/cart/addtocart?projectId=11480904060&amp;quantity=1\n</code></pre>\n\n<p>after this the product will be added to cart by </p>\n\n<pre><code>/cart/shippingcart\n</code></pre>\n\n<p>url. I want to show destination url in <code>omniture</code> in firebug.</p>\n\n<p>problem is it is taking </p>\n\n<pre><code>/cart/addtocart?projectId=11480904060&amp;quantity=1\n</code></pre>\n\n<p>as destination url istead of </p>\n\n<pre><code>/cart/shippingcart\n</code></pre>\n\n<p>I tried </p>\n\n<pre><code>digitalData['page']['pageInfo']['destinationURL'] = document.URL; \n</code></pre>\n\n<p><strong>Problem:</strong></p>\n\n<p>this code in tracking omniture but it is failing the specs of <code>jasmine</code></p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "factory-bot"], "answers": [{"tags": [], "owner": {"reputation": 187, "user_id": 1327092, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/510fc4b6490e3db4588f7129be31097b?s=128&d=identicon&r=PG", "display_name": "ZiggidyCreative", "link": "https://stackoverflow.com/users/1327092/ziggidycreative"}, "is_accepted": false, "score": 0, "last_activity_date": 1450277097, "creation_date": 1450277097, "answer_id": 34314963, "question_id": 34307835, "link": "https://stackoverflow.com/questions/34307835/creating-multiple-unique-entries-with-transient-factorygirl/34314963#34314963", "title": "Creating multiple unique entries with transient FactoryGirl", "body": "<p>Direct from Factory Girl Documentation: <a href=\"http://www.rubydoc.info/gems/factory_girl/file/GETTING_STARTED.md#Transient_Attributes\" rel=\"nofollow\">http://www.rubydoc.info/gems/factory_girl/file/GETTING_STARTED.md#Transient_Attributes</a></p>\n\n<pre><code>FactoryGirl.define do\n\n  # post factory with a `belongs_to` association for the user\n  factory :post do\n    title \"Through the Looking Glass\"\n    user\n  end\n\n  # user factory without associated posts\n  factory :user do\n    name \"John Doe\"\n\n    # user_with_posts will create post data after the user has been created\n    factory :user_with_posts do\n      # posts_count is declared as a transient attribute and available in\n      # attributes on the factory, as well as the callback via the evaluator\n      transient do\n        posts_count 2\n      end\n\n      # the after(:create) yields two values; the user instance itself and the\n      # evaluator, which stores all values from the factory, including transient\n      # attributes; `create_list`'s second argument is the number of records\n      # to create and we make sure the user is associated properly to the post\n      after(:create) do |user, evaluator|\n        create_list(:post, evaluator.posts_count, user: user)\n      end\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1450277097, "creation_date": 1450256877, "question_id": 34307835, "link": "https://stackoverflow.com/questions/34307835/creating-multiple-unique-entries-with-transient-factorygirl", "title": "Creating multiple unique entries with transient FactoryGirl", "body": "<p>I have a FactoryGirl Object that creates a <code>Category</code> in my case (it is associated with an image)</p>\n\n<pre><code>class Image &lt; ActiveRecord::Base\n  has_many :image_categories, dependent: :destroy\n  has_many :categories, through: :image_categories\n  validates :categories, presence: { message: 'Choose At Least 1 Category' }\nend\n\nclass Category &lt; ActiveRecord::Base\n  has_many :image_categories\n  has_many :images, through: :image_categories\n  validates :name, presence: { message: \"Don't forget to add a Category\" }\n  validates_uniqueness_of :name, message: 'Category name %{value} already exists'\nend\n\n\nFactoryGirl.define do\n factory :category do\n  name 'My Category'\n end\nend \n\nFactoryGirl.define do\n  factory :image do\n    title 'Test Title'\n    description 'Test Description'\n    transient do\n      categories_count 1\n   end\n   categories { build_list(:category, categories_count) }\n end\nend\n</code></pre>\n\n<p>When creating an image with 1 category everything is fine, but if i try and save with 2 categories the second entry gets saved as <code>nil</code>, I guess thats because of my validation of unique names.</p>\n\n<p>So my question is how can I use transients to create a list of 2 unique categories</p>\n\n<p>Hope this makes sense</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "xpath", "nokogiri"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1450292834, "post_id": 34307764, "comment_id": 56381914, "body": "I think you&#39;re misusing &quot;parallel&quot;. It sounds like you want to locate two at a time, as a group. Also, you say <code>id==5</code> but your selectors search for <code>f5</code>. While it might seem to be picking nits, programming is exacting, and the description in the question needs to be also. It&#39;s confusing to people trying to help when the question isn&#39;t consistent, which slows and/or discourages answerers."}], "answers": [{"tags": [], "owner": {"reputation": 83665, "user_id": 2998271, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B7vUA.png?s=128&g=1", "display_name": "har07", "link": "https://stackoverflow.com/users/2998271/har07"}, "is_accepted": true, "score": 2, "last_activity_date": 1450267027, "last_edit_date": 1450267027, "creation_date": 1450256960, "answer_id": 34307865, "question_id": 34307764, "link": "https://stackoverflow.com/questions/34307764/access-two-elements-simultaneously-in-nokogiri/34307865#34307865", "title": "Access two elements simultaneously in Nokogiri", "body": "<p>If I understand this correctly, you can use the following XPath :</p>\n\n<pre><code>//*[self::div or self::span][@id=\"f5\"]\n</code></pre>\n\n<p><strong><kbd><a href=\"http://www.xpathtester.com/xpath/021dfcf4b37e45645bb776a9a750e60e\" rel=\"nofollow\"><code>xpathtester demo</code></a></kbd></strong></p>\n\n<p>The XPath above will find element named either <code>div</code> or <code>span</code> that have <code>id</code> attribute value equals <code>\"f5\"</code></p>\n\n<p><strong>output :</strong></p>\n\n<pre><code>&lt;span id=\"f5\" style=\"position:absolute;top:171pt;left:28pt\"&gt;003874&lt;/span&gt;\n\n&lt;div id=\"f5\" style=\"position:absolute;top:171pt;left:99pt\"&gt;\u0412\u0410\u0420\u0415\u041d\u042c\u0415 \"\u042d\u041a\u041e\u041f\u0420\u041e\u0414\u0423\u041a\u0422\" \u0427\u0415\u0420\u041d\u0410\u042f \u0421\u041c\u041e\u0420\u041e\u0414\u0418\u041d\u0410&lt;/div&gt;\n\n&lt;div id=\"f5\" style=\"position:absolute;top:180pt;left:99pt\"&gt;325\u0433\u0440.&lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 514, "user_id": 4613443, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/abfa85562e754636c46ac3dc3f67decd?s=128&d=identicon&r=PG", "display_name": "mohnstrudel", "link": "https://stackoverflow.com/users/4613443/mohnstrudel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 34307865, "answer_count": 1, "score": 1, "last_activity_date": 1450292771, "creation_date": 1450256701, "last_edit_date": 1450292771, "question_id": 34307764, "link": "https://stackoverflow.com/questions/34307764/access-two-elements-simultaneously-in-nokogiri", "title": "Access two elements simultaneously in Nokogiri", "body": "<p>I have some weirdly formatted HTML files which I have to parse.</p>\n\n<p>This is my Ruby code:</p>\n\n<pre><code>File.open('2.html', 'r:utf-8') do |f| \n    @parsed = Nokogiri::HTML(f, nil, 'windows-1251')\n    puts @parsed.xpath('//span[@id=\"f5\"]//div[@id=\"f5\"]').inner_text\nend\n</code></pre>\n\n<p>I want to parse a file containing:</p>\n\n<pre><code>&lt;span style=\"position:absolute;top:156pt;left:24pt\" id=f6&gt;36.4.1.1. \u0432\u0430\u0440\u0435\u043d\u044c\u0435, \u0434\u0436\u0435\u043c\u044b, \u043a\u043e\u043d\u0444\u0438\u0442\u044e\u0440\u044b, \u0441\u0438\u0440\u043e\u043f\u044b&lt;/span&gt;\n&lt;div style=\"position:absolute;top:167.6pt;left:24.7pt;width:709.0;height:31.5;padding-top:23.8;font:0pt Arial;border-width:1.4; border-style:solid;border-color:#000000;\"&gt;&lt;table&gt;&lt;/table&gt;&lt;/div&gt;\n&lt;span style=\"position:absolute;top:171pt;left:28pt\" id=f5&gt;003874&lt;/span&gt;\n&lt;div style=\"position:absolute;top:171pt;left:99pt\" id=f5&gt;\u0412\u0410\u0420\u0415\u041d\u042c\u0415 &amp;quot;\u042d\u041a\u041e\u041f\u0420\u041e\u0414\u0423\u041a\u0422&amp;quot; \u0427\u0415\u0420\u041d\u0410\u042f \u0421\u041c\u041e\u0420\u041e\u0414\u0418\u041d\u0410&lt;/div&gt;\n&lt;div style=\"position:absolute;top:180pt;left:99pt\" id=f5&gt;325\u0433\u0440.  &lt;/div&gt;\n&lt;div style=\"position:absolute;top:167.6pt;left:95.8pt;width:2.8;height:31.5;padding-top:23.8;font:0pt Arial;border-width:0 0 0 1.4; border-style:solid;border-color:#000000;\"&gt;&lt;table&gt;&lt;/table&gt;&lt;/div&gt;\n</code></pre>\n\n<p>I need to select either <code>&lt;div&gt;</code> or <code>&lt;span&gt;</code> with <code>id==5</code>. With my current XPath selector it's not possible. If I remove <code>//span[@id=\"f5\"]</code>, for example, then the divs are selected correctly. I can output them one after another:</p>\n\n<pre><code>puts @parsed.xpath('//div[@id=\"f5\"]').inner_text\nputs @parsed.xpath('//span[@id=\"f5\"]').inner_text\n</code></pre>\n\n<p>but then the order would be a complete mess. The parsed <code>span</code> have to be directly underneath the <code>div</code> from the original file.</p>\n\n<p>Am I missing some basics? I haven't found anything on the web regarding parallel parsing of two elements. Most posts are concerned with parsing two classes of a div for example, but not two different elements at a time.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pg"], "comments": [{"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1450254960, "post_id": 34307112, "comment_id": 56356069, "body": "please check <code>libpq</code> library is installed ? then you try <code>sudo gem install pg --with-pg-config=&#47;usr&#47;pgsql-9.1&#47;bin&#47;pg_config</code> I am not give negetive vote"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1450256558, "post_id": 34307112, "comment_id": 56357044, "body": "Try this <code>sudo ARCHFLAGS=&quot;-arch x86_64&quot; gem install pg</code>."}, {"owner": {"reputation": 3793, "user_id": 5685381, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/37NvF.jpg?s=128&g=1", "display_name": "Said-Abdulla Atkaev", "link": "https://stackoverflow.com/users/5685381/said-abdulla-atkaev"}, "edited": false, "score": 0, "creation_date": 1450278140, "post_id": 34307112, "comment_id": 56372331, "body": "Thank you, &#39;sudo ARCHFLAGS=&quot;-arch x86_64&quot; gem install pg&#39; it helps"}, {"owner": {"reputation": 347, "user_id": 631058, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2ca9898e5b99ccee785067d85be2196d?s=128&d=identicon&r=PG", "display_name": "amatusko", "link": "https://stackoverflow.com/users/631058/amatusko"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1474469177, "post_id": 34307112, "comment_id": 66545553, "body": "@\u0417\u0435\u043b\u0451\u043d\u044b\u0439 Thanks! Your answer worked on my Mac (OSX Mavericks)"}], "answers": [{"comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1450256501, "post_id": 34307289, "comment_id": 56357009, "body": "are you sure about <code>&#47;usr&#47;pgsql-9.1&#47;</code> ? As you can see OP already have installed <code>9.4</code>. Also you suggest to configure <code>bundler</code>, OP don&#39;t use a bundler."}], "tags": [], "owner": {"reputation": 849, "user_id": 2178438, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/aT0em.jpg?s=128&g=1", "display_name": "davidawad", "link": "https://stackoverflow.com/users/2178438/davidawad"}, "is_accepted": true, "score": 3, "last_activity_date": 1450255128, "last_edit_date": 1495542815, "creation_date": 1450255128, "answer_id": 34307289, "question_id": 34307112, "link": "https://stackoverflow.com/questions/34307112/error-with-installing-pg-gem-os-x-10-10-2/34307289#34307289", "title": "Error with installing pg gem. OS X 10.10.2", "body": "<p>Looks like I found a similar problem from 3 years ago. The installer can't find some of the config files it's looking for. This might work for you.</p>\n\n<p><code>bundle config build.pg --with-pg-config=/usr/pgsql-9.1/bin/pg_config</code></p>\n\n<p>If you're on MacPorts try this:</p>\n\n<p><code>bundle config build.pg --with-pg-config=/opt/local/lib/postgresql91/bin/pg_config\n</code></p>\n\n<p>However if you're using brew you can just run</p>\n\n<p><code>brew install postgresql</code></p>\n\n<p><a href=\"https://stackoverflow.com/questions/9234960/gem-install-pg-with-pg-config-works-bundle-fails\">gem install pg --with-pg-config works, bundle fails</a></p>\n"}, {"tags": [], "owner": {"reputation": 7651, "user_id": 12652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d08ae98579e2b4ea364e7012f77ffd91?s=128&d=identicon&r=PG", "display_name": "&#214;zg&#252;r", "link": "https://stackoverflow.com/users/12652/%c3%96zg%c3%bcr"}, "is_accepted": false, "score": 1, "last_activity_date": 1464461136, "creation_date": 1464461136, "answer_id": 37502666, "question_id": 34307112, "link": "https://stackoverflow.com/questions/34307112/error-with-installing-pg-gem-os-x-10-10-2/37502666#37502666", "title": "Error with installing pg gem. OS X 10.10.2", "body": "<p>And If you are using PostgresApp here is the command:</p>\n\n<p><code>gem install pg -v '0.18.4' -- --with-pg-config=/Applications/Postgres.app/Contents/Versions/9.5/bin/pg_config</code></p>\n"}], "owner": {"reputation": 3793, "user_id": 5685381, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/37NvF.jpg?s=128&g=1", "display_name": "Said-Abdulla Atkaev", "link": "https://stackoverflow.com/users/5685381/said-abdulla-atkaev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 0, "accepted_answer_id": 34307289, "answer_count": 2, "score": 0, "last_activity_date": 1464461136, "creation_date": 1450254480, "question_id": 34307112, "link": "https://stackoverflow.com/questions/34307112/error-with-installing-pg-gem-os-x-10-10-2", "title": "Error with installing pg gem. OS X 10.10.2", "body": "<p>I have problems with installing pg gem. But bundle is successful.\nMaybe smith with \"Can't find the PostgreSQL client library (libpq)\"</p>\n\n<pre><code>$ sudo gem install pg -- --with-pg-config=/Applications/Postgres.app/Contents/Versions/9.4/bin/pg_config\nBuilding native extensions with: '--with-pg-config=/Applications/Postgres.app/Contents/Versions/9.4/bin/pg_config'\nThis could take a while...\nERROR:  Error installing pg:\nERROR: Failed to build gem native extension.\n\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby -r ./siteconf20151216-5802-1na2dm0.rb extconf.rb --with-pg-config=/Applications/Postgres.app/Contents/Versions/9.4/bin/pg_config\nUsing config values from /Applications/Postgres.app/Contents/Versions/9.4/bin/pg_config\nchecking for libpq-fe.h... yes\nchecking for libpq/libpq-fs.h... yes\nchecking for pg_config_manual.h... yes\nchecking for PQconnectdb() in -lpq... no\nchecking for PQconnectdb() in -llibpq... no\nchecking for PQconnectdb() in -lms/libpq... no\nCan't find the PostgreSQL client library (libpq)\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n--with-opt-dir\n--without-opt-dir\n--with-opt-include\n--without-opt-include=${opt-dir}/include\n--with-opt-lib\n--without-opt-lib=${opt-dir}/lib\n--with-make-prog\n--without-make-prog\n--srcdir=.\n--curdir\n--ruby=/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby\n--with-pg\n--without-pg\n--enable-windows-cross\n--disable-windows-cross\n--with-pg-config\n--with-pg-dir\n--without-pg-dir\n--with-pg-include\n--without-pg-include=${pg-dir}/include\n--with-pg-lib\n--without-pg-lib=${pg-dir}/\n--with-pqlib\n--without-pqlib\n--with-libpqlib\n--without-libpqlib\n--with-ms/libpqlib\n--without-ms/libpqlib\n\nextconf failed, exit code 1\n\nGem files will remain installed in /Library/Ruby/Gems/2.0.0/gems/pg-0.18.4 for inspection.\nResults logged to /Library/Ruby/Gems/2.0.0/extensions/universal-darwin-14/2.0.0/pg-0.18.4/gem_make.out\n</code></pre>\n\n<p>Anybody knows how fix it?</p>\n\n<p>I tried ARCHFLAGS=\"-arch x86_64\" bundle install \nDidn't fixed.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1450255920, "post_id": 34306980, "comment_id": 56356631, "body": "See this question for a discussion of some of the options: <a href=\"http://stackoverflow.com/a/4471202/2988\"><i>When monkey patching a method, can you call the overridden method from the new implementation?</i></a>"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1450256104, "post_id": 34306980, "comment_id": 56356735, "body": "I think it would make sense to close your question as a duplicate of that question, but I wanted to get your input first: do you believe the answers on that other question answer your question?"}, {"owner": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1450256441, "post_id": 34306980, "comment_id": 56356960, "body": "@J&#246;rgWMittag: Maybe, I haven&#39;t tried it yet. I am not sure if I can just implement the delegation example and call <code>WrappedFoo.new(Backend::BaseContentsController)</code>. IMHO the linked answer is rather generic. Perhaps better creating a new answer that references that one, explaining why <code>alias_method_chain</code> should not be used."}], "answers": [{"comments": [{"owner": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "edited": false, "score": 0, "creation_date": 1450254652, "post_id": 34307017, "comment_id": 56355895, "body": "This was exactly what I was looking for."}, {"owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "edited": false, "score": 0, "creation_date": 1450262754, "post_id": 34307017, "comment_id": 56361312, "body": "Nice to see Marek again!"}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": false, "score": 6, "last_activity_date": 1450254146, "creation_date": 1450254146, "answer_id": 34307017, "question_id": 34306980, "link": "https://stackoverflow.com/questions/34306980/alias-method-stack-level-too-deep/34307017#34307017", "title": "alias_method: stack level too deep", "body": "<p>You should try <a href=\"http://apidock.com/rails/Module/alias_method_chain\" rel=\"noreferrer\"><code>alias_method_chain</code></a>:</p>\n\n<pre><code>def update_with_booking\n  # do some stuff\n  update_without_booking # that's your old update\nend\n\nalias_method_chain :update, :booking\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "edited": false, "score": 0, "creation_date": 1450254215, "post_id": 34307020, "comment_id": 56355660, "body": "Yeah, I figured that too :). But what would be the solution?"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "edited": false, "score": 0, "creation_date": 1450254295, "post_id": 34307020, "comment_id": 56355708, "body": "@dan-klasson did you try the one posted in my answer?"}, {"owner": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1450254465, "post_id": 34307020, "comment_id": 56355798, "body": "@MarekLipka: Trying it out now"}, {"owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "reply_to_user": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "edited": false, "score": 0, "creation_date": 1450254539, "post_id": 34307020, "comment_id": 56355839, "body": "@dan-klasson Added an example solution."}], "tags": [], "owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "is_accepted": false, "score": 2, "last_activity_date": 1450254489, "last_edit_date": 1450254489, "creation_date": 1450254164, "answer_id": 34307020, "question_id": 34306980, "link": "https://stackoverflow.com/questions/34306980/alias-method-stack-level-too-deep/34307020#34307020", "title": "alias_method: stack level too deep", "body": "<p>You have defined an infinite recursion. The result is the following code snippet.</p>\n\n<pre><code>def update\n  # do some stuff\n  update\nend\n</code></pre>\n\n<p>Ensure that your alias doesn't override a method you still using.</p>\n\n<pre><code>Backend::BaseContentsController.class_eval do\n  alias_method :update_original, :update\n\n  def booking_update    \n    # do some stuff\n    update_original\n  end\n\n  alias_method :update, :booking_update\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "edited": false, "score": 0, "creation_date": 1450254707, "post_id": 34307125, "comment_id": 56355931, "body": "This is probably the better implementation, it&#39;s more explicit. But I want to follow conventions so I went with the accepted answer."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "edited": false, "score": 1, "creation_date": 1450255559, "post_id": 34307125, "comment_id": 56356401, "body": "@dan-klasson this convention was invented when no <code>prepend</code> existed. FYI: <code>alias_method_chain</code> will create an alias, what in general might lead to weird problems in the future, when other piece of code would try to do the same. The solution above is bullet-proof. Rails is often too silly to follow it\u2019s conventions."}, {"owner": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1450255697, "post_id": 34307125, "comment_id": 56356483, "body": "@mudasobwa: I meant the conventions on this legacy app I am working on. Thanks for the heads up though."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 3, "last_activity_date": 1450254537, "creation_date": 1450254537, "answer_id": 34307125, "question_id": 34306980, "link": "https://stackoverflow.com/questions/34306980/alias-method-stack-level-too-deep/34307125#34307125", "title": "alias_method: stack level too deep", "body": "<pre><code>module Decorator\n  def update\n    # do some stuff\n    super\n  end\nend\nBackend::BaseContentsController.prepend(Decorator)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 292, "user_id": 7948740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t8pBi.jpg?s=128&g=1", "display_name": "Prateek Sen", "link": "https://stackoverflow.com/users/7948740/prateek-sen"}, "is_accepted": false, "score": 0, "last_activity_date": 1606454573, "creation_date": 1606454573, "answer_id": 65032447, "question_id": 34306980, "link": "https://stackoverflow.com/questions/34306980/alias-method-stack-level-too-deep/65032447#65032447", "title": "alias_method: stack level too deep", "body": "<p><strong>Explanation:</strong></p>\n<p>When both alias_method and Module#prepend are used on the same method <code>stack level too deep</code> error occurs.</p>\n<p>When both are used simultaneously both tries to find the actual definitions but gets others definition, now both of them tries to put their definition on the top of the stack which causes too many stack entries and gives <code>stack level too deep</code> error.</p>\n<p><strong>Solution:</strong></p>\n<p>Avoid use of alias_method and alias_method_chain as these are already deprecated. Instead of these use <strong>Module#prepend</strong> for the purpose. Module#prepend is added in Ruby 2.0</p>\n<p>Ref:</p>\n<p><a href=\"https://blog.newrelic.com/engineering/ruby-agent-module-prepend-alias-method-chains/\" rel=\"nofollow noreferrer\">https://blog.newrelic.com/engineering/ruby-agent-module-prepend-alias-method-chains/</a>\n<a href=\"https://docs.newrelic.com/docs/agents/ruby-agent/troubleshooting/systemstackerror-stack-level-too-deep\" rel=\"nofollow noreferrer\">https://docs.newrelic.com/docs/agents/ruby-agent/troubleshooting/systemstackerror-stack-level-too-deep</a>\n<a href=\"https://ethigeek.com/blogs/mutually-exclusive-alias-method-and-prepend\" rel=\"nofollow noreferrer\">https://ethigeek.com/blogs/mutually-exclusive-alias-method-and-prepend</a></p>\n"}], "owner": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 589, "favorite_count": 1, "accepted_answer_id": 34307125, "answer_count": 4, "score": 4, "last_activity_date": 1606454573, "creation_date": 1450253979, "question_id": 34306980, "link": "https://stackoverflow.com/questions/34306980/alias-method-stack-level-too-deep", "title": "alias_method: stack level too deep", "body": "<p>I'm trying to decorate a controller from another rails engine. I have one controller method that I want to extend with just one more line. I rather not duplicate the whole original controller method.</p>\n\n<p>This is what I tried:</p>\n\n<pre><code>  Backend::BaseContentsController.class_eval do\n    def booking_update\n      # do some stuff\n      update\n    end\n    alias_method :update, :booking_update\n  end\n</code></pre>\n\n<p>Unfortunately this throws the exception <code>stack level too deep</code>. Normally with inheritance I could just call super. What would be ideal to do in my case?</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": true, "score": 0, "last_activity_date": 1450255286, "creation_date": 1450255286, "answer_id": 34307335, "question_id": 34306796, "link": "https://stackoverflow.com/questions/34306796/unexpected-behaviour-of-query/34307335#34307335", "title": "Unexpected behaviour of query", "body": "<p>You are fetching the <code>List</code>s, and joining them with the <code>Item</code>s. Because of the way ActiveRecord works, you'll get a list of <code>List</code>s as result, with the <code>Item</code>s embedded.</p>\n\n<p>If you want to loop over the items, you need to load the items and not the lists.</p>\n\n<pre><code>@items = Item.includes(:list).order(\"priority\")\n</code></pre>\n\n<p>The example above uses <code>includes</code> to <a href=\"http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations\" rel=\"nofollow\">eager load</a> the associated list records and avoid the N+1 query issue.</p>\n"}, {"tags": [], "owner": {"reputation": 171, "user_id": 5654057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bda494cccb0b45592f0c1ed9059be85?s=128&d=identicon&r=PG&f=1", "display_name": "Veets", "link": "https://stackoverflow.com/users/5654057/veets"}, "is_accepted": false, "score": 1, "last_activity_date": 1450256217, "creation_date": 1450256217, "answer_id": 34307625, "question_id": 34306796, "link": "https://stackoverflow.com/questions/34306796/unexpected-behaviour-of-query/34307625#34307625", "title": "Unexpected behaviour of query", "body": "<p>The following statement will give you all records in lists table and also eager load the associated items (ordered by priority) with each of them.</p>\n\n<pre><code>@lists = List.includes(:items).order('items.priority')\n</code></pre>\n\n<p>You can access the items ordered by priority in a list by making a call like:</p>\n\n<pre><code>list.items # where list is one of the records in @lists\n</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 2600068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71fbce7036941e567dc2a3f98323fbad?s=128&d=identicon&r=PG", "display_name": "anujeet", "link": "https://stackoverflow.com/users/2600068/anujeet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 34307335, "answer_count": 2, "score": 0, "last_activity_date": 1450256217, "creation_date": 1450253314, "question_id": 34306796, "link": "https://stackoverflow.com/questions/34306796/unexpected-behaviour-of-query", "title": "Unexpected behaviour of query", "body": "<pre><code>@lists = List.joins(\"LEFT JOIN items ON lists.id = items.list_id\").group(\"lists.id\").order(\"items.priority\")\n</code></pre>\n\n<p>I have two entities Lists and Items.\nEach item is associated to a list. Now I'm viewing lists and items in table form\nin which the header of the table contains list names and <code>&lt;tbody&gt;</code> contains item names for that particular list , each item has some priority(e.g 1,2,3..) while saving it. Now while displaying i want to sort items by their priority but my query is sorting lists by priority. Any solution for this?</p>\n"}, {"tags": ["ruby", "automation", "cucumber", "capybara"], "comments": [{"owner": {"reputation": 4630, "user_id": 3058254, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Z10oX.jpg?s=128&g=1", "display_name": "Aravin", "link": "https://stackoverflow.com/users/3058254/aravin"}, "edited": false, "score": 0, "creation_date": 1450256197, "post_id": 34306744, "comment_id": 56356803, "body": "You should using jquery to click. example: <code>evaluate_javascript(&quot;query&quot;)</code>"}, {"owner": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "edited": false, "score": 1, "creation_date": 1450260694, "post_id": 34306744, "comment_id": 56359829, "body": "Do you want to select one of the 4 option values right? Depending from what? In general, to select an option, you can simply do <code>find(&quot;the css selector or the xpath of the option you want to select&quot;).select_option</code> or <code>find(&quot;option[value=&#39;the value you want to select&#39;]&quot;).click</code>"}, {"owner": {"reputation": 55, "user_id": 1779259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d5903592f2fec29163d1339009d2a8c?s=128&d=identicon&r=PG", "display_name": "Jane", "link": "https://stackoverflow.com/users/1779259/jane"}, "edited": false, "score": 1, "creation_date": 1450269114, "post_id": 34306744, "comment_id": 56365750, "body": "I would like to select the item by it&#39;s text, because I have similar fields where I could then reuse the step."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 1779259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d5903592f2fec29163d1339009d2a8c?s=128&d=identicon&r=PG", "display_name": "Jane", "link": "https://stackoverflow.com/users/1779259/jane"}, "edited": false, "score": 0, "creation_date": 1450336947, "post_id": 34317980, "comment_id": 56399029, "body": "Unfortunately it did not work work for me. There is no &#39;.klist&#39;. Added a picture to the issue. Maybe it helps."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 55, "user_id": 1779259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d5903592f2fec29163d1339009d2a8c?s=128&d=identicon&r=PG", "display_name": "Jane", "link": "https://stackoverflow.com/users/1779259/jane"}, "edited": false, "score": 0, "creation_date": 1450365013, "post_id": 34317980, "comment_id": 56417030, "body": "We need to know the actual hamlet for the elements you&#39;re trying to select.  Right click and inspect on one of the drop down elements - then post that"}, {"owner": {"reputation": 55, "user_id": 1779259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d5903592f2fec29163d1339009d2a8c?s=128&d=identicon&r=PG", "display_name": "Jane", "link": "https://stackoverflow.com/users/1779259/jane"}, "edited": false, "score": 0, "creation_date": 1450424039, "post_id": 34317980, "comment_id": 56442647, "body": "Added the HTML to the post."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 55, "user_id": 1779259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d5903592f2fec29163d1339009d2a8c?s=128&d=identicon&r=PG", "display_name": "Jane", "link": "https://stackoverflow.com/users/1779259/jane"}, "edited": false, "score": 0, "creation_date": 1450431129, "post_id": 34317980, "comment_id": 56446382, "body": "Updated my answer to match the new info"}, {"owner": {"reputation": 55, "user_id": 1779259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d5903592f2fec29163d1339009d2a8c?s=128&d=identicon&r=PG", "display_name": "Jane", "link": "https://stackoverflow.com/users/1779259/jane"}, "edited": false, "score": 0, "creation_date": 1451991926, "post_id": 34317980, "comment_id": 56965296, "body": "Thanks for answering. Final solution that worked for me was     find(&#39;.k-item&#39;, :text=&gt;item, :match=&gt;:prefer_exact).click"}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 1, "last_activity_date": 1450430966, "last_edit_date": 1450430966, "creation_date": 1450285673, "answer_id": 34317980, "question_id": 34306744, "link": "https://stackoverflow.com/questions/34306744/cannot-select-option-in-capybara/34317980#34317980", "title": "Cannot select option in capybara", "body": "<p>Capybaras #select only works with visible html option elements.  The issue here is that you appear to be using a kendo multiselect widget which hides the real option elements ( btw your html is invalid since option elements are only legally allowed to be inside a select, optgroup, or datalist element) and then generates a visible UI using li elements inside a ul.k-list.  From looking at a demo of the kendo multiselect - <a href=\"http://demos.telerik.com/kendo-ui/multiselect/index\" rel=\"nofollow\">http://demos.telerik.com/kendo-ui/multiselect/index</a> - it appears the actual ul.k-list element is attached to the page outside of the widget div and therefore a find can't be scoped to the widget, and the ul.list is given an id of \"#{id of select hidden in multiselect widget}_list\".  Since your html doesn't appear to have an id on the hidden element in the widget there is no way to scope with that either.  Because of all of that, rather than doing <code>select(item)</code> you should be able to use</p>\n\n<pre><code>find('.k-list li.k-item', text: item).click\n</code></pre>\n\n<p>to click on the element in the dropdown that becomes visible after you click in the header.  It would be better if this find could be scoped to a particular .klist on the page, but hopefully there is only ever one actually visible while you're running the tests.</p>\n"}], "owner": {"reputation": 55, "user_id": 1779259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d5903592f2fec29163d1339009d2a8c?s=128&d=identicon&r=PG", "display_name": "Jane", "link": "https://stackoverflow.com/users/1779259/jane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 837, "favorite_count": 0, "accepted_answer_id": 34317980, "answer_count": 1, "score": 3, "last_activity_date": 1450430966, "creation_date": 1450253039, "last_edit_date": 1450385031, "question_id": 34306744, "link": "https://stackoverflow.com/questions/34306744/cannot-select-option-in-capybara", "title": "Cannot select option in capybara", "body": "<p>I have a problem selecting option from the dropdown.</p>\n\n<p>The HTML is this:</p>\n\n<pre><code>&lt;div unselectable=\"on\" class=\"k-widget k-multiselect k-header\" style=\"\" title=\"\"&gt;\n  &lt;div unselectable=\"on\" class=\"k-multiselect-wrap k-floatwrap\"&gt;\n    &lt;ul class=\"k-reset\" unselectable=\"on\" role=\"listbox\"&gt;&lt;/ul&gt;\n    &lt;input style=\"width: 25px\" class=\"k-input k-readonly\" accesskey=\"\" autocomplete=\"off\" role=\"listbox\" aria-expanded=\"false\" tabindex=\"0\" aria-owns=\"\" aria-disabled=\"false\" aria-readonly=\"false\" aria-busy=\"false\" aria-activedescendant=\"28dfc7ec-69a2-4a95-ba29-1f94e899c7e3\"&gt;\n    &lt;span class=\"k-icon k-loading k-loading-hidden\"&gt;&lt;/span&gt;\n  &lt;/div&gt;\n  &lt;div data-bind=\"source: getTreeValues, value: selectedCrmAttributes.DYN_\" data-text-field=\"name_i18n\" data-value-field=\"attributeId\" data-value-primitive=\"false\" data-auto-bind=\"true\" data-role=\"interestselect\" multiple=\"multiple\" style=\"display: none;\" aria-disabled=\"false\" aria-readonly=\"false\"&gt;\n    &lt;option value=\"DYN_#76ed2b3f-4d64-4d07-8ba7-ab6f133e0c70\"&gt;one.csv&lt;/option&gt;\n    &lt;option value=\"DYN_#6f914af1-ba58-4c40-99fe-e874bdf9c47b\"&gt;two.csv&lt;/option&gt;\n    &lt;option value=\"DYN_#4cd908d0-6c61-4a15-84e7-f113aa7a8ed4\"&gt;three.csv&lt;/option&gt;\n    &lt;option value=\"DYN_#c137cfad-81af-4164-90b1-a518a7595baa\"&gt;four.csv&lt;/option&gt;\n   &lt;/div&gt;\n   &lt;span style=\"font-family: &amp;quot;Helvetica Neue&amp;quot;,Helvetica,Arial,sans-serif; font-size: 13px; font-stretch: normal; font-style: normal; font-weight: 300; letter-spacing: normal; text-transform: none; line-height: 17.0333px; position: absolute; visibility: hidden; top: -3333px; left: -3333px;\"&gt;&lt;/span&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I have tried to select the option by this way</p>\n\n<pre><code>And(/^selecting (.*) from (.*)$/) do |item, selection|\n  find('.dgr-dimensions-row', :text=&gt;selection).find('.k-widget.k-multiselect.k-header').click\n  #expect(page).to have_content(item) -&gt; returns true\n  select(item)\nend\n</code></pre>\n\n<p>Where the item is the option i want to select and selection is filter from where I want to select the item. </p>\n\n<p>Example: If I have a filter File and the options are one, two, three, four. \nThen the selection is <strong>File</strong> and the item is <strong>one</strong> for example.</p>\n\n<p>I'm using</p>\n\n<pre><code>cucumber 2.1.0\nruby 2.1.6\nnokogiri 1.6.6.2\ncapybara 2.4.4\nselenium-webdriver 2.47.1 \n</code></pre>\n\n<p>Thanks in advance!</p>\n\n<p><strong>EDITED</strong></p>\n\n<p>I would like to select the option by text, that the ruby step can be reusable. I have many similar fields like this one and it would be useful if I can reuse the same step. </p>\n\n<p>Picture: <a href=\"https://i.stack.imgur.com/AKnQW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AKnQW.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>EDITED 2</strong></p>\n\n<pre><code>&lt;ul unselectable=\"on\" class=\"k-list k-reset\" tabindex=\"-1\" aria-hidden=\"true\" aria-live=\"polite\" data-role=\"staticlist\" role=\"listbox\" style=\"overflow: auto; height: auto;\"&gt;\n  &lt;li tabindex=\"-1\" role=\"option\" unselectable=\"on\" class=\"k-item k-state-focused\" data-offset-index=\"0\" id=\"96c13cd6-8365-4e73-a134-6395988822f7\"&gt;one.csv&lt;/li&gt;\n  &lt;li tabindex=\"-1\" role=\"option\" unselectable=\"on\" class=\"k-item\" data-offset-index=\"1\"&gt;two.csv&lt;/li&gt;\n  &lt;li tabindex=\"-1\" role=\"option\" unselectable=\"on\" class=\"k-item\" data-offset-index=\"2\"&gt;three.csv&lt;/li&gt;\n  &lt;li tabindex=\"-1\" role=\"option\" unselectable=\"on\" class=\"k-item\" data-offset-index=\"3\"&gt;four.csv&lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 3548, "user_id": 1381240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VglOh.jpg?s=128&g=1", "display_name": "Dusht", "link": "https://stackoverflow.com/users/1381240/dusht"}, "is_accepted": true, "score": 3, "last_activity_date": 1450252842, "last_edit_date": 1495540337, "creation_date": 1450252842, "answer_id": 34306702, "question_id": 34306649, "link": "https://stackoverflow.com/questions/34306649/rails-unable-to-validate-the-presence-of-name/34306702#34306702", "title": "Rails unable to validate the presence of name", "body": "<p>You are not getting error, because it is not <code>nil</code>. Understand the difference between <code>nil</code> and <code>blank</code> <a href=\"https://stackoverflow.com/a/888877/1381240\">here</a></p>\n\n<p>You need to provide validation like this to avoid having blank values:</p>\n\n<pre><code>validates :name, presence: true, allow_blank: false\n</code></pre>\n\n<p>Hope it helps!</p>\n"}, {"comments": [{"owner": {"reputation": 3548, "user_id": 1381240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VglOh.jpg?s=128&g=1", "display_name": "Dusht", "link": "https://stackoverflow.com/users/1381240/dusht"}, "edited": false, "score": 0, "creation_date": 1450258116, "post_id": 34306716, "comment_id": 56358035, "body": "<code>&quot;   &quot;.blank?</code> would results <code>true</code>. So <code>allow_blank: false</code> would be sufficient. You may try this in console."}, {"owner": {"reputation": 53, "user_id": 5631967, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e133cb88719b01e7560a31c92f205822?s=128&d=identicon&r=PG&f=1", "display_name": "thermobeelearns", "link": "https://stackoverflow.com/users/5631967/thermobeelearns"}, "edited": false, "score": 1, "creation_date": 1450258146, "post_id": 34306716, "comment_id": 56358067, "body": "Thank you for the input. I&#39;ll keep this in mind as I move deeper into the validation process."}, {"owner": {"reputation": 6569, "user_id": 371530, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UJz1r.jpg?s=128&g=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/371530/robin"}, "reply_to_user": {"reputation": 3548, "user_id": 1381240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VglOh.jpg?s=128&g=1", "display_name": "Dusht", "link": "https://stackoverflow.com/users/1381240/dusht"}, "edited": false, "score": 1, "creation_date": 1450258342, "post_id": 34306716, "comment_id": 56358196, "body": "@Dusht: Actually true. Thanks for the hint :-)"}], "tags": [], "owner": {"reputation": 6569, "user_id": 371530, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UJz1r.jpg?s=128&g=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/371530/robin"}, "is_accepted": false, "score": 1, "last_activity_date": 1450258353, "last_edit_date": 1450258353, "creation_date": 1450252912, "answer_id": 34306716, "question_id": 34306649, "link": "https://stackoverflow.com/questions/34306649/rails-unable-to-validate-the-presence-of-name/34306716#34306716", "title": "Rails unable to validate the presence of name", "body": "<p>The problem is, that <code>presence: true</code> validate if the attribute is not <code>nil</code>. You need to use <code>allow_blank</code> to validate if a string is empty or not.</p>\n\n<pre><code>validates :name, presence: true, allow_blank: false\n</code></pre>\n\n<p>Check out the <a href=\"http://api.rubyonrails.org/classes/ActiveModel/Validations/ClassMethods.html#method-i-validates\" rel=\"nofollow\">API documentation</a> about this topic.</p>\n"}], "owner": {"reputation": 53, "user_id": 5631967, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e133cb88719b01e7560a31c92f205822?s=128&d=identicon&r=PG&f=1", "display_name": "thermobeelearns", "link": "https://stackoverflow.com/users/5631967/thermobeelearns"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 34306702, "answer_count": 2, "score": 0, "last_activity_date": 1450258353, "creation_date": 1450252650, "last_edit_date": 1450252849, "question_id": 34306649, "link": "https://stackoverflow.com/questions/34306649/rails-unable-to-validate-the-presence-of-name", "title": "Rails unable to validate the presence of name", "body": "<p>I am trying to write a validation test for the name attribute in order to check if its present. My user_test.rb file: </p>\n\n<pre><code>require 'test_helper'\n\nclass UserTest &lt; ActiveSupport::TestCase\n\n  def setup\n    @user = User.new(name: \"Example User\", email: \"user@example.com\")\n  end\n\n  test \"should be valid\" do\n    assert @user.valid?\n  end\n\n  test \"name should be present\" do\n    @user.name = \" \"\n    assert_not @user.valid?\n  end\n\nend\n</code></pre>\n\n<p>My user.rb file: </p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  validates(:name, presence: true)\nend\n</code></pre>\n\n<p>My I/O in the console when testing:</p>\n\n<pre><code>2.2.1 :007 &gt; user = User.new(name: \"\", email: \"ex@example.com\")\n =&gt; #&lt;User id: nil, name: \"\", email: \"ex@example.com\", created_at: nil, updated_at: nil&gt; \n2.2.1 :008 &gt; user.valid?\n =&gt; true \n</code></pre>\n"}, {"tags": ["ruby", "linux", "ubuntu"], "owner": {"reputation": 11, "user_id": 5685422, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-n9GM52WEdyQ/AAAAAAAAAAI/AAAAAAAAAec/9SVmHH2dUEY/photo.jpg?sz=128", "display_name": "roundthecorner", "link": "https://stackoverflow.com/users/5685422/roundthecorner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1450252569, "creation_date": 1450252569, "question_id": 34306620, "link": "https://stackoverflow.com/questions/34306620/error-installing-bdb-on-ubuntu-15-04-64-bit-gemextbuilderror-error-fai", "title": "Error Installing BDB on Ubuntu 15.04 (64 Bit), &quot;Gem::Ext::BuildError: ERROR: Failed to build gem native extension.&quot;", "body": "<p>OS: Ubuntu 15.04 (64 Bit)</p>\n\n<p>Ruby Version: ruby 1.9.3p551 (2014-11-13 revision 48407) [x86_64-linux]</p>\n\n<p>While running gem install bdb, i get the following error, can anyone point out the possible cause of the error, or provide pointers towards resolution?</p>\n\n<pre><code>Error installing bdb:\nError: Failed to build gem native extension\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n/usr/share/rvm/rubies/ruby-1.9.3-p551/bin/ruby -r ./siteconf20151216-2783-1lobclo.rb extconf.rb\nchecking for db_version() in -ldb-5.1... no\nchecking for db_version() in -ldb-5.0... no\nchecking for db_version() in -ldb-4.9... no\nchecking for db_version() in -ldb-4.8... no\nchecking for db_version() in -ldb-4.7... no\nchecking for db_version() in -ldb-4.6... no\nchecking for db_version() in -ldb-4.5... no\nchecking for db_version() in -ldb-4.4... no\nchecking for db_version() in -ldb-4.3... no\nchecking for db_version() in -ldb-4.2... no\nWriting bdb_aux._c (defines), this takes a while\ndon't know how to handle DB_DEGREE_2 DB_READ_COMMITTED, guessing UINT\ndon't know how to handle DB_DIRTY_READ DB_READ_UNCOMMITTED, guessing UINT\ndon't know how to handle DB_HEAP_RID_SZ (sizeof(db_pgno_t) + sizeof(db_indx_t)), guessing UINT\n\nwrote 501 defines\ncreating Makefile\n\nmake  clean\n\nmake\ncompiling bdb.c\nbdb.c: In function \u2018raise_error\u2019:\nbdb.c:82:2: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]\n  VALUE cl;\n  ^\nbdb.c:84:0: warning: \"eDbE_create\" redefined\n #define eDbE_create(n,c) case DB_##n: cl = eDbE_##c; break;\n ^\nbdb.c:50:0: note: this is the location of the previous definition\n #define eDbE_create(n,c) VALUE eDbE_##c;\n ^\nbdb.c: In function \u2018db_open\u2019:\nbdb.c:266:9: warning: implicit declaration of function \u2018raise\u2019 [-Wimplicit-function-declaration]\n         raise(0, \"txn is closed\");\n         ^\nbdb.c: In function \u2018db_get_re_len\u2019:\nbdb.c:330:2: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]\n  int rv = dbh-&gt;db-&gt;get_re_len(dbh-&gt;db,&amp;re_len);\n  ^\nbdb.c: In function \u2018db_set_encrypt\u2019:\nbdb.c:1074:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]\n     u_int32_t flags=0x00000001; //DB_ENCRYPT_AES\n     ^\nIn file included from /usr/share/rvm/rubies/ruby-1.9.3-p551/include/ruby-1.9.1/ruby.h:32:0,\n                 from ./bdb.h:5,\n                 from bdb.c:8:\nbdb.c: In function \u2018assoc_rescue\u2019:\n/usr/share/rvm/rubies/ruby-1.9.3-p551/include/ruby-1.9.1/ruby/ruby.h:909:30: warning: format not a string literal and no format arguments [-Wformat-security]\n #define RSTRING(obj) (R_CAST(RString)(obj))\n                              ^\n/usr/share/rvm/rubies/ruby-1.9.3-p551/include/ruby-1.9.1/ruby/ruby.h:903:30: note: in definition of macro \u2018R_CAST\u2019\n #define R_CAST(st)   (struct st*)\n                              ^\n/usr/share/rvm/rubies/ruby-1.9.3-p551/include/ruby-1.9.1/ruby/ruby.h:679:6: note: in expansion of macro \u2018RSTRING\u2019\n      RSTRING(str)-&gt;as.heap.ptr)\n      ^\nbdb.c:1200:11: note: in expansion of macro \u2018RSTRING_PTR\u2019\n   rb_warn(RSTRING_PTR(message));\n           ^\nbdb.c: In function \u2018assoc_callback\u2019:\nbdb.c:1248:18: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\n       for (i=0; i&lt;skey-&gt;size; i++) {\n                  ^\nbdb.c:1249:30: warning: pointer of type \u2018void *\u2019 used in arithmetic [-Wpointer-arith]\n         assoc_key(skey-&gt;data + i * sizeof(DBT), (VALUE)RARRAY_PTR(keys)[i]);\n                              ^\nbdb.c: In function \u2018db_stat\u2019:\nbdb.c:2141:3: warning: enumeration value \u2018DB_HEAP\u2019 not handled in switch [-Wswitch]\n   switch(dbtype) {\n   ^\nbdb.c: In function \u2018env_txn_stat\u2019:\nbdb.c:2299:14: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\n   for (i=0; i&lt;statp-&gt;st_nactive; i++) {\n              ^\nbdb.c: In function \u2018env_get_data_dirs\u2019:\nbdb.c:2751:2: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]\n  VALUE rb_data_dirs = rb_ary_new2(ln);\n  ^\nbdb.c: In function \u2018env_set_encrypt\u2019:\nbdb.c:2912:3: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]\n   u_int32_t flags=0x00000001; //DB_ENCRYPT_AES\n   ^\nbdb.c: In function \u2018env_repmgr_set_local_site\u2019:\nbdb.c:3005:15: error: \u2018DB_ENV\u2019 has no member named \u2018repmgr_set_local_site\u2019\n   rv = eh-&gt;env-&gt;repmgr_set_local_site(eh-&gt;env, StringValuePtr(host), NUM2UINT(port), 0);\n               ^\nbdb.c: In function \u2018env_repmgr_add_remote_site\u2019:\nbdb.c:3024:15: error: \u2018DB_ENV\u2019 has no member named \u2018repmgr_add_remote_site\u2019\n   rv = eh-&gt;env-&gt;repmgr_add_remote_site(eh-&gt;env, StringValuePtr(host), NUM2UINT(port), &amp;eidp, 0);\n               ^\nbdb.c: In function \u2018env_get_lg_bsize\u2019:\nbdb.c:3119:3: warning: implicit declaration of function \u2018UINT2FIX\u2019 [-Wimplicit-function-declaration]\n   return UINT2FIX(size);\n   ^\nbdb.c: In function \u2018Init_bdb\u2019:\nbdb.c:3331:0: warning: \"eDbE_create\" redefined\n #define eDbE_create(n,c) eDbE_##c = rb_define_class_under(mBdb, #c, eDbError);\n ^\nbdb.c:84:0: note: this is the location of the previous definition\n #define eDbE_create(n,c) case DB_##n: cl = eDbE_##c; break;\n ^\nbdb.c:3424:0: warning: \"ENV_LOG_CONFIG_FUNC\" redefined\n #define ENV_LOG_CONFIG_FUNC(name,cnst) \\\n ^\nbdb.c:2533:0: note: this is the location of the previous definition\n #define ENV_LOG_CONFIG_FUNC( name, cnst) \\\n ^\nMakefile:206: recipe for target 'bdb.o' failed\nmake: *** [bdb.o] Error 1\n\nmake failed, exit code 2\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1450251453, "post_id": 34306260, "comment_id": 56354242, "body": "<code>&lt;%= debug(@object.inspect) %&gt;</code>"}, {"owner": {"reputation": 2452, "user_id": 1594060, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d93aa9c4456a600e2fdc404588726354?s=128&d=identicon&r=PG", "display_name": "Josh Rumbut", "link": "https://stackoverflow.com/users/1594060/josh-rumbut"}, "edited": false, "score": 2, "creation_date": 1450251454, "post_id": 34306260, "comment_id": 56354245, "body": "In this question an SO user has actually posted a Ruby implementation of print_r: <a href=\"http://stackoverflow.com/questions/491435/is-there-equivalent-for-phps-print-r-in-ruby-rails\" title=\"is there equivalent for phps print r in ruby rails\">stackoverflow.com/questions/491435/&hellip;</a>"}], "owner": {"reputation": 167, "user_id": 2600068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71fbce7036941e567dc2a3f98323fbad?s=128&d=identicon&r=PG", "display_name": "anujeet", "link": "https://stackoverflow.com/users/2600068/anujeet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "closed_date": 1450251509, "answer_count": 0, "score": 0, "last_activity_date": 1450251133, "creation_date": 1450251133, "question_id": 34306260, "link": "https://stackoverflow.com/questions/34306260/print-query-object-in-controller", "closed_reason": "Duplicate", "title": "Print query object in controller", "body": "<p>I'm new to Rails,I'm trying to print a query object as we do <code>print_r</code> in PHP\nI've seen rails console option,\nprinting in view by <code>&lt;%= debug(@object) %&gt;</code>\nbut didn't find any option how i can get the contents correctly of an object</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rake", "rake-task"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1450251376, "post_id": 34306252, "comment_id": 56354197, "body": "How do you call rake task?"}, {"owner": {"reputation": 7975, "user_id": 1577357, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9db0054df76cc4b80888ff713527a652?s=128&d=identicon&r=PG", "display_name": "Zulhilmi Zainudin", "link": "https://stackoverflow.com/users/1577357/zulhilmi-zainudin"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1450251950, "post_id": 34306252, "comment_id": 56354489, "body": "Using AJAX. The AJAX url to a route inside my controller. I have this inside my controller action: <code>%x(bundle exec rake create_orders)</code>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1450252427, "post_id": 34306252, "comment_id": 56354705, "body": "That\u2019s the answer. <code>%x</code> runs a command in a subshell. To share application resources one should call rake tasks with <code>Rake::Task[...].invoke</code>."}, {"owner": {"reputation": 7975, "user_id": 1577357, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9db0054df76cc4b80888ff713527a652?s=128&d=identicon&r=PG", "display_name": "Zulhilmi Zainudin", "link": "https://stackoverflow.com/users/1577357/zulhilmi-zainudin"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1450252626, "post_id": 34306252, "comment_id": 56354816, "body": "The problem is, when I use <code>Rake::Task[...].invoke</code>, I always get this error <code>NameError (uninitialized constant MyController::Rake)</code> which results my rake task not running at all."}, {"owner": {"reputation": 7975, "user_id": 1577357, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9db0054df76cc4b80888ff713527a652?s=128&d=identicon&r=PG", "display_name": "Zulhilmi Zainudin", "link": "https://stackoverflow.com/users/1577357/zulhilmi-zainudin"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1450252779, "post_id": 34306252, "comment_id": 56354892, "body": "Only inside the action or at the very top of the controller?"}, {"owner": {"reputation": 7975, "user_id": 1577357, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9db0054df76cc4b80888ff713527a652?s=128&d=identicon&r=PG", "display_name": "Zulhilmi Zainudin", "link": "https://stackoverflow.com/users/1577357/zulhilmi-zainudin"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1450252986, "post_id": 34306252, "comment_id": 56354998, "body": "Ok, I put it on very top of my controller. Now I get this error: <code>RuntimeError (Don&#39;t know how to build task &#39;create_orders&#39;)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 7975, "user_id": 1577357, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9db0054df76cc4b80888ff713527a652?s=128&d=identicon&r=PG", "display_name": "Zulhilmi Zainudin", "link": "https://stackoverflow.com/users/1577357/zulhilmi-zainudin"}, "is_accepted": true, "score": 1, "last_activity_date": 1450253636, "creation_date": 1450253636, "answer_id": 34306883, "question_id": 34306252, "link": "https://stackoverflow.com/questions/34306252/how-to-see-rake-task-puts-logs-inside-rails-server/34306883#34306883", "title": "How to see rake task puts / logs inside rails server?", "body": "<p>I put this on very top of my controller:</p>\n\n<pre><code>require 'rake'\nRails.application.load_tasks\n</code></pre>\n\n<p>And inside the action that calling the rake task, I replaced <code>%x(bundle exec rake task_name)</code> with <code>Rake::Task[\"task_name\"].invoke</code>.</p>\n\n<p>Thanks mudasobwa for the help!</p>\n"}], "owner": {"reputation": 7975, "user_id": 1577357, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9db0054df76cc4b80888ff713527a652?s=128&d=identicon&r=PG", "display_name": "Zulhilmi Zainudin", "link": "https://stackoverflow.com/users/1577357/zulhilmi-zainudin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 696, "favorite_count": 0, "accepted_answer_id": 34306883, "answer_count": 1, "score": 0, "last_activity_date": 1450253636, "creation_date": 1450251110, "question_id": 34306252, "link": "https://stackoverflow.com/questions/34306252/how-to-see-rake-task-puts-logs-inside-rails-server", "title": "How to see rake task puts / logs inside rails server?", "body": "<p>I've one rake task like this:</p>\n\n<pre><code>task :create_orders, [:my_param] =&gt; :environment do |t, args|\n    puts \"hello\"\n    Rails.logger.debug \"hey\"\nend\n</code></pre>\n\n<p>When I called the rake task from a button inside my view, everything inside the rake task run like what I want.</p>\n\n<p>But, I can't see what I've put inside the <code>puts</code> and <code>Rails.logger.debug</code> inside my terminal where I run the <code>rails server</code> command to start the localhost server.</p>\n\n<p>I also try to run <code>tail -f log/development.log</code> inside my project folder but nothing <code>puts</code> or <code>Rails.logger.debug</code> statements from my rake task showing up.</p>\n\n<p>What should I do so that I can see what I've put inside <code>puts</code> and <code>Rails.logger.debug</code> statements inside my <code>rails server</code> terminal?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 312231, "user_id": 2225682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4958f4712d94ab82fe55fa471308e4b5?s=128&d=identicon&r=PG", "display_name": "falsetru", "link": "https://stackoverflow.com/users/2225682/falsetru"}, "edited": false, "score": 0, "creation_date": 1450248675, "post_id": 34305561, "comment_id": 56352895, "body": "Strings are compared with lexicographical order. (similar to how words are ordered in dictionary book). Length only matter when leading parts are same: <code>&#39;ban&#39; &lt; &#39;banner&#39;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 19325, "user_id": 67505, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/094c0ec476b95ed7619d6a4cb918da78?s=128&d=identicon&r=PG", "display_name": "Chen Kinnrot", "link": "https://stackoverflow.com/users/67505/chen-kinnrot"}, "is_accepted": false, "score": 3, "last_activity_date": 1450248806, "creation_date": 1450248806, "answer_id": 34305651, "question_id": 34305561, "link": "https://stackoverflow.com/questions/34305561/what-is-the-combined-comparision-operator-in-ruby/34305651#34305651", "title": "What is the combined comparision operator in Ruby?", "body": "<p>When comparing two strings, most of programming languages will return the answer to the question \"who will you find first in a standard dictionary ?\"\nThis is also called \"lexicographical order\" </p>\n"}, {"tags": [], "owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1450249723, "creation_date": 1450249723, "answer_id": 34305887, "question_id": 34305561, "link": "https://stackoverflow.com/questions/34305561/what-is-the-combined-comparision-operator-in-ruby/34305887#34305887", "title": "What is the combined comparision operator in Ruby?", "body": "<p>String compare with lexicographical order. <a href=\"http://ruby-doc.org/core-2.2.0/String.html#method-i-3C-3D-3E\" rel=\"nofollow\">Ruby-Doc String</a></p>\n\n<p><em>As the mentioned in ruby official documentation\nIf the strings are of different lengths, and the strings are equal when compared up to the shortest length, then the longer string is considered greater than the shorter one.\n<code>&lt;=&gt;</code> is the basis for the methods <code>&lt;, &lt;=, &gt;, &gt;=, and between?,</code> included from module Comparable. The method <code>String#==</code> does not use Comparable<code>#==</code>.</em></p>\n\n<pre><code>\"abcdef\" &lt;=&gt; \"abcde\"     #=&gt; 1\n\"abcdef\" &lt;=&gt; \"abcdef\"    #=&gt; 0\n\"abcdef\" &lt;=&gt; \"abcdefg\"   #=&gt; -1\n\"abcdef\" &lt;=&gt; \"ABCDEF\"    #=&gt; 1\n</code></pre>\n\n<p>Hope this help you ...</p>\n"}, {"comments": [{"owner": {"reputation": 197, "user_id": 2767743, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/eRMKo.jpg?s=128&g=1", "display_name": "Bishisht Bhatta", "link": "https://stackoverflow.com/users/2767743/bishisht-bhatta"}, "edited": false, "score": 0, "creation_date": 1450262559, "post_id": 34305893, "comment_id": 56361164, "body": "Actually I didn&#39;t checked wikipedia by myself. While googling i found an answer on quora and quoted it. :)"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1450249735, "creation_date": 1450249735, "answer_id": 34305893, "question_id": 34305561, "link": "https://stackoverflow.com/questions/34305561/what-is-the-combined-comparision-operator-in-ruby/34305893#34305893", "title": "What is the combined comparision operator in Ruby?", "body": "<p>It is hard to believe that nowadays one would prefer Wikipedia to lookup answers on this kind of question. Ruby has a great documentation: <a href=\"http://ruby-doc.org/core-2.2.3/String.html#method-i-3C-3D-3E\" rel=\"nofollow\"><code>String#&lt;=&gt;</code></a>.\nBy clicking on \u201ctoggle source\u201d in the upper right corner of this description, one might easily see that the \u201cdefault\u201d comparison is being done with <code>rb_str_cmp</code>, which is apparently using \u201clexicographical order\u201d for sorting.\nOn the other hand, <code>&lt;=&gt;</code> operator is used in all the <code>Comparable</code> scenarios, hence there is a possibility to easily modify sort behaviour for string lists:</p>\n\n<pre><code>class String\n  def &lt;=&gt; other\n    other = other.to_s unless other.is_a? String # or raise an exception\n    self.length &lt;=&gt; other.length\n  end\nend\n\n[\"War &amp; Peace\", \"Zoo\", \"Aleph\", \"The Nest of Gentry\"].sort\n#\u21d2 [\"Zoo\", \"Aleph\", \"War &amp; Peace\", \"The Nest of Gentry\"]\n</code></pre>\n\n<p>In the latter example sorting is being done by the length.</p>\n"}], "owner": {"reputation": 197, "user_id": 2767743, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/eRMKo.jpg?s=128&g=1", "display_name": "Bishisht Bhatta", "link": "https://stackoverflow.com/users/2767743/bishisht-bhatta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "closed_date": 1450252128, "answer_count": 3, "score": 0, "last_activity_date": 1450249735, "creation_date": 1450248532, "question_id": 34305561, "link": "https://stackoverflow.com/questions/34305561/what-is-the-combined-comparision-operator-in-ruby", "closed_reason": "Duplicate", "title": "What is the combined comparision operator in Ruby?", "body": "<p>I have </p>\n\n<pre><code>book_1 = \"War &amp; Peace\"\nbook_2 = \"The Nest of Gentry\"\nputs book_1.length\nputs book_2.length\nprint book_1 &lt;=&gt; book_2    \n</code></pre>\n\n<p>returns a value of 1? Wikipedia says \"If the left argument is greater than the right argument, the operator returns 1.\". On what basis it is greater than or less than? I have also printed the length of each string, and the first one is smaller than second one. please explain.</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 2, "creation_date": 1450247339, "post_id": 34305254, "comment_id": 56352307, "body": "simplest I can think of is regex itself"}, {"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 1, "creation_date": 1450247534, "post_id": 34305254, "comment_id": 56352400, "body": "using regex: <code>str[&#47;#{@begin}(.*?)#{@end}&#47;m, 1]</code>"}, {"owner": {"reputation": 886, "user_id": 4125009, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-9-yinaxunqA/AAAAAAAAAAI/AAAAAAAAA3k/hi_eVEvvK1I/photo.jpg?sz=128", "display_name": "Andrew Rukin", "link": "https://stackoverflow.com/users/4125009/andrew-rukin"}, "reply_to_user": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 0, "creation_date": 1450250002, "post_id": 34305254, "comment_id": 56353510, "body": "it returns a string! Why whould I need a string?"}, {"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 1, "creation_date": 1450250603, "post_id": 34305254, "comment_id": 56353810, "body": "It returns the substring between two patterns. Once you have it you can do <code>split</code> to convert it into array, or similar operations. Though I do not have answer for why would you need any particular data structure."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1450250655, "post_id": 34305254, "comment_id": 56353839, "body": "What is complicated with <code>str.scan &#47;(?&lt;=#{@begin}).*?(?=#{@end})&#47;</code>?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1450252310, "post_id": 34305254, "comment_id": 56354637, "body": "&quot;Regex has been invented to make this task as complicated as possible.&quot;. No, it wasn&#39;t. Regex are extremely flexible and powerful, and terribly overused when people first encounter them, and they&#39;re only as complicated as someone wants to make them. Simple ones are extremely powerful and very easy to learn."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1450252441, "post_id": 34305254, "comment_id": 56354710, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. We need a better example of your input data and what you expect from it and what you&#39;ve tried writing."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1450252518, "post_id": 34305254, "comment_id": 56354752, "body": "Judging from your English skills, I am not sure if you really intend what you wrote.  &quot;All substrings between ...A and B&quot; implies that there are multiple (ways to take) substrings. For example, if you have string <code>&quot;fooAbarAbazBbooB&quot;</code>, then your substrings would be <code>&quot;baz&quot;</code>, <code>&quot;barAbaz&quot;</code>, <code>&quot;bazBboo&quot;</code>. Is this what you mean?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1450258439, "post_id": 34305254, "comment_id": 56358266, "body": "I assume your comment, <code>&quot;it returns a string!...</code>, was directed at shivam. shivam, however, will not necessarily be notified by SO if you don&#39;t include &#39;@shivam&#39; in the text."}], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1450274085, "last_edit_date": 1450274085, "creation_date": 1450249017, "answer_id": 34305694, "question_id": 34305254, "link": "https://stackoverflow.com/questions/34305254/how-to-extract-substrings-without-regular-expressions/34305694#34305694", "title": "How to extract substrings without regular expressions", "body": "<p>This is painful when it's so easy to do with a regex, but if you must, here's a non-regex solution:</p>\n\n<pre><code>str = \"Now is the time @begin to see @end where @begin things @end stand.\"\n\nappend = nil\nstr.split.each_with_object([]) do |word, arr|\n  case word\n  when \"@begin\"\n    append = [] unless append\n  when \"@end\"\n    arr &lt;&lt; append unless append.nil? || append.empty?\n    append = nil\n  else\n    append &lt;&lt; word if append\n  end\nend.map { |arr| arr.join(' ') }\n  #=&gt; [\"to see\", \"things\"]\n</code></pre>\n\n<p>The steps:</p>\n\n<pre><code>append = nil\nb = str.split\n  #=&gt; [\"Now\", \"is\", \"the\", \"time\", \"@begin\", \"to\", \"see\", \"@end\", \"where\",\n  #    \"@begin\", \"things\", \"@end\", \"stand.\"] \nc = b.each_with_object([]) do |word, arr|\n  puts \"word=#{word}, arr=#{arr}, append=#{append ? append : 'nil'}\"\n  case word\n  when \"@begin\"\n    append = [] unless append\n    puts \"  append set to []\" unless append\n  when \"@end\"\n    puts \"  #{arr} &lt;&lt; #{append}\" unless append.nil? || append.empty?\n    arr &lt;&lt; append unless append.nil? || append.empty?\n    append = nil\n    puts \"  Now arr=#{arr}\" unless append.nil? || append.empty?        \n    puts \"  append set to nil\"\n  else\n    append &lt;&lt; word if append\n    puts \"  '#{ word }' #{ append ? \"added to append: append=#{append}\" : \"skipped\" }\"\n  end\nend\n  #=&gt; [[\"to\", \"see\"], [\"things\"]]\nc.map { |arr| arr.join(' ') }\n  #=&gt; [\"to see\", \"things\"]\n</code></pre>\n\n<p>The printed messages:</p>\n\n<pre><code>word=Now, arr=[], append=nil\n  'Now' skipped\nword=is, arr=[], append=nil\n  'is' skipped\nword=the, arr=[], append=nil\n  'the' skipped\nword=time, arr=[], append=nil\n  'time' skipped\nword=@begin, arr=[], append=nil\n  append set to []\nword=to, arr=[], append=[]\n  'to' added to append: append=[\"to\"]\nword=see, arr=[], append=[\"to\"]\n  'see' added to append: append=[\"to\", \"see\"]\nword=@end, arr=[], append=[\"to\", \"see\"]\n  [] &lt;&lt; [\"to\", \"see\"]\n  append set to nil\nword=where, arr=[[\"to\", \"see\"]], append=nil\n  'where' skipped\nword=@begin, arr=[[\"to\", \"see\"]], append=nil\n  append set to []\nword=things, arr=[[\"to\", \"see\"]], append=[]\n  'things' added to append: append=[\"things\"]\nword=@end, arr=[[\"to\", \"see\"]], append=[\"things\"]\n  [[\"to\", \"see\"]] &lt;&lt; [\"things\"]\n  append set to nil\nword=stand., arr=[[\"to\", \"see\"], [\"things\"]], append=nil\n  'stand.' skipped\n</code></pre>\n\n<p>Note:</p>\n\n<pre><code>str = \"I @begin to see @end where @begin things @end stand @begin to reason.\"\n  #=&gt; [\"to see\", \"things\"]\nstr = \"I @begin to see @end where @end and @begin things @end stand to reason.\"\n  #=&gt; [\"to see\", \"things\"]\nstr = \"I @begin to see @begin where @end and things @end stand to reason.\"\n  #=&gt; [\"to see where\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1450252534, "post_id": 34305790, "comment_id": 56354763, "body": "Since the question doesn&#39;t provide sample input or output it&#39;s probably better to request that the OP fixes the question so it&#39;s more clear what is wanted. As is it&#39;s not clear."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1450253203, "post_id": 34305790, "comment_id": 56355098, "body": "@theTinMan, on the other hand, you could argue that readers, including the OP, are getting two for the price of one."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1450255278, "post_id": 34305790, "comment_id": 56356263, "body": "It may be nothing to worry about, but there would be a problem if each  <code>begin_string</code> did not have a matching <code>end_sting</code>, or vice-versa, or if pairs of markers were nested, etc."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1450282747, "post_id": 34305790, "comment_id": 56375776, "body": "@CarySwoveland, it&#39;s not a matter of needing volume, it&#39;s a matter of needing answers that are to the point of the question, and that point is not defined well. Questions and answers aren&#39;t merely for the asker, they&#39;re also for people searching for the solution in the future. Poorly asked questions dilute SO. Well asked questions let us point to them and say &quot;There&#39;s your answer along with alternate ideas.&quot;"}], "tags": [], "owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "is_accepted": false, "score": 1, "last_activity_date": 1450249346, "creation_date": 1450249346, "answer_id": 34305790, "question_id": 34305254, "link": "https://stackoverflow.com/questions/34305254/how-to-extract-substrings-without-regular-expressions/34305790#34305790", "title": "How to extract substrings without regular expressions", "body": "<p>You can do it with <a href=\"http://ruby-doc.org/core/String.html#method-i-index\" rel=\"nofollow\">String#index</a> and a loop:</p>\n\n<pre><code>def substrings(text, begin_string, end_string)\n  offset = 0\n  strings = []\n  while start_offset = text.index(begin_string, offset)\n    contents_offset = start_offset + begin_string.size\n    end_offset = text.index(end_string, contents_offset)\n    strings &lt;&lt; text[contents_offset...end_offset]\n    offset = end_offset + end_string.size\n  end\n  strings\nend\n\nstr = \"1(2)34(5)()\"\np substrings(str, \"(\", \")\")  # =&gt; [\"2\", \"5\", \"\"]\n</code></pre>\n\n<p>As you can see, Cary Swoveland and I came up with different answers.  His answer treats spaces specially and splits on them.  Since your question did not provide sample input and output, it is hard to judge which answer is better.</p>\n"}], "owner": {"reputation": 886, "user_id": 4125009, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-9-yinaxunqA/AAAAAAAAAAI/AAAAAAAAA3k/hi_eVEvvK1I/photo.jpg?sz=128", "display_name": "Andrew Rukin", "link": "https://stackoverflow.com/users/4125009/andrew-rukin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "closed_date": 1450276110, "answer_count": 2, "score": -2, "last_activity_date": 1450274085, "creation_date": 1450247134, "last_edit_date": 1450252208, "question_id": 34305254, "link": "https://stackoverflow.com/questions/34305254/how-to-extract-substrings-without-regular-expressions", "closed_reason": "Needs details or clarity", "title": "How to extract substrings without regular expressions", "body": "<p>I have a text and want to extract all substrings from it that are between <code>@begin = 'Some Text1'</code> and <code>@end = 'Some Text2'</code>. Regex makes this task as complicated as possible. Is there a simple function in Ruby like this?</p>\n\n<pre><code>def substrings (text2SearchIn, begin, end)\n  returns array of results\nend\n</code></pre>\n"}, {"tags": ["ruby", "hash"], "answers": [{"comments": [{"owner": {"reputation": 3596, "user_id": 2443687, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1da01ca60576663e27ab608fc4dbbbb2?s=128&d=identicon&r=PG", "display_name": "Carlos Martinez", "link": "https://stackoverflow.com/users/2443687/carlos-martinez"}, "edited": false, "score": 0, "creation_date": 1450252472, "post_id": 34304700, "comment_id": 56354725, "body": "This is great, much cleaner than what I was trying, thanks a lot!"}], "tags": [], "owner": {"reputation": 312231, "user_id": 2225682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4958f4712d94ab82fe55fa471308e4b5?s=128&d=identicon&r=PG", "display_name": "falsetru", "link": "https://stackoverflow.com/users/2225682/falsetru"}, "is_accepted": true, "score": 7, "last_activity_date": 1450247530, "last_edit_date": 1450247530, "creation_date": 1450244392, "answer_id": 34304700, "question_id": 34304550, "link": "https://stackoverflow.com/questions/34304550/select-a-value-from-a-nested-hash-with-unknown-keys/34304700#34304700", "title": "Select a value from a nested hash with unknown keys", "body": "<p><a href=\"http://ruby-doc.org/core/Hash.html#method-i-values\" rel=\"noreferrer\"><code>Hash#values</code></a> returns values only (without keys). And by using <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-find\" rel=\"noreferrer\"><code>Enumerable#find</code></a>, you will get the first matched item instead of an array that contains a single item.</p>\n\n<pre><code>@champion_data['data'].values.find { |champ_data|\n  champ_data['key'] == '266'\n}\n# =&gt; {\"id\"=&gt;\"Aatrox\", \"key\"=&gt;\"266\", \"name\"=&gt;\"Aatrox\"}\n</code></pre>\n\n<hr>\n\n<pre><code>def get_champion_name_from_id(key)\n  key = key.to_s\n  @champion_data['data'].values.find { |champ_data|\n    champ_data['key'] == key\n  }\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3596, "user_id": 2443687, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1da01ca60576663e27ab608fc4dbbbb2?s=128&d=identicon&r=PG", "display_name": "Carlos Martinez", "link": "https://stackoverflow.com/users/2443687/carlos-martinez"}, "edited": false, "score": 0, "creation_date": 1450252333, "post_id": 34304849, "comment_id": 56354652, "body": "This returns the same result, another nested hash, which is not what I&#39;m looking for"}], "tags": [], "owner": {"reputation": 883, "user_id": 2310942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6875f4d0ffcadb39ce63ba805a79d6e?s=128&d=identicon&r=PG", "display_name": "Triveni Badgujar", "link": "https://stackoverflow.com/users/2310942/triveni-badgujar"}, "is_accepted": false, "score": 0, "last_activity_date": 1450252661, "last_edit_date": 1450252661, "creation_date": 1450245232, "answer_id": 34304849, "question_id": 34304550, "link": "https://stackoverflow.com/questions/34304550/select-a-value-from-a-nested-hash-with-unknown-keys/34304849#34304849", "title": "Select a value from a nested hash with unknown keys", "body": "<p>You can do it with the <code>select</code> method also:</p>\n\n<pre><code>@champion_data[\"data\"].select do |key, val|\n  @champion_data[\"data\"][key] if @champion_data[\"data\"][key][\"key\"] == \"266\"\nend\n</code></pre>\n"}], "owner": {"reputation": 3596, "user_id": 2443687, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1da01ca60576663e27ab608fc4dbbbb2?s=128&d=identicon&r=PG", "display_name": "Carlos Martinez", "link": "https://stackoverflow.com/users/2443687/carlos-martinez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1874, "favorite_count": 0, "accepted_answer_id": 34304700, "answer_count": 2, "score": 2, "last_activity_date": 1450252661, "creation_date": 1450243717, "last_edit_date": 1450252621, "question_id": 34304550, "link": "https://stackoverflow.com/questions/34304550/select-a-value-from-a-nested-hash-with-unknown-keys", "title": "Select a value from a nested hash with unknown keys", "body": "<p>I have a hash that looks something like this:</p>\n\n<pre><code>hash = { \"data\" =&gt; {\n    \"Aatrox\" =&gt; {\n        \"id\" =&gt; \"Aatrox\",\n        \"key\" =&gt; \"266\",\n        \"name\" =&gt; \"Aatrox\"\n        },\n    \"Ahri\" =&gt; {\n        \"id\" =&gt; \"Ahri\",\n        \"key\" =&gt; \"123\",\n        \"name\" =&gt; \"Ahri\"\n        },\n    \"Another name\" =&gt; {\n        \"id\" =&gt; \"Another name\",\n        \"key\" =&gt; \"12\",\n        \"name\" =&gt; \"Another name\"\n        },\n   }\n}\n</code></pre>\n\n<p>I'm trying to get the value from \"id\" that matches a given key:</p>\n\n<pre><code>def get_champion_name_from_id(key)\n    filtered = @champion_data[\"data\"].select do | key, champ_data |\n        Integer(champ_data[\"key\"]) == key\n    end     \nend\n</code></pre>\n\n<p>I'm using select to get the items that match the block, however, the return value is another hash that looks like this:</p>\n\n<pre><code>{ \n    \"Aatrox\": {\n        \"id\" =&gt; \"Aatrox\",\n        \"key\" =&gt; \"266\",\n        \"name\" =&gt; \"Aatrox\"\n    } \n}\n</code></pre>\n\n<p>How can I avoid this and get just the last nested hash? \nIf the key passed was 266, I want to get this hash:</p>\n\n<pre><code>{\n    \"id\" =&gt; \"Aatrox\",\n    \"key\" =&gt; \"266\",\n    \"name\" =&gt; \"Aatrox\"\n} \n</code></pre>\n\n<p>This hash is the result of a parsed JSON file, so there's no way I can do <code>filtered[\"Aatrox\"]</code> to get a given value.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "facebook", "ruby-on-rails-3", "devise"], "answers": [{"comments": [{"owner": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "edited": false, "score": 0, "creation_date": 1450244021, "post_id": 34304605, "comment_id": 56351102, "body": "I am using windows machine. The auth just return me along string <code>http:&#47;&#47;localhost:3000&#47;?code=AQA5fDoNEqTvJpZ-p</code>"}, {"owner": {"reputation": 5939, "user_id": 1847340, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0e02261c9592b118663ed82e02260166?s=128&d=identicon&r=PG", "display_name": "ferdynator", "link": "https://stackoverflow.com/users/1847340/ferdynator"}, "reply_to_user": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "edited": false, "score": 0, "creation_date": 1450244377, "post_id": 34304605, "comment_id": 56351231, "body": "I don&#39;t know how to access CA certs on Windows tbh. Maybe the second part of my answer helps you."}, {"owner": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "edited": false, "score": 0, "creation_date": 1450245001, "post_id": 34304605, "comment_id": 56351446, "body": "Getting this error now <code>uninitialized constant Users</code>, Just fixed the :ca_file"}, {"owner": {"reputation": 5939, "user_id": 1847340, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0e02261c9592b118663ed82e02260166?s=128&d=identicon&r=PG", "display_name": "ferdynator", "link": "https://stackoverflow.com/users/1847340/ferdynator"}, "reply_to_user": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "edited": false, "score": 0, "creation_date": 1450274994, "post_id": 34304605, "comment_id": 56369969, "body": "plseae update your code in your question. Also it looks to me like the error might be unrelated to your previous issue."}, {"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "reply_to_user": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "edited": false, "score": 0, "creation_date": 1488442235, "post_id": 34304605, "comment_id": 72235015, "body": "@d3bug3r how did you solve the issue? I tried setting an absolute callback_url but I get the following problem. In my <b>Heroku log</b> i get the following <b>callback_url</b>  path=&quot;/users/auth/facebook/callback?code=somecode&quot; I opened a question on stackoverflow, could you please help me? <a href=\"http://stackoverflow.com/questions/42549803/devise-omniauth-facebook-redirect-uri-isnt-an-absolute-uri\" title=\"devise omniauth facebook redirect uri isnt an absolute uri\">stackoverflow.com/questions/42549803/&hellip;</a>"}], "tags": [], "owner": {"reputation": 5939, "user_id": 1847340, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0e02261c9592b118663ed82e02260166?s=128&d=identicon&r=PG", "display_name": "ferdynator", "link": "https://stackoverflow.com/users/1847340/ferdynator"}, "is_accepted": false, "score": 0, "last_activity_date": 1450244316, "last_edit_date": 1450244316, "creation_date": 1450243976, "answer_id": 34304605, "question_id": 34304444, "link": "https://stackoverflow.com/questions/34304444/devise-omniauth-facebook-redirect-uri-url-must-absolute/34304605#34304605", "title": "Devise omniauth-facebook redirect_uri Url must absolute", "body": "<p>Adding </p>\n\n<pre><code>:client_options =&gt; {:ssl =&gt; {:ca_file =&gt; '/usr/lib/ssl/certs/ca-certificates.crt'}} \n</code></pre>\n\n<p>To <code>config.omniauth</code> in the initializer solved the issue for me.</p>\n\n<p>I also configured the <code>path</code> to be absolute like so:</p>\n\n<pre><code>callback_url: ENV['SERVER_ROOT']+'/users/auth/facebook/callback'\n</code></pre>\n"}], "owner": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2834, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1450244316, "creation_date": 1450243177, "question_id": 34304444, "link": "https://stackoverflow.com/questions/34304444/devise-omniauth-facebook-redirect-uri-url-must-absolute", "title": "Devise omniauth-facebook redirect_uri Url must absolute", "body": "<p>My Rails app when I tried to integrate <code>gem \"omniauth-facebook\"</code> with devise, I receive the following error on facebook: <code>The redirect_uri URL must be absolute</code>.</p>\n\n<p>Following were my config</p>\n\n<p>devise.rb</p>\n\n<pre><code>config.omniauth :facebook, \"ID\", \"SECRET\",callback_url: \"/auth/facebook\"\n</code></pre>\n\n<p>My user.rb model:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable, :omniauthable, :omniauth_providers =&gt; [:facebook]\n\n  def self.from_omniauth(auth)\n        where(provider: auth.provider, uid: auth.uid).first_or_create do |user|\n        user.email = auth.info.email\n        user.password = Devise.friendly_token[0,20]\n        user.name = auth.info.name   # assuming the user model has a name\n        user.image = auth.info.image # assuming the user model has an image\n      end\n    end\nend\n</code></pre>\n\n<p>My routes:</p>\n\n<pre><code>devise_for :users, :controllers =&gt; {:omniauth_callbacks =&gt; \"users/omniauth_callbacks\"}\n</code></pre>\n\n<p>And Controller OmniauthCallbacksController</p>\n\n<pre><code>class Users::OmniauthCallbacksController &lt; Devise::OmniauthCallbacksController\n    def facebook\n    # You need to implement the method below in your model (e.g. app/models/user.rb)\n    @user = User.from_omniauth(request.env[\"omniauth.auth\"])\n\n    if @user.persisted?\n      sign_in_and_redirect @user, :event =&gt; :authentication #this will throw if @user is not activated\n      set_flash_message(:notice, :success, :kind =&gt; \"Facebook\") if is_navigational_format?\n    else\n      session[\"devise.facebook_data\"] = request.env[\"omniauth.auth\"]\n      redirect_to new_user_registration_url\n    end\n  end\n\n  def failure\n    redirect_to root_path\n  end\nend\n</code></pre>\n\n<p>What am I missing here?</p>\n"}, {"tags": ["ruby", "instance-eval", "refinements"], "answers": [{"tags": [], "owner": {"reputation": 74, "user_id": 3762171, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0c49179780a407b0230e08104b566469?s=128&d=identicon&r=PG&f=1", "display_name": "Auli", "link": "https://stackoverflow.com/users/3762171/auli"}, "is_accepted": false, "score": -1, "last_activity_date": 1450252844, "last_edit_date": 1450252844, "creation_date": 1450248120, "answer_id": 34305466, "question_id": 34304218, "link": "https://stackoverflow.com/questions/34304218/ruby-refinements-with-instance-eval/34305466#34305466", "title": "Ruby refinements with instance_eval", "body": "<p>If you want to refine the ruby core <code>BaseObject</code>, you need to modify it as below.</p>\n\n<pre><code>module ArrayExtras\n  refine ::Array do\n    def speak\n      puts 'array!'\n   end\n  end\nend\n</code></pre>\n\n<p>It will be found in top level class.</p>\n"}, {"comments": [{"owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "edited": false, "score": 0, "creation_date": 1574432031, "post_id": 34307912, "comment_id": 104242287, "body": "So there is no way to make <code>MyUniverse::DSL.new</code> method call self-contained? I.e. to not require users of this method to add <code>using ...</code> line to their code."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 1, "last_activity_date": 1450257118, "creation_date": 1450257118, "answer_id": 34307912, "question_id": 34304218, "link": "https://stackoverflow.com/questions/34304218/ruby-refinements-with-instance-eval/34307912#34307912", "title": "Ruby refinements with instance_eval", "body": "<p>Refinements are lexically scoped. You are activating the Refinement in the wrong lexical context. You need to activate it where you are calling the refined method:</p>\n\n<pre><code>module ArrayExtras\n  refine Array do\n    def speak\n      puts 'array!'\n    end\n  end\nend\n\nmodule MyUniverse\n  class DSL\n    def initialize(&amp;block)\n      instance_eval(&amp;block)\n    end\n  end\nend\n\nusing ArrayExtras\n\nMyUniverse::DSL.new do\n  [1].speak\nend\n# array!\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3995, "user_id": 2037537, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f13d953be3af2552aaa1ddfa0a05fa46?s=128&d=identicon&r=PG", "display_name": "Roland Studer", "link": "https://stackoverflow.com/users/2037537/roland-studer"}, "is_accepted": false, "score": 1, "last_activity_date": 1605475504, "creation_date": 1605475504, "answer_id": 64849955, "question_id": 34304218, "link": "https://stackoverflow.com/questions/34304218/ruby-refinements-with-instance-eval/64849955#64849955", "title": "Ruby refinements with instance_eval", "body": "<p>In some cases you can achieve it by <code>using ArrayExtras </code> on the binding.</p>\n<pre class=\"lang-rb prettyprint-override\"><code>module MyUniverse\n  using ArrayExtras\n  class DSL\n    def initialize(&amp;block)\n      block.binding.eval(&quot;using ArrayExtras&quot;)\n      instance_eval(&amp;block)\n    end\n  end\nend\n\nMyUniverse::DSL.new do\n  [1].speak\nend\n</code></pre>\n<p>This will however only work if you are not using your class in an instance, it only works if the <code>binding</code> is a module or class context, otherwise the <code>eval</code> will fail because <code>main.using is permitted only at toplevel </code>.</p>\n"}], "owner": {"reputation": 270, "user_id": 1325339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c76f91c37fd0a6386de232f58f585ab0?s=128&d=identicon&r=PG", "display_name": "Andy", "link": "https://stackoverflow.com/users/1325339/andy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 1, "accepted_answer_id": 34307912, "answer_count": 3, "score": 4, "last_activity_date": 1605475504, "creation_date": 1450241873, "question_id": 34304218, "link": "https://stackoverflow.com/questions/34304218/ruby-refinements-with-instance-eval", "title": "Ruby refinements with instance_eval", "body": "<p>I'd like to provide some refinements to a DSL. I'm able to get refinements working with this example:</p>\n\n<pre><code>module ArrayExtras\n  refine Array do\n    def speak\n      puts 'array!'\n    end\n  end\nend\n\nmodule MyUniverse\n  using ArrayExtras\n  class Thing\n    def initialize\n      [1].speak\n    end\n  end\nend\nMyUniverse::Thing.new\n</code></pre>\n\n<p>This prints out \"array!\" just fine. But once I introduce <code>instance_eval</code>, the method can't be found:</p>\n\n<pre><code>module MyUniverse\n  using ArrayExtras\n  class DSL\n    def initialize(&amp;block)\n      instance_eval(&amp;block)\n    end\n  end\nend\n\nMyUniverse::DSL.new do\n  [1].speak\nend\n</code></pre>\n\n<p>I get a <code>undefined method</code>speak' for [1]:Array (NoMethodError)`</p>\n\n<p>Is there a way to get refinements working within an instance_eval?</p>\n"}, {"tags": ["ruby", "iteration", "each"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1450243152, "post_id": 34303711, "comment_id": 56350831, "body": "&quot;...it keeps returning...&quot; brought a smile to my face. I&#39;m sure that everyone reading this has had the same thought: &quot;Maybe if I just run it again it will work&quot;."}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1450262224, "post_id": 34303711, "comment_id": 56360930, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/16723386/how-to-square-each-element-of-an-array-in-array-class-in-ruby\">How to square each element of an array in Array class in Ruby?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 5194793, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d2d1b43ab54b17f6a787dd0d01ea2e7c?s=128&d=identicon&r=PG&f=1", "display_name": "gregmarquet", "link": "https://stackoverflow.com/users/5194793/gregmarquet"}, "edited": false, "score": 0, "creation_date": 1450239868, "post_id": 34303737, "comment_id": 56349834, "body": "Thanks, Linuxios, for an exercise I needed to use .each but I appreciate the help new approche."}], "tags": [], "owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "is_accepted": false, "score": 1, "last_activity_date": 1450238650, "creation_date": 1450238650, "answer_id": 34303737, "question_id": 34303711, "link": "https://stackoverflow.com/questions/34303711/array-each-return-the-same-unchanged-array-after-being-modified/34303737#34303737", "title": "array.each return the same unchanged array after being modified.", "body": "<p>A much simpler version that does what you want:</p>\n\n<pre><code>def square_array(array)\n  array.map do |number|\n    number*number\n  end\nend\n</code></pre>\n\n<p>The problem with your code is that when you assign something to <code>number</code>, you're just assigning a value to a local variable, not some magic reference into an array.</p>\n"}, {"comments": [{"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 0, "creation_date": 1450239887, "post_id": 34303884, "comment_id": 56349841, "body": "I really think you should consider <code>map</code> or even <code>map!</code> instead, as it does what you want and is more concise."}, {"owner": {"reputation": 17, "user_id": 5194793, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d2d1b43ab54b17f6a787dd0d01ea2e7c?s=128&d=identicon&r=PG&f=1", "display_name": "gregmarquet", "link": "https://stackoverflow.com/users/5194793/gregmarquet"}, "reply_to_user": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 0, "creation_date": 1450248676, "post_id": 34303884, "comment_id": 56352899, "body": "I understand and appreciate the advice for the future, but I had to use .each for the purpose of the exercice."}], "tags": [], "owner": {"reputation": 17, "user_id": 5194793, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d2d1b43ab54b17f6a787dd0d01ea2e7c?s=128&d=identicon&r=PG&f=1", "display_name": "gregmarquet", "link": "https://stackoverflow.com/users/5194793/gregmarquet"}, "is_accepted": false, "score": -1, "last_activity_date": 1450239732, "creation_date": 1450239732, "answer_id": 34303884, "question_id": 34303711, "link": "https://stackoverflow.com/questions/34303711/array-each-return-the-same-unchanged-array-after-being-modified/34303884#34303884", "title": "array.each return the same unchanged array after being modified.", "body": "<p>I fund a way, I just needed to push the result in a new array</p>\n\n<pre><code>    def square_array(array)\n      new_array = []\n      array.each do |num|\n        squared_num = num ** 2\n        new_array.push(squared_num)\n      end\n      return new_array\n    end\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1450243622, "post_id": 34304281, "comment_id": 56350964, "body": "Sachin, you can tighten this up by using <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-each_with_object\" rel=\"nofollow noreferrer\">Enumerable#each_with_object</a>: <code>def square_array(array); array.each_with_object([]) { |number, temp|  temp &lt;&lt;  (number * number) }; end</code>."}, {"owner": {"reputation": 6929, "user_id": 1262519, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/zvPMu.jpg?s=128&g=1", "display_name": "Sachin Singh", "link": "https://stackoverflow.com/users/1262519/sachin-singh"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1450246605, "post_id": 34304281, "comment_id": 56352032, "body": "@CarySwoveland, you are right but @gregmarquet just want to use <code>each</code> for his exercise."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1450302532, "post_id": 34304281, "comment_id": 56387230, "body": "You&#39;re right. Greg hasn&#39;t been on SO long so may be new to Ruby, in which case the  use of <code>each_with_object</code> may be confusing. One possibility in such situations (when the code is short, as here) is to leave what you have then show the usual way the code would be written."}], "tags": [], "owner": {"reputation": 6929, "user_id": 1262519, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/zvPMu.jpg?s=128&g=1", "display_name": "Sachin Singh", "link": "https://stackoverflow.com/users/1262519/sachin-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1450242261, "creation_date": 1450242261, "answer_id": 34304281, "question_id": 34303711, "link": "https://stackoverflow.com/questions/34303711/array-each-return-the-same-unchanged-array-after-being-modified/34304281#34304281", "title": "array.each return the same unchanged array after being modified.", "body": "<p>Try this out:</p>\n\n<p>Using <code>Each</code> method</p>\n\n<pre><code>def square_array(array)\n  temp = []\n  array.each do |number| \n    temp &lt;&lt;  (number * number)\n  end\n  temp\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 3711245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed2922dd932b1c11053b97b78127f086?s=128&d=identicon&r=PG", "display_name": "Chris DiMartino", "link": "https://stackoverflow.com/users/3711245/chris-dimartino"}, "is_accepted": false, "score": 0, "last_activity_date": 1450243174, "creation_date": 1450243174, "answer_id": 34304440, "question_id": 34303711, "link": "https://stackoverflow.com/questions/34303711/array-each-return-the-same-unchanged-array-after-being-modified/34304440#34304440", "title": "array.each return the same unchanged array after being modified.", "body": "<p>When writing semantic ruby, it is best to use proper enumerable methods.  There is no need for the temporary variable in this case... we can use the <em>#map</em> method to return a new array that is the result of applying a function to each value in turn.  This is a core concept of the functional programming paradigm:</p>\n\n<pre><code>def square_array numbers\n  numbers.map { |x| x ** 2 }\nend\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 5194793, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d2d1b43ab54b17f6a787dd0d01ea2e7c?s=128&d=identicon&r=PG&f=1", "display_name": "gregmarquet", "link": "https://stackoverflow.com/users/5194793/gregmarquet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1450243174, "creation_date": 1450238479, "question_id": 34303711, "link": "https://stackoverflow.com/questions/34303711/array-each-return-the-same-unchanged-array-after-being-modified", "title": "array.each return the same unchanged array after being modified.", "body": "<p>Is there a way to return the new array?\nI try to return the array of squared value [1, 4, 9] but it keeps returning [1, 2, 3] (the original array) Here is my code:  </p>\n\n<pre><code>def square_array(array)\n  array.each do |number| \n    number *= number\n    puts number\n  end\nend\n\nsquare_array([1, 2, 3])\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "paperclip"], "comments": [{"owner": {"reputation": 3543, "user_id": 2231236, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ZyG2H.jpg?s=128&g=1", "display_name": "Nithin", "link": "https://stackoverflow.com/users/2231236/nithin"}, "edited": false, "score": 0, "creation_date": 1450242354, "post_id": 34303038, "comment_id": 56350584, "body": "provide more of log info on error."}], "answers": [{"tags": [], "owner": {"reputation": 123, "user_id": 1264269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad641961a030d715748458c7511ea4da?s=128&d=identicon&r=PG", "display_name": "Michael Prins", "link": "https://stackoverflow.com/users/1264269/michael-prins"}, "is_accepted": false, "score": 0, "last_activity_date": 1450247779, "creation_date": 1450247779, "answer_id": 34305391, "question_id": 34303038, "link": "https://stackoverflow.com/questions/34303038/what-is-the-content-type-of-json-file-to-aws-s3-with-ruby/34305391#34305391", "title": "What is the content type of json file to AWS S3 with ruby?", "body": "<p>If you're using a recent version of Paperclip it looks like you formatted the arguments to <code>validates_attachment_content_type</code> incorrectly. I think it should be:</p>\n\n<p><code>validates_attachment :meta_data, content_type: { content_type: 'application/json' }\n</code></p>\n\n<p>See the example in the Paperclip Readme: <a href=\"https://github.com/thoughtbot/paperclip#validations\" rel=\"nofollow\">https://github.com/thoughtbot/paperclip#validations</a></p>\n\n<p>EDIT: How I came to this conclusion is by noticing the error says it tried to call <code>merge</code> on the string. Merge is meant to be called on a Hash, so therefore it expects a Hash value for <code>:content_type</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 640, "user_id": 2326613, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5f0821b3c32c0537c027a657ec7e977b?s=128&d=identicon&r=PG", "display_name": "JosephK", "link": "https://stackoverflow.com/users/2326613/josephk"}, "is_accepted": false, "score": 0, "last_activity_date": 1544426238, "creation_date": 1544426238, "answer_id": 53701082, "question_id": 34303038, "link": "https://stackoverflow.com/questions/34303038/what-is-the-content-type-of-json-file-to-aws-s3-with-ruby/53701082#53701082", "title": "What is the content type of json file to AWS S3 with ruby?", "body": "<p>What you have is exactly what the current docs on github state, but it does not work:\n<a href=\"https://github.com/thoughtbot/paperclip\" rel=\"nofollow noreferrer\">https://github.com/thoughtbot/paperclip</a>\nOther examples use a different way of formatting matching types - so very confusing.</p>\n\n<p>What does seem to work, is a syntax-change which appears to date back years, which is:</p>\n\n<pre><code>validates_attachment :meta_data, attachment_content_type: {content_type: 'application/json'}\n</code></pre>\n\n<p>You can also put a set of acceptable content-types in an array, such as</p>\n\n<pre><code>validates_attachment :meta_data, attachment_content_type: {content_type: ['application/json', 'application/doc']}\n</code></pre>\n"}], "owner": {"reputation": 1173, "user_id": 3575850, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/gTV7j.jpg?s=128&g=1", "display_name": "lalala", "link": "https://stackoverflow.com/users/3575850/lalala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 945, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1544426238, "creation_date": 1450233394, "question_id": 34303038, "link": "https://stackoverflow.com/questions/34303038/what-is-the-content-type-of-json-file-to-aws-s3-with-ruby", "title": "What is the content type of json file to AWS S3 with ruby?", "body": "<p>I'd like to upload json file to S3 by ruby with <a href=\"https://github.com/thoughtbot/paperclip\" rel=\"nofollow\">paperclip</a>. I coded as following, but it returned the following error. </p>\n\n<blockquote>\n  <p>undefined method `merge' for \"application/json\":String</p>\n</blockquote>\n\n<p>Could you tell me how to set content-type of json-file?</p>\n\n<p><strong>product_definition.rb</strong></p>\n\n<pre><code>class ProductDefinition &lt; ActiveRecord::Base\n  belongs_to :product\n\n  has_attached_file :meta_data,\n    :storage =&gt; :s3,\n    :s3_credentials =&gt; \"#{Rails.root}/config/s3.yml\",\n    :url =&gt; \":s3_domain_url\",\n    :path =&gt; \"/assets/:id/:style/:basename.:extension\",\n    :s3_host_name =&gt; \"s3-ap-northeast-1.amazonaws.com\"\n\n  validates_attachment :meta_data, content_type: 'application/json'\nend\n</code></pre>\n\n<p><strong>products_controller.rb</strong></p>\n\n<pre><code>@product_definition = ProductDefinition.create(meta_data:sample.json)\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 10490, "user_id": 513951, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6cace4406e1ea825e78ec0134a5ea6fd?s=128&d=identicon&r=PG&f=1", "display_name": "user513951", "link": "https://stackoverflow.com/users/513951/user513951"}, "is_accepted": true, "score": 0, "last_activity_date": 1452805443, "last_edit_date": 1452805443, "creation_date": 1450232916, "answer_id": 34302975, "question_id": 34302926, "link": "https://stackoverflow.com/questions/34302926/how-to-instantiate-an-instance-of-a-ruby-class-when-the-class-changes-dynamicall/34302975#34302975", "title": "How to instantiate an instance of a Ruby class when the class changes dynamically?", "body": "<p>You can use <a href=\"http://ruby-doc.org/core/Module.html#method-i-const_get\" rel=\"nofollow\"><code>const_get</code></a>.</p>\n\n<pre><code>class_name = \"Rogue\"\n\nrogue_class = Object.const_get(class_name) # =&gt; Rogue\n\nmy_rogue = rogue_class.new # =&gt; #&lt;Rogue ...&gt;\n</code></pre>\n\n<p>In your example, this would look like:</p>\n\n<pre><code>def fight(name_of_monster_to_fight)\n  monster_class = Object.const_get(name_of_monster_to_fight)\n  m = monster_class.new\n\n  # ... more code\n\nrescue NameError # This is the error thrown when the class doesn't exist\n  puts \"error 503\"\nend\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 3709361, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9599b9ac1a98ea44054ca6c4fc6eb5e9?s=128&d=identicon&r=PG&f=1", "display_name": "dude0faw3", "link": "https://stackoverflow.com/users/3709361/dude0faw3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 34302975, "answer_count": 1, "score": 1, "last_activity_date": 1452805443, "creation_date": 1450232510, "last_edit_date": 1450232983, "question_id": 34302926, "link": "https://stackoverflow.com/questions/34302926/how-to-instantiate-an-instance-of-a-ruby-class-when-the-class-changes-dynamicall", "title": "How to instantiate an instance of a Ruby class when the class changes dynamically?", "body": "<p>So I am trying to create a text game in ruby, and I have attempted to create a <code>fight</code> method that can deal with creating any object. I have a <code>Monsters</code> class in another file, and child classes such as <code>Rogue</code> and <code>Vampire</code>. I have managed to make this work by using a <code>case</code> statement that instantiates an object named <code>m</code> that is either <code>Rogue</code> or <code>Vampire</code>, and putting practically all the methods in the <code>Monsters</code> class so that they share the same method name, but is there a more efficient way of dealing with unknown objects?</p>\n\n<p>My code:</p>\n\n<pre><code>def fight(monsterToFight) \ncase monsterToFight\nwhen \"Rogue\"\n  m = ::Rogue.new\nwhen \"Vampire\"\n  m = ::Vampire.new\nelse\n  puts \"error 503\"\nend\n... #more code\n</code></pre>\n\n<p>link to full repo: <a href=\"https://github.com/chaseWilliams/textGame\" rel=\"nofollow\">https://github.com/chaseWilliams/textGame</a></p>\n"}, {"tags": ["ruby", "loops", "runtime-error"], "comments": [{"owner": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "edited": false, "score": 1, "creation_date": 1450228646, "post_id": 34302404, "comment_id": 56346947, "body": "Can&#39;t you implement this with a while true loop instead?"}, {"owner": {"reputation": 2044, "user_id": 1107211, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mte2a.jpg?s=128&g=1", "display_name": "wurde", "link": "https://stackoverflow.com/users/1107211/wurde"}, "reply_to_user": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "edited": false, "score": 0, "creation_date": 1450229112, "post_id": 34302404, "comment_id": 56347095, "body": "Add a formal answer and I&#39;ll accept this as it works brilliantly."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1450257325, "post_id": 34302404, "comment_id": 56357528, "body": "This question demonstrates nicely that Tail Recursion <i>is</i> a natural way to think about loops. (Do something, and then start from the top.) It&#39;s sad that so many language designers are so opposed to Proper Tail Recursion and Proper Tail Calls."}], "answers": [{"tags": [], "owner": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "is_accepted": true, "score": 3, "last_activity_date": 1450234090, "last_edit_date": 1450234090, "creation_date": 1450229166, "answer_id": 34302516, "question_id": 34302404, "link": "https://stackoverflow.com/questions/34302404/how-do-i-avoid-infinite-recursion-when-building-an-event-loop-in-ruby/34302516#34302516", "title": "How do I avoid infinite recursion when building an event loop in Ruby?", "body": "<p>Use a <code>while true ...</code> loop instead of recursion. You can also add a short <code>sleep</code> to avoid more updates than necessary.</p>\n"}], "owner": {"reputation": 2044, "user_id": 1107211, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mte2a.jpg?s=128&g=1", "display_name": "wurde", "link": "https://stackoverflow.com/users/1107211/wurde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 490, "favorite_count": 0, "accepted_answer_id": 34302516, "answer_count": 1, "score": 3, "last_activity_date": 1450563542, "creation_date": 1450228459, "last_edit_date": 1450563542, "question_id": 34302404, "link": "https://stackoverflow.com/questions/34302404/how-do-i-avoid-infinite-recursion-when-building-an-event-loop-in-ruby", "title": "How do I avoid infinite recursion when building an event loop in Ruby?", "body": "<p>I want to implement a game loop in Ruby, but my current implementation receives a 'stack level too deep' (SystemStackError).</p>\n\n<p>This is how far I got on my Tetris-like falling block game:</p>\n\n<pre><code># falling block game\nclass Tetris\n  class EndGame &lt; StandardError; end\n\n  def start\n    @canvas = Canvas.new\n    @canvas.banner = \"New game\"\n    @canvas.draw\n    update\n  end\n\n  def update\n    step\n    update\n  rescue EndGame\n    puts \"Game over!\"\n  end\n\n  def step\n    puts \"Take one step...\"\n    # TODO: do stuff here\n  end\n\n  # draws our game board\n  class Canvas\n    SIZE = 10\n\n    attr_accessor :banner, :board\n\n    def initialize\n      @board = SIZE.times.map { Array.new(SIZE) }\n    end\n\n    def update(point, marker)\n      x, y = point\n      @board[x, y] = marker\n    end\n\n    alias_method :draw, :to_s\n    def draw\n      [banner, separator, body, separator].join(\"\\n\")\n    end\n\n    private\n\n    def separator\n      \"=\" * SIZE\n    end\n\n    def body\n      @board.map do |row|\n        row.map { |e| e || \" \" }.join\n      end.join(\"\\n\")\n    end\n  end\nend\n\ngame = Tetris.new\ngame.start\n</code></pre>\n\n<p>Produces this error:</p>\n\n<pre><code>Take one step...\nTake one step...\nTake one step...\nTake one step...\nTake one step...\nTake one step...\nTake one step...\nTake one step...\nTake one step...\nTake one step...\ngameloop.rb:20:in `puts': stack level too deep (SystemStackError)\n    from gameloop.rb:20:in `puts'\n    from gameloop.rb:20:in `step'\n    from gameloop.rb:13:in `update'\n    from gameloop.rb:14:in `update'\n    from gameloop.rb:14:in `update'\n    from gameloop.rb:14:in `update'\n    from gameloop.rb:14:in `update'\n    from gameloop.rb:14:in `update'\n     ... 10067 levels...\n    from gameloop.rb:14:in `update'\n    from gameloop.rb:14:in `update'\n    from gameloop.rb:9:in `start'\n    from gameloop.rb:59:in `&lt;main&gt;'\n</code></pre>\n\n<p><strong><em>UPDATE</em></strong></p>\n\n<p>Ruby does not enable Tail Call Optimizations by default, but it can be enabled in the Ruby VM.</p>\n\n<pre><code>RubyVM::InstructionSequence.compile_option = {\n  tailcall_optimization: true,\n  trace_instruction: false\n}\n</code></pre>\n"}, {"tags": ["ruby", "git", "bash"], "comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1450456854, "post_id": 34302398, "comment_id": 56462108, "body": "I&#39;m guessing this is a Windows problem rather than a Ruby or programming problem.  The OP does not divulge the platform but this is typical of Windows, and a common FAQ."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1450456891, "post_id": 34302398, "comment_id": 56462124, "body": "This one: <a href=\"http://stackoverflow.com/questions/12010103/launch-a-program-from-command-line-without-opening-a-new-window\" title=\"launch a program from command line without opening a new window\">stackoverflow.com/questions/12010103/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5684489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GqT8f.png?s=128&g=1", "display_name": "Harrison Gerber", "link": "https://stackoverflow.com/users/5684489/harrison-gerber"}, "edited": false, "score": 0, "creation_date": 1450235686, "post_id": 34303221, "comment_id": 56348784, "body": "So, how would I do this within the code? Basically, when someone double-clicks on the shortcut, it runs main.rb is all it does, making the game run."}, {"owner": {"reputation": 191, "user_id": 3429947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0f07bb7023bb33d3470124adb29c71c?s=128&d=identicon&r=PG&f=1", "display_name": "Daphoa", "link": "https://stackoverflow.com/users/3429947/daphoa"}, "reply_to_user": {"reputation": 11, "user_id": 5684489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GqT8f.png?s=128&g=1", "display_name": "Harrison Gerber", "link": "https://stackoverflow.com/users/5684489/harrison-gerber"}, "edited": false, "score": 0, "creation_date": 1450238776, "post_id": 34303221, "comment_id": 56349583, "body": "Instead of making a shortcut, make a bat script with <code>ruby main.rb &amp;</code> as the only line in it. If you want, you can make a shortcut to that bat script.  If you are very new to bat script, just make a text file, put the above line in the file, then rename the file to something like <code>run.bat</code>."}, {"owner": {"reputation": 191, "user_id": 3429947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0f07bb7023bb33d3470124adb29c71c?s=128&d=identicon&r=PG&f=1", "display_name": "Daphoa", "link": "https://stackoverflow.com/users/3429947/daphoa"}, "reply_to_user": {"reputation": 11, "user_id": 5684489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GqT8f.png?s=128&g=1", "display_name": "Harrison Gerber", "link": "https://stackoverflow.com/users/5684489/harrison-gerber"}, "edited": false, "score": 0, "creation_date": 1450278932, "post_id": 34303221, "comment_id": 56372876, "body": "Oops, I forgot to mention @Harrison. See my comment above. If it helps I can edit it into the answer."}], "tags": [], "owner": {"reputation": 191, "user_id": 3429947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0f07bb7023bb33d3470124adb29c71c?s=128&d=identicon&r=PG&f=1", "display_name": "Daphoa", "link": "https://stackoverflow.com/users/3429947/daphoa"}, "is_accepted": true, "score": 1, "last_activity_date": 1450234709, "creation_date": 1450234709, "answer_id": 34303221, "question_id": 34302398, "link": "https://stackoverflow.com/questions/34302398/hide-command-line-when-running-a-ruby-program/34303221#34303221", "title": "Hide Command Line when running a Ruby Program", "body": "<p>I'm having trouble dissecting the .lnk file, but I believe you can simulate what you want in the command line by running </p>\n\n<pre><code>ruby main.rb &amp;\n</code></pre>\n\n<p>instead of <code>ruby main.rb</code>. Once you have that, I think you can create a .bat file with the above line and it <em>should</em> run correctly.</p>\n\n<p><strong>Explanation:</strong>\nThe common reason the command prompt runs is because the command prompt is actually running the game inside itself and waiting for you to finish before completing the \"run the game\" script. The &amp; says \"run the game outside of this command prompt (inside a new thread)\". Then after creating the new thread, it sees that it has finished execution of the script and closes itself, leaving your game to run on it's own.</p>\n"}, {"tags": [], "owner": {"reputation": 339, "user_id": 5678403, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JB4YW.jpg?s=128&g=1", "display_name": "Ohad Dahan", "link": "https://stackoverflow.com/users/5678403/ohad-dahan"}, "is_accepted": false, "score": 0, "last_activity_date": 1450251086, "creation_date": 1450251086, "answer_id": 34306244, "question_id": 34302398, "link": "https://stackoverflow.com/questions/34302398/hide-command-line-when-running-a-ruby-program/34306244#34306244", "title": "Hide Command Line when running a Ruby Program", "body": "<p>You can try forking in/around your main function.\nThat way it process will finish and release the shell but the new forked process will continue until terminated from the GUI.</p>\n"}], "owner": {"reputation": 11, "user_id": 5684489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GqT8f.png?s=128&g=1", "display_name": "Harrison Gerber", "link": "https://stackoverflow.com/users/5684489/harrison-gerber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 0, "accepted_answer_id": 34303221, "answer_count": 2, "score": 0, "last_activity_date": 1450251086, "creation_date": 1450228406, "last_edit_date": 1450250197, "question_id": 34302398, "link": "https://stackoverflow.com/questions/34302398/hide-command-line-when-running-a-ruby-program", "title": "Hide Command Line when running a Ruby Program", "body": "<p>I recently finished my game for my AP Computer Science AB Final (if you know GIT and Git Bash and have ruby installed, you can clone the game here: <a href=\"https://github.com/gerberhe/Final_Game\" rel=\"nofollow\">https://github.com/gerberhe/Final_Game</a>). </p>\n\n<p>I made a shortcut called \"Final Game\", that when I double-click on it, it runs my game. This works fine with the code I used to do this, and it opens my game in a Gosu window. </p>\n\n<p>However, double-clicking/running this shortcut file ALSO opens a blank command prompt/cmd window that does nothing, shows nothing, and just closes as soon as I close the game.</p>\n\n<p>Question is, is there any code or any way I can make it so that when I run this shortcut file, the game appears, but the cmd line that also opens is hidden, or simply just doesn't open? </p>\n\n<p>This isn't necessary, but would make the game seem a bit more professional and aesthetically pleasing. Thanks!</p>\n\n<p>Also, if you decide to try the game, note that there are some bugs with it currently that I am planning on fixing, but that aren't necessary to the fluidity and work ability of the game.</p>\n\n<p>Thanks again!</p>\n"}, {"tags": ["ruby", "gem", "rubygems", "faraday"], "comments": [{"owner": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 0, "creation_date": 1450225875, "post_id": 34301972, "comment_id": 56346136, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/20559255/error-while-installing-json-gem-mkmf-rb-cant-find-header-files-for-ruby\">Error while installing json gem &#39;mkmf.rb can&#39;t find header files for ruby&#39;</a>"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5006554"}, "is_accepted": true, "score": 0, "last_activity_date": 1450225816, "creation_date": 1450225816, "answer_id": 34302003, "question_id": 34301972, "link": "https://stackoverflow.com/questions/34301972/missing-gem-faraday/34302003#34302003", "title": "Missing gem Faraday", "body": "<p>I've just realised all I needed to do was install the gem. Its made clear from the RubyGems.org library. Just typed:</p>\n\n<pre><code>sudo gem install faraday \n</code></pre>\n\n<p>to the terminal</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5006554"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1192, "favorite_count": 0, "accepted_answer_id": 34302003, "answer_count": 1, "score": 0, "last_activity_date": 1450225816, "creation_date": 1450225592, "question_id": 34301972, "link": "https://stackoverflow.com/questions/34301972/missing-gem-faraday", "title": "Missing gem Faraday", "body": "<p>I'm new to Ruby and I'm just trying to run a script. Firstly, when I try to bundle install it says: </p>\n\n<pre><code>    Daniels-Air:Documents Daniel$ bundle install\nFetching gem metadata from https://rubygems.org/........\nFetching version metadata from https://rubygems.org/...\nFetching dependency metadata from https://rubygems.org/..\nResolving dependencies...\nRubygems 2.0.3 is not threadsafe, so your gems will be installed one at a time. Upgrade to Rubygems 2.1.0 or higher to enable parallel gem installation.\nInstalling ffi 1.9.10 with native extensions\n\nGem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.\n\n    /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby extconf.rb\nmkmf.rb can't find header files for ruby at /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/include/ruby.h\n\n\nGem files will remain installed in /var/folders/_r/8pxmrph95fj0km8h7sfkw9f40000gn/T/bundler20151216-21689-8jiqebffi-1.9.10/gems/ffi-1.9.10 for inspection.\nResults logged to /var/folders/_r/8pxmrph95fj0km8h7sfkw9f40000gn/T/bundler20151216-21689-8jiqebffi-1.9.10/gems/ffi-1.9.10/ext/ffi_c/gem_make.out\nUsing multipart-post 2.0.0\nInstalling json 1.8.3 with native extensions\n\nGem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.\n\n    /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby extconf.rb\nmkmf.rb can't find header files for ruby at /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/include/ruby.h\n\n\nGem files will remain installed in /var/folders/_r/8pxmrph95fj0km8h7sfkw9f40000gn/T/bundler20151216-21689-5mz4k9json-1.8.3/gems/json-1.8.3 for inspection.\nResults logged to /var/folders/_r/8pxmrph95fj0km8h7sfkw9f40000gn/T/bundler20151216-21689-5mz4k9json-1.8.3/gems/json-1.8.3/ext/json/ext/generator/gem_make.out\nUsing multi_json 1.11.2\nUsing rubyzip 1.1.7\nUsing websocket 1.2.2\nUsing bundler 1.11.1\nAn error occurred while installing ffi (1.9.10), and Bundler cannot continue.\nMake sure that `gem install ffi -v '1.9.10'` succeeds before bundling.\n</code></pre>\n\n<p>When I then try to execute the file anyway I come across the problem: </p>\n\n<pre><code>    Could not find gem 'faraday' in any of the gem sources listed in your Gemfile or available on this machine.\nRun `bundle install` to install missing gems.\n</code></pre>\n\n<p>Where do I get this 'faraday' gem from? Should it have come with the code I am trying to run, or should I update something? Sorry if I got some terminology wrong, I'm very new to Ruby.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1989, "user_id": 1520130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9000383017000de1e1025f4f80d8655?s=128&d=identicon&r=PG", "display_name": "osman", "link": "https://stackoverflow.com/users/1520130/osman"}, "edited": false, "score": 0, "creation_date": 1450221463, "post_id": 34301241, "comment_id": 56344683, "body": "<code>@t_order[&quot;0&quot;].each</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "is_accepted": true, "score": 1, "last_activity_date": 1450221640, "creation_date": 1450221640, "answer_id": 34301308, "question_id": 34301241, "link": "https://stackoverflow.com/questions/34301241/update-database-using-a-loop-on-ruby-on-rails/34301308#34301308", "title": "Update database using a loop on Ruby On Rails", "body": "<p>It iterates once because <code>params[:order]</code> only has one element. What you want to do is iterate on <code>@t_order[\"0\"]</code>, which has 3 elements.</p>\n\n<p>Also, you should avoid all that logic within the <code>respond_to</code>. You can (should) define the variables outside of it.</p>\n"}], "owner": {"reputation": 810, "user_id": 2421208, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4mBl0.jpg?s=128&g=1", "display_name": "heisenberg", "link": "https://stackoverflow.com/users/2421208/heisenberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 34301308, "answer_count": 1, "score": 1, "last_activity_date": 1450225458, "creation_date": 1450221236, "last_edit_date": 1450225458, "question_id": 34301241, "link": "https://stackoverflow.com/questions/34301241/update-database-using-a-loop-on-ruby-on-rails", "title": "Update database using a loop on Ruby On Rails", "body": "<p>I'm trying to do a for each loop to update my database. I was using this piece of code to make the update:</p>\n\n<pre><code>def update\n  respond_to do |format|\n    @t_id = params[:t_id]\n    @t_order = params[:order]\n    @t_relation = TRelation.where('t_id' =&gt; @t_id)\n    @i = 0;\n    @t_order.each do |p|\n      @t_relation = TRelation.where('t_id = ? and\n        video_id = ?', @t_id, p[1][@i])\n      @i = @i + 1\n      @t_relation[0].t_order = @i\n      @t_relation[0].save\n    end\n    format.json { render :nothing =&gt; true, :status =&gt; 200, :content_type =&gt; 'text/html' }\n  end\nend\n</code></pre>\n\n<p>It does not loop through; it goes through it one time and stops. I don't understand what's happening. </p>\n\n<p>This is the content of params[:order]</p>\n\n<pre><code>params[:order] = {ActionController::Parameters} ActionController::Parameters (1 element)\n '0' = Array (3 elements)\n  [0] = \"7\"\n  [1] = \"5\"\n  [2] = \"3\"\n</code></pre>\n\n<p>And if I make a <code>@timeline_order.inspect</code> I get this:</p>\n\n<pre><code>{\"0\"=&gt;[\"7\", \"5\", \"3\"]}\n</code></pre>\n\n<p>How can I loop through it? I have no idea</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "multithreading"], "comments": [{"owner": {"reputation": 171, "user_id": 5654057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bda494cccb0b45592f0c1ed9059be85?s=128&d=identicon&r=PG&f=1", "display_name": "Veets", "link": "https://stackoverflow.com/users/5654057/veets"}, "edited": false, "score": 0, "creation_date": 1450224042, "post_id": 34301229, "comment_id": 56345554, "body": "I&#39;m using delayed_job gem for the same features that you need in your application. It had been reliable so far."}, {"owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "edited": false, "score": 0, "creation_date": 1450229858, "post_id": 34301229, "comment_id": 56347291, "body": "I like delayed_job, too. One quirk is that when it queues up arguments, anything that&#39;s an ActiveRecord is serialized to just it&#39;s type and id.  Then when the job runs, it does a lookup to get the AR content.  The impact is that you need to <code>.save</code> any AR the task will use before starting it. This makes sense because DJ was invented to maintain document queues, and this saves double-storing the documents.  But it&#39;s inconvenient in some cases."}], "answers": [{"tags": [], "owner": {"reputation": 2218, "user_id": 5129208, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wfsc3HumFMQ/AAAAAAAAAAI/AAAAAAAAAGw/2TW94iOeLhQ/photo.jpg?sz=128", "display_name": "yez", "link": "https://stackoverflow.com/users/5129208/yez"}, "is_accepted": true, "score": 2, "last_activity_date": 1450225536, "creation_date": 1450225536, "answer_id": 34301963, "question_id": 34301229, "link": "https://stackoverflow.com/questions/34301229/is-there-any-rails-gem-that-is-similar-to-the-android-priority-jobqueue-library/34301963#34301963", "title": "Is there any rails gem that is similar to the Android Priority Jobqueue library?", "body": "<p>I think <a href=\"https://github.com/resque/resque\" rel=\"nofollow\">Resque</a> has most of the functionality you want.</p>\n\n<p>You can set different priority, different queues and it is all backed by Redis so you entire application can share the queue.</p>\n"}, {"tags": [], "owner": {"reputation": 9447, "user_id": 1380867, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5dc27a551f77074a1dcc431e4158704b?s=128&d=identicon&r=PG", "display_name": "MZaragoza", "link": "https://stackoverflow.com/users/1380867/mzaragoza"}, "is_accepted": false, "score": 1, "last_activity_date": 1450225589, "creation_date": 1450225589, "answer_id": 34301970, "question_id": 34301229, "link": "https://stackoverflow.com/questions/34301229/is-there-any-rails-gem-that-is-similar-to-the-android-priority-jobqueue-library/34301970#34301970", "title": "Is there any rails gem that is similar to the Android Priority Jobqueue library?", "body": "<p>you can use <a href=\"http://sidekiq.org/\" rel=\"nofollow\">sidekiq</a> it has many levels of support you can start with the <a href=\"https://github.com/mperham/sidekiq\" rel=\"nofollow\">free one</a> before upgrading </p>\n\n<p>Here is a <a href=\"http://railscasts.com/episodes/366-sidekiq\" rel=\"nofollow\">video</a> on how to set it up and use it as well </p>\n"}], "owner": {"reputation": 103, "user_id": 4256648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8b5b2ddfc0323da3fcd9b36f09c25e1?s=128&d=identicon&r=PG", "display_name": "Timi Ajiboye", "link": "https://stackoverflow.com/users/4256648/timi-ajiboye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "closed_date": 1450264847, "accepted_answer_id": 34301963, "answer_count": 2, "score": 1, "last_activity_date": 1451875149, "creation_date": 1450221169, "last_edit_date": 1451875149, "question_id": 34301229, "link": "https://stackoverflow.com/questions/34301229/is-there-any-rails-gem-that-is-similar-to-the-android-priority-jobqueue-library", "closed_reason": "Not suitable for this site", "title": "Is there any rails gem that is similar to the Android Priority Jobqueue library?", "body": "<p>I need task/job queue gem that is similar to <a href=\"https://github.com/yigit/android-priority-jobqueue\" rel=\"nofollow\">this</a> android library, but for rails. I also don't mind writing the code myself/from scratch if there's no alternative.</p>\n\n<p>These are the features I need:</p>\n\n<ol>\n<li>I need the queue to be \"app-wide\", so that I can add tasks to it\nfrom any controller. </li>\n<li>I need to be able to set the maximum number of tasks the queue can process at a time.</li>\n<li>I'd also like for it to allow me to set priority on tasks so that a more important one would be processed before a less important one.</li>\n</ol>\n\n<p>What I'm trying to build uses twilio to send text messages to users. And Twilio has limits as to how many message one can send in a second. I need to be able to just call a method <code>.send_message</code> that automatically just adds the message to the queue and it waits it's turn.</p>\n"}, {"tags": ["ruby", "amazon-web-services", "web-scraping"], "comments": [{"owner": {"reputation": 2635, "user_id": 1435711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9fac7fe4c7290024faee8bfe6367f130?s=128&d=identicon&r=PG", "display_name": "Username", "link": "https://stackoverflow.com/users/1435711/username"}, "reply_to_user": {"reputation": 10490, "user_id": 513951, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6cace4406e1ea825e78ec0134a5ea6fd?s=128&d=identicon&r=PG&f=1", "display_name": "user513951", "link": "https://stackoverflow.com/users/513951/user513951"}, "edited": false, "score": 1, "creation_date": 1450221460, "post_id": 34301118, "comment_id": 56344679, "body": "@JesseSielaff Updated my question. Same result: Successful on Win7 local machine, 503 error on AWS Linux box."}, {"owner": {"reputation": 2635, "user_id": 1435711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9fac7fe4c7290024faee8bfe6367f130?s=128&d=identicon&r=PG", "display_name": "Username", "link": "https://stackoverflow.com/users/1435711/username"}, "reply_to_user": {"reputation": 10490, "user_id": 513951, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6cace4406e1ea825e78ec0134a5ea6fd?s=128&d=identicon&r=PG&f=1", "display_name": "user513951", "link": "https://stackoverflow.com/users/513951/user513951"}, "edited": false, "score": 0, "creation_date": 1450221874, "post_id": 34301118, "comment_id": 56344852, "body": "Thanks. This may mean a problem with the AWS, but if it is, I don&#39;t know how I would check it..."}, {"owner": {"reputation": 2635, "user_id": 1435711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9fac7fe4c7290024faee8bfe6367f130?s=128&d=identicon&r=PG", "display_name": "Username", "link": "https://stackoverflow.com/users/1435711/username"}, "reply_to_user": {"reputation": 10490, "user_id": 513951, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6cace4406e1ea825e78ec0134a5ea6fd?s=128&d=identicon&r=PG&f=1", "display_name": "user513951", "link": "https://stackoverflow.com/users/513951/user513951"}, "edited": false, "score": 0, "creation_date": 1450222148, "post_id": 34301118, "comment_id": 56344950, "body": "Hm, then I wonder how do even diagnose the problem, since I could successfully run <code>test.rb</code> from my AWS box up til yesterday..."}], "answers": [{"comments": [{"owner": {"reputation": 2635, "user_id": 1435711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9fac7fe4c7290024faee8bfe6367f130?s=128&d=identicon&r=PG", "display_name": "Username", "link": "https://stackoverflow.com/users/1435711/username"}, "edited": false, "score": 0, "creation_date": 1450222362, "post_id": 34301430, "comment_id": 56345033, "body": "If that is the case, is there anyway to set up my scraper so it doesn&#39;t look like it&#39;s  AWS?"}, {"owner": {"reputation": 13061, "user_id": 2715393, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iwuRh.jpg?s=128&g=1", "display_name": "Vaviloff", "link": "https://stackoverflow.com/users/2715393/vaviloff"}, "edited": false, "score": 0, "creation_date": 1450232448, "post_id": 34301430, "comment_id": 56348001, "body": "AWS IP or IP range could be banned. You could try to get new IP and try scraping then"}, {"owner": {"reputation": 138098, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 2, "creation_date": 1450237497, "post_id": 34301430, "comment_id": 56349244, "body": "...or... don&#39;t run a scraper against a site that may very well be blocking you because you are scraping them, if that&#39;s what you&#39;re doing."}], "tags": [], "owner": {"reputation": 10490, "user_id": 513951, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6cace4406e1ea825e78ec0134a5ea6fd?s=128&d=identicon&r=PG&f=1", "display_name": "user513951", "link": "https://stackoverflow.com/users/513951/user513951"}, "is_accepted": false, "score": 3, "last_activity_date": 1450222213, "creation_date": 1450222213, "answer_id": 34301430, "question_id": 34301118, "link": "https://stackoverflow.com/questions/34301118/why-cant-i-access-this-url-from-aws-but-i-can-from-my-local-machine/34301430#34301430", "title": "Why can&#39;t I access this url from AWS, but I can from my local machine?", "body": "<p>I would guess that <code>www.ic.gc.ca</code> has something configured that is disallowing access from AWS. Based on the fact that your scraper was working until recently, it may even be that they detected they were being scraped and set up a rule to keep you out, hitting all of AWS by mistake.</p>\n"}], "owner": {"reputation": 2635, "user_id": 1435711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9fac7fe4c7290024faee8bfe6367f130?s=128&d=identicon&r=PG", "display_name": "Username", "link": "https://stackoverflow.com/users/1435711/username"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1450222213, "creation_date": 1450220623, "last_edit_date": 1450221672, "question_id": 34301118, "link": "https://stackoverflow.com/questions/34301118/why-cant-i-access-this-url-from-aws-but-i-can-from-my-local-machine", "title": "Why can&#39;t I access this url from AWS, but I can from my local machine?", "body": "<p>Here's <code>test.rb</code>.</p>\n\n<pre><code>require 'open-uri'\nrequire 'openssl'\n\nOpenSSL::SSL::VERIFY_PEER = OpenSSL::SSL::VERIFY_NONE\nputs open('https://www.ic.gc.ca/app/scr/cc/CorporationsCanada/fdrlCrpDtls.html?corpId=1056565').read\n</code></pre>\n\n<p>When I run this code from my local machine, I successfully open and read the page, printing its contents.</p>\n\n<p>But when I run it from my AWS box with the command <code>ruby test.rb</code>, I get a 503 error. This has only happened in the past week. Before this, I could open pages on the website without problem.</p>\n\n<p>My local machine runs Windows 7. My AWS box runs Linux.</p>\n\n<p>What's going on here?</p>\n"}, {"tags": ["ruby", "configuration", "yaml"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1450252316, "post_id": 34301065, "comment_id": 56354641, "body": "Why do you want to do that dynamically? To be able to use that classes in your app you need to know the class names at development time anyway. Why don&#39;t you want to have different config files for the different configurations: a <code>DB</code> class taking its configuration from a <code>db.yml</code>, the <code>Source</code> class getting the config from <code>source.yml</code>?"}, {"owner": {"reputation": 39041, "user_id": 27358, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fed1635f89478c88eda07e87de452bcf?s=128&d=identicon&r=PG", "display_name": "David Moles", "link": "https://stackoverflow.com/users/27358/david-moles"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1450287253, "post_id": 34301065, "comment_id": 56378624, "body": "I don&#39;t want different config files because there&#39;s not enough configuration to justify different config files (the real app only has about as much configuration as you&#39;re looking at in the question). It&#39;s not that important to be able to go from <code>db:</code> to <code>DatabaseConfig</code> dynamically, but it is important to go from <code>sqlite3</code> to <code>Sqlite3Config</code> or <code>mysql</code> to <code>MysqlConfig</code> dynamically. Nothing outside of those subclasses needs to know about anything but <code>DatabaseConfig</code>, either at development time or run time."}, {"owner": {"reputation": 39041, "user_id": 27358, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fed1635f89478c88eda07e87de452bcf?s=128&d=identicon&r=PG", "display_name": "David Moles", "link": "https://stackoverflow.com/users/27358/david-moles"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1450287343, "post_id": 34301065, "comment_id": 56378677, "body": "(As for why try to go from <code>db:</code> to <code>DatabaseConfig</code> dynamically: DRY. It&#39;s basically the same operation as going from <code>sqlite3</code> to <code>Sqlite3Config</code>, and without it there&#39;s repetitive boilerplate in <code>DatabaseConfig</code>, <code>SourceConfig</code>, and <code>IndexConfig</code>. But I agree it&#39;s not as important, since clients of the config system do need to know those different sorts of things exist, even if they don&#39;t care about the specific implementation classes.)"}], "owner": {"reputation": 39041, "user_id": 27358, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fed1635f89478c88eda07e87de452bcf?s=128&d=identicon&r=PG", "display_name": "David Moles", "link": "https://stackoverflow.com/users/27358/david-moles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1450220396, "creation_date": 1450220396, "question_id": 34301065, "link": "https://stackoverflow.com/questions/34301065/generating-complex-ruby-class-hierarchies-from-yaml", "title": "Generating complex Ruby class hierarchies from YAML", "body": "<p>I'm looking for a generic mechanism for constructing configuration objects from a configuration file with multiple sections. Something like:</p>\n\n\n\n<pre><code>db:                           # key to section-specific config class\n  adapter: sqlite3            # key to implementation-specific subclass\n  database: ':memory:'        # \u2510\n  pool: 5                     # \u251c implementation-specific key/value pairs\n  timeout: 5000               # \u2518\n\nsource:                       \n  protocol: OAI\n  oai_base_url: http://oai.example.org/oai\n  metadata_prefix: some_prefix\n  set: some_set\n  seconds_granularity: true\n\nindex:\n  adapter: solr\n  url: http://solr.example.org/\n  proxy: http://foo:bar@proxy.example.com/\n  open_timeout: 120\n  read_timeout: 300\n  retry_503: 3\n  retry_after_limit: 20\n</code></pre>\n\n<p>On reading this file, we'd create, e.g., a <code>DatabaseConfig</code> (specifically, a <code>Sqlite3Config</code>, that being a subclass of <code>DatabaseConfig</code>), a <code>SourceConfig</code> (specifically an <code>OAIConfig</code>), and an <code>IndexConfig</code> (specifically a <code>SolrConfig</code>).</p>\n\n<p>Is an out-of-the-box way to do this without me having to write a bunch of <code>case/when</code> statements to map the different keys to different classes to be passed as arguments to <code>YAML.object_maker</code>?</p>\n\n<p>Note: this is <strong>not</strong> a Rails application, but if the <a href=\"https://rubygems.org/gems/config\" rel=\"nofollow\">Config gem</a> can be made to do something like this without too much hoop-jumping I'm open to it.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1450244506, "post_id": 34301057, "comment_id": 56351263, "body": "I don&#39;t understand what you mean by &quot;returns <code>self</code> unaltered&quot;. For example, <code>{ a: 1 }.tap { |h| h[:a]=2 } #=&gt; {:a=&gt;2} </code>. You could write <code>[3].tap { |a| a.replace [9] } #=&gt; [9]</code>, but that only works because arrays are mutable. You clearly can&#39;t do that with immutable objects like <code>Fixnums</code>."}, {"owner": {"reputation": 14450, "user_id": 438615, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Dseeq.jpg?s=128&g=1", "display_name": "Jonah", "link": "https://stackoverflow.com/users/438615/jonah"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1450245327, "post_id": 34301057, "comment_id": 56351526, "body": "I should have said &quot;returns self&quot;.  In contrast to what I want: &quot;returns what the block returns&quot;"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1450246235, "post_id": 34301057, "comment_id": 56351897, "body": "You could, of course, do that by wrapping it in a method and short-circuiting the return: <code>def doit(arr); arr.inject(:+).tap {|x| return x * 3}; end</code>. Then <code>doit [1,2] #=&gt; 9</code>."}, {"owner": {"reputation": 14450, "user_id": 438615, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Dseeq.jpg?s=128&g=1", "display_name": "Jonah", "link": "https://stackoverflow.com/users/438615/jonah"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1450246781, "post_id": 34301057, "comment_id": 56352091, "body": "That defeats the point, as my aim is syntactic compactness to express a common idea: pipelining values.  I want the unix <code>|</code>.  Monkeypatching seems the only way to do it."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1450253395, "post_id": 34301057, "comment_id": 56355209, "body": "It was just an observation, not a suggestion."}], "answers": [{"tags": [], "owner": {"reputation": 25150, "user_id": 383888, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Kd57u.jpg?s=128&g=1", "display_name": "Mori", "link": "https://stackoverflow.com/users/383888/mori"}, "is_accepted": false, "score": 3, "last_activity_date": 1450226739, "last_edit_date": 1450226739, "creation_date": 1450221180, "answer_id": 34301232, "question_id": 34301057, "link": "https://stackoverflow.com/questions/34301057/mutating-version-of-tap-or-a-way-to-pipe-expressions/34301232#34301232", "title": "Mutating version of tap -- or a way to pipe expressions?", "body": "<p>There is no built in method for that, but you can add <a href=\"http://www.rubydoc.info/github/rubyworks/facets/Kernel%3Aergo\" rel=\"nofollow\"><code>Kernel#ergo</code></a> from <a href=\"http://rubyworks.github.io/facets/\" rel=\"nofollow\">Ruby Facets</a>:</p>\n\n<pre><code>\"a\".ergo.upcase #=&gt; \"A\"\nnil.ergo.foobar #=&gt; nil\n\n\"a\".ergo { |o| o.upcase } #=&gt; \"A\"\nnil.ergo { |o| o.foobar } #=&gt; nil\n</code></pre>\n\n<blockquote>\n  <p>This is like #tap, but #tap yields self and returns self, where as #ergo yields self but returns the result.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 14450, "user_id": 438615, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Dseeq.jpg?s=128&g=1", "display_name": "Jonah", "link": "https://stackoverflow.com/users/438615/jonah"}, "edited": false, "score": 0, "creation_date": 1450221996, "post_id": 34301320, "comment_id": 56344896, "body": "yeah, i know,  i wanted to avoid monkeypatching Object though."}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "reply_to_user": {"reputation": 14450, "user_id": 438615, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Dseeq.jpg?s=128&g=1", "display_name": "Jonah", "link": "https://stackoverflow.com/users/438615/jonah"}, "edited": false, "score": 0, "creation_date": 1450223124, "post_id": 34301320, "comment_id": 56345290, "body": "Yeah but money patching isn&#39;t always evil. I like @Mori &#39;s answer though"}, {"owner": {"reputation": 14450, "user_id": 438615, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Dseeq.jpg?s=128&g=1", "display_name": "Jonah", "link": "https://stackoverflow.com/users/438615/jonah"}, "edited": false, "score": 0, "creation_date": 1450223206, "post_id": 34301320, "comment_id": 56345313, "body": "I agree, it&#39;s probably fine in this case with a unique name.  i find it odd that ruby doesn&#39;t support such a basic concept natively though..."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1450253881, "post_id": 34301320, "comment_id": 56355485, "body": "Interesting, Steve! I don&#39;t the name should contain &quot;tap&quot;, though, because it has nothing to do with <code>tap</code> (<code>chain</code>, perhaps?). It could of course be a <code>Refinement</code> of <code>Object</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1450254404, "post_id": 34301320, "comment_id": 56355769, "body": "This is really interesting. If we had this method would we need <code>tap</code>?  I can&#39;t think of a case where the method would be used without a block. Can you? (<a href=\"http://ruby-doc.org/core-2.2.0/Object.html#method-i-tap\" rel=\"nofollow noreferrer\">Object#tap</a> appears to require a block.)"}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1450273168, "post_id": 34301320, "comment_id": 56368601, "body": "@CarySwoveland agree that &quot;my_tap&quot; is a misnomer, I think I was prompted by the phrasing of the question &quot;...(alternate) version of tap...&quot;.  As to what it should do if no block present... return self, return nil, raise error... maybe raising an error would be the most sensible?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 14450, "user_id": 438615, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Dseeq.jpg?s=128&g=1", "display_name": "Jonah", "link": "https://stackoverflow.com/users/438615/jonah"}, "edited": false, "score": 0, "creation_date": 1450274784, "post_id": 34301320, "comment_id": 56369813, "body": "Steve, my vote goes to raising an exception if no block is present (ala <code>tap</code>). I had the same reaction as @Jonah: why isn&#39;t it  a built-in now? Maybe you&#39;re on to something."}], "tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": false, "score": 2, "last_activity_date": 1450221714, "creation_date": 1450221714, "answer_id": 34301320, "question_id": 34301057, "link": "https://stackoverflow.com/questions/34301057/mutating-version-of-tap-or-a-way-to-pipe-expressions/34301320#34301320", "title": "Mutating version of tap -- or a way to pipe expressions?", "body": "<p>You could do this yourself.</p>\n\n<pre><code>class Object\n  def my_tap\n    return yield self if block_given?\n    self\n  end\nend\n\n[1,2].inject(:+).my_tap {|x| x * 3}\n=&gt; 9\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18854, "user_id": 340799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c41b5e81f3659aa61e99b5c502a6cc8b?s=128&d=identicon&r=PG", "display_name": "x1a4", "link": "https://stackoverflow.com/users/340799/x1a4"}, "is_accepted": true, "score": 2, "last_activity_date": 1544730393, "creation_date": 1544730393, "answer_id": 53769059, "question_id": 34301057, "link": "https://stackoverflow.com/questions/34301057/mutating-version-of-tap-or-a-way-to-pipe-expressions/53769059#53769059", "title": "Mutating version of tap -- or a way to pipe expressions?", "body": "<p>This is an older question, but you can now use <a href=\"https://docs.ruby-lang.org/en/trunk/Object.html#method-i-yield_self\" rel=\"nofollow noreferrer\"><code>yield_self</code></a> to do this.</p>\n"}], "owner": {"reputation": 14450, "user_id": 438615, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Dseeq.jpg?s=128&g=1", "display_name": "Jonah", "link": "https://stackoverflow.com/users/438615/jonah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 53769059, "answer_count": 3, "score": 2, "last_activity_date": 1544730393, "creation_date": 1450220358, "question_id": 34301057, "link": "https://stackoverflow.com/questions/34301057/mutating-version-of-tap-or-a-way-to-pipe-expressions", "title": "Mutating version of tap -- or a way to pipe expressions?", "body": "<p><code>tap</code> yields <code>self</code> to the block passed to it, and returns <code>self</code> unaltered.  I often find myself wishing there was a version of <code>tap</code> which returned the return value of the block, rather than <code>self</code>.  For example:</p>\n\n<pre><code>[1,2].inject(:+).tap {|x| x * 3} #=&gt; returns 3, but I want 9\n</code></pre>\n\n<p>Is there any builtin method that will accomplish this?  </p>\n\n<p>The typical solution -- create a temporarily local var to store the output of <code>[1,2].inject(:+)</code>, and multiply that by 3 -- seems kludgy.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routes", "resources"], "answers": [{"comments": [{"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1450298063, "post_id": 34300996, "comment_id": 56384817, "body": "Hey Cruz. Thanks for your help. Problem with your answer though is if I try to create a new blog post I get the error <code>No route matches {:action=&gt;&quot;show&quot;, :controller=&gt;&quot;posts&quot;} missing required keys: [:id]</code> Any other ideas on how we can make form_for work with a customized route? Thanks again!"}, {"owner": {"reputation": 814, "user_id": 4059671, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/656640577/picture?type=large", "display_name": "Michael Cruz", "link": "https://stackoverflow.com/users/4059671/michael-cruz"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1455644984, "post_id": 34300996, "comment_id": 58576979, "body": "@AnthonyGalli.com - did you ever solve this? Did my edit work, or is this still an issue?"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1455825854, "post_id": 34300996, "comment_id": 58675354, "body": "Hey Cruz I&#39;ll give you the checkmark :) since your&#39;s worked for the specific problem I posed, but overall I found that this worked best for me in routes.rb: <code>resources :blog, to: &#39;posts&#39; resources :posts</code> That way I get best of both worlds."}], "tags": [], "owner": {"reputation": 814, "user_id": 4059671, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/656640577/picture?type=large", "display_name": "Michael Cruz", "link": "https://stackoverflow.com/users/4059671/michael-cruz"}, "is_accepted": true, "score": 4, "last_activity_date": 1455644732, "last_edit_date": 1455644732, "creation_date": 1450220049, "answer_id": 34300996, "question_id": 34300930, "link": "https://stackoverflow.com/questions/34300930/how-to-use-form-for-with-customized-route/34300996#34300996", "title": "How to use form_for with customized route?", "body": "<p>It can take a hash options, including url, so something like this:</p>\n\n<p><strong>Edit: changed <code>blog_path</code> to <code>blogs_path</code></strong>. The <code>blog_path</code> is the show action, not the create action and therefore requires an id (and isn't a post path anyway). Try it out this way.</p>\n\n<pre><code>&lt;%= simple_form_for(@post, url: blogs_path) do |f| %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1450297894, "post_id": 34314316, "comment_id": 56384703, "body": "Hey Rich thanks again for your help. I don&#39;t have a blog model. I just have posts, but I like the way blog looks better in the url. Here&#39;s the thing now, when I used Cruz&#39;s suggestion I&#39;m able to edit, but not create now. Any ideas here? For example if I just put <code>&lt;%= simple_form_for(@post) do |f| %&gt;</code> I get the error <code>undefined method &#39;posts_path&#39;</code>. This is because due to my routes change it is now <code>blog_index_path</code>"}, {"owner": {"reputation": 814, "user_id": 4059671, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/656640577/picture?type=large", "display_name": "Michael Cruz", "link": "https://stackoverflow.com/users/4059671/michael-cruz"}, "edited": false, "score": 0, "creation_date": 1450316341, "post_id": 34314316, "comment_id": 56392282, "body": "I just read this after editing my above answer. Can you show your routes file?"}], "tags": [], "owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "is_accepted": false, "score": 0, "last_activity_date": 1450341975, "last_edit_date": 1450341975, "creation_date": 1450275380, "answer_id": 34314316, "question_id": 34300930, "link": "https://stackoverflow.com/questions/34300930/how-to-use-form-for-with-customized-route/34314316#34314316", "title": "How to use form_for with customized route?", "body": "<p>Don't know if this applies, but a really cool feature I found the other day was <a href=\"http://apidock.com/rails/ActiveRecord/Base/becomes\" rel=\"nofollow\"><code>.becomes</code></a> - where you can change the \"class\" of your object so that Rails treats it in a different way:</p>\n\n<blockquote>\n  <p>This can be used along with record identification in Action Pack to allow, say, Client &lt; Company to do something like render partial: <code>@client.becomes(Company)</code> to render that instance using the companies/company partial instead of clients/client.</p>\n</blockquote>\n\n<p>So...</p>\n\n<p>If you had a <code>Blog</code> model, and wanted each <code>@post</code> to be treated as such (again, I don't know if this is your setup at all), you could do the following:</p>\n\n<pre><code>&lt;%= simple_form_for @post.becomes(Blog) do |f| %&gt;\n</code></pre>\n\n<p>I'll delete if inappropriate; it's come in handy quite a lot for me.</p>\n\n<hr>\n\n<p><strong>Update</strong></p>\n\n<p>If you'd like your <code>posts_path</code> to be blog (IE <code>url.com/blog/1</code>), you'll want to look at using the <a href=\"http://api.rubyonrails.org/classes/ActionDispatch/Routing/Mapper/Resources.html#method-i-resources\" rel=\"nofollow\"><code>path</code></a> option for the routes generator:</p>\n\n<pre><code>#config/routes.rb\nresources :posts, path: \"blog\", as: :blog # -&gt; url.com/blogs/2\n</code></pre>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 34300996, "answer_count": 2, "score": 2, "last_activity_date": 1555597966, "creation_date": 1450219778, "last_edit_date": 1555597966, "question_id": 34300930, "link": "https://stackoverflow.com/questions/34300930/how-to-use-form-for-with-customized-route", "title": "How to use form_for with customized route?", "body": "<p>The custom routing:</p>\n\n<pre><code>resources :blog, controller: 'posts'\n</code></pre>\n\n<p>How do I rewrite this line <code>&lt;%= simple_form_for(@post, blog_path) do |f| %&gt;</code> to get rid of the below error?</p>\n\n<pre><code>TypeError in Posts#edit\nActionView::Template::Error (no implicit conversion of Symbol into Integer)\n</code></pre>\n\n<p>I also tried <code>&lt;%= simple_form_for(blog_path(@post)) do |f| %&gt;</code>, which gets rid of the error, but then if I want to edit the form the inputs are emptied of their saved data.</p>\n\n<p><strong>posts_controller</strong></p>\n\n<pre><code>  def new\n    @post = Post.new\n    respond_with(@post)\n  end\n\n  def edit\n  end\n\n  def create\n    @post = Post.new(post_params)\n    if current_user.admin\n      @post.save\n      respond_with(@post)\n    else\n      flash[:success] = 'Get out of here.'\n      redirect_to root_url\n    end\n  end\n</code></pre>\n"}, {"tags": ["ruby", "regex", "string", "apostrophe", "string-interpolation"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1450219500, "post_id": 34300812, "comment_id": 56343773, "body": "Just remove <code>thing.gsub!(&quot;&#39;&quot;) { &quot;\\\\&#39;&quot; }</code> and you will get <code>match_data</code> as <code>STR</code>. Your <code>text</code> variable holds <code>STR = {&#39;Str&#39;ing&#39;, ... }</code> text. There is no literal escape symbol there. With your code, <code>if text.include?(&quot;= {&#39;#{thing}&#39;,&quot;)</code> evaluates to false."}, {"owner": {"reputation": 68, "user_id": 5416287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e13fffd162869955af3bcacca948a11?s=128&d=identicon&r=PG&f=1", "display_name": "Eli Foster", "link": "https://stackoverflow.com/users/5416287/eli-foster"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1450226385, "post_id": 34300812, "comment_id": 56346302, "body": "The text variable was an example, and probably a bad one. The text that I&#39;m getting does not actually get simplified. I just printed the actual text, and the apostrophes were escaped as normal appearing with the backslash and apostrophe."}], "answers": [{"comments": [{"owner": {"reputation": 68, "user_id": 5416287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e13fffd162869955af3bcacca948a11?s=128&d=identicon&r=PG&f=1", "display_name": "Eli Foster", "link": "https://stackoverflow.com/users/5416287/eli-foster"}, "edited": false, "score": 0, "creation_date": 1450225833, "post_id": 34301483, "comment_id": 56346126, "body": "Without defining thing with an escaped &#39;, wouldn&#39;t I still need the gsub call? The &quot;thing&quot; variable is actually user input, which would rarely include escape symbols."}, {"owner": {"reputation": 68, "user_id": 5416287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e13fffd162869955af3bcacca948a11?s=128&d=identicon&r=PG&f=1", "display_name": "Eli Foster", "link": "https://stackoverflow.com/users/5416287/eli-foster"}, "edited": false, "score": 0, "creation_date": 1450226245, "post_id": 34301483, "comment_id": 56346261, "body": "Oh, the simplified regex isn&#39;t actually the same, because \\w will match lowercase letters, which is not good for my context. The &quot;STR&quot; in text is an abbreviation, which can only be uppercase letters, numbers, and hyphens, to my knowledge."}], "tags": [], "owner": {"reputation": 502, "user_id": 2801159, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f35c793bdcf3198af6448cdead9b9f91?s=128&d=identicon&r=PG&f=1", "display_name": "Travis Smith", "link": "https://stackoverflow.com/users/2801159/travis-smith"}, "is_accepted": false, "score": 0, "last_activity_date": 1450223011, "last_edit_date": 1450223011, "creation_date": 1450222483, "answer_id": 34301483, "question_id": 34300812, "link": "https://stackoverflow.com/questions/34300812/escaped-apostrophes-and-regular-expression/34301483#34301483", "title": "Escaped apostrophes and regular expression", "body": "<p>You can do away with the <code>gsub!</code> call since the <code>\\'</code> will be interpreted as <code>'</code>. You can also simplify the regular expression to <code>/\\w+ = {'#{thing}',/</code> since you really just need to match a single word before the = sign.\nSo like this</p>\n\n<pre><code>    text = \"STR = {'Str\\'ing', ...}\"\n    thing = 'Str\\'ing'\n    if text.include?(\"= {'#{thing}',\") \n      match_data = text.scan(/\\w+ = {'#{thing}',/)\n      puts match_data\n    end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68, "user_id": 5416287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e13fffd162869955af3bcacca948a11?s=128&d=identicon&r=PG&f=1", "display_name": "Eli Foster", "link": "https://stackoverflow.com/users/5416287/eli-foster"}, "is_accepted": false, "score": 1, "last_activity_date": 1450227648, "creation_date": 1450227648, "answer_id": 34302279, "question_id": 34300812, "link": "https://stackoverflow.com/questions/34300812/escaped-apostrophes-and-regular-expression/34302279#34302279", "title": "Escaped apostrophes and regular expression", "body": "<p>There's surely a better way to do this, but it seems to work for my purposes. I changed the first gsub! call to <code>thing.gsub!(/'/) { \"\\\\'\" }</code> to make the <code>include?</code> call true. Then I added an additional <code>thing.gsub!(/\\'/) { \"\\\\'\" }</code> so that the regex can actually find it. </p>\n"}], "owner": {"reputation": 68, "user_id": 5416287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e13fffd162869955af3bcacca948a11?s=128&d=identicon&r=PG&f=1", "display_name": "Eli Foster", "link": "https://stackoverflow.com/users/5416287/eli-foster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 371, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1450227648, "creation_date": 1450219178, "question_id": 34300812, "link": "https://stackoverflow.com/questions/34300812/escaped-apostrophes-and-regular-expression", "title": "Escaped apostrophes and regular expression", "body": "<p>I have a string that I am attempting to gather some specific data from. I'm able to narrow down that the given string (which has an escaped apostrophe \\') is inside the main string. However, when I scan it for the string, using #{string}, it finds no results.</p>\n\n<p>I am pretty certain that this is because when an escaped apostrophe \\' is in double quotes, it becomes \"Str\\'ing\", which is what it would look like in the main string. However, once interpolated into a regular expression, it stays as \"Str\\\\'ing\", which can't be found.</p>\n\n<p>I suppose my question is how should I properly handle this? I'm sure the solution would either be a better regular expression, or a better substitution, but I don't know what those would be.</p>\n\n<p>Here is some sample code:</p>\n\n<pre><code>text = \"STR = {'Str\\'ing', ... }\"\nthing = \"Str'ing\"\nthing.gsub!(\"'\") { \"\\\\'\" }\nif text.include?(\"= {'#{thing}',\") # =&gt; true\n  match_data = text.scan(/([A-Z0-9\\-]+) = {'#{thing}',/)\n  p match_data\n  # =&gt; []\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "capybara"], "comments": [{"owner": {"reputation": 814, "user_id": 4059671, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/656640577/picture?type=large", "display_name": "Michael Cruz", "link": "https://stackoverflow.com/users/4059671/michael-cruz"}, "edited": false, "score": 0, "creation_date": 1450218580, "post_id": 34300523, "comment_id": 56343313, "body": "It&#39;s hard to tell what is going on here without more information. I&#39;m guessing you probably need to include the activeadmin module in your spec, based on the fact that the error is coming from lib/active_admin."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 2, "creation_date": 1450229519, "post_id": 34300523, "comment_id": 56347205, "body": "It looks like you&#39;ve implemented filter saving for active_admin but your AdminUser class doesn&#39;t actually have support for them (no #saved_filters method on the AdminUser class) - post your AdminUser class definition and the FactoryGirl factory for it"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 5684061, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rE1jf.png?s=128&g=1", "display_name": "Leopold Stotch", "link": "https://stackoverflow.com/users/5684061/leopold-stotch"}, "is_accepted": false, "score": 0, "last_activity_date": 1450990118, "creation_date": 1450990118, "answer_id": 34457780, "question_id": 34300523, "link": "https://stackoverflow.com/questions/34300523/no-method-error-from-tests-in-rails-using-capybara/34457780#34457780", "title": "&quot;No method error&quot; from tests in Rails using Capybara", "body": "<p>Thanks all.\nAfter running tests, testing database was cleared, so I have no entry for user which tried to login therefore method saved_filters could not be found. When I have added this user, I have seen page of my application.</p>\n"}], "owner": {"reputation": 31, "user_id": 5684061, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rE1jf.png?s=128&g=1", "display_name": "Leopold Stotch", "link": "https://stackoverflow.com/users/5684061/leopold-stotch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 175, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1450990118, "creation_date": 1450217995, "last_edit_date": 1450228756, "question_id": 34300523, "link": "https://stackoverflow.com/questions/34300523/no-method-error-from-tests-in-rails-using-capybara", "title": "&quot;No method error&quot; from tests in Rails using Capybara", "body": "<p>I have a simple test written using RSpec and Capybara.</p>\n\n<p>My failing spec is <strong>sign_in_feature_spec.rb:</strong></p>\n\n<pre><code>require 'spec_helper'\n\ndescribe 'the signin process', :type =&gt; :feature do\n  it 'signs me in' do\n    admin_user = FactoryGirl.create(:admin_user)\n    login_as(admin_user, :scope =&gt; :admin_user)\n    visit root_path\n    puts page.body\n  end\nend\n</code></pre>\n\n<p>When I run this spec, I see next report:</p>\n\n<blockquote>\n  <p>1 example, 0 failures, 1 passed</p>\n</blockquote>\n\n<p>So, the test was successful, but I get this output from <code>puts page.body</code>:</p>\n\n<pre><code>NoMethodError at /\n==================\n\n&gt; undefined method `saved_filters' for #&lt;AdminUser:0x00000009abf870&gt;\n\nactivemodel (4.1.9) lib/active_model/attribute_methods.rb, line 435\n-------------------------------------------------------------------\n\n``` ruby\n  430       def method_missing(method, *args, &amp;block)\n  431         if respond_to_without_attributes?(method, true)\n  432           super\n  433         else\n  434           match = match_attribute_method?(method.to_s)\n&gt; 435           match ? attribute_missing(match, *args, &amp;block) : super\n  436         end\n  437       end\n  438   \n  439       # +attribute_missing+ is like +method_missing+, but for attributes. When\n  440       # +method_missing+ is called we check to see if there is a matching\n```\n\nApp backtrace\n-------------\n\n - activemodel (4.1.9) lib/active_model/attribute_methods.rb:435:in `method_missing'\n - activerecord (4.1.9) lib/active_record/attribute_methods.rb:213:in `method_missing'\n - lib/active_admin/filter_saver/controller.rb:35:in `save_filters?'\n - config/initializers/active_admin.rb:165:in `block (2 levels) in &lt;top (required)&gt;'\n - activesupport (4.1.9) lib/active_support/callbacks.rb:438:in `block in make_lambda'\n - activesupport (4.1.9) lib/active_support/callbacks.rb:143:in `block in halting_and_conditional'\n - activesupport (4.1.9) lib/active_support/callbacks.rb:166:in `block in halting'\n - activesupport (4.1.9) lib/active_support/callbacks.rb:166:in `block in halting'\n - activesupport (4.1.9) lib/active_support/callbacks.rb:166:in `block in halting'\n - activesupport (4.1.9) lib/active_support/callbacks.rb:166:in `block in halting'\n - activesupport (4.1.9) lib/active_support/callbacks.rb:229:in `block in halting'\n - activesupport (4.1.9) lib/active_support/callbacks.rb:166:in `block in halting'\n - activesupport (4.1.9) lib/active_support/callbacks.rb:166:in `block in halting'\n - activesupport (4.1.9) lib/active_support/callbacks.rb:166:in `block in halting'\n - activesupport (4.1.9) lib/active_support/callbacks.rb:166:in `block in halting'\n - activesupport (4.1.9) lib/active_support/callbacks.rb:166:in `block in halting'\n - activesupport (4.1.9) lib/active_support/callbacks.rb:86:in `run_callbacks'\n - actionpack (4.1.9) lib/abstract_controller/callbacks.rb:19:in `process_action'\n - actionpack (4.1.9) lib/action_controller/metal/rescue.rb:29:in `process_action'\n - config/initializers/instrumentation_notification.rb:28:in `block in process_action'\n - activesupport (4.1.9) lib/active_support/notifications.rb:159:in `block in instrument'\n - activesupport (4.1.9) lib/active_support/notifications/instrumenter.rb:20:in `instrument'\n - activesupport (4.1.9) lib/active_support/notifications.rb:159:in `instrument'\n - config/initializers/instrumentation_notification.rb:27:in `process_action'\n - actionpack (4.1.9) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'\n - activerecord (4.1.9) lib/active_record/railties/controller_runtime.rb:18:in `process_action'\n - actionpack (4.1.9) lib/abstract_controller/base.rb:136:in `process'\n - actionview (4.1.9) lib/action_view/rendering.rb:30:in `process'\n - actionpack (4.1.9) lib/action_controller/metal.rb:196:in `dispatch'\n - actionpack (4.1.9) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'\n - actionpack (4.1.9) lib/action_controller/metal.rb:232:in `block in action'\n - actionpack (4.1.9) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'\n - actionpack (4.1.9) lib/action_dispatch/routing/route_set.rb:50:in `call'\n - actionpack (4.1.9) lib/action_dispatch/journey/router.rb:73:in `block in call'\n - actionpack (4.1.9) lib/action_dispatch/journey/router.rb:59:in `call'\n - actionpack (4.1.9) lib/action_dispatch/routing/route_set.rb:685:in `call'\n - warden (1.2.3) lib/warden/manager.rb:35:in `block in call'\n - warden (1.2.3) lib/warden/manager.rb:34:in `call'\n - rack (1.5.5) lib/rack/etag.rb:23:in `call'\n - rack (1.5.5) lib/rack/conditionalget.rb:25:in `call'\n - rack (1.5.5) lib/rack/head.rb:11:in `call'\n - actionpack (4.1.9) lib/action_dispatch/middleware/params_parser.rb:27:in `call'\n - actionpack (4.1.9) lib/action_dispatch/middleware/flash.rb:254:in `call'\n - rack (1.5.5) lib/rack/session/abstract/id.rb:225:in `context'\n - rack (1.5.5) lib/rack/session/abstract/id.rb:220:in `call'\n - actionpack (4.1.9) lib/action_dispatch/middleware/cookies.rb:562:in `call'\n - activerecord (4.1.9) lib/active_record/query_cache.rb:36:in `call'\n - activerecord (4.1.9) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'\n - actionpack (4.1.9) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'\n - activesupport (4.1.9) lib/active_support/callbacks.rb:82:in `run_callbacks'\n - actionpack (4.1.9) lib/action_dispatch/middleware/callbacks.rb:27:in `call'\n - actionpack (4.1.9) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'\n - better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'\n - better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'\n - better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'\n - actionpack (4.1.9) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'\n - actionpack (4.1.9) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\n - railties (4.1.9) lib/rails/rack/logger.rb:38:in `call_app'\n - railties (4.1.9) lib/rails/rack/logger.rb:20:in `block in call'\n - activesupport (4.1.9) lib/active_support/tagged_logging.rb:68:in `block in tagged'\n - activesupport (4.1.9) lib/active_support/tagged_logging.rb:26:in `tagged'\n - activesupport (4.1.9) lib/active_support/tagged_logging.rb:68:in `tagged'\n - railties (4.1.9) lib/rails/rack/logger.rb:20:in `call'\n - request_store (1.1.0) lib/request_store/middleware.rb:8:in `call'\n - actionpack (4.1.9) lib/action_dispatch/middleware/request_id.rb:21:in `call'\n - rack (1.5.5) lib/rack/methodoverride.rb:21:in `call'\n - rack (1.5.5) lib/rack/runtime.rb:17:in `call'\n - activesupport (4.1.9) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'\n - actionpack (4.1.9) lib/action_dispatch/middleware/static.rb:84:in `call'\n - rack (1.5.5) lib/rack/sendfile.rb:112:in `call'\n - railties (4.1.9) lib/rails/engine.rb:514:in `call'\n - railties (4.1.9) lib/rails/application.rb:144:in `call'\n - rack (1.5.5) lib/rack/builder.rb:138:in `call'\n - rack (1.5.5) lib/rack/urlmap.rb:65:in `block in call'\n - rack (1.5.5) lib/rack/urlmap.rb:50:in `call'\n - rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'\n - rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'\n - rack-test (0.6.3) lib/rack/test.rb:58:in `get'\n - capybara (2.5.0) lib/capybara/rack_test/browser.rb:60:in `process'\n - capybara (2.5.0) lib/capybara/rack_test/browser.rb:35:in `process_and_follow_redirects'\n - capybara (2.5.0) lib/capybara/rack_test/browser.rb:21:in `visit'\n - capybara (2.5.0) lib/capybara/rack_test/driver.rb:42:in `visit'\n - capybara (2.5.0) lib/capybara/session.rb:232:in `visit'\n - capybara (2.5.0) lib/capybara/dsl.rb:51:in `block (2 levels) in &lt;module:DSL&gt;'\n - rspec-rails (3.2.0) lib/rspec/rails/example/feature_example_group.rb:28:in `visit'\n - spec/features/sign_in_feature_spec.rb:7:in `block (2 levels) in &lt;top (required)&gt;'\n - rspec-core (3.2.0) lib/rspec/core/example.rb:177:in `block in run'\n - rspec-core (3.2.0) lib/rspec/core/example.rb:385:in `block in with_around_and_singleton_context_hooks'\n - rspec-core (3.2.0) lib/rspec/core/example.rb:343:in `block in with_around_example_hooks'\n - rspec-core (3.2.0) lib/rspec/core/hooks.rb:474:in `block in run'\n - rspec-core (3.2.0) lib/rspec/core/hooks.rb:614:in `block in run_around_example_hooks_for'\n - rspec-core (3.2.0) lib/rspec/core/example.rb:247:in `call'\n - rspec-rails (3.2.0) lib/rspec/rails/adapters.rb:111:in `block (2 levels) in &lt;module:MinitestLifecycleAdapter&gt;'\n - rspec-core (3.2.0) lib/rspec/core/example.rb:333:in `instance_exec'\n - rspec-core (3.2.0) lib/rspec/core/hooks.rb:387:in `execute_with'\n - rspec-core (3.2.0) lib/rspec/core/hooks.rb:616:in `block (2 levels) in run_around_example_hooks_for'\n - rspec-core (3.2.0) lib/rspec/core/example.rb:247:in `call'\n - rspec-core (3.2.0) lib/rspec/core/hooks.rb:617:in `run_around_example_hooks_for'\n - rspec-core (3.2.0) lib/rspec/core/hooks.rb:474:in `run'\n - rspec-core (3.2.0) lib/rspec/core/example.rb:343:in `with_around_example_hooks'\n - rspec-core (3.2.0) lib/rspec/core/example.rb:385:in `with_around_and_singleton_context_hooks'\n - rspec-core (3.2.0) lib/rspec/core/example.rb:174:in `run'\n - rspec-core (3.2.0) lib/rspec/core/example_group.rb:548:in `block in run_examples'\n - rspec-core (3.2.0) lib/rspec/core/example_group.rb:544:in `run_examples'\n - rspec-core (3.2.0) lib/rspec/core/example_group.rb:512:in `run'\n - rspec-core (3.2.0) lib/rspec/core/runner.rb:110:in `block (3 levels) in run_specs'\n - rspec-core (3.2.0) lib/rspec/core/runner.rb:110:in `block (2 levels) in run_specs'\n - rspec-core (3.2.0) lib/rspec/core/configuration.rb:1526:in `with_suite_hooks'\n - rspec-core (3.2.0) lib/rspec/core/runner.rb:109:in `block in run_specs'\n - rspec-core (3.2.0) lib/rspec/core/reporter.rb:62:in `report'\n - rspec-core (3.2.0) lib/rspec/core/runner.rb:108:in `run_specs'\n - rspec-core (3.2.0) lib/rspec/core/runner.rb:86:in `run'\n - rspec-core (3.2.0) lib/rspec/core/runner.rb:70:in `run'\n - rspec-core (3.2.0) lib/rspec/core/runner.rb:38:in `invoke'\n - rspec-core (3.2.0) exe/rspec:4:in `&lt;top (required)&gt;'\n - ruby/2.1.0/bin/rspec:23:in `&lt;top (required)&gt;'\n\nFull backtrace\n--------------\n\n - activemodel (4.1.9) lib/active_model/attribute_methods.rb:435:in `method_missing'\n - activerecord (4.1.9) lib/active_record/attribute_methods.rb:213:in `method_missing'\n - lib/active_admin/filter_saver/controller.rb:35:in `save_filters?'\n - config/initializers/active_admin.rb:165:in `block (2 levels) in &lt;top (required)&gt;'\n - activesupport (4.1.9) lib/active_support/callbacks.rb:438:in `block in make_lambda'\n - activesupport (4.1.9) lib/active_support/callbacks.rb:143:in `block in halting_and_conditional'\n - activesupport (4.1.9) lib/active_support/callbacks.rb:166:in `block in halting'\n - activesupport (4.1.9) lib/active_support/callbacks.rb:166:in `block in halting'\n - activesupport (4.1.9) lib/active_support/callbacks.rb:166:in `block in halting'\n - activesupport (4.1.9) lib/active_support/callbacks.rb:166:in `block in halting'\n - activesupport (4.1.9) lib/active_support/callbacks.rb:229:in `block in halting'\n - activesupport (4.1.9) lib/active_support/callbacks.rb:166:in `block in halting'\n - activesupport (4.1.9) lib/active_support/callbacks.rb:166:in `block in halting'\n - activesupport (4.1.9) lib/active_support/callbacks.rb:166:in `block in halting'\n - activesupport (4.1.9) lib/active_support/callbacks.rb:166:in `block in halting'\n - activesupport (4.1.9) lib/active_support/callbacks.rb:166:in `block in halting'\n - activesupport (4.1.9) lib/active_support/callbacks.rb:86:in `run_callbacks'\n - actionpack (4.1.9) lib/abstract_controller/callbacks.rb:19:in `process_action'\n - actionpack (4.1.9) lib/action_controller/metal/rescue.rb:29:in `process_action'\n - config/initializers/instrumentation_notification.rb:28:in `block in process_action'\n - activesupport (4.1.9) lib/active_support/notifications.rb:159:in `block in instrument'\n - activesupport (4.1.9) lib/active_support/notifications/instrumenter.rb:20:in `instrument'\n - activesupport (4.1.9) lib/active_support/notifications.rb:159:in `instrument'\n - config/initializers/instrumentation_notification.rb:27:in `process_action'\n - actionpack (4.1.9) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'\n - activerecord (4.1.9) lib/active_record/railties/controller_runtime.rb:18:in `process_action'\n - actionpack (4.1.9) lib/abstract_controller/base.rb:136:in `process'\n - actionview (4.1.9) lib/action_view/rendering.rb:30:in `process'\n - actionpack (4.1.9) lib/action_controller/metal.rb:196:in `dispatch'\n - actionpack (4.1.9) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'\n - actionpack (4.1.9) lib/action_controller/metal.rb:232:in `block in action'\n - actionpack (4.1.9) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'\n - actionpack (4.1.9) lib/action_dispatch/routing/route_set.rb:50:in `call'\n - actionpack (4.1.9) lib/action_dispatch/journey/router.rb:73:in `block in call'\n - actionpack (4.1.9) lib/action_dispatch/journey/router.rb:59:in `call'\n - actionpack (4.1.9) lib/action_dispatch/routing/route_set.rb:685:in `call'\n - warden (1.2.3) lib/warden/manager.rb:35:in `block in call'\n - warden (1.2.3) lib/warden/manager.rb:34:in `call'\n - rack (1.5.5) lib/rack/etag.rb:23:in `call'\n - rack (1.5.5) lib/rack/conditionalget.rb:25:in `call'\n - rack (1.5.5) lib/rack/head.rb:11:in `call'\n - actionpack (4.1.9) lib/action_dispatch/middleware/params_parser.rb:27:in `call'\n - actionpack (4.1.9) lib/action_dispatch/middleware/flash.rb:254:in `call'\n - rack (1.5.5) lib/rack/session/abstract/id.rb:225:in `context'\n - rack (1.5.5) lib/rack/session/abstract/id.rb:220:in `call'\n - actionpack (4.1.9) lib/action_dispatch/middleware/cookies.rb:562:in `call'\n - activerecord (4.1.9) lib/active_record/query_cache.rb:36:in `call'\n - activerecord (4.1.9) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'\n - actionpack (4.1.9) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'\n - activesupport (4.1.9) lib/active_support/callbacks.rb:82:in `run_callbacks'\n - actionpack (4.1.9) lib/action_dispatch/middleware/callbacks.rb:27:in `call'\n - actionpack (4.1.9) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'\n - better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'\n - better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'\n - better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'\n - actionpack (4.1.9) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'\n - actionpack (4.1.9) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\n - railties (4.1.9) lib/rails/rack/logger.rb:38:in `call_app'\n - railties (4.1.9) lib/rails/rack/logger.rb:20:in `block in call'\n - activesupport (4.1.9) lib/active_support/tagged_logging.rb:68:in `block in tagged'\n - activesupport (4.1.9) lib/active_support/tagged_logging.rb:26:in `tagged'\n - activesupport (4.1.9) lib/active_support/tagged_logging.rb:68:in `tagged'\n - railties (4.1.9) lib/rails/rack/logger.rb:20:in `call'\n - request_store (1.1.0) lib/request_store/middleware.rb:8:in `call'\n - actionpack (4.1.9) lib/action_dispatch/middleware/request_id.rb:21:in `call'\n - rack (1.5.5) lib/rack/methodoverride.rb:21:in `call'\n - rack (1.5.5) lib/rack/runtime.rb:17:in `call'\n - activesupport (4.1.9) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'\n - actionpack (4.1.9) lib/action_dispatch/middleware/static.rb:84:in `call'\n - rack (1.5.5) lib/rack/sendfile.rb:112:in `call'\n - railties (4.1.9) lib/rails/engine.rb:514:in `call'\n - railties (4.1.9) lib/rails/application.rb:144:in `call'\n - rack (1.5.5) lib/rack/builder.rb:138:in `call'\n - rack (1.5.5) lib/rack/urlmap.rb:65:in `block in call'\n - rack (1.5.5) lib/rack/urlmap.rb:50:in `call'\n - rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'\n - rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'\n - rack-test (0.6.3) lib/rack/test.rb:58:in `get'\n - /usr/lib/ruby/2.2.0/forwardable.rb:183:in `get'\n - capybara (2.5.0) lib/capybara/rack_test/browser.rb:60:in `process'\n - capybara (2.5.0) lib/capybara/rack_test/browser.rb:35:in `process_and_follow_redirects'\n - capybara (2.5.0) lib/capybara/rack_test/browser.rb:21:in `visit'\n - capybara (2.5.0) lib/capybara/rack_test/driver.rb:42:in `visit'\n - capybara (2.5.0) lib/capybara/session.rb:232:in `visit'\n - capybara (2.5.0) lib/capybara/dsl.rb:51:in `block (2 levels) in &lt;module:DSL&gt;'\n - rspec-rails (3.2.0) lib/rspec/rails/example/feature_example_group.rb:28:in `visit'\n - spec/features/sign_in_feature_spec.rb:7:in `block (2 levels) in &lt;top (required)&gt;'\n - rspec-core (3.2.0) lib/rspec/core/example.rb:177:in `block in run'\n - rspec-core (3.2.0) lib/rspec/core/example.rb:385:in `block in with_around_and_singleton_context_hooks'\n - rspec-core (3.2.0) lib/rspec/core/example.rb:343:in `block in with_around_example_hooks'\n - rspec-core (3.2.0) lib/rspec/core/hooks.rb:474:in `block in run'\n - rspec-core (3.2.0) lib/rspec/core/hooks.rb:614:in `block in run_around_example_hooks_for'\n - rspec-core (3.2.0) lib/rspec/core/example.rb:247:in `call'\n - rspec-rails (3.2.0) lib/rspec/rails/adapters.rb:111:in `block (2 levels) in &lt;module:MinitestLifecycleAdapter&gt;'\n - rspec-core (3.2.0) lib/rspec/core/example.rb:333:in `instance_exec'\n - rspec-core (3.2.0) lib/rspec/core/hooks.rb:387:in `execute_with'\n - rspec-core (3.2.0) lib/rspec/core/hooks.rb:616:in `block (2 levels) in run_around_example_hooks_for'\n - rspec-core (3.2.0) lib/rspec/core/example.rb:247:in `call'\n - rspec-core (3.2.0) lib/rspec/core/hooks.rb:617:in `run_around_example_hooks_for'\n - rspec-core (3.2.0) lib/rspec/core/hooks.rb:474:in `run'\n - rspec-core (3.2.0) lib/rspec/core/example.rb:343:in `with_around_example_hooks'\n - rspec-core (3.2.0) lib/rspec/core/example.rb:385:in `with_around_and_singleton_context_hooks'\n - rspec-core (3.2.0) lib/rspec/core/example.rb:174:in `run'\n - rspec-core (3.2.0) lib/rspec/core/example_group.rb:548:in `block in run_examples'\n - rspec-core (3.2.0) lib/rspec/core/example_group.rb:544:in `run_examples'\n - rspec-core (3.2.0) lib/rspec/core/example_group.rb:512:in `run'\n - rspec-core (3.2.0) lib/rspec/core/runner.rb:110:in `block (3 levels) in run_specs'\n - rspec-core (3.2.0) lib/rspec/core/runner.rb:110:in `block (2 levels) in run_specs'\n - rspec-core (3.2.0) lib/rspec/core/configuration.rb:1526:in `with_suite_hooks'\n - rspec-core (3.2.0) lib/rspec/core/runner.rb:109:in `block in run_specs'\n - rspec-core (3.2.0) lib/rspec/core/reporter.rb:62:in `report'\n - rspec-core (3.2.0) lib/rspec/core/runner.rb:108:in `run_specs'\n - rspec-core (3.2.0) lib/rspec/core/runner.rb:86:in `run'\n - rspec-core (3.2.0) lib/rspec/core/runner.rb:70:in `run'\n - rspec-core (3.2.0) lib/rspec/core/runner.rb:38:in `invoke'\n - rspec-core (3.2.0) exe/rspec:4:in `&lt;top (required)&gt;'\n - ruby/2.1.0/bin/rspec:23:in `&lt;top (required)&gt;'\n - -e:1:in `&lt;main&gt;'\n</code></pre>\n\n<p>What can cause this backtrace? Is there some problem with the test environment configuration? When I switched to <code>ENV[\"RAILS_ENV\"] ||= 'development'</code> the problem persists, but if I run the application in development all is OK and after auth I see the correct page.</p>\n"}, {"tags": ["ruby", "http-headers", "xmlhttprequest"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1450218418, "post_id": 34300482, "comment_id": 56343229, "body": "No. As you&#39;ve discovered, this information is not reported in the HTTP headers, and there&#39;s not another way to get it. Can you clarify what problem you&#39;re trying to solve?"}, {"owner": {"reputation": 101, "user_id": 5670314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adf403e9be03a5e9d0b70ec36f5be758?s=128&d=identicon&r=PG&f=1", "display_name": "A.Roehl", "link": "https://stackoverflow.com/users/5670314/a-roehl"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1450276535, "post_id": 34300482, "comment_id": 56371091, "body": "I want to get the index file to complete a given relative path. If i have e.g. a link with the href attribute &#39;?page=login&#39; i want to complete this relative path to &#39;www.example.com/index.php?page=login&#39;. I know that &#39;www.example.com/?page=login&#39; is a valid path but the whole path including the index file looks a lot better."}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 5670314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adf403e9be03a5e9d0b70ec36f5be758?s=128&d=identicon&r=PG&f=1", "display_name": "A.Roehl", "link": "https://stackoverflow.com/users/5670314/a-roehl"}, "edited": false, "score": 0, "creation_date": 1450276232, "post_id": 34301274, "comment_id": 56370871, "body": "Thx for the answer, but that&#39;s not working for me. It always returns the url i&#39;ve defined in login_url without any file-extension."}, {"owner": {"reputation": 415, "user_id": 3170942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OE9Tj.jpg?s=128&g=1", "display_name": "holaymolay", "link": "https://stackoverflow.com/users/3170942/holaymolay"}, "reply_to_user": {"reputation": 101, "user_id": 5670314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adf403e9be03a5e9d0b70ec36f5be758?s=128&d=identicon&r=PG&f=1", "display_name": "A.Roehl", "link": "https://stackoverflow.com/users/5670314/a-roehl"}, "edited": false, "score": 0, "creation_date": 1450277480, "post_id": 34301274, "comment_id": 56371820, "body": "Not that it will solve your problem, but you might get some additional info by changing the last line of my example to &quot;puts page.headers&quot;"}, {"owner": {"reputation": 101, "user_id": 5670314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adf403e9be03a5e9d0b70ec36f5be758?s=128&d=identicon&r=PG&f=1", "display_name": "A.Roehl", "link": "https://stackoverflow.com/users/5670314/a-roehl"}, "edited": false, "score": 0, "creation_date": 1450278967, "post_id": 34301274, "comment_id": 56372899, "body": "Like i wrote in the question, i&#39;ve already tried to get the info from the returned http-header. But all webpages i&#39;&#39;ve tested don&#39;t send this information in their headers. Even the url you&#39;ve mentioned above didn&#39;t work for me (resolve error)."}], "tags": [], "owner": {"reputation": 415, "user_id": 3170942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OE9Tj.jpg?s=128&g=1", "display_name": "holaymolay", "link": "https://stackoverflow.com/users/3170942/holaymolay"}, "is_accepted": false, "score": 0, "last_activity_date": 1450221408, "creation_date": 1450221408, "answer_id": 34301274, "question_id": 34300482, "link": "https://stackoverflow.com/questions/34300482/get-the-default-webpage-file-name/34301274#34301274", "title": "Get the default webpage file name", "body": "<p>This will do it if there actually is a url that can be discerned. It works like a charm on some pages and not on others. </p>\n\n<p>It should work on the url I've used in my example...</p>\n\n<pre><code>require 'mechanize'\nrequire 'pp'\n\nagent = Mechanize.new\n\nlogin_url = 'http://www.reports.rtui.com'\n\npage = agent.get(login_url)\nputs page.uri\n</code></pre>\n\n<p>index.html is the standard default, but if you go to google.com they don't appear to have an index page. Instead it runs more like an application, serving content as its requested. </p>\n\n<p>I'm no pro by any measure, but based on my research there doesn't seem to be one magic bullet that does what you want. At least, not one that's obvious. It really depends on the page itself.</p>\n"}], "owner": {"reputation": 101, "user_id": 5670314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adf403e9be03a5e9d0b70ec36f5be758?s=128&d=identicon&r=PG&f=1", "display_name": "A.Roehl", "link": "https://stackoverflow.com/users/5670314/a-roehl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1450221408, "creation_date": 1450217828, "question_id": 34300482, "link": "https://stackoverflow.com/questions/34300482/get-the-default-webpage-file-name", "title": "Get the default webpage file name", "body": "<p>Is there a way to get the default web page of a given url in ruby?</p>\n\n<p>I'm looking for a function like </p>\n\n<pre><code>get_indexpage_for(\"www.example.com\")\n</code></pre>\n\n<p>with a result that's equal to something like </p>\n\n<pre><code>'index.html' or 'index.php' or 'index.htm' or ...\n</code></pre>\n\n<p>Even the HTTP-header doesn't contain this information and i've also looked at the Net::HTTP class but i couldn't find a solution.\nCan someone pls help?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 3, "last_activity_date": 1450218218, "creation_date": 1450218218, "answer_id": 34300584, "question_id": 34300396, "link": "https://stackoverflow.com/questions/34300396/ruby-haml-syntax/34300584#34300584", "title": "Ruby Haml Syntax", "body": "<p>You need to use <code>do</code> to indicate a Ruby block:</p>\n\n<pre><code>%nav\n  = my_link \"\", \"/\" do\n    = my_image_tag \"logo.png\" , :id =&gt; 'logo'\n</code></pre>\n"}], "owner": {"reputation": 1264, "user_id": 3073079, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/33012ca32ea371799d4c861c21d25a70?s=128&d=identicon&r=PG&f=1", "display_name": "9er", "link": "https://stackoverflow.com/users/3073079/9er"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 34300584, "answer_count": 1, "score": 1, "last_activity_date": 1450218218, "creation_date": 1450217517, "question_id": 34300396, "link": "https://stackoverflow.com/questions/34300396/ruby-haml-syntax", "title": "Ruby Haml Syntax", "body": "<p>I have written a wrapper function in my <code>config.rb</code> to prefix and postfix urls for our server.</p>\n\n<pre><code>def my_link(name = nil, options = nil, html_options = nil, &amp;block)\n  if DEV\n    link_to(name,options,html_options,&amp;block)\n  else\n    options[:href] = PREFIX + options[:href] + POSTFIX\n    link_to(name,options,html_options,&amp;block)\n  end\nend\n</code></pre>\n\n<p>and I've found a few instances which don't work as I'd expect.</p>\n\n<p>In my haml files I reference the function and it breaks saying</p>\n\n<pre><code>syntax error, unexpected keyword_ensure, expecting keyword_end\n</code></pre>\n\n<p>The part I don't understand is that it works fine with the <code>%a{:href=&gt;\"\"}</code> syntax.  </p>\n\n<p>my haml is as follows:</p>\n\n<p>this part worked:</p>\n\n<pre><code>%nav\n  %a{ href: \"/\"}\n    = my_image_tag \"logo.png\" , :id =&gt; 'logo'\n</code></pre>\n\n<p>but this dosen't</p>\n\n<pre><code>%nav\n  = my_link \"\", \"/\"\n    = my_image_tag \"logo.png\" , :id =&gt; 'logo'\n</code></pre>\n\n<p>any ideas?! </p>\n"}, {"tags": ["ruby", "thrift"], "answers": [{"comments": [{"owner": {"reputation": 9917, "user_id": 491682, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/39c51a972632a2d9e9d65fdd11acd1bd?s=128&d=identicon&r=PG", "display_name": "ethrbunny", "link": "https://stackoverflow.com/users/491682/ethrbunny"}, "edited": false, "score": 1, "creation_date": 1450217781, "post_id": 34300436, "comment_id": 56342899, "body": "The message is returned somewhat randomly. So the implication is that data is getting corrupted in a non-systematic fashion?"}], "tags": [], "owner": {"reputation": 12067, "user_id": 499466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cc0612ec9a2b6af96500cc6e4bfdc7c?s=128&d=identicon&r=PG", "display_name": "JensG", "link": "https://stackoverflow.com/users/499466/jensg"}, "is_accepted": true, "score": 1, "last_activity_date": 1450217955, "last_edit_date": 1450217955, "creation_date": 1450217685, "answer_id": 34300436, "question_id": 34300362, "link": "https://stackoverflow.com/questions/34300362/ruby-thrift-error-expected-protocol-id-126-but-got-60/34300436#34300436", "title": "ruby: thrift error - expected protocol id -126 but got 60", "body": "<p>The message is telling you that the data could not be deserialized, because they look corrupted. However, that does not mean that they really are corrupted.</p>\n\n<p>A very likely reason for this situation is that client and server do not use the exact same transport &amp; protocol stack. </p>\n\n<p>A typical mistake to produce such a situation is to use <code>TFramedTransport</code> on one end, while the other end does not. Thrift Transports may add (and expect) additional data to the data on the wire, and especially <code>TFramedTransport</code> does this by adding a 4-byte header which contains the frame size.</p>\n\n<p>It is worth mentioning that some server types implicitly expect the client to use <code>TFramedTransport</code>. So if you checked both ends and compared the protocol and transport stack used, this may be another reason.</p>\n"}], "owner": {"reputation": 9917, "user_id": 491682, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/39c51a972632a2d9e9d65fdd11acd1bd?s=128&d=identicon&r=PG", "display_name": "ethrbunny", "link": "https://stackoverflow.com/users/491682/ethrbunny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 782, "favorite_count": 0, "accepted_answer_id": 34300436, "answer_count": 1, "score": 1, "last_activity_date": 1450217955, "creation_date": 1450217340, "question_id": 34300362, "link": "https://stackoverflow.com/questions/34300362/ruby-thrift-error-expected-protocol-id-126-but-got-60", "title": "ruby: thrift error - expected protocol id -126 but got 60", "body": "<p>I'm using ruby 2.1.2 to stress test a java service as follows: </p>\n\n<pre><code>(begin thread)\nurl = \"http://service.ops.net/api\"\ntransport = Thrift::HTTPClientTransport.new(url)\nprotocol = Thrift::CompactProtocol.new(transport)\nclient = MyService::Client.new(protocol)\ntransport.open()\n\nclient.&lt;somefunctioncall&gt;\n(end thread)\n</code></pre>\n\n<p>...</p>\n\n<pre><code>(join thread)\n(exit and begin next pass)\n</code></pre>\n\n<p>This is called with a mix of valid and semi-valid params. This works ok as long as I only call one endpoint. If I thread out the calls to hit > 1 endpoint at a time (IE call two different functions from different threads) I start seeing exceptions like so:</p>\n\n<blockquote>\n  <p>`read_message_begin': Expected protocol id -126 but got 60 (Thrift::ProtocolException)</p>\n</blockquote>\n\n<p>I can't find a reasonable reference to know what this is telling me.</p>\n"}, {"tags": ["ruby", "openssl", "diffie-hellman"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1450419059, "post_id": 34300276, "comment_id": 56440495, "body": "<i>&quot;[how would the peer]... pick this message up and be able to have dh1&#39;s key&quot;</i> - that&#39;s the <a href=\"http://cs.wellesley.edu/~cs310/lectures/public_key_slides_handouts.pdf\" rel=\"nofollow noreferrer\">key distribution problem</a>. I think you need to perform some background reading. Does <code>OpenSSL::PKey::DH(256)</code> mean 256-bit in Ruby? If so, it likely needs to be larger than 1024-bit due to <a href=\"http://www.schneier.com/blog/archives/2015/05/the_logjam_and_.html\" rel=\"nofollow noreferrer\">logjam</a>."}], "answers": [{"tags": [], "owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1450218720, "creation_date": 1450218720, "answer_id": 34300709, "question_id": 34300276, "link": "https://stackoverflow.com/questions/34300276/ruby-openssl-diffie-hellman-implementation/34300709#34300709", "title": "ruby openssl diffie hellman implementation", "body": "<p>Yes a listening node could have dh1's public key. That is how Diffie Hellman works. The eavesdropper does not know either private key and does not know the shared private key. Without knowing one of the private keys it cannot solve for the shared key.</p>\n\n<p>The modulo equations are setup such that when dh2 raises dh1's public key to the value of its own private key (dh1_public_key^dh2_private_key) the result of the equation is the shared key, and vice versa. </p>\n"}], "owner": {"reputation": 49, "user_id": 5166732, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/e08c89b5eaa3760fae996096ba92c4d3?s=128&d=identicon&r=PG&f=1", "display_name": "Datz", "link": "https://stackoverflow.com/users/5166732/datz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 260, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1450218720, "creation_date": 1450217006, "question_id": 34300276, "link": "https://stackoverflow.com/questions/34300276/ruby-openssl-diffie-hellman-implementation", "title": "ruby openssl diffie hellman implementation", "body": "<p>I'm having some trouble implementing some security measures over a network for one of my school projects. We already have a full network running using Ruby. We're trying to use AES 256 CBC using the OpenSSL library. We have experimented with using Diffie Hellman, but this is where we're having trouble:\nnode 1 runs:</p>\n\n<pre><code>require 'openssl'\ndh1 = OpenSSL::PKey::DH(256)\nder = dh1.public_key.to_der\n###we would send der to n2 here\n</code></pre>\n\n<p>Apparently it's alright to send der over to n2, so n2 would have this portion of code:</p>\n\n<pre><code>require 'openssl'\ndh2 = OpenSSL::PKey::DH(der)\n</code></pre>\n\n<p>and now they have each others' information. However wouldn't a node which was listening to traffic be able to pick this message up and be able to have dh1's key? Having trouble wrapping my head around this.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "edited": false, "score": 0, "creation_date": 1450214547, "post_id": 34299458, "comment_id": 56341157, "body": "Why are you double clicking the text file instead of the exe file?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1450215263, "post_id": 34299458, "comment_id": 56341547, "body": "I think whatever you are doing, if possible, is a feature of the command window, and has nothing to do with Ruby."}, {"owner": {"reputation": 17, "user_id": 5683864, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cCvxUEyHrn8/AAAAAAAAAAI/AAAAAAAAf3M/lG_JI9XHVHo/photo.jpg?sz=128", "display_name": "Margal", "link": "https://stackoverflow.com/users/5683864/margal"}, "reply_to_user": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "edited": false, "score": 0, "creation_date": 1450270801, "post_id": 34299458, "comment_id": 56366951, "body": "@Mike: because the text file is a different file in a different directory every time... I actually do CNC programming as well. Every CNC program that I write has Z-axis values that cannot be greater than -0.005 inch. If it is larger than I may damage the CNC machine... Up until now, after writing each CNC program, we manually searched the G-code for those Z-axis values. I made this ruby program that does it for us, but like I mentioned earlier it is a bit less than ideal to use. Sometimes it is faster to manually search Z-values than open my ruby program and drag the file there..."}], "owner": {"reputation": 17, "user_id": 5683864, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cCvxUEyHrn8/AAAAAAAAAAI/AAAAAAAAf3M/lG_JI9XHVHo/photo.jpg?sz=128", "display_name": "Margal", "link": "https://stackoverflow.com/users/5683864/margal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1450213860, "creation_date": 1450213860, "question_id": 34299458, "link": "https://stackoverflow.com/questions/34299458/open-a-text-file-via-windows-double-click-with-ruby", "title": "open a text file via windows double click with ruby", "body": "<p>I'm fairly new to Ruby, so please excuse me if my question is too basic...</p>\n\n<p>I wrote a program that searches a text file for certain values. \nThe way it works is that when I run the program from command line it asks for the file to search through. So I drag the file over to the command window and press Enter. The program takes over and does what it's supposed to... I also created an exe file using Ocra just so I don't have to run it from command line.</p>\n\n<p>It works great, but I want to take it a step further. How can I modify my program to be able to double click the text file in Windows and have my program automatically open and do it's search?</p>\n"}, {"tags": ["ruby", "ibm-cloud-infrastructure"], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 5660396, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4dd907f8d2df4bc71d0579884901369d?s=128&d=identicon&r=PG&f=1", "display_name": "haunm", "link": "https://stackoverflow.com/users/5660396/haunm"}, "edited": false, "score": 0, "creation_date": 1450282231, "post_id": 34302115, "comment_id": 56375415, "body": "Thanks mcruz.  I also have success with other calls such as getHardware.  But this find_servers, although it says it accepts an object_mask option, does not seem to cooperate."}], "tags": [], "owner": {"reputation": 1536, "user_id": 5094381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67e8c1f673b4f8767f765f9253b566da?s=128&d=identicon&r=PG&f=1", "display_name": "mcruz", "link": "https://stackoverflow.com/users/5094381/mcruz"}, "is_accepted": false, "score": 1, "last_activity_date": 1450226544, "creation_date": 1450226544, "answer_id": 34302115, "question_id": 34299427, "link": "https://stackoverflow.com/questions/34299427/object-mask-not-working-for-ruby-softlayer-api-call-softlayerbaremetalserver-f/34302115#34302115", "title": "object_mask not working for Ruby SoftLayer API call SoftLayer::BareMetalServer.find_servers", "body": "<p>I was not able to get specific items using masks with \u201cBareMetalServer.find_servers\u201d, but below is another ruby example that may help you:</p>\n\n<pre><code>require 'rubygems'\nrequire 'softlayer_api'\n\n# Your SoftLayer API username.\nSL_API_USERNAME = 'set me'\n\n# Your SoftLayer API key.\nSL_API_KEY = 'set me'\n\nsoftlayer_client = SoftLayer::Client.new(:username =&gt; SL_API_USERNAME,\n                                         :api_key =&gt; SL_API_KEY)\n\naccount_service = softlayer_client.service_named('SoftLayer_Account')\n\n# Create an object mask to get more information than by default\nmask = 'mask[id,hostname]'\n\nbegin\n  result = account_service.object_mask(mask).getHardware\n  puts 'Process finished successfully'\n  p result\nrescue Exception =&gt; e\n  raise e\nend\n</code></pre>\n\n<p><strong>References:</strong></p>\n\n<pre><code>http://sldn.softlayer.com/reference/services/SoftLayer_Account/getHardware    \nhttps://softlayer.github.io/ruby/token_auth/\nhttps://softlayer.github.io/ruby/find_my_vms/\nhttps://softlayer.github.io/ruby/\nhttps://www.omniref.com/ruby/gems/softlayer_api/2.1.0\nhttps://github.com/softlayer/softlayer-ruby/blob/master/lib/softlayer/BareMetalServer.rb\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4368, "user_id": 5165832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7093683da5ea0a5d497732d01124de38?s=128&d=identicon&r=PG&f=1", "display_name": "Nelson Raul Cabero Mendoza", "link": "https://stackoverflow.com/users/5165832/nelson-raul-cabero-mendoza"}, "is_accepted": true, "score": 0, "last_activity_date": 1450283830, "creation_date": 1450283830, "answer_id": 34317355, "question_id": 34299427, "link": "https://stackoverflow.com/questions/34299427/object-mask-not-working-for-ruby-softlayer-api-call-softlayerbaremetalserver-f/34317355#34317355", "title": "object_mask not working for Ruby SoftLayer API call SoftLayer::BareMetalServer.find_servers", "body": "<p>Currently the ojectMask for the method find_servers does not limit the fields, it adds the fields of your object mask to the result. </p>\n\n<p>If you need to limit the fields, you could use the use \"map\" to create an array with just the fields you are interested in.</p>\n"}], "owner": {"reputation": 39, "user_id": 5660396, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4dd907f8d2df4bc71d0579884901369d?s=128&d=identicon&r=PG&f=1", "display_name": "haunm", "link": "https://stackoverflow.com/users/5660396/haunm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 34317355, "answer_count": 2, "score": 0, "last_activity_date": 1450283830, "creation_date": 1450213759, "question_id": 34299427, "link": "https://stackoverflow.com/questions/34299427/object-mask-not-working-for-ruby-softlayer-api-call-softlayerbaremetalserver-f", "title": "object_mask not working for Ruby SoftLayer API call SoftLayer::BareMetalServer.find_servers", "body": "<p>I'm having trouble getting an object_mask applied to the data I'm retrieving.  Here is a snippet of what I'm doing:</p>\n\n<pre><code>client = SoftLayer::Client.new(&lt;...hidden...&gt;)\n\n&lt;BREAK&gt;\n\nif (item[\"hostName\"])\n  machines = SoftLayer::BareMetalServer.find_servers({ :client =&gt; client, :hostname =&gt; item[\"hostName\"], :object_mask =&gt; \"[id,hostname,tagReferences]\"})\n\n    machines.each do |machine|\n    pp machine\n  end\nend\n</code></pre>\n\n<p>When I print \"machine\" it is still printing all the fields.  Thank you in advance for any help.</p>\n\n<pre><code>$ ruby -v\nruby 2.1.2p95 (2014-05-08 revision 45877) [x86_64-linux]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "macos", "ruby-on-rails-3", "osx-elcapitan"], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 1, "last_activity_date": 1450251597, "creation_date": 1450251597, "answer_id": 34306384, "question_id": 34299154, "link": "https://stackoverflow.com/questions/34299154/error-installing-rails-using-rbenv/34306384#34306384", "title": "Error installing Rails using rbenv", "body": "<p>When you get an <code>undefined method 'size' for nil:NilClass</code> error during running <code>bundle install</code> then a cached version of a gem is corrupt. Delete that cached version of that gem that causes the error (<code>~/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/cache/loofah-2.0.3.gem</code> in your case) and run <code>bundle install</code> again.</p>\n"}], "owner": {"reputation": 140, "user_id": 5027575, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-iXvfesVuiiQ/AAAAAAAAAAI/AAAAAAAAAEk/pYZUEqrANbk/photo.jpg?sz=128", "display_name": "Pouyan Khodabakhsh", "link": "https://stackoverflow.com/users/5027575/pouyan-khodabakhsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 264, "favorite_count": 0, "accepted_answer_id": 34306384, "answer_count": 1, "score": 1, "last_activity_date": 1450251597, "creation_date": 1450212705, "question_id": 34299154, "link": "https://stackoverflow.com/questions/34299154/error-installing-rails-using-rbenv", "title": "Error installing Rails using rbenv", "body": "<p>I use <strong>rbenv</strong> for installing Ruby-on-rails,i used <code>gem install rails</code> command, it seems it installs many dependencies without any problem but suddenly this error pops out:</p>\n\n<blockquote>\n  <p>ERROR:  Error installing rails:\n      invalid gem: package is corrupt, exception while verifying: undefined method `size' for nil:NilClass (NoMethodError) in /Users/pouyankhodabakhsh/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/cache/loofah-2.0.3.gem</p>\n</blockquote>\n\n<p>I could not find anything useful to deal with the error and have no idea why this is happening.Have somebody else got any similar errors? How did you fix it and how could i do so?</p>\n\n<p>I already installed Ruby 2.2.3 using ruby-build.I use a mac with El Capitan, Also i have the same problem trying to install <strong>bundler</strong> but i didn't have any errors during the installation of <strong>nokogiri</strong>.</p>\n"}, {"tags": ["ruby", "inspect"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1450214495, "post_id": 34298930, "comment_id": 56341125, "body": "Why would you think that printing the object particularly prints its <code>@first_name</code>? What if you had <code>@foo = &quot;foo&quot;; @bar = &quot;bar&quot;; @baz = &quot;baz&quot;; @first_name = fname</code> in your definition? Should it print <code>&quot;foo&quot;</code>? Or <code>&quot;bar&quot;</code>? or <code>&quot;foo bar&quot;</code>, or ... Which one? Or if you had an object that doesn&#39;t have the instance variable <code>@first_name</code>, then should it print nothing?"}], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 8, "last_activity_date": 1450212408, "last_edit_date": 1450212408, "creation_date": 1450212044, "answer_id": 34298985, "question_id": 34298930, "link": "https://stackoverflow.com/questions/34298930/how-do-i-change-the-way-objects-are-displayed/34298985#34298985", "title": "How do I change the way objects are displayed?", "body": "<p>Ruby cannot print an Object (present as a string) in a nice way without a proper <code>to_s</code> method. If there is no <code>to_s</code> method then Ruby's fallback is an internal method that just takes the class name and the object id.</p>\n\n<p>You need to add a <code>to_s</code> method to your model:</p>\n\n<pre><code>class Object\n  def initialize(fname)\n    @first_name = fname\n  end \n\n  def to_s\n    @first_name\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 4244831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f99a3e3c5f8298ea7a42c9062d14765a?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler", "link": "https://stackoverflow.com/users/4244831/tyler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1450214921, "creation_date": 1450211841, "last_edit_date": 1450214921, "question_id": 34298930, "link": "https://stackoverflow.com/questions/34298930/how-do-i-change-the-way-objects-are-displayed", "title": "How do I change the way objects are displayed?", "body": "<p>In this script, I take user input, pass it to an object, and then push that object into an array. I then iterate over that array:</p>\n\n<pre><code>objects_array = Array.new\n\nclass Object\n  def initialize(fname)\n    @first_name = fname\n  end\nend\n\nfname = gets.chomp\nuser_first = Object.new(fname)\nobjects_array &lt;&lt;  user_first\nobjects_array.each {|x| print x}\n</code></pre>\n\n<p>I gave the input <code>\"Tyler\"</code> from the terminal, and the results that I am expecting is:</p>\n\n<pre><code>Tyler\n</code></pre>\n\n<p>but I do not retrieve those results. Instead of the object string, I receive the memory location:</p>\n\n<pre><code>#&lt;Object:0x26f00b8&gt;\n</code></pre>\n\n<p>I am having trouble referencing the information of an object that is located in an array. What do I need to change to receive the information of the object in the array rather than the memory location?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 814, "user_id": 4059671, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/656640577/picture?type=large", "display_name": "Michael Cruz", "link": "https://stackoverflow.com/users/4059671/michael-cruz"}, "edited": false, "score": 0, "creation_date": 1450212746, "post_id": 34298889, "comment_id": 56340140, "body": "neither <code>@balance</code> nor <code>@balances</code> is being defined within the select action (unless they are defined by a before_action). Hence your first argument (<code>@balance</code>) is nil."}, {"owner": {"reputation": 1456, "user_id": 2903635, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/3f3ab51695511d5587f395f215fc2007?s=128&d=identicon&r=PG&f=1", "display_name": "Bhav", "link": "https://stackoverflow.com/users/2903635/bhav"}, "reply_to_user": {"reputation": 814, "user_id": 4059671, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/656640577/picture?type=large", "display_name": "Michael Cruz", "link": "https://stackoverflow.com/users/4059671/michael-cruz"}, "edited": false, "score": 0, "creation_date": 1450213304, "post_id": 34298889, "comment_id": 56340449, "body": "@MichaelCruz Yes, that is correct but how can I resolve this? I have a before_action in my BalancesController   before_action :set_balance, only: [:show, :edit, :update, :destroy]"}], "answers": [{"comments": [{"owner": {"reputation": 814, "user_id": 4059671, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/656640577/picture?type=large", "display_name": "Michael Cruz", "link": "https://stackoverflow.com/users/4059671/michael-cruz"}, "edited": false, "score": 0, "creation_date": 1450213863, "post_id": 34299389, "comment_id": 56340761, "body": "apologies if you read before I edited (I had <code>select</code> in place of <code>statement</code> for some reason...)"}, {"owner": {"reputation": 1456, "user_id": 2903635, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/3f3ab51695511d5587f395f215fc2007?s=128&d=identicon&r=PG&f=1", "display_name": "Bhav", "link": "https://stackoverflow.com/users/2903635/bhav"}, "edited": false, "score": 0, "creation_date": 1450214488, "post_id": 34299389, "comment_id": 56341119, "body": "No worries. I&#39;ve modified my OP with &#39;@dates&#39; instead of &#39;@balances&#39; to avoid confusion since I want to display the dates and I now receive a different error message as noted in my OP. I&#39;m also wondering whether &#39;form_for(@balance)&#39; is correct."}, {"owner": {"reputation": 814, "user_id": 4059671, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/656640577/picture?type=large", "display_name": "Michael Cruz", "link": "https://stackoverflow.com/users/4059671/michael-cruz"}, "reply_to_user": {"reputation": 1456, "user_id": 2903635, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/3f3ab51695511d5587f395f215fc2007?s=128&d=identicon&r=PG&f=1", "display_name": "Bhav", "link": "https://stackoverflow.com/users/2903635/bhav"}, "edited": false, "score": 0, "creation_date": 1450214803, "post_id": 34299389, "comment_id": 56341302, "body": "Since <code>@balance</code> is an existing record, this will submit the form to the <code>balances#update</code> action. If you want it to submit to another action, you will have to specify one <code>&lt;%= form_for(@balance, url: your_post_path) %&gt;</code>"}], "tags": [], "owner": {"reputation": 814, "user_id": 4059671, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/656640577/picture?type=large", "display_name": "Michael Cruz", "link": "https://stackoverflow.com/users/4059671/michael-cruz"}, "is_accepted": false, "score": 1, "last_activity_date": 1450213574, "creation_date": 1450213574, "answer_id": 34299389, "question_id": 34298889, "link": "https://stackoverflow.com/questions/34298889/populate-drop-down-list-with-data-and-use-selected-item-in-query-in-rails/34299389#34299389", "title": "Populate drop down list with data and use selected item in query in Rails", "body": "<p>Based on  your comments, simply add :statement to that before_action as follows:</p>\n\n<pre><code>before_action :set_balance, only: [:show, :edit, :update, :destroy, :statement]\n</code></pre>\n\n<p>Since you reference <code>@balances</code> from the form as well, you'll need to set this within the statement action on the controller.</p>\n\n<pre><code>def statement\n  @balances = Balance.all # Or whichever balances you want\n  # Your existing code here...\nend\n</code></pre>\n"}], "owner": {"reputation": 1456, "user_id": 2903635, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/3f3ab51695511d5587f395f215fc2007?s=128&d=identicon&r=PG&f=1", "display_name": "Bhav", "link": "https://stackoverflow.com/users/2903635/bhav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 778, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1450214641, "creation_date": 1450211647, "last_edit_date": 1450214641, "question_id": 34298889, "link": "https://stackoverflow.com/questions/34298889/populate-drop-down-list-with-data-and-use-selected-item-in-query-in-rails", "title": "Populate drop down list with data and use selected item in query in Rails", "body": "<p>I've got two basic Models:</p>\n\n<pre><code>- Account [id, name]\n- Balance [id, account_id, date, balance]\n</code></pre>\n\n<p>Their controllers contain the default code from scaffolding plus I've modified the balances controller with a 'statement' function.  This allows me to calculate the total balances of all the accounts at the most recent date stored in the balances table.</p>\n\n<p>This is currently fine and working as expected, and my statement view displays the data.</p>\n\n<p>However, how can I display a drop down list of all the 'dates' from the 'balances' table. And then set the @latestDate in the balances_controller.rb to the selected date in the drop down list.</p>\n\n<p>I've tried adding this in statement.html.erb:</p>\n\n<pre><code>  &lt;%= form_for(@balance) do |b| %&gt;\n    &lt;%= b.label :date %&gt;&lt;br&gt;\n    &lt;%= b.collection_select(:date, @dates, :id, :date) %&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<p>However, I'm not sure if this is the correct approach and this throws the following error:</p>\n\n<pre><code>Couldn't find Balance with 'id'=\n</code></pre>\n\n<p><strong>MY CODE:</strong></p>\n\n<p>account.rb</p>\n\n<pre><code>class Account &lt; ActiveRecord::Base\n  has_many :balances\n  validates :name, presence: true, length: { maximum: 250 },\n                  uniqueness: { case_sensitive: false }\nend\n</code></pre>\n\n<p>balance.rb</p>\n\n<pre><code>class Balance &lt; ActiveRecord::Base\n  belongs_to :account\n  validates :account, presence: true, length: { maximum: 250 }\nend\n</code></pre>\n\n<p>balances_controller.rb</p>\n\n<pre><code>  def index\n    @balances = Balance.all.order(date: :desc)\n  end\n\n  def new\n    @balance = Balance.new\n  end\n\n  def statement\n    @dates = Balance.all.order('date desc').dates\n    @latestDate = Balance.order('date desc').first.date\n\n    @summaryBalances = Balance.joins(:account).order('accounts.credit').where('date = :abc', {abc: @latestDate})\n\n    @assetTotal = Balance.joins(:account).where('date = :abc', {abc: @latestDate}).where(\"credit = 'f'\").sum(:balance)\n    @creditTotal = Balance.joins(:account).where('date = :abc', {abc: @latestDate}).where(\"credit = 't'\").sum(:balance)\n\n    @worth = @assetTotal - @creditTotal\n  end\n</code></pre>\n\n<p>balances/statement.html.erb</p>\n\n<pre><code>&lt;h1&gt;Statement at &lt;%= @latestDate %&gt;&lt;/h1&gt;\n\n&lt;p&gt;(showing all balances from the (select top 1 date from balances))&lt;/p&gt;\n\n&lt;div class=\"table-responsive\"&gt;\n&lt;table class=\"table\"&gt;\n  &lt;thead&gt;\n    &lt;tr&gt;\n      &lt;th&gt;Account&lt;/th&gt;\n      &lt;th&gt;Balance&lt;/th&gt;\n      &lt;th colspan=\"1\"&gt;&lt;/th&gt;\n    &lt;/tr&gt;\n  &lt;/thead&gt;\n\n  &lt;tbody&gt;\n    &lt;% @summaryBalances.each do |balance| %&gt;\n      &lt;tr&gt;\n          &lt;% if !(balance.account.credit) %&gt;\n            &lt;td&gt;&lt;%= balance.account.name %&gt;&lt;/td&gt;\n          &lt;% else %&gt;\n            &lt;td&gt;&lt;%= balance.account.name + ' (Credit)' %&gt;&lt;/td&gt;\n          &lt;% end %&gt;\n\n        &lt;td class='account-balance'&gt;&lt;%= number_to_currency(balance.balance, unit: \"\u00a3\") %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= link_to 'Edit', edit_balance_path(balance) %&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;% end %&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n&lt;/div&gt;\n\n&lt;h5&gt;Assets:&lt;/h5&gt;\n&lt;%= number_to_currency(@assetTotal, unit: \"\u00a3\") %&gt;\n&lt;h5&gt;Liabilities:&lt;/h5&gt;\n&lt;%= number_to_currency(@creditTotal, unit: \"\u00a3\") %&gt;\n&lt;h5&gt;Net Worth:&lt;/h5&gt;\n&lt;%= number_to_currency(@worth, unit: \"\u00a3\") %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "build", "sublimetext3"], "comments": [{"owner": {"reputation": 84, "user_id": 3573300, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zLoEI.jpg?s=128&g=1", "display_name": "richessler", "link": "https://stackoverflow.com/users/3573300/richessler"}, "edited": false, "score": 0, "creation_date": 1450211691, "post_id": 34298749, "comment_id": 56339522, "body": "What is your file named?"}, {"owner": {"reputation": 147, "user_id": 4762439, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh6.googleusercontent.com/-FRY5Tn64s5Y/AAAAAAAAAAI/AAAAAAAAAAw/7tJj4fS0Bm8/photo.jpg?sz=128", "display_name": "yamilelias", "link": "https://stackoverflow.com/users/4762439/yamilelias"}, "edited": false, "score": 0, "creation_date": 1450212314, "post_id": 34298749, "comment_id": 56339882, "body": "When I ruby -v in the console it appears: ruby 2.1.5p273 (2014-11-13 revision 48405) [i386-mingw32] like my post. My file name is beginning.rb"}], "answers": [{"comments": [{"owner": {"reputation": 329, "user_id": 1056055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Iceli.jpg?s=128&g=1", "display_name": "Nir Lanka", "link": "https://stackoverflow.com/users/1056055/nir-lanka"}, "edited": false, "score": 0, "creation_date": 1479640846, "post_id": 37841257, "comment_id": 68634885, "body": "For me, going <code>ctrl+shift+b</code> and selecting Ruby (from &#39;Ruby&#39; and &#39;Python&#39;) was the solution."}], "tags": [], "owner": {"reputation": 77, "user_id": 2117573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b57a082cecf13682785c51131538ee6?s=128&d=identicon&r=PG", "display_name": "BradP", "link": "https://stackoverflow.com/users/2117573/bradp"}, "is_accepted": true, "score": 2, "last_activity_date": 1466009141, "creation_date": 1466009141, "answer_id": 37841257, "question_id": 34298749, "link": "https://stackoverflow.com/questions/34298749/sublime-text-3-cant-compile-ruby/37841257#37841257", "title": "Sublime Text 3 can&#39;t compile ruby", "body": "<p>I was having the same issue. Saving the file before building it in Sublime Text resolved it.</p>\n\n<ol>\n<li>Save File </li>\n<li>ctrl + B to build </li>\n<li>Output appears in the build window</li>\n</ol>\n"}], "owner": {"reputation": 147, "user_id": 4762439, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh6.googleusercontent.com/-FRY5Tn64s5Y/AAAAAAAAAAI/AAAAAAAAAAw/7tJj4fS0Bm8/photo.jpg?sz=128", "display_name": "yamilelias", "link": "https://stackoverflow.com/users/4762439/yamilelias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 915, "favorite_count": 0, "accepted_answer_id": 37841257, "answer_count": 1, "score": 1, "last_activity_date": 1466009141, "creation_date": 1450211207, "last_edit_date": 1450229022, "question_id": 34298749, "link": "https://stackoverflow.com/questions/34298749/sublime-text-3-cant-compile-ruby", "title": "Sublime Text 3 can&#39;t compile ruby", "body": "<p>When I make a ruby file in Sublime Text 3 Beta (I downloaded it from here <a href=\"http://www.sublimetext.com/3\" rel=\"nofollow\">http://www.sublimetext.com/3</a>) and I press <kbd>Ctrl</kbd> + <kbd>B</kbd> to build it doesn't show anything. My ruby file is this one:</p>\n\n<pre><code>3.times { puts \"Hello World\" }\n</code></pre>\n\n<p>I checked my Ruby.sublime-build I found this:</p>\n\n<pre><code>\"cmd\": [\"ruby\", \"$file\"],\n\"file_regex\": \"^(...*?):([0-9]*):?([0-9]*)\",\n\"selector\": \"source.ruby\"\n</code></pre>\n\n<p>How can I make Sublime Text 3 Beta to build Ruby files? My computer SO is Windows 10 x64 and I have installed ruby 2.1.5p273 (2014-11-13 revision 48405) [i386-mingw32]. Also, the environment variable of ruby is in PATH: <code>C:\\RailsInstaller\\Ruby2.1.0\\bin</code>.</p>\n"}, {"tags": ["ruby", "line-endings"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1450212793, "post_id": 34298702, "comment_id": 56340161, "body": "I suspect you have a typo in your post: The line endings in your files are likely to be <code>\\n</code> and <code>\\r\\n</code>. <code>\\r</code> on its own is not usually considered a line ending."}, {"owner": {"reputation": 1621, "user_id": 974077, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/d68ac1c144c5c11137c64809817c43d2?s=128&d=identicon&r=PG", "display_name": "sorrell", "link": "https://stackoverflow.com/users/974077/sorrell"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1450212865, "post_id": 34298702, "comment_id": 56340201, "body": "@Jordan good catch!  I was just reading about the old Mac line endings of <code>\\r</code>! Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1450211798, "post_id": 34298877, "comment_id": 56339582, "body": "you&#39;d have to escape the slash right? so <code>&#47;[\\\\r\\\\n]+&#47;</code>"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1450211877, "post_id": 34298877, "comment_id": 56339628, "body": "an efficient way to read the first line would be to use <code>file = File.open(your_file); first_line = file.gets</code>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1450211972, "post_id": 34298877, "comment_id": 56339682, "body": "@Anthony I flagged your first comment as not constructive."}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1450212103, "post_id": 34298877, "comment_id": 56339765, "body": "sorry for not being constructive, but what am I missing here? <a href=\"http://rubular.com/r/lT5e9cPtKW\" rel=\"nofollow noreferrer\">rubular.com/r/lT5e9cPtKW</a>"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1450212235, "post_id": 34298877, "comment_id": 56339826, "body": "@Anthony: sawa&#39;s code is correct; those characters do not need to be escaped (unless you want to match a literal `\\`). However, s/he should not have flagged your comment, as you were obviously trying to be constructive."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1450212408, "post_id": 34298877, "comment_id": 56339923, "body": "@sawa I have flagged your most recent comment as not constructive. Also, your code will fail if the line contains an <code>\\r</code> character that isn&#39;t followed by <code>\\n</code>, e.g. <code>&quot;foo\\rbar\\r\\n&quot;</code>."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1450212515, "post_id": 34298877, "comment_id": 56339995, "body": "@Jordan Doesn&#39;t <code>\\r</code> count as a line end?"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1450212620, "post_id": 34298877, "comment_id": 56340067, "body": "No, <code>\\r</code> on its own is not a line ending. It&#39;s a <a href=\"https://en.wikipedia.org/wiki/Carriage_return#Computers\" rel=\"nofollow noreferrer\">carriage return</a>, which returns the cursor (or, in the case of printers &quot;back in the day,&quot; the actual, physical carriage) to the beginning of the same line."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1450212720, "post_id": 34298877, "comment_id": 56340123, "body": "@Jordan But that is what the OP wanted to detect, isn&#39;t it? The OP explicitly describes some are <code>\\r</code>, some are <code>\\r\\n</code>."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1450212844, "post_id": 34298877, "comment_id": 56340188, "body": "I believe that was a typo on OP&#39;s part. If OP has files with <code>\\r</code> for line endings that would be very unusual. I&#39;ve left a comment to that effect."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1450213063, "post_id": 34298877, "comment_id": 56340304, "body": "@Jordan That is a usual Mac file."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1450213334, "post_id": 34298877, "comment_id": 56340462, "body": "You&#39;re right\u2014if you&#39;re using a Mac made before 2001. I would very much like to see your implementation of a method for detecting line endings for <a href=\"https://en.wikipedia.org/wiki/Newline#Representations\" rel=\"nofollow noreferrer\">every historical encoding</a>."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1450214192, "post_id": 34298877, "comment_id": 56340939, "body": "@Jordan You don&#39;t need a Mac made before then. You need a file saved by a Mac made by then."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1450214895, "post_id": 34298877, "comment_id": 56341355, "body": "Yep. I made a safe assumption about the data OP is working with, which solved OP&#39;s immediate problem. You decided to make no such assumptions, which is fine and prudent, but your code, like mine, still fails for lines like <code>foo\\nbar\\r</code> when <code>\\r</code> is the correct line ending. &#175;\\_(\u30c4)_/&#175;"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1450215057, "post_id": 34298877, "comment_id": 56341437, "body": "@Jordan In the OP&#39;s original description, OP wrote about the other two forms, but didn&#39;t write that there is an isolated <code>\\n</code>, which implies that there is no such <code>\\n</code>. That is what I assumed."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1450215144, "post_id": 34298877, "comment_id": 56341486, "body": "That&#39;s okay. We all make mistakes."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1450215350, "post_id": 34298877, "comment_id": 56341612, "body": "@Jordan Whose mistakes?"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1450212977, "last_edit_date": 1450212977, "creation_date": 1450211613, "answer_id": 34298877, "question_id": 34298702, "link": "https://stackoverflow.com/questions/34298702/how-to-determine-line-ending-types-in-ruby/34298877#34298877", "title": "How to determine line ending types in Ruby", "body": "<p><strong>Edit</strong> The following is an answer to the original question, not the question after it has changed.</p>\n\n<p>When you have the first line <code>line</code>,</p>\n\n<pre><code>line[/[\\r\\n]+/]\n</code></pre>\n\n<p>will give you what line ending you have.</p>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1450212867, "post_id": 34298937, "comment_id": 56340203, "body": "The OP explicitly describes some are <code>\\r</code>, some are <code>\\r\\n</code>. You can capture <code>\\n</code> or <code>\\r\\n</code> instead."}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 2, "last_activity_date": 1450213601, "last_edit_date": 1450213601, "creation_date": 1450211855, "answer_id": 34298937, "question_id": 34298702, "link": "https://stackoverflow.com/questions/34298702/how-to-determine-line-ending-types-in-ruby/34298937#34298937", "title": "How to determine line ending types in Ruby", "body": "<p>To detect <code>\\n</code> and <code>\\r\\n</code> line endings, simply match the first line against the regular expression <code>/\\r?\\n$/</code>:</p>\n\n<pre><code>def determine_line_ending(filename)\n  File.open(filename, 'r') do |file|\n    return file.readline[/\\r?\\n$/]\n  end\nend\n\ndetermine_line_ending('./windows_file.csv')\n# =&gt; \"\\r\\n\"\n\ndetermine_line_ending('./unix_file.csv')\n# =&gt; \"\\n\"\n</code></pre>\n\n<p>This doesn't handle weird edge cases like the Mac OS 9 (discontinued in 2001) <code>\\r</code> line ending, but covers everything else. If you want some background on historical line endings, the <a href=\"https://en.wikipedia.org/wiki/Newline#Representations\" rel=\"nofollow\" title=\"Newline\">Wikipedia article</a> is pretty interesting.</p>\n"}], "owner": {"reputation": 1621, "user_id": 974077, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/d68ac1c144c5c11137c64809817c43d2?s=128&d=identicon&r=PG", "display_name": "sorrell", "link": "https://stackoverflow.com/users/974077/sorrell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 504, "favorite_count": 0, "accepted_answer_id": 34298937, "answer_count": 2, "score": 2, "last_activity_date": 1450213601, "creation_date": 1450211048, "last_edit_date": 1592644375, "question_id": 34298702, "link": "https://stackoverflow.com/questions/34298702/how-to-determine-line-ending-types-in-ruby", "title": "How to determine line ending types in Ruby", "body": "<p>I am using <a href=\"https://github.com/theodi/csvlint.rb\" rel=\"nofollow noreferrer\">CSVLint</a> to run some validation on flat files. The sources for the files can have varied line endings, some are <code>\\n</code>, some <code>\\r\\n</code>. The <code>Validator</code> constructor takes a <code>dialect</code> parameter where I need to specify the line ending type.</p>\n<p>Is there a good/quick/easy way to sample the first line of the flat file to determine the line ending type in Ruby?</p>\n<h2>Update</h2>\n<p>The answer below is the correct answer to my question.  If you need auto line endings in CSVLint, however, try this in the dialect:</p>\n<pre><code>&quot;lineTerminator&quot; =&gt; :auto\n</code></pre>\n<p>Also, @sawa's answer below pertains to my original question (and typo) of looking for <code>\\r</code> and <code>\\r\\n</code>.</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "jquery-select2"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1450210367, "post_id": 34298444, "comment_id": 56338790, "body": "did you try <code>selected: f.object.something</code>?"}, {"owner": {"reputation": 824, "user_id": 5651026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41e5ef638fe7e2bf9b5c3dfd092ebcc9?s=128&d=identicon&r=PG&f=1", "display_name": "xkcd149", "link": "https://stackoverflow.com/users/5651026/xkcd149"}, "edited": false, "score": 0, "creation_date": 1450210476, "post_id": 34298444, "comment_id": 56338841, "body": "Are you resetting the select2 value after successfully submitting?"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 824, "user_id": 5651026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41e5ef638fe7e2bf9b5c3dfd092ebcc9?s=128&d=identicon&r=PG&f=1", "display_name": "xkcd149", "link": "https://stackoverflow.com/users/5651026/xkcd149"}, "edited": false, "score": 0, "creation_date": 1450210576, "post_id": 34298444, "comment_id": 56338895, "body": "If I hit save on the edit form then it will reset whatever the value was unless I put the value back in @xkcd149"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1450210695, "post_id": 34298444, "comment_id": 56338973, "body": "I mean in html&#39;s <code>selected</code> option"}, {"owner": {"reputation": 824, "user_id": 5651026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41e5ef638fe7e2bf9b5c3dfd092ebcc9?s=128&d=identicon&r=PG&f=1", "display_name": "xkcd149", "link": "https://stackoverflow.com/users/5651026/xkcd149"}, "edited": false, "score": 0, "creation_date": 1450210696, "post_id": 34298444, "comment_id": 56338975, "body": "Can you provide a fiddle so we can see?"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 824, "user_id": 5651026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41e5ef638fe7e2bf9b5c3dfd092ebcc9?s=128&d=identicon&r=PG&f=1", "display_name": "xkcd149", "link": "https://stackoverflow.com/users/5651026/xkcd149"}, "edited": false, "score": 0, "creation_date": 1450409125, "post_id": 34298444, "comment_id": 56437679, "body": "Sorry @xkcd149 i dont know how"}], "answers": [{"comments": [{"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1450811077, "post_id": 34364992, "comment_id": 56587001, "body": "I&#39;m struggling with your code here. Is there no way to do it with <code>grouped_collection_select</code>?"}, {"owner": {"reputation": 9447, "user_id": 1380867, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5dc27a551f77074a1dcc431e4158704b?s=128&d=identicon&r=PG", "display_name": "MZaragoza", "link": "https://stackoverflow.com/users/1380867/mzaragoza"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1450813159, "post_id": 34364992, "comment_id": 56588087, "body": "what I do is I have a regular text field that then select2 makes it into a select field. What is important to know is that I use a class called <code>json_data</code> that jquery performs action on.  When Using select2 I like to include a hidden field with the same name of the as the field I want to use select2 on just in case of nil values. but its important to know that the data to populate the vales comes from the ajax url"}], "tags": [], "owner": {"reputation": 9447, "user_id": 1380867, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5dc27a551f77074a1dcc431e4158704b?s=128&d=identicon&r=PG", "display_name": "MZaragoza", "link": "https://stackoverflow.com/users/1380867/mzaragoza"}, "is_accepted": true, "score": 3, "last_activity_date": 1450478335, "last_edit_date": 1592644375, "creation_date": 1450478335, "answer_id": 34364992, "question_id": 34298444, "link": "https://stackoverflow.com/questions/34298444/select2-not-saving-input-for-edit/34364992#34364992", "title": "select2 not saving input for Edit", "body": "<p>This is what I do on my select2 fields</p>\n<pre><code>&lt;%= f.input :field_name, as: :select, collection: f.object.field_name, include_blank: false, selected: f.object.field_name, input_html: { class: &quot;json_data&quot; }, %&gt;\n</code></pre>\n<p><strong>json_data</strong> is how I make the text field into a select 2</p>\n<h1>coffee</h1>\n<pre><code>$('.json_datas').before ()-&gt;\n    &quot;&lt;input name='#{@.name}' type='hidden' /&gt;&quot;\n  $('.json_data').select2\n    allowClear: true,\n    placeholder: &quot;Select a value&quot;,\n    ajax:\n      url: '/api/call_to_data'\n      dataType: 'json'\n      delay: 250\n      data: (params) -&gt;\n        {\n          q: params.term\n          page: params.page\n        }\n      processResults: (data, page) -&gt;\n        # parse the results into the format expected by Select2.\n        # since we are using custom formatting functions we do not need to\n        # alter the remote JSON data\n        { results: data.items }\n      cache: true\n</code></pre>\n<p>I hope that this helps you</p>\n"}, {"comments": [{"owner": {"reputation": 171, "user_id": 5654057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bda494cccb0b45592f0c1ed9059be85?s=128&d=identicon&r=PG&f=1", "display_name": "Veets", "link": "https://stackoverflow.com/users/5654057/veets"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1450811473, "post_id": 34414363, "comment_id": 56587201, "body": "Sure, then set the :selected to the values you want when you render the form for editing, otherwise leave the :selected array blank."}, {"owner": {"reputation": 171, "user_id": 5654057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bda494cccb0b45592f0c1ed9059be85?s=128&d=identicon&r=PG&f=1", "display_name": "Veets", "link": "https://stackoverflow.com/users/5654057/veets"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1450811832, "post_id": 34414363, "comment_id": 56587393, "body": "Since you are using a form partial, you can pass a variable with the values for :selected option. While calling the form partial from new.html.erb, send this variable as [] and while calling the form partial from edit.html.erb pass this variable as [some_value] for :selected option. Therefore, the value in select box will only appear while editing the form. Hope, it helps!"}], "tags": [], "owner": {"reputation": 171, "user_id": 5654057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bda494cccb0b45592f0c1ed9059be85?s=128&d=identicon&r=PG&f=1", "display_name": "Veets", "link": "https://stackoverflow.com/users/5654057/veets"}, "is_accepted": false, "score": 0, "last_activity_date": 1450811972, "last_edit_date": 1450811972, "creation_date": 1450782142, "answer_id": 34414363, "question_id": 34298444, "link": "https://stackoverflow.com/questions/34298444/select2-not-saving-input-for-edit/34414363#34414363", "title": "select2 not saving input for Edit", "body": "<p>Since you are using the method grouped_collection_select for the select field, it would make more sense to pass the :selected value(s) in the options hash for select. Obviously, you can pass it as blank when you are calling the partial from new.html.erb and you can pass some value to select when you are calling the partial from edit.html.erb for editing.<br/>\nE.g.<br/>\n<code>grouped_collection_select(:city, :country_id, @continents, :countries, :name, :id, :name, { :selected =&gt; [1, 5, 6 ] } )</code></p>\n\n<p>Read more at: <a href=\"http://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/grouped_collection_select#1538-Preselecting-options\" rel=\"nofollow\">http://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/grouped_collection_select#1538-Preselecting-options</a></p>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1580, "favorite_count": 0, "accepted_answer_id": 34364992, "answer_count": 2, "score": 10, "last_activity_date": 1450811972, "creation_date": 1450210129, "question_id": 34298444, "link": "https://stackoverflow.com/questions/34298444/select2-not-saving-input-for-edit", "title": "select2 not saving input for Edit", "body": "<p>For some reason when a user goes to edit an entry none of the data he had inputted via <code>.select2</code> is shown. The data was saved though.</p>\n\n<pre><code>irb(main):001:0&gt; Routine.find(1)\n=&gt; #&lt;Routine id: 1, missed_days: 0, date_started: \"2015-10-24 04:00:00\", trigger: \"brew tea\", action: \"stretch\", user_id: 1, created_at: \"2015-11-24 21:55:25\", updated_at: \"2015-12-14 21:00:09\", committed: [\"sun\", \"mon\", \"tue\", \"wed\", \"thu\", \"fri\", \"sat\", \"\"], days_challenged: 30&gt;\n</code></pre>\n\n<p><strong>show.html.erb</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/f4j9t.png\"><img src=\"https://i.stack.imgur.com/f4j9t.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>edit.html.erb</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/bK3uo.png\"><img src=\"https://i.stack.imgur.com/bK3uo.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>_form.html.erb</strong></p>\n\n<pre><code>&lt;%= simple_form_for(@routine, remote: request.xhr?, html: { data: { modal: true } }) do |f| %&gt; \n  &lt;%= f.date_select :date_started, :order =&gt; [:month, :day, :year], class: 'date-select' %&gt;\n  &lt;%= f.collection_check_boxes :committed, Date::ABBR_DAYNAMES, :downcase, :to_s %&gt;\n  &lt;%= f.number_field :days_challenged, value: 30, class: 'day-challenge' %&gt; &lt;b&gt;Day Challenge\n  &lt;label&gt;After I&lt;/label&gt; \n    &lt;%= f.grouped_collection_select(:trigger, @trigger, :last, :first, :to_s, :to_s, include_blank: true) %&gt;&lt;font color=\"#DDD\"&gt;,&lt;/font&gt;\n  &lt;label&gt;I will&lt;/label&gt; \n    &lt;%= f.grouped_collection_select(:action, @action, :last, :first, :to_s, :to_s, include_blank: true) %&gt;.\n  &lt;%= button_tag(type: 'submit', class: \"btn\")  do %&gt;\n   Save\n  &lt;% end %&gt;\n&lt;% end %&gt;\n\n&lt;script&gt;\n  $(\"#routine_trigger\").select2({\n    placeholder: \"Existing Habit (Optional)\",\n    theme: \"classic\",\n    allowClear: false,\n    tags: true,\n    multiple: false,\n  });\n  $(\"#routine_action\").select2({\n    placeholder: \"Enter Challenge\",\n    allowClear: false,\n    tags: true,\n    multiple: false,\n  });\n&lt;/script&gt;\n</code></pre>\n\n<p><strong>routines_controller</strong></p>\n\n<pre><code>  def new\n    @trigger = \n    [\n    ['Morning', ['Get Out of Bed', 'Clean Up Breakfast', 'Brush My Teeth', 'Sit at Desk', 'Start My Computer']], \n    ['Afternoon', ['Drink Coffee', 'Read Email', 'Eat Lunch', 'Use the Bathroom', 'Go for a Walk']],\n    ['Evening', ['Enter My Home', 'Eat a Snack', 'Make a Drink', 'Shower', 'Finish Dinner']]\n    ]\n    @action = \n    [\n    ['Mind', ['Write 500 Words', 'Read a Chapter', 'Study 20 min', 'Watch a Ted Talk', 'Take a Picture']], \n    ['Body', ['Do 25 Pushups', 'Juice Cleanse', 'Walk 10,000 Steps', 'Exercise', 'Eat an Apple']],\n    ['Spirit', ['Meditate', 'Write 3 Gratitudes', 'Journal', 'Not Complain', 'Do a Random Act of Kindness']]\n    ]\n    if current_user == nil\n      @routine = Routine.new\n    else\n      @routine = current_user.routines.build\n      respond_modal_with @routine\n    end\n  end\n\n  def edit\n    @trigger = \n    [\n    ['Morning', ['Get Out of Bed', 'Clean Up Breakfast', 'Brush My Teeth', 'Sit at Desk', 'Start My Computer']], \n    ['Afternoon', ['Drink Coffee', 'Read Email', 'Eat Lunch', 'Use the Bathroom', 'Go for a Walk']],\n    ['Evening', ['Enter My Home', 'Eat a Snack', 'Make a Drink', 'Shower', 'Finish Dinner']]\n    ]\n    @action = \n    [\n    ['Mind', ['Write 500 Words', 'Read a Chapter', 'Study 20 min', 'Watch a Ted Talk', 'Take a Picture']], \n    ['Body', ['Do 25 Pushups', 'Juice Cleanse', 'Walk 10,000 Steps', 'Exercise', 'Eat an Apple']],\n    ['Spirit', ['Meditate', 'Write 3 Gratitudes', 'Journal', 'Not Complain', 'Do a Random Act of Kindness']]\n    ]\n    respond_modal_with @routine\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "post", "paypal"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1450209334, "post_id": 34298105, "comment_id": 56338177, "body": "Yes, your line of thought sounds good. That&#39;s how I would do it (user buys credits, then spends them on site activities)"}, {"owner": {"reputation": 1018, "user_id": 2908778, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/shRDJ.png?s=128&g=1", "display_name": "Seal", "link": "https://stackoverflow.com/users/2908778/seal"}, "edited": false, "score": 0, "creation_date": 1450213861, "post_id": 34298105, "comment_id": 56340759, "body": "I think your line of thought makes sense, as long as you can get the payments set up."}], "answers": [{"comments": [{"owner": {"reputation": 816, "user_id": 4235383, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh3.googleusercontent.com/-Ewhs105HKKY/AAAAAAAAAAI/AAAAAAAAPds/x3YyZQpYIWg/photo.jpg?sz=128", "display_name": "Rob Hughes", "link": "https://stackoverflow.com/users/4235383/rob-hughes"}, "edited": false, "score": 0, "creation_date": 1450262867, "post_id": 34298628, "comment_id": 56361395, "body": "Thanks for the reply, although I am in way over my head here. I am going to start by creating a new &#39;token&#39; model, and see if I can get it working without payment. If I am successful I&#39;ll implement payment and logging for the &#39;tokens&#39;."}], "tags": [], "owner": {"reputation": 3706, "user_id": 3700798, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LpxP2.png?s=128&g=1", "display_name": "svelandiag", "link": "https://stackoverflow.com/users/3700798/svelandiag"}, "is_accepted": true, "score": 2, "last_activity_date": 1450210790, "last_edit_date": 1489747555, "creation_date": 1450210790, "answer_id": 34298628, "question_id": 34298105, "link": "https://stackoverflow.com/questions/34298105/ruby-on-rails-pay-to-post-articles/34298628#34298628", "title": "Ruby on rails. Pay to post articles", "body": "<p>I would try to create a credit system, so users just have to purchase credits and you can just drive the user to purchase credits in case they do not have enough for create a listing:</p>\n\n<ul>\n<li><p>Simple one: Store the user' credit as balance field in the database, and all actions (\"add\", \"deduct\") are logged but not used to compute the latest balance. The balance-based way gives you fast access to the current amount</p></li>\n<li><p>History based: Don't store the balance in database. The balance is computed by looking at the history of transactions, e.g. (\"add\", \"deduct\"). The history-based way gives you auditing. The history table should store the transaction, a timestamp, the balance before the transaction happened, and ideally a way to track the funds' source/destination.</p></li>\n</ul>\n\n<p>You can use both. See the <a href=\"https://www.ruby-toolbox.com/search?utf8=%E2%9C%93&amp;q=bookkeeping\" rel=\"nofollow noreferrer\">Ruby toolbox for bookeeping</a> and <a href=\"https://github.com/mbulat/plutus\" rel=\"nofollow noreferrer\">Plutus</a></p>\n\n<p>I recommend also using logging, and ideally read about secure log verification and provable timestamp chaining.</p>\n\n<p>For logging details see <a href=\"https://security.stackexchange.com/questions/4320/techniques-for-ensuring-verifiability-of-event-log-files\">techniques for ensuring verifiability of event log files</a></p>\n"}], "owner": {"reputation": 816, "user_id": 4235383, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh3.googleusercontent.com/-Ewhs105HKKY/AAAAAAAAAAI/AAAAAAAAPds/x3YyZQpYIWg/photo.jpg?sz=128", "display_name": "Rob Hughes", "link": "https://stackoverflow.com/users/4235383/rob-hughes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 34298628, "answer_count": 1, "score": 1, "last_activity_date": 1450213767, "creation_date": 1450208922, "question_id": 34298105, "link": "https://stackoverflow.com/questions/34298105/ruby-on-rails-pay-to-post-articles", "title": "Ruby on rails. Pay to post articles", "body": "<p>I am have been using rails for about a week now and have created a website/app which for simplicity's sake we can call a job board. Users can create listings which other users can then apply for. Everything is working as desired. The next thing that I want to set up is the ability to charge users to create the listings. \n  After extensive searching, I can't find any tutorials that explain this process, just the typical cart and checkout for selling physical products.</p>\n\n<p>I have been pondering solutions but I wanted to consult here for pro advice.\nFor the payment process (at least for now) I will most likely use active merchant and Paypal as I am based in Europe.</p>\n\n<p>My current doubts are with setting up the modeling. </p>\n\n<p>Would it be better to create a new model eg. 'credits', have users purchase 'credits', then run a variable when trying to create a 'job', eg.  if_user_has_credits post the job else link to buy_credits_path, or is there a  more direct way of achieving this through the already functional user and jobs models?</p>\n\n<p>Any advice on setting up this functionality would be greatly appreciated.\nThanks.</p>\n"}]