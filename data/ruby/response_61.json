[{"tags": ["ruby", "version", "bundler", "versioning", "beta"], "answers": [{"tags": [], "owner": {"reputation": 11332, "user_id": 52499, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e13c0896a2408caf559934466737f716?s=128&d=identicon&r=PG", "display_name": "x-yuri", "link": "https://stackoverflow.com/users/52499/x-yuri"}, "is_accepted": true, "score": 0, "last_activity_date": 1457634548, "last_edit_date": 1592644375, "creation_date": 1457634548, "answer_id": 35924447, "question_id": 35904950, "link": "https://stackoverflow.com/questions/35904950/why-bundler-cant-resolve-dependencies-with-prerelease-versions/35924447#35924447", "title": "Why bundler can&#39;t resolve dependencies with prerelease versions?", "body": "<p>Here are the <a href=\"https://github.com/bundler/bundler/issues/2938\" rel=\"nofollow noreferrer\">related</a> <a href=\"https://github.com/bundler/bundler/issues/4340\" rel=\"nofollow noreferrer\">issues</a>:</p>\n<blockquote>\n<blockquote>\n<p>This is deliberate. Rubygems explicitly excludes prereleases unless the version requirement has an alphabetical number in it. So your version requirements, as stated, are actually in conflict. If you want a prerelease, use '&gt;= 2.2a'.</p>\n</blockquote>\n<p>I see how prerelease versions are complicated and what I'm about to say could cause problems but what I expected &quot;&gt;=2.2&quot; to mean is a) &quot;anything released 2.2 or greater&quot; and b) &quot;don't get a prerelease version on my account but if some other gem wants one I'm willing as long as its above 2.2&quot;. It seems that it only means (a).</p>\n<p>The problem gets more difficult when the dependency is not in my Gemfile but in a gem I use and I can't change the version to &quot;&gt;=2.2a&quot;.</p>\n</blockquote>\n"}], "owner": {"reputation": 11332, "user_id": 52499, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e13c0896a2408caf559934466737f716?s=128&d=identicon&r=PG", "display_name": "x-yuri", "link": "https://stackoverflow.com/users/52499/x-yuri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 35924447, "answer_count": 1, "score": 0, "last_activity_date": 1457634548, "creation_date": 1457567199, "question_id": 35904950, "link": "https://stackoverflow.com/questions/35904950/why-bundler-cant-resolve-dependencies-with-prerelease-versions", "title": "Why bundler can&#39;t resolve dependencies with prerelease versions?", "body": "<p>This way:</p>\n\n<pre><code>source 'https://rubygems.org'\ngem 'rspec-rails', '~&gt; 3.5.0.beta'\ngem 'json_spec'\n</code></pre>\n\n<p>It doesn't work:</p>\n\n<pre><code>Bundler could not find compatible versions for gem \"rspec-core\":\n  In Gemfile:\n    json_spec was resolved to 0.1.0, which depends on\n      rspec (~&gt; 2.0) was resolved to 2.0.0, which depends on\n        rspec-core (= 2.0.0)\n\n    rspec-rails (~&gt; 3.5.0.beta) was resolved to 3.5.0.beta1, which depends on\n      rspec-core (= 3.5.0.beta1)\n</code></pre>\n\n<p>This way:</p>\n\n<pre><code>source 'https://rubygems.org'\ngem 'rspec-rails', '~&gt; 3.5.0.beta'\ngem 'rspec', '~&gt; 3.5.0.beta'\ngem 'json_spec'\n</code></pre>\n\n<p>It works. Why so?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv"], "comments": [{"owner": {"reputation": 1477, "user_id": 1004379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6f5679275c965b9ea897e27026be433?s=128&d=identicon&r=PG", "display_name": "SacWebDeveloper", "link": "https://stackoverflow.com/users/1004379/sacwebdeveloper"}, "edited": false, "score": 0, "creation_date": 1457570901, "post_id": 35904872, "comment_id": 59471446, "body": "Please show the TransactionsController for the action that is erroring out."}, {"owner": {"reputation": 1709, "user_id": 2097600, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/337f01968631f01a66a35b2dee16a193?s=128&d=identicon&r=PG", "display_name": "Jordan", "link": "https://stackoverflow.com/users/2097600/jordan"}, "reply_to_user": {"reputation": 1477, "user_id": 1004379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6f5679275c965b9ea897e27026be433?s=128&d=identicon&r=PG", "display_name": "SacWebDeveloper", "link": "https://stackoverflow.com/users/1004379/sacwebdeveloper"}, "edited": false, "score": 0, "creation_date": 1457571694, "post_id": 35904872, "comment_id": 59471666, "body": "@SacWebDeveloper added above."}], "answers": [{"comments": [{"owner": {"reputation": 1709, "user_id": 2097600, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/337f01968631f01a66a35b2dee16a193?s=128&d=identicon&r=PG", "display_name": "Jordan", "link": "https://stackoverflow.com/users/2097600/jordan"}, "edited": false, "score": 1, "creation_date": 1457580383, "post_id": 35906855, "comment_id": 59474101, "body": "Thank you, this is better! However this still doesn&#39;t solve the original request. Any ideas on ignoring blanks?"}], "tags": [], "owner": {"reputation": 1477, "user_id": 1004379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6f5679275c965b9ea897e27026be433?s=128&d=identicon&r=PG", "display_name": "SacWebDeveloper", "link": "https://stackoverflow.com/users/1004379/sacwebdeveloper"}, "is_accepted": false, "score": 3, "last_activity_date": 1457579380, "creation_date": 1457579380, "answer_id": 35906855, "question_id": 35904872, "link": "https://stackoverflow.com/questions/35904872/rails-exporting-csv-ignore-blanks/35906855#35906855", "title": "Rails Exporting CSV ignore blanks", "body": "<p>If you want a link to download a CSV file, you should use <code>send_data</code> instead. If you want to display the file in the browser, use <code>render text: @shops.to_csv</code></p>\n\n<p><a href=\"http://railscasts.com/episodes/362-exporting-csv-and-excel\" rel=\"nofollow\">http://railscasts.com/episodes/362-exporting-csv-and-excel</a></p>\n\n<pre><code>respond_to :html, :json, :csv\n\ndef index\n  @shops = current_user.shops\n\n  respond_with(@shops) do |format|\n    format.csv do\n      send_data @shops.to_csv, type:'text/csv', filename: \"transactions-#{Time.now.strftime('%Y%m%d%H%M')}.csv\"\n    end\n  end\nend\n</code></pre>\n\n<p>Change your link_to back to what you had before.</p>\n\n<p><code>= link_to transactions_path(format: :csv)</code></p>\n"}, {"comments": [{"owner": {"reputation": 1709, "user_id": 2097600, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/337f01968631f01a66a35b2dee16a193?s=128&d=identicon&r=PG", "display_name": "Jordan", "link": "https://stackoverflow.com/users/2097600/jordan"}, "edited": false, "score": 0, "creation_date": 1459971947, "post_id": 36372402, "comment_id": 60533707, "body": "It would be great if this worked, it&#39;s so simple, but I&#39;m still getting an ERR_INVALID_RESPONSE"}], "tags": [], "owner": {"reputation": 760, "user_id": 1893784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b6b06692d59846baa2471771d3211f5?s=128&d=identicon&r=PG", "display_name": "Shishir", "link": "https://stackoverflow.com/users/1893784/shishir"}, "is_accepted": false, "score": 6, "last_activity_date": 1459873361, "last_edit_date": 1459873361, "creation_date": 1459594924, "answer_id": 36372402, "question_id": 35904872, "link": "https://stackoverflow.com/questions/35904872/rails-exporting-csv-ignore-blanks/36372402#36372402", "title": "Rails Exporting CSV ignore blanks", "body": "<p>Change to_csv to pass skip_blanks. </p>\n\n<pre><code> @shops.to_csv(skip_blanks: true)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8800, "user_id": 14533, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a8b289d40d80dc4f1a994f735a152f65?s=128&d=identicon&r=PG", "display_name": "Gustavo Rubio", "link": "https://stackoverflow.com/users/14533/gustavo-rubio"}, "is_accepted": false, "score": 1, "last_activity_date": 1459841812, "creation_date": 1459841812, "answer_id": 36419955, "question_id": 35904872, "link": "https://stackoverflow.com/questions/35904872/rails-exporting-csv-ignore-blanks/36419955#36419955", "title": "Rails Exporting CSV ignore blanks", "body": "<p>Maybe using <code>send_data</code>:</p>\n\n<pre><code>  def index\n    respond_to do |format|\n      format.csv { send_data @current_user.shops.to_csv, filename: \"transactions-#{Time.now.strftime('%Y%m%d%H%M')}.csv\" }\n    end\n  end\n</code></pre>\n\n<p>Also, is the <code>to_csv</code> an instance method?</p>\n"}], "owner": {"reputation": 1709, "user_id": 2097600, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/337f01968631f01a66a35b2dee16a193?s=128&d=identicon&r=PG", "display_name": "Jordan", "link": "https://stackoverflow.com/users/2097600/jordan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 465, "favorite_count": 0, "answer_count": 3, "score": 4, "last_activity_date": 1459873361, "creation_date": 1457566790, "last_edit_date": 1457571609, "question_id": 35904872, "link": "https://stackoverflow.com/questions/35904872/rails-exporting-csv-ignore-blanks", "title": "Rails Exporting CSV ignore blanks", "body": "<p>I'm trying to create a simple CSV export in Rails. The export works fine except when deleting/archiving table items. I'm guessing this is because the export is encountering blanks.</p>\n\n<p>This is working:</p>\n\n<pre><code>= link_to transactions_path(format: :csv) do\n</code></pre>\n\n<p>Except when there is a item missing from the transaction.</p>\n\n<p>Tried this</p>\n\n<pre><code>= link_to transactions_path(format: :csv,skip_blanks: true) do\n</code></pre>\n\n<p>but I still get a ERR_INVALID_RESPONSE when calling the export</p>\n\n<p>TransactionController:</p>\n\n<pre><code>respond_to :html, :json, :csv\n\ndef index\n   @shops = current_user.shops\n\n   respond_with(@shops) do |format|\n     format.csv do\n       response.headers['Content-Type']              = 'text/csv'\n       response.headers['Content-Disposition']       = \"attachment; filename=transactions-#{Time.now.strftime('%Y%m%d%H%M')}.csv\"\n\n       render inline: @shops.to_csv\n    end\n  end\nend\n</code></pre>\n\n<p>Any suggestions? </p>\n"}, {"tags": ["ruby", "module", "scope", "instance-variables", "class-variables"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1457567284, "post_id": 35904729, "comment_id": 59470219, "body": "Part of the answer is that to access module methods directly they must be, well, module methods, not instance methods. So you need to define <code>def self.hello_world...</code> to obtain <code>MyModule::SubModule.hello_world  =&gt; &quot;hello world!&quot;</code>. Alternatively, you can leave <code>hello_world</code> an instance method and add the line <code>extend self</code> at the end of <code>SubModule</code> to make <code>hello_world</code> a module method (as well as an instance method)."}], "answers": [{"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 3, "last_activity_date": 1457567293, "creation_date": 1457567293, "answer_id": 35904967, "question_id": 35904729, "link": "https://stackoverflow.com/questions/35904729/what-is-the-scope-of-variables-and-methods-included-via-ruby-modules/35904967#35904967", "title": "What is the scope of variables and methods included via ruby modules?", "body": "<blockquote>\n  <p>What is going on behind the scenes with regards to Var vs var? It appears that capitalizing a variable name is more than just a convention after all.</p>\n</blockquote>\n\n<p>Yes, of course, it's not a convention. Variables which start with an uppercase letter are constants, variables which start with a lowercase letter are local variables. The two are completely different.</p>\n\n<blockquote>\n  <p>When <code>include</code>ing a module, what kinds of things are passed to the including class, and at what scope?</p>\n</blockquote>\n\n<p>Nothing gets passed anywhere. <code>include</code>ing a mixin simply makes that mixin the superclass of the class you are <code>include</code>ing it into. That's all. Everything else then works exactly as with classes.</p>\n\n<blockquote>\n  <p>Is there a way to do the opposite? That is, use include to include an instance variable or a class method?</p>\n</blockquote>\n\n<p>I don't understand this question. Instance variables have nothing to do with mixins or classes. They belong to instances, that's why they are called \"instance\" variables.</p>\n\n<p>There are no such things as \"class methods\" in Ruby. Ruby only knows one kind of methods: instance methods. When Rubyists talk to each other, they will sometimes use the term \"class method\" to mean \"singleton method of an object that happens to be a class\", but they do that knowing full well that class methods don't actually exist, it's just a shorthand in conversation. (And, of course, singleton methods don't exist either, they are just a convenient way of saying \"instance method of the singleton class\".)</p>\n"}], "owner": {"reputation": 1286, "user_id": 976277, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9faba35232bd657d95cdf94e2f62e49b?s=128&d=identicon&r=PG", "display_name": "Teofrostus", "link": "https://stackoverflow.com/users/976277/teofrostus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 469, "favorite_count": 1, "accepted_answer_id": 35904967, "answer_count": 1, "score": 0, "last_activity_date": 1457567293, "creation_date": 1457566082, "question_id": 35904729, "link": "https://stackoverflow.com/questions/35904729/what-is-the-scope-of-variables-and-methods-included-via-ruby-modules", "title": "What is the scope of variables and methods included via ruby modules?", "body": "<p>Suppose I have the following:</p>\n\n<pre><code>module MyModule\n  module SubModule\n    Var = 'this is a constant'\n    var = 'this is not a constant'\n    def hello_world\n      return 'hello world!'\n    end\n  end\nend\n</code></pre>\n\n<p>In the same file, I can only seem to access <code>MyModule::SubModule::Var</code>, but not any the constant or the method. If I now create a class and include these modules in different ways, I get additional strange behavior:</p>\n\n<pre><code>class MyClass\n  include MyModule\n  def initialize()\n    puts SubModule::Var\n  end\n\n  def self.cool_method\n    puts SubModule::Var\n  end\nend\n</code></pre>\n\n<p>In this case, I can again only access <code>Var</code>, but not the other two. <code>SubModule::var</code> and <code>SubModule::hello_world</code> do not work. Finally:</p>\n\n<pre><code>class MyClass\n  include MyModule::SubModule\n  def initialize()\n    puts Var\n    puts hello_world\n  end\n  def self.cool_method\n    puts Var\n    puts hello_world\n  end\nend\n</code></pre>\n\n<p>In this case, I can now access both <code>Var</code> and the method <code>hello_world</code> but not <code>var</code>, and, the weirdest thing, is that <code>hello_world</code> appears to have become an instance method! That is, the call to <code>hello_world</code> in <code>initialize</code> works, but the one in <code>self.cool_method</code> doesn't. This is pretty strange, considering that <code>Var</code> seems to have been included as a class variable, since outside the class, I must access them like so:</p>\n\n<pre><code>MyClass::Var\nx = MyClass.new\nx.hello_world\n</code></pre>\n\n<p>So, I have a few major questions.</p>\n\n<ol>\n<li>What is going on behind the scenes with regards to <code>Var</code> vs <code>var</code>? It appears that capitalizing a variable name is more than just a convention after all.</li>\n<li>When <code>include</code>ing a module, what kinds of things are passed to the including class, and at what scope?</li>\n<li>Is there a way to do the opposite? That is, use include to include an instance variable or a class method?</li>\n</ol>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"tags": [], "owner": {"reputation": 5130, "user_id": 1443478, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4J9cr.jpg?s=128&g=1", "display_name": "Brennan", "link": "https://stackoverflow.com/users/1443478/brennan"}, "is_accepted": false, "score": 0, "last_activity_date": 1457563874, "creation_date": 1457563874, "answer_id": 35904296, "question_id": 35904146, "link": "https://stackoverflow.com/questions/35904146/accessing-mass-information-from-a-belongs-to-association/35904296#35904296", "title": "Accessing mass information from a belongs_to association", "body": "<p>Learning to use Ruby's enumerable methods will go a long way in helping you simplify code like this</p>\n\n<pre><code>parcs = Parcel.where(\"id &lt; ?\",30)\ndescriptions = parcs.map {|p| p.parcel_data.description }\ntotal_price = parcs.inject(0) {|sum, p| sum + p.parcel_data.price }\n</code></pre>\n\n<p><a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-map\" rel=\"nofollow\"><code>map</code> documentation </a></p>\n\n<p><a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-inject\" rel=\"nofollow\"><code>inject</code> documentation </a></p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 2669932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb452327f3036ce45b6dc1e75198c535?s=128&d=identicon&r=PG", "display_name": "user2669932", "link": "https://stackoverflow.com/users/2669932/user2669932"}, "edited": false, "score": 0, "creation_date": 1457624165, "post_id": 35904788, "comment_id": 59499974, "body": "Awesome.  That&#39;s a neat way to do it.  Thanks!"}], "tags": [], "owner": {"reputation": 1131, "user_id": 3592117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qIAYJ.jpg?s=128&g=1", "display_name": "Kimball", "link": "https://stackoverflow.com/users/3592117/kimball"}, "is_accepted": true, "score": 0, "last_activity_date": 1457646000, "last_edit_date": 1457646000, "creation_date": 1457566363, "answer_id": 35904788, "question_id": 35904146, "link": "https://stackoverflow.com/questions/35904146/accessing-mass-information-from-a-belongs-to-association/35904788#35904788", "title": "Accessing mass information from a belongs_to association", "body": "<p>As I enjoy point free style, I would consider:</p>\n\n<pre><code># the Enumerable#sum used here is Rails, not Ruby\nprice_sum = parcels.map(&amp;:parcel_data).compact.sum(&amp;:price)\n# plain old Ruby alternative, no Enumerable#sum\nprice_sum = parcels.map(&amp;:parcel_data).compact.map(&amp;:price).reduce(:+)\n\ndescription_array = parcels.map(&amp;:parcel_data).compact.map(&amp;:description)\n</code></pre>\n\n<p>The <code>Array#compact</code> is just in case you have parcels without data: if your association is mandatory, you may not need it.</p>\n\n<p>Eager loading for large datasets, if you're not doing it already, may save you spam in console and load on server. E.g., one way: <code>Parcel.where(\"id &lt; ?\", 30).includes(:parcel_data)</code></p>\n"}], "owner": {"reputation": 43, "user_id": 2669932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb452327f3036ce45b6dc1e75198c535?s=128&d=identicon&r=PG", "display_name": "user2669932", "link": "https://stackoverflow.com/users/2669932/user2669932"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 35904788, "answer_count": 2, "score": 2, "last_activity_date": 1457646000, "creation_date": 1457563260, "last_edit_date": 1457568222, "question_id": 35904146, "link": "https://stackoverflow.com/questions/35904146/accessing-mass-information-from-a-belongs-to-association", "title": "Accessing mass information from a belongs_to association", "body": "<p>I have the following models:</p>\n\n<pre><code>class Parcel &lt; ActiveRecord::Base\n  has_one :parcel_data\n  # has attribute \"parcel_name\", which is a string\nend\n\nclass ParcelData &lt; ActiveRecord::Base\n  belongs_to :parcels\n  # has attribute \"parcel_id\" which is an integer\n  # has attribute \"price\" which is an integer\n  # has attribute \"description\" which is a string\nend\n</code></pre>\n\n<p>I want to select a group of <code>Parcels</code>, and work with the related prices, or descriptions.</p>\n\n<p>Right now, I do something like this: </p>\n\n<pre><code>parcs = Parcel.where(\"id &lt; ?\",30)\ndescription_array = Array.new\nprice_sum = 0\n\nparcs.each do |p|\n    description_array.push(p.parcel_data.description)\n    price_sum += p.parcel_data.price\nend\n</code></pre>\n\n<p>Is there a better way to build the \"description_array\" array, or the \"price_sum\" value?</p>\n\n<p>I know this doesn't work, but something like:</p>\n\n<pre><code>price_sum = parcs.parcel_data.sum(:price)\ndescription_array = parcls.parcel_data.pluck(:description)\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "amazon-s3"], "answers": [{"tags": [], "owner": {"reputation": 345, "user_id": 4420252, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LLO_8GFB15w/AAAAAAAAAAI/AAAAAAAAABI/lgeAlg1UzRg/photo.jpg?sz=128", "display_name": "Eduardo Ramos", "link": "https://stackoverflow.com/users/4420252/eduardo-ramos"}, "is_accepted": true, "score": 1, "last_activity_date": 1457564370, "creation_date": 1457564370, "answer_id": 35904389, "question_id": 35904118, "link": "https://stackoverflow.com/questions/35904118/how-to-change-s3-bucket-url-to-bucket-first-then-url-second/35904389#35904389", "title": "How to change S3 bucket URL to bucket first then url second", "body": "<p>You can add a default url in <code>config/initializers/paperclip.rb</code> like this:</p>\n\n<pre><code>Paperclip::Attachment.default_options[:url] = ':s3_domain_url'\n</code></pre>\n\n<p>Or you can configure directly in your environment configuration, i.e. <code>config/environments/production.rb</code>:</p>\n\n<pre><code>config.paperclip_defaults = {\n    storage: :s3,\n    url: ':s3_domain_url',\n    ...\n}\n</code></pre>\n\n<p>It's <strong>important</strong> to note that <code>:s3_domain_url</code> is a string, not a symbol.</p>\n"}], "owner": {"reputation": 1130, "user_id": 4574914, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c27823d944d6c2125057e337c8700b97?s=128&d=identicon&r=PG&f=1", "display_name": "joeyk16", "link": "https://stackoverflow.com/users/4574914/joeyk16"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 575, "favorite_count": 0, "accepted_answer_id": 35904389, "answer_count": 1, "score": 1, "last_activity_date": 1457564370, "creation_date": 1457563174, "last_edit_date": 1457563952, "question_id": 35904118, "link": "https://stackoverflow.com/questions/35904118/how-to-change-s3-bucket-url-to-bucket-first-then-url-second", "title": "How to change S3 bucket URL to bucket first then url second", "body": "<p>I am creating a rails API app using Paperclip and aws-sdk gems. </p>\n\n<p>The app saves the URL as a string. The url saved is the following.</p>\n\n<p><a href=\"http://s3.amazonaws.com/__S3_BUCKET___/profiles/avatars/000/000/001/original/avatar.png?1457514823\" rel=\"nofollow\">http://s3.amazonaws.com/<strong>S3_BUCKET_</strong>/profiles/avatars/000/000/001/original/avatar.png?1457514823</a></p>\n\n<p>I cant open the above image. Its because the url for it when taken from s3 is the following</p>\n\n<p><a href=\"http://__S3_BUCKET___/s3.amazonaws.com//profiles/avatars/000/000/001/original/avatar.png?1457514823\" rel=\"nofollow\">http://<strong>S3_BUCKET_</strong>/s3.amazonaws.com//profiles/avatars/000/000/001/original/avatar.png?1457514823</a></p>\n\n<p>See how the bucket is first? But the url saved in the database has the bucket second? How do i change the saved URL to have the bucket first?</p>\n\n<pre><code>config/initializers/paperclip.rb\n\nPaperclip::Attachment.default_options.update(\n  default_url: \"https://#{Rails.application.secrets.bucket}.s3-ap-southeast-2.amazonaws.com/\" \\\n               \"/profiles/avatars/default/missing.jpg\")\n\n\n\nconfig/aws.yml\n\ndevelopment: &amp;defaults\n  access_key_id:     s3_access_key\n  secret_access_key: s3 secret key\n  s3_region:         ap-southeast-2\n\ntest:\n  secret_access_key: s3 secret key\n\nstaging:\n  &lt;&lt;: *defaults\n  access_key_id:     s3_access_key\n  secret_access_key: &lt;%= ENV[\"SECRET_KEY_BASE\"] %&gt;\n\nproduction:\n  &lt;&lt;: *defaults\n  access_key_id:     s3_access_key\n  secret_access_key: &lt;%= ENV[\"SECRET_KEY_BASE\"] %&gt;\n\n\n\nprofile.rb it has the attachment saved\n\nrequire \"base64\"\nclass Profile &lt; ActiveRecord::Base\n  belongs_to :user\n  validates :user, presence: true\n\n  has_attached_file :avatar, styles: { thumb: \"100x100&gt;\" }\n\n  validates_attachment_content_type :avatar, content_type: /image/i\n\n  def avatar_url\n    avatar &amp;&amp; avatar.url\n  end\n\n  def avatar_base64=(image_base64)\n    file = Paperclip.io_adapters.for(image_base64)\n    file.original_filename = file.content_type.sub(\"image/\", \"avatar.\")\n    self.avatar = file\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 1, "creation_date": 1457562795, "post_id": 35903967, "comment_id": 59468369, "body": "Use <code>build</code> in both cases and call <code>user_item.save</code> at the end."}, {"owner": {"reputation": 1949, "user_id": 4584963, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/03a8016a0af94bd53303411018a847e2?s=128&d=identicon&r=PG&f=1", "display_name": "user4584963", "link": "https://stackoverflow.com/users/4584963/user4584963"}, "reply_to_user": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1457562869, "post_id": 35903967, "comment_id": 59468406, "body": "Ok, do I have to build each one separately?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1457562907, "post_id": 35903967, "comment_id": 59468424, "body": "You can chain the <code>create</code> calls if you want: <code>user.user_items.create(name: &#39;foo&#39;).user_item_images.create(...)</code>. Note that using <code>create!</code> is usually safer since it&#39;ll explode in a spectacular way if it fails, so you can <code>rescue</code> accordingly."}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1457562935, "post_id": 35903967, "comment_id": 59468436, "body": "@tadman - It won&#39;t get through the validation, will it?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1457562982, "post_id": 35903967, "comment_id": 59468465, "body": "Ah, you&#39;re right. If you&#39;ve got a circular dependency you need to adjust your validator to chill out on the <code>create</code> step or you can never make it work."}, {"owner": {"reputation": 1949, "user_id": 4584963, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/03a8016a0af94bd53303411018a847e2?s=128&d=identicon&r=PG&f=1", "display_name": "user4584963", "link": "https://stackoverflow.com/users/4584963/user4584963"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1457563187, "post_id": 35903967, "comment_id": 59468572, "body": "@tadman what do you mean by chill out on the create step?  Remove the requirement requirement of having a <code>user_item_image</code>?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1457563497, "post_id": 35903967, "comment_id": 59468722, "body": "You need to relax your validations in order to allow this to happen, they can be set to trigger only on initial create or only on updates, or use the approach advocated by BroiSatse below which I think is also a good approach."}], "answers": [{"comments": [{"owner": {"reputation": 1949, "user_id": 4584963, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/03a8016a0af94bd53303411018a847e2?s=128&d=identicon&r=PG&f=1", "display_name": "user4584963", "link": "https://stackoverflow.com/users/4584963/user4584963"}, "edited": false, "score": 0, "creation_date": 1457563535, "post_id": 35904172, "comment_id": 59468737, "body": "What do you mean by bang for safety?"}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "reply_to_user": {"reputation": 1949, "user_id": 4584963, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/03a8016a0af94bd53303411018a847e2?s=128&d=identicon&r=PG&f=1", "display_name": "user4584963", "link": "https://stackoverflow.com/users/4584963/user4584963"}, "edited": false, "score": 0, "creation_date": 1457563786, "post_id": 35904172, "comment_id": 59468849, "body": "I used <code>save!</code> instead of <code>save</code>. The exlamation mark at the end of method name is comonly referred as bang and the method itself is a <code>banged version</code>. Which one you need to use depends on the place and the way this creation is expected to be used in your code. If this is to be model method, add bang to the method name and use banged version. In controller, you can directly test outcome of un-banged <code>save</code>."}], "tags": [], "owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "is_accepted": true, "score": 4, "last_activity_date": 1457563559, "last_edit_date": 1457563559, "creation_date": 1457563421, "answer_id": 35904172, "question_id": 35903967, "link": "https://stackoverflow.com/questions/35903967/rails-create-child-and-childs-child-at-the-same-time/35904172#35904172", "title": "Rails - create child and child&#39;s child at the same time", "body": "<p>Firstly <code>build</code> both items and then save the parent. This will work because:</p>\n\n<ol>\n<li>Validations are only called when saving the object in the database</li>\n<li>Saving unsaved parent automatically saves all associated objects (via has_one and has_many, belongs_to object won't be saved without autosave option)</li>\n<li>Validation is (most likely) based on the association and association includes non-saved but assigned objects in its target. Note however that you cannot use <code>count</code> in your validation, as it performs <code>COUNT</code> query and non-saved objects won't be included. Use <code>size</code> instead, or to be super sure (as <code>size</code> calls count for non-loaded associations) <code>.to_a.size</code> </li>\n</ol>\n\n<p>Your code should like like:</p>\n\n<pre><code>user_item = user.user_items.build(name: 'foo')\nuser_item.user_item_images.build(picture: file)\nuser_item.save! # Bang for safety. If in controller, you can fork with if instead\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2231, "user_id": 1238868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b9884f1eabc8587f2c9dfd2b1ccf9a6?s=128&d=identicon&r=PG", "display_name": "Michael Chaney", "link": "https://stackoverflow.com/users/1238868/michael-chaney"}, "is_accepted": false, "score": 1, "last_activity_date": 1457564439, "creation_date": 1457564439, "answer_id": 35904406, "question_id": 35903967, "link": "https://stackoverflow.com/questions/35903967/rails-create-child-and-childs-child-at-the-same-time/35904406#35904406", "title": "Rails - create child and child&#39;s child at the same time", "body": "<p>BroiSatse has a correct answer.  If you really want to do it in one single line you can:</p>\n\n<pre><code>user_item = user.user_items.create!(name: 'foo', user_item_images_attributes: { picture: file })\n</code></pre>\n\n<p>In my own code I usually make it look like BroiSatse's code simply for the sake of readability and maintainability - build the initial object, add related items, then save.  It might be a little faster to do it with the single line, but unless you're doing it millions of times it's unlikely to make a difference.</p>\n"}], "owner": {"reputation": 1949, "user_id": 4584963, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/03a8016a0af94bd53303411018a847e2?s=128&d=identicon&r=PG&f=1", "display_name": "user4584963", "link": "https://stackoverflow.com/users/4584963/user4584963"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1430, "favorite_count": 0, "accepted_answer_id": 35904172, "answer_count": 2, "score": 1, "last_activity_date": 1457564439, "creation_date": 1457562513, "question_id": 35903967, "link": "https://stackoverflow.com/questions/35903967/rails-create-child-and-childs-child-at-the-same-time", "title": "Rails - create child and child&#39;s child at the same time", "body": "<p>I have an association where <code>user</code> has_many <code>user_items</code> and <code>user_items</code> has_many <code>user_item_images</code>.  With an already exiting <code>user</code>. I can create a new <code>user_item</code></p>\n\n<pre><code>user_item = user.user_items.create(name: 'foo')\n</code></pre>\n\n<p>and I can create a new <code>user_item_image</code></p>\n\n<pre><code>user_item.user_item_images.create(picture: file)\n</code></pre>\n\n<p>But I have a validation on <code>user_item</code> where a <code>user_item</code> can't exist without a <code>user_item_image</code>.</p>\n\n<p>How can I create these two at the same time?</p>\n"}, {"tags": ["ruby", "rack", "newrelic"], "answers": [{"tags": [], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "is_accepted": false, "score": 1, "last_activity_date": 1458073696, "creation_date": 1458073696, "answer_id": 36021477, "question_id": 35903661, "link": "https://stackoverflow.com/questions/35903661/how-to-instrument-new-relic-for-rack-app/36021477#36021477", "title": "How to instrument New Relic for Rack app?", "body": "<pre><code>class App\n  def self.call env\n    NewRelic::Agent.set_transaction_name \"#{ env[ 'REQUEST_METHOD' ]} #{ env[ 'PATH_INFO' ]}\", category: :sinatra\n</code></pre>\n\n<p>It is not necessary to tell New Relic to instrument the call method because it does that automatically. </p>\n\n<p>I set a transaction name because otherwise the name of all transactions is \"call\".</p>\n"}], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1460480727, "creation_date": 1457561378, "last_edit_date": 1460480727, "question_id": 35903661, "link": "https://stackoverflow.com/questions/35903661/how-to-instrument-new-relic-for-rack-app", "title": "How to instrument New Relic for Rack app?", "body": "<p>Instead of seeing the web requests like <code>POST /foo</code>, I see only <code>App#call</code> for a Rack app.</p>\n\n<p>How to set up New Relic instrumentation for each HTTP request?</p>\n"}, {"tags": ["ruby", "minitest"], "comments": [{"owner": {"reputation": 5130, "user_id": 1443478, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4J9cr.jpg?s=128&g=1", "display_name": "Brennan", "link": "https://stackoverflow.com/users/1443478/brennan"}, "edited": false, "score": 1, "creation_date": 1457561512, "post_id": 35903642, "comment_id": 59467722, "body": "The delay is because there are other actions that must be performed before running the test. If you want accurate timing, do it from directly in ruby]"}, {"owner": {"reputation": 14450, "user_id": 438615, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Dseeq.jpg?s=128&g=1", "display_name": "Jonah", "link": "https://stackoverflow.com/users/438615/jonah"}, "reply_to_user": {"reputation": 5130, "user_id": 1443478, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4J9cr.jpg?s=128&g=1", "display_name": "Brennan", "link": "https://stackoverflow.com/users/1443478/brennan"}, "edited": false, "score": 0, "creation_date": 1457561844, "post_id": 35903642, "comment_id": 59467890, "body": "Not sure I understand your comment, but the bash time is the one that&#39;s relevant for me.  I currently use guard to automatically re-run tests when files change, piping results into growl for my TDD cycle.  If my test takes 0.001s, I want the results to appear in growl instantly after I click save.  Guard itself picks up the change almost instantly, so I want to get rid of the minitest &quot;infrastructure&quot; delay somehow."}, {"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 1, "creation_date": 1457562524, "post_id": 35903642, "comment_id": 59468244, "body": "If you are shelling out to a Ruby command in your workflow, then there is not much &quot;pre-loading&quot; you can do. E.g. try just <code>time ruby -rminitest -e &#39;&#39;</code>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1457563049, "post_id": 35903642, "comment_id": 59468503, "body": "If you want to run benchmarks, you should be using <a href=\"http://ruby-doc.org/stdlib-2.3.0/libdoc/benchmark/rdoc/Benchmark.html\" rel=\"nofollow noreferrer\">Benchmark</a>."}, {"owner": {"reputation": 14450, "user_id": 438615, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Dseeq.jpg?s=128&g=1", "display_name": "Jonah", "link": "https://stackoverflow.com/users/438615/jonah"}, "reply_to_user": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1457563310, "post_id": 35903642, "comment_id": 59468638, "body": "@NeilSlater, Ok, that helped.  Your command ran in 0.15s.  It turned out that my 0.43 was being caused by including &#39;minitest/autorun&#39;.  After taking that out, my test runs in 0.15 from the command line.  However, the delay is still longer than that before my growl notification pops up.  It&#39;s strange, when I watch the test run, it&#39;s as if it&#39;s taking longer in the command line output when guard runs it than when I run it myself in bash..."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1457563748, "post_id": 35903642, "comment_id": 59468834, "body": "@Jonah The latency of Growl will depend on how frequently and quickly the OS hands Growl filesystem change events (probably via fsevents) and how fast Growl processes them than how fast Ruby runs. Add a Growl change notification that does nothing but print and see what the delay is."}, {"owner": {"reputation": 14450, "user_id": 438615, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Dseeq.jpg?s=128&g=1", "display_name": "Jonah", "link": "https://stackoverflow.com/users/438615/jonah"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1457564468, "post_id": 35903642, "comment_id": 59469147, "body": "@Schwern, I have ruled out Growl and guard, as I can literally see that the latency occurs during the test itself in the console output as guard runs (ie, guard starts instantly after hitting save, and growl shows a notification instantly after the test finishes).  I think the problem must be in guard-minitest, I&#39;m investigating that now..."}], "owner": {"reputation": 14450, "user_id": 438615, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Dseeq.jpg?s=128&g=1", "display_name": "Jonah", "link": "https://stackoverflow.com/users/438615/jonah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1457561300, "creation_date": 1457561300, "question_id": 35903642, "link": "https://stackoverflow.com/questions/35903642/remove-half-second-delay-when-minitest-starts", "title": "Remove half second delay when minitest starts?", "body": "<p>Consider this output when I use the bash <code>time</code> utility to benchmark a trivial minitest run:</p>\n\n<pre><code>$time ruby spec/trivial_spec.rb \nRun options: --seed 4156\n\n# Running:\n\n.\n\nFinished in 0.001077s, 928.9209 runs/s, 928.9209 assertions/s.\n\n1 runs, 1 assertions, 0 failures, 0 errors, 0 skips\n\n\nreal    0m0.443s\nuser    0m0.341s\nsys 0m0.083s\n</code></pre>\n\n<p>As you can see, the test itself runs almost instantly (0.001s), but actually <em>permorming that test</em> takes nearly half a second, presumably because of the load time of minitest itself.</p>\n\n<p>Is there any way to remove this delay?  Either through minitest config options or perhaps using another tool that preloads it?</p>\n"}, {"tags": ["ruby", "parallel-processing"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1457561723, "post_id": 35903526, "comment_id": 59467832, "body": "Write your question in the form of a question, setting it up with the appropriate issues you ran into, as if it was a &quot;real&quot; question, which it really is."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1457566505, "post_id": 35903526, "comment_id": 59469944, "body": "That helps. You might show your old attempt, since your answer says you got a ~100x speed-up. Think of a self-answered Q/A like this: Because SO is a reference-book/cookbook of programming questions with answers, it&#39;d help people who are searching for a similar solution to know where you started."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1457563152, "post_id": 35903541, "comment_id": 59468558, "body": "This is a pretty good solution, but if some batches run more quickly than others you&#39;ll have threads shutting down while there&#39;s still work to do. A <a href=\"http://ruby-doc.org/core-2.3.0/Queue.html\" rel=\"nofollow noreferrer\">Queue</a> object is useful for spreading work across N threads."}, {"owner": {"reputation": 7079, "user_id": 134077, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/35887d936c9e5c6bac12624021c93b68?s=128&d=identicon&r=PG", "display_name": "crizCraig", "link": "https://stackoverflow.com/users/134077/crizcraig"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1457565739, "post_id": 35903541, "comment_id": 59469643, "body": "Agreed, a Queue with a pool of threads pulling in tasks would be more efficient. In my case, each operation took roughly the same time, so this worked well."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1457566892, "post_id": 35903541, "comment_id": 59470086, "body": "You might want to reconsider using <code>&quot;&quot;&quot;</code> in Ruby code. Ruby isn&#39;t Python. <a href=\"http://stackoverflow.com/q/28511229/128421\">stackoverflow.com/q/28511229/128421</a>"}, {"owner": {"reputation": 308, "user_id": 1986828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/96txi.jpg?s=128&g=1", "display_name": "Amias", "link": "https://stackoverflow.com/users/1986828/amias"}, "edited": false, "score": 0, "creation_date": 1499676338, "post_id": 35903541, "comment_id": 76988410, "body": "this will be fine as long as the blocks are well behaved and don&#39;t block. You probably want to keep track the outcomes of the threads with some logging."}], "tags": [], "owner": {"reputation": 7079, "user_id": 134077, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/35887d936c9e5c6bac12624021c93b68?s=128&d=identicon&r=PG", "display_name": "crizCraig", "link": "https://stackoverflow.com/users/134077/crizcraig"}, "is_accepted": false, "score": 2, "last_activity_date": 1457574188, "last_edit_date": 1457574188, "creation_date": 1457560917, "answer_id": 35903541, "question_id": 35903526, "link": "https://stackoverflow.com/questions/35903526/how-to-fan-out-an-i-o-bound-task-in-ruby/35903541#35903541", "title": "How to fan out an I/O bound task in Ruby?", "body": "<p>The following method worked great for me, yielding a ~100x speedup:</p>\n\n<pre><code>#  A method to parallelize an operation across a collection.\n#  Example:\n#\n#  fan_out [1, 2, 3, 4], 2 do |batch|\n#    puts batch.to_s\n#  end\n#\n#  out &gt;&gt;\n#  [3, 4]\n#  [1, 2]\ndef fan_out(arr, num_batches, &amp;block)\n  threads = []\n  arr.each_slice(arr.size / num_batches).each do |batch|\n    threads &lt;&lt; Thread.new {\n      block.call(batch)\n    }\n  end\n  threads.each(&amp;:join)\nend\n</code></pre>\n"}], "owner": {"reputation": 7079, "user_id": 134077, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/35887d936c9e5c6bac12624021c93b68?s=128&d=identicon&r=PG", "display_name": "crizCraig", "link": "https://stackoverflow.com/users/134077/crizcraig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1457574188, "creation_date": 1457560853, "last_edit_date": 1457566338, "question_id": 35903526, "link": "https://stackoverflow.com/questions/35903526/how-to-fan-out-an-i-o-bound-task-in-ruby", "title": "How to fan out an I/O bound task in Ruby?", "body": "<p>I'm making a bunch of AWS calls to create/delete rules from security groups and want to speed things up with parallelization. </p>\n\n<p>Is there a general way to parallelize an I/O bound operation across a fixed size collection? A method that takes a collection, batch size, and functional block would be nice.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "ruby-on-rails-4", "model-view-controller"], "answers": [{"comments": [{"owner": {"reputation": 980, "user_id": 3625851, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/qNbIC.png?s=128&g=1", "display_name": "Levvy", "link": "https://stackoverflow.com/users/3625851/levvy"}, "edited": false, "score": 0, "creation_date": 1457570310, "post_id": 35903823, "comment_id": 59471278, "body": "{:date_link_added=&gt;[&quot;can&#39;t be blank&quot;], :site=&gt;[&quot;can&#39;t be blank&quot;], :job_category=&gt;[&quot;can&#39;t be blank&quot;]}"}, {"owner": {"reputation": 5962, "user_id": 115159, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ac02a81e50f368f6d5c7a14b99ce2469?s=128&d=identicon&r=PG", "display_name": "Dharam Gollapudi", "link": "https://stackoverflow.com/users/115159/dharam-gollapudi"}, "reply_to_user": {"reputation": 980, "user_id": 3625851, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/qNbIC.png?s=128&g=1", "display_name": "Levvy", "link": "https://stackoverflow.com/users/3625851/levvy"}, "edited": false, "score": 0, "creation_date": 1457570738, "post_id": 35903823, "comment_id": 59471398, "body": "Now you know what fields are missing. If you address those errors, you should be good."}, {"owner": {"reputation": 980, "user_id": 3625851, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/qNbIC.png?s=128&g=1", "display_name": "Levvy", "link": "https://stackoverflow.com/users/3625851/levvy"}, "edited": false, "score": 0, "creation_date": 1457573142, "post_id": 35903823, "comment_id": 59472077, "body": "ok. date_link_added and site I need to add manually, but job_category should be passed as like city and company, but it isn&#39;t."}], "tags": [], "owner": {"reputation": 5962, "user_id": 115159, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ac02a81e50f368f6d5c7a14b99ce2469?s=128&d=identicon&r=PG", "display_name": "Dharam Gollapudi", "link": "https://stackoverflow.com/users/115159/dharam-gollapudi"}, "is_accepted": false, "score": 0, "last_activity_date": 1457561927, "creation_date": 1457561927, "answer_id": 35903823, "question_id": 35903272, "link": "https://stackoverflow.com/questions/35903272/how-to-create-all-required-records-to-main-with-fields-filled-from-web-form-in-r/35903823#35903823", "title": "How to create all required records to main with fields filled from web form in ror erb", "body": "<p>Try adding a print statement in the <code>create</code> action as follows and inspect your console. That should list any validation errors, which should give you an idea on whats causing the failure to save.</p>\n\n<pre><code>def create\n  ad = advert_params\n  @advert = Advert.new(ad)\n\n  if(@advert.save)\n    redirect_to root_path\n  else\n    $stderr.puts @advert.errors.messages\n    redirect_to :back, alert: \"Query failed. Check if all fields filled and try again later\"\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 980, "user_id": 3625851, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/qNbIC.png?s=128&g=1", "display_name": "Levvy", "link": "https://stackoverflow.com/users/3625851/levvy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1457561927, "creation_date": 1457559987, "last_edit_date": 1495541270, "question_id": 35903272, "link": "https://stackoverflow.com/questions/35903272/how-to-create-all-required-records-to-main-with-fields-filled-from-web-form-in-r", "title": "How to create all required records to main with fields filled from web form in ror erb", "body": "<p>It may be duplicate of for e.g. <a href=\"https://stackoverflow.com/questions/24569668/writing-nested-form-in-ror\">this</a> but my code not working without any error which will guide me.\nI got Advert which has some references to other models (company[:id, :name]) and others like that. This models has <code>has_many :advert</code> declarations. \nI wanted to make form in which user will create Advert with this all fields. City has also <code>belongs_to :province</code>.</p>\n\n<pre><code>class Advert &lt; ActiveRecord::Base\n  belongs_to :company\n  belongs_to :job_category\n  belongs_to :city\n  belongs_to :site\n\n  accepts_nested_attributes_for :city\n  accepts_nested_attributes_for :company\n  accepts_nested_attributes_for :job_category\n\n  validates :company, presence: true\n  validates :city, presence: true\n  validates :url, presence: true, uniqueness: true\n  validates :date_link_added, presence: true\n  validates :appointment, presence: true\n  validates :site, presence: true\n  validates :job_category, presence: true\n  validates :date_last_verified, presence: true\nend\n</code></pre>\n\n<p>I have adverts_controller with views/new.html.erb in which I have code like that: </p>\n\n<pre><code>&lt;%= bootstrap_form_for(@advert, label_col: \"col-sm-6\", control_col: \"col-sm-6\") do |fb| %&gt;\n                  &lt;%= fb.url_field :url, label: \"Original Link do advert\" %&gt;\n                  &lt;%= fb.fields_for :job_category do |j| %&gt;\n                    &lt;%= j.text_field :name, label: \"Job Category\" %&gt;\n                  &lt;% end %&gt;\n                  &lt;%= fb.fields_for :city do |c| %&gt;\n                    &lt;%= c.collection_select :province_id, Province.all, :id, :name, {prompt: \"Select ...\", label: \"Province\"}, { class: \"selectpicker form-control\" } %&gt;\n                    &lt;%= c.text_field :name, label: \"City\" %&gt;\n                  &lt;% end %&gt;\n                  &lt;%= fb.fields_for :company do |c| %&gt;\n                    &lt;%= c.text_field :name, label: \"Company\" %&gt;\n                  &lt;% end %&gt;\n                  &lt;%= fb.text_field :appointment, label: \"Appointment\" %&gt;\n                  &lt;%= fb.date_field :date_adv_added, label: \"Release\" %&gt;\n                  &lt;%= fb.date_field :date_expiration, label: \"Expire\" %&gt;\n                  &lt;%= fb.form_group :verified do %&gt;\n                      &lt;%= fb.check_box :verified, label: \"Verified\" %&gt;\n                  &lt;% end %&gt;\n                  &lt;%= link_to \"&lt;- Cancel\", adverts_path, class: \"btn btn-default\" %&gt;\n                  &lt;div class=\"pull-right\"&gt;\n                    &lt;%= fb.submit \"Create\", class: \"btn btn-primary\" %&gt;\n                  &lt;/div&gt;\n              &lt;% end %&gt;\n</code></pre>\n\n<p>Code in controller</p>\n\n<pre><code>   def create\n    ad = advert_params\n    @advert = Advert.new(ad)\n    if(@advert.save)\n      redirect_to root_path\n    else\n      redirect_to :back, alert: \"Query failed. Check if all fields filled and try again later\"\n    end\n  end\n\n  private\n  def advert_params\n    adv_params = params.require(:advert).permit(:url, :date_adv_added, :date_expiration, :appointment, :verified, company_attributes: [:id, :name], job_category_attributes: [:id, :name], city_attributes: [:id, :name, :province_id])\n  end\n</code></pre>\n\n<p>@advert.save is all the time returning false.\nOn console I got only:</p>\n\n<pre><code>  Advert Load (0.2ms)  SELECT `adverts`.* FROM `adverts`\n  JobCategory Load (0.1ms)  SELECT  `job_categories`.* FROM `job_categories` WHERE `job_categories`.`id` = 3 LIMIT 1\n  City Load (0.2ms)  SELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 3 LIMIT 1\n  Province Load (0.2ms)  SELECT  `provinces`.* FROM `provinces` WHERE `provinces`.`id` = 2 LIMIT 1\n  Company Load (0.1ms)  SELECT  `companies`.* FROM `companies` WHERE `companies`.`id` = 3 LIMIT 1\n  JobCategory Load (0.2ms)  SELECT  `job_categories`.* FROM `job_categories` WHERE `job_categories`.`id` = 4 LIMIT 1\n  City Load (0.1ms)  SELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 4 LIMIT 1\n  Province Load (0.2ms)  SELECT  `provinces`.* FROM `provinces` WHERE `provinces`.`id` = 13 LIMIT 1\n  Company Load (0.2ms)  SELECT  `companies`.* FROM `companies` WHERE `companies`.`id` = 4 LIMIT 1\n  JobCategory Load (0.2ms)  SELECT  `job_categories`.* FROM `job_categories` WHERE `job_categories`.`id` = 5 LIMIT 1\n  City Load (0.1ms)  SELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 5 LIMIT 1\n  Province Load (0.2ms)  SELECT  `provinces`.* FROM `provinces` WHERE `provinces`.`id` = 6 LIMIT 1\n  Company Load (0.2ms)  SELECT  `companies`.* FROM `companies` WHERE `companies`.`id` = 5 LIMIT 1\n  JobCategory Load (0.2ms)  SELECT  `job_categories`.* FROM `job_categories` WHERE `job_categories`.`id` = 6 LIMIT 1\n  City Load (0.1ms)  SELECT  `cities`.* FROM `cities` WHERE `cities`.`id` = 6 LIMIT 1\n  Province Load (0.2ms)  SELECT  `provinces`.* FROM `provinces` WHERE `provinces`.`id` = 15 LIMIT 1\n  Company Load (0.2ms)  SELECT  `companies`.* FROM `companies` WHERE `companies`.`id` = 6 LIMIT 1\n  Rendered adverts/index.html.erb within layouts/application (31.6ms)\nCompleted 200 OK in 143ms (Views: 138.5ms | ActiveRecord: 3.1ms)\n</code></pre>\n\n<p>And nothing is added to database.\nI do not know what point I have missed.\nMy code without last changes is there <a href=\"https://github.com/GRM-dev/JAG\" rel=\"nofollow noreferrer\">JAG</a>\nAnybody has a clue what can be wrong?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 5130, "user_id": 1443478, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4J9cr.jpg?s=128&g=1", "display_name": "Brennan", "link": "https://stackoverflow.com/users/1443478/brennan"}, "edited": false, "score": 0, "creation_date": 1457561338, "post_id": 35902977, "comment_id": 59467638, "body": "Why does <code>rake routes</code> not work?"}, {"owner": {"reputation": 3655, "user_id": 1267729, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e487a17a60371229131bb99b7852a48?s=128&d=identicon&r=PG", "display_name": "Shelvacu", "link": "https://stackoverflow.com/users/1267729/shelvacu"}, "reply_to_user": {"reputation": 5130, "user_id": 1443478, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4J9cr.jpg?s=128&g=1", "display_name": "Brennan", "link": "https://stackoverflow.com/users/1443478/brennan"}, "edited": false, "score": 1, "creation_date": 1457561600, "post_id": 35902977, "comment_id": 59467754, "body": "@Brennan I don&#39;t want to list them, I want to run the functions."}], "answers": [{"tags": [], "owner": {"reputation": 7668, "user_id": 29680, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/isyUF.jpg?s=128&g=1", "display_name": "John Naegle", "link": "https://stackoverflow.com/users/29680/john-naegle"}, "is_accepted": false, "score": 14, "last_activity_date": 1457561835, "creation_date": 1457561835, "answer_id": 35903791, "question_id": 35902977, "link": "https://stackoverflow.com/questions/35902977/how-to-access-path-and-url-helpers-in-rails-4/35903791#35903791", "title": "How to access *_path and *_url helpers in Rails 4", "body": "<p>You can use <code>Rails.application.routes.url_helpers</code></p>\n\n<pre><code> Rails.application.routes.url_helpers.users_path\n</code></pre>\n\n<p>For the *_url versions, you'll have to tell it the host, or set a default</p>\n\n<p>specify the host:</p>\n\n<pre><code> Rails.application.routes.url_helpers.users_url(:host =&gt; 'http://example.com')\n</code></pre>\n\n<p>set a default:</p>\n\n<pre><code>Example::Application.configure do\n  routes.default_url_options = {:host =&gt; 'http://example.com'}\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1131, "user_id": 3592117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qIAYJ.jpg?s=128&g=1", "display_name": "Kimball", "link": "https://stackoverflow.com/users/3592117/kimball"}, "is_accepted": true, "score": 20, "last_activity_date": 1457563185, "creation_date": 1457563185, "answer_id": 35904126, "question_id": 35902977, "link": "https://stackoverflow.com/questions/35902977/how-to-access-path-and-url-helpers-in-rails-4/35904126#35904126", "title": "How to access *_path and *_url helpers in Rails 4", "body": "<p>Running Rails 4, I get at them with:</p>\n\n<pre><code>app.root_path\n=&gt; \"/\"\n\napp.users_url\n=&gt; \"http://www.example.com/users\"\n</code></pre>\n"}], "owner": {"reputation": 3655, "user_id": 1267729, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e487a17a60371229131bb99b7852a48?s=128&d=identicon&r=PG", "display_name": "Shelvacu", "link": "https://stackoverflow.com/users/1267729/shelvacu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8297, "favorite_count": 1, "accepted_answer_id": 35904126, "answer_count": 2, "score": 11, "last_activity_date": 1457563185, "creation_date": 1457558858, "last_edit_date": 1495542754, "question_id": 35902977, "link": "https://stackoverflow.com/questions/35902977/how-to-access-path-and-url-helpers-in-rails-4", "title": "How to access *_path and *_url helpers in Rails 4", "body": "<p>I was reading <a href=\"https://stackoverflow.com/questions/2846247/rails-check-output-of-path-helper-from-console\">Rails: Check output of path helper from console</a> and none of the solutions worked for me, presumably because they are all for Rails 2/3.</p>\n\n<p>In Rails 4/5, how can I access the *_path and *_url helpers from the rails console?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 397, "user_id": 5942350, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/441bdfead4798589a2b34c78386b2533?s=128&d=identicon&r=PG&f=1", "display_name": "ZEWEI CHU", "link": "https://stackoverflow.com/users/5942350/zewei-chu"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1457559050, "post_id": 35902967, "comment_id": 59466394, "body": "@engineersmnky but that yield :layout, which I assume only yield content_for :layout. What about the other content that does not have any labels associated with it? For example, my second link?"}], "answers": [{"tags": [], "owner": {"reputation": 397, "user_id": 5942350, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/441bdfead4798589a2b34c78386b2533?s=128&d=identicon&r=PG&f=1", "display_name": "ZEWEI CHU", "link": "https://stackoverflow.com/users/5942350/zewei-chu"}, "is_accepted": false, "score": 0, "last_activity_date": 1457561751, "creation_date": 1457561751, "answer_id": 35903765, "question_id": 35902967, "link": "https://stackoverflow.com/questions/35902967/rails-layout-without-yield-statement/35903765#35903765", "title": "Rails layout without yield statement?", "body": "<p>By default, yield is the same as yield :layout. Rails assumes that all code inside view files are content_for :layout if not specified otherwise. </p>\n"}], "owner": {"reputation": 397, "user_id": 5942350, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/441bdfead4798589a2b34c78386b2533?s=128&d=identicon&r=PG&f=1", "display_name": "ZEWEI CHU", "link": "https://stackoverflow.com/users/5942350/zewei-chu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1457561751, "creation_date": 1457558819, "last_edit_date": 1457559224, "question_id": 35902967, "link": "https://stackoverflow.com/questions/35902967/rails-layout-without-yield-statement", "title": "Rails layout without yield statement?", "body": "<p>I was reading code of linuxfr.org, a rails open source project. I am surprised that the following code from application.html.haml does not have a \"yield\" statement (without any symbol associated with it), so how will the content be rendered with the layout? </p>\n\n<p><a href=\"https://github.com/linuxfrorg/linuxfr.org/blob/master/app/views/layouts/application.html.haml\" rel=\"nofollow\">https://github.com/linuxfrorg/linuxfr.org/blob/master/app/views/layouts/application.html.haml</a></p>\n\n<p>For example, how does the layout merge with the show view file? </p>\n\n<p><a href=\"https://github.com/linuxfrorg/linuxfr.org/blob/master/app/views/wiki_pages/show.html.haml\" rel=\"nofollow\">https://github.com/linuxfrorg/linuxfr.org/blob/master/app/views/wiki_pages/show.html.haml</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "grape-api"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 2, "creation_date": 1457557718, "post_id": 35902617, "comment_id": 59465611, "body": "&quot;Questions asking us to recommend or find a book, tool, software library, tutorial or other off-site resource are off-topic for Stack Overflow as they tend to attract opinionated answers and spam. Instead, <a href=\"http://meta.stackoverflow.com/questions/254393\">describe the problem</a> and what has been done so far to solve it.&quot; Where did you see it? Where have you searched?"}, {"owner": {"reputation": 70080, "user_id": 38765, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/01bbb59a1c3ef9960f25a97afe7e920f?s=128&d=identicon&r=PG", "display_name": "Andrew Grimm", "link": "https://stackoverflow.com/users/38765/andrew-grimm"}, "edited": false, "score": 1, "creation_date": 1457559682, "post_id": 35902617, "comment_id": 59466766, "body": "Did you generate this picture, or did someone else? If you did, what did you use? If not, where is the picture from if it is publicly available?"}], "answers": [{"comments": [{"owner": {"reputation": 4504, "user_id": 3681199, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/70b2072de3d0d43e1af48fd2d416157f?s=128&d=identicon&r=PG&f=1", "display_name": "Nona", "link": "https://stackoverflow.com/users/3681199/nona"}, "edited": false, "score": 0, "creation_date": 1457589674, "post_id": 35903239, "comment_id": 59476930, "body": "Thanks Andrew that ended up being it.  I can&#39;t find the resource where I got the picture at the moment."}], "tags": [], "owner": {"reputation": 70080, "user_id": 38765, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/01bbb59a1c3ef9960f25a97afe7e920f?s=128&d=identicon&r=PG", "display_name": "Andrew Grimm", "link": "https://stackoverflow.com/users/38765/andrew-grimm"}, "is_accepted": true, "score": 2, "last_activity_date": 1457559871, "creation_date": 1457559871, "answer_id": 35903239, "question_id": 35902617, "link": "https://stackoverflow.com/questions/35902617/what-tool-is-used-to-generate-this-stack-trace-for-ruby-grape/35903239#35903239", "title": "What tool is used to generate this stack trace for Ruby grape?", "body": "<p>It'd help if you provided the source of the picture, but it looks like the graph itself was the result of the gem ruby-prof.</p>\n\n<p>That gem may contain the software for the output format, or it might use a third party gem. I can't recall off the top of my head.</p>\n"}], "owner": {"reputation": 4504, "user_id": 3681199, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/70b2072de3d0d43e1af48fd2d416157f?s=128&d=identicon&r=PG&f=1", "display_name": "Nona", "link": "https://stackoverflow.com/users/3681199/nona"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "closed_date": 1457563026, "accepted_answer_id": 35903239, "answer_count": 1, "score": 0, "last_activity_date": 1457559871, "creation_date": 1457557572, "question_id": 35902617, "link": "https://stackoverflow.com/questions/35902617/what-tool-is-used-to-generate-this-stack-trace-for-ruby-grape", "closed_reason": "Not suitable for this site", "title": "What tool is used to generate this stack trace for Ruby grape?", "body": "<p>What tool would I use to generate a stack trace like this?</p>\n\n<p><a href=\"https://i.stack.imgur.com/JcukF.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JcukF.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-3.2"], "comments": [{"owner": {"reputation": 6602, "user_id": 3425360, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-D0hYGNyMGPo/AAAAAAAAAAI/AAAAAAAAA1c/wVJzgXu5zZI/photo.jpg?sz=128", "display_name": "Sharvy Ahmed", "link": "https://stackoverflow.com/users/3425360/sharvy-ahmed"}, "edited": false, "score": 1, "creation_date": 1457557861, "post_id": 35902589, "comment_id": 59465689, "body": "Why did you rename the application to default? Did you also change application.js into default.js in app/assets/javascripts ?"}, {"owner": {"reputation": 1, "user_id": 6041720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e096b47a7ae8584f97e50759d48b8398?s=128&d=identicon&r=PG&f=1", "display_name": "Sarosa", "link": "https://stackoverflow.com/users/6041720/sarosa"}, "reply_to_user": {"reputation": 6602, "user_id": 3425360, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-D0hYGNyMGPo/AAAAAAAAAAI/AAAAAAAAA1c/wVJzgXu5zZI/photo.jpg?sz=128", "display_name": "Sharvy Ahmed", "link": "https://stackoverflow.com/users/3425360/sharvy-ahmed"}, "edited": false, "score": 0, "creation_date": 1457559592, "post_id": 35902589, "comment_id": 59466701, "body": "I am now starting to realize the root of the issue is that I am using WIndows 7 64 bit. I apparently have to change some code and install gem files to get it working properly, although I am still looking for clear guidance on that aspect. So, 64 doesn&#39;t use the files the same way it does with 32"}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1457560605, "post_id": 35902589, "comment_id": 59467230, "body": "On <a href=\"http://rubyinstaller.org/downloads/\" rel=\"nofollow noreferrer\">rubyinstaller.org/downloads</a>, the side bar states &quot;The 64-bit versions of Ruby are relatively new on the Windows area and not all the packages have been updated to be compatible with it. To use this version you will require some knowledge about compilers and solving dependency issues, which might be too complicated if you just want to play with the language.&quot;"}], "owner": {"reputation": 1, "user_id": 6041720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e096b47a7ae8584f97e50759d48b8398?s=128&d=identicon&r=PG&f=1", "display_name": "Sarosa", "link": "https://stackoverflow.com/users/6041720/sarosa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1457558004, "creation_date": 1457557509, "last_edit_date": 1457558004, "question_id": 35902589, "link": "https://stackoverflow.com/questions/35902589/ruby-on-rails-tutorial-errors", "title": "Ruby on Rails tutorial errors", "body": "<p>I am doing a Rails tutorial for a blog and I am getting 2 errors. When you generate the new site in order to have the pages show up you need to change 'application' to 'default' under the layout. That works fine but I believe it is creating a new error and it won't run the 'destroy' .js action. Instead, when you go to delete the post it uses a 'get' method and just links to the posts page (no deleting it). </p>\n\n<p><strong>Here is the error: (if you notice it goes to default.js)</strong></p>\n\n<pre><code>ActionController::RoutingError (No route matches [GET] \"/javascripts/default.js\"\n):\nactionpack (4.2.5.1) lib/action_dispatch/middleware/debug_exceptions.rb:21:in\n`call'\nweb-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'\nweb-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'\nweb-console (2.3.0) lib/web_console/middleware.rb:18:in `call'\nactionpack (4.2.5.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `\ncall'\nrailties (4.2.5.1) lib/rails/rack/logger.rb:38:in `call_app'\nrailties (4.2.5.1) lib/rails/rack/logger.rb:20:in `block in call'\nactivesupport (4.2.5.1) lib/active_support/tagged_logging.rb:68:in `block in t\nagged'\nactivesupport (4.2.5.1) lib/active_support/tagged_logging.rb:26:in `tagged'\nactivesupport (4.2.5.1) lib/active_support/tagged_logging.rb:68:in `tagged'\nrailties (4.2.5.1) lib/rails/rack/logger.rb:20:in `call'\nactionpack (4.2.5.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'\n\nrack (1.6.4) lib/rack/methodoverride.rb:22:in `call'\nrack (1.6.4) lib/rack/runtime.rb:18:in `call'\nactivesupport (4.2.5.1) lib/active_support/cache/strategy/local_cache_middlewa\nre.rb:28:in `call'\nrack (1.6.4) lib/rack/lock.rb:17:in `call'\nactionpack (4.2.5.1) lib/action_dispatch/middleware/static.rb:116:in `call'\nrack (1.6.4) lib/rack/sendfile.rb:113:in `call'\nrailties (4.2.5.1) lib/rails/engine.rb:518:in `call'\nrailties (4.2.5.1) lib/rails/application.rb:165:in `call'\nrack (1.6.4) lib/rack/lock.rb:17:in `call'\nrack (1.6.4) lib/rack/content_length.rb:15:in `call'\nrack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'\nc:/RailsInstaller/Ruby2.2.0/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `servi\nce'\nc:/RailsInstaller/Ruby2.2.0/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'\nc:/RailsInstaller/Ruby2.2.0/lib/ruby/2.2.0/webrick/server.rb:294:in `block in\nstart_thread'\n\n\nRendered c:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/actionpack-4.2.5\n.1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.0ms)\nRendered c:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/actionpack-4.2.5\n.1/lib/action_dispatch/middleware/templates/routes/_route.html.erb (2.0ms)\nRendered c:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/actionpack-4.2.5\n.1/lib/action_dispatch/middleware/templates/routes/_table.html.erb (2.0ms)\nRendered c:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/actionpack-4.2.5\n.1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.e\nrb (1.0ms)\nRendered c:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/actionpack-4.2.5\n.1/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb withi\nn rescues/layout (1341.0ms)\nRendered c:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/web-console-2.3.\n0/lib/web_console/templates/_markup.html.erb (0.0ms)\nRendered c:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/web-console-2.3.\n0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inline\nd_string (1.0ms)\nRendered c:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/web-console-2.3.\n0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_s\ntring (1.0ms)\nRendered c:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/web-console-2.3.\n0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.0ms)\nRendered c:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/web-console-2.3.\n0/lib/web_console/templates/console.js.erb within layouts/javascript (922.0ms)\nRendered c:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/web-console-2.3.\n0/lib/web_console/templates/main.js.erb within layouts/javascript (0.0ms)\nRendered c:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/web-console-2.3.\n0/lib/web_console/templates/error_page.js.erb within layouts/javascript (1.0ms)\nRendered c:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/web-console-2.3.\n0/lib/web_console/templates/index.html.erb (2106.0ms)\n</code></pre>\n\n<p>My problem is that I don't know how to either get the pages to show up using the 'application' instead of 'default' which looks like:</p>\n\n<pre><code>&lt;%= stylesheet_link_tag    'default', media: 'all', 'data-turbolinks-track' =&gt; true %&gt;\n&lt;%= javascript_include_tag 'default', 'data-turbolinks-track' =&gt; true %&gt;\n</code></pre>\n\n<p>or how to get the js to execute correctly. </p>\n"}, {"tags": ["ruby", "selenium-webdriver", "capybara"], "answers": [{"comments": [{"owner": {"reputation": 1765, "user_id": 1507704, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/785573f088dadbefb15252caa1fcbbfc?s=128&d=identicon&r=PG", "display_name": "Farooq", "link": "https://stackoverflow.com/users/1507704/farooq"}, "edited": false, "score": 0, "creation_date": 1457637753, "post_id": 35904739, "comment_id": 59509151, "body": "Tom, thanks, you led me down the right path, just changed what you said slightly:         answers[i].choose(valid_answer[0])"}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 2, "last_activity_date": 1457567175, "last_edit_date": 1457567175, "creation_date": 1457566178, "answer_id": 35904739, "question_id": 35902245, "link": "https://stackoverflow.com/questions/35902245/finding-the-text-of-a-label-using-capybara/35904739#35904739", "title": "Finding the text of a label using Capybara", "body": "<p>It looks like you're making this more complicated than it needs to be - you should just be able to do</p>\n\n<pre><code>answers[i].choose(\"the text of the radio button you want to select\")\n</code></pre>\n\n<p>You can catch an exception if the value isn't found and output your warning there.  </p>\n\n<p>Note: parent in a Capybara element is not the HTML parent of that element - it's the element that a finder was called on when locating the given element - so in your case it's the .answers element.  If you do want access to the nodes actual HTML parent element you can call <code>element.find(:xpath, '..')</code></p>\n"}], "owner": {"reputation": 1765, "user_id": 1507704, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/785573f088dadbefb15252caa1fcbbfc?s=128&d=identicon&r=PG", "display_name": "Farooq", "link": "https://stackoverflow.com/users/1507704/farooq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 631, "favorite_count": 0, "accepted_answer_id": 35904739, "answer_count": 1, "score": 0, "last_activity_date": 1457567175, "creation_date": 1457556421, "last_edit_date": 1457559718, "question_id": 35902245, "link": "https://stackoverflow.com/questions/35902245/finding-the-text-of-a-label-using-capybara", "title": "Finding the text of a label using Capybara", "body": "<p>Finding the text of a label using Capybara</p>\n\n<p>Background: I have a KBA page and a set of question and answers, the answers are in the form of 5 possible answers using radio buttons. So I need to cycle through each label for each radio button to match up with valid answers in a yaml file.</p>\n\n<p>HTML:</p>\n\n<pre><code>&lt;div class=\"questions\"&gt;&lt;/div&gt;\n&lt;div class=\"answers\"&gt;&lt;/div&gt;\n  &lt;p&gt;\n    &lt;label&gt;\n     &lt;input id=\"answers_question_0_1\" type=\"radio\" checked=\"checked\" value=\"1\" name=\"answers[question_0]\"&gt;&lt;/input&gt;\n     RADIO BUTTON TEXT 1\n    &lt;/label&gt;\n  &lt;/p&gt;\n  &lt;p&gt;&lt;/p&gt; #another radio button and label text 2\n  &lt;p&gt;&lt;/p&gt; #another radio button and label text 3\n  &lt;p&gt;&lt;/p&gt; #another radio button and label text 4\n  &lt;p&gt;&lt;/p&gt; #another radio button and label text 5\n</code></pre>\n\n<p>My test code:</p>\n\n<pre><code>  def answer_questions\n\n   .\n   .\n   . \n\n   i=0\n\n   def answers\n     page.all('.answers')\n   end\n\n   #This is accessing the answer value from the selected correct question from the kba.yml file\n   valid_answers = this variable contains the valid answer to the question\n\n   #********THIS IS THE PROBLEM BLOCK*****************************\n   #Set the radio buttons if they match one of the answers\n   @correct_answer = answers[i].all(:radio_button).find do |radio|\n     valid_answers.include?(radio.parent.text)\n   end\n   #********THIS IS THE PROBLEM BLOCK*****************************      \n\n   i +=1\n\n   unless @correct_answer\n     p \"Unable to answer question: #{question_text}\" and next\n   end\n\n   @correct_answer.select\n\n  end\n</code></pre>\n\n<p>The problem lies in the \"problem block\" noted in the above code snippet. I can't figure out how to get the text that is tied to one label/p tag per radio button, instead ALL radio button's text are returned and checked against the variable \"valid_answers\" and that always fails.</p>\n\n<p>I basically want <code>radio.button.text</code> to equal \"RADIO BUTTON TEXT 1\" for it's respective radio button. But instead <code>radio.button.text</code> returns:</p>\n\n<p>RADIO BUTTON TEXT 1 RADION BUTTON TEXT 2 RADIO BUTTON TEXT 3 etc.</p>\n\n<p>I'm guessing it shouldn't be <code>radio.parent.text</code> but something else, which I'm not sure.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rvm"], "answers": [{"comments": [{"owner": {"reputation": 134, "user_id": 3186057, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6JWq9.jpg?s=128&g=1", "display_name": "Andrew Moore", "link": "https://stackoverflow.com/users/3186057/andrew-moore"}, "edited": false, "score": 0, "creation_date": 1457556344, "post_id": 35902218, "comment_id": 59464839, "body": "It had to do with rvm and spring not getting along."}], "tags": [], "owner": {"reputation": 134, "user_id": 3186057, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6JWq9.jpg?s=128&g=1", "display_name": "Andrew Moore", "link": "https://stackoverflow.com/users/3186057/andrew-moore"}, "is_accepted": true, "score": 0, "last_activity_date": 1457556293, "creation_date": 1457556293, "answer_id": 35902218, "question_id": 35902132, "link": "https://stackoverflow.com/questions/35902132/rails-on-start-split-gem-path-undefined-method-split/35902218#35902218", "title": "Rails on start: `split_gem_path&#39;: undefined method `split&#39;", "body": "<p>I solved this by using the following command to start rails:\n<code>bundle exec spring rails s</code></p>\n"}], "owner": {"reputation": 134, "user_id": 3186057, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6JWq9.jpg?s=128&g=1", "display_name": "Andrew Moore", "link": "https://stackoverflow.com/users/3186057/andrew-moore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 35902218, "answer_count": 1, "score": -1, "last_activity_date": 1457556437, "creation_date": 1457556059, "last_edit_date": 1457556437, "question_id": 35902132, "link": "https://stackoverflow.com/questions/35902132/rails-on-start-split-gem-path-undefined-method-split", "title": "Rails on start: `split_gem_path&#39;: undefined method `split&#39;", "body": "<p>I'm running Rails 4.2.4, and using RVM. I get the following error when starting with <code>rails s</code>:</p>\n\n<pre><code>/home/drew/.rvm/rubies/ruby-2.2.3/lib/ruby/site_ruby/2.2.0/rubygems/path_support.rb:50:in `split_gem_path': undefined method `split' for #&lt;Array:0x00000000dc2dc8&gt; (NoMethodError)\n  from /home/drew/.rvm/rubies/ruby-2.2.3/lib/ruby/site_ruby/2.2.0/rubygems/path_support.rb:32:in `initialize'\n  from /home/drew/.rvm/rubies/ruby-2.2.3/lib/ruby/site_ruby/2.2.0/rubygems.rb:351:in `new'\n  from /home/drew/.rvm/rubies/ruby-2.2.3/lib/ruby/site_ruby/2.2.0/rubygems.rb:351:in `paths='\n  from /data/code/ruby/milligram/bin/spring:11:in `&lt;top (required)&gt;'\n  from bin/rails:3:in `load'\n  from bin/rails:3:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "rubygems", "osx-yosemite"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1457553926, "post_id": 35901489, "comment_id": 59463449, "body": "Have you done what it said? Is <code>rspec</code> in your <code>Gemfile</code>?"}, {"owner": {"reputation": 7437, "user_id": 375721, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/nosh5.png?s=128&g=1", "display_name": "martins", "link": "https://stackoverflow.com/users/375721/martins"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1458175240, "post_id": 35901489, "comment_id": 59747538, "body": "Yes, I got rspec in Gemfile and I&#39;ve run bundle. It works if I check out the code on an other computer. I think it&#39;s some environment specific thing."}], "answers": [{"comments": [{"owner": {"reputation": 7437, "user_id": 375721, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/nosh5.png?s=128&g=1", "display_name": "martins", "link": "https://stackoverflow.com/users/375721/martins"}, "edited": false, "score": 0, "creation_date": 1460404529, "post_id": 35901616, "comment_id": 60716478, "body": "You can see my Gemfile in my main post."}], "tags": [], "owner": {"reputation": 5962, "user_id": 115159, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ac02a81e50f368f6d5c7a14b99ce2469?s=128&d=identicon&r=PG", "display_name": "Dharam Gollapudi", "link": "https://stackoverflow.com/users/115159/dharam-gollapudi"}, "is_accepted": false, "score": 0, "last_activity_date": 1457554271, "creation_date": 1457554271, "answer_id": 35901616, "question_id": 35901489, "link": "https://stackoverflow.com/questions/35901489/gem-is-not-part-of-the-bundle-add-it-to-gemfile/35901616#35901616", "title": "$GEM is not part of the bundle. Add it to Gemfile", "body": "<p>Just having the <code>gem</code> either in the <code>PATH</code> or <code>GEM_PATH</code> is not enough. Your application needs to <code>require</code> it. Adding it to the <code>Gemfile</code> and bundling it ensures that the <code>bundler</code> requires it for you.</p>\n\n<p>Ensure that the <code>rspec</code> or <code>rspec-rails</code> (if rails based application) is included in your <code>Gemfile</code>.</p>\n"}], "owner": {"reputation": 7437, "user_id": 375721, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/nosh5.png?s=128&g=1", "display_name": "martins", "link": "https://stackoverflow.com/users/375721/martins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1562, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1460404688, "creation_date": 1457553709, "last_edit_date": 1460404688, "question_id": 35901489, "link": "https://stackoverflow.com/questions/35901489/gem-is-not-part-of-the-bundle-add-it-to-gemfile", "title": "$GEM is not part of the bundle. Add it to Gemfile", "body": "<p>Suddenly I can't run rspec or guard anymore. I even did a checkout on an old commit where I know I had some tests running. Same error there.</p>\n\n<pre><code>$ git checkout known-working-commit &amp;&amp; bundle &amp;&amp; rspec spec\n.../ruby-2.2.3@solidus/gems/bundler-1.11.2/lib/bundler/rubygems_integration.rb:304:in \n`block in replace_gem': rspec-core is not part of the bundle. \nAdd it to Gemfile. (Gem::LoadError)\n</code></pre>\n\n<p>I get the same error if I run <code>rspec</code> and <code>guard</code>.\nHaving a look at the PATH exposed by <code>rvm info</code>, I see that guard is available at <code>/Users/martins/.rvm/gems/ruby-2.2.3@solidus/bin/guard</code>. \n$PATH also has <code>/Users/martins/.rvm/gems/ruby-2.2.3@solidus/bin</code> as it's first entry.\nAny idea what might have gone wrong? I thought that by having a directory listed first in PATH would give it precedence over the other directories listed. How come I get the <code>\"bundler-1.11.2/lib/bundler/rubygems_integration.rb:304:in block in replace_gem': rspec-core is not part of the bundle. Add it to Gemfile\"</code> error?</p>\n\n<p>I'm running OS X 10.10.5 and ZSH.</p>\n\n<p>My test section from <strong>Gemfile</strong></p>\n\n<pre><code> 19 group :test do\n 20   gem 'factory_girl_rails', '~&gt; 4.5.0'\n 21   gem 'capybara', '~&gt; 2.4'\n 22   gem 'capybara-screenshot'\n 23   gem 'database_cleaner', '~&gt; 1.3'\n 24   gem 'email_spec'\n 25   gem 'launchy'\n 26   gem 'rspec-activemodel-mocks', '~&gt;1.0.2'\n 27   gem 'rspec-collection_matchers'\n 28   gem 'rspec-its'\n 29   gem 'rspec-rails', '~&gt; 3.3.0'\n 30   gem 'simplecov'\n 31   gem 'webmock', '1.8.11'\n 32   gem 'poltergeist'\n 33   gem 'timecop'\n 34   gem 'with_model'\n 35   gem 'rspec_junit_formatter'\n 36 end\n</code></pre>\n\n<p>The same branch works as expect on my work computer. Which makes me think there is some environment settings that are messing things up.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "factory-bot"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1457553065, "post_id": 35901165, "comment_id": 59462929, "body": "Can you track it down by trying <code>rescue URI::InvalidURIError, ArgumentError</code> ?"}, {"owner": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1457554512, "post_id": 35901165, "comment_id": 59463763, "body": "Thanks for the reply max, I&#39;m not sure as to where I would insert that <code>rescue</code> keyword. Where would you recommend I place that?"}, {"owner": {"reputation": 22836, "user_id": 152786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/581hP.jpg?s=128&g=1", "display_name": "smathy", "link": "https://stackoverflow.com/users/152786/smathy"}, "edited": false, "score": 1, "creation_date": 1457554772, "post_id": 35901165, "comment_id": 59463902, "body": "We really need to see the full stacktrace, are you using <code>pry</code>?  Type <code>wtf?</code> after your error to see more stacktrace and paste that into your question."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1457555042, "post_id": 35901165, "comment_id": 59464057, "body": "You would add it inside your <code>UrlFormatValidator#validate_each</code> method, just add <code>, ArgumentError</code> where you are currently rescueing <code>URI::InvalidURIError</code>. It would narrow down the problem a bit."}, {"owner": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "edited": false, "score": 0, "creation_date": 1457555310, "post_id": 35901165, "comment_id": 59464224, "body": "I found the problem. It was an environment variable in the application. <code>wtf?</code> revealed it to me. Thanks"}], "owner": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1457552630, "creation_date": 1457552630, "question_id": 35901165, "link": "https://stackoverflow.com/questions/35901165/creating-factorygirl-objects-in-test-database-leads-to-argumenterror-bad-argume", "title": "Creating FactoryGirl objects in test database leads to ArgumentError: bad argument (expected URI object or URI string)", "body": "<p>I have made a separate database for manual testing but have run into the error above when I attempt to create Factories into the database.</p>\n\n<p>Here is the work flow:</p>\n\n<pre><code>`rails c test`\n`FactoryGirl.create(:reverification_tracker)\n`ArgumentError: bad argument (expected URI object or URI string)\n   from /Users/drubio/.rvm/rubies/ruby-2.2.3/lib/ruby/2.2.0/uri/common.rb:715:in `URI'\n</code></pre>\n\n<p>Here is the factory I am attempting to create with its accompanying association:</p>\n\n<pre><code>  FactoryGirl.define do\n    factory :reverification_tracker do\n    association :account\n    message_id 'XYZ0-1234-AB56-67GJ'\n    feedback ''\n    phase 0\n    status 0\n    attempts 1\n    sent_at DateTime.now.utc\n    created_at DateTime.now.utc\n    updated_at DateTime.now.utc\n end\n\nFactoryGirl.define do\n  sequence :account_login do |n|\n    \"login-#{n}\"\n  end\n\nfactory :account do\n  sequence :email do |n|\n    \"someone#{n}@gmail.com\"\n  end\n\n  email_confirmation { |account| account.send :email }\n  url { Faker::Internet.url }\n  login { generate(:account_login) }\n  password { Faker::Internet.password }\n  password_confirmation { |account| account.send(:password) }\n  current_password { |account| account.send(:password) }\n  twitter_account 'openhub'\n  name { Faker::Name.name + rand(999_999).to_s }\n  about_raw { Faker::Lorem.characters(10) }\n  activated_at { Time.current }\n  activation_code nil\n  country_code 'us'\n  email_master true\n  email_kudos true\n  email_posts true\n\n  association :github_verification\nend\n</code></pre>\n\n<p>Why is this happening? On the get go I notice that in my local path directory there are reference folers to <code>ruby-2.2.3</code> and <code>ruby 2.2.0</code></p>\n\n<p>Also, you will note that my account factory has a url field on it. I'm using the <code>faker</code> gem to create a url for testing. To my knowledge there does not seem to be a problem with that. Additionally, my account model has a <code>url_format</code> validation set to <code>true</code> with the validation defined like so</p>\n\n<pre><code>class UrlFormatValidator &lt; ActiveModel::EachValidator\n\n\n # With Ruby 2.2, the default URI parser is more forgiving than we want, so use the same trick Rails does in Rack\n  # see: https://bugs.ruby-lang.org/issues/10669\n  def validate_each(record, attribute, value)\n    valid_url = begin\n      @parser ||= defined?(URI::RFC2396_Parser) ? URI::RFC2396_Parser.new : URI\n      @parser.parse(value).is_a?(URI::HTTP)\n    rescue URI::InvalidURIError\n      false\n    end\n\n    record.errors.add(attribute, options[:message] || I18n.t('accounts.invalid_url_format')) unless valid_url\n  end\nend\n</code></pre>\n\n<p>However, I am positively certain that this is not the problem either. I was wondering if anyone else has encountered this problem before. I've seen similar questions with <code>xhr</code> on this website but it doesn't exactly line up with what I need. Any insight would be extremely helpful.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 7437, "user_id": 375721, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/nosh5.png?s=128&g=1", "display_name": "martins", "link": "https://stackoverflow.com/users/375721/martins"}, "edited": false, "score": 0, "creation_date": 1458175387, "post_id": 35901630, "comment_id": 59747577, "body": "You&#39;re right. I added <code>rspec-core</code> when the error message said I was missing it. Removed it from Gemfile, ran <code>bundle</code>. It&#39;s present in <code>Gemfile.lock</code>"}, {"owner": {"reputation": 7437, "user_id": 375721, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/nosh5.png?s=128&g=1", "display_name": "martins", "link": "https://stackoverflow.com/users/375721/martins"}, "edited": false, "score": 0, "creation_date": 1458175621, "post_id": 35901630, "comment_id": 59747659, "body": "The strange thing is that this branch of my project works when running at an other Mac. I think there is some environment settings that has been messed up."}, {"owner": {"reputation": 98, "user_id": 2379524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/33BnD.jpg?s=128&g=1", "display_name": "queserasera", "link": "https://stackoverflow.com/users/2379524/queserasera"}, "reply_to_user": {"reputation": 7437, "user_id": 375721, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/nosh5.png?s=128&g=1", "display_name": "martins", "link": "https://stackoverflow.com/users/375721/martins"}, "edited": false, "score": 0, "creation_date": 1458236853, "post_id": 35901630, "comment_id": 59782314, "body": "Interesting.  Does <code>rake spec</code> work? Does <code>bundle show</code> list the rspec gem?"}], "tags": [], "owner": {"reputation": 98, "user_id": 2379524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/33BnD.jpg?s=128&g=1", "display_name": "queserasera", "link": "https://stackoverflow.com/users/2379524/queserasera"}, "is_accepted": true, "score": 0, "last_activity_date": 1457554322, "creation_date": 1457554322, "answer_id": 35901630, "question_id": 35900917, "link": "https://stackoverflow.com/questions/35900917/rspec-core-is-not-part-of-the-bundle-add-it-to-gemfile/35901630#35901630", "title": "rspec-core is not part of the bundle. Add it to Gemfile", "body": "<p><code>rspec-core</code> is a runtime dependency for <code>rspec-rails</code> and so you should not need to explicitly add it to your Gemfile.  Did you add it as a result of trying to debug this? See the docs <a href=\"https://rubygems.org/gems/rspec-rails/versions/3.3.3\" rel=\"nofollow\">here</a>. </p>\n\n<p>When you run <code>bundle install</code>, bundler will go out and retrieve necessary dependencies and include those in your Gemfile.lock, with the specific versions required to support your Gemfile gems. </p>\n\n<p>I recommend you start by removing <code>rspec-core</code> from your <code>Gemfile</code> and running <code>bundle install</code>.  Then take a look at your <code>Gemfile.lock</code>.  Is rspec-core in there? It should be. If not, it would help if you paste the snippet of your lock file that contains <code>rspec-rails</code> and its dependencies? </p>\n"}, {"tags": [], "owner": {"reputation": 186, "user_id": 1548934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02fa03c34851b69909134c74b82d9ad2?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/1548934/steve"}, "is_accepted": false, "score": 2, "last_activity_date": 1504143115, "creation_date": 1504143115, "answer_id": 45971926, "question_id": 35900917, "link": "https://stackoverflow.com/questions/35900917/rspec-core-is-not-part-of-the-bundle-add-it-to-gemfile/45971926#45971926", "title": "rspec-core is not part of the bundle. Add it to Gemfile", "body": "<p>A similar problem led me here, except in addition to <code>rspec-core</code>, none of the gems in my <code>test</code> group were installed, because apparently bundler remembers your initial switches.</p>\n\n<p>Updating <code>.bundle/config</code> to not include <code>BUNDLE_WITHOUT: \"test\"</code> let <code>bundle install</code> add the correct gems. </p>\n"}], "owner": {"reputation": 7437, "user_id": 375721, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/nosh5.png?s=128&g=1", "display_name": "martins", "link": "https://stackoverflow.com/users/375721/martins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2231, "favorite_count": 0, "accepted_answer_id": 35901630, "answer_count": 2, "score": 2, "last_activity_date": 1504143115, "creation_date": 1457551889, "question_id": 35900917, "link": "https://stackoverflow.com/questions/35900917/rspec-core-is-not-part-of-the-bundle-add-it-to-gemfile", "title": "rspec-core is not part of the bundle. Add it to Gemfile", "body": "<p>When I run <code>rspec spec</code> I get this error:</p>\n\n<pre><code>bundle exec rspec spec/models/spree_user_spec.rb\n/Users/martins/.rvm/gems/ruby-2.2.3@solidus/gems/bundler-1.11.2/lib/bundler/rubygems_integration.rb:304:in `block in replace_gem': rspec-core is not part of the bundle. Add it to Gemfile. (Gem::LoadError)\n        from /Users/martins/.rvm/gems/ruby-2.2.3@solidus/bin/rspec:22:in `&lt;main&gt;'\n        from /Users/martins/.rvm/gems/ruby-2.2.3@solidus/bin/ruby_executable_hooks:15:in `eval'\n        from /Users/martins/.rvm/gems/ruby-2.2.3@solidus/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\n</code></pre>\n\n<p>Any idea why? Here you got my Gemfile:</p>\n\n<p><strong>Gemfile</strong></p>\n\n<pre><code>source 'https://rubygems.org'\n\nruby '2.2.3'\n\ngem 'solidus'\n\ngem 'quiet_assets', group: :development\n\ngem 'dotenv-rails', groups: [:development, :test]\n\ngem 'puma'\n\ngem 'cancancan', '~&gt; 1.10'\n\ngroup :test do\n  gem 'factory_girl_rails', '~&gt; 4.5.0'\n  gem 'capybara', '~&gt; 2.4'\n  gem 'capybara-screenshot'\n  gem 'database_cleaner', '~&gt; 1.3'\n  gem 'email_spec'\n  gem 'launchy'\n  gem 'rspec-activemodel-mocks', '~&gt;1.0.2'\n  gem 'rspec-collection_matchers'\n  gem 'rspec-its'\n  gem 'rspec-core'\n  gem 'rspec-rails', '~&gt; 3.3.0'\n  gem 'simplecov'\n  gem 'webmock', '1.8.11'\n  gem 'poltergeist'\n  gem 'timecop'\n  gem 'with_model'\n  gem 'rspec_junit_formatter'\nend\n\ngem 'rails', '4.2.5'\ngem 'pg', '~&gt; 0.15'\ngem 'sass-rails', '~&gt; 5.0'\ngem 'uglifier', '&gt;= 1.3.0'\ngem 'coffee-rails', '~&gt; 4.1.0'\n\ngem 'jquery-rails'\ngem 'turbolinks'\ngem 'jbuilder', '~&gt; 2.0'\ngem 'sdoc', '~&gt; 0.4.0', group: :doc\n\n\n\n\ngroup :development, :test do\n  gem 'byebug'\nend\n\ngroup :development do\n  gem 'web-console', '~&gt; 2.0'\n\n  gem 'spring'\nend\n\ngroup :development, :test do\n  gem 'rubocop'\n  gem 'spring-commands-rspec'\n  gem 'guard-rspec', require: false\nend\n\ngroup :darwin, :test do\n  gem 'rb-fsevent'\nend\n\ngroup :production do\n  gem 'exception_notification'\n  gem 'rails_12factor'\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 331, "user_id": 2236350, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/35269f58efb6e6ec2242fe68645f1683?s=128&d=identicon&r=PG", "display_name": "Frank Levering", "link": "https://stackoverflow.com/users/2236350/frank-levering"}, "edited": false, "score": 1, "creation_date": 1457552507, "post_id": 35900958, "comment_id": 59462582, "body": "This works, thanks!! Is it a best practice to move those kind of files into the lib folder instead of the app folder?"}, {"owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "reply_to_user": {"reputation": 331, "user_id": 2236350, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/35269f58efb6e6ec2242fe68645f1683?s=128&d=identicon&r=PG", "display_name": "Frank Levering", "link": "https://stackoverflow.com/users/2236350/frank-levering"}, "edited": false, "score": 0, "creation_date": 1457554298, "post_id": 35900958, "comment_id": 59463648, "body": "Yes, I typically keep them in lib. If I&#39;m adding a new class of things I want under app/ (like <code>decorators</code>), I&#39;ll add app/decorators to the load path, but in general, bespoke stuff goes into lib."}], "tags": [], "owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "is_accepted": true, "score": 2, "last_activity_date": 1457552025, "creation_date": 1457552025, "answer_id": 35900958, "question_id": 35900867, "link": "https://stackoverflow.com/questions/35900867/uninitialized-constant-inside-controller-namespace/35900958#35900958", "title": "Uninitialized constant inside controller namespace", "body": "<p>The Rails autoloader searches a number of paths to try to locate constants - <code>app/</code> isn't one of them. You can add it by appending it in application.rb, like:</p>\n\n<pre><code>config.autoload_paths &lt;&lt; File.join(config.root, \"app\")\n</code></pre>\n\n<p>Or just move <code>foo/bar.rb</code> into <code>lib/</code>, which is already in the loader path.</p>\n"}], "owner": {"reputation": 331, "user_id": 2236350, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/35269f58efb6e6ec2242fe68645f1683?s=128&d=identicon&r=PG", "display_name": "Frank Levering", "link": "https://stackoverflow.com/users/2236350/frank-levering"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 508, "favorite_count": 0, "accepted_answer_id": 35900958, "answer_count": 1, "score": 3, "last_activity_date": 1457552025, "creation_date": 1457551719, "question_id": 35900867, "link": "https://stackoverflow.com/questions/35900867/uninitialized-constant-inside-controller-namespace", "title": "Uninitialized constant inside controller namespace", "body": "<p>I'm trying to solve the following issue but I just can't get my head around the autoloading in Rails yet. I have the following controller located in <strong>app/api/v1/registration_controller.</strong></p>\n\n<pre><code>class Api::V1::RegistrationController &lt; ApplicationController\n   include ::Foo::Bar\n\n   def index\n   end\n end\n</code></pre>\n\n<p>And the following module/class in <strong>app/foo/bar.rb:</strong></p>\n\n<pre><code>module Foo\n  class Bar\n     def some_method\n     end\n  end\nend\n</code></pre>\n\n<p>However, I'm getting the following error message:</p>\n\n<pre><code>uninitialized constant Foo\n</code></pre>\n\n<p>I'm trying to get my head around this and already searched Stack Overflow for solutions, but I wasn't able to find the right one. If the solution is already written down elsewhere, please close this topic.</p>\n\n<p>Hopefully someone can help me. Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "activerecord", "materialized-views"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1457574850, "post_id": 35900860, "comment_id": 59472566, "body": "Have you tried creating and working with your view without ActiveRecord and Rails in the way?"}, {"owner": {"reputation": 573, "user_id": 1390780, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/aENWq.jpg?s=128&g=1", "display_name": "Kote", "link": "https://stackoverflow.com/users/1390780/kote"}, "edited": false, "score": 0, "creation_date": 1543668390, "post_id": 35900860, "comment_id": 94006346, "body": "did you fix this issue? I have the same thing"}, {"owner": {"reputation": 17465, "user_id": 559850, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/vJfye.jpg?s=128&g=1", "display_name": "styler1972", "link": "https://stackoverflow.com/users/559850/styler1972"}, "edited": false, "score": 0, "creation_date": 1543691646, "post_id": 35900860, "comment_id": 94012676, "body": "I dont think so, I think I would have answered the question if I did."}], "answers": [{"comments": [{"owner": {"reputation": 144, "user_id": 306003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c001e384386471268020bf020c51e395?s=128&d=identicon&r=PG", "display_name": "Eric D. Fields", "link": "https://stackoverflow.com/users/306003/eric-d-fields"}, "edited": false, "score": 0, "creation_date": 1543271051, "post_id": 48424939, "comment_id": 93850013, "body": "That gem looks great. Thanks for the link. However, I don&#39;t see what it accomplishes besides writing out a migration like the one OP created. Any idea why scenic works and doing it manually doesn&#39;t?  Thanks for any insight."}, {"owner": {"reputation": 573, "user_id": 1390780, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/aENWq.jpg?s=128&g=1", "display_name": "Kote", "link": "https://stackoverflow.com/users/1390780/kote"}, "edited": false, "score": 0, "creation_date": 1543668290, "post_id": 48424939, "comment_id": 94006320, "body": "For me scenic lib does the same. It adds with NO DATA for no reason"}], "tags": [], "owner": {"reputation": 4386, "user_id": 922016, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b3e4ded635f3ccfc9b5676b8cfbfa515?s=128&d=identicon&r=PG", "display_name": "pmichna", "link": "https://stackoverflow.com/users/922016/pmichna"}, "is_accepted": false, "score": 3, "last_activity_date": 1516804392, "creation_date": 1516804392, "answer_id": 48424939, "question_id": 35900860, "link": "https://stackoverflow.com/questions/35900860/activerecord-migration-not-populating-a-postgres-materialized-view/48424939#48424939", "title": "ActiveRecord migration not populating a Postgres materialized view", "body": "<p>I know the question was asked almost 2 years ago but maybe my answer will be useful for someone else.</p>\n\n<p>Try using <a href=\"https://github.com/thoughtbot/scenic\" rel=\"nofollow noreferrer\">scenic gem</a>. I have recently written <a href=\"https://ideamotive.co/blog/materialized-views-ruby-rails-scenic/\" rel=\"nofollow noreferrer\">a blog post</a> about it.</p>\n"}, {"tags": [], "owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "is_accepted": false, "score": 0, "last_activity_date": 1543769010, "last_edit_date": 1543769010, "creation_date": 1543727786, "answer_id": 53577616, "question_id": 35900860, "link": "https://stackoverflow.com/questions/35900860/activerecord-migration-not-populating-a-postgres-materialized-view/53577616#53577616", "title": "ActiveRecord migration not populating a Postgres materialized view", "body": "<p>I believe you'll need to setup your own strategy for calling a <code>refresh</code> on materialized views. The scenic gem has a <a href=\"https://github.com/scenic-views/scenic#what-about-materialized-views\" rel=\"nofollow noreferrer\">method for refreshing</a> that's worth looking into.</p>\n\n<p>You could look at before hooks (for specs/tests) or rake before hook tasks to make this refresh a little more painless (chaining your refresh automatically after you call <code>migrate</code>, for example)</p>\n\n<p>Interestingly, Postgres dumps (via <code>pg_dump</code> command) the materialized views created <code>WITH DATA</code> as <code>WITH NO DATA</code> as well. I'm not sure the root cause but I'm assuming this works as designed, based around the purpose of running a dump. </p>\n\n<p>However, <code>pg_dump</code> DOES also include a <code>REFRESH</code> command in the dumped file (rails does not), which is why you need to come up with your own strategy for refreshing the materialized view.</p>\n\n<p>After some further digging I noticed the <code>--schema-only</code> flag passed to a <code>pg_dump</code> command will not dump the <code>REFRESH MATERIALIZED VIEW</code> command. The rails <code>db:structure:dump</code> command for Postgres appears to use this command (as <code>-s</code>). That might be enough to help you identify a way to change the behavior but I think the other answer recommending use of <code>scenic</code>, coupled with some rake tasks to automatically refresh might be your best bet.</p>\n\n<p>Reference: <a href=\"https://github.com/rails/rails/blob/8f2caec401c8e97d9eb1ea84d8263911c50e1ed6/activerecord/lib/active_record/tasks/postgresql_database_tasks.rb#L64\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/blob/8f2caec401c8e97d9eb1ea84d8263911c50e1ed6/activerecord/lib/active_record/tasks/postgresql_database_tasks.rb#L64</a></p>\n"}], "owner": {"reputation": 17465, "user_id": 559850, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/vJfye.jpg?s=128&g=1", "display_name": "styler1972", "link": "https://stackoverflow.com/users/559850/styler1972"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1034, "favorite_count": 0, "answer_count": 2, "score": 12, "last_activity_date": 1543769010, "creation_date": 1457551714, "question_id": 35900860, "link": "https://stackoverflow.com/questions/35900860/activerecord-migration-not-populating-a-postgres-materialized-view", "title": "ActiveRecord migration not populating a Postgres materialized view", "body": "<p>I have a <code>MATERIALIZED VIEW</code> that is created via a migration.</p>\n\n<pre><code>class MyView &lt; ActiveRecord::Migration\n  def up\n    ActiveRecord::Base.connection.execute &lt;&lt;-SQL\n    CREATE MATERIALIZED VIEW my_view AS (\n      SELECT DISTINCT something, something_else, other.thing as real_thing, thing.some_id\n          FROM some_table\n          JOIN another_table on another_table.id = something\n          JOIN one_more_table on some_table.id = other_id\n          ORDER BY order_column)\n      WITH DATA;\n    SQL\n\n    add_index :table, [:key_part_one, :key_part_two]\n  end\n\n  ...\nend\n</code></pre>\n\n<p>Note: I've obfuscated the SELECT statement, just trust me that it works.</p>\n\n<p>The important part to note here is that I've explicitly called <code>WITH DATA</code>, so the view should be populated and scannable right away.</p>\n\n<p>This is not happening.  The migration runs, shown below</p>\n\n<pre><code>==  MyView: migrating ========================\n==  MyView: migrated (0.0763s) ===============\n</code></pre>\n\n<p>Later on in the <code>db:refresh</code> we see the following</p>\n\n<pre><code>Reindexing Something...\nReindex queued\nReindexing Another...\nReindex queued\nReindexing SomeOtherThing...\nReindex queued\nReindexing One::OtherThing...\nReindex queued\nReindexing MyViewModel...\nrake aborted!\nActiveRecord::StatementInvalid: PG::ObjectNotInPrerequisiteState: ERROR:  materialized view \"my_view\" has not been populated\nHINT:  Use the REFRESH MATERIALIZED VIEW command.\n</code></pre>\n\n<p>Um, what? I declared <code>WITH DATA</code>.  I also have another consecutive migration that explicitly calls the <code>REFRESH MATERIALIZED VIEW</code> command on the view.</p>\n\n<p>To no avail, in order to get the rake db:refresh task to complete, I have to go in and manually refresh the view.</p>\n\n<p>Interesting note, in the structure.sql file, its shown as being created WITH NO DATA</p>\n\n<pre><code>CREATE MATERIALIZED VIEW my_view AS (\n  SELECT DISTINCT something, something_else, other.thing as real_thing, thing.some_id\n      FROM some_table\n      JOIN another_table on another_table.id = something\n      JOIN one_more_table on some_table.id = other_id\n      ORDER BY order_column)\n  WITH NO DATA;\n</code></pre>\n\n<p>I believe this is the real issue but I'm unaware of a fix/workaround.  Its also confusing because even if it was created WITH NO DATA, the subsequent REFRESH MATERIALIZED VIEW should populate it and mark it as scannable.</p>\n\n<p>Is there some issue with Postgres or AR that I'm not aware of that is preventing me from populating this materialized view?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "oop", "rspec", "tdd"], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 4237419, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dBfaCWnD2o4/AAAAAAAAAAI/AAAAAAAADi0/DnconKlIXek/photo.jpg?sz=128", "display_name": "Amin Rezapour", "link": "https://stackoverflow.com/users/4237419/amin-rezapour"}, "edited": false, "score": 0, "creation_date": 1457553140, "post_id": 35901117, "comment_id": 59462975, "body": "Thank you B. How would you describe/refer to the file example_spec.rb? Is &quot;test&quot; the right word?"}, {"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "reply_to_user": {"reputation": 99, "user_id": 4237419, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dBfaCWnD2o4/AAAAAAAAAAI/AAAAAAAADi0/DnconKlIXek/photo.jpg?sz=128", "display_name": "Amin Rezapour", "link": "https://stackoverflow.com/users/4237419/amin-rezapour"}, "edited": false, "score": 0, "creation_date": 1457561109, "post_id": 35901117, "comment_id": 59467509, "body": "No, it&#39;s a file. It has many specs. Some people say &quot;test&quot;, but I think spec is more accurate."}], "tags": [], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "is_accepted": true, "score": 0, "last_activity_date": 1457552493, "creation_date": 1457552493, "answer_id": 35901117, "question_id": 35900852, "link": "https://stackoverflow.com/questions/35900852/what-is-the-type-of-an-rspec-test-in-rails-a-class-or-a-module-or-a-block-or-ne/35901117#35901117", "title": "What is the type of an rspec test in Rails? a class or a module or a block or neither?", "body": "<p><code>describe</code> blocks are a class within the namespace <code>RSpec::ExampleGroups</code>.</p>\n\n<p><code>specify</code> blocks are an instance of <code>RSpec::Core::Example</code></p>\n"}], "owner": {"reputation": 99, "user_id": 4237419, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dBfaCWnD2o4/AAAAAAAAAAI/AAAAAAAADi0/DnconKlIXek/photo.jpg?sz=128", "display_name": "Amin Rezapour", "link": "https://stackoverflow.com/users/4237419/amin-rezapour"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "closed_date": 1457568015, "accepted_answer_id": 35901117, "answer_count": 1, "score": 0, "last_activity_date": 1457552939, "creation_date": 1457551679, "last_edit_date": 1457552939, "question_id": 35900852, "link": "https://stackoverflow.com/questions/35900852/what-is-the-type-of-an-rspec-test-in-rails-a-class-or-a-module-or-a-block-or-ne", "closed_reason": "Needs details or clarity", "title": "What is the type of an rspec test in Rails? a class or a module or a block or neither?", "body": "<p>I am looking at the body of an rspec file with *.rb suffix and can't quite figure out what type of object it is.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubymine"], "comments": [{"owner": {"reputation": 1207, "user_id": 4145941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8mHhb.jpg?s=128&g=1", "display_name": "Mohammad", "link": "https://stackoverflow.com/users/4145941/mohammad"}, "edited": false, "score": 0, "creation_date": 1457551995, "post_id": 35900698, "comment_id": 59462302, "body": "which version of rubymine/ruby do you have? I think upgrading to the latest versions might solve the problem."}, {"owner": {"reputation": 327, "user_id": 574759, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a16784b51c2f325acd639f177dd36f63?s=128&d=identicon&r=PG", "display_name": "JCii", "link": "https://stackoverflow.com/users/574759/jcii"}, "edited": false, "score": 0, "creation_date": 1463444365, "post_id": 35900698, "comment_id": 62057086, "body": "I&#39;m using 8.0.4 and I&#39;ve fought with this for a few hours today."}, {"owner": {"reputation": 2759, "user_id": 20176, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e983cba9e659f3815c0c87f33d4b3b18?s=128&d=identicon&r=PG", "display_name": "thesmart", "link": "https://stackoverflow.com/users/20176/thesmart"}, "edited": false, "score": 0, "creation_date": 1467764913, "post_id": 35900698, "comment_id": 63853101, "body": "I have this issue too. any updates?"}], "answers": [{"tags": [], "owner": {"reputation": 316, "user_id": 5396950, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1OfEWmXS3j4/AAAAAAAAAAI/AAAAAAAAAB0/OvG_NglrJEQ/photo.jpg?sz=128", "display_name": "Ahsan Ellahi", "link": "https://stackoverflow.com/users/5396950/ahsan-ellahi"}, "is_accepted": false, "score": 1, "last_activity_date": 1457554045, "creation_date": 1457554045, "answer_id": 35901566, "question_id": 35900698, "link": "https://stackoverflow.com/questions/35900698/how-to-solve-a-rubymine-ruby-debug-ide-isnt-installed-error/35901566#35901566", "title": "How to solve a RubyMine &quot;&#39;ruby-debug-ide&#39; isn&#39;t installed&quot; error", "body": "<p>You should look into RubyMine settings, which <code>ruby version</code> and which <code>gemset</code> (global/default) it is using. Check out where these required gems are installed and make sure RubyMine is using that gemset where these are installed successfully.</p>\n"}, {"tags": [], "owner": {"reputation": 519, "user_id": 812279, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c8f408b0136fb6e06d5d94fb361fa037?s=128&d=identicon&r=PG", "display_name": "Michel", "link": "https://stackoverflow.com/users/812279/michel"}, "is_accepted": false, "score": 8, "last_activity_date": 1467275314, "creation_date": 1467275314, "answer_id": 38117767, "question_id": 35900698, "link": "https://stackoverflow.com/questions/35900698/how-to-solve-a-rubymine-ruby-debug-ide-isnt-installed-error/38117767#38117767", "title": "How to solve a RubyMine &quot;&#39;ruby-debug-ide&#39; isn&#39;t installed&quot; error", "body": "<p>Complementing Ahsan Ellahi</p>\n\n<p>In your terminal you're probably not running the same ruby version as inside Ruby Mine. You can check this </p>\n\n<p>In Ruby Mine</p>\n\n<pre><code>Preferences --&gt; Laguanges and Frameworks --&gt; Ruby SDK and Gems\n</code></pre>\n\n<p>In Terminal </p>\n\n<pre><code>$ ruby-v\n</code></pre>\n\n<p>If you're not running the same version, try to set RubyMine to use the same Ruby version that you're running in your terminal. This should solve the problem. Than, if you really want to use another RubyVersion, you will need to go to your terminal, change the Ruby version and manually install both gems </p>\n"}, {"comments": [{"owner": {"reputation": 5002, "user_id": 1308632, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/bO5vb.png?s=128&g=1", "display_name": "Mayur", "link": "https://stackoverflow.com/users/1308632/mayur"}, "edited": false, "score": 0, "creation_date": 1470717765, "post_id": 38837280, "comment_id": 65049645, "body": "While this link may answer the question, it is better to include the essential parts of the answer here and provide the link for reference.  Link-only answers can become invalid if the linked page changes. - <a href=\"/review/low-quality-posts/13269382\">From Review</a>"}, {"owner": {"reputation": 41, "user_id": 6429494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7RjkB.jpg?s=128&g=1", "display_name": "JKettler", "link": "https://stackoverflow.com/users/6429494/jkettler"}, "reply_to_user": {"reputation": 5002, "user_id": 1308632, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/bO5vb.png?s=128&g=1", "display_name": "Mayur", "link": "https://stackoverflow.com/users/1308632/mayur"}, "edited": false, "score": 5, "creation_date": 1470854616, "post_id": 38837280, "comment_id": 65123504, "body": "That&#39;s exactly what I did. Read the next three lines after the link."}], "tags": [], "owner": {"reputation": 41, "user_id": 6429494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7RjkB.jpg?s=128&g=1", "display_name": "JKettler", "link": "https://stackoverflow.com/users/6429494/jkettler"}, "is_accepted": false, "score": 1, "last_activity_date": 1470685297, "creation_date": 1470685297, "answer_id": 38837280, "question_id": 35900698, "link": "https://stackoverflow.com/questions/35900698/how-to-solve-a-rubymine-ruby-debug-ide-isnt-installed-error/38837280#38837280", "title": "How to solve a RubyMine &quot;&#39;ruby-debug-ide&#39; isn&#39;t installed&quot; error", "body": "<p>I fixed this after viewing the responses here: <a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/206072049-Cannot-start-debugger\" rel=\"nofollow\">https://intellij-support.jetbrains.com/hc/en-us/community/posts/206072049-Cannot-start-debugger</a></p>\n\n<p>The solution at the bottom suggested 'removing all my gems. removing ruby. cleaning up directories and rvm. removing ruby mine, then reinstalling everything'</p>\n\n<p>I started with the easiest of these, which was to reinstall rubymine. That solved it for me. </p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7674095, "user_type": "registered", "profile_image": "https://graph.facebook.com/1471241232895799/picture?type=large", "display_name": "Sneha Kashyap Thakur", "link": "https://stackoverflow.com/users/7674095/sneha-kashyap-thakur"}, "is_accepted": false, "score": 0, "last_activity_date": 1488910493, "creation_date": 1488910493, "answer_id": 42655414, "question_id": 35900698, "link": "https://stackoverflow.com/questions/35900698/how-to-solve-a-rubymine-ruby-debug-ide-isnt-installed-error/42655414#42655414", "title": "How to solve a RubyMine &quot;&#39;ruby-debug-ide&#39; isn&#39;t installed&quot; error", "body": "<p>I have faced this issue too with Rubymine 8, rvm 1.29.1 and Ruby version 2.3.3 And upgrading the Rubymine version from Rubymine 8 to Rubymine 2016.3 or latest resolves the issue for me.</p>\n"}, {"tags": [], "owner": {"reputation": 78, "user_id": 7352884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JLb1X.jpg?s=128&g=1", "display_name": "Suyanhanx", "link": "https://stackoverflow.com/users/7352884/suyanhanx"}, "is_accepted": false, "score": 0, "last_activity_date": 1510553147, "last_edit_date": 1510553147, "creation_date": 1510542696, "answer_id": 47256562, "question_id": 35900698, "link": "https://stackoverflow.com/questions/35900698/how-to-solve-a-rubymine-ruby-debug-ide-isnt-installed-error/47256562#47256562", "title": "How to solve a RubyMine &quot;&#39;ruby-debug-ide&#39; isn&#39;t installed&quot; error", "body": "<p>Check ruby <strong>SDK's</strong> version is right.You can first using rails installer to install everything .</p>\n\n<p>Then using gem to install <strong>rdebug</strong> for ruby 2+. </p>\n\n<p>Make sure <strong>Rubymine's Ruby</strong> version is same to which you have installed.With those all done,you will be able to debug ruby.</p>\n"}, {"tags": [], "owner": {"reputation": 1126, "user_id": 1100060, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/0fOMO.jpg?s=128&g=1", "display_name": "Nathan B", "link": "https://stackoverflow.com/users/1100060/nathan-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1547846666, "last_edit_date": 1547846666, "creation_date": 1520610746, "answer_id": 49197465, "question_id": 35900698, "link": "https://stackoverflow.com/questions/35900698/how-to-solve-a-rubymine-ruby-debug-ide-isnt-installed-error/49197465#49197465", "title": "How to solve a RubyMine &quot;&#39;ruby-debug-ide&#39; isn&#39;t installed&quot; error", "body": "<p>My solution was to go to Rubymine settings, to the available SDKs, \nremove the SDK, restart Rubymine and add the SDK again.</p>\n"}, {"comments": [{"owner": {"reputation": 3731, "user_id": 117743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6953e24f8b79c38363111304870549ed?s=128&d=identicon&r=PG", "display_name": "austinfromboston", "link": "https://stackoverflow.com/users/117743/austinfromboston"}, "edited": false, "score": 0, "creation_date": 1565889434, "post_id": 49279310, "comment_id": 101495241, "body": "there also appears to be a &#39;Sync Gems and Rubymine Helpers&#39; button now at the top of the remote SDK gem listing"}], "tags": [], "owner": {"reputation": 964, "user_id": 395633, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OSpUb.jpg?s=128&g=1", "display_name": "Daniel Da Cunha", "link": "https://stackoverflow.com/users/395633/daniel-da-cunha"}, "is_accepted": false, "score": 7, "last_activity_date": 1521034953, "creation_date": 1521034953, "answer_id": 49279310, "question_id": 35900698, "link": "https://stackoverflow.com/questions/35900698/how-to-solve-a-rubymine-ruby-debug-ide-isnt-installed-error/49279310#49279310", "title": "How to solve a RubyMine &quot;&#39;ruby-debug-ide&#39; isn&#39;t installed&quot; error", "body": "<p>I have faced this issue when debugging in a <code>docker-compose</code> environment. I suspect that RubyMine does not refresh the list of available gem after the SDK is added.</p>\n\n<p>So if you add the SDK then add <code>ruby-debug-ide</code> to <code>Gemfile</code> you will get the error.</p>\n\n<p>Instead, (re)create the SDK after adding <code>ruby-debug-ide</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 6009, "user_id": 56690, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/673b3af90381f26882b7e7283ab137fa?s=128&d=identicon&r=PG", "display_name": "Bo Jeanes", "link": "https://stackoverflow.com/users/56690/bo-jeanes"}, "is_accepted": false, "score": 7, "last_activity_date": 1524458108, "creation_date": 1524458108, "answer_id": 49973473, "question_id": 35900698, "link": "https://stackoverflow.com/questions/35900698/how-to-solve-a-rubymine-ruby-debug-ide-isnt-installed-error/49973473#49973473", "title": "How to solve a RubyMine &quot;&#39;ruby-debug-ide&#39; isn&#39;t installed&quot; error", "body": "<p>I started getting this after upgrading from 2017.x to 2018.1. In my case, it seems that RubyMine needed a newer version but its error message implied it couldn't find any version and failed to install it. I think it was trying to install it with a different SDK.</p>\n\n<p>Manually installing the latest <code>ruby-debugger-ide</code> (in my case the <code>--pre</code> flag was necessary) and then restarting RubyMine did the trick for me.</p>\n"}, {"tags": [], "owner": {"reputation": 493, "user_id": 1208263, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/0f5a5dd0146c6ccc4570191867a35ce9?s=128&d=identicon&r=PG", "display_name": "Mario Trento", "link": "https://stackoverflow.com/users/1208263/mario-trento"}, "is_accepted": false, "score": 0, "last_activity_date": 1535165985, "creation_date": 1535165985, "answer_id": 52013668, "question_id": 35900698, "link": "https://stackoverflow.com/questions/35900698/how-to-solve-a-rubymine-ruby-debug-ide-isnt-installed-error/52013668#52013668", "title": "How to solve a RubyMine &quot;&#39;ruby-debug-ide&#39; isn&#39;t installed&quot; error", "body": "<p>Please check x286 vs 64 version, both Ruby and Rmine version. I had this problem runnin x86 rubyMine on 64 ruby</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9174296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23c6dc04012e20f27c8ddd4273aeb0fe?s=128&d=identicon&r=PG&f=1", "display_name": "dedwards", "link": "https://stackoverflow.com/users/9174296/dedwards"}, "is_accepted": false, "score": 0, "last_activity_date": 1543258773, "creation_date": 1543258773, "answer_id": 53487420, "question_id": 35900698, "link": "https://stackoverflow.com/questions/35900698/how-to-solve-a-rubymine-ruby-debug-ide-isnt-installed-error/53487420#53487420", "title": "How to solve a RubyMine &quot;&#39;ruby-debug-ide&#39; isn&#39;t installed&quot; error", "body": "<p>A combination of matching the host ide ruby version with the remote SDK version worked for me but required a few additional steps.  I too am running mac os as my host (running mohave)</p>\n\n<ol>\n<li>the remote environment setup in preferences -> ruby sdk and gems must have the same version as the remote target, including any gems installed.</li>\n</ol>\n\n<p>NOTE: I had to re-install the bundler gem on both host and remote host to get the gem manager to install things auto-majically.</p>\n\n<ol start=\"2\">\n<li>the project environment must be changed to use the same version as the remote host as well.  this is in File -> preferences for new projects -> ruby sdk and gems. </li>\n</ol>\n\n<p>NOTE: I also had to set the default RVM on my local host and remote host and unset the previous version as default in the local host preferences.</p>\n\n<p>Once I did this I was able to get gems in sync and remote debugger to connect.</p>\n"}, {"comments": [{"owner": {"reputation": 723, "user_id": 2900735, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cdf6434f6df71edf933f9b804e94c2ee?s=128&d=identicon&r=PG", "display_name": "Yury Bayda", "link": "https://stackoverflow.com/users/2900735/yury-bayda"}, "edited": false, "score": 0, "creation_date": 1550277355, "post_id": 54162529, "comment_id": 96223125, "body": "Yes, for some reason RubyMine expects a pre-release version of this gem"}], "tags": [], "owner": {"reputation": 121, "user_id": 10905541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9iRMR.jpg?s=128&g=1", "display_name": "Hollie B.", "link": "https://stackoverflow.com/users/10905541/hollie-b"}, "is_accepted": false, "score": 11, "last_activity_date": 1547327919, "last_edit_date": 1547327919, "creation_date": 1547316946, "answer_id": 54162529, "question_id": 35900698, "link": "https://stackoverflow.com/questions/35900698/how-to-solve-a-rubymine-ruby-debug-ide-isnt-installed-error/54162529#54162529", "title": "How to solve a RubyMine &quot;&#39;ruby-debug-ide&#39; isn&#39;t installed&quot; error", "body": "<p>Here's the actual command that worked for me:</p>\n\n<pre><code>gem install ruby-debug-ide --pre\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6833, "user_id": 155640, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/NsLA2.png?s=128&g=1", "display_name": "O.O", "link": "https://stackoverflow.com/users/155640/o-o"}, "is_accepted": false, "score": 1, "last_activity_date": 1568780518, "creation_date": 1568780518, "answer_id": 57985060, "question_id": 35900698, "link": "https://stackoverflow.com/questions/35900698/how-to-solve-a-rubymine-ruby-debug-ide-isnt-installed-error/57985060#57985060", "title": "How to solve a RubyMine &quot;&#39;ruby-debug-ide&#39; isn&#39;t installed&quot; error", "body": "<p>Since you're using Mac OSX, I couldn't provide the same exact answer for you, but you can find a similar way of achieving this. I'm using Ubuntu with Vagrant, so you may need to adapt it just a little bit.</p>\n\n<ol>\n<li>Copy the following gem from RubyMine/rb/gems app folder, please copy the gem related to your ruby runtime and platform, there are different gems for different ruby runtime and platforms, in my case, its:\n\n<ul>\n<li>debase-0.3.0.beta7.gem</li>\n<li>ruby-debug-ide-0.8.0.beta6.gem</li>\n</ul></li>\n<li>Install them inside your app host, in my case its vagrant, in your case it could be inside your container, or in your host OS using the following command:</li>\n</ol>\n\n<pre><code>gem install --force --local *.gem\n</code></pre>\n\n<ol start=\"3\">\n<li>Set breakpoint and start debugging.</li>\n</ol>\n\n<p>It may asks you one more time to install the gem, but then the debug will works for sure.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5752113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/533892dda523b7b0e0d2773918ff7259?s=128&d=identicon&r=PG", "display_name": "Ashish Jajoria", "link": "https://stackoverflow.com/users/5752113/ashish-jajoria"}, "is_accepted": false, "score": 1, "last_activity_date": 1579683207, "creation_date": 1579683207, "answer_id": 59855826, "question_id": 35900698, "link": "https://stackoverflow.com/questions/35900698/how-to-solve-a-rubymine-ruby-debug-ide-isnt-installed-error/59855826#59855826", "title": "How to solve a RubyMine &quot;&#39;ruby-debug-ide&#39; isn&#39;t installed&quot; error", "body": "<p>This worked for me</p>\n\n<pre><code>gem install debase-ruby_core_source\n</code></pre>\n\n<p>Source: <a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/115000706184-Cannot-install-Rubymine-Debugger?page=1#community_comment_115000603750\" rel=\"nofollow noreferrer\">Cannot install Rubymine Debugger</a></p>\n"}, {"tags": [], "owner": {"reputation": 415, "user_id": 4926919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5aa18066b4d1fd77130890584242d29?s=128&d=identicon&r=PG&f=1", "display_name": "rgvtim", "link": "https://stackoverflow.com/users/4926919/rgvtim"}, "is_accepted": false, "score": 0, "last_activity_date": 1610838716, "creation_date": 1610838716, "answer_id": 65755679, "question_id": 35900698, "link": "https://stackoverflow.com/questions/35900698/how-to-solve-a-rubymine-ruby-debug-ide-isnt-installed-error/65755679#65755679", "title": "How to solve a RubyMine &quot;&#39;ruby-debug-ide&#39; isn&#39;t installed&quot; error", "body": "<p>Running Ubuntu 18 something, RubyMine version 2020.3. Had this issue. None of these suggestions worked for me, same error no matter what did. I was using RVM, and ruby 2.6 and 2.7, switched back and forth a cleaning and reinstalling gems along thew way, both debase and ruby-debug-ide were installed according to the gem list. Settings in rubymine matched &quot;ruby -v&quot; from the command line. VSCode worked perfectly with this setup.</p>\n<p>In the end i removed RVM and all the ruby versions, installed ruby via rbenv, installed ruby 2.6.5 and that worked like a charm.</p>\n<p>I think this error is generated for multiple reasons with no real way to figure out which reason for your specific instance. I would like to encourage jetbrains to generate more debug information on errors like this, or if you are generating error information, point out where it is when this happens.</p>\n"}, {"tags": [], "owner": {"reputation": 70, "user_id": 3526380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af42aaca070c8f25ae2920974358482c?s=128&d=identicon&r=PG", "display_name": "caglar", "link": "https://stackoverflow.com/users/3526380/caglar"}, "is_accepted": false, "score": 0, "last_activity_date": 1616074147, "creation_date": 1616074147, "answer_id": 66692104, "question_id": 35900698, "link": "https://stackoverflow.com/questions/35900698/how-to-solve-a-rubymine-ruby-debug-ide-isnt-installed-error/66692104#66692104", "title": "How to solve a RubyMine &quot;&#39;ruby-debug-ide&#39; isn&#39;t installed&quot; error", "body": "<p>Try these steps:</p>\n<pre><code>1. /usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;\n2. brew install ruby\n3. echo 'export PATH=&quot;/usr/local/opt/ruby/bin:$PATH&quot;' &gt;&gt; ~/.bash_profile\n</code></pre>\n<p>if you get unshallow error on any step then first try:</p>\n<pre><code>1. git -C /usr/local/Homebrew/Library/Taps/homebrew/homebrew-core fetch --unshallow\n2. git -C /usr/local/Homebrew/Library/Taps/homebrew/homebrew-cask fetch --unshallow\n3. /usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;\n4. brew install ruby\n5. echo 'export PATH=&quot;/usr/local/opt/ruby/bin:$PATH&quot;' &gt;&gt; ~/.bash_profile\n</code></pre>\n<p>Lastly restart the terminal and check .bash_profile:</p>\n<pre><code> - nano ~/.bash_profile\n</code></pre>\n<p>If you see the path variable, just close it. Otherwise it means something went wrong :/.</p>\n<p>The last step is to open</p>\n<p>RubyMine -&gt; Preferences -&gt; Language and Frameworks -&gt; Ruby SDK and Gems -&gt; select the newest ruby version and apply.</p>\n<p>You may need to update ruby version from the gemfile.</p>\n<p>And it should be done!</p>\n"}], "owner": {"reputation": 371, "user_id": 1151209, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/554b7bc81831e7f92b1e61fcc8ffd5c4?s=128&d=identicon&r=PG", "display_name": "WWTLF", "link": "https://stackoverflow.com/users/1151209/wwtlf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17161, "favorite_count": 0, "answer_count": 15, "score": 28, "last_activity_date": 1616074147, "creation_date": 1457551186, "last_edit_date": 1457556657, "question_id": 35900698, "link": "https://stackoverflow.com/questions/35900698/how-to-solve-a-rubymine-ruby-debug-ide-isnt-installed-error", "title": "How to solve a RubyMine &quot;&#39;ruby-debug-ide&#39; isn&#39;t installed&quot; error", "body": "<p>I get the error:</p>\n\n<pre><code>Cannot start debugger. Gem 'ruby-debug-ide' isn't installed or its executable script 'rdebug-ide' doesn't exist.\n</code></pre>\n\n<p>but all gems were successfuly installed:</p>\n\n<pre><code>gem 'ruby-debug-ide'\ngem 'debase'\n</code></pre>\n\n<p>I can run 'rdebug-ide' manually:</p>\n\n<pre><code>$ rdebug-ide\nUsing ruby-debug-base 0.2.1\nUsage: rdebug-ide is supposed to be called from RDT, NetBeans, RubyMine, or\n       the IntelliJ IDEA Ruby plugin.  The command line interface to\n       ruby-debug is rdebug.\n</code></pre>\n\n<p>But when I start debugging, RubyMine asks to install the ruby-debug-ide gem. Why?</p>\n\n<p>And, after installation I get:</p>\n\n<pre><code>Cannot start debugger. Gem 'ruby-debug-ide' isn't installed or its executable script 'rdebug-ide' doesn't exist.\n</code></pre>\n\n<p>I'm running Mac OS X 10.11.3.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "unit-testing", "integration-testing", "minitest"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1457551357, "post_id": 35900687, "comment_id": 59461911, "body": "The title is a question but then you say you are puzzled by some other questions. What exactly is your question? If answers require opinions, your question will not be well-received, as those are no-no&#39;s on SO."}, {"owner": {"reputation": 4694, "user_id": 2325154, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8edaf24cd3712f7484ebf0edec77ca7c?s=128&d=identicon&r=PG", "display_name": "Nital", "link": "https://stackoverflow.com/users/2325154/nital"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1457551569, "post_id": 35900687, "comment_id": 59462043, "body": "My question is more of related to MiniTest testing framework as I am not sure what all it offers. The questions in the title is a more generic one whereas the one in the post are more descriptive."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1457553852, "post_id": 35900687, "comment_id": 59463401, "body": "MiniTest is just one of the testing frameworks you can use with Rails. There&#39;s a number of alternatives that can also do the job, it&#39;s just a matter of preference. There&#39;s nothing magical about the tests themselves, they just execute code, but each framework has a sort of philosophy about how to do the testing. This question is way, way too broad. Have you read the <a href=\"http://guides.rubyonrails.org/testing.html\" rel=\"nofollow noreferrer\">Rails testing guide</a>?"}, {"owner": {"reputation": 4694, "user_id": 2325154, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8edaf24cd3712f7484ebf0edec77ca7c?s=128&d=identicon&r=PG", "display_name": "Nital", "link": "https://stackoverflow.com/users/2325154/nital"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1457554227, "post_id": 35900687, "comment_id": 59463613, "body": "@tadman - I have been going through the Rails guides but haven&#39;t yet reached the Testing section yet. Will definitely look into it. Thanks for the pointer."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1457556849, "post_id": 35900687, "comment_id": 59465144, "body": "Please stop using <code>`backticks`</code> to highlight words. They are for <b>inline code only</b>, not for adding emphasis."}], "answers": [{"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 2, "last_activity_date": 1457556741, "last_edit_date": 1457556741, "creation_date": 1457554699, "answer_id": 35901743, "question_id": 35900687, "link": "https://stackoverflow.com/questions/35900687/can-minitest-alone-be-used-to-test-a-rails-application/35901743#35901743", "title": "Can minitest alone be used to test a rails application?", "body": "<blockquote>\n  <ol>\n  <li>Is 'MiniTest` used for just unit testing or integration testing or both?</li>\n  </ol>\n</blockquote>\n\n<p>MiniTest is a generic framework for testing just like JUnit or PHPUnit or whatever. Its pretty sparse straight out of the box but can be extended for different tasks. Its a wrench, and you can use wrenches to build rocket ships or just toy cars.</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>Is this test actually a <code>MiniTest</code> test or is it just importing existing default <code>Ruby</code> test framework in the helper file and not\n  actually using any of the <code>MiniTest</code> features?</li>\n  </ol>\n</blockquote>\n\n<p>The Rails tests are all built on top of <code>ActiveSupport::TestCase</code>. <code>ActiveSupport::TestCase</code> is built to run on top of <code>MiniTest</code> or the older <code>Test::Unit</code> which provides the runner and assertions.</p>\n\n<blockquote>\n  <ol start=\"3\">\n  <li>Can <code>MiniTest</code> actually test <code>DOM</code> elements such as input text in user input boxes, do button clicks etc?</li>\n  </ol>\n</blockquote>\n\n<p>Yes and no. <code>MiniTest</code> itself does not include a document parser or a DOM simulator. If you add those - yes.</p>\n\n<blockquote>\n  <ol start=\"4\">\n  <li>Is it actually hitting the application by starting the server internally?</li>\n  </ol>\n</blockquote>\n\n<p>Yes. Integration tests actually use HTTP to perform requests on your app.</p>\n\n<blockquote>\n  <ol start=\"5\">\n  <li>Can <code>MiniTest</code> alone be used to test a <code>Rails</code> application end-to end by running in headless mode?</li>\n  </ol>\n</blockquote>\n\n<p>No, see above.</p>\n\n<blockquote>\n  <ol start=\"6\">\n  <li>Can <code>MiniTest</code> alone be used to test a <code>Rails</code> application end-to end by launching a browser through selenium? I know Capybara can do this.</li>\n  </ol>\n</blockquote>\n\n<p>No, see above.</p>\n\n<blockquote>\n  <ol start=\"7\">\n  <li>I guess this test is running against <code>localhost</code>. How can I make this test point to a different host such <code>www.dev-server.com</code>?</li>\n  </ol>\n</blockquote>\n\n<p>Is it possible; yes. Good idea? Not so much.</p>\n\n<p>The reason you don't want to do this is:</p>\n\n<ul>\n<li>Its sloooow.</li>\n<li>You can't properly reset the state between tests without some very indecent exposure of your dev server.</li>\n</ul>\n\n<p>This is basically what you are forced to do when doing javascript tests against a server out of your control. And that scenario is horrible.</p>\n\n<p>What you might be looking for is to setup a CI environment such as Travis where you can run the tests.</p>\n"}], "owner": {"reputation": 4694, "user_id": 2325154, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8edaf24cd3712f7484ebf0edec77ca7c?s=128&d=identicon&r=PG", "display_name": "Nital", "link": "https://stackoverflow.com/users/2325154/nital"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 414, "favorite_count": 0, "accepted_answer_id": 35901743, "answer_count": 1, "score": 1, "last_activity_date": 1457556828, "creation_date": 1457551161, "last_edit_date": 1457556828, "question_id": 35900687, "link": "https://stackoverflow.com/questions/35900687/can-minitest-alone-be-used-to-test-a-rails-application", "title": "Can minitest alone be used to test a rails application?", "body": "<p>I am new to Ruby &amp; Rails and basically come from Java background hence I apologize in advance for my limited knowledge of RoR.</p>\n\n<p>Ruby version = 2.1</p>\n\n<p>Rails version = 4.2</p>\n\n<p>While working on an existing Rails 4 application I came across the following test written in one of the test files. This test is trying to test the login page of the application but I am puzzled by following questions:</p>\n\n<ol>\n<li>Is MiniTest used for just unit testing or integration testing or both?</li>\n<li>Is this test actually a MiniTest test or is it just importing existing default Ruby test framework in the helper file and not actually using any of the MiniTest features?</li>\n<li>Can MiniTest actually test DOM elements such as input text in user input boxes, do button clicks etc?</li>\n<li>Is it actually hitting the application by starting the server internally?</li>\n<li>Can MiniTest alone be used to test a Rails application end-to end by running in headless mode? </li>\n<li>Can MiniTest alone be used to test a Rails application end-to end by launching a browser through selenium? I know Capybara can do this.</li>\n<li>I guess this test is running against <code>localhost</code>. How can I make this test point to a different host such <code>www.dev-server.com</code>? </li>\n</ol>\n\n<p><strong>login_test.rb</strong></p>\n\n<pre><code>require 'integration_test_helper'\nclass LoginTest &lt; ActionDispatch::IntegrationTest\n\n  setup do\n    @user = users(:admin)\n  end\n\n  test \"login page is displayed on root path\" do\n    delete '/signout'\n    get root_path\n    assert redirect?\n    assert_redirected_to '/signin'\n    follow_redirect!\n    assert_template :new\n    assert_template %r{\\Adevise/sessions/new\\Z}\n    assert_select \"a[href=?]\", users_path, count: 0\n    assert_select \"input[id=?]\", 'login-email', count: 1\n    assert_select \"input[id=?]\", 'login-password', count: 1\n    assert_select \"button[id=?]\", 'login', count: 1\n  end\n\nend\n</code></pre>\n\n<p><strong>integration_test_helper.rb</strong></p>\n\n<pre><code>ENV['RAILS_ENV'] ||= 'test'\nrequire File.expand_path('../../config/environment', __FILE__)\nrequire 'rails/test_help'\nrequire \"minitest/reporters\"\nMinitest::Reporters.use! [Minitest::Reporters::JUnitReporter.new, Minitest::Reporters::SpecReporter.new(:color =&gt; true)]\n\nclass ActiveSupport::TestCase\n  # Setup all fixtures in test/fixtures/*.yml for all tests in alphabetical order.\n  fixtures :all\n\n ....\n\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1457551287, "post_id": 35900535, "comment_id": 59461864, "body": "Conceptually you should not place tests in a module (<i>namespace</i>) since tests live outside your application and test its behaviors from the outside. You also don&#39;t have to worry about collisions with RSpec since it uses a functional DSL instead of creating test classes."}, {"owner": {"reputation": 1178, "user_id": 2649707, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/10a73731821817bdab1abf9958e6787d?s=128&d=identicon&r=PG", "display_name": "Bruno Casali", "link": "https://stackoverflow.com/users/2649707/bruno-casali"}, "edited": false, "score": 0, "creation_date": 1457553007, "post_id": 35900535, "comment_id": 59462898, "body": "We refactored all of your specs to it after we started using the rubocop! :D I&#39;ll try your answer!  Thanks!"}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 5, "last_activity_date": 1457551115, "last_edit_date": 1457551115, "creation_date": 1457550690, "answer_id": 35900535, "question_id": 35900046, "link": "https://stackoverflow.com/questions/35900046/when-run-rspec-i-get-uninitialized-constant-namenameengine/35900535#35900535", "title": "When run RSpec I get uninitialized constant Name::Name::Engine", "body": "<p>Use the fully qualified name in your spec instead of placing your specs in a module.</p>\n\n<p>Do:</p>\n\n<pre><code>RSpec.describe Foo::Bar::Baz do\n\nend\n</code></pre>\n\n<p>Don't:</p>\n\n<pre><code>module Foo\n  module Bar\n    RSpec.describe Baz do\n\n    end\n  end \nend\n</code></pre>\n\n<p>Besides the fact that writing specs at 3 levels of indentation is ugly as heck you're asking for a kick in the privates by changing the context as it will try to resolve everything from the <code>Foo</code> namespace so that you have to use <code>::SomeOtherModule</code> to refer to everything else.</p>\n"}], "owner": {"reputation": 1178, "user_id": 2649707, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/10a73731821817bdab1abf9958e6787d?s=128&d=identicon&r=PG", "display_name": "Bruno Casali", "link": "https://stackoverflow.com/users/2649707/bruno-casali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 471, "favorite_count": 0, "accepted_answer_id": 35900535, "answer_count": 1, "score": 1, "last_activity_date": 1457551115, "creation_date": 1457549130, "last_edit_date": 1457549512, "question_id": 35900046, "link": "https://stackoverflow.com/questions/35900046/when-run-rspec-i-get-uninitialized-constant-namenameengine", "title": "When run RSpec I get uninitialized constant Name::Name::Engine", "body": "<p>I constantly get this error when try to run my specs from root path:</p>\n\n<pre><code>Failure/Error: routes { MyEngineName::Engine.routes }\n\nNameError:\n     uninitialized constant MyEngineName::MyEngineName::Engine\n</code></pre>\n\n<p>And either when run server from spec/dummy and goes to localhost:3000 the same happens but with the <code>MyEngineName::MyEngineName::ApplicationController</code></p>\n\n<p>In tests I need to declare where routes are from:</p>\n\n<pre><code>require 'rails_helper'\n\nmodule MyEngineName\n  module Companies\n    RSpec.describe UsersController, type: :controller do\n      routes { MyEngineName::Engine.routes }\n      render_views\n\n      # ommited... \n    end\n  end\nend\n</code></pre>\n\n<p>And my engine file is:</p>\n\n<pre><code># my_engine_name/engine.rb\nmodule MyEngineName\n  class Engine &lt; ::Rails::Engine\n    isolate_namespace MyEngineName\n    engine_name 'my_engine_name'\n\n    # ommited...\n  end\nend\n</code></pre>\n\n<p>what can I do?</p>\n\n<p>Thanks in advice! :)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "methods", "model"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1457548685, "post_id": 35899773, "comment_id": 59460192, "body": "Are you trying to tackle the <code>committed_description</code> part?"}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1457551238, "post_id": 35899968, "comment_id": 59461835, "body": "It&#39;s not just speed, but simplicity. Having a compact, canonical way of storing data like this helps with development and debugging. I&#39;ve fixed up the example here due to <code>sort</code> issues. Forcing <code>DAYS &amp;</code> will put them in the correct order every time and has the additional benefit of discarding any non-day data."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1457552052, "post_id": 35899968, "comment_id": 59462330, "body": "Thank you sir! I will make the adjust at some point. I feel like for every problem I solve three more pop up lol. I guess that&#39;s the life of a programmer."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 2, "last_activity_date": 1457551249, "last_edit_date": 1457551249, "creation_date": 1457548916, "answer_id": 35899968, "question_id": 35899773, "link": "https://stackoverflow.com/questions/35899773/conditional-method-for-sorting-array-into-description-of-array/35899968#35899968", "title": "conditional method for sorting array into description of array?", "body": "<p>If you want to figure out what a good label for this is, write a method specifically for that:</p>\n\n<pre><code>WEEKDAYS = %w[ mon tue wed thu fri ]\nWEEKENDS = %w[ sat sun ]\nDAYS = WEEKDAYS + WEEKENDS\n\ndef committed_description\n  case DAYS &amp; self.committed\n  when DAYS\n    'everyday'\n  when WEEKDAYS\n    'weekdays'\n  when WEEKENDS\n    'weekends'\n  else\n    self.commited.join(', ')\n  end\nend\n</code></pre>\n\n<p>Ruby can straight up compare array vs. array to see if they're equal and branch into the appropriate section. This is quite handy.</p>\n\n<p>It's worth noting that using an array for this is extremely heavy handed. You might want to use a shorter notation, assigning a unique letter for each day and treating that as a description. For example: <code>MTWHFSU</code> is a common mapping, <code>H</code> for Thursday and <code>U</code> for Sunday being the anomalies.</p>\n\n<p>Serialized columns are brutally slow to work with compared to their simple string counterparts. Instead of serializing/unserializing on each read, you just fetch a string, and instead of comparing array vs. array you compare string vs. string. It's way more efficient. As a bonus these strings can be neatly indexed.</p>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 35899968, "answer_count": 1, "score": 1, "last_activity_date": 1457551249, "creation_date": 1457548357, "last_edit_date": 1457548753, "question_id": 35899773, "link": "https://stackoverflow.com/questions/35899773/conditional-method-for-sorting-array-into-description-of-array", "title": "conditional method for sorting array into description of array?", "body": "<p>How can I make the current view found below look like the view with your help?</p>\n\n<p>current view:</p>\n\n<pre><code>&lt;%= challenge.action %&gt;\n&lt;% @challenge.committed.map { |d| d.titleize[0,3] }.each do |title| %&gt;\n  &lt;%= title %&gt; \n&lt;% end %&gt;\n\n# EXAMPLES\n# Run    Sun, Mon, Tue, Wed, Thu, Fri, Sat\n# Meditate    Sun, Sat\n# Do a Random Act of Kindness    Mon, Tue, Wed, Thu, Fri\n</code></pre>\n\n<p>view with your help:</p>\n\n<pre><code>&lt;%= @challenge.action %&gt; &lt;%= @challenge.committed_description %&gt; # Trying to make committed_description work\n\n# EXAMPLES\n# Run everyday\n# Meditate weekends\n# Do a Random Act of Kindness weekdays\n</code></pre>\n\n<p>overall idea for model method (pseudo-code):</p>\n\n<pre><code>def committed_description\n  if [\"sun\", \"mon\", \"tue\", \"wed\", \"thu\", \"fri\", \"sat\"]\n   \"everyday\"\n  elsif [\"mon\", \"tue\", \"wed\", \"thu\", \"fri\"]\n    \"weekdays\"\n  elsif [\"sun\", \"sat\"]\n    \"weekends\" \nend\n</code></pre>\n\n<p>challenge.rb:</p>\n\n<pre><code>class Challenge &lt; ActiveRecord::Base\n  serialize :committed, Array\n\n  def committed_wdays\n    committed.map do |day|    \n      Date::ABBR_DAYNAMES.index(day.titleize)\n    end\n  end\nend\n</code></pre>\n\n<p>db:</p>\n\n<pre><code>t.text     \"committed\",       default: \"---\\n- sun\\n- mon\\n- tue\\n- wed\\n- thu\\n- fri\\n- sat\\n\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "twitter", "twitter-gem"], "comments": [{"owner": {"reputation": 1207, "user_id": 4145941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8mHhb.jpg?s=128&g=1", "display_name": "Mohammad", "link": "https://stackoverflow.com/users/4145941/mohammad"}, "edited": false, "score": 0, "creation_date": 1457549092, "post_id": 35899712, "comment_id": 59460436, "body": "which gem are you using? have you checked the docs?"}], "answers": [{"tags": [], "owner": {"reputation": 22836, "user_id": 152786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/581hP.jpg?s=128&g=1", "display_name": "smathy", "link": "https://stackoverflow.com/users/152786/smathy"}, "is_accepted": true, "score": 2, "last_activity_date": 1457551245, "last_edit_date": 1457551245, "creation_date": 1457550539, "answer_id": 35900478, "question_id": 35899712, "link": "https://stackoverflow.com/questions/35899712/delete-tweet-with-twitter-gem/35900478#35900478", "title": "Delete Tweet with Twitter Gem", "body": "<p><a href=\"http://www.rubydoc.info/gems/twitter/Twitter/REST/Tweets#destroy_tweet-instance_method\" rel=\"nofollow\">Documented here</a> is the <code>destroy_tweet</code> (aka: <code>destroy_status</code>) method.</p>\n\n<p>Looks like it should be simply:</p>\n\n<pre><code>client.destroy_tweet 13123123123\n</code></pre>\n"}], "owner": {"reputation": 7073, "user_id": 1279844, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d04dbd9bc38b19a88ae7cc28ed70a0d6?s=128&d=identicon&r=PG", "display_name": "bevanb", "link": "https://stackoverflow.com/users/1279844/bevanb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 515, "favorite_count": 0, "accepted_answer_id": 35900478, "answer_count": 1, "score": 0, "last_activity_date": 1457551245, "creation_date": 1457548200, "question_id": 35899712, "link": "https://stackoverflow.com/questions/35899712/delete-tweet-with-twitter-gem", "title": "Delete Tweet with Twitter Gem", "body": "<p>How do I delete a Tweet given it's ID?</p>\n\n<p>I've tried <code>Twitter.status_destroy(1221312312)</code> to no avail (undefined method)</p>\n\n<p>These also do not work:</p>\n\n<p><code>client.status(13123123123).delete</code>\n<code>client.status(13123123123).destroy</code></p>\n"}, {"tags": ["ruby", "error-handling", "rescue"], "comments": [{"owner": {"reputation": 1104, "user_id": 3938081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41ccf280616912c6edc9aa83f278686c?s=128&d=identicon&r=PG&f=1", "display_name": "dave_slash_null", "link": "https://stackoverflow.com/users/3938081/dave-slash-null"}, "edited": false, "score": 0, "creation_date": 1457549437, "post_id": 35899509, "comment_id": 59460672, "body": "Have you been able to get a backtrace or error message? Ruby will print these things to STDERR automatically when an unrescued exception is raised. If you are running your script from the command line then this output would normally be displayed in the terminal window. Perhaps this is running as a scheduled task so you are not able to see any info because the screen will vanish as soon as the error happens?"}, {"owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "edited": false, "score": 0, "creation_date": 1457614881, "post_id": 35899509, "comment_id": 59492791, "body": "I&#39;m trying similar and I&#39;m finding that I can&#39;t bypass the RSpec expectation.  It raises that exception but doesn&#39;t loop to the next iteration"}], "answers": [{"comments": [{"owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "edited": false, "score": 0, "creation_date": 1457611309, "post_id": 35899989, "comment_id": 59490263, "body": "I&#39;m not getting this. Also newish to Ruby.  The rescue =&gt; e section in particular.  Could you explain that in more detail, as to what =&gt; e means and how we&#39;d log the error and index below please?  Thank you"}, {"owner": {"reputation": 69, "user_id": 6029849, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/qTPSR.jpg?s=128&g=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/6029849/peter"}, "edited": false, "score": 0, "creation_date": 1457632396, "post_id": 35899989, "comment_id": 59505777, "body": "Between three of us and a combination of ideas from the answers above, sorted! Thanks."}, {"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "reply_to_user": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "edited": false, "score": 0, "creation_date": 1457655017, "post_id": 35899989, "comment_id": 59517900, "body": "<code>e</code> is what <code>rescue</code> returns and it&#39;s a ruby object.  if you do <code>puts e</code>, it will show you what the error is @Tom"}], "tags": [], "owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "is_accepted": false, "score": 0, "last_activity_date": 1457548968, "creation_date": 1457548968, "answer_id": 35899989, "question_id": 35899509, "link": "https://stackoverflow.com/questions/35899509/using-rescue-and-ensure-in-the-middle-of-code/35899989#35899989", "title": "Using rescue and ensure in the middle of code", "body": "<p>It doesn't seem like you need to rescue exception here. But what you could do is in your <code>check_ctcd</code> method, raise error if records doesn't match. Then you can rescue from it. In order to know which line it is, in your iteration, you could use <code>#each_with_index</code> and log the index when things go wrong.</p>\n\n<pre><code>(firstrow.to_i-1..lastrow.to_i-1).each_with_index do |row, i|\n\n  @licnum1 = data.at(row).dln\n  @licnum2 = data.at(row+1).dln\n  @nino = data.at(row).nino\n  @postcode = data.at(row).pcode\n  @endor_cd = data.at(row).endor_cd\n  @ct_cd = data.at(row).ct_cd\n\n#Login only required once for each new user-account\nif \n  loginrequired == true\n  logon_to_vdr #def for this is in hooks\n  click_on 'P and D'\n  loginrequired = false\n  end  \n\n#This is the check against the database and is required for every line in the .csv file\n  check_ctcd #def for this is in hooks\nrescue =&gt; e\n  # log the error and index here\n...\n</code></pre>\n\n<p>And you can make your own custom error, and rescue only the certain type so that you don't silently rescue other errors.</p>\n"}, {"tags": [], "owner": {"reputation": 1104, "user_id": 3938081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41ccf280616912c6edc9aa83f278686c?s=128&d=identicon&r=PG&f=1", "display_name": "dave_slash_null", "link": "https://stackoverflow.com/users/3938081/dave-slash-null"}, "is_accepted": true, "score": 1, "last_activity_date": 1457552526, "last_edit_date": 1457552526, "creation_date": 1457552194, "answer_id": 35901009, "question_id": 35899509, "link": "https://stackoverflow.com/questions/35899509/using-rescue-and-ensure-in-the-middle-of-code/35901009#35901009", "title": "Using rescue and ensure in the middle of code", "body": "<p>It seems like you need some error logging since you apparently don't know what type of error you're receiving or where. If this script is standalone you can redirect <code>$stderr</code> to file so that you can read what went wrong.</p>\n\n<pre><code># put this line at the top of your script\n$stderr = File.open(\"/path/to/your/logfile.log\",\"a\")\n</code></pre>\n\n<p>When an error occurs, ruby will automatically write the error message, class, and backtrace to the log file you specify so that you can trace back the line where things are not going as expected. (When you run a script from the command line, normally this information will just get blurted back to the terminal when an error happens.)</p>\n\n<p>For example, on my desktop I created a file log_stderr.rb with the following (line numbers included):</p>\n\n<pre><code>1   $stderr = File.open(\"C:/Users/me/Desktop/my_log.log\",\"w\")\n2\n3   #require a file which will raise an error to see the backtrace\n4   require_relative 'raise_error.rb'\n5\n6   puts \"code that will never be reached\"\n</code></pre>\n\n<p>Also on my desktop I created the file raise_error.rb with the following (to deepen the backtrace for better example output):</p>\n\n<pre><code>1   # call raise to generate an error arbitrarily\n2   # to halt execution and exit the program.\n3   raise RuntimeError, 'the program stopped working!'\n</code></pre>\n\n<p>When I run <code>ruby log_stderr.rb</code> from the command line, my_log.log is created on my desktop with the following:</p>\n\n<pre><code>C:/Users/me/Desktop/raise_error.rb:3:in `&lt;top (required)&gt;': the program stopped working! (RuntimeError)\n    from C:/Users/me/Desktop/log_stderr.rb:4:in `require_relative'\n    from C:/Users/me/Desktop/log_stderr.rb:4:in `&lt;main&gt;'\n</code></pre>\n\n<p>If you are working in a larger environment where your script is being called amidst other scripts then you probably do not want to redirect <code>$stderr</code> because this would affect everything else running in the environment. (<code>$stderr</code> is global as indicated by the <code>$</code> variable prefix.) If this is the case you would want to implement a <code>begin; rescue; end</code> structure and also make your own logfile so that you don't affect <code>$stderr</code>.</p>\n\n<p>Again, since you don't know where the error is happening you want to wrap the whole script with <code>begin; end</code></p>\n\n<pre><code># at the very top of the script, begin watching for weirdness\nbegin\nlogfile = File.open(\"/path/to/your/logfile.log\", \"w\")\n\nrequire 'csv-mapper'\n\n#. . .\n\n# rescue and end at the very bottom to capture any errors that have happened\nrescue =&gt; e\n    # capture details about the error in your logfile\n    logfile.puts \"ERROR:\", e.class, e.message, e.backtrace\n\n    # pass the error along since you don't know what it is\n    # and there may have been a very good reason to stop the program\n    raise e\nend\n</code></pre>\n\n<p>If you find that your error is happening only in the block <code>(firstrow.to_i-1..lastrow.to_i-1).each do |row|</code> you can place the <code>begin; end</code> inside of this block to have access to the local <code>row</code> variable, or else create a top level variable independent of the block and assign it during each iteration of the block to report to your logfile:</p>\n\n<pre><code>begin\nlogfile = File.open(\"/path/to/your/logfile.log\", \"w\")\ncsv_row = \"before csv\"\n#. . .\n\n(firstrow.to_i-1..lastrow.to_i-1).each do |row|\n    csv_row = row\n    #. . .\nend\ncsv_row = \"after csv\"\n\nrescue =&gt; e\n    logfile.puts \"ERROR AT ROW: #{csv_row}\", e.class, e.message, e.backtrace\n    raise e\nend\n</code></pre>\n\n<p>I hope this helps!</p>\n"}], "owner": {"reputation": 69, "user_id": 6029849, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/qTPSR.jpg?s=128&g=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/6029849/peter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "accepted_answer_id": 35901009, "answer_count": 2, "score": 0, "last_activity_date": 1457552526, "creation_date": 1457547512, "question_id": 35899509, "link": "https://stackoverflow.com/questions/35899509/using-rescue-and-ensure-in-the-middle-of-code", "title": "Using rescue and ensure in the middle of code", "body": "<p>Still new to Ruby - I've had a look at some of the answers to seemingly similar questions but, to be honest, I couldn't get my head around them.</p>\n\n<p>I have some code that reads a .csv file. The data is split into groups of 40-50 rows per user record and validates data in the rows against a database accessed via a website.</p>\n\n<p>A login is required for each record, but once that user has logged in each row in the .csv file can be checked until the next user is reached, at which point the user logs out. </p>\n\n<p>All that's working, however, if an error occurs (e.g. a different result on the website than the expected result on the .csv file) the program stops.</p>\n\n<p>I need something that will\na) at tell me which line on the file the error occurred\nb) log the row to be output when it's finished running, and\niii) restart the program from the next line in the .csv file</p>\n\n<p>The code I have so far is below</p>\n\n<p>Thanks in advance,</p>\n\n<p>Peter</p>\n\n<pre><code>require 'csv-mapper'\n\nloginrequired = true\n\nGiven(/^I compare the User Details from rows \"(.*?)\" to \"(.*?)\"$/) do |firstrow, lastrow|\n  data = CsvMapper.import('C:/auto_test_data/User Data csv.csv') do\n    [dln, nino, pcode, endor_cd, ct_cd]\n  end\n\n#Row number changed because Excel starts at 'row 1' and Ruby starts counting at 'row 0'\n(firstrow.to_i-1..lastrow.to_i-1).each do |row|\n\n  @licnum1 = data.at(row).dln\n  @licnum2 = data.at(row+1).dln\n  @nino = data.at(row).nino\n  @postcode = data.at(row).pcode\n  @endor_cd = data.at(row).endor_cd\n  @ct_cd = data.at(row).ct_cd\n\n#Login only required once for each new user-account\n    if \n      loginrequired == true\n      logon_to_vdr #def for this is in hooks\n      click_on 'P and D'\n      loginrequired = false\n      end  \n\n#This is the check against the database and is required for every line in the .csv file\ncheck_ctcd #def for this is in hooks\n\n#Need something in here to log errors and move on to the next line in the .csv file\n\n#Compare the ID for the next record and logout if they're different\n    if @licnum1 == @licnum2 \n        loginrequired = false\n        else\n    loginrequired = true`enter code here`\n    click_on 'Logout'\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "regex", "string"], "comments": [{"owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "edited": false, "score": 2, "creation_date": 1457548501, "post_id": 35899476, "comment_id": 59460067, "body": "<code>\\d</code> is the short form for <code>[0-9]</code>, a digit from 0-9. Many (if not all) regex flavors support the opposite as well, which is <code>\\D</code> - <b>not</b> a number. So, @sawa&#39;s asnwer is correct, see <a href=\"https://regex101.com/r/kX6nR2/1\" rel=\"nofollow noreferrer\">a demo on regex101.com</a>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1457550200, "post_id": 35899476, "comment_id": 59461199, "body": "Asking an anonymous downvoter for an explanation is futile. Two miniscule points: it should be &quot;the index of the first non-numeric character&quot;; and the Ruby convention is use snake-case, not camel-case, for the names of variables and methods (&quot;some_string&quot; rather than &quot;someString&quot;). You don&#39;t have to follow the convention, of course, but 99%+ of Rubiests do."}], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 4, "last_activity_date": 1457547780, "creation_date": 1457547780, "answer_id": 35899587, "question_id": 35899476, "link": "https://stackoverflow.com/questions/35899476/find-the-first-index-of-a-non-numeric-character/35899587#35899587", "title": "Find the first index of a non-numeric character", "body": "<pre><code>someString =~ /\\D/\n# =&gt; 4\n</code></pre>\n\n<p>........</p>\n"}, {"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 0, "last_activity_date": 1457548524, "creation_date": 1457548524, "answer_id": 35899829, "question_id": 35899476, "link": "https://stackoverflow.com/questions/35899476/find-the-first-index-of-a-non-numeric-character/35899829#35899829", "title": "Find the first index of a non-numeric character", "body": "<p>Try:</p>\n\n<pre><code>someString.each_char.with_index { |c,i| puts i if c == someString.scan(/\\D+/)[0] }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 3, "last_activity_date": 1457548539, "creation_date": 1457548539, "answer_id": 35899837, "question_id": 35899476, "link": "https://stackoverflow.com/questions/35899476/find-the-first-index-of-a-non-numeric-character/35899837#35899837", "title": "Find the first index of a non-numeric character", "body": "<p>In addition to sawa's solution: You could also use <a href=\"http://ruby-doc.org/core-2.3.0/String.html#method-i-index\" rel=\"nofollow\"><code>String#index</code></a> when you like your code to be more readable:</p>\n\n<pre><code>string = '1374j03d42s23dc'\nstring.index(/\\D/)\n#=&gt; 4\n</code></pre>\n\n<p><code>/\\D/</code> matches any non-digit (list of <a href=\"http://rubular.com/\" rel=\"nofollow\">common regexp metacharacters</a>)</p>\n"}], "owner": {"reputation": 1232, "user_id": 5277935, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/--NcqcZABxrM/AAAAAAAAAAI/AAAAAAAAAe8/7U38ZDcw2kQ/photo.jpg?sz=128", "display_name": "AMACB", "link": "https://stackoverflow.com/users/5277935/amacb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2124, "favorite_count": 0, "accepted_answer_id": 35899587, "answer_count": 3, "score": 0, "last_activity_date": 1457548539, "creation_date": 1457547423, "question_id": 35899476, "link": "https://stackoverflow.com/questions/35899476/find-the-first-index-of-a-non-numeric-character", "title": "Find the first index of a non-numeric character", "body": "<p>Suppose I have a <code>String</code>:</p>\n\n<pre><code>someString = \"1374j03d42s23dc\"\n</code></pre>\n\n<p>I want to find the first index of a non-numeric character. In this case, that would be <code>4</code>. How can I do this with a <code>regex</code>?</p>\n\n<p>(I'm not very good at <code>regex</code>, so it would be great if the answer could explain what is going on)</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1457555097, "post_id": 35898550, "comment_id": 59464094, "body": "There are multiple ways to serialize data but if you need it usable by other programming languages you want to look at JSON and YAML. It&#39;s up to you which, though I&#39;d recommend JSON if you&#39;re not going to store it to a file on disk and then edit it again. If you&#39;re going to search that field and/or edit individual values, then don&#39;t serialize it as that&#39;ll just slow down your system. Create a subtable that incorporates the fields, and generate the JSON on the fly to/from the form via JavaScript, or simply use the form variables."}], "answers": [{"comments": [{"owner": {"reputation": 205, "user_id": 4925363, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f9677975a7f1508434abccac7b2409ec?s=128&d=identicon&r=PG&f=1", "display_name": "SeattleDucati", "link": "https://stackoverflow.com/users/4925363/seattleducati"}, "edited": false, "score": 0, "creation_date": 1457554426, "post_id": 35899137, "comment_id": 59463720, "body": "This looks like what I&#39;m looking for, but I&#39;m taking your admonition against doing it seriously. If I can avoid this, I will. Thanks!"}, {"owner": {"reputation": 1100, "user_id": 4524789, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/844f22aa3a74fa8145406ea89fb77491?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Collins", "link": "https://stackoverflow.com/users/4524789/jack-collins"}, "reply_to_user": {"reputation": 205, "user_id": 4925363, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f9677975a7f1508434abccac7b2409ec?s=128&d=identicon&r=PG&f=1", "display_name": "SeattleDucati", "link": "https://stackoverflow.com/users/4925363/seattleducati"}, "edited": false, "score": 1, "creation_date": 1457554621, "post_id": 35899137, "comment_id": 59463816, "body": "No problem! I realize the hesitation towards adding a bunch of fields at first, but I have found that over time it is far easier when you don&#39;t have to think about data manipulation like this (and more importantly, don&#39;t have to debug it). Best of luck!"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1457555208, "post_id": 35899137, "comment_id": 59464159, "body": "Separate fields in a sub-table is much more usable and efficient over the long run."}], "tags": [], "owner": {"reputation": 1100, "user_id": 4524789, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/844f22aa3a74fa8145406ea89fb77491?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Collins", "link": "https://stackoverflow.com/users/4524789/jack-collins"}, "is_accepted": true, "score": 1, "last_activity_date": 1457546448, "creation_date": 1457546448, "answer_id": 35899137, "question_id": 35898550, "link": "https://stackoverflow.com/questions/35898550/storing-an-array-hash-in-a-text-field/35899137#35899137", "title": "Storing an array/hash in a text field", "body": "<p>First of all, I <strong>do not</strong> recommend that you pursue this approach unless you have a better reason than \"I'm trying to avoid adding extra fields just to capture the date and current user\". It will be far easier to manage and maintain this data in the future if you add a field for <code>date</code> and a foreign key to <code>user</code>. Your code above should just work if those two fields are present on the <code>product</code> model.</p>\n\n<p>That being said, it is possible to do this. This is one way you could do it. </p>\n\n<pre><code>def update\n  @product = Product.find(params[:id])\n  combined_description = []\n  combined_description.push(params[:description], params[:current_user], params[:date])\n\n  # The next line returns a string representation of the array\n  product_params[:description] = combined_description.to_s\n\n  if @product.update(product_params)\n    redirect_to @product\n  else\n    render 'edit'\n  end\nend \n</code></pre>\n\n<p>Then, when you need to manipulate this data again in the future, you would have to convert the description string back into an array in order to parse out the current_user and date.</p>\n\n<pre><code>def show\n  @product = Product.find(params[:id])\n\n  # next line returns [description, current_user, date]\n  description_array = JSON.parse(@product.description) \nend\n</code></pre>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-to_s\" rel=\"nofollow\">Array#to_s</a> for the <code>to_s</code> method docs.</p>\n\n<p>Again, <strong>I don't recommend that you follow this approach</strong> unless you have a really good reason for doing so. Your life will be far easier if you just add those fields to the product model. </p>\n"}, {"tags": [], "owner": {"reputation": 22836, "user_id": 152786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/581hP.jpg?s=128&g=1", "display_name": "smathy", "link": "https://stackoverflow.com/users/152786/smathy"}, "is_accepted": false, "score": 0, "last_activity_date": 1457546550, "creation_date": 1457546550, "answer_id": 35899175, "question_id": 35898550, "link": "https://stackoverflow.com/questions/35898550/storing-an-array-hash-in-a-text-field/35899175#35899175", "title": "Storing an array/hash in a text field", "body": "<p>It'd be clumsy to try to put this in your view, and your model has no knowledge of <code>current_user</code> so you'll have to have some code for this in your controller.</p>\n\n<p>I'd recommend actually having a virtual attribute for the display/editing of your actual description text, so in your model:</p>\n\n<pre><code>serialize :description\ndef desc\n  self.description? ? self.description[:text] : \"\"\nend\n</code></pre>\n\n<p>Then in your view you'll have fields for that <code>desc</code> attribute:</p>\n\n<pre><code>= f.label :desc\n= f.text_field :desc\n</code></pre>\n\n<p>So then in your controller you need to take that <code>:desc</code> out of the params and insert a <code>:description</code> instead:</p>\n\n<pre><code>def product_params\n  p = params.require(:product).permit(:name, :price, :desc)\n  p.merge description: { text: p.delete(:desc), user: current_user, date: Date.today }\nend\n</code></pre>\n"}], "owner": {"reputation": 205, "user_id": 4925363, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f9677975a7f1508434abccac7b2409ec?s=128&d=identicon&r=PG&f=1", "display_name": "SeattleDucati", "link": "https://stackoverflow.com/users/4925363/seattleducati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 926, "favorite_count": 0, "accepted_answer_id": 35899137, "answer_count": 2, "score": 1, "last_activity_date": 1457546550, "creation_date": 1457544585, "question_id": 35898550, "link": "https://stackoverflow.com/questions/35898550/storing-an-array-hash-in-a-text-field", "title": "Storing an array/hash in a text field", "body": "<p>I would like to store an array or hash in a string field. This field holds instructions for how to use a particular resource. When a person edits the field, I want to capture the date and current user, and store them along with the text the person input. I'm trying to avoid adding extra fields just to capture the date and current user. I would like to simply add one 4000 character text field, and store it there.</p>\n\n<p>It looks like I need to serialize the field in the model. But I'm struggling with how to save the date,current user, and the text in a single field as an array, or a hash if that makes more sense. I created a simple CRUD app to model what I'm trying to do, based on a single model called 'product'. Below is the edit page, and below that is the update function in the controller. How could I capture the current date and user, and store it in the 'description' field? Would this happen in the edit view itself, or should this happen in the update method in the controller?</p>\n\n<pre><code>edit.html.erb\n&lt;%= form_for @product do |f| %&gt;\n&lt;p&gt;\n&lt;%= f.label :name %&gt;&lt;br&gt;\n&lt;%= f.text_field :name %&gt;\n&lt;/p&gt;\n&lt;p&gt;\n&lt;%= f.label :description %&gt;&lt;br&gt;\n&lt;%= f.text_area :description %&gt;\n&lt;/p&gt;\n&lt;p&gt;\n&lt;%= f.label :price %&gt;&lt;br&gt;\n&lt;%= f.text_area :price %&gt;\n&lt;/p&gt;\n&lt;p&gt;\n&lt;%= f.submit %&gt;\n&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>The model</p>\n\n<pre><code>class Product &lt; ActiveRecord::Base\n#validates  :name, :price , presence: true\nserialize :description\nend\n</code></pre>\n\n<p>The update method</p>\n\n<pre><code>def update\n@product = Product.find(params[:id])\nif @product.update(product_params)\n  redirect_to @product\nelse\n  render 'edit'\nend\nend  \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 18224, "user_id": 406987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8865b16d4f3493cfae865af2b3247fd3?s=128&d=identicon&r=PG", "display_name": "Doon", "link": "https://stackoverflow.com/users/406987/doon"}, "edited": false, "score": 0, "creation_date": 1457545192, "post_id": 35898331, "comment_id": 59457966, "body": "look into serialization and see if that does what you want /need"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 18224, "user_id": 406987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8865b16d4f3493cfae865af2b3247fd3?s=128&d=identicon&r=PG", "display_name": "Doon", "link": "https://stackoverflow.com/users/406987/doon"}, "edited": false, "score": 0, "creation_date": 1457545335, "post_id": 35898331, "comment_id": 59458055, "body": "@Doon, he has already specified that he is using a <code>hstore</code> column with is a key/val type column. <code>serialization</code> is not relevant."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1457545363, "post_id": 35898331, "comment_id": 59458079, "body": "Why not use JSON and Postgres? Those two fit together seamlessly. HSTORE was the only option prior to Postgres 9.3, but the new JSON store is significantly better."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1457545500, "post_id": 35898331, "comment_id": 59458170, "body": "It&#39;s not very clear what you are trying to do. Do you want to take a hash and fill it in with default options? Thats easy - <code>hash.merge(defaults_hash)</code>. If you are looking to do that on the database level however I&#39;m not sure if that is even possible."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1457545690, "post_id": 35898331, "comment_id": 59458286, "body": "Hmm, appently you can do that with JSON columns: <a href=\"http://stackoverflow.com/questions/26518078/setting-default-value-for-a-json-column\" title=\"setting default value for a json column\">stackoverflow.com/questions/26518078/&hellip;</a>"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1457545777, "post_id": 35898331, "comment_id": 59458359, "body": "Can you please edit the question?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1457546146, "post_id": 35898331, "comment_id": 59458610, "body": "However this sounds like a very overcomplicated solution to an invented problem. If you are creating a nested record you don&#39;t need to send all the params of the parent record. You simply need an ID. You might want to take a step back and consider if this is an XY problem."}, {"owner": {"reputation": 3, "user_id": 6040781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30dd3c2ff671f1119ce8561e9d75134a?s=128&d=identicon&r=PG&f=1", "display_name": "Zain W", "link": "https://stackoverflow.com/users/6040781/zain-w"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1457546441, "post_id": 35898331, "comment_id": 59458795, "body": "@max I understand what you mean but the issue is that I am getting all my info from an external source. So my review object contains a hash of all the info plus some other information I use as variables"}, {"owner": {"reputation": 3, "user_id": 6040781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30dd3c2ff671f1119ce8561e9d75134a?s=128&d=identicon&r=PG&f=1", "display_name": "Zain W", "link": "https://stackoverflow.com/users/6040781/zain-w"}, "edited": false, "score": 0, "creation_date": 1457546874, "post_id": 35898331, "comment_id": 59459036, "body": "btw someone edited my question which is misleading I think. is the template concept hard to grasp? I checked the dictionary and it is what I am asking for, I think I am correctly explaining my question, but I guess I am not"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1457550039, "post_id": 35898331, "comment_id": 59461081, "body": "Can you edit the question and try to make it less abstract maybe? Show what the data you are getting looks like and how you want to use it. Code, even metacode usually helps."}, {"owner": {"reputation": 3, "user_id": 6040781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30dd3c2ff671f1119ce8561e9d75134a?s=128&d=identicon&r=PG&f=1", "display_name": "Zain W", "link": "https://stackoverflow.com/users/6040781/zain-w"}, "edited": false, "score": 0, "creation_date": 1457550424, "post_id": 35898331, "comment_id": 59461330, "body": "Yea i have to be careful as legally I cant show the info. I&#39;ll rewrite the question"}], "owner": {"reputation": 3, "user_id": 6040781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30dd3c2ff671f1119ce8561e9d75134a?s=128&d=identicon&r=PG&f=1", "display_name": "Zain W", "link": "https://stackoverflow.com/users/6040781/zain-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 249, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1457551792, "creation_date": 1457544033, "last_edit_date": 1457551792, "question_id": 35898331, "link": "https://stackoverflow.com/questions/35898331/save-a-hash-into-an-hstore-column-in-rails", "title": "Save a hash into an HSTORE column in Rails", "body": "<p>I have a rails JOB that Loops through my Review objects and is supposed to post with it's specific params pertaining to the product that is being reviewed. what I want is the below hash to exist in a non reviews object. Where it says review.(whatever) I want that as actual ruby code and not the value that comes from running that. Later when I put it through the submission job. I want that has for the HTTP post like such. (myurl where the url would go) </p>\n\n<pre><code>Net::HTTP.post_form(URI.parse('myurl'), survey.product.submithash)\n</code></pre>\n\n<p>and instead of survey.product.submithash it would call this hash.</p>\n\n<pre><code>{'ApiVersion'=&gt;'5.4','Action'=&gt;'preview','Rating'=&gt;review.QandA[\"Overall Rating\"], 'ReviewText'=&gt;review.QandA[\"Review\"],'Title'=&gt;review.QandA[\"Headline\"],'UserNickname'=&gt;review.QandA[\"Nickname\"],'useremail'=&gt;review.QandA[\"Your Email\"],'UserLocation'=&gt; review.user.location, 'isRecommended'=&gt;review.QandA[\"Would you recommend this product?\"]}\n</code></pre>\n\n<p>How do I go about doing this?\nI am on rails 4.2.5.1\nruby 2.2.X\nand I am using postgres 9.4.5 (if that matters)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activemodel"], "comments": [{"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1457544143, "post_id": 35898214, "comment_id": 59457247, "body": "Can you elaborate your question a little more? If it is what I understood, maybe polymorphic associations can help: <a href=\"http://guides.rubyonrails.org/association_basics.html#polymorphic-associations\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>"}, {"owner": {"reputation": 1137, "user_id": 3657027, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9055a18fa1995864d1ce9f718b1a2418?s=128&d=identicon&r=PG&f=1", "display_name": "DreamWalker", "link": "https://stackoverflow.com/users/3657027/dreamwalker"}, "reply_to_user": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1457544395, "post_id": 35898214, "comment_id": 59457419, "body": "There are several kinds of models (pictures in my case), each of them can have several likes and comments. I should prevent DRY somehow and also make each model having it&#39;s own likes and comments."}], "answers": [{"comments": [{"owner": {"reputation": 1137, "user_id": 3657027, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9055a18fa1995864d1ce9f718b1a2418?s=128&d=identicon&r=PG&f=1", "display_name": "DreamWalker", "link": "https://stackoverflow.com/users/3657027/dreamwalker"}, "edited": false, "score": 0, "creation_date": 1457549324, "post_id": 35898485, "comment_id": 59460594, "body": "Why do you declare <code>likes</code> as standalone model?"}, {"owner": {"reputation": 1311, "user_id": 3228012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61d46264687a98d404fd749f658d92fc?s=128&d=identicon&r=PG", "display_name": "Caillou", "link": "https://stackoverflow.com/users/3228012/caillou"}, "reply_to_user": {"reputation": 1137, "user_id": 3657027, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9055a18fa1995864d1ce9f718b1a2418?s=128&d=identicon&r=PG&f=1", "display_name": "DreamWalker", "link": "https://stackoverflow.com/users/3657027/dreamwalker"}, "edited": false, "score": 0, "creation_date": 1457596828, "post_id": 35898485, "comment_id": 59480454, "body": "Because you&#39;ll need to query a message&#39;s likes, or a person&#39;s likes. Don&#39;t you ?"}, {"owner": {"reputation": 1137, "user_id": 3657027, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9055a18fa1995864d1ce9f718b1a2418?s=128&d=identicon&r=PG&f=1", "display_name": "DreamWalker", "link": "https://stackoverflow.com/users/3657027/dreamwalker"}, "edited": false, "score": 0, "creation_date": 1457599182, "post_id": 35898485, "comment_id": 59481723, "body": "Actually what I need are Foos, Bars, Bazes and Quxes with likes and comments."}, {"owner": {"reputation": 1311, "user_id": 3228012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61d46264687a98d404fd749f658d92fc?s=128&d=identicon&r=PG", "display_name": "Caillou", "link": "https://stackoverflow.com/users/3228012/caillou"}, "reply_to_user": {"reputation": 1137, "user_id": 3657027, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9055a18fa1995864d1ce9f718b1a2418?s=128&d=identicon&r=PG&f=1", "display_name": "DreamWalker", "link": "https://stackoverflow.com/users/3657027/dreamwalker"}, "edited": false, "score": 0, "creation_date": 1457601718, "post_id": 35898485, "comment_id": 59483439, "body": "Just create them in the Category model : <code>foo = Category.create(name: &quot;Foo&quot;)</code> creates a row in the categories table. Then you can create a Picture for this Category : <code>pic = Picture.create(image: mon_image, category: foo)</code> and a like for this Picture : <code>Like.create(picture: pic, user: current_user)</code>"}, {"owner": {"reputation": 1311, "user_id": 3228012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61d46264687a98d404fd749f658d92fc?s=128&d=identicon&r=PG", "display_name": "Caillou", "link": "https://stackoverflow.com/users/3228012/caillou"}, "reply_to_user": {"reputation": 1137, "user_id": 3657027, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9055a18fa1995864d1ce9f718b1a2418?s=128&d=identicon&r=PG&f=1", "display_name": "DreamWalker", "link": "https://stackoverflow.com/users/3657027/dreamwalker"}, "edited": false, "score": 0, "creation_date": 1457601800, "post_id": 35898485, "comment_id": 59483485, "body": "You categories are datas in your database. They are instances of a Category model.  If you absolutely need to have different behaviours for each category, you can have a different model for each category AND still have them as instances of the same Category Model with the &quot;Single Table Inheritance&quot; principle : <a href=\"http://eewang.github.io/blog/2013/03/12/how-and-when-to-use-single-table-inheritance-in-rails/\" rel=\"nofollow noreferrer\">eewang.github.io/blog/2013/03/12/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1311, "user_id": 3228012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61d46264687a98d404fd749f658d92fc?s=128&d=identicon&r=PG", "display_name": "Caillou", "link": "https://stackoverflow.com/users/3228012/caillou"}, "is_accepted": true, "score": 0, "last_activity_date": 1457544731, "last_edit_date": 1457544731, "creation_date": 1457544405, "answer_id": 35898485, "question_id": 35898214, "link": "https://stackoverflow.com/questions/35898214/activemodel-proper-relation-for-a-different-type-of-the-resource/35898485#35898485", "title": "ActiveModel: proper relation for a different type of the resource", "body": "<p>Here's what I imagined reading your question (I've decided that your pictures were created by users, because your model looks a lot like a social network):</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :pictures\n  has_many :comments\n  has_one :like\nend\n\nclass Picture &lt; ActiveRecord::Base\n  belongs_to :user\n  belongs_to :category\n  has_many :likes\n  has_many :comments\nend\n\nclass Category &lt; ActiveRecord::Base\n  has_many :pictures\nend\n\nclass Comment &lt; ActiveRecord::Base\n   belongs_to :user\n   belongs_to :picture\nend\n\nclass Like &lt; ActiveRecord::Base\n   belongs_to :user\n   belongs_to :picture\nend\n</code></pre>\n\n<p>Categories are rows of the <code>categories</code> Table. Instead of making one Model per category, you should have one model <code>Category</code> for all of them, with attributes like <code>name</code>, <code>color</code> or whatever you want.</p>\n"}], "owner": {"reputation": 1137, "user_id": 3657027, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9055a18fa1995864d1ce9f718b1a2418?s=128&d=identicon&r=PG&f=1", "display_name": "DreamWalker", "link": "https://stackoverflow.com/users/3657027/dreamwalker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 35898485, "answer_count": 1, "score": 0, "last_activity_date": 1457544731, "creation_date": 1457543669, "question_id": 35898214, "link": "https://stackoverflow.com/questions/35898214/activemodel-proper-relation-for-a-different-type-of-the-resource", "title": "ActiveModel: proper relation for a different type of the resource", "body": "<p>I'm trying to determine the proper ActiveModel realtionship for the following situation: there are pictures and there are different categories of them: foo, bar, baz and qux. A User can set one like and several comments per the picture. \nI started with a <code>Catregory</code> and a <code>Foo</code> models. The simpliest approach could be - creatation of <code>likes</code> and <code>comments</code> properties for each of the Foo, Bar, Baz and Qux models. But I feel it's a silly approach... There might be a better one.\nWhat is the best kind of realationship can be chosen for such a case?</p>\n"}, {"tags": ["ruby", "nokogiri"], "comments": [{"owner": {"reputation": 2060, "user_id": 1438462, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/773d599322a9eba7afa6a6fa49209d8f?s=128&d=identicon&r=PG", "display_name": "akz92", "link": "https://stackoverflow.com/users/1438462/akz92"}, "edited": false, "score": 0, "creation_date": 1457542641, "post_id": 35897676, "comment_id": 59456144, "body": "Can you post the complete error message? It raises No Method Error for <code>destination</code> or for <code>at_css</code>?"}, {"owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "edited": false, "score": 0, "creation_date": 1457542763, "post_id": 35897676, "comment_id": 59456235, "body": "updated the question"}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1457542810, "post_id": 35897890, "comment_id": 59456273, "body": "How this answers the [well, not clearly stated] question?"}, {"owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "edited": false, "score": 0, "creation_date": 1457542979, "post_id": 35897890, "comment_id": 59456407, "body": "Yea tried that.. But <code>include</code> wants a module, while <code>nokogiri</code> is a gem.. hmm do I put <code>nokogiri</code> in its own module? Seems hacky.. but what do I know?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1457544089, "post_id": 35897890, "comment_id": 59457209, "body": "I took the downvote back, because the stuff you have posted after my comment is related to the question."}, {"owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "edited": false, "score": 0, "creation_date": 1457544100, "post_id": 35897890, "comment_id": 59457219, "body": "@max that was it!!! I was doing this <code>include &quot;nokogiri&quot;</code> instead of this <code>include Nokogiri</code> that was my problem.. thanks for pushing me in the right direction!"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1457544225, "post_id": 35897890, "comment_id": 59457298, "body": "&quot; you\u2019d remove the misleading intro about includes and requires, which has in fact nothing to do with the question at all.&quot; @mudasobwa - read the OP&#39;s question. He is clearly using <code>require</code> believing that it will somehow bestow his class with the magic of nokogiri. So yes it is relevant."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1457544305, "post_id": 35897890, "comment_id": 59457351, "body": "OK, OK, sorry. You somehow gave a hint to the proper direction (I do not follow, especially taking into account that <code>includes A</code> in your code throws a parser error.) Anyway."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": -1, "last_activity_date": 1457573474, "last_edit_date": 1457573474, "creation_date": 1457542771, "answer_id": 35897890, "question_id": 35897676, "link": "https://stackoverflow.com/questions/35897676/instance-method-not-able-to-act-on-instance-variable/35897890#35897890", "title": "Instance method not able to act on instance variable", "body": "<p>You are confusing <code>require</code> and <code>include</code>. </p>\n\n<p><code>require</code> loads a file or a gem. </p>\n\n<p><code>include</code> includes the methods of another object.</p>\n\n<p><code>a.rb</code>:</p>\n\n<pre><code>module A\n  def hello\n    \"hello world\"\n  end\nend\n</code></pre>\n\n<p><code>b.rb</code>:</p>\n\n<pre><code>require 'a'\nclass B\n  include A\nend\n\nputs B.new.hello # hello world\n</code></pre>\n\n<p>However, you really need to rethink what you are trying to do. You can't include a class - you extend classes. And the object you are looking for is the class <code>Nokogiri::HTML::Document</code>.</p>\n\n<p>If you are trying to build a document crawler you can use the delegator pattern:</p>\n\n<pre><code>require 'nokogiri'\n\nclass Requester &lt; Delegator\n  def initialize(body)\n    super \n    @body = body\n    @doc = Nokogiri::HTML(body)\n  end\n\n  def __getobj__\n    @doc\n  end\nend\n</code></pre>\n\n<p>Or you would create a subclass of <code>Nokogiri::HTML::Document</code>.</p>\n\n<ul>\n<li><a href=\"http://www.nokogiri.org/tutorials/searching_a_xml_html_document.html\" rel=\"nofollow\">http://www.nokogiri.org/tutorials/searching_a_xml_html_document.html</a></li>\n<li><a href=\"http://ruby-doc.org/stdlib-2.2.1/libdoc/delegate/rdoc/Delegator.html\" rel=\"nofollow\">http://ruby-doc.org/stdlib-2.2.1/libdoc/delegate/rdoc/Delegator.html</a></li>\n</ul>\n"}], "owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 35897890, "answer_count": 1, "score": -1, "last_activity_date": 1457573474, "creation_date": 1457542267, "last_edit_date": 1457557527, "question_id": 35897676, "link": "https://stackoverflow.com/questions/35897676/instance-method-not-able-to-act-on-instance-variable", "title": "Instance method not able to act on instance variable", "body": "<p>Even though I required <code>Nokogiri</code> and initialized the variable, my method does not have access to the Nokogiri methods. I want to do this:</p>\n\n<pre><code>class Requester\n\nrequire 'nokogiri'\n\n  def initialize(body)\n    @body = body\n  end\n\n  def destination\n    @body.at_css('destination')\n  end\nend\n</code></pre>\n\n<p>and then I pass <code>body</code>, which is a <code>Nokogiri</code> document. </p>\n\n<pre><code>mess = Requester.new(body)\n</code></pre>\n\n<p>When I do this I get a \"No Method Error\":</p>\n\n<pre><code>mess.destination\n</code></pre>\n\n<p>I don't understand. I thought my class would have all the Nokogiri methods if I <code>require</code> it.</p>\n\n<p>The full error is on <code>at_css</code> and looks like:</p>\n\n<pre><code>NoMethodError (undefined method `at_css' for #&lt;Requester:0x007f685d971478&gt;\n</code></pre>\n"}, {"tags": ["ruby", "inheritance", "class-instance-variables"], "answers": [{"comments": [{"owner": {"reputation": 1207, "user_id": 4145941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8mHhb.jpg?s=128&g=1", "display_name": "Mohammad", "link": "https://stackoverflow.com/users/4145941/mohammad"}, "edited": false, "score": 0, "creation_date": 1457542808, "post_id": 35897577, "comment_id": 59456271, "body": "is the <code>singleton_class.send</code> really needed here?"}, {"owner": {"reputation": 6531, "user_id": 1614607, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/j5OdR.jpg?s=128&g=1", "display_name": "Jacob Brown", "link": "https://stackoverflow.com/users/1614607/jacob-brown"}, "reply_to_user": {"reputation": 1207, "user_id": 4145941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8mHhb.jpg?s=128&g=1", "display_name": "Mohammad", "link": "https://stackoverflow.com/users/4145941/mohammad"}, "edited": false, "score": 1, "creation_date": 1457544838, "post_id": 35897577, "comment_id": 59457751, "body": "It&#39;s just an alternative to opening the <code>singleton_class</code> as in the question example. I would prefer it e.g. in this case, when I&#39;m only doing one call in that context, but I think it&#39;s a matter of personal preference. The <code>send</code> is required because <code>attr_writer</code> is a private method."}, {"owner": {"reputation": 3352, "user_id": 5152338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QbPE.png?s=128&g=1", "display_name": "jdno", "link": "https://stackoverflow.com/users/5152338/jdno"}, "edited": false, "score": 0, "creation_date": 1457686591, "post_id": 35897577, "comment_id": 59528395, "body": "Thanks @kardeiz! That works and was way too easy. Feels like my Ruby is getting a little rusty."}], "tags": [], "owner": {"reputation": 6531, "user_id": 1614607, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/j5OdR.jpg?s=128&g=1", "display_name": "Jacob Brown", "link": "https://stackoverflow.com/users/1614607/jacob-brown"}, "is_accepted": true, "score": 2, "last_activity_date": 1457541934, "creation_date": 1457541934, "answer_id": 35897577, "question_id": 35897328, "link": "https://stackoverflow.com/questions/35897328/how-to-declare-class-instance-variable-in-inherited-class-automatically/35897577#35897577", "title": "How to declare Class Instance Variable in inherited class automatically", "body": "<p>I don't know if this is the best way, but here is how I might do it:</p>\n\n<pre><code>class Entity\n  singleton_class.send(:attr_writer, :instance_counter)\n  def self.instance_counter; @instance_counter ||= 0; end\n  def initialize\n    self.class.instance_counter += 1\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 3352, "user_id": 5152338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QbPE.png?s=128&g=1", "display_name": "jdno", "link": "https://stackoverflow.com/users/5152338/jdno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 35897577, "answer_count": 1, "score": 1, "last_activity_date": 1457541934, "creation_date": 1457541245, "question_id": 35897328, "link": "https://stackoverflow.com/questions/35897328/how-to-declare-class-instance-variable-in-inherited-class-automatically", "title": "How to declare Class Instance Variable in inherited class automatically", "body": "<p>I am using Class Inheritance Variables in Ruby to keep track of the number of instances I've created so far. To keep my code DRY, I implemented most of the logic in a base class that all my other classes inherit from.</p>\n\n<pre><code>class Entity\n  @instance_counter = 0\n\n  class &lt;&lt; self\n    attr_accessor :instance_counter\n  end\n\n  def initialize\n    self.class.instance_counter += 1\n  end\nend\n</code></pre>\n\n<p>This works perfectly fine except for one thing:</p>\n\n<p>I have to define <code>@instance_counter</code> in each child class, or I will get an <code>NoMethodError</code>.</p>\n\n<pre><code>class Child &lt; Entity\n  @instance_counter = 0\nend\n</code></pre>\n\n<p>Is there a way to declare the variable in each child automatically so that I don't have to do it manually?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1457559015, "post_id": 35896762, "comment_id": 59466368, "body": "Your question will result in opinions, not specific answers, because we don&#39;t know what you wanted to do."}], "answers": [{"comments": [{"owner": {"reputation": 1849, "user_id": 3437721, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3e6fac72d7b35f2177b6f56eab43db28?s=128&d=identicon&r=PG&f=1", "display_name": "user3437721", "link": "https://stackoverflow.com/users/3437721/user3437721"}, "edited": false, "score": 0, "creation_date": 1457541376, "post_id": 35897154, "comment_id": 59455259, "body": "Thanks - no I do not need to send them across threads.  I was unsure if I needed a queue as well as threads.  I want the code to be as fats as possible."}], "tags": [], "owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "is_accepted": true, "score": 0, "last_activity_date": 1457540813, "creation_date": 1457540813, "answer_id": 35897154, "question_id": 35896762, "link": "https://stackoverflow.com/questions/35896762/ruby-threading-and-queues/35897154#35897154", "title": "Ruby - threading and queues", "body": "<p>It's difficult for us to judge if it's \"correct\" because you haven't told us what it's supposed to do.</p>\n\n<blockquote>\n  <p><a href=\"http://ruby-doc.org/stdlib-2.0.0/libdoc/thread/rdoc/Queue.html\" rel=\"nofollow\">Queue</a> provides a way to synchronize communication between\n  threads.</p>\n</blockquote>\n\n<p>Are you trying to synchronize data between threads? If so then you should use a <code>Queue</code>. However, the way your code currently works you are simply creating new <code>Queue</code> object but never actually using it. Judging by your code I would guess you do not need it. It looks like you are saving your results from the calculations to the database so you don't need to send them across threads.</p>\n"}], "owner": {"reputation": 1849, "user_id": 3437721, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3e6fac72d7b35f2177b6f56eab43db28?s=128&d=identicon&r=PG&f=1", "display_name": "user3437721", "link": "https://stackoverflow.com/users/3437721/user3437721"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "closed_date": 1457562970, "accepted_answer_id": 35897154, "answer_count": 1, "score": -2, "last_activity_date": 1457540813, "creation_date": 1457539826, "question_id": 35896762, "link": "https://stackoverflow.com/questions/35896762/ruby-threading-and-queues", "closed_reason": "Needs details or clarity", "title": "Ruby - threading and queues", "body": "<p>I want to run some calculations using threads and queues, can anyone help with my code below?  Does it look correct and do I need a queue?</p>\n\n<pre><code>  require 'thread'\n\n  queue = Queue.new\n\n  calculation = Thread.new do\n    MyItem.find_each(start: 0, batch_size: 100) do |item|\n        my_calc = ItemsCalculator.new(item)\n        details_to_save = my_calc.get_details\n        details_to_save.each do |dt|\n          dt.save\n        end\n      end\n  end\n\n  puts \"finished\"\n</code></pre>\n"}, {"tags": ["java", "ruby", "protocol-buffers"], "answers": [{"comments": [{"owner": {"reputation": 1141, "user_id": 4974788, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/390e2890dc115d8063c0022578f6d693?s=128&d=identicon&r=PG&f=1", "display_name": "bsmarcosj", "link": "https://stackoverflow.com/users/4974788/bsmarcosj"}, "edited": false, "score": 0, "creation_date": 1457599850, "post_id": 35897755, "comment_id": 59482154, "body": "I&#39;ve put the same dependency as you but I get the same error. I&#39;ve debugged the binary message that I receive on the Java side. I&#39;ve used <code>protoc --decode=foo.Message stats.proto &lt; .\\binaryMessage.txt</code> and the output is <code>stats {   session: &quot;c6a34b2f-27b1-4daa-91a5-ac0a84a70b6a&quot;   client: &quot;log&quot;   providerCode: &quot;EMP&quot;   startTime: &quot;2016-03-10 08:24:53&quot;   endTime: &quot;2016-03-10 08:25:01&quot;   execTime: &quot;8461&quot;   serviceApi: &quot;hot&quot;   travelOperation: &quot;avail&quot;   serviceOperation: &quot;Disponibilidad&quot;   errorCode: &quot;\\\\x30&quot;   providerHubStatus: &quot;OK&quot; }</code>. The message is correct. Where can the error be?"}, {"owner": {"reputation": 1141, "user_id": 4974788, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/390e2890dc115d8063c0022578f6d693?s=128&d=identicon&r=PG&f=1", "display_name": "bsmarcosj", "link": "https://stackoverflow.com/users/4974788/bsmarcosj"}, "edited": false, "score": 0, "creation_date": 1457611474, "post_id": 35897755, "comment_id": 59490393, "body": "My project works with the following flux: From Ruby, the message is encoded and it is sent to <i>GooglePubSub</i>. After that, a <i>GoogleDataflow</i> streaming job reads the message from <i>PubSub</i> (this message is read as string). During the execution of that job, the function <code>.getBytes</code> is used on the message and the output bytes are decoded as <i>ProtocolBuffer</i> object. When I&#39;ve done the test I&#39;ve get the message from <i>PubSub</i> and I&#39;ve done <code>Files.write(Paths.get(&quot;&#47;binaryMessage.txt&quot;), c.element().getBytes());</code> and this is the file that I&#39;ve used to execute the <b>successful</b> <code>protoc --decode...</code>"}], "tags": [], "owner": {"reputation": 1051, "user_id": 1584263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57bb0cdb81d4ca0edf2aba81da46b89e?s=128&d=identicon&r=PG", "display_name": "blafasel", "link": "https://stackoverflow.com/users/1584263/blafasel"}, "is_accepted": false, "score": 0, "last_activity_date": 1457605003, "last_edit_date": 1457605003, "creation_date": 1457542449, "answer_id": 35897755, "question_id": 35896159, "link": "https://stackoverflow.com/questions/35896159/how-can-i-decode-a-protocol-buffer-object-with-a-message-within-another-messa/35897755#35897755", "title": "How can I decode a Protocol Buffer object with a &quot;message&quot; within another &quot;message&quot;?", "body": "<p>From my experience I can tell you, nothing special on Java side.</p>\n\n<p>I'm having the following dependency in the <code>pom.xml</code> of one project where protoc behaves well:</p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.protobuf&lt;/groupId&gt;\n        &lt;artifactId&gt;protobuf-java&lt;/artifactId&gt;\n        &lt;version&gt;2.5.0&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n\n<p>One hint for debugging: <code>protoc</code> has a command line option <code>--decode</code> which allows to test binary messages. To pin the problem to one side you should try to deserialize your message with this.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>After validating the outcome of the producing side (ruby) the potential sources for the misbehaving is reduced to:</p>\n\n<ul>\n<li>network communications</li>\n<li>Java side\n\n<ul>\n<li>wrong classes/class version (make sure, you regenerated the deserializer code)</li>\n<li>bug in <code>protoc</code> (<em>very</em> unlikely, but possible)</li>\n</ul></li>\n</ul>\n\n<p>To eleminate one after the other, I'd suppose you try to deserialize the obviously well-formatted package you've already tested with <code>protoc --decode ...</code> from disk.</p>\n\n<p>Beware: These are binary data. You must not handle it as string.</p>\n"}], "owner": {"reputation": 1141, "user_id": 4974788, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/390e2890dc115d8063c0022578f6d693?s=128&d=identicon&r=PG&f=1", "display_name": "bsmarcosj", "link": "https://stackoverflow.com/users/4974788/bsmarcosj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 829, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1457605003, "creation_date": 1457538267, "question_id": 35896159, "link": "https://stackoverflow.com/questions/35896159/how-can-i-decode-a-protocol-buffer-object-with-a-message-within-another-messa", "title": "How can I decode a Protocol Buffer object with a &quot;message&quot; within another &quot;message&quot;?", "body": "<p>I have problems encoding a <a href=\"https://developers.google.com/protocol-buffers/\" rel=\"nofollow\">Protocol Buffer</a> object in Ruby and decoding it in Java.</p>\n\n<p>On the one hand, I have the following <a href=\"https://developers.google.com/protocol-buffers/docs/proto#simple\" rel=\"nofollow\">.proto</a> file:</p>\n\n<pre><code>package foo;\n\nmessage Message {   \n    message Stats {\n        required string session = 1;\n        required string client = 2;\n        required string providerCode = 3;\n        required string startTime = 4;\n        required string endTime = 5;\n        required string execTime = 6;\n        required string serviceApi = 7;\n        required string travelOperation = 8;\n        required string serviceOperation = 9;\n        required string errorCode = 10;\n        required string providerHubStatus = 11;\n    }\n\n    required Stats stats = 1;\n}\n</code></pre>\n\n<p>When I log the content of the proto object in Ruby (with the function .inspect) the value is:</p>\n\n<pre><code>#&lt;Foo::Message stats=#&lt;Foo::Message::Stats session=\"1888ddb0-4371-55af-92d2-a63436fa5509\" client=\"log\" providerCode=\"EMP\" startTime=\"2016-03-09 15:06:36\" endTime=\"2016-03-09 15:06:40\" execTime=\"3873\" serviceApi=\"hot\" travelOperation=\"avail\" serviceOperation=\"Disponibilidad\" errorCode=\"\\\\x30\" providerHubStatus=\"OK\"&gt;&gt;\n</code></pre>\n\n<p>The message seems that is right.</p>\n\n<p>The problem comes when I try to decode the message in Java, the below error happened:</p>\n\n<pre><code>com.google.protobuf.InvalidProtocolBufferException: While parsing a protocol message, the input ended unexpectedly in the middle of a field.  This could mean either than the input has been truncated or that an embedded message misreported its own length.\n</code></pre>\n\n<hr>\n\n<p>On the other hand, I've done a test with the following .proto file:</p>\n\n<pre><code>package foo;\n\nmessage Stats {\n    required string session = 1;\n    required string client = 2;\n    required string providerCode = 3;\n    required string startTime = 4;\n    required string endTime = 5;\n    required string execTime = 6;\n    required string serviceApi = 7;\n    required string travelOperation = 8;\n    required string serviceOperation = 9;\n    required string errorCode = 10;\n    required string providerHubStatus = 11;\n}\n</code></pre>\n\n<p>When I log the content of the proto object (message.inspect) the value is:</p>\n\n<pre><code>#&lt;Foo::Stats session=\"1888ddb0-4371-55af-92d2-a63436fa5509\" client=\"log\" providerCode=\"EMP\" startTime=\"2016-03-09 15:06:36\" endTime=\"2016-03-09 15:06:40\" execTime=\"3873\" serviceApi=\"hot\" travelOperation=\"avail\" serviceOperation=\"Disponibilidad\" errorCode=\"\\\\x30\" providerHubStatus=\"OK\"&gt;\n</code></pre>\n\n<p>In this case the message seems that is right again, and now, the decoding's going well.</p>\n\n<hr>\n\n<p>Why if I have a unique message \"Stats\" the decoding is going well and when I have a message within another message the decoding is going wrong?</p>\n\n<p>Should I do something special for the first case?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1457537653, "post_id": 35895753, "comment_id": 59452413, "body": "You need to qualify which table the where clause applies to: <code>&quot;attachments.mime_type REGEXP ? image.*&quot;</code>"}, {"owner": {"reputation": 20813, "user_id": 4911842, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Wb3RO.png?s=128&g=1", "display_name": "developer033", "link": "https://stackoverflow.com/users/4911842/developer033"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1457537807, "post_id": 35895753, "comment_id": 59452553, "body": "I did, I&#39;m getting the following error <code>syntax error, unexpected tSTRING_BEG, expecting keyword_do or &#39;{&#39; or &#39;(&#39; ... includes :attachments, where &quot;attachments.mime_type REGEXP ... ... ^</code>"}, {"owner": {"reputation": 20813, "user_id": 4911842, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Wb3RO.png?s=128&g=1", "display_name": "developer033", "link": "https://stackoverflow.com/users/4911842/developer033"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1457538439, "post_id": 35895753, "comment_id": 59453076, "body": "@max any suggestion?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1457538755, "post_id": 35895753, "comment_id": 59453328, "body": "<code>includes(:attachments).where(&quot;...&quot;)</code>. <a href=\"http://guides.rubyonrails.org/active_record_querying.html#specifying-conditions-on-the-joined-tables\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>"}, {"owner": {"reputation": 20813, "user_id": 4911842, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Wb3RO.png?s=128&g=1", "display_name": "developer033", "link": "https://stackoverflow.com/users/4911842/developer033"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1457539215, "post_id": 35895753, "comment_id": 59453705, "body": "@max I know this statement, I can use it in controller, instead I want to put the <code>includes</code> in my model."}, {"owner": {"reputation": 618, "user_id": 941896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac3dfc520eda5060b0dcffd46b4c38?s=128&d=identicon&r=PG", "display_name": "Christos Hrousis", "link": "https://stackoverflow.com/users/941896/christos-hrousis"}, "edited": false, "score": 1, "creation_date": 1457542243, "post_id": 35895753, "comment_id": 59455861, "body": "It actually hard to grasp what you&#39;re trying to do. &quot;I have the following situation:A banner has 1 attachment which one has a lot of children (called attachments)&quot;  Do you mean that each Banner has multiple attachments, one of which is the &quot;parent&quot;, or do you mean that each attachment has children attachments?  Either way I feel like you may have got your modelling incorrect and should consider revising..."}, {"owner": {"reputation": 20813, "user_id": 4911842, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Wb3RO.png?s=128&g=1", "display_name": "developer033", "link": "https://stackoverflow.com/users/4911842/developer033"}, "edited": false, "score": 0, "creation_date": 1457542913, "post_id": 35895753, "comment_id": 59456352, "body": "A banner has an unique attachment, BUT this attachment have multiple children."}, {"owner": {"reputation": 766, "user_id": 1488591, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4373e8b5ebf359cb601120389378406a?s=128&d=identicon&r=PG", "display_name": "kunashir", "link": "https://stackoverflow.com/users/1488591/kunashir"}, "edited": false, "score": 0, "creation_date": 1457543025, "post_id": 35895753, "comment_id": 59456436, "body": "Why you do not use scope like this: scope :images, -&gt; { include(:attachments).where(&quot;...&quot;)}?"}], "answers": [{"tags": [], "owner": {"reputation": 20813, "user_id": 4911842, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Wb3RO.png?s=128&g=1", "display_name": "developer033", "link": "https://stackoverflow.com/users/4911842/developer033"}, "is_accepted": true, "score": 0, "last_activity_date": 1457543002, "creation_date": 1457543002, "answer_id": 35897970, "question_id": 35895753, "link": "https://stackoverflow.com/questions/35895753/belongs-to-with-where-conditional/35897970#35897970", "title": "Belongs_to with where conditional", "body": "<p>I fixed with the following code:</p>\n\n<pre><code>class Admin::Banner &lt; ActiveRecord::Base\n    belongs_to :attachment, -&gt; { where \"admin_attachments.mime_type REGEXP 'image.*'\" }, foreign_key: :admin_attachment_id, class_name: 'Admin::Attachment'\n    has_many :attachments, through: :attachment\nend\n</code></pre>\n"}], "owner": {"reputation": 20813, "user_id": 4911842, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Wb3RO.png?s=128&g=1", "display_name": "developer033", "link": "https://stackoverflow.com/users/4911842/developer033"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 803, "favorite_count": 0, "accepted_answer_id": 35897970, "answer_count": 1, "score": 2, "last_activity_date": 1457543002, "creation_date": 1457537191, "last_edit_date": 1457539103, "question_id": 35895753, "link": "https://stackoverflow.com/questions/35895753/belongs-to-with-where-conditional", "title": "Belongs_to with where conditional", "body": "<p>I have the following situation:</p>\n\n<p>A banner has 1 attachment which one has a lot of children (called attachments). Then I need to get the attachment and his children (what I already got). BUT I want only attachments (both parent and children) which have <code>mime_type == 'image. (jpg/jpeg)'</code> or any type of image.</p>\n\n<p><strong>Model (working)</strong></p>\n\n<pre><code>class Admin::Banner &lt; ActiveRecord::Base\n    belongs_to :attachment, -&gt; { includes :attachments }, foreign_key: :admin_attachment_id, class_name: 'Admin::Attachment'        \n    has_many :attachments, through: :attachment\nend\n</code></pre>\n\n<p>I'm trying to get the attachments with that condition with the following code, but it doesn't work:</p>\n\n<pre><code>belongs_to :attachment, -&gt; { includes :attachments, where \"mime_type REGEXP 'image.*'\" }, foreign_key: :admin_attachment_id, class_name: 'Admin::Attachment'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "gemfile"], "comments": [{"owner": {"reputation": 2322, "user_id": 3088748, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/544821277/picture?type=large", "display_name": "AJFaraday", "link": "https://stackoverflow.com/users/3088748/ajfaraday"}, "edited": false, "score": 2, "creation_date": 1457536024, "post_id": 35895213, "comment_id": 59451078, "body": "<a href=\"https://github.com/bbatsov/rails-style-guide\" rel=\"nofollow noreferrer\">github.com/bbatsov/rails-style-guide</a> - <a href=\"https://github.com/bbatsov/ruby-style-guide\" rel=\"nofollow noreferrer\">github.com/bbatsov/ruby-style-guide</a>"}, {"owner": {"reputation": 2322, "user_id": 3088748, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/544821277/picture?type=large", "display_name": "AJFaraday", "link": "https://stackoverflow.com/users/3088748/ajfaraday"}, "edited": false, "score": 1, "creation_date": 1457536097, "post_id": 35895213, "comment_id": 59451157, "body": "Incidentally, this question is inspecific. It&#39;s not entirely clear if you are asking about fixing dependencies in the Gemfile or talking about the world of working with Rails in general. If it&#39;s a general &quot;help me be a better programmer&quot; question, it&#39;s not really the right place to be asking about it."}, {"owner": {"reputation": 304, "user_id": 5703856, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/7iLpO.png?s=128&g=1", "display_name": "zirf", "link": "https://stackoverflow.com/users/5703856/zirf"}, "reply_to_user": {"reputation": 2322, "user_id": 3088748, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/544821277/picture?type=large", "display_name": "AJFaraday", "link": "https://stackoverflow.com/users/3088748/ajfaraday"}, "edited": false, "score": 1, "creation_date": 1457536385, "post_id": 35895213, "comment_id": 59451388, "body": "Ok.  This problem I must solve by myself. Thank you. &quot;To be a better programmer&quot; - in memories."}], "answers": [{"tags": [], "owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "is_accepted": false, "score": 1, "last_activity_date": 1457536645, "creation_date": 1457536645, "answer_id": 35895531, "question_id": 35895213, "link": "https://stackoverflow.com/questions/35895213/ruby-on-rails-good-best-pactices-sources/35895531#35895531", "title": "Ruby on Rails &quot;good/best pactices&quot; sources?", "body": "<p>Doesn't go to the heart of the error or errors, but the two style guides are good if you're looking to write better code: </p>\n\n<p>rails: <a href=\"https://github.com/bbatsov/rails-style-guide\" rel=\"nofollow\">https://github.com/bbatsov/rails-style-guide</a>\nruby: <a href=\"https://github.com/bbatsov/ruby-style-guide\" rel=\"nofollow\">https://github.com/bbatsov/ruby-style-guide</a></p>\n"}, {"tags": [], "owner": {"reputation": 89, "user_id": 1161718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c070decfdf02088d497115d271c993f4?s=128&d=identicon&r=PG", "display_name": "lgromanowski", "link": "https://stackoverflow.com/users/1161718/lgromanowski"}, "is_accepted": false, "score": 0, "last_activity_date": 1457561090, "creation_date": 1457561090, "answer_id": 35903589, "question_id": 35895213, "link": "https://stackoverflow.com/questions/35895213/ruby-on-rails-good-best-pactices-sources/35903589#35903589", "title": "Ruby on Rails &quot;good/best pactices&quot; sources?", "body": "<p>small addition to above comments - rubocop gem ( <a href=\"https://github.com/bbatsov/rubocop\" rel=\"nofollow\">https://github.com/bbatsov/rubocop</a> ) is a nice command line utility which helps in keeping ruby code clean (it uses different kind of checks based on ruby &amp; rails guidelines mentioned above).</p>\n"}], "owner": {"reputation": 304, "user_id": 5703856, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/7iLpO.png?s=128&g=1", "display_name": "zirf", "link": "https://stackoverflow.com/users/5703856/zirf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "closed_date": 1457562118, "answer_count": 2, "score": 0, "last_activity_date": 1457561090, "creation_date": 1457535858, "question_id": 35895213, "link": "https://stackoverflow.com/questions/35895213/ruby-on-rails-good-best-pactices-sources", "closed_reason": "Not suitable for this site", "title": "Ruby on Rails &quot;good/best pactices&quot; sources?", "body": "<p>Often I obtain a lot of errors like this:</p>\n\n<pre><code>~/.gem/ruby/gems/bundler-1.11.2/lib/bundler/rubygems_integration.rb:314:in `block in replace_gem': Please install the mysql2 adapter: `gem install activerecord-mysql2-adapter` (can't activate mysql2 (~&gt; 0.3.10), already activated mysql2-0.4.3. Make sure all dependencies are added to Gemfile.) (LoadError) \n</code></pre>\n\n<p>Generally, I understand, simply, it is lake of knwoleadge of good practices to build ROR applications generally and, particulary how to build Gemfile.</p>\n\n<p>Is there anybody who can recomment online sources to improve skills?</p>\n"}, {"tags": ["html", "css", "ruby-on-rails", "ruby", "twitter-bootstrap"], "comments": [{"owner": {"reputation": 966, "user_id": 5350659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63535c11d66f71640d7a5a558b351d11?s=128&d=identicon&r=PG&f=1", "display_name": "Pitabas Prathal", "link": "https://stackoverflow.com/users/5350659/pitabas-prathal"}, "edited": false, "score": 3, "creation_date": 1457533454, "post_id": 35894203, "comment_id": 59449054, "body": "use class <code>pull-right</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "reply_to_user": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "edited": false, "score": 0, "creation_date": 1457535966, "post_id": 35894299, "comment_id": 59451030, "body": "If the answer was useful to you, then accept it. This way you help those who helped you, @pangpang."}], "tags": [], "owner": {"reputation": 1551, "user_id": 4380542, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/nJSw1.jpg?s=128&g=1", "display_name": "Uday kumar das", "link": "https://stackoverflow.com/users/4380542/uday-kumar-das"}, "is_accepted": true, "score": 4, "last_activity_date": 1457533576, "creation_date": 1457533576, "answer_id": 35894299, "question_id": 35894203, "link": "https://stackoverflow.com/questions/35894203/bootstrap-put-search-form-to-right/35894299#35894299", "title": "bootstrap put search form to right", "body": "<p>use <code>class=\"pull-right\"</code> class like:</p>\n\n<pre><code>&lt;div class=\"pull-right\"&gt;\n &lt;%= form_tag search_path, method: :get, class: \"form-inline col-sm-4\" do %&gt;\n  &lt;div class=\"form-group\"&gt;\n   &lt;%= text_field_tag :search, params[:search], class: \"form-control\", placeholder: \"Search for...\"%&gt;\n  &lt;/div&gt;\n  &lt;div class=\"form-group\"&gt;\n  &lt;%= submit_tag \"Search\", class: \"btn btn-primary\" %&gt;\n  &lt;/div&gt;\n &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 35894299, "answer_count": 1, "score": 1, "last_activity_date": 1457533576, "creation_date": 1457533324, "question_id": 35894203, "link": "https://stackoverflow.com/questions/35894203/bootstrap-put-search-form-to-right", "title": "bootstrap put search form to right", "body": "<p>I make a search form by bootstrap, it is on left, but I want to put the form to right. How to make it?</p>\n\n<p><a href=\"https://i.stack.imgur.com/F4iLo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/F4iLo.png\" alt=\"enter image description here\"></a></p>\n\n<p>code:</p>\n\n<pre><code>&lt;%= form_tag search_path, method: :get, class: \"form-inline col-sm-4\" do %&gt;\n  &lt;div class=\"form-group\"&gt;\n     &lt;%= text_field_tag :search, params[:search], class: \"form-control\", placeholder: \"Search for...\"%&gt;\n  &lt;/div&gt;\n  &lt;div class=\"form-group\"&gt;\n    &lt;%= submit_tag \"Search\", class: \"btn btn-primary\" %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "hash", "each"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1457533262, "post_id": 35894151, "comment_id": 59448911, "body": "Please use English punctuation when you write in English."}], "answers": [{"comments": [{"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "reply_to_user": {"reputation": 814, "user_id": 5479076, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ebf84ecaf15f684b53f18b9313cd1325?s=128&d=identicon&r=PG&f=1", "display_name": "Orsay", "link": "https://stackoverflow.com/users/5479076/orsay"}, "edited": false, "score": 0, "creation_date": 1457536107, "post_id": 35894300, "comment_id": 59451161, "body": "If the answer was useful to you, @Ludivinecp, then accept it. This way you help those who helped you."}], "tags": [], "owner": {"reputation": 36166, "user_id": 393701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250889c646cd2a916920d9252f7c6f42?s=128&d=identicon&r=PG", "display_name": "SirDarius", "link": "https://stackoverflow.com/users/393701/sirdarius"}, "is_accepted": true, "score": 3, "last_activity_date": 1457533577, "creation_date": 1457533577, "answer_id": 35894300, "question_id": 35894151, "link": "https://stackoverflow.com/questions/35894151/iterate-into-an-array-of-hash/35894300#35894300", "title": "Iterate into an array of hash", "body": "<p>The <code>array</code> here seems to be a typo. You meant:</p>\n\n<pre><code>response.each_with_index do |resp, index|\n  puts resp[\"name\"]\nend\n</code></pre>\n\n<p>The index is not needed because the <code>resp</code> variable is correctly initialized to contain the hash at each iteration.</p>\n\n<p>So it can be simplified to:</p>\n\n<pre><code>response.each do |resp|\n  puts resp[\"name\"]\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3020, "user_id": 4453584, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25188d50654874d1125dd754d783851b?s=128&d=identicon&r=PG&f=1", "display_name": "guitarman", "link": "https://stackoverflow.com/users/4453584/guitarman"}, "is_accepted": false, "score": 3, "last_activity_date": 1457538996, "creation_date": 1457538996, "answer_id": 35896431, "question_id": 35894151, "link": "https://stackoverflow.com/questions/35894151/iterate-into-an-array-of-hash/35896431#35896431", "title": "Iterate into an array of hash", "body": "<p>A little bit shorter:</p>\n\n<pre><code>puts response.map{|hash| hash['name']}\n# CODELAB\n# PARISRB\n</code></pre>\n"}], "owner": {"reputation": 814, "user_id": 5479076, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ebf84ecaf15f684b53f18b9313cd1325?s=128&d=identicon&r=PG&f=1", "display_name": "Orsay", "link": "https://stackoverflow.com/users/5479076/orsay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 35894300, "answer_count": 2, "score": 0, "last_activity_date": 1457543531, "creation_date": 1457533228, "last_edit_date": 1457543531, "question_id": 35894151, "link": "https://stackoverflow.com/questions/35894151/iterate-into-an-array-of-hash", "title": "Iterate into an array of hash", "body": "<p>I'm trying to loop into an array of hash :</p>\n\n<pre><code>response = [\n  {\n    \"element\" =&gt; A,\n    \"group\" =&gt; {\"created\" =&gt; 13, \"code\" =&gt; \"Paris.rb\", :\"rsvp_limit\" =&gt; 40},\n    \"name\" =&gt; \"CODELAB\",\n    \"venue\" =&gt; {\"id\" =&gt; 17485302, \"place\" =&gt; \"la cord\u00e9e\", \"visibility\" =&gt; \"public\"}\n  },\n  {\n    \"element\" =&gt; B,\n    \"group\" =&gt; {\"created\" =&gt; 13, \"code\" =&gt; \"Paris.rb\", :\"rsvp_limit\" =&gt; 40},\n    \"name\" =&gt; \"PARISRB\",\n    \"venue\" =&gt; {\"id\" =&gt; 17485302, \"place\" =&gt; \"la cord\u00e9e\", \"visibility\" =&gt; \"public\"}\n  }\n]\n</code></pre>\n\n<p>When I run </p>\n\n<ul>\n<li><p><code>response[0][\"name\"]</code>, it returns <code>\"CODELAB\"</code></p></li>\n<li><p><code>response[1][\"name\"]</code> returns <code>\"PARISRB\"</code></p></li>\n</ul>\n\n<p>How can I make a loop to have the name of each element of this array of hash ?</p>\n\n<p>I tried : </p>\n\n<pre><code>response.each_with_index do |resp, index|\n  puts array[index][\"name\"]\nend\n</code></pre>\n\n<p>This is the error I get in my console :</p>\n\n<pre><code>NoMethodError: undefined method `[]' for nil:NilClass\nfrom (pry):58:in `block in __pry__'\n</code></pre>\n"}, {"tags": ["ruby", "methods"], "comments": [{"owner": {"reputation": 1757, "user_id": 5766404, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Scz0L.png?s=128&g=1", "display_name": "bogl", "link": "https://stackoverflow.com/users/5766404/bogl"}, "edited": false, "score": 2, "creation_date": 1457532850, "post_id": 35893842, "comment_id": 59448628, "body": "Your question has already been answered here: <a href=\"http://programmers.stackexchange.com/questions/150824/is-the-puts-function-of-ruby-a-method-of-an-object\" title=\"is the puts function of ruby a method of an object\">programmers.stackexchange.com/questions/150824/&hellip;</a>"}, {"owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "reply_to_user": {"reputation": 1757, "user_id": 5766404, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Scz0L.png?s=128&g=1", "display_name": "bogl", "link": "https://stackoverflow.com/users/5766404/bogl"}, "edited": false, "score": 0, "creation_date": 1457537392, "post_id": 35893842, "comment_id": 59452202, "body": "I did see that question but I&#39;m not asking about  kernel methods like<code>puts</code> but rather methods as defined by the coder, I have added that clarification to the OP."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1457546898, "post_id": 35893842, "comment_id": 59459057, "body": "BTW: it would have taken you about 2 seconds to test this."}, {"owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "edited": false, "score": 1, "creation_date": 1457623740, "post_id": 35893842, "comment_id": 59499668, "body": "Why does every one think that just trying it will tell you everything you need to know about it? Your 100% right, I could have tried this but what if I missed something? Something I don&#39;t know but some else does or is common sense but missed simply becuase I didn&#39;t know to test a particular aspect. Also judging by the up votes, it&#39;s a potentially interesting question and will now be available as knowledge for others as well which I think can only be a good thing."}], "answers": [{"tags": [], "owner": {"reputation": 1757, "user_id": 5766404, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Scz0L.png?s=128&g=1", "display_name": "bogl", "link": "https://stackoverflow.com/users/5766404/bogl"}, "is_accepted": true, "score": 2, "last_activity_date": 1457538155, "creation_date": 1457538155, "answer_id": 35896127, "question_id": 35893842, "link": "https://stackoverflow.com/questions/35893842/about-rubys-free-floating-methods/35896127#35896127", "title": "About ruby&#39;s free floating methods", "body": "<p>The top level context is called <em>main</em>. It is an instance of the <em>Object</em> class. A method defined in this top level context will indeed be public to all objects, because they all inherit from the <em>Object</em> class.</p>\n"}], "owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 35896127, "answer_count": 1, "score": 3, "last_activity_date": 1457538155, "creation_date": 1457532434, "last_edit_date": 1457537358, "question_id": 35893842, "link": "https://stackoverflow.com/questions/35893842/about-rubys-free-floating-methods", "title": "About ruby&#39;s free floating methods", "body": "<p>In ruby, free floating methods are attached to <code>Object</code>, does that mean all Classes have those methods since they all inherit from <code>Object</code>? </p>\n\n<p>Or do they have some kind of exemption?</p>\n\n<p>EDIT:\nfor clarification, I mean methods as defined by the coder like:</p>\n\n<pre><code>def some_method\n   code...\nend\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1457530798, "post_id": 35893073, "comment_id": 59447126, "body": "<b>support ended for 1.9.3.</b> show the proof please."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1457531169, "post_id": 35893073, "comment_id": 59447414, "body": "@\u0417\u0435\u043b\u0451\u043d\u044b\u0439 <a href=\"https://www.ruby-lang.org/en/news/2015/02/23/support-for-ruby-1-9-3-has-ended/\" rel=\"nofollow noreferrer\">ruby-lang.org/en/news/2015/02/23/&hellip;</a>"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1457531237, "post_id": 35893073, "comment_id": 59447480, "body": "it&#39;s about  <b>SecureRandom-support ended</b> or ruby version?"}], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1457531078, "post_id": 35893151, "comment_id": 59447345, "body": "Not only by SecureRandom, but in general, support for Ruby 1.9.3 has ended."}, {"owner": {"reputation": 11835, "user_id": 130641, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/kPIpu.jpg?s=128&g=1", "display_name": "John Ledbetter", "link": "https://stackoverflow.com/users/130641/john-ledbetter"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1457531189, "post_id": 35893151, "comment_id": 59447433, "body": "Right, but that has no bearing on how to generate a random token.  You can still use SecureRandom in 2.1, 2.2, 2.3.  Heck, you can still use it in 1.9.3."}], "tags": [], "owner": {"reputation": 11835, "user_id": 130641, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/kPIpu.jpg?s=128&g=1", "display_name": "John Ledbetter", "link": "https://stackoverflow.com/users/130641/john-ledbetter"}, "is_accepted": false, "score": 8, "last_activity_date": 1457530612, "creation_date": 1457530612, "answer_id": 35893151, "question_id": 35893073, "link": "https://stackoverflow.com/questions/35893073/howto-generate-random-token-in-ruby/35893151#35893151", "title": "HowTo generate Random Token in Ruby", "body": "<p>SecureRandom is still the answer.</p>\n\n<p>I'm not sure where you got the idea that SecureRandom has been removed or deprecated -- it's still available in <a href=\"http://ruby-doc.org/stdlib-2.3.0/libdoc/securerandom/rdoc/SecureRandom.html\">2.3</a>.  </p>\n"}, {"comments": [{"owner": {"reputation": 107, "user_id": 1200840, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/7772f79201c0f70d0fa895c4b20a7b55?s=128&d=identicon&r=PG", "display_name": "amarradi", "link": "https://stackoverflow.com/users/1200840/amarradi"}, "edited": false, "score": 0, "creation_date": 1457704661, "post_id": 35893251, "comment_id": 59540303, "body": "I uses your hint Tilo. Thanks a lot for your comment. For now it works fine for me. If my app goes online anyway, if to validate this part again."}, {"owner": {"reputation": 31555, "user_id": 677684, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5a785c03c08d7de6a15aaea326835cd6?s=128&d=identicon&r=PG", "display_name": "Tilo", "link": "https://stackoverflow.com/users/677684/tilo"}, "reply_to_user": {"reputation": 107, "user_id": 1200840, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/7772f79201c0f70d0fa895c4b20a7b55?s=128&d=identicon&r=PG", "display_name": "amarradi", "link": "https://stackoverflow.com/users/1200840/amarradi"}, "edited": false, "score": 1, "creation_date": 1457713923, "post_id": 35893251, "comment_id": 59547169, "body": "Make sure that your character set conforms with how you transmit the tokens - e.g. it might have to be URL-safe.."}, {"owner": {"reputation": 107, "user_id": 1200840, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/7772f79201c0f70d0fa895c4b20a7b55?s=128&d=identicon&r=PG", "display_name": "amarradi", "link": "https://stackoverflow.com/users/1200840/amarradi"}, "edited": false, "score": 0, "creation_date": 1458715583, "post_id": 35893251, "comment_id": 59979209, "body": "Yes, i&#39;ll check this. Thank you"}], "tags": [], "owner": {"reputation": 31555, "user_id": 677684, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5a785c03c08d7de6a15aaea326835cd6?s=128&d=identicon&r=PG", "display_name": "Tilo", "link": "https://stackoverflow.com/users/677684/tilo"}, "is_accepted": false, "score": 3, "last_activity_date": 1457630769, "last_edit_date": 1457630769, "creation_date": 1457530875, "answer_id": 35893251, "question_id": 35893073, "link": "https://stackoverflow.com/questions/35893073/howto-generate-random-token-in-ruby/35893251#35893251", "title": "HowTo generate Random Token in Ruby", "body": "<p>If you want to have more control over the character set used for the random tokens, this extension to class <code>String</code> can be useful:</p>\n\n<p>(it is part of the \"Facets of Ruby\" gem)</p>\n\n<p>Using a larger character set can help if you want a shorter token.</p>\n\n<pre><code>class String\n\n  # Create a random String of given length, using given character set\n  #\n  # Character set is an Array which can contain Ranges, Arrays, Characters\n  #\n  # Examples\n  #\n  #     String.random\n  #     =&gt; \"D9DxFIaqR3dr8Ct1AfmFxHxqGsmA4Oz3\"\n  #\n  #     String.random(10)\n  #     =&gt; \"t8BIna341S\"\n  #\n  #     String.random(10, ['a'..'z'])\n  #     =&gt; \"nstpvixfri\"\n  #\n  #     String.random(10, ['0'..'9'] )\n  #     =&gt; \"0982541042\"\n  #\n  #     String.random(10, ['0'..'9','A'..'F'] )\n  #     =&gt; \"3EBF48AD3D\"\n  #\n  #     BASE64_CHAR_SET =  [\"A\"..\"Z\", \"a\"..\"z\", \"0\"..\"9\", '_', '-']\n  #     String.random(10, BASE64_CHAR_SET)\n  #     =&gt; \"xM_1t3qcNn\"\n  #\n  #     SPECIAL_CHARS = [\"!\", \"@\", \"#\", \"$\", \"%\", \"^\", \"&amp;\", \"*\", \"(\", \")\", \"-\", \"_\", \"=\", \"+\", \"|\", \"/\", \"?\", \".\", \",\", \";\", \":\", \"~\", \"`\", \"[\", \"]\", \"{\", \"}\", \"&lt;\", \"&gt;\"]\n  #     BASE91_CHAR_SET =  [\"A\"..\"Z\", \"a\"..\"z\", \"0\"..\"9\", SPECIAL_CHARS]\n  #     String.random(10, BASE91_CHAR_SET)\n  #      =&gt; \"S(Z]z,J{v;\"\n  #\n\n  def self.random(len=32, character_set = [\"A\"..\"Z\", \"a\"..\"z\", \"0\"..\"9\"])\n    chars = character_set.map{|x| x.is_a?(Range) ? x.to_a : x }.flatten\n    Array.new(len){ chars.sample }.join\n  end\n\nend\n</code></pre>\n\n<p>Source: <a href=\"https://github.com/rubyworks/facets/blob/5569b03b4c6fd25897444a266ffe25872284be2b/lib/core/facets/string/random.rb\" rel=\"nofollow\">https://github.com/rubyworks/facets/blob/5569b03b4c6fd25897444a266ffe25872284be2b/lib/core/facets/string/random.rb</a></p>\n"}], "owner": {"reputation": 107, "user_id": 1200840, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/7772f79201c0f70d0fa895c4b20a7b55?s=128&d=identicon&r=PG", "display_name": "amarradi", "link": "https://stackoverflow.com/users/1200840/amarradi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 976, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1457630769, "creation_date": 1457530419, "question_id": 35893073, "link": "https://stackoverflow.com/questions/35893073/howto-generate-random-token-in-ruby", "title": "HowTo generate Random Token in Ruby", "body": "<p>I want generate unique ID for my rails-application. To send them to the user.\n<a href=\"http://ruby-doc.org/stdlib-1.9.3/libdoc/securerandom/rdoc/SecureRandom.html\" rel=\"nofollow\">SecureRandom</a>-support ended for 1.9.3.\nThe UUIDTool is good for the Admin-Tooken, but not for a short url-Restful ID like www.site.com/h6scre55x66</p>\n\n<p>Is there an alternative for rails to SecureRandom?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rails-models"], "comments": [{"owner": {"reputation": 1930, "user_id": 1337204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SkzuG.jpg?s=128&g=1", "display_name": "tpbowden", "link": "https://stackoverflow.com/users/1337204/tpbowden"}, "edited": false, "score": 1, "creation_date": 1457529616, "post_id": 35892485, "comment_id": 59446258, "body": "Try this: <a href=\"http://stackoverflow.com/questions/8881712/skip-certain-validation-method-in-model\" title=\"skip certain validation method in model\">stackoverflow.com/questions/8881712/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 931, "user_id": 2788619, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/100006561616235/picture?type=large", "display_name": "L457", "link": "https://stackoverflow.com/users/2788619/l457"}, "edited": false, "score": 0, "creation_date": 1457529460, "post_id": 35892603, "comment_id": 59446165, "body": "is there a way to do this without skipping all validations"}, {"owner": {"reputation": 1299, "user_id": 2318085, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/SZYgr.jpg?s=128&g=1", "display_name": "Mohammad Shahadat Hossain", "link": "https://stackoverflow.com/users/2318085/mohammad-shahadat-hossain"}, "reply_to_user": {"reputation": 931, "user_id": 2788619, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/100006561616235/picture?type=large", "display_name": "L457", "link": "https://stackoverflow.com/users/2788619/l457"}, "edited": false, "score": 0, "creation_date": 1457530067, "post_id": 35892603, "comment_id": 59446599, "body": "Do you have different callbacks in your classes? Do you have nested attributes in you model?"}, {"owner": {"reputation": 1299, "user_id": 2318085, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/SZYgr.jpg?s=128&g=1", "display_name": "Mohammad Shahadat Hossain", "link": "https://stackoverflow.com/users/2318085/mohammad-shahadat-hossain"}, "reply_to_user": {"reputation": 931, "user_id": 2788619, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/100006561616235/picture?type=large", "display_name": "L457", "link": "https://stackoverflow.com/users/2788619/l457"}, "edited": false, "score": 0, "creation_date": 1457530270, "post_id": 35892603, "comment_id": 59446748, "body": "There is concept of form object. <a href=\"http://webuild.envato.com/blog/creating-form-objects-with-activemodel-and-virtus/\" rel=\"nofollow noreferrer\">webuild.envato.com/blog/&hellip;</a>. you can take a look."}], "tags": [], "owner": {"reputation": 1299, "user_id": 2318085, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/SZYgr.jpg?s=128&g=1", "display_name": "Mohammad Shahadat Hossain", "link": "https://stackoverflow.com/users/2318085/mohammad-shahadat-hossain"}, "is_accepted": false, "score": 0, "last_activity_date": 1457529185, "creation_date": 1457529185, "answer_id": 35892603, "question_id": 35892485, "link": "https://stackoverflow.com/questions/35892485/rails4-override-skip-certain-model-validations/35892603#35892603", "title": "Rails4: Override/skip certain model validations?", "body": "<p>You can try:</p>\n\n<pre><code>attributes = {\n      first_name: first_name,\n      last_name: last_name,\n      email: email,\n      title: title,\n      birthday: birthday,\n      phone: phone,\n      mobile: mobile,\n    }\nuser.assign_attributes(attributes)\nUser.save!(validate: false)\n</code></pre>\n\n<p>This will skip validation.</p>\n"}], "owner": {"reputation": 931, "user_id": 2788619, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/100006561616235/picture?type=large", "display_name": "L457", "link": "https://stackoverflow.com/users/2788619/l457"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 357, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1457529479, "creation_date": 1457528829, "last_edit_date": 1457529479, "question_id": 35892485, "link": "https://stackoverflow.com/questions/35892485/rails4-override-skip-certain-model-validations", "title": "Rails4: Override/skip certain model validations?", "body": "<p>Would appreciate it if someone could suggest what best practice/cleanest method would be in this case:</p>\n\n<p>I have a User model with a couple of validation checks for when someone creates an account via my site. I want to skip these validations when someone tries to create a new User record via my api.</p>\n\n<p>I have read about solutions involving creating subclasses of the model and setting flags in private methods for each class to skip validation, or using attribute accessors to set flags, not sure what would be best or if there is something better which can be done.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "controller", "routes"], "answers": [{"comments": [{"owner": {"reputation": 74, "user_id": 5167264, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-YkUztkX6fe0/AAAAAAAAAAI/AAAAAAAAAAs/_btWUb2od2c/photo.jpg?sz=128", "display_name": "Safwan Marwan", "link": "https://stackoverflow.com/users/5167264/safwan-marwan"}, "edited": false, "score": 0, "creation_date": 1457539798, "post_id": 35893885, "comment_id": 59454160, "body": "this is not the thing. If i&#39;m doing this, I&#39;ll just have path for <code>admin_panels&#47;properties&#47;index</code> and <code>admin_panels&#47;properties&#47;show&#47;:id</code>. However, i want the admin_panels/properties to be able to handle everything, whereas properties can only have <code>index</code> and <code>show</code> action. Do you ahve any solution for that?"}, {"owner": {"reputation": 316, "user_id": 5396950, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1OfEWmXS3j4/AAAAAAAAAAI/AAAAAAAAAB0/OvG_NglrJEQ/photo.jpg?sz=128", "display_name": "Ahsan Ellahi", "link": "https://stackoverflow.com/users/5396950/ahsan-ellahi"}, "reply_to_user": {"reputation": 74, "user_id": 5167264, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-YkUztkX6fe0/AAAAAAAAAAI/AAAAAAAAAAs/_btWUb2od2c/photo.jpg?sz=128", "display_name": "Safwan Marwan", "link": "https://stackoverflow.com/users/5167264/safwan-marwan"}, "edited": false, "score": 0, "creation_date": 1457553094, "post_id": 35893885, "comment_id": 59462940, "body": "In that case, where you are submitting your form, specify the particular path where you want to go."}, {"owner": {"reputation": 74, "user_id": 5167264, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-YkUztkX6fe0/AAAAAAAAAAI/AAAAAAAAAAs/_btWUb2od2c/photo.jpg?sz=128", "display_name": "Safwan Marwan", "link": "https://stackoverflow.com/users/5167264/safwan-marwan"}, "edited": false, "score": 0, "creation_date": 1457561486, "post_id": 35893885, "comment_id": 59467710, "body": "i&#39;ve updated my question. Currently, it redirect to <code>[POST] &#47;properties</code> (which is not exist) instead of <code>[POST] &#47;admin_panels&#47;properties</code>. But why it still want to use <code>post create</code> from propeties_controller rather than admin_panels::properties_controller"}], "tags": [], "owner": {"reputation": 316, "user_id": 5396950, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1OfEWmXS3j4/AAAAAAAAAAI/AAAAAAAAAB0/OvG_NglrJEQ/photo.jpg?sz=128", "display_name": "Ahsan Ellahi", "link": "https://stackoverflow.com/users/5396950/ahsan-ellahi"}, "is_accepted": false, "score": 0, "last_activity_date": 1457583865, "last_edit_date": 1457583865, "creation_date": 1457532538, "answer_id": 35893885, "question_id": 35892039, "link": "https://stackoverflow.com/questions/35892039/how-to-overriding-model-controller-with-another-controller-in-rails/35893885#35893885", "title": "How to overriding model controller with another controller in Rails", "body": "<p>Currently, you have routes of <code>properties</code> for <code>index</code> and <code>show</code> and under <code>admin_panels</code> you have routes of all actions of <code>properties</code></p>\n\n<p>Change your routing file like this:</p>\n\n<pre><code>resources :users\nnamespace :admin_panels do\n  resources :properties, only: [:index, :show]\nend\n</code></pre>\n\n<p>Write the following command in terminal to view you routes.</p>\n\n<pre><code>rake routes\n</code></pre>\n\n<p>Write the following command in terminal to view routes of <code>admin_panels</code></p>\n\n<pre><code>rake routes | grep admin_panel\n</code></pre>\n\n<p>Specify action and controller in form:</p>\n\n<pre><code>&lt;%= simple_form_for @course_group, \n                    url: url_for(\n                                 action: 'create',\n                                 controller: 'admin_panels/properties'\n                                ),\n                    method: :post do |f| %&gt;\n</code></pre>\n\n<p>Syntax might be different a little bit.</p>\n"}, {"tags": [], "owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "is_accepted": false, "score": 0, "last_activity_date": 1457584700, "creation_date": 1457584700, "answer_id": 35907710, "question_id": 35892039, "link": "https://stackoverflow.com/questions/35892039/how-to-overriding-model-controller-with-another-controller-in-rails/35907710#35907710", "title": "How to overriding model controller with another controller in Rails", "body": "<p>You can try that in two ways, first using the normal <code>url</code> and also by using the <code>url_for</code> helper of the simple_form_for.</p>\n\n<p>Normal way,</p>\n\n<pre><code>&lt;%= simple_form_for @provider, :url =&gt; admin_panel_properties_create_path, :method =&gt; :post do |f|%&gt; \n</code></pre>\n\n<p>Using  the helper,</p>\n\n<pre><code>&lt;%= simple_form_for  @provider,  url: url_for( action: 'create',controller: 'admin_panels/properties'),  method: :post do |f| %&gt;\n</code></pre>\n"}], "owner": {"reputation": 74, "user_id": 5167264, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-YkUztkX6fe0/AAAAAAAAAAI/AAAAAAAAAAs/_btWUb2od2c/photo.jpg?sz=128", "display_name": "Safwan Marwan", "link": "https://stackoverflow.com/users/5167264/safwan-marwan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 342, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1457584700, "creation_date": 1457527703, "last_edit_date": 1457559634, "question_id": 35892039, "link": "https://stackoverflow.com/questions/35892039/how-to-overriding-model-controller-with-another-controller-in-rails", "title": "How to overriding model controller with another controller in Rails", "body": "<p>Question: </p>\n\n<p>Why the route still looking for <code>properties/create</code> and how to make it route to <code>admin_panels/properties#create</code>?</p>\n\n<p>Explaination:</p>\n\n<p>I'm creating my own admin panel from scratch. The main reason of creating the admin panel is to allow users easily perform <code>new</code>, <code>edit</code>, <code>update</code>, <code>create</code> and <code>destroy</code> actions for <code>property</code> model. So, I've created a new <code>PropertiesController</code> for <code>admin panel</code> to override the existing one.</p>\n\n<p>What I'm expecting from this is after the <code>user</code> create a new <code>property</code>, it will create the property using the <code>admin_panels/properties#create</code>. However, what i get is it try to find a route to <code>properties/create</code> which is not correct. </p>\n\n<p>New <code>AdminPanels::PropertiesController</code></p>\n\n<pre><code>class AdminPanels::PropertiesController &lt; PropertiesController\n  before_action :set_property, only: [:show, :edit, :update, :destroy]\n\n  def index\n    @properties = Property.all\n  end\n\n  def show\n  end\n\n  def new\n    @property = Property.new\n  end\n\n  def edit\n  end\n\n  def create\n    @property = Property.new(property_params)\n\n    respond_to do |format|\n      if @property.save\n        format.html { redirect_to ADMIN_PANEL_PROPERTY_SHOW }\n      else\n        format.html { render ADMIN_PANEL_PROPERTY_NEW }\n      end\n    end\n  end\n\n  def update\n    respond_to do |format|\n      if @property.update(property_params)\n        format.html { redirect_to ADMIN_PANEL_PROPERTY_SHOW }\n      else\n        format.html { render ADMIN_PANEL_PROPERTY_EDIT }\n      end\n    end\n  end\n\n  def destroy\n    @property.destroy\n    respond_to do |format|\n      format.html { redirect_to ADMIN_PANEL_PROPERTY_INDEX }\n    end\n  end\n\n  private\n  def set_property\n    @property = Property.find(params[:id])\n  end\n\n  def property_params\n    params.require(:property).permit(:name, :description, :address)\n  end\nend\n</code></pre>\n\n<p>to override existing <code>PropertiesController</code></p>\n\n<pre><code>class PropertiesController &lt; ApplicationController\n  before_action :set_property, only: [:show]\n\n  def index\n    @properties = Property.all\n  end\n\n  def show\n  end\n\n  private\n  def set_property\n    @property = Property.find(params[:id])\n  end\n\n  def property_params\n    params.require(:property).permit(:name, :description, :address)\n  end\nend\n</code></pre>\n\n<p>routes.rb</p>\n\n<pre><code>resources :users\nresources :properties, only: [:index, :show]\nnamespace :admin_panels do\n  resources :properties\nend\n</code></pre>\n\n<p>Updated:</p>\n\n<p>views > admin_panels > create > _form.html.slim</p>\n\n<pre><code>= simple_form_for(@property) do |f|\n  = f.error_notification\n\n  .form-inputs\n    = f.input :name\n    = f.input :description\n    = f.input :address\n\n  .form-actions\n    = f.button :submit\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 3, "creation_date": 1457528016, "post_id": 35891589, "comment_id": 59445116, "body": "You can&#39;t pass an instance or local variable directly from one controller to another; they&#39;re different objects. Perhaps you should include the category ID in a link on the page generated by CategoryController. As for your other error, please include it in your question."}], "answers": [{"tags": [], "owner": {"reputation": 896, "user_id": 4905770, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh3.googleusercontent.com/-8tHwC7ZgMLw/AAAAAAAAAAI/AAAAAAAAAEo/W8Y7OJJg3Aw/photo.jpg?sz=128", "display_name": "Sudhir Shrestha", "link": "https://stackoverflow.com/users/4905770/sudhir-shrestha"}, "is_accepted": false, "score": 1, "last_activity_date": 1457531358, "creation_date": 1457531358, "answer_id": 35893446, "question_id": 35891589, "link": "https://stackoverflow.com/questions/35891589/passing-a-variable-from-one-controller-to-another-and-making-if-else-conditions/35893446#35893446", "title": "Passing a variable from one controller to another and making if else conditions in regard to the value of that variable in Rails", "body": "<p>Sharing instance values between two different controller methods is not possible. They are meant to be associated with a specific route. </p>\n\n<p>If what you want is to share some common methods between two different controller methods, you can place it in ApplicationController.</p>\n"}], "owner": {"reputation": 1, "user_id": 4429273, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UQqVVAaavfw/AAAAAAAAAAI/AAAAAAAAABI/vzhII9nQZhg/photo.jpg?sz=128", "display_name": "Prerana Paudel", "link": "https://stackoverflow.com/users/4429273/prerana-paudel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1457531358, "creation_date": 1457526410, "last_edit_date": 1457530302, "question_id": 35891589, "link": "https://stackoverflow.com/questions/35891589/passing-a-variable-from-one-controller-to-another-and-making-if-else-conditions", "title": "Passing a variable from one controller to another and making if else conditions in regard to the value of that variable in Rails", "body": "<p>I am trying to pass a variable from one controller to another.</p>\n\n<pre><code>class CategoryController &lt; ApplicationController\n  def national\n     @catid = Category.where(category_id: \"1\" ).select(:category_id)\n     if user_signed_in?\n        @news = current_user.news.build\n        @feed_items = current_user.feed\n      end\n   end\n end\n</code></pre>\n\n<p>I have this variable <code>catid</code> in the <code>CategoryController</code> which I am trying to pass to <code>newscontroller</code>. And according to the value of <code>catid</code> that is generated in the respective action of <code>CategoryController</code>, I want to save news in <code>NewsController</code> and render it to layout. But I am not able to pass <code>catid</code> to <code>@news</code> object. And the <code>if</code> condition generates some kind of error like <code>\"Template Missing\"</code>. How can I solve it?</p>\n\n<pre><code>class NewsController &lt; ApplicationController\n   before_action :current_user, only: [:create, :destroy]\n\n   def create\n     if params[:action] == \"national\"    \n       @news = catid.current_user.news.build(news_params)\n       if @news.save\n         flash[:success] = \"News Posted\"\n         redirect_to root_url\n       else\n         @feed_items = []\n         render 'category/national'\n       end\n     end\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "redis", "sidekiq"], "comments": [{"owner": {"reputation": 2736, "user_id": 592229, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d23e0616c0b2862d2226ea0792c920cc?s=128&d=identicon&r=PG", "display_name": "ezuk", "link": "https://stackoverflow.com/users/592229/ezuk"}, "edited": false, "score": 0, "creation_date": 1457533435, "post_id": 35891401, "comment_id": 59449038, "body": "silly question, but how do you know it isn&#39;t getting triggered? What logfiles are you looking at? And do you know the port numbers in question?"}], "answers": [{"comments": [{"owner": {"reputation": 1261, "user_id": 217696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e336fa382f1f6a7d14ef242b2a972444?s=128&d=identicon&r=PG", "display_name": "Ian Lewis", "link": "https://stackoverflow.com/users/217696/ian-lewis"}, "edited": false, "score": 1, "creation_date": 1528724877, "post_id": 35897541, "comment_id": 88604410, "body": "This is not working for me. I am getting <code>:exception_object=&gt;#&lt;SocketError: getaddrin fo: Name or service not known&gt;, :status=&gt;500, :status_message=&gt;&quot;Internal Server Error&quot;</code> and I have followed the instructions."}], "tags": [], "owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "is_accepted": false, "score": 0, "last_activity_date": 1457541839, "creation_date": 1457541839, "answer_id": 35897541, "question_id": 35891401, "link": "https://stackoverflow.com/questions/35891401/sidekiq-worker-is-not-getting-triggered-when-rediscloud-url-is-used-in-heroku/35897541#35897541", "title": "sidekiq worker is not getting triggered when rediscloud url is used in heroku", "body": "<p>The wiki notes how to set up your Redis provider on Heroku:</p>\n\n<pre><code>heroku config:set REDIS_PROVIDER=REDISCLOUD_URL\n</code></pre>\n\n<p><a href=\"https://github.com/mperham/sidekiq/wiki/Using-Redis#using-an-env-variable\" rel=\"nofollow\">https://github.com/mperham/sidekiq/wiki/Using-Redis#using-an-env-variable</a></p>\n"}], "owner": {"reputation": 461, "user_id": 4546271, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/e9314cc5a731b3a75a83fbe99b41f1ab?s=128&d=identicon&r=PG&f=1", "display_name": "alka aswal", "link": "https://stackoverflow.com/users/4546271/alka-aswal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 546, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1457541839, "creation_date": 1457525891, "question_id": 35891401, "link": "https://stackoverflow.com/questions/35891401/sidekiq-worker-is-not-getting-triggered-when-rediscloud-url-is-used-in-heroku", "title": "sidekiq worker is not getting triggered when rediscloud url is used in heroku", "body": "<p>I am new to Ruby on Rails, I am facing an issue where sidekiq with redis (redis://localhost:6379) on local is working fine(getting triggered) but is not working with rediscloud in heroku. What can be the issue?</p>\n\n<p>My procfile contains:</p>\n\n<pre><code>web: bundle exec puma -C config/puma.rb\nworker: bundle exec sidekiq -q critical -q applications -q default\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 692, "user_id": 1659884, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8bab85146b0003a158fe80142330552c?s=128&d=identicon&r=PG", "display_name": "Jecki", "link": "https://stackoverflow.com/users/1659884/jecki"}, "reply_to_user": {"reputation": 23477, "user_id": 660921, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3d53595cb2a89131fb3be7b55b3a9ef0?s=128&d=identicon&r=PG", "display_name": "Martin Tournoij", "link": "https://stackoverflow.com/users/660921/martin-tournoij"}, "edited": false, "score": 0, "creation_date": 1457526364, "post_id": 35890991, "comment_id": 59443963, "body": "yes my bad , i was talking about spaceship library"}], "answers": [{"tags": [], "owner": {"reputation": 4336, "user_id": 574181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c78d396646e7612dead8bcd7c63a4fe?s=128&d=identicon&r=PG", "display_name": "Satya", "link": "https://stackoverflow.com/users/574181/satya"}, "is_accepted": true, "score": 1, "last_activity_date": 1457542395, "creation_date": 1457542395, "answer_id": 35897736, "question_id": 35890991, "link": "https://stackoverflow.com/questions/35890991/ruby-spaceship-gem-revoke-method/35897736#35897736", "title": "Ruby spaceship (gem), revoke method", "body": "<pre><code>Spaceship::Portal::Certificate::revoke_certificate!\n</code></pre>\n\n<p>This looks like you're attempting a method call. Try:</p>\n\n<pre><code>Spaceship::Portal::Certificate.revoke!\n</code></pre>\n\n<p><a href=\"https://github.com/fastlane/fastlane/blob/master/spaceship/lib/spaceship/portal/certificate.rb#L317\" rel=\"nofollow\">https://github.com/fastlane/fastlane/blob/master/spaceship/lib/spaceship/portal/certificate.rb#L317</a></p>\n\n<p>Note that it says:</p>\n\n<pre><code># Revoke the certificate. You shouldn't use this method probably.\n</code></pre>\n"}], "owner": {"reputation": 692, "user_id": 1659884, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8bab85146b0003a158fe80142330552c?s=128&d=identicon&r=PG", "display_name": "Jecki", "link": "https://stackoverflow.com/users/1659884/jecki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 35897736, "answer_count": 1, "score": -2, "last_activity_date": 1457542395, "creation_date": 1457524750, "last_edit_date": 1457525898, "question_id": 35890991, "link": "https://stackoverflow.com/questions/35890991/ruby-spaceship-gem-revoke-method", "title": "Ruby spaceship (gem), revoke method", "body": "<p>I'm trying to revoke certificate from apple development portal using <a href=\"https://github.com/fastlane/fastlane/tree/master/spaceship\" rel=\"nofollow\">https://github.com/fastlane/fastlane/tree/master/spaceship</a></p>\n\n<p>Most of the methods are working fine expect the revoke method: </p>\n\n<p>Example :</p>\n\n<pre><code>[52] pry(main)&gt; Spaceship::Portal::Certificate::DevelopmentPush.all\n</code></pre>\n\n<p>will list to me all developmentpush certficate , </p>\n\n<p>There is revoke method but I couldn't figure out the right syntax for it </p>\n\n<p>tested couple of syntax such :</p>\n\n<pre><code>[52] pry(main)&gt; Spaceship::Portal::Certificate::revoke_certificate!('id', 'type')\n\nNameError: wrong constant name RevokeCertificate!\nfrom /var/lib/gems/2.1.0/gems/spaceship-0.22.0/lib/spaceship/base.rb:153:in `const_defined?'\n</code></pre>\n\n<p>anyone knows the right syntax as this spaceship has no good docs or reference at all , </p>\n\n<p>thanks in advance</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "rspec", "rspec-rails"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1457524007, "post_id": 35890648, "comment_id": 59442339, "body": "&quot;people commonly use&quot; - people? It&#39;s not common, according to my observations. And yes, if <code>@user</code> is not used elsewhere (<code>after :each</code> or something), then it might as well be a local."}, {"owner": {"reputation": 12190, "user_id": 629222, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/DX2ZI.png?s=128&g=1", "display_name": "wired00", "link": "https://stackoverflow.com/users/629222/wired00"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1457524723, "post_id": 35890648, "comment_id": 59442817, "body": "@SergioTulentsev yeah i was probably jumping the gun saying &quot;commonly&quot; I&#39;ve just tried to find some examples and could only find this in recent SO questions i&#39;ve seen <a href=\"http://stackoverflow.com/questions/17396159/reloading-an-object-not-working-in-rspec\" title=\"reloading an object not working in rspec\">stackoverflow.com/questions/17396159/&hellip;</a>"}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1457525673, "post_id": 35890648, "comment_id": 59443436, "body": "As already mentioned - this is not common and I would see it as anti-pattern. Use <code>let</code> and <code>let!</code> instead. People use it because they think it is correct."}, {"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 0, "creation_date": 1457529801, "post_id": 35890648, "comment_id": 59446390, "body": "wired00, perhaps you mean that you often see this in older code?"}, {"owner": {"reputation": 10854, "user_id": 986862, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rFbtP.jpg?s=128&g=1", "display_name": "Andre Figueiredo", "link": "https://stackoverflow.com/users/986862/andre-figueiredo"}, "edited": false, "score": 0, "creation_date": 1550518606, "post_id": 35890648, "comment_id": 96290090, "body": "To be fair, I&#39;m not sure if it&#39;s common in a big picture. But I can assure you guys that there&#39;re a lot of code like this one as I sadly have seen them with my own eyes."}], "answers": [{"comments": [{"owner": {"reputation": 12190, "user_id": 629222, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/DX2ZI.png?s=128&g=1", "display_name": "wired00", "link": "https://stackoverflow.com/users/629222/wired00"}, "edited": false, "score": 0, "creation_date": 1457530906, "post_id": 35892801, "comment_id": 59447209, "body": "Makes a lot of sense thanks"}], "tags": [], "owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "is_accepted": true, "score": 3, "last_activity_date": 1457529730, "creation_date": 1457529730, "answer_id": 35892801, "question_id": 35890648, "link": "https://stackoverflow.com/questions/35890648/why-are-instance-variables-sometimes-overused-in-rspec-tests/35892801#35892801", "title": "Why are instance variables sometimes overused in RSpec tests?", "body": "<p>The overall issue is that variables in tests (like variables in any program) should have the least scope possible. That makes the test easier for readers to understand, since it minimizes the amount of code they have to think about, and it often allows the runtime to be more efficient. So if an instance variable (or, in current RSpec, a <code>let</code> variable) can be a local (without duplicating code or losing efficiency) it should be.</p>\n\n<p>Back when the best available way to pass data from a <code>before</code> block to an example (an <code>it</code> block) was in an instance variable, I used to see specs like your example all the time. Sometimes they were written by inexperienced programmers who saw a lot of instance variables used in specs and unthinkingly imitated that. (I still see the same error in Rails controllers.) Sometimes they resulted from someone inlining a before block but not taking the trouble to change instance variables that no longer needed to be instance variables into locals.</p>\n\n<p>These days RSpec provides <code>let</code>. One reason <code>let</code> is nicer than an instance variable is that uses of a <code>let</code> variable look like locals, so you don't need to change them if you change a local to a <code>let</code> variable or vice versa. However, I still often see the problem of test data which is used only in one example being defined in a <code>let</code> variable when it could and should just be a local. Like overuse of instance variables, this sometimes comes from inexperienced programmers unthinkingly imitating examples, and sometimes from a failure to clean up after a change in a test makes a <code>let</code> variable unnecessary.</p>\n"}], "owner": {"reputation": 12190, "user_id": 629222, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/DX2ZI.png?s=128&g=1", "display_name": "wired00", "link": "https://stackoverflow.com/users/629222/wired00"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "closed_date": 1458194064, "accepted_answer_id": 35892801, "answer_count": 1, "score": 0, "last_activity_date": 1457532473, "creation_date": 1457523714, "last_edit_date": 1457532473, "question_id": 35890648, "link": "https://stackoverflow.com/questions/35890648/why-are-instance-variables-sometimes-overused-in-rspec-tests", "closed_reason": "Opinion-based", "title": "Why are instance variables sometimes overused in RSpec tests?", "body": "<p>I've noticed examples of instance variable usage in RSpec unit tests etc.</p>\n\n<p>Something like this:</p>\n\n<pre><code>it 'should update something' do\n  @user = user(:userone)\n  @attr = {\n    :name =&gt; 'this',\n    :phone =&gt; 'that'\n  }\n  put :update, :id =&gt; @user.id, :user =&gt; @attr\n\n  @user.reload\n  expect(response.status).to eq(200)\n  expect(@user.name).to eq('this')\n  expect(@user.phone).to eq('that')\nend\n</code></pre>\n\n<p>Why not just use local variables if not setting the variable within a <code>before :each</code> etc.?</p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "json", "embed"], "comments": [{"owner": {"reputation": 23477, "user_id": 660921, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3d53595cb2a89131fb3be7b55b3a9ef0?s=128&d=identicon&r=PG", "display_name": "Martin Tournoij", "link": "https://stackoverflow.com/users/660921/martin-tournoij"}, "edited": false, "score": 1, "creation_date": 1457524268, "post_id": 35890222, "comment_id": 59442526, "body": "Neither examples are valid JavaScript (i.e. missing closing <code>)</code>, <code>}</code>, etc.). When including code as an example, you should <i>always</i> make sure you include <i>valid</i> examples <i>without</i> glaring syntax errors. You also didn&#39;t mention what is parsing this JSON (Ruby? JS? Which version of the library?) or what the &quot;error&quot; is that you&#39;re getting... I find it disappointing that I need to explain all of this to someone who has asked 726 questions on this site by the way."}, {"owner": {"reputation": 25732, "user_id": 93311, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/hgn1T.jpg?s=128&g=1", "display_name": "Trip", "link": "https://stackoverflow.com/users/93311/trip"}, "reply_to_user": {"reputation": 23477, "user_id": 660921, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3d53595cb2a89131fb3be7b55b3a9ef0?s=128&d=identicon&r=PG", "display_name": "Martin Tournoij", "link": "https://stackoverflow.com/users/660921/martin-tournoij"}, "edited": false, "score": 0, "creation_date": 1457525980, "post_id": 35890222, "comment_id": 59443677, "body": "@Carpetsmoker Ah good point. I added closures, and you&#39;re right, it is with Ruby on Rail&#39;s HAML in regards to implementation. The error itself was <code>invalid token</code> in Chrome. If I placed it in a JSON Lint, it would also fail there. Thanks for taking the time out of your day to respond. Cheers!"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1457534729, "post_id": 35890222, "comment_id": 59450028, "body": "<code>Is embedding JSON intrinsically unsafe?</code>. No, but its a cheap hack we used to do back in 2007. Embedding &quot;data&quot; in a inline script tag always leads to timing issues if you need to use the data in a external script. Put on the big boy pants and use AJAX :). Using ajax would also use the browsers JSON parser so you get an intelligible error message."}, {"owner": {"reputation": 25732, "user_id": 93311, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/hgn1T.jpg?s=128&g=1", "display_name": "Trip", "link": "https://stackoverflow.com/users/93311/trip"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1457536564, "post_id": 35890222, "comment_id": 59451498, "body": "@max Yah, I guess that&#39;s what I went with via $.getJSON . Was just curious as to <i>why</i> this was broken. But you infer that it&#39;s a cheap hack to embed JSON.. Ahh the coding of 2007."}], "owner": {"reputation": 25732, "user_id": 93311, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/hgn1T.jpg?s=128&g=1", "display_name": "Trip", "link": "https://stackoverflow.com/users/93311/trip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1457525902, "creation_date": 1457522619, "last_edit_date": 1457525902, "question_id": 35890222, "link": "https://stackoverflow.com/questions/35890222/what-difference-occurs-in-my-json-to-have-one-work-and-the-other-not", "title": "What difference occurs in my JSON to have one work, and the other not?", "body": "<p>I have a large amount of JSON embedded into my page via Ruby on Rail's HAML, that on load, gets injected into a variety of javascript views that display analytics.</p>\n\n<p>As so :</p>\n\n<pre><code>:javascript\n   $(function() {\n     var options = '#{raw admin_analytics.to_json.gsub(/'/,'`') }';\n   });\n</code></pre>\n\n<p>This was working fine for nearly two years. Until suddenly! This created a JSON parsing error which seemed to fail right around where an apostraphe was being used in one of the values.</p>\n\n<p>We then cycled through a variety of different implementations :</p>\n\n<pre><code>     var options = '#{admin_analytics.to_json }';\n     var options = '#{html_escape(admin_analytics.to_json) }';\n     var options = '#{j(admin_analytics.to_json) }';\n     var options = '#{admin_analytics.to_json.html_safe}';\n</code></pre>\n\n<p>And several others flavors, but everything returned the same error, and everything seemed to fail around the same apostraphe. We then tried changing that specific data attribute manually, but it would nonetheless, find some other apostraphe and fail there.</p>\n\n<p>I should add as well, that doing something like <code>html_escape</code> worked fine in console, but by the time it was embedded in the HTML, the parts that would break, were not encoded. They remained apostraphes, and therefore, broke the JSON.</p>\n\n<p>Finally, I managed to solve the entire debacle by just writing this :</p>\n\n<pre><code>:javascript\n  $(function() {\n    $.getJSON('/settings/load_analytics', function(data) {\n      window.MyCustomClass.init_admin_analytics(data);  \n    })\n  });\n</code></pre>\n\n<p>Which worked! </p>\n\n<p>My question is.. why did that work? Is embedding JSON intrinsically unsafe? Is there a possibility, I missed some more obvious way to embed JSON?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1457522484, "post_id": 35890069, "comment_id": 59441159, "body": "What is your question?"}, {"owner": {"reputation": 16234, "user_id": 2202702, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lTGWe.jpg?s=128&g=1", "display_name": "Arslan Ali", "link": "https://stackoverflow.com/users/2202702/arslan-ali"}, "edited": false, "score": 0, "creation_date": 1457522598, "post_id": 35890069, "comment_id": 59441231, "body": "Where did you execute <code>method2</code> in <code>method1</code>?"}, {"owner": {"reputation": 4176, "user_id": 1254882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba9514908fea209625280aba96c54006?s=128&d=identicon&r=PG&f=1", "display_name": "devanand", "link": "https://stackoverflow.com/users/1254882/devanand"}, "edited": false, "score": 0, "creation_date": 1457522631, "post_id": 35890069, "comment_id": 59441246, "body": "Make a class around the functions or declare <code>@list</code> globally."}], "answers": [{"comments": [{"owner": {"reputation": 16234, "user_id": 2202702, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lTGWe.jpg?s=128&g=1", "display_name": "Arslan Ali", "link": "https://stackoverflow.com/users/2202702/arslan-ali"}, "edited": false, "score": 2, "creation_date": 1457524287, "post_id": 35890817, "comment_id": 59442532, "body": "My fault. My answer is wrong. But I&#39;m not allowed to delete an accepted answer."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 16234, "user_id": 2202702, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lTGWe.jpg?s=128&g=1", "display_name": "Arslan Ali", "link": "https://stackoverflow.com/users/2202702/arslan-ali"}, "edited": false, "score": 0, "creation_date": 1457525224, "post_id": 35890817, "comment_id": 59443144, "body": "@BilalMaqsood It\u2019s OK, I have removed all my comments. Let these two answers coexist together :)"}, {"owner": {"reputation": 16234, "user_id": 2202702, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lTGWe.jpg?s=128&g=1", "display_name": "Arslan Ali", "link": "https://stackoverflow.com/users/2202702/arslan-ali"}, "edited": false, "score": 0, "creation_date": 1457525317, "post_id": 35890817, "comment_id": 59443200, "body": "Thank you for your courtesy. Ah! I&#39;ve always been understanding it the way I explained in my answer earlier."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 16234, "user_id": 2202702, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lTGWe.jpg?s=128&g=1", "display_name": "Arslan Ali", "link": "https://stackoverflow.com/users/2202702/arslan-ali"}, "edited": false, "score": 1, "creation_date": 1457527344, "post_id": 35890817, "comment_id": 59444626, "body": "@BilalMaqsood He who makes no mistakes makes nothing :)"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1457525196, "last_edit_date": 1457525196, "creation_date": 1457524197, "answer_id": 35890817, "question_id": 35890069, "link": "https://stackoverflow.com/questions/35890069/model-method-dont-see-variable-from-another-model-method/35890817#35890817", "title": "Model method dont see variable from another model method", "body": "<p>There is nothing wrong with the code shown in OP. Being called <em>after</em> <code>method2</code> <em>on the same instance of this class</em>, the <code>method1</code> will have an access to <code>@list</code> instance variable. There is probably other problem with the code, e.g. <code>@xml</code> is not defined anywhere and <em>it</em> fails / raises an exception.</p>\n\n<p>Proof:</p>\n\n<pre><code>\u25b6 class A\n\u25b7   def a1 ; puts @a ; end\n\u25b7   def a2 ; @a = 42 ; end\n\u25b7 end\n\u25b6 a = A.new\n#\u21d2 #&lt;A:0x000000026d2908&gt;\n\u25b6 a.a2\n#\u21d2 42\n\u25b6 a.a1\n#\u21d2\u00a042\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 6029329, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7b60bb6f81924ab25acdc285d3d2ba02?s=128&d=identicon&r=PG&f=1", "display_name": "KacperM", "link": "https://stackoverflow.com/users/6029329/kacperm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 35890817, "answer_count": 1, "score": -2, "last_activity_date": 1457525196, "creation_date": 1457522232, "last_edit_date": 1457522697, "question_id": 35890069, "link": "https://stackoverflow.com/questions/35890069/model-method-dont-see-variable-from-another-model-method", "title": "Model method dont see variable from another model method", "body": "<p>I've code like this:</p>\n\n<pre><code>def method1\n  pr_body = String.new\n\n  @xml.weryfikacja(ktora)\n  @list.each_slice(2) do |bod|\n  # rest of the code   \nend\n</code></pre>\n\n<p>And</p>\n\n<pre><code>def method2\n    @list= Array.new\n    @list.push(1)\nend\n</code></pre>\n\n<p>Now, the error is that, in <code>method1</code>, after executing <code>method2</code>, I still can't use <code>@list</code>. If I don't want to get errors, I need to return that array from <code>method2</code>.</p>\n"}, {"tags": ["ruby", "apache2", "passenger"], "comments": [{"owner": {"reputation": 23477, "user_id": 660921, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3d53595cb2a89131fb3be7b55b3a9ef0?s=128&d=identicon&r=PG", "display_name": "Martin Tournoij", "link": "https://stackoverflow.com/users/660921/martin-tournoij"}, "edited": false, "score": 0, "creation_date": 1457561030, "post_id": 35889934, "comment_id": 59467460, "body": "I suspect these are not the first errors you see, and that there are more errors above this (i.e. missing header files). This is certainly not the full output of the build log."}, {"owner": {"reputation": 1139, "user_id": 808233, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/8630d3965de0c12f71d6d7ef3e5006e5?s=128&d=identicon&r=PG", "display_name": "Mukesh", "link": "https://stackoverflow.com/users/808233/mukesh"}, "reply_to_user": {"reputation": 23477, "user_id": 660921, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3d53595cb2a89131fb3be7b55b3a9ef0?s=128&d=identicon&r=PG", "display_name": "Martin Tournoij", "link": "https://stackoverflow.com/users/660921/martin-tournoij"}, "edited": false, "score": 1, "creation_date": 1457589017, "post_id": 35889934, "comment_id": 59476676, "body": "This problem is solved by using passenger gem 5.0.6"}], "owner": {"reputation": 1139, "user_id": 808233, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/8630d3965de0c12f71d6d7ef3e5006e5?s=128&d=identicon&r=PG", "display_name": "Mukesh", "link": "https://stackoverflow.com/users/808233/mukesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1457560980, "creation_date": 1457521886, "last_edit_date": 1457560980, "question_id": 35889934, "link": "https://stackoverflow.com/questions/35889934/shared-ptr-scoped-ptr-error-ruby-passenger", "title": "&#39;shared_ptr&#39;; &#39;scoped_ptr&#39; error ruby passenger", "body": "<p>I getting an error while install passenger module on apache</p>\n\n<pre><code>In file included from ext/common/AccountsDatabase.h:32:\next/common/Account.h:171:9: error: unknown type name 'shared_ptr'; did you mean 'scoped_ptr'?\ntypedef shared_ptr&lt;Account&gt; AccountPtr;\n        ^~~~~~~~~~\n        scoped_ptr\next/boost/smart_ptr/scoped_ptr.hpp:39:25: note: 'scoped_ptr' declared here\ntemplate&lt;class T&gt; class scoped_ptr // noncopyable\n                        ^\nIn file included from ext/apache2/module_libpassenger_common/aggregate.cpp:5:\nIn file included from ext/common/AccountsDatabase.cpp:31:\nIn file included from ext/common/AccountsDatabase.h:32:\next/common/Account.h:171:19: error: expected unqualified-id\ntypedef shared_ptr&lt;Account&gt; AccountPtr;\n                  ^\nIn file included from ext/apache2/module_libpassenger_common/aggregate.cpp:5:\nIn file included from ext/common/AccountsDatabase.cpp:31:\nIn file included from ext/common/AccountsDatabase.h:33:\nIn file included from ext/common/ServerInstanceDir.h:42:\next/common/Utils.h:86:22: error: unknown type name 'shared_ptr'; did you mean 'scoped_ptr'?\ntemplate&lt;typename T&gt; shared_ptr&lt;T&gt;\n                     ^~~~~~~~~~\n                     scoped_ptr\next/boost/smart_ptr/scoped_ptr.hpp:39:25: note: 'scoped_ptr' declared here\ntemplate&lt;class T&gt; class scoped_ptr // noncopyable\n                        ^\nIn file included from ext/apache2/module_libpassenger_common/aggregate.cpp:5:\nIn file included from ext/common/AccountsDatabase.cpp:31:\nIn file included from ext/common/AccountsDatabase.h:33:\nIn file included from ext/common/ServerInstanceDir.h:42:\next/common/Utils.h:86:32: error: expected unqualified-id\ntemplate&lt;typename T&gt; shared_ptr&lt;T&gt;\n                               ^\next/common/Utils.h:354:34: error: unknown type name 'function'\nvoid runAndPrintExceptions(const function&lt;void ()&gt; &amp;func, bool toAbort);\n                                 ^\next/common/Utils.h:354:42: error: expected ')'\nvoid runAndPrintExceptions(const function&lt;void ()&gt; &amp;func, bool toAbort);\n                                         ^\next/common/Utils.h:354:27: note: to match this '('\nvoid runAndPrintExceptions(const function&lt;void ()&gt; &amp;func, bool toAbort);\n                          ^\next/common/Utils.h:355:34: error: unknown type name 'function'\nvoid runAndPrintExceptions(const function&lt;void ()&gt; &amp;func);\n                                 ^\next/common/Utils.h:355:42: error: expected ')'\nvoid runAndPrintExceptions(const function&lt;void ()&gt; &amp;func);\n                                         ^\next/common/Utils.h:355:27: note: to match this '('\nvoid runAndPrintExceptions(const function&lt;void ()&gt; &amp;func);\n                          ^\nIn file included from ext/apache2/module_libpassenger_common/aggregate.cpp:5:\nIn file included from ext/common/AccountsDatabase.cpp:31:\nIn file included from ext/common/AccountsDatabase.h:33:\next/common/ServerInstanceDir.h:191:10: error: unknown type name 'shared_ptr'; did you mean 'scoped_ptr'?\n        typedef shared_ptr&lt;Generation&gt; GenerationPtr;\n                ^~~~~~~~~~\n                scoped_ptr\next/boost/smart_ptr/scoped_ptr.hpp:39:25: note: 'scoped_ptr' declared here\ntemplate&lt;class T&gt; class scoped_ptr // noncopyable\n                        ^\nIn file included from ext/apache2/module_libpassenger_common/aggregate.cpp:5:\nIn file included from ext/common/AccountsDatabase.cpp:31:\nIn file included from ext/common/AccountsDatabase.h:33:\next/common/ServerInstanceDir.h:191:20: error: expected member name or ';' after declaration specifiers\n        typedef shared_ptr&lt;Generation&gt; GenerationPtr;\n        ~~~~~~~~~~~~~~~~~~^\next/common/ServerInstanceDir.h:291:2: error: unknown type name 'GenerationPtr'; did you mean 'Generation'?\n        GenerationPtr newGeneration(bool userSwitching, const string &amp;defaultUser,\n        ^~~~~~~~~~~~~\n        Generation\next/common/ServerInstanceDir.h:58:8: note: 'Generation' declared here\n        class Generation: public noncopyable {\n              ^\next/common/ServerInstanceDir.h:309:2: error: unknown type name 'GenerationPtr'; did you mean 'Generation'?\n        GenerationPtr getGeneration(unsigned int number) const {\n        ^~~~~~~~~~~~~\n        Generation\next/common/ServerInstanceDir.h:58:8: note: 'Generation' declared here\n        class Generation: public noncopyable {\n              ^\next/common/ServerInstanceDir.h:313:2: error: unknown type name 'GenerationPtr'; did you mean 'Generation'?\n        GenerationPtr getNewestGeneration() const {\n        ^~~~~~~~~~~~~\n        Generation\next/common/ServerInstanceDir.h:58:8: note: 'Generation' declared here\n        class Generation: public noncopyable {\n              ^\next/common/ServerInstanceDir.h:267:4: error: unknown type name 'GenerationPtr'; did you mean 'Generation'?\n                        GenerationPtr newestGeneration;\n                        ^~~~~~~~~~~~~\n                        Generation\next/common/ServerInstanceDir.h:58:8: note: 'Generation' declared here\n        class Generation: public noncopyable {\n              ^\next/common/ServerInstanceDir.h:267:18: error: no matching constructor for initialization of 'Passenger::ServerInstanceDir::Generation'\n                        GenerationPtr newestGeneration;\n                                      ^\next/common/ServerInstanceDir.h:58:8: note: candidate constructor (the implicit copy constructor) not viable: requires 1 argument, but 0 were provided\n        class Generation: public noncopyable {\n              ^\next/common/ServerInstanceDir.h:66:3: note: candidate constructor not viable: requires 2 arguments, but 0 were provided\n                Generation(const string &amp;serverInstanceDir, unsigned int number) {\n                ^\next/common/ServerInstanceDir.h:295:3: error: unknown type name 'GenerationPtr'; did you mean 'Generation'?\n                GenerationPtr newestGeneration = getNewestGeneration();\n                ^~~~~~~~~~~~~\n                Generation\next/common/ServerInstanceDir.h:58:8: note: 'Generation' declared here\n        class Generation: public noncopyable {\n              ^\next/common/ServerInstanceDir.h:58:8: error: base class 'boost::noncopyable_::noncopyable' has private copy constructor\n        class Generation: public noncopyable {\n              ^\next/boost/noncopyable.hpp:27:7: note: declared private here\n      noncopyable( const noncopyable&amp; );\n      ^\next/common/ServerInstanceDir.h:295:36: note: implicit copy constructor for 'Passenger::ServerInstanceDir::Generation' first required here\n                GenerationPtr newestGeneration = getNewestGeneration();\n                                                 ^\next/common/ServerInstanceDir.h:297:24: warning: comparison between NULL and non-pointer ('Passenger::ServerInstanceDir::Generation' and NULL) [-Wnull-arithmetic]\n                if (newestGeneration != NULL) {\n                    ~~~~~~~~~~~~~~~~ ^  ~~~~\next/common/ServerInstanceDir.h:297:24: error: invalid operands to binary expression ('Passenger::ServerInstanceDir::Generation' and 'long')\n                if (newestGeneration != NULL) {\n                    ~~~~~~~~~~~~~~~~ ^  ~~~~\next/common/StaticString.h:288:1: note: candidate function not viable: no known conversion from 'Passenger::ServerInstanceDir::Generation' to 'const string' (aka\n      'const basic_string&lt;char, char_traits&lt;char&gt;, allocator&lt;char&gt; &gt;') for 1st argument\noperator!=(const string &amp;other, const StaticString &amp;str) {\n^\next/common/StaticString.h:293:1: note: candidate function not viable: no known conversion from 'Passenger::ServerInstanceDir::Generation' to 'const char *' for 1st argument\noperator!=(const char *other, const StaticString &amp;str) {\n^\nIn file included from ext/apache2/module_libpassenger_common/aggregate.cpp:5:\nIn file included from ext/common/AccountsDatabase.cpp:31:\nIn file included from ext/common/AccountsDatabase.h:33:\next/common/ServerInstanceDir.h:298:32: error: member reference type 'Passenger::ServerInstanceDir::Generation' is not a pointer; maybe you meant to use '.'?\n                        newNumber = newestGeneration-&gt;getNumber() + 1;\n                                    ~~~~~~~~~~~~~~~~^~\n                                                    .\nfatal error: too many errors emitted, stopping now [-ferror-limit=]\n1 warning and 20 errors generated.\nrake aborted!\nCommand failed with status (1): [g++ -Iext -Iext/common -Iext/libev -fPIC -...]\n/Users/msingh/.rvm/gems/ruby-1.9.3-p194@showroom/gems/passenger-3.0.15/build/cplusplus_support.rb:31:in `compile_cxx'\n/Users/msingh/.rvm/gems/ruby-1.9.3-p194@showroom/gems/passenger-3.0.15/build/common_library.rb:126:in `block in define_common_library_task'\n/Users/msingh/.rvm/gems/ruby-1.9.3-p194@showroom/bin/ruby_executable_hooks:15:in `eval'\n/Users/msingh/.rvm/gems/ruby-1.9.3-p194@showroom/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\nTasks: TOP =&gt; apache2 =&gt; ext/apache2/mod_passenger.so =&gt; ext/apache2/module_libpassenger_common.a =&gt; ext/apache2/module_libpassenger_common/aggregate.o\n(See full trace by running task with --trace)\n\n--------------------------------------------\n\nIt looks like something went wrong\n</code></pre>\n\n<p>I am getting this when do passenger-install-apache2-module on the app</p>\n"}, {"tags": ["ruby", "dns", "resolution", "freeze"], "answers": [{"comments": [{"owner": {"reputation": 20334, "user_id": 78667, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b13a3e168d85c7f7f45ae1e54dc9db57?s=128&d=identicon&r=PG", "display_name": "Arkaitz Jimenez", "link": "https://stackoverflow.com/users/78667/arkaitz-jimenez"}, "edited": false, "score": 1, "creation_date": 1457542514, "post_id": 35891405, "comment_id": 59456064, "body": "The problem was in the outside indeed, host command bind()s before connect()s and therefore gets a source port in the range defined in /proc/sys/net/ipv4/ip_local_port_range but ruby itself does a connect directly and some of the times the allocated source port ended up out of what the firewall was looking for at responses."}], "tags": [], "owner": {"reputation": 1757, "user_id": 5766404, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Scz0L.png?s=128&g=1", "display_name": "bogl", "link": "https://stackoverflow.com/users/5766404/bogl"}, "is_accepted": true, "score": 1, "last_activity_date": 1457526663, "last_edit_date": 1457526663, "creation_date": 1457525901, "answer_id": 35891405, "question_id": 35889721, "link": "https://stackoverflow.com/questions/35889721/ruby-dns-resolution-hangs-every-other-time/35891405#35891405", "title": "Ruby DNS resolution hangs every other time", "body": "<p>I tried your code and cannot reproduce the problem. Note that for your specific example the response is not always the same, which makes sense for <code>www.google.com</code>.</p>\n\n<pre><code>tmp&gt; ruby resolv.rb\n# initializing\n# records are [#&lt;Resolv::IPv4 216.58.211.100&gt;]\n\ntmp&gt; ruby resolv.rb\n# initializing\n# records are [#&lt;Resolv::IPv4 74.125.136.105&gt;, #&lt;Resolv::IPv4 74.125.136.106&gt;, #&lt;Resolv::IPv4 74.125.136.147&gt;, #&lt;Resolv::IPv4 74.125.136.99&gt;, #&lt;Resolv::IPv4 74.125.136.103&gt;, #&lt;Resolv::IPv4 74.125.136.104&gt;]\n</code></pre>\n\n<p>I think that the problem you are experiencing lies outside of your code. The <code>host</code> command does a bit more than making a DNS request. It also checks the <code>/etc/hosts</code> file, and there might be some local cache involved. You should try to test your DNS, maybe with the <code>dig</code> command, and check if the answers are really always coming from the DNS server, not from a cache.</p>\n\n<p>In your code, you might want to enable a timeout, e.g.: </p>\n\n<pre><code>dns.timeouts = 3\n</code></pre>\n"}], "owner": {"reputation": 20334, "user_id": 78667, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b13a3e168d85c7f7f45ae1e54dc9db57?s=128&d=identicon&r=PG", "display_name": "Arkaitz Jimenez", "link": "https://stackoverflow.com/users/78667/arkaitz-jimenez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 370, "favorite_count": 0, "accepted_answer_id": 35891405, "answer_count": 1, "score": 2, "last_activity_date": 1457526663, "creation_date": 1457521290, "question_id": 35889721, "link": "https://stackoverflow.com/questions/35889721/ruby-dns-resolution-hangs-every-other-time", "title": "Ruby DNS resolution hangs every other time", "body": "<p>I have this piece of ruby code that works intermittently, I can call it in the shell multiple times ctrl-c-ing when it hangs and it will work instantaneously half of the times and hang forever the other half. </p>\n\n<pre><code>require 'resolv'\nputs \"initializing\"\ntxt = Resolv::DNS.open do |dns|\n    records = dns.getresources(\"www.google.com\", Resolv::DNS::Resource::IN::A)\n    records.empty? ? nil : records.map{|rec| rec.address}.compact\nend\nputs \"records are #{txt}\"\n</code></pre>\n\n<p>Here the output I see in both cases</p>\n\n<pre><code>[ ~]$ ruby test.rb \ninitializing\nrecords are 216.58.217.132\n[ ~]$ ruby test.rb \ninitializing\nrecords are 216.58.217.132\n[ ~]$ ruby test.rb \ninitializing\n\n^C/usr/lib/ruby/1.8/resolv.rb:620:in `select': Interrupt\n        from /usr/lib/ruby/1.8/resolv.rb:620:in `request'\n        from /usr/lib/ruby/1.8/resolv.rb:489:in `each_resource'\n        from /usr/lib/ruby/1.8/resolv.rb:975:in `resolv'\n        from /usr/lib/ruby/1.8/resolv.rb:973:in `each'\n        from /usr/lib/ruby/1.8/resolv.rb:973:in `resolv'\n        from /usr/lib/ruby/1.8/resolv.rb:972:in `each'\n        from /usr/lib/ruby/1.8/resolv.rb:972:in `resolv'\n        from /usr/lib/ruby/1.8/resolv.rb:970:in `each'\n        from /usr/lib/ruby/1.8/resolv.rb:970:in `resolv'\n        from /usr/lib/ruby/1.8/resolv.rb:481:in `each_resource'\n        from /usr/lib/ruby/1.8/resolv.rb:468:in `getresources'\n        from test.rb:4\n        from /usr/lib/ruby/1.8/resolv.rb:307:in `open'\n        from test.rb:3\n</code></pre>\n\n<p>I understand that DNS is an external service and it might be flaky, but that does not explain how it can work immediately sometimes and hang forever other times, and also, when I use the <code>host www.google.com</code> command it always returns immediately.</p>\n\n<p>How can I make this work predictably?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "enums"], "answers": [{"comments": [{"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1457523889, "post_id": 35890276, "comment_id": 59442259, "body": "@Jacob, can you say how you found this commit?"}, {"owner": {"reputation": 18135, "user_id": 33245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/317aad7f9f0b69a440faca74bbe22b20?s=128&d=identicon&r=PG", "display_name": "Jakob S", "link": "https://stackoverflow.com/users/33245/jakob-s"}, "reply_to_user": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 1, "creation_date": 1457525187, "post_id": 35890276, "comment_id": 59443117, "body": "@Ilya Sure, I&#39;ve updated the answer with more details."}], "tags": [], "owner": {"reputation": 18135, "user_id": 33245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/317aad7f9f0b69a440faca74bbe22b20?s=128&d=identicon&r=PG", "display_name": "Jakob S", "link": "https://stackoverflow.com/users/33245/jakob-s"}, "is_accepted": true, "score": 3, "last_activity_date": 1457525169, "last_edit_date": 1457525169, "creation_date": 1457522781, "answer_id": 35890276, "question_id": 35889646, "link": "https://stackoverflow.com/questions/35889646/enumerate-it-gem-strange-code-in-class-methods/35890276#35890276", "title": "Enumerate_it gem strange code in class methods", "body": "<p>Oooh, code archeology! Luckily, this is an open source project, so we have access to the history of the code, and - hopefully - the reasons for changes (as described in commit messages).</p>\n\n<p>The code in question:</p>\n\n<pre><code>self.enumerations = self.enumerations.dup\n</code></pre>\n\n<p>was originally added in <a href=\"https://github.com/cassiomarques/enumerate_it/commit/04bec59407bf14d3ab219c4b505ef1fbfce0c398\" rel=\"nofollow\">commit 04bec59407bf14d3ab219c4b505ef1fbfce0c398</a>, which has a pretty good commit message that explains why it was added:</p>\n\n<blockquote>\n  <h3>Respect superclass enumerations on subclasses</h3>\n  \n  <p>Previously, this was the behavior:</p>\n\n<pre><code>class Unico::Person\n  has_enumeration_for :gender\nend\n\nclass Person &lt; Unico::Person\nend\n\nUnico::Person.enumerations\n# =&gt; {:gender =&gt; Gender}\n\nPerson.enumerations\n# =&gt; {}\n</code></pre>\n  \n  <p>After this commit, subclasses will inherit the superclass enumerations:</p>\n\n<pre><code>class Unico::Person\n  has_enumeration_for :gender\nend\n\nclass Person &lt; Unico::Person\nend\n\nUnico::Person.enumerations\n# =&gt; {:gender =&gt; Gender}\n\nPerson.enumerations\n# =&gt; {:gender =&gt; Gender}\n</code></pre>\n</blockquote>\n\n<h3>How to find that</h3>\n\n<p>Check out a copy of the repository:</p>\n\n<pre><code>$ git clone https://github.com/cassiomarques/enumerate_it.git\nCloning into 'enumerate_it'...\nremote: Counting objects: 995, done.\nremote: Total 995 (delta 0), reused 0 (delta 0), pack-reused 995\nReceiving objects: 100% (995/995), 178.90 KiB | 0 bytes/s, done.\nResolving deltas: 100% (474/474), done.\nChecking connectivity... done.\n$ cd enumerate_it\n</code></pre>\n\n<p>Now, let's find all commits containing the code in question:</p>\n\n<pre><code>$ git log -S \"self.enumerations = self.enumerations.dup\"\ncommit c99a15c31d156464b1139533d4377331b6e21fff\nAuthor: C\u00e1ssio Marques &lt;cassio.marques@baby.com.br&gt;\nDate:   Thu Nov 8 17:16:36 2012 -0200\n\n    We should extend the EnumerateIt module instead of including it, since the has_enumeration_for is a class method\n\ncommit 04bec59407bf14d3ab219c4b505ef1fbfce0c398\nAuthor: Gabriel Sobrinho &lt;gabriel.sobrinho@gmail.com&gt;\nDate:   Thu May 31 11:08:57 2012 -0300\n\n    Respect superclass enumerations on subclasses\n\n    Previously, this was the behavior:\n\n      class Unico::Person\n        has_enumeration_for :gender\n      end\n\n      class Person &lt; Unico::Person\n      end\n\n      Unico::Person.enumerations\n      # =&gt; {:gender =&gt; Gender}\n\n      Person.enumerations\n      # =&gt; {}\n\n    After this commit, subclasses will inherit the superclass enumerations:\n\n      class Unico::Person\n        has_enumeration_for :gender\n      end\n\n      class Person &lt; Unico::Person\n      end\n\n      Unico::Person.enumerations\n      # =&gt; {:gender =&gt; Gender}\n\n      Person.enumerations\n      # =&gt; {:gender =&gt; Gender}\n</code></pre>\n\n<p>Looking closer at the commits with <code>git show</code> reveals that the topmost one was simply moving the code from one place to another, while the latter commit actually added the code.</p>\n\n<p>And that's the commit we wanted.</p>\n"}], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 0, "accepted_answer_id": 35890276, "answer_count": 1, "score": 2, "last_activity_date": 1457525169, "creation_date": 1457521114, "last_edit_date": 1457521469, "question_id": 35889646, "link": "https://stackoverflow.com/questions/35889646/enumerate-it-gem-strange-code-in-class-methods", "title": "Enumerate_it gem strange code in class methods", "body": "<p>I stumbled on strange code in <a href=\"https://github.com/cassiomarques/enumerate_it\" rel=\"nofollow\">enumerate_it</a> gem:</p>\n\n<pre><code>module EnumerateIt\n  module ClassMethods\n    def has_enumeration_for(attribute, options = {})\n      self.enumerations = self.enumerations.dup\n      ...\n    end\nend\n</code></pre>\n\n<p>It seems senseless for me, but I sure gem developers had reasons to write this.\nWhat is the reason to use assignment like this? </p>\n"}, {"tags": ["ruby", "format", "currency"], "answers": [{"tags": [], "owner": {"reputation": 1757, "user_id": 5766404, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Scz0L.png?s=128&g=1", "display_name": "bogl", "link": "https://stackoverflow.com/users/5766404/bogl"}, "is_accepted": false, "score": 0, "last_activity_date": 1457528064, "creation_date": 1457528064, "answer_id": 35892189, "question_id": 35889549, "link": "https://stackoverflow.com/questions/35889549/unidad-de-fomento-clf-uf-and-money-gem/35892189#35892189", "title": "Unidad de Fomento (CLF/UF) and money gem", "body": "<p>It was an intentional change introduced with version <strong>6.6</strong>. \nSee the <a href=\"https://github.com/RubyMoney/money/blob/master/CHANGELOG.md\" rel=\"nofollow\">changelog</a> and the <a href=\"https://github.com/RubyMoney/money/commit/bfa7108e1d085f7518ff979db4b8c9cb1b1b1e3f\" rel=\"nofollow\">commit</a> on GitHub. Unfortunately there is no hint as of why it was done.</p>\n"}, {"tags": [], "owner": {"reputation": 558, "user_id": 1680106, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a68c66b64e4b64fb6f239f1a6e7d07d3?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/1680106/john"}, "is_accepted": true, "score": 0, "last_activity_date": 1457614588, "creation_date": 1457614588, "answer_id": 35917153, "question_id": 35889549, "link": "https://stackoverflow.com/questions/35889549/unidad-de-fomento-clf-uf-and-money-gem/35917153#35917153", "title": "Unidad de Fomento (CLF/UF) and money gem", "body": "<p>OK, I think I've got it. I'm a fool who thinks we lived in a world of cents like USD or EUR (base 10 exponent 2, <code>10^2 cents</code> equals 1 unit of the currency). There are many currencies that do not have any kind of minor currencies like the Japanse Yen (JPY) and there are also currencies with no base 10 at all. This article in the wikipedia explains it very well: <a href=\"https://en.wikipedia.org/wiki/ISO_4217\" rel=\"nofollow\">https://en.wikipedia.org/wiki/ISO_4217</a></p>\n\n<p>So, in my examples it seems that a long time ago the CLF was a currency with exponent 0, so it hasn't any type of minor currency. 2.34 was an invalid amount so <code>money</code> converted it into 234. The ISO changed, and then CLF was converted into a currency with exponent 4.</p>\n\n<p>This comment on the <code>money</code> issue tracker solved my issue: <a href=\"https://github.com/RubyMoney/money/issues/614#issuecomment-194813943\" rel=\"nofollow\">https://github.com/RubyMoney/money/issues/614#issuecomment-194813943</a></p>\n"}], "owner": {"reputation": 558, "user_id": 1680106, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a68c66b64e4b64fb6f239f1a6e7d07d3?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/1680106/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 35917153, "answer_count": 2, "score": 1, "last_activity_date": 1457614588, "creation_date": 1457520879, "last_edit_date": 1457521446, "question_id": 35889549, "link": "https://stackoverflow.com/questions/35889549/unidad-de-fomento-clf-uf-and-money-gem", "title": "Unidad de Fomento (CLF/UF) and money gem", "body": "<p>I've been struggling to understand how does the <code>money</code> gem formats the Unidad de Fomento. I've tested the version <code>6.5</code> and the <code>6.7</code> and both seems to present odd formats:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># Money 6.5\n\nusd = Money.new(243, 'USD')\nusd.to_f #=&gt; 2.43\nusd.format #=&gt; \"$2.43\"\n\nclf = Money.new(243, 'CLF')\nclf.to_f #=&gt; 243\nclf.format #=&gt; \"CLF243\"\n\n# Money 6.7\n\nusd = Money.new(243, 'USD')\nusd.to_f #=&gt; 2.43\nusd.format #=&gt; \"$2.43\"\n\nclf = Money.new(243, 'CLF')\nclf.to_f #=&gt; 0.0243\nclf.format #=&gt; \"CLF0.0243\"\n</code></pre>\n\n<p>Is it meant to be this way or it is a bug?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "devise"], "answers": [{"tags": [], "owner": {"reputation": 2754, "user_id": 312807, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0a7abcf0718b2391335f11f7c6b2065b?s=128&d=identicon&r=PG", "display_name": "scttnlsn", "link": "https://stackoverflow.com/users/312807/scttnlsn"}, "is_accepted": true, "score": 1, "last_activity_date": 1457568669, "last_edit_date": 1457568669, "creation_date": 1457525670, "answer_id": 35891331, "question_id": 35889362, "link": "https://stackoverflow.com/questions/35889362/ror-devise-create-related-new-object-after-user-creation/35891331#35891331", "title": "RoR Devise - create related new object after User creation", "body": "<p>The call to <code>super</code> will create the user.  Pass a block to the <code>super</code> call that accepts the newly created resource/user and create the membership:</p>\n\n<pre><code>class Users::RegistrationsController &lt; Devise::RegistrationsController\n  def create\n    super do |user|\n      token = params[:invite_token]\n\n      if token.present?\n        invite = Invite.find_by_token(token)\n\n        if invite.present?\n          Membership.create(user_id: user.id, group_id: invite.group.id)\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>There's an example of this here: <a href=\"http://www.rubydoc.info/github/plataformatec/devise/#Configuring_controllers\" rel=\"nofollow\">http://www.rubydoc.info/github/plataformatec/devise/#Configuring_controllers</a></p>\n"}], "owner": {"reputation": 13, "user_id": 5481884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bf253b09ee07f17926b379b31c91643?s=128&d=identicon&r=PG&f=1", "display_name": "Darragh Monaghan", "link": "https://stackoverflow.com/users/5481884/darragh-monaghan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 35891331, "answer_count": 1, "score": 0, "last_activity_date": 1457568669, "creation_date": 1457520374, "last_edit_date": 1457523295, "question_id": 35889362, "link": "https://stackoverflow.com/questions/35889362/ror-devise-create-related-new-object-after-user-creation", "title": "RoR Devise - create related new object after User creation", "body": "<p>I have been stuck on this problem for way too long now.</p>\n\n<p>Using Devise for the first time, I am trying to combine new user sign up with the automatic joining of a group, based on the existence of an invitation token in the params. (E.g. Email invitation to join a group, so when they follow signup link and complete signup, they are automatically a member of the invited group)</p>\n\n<p>Following tutorials, I have been able to customise the Devise controller, with the User being created successfully when an invitation token exists, however I cannot then use the ID from the new user object to create a group membership - the membership is created successfully, with group_id added, but the user_id always remains nil.</p>\n\n<p>Below is my customised Devise controller, and relevant models:</p>\n\n<pre><code>class Users::RegistrationsController &lt; Devise::RegistrationsController\n\n  def create\n\n    super do\n      newUser = User.create(resource_params)\n      token = params[:invite_token]\n\n      if token != nil\n        group = Invite.find_by_token(token).group\n        newUser.groups.push(group)\n        Membership.create(:user_id =&gt; newUser.id, :group_id =&gt; group.id)\n      end\n    end\n\n  end\n\nend\n\n\n\nclass Membership &lt; ActiveRecord::Base\n  belongs_to :user\n  belongs_to :group\nend\n\n\nclass User &lt; ActiveRecord::Base\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable, :omniauthable\n\n  has_many :memberships\n  has_many :groups, :through =&gt; :memberships\n  has_many :gifts\n  has_many :posts\n  has_many :votes\n  has_many :invitations, :class_name =&gt; 'Invite', :foreign_key =&gt; 'recipient_id'\n  has_many :sent_invites, :class_name =&gt; 'Invite', :foreign_key =&gt; 'sender_id'\nend\n\n\nclass Group &lt; ActiveRecord::Base\n  has_many :memberships\n  has_many :users, :through =&gt; :memberships\n  has_many :invites\n  has_many :gifts\n  has_many :posts\n  has_one :user\nend\n</code></pre>\n\n<p>Does anyone know how I might be able to successfully create the Membership object, containing both User_id and Group_id, after the User creation?</p>\n\n<p>Thank you all in advance,</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "api", "concurrency", "salesforce"], "comments": [{"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1457521051, "post_id": 35889334, "comment_id": 59440211, "body": "I can suggest you to use event machine and resque combination for those app or use the extension em-resque to fetch the huge data concurrent way for huge"}], "owner": {"reputation": 411, "user_id": 5620807, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c760cfacf1be68d224839f67fd12d010?s=128&d=identicon&r=PG&f=1", "display_name": "SB    D", "link": "https://stackoverflow.com/users/5620807/sb-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1457520312, "creation_date": 1457520312, "question_id": 35889334, "link": "https://stackoverflow.com/questions/35889334/rails-best-practice-for-api-large-data-fetching-of-any-data-provider-data-concur", "title": "Rails Best Practice for API large data fetching of any Data provider data concurrent way", "body": "<p>I am using <code>databasedotcom gem</code> to fetch the data from salesforce but It was showing problem when the data is > 1 million. So </p>\n\n<p>I want some best gems </p>\n\n<p>that can fetch large number of data like 1 million from salesforce in a concurrent way so that my app do not show any performance issue.</p>\n\n<p>Any suggestion will be really helpful for me</p>\n"}, {"tags": ["ruby", "bash", "ubuntu", "popen3"], "comments": [{"owner": {"reputation": 4176, "user_id": 1254882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba9514908fea209625280aba96c54006?s=128&d=identicon&r=PG&f=1", "display_name": "devanand", "link": "https://stackoverflow.com/users/1254882/devanand"}, "edited": false, "score": 0, "creation_date": 1457520392, "post_id": 35889297, "comment_id": 59439773, "body": "Are there different shells running?"}, {"owner": {"reputation": 449, "user_id": 1665352, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/7abaad7ddf2b67fbbb18f8802938bd4e?s=128&d=identicon&r=PG", "display_name": "Juanpe Araque", "link": "https://stackoverflow.com/users/1665352/juanpe-araque"}, "reply_to_user": {"reputation": 4176, "user_id": 1254882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba9514908fea209625280aba96c54006?s=128&d=identicon&r=PG&f=1", "display_name": "devanand", "link": "https://stackoverflow.com/users/1254882/devanand"}, "edited": false, "score": 0, "creation_date": 1457521106, "post_id": 35889297, "comment_id": 59440265, "body": "I am not sure... might it be that ruby is sending the job with a different shell if there were? Is there a way to tell it how to run it? The system uses bash by default..."}, {"owner": {"reputation": 4176, "user_id": 1254882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba9514908fea209625280aba96c54006?s=128&d=identicon&r=PG&f=1", "display_name": "devanand", "link": "https://stackoverflow.com/users/1254882/devanand"}, "edited": false, "score": 1, "creation_date": 1457521201, "post_id": 35889297, "comment_id": 59440331, "body": "If you are running <code>Open3.popen3(&quot;.&#47;script.sh&quot;)</code> then it depends which shell is installed. Therefor the result is maybe different."}, {"owner": {"reputation": 449, "user_id": 1665352, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/7abaad7ddf2b67fbbb18f8802938bd4e?s=128&d=identicon&r=PG", "display_name": "Juanpe Araque", "link": "https://stackoverflow.com/users/1665352/juanpe-araque"}, "reply_to_user": {"reputation": 4176, "user_id": 1254882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba9514908fea209625280aba96c54006?s=128&d=identicon&r=PG&f=1", "display_name": "devanand", "link": "https://stackoverflow.com/users/1254882/devanand"}, "edited": false, "score": 0, "creation_date": 1457521312, "post_id": 35889297, "comment_id": 59440403, "body": "But the first version of the code run only the command, not a script, i.e. <code>job.get_cmd = cmd1 &amp;&amp; cmd2 &amp;&amp; cm3</code> so in principle it should run fine isn&#39;t it? And if one does by hand <code>.&#47;script.sh</code> then it runs fine as expected."}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1457521562, "post_id": 35889297, "comment_id": 59440575, "body": "Do you really mean that you pass to popen3 a command, which, as a <b>string</b>, is &#39;cmd1 &amp;&amp; cmd2 &amp;&amp; cmd3&#39; ?  In this case, you should research first, which shell is actually executing the commands, because in all shells I know (bash, zsh, ksh, csh), the <code>&amp;&amp;</code> explicitly <b>serializes</b> the commands. What happens, if you invoke the shell explicitly? Please post also more code, so that we see what <code>job.get_cmd</code> really returns."}, {"owner": {"reputation": 449, "user_id": 1665352, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/7abaad7ddf2b67fbbb18f8802938bd4e?s=128&d=identicon&r=PG", "display_name": "Juanpe Araque", "link": "https://stackoverflow.com/users/1665352/juanpe-araque"}, "edited": false, "score": 0, "creation_date": 1457522204, "post_id": 35889297, "comment_id": 59440972, "body": "Yes, I put that command as a string, I updated the question with the actual command which is being passed to popen3. I know that it should serialize the commands and that is why I cannot understand what is happening in this system... Thanks a lot"}, {"owner": {"reputation": 449, "user_id": 1665352, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/7abaad7ddf2b67fbbb18f8802938bd4e?s=128&d=identicon&r=PG", "display_name": "Juanpe Araque", "link": "https://stackoverflow.com/users/1665352/juanpe-araque"}, "edited": false, "score": 0, "creation_date": 1457523467, "post_id": 35889297, "comment_id": 59441949, "body": "I have tried running a popen3 process that only prints the $SHELL variable when running the process to see if for some reason it was running something different than bash and the output said /bin/bash so... no clue... this is completely puzzling me..."}, {"owner": {"reputation": 449, "user_id": 1665352, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/7abaad7ddf2b67fbbb18f8802938bd4e?s=128&d=identicon&r=PG", "display_name": "Juanpe Araque", "link": "https://stackoverflow.com/users/1665352/juanpe-araque"}, "reply_to_user": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1457621990, "post_id": 35889297, "comment_id": 59498264, "body": "For some reason, which I haven&#39;t understood yet, the problem was the weirdest thing I have ever seen but I found the reason why it wasn&#39;t working. When launching a  command with popen3 it seemed like the process did not know any shell (i.e. I tried to run just <code>echo $SHELL</code> and it turned out to be empty) but the script was read and each of the commands inside the file were launched using bash, the only shell installed in the system. The way of fixing it was with @user1934428, explicitly telling to use bash with the command <code>&#47;bin&#47;bash script.sh</code> then it worked."}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1457683556, "post_id": 35889297, "comment_id": 59526856, "body": "Well, the content of the SHELL variable doesn&#39;t mean anything, but I notice that you have a program which has the extension &quot;.exe&quot;. This is very rare on Unix systems. Could it be that you are using Cygwin on Windows?"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1457683619, "post_id": 35889297, "comment_id": 59526880, "body": "Ah, sorry, I just noticed: You explicitly say that you are on Linux. BTW, how did you verify, that the programs were running in parallel, not sequentially?"}], "owner": {"reputation": 449, "user_id": 1665352, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/7abaad7ddf2b67fbbb18f8802938bd4e?s=128&d=identicon&r=PG", "display_name": "Juanpe Araque", "link": "https://stackoverflow.com/users/1665352/juanpe-araque"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1457522357, "creation_date": 1457520206, "last_edit_date": 1457522357, "question_id": 35889297, "link": "https://stackoverflow.com/questions/35889297/running-bash-script-from-ruby-not-producing-the-correct-pid", "title": "Running bash script from ruby not producing the correct pid", "body": "<p>I am developing a ruby framework to run different jobs and one of the things that I need to do is to know when these jobs have ended in order to used their outputs and organize everything. I have been using it with no problem but some colegues are starting to use it in different system and something really odd is happening. What I do is run the commands using </p>\n\n<pre><code>i,o,e,t = Open3.popen3(job.get_cmd)\np = t.pid\n</code></pre>\n\n<p>and later I check if the job has ended like this:</p>\n\n<pre><code>begin\n   Process.getpgid(p)\nrescue Errno::ESRCH\n   # The process ended\nend\n</code></pre>\n\n<p>It works perfectly in the system I am running (Scientifi linux 6) but when a friend of mine started running on Ubuntu 14.04 (using ruby 1.9.3p484) and the command is a concatenation of commands such as <code>cmd1 &amp;&amp; cmd2 &amp;&amp; cmd3</code> each command is run at the same time by the system, not one after the other, and the pid returned by <code>t.pid</code> is neither of the pids of the different processes being run.</p>\n\n<p>I modified the code and instead of running the concatenation of cammands it creates a script with all the command inside the command called from popen3 is just <code>Open3.popen3(\"./script.sh\")</code> but the behaviour is the same... All the commands are run at the same time and the pid that ruby knows is not any of the processes pid...</p>\n\n<p>I am not sure if this is something ruby related but since running that <code>script.sh</code> by hand behaves as expected, running one command after the other, it seems that either ruby is not launching the process accordingly or the system is not reading the process as it should. Do you know what might be happening?</p>\n\n<p>Thanks a lot!</p>\n\n<p>EDIT:\nThe command being run looks like this\n<code>./myFit.exe h vlq.config  &amp;&gt; output_h.txt &amp;&amp; ./myFit.exe d vlq.config  &amp;&gt; output_d.txt &amp;&amp; ./myFit.exe p vlq.config  &amp;&gt; output_p.txt</code></p>\n\n<p>This command, if run by hand and not inside the ruby script runs perfectly, exactly this command. When run from the ruby script it runs at the same time all the myFit.exe executions (but I want them to be run withh &amp;&amp; becasue I want them running if the previous works fine). Myfit.exe is a tool which makes a fit, is not a system command. Again, this command, if run by hand runs perfeclty.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 1, "creation_date": 1457519107, "post_id": 35887980, "comment_id": 59438960, "body": "Have you looked in the debug log what SQL statement is actually generated? That error (likely) doesn&#39;t come from Rails, but from Postgres, which means the generated SQL is not what you think it is."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1457519749, "post_id": 35887980, "comment_id": 59439369, "body": "You might want to check the SQL that is generated by this scope by adding <a href=\"http://apidock.com/rails/ActiveRecord/Relation/to_sql\" rel=\"nofollow noreferrer\"><code>to_sql</code></a> to the end."}, {"owner": {"reputation": 31, "user_id": 5314269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896de14935a3fd74fd9260124f40b1e0?s=128&d=identicon&r=PG&f=1", "display_name": "kivi_o", "link": "https://stackoverflow.com/users/5314269/kivi-o"}, "edited": false, "score": 0, "creation_date": 1457525377, "post_id": 35887980, "comment_id": 59443234, "body": "The provided sql is what I receive from running .to_sql on given scope"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5314269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896de14935a3fd74fd9260124f40b1e0?s=128&d=identicon&r=PG&f=1", "display_name": "kivi_o", "link": "https://stackoverflow.com/users/5314269/kivi-o"}, "edited": false, "score": 0, "creation_date": 1457525518, "post_id": 35889441, "comment_id": 59443330, "body": "Im not quite sure why do I need an additional assignment on the last line, because investments.group(&#39;loan_investments.user_id&#39;) returns scoped relation as it should"}, {"owner": {"reputation": 4176, "user_id": 1254882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba9514908fea209625280aba96c54006?s=128&d=identicon&r=PG&f=1", "display_name": "devanand", "link": "https://stackoverflow.com/users/1254882/devanand"}, "reply_to_user": {"reputation": 31, "user_id": 5314269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896de14935a3fd74fd9260124f40b1e0?s=128&d=identicon&r=PG&f=1", "display_name": "kivi_o", "link": "https://stackoverflow.com/users/5314269/kivi-o"}, "edited": false, "score": 0, "creation_date": 1457601689, "post_id": 35889441, "comment_id": 59483420, "body": "because it&#39;s always an addition to <code>invenstments</code>. but if the model IS <code>Invenstment</code> and the scope is inside, you just join the elements with &quot;.&quot; together - without any assignments."}], "tags": [], "owner": {"reputation": 4176, "user_id": 1254882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba9514908fea209625280aba96c54006?s=128&d=identicon&r=PG&f=1", "display_name": "devanand", "link": "https://stackoverflow.com/users/1254882/devanand"}, "is_accepted": false, "score": 1, "last_activity_date": 1457520579, "creation_date": 1457520579, "answer_id": 35889441, "question_id": 35887980, "link": "https://stackoverflow.com/questions/35887980/rails-throws-column-must-appear-in-the-group-by-exception-for-not-apparent-rea/35889441#35889441", "title": "Rails throws &#39;column must appear in the GROUP BY&#39; exception for not apparent reason", "body": "<p>You are missing an assignment at the last line ...</p>\n\n<pre><code>scope :performance_overview, -&gt; {\n investments = joins(:loan)\n investments = investments.select(\"SUM(loan_investments.amount) AS total_balance,\n                              COUNT(DISTINCT loan_investments.loan_id) AS number_of_loans,\n                              AVG(loan_investments.interest_rate) AS average_interest_rate,\n                              AVG(DATE_PART('month', loans.last_payment_date) - DATE_PART('month', NOW())) AS average_remaining_period\")\n investments = investments.group('loan_investments.user_id')\n</code></pre>\n\n<p>}</p>\n"}], "owner": {"reputation": 31, "user_id": 5314269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896de14935a3fd74fd9260124f40b1e0?s=128&d=identicon&r=PG&f=1", "display_name": "kivi_o", "link": "https://stackoverflow.com/users/5314269/kivi-o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1457520579, "creation_date": 1457516714, "last_edit_date": 1457519185, "question_id": 35887980, "link": "https://stackoverflow.com/questions/35887980/rails-throws-column-must-appear-in-the-group-by-exception-for-not-apparent-rea", "title": "Rails throws &#39;column must appear in the GROUP BY&#39; exception for not apparent reason", "body": "<p>The situation is following:\nSQL below yields correct results when run in <code>psql</code> or with          <code>ActiveRecord::Base.connection.execute</code></p>\n\n<pre><code>SELECT SUM(loan_investments.amount) AS total_balance,\n       COUNT(DISTINCT loan_investments.loan_id) AS number_of_loans,\n       AVG(loan_investments.interest_rate) AS average_interest_rate,\n       AVG(DATE_PART('month', loans.last_payment_date) - DATE_PART('month', NOW())) AS average_remaining_period \nFROM \"loan_investments\" \nINNER JOIN \"loans\" ON \"loans\".\"id\" = \"loan_investments\".\"loan_id\" \nWHERE \"loan_investments\".\"user_id\" = 8 \nGROUP BY loan_investments.user_id;\n</code></pre>\n\n<p>Here is the scope that was used to generate the SQL above;</p>\n\n<pre><code> scope :performance_overview, -&gt; {\n     investments = joins(:loan)\n     investments = investments.select(\"SUM(loan_investments.amount) AS total_balance,\n                                  COUNT(DISTINCT loan_investments.loan_id) AS number_of_loans,\n                                  AVG(loan_investments.interest_rate) AS average_interest_rate,\n                                  AVG(DATE_PART('month', loans.last_payment_date) - DATE_PART('month', NOW())) AS average_remaining_period\")\n     investments.group('loan_investments.user_id')\n  }\n</code></pre>\n\n<p>When I run this scope the following exception is raised: </p>\n\n<blockquote>\n  <p>ERROR:  column \"loan_investments.id\" must appear in the GROUP BY clause or be used in an aggregate function</p>\n</blockquote>\n\n<p>Which is totally unexpected because loan_investments.id is not even used anywhere, and when this sql is run in console it yields correct result. My guess here is that ActiveRecord wants to group by <code>loan_investments.id</code> because we query model <code>LoanInvestment</code>, but I don't know if this is correct.</p>\n\n<p>So the question is why this exception is raised?</p>\n"}, {"tags": ["ruby", "excel"], "comments": [{"owner": {"reputation": 2923, "user_id": 4497791, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/vCgRs.png?s=128&g=1", "display_name": "eirikdaude", "link": "https://stackoverflow.com/users/4497791/eirikdaude"}, "edited": false, "score": 0, "creation_date": 1457517241, "post_id": 35887832, "comment_id": 59437632, "body": "How do you access the contents of the field?"}, {"owner": {"reputation": 388, "user_id": 2308639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1345a48fa1dbe24e85506de63b6c07f0?s=128&d=identicon&r=PG", "display_name": "Stephen Grimes", "link": "https://stackoverflow.com/users/2308639/stephen-grimes"}, "edited": false, "score": 1, "creation_date": 1457528475, "post_id": 35887832, "comment_id": 59445451, "body": "Need more details on the script. Are you using a gem?"}], "answers": [{"tags": [], "owner": {"reputation": 3038, "user_id": 368937, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/59fc5327303a91f0c075353c98375422?s=128&d=identicon&r=PG", "display_name": "sybind", "link": "https://stackoverflow.com/users/368937/sybind"}, "is_accepted": false, "score": 0, "last_activity_date": 1457850528, "creation_date": 1457850528, "answer_id": 35967264, "question_id": 35887832, "link": "https://stackoverflow.com/questions/35887832/how-to-render-an-xls-with-formulas-already-rendered-in-fields/35967264#35967264", "title": "How to render an xls with formulas already rendered in fields?", "body": "<p>I needed to append a .value to the end to get the value out. </p>\n\n<p>Details on the fix here: <a href=\"https://github.com/autotelik/datashift_spree/issues/56\" rel=\"nofollow\">https://github.com/autotelik/datashift_spree/issues/56</a></p>\n"}], "owner": {"reputation": 3038, "user_id": 368937, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/59fc5327303a91f0c075353c98375422?s=128&d=identicon&r=PG", "display_name": "sybind", "link": "https://stackoverflow.com/users/368937/sybind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1457850528, "creation_date": 1457516255, "last_edit_date": 1457850378, "question_id": 35887832, "link": "https://stackoverflow.com/questions/35887832/how-to-render-an-xls-with-formulas-already-rendered-in-fields", "title": "How to render an xls with formulas already rendered in fields?", "body": "<p>I am using a Ruby script to parse an .xls file. In a field, it uses a concatenate function, like this:</p>\n\n<p><code>=CONCATENATE(\"EAN:\", U2)</code></p>\n\n<p>However, when my ruby script parses the .xls and this field, it is not being parsed as plain text. I am seeing something like this, where the text should be:</p>\n\n<p><code>#&lt;Spreadsheet</code></p>\n\n<p>I put a debug break statement to get a closer look: \n<code>\n[1] pry(#&lt;DataShift::SpreeEcom::ProductLoader&gt;)&gt; property_list\n=&gt; [\"#&lt;Spreadsheet::Formula:0x0000000966ea00&gt;\"]\n</code></p>\n\n<p>I am using the datashift_spree gem.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "paperclip"], "comments": [{"owner": {"reputation": 3002, "user_id": 976498, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CSZVp.jpg?s=128&g=1", "display_name": "LHH", "link": "https://stackoverflow.com/users/976498/lhh"}, "edited": false, "score": 0, "creation_date": 1457518665, "post_id": 35887660, "comment_id": 59438654, "body": "what are you trying to do here?"}, {"owner": {"reputation": 31, "user_id": 4646312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/972a4cc5a1f9c163c534f1f08f1cfe5c?s=128&d=identicon&r=PG&f=1", "display_name": "Pigius", "link": "https://stackoverflow.com/users/4646312/pigius"}, "reply_to_user": {"reputation": 3002, "user_id": 976498, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CSZVp.jpg?s=128&g=1", "display_name": "LHH", "link": "https://stackoverflow.com/users/976498/lhh"}, "edited": false, "score": 0, "creation_date": 1457526374, "post_id": 35887660, "comment_id": 59443977, "body": "I would like to add checkbox to make possible to delete existing image. For now I can only upload new."}, {"owner": {"reputation": 3002, "user_id": 976498, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CSZVp.jpg?s=128&g=1", "display_name": "LHH", "link": "https://stackoverflow.com/users/976498/lhh"}, "edited": false, "score": 0, "creation_date": 1457526848, "post_id": 35887660, "comment_id": 59444283, "body": "then why are you doing in your view. Simply send request to controller  and delete there. and better to provide link like &#39;delete_image&#39; rather than check-box and  by clicking send request to controller and then delete it."}, {"owner": {"reputation": 3002, "user_id": 976498, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CSZVp.jpg?s=128&g=1", "display_name": "LHH", "link": "https://stackoverflow.com/users/976498/lhh"}, "edited": false, "score": 0, "creation_date": 1457526889, "post_id": 35887660, "comment_id": 59444314, "body": "BTW if you add new image from browse button then it will update existing one."}, {"owner": {"reputation": 31, "user_id": 4646312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/972a4cc5a1f9c163c534f1f08f1cfe5c?s=128&d=identicon&r=PG&f=1", "display_name": "Pigius", "link": "https://stackoverflow.com/users/4646312/pigius"}, "reply_to_user": {"reputation": 3002, "user_id": 976498, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CSZVp.jpg?s=128&g=1", "display_name": "LHH", "link": "https://stackoverflow.com/users/976498/lhh"}, "edited": false, "score": 0, "creation_date": 1457526992, "post_id": 35887660, "comment_id": 59444374, "body": "But when somebody will edit Speaker, It will no show that there is existing image, it will be just button to add new."}, {"owner": {"reputation": 3002, "user_id": 976498, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CSZVp.jpg?s=128&g=1", "display_name": "LHH", "link": "https://stackoverflow.com/users/976498/lhh"}, "edited": false, "score": 0, "creation_date": 1457527092, "post_id": 35887660, "comment_id": 59444435, "body": "but i think you have already shown image if present = image_tag @speaker.image.url(:medium). So if image exists then simply show a link next to image."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 4646312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/972a4cc5a1f9c163c534f1f08f1cfe5c?s=128&d=identicon&r=PG&f=1", "display_name": "Pigius", "link": "https://stackoverflow.com/users/4646312/pigius"}, "edited": false, "score": 0, "creation_date": 1457526330, "post_id": 35887882, "comment_id": 59443938, "body": "Well, I meant to edit, to make change image to other, no to edit like in photoshop."}], "tags": [], "owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "is_accepted": false, "score": 0, "last_activity_date": 1457516405, "last_edit_date": 1495542170, "creation_date": 1457516405, "answer_id": 35887882, "question_id": 35887660, "link": "https://stackoverflow.com/questions/35887660/edit-and-destroy-image-paperclip-rails/35887882#35887882", "title": "Edit and destroy image paperclip rails", "body": "<p>Do you mean you want the user to be able to edit the image like they would in Photoshop, or similar (perhaps more simple) image editing apps?  If so then your best option is to use a javascript plugin, eg one of these jQuery plugins:</p>\n\n<p><a href=\"http://www.sitepoint.com/image-manipulation/\" rel=\"nofollow noreferrer\">http://www.sitepoint.com/image-manipulation/</a>\n<a href=\"http://www.jqueryrain.com/2014/11/picedit-jquery-front-end-image-editor-plugin/\" rel=\"nofollow noreferrer\">http://www.jqueryrain.com/2014/11/picedit-jquery-front-end-image-editor-plugin/</a></p>\n\n<p>These were got just by googling \"jquery image editor plugin\".</p>\n\n<p>See also this related question:  <a href=\"https://stackoverflow.com/questions/12311359/javascript-image-editing-plugin\">Javascript image editing plugin</a></p>\n\n<p>You will need to choose which one is the best fit for you based on the types of editing options you want to give your user.</p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 4646312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/972a4cc5a1f9c163c534f1f08f1cfe5c?s=128&d=identicon&r=PG&f=1", "display_name": "Pigius", "link": "https://stackoverflow.com/users/4646312/pigius"}, "edited": false, "score": 0, "creation_date": 1457534192, "post_id": 35892013, "comment_id": 59449585, "body": "Wow, you&#39;re amazing. It&#39;s works ! Thank you very much !"}], "tags": [], "owner": {"reputation": 3002, "user_id": 976498, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CSZVp.jpg?s=128&g=1", "display_name": "LHH", "link": "https://stackoverflow.com/users/976498/lhh"}, "is_accepted": true, "score": 1, "last_activity_date": 1457527613, "creation_date": 1457527613, "answer_id": 35892013, "question_id": 35887660, "link": "https://stackoverflow.com/questions/35887660/edit-and-destroy-image-paperclip-rails/35892013#35892013", "title": "Edit and destroy image paperclip rails", "body": "<p>In your controller</p>\n\n<pre><code>def remove_picture      \n   speaker = Speaker.where(id: params[:id]).first \n   speaker.image.destroy\n   redirect_to request.referer\nend\n</code></pre>\n\n<p>in your view create following link - </p>\n\n<pre><code>- if @speaker.image.exists?\n   = link_to \"Remove Image\", remove_image_path(@speaker), method: :delete\n</code></pre>\n\n<p>in your routes.rb define routes for same</p>\n\n<pre><code>delete'/controller/remove_image/:id' =&gt; 'controller#remove_image', as: :remove_image\n</code></pre>\n\n<p>Try above code.</p>\n"}], "owner": {"reputation": 31, "user_id": 4646312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/972a4cc5a1f9c163c534f1f08f1cfe5c?s=128&d=identicon&r=PG&f=1", "display_name": "Pigius", "link": "https://stackoverflow.com/users/4646312/pigius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 901, "favorite_count": 1, "accepted_answer_id": 35892013, "answer_count": 2, "score": 1, "last_activity_date": 1457527613, "creation_date": 1457515821, "question_id": 35887660, "link": "https://stackoverflow.com/questions/35887660/edit-and-destroy-image-paperclip-rails", "title": "Edit and destroy image paperclip rails", "body": "<p>I have problem with paperclip gem. I'm using Rails 4. I would like to make possiblity for user, to edit image attachment. For now when I'm editing Speaker, I can only upload new image, no edit existing one.</p>\n\n<pre><code>= simple_form_for(@speaker) do |f|\n  = f.error_notification\n  .form-inputs\n    = f.input :first_name\n    = f.input :nickname\n    = f.input :last_name\n    = f.input :description\n  - if @speaker.image.exists?\n    = image_tag @speaker.image.url(:medium)\n    = f.input :delete_image, as: :fake\n    = @speaker.image = nil\n    = @speaker.save\n  = f.input :image\n  .form-actions\n    = f.button :submit\n</code></pre>\n\n<p>However, I can't create checkbox input with :delete_image, so for now, with every refresh site it destroys image (because of @speaker.save).</p>\n\n<p>Could give me some advice, how to fix it ? Solutions from Rails 3 cant help me.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1457520212, "post_id": 35887335, "comment_id": 59439641, "body": "Oops sorry left it there from my coding. Just removed it"}], "answers": [{"comments": [{"owner": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "edited": false, "score": 0, "creation_date": 1457521295, "post_id": 35887390, "comment_id": 59440392, "body": "Not quite exactly what i&#39;m after. e.g. before = &quot;one one one two&quot; after = &quot;one two&quot; will have as nothing has changed."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "edited": false, "score": 0, "creation_date": 1457521478, "post_id": 35887390, "comment_id": 59440526, "body": "You did not mention in the OP how the equal strings should be treated. Both me and Sergio understood that they should be all removed."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1457521786, "last_edit_date": 1457521786, "creation_date": 1457515084, "answer_id": 35887390, "question_id": 35887335, "link": "https://stackoverflow.com/questions/35887335/how-to-get-a-count-on-how-many-words-are-different-2-strings/35887390#35887390", "title": "How to get a count on how many words are different 2 strings?", "body": "<pre><code>before = \"one two three four\"\nafter  = \"one six three four five\"\n\nbefore, after = [before, after].map(&amp;:split)\ncommon = [before, after].reduce &amp;:&amp;\n\nbefore_not_after = before - common\nafter_not_before = after - common\n</code></pre>\n\n<p>To preserve all but one equal strings, one might use:</p>\n\n<pre><code>before, after = [before, after].map(&amp;:split)\n# after execution of the line below, before array will contain result\nafter.each { |e| (i = before.index(e)) &amp;&amp; before.delete_at(i) }\n</code></pre>\n\n<p>Please be aware that the latter mutates an array <code>before</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1457627913, "last_edit_date": 1457627913, "creation_date": 1457540423, "answer_id": 35897007, "question_id": 35887335, "link": "https://stackoverflow.com/questions/35887335/how-to-get-a-count-on-how-many-words-are-different-2-strings/35897007#35897007", "title": "How to get a count on how many words are different 2 strings?", "body": "<p>If your goal is to measure the difference between two texts, there are various algorithms that do just that.\nTake a look at eg <a href=\"https://rubygems.org/gems/levenshtein/versions/0.2.2\" rel=\"nofollow\">levenshtein</a></p>\n\n<p>If the words themselves are the same and it is rather about comparing the place of them in the the texts, I can give you this method which I made in a e-book comparing project. This goes a step further than your sample.</p>\n\n<p>\"one two three four\" and \"one four two four\" would be the same in your implementation but not with this one.</p>\n\n<pre><code>one   = \"een redelijk lange tekst om na te gaan of dit programma het verschil kan maken tussen soortgelijke teksten door rekening te houden met combinaties van woorden\"\ntwo   = \"een redelijk lange tekst met bijna dezelfde woorden als de vorige om na te gaan of dit programma het verschil kan maken tussen soortgelijke teksten door rekening te houden met combinaties van woorden\"\nthree = \"een totaal andere tekst, ik maak hem lang genoeg om representabel te zijn en zet er enkele woorden bij die in de eerste tekst ook voorkomen\"\n\nclass String\n    def similarities_with text, lookafter_count=2, lookbefore_count=2\n        r = [self.split, text.split].each.inject([]) do |r, a|\n            r &lt;&lt; a.each_with_index.inject([]) do |m, (element, index)|\n              m &lt;&lt; a[index-lookbefore_count..index+lookafter_count]\n            end\n        end\n    (r.first &amp; r.last).reject(&amp;:empty?).count\n    end\nend\n\none.similarities_with one # 24\none.similarities_with two # 20\none.similarities_with three # 0\n\"one two three four\".similarities_with(\"one six three four five\", 0, 0) # 3\n\"one two three four\".similarities_with(\"one six three four five\", 1, 1) # 0\n\n# and now the difference\none.similarities_with(one) - one.similarities_with(two) # 4\n</code></pre>\n\n<p>Some explanation: The method compares the string itself with the one in the parameter. I use inject so that I don't have to define empty arrays in advance.\nThe result (r) keeps an array of the word combinations before and after the keywords. These two arrays are compared and only those who are present in both texts are counted and returned by the method.</p>\n"}, {"tags": [], "owner": {"reputation": 66, "user_id": 9092091, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_8a2E1LKEB0/AAAAAAAAAAI/AAAAAAAAAE4/yc_FA00Vzeg/photo.jpg?sz=128", "display_name": "Prakash Dhakad", "link": "https://stackoverflow.com/users/9092091/prakash-dhakad"}, "is_accepted": false, "score": 2, "last_activity_date": 1587013913, "last_edit_date": 1587013913, "creation_date": 1513142630, "answer_id": 47786048, "question_id": 35887335, "link": "https://stackoverflow.com/questions/35887335/how-to-get-a-count-on-how-many-words-are-different-2-strings/47786048#47786048", "title": "How to get a count on how many words are different 2 strings?", "body": "<pre><code>before = \"one two three four\".split(\" \")        # =&gt; [\"one\", \"two\", \"three\", \"four\"]\n\nafter  = \"one six three four five\".split(\" \")   # =&gt; [\"one\", \"six\", \"three\", \"four\", \"five\"]\n\n\nafter - before  # =&gt; [\"six\", \"five\"]  These words were added\n\nbefore - after  # =&gt; [\"two\"]  These words were removed\n</code></pre>\n"}], "owner": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1587013913, "creation_date": 1457514919, "last_edit_date": 1457520207, "question_id": 35887335, "link": "https://stackoverflow.com/questions/35887335/how-to-get-a-count-on-how-many-words-are-different-2-strings", "title": "How to get a count on how many words are different 2 strings?", "body": "<p>I want a count on how many words have changed in 2 strings. I built a super simple barbaric way.</p>\n\n<pre><code>before = \"one two three four\"\nafter  = \"one six three four five\"\n\n\nword_count_before = before.scan(/\\w+/).size\nword_count_after  = after.scan(/\\w+/).size\n\nif  word_count_before &gt; word_count_after #if the string got smaller we still want a positive number when comparing the two\n  bigger  = word_count_before\n  smaller = word_count_after\nelse\n  bigger  = word_count_after\n  smaller = word_count_before\nend\n\nword_difference  =  bigger - smaller\n</code></pre>\n\n<p>Problem with this is it only counts how many words were added or taken away. With my method the end result would be 1 word has changed when 2 words have changed ('two' => 'six' &amp; 'five' was added).</p>\n\n<p>I cant find a way to get how many words in a string have changed. But I have seen examples of places that have something similar (well a more complicated version). Stackoverflow edit suggestions feature has a display that shows a before and after and what words have changed, been replaced, or removed on a post. Also when committing to bitbucket or git you can see what has changed in files between commits. I'm just looking for a count on the number of words that have changed but these examples might help.</p>\n\n<p>Whats a way to do this in ruby or RoR?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 4, "last_activity_date": 1457514132, "creation_date": 1457514132, "answer_id": 35887076, "question_id": 35887045, "link": "https://stackoverflow.com/questions/35887045/how-use-one-scope-between-two-based-on-a-condition/35887076#35887076", "title": "how use one scope between two based on a condition?", "body": "<pre><code>@posts = POSTS.where some_condition\n              .include some_thing\n              .public_send(params[:active] == \"true\" ? :active : :inactive)\n              .page\n              .per\n</code></pre>\n\n<p><a href=\"http://ruby-doc.org/core-2.1.0/Object.html#method-i-public_send\" rel=\"nofollow\"><code>Object#public_send</code></a>.</p>\n"}], "owner": {"reputation": 2537, "user_id": 5371321, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ZFyVo.jpg?s=128&g=1", "display_name": "Narasimha Reddy - Geeker", "link": "https://stackoverflow.com/users/5371321/narasimha-reddy-geeker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 35887076, "answer_count": 1, "score": 0, "last_activity_date": 1457514132, "creation_date": 1457514018, "question_id": 35887045, "link": "https://stackoverflow.com/questions/35887045/how-use-one-scope-between-two-based-on-a-condition", "title": "how use one scope between two based on a condition?", "body": "<p>I have a model <code>POSTS</code>. in that i have two scopes in this model <code>active</code>, <code>inactive</code>. i want use one of it <code>PostsController</code> based on <code>params[:active]</code> value. like following</p>\n\n<pre><code>if params[:active] == \"true\"\n @posts = POSTS.where some_condition\n       .include some_thing\n       .active\n       .page\n       .per\nelse\n  @posts = POSTS.where some_condition\n       .include\n       .inactive\n       .page\n       .per\n end\n</code></pre>\n\n<p>is there any better way to do the same thing? i tried many ways to do it. but i couldn't. help me. thanks </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-i18n", "chinese-locale"], "comments": [{"owner": {"reputation": 6433, "user_id": 663028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/19fe7ba7282ef0f36fe76b38ee58e6f4?s=128&d=identicon&r=PG&f=1", "display_name": "prusswan", "link": "https://stackoverflow.com/users/663028/prusswan"}, "edited": false, "score": 0, "creation_date": 1457515294, "post_id": 35886952, "comment_id": 59436266, "body": "You are using unknown locales, not sure if the default backend supports them"}, {"owner": {"reputation": 12227, "user_id": 917187, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/HdPa7.jpg?s=128&g=1", "display_name": "Dave Sag", "link": "https://stackoverflow.com/users/917187/dave-sag"}, "reply_to_user": {"reputation": 6433, "user_id": 663028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/19fe7ba7282ef0f36fe76b38ee58e6f4?s=128&d=identicon&r=PG&f=1", "display_name": "prusswan", "link": "https://stackoverflow.com/users/663028/prusswan"}, "edited": false, "score": 0, "creation_date": 1457516216, "post_id": 35886952, "comment_id": 59436865, "body": "They are all common locale codes and set via <code>available_locales</code>"}, {"owner": {"reputation": 6433, "user_id": 663028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/19fe7ba7282ef0f36fe76b38ee58e6f4?s=128&d=identicon&r=PG&f=1", "display_name": "prusswan", "link": "https://stackoverflow.com/users/663028/prusswan"}, "edited": false, "score": 0, "creation_date": 1457517466, "post_id": 35886952, "comment_id": 59437773, "body": "what do you get from <code>I18n.fallbacks[:&#39;zh-MY&#39;]</code>?"}, {"owner": {"reputation": 12227, "user_id": 917187, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/HdPa7.jpg?s=128&g=1", "display_name": "Dave Sag", "link": "https://stackoverflow.com/users/917187/dave-sag"}, "reply_to_user": {"reputation": 6433, "user_id": 663028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/19fe7ba7282ef0f36fe76b38ee58e6f4?s=128&d=identicon&r=PG&f=1", "display_name": "prusswan", "link": "https://stackoverflow.com/users/663028/prusswan"}, "edited": false, "score": 0, "creation_date": 1457557405, "post_id": 35886952, "comment_id": 59465426, "body": "well that is weird. <code>I18n.fallbacks</code> is <code>{}</code> but <code>I18n.fallbacks[:&#39;zh-MY&#39;]</code> returns <code>[:&quot;zh-MY&quot;, :zh, :&quot;zh-CN&quot;, :en]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 12227, "user_id": 917187, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/HdPa7.jpg?s=128&g=1", "display_name": "Dave Sag", "link": "https://stackoverflow.com/users/917187/dave-sag"}, "is_accepted": true, "score": 6, "last_activity_date": 1457559107, "creation_date": 1457559107, "answer_id": 35903044, "question_id": 35886952, "link": "https://stackoverflow.com/questions/35886952/locale-fallbacks-in-rails-4-not-working/35903044#35903044", "title": "Locale fallbacks in Rails 4 not working", "body": "<p>Don't ask me why but this works, despite what the official docs say.</p>\n\n<pre><code>require File.expand_path('../boot', __FILE__)\n\nrequire 'rails/all'\nrequire \"i18n/backend/fallbacks\"\n\nBundler.require(*Rails.groups)\n\nmodule MyAwesomeApp\n  class Application &lt; Rails::Application\n    # all translations from config/locales/**/*.rb,yml are auto loaded.\n    config.i18n.load_path += Dir[Rails.root.join('config', 'locales', '**', '*.{rb,yml}')]\n\n    # The default locale is :en\n    config.i18n.default_locale = :en\n\n    # See http://guides.rubyonrails.org/i18n.html#localized-views for a\n    # mostly correct discussion of how language codes fall-back.\n    config.i18n.available_locales = [:en, :'zh-CN', :'zh-TW', :'en-SG', :'en-MY', :'zh-MY']\n    config.i18n.fallbacks = {:'zh-MY' =&gt; :'zh-CN'}\n  end\nend\n</code></pre>\n\n<p>Removing the <code>I18n::Backend::Simple.send(:include, I18n::Backend::Fallbacks)</code> and setting the fallbacks via <code>config.i18n.fallbacks = {:'zh-MY' =&gt; :'zh-CN'}</code> rather than <code>I18n.fallbacks.map(:'zh-MY' =&gt; :'zh-CN')</code> makes it all work perfectly.</p>\n\n<p>And now in my controller, at the same breakpoint as discussed in the 3rd question update:</p>\n\n<pre><code>[1] pry(#&lt;ServicesController&gt;)&gt; I18n.fallbacks\n=&gt; {:en=&gt;[:en], :\"zh-MY\"=&gt;[:\"zh-MY\", :zh, :\"zh-CN\", :en]}\n</code></pre>\n\n<p>I hope this is helpful to others.</p>\n"}], "owner": {"reputation": 12227, "user_id": 917187, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/HdPa7.jpg?s=128&g=1", "display_name": "Dave Sag", "link": "https://stackoverflow.com/users/917187/dave-sag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 794, "favorite_count": 0, "accepted_answer_id": 35903044, "answer_count": 1, "score": 4, "last_activity_date": 1457559107, "creation_date": 1457513717, "last_edit_date": 1457558215, "question_id": 35886952, "link": "https://stackoverflow.com/questions/35886952/locale-fallbacks-in-rails-4-not-working", "title": "Locale fallbacks in Rails 4 not working", "body": "<p>I am building a Rails 4 site for a client in Singapore, Malaysia, Taiwan and China.</p>\n\n<p>The locale code for a Chinese speaking Malaysian is <code>zh-MY</code>.</p>\n\n<p>I would like to keep a base <code>zh-CN</code> (Simplified Chinese) set of locale files and for <code>zh-MY</code> to fallback to <code>zh-CN</code>.</p>\n\n<p>Just having a <code>zh</code> is not correct as <code>zh-TW</code> (Traditional Chinese) is what Taiwan uses and there are big differences between that and <code>zh-CN</code>.</p>\n\n<p>So here's my <code>config/application.rb</code> file <a href=\"http://guides.rubyonrails.org/i18n.html#localized-views\" rel=\"nofollow\">as per the Rails Guide</a>.</p>\n\n<pre><code>require File.expand_path('../boot', __FILE__)\n\nrequire 'rails/all'\nrequire \"i18n/backend/fallbacks\"\n\nmodule MyAwesomeApp\n  class Application &lt; Rails::Application\n    I18n::Backend::Simple.send(:include, I18n::Backend::Fallbacks)\n\n    # all translations from config/locales/**/*.rb,yml are auto loaded.\n    config.i18n.load_path += Dir[Rails.root.join('config', 'locales', '**', '*.{rb,yml}')]\n\n    # The default locale is :en\n    config.i18n.default_locale = :en\n\n    # See http://guides.rubyonrails.org/i18n.html#localized-views for a discussion of\n    # how language codes fall-back.\n    config.i18n.available_locales = [:en, :'zh-CN', :'zh-TW', :'en-SG', :'en-MY', :'zh-MY']\n    I18n.fallbacks.map(:'zh-MY' =&gt; :'zh-CN')\n  end\nend\n</code></pre>\n\n<p>But this simply doesn't work.</p>\n\n<p>When I actually set the locale to <code>:zh-MY</code> it does not fall back to <code>:zh-CN</code> but to <code>:en</code></p>\n\n<p>What am I missing?</p>\n\n<p><strong>update</strong>:\nIf I <code>puts \"I18n.fallbacks #{I18n.fallbacks}\"</code> it says <code>I18n.fallbacks {}</code>. Clearly <code>I18n.fallbacks.map</code> is failing.</p>\n\n<p><strong>update</strong>\nAs per the suggestion in the comments I looked at <code>I18n.fallbacks[:'zh-MY']</code> in the very next line after I checked <code>I18n.fallbacks</code> and it returns <code>[:\"zh-MY\", :zh, :\"zh-CN\", :en]</code></p>\n\n<p><strong>update</strong> \nWith a <code>binding.pry</code> in my <code>application controller</code> I have checked the locale etc and observe this:</p>\n\n<pre><code>[1] pry(#&lt;ServicesController&gt;)&gt; I18n.locale\n=&gt; :\"zh-MY\"\n[2] pry(#&lt;ServicesController&gt;)&gt; I18n.fallbacks\n=&gt; {:en=&gt;[:en], :\"zh-MY\"=&gt;[:\"zh-MY\", :zh, :en]}\n</code></pre>\n\n<p>So somewhere between the Rails app starting up and the controller's <code>set_locale</code> method being called, <code>I18n.fallbacks</code> is being reset to the default.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "gis", "kml", "cartodb"], "owner": {"reputation": 2282, "user_id": 1190184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e264bf37d8b3e5b87d9cc991f2baac7d?s=128&d=identicon&r=PG", "display_name": "Milindu Sanoj Kumarage", "link": "https://stackoverflow.com/users/1190184/milindu-sanoj-kumarage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1457513550, "creation_date": 1457513550, "question_id": 35886906, "link": "https://stackoverflow.com/questions/35886906/cartodb-error-on-uploading-kml-files", "title": "CartoDb error on uploading KML files", "body": "<p>I have a locally hosted CartoDB instance and when I upload a KML file, I get the following error. </p>\n\n<blockquote>\n  <p>Unable to load data (2001) </p>\n  \n  <p>We couldn't load data from your file into the database.</p>\n</blockquote>\n\n<p>I check the logs and found this on development.log</p>\n\n<pre><code>2016-03-06 11:52:56 UTC: Filename: /tmp/imports/20160306-8915-1m8eifb/map_12.kml Size (bytes): 769\ntrue: Importing data from /tmp/imports/20160306-8915-1m8eifb/map_12.kml\ntrue: File-based import load\ntrue: Detected encoding UTF-8\ntrue: Using database connection with {:adapter=&gt;\"postgres\", :encoding=&gt;\"unicode\", :host=&gt;\"localhost\", :port=&gt;5432, :database=&gt;\"cartodb_dev_user_45677c0a-c82a-43a8-ae8e-5d9fe453b76a_db\", :username=&gt;\"postgres\", :conn_validator_timeout=&gt;900, :user=&gt;\"development_cartodb_user_6ab70972-9698-46b3-ba19-e821f563084e\"}\nfalse: ogr2ogr call:            OSM_USE_CUSTOM_INDEXING=NO PG_USE_COPY=YES PGCLIENTENCODING=UTF-8  /usr/bin/ogr2ogr2 -f PostgreSQL   PG:\"host=localhost port=5432 user=development_cartodb_user_6ab70972-9698-46b3-ba19-e821f563084e dbname=cartodb_dev_user_45677c0a-c82a-43a8-ae8e-5d9fe453b76a_db password=15c7b5083320ff4bae1e2d4340c298bd73cf923adevelopment_cartodb_user_6ab70972-9698-46b3-ba19-e821f563084e\" -t_srs EPSG:4326  -lco DIM=2 -lco PRECISION=NO /tmp/imports/20160306-8915-1m8eifb/map_12.kml  -nln cdb_importer.importer_f77d7e50e39111e5ab510242ac110002 -nlt PROMOTE_TO_MULTI  \ntrue: ogr2ogr output:          ERROR 4: Unable to open EPSG support file gcs.csv.\nTry setting the GDAL_DATA environment variable to point to the\ndirectory containing EPSG csv files.\nERROR 1: Failed to process SRS definition: EPSG:4326\n\ntrue: ogr2ogr exit code:       256\n2016-03-06 11:52:57 UTC: Ogr2ogr FAILED!\n2016-03-06 11:52:57 UTC: ogr2ogr.exit_code = 256\n2016-03-06 11:52:57 UTC: ogr2ogr.command = OSM_USE_CUSTOM_INDEXING=NO PG_USE_COPY=YES PGCLIENTENCODING=UTF-8  /usr/bin/ogr2ogr2 -f PostgreSQL   PG:\"host=localhost port=5432 user=development_cartodb_user_6ab70972-9698-46b3-ba19-e821f563084e dbname=cartodb_dev_user_45677c0a-c82a-43a8-ae8e-5d9fe453b76a_db password=15c7b5083320ff4bae1e2d4340c298bd73cf923adevelopment_cartodb_user_6ab70972-9698-46b3-ba19-e821f563084e\" -t_srs EPSG:4326  -lco DIM=2 -lco PRECISION=NO /tmp/imports/20160306-8915-1m8eifb/map_12.kml  -nln cdb_importer.importer_f77d7e50e39111e5ab510242ac110002 -nlt PROMOTE_TO_MULTI  \n2016-03-06 11:52:57 UTC: ogr2ogr.command_output = ERROR 4: Unable to open EPSG support file gcs.csv.\nTry setting the GDAL_DATA environment variable to point to the\ndirectory containing EPSG csv files.\nERROR 1: Failed to process SRS definition: EPSG:4326\n\ntrue: Errored importing data from /tmp/imports/20160306-8915-1m8eifb/map_12.kml:\nfalse: CartoDB::Importer2::LoadError: 2016-03-06 11:52:56 UTC: Running on server c55d5fa50056 with PID: 8915\n2016-03-06 11:52:56 UTC: new_importer()\n2016-03-06 11:52:56 UTC: Fetching datasource public_url metadata for item id /cartodb/public/uploads/ebb774d4a1a7d86868c8/map_(12).kml\n2016-03-06 11:52:56 UTC: File will be downloaded from /cartodb/public/uploads/ebb774d4a1a7d86868c8/map_(12).kml\n2016-03-06 11:52:56 UTC: Before importer run\n2016-03-06 11:52:56 UTC: Starting import for /cartodb/public/uploads/ebb774d4a1a7d86868c8/map_(12).kml\n2016-03-06 11:52:56 UTC: Unpacking /cartodb/public/uploads/ebb774d4a1a7d86868c8/map_(12).kml\n2016-03-06 11:52:56 UTC: Filename: /tmp/imports/20160306-8915-1m8eifb/map_12.kml Size (bytes): 769\ntrue: Importing data from /tmp/imports/20160306-8915-1m8eifb/map_12.kml\ntrue: File-based import load\ntrue: Detected encoding UTF-8\ntrue: Using database connection with {:adapter=&gt;\"postgres\", :encoding=&gt;\"unicode\", :host=&gt;\"localhost\", :port=&gt;5432, :database=&gt;\"cartodb_dev_user_45677c0a-c82a-43a8-ae8e-5d9fe453b76a_db\", :username=&gt;\"postgres\", :conn_validator_timeout=&gt;900, :user=&gt;\"development_cartodb_user_6ab70972-9698-46b3-ba19-e821f563084e\"}\nfalse: ogr2ogr call:            OSM_USE_CUSTOM_INDEXING=NO PG_USE_COPY=YES PGCLIENTENCODING=UTF-8  /usr/bin/ogr2ogr2 -f PostgreSQL   PG:\"host=localhost port=5432 user=development_cartodb_user_6ab70972-9698-46b3-ba19-e821f563084e dbname=cartodb_dev_user_45677c0a-c82a-43a8-ae8e-5d9fe453b76a_db password=15c7b5083320ff4bae1e2d4340c298bd73cf923adevelopment_cartodb_user_6ab70972-9698-46b3-ba19-e821f563084e\" -t_srs EPSG:4326  -lco DIM=2 -lco PRECISION=NO /tmp/imports/20160306-8915-1m8eifb/map_12.kml  -nln cdb_importer.importer_f77d7e50e39111e5ab510242ac110002 -nlt PROMOTE_TO_MULTI  \ntrue: ogr2ogr output:          ERROR 4: Unable to open EPSG support file gcs.csv.\nTry setting the GDAL_DATA environment variable to point to the\ndirectory containing EPSG csv files.\nERROR 1: Failed to process SRS definition: EPSG:4326\n\ntrue: ogr2ogr exit code:       256\n2016-03-06 11:52:57 UTC: Ogr2ogr FAILED!\n2016-03-06 11:52:57 UTC: ogr2ogr.exit_code = 256\n2016-03-06 11:52:57 UTC: ogr2ogr.command = OSM_USE_CUSTOM_INDEXING=NO PG_USE_COPY=YES PGCLIENTENCODING=UTF-8  /usr/bin/ogr2ogr2 -f PostgreSQL   PG:\"host=localhost port=5432 user=development_cartodb_user_6ab70972-9698-46b3-ba19-e821f563084e dbname=cartodb_dev_user_45677c0a-c82a-43a8-ae8e-5d9fe453b76a_db password=15c7b5083320ff4bae1e2d4340c298bd73cf923adevelopment_cartodb_user_6ab70972-9698-46b3-ba19-e821f563084e\" -t_srs EPSG:4326  -lco DIM=2 -lco PRECISION=NO /tmp/imports/20160306-8915-1m8eifb/map_12.kml  -nln cdb_importer.importer_f77d7e50e39111e5ab510242ac110002 -nlt PROMOTE_TO_MULTI  \n2016-03-06 11:52:57 UTC: ogr2ogr.command_output = ERROR 4: Unable to open EPSG support file gcs.csv.\nTry setting the GDAL_DATA environment variable to point to the\ndirectory containing EPSG csv files.\nERROR 1: Failed to process SRS definition: EPSG:4326\n\ntrue: Errored importing data from /tmp/imports/20160306-8915-1m8eifb/map_12.kml:\n===LOG END===\ntrue: ----------------------------------------------------\nfalse: [\"/cartodb/services/importer/lib/importer/loader.rb:335:in `check_for_import_errors'\", \"/cartodb/services/importer/lib/importer/loader.rb:268:in `run_ogr2ogr'\", \"/cartodb/services/importer/lib/importer/loader.rb:63:in `block (2 levels) in run'\", \"/cartodb/lib/cartodb/stats/aggregator.rb:97:in `method_missing'\", \"/cartodb/services/importer/lib/importer/loader.rb:62:in `block in run'\", \"/cartodb/lib/cartodb/stats/aggregator.rb:97:in `method_missing'\", \"/cartodb/services/importer/lib/importer/loader.rb:52:in `run'\", \"/cartodb/services/importer/lib/importer/runner.rb:227:in `file_based_loader_run'\", \"/cartodb/services/importer/lib/importer/runner.rb:179:in `import'\", \"/cartodb/services/importer/lib/importer/runner.rb:335:in `execute_import'\", \"/cartodb/services/importer/lib/importer/runner.rb:264:in `block (3 levels) in single_resource_import'\", \"/cartodb/services/importer/lib/importer/runner.rb:258:in `each'\", \"/cartodb/services/importer/lib/importer/runner.rb:258:in `each_with_index'\", \"/cartodb/services/importer/lib/importer/runner.rb:258:in `block (2 levels) in single_resource_import'\", \"/cartodb/lib/cartodb/stats/aggregator.rb:97:in `method_missing'\", \"/cartodb/services/importer/lib/importer/runner.rb:253:in `block in single_resource_import'\", \"/cartodb/lib/cartodb/stats/aggregator.rb:97:in `method_missing'\", \"/cartodb/services/importer/lib/importer/runner.rb:231:in `single_resource_import'\", \"/cartodb/services/importer/lib/importer/runner.rb:97:in `run_import'\", \"/cartodb/services/importer/lib/importer/runner.rb:90:in `block in run'\", \"/cartodb/lib/cartodb/stats/aggregator.rb:97:in `method_missing'\", \"/cartodb/services/importer/lib/importer/runner.rb:89:in `run'\", \"/cartodb/app/connectors/importer.rb:41:in `run'\", \"/cartodb/app/models/data_import.rb:644:in `new_importer'\", \"/cartodb/app/models/data_import.rb:378:in `dispatch'\", \"/cartodb/app/models/data_import.rb:172:in `run_import!'\", \"/cartodb/lib/resque/importer_jobs.rb:9:in `block in perform'\", \"/cartodb/lib/resque/base_job.rb:21:in `call'\", \"/cartodb/lib/resque/base_job.rb:21:in `run_action'\", \"/cartodb/lib/resque/importer_jobs.rb:9:in `perform'\", \"/usr/local/rvm/gems/ruby-2.2.3/gems/resque-1.25.2/lib/resque/job.rb:240:in `block (3 levels) in perform'\", \"/usr/local/rvm/gems/ruby-2.2.3/gems/resque-metrics-0.1.1/lib/resque/metrics.rb:353:in `around_perform_metrics'\", \"/usr/local/rvm/gems/ruby-2.2.3/gems/resque-1.25.2/lib/resque/job.rb:239:in `block (2 levels) in perform'\", \"/usr/local/rvm/gems/ruby-2.2.3/gems/resque-1.25.2/lib/resque/job.rb:247:in `call'\", \"/usr/local/rvm/gems/ruby-2.2.3/gems/resque-1.25.2/lib/resque/job.rb:247:in `perform'\", \"/usr/local/rvm/gems/ruby-2.2.3/gems/resque-1.25.2/lib/resque/worker.rb:250:in `perform'\", \"/usr/local/rvm/gems/ruby-2.2.3/gems/resque-1.25.2/lib/resque/worker.rb:189:in `block in work'\", \"/usr/local/rvm/gems/ruby-2.2.3/gems/resque-1.25.2/lib/resque/worker.rb:166:in `loop'\", \"/usr/local/rvm/gems/ruby-2.2.3/gems/resque-1.25.2/lib/resque/worker.rb:166:in `work'\", \"/usr/local/rvm/gems/ruby-2.2.3/gems/resque-1.25.2/lib/resque/tasks.rb:41:in `block (2 levels) in &lt;top (required)&gt;'\", \"/usr/local/rvm/gems/ruby-2.2.3/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'\", \"/usr/local/rvm/gems/ruby-2.2.3/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'\", \"/usr/local/rvm/gems/ruby-2.2.3/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'\", \"/usr/local/rvm/gems/ruby-2.2.3/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'\", \"/usr/local/rvm/gems/ruby-2.2.3/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'\", \"/usr/local/rvm/rubies/ruby-2.2.3/lib/ruby/2.2.0/monitor.rb:211:in `mon_synchronize'\", \"/usr/local/rvm/gems/ruby-2.2.3/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'\", \"/usr/local/rvm/gems/ruby-2.2.3/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'\", \"/usr/local/rvm/gems/ruby-2.2.3/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'\", \"/usr/local/rvm/gems/ruby-2.2.3/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'\", \"/usr/local/rvm/gems/ruby-2.2.3/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'\", \"/usr/local/rvm/gems/ruby-2.2.3/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'\", \"/usr/local/rvm/gems/ruby-2.2.3/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'\", \"/usr/local/rvm/gems/ruby-2.2.3/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'\", \"/usr/local/rvm/gems/ruby-2.2.3/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'\", \"/usr/local/rvm/gems/ruby-2.2.3/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'\", \"/usr/local/rvm/gems/ruby-2.2.3/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'\", \"/usr/local/rvm/gems/ruby-2.2.3/gems/rake-0.9.2.2/bin/rake:33:in `&lt;top (required)&gt;'\", \"/usr/local/rvm/gems/ruby-2.2.3/bin/rake:23:in `load'\", \"/usr/local/rvm/gems/ruby-2.2.3/bin/rake:23:in `&lt;main&gt;'\", \"/usr/local/rvm/gems/ruby-2.2.3/bin/ruby_executable_hooks:15:in `eval'\", \"/usr/local/rvm/gems/ruby-2.2.3/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\"]\ntrue: ----------------------------------------------------\n2016-03-06 11:52:57 UTC: Proceeding to register\n2016-03-06 11:52:57 UTC: After importer run\n2016-03-06 11:52:57 UTC: After dispatch\n2016-03-06 11:52:57 UTC: ERROR!\n</code></pre>\n\n<blockquote>\n  <p>ERROR 4: Unable to open EPSG support file gcs.csv.\n  Try setting the GDAL_DATA environment variable to point to the\n  directory containing EPSG csv files.\n  ERROR 1: Failed to process SRS definition: EPSG:4326</p>\n</blockquote>\n\n<p>Because I get this error, I manually set <code>GDAL_DATA</code> to the correct  location. Now I can manually issue <code>osg2osg</code> commands without getting the above error( which I couldn't earlier ). But CartoDB still giving the error, I even restarted the VM.</p>\n\n<p>Please help me to get this solved! </p>\n"}, {"tags": ["ruby", "string", "double-quotes"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1457513634, "post_id": 35886616, "comment_id": 59435303, "body": "Your expected result is invalid. Also it looks as if you want to add three quotes. It is not clear how that relates to your claim that you want to put <code>value2</code> in quotes."}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 5, "last_activity_date": 1457513253, "last_edit_date": 1457513253, "creation_date": 1457512789, "answer_id": 35886688, "question_id": 35886616, "link": "https://stackoverflow.com/questions/35886616/adding-quotes-to-a-particular-word-in-string/35886688#35886688", "title": "Adding quotes to a particular word in string", "body": "<pre><code>text = %Q|#{value1} has viewed your \"#{value2}\"|\ntext = \"#{value1} has viewed your \\\"#{value2}\\\"\"\n</code></pre>\n\n<p>or even:</p>\n\n<pre><code>text = \"#{value1} has viewed your\" '\"' \"#{value2}\" '\"'\n</code></pre>\n\n<p><a href=\"http://ruby-doc.org/core-2.1.2/doc/syntax/literals_rdoc.html#label-Strings\" rel=\"nofollow\">More info</a>.</p>\n"}], "owner": {"reputation": 610, "user_id": 4057576, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/e5qu0.jpg?s=128&g=1", "display_name": "Charles Skariah", "link": "https://stackoverflow.com/users/4057576/charles-skariah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 35886688, "answer_count": 1, "score": -1, "last_activity_date": 1457513568, "creation_date": 1457512610, "last_edit_date": 1457513568, "question_id": 35886616, "link": "https://stackoverflow.com/questions/35886616/adding-quotes-to-a-particular-word-in-string", "title": "Adding quotes to a particular word in string", "body": "<p>I have a string that has a value that I want to be in quotes. Following is the text which I currently have:</p>\n\n<pre><code>text = \"#{value1} has viewed your #{value2}\"\n</code></pre>\n\n<p>I want <code>value2</code> to be in quotes. I want:</p>\n\n<pre><code>text = \"\"#{value1} has viewed your \"#{value2}\"\"\n</code></pre>\n\n<p>How can I implement this? Any help will be appreciated.</p>\n"}, {"tags": ["ruby", "ubuntu", "installation", "rvm"], "comments": [{"owner": {"reputation": 35107, "user_id": 1120015, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ID1fe.png?s=128&g=1", "display_name": "Uri Agassi", "link": "https://stackoverflow.com/users/1120015/uri-agassi"}, "edited": false, "score": 0, "creation_date": 1457510421, "post_id": 35885808, "comment_id": 59433591, "body": "try calling <code>sudo apt-get install libffi-dev</code> first"}, {"owner": {"reputation": 4344, "user_id": 4852737, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XcBMb.jpg?s=128&g=1", "display_name": "joshweir", "link": "https://stackoverflow.com/users/4852737/joshweir"}, "reply_to_user": {"reputation": 35107, "user_id": 1120015, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ID1fe.png?s=128&g=1", "display_name": "Uri Agassi", "link": "https://stackoverflow.com/users/1120015/uri-agassi"}, "edited": false, "score": 0, "creation_date": 1457510488, "post_id": 35885808, "comment_id": 59433622, "body": "@UriAgassi have tried to install libffi6 and libffi-dev to no avail. I&#39;ll update my question accordingly."}], "answers": [{"tags": [], "owner": {"reputation": 880, "user_id": 5346366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd939033675b9ac69afa4353a1c7dceb?s=128&d=identicon&r=PG&f=1", "display_name": "dthal", "link": "https://stackoverflow.com/users/5346366/dthal"}, "is_accepted": false, "score": 1, "last_activity_date": 1457514046, "last_edit_date": 1457514046, "creation_date": 1457510506, "answer_id": 35886034, "question_id": 35885808, "link": "https://stackoverflow.com/questions/35885808/install-rvm-rails-unmet-dependencies-libffi-dev-depends-libffi6-ubuntu-14-04/35886034#35886034", "title": "install rvm rails - unmet dependencies libffi-dev depends libffi6 - Ubuntu 14.04.4 LTS", "body": "<p>try to install libffi6.</p>\n\n<blockquote>\n  <p>apt-get install libffi6</p>\n</blockquote>\n\n<p>if it doesn't work try it like this:</p>\n\n<p>add <code>deb http://cz.archive.ubuntu.com/ubuntu trusty main</code> to <code>/etc/apt/sources.list</code></p>\n\n<p>Then:</p>\n\n<pre><code>apt-get update &amp;&amp; apt-get upgrade\napt-get install libffi6\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4344, "user_id": 4852737, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XcBMb.jpg?s=128&g=1", "display_name": "joshweir", "link": "https://stackoverflow.com/users/4852737/joshweir"}, "is_accepted": true, "score": 2, "last_activity_date": 1457575368, "creation_date": 1457575368, "answer_id": 35906265, "question_id": 35885808, "link": "https://stackoverflow.com/questions/35885808/install-rvm-rails-unmet-dependencies-libffi-dev-depends-libffi6-ubuntu-14-04/35906265#35906265", "title": "install rvm rails - unmet dependencies libffi-dev depends libffi6 - Ubuntu 14.04.4 LTS", "body": "<p>I ended up using aptitude and selecting the non-default option to downgrade the libffi6 package to allow libffi-dev to be installed: </p>\n\n<pre><code>sudo aptitude install libffi-dev\n</code></pre>\n"}], "owner": {"reputation": 4344, "user_id": 4852737, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XcBMb.jpg?s=128&g=1", "display_name": "joshweir", "link": "https://stackoverflow.com/users/4852737/joshweir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1284, "favorite_count": 0, "accepted_answer_id": 35906265, "answer_count": 2, "score": 1, "last_activity_date": 1457575368, "creation_date": 1457509677, "last_edit_date": 1457510694, "question_id": 35885808, "link": "https://stackoverflow.com/questions/35885808/install-rvm-rails-unmet-dependencies-libffi-dev-depends-libffi6-ubuntu-14-04", "title": "install rvm rails - unmet dependencies libffi-dev depends libffi6 - Ubuntu 14.04.4 LTS", "body": "<p>Installing rvm rails on Ubuntu 14.04.4: </p>\n\n<pre><code>\\curl -L https://get.rvm.io | bash -s stable --ruby\n</code></pre>\n\n<p>Output shows: </p>\n\n<pre><code>rvm 1.26.11 (latest) by Wayne E. Seguin &lt;wayneeseguin@gmail.com&gt;, Michal Papis &lt;mpapis@gmail.com&gt; [https://rvm.io/]\nSearching for binary rubies, this might take some time.\nFound remote file https://rvm_io.global.ssl.fastly.net/binaries/ubuntu/14.04/x86_64/ruby-2.2.1.tar.bz2\n</code></pre>\n\n<p>finally errors:</p>\n\n<pre><code>The following packages have unmet dependencies:\n libffi-dev : Depends: libffi6 (= 3.1~rc1+r3.0.13-12) but 3.1~rc1+r3.0.13-12ubuntu0.1 is to be installed\n</code></pre>\n\n<p>I have tried:</p>\n\n<pre><code>sudo apt-get update\nsudo apt-get upgrade \n\\curl -L https://get.rvm.io | bash -s stable --ruby\n</code></pre>\n\n<p>Doesnt fix.</p>\n\n<p>My /etc/apt/sources.list looks like this:</p>\n\n<pre><code>deb http://archive.ubuntu.com/ubuntu trusty main multiverse universe restricted\ndeb http://archive.ubuntu.com/ubuntu trusty-security main multiverse universe restricted\n</code></pre>\n\n<p>From what i have searched, I need to download the <code>3.1~rc1+r3.0.13-12ubuntu0.1</code> package and install it manually? If this is the case how would I do this? </p>\n\n<p>Also I'd like to understand why this package is not at the latest version - maybe a dumb question but I don't understand what could be the cause?</p>\n\n<p>Installing these packages using apt-get: </p>\n\n<pre><code>$ sudo apt-get install libffi6\nlibffi6 is already the newest version.\n0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.\n\n$ sudo apt-get install libffi-dev\nSome packages could not be installed. This may mean that you have\nrequested an impossible situation or if you are using the unstable\ndistribution that some required packages have not yet been created\nor been moved out of Incoming.\nThe following information may help to resolve the situation:\n\nThe following packages have unmet dependencies:\n libffi-dev : Depends: libffi6 (= 3.1~rc1+r3.0.13-12) but 3.1~rc1+r3.0.13-12ubuntu0.1 is to be installed\nE: Unable to correct problems, you have held broken packages.    \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1457509265, "post_id": 35885634, "comment_id": 59433019, "body": "Please show us what you have already tried."}, {"owner": {"reputation": 659, "user_id": 5532162, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/6d0122ee54f61df23f1f3acc556eaf59?s=128&d=identicon&r=PG&f=1", "display_name": "user29578", "link": "https://stackoverflow.com/users/5532162/user29578"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1457536881, "post_id": 35885634, "comment_id": 59451777, "body": "i have edited the question to provide a clear view , please have a look and guide"}], "answers": [{"tags": [], "owner": {"reputation": 16234, "user_id": 2202702, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lTGWe.jpg?s=128&g=1", "display_name": "Arslan Ali", "link": "https://stackoverflow.com/users/2202702/arslan-ali"}, "is_accepted": false, "score": 1, "last_activity_date": 1457538415, "last_edit_date": 1457538415, "creation_date": 1457510511, "answer_id": 35886039, "question_id": 35885634, "link": "https://stackoverflow.com/questions/35885634/how-to-change-an-objects-value-across-all-methods-in-rails/35886039#35886039", "title": "How to change an object&#39;s value across all methods in Rails?", "body": "<p>You can override the attribute reader for this case in your model.</p>\n\n<pre><code>class YourModel &lt; ActiveRecord::Base\n  def title\n    if device_is_mobile?\n      \"Title for Mobile\"\n    else\n      \"Default title\"\n    end\n  end\nend\n\nyour_object = YourModel.last\nyour_object.title # it will give you title depending upon which device being used.\n</code></pre>\n\n<p>Since you are modifying the default reader for you model, it will be accessible all across your web application as well as in Rails console.</p>\n"}], "owner": {"reputation": 659, "user_id": 5532162, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/6d0122ee54f61df23f1f3acc556eaf59?s=128&d=identicon&r=PG&f=1", "display_name": "user29578", "link": "https://stackoverflow.com/users/5532162/user29578"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1457543230, "creation_date": 1457509065, "last_edit_date": 1457538228, "question_id": 35885634, "link": "https://stackoverflow.com/questions/35885634/how-to-change-an-objects-value-across-all-methods-in-rails", "title": "How to change an object&#39;s value across all methods in Rails?", "body": "<p>I have a project in which their is entity or class known as research study , which have a field <code>title</code> and <code>mobile title</code>. Now I am using a gem to detect the visitor's device (desktop, mobile, etc). Now, what I want is for desktops it should always return 'title' and for all other devices, it should return 'mobile title'.</p>\n\n<p>How can I achieve this so that I don't need to change all my methods in my application wherever I'm returning research study? Is there any solution so that if I change this at single place and it should reflect in all methods?</p>\n\n<p>Edited : Since this have lot of downvotes, I would like to clear up what I need. Here is my class:</p>\n\n<pre><code>        class ResearchStudy &lt; ActiveRecord::Base\n         attr_accessible \\\n          :title,\n          :mobile_title\n           ....\n         end\n</code></pre>\n\n<p>And here is my controller where the method is to get all studies and a filter to get the device type like this:</p>\n\n<pre><code>class Api::ResearchStudiesController &lt; ApplicationController\n\n    before_filter :check_agent\n\n    def check_agent\n        @ua = AgentOrange::UserAgent.new(request.user_agent)\n    end\n\n\n def get_all_studies\n    .....\n  answer_status_for_user() // before returning studies i modify the title according to device type\n     render json: { studies: @studies.to_json(:include =&gt; [:research_paper]) }\n end\n\ndef answer_status_for_user\nif @ua.is_mobile?\n            @studies.each do |study|\n                study.title = study.mobile_title\n            end\n        end\nend\n</code></pre>\n\n<p>Now the issue is that in <code>get_all_studies</code> I have various methods in application, since it is pretty big application, so sometimes the study does not go in response (<code>@studies</code>) like above. What I want is something like whenever we load the studies I want to apply a some changes (may be in constructor or something) which return the <code>mobile_title</code> instead of <code>title</code>, something like in <code>ResearchStudy</code> class itself or any other solution, but I am not sure how.</p>\n"}, {"tags": ["ruby", "performance", "internals"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1457507537, "post_id": 35885146, "comment_id": 59432208, "body": "The overhead of yielding each individual value?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1457508636, "post_id": 35885146, "comment_id": 59432710, "body": "<code>inject(:+)</code> will do, and should be faster than <code>inject(&amp;:+)</code>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1457509007, "post_id": 35885146, "comment_id": 59432886, "body": "@SergioTulentsev What do you mean? Both methods are yielding individual values."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1457509052, "post_id": 35885146, "comment_id": 59432911, "body": "@mudasobwa: ah, indeed."}], "answers": [{"comments": [{"owner": {"reputation": 329, "user_id": 652703, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/293b21f6d52837409f5a529084dbe86e?s=128&d=identicon&r=PG", "display_name": "bcc32", "link": "https://stackoverflow.com/users/652703/bcc32"}, "edited": false, "score": 0, "creation_date": 1457540810, "post_id": 35885542, "comment_id": 59454861, "body": "Right, but Hash#values must iterate over the hash in order to generate the array result, so its cost would be that of generating the array (thereby iterating over the hash) plus iterating over the array."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 329, "user_id": 652703, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/293b21f6d52837409f5a529084dbe86e?s=128&d=identicon&r=PG", "display_name": "bcc32", "link": "https://stackoverflow.com/users/652703/bcc32"}, "edited": false, "score": 0, "creation_date": 1457541644, "post_id": 35885542, "comment_id": 59455453, "body": "I am not sure, but I kinda saw that hash is stored in the memory as an array with keys pointing to this array\u2019s elements memory addresses."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 329, "user_id": 652703, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/293b21f6d52837409f5a529084dbe86e?s=128&d=identicon&r=PG", "display_name": "bcc32", "link": "https://stackoverflow.com/users/652703/bcc32"}, "edited": false, "score": 0, "creation_date": 1457543796, "post_id": 35885542, "comment_id": 59456998, "body": "The latter does not explain why we can\u2019t use the fast iterator for <code>each_value</code> when needed. I admire the question: it is rather great and probably should be addressed to Matz (stated as \u201cwhy we can\u2019t use the fastest iterator always?\u201d.)"}, {"owner": {"reputation": 4866, "user_id": 6603195, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nZGPkfcc0EE/AAAAAAAAAAI/AAAAAAAAAoE/op-TBiFRNzg/photo.jpg?sz=128", "display_name": "Marcin Ko\u0142odziej", "link": "https://stackoverflow.com/users/6603195/marcin-ko%c5%82odziej"}, "edited": false, "score": 0, "creation_date": 1543538963, "post_id": 35885542, "comment_id": 93965925, "body": "There is definitely room for improvement in Ruby then, but the answer is right. It is faster to iterate an Array than a Hash and apparently having to get array of values (source <a href=\"https://ruby-doc.org/core-2.5.3/Hash.html#method-i-values\" rel=\"nofollow noreferrer\">here</a>) does not offset the performance difference."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1457508706, "creation_date": 1457508706, "answer_id": 35885542, "question_id": 35885146, "link": "https://stackoverflow.com/questions/35885146/why-is-rubys-hashvalues-faster-than-hasheach-value-in-certain-cases/35885542#35885542", "title": "Why is Ruby&#39;s Hash#values faster than Hash#each_value in certain cases?", "body": "<p>Iterating <code>Hash</code> is slower, than iterating <code>Array</code>:</p>\n\n<pre><code> \u25b6 Benchmark.bm do |x|\n \u25b7   x.report do\n \u25b7     n.times do\n \u25b7       {a: 1, b: 2, c: 3, d: 4, e: 5}.inject(1) { |memo, (_, v)| memo * v }\n \u25b7     end\n \u25b7   end\n \u25b7   x.report do\n \u25b7     n.times do\n \u25b7       [1, 2, 3, 4, 5].inject(1) { |memo, v| memo * v }\n \u25b7     end\n \u25b7   end\n \u25b7 end\n\n #\u21d2      user     system      total        real\n #\u21d2  0.700000   0.010000   0.710000 (  0.712821)\n #\u21d2  0.340000   0.000000   0.340000 (  0.349040)\n</code></pre>\n\n<p>By calling <code>each_value</code> one in fact iterates the original <code>Hash</code> instance, while by calling <code>values.each</code> the iteration is being done on the <code>Array</code> instance (<code>values</code>.)</p>\n\n<p>To answer the question \u201cwhy is that\u201d one should probably take a look at <a href=\"http://rxr.whitequark.org/mri/source/hash.c#226\" rel=\"nofollow\"><code>rb_hash_foreach</code></a> and <code>rb_array_foreach</code> native implementation for different ruby versions.</p>\n"}, {"comments": [{"owner": {"reputation": 329, "user_id": 652703, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/293b21f6d52837409f5a529084dbe86e?s=128&d=identicon&r=PG", "display_name": "bcc32", "link": "https://stackoverflow.com/users/652703/bcc32"}, "edited": false, "score": 0, "creation_date": 1457540873, "post_id": 35894715, "comment_id": 59454897, "body": "&gt; Algorithmical complexity is what counts.  True, but the point of the question was Ruby internals, not algorithm design."}, {"owner": {"reputation": 63, "user_id": 5690694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fe4186b3eb968f3f3662b1e146527bc?s=128&d=identicon&r=PG", "display_name": "dunrix", "link": "https://stackoverflow.com/users/5690694/dunrix"}, "reply_to_user": {"reputation": 329, "user_id": 652703, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/293b21f6d52837409f5a529084dbe86e?s=128&d=identicon&r=PG", "display_name": "bcc32", "link": "https://stackoverflow.com/users/652703/bcc32"}, "edited": false, "score": 0, "creation_date": 1457542430, "post_id": 35894715, "comment_id": 59456004, "body": "@bcc32 So did satisfied the answer your curiosity ? <code>Hash#values</code> is <i>specialized</i> method, expected to perform better then <i>generic</i> enumerator and fetching its values subsequently. <code>Enumerable#inject</code> can&#39;t magically backward change how the target object is created, unless by some sophisticated optimizer not present in any Ruby implementation AFAIK. Btw. in JRuby 9.0.5.0 <i>&quot;summing each_value&quot;</i> example is only 1.1x slower."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1457543580, "post_id": 35894715, "comment_id": 59456830, "body": "The statement \u201c<code>Hash#values</code> is <i>specialized</i> method\u201d is kinda bad answer on the question \u201cwhat is <i>specialized</i> in <code>Hash#values</code> method\u201d :)"}, {"owner": {"reputation": 63, "user_id": 5690694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fe4186b3eb968f3f3662b1e146527bc?s=128&d=identicon&r=PG", "display_name": "dunrix", "link": "https://stackoverflow.com/users/5690694/dunrix"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1457559834, "post_id": 35894715, "comment_id": 59466845, "body": "@mudasobwa Huh ? I see no cited question from the OP. By <i>specialized</i> was meant creation of a container and storing all results in one step/call, which can be optimized more straightforward then producing a generator, from which results are yielded subsequently."}], "tags": [], "owner": {"reputation": 63, "user_id": 5690694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fe4186b3eb968f3f3662b1e146527bc?s=128&d=identicon&r=PG", "display_name": "dunrix", "link": "https://stackoverflow.com/users/5690694/dunrix"}, "is_accepted": false, "score": 0, "last_activity_date": 1457534632, "creation_date": 1457534632, "answer_id": 35894715, "question_id": 35885146, "link": "https://stackoverflow.com/questions/35885146/why-is-rubys-hashvalues-faster-than-hasheach-value-in-certain-cases/35894715#35894715", "title": "Why is Ruby&#39;s Hash#values faster than Hash#each_value in certain cases?", "body": "<p>I'd say the reason is optimization of <a href=\"http://rxr.whitequark.org/mri/source/hash.c#1677\" rel=\"nofollow\">Hash#values</a> method implementation.</p>\n\n<p>In your 1st benchmark you are comparing apples (enumerator creation) with oranges (array creation). It is to be expected, building whole array is more costly then producing a single generator with access to final values requiring additional calls.</p>\n\n<p>If you write equivalent examples, results would be different:</p>\n\n<pre><code>  some_hash =  ('aa'..'zz').each_with_index.to_h\n\n  Benchmark.ips do |x|\n    x.report \"array from map\" do\n      some_hash.map &amp;:last\n    end\n    x.report \"array from each_value\" do\n      some_hash.each_value.to_a\n    end\n    x.report \"array from values\" do\n      some_hash.values\n    end\n    x.compare!\n  end\n\n  Comparison:\n        array from values:   171143.8 i/s\n    array from each_value:    15195.8 i/s - 11.26x slower\n           array from map:     6040.9 i/s - 28.33x slower\n</code></pre>\n\n<p>Nothing too surprising, just be aware this is an implementation specific detail you shouldn't rely on in most cases. Algorithmical complexity is what counts.</p>\n"}], "owner": {"reputation": 329, "user_id": 652703, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/293b21f6d52837409f5a529084dbe86e?s=128&d=identicon&r=PG", "display_name": "bcc32", "link": "https://stackoverflow.com/users/652703/bcc32"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 491, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1457534632, "creation_date": 1457507276, "last_edit_date": 1457507962, "question_id": 35885146, "link": "https://stackoverflow.com/questions/35885146/why-is-rubys-hashvalues-faster-than-hasheach-value-in-certain-cases", "title": "Why is Ruby&#39;s Hash#values faster than Hash#each_value in certain cases?", "body": "<p>When I apply <code>each_value</code> to a hash, it takes significantly longer than when I use <code>values</code>, even though <code>each_value</code> ostensibly avoids allocating and copying an array.</p>\n\n<p>I wrote a simple comparison:</p>\n\n<pre><code>require 'benchmark/ips'\n\nsome_hash = File.open('with_an.dat') { |f| Marshal.load f }\n\nBenchmark.ips do |x|\n  x.report \"calling each_value\" do\n    some_hash.each_value\n  end\n  x.report \"calling values\" do\n    some_hash.values\n  end\n  x.compare!\nend\n\nBenchmark.ips do |x|\n  x.report \"summing each_value\" do\n    some_hash.each_value.inject &amp;:+\n  end\n  x.report \"summing values\" do\n    some_hash.values.inject &amp;:+\n  end\n  x.compare!\nend\n</code></pre>\n\n<p>And here were the results:</p>\n\n<pre><code>Calculating -------------------------------------\n  calling each_value    58.166k i/100ms\n      calling values     2.000  i/100ms\n-------------------------------------------------\n  calling each_value      1.312M (\u00b140.7%) i/s -      5.468M\n      calling values     29.423  (\u00b110.2%) i/s -    146.000 \n\nComparison:\n  calling each_value:  1312156.6 i/s\n      calling values:       29.4 i/s - 44596.28x slower\n\nCalculating -------------------------------------\n  summing each_value     1.000  i/100ms\n      summing values     1.000  i/100ms\n-------------------------------------------------\n  summing each_value      2.107  (\u00b1 0.0%) i/s -     11.000 \n      summing values      8.002  (\u00b112.5%) i/s -     40.000 \n\nComparison:\n      summing values:        8.0 i/s\n  summing each_value:        2.1 i/s - 3.80x slower\n</code></pre>\n\n<p>As expected, just calling each of the methods, <code>each_value</code> was much faster, since it only has to create an <code>Enumerator</code>, and doesn't actually traverse the hash table.  Meanwhile, <code>values</code> has to copy the entire array.</p>\n\n<p>Yet, when I add the values up, it appears that the <code>each_value</code> approach is 3x <em>slower</em> than the <code>values</code> approach.  Why would that be?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "amazon-s3", "spree"], "answers": [{"tags": [], "owner": {"reputation": 381, "user_id": 6125536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77be9fabae9cd5b0d2e2b51e8e493b15?s=128&d=identicon&r=PG", "display_name": "Priyank Gupta", "link": "https://stackoverflow.com/users/6125536/priyank-gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1459286221, "creation_date": 1459286221, "answer_id": 36295240, "question_id": 35884450, "link": "https://stackoverflow.com/questions/35884450/set-up-aws-s3-for-image-uploads-with-spree/36295240#36295240", "title": "Set up aws s3 for image uploads with spree", "body": "<p>Double check if you are setting <code>S3_BUCKET_NAME</code> in your environment.</p>\n\n<p>Then your spree.rb should look like this</p>\n\n<pre><code>Spree.config do |config|\nend\nSpree.user_class = \"Spree::User\"\nattachment_config = {\n    s3_credentials: {\n        access_key_id: ENV['AWS_ACCESS_KEY_ID'],\n        secret_access_key: ENV['AWS_SECRET_ACCESS_KEY'],\n        bucket: ENV['S3_BUCKET_NAME']\n    },\n    storage:        :s3,\n    s3_headers:     { \"Cache-Control\" =&gt; \"max-age=31557600\" },\n    s3_protocol:    \"https\",\n    styles: {\n        mini:     \"48x48&gt;\",\n        small:    \"100x100&gt;\",\n        product:  \"240x240&gt;\",\n        large:    \"600x600&gt;\"\n    },\n    path:           \"/:class/:id/:style/:basename.:extension\",\n    default_url:    \"/:class/:id/:style/:basename.:extension\",\n    default_style:  \"product\"\n}\nattachment_config.each do |key, value|\n    Spree::Image.attachment_definitions[:attachment][key.to_sym] = value\nend\n</code></pre>\n"}], "owner": {"reputation": 2073, "user_id": 2615428, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/50118dc915d8e41676b9a773217f6cab?s=128&d=identicon&r=PG", "display_name": "Suraj", "link": "https://stackoverflow.com/users/2615428/suraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 364, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459286221, "creation_date": 1457504643, "question_id": 35884450, "link": "https://stackoverflow.com/questions/35884450/set-up-aws-s3-for-image-uploads-with-spree", "title": "Set up aws s3 for image uploads with spree", "body": "<p>I am trying to use aws s3 in my spree rails app.</p>\n\n<p>Here's how I am trying to set it up.</p>\n\n<p>I have <code>gem 'aws-sdk', '&lt; 2.0'</code> in my <code>Gemfile</code>.</p>\n\n<p>Below is my <code>spree.rb</code> under initializer.</p>\n\n<pre><code> Spree.config do |config|\n end\n\nSpree.user_class = \"Spree::User\"\n attachment_config = {\n s3_credentials: {\n access_key_id:     ENV['AWS_ACCESS_KEY_ID'],\n secret_access_key: ENV['AWS_SECRET_ACCESS_KEY'],\n bucket:            ENV['S3_BUCKET_NAME']\n},\nstorage:        :s3,\ns3_headers:     { \"Cache-Control\" =&gt; \"max-age=31557600\" },\ns3_protocol:    \"https\",\nbucket:         ENV['S3_BUCKET_NAME'],\nurl:            \":s3_domain_url\",\n\nstyles: {\n  mini:     \"48x48&gt;\",\n  small:    \"100x100&gt;\",\n  product:  \"240x240&gt;\",\n  large:    \"600x600&gt;\"\n},\n\npath:           \"/:class/:id/:style/:basename.:extension\",\ndefault_url:    \"/:class/:id/:style/:basename.:extension\",\ndefault_style:  \"product\"\n}\n\nattachment_config.each do |key, value|\n  Spree::Image.attachment_definitions[:attachment][key.to_sym] = value\nend\n</code></pre>\n\n<p>When I am running this, I am getting </p>\n\n<blockquote>\n  <p>ArgumentError in Spree::Home#index</p>\n</blockquote>\n\n<pre><code>missing required :bucket option\n</code></pre>\n\n<p>I am not sure what's missing, Can someone point out ?</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1457503869, "post_id": 35884090, "comment_id": 59430681, "body": "What is <code>n</code>? It is never used in the above code."}, {"owner": {"reputation": 5738, "user_id": 2200417, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/m5oZi.jpg?s=128&g=1", "display_name": "Prabhakar Undurthi", "link": "https://stackoverflow.com/users/2200417/prabhakar-undurthi"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1457504011, "post_id": 35884090, "comment_id": 59430745, "body": "<code>n</code> is just used to know many elements does the array contain. However, I didn&#39;t use <code>n</code> in the above code. Maybe I should remove that code.!"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1457504202, "post_id": 35884090, "comment_id": 59430828, "body": "I don&#39;t have time to post an answer, but here&#39;s a hint: two Ruby core classes have a <code>reverse</code> method, <code>Array</code> and <code>String</code>. You are using the latter one."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1457504402, "post_id": 35884090, "comment_id": 59430882, "body": "<code>puts gets.strip.split(&#39; &#39;).map(&amp;:to_i).reverse.inspect</code>"}, {"owner": {"reputation": 5738, "user_id": 2200417, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/m5oZi.jpg?s=128&g=1", "display_name": "Prabhakar Undurthi", "link": "https://stackoverflow.com/users/2200417/prabhakar-undurthi"}, "edited": false, "score": 0, "creation_date": 1457504449, "post_id": 35884090, "comment_id": 59430898, "body": "Thanks for the hit. Am getting the same output <code>[34, 54,76]  =&gt; [67, 45, 43]&#39; with both </code>reverse` methods <code>reverse_each</code> and <code>reverse</code> which is not I want."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1457505250, "post_id": 35884090, "comment_id": 59431215, "body": "The first expression is invalid."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1457507824, "post_id": 35884090, "comment_id": 59432367, "body": "<code>gets.split.reverse.join(&#39; &#39;)</code> seems to do the job."}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1457504505, "post_id": 35884378, "comment_id": 59430918, "body": "Please next time use \u201cedit\u201d to modify/update/correct the already posted answer, not just delete the old one and post the new version as a separate answer. Plus, the reference to <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-reverse\" rel=\"nofollow noreferrer\"><code>Array#reverse</code></a> was helpful."}, {"owner": {"reputation": 2212, "user_id": 4803039, "user_type": "registered", "accept_rate": 96, "profile_image": "https://lh3.googleusercontent.com/-MmbDSCFLpd8/AAAAAAAAAAI/AAAAAAAAADg/2jruEOH8FM0/photo.jpg?sz=128", "display_name": "philip yoo", "link": "https://stackoverflow.com/users/4803039/philip-yoo"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1457504578, "post_id": 35884378, "comment_id": 59430949, "body": "@mudasobwa Sorry about that, will definitely do that next time"}, {"owner": {"reputation": 5738, "user_id": 2200417, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/m5oZi.jpg?s=128&g=1", "display_name": "Prabhakar Undurthi", "link": "https://stackoverflow.com/users/2200417/prabhakar-undurthi"}, "edited": false, "score": 0, "creation_date": 1457504758, "post_id": 35884378, "comment_id": 59431029, "body": "@philip yoo, Perfect solution. Thank you."}, {"owner": {"reputation": 2212, "user_id": 4803039, "user_type": "registered", "accept_rate": 96, "profile_image": "https://lh3.googleusercontent.com/-MmbDSCFLpd8/AAAAAAAAAAI/AAAAAAAAADg/2jruEOH8FM0/photo.jpg?sz=128", "display_name": "philip yoo", "link": "https://stackoverflow.com/users/4803039/philip-yoo"}, "reply_to_user": {"reputation": 5738, "user_id": 2200417, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/m5oZi.jpg?s=128&g=1", "display_name": "Prabhakar Undurthi", "link": "https://stackoverflow.com/users/2200417/prabhakar-undurthi"}, "edited": false, "score": 0, "creation_date": 1457504829, "post_id": 35884378, "comment_id": 59431058, "body": "@Packer hey check out Scott&#39;s solution as well. I realized you don&#39;t need to change them to <code>Integer</code> type, but rather just split, reverse, then join again. :)"}], "tags": [], "owner": {"reputation": 2212, "user_id": 4803039, "user_type": "registered", "accept_rate": 96, "profile_image": "https://lh3.googleusercontent.com/-MmbDSCFLpd8/AAAAAAAAAAI/AAAAAAAAADg/2jruEOH8FM0/photo.jpg?sz=128", "display_name": "philip yoo", "link": "https://stackoverflow.com/users/4803039/philip-yoo"}, "is_accepted": false, "score": 4, "last_activity_date": 1457507403, "last_edit_date": 1457507403, "creation_date": 1457504402, "answer_id": 35884378, "question_id": 35884090, "link": "https://stackoverflow.com/questions/35884090/printing-array-of-multi-digit-elements-in-reverse-order-in-ruby/35884378#35884378", "title": "Printing array of multi-digit elements in reverse order in ruby", "body": "<p>Input: <code>[8797, 7347, 9374 ]</code></p>\n\n<p>Output: <code>\"9374 7374 8797\"</code></p>\n\n<pre><code>arr = gets.chomp\narr = arr.split(' ').map(&amp;:to_i)\nx = arr.reverse.join(' ')\nprint x\n</code></pre>\n\n<p>Use <code>reverse</code> and <code>join</code> chained and it should return a <code>String</code> type that joined your reversed array.</p>\n"}, {"comments": [{"owner": {"reputation": 5738, "user_id": 2200417, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/m5oZi.jpg?s=128&g=1", "display_name": "Prabhakar Undurthi", "link": "https://stackoverflow.com/users/2200417/prabhakar-undurthi"}, "edited": false, "score": 0, "creation_date": 1457504961, "post_id": 35884424, "comment_id": 59431111, "body": "#Optmized code. This worked like a charm!. Thank you."}, {"owner": {"reputation": 5738, "user_id": 2200417, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/m5oZi.jpg?s=128&g=1", "display_name": "Prabhakar Undurthi", "link": "https://stackoverflow.com/users/2200417/prabhakar-undurthi"}, "edited": false, "score": 0, "creation_date": 1458024077, "post_id": 35884424, "comment_id": 59660470, "body": "shouldn&#39;t it be <code>9 876 54 3 2 1</code> ? instead of your posted output  <code>9 678 45 3 2 1</code>"}, {"owner": {"reputation": 1141, "user_id": 3251463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hxssB.png?s=128&g=1", "display_name": "Scott Schupbach", "link": "https://stackoverflow.com/users/3251463/scott-schupbach"}, "reply_to_user": {"reputation": 5738, "user_id": 2200417, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/m5oZi.jpg?s=128&g=1", "display_name": "Prabhakar Undurthi", "link": "https://stackoverflow.com/users/2200417/prabhakar-undurthi"}, "edited": false, "score": 0, "creation_date": 1458024827, "post_id": 35884424, "comment_id": 59660800, "body": "No. It would be <code>9 876 54 3 2 1</code> if you reversed the string. In my solution, <code>reverse</code> is being called on the output of <code>split</code> which is an array. This reverses the order of the elements in the array, but not the content of the elements themselves."}], "tags": [], "owner": {"reputation": 1141, "user_id": 3251463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hxssB.png?s=128&g=1", "display_name": "Scott Schupbach", "link": "https://stackoverflow.com/users/3251463/scott-schupbach"}, "is_accepted": true, "score": 5, "last_activity_date": 1457504551, "creation_date": 1457504551, "answer_id": 35884424, "question_id": 35884090, "link": "https://stackoverflow.com/questions/35884090/printing-array-of-multi-digit-elements-in-reverse-order-in-ruby/35884424#35884424", "title": "Printing array of multi-digit elements in reverse order in ruby", "body": "<p>If you like one-liners:</p>\n\n<pre><code>gets.strip.split(' ').reverse.join(' ')\n</code></pre>\n\n<p>This will take the input <code>1 2 3 45 678 9</code> and convert it to <code>\"9 678 45 3 2 1\"</code> </p>\n"}], "owner": {"reputation": 5738, "user_id": 2200417, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/m5oZi.jpg?s=128&g=1", "display_name": "Prabhakar Undurthi", "link": "https://stackoverflow.com/users/2200417/prabhakar-undurthi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 325, "favorite_count": 0, "accepted_answer_id": 35884424, "answer_count": 2, "score": 0, "last_activity_date": 1457507403, "creation_date": 1457503252, "last_edit_date": 1457504052, "question_id": 35884090, "link": "https://stackoverflow.com/questions/35884090/printing-array-of-multi-digit-elements-in-reverse-order-in-ruby", "title": "Printing array of multi-digit elements in reverse order in ruby", "body": "<p>How to print an array of elements in reverse order not just single digit number but also multi-digit numbers.</p>\n\n<pre><code>[2, 5, 6 7]\n</code></pre>\n\n<p>It should print the array elements in reverse order as <code>7 6 5 2</code> by following a space for each number.</p>\n\n<p>I  already wrote the code for this.</p>\n\n<pre><code>   puts \"Enter the array elements\"\n    arr = gets.strip\n    arr = arr.split(' ').map(&amp;:to_i)\n    x = arr.reverse_each {|f| }\n    z = x.join(\" \")\n    print z.reverse\n</code></pre>\n\n<p>That is cool with single digit numbers, how can I reverse the multi-digit numbers in an array of inputs given by the user input like:</p>\n\n<pre><code>[45, 76, 87 ] # this should reverse the array as `87 76 45`\n\n\n[556, 674, 878 ] # this should reverse the array as `878 674 556`\n[8797, 7347, 9374 ] # this should reverse the array as `9374 7374 8797`\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "heroku", "deployment"], "answers": [{"tags": [], "owner": {"reputation": 3002, "user_id": 976498, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CSZVp.jpg?s=128&g=1", "display_name": "LHH", "link": "https://stackoverflow.com/users/976498/lhh"}, "is_accepted": true, "score": 0, "last_activity_date": 1457505244, "creation_date": 1457505244, "answer_id": 35884586, "question_id": 35884084, "link": "https://stackoverflow.com/questions/35884084/why-deploy-my-rails-app-on-heroku-does-not-work/35884586#35884586", "title": "Why deploy my rails app on heroku does not work?", "body": "<p>First delete the current remote heroku reference(i.e pointing to bitbucket remote ) with - </p>\n\n<pre><code>git remote rm heroku\n</code></pre>\n\n<p>Add then add heroku remote to your repo -  </p>\n\n<pre><code>git remote add heroku git@heroku.com:aqueous-plateau-17182.git\n</code></pre>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 3870, "user_id": 1613902, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/LX9Wg.jpg?s=128&g=1", "display_name": "Pracede", "link": "https://stackoverflow.com/users/1613902/pracede"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 35884586, "answer_count": 1, "score": 0, "last_activity_date": 1457505244, "creation_date": 1457503228, "question_id": 35884084, "link": "https://stackoverflow.com/questions/35884084/why-deploy-my-rails-app-on-heroku-does-not-work", "title": "Why deploy my rails app on heroku does not work?", "body": "<p>I am new on Ruby/Rails application development. I already love Ruby/Rails because it's easy to learn. I've built an Rails application and i try to deploy on Heroku.\nWhen i type :</p>\n\n<pre><code>heroku create\nCreating app... done, stack is cedar-14\nhttps://aqueous-plateau-17182.herokuapp.com/ | https://git.heroku.com/aqueous-plateau-17182.git\n</code></pre>\n\n<p>I don't have the following message :</p>\n\n<pre><code>Git remote heroku added\n</code></pre>\n\n<p>I think there is a problem with my remote :</p>\n\n<pre><code>git remote -v\nheroku  git@bitbucket.org:pracede/hubapp.git (fetch)\nheroku  git@bitbucket.org:pracede/hubapp.git (push)\norigin  git@bitbucket.org:pracede/hubapp.git (fetch)\norigin  git@bitbucket.org:pracede/hubapp.git (push)\n\ngit config --list | grep heroku\nremote.heroku.url=git@bitbucket.org:pracede/hubapp.git\nremote.heroku.fetch=+refs/heads/*:refs/remotes/heroku/*\n</code></pre>\n\n<p>1.There are remote but heroku refers to bitbucket. Is it correct ?\nIf no correct, how to do, please ?</p>\n\n<ol start=\"2\">\n<li><p>I cannot deploy. I have the following message : </p>\n\n<p>git push heroku master\nEverything up-to-date</p></li>\n</ol>\n\n<p>My rails application is not alive. Is someone could explain me, please ?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "web-applications", "passwords", "hanami"], "answers": [{"comments": [{"owner": {"reputation": 184, "user_id": 3800524, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7478fdb5e644d85e0875f8200b33a279?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastjan Hribar", "link": "https://stackoverflow.com/users/3800524/sebastjan-hribar"}, "edited": false, "score": 0, "creation_date": 1457505429, "post_id": 35884528, "comment_id": 59431289, "body": "Thank you for the info, but the users will not &quot;sign up&quot;, just &quot;sign in&quot; and I need to know if the user creation can be automated by the admin, especially setting the initial passwords for the users. Please let me know if my question above needs clarification or more detailed description."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 184, "user_id": 3800524, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7478fdb5e644d85e0875f8200b33a279?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastjan Hribar", "link": "https://stackoverflow.com/users/3800524/sebastjan-hribar"}, "edited": false, "score": 0, "creation_date": 1457505494, "post_id": 35884528, "comment_id": 59431313, "body": "I&#39;m suggesting you send out a series of emails to the users with links like that when the admin creates those accounts. It&#39;s what most systems do when you &quot;invite&quot; someone to the system."}, {"owner": {"reputation": 184, "user_id": 3800524, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7478fdb5e644d85e0875f8200b33a279?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastjan Hribar", "link": "https://stackoverflow.com/users/3800524/sebastjan-hribar"}, "edited": false, "score": 0, "creation_date": 1457509170, "post_id": 35884528, "comment_id": 59432969, "body": "I see, right. What I&#39;d like to try is to setup a functionality for the admin (after the basic data has been imported from the csv) like you suggest, only to also automate the initial password generation.  So lookup all the users and have random password generated and then update the users with these passwords encrypted and also send the users the passwords, all in one go. Of course they would have to change this initial password.  Do you think it&#39;s feasible or are there any obvious pitfalls with this?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 184, "user_id": 3800524, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7478fdb5e644d85e0875f8200b33a279?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastjan Hribar", "link": "https://stackoverflow.com/users/3800524/sebastjan-hribar"}, "edited": false, "score": 0, "creation_date": 1457543678, "post_id": 35884528, "comment_id": 59456913, "body": "Calling them &quot;passwords&quot; is a mistake here. Only the user should know their password, and generating one for them is going to lead to trouble. If you need something secret to initiate the process, call it a &quot;registration code&quot; which is random enough to be unguessable. You can leave these plain-text in the database, which distinguishes them from passwords."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 1, "last_activity_date": 1457504974, "creation_date": 1457504974, "answer_id": 35884528, "question_id": 35883793, "link": "https://stackoverflow.com/questions/35883793/generate-passwords-for-all-users-for-a-web-app/35884528#35884528", "title": "generate passwords for all users for a web app", "body": "<p>The best practice here is to have both a password hash field, and a signup confirmation token field that are different. The signup token is generated as a random string, something sufficiently unguessable, and is sent to the user that's created. Typically this is done via email, but it could be anything that allows you to send a link.</p>\n\n<p>These links would look something like:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>http://example.com/confirm/IVfltNx18MEgU57pvtRGg2lx\n</code></pre>\n\n<p>That last bit is your confirmation token.</p>\n\n<p>You look up any user record with that confirmation token and then ask that user for their initial password. That's what you save in the database. At that point it's your call as to disabling this URL permanently. Sometimes this is important for security, and sometimes it's extremely inconvenient as users will complain their signup link no longer works. You'll have to evaluate the risks and benefits of keeping it active.</p>\n\n<p>Generally this signup system can be coupled with or an extension of the \"reset password\" feature you'll need anyway. For invitations it's a good idea to explain what the user is setting a password for when creating their password the first time, you may need to explain what the service is so they're not confused, whereas with a reset request they already know what to expect.</p>\n"}], "owner": {"reputation": 184, "user_id": 3800524, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7478fdb5e644d85e0875f8200b33a279?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastjan Hribar", "link": "https://stackoverflow.com/users/3800524/sebastjan-hribar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "accepted_answer_id": 35884528, "answer_count": 1, "score": 1, "last_activity_date": 1457504974, "creation_date": 1457502078, "question_id": 35883793, "link": "https://stackoverflow.com/questions/35883793/generate-passwords-for-all-users-for-a-web-app", "title": "generate passwords for all users for a web app", "body": "<p>I'm building an app with ruby and hanami, however I think my question is probably not framework dependent. The users of the app will sign in to book an appointment for a meeting. The passwords for the users will be encrypted with bcrypt.</p>\n\n<p>My question is about the user creation. Users will not signup, but they will be created beforehand by the admin. All the user data is already in csv format and could be imported directly into the db w/o the admin having to create each one separately.</p>\n\n<p>Is it possible to do so and also have the passwords generated afterwards (like an initial password) for all users once the rest of the data is imported?</p>\n\n<p>Regards</p>\n\n<p>seba</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "forms"], "comments": [{"owner": {"reputation": 1551, "user_id": 4380542, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/nJSw1.jpg?s=128&g=1", "display_name": "Uday kumar das", "link": "https://stackoverflow.com/users/4380542/uday-kumar-das"}, "edited": false, "score": 0, "creation_date": 1457501988, "post_id": 35883700, "comment_id": 59429932, "body": "can you plz share your route file?"}, {"owner": {"reputation": 3, "user_id": 5274899, "user_type": "registered", "profile_image": "https://graph.facebook.com/1160633407284640/picture?type=large", "display_name": "Abraham Domo Keleta", "link": "https://stackoverflow.com/users/5274899/abraham-domo-keleta"}, "reply_to_user": {"reputation": 1551, "user_id": 4380542, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/nJSw1.jpg?s=128&g=1", "display_name": "Uday kumar das", "link": "https://stackoverflow.com/users/4380542/uday-kumar-das"}, "edited": false, "score": 0, "creation_date": 1457502167, "post_id": 35883700, "comment_id": 59429999, "body": "I just update my question with my routes"}, {"owner": {"reputation": 5962, "user_id": 115159, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ac02a81e50f368f6d5c7a14b99ce2469?s=128&d=identicon&r=PG", "display_name": "Dharam Gollapudi", "link": "https://stackoverflow.com/users/115159/dharam-gollapudi"}, "edited": false, "score": 0, "creation_date": 1457502594, "post_id": 35883700, "comment_id": 59430182, "body": "How are you loading/assigning @notebook in your controller?"}, {"owner": {"reputation": 3, "user_id": 5274899, "user_type": "registered", "profile_image": "https://graph.facebook.com/1160633407284640/picture?type=large", "display_name": "Abraham Domo Keleta", "link": "https://stackoverflow.com/users/5274899/abraham-domo-keleta"}, "edited": false, "score": 0, "creation_date": 1457502937, "post_id": 35883700, "comment_id": 59430321, "body": "<code>== link_to new_notebook_note_path(@notebook)</code>  this is how I call the new action from the @notebook&#39;s show action"}, {"owner": {"reputation": 5962, "user_id": 115159, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ac02a81e50f368f6d5c7a14b99ce2469?s=128&d=identicon&r=PG", "display_name": "Dharam Gollapudi", "link": "https://stackoverflow.com/users/115159/dharam-gollapudi"}, "edited": false, "score": 0, "creation_date": 1457503474, "post_id": 35883700, "comment_id": 59430535, "body": "But how are where are you assigning @notebook ?"}, {"owner": {"reputation": 3, "user_id": 5274899, "user_type": "registered", "profile_image": "https://graph.facebook.com/1160633407284640/picture?type=large", "display_name": "Abraham Domo Keleta", "link": "https://stackoverflow.com/users/5274899/abraham-domo-keleta"}, "edited": false, "score": 0, "creation_date": 1457507195, "post_id": 35883700, "comment_id": 59432034, "body": "<code>== link_to new_notebook_note_path(@notebook)</code> this is how I am calling the new action. But when I check the @notebook value when I reach the new action page, it&#39;s nil."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5274899, "user_type": "registered", "profile_image": "https://graph.facebook.com/1160633407284640/picture?type=large", "display_name": "Abraham Domo Keleta", "link": "https://stackoverflow.com/users/5274899/abraham-domo-keleta"}, "edited": false, "score": 0, "creation_date": 1457507005, "post_id": 35884256, "comment_id": 59431936, "body": "i tried your suggestion but ended up with no route matches error."}], "tags": [], "owner": {"reputation": 1141, "user_id": 3251463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hxssB.png?s=128&g=1", "display_name": "Scott Schupbach", "link": "https://stackoverflow.com/users/3251463/scott-schupbach"}, "is_accepted": false, "score": 0, "last_activity_date": 1457503927, "creation_date": 1457503927, "answer_id": 35884256, "question_id": 35883700, "link": "https://stackoverflow.com/questions/35883700/creating-a-new-object-with-nested-resources-rails/35884256#35884256", "title": "creating a new object with nested resources #rails", "body": "<p>Since <code>notes</code> is a nested resource under <code>notebooks</code>, the <code>form_for</code> method needs a little help with the url. It's trying to create a path from the <code>note</code> passed into the block, but you need to specify that the url is nested, like so:</p>\n\n<pre><code>= form_for [@notebook, @note], url: notebook_note_path(@notebook, @note) do |note|\n</code></pre>\n\n<p>See the <a href=\"http://edgeguides.rubyonrails.org/routing.html#creating-paths-and-urls-from-objects\" rel=\"nofollow\">Rails Guides page on creating urls and paths</a> for more detailed info.</p>\n"}], "owner": {"reputation": 3, "user_id": 5274899, "user_type": "registered", "profile_image": "https://graph.facebook.com/1160633407284640/picture?type=large", "display_name": "Abraham Domo Keleta", "link": "https://stackoverflow.com/users/5274899/abraham-domo-keleta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1545639539, "creation_date": 1457501683, "last_edit_date": 1545639539, "question_id": 35883700, "link": "https://stackoverflow.com/questions/35883700/creating-a-new-object-with-nested-resources-rails", "title": "creating a new object with nested resources #rails", "body": "<p>I have a rails application that creates a notebook and within the notebook, notes. I am writing a form  to create a new note but I am confused how to the format the form. This is what I currently have:</p>\n\n<p>notebook/id/note/new -> view</p>\n\n<pre><code>= form_for [@notebook, @note] do |note|\n  == note.label :title\n  == note.text_field :title\n  br\n  == note.text_field :body\n  br\n  == note.submit :save\n</code></pre>\n\n<p>NotesController -></p>\n\n<pre><code>  def new\n    @note = Note.new\n  end\n\n\n def create\n    @note = @notebook.notes.create(notes_params)\n    @note.user = current_user\n    redirect_to @notebook\n end\n\n  my routes: \n     resources :notebooks  do\n       resources :notes \n     end\n</code></pre>\n\n<p>The error I am receiving says </p>\n\n<pre><code> undefined method `notes_path' for #objectnumber\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "actionmailer", "sendgrid"], "comments": [{"owner": {"reputation": 7259, "user_id": 5239247, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/9WOIt.png?s=128&g=1", "display_name": "Praveen George", "link": "https://stackoverflow.com/users/5239247/praveen-george"}, "edited": false, "score": 0, "creation_date": 1457507714, "post_id": 35883627, "comment_id": 59432295, "body": "what is the use of the code unless email.blank? just try removing it."}], "answers": [{"tags": [], "owner": {"reputation": 880, "user_id": 5346366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd939033675b9ac69afa4353a1c7dceb?s=128&d=identicon&r=PG&f=1", "display_name": "dthal", "link": "https://stackoverflow.com/users/5346366/dthal"}, "is_accepted": false, "score": 0, "last_activity_date": 1457510152, "creation_date": 1457510152, "answer_id": 35885935, "question_id": 35883627, "link": "https://stackoverflow.com/questions/35883627/rails-4-mail-is-not-delivered-if-is-sent-to-multiple-recipients-using-sendgri/35885935#35885935", "title": "Rails 4 - mail is not delivered if is sent to multiple recipients (using Sendgrid)", "body": "<p>Try it like this:</p>\n\n<pre><code>def send_notification_to_user(email)\n  puts \"Sending to #{email}\" # email is displayed here properly\n  mail(to: email, subject: \"New products\", from:'no-reply@website.com') \nend\n\ndef notify_users(product)  \n  @product\n  emails  = Customer.signed_up.pluck(:email_address)\n  puts \"EMAILS:\"\n  puts emails.inspect # I see here, say, 5 email addresses\n  emails.each do |email|\n    unless email.blank?\n      send_notification_to_user(email).deliver_now \n    end                     \n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1457510152, "creation_date": 1457501368, "question_id": 35883627, "link": "https://stackoverflow.com/questions/35883627/rails-4-mail-is-not-delivered-if-is-sent-to-multiple-recipients-using-sendgri", "title": "Rails 4 - mail is not delivered if is sent to multiple recipients (using Sendgrid)", "body": "<p>I want to send a message with my products to users signed up to my application couple times a day.\nHere's a mailer method I use for that:</p>\n\n<pre><code>  def notify_users(product)  \n    @product\n    emails  = Customer.signed_up.pluck(:email_address)\n    puts \"EMAILS:\"\n    puts emails.inspect # I see here, say, 5 email addresses\n    emails.each do |email|\n      unless email.blank?\n        puts \"Sending to #{email}\" # email is displayed here properly\n        mail(to: email, subject: \"New products\", from: 'no-reply@website.com') \n      end                     \n    end\n</code></pre>\n\n<p>What I found out is that if <code>emails</code> contains only 1 email address, the email is delivered on the email address. But when I do send the email on multiple email addresses, usually is delivered only the last message (so if <code>emails</code> continues <code>[\"a@gmail.com\", \"b@gmail.com\", \"c@gmail.com\"]</code>), so the email is delivered only on <code>c@gmail.com</code>.</p>\n\n<p>Why is that? Trying to find out the reason of that, but still unsuccessful.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routes", "form-for"], "comments": [{"owner": {"reputation": 3002, "user_id": 976498, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CSZVp.jpg?s=128&g=1", "display_name": "LHH", "link": "https://stackoverflow.com/users/976498/lhh"}, "edited": false, "score": 0, "creation_date": 1457501580, "post_id": 35883564, "comment_id": 59429783, "body": "first argument should be  the object and then define your custom url"}], "answers": [{"comments": [{"owner": {"reputation": 3002, "user_id": 976498, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CSZVp.jpg?s=128&g=1", "display_name": "LHH", "link": "https://stackoverflow.com/users/976498/lhh"}, "reply_to_user": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "edited": false, "score": 0, "creation_date": 1457502517, "post_id": 35883756, "comment_id": 59430142, "body": "if you don&#39;t have object like @search then you can define &#39;:search&#39; as symbol first argument."}, {"owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "edited": false, "score": 0, "creation_date": 1457502694, "post_id": 35883756, "comment_id": 59430228, "body": "Thanks for your help!"}], "tags": [], "owner": {"reputation": 3002, "user_id": 976498, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CSZVp.jpg?s=128&g=1", "display_name": "LHH", "link": "https://stackoverflow.com/users/976498/lhh"}, "is_accepted": true, "score": 2, "last_activity_date": 1457501907, "creation_date": 1457501907, "answer_id": 35883756, "question_id": 35883564, "link": "https://stackoverflow.com/questions/35883564/form-for-doesnt-get-correct-routes/35883756#35883756", "title": "form_for doesn&#39;t get correct routes", "body": "<p>Try doing it like this - </p>\n\n<p>first argument should be the object and then define your custom url. </p>\n\n<pre><code>&lt;%= form_for(:search, url: search_leads_path, method: :get) do %&gt;\n  &lt;%= text_field_tag :search, params[:search] %&gt;\n  &lt;%= submit_tag \"Search\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>for more info check here\n<a href=\"http://apidock.com/rails/ActionView/Helpers/FormHelper/form_for\" rel=\"nofollow\">http://apidock.com/rails/ActionView/Helpers/FormHelper/form_for</a></p>\n"}, {"tags": [], "owner": {"reputation": 5962, "user_id": 115159, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ac02a81e50f368f6d5c7a14b99ce2469?s=128&d=identicon&r=PG", "display_name": "Dharam Gollapudi", "link": "https://stackoverflow.com/users/115159/dharam-gollapudi"}, "is_accepted": false, "score": 1, "last_activity_date": 1457502257, "creation_date": 1457502257, "answer_id": 35883838, "question_id": 35883564, "link": "https://stackoverflow.com/questions/35883564/form-for-doesnt-get-correct-routes/35883838#35883838", "title": "form_for doesn&#39;t get correct routes", "body": "<p><code>form_for</code> expects the first argument be a resource, for example <code>@user</code>. Which works well for the Restful routes. But as this is a custom route, you should use <code>form_tag</code> instead.</p>\n\n<p>Try updating your form logic to the following:</p>\n\n<pre><code>&lt;%= form_tag search_leads_path, method: :get do %&gt;\n   &lt;%= text_field_tag :search, params[:search] %&gt;\n   &lt;%= submit_tag \"Search\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Refer to <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-form_tag\" rel=\"nofollow\">FormTagHelper#form_tag</a> for more info.</p>\n"}], "owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 35883756, "answer_count": 2, "score": 0, "last_activity_date": 1457502257, "creation_date": 1457501078, "question_id": 35883564, "link": "https://stackoverflow.com/questions/35883564/form-for-doesnt-get-correct-routes", "title": "form_for doesn&#39;t get correct routes", "body": "<p>I have a search form, but when I click the search button, it doesn't get the correct url:</p>\n\n<pre><code>&lt;%= form_for search_leads_path, method: :get do %&gt;\n   &lt;%= text_field_tag :search, params[:search] %&gt;\n   &lt;%= submit_tag \"Search\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>it should be go to the <code>/leads/search</code>, but it is still in <code>/leads</code></p>\n\n<p><strong>rake routes:</strong></p>\n\n<pre><code>....\n      search_leads GET    /leads/search(.:format)                                 leads#search\n             leads GET    /leads(.:format)                                        leads#index\n....\n</code></pre>\n\n<p>anyone has good idea? Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "actionmailer"], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1457504733, "creation_date": 1457504733, "answer_id": 35884477, "question_id": 35883262, "link": "https://stackoverflow.com/questions/35883262/sendgrid-email-with-ruby-client-or-rails-extensions/35884477#35884477", "title": "SendGrid email with Ruby client or Rails extensions?", "body": "<p>ActionMailer is just the basic Rails email sending framework. Out of the box it's capable of making SMTP email calls and a service like SendGrid is a drop-in solution for that.</p>\n\n<p>It can also be configured to use a delivery method like a JSON API, which is a popular alternative, or something even more exotic, like dumping it in a job queue.</p>\n\n<p>The library to use depends on what features you want to use. If you just need a quick fire-and-forget system, the SMTP default method might work for you. If you need something with more control, the API-based one might be better.</p>\n"}], "owner": {"reputation": 7734, "user_id": 2490003, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/3dRD0.png?s=128&g=1", "display_name": "user2490003", "link": "https://stackoverflow.com/users/2490003/user2490003"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1457504733, "creation_date": 1457499718, "last_edit_date": 1457501603, "question_id": 35883262, "link": "https://stackoverflow.com/questions/35883262/sendgrid-email-with-ruby-client-or-rails-extensions", "title": "SendGrid email with Ruby client or Rails extensions?", "body": "<p>Just switching to SendGrid and am very surprised (and incredibly confused) at the various methods and libraries used to send email.</p>\n\n<p>The official ruby client by SendGrid builds an email and request, and then <a href=\"https://github.com/sendgrid/sendgrid-ruby/blob/master/lib/sendgrid/client.rb#L25..L39\" rel=\"nofollow\">constructs a POST request</a> to send that data over to their smtp endpoint.</p>\n\n<p>However Rails uses <code>ActionMailer</code>, and there exist other gems like <a href=\"https://github.com/eddiezane/sendgrid-actionmailer\" rel=\"nofollow\">sendgrid-actionmailer</a> and <a href=\"https://github.com/PavelTyk/sendgrid-rails\" rel=\"nofollow\">sendgrid-rails</a> to extend functionality to Rails.</p>\n\n<p>What does <code>ActionMailer</code> actually do here? I know you can configure <code>smpt_options</code> and then call <code>mail(..)</code> inside your mailer to send email. Does that just construct a similar POST request and send it? If so, is it guaranteed to be the same one constructed by the official ruby client (i.e. is there a standard to this?)</p>\n"}, {"tags": ["ruby", "regex"], "answers": [{"tags": [], "owner": {"reputation": 1011, "user_id": 3891638, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pqkeX.jpg?s=128&g=1", "display_name": "cozyconemotel", "link": "https://stackoverflow.com/users/3891638/cozyconemotel"}, "is_accepted": false, "score": 0, "last_activity_date": 1457498643, "last_edit_date": 1457498643, "creation_date": 1457498068, "answer_id": 35882962, "question_id": 35882842, "link": "https://stackoverflow.com/questions/35882842/how-can-i-match-a-set-of-characters-which-appear-in-any-order-and-at-most-once/35882962#35882962", "title": "How can I match a set of characters which appear in any order and at most once?", "body": "<p>This matches all combinations of x,m,i,g,a,s without duplicates:</p>\n\n<pre><code>^(?:([xmigas])(?!.*\\1))*$\n</code></pre>\n\n<p>So particularly in your case, the expression would be </p>\n\n<pre><code>/^r([\\/|:!`.])(.*?)\\1(?:([xmigas])(?!.*\\3))*$/\n</code></pre>\n\n<p>See it in action <a href=\"http://www.rubular.com/r/YWsfhwuHDc\" rel=\"nofollow\">here</a></p>\n\n<p>Also, see @Chris's answer for details</p>\n"}, {"comments": [{"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1457498277, "post_id": 35882964, "comment_id": 59428632, "body": "But you explained the technique you used instead of just saying &quot;this works&quot;."}, {"owner": {"reputation": 2302, "user_id": 2283319, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/509be1995da5203c23e2d94b5cecac4a?s=128&d=identicon&r=PG", "display_name": "Chris Kitching", "link": "https://stackoverflow.com/users/2283319/chris-kitching"}, "reply_to_user": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1457498417, "post_id": 35882964, "comment_id": 59428685, "body": "Also: I think this regex get sconsiderably more complicated if you take away the restriction that the flags are at the end of the string."}, {"owner": {"reputation": 1011, "user_id": 3891638, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pqkeX.jpg?s=128&g=1", "display_name": "cozyconemotel", "link": "https://stackoverflow.com/users/3891638/cozyconemotel"}, "edited": false, "score": 0, "creation_date": 1457498422, "post_id": 35882964, "comment_id": 59428689, "body": "yeah, I was just focused on giving the answer first, so that I could edit the explanation later :) kudos to you"}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1457498424, "post_id": 35882964, "comment_id": 59428691, "body": "Well. good answer -- covers what I wanted and explains it as well. Thanks a ton! The flags are guaranteed to be at the end of the string by the way I&#39;m parsing it, as it happens."}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1457499397, "post_id": 35882964, "comment_id": 59428973, "body": "Out of curiosity, what complications arise if it&#39;s not at the end of the string?"}, {"owner": {"reputation": 2302, "user_id": 2283319, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/509be1995da5203c23e2d94b5cecac4a?s=128&d=identicon&r=PG", "display_name": "Chris Kitching", "link": "https://stackoverflow.com/users/2283319/chris-kitching"}, "edited": false, "score": 1, "creation_date": 1457499518, "post_id": 35882964, "comment_id": 59429007, "body": "Well, look at the condition that&#39;s used in the lookahead. It requires the matched flag to exist nowhere in the remainder of the string. If there was other (not flag) content later on, we&#39;d need to restrict the region that regex searches. We&#39;d have to have a more complicated regex in the condition that looks for &quot;no repetitions until the end of the flags&quot; instead of &quot;no repetitions ever&quot;."}, {"owner": {"reputation": 2302, "user_id": 2283319, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/509be1995da5203c23e2d94b5cecac4a?s=128&d=identicon&r=PG", "display_name": "Chris Kitching", "link": "https://stackoverflow.com/users/2283319/chris-kitching"}, "edited": false, "score": 0, "creation_date": 1457499637, "post_id": 35882964, "comment_id": 59429044, "body": "It wouldn&#39;t be too horrible, to be honest, especially if the language your parsing has a nice separator you can look for. I didn&#39;t think about it too closely :P"}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1457845318, "post_id": 35882964, "comment_id": 59587998, "body": "@ChrisKitching So... add <code>\\b</code> to the end of it? Assuming the flags are all in <code>\\w</code>."}, {"owner": {"reputation": 2302, "user_id": 2283319, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/509be1995da5203c23e2d94b5cecac4a?s=128&d=identicon&r=PG", "display_name": "Chris Kitching", "link": "https://stackoverflow.com/users/2283319/chris-kitching"}, "reply_to_user": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1457845423, "post_id": 35882964, "comment_id": 59588015, "body": "@QPaysTaxes It depends what comes after the flags. If the next thing after the flags counts as a word boundary, yes."}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1457845485, "post_id": 35882964, "comment_id": 59588030, "body": "@ChrisKitching In this case, tokens are separated by whitespace, so that works. Thanks!"}], "tags": [], "owner": {"reputation": 2302, "user_id": 2283319, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/509be1995da5203c23e2d94b5cecac4a?s=128&d=identicon&r=PG", "display_name": "Chris Kitching", "link": "https://stackoverflow.com/users/2283319/chris-kitching"}, "is_accepted": true, "score": 2, "last_activity_date": 1457498309, "last_edit_date": 1457498309, "creation_date": 1457498076, "answer_id": 35882964, "question_id": 35882842, "link": "https://stackoverflow.com/questions/35882842/how-can-i-match-a-set-of-characters-which-appear-in-any-order-and-at-most-once/35882964#35882964", "title": "How can I match a set of characters which appear in any order and at most once?", "body": "<p><a href=\"http://www.regular-expressions.info/lookaround.html\" rel=\"nofollow\">Negative lookahead</a> should do what you want. I'm going to neglect everything except the flag-matching part, for simplicity.</p>\n\n<p>Consider the following:</p>\n\n<pre><code>(?:([xmigas])(?!.*\\1.*))*\n</code></pre>\n\n<p>We look for a valid flag letter, but we assert that the content following this flag letter does not contain the same flag letter again. We then repeat the whole thing 0 or more times (and let the lookaheads implicitly prevent any extra flags from existing).</p>\n"}], "owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 35882964, "answer_count": 2, "score": 0, "last_activity_date": 1457498819, "creation_date": 1457497335, "last_edit_date": 1457498819, "question_id": 35882842, "link": "https://stackoverflow.com/questions/35882842/how-can-i-match-a-set-of-characters-which-appear-in-any-order-and-at-most-once", "title": "How can I match a set of characters which appear in any order and at most once?", "body": "<p>I'm trying to write a very, very basic parser for a thing, and as part if it, I decided to use regular expressions to find regular expressions.</p>\n\n<p>This is what regular expressions will look like:</p>\n\n<pre><code>r/pattern/flags\n</code></pre>\n\n<p>except that <code>/</code> can be any of <code>/|:!`.</code>. That's so that you can, for example, match URLs without lots of <code>\\/</code>s. Now, this is what I have so far:</p>\n\n<pre><code>r([\\/|:!`.])(.*?)(?&lt;![^\\\\]\\\\)\\1x?m?i?g?a?s?\n</code></pre>\n\n<p>However, this has a problem: it doesn't match <code>r/abcde/ai</code>. Given that the flags should be able to be specified in any order, this fails. I've also tried this:</p>\n\n<pre><code>r([\\/|:!`.])(.*?)(?&lt;![^\\\\]\\\\)\\1([xmigas]+)\n</code></pre>\n\n<p>But this has the problem that it allows <code>r|abc|aaaasxmaaaiisggss</code>, which it shouldn't. If I limit it to <code>[xmigas]{,6}</code> I can still write <code>|iiiii</code>.</p>\n\n<p>Now, I realize I can do something very long and complicated but that would be impossible to scale so I'd rather avoid it. Is there any way to match a set of characters which can appear at most once, and in any order, without anything complicated?</p>\n\n<p>In this specific case, I'm using Ruby, and I'm fine with adding gems if necessary. I might also be able to switch languages, though it'd be a lot of work and I'd much rather not.</p>\n\n<p><sup>This is a personal project, meant to be for fun. Please ignore how bad the idea of searching for regex with regex is.</sup></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 0, "creation_date": 1457498775, "post_id": 35882645, "comment_id": 59428806, "body": "See my answer and mark it as answer if it works for your needs. :)"}, {"owner": {"reputation": 98, "user_id": 5595614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/508773b7491d10484c6bb70448a955b5?s=128&d=identicon&r=PG&f=1", "display_name": "Flying onion", "link": "https://stackoverflow.com/users/5595614/flying-onion"}, "reply_to_user": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 0, "creation_date": 1457500350, "post_id": 35882645, "comment_id": 59429313, "body": "Thanks. I will try it and give you feedback ASAP."}, {"owner": {"reputation": 98, "user_id": 5595614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/508773b7491d10484c6bb70448a955b5?s=128&d=identicon&r=PG&f=1", "display_name": "Flying onion", "link": "https://stackoverflow.com/users/5595614/flying-onion"}, "reply_to_user": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 0, "creation_date": 1457571681, "post_id": 35882645, "comment_id": 59471663, "body": "It&#39;s really good, but I&#39;m asked to use ajax instead. Anyway, thanks for your answer."}, {"owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 0, "creation_date": 1457572907, "post_id": 35882645, "comment_id": 59472017, "body": "Please update your question to what exactly you want.."}], "answers": [{"tags": [], "owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "is_accepted": false, "score": 0, "last_activity_date": 1457498658, "creation_date": 1457498658, "answer_id": 35883067, "question_id": 35882645, "link": "https://stackoverflow.com/questions/35882645/how-to-limit-file-type-within-c-c-java-when-uploading-with-file-field/35883067#35883067", "title": "How to limit file type within C/C++/Java when uploading with file_field", "body": "<p>I guess you can add a server side validation in the Model that checks the format of the file:</p>\n\n<pre><code>   validates :file, allow_blank: true, format: {\n     with: %r{\\.(java|c|cpp)\\Z}i,\n     message: 'file must be in JAVA, C, CPP format'\n   }\n</code></pre>\n"}], "owner": {"reputation": 98, "user_id": 5595614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/508773b7491d10484c6bb70448a955b5?s=128&d=identicon&r=PG&f=1", "display_name": "Flying onion", "link": "https://stackoverflow.com/users/5595614/flying-onion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1457498658, "creation_date": 1457496156, "question_id": 35882645, "link": "https://stackoverflow.com/questions/35882645/how-to-limit-file-type-within-c-c-java-when-uploading-with-file-field", "title": "How to limit file type within C/C++/Java when uploading with file_field", "body": "<p>I hope that only C/C++/Java files can be uploaded.</p>\n\n<p>Is it possible to add limitations with <code>:accept</code> option like</p>\n\n<p><code>&lt;%= f.file_field, :file, accept:'xxx/xxx' %&gt;</code></p>\n"}, {"tags": ["ruby", "qt", "qtableview", "qtablewidget", "qtruby"], "comments": [{"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "edited": false, "score": 0, "creation_date": 1457525481, "post_id": 35882179, "comment_id": 59443303, "body": "better split the conversion part and the GUI part into separate processes and questions if necessary, convert into eg array and check if everything ok by a simple puts of the array then try tio display the array into the table, ask separate question for that and show us the code you used and a sample of your data"}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 5920271, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5eb255bf0ce0c7c5f3615eb7f83ded9b?s=128&d=identicon&r=PG&f=1", "display_name": "topjay", "link": "https://stackoverflow.com/users/5920271/topjay"}, "edited": false, "score": 0, "creation_date": 1457498247, "post_id": 35882804, "comment_id": 59428618, "body": "Thanks for the solution. I will try using this method once and get back.  However since i know status and number appear at exact same position in each line, like line[70..78] wil b status , cant i make use of that instead of columns ?"}, {"owner": {"reputation": 388, "user_id": 2308639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1345a48fa1dbe24e85506de63b6c07f0?s=128&d=identicon&r=PG", "display_name": "Stephen Grimes", "link": "https://stackoverflow.com/users/2308639/stephen-grimes"}, "reply_to_user": {"reputation": 65, "user_id": 5920271, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5eb255bf0ce0c7c5f3615eb7f83ded9b?s=128&d=identicon&r=PG&f=1", "display_name": "topjay", "link": "https://stackoverflow.com/users/5920271/topjay"}, "edited": false, "score": 0, "creation_date": 1457498388, "post_id": 35882804, "comment_id": 59428676, "body": "Yeah, you can do that too. I&#39;ll add it to the solution"}, {"owner": {"reputation": 65, "user_id": 5920271, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5eb255bf0ce0c7c5f3615eb7f83ded9b?s=128&d=identicon&r=PG&f=1", "display_name": "topjay", "link": "https://stackoverflow.com/users/5920271/topjay"}, "edited": false, "score": 0, "creation_date": 1457498531, "post_id": 35882804, "comment_id": 59428726, "body": "Thanks. That part would be more suitable for me I guess since I have tried to use the positions in other parts of the code"}, {"owner": {"reputation": 65, "user_id": 5920271, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5eb255bf0ce0c7c5f3615eb7f83ded9b?s=128&d=identicon&r=PG&f=1", "display_name": "topjay", "link": "https://stackoverflow.com/users/5920271/topjay"}, "edited": false, "score": 0, "creation_date": 1457498578, "post_id": 35882804, "comment_id": 59428740, "body": "I will try them out as soon as possible and get back with the outcome !!"}, {"owner": {"reputation": 65, "user_id": 5920271, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5eb255bf0ce0c7c5f3615eb7f83ded9b?s=128&d=identicon&r=PG&f=1", "display_name": "topjay", "link": "https://stackoverflow.com/users/5920271/topjay"}, "edited": false, "score": 0, "creation_date": 1457501035, "post_id": 35882804, "comment_id": 59429586, "body": "Please do  check the edit part in the code below and clear that query ! I was unable to add code part in comments, so edited in question"}], "tags": [], "owner": {"reputation": 388, "user_id": 2308639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1345a48fa1dbe24e85506de63b6c07f0?s=128&d=identicon&r=PG", "display_name": "Stephen Grimes", "link": "https://stackoverflow.com/users/2308639/stephen-grimes"}, "is_accepted": false, "score": 3, "last_activity_date": 1457498487, "last_edit_date": 1457498487, "creation_date": 1457497124, "answer_id": 35882804, "question_id": 35882179, "link": "https://stackoverflow.com/questions/35882179/qt-ruby-creating-the-table-and-entering-the-data-from-text-file-dynamically/35882804#35882804", "title": "Qt Ruby: Creating the table and entering the data from text file dynamically", "body": "<p>It looks like the <code>Status</code> and <code>Number</code> you want always appear in the same column. You can split each line of <code>data.txt</code> on whitespace to only display the column you want.</p>\n\n<pre><code>File.open('data.txt').readlines.each do |line|\n  columns = line.split(/\\s+/)\n  puts \"#{columns[4]}\\t#{columns[5]}\"  \nend\n</code></pre>\n\n<p>This prints the 5th and 6th columns, separated by a tab.</p>\n\n<p>You could also take advantage of knowing the position, as you mention:</p>\n\n<pre><code>File.open('data.txt').readlines.each do |line|\n  puts \"#{line[70..78]}\\t#{line[85..90]}\"  \nend\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 5920271, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5eb255bf0ce0c7c5f3615eb7f83ded9b?s=128&d=identicon&r=PG&f=1", "display_name": "topjay", "link": "https://stackoverflow.com/users/5920271/topjay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 329, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1457500991, "creation_date": 1457493134, "last_edit_date": 1457500991, "question_id": 35882179, "link": "https://stackoverflow.com/questions/35882179/qt-ruby-creating-the-table-and-entering-the-data-from-text-file-dynamically", "title": "Qt Ruby: Creating the table and entering the data from text file dynamically", "body": "<p>I have a text file named data.txt having various parameters such as number, status and so on.\nEach line contains a different set of data.</p>\n\n<p>Now, in my GUI, I have submit button. On click of that button, I want 'few' of these data to be displayed as a table on the GUI screen</p>\n\n<p>One thing is I do know which position it exists in the text file : </p>\n\n<p>Ex: Status appears at position [70..78] in each line of text file \n    Number appears at position [85..90] in each line of text file and so on </p>\n\n<p>I want only those particular parts of data to be displayed in respective columns of the table </p>\n\n<p>Any suggestions would be welcome. I am using Qt and Ruby for my GUI design</p>\n\n<pre><code>Following images show what exactly i am looking for: \n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/U0Emx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/U0Emx.png\" alt=\"Image 1: My text file containing data \"></a><br>\n   <a href=\"https://i.stack.imgur.com/guyUy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/guyUy.png\" alt=\"Image 2 : My final expected outcome should look like that.\"></a></p>\n\n<p>EDIT: Using the solution mentioned by Stephen: </p>\n\n<p>Using the line position worked for me. But one query here, when i try to use that using puts statement, it does print properly. However when i try to  use the same for displaying it inside TextEdit widget, each line does not get displayed.. </p>\n\n<pre><code> @text_var = \"#{line[70..78]}\\t#{line[85..90]}\n\n  @text = Qt::TextEdit.new(self)\n  @text.setText (@text_var) \n  puts  @text_var\n</code></pre>\n\n<p>Puts statement gives correct output, however i am not able to send the same inside the widget. \nIf i use break statement , then first line is getting displayed in widget correctly. So error is happening when it is trying to read line by line on to the widget. Ultimately, it is getting overwritten and last line where just blank spaces are there is getting printed in the widget i feel. </p>\n\n<p>Any solutions for this ? </p>\n"}, {"tags": ["ruby", "unit-testing", "rspec", "console-application", "read-eval-print-loop"], "answers": [{"tags": [], "owner": {"reputation": 224, "user_id": 6037148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4996ba22791ce0652ec197e40ce16267?s=128&d=identicon&r=PG&f=1", "display_name": "bf34", "link": "https://stackoverflow.com/users/6037148/bf34"}, "is_accepted": false, "score": 0, "last_activity_date": 1457494611, "creation_date": 1457494611, "answer_id": 35882418, "question_id": 35881876, "link": "https://stackoverflow.com/questions/35881876/using-rspec-to-test-console-application-interaction/35882418#35882418", "title": "Using RSpec to Test Console Application Interaction", "body": "<p>So the role of mocks in rspec tests are to stand in for method calls and give expected return values. So say in this case you have a class which makes a call to get a hash, but you don't want to actually make that call within your spec.</p>\n\n<pre><code>MyClass.get_info\n</code></pre>\n\n<p>or something like that.</p>\n\n<p>In rpsec, what you can do is designate the return value/object/whatever for when that method is called. To do this, at the beginning of the spec or in a before do block you would put</p>\n\n<pre><code>allow(MyClass).to receive(:get_info).and_return({ key: 'value' })\n</code></pre>\n\n<p>Now within the spec, any calls to MyClass.get_info would return your designated hash. </p>\n\n<pre><code>my_info = MyClass.get_info\n# my_info = { key: 'value' }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3974, "user_id": 433895, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/26ffb8939a8111e0321254ae5259c7f8?s=128&d=identicon&r=PG", "display_name": "curt", "link": "https://stackoverflow.com/users/433895/curt"}, "edited": false, "score": 0, "creation_date": 1457506728, "post_id": 35882550, "comment_id": 59431813, "body": "Dave Schweisguth,  your example hangs for me. I put the details in my question."}, {"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "reply_to_user": {"reputation": 3974, "user_id": 433895, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/26ffb8939a8111e0321254ae5259c7f8?s=128&d=identicon&r=PG", "display_name": "curt", "link": "https://stackoverflow.com/users/433895/curt"}, "edited": false, "score": 0, "creation_date": 1457526594, "post_id": 35882550, "comment_id": 59444111, "body": "Try removing the first <code>stdout.readline</code>. That discards a line of irb output which your program won&#39;t have."}, {"owner": {"reputation": 3974, "user_id": 433895, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/26ffb8939a8111e0321254ae5259c7f8?s=128&d=identicon&r=PG", "display_name": "curt", "link": "https://stackoverflow.com/users/433895/curt"}, "edited": false, "score": 0, "creation_date": 1457536457, "post_id": 35882550, "comment_id": 59451426, "body": "That change had no effect. I tried your code as is and it works. I&#39;ll read up on popen3 later today."}, {"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "reply_to_user": {"reputation": 3974, "user_id": 433895, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/26ffb8939a8111e0321254ae5259c7f8?s=128&d=identicon&r=PG", "display_name": "curt", "link": "https://stackoverflow.com/users/433895/curt"}, "edited": false, "score": 0, "creation_date": 1457618938, "post_id": 35882550, "comment_id": 59495812, "body": "I changed my answer to use a pty, which works more naturally for irb. Possibly it will work better for you too."}], "tags": [], "owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "is_accepted": true, "score": 2, "last_activity_date": 1457618818, "last_edit_date": 1457618818, "creation_date": 1457495554, "answer_id": 35882550, "question_id": 35881876, "link": "https://stackoverflow.com/questions/35881876/using-rspec-to-test-console-application-interaction/35882550#35882550", "title": "Using RSpec to Test Console Application Interaction", "body": "<p>I agree with you that it would be good to have at least one or a few integration tests of the whole app. Those tests shouldn't have mocks; mocks replace dependencies of classes that you want to test in isolation. Here's a simple way to integration-test a command-line app, using irb as an example:</p>\n\n<pre><code>require 'pty'\n\ndescribe \"irb\" do\n  it \"evaluates an expression\" do\n    PTY.spawn('irb') do |output, input|\n      output.readpartial 1024 # read past the prompt\n      input.puts \"1 + 1\"\n      expect(output.readline.chomp).to eq(\"1 + 1\")\n      expect(output.readline.chomp).to eq(\"=&gt; 2\")\n    end\n  end\nend\n</code></pre>\n\n<p>If I had more than one test like this I'd extract an RSpec matcher, but I left the nitty-gritty inline here to keep it simple.</p>\n\n<p>This kind of test is relatively slow, since it runs the app in a separate process with a new Ruby instance, so you only want to write one or a few of these to test that the app works as a whole and then test the details with unit tests of individual classes. What those look like, and whether you need mocks, depends entirely on the internal structure of your app.</p>\n"}, {"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 0, "last_activity_date": 1457498112, "creation_date": 1457498112, "answer_id": 35882968, "question_id": 35881876, "link": "https://stackoverflow.com/questions/35881876/using-rspec-to-test-console-application-interaction/35882968#35882968", "title": "Using RSpec to Test Console Application Interaction", "body": "<p>You basically write a mock when something is too difficult to actually test or is too resource-intensive to test. </p>\n\n<p>In this case, what you are trying to do (REPL testing) is difficult but not impossible.</p>\n\n<p>I'm sure there are other ways to do it but here's the method I've used:</p>\n\n<p><strong>Step 1</strong> Write a shell command that pipes commands to your REPL program.</p>\n\n<pre><code>shell_cmd = %{(echo \"MyClass.new.call_my_command\"; echo \"exit\") | ruby my_repl_program.rb\"}\n</code></pre>\n\n<p>This uses parenthesis to combine multiple \"echo\" outputs, then sends then to your program. Note that you <em>need</em> to send an exit command or else the process will hang. </p>\n\n<p><strong>Step 2</strong> call the shell command and set a variable to the output:</p>\n\n<pre><code>cmd_output = `#{shell_cmd}`\n</code></pre>\n\n<p><strong>Step 3</strong> verify the output</p>\n\n<p>Now you can test the value of <code>cmd_output</code> however you need. </p>\n"}], "owner": {"reputation": 3974, "user_id": 433895, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/26ffb8939a8111e0321254ae5259c7f8?s=128&d=identicon&r=PG", "display_name": "curt", "link": "https://stackoverflow.com/users/433895/curt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1207, "favorite_count": 0, "accepted_answer_id": 35882550, "answer_count": 3, "score": 1, "last_activity_date": 1471439041, "creation_date": 1457491021, "last_edit_date": 1471439041, "question_id": 35881876, "link": "https://stackoverflow.com/questions/35881876/using-rspec-to-test-console-application-interaction", "title": "Using RSpec to Test Console Application Interaction", "body": "<p>I have several console applications that have a read, evaluate, print, loop (REPL) using readline that I would like to create tests for using RSpec if possible. I've read about mock classes, but I don't see how they would work. Is it only possible to replace a real input class to test the rest of the classes? I want to do an integration test of the whole app. For one of my web services, I have an rspec script that uses curl to send requests to test the socket interface. I wanted to do something similar for the console interface. Am I just not understanding the concept of mock classes?</p>\n\n<h2>Answer</h2>\n\n<p>Based on the answer @Dave Schweisguth gave, I tried this:</p>\n\n<pre><code>require 'rspec'\nrequire 'pty'\n\ndescribe \"anthematic\" do\n  before(:all) do\n    @output, @input = PTY.spawn('bin/anthematic')\n  end\n\n  it \"turns on a zone\" do\n    @output.readpartial 1024 # read past the prompt\n    @input.puts \"on 1\"\n    expect(@output.readline.chomp).to eq(\"on 1\")\n    expect(@output.readline.chomp).to eq(\"turn on zone 1\")\n  end\nend\n</code></pre>\n\n<p>I moved the spawn out so I can add other tests. I'm new to rspec so that may not be the cleanest solution.</p>\n\n<p>While researching PTY, I found <a href=\"https://devver.wordpress.com/2009/10/12/ruby-subprocesses-part_3/\" rel=\"nofollow\">this article</a> on sub-processes that covers popen, pty, and others.</p>\n"}, {"tags": ["ruby", "regex", "hash"], "comments": [{"owner": {"reputation": 23477, "user_id": 660921, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3d53595cb2a89131fb3be7b55b3a9ef0?s=128&d=identicon&r=PG", "display_name": "Martin Tournoij", "link": "https://stackoverflow.com/users/660921/martin-tournoij"}, "edited": false, "score": 0, "creation_date": 1457561536, "post_id": 35881328, "comment_id": 59467732, "body": "You didn&#39;t post your code. We can&#39;t guess at the performance of code we can&#39;t see ;-)"}, {"owner": {"reputation": 147, "user_id": 2302081, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/46e9a2cdde77976e0a649bed8baa89e7?s=128&d=identicon&r=PG", "display_name": "dragnflier", "link": "https://stackoverflow.com/users/2302081/dragnflier"}, "reply_to_user": {"reputation": 23477, "user_id": 660921, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3d53595cb2a89131fb3be7b55b3a9ef0?s=128&d=identicon&r=PG", "display_name": "Martin Tournoij", "link": "https://stackoverflow.com/users/660921/martin-tournoij"}, "edited": false, "score": 0, "creation_date": 1457570304, "post_id": 35881328, "comment_id": 59471276, "body": "As the question states, I was just using a loop. Loops are generally the most inefficient way to search through data. For reference, it was just commands.keys.each do |key| .... that broke the loop when it found a match in the case I wanted one result, or continued to the end if I wanted multiple."}, {"owner": {"reputation": 23477, "user_id": 660921, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3d53595cb2a89131fb3be7b55b3a9ef0?s=128&d=identicon&r=PG", "display_name": "Martin Tournoij", "link": "https://stackoverflow.com/users/660921/martin-tournoij"}, "edited": false, "score": 0, "creation_date": 1457570804, "post_id": 35881328, "comment_id": 59471413, "body": "Well, in my experience using a &quot;description&quot; of code can lead to great confusion and miscommunication. You say &quot;just a foo&quot;, but I might interpret is as &quot;just a FOO&quot;. Besides, to archive a &quot;base-line&quot; for testing all people wanting to answer this now have to write a loop. Why not do that work for us? ;-)"}, {"owner": {"reputation": 147, "user_id": 2302081, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/46e9a2cdde77976e0a649bed8baa89e7?s=128&d=identicon&r=PG", "display_name": "dragnflier", "link": "https://stackoverflow.com/users/2302081/dragnflier"}, "reply_to_user": {"reputation": 23477, "user_id": 660921, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3d53595cb2a89131fb3be7b55b3a9ef0?s=128&d=identicon&r=PG", "display_name": "Martin Tournoij", "link": "https://stackoverflow.com/users/660921/martin-tournoij"}, "edited": false, "score": 0, "creation_date": 1457571302, "post_id": 35881328, "comment_id": 59471566, "body": "fair point. It was meant to be more of a general question, rather than a specific one."}], "answers": [{"comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1457492296, "post_id": 35881373, "comment_id": 59427093, "body": "If you just want to know if any of the regexes match (and don&#39;t care which one(s)), use <code>any?</code> instead of <code>select</code>. It will return <code>true</code> as soon as it finds a match, or <code>false</code> if it finds none."}, {"owner": {"reputation": 147, "user_id": 2302081, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/46e9a2cdde77976e0a649bed8baa89e7?s=128&d=identicon&r=PG", "display_name": "dragnflier", "link": "https://stackoverflow.com/users/2302081/dragnflier"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1457493883, "post_id": 35881373, "comment_id": 59427530, "body": "Hi Jordan, I wanted to get the value from that key back, not just see if any exist. Thanks anyway!"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1457500623, "post_id": 35881373, "comment_id": 59429418, "body": "This answer returns an array, by the way. Use <code>detect</code> to return the first match."}, {"owner": {"reputation": 147, "user_id": 2302081, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/46e9a2cdde77976e0a649bed8baa89e7?s=128&d=identicon&r=PG", "display_name": "dragnflier", "link": "https://stackoverflow.com/users/2302081/dragnflier"}, "edited": false, "score": 0, "creation_date": 1457500673, "post_id": 35881373, "comment_id": 59429443, "body": "that wasn&#39;t part of the question."}, {"owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "edited": false, "score": 0, "creation_date": 1458173694, "post_id": 35881373, "comment_id": 59747135, "body": "Note that <code>message.to_s.match(Regexp.new(key))</code> can simply be <code>message.to_s.match(key)</code> b/c <code>key</code> is already a <code>Regexp</code> object, based on the hash being used"}], "tags": [], "owner": {"reputation": 147, "user_id": 2302081, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/46e9a2cdde77976e0a649bed8baa89e7?s=128&d=identicon&r=PG", "display_name": "dragnflier", "link": "https://stackoverflow.com/users/2302081/dragnflier"}, "is_accepted": true, "score": 6, "last_activity_date": 1458180198, "last_edit_date": 1458180198, "creation_date": 1457487396, "answer_id": 35881373, "question_id": 35881328, "link": "https://stackoverflow.com/questions/35881328/how-to-see-if-string-matches-any-regex-keys-in-ruby-hash/35881373#35881373", "title": "How to see if string matches any regex keys in ruby hash", "body": "<p>The solution ended up being, based on other answers for the opposite case:</p>\n\n<pre><code>val = myhash.keys.select {|key| message.to_s.match(key)}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 147, "user_id": 2302081, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/46e9a2cdde77976e0a649bed8baa89e7?s=128&d=identicon&r=PG", "display_name": "dragnflier", "link": "https://stackoverflow.com/users/2302081/dragnflier"}, "edited": false, "score": 0, "creation_date": 1457500355, "post_id": 35883193, "comment_id": 59429317, "body": "Hi mudasobwa, please see my changes to the question, I felt like the scenario clarified I wanted the value, not just if there were keys that matched the case. I have fixed my answer, I removed the /i from all of my values in my hash to save readability and prevent issues if the /i is forgotten. In all cases in my program, I always want it to be case insensitive."}, {"owner": {"reputation": 848, "user_id": 198549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf358de2534f820f5342180bb0e861ef?s=128&d=identicon&r=PG", "display_name": "kbrock", "link": "https://stackoverflow.com/users/198549/kbrock"}, "edited": false, "score": 0, "creation_date": 1608306471, "post_id": 35883193, "comment_id": 115551127, "body": "beautiful answer but I&#39;m thinking it is not more efficient. in my experience, union was slower than simply iterating over an array of regular expressions even in the case where the union is reused for multiple queries. your code could and should faster if the underlying implementation were fixed. ASIDE: I tend to want the value out of the hash and not an <code>exists?</code>"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1457500354, "last_edit_date": 1457500354, "creation_date": 1457499344, "answer_id": 35883193, "question_id": 35881328, "link": "https://stackoverflow.com/questions/35881328/how-to-see-if-string-matches-any-regex-keys-in-ruby-hash/35883193#35883193", "title": "How to see if string matches any regex keys in ruby hash", "body": "<p>Yes, there is more efficient way:</p>\n\n<pre><code>hash = {\n  /hello/i =&gt; \"Why hello there!\", \n  /how are you.*dragnflier/i =&gt; \"I'm good thank you! How are you?\"\n}\nmessage =~ Regexp.union(hash.keys)\n</code></pre>\n\n<p>You stated that the goal is to check \u201cif the message matches any of the regular expressions in my hash.\u201d The above is way more efficient than the solution you came up with.</p>\n\n<p>After this preliminary check is done, one might do whatever she wants to detect the respective key (this claim appeared in the questions after I have it answered.) This approach will be more efficient than just bruteforce <code>detect</code> on keys.</p>\n\n<p>Please note, that the answer you have provided is not correct, since </p>\n\n<pre><code>Regexp.new '/foo/i'\n</code></pre>\n\n<p>becomes </p>\n\n<pre><code>#\u21d2 /\\/foo\\/i/i \n</code></pre>\n\n<p>and not </p>\n\n<pre><code>#\u21d2\u00a0/foo/i\n</code></pre>\n\n<p>as you probably expected.</p>\n"}], "owner": {"reputation": 147, "user_id": 2302081, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/46e9a2cdde77976e0a649bed8baa89e7?s=128&d=identicon&r=PG", "display_name": "dragnflier", "link": "https://stackoverflow.com/users/2302081/dragnflier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2022, "favorite_count": 0, "accepted_answer_id": 35881373, "answer_count": 2, "score": 0, "last_activity_date": 1458180198, "creation_date": 1457487100, "last_edit_date": 1457500139, "question_id": 35881328, "link": "https://stackoverflow.com/questions/35881328/how-to-see-if-string-matches-any-regex-keys-in-ruby-hash", "title": "How to see if string matches any regex keys in ruby hash", "body": "<p>I have a JSON file full of regex keys with responses based on the message  sent (eg. Hello, Dragnflier!). The file contains values like this:</p>\n\n<pre><code>{\n  \"/hello/i\" : \"Why hello there!\", \n  \"/how are you.*dragnflier/i\" : \"I'm good thank you! How are you?\"\n}\n</code></pre>\n\n<p>I load these into a hash at the start of my ruby program. Is there a more efficient way to see if the message matches any of the regular expressions in my hash than just running a loop over it with all of the keys? I want to get the value that the key returns, not a list of keys or a boolean value.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "methods", "model", "callback"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1457486005, "post_id": 35881081, "comment_id": 59425376, "body": "Are you sure in the case you&#39;re testing that <code>days_left_unchallenged</code> returns zero? Additionally are you sure that function is running and your record is actually saved?"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1457487899, "post_id": 35881081, "comment_id": 59425871, "body": "So it enters the <code>if self.days_left_challenged == 0</code>, sets <code>accomplished</code> to <code>true</code> but it still ends up as <code>null</code> in the database?"}, {"owner": {"reputation": 9447, "user_id": 1380867, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5dc27a551f77074a1dcc431e4158704b?s=128&d=identicon&r=PG", "display_name": "MZaragoza", "link": "https://stackoverflow.com/users/1380867/mzaragoza"}, "edited": false, "score": 0, "creation_date": 1457488127, "post_id": 35881081, "comment_id": 59425937, "body": "What are you expecting the <code>date_started.to_date</code>  to be? Past or Future?"}, {"owner": {"reputation": 1141, "user_id": 3251463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hxssB.png?s=128&g=1", "display_name": "Scott Schupbach", "link": "https://stackoverflow.com/users/3251463/scott-schupbach"}, "edited": false, "score": 0, "creation_date": 1457488247, "post_id": 35881081, "comment_id": 59425966, "body": "For debugging purposes, change the if statement in <code>days_left_challenged_sets_deadline</code> to <code>self.accomplished = days_left_challenged == 0 ? true : false</code> and see if that results in <code>accomplished</code> being set to <code>false</code> or if it&#39;s still <code>nil</code>."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1457489579, "post_id": 35881081, "comment_id": 59426329, "body": "You might also try overriding <code>def days_left_challenged=</code>, it&#39;s an alternate approach to <code>before_save</code>."}, {"owner": {"reputation": 1141, "user_id": 3251463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hxssB.png?s=128&g=1", "display_name": "Scott Schupbach", "link": "https://stackoverflow.com/users/3251463/scott-schupbach"}, "edited": false, "score": 0, "creation_date": 1457554148, "post_id": 35881081, "comment_id": 59463567, "body": "And is it still NULL in the database, or is it false?"}, {"owner": {"reputation": 1141, "user_id": 3251463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hxssB.png?s=128&g=1", "display_name": "Scott Schupbach", "link": "https://stackoverflow.com/users/3251463/scott-schupbach"}, "edited": false, "score": 1, "creation_date": 1457554735, "post_id": 35881081, "comment_id": 59463880, "body": "Cool. And btdubs, <code>NULL</code> is the SQL equivalent of Ruby&#39;s <code>nil</code>. I just assumed you were using a relational database, and my bet was on sqlite or postgresql."}], "answers": [{"comments": [{"owner": {"reputation": 1141, "user_id": 3251463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hxssB.png?s=128&g=1", "display_name": "Scott Schupbach", "link": "https://stackoverflow.com/users/3251463/scott-schupbach"}, "edited": false, "score": 1, "creation_date": 1457555110, "post_id": 35901741, "comment_id": 59464104, "body": "I almost suggested that at one point, but assumed days_challenged minus the value returned by the count block plus the missed_days was such that it would always be zero or greater. Glad you figured it out."}], "tags": [], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "is_accepted": true, "score": 0, "last_activity_date": 1457554696, "creation_date": 1457554696, "answer_id": 35901741, "question_id": 35881081, "link": "https://stackoverflow.com/questions/35881081/before-save-method-1-if-method-2-0/35901741#35901741", "title": "before_save method #1 if method #2 == 0?", "body": "<p>It needed to be <code>days_left_challenged &lt;= 0</code> because I didn't realize that it didn't stop at 0. Rookie mistake.</p>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 35901741, "answer_count": 1, "score": -1, "last_activity_date": 1457554696, "creation_date": 1457485387, "question_id": 35881081, "link": "https://stackoverflow.com/questions/35881081/before-save-method-1-if-method-2-0", "title": "before_save method #1 if method #2 == 0?", "body": "<p>If a user retroactively creates a challenge he already <code>accomplished</code> then how can <code>before_save</code> check if <code>days_left_challenged == 0</code>?</p>\n\n<h2>challenge.rb</h2>\n\n<pre><code>  before_save :days_left_challenged_sets_deadline\n\n  def days_left_challenged_sets_deadline\n    if self.days_left_challenged == 0\n      self.accomplished = true\n    end\n  end\n\n  def days_left_challenged\n    self.days_challenged - ((date_started.to_date)..Date.yesterday).count do |date| \n      committed_wdays.include? date.wday\n    end + self.missed_days\n  end\n</code></pre>\n\n<p>With this code right now <code>accomplished</code> remains <code>nil</code> even if the user creates a challenge that would have <code>days_left_challenged == 0</code>.</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "stylesheet"], "comments": [{"owner": {"reputation": 3795, "user_id": 4926817, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/0lH0y.png?s=128&g=1", "display_name": "Noam Hacker", "link": "https://stackoverflow.com/users/4926817/noam-hacker"}, "edited": false, "score": 0, "creation_date": 1457483021, "post_id": 35880659, "comment_id": 59424513, "body": "What window were you trying to open? What is on the associated line in app/views/layouts/application.html.erb?"}, {"owner": {"reputation": 1477, "user_id": 1004379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6f5679275c965b9ea897e27026be433?s=128&d=identicon&r=PG", "display_name": "SacWebDeveloper", "link": "https://stackoverflow.com/users/1004379/sacwebdeveloper"}, "edited": false, "score": 0, "creation_date": 1457488675, "post_id": 35880659, "comment_id": 59426072, "body": "And the error in English?"}, {"owner": {"reputation": 133, "user_id": 4860125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6sY6y.jpg?s=128&g=1", "display_name": "MrKnorke", "link": "https://stackoverflow.com/users/4860125/mrknorke"}, "edited": false, "score": 0, "creation_date": 1457512788, "post_id": 35880659, "comment_id": 59434832, "body": "i use GoogleChrome to open. and  line 5 &amp; 6 in application.html is the following: &lt;%= stylesheet_link_tag    &#39;application&#39;, media: &#39;all&#39;, &#39;data-turbolinks-track&#39; =&gt; true %&gt; \t\t&lt;%= javascript_include_tag &#39;application&#39;, &#39;data-turbolinks-track&#39; =&gt; true %&gt;. The error in English: &#39;typeerror object doesn&#39;t support this property or method&#39;"}, {"owner": {"reputation": 133, "user_id": 4860125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6sY6y.jpg?s=128&g=1", "display_name": "MrKnorke", "link": "https://stackoverflow.com/users/4860125/mrknorke"}, "edited": false, "score": 0, "creation_date": 1457532448, "post_id": 35880659, "comment_id": 59448346, "body": "just found a way to solve this problem... theres a little programm which i had to install on windows : <a href=\"https://nodejs.org/en/\" rel=\"nofollow noreferrer\">nodejs.org/en</a> --- by using this, its possible to write js functions and include stylesheets as like on linux :)"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 6259115, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/f2aae1317655c6ed99e8425313aa8df0?s=128&d=identicon&r=PG", "display_name": "amadjai", "link": "https://stackoverflow.com/users/6259115/amadjai"}, "is_accepted": false, "score": 2, "last_activity_date": 1461720638, "creation_date": 1461720638, "answer_id": 36878739, "question_id": 35880659, "link": "https://stackoverflow.com/questions/35880659/ruby-on-rails-application-coult-not-include-stylesheet-nor-js/36878739#36878739", "title": "Ruby on Rails Application coult not include stylesheet nor js", "body": "<p>You have to change the code application to default like this:-</p>\n\n<pre><code> &lt;%= stylesheet_link_tag    \"default\", media: \"all\", \"data-turbolinks-track\" =&gt; true %&gt;\n&lt;%= javascript_include_tag \"default\", \"data-turbolinks-track\" =&gt; true %&gt;\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 4860125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6sY6y.jpg?s=128&g=1", "display_name": "MrKnorke", "link": "https://stackoverflow.com/users/4860125/mrknorke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 427, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1461720638, "creation_date": 1457482883, "question_id": 35880659, "link": "https://stackoverflow.com/questions/35880659/ruby-on-rails-application-coult-not-include-stylesheet-nor-js", "title": "Ruby on Rails Application coult not include stylesheet nor js", "body": "<p>Im working at a windows 8.1 64bit computer and jetzt succeed in creating a scaffold when i found the next problem ....\nthese are the commands i executed:</p>\n\n<pre><code>rails new obs\ncd obs\nrails generate scaffold Customer name:string\nrake db:migrate\nrails s\n</code></pre>\n\n<p>but i cant open the window because of this error:</p>\n\n<blockquote>\n  <p>TypeError: Das Objekt unterst\u00fctzt diese Eigenschaft oder Methode nicht.\n  Rails.root: C:/Users/Adrian/Documents/Bumblebee</p>\n  \n  <p>Application Trace | Framework Trace | Full Trace\n  app/views/layouts/application.html.erb:5:in `_app_views_layouts_application_html_erb__353703031_44962284'</p>\n</blockquote>\n\n<p>i havent changed anything at the created files. but cant see any problems ...</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 0, "creation_date": 1457480550, "post_id": 35880183, "comment_id": 59423667, "body": "You can use an if/else statement or extract the statements to a method.  Sometimes it also makes sense to put the statements inside a block or a Proc."}, {"owner": {"reputation": 397, "user_id": 5942350, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/441bdfead4798589a2b34c78386b2533?s=128&d=identicon&r=PG&f=1", "display_name": "ZEWEI CHU", "link": "https://stackoverflow.com/users/5942350/zewei-chu"}, "reply_to_user": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 0, "creation_date": 1457480642, "post_id": 35880183, "comment_id": 59423704, "body": "@DavidGrayson Thanks for the advice, but I am working on some code replacement work, which would be great if I can inline some method call by a block of statements."}, {"owner": {"reputation": 22074, "user_id": 4703663, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/kN6k0.jpg?s=128&g=1", "display_name": "Richard Hamilton", "link": "https://stackoverflow.com/users/4703663/richard-hamilton"}, "edited": false, "score": 0, "creation_date": 1457480781, "post_id": 35880183, "comment_id": 59423747, "body": "This is not the kind of code you want to inline. It wouldn&#39;t look that good and it would produce a syntax error. Better to use if-else here"}, {"owner": {"reputation": 1141, "user_id": 3251463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hxssB.png?s=128&g=1", "display_name": "Scott Schupbach", "link": "https://stackoverflow.com/users/3251463/scott-schupbach"}, "edited": false, "score": 2, "creation_date": 1457481267, "post_id": 35880183, "comment_id": 59423932, "body": "Ternaries are basically syntactic sugar for shorter, simpler <code>if...else</code> statements. If your statement is not simple/short, that&#39;s what <code>if...else</code> statements are for."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 2, "creation_date": 1457482501, "post_id": 35880183, "comment_id": 59424353, "body": "I think a really good question is <i>why</i> do you want to do this? Speed? Using ternaries result in code that&#39;s harder and harder to read as they grow and it&#39;s very questionable that it&#39;ll result in any useful improvement. The original code is readable and is the Ruby way."}, {"owner": {"reputation": 22074, "user_id": 4703663, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/kN6k0.jpg?s=128&g=1", "display_name": "Richard Hamilton", "link": "https://stackoverflow.com/users/4703663/richard-hamilton"}, "edited": false, "score": 0, "creation_date": 1457482891, "post_id": 35880183, "comment_id": 59424472, "body": "Using <code>if true</code> is not the ruby way because it always returns true. There&#39;s no need to include that part"}], "answers": [{"comments": [{"owner": {"reputation": 397, "user_id": 5942350, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/441bdfead4798589a2b34c78386b2533?s=128&d=identicon&r=PG&f=1", "display_name": "ZEWEI CHU", "link": "https://stackoverflow.com/users/5942350/zewei-chu"}, "edited": false, "score": 1, "creation_date": 1457480839, "post_id": 35880267, "comment_id": 59423765, "body": "Hi I updated my question description. Do you know how I can solve such a question?"}, {"owner": {"reputation": 22074, "user_id": 4703663, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/kN6k0.jpg?s=128&g=1", "display_name": "Richard Hamilton", "link": "https://stackoverflow.com/users/4703663/richard-hamilton"}, "reply_to_user": {"reputation": 397, "user_id": 5942350, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/441bdfead4798589a2b34c78386b2533?s=128&d=identicon&r=PG&f=1", "display_name": "ZEWEI CHU", "link": "https://stackoverflow.com/users/5942350/zewei-chu"}, "edited": false, "score": 0, "creation_date": 1457482840, "post_id": 35880267, "comment_id": 59424450, "body": "Take a look at my answer"}], "tags": [], "owner": {"reputation": 22074, "user_id": 4703663, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/kN6k0.jpg?s=128&g=1", "display_name": "Richard Hamilton", "link": "https://stackoverflow.com/users/4703663/richard-hamilton"}, "is_accepted": false, "score": 0, "last_activity_date": 1457482305, "last_edit_date": 1457482305, "creation_date": 1457480575, "answer_id": 35880267, "question_id": 35880183, "link": "https://stackoverflow.com/questions/35880183/is-there-a-way-to-group-a-block-of-statements/35880267#35880267", "title": "Is there a way to group a block of statements?", "body": "<p>Your code can be reduced to just one line.</p>\n\n<pre><code>%w(a b c).each { |char| puts char }\n</code></pre>\n\n<p>The <code>else</code> statement is irrelevant here, because <code>true</code> will always return true.</p>\n"}, {"comments": [{"owner": {"reputation": 397, "user_id": 5942350, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/441bdfead4798589a2b34c78386b2533?s=128&d=identicon&r=PG&f=1", "display_name": "ZEWEI CHU", "link": "https://stackoverflow.com/users/5942350/zewei-chu"}, "edited": false, "score": 0, "creation_date": 1457557824, "post_id": 35882404, "comment_id": 59465674, "body": "Great! Thanks a lot."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 397, "user_id": 5942350, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/441bdfead4798589a2b34c78386b2533?s=128&d=identicon&r=PG&f=1", "display_name": "ZEWEI CHU", "link": "https://stackoverflow.com/users/5942350/zewei-chu"}, "edited": false, "score": 1, "creation_date": 1457578606, "post_id": 35882404, "comment_id": 59473670, "body": "You haven&#39;t voted or accepted any of the answers to your questions so far."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1457494876, "last_edit_date": 1457494876, "creation_date": 1457494497, "answer_id": 35882404, "question_id": 35880183, "link": "https://stackoverflow.com/questions/35880183/is-there-a-way-to-group-a-block-of-statements/35882404#35882404", "title": "Is there a way to group a block of statements?", "body": "<p>Yes. You can either use parentheses, or <code>begin</code>...<code>end</code>.</p>\n\n<pre><code>true ? (\n  puts \"a\"\n  puts \"b\"\n  puts \"c\"\n) : (\n  puts \"d\"\n)\n\n\ntrue ? begin\n  puts \"a\"\n  puts \"b\"\n  puts \"c\"\nend : begin\n  puts \"d\"\nend\n</code></pre>\n"}], "owner": {"reputation": 397, "user_id": 5942350, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/441bdfead4798589a2b34c78386b2533?s=128&d=identicon&r=PG&f=1", "display_name": "ZEWEI CHU", "link": "https://stackoverflow.com/users/5942350/zewei-chu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1457495469, "creation_date": 1457480110, "last_edit_date": 1457495469, "question_id": 35880183, "link": "https://stackoverflow.com/questions/35880183/is-there-a-way-to-group-a-block-of-statements", "title": "Is there a way to group a block of statements?", "body": "<p>I am working on some refactoring tool. It would be great if I can replace some method call in place by its definition, which would generally be a block of statements. For example, the original code may be:</p>\n\n<pre><code>some_condition ? a : b\ndef a\n  ...\n  # statements1\n  ...\nend\ndef d\n  ...\n  # statements2\n  ...\nend\n</code></pre>\n\n<p>and I want my inlining tool to replace the method call by the blocks of code directly.</p>\n\n<p>To do that, I want to group a list of statements together. How do we usually do that? Is there a way of writing code like this?</p>\n\n<pre><code>some_condition ? {\n  ...\n  # statements1\n  ...\n} : {\n  ...\n  # statements2\n  ...\n}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "sqlite", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 1141, "user_id": 3251463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hxssB.png?s=128&g=1", "display_name": "Scott Schupbach", "link": "https://stackoverflow.com/users/3251463/scott-schupbach"}, "edited": false, "score": 0, "creation_date": 1457481529, "post_id": 35879826, "comment_id": 59424033, "body": "Are your pairings always one supervisor and one student? And is it always the supervisor that creates the meeting? Or can students create meetings as well?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1457489817, "post_id": 35879826, "comment_id": 59426392, "body": "Is your question how to create a join record? Where is the code you need to add located (model, view, or controller?)"}, {"owner": {"reputation": 171, "user_id": 5895250, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6d2741e6e584ca6fff8e856b324e9b4c?s=128&d=identicon&r=PG&f=1", "display_name": "Yoklan", "link": "https://stackoverflow.com/users/5895250/yoklan"}, "reply_to_user": {"reputation": 1141, "user_id": 3251463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hxssB.png?s=128&g=1", "display_name": "Scott Schupbach", "link": "https://stackoverflow.com/users/3251463/scott-schupbach"}, "edited": false, "score": 0, "creation_date": 1457549846, "post_id": 35879826, "comment_id": 59460969, "body": "@ScottSchupbach A student can be paired with only 1 supervisor, a supervisor can have many students. Only supervisors can create meetings which the studens that are paired to them can see and request"}, {"owner": {"reputation": 171, "user_id": 5895250, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6d2741e6e584ca6fff8e856b324e9b4c?s=128&d=identicon&r=PG&f=1", "display_name": "Yoklan", "link": "https://stackoverflow.com/users/5895250/yoklan"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1457549944, "post_id": 35879826, "comment_id": 59461021, "body": "@maxpleaner I&#39;m more so asking how to create a record in the join table from within the controller when meeting is created (by the supervisor)"}], "answers": [{"tags": [], "owner": {"reputation": 171, "user_id": 5895250, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6d2741e6e584ca6fff8e856b324e9b4c?s=128&d=identicon&r=PG&f=1", "display_name": "Yoklan", "link": "https://stackoverflow.com/users/5895250/yoklan"}, "is_accepted": true, "score": 0, "last_activity_date": 1457631777, "creation_date": 1457631777, "answer_id": 35923578, "question_id": 35879826, "link": "https://stackoverflow.com/questions/35879826/adding-association-to-join-table-for-habtm-relationship/35923578#35923578", "title": "Adding Association to Join Table for HaBtM Relationship", "body": "<p>Decided to use a has_many :through (user-meeting-user) relationship instead. Question no longer relevant.</p>\n"}], "owner": {"reputation": 171, "user_id": 5895250, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6d2741e6e584ca6fff8e856b324e9b4c?s=128&d=identicon&r=PG&f=1", "display_name": "Yoklan", "link": "https://stackoverflow.com/users/5895250/yoklan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 35923578, "answer_count": 1, "score": 0, "last_activity_date": 1457631777, "creation_date": 1457478347, "question_id": 35879826, "link": "https://stackoverflow.com/questions/35879826/adding-association-to-join-table-for-habtm-relationship", "title": "Adding Association to Join Table for HaBtM Relationship", "body": "<p>I currently have 3 models (user, pairing, meetings), and the join table meetings_pairings.</p>\n\n<p>User.rb</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n\n  enum role: [:student, :supervisor, :admin]\n\n  has_many :students, class_name: \"User\",\n                      foreign_key: \"supervisor_id\"\n\n  belongs_to :supervisor, class_name: \"User\"\n\n  has_and_belongs_to_many :pairings\n\nend\n</code></pre>\n\n<p>Pairings.rb</p>\n\n<pre><code>class Pairing &lt; ActiveRecord::Base\n\n  has_and_belongs_to_many :supervisor, class_name: 'User'\n  belongs_to :student, class_name: 'User'\n\n  has_and_belongs_to_many :meetings, join_table: :meetings_pairings\n\nend\n</code></pre>\n\n<p>Meetings.rb</p>\n\n<pre><code>class Meeting &lt; ActiveRecord::Base\n\n    enum status: [:available, :unavailable]\n\n    has_and_belongs_to_many :pairings, join_table: :meetings_pairings\n\nend\n</code></pre>\n\n<p>Schema.rb (relevant bits)</p>\n\n<pre><code>  create_table \"meetings\", force: :cascade do |t|\n    t.date     \"meeting_date\"\n    t.datetime \"meeting_time\"\n    t.integer  \"status\",       default: 0, null: false\n    t.boolean  \"accepted\"\n  end\n\n  create_table \"meetings_pairings\", id: false, force: :cascade do |t|\n    t.integer \"pairing_id\"\n    t.integer \"meeting_id\"\n  end\n\n  add_index \"meetings_pairings\", [\"meeting_id\"], name: \"index_meetings_pairings_on_meeting_id\"\n  add_index \"meetings_pairings\", [\"pairing_id\"], name: \"index_meetings_pairings_on_pairing_id\"\n\n  create_table \"pairings\", force: :cascade do |t|\n    t.integer  \"supervisor_id\"\n    t.integer  \"student_id\"\n    t.string   \"project_title\"\n  end\n\n  add_index \"pairings\", [\"student_id\"], name: \"index_pairings_on_student_id\", unique: true\n  add_index \"pairings\", [\"supervisor_id\"], name: \"index_pairings_on_supervisor_id\"\n</code></pre>\n\n<p>I created the view and controller to enable a user (supervisor, which is in a pairing) to create a meeting. However I don't know how to add this association to the join table.</p>\n\n<p>meetings_controller.rb</p>\n\n<pre><code>class MeetingsController &lt; ApplicationController\n\n    def index\n        @meetings = Meeting.all\n    end\n\n    def new\n        @meeting = Meeting.new\n    end\n\n    def create\n        @meeting = Meeting.new(meeting_params)\n        if @meeting.save\n      redirect_to meetings_path, :notice =&gt; \"Meeting Created!\"\n    else \n      redirect_to meetings_path, :notice =&gt; \"Meeting Failed!\"\n    end\n  end\n\n  def show\n    @meeting = Meeting.find(params[:id])\n  end  \n\n  private\n  def meeting_params\n    params.require(:meeting).permit(:meeting_date, :meeting_time)\n  end\n\nend\n</code></pre>\n\n<p>Form from the view</p>\n\n<pre><code>&lt;%= form_for @meeting do |f| %&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :meeting_date %&gt;&lt;br /&gt;\n    &lt;%= f.text_field :meeting_date %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :meeting_time %&gt;&lt;br /&gt;\n    &lt;%= f.time_select :meeting_time, :ampm =&gt; true, :minute_step =&gt; 30, :default =&gt; {:hour =&gt; '9', :minute =&gt; '0'} %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>This creates an entry in the meetings table, so my question is how can I make it so that an entry is made into the join table with the pairing id of the current user who created the meeting ?</p>\n"}, {"tags": ["ruby", "rspec", "floating-point"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1457480718, "post_id": 35879600, "comment_id": 59423730, "body": "This isn&#39;t a duplicate of the canonical <a href=\"http://stackoverflow.com/q/588004/479863\">&quot;floating point is broken&quot;</a> question due to the presence of Ruby&#39;s BigDecimal and RSpec."}], "answers": [{"tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 4, "last_activity_date": 1457497878, "last_edit_date": 1457497878, "creation_date": 1457478764, "answer_id": 35879914, "question_id": 35879600, "link": "https://stackoverflow.com/questions/35879600/some-bigdecimal-values-dont-match-with-float/35879914#35879914", "title": "Some `BigDecimal` values don&#39;t match with `Float`", "body": "<p>You should never try any sort of strict equality testing with floating point values. You always have to deal with inaccurate internal representation issues with <code>Float</code>, so <code>==</code> and <code>!=</code> aren't terribly useful.</p>\n\n<p>Consider this:</p>\n\n<pre><code>'83.79'.to_d - 83.79\n# =&gt; #&lt;BigDecimal:7ff33fcea560,'-0.1E-13',9(36)&gt; \n'83.75'.to_d - 83.75\n# =&gt; #&lt;BigDecimal:7ff33fcee688,'0.0',9(27)&gt; \n</code></pre>\n\n<p>Note that the difference for <code>83.79</code> is not quite zero.</p>\n\n<p>If you need to compare floating point values, you always need to use a delta in your comparison; you always want to say:</p>\n\n<blockquote>\n  <p>Are these values within some small amount from each other?</p>\n</blockquote>\n\n<p>rather than</p>\n\n<blockquote>\n  <p>Are these values equal?</p>\n</blockquote>\n\n<p>In Rspec terms:</p>\n\n<pre><code>expect('83.75'.to_d).to be_within(1e-12).of(83.75)\nexpect('83.79'.to_d).to be_within(1e-12).of(83.79)\n</code></pre>\n\n<p>and choose the delta (<code>1e-12</code> in this case) to match your requirements.</p>\n"}, {"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1457538246, "post_id": 35885327, "comment_id": 59452921, "body": "&quot;big decimal is more accurate than float&quot; \u2013 in fact, there are infinitely many <code>BigDecimal</code>s but only 2**64 <code>Float</code>s, so there are infinitely many more <code>BigDecimal</code>s than there are <code>Float</code>s."}], "tags": [], "owner": {"reputation": 8425, "user_id": 1396822, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f2e818842b0436e98b279af7f69997cb?s=128&d=identicon&r=PG", "display_name": "aka.nice", "link": "https://stackoverflow.com/users/1396822/aka-nice"}, "is_accepted": false, "score": 2, "last_activity_date": 1457507960, "creation_date": 1457507960, "answer_id": 35885327, "question_id": 35879600, "link": "https://stackoverflow.com/questions/35879600/some-bigdecimal-values-dont-match-with-float/35885327#35885327", "title": "Some `BigDecimal` values don&#39;t match with `Float`", "body": "<p>\"83.79\".to_d is representing the fraction 8379/100 exactly in internal representation because it uses a base 10 (or a power of it), while \"83.79\".to_f is not because internal representation uses a base 2, so these are not equal.</p>\n\n<p>That's not the same for 83.75 because is is represented exactly in both base 2 and 10 (this is 83 + 1/2 + 1/4).</p>\n\n<p>If you mix big decimals and floats in the same expression, floats are then converted to the nearest big decimal... Thus, you are in fact performing this: <code>83.79.to_d</code> or put differently <code>\"83.79\".to_f.to_d</code><br>\nSince <code>\"83.79\".to_f</code> is not exact, and since big decimal is more accurate than float, there's no reason that it matches <code>\"83.79\".to_d</code>.</p>\n\n<p>However, if you force the conversion the other way, I would expect that equality holds:</p>\n\n<pre><code>expect(\"83.79\".to_d.to_f).to eq(83.79)\n</code></pre>\n\n<p>This is because we can reasonnably expect (least astonishment) that conversions to_f will answer the nearest floating point to the exact fraction, be it from an exact big decimal or a string representation.</p>\n"}], "owner": {"reputation": 11845, "user_id": 1536527, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Sgr8O.png?s=128&g=1", "display_name": "ironsand", "link": "https://stackoverflow.com/users/1536527/ironsand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1433, "favorite_count": 0, "accepted_answer_id": 35879914, "answer_count": 2, "score": 2, "last_activity_date": 1457507960, "creation_date": 1457477395, "last_edit_date": 1457497636, "question_id": 35879600, "link": "https://stackoverflow.com/questions/35879600/some-bigdecimal-values-dont-match-with-float", "title": "Some `BigDecimal` values don&#39;t match with `Float`", "body": "<p>Some <code>BigDecimal</code> values can be compared with a <code>Float</code> by <code>eq</code> in Rspec3, but some values can't be.</p>\n\n<pre><code>describe \"compare BigDecimal with Float\" do\n    it { expect(\"83.79\".to_d).to eq(83.79) } # =&gt; fail\n    it { expect(\"83.75\".to_d).to eq(83.75) } # =&gt; succeed\nend\n</code></pre>\n\n<p>To avoid error, I'm using expressions like <code>eq(\"83.79\".to_d)</code>.</p>\n\n<p>Why does the first test fail while the second succeeds?</p>\n"}, {"tags": ["ruby", "regex", "nlp"], "comments": [{"owner": {"reputation": 6661, "user_id": 881224, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/89801345d3cb4af8703edf79bd5869f9?s=128&d=identicon&r=PG", "display_name": "Droogans", "link": "https://stackoverflow.com/users/881224/droogans"}, "edited": false, "score": 1, "creation_date": 1457475449, "post_id": 35879091, "comment_id": 59421623, "body": "Don&#39;t use regular expressions for free-form, unstructured content. Have you considered using an NLP gem, <a href=\"https://github.com/louismullie/treat/wiki/Quick-Tour\" rel=\"nofollow noreferrer\">such as <code>treat</code></a>?"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1457476882, "post_id": 35879091, "comment_id": 59422246, "body": "There also exist Ruby bindings for the Stanford Core NLP package: <a href=\"https://github.com/louismullie/stanford-core-nlp\" rel=\"nofollow noreferrer\">github.com/louismullie/stanford-core-nlp</a>"}, {"owner": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "edited": false, "score": 0, "creation_date": 1457501179, "post_id": 35879091, "comment_id": 59429644, "body": "Not solvable reliably with regex. Parse (or otherwise get) the data as an actual tree."}, {"owner": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "edited": false, "score": 0, "creation_date": 1457501304, "post_id": 35879091, "comment_id": 59429692, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/1038186/are-there-particular-cases-where-native-text-manipulation-is-more-desirable-than\">Are there particular cases where native text manipulation is more desirable than regex?</a>"}, {"owner": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "edited": false, "score": 0, "creation_date": 1457501580, "post_id": 35879091, "comment_id": 59429784, "body": "Or <a href=\"http://stackoverflow.com/questions/14708047/how-to-extract-the-noun-phrases-using-open-nlps-chunking-parser\" title=\"how to extract the noun phrases using open nlps chunking parser\">stackoverflow.com/questions/14708047/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 388, "user_id": 2308639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1345a48fa1dbe24e85506de63b6c07f0?s=128&d=identicon&r=PG", "display_name": "Stephen Grimes", "link": "https://stackoverflow.com/users/2308639/stephen-grimes"}, "is_accepted": false, "score": 0, "last_activity_date": 1457478020, "creation_date": 1457478020, "answer_id": 35879751, "question_id": 35879091, "link": "https://stackoverflow.com/questions/35879091/regex-to-extract-noun-phrases-from-a-part-of-speech-parse-tree/35879751#35879751", "title": "Regex to extract Noun Phrases from a Part of Speech parse tree?", "body": "<p>I don't see a way to use regular expressions unless are able to consider all possible structures. What you did works for simple cases, but as you found, it fails with deeper, nested structures. I see two options:</p>\n\n<ol>\n<li><p>From the point where you encounter <code>(NP</code> in the text, read in additional characters. Keep a running tally of parenthesis. Add to it when you see <code>(</code>, subtract when you see <code>)</code>. When you get to zero, you've reached the end of the <code>NP</code>.</p></li>\n<li><p>Parse the tree using <a href=\"https://rubygems.org/gems/rubytree/versions/0.9.7\" rel=\"nofollow\">rubytree</a>. Extract all subtrees that are dominated by a node with label of <code>NP</code>. Convert the subtree back to string form by concatenating leaf nodes.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 2, "last_activity_date": 1457486494, "creation_date": 1457486494, "answer_id": 35881229, "question_id": 35879091, "link": "https://stackoverflow.com/questions/35879091/regex-to-extract-noun-phrases-from-a-part-of-speech-parse-tree/35881229#35881229", "title": "Regex to extract Noun Phrases from a Part of Speech parse tree?", "body": "<p>Specifically for three words, it is possible, but not pretty. For N words, the complexity of the regexp rises. Note that this is just for fun (and regexp/Oniguruma education); in reality, I'd suggest to go with what everyone else says: use a tree parsing library and manipulate the tree.</p>\n\n<pre><code>str = \"(ROOT (SQ (NNP Should) (NP (PRP I)) (VP (VB watch) (NP (NP (NNP Game)) (PP (IN of) (NP (NNP Thrones)))) ) (. ?)))\"\n\nre = /\n  (?&lt;tag&gt;\n    [A-Z]+\n  ){0}\n\n  (?&lt;word&gt;\n    \\( \\g&lt;tag&gt; \\s\n    (?:\n      [^()]+ |\n      \\g&lt;word&gt;\n    )\n    \\)\n  ){0}\n\n  (?&lt;word2&gt;\n    \\g&lt;word&gt; \\s \\g&lt;word&gt; |\n    \\( \\g&lt;tag&gt; \\s \\g&lt;word2&gt; \\)\n  ){0}\n\n  (?&lt;word3&gt;\n    \\g&lt;word&gt; \\s \\g&lt;word&gt; \\s \\g&lt;word&gt; |\n    \\g&lt;word2&gt; \\s \\g&lt;word&gt; |\n    \\g&lt;word&gt; \\s \\g&lt;word2&gt; |\n    \\( \\g&lt;tag&gt; \\s \\g&lt;word3&gt; \\)\n  ){0}\n  \\( NP \\s \\g&lt;word3&gt; \\)\n/x;\n\nputs str[re]\n# =&gt; (NP (NP (NNP Game)) (PP (IN of) (NP (NNP Thrones))))\n</code></pre>\n"}], "owner": {"reputation": 17608, "user_id": 661624, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/347231f8387561ef324e25b48b96ba16?s=128&d=identicon&r=PG&f=1", "display_name": "Henley Chiu", "link": "https://stackoverflow.com/users/661624/henley-chiu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 489, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1457486494, "creation_date": 1457475255, "last_edit_date": 1457476598, "question_id": 35879091, "link": "https://stackoverflow.com/questions/35879091/regex-to-extract-noun-phrases-from-a-part-of-speech-parse-tree", "title": "Regex to extract Noun Phrases from a Part of Speech parse tree?", "body": "<p>I am trying to extract all three word noun phrases from a Stanford POS Parse Tree. Basically, anything that looks like:</p>\n\n\n\n<pre class=\"lang-none prettyprint-override\"><code>(NP (TAG WORD) (TAG WORD) (TAG WORD))\n</code></pre>\n\n<p>Or:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>(NP (TAG WORD) (TAG (TAG WORD) (TAG WORD)))\n</code></pre>\n\n<p>This is what a parse tree can look like:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>(ROOT (SQ (VBZ Is) (NP (DT this)) (NP (DT an) (NN asthma) (NN attack)) (. ?)))\n</code></pre>\n\n<p>When I do this regex, it extracts the correct 3 word noun phrase:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>threeWordNounPhrases = full.scan(/\\(NP \\([^()]+ [^()]+\\) \\([^()]+ [^()]+\\)\\)/)\n# =&gt; \"(NP (DT an) (NN asthma) (NN attack))\"\n</code></pre>\n\n<p>However, this does not work for something like:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>(ROOT (SQ (NNP Should) (NP (PRP I)) (VP (VB watch) (NP (NP (NNP Game)) (PP (IN of) (NP (NNP Thrones)))) ) (. ?)))\n</code></pre>\n\n<p>Which should return:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>(NP (NP (NNP Game)) (PP (IN of) (NP (NNP Thrones))))\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ssl", "oauth", "stripe-connect"], "answers": [{"tags": [], "owner": {"reputation": 262, "user_id": 3298823, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/60f232620bc017bf49a5284ab2078d59?s=128&d=identicon&r=PG&f=1", "display_name": "user3298823", "link": "https://stackoverflow.com/users/3298823/user3298823"}, "is_accepted": true, "score": 0, "last_activity_date": 1457475445, "creation_date": 1457475445, "answer_id": 35879143, "question_id": 35878793, "link": "https://stackoverflow.com/questions/35878793/ssl-issue-with-oauth-ruby-on-rails/35879143#35879143", "title": "SSL issue with oauth ruby on rails", "body": "<p>I guess I found a work around by adding</p>\n\n<p>config.force_ssl = false</p>\n\n<p>to config/application.rb</p>\n"}], "owner": {"reputation": 262, "user_id": 3298823, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/60f232620bc017bf49a5284ab2078d59?s=128&d=identicon&r=PG&f=1", "display_name": "user3298823", "link": "https://stackoverflow.com/users/3298823/user3298823"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 35879143, "answer_count": 1, "score": 0, "last_activity_date": 1457475445, "creation_date": 1457474042, "question_id": 35878793, "link": "https://stackoverflow.com/questions/35878793/ssl-issue-with-oauth-ruby-on-rails", "title": "SSL issue with oauth ruby on rails", "body": "<p>I'm attempting to use an oauth library so I can work with stripe connect. </p>\n\n<p><a href=\"https://github.com/intridea/oauth2\" rel=\"nofollow\">https://github.com/intridea/oauth2</a> is the gem I am using. However whenever I actually attempt to use it like so:</p>\n\n<pre><code> @resp = client.auth_code.get_token(code, :params =&gt; {:scope =&gt; 'read_write'})\n</code></pre>\n\n<p>every time I get just this error. </p>\n\n<pre><code>Faraday::SSLError (SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed):\n</code></pre>\n\n<p>I've tried so many different solutions but I can't get anything to work. Everything online so far has said I should update a certificate, which I did using 4 different ways I found here. </p>\n\n<p>I'm not sure what to do. </p>\n"}, {"tags": ["ruby", "xpath", "cucumber", "capybara"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 2, "creation_date": 1457474771, "post_id": 35878456, "comment_id": 59421265, "body": "Welcome to SO. Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. We need the minimal input, plus an example of your code demonstrating the problem, along with the expected output. Also, it&#39;s not necessary to say &quot;Please help&quot;, since that&#39;s what the site is for in the first place. You should also read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and all the links at the bottom of the page as it&#39;ll help you ask a better question."}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1457474868, "post_id": 35878929, "comment_id": 59421323, "body": "The OP needs to show more information; Guessing what they&#39;re trying to do is an exercise in frustration. Instead, request what you need so you can formulate the answer that definitely solves the problem."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1457475116, "post_id": 35878929, "comment_id": 59421449, "body": "@theTinMan That makes sense when there is no chance of guessing what the OP really meant - and that ends up meaning a roundtrip of days before things get answered.  Sometimes its easier to make assumptions (talking about rows and columns means its somewhat likely to be a table) and answer that.  The answer can always be removed if the OP clarifies that its not a table"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1457475237, "post_id": 35878929, "comment_id": 59421513, "body": "You can also gather lots of downvotes quickly if the assumption is wrong. Since the idea is that we ask questions to improve the question to make it more useful for future users <i>along with</i> the OP, it benefits everyone to get clarification up front since it&#39;ll never happen after the fact."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1457475478, "post_id": 35878929, "comment_id": 59421635, "body": "@theTinMan So I get downvotes - doesn&#39;t really bother me.  If the assumption is correct it becomes obvious when the OP accepts the answer.  If not the OP will clarify and the answer can be deleted or downvoted. If the assumption is correct the question is answered more quickly.  If the assumption is incorrect no more time elapses than would have normally - I don&#39;t get the downside."}, {"owner": {"reputation": 47, "user_id": 5859086, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5f3afc00a67f13fbdab18db6d52d804?s=128&d=identicon&r=PG&f=1", "display_name": "RPD", "link": "https://stackoverflow.com/users/5859086/rpd"}, "edited": false, "score": 0, "creation_date": 1457535094, "post_id": 35878929, "comment_id": 59450336, "body": "Sorry for not describing my problem completely."}, {"owner": {"reputation": 47, "user_id": 5859086, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5f3afc00a67f13fbdab18db6d52d804?s=128&d=identicon&r=PG&f=1", "display_name": "RPD", "link": "https://stackoverflow.com/users/5859086/rpd"}, "edited": false, "score": 0, "creation_date": 1457535606, "post_id": 35878929, "comment_id": 59450740, "body": "Code i used:<code>require &#39;rubyXL&#39; require &#39;roo&#39; workbook = Roo::Spreadsheet.open(file_name) workbook1 = RubyXL::Parser.parse(file_name) workbook.default_sheet=&#39;AllocationChange&#39; worksheet1 = workbook1[&#39;AllocationChange&#39;] choose(&quot;lookupSearch&quot;, :option =&gt; &quot;Contract&quot;)\t fill_in &quot;searchInput&quot;, :with =&gt; workbook.cell(1,1) find(:xpath, &#39;&#47;&#47;*[@id=&quot;sidebar&quot;]&#47;div[2]&#47;div&#47;a[2]&#39;).click find(:xpath, &#39;&#47;&#47;*[@id=&quot;edit_contains(0,9)%]&quot;]&#39;).click find(:xpath, &#39;&#47;&#47;*[@id=&quot;deleteDetails&quot;]&#39;).click    </code>"}, {"owner": {"reputation": 47, "user_id": 5859086, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5f3afc00a67f13fbdab18db6d52d804?s=128&d=identicon&r=PG&f=1", "display_name": "RPD", "link": "https://stackoverflow.com/users/5859086/rpd"}, "edited": false, "score": 0, "creation_date": 1457539378, "post_id": 35878929, "comment_id": 59453842, "body": "yes it is a table with 7 columns. Rows are dynamic. So once i submit a value the row gets incremented and the submitted data is displayed in the first row. The last column(#7) has two icons edit and view. Now i need to click on the edit of the first row -last column. I&#39;m writing in cucumber -ruby- capybara. <code>HTML``&lt;td class=&quot;edit_icon&quot; id=&quot;edit_1094&quot; onclick=&quot;onEditClick(1094)&quot;&gt;&lt;span class=&quot;view_icon&quot; style=&quot;margin-left: 30%;&quot;&gt;&lt;&#47;span&gt;&lt;&#47;td&gt;</code>"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 47, "user_id": 5859086, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5f3afc00a67f13fbdab18db6d52d804?s=128&d=identicon&r=PG&f=1", "display_name": "RPD", "link": "https://stackoverflow.com/users/5859086/rpd"}, "edited": false, "score": 0, "creation_date": 1457539638, "post_id": 35878929, "comment_id": 59454039, "body": "@RPD  If the solution I posted isn&#39;t working for you - edit your question above and add some example HTML so you can format it correctly"}, {"owner": {"reputation": 47, "user_id": 5859086, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5f3afc00a67f13fbdab18db6d52d804?s=128&d=identicon&r=PG&f=1", "display_name": "RPD", "link": "https://stackoverflow.com/users/5859086/rpd"}, "edited": false, "score": 0, "creation_date": 1457542087, "post_id": 35878929, "comment_id": 59455751, "body": "@ Tom Walpole Yes the solution is not working . I have edited the query by adding html code, my code and the error message. Please advice"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 47, "user_id": 5859086, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5f3afc00a67f13fbdab18db6d52d804?s=128&d=identicon&r=PG&f=1", "display_name": "RPD", "link": "https://stackoverflow.com/users/5859086/rpd"}, "edited": false, "score": 0, "creation_date": 1457543048, "post_id": 35878929, "comment_id": 59456451, "body": "@RPD the selector you show in your code is the not the one I had above so I&#39;m not sure what you&#39;re showing - I&#39;ve updated the answer to match the html you posted"}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 0, "last_activity_date": 1457543076, "last_edit_date": 1457543076, "creation_date": 1457474575, "answer_id": 35878929, "question_id": 35878456, "link": "https://stackoverflow.com/questions/35878456/xpath-of-the-edit-button-is-id-edit-1088/35878929#35878929", "title": "XPath of the edit button is //*[@id=&quot;edit_1088&quot;]", "body": "<p>Update based on the posted HTML -  </p>\n\n<p>Note: Your first &lt;td> isn't closed, I'm assuming thats just an error when you were adding the HTML to the question. </p>\n\n<p>So from the HTML posted you don't actually have an edit link you just have a td you need to click on - the one in the first row with an id beginning with \"edit_\" so</p>\n\n<pre><code>find('tr:first-child &gt; td[id^=\"edit_\"]').click\n</code></pre>\n\n<p>The attempt you posted in your question won't work because there is no such CSS selector as <code>odd</code> or <code>edit_icon</code> and find needs valid CSS selectors (or XPath if you specify XPath or set it as your default) </p>\n\n<p>Previous Answer Based on the wording of the question:</p>\n\n<p>If this is a table then you can do what you want with CSS and not worry about XPath.</p>\n\n<pre><code>find('tr:first-child &gt; td:last-child [id^=\"edit_\"]')\n</code></pre>\n\n<p>will find the element whose <code>id</code> starts with \"edit_\" in the last td in the first row.  If your rows and columns are not actually a table you'll need to provide some example HTML of what you're talking about.</p>\n"}], "owner": {"reputation": 47, "user_id": 5859086, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5f3afc00a67f13fbdab18db6d52d804?s=128&d=identicon&r=PG&f=1", "display_name": "RPD", "link": "https://stackoverflow.com/users/5859086/rpd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 35878929, "answer_count": 1, "score": -2, "last_activity_date": 1457543076, "creation_date": 1457472790, "last_edit_date": 1457542024, "question_id": 35878456, "link": "https://stackoverflow.com/questions/35878456/xpath-of-the-edit-button-is-id-edit-1088", "title": "XPath of the edit button is //*[@id=&quot;edit_1088&quot;]", "body": "<p>My query is I need to click on the first edit link on the table. The table has 7 columns and rows will be incremented dynamically.\nHTML Code for first row:</p>\n\n<pre><code>&lt;tr role=\"row\" class=\"odd\"&gt;\n&lt;td&gt;\n&lt;form method=\"GET\" target=\"_blank\" action&gt;...&lt;/form&gt;\n&lt;td&gt; ALLOCATION CHANGE&lt;/td&gt;\n&lt;td class=\"right\"&gt;&lt;/td&gt;\n&lt;td&gt; SATTER, KRAIG&lt;/td&gt;\n&lt;td&gt; CAFEMANAGER1&lt;/td&gt;\n&lt;td class=\"sorting_1\"&gt;03/08/2016 17:00&lt;/td&gt;\n&lt;td class=\"edit_icon\" id=\"edit_1088\" onclick=\"on EditClick(1088)\"&gt;\n&lt;span class=\"view_icon\" style=\"margin-left: 40%;\"&gt;&lt;/span&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n</code></pre>\n\n<p>Note: the ID of the edit button keep on changing as the row increments.</p>\n\n<p>Mycode in cucumber -ruby -capybara</p>\n\n<pre><code> And /^I click on the Expresso image$/ do\n find(:xpath, '//*[@id=\"l1row\"]/span').click\n find('tr:odd &gt; td:edit_icon [id=\"edit_\"] match: first').click\n sleep 10\n end\n</code></pre>\n\n<p>Error Message: invalid selector: An invalid or illegal selector was specified</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1141, "user_id": 3251463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hxssB.png?s=128&g=1", "display_name": "Scott Schupbach", "link": "https://stackoverflow.com/users/3251463/scott-schupbach"}, "edited": false, "score": 0, "creation_date": 1457488476, "post_id": 35878301, "comment_id": 59426023, "body": "Is get_purchase_request_statuses returning an array of strings? If not, make sure the output of that function is an array.   Also, are you sure you&#39;re not filtering the params in the controller with a <code>params.require().permit()</code> statement before they get to the point where you&#39;re inspecting them? If you are, make sure :status and :status2 are arguments of the permit method."}, {"owner": {"reputation": 39, "user_id": 3245845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1xEzn.jpg?s=128&g=1", "display_name": "podzach", "link": "https://stackoverflow.com/users/3245845/podzach"}, "reply_to_user": {"reputation": 1141, "user_id": 3251463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hxssB.png?s=128&g=1", "display_name": "Scott Schupbach", "link": "https://stackoverflow.com/users/3251463/scott-schupbach"}, "edited": false, "score": 0, "creation_date": 1457529649, "post_id": 35878301, "comment_id": 59446284, "body": "Thanks for the quick response.  1)  The get_purchase_request_statuses is returning an array and is populating the drop down list correctly.  2) I don&#39;t have a params.require statement anywhere within my code.  Should I?"}], "answers": [{"tags": [], "owner": {"reputation": 39, "user_id": 3245845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1xEzn.jpg?s=128&g=1", "display_name": "podzach", "link": "https://stackoverflow.com/users/3245845/podzach"}, "is_accepted": false, "score": 0, "last_activity_date": 1457702817, "creation_date": 1457702817, "answer_id": 35941474, "question_id": 35878301, "link": "https://stackoverflow.com/questions/35878301/returning-the-value-from-a-select-tag-as-a-parameter/35941474#35941474", "title": "Returning the value from a select_tag as a parameter", "body": "<p>I found my problem.  I was missing the form_tag and was using a link_to rather than a submit_tag.  This is the code that works</p>\n\n<pre><code>&lt;div class=\"modal hide\" id=\"download_purchase_requests\"&gt;\n  &lt;div class=\"modal-header\"&gt;\n    &lt;button type=\"button\" class=\"close\" data-dismiss=\"modal\"&gt;\u00d7&lt;/button&gt;\n    &lt;h3&gt;Download Purchase Requests&lt;/h3&gt;\n  &lt;/div&gt;\n  &lt;%= form_tag({:action =&gt; :export, :controller =&gt; :purchase_requests}, :multipart =&gt; true) do %&gt;\n  &lt;div class=\"modal-body\"&gt;\n    &lt;div class=\"control-group\"&gt;\n      &lt;label class=\"control-label\"&gt;From&lt;/label&gt;\n      &lt;div class=\"controls\"&gt;\n        &lt;%= text_field_tag \"purchase_requests_from_time\", Date.today.beginning_of_month, :class =&gt; \"text date_picker report_start_time_picker\" %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"control-group\"&gt;\n      &lt;label class=\"control-label\"&gt;To&lt;/label&gt;\n      &lt;div class=\"controls\"&gt;\n        &lt;%= text_field_tag \"purchase_requests_to_time\", Date.today.end_of_month, :class =&gt; \"text date_picker report_start_time_picker\" %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"control-group\"&gt;\n      &lt;label class=\"control-label\"&gt;Status&lt;/label&gt;\n      &lt;div class=\"controls\"&gt;\n        &lt;%= select_tag :purchase_request_status, options_for_select(get_purchase_request_statuses, :selected =&gt; params[:purchase_request_status]) %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;div class=\"modal-footer\"&gt;\n    &lt;a href=\"#\" class=\"btn\" data-dismiss=\"modal\"&gt;Close&lt;/a&gt;\n    &lt;%= submit_tag \"Download\", :class =&gt; \"btn\", :id =&gt; \"download-btn\", :onsubmit =&gt; \"$('#download-btn').attr('disabled', 'disabled');\" %&gt;\n  &lt;/div&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 3245845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1xEzn.jpg?s=128&g=1", "display_name": "podzach", "link": "https://stackoverflow.com/users/3245845/podzach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1457702817, "creation_date": 1457472236, "question_id": 35878301, "link": "https://stackoverflow.com/questions/35878301/returning-the-value-from-a-select-tag-as-a-parameter", "title": "Returning the value from a select_tag as a parameter", "body": "<p>I have a ruby form with a text box for start_date and one for end date.  I need to add a dropdown for status.  I added the select_tag and it populates correctly.  My problem is how do I get the value that was selected?</p>\n\n<p>Snippet from form:</p>\n\n<pre><code>  &lt;div class=\"modal-body\"&gt;\n    &lt;div class=\"control-group\"&gt;\n      &lt;label class=\"control-label\"&gt;From&lt;/label&gt;\n      &lt;div class=\"controls\"&gt;\n        &lt;%= text_field_tag \"purchase_requests_from_time\", Date.today.beginning_of_month, :class =&gt; \"text date_picker report_start_time_picker\" %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"control-group\"&gt;\n      &lt;label class=\"control-label\"&gt;To&lt;/label&gt;\n      &lt;div class=\"controls\"&gt;\n        &lt;%= text_field_tag \"purchase_requests_to_time\", Date.today.end_of_month, :class =&gt; \"text date_picker report_start_time_picker\" %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"control-group\"&gt;\n      &lt;label class=\"control-label\"&gt;Status&lt;/label&gt;\n      &lt;div class=\"controls\"&gt;\n        &lt;%= select_tag :status, options_for_select(get_purchase_request_statuses) %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"control-group\"&gt;\n      &lt;label class=\"control-label\"&gt;Status2&lt;/label&gt;\n      &lt;div class=\"controls\"&gt;\n        &lt;%= select_tag \"status2\", options_for_select(get_purchase_request_statuses) %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p>Then when I try to access the params in the controller</p>\n\n<pre><code>from_time = params[:purchase_requests_from_time]\nto_time = params[:purchase_requests_to_time]\nstatus = params[:status]\nstatus2 = params[:status2]\n</code></pre>\n\n<p>The time parameters show up fine, the status and status2 parameters are missing.  </p>\n\n<pre><code>params = {ActiveSupport::HashWithIndifferentAccess} ActiveSupport::HashWithIndifferentAccess (4 elements)\n 'purchase_requests_from_time' = \"Tue Mar 01, 2016\"\n 'purchase_requests_to_time' = \"Thu Mar 31, 2016\"\n 'action' = \"export\"\n 'controller' = \"purchase_requests\"\n</code></pre>\n\n<p>Any idea what I am doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 1141, "user_id": 1404905, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/IYSNE.jpg?s=128&g=1", "display_name": "beniutek", "link": "https://stackoverflow.com/users/1404905/beniutek"}, "is_accepted": false, "score": 0, "last_activity_date": 1457481738, "creation_date": 1457481738, "answer_id": 35880481, "question_id": 35877980, "link": "https://stackoverflow.com/questions/35877980/linking-to-the-product-from-the-index-in-rails/35880481#35880481", "title": "linking to the product from the index in rails", "body": "<p>you can have it two ways. Either pass parameter along your <code>redirect_to</code> method. obviously, pass the id of newly created PayerContract. This way you will have the id in <code>params</code> and you can use it in your <code>link_to</code> method.</p>\n\n<p>If you don't want to pass the parameter, try storing the newly created PayerContract in session after successfully creating PayerContract. This way after redirect you will still have access to the saved value from the session\nsomething like below</p>\n\n<pre><code>def create\n  @foo = Foo.new(foo_params)\n  if foo.save\n    session[:foo_id] = @foo.id\n    redirect_to foo_path\n  end\nend \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 895, "user_id": 5117502, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/3af1c137fcafdd6975f358e1fb43ca4c?s=128&d=identicon&r=PG&f=1", "display_name": "Jay266", "link": "https://stackoverflow.com/users/5117502/jay266"}, "edited": false, "score": 0, "creation_date": 1457628440, "post_id": 35883950, "comment_id": 59503047, "body": "It still can&#39;t find id for the edit_payer_contract_path. Any idea?"}, {"owner": {"reputation": 655, "user_id": 5715918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b2aca8bacf3913e5001a83bf96eb28?s=128&d=identicon&r=PG&f=1", "display_name": "rohin-arka", "link": "https://stackoverflow.com/users/5715918/rohin-arka"}, "reply_to_user": {"reputation": 895, "user_id": 5117502, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/3af1c137fcafdd6975f358e1fb43ca4c?s=128&d=identicon&r=PG&f=1", "display_name": "Jay266", "link": "https://stackoverflow.com/users/5117502/jay266"}, "edited": false, "score": 0, "creation_date": 1457667823, "post_id": 35883950, "comment_id": 59521134, "body": "Hello John please see the updated answer. you need to set params id as  edit_payer_contract_path(params[:id].to_i)"}, {"owner": {"reputation": 655, "user_id": 5715918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b2aca8bacf3913e5001a83bf96eb28?s=128&d=identicon&r=PG&f=1", "display_name": "rohin-arka", "link": "https://stackoverflow.com/users/5715918/rohin-arka"}, "reply_to_user": {"reputation": 895, "user_id": 5117502, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/3af1c137fcafdd6975f358e1fb43ca4c?s=128&d=identicon&r=PG&f=1", "display_name": "Jay266", "link": "https://stackoverflow.com/users/5117502/jay266"}, "edited": false, "score": 0, "creation_date": 1457668364, "post_id": 35883950, "comment_id": 59521248, "body": "Also passing params in t() will not send to your index page. you need to payer_contracts_path(id: @payer_contract.id). I hope updated answer should solve this.."}], "tags": [], "owner": {"reputation": 655, "user_id": 5715918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b2aca8bacf3913e5001a83bf96eb28?s=128&d=identicon&r=PG&f=1", "display_name": "rohin-arka", "link": "https://stackoverflow.com/users/5715918/rohin-arka"}, "is_accepted": false, "score": 0, "last_activity_date": 1457668174, "last_edit_date": 1457668174, "creation_date": 1457502719, "answer_id": 35883950, "question_id": 35877980, "link": "https://stackoverflow.com/questions/35877980/linking-to-the-product-from-the-index-in-rails/35883950#35883950", "title": "linking to the product from the index in rails", "body": "<p>As beniutek said you can pass parameter in redirect_to. But when user first visit index page id is not defined so you can check in view if it is define set the id to link_to as below. </p>\n\n<pre><code>def create\n    payer_contract_params = PayerContract.assign_params_to_payer_contract(params)\n    @payer_contract = PayerContract.new(payer_contract_params)\n    respond_to do |format|\n      begin\n        if @payer_contract.save\n          format.html { redirect_to payer_contracts_path(id: @payer_contract.id), notice: t('common.successfully_created', entity: @payer_contract.description) }\n        end\n      end\n    end\n  end\n</code></pre>\n\n<p>In view</p>\n\n<pre><code> if params[:id].present? \n     = link_to t('payer_contracts.edit'), edit_payer_contract_path(params[:id].to_i))\n</code></pre>\n"}], "owner": {"reputation": 895, "user_id": 5117502, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/3af1c137fcafdd6975f358e1fb43ca4c?s=128&d=identicon&r=PG&f=1", "display_name": "Jay266", "link": "https://stackoverflow.com/users/5117502/jay266"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1457668174, "creation_date": 1457471073, "last_edit_date": 1457472160, "question_id": 35877980, "link": "https://stackoverflow.com/questions/35877980/linking-to-the-product-from-the-index-in-rails", "title": "linking to the product from the index in rails", "body": "<p>When I save a PayerContract in the create form, it saves the PayerContract and creates a \"success you have created PayerContract {X}\" where {X} is the PayerContract name and redirects the user back to the index. I want to allow the user to click the {X} to go to the edit page for that PayerContract.</p>\n\n<p>In my index page I have:</p>\n\n<pre><code>  = link_to t('payer_contracts.edit'), edit_payer_contract_path())\n</code></pre>\n\n<p>I need to give the PayerContract.id to the edit_payer_contract_path function. So, it would look something like <code>edit_payer_contract_path(330)</code></p>\n\n<p>The warning message I have displayed in my controller is this:</p>\n\n<pre><code>def create\n    payer_contract_params = PayerContract.assign_params_to_payer_contract(params)\n    @payer_contract = PayerContract.new(payer_contract_params)\n    respond_to do |format|\n      begin\n        if @payer_contract.save\n          format.html { redirect_to payer_contracts_path, notice: t('common.successfully_created', entity: @payer_contract.description) }\n        end\n      end\n    end\n  end\n</code></pre>\n\n<p>I found out that when I do something like:\n<code>edit_payer_contract_path(PayerContract.find())</code> it returns all the PayerContract that looks like: expected an attributes Hash, got <code>[{\"id\"=&gt;224, \"name\" =\"hello\", \"id\"=&gt; 332, \"name\" = \"hello2\", \"id\"=&gt;555, \"name\" = \"sup\" }]</code> etc.</p>\n\n<p>How can I correctly link the user to the PayerContract they just created?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "email", "heroku", "dns"], "comments": [{"owner": {"reputation": 9139, "user_id": 773228, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/baaecdda322cf4462a0dd018d7959b1e?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Wood", "link": "https://stackoverflow.com/users/773228/justin-wood"}, "edited": false, "score": 0, "creation_date": 1457471236, "post_id": 35877741, "comment_id": 59419384, "body": "I think it depends on your needs. If you just need to know if an email exists, this gem may work (I have never used it). If you need to know if the user actually has access to the email address, then you should send them an email with a link and/or access token that can be entered into your site."}, {"owner": {"reputation": 1446, "user_id": 4005147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001011355894/picture?type=large", "display_name": "Padhu", "link": "https://stackoverflow.com/users/4005147/padhu"}, "reply_to_user": {"reputation": 9139, "user_id": 773228, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/baaecdda322cf4462a0dd018d7959b1e?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Wood", "link": "https://stackoverflow.com/users/773228/justin-wood"}, "edited": false, "score": 0, "creation_date": 1457471362, "post_id": 35877741, "comment_id": 59419456, "body": "Thank you I can see this gem working perfectly for me now, I&#39;m just worried what if some server report my ip/domain as spam."}, {"owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "edited": false, "score": 0, "creation_date": 1457497071, "post_id": 35877741, "comment_id": 59428274, "body": "IMHO I wouldn&#39;t do this. MX records don&#39;t have to exist. Mail servers don&#39;t have to tell you if an address is legitimate or not unless you actually send an email (and sometimes not even then) and yes, some will start tracking your connection attempts and block you. Think of it this way, if the above worked reliably wouldn&#39;t every spammer in the world use it to find everyone&#39;s email address?"}], "answers": [{"comments": [{"owner": {"reputation": 1446, "user_id": 4005147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001011355894/picture?type=large", "display_name": "Padhu", "link": "https://stackoverflow.com/users/4005147/padhu"}, "edited": false, "score": 0, "creation_date": 1457516493, "post_id": 35887542, "comment_id": 59437077, "body": "Thank you so much for such an elaborate answer, I decided to skip this verification."}], "tags": [], "owner": {"reputation": 4663, "user_id": 3967089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d00715119003023d62918dcc603ca7?s=128&d=identicon&r=PG&f=1", "display_name": "Calle Dybedahl", "link": "https://stackoverflow.com/users/3967089/calle-dybedahl"}, "is_accepted": true, "score": 7, "last_activity_date": 1457515504, "creation_date": 1457515504, "answer_id": 35887542, "question_id": 35877741, "link": "https://stackoverflow.com/questions/35877741/email-verification-with-dns-smtp-check-from-heroku-rails-app/35887542#35887542", "title": "Email Verification with DNS &amp; SMTP Check from Heroku Rails App", "body": "<p>Yes, I have experience (from a few years ago) of doing pretty much exactly that at a large scale. We were scanning the entire .SE domain (\"we\" in this case being the .SE registry), and tried to verify the addresses in the SOA records.</p>\n\n<p>I strongly advice you not to bother with the SMTP part. The false-positive <em>and</em> false-negative rates will be plenty high enough to make your results meaningless, and your server will quickly get blacklisted by all major mail service providers.</p>\n\n<p>Checking the DNS part makes sense and works well. Use a library with a good reputation to check the syntax of the email address (do <em>not</em> try to write it yourself, it's way more complex than you think), and if it passes check that the domain looks deliverable. \"Looks deliverable\" means that it either has MX records that can be resolved to IP addresses, or if it does not have any MX records, that it has A and/or AAAA record(s).</p>\n\n<p>Don't try to contact the IP addresses you find. It takes a lot of time (relatively speaking), and it tells you nothing. If you can connect, start an SMTP transaction and the other end says \"Sure, I can deliver that\" you <em>still</em> don't know if the address you're testing is good, since most mail servers these days will say they accept everything and then silently drop invalid messages on the floor. They do this precisely to prevent spammers from doing exactly what you're trying to do (verifying addresses), so don't expect that behavior to change until the spammers go away. If the server says \"Nope, can't deliver that now, try again later\", it may be using greylisting. So you could maybe get a good answer -- if you try again in five or ten minutes. You probably don't want your Ruby method call to take ten minutes. And finally, if the server says \"Nope, can't deliver that, ever\", you still can't know if that means the address is invalid of if the server is having a bad day, and the address may start working at some point in the future.</p>\n\n<p>So to sum up, if you try to do SMTP connections to validate mail addresses, you will spend a lot of time (both when writing the code and when running it), you'll piss off a lot of people, get put on a lot of blacklists (some of which are very, very much more eager to add things than to take them off again) and at the end of it all you <em>still</em> won't know any more than you did before you started. It's really not worth it.</p>\n"}], "owner": {"reputation": 1446, "user_id": 4005147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001011355894/picture?type=large", "display_name": "Padhu", "link": "https://stackoverflow.com/users/4005147/padhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 939, "favorite_count": 1, "accepted_answer_id": 35887542, "answer_count": 1, "score": 2, "last_activity_date": 1479717122, "creation_date": 1457470204, "last_edit_date": 1479717122, "question_id": 35877741, "link": "https://stackoverflow.com/questions/35877741/email-verification-with-dns-smtp-check-from-heroku-rails-app", "title": "Email Verification with DNS &amp; SMTP Check from Heroku Rails App", "body": "<p>I'm thinking to use this gem <a href=\"https://github.com/kamilc/email_verifier\" rel=\"nofollow noreferrer\">https://github.com/kamilc/email_verifier</a> to verify email addresses.</p>\n\n<p>Basically this gem will check for MX record in DNS and connects with the smtp to check if an email address really exists or not. Does anyone have experience with this type of things please advice my concerns.</p>\n\n<p>Does querying too many times to dns and smtp from my app, hurt my domain reputation? </p>\n\n<p>I know that heroku switch ip addreses for all dynos everyday, is this same case for my ssl app as well?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1457473258, "post_id": 35877125, "comment_id": 59420423, "body": "<code>&amp;&amp;</code> what? You need to specify another clause or remove that."}, {"owner": {"reputation": 9, "user_id": 6009366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b06a09de222093fb2dd4179b4b4918?s=128&d=identicon&r=PG&f=1", "display_name": "murer", "link": "https://stackoverflow.com/users/6009366/murer"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1457474278, "post_id": 35877125, "comment_id": 59420988, "body": "thanks, i realized that after posting it. but it doesn&#39;t solve the error unfortunatly"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1457474397, "post_id": 35877125, "comment_id": 59421053, "body": "Try and clean up the example code here to better reflect what&#39;s actually going on. If you&#39;re battling a syntax error it&#39;s important to know what the exact issue is."}, {"owner": {"reputation": 3773, "user_id": 991903, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J12Hi.jpg?s=128&g=1", "display_name": "Meier", "link": "https://stackoverflow.com/users/991903/meier"}, "edited": false, "score": 1, "creation_date": 1457475230, "post_id": 35877125, "comment_id": 59421509, "body": "It make me nervous that were are talking about patient medications."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1457475440, "post_id": 35877125, "comment_id": 59421618, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. You need a better title, one that explains the question, not just a bit of pseudocode."}, {"owner": {"reputation": 4706, "user_id": 481229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/OJflZ.jpg?s=128&g=1", "display_name": "Agush", "link": "https://stackoverflow.com/users/481229/agush"}, "reply_to_user": {"reputation": 3773, "user_id": 991903, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J12Hi.jpg?s=128&g=1", "display_name": "Meier", "link": "https://stackoverflow.com/users/991903/meier"}, "edited": false, "score": 0, "creation_date": 1457475551, "post_id": 35877125, "comment_id": 59421671, "body": "kalium overdose @Meier"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 6009366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b06a09de222093fb2dd4179b4b4918?s=128&d=identicon&r=PG&f=1", "display_name": "murer", "link": "https://stackoverflow.com/users/6009366/murer"}, "edited": false, "score": 0, "creation_date": 1457470691, "post_id": 35877280, "comment_id": 59419109, "body": "thanks frank! i tried it, but i still get the odd &quot;block (3 levels) in &lt;top (required)&gt;&#39;&quot; for the patients.medications.each.do  and a block (2 levels) for the &quot;unless !patient...&quot;   do you think something is wrong with the code or what does the error mean?;)   thank you!"}], "tags": [], "owner": {"reputation": 27685, "user_id": 610979, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ku5ga.png?s=128&g=1", "display_name": "Frank Schmitt", "link": "https://stackoverflow.com/users/610979/frank-schmitt"}, "is_accepted": false, "score": 1, "last_activity_date": 1457475491, "last_edit_date": 1457475491, "creation_date": 1457468563, "answer_id": 35877280, "question_id": 35877125, "link": "https://stackoverflow.com/questions/35877125/if-xy-nil-true/35877280#35877280", "title": "if xy.nil? = true?", "body": "<p>Welcome to the confusing world of double negation.</p>\n\n<p>This</p>\n\n<pre><code>unless !patient.kalium.nil?\n  if m.medi.atc\n</code></pre>\n\n<p>will execute the <code>if</code> block only if <code>patient.kalium</code> is nil.</p>\n\n<p>Just get rid of the <code>!</code>:</p>\n\n<pre><code>unless patient.kalium.nil?\n  if m.medi.atc\n</code></pre>\n\n<p>and you should be fine.</p>\n"}, {"tags": [], "owner": {"reputation": 3773, "user_id": 991903, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J12Hi.jpg?s=128&g=1", "display_name": "Meier", "link": "https://stackoverflow.com/users/991903/meier"}, "is_accepted": false, "score": 0, "last_activity_date": 1457477762, "last_edit_date": 1457477762, "creation_date": 1457475838, "answer_id": 35879227, "question_id": 35877125, "link": "https://stackoverflow.com/questions/35877125/if-xy-nil-true/35879227#35879227", "title": "if xy.nil? = true?", "body": "<p>If you want to do something like <code>if patient.kalium != nil</code> then you can just do it like this:</p>\n\n<pre><code>if patient.kalium != nil \n  # calculate something using patient.kalium\nend\n</code></pre>\n\n<p>You can express this in many different ways, and many Ruby programmers would prefer <code>unless patient.kalium.nil?</code>  but obviously this has confused you.</p>\n\n<p>And, doing medical software, you should not do confusing things. You should be able to look at the code and immediately see that it is doing what you intended to do.</p>\n"}], "owner": {"reputation": 9, "user_id": 6009366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b06a09de222093fb2dd4179b4b4918?s=128&d=identicon&r=PG&f=1", "display_name": "murer", "link": "https://stackoverflow.com/users/6009366/murer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 1, "closed_date": 1457476548, "answer_count": 2, "score": -2, "last_activity_date": 1458299355, "creation_date": 1457467989, "last_edit_date": 1458299355, "question_id": 35877125, "link": "https://stackoverflow.com/questions/35877125/if-xy-nil-true", "closed_reason": "Needs details or clarity", "title": "if xy.nil? = true?", "body": "<ul>\n<li>you can delete it. thank you!</li>\n</ul>\n\n<p>sorry for the truble</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "lambda"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 2, "creation_date": 1457467283, "post_id": 35876894, "comment_id": 59417176, "body": "simply do <code>lambda { |limit = nil| </code>"}], "answers": [{"comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1457467909, "post_id": 35877074, "comment_id": 59417524, "body": "giving <code>nil</code> to <code>limit</code> is okay: it will not limit the results. So if nothing is given, all the results will be returned."}], "tags": [], "owner": {"reputation": 5962, "user_id": 115159, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ac02a81e50f368f6d5c7a14b99ce2469?s=128&d=identicon&r=PG", "display_name": "Dharam Gollapudi", "link": "https://stackoverflow.com/users/115159/dharam-gollapudi"}, "is_accepted": true, "score": 0, "last_activity_date": 1457467745, "creation_date": 1457467745, "answer_id": 35877074, "question_id": 35876894, "link": "https://stackoverflow.com/questions/35876894/how-can-i-pass-a-default-argument-to-rails-lambda-scopes/35877074#35877074", "title": "How can I pass a default argument to Rails lambda/scopes?", "body": "<p>You can simply provide the defaults to the block parameters:</p>\n\n<pre><code>scope :unverified, lambda { |limit = nil|\n  select('accounts.id, accounts.email').joins('LEFT OUTER JOIN verifications v ON v.account_id = accounts.id')\n    .where('v.account_id IS NULL').limit(limit)\n}\n</code></pre>\n\n<p>But not sure if it makes sense to pass <code>nil</code> to <code>.limit()</code>. You may want to default it to an <code>integer</code>.</p>\n"}], "owner": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 585, "favorite_count": 0, "accepted_answer_id": 35877074, "answer_count": 1, "score": 2, "last_activity_date": 1457467745, "creation_date": 1457467092, "question_id": 35876894, "link": "https://stackoverflow.com/questions/35876894/how-can-i-pass-a-default-argument-to-rails-lambda-scopes", "title": "How can I pass a default argument to Rails lambda/scopes?", "body": "<p>I have this piece of code on my accounts model.</p>\n\n<pre><code> scope :unverified, lambda { |limit|\n  select('accounts.id, accounts.email').joins('LEFT OUTER JOIN verifications v ON v.account_id = accounts.id')\n    .where('v.account_id IS NULL').limit(limit)\n}\n</code></pre>\n\n<p>Because my team has rubocop with strict settings, I cannot write it the normal way rails recommends which would look like this:</p>\n\n<pre><code>scope :unverified, -&gt; (limit = nil) { \n  select('accounts.id, accounts.email').joins('LEFT OUTER JOIN verifications v ON v.account_id = accounts.id')\n    .where('v.account_id IS NULL').limit(limit)\n}\n</code></pre>\n\n<p>Writing it the normal way will trigger a rubocop error. I have the code close to the way I want  but I can't figure out how exactly to pass in a default argument for a lambda. Can someone provide just a little push?</p>\n"}, {"tags": ["ruby", "ubuntu", "rubygems", "rake"], "owner": {"reputation": 4446, "user_id": 576448, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/hVxvC.jpg?s=128&g=1", "display_name": "peterk", "link": "https://stackoverflow.com/users/576448/peterk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1457468198, "creation_date": 1457466430, "last_edit_date": 1457468198, "question_id": 35876688, "link": "https://stackoverflow.com/questions/35876688/strange-gem-installation-runtime-depedency-error-on-rake-version-on-ubuntu", "title": "Strange gem installation runtime depedency error on rake version on ubuntu", "body": "<p>Inside my gemspec file I have:</p>\n\n<pre><code>s.add_runtime_dependency 'rake',\n[ '&gt;= 0.9.0.0']\n</code></pre>\n\n<p>On Windows I install it with the command:</p>\n\n<pre><code>gem install --local myGem-0.9.0.gem\n</code></pre>\n\n<p>Because --user does not seem to work on windows and it installs in the main ruby gem area.</p>\n\n<p>This works fine the current rake version on that machine is 0.9.2.2 and the current gem version on that machine is 1.8.28</p>\n\n<p>On Ubuntu with the same gemspec file I install it with: </p>\n\n<pre><code>gem install --local --user myGem-0.9.0.gem\n</code></pre>\n\n<p>which fails with the error:</p>\n\n<pre><code>ERROR:  While executing gem ... (Gem::DependencyError)\n  Unable to resolve dependencies: myGem requires rake (&gt;= 0.9.0.0)\n</code></pre>\n\n<p>The version of rake installed on that machine is: 10.0.4\nand then current gem version on that machine is 1.8.23</p>\n\n<p>I tried changing the gemspec file to '>= 9.0.0' and I got the same error. </p>\n\n<p>This gem uses rake at runtime.\nThis behavior seems quite contrary to the documentation on the gemspec file.  How do I accomplish this version test? It works fine without a version dependency value.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mechanize"], "comments": [{"owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 0, "creation_date": 1457485817, "post_id": 35876658, "comment_id": 59425328, "body": "Those usually mean there&#39;s a problem with the internet connection."}, {"owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "edited": false, "score": 0, "creation_date": 1484132746, "post_id": 35876658, "comment_id": 70381855, "body": "There is also various timeout (and keepalive) settings (<a href=\"http://mechanize.rubyforge.org/Mechanize.html#method-i-keep_alive-3D\" rel=\"nofollow noreferrer\">mechanize.rubyforge.org/Mechanize.html#method-i-keep_alive-&zwnj;&#8203;3D</a>) that you can experiment with."}], "answers": [{"tags": [], "owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "is_accepted": true, "score": 4, "last_activity_date": 1574520668, "last_edit_date": 1574520668, "creation_date": 1457467996, "answer_id": 35877127, "question_id": 35876658, "link": "https://stackoverflow.com/questions/35876658/too-many-connection-resets-exception-error-mechanize-in-ruby/35877127#35877127", "title": "Too many connection resets Exception Error - Mechanize in Ruby", "body": "<p>I have run into this issue many times.  The way I handle it is to wrap the block of code running the scraper in a rescue clause and on error I simply kill the connection and reset the agent and its headers.  This has worked 100% of the time and has given me no issues.  I then carry on where I left off in the code.  The below example is a scraper I run for iterating over a list of buildings and looking up pages etc.:</p>\n\n<pre><code>def begin_scraping_list\n    Building.all.each do |building_info|\n      begin          \n      next if convert_boroughs_for_form(building_info) == :no_good\n      fill_in_first_page_address_form_and_submit(building_info)\n      get_to_proper_second_page\n      go_to_page_we_want_for_scraping\n      scrape_the_table(building_info)\n      rescue\n        puts \"error happened\"\n        @agent.shutdown\n        @agent = Mechanize.new { |agent| agent.user_agent_alias = 'Windows Chrome'}\n        @agent.request_headers\n        sleep(5)\n        redo\n      end\n    end\n  end\n</code></pre>\n\n<p>So in your case you would want to wrap the problem area you posted in a rescue block</p>\n\n<pre><code>  begin\n    #get the form\n    form = agent.page.form_with(:name =&gt; \"AdvancedSearchForm\")\n    # get the button you want from the form\n    button = form.button_with(:value =&gt; \"Search\")\n    # submit the form using that button\n    agent.submit(form, button)\n    rescue\n     agent.shutdown\n     agent = Mechanize.new { |agent| agent.user_agent_alias = 'Windows Chrome'}\n     agent.request_headers\n     sleep(2)\n     #get the form\n     form = agent.page.form_with(:name =&gt; \"AdvancedSearchForm\")\n     # get the button you want from the form\n     button = form.button_with(:value =&gt; \"Search\")\n     # submit the form using that button\n     agent.submit(form, button)\n   end\n</code></pre>\n\n<p><strong>NOTE</strong>\nIf mechanize is causing issues and you're not already heavily invested in it, you'll have a far better scraping experience using capybara and phantomjs. More mature &amp; more dev. behind it.</p>\n"}], "owner": {"reputation": 87, "user_id": 5905311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95206702eb7cbf80f33841af04cc38d8?s=128&d=identicon&r=PG&f=1", "display_name": "Qanat Tajrediat", "link": "https://stackoverflow.com/users/5905311/qanat-tajrediat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3799, "favorite_count": 0, "accepted_answer_id": 35877127, "answer_count": 1, "score": 2, "last_activity_date": 1574520668, "creation_date": 1457466329, "question_id": 35876658, "link": "https://stackoverflow.com/questions/35876658/too-many-connection-resets-exception-error-mechanize-in-ruby", "title": "Too many connection resets Exception Error - Mechanize in Ruby", "body": "<p>I'm using Mechanize on Ruby and keep getting this exception error</p>\n\n<pre><code>C:/Ruby200/lib/ruby/2.0.0/net/protocol.rb:158:in `rescue in rbuf_fill': too many connection resets (due to Net::ReadTimeout - Net::ReadTimeout) after 0 requests on 37920120, last used 1457465950.371121 seconds ago (Net::HTTP::Persistent::Error)\n    from C:/Ruby200/lib/ruby/2.0.0/net/protocol.rb:152:in `rbuf_fill'\n    from C:/Ruby200/lib/ruby/2.0.0/net/protocol.rb:134:in `readuntil'\n    from C:/Ruby200/lib/ruby/2.0.0/net/protocol.rb:144:in `readline'\n    from C:/Ruby200/lib/ruby/2.0.0/net/http/response.rb:39:in `read_status_line'\n    from C:/Ruby200/lib/ruby/2.0.0/net/http/response.rb:28:in `read_new'\n    from C:/Ruby200/lib/ruby/2.0.0/net/http.rb:1406:in `block in transport_request'\n    from C:/Ruby200/lib/ruby/2.0.0/net/http.rb:1403:in `catch'\n    from C:/Ruby200/lib/ruby/2.0.0/net/http.rb:1403:in `transport_request'\n    from C:/Ruby200/lib/ruby/2.0.0/net/http.rb:1376:in `request'\n    from C:/Ruby200/lib/ruby/gems/2.0.0/gems/rest-client-1.6.7/lib/restclient/net_http_ext.rb:51:in `request'\n    from C:/Ruby200/lib/ruby/gems/2.0.0/gems/net-http-persistent-2.9/lib/net/http/persistent.rb:986:in `request'\n    from C:/Ruby200/lib/ruby/gems/2.0.0/gems/mechanize-2.7.3/lib/mechanize/http/agent.rb:259:in `fetch'\n    from C:/Ruby200/lib/ruby/gems/2.0.0/gems/mechanize-2.7.3/lib/mechanize.rb:1281:in `post_form'\n    from C:/Ruby200/lib/ruby/gems/2.0.0/gems/mechanize-2.7.3/lib/mechanize.rb:548:in `submit'\n    from C:/Users/Feshaq/workspace/ERISScrap/eca_sample/eca_on_scraper.rb:152:in `&lt;main&gt;'\n</code></pre>\n\n<p>Here is line 152:</p>\n\n<pre><code>#Click the form button\nagent.page.forms[0].click_button\n</code></pre>\n\n<p>Alternatively, I tried the given snippet and keep getting the exception error:</p>\n\n<pre><code>#get the form\nform = agent.page.form_with(:name =&gt; \"AdvancedSearchForm\")\n# get the button you want from the form\nbutton = form.button_with(:value =&gt; \"Search\")\n# submit the form using that button\nagent.submit(form, button)\n</code></pre>\n\n<p>Any help is appreciated</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 3439, "user_id": 5665799, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/YOrLl.jpg?s=128&g=1", "display_name": "Kieran E", "link": "https://stackoverflow.com/users/5665799/kieran-e"}, "edited": false, "score": 0, "creation_date": 1457467053, "post_id": 35876830, "comment_id": 59417029, "body": "That seems solid!  I&#39;ll give that a go.  However, I&#39;m pretty new to Rails in general, so would you say that your method is an good practice?  Just for curiosity :)"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1457467324, "post_id": 35876830, "comment_id": 59417199, "body": "Using <code>read_attribute</code> and <code>write_attribute</code> might be more clear in intent."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 5, "last_activity_date": 1457467459, "last_edit_date": 1457467459, "creation_date": 1457466916, "answer_id": 35876830, "question_id": 35876646, "link": "https://stackoverflow.com/questions/35876646/ruby-on-rails-apply-function-to-multiple-fields-using-before-save-callback/35876830#35876830", "title": "Ruby on Rails - Apply function to multiple fields using before_save callback?", "body": "<p>Perhaps something like this:</p>\n\n<pre><code>ATTRS_TO_DOWNCASE = %i( email first_name last_name ) \nbefore_save :downcase_attrs\n\nprivate \ndef downcase_attrs\n  ATTRS_TO_DOWNCASE.each do |attr|\n    write_attribute(attr, read_attribute(attr).downcase)\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1457469094, "post_id": 35876885, "comment_id": 59418214, "body": "<code>self.f</code> is not a method you can call. <code>:email.downcase</code> is likewise broken."}, {"owner": {"reputation": 32547, "user_id": 276959, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/mSp5G.jpg?s=128&g=1", "display_name": "Mohamad", "link": "https://stackoverflow.com/users/276959/mohamad"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1457522259, "post_id": 35876885, "comment_id": 59441004, "body": "Right, sorry about that. This should work. I&#39;m not sure if you must do symbol conversion though."}], "tags": [], "owner": {"reputation": 32547, "user_id": 276959, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/mSp5G.jpg?s=128&g=1", "display_name": "Mohamad", "link": "https://stackoverflow.com/users/276959/mohamad"}, "is_accepted": false, "score": 2, "last_activity_date": 1457522242, "last_edit_date": 1457522242, "creation_date": 1457467059, "answer_id": 35876885, "question_id": 35876646, "link": "https://stackoverflow.com/questions/35876646/ruby-on-rails-apply-function-to-multiple-fields-using-before-save-callback/35876885#35876885", "title": "Ruby on Rails - Apply function to multiple fields using before_save callback?", "body": "<p>Why don't you pass a proc to <code>before_save</code>, then call a function with arguments? Then you can extract the downcase function into its own module when and if you need to.</p>\n\n<pre><code>before_save {\n  downcase_function(:email, :first_name, :last_name)\n}\n\nprivate \n\ndef downcase_function(*fields)\n  fields.each do |field|\n    self.send \"#{field}=\", self.send(field).downcase\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 3439, "user_id": 5665799, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/YOrLl.jpg?s=128&g=1", "display_name": "Kieran E", "link": "https://stackoverflow.com/users/5665799/kieran-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "accepted_answer_id": 35876830, "answer_count": 2, "score": 1, "last_activity_date": 1457522242, "creation_date": 1457466288, "question_id": 35876646, "link": "https://stackoverflow.com/questions/35876646/ruby-on-rails-apply-function-to-multiple-fields-using-before-save-callback", "title": "Ruby on Rails - Apply function to multiple fields using before_save callback?", "body": "<p><strong>Please be aware that this is an example, not my actual use case.  The underlying concept is what I'm after</strong></p>\n\n<p>(Ruby version - 2.2.1, Rails version - 4.2.4)</p>\n\n<p>Pretend I have <code>email</code> and <code>first_name</code> fields in my database and I want to downcase the using the before_save callback.  Normally, I'd do this</p>\n\n<pre><code>before_save :downcase_function\n\n...\n\nprivate \n\ndef downcase_function\n  self.email = email.downcase\n  self.first_name = first_name.downcase\nend\n</code></pre>\n\n<p>However, this isn't very flexible or reusable.  What if I want to add this function to the last_name field?  What if I need it across multiple models?</p>\n\n<p>What I'd like to do is something like this </p>\n\n<pre><code>#pseudocode - does not work\n\nbefore_save :downcase_function(:email, :first_name, :last_name)\n\n...\n\nprivate \n\ndef downcase_function(fields)\n  fields.each do |f|\n    self.f = f.downcase\n  end\nend\n</code></pre>\n\n<p>I know this might look silly, but I'm having no luck.</p>\n\n<p><strong>Here are the key things I'm after:</strong></p>\n\n<ul>\n<li>Create a function that runs before_save</li>\n<li>Allow this function to take arguments</li>\n<li>Apply the function to each field specified my the arguments</li>\n<li>(ideally) abstract it away from any one model so I can use it in any model, if needed</li>\n</ul>\n\n<p>Thank so so much!</p>\n"}, {"tags": ["ruby", "bash", "directory", "homebrew", "filepath"], "comments": [{"owner": {"reputation": 3511, "user_id": 1200057, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dd0a7af03f33141f54a2df43266687e9?s=128&d=identicon&r=PG", "display_name": "Marc Young", "link": "https://stackoverflow.com/users/1200057/marc-young"}, "edited": false, "score": 0, "creation_date": 1457466388, "post_id": 35876074, "comment_id": 59416659, "body": "try <code>HOMEBREW_PREFIX=&quot;$HOME&#47;usr&#47;local&quot;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 167, "user_id": 5440933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b38c71d58024f3077e1fe7f6614d8cba?s=128&d=identicon&r=PG&f=1", "display_name": "Kip K", "link": "https://stackoverflow.com/users/5440933/kip-k"}, "is_accepted": true, "score": 0, "last_activity_date": 1457467338, "creation_date": 1457467338, "answer_id": 35876956, "question_id": 35876074, "link": "https://stackoverflow.com/questions/35876074/i-am-having-trouble-getting-a-script-to-run-with-the-proper-directories-and-file/35876956#35876956", "title": "I am having trouble getting a script to run with the proper directories and files", "body": "<p>As the commenter said you <em>can</em> use <code>$HOME</code> (or <code>~/</code>) But the script says to use the absolute path of your home directory.</p>\n\n<p>Open up a terminal and type <code>echo $HOME</code> then put whatever it displays in place of <code>#{YOUR_HOME}</code>.</p>\n\n<p>This way if it parses the string in any way it won't mess up.</p>\n"}], "owner": {"reputation": 10190, "user_id": 5236226, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ffj4X.jpg?s=128&g=1", "display_name": "Caleb Kleveter", "link": "https://stackoverflow.com/users/5236226/caleb-kleveter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 35876956, "answer_count": 1, "score": 0, "last_activity_date": 1457471010, "creation_date": 1457464576, "last_edit_date": 1490005101, "question_id": 35876074, "link": "https://stackoverflow.com/questions/35876074/i-am-having-trouble-getting-a-script-to-run-with-the-proper-directories-and-file", "title": "I am having trouble getting a script to run with the proper directories and files", "body": "<p>I am attempting to install Homebrew using <a href=\"https://gist.github.com/skyl/36563a5be809e54dc139\" rel=\"nofollow noreferrer\">this script</a> from <a href=\"https://superuser.com/questions/619498/can-i-install-homebrew-without-sudo-privileges/881681#881681\">this SuperUser answer</a>.</p>\n\n<p>However, I am having trouble getting the directories on my machine to be setup correctly.</p>\n\n<p>The closest I got was changing this:</p>\n\n<pre><code>YOUR_HOME = ''\n\nHOMEBREW_PREFIX = \"#{YOUR_HOME}/usr/local\"\n</code></pre>\n\n<p>To this:</p>\n\n<pre><code>YOUR_HOME = ''\n\nHOMEBREW_PREFIX = \"usr/local\"\n</code></pre>\n\n<p>The file was in and run from <code>Users/&lt;User_name&gt;</code>, but I got this output:</p>\n\n<pre><code>==&gt; This script will install:\nusr/local/bin/brew\nusr/local/Library/...\nusr/local/share/man/man1/brew.1\n\nPress RETURN to continue or any other key to abort\nmkdir: usr: No such file or directory\nFailed during: /bin/mkdir usr/local\n</code></pre>\n\n<p>My files at the moment are setup like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/NPT9x.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NPT9x.png\" alt=\"enter image description here\"></a></p>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["arrays", "ruby", "json", "class"], "answers": [{"tags": [], "owner": {"reputation": 1667, "user_id": 2352108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/285d68eb11b6411673b4c7487e595cf6?s=128&d=identicon&r=PG", "display_name": "bukk530", "link": "https://stackoverflow.com/users/2352108/bukk530"}, "is_accepted": false, "score": 0, "last_activity_date": 1457465391, "creation_date": 1457465391, "answer_id": 35876363, "question_id": 35875969, "link": "https://stackoverflow.com/questions/35875969/class-in-array-convert-to-json/35876363#35876363", "title": "Class in array convert to JSON", "body": "<p>You are saving the current instance of the <code>TodoList</code> class.<br>\nYou have to save your <code>@items</code> variable. To do this you have to change <code>self.to_json</code> to <code>@items.to_json</code></p>\n"}, {"tags": [], "owner": {"reputation": 3020, "user_id": 4453584, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25188d50654874d1125dd754d783851b?s=128&d=identicon&r=PG&f=1", "display_name": "guitarman", "link": "https://stackoverflow.com/users/4453584/guitarman"}, "is_accepted": false, "score": 0, "last_activity_date": 1457466233, "creation_date": 1457466233, "answer_id": 35876632, "question_id": 35875969, "link": "https://stackoverflow.com/questions/35875969/class-in-array-convert-to-json/35876632#35876632", "title": "Class in array convert to JSON", "body": "<pre><code>class TodoList\n\n  ...\n\n  def save\n    File.open(\"file_json_complete.json\", \"w\") do |f|\n      f.write(@items.to_json)\n    end\n    puts \"Saved Successfully\"\n  end\n\n  ...\n\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 0, "last_activity_date": 1457477428, "last_edit_date": 1457477428, "creation_date": 1457466576, "answer_id": 35876724, "question_id": 35875969, "link": "https://stackoverflow.com/questions/35875969/class-in-array-convert-to-json/35876724#35876724", "title": "Class in array convert to JSON", "body": "<p>To do this appropriately I would recommend adding the following:</p>\n\n<pre><code>class TodoList\n   def to_json(options={})\n     {title: @title, items: @items}.to_json(options)\n   end\nend\n\nclass Item\n   def to_json(options={})\n     {description: @description, completed: @complete_status,\n      created: @created_at, due: @due_date}.to_json(options)\n   end\nend \n</code></pre>\n\n<p>Then when you call <code>to_json</code> on the <code>TodoList</code> you will get something similar to: </p>\n\n<pre><code>\"{\\\"title\\\":\\\"doh's stuff\\\",\n    \\\"items\\\":[\n       {\\\"description\\\":\\\"laundry\\\",\\\"complete\\\":false,\\\"created\\\":\\\"2016-03-08\\\",\\\"due\\\":\\\"2017-01-08\\\"},\n       {\\\"description\\\":\\\"study\\\",\\\"complete\\\":false,\\\"created\\\":\\\"2016-03-08\\\",\\\"due\\\":\\\"2017-11-08\\\"},\n       {\\\"description\\\":\\\"sleep\\\",\\\"complete\\\":false,\\\"created\\\":\\\"2016-03-08\\\",\\\"due\\\":\\\"2017-06-08\\\"},\n       {\\\"description\\\":\\\"Watch Movie\\\",\\\"complete\\\":false,\\\"created\\\":\\\"2016-03-08\\\",\\\"due\\\":\\\"2016-08-08\\\"}\n    ]\n}\"\n</code></pre>\n\n<p>Which I am assuming is what you are looking for.</p>\n\n<p>Basically <code>to_json</code> will recursively call <code>to_json</code> on the nested objects to create the structure this will end up defaulting to the <code>to_s</code> method when you have not implemented a <code>to_json</code> method.</p>\n"}], "owner": {"reputation": 25, "user_id": 4168545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e837c6462fe2d6ac44fc800da8548afa?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Doh Kim", "link": "https://stackoverflow.com/users/4168545/victor-doh-kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 1, "accepted_answer_id": 35876724, "answer_count": 3, "score": 0, "last_activity_date": 1457477428, "creation_date": 1457464244, "last_edit_date": 1457475632, "question_id": 35875969, "link": "https://stackoverflow.com/questions/35875969/class-in-array-convert-to-json", "title": "Class in array convert to JSON", "body": "<p>I am doing TodoList, and \nwant to save the list to a JSON file, but it saves only the Class name.</p>\n\n<p>Here's the code:</p>\n\n<pre><code>require 'date'\nrequire 'json'\nclass TodoList\n    attr_accessor :title\n\n    def initialize(title)\n        @title=title\n        @items=[]\n    end\n\n    def rename(title)\n        @title=title\n    end\n\n    def add_item(new_item, due_date)\n        item=Item.new(new_item)\n        item.set_due_date(due_date)                \n        @items.push(item)\n    end\n\n    def save\n        if json_instance = self.to_json\n            puts \"Saved Successfully\"\n        end\n\n        File.open(\"file_json_complete.json\", \"w\") do |f|\n            f.write(json_instance)\n        end\n    end\nend\n\nclass Item\n    attr_reader :complete_status, :description, :due_date, :created_at    \n\n    def initialize(description)\n        @description=description\n        @complete_status=false\n        @created_at=Date.today\n    end\nend\n\ndoh=TodoList.new(\"doh's stuff\")\n# Add four new items\ndoh.add_item(\"laundry\", 10)\ndoh.add_item(\"study\",20)\ndoh.add_item(\"sleep\", 15)\ndoh.add_item(\"Watch Movie\", 5)\ndoh.save\n</code></pre>\n\n<p>The result in the file only shows the class name <code>TodoList:0x00000000965e88</code>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rake"], "comments": [{"owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 0, "creation_date": 1457463658, "post_id": 35875661, "comment_id": 59414909, "body": "The <code>rails_12factor</code> causes double log entries.  If you have it installed make sure you&#39;re only loading it in the :production environment: <code>gem &#39;rails_12factor&#39;, group: :production</code>"}, {"owner": {"reputation": 111, "user_id": 4456032, "user_type": "registered", "profile_image": "https://graph.facebook.com/1039173311/picture?type=large", "display_name": "Broc Broccoli", "link": "https://stackoverflow.com/users/4456032/broc-broccoli"}, "reply_to_user": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 0, "creation_date": 1457463844, "post_id": 35875661, "comment_id": 59415036, "body": "we don&#39;t use rails_12factor, thanks for the tip though!"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1457465319, "post_id": 35875661, "comment_id": 59415995, "body": "can you please provide additional code. Are you requiring <code>rake</code> or a rake file again possibly? googling &quot;rake executing twice&quot; has a lot of possible reasons why this would happen but most of them seem to boil down to multiple require or initialization where they are not needed."}, {"owner": {"reputation": 5962, "user_id": 115159, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ac02a81e50f368f6d5c7a14b99ce2469?s=128&d=identicon&r=PG", "display_name": "Dharam Gollapudi", "link": "https://stackoverflow.com/users/115159/dharam-gollapudi"}, "edited": false, "score": 3, "creation_date": 1457465664, "post_id": 35875661, "comment_id": 59416224, "body": "Try running <code>rake foo:bar --trace</code> which displays the order of tasks. That might give you an idea of whats calling the particular task twice."}, {"owner": {"reputation": 14087, "user_id": 1544012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbaed9ca8e4320fd64d1989c0e0f488b?s=128&d=identicon&r=PG", "display_name": "BoraMa", "link": "https://stackoverflow.com/users/1544012/borama"}, "edited": false, "score": 0, "creation_date": 1457504435, "post_id": 35875661, "comment_id": 59430894, "body": "From the trace the task seems to be run only once. Can you add a second puts, e.g. <code>puts &quot;STILL RUNNING&quot;</code> and show us the output so that we can rule out a possible double echoing to the console?"}, {"owner": {"reputation": 353, "user_id": 692969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b08b9fce6324fc19eef9559e33fdc67?s=128&d=identicon&r=PG", "display_name": "kucaahbe", "link": "https://stackoverflow.com/users/692969/kucaahbe"}, "edited": false, "score": 0, "creation_date": 1482157915, "post_id": 35875661, "comment_id": 69648259, "body": "Hope this discussion can help: <a href=\"http://stackoverflow.com/questions/31622304/why-is-my-rake-task-running-twice-in-my-test\" title=\"why is my rake task running twice in my test\">stackoverflow.com/questions/31622304/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 596, "user_id": 363293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hlfV4.jpg?s=128&g=1", "display_name": "Ivaylo Novakov", "link": "https://stackoverflow.com/users/363293/ivaylo-novakov"}, "is_accepted": false, "score": 6, "last_activity_date": 1530879160, "last_edit_date": 1530879160, "creation_date": 1457529486, "answer_id": 35892709, "question_id": 35875661, "link": "https://stackoverflow.com/questions/35875661/rake-task-executing-twice-when-only-called-once/35892709#35892709", "title": "Rake task executing twice when only called once", "body": "<p>This is reproducible in a brand new app. The problem disappears if you do not pass the <code>:environment</code> parameter to the rake task.</p>\n\n<p>I traced the issue to <code>~/.rvm/rubies/ruby-2.2.2/lib/ruby/2.2.0/rake/task.rb</code> where we hit the <code>enhance()</code> method twice for this rake task:</p>\n\n<pre><code>[99, 108] in /Users/inovakov/.rvm/rubies/ruby-2.2.2/lib/ruby/2.2.0/rake/task.rb\n    99:     # Enhance a task with prerequisites or actions.  Returns self.\n   100:     def enhance(deps=nil, &amp;block)\n   101:       byebug if self.to_s.include? 'foo'\n   102:       @prerequisites |= deps if deps\n   103:       @actions &lt;&lt; block if block_given?\n=&gt; 104:       self\n   105:     end\n   106: \n   107:     # Name of the task, including any namespace qualifiers.\n   108:     def name\n(byebug) @actions\n[#&lt;Proc:0x007ff492701aa0@/Users/inovakov/source/test_app/lib/tasks/foo.rake:4&gt;, #&lt;Proc:0x007ff4920d3f70@/Users/inovakov/source/test_app/lib/tasks/foo.rake:4&gt;]\n</code></pre>\n\n<p>Between the first and the second time we hit this method we initialise the environment - in this case <code>app/config/environments/development.rb</code>.</p>\n\n<p>If we have two outputs in the rake task we see them both:</p>\n\n<pre><code>bash-3.2$ bundle exec rake foo:bar --trace\n** Invoke foo:bar (first_time)\n** Invoke environment (first_time)\n** Execute environment\nHostname is: localhost\n** Execute foo:bar\nRUNNING\nSTILL RUNNING\nRUNNING\nSTILL RUNNING\n</code></pre>\n\n<p>(I know this is not an answer but I don't have comment privileges yet and this could hopefully help the discussion.)</p>\n"}, {"tags": [], "owner": {"reputation": 546, "user_id": 664321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/064d413d41a6347b63bacc0c56d4bb85?s=128&d=identicon&r=PG", "display_name": "pfac", "link": "https://stackoverflow.com/users/664321/pfac"}, "is_accepted": false, "score": 5, "last_activity_date": 1501498435, "creation_date": 1501498435, "answer_id": 45413934, "question_id": 35875661, "link": "https://stackoverflow.com/questions/35875661/rake-task-executing-twice-when-only-called-once/45413934#45413934", "title": "Rake task executing twice when only called once", "body": "<p>There are plenty of reasons why a Rake task could be running twice, and in this specific case I think it could have to do with the Rake environment loading more than once, as the question linked by <a href=\"https://stackoverflow.com/users/692969/kucaahbe\">@kucaahbe</a> suggests.</p>\n\n<p>I actually got here looking for help myself but my issue was different and I managed to find the answer. Don't think it will help this particular issue but I'll leave it here too.</p>\n\n<h2>Make sure your Rake environment is loading only once</h2>\n\n<p>Following the <a href=\"https://stackoverflow.com/questions/35875661/rake-task-executing-twice-when-only-called-once#comment69648259_35875661\">question linked by @kucaahbe</a>, it suggests this would happen if your environment is loading and initializing Rake twice.</p>\n\n<p>In the context a Rake task runs <code>rake</code> has already been required and initialized, so make sure your task does not include the following lines:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'rake'\n...\nRake.application.init\nRake.application.load_rakefile\n</code></pre>\n\n<p>In this specific case the task does not seem to be doing anything of the sort, so I would check other tasks or the <code>Rakefile</code> for something forcing the Rake context to be loaded twice.</p>\n\n<h2>Clear pre-existing tasks before redefining them</h2>\n\n<p>Just had this issue due to a gem creating a Rake task with the same name.</p>\n\n<p>For instance, if you declare the following task in a Rails application:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>namespace :assets do\n  task :precompile do\n    puts \"Hello\"\n  end\nend\n</code></pre>\n\n<p>and run <code>rake assets:precompile</code>:</p>\n\n<pre><code>...\nI, [2017-07-31T11:25:09.498897 #9455]  INFO -- : Writing /home/pfac/...css.gz\nHello\nHello\n</code></pre>\n\n<p>But if you use <a href=\"https://github.com/ruby/rake/blob/master/lib/rake/task.rb#L146\" rel=\"noreferrer\"><code>Rake::Task#clear</code></a>:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>namespace :assets do\n  task(:precompile).clear\n  task :precompile do\n    puts \"Hello\"\n  end\nend\n</code></pre>\n\n<p>it disables any pre-existing behaviour and prints only <code>Hello</code>.</p>\n\n<p>I don't think this option solves this particular issue, unless <a href=\"https://stackoverflow.com/users/4456032/broc-broccoli\">@broc-broccoli</a> has been defining other <code>foo:bar</code> rake tasks.</p>\n\n<p>Anyway, hope this helps.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10524679, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/901a1285ee9a719065081e3c16dcfe86?s=128&d=identicon&r=PG", "display_name": "Julien", "link": "https://stackoverflow.com/users/10524679/julien"}, "is_accepted": false, "score": 0, "last_activity_date": 1539874232, "creation_date": 1539874232, "answer_id": 52876774, "question_id": 35875661, "link": "https://stackoverflow.com/questions/35875661/rake-task-executing-twice-when-only-called-once/52876774#52876774", "title": "Rake task executing twice when only called once", "body": "<p>For me my rake environnement was loading twice in my rails app because of the presence in my test file of :</p>\n\n<pre><code>setup do\n  MyApp::Application.load_tasks\nend\n</code></pre>\n\n<p>I removed it and the task was invoked once.</p>\n\n<p>Hope it can help. </p>\n\n<p>Sorry for my english.</p>\n"}], "owner": {"reputation": 111, "user_id": 4456032, "user_type": "registered", "profile_image": "https://graph.facebook.com/1039173311/picture?type=large", "display_name": "Broc Broccoli", "link": "https://stackoverflow.com/users/4456032/broc-broccoli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1886, "favorite_count": 1, "answer_count": 3, "score": 5, "last_activity_date": 1539874232, "creation_date": 1457463308, "last_edit_date": 1457466139, "question_id": 35875661, "link": "https://stackoverflow.com/questions/35875661/rake-task-executing-twice-when-only-called-once", "title": "Rake task executing twice when only called once", "body": "<p>I've written a very simple rake task to try and locate the source of this problem.</p>\n\n<pre><code>namespace :foo do\n task bar: :environment do\n  puts 'RUNNING'\n end\nend\n</code></pre>\n\n<p>When executed in the console <code>rake foo:bar</code> the output is:</p>\n\n<pre><code>RUNNING\nRUNNING\n</code></pre>\n\n<p>This occurs when I execute any rake task. Has anyone encountered anything like this before?</p>\n\n<p>EDIT</p>\n\n<p>The above rake task is all that is written in that .rake file.</p>\n\n<p>Here is the Rakefile currently being used.</p>\n\n<pre><code>require File.expand_path('../config/application', __FILE__)\n\nOurApp::Application.load_tasks\n</code></pre>\n\n<p>Also here is the output from running a --trace.</p>\n\n<pre><code>** Invoke foo:bar (first_time)\n** Invoke environment (first_time)\n** Execute environment\nHostname is: ourhost\n** Execute foo:bar\nRUNNING\nRUNNING\n</code></pre>\n"}]