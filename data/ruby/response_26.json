[{"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 23312, "user_id": 560215, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bb365e8477053edcc55b40c3d27781d8?s=128&d=identicon&r=PG", "display_name": "sevenseacat", "link": "https://stackoverflow.com/users/560215/sevenseacat"}, "edited": false, "score": 0, "creation_date": 1436404445, "post_id": 31305643, "comment_id": 50602362, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/27435841/windows-7-64-bit-could-not-find-a-valid-gem-compass-0-here-is-why-unab\">Windows 7 64-bit: Could not find a valid gem &#39;compass&#39; (&gt;= 0), here is why: Unable to download data from https://rubygems.org/</a>"}], "answers": [{"tags": [], "owner": {"reputation": 500, "user_id": 5094718, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/43be6a541d41bbd9b6f767be98e9292a?s=128&d=identicon&r=PG&f=1", "display_name": "Leslie Tate", "link": "https://stackoverflow.com/users/5094718/leslie-tate"}, "is_accepted": true, "score": 0, "last_activity_date": 1438804612, "creation_date": 1438804612, "answer_id": 31841718, "question_id": 31305643, "link": "https://stackoverflow.com/questions/31305643/unable-to-download-data-from-https-rubygems-org-because-certificate-verify/31841718#31841718", "title": "&quot;Unable to download data from https://rubygems.org/&quot; because &quot;certificate verify failed&quot;", "body": "<p>So my problem was that i needed to be running on ruby version 2.2.2. However that update (only for windows users) pulled a lot of errors that I found to not appear on the mac.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6946760, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/2ffca5b90f1c7a4b83396e7b52e83b8c?s=128&d=identicon&r=PG", "display_name": "user6946760", "link": "https://stackoverflow.com/users/6946760/user6946760"}, "is_accepted": false, "score": 1, "last_activity_date": 1476062486, "creation_date": 1476062486, "answer_id": 39950179, "question_id": 31305643, "link": "https://stackoverflow.com/questions/31305643/unable-to-download-data-from-https-rubygems-org-because-certificate-verify/39950179#39950179", "title": "&quot;Unable to download data from https://rubygems.org/&quot; because &quot;certificate verify failed&quot;", "body": "<p>I meet same question.\nThen I change the gem source  from \n\"<a href=\"https://rubygems.org/\" rel=\"nofollow\">https://rubygems.org/</a>\" to \"<a href=\"http://rubygems.org/\" rel=\"nofollow\">http://rubygems.org/</a>\"</p>\n"}], "owner": {"reputation": 500, "user_id": 5094718, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/43be6a541d41bbd9b6f767be98e9292a?s=128&d=identicon&r=PG&f=1", "display_name": "Leslie Tate", "link": "https://stackoverflow.com/users/5094718/leslie-tate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 882, "favorite_count": 1, "accepted_answer_id": 31841718, "answer_count": 2, "score": 0, "last_activity_date": 1476062486, "creation_date": 1436398440, "last_edit_date": 1436404352, "question_id": 31305643, "link": "https://stackoverflow.com/questions/31305643/unable-to-download-data-from-https-rubygems-org-because-certificate-verify", "title": "&quot;Unable to download data from https://rubygems.org/&quot; because &quot;certificate verify failed&quot;", "body": "<p>I added this code to my <code>mydbs_controller.rb</code> as instructed on the Rails tutorial:</p>\n\n<pre><code>def create\n  @mydbs = Mydb.new(params[:mydb])\n\n  @mydb.save\n  redirect_to @mydb\nend\n</code></pre>\n\n<p>I run my database and come up with this error:</p>\n\n<blockquote>\n<pre><code>The controller-level `respond_to' feature has been extracted to the \n`responders` gem. Add it to your Gemfile to continue using this feature:\ngem 'responders', '~&gt; 2.0'\nConsult the Rails upgrade guide for details.\n</code></pre>\n</blockquote>\n\n<p>So I added gem 'responders', '~> 2.0' to my gemfile and tried a bundle install.</p>\n\n<p>I run into another error telling me </p>\n\n<blockquote>\n  <p>Make sure that <code>gem install responders -v '2.1.0'</code> succeeds before bundling.</p>\n</blockquote>\n\n<p>After running that I'm left with yet another error</p>\n\n<blockquote>\n  <p><code>ERROR:  Could not find a valid gem 'responders' (= 2.1.0), here is why:\n            Unable to download data from https://rubygems.org/ - SSL_connect returned=1 errno=0 state\n  =SSLv3 read server certificate B: certificate verify failed (https://api.rubygems.org/specs.4.8.gz)</code></p>\n</blockquote>\n"}, {"tags": ["arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1436396881, "post_id": 31305284, "comment_id": 50600354, "body": "Is your method supposed to be given the array of keys, or is it supposed to generate and verify the array (as you are showing)? Also, you can get the array of keys from a hash simply with, <code>hash.keys</code>. You should browse the class documentation for Ruby Hash and Ruby Array for the available methods. Finally, an array is <i>ordered</i> so order matters (which is why your first attempt won&#39;t generally work). I ran your second method and it came back &quot;true&quot; so it appears to work."}, {"owner": {"reputation": 163, "user_id": 3700231, "user_type": "registered", "accept_rate": 11, "profile_image": "https://graph.facebook.com/771989399/picture?type=large", "display_name": "user3700231", "link": "https://stackoverflow.com/users/3700231/user3700231"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1436397860, "post_id": 31305284, "comment_id": 50600645, "body": "The method is supposed to generate the array from the keys in the hash then verify that the array has all of the keys in the hash. And yes I am aware that hash.keys will give you an array of the hash&#39;s keys in a specific order. However I need to sort both the array_of_keys and hash.keys so they can be compared and I can be given either true or false results. However my second method did not pass the tests that were required to pass the assignment."}, {"owner": {"reputation": 487, "user_id": 2795927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RK9wK.jpg?s=128&g=1", "display_name": "vikram7", "link": "https://stackoverflow.com/users/2795927/vikram7"}, "edited": false, "score": 0, "creation_date": 1436398617, "post_id": 31305284, "comment_id": 50600873, "body": "Can you edit your submission to include your test suite as well?"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1436399155, "post_id": 31305284, "comment_id": 50601038, "body": "You can still use <code>hash.keys.sort</code> if you need to sort them. I still am not seeing why you need the <code>hash.each</code> loop. If you want to use a loop, you could use <code>hash.each_key do |key|</code> since you aren&#39;t using the value. But neither method guarantees the order of keys since Ruby doesn&#39;t maintain the keys of a hash as an ordered collection."}, {"owner": {"reputation": 163, "user_id": 3700231, "user_type": "registered", "accept_rate": 11, "profile_image": "https://graph.facebook.com/771989399/picture?type=large", "display_name": "user3700231", "link": "https://stackoverflow.com/users/3700231/user3700231"}, "reply_to_user": {"reputation": 487, "user_id": 2795927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RK9wK.jpg?s=128&g=1", "display_name": "vikram7", "link": "https://stackoverflow.com/users/2795927/vikram7"}, "edited": false, "score": 0, "creation_date": 1436399812, "post_id": 31305284, "comment_id": 50601222, "body": "@vikram7 I am currently taking a course so all of the exercises are done in browser, but I have added what my tests are telling me to the original submission."}], "answers": [{"comments": [{"owner": {"reputation": 163, "user_id": 3700231, "user_type": "registered", "accept_rate": 11, "profile_image": "https://graph.facebook.com/771989399/picture?type=large", "display_name": "user3700231", "link": "https://stackoverflow.com/users/3700231/user3700231"}, "edited": false, "score": 0, "creation_date": 1436400070, "post_id": 31305864, "comment_id": 50601294, "body": "This almost satisfies my assignment requirements but my tests are saying that <code>do_i_have? DOES NOT return false if one or more of the keys isn&#39;t in the hash</code>"}, {"owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "reply_to_user": {"reputation": 163, "user_id": 3700231, "user_type": "registered", "accept_rate": 11, "profile_image": "https://graph.facebook.com/771989399/picture?type=large", "display_name": "user3700231", "link": "https://stackoverflow.com/users/3700231/user3700231"}, "edited": false, "score": 0, "creation_date": 1436400574, "post_id": 31305864, "comment_id": 50601436, "body": "Ah, I missed that requirement. I&#39;ll leave it to you to tweak to handle that condition :)"}], "tags": [], "owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "is_accepted": false, "score": 1, "last_activity_date": 1436399838, "creation_date": 1436399838, "answer_id": 31305864, "question_id": 31305284, "link": "https://stackoverflow.com/questions/31305284/comparing-keys-in-one-array-with-another/31305864#31305864", "title": "comparing keys in one array with another", "body": "<p>This feels like cheating, but why not...</p>\n\n<pre><code>$ cat foo.rb\n\ndef do_i_have?(hash, array_of_keys)\n  hash.size == (hash.keys &amp; array_of_keys).size\nend\n\nhash = {a: 1, b: 2, c: 3}\n\nputs do_i_have?(hash, [:a, :b, :c])\nputs do_i_have?(hash, [:c, :a, :b])\nputs do_i_have?(hash, [:a, :b])\n</code></pre>\n\n<p>And when run:</p>\n\n<pre><code>$ ruby foo.rb\ntrue\ntrue\nfalse\n</code></pre>\n\n<p>No need to sort them... <code>hash.keys &amp; array_of_keys</code> will contain all fields that are common to both arrays (excluding duplicates). So if it is the same size as the keys in the hash, then they have to be the same set, right?</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1436399885, "creation_date": 1436399885, "answer_id": 31305874, "question_id": 31305284, "link": "https://stackoverflow.com/questions/31305284/comparing-keys-in-one-array-with-another/31305874#31305874", "title": "comparing keys in one array with another", "body": "<p>The class <a href=\"http://ruby-doc.org/core-2.2.0/Hash.html\" rel=\"nofollow\">Hash</a> has a method that returns an array of a hash's keys. If you go through <code>Hash</code>'s instance methods at the link in the previous sentence, you will find that method. It is easier than what you have (which is correct, incidentally):</p>\n\n<pre><code>array_of_keys = []\nhash.each do |key, value|\n  array_of_keys &lt;&lt; key\nend\n</code></pre>\n\n<p>Your main problem is comparing two arrays, not for equality, but for having the same values, but not necessarily in the same order. That's because:</p>\n\n<pre><code>([1,2] == [2,1]) #=&gt; false\n</code></pre>\n\n<p>There are several ways you can determine if two arrays, <code>a</code> and <code>b</code> have the same elements. Here are three:</p>\n\n<ul>\n<li>sort <code>a</code> and <code>b</code> and then see if the two sorted arrays are equal. You need to use the method <a href=\"http://ruby-doc.org/core-2.2.0/Array.html\" rel=\"nofollow\">Array#sort</a> for that.</li>\n<li>see if every element in <code>a</code> is in <code>b</code> and every element in <code>b</code> is in <code>a</code> (hint: consider the method <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-2D\" rel=\"nofollow\">Array#-</a>).</li>\n<li>convert <code>a</code> and <code>b</code> to <a href=\"http://ruby-doc.org/stdlib-2.2.0/libdoc/set/rdoc/Set.html\" rel=\"nofollow\">Set</a>s and determine if the two sets are equal. (To use methods of the class <code>Set</code> you need <code>require 'set'</code>. To convert an array <code>a</code> to a set you can use <code>s = Set.new(a)</code>.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "edited": false, "score": 0, "creation_date": 1436400642, "post_id": 31305984, "comment_id": 50601448, "body": "What about duplicates in the array? No idea if that&#39;s good or bad for OP, but might be an issue."}], "tags": [], "owner": {"reputation": 487, "user_id": 2795927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RK9wK.jpg?s=128&g=1", "display_name": "vikram7", "link": "https://stackoverflow.com/users/2795927/vikram7"}, "is_accepted": false, "score": 1, "last_activity_date": 1436400578, "creation_date": 1436400578, "answer_id": 31305984, "question_id": 31305284, "link": "https://stackoverflow.com/questions/31305284/comparing-keys-in-one-array-with-another/31305984#31305984", "title": "comparing keys in one array with another", "body": "<p>An array of a hash's keys can simply be generated by <code>hash.keys</code>. If you sort that array and compare it against a sorted version of the array you're passing into that method, you should be good:</p>\n\n<pre><code>def do_i_have?(hash, array)\n  hash.keys.sort == array.sort\nend\n</code></pre>\n"}], "owner": {"reputation": 163, "user_id": 3700231, "user_type": "registered", "accept_rate": 11, "profile_image": "https://graph.facebook.com/771989399/picture?type=large", "display_name": "user3700231", "link": "https://stackoverflow.com/users/3700231/user3700231"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1436400578, "creation_date": 1436396360, "last_edit_date": 1436399746, "question_id": 31305284, "link": "https://stackoverflow.com/questions/31305284/comparing-keys-in-one-array-with-another", "title": "comparing keys in one array with another", "body": "<p>Ruby Newbie here. I have been banging my head up against a wall for the better part of two hours now due to an assignment that I have. I am to create a method has two arguments - a Hash and Array of keys derived from that hash's keys. The method should return true if the Array has all of the keys in the hash, and false if it does not. I have to make sure every key in the hash argument is also contained in the array_of_keys argument. The method should return true if all of the elements in the array_of_keys array are within the set of keys in the hash argument, without regard to a specific order. The writers of the assignment suggested using the .sort method to do this.</p>\n\n<p>This is what I have so far, however I am having an issue figuring out how to sort both arrays in order to compare.  </p>\n\n<pre><code>def do_i_have?(hash, array_of_keys)\n  array_of_keys = []\n  hash.each do |key, value|\n    array_of_keys &lt;&lt; key\n  end\n  hash.keys == array_of_keys\nend\n</code></pre>\n\n<p>I have also tried, but no luck.</p>\n\n<pre><code>def do_i_have?(hash, array_of_keys)\n  array_of_keys = []\n  hash.each do |key, value|\n    array_of_keys &lt;&lt; key\n  end\n  hash.keys.sort == array_of_keys.sort\nend\n</code></pre>\n\n<p>What is the correct syntax in order to sort and compare these two arrays?</p>\n\n<p>Thanks guys!</p>\n\n<p>When I use the second method, Rspec tells me:</p>\n\n<pre><code> do_i_have? returns true if all keys are in the hash\n do_i_have? returns true if all keys are in the hash, regardless of order\n</code></pre>\n\n<p>but,</p>\n\n<pre><code>do_i_have? DOES NOT return false if it doesn't have any of the keys\ndo_i_have? DOES NOT return false if one or more of the keys isn't in the hash\ndo_i_have? DOES NOT return false if the hash has a different number of keys than the array\n</code></pre>\n\n<p>Rspec:</p>\n\n<pre><code>describe \"do_i_have?\" do\n  it \"returns false if it doesn't have any of the keys\" do\n    h = { name: \"Computer\", cost: \"$1,000\" }\n    keys = [:age, :bio]\n\n    expect( do_i_have?(h, keys) ).to eq(false)\n  end\n  it \"returns false if one or more of the keys isn't in the hash\" do\n    h = { name: \"Computer\", cost: \"$1,000\" }\n    keys = [:name, :bio, :cost]\n\n    expect( do_i_have?(h, keys) ).to eq(false)\n  end\n  it \"returns false if the hash has a different number of keys than the array\" do\n    h = { name: \"Computer\", cost: \"$1,000\" }\n    keys = [:name]\n\n    expect( do_i_have?(h, keys) ).to eq(false)\n  end  \n  it \"returns true if all keys are in the hash\" do\n    h = { name: \"Computer\", cost: \"$1,000\", uuid: \"1234\" }\n    keys = [:name, :cost, :uuid]\n\n    expect( do_i_have?(h, keys) ).to eq(true)\n  end\n  it \"returns true if all keys are in the hash, regardless of order\" do\n    h = { name: \"Computer\", cost: \"$1,000\", uuid: \"1234\" }\n    keys = [:name, :uuid, :cost]\n\n    expect( do_i_have?(h, keys) ).to eq(true)\n  end  \nend\n</code></pre>\n"}, {"tags": ["ruby", "watir", "watir-webdriver"], "comments": [{"owner": {"reputation": 7338, "user_id": 2580791, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/153662ca67d074e1f699912003f82ae2?s=128&d=identicon&r=PG", "display_name": "Mike Laren", "link": "https://stackoverflow.com/users/2580791/mike-laren"}, "edited": false, "score": 0, "creation_date": 1436402295, "post_id": 31305221, "comment_id": 50601849, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/17547473/how-to-open-a-new-tab-using-selenium-webdriver\">How to open a new tab using Selenium WebDriver?</a>"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1436410899, "post_id": 31305221, "comment_id": 50603886, "body": "What exactly do you mean by &quot;open a link in a new tab&quot;? If you manually press Ctrl+t on the keyboard, it will simply open a blank tab. If that is your goal, you could have just created a new browser window - ie <code>browser2 = Watir::Browser.new :chrome</code>. Perhaps your goal is that when you click on a link, you want it to open in a new tab as opposed to the current tab?"}, {"owner": {"reputation": 884, "user_id": 4308012, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8d75ac73f32dbed2106579ccba92ee69?s=128&d=identicon&r=PG&f=1", "display_name": "stack1", "link": "https://stackoverflow.com/users/4308012/stack1"}, "edited": false, "score": 0, "creation_date": 1436485683, "post_id": 31305221, "comment_id": 50646095, "body": "I could make a new browser, but i prefer to make a tab instead, something like this - browser2 = current_browser.new_tab(tab_name)"}], "answers": [{"comments": [{"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 2, "creation_date": 1436397703, "post_id": 31305517, "comment_id": 50600618, "body": "Also, note, that webdriver won&#39;t let you access new tabs, so even if you open it, you won&#39;t be able to do anything with it."}], "tags": [], "owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "is_accepted": false, "score": 2, "last_activity_date": 1436397655, "last_edit_date": 1495540272, "creation_date": 1436397655, "answer_id": 31305517, "question_id": 31305221, "link": "https://stackoverflow.com/questions/31305221/click-an-alphabet-key-in-watir/31305517#31305517", "title": "Click an alphabet key in watir", "body": "<p>This is kind of a duplicate. The selenium and watir solutions are identical:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/17547473/how-to-open-a-new-tab-using-selenium-webdriver\">How to open a new tab using Selenium WebDriver with Java?</a></p>\n\n<p>From the 2nd answer:\n<code>browser.element.send_keys(:control, 't')</code></p>\n"}], "owner": {"reputation": 884, "user_id": 4308012, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8d75ac73f32dbed2106579ccba92ee69?s=128&d=identicon&r=PG&f=1", "display_name": "stack1", "link": "https://stackoverflow.com/users/4308012/stack1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "closed_date": 1436421386, "answer_count": 1, "score": 0, "last_activity_date": 1436397655, "creation_date": 1436396014, "question_id": 31305221, "link": "https://stackoverflow.com/questions/31305221/click-an-alphabet-key-in-watir", "closed_reason": "Not suitable for this site", "title": "Click an alphabet key in watir", "body": "<p>I want to open a link in a new tab. I am using watir, watir-webdriver and chrome.\nI need to press ctrl + T. How do I do it ?</p>\n\n<p>This does NOT help - \n<code>browser.element.send_keys [:control, 'T']</code></p>\n\n<p>Exception -</p>\n\n<pre><code>C:/blah/selenium-webdriver-2.33.0/lib/selenium/webdriver/common/keyboard.rb:48:i\u200c\u200bn assert_modifier': \"T\" is not a modifier key, expected one of [:control, :shift, :a from C:/blah/selenium-webdriver-2.33.0/lib/selenium/webdriver/common/keyboard.rb:25:i\u200c\u200bn press'....\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "aptana", "radrails"], "comments": [{"owner": {"reputation": 16775, "user_id": 442945, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/TovHM.png?s=128&g=1", "display_name": "Nathaniel Ford", "link": "https://stackoverflow.com/users/442945/nathaniel-ford"}, "edited": false, "score": 1, "creation_date": 1436395485, "post_id": 31305076, "comment_id": 50599864, "body": "You need to add more details about your environment and how you start your application for us to have a hope of being able to help you here."}, {"owner": {"reputation": 1, "user_id": 5096069, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2GicU6vNTa4/AAAAAAAAAAI/AAAAAAAAACI/jLzp8H0dw4g/photo.jpg?sz=128", "display_name": "Daniel Herzog", "link": "https://stackoverflow.com/users/5096069/daniel-herzog"}, "reply_to_user": {"reputation": 16775, "user_id": 442945, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/TovHM.png?s=128&g=1", "display_name": "Nathaniel Ford", "link": "https://stackoverflow.com/users/442945/nathaniel-ford"}, "edited": false, "score": 0, "creation_date": 1436417191, "post_id": 31305076, "comment_id": 50605505, "body": "I added now the console log. Anything else i could add?"}], "answers": [{"tags": [], "owner": {"reputation": 13270, "user_id": 6678, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/777894ea5153122bfa6b83f5bbf23622?s=128&d=identicon&r=PG", "display_name": "Leonid Shevtsov", "link": "https://stackoverflow.com/users/6678/leonid-shevtsov"}, "is_accepted": false, "score": 0, "last_activity_date": 1436616153, "creation_date": 1436616153, "answer_id": 31356978, "question_id": 31305076, "link": "https://stackoverflow.com/questions/31305076/starting-server-in-rails-app-dont-lead-me-on-the-root-page-prototyp-js-error-oc/31356978#31356978", "title": "Starting server in rails app dont lead me on the root page. Prototyp.js error occurs in console", "body": "<p>Looks like the root page is overridden by a static file - delete <code>public/index.html</code> if there is such a file inside the app folder.</p>\n\n<p>(It's the default welcome page and it's supposed to be deleted once you have some route mapped to the root page)</p>\n"}], "owner": {"reputation": 1, "user_id": 5096069, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2GicU6vNTa4/AAAAAAAAAAI/AAAAAAAAACI/jLzp8H0dw4g/photo.jpg?sz=128", "display_name": "Daniel Herzog", "link": "https://stackoverflow.com/users/5096069/daniel-herzog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436616153, "creation_date": 1436395151, "last_edit_date": 1436593903, "question_id": 31305076, "link": "https://stackoverflow.com/questions/31305076/starting-server-in-rails-app-dont-lead-me-on-the-root-page-prototyp-js-error-oc", "title": "Starting server in rails app dont lead me on the root page. Prototyp.js error occurs in console", "body": "<p>Some months ago I tried out Aptana RadRails but I changed back to Sublime.</p>\n\n<p>Now whenever I start a my Application I get the following console log errors, but on <code>localhost:3000</code> I see \"Welcome to Aptana RadRails\" and apart from the root problem the Application works still fine.</p>\n\n<p>I don't know why this happens, because the root in my routes is a totally different site. It tells me prototyp.js, rails.png and effects.js are missing but I never used them. </p>\n\n<p>Error in the console:</p>\n\n<pre><code>Started GET \"/images/rails.png\" for ::1 at 2015-07-09 00:21:36 +0200  \nActiveRecord::SchemaMigration Load (15.0ms)  SELECT\n\"schema_migrations\".* FROM \"schema_migrations\"\n\nActionController::RoutingError (No route matches [GET] \"/images/rails.png\"):   actionpack (4.2.0)\nlib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'   web-console (2.1.2)\nlib/web_console/middleware.rb:37:in `call'   actionpack (4.2.0)\nlib/action_dispatch/middleware/show_exceptions.rb:30:in `call'   railties (4.2.0)\nlib/rails/rack/logger.rb:38:in `call_app'   railties (4.2.0)\nlib/rails/rack/logger.rb:20:in `block in call'   activesupport (4.2.0)\nlib/active_support/tagged_logging.rb:68:in `block in tagged'   activesupport (4.2.0)\nlib/active_support/tagged_logging.rb:26:in `tagged'   activesupport (4.2.0)\nlib/active_support/tagged_logging.rb:68:in `tagged'   railties (4.2.0)\nlib/rails/rack/logger.rb:20:in `call'   actionpack (4.2.0)\nlib/action_dispatch/middleware/request_id.rb:21:in `call'   rack (1.6.0)\nlib/rack/methodoverride.rb:22:in `call'   rack (1.6.0)\nlib/rack/runtime.rb:18:in `call'   activesupport (4.2.0)\nlib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'   rack (1.6.0)\nlib/rack/lock.rb:17:in `call'   actionpack (4.2.0)\nlib/action_dispatch/middleware/static.rb:113:in `call'   rack (1.6.0)\nlib/rack/sendfile.rb:113:in `call'   railties (4.2.0)\nlib/rails/engine.rb:518:in `call'   railties (4.2.0)\nlib/rails/application.rb:164:in `call'   rack (1.6.0)\nlib/rack/lock.rb:17:in `call'   rack (1.6.0)\nlib/rack/content_length.rb:15:in `call'   rack (1.6.0)\nlib/rack/handler/webrick.rb:89:in `service'  \n/Users/admin/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'  \n/Users/admin/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'  \n/Users/admin/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1436394363, "post_id": 31304825, "comment_id": 50599437, "body": "This seems like a join table. You&#39;re not supposed to query those directly. Have you looked at HABTM or <code>has_many :through</code> constructs? See the <a href=\"http://guides.rubyonrails.org/association_basics.html\" rel=\"nofollow noreferrer\">rails guide for associations</a>."}], "answers": [{"comments": [{"owner": {"reputation": 5922, "user_id": 3632206, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/70c95cfa616112abaa8c04a878c256ed?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian Zeki", "link": "https://stackoverflow.com/users/3632206/sebastian-zeki"}, "edited": false, "score": 0, "creation_date": 1436394773, "post_id": 31304921, "comment_id": 50599590, "body": "I get syntax errors- unexpected : and } (although seems balanced?)"}], "tags": [], "owner": {"reputation": 6267, "user_id": 1144104, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c135bc644610fabc6e059b73fdd7f8ad?s=128&d=identicon&r=PG", "display_name": "jazzytomato", "link": "https://stackoverflow.com/users/1144104/jazzytomato"}, "is_accepted": false, "score": 1, "last_activity_date": 1436394839, "last_edit_date": 1436394839, "creation_date": 1436394500, "answer_id": 31304921, "question_id": 31304825, "link": "https://stackoverflow.com/questions/31304825/create-array-of-arrays-from-database-query-in-rails/31304921#31304921", "title": "Create array of arrays from database query in rails", "body": "<p>Try this </p>\n\n<pre><code>relationships = Relationship.all.map { |r| [r.follower_id.to_s, followed_id.to_s] }\n\nresults = {\"edges\": relationships }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5922, "user_id": 3632206, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/70c95cfa616112abaa8c04a878c256ed?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian Zeki", "link": "https://stackoverflow.com/users/3632206/sebastian-zeki"}, "edited": false, "score": 0, "creation_date": 1436395477, "post_id": 31304973, "comment_id": 50599858, "body": "should be r.followed_id.to_s but otherwise worked. Cheers"}, {"owner": {"reputation": 16234, "user_id": 2202702, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lTGWe.jpg?s=128&g=1", "display_name": "Arslan Ali", "link": "https://stackoverflow.com/users/2202702/arslan-ali"}, "reply_to_user": {"reputation": 5922, "user_id": 3632206, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/70c95cfa616112abaa8c04a878c256ed?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian Zeki", "link": "https://stackoverflow.com/users/3632206/sebastian-zeki"}, "edited": false, "score": 0, "creation_date": 1436423946, "post_id": 31304973, "comment_id": 50608275, "body": "In case, you see something missing in any answer, you can edit it. However, I fixed it to <code>r</code>."}], "tags": [], "owner": {"reputation": 16234, "user_id": 2202702, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lTGWe.jpg?s=128&g=1", "display_name": "Arslan Ali", "link": "https://stackoverflow.com/users/2202702/arslan-ali"}, "is_accepted": true, "score": 2, "last_activity_date": 1436423907, "last_edit_date": 1436423907, "creation_date": 1436394727, "answer_id": 31304973, "question_id": 31304825, "link": "https://stackoverflow.com/questions/31304825/create-array-of-arrays-from-database-query-in-rails/31304973#31304973", "title": "Create array of arrays from database query in rails", "body": "<p>You can use <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-map\" rel=\"nofollow\"><code>map</code></a> to build an array like:</p>\n\n<pre><code>Relationship.all.map { |r| [r.follower_id.to_s, r.followed_id.to_s] } \n</code></pre>\n"}], "owner": {"reputation": 5922, "user_id": 3632206, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/70c95cfa616112abaa8c04a878c256ed?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian Zeki", "link": "https://stackoverflow.com/users/3632206/sebastian-zeki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 491, "favorite_count": 0, "accepted_answer_id": 31304973, "answer_count": 2, "score": 1, "last_activity_date": 1436423907, "creation_date": 1436393969, "question_id": 31304825, "link": "https://stackoverflow.com/questions/31304825/create-array-of-arrays-from-database-query-in-rails", "title": "Create array of arrays from database query in rails", "body": "<p>Ive got a table which consists of two fields called follower_id and followed_id. I need to create a query which creates an array of from each row and puts that in an overall array so that the end structure looks like:</p>\n\n<pre><code>\"edges\": [\n    [\"1\", \"2\"],\n    [\"1\", \"3\"],\n    [\"3\", \"4\"],\n    [\"3\", \"5\"]\n  ]\n</code></pre>\n\n<p>so far I have</p>\n\n<pre><code> def self.including_relationships\n  result={}\n  result[\"edges\"] Relationship.all.each do |relationship|\n    result[\"\"]= Relationship.select(:follower_id.to_s,:follower_id.to_s)\n  #the code here is called once for each user\n  # user is accessible by 'user' variable\nend\n  result\nend\n</code></pre>\n\n<p>but this produces:</p>\n\n<pre><code> edges: [\n\"[4, 3, 3, 4]\",\n\"[3, 4, 3, 4]\"\n]\n</code></pre>\n"}, {"tags": ["ruby", "methods", "block", "yield"], "answers": [{"comments": [{"owner": {"reputation": 3171, "user_id": 2610043, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/jIN0G.jpg?s=128&g=1", "display_name": "hedgesky", "link": "https://stackoverflow.com/users/2610043/hedgesky"}, "edited": false, "score": 0, "creation_date": 1436395247, "post_id": 31304894, "comment_id": 50599767, "body": "I used some Ruby magic here, can explain it if it isn&#39;t clear enough."}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 1, "creation_date": 1436408060, "post_id": 31304894, "comment_id": 50603231, "body": "<code>operand_1, operand_2 = @calculator.pop(2)</code> :)"}, {"owner": {"reputation": 3171, "user_id": 2610043, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/jIN0G.jpg?s=128&g=1", "display_name": "hedgesky", "link": "https://stackoverflow.com/users/2610043/hedgesky"}, "reply_to_user": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1436427987, "post_id": 31304894, "comment_id": 50610702, "body": "@cremno nice addition)"}], "tags": [], "owner": {"reputation": 3171, "user_id": 2610043, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/jIN0G.jpg?s=128&g=1", "display_name": "hedgesky", "link": "https://stackoverflow.com/users/2610043/hedgesky"}, "is_accepted": false, "score": 0, "last_activity_date": 1436394370, "creation_date": 1436394370, "answer_id": 31304894, "question_id": 31304596, "link": "https://stackoverflow.com/questions/31304596/how-to-syntactically-call-a-method-that-takes-a-block-in-another-method/31304894#31304894", "title": "How to syntactically call a method that takes a block in another method?", "body": "<p>You can use following code:</p>\n\n<pre><code>class RPNCalculator\n  def initialize\n    @calculator = []\n  end\n\n  def push(num)\n    @calculator &lt;&lt; num\n  end\n\n  def plus\n    do_operation(:+)\n  end\n\n  def minus\n    do_operation(:-)\n  end\n\n  def divide\n    do_operation(:/)\n  end\n\n  def times\n    do_operation(:*)\n  end\n\n  private\n\n  def do_operation(operation)\n    operand_2, operand_1 = @calculator.pop, @calculator.pop\n    value = operand_1.to_f.send(operation, operand_2)\n    @calculator &lt;&lt; value\n  end\nend\n</code></pre>\n\n<p>Also, I think you should rename <code>times</code> to <code>multiply</code>, because method <code>times</code> is often used to repeat block of code several times and it may cause misunderstanding.</p>\n"}], "owner": {"reputation": 11, "user_id": 5058992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff08af505573063919441ed30fe8fa90?s=128&d=identicon&r=PG&f=1", "display_name": "dgarz", "link": "https://stackoverflow.com/users/5058992/dgarz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436394370, "creation_date": 1436392789, "question_id": 31304596, "link": "https://stackoverflow.com/questions/31304596/how-to-syntactically-call-a-method-that-takes-a-block-in-another-method", "title": "How to syntactically call a method that takes a block in another method?", "body": "<p>So I'm new to Ruby and I'm looking to make my code a little neater and cleaner looking. Basically I have a these methods in a class. I made a reverse polish notation calculator. Now I know in theory \"don't repeat yourself\" but as you can see in the <code>plus</code> <code>minus</code> <code>divide</code> and <code>times</code> methods I do. Basically the only thing that changes is a the +, -, /, *. I'm wondering what is the best way to go about fixing that? To start, here's the code. Some of my thoughts are below.</p>\n\n<pre><code>class RPNCalculator\n\ndef initialize\n    @calculator =  [ ] \nend\n\ndef push(num)\n    @calculator &lt;&lt; num\nend\n\ndef plus\n    value = @calculator[-2].to_f + @calculator[-1]\n    @calculator.delete_at(-2)\n    @calculator.delete_at(-1)\n    @calculator &lt;&lt; value\nend\n\ndef minus\n    value = @calculator[-2].to_f - @calculator[-1]\n    @calculator.delete_at(-2)\n    @calculator.delete_at(-1)\n    @calculator &lt;&lt; value\nend\n\ndef divide\n    value = @calculator[-2].to_f / @calculator[-1]\n    @calculator.delete_at(-2)\n    @calculator.delete_at(-1)\n    @calculator &lt;&lt; value\nend\n\n def times\n    value = @calculator[-2].to_f * @calculator[-1]\n    @calculator.delete_at(-2)\n    @calculator.delete_at(-1)\n    @calculator &lt;&lt; value\nend\n</code></pre>\n\n<p>Basically, I'm thinking to make another method <code>end_calc()</code> which takes a block(?). I'm wondering what that would look like. For example this is what I was thinking about.  </p>\n\n<pre><code>def end_calc(&amp;block)\nvalue = @calculator[-2].to_f &amp;block @calculator[-1]\n    @calculator.delete_at(-2)\n    @calculator.delete_at(-1)\n    @calculator &lt;&lt; value\nend\n\ndef plus\n  end_calc(+)\nend\n</code></pre>\n\n<p>Basically in the methods <code>plus</code> <code>minus</code> etc, I just call end_calc plus the necessary <code>+</code> <code>-</code> <code>/</code> <code>*</code> sign. How can I write it syntactically so that the <code>+</code> method is inserted into <code>end_calc</code>? Or what should I go about studying in order to understand how to do that? Is there another what to do it that may be more effective that I do not know about yet?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "xcode", "macos", "ruby-on-rails-3"], "answers": [{"tags": [], "owner": {"reputation": 16, "user_id": 4992687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b922b612a1fb25addfa14c91e98d0c97?s=128&d=identicon&r=PG", "display_name": "Hassan Schroeder", "link": "https://stackoverflow.com/users/4992687/hassan-schroeder"}, "is_accepted": false, "score": 0, "last_activity_date": 1436394529, "creation_date": 1436394529, "answer_id": 31304928, "question_id": 31304531, "link": "https://stackoverflow.com/questions/31304531/rails-will-not-install-on-my-mac/31304928#31304928", "title": "Rails will not install on my Mac", "body": "<p>Uh, \"it works fine\"??? No, it doesn't, at all - the install is  failing because current Rails requires the nokogiri gem. </p>\n\n<p>Read and follow the directions starting from 'The file \"/usr/include/iconv.h\" is missing' ...</p>\n"}, {"tags": [], "owner": {"reputation": 3171, "user_id": 2610043, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/jIN0G.jpg?s=128&g=1", "display_name": "hedgesky", "link": "https://stackoverflow.com/users/2610043/hedgesky"}, "is_accepted": false, "score": 1, "last_activity_date": 1436394848, "creation_date": 1436394848, "answer_id": 31305008, "question_id": 31304531, "link": "https://stackoverflow.com/questions/31304531/rails-will-not-install-on-my-mac/31305008#31305008", "title": "Rails will not install on my Mac", "body": "<pre><code>The file \"/usr/include/iconv.h\" is missing in your build environment,\nwhich means you haven't installed Xcode Command Line Tools properly.\n</code></pre>\n\n<p>These lines tell that you haven't install XCode, it's necessary to many console utilities. </p>\n\n<p>Also, you install your gems with sudo - it can cause several problems with privileges later. I recommend you to use <a href=\"https://rvm.io/rvm/install\" rel=\"nofollow\">rvm</a> to manage ruby installations, it will save you from a lot of problems in future.</p>\n"}, {"tags": [], "owner": {"reputation": 2277, "user_id": 3234367, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FxQ1m.jpg?s=128&g=1", "display_name": "aaron-coding", "link": "https://stackoverflow.com/users/3234367/aaron-coding"}, "is_accepted": false, "score": 1, "last_activity_date": 1436400979, "creation_date": 1436400979, "answer_id": 31306057, "question_id": 31304531, "link": "https://stackoverflow.com/questions/31304531/rails-will-not-install-on-my-mac/31306057#31306057", "title": "Rails will not install on my Mac", "body": "<p>Learning to read your error messages is something that will help you a lot in the future.</p>\n\n<pre><code>try running `xcode-select --install` on\nterminal and follow the instructions.  If it fails, open Xcode.app,\nselect from the menu \"Xcode\" - \"Open Developer Tool\" - \"More Developer\nTools\" to open the developer site, download the installer for your OS\nversion and run it.\n</code></pre>\n\n<p>That text is in your own error messages, give it a shot. Once you have Xcode installed, try installing Rails again.</p>\n"}], "owner": {"reputation": 1, "user_id": 4852903, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-v8XjAkjAwt4/AAAAAAAAAAI/AAAAAAAAACQ/A9guy_E_-ng/photo.jpg?sz=128", "display_name": "Matthew Hamer", "link": "https://stackoverflow.com/users/4852903/matthew-hamer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 289, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1436400979, "creation_date": 1436392484, "last_edit_date": 1436392943, "question_id": 31304531, "link": "https://stackoverflow.com/questions/31304531/rails-will-not-install-on-my-mac", "title": "Rails will not install on my Mac", "body": "<p>Whenever I attempt to install Rails on my Mac it works fine but immediately after when I attempt to see what version of Rails I have, the terminal says that I do not have Rails installed.</p>\n\n<p>Here's what I see in my terminal:</p>\n\n<pre><code>admins-MBP-5:~ Programming$ sudo gem install rails\nBuilding native extensions.  This could take a while...\nERROR:  Error installing rails:\n    ERROR: Failed to build gem native extension.\n\n    /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby extconf.rb\nchecking if the C compiler accepts ... yes\nchecking if the C compiler accepts -Wno-error=unused-command-line-argument-hard-error-in-future... no\nBuilding nokogiri using packaged libraries.\n-----\nThe file \"/usr/include/iconv.h\" is missing in your build environment,\nwhich means you haven't installed Xcode Command Line Tools properly.\n\nTo install Command Line Tools, try running `xcode-select --install` on\nterminal and follow the instructions.  If it fails, open Xcode.app,\nselect from the menu \"Xcode\" - \"Open Developer Tool\" - \"More Developer\nTools\" to open the developer site, download the installer for your OS\nversion and run it.\n-----\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n    --with-opt-dir\n    --without-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n    --ruby=/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby\n    --help\n    --clean\n    --use-system-libraries\n    --enable-static\n    --disable-static\n    --with-zlib-dir\n    --without-zlib-dir\n    --with-zlib-include\n    --without-zlib-include=${zlib-dir}/include\n    --with-zlib-lib\n    --without-zlib-lib=${zlib-dir}/lib\n    --enable-cross-build\n    --disable-cross-build\n\n\nGem files will remain installed in /Library/Ruby/Gems/2.0.0/gems/nokogiri-1.6.6.2 for inspection.\nResults logged to /Library/Ruby/Gems/2.0.0/gems/nokogiri-1.6.6.2/ext/nokogiri/gem_make.out\nadmins-MBP-5:~ Programming$ rails --version\nRails is not currently installed on this system. To get the latest version, simply type:\n\n    $ sudo gem install rails\n\nYou can then rerun your \"rails\" command.\n</code></pre>\n"}, {"tags": ["ruby", "youtube", "youtube-api", "youtube-data-api", "youtube-analytics-api"], "answers": [{"tags": [], "owner": {"reputation": 12417, "user_id": 199047, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9da2731ba87bd82a119c2f776f986d64?s=128&d=identicon&r=PG", "display_name": "jlmcdonald", "link": "https://stackoverflow.com/users/199047/jlmcdonald"}, "is_accepted": true, "score": 1, "last_activity_date": 1436419324, "creation_date": 1436419324, "answer_id": 31308782, "question_id": 31304476, "link": "https://stackoverflow.com/questions/31304476/can-you-make-a-youtube-analytics-api-request-using-nethttp-in-ruby/31308782#31308782", "title": "Can you make a YouTube analytics API request using Net::HTTP in Ruby?", "body": "<p>If you're passing the access token as a URL parameter, the name of the parameter should be \"access_token\" and you don't need the \"Bearer\" part of the string; it would just be:</p>\n\n<pre><code>request.body = URI.encode_www_form({\"access_token\" =&gt; \"#{access_token}\", \"ids\" =&gt; \"channel==#{TEST_CHANNEL_ID}\", \"start-date\" =&gt; \"2015-07-01\", \"end-date\" =&gt; \"2015-07-20\", \"metrics\" =&gt; \"views\"})\n</code></pre>\n\n<p>You only use the <code>Authorization: Bearer {whatever}</code>form if you're setting the access token in the request header.</p>\n\n<p><a href=\"https://developers.google.com/identity/protocols/OAuth2WebServer#callinganapi\" rel=\"nofollow\">Here's the documentation</a> on this.</p>\n"}], "owner": {"reputation": 47, "user_id": 1607913, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OmBdS.jpg?s=128&g=1", "display_name": "codercycle", "link": "https://stackoverflow.com/users/1607913/codercycle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 31308782, "answer_count": 1, "score": 0, "last_activity_date": 1436419324, "creation_date": 1436392264, "last_edit_date": 1436393720, "question_id": 31304476, "link": "https://stackoverflow.com/questions/31304476/can-you-make-a-youtube-analytics-api-request-using-nethttp-in-ruby", "title": "Can you make a YouTube analytics API request using Net::HTTP in Ruby?", "body": "<p>Assuming my <code>access_token</code> and my <code>TEST_CHANNEL_ID</code> are correct, shouldn't this request work?</p>\n\n<p>I'm getting a 404 error, am I missing some parameter?</p>\n\n<pre><code>uri = URI.parse(\"https://www.googleapis.com\")\n\nhttp = Net::HTTP.new(uri.host, uri.port)\nhttp.use_ssl = true\nhttp.verify_mode = OpenSSL::SSL::VERIFY_NONE\n\nrequest = Net::HTTP::Post.new(\"/youtube/analytics/v1/reports\")\nrequest.body = URI.encode_www_form({\"Authorization\" =&gt; \"Bearer #{access_token}\", \"ids\" =&gt; \"channel==#{TEST_CHANNEL_ID}\", \"start-date\" =&gt; \"2015-07-01\", \"end-date\" =&gt; \"2015-07-20\", \"metrics\" =&gt; \"views\"})\n\nresponse = http.request(request)\n</code></pre>\n\n<p>It's worth mentioning that I obtained my <code>access_token</code> with a <code>refresh_token</code> authorized for all youtube api scopes</p>\n"}, {"tags": ["ruby", "loops", "text-files", "duplicate-removal"], "answers": [{"tags": [], "owner": {"reputation": 846, "user_id": 5024417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f027e662415294754812bd2a00b83af?s=128&d=identicon&r=PG", "display_name": "Nathan Wilson", "link": "https://stackoverflow.com/users/5024417/nathan-wilson"}, "is_accepted": false, "score": 0, "last_activity_date": 1436393962, "creation_date": 1436393962, "answer_id": 31304823, "question_id": 31304411, "link": "https://stackoverflow.com/questions/31304411/is-there-a-way-to-delete-a-line-in-a-text-file-if-it-matches-a-specific-text/31304823#31304823", "title": "Is there a way to delete a line in a text file if it matches a specific text?", "body": "<p>You can't write and read to the same file at the same time like that; the first line you write, will clobber the rest of the file so you won't be able to read it anymore.</p>\n\n<p>You should write the changes to a temporary file as you read the lines, then move the temp file to the original file at the end. Something like:</p>\n\n<pre><code>require 'tempfile'\nrequire 'fileutils'\n\ntemp_file = Tempfile.new('foo')\nbegin\n  File.open(\"yahoo_accounts.txt\", 'r') do |file|\n    file.each_line do |line|\n      temp_file.puts line unless line == '#{name},#{pass}'\n    end\n  end\n  temp_file.close\n  FileUtils.mv(temp_file.path, \"yahoo_accounts.txt\")\nensure\n  temp_file.close\n  temp_file.unlink\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 573, "user_id": 4566078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/pWJYn.jpg?s=128&g=1", "display_name": "marriedjane875", "link": "https://stackoverflow.com/users/4566078/marriedjane875"}, "edited": false, "score": 0, "creation_date": 1436462370, "post_id": 31307438, "comment_id": 50634866, "body": "I think this will work better, I&#39;m going to try this out now, thanks."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 0, "last_activity_date": 1436411344, "creation_date": 1436411344, "answer_id": 31307438, "question_id": 31304411, "link": "https://stackoverflow.com/questions/31304411/is-there-a-way-to-delete-a-line-in-a-text-file-if-it-matches-a-specific-text/31307438#31307438", "title": "Is there a way to delete a line in a text file if it matches a specific text?", "body": "<p>If the file is not huge, you can read it into an array, modify the array and then write the array to the file, overwriting the previous contents.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>def remove_lines(fname, user_name, password)\n  IO.write(fname, IO.read(fname).gsub(/^#{user_name},#{password}\\n/, ''))\nend\n</code></pre>\n\n<p><strong>Example</strong></p>\n\n<p>Let's create some data:</p>\n\n<pre><code>text =&lt;&lt;_\nBubba,boar\nHenrietta,vespa\nLuigi,pink\nBubba,boar\nLuigi,mauve\n_\n  #=&gt; \"Bubba,boar\\nHenrietta,vespa\\nLuigi,pink\\nBubba,boar\\nLuigi,mauve\\n\"\n</code></pre>\n\n<p>and write it to a file:</p>\n\n<pre><code>FName = \"tmp\"\nIO.write(FName, text)\n  #=&gt; 61\n</code></pre>\n\n<p>We can confirm what we've written to file:</p>\n\n<pre><code>IO.read(FName)\n  #=&gt;  \"Bubba,boar\\nHenrietta,vespa\\nLuigi,pink\\nBubba,boar\\nLuigi,mauve\\n\"\n</code></pre>\n\n<p>Now remove the lines for <code>user_name/password #=&gt; Bubba/boar</code>:</p>\n\n<pre><code>remove_lines(FName, \"Bubba\", \"boar\")\n  #=&gt; 39\n</code></pre>\n\n<p>Let's confirm it worked by examining <code>FName</code>:</p>\n\n<pre><code>IO.read(FName)\n  #=&gt; \"Henrietta,vespa\\nLuigi,pink\\nLuigi,mauve\\n\"\n</code></pre>\n\n<p><strong>Postscript</strong></p>\n\n<p>If something goes wrong while writing the array to file, you may lose both the old file and the new file. For that reason, it is often good practice to write the array to a temporary file, then delete the original file, then rename the temporary file to the name of the original file.</p>\n"}], "owner": {"reputation": 573, "user_id": 4566078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/pWJYn.jpg?s=128&g=1", "display_name": "marriedjane875", "link": "https://stackoverflow.com/users/4566078/marriedjane875"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 390, "favorite_count": 0, "accepted_answer_id": 31307438, "answer_count": 2, "score": 2, "last_activity_date": 1436411344, "creation_date": 1436392066, "last_edit_date": 1436394959, "question_id": 31304411, "link": "https://stackoverflow.com/questions/31304411/is-there-a-way-to-delete-a-line-in-a-text-file-if-it-matches-a-specific-text", "title": "Is there a way to delete a line in a text file if it matches a specific text?", "body": "<p>My text file contains an email/password list to set up accounts. Once I've used an email and password combo I would like to erase it form the text file.</p>\n\n<p>My text file looks like this:</p>\n\n<pre><code>email,pass\nemail,pass\netc..\n</code></pre>\n\n<p>once I've used the e/p combo I would like to delete it from the file:</p>\n\n<pre><code>File.open(\"yahoo_accounts.txt\") do |email|\n  email.each do |item|\n    email, password = item.chomp.split(',')\n    emails &lt;&lt; email \n    passwords &lt;&lt; password\n    emails.zip(passwords) { |name, pass| \n        browser = Watir::Browser.new :ff\n\n        #using the email and pass\n\n        File.open(\"yahoo_accounts.txt\", \"w\") do |out_file|\n            File.foreach(\"yahoo_accounts.txt\",\"r\") do |line|\n                out_file.puts line unless line == '#{name},#{pass}'\n            end\n        end\n        browser.close\n    end\nend\n</code></pre>\n\n<p>The problem occurs when I try to delete them from the file. I get an \"browser.rb:382:in `assert_exists': browser was closed (Watir::Exception::Error)\",\nbut that might just be the browser closing.</p>\n\n<p>If all the e/p's are extracted (meaning there is nothing to delete) in the beginning, how can I loop it to keep going, instead of ending in error after the first zip loop?</p>\n"}, {"tags": ["ruby", "date", "hash", "tags"], "comments": [{"owner": {"reputation": 1091, "user_id": 2150028, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a0a25bb005e4dfbd2fab95c5ac027bed?s=128&d=identicon&r=PG", "display_name": "ssuljic", "link": "https://stackoverflow.com/users/2150028/ssuljic"}, "edited": false, "score": 0, "creation_date": 1436390834, "post_id": 31304019, "comment_id": 50597924, "body": "Why are you using an array if there can be only one value?"}], "answers": [{"tags": [], "owner": {"reputation": 2718, "user_id": 4934077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e5DyJ.png?s=128&g=1", "display_name": "Mario Zannone", "link": "https://stackoverflow.com/users/4934077/mario-zannone"}, "is_accepted": true, "score": 1, "last_activity_date": 1436391384, "creation_date": 1436391384, "answer_id": 31304250, "question_id": 31304019, "link": "https://stackoverflow.com/questions/31304019/getting-date-value-from-an-array-hash/31304250#31304250", "title": "Getting date value from an array hash", "body": "<p>This is a bit simpler:</p>\n\n<pre><code> value = tagArray[:\"2015Date\"].last\n =&gt; \n value = \"03/21/2015\"\n</code></pre>\n"}], "owner": {"reputation": 225, "user_id": 1959028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86fc50dd7d33a22a302bd7033546b8fc?s=128&d=identicon&r=PG", "display_name": "Linju", "link": "https://stackoverflow.com/users/1959028/linju"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 31304250, "answer_count": 1, "score": 0, "last_activity_date": 1436391384, "creation_date": 1436390501, "question_id": 31304019, "link": "https://stackoverflow.com/questions/31304019/getting-date-value-from-an-array-hash", "title": "Getting date value from an array hash", "body": "<p>I have a hash that looks like</p>\n\n<pre><code>tagArray = { :\"2014Date\"=&gt;[\"11/22/2014\"], :\"2015Date\"=&gt;[\"03/21/2015\"] }\n</code></pre>\n\n<p>Since i already know for a given key, there is only one element in the array of 'values', how can you get just the value not as an array?</p>\n\n<pre><code>value = tagArray[:\"2015Date\"]\n=&gt;\nvalue = [\"04/12/2015\"]\n</code></pre>\n\n<p>You can just index the array then and get the date like</p>\n\n<pre><code>value = value.fetch(0).to_s\n=&gt;\nvalue = \"04/12/2015\"\n</code></pre>\n\n<p>However I am looking for a more elegant way of doing it. </p>\n\n<p>Note: I am using Ruby 2.2, so need to 'strp' the date first to change it from mm/dd/yyyy format which is the end goal.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 230, "user_id": 1082075, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d63e1bbce1f10226490f05b4992a307c?s=128&d=identicon&r=PG", "display_name": "Mike Bradford", "link": "https://stackoverflow.com/users/1082075/mike-bradford"}, "is_accepted": false, "score": 0, "last_activity_date": 1436393618, "creation_date": 1436393618, "answer_id": 31304764, "question_id": 31304013, "link": "https://stackoverflow.com/questions/31304013/query-phone-number-with-different-format-in-the-model/31304764#31304764", "title": "query phone number with different format in the model", "body": "<p>I think you'll need a two-part approach to this.</p>\n\n<p>First, you'll want to also save a \"normalized\" phone number to the database. This contains no formatting at all -- just numbers. This will require you to add a new column to your database, say, <code>normalized_phone_number</code> and write a <code>before_save</code> callback to store this value.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Person\n  before_save :normalize_phone_number\n\n  def self.normalize_number(number)\n    number.gsub(/[^\\d]/, '') if string.present?\n  end\n\n  def normalize_phone_number\n    self.normalized_phone_number = Person.normalize_number(self.phone_number)\n  end\nend\n</code></pre>\n\n<p>Next, you'll want to write a custom class method to find the person based on a normalized number from user input. Your <code>Person</code> class will now include:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Person\n  def self.with_normalized_phone_number(phone_number)\n    where(normalized_phone_number: normalize_number(phone_number)).first\n  end\nend\n</code></pre>\n\n<p>You could also write <code>Person.with_normalized_phone_number</code> as an ActiveRecord scope, which would be my preference, but <a href=\"http://guides.rubyonrails.org/active_record_querying.html#scopes\" rel=\"nofollow\">\"Using a class method is the preferred way to accept arguments for scopes.\"</a></p>\n"}], "owner": {"reputation": 347, "user_id": 4808432, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/eaedc4c7b54dcaf025894792bd0a4f0b?s=128&d=identicon&r=PG&f=1", "display_name": "xin buxu1", "link": "https://stackoverflow.com/users/4808432/xin-buxu1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 134, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436393618, "creation_date": 1436390474, "question_id": 31304013, "link": "https://stackoverflow.com/questions/31304013/query-phone-number-with-different-format-in-the-model", "title": "query phone number with different format in the model", "body": "<p>There's a table named \"Person\" with attribute id as primary key and phone_number which is from user input so they are formatted in different ways. I need query the id with phone number. \nFor example, Person.where(:phone_number => 4155332321)\nHowever, the number in the model could be 415-533-2321 or 4155332321. How could I write the query for that?\nBTW, I can't change the phone number format in the model. Otherwise, I can convert the phone in the query and model to be the same format.\nThanks</p>\n"}, {"tags": ["ruby", "rdf", "dbpedia"], "comments": [{"owner": {"reputation": 219, "user_id": 5095832, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cdbf08ed1957197c73ab5d35cf26a602?s=128&d=identicon&r=PG&f=1", "display_name": "Krid", "link": "https://stackoverflow.com/users/5095832/krid"}, "edited": false, "score": 0, "creation_date": 1436393548, "post_id": 31303764, "comment_id": 50599160, "body": "After a little bit of additional research I found out that the problem is not the filter itself. The filter could be applied by using something like query_abstract.filter { |solution| solution.abstract.language == :es }. The problem is that the query does not contain all the required language information for each entry. Any idea how to load a graph with the complete DBPedia information on languages?"}], "answers": [{"tags": [], "owner": {"reputation": 1486, "user_id": 830293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42f948adff3afaa52249d963117af7c8?s=128&d=identicon&r=PG", "display_name": "Gregg Kellogg", "link": "https://stackoverflow.com/users/830293/gregg-kellogg"}, "is_accepted": false, "score": 0, "last_activity_date": 1436396315, "creation_date": 1436396315, "answer_id": 31305279, "question_id": 31303764, "link": "https://stackoverflow.com/questions/31303764/how-to-filter-results-for-specific-languages-within-a-ruby-rdf-rb-gem-dbpedia-qu/31305279#31305279", "title": "How to filter results for specific languages within a ruby RDF.rb gem DBPedia query", "body": "<p>You probably need to select results that have the language you need, something like the following:</p>\n\n<pre><code>results_abstract.to_a.select {|a| a.abstract.language == :en}.each do |result|\n  puts \"#{result.wiki_abstract} - Abstract: #{result.abstract}\"\nend\n</code></pre>\n\n<p>In this case, you won't find any, as it looks like the languages returned are :ru, :ja, :de, :it and nil (plain literal). You could look for plain literals using the following:</p>\n\n<pre><code>results_abstract.to_a.select {|a| !a.abstract.has_language?}\n</code></pre>\n"}], "owner": {"reputation": 219, "user_id": 5095832, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cdbf08ed1957197c73ab5d35cf26a602?s=128&d=identicon&r=PG&f=1", "display_name": "Krid", "link": "https://stackoverflow.com/users/5095832/krid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436396315, "creation_date": 1436389676, "question_id": 31303764, "link": "https://stackoverflow.com/questions/31303764/how-to-filter-results-for-specific-languages-within-a-ruby-rdf-rb-gem-dbpedia-qu", "title": "How to filter results for specific languages within a ruby RDF.rb gem DBPedia query", "body": "<p>I'm stuck with a problem reducing the delivered result set of a DBPedia query I did with the RDF gem. It all works fine with \"non-language specific\" results but when I try to reduce the delivered literals for the \"abstract\" relation I'm struggling with limiting the results for certain languages.</p>\n\n<p>The code is as follows:</p>\n\n<pre><code>require 'linkeddata'\n\ngraph = RDF::Graph.new\n\ngraph.load('http://dbpedia.org/resource/NBC')\n\nquery_abstract = RDF::Query.new({ \n  :wiki_abstract =&gt; {\n    RDF::URI('http://dbpedia.org/ontology/abstract') =&gt; :abstract,\n  } \n})\n\nresults_abstract = query_abstract.execute(graph)\n\nresults_abstract.each do |result|\n  puts \"#{result.wiki_abstract} - Abstract: #{result.abstract}\"\nend\n</code></pre>\n\n<p>I tried the same with a SPARQL query and I was able to filter the output for @en language without a problem. But when I try to find a solution for this using the RDF gem I failed and couldn't find a helpful hint in the RDF documentation. Does anybody have an idea how to add filters to the above query for languages?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "methods", "rollback"], "answers": [{"comments": [{"owner": {"reputation": 2285, "user_id": 4620141, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/10152601898256854/picture?type=large", "display_name": "David Geismar", "link": "https://stackoverflow.com/users/4620141/david-geismar"}, "edited": false, "score": 0, "creation_date": 1436435276, "post_id": 31306669, "comment_id": 50615590, "body": "<code>authorize subscription</code> is from the pundit gem. I also thought it could be causing the rollback. I did what you said but the rollback still takes place."}], "tags": [], "owner": {"reputation": 32896, "user_id": 1276506, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7149d2bc15314277ac69357ef7251650?s=128&d=identicon&r=PG", "display_name": "boulder_ruby", "link": "https://stackoverflow.com/users/1276506/boulder-ruby"}, "is_accepted": false, "score": 0, "last_activity_date": 1436405628, "creation_date": 1436405628, "answer_id": 31306669, "question_id": 31303684, "link": "https://stackoverflow.com/questions/31303684/cannot-update-status-of-table-specific-instance-because-rollback-is-taking-place/31306669#31306669", "title": "Cannot update status of table specific instance because rollback is taking place", "body": "<p>This code:</p>\n\n<pre><code>authorize @subscription\n</code></pre>\n\n<p>is probably causing the rollback. If you're in dev mode, just comment it out, <code>reload!</code>, and try to manually add a record and see if that's the cause.</p>\n"}], "owner": {"reputation": 2285, "user_id": 4620141, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/10152601898256854/picture?type=large", "display_name": "David Geismar", "link": "https://stackoverflow.com/users/4620141/david-geismar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1436405628, "creation_date": 1436389409, "question_id": 31303684, "link": "https://stackoverflow.com/questions/31303684/cannot-update-status-of-table-specific-instance-because-rollback-is-taking-place", "title": "Cannot update status of table specific instance because rollback is taking place", "body": "<p>I have a table subscription with a column status. In my subscriptions controller I have a method <code>accept_player</code> that is supposed to update the <code>subscription.status</code> to <code>\"confirmed!\"</code></p>\n\n<pre><code>  def accept_player\n     @subscription = Subscription.find(params[:subscription_id_accept_player])\n     @subscription.status = \"confirmed!\"\n\n     @subscription.save\n\n     authorize @subscription\n     redirect_to tournament_subscriptions_path(@subscription.tournament)\n  end\n</code></pre>\n\n<p>unfortunately every time I try to trigger that method, a rollback seem to take place:</p>\n\n<pre><code>Started POST \"/accept_player/39\" for ::1 at 2015-07-08 22:01:21 +0100\n  ActiveRecord::SchemaMigration Load (12.4ms)  SELECT \"schema_migrations\".* FROM \"schema_migrations\"\n/Users/davidgeismar/code/davidgeismar/tennis-match/app/controllers/subscriptions_controller.rb:141: warning: duplicated key at line 155 ignored: \"CardType\"\nProcessing by SubscriptionsController#accept_player as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"aas8OPHBpvPwNbbmx/SVipsRM+eKo63nuVilMroxKcU9HRVonjSqEuH7aLY91gFi9PHMUsUqRqk7qhnv2m4L/A==\", \"subscription_id_accept_player\"=&gt;\"39\", \"commit\"=&gt;\"Confirmer ce Joueur\", \"subscription_id\"=&gt;\"39\"}\n  User Load (13.3ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1  ORDER BY \"users\".\"id\" ASC LIMIT 1  [[\"id\", 2]]\n  Subscription Load (11.6ms)  SELECT  \"subscriptions\".* FROM \"subscriptions\" WHERE \"subscriptions\".\"id\" = $1 LIMIT 1  [[\"id\", 39]]\n   (5.7ms)  BEGIN\n  Subscription Exists (0.8ms)  SELECT  1 AS one FROM \"subscriptions\" WHERE (\"subscriptions\".\"user_id\" = 20 AND \"subscriptions\".\"id\" != 39 AND \"subscriptions\".\"tournament_id\" = 9) LIMIT 1\n   (12.6ms)  ROLLBACK\n  Tournament Load (2.4ms)  SELECT  \"tournaments\".* FROM \"tournaments\" WHERE \"tournaments\".\"id\" = $1 LIMIT 1  [[\"id\", 9]]\n  User Load (0.4ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 LIMIT 1  [[\"id\", 2]]\nRedirected to http://localhost:3000/tournaments/9/subscriptions\nCompleted 302 Found in 246ms (ActiveRecord: 79.7ms)\n</code></pre>\n\n<p>Any ideas about what might be going wrong here ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "curl", "digest", "digest-authentication"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1436390480, "post_id": 31303623, "comment_id": 50597775, "body": "<a href=\"http://docs.ruby-lang.org/en/2.0.0/Net/HTTP.html\" rel=\"nofollow noreferrer\">docs.ruby-lang.org/en/2.0.0/Net/HTTP.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "is_accepted": false, "score": 1, "last_activity_date": 1436390944, "creation_date": 1436390944, "answer_id": 31304151, "question_id": 31303623, "link": "https://stackoverflow.com/questions/31303623/how-to-perform-this-kind-of-curl-request-on-ruby/31304151#31304151", "title": "How to perform this kind of CURL request on Ruby", "body": "<p>the wonders of curl :)</p>\n\n<pre><code>-k means unsecure (i.e don't check SSL)\n--digest is the authentication type\n-u name:password is the actual username and password\n-X POST it's a post\n-d \"blah blah\" blah blah is the payload\n</code></pre>\n\n<p>now onto ruby:\nI would look at <a href=\"https://github.com/rest-client/rest-client\" rel=\"nofollow\">https://github.com/rest-client/rest-client</a> or at <a href=\"https://github.com/jnunemaker/httparty\" rel=\"nofollow\">https://github.com/jnunemaker/httparty</a>\nIt's just a matter of figuring out how to perform the post. The digest might be tricky but IIRC it can be some via Authorization header.</p>\n"}, {"tags": [], "owner": {"reputation": 839, "user_id": 4764791, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rKo9SfSK1qg/AAAAAAAAAAI/AAAAAAAAAag/uXuYHGJGsGs/photo.jpg=k-s128", "display_name": "Oliver Nicolaas Ponder", "link": "https://stackoverflow.com/users/4764791/oliver-nicolaas-ponder"}, "is_accepted": false, "score": 2, "last_activity_date": 1436391396, "creation_date": 1436391396, "answer_id": 31304253, "question_id": 31303623, "link": "https://stackoverflow.com/questions/31303623/how-to-perform-this-kind-of-curl-request-on-ruby/31304253#31304253", "title": "How to perform this kind of CURL request on Ruby", "body": "<p>Here is an (untested) example using rest-client that might get you started <a href=\"https://github.com/rest-client/rest-client\" rel=\"nofollow\">https://github.com/rest-client/rest-client</a>). </p>\n\n<p>According to what I was able to find online, rest-client automatically supports the digest authentication that that curl request is doing. </p>\n\n<pre><code>require 'rest-client'\nresponse = RestClient::Request.execute(\n            method: :post,\n            url: 'https://api.kinghost.net/cliente',\n            verify_ssl: false,\n            user: \"usuario\",\n            password: \"senha\",\n\n            headers: {\n              params: {\n                clienteTipo: \"I\",\n                clienteCPFCNPJ: \"00112135045\",\n                clienteEmpresa: \"NomeEmpresa\",\n                clienteNome: \"meunome\",\n                clienteEmail: \"email@dominio.com.br\",\n                clienteEmailCobranca: \"emailcobranca@dominio.com.br\",\n                clienteSenhaPainel: \"654321\",\n                clienteFone: \"555100000000\",\n                clienteFax: \"555100000001\",\n                clienteCEP: \"44587421\",\n                clienteEndereco: \"ruanome\",\n                clienteBairro: \"meubairro\",\n                clienteCidade: \"porto alegre\",\n                clienteEstado: \"rs\",\n                clienteLimiteMapeamento: \"1\",\n                clienteLimiteSubdominio: \"2\",\n                clienteLimiteMysql: \"3\",\n                clienteLimiteMssql: \"1\",\n                clienteLimitePgsql: \"1\",\n                clienteLimiteFirebird: \"1\",\n                clienteLimiteFTPADD: \"1\",\n                clienteUniBox: \"on\",\n                clienteAcessoFTP: \"on\",\n                clienteAcessoDownloadBackup: \"on\"\n              }\n            }\n          )\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 839, "user_id": 4764791, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rKo9SfSK1qg/AAAAAAAAAAI/AAAAAAAAAag/uXuYHGJGsGs/photo.jpg=k-s128", "display_name": "Oliver Nicolaas Ponder", "link": "https://stackoverflow.com/users/4764791/oliver-nicolaas-ponder"}, "edited": false, "score": 1, "creation_date": 1436458050, "post_id": 31321298, "comment_id": 50632182, "body": "Sometimes the simplest is the best! Glad you found a solution."}], "tags": [], "owner": {"reputation": 5067, "user_id": 993554, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/UV0L9.jpg?s=128&g=1", "display_name": "Victor Ferreira", "link": "https://stackoverflow.com/users/993554/victor-ferreira"}, "is_accepted": true, "score": 0, "last_activity_date": 1436454072, "creation_date": 1436454072, "answer_id": 31321298, "question_id": 31303623, "link": "https://stackoverflow.com/questions/31303623/how-to-perform-this-kind-of-curl-request-on-ruby/31321298#31321298", "title": "How to perform this kind of CURL request on Ruby", "body": "<p>after struggling for a while and testing different libraries, I used Ruby to run a system command, since cURL is not dependant on Ruby</p>\n\n<pre><code>output = `curl -d \"clienteTipo=#{client_type}&amp;clienteCPFCNPJ=#{client_id}&amp;clienteEmpresa=#{company_name}&amp;clienteNome=#{client_name}&amp;clienteEmail=#{client_email}&amp;clienteEmailCobranca=#{client_billing_email}&amp;clienteSenhaPainel=#{password}&amp;clienteFone=#{client_phone}&amp;clienteFax=#{client_fax}&amp;clienteCEP=#{client_zip_code}&amp;clienteEndereco=#{client_address}&amp;clienteBairro=#{client_neighborhood}&amp;clienteCidade=#{client_city}&amp;clienteEstado=#{client_state}&amp;clienteLimiteMapeamento=1&amp;clienteLimiteSubdominio=1&amp;clienteLimiteMysql=1&amp;clienteLimiteMssql=1&amp;clienteLimitePgsql=1&amp;clienteLimiteFirebird=1&amp;clienteLimiteFTPADD=1&amp;clienteUniBox=on&amp;clienteAcessoFTP=on&amp;clienteAcessoDownloadBackup=on\" -k --digest -u MY_USER:MY_PASSWORD -X POST API_URL`\n\np output\nxml = Hash.from_xml(output) #in my case it returns a XML string\n</code></pre>\n\n<p>Now output contains the response</p>\n"}], "owner": {"reputation": 5067, "user_id": 993554, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/UV0L9.jpg?s=128&g=1", "display_name": "Victor Ferreira", "link": "https://stackoverflow.com/users/993554/victor-ferreira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 444, "favorite_count": 0, "accepted_answer_id": 31321298, "answer_count": 3, "score": 1, "last_activity_date": 1436454072, "creation_date": 1436389175, "last_edit_date": 1436389971, "question_id": 31303623, "link": "https://stackoverflow.com/questions/31303623/how-to-perform-this-kind-of-curl-request-on-ruby", "title": "How to perform this kind of CURL request on Ruby", "body": "<p>I am using an API provided by my web host with whom I can register new clients and domains. Unfortunately they don't provide much documentation (basically none) and I'm not very used to cURL</p>\n\n<p>They give ONE and very superficial example of how to create a new client, and it is as follows</p>\n\n<p><code>curl -d \"clienteTipo=I&amp;clienteCPFCNPJ=00112135045&amp;clienteEmpresa=NomeEmpresa&amp;clienteNome=meunome&amp;clienteEmail=email@dominio.com.br&amp;clienteEmailCobranca=emailcobranca@dominio.com.br&amp;clienteSenhaPainel=654321&amp;clienteFone=555100000000&amp;clienteFax=555100000001&amp;clienteCEP=44587421&amp;clienteEndereco=ruanome&amp;clienteBairro=meubairro&amp;clienteCidade=porto alegre&amp;clienteEstado=rs&amp;clienteLimiteMapeamento=1&amp;clienteLimiteSubdominio=2&amp;clienteLimiteMysql=3&amp;clienteLimiteMssql=1&amp;clienteLimitePgsql=1&amp;clienteLimiteFirebird=1&amp;clienteLimiteFTPADD=1&amp;clienteUniBox=on&amp;clienteAcessoFTP=on&amp;clienteAcessoDownloadBackup=on\" -k --digest -u usuario:senha -X POST https://api.kinghost.net/cliente</code></p>\n\n<p>How can I transform this on a cURL request on Ruby keeping the parameters as informed above?</p>\n\n<p>This must be a POST, but I wonder how I have to inform these parameters, they look like a query string. And what is this Digest thing?</p>\n"}, {"tags": ["ruby", "formatting", "rubocop"], "comments": [{"owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "edited": false, "score": 0, "creation_date": 1436388716, "post_id": 31303362, "comment_id": 50596878, "body": "tried running &quot;rubocop -a&quot; ?"}, {"owner": {"reputation": 959, "user_id": 1583066, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1a873e7e94c8d091973b32e80a5ebde4?s=128&d=identicon&r=PG", "display_name": "ILikeTurtles", "link": "https://stackoverflow.com/users/1583066/iliketurtles"}, "reply_to_user": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "edited": false, "score": 0, "creation_date": 1436388924, "post_id": 31303362, "comment_id": 50596990, "body": "@Mircea Yes. It does not auto correct this issue."}], "answers": [{"comments": [{"owner": {"reputation": 959, "user_id": 1583066, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1a873e7e94c8d091973b32e80a5ebde4?s=128&d=identicon&r=PG", "display_name": "ILikeTurtles", "link": "https://stackoverflow.com/users/1583066/iliketurtles"}, "edited": false, "score": 0, "creation_date": 1436388953, "post_id": 31303516, "comment_id": 50597009, "body": "Is there any kind of performance or readability differences between these two choices? Is one &quot;more standard&quot; than the other?"}, {"owner": {"reputation": 959, "user_id": 1583066, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1a873e7e94c8d091973b32e80a5ebde4?s=128&d=identicon&r=PG", "display_name": "ILikeTurtles", "link": "https://stackoverflow.com/users/1583066/iliketurtles"}, "edited": false, "score": 0, "creation_date": 1436389051, "post_id": 31303516, "comment_id": 50597055, "body": "Rubocop answered my question. It changed it to the second choice automatically for me once I put it on multiple lines."}, {"owner": {"reputation": 17497, "user_id": 23915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5e935da7b67c03dd56f385b031f485c?s=128&d=identicon&r=PG", "display_name": "Unixmonkey", "link": "https://stackoverflow.com/users/23915/unixmonkey"}, "reply_to_user": {"reputation": 959, "user_id": 1583066, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1a873e7e94c8d091973b32e80a5ebde4?s=128&d=identicon&r=PG", "display_name": "ILikeTurtles", "link": "https://stackoverflow.com/users/1583066/iliketurtles"}, "edited": false, "score": 0, "creation_date": 1436389336, "post_id": 31303516, "comment_id": 50597203, "body": "@Aaron Both are valid (as is separating statements with a semicolon), but Rubocop informs a generally accepted &quot;style&quot; for Ruby code, and multiline blocks are preferred to start with <code>do</code> and <code>end</code>, while a single-line block expression like <code>10.times { puts &#39;foo&#39; }</code>, it is preferred to use the curly-braces, as it looks funny as <code>10.times do puts &#39;foo&#39; end</code>"}, {"owner": {"reputation": 9786, "user_id": 485864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f34b46a9a4723bdbc6e1fdcf71b08517?s=128&d=identicon&r=PG", "display_name": "vgoff", "link": "https://stackoverflow.com/users/485864/vgoff"}, "reply_to_user": {"reputation": 959, "user_id": 1583066, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1a873e7e94c8d091973b32e80a5ebde4?s=128&d=identicon&r=PG", "display_name": "ILikeTurtles", "link": "https://stackoverflow.com/users/1583066/iliketurtles"}, "edited": false, "score": 0, "creation_date": 1436392286, "post_id": 31303516, "comment_id": 50598621, "body": "@Aaron though it is common for multiline <code>do..end</code> and single line <code>{ ... }</code> the difference is precedence.  This can make a difference in your code.  Some folks will use the style to indicate side effects as opposed to side-effect free code as well.  <a href=\"http://stackoverflow.com/a/5587403/485864\">stackoverflow.com/a/5587403/485864</a> and <a href=\"http://stackoverflow.com/a/2122457/485864\">stackoverflow.com/a/2122457/485864</a>"}, {"owner": {"reputation": 959, "user_id": 1583066, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1a873e7e94c8d091973b32e80a5ebde4?s=128&d=identicon&r=PG", "display_name": "ILikeTurtles", "link": "https://stackoverflow.com/users/1583066/iliketurtles"}, "reply_to_user": {"reputation": 9786, "user_id": 485864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f34b46a9a4723bdbc6e1fdcf71b08517?s=128&d=identicon&r=PG", "display_name": "vgoff", "link": "https://stackoverflow.com/users/485864/vgoff"}, "edited": false, "score": 0, "creation_date": 1436459646, "post_id": 31303516, "comment_id": 50633140, "body": "@vgoff Thank you, those links helped me better understand the curls versus do issue."}], "tags": [], "owner": {"reputation": 17497, "user_id": 23915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5e935da7b67c03dd56f385b031f485c?s=128&d=identicon&r=PG", "display_name": "Unixmonkey", "link": "https://stackoverflow.com/users/23915/unixmonkey"}, "is_accepted": true, "score": 1, "last_activity_date": 1436388806, "creation_date": 1436388806, "answer_id": 31303516, "question_id": 31303362, "link": "https://stackoverflow.com/questions/31303362/how-to-solve-ruby-formatting-error-in-rubocop/31303516#31303516", "title": "How to solve ruby formatting error in rubocop?", "body": "<p>It wants you to put your expressions on new lines, rather than separating them with a semicolon</p>\n\n<pre><code>pack {\n  padx 15\n  pady 15\n  side left\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>pack do\n  padx 15\n  pady 15\n  side left\nend\n</code></pre>\n"}], "owner": {"reputation": 959, "user_id": 1583066, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1a873e7e94c8d091973b32e80a5ebde4?s=128&d=identicon&r=PG", "display_name": "ILikeTurtles", "link": "https://stackoverflow.com/users/1583066/iliketurtles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1474, "favorite_count": 0, "accepted_answer_id": 31303516, "answer_count": 1, "score": 2, "last_activity_date": 1436388806, "creation_date": 1436388350, "question_id": 31303362, "link": "https://stackoverflow.com/questions/31303362/how-to-solve-ruby-formatting-error-in-rubocop", "title": "How to solve ruby formatting error in rubocop?", "body": "<p>The Error -</p>\n\n<pre><code>Inspecting 1 file\nC\n\nOffenses:\n\nhellotk.rb:7:17: C: Do not use semicolons to terminate expressions.\n  pack { padx 15; pady 15; side 'left'; }\n                ^\n\n1 file inspected, 1 offense detected\n</code></pre>\n\n<p>The File -</p>\n\n<pre><code>#!/usr/bin/ruby\nrequire 'tk'\n\nroot = TkRoot.new { title 'Hello, World!' }\nTkLabel.new(root) do\n  text 'Hello, World!'\n  pack { padx 15; pady 15; side 'left'; }\nend\nTkButton.new do\n  text 'Quit'\n  command 'exit'\n  pack('fill' =&gt; 'x')\nend\nTk.mainloop\n</code></pre>\n\n<p>What would the appropriate formatting be to eliminate the ';' so that rubocop stops warning me that I am writing my file wrong? I want to eliminate this offense in the correct manner.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "associations"], "comments": [{"owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "edited": false, "score": 0, "creation_date": 1436387464, "post_id": 31302817, "comment_id": 50596237, "body": "how does the member model look like?"}], "answers": [{"tags": [], "owner": {"reputation": 1013, "user_id": 2908285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/905d24088d27a026570bd2049bf939e4?s=128&d=identicon&r=PG", "display_name": "mrodrigues", "link": "https://stackoverflow.com/users/2908285/mrodrigues"}, "is_accepted": false, "score": 0, "last_activity_date": 1436388117, "creation_date": 1436388117, "answer_id": 31303297, "question_id": 31302817, "link": "https://stackoverflow.com/questions/31302817/inject-attribute-from-association-table-into-the-associated-record/31303297#31303297", "title": "Inject attribute from association table into the associated record?", "body": "<p>I had the exact same problem, and couldn't find any way to fetch the intermediate association without explicitly finding it. It's not that ugly, though:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :memberships, dependent: :destroy\n  has_many :courses, through: :memberships\n\n  def role_in(course)\n    memberships.find_by!(course: course).role\n  end\nend\n\nuser.role_in(course)\n# =&gt; \"teacher\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11246, "user_id": 1074361, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6e1d31995b215ae8469a24980555df2d?s=128&d=identicon&r=PG", "display_name": "Pedro Nascimento", "link": "https://stackoverflow.com/users/1074361/pedro-nascimento"}, "edited": false, "score": 0, "creation_date": 1436388678, "post_id": 31303337, "comment_id": 50596863, "body": "This is also spaghetti to my tastes."}, {"owner": {"reputation": 11603, "user_id": 234593, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8e2ee1b00d372ad8f6ed5e87385ffef5?s=128&d=identicon&r=PG", "display_name": "Kache", "link": "https://stackoverflow.com/users/234593/kache"}, "reply_to_user": {"reputation": 11246, "user_id": 1074361, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6e1d31995b215ae8469a24980555df2d?s=128&d=identicon&r=PG", "display_name": "Pedro Nascimento", "link": "https://stackoverflow.com/users/1074361/pedro-nascimento"}, "edited": false, "score": 0, "creation_date": 1436391954, "post_id": 31303337, "comment_id": 50598470, "body": "I&#39;m sorry if you felt offended - I replaced that description with a quantifiable explanation."}, {"owner": {"reputation": 11246, "user_id": 1074361, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6e1d31995b215ae8469a24980555df2d?s=128&d=identicon&r=PG", "display_name": "Pedro Nascimento", "link": "https://stackoverflow.com/users/1074361/pedro-nascimento"}, "edited": false, "score": 0, "creation_date": 1436423591, "post_id": 31303337, "comment_id": 50608080, "body": "Oh, I&#39;m not offended. This is what you usually do when you have to handle this up -- it feels spaghetti to me because while <code>has_many :through</code> helps me finding the associated user, I lose metadata which resides in <code>Membership</code>. I don&#39;t think it&#39;s necessarily wrong to have injected behaviour -- we have decorators for using models in view which are pretty awesome -- association decorators could work my use case."}], "tags": [], "owner": {"reputation": 11603, "user_id": 234593, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8e2ee1b00d372ad8f6ed5e87385ffef5?s=128&d=identicon&r=PG", "display_name": "Kache", "link": "https://stackoverflow.com/users/234593/kache"}, "is_accepted": false, "score": 0, "last_activity_date": 1436391900, "last_edit_date": 1436391900, "creation_date": 1436388286, "answer_id": 31303337, "question_id": 31302817, "link": "https://stackoverflow.com/questions/31302817/inject-attribute-from-association-table-into-the-associated-record/31303337#31303337", "title": "Inject attribute from association table into the associated record?", "body": "<p>I think dynamically storing the contextual <code>role</code> depending on what <code>Course</code> is used is not a good idea. It feels hacky to me because the attribute value becomes set implicitly rather than by explicit execution. A <code>User</code> would appear different depending on where and how it's instantiated, despite representing a row in the database.</p>\n\n<p>I would instead implement something like below:</p>\n\n<pre><code>class User\n  def course_role(course)\n    memberships.find_by_course(course).role\n  end\nend\n\nclass Course\n  def user_role(user)\n    members.find_by_user(user).role\n  end\nend\n</code></pre>\n\n<p>This way, it's explicit that calling methods on either the <code>User</code> or <code>Course</code> to get the role depends on the respective memberships they are associated with.</p>\n"}, {"comments": [{"owner": {"reputation": 11246, "user_id": 1074361, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6e1d31995b215ae8469a24980555df2d?s=128&d=identicon&r=PG", "display_name": "Pedro Nascimento", "link": "https://stackoverflow.com/users/1074361/pedro-nascimento"}, "edited": false, "score": 1, "creation_date": 1436424532, "post_id": 31303683, "comment_id": 50608608, "body": "Thanks, I&#39;m going to accept your answer because you led me to the better solution. I can do <code>has_many :members, -&gt; { select(&#39;users.*, memberships.role&#39;) }, class_name: &#39;User&#39;, through: :memberships, source: :user</code> and Rails will take care of the rest. Could you please update your answer with this?"}], "tags": [], "owner": {"reputation": 1091, "user_id": 2150028, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a0a25bb005e4dfbd2fab95c5ac027bed?s=128&d=identicon&r=PG", "display_name": "ssuljic", "link": "https://stackoverflow.com/users/2150028/ssuljic"}, "is_accepted": true, "score": 2, "last_activity_date": 1436435732, "last_edit_date": 1436435732, "creation_date": 1436389403, "answer_id": 31303683, "question_id": 31302817, "link": "https://stackoverflow.com/questions/31302817/inject-attribute-from-association-table-into-the-associated-record/31303683#31303683", "title": "Inject attribute from association table into the associated record?", "body": "<p>Here's a solution, not the most beautiful and idiomatic though</p>\n\n<pre><code>class Course &lt; ActiveRecord::Base\n  has_many :memberships\n\n  def members\n    User.joins(:memberships).where(id: memberships.ids).select('users.*, memberships.role')\n  end\nend\n</code></pre>\n\n<p>A better approach, suggested through the comments:</p>\n\n<pre><code>has_many :members, -&gt; { select('users.*, memberships.role') }, class_name: 'User', through: :memberships, source: :user\n</code></pre>\n"}], "owner": {"reputation": 11246, "user_id": 1074361, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6e1d31995b215ae8469a24980555df2d?s=128&d=identicon&r=PG", "display_name": "Pedro Nascimento", "link": "https://stackoverflow.com/users/1074361/pedro-nascimento"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 1, "accepted_answer_id": 31303683, "answer_count": 3, "score": 1, "last_activity_date": 1436435732, "creation_date": 1436386476, "last_edit_date": 1436423820, "question_id": 31302817, "link": "https://stackoverflow.com/questions/31302817/inject-attribute-from-association-table-into-the-associated-record", "title": "Inject attribute from association table into the associated record?", "body": "<p>I have the following model in my Rails app:</p>\n\n<pre><code>class Course &lt; ActiveRecord::Base\n  has_many :memberships\n  has_many :members, through: :memberships, class_name: 'User'\nend\n</code></pre>\n\n<p>While <code>course.members</code> successfully returns the course's members, I don't get access to the <code>Membership</code> model which has a <code>role</code> attribute.</p>\n\n<p>How do I find the user role without having to find the <code>Membership</code> given my <code>Course</code> and <code>User</code>? Can I inject the <code>role</code> attribute to <code>User</code> somehow in the context association?</p>\n\n<p>User model:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :memberships, dependent: :destroy\n  has_many :courses, through: :memberships\nend\n</code></pre>\n"}, {"tags": ["ruby", "hash"], "answers": [{"tags": [], "owner": {"reputation": 1091, "user_id": 2150028, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a0a25bb005e4dfbd2fab95c5ac027bed?s=128&d=identicon&r=PG", "display_name": "ssuljic", "link": "https://stackoverflow.com/users/2150028/ssuljic"}, "is_accepted": false, "score": 1, "last_activity_date": 1436386500, "creation_date": 1436386500, "answer_id": 31302823, "question_id": 31302553, "link": "https://stackoverflow.com/questions/31302553/storing-user-input-into-hash-ruby/31302823#31302823", "title": "Storing user input into hash RUBY", "body": "<p>It's better to use an array for this purpose, like this:</p>\n\n<pre><code>cities = []\n\nloop do\n  print \"Enter city: \"\n  city = gets.chomp\n  if city == \"done\"\n    break\n  end\n  cities &lt;&lt; city\nend\n\nuser_data = { first: first, last: last, age: age, city: cities}\n</code></pre>\n\n<p>And after that you can make a string representation by joining the elements of the array, for example </p>\n\n<pre><code>cities.join(' ')\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 5091603, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/199aa6a5820e394d2d58eb334c563bf4?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/5091603/tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 848, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436386500, "creation_date": 1436385648, "last_edit_date": 1436386214, "question_id": 31302553, "link": "https://stackoverflow.com/questions/31302553/storing-user-input-into-hash-ruby", "title": "Storing user input into hash RUBY", "body": "<p>Im trying to store all of User's input into a hash and then loop through the hash and display results.\nInput: First name, Last Name, Age, City Visited(user will input multiple cities until they input \"exit\".</p>\n\n<p>Here's what I got so far..and everything looks good <em>except being able to separate the cities as multiple Values when multiple cities are entered.</em>   </p>\n\n<pre><code>result = \"\"\nprint \"Enter first name \"\nfirst = gets.chomp\nprint \"Enter last name \"\nlast = gets.chomp\nprint \"Enter age \"\nage = gets.chomp\n\nwhile TRUE\nprint \"Enter city\"\ncity = gets.chomp\nif city == \"exit\"\n  break\nend\nresult = result + \" \" + city\nend\n\nuser_data = { first: first, last: last, age: age, city: result}\n\nputs \"#{user_data}\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 163, "user_id": 3700231, "user_type": "registered", "accept_rate": 11, "profile_image": "https://graph.facebook.com/771989399/picture?type=large", "display_name": "user3700231", "link": "https://stackoverflow.com/users/3700231/user3700231"}, "edited": false, "score": 0, "creation_date": 1436386270, "post_id": 31302623, "comment_id": 50595522, "body": "Thank you! However, when I implement the first solution (by adding .join(&quot; &quot;) rspec gives me the following error <code>exercise.rb:17:in &lt;top (required)&gt;&#39;: undefined method join&#39; for :fix:Symbol (NoMethodError) \tfrom exercise_spec.rb:2:in &#39;require&#39; \tfrom exercise_spec.rb:2:in &#39;&lt;top (required)&gt;&#39;</code>"}, {"owner": {"reputation": 163, "user_id": 3700231, "user_type": "registered", "accept_rate": 11, "profile_image": "https://graph.facebook.com/771989399/picture?type=large", "display_name": "user3700231", "link": "https://stackoverflow.com/users/3700231/user3700231"}, "edited": false, "score": 0, "creation_date": 1436386325, "post_id": 31302623, "comment_id": 50595569, "body": "here was my code all together: <code>class Title   attr_accessor :string      def initialize(string)     @string = string   end      def fix     string.split(&#39; &#39;).each_with_index do |value, index|       if index &gt;= 2 &amp;&amp; value.length &lt;= 3         value.downcase!       else         value.capitalize!       end     end   end end.join(&quot; &quot;)</code>"}, {"owner": {"reputation": 163, "user_id": 3700231, "user_type": "registered", "accept_rate": 11, "profile_image": "https://graph.facebook.com/771989399/picture?type=large", "display_name": "user3700231", "link": "https://stackoverflow.com/users/3700231/user3700231"}, "edited": false, "score": 0, "creation_date": 1436386574, "post_id": 31302623, "comment_id": 50595709, "body": "Nvm, I was able to add the <code>end.join(&#39; &#39;)</code> closing out the if/else statement and that did the trick. Thank you so much!"}, {"owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "reply_to_user": {"reputation": 163, "user_id": 3700231, "user_type": "registered", "accept_rate": 11, "profile_image": "https://graph.facebook.com/771989399/picture?type=large", "display_name": "user3700231", "link": "https://stackoverflow.com/users/3700231/user3700231"}, "edited": false, "score": 0, "creation_date": 1436387199, "post_id": 31302623, "comment_id": 50596069, "body": "fixed code. seems the join was on the method and return was not string. guess I did not pay attention enough. should work now"}], "tags": [], "owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "is_accepted": false, "score": 3, "last_activity_date": 1436387022, "last_edit_date": 1436387022, "creation_date": 1436385902, "answer_id": 31302623, "question_id": 31302550, "link": "https://stackoverflow.com/questions/31302550/converting-string-to-title-case/31302623#31302623", "title": "Converting string to title-case", "body": "<p>quick fix:</p>\n\n<pre><code>  def fix\n    string.split(\" \").each_with_index do |value, index|\n      if index &gt;= 2 &amp;&amp; value.length &lt;= 3\n        value.downcase!\n      else\n        value.capitalize!\n      end\n      value\n    end.join(\" \")\n  end\n</code></pre>\n\n<p>If you want the ruby way of doing it:</p>\n\n<pre><code>def fix\n  string.split(\" \").map(&amp;:capitalize).join(\" \")\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "edited": false, "score": 0, "creation_date": 1436388449, "post_id": 31303331, "comment_id": 50596745, "body": "This doesn&#39;t satisfy the &quot;manual&quot; requirement, and it capitalizes words &lt;= 3 characters long, which the OP didn&#39;t want to do."}, {"owner": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "reply_to_user": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "edited": false, "score": 0, "creation_date": 1436388833, "post_id": 31303331, "comment_id": 50596937, "body": "I guess you <i>could</i> reinvent the wheel every time you want to go to town, but why?"}, {"owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "edited": false, "score": 0, "creation_date": 1436388941, "post_id": 31303331, "comment_id": 50597003, "body": "Because the requirements specify it? ActiveSupport&#39;s Titleize is close, but doesn&#39;t pass the specs."}, {"owner": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "reply_to_user": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "edited": false, "score": 0, "creation_date": 1436391128, "post_id": 31303331, "comment_id": 50598069, "body": "To meet that spec it seems like it would be necessary to use an exclusion list. Maybe something like this question: <a href=\"http://stackoverflow.com/questions/15078964/ruby-titleize-how-do-i-ignore-smaller-words-like-and-the-or-etc\" title=\"ruby titleize how do i ignore smaller words like and the or etc\">stackoverflow.com/questions/15078964/&hellip;</a>"}], "tags": [], "owner": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "is_accepted": false, "score": 1, "last_activity_date": 1436388252, "creation_date": 1436388252, "answer_id": 31303331, "question_id": 31302550, "link": "https://stackoverflow.com/questions/31302550/converting-string-to-title-case/31303331#31303331", "title": "Converting string to title-case", "body": "<p>ActiveSupport provides a method called <code>titleize</code> that does what you're describing: </p>\n\n<pre><code>&gt;&gt; \"the great gatsby\".titleize\n=&gt; \"The Great Gatsby\"\n&gt;&gt; \"little red riding hood\".titleize\n=&gt; \"Little Red Riding Hood\"\n&gt;&gt; \"the lord of the rings\".titleize\n=&gt; \"The Lord Of The Rings\"\n</code></pre>\n\n<p>Source: <a href=\"http://apidock.com/rails/ActiveSupport/Inflector/titleize\" rel=\"nofollow\">http://apidock.com/rails/ActiveSupport/Inflector/titleize</a></p>\n"}, {"comments": [{"owner": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "edited": false, "score": 0, "creation_date": 1436389157, "post_id": 31303556, "comment_id": 50597112, "body": "Using that method,  &quot;jo and the big gem job&quot; yields &quot;Jo and the big gem job&quot;."}, {"owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "reply_to_user": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "edited": false, "score": 0, "creation_date": 1436389218, "post_id": 31303556, "comment_id": 50597141, "body": "Obviously not semantically correct in the case of acronyms, but should will be correct for the purpose of the OP&#39;s problem as posed. His version would downcase words &lt;= 3 characters long, as well. A comprehensive solution would require stopword lists and even potentially some POS tagging."}, {"owner": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "edited": false, "score": 0, "creation_date": 1436389441, "post_id": 31303556, "comment_id": 50597245, "body": "Sorry, edited my comment after you posted... my original test string was &quot;I fly to my private island in HI&quot;"}], "tags": [], "owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "is_accepted": false, "score": 0, "last_activity_date": 1436388949, "creation_date": 1436388949, "answer_id": 31303556, "question_id": 31302550, "link": "https://stackoverflow.com/questions/31302550/converting-string-to-title-case/31303556#31303556", "title": "Converting string to title-case", "body": "<p>To offer an alternate solution:</p>\n\n<pre><code>def fix\n  string.downcase.gsub(/^\\S+|(\\S{4,})/, &amp;:capitalize)\nend\n</code></pre>\n\n<p>This simply replaces each word which appears at the beginning of the string or is 4+ characters long with its capitalized version.</p>\n"}], "owner": {"reputation": 163, "user_id": 3700231, "user_type": "registered", "accept_rate": 11, "profile_image": "https://graph.facebook.com/771989399/picture?type=large", "display_name": "user3700231", "link": "https://stackoverflow.com/users/3700231/user3700231"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 918, "favorite_count": 1, "answer_count": 3, "score": 2, "last_activity_date": 1436388949, "creation_date": 1436385636, "question_id": 31302550, "link": "https://stackoverflow.com/questions/31302550/converting-string-to-title-case", "title": "Converting string to title-case", "body": "<p>So I'm a bit of a noob in Ruby and my mission is to manually convert a string into title-case. I have finally been able to create a method that I believe will meet the requirements for my assignments (it's not very flexible, but it will do), however I have hit one final snag. I cannot seem to join the final array into one string. My code and Rspec errors are below. I believe I have to use the .join(\" \") somewhere, but I am not sure of the exact syntax. Thanks in advance for the help!</p>\n\n<p>My code:</p>\n\n<pre><code>class Title\n  attr_accessor :string\n\n  def initialize(string)\n    @string = string\n  end\n\n  def fix\n    string.split(\" \").each_with_index do |value, index|\n      if index &gt;= 2 &amp;&amp; value.length &lt;= 3\n        value.downcase!\n      else\n        value.capitalize!\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Rspec:</p>\n\n<pre><code>expected: \"The Great Gatsby\"\n     got: [\"The\", \"Great\", \"Gatsby\"]\n\n(compared using ==)\n\nexercise_spec.rb:6:in `block (3 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>again:</p>\n\n<pre><code>expected: \"Little Red Riding Hood\"\n     got: [\"Little\", \"Red\", \"Riding\", \"Hood\"]\n\n(compared using ==)\n\nexercise_spec.rb:9:in `block (3 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>again:</p>\n\n<pre><code>expected: \"The Lord of the Rings\"\n     got: [\"The\", \"Lord\", \"of\", \"the\", \"Rings\"]\n\n(compared using ==)\n\nexercise_spec.rb:12:in `block (3 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>again:</p>\n\n<pre><code>expected: \"The Sword and the Stone\"\n     got: [\"The\", \"Sword\", \"and\", \"the\", \"Stone\"]\n\n(compared using ==)\n\nexercise_spec.rb:17:in `block (3 levels) in &lt;top (required)&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "answers": [{"comments": [{"owner": {"reputation": 183, "user_id": 3355098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/51a71d86c555599740d43e0daa63cc03?s=128&d=identicon&r=PG&f=1", "display_name": "user3355098", "link": "https://stackoverflow.com/users/3355098/user3355098"}, "edited": false, "score": 0, "creation_date": 1436388437, "post_id": 31302670, "comment_id": 50596739, "body": "Ah thanks :) I knew it was something simple.  So many nuances when learning a new framework.  If I were to use the get method in an integration test, would it test a route in that case?"}], "tags": [], "owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "is_accepted": true, "score": 5, "last_activity_date": 1436386047, "creation_date": 1436386047, "answer_id": 31302670, "question_id": 31302509, "link": "https://stackoverflow.com/questions/31302509/rails-test-cant-find-route-when-it-clearly-exists/31302670#31302670", "title": "Rails test can&#39;t find route when it clearly exists?", "body": "<p>Controller tests don't test routes, the test actions. You want:</p>\n\n<pre><code>get 'terms_of_service'\n</code></pre>\n"}], "owner": {"reputation": 183, "user_id": 3355098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/51a71d86c555599740d43e0daa63cc03?s=128&d=identicon&r=PG&f=1", "display_name": "user3355098", "link": "https://stackoverflow.com/users/3355098/user3355098"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 481, "favorite_count": 0, "accepted_answer_id": 31302670, "answer_count": 1, "score": 3, "last_activity_date": 1436386047, "creation_date": 1436385483, "question_id": 31302509, "link": "https://stackoverflow.com/questions/31302509/rails-test-cant-find-route-when-it-clearly-exists", "title": "Rails test can&#39;t find route when it clearly exists?", "body": "<p>Okay, so I am tired, and new to rails so possibly am missing something super basic.  Anyways, I just started a new project and am implementing a simply controller for static pages.  Wrote some unit tests just to make sure all my routes are correct (there are only 4 so far).  Three of them pass but the fourth gives me this error message: </p>\n\n<pre><code>  1) Error:\nStaticPagesControllerTest#test_terms_of_service_should_return_success:\nActionController::UrlGenerationError: No route matches {:action=&gt;\"terms\", :controller=&gt;\"static_pages\n\"}\n    test/controllers/static_pages_controller_test.rb:18:in `block in &lt;class:StaticPagesControllerTes\nt&gt;'\n</code></pre>\n\n<p>Its saying it can't find the route.  However, when I rake routes it clearly exists: </p>\n\n<pre><code>  about GET  /about(.:format)   static_pages#about\ncontact GET  /contact(.:format) static_pages#contact\nprivacy GET  /privacy(.:format) static_pages#privacy\n  terms GET  /terms(.:format)   static_pages#terms_of_service\n</code></pre>\n\n<p>Here is that part of routes.rb:</p>\n\n<pre><code>  get 'about' =&gt; 'static_pages#about'\n  get 'contact' =&gt; 'static_pages#contact'\n  get 'privacy' =&gt; 'static_pages#privacy'\n  get 'terms' =&gt; 'static_pages#terms_of_service'\n</code></pre>\n\n<p>and here is the code for the test that is failing:</p>\n\n<pre><code> test \"terms_of_service should return success\" do\n    get 'terms'\n    assert_response :success\n    assert_select 'title', \"Terms Of Service\"\n end\n</code></pre>\n\n<p>I can visit localhost:3000/terms directly in the browser and it works.  Any idea what is going on here?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1436384528, "post_id": 31302171, "comment_id": 50594525, "body": "You can use <code>instance_eval</code>, but you need an instance to call it on."}, {"owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "edited": false, "score": 0, "creation_date": 1436384754, "post_id": 31302171, "comment_id": 50594666, "body": "that&#39;s confusing and will only get you into trouble. I would explicitly pass the var (or self) and access it through its methods. Module.something is badly written if there is an expectation that you will be able things from external closure"}, {"owner": {"reputation": 2676, "user_id": 1456004, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8bc8096bf315be2fb658f246ae9f4ef0?s=128&d=identicon&r=PG", "display_name": "Fran b", "link": "https://stackoverflow.com/users/1456004/fran-b"}, "edited": false, "score": 0, "creation_date": 1436384912, "post_id": 31302171, "comment_id": 50594764, "body": "Suppose that Module is an external library. I can&#39;t modify Module.something but I need use data from my instance."}, {"owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "edited": false, "score": 0, "creation_date": 1436385684, "post_id": 31302171, "comment_id": 50595213, "body": "If Module is external, you should pass in the things it needs. The writer of Module cannot know what your class is going to define."}], "answers": [{"tags": [], "owner": {"reputation": 2718, "user_id": 4934077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e5DyJ.png?s=128&g=1", "display_name": "Mario Zannone", "link": "https://stackoverflow.com/users/4934077/mario-zannone"}, "is_accepted": true, "score": 0, "last_activity_date": 1436386044, "creation_date": 1436386044, "answer_id": 31302668, "question_id": 31302171, "link": "https://stackoverflow.com/questions/31302171/run-method-class-within-block/31302668#31302668", "title": "Run method class within block", "body": "<p>I am not sure I fully understand the context, but this might help:</p>\n\n<pre><code>class Foo\n  def initialize\n    @var = \"my var\"\n  end\n  def meth()\n    \"my method\"\n  end\n  def fee\n    AModule.something do |variable|\n      p @var\n      p meth() \n      p variable\n    end\n  end\nend\n\n# test:\n\nmodule AModule\n  def self.something\n    yield \"bar\"\n  end\nend\n\nfoo = Foo.new\nfoo.fee\n</code></pre>\n"}], "owner": {"reputation": 2676, "user_id": 1456004, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8bc8096bf315be2fb658f246ae9f4ef0?s=128&d=identicon&r=PG", "display_name": "Fran b", "link": "https://stackoverflow.com/users/1456004/fran-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 31302668, "answer_count": 1, "score": -1, "last_activity_date": 1436386044, "creation_date": 1436384364, "question_id": 31302171, "link": "https://stackoverflow.com/questions/31302171/run-method-class-within-block", "title": "Run method class within block", "body": "<p>How can I use instance variables and method within a block in ruby?</p>\n\n<pre><code>class Foo\n  @var = \"my var\"\n  def meth()\n    \"my method\"\n  end\n\n  Module.something do |variable|\n    p @var    #=&gt; Undefined\n    p meth()  #=&gt; Undefined\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "edited": false, "score": 0, "creation_date": 1436383476, "post_id": 31301793, "comment_id": 50593863, "body": "you&#39;re missing the modules S3 object is inside AWS::S3"}], "answers": [{"comments": [{"owner": {"reputation": 501, "user_id": 2551298, "user_type": "registered", "accept_rate": 8, "profile_image": "https://graph.facebook.com/100000108838340/picture?type=large", "display_name": "Chris Root", "link": "https://stackoverflow.com/users/2551298/chris-root"}, "edited": false, "score": 0, "creation_date": 1436384166, "post_id": 31301975, "comment_id": 50594295, "body": "Thank you actually I thought I had tried that but I guess not. it worked."}], "tags": [], "owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "is_accepted": false, "score": 1, "last_activity_date": 1436383844, "creation_date": 1436383844, "answer_id": 31301975, "question_id": 31301793, "link": "https://stackoverflow.com/questions/31301793/ruby-monkey-patch-awss3s3object/31301975#31301975", "title": "Ruby monkey patch AWS::S3::S3Object", "body": "<pre><code>module AWS\n  module S3\n   class S3Object\n     def blah\n       puts 'foo'\n     end\n   end\nend\n</code></pre>\n"}], "owner": {"reputation": 501, "user_id": 2551298, "user_type": "registered", "accept_rate": 8, "profile_image": "https://graph.facebook.com/100000108838340/picture?type=large", "display_name": "Chris Root", "link": "https://stackoverflow.com/users/2551298/chris-root"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436384019, "creation_date": 1436383199, "last_edit_date": 1436384019, "question_id": 31301793, "link": "https://stackoverflow.com/questions/31301793/ruby-monkey-patch-awss3s3object", "title": "Ruby monkey patch AWS::S3::S3Object", "body": "<p>I need to monkey patch the AWS S3Object class in the AWS SDK Version 1 1.60 gem just for our development environment. I thought it would be as easy as any other monkey patch simply by redeclaring the class and adding to it or overriding things, but it doesn't seem to work. Any methods I try to add are not added. Something as simple as the following won't work.</p>\n\n<pre><code>class S3Object\n  def blah\n    puts 'foo'\n  end\nend\n\nconnection = AWS::S3::new\nconnection.buckets['bucketname'].objects['object_name'].blah\n</code></pre>\n\n<p>With this I get an error: </p>\n\n<pre><code>NoMethodError: undefined method `blah' for &lt;AWS::S3::S3Object:amazon.server.com/bucketname&gt;:AWS::S3::S3Object\n</code></pre>\n\n<p>I also tried following the module and class structure of the gem by doing this</p>\n\n<pre><code>module AWS\n  class S3\n    class S3Object\n      def blah\n        puts '***** blah blah blah *****'\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>that didn't work either</p>\n\n<p>From the looks of the source code the objects collection should contain an instance of S3Object. For whatever reason it isn't mixing in my new method. What am I doing wrong?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "clearance"], "answers": [{"comments": [{"owner": {"reputation": 878, "user_id": 1242739, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b69b123b2aa07170fe00894e1ed73635?s=128&d=identicon&r=PG", "display_name": "Nielsen Ramon", "link": "https://stackoverflow.com/users/1242739/nielsen-ramon"}, "edited": false, "score": 0, "creation_date": 1436383469, "post_id": 31301854, "comment_id": 50593858, "body": "That did not fix it sadly. Form submits tho."}, {"owner": {"reputation": 878, "user_id": 1242739, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b69b123b2aa07170fe00894e1ed73635?s=128&d=identicon&r=PG", "display_name": "Nielsen Ramon", "link": "https://stackoverflow.com/users/1242739/nielsen-ramon"}, "edited": false, "score": 0, "creation_date": 1436384155, "post_id": 31301854, "comment_id": 50594288, "body": "Looks like the form is just refreshing now no longer creating the user. Maybe something wrong in my migrations?"}, {"owner": {"reputation": 878, "user_id": 1242739, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b69b123b2aa07170fe00894e1ed73635?s=128&d=identicon&r=PG", "display_name": "Nielsen Ramon", "link": "https://stackoverflow.com/users/1242739/nielsen-ramon"}, "edited": false, "score": 0, "creation_date": 1436384278, "post_id": 31301854, "comment_id": 50594372, "body": "Looks like I get an error now:  PG::NotNullViolation: ERROR: null value in column &quot;email&quot; violates not-null constraint DETAIL: Failing row contains (3, Test company, null, null, null, null, null, 2015-07-08 19:37:39.640803, 2015-07-08 19:37:39.640803). : INSERT INTO &quot;companies&quot; (&quot;name&quot;, &quot;created_at&quot;, &quot;updated_at&quot;) VALUES ($1, $2, $3) RETURNING &quot;id&quot;"}, {"owner": {"reputation": 2683, "user_id": 595152, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c171c7edd235e33799e747bf8b7d3dbb?s=128&d=identicon&r=PG", "display_name": "Betty St", "link": "https://stackoverflow.com/users/595152/betty-st"}, "reply_to_user": {"reputation": 878, "user_id": 1242739, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b69b123b2aa07170fe00894e1ed73635?s=128&d=identicon&r=PG", "display_name": "Nielsen Ramon", "link": "https://stackoverflow.com/users/1242739/nielsen-ramon"}, "edited": false, "score": 0, "creation_date": 1436384941, "post_id": 31301854, "comment_id": 50594782, "body": "very good :)  so the user must fill in an email of the company too?"}, {"owner": {"reputation": 878, "user_id": 1242739, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b69b123b2aa07170fe00894e1ed73635?s=128&d=identicon&r=PG", "display_name": "Nielsen Ramon", "link": "https://stackoverflow.com/users/1242739/nielsen-ramon"}, "edited": false, "score": 1, "creation_date": 1436385147, "post_id": 31301854, "comment_id": 50594931, "body": "Had to remove the not null in my migrations :) It works now, thank you very much, wasn&#39;t far from a working version it seems!"}], "tags": [], "owner": {"reputation": 2683, "user_id": 595152, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c171c7edd235e33799e747bf8b7d3dbb?s=128&d=identicon&r=PG", "display_name": "Betty St", "link": "https://stackoverflow.com/users/595152/betty-st"}, "is_accepted": true, "score": 1, "last_activity_date": 1436383961, "last_edit_date": 1436383961, "creation_date": 1436383383, "answer_id": 31301854, "question_id": 31301787, "link": "https://stackoverflow.com/questions/31301787/multi-model-sign-up-with-clearance-in-rails-4/31301854#31301854", "title": "Multi model sign up with clearance in Rails 4", "body": "<p>You need to use the singular:</p>\n\n<pre><code>= form.fields_for :company\n</code></pre>\n\n<p>and in your controller:</p>\n\n<pre><code>company_attributes # instead of companies_attributes\n</code></pre>\n\n<p>and you have one thing in the wrong model! You want to save a company with the user so you need to move <code>accepts_nested_attributes_for</code> to <code>user.rb</code></p>\n\n<pre><code>accepts_nested_attributes_for :company\n</code></pre>\n"}], "owner": {"reputation": 878, "user_id": 1242739, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b69b123b2aa07170fe00894e1ed73635?s=128&d=identicon&r=PG", "display_name": "Nielsen Ramon", "link": "https://stackoverflow.com/users/1242739/nielsen-ramon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 31301854, "answer_count": 1, "score": 0, "last_activity_date": 1436383961, "creation_date": 1436383166, "question_id": 31301787, "link": "https://stackoverflow.com/questions/31301787/multi-model-sign-up-with-clearance-in-rails-4", "title": "Multi model sign up with clearance in Rails 4", "body": "<p>So I want to create a Company while signing up as a new user to my application. I use <a href=\"https://github.com/thoughtbot/clearance\" rel=\"nofollow\">https://github.com/thoughtbot/clearance</a> for authentication.</p>\n\n<p>I have these 2 migrations:</p>\n\n<pre><code>class CreateCompanies &lt; ActiveRecord::Migration\n  def change\n    create_table :companies do |t|\n      t.string :name, null: false\n      t.string :email, null: false\n      t.attachment :logo\n\n      t.timestamps null: false\n    end\n  end\nend\n</code></pre>\n\n<p>And</p>\n\n<pre><code>class CreateClearanceUsers &lt; ActiveRecord::Migration\n  def change\n    create_table :users do |t|\n      t.string :email, null: false\n      t.string :encrypted_password, limit: 128, null: false\n      t.string :confirmation_token, limit: 128\n      t.string :remember_token, limit: 128, null: false\n      t.string :first_name\n      t.string :last_name\n      t.attachment :avatar\n      t.integer :company_id\n\n      t.timestamps null: false\n    end\n    add_index :users, :email, unique: true\n    add_index :users, :remember_token\n  end\nend\n</code></pre>\n\n<p>My models look like this:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  include Clearance::User\n\n  belongs_to :company\nend\nclass Company &lt; ActiveRecord::Base\n  has_many :users\n  accepts_nested_attributes_for :users\nend\n</code></pre>\n\n<p>This is my altered Clearance controller:</p>\n\n<pre><code>class Clearance::UsersController &lt; ApplicationController\n  before_filter :redirect_signed_in_users, only: [:create, :new]\n  skip_before_filter :require_login, only: [:create, :new]\n  skip_before_filter :authorize, only: [:create, :new]\n\n  def new\n    @user = User.new\n    @user.build_company\n\n    render template: \"users/new\"\n  end\n\n  def create\n    @user = User.new(user_params)\n\n    if @user.save\n      sign_in @user\n      redirect_back_or url_after_create\n    else\n      render template: \"users/new\"\n    end\n  end\n\n  private\n\n  def avoid_sign_in\n    warn \"[DEPRECATION] Clearance's `avoid_sign_in` before_filter is \" +\n      \"deprecated. Use `redirect_signed_in_users` instead. \" +\n      \"Be sure to update any instances of `skip_before_filter :avoid_sign_in`\" +\n      \" or `skip_before_action :avoid_sign_in` as well\"\n    redirect_signed_in_users\n  end\n\n  def redirect_signed_in_users\n    if signed_in?\n      redirect_to Clearance.configuration.redirect_url\n    end\n  end\n\n  def url_after_create\n    Clearance.configuration.redirect_url\n  end\n\n  def user_params\n    params.require(:user).permit(:first_name, :last_name, :email, :password, companies_attributes: [:id, :name])\n  end\nend\n</code></pre>\n\n<p>And at last my form:</p>\n\n<pre><code>&lt;div class=\"form-item\"&gt;\n  &lt;%= form.label :first_name %&gt;\n  &lt;%= form.text_field :first_name, type: \"text\" %&gt;\n&lt;/div&gt;\n\n&lt;div class=\"form-item\"&gt;\n  &lt;%= form.label :last_name %&gt;\n  &lt;%= form.text_field :last_name, type: \"text\" %&gt;\n&lt;/div&gt;\n\n&lt;div class=\"form-item\"&gt;\n  &lt;%= form.label :email %&gt;\n  &lt;%= form.text_field :email, type: \"email\" %&gt;\n&lt;/div&gt;\n\n&lt;div class=\"form-item\"&gt;\n  &lt;%= form.fields_for :companies do |builder| %&gt;\n    &lt;label&gt;Company&lt;/label&gt;\n    &lt;%= builder.text_field :name, type: \"text\" %&gt;\n  &lt;%end%&gt;\n&lt;/div&gt;\n\n&lt;div class=\"form-item\"&gt;\n  &lt;%= form.label :password %&gt;\n  &lt;%= form.password_field :password %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I can perfectly submit my form, but my company_id is nil when finding the user object in rails console.</p>\n\n<p>Anyone have an idea what I am doing wrong?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby", "git", "serena"], "answers": [{"comments": [{"owner": {"reputation": 23586, "user_id": 5606016, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/7o0W4.png?s=128&g=1", "display_name": "A_Di-Matteo", "link": "https://stackoverflow.com/users/5606016/a-di-matteo"}, "edited": false, "score": 0, "creation_date": 1452550554, "post_id": 31754952, "comment_id": 57210596, "body": "Did you succeed with this migration without issues? Any lesson learnt from it worth to share? Thanks"}, {"owner": {"reputation": 3377, "user_id": 2349082, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6008ce4c063170435a93b7971ad14494?s=128&d=identicon&r=PG&f=1", "display_name": "tRuEsatm", "link": "https://stackoverflow.com/users/2349082/truesatm"}, "reply_to_user": {"reputation": 23586, "user_id": 5606016, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/7o0W4.png?s=128&g=1", "display_name": "A_Di-Matteo", "link": "https://stackoverflow.com/users/5606016/a-di-matteo"}, "edited": false, "score": 0, "creation_date": 1455150190, "post_id": 31754952, "comment_id": 58365651, "body": "Yeah, I succeeded in the migration of the repository. Make sure you get the information about the previous authors and dates of commit correctly, otherwise you will need to carry out the migration multiple times."}, {"owner": {"reputation": 1338, "user_id": 2042709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0RqmC.jpg?s=128&g=1", "display_name": "Ilia Shakitko", "link": "https://stackoverflow.com/users/2042709/ilia-shakitko"}, "edited": false, "score": 0, "creation_date": 1485539026, "post_id": 31754952, "comment_id": 70982183, "body": "Hi @sameer do you have it still somewhere in history (examples) to share? I believe it will take some time to dive in to both dimensions and git-fast import to get there, hehe :) did you manage to save the history of commits and branches? Thank you in advance."}, {"owner": {"reputation": 3377, "user_id": 2349082, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6008ce4c063170435a93b7971ad14494?s=128&d=identicon&r=PG&f=1", "display_name": "tRuEsatm", "link": "https://stackoverflow.com/users/2349082/truesatm"}, "reply_to_user": {"reputation": 1338, "user_id": 2042709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0RqmC.jpg?s=128&g=1", "display_name": "Ilia Shakitko", "link": "https://stackoverflow.com/users/2042709/ilia-shakitko"}, "edited": false, "score": 0, "creation_date": 1485642569, "post_id": 31754952, "comment_id": 71012438, "body": "@IliaShakitko The example code is way too long, so posting it as an answer. If it helps, please upvote the question and the mark the answer as the correct one."}, {"owner": {"reputation": 154, "user_id": 2141745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfe940377eea2323d1b32dc103fbe5d7?s=128&d=identicon&r=PG", "display_name": "BPaasch", "link": "https://stackoverflow.com/users/2141745/bpaasch"}, "edited": false, "score": 0, "creation_date": 1494951848, "post_id": 31754952, "comment_id": 75041841, "body": "@Sameer, how were you able to generate the Metadata.xls?  I have the Dimensions Client but have been unable to figure out how to export the data."}, {"owner": {"reputation": 3377, "user_id": 2349082, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6008ce4c063170435a93b7971ad14494?s=128&d=identicon&r=PG&f=1", "display_name": "tRuEsatm", "link": "https://stackoverflow.com/users/2349082/truesatm"}, "reply_to_user": {"reputation": 154, "user_id": 2141745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfe940377eea2323d1b32dc103fbe5d7?s=128&d=identicon&r=PG", "display_name": "BPaasch", "link": "https://stackoverflow.com/users/2141745/bpaasch"}, "edited": false, "score": 0, "creation_date": 1494952489, "post_id": 31754952, "comment_id": 75042234, "body": "@BPaasch I believe the functionality is available with their web client. I do not have access to it as I did that at my previous job. Otherwise, I could have just logged on and got the details for you. But check their web client for sure."}, {"owner": {"reputation": 3377, "user_id": 2349082, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6008ce4c063170435a93b7971ad14494?s=128&d=identicon&r=PG&f=1", "display_name": "tRuEsatm", "link": "https://stackoverflow.com/users/2349082/truesatm"}, "reply_to_user": {"reputation": 154, "user_id": 2141745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfe940377eea2323d1b32dc103fbe5d7?s=128&d=identicon&r=PG", "display_name": "BPaasch", "link": "https://stackoverflow.com/users/2141745/bpaasch"}, "edited": false, "score": 0, "creation_date": 1495054430, "post_id": 31754952, "comment_id": 75095853, "body": "@BPaasch Any success?"}, {"owner": {"reputation": 154, "user_id": 2141745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfe940377eea2323d1b32dc103fbe5d7?s=128&d=identicon&r=PG", "display_name": "BPaasch", "link": "https://stackoverflow.com/users/2141745/bpaasch"}, "edited": false, "score": 0, "creation_date": 1495464582, "post_id": 31754952, "comment_id": 75251175, "body": "@Sameer, not at all.  I was able to log into the web client but didn&#39;t find any option that downloaded the metadata for a folder, project, or a stream."}, {"owner": {"reputation": 231, "user_id": 494838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92831f587d6edf2b3f30553dbe985b01?s=128&d=identicon&r=PG", "display_name": "sajb", "link": "https://stackoverflow.com/users/494838/sajb"}, "edited": false, "score": 0, "creation_date": 1562594268, "post_id": 31754952, "comment_id": 100413306, "body": "@Sameer, Can you specify which versions of Serena Dimensions and git you were running when you performed the export/import above? Do you know of any version limitations on either side?"}, {"owner": {"reputation": 3377, "user_id": 2349082, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6008ce4c063170435a93b7971ad14494?s=128&d=identicon&r=PG&f=1", "display_name": "tRuEsatm", "link": "https://stackoverflow.com/users/2349082/truesatm"}, "reply_to_user": {"reputation": 231, "user_id": 494838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92831f587d6edf2b3f30553dbe985b01?s=128&d=identicon&r=PG", "display_name": "sajb", "link": "https://stackoverflow.com/users/494838/sajb"}, "edited": false, "score": 0, "creation_date": 1563475864, "post_id": 31754952, "comment_id": 100722950, "body": "@sajb sorry, I don&#39;t recall the version numbers and I don&#39;t have access to that info now."}], "tags": [], "owner": {"reputation": 3377, "user_id": 2349082, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6008ce4c063170435a93b7971ad14494?s=128&d=identicon&r=PG&f=1", "display_name": "tRuEsatm", "link": "https://stackoverflow.com/users/2349082/truesatm"}, "is_accepted": true, "score": 4, "last_activity_date": 1485642456, "last_edit_date": 1485642456, "creation_date": 1438375812, "answer_id": 31754952, "question_id": 31301399, "link": "https://stackoverflow.com/questions/31301399/how-to-export-version-history-from-serena-dimensions-to-git/31754952#31754952", "title": "How to export version history from Serena Dimensions to Git?", "body": "<p>Here's the ruby Script</p>\n\n<pre><code>#!/usr/bin/env ruby\n\n$stdout.binmode\n$author = \"\"\n$date = \"\"\n\nrequire 'spreadsheet'\nbook = Spreadsheet.open('Metadata.xls')\nsheet1 = book.worksheet('Sheet1') # can use an index or worksheet name\nsheet1.each 1 do |row|\nbreak if row[2].nil? # if first cell empty\n    $author = row[2] + \" &lt;email@domain.com&gt;\"\nbreak if row[5].nil?\n    $date = row[5]\n#puts row.join(',') # looks like it calls \"to_s\" on each cell's Value\nend\n\n$marks = []\ndef convert_dir_to_mark(dir)\nif !$marks.include?(dir)\n    $marks &lt;&lt; dir\nend\n($marks.index(dir)+1).to_s\nend\n\n\ndef convert_dir_to_date(dir)\nif dir == 'current'\n    return Time.now().to_i\nelse\n    dir = dir.gsub('back_', '')\n    (year, month, day) = dir.split('_')\n    return Time.local(year, month, day).to_i\nend\nend\n\ndef export_data(string)\nprint \"data #{string.size}\\n#{string}\"\nend\n\ndef inline_data(file, code='M', mode='644')\ncontent = File.read(file)\nputs \"#{code} #{mode} inline #{file}\"\nexport_data(content)\nend\n\ndef print_export(dir, last_mark)\ndate = convert_dir_to_date(dir)\nmark = convert_dir_to_mark(dir)\n\nputs 'commit refs/heads/master'\nputs \"mark :#{mark}\"\nputs \"committer #{ $author } #{ date } -0700\"\nexport_data(\"imported from #{dir}\")\nputs \"from :#{last_mark}\" if last_mark\n\nputs 'deleteall'\nDir.glob(\"**/*\").each do |file|\n    next if !File.file?(file)\n    inline_data(file)\nend\nmark\nend\n\n\n# Loop through the directories\nlast_mark = nil\nDir.chdir(ARGV[0]) do\nDir.glob(\"*\").each do |dir|\n    next if File.file?(dir)\n\n    # move into the target directory\n    Dir.chdir(dir) do\n        last_mark = print_export(dir, last_mark)\n    end\nend\nend\n</code></pre>\n\n<p>I exported my Dimensions metadata into a spreadsheet named 'Metadata.xls'. Then read the data from it and imported into Git by running the script. </p>\n"}, {"comments": [{"owner": {"reputation": 535, "user_id": 3375695, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/b3c853b251773f1301862b4893a44256?s=128&d=identicon&r=PG&f=1", "display_name": "Juergen", "link": "https://stackoverflow.com/users/3375695/juergen"}, "edited": false, "score": 1, "creation_date": 1502978003, "post_id": 36547662, "comment_id": 78431791, "body": "Unfortunately that link to CM 14.2 New feature doesn&#39;t work (anymore)"}, {"owner": {"reputation": 950, "user_id": 1847333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/462fd5e74f81c093b016c589cf36bf5e?s=128&d=identicon&r=PG", "display_name": "Chupik", "link": "https://stackoverflow.com/users/1847333/chupik"}, "reply_to_user": {"reputation": 535, "user_id": 3375695, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/b3c853b251773f1301862b4893a44256?s=128&d=identicon&r=PG&f=1", "display_name": "Juergen", "link": "https://stackoverflow.com/users/3375695/juergen"}, "edited": false, "score": 0, "creation_date": 1502982007, "post_id": 36547662, "comment_id": 78434958, "body": "Yes, looks like that page disappeared. But since then new possibilities emerged, for example Dimensions CM Git Connector could be used for that purposes.  <a href=\"https://www.serenacentral.com/blogs/entry/dimensions-cm-git-connector-getting-started-tutorial\" rel=\"nofollow noreferrer\">serenacentral.com/blogs/entry/&hellip;</a> <a href=\"http://help.serena.com/doc_center/cm/ver1433/dmcm_git_connector_guide.pdf\" rel=\"nofollow noreferrer\">help.serena.com/doc_center/cm/ver1433/&hellip;</a>"}], "tags": [], "owner": {"reputation": 950, "user_id": 1847333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/462fd5e74f81c093b016c589cf36bf5e?s=128&d=identicon&r=PG", "display_name": "Chupik", "link": "https://stackoverflow.com/users/1847333/chupik"}, "is_accepted": false, "score": 3, "last_activity_date": 1502982713, "last_edit_date": 1502982713, "creation_date": 1460374734, "answer_id": 36547662, "question_id": 31301399, "link": "https://stackoverflow.com/questions/31301399/how-to-export-version-history-from-serena-dimensions-to-git/36547662#36547662", "title": "How to export version history from Serena Dimensions to Git?", "body": "<p>There is also another way to do this - using Git SVN and CM SVN Bridge.\nWith such approach you should be able to use git client to access Dimensions server.<br>\nCheck this link for details:\n<a href=\"http://central.serena.com/blogs/entry/cm-14-2-new-feature-using-a-git-client-to-acess-a-cm-server\" rel=\"nofollow noreferrer\">CM 14.2 New feature: Using a Git Client to access a CM server</a><br>\nAlso this thread on Serena forum may be useful:\n<a href=\"https://www.serenacentral.com/community/forums/migrate-dimension-repo-to-git\" rel=\"nofollow noreferrer\">Migrate Dimension repo to git</a></p>\n\n<p><strong>Update</strong></p>\n\n<p>There is new feature in 14.3.3 which allows to do it much simpler.</p>\n\n<ul>\n<li>Dimensions CM Git Connector <a href=\"https://www.serenacentral.com/blogs/entry/dimensions-cm-git-connector-getting-started-tutorial\" rel=\"nofollow noreferrer\">Getting Started Tutorial</a> </li>\n<li>Dimensions CM Git Connector <a href=\"http://help.serena.com/doc_center/cm/ver1432/dmcm_git_connector_guide.pdf\" rel=\"nofollow noreferrer\">User's Guide</a></li>\n</ul>\n"}], "owner": {"reputation": 3377, "user_id": 2349082, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6008ce4c063170435a93b7971ad14494?s=128&d=identicon&r=PG&f=1", "display_name": "tRuEsatm", "link": "https://stackoverflow.com/users/2349082/truesatm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3453, "favorite_count": 2, "protected_date": 1469716510, "accepted_answer_id": 31754952, "answer_count": 2, "score": 5, "last_activity_date": 1502982713, "creation_date": 1436381896, "last_edit_date": 1494956563, "question_id": 31301399, "link": "https://stackoverflow.com/questions/31301399/how-to-export-version-history-from-serena-dimensions-to-git", "title": "How to export version history from Serena Dimensions to Git?", "body": "<p>I have a repository in Serena Dimensions; I need to migrate it to Github. I have figured it out that I need to use git-fast-import, but the issue I am facing is with the metadata of Serena Dimensions repo. How to export the metadata from Serena dimensions?</p>\n\n<p><strong>Note:</strong> I have updated the answer below, please upvote if you find it useful.</p>\n"}, {"tags": ["ruby", "gem", "jekyll", "github-pages"], "comments": [{"owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "edited": false, "score": 0, "creation_date": 1436396620, "post_id": 31301289, "comment_id": 50600267, "body": "Five problems = five questions on SO. This question will certainly be closed with reason &quot;unclear what you&#39;re asking&quot;. Take the time,  explain your problems and you will get answers. But one question at a time."}, {"owner": {"reputation": 295, "user_id": 1406122, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b5a9725b2d6315ca0c6659ed92e65707?s=128&d=identicon&r=PG", "display_name": "LDericher", "link": "https://stackoverflow.com/users/1406122/ldericher"}, "reply_to_user": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "edited": false, "score": 0, "creation_date": 1436479733, "post_id": 31301289, "comment_id": 50644222, "body": "Not removed yet? Anyway, I figured out everything I needed on my own (mostly thanks to the brainstorming I did to write this question). Plugin works now."}], "owner": {"reputation": 295, "user_id": 1406122, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b5a9725b2d6315ca0c6659ed92e65707?s=128&d=identicon&r=PG", "display_name": "LDericher", "link": "https://stackoverflow.com/users/1406122/ldericher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1436538122, "creation_date": 1436381563, "question_id": 31301289, "link": "https://stackoverflow.com/questions/31301289/jekyll-plugin-for-lightboxing", "title": "Jekyll plugin for lightboxing", "body": "<p>Yet another time that I don't like what already exists, so first, <em>this is what I want to build</em>:</p>\n\n<p>I got one <a href=\"http://jekyllrb.com\" rel=\"nofollow\">jekyll</a> directory structure, let it reside at <code>/opt/jekyll/</code>. Let HTML be served to <code>/var/www/blog/</code> via <code>jekyll build --config /opt/jekyll/_config.yml</code>. </p>\n\n<p>I want a plugin which <strong>\"Problem 1\"</strong> goes through the files at <code>/opt/jekyll/images/</code> on each build (let one be named <code>/opt/jekyll/images/gng/gng01.jpg</code>) and serves them in <code>/var/www/blog/images/full/</code>, so gng01.jpg should be served as <code>/var/www/blog/images/full/gng/gng01.jpg</code>.</p>\n\n<p>Simultaneously, it should <strong>\"Problem 2\"</strong> serve a thumbnail of it in <code>/var/www/blog/thumbs/</code> (essentially calling <code>convert /var/www/blog/images/full/gng/gng01.jpg -resize 150x150^ -gravity center -extent 150x150 /var/www/blog/images/thumbs/gng/gng01.jpg</code>, might do so through <a href=\"https://github.com/minimagick/minimagick\" rel=\"nofollow\">minimagick</a>). Thumbnail size should be configurable in <strong>\"Problem 3\"</strong> <code>_config.yml</code>.</p>\n\n<p>Also, it should <strong>\"Problem 4\"</strong> register one Liquid-Tag and <strong>\"Problem 5\"</strong> one Liquid-Environment, so that I can use it like this:</p>\n\n<pre><code>{% gallery \"myGallery\" %}\n  {% image \"gng/gng01.jpg\" \"This is the picture gng01.jpg associated with gng\" %}\n{% endgallery %}\n</code></pre>\n\n<p><em>I am just asking for helpful resources and hints</em> as I haven't worked with ruby before (because I avoided and used something I am familiar with whenever I had the choice). I am not asking for finished code. So:</p>\n\n<p>I found <a href=\"https://github.com/matthewowen/jekyll-slideshow\" rel=\"nofollow\">this \"slideshow\"-plugin</a>(<a href=\"https://github.com/matthewowen/jekyll-slideshow/blob/master/_plugins/jekyll_slideshow.rb\" rel=\"nofollow\">code</a>). If I read correctly, that does at least part of my <strong>\"Problem 1\"</strong>, <strong>\"Problem 2\"</strong> and <strong>\"Problem 3\"</strong> - registering a tag, converting images and reading config values. Yet I can't get that plugin to work on my server, so I don't know if I can modify it to handle the pictures exactly the way I want. </p>\n\n<p>It might even be impossible or at least incredibly hacky with jekyll to copy <code>/opt/jekyll/images/</code> to <code>/var/www/blog/images/full/</code> without copying it to <code>/var/www/blog/images/</code>. In that case I consider thumbnailing from <code>/opt/jekyll/images/full/</code> to <code>/opt/jekyll/images/thumbs/</code> and serve the whole thing.</p>\n\n<p>In the <a href=\"https://github.com/matthewowen/jekyll-slideshow/blob/master/_plugins/jekyll_slideshow.rb\" rel=\"nofollow\">slideshow-code</a> there is:</p>\n\n<pre><code>site.static_files.each do |file|\n  if (File.extname(file.path).downcase == ('.jpg' || '.png')) &amp;&amp;\n        (!File.basename(file.path).include? \"-thumb\")\n</code></pre>\n\n<p>This seems to apply to every PNG or JPG inside the base directory. Can I restrict that to the images/ directory for efficiency? Is <code>static_files</code> fully populated by default?</p>\n\n<p>Also, can I define a Generator and a Tag in the same rb-file?</p>\n\n<p>I only find \"tag\" plugins on the web, which show how to add a Tag for my <strong>\"Problem 4\"</strong>, but none have \"environments\" to solve my <strong>\"Problem 5\"</strong> (Not even sure if that's what they're called, but this is the name in TeX).</p>\n"}, {"tags": ["ruby", "iis", "sinatra"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 4399791, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ka-E6GnPhFA/AAAAAAAAAAI/AAAAAAAAAeQ/uDiBck7x0Vg/photo.jpg?sz=128", "display_name": "Andreas Ulrich", "link": "https://stackoverflow.com/users/4399791/andreas-ulrich"}, "is_accepted": false, "score": 1, "last_activity_date": 1502272686, "creation_date": 1502272686, "answer_id": 45587407, "question_id": 31301277, "link": "https://stackoverflow.com/questions/31301277/host-sinatra-app-in-iis-with-httpplatformhandler/45587407#45587407", "title": "Host Sinatra app in IIS with HttpPlatformHandler", "body": "<p>This works for my rails application - sinatra should not be any diffrerent. Just change the path to your ruby binaries... \nEnvironmentVariables for HOME/HOMEDRIVE/HOMEPATH are necessery on a windows server environment using Active Directory users. You can ignore this on a single local machine.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;configuration&gt;\n    &lt;system.webServer&gt;\n        &lt;handlers&gt;\n            &lt;add name=\"httpplatformhandler\" path=\"*\" verb=\"*\" modules=\"httpPlatformHandler\" resourceType=\"Unspecified\" requireAccess=\"Script\" /&gt;\n       &lt;/handlers&gt;\n        &lt;httpPlatform stdoutLogEnabled=\"true\" processesPerApplication=\"1\" stdoutLogFile=\"C:\\inetpub\\wwwroot\\rails\\FrontEndServer\\log\\rails.log\" startupTimeLimit=\"20\" processPath=\"C:\\RailsInstaller\\Ruby2.3.0\\bin\\ruby.exe\"\n                      arguments=\"&amp;quot;C:\\RailsInstaller\\Ruby2.3.0\\bin\\puma&amp;quot; --env production --dir &amp;quot;C:\\inetpub\\wwwroot\\rails\\FrontEndServer&amp;quot; -p %HTTP_PLATFORM_PORT% \"&gt;\n            &lt;environmentVariables&gt;\n                &lt;environmentVariable name=\"HOME\" value=\"C:\\temp\"/&gt;\n                &lt;environmentVariable name=\"HOMEDRIVE\" value=\"C:\\temp\"/&gt;\n                &lt;environmentVariable name=\"HOMEPATH\" value=\"C:\\temp\"/&gt;\n            &lt;/environmentVariables&gt;\n        &lt;/httpPlatform&gt;\n    &lt;/system.webServer&gt;\n&lt;/configuration&gt;\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 1920313, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/352d42c158e96c9fb4c0e7737cabd765?s=128&d=identicon&r=PG", "display_name": "Charlie Baum", "link": "https://stackoverflow.com/users/1920313/charlie-baum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1502272686, "creation_date": 1436381537, "question_id": 31301277, "link": "https://stackoverflow.com/questions/31301277/host-sinatra-app-in-iis-with-httpplatformhandler", "title": "Host Sinatra app in IIS with HttpPlatformHandler", "body": "<p>I have read every thread/blog I can find regarding the httpplatformhandler product but I am still unsure if I am able to host a Sinatra (NON ruby on rails) app in IIS using the HttpPlatformHandler.  Is this possible?  I see examples for rails, but I am not sure how to alter to allow plain Ruby/Sinatra.  I am unsure if I need puma or some other \"middle man\" to do this.  If this is possible, would someone kindly provide an example of a web.config that would work for the default Sinatra app:</p>\n\n<p>require 'sinatra'</p>\n\n<p>get '/hi' do\n\"Hello World!\"\nend</p>\n"}, {"tags": ["arrays", "ruby", "recursion", "multidimensional-array"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1436381366, "post_id": 31300854, "comment_id": 50592560, "body": "I had to fix your indenting there because it was extremely confusing what you were doing there. Now it&#39;s clear there&#39;s something odd going on. The method <code>method</code> shouldn&#39;t be used for this, though."}, {"owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1436382123, "post_id": 31300854, "comment_id": 50593009, "body": "For just type check problems you can use this one liner. You don&#39;t need to over ride Array class <code>[1,[2,3,&quot;hi&quot;,[[[[2,&quot;ex&quot;,&quot;bye&quot;]]]]]].flatten.select{|elem| elem.is_a?(String)}.count</code>"}, {"owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "edited": false, "score": 0, "creation_date": 1436383285, "post_id": 31300854, "comment_id": 50593745, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/31296706/merge-hashes-and-key-gets-both-old-and-new-values\">Merge Hashes and key gets both, old and new values</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5094868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6f7cbfe5061749b629fcd4eaf37951b?s=128&d=identicon&r=PG&f=1", "display_name": "chico92", "link": "https://stackoverflow.com/users/5094868/chico92"}, "edited": false, "score": 0, "creation_date": 1436382284, "post_id": 31301414, "comment_id": 50593124, "body": "Thanks! that was fast. thats  a bit too much for me XD. I just wrote class Array because i wanna use self and i thought i cant use self without it but i think i am wrong ^^. I just wanna know other or better ways to iterate through arrays"}, {"owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1436382356, "post_id": 31301414, "comment_id": 50593166, "body": "I think OP doesn&#39;t need the Array class override."}, {"owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1436382529, "post_id": 31301414, "comment_id": 50593294, "body": "The second requirement was not number of 2&#39;s. Its Arrays which have a minimum index of 2."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1436384073, "post_id": 31301414, "comment_id": 50594229, "body": "For minimum length of 2: <code>[...].deep_count { |a| a.is_a?(Array) and a.length &gt;= 2 }</code>"}, {"owner": {"reputation": 1, "user_id": 5094868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6f7cbfe5061749b629fcd4eaf37951b?s=128&d=identicon&r=PG&f=1", "display_name": "chico92", "link": "https://stackoverflow.com/users/5094868/chico92"}, "edited": false, "score": 0, "creation_date": 1436385194, "post_id": 31301414, "comment_id": 50594960, "body": "Can u show me the version without adding it to Array,pls? I do not understand your way. ^^"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1436392335, "post_id": 31301414, "comment_id": 50598639, "body": "Added a procedural version."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 0, "last_activity_date": 1436392328, "last_edit_date": 1436392328, "creation_date": 1436381948, "answer_id": 31301414, "question_id": 31300854, "link": "https://stackoverflow.com/questions/31300854/ruby-iterating-through-multidimensional-arrays/31301414#31301414", "title": "Ruby Iterating through multidimensional arrays", "body": "<p>I'd try and make this more in line stylistically with the Ruby core functions especially if you're intending to add it to Array:</p>\n\n<pre><code>class Array\n  def deep_count(*args, &amp;block)\n    count = self.count(*args, &amp;block)\n\n    each do |e|\n      count += e.deep_count(*args, &amp;block) if e.is_a?(Array)\n    end\n\n    count\n  end\nend\n\n[1,[2,3,\"hi\",[[[[2,\"ex\",\"bye\"]]]]]].deep_count {|v| v.is_a?(String)}\n# =&gt; 3\n\n[1,[2,3,\"hi\",[[[[2,\"ex\",\"bye\"]]]]]].deep_count(2)\n# =&gt; 2\n</code></pre>\n\n<p><strong>Update:</strong> Version without patching core Array:</p>\n\n<pre><code>def array_deep_count(array, *args, &amp;block)\n  count = array.count(*args, &amp;block)\n\n  array.each do |e|\n    count += e.deep_count(*args, &amp;block) if e.is_a?(Array)\n  end\n\n  count\nend\n</code></pre>\n\n<p>This largely involves swapping <code>self</code> with an argument.</p>\n"}], "owner": {"reputation": 1, "user_id": 5094868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6f7cbfe5061749b629fcd4eaf37951b?s=128&d=identicon&r=PG&f=1", "display_name": "chico92", "link": "https://stackoverflow.com/users/5094868/chico92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436392328, "creation_date": 1436380297, "last_edit_date": 1436383794, "question_id": 31300854, "link": "https://stackoverflow.com/questions/31300854/ruby-iterating-through-multidimensional-arrays", "title": "Ruby Iterating through multidimensional arrays", "body": "<p>I just wanna know if there are other good ways to solve problems like the following:</p>\n\n<pre><code>p   [1,[2,3,\"hi\",[[[[2,\"ex\",\"bye\"]]]]]].count_type(String)\n# =&gt; 3\n</code></pre>\n\n<p>So our goal is to count the types in a multidimensional Array but, as i said, problems like this, not just this problem. The general problem is that we get multidimensional Arrays and then we need to search for types or Arrays which have a minimum index of 2 or some other conditions. I am sorry for my bad language usage and hope you get the point.</p>\n\n<p>I know that recursive methods work. But is there any other way with recursive or non recursive implementation?</p>\n\n<p>I use the following:</p>\n\n<pre><code>  def count_type(type)\n    counter = 0\n\n    self.each { |elem|\n      if elem.is_a?(type)\n        counter +=1\n      end\n\n      if elem.is_a?(Array)\n        counter += elem.method(type)\n      end\n    }\n  end\n\n  return counter\n</code></pre>\n\n<p>I know that the part with <code>elem.is_a?(type)</code> differs and depends on what you are asking for. \nI forgot to tell you that it is forbidden to use flatten and my goal is not adding a new method to class Array but to learn new ways to solve the above explained problems. </p>\n"}, {"tags": ["ruby", "voltrb"], "answers": [{"tags": [], "owner": {"reputation": 876, "user_id": 368602, "user_type": "registered", "profile_image": "https://graph.facebook.com/144900684/picture?type=large", "display_name": "Ryan", "link": "https://stackoverflow.com/users/368602/ryan"}, "is_accepted": false, "score": 1, "last_activity_date": 1436380464, "creation_date": 1436380464, "answer_id": 31300930, "question_id": 31300838, "link": "https://stackoverflow.com/questions/31300838/onmouseover-call-ruby-function-in-volt-framework-not-working/31300930#31300930", "title": "Onmouseover call ruby function in Volt framework not working", "body": "<p>Events in volt are bound with e-, so you want to do an e-mounseover attribute:</p>\n\n<p></p>\n"}], "owner": {"reputation": 177, "user_id": 3579220, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/5f6b81754a3c31823dfee76236d6ffe6?s=128&d=identicon&r=PG&f=1", "display_name": "user3579220", "link": "https://stackoverflow.com/users/3579220/user3579220"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436380464, "creation_date": 1436380273, "question_id": 31300838, "link": "https://stackoverflow.com/questions/31300838/onmouseover-call-ruby-function-in-volt-framework-not-working", "title": "Onmouseover call ruby function in Volt framework not working", "body": "<p>I want to call a function when the mouse is on an aside, but it only calls it on the initial page load (which it shouldn't) and not when the mouse is on the aside. Here is my code:</p>\n\n<pre><code>&lt;aside onmouseover=\"{{ func_name }}\"&gt;\n  ...\n&lt;aside&gt;\n</code></pre>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "ruby-on-rails-4", "crud"], "answers": [{"tags": [], "owner": {"reputation": 10621, "user_id": 312907, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/9decae0c588d499686dfbfe3b1072914?s=128&d=identicon&r=PG", "display_name": "Francesco Belladonna", "link": "https://stackoverflow.com/users/312907/francesco-belladonna"}, "is_accepted": false, "score": 1, "last_activity_date": 1436380017, "creation_date": 1436380017, "answer_id": 31300752, "question_id": 31300591, "link": "https://stackoverflow.com/questions/31300591/beginner-rails-crud/31300752#31300752", "title": "Beginner Rails CRUD", "body": "<p>You are writing a form to \"create\" an Article, the article class might have some default values that you may want to show in the form, in this way you don't have to take care of it in the view itself.</p>\n\n<p>Also in this way, whatever default you have, it's in the same location, you don't need to update two files.</p>\n"}, {"tags": [], "owner": {"reputation": 1295, "user_id": 1602342, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/VxzbS.jpg?s=128&g=1", "display_name": "Amit Suroliya", "link": "https://stackoverflow.com/users/1602342/amit-suroliya"}, "is_accepted": false, "score": 1, "last_activity_date": 1436381765, "last_edit_date": 1436381765, "creation_date": 1436380545, "answer_id": 31300959, "question_id": 31300591, "link": "https://stackoverflow.com/questions/31300591/beginner-rails-crud/31300959#31300959", "title": "Beginner Rails CRUD", "body": "<p>Below both are equivalent - </p>\n\n<pre><code>1. form_for(@article...........) /* @article = Article.new */\n2. form_for(:article...........)\n</code></pre>\n\n<p>For more details see <a href=\"http://apidock.com/rails/ActionView/Helpers/FormHelper/form_for\" rel=\"nofollow\">http://apidock.com/rails/ActionView/Helpers/FormHelper/form_for</a></p>\n\n<p>But, in Rails, we write DRY code. So, we are using same <code>article_form</code> and instance variable <code>@article</code> for <code>new</code> and <code>edit</code> method and yes, this instance variable available in view -</p>\n\n<pre><code>def new\n  @article = Article.new /* this is new article */\nend\n\ndef edit\n  @article = Article.find params[:id] /* Already exists in database */\nend\n</code></pre>\n\n<p>and view file -</p>\n\n<p>new.html.erb and edit.html.erb have same form</p>\n\n<pre><code> &lt;%= render \"article_form\" %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14364, "user_id": 1023609, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14cd00b085c207261db49ac46be4773c?s=128&d=identicon&r=PG", "display_name": "MurifoX", "link": "https://stackoverflow.com/users/1023609/murifox"}, "is_accepted": true, "score": 1, "last_activity_date": 1436381902, "creation_date": 1436381902, "answer_id": 31301403, "question_id": 31300591, "link": "https://stackoverflow.com/questions/31300591/beginner-rails-crud/31301403#31301403", "title": "Beginner Rails CRUD", "body": "<p>According to the documentation (<a href=\"http://guides.rubyonrails.org/form_helpers.html#binding-a-form-to-an-object\" rel=\"nofollow\">http://guides.rubyonrails.org/form_helpers.html#binding-a-form-to-an-object</a>) your form (if created with <code>form_for</code>) needs an instance of a model to bind the input to the model attributes. In this way you are saying that you have a new <code>article</code> instance and your form fields maps to its attributes, so when the form is submitted, you receive the params in the form of:  </p>\n\n<pre><code>articles: {attributte1: 'something', attributte2: 'somethingelse'}\n</code></pre>\n\n<p>This way you can populate an instance of an object by saying <code>@article = Article.new(article_params)</code>, as <code>article_params</code> is populated inside your controller somewhere.</p>\n"}], "owner": {"reputation": 597, "user_id": 4534985, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/Z4Y06.jpg?s=128&g=1", "display_name": "inthenameofmusik", "link": "https://stackoverflow.com/users/4534985/inthenameofmusik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 31301403, "answer_count": 3, "score": 1, "last_activity_date": 1436381902, "creation_date": 1436379535, "question_id": 31300591, "link": "https://stackoverflow.com/questions/31300591/beginner-rails-crud", "title": "Beginner Rails CRUD", "body": "<p>Quick beginner question about <code>new</code> and <code>create</code> methods. The Ruby Guide shows this example:</p>\n\n<pre><code>def new\n  @article = Article.new\nend\n\ndef create\n  @article = Article.new(article_params)\n\n  if @article.save\n    redirect_to @article\n  else\n    render 'new'\n  end\nend\n</code></pre>\n\n<hr>\n\n<p>In a different example in the guide, the statement <code>@article = Article.new</code> was not used in the <code>new</code> method, which makes more sense to me. The <code>new</code> view doesn't need @article, the <code>form_for</code> takes a parameter of the model name, then defines a variable for the form methods to use inside the <code>|something|</code>. So why do we need to establish <code>@article = Article.new</code> and have <code>@article</code> available for the view?</p>\n"}, {"tags": ["html", "ruby", "forms", "controller", "sinatra"], "answers": [{"comments": [{"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 1, "creation_date": 1436384423, "post_id": 31301084, "comment_id": 50594455, "body": "Sinatra uses the <a href=\"https://github.com/rack/rack/blob/1.6.4/lib/rack/methodoverride.rb\" rel=\"nofollow noreferrer\">method override middleware</a>, which checks the hidden <code>_method</code> input and routes the request to the corresponding method in the app. So in this case although the browser uses <code>POST</code>, the Sinatra app will actually see the request as if it were a <code>DELETE</code>."}], "tags": [], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "is_accepted": false, "score": 1, "last_activity_date": 1436385014, "last_edit_date": 1436385014, "creation_date": 1436380913, "answer_id": 31301084, "question_id": 31300548, "link": "https://stackoverflow.com/questions/31300548/add-logic-to-delete-method-in-sinatra/31301084#31301084", "title": "Add logic to delete method in Sinatra", "body": "<p>You are seeing this behavior because the client is doing a POST, not a DELETE.</p>\n\n<p>HTML forms only know how to do GET and POST. They cannot do PUT or DELETE. One way you can make it work is by using an AJAX call.</p>\n\n<p>If you are using JQuery, you can set the <code>method</code> to DELETE. Here is the <a href=\"http://api.jquery.com/jquery.ajax/\" rel=\"nofollow\">reference</a>.</p>\n\n<p>You will need to create the URL: <code>/1</code> for example. And you need to handle the success and failure cases. Perhaps set the location on success, and display an error on failure.</p>\n\n<p>EDIT: According to Matt's comment below, <code>_method</code> param replaces the HTTP method. Even though this works, I don't think it is a good practice. It would be better to use the HTTP DELETE method.</p>\n"}, {"comments": [{"owner": {"reputation": 865, "user_id": 4766423, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/1a22a7fe122dc41bd7ef44fa3db2c45f?s=128&d=identicon&r=PG&f=1", "display_name": "Nappstir", "link": "https://stackoverflow.com/users/4766423/nappstir"}, "edited": false, "score": 0, "creation_date": 1436386494, "post_id": 31302100, "comment_id": 50595656, "body": "nice find! That seemed to be the issue. I didn&#39;t know that I had to return it."}], "tags": [], "owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "is_accepted": true, "score": 1, "last_activity_date": 1436384171, "creation_date": 1436384171, "answer_id": 31302100, "question_id": 31300548, "link": "https://stackoverflow.com/questions/31300548/add-logic-to-delete-method-in-sinatra/31302100#31302100", "title": "Add logic to delete method in Sinatra", "body": "<p>You need to <code>return</code> from the event handler itself, so the attribute will look like:</p>\n\n<pre><code>onsubmit=\"return confirm('Are you sure you want to delete the following note?')\"\n</code></pre>\n\n<p>Currently the return value of <code>return</code> is being returned <em>to</em> the event handler, but the handler itself is returning <code>true</code> (or at least not <code>false</code>).</p>\n\n<p>(The current recommendation seems to be to avoid inline event handling like this though.)</p>\n"}], "owner": {"reputation": 865, "user_id": 4766423, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/1a22a7fe122dc41bd7ef44fa3db2c45f?s=128&d=identicon&r=PG&f=1", "display_name": "Nappstir", "link": "https://stackoverflow.com/users/4766423/nappstir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 963, "favorite_count": 0, "accepted_answer_id": 31302100, "answer_count": 2, "score": 2, "last_activity_date": 1436385014, "creation_date": 1436379394, "question_id": 31300548, "link": "https://stackoverflow.com/questions/31300548/add-logic-to-delete-method-in-sinatra", "title": "Add logic to delete method in Sinatra", "body": "<p>I have been learning Sinatra for a couple of days now so I am still quite new. I am simply created a notes application and have added a delete function within the app. </p>\n\n<p>Here is my Controller:</p>\n\n<pre><code># Will display title of all notes\nget '/' do\n  @notes = Note.all\n  erb :index\nend\n\n# Will display content within selected note\nget '/:id' do\n  @note = Note.where(id: params[:id]).first\n  erb :note_description\nend\n\n# Will delete item from notes.\ndelete '/:id' do\n  Note.delete(params[:id])\n\n  redirect '/'\nend\n</code></pre>\n\n<p>Here is my view with html/erb:</p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n  &lt;p&gt;&lt;a href=\"/\"&gt;Return to Notes&lt;/a&gt;&lt;/p&gt;\n\n  &lt;h1&gt;&lt;%= @note.title %&gt;&lt;/h1&gt;\n  &lt;p&gt;&lt;%= @note.content %&gt;&lt;/p&gt;\n\n\n  &lt;form onsubmit=\"confirm('Are you sure you want to delete the following note?')\" action=\"/&lt;%= @note.id %&gt;\" method=\"POST\"&gt;\n    &lt;input type=\"hidden\" name=\"_method\" value=\"DELETE\"&gt;\n    &lt;button type=\"submit\"&gt;Delete&lt;/button&gt;\n  &lt;/form&gt;\n\n&lt;/div&gt;\n</code></pre>\n\n<p>As you can see, I have created a <code>delete</code> button and have a pop-up on submit when you click it. This will simply verify if the user really wants to delete the object. What happens though, is no matter what I click the item will be deleted and I will be redirected to the home page. I want to add logic where the app will only delete and redirect me to home page if the user clicks okay. If they click cancel nothing should happen. Any advice or help would be greatly appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "xml", "xpath", "nokogiri"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 2, "creation_date": 1436382214, "post_id": 31300506, "comment_id": 50593078, "body": "&quot;i get error&quot; means? It tells us nothing. Perhaps specifying the exact exception you get would help."}, {"owner": {"reputation": 73, "user_id": 4470222, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/70c6d7653fbb0c4d356091ab4898f807?s=128&d=identicon&r=PG&f=1", "display_name": "odinsy", "link": "https://stackoverflow.com/users/4470222/odinsy"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1436384776, "post_id": 31300506, "comment_id": 50594684, "body": "That means regexp doesn&#39;t work inside xpath()"}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1436458697, "post_id": 31303434, "comment_id": 50632550, "body": "While this should work, it&#39;s going to be slower. You&#39;re asking Nokogiri to return all nodes inside the <code>content</code> node, then have Ruby filter them out. It&#39;s always better to let the &quot;engine&quot; do the work, i.e., let libXML or a DBM reduce the &quot;hits&quot; as much as possible for speed, then work with the reduced results."}, {"owner": {"reputation": 2718, "user_id": 4934077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e5DyJ.png?s=128&g=1", "display_name": "Mario Zannone", "link": "https://stackoverflow.com/users/4934077/mario-zannone"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1436459210, "post_id": 31303434, "comment_id": 50632878, "body": "Agreed. I will update the snippet according di @kjhughes suggestion."}], "tags": [], "owner": {"reputation": 2718, "user_id": 4934077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e5DyJ.png?s=128&g=1", "display_name": "Mario Zannone", "link": "https://stackoverflow.com/users/4934077/mario-zannone"}, "is_accepted": false, "score": 2, "last_activity_date": 1436459397, "last_edit_date": 1436459397, "creation_date": 1436388550, "answer_id": 31303434, "question_id": 31300506, "link": "https://stackoverflow.com/questions/31300506/select-all-xml-elements-whose-name-starts-with-a-certain-string/31303434#31303434", "title": "Select all XML elements whose name starts with a certain string?", "body": "<p>Try this:</p>\n\n<pre><code>doc.xpath(\"//content/*\").each do |item|\n  ...\n  item.xpath(\"./*[starts-with(local-name(), 'date_')]\").each do |d|\n    ...\n  end\nend\n</code></pre>\n\n<p>(snipped edited according to @kjhughes suggestion)</p>\n"}, {"tags": [], "owner": {"reputation": 88945, "user_id": 290085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306077a2fb7af6587f470214a1b337ff?s=128&d=identicon&r=PG", "display_name": "kjhughes", "link": "https://stackoverflow.com/users/290085/kjhughes"}, "is_accepted": true, "score": 6, "last_activity_date": 1436389008, "creation_date": 1436389008, "answer_id": 31303574, "question_id": 31300506, "link": "https://stackoverflow.com/questions/31300506/select-all-xml-elements-whose-name-starts-with-a-certain-string/31303574#31303574", "title": "Select all XML elements whose name starts with a certain string?", "body": "<p>The XPath for selecting all <code>date</code> elements in your document, regardless of their heritage, is simply:</p>\n\n<pre><code>//date\n</code></pre>\n\n<p>The XPath for selecting all elements whose name starts with \"date_\" is:</p>\n\n<pre><code>//*[starts-with(local-name(), 'date_')]\n</code></pre>\n\n<p>See <a href=\"http://www.w3.org/TR/xpath/#function-starts-with\" rel=\"noreferrer\"><code>starts-with()</code></a> and <a href=\"http://www.w3.org/TR/xpath/#function-local-name\" rel=\"noreferrer\"><code>local-name()</code></a>.</p>\n"}], "owner": {"reputation": 73, "user_id": 4470222, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/70c6d7653fbb0c4d356091ab4898f807?s=128&d=identicon&r=PG&f=1", "display_name": "odinsy", "link": "https://stackoverflow.com/users/4470222/odinsy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 532, "favorite_count": 0, "accepted_answer_id": 31303574, "answer_count": 2, "score": 2, "last_activity_date": 1436459397, "creation_date": 1436379256, "last_edit_date": 1436396062, "question_id": 31300506, "link": "https://stackoverflow.com/questions/31300506/select-all-xml-elements-whose-name-starts-with-a-certain-string", "title": "Select all XML elements whose name starts with a certain string?", "body": "<p>I have two elements, <code>item</code> and <code>date</code>:</p>\n\n<ul>\n<li><code>item</code> has_many dates</li>\n<li><code>date</code> belongs_to item</li>\n</ul>\n\n<p>I have a file with XML tree like this:</p>\n\n<pre><code>&lt;content&gt;\n  &lt;item_1&gt;\n    &lt;title&gt;\n    &lt;description&gt;\n    &lt;date_1&gt;\n      &lt;date&gt;&lt;/date&gt;\n      &lt;count&gt;&lt;/count&gt;\n    &lt;/date_1&gt;\n    &lt;date_2&gt;\n      &lt;date&gt;&lt;/date&gt;\n      &lt;count&gt;&lt;/count&gt;\n    &lt;/date_2&gt;\n  &lt;/item_1&gt;\n  &lt;item_2&gt;\n    &lt;title&gt;\n    &lt;description&gt;\n    &lt;date_1&gt;\n      &lt;date&gt;&lt;/date&gt;\n      &lt;count&gt;&lt;/count&gt;\n    &lt;/date_1&gt;\n    &lt;date_2&gt;\n      &lt;date&gt;&lt;/date&gt;\n      &lt;count&gt;&lt;/count&gt;\n    &lt;/date_2&gt;\n  &lt;/item_2&gt;\n&lt;/content&gt;\n</code></pre>\n\n<p>I use Nokogiri for parsing data from <code>item</code> and <code>date</code>.\nI wrote a half of the script, which creates elements:</p>\n\n<pre><code>doc.xpath(\"//content/*\").each do |item|\n  Item.create!(\n              title: item.xpath(\"title\").text,\n              description: item.xpath(\"description\").text)\nend\n</code></pre>\n\n<p>Now I need find and build all dates of the items (element <code>date</code>), but can't understand how to parse tags like <code>&lt;data_1&gt;</code>, <code>&lt;data_2&gt;</code>, <code>&lt;data_3&gt;</code> etc.\nWhat I was trying</p>\n\n<pre><code>  tour.xpath(\"//*/data_*\").each do |date|\n    puts date\n  end\n</code></pre>\n\n<p>or</p>\n\n<pre><code>  tour.xpath{ |i| \"//*/data_#{i}\" }.each do |date|\n    puts date\n  end\n</code></pre>\n\n<p>but it doesn't work or I get an error.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 16458, "user_id": 720164, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/654c5b015c1aa595fe534b2f217590cb?s=128&d=identicon&r=PG", "display_name": "Jonathan Allard", "link": "https://stackoverflow.com/users/720164/jonathan-allard"}, "is_accepted": false, "score": 4, "last_activity_date": 1436379099, "creation_date": 1436379099, "answer_id": 31300438, "question_id": 31300090, "link": "https://stackoverflow.com/questions/31300090/stubing-figaro-with-rspec/31300438#31300438", "title": "Stubing Figaro with rspec", "body": "<p>You haven't stubbed <code>Figaro.env</code> as a double.</p>\n\n<pre><code>describe do\n  before do\n    stub_const(\"Figaro\", double)\n    allow(Figaro).to receive_message_chain(:env, :foo_bar) { :yay }\n  end\n\n  it do\n    expect(Figaro.env.foo_bar).to eq :yay\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 578, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1436379099, "creation_date": 1436377969, "question_id": 31300090, "link": "https://stackoverflow.com/questions/31300090/stubing-figaro-with-rspec", "title": "Stubing Figaro with rspec", "body": "<p>I have a problem with stubing Figaro on rspec test.\nI have code that looks like this:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n\n  def ce_url_link\n    path = Figaro.env.online_url || Figaro.env.root_url + '/online'\n    \"#{path}/#{ce_code}\"\n  end\nend\n\n\ndescribe 'ce_url_link' do\n  let(:user) { create(:user) }\n\n  context 'when Figaro.env.online_url is not present' do\n\n    it 'uses Figaro.env.root_url as a path' do\n      allow(Figaro.env).to receive(:online_url).and_return(nil)\n    end\n  end\nend\n</code></pre>\n\n<p>And when I add some expectation spec Figaro.env.online_url returns the same what I have in application.yml. Why is that?</p>\n"}, {"tags": ["arrays", "ruby", "multidimensional-array"], "answers": [{"tags": [], "owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "is_accepted": true, "score": 3, "last_activity_date": 1436378057, "creation_date": 1436378057, "answer_id": 31300114, "question_id": 31299945, "link": "https://stackoverflow.com/questions/31299945/how-do-i-use-fill-method-to-create-new-objects/31300114#31300114", "title": "How do I use .fill method to create new objects?", "body": "<p>The why to this question can be found if you look at Array.new:\n<a href=\"http://ruby-doc.org/core-2.2.0/Array.html\" rel=\"nofollow\">http://ruby-doc.org/core-2.2.0/Array.html</a></p>\n\n<blockquote>\n  <p>Note that the second argument populates the array with references to\n  the same object. Therefore, it is only recommended in cases when you\n  need to instantiate arrays with natively immutable objects such as\n  Symbols, numbers, true or false.</p>\n  \n  <p>To create an array with separate objects a block can be passed\n  instead. This method is safe to use with mutable objects such as\n  hashes, strings or other arrays</p>\n</blockquote>\n\n<p>The workaround as specified in the doc is:</p>\n\n<pre><code>array = Array.new(8) { [] }\n</code></pre>\n"}], "owner": {"reputation": 500, "user_id": 1176878, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2cfbd6ed473661bdad0ea841cf465820?s=128&d=identicon&r=PG", "display_name": "giwook", "link": "https://stackoverflow.com/users/1176878/giwook"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 31300114, "answer_count": 1, "score": 2, "last_activity_date": 1436378057, "creation_date": 1436377525, "question_id": 31299945, "link": "https://stackoverflow.com/questions/31299945/how-do-i-use-fill-method-to-create-new-objects", "title": "How do I use .fill method to create new objects?", "body": "<p>Specifically, I'm wondering why when I create a new array with several sub-arrays using .fill, the sub-arrays created using .fill are the same object.</p>\n\n<pre><code>array = Array.new.fill([], 0..8)\n\nsubsquare[0].object_id =&gt; 7220340\nsubsquare[1].object_id =&gt; 7220340\n</code></pre>\n\n<p>How would I create these sub-arrays while ensuring each sub-array was its own object?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1436377651, "post_id": 31299920, "comment_id": 50590243, "body": "Look at <code>params</code> and figure out what&#39;s in there. It isn&#39;t what you expect. You can see this in the log and interactively using <code>byebug</code>. This is trivially easy to debug, given the tooling that comes with Rails."}], "answers": [{"comments": [{"owner": {"reputation": 205, "user_id": 4925363, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f9677975a7f1508434abccac7b2409ec?s=128&d=identicon&r=PG&f=1", "display_name": "SeattleDucati", "link": "https://stackoverflow.com/users/4925363/seattleducati"}, "edited": false, "score": 0, "creation_date": 1436385794, "post_id": 31299980, "comment_id": 50595282, "body": "Excellent answer. Thank you. I simply removed the content of the passreset action, and it worked immediately."}], "tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": true, "score": 1, "last_activity_date": 1436377944, "last_edit_date": 1436377944, "creation_date": 1436377617, "answer_id": 31299980, "question_id": 31299920, "link": "https://stackoverflow.com/questions/31299920/rails-param-is-missing-or-the-value-is-empty-user/31299980#31299980", "title": "Rails - param is missing or the value is empty: user", "body": "<p><code>passreset_user_path(@user)</code> doesn't \"pass in\" user to the method in question, it generates a URL. The URL will include an ID segment. It will look something like this:</p>\n\n<pre><code>/users/123/passreset\n</code></pre>\n\n<p>Your action will be invoked with the ID segment available in <code>params[:id]</code>. It's up to you to find the corresponding user in the database.</p>\n\n<p>Instead of relying on <code>params[:user]</code>, you need to do something along the lines of <code>@user = User.find(params[:id])</code></p>\n\n<p>The larger issue is that your <code>passreset</code> action makes no sense. It appears to be setup to receive a POST request containing new attributes for the user, but you're linking to it with a button that will produce a GET request with no payload of user attributes.</p>\n\n<p>You're missing an entire intermediate step, where you show the user a password reset form. Your first request needs to serve that form up, and then that form can POST back to your <code>passreset</code> method.</p>\n"}], "owner": {"reputation": 205, "user_id": 4925363, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f9677975a7f1508434abccac7b2409ec?s=128&d=identicon&r=PG&f=1", "display_name": "SeattleDucati", "link": "https://stackoverflow.com/users/4925363/seattleducati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "accepted_answer_id": 31299980, "answer_count": 1, "score": 0, "last_activity_date": 1436377944, "creation_date": 1436377428, "question_id": 31299920, "link": "https://stackoverflow.com/questions/31299920/rails-param-is-missing-or-the-value-is-empty-user", "title": "Rails - param is missing or the value is empty: user", "body": "<p>I've been developing a site based on the Hartl's guide. I want to move the password reset functionality to it own partial. </p>\n\n<p>I created a partial, _passreset.html.erb. Currently, it is an exact copy of _form.html.erb. I plan on editing it to only have the password fields</p>\n\n<p>On the Users show.html.erb page (the profile page), I have links to Edit and Password Reset. Here is the code:</p>\n\n<pre><code>   &lt;% if current_user.admin? || current_user == @user %&gt;\n   &lt;%= link_to \"Edit\", edit_user_path(@user) %&gt; | \n   &lt;%= link_to \"Password Reset\", passreset_user_path(@user)%&gt;\n   &lt;% end %&gt;\n</code></pre>\n\n<p>When I click on the \"Password Reset\" link, I get the follow error: <br>\nActionController::ParameterMissing in UsersController#passreset<br>\nparam is missing or the value is empty: user</p>\n\n<p>My edit page still works perfectly. </p>\n\n<p>The source of the error is my users controller params statement:</p>\n\n<pre><code>def user_params\n  params.require(:user).permit(:name, :email, :password, :password_confirmation, :admin)\nend\n</code></pre>\n\n<p>The application trace says:<br></p>\n\n<pre><code>  app/controllers/users_controller.rb:89:in `user_params'\n  app/controllers/users_controller.rb:29:in `block in passreset'\n  app/controllers/users_controller.rb:28:in `passreset'\n</code></pre>\n\n<p>The route for the new function looks like this:</p>\n\n<pre><code>resources :users do\nresources :articles\nget 'passreset'\nend\n</code></pre>\n\n<p>rake routes show these two lines, one for edit and one for passreset:</p>\n\n<pre><code> edit_user GET    /users/:id/edit(.:format)                         users#edit\n passreset_user GET    /users/:id/passreset(.:format)                    users#passreset\n</code></pre>\n\n<p>The passreset method is (other than the notice) an exact copy of the update method. </p>\n\n<pre><code> def passreset\n respond_to do |format|\n  if @user.update(user_params)\n    format.html { redirect_to @user, notice: 'Password was      successfully updated.' }\n    format.json { render :show, status: :ok, location: @user }\n  else\n    format.html { render :edit }\n    format.json { render json: @user.errors, status:  :unprocessable_entity }\n  end\nend\nend\n</code></pre>\n\n<p>It looks like the @user is not being passed in, but I don't understand why. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "helpers"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1436377118, "post_id": 31299758, "comment_id": 50589907, "body": "What is the HTML you expect to be rendered, and what HTML is being rendered?"}, {"owner": {"reputation": 83, "user_id": 4733151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-u1_yCzl8mis/AAAAAAAAAAI/AAAAAAAAABQ/8nbrkkOsXVI/photo.jpg?sz=128", "display_name": "Vitalik Andrysha", "link": "https://stackoverflow.com/users/4733151/vitalik-andrysha"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1436377265, "post_id": 31299758, "comment_id": 50590000, "body": "Yes, but I have found the answer, sorry for the stupid question"}], "answers": [{"comments": [{"owner": {"reputation": 1295, "user_id": 1602342, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/VxzbS.jpg?s=128&g=1", "display_name": "Amit Suroliya", "link": "https://stackoverflow.com/users/1602342/amit-suroliya"}, "reply_to_user": {"reputation": 83, "user_id": 4733151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-u1_yCzl8mis/AAAAAAAAAAI/AAAAAAAAABQ/8nbrkkOsXVI/photo.jpg?sz=128", "display_name": "Vitalik Andrysha", "link": "https://stackoverflow.com/users/4733151/vitalik-andrysha"}, "edited": false, "score": 0, "creation_date": 1436377509, "post_id": 31299862, "comment_id": 50590148, "body": "ok @VitalikAndrysha......So, you found answer now. Please answer it and finish this question."}, {"owner": {"reputation": 83, "user_id": 4733151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-u1_yCzl8mis/AAAAAAAAAAI/AAAAAAAAABQ/8nbrkkOsXVI/photo.jpg?sz=128", "display_name": "Vitalik Andrysha", "link": "https://stackoverflow.com/users/4733151/vitalik-andrysha"}, "edited": false, "score": 0, "creation_date": 1436377689, "post_id": 31299862, "comment_id": 50590261, "body": "regular expression was misspelled"}], "tags": [], "owner": {"reputation": 1295, "user_id": 1602342, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/VxzbS.jpg?s=128&g=1", "display_name": "Amit Suroliya", "link": "https://stackoverflow.com/users/1602342/amit-suroliya"}, "is_accepted": false, "score": 0, "last_activity_date": 1436377256, "creation_date": 1436377256, "answer_id": 31299862, "question_id": 31299758, "link": "https://stackoverflow.com/questions/31299758/do-not-create-url-link/31299862#31299862", "title": "Do not create URL link", "body": "<p>I think you did mistake in <code>urls_to_images</code> method. try this -</p>\n\n<pre><code> def urls_to_images(s)\n   s = s.gsub! /\\s(http:\\/\\/.*?)/ , '&lt;img src=\"\\1\"/&gt;'\n   s.html_safe\n end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 83, "user_id": 4733151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-u1_yCzl8mis/AAAAAAAAAAI/AAAAAAAAABQ/8nbrkkOsXVI/photo.jpg?sz=128", "display_name": "Vitalik Andrysha", "link": "https://stackoverflow.com/users/4733151/vitalik-andrysha"}, "is_accepted": true, "score": 0, "last_activity_date": 1436377959, "last_edit_date": 1436377959, "creation_date": 1436377525, "answer_id": 31299944, "question_id": 31299758, "link": "https://stackoverflow.com/questions/31299758/do-not-create-url-link/31299944#31299944", "title": "Do not create URL link", "body": "<pre><code>def urls_to_images(s)\n    s.gsub! /\\s(http:\\/\\/.*?)(\\s|\\Z)/ , '&lt;img src=\"\\1\"/&gt;'\n    s.html_safe\n  end\n</code></pre>\n\n<p>**now works **</p>\n\n<p><img src=\"https://i.stack.imgur.com/kVKTu.png\" alt=\"enter image description here\"></p>\n"}], "owner": {"reputation": 83, "user_id": 4733151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-u1_yCzl8mis/AAAAAAAAAAI/AAAAAAAAABQ/8nbrkkOsXVI/photo.jpg?sz=128", "display_name": "Vitalik Andrysha", "link": "https://stackoverflow.com/users/4733151/vitalik-andrysha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 1, "accepted_answer_id": 31299944, "answer_count": 2, "score": 0, "last_activity_date": 1436377959, "creation_date": 1436376929, "question_id": 31299758, "link": "https://stackoverflow.com/questions/31299758/do-not-create-url-link", "title": "Do not create URL link", "body": "<p><strong>app/vies/items/show.html.erb</strong></p>\n\n<pre><code>    &lt;h1&gt;&lt;%= @item.name %&gt;&lt;/h1&gt;\n\n&lt;ul&gt;\n    &lt;li&gt;&lt;%= @item.price %&gt; \u0440\u0443\u0431.&lt;/li&gt;\n    &lt;li&gt;&lt;%= urls_to_images(@item.description) %&gt;&lt;/li&gt;\n    &lt;li&gt;\u0412\u0435\u0441: &lt;%= @item.weight %&gt; \u043a\u0433.&lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p><strong>app/helpers/application_helper.rb</strong></p>\n\n<pre><code>    module ApplicationHelper\n\n  def urls_to_images(s)\n    s.gsub! /\\s(http:\\/\\/.*?)/ , '&lt;img src=\"\\1\"/&gt;'\n    s.html_safe\n  end\n\n  # def urls_to_links(s)\n  # \n  # end\n\nend\n</code></pre>\n\n<p><strong>browser interface :</strong></p>\n\n<p><img src=\"https://i.stack.imgur.com/V1RjE.png\" alt=\"enter image description here\"></p>\n\n<p><strong>Displayed text. Why not output link?</strong></p>\n"}, {"tags": ["ruby", "global-variables"], "comments": [{"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 1, "creation_date": 1436377000, "post_id": 31299572, "comment_id": 50589836, "body": "Aside from your question, have you heard of <a href=\"https://www.gnu.org/software/stow/\" rel=\"nofollow noreferrer\">stow</a>? That&#39;s what I use to install my dotfiles."}], "answers": [{"comments": [{"owner": {"reputation": 6256, "user_id": 2331735, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/SC0hO.jpg?s=128&g=1", "display_name": "DenniJensen", "link": "https://stackoverflow.com/users/2331735/dennijensen"}, "edited": false, "score": 0, "creation_date": 1436378468, "post_id": 31300134, "comment_id": 50590779, "body": "Yes thanks. I missed the question. I edited the second question. Do they behave as same."}], "tags": [], "owner": {"reputation": 4349, "user_id": 648392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b2bd8a8c583866711c234a612f6b157?s=128&d=identicon&r=PG", "display_name": "Jesper", "link": "https://stackoverflow.com/users/648392/jesper"}, "is_accepted": true, "score": 1, "last_activity_date": 1436378091, "creation_date": 1436378091, "answer_id": 31300134, "question_id": 31299572, "link": "https://stackoverflow.com/questions/31299572/referencing-global-variables-in-a-ruby-script-block-vs-function/31300134#31300134", "title": "Referencing global variables in a Ruby script (Block vs Function)", "body": "<p>The ruby top-level scope <a href=\"https://banisterfiend.wordpress.com/2010/11/23/what-is-the-ruby-top-level/\" rel=\"nofollow\">behaves both like a class and like an instance</a>.</p>\n\n<p>When you define methods in that context, they will become private methods on the <code>Object</code> class. </p>\n\n<p>Local variables also behave kind of like in a class. They are local to the class definition, and thus no accessible in the instances (where the methods you define end up). </p>\n\n<p>Variables starting with <code>$</code> are globals. They are available everywhere. The dollar sign is needed for the interpreter to tell locals and globals apart.</p>\n\n<p>Variables starting with a capital letter are constants. When you create a constant it goes in whatever class or module you're in at the time. Constants can be referred to in the enclosing class or module and any inheriting classes. Constants can also be referred to \"from the outside\" by using fully qualified names like this: <code>MyModule::MyClass::MyConstant</code>. </p>\n\n<p>Constants differ from globals in the way they are scoped. A constant lives in a class or module, whereas globals are just that - global.</p>\n\n<p>Here are some examples:</p>\n\n<pre><code>$foo  = 'bar'\nBAZ   = 'qux'\n\ndef x\n  puts $foo, BAZ\nend\n\nx\n# bar\n# qux\n\nclass A\n  B = 'C'\n  def self.say\n    puts B\n  end\n  def say\n    puts B\n  end\nend\n\nA.say\n# C\nA.new.say\n# C\nputs A::B\n# C\nputs B\n# =&gt; raises an error\n</code></pre>\n"}], "owner": {"reputation": 6256, "user_id": 2331735, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/SC0hO.jpg?s=128&g=1", "display_name": "DenniJensen", "link": "https://stackoverflow.com/users/2331735/dennijensen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1065, "favorite_count": 0, "accepted_answer_id": 31300134, "answer_count": 1, "score": 1, "last_activity_date": 1463003914, "creation_date": 1436376403, "last_edit_date": 1463003914, "question_id": 31299572, "link": "https://stackoverflow.com/questions/31299572/referencing-global-variables-in-a-ruby-script-block-vs-function", "title": "Referencing global variables in a Ruby script (Block vs Function)", "body": "<p>I am building an installation script in Ruby for my dotfiles. To parse some simple flags I use <a href=\"http://docs.ruby-lang.org/en/2.1.0/OptionParser.html\" rel=\"nofollow\">OptionParser</a>. \nI want to read the <code>-f</code> flag to force an override on existing files. Everything works fine. The Flag will be stored in the <code>options</code> hash.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>options = {}\n  option_parse = OptionParser.new do |opt|\n  opt.on('-f', '--force') do\n    options[:force] = true\n      puts 'force overwrite'\n    end\n  end\noption_parse.parse!\n</code></pre>\n\n<p>So I refactored my code into functions.\nIn the functions I can't use <code>options</code> without setting it into a global variable.</p>\n\n<p>And now I have two questions:</p>\n\n<ol>\n<li>What is Ruby doing with the variable if I have to define it as global and it is not enough to define it over the function (no classes, just a script)?</li>\n<li>Do <code>$options</code> and <code>OPTIONS</code> behave the same way in the global context? </li>\n</ol>\n"}, {"tags": ["ruby-on-rails", "ruby", "integration-testing", "has-many-through", "fixtures"], "comments": [{"owner": {"reputation": 16458, "user_id": 720164, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/654c5b015c1aa595fe534b2f217590cb?s=128&d=identicon&r=PG", "display_name": "Jonathan Allard", "link": "https://stackoverflow.com/users/720164/jonathan-allard"}, "edited": false, "score": 0, "creation_date": 1436375645, "post_id": 31299163, "comment_id": 50589004, "body": "Code smells: 1. You seem to be creating random data in your model, which you&#39;re not supposed to. Creating test data is the responbility of the test stack (here FactoryGirl). 2. I would strongly suggest doing your queries in your controllers rather than views. They are responsible for fetching the data (eg. <code>Quantity.where</code>) is supposed to be in the controller."}, {"owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1436375741, "post_id": 31299163, "comment_id": 50589070, "body": "Food.count will give you the number of Food records available. Its not mandatory that there should be a record with Food id = 14. Count of 5 doesn&#39;t mean there is a record with id 4. There can be records like 1,2,3,5,6. In this case the count is 5 but record id 4 is not available. It may be deleted. So, you shouldn&#39;t be going by that logic."}, {"owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "reply_to_user": {"reputation": 16458, "user_id": 720164, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/654c5b015c1aa595fe534b2f217590cb?s=128&d=identicon&r=PG", "display_name": "Jonathan Allard", "link": "https://stackoverflow.com/users/720164/jonathan-allard"}, "edited": false, "score": 0, "creation_date": 1436375910, "post_id": 31299163, "comment_id": 50589181, "body": "Whoa!!! queries in views...Its a big NO...It should go in controller as @JonathanAllard suggested."}, {"owner": {"reputation": 336, "user_id": 5037635, "user_type": "registered", "accept_rate": 95, "profile_image": "https://lh3.googleusercontent.com/-Q696dEBT88A/AAAAAAAAAAI/AAAAAAAABKE/UWvdx-S87CI/photo.jpg?sz=128", "display_name": "Leo Brown", "link": "https://stackoverflow.com/users/5037635/leo-brown"}, "edited": false, "score": 0, "creation_date": 1436383183, "post_id": 31299163, "comment_id": 50593689, "body": "I made adjustments based on your suggestions and my errors are gone! I detailed the changes in an answer below."}], "answers": [{"comments": [{"owner": {"reputation": 336, "user_id": 5037635, "user_type": "registered", "accept_rate": 95, "profile_image": "https://lh3.googleusercontent.com/-Q696dEBT88A/AAAAAAAAAAI/AAAAAAAABKE/UWvdx-S87CI/photo.jpg?sz=128", "display_name": "Leo Brown", "link": "https://stackoverflow.com/users/5037635/leo-brown"}, "edited": false, "score": 0, "creation_date": 1436380984, "post_id": 31300367, "comment_id": 50592305, "body": "Thank you @mrodrigues for the warnings about rand, especially as it relates to .count. I had no idea that was happening. For now, random record selection is what I need to do, though I may choose a more refined approach later once everything is up and running. I believe I have solved my problem, as the errors are gone. Per your advice, I moved the quantity creation relation to the List controller. I am going to post my rewritten code in an answer; please have a look if you have a minute."}], "tags": [], "owner": {"reputation": 1013, "user_id": 2908285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/905d24088d27a026570bd2049bf939e4?s=128&d=identicon&r=PG", "display_name": "mrodrigues", "link": "https://stackoverflow.com/users/2908285/mrodrigues"}, "is_accepted": true, "score": 0, "last_activity_date": 1436378855, "creation_date": 1436378855, "answer_id": 31300367, "question_id": 31299163, "link": "https://stackoverflow.com/questions/31299163/has-many-through-creating-child-after-save-actionviewtemplateerror/31300367#31300367", "title": "has_many :through creating child after_save --&gt; ActionView::Template::Error", "body": "<p>Besides being very weird to create a random value in the <code>after_save</code> callback (which I think you're doing as an exercise, but anyway it's better to use good practices from the start), you should never use <code>rand(Model.count)</code> to get a sample record. There's two main problems:</p>\n\n<ol>\n<li>The <code>rand(upper_bound)</code> method returns a number between zero and the <code>upper_bound</code> argument, but there's no guarantee that zero is the first created id. I'm using PostgreSQL and the first model has the id 1. You can specify a range (<code>rand(1..upper_bound)</code>), but anyway you're gambling on the way the current database works.</li>\n<li>You're assuming that all the records exist in a sequential order at any given time, which is not always true. If you delete a record and it's id is randomly chosen, you'll get an error. The library also can use any strategy to create the fixtures, so it's better not to assume anything about how it works.</li>\n</ol>\n\n<p>If you really need to choose randomly a record, I'd recommend simply using the array's <code>sample</code> method: <code>Food.all.sample</code>. It's slow, but it works. If you need to optimize, there's other options.</p>\n\n<p>Now, I'd really recommend to avoid random values at all costs, using them only when necessary. It's difficult to test, and difficult to track bugs. Also, I'd avoid creating a relation inside a callback, it grows rapidly into a unmanageable mess.</p>\n"}, {"comments": [{"owner": {"reputation": 1013, "user_id": 2908285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/905d24088d27a026570bd2049bf939e4?s=128&d=identicon&r=PG", "display_name": "mrodrigues", "link": "https://stackoverflow.com/users/2908285/mrodrigues"}, "edited": false, "score": 0, "creation_date": 1436457215, "post_id": 31301480, "comment_id": 50631647, "body": "It&#39;s much better now, with the relations and queries being cared of in the controller, but there&#39;s still some improvements you can do: Since Quantity have a relation called list, you don&#39;t need to reference the id directly: <code>Quantity.where(list: @list)</code> works fine, as also <code>quantity.list</code> instead of <code>Food.find(quantity.food_id)</code>. To avoid loading all the records to memory so you can just use some data, you can do: <code>@quantities = Quantity.where(list: list).find_each.map { |q| &quot;#{q.amount} #{q.food.name}&quot; }</code>."}, {"owner": {"reputation": 1013, "user_id": 2908285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/905d24088d27a026570bd2049bf939e4?s=128&d=identicon&r=PG", "display_name": "mrodrigues", "link": "https://stackoverflow.com/users/2908285/mrodrigues"}, "edited": false, "score": 0, "creation_date": 1436457270, "post_id": 31301480, "comment_id": 50631680, "body": "You can sample more than one record at the same time: <code>@food_a, @food_b = Food.all.sample(2)</code>, this way you don&#39;t have to worry if the chosen records are the same. Also, since the records&#39; creation is a multistep computation that should success or fail altogether, you should put everything inside a transaction, that way if anything fails, the system will rollback and won&#39;t have inconsistent data: <code>ActiveRecord::Base.transaction { ... }</code>. To simplify the controller, which is starting to get too complex, I&#39;d extract the steps to a service, which is much more easy to test and reason about."}, {"owner": {"reputation": 336, "user_id": 5037635, "user_type": "registered", "accept_rate": 95, "profile_image": "https://lh3.googleusercontent.com/-Q696dEBT88A/AAAAAAAAAAI/AAAAAAAABKE/UWvdx-S87CI/photo.jpg?sz=128", "display_name": "Leo Brown", "link": "https://stackoverflow.com/users/5037635/leo-brown"}, "reply_to_user": {"reputation": 1013, "user_id": 2908285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/905d24088d27a026570bd2049bf939e4?s=128&d=identicon&r=PG", "display_name": "mrodrigues", "link": "https://stackoverflow.com/users/2908285/mrodrigues"}, "edited": false, "score": 0, "creation_date": 1436466612, "post_id": 31301480, "comment_id": 50637301, "body": "@mrodrigues, I&#39;ve made the changes you suggested in your first comment as well as the improved food sampling method from your second comment. It is all working with no errors!  Transactions are tougher for me since they are brand new and I am disoriented. It makes a lot of sense why I would use transactions as you stated, so I am trying.  I&#39;ve posted a new question about my current progress on transactions since I think now it is a new topic. I would appreciate your response if/when you have a chance. <a href=\"http://stackoverflow.com/questions/31325394/where-should-activerecordbase-transaction-be\" title=\"where should activerecordbase transaction be\">stackoverflow.com/questions/31325394/&hellip;</a>"}], "tags": [], "owner": {"reputation": 336, "user_id": 5037635, "user_type": "registered", "accept_rate": 95, "profile_image": "https://lh3.googleusercontent.com/-Q696dEBT88A/AAAAAAAAAAI/AAAAAAAABKE/UWvdx-S87CI/photo.jpg?sz=128", "display_name": "Leo Brown", "link": "https://stackoverflow.com/users/5037635/leo-brown"}, "is_accepted": false, "score": 0, "last_activity_date": 1436470873, "last_edit_date": 1436470873, "creation_date": 1436382145, "answer_id": 31301480, "question_id": 31299163, "link": "https://stackoverflow.com/questions/31299163/has-many-through-creating-child-after-save-actionviewtemplateerror/31301480#31301480", "title": "has_many :through creating child after_save --&gt; ActionView::Template::Error", "body": "<p>I am posting an answer because after implementing the suggestions, my error is gone and I think I have a better understanding of what's going on.</p>\n\n<p>Previously, I had Quantities created in the List model upon creation of a List using a relation. The relation is now in the controller, not the model.</p>\n\n<p>List model without relation:</p>\n\n<pre><code>class List &lt; ActiveRecord::Base\n  has_many :quantities\n  has_many :foods, :through =&gt; :quantities\n  validates :days, presence: true\n  validates :name, uniqueness: { case_sensitive: false }\nend\n</code></pre>\n\n<p>Quantities fixture and lists_create integration test are unchanged.</p>\n\n<p>Previously this show.html.erb contained a query. Now, it has only @quantities, which is defined in the Lists controller. The query is in the controller, not the view.</p>\n\n<p>app/views/lists/show.html.erb:</p>\n\n<pre><code>&lt;% provide(:title, @list.name) %&gt;\n&lt;div class=\"row\"&gt;&lt;aside class=\"col-md-4\"&gt;&lt;section class=\"user_info\"&gt;\n  &lt;h1&gt; &lt;%= @list.name %&gt;&lt;/h1&gt;\n  &lt;p&gt;&lt;%= @list.days %&gt; day(s)&lt;/p&gt;\n  &lt;p&gt;&lt;%= @quantities %&gt;&lt;/p&gt;\n  &lt;/section&gt;&lt;/aside&gt;&lt;/div&gt;&lt;%= link_to \"edit the properties of this list\", edit_list_path %&gt;\n</code></pre>\n\n<p>The List controller with the query in the show method (to filter for quantities that have the proper list_id) and the relation in the create method (to create new quantities upon list creation).</p>\n\n<pre><code>class ListsController &lt; ApplicationController\n\n  def show\n    @list = List.find(params[:id])\n    @quantities = []\n    Quantity.where(:list_id =&gt; @list.id).each do |f|\n        @quantities.push(\"#{f.amount} #{Food.find(f.food_id).name}\")\n    end\n  end\n# ...\n  def create\n  @list = List.new(list_params) \n  if @list.save\n    flash[:success] = \"A list has been created!\"\n    @a = Food.all.sample.id\n    @b = Food.all.sample.id\n\n    Quantity.create(food_id: @a, list_id: @list.id, amount: rand(6)) \n    if (@a != @b)\n      Quantity.create(food_id: @b, list_id: @list.id, amount: rand(6))\n    end\n    redirect_to @list\n    else\n      render 'new'\n    end\n  end\n# ...\nend\n</code></pre>\n\n<p>If I understand correctly, I was misusing the model and view and inappropriately using rand with Food.count.</p>\n\n<p>Please let me know if you think I've missed anything or if you can recommend anything to improve my code. Thank you @mrodrigues, @jonathan, and @vamsi for your help!</p>\n"}], "owner": {"reputation": 336, "user_id": 5037635, "user_type": "registered", "accept_rate": 95, "profile_image": "https://lh3.googleusercontent.com/-Q696dEBT88A/AAAAAAAAAAI/AAAAAAAABKE/UWvdx-S87CI/photo.jpg?sz=128", "display_name": "Leo Brown", "link": "https://stackoverflow.com/users/5037635/leo-brown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "accepted_answer_id": 31300367, "answer_count": 2, "score": 0, "last_activity_date": 1436470873, "creation_date": 1436375172, "last_edit_date": 1436382225, "question_id": 31299163, "link": "https://stackoverflow.com/questions/31299163/has-many-through-creating-child-after-save-actionviewtemplateerror", "title": "has_many :through creating child after_save --&gt; ActionView::Template::Error", "body": "<p>I have three models: List, Food, and Quantity. List and Food are associated through Quantity via has_many :through. The model association is doing what I want, but when I test, there is an error.</p>\n\n<pre><code>test_valid_list_creation_information#ListsCreateTest (1434538267.92s)\nActionView::Template::Error:         ActionView::Template::Error: Couldn't find Food with 'id'=14\napp/views/lists/show.html.erb:11:in `block in _app_views_lists_show_html_erb__3286583530286700438_40342200'\napp/views/lists/show.html.erb:10:in `_app_views_lists_show_html_erb__3286583530286700438_40342200'\ntest/integration/lists_create_test.rb:17:in `block (2 levels) in &lt;class:ListsCreateTest&gt;'\ntest/integration/lists_create_test.rb:16:in `block in &lt;class:ListsCreateTest&gt;'\napp/views/lists/show.html.erb:11:in `block in _app_views_lists_show_html_erb__3286583530286700438_40342200'\napp/views/lists/show.html.erb:10:in `_app_views_lists_show_html_erb__3286583530286700438_40342200'\ntest/integration/lists_create_test.rb:17:in `block (2 levels) in &lt;class:ListsCreateTest&gt;'\ntest/integration/lists_create_test.rb:16:in `block in &lt;class:ListsCreateTest&gt;'\n</code></pre>\n\n<p>My aim is to create a new Quantity (associated with that list) each time a list is created. Each Quantity has amount, food_id, and list_id.</p>\n\n<ul>\n<li>list_id should equal the id of the list that was just created.</li>\n<li>food_id should equal the id of a random food that already exists.</li>\n<li>amount should be a random integer.</li>\n</ul>\n\n<p>In the error, the number 14 (\"Food with 'id'=14) is generated by randomly selecting a number from 1 to Food.count. Food.count equals the number of food objects in test/fixtures/foods.yml, so the foods are definitely recognized, at least when I run Food.count. So why wouldn't food with 'id'=14 exist?</p>\n\n<p>I believe there is something wrong with either the Lists controller, the fixtures, or the integration test. Whatever is causing the test to fail doesn't seem to affect performance (everything works in the console and server/user interface), but I am trying to understand TDD and write good tests, so I will appreciate any guidance.</p>\n\n<p>Lists model:</p>\n\n<pre><code>class List &lt; ActiveRecord::Base\n  has_many :quantities\n  has_many :foods, :through =&gt; :quantities\n  validates :days, presence: true\n  validates :name, uniqueness: { case_sensitive: false }\n\n  after_save do   \n    Quantity.create(food_id: rand(Food.count), list_id: self.id, amount: rand(6)) \n  end\nend\n</code></pre>\n\n<p>Quantities fixture:</p>\n\n<pre><code>one:\n  food: grape\n  list: weekend\n  amount: 1\ntwo:\n  food: banana\n  list: weekend\n  amount: 1\n</code></pre>\n\n<p>Note: the Quantities fixture was previously organized as follows ...</p>\n\n<pre><code>one:\n  food_id: 1\n  list_id: 1\n  amount: 1\n</code></pre>\n\n<p>... and it seems to make no difference.</p>\n\n<p>lists_create integration test:</p>\n\n<pre><code>require 'test_helper'\nclass ListsCreateTest &lt; ActionDispatch::IntegrationTest\n  test \"invalid list creation information\" do\n    get addlist_path\n    assert_no_difference 'List.count' do\n      post lists_path, list: { days:  \"a\",\n                               name: \"a\" * 141 }\n    end\n    assert_template 'lists/new'\n  end\n\n  test \"valid list creation information\" do\n    get addlist_path\n    assert_difference 'List.count', 1 do\n      post_via_redirect lists_path, list: {\n                                            days: 2,\n                                            name: \"example list\"\n                                          }\n      end\n      assert_template 'lists/show'\n  end\nend\n</code></pre>\n\n<p>And app/views/lists/show.html.erb referenced in the error:</p>\n\n<pre><code>&lt;% provide(:title, @list.name) %&gt;\n&lt;div class=\"row\"&gt;&lt;aside class=\"col-md-4\"&gt;&lt;section class=\"user_info\"&gt;\n      &lt;h1&gt; &lt;%= @list.name %&gt;&lt;/h1&gt;\n      &lt;p&gt;&lt;%= @list.days %&gt; day(s)&lt;/p&gt;&lt;p&gt;\n       &lt;% Quantity.where(:list_id =&gt; @list.id).each do |f| %&gt;\n       &lt;%= \"#{f.amount} #{Food.find(f.food_id).name}\" %&gt;\n       &lt;% end %&gt;\n      &lt;/p&gt;&lt;/section&gt;&lt;/aside&gt;&lt;/div&gt;&lt;%= link_to \"edit the properties of this list\", edit_list_path %&gt;\n</code></pre>\n\n<p>Thank you for any advice or references. Please let me know if you need other code or information that you consider relevant. I am hoping to accomplish this all using fixtures and not another method such as FactoryGirl, even if it means a little extra code.</p>\n\n<p>Rails 4.2.3, Cloud9. Development database = SQLite3, production database = postgres heroku.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "windows"], "comments": [{"owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1436375414, "post_id": 31299100, "comment_id": 50588876, "body": "In which line are you facing the error..."}, {"owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "edited": false, "score": 0, "creation_date": 1436375713, "post_id": 31299100, "comment_id": 50589051, "body": "the error is a generic one indicating that you are attempting to use a nil. in your case going to guess that you need to set the CUKES_OPT environment variable to successfully run it."}, {"owner": {"reputation": 1, "user_id": 5094592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/587f43589136343ebad06642294de70e?s=128&d=identicon&r=PG&f=1", "display_name": "fuegolego", "link": "https://stackoverflow.com/users/5094592/fuegolego"}, "reply_to_user": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1436375782, "post_id": 31299100, "comment_id": 50589090, "body": "@VamsiKrishna On lines 4 and on. I am using CMD w/ Ruby to run the command. (I am also new and don&#39;t know much of coding.)"}, {"owner": {"reputation": 1, "user_id": 5094592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/587f43589136343ebad06642294de70e?s=128&d=identicon&r=PG&f=1", "display_name": "fuegolego", "link": "https://stackoverflow.com/users/5094592/fuegolego"}, "reply_to_user": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "edited": false, "score": 0, "creation_date": 1436376001, "post_id": 31299100, "comment_id": 50589229, "body": "@Mircea how would I do that? I know I would go to system properties&gt;advanced&gt;Environmental Variables.. but I am lost after that."}, {"owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1436376064, "post_id": 31299100, "comment_id": 50589258, "body": "Which one is line 25 in that rake file..."}, {"owner": {"reputation": 1, "user_id": 5094592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/587f43589136343ebad06642294de70e?s=128&d=identicon&r=PG&f=1", "display_name": "fuegolego", "link": "https://stackoverflow.com/users/5094592/fuegolego"}, "reply_to_user": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1436376220, "post_id": 31299100, "comment_id": 50589348, "body": "@VamsiKrishna Yes, all of the second code is from the Rake file"}, {"owner": {"reputation": 1318, "user_id": 2202669, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3tiEd.png?s=128&g=1", "display_name": "fenceop", "link": "https://stackoverflow.com/users/2202669/fenceop"}, "reply_to_user": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1436376328, "post_id": 31299100, "comment_id": 50589419, "body": "@VamsiKrishna Line numbers changed because of my edit. Line 25 is the first <code>end</code>."}, {"owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 2, "creation_date": 1436376444, "post_id": 31299100, "comment_id": 50589507, "body": "try running rake with <code>rake users_creation CUKES_OPT=&lt;required value&gt;</code>"}, {"owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "reply_to_user": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1436376766, "post_id": 31299100, "comment_id": 50589690, "body": "@VamsiKrishna answered how to pass in CUKES_OPT :)"}, {"owner": {"reputation": 1, "user_id": 5094592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/587f43589136343ebad06642294de70e?s=128&d=identicon&r=PG&f=1", "display_name": "fuegolego", "link": "https://stackoverflow.com/users/5094592/fuegolego"}, "reply_to_user": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1436377359, "post_id": 31299100, "comment_id": 50590049, "body": "@VamsiKrishna what would I put as a required value? 1?"}, {"owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1436377746, "post_id": 31299100, "comment_id": 50590292, "body": "I&#39;m not sure about that...I don&#39;t know what that variable takes. You should be knowing that. Find out if it is an integer or string. Say if CUKES_OPT should be like 1,2,3 then the command should be <code>rake users_creation CUKES_OPT=1</code> or if CUKES_OPT should be like &#39;one&#39;, &#39;test&#39;, &#39;user&#39; then the command should be <code>rake users_creation CUKES_OPT=&#39;test&#39;</code> Thats all I can say."}, {"owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1436377917, "post_id": 31299100, "comment_id": 50590406, "body": "Or you can do one thing as you said it runs on Yosmite OSX. You can add a print line before <code>Cucumber::Rake::Task.new(&quot;#{suite[:id]}:run&quot;)</code> like   <code>puts ENV[&#39;CUKES_OPT&#39;]</code> run it in Yosmite and get the value and set it."}, {"owner": {"reputation": 1, "user_id": 5094592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/587f43589136343ebad06642294de70e?s=128&d=identicon&r=PG&f=1", "display_name": "fuegolego", "link": "https://stackoverflow.com/users/5094592/fuegolego"}, "reply_to_user": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1436379117, "post_id": 31299100, "comment_id": 50591190, "body": "@VamsiKrishna sorry I am really new to this. So I added the &#39;puts ENV[CUKES_OPT&#39;]&#39; line right before the one you mentioned. Now to get the value would I run the same &#39;rake users_creation&#39; command on Yosemite?"}, {"owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1436379289, "post_id": 31299100, "comment_id": 50591303, "body": "Yes. check whats getting printed. Just run using the same command how you used to run in Yosmite previously."}, {"owner": {"reputation": 1, "user_id": 5094592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/587f43589136343ebad06642294de70e?s=128&d=identicon&r=PG&f=1", "display_name": "fuegolego", "link": "https://stackoverflow.com/users/5094592/fuegolego"}, "edited": false, "score": 0, "creation_date": 1436388276, "post_id": 31299100, "comment_id": 50596652, "body": "I will continue to work around with it. I will post some results when I get the chance to."}], "owner": {"reputation": 1, "user_id": 5094592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/587f43589136343ebad06642294de70e?s=128&d=identicon&r=PG&f=1", "display_name": "fuegolego", "link": "https://stackoverflow.com/users/5094592/fuegolego"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 532, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1436376106, "creation_date": 1436374975, "last_edit_date": 1436376106, "question_id": 31299100, "link": "https://stackoverflow.com/questions/31299100/typeerror-no-implicit-conversion-from-nil-to-integer", "title": "TypeError: no implicit conversion from nil to integer", "body": "<p>I am running some automation tests on Windows using Ruby and IEDriverServer.exe. When I run the <code>rake users_creation</code> command I get this error and I don't know what it means:</p>\n\n<pre><code>C:\\Users\\SolaresIntern\\Desktop\\Developer\\Quality-Assurance&gt;rake users_creation\nC:/Ruby22-x64/bin/ruby -S bundle exec cucumber --require features features/users\n_creation/*.feature --profile html_report\nrake aborted!\nTypeError: no implicit conversion from nil to integer\nC:/Users/SolaresIntern/Desktop/Developer/Quality-Assurance/Rakefile:25:in `block\n (2 levels) in &lt;top (required)&gt;'\nTasks: TOP =&gt; users_creation\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>This led me into looking at the Rakefile and this is what's in there:</p>\n\n<pre><code>require 'cucumber/rake/task' require 'resque/tasks' require 'resque'\n\nrequire_relative 'lib/queue/start_script'\n\nSPEC_SUITES = [\n  { id: 'everything', title: 'All the testcases', features: \"features/**/*.feature\", done: false },\n  { id: 'class_creation', title: 'Teacher adds a class', features: \"features/class_managing/*.feature\", done: false },\n  { id: 'users_creation', title: 'Sign up students and teachers', features: \"features/users_creation/*.feature\", done: false },\n  { id: 'join_a_class', title: 'Student joins a class', features: \"features/students_dashboard/join_a_class.feature\", done: false },\n  { id: 'create_assignment', title: 'Create an assignment', features: \"features/lessons_assignments/*.feature\", done: false},\n  { id: 'join_class_with_assignment', title: 'Student joins a class with assignments', features: \"features/students_dashboard/join_a_class_with_assignments.feature\", done: false}\n]\n\nSPEC_SUITES.each do |suite|\n  desc \"Ejecuta todos los specs en la suite #{suite[:title]}\"\n# task \"#{suite[:id]}\", [:entorno, :browser] do |t, args|\n  task \"#{suite[:id]}\" do |t|\n#   args.with_defaults(:entorno =&gt; ENV['ENTORNO'], :browser =&gt; ENV['BROWSER'])\n#   ENV['ENTORNO']=args.entorno.downcase\n#   ENV['BROWSER']=args.browser\n    Rake::Task[\"#{suite[:id]}:run\"].execute\n  end\n\n  Cucumber::Rake::Task.new(\"#{suite[:id]}:run\") do |t|\n    t.cucumber_opts = \"--require features #{suite[:features]} --profile html_report #{ENV['CUKES_OPT']}\"\n  end\nend\n\ndesc \"Enqueue a Test\"\n\ntask :enqueue, [:entorno, :browser, :test, :cukes_opt] do |t, args|\n  params = Hash.new\n  params[:cukes_opt]=args.cukes_opt\n  params[:entorno]=args.entorno\n  params[:browser]=args.browser\n  params[:test]=args.test\n# Resque.redis = '10.254.21.185:6379'\n  Resque.enqueue(StartScript,params)\nend\n</code></pre>\n\n<p>Everything runs smoothly on OSX Yosemite. I only have this problem on Windows.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "get", "rest-client", "onenote"], "answers": [{"tags": [], "owner": {"reputation": 79, "user_id": 4589973, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b7c1a9f294fbc038c47e9a240f10ae3d?s=128&d=identicon&r=PG", "display_name": "komplexb", "link": "https://stackoverflow.com/users/4589973/komplexb"}, "is_accepted": true, "score": 0, "last_activity_date": 1436400039, "creation_date": 1436400039, "answer_id": 31305897, "question_id": 31298925, "link": "https://stackoverflow.com/questions/31298925/unable-to-retrieve-notes-with-the-onenote-api/31305897#31305897", "title": "Unable to retrieve notes with the OneNote API", "body": "<p>Looks as if the issue was with how headers and params are combined for <code>GET</code> requests in rest-client library, as seen <a href=\"https://github.com/rest-client/rest-client/blob/master/README.rdoc#passing-advanced-options\" rel=\"nofollow\">here</a>. Corrected <a href=\"https://gist.github.com/komplexb/347b7dd61ed3338ab6f4#file-get_page_in_section-rb\" rel=\"nofollow\">get_page_in_section</a> method.</p>\n"}], "owner": {"reputation": 79, "user_id": 4589973, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b7c1a9f294fbc038c47e9a240f10ae3d?s=128&d=identicon&r=PG", "display_name": "komplexb", "link": "https://stackoverflow.com/users/4589973/komplexb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 31305897, "answer_count": 1, "score": 0, "last_activity_date": 1436400039, "creation_date": 1436374381, "last_edit_date": 1436375440, "question_id": 31298925, "link": "https://stackoverflow.com/questions/31298925/unable-to-retrieve-notes-with-the-onenote-api", "title": "Unable to retrieve notes with the OneNote API", "body": "<p>Aim: Use Rails to retrieve list of notes in a defined section. As seen in lines 249-287 of <a href=\"https://github.com/OneNoteDev/OneNoteAPISampleWinUniversal/blob/master/OneNoteServiceSamplesWinUniversal.Shared/OneNoteApi/Pages/GetPagesExample.cs\" rel=\"nofollow\">GetPagesExample.cs</a><br>\nProblem: Receiving 401 when I attempt a <code>GET</code>. <a href=\"https://msdn.microsoft.com/EN-US/library/office/dn575430.aspx\" rel=\"nofollow\">Documentation</a> indicates \"<strong>401 - Unauthorized</strong> Problems occurred in authenticating the token, user or your app\".</p>\n\n<p>I'm using the <a href=\"https://github.com/OneNoteDev/OneNoteAPISampleRuby\" rel=\"nofollow\">OneNoteAPISampleRuby</a> as baseline, to achieve this. The sample comes with examples of how to <code>POST</code> but no examples of how to <code>GET</code>. Posting from the sample app in my local environment works fine. I know that doing a <code>GET</code> on this request URL <code>https://www.onenote.com/api/v1.0/sections/{sectionId}/pages</code> works in the <a href=\"https://apigee.com/onenote/embed/console/onenote\" rel=\"nofollow\">OneNote API Console</a>. This is the URL i'm trying to get to work from my modifications to the sample app.</p>\n\n<p>My modifications are as follows:<br>\n<code>&lt;button type=\"submit\" name=\"submit\" value=\"quotes\"&gt;Get Quotes&lt;/button&gt;</code> at line 10 of <a href=\"https://github.com/OneNoteDev/OneNoteAPISampleRuby/blob/master/app/views/welcome/index.html.erb\" rel=\"nofollow\">index.html.erb</a></p>\n\n<pre><code>when 'quotes'\n    result = onenote_client.get_page_in_section(access_token)\n</code></pre>\n\n<p>at line 29 of <a href=\"https://github.com/OneNoteDev/OneNoteAPISampleRuby/blob/master/app/controllers/welcome_controller.rb\" rel=\"nofollow\">welcome_controller.rb</a></p>\n\n<p>I added a <code>get_page_in_section</code> method to <a href=\"https://github.com/OneNoteDev/OneNoteAPISampleRuby/blob/master/lib/one_note_sharer.rb\" rel=\"nofollow\">one_note_sharer.rb</a> as seen here: <a href=\"https://gist.github.com/komplexb/347b7dd61ed3338ab6f4\" rel=\"nofollow\">https://gist.github.com/komplexb/347b7dd61ed3338ab6f4</a><br>\nIt uses the <a href=\"https://github.com/rest-client/rest-client\" rel=\"nofollow\">rest-client</a> gem for the <code>POST</code> examples, so I've been looking at the docs for how to use <code>GET</code> but it appears I've hit a wall.</p>\n\n<p>I noticed someone had a similar problem <a href=\"https://stackoverflow.com/questions/26453800/get-onenote-pages-through-its-web-api/26454100#26454100\">here</a>, however that answer hasn't been useful for me, since scope <code>office.onenote</code> should give me read access at least according to the <a href=\"https://msdn.microsoft.com/en-us/library/office/dn807159(v=office.15).aspx\" rel=\"nofollow\">documentation</a>.</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "yaml", "database-migration"], "answers": [{"tags": [], "owner": {"reputation": 2028, "user_id": 1657377, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/4iVGJ.png?s=128&g=1", "display_name": "jethroo", "link": "https://stackoverflow.com/users/1657377/jethroo"}, "is_accepted": false, "score": 0, "last_activity_date": 1436390579, "creation_date": 1436390579, "answer_id": 31304040, "question_id": 31298643, "link": "https://stackoverflow.com/questions/31298643/change-connection-name-for-multiple-databases/31304040#31304040", "title": "Change connection name for multiple databases", "body": "<p><code>development</code> is the environment the rails app is running in if started locally and is configured via the <code>database.yml</code> for this environment so your models will \"fallback\" to the default database configuration of <code>development</code>. If you want them connect to <code>db1_development</code> you will have to tell the models explicitly like you do with db2 established connections. If you dont follow the convention over configuration you have to be explicit. Or you might ask yourself why you dont want to stick to the conventions in the first place. </p>\n"}], "owner": {"reputation": 27, "user_id": 4498517, "user_type": "registered", "profile_image": "https://graph.facebook.com/554879743/picture?type=large", "display_name": "Stefania F. Cardenas", "link": "https://stackoverflow.com/users/4498517/stefania-f-cardenas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436390579, "creation_date": 1436373463, "question_id": 31298643, "link": "https://stackoverflow.com/questions/31298643/change-connection-name-for-multiple-databases", "title": "Change connection name for multiple databases", "body": "<p>I am using two different databases for my rails app. I connect my user model to a second database by adding the line below into user.rb</p>\n\n<p><code>establish_connection \"db2_#{Rails.env}\"</code></p>\n\n<p>I am using multi-database-migrations gem <a href=\"https://github.com/azitabh/multi-database-migrations\" rel=\"nofollow\">https://github.com/azitabh/multi-database-migrations</a> and it works fine when I run </p>\n\n<pre><code>rake db:multi:migrate DATABASE=db2\n</code></pre>\n\n<p>At the moment my database.yml looks like this:</p>\n\n<pre><code>development:\n  adapter: mysql2\n  encoding: utf8\n  database: database_name\n  pool: 5\n  username: root\n  password:\n\ndb2_development:\n  adapter: mysql2\n  encoding: utf8\n  database: database_name\n  pool: 5\n  username: root\n  password:\n</code></pre>\n\n<p>but I want it to look like this</p>\n\n<pre><code>db1_development:\n  adapter: mysql2\n  encoding: utf8\n  database: database_name\n  pool: 5\n  username: root\n  password:\n\ndb2_development:\n  adapter: mysql2\n  encoding: utf8\n  database: database_name\n  pool: 5\n  username: root\n  password:\n</code></pre>\n\n<p>My question is where should I tell rails to look for \"db1_#{Rails.env}\" ?</p>\n\n<p>I was thinking to add something like this in my application.rb:</p>\n\n<pre><code>ENV['ENV'] ||= 'development'\n\ndb_conf = YAML::load(File.read(\"config/database.yml\"))\n\nDB1_CONF = db_conf[\"db1_#{Rails.env}\"][ENV['ENV']]\nDB2_CONF = db_conf[\"db2_#{Rails.env}\"][ENV['ENV']]\n</code></pre>\n\n<p>but I'm not sure where I should call the constants DB1_CONF.</p>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "params"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 1, "creation_date": 1436373068, "post_id": 31298463, "comment_id": 50587446, "body": "Can you post your server log generated while submitting the form?"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1436375834, "post_id": 31298463, "comment_id": 50589128, "body": "How you are initialising <code>@subscription</code> in your controller? Please post the code."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1436378157, "post_id": 31298463, "comment_id": 50590559, "body": "Can you post your <code>new</code> method and <code>routes</code> file?"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1436378828, "post_id": 31298463, "comment_id": 50591003, "body": "What happens when you change <code>@convocation = @subscription.convocations.build(convocation_params)</code> to <code>@convocation = Convocation.new(convocation_params)</code> with your original code."}, {"owner": {"reputation": 2285, "user_id": 4620141, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/10152601898256854/picture?type=large", "display_name": "David Geismar", "link": "https://stackoverflow.com/users/4620141/david-geismar"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1436378980, "post_id": 31298463, "comment_id": 50591108, "body": "nothing, it&#39;s exaxctly the same as before"}], "answers": [{"comments": [{"owner": {"reputation": 2285, "user_id": 4620141, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/10152601898256854/picture?type=large", "display_name": "David Geismar", "link": "https://stackoverflow.com/users/4620141/david-geismar"}, "edited": false, "score": 0, "creation_date": 1436375681, "post_id": 31298600, "comment_id": 50589029, "body": "I did what you said but now I get another error : <code>found unpermitted parameters: utf8, authenticity_token, commit, subscription_id</code>"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 2285, "user_id": 4620141, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/10152601898256854/picture?type=large", "display_name": "David Geismar", "link": "https://stackoverflow.com/users/4620141/david-geismar"}, "edited": false, "score": 0, "creation_date": 1436376131, "post_id": 31298600, "comment_id": 50589298, "body": "@DavidGeismar What happens when you change <code>params.permit(:hour, :date)</code> to <code>params.permit(:hour, :date, :utf8,  :_method, :authenticity_token, :subscription_id)</code>?"}, {"owner": {"reputation": 2285, "user_id": 4620141, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/10152601898256854/picture?type=large", "display_name": "David Geismar", "link": "https://stackoverflow.com/users/4620141/david-geismar"}, "edited": false, "score": 0, "creation_date": 1436376691, "post_id": 31298600, "comment_id": 50589641, "body": "I get <code>unknown attribute &#39;utf8&#39; for Convocation.</code>"}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": false, "score": 1, "last_activity_date": 1436373353, "creation_date": 1436373353, "answer_id": 31298600, "question_id": 31298463, "link": "https://stackoverflow.com/questions/31298463/creation-form-for-nested-ressource-returns-params-error-in-rails/31298600#31298600", "title": "Creation form for nested ressource returns params error in rails", "body": "<p>As per your generated params, this line</p>\n\n<pre><code>params.require(:convocation).permit(:hour, :date)\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>params.permit(:hour, :date)\n</code></pre>\n\n<p>As stated <a href=\"http://api.rubyonrails.org/classes/ActionController/Parameters.html\" rel=\"nofollow\"><strong>here</strong></a> under the <strong><em>require(key)</em></strong> section, it says</p>\n\n<blockquote>\n  <p>Ensures that a parameter is present. If it's present, returns the\n  parameter at the given key, otherwise raises an\n  ActionController::ParameterMissing error.</p>\n</blockquote>\n\n<p>Your params are generated without the <strong><em>convocation</em></strong> parameter, so is the error.</p>\n"}], "owner": {"reputation": 2285, "user_id": 4620141, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/10152601898256854/picture?type=large", "display_name": "David Geismar", "link": "https://stackoverflow.com/users/4620141/david-geismar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436378555, "creation_date": 1436372924, "last_edit_date": 1436378555, "question_id": 31298463, "link": "https://stackoverflow.com/questions/31298463/creation-form-for-nested-ressource-returns-params-error-in-rails", "title": "Creation form for nested ressource returns params error in rails", "body": "<p>I have a table Convocations \nit has a column date, a column time and a column subscription_id\nMy convocation/new.html looks like this</p>\n\n<pre><code>&lt;div class=\"row\"&gt;\n      &lt;div class=\"col-xs-offset-4 col-xs-5\"&gt;\n        &lt;%= form_tag subscription_convocations_path(@subscription) do %&gt;\n          &lt;div class=\"form-group\"&gt;\n            &lt;%= label_tag :date, \"Date\" %&gt;\n            &lt;%= text_field_tag :date, nil, class: \"form-control datepicker\" %&gt;\n          &lt;/div&gt;\n          &lt;div class=\"form-group\"&gt;\n            &lt;%= label_tag :hour, \"Heure de la convocation\" %&gt;\n            &lt;%= time_field_tag :hour, nil, class: 'form-control' %&gt;\n          &lt;/div&gt;\n          &lt;%= submit_tag \"Envoyer la convocation\", class: \"btn btn-primary\" %&gt;\n        &lt;% end %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p>my controller action convocation#create looks like this :</p>\n\n<pre><code> def create\n    @convocation = @subscription.convocations.build(convocation_params)\n    authorize @convocation\n    @convocation.save\n    @notification = Notification.new\n    @notification.user = @subscription.user\n    @notification.content = \"Vous \u00eates convoqu\u00e9 \u00e0 #{@convocation.subscription.tournament.name} le #{@convocation.date.strftime(\"le %d/%m/%Y\")} \u00e0 #{@convocation.hour.strftime(\" \u00e0 %Hh%M\")}\"\n    @notification.save\n    redirect_to tournament_subscriptions_path(@subscription.tournament)\n  end\n</code></pre>\n\n<p>and finally my convocation_params :</p>\n\n<pre><code>def convocation_params\n    if current_user.judge?\n      params.require(:convocation).permit(:hour, :date)\n    else\n      params.require(:convocation).permit(:status)\n    end\n  end\n</code></pre>\n\n<p>when ever I fill my form in convocation/new.html - I get this error :</p>\n\n<p>param is missing or the value is empty: convocation\nand the highlighted line of code is this one in def <code>convocation_params</code>:</p>\n\n<pre><code>params.require(:convocation).permit(:hour, :date)\n</code></pre>\n\n<p>what's going wrong here ?</p>\n\n<pre><code>Logs :\nStarted POST \"/subscriptions/25/convocations\" for ::1 at 2015-07-08 17:32:03 +0100\nProcessing by ConvocationsController#create as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"cL8ESx4QRY+omoK9tuZczYzFBQZyZU81xTUQDT0kWJbNAVU2ruMF9gcxLLnBrNcNiHRjcvsjDwrM0n2lrSKJWg==\", \"date\"=&gt;\"10/07/2015\", \"hour\"=&gt;\"15:00\", \"commit\"=&gt;\"Envoyer la convocation\", \"subscription_id\"=&gt;\"25\"}\n  User Load (33.2ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1  ORDER BY \"users\".\"id\" ASC LIMIT 1  [[\"id\", 2]]\n  Subscription Load (0.4ms)  SELECT  \"subscriptions\".* FROM \"subscriptions\" WHERE \"subscriptions\".\"id\" = $1 LIMIT 1  [[\"id\", 25]]\nCompleted 400 Bad Request in 128ms\n</code></pre>\n\n<p>I initialize @subscription with a before_action :</p>\n\n<pre><code>class ConvocationsController &lt; ApplicationController\n  before_action :find_subscription, except: [:multiple_new, :multiple_create]\n</code></pre>\n\n<p>then</p>\n\n<pre><code>  def find_subscription\n    if params[:subscription_id] != nil\n      @subscription = Subscription.find(params[:subscription_id])\n    else\n      @convocation = Convocation.find(params[:id])\n    end\n\n  end\n</code></pre>\n\n<p>My convocation/new method :</p>\n\n<p>def new\n    @convocation = @subscription.convocations.build\n    authorize @convocation\n  end</p>\n\n<p>my routes related to convocations:</p>\n\n<pre><code>                  multiple_new POST     /tournaments/:tournament_id/convocations/multiple_new(.:format)    convocations#multiple_new\n                multiple_create POST     /tournaments/:tournament_id/convocation/multiple_create(.:format)  convocations#multiple_create\n      subscription_convocations POST     /subscriptions/:subscription_id/convocations(.:format)             convocations#create\n   new_subscription_convocation GET      /subscriptions/:subscription_id/convocations/new(.:format)         convocations#new\n           convocation_messages GET      /convocations/:convocation_id/messages(.:format)                   messages#index\n                                POST     /convocations/:convocation_id/messages(.:format)                   messages#create\n        new_convocation_message GET      /convocations/:convocation_id/messages/new(.:format)               messages#new\n       edit_convocation_message GET      /convocations/:convocation_id/messages/:id/edit(.:format)          messages#edit\n            convocation_message GET      /convocations/:convocation_id/messages/:id(.:format)               messages#show\n                                PATCH    /convocations/:convocation_id/messages/:id(.:format)               messages#update\n                                PUT      /convocations/:convocation_id/messages/:id(.:format)               messages#update\n                                DELETE   /convocations/:convocation_id/messages/:id(.:format)               messages#destroy\n               edit_convocation GET      /convocations/:id/edit(.:format)                                   convocations#edit\n                    convocation PATCH    /convocations/:id(.:format)                                        convocations#update\n                                PUT      /convocations/:id(.:format)                                        convocations#update\n</code></pre>\n"}, {"tags": ["ruby", "cucumber", "rubymine-7"], "answers": [{"comments": [{"owner": {"reputation": 693, "user_id": 4086794, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f35dcbd75a6c6509156cc3f908a413d8?s=128&d=identicon&r=PG&f=1", "display_name": "Chuchoo", "link": "https://stackoverflow.com/users/4086794/chuchoo"}, "edited": false, "score": 0, "creation_date": 1436380857, "post_id": 31298782, "comment_id": 50592220, "body": "Thanks mrtyormaa. It would be more helpful to know if somebody has scheduled their cucumber feature file to run on a daily basis. I am not quite sure how to put .feature file in the cron job."}], "tags": [], "owner": {"reputation": 582, "user_id": 1615864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qChmv.png?s=128&g=1", "display_name": "mrtyormaa", "link": "https://stackoverflow.com/users/1615864/mrtyormaa"}, "is_accepted": false, "score": 2, "last_activity_date": 1436373913, "last_edit_date": 1495540697, "creation_date": 1436373913, "answer_id": 31298782, "question_id": 31298047, "link": "https://stackoverflow.com/questions/31298047/scheduling-cucumber-test-features-to-run-repeatedly/31298782#31298782", "title": "Scheduling Cucumber test features to run repeatedly", "body": "<p>You can create a cron job which will execute a rake.</p>\n\n<blockquote>\n  <p>The software utility Cron is a time-based job scheduler in Unix-like\n  computer operating systems. People who set up and maintain software\n  environments use cron to schedule jobs (commands or shell scripts) to\n  run periodically at fixed times, dates, or intervals.</p>\n</blockquote>\n\n<p>These links might help</p>\n\n<p><a href=\"https://stackoverflow.com/questions/878600/how-to-create-cronjob-using-bash\">How to create a cron job using Bash</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/12066489/how-to-create-a-cron-job-to-run-a-ruby-script\">how to create a cron job to run a ruby script?</a></p>\n\n<p><a href=\"http://rake.rubyforge.org/\" rel=\"nofollow noreferrer\">http://rake.rubyforge.org/</a></p>\n"}, {"tags": [], "owner": {"reputation": 693, "user_id": 4086794, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f35dcbd75a6c6509156cc3f908a413d8?s=128&d=identicon&r=PG&f=1", "display_name": "Chuchoo", "link": "https://stackoverflow.com/users/4086794/chuchoo"}, "is_accepted": true, "score": 0, "last_activity_date": 1436470269, "creation_date": 1436470269, "answer_id": 31326615, "question_id": 31298047, "link": "https://stackoverflow.com/questions/31298047/scheduling-cucumber-test-features-to-run-repeatedly/31326615#31326615", "title": "Scheduling Cucumber test features to run repeatedly", "body": "<p>I solved the problem by simply installing Jenkins on my machine from its official site,<a href=\"https://jenkins-ci.org/\" rel=\"nofollow\">https://jenkins-ci.org/</a>. I configured master and slave nodes on my own machine because I just needed to run one feature file(it has the script I want to run on daily basis).</p>\n\n<p>Although, it is recommended to configure slave on a different machine if we have multiple jobs to run and our jobs are resource intensive.</p>\n\n<p>There is a very good illustration on installing, configuring and running jobs in this link <a href=\"http://yakiloo.com/setup-jenkins-and-windows/\" rel=\"nofollow\">http://yakiloo.com/setup-jenkins-and-windows/</a></p>\n"}], "owner": {"reputation": 693, "user_id": 4086794, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f35dcbd75a6c6509156cc3f908a413d8?s=128&d=identicon&r=PG&f=1", "display_name": "Chuchoo", "link": "https://stackoverflow.com/users/4086794/chuchoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1073, "favorite_count": 0, "accepted_answer_id": 31326615, "answer_count": 2, "score": 0, "last_activity_date": 1436470269, "creation_date": 1436371753, "last_edit_date": 1436372111, "question_id": 31298047, "link": "https://stackoverflow.com/questions/31298047/scheduling-cucumber-test-features-to-run-repeatedly", "title": "Scheduling Cucumber test features to run repeatedly", "body": "<p>I have a Cucumber test (feature files) in the RubyMine IDE and lately I have a need to execute one of the feature repeatedly on a scheduled time.</p>\n\n<p>I haven't found a way to do so. Any idea or thoughts on scheduling that feature file? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bundler"], "comments": [{"owner": {"reputation": 17201, "user_id": 788770, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/cf81cd99ac72c57c62d7c0c329e16518?s=128&d=identicon&r=PG", "display_name": "Pierre-Louis Gottfrois", "link": "https://stackoverflow.com/users/788770/pierre-louis-gottfrois"}, "edited": false, "score": 0, "creation_date": 1436370874, "post_id": 31297675, "comment_id": 50586026, "body": "<code>username:password</code> what is this?"}, {"owner": {"reputation": 9125, "user_id": 671422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/85da2a1fa3e4017815ff5d3a3d70fabe?s=128&d=identicon&r=PG", "display_name": "Yule", "link": "https://stackoverflow.com/users/671422/yule"}, "edited": false, "score": 0, "creation_date": 1436370905, "post_id": 31297675, "comment_id": 50586048, "body": "Any reason you&#39;re sepcifying username/password? Is it a private repo?"}, {"owner": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "edited": false, "score": 0, "creation_date": 1436370994, "post_id": 31297675, "comment_id": 50586112, "body": "Yes it&#39;s a private repo. I want to make it public, but first I am looking to get everything working."}, {"owner": {"reputation": 9125, "user_id": 671422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/85da2a1fa3e4017815ff5d3a3d70fabe?s=128&d=identicon&r=PG", "display_name": "Yule", "link": "https://stackoverflow.com/users/671422/yule"}, "edited": false, "score": 0, "creation_date": 1436371261, "post_id": 31297675, "comment_id": 50586277, "body": "can you do a git clone using the same syntax?"}], "answers": [{"comments": [{"owner": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "edited": false, "score": 0, "creation_date": 1436372635, "post_id": 31298300, "comment_id": 50587139, "body": "That will sort of work, but it would be great to understand why this is happening."}, {"owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "reply_to_user": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "edited": false, "score": 0, "creation_date": 1436372834, "post_id": 31298300, "comment_id": 50587300, "body": "Yeah, like I said not ideal. Might have something to do with your public key, but hard to say without knowing more. This answer is pretty much a workaround."}, {"owner": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "edited": false, "score": 0, "creation_date": 1436372901, "post_id": 31298300, "comment_id": 50587343, "body": "Public key? I am using basic authentication and can clone fine, would that still relate?"}, {"owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "reply_to_user": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "edited": false, "score": 0, "creation_date": 1436373088, "post_id": 31298300, "comment_id": 50587458, "body": "What happens if you just do this: gem &#39;moodle-api&#39;, :git =&gt; &#39;<a href=\"https://github.com/&lt;username&gt;/moodle-api.git\" rel=\"nofollow noreferrer\">github.com/&lt;username&gt;/moodle-api.git</a>&#39;"}], "tags": [], "owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "is_accepted": false, "score": 1, "last_activity_date": 1436372481, "creation_date": 1436372481, "answer_id": 31298300, "question_id": 31297675, "link": "https://stackoverflow.com/questions/31297675/bundle-install-not-installing-gem-from-github/31298300#31298300", "title": "Bundle install not installing gem from github", "body": "<p>If you really just want to get the gem up and working locally you can try downloading it and placing in vendor/gems, and adding this to your Gemfile:</p>\n\n<pre><code>gem 'moodle-api', path: 'vendor/gems/moodle-api'\n</code></pre>\n\n<p>If the gem works you can make the repo public and see if you still have issues grabbing it with bundler. Might not be ideal, but it will at least allow you to play with the gem before making it public.</p>\n"}], "owner": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1185, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1560915243, "creation_date": 1436370660, "last_edit_date": 1495540697, "question_id": 31297675, "link": "https://stackoverflow.com/questions/31297675/bundle-install-not-installing-gem-from-github", "title": "Bundle install not installing gem from github", "body": "<p>I am trying to import a gem directly from github into my application and I keep getting the error below.</p>\n\n<pre><code>Updating https://username:password@github.com/my-repo/moodle-api.git\nFetching gem metadata from https://rubygems.org/...........\nFetching version metadata from https://rubygems.org/...\nFetching dependency metadata from https://rubygems.org/..\nCould not find gem 'moodle-api (&gt;= 0) ruby' in https://username:password@github.com/my-repo/moodle-api.git (at\nv1.1).\nSource does not contain any versions of 'moodle-api (&gt;= 0) ruby'\n</code></pre>\n\n<p>I have found multiple posts with similar problems but none of the solutions seem to work.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/12904695/bundle-install-error-source-does-not-contain-any-versions-of\">Bundle install error: Source does not contain any versions of</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/4023087/could-not-find-gem-error-when-specifying-a-forked-version-of-a-gem-from-github\">&#39;Could not find gem&#39; error when specifying a forked version of a gem from Github in my gemfile</a></p>\n\n<p>I am importing it using</p>\n\n<pre><code>gem 'moodle-api', :git =&gt; 'https://username:password@github.com/my-repo/moodle-api.git', :tag =&gt; 'v1.1'\n</code></pre>\n\n<p>The name of the gem is moodle-api and the gemspec file has the name moodle-api.gemspec. The version is setup correctly as well.</p>\n\n<p>Any ideas? I am pretty stumped.</p>\n"}, {"tags": ["ruby", "regex", "gsub"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 5, "creation_date": 1436369750, "post_id": 31297220, "comment_id": 50585259, "body": "A bit of advice: post <i>code</i>, not <i>screenshots</i> of code."}, {"owner": {"reputation": 52749, "user_id": 1400768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tM0N8.png?s=128&g=1", "display_name": "nhahtdh", "link": "https://stackoverflow.com/users/1400768/nhahtdh"}, "edited": false, "score": 1, "creation_date": 1436370345, "post_id": 31297220, "comment_id": 50585673, "body": "I guess that the second call to the same code works, because the first call assigns those variables with the matches."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1436374596, "post_id": 31297220, "comment_id": 50588411, "body": "Further to @Sergio&#39;s suggestion, you should post code, rather than a screenshot, so that readers who wish to post an answer can simply cut-and-paste the parts of your code they need.  If you enter <code>puts &#39;hi&#39;</code> in IRB, and the line reads <code>2.2.0 :053 &gt; puts &quot;hi&quot;</code>, please do not include <code>2.2.0 :053 &gt; </code> in your question, again, so that readers don&#39;t have to strip that off.  Please edit. Also, be sure to assign variables to input data you use in examples (e.g, <code>arr = [1,2,3]</code>) so that answers can refer to those variables (e.g, <code>arr</code>) without having to define them in terms of the data."}, {"owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 0, "creation_date": 1436376172, "post_id": 31297220, "comment_id": 50589325, "body": "Finally, posting code as text offers better tag suggestions, syntax highlighting, and search results in Google"}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1436372352, "post_id": 31297510, "comment_id": 50586969, "body": "Mask the characters directly. It&#39;s faster and more easily understood and maintained."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1436372818, "post_id": 31297510, "comment_id": 50587289, "body": "The indices that correspond to the match are not fixed. It may be better to do <code>6...-4</code>."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1436372874, "post_id": 31297510, "comment_id": 50587327, "body": "@sawa: aren&#39;t all CC numbers exactly 16 digits long?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1436372935, "post_id": 31297510, "comment_id": 50587369, "body": "@SergioTulentsev I don&#39;t know about the reality, but the OP mentions the middle part is 3 to 6."}, {"owner": {"reputation": 7470, "user_id": 1262783, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/O9pU2.jpg?s=128&g=1", "display_name": "Guilherme", "link": "https://stackoverflow.com/users/1262783/guilherme"}, "edited": false, "score": 0, "creation_date": 1436374650, "post_id": 31297510, "comment_id": 50588442, "body": "I see that it works, but I still don&#39;t understand why the block has a different behavior from the method attribute. Besides that, your alternative method looks very simple and straightforward!"}, {"owner": {"reputation": 7470, "user_id": 1262783, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/O9pU2.jpg?s=128&g=1", "display_name": "Guilherme", "link": "https://stackoverflow.com/users/1262783/guilherme"}, "edited": false, "score": 0, "creation_date": 1436374714, "post_id": 31297510, "comment_id": 50588481, "body": "As a side note, some CC have 13 (old Visa) or 15 (Amex) digits rather than the most common 16."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1436377486, "post_id": 31297510, "comment_id": 50590124, "body": "A couple of small points: you can use <code>sub</code> rather than <code>gsub</code> and <code>s2 = s.sub...end</code> returns <code>s2</code>, so you don&#39;t have to write <code>s2 * =&gt;...</code>. No, some cc numbers <a href=\"https://en.wikipedia.org/wiki/Bank_card_number\" rel=\"nofollow noreferrer\">do not have 16 digits</a>."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1436378159, "post_id": 31297510, "comment_id": 50590560, "body": "@CarySwoveland: assignment to s2 is there to make <code># =&gt;</code> markers evaluate in textmate. It won&#39;t expand if I put at after <code>end</code> there."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 7470, "user_id": 1262783, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/O9pU2.jpg?s=128&g=1", "display_name": "Guilherme", "link": "https://stackoverflow.com/users/1262783/guilherme"}, "edited": false, "score": 1, "creation_date": 1436597612, "post_id": 31297510, "comment_id": 50690889, "body": "@Guilherme: added explanation why magic variables are nil in your case"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 5, "last_activity_date": 1436597540, "last_edit_date": 1436597540, "creation_date": 1436370230, "answer_id": 31297510, "question_id": 31297220, "link": "https://stackoverflow.com/questions/31297220/ruby-sub-match-groups-are-nil-when-it-should-not/31297510#31297510", "title": "Ruby: sub match groups are nil when it should not", "body": "<p>For more advanced substitutions such as this one, you should use the block form of <code>gsub</code>. Magic variables have values there.</p>\n\n<pre><code>s = '1234567890123456'\nrgx = /^([\\d]{6})([\\d]{3,6})([\\d]{4})$/\n\ns2 = s.gsub(rgx) do\n  $1 + '*' * $2.size + $3\nend\n\ns2 # =&gt; \"123456******3456\"\n</code></pre>\n\n<p>(in the non-block form matches are available as <code>\\1</code>, <code>\\2</code> and so on. Good for simple substitutions, but you can't call <code>.size</code> on them, etc.)</p>\n\n<p>Magic variable are not available in the argument form, because arguments are evaluated <strong>before</strong> invocation of the method. So, variables haven't been set yet. And if you were to call such a method twice, the second time you'll get matches from the first one. </p>\n\n<p>Alternatively, you can avoid all this regex voodoo and just mask characters directly</p>\n\n<pre><code>s3 = s.dup # don't touch the original string\ns3[6...-4] = '*' * (s.length - 4 - 6) # string of asterisks of variable length\ns3  # =&gt; \"123456******3456\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1099, "user_id": 2799029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eea432dc7b47d95cba6b39b0446feb5e?s=128&d=identicon&r=PG&f=1", "display_name": "floum", "link": "https://stackoverflow.com/users/2799029/floum"}, "is_accepted": false, "score": 1, "last_activity_date": 1436370499, "creation_date": 1436370499, "answer_id": 31297596, "question_id": 31297220, "link": "https://stackoverflow.com/questions/31297220/ruby-sub-match-groups-are-nil-when-it-should-not/31297596#31297596", "title": "Ruby: sub match groups are nil when it should not", "body": "<p>If you can replace characters in the number, I definitely would go for the solution Sergio Tulentsev suggested. If not :</p>\n\n<pre><code>c[0..5] + '*' * (c.size - 10) + c[-4..-1]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1436376883, "creation_date": 1436376883, "answer_id": 31299739, "question_id": 31297220, "link": "https://stackoverflow.com/questions/31297220/ruby-sub-match-groups-are-nil-when-it-should-not/31299739#31299739", "title": "Ruby: sub match groups are nil when it should not", "body": "<p>You can use <code>sub</code> without capture groups or a block as follows:</p>\n\n<pre><code>r = /\n    (?&lt;=^.{6}) # match any 6 chars at beginning of string in a positive lookbehind\n    .+         # match any number of any character, greedily\n    (?=.{4}$)  # match any 4 chars at end of string in a positive lookahead\n    /x         # extended option\n\ns.sub(r, '*'*(s.size-10))\n  #=&gt; \"123456******3456\" \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5743, "user_id": 977687, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/67ddb32384a4b119e289644190aadad3?s=128&d=identicon&r=PG", "display_name": "Caio Tarifa", "link": "https://stackoverflow.com/users/977687/caio-tarifa"}, "edited": false, "score": 0, "creation_date": 1438261170, "post_id": 31724459, "comment_id": 51385044, "body": "Awesome, complete and simple solution with any string size. :)"}], "tags": [], "owner": {"reputation": 1497, "user_id": 1006398, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f83262f6f5908e9fb61d743a66644ea6?s=128&d=identicon&r=PG", "display_name": "Hugo Demiglio", "link": "https://stackoverflow.com/users/1006398/hugo-demiglio"}, "is_accepted": false, "score": 1, "last_activity_date": 1438261109, "creation_date": 1438261109, "answer_id": 31724459, "question_id": 31297220, "link": "https://stackoverflow.com/questions/31297220/ruby-sub-match-groups-are-nil-when-it-should-not/31724459#31724459", "title": "Ruby: sub match groups are nil when it should not", "body": "<p>You can do this without multiplying ' * ' with string size.</p>\n\n<pre><code>'1234123412341234'.gsub(/(?&lt;=......).(?=....)/, '*')\n\n=&gt; \"123412******1234\"\n</code></pre>\n"}], "owner": {"reputation": 7470, "user_id": 1262783, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/O9pU2.jpg?s=128&g=1", "display_name": "Guilherme", "link": "https://stackoverflow.com/users/1262783/guilherme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 310, "favorite_count": 1, "accepted_answer_id": 31297510, "answer_count": 4, "score": 0, "last_activity_date": 1438261109, "creation_date": 1436369484, "last_edit_date": 1436374893, "question_id": 31297220, "link": "https://stackoverflow.com/questions/31297220/ruby-sub-match-groups-are-nil-when-it-should-not", "title": "Ruby: sub match groups are nil when it should not", "body": "<p>I am trying to get a credit card number string and mask the middle numbers with asterisks.\nI use the regex <code>/^([\\d]{6})([\\d]{3,6})([\\d]{4})$/</code> to match three groups:</p>\n\n<ul>\n<li>First 6 digits</li>\n<li>Middle digits (3 to 6) that will be obfuscated</li>\n<li>Last 4 digits</li>\n</ul>\n\n<p>As you can see from my console below, <code>gsub</code> match groups are <code>nil</code> at first, until I use a literal string in the replacement attribute. Then when I try to run the initial call, it works.</p>\n\n<pre><code>2.0.0-p598 :001 &gt; c = \"5454545454545454\"\n =&gt; \"5454545454545454\"\n\n2.0.0-p598 :002 &gt; c.gsub(/^([\\d]{6})([\\d]{3,6})([\\d]{4})$/, $1 + '*' * $2.size + $3)\nNoMethodError: undefined method `size' for nil:NilClass\n    from (irb):2\n    from /Users/guilherme/.rvm/rubies/ruby-2.0.0-p598/bin/irb:12:in `&lt;main&gt;'\n\n2.0.0-p598 :003 &gt; c.gsub(/^([\\d]{6})([\\d]{3,6})([\\d]{4})$/, \"anything\")\n =&gt; \"anything\"\n\n2.0.0-p598 :004 &gt; c.gsub(/^([\\d]{6})([\\d]{3,6})([\\d]{4})$/, $1 + '*' * $2.size + $3)\n =&gt; \"545454******5454\"\n</code></pre>\n\n<p>Why does this happen? Is it a bug? How to fix this and make it work in the first try?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nginx", "passenger"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1436373487, "post_id": 31297166, "comment_id": 50587721, "body": "Welcome to Stack Overflow. Why don&#39;t you be the first to try it, and give us a summarization including benchmarks so we have hard data."}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 4819642, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NnmQ5OAfFaQ/AAAAAAAAAAI/AAAAAAAAAFk/RoUT0TZmbb8/photo.jpg?sz=128", "display_name": "mlepers", "link": "https://stackoverflow.com/users/4819642/mlepers"}, "edited": false, "score": 0, "creation_date": 1436512622, "post_id": 31301197, "comment_id": 50654027, "body": "Thank you Olivier, this is what I was searching for to convince me to migrate to passenger. I&#39;ll try it out on my config and will let you know the benefits."}], "tags": [], "owner": {"reputation": 566, "user_id": 4820428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a66b5402023aba0bbc0cc151f9e9402?s=128&d=identicon&r=PG", "display_name": "Olivier Buffon", "link": "https://stackoverflow.com/users/4820428/olivier-buffon"}, "is_accepted": false, "score": 12, "last_activity_date": 1436538563, "last_edit_date": 1436538563, "creation_date": 1436381332, "answer_id": 31301197, "question_id": 31297166, "link": "https://stackoverflow.com/questions/31297166/passenger-5-performance-compared-to-unicorn-thin-puma-etc/31301197#31301197", "title": "passenger 5 performance compared to unicorn/thin/puma/etc", "body": "<p>I recently migrated my app from Puma to Passenger.\nI have to say that I'm really happy about this move, especially because I'm hosting it on Heroku.</p>\n\n<p>Since I updated to Ruby 2.2, I had some memory issues with Puma due to Heroku memory limitation (512M). \nI tried a couple of different configurations but without success.\nSince I moved to Passenger, I saw the memory usage go down to almost half what I was consuming with Puma with the same number of server instances (3 in my case).</p>\n\n<p>Regarding the response time, it seems to be pretty much the same as before but with those memory improvements. Although, I reduced my number of Heroku dynos to handle the same number of requests.</p>\n\n<p>In conclusion, on my personal experience, Passenger helped me a lot reducing the memory used by the app but it didn't helped improving the average response time. Another good point is, regarding the Heroku pricing, it helped me a lot to reduce the cost of my hosting.</p>\n\n<p>I know this post is not really exhaustive without any benchmarks etc... But I thought that maybe you could find it interesting to have a personal experience on a migration from Puma to Passenger.</p>\n\n<p>Hope it helps :)</p>\n"}, {"comments": [{"owner": {"reputation": 83, "user_id": 4819642, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NnmQ5OAfFaQ/AAAAAAAAAAI/AAAAAAAAAFk/RoUT0TZmbb8/photo.jpg?sz=128", "display_name": "mlepers", "link": "https://stackoverflow.com/users/4819642/mlepers"}, "edited": false, "score": 0, "creation_date": 1436512416, "post_id": 31301792, "comment_id": 50653892, "body": "Thank you for the great response Chris. I&#39;m fairly new to the ruby world and don&#39;t know yet as much as I would like. I do agree each part of a server config must feat your use case. In my case, I&#39;m running a small resume/portfolio app on the smallest droplet available at digital ocean. It has 512Mb of ram and it gets overloaded quite fast by the ruby process which takes around 350Mb of ram. This causes some problem with the DB since the server struggles to open new connections at some point.  Regarding what @Olivier said Passenger might help me out here."}, {"owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "reply_to_user": {"reputation": 83, "user_id": 4819642, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NnmQ5OAfFaQ/AAAAAAAAAAI/AAAAAAAAAFk/RoUT0TZmbb8/photo.jpg?sz=128", "display_name": "mlepers", "link": "https://stackoverflow.com/users/4819642/mlepers"}, "edited": false, "score": 1, "creation_date": 1436514604, "post_id": 31301792, "comment_id": 50655204, "body": "Passenger is really great for that kind of stuff, because it works hard to try to share RAM between processes where possible. Puma with a single worker/multiple threads would be memory-friendly, too, though there are limitations on concurrency in the standard Ruby runtime (look up GIL/GVL if you want to know more). I would avoid pure forking servers like Unicorn if RAM is a prime concern."}, {"owner": {"reputation": 566, "user_id": 4820428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a66b5402023aba0bbc0cc151f9e9402?s=128&d=identicon&r=PG", "display_name": "Olivier Buffon", "link": "https://stackoverflow.com/users/4820428/olivier-buffon"}, "edited": false, "score": 0, "creation_date": 1436536480, "post_id": 31301792, "comment_id": 50669185, "body": "Amazing response @ChrisHeald ! Thx for sharing ! I wasn&#39;t aware about that possible vulnerability !"}], "tags": [], "owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "is_accepted": true, "score": 22, "last_activity_date": 1436384341, "last_edit_date": 1436384341, "creation_date": 1436383195, "answer_id": 31301792, "question_id": 31297166, "link": "https://stackoverflow.com/questions/31297166/passenger-5-performance-compared-to-unicorn-thin-puma-etc/31301792#31301792", "title": "passenger 5 performance compared to unicorn/thin/puma/etc", "body": "<p>Passenger 5 scores better on custom-picked benchmarks because it has a built-in caching layer (\"turbocaching\") that can avoid actually running your application code for identical requests in a short timeframe; it will not make your actual application code run any faster. This caching layer is only active in certain constrained situations, and is not likely to provide much benefit in the vast majority of actual cases. If you aren't careful, the caching layer may actually end up breaking your application - I demonstrated several <a href=\"https://gist.github.com/cheald/3a09b8590256f112f701\" rel=\"noreferrer\">security</a> <a href=\"https://gist.github.com/cheald/fe374c10df21d5c38a59\" rel=\"noreferrer\">vulnerabilities</a> due to the caching layer to Phusion during the 5 beta phase (which they fixed, at the cost of the caching layer not being able to cache nearly as much). IMO, the Raptor/Passenger 5 benchmarks are deceptive marketing fluff, and the caching layer exists primarily to win Hello World benchmarks, and you should probably just ignore them.</p>\n\n<p>That said, <strong>the speed of your application server is almost certainly insignificant in the scope of your overall application performance</strong>. Passenger is a great platform because it's extremely user-friendly, well-documented, has an absolutely fantastic installer, and handles a lot of the annoying crap for you out of the box. You should use Passenger if you need the functionality it provides and don't want to screw around with a ton of config stuff. If it doesn't fit your use case, use something else that does.</p>\n\n<p>If every last microsecond is of prime concern to you, you should measure <em>your</em> application's performance under various webservers and various workloads, and then pick the one that performs the best. Otherwise, use whatever you like the most and then switch once performance becomes an actual problem.</p>\n\n<p>Footnote: If you do use Passenger 5, be sure to read the <a href=\"https://blog.phusion.nl/2015/02/09/turbocaching-security-changes/\" rel=\"noreferrer\">Turbocaching security changes</a> article to be sure you don't accidentally make your application vulnerable to user data theft (or otherwise introduce bugs) through the turbocaching layer.</p>\n"}, {"tags": [], "owner": {"reputation": 17872, "user_id": 20816, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02f0ee0da223f90bb9996ef252e528c1?s=128&d=identicon&r=PG", "display_name": "Hongli", "link": "https://stackoverflow.com/users/20816/hongli"}, "is_accepted": false, "score": 2, "last_activity_date": 1436390860, "creation_date": 1436390860, "answer_id": 31304126, "question_id": 31297166, "link": "https://stackoverflow.com/questions/31297166/passenger-5-performance-compared-to-unicorn-thin-puma-etc/31304126#31304126", "title": "passenger 5 performance compared to unicorn/thin/puma/etc", "body": "<p>As others said, Passenger by itself doesn't make your app faster per se. Passenger itself has become a lot faster in version 5, but the app server is only a part of the response time. If your app is slow, then it doesn't matter how fast Passenger itself is.</p>\n\n<p>Having said that, Passenger differentiates itself from other app servers by <strong>actively helping you to make your app faster</strong>. Passenger's turbocache is one way through which Passenger helps you. The article <a href=\"http://www.akitaonrails.com/2015/05/20/dynamic-site-as-fast-as-a-static-generated-one-with-raptor\" rel=\"nofollow\">Dynamic Site as fast as a Static Generated One with Raptor</a> demonstrates a good use case for the turbocache. Passenger also provides an <a href=\"https://www.phusionpassenger.com/library/config/nginx/optimization.html\" rel=\"nofollow\">optimization guide</a> that gives you tips on how to optimize your app using Passenger settings.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user636044"}, "is_accepted": false, "score": 6, "last_activity_date": 1467581357, "last_edit_date": 1467581357, "creation_date": 1467578189, "answer_id": 38174106, "question_id": 31297166, "link": "https://stackoverflow.com/questions/31297166/passenger-5-performance-compared-to-unicorn-thin-puma-etc/38174106#38174106", "title": "passenger 5 performance compared to unicorn/thin/puma/etc", "body": "<p>First of all, let's just be clear, when we talk about server performance, the question is about how well the server scales as usage increases. If your server has one or very few human users, for most apps, you will get the same end-user experience regardless of which server you use because the bottle-neck will be the performance of Ruby, not the app server.</p>\n\n<hr>\n\n<p><strong><em>For medium and large apps:</em></strong></p>\n\n<p>So let's talk about scaling. The more CPU power and RAM you have, the more you can scale. Most servers run out of RAM faster than CPU power. So the key is to minimize the amount of RAM used per request. Each request the server receives will be handled by a process or a thread. Processes use a lot of RAM, threads use very little RAM. So the goal is simply to have lots of threads and few processes.</p>\n\n<p>Puma and Passenger Enterprise are both multi-threaded servers which will scale approximately the same. (Passenger's benchmarks claim to use 5MB less RAM per process, but this is negligible.) Passenger itself (the free version) is single threaded and <strong>will not</strong> scale as well as the paid Passenger Enterprise version or as well as Puma.</p>\n\n<p>So if you want maximum performance, you're choosing between Puma and Passenger Enterprise. The question then becomes, is Passenger Enterprise worth the financial cost vs is Puma worth the technical expertise cost. The answer depends on what's in your brain(s), what's in your bank account(s), and your general opportunity cost.</p>\n\n<p>Passenger Enterprise has some nice tools that hold your hand if you're not an expert system administrator. Puma also has some tools but they are not as powerful as what Passenger Enterprise provides. Puma requires system-level expertise if you want to get the same control and insights as Passenger Enterprise. (You can also use Puma without all the bells-and-whistles of Passenger Enterprise, but I want to keep this comparison \"apples-to-apples\").</p>\n\n<p>Personally, I'm a low-level guy who loves configuring servers so I prefer to trade my time rather than my money for an awesome Ruby server. Therefore, I use Puma. If you're not interested in configuring low-level stuff (or if you're a company that realizes software licenses are cheaper than administrator-developers), you might be better off with a paid Passenger Enterprise license.</p>\n\n<hr>\n\n<p><strong><em>For the guy running a $5 VPS (or similar low-resource, low-traffic environment):</em></strong></p>\n\n<p>What I said above is more for higher-traffic apps on servers with considerable resources. You're just trying to get by with basics, so it does not really apply to you.</p>\n\n<p>Think of Puma and Passenger Enterprise as jumbo jets that can move a lot of people very fast. That's way more than your little app needs. What you really need is the server equivalent to a Honda Civic. For that, you should consider either the free version of Passenger or Thin. Use free Passenger if you want easy setup and decent tools. Use thin if you want similar performance but have a willingness to engineer the server.</p>\n\n<p>In this case, I see no reason to use anything but free Passenger unless you are looking for a challenge.</p>\n"}], "owner": {"reputation": 83, "user_id": 4819642, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NnmQ5OAfFaQ/AAAAAAAAAAI/AAAAAAAAAFk/RoUT0TZmbb8/photo.jpg?sz=128", "display_name": "mlepers", "link": "https://stackoverflow.com/users/4819642/mlepers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8787, "favorite_count": 4, "accepted_answer_id": 31301792, "answer_count": 4, "score": 8, "last_activity_date": 1523443853, "creation_date": 1436369338, "last_edit_date": 1523443853, "question_id": 31297166, "link": "https://stackoverflow.com/questions/31297166/passenger-5-performance-compared-to-unicorn-thin-puma-etc", "title": "passenger 5 performance compared to unicorn/thin/puma/etc", "body": "<p>I've been searching around for performance tests on the new passenger 5 as I read <a href=\"http://www.rubyraptor.org/how-we-made-raptor-up-to-4x-faster-than-unicorn-and-up-to-2x-faster-than-puma-torquebox/\" rel=\"nofollow noreferrer\">here</a> it became way faster.</p>\n\n<p>I tried to find other ressources confirming this but no luck. Has anyone tried to install it and see the difference?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1436372770, "post_id": 31296794, "comment_id": 50587257, "body": "It&#39;s unclear what you are asking. In one part of your question you are asking about variables, in another part of your question you are asking about objects, and in your title, you are asking about both interchangeably. Variables and objects are <i>completely different</i> things. Variables are <i>not</i> objects in Ruby. Strings are already objects, so there is no need to &quot;convert them to objects&quot;."}, {"owner": {"reputation": 16458, "user_id": 720164, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/654c5b015c1aa595fe534b2f217590cb?s=128&d=identicon&r=PG", "display_name": "Jonathan Allard", "link": "https://stackoverflow.com/users/720164/jonathan-allard"}, "edited": false, "score": 0, "creation_date": 1436377304, "post_id": 31296794, "comment_id": 50590024, "body": "Well, is it working?"}, {"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1436424106, "post_id": 31296794, "comment_id": 50608365, "body": "@J&#246;rgWMittag apologies for confusion in original question, the eval way as described in my questions works fine, as for variables being objects...guess i took the &quot;everything in ruby is an object&quot; too literally, a variable is just a pointer to an object, something that can be accessed from memory."}], "answers": [{"tags": [], "owner": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "is_accepted": false, "score": 2, "last_activity_date": 1436369353, "creation_date": 1436369353, "answer_id": 31297173, "question_id": 31296794, "link": "https://stackoverflow.com/questions/31296794/get-the-value-of-a-global-variable-related-to-a-string/31297173#31297173", "title": "Get the value of a global variable related to a string", "body": "<p>You can use <code>eval</code> method like this</p>\n\n<pre><code>$variable_1 = \"Try\"\ns = \"variable_1\"\n\neval(\"$#{s}\")\n\nputs $variable_1\n# =&gt; Try\n</code></pre>\n"}], "owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 632, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1436377347, "creation_date": 1436368409, "last_edit_date": 1436377347, "question_id": 31296794, "link": "https://stackoverflow.com/questions/31296794/get-the-value-of-a-global-variable-related-to-a-string", "title": "Get the value of a global variable related to a string", "body": "<p>I need to convert a string <code>\"variable_1\"</code> into the value that the global variable <code>$variable_1</code> holds. The value of <code>$variable_1</code> will have already been defined. How can I convert a string into an object? Is this possible?</p>\n\n<p>I looked at the method <code>instance_variable_set</code> but this does not suit my needs.</p>\n\n<p>A thread on rubyforums advises that <code>eval</code> could be used, for example if I was to compare two variables using cucucmber and rspec, I could do something like:</p>\n\n<pre><code>Then(/^I expect my variables to be different \"(.*?)\" \"(.*?)\"$/) do |count1, count2|\n  expect(eval(\"$#{count1}\")).not_to eq(eval(\"$#{count2}\"))\nend\n</code></pre>\n\n<p>Is there another way to obtain a global variable from a string of its name?</p>\n"}, {"tags": ["arrays", "ruby", "recursion", "hash", "merge"], "answers": [{"comments": [{"owner": {"reputation": 424, "user_id": 4832075, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/968214769876003/picture?type=large", "display_name": "InDaPond", "link": "https://stackoverflow.com/users/4832075/indapond"}, "edited": false, "score": 0, "creation_date": 1436383863, "post_id": 31299633, "comment_id": 50594116, "body": "What does this do?  res[k] ||= []"}, {"owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "reply_to_user": {"reputation": 424, "user_id": 4832075, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/968214769876003/picture?type=large", "display_name": "InDaPond", "link": "https://stackoverflow.com/users/4832075/indapond"}, "edited": false, "score": 0, "creation_date": 1436384100, "post_id": 31299633, "comment_id": 50594254, "body": "it&#39;s a lazy initialization. the way you read it, is res[k] = [] if res[k] is not defined. So basically if there is no key k in hash res, it will put (k,[]) in the hash"}, {"owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "reply_to_user": {"reputation": 424, "user_id": 4832075, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/968214769876003/picture?type=large", "display_name": "InDaPond", "link": "https://stackoverflow.com/users/4832075/indapond"}, "edited": false, "score": 0, "creation_date": 1436384130, "post_id": 31299633, "comment_id": 50594273, "body": "you can substitute it with res[k] = [] unless res.key?(k) , but the way I wrote it is idiomatic ruby"}], "tags": [], "owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "is_accepted": true, "score": 2, "last_activity_date": 1436376576, "creation_date": 1436376576, "answer_id": 31299633, "question_id": 31296706, "link": "https://stackoverflow.com/questions/31296706/merge-hashes-and-key-gets-both-old-and-new-values/31299633#31299633", "title": "Merge Hashes and key gets both, old and new values", "body": "<p>here we go:</p>\n\n<pre><code>a = [4,\"hello\",[[3],:d,7,[:a,\"seven\"]]]\n\ndef stuff(a)\n  res = {}\n  a.each do |e|\n    if e.is_a?(Array)\n      stuff(e).each do |k,v|\n        res[k] ||= []\n        v.each {|x| res[k] &lt;&lt; x}\n      end\n    else\n      k = e.class\n      res[k] ||= []\n      res[k] &lt;&lt; e\n    end\n  end\n  res\nend\n\nputs stuff(a).inspect\n</code></pre>\n\n<p>if you need to open and extend array, you can do something along the lines of:</p>\n\n<pre><code>class Array\n  def stuff(a = self)\n  ...\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "edited": false, "score": 0, "creation_date": 1436422376, "post_id": 31302353, "comment_id": 50607463, "body": "like how compact it is :) gotta love ruby"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1436398378, "last_edit_date": 1436398378, "creation_date": 1436384983, "answer_id": 31302353, "question_id": 31296706, "link": "https://stackoverflow.com/questions/31296706/merge-hashes-and-key-gets-both-old-and-new-values/31302353#31302353", "title": "Merge Hashes and key gets both, old and new values", "body": "<p>You can do that thus:</p>\n\n<pre><code>def group_by_class(arr, h = Hash.new { |h,k| h[k] = [] })\n  arr.each { |e| e.is_a?(Array) ? group_by_class(e,h) : h[e.class] &lt;&lt; e }\n  h\nend\n\narray = [4,\"hello\",[[3],:d,7,[:a,\"seven\"]]]\ngroup_by_class(array)\n  #=&gt; {Fixnum=&gt;[4, 3, 7], String=&gt;[\"hello\", \"seven\"], Symbol=&gt;[:d, :a]}\n\narray = [4,\"hello\",[[3],:d,7,[:a,\"seven\",[\"b\",9,[:e,[\"cat\", {a: 0}, 5]]]]]]\ngroup_by_class(array)\n  #=&gt; {Fixnum=&gt;[4, 3, 7, 9, 5], String=&gt;[\"hello\", \"seven\", \"b\", \"cat\"],\n  #    Symbol=&gt;[:d, :a, :e], Hash=&gt;[{:a=&gt;0}]} \n</code></pre>\n\n<p>You could also write:</p>\n\n<pre><code>def group_by_class(arr)\n  arr.each { |e| e.is_a?(Array) ? group_by_class(e) : @h[e.class] &lt;&lt; e }\nend\n\n@h = Hash.new { |h,k| h[k] = [] }\ngroup_by_class(array)\n@h\n  #=&gt; {Fixnum=&gt;[4, 3, 7, 9, 5], String=&gt;[\"hello\", \"seven\", \"b\", \"cat\"],\n  #    Symbol=&gt;[:d, :a, :e], Hash=&gt;[{:a=&gt;0}]} \n</code></pre>\n"}], "owner": {"reputation": 424, "user_id": 4832075, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/968214769876003/picture?type=large", "display_name": "InDaPond", "link": "https://stackoverflow.com/users/4832075/indapond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 1, "accepted_answer_id": 31299633, "answer_count": 2, "score": 3, "last_activity_date": 1436398378, "creation_date": 1436368211, "question_id": 31296706, "link": "https://stackoverflow.com/questions/31296706/merge-hashes-and-key-gets-both-old-and-new-values", "title": "Merge Hashes and key gets both, old and new values", "body": "<p>Imagine I have an array like this</p>\n\n<pre><code>array = [4,\"hello\",[[3],:d,7,[:a,\"seven\"]]]\n\n\n\nclass Array\n  def deep_collect_by_elem_type_as_hash()\n    e = {}\n    self.each(){|x|\n      if x.is_a?(Array)\n        e.merge(x.deep_collect_by_elem_type_as_hash)\n      end\n      if !x.is_a?(Array)\n        if e.has_key?(x.class)\n          e[x.class]&lt;&lt;x\n        else\n          e[x.class] = [x]\n        end\n      end\n    }\n    return e\n  end\n</code></pre>\n\n<p>I want all my arrays to create an hash in which there are keys containing the different classes that are in my Array.\nTheir values will be the actual elements for each class.</p>\n\n<p>So it would look like this:</p>\n\n<pre><code>{Fixnum=&gt;[4, 3, 7], String=&gt;[\"hello\", \"seven\"], Symbol=&gt;[:d, :a]}\n</code></pre>\n\n<p>I want to solve the whole thing without using flatten, but doing it recrusive.\nTe flatten solution could look like this:</p>\n\n<pre><code>def deep_collect_by_elem_type_as_hash1()\n    e = {}\n    flat= self.flatten()\n    flat.each(){|x|\n      if e.has_key?(x.class)\n        e[x.class]&lt;&lt;x\n      else\n        e[x.class] = [x]\n      end\n    }\n    return e\n  end\n</code></pre>\n\n<p>For those wondering why I do not want to use flatten: I still have problems fully understanding how to implement recursive methods, and therefore this is a question to give me a better understanding.</p>\n\n<p>I think I somehow have to implement merge with a block, but I cannot figure out a proper block. <code>merge(x.deep_collect_by_elem_type_as_hash(){|k,v1,v2| help}</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "memory-management", "memory-leaks", "carrierwave"], "answers": [{"tags": [], "owner": {"reputation": 566, "user_id": 4820428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a66b5402023aba0bbc0cc151f9e9402?s=128&d=identicon&r=PG", "display_name": "Olivier Buffon", "link": "https://stackoverflow.com/users/4820428/olivier-buffon"}, "is_accepted": false, "score": 2, "last_activity_date": 1436377033, "creation_date": 1436377033, "answer_id": 31299792, "question_id": 31296580, "link": "https://stackoverflow.com/questions/31296580/ruby-on-rails-memory-management/31299792#31299792", "title": "Ruby on rails memory management", "body": "<p>After reading a lot of posts talking about that problem, it seems that the real cause come from the Ruby GC, which is consuming a lot of server memory and causing a lot of server swapping since version 2.1.x .</p>\n\n<p>To fix those performance issues, I just set <code>RUBY_GC_HEAP_OLDOBJECT_LIMIT_FACTOR</code> to a value around <code>1.25</code>. You can play with that setting to find the best value for your environment.</p>\n\n<p>FYI my app is running with Ruby 2.1.5 on Heroku Cedar 14 and it worked like a charm.</p>\n\n<p>Hope it helps :)</p>\n"}, {"tags": [], "owner": {"reputation": 39, "user_id": 1852914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14a1d629aa575652b241d05c040fe649?s=128&d=identicon&r=PG", "display_name": "dabrain34", "link": "https://stackoverflow.com/users/1852914/dabrain34"}, "is_accepted": false, "score": 0, "last_activity_date": 1436435060, "creation_date": 1436435060, "answer_id": 31313871, "question_id": 31296580, "link": "https://stackoverflow.com/questions/31296580/ruby-on-rails-memory-management/31313871#31313871", "title": "Ruby on rails memory management", "body": "<p>I guess my problem is not related to the way GC is starting because if i ask for a manual garbage collection gc.start, i dont get back my memory. Maybe i'm having a memory leak somewhere but i would like to find a way to track it. </p>\n"}, {"tags": [], "owner": {"reputation": 566, "user_id": 4820428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a66b5402023aba0bbc0cc151f9e9402?s=128&d=identicon&r=PG", "display_name": "Olivier Buffon", "link": "https://stackoverflow.com/users/4820428/olivier-buffon"}, "is_accepted": false, "score": 0, "last_activity_date": 1436450434, "creation_date": 1436450434, "answer_id": 31319788, "question_id": 31296580, "link": "https://stackoverflow.com/questions/31296580/ruby-on-rails-memory-management/31319788#31319788", "title": "Ruby on rails memory management", "body": "<p>It fact, in your case carrierewave gem itself seems to be the source of your issue.\nThis gem seems to use the entire file to play with it and not chunks... So when your uploading large files you can easily hit the memory limit of your server. </p>\n\n<p>This post seems to confirm what I'm saying:\n<a href=\"https://github.com/carrierwaveuploader/carrierwave/issues/413\" rel=\"nofollow\">https://github.com/carrierwaveuploader/carrierwave/issues/413</a></p>\n\n<p>What I can suggest in your case is to consider using direct upload on S3 to save your server from processing the upload by doing it in background directly on Amazon servers.</p>\n\n<p>I'm not very familiar with carrierwave but this gem should do the trick:\n<a href=\"https://github.com/dwilkie/carrierwave_direct\" rel=\"nofollow\">https://github.com/dwilkie/carrierwave_direct</a></p>\n\n<p>I don't know if it could be a valid solution for you, but regarding your issue it seems to be your best alternative. </p>\n\n<p>Hope it helps :) !</p>\n"}], "owner": {"reputation": 39, "user_id": 1852914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14a1d629aa575652b241d05c040fe649?s=128&d=identicon&r=PG", "display_name": "dabrain34", "link": "https://stackoverflow.com/users/1852914/dabrain34"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 618, "favorite_count": 1, "answer_count": 3, "score": 2, "last_activity_date": 1436450434, "creation_date": 1436367890, "question_id": 31296580, "link": "https://stackoverflow.com/questions/31296580/ruby-on-rails-memory-management", "title": "Ruby on rails memory management", "body": "<p>I'm implementing a ruby on rails server(Ruby 2.2.1 and rails 4.1.10) and I'm facing some memory issues where the server process (puma) which can take 500MB and more. Mainly when i'm uploading large file to the server, i'm getting this kind of value. I'm using carrierwave.</p>\n\n<p>My question is related to the ruby management system and garbage collection. Seen that my server is dedicated to embedded system , i really  need to cap or control the memory, my process is taking from the system.</p>\n\n<p>Is there a way to see which objects (with its size) are still alive and should not?\nIs it right that the memory system in ruby does not retrieve back the free memory to the system if the memory is fragmented?\nPlease help me to figure out whats goin on when my memory is larger than 150MB idle.</p>\n\n<p>St\u00e9ph</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2314, "user_id": 2882921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ffb2397ff2a97e133bdaa6cb2b449b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Kruczek", "link": "https://stackoverflow.com/users/2882921/piotr-kruczek"}, "edited": false, "score": 0, "creation_date": 1436367832, "post_id": 31296518, "comment_id": 50583743, "body": "What button? You mean you want to submit a form? Please include more specifics."}, {"owner": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "edited": false, "score": 0, "creation_date": 1436369106, "post_id": 31296518, "comment_id": 50584757, "body": "You need to have something for us to work with and/or fix.  Otherwise, you are asking us to post the tutorial you don&#39;t want to be linked to."}], "owner": {"reputation": 185, "user_id": 5084871, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/26724d54785ca73d7a3d5b29ff16bbe3?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Roberts", "link": "https://stackoverflow.com/users/5084871/sam-roberts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1436367734, "creation_date": 1436367734, "question_id": 31296518, "link": "https://stackoverflow.com/questions/31296518/rails-button-save-preexisting-data-from-one-table-to-another", "title": "Rails Button save preexisting data from one table to another", "body": "<p>Im a total noob at Ruby on rails. </p>\n\n<p>I've been told to create a button that once clicked saves a bunch of information thats inside the page along with the user and date. </p>\n\n<p>I know that the command 'current_user' and 'datetime.now' can be used. ITs the whole setting up the controllers and linking them into the database.</p>\n\n<p>Sorry if this has been asked before but i could do wih alot of help with this (please just don't link me off to a tutorial, a dumbed down word for word will be great)</p>\n\n<p>Sam</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rack", "prawn", "dragonfly-gem"], "comments": [{"owner": {"reputation": 31012, "user_id": 25398, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3690dee254e9aa9d98ff964a70e89f23?s=128&d=identicon&r=PG", "display_name": "Cody Caughlan", "link": "https://stackoverflow.com/users/25398/cody-caughlan"}, "edited": false, "score": 0, "creation_date": 1437149298, "post_id": 31296315, "comment_id": 50925462, "body": "<code>It may probably work in production, but even then it does a needless http-request</code> - what do you mean by needless? If its a remote image than some component will have to do a http request to fetch it for you to embed"}], "answers": [{"tags": [], "owner": {"reputation": 3773, "user_id": 991903, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J12Hi.jpg?s=128&g=1", "display_name": "Meier", "link": "https://stackoverflow.com/users/991903/meier"}, "is_accepted": false, "score": 0, "last_activity_date": 1437149121, "last_edit_date": 1437149121, "creation_date": 1437147490, "answer_id": 31479543, "question_id": 31296315, "link": "https://stackoverflow.com/questions/31296315/prawn-pdf-how-to-add-images-uploaded-with-dragonfly/31479543#31479543", "title": "Prawn PDF: how to add images uploaded with dragonfly", "body": "<p>I found relevant documentation about <a href=\"http://markevans.github.io/dragonfly/how-works/#using-content\" rel=\"nofollow\">dragonfly file handling</a>. The following did not work: \nThe <code>report.spot_image.data</code> method returns the image data as string, but prawn recognizes the data as path instead of as image data. The dragonfly <code>tempfile</code> method returns a closed temporary file, but prawn does not recognize that it can open it. </p>\n\n<p>I had success with the <code>file</code> method, which returns an open file handle. It is unclear if prawn is closing this file than. So I used the block-style method to make sure the file is closed:</p>\n\n<pre><code>   report.spot_image.file do |f|\n       image f\n   end\n</code></pre>\n\n<p>This works so far. (not yet tested with cloud storage)</p>\n"}], "owner": {"reputation": 3773, "user_id": 991903, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J12Hi.jpg?s=128&g=1", "display_name": "Meier", "link": "https://stackoverflow.com/users/991903/meier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 421, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1437149121, "creation_date": 1436367254, "last_edit_date": 1437141232, "question_id": 31296315, "link": "https://stackoverflow.com/questions/31296315/prawn-pdf-how-to-add-images-uploaded-with-dragonfly", "title": "Prawn PDF: how to add images uploaded with dragonfly", "body": "<p>I like to generate PDF-Files which also includes images uploaded by the user. The prawn gem works so far, and can also embed images located in the file system. \nMy problem is that I want to include user uploaded images, and where these images are stored will probably change in the future (from file system to some cloud service). \nI use the dragonfly gem for handling the images, this uses rack to access the images and sometimes process them on the fly.</p>\n\n<p>Now the simpliest idea does not work \n(with <code>report</code> being my object and <code>spot_image</code> my image field)</p>\n\n<pre><code>image report.spot_image\n\nno implicit conversion of #&lt;Class:0x007fc07ecf1110&gt; into String\n</code></pre>\n\n<p>I tried also to open the file via http with open-uri. This should work, but it blocks on my development machine, I think because the development rails server is single threaded:</p>\n\n<pre><code>image_path = report.spot_image.remote_url\nimage_url = \"#{view.request.protocol}\\#view.request.host_with_port}\n             /#{image_path.sub(/^\\//,\"\")}\"\n\nimage open(image_url)  # timeout in development-mode\n</code></pre>\n\n<p>It may probably work in production, but even then it does a needless http-request. Can I ask dragonfly (or rack) directly for the image? prawn uses duck-typing and needs some object that responds to <code>read</code> and <code>rewind</code> as image.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routes"], "answers": [{"tags": [], "owner": {"reputation": 2314, "user_id": 2882921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ffb2397ff2a97e133bdaa6cb2b449b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Kruczek", "link": "https://stackoverflow.com/users/2882921/piotr-kruczek"}, "is_accepted": true, "score": 3, "last_activity_date": 1436367649, "creation_date": 1436367649, "answer_id": 31296479, "question_id": 31296255, "link": "https://stackoverflow.com/questions/31296255/redirecting-in-rails-routes/31296479#31296479", "title": "Redirecting in Rails routes", "body": "<p>Routes are meant as a simple match between a string representing a part of a url, method and an action within a controller. The best way to achieve what you're after is using a <code>before_action</code> in your controller. Example</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  before_action :authenticate_user, only: [:show]\n\n  def show\n    ...\n  end\n\n  private\n\n  def authenticate_user\n    redirect_to some_other_path unless id_correct?\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 31296479, "answer_count": 1, "score": 0, "last_activity_date": 1436367649, "creation_date": 1436367103, "question_id": 31296255, "link": "https://stackoverflow.com/questions/31296255/redirecting-in-rails-routes", "title": "Redirecting in Rails routes", "body": "<p>I have simply route in my rails application that looks like this:</p>\n\n<pre><code>  resources :users, only: :show\n</code></pre>\n\n<p>And now for example I want to redirect to <a href=\"http://no_present_path.com\">http://no_present_path.com</a> when user with sended id is not present and when user with seneded id is present redirect to <a href=\"http://present_path.com\" rel=\"nofollow\">http://present_path.com</a>. Is it any way to do this with routes constraints?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"tags": [], "owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "is_accepted": true, "score": 24, "last_activity_date": 1436367153, "creation_date": 1436367153, "answer_id": 31296272, "question_id": 31296160, "link": "https://stackoverflow.com/questions/31296160/rails-find-a-record-within-activerecordrelation-object-without-querying-databa/31296272#31296272", "title": "Rails Find a Record Within ActiveRecord::Relation Object without querying database again", "body": "<p>Once the realtion has been loaded, you can use regular array  methods. <code>find</code> is actually very interesting method here - if block is specified, it will be delegated to the relation target:</p>\n\n<pre><code>@blogs.find {|b| b.id == 1}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10281, "user_id": 137649, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5635e2fe13ed1c423962f5683fede3c0?s=128&d=identicon&r=PG", "display_name": "Andrew Kuklewicz", "link": "https://stackoverflow.com/users/137649/andrew-kuklewicz"}, "is_accepted": false, "score": 14, "last_activity_date": 1456851113, "last_edit_date": 1456851113, "creation_date": 1436367728, "answer_id": 31296512, "question_id": 31296160, "link": "https://stackoverflow.com/questions/31296160/rails-find-a-record-within-activerecordrelation-object-without-querying-databa/31296512#31296512", "title": "Rails Find a Record Within ActiveRecord::Relation Object without querying database again", "body": "<p>When you call <code>find_by</code>, it is going to hit the database.</p>\n\n<p>The relation object is used to lazy load the db results.</p>\n\n<p>Once they are loaded for the <code>all</code> call, you can then search within the resulting array.</p>\n\n<p>If you want to look within the results already in memory in your ruby process, then you should look within the array using <code>find</code> or <code>detect</code> (which do the same thing). I tend to use <code>detect</code>, so it is clear it isn't hitting the database:</p>\n\n<pre><code>@blogs.detect { |b| b.id == 1 }\n</code></pre>\n\n<p><a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-detect\" rel=\"noreferrer\">http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-detect</a></p>\n"}, {"comments": [{"owner": {"reputation": 1265, "user_id": 1235795, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cq1OZ.jpg?s=128&g=1", "display_name": "Fabian Winkler", "link": "https://stackoverflow.com/users/1235795/fabian-winkler"}, "edited": false, "score": 0, "creation_date": 1542119467, "post_id": 48857763, "comment_id": 93448099, "body": "The use of ActiveRecord&#39;s <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-where\" rel=\"nofollow noreferrer\">where</a> method <b>will</b> result in a database query."}, {"owner": {"reputation": 908, "user_id": 1220312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/85bfd271749bd0ba3d9b18d2437bc283?s=128&d=identicon&r=PG", "display_name": "lcjury", "link": "https://stackoverflow.com/users/1220312/lcjury"}, "edited": false, "score": 0, "creation_date": 1544189991, "post_id": 48857763, "comment_id": 94198702, "body": "This will result in a Database Query. OP doesn&#39;t want that."}], "tags": [], "owner": {"reputation": 927, "user_id": 442627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d87621164992d742c3ed5b2dcc1641d9?s=128&d=identicon&r=PG&f=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/442627/developer"}, "is_accepted": false, "score": -2, "last_activity_date": 1518996735, "creation_date": 1518996735, "answer_id": 48857763, "question_id": 31296160, "link": "https://stackoverflow.com/questions/31296160/rails-find-a-record-within-activerecordrelation-object-without-querying-databa/48857763#48857763", "title": "Rails Find a Record Within ActiveRecord::Relation Object without querying database again", "body": "<p>You can always use <code>where</code> clause. For instance</p>\n\n<pre><code>@blogs.where(id: 1).first.reload\n</code></pre>\n\n<p>To get (and reload from the database) @blog instance with ID 1. And keep in mind that this query will be fast, efficient and secure (in case you want to add <code>params[:id]</code> instead of hard-coded ID.</p>\n"}, {"comments": [{"owner": {"reputation": 1851, "user_id": 5535989, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1151037578257714/picture?type=large", "display_name": "Van_Paitin", "link": "https://stackoverflow.com/users/5535989/van-paitin"}, "edited": false, "score": 0, "creation_date": 1588621258, "post_id": 56501182, "comment_id": 108964330, "body": "I honestly can&#39;t believe this was the answer that solved my specific use case. Thanks @ka8725"}], "tags": [], "owner": {"reputation": 2470, "user_id": 1178074, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/6228fc7c96122d25c088b7dee54db273?s=128&d=identicon&r=PG", "display_name": "ka8725", "link": "https://stackoverflow.com/users/1178074/ka8725"}, "is_accepted": false, "score": 1, "last_activity_date": 1559941367, "creation_date": 1559941367, "answer_id": 56501182, "question_id": 31296160, "link": "https://stackoverflow.com/questions/31296160/rails-find-a-record-within-activerecordrelation-object-without-querying-databa/56501182#56501182", "title": "Rails Find a Record Within ActiveRecord::Relation Object without querying database again", "body": "<p>You can extend the defined association like this:</p>\n\n<pre><code>class User &lt; AR\n  has_many :roles do\n    def find_for(params)\n      find { |record| params.all? { |key, val| record[key] == val } }\n    end\n  end\nend\n\nUser.first.roles.find_for(foo: 'bar', baz: 'word') # =&gt; return instance of Role if its #foo equal 'bar' and its #baz equal 'word'\n</code></pre>\n"}], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8349, "favorite_count": 7, "accepted_answer_id": 31296272, "answer_count": 4, "score": 24, "last_activity_date": 1559941367, "creation_date": 1436366901, "last_edit_date": 1436367124, "question_id": 31296160, "link": "https://stackoverflow.com/questions/31296160/rails-find-a-record-within-activerecordrelation-object-without-querying-databa", "title": "Rails Find a Record Within ActiveRecord::Relation Object without querying database again", "body": "<p>I want to find a specific record within an <code>ActiveRecord::Relation</code> object so I can grab that record's attribute. </p>\n\n<p>The below works, but the problem is that it is hitting the database again with that <code>find_by</code> statement.  It shouldn't have to.  There should be a way for rails to find that object within the <code>ActiveRecord::Relation</code> object as opposed to having to query the database again.</p>\n\n<pre><code>#returns an ActiveRecord::Relation object\n@blogs = Blog.all\n\n# Search for the blog within that ActiveRecord::Relation object, NOT the database\n@blogs.find_by(id: 1).title #do this statement but don't hit the database again\n</code></pre>\n"}, {"tags": ["ruby", "logging", "error-handling", "block", "rescue"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1436373157, "post_id": 31295926, "comment_id": 50587495, "body": "How do you suggest getting access to the exception in the <code>else</code> clause, which is only executed when there is no exception?"}], "answers": [{"comments": [{"owner": {"reputation": 1412, "user_id": 524226, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/J9KIG.jpg?s=128&g=1", "display_name": "Jakub Zak", "link": "https://stackoverflow.com/users/524226/jakub-zak"}, "edited": false, "score": 0, "creation_date": 1436367173, "post_id": 31296196, "comment_id": 50583210, "body": "I then don&#39;t really get function of &quot;else&quot; in there, I though else behaves as a default for any other exception. I had completely misunderstood the else behaviour in that block."}, {"owner": {"reputation": 2314, "user_id": 2882921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ffb2397ff2a97e133bdaa6cb2b449b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Kruczek", "link": "https://stackoverflow.com/users/2882921/piotr-kruczek"}, "reply_to_user": {"reputation": 1412, "user_id": 524226, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/J9KIG.jpg?s=128&g=1", "display_name": "Jakub Zak", "link": "https://stackoverflow.com/users/524226/jakub-zak"}, "edited": false, "score": 0, "creation_date": 1436367274, "post_id": 31296196, "comment_id": 50583295, "body": "You could use <code>rescue Exception =&gt; e</code> to catch all errors, but it&#39;s highly unrecommended. More info <a href=\"http://stackoverflow.com/questions/10048173/why-is-it-bad-style-to-rescue-exception-e-in-ruby\">here</a>"}, {"owner": {"reputation": 1412, "user_id": 524226, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/J9KIG.jpg?s=128&g=1", "display_name": "Jakub Zak", "link": "https://stackoverflow.com/users/524226/jakub-zak"}, "edited": false, "score": 0, "creation_date": 1436367529, "post_id": 31296196, "comment_id": 50583484, "body": "Thank you that is very helpful... :)"}], "tags": [], "owner": {"reputation": 2314, "user_id": 2882921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ffb2397ff2a97e133bdaa6cb2b449b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Kruczek", "link": "https://stackoverflow.com/users/2882921/piotr-kruczek"}, "is_accepted": true, "score": 2, "last_activity_date": 1436366986, "creation_date": 1436366986, "answer_id": 31296196, "question_id": 31295926, "link": "https://stackoverflow.com/questions/31295926/ruby-exception-handling-in-else-block/31296196#31296196", "title": "Ruby exception handling in else block", "body": "<p>In the <code>begin rescue</code> block <code>else</code> is called only when no exception occurs, i.e. no error was thrown. Try this:</p>\n\n<pre><code>begin\n  # do work here\nrescue SafeShutdown =&gt; e\n  # print e\nrescue SystemExit =&gt; e\n  # print e\nelse\n  # this will only run when no exceptions are thrown\nensure\n  # this will always run\nend\n</code></pre>\n"}], "owner": {"reputation": 1412, "user_id": 524226, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/J9KIG.jpg?s=128&g=1", "display_name": "Jakub Zak", "link": "https://stackoverflow.com/users/524226/jakub-zak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 31296196, "answer_count": 1, "score": -1, "last_activity_date": 1436367028, "creation_date": 1436366323, "last_edit_date": 1436367028, "question_id": 31295926, "link": "https://stackoverflow.com/questions/31295926/ruby-exception-handling-in-else-block", "title": "Ruby exception handling in else block", "body": "<p>So I have classic ruby exception handling:</p>\n\n<pre><code>begin\n    # do work here\nrescue SafeShutdown =&gt; e\n    # prevent loss of data and safely shutdown\nrescue SystemExit =&gt; e\n    # print #{e} and continue\nelse\n    # how can I get #{e} here to get error message\n    # so I can behave like in previous rescue\n    # \n    # print #{e} and continue\nend\n</code></pre>\n\n<p>My question is how can I get \"e\" to print out in logger in else part of the block.</p>\n"}, {"tags": ["ruby", "nokogiri"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1436380044, "post_id": 31295776, "comment_id": 50591744, "body": "You need to supply a more comprehensive example of the HTML <i>IN</i> your question. Don&#39;t point us at a link, as links rot and die."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1436380263, "post_id": 31295776, "comment_id": 50591869, "body": "<code>result</code> is going to be a NodeSet which is akin to an Array of Nodes. Nokogiri can return the text/contents of a NodeSet or of individual nodes. Perhaps you should search on how to do that?"}, {"owner": {"reputation": 5, "user_id": 2030104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/456820ff2a67fa39e15e2e5f0b0b5b29?s=128&d=identicon&r=PG", "display_name": "tmhumble", "link": "https://stackoverflow.com/users/2030104/tmhumble"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1436430206, "post_id": 31295776, "comment_id": 50612129, "body": "Sorry, but both comments don&#39;t make sense to me. First of all I&#39;ve given you an example of the HTML. It&#39;s nothing more than the content of that &lt;div&gt;&lt;/div&gt;. Seconly, it doesn&#39;t return a NodeSet. It returns Nokogiri::XML::Element - which is exactly why I&#39;m asking the question."}, {"owner": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "edited": false, "score": 1, "creation_date": 1436436401, "post_id": 31295776, "comment_id": 50616405, "body": "<code>require &#39;rubygems&#39;</code> is no more needed since Ruby 1.9."}], "answers": [{"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": true, "score": 2, "last_activity_date": 1436459295, "last_edit_date": 1436459295, "creation_date": 1436458977, "answer_id": 31323104, "question_id": 31295776, "link": "https://stackoverflow.com/questions/31295776/how-to-further-process-a-nokogirixmlelement/31323104#31323104", "title": "How to further process a Nokogiri::XML::Element?", "body": "<p>You're getting close, but aren't understanding what you're getting back.</p>\n\n<p>Depending on the HTML tag, you could get embedded tags. That's what's happening: You're asking for a single node but it contains additional nodes:</p>\n\n<pre><code>puts page.css('div#div_saadi div')[1].to_html\n# &gt;&gt; &lt;div style=\"padding:10px 0\"&gt;\n# &gt;&gt; &lt;span class=\"t4\"&gt;content&lt;/span&gt;content outside of the span&lt;span class=\"t2\"&gt;morecontent&lt;/span&gt;morecontent outside of the span&lt;/div&gt;\n</code></pre>\n\n<p><code>text</code> works on both a NodeSet and Node. It just grabs the text of whatever you point it at and returns it and doesn't care how many levels it has to descend to do that:</p>\n\n<pre><code>result = page.css('div#div_saadi div')[1].text\n# =&gt; \"contentcontent outside of the spanmorecontentmorecontent outside of the span\"\n</code></pre>\n\n<p>Instead, you have to iterate over the individual embedded nodes and extract their text:</p>\n\n<pre><code>require 'nokogiri'\n\ndummy_content = '&lt;div id=\"div_saadi\"&gt;&lt;div&gt;&lt;div style=\"padding:10px 0\"&gt;&lt;span class=\"t4\"&gt;content&lt;/span&gt;content outside of the span&lt;span class=\"t2\"&gt;morecontent&lt;/span&gt;morecontent outside of the span&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;'\npage = Nokogiri::HTML(dummy_content)\n\nresult = page.css('div#div_saadi div')[1]\nputs result.children.map(&amp;:text)\n\n# &gt;&gt; content\n# &gt;&gt; content outside of the span\n# &gt;&gt; morecontent\n# &gt;&gt; morecontent outside of the span\n</code></pre>\n\n<p><a href=\"http://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri/XML/Node:children\" rel=\"nofollow\"><code>children</code></a> returns all embedded nodes as a NodeSet. Iterating over that returns Nodes, and using <code>text</code> on a particular node at that point will return what you want.</p>\n"}], "owner": {"reputation": 5, "user_id": 2030104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/456820ff2a67fa39e15e2e5f0b0b5b29?s=128&d=identicon&r=PG", "display_name": "tmhumble", "link": "https://stackoverflow.com/users/2030104/tmhumble"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 2, "accepted_answer_id": 31323104, "answer_count": 1, "score": 0, "last_activity_date": 1436459295, "creation_date": 1436365962, "last_edit_date": 1436434376, "question_id": 31295776, "link": "https://stackoverflow.com/questions/31295776/how-to-further-process-a-nokogirixmlelement", "title": "How to further process a Nokogiri::XML::Element?", "body": "<p>I've written a short script in Ruby using Nokogiri to extract some data from a web page. The script works fine, but it is currently returning several nested tags as a single Nokogiri::XML::Element.</p>\n\n<p>The script is as follows:</p>\n\n<pre><code>require 'rubygems'\nrequire 'nokogiri'\n\n#some dummy content that mimics the structure of the web page\ndummy_content = '&lt;div id=\"div_saadi\"&gt;&lt;div&gt;&lt;div style=\"padding:10px 0\"&gt;&lt;span class=\"t4\"&gt;content&lt;/span&gt;content outside of the span&lt;span class=\"t2\"&gt;morecontent&lt;/span&gt;morecontent outside of the span&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;'\npage = Nokogiri::HTML(dummy_content)\n\n#grab the second div inside of the div entitled div_saadi\nresult = page.css('div#div_saadi div')[1]\n\nputs result\nputs result.class\n</code></pre>\n\n<p>output is as follows:</p>\n\n<pre><code>&lt;div style=\"padding:10px 0\"&gt;\n&lt;span class=\"t4\"&gt;content&lt;/span&gt;content outside of the span&lt;span class=\"t2\"&gt;morecontent&lt;/span&gt;morecontent outside of the span\n&lt;/div&gt;\nNokogiri::XML::Element\n</code></pre>\n\n<p>What I'd like to do is to produce the following output (using something like .each):</p>\n\n<pre><code>content\ncontent outside of the span\nmorecontent\nmorecontent outside of the span\n</code></pre>\n"}, {"tags": ["ruby", "bash", "pipeline", "data-stream"], "comments": [{"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1436366168, "post_id": 31295581, "comment_id": 50582364, "body": "Perhaps you could show us the code that doesn&#39;t work looks like"}], "answers": [{"comments": [{"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1436366247, "post_id": 31295859, "comment_id": 50582432, "body": "Reading the entire stdin stream into memory is not a good idea."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1436376805, "post_id": 31295859, "comment_id": 50589716, "body": "Sorry for the downvote, but your code uses a lot of Perlisms that are widely frowned upon in the Ruby community."}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "reply_to_user": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1438281807, "post_id": 31295859, "comment_id": 51398845, "body": "Hey @max, I&#39;ve been hiding in a corner licking my wounds ;)  Sincerely, can you direct me to some place so I can learn about Ruby community standards?"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 1, "creation_date": 1438284022, "post_id": 31295859, "comment_id": 51400104, "body": "There&#39;s no official style guide for Ruby, but <a href=\"https://github.com/bbatsov/ruby-style-guide\" rel=\"nofollow noreferrer\">this one</a> reflects most of the practices adopted by the community."}], "tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": false, "score": -1, "last_activity_date": 1436366340, "last_edit_date": 1436366340, "creation_date": 1436366154, "answer_id": 31295859, "question_id": 31295581, "link": "https://stackoverflow.com/questions/31295581/ruby-script-redirect-output-from-one-script-to-another-script/31295859#31295859", "title": "ruby script - redirect output from one script to another script", "body": "<p>To read <strong>all</strong> the input, in two.rb change</p>\n\n<pre><code>msg = gets.chomp\n</code></pre>\n\n<p>to</p>\n\n<pre><code>msg = $stdin.read.chomp\n</code></pre>\n\n<p>If you want to read line-by-line, add some command line flags:</p>\n\n<pre><code>ruby -n two.rb\n</code></pre>\n\n<p>and two.rb becomes</p>\n\n<pre><code>  BEGIN {out = File.open(File.dirname(__FILE__)+\"/out.txt\", \"w\")}\n  out.write $_\n</code></pre>\n\n<p>Using <code>/</code> instead of <code>\\</code> is OK on Windows.</p>\n"}, {"comments": [{"owner": {"reputation": 368, "user_id": 1906858, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/afd82cb1bb168bf70f10d0262f115737?s=128&d=identicon&r=PG", "display_name": "user_pruser", "link": "https://stackoverflow.com/users/1906858/user-pruser"}, "edited": false, "score": 0, "creation_date": 1436423981, "post_id": 31295882, "comment_id": 50608301, "body": "Thank you for your answer, but can you ensure me that it process the stream as it goes (process the lines as they are generated) or it process the whole output after it is generated?"}], "tags": [], "owner": {"reputation": 19585, "user_id": 3115685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/206073fe8f46ef1f9261d75c80c19c6f?s=128&d=identicon&r=PG&f=1", "display_name": "arco444", "link": "https://stackoverflow.com/users/3115685/arco444"}, "is_accepted": false, "score": 0, "last_activity_date": 1436366219, "creation_date": 1436366219, "answer_id": 31295882, "question_id": 31295581, "link": "https://stackoverflow.com/questions/31295581/ruby-script-redirect-output-from-one-script-to-another-script/31295882#31295882", "title": "ruby script - redirect output from one script to another script", "body": "<p>You need to wait until <code>STDIN</code> sends an <code>EOF</code> in the second script. </p>\n\n<p>Try:</p>\n\n<pre><code>#two.rb\nmsg = \"\"\nwhile line = gets\n  msg += line.chomp\nend\nIO.write(File.dirname(__FILE__)+'\\out.txt',msg)\n</code></pre>\n\n<p>If the fist script contains <code>10.times { puts \"hello\" }</code> you'll get:</p>\n\n<pre><code>hellohellohellohellohellohellohellohellohellohello\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 368, "user_id": 1906858, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/afd82cb1bb168bf70f10d0262f115737?s=128&d=identicon&r=PG", "display_name": "user_pruser", "link": "https://stackoverflow.com/users/1906858/user-pruser"}, "edited": false, "score": 0, "creation_date": 1436423975, "post_id": 31295927, "comment_id": 50608292, "body": "Thank you for your answer, but can you ensure me that it process the stream as it goes (process the lines as they are generated) or it process the whole output after it is generated?"}], "tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": true, "score": 3, "last_activity_date": 1436451845, "last_edit_date": 1436451845, "creation_date": 1436366330, "answer_id": 31295927, "question_id": 31295581, "link": "https://stackoverflow.com/questions/31295581/ruby-script-redirect-output-from-one-script-to-another-script/31295927#31295927", "title": "ruby script - redirect output from one script to another script", "body": "<p>Instead of reading just one line (<code>msg = gets.chomp</code>) you need to iterate through the lines of stdin</p>\n\n<pre><code>$stdin.each_line do |msg|\n  # ...\nend\n</code></pre>\n\n<p>This does not wait for the entire output to be generated, it will process the stream as lines are printed by the first process (ignoring buffering).</p>\n\n<p>For example, with these two scripts</p>\n\n<pre><code># one.rb\ni = 0\nloop { puts i += 1 }\n\n# two.rb\n$stdin.each_line { |msg| puts \"#{msg.chomp}!\" }\n</code></pre>\n\n<p>The first has infinite output, but you will still see output when you run</p>\n\n<pre><code>ruby one.rb | ruby two.rb\n</code></pre>\n"}], "owner": {"reputation": 368, "user_id": 1906858, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/afd82cb1bb168bf70f10d0262f115737?s=128&d=identicon&r=PG", "display_name": "user_pruser", "link": "https://stackoverflow.com/users/1906858/user-pruser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 539, "favorite_count": 0, "accepted_answer_id": 31295927, "answer_count": 3, "score": 1, "last_activity_date": 1436451845, "creation_date": 1436365466, "question_id": 31295581, "link": "https://stackoverflow.com/questions/31295581/ruby-script-redirect-output-from-one-script-to-another-script", "title": "ruby script - redirect output from one script to another script", "body": "<p>I am pretty sure that all of you know the bash pipelines. What I am trying to do is to read the output from one ruby script and put it as input into other ruby script</p>\n\n<p>here is what I successfully accomplished so far:</p>\n\n<p>first file to generate the output</p>\n\n<pre><code>#one.rb\n\nputs \"hello\"\n</code></pre>\n\n<p>and the second file to handle the input</p>\n\n<pre><code>#two.rb\n\nmsg = gets.chomp\nIO.write(File.dirname(__FILE__)+'\\out.txt',msg)\n</code></pre>\n\n<p>now, the cygwin command (or linux) (side question: can this be done as well in windows cmd or powershell?)</p>\n\n<pre><code>ruby one.rb | ruby two.rb\n</code></pre>\n\n<p>and voila, the out.txt file is created, filled with string hello.</p>\n\n<p>However, when I try it to do it in the cycle or handling some stream of data, like 10.times puts 'hello' and the in cycle to read it, it did not work. Can somebody please help me to accomplish this or show me the way how can i do that? I have only find some python question but it was for something different and some bash-like-way.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["ruby", "amazon-s3", "sinatra", "carrierwave", "fog"], "answers": [{"tags": [], "owner": {"reputation": 4444, "user_id": 238971, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1ee09aabd57524c809c1798191ac9593?s=128&d=identicon&r=PG", "display_name": "Sergey", "link": "https://stackoverflow.com/users/238971/sergey"}, "is_accepted": true, "score": 0, "last_activity_date": 1436365093, "creation_date": 1436365093, "answer_id": 31295430, "question_id": 31295069, "link": "https://stackoverflow.com/questions/31295069/carrierwave-not-resizing-images-on-s3/31295430#31295430", "title": "Carrierwave not resizing images on S3", "body": "<p>Although there were no errors, running \"convert -version\" on production machine revealed that imagemagick was not installed. Installation fixed the issue.</p>\n"}], "owner": {"reputation": 4444, "user_id": 238971, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1ee09aabd57524c809c1798191ac9593?s=128&d=identicon&r=PG", "display_name": "Sergey", "link": "https://stackoverflow.com/users/238971/sergey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 31295430, "answer_count": 1, "score": 0, "last_activity_date": 1436365093, "creation_date": 1436364236, "question_id": 31295069, "link": "https://stackoverflow.com/questions/31295069/carrierwave-not-resizing-images-on-s3", "title": "Carrierwave not resizing images on S3", "body": "<p>On development, it's correctly creating a resized version of original image and storing both of them, but on s3, it's just uploading 2 identical versions without any kind of modification (apart from renaming it). There are no exceptions shown anywhere. Any idea where the problem might be?</p>\n\n<pre><code>CarrierWave.configure do |config|\n  config.fog_credentials = {\n    :provider               =&gt; 'AWS',\n    :aws_access_key_id      =&gt; 'a',\n    :aws_secret_access_key  =&gt; 'a',\n    :region                 =&gt; \"us-west-1\"\n  }\n  config.fog_directory  = 'a'\nend\n\nclass ImageUploader &lt; CarrierWave::Uploader::Base\n\n  include CarrierWave::MiniMagick\n\n  def store_dir\n    \"images/#{model.id}\"\n  end\n\n  version :normalized do\n    process :resize_to_limit =&gt; [450,450]\n  end\n\n  def extension_white_list\n    %w(jpg jpeg gif png)\n  end\n\n  if Sinatra::Base.development?\n    storage :file\n  else\n    storage :fog\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "soap"], "comments": [{"owner": {"reputation": 292, "user_id": 2710983, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/c80d7567e3b4e47daa4e9f69e29ec1fc?s=128&d=identicon&r=PG&f=1", "display_name": "daneasterman", "link": "https://stackoverflow.com/users/2710983/daneasterman"}, "edited": false, "score": 0, "creation_date": 1436434499, "post_id": 31294949, "comment_id": 50614977, "body": "Seems to be a problem when routing to other pages such as a show page. When just setting the searches/index as the root and specifying in view (root_url, :method =&gt; :get) it works fine. Active Record doesn&#39;t impact on it at all. Why is soap request not working when I try to route to another page?"}], "answers": [{"tags": [], "owner": {"reputation": 1344, "user_id": 601851, "user_type": "registered", "accept_rate": 8, "profile_image": "https://i.stack.imgur.com/sYZTJ.jpg?s=128&g=1", "display_name": "Alex Chin", "link": "https://stackoverflow.com/users/601851/alex-chin"}, "is_accepted": true, "score": 1, "last_activity_date": 1436437561, "creation_date": 1436437561, "answer_id": 31314745, "question_id": 31294949, "link": "https://stackoverflow.com/questions/31294949/request-response-to-soap-api-in-rails-app/31314745#31314745", "title": "Request / response to Soap API in Rails app", "body": "<p>I think you are making a request to a <code>searches/show</code> page however you don't have an action for that? You have an action for index, so change the form to make a request to just <code>searches</code>. Does that fix it?</p>\n"}], "owner": {"reputation": 292, "user_id": 2710983, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/c80d7567e3b4e47daa4e9f69e29ec1fc?s=128&d=identicon&r=PG&f=1", "display_name": "daneasterman", "link": "https://stackoverflow.com/users/2710983/daneasterman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 31314745, "answer_count": 1, "score": 2, "last_activity_date": 1436437561, "creation_date": 1436363888, "last_edit_date": 1436374989, "question_id": 31294949, "link": "https://stackoverflow.com/questions/31294949/request-response-to-soap-api-in-rails-app", "title": "Request / response to Soap API in Rails app", "body": "<p>I need to request some data from a SOAP API webservice (XML) in a Rails 4 app. The user inputs his email and confirmation number and receives a bunch of information about his booking. </p>\n\n<p>This was working in a separate app I created without specifying proper routes and using <code>&lt;%= form_tag(root_url, :method =&gt; :get ) %&gt;</code> in the index view. The finished app will need a proper route structure but I can't get any response from the Soap API when I put <code>&lt;%= form_tag('searches/show', :method =&gt; :get ) %&gt;</code> in the view for my new app. (I'm just getting a blank screen whereas the old version worked fine)</p>\n\n<p>Currently I'm routing from index to a show page using a hardcoded string. I know this probably isn't the best practice, but since this is calling information from a Soap API, there doesn't need to be a database behind the Rails app. (Even though I've put one in anyway)</p>\n\n<p>Anyway, thanks in advance for your help, here's all the sections of my app which I think are relevant for now. Give me a shout if you need more info!</p>\n\n<p>Index View (/views/searches/index.html.erb):</p>\n\n<pre><code>&lt;h1&gt;Manage your Booking&lt;/h1&gt;\n\n&lt;p&gt;\n  &lt;%= form_tag('searches/show', :method =&gt; :get ) %&gt;\n  &lt;%= label_tag 'Confirmation Number:' %&gt;\n  &lt;%= text_field_tag :confirmation_number %&gt;\n\n  &lt;%= label_tag 'Email:' %&gt;\n  &lt;%= text_field_tag :email %&gt;\n\n  &lt;%= submit_tag \"Lookup\", name: nil %&gt;\n&lt;/p&gt;\n</code></pre>\n\n<p>Show View (/views/searches/show.html.erb)</p>\n\n<pre><code>&lt;% if @search %&gt;\n  &lt;dl id =\"reservation_info\"&gt;\n    &lt;dt&gt;Test Text:&lt;/dt&gt;\n    &lt;dd&gt;&lt;%= @search.reservation_id %&gt;&lt;/dd&gt;\n    &lt;dd&gt;&lt;%= @search.dining_date_and_time %&gt;&lt;/dd&gt;\n    &lt;dd&gt;&lt;%= @search.size %&gt;&lt;/dd&gt;\n    &lt;dd&gt;&lt;%= @search.session_id %&gt;&lt;/dd&gt;\n    &lt;dd&gt;&lt;%= @search.first_name %&gt;&lt;/dd&gt;\n    &lt;dd&gt;&lt;%= @search.last_name %&gt;&lt;/dd&gt;    \n    &lt;dd&gt;&lt;%= @search.confirm_number %&gt;&lt;/dd&gt;\n    &lt;dd&gt;&lt;%= @search.allowed_to_cancel_online %&gt;&lt;/dd&gt;\n    &lt;dd&gt;&lt;%= @search.restaurant_phone_number %&gt;&lt;/dd&gt;\n    &lt;dd&gt;&lt;%= @search.restaurant_id %&gt;&lt;/dd&gt;\n    &lt;dd&gt;&lt;%= @search.restaurant_name %&gt;&lt;/dd&gt;\n    &lt;dd&gt;&lt;%= @search.location_id %&gt;&lt;/dd&gt;\n    &lt;dd&gt;&lt;%= @search.location_name %&gt;&lt;/dd&gt;\n  &lt;/dl&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Controller (controllers/searches_controller.rb)</p>\n\n<pre><code>class SearchesController &lt; ApplicationController\n    def index   \n      if params[:confirmation_number] &amp;&amp; params[:email]   \n        @search = Search.new params[:confirmation_number], params[:email]\n      end\n    end\n\n  private \n\n    def search_params\n      params.require(:search).permit(:confirmation_number, :email)\n    end\n\nend\n\nRoutes config file:\n\nRails.application.routes.draw do\n\n  resources :reservations do\n  end\n\n  resources :searches do\n  end\n\nend\n</code></pre>\n\n<p>Model (models/search.rb):</p>\n\n<pre><code>class Search &lt; ActiveRecord::Base\n\nattr_accessor :reservation_id, :dining_date_and_time, :size, :session_id, :first_name, :last_name, :confirm_number, :allowed_to_cancel_online, :restaurant_phone_number, :restaurant_id, :restaurant_name, :location_id, :location_name\n\ndef client\n  client = Savon.client(wsdl: \"http://wsdl-example-url-placeholder?wsdl\", follow_redirects: :follow_redirects)\nend\n\ndef initialize(confirmation_number, email)\n  message = {'ConfirmationNumber' =&gt; confirm_number, 'EMail' =&gt; email  }\n  response = client.call(:search_for_reservation, message: message)\n  if response.success?\n    data = response.to_array(:search_for_reservation_response, :reservation).first\n    if data\n      @reservation_id = data[:@id]\n      @dining_date_and_time = data[:dining_date_and_time]\n      @size = data[:size]\n      @session_id = data[:session_id]\n      @first_name = data[:first_name]\n      @last_name = data[:last_name]\n      @confirm_number = data[:confirmation_number]\n      @allowed_to_cancel_online = data[:allowed_to_cancel_online]\n      @restaurant_phone_number = data[:restaurant_phone_number]\n\n      data2 = response.to_hash[:search_for_reservation_response][:reservation][:restaurant]\n      if data2\n        @restaurant_id = data2[:@id]\n        @restaurant_name = data2[:name]\n\n        data3 = response.to_hash[:search_for_reservation_response][:reservation][:restaurant][:location]\n        if data3\n         @location_id = data3[:@id]\n         @location_name = data3[:name]\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Terminal output:</p>\n\n<pre><code>Started GET \"/searches\" for ::1 at 2015-07-08 14:39:56 +0100\n  ActiveRecord::SchemaMigration Load (1.4ms)  SELECT \"schema_migrations\".* FROM \"schema_migrations\"\nProcessing by SearchesController#index as HTML\n  Rendered searches/index.html.erb within layouts/application (2.9ms)\nCompleted 200 OK in 296ms (Views: 285.8ms | ActiveRecord: 0.0ms)\n\n\nStarted GET \"/searches\" for ::1 at 2015-07-08 14:39:56 +0100\nProcessing by SearchesController#index as HTML\n  Rendered searches/index.html.erb within layouts/application (0.3ms)\nCompleted 200 OK in 48ms (Views: 47.7ms | ActiveRecord: 0.0ms)\n\n\nStarted GET \"/searches/show?utf8=%E2%9C%93&amp;confirmation_number=ZANHJW5U&amp;email=myemail%40email.com\" for ::1 at 2015-07-08 14:40:06 +0100\nProcessing by SearchesController#show as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"confirmation_number\"=&gt;\"ZANHJW5U\", \"email\"=&gt;\"myemail@email.com\", \"id\"=&gt;\"show\"}\n  Rendered searches/show.html.erb within layouts/application (0.5ms)\nCompleted 200 OK in 49ms (Views: 48.2ms | ActiveRecord: 0.0ms\n</code></pre>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1436366037, "post_id": 31294630, "comment_id": 50582234, "body": "It is not safe (depending on how you define &quot;safe&quot;) in all languages I have good experience with. Modifying a collection while iterating it is guaranteed to break your program or surprise you. Can&#39;t think of a legitimate use case for this."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1436366306, "post_id": 31294630, "comment_id": 50582488, "body": "to play it safe, iterate a <i>copy</i> of the array, while deleting elements from the original"}], "answers": [{"comments": [{"owner": {"reputation": 2652, "user_id": 968531, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/181a8764ddf31a43d2f740e61be7ad73?s=128&d=identicon&r=PG", "display_name": "NobodysNightmare", "link": "https://stackoverflow.com/users/968531/nobodysnightmare"}, "edited": false, "score": 0, "creation_date": 1436367780, "post_id": 31294894, "comment_id": 50583704, "body": "As soon as you delete the element you are currently looking at (i.e. <code>i</code>, rather than <code>i+1</code>), the iteration will skip future elements. That is why your example code works: You remove a future element, which should (as I learned now) work flawlessly."}, {"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "reply_to_user": {"reputation": 2652, "user_id": 968531, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/181a8764ddf31a43d2f740e61be7ad73?s=128&d=identicon&r=PG", "display_name": "NobodysNightmare", "link": "https://stackoverflow.com/users/968531/nobodysnightmare"}, "edited": false, "score": 0, "creation_date": 1436371987, "post_id": 31294894, "comment_id": 50586773, "body": "Well it will effectively skip the element that was the next in the array, not all future elements of course. It wil still process the elements that is now in the subsequent position to the current one."}], "tags": [], "owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "is_accepted": false, "score": 1, "last_activity_date": 1436365824, "last_edit_date": 1436365824, "creation_date": 1436363780, "answer_id": 31294894, "question_id": 31294630, "link": "https://stackoverflow.com/questions/31294630/is-it-safe-to-delete-from-an-array-inside-each/31294894#31294894", "title": "Is it safe to delete from an Array inside each?", "body": "<p>I would say that it is safe, based on the following:</p>\n\n<pre><code>2.2.2 :035 &gt; a = (1..4).to_a\n =&gt; [1, 2, 3, 4] \n2.2.2 :036 &gt; a.each { |i| a.delete(i+1) if i &gt; 1 ; puts i }\n1\n2\n4\n =&gt; [1, 2, 4]\n</code></pre>\n\n<p>I'd infer from this test that Ruby correctly recognises while iterating through the contents that the element \"3\" has been deleted while element \"2\" was being processed, otherwise element \"4\" would also have been deleted.</p>\n\n<p>However, </p>\n\n<pre><code>2.2.2 :040 &gt; a.each { |i| puts i; a.delete(i) if i &gt; 1 ; puts i }\n1\n1\n2\n2\n4\n4\n</code></pre>\n\n<p>This suggests that after \"2\" is deleted, the next element processed is whichever is now third in the array, so the element that used to be in third place does not get processed at all. each appears to re-examine the array to find the next element to process on every iteration.</p>\n\n<p>I think that with that in mind, you ought to duplicate the array in your circumstances prior to processing.</p>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1436365421, "post_id": 31294945, "comment_id": 50581708, "body": "&quot;So as long as you don&#39;t modify ... it should be safe&quot; The OP is asking what happens when you <b>do</b> modify. Your answer is pointless. And your mentioning the enumerator use of <code>each</code> does not seem to be related to the OP&#39;s point."}, {"owner": {"reputation": 2314, "user_id": 2882921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ffb2397ff2a97e133bdaa6cb2b449b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Kruczek", "link": "https://stackoverflow.com/users/2882921/piotr-kruczek"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1436365678, "post_id": 31294945, "comment_id": 50581937, "body": "I simply explained with an example how deleting future records shifts the array, but I guess to each his own"}], "tags": [], "owner": {"reputation": 2314, "user_id": 2882921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ffb2397ff2a97e133bdaa6cb2b449b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Kruczek", "link": "https://stackoverflow.com/users/2882921/piotr-kruczek"}, "is_accepted": false, "score": 0, "last_activity_date": 1436363883, "creation_date": 1436363883, "answer_id": 31294945, "question_id": 31294630, "link": "https://stackoverflow.com/questions/31294630/is-it-safe-to-delete-from-an-array-inside-each/31294945#31294945", "title": "Is it safe to delete from an Array inside each?", "body": "<p>It depends.</p>\n\n<p>All <code>.each</code> does is returns an enumerator, which holds the collection an a pointer to where it left. Example:</p>\n\n<pre><code>a = [1,2,3]\nb = a.each # =&gt; #&lt;Enumerator: [1, 2, 3]:each&gt;\nb.next # =&gt; 1\na.delete(2)\nb.next # =&gt; 3\na.clear\nb.next # =&gt; StopIteration: iteration reached an end\n</code></pre>\n\n<p>Each with block calls <code>next</code> until the iteration reaches its end. So as long as you don't modify any 'future' array records it should be safe.</p>\n\n<p>However there are so many helpful methods in ruby's <code>Enumerable</code> and <code>Array</code> you really shouldn't ever need to do this.</p>\n"}, {"comments": [{"owner": {"reputation": 2652, "user_id": 968531, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/181a8764ddf31a43d2f740e61be7ad73?s=128&d=identicon&r=PG", "display_name": "NobodysNightmare", "link": "https://stackoverflow.com/users/968531/nobodysnightmare"}, "edited": false, "score": 1, "creation_date": 1436367533, "post_id": 31295448, "comment_id": 50583488, "body": "I wanted to challenge what you said, but by adding a <code>puts i;</code> into my example code I could verify that indeed the next element is &quot;skipped&quot;. That means I will have to duplicate my array and iterate over the copy."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 2652, "user_id": 968531, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/181a8764ddf31a43d2f740e61be7ad73?s=128&d=identicon&r=PG", "display_name": "NobodysNightmare", "link": "https://stackoverflow.com/users/968531/nobodysnightmare"}, "edited": false, "score": 2, "creation_date": 1436369230, "post_id": 31295448, "comment_id": 50584866, "body": "@NobodysNightmare: &quot;I wanted to challenge what you said&quot; - generally, users with a gold badge for the tag know what they&#39;re talking about. :)"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 10, "last_activity_date": 1436365145, "creation_date": 1436365145, "answer_id": 31295448, "question_id": 31294630, "link": "https://stackoverflow.com/questions/31294630/is-it-safe-to-delete-from-an-array-inside-each/31295448#31295448", "title": "Is it safe to delete from an Array inside each?", "body": "<p>You should not rely on unauthorized answers too much. The answer you cited is wrong, as is pointed out by Kevin's comment to it.</p>\n\n<p>It is safe (from the beginning of Ruby) to delete elements from an Array while <code>each</code> in the sense that Ruby will not raise an error for doing that, and will give a decisive (i.e., not random) result.</p>\n\n<p>However, you need to be careful because when you delete an element, the elements following it will be shifted, hence the element that was supposed to be iterated next would be moved to the position of the deleted element, which has been iterated over already, and will be skipped.</p>\n"}, {"tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1436370541, "last_edit_date": 1436370541, "creation_date": 1436369854, "answer_id": 31297354, "question_id": 31294630, "link": "https://stackoverflow.com/questions/31294630/is-it-safe-to-delete-from-an-array-inside-each/31297354#31297354", "title": "Is it safe to delete from an Array inside each?", "body": "<p>You are right, in the past it was advised not to remove items from the collection while iterating over it. In my tests and at least with version 1.9.3 in practice in an array this gives no problem, even when deleting prior or next elements.</p>\n\n<p>It is my opinion that while you can you shouldn't.\nA more clear and safe approach is to reject the elements and assign to a new array. </p>\n\n<pre><code>b = a.reject{ |i| i == 2 } #[1, 3, 4]\n</code></pre>\n\n<p>In case you want to reuse your a array that is also possible</p>\n\n<pre><code>a = a.reject{ |i| i == 2 } #[1, 3, 4]\n</code></pre>\n\n<p>which is in fact the same as </p>\n\n<pre><code>a.reject!{ |i| i == 2 } #[1, 3, 4]\n</code></pre>\n\n<p>You say you don't want to use reject because you want to do other things with the elements before deleting, but that is also possible.</p>\n\n<pre><code>a.reject!{ |i| puts i if i == 2;i == 2 } \n# 2\n#[1, 3, 4]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2652, "user_id": 968531, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/181a8764ddf31a43d2f740e61be7ad73?s=128&d=identicon&r=PG", "display_name": "NobodysNightmare", "link": "https://stackoverflow.com/users/968531/nobodysnightmare"}, "edited": false, "score": 0, "creation_date": 1436426410, "post_id": 31299041, "comment_id": 50609773, "body": "Thank you for the detailed answer. I was indeed expecting something like 5, my expectation was: The element would be deleted, but in no case any element is skipped."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 3, "last_activity_date": 1436374775, "creation_date": 1436374775, "answer_id": 31299041, "question_id": 31294630, "link": "https://stackoverflow.com/questions/31294630/is-it-safe-to-delete-from-an-array-inside-each/31299041#31299041", "title": "Is it safe to delete from an Array inside each?", "body": "<p>In order to answer your question, whether it is \"safe\" to do so, you will first have to define what you mean by \"safe\". Do you mean</p>\n\n<ol>\n<li>it doesn't crash the runtime?</li>\n<li>it doesn't <code>raise</code> an <code>Exception</code>?</li>\n<li>it <em>does</em> <code>raise</code> an <code>Exception</code>?</li>\n<li>it behaves deterministically?</li>\n<li>it does what you expect it to do? (What <em>do</em> you expect it to do?)</li>\n</ol>\n\n<p>Unfortunately, the Ruby Language Specification is not exactly helpful:</p>\n\n<blockquote>\n  <h1>15.2.12.5.10 Array#each</h1>\n  \n  <hr>\n  \n  <p><code>each</code>(<em>&amp;block</em>)</p>\n  \n  <hr>\n  \n  <p><strong>Visibility</strong>: public</p>\n  \n  <p><strong>Behavior</strong>:</p>\n  \n  <ul>\n  <li>If block is given:\n  \n  <ol>\n  <li>For each element of the receiver in the indexing order, call <em>block</em> with the element as the only argument.</li>\n  <li>Return the receiver.</li>\n  </ol></li>\n  </ul>\n</blockquote>\n\n<p>This seems to imply that it is indeed completely safe in the sense of 1., 2., 4., and 5. above.</p>\n\n<p><a href=\"http://ruby-doc.org/core-2.2.2/Array.html#method-i-each\" rel=\"nofollow\">The documentation</a> says:</p>\n\n<blockquote>\n  <h1><code>each { |item| block }</code> \u2192 <code>ary</code></h1>\n  \n  <p>Calls the given block once for each element in <code>self</code>, passing that element as a parameter.</p>\n</blockquote>\n\n<p>Again, this seems to imply the same thing as the spec.</p>\n\n<p>Unfortunately, <em>none</em> of the currently existing Ruby implementations interpret the spec in this way.</p>\n\n<p>What <em>actually</em> happens in MRI and YARV is the following: the mutation to the array, including any shifting of the elements and/or indices becomes visible immediately, including to the internal implementation of the iterator code which is based on array indices. So, if you delete an element at or before the position you are currently iterating, you will skip the <em>next</em> element, whereas if you delete an element <em>after</em> the position you are currently iterating, you will skip <em>that</em> element. For <code>each_with_index</code>, you will also observe that all elements after the deleted element have their indices shifted (or rather the other way around: the indices stay put, but the elements are shifted).</p>\n\n<p>So, this behavior is \"safe\" in the sense of 1., 2., and 4.</p>\n\n<p>The other Ruby implementations <em>mostly</em> copy this (undocumented) behavior, but being undocumented, you cannot rely on it, and in fact, I believe at least one did experiment briefly with raising some sort of <code>ConcurrentModificationException</code> instead.</p>\n"}], "owner": {"reputation": 2652, "user_id": 968531, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/181a8764ddf31a43d2f740e61be7ad73?s=128&d=identicon&r=PG", "display_name": "NobodysNightmare", "link": "https://stackoverflow.com/users/968531/nobodysnightmare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1217, "favorite_count": 1, "accepted_answer_id": 31295448, "answer_count": 5, "score": 8, "last_activity_date": 1436426584, "creation_date": 1436363152, "last_edit_date": 1495542687, "question_id": 31294630, "link": "https://stackoverflow.com/questions/31294630/is-it-safe-to-delete-from-an-array-inside-each", "title": "Is it safe to delete from an Array inside each?", "body": "<p>Is it possible to safely delete elements from an <code>Array</code> while iterating over it via <code>each</code>? A first test looks promising:</p>\n\n<pre><code>a = (1..4).to_a\na.each { |i| a.delete(i) if i == 2 }\n# =&gt; [1, 3, 4] \n</code></pre>\n\n<p>However, I could not find hard facts on:</p>\n\n<ul>\n<li>Whether it is safe (by design)</li>\n<li>Since which Ruby version it is safe</li>\n</ul>\n\n<p>At some points in the past, it seems that it was <a href=\"https://stackoverflow.com/a/3260715/968531\">not possible to do</a>:</p>\n\n<blockquote>\n  <p>It's not working because Ruby exits the <code>.each</code> loop when attempting to delete something.</p>\n</blockquote>\n\n<p>The <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-each\" rel=\"nofollow noreferrer\">documentation</a> does not state anything about deletability during iteration.</p>\n\n<p>I am not looking for <code>reject</code> or <code>delete_if</code>. I want to do things with the elements of an array, and sometimes also remove an element from the array (after I've done other things with said element).</p>\n\n<p><strong>Update 1:</strong> I was not very clear on my definition of \"safe\", what I meant was:</p>\n\n<ul>\n<li>do not raise any exceptions</li>\n<li>do not skip any element in the <code>Array</code></li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 11665, "user_id": 729120, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/678e2e98efa6d91112be6e62dfd8ab04?s=128&d=identicon&r=PG", "display_name": "m_x", "link": "https://stackoverflow.com/users/729120/m-x"}, "edited": false, "score": 0, "creation_date": 1436361253, "post_id": 31293531, "comment_id": 50578286, "body": "what is exactly the error ? HTTP 505 seems really odd"}, {"owner": {"reputation": 2314, "user_id": 2882921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ffb2397ff2a97e133bdaa6cb2b449b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Kruczek", "link": "https://stackoverflow.com/users/2882921/piotr-kruczek"}, "edited": false, "score": 0, "creation_date": 1436361502, "post_id": 31293531, "comment_id": 50578482, "body": "what is <code>@commentable</code> in your create action? do you define it somewhere?"}, {"owner": {"reputation": 2208, "user_id": 1231365, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/e1iZm.jpg?s=128&g=1", "display_name": "kirqe", "link": "https://stackoverflow.com/users/1231365/kirqe"}, "edited": false, "score": 0, "creation_date": 1436361654, "post_id": 31293531, "comment_id": 50578612, "body": "updated the question"}, {"owner": {"reputation": 4662, "user_id": 2456549, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Uz71.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/2456549/justin"}, "edited": false, "score": 1, "creation_date": 1436362989, "post_id": 31293531, "comment_id": 50579661, "body": "To easily debug this, in your JavaScript console, click the Network tab. Then re-submit the form, and watch for the request to show up in that tab. When it does, click it, and then click the <i>Response</i> or <i>Preview</i> tab to the right. It should tell you exactly what the error is."}], "answers": [{"tags": [], "owner": {"reputation": 2208, "user_id": 1231365, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/e1iZm.jpg?s=128&g=1", "display_name": "kirqe", "link": "https://stackoverflow.com/users/1231365/kirqe"}, "is_accepted": true, "score": 0, "last_activity_date": 1436364994, "last_edit_date": 1436364994, "creation_date": 1436364312, "answer_id": 31295111, "question_id": 31293531, "link": "https://stackoverflow.com/questions/31293531/rails-polymorphic-comments-ajax-500-internal-server-error/31295111#31295111", "title": "Rails polymorphic comments ajax - 500 (Internal Server Error)", "body": "<p>updated create.js with instance variable for comment and it works now.</p>\n\n<pre><code>&lt;% unless @comment.errors.any? %&gt;\n$(\"ul.comments\").append('&lt;%= j render partial: \"comments/comment\", locals:{comment: @comment} %&gt;')\n$(\"#new_comment\")[0].reset();\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 2208, "user_id": 1231365, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/e1iZm.jpg?s=128&g=1", "display_name": "kirqe", "link": "https://stackoverflow.com/users/1231365/kirqe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 31295111, "answer_count": 1, "score": 0, "last_activity_date": 1436364994, "creation_date": 1436360520, "last_edit_date": 1436364509, "question_id": 31293531, "link": "https://stackoverflow.com/questions/31293531/rails-polymorphic-comments-ajax-500-internal-server-error", "title": "Rails polymorphic comments ajax - 500 (Internal Server Error)", "body": "<p>I used this tutorial for making polymorphic comments </p>\n\n<p><a href=\"https://gorails.com/episodes/comments-with-polymorphic-associations\" rel=\"nofollow noreferrer\">https://gorails.com/episodes/comments-with-polymorphic-associations</a></p>\n\n<p>It works fine but when I set remote true to my comments form I got 505 error(the new comment is not appended to the list) when trying to add a new comment.</p>\n\n<p>But when I reload the page the new comment appears in the list.</p>\n\n<p><strong>What can be wrong here?</strong></p>\n\n<p>I got this files in views/comments folder:</p>\n\n<p><img src=\"https://i.stack.imgur.com/zZ9El.png\" alt=\"enter image description here\"></p>\n\n<p><strong>create.js</strong></p>\n\n<pre><code>&lt;% unless @comment.errors.any? %&gt;\n$(\"ul.comments\").append('&lt;%= j render \"comments/comment\" %&gt;')\n$(\"#new_comment\")[0].reset();\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>_form.html.erb</strong></p>\n\n<pre><code>&lt;%= simple_form_for([commentable, Comment.new], remote: true) do |f| %&gt;\n  &lt;%= f.input :body, label: false %&gt;\n  &lt;%= f.button :submit, \"Submit\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>comments_controller.rb</strong></p>\n\n<pre><code>  def create\n    @comment = @commentable.comments.new(comment_params)\n    @comment.user = current_user\n    @comment.save\n    respond_to do |format|\n      format.html { redirect_to @commentable, notice: \"Your comment was successfully added.\"}\n      format.js\n    end\n  end\n</code></pre>\n\n<p><strong>_comment.html.erb</strong></p>\n\n<pre><code>  &lt;li class=\"comment\"&gt;\n    &lt;b&gt;&lt;%= comment.user.try(:username) %&gt;:&lt;/b&gt;\n    &lt;%= comment.body%&gt;\n  &lt;/li&gt;\n</code></pre>\n\n<p>console</p>\n\n<p><img src=\"https://i.stack.imgur.com/yG3KX.png\" alt=\"enter image description here\"></p>\n\n<p><strong>UP</strong></p>\n\n<p>I got this routes for post </p>\n\n<pre><code>  resources :posts do \n    resources :comments, module: :posts\n  end\n</code></pre>\n\n<p>+\ncontrollers/posts/comments_controller</p>\n\n<pre><code>class Posts::CommentsController &lt; CommentsController\n  before_action :set_commentable\n\n  private\n  def set_commentable\n    @commentable = Post.friendly.find(params[:post_id])\n  end\nend\n</code></pre>\n\n<p>The folder structure looks almost the same as here\n<a href=\"https://github.com/excid3/gorails-episode-36/tree/master/app/controllers\" rel=\"nofollow noreferrer\">https://github.com/excid3/gorails-episode-36/tree/master/app/controllers</a></p>\n\n<p>the response tab shows this</p>\n\n<pre><code>undefined local variable or method `comment' for #&lt;#&lt;Class:0x007f993d3c5450&gt;:0x007f99450a6190&gt;\nTrace of template inclusion: app/views/comments/create.js.erb\n</code></pre>\n\n<p>and when I replace </p>\n\n<p>&lt;%= j render @comment %> with some text it appends to the list on submit</p>\n\n<p>ok the problem is with _comment.html erb</p>\n"}, {"tags": ["ruby", "design-patterns"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1436363338, "post_id": 31293266, "comment_id": 50579946, "body": "Can you please provide a bit more code as it will make it easier to determine what pattern would be most suitable. Whether it be module inclusion, inheritance or possibly even a decorator pattern (<a href=\"https://robots.thoughtbot.com/evaluating-alternative-decorator-implementations-in\" rel=\"nofollow noreferrer\">Nice Article</a>) is all kind of dependent on the objects themselves and how they interact."}, {"owner": {"reputation": 1066, "user_id": 3215470, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rclPe.jpg?s=128&g=1", "display_name": "Andy Jones", "link": "https://stackoverflow.com/users/3215470/andy-jones"}, "edited": false, "score": 0, "creation_date": 1436428274, "post_id": 31293266, "comment_id": 50610870, "body": "<i>&quot;I&#39;ve read that in most cases I should use modules over inheritance&quot;</i> -- in my opinion, this is a <b>really</b> bad idea; sorry.  Almost everything you need to do can be done with single inheritance, and the results will be clean and readable. You will occasionally find exceptions, and for this, there are mixins."}], "answers": [{"tags": [], "owner": {"reputation": 2314, "user_id": 2882921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ffb2397ff2a97e133bdaa6cb2b449b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Kruczek", "link": "https://stackoverflow.com/users/2882921/piotr-kruczek"}, "is_accepted": true, "score": 3, "last_activity_date": 1436360304, "creation_date": 1436360304, "answer_id": 31293449, "question_id": 31293266, "link": "https://stackoverflow.com/questions/31293266/is-overriding-a-modules-method-a-good-convention/31293449#31293449", "title": "Is overriding a module&#39;s method a good convention?", "body": "<p>The rule I usually follow is: when the method has to be defined in the class including the module (e.g. module acts as an interface) i always do:</p>\n\n<pre><code>def method_that_needs_to_be_defined\n  raise NoMethodError\nend\n</code></pre>\n\n<p>It's good practice, prevents unexpected calls to yet undefined method.</p>\n\n<p>Example:</p>\n\n<pre><code>module Speaker\n  def speak\n    raise NoMethodError\n  end\nend\n\nclass Bird &lt; Animal\n  include Speaker\n\n  def speak\n    'chirp'\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 5017, "user_id": 2047418, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1d49bccfa9d2c633db6f854e67b88362?s=128&d=identicon&r=PG", "display_name": "Filip Bartuzi", "link": "https://stackoverflow.com/users/2047418/filip-bartuzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 1, "accepted_answer_id": 31293449, "answer_count": 1, "score": 3, "last_activity_date": 1436360304, "creation_date": 1436359827, "question_id": 31293266, "link": "https://stackoverflow.com/questions/31293266/is-overriding-a-modules-method-a-good-convention", "title": "Is overriding a module&#39;s method a good convention?", "body": "<p>I've got some kind of <code>template patterned</code> module with few method defined (default behaviour) and some which look like method below:</p>\n\n<pre><code>def tax\n  1.2\nend\n\ndef do_something!\n  raise \"Please implement it in your class\"\nend\n</code></pre>\n\n<p>I've read that in most cases I should use modules over inheritance because of inheritance capabilities (single inheritance) and when I don't need <code>super()</code> at all.</p>\n\n<p>But I feel a bit guilty to override all <code>raise \"...\"</code> methods and also some default (like <code>tax</code> method), because it is module.</p>\n\n<p>What do you think?</p>\n\n<p>When I need to override methods should I rather use inheritance or including modules?</p>\n"}, {"tags": ["ruby", "chef-infra", "chef-recipe"], "answers": [{"tags": [], "owner": {"reputation": 122, "user_id": 5215544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/701302c64731284bda7726a924103ae6?s=128&d=identicon&r=PG", "display_name": "BaZZiliO", "link": "https://stackoverflow.com/users/5215544/bazzilio"}, "is_accepted": false, "score": 0, "last_activity_date": 1441708778, "creation_date": 1441708778, "answer_id": 32455603, "question_id": 31293154, "link": "https://stackoverflow.com/questions/31293154/how-to-get-started-with-chef-cookbook/32455603#32455603", "title": "how to get started with Chef cookbook?", "body": "<p>There're many community created cookbooks for many applications.\nYou can find many cookbooks on <a href=\"https://supermarket.chef.io/\" rel=\"nofollow\">chef supermarket</a>.</p>\n\n<p>In general, you can install packet by use your packet manager this way:\nFor another supported install options you can look to cookbook.</p>\n\n<pre><code>    package \"#{res_name} :create nginx\" do\n      package_name 'nginx'\n      action :install\n    end\n</code></pre>\n\n<p>If you want install ruby rvm package, you can use <a href=\"https://docs.chef.io/resource_gem_package.html\" rel=\"nofollow\">gem_package</a> statement:</p>\n\n<pre><code>    gem_package 'name' do\n      clear_sources              TrueClass, FalseClass\n      gem_binary                 String\n      notifies                   # see description\n      options                    String\n      package_name               String, Array # defaults to 'name' if         not specified\n      provider                   Chef::Provider::Package::Rubygems\n      source                     String\n      subscribes                 # see description\n      timeout                    String, Integer\n      version                    String, Array\n      action                     Symbol # defaults to :install if not specified\n    end\n</code></pre>\n"}], "owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1441708778, "creation_date": 1436359593, "question_id": 31293154, "link": "https://stackoverflow.com/questions/31293154/how-to-get-started-with-chef-cookbook", "title": "how to get started with Chef cookbook?", "body": "<p>I have followed below mentioned article to configure apache, mysql, php using chef cookbook.</p>\n\n<p><a href=\"http://gettingstartedwithchef.com/first-steps-with-chef.html\" rel=\"nofollow\">http://gettingstartedwithchef.com/first-steps-with-chef.html</a></p>\n\n<p>My purpose was to write a standalone application, which will do all needed setup for mysql, apache, php etc. </p>\n\n<p>By following the article, I observed they are executing the chef commands to install stuffs &amp; getting modifying the configuration files manually. </p>\n\n<p>for example for the following command I wrote respective ruby equivalent: </p>\n\n<pre><code> rvm install ruby-2.1.2\nruby equivalent : `rvm install ruby-2.1.2`\n</code></pre>\n\n<p>Similar way, I found alternatives for the shell commands &amp; prepared my ruby code. </p>\n\n<p>I am not sure whether that's the right approach.</p>\n\n<p>2nd: how we can do custom functionality, let's say bundling a gemfile inside a project repo or running rails migrations. \nHow to perform those operations, please guide. </p>\n"}, {"tags": ["ruby", "meetup"], "answers": [{"tags": [], "owner": {"reputation": 2900, "user_id": 581665, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3a7d3308cfeb7ab814b0580de19ccc5f?s=128&d=identicon&r=PG", "display_name": "mbb", "link": "https://stackoverflow.com/users/581665/mbb"}, "is_accepted": true, "score": 0, "last_activity_date": 1450196911, "creation_date": 1450196911, "answer_id": 34294426, "question_id": 31293146, "link": "https://stackoverflow.com/questions/31293146/how-to-parse-rmeetup-response/34294426#34294426", "title": "How to parse rMeetup response", "body": "<p>I figured this out today. This is an example of confusing a method with a hash. The proper syntax is: </p>\n\n<pre><code>results.each do |k| puts k.members end\n</code></pre>\n\n<p>Because <code>members</code> is a <em>method</em> of the Meetup::Type::Group, at least from the looks of it. That's not how <a href=\"http://www.rubydoc.info/github/neektza/rmeetup/RMeetup/Type/Group#group-instance_method\" rel=\"nofollow\">it's documented</a>, but it works. </p>\n\n<p>The original syntax of <code>k[\"members\"]</code> would work if <code>k</code> was a hash: </p>\n\n<pre><code>irb(main):027:0&gt; k = {\"members\" =&gt; 1000}\n=&gt; {\"members\"=&gt;1000}\nirb(main):028:0&gt; k[\"members\"]\n=&gt; 1000\n</code></pre>\n"}], "owner": {"reputation": 2900, "user_id": 581665, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3a7d3308cfeb7ab814b0580de19ccc5f?s=128&d=identicon&r=PG", "display_name": "mbb", "link": "https://stackoverflow.com/users/581665/mbb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 34294426, "answer_count": 1, "score": 0, "last_activity_date": 1450196911, "creation_date": 1436359574, "question_id": 31293146, "link": "https://stackoverflow.com/questions/31293146/how-to-parse-rmeetup-response", "title": "How to parse rMeetup response", "body": "<p>I'm using <a href=\"https://rubygems.org/gems/rMeetup/versions/2.1.0\" rel=\"nofollow\">rMeetup gem</a> that queries via <a href=\"http://www.meetup.com/meetup_api/docs/2/events/\" rel=\"nofollow\">api version 2</a> and I don't understand how to extract the <code>\"members\"</code> value from a response. Here is where I get stuck (using <code>irb</code> for this example):</p>\n\n<pre><code>&gt;&gt; require 'rmeetup'\n=&gt; true\n&gt;&gt; client = RMeetup::Client.new do |config| config.api_key = \"LALAMYKEYNOTYOURS\" end\n=&gt; #&lt;RMeetup::Client:0x007fbda4b58060 @configuration=#&lt;RMeetup::Configuration:0x007fbda4b63fa0 @api_key=\"LALAMYKEYNOTYOURS\"&gt;&gt;\n&gt;&gt; results = client.fetch(:groups, {:group_urlname =&gt; 'San-Francisco-Riak-Meetup'})\n=&gt; [#&lt;RMeetup::Type::Group:0x007fbda4b80088 @group={\"utc_offset\"=&gt;-25200000, \"country\"=&gt;\"US\", \"visibility\"=&gt;\"public\", \"city\"=&gt;\"San Francisco\", \"timezone\"=&gt;\"US/Pacific\", \"created\"=&gt;1278976613000, \"topics\"=&gt;[{\"urlkey\"=&gt;\"opensource\", \"name\"=&gt;\"Open Source\", \"id\"=&gt;563}, {\"urlkey\"=&gt;\"web\", \"name\"=&gt;\"Web Technology\", \"id\"=&gt;10209}, {\"urlkey\"=&gt;\"big-data\", \"name\"=&gt;\"Big Data\", \"id\"=&gt;18062}, {\"urlkey\"=&gt;\"database-development\", \"name\"=&gt;\"Database Development\", \"id\"=&gt;21506}, {\"urlkey\"=&gt;\"erlang-programming\", \"name\"=&gt;\"Erlang Programming\", \"id\"=&gt;46514}, {\"urlkey\"=&gt;\"nosql\", \"name\"=&gt;\"NoSQL\", \"id\"=&gt;58162}, {\"urlkey\"=&gt;\"riak\", \"name\"=&gt;\"Riak\", \"id\"=&gt;112355}, {\"urlkey\"=&gt;\"distributed-systems\", \"name\"=&gt;\"Distributed Systems\", \"id\"=&gt;113032}], \"link\"=&gt;\"http://www.meetup.com/San-Francisco-Riak-Meetup/\", \"rating\"=&gt;4.57, \"description\"=&gt;\"&lt;p&gt;A monthly meetup for those in the Bay Area to talk Riak, distributed systems, and app. development.&lt;/p&gt;\", \"lon\"=&gt;-122.4000015258789, \"group_photo\"=&gt;{\"highres_link\"=&gt;\"http://photos4.meetupstatic.com/photos/event/e/6/9/e/highres_16559038.jpeg\", \"photo_id\"=&gt;16559038, \"photo_link\"=&gt;\"http://photos4.meetupstatic.com/photos/event/e/6/9/e/600_16559038.jpeg\", \"thumb_link\"=&gt;\"http://photos2.meetupstatic.com/photos/event/e/6/9/e/thumb_16559038.jpeg\"}, \"join_mode\"=&gt;\"open\", \"organizer\"=&gt;{\"member_id\"=&gt;140545442, \"name\"=&gt;\"Basho\"}, \"members\"=&gt;696, \"name\"=&gt;\"San Francisco Riak Meetup\", \"id\"=&gt;1674527, \"state\"=&gt;\"CA\", \"urlname\"=&gt;\"San-Francisco-Riak-Meetup\", \"category\"=&gt;{\"name\"=&gt;\"tech\", \"id\"=&gt;34, \"shortname\"=&gt;\"tech\"}, \"lat\"=&gt;37.790000915527344, \"who\"=&gt;\"Riaktors\"}&gt;]\n&gt;&gt; results.each do |k| puts k[\"members\"] end\n</code></pre>\n\n<p>This is likely my misunderstanding of how to query the <code>@group</code> within this result. I haven't found anything that clarifies it despite similar questions on SO and other sites.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routing"], "comments": [{"owner": {"reputation": 11665, "user_id": 729120, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/678e2e98efa6d91112be6e62dfd8ab04?s=128&d=identicon&r=PG", "display_name": "m_x", "link": "https://stackoverflow.com/users/729120/m-x"}, "edited": false, "score": 5, "creation_date": 1436361609, "post_id": 31292858, "comment_id": 50578566, "body": "my guess is that you&#39;ll have to monkey patch <a href=\"https://github.com/rails/rails/blob/048235b5642c1d33055926946d918b8427e19f5c/actionpack/lib/action_dispatch/routing/mapper.rb#L1348\" rel=\"nofollow noreferrer\">resources</a> to do this, but I <b>strongly</b> encourage you <i>not</i> to do this - Rails is all about conventions, and this would confuse the hell out of other devs that would read your code. One more explicit way to do things would be to use a <a href=\"http://edgeguides.rubyonrails.org/routing.html#routing-concerns\" rel=\"nofollow noreferrer\">routing concern</a> containing the modified post action and add <code>except: :create</code> to each <code>resources</code> call."}, {"owner": {"reputation": 11665, "user_id": 729120, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/678e2e98efa6d91112be6e62dfd8ab04?s=128&d=identicon&r=PG", "display_name": "m_x", "link": "https://stackoverflow.com/users/729120/m-x"}, "edited": false, "score": 5, "creation_date": 1436361724, "post_id": 31292858, "comment_id": 50578668, "body": "plus, you can also define a <code>custom_resources</code> method that would do what you already do manually, calling the original <code>resources</code> in the process."}, {"owner": {"reputation": 2408, "user_id": 313576, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6f94d2ed5e188be9865a531021b0afcd?s=128&d=identicon&r=PG", "display_name": "ivanreese", "link": "https://stackoverflow.com/users/313576/ivanreese"}, "reply_to_user": {"reputation": 11665, "user_id": 729120, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/678e2e98efa6d91112be6e62dfd8ab04?s=128&d=identicon&r=PG", "display_name": "m_x", "link": "https://stackoverflow.com/users/729120/m-x"}, "edited": false, "score": 0, "creation_date": 1496612370, "post_id": 31292858, "comment_id": 75719942, "body": "The suggestion in your second comment is what I&#39;ve ended up doing. It works well enough. If you wanted to rewrite it as an answer, I&#39;d mark it correct."}], "answers": [{"comments": [{"owner": {"reputation": 2408, "user_id": 313576, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6f94d2ed5e188be9865a531021b0afcd?s=128&d=identicon&r=PG", "display_name": "ivanreese", "link": "https://stackoverflow.com/users/313576/ivanreese"}, "edited": false, "score": 0, "creation_date": 1522098665, "post_id": 49457642, "comment_id": 86005394, "body": "Where would you recommend putting such a module? In the routes file? In, say, <code>app&#47;services</code>? In <code>lib</code>? In an initializer?  Also, I&#39;m not super up on my ruby. Is the way you&#39;re using <code>__send__</code> kosher? That seems like a monkey is being patched, possibly against its will."}], "tags": [], "owner": {"reputation": 733, "user_id": 327737, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d706c9d66528c133b40bc81795086bf?s=128&d=identicon&r=PG", "display_name": "aschepis", "link": "https://stackoverflow.com/users/327737/aschepis"}, "is_accepted": false, "score": 2, "last_activity_date": 1521835984, "creation_date": 1521835984, "answer_id": 49457642, "question_id": 31292858, "link": "https://stackoverflow.com/questions/31292858/customize-rails-default-resourceful-route-path/49457642#49457642", "title": "Customize Rails&#39; Default Resourceful Route Path", "body": "<p>You can make your life simpler by adding a module that does the overriding for you in a single place.  for instance:</p>\n\n<pre><code>module MyResources\n  def my_resources(resource_name, opts = {}, &amp;block)\n    opts = opts.merge(except: [:create])\n\n    resources(resource_name, opts, &amp;block)\n    post \"#{resource_name}/new\" =&gt; \"#{resource_name}#create\", as: \"new_{resource_name}\"    \n  end\nend\n\nActionDispatch::Routing::Mapper.__send__ :include, MyResources\n</code></pre>\n\n<p>Then in your routes.rb you can do:</p>\n\n<pre><code>my_resources :events\n</code></pre>\n"}], "owner": {"reputation": 2408, "user_id": 313576, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6f94d2ed5e188be9865a531021b0afcd?s=128&d=identicon&r=PG", "display_name": "ivanreese", "link": "https://stackoverflow.com/users/313576/ivanreese"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 672, "favorite_count": 2, "answer_count": 1, "score": 6, "last_activity_date": 1521835984, "creation_date": 1436358899, "last_edit_date": 1436359398, "question_id": 31292858, "link": "https://stackoverflow.com/questions/31292858/customize-rails-default-resourceful-route-path", "title": "Customize Rails&#39; Default Resourceful Route Path", "body": "\n\n<h1>TL;DR</h1>\n\n<p>I'd like to change the default behaviour of Rails resourceful routing, to move the <code>create</code> path for all resources so that it's a POST to <code>/resources/new</code> rather than <code>/resources</code>.</p>\n\n<p><br></p>\n\n<h1>The Setup</h1>\n\n<p>Let's presume a resourceful route specified like so:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># routes.rb\n\nresources :events\n</code></pre>\n\n<p><br></p>\n\n<p>The actual routes that will be generated are:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>$ rake routes\n\n    Prefix Verb   URI Pattern                Controller#Action\n    events GET    /events(.:format)          events#index\n           POST   /events(.:format)          events#create\n new_event GET    /events/new(.:format)      events#new\nedit_event GET    /events/:id/edit(.:format) events#edit\n     event GET    /events/:id(.:format)      events#show\n           PATCH  /events/:id(.:format)      events#update\n           PUT    /events/:id(.:format)      events#update\n           DELETE /events/:id(.:format)      events#destroy\n</code></pre>\n\n<p>N.B. that the <code>create</code> action is triggered by a POST to the <code>/events</code> path.</p>\n\n<p><br></p>\n\n<p>Now, if I want to change that path, I can do it \"manually\", on a per-resource basis:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># routes.rb\n\n# I've placed the routes in this order, and used `as: \"new_event\"`,\n# to avoid generating an `events_new` path helper.\n\npost 'events/new' =&gt; 'events#create', as: \"new_event\"\nresources :events, except: [:create]\n</code></pre>\n\n<p><br></p>\n\n<p>Here are the generated routes:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>$ rake routes\n\n    Prefix Verb   URI Pattern                Controller#Action\n new_event POST   /events/new(.:format)      events#create\n    events GET    /events(.:format)          events#index\n           GET    /events/new(.:format)      events#new\nedit_event GET    /events/:id/edit(.:format) events#edit\n     event GET    /events/:id(.:format)      events#show\n           PATCH  /events/:id(.:format)      events#update\n           PUT    /events/:id(.:format)      events#update\n           DELETE /events/:id(.:format)      events#destroy\n</code></pre>\n\n<p><br></p>\n\n<p>Great! The <code>create</code> action is now triggered by a POST to the <code>/events/new</code> path, rather than the <code>/events</code> path.</p>\n\n<p>Every other route/helper behaves exactly as before \u2014\u00a0including a GET to <code>/events/new</code>, and the <code>new_event</code> path/url helpers.</p>\n\n<p><br></p>\n\n<h1>The Question</h1>\n\n<p>Rather than manually overriding every <code>create</code> action, is there a way to just change the default path used for that particular action?</p>\n\n<p>Failing that, what other means could I use to change a bunch of resourceful routes, so that their create action would be moved to <code>/new</code> as above?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1436353833, "post_id": 31290814, "comment_id": 50572807, "body": "I suggest you read <a href=\"http://edgeguides.rubyonrails.org/active_record_migrations.html\" rel=\"nofollow noreferrer\">Active Record Migrations</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1940, "user_id": 1880920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HnZWe.jpg?s=128&g=1", "display_name": "Jonathan Vukovich-Tribouharet", "link": "https://stackoverflow.com/users/1880920/jonathan-vukovich-tribouharet"}, "is_accepted": false, "score": 3, "last_activity_date": 1436353994, "last_edit_date": 1436353994, "creation_date": 1436353881, "answer_id": 31290952, "question_id": 31290814, "link": "https://stackoverflow.com/questions/31290814/create-new-database-table-ruby-on-rails-schema-rb/31290952#31290952", "title": "Create new database table ruby on rails schema.rb", "body": "<p>If you read the first line of your <code>schema.rb</code> file you will see:</p>\n\n<pre><code># This file is auto-generated from the current state of the database. Instead\n# of editing this file, please use the migrations feature of Active Record to\n# incrementally modify your database, and then regenerate this schema definition.\n</code></pre>\n\n<p>I would recommand to do <code>rails g model label_info</code></p>\n"}, {"tags": [], "owner": {"reputation": 7453, "user_id": 3563993, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6e213cbcdd4a7b892589300ac92a49ab?s=128&d=identicon&r=PG", "display_name": "shilovk", "link": "https://stackoverflow.com/users/3563993/shilovk"}, "is_accepted": false, "score": 0, "last_activity_date": 1436354645, "creation_date": 1436354645, "answer_id": 31291231, "question_id": 31290814, "link": "https://stackoverflow.com/questions/31290814/create-new-database-table-ruby-on-rails-schema-rb/31291231#31291231", "title": "Create new database table ruby on rails schema.rb", "body": "<p>May be delete <code>:force =&gt; true</code>, because since you haven't created the table it keeps to create first.</p>\n\n<blockquote>\n  <p><strong>:force</strong> Set to true to drop the table before creating it. Defaults to false.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 910, "user_id": 2285073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9729693f4efa117c0997a61078bf1876?s=128&d=identicon&r=PG", "display_name": "Santanu", "link": "https://stackoverflow.com/users/2285073/santanu"}, "is_accepted": false, "score": 0, "last_activity_date": 1436358787, "creation_date": 1436358787, "answer_id": 31292804, "question_id": 31290814, "link": "https://stackoverflow.com/questions/31290814/create-new-database-table-ruby-on-rails-schema-rb/31292804#31292804", "title": "Create new database table ruby on rails schema.rb", "body": "<p>Either you have to destroy the model and recreate it or you have to change the migration number and rename the file, for the older schema version. You can use current time stamp. like <code>20150808114518_abc_xyz.rb</code></p>\n\n<p>Thanks!</p>\n"}], "owner": {"reputation": 2453, "user_id": 2647198, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/fhjZv.jpg?s=128&g=1", "display_name": "Vikram", "link": "https://stackoverflow.com/users/2647198/vikram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1006, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1436358787, "creation_date": 1436353487, "question_id": 31290814, "link": "https://stackoverflow.com/questions/31290814/create-new-database-table-ruby-on-rails-schema-rb", "title": "Create new database table ruby on rails schema.rb", "body": "<p>On my ruby on rails app i added following code in schema.rb file to create a new table in database </p>\n\n<pre><code>create_table \"label_info\", :force =&gt; true do |t|\n    t.text     \"body\"\n    t.string   \"title\"\n    t.integer  \"label_id\"\n  end\n</code></pre>\n\n<p>and then run rake db:migrate command  but nothing is happening. I thought it would create a new table in database .</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rbenv", "gitlab-ci-runner"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1436355571, "post_id": 31290123, "comment_id": 50573964, "body": "What is the output of <code>rbenv install 1.9.3-p551 &amp;&amp; rbenv global 1.9.3-p551 &amp;&amp; ruby -v</code>?"}, {"owner": {"reputation": 501, "user_id": 262575, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5213b326c19df5a05196ec652148b048?s=128&d=identicon&r=PG", "display_name": "James Smith", "link": "https://stackoverflow.com/users/262575/james-smith"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1436358350, "post_id": 31290123, "comment_id": 50576048, "body": "@mudasobwa Returns &quot;rbenv: no such command `install&#39;&quot;"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1436358448, "post_id": 31290123, "comment_id": 50576131, "body": "I doubt you installed <code>rbenv</code> as specified in link you provided: this command is a part of an installation process."}, {"owner": {"reputation": 501, "user_id": 262575, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5213b326c19df5a05196ec652148b048?s=128&d=identicon&r=PG", "display_name": "James Smith", "link": "https://stackoverflow.com/users/262575/james-smith"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1436358718, "post_id": 31290123, "comment_id": 50576343, "body": "If I log in to the machine and run that script it&#39;s fine. Definitely installed on the ci-runner machine."}], "owner": {"reputation": 501, "user_id": 262575, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5213b326c19df5a05196ec652148b048?s=128&d=identicon&r=PG", "display_name": "James Smith", "link": "https://stackoverflow.com/users/262575/james-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 757, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1436351647, "creation_date": 1436351647, "question_id": 31290123, "link": "https://stackoverflow.com/questions/31290123/rbenv-command-not-found-when-trying-to-run-gitlab-ci", "title": "&#39;Rbenv command not found&#39; when trying to run Gitlab CI", "body": "<p>When a job tries to execute it fails with the following:</p>\n\n<blockquote>\n  <p>gitlab-ci-multi-runner 0.4.2 (1e86428)<br>\n  Using Shell executor...<br>\n  stdin: is not a tty<br>\n  Running on ci-runner...<br>\n  Fetching changes...<br>\n  Checking out f8858e83 as master...</p>\n  \n  <p>whoami<br>\n  root<br>\n  echo $PATH \n  /usr/local/sbin:/usr/local/bin:/usr/bin:/usr/sbin:/sbin:/bin<br>\n  rbenv local 1.9.3-p551<br>\n  builds/95c60cbb/0/xxx/xxxx.sh: line 27: rbenv: command not found</p>\n  \n  <p>Build failed with exit status 127</p>\n</blockquote>\n\n<p>If I check $PATH as root on the ci-runner machine I have: <code>/root/.rbenv/plugins/ruby-build/bin:/root/.rbenv/shims:/root/.rbenv/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin</code></p>\n\n<p>The multi-runner script is being run as a service and is started using <code>sudo gitlab-ci-multi-runner start</code></p>\n\n<p>The executor is 'shell', and rbenv was setup using instructions at <a href=\"https://gorails.com/setup/ubuntu/14.04\" rel=\"nofollow\">https://gorails.com/setup/ubuntu/14.04</a></p>\n\n<p>Any thoughts on where I'm going wrong?</p>\n\n<p><strong>Update</strong> Added /root/.rbenv/bin to $PATH but now just get </p>\n\n<blockquote>\n  <p>gitlab-ci-multi-runner 0.4.2 (1e86428)<br>\n  Using Shell executor...<br>\n  stdin: is not a tty<br>\n  Running on ci-runner...<br>\n  Fetching changes...<br>\n  Checking out f8858e83 as master... </p>\n  \n  <p>export PATH=\"/root/.rbenv/bin:$PATH\"<br>\n  rbenv local 1.9.3-p551<br>\n  rbenv: version `1.9.3-p551' not installed  </p>\n  \n  <p>Build failed with exit status 1</p>\n</blockquote>\n\n<p>Ruby 1.9.3-p551 is installed though.</p>\n"}, {"tags": ["ruby", "gem"], "answers": [{"tags": [], "owner": {"reputation": 24567, "user_id": 53538, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/21a10c379a9dfc3284a4a75edb933745?s=128&d=identicon&r=PG", "display_name": "Guss", "link": "https://stackoverflow.com/users/53538/guss"}, "is_accepted": true, "score": 0, "last_activity_date": 1452422947, "creation_date": 1452422947, "answer_id": 34704531, "question_id": 31289821, "link": "https://stackoverflow.com/questions/31289821/how-to-read-the-gem-file-specifications-from-extconf-rb/34704531#34704531", "title": "How to read the gem file specifications from extconf.rb?", "body": "<p>The <code>Gem::Specification</code> class can be used to load and parse the <code>gemspec</code>. I'm using the following code in <code>ext/Rakefile</code> to perform tasks based on the <code>gemspec</code> file:</p>\n\n<pre><code>task :default do\n  gemspec = File.absolute_path('../gemname.gemspec')\n  Gem::Specification::load(gemspec).requirements.each do |req|\n    verify_requirement(req)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 24567, "user_id": 53538, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/21a10c379a9dfc3284a4a75edb933745?s=128&d=identicon&r=PG", "display_name": "Guss", "link": "https://stackoverflow.com/users/53538/guss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 34704531, "answer_count": 1, "score": 2, "last_activity_date": 1452422947, "creation_date": 1436350869, "question_id": 31289821, "link": "https://stackoverflow.com/questions/31289821/how-to-read-the-gem-file-specifications-from-extconf-rb", "title": "How to read the gem file specifications from extconf.rb?", "body": "<p>I'm building a Ruby gem file that has various 3rd party executable requirements (some non-ruby tools that the gem will then use through system calls).</p>\n\n<p>The requirement list is specified using the gemspec informative <code>requirements</code> list, and I was tasked with creating a set up where that requirement list is verified during installation - essentially converting the <code>requirements</code> list from being informative to being authoritative.</p>\n\n<p>My initial approach is to use <code>extensions</code>, like in the <code>extconf.rb</code> pattern, to run some ruby code during installation that will verify the list of requirements and fail the installation if the requirements are not met.</p>\n\n<p>So my current implementation is using a <code>ext/Rakefile</code>, that reads gemspec file using a hard-coded path, parses the <code>requirements</code> list using a custom (but straight-forward and simple) syntax and run some simple tests on the required executables. </p>\n\n<p>I would really want to factor out the dependency on knowing the path to the gemspec file, so I can reuse the code in a modular way on other projects.</p>\n\n<p>For completion (and in the hopes that it will be useful for someone), here's my code - which uses the <code>Gem::Ext::Builder</code> \"Rakefile mode\" to just run some arbitrary code.</p>\n\n<pre><code>require 'rubygems'\nrequire 'mkmf'\n\ndef verify_requirement(reqspec)\n  exe, version_spec, version_regex = reqspec.split(/\\s*,\\s*/,3)\n\n  exe = $1 if exe =~ /\\[([^\\]]+)\\]/ # support human readable alias for executable name\n\n  abort \"Missing required executable #{exe}!\" unless find_executable(exe)\n  return unless version_spec # no version is specified, so executable existing is good enough\n\n  version = %x|#{exe} --version 2&gt;&amp;1|.chomp\n  version = %x|#{exe} -version 2&gt;&amp;1|.chomp unless $?.success? \n  abort \"Error checking for version of #{exe}: (#{$?.exitstatus}) #{version}\" unless $?.success?\n\n  if version_regex\n    abort \"Version test '#{version_regex}' failed to match '#{version}'!\" unless version =~ /#{version_regex}/m\n    abort \"Version test '#{version_regex}' failed to generate a version number!\" unless $1\n    version = $1\n  end\n\n  abort \"Failed to locate a valid version number for #{exe}, found '#{version}'\" unless version =~ /^[0-9\\.]+/\n  abort \"Insufficient version '#{version}' for #{exe} - requires #{version_spec}\"  unless Gem::Dependency.new(exe, version_spec).match? exe, version\nend\n\ntask :default do\n  gemspec = File.absolute_path('../my.gemspec')\n  Gem::Specification::load(gemspec).requirements.each do |req|\n    verify_requirement(req)\n  end\nend\n</code></pre>\n\n<p>This code requires that the <code>requirements</code> uses either of these syntaxes:</p>\n\n<ul>\n<li><code>exe-file[, &lt;semantic-version-spec&gt;[, &lt;version-garabbing-regex&gt;]]</code></li>\n<li><code>alias '[' exe-file ']'[, &lt;semantic-version-spec&gt;[, &lt;version-garabbing-regex&gt;]]</code></li>\n</ul>\n\n<p>For example:</p>\n\n<pre><code>spec.requirements &lt;&lt; 'sox'\nspec.requirements &lt;&lt; 'ffmpeg, &gt;= 2.5, ffmpeg version ([\\d\\.]+)'\nspec.requirements &lt;&lt; 'ImageMagick [convert], &gt;= 6.7.5, ImageMagick ([\\d\\.]+)'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "twilio", "credentials"], "answers": [{"comments": [{"owner": {"reputation": 259, "user_id": 2657500, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JSrW2.png?s=128&g=1", "display_name": "jmolina", "link": "https://stackoverflow.com/users/2657500/jmolina"}, "edited": false, "score": 0, "creation_date": 1436352422, "post_id": 31290268, "comment_id": 50571951, "body": "Here: <a href=\"https://www.twilio.com/docs/api/rest/test-credentials#test-calls\" rel=\"nofollow noreferrer\">twilio.com/docs/api/rest/test-credentials#test-calls</a> I can see making calls... I guess it is from server-side, but just guessing. It is like this? So there is no way to use test-credentials from my client?"}, {"owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "reply_to_user": {"reputation": 259, "user_id": 2657500, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JSrW2.png?s=128&g=1", "display_name": "jmolina", "link": "https://stackoverflow.com/users/2657500/jmolina"}, "edited": false, "score": 0, "creation_date": 1436353390, "post_id": 31290268, "comment_id": 50572560, "body": "I&#39;m afraid not, you can&#39;t create capability tokens with test credentials. You need to use production credentials I&#39;m afraid."}], "tags": [], "owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "is_accepted": false, "score": 0, "last_activity_date": 1436352045, "creation_date": 1436352045, "answer_id": 31290268, "question_id": 31289818, "link": "https://stackoverflow.com/questions/31289818/twilio-test-credentials/31290268#31290268", "title": "Twilio Test Credentials", "body": "<p>Twilio developer evangelist here.</p>\n\n<p>I'm afraid the test credentials don't cover using the API for Twilio Client applications. In fact, the test credentials are very limited and best used for  testing failures from the Twilio API. Please see this article on the <a href=\"https://www.twilio.com/docs/api/rest/test-credentials\" rel=\"nofollow\">Twilio Test Credentials</a> for the full details.</p>\n"}], "owner": {"reputation": 259, "user_id": 2657500, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JSrW2.png?s=128&g=1", "display_name": "jmolina", "link": "https://stackoverflow.com/users/2657500/jmolina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 280, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436352045, "creation_date": 1436350861, "question_id": 31289818, "link": "https://stackoverflow.com/questions/31289818/twilio-test-credentials", "title": "Twilio Test Credentials", "body": "<p>I'm trying to use my test credentials to make a call from my browser, and a js error is always raising before making any call:</p>\n\n<pre><code> Object { message=\"No valid account\",  code=31203}\n</code></pre>\n\n<p>I put my test credentials everywhere and I used my app_sid to generate a token using Twilio Capability like this: <a href=\"https://github.com/twilio/twilio-ruby#getting-started-with-client-capability-tokens\" rel=\"nofollow\">https://github.com/twilio/twilio-ruby#getting-started-with-client-capability-tokens</a> </p>\n\n<p>I was able to use this app with production credentials, but not for test.</p>\n\n<p>What is missing?</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["ruby", "csv", "elasticsearch", "logstash"], "answers": [{"tags": [], "owner": {"reputation": 10485, "user_id": 414355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e8d6568a8877f85d0b734278e733be9?s=128&d=identicon&r=PG", "display_name": "Magnus B&#228;ck", "link": "https://stackoverflow.com/users/414355/magnus-b%c3%a4ck"}, "is_accepted": true, "score": 1, "last_activity_date": 1436352286, "creation_date": 1436352286, "answer_id": 31290355, "question_id": 31289813, "link": "https://stackoverflow.com/questions/31289813/using-logstash-ruby-filter-to-parse-csv-file/31290355#31290355", "title": "Using Logstash Ruby filter to parse csv file", "body": "<p>The reason you're getting a syntax error is most likely because you have unescaped double quotes inside the double quoted string. Either make the string single quoted or keep it double quoted but use single quotes inside. I also don't understand how that code is supposed to work.</p>\n\n<p>But that aside, why use a ruby filter in the first place? You can use a csv filter for the CSV parsing and a couple of standard filters to transform 123456789 to 4.56(789).</p>\n\n<pre><code>filter {\n  # Parse the CSV fields and then delete the 'message' field.\n  csv {\n    remove_field =&gt; [\"message\"]\n  }\n  # Given an input such as 123456789, extract 4, 56, and 789 into\n  # their own fields.\n  grok {\n    match =&gt; [\n      \"column3\",\n      \"\\d{3}(?&lt;intpart&gt;\\d)(?&lt;fractionpart&gt;\\d{2})(?&lt;parenpart&gt;\\d{3})\"\n    ]\n  }\n  # Put the extracted fields together into a single field again,\n  # then delete the temporary fields.\n  mutate {\n    replace =&gt; [\"column3\", \"%{intpart}.%{fractionpart}(%{parenpart})\"]\n    remove_field =&gt; [\"intpart\", \"factionpart\", \"parenpart\"]\n  }\n}\n</code></pre>\n\n<p>The temporary fields have really bad names in the example above since I don't know what they represent. Also, depending on what the input can look like you may have to adjust the grok expression. As it stands now it assumes nine-digit input.</p>\n"}], "owner": {"reputation": 45, "user_id": 3158077, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a2601c4284ad8f35c68e8da0f10078f2?s=128&d=identicon&r=PG&f=1", "display_name": "Jaskamal kainth", "link": "https://stackoverflow.com/users/3158077/jaskamal-kainth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1951, "favorite_count": 0, "accepted_answer_id": 31290355, "answer_count": 1, "score": 1, "last_activity_date": 1436352286, "creation_date": 1436350854, "last_edit_date": 1436351439, "question_id": 31289813, "link": "https://stackoverflow.com/questions/31289813/using-logstash-ruby-filter-to-parse-csv-file", "title": "Using Logstash Ruby filter to parse csv file", "body": "<p>I have an elasticsearch index which I am using to index a set of documents.</p>\n\n<p>These documents are originally in csv format and I am looking parse these using logstash.</p>\n\n<p>My problem is that I have something along the following lines.</p>\n\n<blockquote>\n  <p>field1,field2,field3,xyz,abc</p>\n</blockquote>\n\n<p>field3 is something like 123456789 and I want to parse it as 4.56(789) using ruby code filter.</p>\n\n<p>My try:</p>\n\n<p>I tried with stdin and stdout with the following  logstash.conf .</p>\n\n<pre><code>input {\n        stdin {\n        }\n}\n\nfilter {\n        ruby {\n                code =&gt; \"\n                  b = event[\"message\"]\n                  string2=\"\"\n                  for counter in (3..(num.size-1))\n                         if counter == 4\n                                string2+= '_'+ num[counter]\n                         elsif counter ==  6\n                                string2+= '('+num[counter]\n                         elsif counter == 8\n                                string2+= num[counter]  +')'\n                         else\n                                string2+= num[counter]\n                         end\n\n                  end\n\n                 event[\"randomcheck\"] = string2\n\n                \"\n        }\n}\n\n\noutput {\n        stdout {\n                codec=&gt;rubydebug\n        }\n}\n</code></pre>\n\n<p>I am getting syntax error using this.</p>\n\n<p>My final aim is to use this with my csv file , but first I was trying this with stdin and stdout. </p>\n\n<p>Any help will be highly appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "elasticsearch", "environment", "elasticsearch-rails"], "comments": [{"owner": {"reputation": 15391, "user_id": 1679537, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/98a2b2fb7ba8e1c1fa8e7bff95d523de?s=128&d=identicon&r=PG", "display_name": "xlecoustillier", "link": "https://stackoverflow.com/users/1679537/xlecoustillier"}, "edited": false, "score": 1, "creation_date": 1436350415, "post_id": 31289552, "comment_id": 50570722, "body": "Hard to tell without some more information."}, {"owner": {"reputation": 318, "user_id": 3664194, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001800281383/picture?type=large", "display_name": "Michael Kosyk", "link": "https://stackoverflow.com/users/3664194/michael-kosyk"}, "reply_to_user": {"reputation": 15391, "user_id": 1679537, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/98a2b2fb7ba8e1c1fa8e7bff95d523de?s=128&d=identicon&r=PG", "display_name": "xlecoustillier", "link": "https://stackoverflow.com/users/1679537/xlecoustillier"}, "edited": false, "score": 0, "creation_date": 1436350524, "post_id": 31289552, "comment_id": 50570788, "body": "I would gladly provide more information but i&#39;m new to elasticsearch and elasticsearch-rails gem so i quite don&#39;t know what data to provide."}], "answers": [{"tags": [], "owner": {"reputation": 318, "user_id": 3664194, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001800281383/picture?type=large", "display_name": "Michael Kosyk", "link": "https://stackoverflow.com/users/3664194/michael-kosyk"}, "is_accepted": false, "score": 0, "last_activity_date": 1436353438, "creation_date": 1436353438, "answer_id": 31290796, "question_id": 31289552, "link": "https://stackoverflow.com/questions/31289552/elasticsearch-rails-is-searching-in-wrong-index/31290796#31290796", "title": "Elasticsearch-rails is searching in wrong index", "body": "<p>Ok, so the problem was not with bad index naming. The index was not created at all, which is super weird (i made the same thing on my local machine and it was working, the index was created).</p>\n\n<p>I just added a rake task for creating the index.</p>\n"}, {"comments": [{"owner": {"reputation": 318, "user_id": 3664194, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001800281383/picture?type=large", "display_name": "Michael Kosyk", "link": "https://stackoverflow.com/users/3664194/michael-kosyk"}, "edited": false, "score": 0, "creation_date": 1436362514, "post_id": 31292902, "comment_id": 50579293, "body": "The index was not actually created which is odd. Product.import created the index locally, but on the server - no. I had to create it on my own by Product.create_index. Product is my model."}, {"owner": {"reputation": 910, "user_id": 2285073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9729693f4efa117c0997a61078bf1876?s=128&d=identicon&r=PG", "display_name": "Santanu", "link": "https://stackoverflow.com/users/2285073/santanu"}, "reply_to_user": {"reputation": 318, "user_id": 3664194, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001800281383/picture?type=large", "display_name": "Michael Kosyk", "link": "https://stackoverflow.com/users/3664194/michael-kosyk"}, "edited": false, "score": 1, "creation_date": 1436445157, "post_id": 31292902, "comment_id": 50622345, "body": "Yes rake task is fine. You can do it in a callback <code>after_commit</code>. vote my ans plz."}], "tags": [], "owner": {"reputation": 910, "user_id": 2285073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9729693f4efa117c0997a61078bf1876?s=128&d=identicon&r=PG", "display_name": "Santanu", "link": "https://stackoverflow.com/users/2285073/santanu"}, "is_accepted": true, "score": 1, "last_activity_date": 1436358985, "creation_date": 1436358985, "answer_id": 31292902, "question_id": 31289552, "link": "https://stackoverflow.com/questions/31289552/elasticsearch-rails-is-searching-in-wrong-index/31292902#31292902", "title": "Elasticsearch-rails is searching in wrong index", "body": "<p>Have you indexed the product? May be it will solve the issue.</p>\n\n<p>Thanks!</p>\n"}], "owner": {"reputation": 318, "user_id": 3664194, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001800281383/picture?type=large", "display_name": "Michael Kosyk", "link": "https://stackoverflow.com/users/3664194/michael-kosyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 31292902, "answer_count": 2, "score": 0, "last_activity_date": 1436358985, "creation_date": 1436350188, "question_id": 31289552, "link": "https://stackoverflow.com/questions/31289552/elasticsearch-rails-is-searching-in-wrong-index", "title": "Elasticsearch-rails is searching in wrong index", "body": "<p>I'm trying to deploy my app and index a model. Everything is working fine until i'm trying to actually get the data from elasticsearch.\nMy environment is staging but when i perform a search via a rest api i get an error</p>\n\n<pre><code>{\n  \"status\": \"error\",\n  \"messages\": \n  \"[404]{\\\"error\\\":\\\"IndexMissingException[[myapp_production_products] missing]\\\",\\\"status\\\":404}\"\n}\n</code></pre>\n\n<p>From this:</p>\n\n<pre><code>[myapp_production_products]\n</code></pre>\n\n<p>i deduced that it's trying to query elasticsearch on wrong environment.\nWhat is causing this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 7453, "user_id": 3563993, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6e213cbcdd4a7b892589300ac92a49ab?s=128&d=identicon&r=PG", "display_name": "shilovk", "link": "https://stackoverflow.com/users/3563993/shilovk"}, "is_accepted": true, "score": 2, "last_activity_date": 1436351919, "last_edit_date": 1436351919, "creation_date": 1436348763, "answer_id": 31289020, "question_id": 31288518, "link": "https://stackoverflow.com/questions/31288518/advanced-usage-of-add-index/31289020#31289020", "title": "Advanced usage of add_index", "body": "<p>For mysql try:</p>\n\n<pre><code>add_index \"users\", \"lower(ce_code)\", name: \"index_users_on_lower_ce_code\"\n</code></pre>\n\n<p>For PG try:</p>\n\n<p>install gem <a href=\"https://github.com/SchemaPlus/schema_plus_pg_indexes\" rel=\"nofollow\">\"schema_plus_pg_indexes\"</a></p>\n\n<pre><code>t.index expression: \"lower(ce_code)\", name: \"index_users_on_lower_ce_code\"\n</code></pre>\n"}], "owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 475, "favorite_count": 0, "accepted_answer_id": 31289020, "answer_count": 1, "score": 1, "last_activity_date": 1436351919, "creation_date": 1436347383, "question_id": 31288518, "link": "https://stackoverflow.com/questions/31288518/advanced-usage-of-add-index", "title": "Advanced usage of add_index", "body": "<p>In my Ruby on Rails project I have migration that creates case insensitive index for string column.</p>\n\n<pre><code>class AddCeCodeToUsers &lt; ActiveRecord::Migration\n  def change\n    add_column :users, :ce_code, :string\n\n    execute &lt;&lt;-SQL\n      CREATE UNIQUE INDEX index_users_on_lower_ce_code_index\n        ON users USING btree (lower(ce_code));\n    SQL\n  end\nend\n</code></pre>\n\n<p>This works as expected but I want to know is there any way to do the same using rails built_in add_index method?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "ruby-on-rails-3.2"], "comments": [{"owner": {"reputation": 812, "user_id": 1800474, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jwTww.jpg?s=128&g=1", "display_name": "RajG", "link": "https://stackoverflow.com/users/1800474/rajg"}, "edited": false, "score": 0, "creation_date": 1436348219, "post_id": 31288479, "comment_id": 50569302, "body": "Could you please explain me why you down voted it?"}], "answers": [{"comments": [{"owner": {"reputation": 812, "user_id": 1800474, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jwTww.jpg?s=128&g=1", "display_name": "RajG", "link": "https://stackoverflow.com/users/1800474/rajg"}, "edited": false, "score": 0, "creation_date": 1436354874, "post_id": 31289383, "comment_id": 50573509, "body": "Is there a source code for rack.hijack ? I can&#39;t seem to find it in rack? Thanks."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 812, "user_id": 1800474, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jwTww.jpg?s=128&g=1", "display_name": "RajG", "link": "https://stackoverflow.com/users/1800474/rajg"}, "edited": false, "score": 1, "creation_date": 1436425937, "post_id": 31289383, "comment_id": 50609451, "body": "@TheMouseMan it&#39;s implemented by the server. Here&#39;s how Puma implements <code>call</code>: <a href=\"https://github.com/puma/puma/blob/master/lib/puma/client.rb#L59\" rel=\"nofollow noreferrer\">github.com/puma/puma/blob/master/lib/puma/client.rb#L59</a>"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 1, "last_activity_date": 1436350384, "last_edit_date": 1436350384, "creation_date": 1436349749, "answer_id": 31289383, "question_id": 31288479, "link": "https://stackoverflow.com/questions/31288479/how-to-completely-stop-the-rails-action-from-responding-any-kind-of-http-status/31289383#31289383", "title": "How to completely stop the rails action from responding any kind of HTTP status?", "body": "<p>Although a REST API should probably send a valid HTTP response, you can suppress any output by closing the underlying output stream. This is exposed via Rack's <a href=\"http://www.rubydoc.info/github/rack/rack/file/SPEC#Hijacking\" rel=\"nofollow\">hijacking</a> API (assuming your server supports it):</p>\n\n<pre><code>def index\n  if env['rack.hijack?']\n    env['rack.hijack'].call\n    io = env['rack.hijack_io']\n    io.close\n  end\nend\n</code></pre>\n\n<p>This results in an empty reply, i.e. the server just closes the connection without sending any data:</p>\n\n<pre><code>$ curl -v http://localhost:3000/\n* Connected to localhost port 3000\n&gt; GET / HTTP/1.1\n&gt; User-Agent: curl/7.37.1\n&gt; Host: localhost:3000\n&gt; Accept: */*\n&gt;\n* Empty reply from server\n* Connection #0 to host localhost left intact\ncurl: (52) Empty reply from server\n</code></pre>\n"}], "owner": {"reputation": 812, "user_id": 1800474, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jwTww.jpg?s=128&g=1", "display_name": "RajG", "link": "https://stackoverflow.com/users/1800474/rajg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 31289383, "answer_count": 1, "score": 1, "last_activity_date": 1436350384, "creation_date": 1436347300, "last_edit_date": 1436348913, "question_id": 31288479, "link": "https://stackoverflow.com/questions/31288479/how-to-completely-stop-the-rails-action-from-responding-any-kind-of-http-status", "title": "How to completely stop the rails action from responding any kind of HTTP status?", "body": "<p><strong><em>RAILS 3.2.13. JRUBY 1.7.15. RUBY 1.9.3 as interpreter</em></strong></p>\n\n<p>Is there a way to kill a Rails action from responding at all? I want to do this to avoid any kind of response being sent back to anonymous hacker. There is a constraint check before index and if the constraint check fails, index method ideally should stop from responding. This is a small part on REST API in an effort to kill the action from sending any http status back. </p>\n\n<p>Any constructive suggestion are welcomed. </p>\n\n<p>i.e. </p>\n\n<pre><code>def index\n  # kill method, do not send any response at all. not even 500 error\nend\n</code></pre>\n\n<p>Thank you all for your help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 446, "user_id": 5061004, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/670869133047363/picture?type=large", "display_name": "Altay Mazlum", "link": "https://stackoverflow.com/users/5061004/altay-mazlum"}, "edited": false, "score": 1, "creation_date": 1436346045, "post_id": 31287934, "comment_id": 50567818, "body": "Please see <a href=\"http://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a> before you ask. There is no question in this one. Be more specific."}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 1, "creation_date": 1436346093, "post_id": 31287934, "comment_id": 50567859, "body": "Also please include your code which sets <code>guest_server_params</code>."}], "answers": [{"tags": [], "owner": {"reputation": 20989, "user_id": 148844, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/263aa1ae12d9757f78167b80e596c3df?s=128&d=identicon&r=PG", "display_name": "Chloe", "link": "https://stackoverflow.com/users/148844/chloe"}, "is_accepted": true, "score": 1, "last_activity_date": 1436346444, "creation_date": 1436346444, "answer_id": 31288159, "question_id": 31287934, "link": "https://stackoverflow.com/questions/31287934/how-can-i-select-value-of-static-select-tag-on-my-controller/31288159#31288159", "title": "How can i select value of static select_tag on my controller", "body": "<p>Use <code>params[:sippeer_type]</code> to get the value. It's not embedded in a subarray because it's not using the form helper.</p>\n"}], "owner": {"reputation": 364, "user_id": 4184668, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0d756022d38e5c41252ba8f9ed165b51?s=128&d=identicon&r=PG&f=1", "display_name": "ar em", "link": "https://stackoverflow.com/users/4184668/ar-em"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 0, "accepted_answer_id": 31288159, "answer_count": 1, "score": 1, "last_activity_date": 1436346444, "creation_date": 1436345806, "last_edit_date": 1436346195, "question_id": 31287934, "link": "https://stackoverflow.com/questions/31287934/how-can-i-select-value-of-static-select-tag-on-my-controller", "title": "How can i select value of static select_tag on my controller", "body": "<p>this is my _form.html.erb</p>\n\n<pre><code>&lt;%= simple_form_for @guest_server, :html =&gt; { :class =&gt; 'form-horizontal' } do |f| %&gt;\n  &lt;%= f.input :current_uid %&gt;\n  &lt;%= label_tag 'Sippeer Type' %&gt;\n  &lt;%= select_tag \"sippeer_type\", options_for_select([ \"Conference\", \"Trunk\" ]) %&gt;\n  &lt;%= f.input :sippeer_template_id %&gt;\n  &lt;div class=\"form-actions\"&gt;\n    &lt;%= f.button :submit, :class =&gt; 'btn-primary' %&gt;\n    &lt;%= link_to t('.cancel', :default =&gt; t(\"helpers.links.cancel\")),\n                guest_servers_path, :class =&gt; 'btn' %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>this is my controller i want to get the value of sippeer_type</p>\n\n<pre><code>def create\n  @guest_server = GuestServer.new(guest_server_params)\n  if guest_server_params[:sippeer_type] == 'Conference'\n    @guest_server.set_confbridge_sippeer\n  else\n    @guest_server.set_sippeer\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "slim-lang"], "answers": [{"tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 1, "last_activity_date": 1436343878, "creation_date": 1436343878, "answer_id": 31287230, "question_id": 31286990, "link": "https://stackoverflow.com/questions/31286990/how-to-coding-nest-tags-in-language-slim/31287230#31287230", "title": "how to coding nest tags in language slim", "body": "<pre><code>li.active\n  a href=\"#\"\n    ' Link\n    span.sr-only\n      | (current)\n\na.dropdown-toggle href=\"#\" data-toggle=\"dropdown\" role=\"button\" aria-haspopup=\"true\" aria-expanded=\"false\"\n  ' Dropdown\n  span.caret\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 560, "user_id": 137869, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/08c1e816bc0e671068d03b8a34aa7c27?s=128&d=identicon&r=PG", "display_name": "tknv", "link": "https://stackoverflow.com/users/137869/tknv"}, "edited": false, "score": 0, "creation_date": 1436798725, "post_id": 31287716, "comment_id": 50749632, "body": "Thank you very much and I was surprised you could predict my another line!"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1436833285, "post_id": 31287716, "comment_id": 50767247, "body": "This is incorrect, however. <code>| Link</code> will not leave the space between &quot;Link&quot; and the following span, and <code>span.sr-only (current)</code> will create an attribute &quot;current&quot; rather than text &quot;(current)&quot; (due to parentheses), yielding HTML that is quite different from the one in OP."}], "tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": true, "score": 1, "last_activity_date": 1436345211, "creation_date": 1436345211, "answer_id": 31287716, "question_id": 31286990, "link": "https://stackoverflow.com/questions/31286990/how-to-coding-nest-tags-in-language-slim/31287716#31287716", "title": "how to coding nest tags in language slim", "body": "<p>HTML:</p>\n\n<pre><code>&lt;li class=\"active\"&gt;&lt;a href=\"#\"&gt;Link &lt;span class=\"sr-only\"&gt;(current)&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;\n</code></pre>\n\n<p>SLIM:</p>\n\n<pre><code>li.active\n  a href=\"#\" \n    | Link\n    span.sr-only (current)\n</code></pre>\n\n<p>and for this HTML code:</p>\n\n<pre><code>&lt;a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\" role=\"button\" aria-haspopup=\"true\" aria-expanded=\"false\"&gt;Dropdown &lt;span class=\"caret\"&gt;&lt;/span&gt;&lt;/a&gt;  \n</code></pre>\n\n<p>you can write slim:</p>\n\n<pre><code>a.dropdown-toggle aria-expanded=\"false\" aria-haspopup=\"true\" data-toggle=\"dropdown\" href=\"#\" role=\"button\" \n  | Dropdown\n  span.caret\n</code></pre>\n\n<p>For your reference:</p>\n\n<ul>\n<li>HTML2SLIM : <a href=\"https://html2slim.herokuapp.com/\" rel=\"nofollow\">https://html2slim.herokuapp.com/</a></li>\n<li>SLIM2HTML : <a href=\"http://slim2html.raving.systems/\" rel=\"nofollow\">http://slim2html.raving.systems/</a></li>\n</ul>\n"}], "owner": {"reputation": 560, "user_id": 137869, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/08c1e816bc0e671068d03b8a34aa7c27?s=128&d=identicon&r=PG", "display_name": "tknv", "link": "https://stackoverflow.com/users/137869/tknv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "accepted_answer_id": 31287716, "answer_count": 2, "score": 0, "last_activity_date": 1436345211, "creation_date": 1436343137, "question_id": 31286990, "link": "https://stackoverflow.com/questions/31286990/how-to-coding-nest-tags-in-language-slim", "title": "how to coding nest tags in language slim", "body": "<p>I would like to write below in language slim.  </p>\n\n<pre><code>&lt;li class=\"active\"&gt;&lt;a href=\"#\"&gt;Link &lt;span class=\"sr-only\"&gt;(current)&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;  \n</code></pre>\n\n<p>and</p>\n\n<pre><code>&lt;a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\" role=\"button\" aria-haspopup=\"true\" aria-expanded=\"false\"&gt;Dropdown &lt;span class=\"caret\"&gt;&lt;/span&gt;&lt;/a&gt;  \n</code></pre>\n\n<p>I can embed it by inline HTML, so just interesting.  </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "timezone", "utc"], "comments": [{"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1436343457, "post_id": 31286811, "comment_id": 50566160, "body": "Will the input always have this exact format?  Do you mean he is filling in a text field?  It would be better to have three selects, or a javascript datetime picker + a timezone select."}, {"owner": {"reputation": 2545, "user_id": 1808649, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7OGag.jpg?s=128&g=1", "display_name": "Fran Martinez", "link": "https://stackoverflow.com/users/1808649/fran-martinez"}, "reply_to_user": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1436344480, "post_id": 31286811, "comment_id": 50566831, "body": "The form is composed by three selects, yes. I didn&#39;t explain this because I considered that it was not relevant to answer the question"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1436346017, "post_id": 31286811, "comment_id": 50567796, "body": "It&#39;s totally relevant!  Building a UTC time from three parameters is very different (and easier) to building it from a complete sentence like you gave in your question."}, {"owner": {"reputation": 2545, "user_id": 1808649, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7OGag.jpg?s=128&g=1", "display_name": "Fran Martinez", "link": "https://stackoverflow.com/users/1808649/fran-martinez"}, "reply_to_user": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 1, "creation_date": 1436346556, "post_id": 31286811, "comment_id": 50568177, "body": "My apologies, maybe the question was not clear.  Here a deeply explanation: the question is not to focus on the frontend side. Just wanted to make know that there are three fields, in a valid context and in the best format. The question is about how to transform a valid [date, hour, time_zone] fields into an UTC date. I mean, is a backend question. The text I highlighted should be considered just an example of &quot;user story&quot;."}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1436346850, "post_id": 31286811, "comment_id": 50568363, "body": "It would be better to just show the parameters in your question: it&#39;s more relevant to your actual problem and it saves time."}], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 3, "last_activity_date": 1436347614, "last_edit_date": 1436347614, "creation_date": 1436343738, "answer_id": 31287174, "question_id": 31286811, "link": "https://stackoverflow.com/questions/31286811/how-to-schedule-a-worker-for-a-time-in-an-specific-time-zone-in-rails/31287174#31287174", "title": "How to schedule a worker for a time in an specific Time zone in Rails?", "body": "<p>To explicitly get a specific <code>TimeZone</code> instance, use <a href=\"http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html#method-c-5B-5D\" rel=\"nofollow\"><code>ActiveSupport::TimeZone::[]</code></a> and call <a href=\"http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html#method-i-parse\" rel=\"nofollow\"><code>ActiveSupport::TimeZone#parse</code></a> to create a <code>TimeWithZone</code> instance within that timezone:</p>\n\n<pre><code>time = ActiveSupport::TimeZone['London'].parse('12/08/2015 15:00')\n#=&gt; Wed, 12 Aug 2015 15:00:00 BST +01:00\n</code></pre>\n\n<p>or using <a href=\"http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html#method-i-local\" rel=\"nofollow\"><code>ActiveSupport::TimeZone#local</code></a>:</p>\n\n<pre><code>time = ActiveSupport::TimeZone['London'].local(2015, 8, 12, 15, 0)\n#=&gt; Wed, 12 Aug 2015 15:00:00 BST +01:00\n</code></pre>\n\n<p>Calling <a href=\"http://api.rubyonrails.org/classes/ActiveSupport/TimeWithZone.html#method-i-utc\" rel=\"nofollow\"><code>TimeWithZone#utc</code></a> returns a <code>Time</code> instance in UTC:</p>\n\n<pre><code>time.utc\n# =&gt; 2015-08-12 14:00:00 UTC\n</code></pre>\n\n<p>ActiveSupport also provides <a href=\"http://api.rubyonrails.org/classes/Time.html#method-c-use_zone\" rel=\"nofollow\"><code>Time::use_zone</code></a> to set <code>Time.zone</code> inside a block:</p>\n\n<pre><code>Time.use_zone('London') { Time.zone.parse('12/08/2015 15:00') }\n#=&gt; Wed, 12 Aug 2015 15:00:00 BST +01:00\n</code></pre>\n\n<p>Note that ActiveRecord automatically saves DATETIME fields in UTC, so there's usually no need to convert the time to UTC.</p>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1436346978, "post_id": 31288106, "comment_id": 50568448, "body": "<a href=\"http://api.rubyonrails.org/classes/Time.html#method-c-zone\" rel=\"nofollow noreferrer\"><code>Time.zone</code></a> and <a href=\"http://api.rubyonrails.org/classes/Time.html#method-c-zone-3D\" rel=\"nofollow noreferrer\"><code>Time.zone=</code></a> are ActiveSupport methods."}, {"owner": {"reputation": 911, "user_id": 1063230, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c36d453c7020e4859dd6db667cf44fa8?s=128&d=identicon&r=PG", "display_name": "Kishore Mohan", "link": "https://stackoverflow.com/users/1063230/kishore-mohan"}, "edited": false, "score": 0, "creation_date": 1436353922, "post_id": 31288106, "comment_id": 50572858, "body": "Yup.. <code>Time.zone</code> is a <code>ActiveSupport</code> method which does read and write."}], "tags": [], "owner": {"reputation": 21, "user_id": 1746511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820747f7d2be3752ec09dbb091e469e6?s=128&d=identicon&r=PG", "display_name": "adriagalin", "link": "https://stackoverflow.com/users/1746511/adriagalin"}, "is_accepted": false, "score": 2, "last_activity_date": 1436346269, "creation_date": 1436346269, "answer_id": 31288106, "question_id": 31286811, "link": "https://stackoverflow.com/questions/31286811/how-to-schedule-a-worker-for-a-time-in-an-specific-time-zone-in-rails/31288106#31288106", "title": "How to schedule a worker for a time in an specific Time zone in Rails?", "body": "<p>Also this method next, it doesn't depend on ActiveSupport.</p>\n\n<pre><code>Time.zone = time_zone\ntime_to_utc = Time.zone.parse('time').utc\n</code></pre>\n\n<p>for example:</p>\n\n<pre><code>Time.zone = \"London\"\ntime_to_utc = Time.zone.parse('08/07/2015 00:00').utc\n</code></pre>\n\n<p>I hope this solves your problem.</p>\n"}, {"tags": [], "owner": {"reputation": 911, "user_id": 1063230, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c36d453c7020e4859dd6db667cf44fa8?s=128&d=identicon&r=PG", "display_name": "Kishore Mohan", "link": "https://stackoverflow.com/users/1063230/kishore-mohan"}, "is_accepted": false, "score": 1, "last_activity_date": 1436353501, "creation_date": 1436353501, "answer_id": 31290822, "question_id": 31286811, "link": "https://stackoverflow.com/questions/31286811/how-to-schedule-a-worker-for-a-time-in-an-specific-time-zone-in-rails/31290822#31290822", "title": "How to schedule a worker for a time in an specific Time zone in Rails?", "body": "<p><code>Time.use_zone('London') { Time.zone.parse('07/08/2015 17:00') }.utc</code></p>\n\n<p>Even this works as expected with single line.</p>\n"}, {"tags": [], "owner": {"reputation": 910, "user_id": 2285073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9729693f4efa117c0997a61078bf1876?s=128&d=identicon&r=PG", "display_name": "Santanu", "link": "https://stackoverflow.com/users/2285073/santanu"}, "is_accepted": false, "score": 0, "last_activity_date": 1436359926, "creation_date": 1436359926, "answer_id": 31293311, "question_id": 31286811, "link": "https://stackoverflow.com/questions/31286811/how-to-schedule-a-worker-for-a-time-in-an-specific-time-zone-in-rails/31293311#31293311", "title": "How to schedule a worker for a time in an specific Time zone in Rails?", "body": "<p><code>ActiveSupport::TimeZone['Pacific Time (US &amp; Canada)'].parse(params[:created_at])</code></p>\n\n<p>this will work, I think.</p>\n"}], "owner": {"reputation": 2545, "user_id": 1808649, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7OGag.jpg?s=128&g=1", "display_name": "Fran Martinez", "link": "https://stackoverflow.com/users/1808649/fran-martinez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 352, "favorite_count": 0, "accepted_answer_id": 31287174, "answer_count": 4, "score": 2, "last_activity_date": 1436359926, "creation_date": 1436342543, "question_id": 31286811, "link": "https://stackoverflow.com/questions/31286811/how-to-schedule-a-worker-for-a-time-in-an-specific-time-zone-in-rails", "title": "How to schedule a worker for a time in an specific Time zone in Rails?", "body": "<p>I have a form with three fields:</p>\n\n<ol>\n<li>Date</li>\n<li>Time</li>\n<li>Time zone</li>\n</ol>\n\n<p>Users would like to schedule a task for his customers in another country, that means, in another time zone. So, he will fill the form telling:</p>\n\n<p><code>I want this task to be executed at 12/08/2015, at 15:00 in London time zone</code></p>\n\n<p>I have these three params and I don't mind where the user is at this moment or where is he from. I just want to transform this three fields information in an UTC date.</p>\n\n<p><strong>How can I transform this fields in an unique UTC date?</strong></p>\n"}, {"tags": ["ruby", "regex", "gsub"], "answers": [{"tags": [], "owner": {"reputation": 2793, "user_id": 174034, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5915a052ee598dc663a9784481bec196?s=128&d=identicon&r=PG", "display_name": "Mikey", "link": "https://stackoverflow.com/users/174034/mikey"}, "is_accepted": true, "score": 1, "last_activity_date": 1436341915, "creation_date": 1436341915, "answer_id": 31286627, "question_id": 31286487, "link": "https://stackoverflow.com/questions/31286487/how-to-gsub-with-wild-characters-for-spaces/31286627#31286627", "title": "How to gsub with wild characters (for spaces)", "body": "<pre><code>text.gsub(/Create\\s+Proc/i,\"Delete Proc\")\n</code></pre>\n\n<p>the <code>\\s</code> escape code will match on whitespace (spaces and tabs)</p>\n\n<p><a href=\"http://rubular.com/r/0bqvUBnojC\" rel=\"nofollow\">http://rubular.com/r/0bqvUBnojC</a></p>\n"}], "owner": {"reputation": 493, "user_id": 1208263, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/0f5a5dd0146c6ccc4570191867a35ce9?s=128&d=identicon&r=PG", "display_name": "Mario Trento", "link": "https://stackoverflow.com/users/1208263/mario-trento"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 31286627, "answer_count": 1, "score": -1, "last_activity_date": 1436342206, "creation_date": 1436341540, "last_edit_date": 1436341843, "question_id": 31286487, "link": "https://stackoverflow.com/questions/31286487/how-to-gsub-with-wild-characters-for-spaces", "title": "How to gsub with wild characters (for spaces)", "body": "<p>I need to replace combo of 2 words with another combo disregarding any number of spaces between them, is it possible to do with any kind of wildcards in single line ?</p>\n\n<pre><code>text.gsub(/Create Proc/i,\"Delete Proc\")      ## single space\ntext.gsub(/Create  Proc/i,\"Delete Proc\")     ## 2 spaces\ntext.gsub(/Create   Proc/i,\"Delete Proc\")    ## 3 spaces\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rubygems", "strong-parameters"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1436341251, "post_id": 31286352, "comment_id": 50564846, "body": "Why you have <code>params[:article]</code> when you are using <b><i>Rails 4</i></b> ?"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1436343700, "post_id": 31286352, "comment_id": 50566310, "body": "Please post your views with form."}], "answers": [{"tags": [], "owner": {"reputation": 950, "user_id": 1838621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7b4a2f6943e65c088b8bbf57ba94dc3?s=128&d=identicon&r=PG", "display_name": "Ashutosh Tiwari", "link": "https://stackoverflow.com/users/1838621/ashutosh-tiwari"}, "is_accepted": false, "score": 0, "last_activity_date": 1436342763, "creation_date": 1436342763, "answer_id": 31286885, "question_id": 31286352, "link": "https://stackoverflow.com/questions/31286352/accepts-nested-attributes-for-creating-duplicates/31286885#31286885", "title": "accepts_nested_attributes_for creating duplicates", "body": "<p>Read about nested attribute and build.<br />\nIn your edit action build object when it has no article_collection.<br />\nFor ex.<code>@article.article_collection.build if @article.article_collection.blank?</code>. it will not build a new object if it has already a article collection.</p>\n"}, {"comments": [{"owner": {"reputation": 890, "user_id": 1942262, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/SFmTN.png?s=128&g=1", "display_name": "Kanna", "link": "https://stackoverflow.com/users/1942262/kanna"}, "edited": false, "score": 1, "creation_date": 1436361985, "post_id": 31288599, "comment_id": 50578872, "body": "Yes @Thirumal Sakthivel we missed id"}, {"owner": {"reputation": 773, "user_id": 537025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dfc49166318a6c56ad40ecb53189888?s=128&d=identicon&r=PG", "display_name": "courtsimas", "link": "https://stackoverflow.com/users/537025/courtsimas"}, "edited": false, "score": 0, "creation_date": 1527865962, "post_id": 31288599, "comment_id": 88303413, "body": "This was 100% it. Super easy to miss."}], "tags": [], "owner": {"reputation": 186, "user_id": 3564065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ee8dd47dce1b6e7278bde0b076a4e79?s=128&d=identicon&r=PG&f=1", "display_name": "Thirumal Sakthivel", "link": "https://stackoverflow.com/users/3564065/thirumal-sakthivel"}, "is_accepted": true, "score": 6, "last_activity_date": 1436347594, "creation_date": 1436347594, "answer_id": 31288599, "question_id": 31286352, "link": "https://stackoverflow.com/questions/31286352/accepts-nested-attributes-for-creating-duplicates/31288599#31288599", "title": "accepts_nested_attributes_for creating duplicates", "body": "<p>Your params:</p>\n\n<pre><code>params = {\"utf8\"=&gt;\"\u2713\"\n   \"article\"=&gt;\n   {\n    \"data_id\"=&gt;\"dfe9e32c-3e7c-4b33-96b6-53b123d70e7a\", \"name\"=&gt;\"Mass\", \"description\"=&gt;\"mass\",\n    \"status\"=&gt;\"active\", \"volume\"=&gt;\"dfg\", \"issue\"=&gt;\"srf\", \"iscode\"=&gt;\"sdg\", \n        \"image\"=&gt;{\"title\"=&gt;\"\", \"caption\"=&gt;\"\",  \"root_image_id\"=&gt;\"\"},\n    \"article_collections_attributes\"=&gt;\n    [\n    {\"name\"=&gt;\"abcd\", \"type\"=&gt;\"Special\", \"description\"=&gt;\"content \",\"ordering_type\"=&gt;\"\"}\n    ]\n  },\n\"commit\"=&gt;\"Save\", \"id\"=&gt;\"b8c8ad67-9b98-4705-8b01-8c3f00e55919\"}\n</code></pre>\n\n<p>You should send and permit the \"id\" attribute inside the \"article_collections_attributes\" params. For Example,</p>\n\n<pre><code> \"article_collections_attributes\"=&gt;\n    [\n    {\"id\"=&gt;\"2\", \"name\"=&gt;\"abcd\", \"type\"=&gt;\"Special\", \"description\"=&gt;\"content \",\"ordering_type\"=&gt;\"\"}\n    ]\n</code></pre>\n\n<p>I think this code will help you.</p>\n"}], "owner": {"reputation": 890, "user_id": 1942262, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/SFmTN.png?s=128&g=1", "display_name": "Kanna", "link": "https://stackoverflow.com/users/1942262/kanna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1306, "favorite_count": 1, "accepted_answer_id": 31288599, "answer_count": 2, "score": 0, "last_activity_date": 1509580188, "creation_date": 1436341124, "last_edit_date": 1509580188, "question_id": 31286352, "link": "https://stackoverflow.com/questions/31286352/accepts-nested-attributes-for-creating-duplicates", "title": "accepts_nested_attributes_for creating duplicates", "body": "<p>accepts_nested_attributes_for creating duplicates</p>\n\n<p>Model</p>\n\n<pre><code>class Article &lt; ActiveRecord::Base\n  has_many :article_collections\n  accepts_nested_attributes_for :article_collections, :allow_destroy =&gt; true, reject_if: :all_blank\nend\n\nclass ArticleCollection &lt; ActiveRecord::Base\n  belongs_to :article\nend\n</code></pre>\n\n<p>Controller</p>\n\n<pre><code>def update\n  @article = Article.find_by_id(params[:id])\n  @article.update_attributes(params[:article])\n  redirect_to :index\nend\n</code></pre>\n\n<p>Params</p>\n\n<pre><code>params = {\"utf8\"=&gt;\"\u2713\"\n   \"article\"=&gt;\n   {\n    \"data_id\"=&gt;\"dfe9e32c-3e7c-4b33-96b6-53b123d70e7a\", \"name\"=&gt;\"Mass\", \"description\"=&gt;\"mass\",\n    \"status\"=&gt;\"active\", \"volume\"=&gt;\"dfg\", \"issue\"=&gt;\"srf\", \"iscode\"=&gt;\"sdg\", \n        \"image\"=&gt;{\"title\"=&gt;\"\", \"caption\"=&gt;\"\",  \"root_image_id\"=&gt;\"\"},\n    \"article_collections_attributes\"=&gt;\n    [\n    {\"name\"=&gt;\"abcd\", \"type\"=&gt;\"Special\", \"description\"=&gt;\"content \",\"ordering_type\"=&gt;\"\"}\n    ]\n  },\n\"commit\"=&gt;\"Save\", \"id\"=&gt;\"b8c8ad67-9b98-4705-8b01-8c3f00e55919\"}\n</code></pre>\n\n<p>Console</p>\n\n<pre><code> Article.find(\"b8c8ad67-9b98-4705-8b01-8c3f00e55919\").article_collections.count\n =&gt; 2\n</code></pre>\n\n<p>Problem is whenever we are updating article it's creating multiple article_collections.</p>\n\n<p>Suppose article_collections is 2 mean if we are updating article it's creating multiple article_collections = 4, it's not updating same article_collections, it's newly creating article_collections.</p>\n\n<p>Why is it creating duplicates?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "twilio", "voip"], "answers": [{"comments": [{"owner": {"reputation": 259, "user_id": 2657500, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JSrW2.png?s=128&g=1", "display_name": "jmolina", "link": "https://stackoverflow.com/users/2657500/jmolina"}, "edited": false, "score": 0, "creation_date": 1436341438, "post_id": 31286377, "comment_id": 50564961, "body": "As you said, connection has parameters, but is not until you disconnect or maybe error as well, that twilio notices you the CallSid."}, {"owner": {"reputation": 548, "user_id": 3311455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/166bb2f59fa6c75d8ad73f2122958d7b?s=128&d=identicon&r=PG&f=1", "display_name": "Audrius Lubys", "link": "https://stackoverflow.com/users/3311455/audrius-lubys"}, "reply_to_user": {"reputation": 259, "user_id": 2657500, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JSrW2.png?s=128&g=1", "display_name": "jmolina", "link": "https://stackoverflow.com/users/2657500/jmolina"}, "edited": false, "score": 0, "creation_date": 1436341729, "post_id": 31286377, "comment_id": 50565141, "body": "@jmolina, apparently it&#39;s available only after the connection, please see if the edit to the answer helps."}, {"owner": {"reputation": 430, "user_id": 7349964, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jHz9a1m8hXg/AAAAAAAAAAI/AAAAAAAADh8/zNytc2MbiHw/photo.jpg?sz=128", "display_name": "Vishal Khichadiya", "link": "https://stackoverflow.com/users/7349964/vishal-khichadiya"}, "edited": false, "score": 0, "creation_date": 1498029818, "post_id": 31286377, "comment_id": 76323301, "body": "Not working for me.  when I try Twilio.Device.connect(); It&#39;s working perfectly but when try this one Twilio.Device.connect(function(connection) {     var callSid = connection.parameters.CallSid; }); browser doesn&#39;t respond."}], "tags": [], "owner": {"reputation": 548, "user_id": 3311455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/166bb2f59fa6c75d8ad73f2122958d7b?s=128&d=identicon&r=PG&f=1", "display_name": "Audrius Lubys", "link": "https://stackoverflow.com/users/3311455/audrius-lubys"}, "is_accepted": true, "score": 3, "last_activity_date": 1560331420, "last_edit_date": 1560331420, "creation_date": 1436341204, "answer_id": 31286377, "question_id": 31286191, "link": "https://stackoverflow.com/questions/31286191/getting-callsid-from-twilio-in-ougoing-calls-using-js/31286377#31286377", "title": "Getting CallSid from Twilio in ougoing calls using js", "body": "<p>As seen in <a href=\"https://www.twilio.com/docs/client/connection\" rel=\"nofollow noreferrer\">https://www.twilio.com/docs/client/connection</a>, <code>connection</code> should be a <code>Twilio.Connection</code> object which has a property named <code>parameters</code> with a <code>CallSid</code> attribute both for incoming and outgoing connections.</p>\n\n<p>It is probably only available after the connection is made, so you should use an event handler for <code>connect</code> event:</p>\n\n<pre><code>Twilio.Device.connect(function(connection) {\n    var callSid = connection.parameters.CallSid;\n});\n</code></pre>\n"}], "owner": {"reputation": 259, "user_id": 2657500, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JSrW2.png?s=128&g=1", "display_name": "jmolina", "link": "https://stackoverflow.com/users/2657500/jmolina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 515, "favorite_count": 0, "accepted_answer_id": 31286377, "answer_count": 1, "score": 3, "last_activity_date": 1560331420, "creation_date": 1436340621, "question_id": 31286191, "link": "https://stackoverflow.com/questions/31286191/getting-callsid-from-twilio-in-ougoing-calls-using-js", "title": "Getting CallSid from Twilio in ougoing calls using js", "body": "<p>I would like to know if there is any way to retrieve CallSid using TwilioJS library from an outgoing call done from a Browser to a Phone. The think is that I'm not able to post anything from my client to my server since I don't have any id of the call.</p>\n\n<p>I've tried to find out the parameters of the connection object:</p>\n\n<pre><code>var connection = Twilio.Device.connect()\n</code></pre>\n\n<p>But no CallSid appears there.\nDoes anyone know how can a get this parameter, or something that lets me to identify the ougoing call that I've just done from js library?</p>\n\n<p>Thanks :D</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "capistrano", "digital-ocean", "capistrano3"], "comments": [{"owner": {"reputation": 3543, "user_id": 2231236, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ZyG2H.jpg?s=128&g=1", "display_name": "Nithin", "link": "https://stackoverflow.com/users/2231236/nithin"}, "edited": false, "score": 0, "creation_date": 1436342306, "post_id": 31286158, "comment_id": 50565490, "body": "start here <a href=\"http://capistranorb.com/\" rel=\"nofollow noreferrer\">capistranorb.com</a> also check <a href=\"https://github.com/imnithin/capistrano3\" rel=\"nofollow noreferrer\">github.com/imnithin/capistrano3</a>"}, {"owner": {"reputation": 4101, "user_id": 1482055, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f4D9p.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/1482055/milind"}, "edited": false, "score": 0, "creation_date": 1436349447, "post_id": 31286158, "comment_id": 50570089, "body": "see the railscasts for deploying code to VPS...it will clear away many doubts about how capistrano works behind the scenes....also see the commands in the deploy.rb  to understand what happens at the server remotely..."}], "answers": [{"comments": [{"owner": {"reputation": 2804, "user_id": 4222376, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh3.googleusercontent.com/-tC8Ywa53c0E/AAAAAAAAAAI/AAAAAAAAADU/TSIFixho-Rw/photo.jpg?sz=128", "display_name": "Nevin Raj Victor", "link": "https://stackoverflow.com/users/4222376/nevin-raj-victor"}, "edited": false, "score": 0, "creation_date": 1436345248, "post_id": 31286611, "comment_id": 50567322, "body": "I am using capistrano 3.4..this one is for 3.1 right"}, {"owner": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "reply_to_user": {"reputation": 2804, "user_id": 4222376, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh3.googleusercontent.com/-tC8Ywa53c0E/AAAAAAAAAAI/AAAAAAAAADU/TSIFixho-Rw/photo.jpg?sz=128", "display_name": "Nevin Raj Victor", "link": "https://stackoverflow.com/users/4222376/nevin-raj-victor"}, "edited": false, "score": 0, "creation_date": 1436346024, "post_id": 31286611, "comment_id": 50567800, "body": "This one is for 3.2.1 @NevinRajVictor"}, {"owner": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "reply_to_user": {"reputation": 2804, "user_id": 4222376, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh3.googleusercontent.com/-tC8Ywa53c0E/AAAAAAAAAAI/AAAAAAAAADU/TSIFixho-Rw/photo.jpg?sz=128", "display_name": "Nevin Raj Victor", "link": "https://stackoverflow.com/users/4222376/nevin-raj-victor"}, "edited": false, "score": 0, "creation_date": 1436346202, "post_id": 31286611, "comment_id": 50567945, "body": "I didn&#39;t checked that. I guess it will do fine. or you can switch to the 3.2.1 version."}, {"owner": {"reputation": 2804, "user_id": 4222376, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh3.googleusercontent.com/-tC8Ywa53c0E/AAAAAAAAAAI/AAAAAAAAADU/TSIFixho-Rw/photo.jpg?sz=128", "display_name": "Nevin Raj Victor", "link": "https://stackoverflow.com/users/4222376/nevin-raj-victor"}, "edited": false, "score": 0, "creation_date": 1436347353, "post_id": 31286611, "comment_id": 50568708, "body": "@Ebu: <code>cap -v</code> gave me 3.4. Now I did a <code>gem uninstall capistrano -v 3.4</code> and <code>gem install capistrano -v 3.2.1</code>. Now <code>cap -v</code> gives me   <code>Stage not set, please call something such as </code>cap production deploy<code>, where production is a stage you have defined.</code> What am I doing wrong there?"}, {"owner": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "reply_to_user": {"reputation": 2804, "user_id": 4222376, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh3.googleusercontent.com/-tC8Ywa53c0E/AAAAAAAAAAI/AAAAAAAAADU/TSIFixho-Rw/photo.jpg?sz=128", "display_name": "Nevin Raj Victor", "link": "https://stackoverflow.com/users/4222376/nevin-raj-victor"}, "edited": false, "score": 0, "creation_date": 1436349479, "post_id": 31286611, "comment_id": 50570115, "body": "after doing what the gist said, in your project directory run <code>cap production deploy:setup</code>. Try to read the errors while running this command. I guess the error will tell you to create a <code>database.yml</code> file on your <code>deploy_directory&#47;shared&#47;config&#47;</code>. If the command runs without error then run <code>cap production deploy</code> that&#39;s it. It may also generate some errors then you need to figure out that too."}, {"owner": {"reputation": 2804, "user_id": 4222376, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh3.googleusercontent.com/-tC8Ywa53c0E/AAAAAAAAAAI/AAAAAAAAADU/TSIFixho-Rw/photo.jpg?sz=128", "display_name": "Nevin Raj Victor", "link": "https://stackoverflow.com/users/4222376/nevin-raj-victor"}, "edited": false, "score": 0, "creation_date": 1436351236, "post_id": 31286611, "comment_id": 50571233, "body": "Same error on <code>cap production deploy:setup</code> ;  <code>Stage not set, please call something such as cap production deploy, where production is a stage you have defined</code>."}, {"owner": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "reply_to_user": {"reputation": 2804, "user_id": 4222376, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh3.googleusercontent.com/-tC8Ywa53c0E/AAAAAAAAAAI/AAAAAAAAADU/TSIFixho-Rw/photo.jpg?sz=128", "display_name": "Nevin Raj Victor", "link": "https://stackoverflow.com/users/4222376/nevin-raj-victor"}, "edited": false, "score": 0, "creation_date": 1436351934, "post_id": 31286611, "comment_id": 50571677, "body": "Do you created any <code>production.rb</code> file? If you just copied my code, then you need to modify that as per your requirement. I have commented the parts which you should modify in both <code>deploy.rb</code> and <code>production.rb</code>."}, {"owner": {"reputation": 2804, "user_id": 4222376, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh3.googleusercontent.com/-tC8Ywa53c0E/AAAAAAAAAAI/AAAAAAAAADU/TSIFixho-Rw/photo.jpg?sz=128", "display_name": "Nevin Raj Victor", "link": "https://stackoverflow.com/users/4222376/nevin-raj-victor"}, "edited": false, "score": 0, "creation_date": 1436352365, "post_id": 31286611, "comment_id": 50571925, "body": "yes .. i have edited that..what about staging.rb file in deploy folder"}, {"owner": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "reply_to_user": {"reputation": 2804, "user_id": 4222376, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh3.googleusercontent.com/-tC8Ywa53c0E/AAAAAAAAAAI/AAAAAAAAADU/TSIFixho-Rw/photo.jpg?sz=128", "display_name": "Nevin Raj Victor", "link": "https://stackoverflow.com/users/4222376/nevin-raj-victor"}, "edited": false, "score": 0, "creation_date": 1436352750, "post_id": 31286611, "comment_id": 50572154, "body": "<code>staging.rb</code> is a stage like <code>production.rb</code>, in your <code>&#47;config&#47;deploy&#47;production.rb</code> file set stage production"}, {"owner": {"reputation": 2804, "user_id": 4222376, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh3.googleusercontent.com/-tC8Ywa53c0E/AAAAAAAAAAI/AAAAAAAAADU/TSIFixho-Rw/photo.jpg?sz=128", "display_name": "Nevin Raj Victor", "link": "https://stackoverflow.com/users/4222376/nevin-raj-victor"}, "edited": false, "score": 0, "creation_date": 1436441847, "post_id": 31286611, "comment_id": 50619961, "body": "How can I do a <code>bundle install</code>, <code>rake seed</code> tasks etc and restart my apache2 server in capistrano"}, {"owner": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "reply_to_user": {"reputation": 2804, "user_id": 4222376, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh3.googleusercontent.com/-tC8Ywa53c0E/AAAAAAAAAAI/AAAAAAAAADU/TSIFixho-Rw/photo.jpg?sz=128", "display_name": "Nevin Raj Victor", "link": "https://stackoverflow.com/users/4222376/nevin-raj-victor"}, "edited": false, "score": 0, "creation_date": 1436442619, "post_id": 31286611, "comment_id": 50620485, "body": "Capistrano &gt; 3 enables bundle install automatically. But if you need to run rake tasks then go to the server your project directory. then run manually. Or you can tell capistrano to run it in <code>deploy.rb</code> file. For this you need to see the capistrano documentation."}], "tags": [], "owner": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "is_accepted": false, "score": 1, "last_activity_date": 1436341864, "creation_date": 1436341864, "answer_id": 31286611, "question_id": 31286158, "link": "https://stackoverflow.com/questions/31286158/deploy-ruby-on-rails-via-capistrano/31286611#31286611", "title": "Deploy ruby on rails via Capistrano", "body": "<p>You can see the <a href=\"https://gist.github.com/imtiaz-emu/dcb87fde71a9562037d2\" rel=\"nofollow\">gist</a> here, there are 4 files </p>\n\n<ul>\n<li>deploy.rb </li>\n<li>production.rb</li>\n<li>capfile</li>\n<li>Gemfile // only the capistrano required gem snippet </li>\n</ul>\n\n<p>But I've configured using nginx and passenger. </p>\n"}], "owner": {"reputation": 2804, "user_id": 4222376, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh3.googleusercontent.com/-tC8Ywa53c0E/AAAAAAAAAAI/AAAAAAAAADU/TSIFixho-Rw/photo.jpg?sz=128", "display_name": "Nevin Raj Victor", "link": "https://stackoverflow.com/users/4222376/nevin-raj-victor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436341864, "creation_date": 1436340530, "question_id": 31286158, "link": "https://stackoverflow.com/questions/31286158/deploy-ruby-on-rails-via-capistrano", "title": "Deploy ruby on rails via Capistrano", "body": "<p>I have successfully deployed my ruby on rails application to an ubuntu 14.04 virtual machine in <strong>Digital Ocean</strong>. I used <strong>Apache2 and passenger</strong> for the same. </p>\n\n<p>Now I want to deploy it to the same using <strong>Capistrano</strong>. I am using a mac machine in the developer environment. I have installed Capistrano 3.4. ssh connection has been set up with my local machine and server as well as with my server and my mercurial version control system in bitbucket.</p>\n\n<p>How can I deploy it via capistrano. I tried many tutorials. Many are outdated and I am not even close. I have deployed it in the server in <strong>uat environment</strong> and the source code is checked out and is kept in the desktop of server. I have also set up a user with sudo privileges.MySQl2 database is also in the same server.Please help me out .</p>\n"}, {"tags": ["jquery", "ruby", "ajax", "sinatra", "pony"], "comments": [{"owner": {"reputation": 71114, "user_id": 1059101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a7Mdb.png?s=128&g=1", "display_name": "Jai", "link": "https://stackoverflow.com/users/1059101/jai"}, "edited": false, "score": 0, "creation_date": 1436341403, "post_id": 31285961, "comment_id": 50564942, "body": "<code>:provides =&gt; :json</code> is it required? I have never worked with ruby/sinatra before."}, {"owner": {"reputation": 119, "user_id": 3363016, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/5jfXs.png?s=128&g=1", "display_name": "Simon245", "link": "https://stackoverflow.com/users/3363016/simon245"}, "reply_to_user": {"reputation": 71114, "user_id": 1059101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a7Mdb.png?s=128&g=1", "display_name": "Jai", "link": "https://stackoverflow.com/users/1059101/jai"}, "edited": false, "score": 0, "creation_date": 1436344855, "post_id": 31285961, "comment_id": 50567085, "body": "oh actually that is left over from my other form that I have working, I forgot to remove it. Thanks, I don&#39;t think I need it anymore. my other form used params = JSON.parse(request.body.read) to get the json"}, {"owner": {"reputation": 119, "user_id": 3363016, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/5jfXs.png?s=128&g=1", "display_name": "Simon245", "link": "https://stackoverflow.com/users/3363016/simon245"}, "reply_to_user": {"reputation": 71114, "user_id": 1059101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a7Mdb.png?s=128&g=1", "display_name": "Jai", "link": "https://stackoverflow.com/users/1059101/jai"}, "edited": false, "score": 0, "creation_date": 1436499437, "post_id": 31285961, "comment_id": 50649320, "body": "I ended up trying out Mail gem and had it up and running in half an hour. I still don&#39;t know what I was doing wrong with pony but I found mail easy enough to use."}], "answers": [{"tags": [], "owner": {"reputation": 119, "user_id": 3363016, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/5jfXs.png?s=128&g=1", "display_name": "Simon245", "link": "https://stackoverflow.com/users/3363016/simon245"}, "is_accepted": true, "score": 0, "last_activity_date": 1452840698, "creation_date": 1452840698, "answer_id": 34805697, "question_id": 31285961, "link": "https://stackoverflow.com/questions/31285961/sending-attachment-using-ajax-and-sinatra/34805697#34805697", "title": "Sending attachment using ajax and sinatra", "body": "<h1>Fixed by using Mail</h1>\n\n<p>I finally switched to <a href=\"https://github.com/mikel/mail\" rel=\"nofollow\">Mail</a> and had no problems sending the attachment. Here is my Mail code for anyone else having the same problems with pony and haven't worked it out</p>\n\n<pre><code>options = { :address          =&gt; \"smtp.gmail.com\",\n        :port                 =&gt; 25,\n        :domain               =&gt; ENV[\"DOMAIN\"],\n        :user_name            =&gt; ENV[\"EMAIL_ADDRESS\"],\n        :password             =&gt; ENV[\"EMAIL_PASSWORD\"],\n        :authentication       =&gt; 'plain',\n        :enable_starttls_auto =&gt; true  }\n\nMail.defaults do\n  delivery_method :smtp, options\nend\n\n\npost '/job-form' do\n\n  full_name = params[\"fullName\"]\n  position = params[\"position\"]\n  email = params[\"email\"]\n  cover_letter = params[\"coverLetter\"]\n  file_name = params[:file][:filename]\n  tempfile = params[:file][:tempfile]\n\n  Mail.deliver do\n    to      ENV[\"TO_ADDRESS\"]\n    from    ENV[\"EMAIL_ADDRESS\"]\n    subject \"Application for #{position}\"\n    body    \"#{full_name} has applied for the position of #{position}\\n#{email}\\n\\n#{cover_letter}\"\n    add_file :filename =&gt; file_name, :content =&gt; File.read(tempfile)\n  end\n\nend\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 3363016, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/5jfXs.png?s=128&g=1", "display_name": "Simon245", "link": "https://stackoverflow.com/users/3363016/simon245"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 376, "favorite_count": 0, "accepted_answer_id": 34805697, "answer_count": 1, "score": 0, "last_activity_date": 1452840698, "creation_date": 1436339971, "last_edit_date": 1452840656, "question_id": 31285961, "link": "https://stackoverflow.com/questions/31285961/sending-attachment-using-ajax-and-sinatra", "title": "Sending attachment using ajax and sinatra", "body": "<p>I have already sent emails using ajax and sinatra using pony and so tried to then add in attachments, but when I try to add it I cannot get it to send the attachment. It does send the email but the attachment is set as noname and when I change it's extension to .docx to view it, it looks like this</p>\n\n<pre><code>----==_mimepart_559cc76aa4b6f_84433ffe5e0ae1b8555f0\nContent-Type: text/plain;\n charset=UTF-8\nContent-Transfer-Encoding: 7bit\n\nJoe Bloggs has applied for the position of Software Engineer\njoe@example.com\n\n\n----==_mimepart_559cc76aa4b6f_84433ffe5e0ae1b8555f0\nContent-Type: application/vnd.openxmlformats-officedocument.wordprocessingml.document;\n charset=UTF-8;\n filename=test_resume_1.docx\nContent-Transfer-Encoding: base64\nContent-Disposition: attachment;\n filename=test_resume_1.docx\nContent-ID: &lt;test_resume_1.docx@Simons-MacBook-Pro-2.local&gt;\n\nUEsDBBQABgAIAAAAIQAxwq+8iAEAABMGAAATAAgCW0NvbnRlbnRfVHlwZXNd\nLnhtbCCiBAIooAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\n*repeated*\n</code></pre>\n\n<p>I have been banging my head against the table for the last 2 days and cannot work this out. I don't know which part of my code is wrong, as far as I can tell I am getting all the correct information from my forms using ajax and then as it's being sent most of it is working except for the attachment so I believe it is just something I am doing wrong for the attachment</p>\n\n<p>Here is my code that I am using</p>\n\n<h3>HTML</h3>\n\n<pre><code>  &lt;form id=\"application-form\" class=\"box\" action=\"/job-form\" method=\"POST\" enctype=\"multipart/form-data\"&gt;\n    &lt;div class=\"form-group\"&gt;\n      &lt;input type=\"text\" class=\"form-control\" id=\"fullName\" placeholder=\" NAME\" required&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form-group\"&gt;\n      &lt;input type=\"hidden\" id=\"position\" value=\"\"&gt;\n      &lt;input type=\"email\" class=\"form-control\" id=\"email\" placeholder=\" E-MAIL\" required&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form-group\"&gt;\n      &lt;div class=\"form-control\" id=\"cv\" placeholder=\" CV\"&gt;\n        &lt;i class=\"fa fa-file-text\"&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;&lt;span class=\"file-text\"&gt;UPLOAD YOUR CV &lt;/span&gt;\n      &lt;/div&gt;\n        &lt;input type=\"file\" id=\"cv-file\" name=\"attachement\" style=\"float:right;display:none\"/&gt;\n      &lt;/div&gt;\n    &lt;div class=\"form-group\"&gt;\n      &lt;textarea rows=\"5\" class=\"form-control\" id=\"cover-letter\" placeholder=\" COVER LETTER\"&gt;&lt;/textarea&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form-group\"&gt;\n      &lt;div class=\"col-sm-offset-\"&gt;\n          &lt;button type=\"submit\" class=\"btn btn-form\"&gt;Submit&lt;/button&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/form&gt;\n</code></pre>\n\n<h3>Javascript</h3>\n\n<pre><code>  $('#application-form').on('submit', function(event) {\n    event.preventDefault();\n    var form = $(this);\n    var fd = new FormData();\n    fd.append( 'file', $(\"#cv-file\")[0].files[0] );\n    fd.append(\"fullName\", $(\"#fullName\").val());\n    fd.append(\"email\", $(\"#email\").val());\n    fd.append(\"coverLetter\", $(\"#cover-letter\").val());\n    fd.append(\"position\", $(\"#position\").val());\n\n    $.ajax({\n      url: form.attr('action'),\n      processData: false,\n      contentType: false,\n      type: 'POST',\n      data: fd,\n      error: function(req, err){\n        console.log('error message: ' + err);\n        $(\".form-message-box\").html(err);\n        $(\".form-message-box\").animate({\"opacity\":\"1\"},\"slow\").animate({\"opacity\":\"0\"},2000);\n      },\n      success: function(json) {\n        $(\".form-message-box\").html(\"Successful!\");\n        $(\".form-message-box\").animate({\"opacity\":\"1\"},\"slow\").animate({\"opacity\":\"0\"},2000);\n      }\n    })\n  });\n</code></pre>\n\n<h3>Ruby</h3>\n\n<pre><code>  post '/job-form', :provides =&gt; :json do\n\n    Pony.mail({\n    :to =&gt; ENV[\"TO_ADDRESS\"],\n    :via =&gt; :smtp,\n    :from =&gt; ENV[\"EMAIL_ADDRESS\"],\n    :subject =&gt; \"Application for #{params[\"position\"]}\",\n    :body =&gt; params[\"fullName\"] + \" has applied for the position of \" + params[\"position\"] + \"\\n\" + params[\"email\"] + \"\\n\\n\" + params[\"coverLetter\"],\n    :attachments =&gt; {\n      File.basename(params[:file][:filename]) =&gt; File.read(params[:file][:tempfile])\n    },\n    :headers =&gt; { \"Content-Type\" =&gt; \"multipart/mixed\", \"Content-Transfer-Encoding\" =&gt; \"base64\", \"Content-Disposition\" =&gt; \"attachment\" },\n    :via_options =&gt; {\n      :address        =&gt; 'smtp.gmail.com',\n      :port           =&gt; '25',\n      :user_name      =&gt; ENV[\"EMAIL_ADDRESS\"],\n      :password       =&gt; ENV[\"EMAIL_PASSWORD\"],\n      :authentication =&gt; :plain,\n      :domain         =&gt; ENV[\"DOMAIN\"]\n      }\n    })\n    puts file\n    puts params\n  end\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 2683, "user_id": 1977071, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/0eeaa57c826d2f3186aec91d27994421?s=128&d=identicon&r=PG", "display_name": "Deepti Kakade", "link": "https://stackoverflow.com/users/1977071/deepti-kakade"}, "edited": false, "score": 0, "creation_date": 1436340882, "post_id": 31286159, "comment_id": 50564605, "body": "I just want to remove <code>the string which contains the exact with blank(&quot;&quot;) like str.gsub(&#47;\\w+_text\\^\\d+.*\\d*&#47;, &#39;&#39;)</code> which are occuring in between the <code>(_query_:</code> and <code>AND _query_:</code>"}], "tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 0, "last_activity_date": 1436340531, "creation_date": 1436340531, "answer_id": 31286159, "question_id": 31285932, "link": "https://stackoverflow.com/questions/31285932/replace-a-words-which-occurs-in-between-the-two-words-ruby/31286159#31286159", "title": "Replace a words which occurs in between the two words + ruby", "body": "<p>You can easily do this using <a href=\"http://ruby-doc.org/core-2.2.0/String.html#method-i-sub\" rel=\"nofollow\"><code>String#sub</code></a> or <a href=\"http://ruby-doc.org/core-2.2.0/String.html#method-i-gsub\" rel=\"nofollow\"><code>String#gsub</code></a>. Here:</p>\n\n<pre><code>a = \"\\\"(_query_:\\\"{!edismax qf='judgment_order_text^3.0  parallel_citation_text^3.5 judgment_order_exact^3.0 in_favor_of_exact^3.5 parallel_citation_exact^3.5 judge_names_exact^3.5 headnote_exact^3.3 headline_exact^3.3 court_level_exact^3.5 section_index_exact^3.5 appellant_exact^3.5 respondent_exact^3.5 year_exact^3.5 assessment_years_exact^3.5 AND _query_:\\\"{!edismax qf='in_favor_of_text^1.3 in_favor_of_ngram^0.8 in_favor_of_exact^3.5' mm='1' pf='in_favor_of_text^1.0 in_favor_of_ngram^1.0 in_favor_of_exact^5.0'}revenue\\\")\\\"\\n\" \n\nreplacement = \"\\\"{!edismax qf='judgment_order_text^3.0  parallel_citation_text^3.5\"\n\nputs a.sub(a[/_query_:(.*) AND _query_/, 1], replacement)\n# \"(_query_:\"{!edismax qf='judgment_order_text^3.0  parallel_citation_text^3.5 AND _query_:\"{!edismax qf='in_favor_of_text^1.3 in_favor_of_ngram^0.8 in_favor_of_exact^3.5' mm='1' pf='in_favor_of_text^1.0 in_favor_of_ngram^1.0 in_favor_of_exact^5.0'}revenue\")\"\n</code></pre>\n"}], "owner": {"reputation": 2683, "user_id": 1977071, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/0eeaa57c826d2f3186aec91d27994421?s=128&d=identicon&r=PG", "display_name": "Deepti Kakade", "link": "https://stackoverflow.com/users/1977071/deepti-kakade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1436341691, "creation_date": 1436339890, "last_edit_date": 1436341691, "question_id": 31285932, "link": "https://stackoverflow.com/questions/31285932/replace-a-words-which-occurs-in-between-the-two-words-ruby", "title": "Replace a words which occurs in between the two words + ruby", "body": "<p>I want to replace some words in a string, and I know I can use a <code>gsub</code> method. But my scenario is suppose I have a following string:</p>\n\n<pre><code>\"(_query_:\"{!edismax qf='judgment_order_text^3.0  parallel_citation_text^3.5 judgment_order_exact^3.0 in_favor_of_exact^3.5 parallel_citation_exact^3.5 judge_names_exact^3.5 headnote_exact^3.3 headline_exact^3.3 court_level_exact^3.5 section_index_exact^3.5 appellant_exact^3.5 respondent_exact^3.5 year_exact^3.5 assessment_years_exact^3.5 AND _query_:\"{!edismax qf='in_favor_of_text^1.3 in_favor_of_ngram^0.8 in_favor_of_exact^3.5' mm='1' pf='in_favor_of_text^1.0 in_favor_of_ngram^1.0 in_favor_of_exact^5.0'}revenue\")\"\n</code></pre>\n\n<p>now I want to replace <code>exact</code> word which is occurring in between the <code>(_query_:</code> and <code>AND _query_:</code> . How to do that by using a ruby ?</p>\n\n<p>I am expecting following output:</p>\n\n<pre><code>\"(_query_:\"{!edismax qf='judgment_order_text^3.0  parallel_citation_text^3.5 AND _query_:\"{!edismax qf='in_favor_of_text^1.3 in_favor_of_ngram^0.8 in_favor_of_exact^3.5' mm='1' pf='in_favor_of_text^1.0 in_favor_of_ngram^1.0 in_favor_of_exact^5.0'}revenue\")\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "edited": false, "score": 3, "creation_date": 1436339280, "post_id": 31285693, "comment_id": 50563601, "body": "What is in the <code>@guest_server</code> variable, paste the code"}, {"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 3, "creation_date": 1436339283, "post_id": 31285693, "comment_id": 50563605, "body": "Could you show the code where you assign the values to <code>@guest_server</code>?"}, {"owner": {"reputation": 963, "user_id": 1736955, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/ed07470f42e125b1f6b181b16fde2805?s=128&d=identicon&r=PG", "display_name": "Guru", "link": "https://stackoverflow.com/users/1736955/guru"}, "edited": false, "score": 0, "creation_date": 1436339376, "post_id": 31285693, "comment_id": 50563662, "body": "Give me more details, may be some lines of code from  app/views/guest_servers/_form.html.erb:11"}, {"owner": {"reputation": 1809, "user_id": 4966705, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh5.googleusercontent.com/-33GGBSJvG1o/AAAAAAAAAAI/AAAAAAAAAEw/l3yn5OOYHKA/photo.jpg?sz=128", "display_name": "rob", "link": "https://stackoverflow.com/users/4966705/rob"}, "edited": false, "score": 0, "creation_date": 1436340241, "post_id": 31285693, "comment_id": 50564211, "body": "<code>@guest_server</code> sounds like one object and not like a collection. is it true?"}], "owner": {"reputation": 364, "user_id": 4184668, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0d756022d38e5c41252ba8f9ed165b51?s=128&d=identicon&r=PG&f=1", "display_name": "ar em", "link": "https://stackoverflow.com/users/4184668/ar-em"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 338, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1436340789, "creation_date": 1436339170, "last_edit_date": 1436339249, "question_id": 31285693, "link": "https://stackoverflow.com/questions/31285693/actionviewtemplateerror-undefined-method-map-for-guestserver0x00000006", "title": "ActionView::Template::Error (undefined method `map&#39; for #&lt;GuestServer:0x00000006a46ae0&gt;):", "body": "<p>i got this error </p>\n\n<pre>\nActionView::Template::Error (undefined method `map' for #):\n     8:   \n     9:    \n    10:   \n    11:   \n    12:    \n    13:   \n    14:      'btn-primary' %>\n  app/views/guest_servers/_form.html.erb:11:in `block in _app_views_guest_servers__form_html_erb___3580975132148204073_44804260'\n  app/views/guest_servers/_form.html.erb:1:in `_app_views_guest_servers__form_html_erb___3580975132148204073_44804260'\n  app/views/guest_servers/new.html.erb:5:in `_app_views_guest_servers_new_html_erb___2287482652647252833_55765520'\n\n</pre>\n\n<p>when i add this line of code </p>\n\n<pre><code>&lt;pre&gt;\n  &lt;%= select_tag \"sippeer_type\", options_from_collection_for_select(@guest_server, \"id\", \"name\") %&gt;\n&lt;/pre&gt;\n</code></pre>\n"}, {"tags": ["ruby", "base64", "zlib", "compression"], "answers": [{"tags": [], "owner": {"reputation": 78348, "user_id": 1180620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FXaAg.jpg?s=128&g=1", "display_name": "Mark Adler", "link": "https://stackoverflow.com/users/1180620/mark-adler"}, "is_accepted": true, "score": 0, "last_activity_date": 1436365047, "creation_date": 1436365047, "answer_id": 31295407, "question_id": 31284988, "link": "https://stackoverflow.com/questions/31284988/zlibdataerror-incorrect-header-check/31295407#31295407", "title": "Zlib::DataError: incorrect header check", "body": "<p>What's causing it is that it is not zlib data.  You should ask whoever is producing that raw data.</p>\n"}, {"tags": [], "owner": {"reputation": 2906, "user_id": 606057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7fec040170780177b796f927fc6b4a8?s=128&d=identicon&r=PG", "display_name": "Gayle", "link": "https://stackoverflow.com/users/606057/gayle"}, "is_accepted": false, "score": 1, "last_activity_date": 1505326743, "creation_date": 1505326743, "answer_id": 46204389, "question_id": 31284988, "link": "https://stackoverflow.com/questions/31284988/zlibdataerror-incorrect-header-check/46204389#46204389", "title": "Zlib::DataError: incorrect header check", "body": "<p>I was getting this when trying to call inflate on a data that hadn't been deflated by Zlib.  In my case it was for a unit test and I sent in a plain string and simply forgot to call .deflate on it first.  </p>\n\n<p>In your case, if you do this instead you don't get the error: </p>\n\n<p><code>\n@decoded = Zlib::Deflate.deflate(@clear_string_from_data)\n@inflated = Zlib::Inflate.inflate(@decoded)\n</code></p>\n"}], "owner": {"reputation": 2049, "user_id": 2246700, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/63ae5300336319b5b03e0008130b27b6?s=128&d=identicon&r=PG&f=1", "display_name": "narzero", "link": "https://stackoverflow.com/users/2246700/narzero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5154, "favorite_count": 0, "accepted_answer_id": 31295407, "answer_count": 2, "score": 1, "last_activity_date": 1505326743, "creation_date": 1436336689, "question_id": 31284988, "link": "https://stackoverflow.com/questions/31284988/zlibdataerror-incorrect-header-check", "title": "Zlib::DataError: incorrect header check", "body": "<p>I have a string, but I don't know the type of encoding.</p>\n\n<p>Here's what the raw data looks like:</p>\n\n<pre><code>{\n   \"securityProxyResponseEnvelope\":{\n      \"resultCode\":\"OK\",\n      \"apiResponse\":\"{zlibe}9mtdE350h9rd4h7wlFX3AkeCtNsb40FFaEZAl/CfcNNKrhGXawhgAs2rI4rnEgIwLpgJkKl+qkB0kzJ6+ZFmmz12Pl9/9MPdA1unUKL5OdHcWmAZim3ZjDXFGCW4zruCS/IOSiU1qVKAF5qIbocB4+2rAF7zH18SRtmXM8YW3eYs5w1NPjmYkM31W8x7QvrKkzFscH3kqDwmYn0I2gNNOtfwuKjWd5snunyqxPopZHNX3CBdW/pj4+N0tJXjAoHorCe8Ypmjxnvh3zthkLTbiBLgeULH1hGvVtkI0C9PGMyt/92upVW6qHxqCYoO/LTJK1tq6OpBnMRBNZDDntSRkrzp+1RpvzbBxFtwQ9jh45eSthbG5hq+D2oJkW5zrGi6TM8eG4ztCqRoO9dEvz2JbQsDCTPz70+C6iPYdkvOyqji18ysLjBbGcHw1j45YItcurVxp0FChxXrnHZwu6m430xKEp7ONxvgEZurt3T8qAjrkrbHfd8jRjDydUXYsMoa\",\n      \"session\":\"n3qp6jzHwZkXWSMW3VBF:jitqBjBmlZbrgcEgY7Od\",\n      \"parameters\":{\n\n      }\n   }\n}\n</code></pre>\n\n<p>I want to decompress the string in <code>data['securityProxyResponseEnvelope']['apiResponse']</code>.</p>\n\n<p>Here's what I'm doing:</p>\n\n<pre><code>@clear_string_from_data = '9mtdE350h9rd4h7wlFX3AkeCtNsb40FFaEZAl/CfcNNKrhGXawhgAs2rI4rnEgIwLpgJkKl+qkB0kzJ6+ZFmmz12Pl9/9MPdA1unUKL5OdHcWmAZim3ZjDXFGCW4zruCS/IOSiU1qVKAF5qIbocB4+2rAF7zH18SRtmXM8YW3eYs5w1NPjmYkM31W8x7QvrKkzFscH3kqDwmYn0I2gNNOtfwuKjWd5snunyqxPopZHNX3CBdW/pj4+N0tJXjAoHorCe8Ypmjxnvh3zthkLTbiBLgeULH1hGvVtkI0C9PGMyt/92upVW6qHxqCYoO/LTJK1tq6OpBnMRBNZDDntSRkrzp+1RpvzbBxFtwQ9jh45eSthbG5hq+D2oJkW5zrGi6TM8eG4ztCqRoO9dEvz2JbQsDCTPz70+C6iPYdkvOyqji18ysLjBbGcHw1j45YItcurVxp0FChxXrnHZwu6m430xKEp7ONxvgEZurt3T8qAjrkrbHfd8jRjDydUXYsMoa'\n\n@decoded = Base64.decode64(@clear_string_from_data)\n@inflated = Zlib::Inflate.inflate(@decoded)\n</code></pre>\n\n<p>But this returns</p>\n\n<pre><code>#=&gt; Zlib::DataError: incorrect header check\n</code></pre>\n\n<p>What's causing this and what could I try next to decompress the data?</p>\n"}, {"tags": ["javascript", "ruby", "ruby-on-rails-4", "amazon-web-services", "amazon-cloudsearch"], "comments": [{"owner": {"reputation": 2473, "user_id": 1255142, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a8bG6.jpg?s=128&g=1", "display_name": "alexroussos", "link": "https://stackoverflow.com/users/1255142/alexroussos"}, "edited": false, "score": 0, "creation_date": 1436394911, "post_id": 31284739, "comment_id": 50599637, "body": "did that work for you?"}], "answers": [{"comments": [{"owner": {"reputation": 724, "user_id": 636475, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/54d2888b9ac082849e33dc16ed378ca3?s=128&d=identicon&r=PG", "display_name": "anshul410", "link": "https://stackoverflow.com/users/636475/anshul410"}, "edited": false, "score": 0, "creation_date": 1436407915, "post_id": 31293936, "comment_id": 50603200, "body": "Changing &quot;expr&quot; value to some character string did not work, neither did removing quotes.  From AWS forum post <a href=\"https://forums.aws.amazon.com/thread.jspa?messageID=579640\" rel=\"nofollow noreferrer\">forums.aws.amazon.com/thread.jspa?messageID=579640</a>, I figured out that I have to pass a JsonEncoded map instead."}, {"owner": {"reputation": 724, "user_id": 636475, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/54d2888b9ac082849e33dc16ed378ca3?s=128&d=identicon&r=PG", "display_name": "anshul410", "link": "https://stackoverflow.com/users/636475/anshul410"}, "edited": false, "score": 0, "creation_date": 1436407966, "post_id": 31293936, "comment_id": 50603211, "body": "e.g. :  1.9.3-p551 :520 &gt;   expr_map2  =&gt; {:geo=&gt;&quot;haversin(38.958687,-77.343149,location.latitude,loca&zwnj;&#8203;tion.longitude)&quot;}                    1.9.3-p551 :521 &gt; csd.search(query:&#39;user*&#39;, query_parser:&#39;simple&#39;, filter_query: fq, expr:ActiveSupport::JSON.encode(expr_map2))  =&gt; #&lt;struct Aws::CloudSearchDomain::Types::SearchResponse status=#&lt;struct Aws::CloudSearchDomain::Types::SearchStatus timems=45, rid=&quot;wPzUhOcp7rIBCluMDg==&quot;&gt;, hits=#&lt;struct Aws::CloudSearchDomain::Types::Hits found=0, start=0, cursor=nil, hit=[]&gt;, facets=nil&gt;"}, {"owner": {"reputation": 2473, "user_id": 1255142, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a8bG6.jpg?s=128&g=1", "display_name": "alexroussos", "link": "https://stackoverflow.com/users/1255142/alexroussos"}, "reply_to_user": {"reputation": 724, "user_id": 636475, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/54d2888b9ac082849e33dc16ed378ca3?s=128&d=identicon&r=PG", "display_name": "anshul410", "link": "https://stackoverflow.com/users/636475/anshul410"}, "edited": false, "score": 0, "creation_date": 1436408482, "post_id": 31293936, "comment_id": 50603319, "body": "Glad you were able to figure it out. Please consider posting an answer to help the next guy! Don&#39;t worry, answering your own question is encouraged at SO -- see the Self Learner badge :)"}], "tags": [], "owner": {"reputation": 2473, "user_id": 1255142, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a8bG6.jpg?s=128&g=1", "display_name": "alexroussos", "link": "https://stackoverflow.com/users/1255142/alexroussos"}, "is_accepted": false, "score": 0, "last_activity_date": 1436361556, "creation_date": 1436361556, "answer_id": 31293936, "question_id": 31284739, "link": "https://stackoverflow.com/questions/31284739/aws-cloudsearch-ruby-sdk-errors-on-providing-expressions-found-invalid-value-wh/31293936#31293936", "title": "AWS Cloudsearch Ruby SDK errors on providing expressions: Found invalid value where JavaScript Object was expected", "body": "<p>Your <code>expr</code> param of <code>'1'</code> is not valid, as it violates this requirement:</p>\n\n<pre><code>Expression names must begin with a letter and be at least 3 and no more than 64 characters long. The following characters are allowed: a-z (lower-case letters), 0-9, and _ (underscore). The name score is reserved and cannot be used as an expression name.\n</code></pre>\n\n<p>If you aren't trying to use a named expression, remove the quotes, since a ranking expression must return an integer.</p>\n\n<p>See <a href=\"http://docs.aws.amazon.com/cloudsearch/latest/developerguide/configuring-expressions.html\" rel=\"nofollow\">http://docs.aws.amazon.com/cloudsearch/latest/developerguide/configuring-expressions.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 724, "user_id": 636475, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/54d2888b9ac082849e33dc16ed378ca3?s=128&d=identicon&r=PG", "display_name": "anshul410", "link": "https://stackoverflow.com/users/636475/anshul410"}, "is_accepted": true, "score": 1, "last_activity_date": 1436425708, "creation_date": 1436425708, "answer_id": 31310414, "question_id": 31284739, "link": "https://stackoverflow.com/questions/31284739/aws-cloudsearch-ruby-sdk-errors-on-providing-expressions-found-invalid-value-wh/31310414#31310414", "title": "AWS Cloudsearch Ruby SDK errors on providing expressions: Found invalid value where JavaScript Object was expected", "body": "<p>Error faced here is similar to the one asked in AWS forums : \n<a href=\"https://forums.aws.amazon.com/thread.jspa?messageID=579640\" rel=\"nofollow\">https://forums.aws.amazon.com/thread.jspa?messageID=579640</a></p>\n\n<p>Solution is to create a map for expressions, where each |key,value| denotes expressions name and its formula(value). And pass the JsonEncoded string of this map to the search method of cloudSearchDomain.</p>\n\n<p>e.g. </p>\n\n<pre><code>1.9.3-p551 :520 &gt; expr_map2 \n\n=&gt; {:geo=&gt;\"haversin(38.958687,-77.343149,location.latitude,location.longitude)\"} \n\n1.9.3-p551 :521 &gt; csd.search(query:'user*', query_parser:'simple', filter_query: fq, expr:ActiveSupport::JSON.encode(expr_map2)) \n\n=&gt; #&lt;struct Aws::CloudSearchDomain::Types::SearchResponse status=#&lt;struct Aws::CloudSearchDomain::Types::SearchStatus timems=45, rid=\"wPzUhOcp7rIBCluMDg==\"&gt;, hits=#&lt;struct Aws::CloudSearchDomain::Types::Hits found=0, start=0, cursor=nil, hit=[]&gt;, facets=nil&gt; \u2013 \n</code></pre>\n"}], "owner": {"reputation": 724, "user_id": 636475, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/54d2888b9ac082849e33dc16ed378ca3?s=128&d=identicon&r=PG", "display_name": "anshul410", "link": "https://stackoverflow.com/users/636475/anshul410"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "accepted_answer_id": 31310414, "answer_count": 2, "score": 0, "last_activity_date": 1436425708, "creation_date": 1436335669, "question_id": 31284739, "link": "https://stackoverflow.com/questions/31284739/aws-cloudsearch-ruby-sdk-errors-on-providing-expressions-found-invalid-value-wh", "title": "AWS Cloudsearch Ruby SDK errors on providing expressions: Found invalid value where JavaScript Object was expected", "body": "<p>I am trying to use AWS cloudsearch from rails console.</p>\n\n<p>I am trying to provide expressions to AWS cloudsearch searchRequest query. It gives me error :\n\"Found invalid value where JavaScript Object was expected\"</p>\n\n<p>I am able to provide a simple query string, a filter query and a query parser.</p>\n\n<p>terminal :</p>\n\n<pre><code>Aws.config.update({region: 'us-west-2',credentials: Aws::Credentials.new(\u2018key_id', \u2019secret_key'), })\ncsd = Aws::CloudSearchDomain::Client.new(region: 'us-east-1', endpoint: 'http://search-endpoint.us-east-1.cloudsearch.amazonaws.com/')\n\n1.9.3-p551 :340 &gt;   \n1.9.3-p551 :341 &gt;   fq\n =&gt; \"location:['40.628611,-100.694152','25.621966,-66.686706']\" \n1.9.3-p551 :342 &gt; csd\n =&gt; #&lt;Aws::CloudSearchDomain::Client&gt; \n1.9.3-p551 :343 &gt; csd.search(query:'user*', query_parser:'simple', filter_query: fq)\n =&gt; #&lt;struct Aws::CloudSearchDomain::Types::SearchResponse status=#&lt;struct Aws::CloudSearchDomain::Types::SearchStatus timems=11, rid=\"5/L54eYpoqkBCluMDg==\"&gt;, hits=#&lt;struct Aws::CloudSearchDomain::Types::Hits found=0, start=0, cursor=nil, hit=[]&gt;, facets=nil&gt; \n1.9.3-p551 :344 &gt; csd.search(query:'user*', query_parser:'simple', filter_query: fq, expr:'1')\nAws::CloudSearchDomain::Errors::SearchException: Invalid syntax in 'expr' parameter: Found invalid value where JavaScript Object was expected\n        from /Users/anshulgoyal/.rvm/gems/ruby-1.9.3-p551/gems/aws-sdk-core-2.1.2/lib/seahorse/client/plugins/raise_response_errors.rb:15:in `call'\n        from /Users/anshulgoyal/.rvm/gems/ruby-1.9.3-p551/gems/aws-sdk-core-2.1.2/lib/aws-sdk-core/plugins/param_converter.rb:21:in `call'\n        from /Users/anshulgoyal/.rvm/gems/ruby-1.9.3-p551/gems/aws-sdk-core-2.1.2/lib/aws-sdk-core/plugins/response_paging.rb:26:in `call'\n        from /Users/anshulgoyal/.rvm/gems/ruby-1.9.3-p551/gems/aws-sdk-core-2.1.2/lib/seahorse/client/plugins/response_target.rb:18:in `call'\n        from /Users/anshulgoyal/.rvm/gems/ruby-1.9.3-p551/gems/aws-sdk-core-2.1.2/lib/seahorse/client/request.rb:70:in `send_request'\n        from /Users/anshulgoyal/.rvm/gems/ruby-1.9.3-p551/gems/aws-sdk-core-2.1.2/lib/seahorse/client/base.rb:207:in `block (2 levels) in define_operation_methods'\n        from (irb):344\n        from /Users/anshulgoyal/.rvm/gems/ruby-1.9.3-p551/gems/railties-4.2.3/lib/rails/commands/console.rb:110:in `start'\n        from /Users/anshulgoyal/.rvm/gems/ruby-1.9.3-p551/gems/railties-4.2.3/lib/rails/commands/console.rb:9:in `start'\n        from /Users/anshulgoyal/.rvm/gems/ruby-1.9.3-p551/gems/railties-4.2.3/lib/rails/commands/commands_tasks.rb:68:in `console'\n        from /Users/anshulgoyal/.rvm/gems/ruby-1.9.3-p551/gems/railties-4.2.3/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n        from /Users/anshulgoyal/.rvm/gems/ruby-1.9.3-p551/gems/railties-4.2.3/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n        from /Users/anshulgoyal/.rvm/gems/ruby-1.9.3-p551/gems/activesupport-4.2.3/lib/active_support/dependencies.rb:274:in `require'\n        from /Users/anshulgoyal/.rvm/gems/ruby-1.9.3-p551/gems/activesupport-4.2.3/lib/active_support/dependencies.rb:274:in `block in require'\n        from /Users/anshulgoyal/.rvm/gems/ruby-1.9.3-p551/gems/activesupport-4.2.3/lib/active_support/dependencies.rb:240:in `load_dependency'\n        from /Users/anshulgoyal/.rvm/gems/ruby-1.9.3-p551/gems/activesupport-4.2.3/lib/active_support/dependencies.rb:274:in `require'\n        from /Users/anshulgoyal/workspace/adamantium/backend/truckfinder_service/bin/rails:8:in `&lt;top (required)&gt;'\n        from /Users/anshulgoyal/.rvm/gems/ruby-1.9.3-p551/gems/activesupport-4.2.3/lib/active_support/dependencies.rb:268:in `load'\n        from /Users/anshulgoyal/.rvm/gems/ruby-1.9.3-p551/gems/activesupport-4.2.3/lib/active_support/dependencies.rb:268:in `block in load'\n        from /Users/anshulgoyal/.rvm/gems/ruby-1.9.3-p551/gems/activesupport-4.2.3/lib/active_support/dependencies.rb:240:in `load_dependency'\n        from /Users/anshulgoyal/.rvm/gems/ruby-1.9.3-p551/gems/activesupport-4.2.3/lib/active_support/dependencies.rb:268:in `load'\n        from /Users/anshulgoyal/.rvm/rubies/ruby-1.9.3-p551/lib/ruby/site_ruby/1.9.1/rubygems/core_ext/kernel_require.rb:54:in `require'\n        from /Users/anshulgoyal/.rvm/rubies/ruby-1.9.3-p551/lib/ruby/site_ruby/1.9.1/rubygems/core_ext/kernel_require.rb:54:in `require'\n        from -e:1:in `&lt;main&gt;'1.9.3-p551 :345 &gt; \n</code></pre>\n\n<p>Any help here will be greatly appreciated.</p>\n\n<p>Thanks,<br />\nAnshul</p>\n"}, {"tags": ["ruby", "watir", "watir-webdriver"], "answers": [{"tags": [], "owner": {"reputation": 312231, "user_id": 2225682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4958f4712d94ab82fe55fa471308e4b5?s=128&d=identicon&r=PG", "display_name": "falsetru", "link": "https://stackoverflow.com/users/2225682/falsetru"}, "is_accepted": false, "score": 0, "last_activity_date": 1436335738, "creation_date": 1436335738, "answer_id": 31284762, "question_id": 31284563, "link": "https://stackoverflow.com/questions/31284563/find-element-which-has-no-style/31284762#31284762", "title": "Find element which has no style", "body": "<p>Using xpath:</p>\n\n<pre><code>browser.element_by_xpath(\".//tr[not(@style)]\")\n</code></pre>\n\n<p><code>[not(@style)]</code> meaning having no <code>style</code> attribute.</p>\n"}, {"comments": [{"owner": {"reputation": 884, "user_id": 4308012, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8d75ac73f32dbed2106579ccba92ee69?s=128&d=identicon&r=PG&f=1", "display_name": "stack1", "link": "https://stackoverflow.com/users/4308012/stack1"}, "edited": false, "score": 0, "creation_date": 1436374011, "post_id": 31293220, "comment_id": 50588044, "body": "Should i just load the table containing the above rows, then find which trs are present and visible on screen ?"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "reply_to_user": {"reputation": 884, "user_id": 4308012, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8d75ac73f32dbed2106579ccba92ee69?s=128&d=identicon&r=PG&f=1", "display_name": "stack1", "link": "https://stackoverflow.com/users/4308012/stack1"}, "edited": false, "score": 1, "creation_date": 1436374628, "post_id": 31293220, "comment_id": 50588433, "body": "If you only want the rows of a specific table, then yes, you should locate the specific table first. For example, you can get all visible rows of a table with id &quot;JobTable&quot; using <code>browser.table(id: &#39;JobTable&#39;).trs.select(&amp;:present?)</code>"}], "tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": true, "score": 2, "last_activity_date": 1436359730, "creation_date": 1436359730, "answer_id": 31293220, "question_id": 31284563, "link": "https://stackoverflow.com/questions/31284563/find-element-which-has-no-style/31293220#31293220", "title": "Find element which has no style", "body": "<p>You have a number of ways of collecting elements without the <code>style</code> attribute:</p>\n\n<p>Using a :css locator:</p>\n\n<pre><code>browser.trs(css: 'tr:not([style])')\n</code></pre>\n\n<p>Using a :xpath locator:</p>\n\n<pre><code>browser.trs(xpath: '//tr[not(@style)]')\n</code></pre>\n\n<p>You could also check the attribute value:</p>\n\n<pre><code>browser.trs.select { |tr| tr.attribute_value('style').nil? }\n</code></pre>\n\n<p>Note that you should be cautious about using the style attribute as an indicator of the row being displayed. Someone could add some other unrelated style property and then all of the tests will fail. Instead, I would suggest that you look for rows that are present:</p>\n\n<pre><code>browser.trs.select(&amp;:present?)\n</code></pre>\n\n<p>I think that this also makes the purpose of the code more obvious and readable.</p>\n"}], "owner": {"reputation": 884, "user_id": 4308012, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8d75ac73f32dbed2106579ccba92ee69?s=128&d=identicon&r=PG&f=1", "display_name": "stack1", "link": "https://stackoverflow.com/users/4308012/stack1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 31293220, "answer_count": 2, "score": 0, "last_activity_date": 1436364488, "creation_date": 1436335004, "last_edit_date": 1436364488, "question_id": 31284563, "link": "https://stackoverflow.com/questions/31284563/find-element-which-has-no-style", "title": "Find element which has no style", "body": "<p>In a table, there are rows like this:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;tr id=\"filtersJob_intrinsicTable_row6\" class=\"evenRow\" style=\"display: none;\"&gt;some stuff here&lt;tr&gt;\n&lt;tr id=\"filtersJob_intrinsicTable_row7\" class=\"evenRow\"&gt;some stuff here&lt;tr&gt;\n</code></pre>\n\n<p>How do i use watir to get the rows which are to be displayed, i.e the rows which do NOT have <code>style=\"display: none;</code> ? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "edited": false, "score": 0, "creation_date": 1436335348, "post_id": 31284444, "comment_id": 50561592, "body": "This problem was discussed [here][1]        [1]: <a href=\"http://stackoverflow.com/questions/16258911/rails-4-authenticity-token\" title=\"rails 4 authenticity token\">stackoverflow.com/questions/16258911/rails-4-authenticity-to&zwnj;&#8203;ken</a>    I hope it helps."}, {"owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1436341618, "post_id": 31284444, "comment_id": 50565075, "body": "It sounds like you&#39;re wiping out user sessions when you restart."}], "owner": {"reputation": 11, "user_id": 3100781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/To4Ar.jpg?s=128&g=1", "display_name": "David Strejc", "link": "https://stackoverflow.com/users/3100781/david-strejc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1436334402, "creation_date": 1436334402, "question_id": 31284444, "link": "https://stackoverflow.com/questions/31284444/ruby-on-rails-form-token-kick-user-after-code-is-updated", "title": "Ruby On Rails form token kick user after code is updated", "body": "<p>After we update our RoR application and user has opened form and submits his form after code is updated our RoR application says Invalid Authenticity Token and than logs out user who submitted the form.</p>\n\n<p>Is there any way how to solve this and update our code without logging out our users when they have submitted form after code is updated?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "smtp"], "comments": [{"owner": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "edited": false, "score": 0, "creation_date": 1436332956, "post_id": 31284033, "comment_id": 50560636, "body": "what is the output of your <code>application&#47;path&#47;log&#47;production.log</code>?"}, {"owner": {"reputation": 111, "user_id": 4955948, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3b15f7261eb138d01b190e262c65b2a1?s=128&d=identicon&r=PG&f=1", "display_name": "AGM", "link": "https://stackoverflow.com/users/4955948/agm"}, "reply_to_user": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "edited": false, "score": 0, "creation_date": 1436333113, "post_id": 31284033, "comment_id": 50560706, "body": "there are only one log file development.log"}, {"owner": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "edited": false, "score": 0, "creation_date": 1436333278, "post_id": 31284033, "comment_id": 50560760, "body": "Your question title told that you&#39;re facing problem in production mode. So, there must be a production.log file."}, {"owner": {"reputation": 111, "user_id": 4955948, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3b15f7261eb138d01b190e262c65b2a1?s=128&d=identicon&r=PG&f=1", "display_name": "AGM", "link": "https://stackoverflow.com/users/4955948/agm"}, "reply_to_user": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "edited": false, "score": 0, "creation_date": 1436334284, "post_id": 31284033, "comment_id": 50561143, "body": "I have another contact us form.That work fine in both side"}, {"owner": {"reputation": 560, "user_id": 2362505, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/181c3e1a813fb39b2720f4b2ba34e9cd?s=128&d=identicon&r=PG", "display_name": "harshs08", "link": "https://stackoverflow.com/users/2362505/harshs08"}, "edited": false, "score": 0, "creation_date": 1436337901, "post_id": 31284033, "comment_id": 50562810, "body": "Please add the logs, by your comments I guess you are still using the development environment variables in production."}], "owner": {"reputation": 111, "user_id": 4955948, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3b15f7261eb138d01b190e262c65b2a1?s=128&d=identicon&r=PG&f=1", "display_name": "AGM", "link": "https://stackoverflow.com/users/4955948/agm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1436357902, "creation_date": 1436332714, "last_edit_date": 1436357902, "question_id": 31284033, "link": "https://stackoverflow.com/questions/31284033/mails-not-sent-in-production-side-rails-4", "title": "Mails not sent in production side rails 4", "body": "<p>I have a rails app with one form. After saving that form all data will be send in an email id. Form is working great in development side. But after deploying the app it doesn't work. It's giving the following error in the browser.</p>\n\n<pre><code>                  We're sorry, but something went wrong.\n\n      If you are the application owner check the logs for more information.\n</code></pre>\n\n<p>In this application I have another contact us form. That form work fine after deployment in production side.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "url-routing"], "answers": [{"comments": [{"owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1436338786, "post_id": 31283856, "comment_id": 50563334, "body": "This answer would benefit from a fuller explanation and perhaps links to documentation."}], "tags": [], "owner": {"reputation": 1401, "user_id": 2723934, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/025a08b4c87bf427fffab6600dea6ae8?s=128&d=identicon&r=PG&f=1", "display_name": "miler350", "link": "https://stackoverflow.com/users/2723934/miler350"}, "is_accepted": false, "score": 0, "last_activity_date": 1436331728, "creation_date": 1436331728, "answer_id": 31283856, "question_id": 31283664, "link": "https://stackoverflow.com/questions/31283664/i-do-not-know-routing/31283856#31283856", "title": "I do not know Routing", "body": "<p>Try this:</p>\n\n<pre><code>get '/:username/:article_id', controller: 'articles', action: 'show'\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4558691, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003279404642/picture?type=large", "display_name": "Ken Sayama", "link": "https://stackoverflow.com/users/4558691/ken-sayama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1436331728, "creation_date": 1436330565, "question_id": 31283664, "link": "https://stackoverflow.com/questions/31283664/i-do-not-know-routing", "title": "I do not know Routing", "body": "<p>I am making a Web application using Ruby on Rails now.\nHowever, it may be in trouble.\nRouting when the show action is invoked article (articles) that will be displayed is currently <code>hoge.com/articles/ (article id)</code>. I want to /hoge.com/username/ (article id), but can not quite.</p>\n\n<p>routes.rb</p>\n\n<pre><code>devise_for :users, controllers: { omniauth_callbacks: 'omniauth_callbacks' }\ndevise_scope :user do\n  resources :articles\n  get '/:username', controller: 'users', action: 'show'\n  get '/users/sign_out', controller: 'devise/sessions', action: 'destroy'\n  get 'users/auth/:provider/disconnect', controller: 'omniauth_disconnects', action: 'update'\nend\npost 'user_invitation_beta_release/new'\nget 'static/welcome'\nroot to: 'root#index'\nresources :items\nresources :contents\nresources :articles do\n  resources :contents, only: [:create, :destroy, :change_order] do\n    resources :items, only: [:create, :destroy]\n  end\nend\nmatch \"*path\" =&gt; \"application#handle_404\", via: :all\n</code></pre>\n\n<p>Please tell me</p>\n"}, {"tags": ["ruby", "pry"], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1436331357, "creation_date": 1436331357, "answer_id": 31283791, "question_id": 31283261, "link": "https://stackoverflow.com/questions/31283261/how-can-i-detect-how-many-levels-down-pry-has-gone/31283791#31283791", "title": "How can I detect how many levels down Pry has gone", "body": "<p>If you call <code>caller</code> within a pry session within a pry session, then you will see a list of commands. Among them, you should be able to find the part that corresponds to a nested <code>pry</code> call. Find the crucial line that is related to each pry session call, and you will know your level. As far as I checked, you should find two occurrences of a line like:</p>\n\n<pre><code> \"/usr/local/lib/ruby/gems/2.2.0/gems/pry-0.10.1/lib/pry/repl.rb:67:in `repl'\"\n</code></pre>\n\n<p>Count such lines.</p>\n"}], "owner": {"reputation": 17747, "user_id": 241142, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/dc690e6057d0756358e2d80409a945b1?s=128&d=identicon&r=PG", "display_name": "iconoclast", "link": "https://stackoverflow.com/users/241142/iconoclast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436363249, "creation_date": 1436327749, "last_edit_date": 1436363249, "question_id": 31283261, "link": "https://stackoverflow.com/questions/31283261/how-can-i-detect-how-many-levels-down-pry-has-gone", "title": "How can I detect how many levels down Pry has gone", "body": "<p>If I'm at a Bash prompt and I type <code>bash</code> I can then detect that I'm at the 2nd level by typing <code>echo $SHLVL</code>.</p>\n\n<p>Suppose I'm in a pry session and I type <code>pry</code> again.  How can I detect that I'm at the 2nd level down? How can I detect the Pry level? Nothing listed in <code>(Pry.methods - Object.methods).sort</code>  seems to have anything useful.</p>\n\n<p>This is for testing some code for a pry-related project, where I need detect the level.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-engines"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1436331001, "post_id": 31283118, "comment_id": 50560033, "body": "<a href=\"http://stackoverflow.com/questions/3724487/rails-root-directory-path\"><code>Rails.root</code></a>."}, {"owner": {"reputation": 1364, "user_id": 3899985, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/21b5514466ff51154565ffd64fa244ff?s=128&d=identicon&r=PG&f=1", "display_name": "HPJAJ", "link": "https://stackoverflow.com/users/3899985/hpjaj"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1436370903, "post_id": 31283118, "comment_id": 50586047, "body": "Unfortunately that brings me to the root of the Rails App, and still does not grant me any access to the mounted Rails Engine.  Thanks @mudasobwa"}], "answers": [{"tags": [], "owner": {"reputation": 1364, "user_id": 3899985, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/21b5514466ff51154565ffd64fa244ff?s=128&d=identicon&r=PG&f=1", "display_name": "HPJAJ", "link": "https://stackoverflow.com/users/3899985/hpjaj"}, "is_accepted": true, "score": 0, "last_activity_date": 1436384997, "creation_date": 1436384997, "answer_id": 31302359, "question_id": 31283118, "link": "https://stackoverflow.com/questions/31283118/cd-into-a-directory-from-a-mounted-rails-engine/31302359#31302359", "title": "cd into a directory from a mounted Rails Engine", "body": "<p>I ended up taking a different approach, and solving the problem by copying and pasting the entire directory.  This got around having to access the engine's files manually, through the Rails app.</p>\n\n<p>Here are the updated methods:</p>\n\n<pre><code>  def generate_participant_views\n    directory \"#{copy_path}/participants\", \"#{paste_path}/participants\"\n  end\n\n  def generate_room_views\n    directory \"#{copy_path}/rooms\", \"#{paste_path}/rooms\"\n  end\n</code></pre>\n"}], "owner": {"reputation": 1364, "user_id": 3899985, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/21b5514466ff51154565ffd64fa244ff?s=128&d=identicon&r=PG&f=1", "display_name": "HPJAJ", "link": "https://stackoverflow.com/users/3899985/hpjaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 31302359, "answer_count": 1, "score": 1, "last_activity_date": 1436384997, "creation_date": 1436326784, "last_edit_date": 1436366195, "question_id": 31283118, "link": "https://stackoverflow.com/questions/31283118/cd-into-a-directory-from-a-mounted-rails-engine", "title": "cd into a directory from a mounted Rails Engine", "body": "<p>I have a Rails app with a mounted <a href=\"http://guides.rubyonrails.org/engines.html\" rel=\"nofollow\">Rails engine</a>.  I have created a <a href=\"http://guides.rubyonrails.org/generators.html\" rel=\"nofollow\">Rails generator</a> in the engine.  The generator is called from the Rails app.  The generator's purpose is to copy a set of a views from the Rails Engine, and add them into the views folder in the Rails app.  </p>\n\n<p>The Rails generator is working fine, but I need to refactor it using the <a href=\"http://ruby-doc.org/core-1.9.3/Dir.html#method-c-glob\" rel=\"nofollow\">Ruby class Dir glob method</a>.  </p>\n\n<p>Here is my <code>views_generator.rb</code> file, and it is working just fine:</p>\n\n<pre><code>class Speaker::ViewsGenerator &lt; Rails::Generators::Base\n  source_root File.expand_path('../templates', __FILE__)\n\n  def generate_participant_views\n    copy_file \"#{copy_path}/participants/_form.html.erb\", \"#{paste_path}/participants/_form.html.erb\"\n    copy_file \"#{copy_path}/participants/edit.html.erb\", \"#{paste_path}/participants/edit.html.erb\"\n    copy_file \"#{copy_path}/participants/index.html.erb\", \"#{paste_path}/participants/index.html.erb\"\n    copy_file \"#{copy_path}/participants/new.html.erb\", \"#{paste_path}/participants/new.html.erb\"\n    copy_file \"#{copy_path}/participants/show.html.erb\", \"#{paste_path}/participants/show.html.erb\"\n  end\n\n  def generate_room_views\n    copy_file \"#{copy_path}/rooms/_form.html.erb\", \"#{paste_path}/rooms/_form.html.erb\"\n    copy_file \"#{copy_path}/rooms/edit.html.erb\", \"#{paste_path}/rooms/edit.html.erb\"\n    copy_file \"#{copy_path}/rooms/index.html.erb\", \"#{paste_path}/rooms/index.html.erb\"\n    copy_file \"#{copy_path}/rooms/new.html.erb\", \"#{paste_path}/rooms/new.html.erb\"\n    copy_file \"#{copy_path}/rooms/show.html.erb\", \"#{paste_path}/rooms/show.html.erb\"\n  end\n\n  private\n\n  def copy_path\n    '../../../../../app/views/speaker'\n  end\n\n  def paste_path\n    'app/views/speaker'\n  end\n\nend\n</code></pre>\n\n<p>Instead of writing out every file, I want to use the glob method to iterate over all the files in a given folder.  But in order to do this, I first need to cd into the Rails engine's views folder.  </p>\n\n<p>So <strong>here is my question</strong>.  How do I cd into a directory that is inside of the mounted Rails Engine <em>from my Rails app</em>?</p>\n\n<p>I'd like to replace the above <code>generate_participant_views</code> method with something like this:</p>\n\n<pre><code>def generate_participant_views\n    Dir.chdir \"#{copy_path}/participants\"\n    all_files = Dir.blob('*')\n    all_files.each do |file|\n      copy_file file, paste_path + file\n    end\nend\n</code></pre>\n\n<p>Obviously the first line of the method does not work, because it is being called from inside of the Rails <strong>app</strong>, not the engine.  </p>\n\n<p>So how do I change directories, from the app's vantage point, into a folder inside of the mounted Rails engine?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 36449, "user_id": 2453699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0b0a49d160baf7d95b81d798ea0cb65?s=128&d=identicon&r=PG", "display_name": "vee", "link": "https://stackoverflow.com/users/2453699/vee"}, "edited": false, "score": 0, "creation_date": 1436317822, "post_id": 31281911, "comment_id": 50556944, "body": "I&#39;m a little confused on the &quot;saved events&quot; part.  Aren&#39;t these events already saved in the db?  Could you explain that a little more?"}, {"owner": {"reputation": 3196, "user_id": 4245174, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Qhbam.jpg?s=128&g=1", "display_name": "ifma", "link": "https://stackoverflow.com/users/4245174/ifma"}, "reply_to_user": {"reputation": 36449, "user_id": 2453699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0b0a49d160baf7d95b81d798ea0cb65?s=128&d=identicon&r=PG", "display_name": "vee", "link": "https://stackoverflow.com/users/2453699/vee"}, "edited": false, "score": 0, "creation_date": 1436317919, "post_id": 31281911, "comment_id": 50556963, "body": "Of course, a user can &quot;save events&quot;, such that they can see it in their dashboard to view later, I don&#39;t mean save in the db sense."}, {"owner": {"reputation": 1967, "user_id": 2355344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5309fb1bc1f467ac017b7fdd89ce5154?s=128&d=identicon&r=PG", "display_name": "Collin Graves", "link": "https://stackoverflow.com/users/2355344/collin-graves"}, "edited": false, "score": 0, "creation_date": 1436317974, "post_id": 31281911, "comment_id": 50556977, "body": "Ah. I&#39;ll update my answer. Best to clarify that in your question, if you will."}, {"owner": {"reputation": 1967, "user_id": 2355344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5309fb1bc1f467ac017b7fdd89ce5154?s=128&d=identicon&r=PG", "display_name": "Collin Graves", "link": "https://stackoverflow.com/users/2355344/collin-graves"}, "edited": false, "score": 1, "creation_date": 1436318389, "post_id": 31281911, "comment_id": 50557085, "body": "Also, your question title is very misleading. Please update for posterity&#39;s sake."}, {"owner": {"reputation": 3196, "user_id": 4245174, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Qhbam.jpg?s=128&g=1", "display_name": "ifma", "link": "https://stackoverflow.com/users/4245174/ifma"}, "edited": false, "score": 0, "creation_date": 1436318970, "post_id": 31281911, "comment_id": 50557221, "body": "Ah my apologies, I&#39;ve edited it. Really appreciate you taking the time to write your answer, I will give it a shot and let you know if it works. Thanks very much."}, {"owner": {"reputation": 18224, "user_id": 406987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8865b16d4f3493cfae865af2b3247fd3?s=128&d=identicon&r=PG", "display_name": "Doon", "link": "https://stackoverflow.com/users/406987/doon"}, "edited": false, "score": 0, "creation_date": 1436319711, "post_id": 31281911, "comment_id": 50557380, "body": "Can more than 1 user save an event for their dashboard? Or are events only seen/saved by and individual user?"}, {"owner": {"reputation": 3196, "user_id": 4245174, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Qhbam.jpg?s=128&g=1", "display_name": "ifma", "link": "https://stackoverflow.com/users/4245174/ifma"}, "edited": false, "score": 0, "creation_date": 1436320045, "post_id": 31281911, "comment_id": 50557444, "body": "Oh let me clear that up: the intention was that an event can be &quot;saved&quot; by any user, so initially it will be saved by the creator, then other users can &quot;save&quot; the same event if they wish. There are many events, each of which has a creator, and each event can be &quot;saved&quot; for viewing at a later time (so this would be like clicking the &quot;I am going&quot; button in facebook)."}], "answers": [{"tags": [], "owner": {"reputation": 1967, "user_id": 2355344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5309fb1bc1f467ac017b7fdd89ce5154?s=128&d=identicon&r=PG", "display_name": "Collin Graves", "link": "https://stackoverflow.com/users/2355344/collin-graves"}, "is_accepted": false, "score": 2, "last_activity_date": 1436318270, "last_edit_date": 1436318270, "creation_date": 1436317921, "answer_id": 31281948, "question_id": 31281911, "link": "https://stackoverflow.com/questions/31281911/ruby-on-rails-using-multiple-has-many-associations-to-the-same-model/31281948#31281948", "title": "Ruby on Rails -- Using multiple has_many associations to the same model", "body": "<p>If you want a <code>User</code> to be given the ability to \"save\" an event (in the sense of a dashboard, not a database), why not add a <code>save_for_later</code> flag to <code>Event</code>? </p>\n\n<p><code>rails g migration add_save_for_later_to_events save_for_later:boolean</code></p>\n\n<p>Then in your <code>Event</code> model, you can add the following scope:</p>\n\n<pre><code>scope :flagged_events_for, (lambda do |user|\n    where('user_id = ? AND save_for_later = ?', user.id, true)\n  end)\n</code></pre>\n\n<p>You'll then be able to \"ask\" the <code>Event</code> model for appropriate instances of itself elsewhere in your app, with <code>Event.flagged_events_for(user)</code></p>\n"}, {"comments": [{"owner": {"reputation": 3196, "user_id": 4245174, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Qhbam.jpg?s=128&g=1", "display_name": "ifma", "link": "https://stackoverflow.com/users/4245174/ifma"}, "edited": false, "score": 0, "creation_date": 1436332363, "post_id": 31282284, "comment_id": 50560421, "body": "Thanks so much, really appreciate your time explaining your code. It works wonderfully, but just wanted to ask if I wanted to delete a particular saved event, is it just current_user.saved_events.destroy? Doesn&#39;t seem to be working, but I will look into it more, thanks."}, {"owner": {"reputation": 3196, "user_id": 4245174, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Qhbam.jpg?s=128&g=1", "display_name": "ifma", "link": "https://stackoverflow.com/users/4245174/ifma"}, "edited": false, "score": 0, "creation_date": 1436332928, "post_id": 31282284, "comment_id": 50560622, "body": "Never mind, I figured it out: @event = Event.find(params[:event]), followed by: current_user.saved_events.find(@event).destroy works. Apologies I dont know how to add code markdown in comments. Thanks again."}, {"owner": {"reputation": 18224, "user_id": 406987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8865b16d4f3493cfae865af2b3247fd3?s=128&d=identicon&r=PG", "display_name": "Doon", "link": "https://stackoverflow.com/users/406987/doon"}, "reply_to_user": {"reputation": 3196, "user_id": 4245174, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Qhbam.jpg?s=128&g=1", "display_name": "ifma", "link": "https://stackoverflow.com/users/4245174/ifma"}, "edited": false, "score": 0, "creation_date": 1436333796, "post_id": 31282284, "comment_id": 50560969, "body": "Was going to say you should should just need to find the saved_event by event id and then destroy that specific saved_event. current_user.saved_events.find_by_event_id(@event.id). Also found a typo on the reverse side  event Should have many shared_events not belong to. Will update answer"}, {"owner": {"reputation": 3196, "user_id": 4245174, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Qhbam.jpg?s=128&g=1", "display_name": "ifma", "link": "https://stackoverflow.com/users/4245174/ifma"}, "edited": false, "score": 0, "creation_date": 1436334158, "post_id": 31282284, "comment_id": 50561089, "body": "Hmm you are correct, but it seems to behave correctly even with the typo, maybe I haven&#39;t used a command yet that will cause it to fail though but will update my db. Thanks."}], "tags": [], "owner": {"reputation": 18224, "user_id": 406987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8865b16d4f3493cfae865af2b3247fd3?s=128&d=identicon&r=PG", "display_name": "Doon", "link": "https://stackoverflow.com/users/406987/doon"}, "is_accepted": true, "score": 1, "last_activity_date": 1436333852, "last_edit_date": 1436333852, "creation_date": 1436320590, "answer_id": 31282284, "question_id": 31281911, "link": "https://stackoverflow.com/questions/31281911/ruby-on-rails-using-multiple-has-many-associations-to-the-same-model/31282284#31282284", "title": "Ruby on Rails -- Using multiple has_many associations to the same model", "body": "<p>The problem with adding the user to the event as <code>user_saved_id</code>, is that only 1 user will ever be able to save that event.   If I understand correctly, you would like a user to be able save events (That they may or may not have created?) to be shown in their Dashboard.  In this case you are going to need something like a <code>has_and_belongs_to_many</code> or a <code>has_many through</code> type relationship, and thus another table. Perhaps something like using the has_many through.</p>\n\n<pre><code>class SavedEvent &lt; ActiveRecord::Base\n  belongs_to :user\n  belongs_to :event \nend \n\nclass User &lt; ActiveRecord::Base\n\n # a user has 0 to n created events\n  has_many :events\n  has_many :saved_events\n\n  # a user has 0 to n saved events through the favorites table\n  has_many :later_events,  through: :saved_events \n end \n</code></pre>\n\n<p>when you create your <code>SavedEvent</code>, you can use the created_at timestamp to show when the user saved it, or can also store other information/metadata about saving it.</p>\n\n<p>having the reverse set it event would allow you easily get the list of users who have saved this Event via <code>event.saved_users</code>.  (sorry naming things is one of those hard problems)</p>\n\n<pre><code>class Event &lt; ActiveRecord::Base\n\n  # the owner of the event\n  belongs_to :user\n  has_many :saved_events\n  has_many :saved_users, through: :saved_events \n\nend\n</code></pre>\n\n<p>then creating a new event would be</p>\n\n<pre><code>def create\n  #wrap in transaction \n  Event.transaction do\n   #build the event through the association  \n   @event = current_user.events.create!(event_params)\n   #save it to the current users saved events\n   current_user.saved_events.create!(event: @event)\n  end \n end\n</code></pre>\n\n<p>the transaction and the ! methods just make it so that it will roll back if it cannot create the event and add to saved events, and not wind up with an event that isn't in the saved/later events table when created.</p>\n\n<p>When another user wants to save the event, in your controller for that, you just need to do <code>current_user.saved_events.create(event: event)</code> for them, and it will save it. </p>\n\n<p>Then in your dashboard you can do <code>current_user.later_events</code> and get a collection of all events that they have saved. </p>\n"}], "owner": {"reputation": 3196, "user_id": 4245174, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Qhbam.jpg?s=128&g=1", "display_name": "ifma", "link": "https://stackoverflow.com/users/4245174/ifma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 1, "accepted_answer_id": 31282284, "answer_count": 2, "score": 0, "last_activity_date": 1436333852, "creation_date": 1436317657, "last_edit_date": 1436318852, "question_id": 31281911, "link": "https://stackoverflow.com/questions/31281911/ruby-on-rails-using-multiple-has-many-associations-to-the-same-model", "title": "Ruby on Rails -- Using multiple has_many associations to the same model", "body": "<p>I have a simple program where an event can be created by a user, and the Event class knows who created it: </p>\n\n<pre><code>class Event &lt; ActiveRecord::Base\n\n  # the owner of the event\n  belongs_to :user\n\nend\n\nclass User &lt; ActiveRecord::Base\n\n  # a user has 0 to n created events\n  has_many :events\n\nend\n</code></pre>\n\n<p>So far so good, I get the correct association behaviour when I call \"event.user\" for example, and only the creator of the event can perform CRUD operations on his/her event. </p>\n\n<p>However I want the ability for a user to save events (not in the database sense, just so they can view it in their dashboard or such), and I want to just use these two models. I tried adding a \"user_saved_id\" to the Event model as a new column to keep track of the users which save it like the following:</p>\n\n<pre><code>class Event &lt; ActiveRecord::Base\n\n  # the owner of the event\n  belongs_to :user\n\nend\n\nclass User &lt; ActiveRecord::Base\n\n  # a user has 0 to n created events\n  has_many :events\n\n  # a user has 0 to n saved events, including the created event\n  has_many :saved_events, foreign_key: 'user_saved_id', class_name: \"Event\"\n\nend\n</code></pre>\n\n<p>However I am having no such luck. When I try to initialize an event creator to have automatically saved his/her own event when he/she creates it for example, I get an \" undefined method `each' \" in the create method below (I am using the devise gem, and \"current_user\" is a helper function which returns the id of the current signed in user):</p>\n\n<pre><code># POST /events\n# POST /events.json\n  def create\n    @event = Event.new(event_params)\n\n    # associate an event with its creator, works correctly\n    @event.user = current_user\n\n    # initialize a user to have saved his own events, not working\n    @event.user.saved_events = current_user\n ...\n</code></pre>\n\n<p>I would greatly appreciate any pointers I can get on where I am getting it wrong, if I got the association relationship wrong, and if I am overthinking it and there is a simpler way to go about it. Thanks very much in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 205, "user_id": 4925363, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f9677975a7f1508434abccac7b2409ec?s=128&d=identicon&r=PG&f=1", "display_name": "SeattleDucati", "link": "https://stackoverflow.com/users/4925363/seattleducati"}, "edited": false, "score": 0, "creation_date": 1436318323, "post_id": 31281808, "comment_id": 50557068, "body": "This got me past the error. I had to change the link to read passreset_user_path. And now....I&#39;m getting different error:( param is missing or the value is empty: user. Its pointing to my strong params statement. <i>Sigh</i>"}, {"owner": {"reputation": 18224, "user_id": 406987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8865b16d4f3493cfae865af2b3247fd3?s=128&d=identicon&r=PG", "display_name": "Doon", "link": "https://stackoverflow.com/users/406987/doon"}, "reply_to_user": {"reputation": 205, "user_id": 4925363, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f9677975a7f1508434abccac7b2409ec?s=128&d=identicon&r=PG&f=1", "display_name": "SeattleDucati", "link": "https://stackoverflow.com/users/4925363/seattleducati"}, "edited": false, "score": 0, "creation_date": 1436318654, "post_id": 31281808, "comment_id": 50557148, "body": "well open a new question, showing your form and the strong params  code.  but my guess is that your form is just a form_tag, not a form_for @user, so you params has doesn&#39;t contain the :user key that everything is under?"}, {"owner": {"reputation": 205, "user_id": 4925363, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f9677975a7f1508434abccac7b2409ec?s=128&d=identicon&r=PG&f=1", "display_name": "SeattleDucati", "link": "https://stackoverflow.com/users/4925363/seattleducati"}, "edited": false, "score": 0, "creation_date": 1436321178, "post_id": 31281808, "comment_id": 50557675, "body": "I&#39;m going to take a crack at it in the morning, and open a new question if I can&#39;t sort it out. Thank you Doon."}], "tags": [], "owner": {"reputation": 18224, "user_id": 406987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8865b16d4f3493cfae865af2b3247fd3?s=128&d=identicon&r=PG", "display_name": "Doon", "link": "https://stackoverflow.com/users/406987/doon"}, "is_accepted": true, "score": 2, "last_activity_date": 1436316704, "creation_date": 1436316704, "answer_id": 31281808, "question_id": 31281722, "link": "https://stackoverflow.com/questions/31281722/rails-couldnt-find-user-with-id/31281808#31281808", "title": "Rails -Couldn&#39;t find User with &#39;id&#39;=", "body": "<p>if you look at your route output , it is looking for a <code>user_id</code> as part of the nested route   </p>\n\n<pre><code>user_passreset GET    /users/:user_id/passreset(.:format)  \n</code></pre>\n\n<p>if you make the route on the member, it should  match based on <code>:id</code>  again. </p>\n\n<pre><code>resources :users do\n  resources :articles\n  member do \n    get 'passreset'\n  end\nend \n</code></pre>\n"}], "owner": {"reputation": 205, "user_id": 4925363, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f9677975a7f1508434abccac7b2409ec?s=128&d=identicon&r=PG&f=1", "display_name": "SeattleDucati", "link": "https://stackoverflow.com/users/4925363/seattleducati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 915, "favorite_count": 1, "accepted_answer_id": 31281808, "answer_count": 1, "score": 0, "last_activity_date": 1436316704, "creation_date": 1436316072, "question_id": 31281722, "link": "https://stackoverflow.com/questions/31281722/rails-couldnt-find-user-with-id", "title": "Rails -Couldn&#39;t find User with &#39;id&#39;=", "body": "<p>I've been developing a site based on the Hartl's guide. I want to move the password reset functionality to it own partial. </p>\n\n<p>I created a partial, _passreset.html.erb. Essentially a copy of the _form that only shows your username and displays the password/password_confirm fields. </p>\n\n<p>But I'm not even getting there. On the show.html.erb page (the profile page), I have links to Edit and Password Reset. Here is the code:</p>\n\n<pre><code>   &lt;% if current_user.admin? || current_user == @user %&gt;\n   &lt;%= link_to \"Edit\", edit_user_path(@user) %&gt; | \n   &lt;%= link_to \"Password Reset\", user_passreset_path(@user)%&gt;\n   &lt;% end %&gt;\n</code></pre>\n\n<p>When I click on the \"Password Reset\" link, I get the follow error: <br>\nActiveRecord::RecordNotFound in UsersController#show<br>\nCouldn't find User with 'id'=passreset</p>\n\n<p>The source is my users controller set_user function:</p>\n\n<pre><code>def set_user\n  @user = User.find(params[:id])\nend\n</code></pre>\n\n<p>The route for the new function looks like this:</p>\n\n<pre><code>resources :users do\nresources :articles\nget 'passreset'\nend\n</code></pre>\n\n<p>rake routes shows this line:</p>\n\n<pre><code> user_passreset GET    /users/:user_id/passreset(.:format)                 users#passreset\n</code></pre>\n\n<p>I've also explicitly declared the route (get 'users/passreset'), it doesn't make a difference. </p>\n\n<p>Why is it looking for an id of 'passreset'? I don't get it. </p>\n\n<p>I don't think it matters, but this is the passrest function from my users controller:</p>\n\n<pre><code> def passreset\n respond_to do |format|\n  if @user.update(user_params)\n    format.html { redirect_to @user, notice: 'Password was      successfully updated.' }\n    format.json { render :show, status: :ok, location: @user }\n  else\n    format.html { render :edit }\n    format.json { render json: @user.errors, status:  :unprocessable_entity }\n  end\nend\nend\n</code></pre>\n"}, {"tags": ["ruby", "string", "loops", "while-loop"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1436323436, "post_id": 31281638, "comment_id": 50558178, "body": "What you have is fine, except you must assign <code>start</code> to any value other than <code>&quot;yes&quot;</code> before the while loop is entered. If that is not done, the following exception will be raised: <code>undefined local variable or method &#39;start&#39; for main:Object</code>."}], "answers": [{"tags": [], "owner": {"reputation": 973, "user_id": 1333436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81c3e738c6c4d4ec282b2df918cf882c?s=128&d=identicon&r=PG", "display_name": "Jesus Castello", "link": "https://stackoverflow.com/users/1333436/jesus-castello"}, "is_accepted": true, "score": 3, "last_activity_date": 1436316384, "last_edit_date": 1436316384, "creation_date": 1436316069, "answer_id": 31281721, "question_id": 31281638, "link": "https://stackoverflow.com/questions/31281638/stop-a-while-loop-when-a-specific-term-word-is-detected-in-the-string/31281721#31281721", "title": "Stop a while loop when a specific term/word is detected in the string", "body": "<p>I think this will work, btw <code>until</code> is the same as <code>while</code> but with a negative condition.</p>\n\n<pre><code>input = gets.chomp.downcase\n\nuntil input.include? 'yes'\n  # does stuff\n  input = gets.chomp.downcase\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95, "user_id": 5075471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f5a782f69256b285741b2ded1d28a0d?s=128&d=identicon&r=PG&f=1", "display_name": "verbad", "link": "https://stackoverflow.com/users/5075471/verbad"}, "is_accepted": false, "score": 1, "last_activity_date": 1436408243, "creation_date": 1436408243, "answer_id": 31307003, "question_id": 31281638, "link": "https://stackoverflow.com/questions/31281638/stop-a-while-loop-when-a-specific-term-word-is-detected-in-the-string/31307003#31307003", "title": "Stop a while loop when a specific term/word is detected in the string", "body": "<p>I would recommend using #break since it's more useful in similar but slightly different cases. Using #until or #while with a condition implies that you're willing to loop until you see the breaking condition and until then the loop will be infinite.  </p>\n\n<p>What is slightly more common in practice is iterating over a file or and array and wanting to break prematurely if a condition is met but ending the loop when the array or file read is complete</p>\n\n<pre><code>while (line = file.gets) do\n  break if line =~ /yes/ # matches if line contains 'yes' anywhere\nend\n</code></pre>\n\n<p>There are variations on the file handling that will read the whole file at once or line by line as here but in any case the loop will exit if condition is matched <em>or</em> end of file is reached.  If you really want an infinite loop that runs until condition is matched, you can use this same approach with while(1) do ... </p>\n"}], "owner": {"reputation": 846, "user_id": 5091531, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-7TKGbdvQH1s/AAAAAAAAAAI/AAAAAAAABv0/39zna4pfTqs/photo.jpg?sz=128", "display_name": "Pabi", "link": "https://stackoverflow.com/users/5091531/pabi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1277, "favorite_count": 0, "accepted_answer_id": 31281721, "answer_count": 2, "score": 2, "last_activity_date": 1436408243, "creation_date": 1436315548, "question_id": 31281638, "link": "https://stackoverflow.com/questions/31281638/stop-a-while-loop-when-a-specific-term-word-is-detected-in-the-string", "title": "Stop a while loop when a specific term/word is detected in the string", "body": "<p>I would like to know how to create a code in ruby that would stop the while loop not matter what is written as long as the gets string contains the word \"yes\".</p>\n\n<p>This is what I have so far:</p>\n\n<pre><code>while start!=\"yes\" #make it so it stops the loop even if ex:\"Yes, please!!!\" is inputed.\n  #does stuff\n  start=gets.chomp\nend\n</code></pre>\n\n<p>Thank you very much.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "regex", "validation", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1436315000, "post_id": 31281439, "comment_id": 50556230, "body": "Blacklisting is a slippery slope. What about strings starting with <code>v0ndel</code>, <code>\\&#47;ondel</code>, <code>Vond3l</code>...? When you try to restrict people, there are some who take it as a challenge to beat your algorithm. And people are a lot more inventive in ways to circumvent your code than you are going to be in writing code to intercept them."}], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1436314411, "creation_date": 1436314411, "answer_id": 31281498, "question_id": 31281439, "link": "https://stackoverflow.com/questions/31281439/how-to-validate-that-username-does-not-start-with-certain-string/31281498#31281498", "title": "How to validate that username does not start with certain string?", "body": "<p>Just change the condition in your <code>vondel_not_allowed</code> method to:</p>\n\n<pre><code>def vondel_not_allowed\n  if username.start_with?('vondel')\n    errors.add(:username, \"cannot start with 'vondel'\")\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1436314701, "post_id": 31281510, "comment_id": 50556169, "body": "A Regular Expression, <i>in the right place, and correctly written</i>, is an invaluable tool. Incorrectly written or used when other methods are more sensible, understandable or maintainable, is a nightmare or CPU-time burner. <code>starts_with?</code> will run circles around a regular expression because it&#39;s designed to do one thing, see if the string starts with the sub-string; Regular expressions are generalized and as a result suffer in readability and speed. Regex are cool when used correctly, but they&#39;re not a universal solution."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 2, "creation_date": 1436315390, "post_id": 31281510, "comment_id": 50556323, "body": "Wrap the string to lower-case and compare against the lower-case version of the target, otherwise string-case differences will result in failures to match: <code>&#39;Foo&#39;.start_with?(&#39;foo&#39;) # =&gt; false</code> vs. <code>&#39;Foo&#39;.downcase.start_with?(&#39;foo&#39;) # =&gt; true</code>"}], "tags": [], "owner": {"reputation": 11603, "user_id": 234593, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8e2ee1b00d372ad8f6ed5e87385ffef5?s=128&d=identicon&r=PG", "display_name": "Kache", "link": "https://stackoverflow.com/users/234593/kache"}, "is_accepted": true, "score": 3, "last_activity_date": 1436315080, "last_edit_date": 1495542106, "creation_date": 1436314535, "answer_id": 31281510, "question_id": 31281439, "link": "https://stackoverflow.com/questions/31281439/how-to-validate-that-username-does-not-start-with-certain-string/31281510#31281510", "title": "How to validate that username does not start with certain string?", "body": "<p>The most straightforward way is to use the <code>starts_with?</code> method:</p>\n\n<pre><code>test_string = \"vondelfoo\"\ntest_string.starts_with?(\"vondel\") # =&gt; true\n</code></pre>\n\n<p>Just as an aside, I recommend you learn how to do this with a regex. Regexes are an invaluable tool, and you should definitely learn how to use them.</p>\n\n<p>Also a tip - I've heard <a href=\"http://rubular.com/\" rel=\"nofollow noreferrer\">Rubular</a> to be a good tool for getting started with Ruby regular expressions.</p>\n\n<p><strong>edit</strong></p>\n\n<p><a href=\"https://stackoverflow.com/users/128421/the-tin-man\">the Tin Man</a> brings up a good point - Regexps are a powerful but an overly complex solution for this problem. Although I highly recommend you learn how to use them, you should prefer the straightforward and simple solution here.</p>\n"}], "owner": {"reputation": 2754, "user_id": 4499505, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2d1e61c81e3933b4ff09de01b9ff81d4?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4499505/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1515, "favorite_count": 0, "accepted_answer_id": 31281510, "answer_count": 2, "score": 2, "last_activity_date": 1436315152, "creation_date": 1436313880, "last_edit_date": 1436315152, "question_id": 31281439, "link": "https://stackoverflow.com/questions/31281439/how-to-validate-that-username-does-not-start-with-certain-string", "title": "How to validate that username does not start with certain string?", "body": "<p>One of the variables in a User model is <code>username</code>. I would like to reserve usernames starting with \"vondel\" for something else. Therefore, I would like to make it invalid for a <code>username</code> to start with \"vondel\". How can I do this?</p>\n\n<p>Below is my attempt to set the validations on <code>username</code>. However, generating a <code>username</code> that starts with \"vondel\" is still possible and generates no error message. Is there a way to do this with a regular expression?</p>\n\n<pre><code>before_save :downcase_username        # Method that converts username to all downcase.\nVALID_USERNAME_REGEX = /\\A[a-zA-Z0-9_-]+\\z/i\nvalidates :username, presence: true,\n                     length: { in: 6..15 },\n                     format: { with: VALID_USERNAME_REGEX },\n                     uniqueness: { case_sensitive: false }\nvalidate :vondel_not_allowed\n\nprivate \n  def vondel_not_allowed\n    if username == \"vondel*\"\n      errors.add(:username, \"Username cannot start with 'vondel'\")\n    end\n  end\n</code></pre>\n"}, {"tags": ["ruby", "control-flow"], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1436371412, "post_id": 31281461, "comment_id": 50586379, "body": "While it&#39;s important to know about loops and flow control, this really doesn&#39;t answer the question. How would you apply this to the question?"}, {"owner": {"reputation": 11603, "user_id": 234593, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8e2ee1b00d372ad8f6ed5e87385ffef5?s=128&d=identicon&r=PG", "display_name": "Kache", "link": "https://stackoverflow.com/users/234593/kache"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1436381558, "post_id": 31281461, "comment_id": 50592686, "body": "Call it an attempt to lead him to the answer rather than just code it for him. The concepts this problem addresses are introduced at the beginning of all basic programming tutorials, and I felt it was important for him to be able to find one and learn from it, rather than just give him the answer outright."}, {"owner": {"reputation": 9786, "user_id": 485864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f34b46a9a4723bdbc6e1fdcf71b08517?s=128&d=identicon&r=PG", "display_name": "vgoff", "link": "https://stackoverflow.com/users/485864/vgoff"}, "edited": false, "score": 0, "creation_date": 1436567405, "post_id": 31281461, "comment_id": 50685569, "body": "But this is an answer site... And they can determine what is important for themself."}, {"owner": {"reputation": 11603, "user_id": 234593, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8e2ee1b00d372ad8f6ed5e87385ffef5?s=128&d=identicon&r=PG", "display_name": "Kache", "link": "https://stackoverflow.com/users/234593/kache"}, "edited": false, "score": 0, "creation_date": 1555553267, "post_id": 31281461, "comment_id": 98153930, "body": "see <a href=\"https://meta.stackoverflow.com/questions/334822/how-do-i-ask-and-answer-homework-questions\" title=\"how do i ask and answer homework questions\">meta.stackoverflow.com/questions/334822/&hellip;</a>, where it explains sometimes it&#39;s better &quot;not to provide a complete code sample&quot;"}], "tags": [], "owner": {"reputation": 11603, "user_id": 234593, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8e2ee1b00d372ad8f6ed5e87385ffef5?s=128&d=identicon&r=PG", "display_name": "Kache", "link": "https://stackoverflow.com/users/234593/kache"}, "is_accepted": false, "score": -2, "last_activity_date": 1436381337, "last_edit_date": 1436381337, "creation_date": 1436314057, "answer_id": 31281461, "question_id": 31281407, "link": "https://stackoverflow.com/questions/31281407/test-for-repeated-gets-chomp-input-in-ruby/31281461#31281461", "title": "Test for repeated gets.chomp input in Ruby", "body": "<p>I suggest looking for a ruby tutorial about \"loops\" and \"control flow\".</p>\n\n<p>I think the <a href=\"https://rubymonk.com/learning/books/1-ruby-primer\" rel=\"nofollow\">Ruby Primer lesson at rubymonk.com</a> may have what you need.</p>\n\n<p>This example may also be helpful:</p>\n\n<pre><code>times = 0          # keep track of iterations\nwhile times &lt; 10   # repeatedly, while this condition is true\n  puts \"hello!\"    # output \"hello!\"\n  times += 1       # increase count of iterations\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 18224, "user_id": 406987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8865b16d4f3493cfae865af2b3247fd3?s=128&d=identicon&r=PG", "display_name": "Doon", "link": "https://stackoverflow.com/users/406987/doon"}, "reply_to_user": {"reputation": 9786, "user_id": 485864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f34b46a9a4723bdbc6e1fdcf71b08517?s=128&d=identicon&r=PG", "display_name": "vgoff", "link": "https://stackoverflow.com/users/485864/vgoff"}, "edited": false, "score": 0, "creation_date": 1436317803, "post_id": 31281560, "comment_id": 50556938, "body": "Well OP said have the conversation end, exit does that :)   But it was meant to demonstrate how to check the input/keep state.   You can replace <code>exit</code> with <code>break</code> and it will jump out of the while loop, and thus end the conversation as well."}, {"owner": {"reputation": 18224, "user_id": 406987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8865b16d4f3493cfae865af2b3247fd3?s=128&d=identicon&r=PG", "display_name": "Doon", "link": "https://stackoverflow.com/users/406987/doon"}, "reply_to_user": {"reputation": 9786, "user_id": 485864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f34b46a9a4723bdbc6e1fdcf71b08517?s=128&d=identicon&r=PG", "display_name": "vgoff", "link": "https://stackoverflow.com/users/485864/vgoff"}, "edited": false, "score": 1, "creation_date": 1436319603, "post_id": 31281560, "comment_id": 50557357, "body": "Fair enough, updated answer to use a break to exit the while as opposed to the exit/world stoppage."}], "tags": [], "owner": {"reputation": 18224, "user_id": 406987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8865b16d4f3493cfae865af2b3247fd3?s=128&d=identicon&r=PG", "display_name": "Doon", "link": "https://stackoverflow.com/users/406987/doon"}, "is_accepted": true, "score": 0, "last_activity_date": 1436319559, "last_edit_date": 1436319559, "creation_date": 1436314807, "answer_id": 31281560, "question_id": 31281407, "link": "https://stackoverflow.com/questions/31281407/test-for-repeated-gets-chomp-input-in-ruby/31281560#31281560", "title": "Test for repeated gets.chomp input in Ruby", "body": "<p>You need to keep track of how many times the user has input \"BYE\". When that number reaches 3 you exit:  </p>\n\n<pre><code> byecount = 0\n while kid = gets.chomp\n case kid     \n  when \"BYE\"\n    #increase the count of bye  \n    byecount +=1\n    puts byecount\n    break if byecount == 3\n  else\n    #reset our count\n    byecount = 0\n    speak\n  end\nend\n</code></pre>\n\n<p>The code resets to 0 on a non \"BYE\" answer. </p>\n\n<p>I find a <code>case</code> statement to be very handy in situations like this when dealing with different user input, especially coupled with regular expressions.</p>\n"}], "owner": {"reputation": 3, "user_id": 5078489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eTqCk.jpg?s=128&g=1", "display_name": "Tommy Bruzzese", "link": "https://stackoverflow.com/users/5078489/tommy-bruzzese"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 694, "favorite_count": 0, "accepted_answer_id": 31281560, "answer_count": 2, "score": 0, "last_activity_date": 1436381337, "creation_date": 1436313689, "last_edit_date": 1436371314, "question_id": 31281407, "link": "https://stackoverflow.com/questions/31281407/test-for-repeated-gets-chomp-input-in-ruby", "title": "Test for repeated gets.chomp input in Ruby", "body": "<p>I am working in Ruby, and I am trying to test for a user's input (the variable <code>kid</code>) being the same three times. </p>\n\n<p>I want my method <code>speak</code> to be called on endlessly until the user enters \"BYE\" three separate times when asked the three separate questions. </p>\n\n<p>Right now, if the user inputs \"BYE\" even only for one question the entire conversation between the terminal and user ends. </p>\n\n<p>Is there a way to have the program test for \"BYE\" being said three times, and only once said three separate times, have the conversation end?</p>\n\n<pre><code>kid = gets.chomp    \nunless kid == \"BYE\"  \n    speak  \nend\n</code></pre>\n\n<p>I don't know if there is a really simple solution or only a complex one, but any answers help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "gem"], "comments": [{"owner": {"reputation": 1504, "user_id": 1208166, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/HWLcG.jpg?s=128&g=1", "display_name": "creativereason", "link": "https://stackoverflow.com/users/1208166/creativereason"}, "edited": false, "score": 0, "creation_date": 1436313535, "post_id": 31281300, "comment_id": 50555877, "body": "There is a really good number of answers on <a href=\"http://stackoverflow.com/questions/4487948/how-can-i-specify-a-local-gem-in-my-gemfile\">this previous question</a>"}, {"owner": {"reputation": 9770, "user_id": 3011531, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/31da892ff616d781b2d3396c9271e040?s=128&d=identicon&r=PG&f=1", "display_name": "Some Guy", "link": "https://stackoverflow.com/users/3011531/some-guy"}, "reply_to_user": {"reputation": 1504, "user_id": 1208166, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/HWLcG.jpg?s=128&g=1", "display_name": "creativereason", "link": "https://stackoverflow.com/users/1208166/creativereason"}, "edited": false, "score": 0, "creation_date": 1436313811, "post_id": 31281300, "comment_id": 50555963, "body": "@creativereason I actually did exactly follow one of the previous questions, and yet it doesn&#39;t work. That&#39;s why I added details that puzzle me, like how if I require a version that doesn&#39;t exist, bundle install still seems to run successfully. Why would it do that? There must be something I&#39;m doing wrong..."}, {"owner": {"reputation": 1504, "user_id": 1208166, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/HWLcG.jpg?s=128&g=1", "display_name": "creativereason", "link": "https://stackoverflow.com/users/1208166/creativereason"}, "edited": false, "score": 0, "creation_date": 1436314142, "post_id": 31281300, "comment_id": 50556036, "body": "I am not sure the version matters when you use path? Did you try the other answers? Specifically <a href=\"http://stackoverflow.com/a/14167368/1208166\">Bloudermilk&#39;s option</a>?"}, {"owner": {"reputation": 9770, "user_id": 3011531, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/31da892ff616d781b2d3396c9271e040?s=128&d=identicon&r=PG&f=1", "display_name": "Some Guy", "link": "https://stackoverflow.com/users/3011531/some-guy"}, "reply_to_user": {"reputation": 1504, "user_id": 1208166, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/HWLcG.jpg?s=128&g=1", "display_name": "creativereason", "link": "https://stackoverflow.com/users/1208166/creativereason"}, "edited": false, "score": 0, "creation_date": 1436315137, "post_id": 31281300, "comment_id": 50556254, "body": "The version apparently does matter when you use path, because when I didn&#39;t have a version listed, bundle install failed. I saw bloudermilk&#39;s answer but I am not using Github or even git yet for the gem, so I don&#39;t think it&#39;d work. Regardless, my syntax seems like it should work, no?"}, {"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1436321021, "post_id": 31281300, "comment_id": 50557636, "body": "&#39;path` isn\u2019t for specifying where to find the built Gem file locally, it is for pointing to the unpacked source directory for the gem. In your case it would be something like <code>gem &#39;mygem&#39;, path: &#39;&#47;Users&#47;me&#47;projects&#47;mygem&#39;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1967, "user_id": 2355344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5309fb1bc1f467ac017b7fdd89ce5154?s=128&d=identicon&r=PG", "display_name": "Collin Graves", "link": "https://stackoverflow.com/users/2355344/collin-graves"}, "is_accepted": true, "score": 2, "last_activity_date": 1436317389, "creation_date": 1436317389, "answer_id": 31281884, "question_id": 31281300, "link": "https://stackoverflow.com/questions/31281300/im-developing-a-ruby-gem-how-can-i-try-it-out-locally-with-my-rails-app/31281884#31281884", "title": "I&#39;m developing a Ruby gem, how can I try it out locally with my Rails app?", "body": "<p>I prefer to use the following when working on a local gem side-by-side with a Rails project:</p>\n\n<pre><code>gem 'foo',\n  :git =&gt; '/path/to/local/git/repo',\n  :branch =&gt; 'my-fancy-feature-branch'\n</code></pre>\n"}], "owner": {"reputation": 9770, "user_id": 3011531, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/31da892ff616d781b2d3396c9271e040?s=128&d=identicon&r=PG&f=1", "display_name": "Some Guy", "link": "https://stackoverflow.com/users/3011531/some-guy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "accepted_answer_id": 31281884, "answer_count": 1, "score": 0, "last_activity_date": 1436317389, "creation_date": 1436312810, "last_edit_date": 1495539839, "question_id": 31281300, "link": "https://stackoverflow.com/questions/31281300/im-developing-a-ruby-gem-how-can-i-try-it-out-locally-with-my-rails-app", "title": "I&#39;m developing a Ruby gem, how can I try it out locally with my Rails app?", "body": "<p>I am developing a gem meant to be used with Rails projects and want to try it out locally with another Rails app of mine.</p>\n\n<p>I built the gem with <code>bundle exec rake release</code> which put a .gem file in the /pkg directory.</p>\n\n<p>Then, in my Rails app, I added the following to my gemfile</p>\n\n<p><code>gem 'mygem', '0.1.1', path: '/Users/me/projects/mygem/ruby/pkg'</code></p>\n\n<p>I then ran <code>bundle install</code> which said it installed the gem. When I do this, it removes the gem from the path. IDK where it went.</p>\n\n<p>When I start the Rails app, it's like the gem isn't included at all.</p>\n\n<p>Interestingly, if I add a version that doesn't even exist, it still says <code>bundle install</code> works fine. (Example: <code>gem 'mygem', '0.1.2345', path: '/Users/me/projects/mygem/ruby/pkg'</code>)</p>\n\n<p>What am I supposed to do to try out my Gem locally with a Rails app?</p>\n\n<p>This question is different from <a href=\"https://stackoverflow.com/questions/4487948/how-can-i-specify-a-local-gem-in-my-gemfile\">How can I specify a local gem in my Gemfile?</a> because I explicitly tell bundle in my Gemfile to use the local gem, with the path given, and it still doesn't work. When I run bundle install, it says</p>\n\n<pre><code>Using mygem 0.1.1 from source at /Users/me/projects/mygem/pkg\n</code></pre>\n\n<p>So you'd think it works right, but it still doesn't.</p>\n\n<p>Interestly, if I try it with a version number that doesn't exist, like mygem 1.2.3, it still runs bundle install successfully, which is really weird and seems like a bug:</p>\n\n<pre><code>Using mygem 1.2.3 (was 0.1.1) from source at /Users/me/projects/mygem/pkg\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 1, "creation_date": 1436311890, "post_id": 31281101, "comment_id": 50555456, "body": "Have you at least <i>attempted</i> a solution?  Do you know how to iterate over a hash&#39;s key-value pairs?"}, {"owner": {"reputation": 41937, "user_id": 28388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/47550cfeb9b0b71ec971fae710e96f1c?s=128&d=identicon&r=PG", "display_name": "rogeriopvl", "link": "https://stackoverflow.com/users/28388/rogeriopvl"}, "edited": false, "score": 3, "creation_date": 1436312120, "post_id": 31281101, "comment_id": 50555526, "body": "I&#39;m voting to close this question as off-topic because it&#39;s clearly homework."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 41937, "user_id": 28388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/47550cfeb9b0b71ec971fae710e96f1c?s=128&d=identicon&r=PG", "display_name": "rogeriopvl", "link": "https://stackoverflow.com/users/28388/rogeriopvl"}, "edited": false, "score": 0, "creation_date": 1436312475, "post_id": 31281101, "comment_id": 50555623, "body": "@Rogeriopvl, why do you say it&#39;s &quot;clearly homework&quot;. If it is, why would that be &quot;off-topic&quot;? Is there a SO policy that homework questions are not to be answered?"}, {"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "reply_to_user": {"reputation": 41937, "user_id": 28388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/47550cfeb9b0b71ec971fae710e96f1c?s=128&d=identicon&r=PG", "display_name": "rogeriopvl", "link": "https://stackoverflow.com/users/28388/rogeriopvl"}, "edited": false, "score": 0, "creation_date": 1436312863, "post_id": 31281101, "comment_id": 50555719, "body": "@rogeriopvl:  You shouldn&#39;t close a question <i>just because</i> it&#39;s homework."}, {"owner": {"reputation": 18224, "user_id": 406987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8865b16d4f3493cfae865af2b3247fd3?s=128&d=identicon&r=PG", "display_name": "Doon", "link": "https://stackoverflow.com/users/406987/doon"}, "edited": false, "score": 0, "creation_date": 1436312884, "post_id": 31281101, "comment_id": 50555731, "body": "take a look at  Enumerable, specifically the map/collect methods  (<a href=\"http://ruby-doc.org/core-2.2.2/Enumerable.html#method-i-map\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.2.2/Enumerable.html#method-i-map</a>)."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1436312958, "post_id": 31281101, "comment_id": 50555748, "body": "1. You want to combine a symbol (e.g., <code>:a</code>) and string (e.g.,<code>&#39;123&quot;</code>) to form another string. To do that you must first transform the symbol to a string, then you must combine the two strings into one. 2. You need a way to access each key-value pair of the hash (e.g., <code>:a</code> and <code>&quot;123&quot;</code>, so that you can perform #1.  For #2, investigate the method <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-map\" rel=\"nofollow noreferrer\">Enumerable#map</a>. The class <code>Hash</code> <code>include</code>s the <code>Enumerable</code> module, so <code>Enumerable</code> methods (such as <code>map</code>) can be sent to <code>Hash</code> instances."}, {"owner": {"reputation": 41937, "user_id": 28388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/47550cfeb9b0b71ec971fae710e96f1c?s=128&d=identicon&r=PG", "display_name": "rogeriopvl", "link": "https://stackoverflow.com/users/28388/rogeriopvl"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1436313550, "post_id": 31281101, "comment_id": 50555884, "body": "@CarySwoveland the user asking the question did not provide any proof that it was trying to solve the problem. And the question text is written as a programming exercise."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 41937, "user_id": 28388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/47550cfeb9b0b71ec971fae710e96f1c?s=128&d=identicon&r=PG", "display_name": "rogeriopvl", "link": "https://stackoverflow.com/users/28388/rogeriopvl"}, "edited": false, "score": 0, "creation_date": 1436314641, "post_id": 31281101, "comment_id": 50556157, "body": "@rogeriopvl, when I began learning Ruby I had many practice questions like this one, and none were homework.  Moreover, while some SO members demand that the OP provide code to show that he or she has attempted to solve the problem (except, of course, when the OP has high-rep, in which case the &quot;requirement&quot; is <i>always</i> waived), others give the benefit of doubt to the OP, and when the OP hasn&#39;t a clue how to approach the problem, believe it is silly to demand to see code, however artificial it might be."}, {"owner": {"reputation": 137, "user_id": 5091603, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/199aa6a5820e394d2d58eb334c563bf4?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/5091603/tim"}, "reply_to_user": {"reputation": 41937, "user_id": 28388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/47550cfeb9b0b71ec971fae710e96f1c?s=128&d=identicon&r=PG", "display_name": "rogeriopvl", "link": "https://stackoverflow.com/users/28388/rogeriopvl"}, "edited": false, "score": 0, "creation_date": 1436315188, "post_id": 31281101, "comment_id": 50556271, "body": "To clarify this is not a homework assignment as @rogeriopvl had stated. This is from exercises that my friend gave me to practice because im trying to learn Ruby on my own online.   Also I&#39;ve been trying to solve this exercise for a few hours now but im having trouble getting started even after searching for possible solution on stackoverflow. Most of the solutions or similar solutions were to complicated for my understanding."}, {"owner": {"reputation": 137, "user_id": 5091603, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/199aa6a5820e394d2d58eb334c563bf4?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/5091603/tim"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1436315193, "post_id": 31281101, "comment_id": 50556274, "body": "Thanks for showing my how to approach it @CarySwoveland. Working on it right now"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1436316173, "post_id": 31281101, "comment_id": 50556502, "body": "I was incorrect when I said that, when combining a symbol and a string, you must first convert the symbol to a string. (See, e.g., @spickerman&#39;s answer and Chris&#39; comment.) However, since you are just learning Ruby, I think it is useful to think of the conversion of the symbol to a string as a separate step."}], "answers": [{"comments": [{"owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "edited": false, "score": 1, "creation_date": 1436314704, "post_id": 31281309, "comment_id": 50556172, "body": "I&#39;d have gone with <code>arr.map(&amp;:join)</code> personally."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "edited": false, "score": 0, "creation_date": 1436315302, "post_id": 31281309, "comment_id": 50556298, "body": "@Chris, that&#39;s interesting; I didn&#39;t know <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-join\" rel=\"nofollow noreferrer\">Array#join</a> converted symbols to strings, but it does make sense. In fact, it converts all elements to strings and even seems to flatten arrays: <code>[{d: :e}, [:a, [:b, :c]] , &#39;s&#39;].join #=&gt; &quot;{:d=&gt;:e}abcs&quot;</code>."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 2, "last_activity_date": 1436312903, "creation_date": 1436312903, "answer_id": 31281309, "question_id": 31281101, "link": "https://stackoverflow.com/questions/31281101/combine-keys-and-values-in-ruby/31281309#31281309", "title": "Combine keys and values in RUBY", "body": "<p>I would do something like this:</p>\n\n<pre><code>{:a =&gt; \"123\", :b =&gt; \"345\", :c =&gt; \"678\", :d =&gt; \"910\"}.map { |k, v| \"#{k}#{v}\" }\n#=&gt; [\"a123\", \"b345\", \"c678\", \"d910\"]\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 5091603, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/199aa6a5820e394d2d58eb334c563bf4?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/5091603/tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 488, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1436343354, "creation_date": 1436311614, "last_edit_date": 1436313289, "question_id": 31281101, "link": "https://stackoverflow.com/questions/31281101/combine-keys-and-values-in-ruby", "title": "Combine keys and values in RUBY", "body": "<p>Given a hash:</p>\n\n<pre><code>{:a =&gt; \"123\", :b =&gt; \"345\", :c =&gt; \"678\", :d =&gt; \"910\"}\n</code></pre>\n\n<p>Write a code that generates an array that combines the keys and values. So the resulting array should be:</p>\n\n<pre><code>[\"a123\", \"b345\", \"c678\", \"d910\"]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "routes"], "comments": [{"owner": {"reputation": 1755, "user_id": 3247496, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/nDtef.png?s=128&g=1", "display_name": "Ahmad Al-kheat", "link": "https://stackoverflow.com/users/3247496/ahmad-al-kheat"}, "edited": false, "score": 0, "creation_date": 1436311058, "post_id": 31280918, "comment_id": 50555243, "body": "Just remove the delete button outside of your form."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1436334663, "post_id": 31280918, "comment_id": 50561287, "body": "Or you can change the <code>button_to</code> to <code>link_to</code>."}], "answers": [{"tags": [], "owner": {"reputation": 103, "user_id": 4900710, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OUwJufr1yTs/AAAAAAAAAAI/AAAAAAAAHoU/ly6OqPUwKlQ/photo.jpg?sz=128", "display_name": "Jake Kaad", "link": "https://stackoverflow.com/users/4900710/jake-kaad"}, "is_accepted": false, "score": 1, "last_activity_date": 1436311884, "creation_date": 1436311884, "answer_id": 31281145, "question_id": 31280918, "link": "https://stackoverflow.com/questions/31280918/ruby-on-rails-form-buttons-get-their-routes-mixed-up/31281145#31281145", "title": "Ruby on rails, Form buttons get their routes mixed up", "body": "<p>Your delete button should be outside your form.    </p>\n\n<pre><code>&lt;%=form_for(happening) do |f|%&gt;\n   &lt;%=f.text_field :name, class:\"updateInput\" %&gt;\n   &lt;%=f.submit \"Save\", class:\"editButton\" %&gt;\n   &lt;input type=\"datetime-local\" value=\"&lt;%= happening.get_html_date %&gt;\"&gt;\n&lt;%end%&gt;\n\n&lt;%= button_to \"Delete\", happening, method: :delete, class:\"editButton\"%&gt; \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "is_accepted": true, "score": 2, "last_activity_date": 1436312487, "creation_date": 1436312487, "answer_id": 31281250, "question_id": 31280918, "link": "https://stackoverflow.com/questions/31280918/ruby-on-rails-form-buttons-get-their-routes-mixed-up/31281250#31281250", "title": "Ruby on rails, Form buttons get their routes mixed up", "body": "<p>You're seeing this behavior because there's more than meets the eye when you use the <code>button_to</code> helper. <code>button_to</code> doesn't just create a button -- it actually creates an entire form, with the actual button serving as the form's submit button.</p>\n\n<p>By including your <code>button_to</code> helper within a form, you're violating HTML's \"no nested forms\" rule and effectively adding a second submit button for your form which overrides the intended submit button. There's a difference between a submit button and an input of type button in HTML, and as I mentioned already, <code>button_to</code> creates a submit button.</p>\n\n<p>If you move that <code>button_to</code> outside of your form as Ahmad pointed out, you'll have un-nested your forms and your view should behave as expected.</p>\n\n<p>Consult the <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-button_to\" rel=\"nofollow\">API doc</a> for additional details.</p>\n"}], "owner": {"reputation": 2886, "user_id": 5065235, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5ed986ad57ae09a3511841bd6b37d60f?s=128&d=identicon&r=PG", "display_name": "sjbuysse", "link": "https://stackoverflow.com/users/5065235/sjbuysse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 31281250, "answer_count": 2, "score": 0, "last_activity_date": 1436312487, "creation_date": 1436310492, "question_id": 31280918, "link": "https://stackoverflow.com/questions/31280918/ruby-on-rails-form-buttons-get-their-routes-mixed-up", "title": "Ruby on rails, Form buttons get their routes mixed up", "body": "<p>While making a form in Ruby on Rails I encoutered something peculiar, My <code>submit</code> button performs the action of another button in the form.</p>\n\n<pre><code>&lt;%=form_for(happening) do |f|%&gt;\n   &lt;%=f.text_field :name, class:\"updateInput\" %&gt;\n   &lt;%=f.submit \"Save\", class:\"editButton\" %&gt;\n   &lt;%= button_to \"Delete\", happening, method: :delete, class:\"editButton\"%&gt;\n   &lt;input type=\"datetime-local\" value=\"&lt;%= happening.get_html_date %&gt;\"&gt;\n&lt;%end%&gt;\n</code></pre>\n\n<p>When I click the <code>submit</code> button in this form, it will be routed to the <code>destroy</code> action, rather than the <code>update</code> one.\nWhen I remove the <code>delete</code>button, everything is routed properly.</p>\n\n<p>Does someone have an explination for this? Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "constructor", "private"], "comments": [{"owner": {"reputation": 6267, "user_id": 1144104, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c135bc644610fabc6e059b73fdd7f8ad?s=128&d=identicon&r=PG", "display_name": "jazzytomato", "link": "https://stackoverflow.com/users/1144104/jazzytomato"}, "edited": false, "score": 0, "creation_date": 1436310580, "post_id": 31280818, "comment_id": 50555103, "body": "Can you please try to explain better ? What do you mean by <i>each insertion modify the whole tree</i> ? Can we see some code ?"}, {"owner": {"reputation": 85, "user_id": 4020957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/05Es0.png?s=128&g=1", "display_name": "DoubleCompil", "link": "https://stackoverflow.com/users/4020957/doublecompil"}, "reply_to_user": {"reputation": 6267, "user_id": 1144104, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c135bc644610fabc6e059b73fdd7f8ad?s=128&d=identicon&r=PG", "display_name": "jazzytomato", "link": "https://stackoverflow.com/users/1144104/jazzytomato"}, "edited": false, "score": 0, "creation_date": 1436315494, "post_id": 31280818, "comment_id": 50556352, "body": "Sure, I wanted to avoid to post my ugly code (I am not a dev ruby normally). I didn&#39;t post all my code, but basically the idea is there. I have kind of API for my data structure, and I want to avoid users to break everything."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 4020957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/05Es0.png?s=128&g=1", "display_name": "DoubleCompil", "link": "https://stackoverflow.com/users/4020957/doublecompil"}, "edited": false, "score": 0, "creation_date": 1436329471, "post_id": 31283229, "comment_id": 50559616, "body": "Thanks, finally it was so simple... So I don&#39;t know why your solution with an <code>ActiveRecord</code> doesn&#39;t work, since <code>new</code> doesn&#39;t look to exists in the class method <code>self.create_child</code>. A <code>self.class.send :new</code> did the trick, even it&#39;s ugly. At least now it&#39;s more difficult for the data structure user to do wrong stuff."}, {"owner": {"reputation": 1739, "user_id": 2863439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7c95bb944bbbe597543ae8a88987995?s=128&d=identicon&r=PG&f=1", "display_name": "limekin", "link": "https://stackoverflow.com/users/2863439/limekin"}, "reply_to_user": {"reputation": 85, "user_id": 4020957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/05Es0.png?s=128&g=1", "display_name": "DoubleCompil", "link": "https://stackoverflow.com/users/4020957/doublecompil"}, "edited": false, "score": 0, "creation_date": 1436336154, "post_id": 31283229, "comment_id": 50561921, "body": "Glad. And yeah, my bad, the override of <code>initialize</code> was unnecessary. I&#39;ve updated it."}], "tags": [], "owner": {"reputation": 1739, "user_id": 2863439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7c95bb944bbbe597543ae8a88987995?s=128&d=identicon&r=PG&f=1", "display_name": "limekin", "link": "https://stackoverflow.com/users/2863439/limekin"}, "is_accepted": true, "score": 1, "last_activity_date": 1436336003, "last_edit_date": 1436336003, "creation_date": 1436327560, "answer_id": 31283229, "question_id": 31280818, "link": "https://stackoverflow.com/questions/31280818/private-new-and-create-methods-in-a-rails-activerecord/31283229#31283229", "title": "Private new and create methods in a Rails ActiveRecord?", "body": "<p>You have an option to change the interface like this :</p>\n\n<pre><code># Just makin a sample base class.\n# In your case it would be ActiveRecord::Base\nclass RecordBase\n  def self.create(label)\n    record = new\n    record.label = label\n    record.save\n    record\n  end\n\n  def save\n    true\n  end\nend\n\nclass Task &lt; RecordBase\n  # Make the given class methods private.\n  private_class_method :new, :create\n\n  # Creates and returns the root.\n  def self.create_root(label)\n    # Task.create won't work here since create is private.\n    create(label)\n  end\n\n  def self.create_child(parent, label)\n    # Task.new won't work here since new is private.\n    child = new\n    child.label = label\n    # other stuffs like :\n    # child.attr = parent.attr\n    child.save\n    child\n  end\n\n  def create_child(label)\n    self.class.create_child(self, label)\n  end\nend\n\n# Things that don't work :\n# task = Task.new\n# task = Task.create('label')\n\n# Working part :\n# Creates and gets the root.\nroot = Task.create_root('label')\n\n# Creates a child\nchild = root.create_child('label')\n</code></pre>\n\n<p>Users are able to call <code>Task.create_child(parent, label)</code>, but I don't think it would be problem since it uses the same algorithm as <code>task.create_child(label)</code>.</p>\n"}], "owner": {"reputation": 85, "user_id": 4020957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/05Es0.png?s=128&g=1", "display_name": "DoubleCompil", "link": "https://stackoverflow.com/users/4020957/doublecompil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1108, "favorite_count": 2, "accepted_answer_id": 31283229, "answer_count": 1, "score": 1, "last_activity_date": 1436336003, "creation_date": 1436309923, "last_edit_date": 1436319875, "question_id": 31280818, "link": "https://stackoverflow.com/questions/31280818/private-new-and-create-methods-in-a-rails-activerecord", "title": "Private new and create methods in a Rails ActiveRecord?", "body": "<p>I have an ActiveRecord which is a node of a n-ary tree. There are many class methods in the model to create a root, append leaves and so on...</p>\n\n<p>As each insertion modify the whole tree, I want to avoid external classes to instantiate my model through new and create methods.</p>\n\n<p>Any idea how to make it ?\n(I am in Rails 4.0.2)</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>So the representation of tree structure I am using is a non-recursive representation - by intervals. <a href=\"http://sqlpro.developpez.com/cours/arborescence/\" rel=\"nofollow\">The implementation is described there</a>, but it's in French.</p>\n\n<p>Basically, each node have a left_tree and a right_tree that represent an interval. The left_tree and right_tree of the child of a node are inside the interval of the parent. This representation allow me to make very fast select on the tree, but on the other side have heavy insertion procedure.</p>\n\n<pre><code># Task schema\ncreate_table \"tasks\", force: true do |t|\n   t.string   \"label\"\n   t.integer  \"tree_level\"\n   t.integer  \"left_tree\"\n   t.integer  \"right_tree\"\nend\n</code></pre>\n\n<p>Then, for insertion I need to the intervals index for all the tree.</p>\n\n<pre><code># Model Task\n\n# Create the root of the tree. Only static method of the model\ndef self.create_root! label\n  Task.create! do |task|\n      task.tree_level = 1\n      task.left_tree = 1\n      task.right_tree = 2\n      task.label = label\n  end\nend\n\n# Method to add a child for a node. Task model\ndef create_child! label\n  new_task = Task.new\n\n  Task.transaction do\n    # Prepare the new task to be inserted in the intervals\n    new_task.left_tree = right_tree\n    new_task.right_tree = right_tree + 1\n    new_task.tree_level = tree_level + 1\n    new_task.label = label\n\n    # create an empty space in the tree\n    Task.where(\n      'right_tree &gt;= :right_tree', \n      { right_tree: right_tree }).update_all('right_tree = right_tree + 2')\n    Task.where(\n      'left_tree &gt;= :right_tree', \n      { right_tree: right_tree }).update_all('left_tree = left_tree + 2')\n\n    # Save the task, which have now a place in the tree.\n    new_task.save!\n  end\n\n  reload\n  return new_task\nend\n</code></pre>\n\n<p>As you can see, the model should never be instantiated outside my model Task.\nWe should create a root and then from this root create the whole tree through the method create_child!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 13534, "user_id": 644810, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ADwSQ.png?s=128&g=1", "display_name": "Rustam A. Gasanov", "link": "https://stackoverflow.com/users/644810/rustam-a-gasanov"}, "edited": false, "score": 0, "creation_date": 1436310014, "post_id": 31280529, "comment_id": 50554917, "body": "your first example can be simplified even more <code>numbers.reduce(:+)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 697, "user_id": 1836306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3b6c2d0b2bafdb9ad9cdf782873204d?s=128&d=identicon&r=PG", "display_name": "Jeff Nyman", "link": "https://stackoverflow.com/users/1836306/jeff-nyman"}, "edited": false, "score": 0, "creation_date": 1436310808, "post_id": 31280809, "comment_id": 50555165, "body": "That definitely does the trick! I appreciate the concise example. Now I just have to get to the point where I can from code that I tend to create to the code you just showed me."}, {"owner": {"reputation": 6267, "user_id": 1144104, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c135bc644610fabc6e059b73fdd7f8ad?s=128&d=identicon&r=PG", "display_name": "jazzytomato", "link": "https://stackoverflow.com/users/1144104/jazzytomato"}, "reply_to_user": {"reputation": 697, "user_id": 1836306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3b6c2d0b2bafdb9ad9cdf782873204d?s=128&d=identicon&r=PG", "display_name": "Jeff Nyman", "link": "https://stackoverflow.com/users/1836306/jeff-nyman"}, "edited": false, "score": 0, "creation_date": 1436311500, "post_id": 31280809, "comment_id": 50555359, "body": "Well, if you have an array that you want to reduce to one result by applying a recurrent logic, then you can probably use reduce :)"}], "tags": [], "owner": {"reputation": 6267, "user_id": 1144104, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c135bc644610fabc6e059b73fdd7f8ad?s=128&d=identicon&r=PG", "display_name": "jazzytomato", "link": "https://stackoverflow.com/users/1144104/jazzytomato"}, "is_accepted": true, "score": 2, "last_activity_date": 1436309885, "creation_date": 1436309885, "answer_id": 31280809, "question_id": 31280529, "link": "https://stackoverflow.com/questions/31280529/building-up-an-intuition-for-using-inject-in-ruby/31280809#31280809", "title": "Building up an Intuition for Using Inject in Ruby", "body": "<p>What about that ?</p>\n\n<pre><code>def process_data(condition, data)\n  condition.reduce(data) { |data, (key,value)| method(\"query_#{key}\").call(data, value) }\nend\n</code></pre>\n"}], "owner": {"reputation": 697, "user_id": 1836306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3b6c2d0b2bafdb9ad9cdf782873204d?s=128&d=identicon&r=PG", "display_name": "Jeff Nyman", "link": "https://stackoverflow.com/users/1836306/jeff-nyman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 2, "accepted_answer_id": 31280809, "answer_count": 1, "score": 2, "last_activity_date": 1436309885, "creation_date": 1436308482, "question_id": 31280529, "link": "https://stackoverflow.com/questions/31280529/building-up-an-intuition-for-using-inject-in-ruby", "title": "Building up an Intuition for Using Inject in Ruby", "body": "<p>I'm trying to understand how and when to recognize that inject/reduce is more useful in Ruby code. So, for example, I know I can take this:</p>\n\n<pre><code>def add(numbers)\n  sum = 0\n  numbers.each { |n| sum += n }\n  sum\nend\n</code></pre>\n\n<p>That can be \"reduced\" to:</p>\n\n<pre><code>numbers.inject(0) { |sum, n| sum += n }\n</code></pre>\n\n<p>What I don't see, however, is how that works when you have a slightly more complicated expression. Here's what I'm wrestling with:</p>\n\n<pre><code>def process_data(condition, data)\n  condition.each do |key, value|\n    data = method(\"query_#{key}\").call(data, value)\n  end\n  data\nend\n</code></pre>\n\n<p>One of the problems is that I'm variable shadowing with <code>data</code> but I still struggle to find a way to treat this as something I'm injecting.</p>\n\n<p>Is there a way people have found to turn this idiom into a heuristic that you can easily follow? It's these kinds of things that I feel I struggle with in Ruby, spending more time trying to be idiomatic Ruby.</p>\n\n<p>So I guess perhaps my better question is this: is the <code>process_data</code> method that I show one that <em>should</em> be refactored to use reduce/inject to be idiomatic Ruby?</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 6267, "user_id": 1144104, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c135bc644610fabc6e059b73fdd7f8ad?s=128&d=identicon&r=PG", "display_name": "jazzytomato", "link": "https://stackoverflow.com/users/1144104/jazzytomato"}, "is_accepted": true, "score": 2, "last_activity_date": 1436307954, "creation_date": 1436307954, "answer_id": 31280418, "question_id": 31280292, "link": "https://stackoverflow.com/questions/31280292/generating-a-word-list-with-ruby/31280418#31280418", "title": "Generating a word list with Ruby", "body": "<p>You were almost there </p>\n\n<pre><code>n = 3\n(('a'*n)..('z'*n)).each { |letter| puts letter }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6267, "user_id": 1144104, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c135bc644610fabc6e059b73fdd7f8ad?s=128&d=identicon&r=PG", "display_name": "jazzytomato", "link": "https://stackoverflow.com/users/1144104/jazzytomato"}, "edited": false, "score": 0, "creation_date": 1436343552, "post_id": 31281433, "comment_id": 50566220, "body": "nice one but the length of the words must be configurable. you could do <b>s = &#39;z&#39;*(n-1)</b> but doesn&#39;t work when <b>n</b> == 1"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1436313845, "creation_date": 1436313845, "answer_id": 31281433, "question_id": 31280292, "link": "https://stackoverflow.com/questions/31280292/generating-a-word-list-with-ruby/31281433#31281433", "title": "Generating a word list with Ruby", "body": "<pre><code>s = 'zz'\n(26**3).times.map { s=s.next }\n  #=&gt; [\"aaa\", \"aab\",..., \"zzy\", \"zzz\"]\n</code></pre>\n"}], "owner": {"reputation": 255, "user_id": 3610137, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/de66072482fa86fef2dabdb8eb8cb371?s=128&d=identicon&r=PG&f=1", "display_name": "user3610137", "link": "https://stackoverflow.com/users/3610137/user3610137"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "accepted_answer_id": 31280418, "answer_count": 2, "score": 2, "last_activity_date": 1436313845, "creation_date": 1436307373, "question_id": 31280292, "link": "https://stackoverflow.com/questions/31280292/generating-a-word-list-with-ruby", "title": "Generating a word list with Ruby", "body": "<p>I was wondering if there is way of creating an array that will create words with length n from a-z like:\nn=3</p>\n\n<pre><code>    aaa\n    aab\n    aac\n    ...\n    xyz\n</code></pre>\n\n<p>and so on. I know that </p>\n\n<pre><code>   puts ('aa'..'zz').each { |letter| p letter }\n</code></pre>\n\n<p>will give me what I need but how can I implement it to where I dont have to change </p>\n\n<pre><code>   ('aa'..'zz')\n</code></pre>\n\n<p>every time and I can just change n (n being the numbers of a's and z's)</p>\n"}, {"tags": ["java", "ruby-on-rails", "ruby", "tomcat", "chef-infra"], "comments": [{"owner": {"reputation": 6028, "user_id": 2092358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf6a4d4b42e1f27a974bd25ad1fd91b8?s=128&d=identicon&r=PG&f=1", "display_name": "Display Name is missing", "link": "https://stackoverflow.com/users/2092358/display-name-is-missing"}, "edited": false, "score": 1, "creation_date": 1436310983, "post_id": 31280270, "comment_id": 50555222, "body": "See: <a href=\"https://github.com/opscode-cookbooks/tomcat/issues/129\" rel=\"nofollow noreferrer\">github.com/opscode-cookbooks/tomcat/issues/129</a> It looks like you may need to use an additional wrapper recipe. Follow the links in the comments"}, {"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1436341314, "post_id": 31280270, "comment_id": 50564897, "body": "You can add an <a href=\"https://docs.chef.io/attributes.html#attribute-file-ordering\" rel=\"nofollow noreferrer\"><code>include_attribute</code></a> statement in your attribute file to force the reload of the tomcat attribute file with an overrided base_version (use force.default or override, staying at default would reset the base_version."}, {"owner": {"reputation": 10176, "user_id": 272839, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c41e721b2e1a3243004aab5fabf8032a?s=128&d=identicon&r=PG", "display_name": "Charles", "link": "https://stackoverflow.com/users/272839/charles"}, "edited": false, "score": 0, "creation_date": 1436345711, "post_id": 31280270, "comment_id": 50567606, "body": "I added <code>include_attribute &quot;tomcat&quot;</code> after <code>override</code> but raise still displays tomcat6."}, {"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "reply_to_user": {"reputation": 6028, "user_id": 2092358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf6a4d4b42e1f27a974bd25ad1fd91b8?s=128&d=identicon&r=PG&f=1", "display_name": "Display Name is missing", "link": "https://stackoverflow.com/users/2092358/display-name-is-missing"}, "edited": false, "score": 0, "creation_date": 1436346223, "post_id": 31280270, "comment_id": 50567967, "body": "No luck in this case, you&#39;ll have to get the tomcat attribute file and redefine each attribute as shown in the ticket @DisplayNameismissing has linked in above comment."}], "answers": [{"tags": [], "owner": {"reputation": 72198, "user_id": 256618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbfec69b120650860f555af29ee8a974?s=128&d=identicon&r=PG", "display_name": "Mark O&#39;Connor", "link": "https://stackoverflow.com/users/256618/mark-oconnor"}, "is_accepted": false, "score": 0, "last_activity_date": 1436396934, "last_edit_date": 1495542106, "creation_date": 1436396934, "answer_id": 31305395, "question_id": 31280270, "link": "https://stackoverflow.com/questions/31280270/tomcat-chef-recipe-is-not-using-the-right-version/31305395#31305395", "title": "Tomcat chef recipe is not using the right version", "body": "<p>Why don't you specify the override using a role? For example:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/31073884/how-to-customise-a-tomcat-recipe-in-chef/31083781#31083781\">How to customise a tomcat recipe in Chef</a></p>\n\n<p>It's also worth noting that the java cookbook <a href=\"https://github.com/opscode-cookbooks/tomcat/blob/master/attributes/default.rb#L51\" rel=\"nofollow noreferrer\">uses packages to install tomcat</a> but \"tomcat8\" is currently not available yet in the Ubuntu repositories...</p>\n\n<p>Hope this helps</p>\n"}], "owner": {"reputation": 10176, "user_id": 272839, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c41e721b2e1a3243004aab5fabf8032a?s=128&d=identicon&r=PG", "display_name": "Charles", "link": "https://stackoverflow.com/users/272839/charles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 356, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436396934, "creation_date": 1436307282, "question_id": 31280270, "link": "https://stackoverflow.com/questions/31280270/tomcat-chef-recipe-is-not-using-the-right-version", "title": "Tomcat chef recipe is not using the right version", "body": "<p>How can I correctly tell the tomcat chef recipes to use the version 8 of tomcat.</p>\n\n<p>I try these lines in a attributes/default.rb file of a recipe depending on tomcat:</p>\n\n<pre><code>override['tomcat']['base_version'] = 8\ndefault['tomcat']['base_version'] = 8\nraise node['tomcat']['base_instance']\n</code></pre>\n\n<p>It displays</p>\n\n<pre><code>RuntimeError\n------------\ntomcat6\n</code></pre>\n\n<p>How can I get tomcat recipe using installing tomcat8?</p>\n"}]