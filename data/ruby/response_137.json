[{"tags": ["ruby", "reactive"], "comments": [{"owner": {"reputation": 640, "user_id": 802415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EjXQW.jpg?s=128&g=1", "display_name": "Wedge Martin", "link": "https://stackoverflow.com/users/802415/wedge-martin"}, "edited": false, "score": 1, "creation_date": 1503531739, "post_id": 45850714, "comment_id": 78659839, "body": "Does it still hang if you take out the .join?"}, {"owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "reply_to_user": {"reputation": 640, "user_id": 802415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EjXQW.jpg?s=128&g=1", "display_name": "Wedge Martin", "link": "https://stackoverflow.com/users/802415/wedge-martin"}, "edited": false, "score": 0, "creation_date": 1503532050, "post_id": 45850714, "comment_id": 78659909, "body": "I will check when I get home ... about an hour"}, {"owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "reply_to_user": {"reputation": 640, "user_id": 802415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EjXQW.jpg?s=128&g=1", "display_name": "Wedge Martin", "link": "https://stackoverflow.com/users/802415/wedge-martin"}, "edited": false, "score": 0, "creation_date": 1503538810, "post_id": 45850714, "comment_id": 78661458, "body": "@WedgeMartin,  that was it.  Feel free to post as an answer (maybe a little explaination would help as well)"}, {"owner": {"reputation": 640, "user_id": 802415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EjXQW.jpg?s=128&g=1", "display_name": "Wedge Martin", "link": "https://stackoverflow.com/users/802415/wedge-martin"}, "edited": false, "score": 0, "creation_date": 1503597324, "post_id": 45850714, "comment_id": 78694929, "body": "Glad that helped! Posted as answer."}], "answers": [{"tags": [], "owner": {"reputation": 640, "user_id": 802415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EjXQW.jpg?s=128&g=1", "display_name": "Wedge Martin", "link": "https://stackoverflow.com/users/802415/wedge-martin"}, "is_accepted": true, "score": 0, "last_activity_date": 1503597310, "creation_date": 1503597310, "answer_id": 45868094, "question_id": 45850714, "link": "https://stackoverflow.com/questions/45850714/why-does-this-subscription-block-the-main-thread/45868094#45868094", "title": "Why does this subscription block the main thread?", "body": "<p>The recvfrom is a blocking operation, and even though it's inside of a new Thread, when the 'join' takes place, it means the main thread is going to wait for the newly created thread.  If you remove the 'join' it should allow the threads to remain independent and the looping thread will not block the main thread.</p>\n"}], "owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 45868094, "answer_count": 1, "score": 0, "last_activity_date": 1503597310, "creation_date": 1503530923, "last_edit_date": 1503531671, "question_id": 45850714, "link": "https://stackoverflow.com/questions/45850714/why-does-this-subscription-block-the-main-thread", "title": "Why does this subscription block the main thread?", "body": "<p>I am trying to play with RxRuby, and would like to turn data received from a tcp socket into a stream that can be consumed.  The following code \"works\" in that the data received from the socket is streamed, ie when new data arrives I get my \"data = \" messages,  but the subscription blocks.  If I add any code after the <code>subscription =</code> statement, it does not execute until I close the socket.  I would have expected to need a loop to keep the program from immediately completing.</p>\n\n<pre><code>require 'rx'\nrequire 'socket'\nThread.abort_on_exception=true\n\nclass StellariumInterface\n  attr_accessor :server, :client, :goto_stream\n\n  def initialize(host:, port:)\n    @host = host\n    @port = port\n    @server = TCPServer.new host, port\n    @goto_stream = nil\n    @client = nil\n  end\n\n\n  def accept\n    puts \"connecting\"\n    self.client = server.accept\n    puts \"connected\"\n  end\n\n  def listen\n    self.goto_stream = Rx::Observable.create do |observer|\n      l = Thread.new do\n        loop  do\n          raw_data = client.recvfrom(1000)\n          break if raw_data.first.empty?\n          data = raw_data.first.unpack('ssqLl')\n          p data\n          observer.on_next(data)\n          sleep 0.1\n        end\n        observer.on_completed\n      end\n    l.join\n    end\n  end\n\n\n\nend\n\nsource = StellariumInterface.new host: 'localhost', port: 10001\nsource.accept\nsource.listen\nsubscription = source.goto_stream.subscribe(\n  lambda { |x|  puts \"data = #{x}\" },\n  lambda { |x|  puts \"error \"},\n  lambda { puts \"stream done \"}\n)\n</code></pre>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "excel", "csv"], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 6941185, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10205239279341791/picture?type=large", "display_name": "amreos", "link": "https://stackoverflow.com/users/6941185/amreos"}, "is_accepted": true, "score": 0, "last_activity_date": 1503539419, "creation_date": 1503539419, "answer_id": 45851731, "question_id": 45850665, "link": "https://stackoverflow.com/questions/45850665/ruby-create-tempfile-to-save-csv-row-and-assign-it-to-database/45851731#45851731", "title": "Ruby create Tempfile to save CSV row and assign it to database", "body": "<p>I was able to figure something out</p>\n\n<p>it is not perfect yet but it imported some important data</p>\n\n<p>Here is the modified Result Model code</p>\n\n<pre><code>require 'csv'     \nclass Result &lt; ActiveRecord::Base     \nbelongs_to :machine     \ndef self.assign_row(row)    \n    line, b, time, real, min, mean, max = row    \n    if row[3] =~ /SUMMARY/      \n   @midr = row[2].slice(1,3)      \n   @mach = Machine.where(:mid =&gt; @midr).first      \n   @result = Result.create(midr: time, machine_id: @mach.id  )     \n  else      \n   line, b, time, real, min, mean, max = row      \n   @result.update( exps: real, max: max, ideal: mean, time: time  )     \n      end      \n  end     \n def self.import(file)     \n CSV.foreach(file.path, encoding: 'iso-8859-1:utf-8', skip_blanks: true) do |row|       \nnext if row.all?(&amp;:nil?)      \nresult = Result.assign_row(row)     \n       end     \n  end     \nend     \n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 6941185, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10205239279341791/picture?type=large", "display_name": "amreos", "link": "https://stackoverflow.com/users/6941185/amreos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 639, "favorite_count": 0, "accepted_answer_id": 45851731, "answer_count": 1, "score": 0, "last_activity_date": 1503539419, "creation_date": 1503530411, "last_edit_date": 1503531956, "question_id": 45850665, "link": "https://stackoverflow.com/questions/45850665/ruby-create-tempfile-to-save-csv-row-and-assign-it-to-database", "title": "Ruby create Tempfile to save CSV row and assign it to database", "body": "<p>I have very complex problem here.</p>\n\n<p>I'm exporting two spreadsheets using CSV library and there are one to many association between the two sheets</p>\n\n<p>The problem is i need to save the foreign key for Result record based on a value in a specific row and then save the rest of the data from the next row\nso here an example     </p>\n\n<pre><code> 1023115111      | SUMMARY   |  1.5 | 2 | 2.5\n\n 8/16/2017 23:00 |     1.3   |  1.5 | 2 | 2.5\n\n 1023201         | SUMMARY   |  1.9 | 2 | 2.1\n\n 8/16/2017 7:10  |    1.76   |  1.9 | 2 | 2.1\n\n 8/16/2017 15:00 |    1.76   |  1.9 | 2 | 2.1\n</code></pre>\n\n<p>Here are the problem</p>\n\n<p>i need to take the first cell where the summary row exists and compare it find the machine which it is \"mid\" equal to this value</p>\n\n<p>then skip the whole row and save the \"Result\" to new record where the machine_id equal to this value</p>\n\n<p>i will try to make it more clear</p>\n\n<pre><code>@mid = row(0)     \n\n@machine = Machine.where(mid: @mid)     \n</code></pre>\n\n<p>then        </p>\n\n<pre><code>Result.create(line: line, min: min, exps: real, max: max, \n ideal: mean, time: time, machine_id: @machine.id  )       \n</code></pre>\n\n<p>This is my Result Model</p>\n\n<pre><code>require 'csv'    \nrequire 'tempfile'    \nrequire 'fileutils'    \nclass Result &lt; ActiveRecord::Base\nbelongs_to :machine\ndef self.assign_row(row)     \n   line, b, time, real, min, mean, max = row\n   Result.create(line: line, min: min, exps: real, max: max, ideal: mean, time: time  )    \n      end    \n\ndef self.import(file)    \n   CSV.foreach(file.path, encoding: 'iso-8859-1:utf-8', skip_blanks: true) do |row|    \n  next if row[3] =~ /SUMMARY/       \n  next if row.all?(&amp;:nil?)       \n  result = Result.assign_row(row)       \n    end     \n   end     \n  end     \n</code></pre>\n\n<p>this is my Machine Model</p>\n\n<pre><code>require 'csv'    \nclass Machine &lt; ActiveRecord::Base    \nvalidates_uniqueness_of  :name    \nhas_many :results    \ndef self.assign_row(row)\n a, b, c = row\n if row[2].nil?\n  puts 'na'\n else\n\n @mid = c[0..2]\n @name = c[5..-1]\nend\nmachine = Machine.find_by(name: c)\nMachine.create(name: @name, mid: @mid) if machine.blank?\nend\n\ndef self.import(file)    \n     CSV.foreach(file.path, encoding: 'iso-8859-1:utf-8', skip_blanks: true) do |row|    \n machine = Machine.assign_row(row)    \n   end    \n end    \nend    \n</code></pre>\n\n<p>Result Migration</p>\n\n<pre><code>class CreateResults &lt; ActiveRecord::Migration     \ndef change      \ncreate_table :results do |t|      \n  t.string :min      \n  t.string :max      \n  t.string :time     \n  t.string :exps     \n  t.references :machine, index: true, foreign_key: true     \n  t.string :line     \n  t.string :ideal     \n\n  t.timestamps null: false     \n     end     \n   end     \n end      \n</code></pre>\n\n<p>Machine Migration</p>\n\n<pre><code> class CreateMachines &lt; ActiveRecord::Migration     \n def change     \n create_table :machines do |t|     \n  t.string :name     \n  t.string :mid     \n\n  t.timestamps null: false     \nend     \nadd_index :machines, :mid     \nend     \nend          \n</code></pre>\n\n<p>Machine controller import</p>\n\n<pre><code> def import     \n count = Machine.import(params[:file])     \n redirect_to machines_path, notice: \"file imported successfully!\"     \n end      \n</code></pre>\n\n<p>Result controller import</p>\n\n<pre><code> def import      \n count = Result.import params[:file]     \n redirect_to results_path, notice: \"file imported successfully!\"     \n end     \n</code></pre>\n\n<p>I thought perhaps i could save the CSV to Tempfile then assign the value to the database but the skip condition will override it?</p>\n\n<p>another solution came into my mind is <code>has_many_through</code> but i don`t really know it will work or not.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3"], "answers": [{"tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": false, "score": 1, "last_activity_date": 1503532888, "creation_date": 1503532888, "answer_id": 45850956, "question_id": 45850507, "link": "https://stackoverflow.com/questions/45850507/ruby-convert-timestamp-to-date-time-in-given-json-input/45850956#45850956", "title": "Ruby : Convert timestamp to date time in given json input", "body": "<p>You can do something like:</p>\n\n<pre><code>json[:characterList].map! do |character|\n  character.tap do |char|\n    if editInfo = char[:editInfo]\n      if editInfo[:createdDate]\n        editInfo[:createdDate] =\n          DateTime.strptime(editInfo[:createdDate].to_s, '%Q')\n      end\n\n      if editInfo[:modifiedDate]\n        editInfo[:modifiedDate] =_\n          DateTime.strptime(editInfo[:modifiedDate].to_s, '%Q')\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>the main issues with your code were</p>\n\n<ol>\n<li>No <code>:getEditInfo</code> or <code>:getCreatedDate</code>, though, those may just be methods you made but didn't include here.</li>\n<li><code>strptime</code> takes a string, the <code>*Date</code> fields are integers</li>\n<li>The <code>%s</code> argument to <code>strptime</code> is the number of <em>seconds</em> since <code>1970-01-01 00:00:00 UTC</code>, I'm going to assume you aren't dealing with dates in the year 49,602, so changed it to <code>%Q</code>, which is the number of <em>milliseconds</em> since <code>1970-01-01 00:00:00 UTC</code>.</li>\n</ol>\n\n<p>This is just a sample, modifying the JSON hash itself with <code>DateTime</code> objects, you may need to be doing something different with it, the big thing here is the <code>%Q</code> and <code>to_s</code> in <code>strptime</code>s</p>\n\n<pre><code>DateTime.strptime(1503137795000.to_s, '%Q') # =&gt; 2017-08-19T10:16:35+00:00\n</code></pre>\n\n<p>Without knowing what's actually wrong with your code (\"didn't work\" isn't very descriptive), if everything else on that line you tried work you could just change to:</p>\n\n<pre><code>characterList.each { |char| DateTime.strptime(char.try(:getEditInfo).try(:getCreatedDate).to_s,'%Q') }\n</code></pre>\n\n<p>for a one-liner</p>\n"}], "owner": {"reputation": 279, "user_id": 1310618, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6c3b061959da80f4656935e95dd99c12?s=128&d=identicon&r=PG", "display_name": "TestingInProd", "link": "https://stackoverflow.com/users/1310618/testinginprod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 481, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503532888, "creation_date": 1503528987, "question_id": 45850507, "link": "https://stackoverflow.com/questions/45850507/ruby-convert-timestamp-to-date-time-in-given-json-input", "title": "Ruby : Convert timestamp to date time in given json input", "body": "<p>I have a JSON input. I would like to convert all timestamp (createdDate ,modifiedDate) to time in ruby. How do I do that? I tried below methods but dint work </p>\n\n<pre><code>characterList.each { |char| DateTime.strptime(char.try(:getEditInfo).try(:getCreatedDate),%s) }\n\n\n{\"characterList\": \n  [\n    {\"editInfo\": \n      {\"createdBy\": \"testname\", \n       \"createdDate\": 1503137795000, \n       \"modifiedBy\": \"testname\", \n       \"modifiedDate\": 1503137795000}, \n     \"charInfo\": \n      {\"charid\": \"3434\", \n       \"charDesc\": \"3434\", \n       \"status\": \"ON\"}\n    }, \n    {\"editInfo\": \n      {\"createdBy\": \"testname\", \n       \"createdDate\": 1503137795000, \n       \"modifiedBy\": \"testname\", \n       \"modifiedDate\": 1503137795000}, \n     \"charInfo\": \n      {\"charid\": \"3434   6\", \n       \"charDesc\": \"43dfdf\", \n       \"status\": \"ON\"}\n    }, \n    {\"editInfo\": \n      {\"createdBy\": \"testname\", \n       \"createdDate\": 1503137795000, \n       \"modifiedBy\": \"testname\", \n       \"modifiedDate\": 1503137795000}, \n     \"charInfo\": \n      {\"charid\": \"4hr_SLA\", \n       \"charDesc\": \"sd\", \n       \"status\": \"ON\"}\n    }, \n    {\"editInfo\": \n      {\"createdBy\": \"testname\", \n       \"createdDate\": 1503137795000, \n       \"modifiedBy\": \"testname\", \n       \"modifiedDate\": 1503137795000}, \n     \"charInfo\": \n      {\"charid\": \"aaaaaaaaaa\", \n       \"charDesc\": \"asdfaadsf   asdfasdf asdf\", \n       \"status\": \"ON\"}\n    }, \n    {\"editInfo\": \n      {\"createdBy\": \"testname\", \n       \"createdDate\": 1503137795000, \n       \"modifiedBy\": \"testname\", \n       \"modifiedDate\": 1503137795000}, \n     \"charInfo\": \n      {\"charid\": \"abababab\", \n       \"charDesc\": \"abababababab\", \n       \"status\": \"ON\"}\n    }\n  ]} \n</code></pre>\n\n<p>I am ok converting in 2 like separately for createdDate and modifiedDate. But Im looking for one line solution </p>\n"}, {"tags": ["html", "sql", "ruby", "image"], "comments": [{"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1503529748, "post_id": 45850472, "comment_id": 78659404, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/14434082/how-to-seed-a-photo-in-rails\">How to seed a photo in rails</a>"}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1503529758, "post_id": 45850472, "comment_id": 78659406, "body": "<a href=\"https://stackoverflow.com/questions/32522992/how-to-seed-the-path-to-an-image\" title=\"how to seed the path to an image\">stackoverflow.com/questions/32522992/&hellip;</a>"}], "owner": {"reputation": 11, "user_id": 8249388, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155647014032518/picture?type=large", "display_name": "Heather", "link": "https://stackoverflow.com/users/8249388/heather"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1503528734, "creation_date": 1503528734, "question_id": 45850472, "link": "https://stackoverflow.com/questions/45850472/is-it-possible-to-include-an-image-as-part-of-your-db-seeds-file-in-ruby", "title": "Is it possible to include an image as part of your db.seeds file in Ruby?", "body": "<p>I am trying to include a url in my seeds file that is then pulled into another file depending on the id passed in so that a different image is displayed for each id.</p>\n\n<p>In my seeds file I have\n<code>thing1 = Thing.new({\"name\"=&gt;\"Thing\", \"logo\"=&gt;\"/thing.png\"})</code></p>\n\n<p>And then I am trying to pass it into my show.erb file\n<code>&lt;h1&gt;&lt;img src=\"&lt;% @thing.find_thing.logo %&gt;\" &gt;&lt;/h1&gt;</code></p>\n\n<p>It doesn't throw an error, but no image is displayed.  If I replace\n<code>&lt;% @thing.find_thing.logo %&gt;</code> \nwith the image filename, on the show.erb file then the image appears but this doesn't allow it to be varied depending on the ID being called in the page.</p>\n\n<p>Hope that all make sense.</p>\n\n<p>TIA</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1503527537, "post_id": 45850112, "comment_id": 78658724, "body": "Use <code>rake routes</code> to see the routes for the application. If you model is user it should be <code>user_registration_path</code>."}, {"owner": {"reputation": 6065, "user_id": 775381, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/6d5d9c293325a473955a49a81b814a54?s=128&d=identicon&r=PG", "display_name": "DRing", "link": "https://stackoverflow.com/users/775381/dring"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1503527695, "post_id": 45850112, "comment_id": 78658777, "body": "when I run rake routes its not there for some reason...edited post to show all the devise routes"}, {"owner": {"reputation": 847, "user_id": 1963964, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/MLMKT.jpg?s=128&g=1", "display_name": "Roshan", "link": "https://stackoverflow.com/users/1963964/roshan"}, "edited": false, "score": 0, "creation_date": 1503527874, "post_id": 45850112, "comment_id": 78658821, "body": "do you have <code>devise</code> installed ?"}, {"owner": {"reputation": 6065, "user_id": 775381, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/6d5d9c293325a473955a49a81b814a54?s=128&d=identicon&r=PG", "display_name": "DRing", "link": "https://stackoverflow.com/users/775381/dring"}, "edited": false, "score": 0, "creation_date": 1503527932, "post_id": 45850112, "comment_id": 78658837, "body": "yes, it has all the other devise routes and i reran the install just to make sure"}, {"owner": {"reputation": 847, "user_id": 1963964, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/MLMKT.jpg?s=128&g=1", "display_name": "Roshan", "link": "https://stackoverflow.com/users/1963964/roshan"}, "edited": false, "score": 0, "creation_date": 1503527974, "post_id": 45850112, "comment_id": 78658849, "body": "@DRing try restarting the server."}, {"owner": {"reputation": 6065, "user_id": 775381, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/6d5d9c293325a473955a49a81b814a54?s=128&d=identicon&r=PG", "display_name": "DRing", "link": "https://stackoverflow.com/users/775381/dring"}, "edited": false, "score": 0, "creation_date": 1503527985, "post_id": 45850112, "comment_id": 78658853, "body": "already did that"}, {"owner": {"reputation": 1140, "user_id": 3248148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CLgGs.jpg?s=128&g=1", "display_name": "praaveen V R", "link": "https://stackoverflow.com/users/3248148/praaveen-v-r"}, "edited": false, "score": 0, "creation_date": 1503556459, "post_id": 45850112, "comment_id": 78666744, "body": "@DRing Restarting the server helped you??"}, {"owner": {"reputation": 6065, "user_id": 775381, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/6d5d9c293325a473955a49a81b814a54?s=128&d=identicon&r=PG", "display_name": "DRing", "link": "https://stackoverflow.com/users/775381/dring"}, "edited": false, "score": 0, "creation_date": 1503581770, "post_id": 45850112, "comment_id": 78684453, "body": "No, still have the issue"}, {"owner": {"reputation": 6065, "user_id": 775381, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/6d5d9c293325a473955a49a81b814a54?s=128&d=identicon&r=PG", "display_name": "DRing", "link": "https://stackoverflow.com/users/775381/dring"}, "edited": false, "score": 0, "creation_date": 1503615406, "post_id": 45850112, "comment_id": 78703013, "body": "Updated with more info...apparently its not using the devise routes for registration for some reason...its like just that part of the gem got destroyed or busted, but no matter what i do to try and reinstall it doesnt seem to work"}], "answers": [{"tags": [], "owner": {"reputation": 6065, "user_id": 775381, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/6d5d9c293325a473955a49a81b814a54?s=128&d=identicon&r=PG", "display_name": "DRing", "link": "https://stackoverflow.com/users/775381/dring"}, "is_accepted": true, "score": 3, "last_activity_date": 1503617671, "creation_date": 1503617671, "answer_id": 45872384, "question_id": 45850112, "link": "https://stackoverflow.com/questions/45850112/devise-undefined-method-registration-path/45872384#45872384", "title": "Devise undefined method &#39;registration_path&#39;", "body": "<p>So after many hours of digging thru my code, comparing to my old code and googling every combination of devise and registration I could think.  I stumbled upon the problem and it was stupid...Somewhere in editing my User.rb model I accidently deleted :registable from the devise modules.  That is why it wasnt generating the registration routes.  So fixed my line of code from this:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable,  :confirmable, \n       :recoverable, :rememberable, :trackable, :validatable,\n       :omniauthable, omniauth_providers: [:google_oauth2, :facebook]\n</code></pre>\n\n<p>to This:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable, :confirmable, \n       :recoverable, :rememberable, :trackable, :validatable,\n       :omniauthable, omniauth_providers: [:google_oauth2, :facebook]\n</code></pre>\n\n<p>Not sure where or how that got deleted but it did and cause it was in the middle of the block didnt notice as I was looking over my code</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 5051678, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OR2EVTOswBg/AAAAAAAAAAI/AAAAAAAAAFM/5EloN9pEp4I/photo.jpg?sz=128", "display_name": "Piyush Chaudhary", "link": "https://stackoverflow.com/users/5051678/piyush-chaudhary"}, "is_accepted": false, "score": 1, "last_activity_date": 1588980485, "creation_date": 1588980485, "answer_id": 61689736, "question_id": 45850112, "link": "https://stackoverflow.com/questions/45850112/devise-undefined-method-registration-path/61689736#61689736", "title": "Devise undefined method &#39;registration_path&#39;", "body": "<p>I have spent almost the day on digging into this and found a silly mistake. While doing some other stuff in my devise model, i.e- Artist, I have mistakenly deleted the <strong>registerable</strong> from the code.</p>\n\n<p>Changed the code from  </p>\n\n<pre><code>devise :database_authenticatable,\n         :recoverable, :rememberable, :validatable\n</code></pre>\n\n<p>to </p>\n\n<pre><code>devise :database_authenticatable, :registerable,\n     :recoverable, :rememberable, :validatable\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 11507522, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9u7uuRV3qrk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rduH_5BEuEypUZHbcKLIXeI6h0n8w/mo/photo.jpg?sz=128", "display_name": "Chrisphine", "link": "https://stackoverflow.com/users/11507522/chrisphine"}, "is_accepted": false, "score": 1, "last_activity_date": 1590464512, "creation_date": 1590464512, "answer_id": 62014289, "question_id": 45850112, "link": "https://stackoverflow.com/questions/45850112/devise-undefined-method-registration-path/62014289#62014289", "title": "Devise undefined method &#39;registration_path&#39;", "body": "<p>Delete the directory /devise. Then rerun rails generate devise:view\nthis worked for me.</p>\n"}], "owner": {"reputation": 6065, "user_id": 775381, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/6d5d9c293325a473955a49a81b814a54?s=128&d=identicon&r=PG", "display_name": "DRing", "link": "https://stackoverflow.com/users/775381/dring"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1314, "favorite_count": 0, "accepted_answer_id": 45872384, "answer_count": 3, "score": 2, "last_activity_date": 1590464512, "creation_date": 1503526577, "last_edit_date": 1503615339, "question_id": 45850112, "link": "https://stackoverflow.com/questions/45850112/devise-undefined-method-registration-path", "title": "Devise undefined method &#39;registration_path&#39;", "body": "<p>Was working on my app and install and uninstall a couple gems and then suddenly the devise stuff stopped working and I can't figure out why.  I keep getting the following error:</p>\n\n<pre><code>NoMethodError in Recipes#index\nundefined method `registration_path' for #&lt;#&lt;Class:0x00560876ed7ef0&gt;:0x00560876f06430&gt;\n</code></pre>\n\n<p>Its referring to my sign-up for and this block of code</p>\n\n<pre><code>&lt;%= simple_form_for(resource, :as =&gt; resource_name, :url =&gt; registration_path(resource_name), validate: true) do |f| %&gt;\n                &lt;%= devise_error_messages! %&gt;\n                &lt;%= f.input :email, validate: true, required: true, placeholder: \"Email\", label: false %&gt;\n                &lt;% if @minimum_password_length %&gt;\n                  &lt;em&gt;(&lt;%= @minimum_password_length %&gt; characters minimum)&lt;/em&gt;\n                &lt;% end %&gt;\n                &lt;%= f.input :password, autocomplete: \"off\", required: true, placeholder: \"Password\", label: false %&gt;\n                &lt;%= f.input :password_confirmation, autocomplete: \"off\", required: true, placeholder: \"Confirm Password\", label: false %&gt;\n                &lt;%= f.input :firstname, required: true, placeholder: \"First Name\", label: false %&gt;\n                &lt;%= f.input :lastname, required: true, placeholder: \"Last Name\", label: false %&gt;\n                &lt;%= f.input :displayname, validate: true, placeholder: \"Display Name\", label: false %&gt;\n                &lt;div class=\"recaptcha\"&gt;\n                  &lt;%= recaptcha_tags %&gt;\n                &lt;/div&gt;\n                &lt;%= f.button :submit, \"Sign up\", class: 'btn btn-primary' %&gt;\n              &lt;% end %&gt;\n</code></pre>\n\n<p>In my routes.rb i have this:</p>\n\n<pre><code>Rails.application.routes.draw do\n  devise_for :users, controllers: { registrations: 'registrations', omniauth_callbacks: \"callbacks\" }\n</code></pre>\n\n<p>And this is the registrations controller:</p>\n\n<pre><code>class RegistrationsController &lt; Devise::RegistrationsController\n\n    def sign_up_params\n        params.require(:user).permit(:firstname, :lastname, :displayname, \n                                     :email, :password, :password_confirmation)\n    end\n\n    def account_update_params\n        params.require(:user).permit(:firstname, :lastname, :displayname,\n                                     :email, :password, :password_confirmation)\n    end\n\n    def create\n        if !verify_recaptcha\n            flash.delete :recaptcha_error\n            build_resource(sign_up_params)\n            resource.valid?\n            resource.errors.add(:base, \"There was an error with the recaptcha code below. Please re-enter the code.\")\n            clean_up_passwords(resource)\n            respond_with_navigational(resource) {render :new}\n        else\n            flash.delete :recaptcha_error\n            super\n        end\n    end\n\n    def after_inactive_sign_up_path_for(resource)\n        '/pages/confirm_email'\n    end\nend\n</code></pre>\n\n<p>I have the devise stuff in the user model and controller that is standard and nothing changed with them but it stopped working.  Not sure how to fix this</p>\n\n<p>Edit:  The rake route shows the registration path isnt in there for some reason:</p>\n\n<pre><code>                               Prefix Verb     URI Pattern                                                             Controller#Action\n                          rails_admin          /admin                                                                  RailsAdmin::Engine\n                     new_user_session GET      /users/sign_in(.:format)                                                devise/sessions#new\n                         user_session POST     /users/sign_in(.:format)                                                devise/sessions#create\n                 destroy_user_session DELETE   /users/sign_out(.:format)                                               devise/sessions#destroy\nuser_google_oauth2_omniauth_authorize GET|POST /users/auth/google_oauth2(.:format)                                     callbacks#passthru\n user_google_oauth2_omniauth_callback GET|POST /users/auth/google_oauth2/callback(.:format)                            callbacks#google_oauth2\n     user_facebook_omniauth_authorize GET|POST /users/auth/facebook(.:format)                                          callbacks#passthru\n      user_facebook_omniauth_callback GET|POST /users/auth/facebook/callback(.:format)                                 callbacks#facebook\n                    new_user_password GET      /users/password/new(.:format)                                           devise/passwords#new\n                   edit_user_password GET      /users/password/edit(.:format)                                          devise/passwords#edit\n                        user_password PATCH    /users/password(.:format)                                               devise/passwords#update\n                                      PUT      /users/password(.:format)                                               devise/passwords#update\n                                      POST     /users/password(.:format)                                               devise/passwords#create\n                new_user_confirmation GET      /users/confirmation/new(.:format)                                       devise/confirmations#new\n                    user_confirmation GET      /users/confirmation(.:format)                                           devise/confirmations#show\n                                      POST     /users/confirmation(.:format)                                           devise/confirmations#create\n</code></pre>\n\n<p>Ok so this error is baffling me.  I am using docker-compose for my development and ive rebuilt the containers and images.  Deleted everything and started over.  Something in signup settings of devise got messed up and not sure where to look to see if it is correct.  So when I go to: <code>localhost:8000/users/sign_in</code> Everything works fine and it goes to the devise sign-in page...but when I go to <code>localhost:8000/users/sign_up</code> It says <code>Couldn't find User with 'id'=sign_up</code>.  Its like the devise_for :users is being ignored for the sign-up stuff and not sure where to look for that cause thats all internal to the gem...I think </p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 633, "user_id": 7066742, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8a9aae0f3b1db3db4512a298fe41b8eb?s=128&d=identicon&r=PG&f=1", "display_name": "Milos", "link": "https://stackoverflow.com/users/7066742/milos"}, "edited": false, "score": 0, "creation_date": 1503526459, "post_id": 45850043, "comment_id": 78658368, "body": "wow what a rookie mistake, good catch! I noticed though that I had to move that code to application.scss for it work. I&#39;d like for it to remain in mediumr.scss . Do i have to import mediumr into application.scss? I thought the pipeline would do that automatically."}, {"owner": {"reputation": 4320, "user_id": 3922099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZHBBc.jpg?s=128&g=1", "display_name": "Dan Kreiger", "link": "https://stackoverflow.com/users/3922099/dan-kreiger"}, "reply_to_user": {"reputation": 633, "user_id": 7066742, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8a9aae0f3b1db3db4512a298fe41b8eb?s=128&d=identicon&r=PG&f=1", "display_name": "Milos", "link": "https://stackoverflow.com/users/7066742/milos"}, "edited": false, "score": 0, "creation_date": 1503526557, "post_id": 45850043, "comment_id": 78658398, "body": "No problem :) Yes you do have to import <code>mediumr.scss</code> inside of <code>application.scss</code> in order to use that stylesheet. I&#39;ll update my answer with that syntax in case you need it."}, {"owner": {"reputation": 633, "user_id": 7066742, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8a9aae0f3b1db3db4512a298fe41b8eb?s=128&d=identicon&r=PG&f=1", "display_name": "Milos", "link": "https://stackoverflow.com/users/7066742/milos"}, "edited": false, "score": 1, "creation_date": 1503526665, "post_id": 45850043, "comment_id": 78658426, "body": "I got it by doing @import &quot;mediumr&quot;. Thanks though! I&#39;ll accept your answer in 5 minutes when it lets me."}, {"owner": {"reputation": 4320, "user_id": 3922099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZHBBc.jpg?s=128&g=1", "display_name": "Dan Kreiger", "link": "https://stackoverflow.com/users/3922099/dan-kreiger"}, "reply_to_user": {"reputation": 633, "user_id": 7066742, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8a9aae0f3b1db3db4512a298fe41b8eb?s=128&d=identicon&r=PG&f=1", "display_name": "Milos", "link": "https://stackoverflow.com/users/7066742/milos"}, "edited": false, "score": 0, "creation_date": 1503526863, "post_id": 45850043, "comment_id": 78658503, "body": "That&#39;s it - I didn&#39;t need to update my answer I guess :)"}], "tags": [], "owner": {"reputation": 4320, "user_id": 3922099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZHBBc.jpg?s=128&g=1", "display_name": "Dan Kreiger", "link": "https://stackoverflow.com/users/3922099/dan-kreiger"}, "is_accepted": true, "score": 1, "last_activity_date": 1503526761, "last_edit_date": 1503526761, "creation_date": 1503526245, "answer_id": 45850043, "question_id": 45850022, "link": "https://stackoverflow.com/questions/45850022/my-scss-styles-arent-showing-on-my-components/45850043#45850043", "title": "My Scss styles aren&#39;t showing on my components", "body": "<p>Inside of your <code>mediumr.scss</code> make sure that your <code>.testHeading</code> selector has a <code>.</code> before <code>testHeading</code>.</p>\n\n<hr>\n\n<p>Right now you have:</p>\n\n<pre><code>testHeading {\n  color: red;\n}\n</code></pre>\n\n<p>Change this to:</p>\n\n<pre><code>.testHeading {\n  color: red;\n}\n</code></pre>\n\n<p>Also, inside of <code>application.scss</code> make sure to import your <code>mediumr.scss</code> stylesheet like so:</p>\n\n<pre><code>// application.scss\n\n@import \"mediumr\";\n</code></pre>\n"}], "owner": {"reputation": 633, "user_id": 7066742, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8a9aae0f3b1db3db4512a298fe41b8eb?s=128&d=identicon&r=PG&f=1", "display_name": "Milos", "link": "https://stackoverflow.com/users/7066742/milos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20, "favorite_count": 0, "accepted_answer_id": 45850043, "answer_count": 1, "score": 0, "last_activity_date": 1503526761, "creation_date": 1503526134, "question_id": 45850022, "link": "https://stackoverflow.com/questions/45850022/my-scss-styles-arent-showing-on-my-components", "title": "My Scss styles aren&#39;t showing on my components", "body": "<p>I don't get any errors, but I can't get the styles to change when they should be changing. I'm brand new to Ruby on Rails so I'm trying to learn on the fly here. Here's what I have.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>mediumr_controller.rb:\r\n\r\nclass MediumrController &lt; ApplicationController\r\n  def index\r\n  end\r\nend\r\n\r\napplication.html.rb :\r\n\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n  &lt;head&gt;\r\n    &lt;title&gt;Mediumrails&lt;/title&gt;\r\n    &lt;%= csrf_meta_tags %&gt;\r\n\r\n    &lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %&gt;\r\n    &lt;%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %&gt;\r\n  &lt;/head&gt;\r\n\r\n  &lt;body&gt;\r\n    &lt;%= yield %&gt;\r\n  &lt;/body&gt;\r\n&lt;/html&gt;</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>application.scss:\r\n\r\n@import \"bootstrap\";\r\n\r\nmediumr.scss:\r\n\r\ntestHeading {\r\n    color: red;\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>views/layouts/application.html.erb :\r\n\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n  &lt;head&gt;\r\n    &lt;title&gt;Mediumrails&lt;/title&gt;\r\n    &lt;%= csrf_meta_tags %&gt;\r\n\r\n    &lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %&gt;\r\n    &lt;%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %&gt;\r\n  &lt;/head&gt;\r\n\r\n  &lt;body&gt;\r\n    &lt;%= yield %&gt;\r\n  &lt;/body&gt;\r\n&lt;/html&gt;\r\n\r\nviews/layouts/mediumr/index.html.erb\r\n\r\n&lt;%= react_component 'Main' %&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>the component main.jsx shows up when I run the ruby server and it shows the text I'm trying to display (and has the className = \"testHeading\"), but the color of the text doesn't change. Does anyone have any idea what could be the issue?</p>\n\n<p>I'm using rails version 5.1.3</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 285, "user_id": 486786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77aa652a2050203a41e28bee7fe34e48?s=128&d=identicon&r=PG", "display_name": "Justin", "link": "https://stackoverflow.com/users/486786/justin"}, "edited": false, "score": 0, "creation_date": 1503604565, "post_id": 45850118, "comment_id": 78698646, "body": "Thanks, <code>application_controller</code> is correct. Your final two sentences might confuse people, though, as the Blazer wiki has different instructions if authenticating via Devise, see: <a href=\"https://github.com/ankane/blazer#devise\" rel=\"nofollow noreferrer\">github.com/ankane/blazer#devise</a> . If you remove or modify your Devise your comment, I&#39;ll accept the asnwer. Thanks"}, {"owner": {"reputation": 8300, "user_id": 530808, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/638d6ecef1e7d1e1154435d110c44bd0?s=128&d=identicon&r=PG", "display_name": "Chris McKnight", "link": "https://stackoverflow.com/users/530808/chris-mcknight"}, "reply_to_user": {"reputation": 285, "user_id": 486786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77aa652a2050203a41e28bee7fe34e48?s=128&d=identicon&r=PG", "display_name": "Justin", "link": "https://stackoverflow.com/users/486786/justin"}, "edited": false, "score": 0, "creation_date": 1503616471, "post_id": 45850118, "comment_id": 78703273, "body": "I updated my answer to include the route protection from the readme."}], "tags": [], "owner": {"reputation": 8300, "user_id": 530808, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/638d6ecef1e7d1e1154435d110c44bd0?s=128&d=identicon&r=PG", "display_name": "Chris McKnight", "link": "https://stackoverflow.com/users/530808/chris-mcknight"}, "is_accepted": true, "score": 2, "last_activity_date": 1503616436, "last_edit_date": 1503616436, "creation_date": 1503526667, "answer_id": 45850118, "question_id": 45849750, "link": "https://stackoverflow.com/questions/45849750/custom-authentication-for-blazer-rails/45850118#45850118", "title": "Custom authentication for Blazer (Rails)", "body": "<p>You should add your custom method into <code>application_controller.rb</code>. You then put the name of the method into <code>config/blazer.yml</code> to wire it up.</p>\n\n<p>I would recommend using <code>Devise</code> for authentication. The Devise wiki has a great starting article <a href=\"https://github.com/plataformatec/devise#controller-filters-and-helpers\" rel=\"nofollow noreferrer\">here</a>. The engine and routes of blazer must also be protected as demonstrated <a href=\"https://github.com/ankane/blazer#devise\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 285, "user_id": 486786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77aa652a2050203a41e28bee7fe34e48?s=128&d=identicon&r=PG", "display_name": "Justin", "link": "https://stackoverflow.com/users/486786/justin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 393, "favorite_count": 0, "accepted_answer_id": 45850118, "answer_count": 1, "score": 0, "last_activity_date": 1503616436, "creation_date": 1503524580, "last_edit_date": 1503526235, "question_id": 45849750, "link": "https://stackoverflow.com/questions/45849750/custom-authentication-for-blazer-rails", "title": "Custom authentication for Blazer (Rails)", "body": "<p>Where do I define <code>authenticate!</code> to get custom authentication for <a href=\"https://github.com/ankane/blazer\" rel=\"nofollow noreferrer\">Blazer</a>?</p>\n\n<p>I have this (uncommented) line in my <code>config/blazer.yml</code> (as described in the README under <a href=\"https://github.com/ankane/blazer#other\" rel=\"nofollow noreferrer\">Authentication > Other</a>):</p>\n\n<pre><code>before_action: :authenticate!\n</code></pre>\n\n<p>When I refresh my app, I get this error:</p>\n\n<pre><code>NoMethodError at / undefined method 'authenticate!' for #&lt;Blazer::QueriesController:0x007ffe26447830&gt;\n</code></pre>\n\n<p>That class is defined by the Blazer gem. Am I supposed to add/redefine its <code>authenticate!</code> method somehow?</p>\n\n<p>I tried adding an <code>initializers/blazer.rb</code> file where I defined:</p>\n\n<pre><code>class Blazer::QueriesController &lt; Blazer::BaseController\n  def authenticate!\n    true\n  end\nend\n</code></pre>\n\n<p>But now, when I click \"New Query\" in Blazer, I get this error:</p>\n\n<pre><code>NoMethodError in Blazer::Queries#new undefined method `errors' for nil:NilClass\n</code></pre>\n\n<p>Rails 4.2.5, Blazer 1.8.0</p>\n"}, {"tags": ["ruby", "contentful"], "answers": [{"comments": [{"owner": {"reputation": 2070, "user_id": 3412674, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d828b5882e2d091c90cc5fe840c5aa2b?s=128&d=identicon&r=PG", "display_name": "JLF", "link": "https://stackoverflow.com/users/3412674/jlf"}, "edited": false, "score": 0, "creation_date": 1503529058, "post_id": 45850171, "comment_id": 78659211, "body": "This successfully generates a link hash and passes the case this time, so no errors. But it still doesn&#39;t create a link in the CMS. The field is still empty."}, {"owner": {"reputation": 334, "user_id": 5439158, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1iztlFARX3s/AAAAAAAAAAI/AAAAAAAABLM/iVNkWGjfUno/photo.jpg?sz=128", "display_name": "David Litvak", "link": "https://stackoverflow.com/users/5439158/david-litvak"}, "reply_to_user": {"reputation": 2070, "user_id": 3412674, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d828b5882e2d091c90cc5fe840c5aa2b?s=128&d=identicon&r=PG", "display_name": "JLF", "link": "https://stackoverflow.com/users/3412674/jlf"}, "edited": false, "score": 0, "creation_date": 1503621119, "post_id": 45850171, "comment_id": 78704358, "body": "Can you open a support request at <a href=\"https://support.contentful.com/hc/en-us\" rel=\"nofollow noreferrer\">support.contentful.com/hc/en-us</a>. There we can better help you with your issue."}, {"owner": {"reputation": 4169, "user_id": 314539, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/zpukl.jpg?s=128&g=1", "display_name": "Dominik Goltermann", "link": "https://stackoverflow.com/users/314539/dominik-goltermann"}, "edited": false, "score": 0, "creation_date": 1591275005, "post_id": 45850171, "comment_id": 109997994, "body": "This does not work for me either. no error and the link does not show up in the cms"}], "tags": [], "owner": {"reputation": 334, "user_id": 5439158, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1iztlFARX3s/AAAAAAAAAAI/AAAAAAAABLM/iVNkWGjfUno/photo.jpg?sz=128", "display_name": "David Litvak", "link": "https://stackoverflow.com/users/5439158/david-litvak"}, "is_accepted": true, "score": 0, "last_activity_date": 1503527031, "creation_date": 1503527031, "answer_id": 45850171, "question_id": 45849717, "link": "https://stackoverflow.com/questions/45849717/updating-contentful-entry-with-a-link-reference-field/45850171#45850171", "title": "Updating Contentful entry with a link/reference field", "body": "<p>What you need to send is the <code>Link</code> for the referenced article.</p>\n\n<p>You can do this like:</p>\n\n<pre><code>entry = type.entries.create(\n  title: params[:title],\n  article: Contentful::Management::Link.new({\n    sys: {\n      id: params[:article],\n      type: 'Link',\n      linkType: 'Entry'\n    }\n  })\n)\n</code></pre>\n\n<p>You can find more information on how Links work here: <a href=\"https://www.contentful.com/developers/docs/concepts/links/\" rel=\"nofollow noreferrer\">https://www.contentful.com/developers/docs/concepts/links/</a></p>\n"}], "owner": {"reputation": 2070, "user_id": 3412674, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d828b5882e2d091c90cc5fe840c5aa2b?s=128&d=identicon&r=PG", "display_name": "JLF", "link": "https://stackoverflow.com/users/3412674/jlf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1102, "favorite_count": 0, "accepted_answer_id": 45850171, "answer_count": 1, "score": 2, "last_activity_date": 1503603616, "creation_date": 1503524432, "last_edit_date": 1503603616, "question_id": 45849717, "link": "https://stackoverflow.com/questions/45849717/updating-contentful-entry-with-a-link-reference-field", "title": "Updating Contentful entry with a link/reference field", "body": "<p>The Contentful documentation is pretty sparse. I want to update a field on an entry that is a Link to another entry (\"Reference\" is what they call it in the CMS UI).</p>\n\n<p>Does anyone know what format they want this in when using the Contentful Management API?</p>\n\n<pre><code>type  ||= @mgmt.content_types.find(\n  ENV['CONTENTFUL_SPACE_ID'], 'comments'\n)\n\nentry = type.entries.create(\n  title: params[:title],\n  article: params[:article]\n)\n</code></pre>\n\n<p>Where <code>:article</code> is the entry ID as a string. This returns:</p>\n\n<pre><code>undefined method `id' for \"7L4IpEtsdffds8EsmoWMGIgy\":String\nExtracted source (around line #74):\n\n#72         case field.type\n#73         when ContentType::LINK then\n*74           { sys: { type: field.type, linkType: field.link_type, id: attribute.id } } if attribute\n#75         when ContentType::ARRAY then\n#76           parse_fields_array(attribute)\n#77         when ContentType::LOCATION then\n</code></pre>\n\n<p>I've also tried to replace <code>params[:article]</code> with <code>@client.entry(params[:article])</code> thinking they may want the whole object but it returns the same error only it sees the same argument as an empty string.</p>\n\n<p>I have also tried this upon @DavidLitvak's suggestion:</p>\n\n<pre><code>link = Contentful::Management::Link.new({\n  sys: {\n    type: 'Link',\n    linkType: 'Entry',\n    id: params[:article]\n  }\n})\n\nentry = type.entries.create(\n  title: params[:title],\n  article: link\n)\n</code></pre>\n\n<p>And although this does not throw an error, the article field shows up without an entry while the title field is populated.</p>\n\n<p>Also note that I am using the Ruby gem: <code>contentful-management</code>.</p>\n"}, {"tags": ["ruby", "select", "null", "find"], "answers": [{"comments": [{"owner": {"reputation": 2955, "user_id": 444234, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3a0f29f3fd3f8ed687656de9fa22bcc7?s=128&d=identicon&r=PG", "display_name": "android.weasel", "link": "https://stackoverflow.com/users/444234/android-weasel"}, "edited": false, "score": 1, "creation_date": 1504079226, "post_id": 45849690, "comment_id": 78867331, "body": "find without the &#39;break m if m&#39; returns the line. I wanted the match."}], "tags": [], "owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "is_accepted": false, "score": 0, "last_activity_date": 1503524336, "creation_date": 1503524336, "answer_id": 45849690, "question_id": 45849509, "link": "https://stackoverflow.com/questions/45849509/in-ruby-how-best-to-return-the-non-nil-value-of-a-computationally-expensive-sea/45849690#45849690", "title": "In Ruby, how best to return the non-nil value of a computationally expensive search?", "body": "<p>This:</p>\n\n<pre><code>str.each_line.find { |l| m = l.match(/^(\\S+).*System(.*)/) ; break m if m }\n</code></pre>\n\n<p>Is the same as this:</p>\n\n<pre><code>str.each_line.find { |l| l.match(/^(\\S+).*System(.*)/) }\n</code></pre>\n\n<p>If you want all matches back, you're building a new result. That means you probably want a <code>reduce</code>: </p>\n\n<pre><code>str.each_line.reduce([]) do |matches, line|\n  if match_data = line.match(/^(\\S+).*System(.*)/)\n    matches &lt;&lt; match_data\n  end\n  matches\nend\n</code></pre>\n\n<p>One loop with an array result that contains only match data.</p>\n"}, {"comments": [{"owner": {"reputation": 2955, "user_id": 444234, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3a0f29f3fd3f8ed687656de9fa22bcc7?s=128&d=identicon&r=PG", "display_name": "android.weasel", "link": "https://stackoverflow.com/users/444234/android-weasel"}, "edited": false, "score": 0, "creation_date": 1504079601, "post_id": 45849883, "comment_id": 78867574, "body": "Thanks: although <code>Regexp.last_match</code> feels like a code smell, it&#39;s clearly part of Ruby."}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 0, "last_activity_date": 1503525353, "creation_date": 1503525353, "answer_id": 45849883, "question_id": 45849509, "link": "https://stackoverflow.com/questions/45849509/in-ruby-how-best-to-return-the-non-nil-value-of-a-computationally-expensive-sea/45849883#45849883", "title": "In Ruby, how best to return the non-nil value of a computationally expensive search?", "body": "<p>You could use <a href=\"https://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-grep\" rel=\"nofollow noreferrer\"><code>grep</code></a> to do what you want, I think:</p>\n\n<pre><code>matches = %x(./script.rb).each_line.lazy.grep(/^(\\S+).*System(.*)/) do\n  Regexp.last_match\nend\n</code></pre>\n\n<p><code>grep</code> will</p>\n\n<blockquote>\n  <p>Returns an array of every element in enum for which Pattern === element. If the optional block is supplied, each matching element is passed to it, and the block\u2019s result is stored in the output array.</p>\n</blockquote>\n\n<p>so by passing the block, we're essentially <code>map</code>/<code>collect</code> ing the output of <a href=\"https://ruby-doc.org/core-2.1.1/Regexp.html#method-c-last_match\" rel=\"nofollow noreferrer\"><code>Regexp.last_match</code></a> only for the lines that matched. And <code>Regexp.last_match</code></p>\n\n<blockquote>\n  <p>returns the MatchData object generated by the last successful pattern match.</p>\n</blockquote>\n"}], "owner": {"reputation": 2955, "user_id": 444234, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3a0f29f3fd3f8ed687656de9fa22bcc7?s=128&d=identicon&r=PG", "display_name": "android.weasel", "link": "https://stackoverflow.com/users/444234/android-weasel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 45849883, "answer_count": 2, "score": 0, "last_activity_date": 1504080018, "creation_date": 1503523489, "last_edit_date": 1504080018, "question_id": 45849509, "link": "https://stackoverflow.com/questions/45849509/in-ruby-how-best-to-return-the-non-nil-value-of-a-computationally-expensive-sea", "title": "In Ruby, how best to return the non-nil value of a computationally expensive search?", "body": "<p>I have a computationally expensive find, and for obvious reasons want the computed value rather than the original:</p>\n\n<pre><code>%x(...).each_line.find { |l| m = l.match(/^(\\S+).*System(.*)/) ; break m if m }\n</code></pre>\n\n<p>It seems the <code>find</code> is necessary because giving the block to <code>each_line</code> returns the original string on failure.</p>\n\n<p>If I want every matched line's group, I can <code>map { ... }.compact</code>, although I gather that's 'not the Ruby way' because I should <code>select</code> before I <code>map</code>. (Is that really considered the only acceptable practice?)</p>\n\n<p>I tried using that approach with <code>each_line</code> turned lazy so I could ask for <code>first</code> at the end, but I couldn't <code>compact</code> it. Needing to write <code>select{|x|x}</code> underwhelms me.</p>\n\n<pre><code>%x(...)\n  .each_line.lazy\n  .map { |l| l.match(/^(\\S+).*System(.*)/) }\n  .select { |x| x }  # lol, .compact pls.\n  .first\n</code></pre>\n\n<p>Is there something more elegant?</p>\n\n<hr>\n\n<p>Update: I'm going with</p>\n\n<pre><code>\"foo\\nbar\".each_line.lazy.flat_map{ |l| l.match(/([ao])/) || [] }.first\n</code></pre>\n\n<p>but an honourable mention goes to Simple Lime for the <code>grep</code> based answer.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-1.9"], "comments": [{"owner": {"reputation": 847, "user_id": 1963964, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/MLMKT.jpg?s=128&g=1", "display_name": "Roshan", "link": "https://stackoverflow.com/users/1963964/roshan"}, "edited": false, "score": 0, "creation_date": 1503524265, "post_id": 45849502, "comment_id": 78657498, "body": "paste the complete error."}], "answers": [{"tags": [], "owner": {"reputation": 847, "user_id": 1963964, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/MLMKT.jpg?s=128&g=1", "display_name": "Roshan", "link": "https://stackoverflow.com/users/1963964/roshan"}, "is_accepted": false, "score": 0, "last_activity_date": 1503524216, "last_edit_date": 1503524216, "creation_date": 1503523860, "answer_id": 45849590, "question_id": 45849502, "link": "https://stackoverflow.com/questions/45849502/getting-nomethoderror-undefined-method-for-nilnilclass/45849590#45849590", "title": "Getting NoMethodError ---&gt; undefined method `[]&#39; for nil:NilClass", "body": "<p>When you see <code>undefined method '[]' for nil:NilClass</code>, it means:</p>\n\n<blockquote>\n  <p>Hey! You have a value that is <code>nil</code> followed by <code>[...]</code>, but <code>nil</code> doesn't\n  have this method.</p>\n</blockquote>\n\n<p>In your case, it could be <code>service_info['server']</code>, <code>service_info['port']</code> or <code>service_info['path']</code> is <code>nil</code>.</p>\n"}], "owner": {"reputation": 51, "user_id": 5700650, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/1447c667bd1d7450d6e516c7323b2d8f?s=128&d=identicon&r=PG&f=1", "display_name": "Mayank Mukherjee ", "link": "https://stackoverflow.com/users/5700650/mayank-mukherjee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1503524216, "creation_date": 1503523464, "last_edit_date": 1503523850, "question_id": 45849502, "link": "https://stackoverflow.com/questions/45849502/getting-nomethoderror-undefined-method-for-nilnilclass", "title": "Getting NoMethodError ---&gt; undefined method `[]&#39; for nil:NilClass", "body": "<p>I am totally new to Ruby and while testing some changes , I'm getting the error below: Can somebody please highlight what does the below mean ?</p>\n\n<p><code>undefined method [] for nil:NilClass</code></p>\n\n<pre><code>adapterClient = Service.get_client(\n      ADAPTER_SERVICE_NAME,\n      service_info['server'],\n      service_info['port'],\n      service_info['path']\n    )\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 19714, "user_id": 1006863, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/sYOuq.jpg?s=128&g=1", "display_name": "Paulo Fidalgo", "link": "https://stackoverflow.com/users/1006863/paulo-fidalgo"}, "is_accepted": false, "score": 1, "last_activity_date": 1503521636, "creation_date": 1503521636, "answer_id": 45849108, "question_id": 45848842, "link": "https://stackoverflow.com/questions/45848842/rspec-how-to-properly-make-patch-request/45849108#45849108", "title": "Rspec: How to properly make patch request", "body": "<p>I've only used <a href=\"https://github.com/rack-test/rack-test\" rel=\"nofollow noreferrer\">rack-test</a> but I'm pretty sure it will be used or the syntax will be the same or similiar.</p>\n\n<pre><code>  context 'update fields' do\n    let(:payload) {\n      {\n        field: value\n      }\n    }\n    Given do\n      repository.save(resource: resource_object)\n    end\n    When do\n       patch('/resources/123', payload.to_json)\n    end\n\n    let(:result) { JSON.parse(last_response.body) }\n\n    Then { expect(last_response.status).to eq(400) }\n  end\n</code></pre>\n\n<p>So, first thing I noticed in your code, you're using a <code>POST</code> to create an object, where you should be saving directly.</p>\n\n<p>Second, by the error, it seems you don't have a <code>PATCH</code> method for <code>habits</code>, can you please update your answer with the corresponding output of <code>rails routes</code>?</p>\n"}, {"comments": [{"owner": {"reputation": 967, "user_id": 1852005, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sYSxX.jpg?s=128&g=1", "display_name": "stwr667", "link": "https://stackoverflow.com/users/1852005/stwr667"}, "edited": false, "score": 0, "creation_date": 1567567164, "post_id": 45849657, "comment_id": 101996383, "body": "Note that if you want to use the explicit Rails route you can call it like this: <code>patch habit_path(1, form_params)</code>. And note that you need to use the <i>singular</i> of the resource name, not the plural, since you&#39;re PATCHing a single resource. i.e. don&#39;t do this: <code>patch habits_path(1, form_params)</code>"}], "tags": [], "owner": {"reputation": 213, "user_id": 7990291, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6eZG-Wss61k/AAAAAAAAAAI/AAAAAAAADJw/r94_VBKfs7A/photo.jpg?sz=128", "display_name": "Josh HUmphrey", "link": "https://stackoverflow.com/users/7990291/josh-humphrey"}, "is_accepted": true, "score": 5, "last_activity_date": 1503525759, "last_edit_date": 1503525759, "creation_date": 1503524185, "answer_id": 45849657, "question_id": 45848842, "link": "https://stackoverflow.com/questions/45848842/rspec-how-to-properly-make-patch-request/45849657#45849657", "title": "Rspec: How to properly make patch request", "body": "<p>Okay figured it out. First I made a factory for the habit just to clear things up. I kept messing with the syntax and came to the correct answer.</p>\n\n<pre><code>form_params = {\n  params: {\n  name: \"new\",\n  description: \"shit\"\n  }\n}\npatch :update,id: 1, form_params\n</code></pre>\n\n<p>This was telling me wrong number of arguments and I eventually realized I needed to pass the id with my form_params. Like I said, small mistake. </p>\n\n<p>Correct code:</p>\n\n<pre><code>form_params = {\n    id: 1,\n    name: \"new\",\n    description: \"shit\",\n  }\n  patch :update, params: form_params\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 11980160, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JAi0o.jpg?s=128&g=1", "display_name": "Marcelo Escobar", "link": "https://stackoverflow.com/users/11980160/marcelo-escobar"}, "is_accepted": false, "score": 0, "last_activity_date": 1588186525, "creation_date": 1588186525, "answer_id": 61509524, "question_id": 45848842, "link": "https://stackoverflow.com/questions/45848842/rspec-how-to-properly-make-patch-request/61509524#61509524", "title": "Rspec: How to properly make patch request", "body": "<p>I've used resources to generate the routes, but to run update I did as below with rails 4.2</p>\n\n<pre><code>@current_habit = Habit.first\n\nform_params = {\n    name: \"new\",\n    description: \"shit\",\n  }\n\npatch :update, {id: @current_habit.id, params: form_params}\n</code></pre>\n"}], "owner": {"reputation": 213, "user_id": 7990291, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6eZG-Wss61k/AAAAAAAAAAI/AAAAAAAADJw/r94_VBKfs7A/photo.jpg?sz=128", "display_name": "Josh HUmphrey", "link": "https://stackoverflow.com/users/7990291/josh-humphrey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4836, "favorite_count": 0, "accepted_answer_id": 45849657, "answer_count": 3, "score": 3, "last_activity_date": 1588186525, "creation_date": 1503520469, "last_edit_date": 1503521994, "question_id": 45848842, "link": "https://stackoverflow.com/questions/45848842/rspec-how-to-properly-make-patch-request", "title": "Rspec: How to properly make patch request", "body": "<p>I've been searching all over for something that would explain the problem I'm having. I am probably missing something simple so I hope someone can catch my mistake. </p>\n\n<pre><code>Rails.application.routes.draw do\n\n get 'auth/:provider/callback', to: 'sessions#create', as: 'login'\n get 'auth/failure', to: redirect('/')\n get 'signout', to: 'sessions#destroy', as: 'signout'\n\n resources :sessions, only: [:create, :destroy]\n resources :home, only: [:show]\n resources :static_pages, only: [:show]\n resources :habits\n root to: \"home#show\"\n get '/started' =&gt; 'home#started'\n\nend\n</code></pre>\n\n<p>Routes:</p>\n\n<pre><code>   habit GET    /habits/:id(.:format)              habits#show\n         PATCH  /habits/:id(.:format)              habits#update\n         PUT    /habits/:id(.:format)              habits#update\n         DELETE /habits/:id(.:format)              habits#destroy\n</code></pre>\n\n<p>HabitsController:</p>\n\n<pre><code>def update\n  if params[:name].present? &amp;&amp; params[:description].present?\n    Habit.habit_edit(@current_habit, form_params)\n    flash[:success] = \"Edited habit: \" + @current_habit.name + '!'\n    redirect_to habit_path(:id =&gt; session[:user_id])\n  else\n    flash[:notice] = \"Habit must have a name and a description\"\n    redirect_to edit_habit_path(:id =&gt; @current_habit.id)\n  end\nend\n</code></pre>\n\n<p>HabitsControllerSpec:</p>\n\n<pre><code>describe \"#update\" do\n\nit \"should update the habit name/description\" do\n  form_params = {\n    params: {\n    name: \"hello\",\n    description: \"hello\"\n    }\n  }\n  post :create, form_params\n  @current_habit = Habit.first\n  form_params = {\n    params: {\n    name: \"new\",\n    description: \"shit\"\n    }\n  }\n  **patch \"habits/1\", form_params**\n\n\nend\n</code></pre>\n\n<p>Problem:</p>\n\n<pre><code>1) HabitsController#update should update the habit name/description\n Failure/Error: patch \"habits/1\", form_params\n\n ActionController::UrlGenerationError:\n   No route matches {:action=&gt;\"habits/1\", :controller=&gt;\"habits\", \n:description=&gt;\"shit\", :name=&gt;\"new\"}\n # ./spec/controllers/habits_controller_spec.rb:85:in `block (3 \nlevels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>I don't understand why this isn't working. I've tried lots of different methods to make a patch request and can't seem to figure out how to get this test to work. Again, I'm sure it is simple. If I left any important info out let me know. Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "rubygems"], "comments": [{"owner": {"reputation": 477, "user_id": 4224164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cBSM9.jpg?s=128&g=1", "display_name": "lavilet", "link": "https://stackoverflow.com/users/4224164/lavilet"}, "edited": false, "score": 0, "creation_date": 1503551120, "post_id": 45848833, "comment_id": 78664484, "body": "Hi Hash, please check out this link, perhaps this will help you: <a href=\"https://stackoverflow.com/questions/27138533/errnoeacces-permission-denied-unlink-internal-when-running-rake-testmodels\" title=\"errnoeacces permission denied unlink internal when running rake testmodels\">stackoverflow.com/questions/27138533/&hellip;</a>"}, {"owner": {"reputation": 153, "user_id": 8334151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6758c1aa78966372db24e441484a264?s=128&d=identicon&r=PG&f=1", "display_name": "KH_", "link": "https://stackoverflow.com/users/8334151/kh"}, "reply_to_user": {"reputation": 477, "user_id": 4224164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cBSM9.jpg?s=128&g=1", "display_name": "lavilet", "link": "https://stackoverflow.com/users/4224164/lavilet"}, "edited": false, "score": 0, "creation_date": 1503575278, "post_id": 45848833, "comment_id": 78679470, "body": "Thanks Lavilet but I already tried those."}], "owner": {"reputation": 153, "user_id": 8334151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6758c1aa78966372db24e441484a264?s=128&d=identicon&r=PG&f=1", "display_name": "KH_", "link": "https://stackoverflow.com/users/8334151/kh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 923, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1503520440, "creation_date": 1503520440, "question_id": 45848833, "link": "https://stackoverflow.com/questions/45848833/permission-denied-unlink-internal-when-i-run-rake-dbdrop-in-rails", "title": "Permission denied @ unlink_internal when I run rake db:drop in Rails", "body": "<p>I get the following error when I run <code>rake db:drop</code> or <code>rake db:reset</code></p>\n\n<p>I have tried everything I can find on the internet including restarting the server, restarting my computer, deleting the development.sqlite3 and schema.rb and rerunning migrate. Any help would be appreciated. I am new on ROR. Thanks in advance. I am using Rails 5.1.3 and Ruby 2.4.1.</p>\n\n<pre><code>** Invoke db:drop (first_time)\n** Invoke db:load_config (first_time)\n** Execute db:load_config\n** Invoke db:check_protected_environments (first_time)\n** Invoke environment (first_time)\n** Execute environment\n** Invoke db:load_config\n** Execute db:check_protected_environments\n** Execute db:drop\n** Invoke db:drop:_unsafe (first_time)\n** Invoke db:load_config\n** Execute db:drop:_unsafe\nPermission denied @ unlink_internal - C:/Users/hash/Desktop/Rails_Blog/blog/db/development.sqlite3\nCouldn't drop database 'db/development.sqlite3'\nrake aborted!\nErrno::EACCES: Permission denied @ unlink_internal - C:/Users/hash/Desktop/Rails_Blog/blog/db/development.sqlite3\nC:/Ruby24-x64/lib/ruby/2.4.0/fileutils.rb:1340:in `unlink'\nC:/Ruby24-x64/lib/ruby/2.4.0/fileutils.rb:1340:in `block in remove_file'\nC:/Ruby24-x64/lib/ruby/2.4.0/fileutils.rb:1348:in `platform_support'\nC:/Ruby24-x64/lib/ruby/2.4.0/fileutils.rb:1339:in `remove_file'\nC:/Ruby24-x64/lib/ruby/2.4.0/fileutils.rb:703:in `remove_file'\nC:/Ruby24-x64/lib/ruby/2.4.0/fileutils.rb:506:in `block in rm'\nC:/Ruby24-x64/lib/ruby/2.4.0/fileutils.rb:505:in `each'\nC:/Ruby24-x64/lib/ruby/2.4.0/fileutils.rb:505:in `rm'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/activerecord-5.1.3/lib/active_record/tasks/sqlite_database_tasks.rb:22:in `drop'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/activerecord-5.1.3/lib/active_record/tasks/database_tasks.rb:144:in `drop'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/activerecord-5.1.3/lib/active_record/tasks/database_tasks.rb:160:in `block in drop_current'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/activerecord-5.1.3/lib/active_record/tasks/database_tasks.rb:304:in `block in each_current_configuration'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/activerecord-5.1.3/lib/active_record/tasks/database_tasks.rb:303:in `each'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/activerecord-5.1.3/lib/active_record/tasks/database_tasks.rb:303:in `each_current_configuration'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/activerecord-5.1.3/lib/active_record/tasks/database_tasks.rb:159:in `drop_current'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/activerecord-5.1.3/lib/active_record/railties/databases.rake:42:in `block (2 levels) in &lt;top (required)&gt;'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/task.rb:250:in `block in execute'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/task.rb:250:in `each'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/task.rb:250:in `execute'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/task.rb:194:in `block in invoke_with_call_chain'\nC:/Ruby24-x64/lib/ruby/2.4.0/monitor.rb:214:in `mon_synchronize'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/task.rb:187:in `invoke_with_call_chain'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/task.rb:180:in `invoke'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/activerecord-5.1.3/lib/active_record/railties/databases.rake:38:in `block (2 levels) in &lt;top (required)&gt;'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/task.rb:250:in `block in execute'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/task.rb:250:in `each'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/task.rb:250:in `execute'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/task.rb:194:in `block in invoke_with_call_chain'\nC:/Ruby24-x64/lib/ruby/2.4.0/monitor.rb:214:in `mon_synchronize'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/task.rb:187:in `invoke_with_call_chain'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/task.rb:180:in `invoke'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:152:in `invoke_task'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:108:in `block (2 levels) in top_level'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:108:in `each'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:108:in `block in top_level'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:117:in `run_with_threads'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:102:in `top_level'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:80:in `block in run'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:178:in `standard_exception_handling'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:77:in `run'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/rake-12.0.0/exe/rake:27:in `&lt;top (required)&gt;'\nC:/Ruby24-x64/bin/rake:22:in `load'\nC:/Ruby24-x64/bin/rake:22:in `&lt;main&gt;'\nTasks: TOP =&gt; db:drop:_unsafe\n</code></pre>\n"}, {"tags": ["ruby", "regex", "gsub"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 2, "creation_date": 1503520031, "post_id": 45848605, "comment_id": 78655642, "body": "Maybe <a href=\"https://ideone.com/yquKpO\" rel=\"nofollow noreferrer\">this</a> might help."}, {"owner": {"reputation": 161, "user_id": 3478158, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/922591b6e6cc77034d7ce935c79ef38c?s=128&d=identicon&r=PG&f=1", "display_name": "bochen421", "link": "https://stackoverflow.com/users/3478158/bochen421"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1503521843, "post_id": 45848605, "comment_id": 78656487, "body": "This is perfect, thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": false, "score": 4, "last_activity_date": 1503524140, "last_edit_date": 1503524140, "creation_date": 1503522405, "answer_id": 45849270, "question_id": 45848605, "link": "https://stackoverflow.com/questions/45848605/how-to-replace-all-characters-but-for-the-first-and-last-two-with-gsub-ruby/45849270#45849270", "title": "How to replace all characters but for the first and last two with gsub Ruby", "body": "<p>**If you want to mask with a fixed number of <code>*</code> symbols, you may yse</p>\n\n<pre><code>'lorem.ipsum@gmail.com'.sub(/\\A(..).*@.*(..)\\z/, '\\1****@****\\2')\n# =&gt; lo****@****om\n</code></pre>\n\n<p>See the <a href=\"https://ideone.com/pK26lZ\" rel=\"nofollow noreferrer\">Ruby demo</a>.</p>\n\n<p>Here, </p>\n\n<ul>\n<li><code>\\A</code>  - start of string anchor </li>\n<li><code>(..)</code> - Group 1: first 2 chars</li>\n<li><code>.*@.*</code> - any 0+ chars other than line break chars as many as possible up to the last <code>@</code> followed with another set of 0+ chars other than line break ones</li>\n<li><code>(..)</code>  - Group 2: last 2 chars</li>\n<li><code>\\z</code> - end of string.</li>\n</ul>\n\n<p>The <code>\\1</code> in the replacment string refers to the value kept in Group 1, and <code>\\2</code> references the value in Group 2.</p>\n\n<p><strong>If you want to mask existing chars while keeping their number</strong>, you might consider an approach to capture the parts of the string you need to keep or process, and manipulate the captures inside a <code>sub</code> block:</p>\n\n<pre><code>'lorem.ipsum@gmail.com'.sub(/\\A(..)(.*)@(.*)(..)\\z/) { \n    $1 + \"*\"*$2.length + \"@\" + \"*\"*$3.length + $4\n}\n# =&gt; lo*********@*******om\n</code></pre>\n\n<p>See the <a href=\"https://ideone.com/yquKpO\" rel=\"nofollow noreferrer\">Ruby demo</a></p>\n\n<p><strong>Details</strong></p>\n\n<ul>\n<li><code>\\A</code> - start of string</li>\n<li><code>(..)</code> - Group 1 capturing any 2 chars</li>\n<li><code>(.*)</code> - Group 2 capturing any 0+ chars as many as possible up to the last....</li>\n<li><code>@</code>  - <code>@</code> char</li>\n<li><code>(.*)</code> - Group 3 capturing any 0+ chars as many as possible up to the</li>\n<li><code>(..)</code> - Group 4: last two chars</li>\n<li><code>\\z</code> - end of string.</li>\n</ul>\n\n<p>Note that inside the block, <code>$1</code> contains Group 1 value, <code>$2</code> holds Group 2 value, and so on.</p>\n"}, {"tags": [], "owner": {"reputation": 362, "user_id": 2787566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9c8f0b4fc470756aa44845c610c7c94?s=128&d=identicon&r=PG&f=1", "display_name": "iskvmk", "link": "https://stackoverflow.com/users/2787566/iskvmk"}, "is_accepted": false, "score": 2, "last_activity_date": 1503522524, "creation_date": 1503522524, "answer_id": 45849304, "question_id": 45848605, "link": "https://stackoverflow.com/questions/45848605/how-to-replace-all-characters-but-for-the-first-and-last-two-with-gsub-ruby/45849304#45849304", "title": "How to replace all characters but for the first and last two with gsub Ruby", "body": "<p>Using <code>gsub</code> with look-ahead and look-behind regex patterns:</p>\n\n<pre><code> 'lorem.ipsum@gmail.com'.gsub(/(?&lt;=.{2}).*@.*(?=\\S{2})/, '****@****')\n=&gt; \"lo****@****om\"\n</code></pre>\n\n<p>Using plain ruby:</p>\n\n<pre><code>str.first(2) + '****@****' + str.last(2)\n=&gt; \"lo****@****om\"\n</code></pre>\n"}], "owner": {"reputation": 161, "user_id": 3478158, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/922591b6e6cc77034d7ce935c79ef38c?s=128&d=identicon&r=PG&f=1", "display_name": "bochen421", "link": "https://stackoverflow.com/users/3478158/bochen421"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1910, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1503524140, "creation_date": 1503519492, "last_edit_date": 1503519646, "question_id": 45848605, "link": "https://stackoverflow.com/questions/45848605/how-to-replace-all-characters-but-for-the-first-and-last-two-with-gsub-ruby", "title": "How to replace all characters but for the first and last two with gsub Ruby", "body": "<p>Given any email address I would like to leave only the first and last two characters and input 4 asterisks to the left and right of @ character.</p>\n\n<p>The best way to explain are examples:</p>\n\n<p><code>lorem.ipsum@gmail.com</code> changed to <code>lo****@****om</code> <br><br>\n<code>foo@foo.de</code> changed <code>fo****@****de</code></p>\n\n<p>How to do it with gsub? </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "is_accepted": true, "score": 3, "last_activity_date": 1503519186, "creation_date": 1503519186, "answer_id": 45848537, "question_id": 45848373, "link": "https://stackoverflow.com/questions/45848373/actioncontrollerparametermissing-in-userscontrollerupdate-rails/45848537#45848537", "title": "ActionController::ParameterMissing in UsersController#update Rails", "body": "<p>According to the examples, that you've provided, Request params contain <code>staff</code>:</p>\n\n<pre><code>\"staff\"=&gt;{\"name\"=&gt;\"fake alogo\", ...\n</code></pre>\n\n<p>but do not contain <code>user</code> as defined strong params require to:</p>\n\n<pre><code>def user_params\n  params.require(:user).permit(:name, :email, :role, :university_id, :password, :password_confirmation)\nend\n</code></pre>\n\n<p>That's because <code>@user</code> in <code>form_for</code> method is an instance of <code>Staff</code> class. And <code>form_for</code> by default names the params as <code>staff</code>.</p>\n\n<p>Luckily, there's <code>as</code> option for <code>form_for</code> for configuring this:</p>\n\n<pre><code>&lt;%= form_for(@user, as: :user) do |f| %&gt;\n  &lt;%= render 'shared/error_messages', object: f.object %&gt;\n\n  &lt;%= f.label :name %&gt;\n  &lt;%= f.text_field :name, class: 'form-control' %&gt;\n\n  &lt;%= f.label :email %&gt;\n  &lt;%= f.email_field :email, class: 'form-control' %&gt;\n\n  &lt;%= f.label :password %&gt;\n  &lt;%= f.password_field :password, class: 'form-control' %&gt;\n\n  &lt;%= f.label :password_confirmation, \"Confirmation\" %&gt;\n  &lt;%= f.password_field :password_confirmation, class: 'form-control' %&gt;\n\n  &lt;%= f.submit \"Save changes\", class: \"btn btn-primary\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>It should send the params as <code>\"user\" =&gt; {\"name\" =&gt; ...}</code></p>\n"}], "owner": {"reputation": 239, "user_id": 4898223, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3c3aefeff3eee824b60c20e11ff3d2be?s=128&d=identicon&r=PG&f=1", "display_name": "mike9182", "link": "https://stackoverflow.com/users/4898223/mike9182"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 994, "favorite_count": 0, "accepted_answer_id": 45848537, "answer_count": 1, "score": 0, "last_activity_date": 1503519245, "creation_date": 1503518466, "last_edit_date": 1503519245, "question_id": 45848373, "link": "https://stackoverflow.com/questions/45848373/actioncontrollerparametermissing-in-userscontrollerupdate-rails", "title": "ActionController::ParameterMissing in UsersController#update Rails", "body": "<p>When I try to edit a user, I get the error: </p>\n\n<p>ActionController::ParameterMissing in UsersController#update\nparam is missing or the value is empty: user</p>\n\n<p>with the params.require line highlighted:</p>\n\n<pre><code>        def user_params\n            params.require(:user).permit(:name, :email, :role, :university_id, :password, :password_confirmation)\n\n  end\n</code></pre>\n\n<p>I've looked at similar questions for solutions but can't seem to get it to work. Any help for a rookie would be greatly appreciated!</p>\n\n<p>Here are the Request Parameters:</p>\n\n<pre><code>{\"utf8\"=&gt;\"\u2713\",\n \"_method\"=&gt;\"patch\",\n \"authenticity_token\"=&gt;\"PfLU2rMWnEMj4Nez+tNhsZz9v9z2jGmCTUXOOElmv9NMK6j8LTzvSuJGL9iH/cx02vb7Po3tSQIKmMXNPVhULg==\",\n \"staff\"=&gt;{\"name\"=&gt;\"fake alogo\", \"email\"=&gt;\"fake@alogo.com\", \"password\"=&gt;\"[FILTERED]\", \"password_confirmation\"=&gt;\"[FILTERED]\"},\n \"commit\"=&gt;\"Save changes\",\n \"id\"=&gt;\"103\"}\n</code></pre>\n\n<p>Here is the form I'm using to edit users:</p>\n\n<pre><code>    &lt;%= form_for(@user) do |f| %&gt;\n    &lt;%= render 'shared/error_messages', object: f.object %&gt;\n\n      &lt;%= f.label :name %&gt;\n      &lt;%= f.text_field :name, class: 'form-control' %&gt;\n\n      &lt;%= f.label :email %&gt;\n      &lt;%= f.email_field :email, class: 'form-control' %&gt;\n\n      &lt;%= f.label :password %&gt;\n      &lt;%= f.password_field :password, class: 'form-control' %&gt;\n\n      &lt;%= f.label :password_confirmation, \"Confirmation\" %&gt;\n      &lt;%= f.password_field :password_confirmation, class: 'form-control' %&gt;\n\n      &lt;%= f.submit \"Save changes\", class: \"btn btn-primary\" %&gt;\n    &lt;% end %&gt;\n</code></pre>\n\n<p>Here is the users controller:</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  before_action :logged_in_user, only: [:show, :index, :edit, :update, :destroy]\n  before_action :correct_user,   only: [:edit, :update]\n\n  def index\n    @users = User.paginate(page: params[:page])\n  end\n\n   def show\n    @user = User.find(params[:id])\n    @referral_requests = @user.referral_requests.paginate(page: params[:page])\n  end\n\n  def new\n    @user = User.new\n  end\n\n  def create\n    @user = User.new(user_params)\n    if @user.save\n      @user.send_activation_email\n      flash[:info] = \"Please check your email to activate your account.\"\n      redirect_to root_url\n    else\n        render 'new'\n    end\n  end\n\n  def edit\n  end\n\n  def update\n    if @user.update_attributes(user_params)\n      flash[:success] = \"Profile updated\"\n      redirect_to @user\n    else\n      render 'edit'\n    end\n  end\n\ndef destroy\n  User.find(params[:id]).destroy\n  flash[:success] = \"User deleted\"\n  redirect_to users_url\nend\n\n    private\n\n        def user_params\n            params.require(:user).permit(:name, :email, :role, :university_id, :password, :password_confirmation)\n\n  end\n\n    # Before filters\n\n\n    # Confirms the correct user.\n    def correct_user\n      @user = User.find(params[:id])\n      redirect_to(root_url) unless current_user?(@user)\n    end\nend\n</code></pre>\n\n<p>User Model:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  self.inheritance_column = :role\n  enum role: { Staff: 0, Clinician: 1, Admin: 2 }\n  belongs_to :university\n  has_many :referral_requests\n\n  attr_accessor :remember_token, :activation_token, :reset_token\n  before_save   :downcase_email\n  before_create :create_activation_digest\n  validates :name,  presence: true, length: { maximum: 50 }\n  VALID_EMAIL_REGEX = /\\A[\\w+\\-.]+@[a-z\\d\\-]+(\\.[a-z\\d\\-]+)*\\.[a-z]+\\z/i\n  validates :email, presence: true, length: { maximum: 255 },\n                    format: { with: VALID_EMAIL_REGEX },\n                    uniqueness: { case_sensitive: false }\n  validates :role, presence: true\n\n\n  has_secure_password\n  validates :password, presence: true, length: { minimum: 6 }, allow_nil: true\n\n  # Returns the hash digest of the given string.\n  def User.digest(string)\n    cost = ActiveModel::SecurePassword.min_cost ? BCrypt::Engine::MIN_COST :\n                                                  BCrypt::Engine.cost\n    BCrypt::Password.create(string, cost: cost)\n  end\n\n  # Returns a random token.\n  def User.new_token\n    SecureRandom.urlsafe_base64\n  end\n\n  # Remembers a user in the database for use in persistent sessions.\n  def remember\n    self.remember_token = User.new_token\n    update_attribute(:remember_digest, User.digest(remember_token))\n  end\n\n  # Returns true if the given token matches the digest.\n  def authenticated?(remember_token)\n        return false if remember_digest.nil?\n    BCrypt::Password.new(remember_digest).is_password?(remember_token)\n  end\n\n\n  # Forgets a user.\n  def forget\n    update_attribute(:remember_digest, nil)\n  end\n\n    # Returns true if the given token matches the digest.\n  def authenticated?(attribute, token)\n    digest = send(\"#{attribute}_digest\")\n    return false if digest.nil?\n    BCrypt::Password.new(digest).is_password?(token)\n  end\n\n  # Activates an account.\n  def activate\n    update_attribute(:activated,    true)\n    update_attribute(:activated_at, Time.zone.now)\n  end\n\n  # Sends activation email.\n  def send_activation_email\n    UserMailer.account_activation(self).deliver_now\n  end\n\n # Sets the password reset attributes.\n  def create_reset_digest\n    self.reset_token = User.new_token\n    update_attribute(:reset_digest,  User.digest(reset_token))\n    update_attribute(:reset_sent_at, Time.zone.now)\n  end\n\n  # Sends password reset email.\n  def send_password_reset_email\n    UserMailer.password_reset(self).deliver_now\n  end\n\n   # Returns true if a password reset has expired.\n  def password_reset_expired?\n    reset_sent_at &lt; 2.hours.ago\n  end\n\n def feed\n    ReferralRequest.where(\"user_id = ?\", id)\n  end\n\n\n private\n\n    # Converts email to all lower-case.\n    def downcase_email\n    self.email = email.downcase\n    end\n\n    # Creates and assigns the activation token and digest.\n    def create_activation_digest\n      self.activation_token  = User.new_token\n      self.activation_digest = User.digest(activation_token)\n    end\n\n\nend\n\n\nclass Staff &lt; User\n  validates :university_id, presence: true\nend\n\nclass Clinician &lt; User\n  has_many :lists\n  has_many :universities, through: :lists\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1503516297, "post_id": 45847845, "comment_id": 78653879, "body": "It looks like Ruby is reading the input just fine, just your terminal is configured with the wrong character encoding."}, {"owner": {"reputation": 2124, "user_id": 839787, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f330a19645ff0895459fce9ca810b3ce?s=128&d=identicon&r=PG", "display_name": "Stephane Paquet", "link": "https://stackoverflow.com/users/839787/stephane-paquet"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1503520280, "post_id": 45847845, "comment_id": 78655758, "body": "Agree with @J&#246;rgWMittag. Just tested your code and it works"}], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 1526084, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a99d18bdbe7936f65e51e9602e2e2115?s=128&d=identicon&r=PG", "display_name": "brgsousa", "link": "https://stackoverflow.com/users/1526084/brgsousa"}, "edited": false, "score": 0, "creation_date": 1503582259, "post_id": 45848685, "comment_id": 78684886, "body": "It worked when I started Ruby using CP850 (irb -ECP850) which is my terminal default encoding. If I force it to be IBM437 it doesn&#39;t work. Thank you! During ruby installation I marked &quot;Use UTF-8 as default external encoding&quot;. I shouldn&#39;t have done that."}, {"owner": {"reputation": 1724, "user_id": 5269178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ddb19370af3c88392ce8d470f0864da?s=128&d=identicon&r=PG&f=1", "display_name": "Ampati Hareesh", "link": "https://stackoverflow.com/users/5269178/ampati-hareesh"}, "reply_to_user": {"reputation": 177, "user_id": 1526084, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a99d18bdbe7936f65e51e9602e2e2115?s=128&d=identicon&r=PG", "display_name": "brgsousa", "link": "https://stackoverflow.com/users/1526084/brgsousa"}, "edited": false, "score": 0, "creation_date": 1503584879, "post_id": 45848685, "comment_id": 78686847, "body": "Yes  we need to change from utf-8 to other encoding, Thanks"}, {"owner": {"reputation": 177, "user_id": 1526084, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a99d18bdbe7936f65e51e9602e2e2115?s=128&d=identicon&r=PG", "display_name": "brgsousa", "link": "https://stackoverflow.com/users/1526084/brgsousa"}, "edited": false, "score": 0, "creation_date": 1503689056, "post_id": 45848685, "comment_id": 78735783, "body": "Actually, it is still not working. Even after reinstalling Ruby: <a href=\"http://imgur.com/a/HKbyJ\" rel=\"nofollow noreferrer\">imgur.com/a/HKbyJ</a>"}, {"owner": {"reputation": 1724, "user_id": 5269178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ddb19370af3c88392ce8d470f0864da?s=128&d=identicon&r=PG&f=1", "display_name": "Ampati Hareesh", "link": "https://stackoverflow.com/users/5269178/ampati-hareesh"}, "reply_to_user": {"reputation": 177, "user_id": 1526084, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a99d18bdbe7936f65e51e9602e2e2115?s=128&d=identicon&r=PG", "display_name": "brgsousa", "link": "https://stackoverflow.com/users/1526084/brgsousa"}, "edited": false, "score": 0, "creation_date": 1503784502, "post_id": 45848685, "comment_id": 78758925, "body": "Finally !!! after going through the files of init.rb and locale.rb [no issues with version 2.4.1] , Able to recreate the scenario what u have experienced, here we have to make sure that uninstalling was successful . It worked !!! Thanks and please add irb tag to the question."}, {"owner": {"reputation": 1724, "user_id": 5269178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ddb19370af3c88392ce8d470f0864da?s=128&d=identicon&r=PG&f=1", "display_name": "Ampati Hareesh", "link": "https://stackoverflow.com/users/5269178/ampati-hareesh"}, "reply_to_user": {"reputation": 177, "user_id": 1526084, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a99d18bdbe7936f65e51e9602e2e2115?s=128&d=identicon&r=PG", "display_name": "brgsousa", "link": "https://stackoverflow.com/users/1526084/brgsousa"}, "edited": false, "score": 0, "creation_date": 1503784944, "post_id": 45848685, "comment_id": 78759023, "body": "Installation Default UTF-8 VS without it on left [while installing marking the default UTF-8 box] and on right [without marking]<a href=\"http://imgur.com/a/sdT4o\" rel=\"nofollow noreferrer\">imgur.com/a/sdT4o</a>"}, {"owner": {"reputation": 177, "user_id": 1526084, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a99d18bdbe7936f65e51e9602e2e2115?s=128&d=identicon&r=PG", "display_name": "brgsousa", "link": "https://stackoverflow.com/users/1526084/brgsousa"}, "edited": false, "score": 0, "creation_date": 1503923327, "post_id": 45848685, "comment_id": 78796489, "body": "It worked now! I did a clean uninstall and now, after a fresh install, it is working. RUBYOPT was in registry."}, {"owner": {"reputation": 177, "user_id": 1526084, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a99d18bdbe7936f65e51e9602e2e2115?s=128&d=identicon&r=PG", "display_name": "brgsousa", "link": "https://stackoverflow.com/users/1526084/brgsousa"}, "edited": false, "score": 0, "creation_date": 1503927565, "post_id": 45848685, "comment_id": 78799316, "body": "Nope... again... Sorry... Still not working.It is weird. After I install Ruby it works fine until I log out and log in. Then the issue comes back"}, {"owner": {"reputation": 177, "user_id": 1526084, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a99d18bdbe7936f65e51e9602e2e2115?s=128&d=identicon&r=PG", "display_name": "brgsousa", "link": "https://stackoverflow.com/users/1526084/brgsousa"}, "edited": false, "score": 0, "creation_date": 1503928914, "post_id": 45848685, "comment_id": 78800324, "body": "Now, it is working because I manually added a Environment variable RUBYOPT as &quot;-ECP850&quot;"}], "tags": [], "owner": {"reputation": 1724, "user_id": 5269178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ddb19370af3c88392ce8d470f0864da?s=128&d=identicon&r=PG&f=1", "display_name": "Ampati Hareesh", "link": "https://stackoverflow.com/users/5269178/ampati-hareesh"}, "is_accepted": false, "score": 2, "last_activity_date": 1503584912, "last_edit_date": 1503584912, "creation_date": 1503519762, "answer_id": 45848685, "question_id": 45847845, "link": "https://stackoverflow.com/questions/45847845/ruby-2-4-1-cant-read-special-characters-from-stdin/45848685#45848685", "title": "Ruby 2.4.1 Can&#39;t read special characters from stdin", "body": "<p>change the irb encoding from utf-8 to someother encoding,\nmy code page default value is 437 and for the irb command it uses the encoding as IBM437[which is working fine]\nbut when i changed the encoding to utf-8 the result came as u mentioned\nhence change the irb encoding</p>\n\n<p><a href=\"https://i.stack.imgur.com/WhyDR.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WhyDR.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 177, "user_id": 1526084, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a99d18bdbe7936f65e51e9602e2e2115?s=128&d=identicon&r=PG", "display_name": "brgsousa", "link": "https://stackoverflow.com/users/1526084/brgsousa"}, "is_accepted": false, "score": 0, "last_activity_date": 1503582558, "creation_date": 1503582558, "answer_id": 45863375, "question_id": 45847845, "link": "https://stackoverflow.com/questions/45847845/ruby-2-4-1-cant-read-special-characters-from-stdin/45863375#45863375", "title": "Ruby 2.4.1 Can&#39;t read special characters from stdin", "body": "<p>It worked when I started Ruby using CP850 (irb -ECP850) which is my terminal default encoding. If I force it to be IBM437 it doesn't work. Thank you! During ruby installation I marked \"Use UTF-8 as default external encoding\". I shouldn't have done that.</p>\n"}], "owner": {"reputation": 177, "user_id": 1526084, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a99d18bdbe7936f65e51e9602e2e2115?s=128&d=identicon&r=PG", "display_name": "brgsousa", "link": "https://stackoverflow.com/users/1526084/brgsousa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1503584912, "creation_date": 1503516188, "question_id": 45847845, "link": "https://stackoverflow.com/questions/45847845/ruby-2-4-1-cant-read-special-characters-from-stdin", "title": "Ruby 2.4.1 Can&#39;t read special characters from stdin", "body": "<p>I am using Windows Server 2008 R2</p>\n\n<pre><code>C:\\Users\\administrador&gt;ruby -v\nruby 2.4.1p111 (2017-03-22 revision 58053) [x64-mingw32]\n\nC:\\Users\\administrador&gt;irb\nirb(main):001:0&gt; test = gets\ntesting special char \u00e1\u00e9\u00ed\u00f3\u00fa\n=&gt; \"testing special char \\xA0\\x82\\xA1\\xA2\\xA3\\n\"\nirb(main):002:0&gt; puts test\ntesting special char ?????\n=&gt; nil\nirb(main):003:0&gt;\n</code></pre>\n\n<p>It used to work on previous versions of Ruby. What changed?</p>\n"}, {"tags": ["ruby", "amazon-s3", "open-uri"], "answers": [{"tags": [], "owner": {"reputation": 150, "user_id": 2612135, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c39f0a9da04c1b24702f7f1e05ac3563?s=128&d=identicon&r=PG", "display_name": "alexts", "link": "https://stackoverflow.com/users/2612135/alexts"}, "is_accepted": true, "score": 0, "last_activity_date": 1503590657, "creation_date": 1503590657, "answer_id": 45866330, "question_id": 45847148, "link": "https://stackoverflow.com/questions/45847148/ruby-amazon-s3-for-remote-url-attachments-openurihttperror-403-forbidden/45866330#45866330", "title": "RUby - amazon S3 for remote url attachments - OpenURI::HTTPError: 403 Forbidden", "body": "<p>Well,that was an easy fix but a bit unrelated. \nI had a typo elsewhere in my code which made filename a little different from the urls I used to test.</p>\n\n<p>I realized it when I used the following instead for file_path and it worked instantly with:</p>\n\n<pre><code>file_path = @doc.filename.url\n\nattachments[@file_name] = open(URI.parse(\"#{file_path}\")).read\n</code></pre>\n"}], "owner": {"reputation": 150, "user_id": 2612135, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c39f0a9da04c1b24702f7f1e05ac3563?s=128&d=identicon&r=PG", "display_name": "alexts", "link": "https://stackoverflow.com/users/2612135/alexts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1039, "favorite_count": 0, "accepted_answer_id": 45866330, "answer_count": 1, "score": 0, "last_activity_date": 1503590657, "creation_date": 1503513513, "last_edit_date": 1503515867, "question_id": 45847148, "link": "https://stackoverflow.com/questions/45847148/ruby-amazon-s3-for-remote-url-attachments-openurihttperror-403-forbidden", "title": "RUby - amazon S3 for remote url attachments - OpenURI::HTTPError: 403 Forbidden", "body": "<p>I know this question has been asked several times but none of the solutions provided work for me.\nI am using Ruby version 2.2.1 with open-uri and trying to add a remote url for my email attachments.</p>\n\n<p>What I have is:</p>\n\n<pre><code>@filename = \"#{@doc.id}-#{@company.subdomain}-#{@doc.doc_number}-#{@doc.created_at.strftime(\"%Y-%m-%d\")}.pdf\"\n@file_path = \"https://mybucket.s3.amazonaws.com/docs/doc_#{@doc.id}/#{@doc.filename}\"\n\nattachments[@filename] = open(URI.parse(\"#{@file_path}\")).read\n</code></pre>\n\n<p>I have also used </p>\n\n<pre><code> 1. File.read(open(\"#{@file_path}\")\n 2. open(Net::HTTP.get(URI.parse(\"#{@file_path}\"))\n 3. Added User-Agent\n</code></pre>\n\n<p>I removed URI.parse, tried with instance variable and without string interpolation. Nothing works. If I visit a file path on the browser it does work but not when I call it in my mailer.</p>\n\n<p>Any help would be much appreciated. </p>\n\n<p>EDIT:\nIf I just hardcode a working url (no string interpolation) as a file attachment, it works fine.</p>\n"}, {"tags": ["ruby", "dynamic-dispatch"], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 5500952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd5656e612529f90cfe0e5e8ea9dcb35?s=128&d=identicon&r=PG&f=1", "display_name": "tjukes", "link": "https://stackoverflow.com/users/5500952/tjukes"}, "edited": false, "score": 0, "creation_date": 1503529292, "post_id": 45847266, "comment_id": 78659280, "body": "Cool, thanks! Guess I&#39;m blind, I missed that last sentence when I looked for this in the docs :)"}], "tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": true, "score": 4, "last_activity_date": 1503513936, "creation_date": 1503513936, "answer_id": 45847266, "question_id": 45847084, "link": "https://stackoverflow.com/questions/45847084/dynamic-dispatch-in-ruby-strings-vs-symbols/45847266#45847266", "title": "Dynamic dispatch in Ruby: strings vs symbols", "body": "<ol>\n<li><p>There is no difference between them, in fact, when passing a <em>string</em> it is converted to a <em>symbol</em>.</p></li>\n<li><p>No need to convert it since that same conversion (e.g. <code>'bar'.to_sym</code>) will be done if a <em>string</em> is provided.</p></li>\n</ol>\n\n<p>From the <a href=\"https://ruby-doc.org/core-2.4.0/Object.html#method-i-public_send\" rel=\"nofollow noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p>Invokes the method identified by <em>symbol</em>, passing it any arguments\n  specified. Unlike send, <code>#public_send</code> calls public methods only. When\n  the method is identified by a string, the string is converted to a\n  symbol.</p>\n</blockquote>\n"}], "owner": {"reputation": 133, "user_id": 5500952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd5656e612529f90cfe0e5e8ea9dcb35?s=128&d=identicon&r=PG&f=1", "display_name": "tjukes", "link": "https://stackoverflow.com/users/5500952/tjukes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 45847266, "answer_count": 1, "score": 2, "last_activity_date": 1503513936, "creation_date": 1503513227, "last_edit_date": 1503513811, "question_id": 45847084, "link": "https://stackoverflow.com/questions/45847084/dynamic-dispatch-in-ruby-strings-vs-symbols", "title": "Dynamic dispatch in Ruby: strings vs symbols", "body": "<ol>\n<li><p>What's the difference between sending a string and sending a symbol to call a method dynamically, e.g., <code>foo.public_send(:bar)</code> vs <code>foo.public_send('bar')</code>? Is there a concrete difference in how these are handled? </p></li>\n<li><p>If symbols are better, is it worth to do <code>foo.public_send('bar'.to_sym)</code> if for some reason you need to construct your method name as a string?</p></li>\n</ol>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1503516609, "post_id": 45847052, "comment_id": 78654029, "body": "So you&#39;re wondering why <code>File.open</code> won&#39;t open a remote file over HTTPS?"}, {"owner": {"reputation": 35, "user_id": 8175208, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5f44b11ee8b1a76f1ee57ccf2443fb7d?s=128&d=identicon&r=PG&f=1", "display_name": "faul", "link": "https://stackoverflow.com/users/8175208/faul"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1503517645, "post_id": 45847052, "comment_id": 78654482, "body": "Yes that is confusion"}, {"owner": {"reputation": 196, "user_id": 2493590, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/63a284c798ef80209727d1b4d018fdb4?s=128&d=identicon&r=PG", "display_name": "dgolman", "link": "https://stackoverflow.com/users/2493590/dgolman"}, "edited": false, "score": 0, "creation_date": 1503518570, "post_id": 45847052, "comment_id": 78654952, "body": "Can you try <code>@file &lt;&lt; open(&quot;#{papers.paper.url}&quot;).read</code>"}, {"owner": {"reputation": 2124, "user_id": 839787, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f330a19645ff0895459fce9ca810b3ce?s=128&d=identicon&r=PG", "display_name": "Stephane Paquet", "link": "https://stackoverflow.com/users/839787/stephane-paquet"}, "edited": false, "score": 0, "creation_date": 1503520479, "post_id": 45847052, "comment_id": 78655853, "body": "How are you authenticating to access your S3 bucket?"}], "owner": {"reputation": 35, "user_id": 8175208, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5f44b11ee8b1a76f1ee57ccf2443fb7d?s=128&d=identicon&r=PG&f=1", "display_name": "faul", "link": "https://stackoverflow.com/users/8175208/faul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1046, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1503513138, "creation_date": 1503513138, "question_id": 45847052, "link": "https://stackoverflow.com/questions/45847052/invalid-argument-rb-sysopen-in-ruby-on-rails-application", "title": "Invalid argument @ rb_sysopen in Ruby on Rails application", "body": "<p>I know this is the common question in this forum, but I tried last nearly 4 hours one by one not working for me. Worked before another method &amp; another resource but not in this method.</p>\n\n<p>Error below:</p>\n\n<p><strong>Invalid argument @ rb_sysopen - <a href=\"https://example.s3.amazonaws.com/uploads/Data.pdf\" rel=\"nofollow noreferrer\">https://example.s3.amazonaws.com/uploads/Data.pdf</a></strong></p>\n\n<p>When I use like below: <strong>Static File</strong></p>\n\n<pre><code>@file = File.open(\"#{Rails.root}/public/Data.pdf\")\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>File.new(@file)\n</code></pre>\n\n<p>That is working but when like below: </p>\n\n<p><strong>Dynamic File</strong></p>\n\n<pre><code>@file = File.open(\"#{papers.paper.url}\") #=&gt; output url: https://example.s3.amazonaws.com/uploads/Data.pdf\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>File.new(@file)\n</code></pre>\n\n<p>That is showing error. I have tried string like <code>w</code> <code>w+</code> <code>r</code> <code>r+</code> etc.</p>\n\n<p>What I'm doing wrong with this code?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "capybara", "minitest"], "answers": [{"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": false, "score": 1, "last_activity_date": 1503511774, "creation_date": 1503511774, "answer_id": 45846686, "question_id": 45846486, "link": "https://stackoverflow.com/questions/45846486/how-to-check-for-visibility-if-the-class-exists-in-capybara/45846686#45846686", "title": "How to check for visibility if the class exists in capybara?", "body": "<p>By default Capybara only finds visible elements, so </p>\n\n<pre><code>if has_css?(\".class-name\", wait: 0)\n</code></pre>\n\n<p>will only return true if the element is visible on the page</p>\n\n<p>If you want to verify the element is either not on the page, or if it is in the source of the page it must be visible then you could do something like</p>\n\n<pre><code>assert_css('.class-name') if has_css?('.class-name', visible: :all)\n</code></pre>\n\n<p>or just</p>\n\n<pre><code>refute_css('.class-name', visible: :hidden) # ensure there is no non-visible element with the class name\n</code></pre>\n"}], "owner": {"reputation": 1845, "user_id": 574923, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YGvbp.jpg?s=128&g=1", "display_name": "Nils_e", "link": "https://stackoverflow.com/users/574923/nils-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 606, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1503511774, "creation_date": 1503511070, "question_id": 45846486, "link": "https://stackoverflow.com/questions/45846486/how-to-check-for-visibility-if-the-class-exists-in-capybara", "title": "How to check for visibility if the class exists in capybara?", "body": "<p>With capybara and minitest, how would you check for visibility of a element if the element exists on the page? The class isn't always guaranteed to be there, so I need to check if it is on the page first.</p>\n\n<p>All I can think of is:</p>\n\n<pre><code>assert find(\".class-name\").visible? if has_css?(\".class-name\", :wait=&gt;0)\n</code></pre>\n\n<p>Are there any other ways of doing this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1105, "user_id": 1168379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8cb9f01f0296531ac9cad5bc6f2457?s=128&d=identicon&r=PG", "display_name": "Charles", "link": "https://stackoverflow.com/users/1168379/charles"}, "edited": false, "score": 0, "creation_date": 1503510322, "post_id": 45846190, "comment_id": 78650509, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/39567/what-is-the-best-way-to-convert-an-array-to-a-hash-in-ruby\">What is the best way to convert an array to a hash in Ruby</a>"}, {"owner": {"reputation": 1500, "user_id": 2772719, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/emBMW.jpg?s=128&g=1", "display_name": "Adamantish", "link": "https://stackoverflow.com/users/2772719/adamantish"}, "edited": false, "score": 0, "creation_date": 1503520145, "post_id": 45846190, "comment_id": 78655691, "body": "Is there a particular reason for wanting an array of hashes rather than one hash? If you did the latter you would do without the labels but it would be fast searchable by ID and take up less memory."}], "answers": [{"tags": [], "owner": {"reputation": 1179, "user_id": 5565348, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ATj2l.jpg?s=128&g=1", "display_name": "Maksim Kalmykov", "link": "https://stackoverflow.com/users/5565348/maksim-kalmykov"}, "is_accepted": true, "score": 4, "last_activity_date": 1503511007, "last_edit_date": 1503511007, "creation_date": 1503510145, "answer_id": 45846223, "question_id": 45846190, "link": "https://stackoverflow.com/questions/45846190/combine-first-elements-of-multidimensional-array/45846223#45846223", "title": "Combine first elements of multidimensional array", "body": "<p>Try this:</p>\n\n<pre><code>records.group_by(&amp;:first).map do |id, records_for_id|\n  {\n     id: id,\n     count: records_for_id.sum(&amp;:last)\n  }\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 2, "creation_date": 1503510790, "post_id": 45846358, "comment_id": 78650817, "body": "<code>transform_values</code> requires Ruby 2.4+ (or Rails)"}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": false, "score": 3, "last_activity_date": 1503510917, "last_edit_date": 1503510917, "creation_date": 1503510606, "answer_id": 45846358, "question_id": 45846190, "link": "https://stackoverflow.com/questions/45846190/combine-first-elements-of-multidimensional-array/45846358#45846358", "title": "Combine first elements of multidimensional array", "body": "<p>If you're in Ruby 2.4+, you can use <a href=\"https://ruby-doc.org/core-2.4.1/Enumerable.html#method-i-group_by\" rel=\"nofollow noreferrer\"><code>group_by</code></a> followed by <a href=\"https://ruby-doc.org/core-2.4.1/Hash.html#method-i-transform_values\" rel=\"nofollow noreferrer\"><code>transform_values</code></a>:</p>\n\n<pre><code>records.group_by(&amp;:first) # =&gt; {1=&gt;[[1, 10], [1, 30]], 4=&gt;[[4, 10], [4, 100]], 5=&gt;[[5, 45]]}\n\nrecords.group_by(&amp;:first).transform_values do |values|\n  values.sum(&amp;:last)\nend # =&gt; {1=&gt;40, 4=&gt;110, 5=&gt;45}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1503513602, "creation_date": 1503513602, "answer_id": 45847171, "question_id": 45846190, "link": "https://stackoverflow.com/questions/45846190/combine-first-elements-of-multidimensional-array/45847171#45847171", "title": "Combine first elements of multidimensional array", "body": "<pre><code>records\n.each_with_object(Hash.new(0)){|(k, v), h| h.merge!(k =&gt; v){|_, v1, v2| v1 + v2}}\n# =&gt; {1=&gt;40, 4=&gt;110, 5=&gt;45}\n\nrecords\n.each_with_object(Hash.new(0)){|(k, v), h| h.merge!(k =&gt; v){|_, v1, v2| v1 + v2}}\n.map{|k, v| {id: k, count: v}}\n# =&gt; [{:id=&gt;1, :count=&gt;40}, {:id=&gt;4, :count=&gt;110}, {:id=&gt;5, :count=&gt;45}]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1500, "user_id": 2772719, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/emBMW.jpg?s=128&g=1", "display_name": "Adamantish", "link": "https://stackoverflow.com/users/2772719/adamantish"}, "edited": false, "score": 1, "creation_date": 1503519863, "post_id": 45847433, "comment_id": 78655547, "body": "Why would you assume he/she had any choice about the source data? I would assume this array of arrays came from something like a text file parser."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 1500, "user_id": 2772719, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/emBMW.jpg?s=128&g=1", "display_name": "Adamantish", "link": "https://stackoverflow.com/users/2772719/adamantish"}, "edited": false, "score": 0, "creation_date": 1535616424, "post_id": 45847433, "comment_id": 91134014, "body": "Then the OP can convert it to a proper object model at the place where it enters the system."}, {"owner": {"reputation": 1500, "user_id": 2772719, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/emBMW.jpg?s=128&g=1", "display_name": "Adamantish", "link": "https://stackoverflow.com/users/2772719/adamantish"}, "edited": false, "score": 0, "creation_date": 1535627127, "post_id": 45847433, "comment_id": 91140901, "body": "Yes but do you genuinely think your answer is a wiser choice than the simple accepted answer? This is a question of philosophy. Mine is that no philosophy suits all problem domains. If this part of the code is business-logic rich and likely to be revisited a lot and keep growing in complexity then a purist OOP approach becomes justified."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 0, "last_activity_date": 1585803569, "last_edit_date": 1585803569, "creation_date": 1503514540, "answer_id": 45847433, "question_id": 45846190, "link": "https://stackoverflow.com/questions/45846190/combine-first-elements-of-multidimensional-array/45847433#45847433", "title": "Combine first elements of multidimensional array", "body": "<p>You <em>don't</em> have an array of product IDs and Quantities. You have an array of arrays of integers. The easiest way to deal with this array of arrays of integers is to not have an array of arrays of integers but an <code>Order</code>:</p>\n\n<pre><code>class Product\n  def to_s; 'Some Product' end\n  alias_method :inspect, :to_s\nend\n\nclass LineItem\n  attr_reader :product, :count\n\n  def initialize(product, count)\n    self.product, self.count = product, count\n  end\n\n  def to_s; \"#{count} x #{product}\" end\n  alias_method :inspect, :to_s\n\n  private\n\n  attr_writer :product, :count\nend\n\nclass Order\n  include Enumerable\n\n  def initialize(*line_items)\n    self.line_items = line_items\n  end\n\n  def each(&amp;blk) line_items.each(&amp;blk) end\n\n  def items\n    group_by(&amp;:product).map {|product, line_items| LineItem.new(product, line_items.sum(&amp;:count)) }\n  end\n\n  def to_s; line_items.map(&amp;:to_s).join(', ') end\n  alias_method :inspect, :to_s\n\n  private\n\n  attr_accessor :line_items\nend\n</code></pre>\n\n<p>Now, assuming that you receive your data in the form of an <code>Order</code>, instead of an array of arrays of integers, like this:</p>\n\n<pre><code>product1 = Product.new\nproduct4 = Product.new\nproduct5 = Product.new\n\norder = Order.new(\n  LineItem.new(product1, 10), \n  LineItem.new(product1, 30), \n  LineItem.new(product4, 10), \n  LineItem.new(product4, 100), \n  LineItem.new(product5, 45)\n)\n</code></pre>\n\n<p>All you need to do is:</p>\n\n<pre><code>order.items\n#=&gt; [40 x Some Product, 110 x Some Product, 45 x Some Product]\n</code></pre>\n\n<p>The bottom line is: Ruby is an object-oriented language, not an array-of-arrays-of-integers-oriented language, if you use rich objects instead of arrays of arrays of integers, your problem will become much simpler.</p>\n\n<p>Note: I used order processing as an example. If your problem domain is warehouse management or something else, there will be a similar solution.</p>\n"}], "owner": {"reputation": 308, "user_id": 903184, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a295bf97635b9db270676214ed224833?s=128&d=identicon&r=PG", "display_name": "PDD", "link": "https://stackoverflow.com/users/903184/pdd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 261, "favorite_count": 0, "accepted_answer_id": 45846223, "answer_count": 4, "score": 2, "last_activity_date": 1585803569, "creation_date": 1503510020, "last_edit_date": 1503511661, "question_id": 45846190, "link": "https://stackoverflow.com/questions/45846190/combine-first-elements-of-multidimensional-array", "title": "Combine first elements of multidimensional array", "body": "<p>Let's say I have an array of <strong>product IDs</strong> and <strong>Quantities</strong>, like this:</p>\n\n<pre><code>records = [[1, 10], [1, 30], [4, 10], [4, 100], [5, 45]]\n</code></pre>\n\n<p>What's the easiest/most efficient way in <strong>Ruby</strong> to achieve a hash of the combined products and quantities, like this?</p>\n\n<pre><code>products_needed = [{id: 1, count:40}, {id: 4, count: 110}, {id:5, count:45}]\n</code></pre>\n"}, {"tags": ["ruby", "xml", "nokogiri"], "comments": [{"owner": {"reputation": 982, "user_id": 5593651, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b3d52652da756a37015aa16befd6d620?s=128&d=identicon&r=PG&f=1", "display_name": "TheCog", "link": "https://stackoverflow.com/users/5593651/thecog"}, "edited": false, "score": 1, "creation_date": 1503510957, "post_id": 45846181, "comment_id": 78650922, "body": "Ok, what have you tried?"}], "answers": [{"tags": [], "owner": {"reputation": 307, "user_id": 3985538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mP4Mk.jpg?s=128&g=1", "display_name": "Nawshad Rehan Rasha", "link": "https://stackoverflow.com/users/3985538/nawshad-rehan-rasha"}, "is_accepted": false, "score": 0, "last_activity_date": 1510567704, "creation_date": 1510567704, "answer_id": 47261756, "question_id": 45846181, "link": "https://stackoverflow.com/questions/45846181/get-xml-attributes-and-values-using-ruby/47261756#47261756", "title": "Get xml attributes and values using ruby", "body": "<p>First save the xml as <code>test.xml</code> in the same directory of this script and then run this-</p>\n\n<pre><code>require 'nokogiri'\n\nFile.foreach(File.open(\"test.xml\")) do |line|\n  if /Attr/.match(line)\n    print line.split('name=')[-1].split('\"')[1] + \":\" + line.split('value=')[1].split('\"')[1] + \", \"\n  end\nend\n</code></pre>\n\n<p>This will give the expected result as- <code>class:icon-pctgrm p-01_g, title:new,</code></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8371567"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 164, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1510567704, "creation_date": 1503509996, "last_edit_date": 1510557914, "question_id": 45846181, "link": "https://stackoverflow.com/questions/45846181/get-xml-attributes-and-values-using-ruby", "title": "Get xml attributes and values using ruby", "body": "<p>I am using nokogiri library in ruby to parse a webpage. I am getting the XML result as: </p>\n\n<pre><code>#&lt;Nokogiri::XML::Element:0x1399140 name=\"p\" children=[#&lt;Nokogiri::XML::Text:0x1398264 \"\\n\"&gt;, \n#&lt;Nokogiri::XML::Element:0x1395d50 name=\"i\" attributes=[#&lt;Nokogiri::XML::Attr:0x1395cb4 name=\"class\" value=\"icon-pctgrm p-01_g\"&gt;,\n#&lt;Nokogiri::XML::Attr:0x1395ca8 name=\"title\" value=\"new\"&gt;]&gt;,\n#&lt;Nokogiri::XML::Text:0x1394e20 \"\\n\"&gt;]&gt; \n</code></pre>\n\n<p>From this result I need to get the final result as <code>class:icon-pctgrm p-01_g, title:new</code></p>\n"}, {"tags": ["ruby", "methods"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1503510696, "post_id": 45846069, "comment_id": 78650754, "body": "Related: <a href=\"https://stackoverflow.com/questions/23695653/can-you-supply-arguments-to-the-mapmethod-syntax-in-ruby?rq=1\" title=\"can you supply arguments to the mapmethod syntax in ruby\">stackoverflow.com/questions/23695653/&hellip;</a>"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1503511519, "post_id": 45846069, "comment_id": 78651251, "body": "<code>[1].map &amp;method(:puts)</code> is passing <code>1</code> as an argument already. it&#39;s not baked into the syntax to pass additional args, but you can use higher-order functions or zip."}], "owner": {"reputation": 59, "user_id": 5046608, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/718c01b406791d1b6cbaf2e5e8b66c80?s=128&d=identicon&r=PG&f=1", "display_name": "snavien", "link": "https://stackoverflow.com/users/5046608/snavien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "closed_date": 1503510763, "answer_count": 0, "score": 0, "last_activity_date": 1503509664, "creation_date": 1503509664, "question_id": 45846069, "link": "https://stackoverflow.com/questions/45846069/can-you-pass-arguments-to-the-method-in-methodmethod-name-in-ruby", "closed_reason": "Duplicate", "title": "Can you pass arguments to the method in `&amp;method(:method_ name)` in ruby?", "body": "<p>After reading: <a href=\"https://stackoverflow.com/questions/45013455/what-does-methodmethod-name-mean-in-ruby\">What does `&amp;method(:method_ name)` mean in ruby?</a>, I somewhat understand you can pass methods into the &amp;method but is it possible to pass arguments into, in this case, method_name? </p>\n"}, {"tags": ["ruby", "capybara", "rake", "rake-test", "ruby-test"], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 3738680, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/98f6fc87c880d030a52563f3ff271d2a?s=128&d=identicon&r=PG&f=1", "display_name": "Rajesh", "link": "https://stackoverflow.com/users/3738680/rajesh"}, "edited": false, "score": 0, "creation_date": 1503510189, "post_id": 45846151, "comment_id": 78650432, "body": "I don&#39; want to use rspec. I would like to run with rake command."}, {"owner": {"reputation": 31, "user_id": 8495785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LFaAh.jpg?s=128&g=1", "display_name": "Ryan Workman", "link": "https://stackoverflow.com/users/8495785/ryan-workman"}, "reply_to_user": {"reputation": 109, "user_id": 3738680, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/98f6fc87c880d030a52563f3ff271d2a?s=128&d=identicon&r=PG&f=1", "display_name": "Rajesh", "link": "https://stackoverflow.com/users/3738680/rajesh"}, "edited": false, "score": 0, "creation_date": 1503614515, "post_id": 45846151, "comment_id": 78702781, "body": "I understand. I assumed you were using rspec considering the file is called *_spec.rb. What test suite are you using? If it is rspec, it should read the line or tag the same as running the rspec command. It really depends on how the Rakefile is written and how your rake task is written. Rake shouldn&#39;t be doing anything more than just calling the rspec on a given directory or set of files."}], "tags": [], "owner": {"reputation": 31, "user_id": 8495785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LFaAh.jpg?s=128&g=1", "display_name": "Ryan Workman", "link": "https://stackoverflow.com/users/8495785/ryan-workman"}, "is_accepted": false, "score": 1, "last_activity_date": 1503509902, "creation_date": 1503509902, "answer_id": 45846151, "question_id": 45845974, "link": "https://stackoverflow.com/questions/45845974/is-there-any-way-to-run-a-single-test-in-ruby-under-spec-features-abc-spec-rb-h/45846151#45846151", "title": "Is there any way to run a single test in ruby under spec/features/abc_spec.rb &#39;header details&#39;?", "body": "<p>Since you're using rspec, there are a few ways to run a single test.\nFirst, you can just specify the line of the test <code>bundle exec rspec ./spec/features/abc_spec.rb:xx</code> where xx represents the line number of 'header details'.\nOR\nYou can create tags which is spelled out <a href=\"https://relishapp.com/rspec/rspec-core/v/2-3/docs/command-line/tag-option\" rel=\"nofollow noreferrer\">here</a> in the Rspec docs.</p>\n"}], "owner": {"reputation": 109, "user_id": 3738680, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/98f6fc87c880d030a52563f3ff271d2a?s=128&d=identicon&r=PG&f=1", "display_name": "Rajesh", "link": "https://stackoverflow.com/users/3738680/rajesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503510032, "creation_date": 1503509303, "last_edit_date": 1503510032, "question_id": 45845974, "link": "https://stackoverflow.com/questions/45845974/is-there-any-way-to-run-a-single-test-in-ruby-under-spec-features-abc-spec-rb-h", "title": "Is there any way to run a single test in ruby under spec/features/abc_spec.rb &#39;header details&#39;?", "body": "<p>Is there any way to run a single test in ruby under spec/features/abc_spec.rb 'header details' ?\nEx:</p>\n\n<pre><code>rake test:features spec/features/abc_spec.rb 'header details'\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1503514684, "post_id": 45845577, "comment_id": 78653010, "body": "Your question is unclear. What are &quot;varieties&quot;? What is a &quot;substitution string&quot;? What does it mean that &quot;varieties defind is behind substitution string&quot;? What trouble do you have with your code? Do you get an error message? What is the error message? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ? Is the behavior you are observing not the desired behavior? What is the desired behavior and why, what is the observed behavior, and in what way do they differ?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1503514704, "post_id": 45845577, "comment_id": 78653023, "body": "Can you provide a <i>precise</i> specification of what it is that you want to happen, including any and all rules, exceptions from those rules, corner cases, special cases, boundary cases, and edge cases? Can you provide sample inputs and outputs demonstrating what you expect to happen, both in normal cases, and in all the exceptions, corner cases, special cases, boundary cases, and edge cases?"}], "answers": [{"tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": false, "score": 1, "last_activity_date": 1503508408, "last_edit_date": 1503508408, "creation_date": 1503508049, "answer_id": 45845627, "question_id": 45845577, "link": "https://stackoverflow.com/questions/45845577/in-ruby-how-can-i-define-a-string-with-interpolated-variables-before-those-vari/45845627#45845627", "title": "In Ruby, how can I define a string with interpolated variables before those variables are defined?", "body": "<p>In order to evaluate all between <code>#{...}</code> as Ruby code you must use double quotes, otherwise it'd just be printed as a commong String. And I guess you want to return something like <code>'Hi,roy,your order total price is 135'</code>, so, you need to create the name, price and count variables before, because if you don't do it then you'll get an <code>undefined local variable or method 'variable' for main:Object</code> error, so you could try:</p>\n\n<pre><code>name  = 'roy'\nprice = 13.5\ncount = 10\ntips  = \"Hi,#{name},your order total price is #{price*count}\"\nputs tips\n#\u00a0Hi,roy,your order total price is 135.0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 145, "user_id": 7457255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b4868e49dc45e8ee530110f2c86d79c?s=128&d=identicon&r=PG&f=1", "display_name": "Medvedu", "link": "https://stackoverflow.com/users/7457255/medvedu"}, "is_accepted": false, "score": 1, "last_activity_date": 1504011314, "last_edit_date": 1504011314, "creation_date": 1503587254, "answer_id": 45865087, "question_id": 45845577, "link": "https://stackoverflow.com/questions/45845577/in-ruby-how-can-i-define-a-string-with-interpolated-variables-before-those-vari/45865087#45865087", "title": "In Ruby, how can I define a string with interpolated variables before those variables are defined?", "body": "<p>For your case you can use <code>late interpolation</code>:</p>\n\n<pre><code>tips = 'Hi, %{name},your order total price is %{price}'\nname = 'roy'\nprice = 13.5\ncount = 10\ntips % {name: name, price: price * count}\n# =&gt; \"Hi,roy,your order total price is 135\"\n</code></pre>\n\n<p>Link to documentation: <a href=\"https://ruby-doc.org/core-2.4.1/String.html#method-i-25\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.4.1/String.html#method-i-25</a></p>\n"}], "owner": {"reputation": 9, "user_id": 2593721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fde2ad431f2ad9c12be73fcdbc4e942?s=128&d=identicon&r=PG", "display_name": "Roy", "link": "https://stackoverflow.com/users/2593721/roy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1504011314, "creation_date": 1503507878, "last_edit_date": 1503528533, "question_id": 45845577, "link": "https://stackoverflow.com/questions/45845577/in-ruby-how-can-i-define-a-string-with-interpolated-variables-before-those-vari", "title": "In Ruby, how can I define a string with interpolated variables before those variables are defined?", "body": "<p>In Ruby, how can I define a string with interpolated variables before those variables are defined? </p>\n\n<p>What do I need to do to perform the interpolation once those variables have values assigned?</p>\n\n<pre><code>tips = 'Hi,#{name},your order total price is #{price*count}'\nname = 'roy'\nprice = 13.5\ncount = 10\ntips.xxx = 'Hi,roy,your order total price is 135'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "mailer", "scaffold"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1503503635, "post_id": 45844322, "comment_id": 78646614, "body": "Do you have <code>mailer.html.erb</code> in any of app folders?"}, {"owner": {"reputation": 11, "user_id": 8507240, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155715242032566/picture?type=large", "display_name": "Donato Tovar", "link": "https://stackoverflow.com/users/8507240/donato-tovar"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1503503828, "post_id": 45844322, "comment_id": 78646772, "body": "in views/layout"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1503504071, "post_id": 45844322, "comment_id": 78646936, "body": "Can you post the full error stacktrace in the question?"}, {"owner": {"reputation": 11, "user_id": 8507240, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155715242032566/picture?type=large", "display_name": "Donato Tovar", "link": "https://stackoverflow.com/users/8507240/donato-tovar"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1503504228, "post_id": 45844322, "comment_id": 78647043, "body": "That is the full error i have."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8507240, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155715242032566/picture?type=large", "display_name": "Donato Tovar", "link": "https://stackoverflow.com/users/8507240/donato-tovar"}, "edited": false, "score": 0, "creation_date": 1503503793, "post_id": 45844396, "comment_id": 78646742, "body": "i have one in views/layout, I have to make another in app/mailer?"}, {"owner": {"reputation": 11, "user_id": 8507240, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155715242032566/picture?type=large", "display_name": "Donato Tovar", "link": "https://stackoverflow.com/users/8507240/donato-tovar"}, "edited": false, "score": 0, "creation_date": 1503504253, "post_id": 45844396, "comment_id": 78647067, "body": "&lt;!DOCTYPE html&gt; &lt;html&gt;   &lt;head&gt;     &lt;title&gt;Prueba&lt;/title&gt;     &lt;%= csrf_meta_tags %&gt;      &lt;%= stylesheet_link_tag    &#39;application&#39;, media: &#39;all&#39;, &#39;data-turbolinks-track&#39;: &#39;reload&#39; %&gt;     &lt;%= javascript_include_tag &#39;application&#39;, &#39;data-turbolinks-track&#39;: &#39;reload&#39; %&gt;   &lt;/head&gt;    &lt;body&gt;     &lt;h1&gt;Hello &lt;%= @user.email %&gt; &lt;/h1&gt;   &lt;/body&gt; &lt;/html&gt; That is the code i have in the .html.erb"}, {"owner": {"reputation": 10770, "user_id": 381874, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/k7VRE.jpg?s=128&g=1", "display_name": "Sachin R", "link": "https://stackoverflow.com/users/381874/sachin-r"}, "reply_to_user": {"reputation": 11, "user_id": 8507240, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155715242032566/picture?type=large", "display_name": "Donato Tovar", "link": "https://stackoverflow.com/users/8507240/donato-tovar"}, "edited": false, "score": 0, "creation_date": 1503504455, "post_id": 45844396, "comment_id": 78647208, "body": "That is your application_mailer layout file but you need another one app/views/application_mailers/mailer.html.erb"}, {"owner": {"reputation": 11, "user_id": 8507240, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155715242032566/picture?type=large", "display_name": "Donato Tovar", "link": "https://stackoverflow.com/users/8507240/donato-tovar"}, "edited": false, "score": 0, "creation_date": 1503504701, "post_id": 45844396, "comment_id": 78647348, "body": "I also have one with this code. &lt;!DOCTYPE html&gt; &lt;html&gt;   &lt;head&gt;     &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;     &lt;style&gt;       /* Email styles need to be inline */     &lt;/style&gt;   &lt;/head&gt;    &lt;body&gt;     &lt;%= yield %&gt;     &lt;h1&gt;Hello &lt;%= @user.email %&gt; &lt;/h1&gt;   &lt;/body&gt; &lt;/html&gt;"}], "tags": [], "owner": {"reputation": 10770, "user_id": 381874, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/k7VRE.jpg?s=128&g=1", "display_name": "Sachin R", "link": "https://stackoverflow.com/users/381874/sachin-r"}, "is_accepted": true, "score": 0, "last_activity_date": 1503503887, "last_edit_date": 1503503887, "creation_date": 1503503708, "answer_id": 45844396, "question_id": 45844322, "link": "https://stackoverflow.com/questions/45844322/missing-template-application-mailer-mailer-with-mailer-searched-in-applic/45844396#45844396", "title": "Missing template application_mailer/mailer with &quot;mailer&quot;. Searched in: * &quot;application_mailer&quot;", "body": "<p>create <code>mailer.html.erb</code>\n under <code>app/views/application_mailers</code></p>\n\n<p>mailer action need view to render so it is searching for application_mailers/mailer.html.erb which is missing I think</p>\n"}], "owner": {"reputation": 11, "user_id": 8507240, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155715242032566/picture?type=large", "display_name": "Donato Tovar", "link": "https://stackoverflow.com/users/8507240/donato-tovar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1145, "favorite_count": 0, "accepted_answer_id": 45844396, "answer_count": 1, "score": 0, "last_activity_date": 1503503887, "creation_date": 1503503483, "last_edit_date": 1503503581, "question_id": 45844322, "link": "https://stackoverflow.com/questions/45844322/missing-template-application-mailer-mailer-with-mailer-searched-in-applic", "title": "Missing template application_mailer/mailer with &quot;mailer&quot;. Searched in: * &quot;application_mailer&quot;", "body": "<p>i have to develop a mailer using ruby on rails and i keep getting that error, I don't know how to correct it, I have tried a lot of methods. This is my code </p>\n\n<pre><code>class ApplicationMailer &lt; ActionMailer::Base\n\n  layout 'application_mailer'\n\n  def mailer(user)\n    @user = user\n    mail to: user.email, subject: \"Welcome\"\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1019, "user_id": 5587988, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207118714582472/picture?type=large", "display_name": "DaudiHell", "link": "https://stackoverflow.com/users/5587988/daudihell"}, "edited": false, "score": 0, "creation_date": 1503502381, "post_id": 45843876, "comment_id": 78645739, "body": "thank you @Pavan, I changed it, now the error is gone but I get this <code>Error: Paper Not created!!</code> messages after I hit the submit."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 1019, "user_id": 5587988, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207118714582472/picture?type=large", "display_name": "DaudiHell", "link": "https://stackoverflow.com/users/5587988/daudihell"}, "edited": false, "score": 0, "creation_date": 1503502530, "post_id": 45843876, "comment_id": 78645849, "body": "@DaudiHell Shouldn&#39;t <code>@newPaper</code> should be <code>@paper</code>? Try changing it to <code>@paper</code>"}, {"owner": {"reputation": 1019, "user_id": 5587988, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207118714582472/picture?type=large", "display_name": "DaudiHell", "link": "https://stackoverflow.com/users/5587988/daudihell"}, "edited": false, "score": 0, "creation_date": 1503502594, "post_id": 45843876, "comment_id": 78645889, "body": "yes, I did that, it works that way but I get <code>Error: Paper Not created!!</code> messages after I hit the submit."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 1019, "user_id": 5587988, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207118714582472/picture?type=large", "display_name": "DaudiHell", "link": "https://stackoverflow.com/users/5587988/daudihell"}, "edited": false, "score": 0, "creation_date": 1503502685, "post_id": 45843876, "comment_id": 78645953, "body": "@DaudiHell It failed to save so the else block is triggered. Try <code>if @paper.save!</code>, you&#39;d see are there any validation failures that caused the save to fail"}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": true, "score": 1, "last_activity_date": 1503502570, "last_edit_date": 1503502570, "creation_date": 1503502181, "answer_id": 45843876, "question_id": 45843621, "link": "https://stackoverflow.com/questions/45843621/undefined-local-variable-or-method-f-on-ruby-on-rails/45843876#45843876", "title": "&quot;undefined local variable or method `f&#39; &quot; on ruby on rails", "body": "<blockquote>\n  <p>undefined local variable or method 'f' for\n  &lt;PapersController:0x007fa790b51190></p>\n</blockquote>\n\n<p>The error triggers in this line</p>\n\n<pre><code>f.html { redirect_to \"\", notice: \"Error: Paper Not created!!\"}\n</code></pre>\n\n<p>as you not defined <code>f</code> in the controller method.</p>\n\n<p>It seems you are trying write your <code>create</code> method using <code>respond_to</code>, then the create method should look like below</p>\n\n<pre><code>def create \n  @paper = Paper.new(paper_params)\n  @paper.user_id = current_user.id\n  respond_to do |f|\n    if (@paper.save) #not @newPaper\n      f.html {redirect_to transaction_path(current_user), :notice =&gt; \"Post has been saved successfully.\"}\n    else\n      f.html { redirect_to \"\", notice: \"Error: Paper Not created!!\"}\n     end\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "is_accepted": false, "score": 0, "last_activity_date": 1503502467, "creation_date": 1503502467, "answer_id": 45843982, "question_id": 45843621, "link": "https://stackoverflow.com/questions/45843621/undefined-local-variable-or-method-f-on-ruby-on-rails/45843982#45843982", "title": "&quot;undefined local variable or method `f&#39; &quot; on ruby on rails", "body": "<p>The <code>f</code> in the two contexts you show is completely unrelated. Views and controllers share attributes (for a given request) but not local variables, and further your <code>f</code> variable is limited to the <code>form_for</code> block (from the <code>do</code> to the matching <code>end</code>), it has nothing at all to do with the <code>PapersController#create</code> method.</p>\n\n<p><code>f.html</code> could be a respond_to, but thats not really needed if you are <strong>only</strong> supporting HTML.</p>\n\n<p>It is not really clear what you intend <code>f.html { redirect_to \"\", notice: \"Error: Paper Not created!!\"}</code> since that is in a different controller entirely. If you just want to redirect somewhere, then just use <code>redirect_to</code> directly, drop the <code>f.html</code> thing.</p>\n\n<p>e.g.</p>\n\n<pre><code>redirect_to transaction_path(current_user), notice: \"Error: Paper Not created!!\"\n</code></pre>\n\n<p>If you want to display errors and keep the original form values then normally, you would have the form (normally an action called <code>new</code>) and the <code>create</code> in the same controller, and reuse the view.</p>\n\n<pre><code>class PapersController\n  def new\n    @paper = Paper.new\n    render\n  end\n  def create\n    @paper = Paper.new(paper_params)\n    @paper.user = current_user\n    if @paper.save\n      redirect_to transaction_path(current_user), notice: \"Post has been saved successfully.\"\n    else\n      render \"new\" # form_for will keep values from @paper, can also display @paper.errors\n    end\n  end\nend\n</code></pre>\n\n<p>Allthough it is of course possible to render the same form/view from multiple controllers with full errors, etc. if you wish.</p>\n"}], "owner": {"reputation": 1019, "user_id": 5587988, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207118714582472/picture?type=large", "display_name": "DaudiHell", "link": "https://stackoverflow.com/users/5587988/daudihell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2023, "favorite_count": 0, "accepted_answer_id": 45843876, "answer_count": 2, "score": 0, "last_activity_date": 1503502675, "creation_date": 1503501453, "last_edit_date": 1503502675, "question_id": 45843621, "link": "https://stackoverflow.com/questions/45843621/undefined-local-variable-or-method-f-on-ruby-on-rails", "title": "&quot;undefined local variable or method `f&#39; &quot; on ruby on rails", "body": "<p>In my app I'm rendering the partial below in the <code>views/transactions/show.html.erb</code>, but when I hit <code>submit</code> I get this error:</p>\n\n<blockquote>\n  <p><code>undefined local variable or method 'f' for #&lt;PapersController:0x007fa790b51190&gt;</code> </p>\n</blockquote>\n\n<p>In this line of the controller: </p>\n\n<p><code>f.html { redirect_to \"\", notice: \"Error: Paper Not created!!\"}</code>:</p>\n\n<pre><code>&lt;%= form_for ( @newPaper ) do |f| %&gt;\n\n&lt;div class=\"field\"&gt;\n    &lt;%= f.label :date, class: 'form-text'%&gt;\n    &lt;%= f.date_select :date %&gt;\n  &lt;/div&gt;\n&lt;br /&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :paper_type %&gt;\n    &lt;%= f.select(:paper_type, options_for_select(Paper::PAPER_TYPES)) %&gt;\n  &lt;/div&gt;\n\n  &lt;br&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :paper_weight %&gt; :&lt;%= f.number_field :paper_weight, class: 'form-fields'  %&gt; -kg.\n  &lt;/div&gt;\n &lt;br /&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :env_paper_weight %&gt; :\n    &lt;%= f.number_field :env_paper_weight, class: 'form-fields' %&gt;  -kg.\n  &lt;/div&gt;\n  &lt;br /&gt;\n\n&lt;br&gt;\n\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit \"Add Paper\" %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<h3>papers_controller.rb</h3>\n\n<pre><code>class PapersController &lt; ApplicationController\n\nbefore_action :set_paper, only: [:edit, :update, :show, :destroy]\nbefore_action :paper_owner, only: [ :edit, :update, :destroy]\n\ndef index \n\n\n  all_paper_type_values = Paper.all.pluck(:paper_type).uniq\n   @data_for_chart = all_paper_type_values.map do |paper_type|\n  { name: paper_type, data: Paper.where(paper_type: paper_type).group_by_month(:created_at).sum(:paper_weight)}\n  end\n\n    @pappi = Paper.all\n\n    @newPaper = Paper.new\n\n\nend\n\ndef new\n    @paper = Paper.new\nend\n\ndef create \n\n    @paper = Paper.new(paper_params)\n    @paper.user_id = current_user.id\n\n        if (@newPaper.save)\n            redirect_to transaction_path(current_user), :notice =&gt; \"Post has been saved successfully.\"\n        else\n            f.html { redirect_to \"\", notice: \"Error: Paper Not created!!\"}\n        end \n\nend\n\n\n\n\ndef update\n        if @paper.update(paper_params)\n        flash[:success] = \"Line was successfully updated\"\n        redirect_to papers_path(@paper)\n    else\n        render 'edit'\n    end     \n\nend\n\ndef destroy\n    @paper.destroy\n    flash[:danger] = \"Line was successfully destroyed\"\n    redirect_to transaction_path(current_user) \nend\n\n\nprivate\n\n    def set_paper\n        @paper = Paper.find(params[:id])\n    end\n\ndef paper_params\n    params.require(:paper).permit(:user_id, :paper_type, :date, :paper_weight, :env_paper_weight)\n\nend\n\ndef paper_owner\n            unless @paper.user_id == current_user.id\n                flash[:notice] = 'Access denied as you are not owner of this Job'\n                redirect_to papers_path\n            end\nend\n\n\nend\n</code></pre>\n\n<h3>transaction_controller.rb</h3>\n\n<pre><code>class TransactionsController &lt; ApplicationController\n\ndef new\n    @paper = current_user.papers.build\n    @kwst = current_user.kwsts.build\n    @hwater = current_user.hwaters.build\n    @transport = current_user.transports.build\n\n\nend\n\ndef show\n\n    @user = User.find(params[:id])\n    @username = params[:id]\n\n    @newPaper = Paper.new\n    @newKwst = Kwst.new\n    @newHwater = Hwater.new \n    @newTransport = Transport.new\n\n    @papers = current_user.papers.order(created_at: :desc).limit(5)\n    @kwsts = current_user.kwsts.order(created_at: :desc)\n    @hwaters = current_user.hwaters.order(created_at: :desc)\n    @transports = current_user.transports.order(created_at: :desc)\n\nend    \nend\n</code></pre>\n\n<p>I've changed the:</p>\n\n<pre><code>&lt;%= form_for ( @newPaper ) do |f| %&gt;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>&lt;%= form_for Paper.new do |f| %&gt;\n</code></pre>\n\n<p>In the <code>paper_controller.rb</code> but still get the error.  I'm kind of lost here, can someone help me?</p>\n"}, {"tags": ["ruby", "ember.js", "paypal"], "answers": [{"tags": [], "owner": {"reputation": 323, "user_id": 2287089, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/16bf284275e459bf5ffd59927f9dc7a5?s=128&d=identicon&r=PG", "display_name": "ruben1691", "link": "https://stackoverflow.com/users/2287089/ruben1691"}, "is_accepted": false, "score": 0, "last_activity_date": 1503583487, "creation_date": 1503583487, "answer_id": 45863754, "question_id": 45843379, "link": "https://stackoverflow.com/questions/45843379/how-to-pay-with-credit-debit-card-in-paypal-checkout/45863754#45863754", "title": "How to pay with credit / debit card in paypal checkout?", "body": "<p>The easiest way is to use a third-party provider, such as Stripe. Check out their docs <a href=\"https://stripe.com/docs\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 23, "user_id": 7469185, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/30fd5efafd87146697ecfc5ec6df3196?s=128&d=identicon&r=PG&f=1", "display_name": "Omar Osama", "link": "https://stackoverflow.com/users/7469185/omar-osama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503583487, "creation_date": 1503500848, "last_edit_date": 1503516169, "question_id": 45843379, "link": "https://stackoverflow.com/questions/45843379/how-to-pay-with-credit-debit-card-in-paypal-checkout", "title": "How to pay with credit / debit card in paypal checkout?", "body": "<p>I successfully integrated Paypal as payment method in my website through APIs. Here is the code:-\nfrontend:</p>\n\n<pre><code>paypal.Button.render({\n    env: self.get('paypalEnv'), // 'production' Or 'sandbox'\n    commit: true, // Show a 'Pay Now' button\n    payment: function() {\n        return paypal.request.post(self.get('creationUrl')).then(function(data) {\n            return data.id;\n        });\n    },\n    onAuthorize: function(data) {\n        return paypal.request.post(self.get('executionUrl'), {\n            paymentID: data.paymentID,\n            payerID: data.payerID\n        }).then(function() {\n            // The payment is complete!\n            // You can now show a confirmation message to the customer\n        });\n    }\n}, '#paypal-button3');\n</code></pre>\n\n<p>backend:</p>\n\n<pre><code>module PortalPaypalPaymentService\n    def self.create_payment(request)\n        #debugger\n        price_in_egp = request.initial_price\n        output = CurrencyExchange.convert(price_in_egp*100, 'EGP', 'USD')\n        price_in_usd = (output.cents/100.0).round(2)\n        params = {\n            \"intent\": \"sale\",\n            \"redirect_urls\": {\n                \"return_url\": APP_CONFIG['paypal_return_url'],\n                \"cancel_url\": APP_CONFIG['paypal_cancel_url']\n            },\n            \"payer\": {\n                \"payment_method\": \"paypal\"\n            },\n            \"transactions\": [{\n                \"amount\": {\n                \"total\": price_in_usd,\n                \"currency\": \"USD\"\n                }\n            }]\n        }\n        response = send_request_post(PAYMENT_URL, params)\n        JSON.parse(response.body)[\"id\"]\n    end\n\n    def self.execute_payment(payment_id, payer_id)\n        params = {\n            payer_id: payer_id\n        }\n        response = send_request_post(PAYMENT_URL + '/' + payment_id + '/execute', params)\n        JSON.parse(response.body)\n    end\nend\n</code></pre>\n\n<p>This is working perfectly. However, I want to enable customer to pay via credit / debit cards. My question is How to enable that from frontend and backend?</p>\n"}, {"tags": ["ruby", "regex"], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1503512335, "post_id": 45843262, "comment_id": 78651743, "body": "It&#39;s perhaps worth mentioning that the hyphen should be put at the beginning or end of the character class when it is to be matched, as opposed to it being used to define a range. Consider <code>&quot;a-z&quot;[&#47;[:-^]&#47;] #=&gt; nil</code>, whereas <code>&quot;a-z&quot;[&#47;[-:^]&#47;] #=&gt; &quot;-&quot;</code> and <code>&quot;a-z&quot;[&#47;[:^-]&#47;] #=&gt; &quot;-&quot;</code>. This is because <code>&#39;-&#39; #=&gt; 45</code>, <code>&#39;:&#39;.ord =&gt; 58</code>, <code>&#39;^&#39;.ord #=&gt; 94</code> and <code>&#39;a&#39;.ord =&gt; 97</code>. Also, one can also get odd results when <code>&quot;-&quot;</code> denotes a <code>nil</code> range (<code>r = &#39;^&#39;..&#39;:&#39;; r.class #=&gt; Range; r.size #=&gt; nil</code>): <code>&quot;a-z&quot;[&#47;[^-:]&#47;] #=&gt; &#39;a&#39;</code>. (Wiktor, can you explain this last result?)"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1503681202, "post_id": 45843262, "comment_id": 78731908, "body": "@CarySwoveland: The <code>&#47;[^-:]&#47;</code> regex matches <code>a</code> in <code>a-z</code> string because the <a href=\"http://www.regular-expressions.info/charclass.html#negated\" rel=\"nofollow noreferrer\"><code>[^-:]</code> negated character class</a> matches any character other than a literal <code>-</code> and <code>:</code>. In other words, there is no range in this regex since the <code>-</code> is at the character class start (the start of the character class is after <code>[</code> (if it is positive) or after <code>[^</code> (if it is negated)."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1503684991, "post_id": 45843262, "comment_id": 78733911, "body": "Ha! I couldn&#39;t see the trees for the forest: I was thinking of the carat as simply a character used to construct my range. It makes more sense that an empty range raises an exception: <code>SyntaxError: empty range in char class</code>. Thanks."}], "tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 4, "last_activity_date": 1503500462, "creation_date": 1503500462, "answer_id": 45843262, "question_id": 45843199, "link": "https://stackoverflow.com/questions/45843199/ruby-regex-seems-to-not-see-a-dash/45843262#45843262", "title": "Ruby regex seems to not see a `dash`", "body": "<p>You may add <code>-</code> to the character class:</p>\n\n<pre><code>/^I verify ([\\w\\s-]+) table contains the following items on the page$/\n</code></pre>\n\n<p>See a <a href=\"http://rubular.com/r/18NhnBXcom\" rel=\"nofollow noreferrer\">Rubular test</a>.</p>\n\n<p>Or make it even more generic by using <code>.*?</code> to match any 0+ chars other than line break chars, as few as possible:</p>\n\n<pre><code>/^I verify (.*?) table contains the following items on the page$/\n</code></pre>\n\n<p>See <a href=\"http://rubular.com/r/ExHoEIyaKG\" rel=\"nofollow noreferrer\">another Rubular test</a>.</p>\n\n<p>Note that in Ruby, <code>^</code> and <code>$</code> match line boundaries. If you need to match the whole <em>string</em>, replace <code>^</code> with <code>\\A</code> and <code>$</code> with <code>\\z</code> anchors.</p>\n"}], "owner": {"reputation": 441, "user_id": 7183779, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/4b13433b71617c15d66286781e8ae218?s=128&d=identicon&r=PG&f=1", "display_name": "ssss", "link": "https://stackoverflow.com/users/7183779/ssss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1085, "favorite_count": 1, "accepted_answer_id": 45843262, "answer_count": 1, "score": 1, "last_activity_date": 1503500462, "creation_date": 1503500271, "question_id": 45843199, "link": "https://stackoverflow.com/questions/45843199/ruby-regex-seems-to-not-see-a-dash", "title": "Ruby regex seems to not see a `dash`", "body": "<p>Ruby code:  </p>\n\n<pre><code>Then /^I verify ([\\w\\s]+) table contains the following items on the page$/ do | page_table, table |\n.......\n</code></pre>\n\n<p>Test:</p>\n\n<pre><code>Then I verify Customer-Level Templates table contains the following items on the page\n</code></pre>\n\n<p>When i run the test, it says <code>Undefined step</code>. I guess somehow the dash character in <code>Customer-Level Templates</code> is being ignored by <code>([\\w\\s]+)</code>. What is the regex so it could grab the whole <code>Customer-Level Templates</code> ?</p>\n"}, {"tags": ["ruby", "sinatra"], "comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1503500162, "post_id": 45843032, "comment_id": 78644148, "body": "This could be an order-of-operations problem. Try doing <code>(wine.vintner.downcase ==      @wine.vintner.downcase) &amp;&amp; (wine.varietal.downcase ==      @wine.varietal.downcase) &amp;&amp; (wine.vintage == @wine.vintage)</code>."}, {"owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 0, "creation_date": 1503500214, "post_id": 45843032, "comment_id": 78644201, "body": "Are you using Active Record?"}, {"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1503500606, "post_id": 45843032, "comment_id": 78644473, "body": "Never used Sinatra, but does calling <code>erb :&#39;&#47;wines&#47;new&#39;</code> actually return from the method? looks like you call that and the continue on to <code>@wine.save</code> and <code>redirect</code> all the way at the bottom of the method outside all conditionals"}, {"owner": {"reputation": 119, "user_id": 8506721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/819e6095dcb06b48a323e21939acc5c2?s=128&d=identicon&r=PG&f=1", "display_name": "S Q", "link": "https://stackoverflow.com/users/8506721/s-q"}, "reply_to_user": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1503500848, "post_id": 45843032, "comment_id": 78644649, "body": "@SimpleLime you are correct! Thanks for catching that!!"}, {"owner": {"reputation": 119, "user_id": 8506721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/819e6095dcb06b48a323e21939acc5c2?s=128&d=identicon&r=PG&f=1", "display_name": "S Q", "link": "https://stackoverflow.com/users/8506721/s-q"}, "reply_to_user": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1503500947, "post_id": 45843032, "comment_id": 78644718, "body": "@moveson thanks, that would seem logical but it doesn&#39;t seem to have an effect. Thank you, though!"}, {"owner": {"reputation": 119, "user_id": 8506721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/819e6095dcb06b48a323e21939acc5c2?s=128&d=identicon&r=PG&f=1", "display_name": "S Q", "link": "https://stackoverflow.com/users/8506721/s-q"}, "reply_to_user": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 0, "creation_date": 1503500952, "post_id": 45843032, "comment_id": 78644724, "body": "@SaraTibbetts Yes, I am."}, {"owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 0, "creation_date": 1503512455, "post_id": 45843032, "comment_id": 78651809, "body": "Check out <code>find_or_create_by</code> <a href=\"https://apidock.com/rails/v4.0.2/ActiveRecord/Relation/find_or_create_by\" rel=\"nofollow noreferrer\">apidock.com/rails/v4.0.2/ActiveRecord/Relation/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 0, "last_activity_date": 1503501000, "creation_date": 1503501000, "answer_id": 45843447, "question_id": 45843032, "link": "https://stackoverflow.com/questions/45843032/detect-multiple-conditions/45843447#45843447", "title": "Detect multiple conditions", "body": "<p>As it currently is written the lines</p>\n\n<pre><code>@wine.save\nredirect to \"/wines\"\n</code></pre>\n\n<p>are outside all the conditionals at the very bottom of the block, so that code will run, even if the condition <code>params[:wine] == \"\"</code> is met, and in that case it will error out because <code>@wine</code> doesn't get set.</p>\n\n<p>Try moving that code into maybe the <code>elsif !params[:note][:name].empty?</code> branch and then it should only run when you need to create a new wine.</p>\n"}], "owner": {"reputation": 119, "user_id": 8506721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/819e6095dcb06b48a323e21939acc5c2?s=128&d=identicon&r=PG&f=1", "display_name": "S Q", "link": "https://stackoverflow.com/users/8506721/s-q"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 45843447, "answer_count": 1, "score": 0, "last_activity_date": 1503501000, "creation_date": 1503499788, "last_edit_date": 1503500725, "question_id": 45843032, "link": "https://stackoverflow.com/questions/45843032/detect-multiple-conditions", "title": "Detect multiple conditions", "body": "<p>I'm trying to create a simple wine web app with Sinatra. The keys within my Wine model are  \"vintner\", \"vintage\", and \"varietal\". Vintage is an integer. I also have a Note model for users to add in notes (currently separating by commas, will plan to get more robust later...). </p>\n\n<p>Here is my POST action within my WineController:</p>\n\n<pre><code>post '/wines' do\n  if params[:wine] == \"\"\n    erb :'wines/new'\n  else\n    @wine = current_user.wines.new(params[:wine])\n    @wines = current_user.wines\n\n    if @wines.detect{ |wine| wine.vintner.downcase == \n      @wine.vintner.downcase &amp;&amp; wine.varietal.downcase == \n      @wine.varietal.downcase &amp;&amp; wine.vintage == @wine.vintage }\n      flash[:message] = \"That wine is already in your cellar! Add another.\"\n      erb :'/wines/new'\n    elsif !params[:note][:name].empty?\n      params[:note][:name].split(\", \").each{ |user_note| @wine.notes &lt;&lt; \n        Note.find_or_create_by(:name =&gt; user_note) }\n    end\n  end\n\n  @wine.save\n  redirect to \"/wines\"\nend\n</code></pre>\n\n<p>What I'm trying to accomplish is to say \"if there is already a wine with that vintner, varietal, and vintage, don't create it and redirect back to the 'new' view with said message. Otherwise, add the notes to the that wine instance, save, and redirect to '/wines/index'\". </p>\n\n<p>Instead, though, the wine saves (the notes are not being saved, though) and I get redirected to '/wines/index' with said message. So, that's weird. </p>\n\n<p>My main question is, how can I detect (using detect or any other method) based on three or more criteria. Also, if anyone has any insight into what I'm doing wrong with my notes, I'd love to hear! Thank you!!</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 2, "last_activity_date": 1503494992, "creation_date": 1503494992, "answer_id": 45841167, "question_id": 45841080, "link": "https://stackoverflow.com/questions/45841080/undefined-method-and-false-class-error-in-ruby/45841167#45841167", "title": "Undefined method and False Class error in ruby", "body": "<p>Use <code>&amp;&amp;</code>, not <code>&amp;</code></p>\n\n<pre><code>if @amount &lt;= $remainingAmmount &amp;&amp; @amount &gt; 0\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8505754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5beae6e416d1e71263bc6cdf99d3e048?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Doe", "link": "https://stackoverflow.com/users/8505754/johnny-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 422, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1503499022, "creation_date": 1503494760, "last_edit_date": 1503499022, "question_id": 45841080, "link": "https://stackoverflow.com/questions/45841080/undefined-method-and-false-class-error-in-ruby", "title": "Undefined method and False Class error in ruby", "body": "<p>I was trying to make a restaurant management code on ruby. But it was showing me error in <code>getOrder</code> method. </p>\n\n<p>The error message was shown in the console is given below</p>\n\n<pre><code>\"main.rb:26:in `getOrder': undefined method `&gt;' for false:FalseClass (NoMethodError)                                                                                             \n    from main.rb:45:in `&lt;main&gt;' \"\n</code></pre>\n\n<p>My code is given below</p>\n\n<pre><code>#creating a class\nclass Hotel\n\n  # creating a local haah variable with the name of the items and amount\n\n  detailedMenu ={\"Pizza\"=&gt;100, \"FriedChicken\"=&gt;70, \"Burrito\" =&gt; 50}\n\n  #creating class (array) variable to store item and amount seperately\n  @@menus= detailedMenu.keys\n  @@amount= detailedMenu.values\n  puts  @@amount.at(1) \n\n  #initializatin method\n  def initialize(item,number)\n    @item=item\n    @amount= number\n\n  end\n\n\n  def getOrder()\n    #checking wheather the item is in item list or not\n    if @@menus.include?(@item)\n        a=@@menus.index(@item)\n        $remainingAmmount= @@amount.at(a)\n\n        #checking wheather the required amount of the item is available or not\n        if @amount&lt;= $remainingAmmount &amp; @amount&gt; 0\n            puts \" Your order has been placed successfuly \"\n            $remainingAmmount -=@amount\n            #@@amount.at(a)= $remainingAmmount\n        elsif @amount&lt;=0\n            puts \"Please enter a valid amount\"    \n        else\n            puts \"Sorry, we don't have that much #@item . You can try for a little less amount\"\n        end\n\n    else\n        puts \"We don't serve this item. Please choose from #@@menus\"\n    end\n  end\nend\n\n#creating new object\norder1 = Hotel.new(\"Pizza\" , 50)\n#calling the method\norder1.getOrder\n</code></pre>\n"}, {"tags": ["ruby", "fastlane"], "comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1503498328, "post_id": 45840991, "comment_id": 78642529, "body": "what is Fastfile?"}], "answers": [{"tags": [], "owner": {"reputation": 298, "user_id": 5346899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34e4fa802a18aa9fc7e30c00dac6ad8e?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Dahl", "link": "https://stackoverflow.com/users/5346899/michael-dahl"}, "is_accepted": false, "score": 0, "last_activity_date": 1503498510, "creation_date": 1503498510, "answer_id": 45842553, "question_id": 45840991, "link": "https://stackoverflow.com/questions/45840991/fastlane-cannot-load-file-by-require-command/45842553#45842553", "title": "Fastlane - Cannot load file by `require` command", "body": "<p>Try with</p>\n\n<pre><code>require_relative 'helper/match_helper'\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/a/3672608/5346899\">See here</a></p>\n"}], "owner": {"reputation": 1860, "user_id": 3733734, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/5L0bR.jpg?s=128&g=1", "display_name": "Nikita Ermolenko", "link": "https://stackoverflow.com/users/3733734/nikita-ermolenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 908, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1503498510, "creation_date": 1503494557, "question_id": 45840991, "link": "https://stackoverflow.com/questions/45840991/fastlane-cannot-load-file-by-require-command", "title": "Fastlane - Cannot load file by `require` command", "body": "<p>I'm trying to use a remote <code>Fastfile</code> using the <code>import_from_git</code> command. But in order to not have a mess, created a helper in another file. My problem is that <code>fastlane</code> correctly clones the main file, but then can't find a helper file.</p>\n\n<p>Fastfile:</p>\n\n<pre><code>import_from_git(\n    url: '[URL].git',\n    branch: 'refactoring',\n    path: 'RSBMatch.rb'\n)\n</code></pre>\n\n<p>RSBMatch.rb:</p>\n\n<pre><code>require 'helper/match_helper'\n\nfastlane_version \"1.47.0\"\n\ndefault_platform :ios\n\nplatform :ios do\n\n  lane :test_lane do\n    RSB::Test.hey\n  end\nend\n</code></pre>\n\n<p>match_helper.rb:</p>\n\n<pre><code>module RSB\n  module Test\n\n    def self.hey\n      puts 'Hello'\n    end\n\n  end\nend\n</code></pre>\n\n<p>Error: </p>\n\n<blockquote>\n  <p>require': cannot load such file -- helper/match_helper (LoadError)</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 1857435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/325e882c7ceecf8f2e3ba2d0c19e04ea?s=128&d=identicon&r=PG", "display_name": "Riccardo G.", "link": "https://stackoverflow.com/users/1857435/riccardo-g"}, "edited": false, "score": 0, "creation_date": 1503494603, "post_id": 45840975, "comment_id": 78639361, "body": "I assigned @current_user = User.find_by(id: session[:user_id]) in the login method"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 55, "user_id": 1857435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/325e882c7ceecf8f2e3ba2d0c19e04ea?s=128&d=identicon&r=PG", "display_name": "Riccardo G.", "link": "https://stackoverflow.com/users/1857435/riccardo-g"}, "edited": false, "score": 0, "creation_date": 1503494993, "post_id": 45840975, "comment_id": 78639691, "body": "Is <code>login</code> always called before you call <code>logged_in?</code>?"}, {"owner": {"reputation": 55, "user_id": 1857435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/325e882c7ceecf8f2e3ba2d0c19e04ea?s=128&d=identicon&r=PG", "display_name": "Riccardo G.", "link": "https://stackoverflow.com/users/1857435/riccardo-g"}, "edited": false, "score": 0, "creation_date": 1503495260, "post_id": 45840975, "comment_id": 78639952, "body": "No it isn&#39;t. I thought @current_user would be available because it is an instance variable.."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 55, "user_id": 1857435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/325e882c7ceecf8f2e3ba2d0c19e04ea?s=128&d=identicon&r=PG", "display_name": "Riccardo G.", "link": "https://stackoverflow.com/users/1857435/riccardo-g"}, "edited": false, "score": 0, "creation_date": 1503495335, "post_id": 45840975, "comment_id": 78639997, "body": "Read my answer again carefully."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1503494508, "creation_date": 1503494508, "answer_id": 45840975, "question_id": 45840843, "link": "https://stackoverflow.com/questions/45840843/chapter-8-2-current-user-or-current-user/45840975#45840975", "title": "Chapter 8.2 - @current_user or current_user", "body": "<p>If you don't ever call the <code>current_user</code> method, then <code>@current_user</code> will never be initialized (assigned a value). So whenever you refer to <code>@current_user</code>, it will be <code>nil</code>. In other words, <code>logged_in?</code>, or <code>!(@current_user.nil?)</code> will be <code>false</code>.</p>\n"}], "owner": {"reputation": 55, "user_id": 1857435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/325e882c7ceecf8f2e3ba2d0c19e04ea?s=128&d=identicon&r=PG", "display_name": "Riccardo G.", "link": "https://stackoverflow.com/users/1857435/riccardo-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503494827, "creation_date": 1503494185, "last_edit_date": 1503494827, "question_id": 45840843, "link": "https://stackoverflow.com/questions/45840843/chapter-8-2-current-user-or-current-user", "title": "Chapter 8.2 - @current_user or current_user", "body": "<p>I'm reading Michael Hartl's tutorial about RoR, chapter 8. I wrote these methods: </p>\n\n<pre><code>module SessionsHelper\n  def login(user)\n    session[:user_id] = user.id\n  end\n\n  def current_user\n    @current_user ||= User.find_by(id: session[:user_id])\n  end\n\n  def logged_in?\n    !current_user.nil?\n  end\nend\n</code></pre>\n\n<p>This code works fine. I tried to get rid of the <code>current_user</code> method, and changed the code to the following:</p>\n\n<pre><code>module SessionsHelper\n  def login(user)\n    session[:user_id] = user.id\n    @current_user = User.find_by(id: session[:user_id])\n  end\n\n  def logged_in?\n    !(@current_user.nil?)\n  end\nend\n</code></pre>\n\n<p>When I call <code>logged_in?</code>, it always returns <code>false</code>. Why do I need to call <code>current_user</code> method to access <code>@current_user</code>? <code>@current_user</code> should be available in all methods of this module because it is an instance variable.</p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "ajax"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1503493177, "post_id": 45840227, "comment_id": 78638197, "body": "You can just write am ajax method and that in onchange like <code>:onchange =&gt; &quot;ajax-method-name();&quot;</code>"}, {"owner": {"reputation": 610, "user_id": 4057576, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/e5qu0.jpg?s=128&g=1", "display_name": "Charles Skariah", "link": "https://stackoverflow.com/users/4057576/charles-skariah"}, "edited": false, "score": 0, "creation_date": 1503493274, "post_id": 45840227, "comment_id": 78638286, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/11948913/rails-select-tag-onchange-ajax-request\">Rails select_tag onchange ajax request</a>"}], "owner": {"reputation": 1041, "user_id": 6403303, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f95b19e307dd58f82eb71f7698e2ff7a?s=128&d=identicon&r=PG&f=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/6403303/oliver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1503492561, "creation_date": 1503492561, "question_id": 45840227, "link": "https://stackoverflow.com/questions/45840227/using-select-tag-instead-of-link-to-for-ajax-in-rails", "title": "Using select_tag instead of link_to for ajax in Rails", "body": "<p>In my dashboard <code>index.html.erb</code> view I have several links for an ajax call:</p>\n\n<pre><code>&lt;% @employees.each do |employee| %&gt;       \n  &lt;%= link_to employee.full_name, employee_details_path(:assigned_user_id =&gt; employee.assigned_user_id), remote: true, class: \"employee-select\" %&gt;&lt;/br&gt;        \n&lt;% end %&gt;\n</code></pre>\n\n<p>Clicking on that link renders a partial.</p>\n\n<p><strong>dashboard_controller.rb</strong></p>\n\n<pre><code>def employee_details\n  @latest_report = Report.where(:assigned_user_id =&gt; params[:assigned_user_id])\nend\n</code></pre>\n\n<p><strong>employee_details.js.erb</strong></p>\n\n<pre><code>$('#employee-details').html(\"&lt;%= escape_javascript (render partial: 'employee_details') %&gt;\");\n</code></pre>\n\n<p>What I want now is to instead of having several links that call the ajax when clicked, I want a select_tag that calls the ajax. Something like:</p>\n\n<pre><code>&lt;%= select_tag \"employees\", options_from_collection_for_select(@employees, \"assigned_user_id\", \"full_name\"),\n                                      :prompt =&gt; \"Please select an employee\",\n                                      :onchange =&gt; \"call ajax and render partial\" %&gt;\n</code></pre>\n\n<p>I am totally stuck at the moment. </p>\n"}, {"tags": ["ruby", "methods"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1503492100, "post_id": 45839930, "comment_id": 78637316, "body": "&quot;how can I change this behaviour?&quot; - don&#39;t do the wrapping then. <code>private_method options</code>"}, {"owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "edited": false, "score": 1, "creation_date": 1503492185, "post_id": 45839930, "comment_id": 78637384, "body": "Try <code>private_method options</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1503492479, "post_id": 45839930, "comment_id": 78637616, "body": "<code>private_method options: options</code> means <code>private_method({options: options})</code>"}, {"owner": {"reputation": 1075, "user_id": 6561814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AiS9a.png?s=128&g=1", "display_name": "jonhue", "link": "https://stackoverflow.com/users/6561814/jonhue"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1503493312, "post_id": 45839930, "comment_id": 78638321, "body": "@SergioTulentsev I originally only did this because passing just options gave me an error. But it&#39;s working now, seems like there was something wrong with the options hash then when I first tried it."}], "answers": [{"tags": [], "owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "is_accepted": true, "score": 3, "last_activity_date": 1503492161, "creation_date": 1503492161, "answer_id": 45840069, "question_id": 45839930, "link": "https://stackoverflow.com/questions/45839930/ruby-pass-options-parameter-between-methods/45840069#45840069", "title": "Ruby: pass options parameter between methods", "body": "<p>In <code>public_method</code>, <code>options</code> is already a Hash. When you call <code>private_method</code> you embed it in another Hash. Don't do it.</p>\n\n<pre><code>def public_method options = {}\n    puts options[:hello]\n    private_method options\nend\n</code></pre>\n"}], "owner": {"reputation": 1075, "user_id": 6561814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AiS9a.png?s=128&g=1", "display_name": "jonhue", "link": "https://stackoverflow.com/users/6561814/jonhue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 45840069, "answer_count": 1, "score": 1, "last_activity_date": 1503492161, "creation_date": 1503491780, "question_id": 45839930, "link": "https://stackoverflow.com/questions/45839930/ruby-pass-options-parameter-between-methods", "title": "Ruby: pass options parameter between methods", "body": "<p>If <code>public_method</code> gets called:</p>\n\n<pre><code>public_method hello: 'world'\n\ndef public_method options = {}\n    puts options[:hello]\n    private_method options: options\nend\n\nprivate\n\ndef private_method options = {}\n    puts options[:hello]\nend\n</code></pre>\n\n<p>It puts <code>'world</code> and the forwards to <code>private_method</code>.\nThat method does not receive <code>{:options=&gt;{:hello=&gt;'world'}}</code> like expected. Instead it receives <code>{:options=&gt;{:options=&gt;{:hello=&gt;'world'}}}</code>.</p>\n\n<p>How can I change this behavior?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "edited": false, "score": 0, "creation_date": 1503489539, "post_id": 45838762, "comment_id": 78635302, "body": "use request.url to get current url"}], "answers": [{"comments": [{"owner": {"reputation": 479, "user_id": 6417047, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/z5xDc.jpg?s=128&g=1", "display_name": "Collin", "link": "https://stackoverflow.com/users/6417047/collin"}, "edited": false, "score": 0, "creation_date": 1503489288, "post_id": 45838898, "comment_id": 78635106, "body": "It returned a nil value"}, {"owner": {"reputation": 474, "user_id": 5379362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38f95f8ddc8d16b7945bccd6ba76e00?s=128&d=identicon&r=PG&f=1", "display_name": "Fede Bonisconti", "link": "https://stackoverflow.com/users/5379362/fede-bonisconti"}, "reply_to_user": {"reputation": 479, "user_id": 6417047, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/z5xDc.jpg?s=128&g=1", "display_name": "Collin", "link": "https://stackoverflow.com/users/6417047/collin"}, "edited": false, "score": 0, "creation_date": 1503490272, "post_id": 45838898, "comment_id": 78635890, "body": "If you are trying to retrieve the id of a url thats not the way to do it. Something like this <a href=\"http://guides.rubyonrails.org/routing.html#connecting-urls-to-code\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/routing.html#connecting-urls-to-code</a> is the rails approach. Otherwise, check what does your split returns"}, {"owner": {"reputation": 479, "user_id": 6417047, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/z5xDc.jpg?s=128&g=1", "display_name": "Collin", "link": "https://stackoverflow.com/users/6417047/collin"}, "edited": false, "score": 0, "creation_date": 1503498159, "post_id": 45838898, "comment_id": 78642381, "body": "I already have that same id going to a separate place, though. Is it allowed to use the same for two? (such as <code>get &quot;room&#47;:id&quot; =&gt; &quot;pages#room&quot;</code> and <code>&quot;get room&#47;:id&quot; =&gt; &quot;messages#create&quot;</code>)"}, {"owner": {"reputation": 474, "user_id": 5379362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38f95f8ddc8d16b7945bccd6ba76e00?s=128&d=identicon&r=PG&f=1", "display_name": "Fede Bonisconti", "link": "https://stackoverflow.com/users/5379362/fede-bonisconti"}, "reply_to_user": {"reputation": 479, "user_id": 6417047, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/z5xDc.jpg?s=128&g=1", "display_name": "Collin", "link": "https://stackoverflow.com/users/6417047/collin"}, "edited": false, "score": 0, "creation_date": 1503499873, "post_id": 45838898, "comment_id": 78643919, "body": "You can use the same route, but HTTP verb has to be different. If you are creating a message, the best way to do it is <code>post &quot;room&#47;:id&#47;messages&quot; =&gt; &quot;messages#create&quot;</code>. Using post is the standard way to create a resource, and <code>&#47;messages</code> to point out which resource are you creating using the room id"}, {"owner": {"reputation": 479, "user_id": 6417047, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/z5xDc.jpg?s=128&g=1", "display_name": "Collin", "link": "https://stackoverflow.com/users/6417047/collin"}, "edited": false, "score": 0, "creation_date": 1503529104, "post_id": 45838898, "comment_id": 78659223, "body": "So I manually went into routes.rb and added <code>post &#39;room&#47;:id&#47;messages&#39; =&gt; &#39;messages#create&#39;</code> along with a variety of other needed routes. However, when I submit my form, it redirects to <code>&#47;messages</code> and gives the error <b><i>No route matches [POST] &quot;/messages&quot;</i></b>. I feel like I&#39;m getting closer."}, {"owner": {"reputation": 474, "user_id": 5379362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38f95f8ddc8d16b7945bccd6ba76e00?s=128&d=identicon&r=PG&f=1", "display_name": "Fede Bonisconti", "link": "https://stackoverflow.com/users/5379362/fede-bonisconti"}, "reply_to_user": {"reputation": 479, "user_id": 6417047, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/z5xDc.jpg?s=128&g=1", "display_name": "Collin", "link": "https://stackoverflow.com/users/6417047/collin"}, "edited": false, "score": 0, "creation_date": 1503529960, "post_id": 45838898, "comment_id": 78659444, "body": "You should change the form url. Idk if you are using simple form or <code>form_for</code>, maybe you should check this post <a href=\"https://stackoverflow.com/a/13578844/5379362\">stackoverflow.com/a/13578844/5379362</a>"}], "tags": [], "owner": {"reputation": 474, "user_id": 5379362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38f95f8ddc8d16b7945bccd6ba76e00?s=128&d=identicon&r=PG&f=1", "display_name": "Fede Bonisconti", "link": "https://stackoverflow.com/users/5379362/fede-bonisconti"}, "is_accepted": false, "score": 1, "last_activity_date": 1503488908, "creation_date": 1503488908, "answer_id": 45838898, "question_id": 45838762, "link": "https://stackoverflow.com/questions/45838762/how-to-retrieve-the-current-url-within-a-class/45838898#45838898", "title": "How to retrieve the current URL within a class?", "body": "<p>You should use <code>request.original_url</code> </p>\n\n<p><a href=\"http://api.rubyonrails.org/v5.1/classes/ActionDispatch/Request.html#method-i-original_url\" rel=\"nofollow noreferrer\">http://api.rubyonrails.org/v5.1/classes/ActionDispatch/Request.html#method-i-original_url</a></p>\n"}, {"comments": [{"owner": {"reputation": 479, "user_id": 6417047, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/z5xDc.jpg?s=128&g=1", "display_name": "Collin", "link": "https://stackoverflow.com/users/6417047/collin"}, "edited": false, "score": 0, "creation_date": 1503493547, "post_id": 45840239, "comment_id": 78638499, "body": "It seems strange that it will not work in my controller. Is there some sort of gem I&#39;m missing?"}, {"owner": {"reputation": 97, "user_id": 8406596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a5f6f5f69fe4e93141a0c46df4adffa6?s=128&d=identicon&r=PG&f=1", "display_name": "Pistorius", "link": "https://stackoverflow.com/users/8406596/pistorius"}, "reply_to_user": {"reputation": 479, "user_id": 6417047, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/z5xDc.jpg?s=128&g=1", "display_name": "Collin", "link": "https://stackoverflow.com/users/6417047/collin"}, "edited": false, "score": 0, "creation_date": 1503498551, "post_id": 45840239, "comment_id": 78642738, "body": "Which version of rails do u have? try <code>rails -v</code>"}, {"owner": {"reputation": 479, "user_id": 6417047, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/z5xDc.jpg?s=128&g=1", "display_name": "Collin", "link": "https://stackoverflow.com/users/6417047/collin"}, "edited": false, "score": 0, "creation_date": 1503498741, "post_id": 45840239, "comment_id": 78642913, "body": "Currently running 4.2.5"}, {"owner": {"reputation": 97, "user_id": 8406596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a5f6f5f69fe4e93141a0c46df4adffa6?s=128&d=identicon&r=PG&f=1", "display_name": "Pistorius", "link": "https://stackoverflow.com/users/8406596/pistorius"}, "reply_to_user": {"reputation": 479, "user_id": 6417047, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/z5xDc.jpg?s=128&g=1", "display_name": "Collin", "link": "https://stackoverflow.com/users/6417047/collin"}, "edited": false, "score": 0, "creation_date": 1503499400, "post_id": 45840239, "comment_id": 78643511, "body": "I guess <code>request.url</code> does not work too. Are you using some other framework?"}, {"owner": {"reputation": 479, "user_id": 6417047, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/z5xDc.jpg?s=128&g=1", "display_name": "Collin", "link": "https://stackoverflow.com/users/6417047/collin"}, "edited": false, "score": 0, "creation_date": 1503527928, "post_id": 45840239, "comment_id": 78658836, "body": "So I analyzed the problem. It turns out that it returns the url <code>&#47;messages</code>. Is there a way to return the url of the page before that?"}], "tags": [], "owner": {"reputation": 97, "user_id": 8406596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a5f6f5f69fe4e93141a0c46df4adffa6?s=128&d=identicon&r=PG&f=1", "display_name": "Pistorius", "link": "https://stackoverflow.com/users/8406596/pistorius"}, "is_accepted": false, "score": 1, "last_activity_date": 1503492589, "creation_date": 1503492589, "answer_id": 45840239, "question_id": 45838762, "link": "https://stackoverflow.com/questions/45838762/how-to-retrieve-the-current-url-within-a-class/45840239#45840239", "title": "How to retrieve the current URL within a class?", "body": "<p>As Fede said, you can use in your controller <code>request.original_url</code>. Also, if you have some ajax in your view you can pass it as data to your model and after to your controller with <code>window.location.href</code> in the JS.</p>\n"}, {"tags": [], "owner": {"reputation": 479, "user_id": 6417047, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/z5xDc.jpg?s=128&g=1", "display_name": "Collin", "link": "https://stackoverflow.com/users/6417047/collin"}, "is_accepted": true, "score": 1, "last_activity_date": 1503529686, "creation_date": 1503529686, "answer_id": 45850581, "question_id": 45838762, "link": "https://stackoverflow.com/questions/45838762/how-to-retrieve-the-current-url-within-a-class/45850581#45850581", "title": "How to retrieve the current URL within a class?", "body": "<p>I finally figured it out with some help and debugging. Because I was requesting the URL within a class that was creating a new object in the database, I had to use <code>request.referrer</code>:</p>\n\n<pre><code>url = request.referrer\nuri = URI::parse(url)\nid = uri.path.split('/')[2]\n</code></pre>\n\n<p>And because my URL was like \"<a href=\"https://www.example.com/room/4\" rel=\"nofollow noreferrer\">https://www.example.com/room/4</a>\", the <strong>id</strong> returned a value of 4.</p>\n"}], "owner": {"reputation": 479, "user_id": 6417047, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/z5xDc.jpg?s=128&g=1", "display_name": "Collin", "link": "https://stackoverflow.com/users/6417047/collin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 523, "favorite_count": 0, "accepted_answer_id": 45850581, "answer_count": 3, "score": 0, "last_activity_date": 1503529686, "creation_date": 1503488545, "question_id": 45838762, "link": "https://stackoverflow.com/questions/45838762/how-to-retrieve-the-current-url-within-a-class", "title": "How to retrieve the current URL within a class?", "body": "<p>I'm trying to retrieve the full URL of my site (including the https://) in a controller in Ruby. I need it to fit in the following code:</p>\n\n<pre><code>url = \"\"\nuri = URI::parse(url)\nid = uri.path.split('/')[2]\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 3, "creation_date": 1503489178, "post_id": 45838682, "comment_id": 78635027, "body": "What is the expected result? Check it one time more, right now its quite unclear."}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 2, "creation_date": 1503493397, "post_id": 45838682, "comment_id": 78638390, "body": "Why are you calling this <code>yes_no</code>?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1503493839, "post_id": 45838682, "comment_id": 78638719, "body": "I think it&#39;s still unclear how the expected result is obtained. <i>&quot;adding every other item to a new array&quot;</i> sounds as if the result should simply be <code>[1, 3, 5, 7, 9]</code>. It&#39;s not obvious why those are followed by <code>2, 6, 10, 8, 4</code> (in that order)."}], "answers": [{"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1503490732, "post_id": 45839405, "comment_id": 78636237, "body": "Very clever. I think you can omit the argument to <code>rotate!</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1503490796, "post_id": 45839405, "comment_id": 78636278, "body": "@sagarpandya82 oh you&#39;re right, I wasn&#39;t aware that <code>rotate</code> has a default value."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 4, "last_activity_date": 1503490762, "last_edit_date": 1503490762, "creation_date": 1503490371, "answer_id": 45839405, "question_id": 45838682, "link": "https://stackoverflow.com/questions/45838682/looping-through-array-and-appending-every-even-item-to-new-array/45839405#45839405", "title": "Looping through array and appending every even item to new array", "body": "<p>I'm not sure how to fix your code, but here's another way to get the expected result:</p>\n\n<pre><code>arr = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n\nnew_array = []\n\nuntil arr.empty?\n  new_array &lt;&lt; arr.shift\n  arr.rotate!\nend\n\nnew_array\n#=&gt; [1, 3, 5, 7, 9, 2, 6, 10, 8, 4]\n</code></pre>\n\n<p>Note that <code>arr</code> is being modified, you might want to <code>dup</code> it.</p>\n"}], "owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1503490762, "creation_date": 1503488332, "last_edit_date": 1503490725, "question_id": 45838682, "link": "https://stackoverflow.com/questions/45838682/looping-through-array-and-appending-every-even-item-to-new-array", "title": "Looping through array and appending every even item to new array", "body": "<p>I am trying to loop through an array, adding every other item to a new array.</p>\n\n<pre><code>def yes_no(arr)\n  i = 0\n  new_array = []\n  while i != arr.size\n    arr.select.each_with_index {|value , index| index.even?}\n    new_array &lt;&lt; value\n    i += 1\n  end\n  new_array\nend\n</code></pre>\n\n<p>The code is supposed to return a new array with values by their order. For:</p>\n\n<pre><code>[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n</code></pre>\n\n<p>it should return:</p>\n\n<pre><code>[1, 3, 5, 7, 9, 2, 6, 10, 8, 4]\n</code></pre>\n\n<p>The first value of the initial array is always taken. I believe I have the correct logic with my code, but I need some help completing this problem.</p>\n\n<p>Here is another example:</p>\n\n<pre><code> arr = ['this', 'code', 'is', 'right', 'the']\n // returns ['this', 'is', 'the', 'right', 'code']\n</code></pre>\n"}, {"tags": ["ruby", "google-app-engine", "google-cloud-platform"], "answers": [{"tags": [], "owner": {"reputation": 1230, "user_id": 6345993, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1217456148265088/picture?type=large", "display_name": "Paddy Popeye", "link": "https://stackoverflow.com/users/6345993/paddy-popeye"}, "is_accepted": false, "score": 0, "last_activity_date": 1576502779, "creation_date": 1576502779, "answer_id": 59357583, "question_id": 45838590, "link": "https://stackoverflow.com/questions/45838590/use-ruby-script-in-google-app-engine-to-transfer-files-from-storage-to-big-query/59357583#59357583", "title": "Use Ruby Script in Google App Engine to transfer files from storage to big query", "body": "<p>Yes ruby scripts can be used to interact with BigQuery, and from within an App Engine deployed application. </p>\n\n<p>To start it's as simple as running;\n <code>gem install google-cloud-bigquery</code> </p>\n\n<p>The source code can be found on github <a href=\"https://github.com/googleapis/google-cloud-ruby/tree/master/google-cloud-bigquery\" rel=\"nofollow noreferrer\">google-cloud-ruby</a>. </p>\n\n<p>The official Google quickstart for Ruby and the Big Query API <a href=\"https://cloud.google.com/bigquery/docs/quickstarts/quickstart-client-libraries\" rel=\"nofollow noreferrer\">Quickstart: BigQuery API</a>. </p>\n\n<p>You will also need to review ruby integration with App Engine's Flex environment <a href=\"https://cloud.google.com/appengine/docs/flexible/ruby/runtime\" rel=\"nofollow noreferrer\">Ruby runtime for App Engine Flexible Environment</a></p>\n"}], "owner": {"reputation": 21, "user_id": 6747929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2063a9edb04b44215b51157c47120c20?s=128&d=identicon&r=PG&f=1", "display_name": "TobiLAY", "link": "https://stackoverflow.com/users/6747929/tobilay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1576502779, "creation_date": 1503488069, "last_edit_date": 1503489064, "question_id": 45838590, "link": "https://stackoverflow.com/questions/45838590/use-ruby-script-in-google-app-engine-to-transfer-files-from-storage-to-big-query", "title": "Use Ruby Script in Google App Engine to transfer files from storage to big query", "body": "<p>Can I use Ruby Scripts in Google Cloud Platform App Engine to load data from Cloud Storage to Big Query? And if yes, how can I deploy these scripts? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "routes", "rails-routing"], "answers": [{"comments": [{"owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "edited": false, "score": 0, "creation_date": 1503487283, "post_id": 45838277, "comment_id": 78633640, "body": "Weird, I could have sworn I used my syntax successfully before. Thanks! Do you know why the browser is defaulting to Create rather than just throwing an error?"}], "tags": [], "owner": {"reputation": 18593, "user_id": 4304188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5695b0e5c30d4464163e3f3412fe5f1?s=128&d=identicon&r=PG", "display_name": "Mihai Dinculescu", "link": "https://stackoverflow.com/users/4304188/mihai-dinculescu"}, "is_accepted": true, "score": 3, "last_activity_date": 1503487497, "last_edit_date": 1503487497, "creation_date": 1503487085, "answer_id": 45838277, "question_id": 45838088, "link": "https://stackoverflow.com/questions/45838088/form-with-custom-url-keeps-submitting-to-create-method/45838277#45838277", "title": "Form with custom url keeps submitting to Create method", "body": "<p>The correct syntax is</p>\n\n<pre><code>form_tag(order_pizza_path, method: :post)\n</code></pre>\n\n<p>not</p>\n\n<pre><code>form_tag({url: order_pizza_path}, method: :post)\n</code></pre>\n\n<p><code>{url: order_pizza_path}</code> is not a valid <code>url_for_options</code> so the <code>form_tag</code> will submit to the default, which is the <code>create</code> action.</p>\n\n<p>A valid value for <code>url_for_options</code> would be</p>\n\n<pre><code>{action: 'order'}\n</code></pre>\n"}], "owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 790, "favorite_count": 0, "accepted_answer_id": 45838277, "answer_count": 1, "score": 1, "last_activity_date": 1503487497, "creation_date": 1503486571, "question_id": 45838088, "link": "https://stackoverflow.com/questions/45838088/form-with-custom-url-keeps-submitting-to-create-method", "title": "Form with custom url keeps submitting to Create method", "body": "<p>I'm trying to build a simple form that passes a few params to a controller. </p>\n\n<p>Here's what I have:</p>\n\n<pre><code>&lt;%= form_tag({url: order_pizza_path}, method: :post) do %&gt;\n  &lt;%= hidden_field_tag :id, value: 0, name:\"tag-1\" %&gt;\n  &lt;!-- hidden field is then filled in with js --&gt;\n  &lt;%= submit_tag \"Submit\" %&gt;\n&lt;% end %&gt;\n\n&lt;!-- routes: --&gt;\nget 'pizza/new' =&gt; 'pizza#new', as: 'new_pizza'\npost 'pizza' =&gt; 'pizza#create', as: 'create_pizza'\npost 'order_pizza' =&gt; 'pizza#order', as: 'order_pizza'\n</code></pre>\n\n<p>But when I submit, it keeps trying to point to the <code>Create</code> method in my Pizza controller. I keep getting the following error:</p>\n\n<pre><code>ActionController::ParameterMissing in PizzaController#create\nparam is missing or the value is empty: pizza\n</code></pre>\n\n<p>The form's url is <code>/pizza</code>. This is the url of the error: <code>/pizza?method=get&amp;url=%2Forder_pizza</code></p>\n\n<hr>\n\n<p>This happens even if I change it to a GET request not POST. Why does my browser keep trying to go to the <code>Create</code> method?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1503489095, "post_id": 45838083, "comment_id": 78634964, "body": "We probably have <code>rindex</code> in Ruby, because Perl has <code>rindex</code>."}], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 1, "creation_date": 1503493083, "post_id": 45838206, "comment_id": 78638107, "body": "@GaganGami It&#39;s written in my answer."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 4, "last_activity_date": 1503487727, "last_edit_date": 1503487727, "creation_date": 1503486938, "answer_id": 45838206, "question_id": 45838083, "link": "https://stackoverflow.com/questions/45838083/we-have-index-and-rindex-we-have-find-but-no-rfind/45838206#45838206", "title": "We have &#39;index&#39; and &#39;rindex&#39;, we have &#39;find&#39; but no &#39;rfind&#39;", "body": "<p>You can do it like this:</p>\n\n<pre><code>enum = [1, 2, 3, 4].reverse_each\n# =&gt; #&lt;Enumerator: [1, 2, 3, 4]:reverse_each&gt;\n\nenum.find(&amp;:odd?)\n# =&gt; 3\n</code></pre>\n\n<p>Notice that, unlike using <code>Array#reverse</code>, it does not create a temporal array that is thrown out immediately.</p>\n\n<p>Doing it at once:</p>\n\n<pre><code>[1, 2, 3, 4].reverse_each.find(&amp;:odd?)\n# =&gt; 3\n</code></pre>\n\n<p>In other words, we have <code>reverse_each.find</code> instead of <code>rfind</code>; not a big deal.</p>\n"}], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "accepted_answer_id": 45838206, "answer_count": 1, "score": 3, "last_activity_date": 1503487727, "creation_date": 1503486566, "last_edit_date": 1503486794, "question_id": 45838083, "link": "https://stackoverflow.com/questions/45838083/we-have-index-and-rindex-we-have-find-but-no-rfind", "title": "We have &#39;index&#39; and &#39;rindex&#39;, we have &#39;find&#39; but no &#39;rfind&#39;", "body": "<p>When applied to an Array, <code>index</code> (invoked with a block) returns the index of the first element satisfying the condition, and <code>rindex</code> returns the index of the last one. Similarly, we have <code>find</code> to return the element itself. However, there is no corresponding <code>rfind</code> that would return the last element of an array satisfying a condition.</p>\n\n<p>Does Ruby already have a method that accomplishes this?</p>\n\n<p>Before monkey-patching the <code>Array</code> class, I want to make sure.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "erb"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1503486121, "post_id": 45837593, "comment_id": 78632764, "body": "You need to assign <code>@variable_2</code> first in order to use that in <code>@variable_1</code>."}, {"owner": {"reputation": 77, "user_id": 8048092, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh5.googleusercontent.com/-3kq0QJUBaxw/AAAAAAAAAAI/AAAAAAAAAGQ/2gB7ozjeDI4/photo.jpg?sz=128", "display_name": "shahana hamza", "link": "https://stackoverflow.com/users/8048092/shahana-hamza"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1503486237, "post_id": 45837593, "comment_id": 78632838, "body": "Like that only i am doing."}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1503486462, "post_id": 45837593, "comment_id": 78633032, "body": "Use double quotes when you need to interpolate <code>&quot;#{variable}&quot;</code>"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1503487092, "post_id": 45837593, "comment_id": 78633508, "body": "What is the exact exact value of <code>@variable_1</code> that comes from the db. Your sample data which you have provided works fine with double quotes <i>(&quot;&quot;)</i>"}, {"owner": {"reputation": 77, "user_id": 8048092, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh5.googleusercontent.com/-3kq0QJUBaxw/AAAAAAAAAAI/AAAAAAAAAGQ/2gB7ozjeDI4/photo.jpg?sz=128", "display_name": "shahana hamza", "link": "https://stackoverflow.com/users/8048092/shahana-hamza"}, "edited": false, "score": 0, "creation_date": 1503487243, "post_id": 45837593, "comment_id": 78633611, "body": "@variable_1 can be any string value which we fetch from db. in some cases it is &#39;print in view : #{@variable_2}&#39; in that case variable_2&#39;s value test_data this has to be displayed. Am i clear? Sample data is hard coded. Try fetching from db."}, {"owner": {"reputation": 847, "user_id": 1963964, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/MLMKT.jpg?s=128&g=1", "display_name": "Roshan", "link": "https://stackoverflow.com/users/1963964/roshan"}, "edited": false, "score": 0, "creation_date": 1503487276, "post_id": 45837593, "comment_id": 78633630, "body": "@shahanahamza unfortunately not."}, {"owner": {"reputation": 77, "user_id": 8048092, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh5.googleusercontent.com/-3kq0QJUBaxw/AAAAAAAAAAI/AAAAAAAAAGQ/2gB7ozjeDI4/photo.jpg?sz=128", "display_name": "shahana hamza", "link": "https://stackoverflow.com/users/8048092/shahana-hamza"}, "edited": false, "score": 0, "creation_date": 1503487451, "post_id": 45837593, "comment_id": 78633754, "body": "Updated the question."}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 8048092, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh5.googleusercontent.com/-3kq0QJUBaxw/AAAAAAAAAAI/AAAAAAAAAGQ/2gB7ozjeDI4/photo.jpg?sz=128", "display_name": "shahana hamza", "link": "https://stackoverflow.com/users/8048092/shahana-hamza"}, "edited": false, "score": 0, "creation_date": 1503485612, "post_id": 45837624, "comment_id": 78632402, "body": "I didn&#39;t give variable_1 manually. it comes from db. eg: variable_1 = Model.first.description."}, {"owner": {"reputation": 329, "user_id": 7018858, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bb0c52b3aefb50b31995b5397977b27f?s=128&d=identicon&r=PG&f=1", "display_name": "Chetan Mehta", "link": "https://stackoverflow.com/users/7018858/chetan-mehta"}, "reply_to_user": {"reputation": 77, "user_id": 8048092, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh5.googleusercontent.com/-3kq0QJUBaxw/AAAAAAAAAAI/AAAAAAAAAGQ/2gB7ozjeDI4/photo.jpg?sz=128", "display_name": "shahana hamza", "link": "https://stackoverflow.com/users/8048092/shahana-hamza"}, "edited": false, "score": 0, "creation_date": 1503486295, "post_id": 45837624, "comment_id": 78632885, "body": "Try this then &quot;print in view : #{Model.first.description}&quot;"}, {"owner": {"reputation": 77, "user_id": 8048092, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh5.googleusercontent.com/-3kq0QJUBaxw/AAAAAAAAAAI/AAAAAAAAAGQ/2gB7ozjeDI4/photo.jpg?sz=128", "display_name": "shahana hamza", "link": "https://stackoverflow.com/users/8048092/shahana-hamza"}, "edited": false, "score": 0, "creation_date": 1503486511, "post_id": 45837624, "comment_id": 78633065, "body": "variable_1 = Model.first.description = &quot;print in view :  #{@variable_2}&quot;. The message can vary."}, {"owner": {"reputation": 329, "user_id": 7018858, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bb0c52b3aefb50b31995b5397977b27f?s=128&d=identicon&r=PG&f=1", "display_name": "Chetan Mehta", "link": "https://stackoverflow.com/users/7018858/chetan-mehta"}, "reply_to_user": {"reputation": 77, "user_id": 8048092, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh5.googleusercontent.com/-3kq0QJUBaxw/AAAAAAAAAAI/AAAAAAAAAGQ/2gB7ozjeDI4/photo.jpg?sz=128", "display_name": "shahana hamza", "link": "https://stackoverflow.com/users/8048092/shahana-hamza"}, "edited": false, "score": 0, "creation_date": 1503487241, "post_id": 45837624, "comment_id": 78633605, "body": "Sorry Am unable to get you. Can you tell me exactly what are you trying to do"}, {"owner": {"reputation": 77, "user_id": 8048092, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh5.googleusercontent.com/-3kq0QJUBaxw/AAAAAAAAAAI/AAAAAAAAAGQ/2gB7ozjeDI4/photo.jpg?sz=128", "display_name": "shahana hamza", "link": "https://stackoverflow.com/users/8048092/shahana-hamza"}, "edited": false, "score": 0, "creation_date": 1503487503, "post_id": 45837624, "comment_id": 78633797, "body": "i have updated the question. Can you please check that?"}, {"owner": {"reputation": 329, "user_id": 7018858, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bb0c52b3aefb50b31995b5397977b27f?s=128&d=identicon&r=PG&f=1", "display_name": "Chetan Mehta", "link": "https://stackoverflow.com/users/7018858/chetan-mehta"}, "reply_to_user": {"reputation": 77, "user_id": 8048092, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh5.googleusercontent.com/-3kq0QJUBaxw/AAAAAAAAAAI/AAAAAAAAAGQ/2gB7ozjeDI4/photo.jpg?sz=128", "display_name": "shahana hamza", "link": "https://stackoverflow.com/users/8048092/shahana-hamza"}, "edited": false, "score": 0, "creation_date": 1503488001, "post_id": 45837624, "comment_id": 78634169, "body": "Try variable_1 = Model.description.to_s"}], "tags": [], "owner": {"reputation": 329, "user_id": 7018858, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bb0c52b3aefb50b31995b5397977b27f?s=128&d=identicon&r=PG&f=1", "display_name": "Chetan Mehta", "link": "https://stackoverflow.com/users/7018858/chetan-mehta"}, "is_accepted": false, "score": 0, "last_activity_date": 1503485413, "creation_date": 1503485413, "answer_id": 45837624, "question_id": 45837593, "link": "https://stackoverflow.com/questions/45837593/print-string-from-db-with-ruby-code-in-view/45837624#45837624", "title": "Print string from db with ruby code in view", "body": "<p>The problem is single quotes as it will not execute interpolation. Try changing it to double quotes:</p>\n\n<pre><code>\"print in view : #{@variable_2}\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 77, "user_id": 8048092, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh5.googleusercontent.com/-3kq0QJUBaxw/AAAAAAAAAAI/AAAAAAAAAGQ/2gB7ozjeDI4/photo.jpg?sz=128", "display_name": "shahana hamza", "link": "https://stackoverflow.com/users/8048092/shahana-hamza"}, "edited": false, "score": 0, "creation_date": 1503486124, "post_id": 45837849, "comment_id": 78632769, "body": "I didn&#39;t give variable_1 manually. it comes from db. eg: variable_1 = Model.first.description."}, {"owner": {"reputation": 847, "user_id": 1963964, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/MLMKT.jpg?s=128&g=1", "display_name": "Roshan", "link": "https://stackoverflow.com/users/1963964/roshan"}, "reply_to_user": {"reputation": 77, "user_id": 8048092, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh5.googleusercontent.com/-3kq0QJUBaxw/AAAAAAAAAAI/AAAAAAAAAGQ/2gB7ozjeDI4/photo.jpg?sz=128", "display_name": "shahana hamza", "link": "https://stackoverflow.com/users/8048092/shahana-hamza"}, "edited": false, "score": 0, "creation_date": 1503486346, "post_id": 45837849, "comment_id": 78632939, "body": "@shahanahamza I have updated my answer. You should assign <code>@variable_2</code> before <code>@variable_1</code>"}, {"owner": {"reputation": 77, "user_id": 8048092, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh5.googleusercontent.com/-3kq0QJUBaxw/AAAAAAAAAAI/AAAAAAAAAGQ/2gB7ozjeDI4/photo.jpg?sz=128", "display_name": "shahana hamza", "link": "https://stackoverflow.com/users/8048092/shahana-hamza"}, "edited": false, "score": 0, "creation_date": 1503487088, "post_id": 45837849, "comment_id": 78633505, "body": "thats what i am doing."}, {"owner": {"reputation": 847, "user_id": 1963964, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/MLMKT.jpg?s=128&g=1", "display_name": "Roshan", "link": "https://stackoverflow.com/users/1963964/roshan"}, "reply_to_user": {"reputation": 77, "user_id": 8048092, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh5.googleusercontent.com/-3kq0QJUBaxw/AAAAAAAAAAI/AAAAAAAAAGQ/2gB7ozjeDI4/photo.jpg?sz=128", "display_name": "shahana hamza", "link": "https://stackoverflow.com/users/8048092/shahana-hamza"}, "edited": false, "score": 0, "creation_date": 1503487232, "post_id": 45837849, "comment_id": 78633600, "body": "@shahanahamza then, what is the issue ? Is there any error ?"}, {"owner": {"reputation": 847, "user_id": 1963964, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/MLMKT.jpg?s=128&g=1", "display_name": "Roshan", "link": "https://stackoverflow.com/users/1963964/roshan"}, "reply_to_user": {"reputation": 77, "user_id": 8048092, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh5.googleusercontent.com/-3kq0QJUBaxw/AAAAAAAAAAI/AAAAAAAAAGQ/2gB7ozjeDI4/photo.jpg?sz=128", "display_name": "shahana hamza", "link": "https://stackoverflow.com/users/8048092/shahana-hamza"}, "edited": false, "score": 0, "creation_date": 1503487420, "post_id": 45837849, "comment_id": 78633729, "body": "@shahanahamza i have updated the answer. Have a look."}], "tags": [], "owner": {"reputation": 847, "user_id": 1963964, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/MLMKT.jpg?s=128&g=1", "display_name": "Roshan", "link": "https://stackoverflow.com/users/1963964/roshan"}, "is_accepted": false, "score": 0, "last_activity_date": 1503487394, "last_edit_date": 1503487394, "creation_date": 1503486037, "answer_id": 45837849, "question_id": 45837593, "link": "https://stackoverflow.com/questions/45837593/print-string-from-db-with-ruby-code-in-view/45837849#45837849", "title": "Print string from db with ruby code in view", "body": "<p>You should use double quotes for string interpolation. </p>\n\n<p>Change it to:</p>\n\n<pre><code>@variable_1 = \"print in view : #{@variable_2.description}\"\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 8048092, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh5.googleusercontent.com/-3kq0QJUBaxw/AAAAAAAAAAI/AAAAAAAAAGQ/2gB7ozjeDI4/photo.jpg?sz=128", "display_name": "shahana hamza", "link": "https://stackoverflow.com/users/8048092/shahana-hamza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1503487432, "creation_date": 1503485290, "last_edit_date": 1503487432, "question_id": 45837593, "link": "https://stackoverflow.com/questions/45837593/print-string-from-db-with-ruby-code-in-view", "title": "Print string from db with ruby code in view", "body": "<p>I have variables:</p>\n\n<pre><code>@variable_2 = \"test data\"\n@variable_1 =  Model.description(eg: \"print in view : #{@variable_2}\")\n</code></pre>\n\n<p>I want to get this output:</p>\n\n<pre><code>'print in view : test_data'\n</code></pre>\n\n<p>I am doing like this in erb file:</p>\n\n<pre><code>&lt;%= @variable_1 %&gt;\n</code></pre>\n\n<p>and the result is:</p>\n\n<pre><code>'print in view : #{@variable_2}'\n</code></pre>\n\n<p>What format should I use?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "architecture"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1503483793, "post_id": 45836469, "comment_id": 78631127, "body": "It means that instead of directly manipulating the row in your database table, you manipulate the object that corresponds to the row. Just like a wrapper function wraps its underlying function in a general sense. Also note that it doesn&#39;t say <i>&quot;wrap an object&quot;</i> but <i>&quot;wraps a row&quot;</i> \u2013 not the object is wrapped, but the row (by the object)"}], "answers": [{"tags": [], "owner": {"reputation": 1561, "user_id": 4244007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a014c87645babe900db985eeb276c4bb?s=128&d=identicon&r=PG", "display_name": "Preet Singh", "link": "https://stackoverflow.com/users/4244007/preet-singh"}, "is_accepted": true, "score": 1, "last_activity_date": 1503499165, "creation_date": 1503499165, "answer_id": 45842810, "question_id": 45836469, "link": "https://stackoverflow.com/questions/45836469/what-does-it-mean-for-an-object-to-be-wrapped-around-a-database-table/45842810#45842810", "title": "What does it mean for an object to be wrapped around a database table", "body": "<p>In one context it also means that you map all the columns of that row in properties or data on the object. Hence any interactions that happens in terms of changing the data in that row happens via the object and it's properties. </p>\n"}], "owner": {"reputation": 121, "user_id": 8213773, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a6cfecf326ae47889cbcd19c2970d17?s=128&d=identicon&r=PG&f=1", "display_name": "yamaoka", "link": "https://stackoverflow.com/users/8213773/yamaoka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 45842810, "answer_count": 1, "score": 0, "last_activity_date": 1503499165, "creation_date": 1503482164, "last_edit_date": 1503484558, "question_id": 45836469, "link": "https://stackoverflow.com/questions/45836469/what-does-it-mean-for-an-object-to-be-wrapped-around-a-database-table", "title": "What does it mean for an object to be wrapped around a database table", "body": "<p>Trying to learn Rails active record and having a hard time understanding what it means for an object to be wrapped around a table. I've already taken a look at some posts that talks about the Active Record pattern but I'm having trouble understanding what it means to \"wrap a row\".</p>\n\n<p>What does Martin Fowler mean when he <a href=\"https://martinfowler.com/eaaCatalog/activeRecord.html\" rel=\"nofollow noreferrer\">says</a>:</p>\n\n<blockquote>\n  <p>An object that wraps a row in a database table [...]</p>\n</blockquote>\n"}, {"tags": ["ruby", "string-formatting"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1503481102, "post_id": 45835934, "comment_id": 78629143, "body": "What&#39;s your expected result in the second case, i.e. if a key is missing?"}, {"owner": {"reputation": 445, "user_id": 5026941, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IMpEg.jpg?s=128&g=1", "display_name": "BIlal Khan", "link": "https://stackoverflow.com/users/5026941/bilal-khan"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1503481284, "post_id": 45835934, "comment_id": 78629277, "body": "Thanks for looking into it. Expected response can be &quot;hello Tim, today is %{day}&quot; or &quot;hello Tim, today is &quot;. I think second one will be preferred"}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 1999, "user_id": 1116381, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7b470e79f9eb14c32bc0b8f3eb47fbd8?s=128&d=identicon&r=PG", "display_name": "Tachyons", "link": "https://stackoverflow.com/users/1116381/tachyons"}, "edited": false, "score": 0, "creation_date": 1512034210, "post_id": 45836136, "comment_id": 82097229, "body": "@Tachyons that&#39;s right, I&#39;ve added the requirement to my answer."}, {"owner": {"reputation": 241, "user_id": 6340849, "user_type": "registered", "accept_rate": 37, "profile_image": "https://graph.facebook.com/1005996102826343/picture?type=large", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/6340849/abhishek"}, "edited": false, "score": 0, "creation_date": 1514983591, "post_id": 45836136, "comment_id": 83129094, "body": "I am using ruby 2.1.3 and this is not working. Is there any other way to do the same?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 241, "user_id": 6340849, "user_type": "registered", "accept_rate": 37, "profile_image": "https://graph.facebook.com/1005996102826343/picture?type=large", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/6340849/abhishek"}, "edited": false, "score": 0, "creation_date": 1514984238, "post_id": 45836136, "comment_id": 83129477, "body": "@Abhishek you could use <code>gsub</code> to replace <code>%{...}</code> with the corresponding value."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 20, "last_activity_date": 1513372293, "last_edit_date": 1513372293, "creation_date": 1503481249, "answer_id": 45836136, "question_id": 45835934, "link": "https://stackoverflow.com/questions/45835934/string-interpolation-with-hash-in-ruby/45836136#45836136", "title": "String interpolation with hash in ruby", "body": "<p>Starting with Ruby 2.3, <code>%</code> honors default values set via <a href=\"http://ruby-doc.org/core-2.4.1/Hash.html#method-i-default-3D\" rel=\"noreferrer\"><code>default=</code></a>:</p>\n\n<pre><code>hash = {name: 'Tim', city: 'Lahore'}\nhash.default = ''\n\n'hello %{name}, today is %{day}' % hash\n#=&gt; \"hello Tim, today is \"\n</code></pre>\n\n<p>or dynamic defaults set via <a href=\"http://ruby-doc.org/core-2.4.1/Hash.html#method-i-default_proc-3D\" rel=\"noreferrer\"><code>default_proc=</code></a>:</p>\n\n<pre><code>hash = {name: 'Tim', city: 'Lahore'}\nhash.default_proc = proc { |h, k| \"%{#{k}}\" }\n\n'hello %{name}, today is %{day}' % hash\n#=&gt; \"hello Tim, today is %{day}\"\n</code></pre>\n\n<p>Note that only the missing key i.e. <code>:day</code> is passed to the proc. It is therefore unaware of whether you use <code>%{day}</code> or <code>%&lt;day&gt;s</code> in your format string which might result in a different output:</p>\n\n<pre><code>'hello %{name}, today is %&lt;day&gt;s' % hash\n#=&gt; \"hello Tim, today is %{day}\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 6996615, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ci9BjsXMi6g/AAAAAAAAAAI/AAAAAAAAido/U-9jmOshwHU/photo.jpg?sz=128", "display_name": "J&#233;r&#244;me-Victor Toulouse", "link": "https://stackoverflow.com/users/6996615/j%c3%a9r%c3%b4me-victor-toulouse"}, "is_accepted": false, "score": 2, "last_activity_date": 1503481921, "creation_date": 1503481921, "answer_id": 45836385, "question_id": 45835934, "link": "https://stackoverflow.com/questions/45835934/string-interpolation-with-hash-in-ruby/45836385#45836385", "title": "String interpolation with hash in ruby", "body": "<p>you can set a default hash value : </p>\n\n<pre><code>h = {name: \"Tim\", city: \"Lahore\"}\nh.default = \"No key\"\np \"hello %{name}, today is %{day}\" % h #=&gt;\"hello Tim, today is No key\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 829, "user_id": 5680832, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-isvYmggm3Oc/AAAAAAAAAAI/AAAAAAAAAKY/InixBA2Rhe8/photo.jpg?sz=128", "display_name": "Faisal Raza", "link": "https://stackoverflow.com/users/5680832/faisal-raza"}, "is_accepted": false, "score": 2, "last_activity_date": 1505479603, "last_edit_date": 1505479603, "creation_date": 1504120775, "answer_id": 45968228, "question_id": 45835934, "link": "https://stackoverflow.com/questions/45835934/string-interpolation-with-hash-in-ruby/45968228#45968228", "title": "String interpolation with hash in ruby", "body": "<p>I have the hash keys with spaces and it worked after converting the keys to symbols.</p>\n\n<p>Hash with String keys (It returned an error on interpolation):</p>\n\n<pre><code>hash = {\"First Name\" =&gt; \"Allama\", \"Last Name\" =&gt; \"Iqbal\"}\n</code></pre>\n\n<p>Converting the hash keys to Symbols worked for me:</p>\n\n<pre><code>hash = {:\"First Name\" =&gt; \"Allama\", :\"Last Name\" =&gt; \"Iqbal\"}\nhash.default = ''\n\n'The %{First Name} %{Last Name} was a great poet.' % hash\n\n// The Allama Iqbal was a great poet.\n</code></pre>\n"}], "owner": {"reputation": 445, "user_id": 5026941, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IMpEg.jpg?s=128&g=1", "display_name": "BIlal Khan", "link": "https://stackoverflow.com/users/5026941/bilal-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5256, "favorite_count": 4, "accepted_answer_id": 45836136, "answer_count": 3, "score": 13, "last_activity_date": 1513372293, "creation_date": 1503480803, "last_edit_date": 1503481607, "question_id": 45835934, "link": "https://stackoverflow.com/questions/45835934/string-interpolation-with-hash-in-ruby", "title": "String interpolation with hash in ruby", "body": "<p>My aim is to replace keys in a string with values in hash. I am doing it like this:</p>\n\n<pre><code>\"hello %{name}, today is %{day}\" % {name: \"Tim\", day: \"Monday\"}\n</code></pre>\n\n<p>If a key in the string in missing in the hash:</p>\n\n<pre><code>\"hello %{name}, today is %{day}\" % {name: \"Tim\", city: \"Lahore\"}\n</code></pre>\n\n<p>then it will throw an error.</p>\n\n<pre><code>KeyError: key{day} not found\n</code></pre>\n\n<p>Expected result should be:</p>\n\n<pre><code>\"hello Tim, today is %{day}\" or \"hello Tim, today is \"\n</code></pre>\n\n<p>Can someone guide me in a direction to replace only the matching keys without throwing any errors?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1503479294, "post_id": 45835216, "comment_id": 78627708, "body": "What is <i>excludes</i>? And what you mean by <i>didnt work out</i>?"}, {"owner": {"reputation": 847, "user_id": 1963964, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/MLMKT.jpg?s=128&g=1", "display_name": "Roshan", "link": "https://stackoverflow.com/users/1963964/roshan"}, "edited": false, "score": 0, "creation_date": 1503479349, "post_id": 45835216, "comment_id": 78627755, "body": "<i>but didnt work out</i> what is the error ?"}, {"owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "edited": false, "score": 0, "creation_date": 1503479581, "post_id": 45835216, "comment_id": 78627917, "body": "excludes is just reverse of Include method is rails and Its seems like you want excludes each house experiences ryt?  I want to know how house and experiences are related In DB (has_many or has_one)?"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "edited": false, "score": 0, "creation_date": 1503479807, "post_id": 45835216, "comment_id": 78628103, "body": "@VKatz Is there a method called <code>excludes</code> There is <a href=\"https://apidock.com/rails/String/exclude%3F\" rel=\"nofollow noreferrer\"><i>exclude?</i></a>"}, {"owner": {"reputation": 93, "user_id": 7482730, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/30bb2b310a2a36eaa1ae263a41424f31?s=128&d=identicon&r=PG&f=1", "display_name": "Nejweti", "link": "https://stackoverflow.com/users/7482730/nejweti"}, "reply_to_user": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "edited": false, "score": 0, "creation_date": 1503479837, "post_id": 45835216, "comment_id": 78628136, "body": "house has_many :experiences @VKatz"}], "answers": [{"tags": [], "owner": {"reputation": 847, "user_id": 1963964, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/MLMKT.jpg?s=128&g=1", "display_name": "Roshan", "link": "https://stackoverflow.com/users/1963964/roshan"}, "is_accepted": true, "score": 0, "last_activity_date": 1503480543, "last_edit_date": 1503480543, "creation_date": 1503479927, "answer_id": 45835580, "question_id": 45835216, "link": "https://stackoverflow.com/questions/45835216/how-to-display-related-items/45835580#45835580", "title": "How to display related items", "body": "<p>There is no method called <code>excludes</code> in the rails model. There is only <code>exclude?</code>, which is a instance method of class <code>String</code>. Refer <a href=\"https://apidock.com/rails/String/exclude%3F\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>For your issue, maybe something like below would work given that <code>house_id</code> is the foreign_key in your experience table.</p>\n\n<pre><code>@experiences = Experience.where.not(house_id: house.experiences)\n</code></pre>\n\n<p>You may refer <a href=\"http://guides.rubyonrails.org/active_record_querying.html#not-conditions\" rel=\"nofollow noreferrer\">here</a> for more <code>not</code> conditions.</p>\n"}], "owner": {"reputation": 93, "user_id": 7482730, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/30bb2b310a2a36eaa1ae263a41424f31?s=128&d=identicon&r=PG&f=1", "display_name": "Nejweti", "link": "https://stackoverflow.com/users/7482730/nejweti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 45835580, "answer_count": 1, "score": 0, "last_activity_date": 1503482891, "creation_date": 1503479030, "last_edit_date": 1503482891, "question_id": 45835216, "link": "https://stackoverflow.com/questions/45835216/how-to-display-related-items", "title": "How to display related items", "body": "<p>I want to display related experiences below the local experiences. I tried to do it using <code>@experiences= Experience.excludes(house.experiences)</code> but didnt work out. Can I get any suggestion how to do that. </p>\n\n<pre><code>&lt;h3&gt;Local experiences&lt;/h3&gt;\n\n&lt;section class=\"list-box\"&gt;\n  &lt;% @house.experiences.each do |experience| %&gt;\n\n  &lt;p&gt;\n    &lt;%= experience.name %&gt;\n    &lt;% if logged_in? &amp;&amp; current_user.role == \"customer\" %&gt;\n    &lt;%= link_to \"Make Enquiry\", new_message_path(receiver_id: experience.supplier.user) %&gt;\n    &lt;% else %&gt;\n    &lt;%= link_to \"Make Enquiry\", new_customer_path %&gt;\n    &lt;% end %&gt;\n  &lt;/p&gt;\n  &lt;% end %&gt;\n&lt;/section&gt;\n\n&lt;h3&gt;Related experiences&lt;/h3&gt;\n\n&lt;section class=\"list-box\"&gt;\n  &lt;% @experiences.each do |experience| %&gt;\n\n  &lt;p&gt;\n    &lt;%= experience.name %&gt;\n    &lt;% if logged_in? &amp;&amp; current_user.role == \"customer\" %&gt;\n    &lt;%= link_to \"Make Enquiry\", new_message_path(receiver_id: experience.supplier.user) %&gt;\n    &lt;% else %&gt;\n    &lt;%= link_to \"Make Enquiry\", new_customer_path %&gt;\n    &lt;% end %&gt;\n  &lt;/p&gt;\n  &lt;% end %&gt;\n&lt;/section&gt;\n</code></pre>\n"}, {"tags": ["ruby", "regex", "string"], "answers": [{"comments": [{"owner": {"reputation": 2784, "user_id": 1487843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1BFY8.jpg?s=128&g=1", "display_name": "Marc Lambrichs", "link": "https://stackoverflow.com/users/1487843/marc-lambrichs"}, "edited": false, "score": 0, "creation_date": 1503497038, "post_id": 45834515, "comment_id": 78641432, "body": "Like @Jan, even if you appreciate a different solution more than mine, there&#39;s no need to downvote a perfect valid solution. And if you do, let us know why, so we can all benefit from your opinion/knowledge."}], "tags": [], "owner": {"reputation": 2784, "user_id": 1487843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1BFY8.jpg?s=128&g=1", "display_name": "Marc Lambrichs", "link": "https://stackoverflow.com/users/1487843/marc-lambrichs"}, "is_accepted": false, "score": -1, "last_activity_date": 1503478769, "last_edit_date": 1503478769, "creation_date": 1503476899, "answer_id": 45834515, "question_id": 45834123, "link": "https://stackoverflow.com/questions/45834123/change-numbers-to-characters-with-regex/45834515#45834515", "title": "Change numbers to characters with regex", "body": "<p>The regex to capture this with is [A-Z][a-z]+(?=[A-Z]|\\b)\nSee: <a href=\"https://regex101.com/r/popMSp/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/popMSp/1</a></p>\n\n<p>Explanation:\nread 'word' starting with capital ([A-Z]), followed by several undercase letters ([a-z]+), until you encounter uppercase letter [A-Z] or \\b</p>\n\n<p>In code you leave out the boundary option, because this doesn't need to be replaced:</p>\n\n<pre><code>def addMinus(str)\n  str.gsub(/([A-Z][a-z]+(?=[A-Z]))/, \"\\\\1-\")\nend\n\nprint addMinus('ThisIsMyString'), \"\\n\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 1, "creation_date": 1503477057, "post_id": 45834529, "comment_id": 78626193, "body": "Agree with the use of <code>\\d+</code> deleted my answer in favour of this one."}], "tags": [], "owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "is_accepted": true, "score": 1, "last_activity_date": 1503476929, "creation_date": 1503476929, "answer_id": 45834529, "question_id": 45834123, "link": "https://stackoverflow.com/questions/45834123/change-numbers-to-characters-with-regex/45834529#45834529", "title": "Change numbers to characters with regex", "body": "<p>Just wrap another <code>gsub</code> around it:</p>\n\n<pre><code>def kebabize(str)\n str.gsub(/\\d+/, '').gsub(/(?=[A-Z])/, '-').downcase\nend\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 8041945, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e11758949228df43138240ec1e7b9bdf?s=128&d=identicon&r=PG&f=1", "display_name": "LewMoore", "link": "https://stackoverflow.com/users/8041945/lewmoore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 45834529, "answer_count": 2, "score": 2, "last_activity_date": 1503478769, "creation_date": 1503475726, "last_edit_date": 1503476545, "question_id": 45834123, "link": "https://stackoverflow.com/questions/45834123/change-numbers-to-characters-with-regex", "title": "Change numbers to characters with regex", "body": "<p>I'm trying to convert a string to incorporate hyphens (-) between words and change to lowercase. For example:</p>\n\n<ul>\n<li>From <code>'ThisIsMyString'</code> to <code>'this-is-my-string'</code></li>\n</ul>\n\n<p>This is my code so far:</p>\n\n<pre><code>def kebabize(str)\n str.gsub(/(?=[A-Z])/, '-').downcase\nend\n</code></pre>\n\n<p>I also need it to remove numbers from the string. Example:</p>\n\n<ul>\n<li>From <code>'ThereIs3Words'</code> to <code>'there-is-words'</code></li>\n</ul>\n\n<p>What do I need to add to the code to do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 8213773, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a6cfecf326ae47889cbcd19c2970d17?s=128&d=identicon&r=PG&f=1", "display_name": "yamaoka", "link": "https://stackoverflow.com/users/8213773/yamaoka"}, "edited": false, "score": 0, "creation_date": 1503476491, "post_id": 45834201, "comment_id": 78625826, "body": "Oh ok, so you can use the methods a model class has because you can actually call a model object in a controller and then call its methods...hmm"}, {"owner": {"reputation": 1228, "user_id": 4497621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d140bf5c97a7ee616b0f21189fa9373?s=128&d=identicon&r=PG&f=1", "display_name": "John Hayes-Reed", "link": "https://stackoverflow.com/users/4497621/john-hayes-reed"}, "reply_to_user": {"reputation": 121, "user_id": 8213773, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a6cfecf326ae47889cbcd19c2970d17?s=128&d=identicon&r=PG&f=1", "display_name": "yamaoka", "link": "https://stackoverflow.com/users/8213773/yamaoka"}, "edited": false, "score": 0, "creation_date": 1503476631, "post_id": 45834201, "comment_id": 78625901, "body": "Yeah, so you create an instance of the model, like <code>@user = User.find(1)</code>. you then use that instance and call its methods, like <code>@user.destroy</code>. The same way you would with any class or instance."}, {"owner": {"reputation": 121, "user_id": 8213773, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a6cfecf326ae47889cbcd19c2970d17?s=128&d=identicon&r=PG&f=1", "display_name": "yamaoka", "link": "https://stackoverflow.com/users/8213773/yamaoka"}, "edited": false, "score": 0, "creation_date": 1503477009, "post_id": 45834201, "comment_id": 78626161, "body": "Does the model.rb file get read when a model method is called? I would like to know the order in which the file gets read."}, {"owner": {"reputation": 1228, "user_id": 4497621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d140bf5c97a7ee616b0f21189fa9373?s=128&d=identicon&r=PG&f=1", "display_name": "John Hayes-Reed", "link": "https://stackoverflow.com/users/4497621/john-hayes-reed"}, "reply_to_user": {"reputation": 121, "user_id": 8213773, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a6cfecf326ae47889cbcd19c2970d17?s=128&d=identicon&r=PG&f=1", "display_name": "yamaoka", "link": "https://stackoverflow.com/users/8213773/yamaoka"}, "edited": false, "score": 0, "creation_date": 1503477126, "post_id": 45834201, "comment_id": 78626244, "body": "Rails autoloads all files in the app/ directory when the server / console is started. So all classes (models, controllers, any custom made classes etc) are already ready and waiting in memory to be called from anywhere."}, {"owner": {"reputation": 121, "user_id": 8213773, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a6cfecf326ae47889cbcd19c2970d17?s=128&d=identicon&r=PG&f=1", "display_name": "yamaoka", "link": "https://stackoverflow.com/users/8213773/yamaoka"}, "edited": false, "score": 0, "creation_date": 1503477422, "post_id": 45834201, "comment_id": 78626428, "body": "I&#39;m guessing there is an order to this and I would like to know whether the actual order would be that a model.rb would get read right after a controller action calls the model method. Or is the autoload thing something different than an order of files being read?"}, {"owner": {"reputation": 1228, "user_id": 4497621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d140bf5c97a7ee616b0f21189fa9373?s=128&d=identicon&r=PG&f=1", "display_name": "John Hayes-Reed", "link": "https://stackoverflow.com/users/4497621/john-hayes-reed"}, "reply_to_user": {"reputation": 121, "user_id": 8213773, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a6cfecf326ae47889cbcd19c2970d17?s=128&d=identicon&r=PG&f=1", "display_name": "yamaoka", "link": "https://stackoverflow.com/users/8213773/yamaoka"}, "edited": false, "score": 0, "creation_date": 1503477591, "post_id": 45834201, "comment_id": 78626543, "body": "Yes the autoload is different, so files are not read in an order like you are asking, all the files are read and all classes loaded into memory when the server or console starts. What you are thinking about is the request cycle, which is: A request is sent, the routes file then directs the request to the correct controller and correct action, the logic you write in the action (for example @users = User.all) is then run, at the end of the action, the template is then rendered, or redirects to another action."}], "tags": [], "owner": {"reputation": 1228, "user_id": 4497621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d140bf5c97a7ee616b0f21189fa9373?s=128&d=identicon&r=PG&f=1", "display_name": "John Hayes-Reed", "link": "https://stackoverflow.com/users/4497621/john-hayes-reed"}, "is_accepted": true, "score": 2, "last_activity_date": 1503475974, "creation_date": 1503475974, "answer_id": 45834201, "question_id": 45833851, "link": "https://stackoverflow.com/questions/45833851/does-a-controller-extend-from-a-model-in-rails/45834201#45834201", "title": "Does a controller extend from a model in Rails?", "body": "<h3>TL;DR</h3>\n\n<p>No, it doesn't.</p>\n\n<h3>General Answer</h3>\n\n<p>A controller does not <code>have access</code> to model methods as you think, in the controller you never just write <code>all</code> or <code>create</code>, you write something like <code>User.all</code> or <code>@user.create</code>. You are calling the methods <strong>on the model</strong> class or instance. You are simply using the model in the controller, but this is not limited to the controller, you could do exactly the same thing in the views if you really wanted to, or you could create custom service objects, or policy objects, or repository objects, and you could still call <code>User.all</code> etc from inside them too.</p>\n\n<p>For a very basic application you are correct you can get by writing very little or no logic, but this is only because Rails provides us with methods and does it all for us (hooray!).</p>\n"}, {"comments": [{"owner": {"reputation": 121, "user_id": 8213773, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a6cfecf326ae47889cbcd19c2970d17?s=128&d=identicon&r=PG&f=1", "display_name": "yamaoka", "link": "https://stackoverflow.com/users/8213773/yamaoka"}, "edited": false, "score": 0, "creation_date": 1503476895, "post_id": 45834379, "comment_id": 78626081, "body": "So after the route.rb file is read and then the controller.rb file, does the model file get read when Model.all is used in the controller action?"}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "reply_to_user": {"reputation": 121, "user_id": 8213773, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a6cfecf326ae47889cbcd19c2970d17?s=128&d=identicon&r=PG&f=1", "display_name": "yamaoka", "link": "https://stackoverflow.com/users/8213773/yamaoka"}, "edited": false, "score": 0, "creation_date": 1503477239, "post_id": 45834379, "comment_id": 78626309, "body": "Yes, the route directs to the correct model action, the model action will call class methods (<code>Model.all</code>) and instance methods (<code>@my_model.save</code>) as it needs to.   If you have something that needs to be done with several models you might build a &quot;service&quot;  that makes it one call for the controller."}], "tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": false, "score": 1, "last_activity_date": 1503476532, "creation_date": 1503476532, "answer_id": 45834379, "question_id": 45833851, "link": "https://stackoverflow.com/questions/45833851/does-a-controller-extend-from-a-model-in-rails/45834379#45834379", "title": "Does a controller extend from a model in Rails?", "body": "<p>Nothing in a model file just means nothing <em>specific</em> to this particular model... inheriting from <code>ApplicationRecord</code> or <code>ActiveRecord::Base</code> means you have built in all the class methods (<code>all</code>, <code>where</code>, <code>find</code>, <code>find_by</code>, etc) and all the instance methods (<code>new</code>, <code>create</code>, <code>update_attributes</code>, etc) pre-defined for the model.</p>\n\n<p>The controller determines what needs to happen, the model has the methods to make it happen, so </p>\n\n<pre><code>def index\n  @model =  Model.all\nend\n</code></pre>\n\n<p>Means that at the point of displaying a list of all model records, you access the model's class method <code>all</code></p>\n"}], "owner": {"reputation": 121, "user_id": 8213773, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a6cfecf326ae47889cbcd19c2970d17?s=128&d=identicon&r=PG&f=1", "display_name": "yamaoka", "link": "https://stackoverflow.com/users/8213773/yamaoka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 45834201, "answer_count": 2, "score": 0, "last_activity_date": 1503476532, "creation_date": 1503474949, "last_edit_date": 1503476513, "question_id": 45833851, "link": "https://stackoverflow.com/questions/45833851/does-a-controller-extend-from-a-model-in-rails", "title": "Does a controller extend from a model in Rails?", "body": "<p>Been working on Rails for a bit I can't get my head wrapped around how there is almost nothing written in a model.rb file when just creating a basic CRUD application.</p>\n\n<p>I was looking at a controller.rb file and was wondering why the controller file has access to model methods like all and create when there seems to be no connection between the two files.</p>\n\n<p>Should't the model object methods like modelname.all and modelname.create etc. be written in the model file instead of the controller file?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "prawn"], "owner": {"reputation": 491, "user_id": 5850835, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/S5r1S.jpg?s=128&g=1", "display_name": "Thush-Fdo", "link": "https://stackoverflow.com/users/5850835/thush-fdo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 255, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1566541899, "creation_date": 1503473843, "last_edit_date": 1566541899, "question_id": 45833466, "link": "https://stackoverflow.com/questions/45833466/how-to-have-ruby-prawn-column-boxes-side-by-side", "title": "How to have ruby Prawn column_boxes side by side", "body": "<p><strong>My Prob :</strong> I need to have two tables side by side in pdf using ruby prawn gem.</p>\n\n<p><strong>What did I do so far :</strong></p>\n\n<pre><code>  column_box([0, cursor], :columns =&gt; 2, :width =&gt; bounds.width) do\n    table(tdy_order_stats, :header=&gt; true) do\n       row(0).style font_style: :bold # header style\n    end\n\n    table(tdy_order_types, :header=&gt; true) do\n       row(0).style font_style: :bold # header style\n    end\n\n  end\n</code></pre>\n\n<p><strong>Notes</strong> : in above code <strong>\"tdy_order_stats\"</strong> and <strong>\"tdy_order_types\"</strong> are two ruby arrays. if I have lot of array elements (more than 30) it goes to the other column but second table starts after first one completes.</p>\n\n<p><strong>Issue</strong> : In my arrays I have only 3-4 elements. How to make them side by side in pdf????</p>\n\n<pre><code>          table 1                              table 2\n   --------------------                  --------------------\n   --------------------                  --------------------\n   --------------------                  --------------------\n   --------------------                  --------------------\n</code></pre>\n"}, {"tags": ["ruby", "hanami"], "answers": [{"tags": [], "owner": {"reputation": 830, "user_id": 4468613, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/cvOh0.jpg?s=128&g=1", "display_name": "Danny Santos", "link": "https://stackoverflow.com/users/4468613/danny-santos"}, "is_accepted": false, "score": 1, "last_activity_date": 1569321832, "creation_date": 1569321832, "answer_id": 58078526, "question_id": 45833127, "link": "https://stackoverflow.com/questions/45833127/hanami-parameters-whitelisting/58078526#58078526", "title": "Hanami parameters whitelisting", "body": "<p>I have never had this issue when using Hanami Validations. Within the app directory there should be a validations folder which should have the same directory structure as your controllers, views, templates etc. Your validation file should look something like this:</p>\n\n<pre><code># apps/web/validations/users/create.rb\n\nmodule Web\n  module Validations\n    module Users\n      class Create &lt; Web::Action::Params\n        predicates Web::Validations::CommonPredicates\n\n        validations do\n          required(:email).filled\n\n          required(:address).schema do\n            required(:country).filled\n          end\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>And then your controller should set the params to be filtered through the validation:</p>\n\n<pre><code>module Web\n  module Controllers\n    module Users\n      class Create\n        include Web::Action\n\n        params Web::Validations::Users::Create\n\n        def call(params); end\n      end\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1070, "user_id": 1401773, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/kxDMC.jpg?s=128&g=1", "display_name": "Rodrigo Vasconcelos", "link": "https://stackoverflow.com/users/1401773/rodrigo-vasconcelos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1569321832, "creation_date": 1503472873, "question_id": 45833127, "link": "https://stackoverflow.com/questions/45833127/hanami-parameters-whitelisting", "title": "Hanami parameters whitelisting", "body": "<p>Following the <a href=\"http://hanamirb.org/guides/actions/parameters/\" rel=\"nofollow noreferrer\">hanami docs</a>, in order to block a <code>admin</code> parameter inside an action, I can use the following configuration:</p>\n\n<pre><code>params do\n  required(:email).filled\n\n  required(:address).schema do\n    required(:country).filled\n  end\nend\n\ndef call(params)\n  puts params[:email]             # =&gt; \"alice@example.org\"\n  puts params[:address][:country] # =&gt; \"Italy\"\n  puts params[:admin]             # =&gt; nil\nend \n</code></pre>\n\n<p>But this does not work for nested parameters, i.e.:</p>\n\n<pre><code>params do\n  required(:email).filled\n\n  required(:address).schema do\n    required(:country).filled\n  end\nend\n\ndef call(params)\n  puts params[:email]             # =&gt; \"alice@example.org\"\n  puts params[:address]           # =&gt; { country: \"Italy\", admin: true }\n  puts params[:address][:admin]   # =&gt; true\nend \n</code></pre>\n\n<p>I was able to solve this by using <code>select</code> to filter out the undesirable parameters with a private method, but this does not seems like the Hanami way. What would be the proper way to do this whitelisting of nested parameters?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "redis", "thread-safety", "sidekiq"], "answers": [{"comments": [{"owner": {"reputation": 189, "user_id": 3978752, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1e66d75a76c4af053305b0e2021788e7?s=128&d=identicon&r=PG&f=1", "display_name": "Rares R", "link": "https://stackoverflow.com/users/3978752/rares-r"}, "edited": false, "score": 0, "creation_date": 1503475327, "post_id": 45833093, "comment_id": 78625021, "body": "Really good explanation! But I&#39;m not quite sure how the example would fail (and keep incorrect values). So to be clear there is no problem for me to use the $redis connection as a global variable and allow Sidekiq Jobs accessing it. ( from the Redis docs I can see that Redis is single threaded. Thank you :)"}], "tags": [], "owner": {"reputation": 3478, "user_id": 3013527, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c9868f873dba597ec6644e7430fd29b5?s=128&d=identicon&r=PG&f=1", "display_name": "GuangshengZuo", "link": "https://stackoverflow.com/users/3013527/guangshengzuo"}, "is_accepted": false, "score": 0, "last_activity_date": 1503472758, "creation_date": 1503472758, "answer_id": 45833093, "question_id": 45832427, "link": "https://stackoverflow.com/questions/45832427/redis-variable-in-sidekiq-and-puma-thread-safe/45833093#45833093", "title": "Redis variable in Sidekiq and Puma, thread safe?", "body": "<p>Actually, the thread safe has nothing with the global variable $redis. $redis just hold a connection to redis server. And the redis server is a single-thread model about process client request, so it will process request command as the command queue's order. </p>\n\n<p>But notice that Sidekiq is multithreading. If your sidekip hold many thread and every thread will send command to redis server. There will be a thread safe problem.  please read the <a href=\"https://redis.io/topics/transactions\" rel=\"nofollow noreferrer\">transaction of redis</a> to learn more.</p>\n\n<p>About your code, I do not understand very much. But in one point, if your DashboardChannel's subcribe and unsubcribe is running in multithreading or multiprocessing, you should notice that the bad thing will happen.</p>\n\n<p>e.g. if the action  happens in the order below, </p>\n\n<p>number1 = client-1 get key</p>\n\n<p>number2 = client-2 get key</p>\n\n<p>client-1 set key number1 + 1</p>\n\n<p>client-2 set key number2 + 1</p>\n\n<p>Then your key will hold an incorrect value opposed to the real number. If So, try use the redis watch.</p>\n"}], "owner": {"reputation": 189, "user_id": 3978752, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1e66d75a76c4af053305b0e2021788e7?s=128&d=identicon&r=PG&f=1", "display_name": "Rares R", "link": "https://stackoverflow.com/users/3978752/rares-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 515, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503472758, "creation_date": 1503470665, "last_edit_date": 1503471066, "question_id": 45832427, "link": "https://stackoverflow.com/questions/45832427/redis-variable-in-sidekiq-and-puma-thread-safe", "title": "Redis variable in Sidekiq and Puma, thread safe?", "body": "<p>I'm currently building a dashboards app, and I'm not to sure that my solution is the right one.</p>\n\n<p>Currently I have a Sidekiq Job that runs every 30 seconds. The job saves data to the DB and streams the new result to each dashboard.</p>\n\n<p>The problem I had to solve is from this job to stream data ( with ActionCable ) only to the 'online' dashboards. ( If the dashboard was open in a browser tab )</p>\n\n<p>The solution was to save in Redis from my DashboardChannel, like:</p>\n\n<pre><code>class DashboardChannel &lt; ApplicationCable::Channel\n def subscribed\n   stream_from \"dashboard:#{params['dashboard_id']}\"\n\n   tabs_number = $redis.get(\"dashboard_#{params['dashboard_id']}_online\").to_i\n   $redis.set(\"dashboard_#{params['dashboard_id']}_online\", tabs_number+=1)\n end\n\n def unsubscribed\n   tabs_number = $redis.get(\"dashboard_#{params['dashboard_id']}_online\").to_i\n   tabs_number-=1\n\n   if tabs_number == 0\n     $redis.del(\"dashboard_#{params['dashboard_id']}_online\")\n   else\n     $redis.set(\"dashboard_#{params['dashboard_id']}_online\", tabs_number)\n   end\n end\nend\n</code></pre>\n\n<p>I save the number of tabs open in a key \"dashboard_#{DASHBOARD_ID}_online\". Its kinda important to save the number of tabs because if you only save true / false (1/0), when the dashboard is opened in 2 tabs, and one is closed it will be marked as offline.</p>\n\n<p>In my Sidekiq Job I have something like:</p>\n\n<pre><code>      if Dashboard.online?(widget.dashboard_id) # returns true / false\n        ActionCable.server.broadcast \"dashboard:#{widget.dashboard_id}\", \n          { widget_id: widget.id, \n            dashboard_id: widget.dashboard_id, \n            value: data_value.value, \n            recorded_at: data_value.recorded_at.strftime(\"%I:%M%p\"), \n            in_bounds: data_value.in_bounds\n          }\n     end\n</code></pre>\n\n<p>The Online method app/models/dashboard.rb</p>\n\n<pre><code>  def self.online?(dashboard_id)\n    !$redis.get(\"dashboard_#{dashboard_id}_online\").nil?\n  end\n</code></pre>\n\n<p>In app/initializers/sidekiq.rb</p>\n\n<pre><code>url = ENV[\"REDISTOGO_URL\"] || \"redis://localhost:6379/0\"\nuri = URI.parse(ENV[\"REDISTOGO_URL\"] || \"redis://localhost:6379/\")\n\n\nSidekiq.configure_server do |config|\n  config.redis = { url: url, size: 4 }\nend\n\nSidekiq.configure_client do |config|\n  config.redis = { url: url, size: 4 }\nend\n\n$redis = Redis.new(host: uri.host, port: uri.port, password: uri.password)\n</code></pre>\n\n<p>In app/initializers/redis.rb</p>\n\n<pre><code>uri = URI.parse(ENV[\"REDISTOGO_URL\"] || \"redis://localhost:6379/\")\n$redis = Redis.new(host: uri.host, port: uri.port, password: uri.password)\n\n# Remove all 'online dashboard' keys\nkeys = $redis.keys(\"dashboard_\")\n$redis.del(*keys) unless keys.empty?\n</code></pre>\n\n<p>My question: Is it ok to use the '$redis' global variable declared in 'app/initializers/sidekiq.rb' in the Sidekiq Job? Is it thread save?</p>\n\n<p>Currently I did not found a workflow issue wit this code approach, but I'm concern that '$redis' global variable, should not be 'near' a Sidekiq Job.</p>\n\n<p>Feel free to add code recommendations. Thank you and have a nice day!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "truncate", "slim-lang"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 1, "creation_date": 1503470716, "post_id": 45832426, "comment_id": 78622046, "body": "What is the error?"}, {"owner": {"reputation": 610, "user_id": 4057576, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/e5qu0.jpg?s=128&g=1", "display_name": "Charles Skariah", "link": "https://stackoverflow.com/users/4057576/charles-skariah"}, "edited": false, "score": 0, "creation_date": 1503470899, "post_id": 45832426, "comment_id": 78622157, "body": "Code seems to be working, might be something to do with the string you are passing to the truncate method or it may be because of the outside method is the culprit of causing issues.Please post your error to identify solution"}, {"owner": {"reputation": 10770, "user_id": 381874, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/k7VRE.jpg?s=128&g=1", "display_name": "Sachin R", "link": "https://stackoverflow.com/users/381874/sachin-r"}, "edited": false, "score": 0, "creation_date": 1503471677, "post_id": 45832426, "comment_id": 78622655, "body": "Is your body consist html tags ???"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1503473040, "post_id": 45832426, "comment_id": 78623449, "body": "post your error as well"}, {"owner": {"reputation": 807, "user_id": 1688322, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/cZ6Ai.jpg?s=128&g=1", "display_name": "Robin van Dijk", "link": "https://stackoverflow.com/users/1688322/robin-van-dijk"}, "edited": false, "score": 1, "creation_date": 1503474688, "post_id": 45832426, "comment_id": 78624601, "body": "Make sure body is not <code>nil</code>"}, {"owner": {"reputation": 367, "user_id": 1743452, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/b24be693471aabcc9ca974b5912c9624?s=128&d=identicon&r=PG", "display_name": "Hirohito Yamada", "link": "https://stackoverflow.com/users/1743452/hirohito-yamada"}, "edited": false, "score": 0, "creation_date": 1503478841, "post_id": 45832426, "comment_id": 78627361, "body": "It just shows blank page on production so I can&#39;t really look at the error. My body text can&#39;t include tags but do have URL&#39;s in them sometimes. Some body could be nil... is that why its showing the error?"}, {"owner": {"reputation": 103, "user_id": 8468605, "user_type": "registered", "profile_image": "https://graph.facebook.com/1636531823037886/picture?type=large", "display_name": "Nazeef Ahmad Meer", "link": "https://stackoverflow.com/users/8468605/nazeef-ahmad-meer"}, "edited": false, "score": 0, "creation_date": 1503510871, "post_id": 45832426, "comment_id": 78650862, "body": "Kindly explain your question well. Are you getting an Error or the problem is you are not getting the required functionality?"}], "owner": {"reputation": 367, "user_id": 1743452, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/b24be693471aabcc9ca974b5912c9624?s=128&d=identicon&r=PG", "display_name": "Hirohito Yamada", "link": "https://stackoverflow.com/users/1743452/hirohito-yamada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 283, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1503583704, "creation_date": 1503470665, "last_edit_date": 1503583704, "question_id": 45832426, "link": "https://stackoverflow.com/questions/45832426/how-could-i-truncate-in-rails", "title": "How could I truncate in rails", "body": "<p>I have this following code</p>\n\n<pre><code>= simple_format(h auto_link(work.body.truncate(140)))\n</code></pre>\n\n<p>Trying to truncate the body text. But this gives me error.\nHow could I make truncate work in this kind of occasion?</p>\n\n<p>Thank you for your time in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 7704115, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/nj8vZ.png?s=128&g=1", "display_name": "Rawan _", "link": "https://stackoverflow.com/users/7704115/rawan"}, "edited": false, "score": 0, "creation_date": 1503469914, "post_id": 45831954, "comment_id": 78621573, "body": "Thanks ! One more question, please. If the link is one I made and it&#39;s in my local pc, for example, I have a page called robotics.html.erb I want to link to. Do I link it like robotics_path ??"}, {"owner": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "reply_to_user": {"reputation": 41, "user_id": 7704115, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/nj8vZ.png?s=128&g=1", "display_name": "Rawan _", "link": "https://stackoverflow.com/users/7704115/rawan"}, "edited": false, "score": 0, "creation_date": 1503470311, "post_id": 45831954, "comment_id": 78621810, "body": "Yea, you can provide any url. But make sure that you have <code>robotics_path</code> helper: <code>rake routes</code> lists all the routes (with urls and helpers) defined in the application."}], "tags": [], "owner": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "is_accepted": true, "score": 4, "last_activity_date": 1503468964, "creation_date": 1503468964, "answer_id": 45831954, "question_id": 45831918, "link": "https://stackoverflow.com/questions/45831918/how-to-use-link-to-in-rails-to-put-multiple-things-in-a-single-link/45831954#45831954", "title": "How to use link_to in rails to put multiple things in a single link?", "body": "<p><a href=\"https://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to\" rel=\"nofollow noreferrer\"><code>link_to</code> </a> method can take a block and display it's evaluation as a link content:</p>\n\n<pre><code>&lt;%= link_to \"https://www.livescience.com/59802-should-we-fear-intelligent-\n  robots.html\" do %&gt;\n   &lt;div class=\"thumbnail\"&gt;\n     &lt;div class=\"date\"&gt;\n         &lt;div class=\"day\"&gt;14&lt;/div&gt;\n             &lt;div class=\"month\"&gt;Jul&lt;/div&gt;\n                 &lt;/div&gt;&lt;img src=\"#\"/&gt;\n             &lt;/div&gt;\n             &lt;div class=\"post-content\"&gt;\n                 &lt;div class=\"category\"&gt;Robots&lt;/div&gt;\n                 &lt;h1 class=\"title\"&gt;Should We Fear The Rise of \n                 Intelligent Robots? &lt;/h1&gt;\n                 &lt;h2 class=\"sub_title\"&gt; Robots will unite. &lt;/h2&gt;\n                 &lt;p class=\"description\"&gt;&lt;/p&gt;\n             &lt;/div&gt; \n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 7704115, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/nj8vZ.png?s=128&g=1", "display_name": "Rawan _", "link": "https://stackoverflow.com/users/7704115/rawan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 593, "favorite_count": 1, "accepted_answer_id": 45831954, "answer_count": 1, "score": 0, "last_activity_date": 1503469282, "creation_date": 1503468777, "last_edit_date": 1503469282, "question_id": 45831918, "link": "https://stackoverflow.com/questions/45831918/how-to-use-link-to-in-rails-to-put-multiple-things-in-a-single-link", "title": "How to use link_to in rails to put multiple things in a single link?", "body": "<p>This is my code: </p>\n\n<pre><code> &lt;div class=\"column\"&gt;\n     &lt;div class=\"post-module\"&gt;\n          &lt;a href=\"https://www.livescience.com/59802-should-we-fear-\n               intelligent-robots.html\" &gt;\n          &lt;div class=\"thumbnail\"&gt;\n              &lt;div class=\"date\"&gt;\n                  &lt;div class=\"day\"&gt;14&lt;/div&gt;\n                  &lt;div class=\"month\"&gt;Jul&lt;/div&gt;\n              &lt;/div&gt;\n              &lt;img src=\"#\"/&gt;\n          &lt;/div&gt;\n          &lt;div class=\"post-content\"&gt;\n              &lt;div class=\"category\"&gt;Robots&lt;/div&gt;\n              &lt;h1 class=\"title\"&gt;Should We Fear The Rise of Intelligent \n               Robots? &lt;/h1&gt;\n              &lt;h2 class=\"sub_title\"&gt; Robots will unite. &lt;/h2&gt;\n              &lt;p class=\"description\"&gt;&lt;/p&gt;\n          &lt;/div&gt; \n        &lt;/a&gt;       \n    &lt;/div&gt;\n&lt;/div&gt;  \n</code></pre>\n\n<p>I want to make that code in rails but I am just a beginner in rails and I wasn't able to find something that could help me in this. I only know the basic idea of the link_to in rails. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rails-activerecord"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1503464792, "post_id": 45830920, "comment_id": 78619374, "body": "Is this <code>User.includes(:addresses).where(active: true).where(addresses: {city: &#39;Foo&#39;})</code> what you are looking for?"}, {"owner": {"reputation": 10229, "user_id": 195130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e8ae4e7eded8cd37805b4b31cc1f1c53?s=128&d=identicon&r=PG", "display_name": "Chandra Sekar", "link": "https://stackoverflow.com/users/195130/chandra-sekar"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1503465099, "post_id": 45830920, "comment_id": 78619496, "body": "That excludes users who don&#39;t have any address in &quot;Foo&quot;."}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1503468497, "post_id": 45830920, "comment_id": 78620878, "body": "Your request is not very clear, as evidenced by the various answers that don&#39;t produce what you are trying to get. Consider presenting examples of a few User records with various combinations of Addresses and show the desired filtered result."}, {"owner": {"reputation": 10229, "user_id": 195130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e8ae4e7eded8cd37805b4b31cc1f1c53?s=128&d=identicon&r=PG", "display_name": "Chandra Sekar", "link": "https://stackoverflow.com/users/195130/chandra-sekar"}, "edited": false, "score": 0, "creation_date": 1503470286, "post_id": 45830920, "comment_id": 78621789, "body": "Added some examples."}], "answers": [{"comments": [{"owner": {"reputation": 10229, "user_id": 195130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e8ae4e7eded8cd37805b4b31cc1f1c53?s=128&d=identicon&r=PG", "display_name": "Chandra Sekar", "link": "https://stackoverflow.com/users/195130/chandra-sekar"}, "edited": false, "score": 0, "creation_date": 1503466155, "post_id": 45831184, "comment_id": 78619900, "body": "Nope, that&#39;s not what want. It excludes users that don&#39;t have any <code>address</code> where <code>city: Foo</code> and needs separate queries to fetch the attributes of matching addresses."}, {"owner": {"reputation": 109, "user_id": 5856809, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-01sM-dejRWU/AAAAAAAAAAI/AAAAAAAAACE/FNXYyY6pjJo/photo.jpg?sz=128", "display_name": "Ankur Pohekar", "link": "https://stackoverflow.com/users/5856809/ankur-pohekar"}, "reply_to_user": {"reputation": 10229, "user_id": 195130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e8ae4e7eded8cd37805b4b31cc1f1c53?s=128&d=identicon&r=PG", "display_name": "Chandra Sekar", "link": "https://stackoverflow.com/users/195130/chandra-sekar"}, "edited": false, "score": 0, "creation_date": 1503466653, "post_id": 45831184, "comment_id": 78620088, "body": "try <code>Inner Join</code>User.joins(:addresses)"}, {"owner": {"reputation": 10229, "user_id": 195130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e8ae4e7eded8cd37805b4b31cc1f1c53?s=128&d=identicon&r=PG", "display_name": "Chandra Sekar", "link": "https://stackoverflow.com/users/195130/chandra-sekar"}, "edited": false, "score": 0, "creation_date": 1503466888, "post_id": 45831184, "comment_id": 78620171, "body": "That&#39;ll exclude users who don&#39;t have any address at all, but really changes nothing. :)"}, {"owner": {"reputation": 109, "user_id": 5856809, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-01sM-dejRWU/AAAAAAAAAAI/AAAAAAAAACE/FNXYyY6pjJo/photo.jpg?sz=128", "display_name": "Ankur Pohekar", "link": "https://stackoverflow.com/users/5856809/ankur-pohekar"}, "reply_to_user": {"reputation": 10229, "user_id": 195130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e8ae4e7eded8cd37805b4b31cc1f1c53?s=128&d=identicon&r=PG", "display_name": "Chandra Sekar", "link": "https://stackoverflow.com/users/195130/chandra-sekar"}, "edited": false, "score": 0, "creation_date": 1503467236, "post_id": 45831184, "comment_id": 78620314, "body": ":) try .where(&quot;users.active=? AND addresses.city=?&quot;, true, &quot;FOO&quot;)"}, {"owner": {"reputation": 10229, "user_id": 195130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e8ae4e7eded8cd37805b4b31cc1f1c53?s=128&d=identicon&r=PG", "display_name": "Chandra Sekar", "link": "https://stackoverflow.com/users/195130/chandra-sekar"}, "edited": false, "score": 0, "creation_date": 1503467373, "post_id": 45831184, "comment_id": 78620366, "body": "How is this different from Pavan&#39;s suggestion in his direct comment on the question?"}], "tags": [], "owner": {"reputation": 109, "user_id": 5856809, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-01sM-dejRWU/AAAAAAAAAAI/AAAAAAAAACE/FNXYyY6pjJo/photo.jpg?sz=128", "display_name": "Ankur Pohekar", "link": "https://stackoverflow.com/users/5856809/ankur-pohekar"}, "is_accepted": false, "score": 0, "last_activity_date": 1503465631, "creation_date": 1503465631, "answer_id": 45831184, "question_id": 45830920, "link": "https://stackoverflow.com/questions/45830920/include-all-objects-but-apply-conditions-only-on-associations-in-activerecord/45831184#45831184", "title": "Include all objects but apply conditions only on associations in ActiveRecord", "body": "<p>please try\nadd in <code>Address</code> model</p>\n\n<pre><code>class Address &lt; ActiveRecord::Base\n  belongs_to :user  \nend\n</code></pre>\n\n<p>then your query be like</p>\n\n<pre><code>User.joins(\"LEFT JOIN addresses ON users.id=addresses.user_id\").where(\"users.active=? AND addresses.city=?\", true, \"FOO\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 10229, "user_id": 195130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e8ae4e7eded8cd37805b4b31cc1f1c53?s=128&d=identicon&r=PG", "display_name": "Chandra Sekar", "link": "https://stackoverflow.com/users/195130/chandra-sekar"}, "edited": false, "score": 0, "creation_date": 1503467991, "post_id": 45831558, "comment_id": 78620619, "body": "This excludes users who have addresses with cities other than &quot;Foo&quot;."}, {"owner": {"reputation": 966, "user_id": 5350659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63535c11d66f71640d7a5a558b351d11?s=128&d=identicon&r=PG&f=1", "display_name": "Pitabas Prathal", "link": "https://stackoverflow.com/users/5350659/pitabas-prathal"}, "reply_to_user": {"reputation": 10229, "user_id": 195130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e8ae4e7eded8cd37805b4b31cc1f1c53?s=128&d=identicon&r=PG", "display_name": "Chandra Sekar", "link": "https://stackoverflow.com/users/195130/chandra-sekar"}, "edited": false, "score": 0, "creation_date": 1503470289, "post_id": 45831558, "comment_id": 78621792, "body": "So why  you want to filter with <code>Foo</code> if you need all records you can use <code>group_by</code>  to group result with city <code>Foo</code>  and with city <code>orther</code>"}, {"owner": {"reputation": 10229, "user_id": 195130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e8ae4e7eded8cd37805b4b31cc1f1c53?s=128&d=identicon&r=PG", "display_name": "Chandra Sekar", "link": "https://stackoverflow.com/users/195130/chandra-sekar"}, "edited": false, "score": 0, "creation_date": 1503470471, "post_id": 45831558, "comment_id": 78621898, "body": "I have updated the question with example data and result. Hopefully that clarifies things."}, {"owner": {"reputation": 10229, "user_id": 195130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e8ae4e7eded8cd37805b4b31cc1f1c53?s=128&d=identicon&r=PG", "display_name": "Chandra Sekar", "link": "https://stackoverflow.com/users/195130/chandra-sekar"}, "edited": false, "score": 0, "creation_date": 1503553796, "post_id": 45831558, "comment_id": 78665501, "body": "That returns <code>User</code> objects without any address first and when I try to access the <code>addresses</code> attribute, it fires a query for each user and includes all addresses without applying the city condition."}, {"owner": {"reputation": 966, "user_id": 5350659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63535c11d66f71640d7a5a558b351d11?s=128&d=identicon&r=PG&f=1", "display_name": "Pitabas Prathal", "link": "https://stackoverflow.com/users/5350659/pitabas-prathal"}, "reply_to_user": {"reputation": 10229, "user_id": 195130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e8ae4e7eded8cd37805b4b31cc1f1c53?s=128&d=identicon&r=PG", "display_name": "Chandra Sekar", "link": "https://stackoverflow.com/users/195130/chandra-sekar"}, "edited": false, "score": 0, "creation_date": 1503561828, "post_id": 45831558, "comment_id": 78670166, "body": "you don&#39;t need to access the <code>addresses</code> by <code>user.addresses</code>.The <code>address</code> is already <code>join</code> to the <code>user</code> table. You can directly access <code>user.city</code> or <code>user.street</code>"}, {"owner": {"reputation": 10229, "user_id": 195130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e8ae4e7eded8cd37805b4b31cc1f1c53?s=128&d=identicon&r=PG", "display_name": "Chandra Sekar", "link": "https://stackoverflow.com/users/195130/chandra-sekar"}, "edited": false, "score": 0, "creation_date": 1503635585, "post_id": 45831558, "comment_id": 78707399, "body": "Uniq on <code>User.id</code> is not what I want. A <code>User</code> can have multiple addresses in the same city. Without that, this returns duplicate users."}], "tags": [], "owner": {"reputation": 966, "user_id": 5350659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63535c11d66f71640d7a5a558b351d11?s=128&d=identicon&r=PG&f=1", "display_name": "Pitabas Prathal", "link": "https://stackoverflow.com/users/5350659/pitabas-prathal"}, "is_accepted": false, "score": 0, "last_activity_date": 1503480578, "last_edit_date": 1503480578, "creation_date": 1503467385, "answer_id": 45831558, "question_id": 45830920, "link": "https://stackoverflow.com/questions/45830920/include-all-objects-but-apply-conditions-only-on-associations-in-activerecord/45831558#45831558", "title": "Include all objects but apply conditions only on associations in ActiveRecord", "body": "<p>Try this</p>\n\n<p><code>User.joins(\"LEFT JOIN addresses on addresses.user_id = users.id\").where(active: true).select(\"users.*,if (addresses.city = 'Foo', addresses.city, '') AS 'city',if (addresses.city = 'Foo', addresses.street, '') AS 'street'\").order(\"city\").group(:id).uniq(:id)</code></p>\n"}, {"tags": [], "owner": {"reputation": 156, "user_id": 5413717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bfee6606a5d28858e1d9d0882492661?s=128&d=identicon&r=PG&f=1", "display_name": "debasish117", "link": "https://stackoverflow.com/users/5413717/debasish117"}, "is_accepted": false, "score": -1, "last_activity_date": 1503513181, "creation_date": 1503513181, "answer_id": 45847070, "question_id": 45830920, "link": "https://stackoverflow.com/questions/45830920/include-all-objects-but-apply-conditions-only-on-associations-in-activerecord/45847070#45847070", "title": "Include all objects but apply conditions only on associations in ActiveRecord", "body": "<p>I guess it can be achieved in this way , i hope it might be correct :-</p>\n\n<pre><code>User.all.select{|a|a.active == true}.map(&amp;:address).flatten.select{|v|v.city == \"Foo\" || v.city == \"\"}\n</code></pre>\n\n<p>Think it can be modified to get the proper result . Hope it helps and please do correct me if i am gone wrong .  </p>\n"}], "owner": {"reputation": 10229, "user_id": 195130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e8ae4e7eded8cd37805b4b31cc1f1c53?s=128&d=identicon&r=PG", "display_name": "Chandra Sekar", "link": "https://stackoverflow.com/users/195130/chandra-sekar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1504154049, "creation_date": 1503464243, "last_edit_date": 1504154049, "question_id": 45830920, "link": "https://stackoverflow.com/questions/45830920/include-all-objects-but-apply-conditions-only-on-associations-in-activerecord", "title": "Include all objects but apply conditions only on associations in ActiveRecord", "body": "<p>With the following models,</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :addresses\n  # Has an attribute named active\nend\n\nclass Address &lt; ActiveRecord::Base\n  # Has an attribute named city\nend\n</code></pre>\n\n<p>How do I fetch all <code>users</code> where <code>active: true</code> and for each user include only <code>addresses</code> where <code>city: Foo</code>, in a single query to the DB?</p>\n\n<p><strong>Note:</strong> If a user has no address where <code>city</code> is \"Foo\", they must still be included in the result with empty <code>addresses</code>.</p>\n\n<h2>Example Data</h2>\n\n<pre><code>test=# select * from users;\n id | name | active \n----+------+--------\n  1 | Jack | t\n  2 | John | t\n  3 | Jane | t\n  4 | Jill | f\n(4 rows)\n\ntest=# select * from addresses;\n id | user_id |    street    | city \n----+---------+--------------+------\n  1 |       1 | Foo Street   | Foo\n  2 |       1 | Bar Street   | Bar\n  3 |       2 | Bar Street   | Bar\n  4 |       4 | Foo Street   | Foo\n  5 |       1 | Foo Street 1 | Foo\n(5 rows)\n</code></pre>\n\n<h2>Expected Result</h2>\n\n<pre><code> id | name |    street    | city \n----+------+--------------+------\n  1 | Jack | Foo Street 1 | Foo\n  1 | Jack | Foo Street   | Foo\n  2 | John |              | \n  3 | Jane |              | \n(4 rows)\n</code></pre>\n\n<p>The below SQL query that can produce that result, but I can't figure out a way to get AR to generate that query or any other query to produce the above result.</p>\n\n<pre><code>select users.id, name, street, city from users left join lateral (\n  select * from addresses where addresses.user_id = users.id and city = 'Foo'\n) addr on true\nwhere users.active;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 8456726, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d92d276990ac8a54a5d0149d8fd88a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny C", "link": "https://stackoverflow.com/users/8456726/johnny-c"}, "edited": false, "score": 0, "creation_date": 1503467825, "post_id": 45830776, "comment_id": 78620532, "body": "I&#39;m getting ActionController::ParameterMissing (param is missing or the value is empty: user_profile): after making the changes. I tried to setup the strong parameters but its not working"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 121, "user_id": 8456726, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d92d276990ac8a54a5d0149d8fd88a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny C", "link": "https://stackoverflow.com/users/8456726/johnny-c"}, "edited": false, "score": 0, "creation_date": 1503467914, "post_id": 45830776, "comment_id": 78620582, "body": "Your strong params should be <code>params.require(:user_profile).permit( :birthday, :avatar, :user_id)</code>"}, {"owner": {"reputation": 121, "user_id": 8456726, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d92d276990ac8a54a5d0149d8fd88a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny C", "link": "https://stackoverflow.com/users/8456726/johnny-c"}, "edited": false, "score": 0, "creation_date": 1503468842, "post_id": 45830776, "comment_id": 78621029, "body": "The form is not populating. There must be a better way to load the user_profile than the approach I&#39;m taking. I can only see the predefined labels. None of the inputs are showing."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 121, "user_id": 8456726, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d92d276990ac8a54a5d0149d8fd88a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny C", "link": "https://stackoverflow.com/users/8456726/johnny-c"}, "edited": false, "score": 0, "creation_date": 1503469108, "post_id": 45830776, "comment_id": 78621183, "body": "@JohnnyC Keep your strong params as it is before and try changing this <code>&lt;%= simple_form_for(@user_profile, :html =&gt; {:multipart =&gt; true}) do |f| %&gt;</code> to <code>&lt;%= simple_form_for(current_user, :html =&gt; {:multipart =&gt; true}) do |f| %&gt;</code>"}, {"owner": {"reputation": 121, "user_id": 8456726, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d92d276990ac8a54a5d0149d8fd88a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny C", "link": "https://stackoverflow.com/users/8456726/johnny-c"}, "edited": false, "score": 0, "creation_date": 1503502933, "post_id": 45830776, "comment_id": 78646128, "body": "I tried with the current_user object. But, the form still doesn&#39;t display."}, {"owner": {"reputation": 121, "user_id": 8456726, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d92d276990ac8a54a5d0149d8fd88a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny C", "link": "https://stackoverflow.com/users/8456726/johnny-c"}, "edited": false, "score": 0, "creation_date": 1503507218, "post_id": 45830776, "comment_id": 78648872, "body": "I made it work. The form was being hidden by the if statement for the avatar!"}, {"owner": {"reputation": 121, "user_id": 8456726, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d92d276990ac8a54a5d0149d8fd88a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny C", "link": "https://stackoverflow.com/users/8456726/johnny-c"}, "edited": false, "score": 0, "creation_date": 1503507232, "post_id": 45830776, "comment_id": 78648878, "body": "Thanks for helping me, I really appreciate the effort."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 121, "user_id": 8456726, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d92d276990ac8a54a5d0149d8fd88a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny C", "link": "https://stackoverflow.com/users/8456726/johnny-c"}, "edited": false, "score": 0, "creation_date": 1503507728, "post_id": 45830776, "comment_id": 78649144, "body": "@JohnnyC Glad you figured it out. Also remember that yiu are missing = in this line <code>&lt;% f.simple_fields_for :user_profile do |user_profile| %&gt;</code> It should be <code>&lt;%= f.simple_fields_for :user_profile do |user_profile| %&gt;</code>"}, {"owner": {"reputation": 121, "user_id": 8456726, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d92d276990ac8a54a5d0149d8fd88a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny C", "link": "https://stackoverflow.com/users/8456726/johnny-c"}, "edited": false, "score": 0, "creation_date": 1503507944, "post_id": 45830776, "comment_id": 78649250, "body": "I agree. I will try to vote your solution up. Thanks."}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": false, "score": 0, "last_activity_date": 1503466147, "last_edit_date": 1503466147, "creation_date": 1503463305, "answer_id": 45830776, "question_id": 45830616, "link": "https://stackoverflow.com/questions/45830616/nested-form-wont-display-for-has-one-relationship-simple-form-rails-4/45830776#45830776", "title": "Nested form won&#39;t display for has_one relationship Simple_Form (Rails 4)", "body": "<blockquote>\n  <p>The edit page is empty, even though the attributes for the\n  user_profile exist.</p>\n</blockquote>\n\n<p>This line</p>\n\n<pre><code>&lt;% f.simple_fields_for :user_profile do |user_profile| %&gt;\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>&lt;%= f.simple_fields_for :user_profile do |user_profile| %&gt;\n</code></pre>\n\n<p>You are missing <code>=</code>, which is the reason for the form being empty.</p>\n"}, {"tags": [], "owner": {"reputation": 121, "user_id": 8456726, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d92d276990ac8a54a5d0149d8fd88a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny C", "link": "https://stackoverflow.com/users/8456726/johnny-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1503507458, "creation_date": 1503507458, "answer_id": 45845464, "question_id": 45830616, "link": "https://stackoverflow.com/questions/45830616/nested-form-wont-display-for-has-one-relationship-simple-form-rails-4/45845464#45845464", "title": "Nested form won&#39;t display for has_one relationship Simple_Form (Rails 4)", "body": "<p>Misplaced if statement termination <strong>&lt;% end %></strong> in simple_form</p>\n\n<pre><code>&lt;% if current_user.user_profile.avatar.url.present? %&gt;\n            &lt;%= image_tag(current_user.user_profile.avatar.url) %&gt;\n            &lt;%= user_profile.label :remove_avatar do %&gt;\n                &lt;%= user_profile.input :remove_avatar, as: :boolean, checked_value: true, unchecked_value: false %&gt;\n            &lt;% end %&gt;\n         &lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 8456726, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d92d276990ac8a54a5d0149d8fd88a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny C", "link": "https://stackoverflow.com/users/8456726/johnny-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1503507458, "creation_date": 1503462120, "last_edit_date": 1503462601, "question_id": 45830616, "link": "https://stackoverflow.com/questions/45830616/nested-form-wont-display-for-has-one-relationship-simple-form-rails-4", "title": "Nested form won&#39;t display for has_one relationship Simple_Form (Rails 4)", "body": "<p>I set my user model up to build the user_profile before being created. The user_profile itself is being shown in the console when I load the user object. @user = User.find(1) -> @user.user_profile -> UserProfile Load. The relationship works correctly. The issue is I am unable to make changes to the user profile with the edit user_profile action. The edit page is empty, even though the attributes for the user_profile exist. How can I get the form to load in the edit view, so that the user is able to make changes to his/her profile after logging into their account? Side note: The user does not edit their normal profile during registration.</p>\n\n<p>user.rb</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  # Include default devise modules.\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable,\n         :confirmable\n  include DeviseTokenAuth::Concerns::User\n  before_create :build_user_profile\n  extend FriendlyId\n\n  after_validation :geocode\n\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n  friendly_id :username, use: :slugged\n\n  has_one :user_profile\n  accepts_nested_attributes_for :user_profile\n\n  protected\n  def confirmation_required?\n    false\n  end\nend\n</code></pre>\n\n<p>user_profile.rb</p>\n\n<pre><code>class UserProfile &lt; ApplicationRecord\n  mount_uploader :avatar, UserAvatarUploader\n  belongs_to :user, :dependent =&gt; :destroy\n\n  validates_integrity_of  :avatar\n  validates_processing_of :avatar\n\nend\n</code></pre>\n\n<p>_form.html.erb</p>\n\n<pre><code>&lt;%= simple_form_for(@user_profile, :html =&gt; {:multipart =&gt; true}) do |f| %&gt;\n    &lt;%= f.error_notification %&gt;\n    &lt;div class=\"form-group\"&gt;\n      &lt;% f.simple_fields_for :user_profile do |user_profile| %&gt;\n          &lt;div class=\"col-md-4\"&gt;\n        &lt;% if current_user.user_profile.avatar.url.present? %&gt;\n            &lt;%= image_tag(current_user.user_profile.avatar.url) %&gt;\n            &lt;%= user_profile.label :remove_avatar do %&gt;\n                &lt;%= user_profile.input :remove_avatar, as: :boolean, checked_value: true, unchecked_value: false %&gt;\n            &lt;% end %&gt;\n            &lt;%= user_profile.input :avatar, as: :file, class: 'form-control' %&gt;\n            &lt;%= user_profile.input :birthday, label: false, id: 'datepicker', class: 'form-control' %&gt;\n\n        &lt;% end %&gt;\n            &lt;div class=\"form-group\"&gt;\n              &lt;div class=\"col-md-4\"&gt;\n                &lt;%= f.button :submit %&gt;\n              &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>schema.rb</p>\n\n<pre><code> create_table \"user_profiles\", force: :cascade do |t|\n    t.date \"birthday\"\n    t.bigint \"user_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.string \"avatar\"\n    t.index [\"user_id\"], name: \"index_user_profiles_on_user_id\"\n  end\n</code></pre>\n\n<p>user_profiles_controller.rb</p>\n\n<pre><code>class UserProfilesController &lt; ApplicationController\n  #before_action :set_user_profile, only: [:show, :edit, :update]\n  before_action :authenticate_user!\n  before_action :load_profile, only: [:edit, :update]\n\n  def show\n\n  end\n\n  # GET /user_profiles/1/edit\n  def edit\n  end\n\n  # PATCH/PUT /user_profiles/1\n  # PATCH/PUT /user_profiles/1.json\n  def update\n    respond_to do |format|\n      if @user_profile.update(user_profile_params)\n        format.html {redirect_to @user_profile, notice: 'User profile was successfully updated.'}\n        format.json {render :show, status: :ok, location: @user_profile}\n      else\n        format.html {render :edit}\n        format.json {render json: @user_profile.errors, status: :unprocessable_entity}\n      end\n    end\n  end\n\n  private\n\n  def load_profile\n    @user_profile = current_user.user_profile\n  end\n\n\n  # Never trust parameters from the scary internet, only allow the white list through.\n  def user_profile_params\n    params.require(:user).permit(user_profile: [:birthday, :avatar, :user_id])\n  end\nend\n</code></pre>\n\n<p>Rails Console</p>\n\n<pre><code>@user = User.find(5)\n  User Load (1.0ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 LIMIT $2  [[\"id\", 5], [\"LIMIT\", 1]]\n#&lt;User id: 5, email: \"colejohn@hotmail.com\", username: \"johnny\", first_name: \"John\", last_name: \"Woo\"&gt;\n&gt;&gt; @user.user_profile\n  UserProfile Load (2.0ms)  SELECT  \"user_profiles\".* FROM \"user_profiles\" WHERE \"user_profiles\".\"user_id\" = $1 LIMIT $2  [[\"user_id\", 5], [\"LIMIT\", 1]]\n#&lt;UserProfile id: 2, birthday: nil, user_id: 5, created_at: \"2017-08-17 20:47:12\", updated_at: \"2017-08-17 20:47:12\", avatar: nil&gt;\n</code></pre>\n"}, {"tags": ["json", "ruby", "serialization"], "answers": [{"comments": [{"owner": {"reputation": 257, "user_id": 6642551, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/1145135395532946/picture?type=large", "display_name": "Jacob Moore", "link": "https://stackoverflow.com/users/6642551/jacob-moore"}, "edited": false, "score": 0, "creation_date": 1503464496, "post_id": 45830831, "comment_id": 78619242, "body": "Still nothing saved to my file, but edited to &quot;open&quot;. I tried both versions."}, {"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "reply_to_user": {"reputation": 257, "user_id": 6642551, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/1145135395532946/picture?type=large", "display_name": "Jacob Moore", "link": "https://stackoverflow.com/users/6642551/jacob-moore"}, "edited": false, "score": 0, "creation_date": 1503464626, "post_id": 45830831, "comment_id": 78619297, "body": "If you use <code>open</code> you should pass it a block. Using <code>open</code> without a block is the exact same thing as doing <code>File.new</code> and so would need to be closed manually"}, {"owner": {"reputation": 257, "user_id": 6642551, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/1145135395532946/picture?type=large", "display_name": "Jacob Moore", "link": "https://stackoverflow.com/users/6642551/jacob-moore"}, "edited": false, "score": 0, "creation_date": 1503465016, "post_id": 45830831, "comment_id": 78619468, "body": "Will edit now. Tried on my computer with no luck still."}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": false, "score": 1, "last_activity_date": 1503464435, "last_edit_date": 1503464435, "creation_date": 1503463694, "answer_id": 45830831, "question_id": 45830587, "link": "https://stackoverflow.com/questions/45830587/trying-to-serialize-with-json-a-save-method-in-my-ruby-hangman-game/45830831#45830831", "title": "Trying to serialize with JSON a save method in my Ruby Hangman game", "body": "<p>You need to <a href=\"https://ruby-doc.org/core-2.4.0/IO.html#method-i-close\" rel=\"nofollow noreferrer\"><code>close</code></a> the file in order to make sure your output is actually written to the disk (\"flushed\"). You can manually, call <code>close</code>:</p>\n\n<pre><code>def save_game(string)\n  game_file = File.new(\"saved.json\",\"w\") \n  game_file.write(string)\n  game_file.close\nend\n</code></pre>\n\n<p>or, you can use <a href=\"http://ruby-doc.org/core-2.4.1/File.html#method-c-open\" rel=\"nofollow noreferrer\"><code>File.open</code></a>, which takes a block and <code>close</code>s the file when the block ends:</p>\n\n<pre><code>File.open(\"saved.json\", \"w\") do |game_file|\n  game_file.write(string)\nend\n</code></pre>\n\n<p>Since, writing to the disk is a slow operation, Ruby (and all languages that I can think of right now) will hold off on actually writing the file until it has accumulated a certain amount of text in a buffer. Once it has reached this limit, it will <em>flush</em> the buffer and write everything in it to disk. In order to make sure all your text is actually written when trying to write a file, you need to call <code>close</code> on the file, and as part of closing it, Ruby will flush whatever is left in its buffer.</p>\n\n<p>There are other ways of making sure your content is flushed but when you're just starting to learn about this stuff, it should suffice to just make sure to always <code>close</code> files when you're done reading or writing them.</p>\n"}], "owner": {"reputation": 257, "user_id": 6642551, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/1145135395532946/picture?type=large", "display_name": "Jacob Moore", "link": "https://stackoverflow.com/users/6642551/jacob-moore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1503469882, "creation_date": 1503461900, "last_edit_date": 1503465180, "question_id": 45830587, "link": "https://stackoverflow.com/questions/45830587/trying-to-serialize-with-json-a-save-method-in-my-ruby-hangman-game", "title": "Trying to serialize with JSON a save method in my Ruby Hangman game", "body": "<p>I'm trying to get my save_game() method to work, nothing is getting written to the JSON file. This is my first assignment working with JSON and serialization in general. I'm not quite sure where I'm even going wrong.</p>\n\n<p>These are my serialization methods:</p>\n\n<pre><code>  def to_json\n    JSON.generate({array: @array, filestuff: @filestuff, random_word: @random_word, cipher: @cipher, random_word2: @random_word2, counter: @counter})\n  end\n\n  def load\n    game_file = File.read(\"saved.json\")\n    data = JSON.parse(game_file)\n    @cipher = data[\"cipher\"]\n    @random_word2 = data[\"random_word2\"]\n    @counter = data[\"counter\"]\n  end\n\n  def save_game(string)\n    game_file = File.new(\"saved.json\",\"w\") \n    game_file.write(string)\n    game_file.close\n  end\n</code></pre>\n\n<p>This is my program, on line 92 I try to call my save_game method. </p>\n\n<pre><code>require 'json'\nload 'display.rb'\n\nclass Hangman\n  attr_accessor :name\n  @name = name\n\n  def initialize\n    puts \"What is your name?\"\n    @name = gets.chomp\n    puts \"\n################################################\n                   HANGMAN\n################################################\n\n               _________\n              |        \n              |       |\n              |       O\n              |      /|\\\\\n              |       |\n              |      / \\\\\n              |\n              -----------------\nWelcome #{@name} to Hangman. The computer will generate\na 5-12 letter random word. You will try to guess\nthat word one letter at a time. Try to solve the\npuzzle before time runs out! \n\n\n\"\n\n  end\nend\n\nclass Gameplay\n  attr_accessor :array, :filestuff, :random_word, :cipher, :random_word2, :counter\n  def initialize\n  @array = []\n  @filestuff = File.foreach('5text.txt') do |x|\n      chomped = x.chomp\n      @array &lt;&lt; chomped if (chomped.length &gt;= 5 and chomped.length &lt;= 12)\n    end\n  @random_word = @array.sample\n  @cipher = @random_word.gsub(/[a-z]/, '*').split(//)\n  @random_word2 = @random_word.split(//)\n  @counter = 5\n\n  def to_json\n    JSON.generate({array: @array, filestuff: @filestuff, random_word: @random_word, cipher: @cipher, random_word2: @random_word2, counter: @counter})\n  end\n\n  def load\n    game_file = File.read(\"saved.json\")\n    data = JSON.parse(game_file)\n    @cipher = data[\"cipher\"]\n    @random_word2 = data[\"random_word2\"]\n    @counter = data[\"counter\"]\n  end\n\n  def save_game(string)\n    game_file = File.new(\"saved.json\",\"w\") \n    game_file.write(string)\n    game_file.close\n  end\n\n  def choice(n)\n    @random_word2.each_with_index do |i,index|\n      if i == n\n        @cipher[index] = i \n      end \n    end \n      if n == @random_word2.join.to_s\n        puts \"You win\"\n        puts \"would you like to start another game? Y/N\"\n        new_game = gets.chomp\n        if new_game == \"Y\"\n          Hangman.new\n          else exit \n        end\n      end\n      if @random_word2.include?(n) == false\n        @counter -= 1\n        display\n        puts \"#{@counter} guesses remaining.\"\n        puts \"To save press 1\"\n        save = gets.chomp\n        if save == \"1\"\n\n#Will not save \n          save_game($b.to_json)\n        end\n      end\n      if @counter == 0\n        puts \"would you like to start another game? Y/N\"\n        new_game = gets.chomp\n        if new_game == \"Y\"\n          else exit \n        end\n      end \n        puts @cipher.join \n  end\n\n  @counter = 5\n  while @counter &gt; 0 \n    choice(gets.chomp)\n  end\n\n end \nend\nHangman.new\n$b = Gameplay.new\n</code></pre>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "database"], "comments": [{"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1503468723, "post_id": 45830556, "comment_id": 78620974, "body": "What issues are you referring to in your question? What do you mean by &quot;keeping models and schema synced&quot;?"}], "answers": [{"tags": [], "owner": {"reputation": 7196, "user_id": 951181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0784a47fca1c942ea40bde8857b3d22f?s=128&d=identicon&r=PG", "display_name": "Martin", "link": "https://stackoverflow.com/users/951181/martin"}, "is_accepted": false, "score": 0, "last_activity_date": 1503470513, "creation_date": 1503470513, "answer_id": 45832378, "question_id": 45830556, "link": "https://stackoverflow.com/questions/45830556/multiple-rails-apps-read-single-database-table-of-another-rails-app/45832378#45832378", "title": "Multiple Rails apps read single database/table of another Rails app", "body": "<p>Integration at DB level is messy - any change would need to be done on every application using it, and the security is a concerns too.</p>\n\n<p>The typical solution for your problem (having several application share a unique authentication source) is <a href=\"https://oauth.net/2/\" rel=\"nofollow noreferrer\">OAuth</a> - a way for the multiple apps to delegate authentication to your \"Auth App\". This is well supported by frameworks such as <a href=\"https://github.com/plataformatec/devise\" rel=\"nofollow noreferrer\">Devise</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 5741345, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NwiCt-BWV30/AAAAAAAAAAI/AAAAAAAAAGA/YrYgP6ubU0s/photo.jpg?sz=128", "display_name": "Josh", "link": "https://stackoverflow.com/users/5741345/josh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 219, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503470513, "creation_date": 1503461705, "question_id": 45830556, "link": "https://stackoverflow.com/questions/45830556/multiple-rails-apps-read-single-database-table-of-another-rails-app", "title": "Multiple Rails apps read single database/table of another Rails app", "body": "<p>I have a web app and API for the app configured and completed, but work is now requesting more apps. The apps are web-heavy with a light API for mobile functionality. A monolithic apps seems out of the question, so I decided to make each one individually. Each app will have their own layout, database, and API. However, the one thing I want to share among all apps is the users' password, api token, and firebase messaging token. A separate app will be created just for authentication with <strong>IDnumber</strong>, <strong>password</strong>, <strong>api token</strong>, and <strong>fcm token</strong>. 4 simple fields. This single app will be the only one doing any writing to it's DB and this single table.</p>\n\n<p>Creating requests to the auth app to verify every request to each API seems inefficient, so I was wondering if there was a way for the apps to tap into the auth database and verify tokens and passwords directly. There would be no joining of tables cross-apps and no cross-app creation/updating/deletion. Problems with keeping models and schemas synced make sense, but would read-only custom queries eliminate those issues?</p>\n"}, {"tags": ["ruby", "string", "replace", "split"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1503470910, "post_id": 45830252, "comment_id": 78622165, "body": "<code>input == &quot;u&quot;</code> implies that <code>input.length</code> is 1. The latter check is redundant."}], "answers": [{"tags": [], "owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "is_accepted": false, "score": 0, "last_activity_date": 1503460519, "creation_date": 1503460519, "answer_id": 45830395, "question_id": 45830252, "link": "https://stackoverflow.com/questions/45830252/replace-words-in-a-string-and-re-join-them/45830395#45830395", "title": "replace words in a string and re join them", "body": "<p>Simple array mapping would do the job:</p>\n\n<pre><code>\"I am u so smuitten with utopia you\".split(' ').map{|word| %w(you u).include?(word) ? 'your sister' : word}.join(' ')\n#=&gt; \"I am your sister so smuitten with utopia your sister\"\n</code></pre>\n\n<p>Your method would be:</p>\n\n<pre><code>def autocorrect(input)\n  input.split(' ').map{|word| %w(you u).include?(word) ? 'your sister' : word}.join(' ')\nend\n\nautocorrect(\"I am so smitten with you\")\n#=&gt; \"I am smitten with your sister\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 1, "last_activity_date": 1503462907, "last_edit_date": 1503462907, "creation_date": 1503462296, "answer_id": 45830645, "question_id": 45830252, "link": "https://stackoverflow.com/questions/45830252/replace-words-in-a-string-and-re-join-them/45830645#45830645", "title": "replace words in a string and re join them", "body": "<p>The problem you're having with your code is that you call <code>input.split(\" \")</code> but you don't save that to anything, and then you check for <code>input == \"u\" # ...</code>, and <code>input</code> is still the entire string, so if you called <code>autocorrect('u')</code> or <code>autocorrect('you')</code> you would get <code>\"your sister\"</code> back, <strong>except</strong> for the next line: <code>input.join(\" \")</code> will throw an error.</p>\n\n<p>This error is because, remember <code>input</code> is still the original string, not an array of each word, and strings don't have a <code>join</code> method.</p>\n\n<p>To get your code working with the fewest changes possible, you can change it to:</p>\n\n<pre><code>def autocorrect(input)\n  #replace = [['you','u'], ['your sister']]\n  #replace.each{|replaced| input.gsub!(replaced[0], replaced[1])}\n  input.split(\" \").map do |word|\n    if (word == \"u\" &amp;&amp; word.length == 1) || word == \"you\"\n      \"your sister\"\n    else\n      word\n    end\n  end.join(\" \")\nend\n</code></pre>\n\n<p>So, now, you <em>are</em> doing something with each word after you <code>split(\" \")</code> the input, and you are checking each word against <code>\"u\"</code> and <code>\"you\"</code>, instead of the entire input string. You then map either the replacement word, or the original, and then join them back into a single string to return them.</p>\n\n<hr>\n\n<p>As an alternative, shorter way, you can use <a href=\"https://ruby-doc.org/core-2.4.0/String.html#method-i-gsub\" rel=\"nofollow noreferrer\"><code>String#gsub</code></a> which can take a <code>Hash</code> as the second parameter to do substitutions:</p>\n\n<blockquote>\n  <p>If the second argument is a Hash, and the matched text is one of its keys, the corresponding value is the replacement string.</p>\n</blockquote>\n\n<pre><code>def autocorrect(input)\n  replace = { 'you' =&gt; 'your sister',\n              'u' =&gt; 'your sister',\n              'another word' =&gt; 'something else entirely' }\n\n  input.gsub(/\\b(#{replace.keys.join('|')})\\b/, replace)\nend\n\nautocorrect(\"I am u so smitten with utopia you and another word\")\n# =&gt; \"I am your sister so smitten with utopia your sister and something else entirely\"\n</code></pre>\n\n<p>the regex in that example comes out looking like:</p>\n\n<pre><code>/\\b(you|u|another word)\\b/\n</code></pre>\n\n<p>with <code>\\b</code> being any word boundary.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6378390"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 370, "favorite_count": 0, "accepted_answer_id": 45830645, "answer_count": 2, "score": 0, "last_activity_date": 1503462907, "creation_date": 1503459560, "question_id": 45830252, "link": "https://stackoverflow.com/questions/45830252/replace-words-in-a-string-and-re-join-them", "title": "replace words in a string and re join them", "body": "<p>Hi I'm building a function that has me take any instance of \"u\" or \"you\" in a string and replace it with a specific word.  I can go in and isolate the instances no problem but I cannot get the words to output properly.  So far I have.</p>\n\n<pre><code>def autocorrect(input)\n\n #replace = [['you','u'], ['your sister']]\n #replace.each{|replaced| input.gsub!(replaced[0], replaced[1])}\n input.split(\" \")\n\n if (input == \"u\" &amp;&amp; input.length == 1) || input == \"you\"\n   input.replace(\"your sister\")\n end\n\n input.join(\" \")\nend\n</code></pre>\n\n<p>The ideal output would be:</p>\n\n<pre><code>autocorrect(\"I am so smitten with you\")\n\n\"I am smitten with your sister\"\n</code></pre>\n\n<p>I don't know how to get the last part correct, I can't think of a good method to use.  Any help would be greatly appreciated.</p>\n"}, {"tags": ["ruby", "limit", "sleep", "repeat", "spam"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1503451908, "post_id": 45829247, "comment_id": 78616218, "body": "<code>sleep(n)</code> returns <code>n</code> so <code>if sleep(5)</code> will always succeed and run <code>tip @user amount</code>. What exactly do you want the behavior of <code>tip</code> to be? Do you want it to really wait 5 seconds before doing anything? Or do you want it to just return doing nothing (maybe setting <code>@result[:text]</code>) unless a 5 second interval has transpired since the last time it did something?"}, {"owner": {"reputation": 3655, "user_id": 1267729, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e487a17a60371229131bb99b7852a48?s=128&d=identicon&r=PG", "display_name": "Shelvacu", "link": "https://stackoverflow.com/users/1267729/shelvacu"}, "edited": false, "score": 0, "creation_date": 1503452546, "post_id": 45829247, "comment_id": 78616337, "body": "Is this in a rails or other web application? If not, how is this command called?"}, {"owner": {"reputation": 187, "user_id": 8107638, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1504347452918728/picture?type=large", "display_name": "Samuel Gosling", "link": "https://stackoverflow.com/users/8107638/samuel-gosling"}, "reply_to_user": {"reputation": 3655, "user_id": 1267729, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e487a17a60371229131bb99b7852a48?s=128&d=identicon&r=PG", "display_name": "Shelvacu", "link": "https://stackoverflow.com/users/1267729/shelvacu"}, "edited": false, "score": 0, "creation_date": 1503485138, "post_id": 45829247, "comment_id": 78632036, "body": "@shelvacu i have updated my answer if it helps. User&#39;s have the ability to call on this command so i want stop the repeated spamming of it every 1-2 seconds."}, {"owner": {"reputation": 7196, "user_id": 951181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0784a47fca1c942ea40bde8857b3d22f?s=128&d=identicon&r=PG", "display_name": "Martin", "link": "https://stackoverflow.com/users/951181/martin"}, "edited": false, "score": 0, "creation_date": 1503488691, "post_id": 45829247, "comment_id": 78634686, "body": "Does the command &quot;knows&quot; who call it?"}, {"owner": {"reputation": 187, "user_id": 8107638, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1504347452918728/picture?type=large", "display_name": "Samuel Gosling", "link": "https://stackoverflow.com/users/8107638/samuel-gosling"}, "reply_to_user": {"reputation": 7196, "user_id": 951181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0784a47fca1c942ea40bde8857b3d22f?s=128&d=identicon&r=PG", "display_name": "Martin", "link": "https://stackoverflow.com/users/951181/martin"}, "edited": false, "score": 0, "creation_date": 1503521743, "post_id": 45829247, "comment_id": 78656447, "body": "@Martin yes stored in the user _id variable. Which is different to the user variable used as the tipping target."}], "answers": [{"comments": [{"owner": {"reputation": 187, "user_id": 8107638, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1504347452918728/picture?type=large", "display_name": "Samuel Gosling", "link": "https://stackoverflow.com/users/8107638/samuel-gosling"}, "edited": false, "score": 0, "creation_date": 1503485432, "post_id": 45832406, "comment_id": 78632258, "body": "I&#39;ve updated my question which might give you a better insight to the problem, user&#39;s actually have the ability to call this command hence why i want to stop the repeated use of it every 1 second. If they do use it every one second, they are faced with the spam tipping error."}], "tags": [], "owner": {"reputation": 7196, "user_id": 951181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0784a47fca1c942ea40bde8857b3d22f?s=128&d=identicon&r=PG", "display_name": "Martin", "link": "https://stackoverflow.com/users/951181/martin"}, "is_accepted": false, "score": 0, "last_activity_date": 1503470607, "creation_date": 1503470607, "answer_id": 45832406, "question_id": 45829247, "link": "https://stackoverflow.com/questions/45829247/ruby-limit-on-how-often-a-command-can-be-initiated/45832406#45832406", "title": "Ruby - Limit on how often a command can be initiated", "body": "<p>If this is a web app or something with user login and a database: just store a \"last called\" timestamp with the user &amp; command, and check it.</p>\n\n<p>If this is a command line, an easy way would be to store a small text file somewhere with that info (file with a single line with a time stamp of the last call).</p>\n"}, {"comments": [{"owner": {"reputation": 187, "user_id": 8107638, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1504347452918728/picture?type=large", "display_name": "Samuel Gosling", "link": "https://stackoverflow.com/users/8107638/samuel-gosling"}, "edited": false, "score": 0, "creation_date": 1503602497, "post_id": 45850542, "comment_id": 78697668, "body": "Thank you very much my friend , worked like a treat :)"}], "tags": [], "owner": {"reputation": 3655, "user_id": 1267729, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e487a17a60371229131bb99b7852a48?s=128&d=identicon&r=PG", "display_name": "Shelvacu", "link": "https://stackoverflow.com/users/1267729/shelvacu"}, "is_accepted": false, "score": 1, "last_activity_date": 1503529305, "creation_date": 1503529305, "answer_id": 45850542, "question_id": 45829247, "link": "https://stackoverflow.com/questions/45829247/ruby-limit-on-how-often-a-command-can-be-initiated/45850542#45850542", "title": "Ruby - Limit on how often a command can be initiated", "body": "<p>What you want is called \"rate-limiting\".</p>\n\n<p>If you want to do it yourself, simply store a timestamp of when the command was last used for each user.</p>\n\n<p>Then, every time the command is called, check the timestamp of when the user last called the command. If it is set (this is not the user's first time calling the command) and it was less than (for example) 5 seconds ago, then deny the request. Otherwise, let it go through and store a new timestamp.</p>\n\n<p>There are also libraries to do this for you, see for example <a href=\"https://github.com/dryruby/rack-throttle\" rel=\"nofollow noreferrer\">rack-throttle</a>.</p>\n"}], "owner": {"reputation": 187, "user_id": 8107638, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1504347452918728/picture?type=large", "display_name": "Samuel Gosling", "link": "https://stackoverflow.com/users/8107638/samuel-gosling"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1503529305, "creation_date": 1503451630, "last_edit_date": 1503485032, "question_id": 45829247, "link": "https://stackoverflow.com/questions/45829247/ruby-limit-on-how-often-a-command-can-be-initiated", "title": "Ruby - Limit on how often a command can be initiated", "body": "<p>Anyone know how to apply a time limit to how often a command can be initiated in ruby? I know the sleep command exists and have been trying to apply it like so.\nI want to prevent the repeated calling of the command, due to spam reasons. \nThe app is a outgoing webhook in a slack channel where the user can call on the command: tip. To tip another user in the channel, I want to put a limit on a certain waiting period before that command can be used again.</p>\n\n<pre><code>def tip\n  if sleep(5)\n    tip @user amount\n  else\n    @result[:text:] = \"Spam tipping is not allowed.\"\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 6941185, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10205239279341791/picture?type=large", "display_name": "amreos", "link": "https://stackoverflow.com/users/6941185/amreos"}, "edited": false, "score": 0, "creation_date": 1503452566, "post_id": 45829281, "comment_id": 78616344, "body": "Thank you very much for your response this is what i got after this &quot; TypeError in ResultsController#import no implicit conversion of String into Integer&quot;"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 81, "user_id": 6941185, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10205239279341791/picture?type=large", "display_name": "amreos", "link": "https://stackoverflow.com/users/6941185/amreos"}, "edited": false, "score": 0, "creation_date": 1503452942, "post_id": 45829281, "comment_id": 78616445, "body": "Oh, you likely use CSV without headers. Make it <code>row[3]</code> then."}, {"owner": {"reputation": 81, "user_id": 6941185, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10205239279341791/picture?type=large", "display_name": "amreos", "link": "https://stackoverflow.com/users/6941185/amreos"}, "edited": false, "score": 0, "creation_date": 1503453385, "post_id": 45829281, "comment_id": 78616575, "body": "TypeError (no implicit conversion of String into Integer):   app/models/result.rb:12:in <code>[]&#39;   app&#47;models&#47;result.rb:12:in </code>block in import&#39;   app/models/result.rb:11:in <code>import&#39;   app&#47;controllers&#47;results_controller.rb:4:in </code>import&#39;"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 81, "user_id": 6941185, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10205239279341791/picture?type=large", "display_name": "amreos", "link": "https://stackoverflow.com/users/6941185/amreos"}, "edited": false, "score": 0, "creation_date": 1503453979, "post_id": 45829281, "comment_id": 78616721, "body": "Huh? Unlike <code>row[&#39;d&#39;]</code>, there is no strings in <code>row[3]</code>, I don&#39;t know why you&#39;d still be getting that error."}, {"owner": {"reputation": 81, "user_id": 6941185, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10205239279341791/picture?type=large", "display_name": "amreos", "link": "https://stackoverflow.com/users/6941185/amreos"}, "edited": false, "score": 0, "creation_date": 1503454230, "post_id": 45829281, "comment_id": 78616779, "body": "so what about deleting the whole row ?"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 81, "user_id": 6941185, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10205239279341791/picture?type=large", "display_name": "amreos", "link": "https://stackoverflow.com/users/6941185/amreos"}, "edited": false, "score": 0, "creation_date": 1503454938, "post_id": 45829281, "comment_id": 78616973, "body": "<code>row[&#39;3&#39;]</code> is not the same as <code>row[3]</code>."}, {"owner": {"reputation": 81, "user_id": 6941185, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10205239279341791/picture?type=large", "display_name": "amreos", "link": "https://stackoverflow.com/users/6941185/amreos"}, "edited": false, "score": 0, "creation_date": 1503455083, "post_id": 45829281, "comment_id": 78617006, "body": "it was my mistake :)"}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 4, "last_activity_date": 1503451941, "creation_date": 1503451941, "answer_id": 45829281, "question_id": 45829188, "link": "https://stackoverflow.com/questions/45829188/ruby-traverse-csv-row-and-bypass-values/45829281#45829281", "title": "Ruby traverse CSV row and bypass values", "body": "<pre><code>CSV.foreach(file.path) do |row|\n\n  # when it came to a cell 'd' that contain \"string\" bypass this row\n  next if row['d'] =~ /string/\n\n  result = Result.assign_row(row)\nend\n</code></pre>\n\n<p><code>next</code> will skip the rest of the current loop iteration; <code>=~</code> will check if regexp matches.</p>\n"}], "owner": {"reputation": 81, "user_id": 6941185, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10205239279341791/picture?type=large", "display_name": "amreos", "link": "https://stackoverflow.com/users/6941185/amreos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 45829281, "answer_count": 1, "score": 1, "last_activity_date": 1503459577, "creation_date": 1503451202, "last_edit_date": 1503459577, "question_id": 45829188, "link": "https://stackoverflow.com/questions/45829188/ruby-traverse-csv-row-and-bypass-values", "title": "Ruby traverse CSV row and bypass values", "body": "<p>I have a spreadsheet that has 4 columns and I'm saving the result to the database. What I want is when it comes to a cell, <code>d</code>, that contains <code>\"string\"</code> bypass this row and save the next row and so on.</p>\n\n<p>This is my model code</p>\n\n<pre><code>def self.assign_row(row)\n  a, b, c, d = row\n  @c = c.slice(1,4)\n  Result.create(line: c, min: @c)\nend\n\ndef self.import(file)\n  CSV.foreach(file.path) do |row|\n    result = Result.assign_row(row)\n  end\nend     \n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "activerecord"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1503451532, "post_id": 45829125, "comment_id": 78616156, "body": "What do your models look like? It looks like you&#39;re not letting Rails and SQL do the work for you. Also, you&#39;re sorting your <code>trip_nums</code> twice. You have <code>trip_nums.sort.last</code> and <code>trip_nums.sort.reverse.last</code>. Ruby has methods for Array class for that. <code>output[:max] = trip_nums.max</code> and <code>output[:min] = trip_nums.min</code>."}, {"owner": {"reputation": 167, "user_id": 7458221, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7558ff72ff755944a3ba9bf201c612ae?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Lim", "link": "https://stackoverflow.com/users/7458221/sam-lim"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1503454270, "post_id": 45829125, "comment_id": 78616788, "body": "@lurker Trips has many conditions and Conditions belong to Trip"}], "owner": {"reputation": 167, "user_id": 7458221, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7558ff72ff755944a3ba9bf201c612ae?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Lim", "link": "https://stackoverflow.com/users/7458221/sam-lim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1503450649, "creation_date": 1503450649, "question_id": 45829125, "link": "https://stackoverflow.com/questions/45829125/best-way-to-query-without-a-join-table-activerecord", "title": "Best way to query without a join table ActiveRecord", "body": "<p>So I have a table <code>trips</code> and a table <code>conditions</code>. <code>Trips</code> has a <code>start_date</code> and <code>end_date</code>, and neither last more than a few hours on the same day. Conditions has a <code>date</code> column. I am trying to compare them to find the <code>trip.id</code> of a <code>date</code> in order to seed with a <code>:trip_id</code> foreign key located in the <code>conditions</code> table with a very large csv. I understand that it is a many_to_many relationship, but I am wondering how to convert what I wrote in Ruby (transitioning to rails currently) to the \"ActiveRecord\" way without hitting the database so many times.</p>\n\n<p>Here is my code:</p>\n\n<p><strong>Helper method</strong></p>\n\n<pre><code>def self.id_by_date(date)\n  find_by(date: date).id\nend\n</code></pre>\n\n<p><strong>Main method</strong></p>\n\n<pre><code>def self.sort_temp(range)\n    array = where(max_temperature: range).all.map {|condition| condition.date}\n    trip_nums = array.map do |date|\n      Trip.where(start_date: date.beginning_of_day...date.end_of_day).count\n    end\n    output = {}\n    output[:max] = trip_nums.sort.last\n    output[:min] = trip_nums.sort.reverse.last\n    output[:avg] = trip_nums.inject(:+) / trip_nums.length unless trip_nums.length == 0\n    output\nend\n</code></pre>\n\n<p>EDIT: To be clear, I am trying to find all conditions associated with a day</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "rails-activerecord", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8503130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd9756b8194121885c605c22559f113?s=128&d=identicon&r=PG&f=1", "display_name": "Damien", "link": "https://stackoverflow.com/users/8503130/damien"}, "edited": false, "score": 0, "creation_date": 1503483012, "post_id": 45829230, "comment_id": 78630563, "body": "That won&#39;t work. Players have multiple ratings that can either go up or down. I want to get the most recent rating and sort that in descending order. With what you&#39;ve suggested, it&#39;ll have multiple ratings by each player instead of the latest one."}], "tags": [], "owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "is_accepted": false, "score": 0, "last_activity_date": 1503451523, "creation_date": 1503451523, "answer_id": 45829230, "question_id": 45829098, "link": "https://stackoverflow.com/questions/45829098/rails-activerecord-combining-result-of-multiple-queries/45829230#45829230", "title": "Rails ActiveRecord combining result of multiple queries", "body": "<p>Fix the order in relationship definition:</p>\n\n<pre><code>player\n    belongs_to :current_club\n    belongs_to :parent_club\n    has_many :ratings, -&gt; { order(rating: :desc) }\n</code></pre>\n\n<p>Now you can simply call: </p>\n\n<pre><code>@players = Player.paginate(page: params[:page], per_page: 50).includes(:current_club, :ratings).where.not(current_club_id: 101121)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8503130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd9756b8194121885c605c22559f113?s=128&d=identicon&r=PG&f=1", "display_name": "Damien", "link": "https://stackoverflow.com/users/8503130/damien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503451523, "creation_date": 1503450384, "question_id": 45829098, "link": "https://stackoverflow.com/questions/45829098/rails-activerecord-combining-result-of-multiple-queries", "title": "Rails ActiveRecord combining result of multiple queries", "body": "<p>Model:  </p>\n\n<pre><code>player\n    belongs_to :current_club\n    belongs_to :parent_club\n    has_many :ratings\n\nrating\n    belongs_to :player\n</code></pre>\n\n<p>Basic Schema:</p>\n\n<pre><code>create_table \"clubs\", force: :cascade do |t|\n    t.integer \"league_id\"\n    t.string  \"club_name\"\nend\n\ncreate_table \"players\", force: :cascade do |t|\n    t.integer \"player_id\"\n    t.string  \"player_name\"\n    t.integer \"current_club_id\"\n    t.integer \"parent_club_id\"\nend\n\ncreate_table \"ratings\", force: :cascade do |t|\n    t.integer \"player_id\"\n    t.integer \"rating\"\n    t.date    \"date\"\nend\n</code></pre>\n\n<p>I want to get the most recent rating for every player who doesn't work at a particular current_club and list players in descending order of that latest rating.</p>\n\n<p>For getting the latest rating information of all players and listing in descending order, the following works: </p>\n\n<pre><code>@ratings = Rating.select([:player_id, :rating, :date, 'MAX(date)']).order('rating desc').group(:player_id)\n</code></pre>\n\n<p>And for getting the information of all players who are not at a particular current_club, the following works:</p>\n\n<pre><code>@players = Player.paginate(page: params[:page], per_page: 50).includes(:current_club).where.not(current_club_id: 101121)\n</code></pre>\n\n<p>I just can't work out how to combine the two so that it gets the most recent rating for all players in descending order and the player information for all players who aren't at current_club 101121. Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "charts"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1503454160, "post_id": 45828947, "comment_id": 78616763, "body": "You can just do <code>tasks.order(:task_start_date).pluck(:product, :task_name, :task_start_date, :task_end_date).to_json</code> instead."}, {"owner": {"reputation": 789, "user_id": 5030271, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94768f7cf8157dc056a26b95991e2b3d?s=128&d=identicon&r=PG&f=1", "display_name": "DNorthrup", "link": "https://stackoverflow.com/users/5030271/dnorthrup"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1503454291, "post_id": 45828947, "comment_id": 78616793, "body": "@max Wow - I didn&#39;t even think about using pluck like this. Will make use of it in multiple helpers."}], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1503453712, "post_id": 45829484, "comment_id": 78616644, "body": "Your should declare <code>var i, j;</code> at the top. As currently written they are implied globals."}, {"owner": {"reputation": 789, "user_id": 5030271, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94768f7cf8157dc056a26b95991e2b3d?s=128&d=identicon&r=PG&f=1", "display_name": "DNorthrup", "link": "https://stackoverflow.com/users/5030271/dnorthrup"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1503453855, "post_id": 45829484, "comment_id": 78616687, "body": "@max Good catch - Fixed. Thanks."}], "tags": [], "owner": {"reputation": 789, "user_id": 5030271, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94768f7cf8157dc056a26b95991e2b3d?s=128&d=identicon&r=PG&f=1", "display_name": "DNorthrup", "link": "https://stackoverflow.com/users/5030271/dnorthrup"}, "is_accepted": true, "score": 1, "last_activity_date": 1503454720, "last_edit_date": 1503454720, "creation_date": 1503453557, "answer_id": 45829484, "question_id": 45828947, "link": "https://stackoverflow.com/questions/45828947/rails5-using-controller-helper-to-build-timeline-chart/45829484#45829484", "title": "Rails5 - Using Controller Helper to build Timeline Chart", "body": "<p>To resolve this, I had to have JavaScript do the heavy lifting. </p>\n\n<p>I used the helper to return the data in an array and used <code>strftime</code> to put the datetime as I wanted.</p>\n\n<pre><code>  def get_all_tasks\n    tasks = @project.tasks\n    sorted = tasks.order(:task_start_date)\n    sorted_task_array = []\n    sorted.each do |s|\n      sorted_task_array &lt;&lt; [s.product, s.task_name, s.task_start_date.strftime(\"%Y, %m, %d\") , s.task_end_date.strftime(\"%Y, %m, %d\") ]\n    end\n    sorted_task_array\n  end\n</code></pre>\n\n<p>I then had JavaScript handle the wrapping.</p>\n\n<pre><code>var data = &lt;%= raw get_all_tasks %&gt;;\n  var result = [];\n  for(var i = 0; i &lt; data.length; i++){\n      var row = []\n      for (var j = 0; j &lt; 2; j++){\n          row.push(data[i][j]);\n      }\n       for (j=2; j &lt; 4; j++){\n          row.push(new Date(data[i][j]));\n      }\n      result.push(row);\n  }\n  google.charts.load(\"current\", {packages:[\"timeline\"]});\n  google.charts.setOnLoadCallback(drawChart);\n  function drawChart() {\n    var container = document.getElementById('example4.2');\n    var chart = new google.visualization.Timeline(container);\n    var dataTable = new google.visualization.DataTable();\n\n    dataTable.addColumn({ type: 'string', id: 'Role' });\n    dataTable.addColumn({ type: 'string', id: 'Name' });\n    dataTable.addColumn({ type: 'date', id: 'Start' });\n    dataTable.addColumn({ type: 'date', id: 'End' });\n    dataTable.addRows(\n        result \n        )\n    var options = {\n      timeline: { groupByRowLabel: false }\n    };\n\n    chart.draw(dataTable, options);\n  }\n&lt;/script&gt;\n</code></pre>\n\n<p>The magic happens at the top, but it's working perfectly now. </p>\n\n<p>Thanks to @<a href=\"https://stackoverflow.com/users/544825/max\">max's</a> comment in the question I have modified the helper to be much simpler:</p>\n\n<pre><code>  def get_all_tasks\n    @project.tasks.order(:product, :task_start_date).pluck(:product, :task_name, :task_start_date, :task_end_date).to_json\n  end\n</code></pre>\n"}], "owner": {"reputation": 789, "user_id": 5030271, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94768f7cf8157dc056a26b95991e2b3d?s=128&d=identicon&r=PG&f=1", "display_name": "DNorthrup", "link": "https://stackoverflow.com/users/5030271/dnorthrup"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 45829484, "answer_count": 1, "score": 1, "last_activity_date": 1503454720, "creation_date": 1503449141, "last_edit_date": 1592644375, "question_id": 45828947, "link": "https://stackoverflow.com/questions/45828947/rails5-using-controller-helper-to-build-timeline-chart", "title": "Rails5 - Using Controller Helper to build Timeline Chart", "body": "<p>I'm trying to build a timeline chart that resembles a Gantt Chart from softwares such as Jira - To do this I am trying to pass the <a href=\"https://developers.google.com/chart/interactive/docs/gallery/timeline\" rel=\"nofollow noreferrer\">Google Charts 'Timeline' Module</a> 4 parameters from a helper. I was using ChartKick for this, but it could not fascilitate any of the optional parameters that the Timeline module allows.</p>\n<p><strong>Current Helper</strong></p>\n<pre><code>  def get_all_tasks\n    tasks = @project.tasks\n    sorted = tasks.order(:task_start_date)\n    sorted_task_array = []\n    sorted.each do |s|\n      sorted_task_array &lt;&lt; [s.product, s.task_name, s.task_start_date, s.task_end_date]\n    end\n    sorted_task_array.to_s.gsub('&quot;', &quot;'&quot;)\n  end\n</code></pre>\n<p>This will output an array such as</p>\n<pre><code>[[Product, Comment, Thu, 02 Feb 2017 00:00:00 UTC +00:00, Tue, 02 May 2017 00:00:00 UTC +00:00], ...] \n</code></pre>\n<p>Minified for brevity, but the arrays are outputting the the Rails time format(my fault, I know).</p>\n<p>So I modified it to be  <code>s.task_start_date.strftime(&quot;%F&quot;)</code> and I have actually tried quite a few options on the <a href=\"https://apidock.com/ruby/DateTime/strftime\" rel=\"nofollow noreferrer\">strftime docs</a>.</p>\n<p>What's weird is I ALSO tried hard-coding the format that new Date() would have output.</p>\n<p>AKA</p>\n<pre><code>&gt; new Date(1789, 3, 30)\n1789-04-30T04:00:00.000Z\n</code></pre>\n<p>And I still have 'invalid number' on the datetime field.</p>\n<p>Hard-coding their example, or any example using <code>new Date()</code> seems to work, so what am I missing? I'm not sure how I could handle this without doubling the work in JS - When Rails can convert it.</p>\n<p><strong>Chart JS - Basic from the example</strong></p>\n<pre><code>  google.charts.load(&quot;current&quot;, {packages:[&quot;timeline&quot;]});\n  google.charts.setOnLoadCallback(drawChart);\n  function drawChart() {\n    var container = document.getElementById('example4.2');\n    var chart = new google.visualization.Timeline(container);\n    var dataTable = new google.visualization.DataTable();\n\n    dataTable.addColumn({ type: 'string', id: 'Role' });\n    dataTable.addColumn({ type: 'string', id: 'Name' });\n    dataTable.addColumn({ type: 'date', id: 'Start' });\n    dataTable.addColumn({ type: 'date', id: 'End' });\n    dataTable.addRows(\n        &lt;%= get_all_tasks %&gt; \n        )\n    var options = {\n      timeline: { groupByRowLabel: false }\n    };\n\n    chart.draw(dataTable, options);\n  }\n</code></pre>\n<p>Thoughts?</p>\n<p><strong>Update</strong></p>\n<p>I found out to get the time in the format I need, I would use <code>s.task_end_date.iso8601</code> - However, I am still getting <code>Uncaught SyntaxError: Invalid or unexpected token</code> on the timing.</p>\n<p>With this new error I'm thinking it may be due to my <code>gsub</code> that is removing the double quotes, but without removing the quotes I get an error on <code>&amp;</code> that is output in the <code>&amp;quot;</code> section of the JS.</p>\n<p><strong>Update 2 - Format</strong></p>\n<p>I realized my decimal was off, and after comparing the docs I saw I can append the amount of miliseconds to <code>iso8601</code>.</p>\n<p>I now have <code>s.task_start_date.iso8601(3) , s.task_end_date.iso8601(3)</code> which is returning the same exact format as new Date(), but I am still getting a rejection due to :</p>\n<p><code>Value 2017-02-02T00:00:00.000Z does not match type date in column index 2</code></p>\n"}, {"tags": ["ruby", "sorting"], "comments": [{"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 5, "creation_date": 1503449517, "post_id": 45828897, "comment_id": 78615765, "body": "You&#39;re not sharing nearly enough. What are the objects? How do you retrieve the value? What do you mean by &quot;did not work&quot;? What is the expected output? Did you get an error message?"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1503450711, "post_id": 45828897, "comment_id": 78615995, "body": "Is <code>obj.has[&quot;date&quot;]</code> actually a date object or a date in string form or something else? Please be specific."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1503451330, "post_id": 45828897, "comment_id": 78616119, "body": "As well as clarifying the question, please add an example. Whenever you provide an example (generally a good thing), 1) make it as simple as possible; 2) show the desired result and 3) attach a variable to all input objects (e.g, <code>arr = [1,2,3]</code>), so that readers can refer to those variables (e.g., <code>arr</code>) in answers and comments without having to define them."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1503500193, "post_id": 45828897, "comment_id": 78644172, "body": "&quot;did not work&quot; is not a precise enough error description for us to help you. <i>What</i> doesn&#39;t work? <i>How</i> doesn&#39;t it work? What trouble do you have with your code? Do you get an error message? What is the error message? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ? Is the behavior you are observing not the desired behavior? What is the desired behavior and why, what is the observed behavior, and in what way do they differ?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1503500212, "post_id": 45828897, "comment_id": 78644197, "body": "Can you provide a <i>precise</i> specification of what it is that you want to happen, including any and all rules, exceptions from those rules, corner cases, special cases, boundary cases, and edge cases? Can you provide sample inputs and outputs demonstrating what you expect to happen, both in normal cases, and in all the exceptions, corner cases, special cases, boundary cases, and edge cases? Please, also provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 4178972, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/653ca5b199f47dad24951cdfa10b6b3b?s=128&d=identicon&r=PG&f=1", "display_name": "walton", "link": "https://stackoverflow.com/users/4178972/walton"}, "edited": false, "score": 0, "creation_date": 1503509233, "post_id": 45830292, "comment_id": 78649939, "body": "Thank you this solved my problem.  I was sorting the actual dates alphabetically and not using DateTime."}], "tags": [], "owner": {"reputation": 1717, "user_id": 1034924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecedc78563223e4f7742bbfc66992905?s=128&d=identicon&r=PG", "display_name": "nzajt", "link": "https://stackoverflow.com/users/1034924/nzajt"}, "is_accepted": false, "score": 1, "last_activity_date": 1503459828, "creation_date": 1503459828, "answer_id": 45830292, "question_id": 45828897, "link": "https://stackoverflow.com/questions/45828897/ruby-how-to-sort-objects-based-on-obects-hash-table-value/45830292#45830292", "title": "Ruby, how to sort objects based on obect&#39;s hash table value?", "body": "<p><code>sort_by</code> always works, if you aren't getting the results you want then you aren't giving it the correct information. If you want it to sort by Dates and you are passing a string it will sort the string alphabetically. You need to make sure that whatever <code>obj.hash['date']</code> is the correct type, as in DateTime, Date, Integer, and so on. </p>\n\n<p>In your case, you probably need to use <code>sort</code> the documentation is here <a href=\"https://ruby-doc.org/core-2.4.1/Enumerable.html#method-i-sort\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.4.1/Enumerable.html#method-i-sort</a>.</p>\n\n<p>Assuming you want to sort by Date and it is a string you could do </p>\n\n<pre><code>objs.sort { |a, b| DateTime.parse(b.hash['date']) &lt;=&gt; DateTime.parse(a.hash['date']) }\n</code></pre>\n\n<p>If you wanted to use <code>sort_by</code> you could do</p>\n\n<pre><code>objs.sort { |obj| DateTime.parse(obj.hash['date']) }\n</code></pre>\n\n<p>As the link above states, <code>sort</code> is faster than <code>sort_by</code> and gives you more control. I would recommend reading the entire sort section.</p>\n\n<p>Here is a link to <code>DateTime.parse</code> <a href=\"https://ruby-doc.org/stdlib-2.4.1/libdoc/date/rdoc/DateTime.html#method-c-parse\" rel=\"nofollow noreferrer\">https://ruby-doc.org/stdlib-2.4.1/libdoc/date/rdoc/DateTime.html#method-c-parse</a>. I don't know your format but it is easy to parse any format with <code>DateTime.strptime</code> <a href=\"https://ruby-doc.org/stdlib-2.4.1/libdoc/date/rdoc/DateTime.html#method-c-strptime\" rel=\"nofollow noreferrer\">https://ruby-doc.org/stdlib-2.4.1/libdoc/date/rdoc/DateTime.html#method-c-strptime</a>.</p>\n\n<p>I hope that helps if you want to give me more information I can see if I can give you a better answer.</p>\n"}], "owner": {"reputation": 121, "user_id": 4178972, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/653ca5b199f47dad24951cdfa10b6b3b?s=128&d=identicon&r=PG&f=1", "display_name": "walton", "link": "https://stackoverflow.com/users/4178972/walton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "closed_date": 1503500158, "answer_count": 1, "score": -1, "last_activity_date": 1503459828, "creation_date": 1503448709, "question_id": 45828897, "link": "https://stackoverflow.com/questions/45828897/ruby-how-to-sort-objects-based-on-obects-hash-table-value", "closed_reason": "Not suitable for this site", "title": "Ruby, how to sort objects based on obect&#39;s hash table value?", "body": "<p>I have an array of objects with a hash that has a value.  I want to sort all the objects based on that hash value.  I tried <code>objs.sort_by {|obj| obj.hash[\"date\"]}</code> but that did not work.  Any suggestions?</p>\n"}, {"tags": ["ruby", "ssl", "rack"], "answers": [{"tags": [], "owner": {"reputation": 6303, "user_id": 4680436, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yAD2X.jpg?s=128&g=1", "display_name": "aristotll", "link": "https://stackoverflow.com/users/4680436/aristotll"}, "is_accepted": false, "score": 0, "last_activity_date": 1503448614, "creation_date": 1503448614, "answer_id": 45828885, "question_id": 45828686, "link": "https://stackoverflow.com/questions/45828686/force-ssl-on-rackstatic-website/45828885#45828885", "title": "Force SSL on Rack::Static website", "body": "<p>Use gem <a href=\"https://github.com/tobmatth/rack-ssl-enforcer\" rel=\"nofollow noreferrer\">rack-ssl-enforcer</a> </p>\n\n<p>Add these lines, it will <a href=\"https://github.com/tobmatth/rack-ssl-enforcer/blob/c131ab69f3112a05eee3596994a8d68ad493192a/lib/rack/ssl-enforcer.rb#L90-L94\" rel=\"nofollow noreferrer\">automatically</a> direct from http to https.</p>\n\n<pre><code> require 'rack/ssl-enforcer'\n use Rack::SslEnforcer\n</code></pre>\n"}], "owner": {"reputation": 4194, "user_id": 527106, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2coeQ.jpg?s=128&g=1", "display_name": "Oded Harth", "link": "https://stackoverflow.com/users/527106/oded-harth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503448614, "creation_date": 1503447001, "question_id": 45828686, "link": "https://stackoverflow.com/questions/45828686/force-ssl-on-rackstatic-website", "title": "Force SSL on Rack::Static website", "body": "<p>How can I force SSL on <a href=\"https://devcenter.heroku.com/articles/static-sites-ruby\" rel=\"nofollow noreferrer\"><code>Rack::Static</code> website?</a></p>\n\n<p>This is literally the entire codebase:</p>\n\n<pre><code>use Rack::Static,\n  :urls =&gt; [\"/images\", \"/js\", \"/css\"],\n  :root =&gt; \"public\"\n\nrun lambda { |env|\n  [\n    200,\n    {\n      'Content-Type'  =&gt; 'text/html',\n      'Cache-Control' =&gt; 'public, max-age=86400'\n    },\n    File.open('public/index.html', File::RDONLY)\n  ]\n}\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "join", "flatten"], "comments": [{"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 2, "creation_date": 1503445154, "post_id": 45828465, "comment_id": 78614865, "body": "Could you please add an example of input and expected output?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6378390"}, "reply_to_user": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1503445463, "post_id": 45828465, "comment_id": 78614932, "body": "I just did sorry for the confusion."}], "answers": [{"comments": [{"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 2, "creation_date": 1503446704, "post_id": 45828583, "comment_id": 78615172, "body": "You could replace map + flatten with flat_map"}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1503448166, "post_id": 45828583, "comment_id": 78615483, "body": "I added the <code>flat_map</code>. Good point about the Oxford comma. I assumed it wouldn&#39;t actually be used by OP though :)"}], "tags": [], "owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "is_accepted": true, "score": 0, "last_activity_date": 1503449236, "last_edit_date": 1503449236, "creation_date": 1503446180, "answer_id": 45828583, "question_id": 45828465, "link": "https://stackoverflow.com/questions/45828465/add-the-last-index-of-an-array-with-a-unique-seperator/45828583#45828583", "title": "Add the last index of an array with a unique seperator", "body": "<p>Here's a solution with the Oxford comma, which I prefer :) </p>\n\n<pre><code>def list(name_list)\n  *names, last = name_list.flat_map(&amp;:values)\n  oxford_comma = names.size &gt; 1 ? \", \" : \"\"\n  names.join(\", \") + oxford_comma + \"&amp; #{last}\"\nend\n</code></pre>\n\n<p>(Note: if this is Rails, <code>Array#to_sentence</code> does this automatically.)</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1503452851, "post_id": 45828644, "comment_id": 78616411, "body": "Note that you could use <code>map</code> rather than <code>flat_map</code>, as <a href=\"http://ruby-doc.org/core-2.4.0/Array.html#method-i-join\" rel=\"nofollow noreferrer\">Array#join</a> is applied recursively."}, {"owner": {"reputation": 1814, "user_id": 607324, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rUINN.jpg?s=128&g=1", "display_name": "Tim Lowrimore", "link": "https://stackoverflow.com/users/607324/tim-lowrimore"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1503456670, "post_id": 45828644, "comment_id": 78617378, "body": "@CarySwoveland Thanks for the tip!  I&#39;ve edited my answer to reflect your feedback.  I guess I should read the docs a little more carefully.  Cheers!"}], "tags": [], "owner": {"reputation": 1814, "user_id": 607324, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rUINN.jpg?s=128&g=1", "display_name": "Tim Lowrimore", "link": "https://stackoverflow.com/users/607324/tim-lowrimore"}, "is_accepted": false, "score": 1, "last_activity_date": 1503456690, "last_edit_date": 1503456690, "creation_date": 1503446703, "answer_id": 45828644, "question_id": 45828465, "link": "https://stackoverflow.com/questions/45828465/add-the-last-index-of-an-array-with-a-unique-seperator/45828644#45828644", "title": "Add the last index of an array with a unique seperator", "body": "<p>Here's a solution that yields your desired output, given your input:</p>\n\n<pre><code>def list(names)\n    *head, tail = names.map(&amp;:values)\n    [head.join(\", \"), tail].join(\" &amp; \")\nend\n</code></pre>\n\n<p>Enjoy!</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1503451020, "last_edit_date": 1503451020, "creation_date": 1503447847, "answer_id": 45828789, "question_id": 45828465, "link": "https://stackoverflow.com/questions/45828465/add-the-last-index-of-an-array-with-a-unique-seperator/45828789#45828789", "title": "Add the last index of an array with a unique seperator", "body": "<p>I suggest creating the string with all names separated by commas (e.g., \"Bart, Lisa, Garry\") and then replacing the last comma with \" &amp;\". Here are two ways to do that.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>def list1(names)\n  all_commas(names).tap { |s| s[s.rindex(',')] = ' &amp;' }\nend\n\ndef list2(names)\n  all_commas(names).sub(/,(?=[^,]+\\z)/, ' &amp;')\nend\n\ndef all_commas(names)\n  names.map(&amp;:values).join(', ')\nend\n</code></pre>\n\n<p><strong>Example</strong></p>\n\n<pre><code>names = [{ name: 'Bart' }, { name: 'Lisa' } , { name: 'Garry' }]\n\nlist1 names\n  #=&gt; \"Bart, Lisa &amp; Garry\"\n\nlist2 names\n  #=&gt; \"Bart, Lisa &amp; Garry\"\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p>The steps are as follows.</p>\n\n<p><em>For <code>all_commas</code>:</em></p>\n\n<pre><code>a = names.map(&amp;:values)\n  #=&gt; [[\"Bart\"], [\"Lisa\"], [\"Garry\"]]\na.join(', ')\n  #=&gt; \"Bart, Lisa, Garry\"\n</code></pre>\n\n<p><em>For <code>list1</code></em></p>\n\n<pre><code>s = all_commas(names)\n  #=&gt; \"Bart, Lisa, Garry\"\ni = s.rindex(',')\n  #=&gt; 10\ns[i] = ' &amp;'\n  #=&gt; \" &amp;\"\ns #=&gt; \"Bart, Lisa &amp; Garry\"\n</code></pre>\n\n<p><code>tap</code>'s block returns <code>s</code></p>\n\n<p><em>For <code>list2</code></em></p>\n\n<pre><code>a = all_commas(names)\n  #=&gt; \"Bart, Lisa, Garry\"\na.sub(/,(?=[^,]+\\z)/, ' &amp;')\n  # =&gt; \"Bart, Lisa &amp; Garry\"\n</code></pre>\n\n<p>The regular expression, which employs a <em>positive lookahead</em>, reads, \"match a comma, followed by one or more characters other than comma, followed by the end of the string\".</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6378390"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 45828583, "answer_count": 3, "score": 0, "last_activity_date": 1503456690, "creation_date": 1503445031, "last_edit_date": 1503445446, "question_id": 45828465, "link": "https://stackoverflow.com/questions/45828465/add-the-last-index-of-an-array-with-a-unique-seperator", "title": "Add the last index of an array with a unique seperator", "body": "<p>I am trying to get the last character of an array to join with it's own character. I'm having trouble trying to figure this out on my own I'm still unfamiliar with built in methods on ruby.  Here's where I'm at so far:</p>\n\n<pre><code>def list(names)\n#last = names.last\njoined = names.map(&amp;:values).flatten.join(\", \")\n#joined.pop\n#joined &lt;&lt; last.join(\" &amp;\")\nend\n</code></pre>\n\n<p>What I want to do is for the last index I want to join it with it's own character.  I've tried doing this for hours but I keep getting errors.  If anyone can point me in the right direction on this I would greatly appreciate it.</p>\n\n<p>My target goal for an output would be</p>\n\n<pre><code>list([{name: 'Bart'},{name: 'Lisa'},{name: 'Garry'}])\n</code></pre>\n\n<p>to output:</p>\n\n<pre><code>\"Bart, Lisa &amp; Gary\"\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8502983, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gHq2e.png?s=128&g=1", "display_name": "panyes", "link": "https://stackoverflow.com/users/8502983/panyes"}, "edited": false, "score": 0, "creation_date": 1503472787, "post_id": 45828791, "comment_id": 78623316, "body": "That&#39;s exactly what I needed! Cheers!"}], "tags": [], "owner": {"reputation": 1814, "user_id": 607324, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rUINN.jpg?s=128&g=1", "display_name": "Tim Lowrimore", "link": "https://stackoverflow.com/users/607324/tim-lowrimore"}, "is_accepted": true, "score": 3, "last_activity_date": 1584724566, "last_edit_date": 1584724566, "creation_date": 1503447856, "answer_id": 45828791, "question_id": 45828270, "link": "https://stackoverflow.com/questions/45828270/convert-byte-array-of-signed-ints-to-file-ruby/45828791#45828791", "title": "Convert byte array of signed ints to file - Ruby", "body": "<p>I suspect you'll want to try something like:</p>\n\n<pre><code>File.write(\"imageX.png\", result.split(',').map(&amp;:to_i).pack('C*'))\n</code></pre>\n\n<p>This converts it to bytes then \"packs\" each one as a character (one byte).</p>\n\n<p>I hope that helps.</p>\n\n<p>Cheers!</p>\n"}], "owner": {"reputation": 3, "user_id": 8502983, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gHq2e.png?s=128&g=1", "display_name": "panyes", "link": "https://stackoverflow.com/users/8502983/panyes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 450, "favorite_count": 0, "accepted_answer_id": 45828791, "answer_count": 1, "score": 0, "last_activity_date": 1584724566, "creation_date": 1503443358, "last_edit_date": 1503445308, "question_id": 45828270, "link": "https://stackoverflow.com/questions/45828270/convert-byte-array-of-signed-ints-to-file-ruby", "title": "Convert byte array of signed ints to file - Ruby", "body": "<p>I have message from server in following format</p>\n\n<pre><code>result = \"123,-23,12,...,54,-53\"\n</code></pre>\n\n<p>That message represents array byte of image. How can I convert this to actual image?</p>\n\n<p>I converted this <em>result</em> to array of ints and tried with:</p>\n\n<pre><code>File.open( 'imageX.png', 'wb' ) do |output|\n  splited.each do | byte |\n      output.print byte\n  end\nend\n</code></pre>\n\n<p>But image is not recognizable. What am I missing?</p>\n"}, {"tags": ["ruby", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 0, "last_activity_date": 1503461361, "creation_date": 1503461361, "answer_id": 45830507, "question_id": 45828030, "link": "https://stackoverflow.com/questions/45828030/how-to-test-rake-task-callbacks/45830507#45830507", "title": "How to test rake task callbacks", "body": "<p>So, I'm not sure I would call <code>:callback</code> a <em>callback</em>, it's more of a <em>dependency</em>. A <em>callback</em> implies it happens after the main task is done, whereas when you do</p>\n\n<pre><code>task main: [:callback]\n</code></pre>\n\n<p>what you're really saying is that you depend on the other task having run first. So I would end up changing the name of that, though that's probably just a sample/throwaway name for this question. But, I digress and I'll continue calling the task <code>:callback</code> as written for this answer.</p>\n\n<hr>\n\n<p>The main issue here is that when you call <code>execute</code> on a rake task, only that task gets executed. This is because there may be situations where you don't want or need to call the entire dependency chain. Let's say we add another task to your file:</p>\n\n<pre><code>desc \"secondary task\"\ntask :secondary do\n  @greeting = 'Goodbye, Cruel World'\n\n  Rake::Task['rspec_before:main'].execute\nend\n</code></pre>\n\n<p>If we run this, we very likely want the <code>main</code> task to output <code>Goodbye, Cruel World</code>, instead of <code>Hello, World</code> and if we call all the dependencies, <code>main</code> would end up calling <code>:callback</code> which would override our <code>@greeting</code> and end up outputting <code>Hello, World</code>.</p>\n\n<p>There is, however, another task that does call the entire dependency chain: <code>invoke</code>:</p>\n\n<pre><code>desc \"secondary task\"\ntask :secondary do\n  @greeting = 'Goodbye, Cruel World'\n  Rake::Task['rspec_before:main'].invoke\nend\n</code></pre>\n\n<p>if we run this task, now we'll see <code>Hello, World</code> instead of <code>Goodbye, Cruel World</code>. So, having said all of this, what does that mean for your <code>RSpec</code> test? You simply need to change your <code>subject</code> to:</p>\n\n<pre><code>subject { @rake['rspec_before:main'].invoke }\n</code></pre>\n\n<p>because you are wanting to run the dependencies.</p>\n"}], "owner": {"reputation": 713, "user_id": 975352, "user_type": "registered", "accept_rate": 16, "profile_image": "https://www.gravatar.com/avatar/79470d4708b9927990eb78650fb906ca?s=128&d=identicon&r=PG&f=1", "display_name": "Akira  Noguchi", "link": "https://stackoverflow.com/users/975352/akira-noguchi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 396, "favorite_count": 0, "accepted_answer_id": 45830507, "answer_count": 1, "score": 0, "last_activity_date": 1503461361, "creation_date": 1503441424, "question_id": 45828030, "link": "https://stackoverflow.com/questions/45828030/how-to-test-rake-task-callbacks", "title": "How to test rake task callbacks", "body": "<p>I create test code with rspec. I want to test callback is executed or not.<br>\n<code>task main: [:callback]</code> means run <code>callback</code> before <code>main</code>, doesn't it?</p>\n\n<p>But my test failed. I looks like <code>callback</code> is not executed. Why?</p>\n\n<pre><code>require 'rails_helper'\nrequire 'rake'\n\nRSpec.describe 'Rake::Task' do\n  before(:all) do\n    @rake = Rake::Application.new\n    Rake.application = @rake\n    Rake.application.rake_require('rspec_before', [\"#{Rails.root}/lib/tasks\"])\n  end\n\n  subject { @rake['rspec_before:main'].execute }\n\n  it \"expects run callback before main task\" do\n    expect{ subject }.to output(/Hello, world/).to_stdout\n  end\nend\n</code></pre>\n\n<p>My Rake task is below.</p>\n\n<pre><code>namespace :rspec_before do\n  task :callback do\n    @greeting = \"Hello, world\"\n  end\n\n  # case 1\n  # In this case, `callback` is NOT executed in rspec\n  # In console, `callback` is executed !!!!\n  desc \"main task\"\n  task main: [:callback] do\n    puts @greeting\n  end\n\n  # case 2\n  # In this case, `callback` is executed in rspec\n  # task :main do\n  #   Rake::Task['rspec_before:callback'].execute\n  #   puts @greeting\n  # end\nend\n</code></pre>\n"}, {"tags": ["ruby", "methods", "filter"], "comments": [{"owner": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "edited": false, "score": 0, "creation_date": 1503440485, "post_id": 45827571, "comment_id": 78613719, "body": "<code>do a</code> and <code>do b</code> are not the same for different methods?"}, {"owner": {"reputation": 1075, "user_id": 6561814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AiS9a.png?s=128&g=1", "display_name": "jonhue", "link": "https://stackoverflow.com/users/6561814/jonhue"}, "reply_to_user": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "edited": false, "score": 0, "creation_date": 1503440714, "post_id": 45827571, "comment_id": 78613779, "body": "@IgorDrozdov  They are not the same."}, {"owner": {"reputation": 1075, "user_id": 6561814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AiS9a.png?s=128&g=1", "display_name": "jonhue", "link": "https://stackoverflow.com/users/6561814/jonhue"}, "reply_to_user": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "edited": false, "score": 0, "creation_date": 1503441205, "post_id": 45827571, "comment_id": 78613934, "body": "@IgorDrozdov Take a look at my example, perhaps that clarifies my question a bit."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1503443322, "post_id": 45827571, "comment_id": 78614445, "body": "what is the difference between method 2 and 3?"}, {"owner": {"reputation": 1075, "user_id": 6561814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AiS9a.png?s=128&g=1", "display_name": "jonhue", "link": "https://stackoverflow.com/users/6561814/jonhue"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1503447364, "post_id": 45827571, "comment_id": 78615320, "body": "@max pleaner their contents (a/b) are different. It just shows that I have dozens of methods following the same structure, some with specific parameters, the rest just with custom options. a/b are different for each of them. :)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1503488692, "post_id": 45827571, "comment_id": 78634687, "body": "@jonhue what are your methods doing? What is <code>options[:scope]</code> and why do you have to process a scopes array with 1 element different? Maybe there&#39;s a way to unify this so you don&#39;t need the conditional in the first place."}, {"owner": {"reputation": 1075, "user_id": 6561814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AiS9a.png?s=128&g=1", "display_name": "jonhue", "link": "https://stackoverflow.com/users/6561814/jonhue"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1503489899, "post_id": 45827571, "comment_id": 78635578, "body": "@Stefan <code>options[:scope]</code> is an array of strings. In my methods I do a/b in dependence of that option. I need to differentiate between these two states because if options[:scope] contains only one string, the results should be returned as they are. If it contains multiple strings, the results should be returned in a hash with the scope as key. So action a/b per method are only different in there way of returning a result."}, {"owner": {"reputation": 1075, "user_id": 6561814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AiS9a.png?s=128&g=1", "display_name": "jonhue", "link": "https://stackoverflow.com/users/6561814/jonhue"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1503491018, "post_id": 45827571, "comment_id": 78636460, "body": "@Stefan I updated my code example to explain this further."}], "owner": {"reputation": 1075, "user_id": 6561814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AiS9a.png?s=128&g=1", "display_name": "jonhue", "link": "https://stackoverflow.com/users/6561814/jonhue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1503493670, "creation_date": 1503438813, "last_edit_date": 1503493670, "question_id": 45827571, "link": "https://stackoverflow.com/questions/45827571/ruby-create-a-filter-for-methods", "title": "Ruby: Create a filter for methods", "body": "<p>I have multiple methods which are very repetitive:</p>\n\n<pre><code>def method1 specific, options = {}\n    scopes = options[:scope] || [:favorites]\n    if scopes.size &gt; 1\n        # do a\n    else\n        # do b\n    end\nend\n\ndef method2 options = {}\n    scopes = options[:scope] || [:favorites]\n    if scopes.size &gt; 1\n        # do c\n    else\n        # do d\n    end\nend\n\ndef method3 options = {}\n    scopes = options[:scope] || [:favorites]\n    if scopes.size &gt; 1\n        # do e\n    else\n        # do f\n    end\nend\n</code></pre>\n\n<p>Is there a way to just use something similar to a filter to vaildate the option <code>scope</code> and do a or b in the method that was called originally?</p>\n\n<hr>\n\n<p>Here is how I am doing it right now, although it is not very simplistic:</p>\n\n<pre><code>def method1 specific, options = {}\n    options[:parameter] = specific\n    if options.has_key?(:multiple_scopes) == false\n        results = validate_scopes __method__, options\n    elsif options.has_key?(:multiple_scopes) &amp;&amp; options[:multiple_scopes] == true\n        results = {}\n        options[:scope].each do |scope|\n            results[scope] = # do a (scope, specific accessible)\n        end\n    else\n        results = # do a (options[:scope], specific accessible)\n    end\n    results\nend\n\n# method2\n\n# method3\n\nprivate\n\ndef validate_scopes method, options = {}\n    options[:scope] = [:favorites] unless options.has_key? :scope\n    if options[:scope].size &gt; 1\n        options[:multiple_scopes] = true\n    else\n        options[:multiple_scopes] = false\n        options[:scope] = options[:scope][0]\n    end\n    if options.has_key? :parameter\n        parameter = options[:parameter]\n        options.delete :parameter\n        send(method, parameter, options)\n    else\n        send(method, options)\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation", "decimal"], "answers": [{"comments": [{"owner": {"reputation": 323, "user_id": 1934168, "user_type": "registered", "accept_rate": 16, "profile_image": "https://www.gravatar.com/avatar/a8e85918d3db651edd04097020cbf5f1?s=128&d=identicon&r=PG", "display_name": "Hilmi Yamc\u0131", "link": "https://stackoverflow.com/users/1934168/hilmi-yamc%c4%b1"}, "edited": false, "score": 0, "creation_date": 1503440152, "post_id": 45827793, "comment_id": 78613623, "body": "Yeap, price has a precision of 2. Assuming that I doesn&#39;t have a precision, format validation must work. However, either way, It doesn&#39;t work."}, {"owner": {"reputation": 66, "user_id": 8304085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/277b2229841818444db772e89e4a29b2?s=128&d=identicon&r=PG&f=1", "display_name": "at0misk", "link": "https://stackoverflow.com/users/8304085/at0misk"}, "reply_to_user": {"reputation": 323, "user_id": 1934168, "user_type": "registered", "accept_rate": 16, "profile_image": "https://www.gravatar.com/avatar/a8e85918d3db651edd04097020cbf5f1?s=128&d=identicon&r=PG", "display_name": "Hilmi Yamc\u0131", "link": "https://stackoverflow.com/users/1934168/hilmi-yamc%c4%b1"}, "edited": false, "score": 0, "creation_date": 1503440321, "post_id": 45827793, "comment_id": 78613670, "body": "I would increase your precision, if you mean that you want to require a certain amount of decimals, that&#39;s another story, but I don&#39;t understand your use case."}], "tags": [], "owner": {"reputation": 66, "user_id": 8304085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/277b2229841818444db772e89e4a29b2?s=128&d=identicon&r=PG&f=1", "display_name": "at0misk", "link": "https://stackoverflow.com/users/8304085/at0misk"}, "is_accepted": false, "score": 1, "last_activity_date": 1503440051, "creation_date": 1503440051, "answer_id": 45827793, "question_id": 45827436, "link": "https://stackoverflow.com/questions/45827436/ruby-on-rails-decimal-property-validation/45827793#45827793", "title": "Ruby on Rails Decimal property validation", "body": "<p>What is the precision of your price field?  Via the <a href=\"http://edgeguides.rubyonrails.org/active_record_migrations.html#column-modifiers\" rel=\"nofollow noreferrer\">docs</a>:</p>\n\n<p><code>precision</code> Defines the precision for the decimal fields, representing the total number of digits in the number.</p>\n\n<p>I'm assuming price only has a precision of 2, and that's why it's getting rounded.</p>\n"}, {"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 1, "last_activity_date": 1503447407, "last_edit_date": 1503447407, "creation_date": 1503447059, "answer_id": 45828696, "question_id": 45827436, "link": "https://stackoverflow.com/questions/45827436/ruby-on-rails-decimal-property-validation/45828696#45828696", "title": "Ruby on Rails Decimal property validation", "body": "<p>The value is converted to decimal by the setter. Which means that format validation will always pass. </p>\n\n<p>If you need validate the format use <code>read_attribute_before_type_cast</code> in a custom validation.</p>\n\n<pre><code>class Order &lt; ApplicationRecord\n\n  validates :price, numericality: { greater_than: 0, less_than: 1000 }\n  validates :price_format\n  PRICE_REGEXP = /\\A\\d+(?:\\.\\d{0,2})?\\z/.freeze\n\n  private \n  def price_format\n    unless read_attribute_before_type_cast('price') =~ PRICE_REGEXP\n      errors.add('price', 'must match the correct format')\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 323, "user_id": 1934168, "user_type": "registered", "accept_rate": 16, "profile_image": "https://www.gravatar.com/avatar/a8e85918d3db651edd04097020cbf5f1?s=128&d=identicon&r=PG", "display_name": "Hilmi Yamc\u0131", "link": "https://stackoverflow.com/users/1934168/hilmi-yamc%c4%b1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1397, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1503447407, "creation_date": 1503438208, "question_id": 45827436, "link": "https://stackoverflow.com/questions/45827436/ruby-on-rails-decimal-property-validation", "title": "Ruby on Rails Decimal property validation", "body": "<p>I have a business model with a decimal field. Its value must be between 0.00 and 999.99. So I have created a decimal field and add validations to the model.</p>\n\n<pre><code>class Order &lt; ApplicationRecord\n\n  validates :price, format: { with: /\\A\\d+(?:\\.\\d{0,2})?\\z/ }, numericality: { greater_than: 0, less_than: 1000 }\n\nend\n</code></pre>\n\n<p>When I create the Order object with a decimal value which is greater than 1000 or less than 0, I get the error I expected and that's ok. I can see that \n\"numericality: { greater_than: 0, less_than: 1000 }\" validations work as expected. </p>\n\n<p>Howeber, when I try to create an Order object with a decimal value of 45.45554 or 45.45666, rails persists the object to the database with the price value of 45.45. I expect getting a format error, but it seems that\nformat validation doesn't work.</p>\n\n<p>What I'm doing wrong ?</p>\n\n<p>Any suggestions,</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "hash", "activeadmin"], "comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1503444546, "post_id": 45826928, "comment_id": 78614728, "body": "I would typically do this by adding a virtual attribute to the model. How strongly do you feel about keeping code in helpers and views?"}], "answers": [{"tags": [], "owner": {"reputation": 2560, "user_id": 153279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/783f796db3d628f7c268326fb3323de8?s=128&d=identicon&r=PG", "display_name": "Piers C", "link": "https://stackoverflow.com/users/153279/piers-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1503520290, "creation_date": 1503520290, "answer_id": 45848794, "question_id": 45826928, "link": "https://stackoverflow.com/questions/45826928/combining-multiple-inputs-into-ruby-hash-in-active-admin/45848794#45848794", "title": "Combining Multiple Inputs into ruby hash in Active Admin", "body": "<p>I would try and hide the transformation from the form using a <a href=\"https://activeadmin.info/11-decorators.html\" rel=\"nofollow noreferrer\">decorator</a>.  Otherwise <a href=\"https://github.com/wild5r/activeadmin_hstore_editor\" rel=\"nofollow noreferrer\">hstore editor</a> might give you some inspiration.  I would recommend against a custom form builder, especially with nested has_many.</p>\n"}], "owner": {"reputation": 321, "user_id": 2671017, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Mdvbp.jpg?s=128&g=1", "display_name": "dynsne", "link": "https://stackoverflow.com/users/2671017/dynsne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 549, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513806748, "creation_date": 1503435768, "last_edit_date": 1513806748, "question_id": 45826928, "link": "https://stackoverflow.com/questions/45826928/combining-multiple-inputs-into-ruby-hash-in-active-admin", "title": "Combining Multiple Inputs into ruby hash in Active Admin", "body": "<p>So I have a doubly nested associations like <code>Foo</code>s having many <code>Bar</code>s that have many <code>Baz</code>s. The <code>Baz</code> model has a serialized field called <code>data</code> that takes the form of a hash that maps ranges (i.e: <code>1..3</code>) to a numerical value. <code>{ (1..3) =&gt; 42 }</code></p>\n\n<p>Currently in the Active Admin edit page I have something like:</p>\n\n<pre><code>form do |f|\n    f.semantic_errors\n    f.has_many :bars, heading \"Bar\" do |t|\n        f.input :item_one\n        f.input :item_two\n        t.has_many :bazs do |r|\n            r.input :name\n            r.input :data, as: :string\n        end\n    end\nend\n</code></pre>\n\n<p>As you can see I am dealing with the Hash as a string, and rendering it in a text box in the edit page. I'd like to be able to loop over the already existing data and render them into separate text boxes so they can be edited indidividually or deleted... But on submitting the form it would glue together these inputs and pass the data as a hash rather than a string.</p>\n\n<p>Can this be done by writing a custom form builder? What is the best approach?</p>\n\n<p>I'd like to build an extensible solution that doesn't require <em>any</em> code to be written into the model or controllers.</p>\n\n<p>Thank for reading <code>o//</code></p>\n\n<p><strong>Update</strong>:\nI found a solution that works for me. Since the whole problem here was that our data was serialized from Hash into string when being placed into database, it made sense to allow the user to edit this data as JSON and make changes to the setter method on model that takes the data to allow it to parse the JSON. This made things simpler as I could just use this \n<a href=\"https://github.com/josdejong/jsoneditor/\" rel=\"nofollow noreferrer\">JSON editor widget</a> to give a nice UI to edit the data with. The trick was then to learn how to apply the widget to items created with the \"Add New Item\" button. Looking at the <a href=\"https://github.com/activeadmin/activeadmin/blob/be47c415e9f088d8f960eb4dbfeab8320342f44a/app/assets/javascripts/active_admin/lib/has_many.es6#L52\" rel=\"nofollow noreferrer\">active admin source code</a> I learned that I could hook into the <code>has_many_add:after</code> event to apply the JSON editor to the added element after it had already been added to the DOM tree.</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "dictionary", "max"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1503440045, "post_id": 45826329, "comment_id": 78613604, "body": "In a hash declaration <code>&quot;x&quot;: y</code> becomes <code>:x =&gt; y</code>. For actual string keys: <code>&quot;x&quot; =&gt; y</code>."}], "answers": [{"comments": [{"owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "edited": false, "score": 0, "creation_date": 1503433582, "post_id": 45826371, "comment_id": 78610872, "body": "yep, perfect. thank you! I&#39;ll accept answer when it lets me!"}], "tags": [], "owner": {"reputation": 27630, "user_id": 1550807, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JgCw5.png?s=128&g=1", "display_name": "Danil Speransky", "link": "https://stackoverflow.com/users/1550807/danil-speransky"}, "is_accepted": true, "score": 5, "last_activity_date": 1503434229, "last_edit_date": 1503434229, "creation_date": 1503433449, "answer_id": 45826371, "question_id": 45826329, "link": "https://stackoverflow.com/questions/45826329/use-max-by-in-ruby-to-find-the-key-for-the-maximum-number-in-a-hash/45826371#45826371", "title": "Use max_by in Ruby to find the key for the maximum number in a hash", "body": "<p>You're using symbols in the hash, but you're trying to access it with strings. Change it to:</p>\n\n<pre><code>max_category = categories.max_by{|cat| CATEGORY_WEIGHTS[cat.to_sym]}\n</code></pre>\n\n<p>And here is how you can do it simpler:</p>\n\n<pre><code>category_weights = {\n  small_standard: 0,\n  large_standard: 1,\n  small_oversize: 2,\n  medium_oversize: 3,\n  large_oversize: 4\n}\n\ncategory = category_weights.max_by{|c, w| w}[0]\n</code></pre>\n"}], "owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 960, "favorite_count": 0, "accepted_answer_id": 45826371, "answer_count": 1, "score": 1, "last_activity_date": 1503439141, "creation_date": 1503433312, "last_edit_date": 1503439141, "question_id": 45826329, "link": "https://stackoverflow.com/questions/45826329/use-max-by-in-ruby-to-find-the-key-for-the-maximum-number-in-a-hash", "title": "Use max_by in Ruby to find the key for the maximum number in a hash", "body": "<p>I need to find the category, within an array, that holds the \"largest\" weight. I define the weights in an environment variable:</p>\n\n<pre><code>CATEGORY_WEIGHTS = {\n  \"small_standard\": 0,\n  \"large_standard\": 1,\n  \"small_oversize\": 2,\n  \"medium_oversize\": 3,\n  \"large_oversize\": 4\n}\n</code></pre>\n\n<p>In this example, the \"largest\" weighted category would be <code>large_oversize</code>.</p>\n\n<p>The array that I'm checking looks like this:</p>\n\n<pre><code>categories = [\n  \"small_oversize\",\n  \"large_standard\",\n  \"small_standard\",\n  \"large_oversize\"\n]\n</code></pre>\n\n<p>But when I do this, it doesn't return the correct value:</p>\n\n<pre><code>max_category = categories.max_by{ |cat| CATEGORY_WEIGHTS[cat] }\n</code></pre>\n\n<p>It returns <code>small_oversize</code> instead of <code>large_oversize</code>.</p>\n\n<p>Where did I go astray?</p>\n"}, {"tags": ["arrays", "ruby", "reference", "functional-programming", "iterator"], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 2, "last_activity_date": 1503432393, "creation_date": 1503432393, "answer_id": 45826130, "question_id": 45826070, "link": "https://stackoverflow.com/questions/45826070/why-pipe-equals-doesnt-work-with-tap-in-ruby/45826130#45826130", "title": "Why pipe equals doesn&#39;t work with tap in Ruby?", "body": "<blockquote>\n  <p>Why is that?</p>\n</blockquote>\n\n<p>Simple, because you don't change the original <code>sts</code>. You instead create <strong>a new array</strong> (from the <code>|=</code> operator) and make <code>sts</code> point to that new array. Of course, as soon as <code>tap</code> block returns, this temp array is lost forever.</p>\n\n<hr>\n\n<p>In case you didn't know,</p>\n\n<pre><code>sts |= type\n</code></pre>\n\n<p>is a shortcut for</p>\n\n<pre><code>sts = sts | type\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1503433374, "post_id": 45826140, "comment_id": 78610782, "body": "Why do I think what, the &quot;noise&quot;? How it helps demonstrate anything, I honestly wonder? <a href=\"https://pastebin.com/raw/xU8hcx7J\" rel=\"nofollow noreferrer\">This is how I&#39;d format it</a>, for example. Cleaner <b>and</b> copy-pastable."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1503434004, "post_id": 45826140, "comment_id": 78611053, "body": "yeah, sorry if I wasn&#39;t clear. Obviously, I wasn&#39;t talking about the <i>code</i>. Just the noise :)"}], "tags": [], "owner": {"reputation": 27630, "user_id": 1550807, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JgCw5.png?s=128&g=1", "display_name": "Danil Speransky", "link": "https://stackoverflow.com/users/1550807/danil-speransky"}, "is_accepted": false, "score": 1, "last_activity_date": 1503433890, "last_edit_date": 1592644375, "creation_date": 1503432442, "answer_id": 45826140, "question_id": 45826070, "link": "https://stackoverflow.com/questions/45826070/why-pipe-equals-doesnt-work-with-tap-in-ruby/45826140#45826140", "title": "Why pipe equals doesn&#39;t work with tap in Ruby?", "body": "<p>From the documentation:</p>\n<blockquote>\n<p><strong>tap {|x| block } \u2192 obj</strong></p>\n<p>Yields self to the block, and then returns self. The primary purpose of this method is to \u201ctap into\u201d a method chain, in order to perform operations on intermediate results within the chain.</p>\n</blockquote>\n<p>In first case you modify the array passed and so it's changed.</p>\n<p>In second case you just create a new array:</p>\n<pre><code>a = [1, 2] # =&gt; [1, 2]\nb = a\nb |= [3] \na # =&gt; [1, 2]\nb # =&gt; [1, 2, 3]\n</code></pre>\n"}], "owner": {"reputation": 9855, "user_id": 895789, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/bac3b43b389e58d49f8b4a30bd0cf96a?s=128&d=identicon&r=PG", "display_name": "Alter Lagos", "link": "https://stackoverflow.com/users/895789/alter-lagos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 45826130, "answer_count": 2, "score": 1, "last_activity_date": 1503438680, "creation_date": 1503432083, "last_edit_date": 1503438680, "question_id": 45826070, "link": "https://stackoverflow.com/questions/45826070/why-pipe-equals-doesnt-work-with-tap-in-ruby", "title": "Why pipe equals doesn&#39;t work with tap in Ruby?", "body": "<p>If I modify an array inside <code>.tap</code> context, the modified version will be returned:</p>\n\n<pre><code>states = [:a, :b].tap do |sts|\n  sts &lt;&lt; :c\nend\n\nputs states # [:a, :b, :c]\n</code></pre>\n\n<p>But if I modify it with <code>|=</code>, it returns the same object:</p>\n\n<pre><code>states = [:a, :b].tap do |sts|\n  [[:a, :c], [:b, :d]].each do |type|\n    sts |= type\n  end\n\n  puts sts.inspect # [:a, :b, :c, :d]\nend\n\nputs states.inspect # [:a, :b]\n</code></pre>\n\n<p>Could point me in the right direction?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "rails-activerecord"], "answers": [{"comments": [{"owner": {"reputation": 1016, "user_id": 4500083, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/FfdBQ.gif?s=128&g=1", "display_name": "Mini", "link": "https://stackoverflow.com/users/4500083/mini"}, "edited": false, "score": 0, "creation_date": 1503496069, "post_id": 45828037, "comment_id": 78640630, "body": "it says ArgumentError: Unknown key: 1. Valid keys are: :includes, :eager_load, :preload, :select, :group, :order, :joins, :left_joins, :left_outer_joins, :references, :extending, :unscope, :limit, :offset, :lock, :readonly, :reordering, :reverse_order, :distinct, :create_with, :where, :having, :from"}, {"owner": {"reputation": 1016, "user_id": 4500083, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/FfdBQ.gif?s=128&g=1", "display_name": "Mini", "link": "https://stackoverflow.com/users/4500083/mini"}, "edited": false, "score": 0, "creation_date": 1503496983, "post_id": 45828037, "comment_id": 78641396, "body": "NoMethodError: undefined method `map!&#39; for #&lt;Hash:0x007f911b7ce968&gt; Did you mean?  map"}, {"owner": {"reputation": 1016, "user_id": 4500083, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/FfdBQ.gif?s=128&g=1", "display_name": "Mini", "link": "https://stackoverflow.com/users/4500083/mini"}, "edited": false, "score": 0, "creation_date": 1503497032, "post_id": 45828037, "comment_id": 78641429, "body": "I tried map now NoMethodError: undefined method `limit&#39; for #&lt;Array:0x007f911dd3ddc0&gt;"}, {"owner": {"reputation": 1016, "user_id": 4500083, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/FfdBQ.gif?s=128&g=1", "display_name": "Mini", "link": "https://stackoverflow.com/users/4500083/mini"}, "edited": false, "score": 0, "creation_date": 1503497216, "post_id": 45828037, "comment_id": 78641586, "body": "and without limit it returns 4 record , one record per each group"}], "tags": [], "owner": {"reputation": 1075, "user_id": 6561814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AiS9a.png?s=128&g=1", "display_name": "jonhue", "link": "https://stackoverflow.com/users/6561814/jonhue"}, "is_accepted": false, "score": 0, "last_activity_date": 1503496552, "last_edit_date": 1503496552, "creation_date": 1503441470, "answer_id": 45828037, "question_id": 45825911, "link": "https://stackoverflow.com/questions/45825911/return-x-amount-of-each-group-in-rails-by-has-many/45828037#45828037", "title": "return x amount of each group in rails by has_many", "body": "<p>Here you go:</p>\n\n<pre><code>latest_results.all.group_by(&amp;:source_id).map! { |source_id, latest_results_of_source| latest_results_of_source.limit(30) }\n</code></pre>\n\n<p>or</p>\n\n<pre><code>has_many :latest_results, -&gt; { all.group_by(&amp;:source_id).map! { |source_id, latest_results_of_source| latest_results_of_source.limit(30) } }, source: :results, through: :active_filters\n</code></pre>\n"}], "owner": {"reputation": 1016, "user_id": 4500083, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/FfdBQ.gif?s=128&g=1", "display_name": "Mini", "link": "https://stackoverflow.com/users/4500083/mini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503496552, "creation_date": 1503431467, "last_edit_date": 1503432582, "question_id": 45825911, "link": "https://stackoverflow.com/questions/45825911/return-x-amount-of-each-group-in-rails-by-has-many", "title": "return x amount of each group in rails by has_many", "body": "<p>I'm a rails newbie so pardon if this is a basic question.I extended domain model by has_many </p>\n\n<pre><code>has_many :stream_filters\n\n\nhas_many :active_filters,\n               -&gt; { where(active: true) },\n               through: :stream_filters,\n               source: :filter,\n               class_name: 'Filter'\n\nhas_many :results,\n           -&gt; { distinct },\n           through: :active_filters\n\nhas_many :latest_results,\n           -&gt; { distinct.order('created_at DESC').limit(30) },\n           source: :results,\n           through: :active_filters\n</code></pre>\n\n<p>as you can see in latest_result I get only 30 of them.</p>\n\n<p>Now is there a way to group them by a property and take 30 of each group?</p>\n\n<p>I tried this code but it's not working, it's return one of each group </p>\n\n<pre><code>has_many :latest_results,\n           -&gt; { distinct.group(\"source_id\").order('created_at DESC').limit(30) },\n           source: :results,\n           through: :active_filters\n</code></pre>\n"}, {"tags": ["ruby", "oop", "operator-overloading", "overriding", "equality"], "answers": [{"tags": [], "owner": {"reputation": 27630, "user_id": 1550807, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JgCw5.png?s=128&g=1", "display_name": "Danil Speransky", "link": "https://stackoverflow.com/users/1550807/danil-speransky"}, "is_accepted": true, "score": 1, "last_activity_date": 1503430797, "creation_date": 1503430797, "answer_id": 45825735, "question_id": 45825654, "link": "https://stackoverflow.com/questions/45825654/overriding-equality-operator-works-only-in-one-direction/45825735#45825735", "title": "Overriding == equality operator works only in one direction", "body": "<p>It's not possible without changing other classes. Basically <code>a == b</code> equals <code>a.==(b)</code>. So you need to override <code>==</code> operator for the second class if you want to make it work.</p>\n"}, {"comments": [{"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 1, "creation_date": 1503433740, "post_id": 45825741, "comment_id": 78610934, "body": "You could also, alias the <code>==</code> method before you redefine it: <code>alias :original_double_equals :&quot;==&quot;</code> between lines 7 and 8 in your example and then instead of <code>super</code> call <code>original_double_equals(other)</code>...yields <code>true</code>, <code>true</code>, <code>true</code>, <code>false</code> as the outputs"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1503433816, "post_id": 45825741, "comment_id": 78610970, "body": "@SimpleLime: actually, this does sound like a better idea. Lemme do that"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 1, "last_activity_date": 1503433881, "last_edit_date": 1503433881, "creation_date": 1503430810, "answer_id": 45825741, "question_id": 45825654, "link": "https://stackoverflow.com/questions/45825654/overriding-equality-operator-works-only-in-one-direction/45825741#45825741", "title": "Overriding == equality operator works only in one direction", "body": "<blockquote>\n  <p>Is there a way to force this equality method to also work in the reverse direction?</p>\n</blockquote>\n\n<p>No, but you can change <code>Hash#==</code> to recognize the special case of <code>Example</code>.</p>\n\n<pre><code>class Example\n  def ==(other)\n    return true\n  end\nend\n\nclass Hash\n  alias_method :original_double_equals, :==\n\n  def ==(other)\n    case other\n    when Example\n      other == self\n    else\n      original_double_equals(other)\n    end\n  end\nend\n\n\nexp = Example.new\nexp == {} # =&gt; true\n{} == exp # =&gt; true\n{} == {} # =&gt; true\n{foo: 1} == {foo: 2} # =&gt; false\n</code></pre>\n\n<p>I wouldn't do this, if I were you.</p>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 1, "last_activity_date": 1503500048, "creation_date": 1503500048, "answer_id": 45843124, "question_id": 45825654, "link": "https://stackoverflow.com/questions/45825654/overriding-equality-operator-works-only-in-one-direction/45843124#45843124", "title": "Overriding == equality operator works only in one direction", "body": "<p>No, it is not possible.</p>\n\n<p>Ruby is an object-oriented language. The <em>fundamental idea</em> of OO is that you send messages to objects and the receiver object, and <em>nothing but the receiver</em> object gets to decide how to respond to that message.</p>\n\n<ul>\n<li>If you send the message <code>==</code> to object <code>a</code>, passing object <code>b</code> as an argument, then <code>a</code> <em>and <code>a</code> alone</em> gets to decide how to respond.</li>\n<li>If you send the message <code>==</code> to object <code>b</code>, passing object <code>a</code> as an argument, then <code>b</code> <em>and <code>b</code> alone</em> gets to decide how to respond.</li>\n</ul>\n\n<p>The <em>only way</em> that this is guaranteed to give the same response, is if <code>a</code> and <code>b</code> cooperate and <em>agree</em> to give the same response.</p>\n\n<p>It would theoretically be possible to design a language in such a way that <code>a == b</code> is not a message send to either <code>a</code> or <code>b</code>, but rather a message send to some <em>third</em> \"context object\". IOW, <code>a == b</code> is not interpreted as <code>a.==(b)</code> or <code>b.==(a)</code> but rather <code>some_context_object.==(a, b)</code> (for example, the context object could just be yourself, i.e. <code>self.==(a, b)</code>). In that case, the context object has access to the <em>public</em> API of both <code>a</code> and <code>b</code> and could take steps to ensure that <code>==</code> is commutative.</p>\n\n<p>But in general, and by the fundamental nature of OO, messages are non-commutative, and the receiver object is special.</p>\n"}], "owner": {"reputation": 37, "user_id": 8473065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20ee5abf7283ea70135ee319fca7b99a?s=128&d=identicon&r=PG&f=1", "display_name": "illusionist", "link": "https://stackoverflow.com/users/8473065/illusionist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 45825735, "answer_count": 3, "score": 0, "last_activity_date": 1503500048, "creation_date": 1503430529, "last_edit_date": 1503438131, "question_id": 45825654, "link": "https://stackoverflow.com/questions/45825654/overriding-equality-operator-works-only-in-one-direction", "title": "Overriding == equality operator works only in one direction", "body": "<p>Consider next example where I override <code>==</code> operator to return <code>true</code> constantly:</p>\n\n<pre><code>class Example\n  def ==(other)\n    return true\n  end\nend\n</code></pre>\n\n<p>However, this only works in one direction:</p>\n\n<pre><code>exp = Example.new\nputs exp == {} #=&gt; true\nputs {} == exp #=&gt; false\n</code></pre>\n\n<p>Is there a way to force this equality method to work in the reverse direction?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 847, "user_id": 1963964, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/MLMKT.jpg?s=128&g=1", "display_name": "Roshan", "link": "https://stackoverflow.com/users/1963964/roshan"}, "edited": false, "score": 1, "creation_date": 1503430875, "post_id": 45825542, "comment_id": 78609581, "body": "what is the output of <code>git remote -v</code> ?"}, {"owner": {"reputation": 75, "user_id": 6776326, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8222eae068c58baec96cfc617ca9e28b?s=128&d=identicon&r=PG&f=1", "display_name": "nashCode", "link": "https://stackoverflow.com/users/6776326/nashcode"}, "edited": false, "score": 0, "creation_date": 1507334511, "post_id": 45825542, "comment_id": 80182641, "body": "This solved here: <a href=\"https://stackoverflow.com/questions/6447081/heroku-push-app-problem\" title=\"heroku push app problem\">stackoverflow.com/questions/6447081/heroku-push-app-problem</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7776751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/375d6ce259f3dc357b164734ce13527c?s=128&d=identicon&r=PG&f=1", "display_name": "pika", "link": "https://stackoverflow.com/users/7776751/pika"}, "is_accepted": false, "score": 0, "last_activity_date": 1503507306, "creation_date": 1503507306, "answer_id": 45845420, "question_id": 45825542, "link": "https://stackoverflow.com/questions/45825542/deployment-ruby-rails-with-git-on-heroku/45845420#45845420", "title": "Deployment Ruby Rails with GIT on Heroku", "body": "<p>It seems like you have renamed your application. You might want to refer to <a href=\"https://stackoverflow.com/questions/6447081/heroku-push-app-problem\">this</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 8502281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0f80e3d503b9f6552ec51ebb53323b6?s=128&d=identicon&r=PG&f=1", "display_name": "Alec Soybel", "link": "https://stackoverflow.com/users/8502281/alec-soybel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1503507306, "creation_date": 1503430140, "last_edit_date": 1503430872, "question_id": 45825542, "link": "https://stackoverflow.com/questions/45825542/deployment-ruby-rails-with-git-on-heroku", "title": "Deployment Ruby Rails with GIT on Heroku", "body": "<p>I am working on Ch.1 Ruby on Rails tutorial (Rails 5) with cloud IDE\nI have the problem with deploying with Heroku. </p>\n\n<p>The last command:</p>\n\n<pre><code>$ git push heroku master\n</code></pre>\n\n<p>produces an error message:</p>\n\n<pre><code>remote: ! No such app as murmuring-atoll-61945.\nfatal: repository \u2018https://git.heroku.com/murmuring-atoll-61945.git/\u2019 not found\n</code></pre>\n\n<p>When I visit the address and run <code>heroku create</code>\nit did not deploy hello_app.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "if-statement", "nomethoderror", "grape-api"], "comments": [{"owner": {"reputation": 864, "user_id": 1423901, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mLA3B.jpg?s=128&g=1", "display_name": "Redithion", "link": "https://stackoverflow.com/users/1423901/redithion"}, "edited": false, "score": 0, "creation_date": 1503430013, "post_id": 45825363, "comment_id": 78609172, "body": "They are not the same, you can read more about the difference <a href=\"http://mitrev.net/ruby/2015/11/13/the-operator-in-ruby/\" rel=\"nofollow noreferrer\">here</a>"}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 13, "last_activity_date": 1503429937, "creation_date": 1503429937, "answer_id": 45825477, "question_id": 45825363, "link": "https://stackoverflow.com/questions/45825363/what-is-the-difference-between-try-and-safe-navigation-operator-in-ruby/45825477#45825477", "title": "What is the difference between `try` and `&amp;.` (safe navigation operator) in Ruby", "body": "<p>The <code>try</code> method ignores a lot of things, it just gives it a shot and calls it a day if things don't work out.</p>\n\n<p>The <code>&amp;</code> conditional navigation option will <em>only</em> block calls on <code>nil</code> objects. Anything else is considered to be valid and will proceed with full consequences, exceptions included.</p>\n"}, {"comments": [{"owner": {"reputation": 38077, "user_id": 199712, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4fa58c43c72a15d2d560ffd931fbe9bb?s=128&d=identicon&r=PG", "display_name": "Jason Swett", "link": "https://stackoverflow.com/users/199712/jason-swett"}, "edited": false, "score": 0, "creation_date": 1615474614, "post_id": 45825498, "comment_id": 117706261, "body": "&quot;So basically it saves you from calling a method on nil&quot; - what does the &quot;it&quot; in this sentence refer to?"}], "tags": [], "owner": {"reputation": 27630, "user_id": 1550807, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JgCw5.png?s=128&g=1", "display_name": "Danil Speransky", "link": "https://stackoverflow.com/users/1550807/danil-speransky"}, "is_accepted": true, "score": 67, "last_activity_date": 1548892958, "last_edit_date": 1548892958, "creation_date": 1503429999, "answer_id": 45825498, "question_id": 45825363, "link": "https://stackoverflow.com/questions/45825363/what-is-the-difference-between-try-and-safe-navigation-operator-in-ruby/45825498#45825498", "title": "What is the difference between `try` and `&amp;.` (safe navigation operator) in Ruby", "body": "<p><code>&amp;.</code> works like <code>#try!</code>, not <code>#try</code>.</p>\n\n<p>And here is description of <code>#try!</code> (from <a href=\"http://devdocs.io/rails~5.1/object#method-i-try-21\" rel=\"noreferrer\">documentation</a>):</p>\n\n<blockquote>\n  <p>Same as #try, but will raise a NoMethodError exception if the receiving is not nil and does not implemented the tried method.</p>\n</blockquote>\n\n<p>So basically it saves you from calling a method on <code>nil</code>, but if an object is presented it will try to call its method as usual.</p>\n\n<p>The quote is from Rails Documentation, and so it's important to emphasize\nthat Ruby does not provide <code>#try</code>; it's provided by Rails, or more accurately ActiveSupport. The <a href=\"https://ruby-doc.org/core-2.6/doc/syntax/calling_methods_rdoc.html#label-Safe+navigation+operator\" rel=\"noreferrer\">safe navigation operator</a> (<code>&amp;.</code>) however, is a language feature presented in Ruby 2.3.0.</p>\n"}, {"comments": [{"owner": {"reputation": 2308, "user_id": 446106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f85c140d1efdc501c26c0e911c6bd5d0?s=128&d=identicon&r=PG", "display_name": "mwfearnley", "link": "https://stackoverflow.com/users/446106/mwfearnley"}, "edited": false, "score": 1, "creation_date": 1568628966, "post_id": 45829613, "comment_id": 102321444, "body": "So in case your code might be running in pure Ruby, you should do <code>foo.try(:try, ...)</code> to be on the safe side."}, {"owner": {"reputation": 628, "user_id": 8267417, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qgllr-3VCV4/AAAAAAAAAAI/AAAAAAAAAAo/E_crAMNR-fM/photo.jpg?sz=128", "display_name": "gasc", "link": "https://stackoverflow.com/users/8267417/gasc"}, "reply_to_user": {"reputation": 2308, "user_id": 446106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f85c140d1efdc501c26c0e911c6bd5d0?s=128&d=identicon&r=PG", "display_name": "mwfearnley", "link": "https://stackoverflow.com/users/446106/mwfearnley"}, "edited": false, "score": 0, "creation_date": 1606767105, "post_id": 45829613, "comment_id": 115056303, "body": "Sorry @mwfearnley but I don&#39;t understand your comment. If the code is in pure Ruby (i.e outside of Rails or not using <code>ActiveSupport</code>) then what&#39;s the point of doing <code>foo.try(:try...)</code> if <code>foo.try</code>  will raise a <code>NoMethodError</code> ?"}, {"owner": {"reputation": 2308, "user_id": 446106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f85c140d1efdc501c26c0e911c6bd5d0?s=128&d=identicon&r=PG", "display_name": "mwfearnley", "link": "https://stackoverflow.com/users/446106/mwfearnley"}, "reply_to_user": {"reputation": 628, "user_id": 8267417, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qgllr-3VCV4/AAAAAAAAAAI/AAAAAAAAAAo/E_crAMNR-fM/photo.jpg?sz=128", "display_name": "gasc", "link": "https://stackoverflow.com/users/8267417/gasc"}, "edited": false, "score": 1, "creation_date": 1606769251, "post_id": 45829613, "comment_id": 115057099, "body": "@gasc Looking back at my comment now, I have to conclude it was a joke, based on the fact that the advice was &quot;obviously&quot; bad..  Of course, if you are almost certain that <code>foo.try(:try...)</code> will fail, then you should do <code>foo.try(:try, :try...)</code> to be extra safe.."}, {"owner": {"reputation": 628, "user_id": 8267417, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qgllr-3VCV4/AAAAAAAAAAI/AAAAAAAAAAo/E_crAMNR-fM/photo.jpg?sz=128", "display_name": "gasc", "link": "https://stackoverflow.com/users/8267417/gasc"}, "reply_to_user": {"reputation": 2308, "user_id": 446106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f85c140d1efdc501c26c0e911c6bd5d0?s=128&d=identicon&r=PG", "display_name": "mwfearnley", "link": "https://stackoverflow.com/users/446106/mwfearnley"}, "edited": false, "score": 0, "creation_date": 1607016798, "post_id": 45829613, "comment_id": 115146682, "body": "...and I ruined the joke =(  My bad @mwfearnley"}], "tags": [], "owner": {"reputation": 1228, "user_id": 4497621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d140bf5c97a7ee616b0f21189fa9373?s=128&d=identicon&r=PG&f=1", "display_name": "John Hayes-Reed", "link": "https://stackoverflow.com/users/4497621/john-hayes-reed"}, "is_accepted": false, "score": 11, "last_activity_date": 1503623356, "last_edit_date": 1503623356, "creation_date": 1503454650, "answer_id": 45829613, "question_id": 45825363, "link": "https://stackoverflow.com/questions/45825363/what-is-the-difference-between-try-and-safe-navigation-operator-in-ruby/45829613#45829613", "title": "What is the difference between `try` and `&amp;.` (safe navigation operator) in Ruby", "body": "<p>I am arriving to the party a bit late here, the other answers have covered how it works, but I wanted to add something that the other answers have not covered.</p>\n\n<p>Your question asks What is the difference between <code>try</code> and <code>&amp;.</code> in <strong>Ruby</strong>. Ruby being the key word here.</p>\n\n<p>The biggest difference is that <code>try</code> doesn't exist in Ruby, it is a method provided by Rails. you can see this or yourself if you do something like this in the rails console: </p>\n\n<pre><code>[1, 2, 3].try(:join, '-')\n#=&gt; \"1-2-3\" \n</code></pre>\n\n<p>However if you do the same thing in the irb console, you will get: </p>\n\n<pre><code>[1, 2, 3].try(:join, '-')\nNoMethodError: undefined method `try' for [1, 2, 3]:Array\n</code></pre>\n\n<p>The <code>&amp;.</code> is part of the Ruby standard library, and is therefore available in any Ruby project, not just Rails.</p>\n"}, {"tags": [], "owner": {"reputation": 137, "user_id": 14529242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EP3rU.jpg?s=128&g=1", "display_name": "Md. Imam Hossain", "link": "https://stackoverflow.com/users/14529242/md-imam-hossain"}, "is_accepted": false, "score": 1, "last_activity_date": 1615832394, "creation_date": 1615832394, "answer_id": 66643479, "question_id": 45825363, "link": "https://stackoverflow.com/questions/45825363/what-is-the-difference-between-try-and-safe-navigation-operator-in-ruby/66643479#66643479", "title": "What is the difference between `try` and `&amp;.` (safe navigation operator) in Ruby", "body": "<p>In addition to the above answers, I am adding some examples.<a href=\"https://mitrev.net/ruby/2015/11/13/the-operator-in-ruby/\" rel=\"nofollow noreferrer\">1</a></p>\n<pre class=\"lang-rb prettyprint-override\"><code>account = Account.new(owner: Object.new)\n\naccount.try(:owner).try(:address)\n# =&gt; nil\n\naccount&amp;.owner&amp;.address\n# =&gt; NoMethodError: undefined method `address' for #&lt;Object:0x00559996b5bde8&gt;`\n\naccount.try!(:owner).try!(:address)\n# =&gt; NoMethodError: undefined method `address' for #&lt;Object:0x00559996b5bde8&gt;`\n</code></pre>\n<p>As we can see, <code>try</code> doesn't check if the receiver responds to the given method or not. Whereas <code>try!</code> and <code>&amp;.</code> behaves the same. If the receiver responds to the <code>address</code> method, all of them will return the same result. I prefer using <code>&amp;.</code> as it looks more cleaner.</p>\n<p>For more information on The Safe Navigation Operator (&amp;.), I have found this blog really helpful <a href=\"https://mitrev.net/ruby/2015/11/13/the-operator-in-ruby/\" rel=\"nofollow noreferrer\">https://mitrev.net/ruby/2015/11/13/the-operator-in-ruby/</a></p>\n"}], "owner": {"reputation": 1800, "user_id": 292015, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/f4yNx.jpg?s=128&g=1", "display_name": "Adrien", "link": "https://stackoverflow.com/users/292015/adrien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19787, "favorite_count": 8, "accepted_answer_id": 45825498, "answer_count": 4, "score": 41, "last_activity_date": 1615832394, "creation_date": 1503429484, "last_edit_date": 1503476335, "question_id": 45825363, "link": "https://stackoverflow.com/questions/45825363/what-is-the-difference-between-try-and-safe-navigation-operator-in-ruby", "title": "What is the difference between `try` and `&amp;.` (safe navigation operator) in Ruby", "body": "<p>Here is my code:</p>\n\n<pre><code>class Order &lt; Grape::Entity\n  expose :id { |order, options| order.id.obfuscate }\n  expose :time_left_to_review do |order, options|\n    byebug\n    order&amp;.time_left_to_review # ERROR\n  end\n  expose :created_at { |order, options| order.last_transition.created_at }\nend\n\n# NoMethodError Exception: undefined method `time_left_to_review' for #&lt;Order:0x007f83b9efc970&gt;\n</code></pre>\n\n<p>I thought <code>&amp;.</code> is a shortcut for <code>.try</code> but I guess I was wrong. May someone point me to the right direction regarding what I am missing?</p>\n\n<p>I feel like it's not ruby related. Grape maybe? Though I don't get how it could be.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1503426318, "post_id": 45824426, "comment_id": 78607304, "body": "With your assignment of <code>cookies[:email]</code>, it will always be <code>present?</code>. Is that what you intend?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8444434"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1503426522, "post_id": 45824426, "comment_id": 78607396, "body": "Thanks for the reply @sawa. Yes I need the <code>cookies[:email]</code> to always be present. Otherwise the app will not update the <code>is_active</code> column upon sign-in or sign-up"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1503426552, "post_id": 45824426, "comment_id": 78607412, "body": "What is your condition <code>if cookies[&quot;email&quot;].present?</code> for?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8444434"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1503426704, "post_id": 45824426, "comment_id": 78607498, "body": "The purpose of the current_client method is to find the current_store that&#39;s trying to sign-in or sign-up and update the <code>is active</code> column under the stores table."}], "answers": [{"comments": [{"owner": {"reputation": 2043, "user_id": 157943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/745c55f201b982c31c610cabab10a6be?s=128&d=identicon&r=PG", "display_name": "gmcnaughton", "link": "https://stackoverflow.com/users/157943/gmcnaughton"}, "edited": false, "score": 0, "creation_date": 1503431807, "post_id": 45824877, "comment_id": 78610077, "body": "No prob, glad it helped!"}], "tags": [], "owner": {"reputation": 2043, "user_id": 157943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/745c55f201b982c31c610cabab10a6be?s=128&d=identicon&r=PG", "display_name": "gmcnaughton", "link": "https://stackoverflow.com/users/157943/gmcnaughton"}, "is_accepted": true, "score": 2, "last_activity_date": 1503427692, "creation_date": 1503427692, "answer_id": 45824877, "question_id": 45824426, "link": "https://stackoverflow.com/questions/45824426/update-boolean-attributes-to-true-or-false/45824877#45824877", "title": "Update boolean attributes to true or false", "body": "<p>There are a couple issues going on in the <code>active_subscription</code> method.</p>\n\n<h3>\"If\" test</h3>\n\n<p>The <code>if</code> check should compare the user's status to a constant:</p>\n\n<pre><code># always passes because it's only looking at the constant!\nif Braintree::Subscription::Status::Active\n\n# instead, compare the client's status to the constant\nif sub.status == Braintree::Subscription::Status::Active\n</code></pre>\n\n<h3>Save failures</h3>\n\n<p>The <code>update_attributes</code> call may be failing due to validation errors. It returns false if save fails, which you may not be noticing.  You can raise an error instead by using <code>update_attributes!</code>:</p>\n\n<pre><code>current_client.update_attributes!(is_active: true)\n</code></pre>\n\n<p>If this is the problem, you can bypass validation checks by using <a href=\"https://apidock.com/rails/ActiveRecord/Persistence/update_attribute\" rel=\"nofollow noreferrer\">#update_attribute</a>.</p>\n\n<h3>Other issues</h3>\n\n<ol>\n<li>Users' subscriptions could be in many states -- you may want to handle other values of <code>sub.status</code> and set <code>is_active</code> back to false if they're not active.</li>\n<li>The <code>current_client</code> method checks to see if an \"email\" cookie is present, but then uses the email from <code>params[:email]</code>, not <code>cookies[\"email\"]</code>. It should probably use <code>cookies</code> or <code>params</code>, not both!</li>\n</ol>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8444434"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1143, "favorite_count": 1, "accepted_answer_id": 45824877, "answer_count": 1, "score": 0, "last_activity_date": 1503427692, "creation_date": 1503425797, "last_edit_date": 1503427582, "question_id": 45824426, "link": "https://stackoverflow.com/questions/45824426/update-boolean-attributes-to-true-or-false", "title": "Update boolean attributes to true or false", "body": "<p>I'm using the devise gem for authentication, and upon sign-in or signup, a cookie is created with:</p>\n\n<pre><code>cookies[:email] = {\n  :value =&gt; params[:store][:email],\n  :domain =&gt; :all,\n  :expires =&gt; 1.hour.from_now\n}\n</code></pre>\n\n<p>The purpose of the cookie is to find the <code>current_client</code>:</p>\n\n<pre><code>def current_client\n  if cookies[\"email\"].present?\n   Store.find_by_email(params[:email])\n  end\nend\n</code></pre>\n\n<p>and then see if the store has an active or not braintree subscription,\nand change the <code>is_active</code> boolean which is under the stores table to <code>true</code> or <code>false</code>. </p>\n\n<pre><code>after_action :active_subscription\ndef active_subscription\n  if current_client.present?\n    customer_id = current_client.braintree_customer_id\n    customer = Braintree::Customer.find(customer_id )\n    customer_card = customer.payment_methods[0].token\n    payment_method = Braintree::PaymentMethod.find(customer_card)\n    sub = payment_method.subscriptions[0]\n    sub.status\n\n  if Braintree::Subscription::Status::Active\n     current_client.update_attributes(is_active: true)\n  end\nend\n</code></pre>\n\n<p>But the <code>active_subscription</code> method above does not update the <code>is_active</code> column. Any ideas on what I might be dong here wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "excel", "csv"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 6941185, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10205239279341791/picture?type=large", "display_name": "amreos", "link": "https://stackoverflow.com/users/6941185/amreos"}, "edited": false, "score": 0, "creation_date": 1503431452, "post_id": 45825665, "comment_id": 78609901, "body": "Thank you for your response  i did that however i got this error NoMethodError in MachinesController#import undefined method `import&#39; for #&lt;Class:0x007fcb7c171638&gt;"}, {"owner": {"reputation": 93, "user_id": 4062739, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MoQy2sOGTWc/AAAAAAAAAAI/AAAAAAAAA20/pumIRsaEXCk/photo.jpg?sz=128", "display_name": "harika", "link": "https://stackoverflow.com/users/4062739/harika"}, "reply_to_user": {"reputation": 81, "user_id": 6941185, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10205239279341791/picture?type=large", "display_name": "amreos", "link": "https://stackoverflow.com/users/6941185/amreos"}, "edited": false, "score": 0, "creation_date": 1503437590, "post_id": 45825665, "comment_id": 78612710, "body": "In your controller, change the line count = Machine.import params[:file] to count = Machine.import(params[:file])"}, {"owner": {"reputation": 93, "user_id": 4062739, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MoQy2sOGTWc/AAAAAAAAAAI/AAAAAAAAA20/pumIRsaEXCk/photo.jpg?sz=128", "display_name": "harika", "link": "https://stackoverflow.com/users/4062739/harika"}, "reply_to_user": {"reputation": 81, "user_id": 6941185, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10205239279341791/picture?type=large", "display_name": "amreos", "link": "https://stackoverflow.com/users/6941185/amreos"}, "edited": false, "score": 0, "creation_date": 1503437731, "post_id": 45825665, "comment_id": 78612763, "body": "I have edited my answer as you have defined name as unique in your migration. Please check"}, {"owner": {"reputation": 81, "user_id": 6941185, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10205239279341791/picture?type=large", "display_name": "amreos", "link": "https://stackoverflow.com/users/6941185/amreos"}, "edited": false, "score": 0, "creation_date": 1503438837, "post_id": 45825665, "comment_id": 78613178, "body": "Thank you , you had saved me."}], "tags": [], "owner": {"reputation": 93, "user_id": 4062739, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MoQy2sOGTWc/AAAAAAAAAAI/AAAAAAAAA20/pumIRsaEXCk/photo.jpg?sz=128", "display_name": "harika", "link": "https://stackoverflow.com/users/4062739/harika"}, "is_accepted": true, "score": 1, "last_activity_date": 1503437788, "last_edit_date": 1503437788, "creation_date": 1503430557, "answer_id": 45825665, "question_id": 45824333, "link": "https://stackoverflow.com/questions/45824333/ruby-skip-existing-record-while-importing-csv/45825665#45825665", "title": "Ruby skip existing record while importing csv", "body": "<p>Unique Identifier:\n To avoid duplicate records saving to database you should maintain a unique identifier other than primary key. This helps you to identify if the record already available in DB, if it is available you can skip that record from saving again.</p>\n\n<p>I guess you can use name in this case, which should be unique for each record in database. write a uniqueness validation in model to implement this.</p>\n\n<p>After changes:</p>\n\n<pre><code> validates_uniqueness_of  :name\n\n def self.assign_row(row)\n   a, b, c, d = row\n   @c = c.slice(1,4)\n   machine = Machine.find_by(name: c)\n   Machine.create(name: c, mid: @c) if machine.blank?\n end\n</code></pre>\n\n<p>Hope it helps!!\nThank you.</p>\n"}], "owner": {"reputation": 81, "user_id": 6941185, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10205239279341791/picture?type=large", "display_name": "amreos", "link": "https://stackoverflow.com/users/6941185/amreos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 0, "accepted_answer_id": 45825665, "answer_count": 1, "score": 0, "last_activity_date": 1503437788, "creation_date": 1503425402, "last_edit_date": 1503434179, "question_id": 45824333, "link": "https://stackoverflow.com/questions/45824333/ruby-skip-existing-record-while-importing-csv", "title": "Ruby skip existing record while importing csv", "body": "<p>My problem is that i have to export an excel sheet save some rows to the database without duplication or redundancy\nso i started it with importing CSV instead of XLS then when i finish i might be able to parse the xls\nthis is my model code:   </p>\n\n<pre><code>require 'csv'\nclass Machine &lt; ActiveRecord::Base\n  def self.assign_row(row)\n  a, b, c, d = row\n  @c = c.slice(1,4)\n Machine.create(name: c, mid: @c)\n   end\n def self.import(file)\n CSV.foreach(file.path) do |row|\n  machine = Machine.assign_row(row)\n    end\n  end\n end     \n</code></pre>\n\n<p>Import method in machines_controller</p>\n\n<pre><code> def import\n count = Machine.import params[:file]\n redirect_to machines_path, notice: \"file imported successfully!\"\n  end     \n</code></pre>\n\n<p>Migration code     </p>\n\n<pre><code> def change\n create_table :machines do |t|\n t.string :name\n t.string :mid\n t.timestamps null: false\n end\n  add_index :machines, :name, :unique =&gt; true\n end     \n</code></pre>\n\n<p>and the view code     </p>\n\n<pre><code> &lt;%= form_tag import_machines_path, multipart: true do %&gt;\n &lt;%= file_field_tag :file %&gt;\n &lt;%= submit_tag \"upload\" %&gt;\n &lt;% end %&gt;    \n</code></pre>\n\n<p>routes</p>\n\n<pre><code>  Rails.application.routes.draw do\n resources :errors\n resources :machines do\n  collection do\n     post :import\n    end\n   end\n  root \"machines#index\n   end         \n</code></pre>\n\n<p>any thoughts on how to skip duplicated records from saving into database would be appreciated\nthanks</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "rvm"], "owner": {"reputation": 11, "user_id": 8268863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d61f52ca4e1ebdc590df6255015f13d0?s=128&d=identicon&r=PG&f=1", "display_name": "hiero", "link": "https://stackoverflow.com/users/8268863/hiero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1503424983, "creation_date": 1503424983, "question_id": 45824222, "link": "https://stackoverflow.com/questions/45824222/trying-to-rvm-install-ruby-2-4-1-for-mac-el-capitan-10-11-6-and-getting", "title": "Trying to RVM install Ruby 2.4.1 for Mac El Capitan 10.11.6 and getting", "body": "<p>I've looked around to a few different similar problems, and ended up imploding RVM and starting from scratch a few times, and am still getting the same error. rvm version is 1.29.2</p>\n\n<pre><code>Error running '__rvm_make -j 1',\nshowing last 15 lines of /Users/bsturms/.rvm/log/1503424267_ruby-2.4.1/make.log\ncompiling ./missing/setproctitle.c\ncompiling dmyenc.c\nlinking miniruby\nconfig.status: creating ruby-runner.h\ngenerating encdb.h\ndyld: lazy symbol binding failed: Symbol not found: _clock_gettime\n  Referenced from: /Users/bsturms/.rvm/src/ruby-2.4.1/./miniruby (which was built for Mac OS X 10.12)\n  Expected in: /usr/lib/libSystem.B.dylib\n\ndyld: Symbol not found: _clock_gettime\n  Referenced from: /Users/bsturms/.rvm/src/ruby-2.4.1/./miniruby (which was built for Mac OS X 10.12)\n  Expected in: /usr/lib/libSystem.B.dylib\n\nmake: *** [encdb.h] Trace/BPT trap: 5\n++ return 2\nThere has been an error while running make. Halting the installation. \n</code></pre>\n"}, {"tags": ["ruby", "amazon-web-services", "aws-sdk", "amazon-cloudwatch"], "comments": [{"owner": {"reputation": 67949, "user_id": 297696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/782a7a5f79b342bb12dc0aaae3a0c34d?s=128&d=identicon&r=PG", "display_name": "wkl", "link": "https://stackoverflow.com/users/297696/wkl"}, "edited": false, "score": 0, "creation_date": 1503424405, "post_id": 45824009, "comment_id": 78606269, "body": "Looks like you&#39;re trying to do this in Ruby?"}, {"owner": {"reputation": 8058, "user_id": 594763, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/e95f906d1c0b54495bb4685b24569ec3?s=128&d=identicon&r=PG", "display_name": "patrick", "link": "https://stackoverflow.com/users/594763/patrick"}, "reply_to_user": {"reputation": 67949, "user_id": 297696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/782a7a5f79b342bb12dc0aaae3a0c34d?s=128&d=identicon&r=PG", "display_name": "wkl", "link": "https://stackoverflow.com/users/297696/wkl"}, "edited": false, "score": 0, "creation_date": 1503426414, "post_id": 45824009, "comment_id": 78607349, "body": "@birryree yep, ruby."}], "answers": [{"tags": [], "owner": {"reputation": 6375, "user_id": 1803990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vv8R4.jpg?s=128&g=1", "display_name": "Dejan Peretin", "link": "https://stackoverflow.com/users/1803990/dejan-peretin"}, "is_accepted": true, "score": 0, "last_activity_date": 1503473662, "creation_date": 1503473662, "answer_id": 45833404, "question_id": 45824009, "link": "https://stackoverflow.com/questions/45824009/confused-about-how-to-do-a-bulk-get-of-metrics-from-the-cloudwatch-api/45833404#45833404", "title": "Confused about how to do a bulk get of metrics from the cloudwatch api", "body": "<p>In short, you can't get data for multiple metrics in a single request to GetMetricStatistics API. Your approach of listing the metrics first is correct. </p>\n\n<p>You can use ListMetrics API and set only the namespace and the metric name (remove the dimension where you're setting the exact instance). That should give you metrics for all instances that ran in the last 2 weeks. Then you need to loop over them and call GetMetricStatistics for each.  </p>\n\n<p>The dashboards API you tried to use is intended for manipulating dashboards (create, delete, edit dashboards and stuff on the dashboards). Those APIs won't give you any data. However, when dashboards APIs were release, they also published a blog post on how to use them. In that post they use an example of how to use the APIs to create a dashboard with metrics from all running EC2 instances. Maybe that would be useful to you:</p>\n\n<p><a href=\"https://aws.amazon.com/blogs/aws/new-api-cloudformation-support-for-amazon-cloudwatch-dashboards/\" rel=\"nofollow noreferrer\">https://aws.amazon.com/blogs/aws/new-api-cloudformation-support-for-amazon-cloudwatch-dashboards/</a></p>\n"}], "owner": {"reputation": 8058, "user_id": 594763, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/e95f906d1c0b54495bb4685b24569ec3?s=128&d=identicon&r=PG", "display_name": "patrick", "link": "https://stackoverflow.com/users/594763/patrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 419, "favorite_count": 0, "accepted_answer_id": 45833404, "answer_count": 1, "score": 0, "last_activity_date": 1503473662, "creation_date": 1503424199, "last_edit_date": 1503427227, "question_id": 45824009, "link": "https://stackoverflow.com/questions/45824009/confused-about-how-to-do-a-bulk-get-of-metrics-from-the-cloudwatch-api", "title": "Confused about how to do a bulk get of metrics from the cloudwatch api", "body": "<p>I need to do some monitoring for my various amazon ec2 instances, so my plan was originally to create a dashboard with a number widget, and choose the various things I am interested in such as \"CPUUtilization\", and then I can fetch that dashboard and have access to all those current metric values.  However, when I make the call to get that dashboard, the body I receive is:</p>\n\n<pre><code>{\"widgets\"=&gt;[{\"type\"=&gt;\"metric\", \"x\"=&gt;0, \"y\"=&gt;0, \"width\"=&gt;24, \"height\"=&gt;6, \"properties\"=&gt;{\"view\"=&gt;\"singleValue\", \"metrics\"=&gt;[[\"AWS/EC2\", \"CPUUtilization\", \"InstanceId\", \"i-0ea0081d91f6e4aff\"], [\".\", \"DiskWriteBytes\", \".\", \".\"], [\".\", \"CPUCreditUsage\", \".\", \".\"], [\".\", \"StatusCheckFailed\", \".\", \".\"], [\".\", \"NetworkPacketsIn\", \".\", \".\"], [\".\", \"NetworkOut\", \".\", \".\"], [\".\", \"StatusCheckFailed_System\", \".\", \".\"], [\".\", \"CPUCreditBalance\", \".\", \".\"], [\".\", \"StatusCheckFailed_Instance\", \".\", \".\"], [\".\", \"NetworkIn\", \".\", \".\"], [\".\", \"NetworkPacketsOut\", \".\", \".\"], [\".\", \"DiskReadBytes\", \".\", \".\"], [\".\", \"DiskWriteOps\", \".\", \".\"], [\".\", \"DiskReadOps\", \".\", \".\"]], \"region\"=&gt;\"us-east-1\"}}]}\n</code></pre>\n\n<p>It does not contain any metric data, only the names of the metrics..  So this is not helpful.</p>\n\n<p>The list_metrics method looks promising, except for two things...</p>\n\n<p>1)  It wants a single metric?  Even though the docs describe the method \"List the specified metrics.\"</p>\n\n<p>The input is an object, not an array, and to use this method, I have to do:</p>\n\n<pre><code>client.list_metrics({\n  namespace: \"AWS/EC2\",\n  metric_name: \"CPUUtilization\",\n  dimensions: [\n    {\n      name: \"InstanceId\", \n      value: \"i-0fc0181c98e6e4a66\"\n    },\n  ],\n})\n</code></pre>\n\n<p>Which gives me this object back:</p>\n\n<pre><code>#&lt;struct Aws::CloudWatch::Types::ListMetricsOutput metrics=[#&lt;struct Aws::CloudWatch::Types::Metric namespace=\"AWS/EC2\", metric_name=\"CPUUtilization\", dimensions=[#&lt;struct Aws::CloudWatch::Types::Dimension name=\"InstanceId\", value=\"i-0fc0181c98e6e4a66\"&gt;]&gt;], next_token=nil&gt;\n</code></pre>\n\n<p>Which leads to 2) it returns just the metric name, no actual values...</p>\n\n<p>What am I doing wrong?</p>\n\n<p>How can I simply ask for a whole bunch of metrics for various instance ids, and get a response back that contains the actual metric values for the metrics I requested?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "url", "scope", "routes"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1503421791, "post_id": 45823392, "comment_id": 78604890, "body": "You should check <a href=\"http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing\" rel=\"nofollow noreferrer\"><i>controller-namespaces and routing</i></a>"}], "answers": [{"tags": [], "owner": {"reputation": 27630, "user_id": 1550807, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JgCw5.png?s=128&g=1", "display_name": "Danil Speransky", "link": "https://stackoverflow.com/users/1550807/danil-speransky"}, "is_accepted": true, "score": 2, "last_activity_date": 1503422136, "creation_date": 1503422136, "answer_id": 45823504, "question_id": 45823392, "link": "https://stackoverflow.com/questions/45823392/what-does-scope-mean-in-routes-rb-in-ruby-on-rails/45823504#45823504", "title": "What does scope mean in routes.rb in Ruby on Rails?", "body": "<p>You use it when you want to add a prefix for urls:</p>\n\n<pre><code># adds '/dashboard\nget 'dashboard', to: 'administration#dashboard'\n\n# adds /admin/dashboard pointing to the same action\nscope '/admin' do\n  get 'dashboard', to: 'administration#dashboard'\nend\n</code></pre>\n\n<p>It has more options. See <a href=\"http://guides.rubyonrails.org/routing.html\" rel=\"nofollow noreferrer\">Rails Routing from the Outside In</a></p>\n"}], "owner": {"reputation": 131, "user_id": 8428131, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e0ffcd6b58bc7c4df2b179d0f60d250b?s=128&d=identicon&r=PG&f=1", "display_name": "WebGuru", "link": "https://stackoverflow.com/users/8428131/webguru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1142, "favorite_count": 0, "accepted_answer_id": 45823504, "answer_count": 1, "score": 0, "last_activity_date": 1503435826, "creation_date": 1503421659, "last_edit_date": 1503435826, "question_id": 45823392, "link": "https://stackoverflow.com/questions/45823392/what-does-scope-mean-in-routes-rb-in-ruby-on-rails", "title": "What does scope mean in routes.rb in Ruby on Rails?", "body": "<p>In the code below <code>scope</code> is used (in <code>routes.rb</code>):</p>\n\n<pre><code>scope 'admin' do\n  get 'dashboard', to: 'administration#dashboard'\n  resources 'employees'\nend\n</code></pre>\n\n<p>When and why <code>scope</code> is used?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "elasticsearch", "searchkick"], "answers": [{"tags": [], "owner": {"reputation": 443, "user_id": 5050746, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9K5DW_5jMYk/AAAAAAAAAAI/AAAAAAAAAYs/7Yl-hTstWk0/photo.jpg?sz=128", "display_name": "Peter P", "link": "https://stackoverflow.com/users/5050746/peter-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1516118579, "creation_date": 1516118579, "answer_id": 48285331, "question_id": 45823369, "link": "https://stackoverflow.com/questions/45823369/searchkick-search-data-working-in-test-but-not-in-browser/48285331#48285331", "title": "Searchkick search data working in test but not in browser", "body": "<p>You need to call <code>Account.reindex</code> once in a while to index/reindex new items. Or you could also add  <code>Account.reindex</code> to the according Model within an after_commit callback. This way your new data will be indexed after each insert/commit. </p>\n"}], "owner": {"reputation": 123, "user_id": 7010424, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/cM4lc.jpg?s=128&g=1", "display_name": "Jay Quigley", "link": "https://stackoverflow.com/users/7010424/jay-quigley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 380, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1516118579, "creation_date": 1503421546, "question_id": 45823369, "link": "https://stackoverflow.com/questions/45823369/searchkick-search-data-working-in-test-but-not-in-browser", "title": "Searchkick search data working in test but not in browser", "body": "<p>I am experiencing some weird behavior with the Elasticsearch wrapper Ruby gem <a href=\"https://github.com/ankane/searchkick\" rel=\"nofollow noreferrer\">Searchkick</a>, and I'd love your help!</p>\n\n<h2>The Issue</h2>\n\n<p>The expected behavior is that I should be able to search for a full name with a space in it. This works in my test, but not in browser.</p>\n\n<h2>The Code</h2>\n\n<h3>account.rb</h3>\n\n<pre><code>class Account\n  searchkick word_start: [\n    :first_name,\n    :last_name,\n    :name, # &lt;======================== key line\n    :email,\n    :phone,\n    :company,\n  ], callbacks: :async\n\n  def self.index_search(query:)\n    search(\n      query || '*',\n      fields: [\n        :first_name,\n        :last_name,\n        :name, # &lt;======================== key line\n        :email,\n        :phone,\n        :company,\n      ],\n      match: :word_start,\n      where: { test_account: false },\n      order: { created_at: :desc },\n      limit: 20,\n      misspellings: false,\n    )\n  end\n\n  def search_data\n    {\n      first_name: first_name,\n      last_name: last_name,\n      name: \"#{first_name} #{last_name}\", # &lt;======================== key line\n      created_at: created_at,\n      email: email,\n      phone: phone,\n      test_account: test_account,\n      company: company\n    }\n  end\nend\n</code></pre>\n\n<h3>account_test.rb - ALL OF THESE PASS</h3>\n\n<pre><code>class AccountTest &lt; ActiveSupport::TestCase\n  describe \"::index_search\" do\n    let(:account_0) do\n      FactoryGirl.create(:account, company: \"Xyz Consulting\")  # name: \"Testy McTesterson\"\n    end\n    let(:account_1) do\n      FactoryGirl.create(:account, first_name: \"Bob\") # name: \"Bob McTesterson\"\n    end\n    let(:search) do\n      Account.index_search(query: query)\n    end\n\n    before :all do\n      account_0 and account_1 # instantiate\n      Searchkick.disable_callbacks\n      Account.reindex\n    end\n\n    describe \"when there are spaces in the string\" do\n      let(:query) { \"xyz con\" }\n\n      it \"finds all and only the appropriate records\" do\n        assert_equal [account_0.id], search.map(&amp;:id)\n      end\n    end\n\n    describe \"when the query matches the full name\" do\n      let(:query) { \"bob mct\" }\n\n      it \"finds all and only the appropriate records\" do\n        assert_equal [account_1.id], search.map(&amp;:id)\n      end\n    end\n  end\nend\n</code></pre>\n\n<p><strong>Note:</strong> when I comment out the three 'key lines' from  <code>account.rb</code>, the second of those tests fails. So the <code>name:</code> in the <code>#search_data</code> method seems to be working.</p>\n\n<h3>search_controller.rb (essentially)</h3>\n\n<pre><code>class SearchController &lt; ApplicationController\n  def index\n    puts \"params[:query]: #{params[:query]}\"\n    puts \"custom_search.map(&amp;:first_name): #{custom_search.map(&amp;:first_name)}\"\n    puts \"custom_search.map(&amp;:last_name): #{custom_search.map(&amp;:last_name)}\"\n  end\n\n  private\n\n  def custom_search\n   Account.index_search(query: params[:query])\n  end\nend\n</code></pre>\n\n<h2>The Complication</h2>\n\n<p>Nonetheless, in the browser, it doesn't seem to be working. With the above code, searching via the browser, I can't reproduce the success.</p>\n\n<p>When I search for <code>\"bob \"</code>, the output in my server console is</p>\n\n<pre><code>params[:query]: bob\ncustom_search.map(&amp;:first_name): [\"Bob\"]\ncustom_search.map(&amp;:last_name): [\"McTesterdorff\"]\n</code></pre>\n\n<p>but as soon as I search for <code>\"bob m\"</code>, <code>\"bob mct\"</code>, or <code>\"bob mctesterdorff\"</code>, I get empty results (respecitvely):</p>\n\n<pre><code>params[:query]: bob m\ncustom_search.map(&amp;:first_name): []\ncustom_search.map(&amp;:last_name): []\n\nparams[:query]: bob mct\ncustom_search.map(&amp;:first_name): []\ncustom_search.map(&amp;:last_name): []\n\nparams[:query]: bob mctesterdorff\ncustom_search.map(&amp;:first_name): []\ncustom_search.map(&amp;:last_name): []\n</code></pre>\n\n<p>Do you all have any idea what the issue might be?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "metaprogramming", "accessor"], "answers": [{"comments": [{"owner": {"reputation": 287, "user_id": 2459156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/dH8vl.png?s=128&g=1", "display_name": "Berlin_J", "link": "https://stackoverflow.com/users/2459156/berlin-j"}, "edited": false, "score": 0, "creation_date": 1503423575, "post_id": 45823736, "comment_id": 78605803, "body": "Isn&#39;t it a problem, that i have to define the accessors during or before initialization, since i already need those during initialization, i.e. Child.new(color:...)? But anyways, i will give it a try!"}], "tags": [], "owner": {"reputation": 1255, "user_id": 3211286, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3c5ff0d326e3c8f359df2fbc156f517a?s=128&d=identicon&r=PG", "display_name": "metahamza", "link": "https://stackoverflow.com/users/3211286/metahamza"}, "is_accepted": false, "score": 1, "last_activity_date": 1503423103, "creation_date": 1503423103, "answer_id": 45823736, "question_id": 45823311, "link": "https://stackoverflow.com/questions/45823311/dynamic-attributes-in-rails-activerecord-store/45823736#45823736", "title": "dynamic attributes in Rails ActiveRecord store", "body": "<p>If I understand correctly, essentially you need to perform a database lookup for the parent <code>content_attributes</code> upon instantiation of your child object, and then assign the accessors dynamically based on that data.</p>\n\n<p>Something along these lines could work - <a href=\"https://stackoverflow.com/questions/4964179/how-do-i-set-an-attr-accessor-for-a-dynamic-instance-variable\">How do I set an attr_accessor for a dynamic instance variable?</a></p>\n\n<p>You could try an <code>after_initialize</code> callback that does the lookup and then calls <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Store.html\" rel=\"nofollow noreferrer\"><code>store_accessor</code></a> on the singleton class.</p>\n"}, {"tags": [], "owner": {"reputation": 287, "user_id": 2459156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/dH8vl.png?s=128&g=1", "display_name": "Berlin_J", "link": "https://stackoverflow.com/users/2459156/berlin-j"}, "is_accepted": true, "score": 4, "last_activity_date": 1504795168, "creation_date": 1504795168, "answer_id": 46099172, "question_id": 45823311, "link": "https://stackoverflow.com/questions/45823311/dynamic-attributes-in-rails-activerecord-store/46099172#46099172", "title": "dynamic attributes in Rails ActiveRecord store", "body": "<p>Here is my solution:</p>\n\n<pre><code>  store :content_store, coder: JSON\n\n  after_initialize :add_accessors_for_content_attributes\n\n  def add_accessors_for_content_attributes\n    content_attributes.each do |attr_name|\n      singleton_class.class_eval do\n        store_accessor :content_store, attr_name\n      end\n    end\n  end\n\n  def content_attributes\n    parent.content_attributes.map(&amp;:name)\n  end\n</code></pre>\n"}], "owner": {"reputation": 287, "user_id": 2459156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/dH8vl.png?s=128&g=1", "display_name": "Berlin_J", "link": "https://stackoverflow.com/users/2459156/berlin-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 889, "favorite_count": 0, "accepted_answer_id": 46099172, "answer_count": 2, "score": 1, "last_activity_date": 1504795168, "creation_date": 1503421322, "question_id": 45823311, "link": "https://stackoverflow.com/questions/45823311/dynamic-attributes-in-rails-activerecord-store", "title": "dynamic attributes in Rails ActiveRecord store", "body": "<p>I have a child model, which should be able to store different attributes via the ActiveRecord::Store feature. Those attributes should be determined by the parent model. For this purpose, the parent model has a column <code>content_attributes</code> which stores the children's attributes as array of strings (i.e. <code>['color', 'size', 'age']</code>).</p>\n\n<p>To have accessors in the child instances for all attributes defined by the parent, i currently use a workaround which maps all attribute names of all available parents:</p>\n\n<pre><code>class child\n  belongs_to :parent\n\n  store :content, accessors: Parent.all_content_attributes, coder: JSON\n  ...\nend\n</code></pre>\n\n<p>Actually, i only want to set accessor's for all attributes of the distinct parent. However, in the example above, the child instance would get a long list of dispensable attribute names.  How to replace the <code>Parent.all_content_attributes</code>? Guess i need some kind of metaprogramming here?!</p>\n"}, {"tags": ["ruby", "inheritance", "instance-variables"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1503423000, "post_id": 45822786, "comment_id": 78605517, "body": "The real issue is not that instance variables are different from class instance variables. Even if you initialize a class variable or a constant in the class body, using that (pushing elements into it) in instance methods means that you are modifying a shared array from different objects. That does not seem to make sense."}, {"owner": {"reputation": 195, "user_id": 8027549, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/OCqos.jpg?s=128&g=1", "display_name": "PawkyPenguin", "link": "https://stackoverflow.com/users/8027549/pawkypenguin"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1503626428, "post_id": 45822786, "comment_id": 78705475, "body": "@sawa May I ask what the comment is referring to? I know that initializing a class variable in the class body gives me a different behaviour, that&#39;s what I meant with &quot;as other OO-languages can&quot;. I was mostly looking for a elegant solution in Ruby, that allows me to essentially get the behaviour of member variables in Java, without having to worry about rewriting code later."}, {"owner": {"reputation": 195, "user_id": 8027549, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/OCqos.jpg?s=128&g=1", "display_name": "PawkyPenguin", "link": "https://stackoverflow.com/users/8027549/pawkypenguin"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1503627316, "post_id": 45822786, "comment_id": 78705671, "body": "@sawa Btw, I took the freedom to re-add some phrases of the edit you made. I agree that my question was longer than necessary, but I feel like some clarity of the motivation behind the question got lost. (Also, it probably sounded like I was firing shots at Ruby. I actually meant to fire shots at my code. Whoops)."}], "answers": [{"tags": [], "owner": {"reputation": 66, "user_id": 7157578, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-r6LJMZA5HDU/AAAAAAAAAAI/AAAAAAAAAqs/RWnhOl6284c/photo.jpg?sz=128", "display_name": "Ryan Flach", "link": "https://stackoverflow.com/users/7157578/ryan-flach"}, "is_accepted": false, "score": 2, "last_activity_date": 1503421179, "last_edit_date": 1503421179, "creation_date": 1503420635, "answer_id": 45823163, "question_id": 45822786, "link": "https://stackoverflow.com/questions/45822786/specify-default-values-for-instance-variables-outside-constructor/45823163#45823163", "title": "Specify default values for instance variables outside constructor", "body": "<p>In your final example:</p>\n\n<pre><code>class Sheep &lt; Animal\n  attr_accessor :likes\n\n  def likes\n    @likes || @likes = []\n  end\nend\n</code></pre>\n\n<p>you're essentially using memoization, although your syntax is a little different from the norm, which would look like:</p>\n\n<pre><code>def likes\n  @likes ||= []\nend\n</code></pre>\n\n<p>Additionally, because you have <code>likes</code> now as a memoized method, and not an attribute of the instance, you do not need <code>attr_accessor</code> (or <code>attr_reader</code>, etc.).</p>\n\n<pre><code>class Sheep &lt; Animal\n  def likes\n    @likes ||= []\n  end\nend\n</code></pre>\n\n<p>And you're good to go.</p>\n\n<p>Edit: Per your concern of performance:</p>\n\n<pre><code>[1] pry(main)&gt; require 'benchmark'\n=&gt; true\n[2] pry(main)&gt; @hello = []\n=&gt; []\n[3] pry(main)&gt; def hello\n[3] pry(main)*   @hello\n[3] pry(main)* end\n=&gt; :hello\n[4] pry(main)&gt; def likes\n[4] pry(main)*   @likes ||= []\n[4] pry(main)* end\n=&gt; :likes\n[5] pry(main)&gt; puts Benchmark.measure { 1_000_000.times { hello } }\n  0.070000   0.000000   0.070000 (  0.071330)\n=&gt; nil\n[6] pry(main)&gt; puts Benchmark.measure { 1_000_000.times { likes } }\n  0.100000   0.000000   0.100000 (  0.097388)\n=&gt; nil \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 1, "last_activity_date": 1503420841, "creation_date": 1503420841, "answer_id": 45823207, "question_id": 45822786, "link": "https://stackoverflow.com/questions/45822786/specify-default-values-for-instance-variables-outside-constructor/45823207#45823207", "title": "Specify default values for instance variables outside constructor", "body": "<p>One thing you can do is call a method from the <code>initialize</code> of <code>Animal</code>, providing a hook for subclasses to add custom functionality:</p>\n\n<pre><code>class Animal\n  attr_reader :age\n  def initialize(age)\n    @age = age\n\n    setup_defaults\n  end\n\n  private\n  def setup_defaults\n    # NOOP by default\n  end\nend\n\nclass Sheep &lt; Animal\n  attr_accessor :likes\n\n  private\n  def setup_defaults\n    @likes = []\n  end\nend\n</code></pre>\n\n<p>A second way, that you mention in your post, you can do this is use a custom <code>def likes</code> instead of the <code>attr_reader</code>/<code>attr_accessor</code>:</p>\n\n<pre><code>def likes\n  @likes ||= [] # shorter way of doing what you have\nend\n</code></pre>\n\n<p>As a third option, if you don't mind using <code>initialize</code> (your primary concern seems to be possibly changing the superclass' signature), since you don't care about any the parameters to initialize<code>Sheep</code> is you can overwrite the <code>initialize</code> like:</p>\n\n<pre><code>class Sheep &lt; Animal\n  attr_accessor :likes\n  def initialize(*)\n    super\n    @likes = []\n  end\nend\n</code></pre>\n\n<p>this is the same as doing something like <code>def initialize(*args)</code> except you don't name the variable, and works since <code>super</code> passes in the original arguments by default. Now, if you go back and change animal to have, say, a <code>name</code> argument to its <code>initialize</code>:</p>\n\n<pre><code>class Animal\n  attr_reader :age, :name\n  def initialize(name, age)\n    @name = name\n    @age = age\n  end\nend\n</code></pre>\n\n<p><code>Sheep</code> still works without any changes.</p>\n"}, {"comments": [{"owner": {"reputation": 1217, "user_id": 5511520, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/baaabef4e4f62eee165869427acd0472?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Belyakov", "link": "https://stackoverflow.com/users/5511520/mike-belyakov"}, "edited": false, "score": 0, "creation_date": 1563712126, "post_id": 50257199, "comment_id": 100782429, "body": "Please, never use it in production. never."}], "tags": [], "owner": {"reputation": 3967, "user_id": 1751321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/62f4ca296fd86fffa81987e5ace94b86?s=128&d=identicon&r=PG", "display_name": "Daniel Garmoshka", "link": "https://stackoverflow.com/users/1751321/daniel-garmoshka"}, "is_accepted": false, "score": 0, "last_activity_date": 1563945271, "last_edit_date": 1563945271, "creation_date": 1525880309, "answer_id": 50257199, "question_id": 45822786, "link": "https://stackoverflow.com/questions/45822786/specify-default-values-for-instance-variables-outside-constructor/50257199#50257199", "title": "Specify default values for instance variables outside constructor", "body": "<p>With experimental patch you can do:</p>\n\n<pre><code>class Zaloop\n\n  attr_accessor var1: :default_value, var2: 2\n\n  def initialize\n    self.initialize_default_values\n  end\n\nend\n\nputs Zaloop.new.var1 # :default_value\n</code></pre>\n\n<ul>\n<li>Please be aware, patch below - is experimental solution, be careful if you decide to use it on production</li>\n</ul>\n\n<p>Patch for module:</p>\n\n<pre><code>Module.module_eval do\n\n  alias _original_attr_accessor attr_accessor\n  def attr_accessor(*args)\n    @default_values ||= {}\n    attr_names = []\n    args.map do |arg|\n      if arg.is_a? Hash\n        arg.each do |key, value|\n          define_default_initializer if @default_values.empty?\n          @default_values[key] = value\n          attr_names &lt;&lt; key\n        end\n      else\n        attr_names &lt;&lt; arg\n      end\n    end\n    _original_attr_accessor *attr_names\n  end\n\n  def define_default_initializer\n    default_values = @default_values\n    self.send :define_method, :initialize_default_values do\n      default_values.each do |key, value|\n        instance_variable_set(\"@#{key}\".to_sym, value)\n      end\n    end\n  end\n\nend\n</code></pre>\n"}], "owner": {"reputation": 195, "user_id": 8027549, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/OCqos.jpg?s=128&g=1", "display_name": "PawkyPenguin", "link": "https://stackoverflow.com/users/8027549/pawkypenguin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2865, "favorite_count": 0, "accepted_answer_id": 45823207, "answer_count": 3, "score": 1, "last_activity_date": 1563945271, "creation_date": 1503419198, "last_edit_date": 1503627366, "question_id": 45822786, "link": "https://stackoverflow.com/questions/45822786/specify-default-values-for-instance-variables-outside-constructor", "title": "Specify default values for instance variables outside constructor", "body": "<p>My goal is to initialize an instance variable without making use of the initialize method.\nI have this code:</p>\n\n<pre><code>class Animal\n  attr_reader :age\n  def initialize(age)\n    @age = age\n  end\nend\n\nclass Sheep &lt; Animal\n  attr_accessor :likes\n  def initialize(age)\n    super\n    @likes = []\n  end\nend\n\nsheep = Sheep.new(5)\nsheep.likes &lt;&lt; \"grass\"\n</code></pre>\n\n<p>The <code>initialize</code> method in this subclass calls <code>super</code>. This doesn't scale very nicely: If I change the signature of the superclass, I have to adjust it in all subclasses as well.</p>\n\n<p>It would be nicer if I can initialize an instance variable like <code>@likes = []</code> outside of the <code>initialize</code> method within the class scope of <code>Sheep</code>, like many other OO-languages can. However, that would make my variable an instance variable of the class object.</p>\n\n<p>Here's a way I discovered that doesn't override the constructor:</p>\n\n<pre><code>class Sheep &lt; Animal\n  attr_accessor :likes\n  def likes\n    @likes || @likes = []\n  end\nend\n</code></pre>\n\n<p>That's much more elegant because readjusting signatures is not necessary, but it's still not perfect: Wouldn't Ruby check for non-<code>nil</code>-ness of <code>likes</code> when I access that instance variable? Is there a way to do this without sacrificing runtime or code elegance?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "paperclip", "e-commerce"], "answers": [{"comments": [{"owner": {"reputation": 1717, "user_id": 1034924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecedc78563223e4f7742bbfc66992905?s=128&d=identicon&r=PG", "display_name": "nzajt", "link": "https://stackoverflow.com/users/1034924/nzajt"}, "edited": false, "score": 1, "creation_date": 1503420900, "post_id": 45823186, "comment_id": 78604461, "body": "in the loop it should be <code>image_tag img.image.url(:thumb)</code> not <code>image_tag item.product.img.image.url(:thumb)</code>"}, {"owner": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "edited": false, "score": 0, "creation_date": 1503421212, "post_id": 45823186, "comment_id": 78604617, "body": "thank you guys, this is working, but showing all images for the product as a :thumb,  what if I only want to show one image for the product in the cart? I tried to add <code>.first</code> to the line like : <code>&lt;td&gt;&lt;%= image_tag img.first.image.url(:thumb) %&gt;&lt;&#47;td&gt;</code> but that gave me the error: <code>undefined method &#39;first&#39; for #&lt;Image:0x007faa06be8ab8&gt;</code>"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "edited": false, "score": 0, "creation_date": 1503421394, "post_id": 45823186, "comment_id": 78604697, "body": "@codegirl If you want show only one image, then just do <code>&lt;%= image_tag item.product.images.first.image.url(:thumb) %&gt;</code> in your original code."}, {"owner": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "edited": false, "score": 0, "creation_date": 1503421595, "post_id": 45823186, "comment_id": 78604792, "body": "Of course @Pavan, thank you so much for your help, this is all working now"}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": true, "score": 3, "last_activity_date": 1503421262, "last_edit_date": 1503421262, "creation_date": 1503420732, "answer_id": 45823186, "question_id": 45822730, "link": "https://stackoverflow.com/questions/45822730/getting-undefined-method-url-for-string-using-paperclip-in-ruby-on-rails/45823186#45823186", "title": "getting &quot;undefined method `url&#39; for &quot;&quot;:String&quot; Using paperclip in Ruby on Rails", "body": "<p>You have <code>has_many :images</code> in <code>Product</code>. And <code>Image</code> model has attached file named <strong>image</strong>. So first you should fetch <strong>all images of a product</strong> with <code>product.images</code>, loop through each image and map the image url like below</p>\n\n<pre><code>#fetch all images of a product\n&lt;% item.product.images.each do |img| %&gt;\n  #map the url of each img\n  &lt;td&gt;&lt;%= image_tag img.image.url(:thumb) %&gt;&lt;/td&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>where <code>img</code> is an instance of <code>Image</code> and <code>image</code> is <strong>attached file name</strong>.</p>\n\n<p>Having the <strong>file name(image)</strong> same as <strong>model name(image)</strong> will confuse things(as it did now). To keep things simple in the future, try a different name. For example, say <strong>avatar</strong>, then the above code would look like below</p>\n\n<pre><code>#fetch all images of a product\n&lt;% item.product.images.each do |img| %&gt;\n  #map the url of each img\n  &lt;td&gt;&lt;%= image_tag img.avatar.url(:thumb) %&gt;&lt;/td&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1394, "favorite_count": 0, "accepted_answer_id": 45823186, "answer_count": 1, "score": 4, "last_activity_date": 1503421262, "creation_date": 1503418996, "question_id": 45822730, "link": "https://stackoverflow.com/questions/45822730/getting-undefined-method-url-for-string-using-paperclip-in-ruby-on-rails", "title": "getting &quot;undefined method `url&#39; for &quot;&quot;:String&quot; Using paperclip in Ruby on Rails", "body": "<p>I'm getting this error on the<code>app/views/cart/_cart.html.erb</code>page of an E-commerce app I'm building <code>undefined method 'url' for \"\":String\nDid you mean?  URI</code></p>\n\n<p>If I exclude the line <code>&lt;td&gt;&lt;%= image_tag item.product.image.url(:thumb) %&gt;&lt;/td&gt;</code> from the code I don\u00b4t get the messages and can see what is in the cart, but no small picture of the product in the cart.</p>\n\n<p>It would be so nice if someone could help me out here since I'm a ROR newbie and can't figure it out on my own. </p>\n\n<p>here is the <code>_cart.html.erb</code> view were the error is appearing</p>\n\n<pre><code>&lt;% @cart.product_items.each do |item| %&gt;\n\n&lt;table class=\"table\"&gt;\n    &lt;tr&gt;\n        &lt;th&gt;Quantity&lt;/th&gt;\n        &lt;th&gt;Name&lt;/th&gt;\n        &lt;th&gt;Price &amp;euro;&lt;/th&gt;\n        &lt;th&gt;Image&lt;/th&gt;\n\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;&lt;%= item.quantity %&gt;&amp;times; &lt;/td&gt;\n        &lt;td&gt;&lt;%= item.product.title %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= number_to_currency(item.total_price_usd, :unit =&gt; '\u20ac ', :precision =&gt; 0)%&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= image_tag item.product.image.url(:thumb) %&gt;&lt;/td&gt;\n\n    &lt;/tr&gt;\n\n&lt;/table&gt;\n</code></pre>\n\n\n\n<p>The app has model for Images, and it looks like this:</p>\n\n<pre><code>class Image &lt; ActiveRecord::Base\n\n  belongs_to :product\n  has_many :product_items, :dependent =&gt; :destroy\n\n    has_attached_file :image, styles: { medium: \"500x500#\", thumb: \"100x100#\" }\n    validates_attachment_content_type :image, content_type: /\\Aimage\\/.*\\z/\n\nend\n</code></pre>\n\n<p>And the <code>product.rb</code> model is like this</p>\n\n<pre><code>class Product &lt; ActiveRecord::Base\n  acts_as_list :scope =&gt; [:category, :label]\n  belongs_to :category\n  belongs_to :label\n\n  has_many :images\n  accepts_nested_attributes_for :images\n  has_many :product_items, :dependent =&gt; :destroy\n\n   extend FriendlyId\n   friendly_id :title, use: [:slugged, :finders]\n\n  #before_destroy :ensure_not_product_item\n\n    validates :title, :description, presence: true\n    validates :price_usd, numericality: {greater_than_or_equal_to: 0.01}\n    validates :title, uniqueness: true\n\nend\n</code></pre>\n\n<p>the <code>product_item.rb</code>model is like this:</p>\n\n<pre><code>class ProductItem &lt; ActiveRecord::Base\n  belongs_to :product \n  belongs_to :cart\n  belongs_to :order\n\n  belongs_to :image\n\n  def total_price_usd\n    product.price_usd * quantity\n  end\n\nend\n</code></pre>\n\n<p>I can see the product images in the <code>views/products/show</code> but when I have added a product to the cart and want to take a look at the items in the cart the app breaks with the error messages: <code>undefined method 'url' for \"\":String\nDid you mean?  URI</code></p>\n\n<p>here is the <code>views/products/show.html.erb</code></p>\n\n<pre><code>    &lt;div class=\"col-xs-12 col-sm-6 center-block\" &gt;\n      &lt;div id='carousel-custom' class='carousel slide' data-ride='carousel'&gt;\n        &lt;div class='carousel-outer'&gt;\n            &lt;!--slider --&gt;\n            &lt;div class='carousel-inner '&gt;\n                &lt;div class='item active'&gt;\n                    &lt;%= image_tag @product.images.first.image.url(:medium), \n                     class: \"img-responsive\", id: \"\" %&gt;\n                    &lt;/div&gt;      \n                    &lt;% @product.images.drop(1).each do |image_product| %&gt;\n                       &lt;div class='item'&gt;\n                        &lt;%= image_tag image_product.image.url(:medium), \n                        class: \"img-responsive\", id: \"\" %&gt;\n\n              &lt;/div&gt;\n                &lt;% end %&gt;\n\n            &lt;script&gt;\n              $(\"#zoom_05\").elevateZoom({ zoomType    : \"inner\", cursor: \n              \"crosshair\" });\n            &lt;/script&gt;\n        &lt;/div&gt;\n        &lt;!-- sag sol --&gt;\n        &lt;a class='left carousel-control' href='#carousel-custom' data-\n         slide='prev'&gt;\n            &lt;span class='glyphicon glyphicon-chevron-left'&gt;&lt;/span&gt;\n        &lt;/a&gt;\n        &lt;a class='right carousel-control' href='#carousel-custom' data-\n         slide='next'&gt;\n            &lt;span class='glyphicon glyphicon-chevron-right'&gt;&lt;/span&gt;\n        &lt;/a&gt;\n    &lt;/div&gt;\n                &lt;!-- thumb --&gt;\n    &lt;ol class='carousel-indicators mCustomScrollbar meartlab'&gt;\n        &lt;li data-target='#carousel-custom' data-slide-to='0' class='active'&gt;\n            &lt;%= image_tag @product.images.first.image.url(:medium), class: \n         \"img-responsive\", id: \"zoom_05\" %&gt;\n        &lt;/li&gt;\n        &lt;% @product.images[1..-1].each_with_index do |image_product, index| \n           %&gt;\n            &lt;li data-target='#carousel-custom' data-slide-to=&lt;%= index + 1%&gt; \n             &gt;\n                &lt;%= image_tag image_product.image.url(:medium), class: \"img-\n              responsive\", id: \"\" %&gt;\n            &lt;/li&gt;\n        &lt;% end %&gt;\n        &lt;/li&gt;\n    &lt;/ol&gt;\n   &lt;/div&gt;\n\n   &lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function() {\n        $(\".mCustomScrollbar\").mCustomScrollbar({axis:\"x\"});\n    });\n   &lt;/script&gt;\n\n  &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby", "sorting", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1503419066, "creation_date": 1503419066, "answer_id": 45822751, "question_id": 45822593, "link": "https://stackoverflow.com/questions/45822593/ruby-sort-by-date-starting-on-todays-date/45822751#45822751", "title": "ruby sort by date starting on todays date", "body": "<pre><code>@bookings.where(\"start_time &gt;= '#{Date.today}'\")\n         .order(start_time: :asc)\n         .each { ... }\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 3096564, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/03ce6210eb366609fd2f1579ac69dff3?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffw", "link": "https://stackoverflow.com/users/3096564/jeffw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "accepted_answer_id": 45822751, "answer_count": 1, "score": 0, "last_activity_date": 1503419066, "creation_date": 1503418500, "question_id": 45822593, "link": "https://stackoverflow.com/questions/45822593/ruby-sort-by-date-starting-on-todays-date", "title": "ruby sort by date starting on todays date", "body": "<p>I am trying to sort an array by date starting with todays date. I am using </p>\n\n<pre><code>  @bookings.order(start_time: :asc ).each do\n</code></pre>\n\n<p>to sort my list but as you would expect, it is starting at the beginning. How would I return a list that would start with todays date?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 0, "creation_date": 1503417741, "post_id": 45822297, "comment_id": 78602627, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2054217/rounding-float-in-ruby\">Rounding float in Ruby</a>"}, {"owner": {"reputation": 1653, "user_id": 1318874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c89dbf404d7c6ac72954595c974e3d9?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Cherevkov", "link": "https://stackoverflow.com/users/1318874/ilya-cherevkov"}, "reply_to_user": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 0, "creation_date": 1503417865, "post_id": 45822297, "comment_id": 78602695, "body": "It&#39;s not really the same. There is <a href=\"https://stackoverflow.com/questions/8382619/how-do-i-round-a-float-to-a-specified-number-of-significant-digits-in-ruby\" title=\"how do i round a float to a specified number of significant digits in ruby\">stackoverflow.com/questions/8382619/&hellip;</a> but it also provides solutions with rounding the last digit"}, {"owner": {"reputation": 1653, "user_id": 1318874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c89dbf404d7c6ac72954595c974e3d9?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Cherevkov", "link": "https://stackoverflow.com/users/1318874/ilya-cherevkov"}, "reply_to_user": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 1, "creation_date": 1503418320, "post_id": 45822297, "comment_id": 78603000, "body": "nvm, I&#39;ve found solution <code>Float(&quot;%.#{6}g&quot; % 3852.574257425742694).to_s[0..-2].to_f</code>"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1503419477, "post_id": 45822297, "comment_id": 78603672, "body": "@IlyaCherevkov the <code>Float()</code> portion is unnecessary since <code>String#%</code> will return a <code>String</code> e.g <code>(&quot;%.#{6}g&quot; % 3852.574257425742694)[0..-2].to_f</code> right now you are formatting a <code>Float</code> as a <code>String</code> then converting the <code>String</code> to a <code>Float</code> then back to a <code>String</code> then back to a <code>Float</code>"}, {"owner": {"reputation": 1653, "user_id": 1318874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c89dbf404d7c6ac72954595c974e3d9?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Cherevkov", "link": "https://stackoverflow.com/users/1318874/ilya-cherevkov"}, "edited": false, "score": 1, "creation_date": 1503419665, "post_id": 45822297, "comment_id": 78603782, "body": "thanks! also it&#39;s not valid for numbers with whole part bigger than 5 digits, but it&#39;s not the case for me"}, {"owner": {"reputation": 1653, "user_id": 1318874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c89dbf404d7c6ac72954595c974e3d9?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Cherevkov", "link": "https://stackoverflow.com/users/1318874/ilya-cherevkov"}, "edited": false, "score": 0, "creation_date": 1503471523, "post_id": 45822297, "comment_id": 78622539, "body": "Hi, 5 significant digits are required by external API, which is used for some stock prices. Prices on the platform are not bigger than xxxx.xxxxxxxx, so first two are not the case for me, for the last  <code>-0.0012345</code>. I guess if it was the case, the expected output would be <code>123456</code> &amp; <code>-123456</code>"}], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 3, "last_activity_date": 1504082399, "last_edit_date": 1504082399, "creation_date": 1503516110, "answer_id": 45847829, "question_id": 45822297, "link": "https://stackoverflow.com/questions/45822297/calculate-number-of-significant-digits/45847829#45847829", "title": "Calculate number of significant digits", "body": "<p>I understand the numbers are non-negative. One can do the following:</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>def floor_it(f, sig_digits=5)\n  pow = sprintf(\"%e\", f)[-3..-1].to_i\n  (f *= 10**(-pow)).floor(sig_digits-1) * 10**(pow)\nend\n</code></pre>\n\n<p><strong>Examples</strong></p>\n\n<pre><code>floor_it 0.007425742694        #=&gt; 0.0074257\nfloor_it 3852.574257425742694  #=&gt; 3852.5\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p>For</p>\n\n<pre><code>f = 385.74957425742694 \nsig_digits = 5\n</code></pre>\n\n<p>the steps are as follows. First express the number in scientific notation (as a string). See <a href=\"http://ruby-doc.org/core-2.4.0/Kernel.html#method-i-sprintf\" rel=\"nofollow noreferrer\">Kernel#sprintf</a>.</p>\n\n<pre><code>a = sprintf(\"%e\", f)\n  #=&gt; \"3.857496e+02\"\n</code></pre>\n\n<p>We wish to extract the last two digits.</p>\n\n<pre><code>b = a[-3..-1]\n  #=&gt; \"02\"\n</code></pre>\n\n<p>Convert that to an integer.</p>\n\n<pre><code>pow = b.to_i\n  #=&gt; 2\n</code></pre>\n\n<p>Shift <code>f</code>'s decimal point so there is one non-zero digit to the left of the decimal point.</p>\n\n<pre><code>f *= 10**(-pow) \n  #=&gt; 3.8574957425742697\n</code></pre>\n\n<p>Use the method <a href=\"http://ruby-doc.org/core-2.4.0/Float.html#method-i-floor\" rel=\"nofollow noreferrer\">Float#floor</a> to obtain the desired digits.</p>\n\n<pre><code>d = f.floor(sig_digits-1)\n  #=&gt; 3.8574957425742697.floor(4)\n  #=&gt; 3.8574\n</code></pre>\n\n<p>Lastly, shift the decimal point back to its initial position.</p>\n\n<pre><code>d * 10**(pow)\n  #=&gt; 385.74\n</code></pre>\n"}], "owner": {"reputation": 1653, "user_id": 1318874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c89dbf404d7c6ac72954595c974e3d9?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Cherevkov", "link": "https://stackoverflow.com/users/1318874/ilya-cherevkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 431, "favorite_count": 0, "accepted_answer_id": 45847829, "answer_count": 1, "score": 3, "last_activity_date": 1504082399, "creation_date": 1503417542, "question_id": 45822297, "link": "https://stackoverflow.com/questions/45822297/calculate-number-of-significant-digits", "title": "Calculate number of significant digits", "body": "<p>I need to convert any floating point number into 5-significant digits format. It means five first non-zero digits (with the last digit not rounded up).</p>\n\n<p>Example</p>\n\n<pre><code>Float(\"%.#{5}g\" % 0.007425742694) =&gt; 0.0074257\nFloat(\"%.#{5}g\" % 3852.574257425742694) =&gt; 3852.6\n</code></pre>\n\n<p>The problem with this approach for me is that 3852.574257425742694 is rounded to 3852.6, and I need 3852.5.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "session"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 4, "creation_date": 1503415630, "post_id": 45821626, "comment_id": 78601147, "body": "Why don&#39;t you just pass the session value from the controller (where <code>session</code> is readily available) into the module / wizard?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1503424906, "post_id": 45821626, "comment_id": 78606557, "body": "to further explain Stefan&#39;s comment ... <code>session</code>, being hash-like, is mutable, so if you pass it to the PORO method as an argument, and manipulate it there, the changes will remain when you access <code>session</code> afterward"}], "answers": [{"tags": [], "owner": {"reputation": 7196, "user_id": 951181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0784a47fca1c942ea40bde8857b3d22f?s=128&d=identicon&r=PG", "display_name": "Martin", "link": "https://stackoverflow.com/users/951181/martin"}, "is_accepted": true, "score": 2, "last_activity_date": 1503426742, "creation_date": 1503426742, "answer_id": 45824649, "question_id": 45821626, "link": "https://stackoverflow.com/questions/45821626/how-can-i-access-the-session-of-a-rails-app-from-a-poro/45824649#45824649", "title": "How can I access the session of a rails app from a PORO?", "body": "<p>You probably can't and should'nt - one of nice things of using PORO is to be able to use them outside of a specific context (HTTP and session in your case). What I would do is collect the information you need from the session and use it to initialize your wizard:</p>\n\n<pre><code>class SomeController &lt; ApplicationController\n  def index\n    return_url = session[:user_return_to_from_wizard]\n    wizard = Wizard.new(return_url: return_url)\n    ...\n  end\nend\n</code></pre>\n\n<p>This way you can still test/use Wizard independently and don't have to rely on session inside.</p>\n"}], "owner": {"reputation": 3, "user_id": 8482132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edb744286da794fab5afe6c9134a90bf?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/8482132/jim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 45824649, "answer_count": 1, "score": 0, "last_activity_date": 1503426742, "creation_date": 1503415456, "question_id": 45821626, "link": "https://stackoverflow.com/questions/45821626/how-can-i-access-the-session-of-a-rails-app-from-a-poro", "title": "How can I access the session of a rails app from a PORO?", "body": "<p>I'm working on a wizard - a PORO module - for user's information. The goal is to forward the users to said wizard for him to complete his user profile if he attempts to make a booking (or similar action) with an incomplete profile.</p>\n\n<p>After the last step of the wizard I would like to redirect the user back to the action he intended initially. For that I'm saving a session variable named \":user_return_to_from_wizard\".</p>\n\n<p>I can't seem to access the session variable from the PORO module. What can I do?</p>\n\n<p>I tried of course</p>\n\n<pre><code>session[:user_return_to_from_wizard]\n</code></pre>\n\n<p>but that doesn't work. I guess something like</p>\n\n<pre><code>App::Application.session....\n</code></pre>\n"}, {"tags": ["ruby", "csv", "prawn"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1503414006, "post_id": 45820085, "comment_id": 78599882, "body": "&quot;the error says method unknow (print_list)&quot; \u2013 I <i>highly</i> doubt that that is what the error says. I am 100% certain that it will <i>at least</i> tell you a line number and show a stack trace. Without that, there is not enough information for us to help you. What is the <i>precise</i> error message? What result do you expect and why? What is the desired behavior and why? Can you provide a <i>precise</i> specification of what it is that you want to happen, including any and all rules, exceptions from those rules, corner cases, special cases, boundary cases, and edge cases? \u2026"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1503414080, "post_id": 45820085, "comment_id": 78599933, "body": "\u2026 Can you provide sample inputs and outputs demonstrating what you expect to happen, both in normal cases, and in all the exceptions, corner cases, special cases, boundary cases, and edge cases? Please, also provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. (With a specific focus on <i>minimal</i>: I highly doubt it requires 100 lines to reproduce the problem, in fact, I bet, you can demonstrate the problem in 2 short lines.)"}, {"owner": {"reputation": 3, "user_id": 8476441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5efe367e9b44222d2c08c5a58923a273?s=128&d=identicon&r=PG&f=1", "display_name": "Alassar", "link": "https://stackoverflow.com/users/8476441/alassar"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1503474587, "post_id": 45820085, "comment_id": 78624551, "body": "My Error says, &quot;in my path where the Gem Prawn is installed:C:/Ruby24-64/....  in &quot;method_missing&quot;: undefinde local variable or method &quot;print_list&quot; for #&lt;Generating:0x2318460&gt;&quot;."}, {"owner": {"reputation": 3, "user_id": 8476441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5efe367e9b44222d2c08c5a58923a273?s=128&d=identicon&r=PG&f=1", "display_name": "Alassar", "link": "https://stackoverflow.com/users/8476441/alassar"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1503476065, "post_id": 45820085, "comment_id": 78625506, "body": "And i thank you, but i think my question is enough information what i am worriyng about: Am i casting the method (.print_list) on the wrong method or am i using the wrong method for text in prawn. Because again someone solveld the problem and the programm runs but it didnt prints the text on the pdf_file."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8476441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5efe367e9b44222d2c08c5a58923a273?s=128&d=identicon&r=PG&f=1", "display_name": "Alassar", "link": "https://stackoverflow.com/users/8476441/alassar"}, "edited": false, "score": 0, "creation_date": 1503475576, "post_id": 45820399, "comment_id": 78625183, "body": "Thank you, now my Code runs, but it didnt prints out the Method lines in the pdf-File. There is no error Message, the pdf-File is rendered but blank."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 3, "user_id": 8476441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5efe367e9b44222d2c08c5a58923a273?s=128&d=identicon&r=PG&f=1", "display_name": "Alassar", "link": "https://stackoverflow.com/users/8476441/alassar"}, "edited": false, "score": 0, "creation_date": 1503475982, "post_id": 45820399, "comment_id": 78625451, "body": "If you have another problem, please post another question. The problem stated in this question is resolved, and the SO\u2019s rule of thumb is \u201cone question per one problem.\u201d"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 0, "last_activity_date": 1503412084, "creation_date": 1503412084, "answer_id": 45820399, "question_id": 45820085, "link": "https://stackoverflow.com/questions/45820085/wrong-prawn-method-or-wrong-object/45820399#45820399", "title": "Wrong prawn method or wrong object?", "body": "<p><code>print_list</code> is an instance method of <code>List</code> class, and you call it on <code>self</code> object, which is there an instance of <code>Generating</code>. It should be:</p>\n\n<pre><code>liste1 = Listen.new(\"Friendslist\")\nliste1.load_friend(\"test.csv\")\n#\u21d3\u21d3\u21d3\u21d3\u21d3\u21d3\nliste1.print_list\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8476441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5efe367e9b44222d2c08c5a58923a273?s=128&d=identicon&r=PG&f=1", "display_name": "Alassar", "link": "https://stackoverflow.com/users/8476441/alassar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 45820399, "answer_count": 1, "score": -1, "last_activity_date": 1503412084, "creation_date": 1503411273, "question_id": 45820085, "link": "https://stackoverflow.com/questions/45820085/wrong-prawn-method-or-wrong-object", "title": "Wrong prawn method or wrong object?", "body": "<p>I am trying to get  programm started where i cant read in a csv File an it prints the data out on a pdf-File. Now i have a problem.\nHeres is my Code:</p>\n\n<pre><code>------------------------------------\nrequire_relative 'friends'\n\nclass List\n\n  attr_accessor :list_name, :list\n\n  def initialize(list_name)\n    @list_name = list_name\n    @list = []\n  end\n\n  def list_name\n    @list_name\n  end\n\n  def liste\n    @list\n  end\n\n  def wert(place)\n    @list[place].to_s\n  end\n\n  def list_length\n    @list.length\n  end\n\n  def print_list\n    @list.each do |freunde|\n    \"#{freunde.name},#{freunde.age}\"\n    end\n  end\n\n  def add_friend(a_friend)\n    @list.push(a_friend)\n  end\n\n  def load_friend(from_file)\n      File.readlines(from_file).each do |line|\n        add_friend(Freunde.from_csv(line))\n      end\n  end\n\nend\n-------------------------------------------\n\n  require_relative 'list'\n\n  class Friends\n\n    attr_accessor :name,:age\n\n    def initialize(name, age)\n      @name = name\n      @age = age\n    end\n\n    def self.from_csv(string)\n      name, age = string.split(',')\n      Freunde.new(name,age)\n    end\n\n   def friends\n    @name\n   end\n  end   \n-------------------------------------------\n\nrequire 'prawn'\nrequire_relative 'list'\nrequire_relative 'friends'\n\n\nclass Generating\ninclude Prawn::View\n\n  def initialize\n    @document = Prawn::Document.new(:page_size =&gt; \"A4\")\n    @fontpath = File.expand_path(\"../data/fonts\", __FILE__)\n    liste1 = Listen.new(\"Friendslist\")\n    liste1.load_friend(\"test.csv\")\n    print_list\n    save\n  end\n\n  def print_friends\n    font(\"#{@fontpath}/Arial.ttf\") do\n        font_size 11\n        text_box(\"#{liste1.print_list}\", :at =&gt; [15,405], :height =&gt; 50, \n        :width =&gt; 250)\nend\n  end\n\n  def save\n    self.render_file \"Hello.pdf\"\n  end\nend\n---------------------------------------------\n</code></pre>\n\n<p>When i now create a new generating-Object:</p>\n\n<pre><code>gen = Generating.new\n</code></pre>\n\n<p>then it fails the whole programm because the error says method unknow (print_list). Am i submitting the wrong object for the method(print_list), or am using the text output methods of prawn wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "cloudinary"], "comments": [{"owner": {"reputation": 2977, "user_id": 8459787, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/c4efeb3c2303d4b6b22f3ccf5d149c9b?s=128&d=identicon&r=PG&f=1", "display_name": "artgb", "link": "https://stackoverflow.com/users/8459787/artgb"}, "edited": false, "score": 1, "creation_date": 1503414363, "post_id": 45819929, "comment_id": 78600152, "body": "can you add picture of error?"}, {"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1503416424, "post_id": 45819929, "comment_id": 78601671, "body": "Seems that the problem is in the <code>Attachinary</code> config no? Can you share the User model validations or the full stack trace?"}, {"owner": {"reputation": 457, "user_id": 8213274, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/73e9d3e2734c77ffe9aeef27b2e00a3a?s=128&d=identicon&r=PG&f=1", "display_name": "eth3rnit3", "link": "https://stackoverflow.com/users/8213274/eth3rnit3"}, "edited": false, "score": 0, "creation_date": 1503439199, "post_id": 45819929, "comment_id": 78613321, "body": "i just add the user model and a picture of error ;-)"}], "answers": [{"tags": [], "owner": {"reputation": 3, "user_id": 7961986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3df81c8256c8fa69fa29a29cf381aaed?s=128&d=identicon&r=PG&f=1", "display_name": "Edouard", "link": "https://stackoverflow.com/users/7961986/edouard"}, "is_accepted": false, "score": 0, "last_activity_date": 1506089107, "creation_date": 1506089107, "answer_id": 46366680, "question_id": 45819929, "link": "https://stackoverflow.com/questions/45819929/activerecordrecordnotfound-in-userscontrollerupdate/46366680#46366680", "title": "ActiveRecord::RecordNotFound in UsersController#update", "body": "<p>I had the same issue and I found a solution adding in the New View</p>\n\n<pre><code>&lt;%= f.input :photo_cache, as: :hidden %&gt; \n</code></pre>\n\n<p>in the model</p>\n\n<p><code>has_attachment :photo_cache</code></p>\n\n<p>and also putting :photo_cache in the strong params in my controller</p>\n"}], "owner": {"reputation": 457, "user_id": 8213274, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/73e9d3e2734c77ffe9aeef27b2e00a3a?s=128&d=identicon&r=PG&f=1", "display_name": "eth3rnit3", "link": "https://stackoverflow.com/users/8213274/eth3rnit3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 206, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1506089107, "creation_date": 1503410855, "last_edit_date": 1592644375, "question_id": 45819929, "link": "https://stackoverflow.com/questions/45819929/activerecordrecordnotfound-in-userscontrollerupdate", "title": "ActiveRecord::RecordNotFound in UsersController#update", "body": "<p><a href=\"https://i.stack.imgur.com/PxUnG.png\" rel=\"nofollow noreferrer\">enter image description here</a>I have added a page to complete his profile after creating an account indicating only the e-mail address and password, so we find ourselves on the page that completes his profile, add photos to His account ... everything works well if I fill the fields correctly and I upload photos, I can validate and my profile is updated, the problem comes when I forget to fill a mandatory field (example: address or first_name. ..) and that I had already upload a photos, so I have a render that tells me that I forgot fields and when I complete them and validate, it is that cloudinary makes a mistake</p>\n<blockquote>\n<p>ActiveRecord::RecordNotFound in UsersController#update</p>\n<p>Couldn't find Attachinary::File with 'id'=18</p>\n</blockquote>\n<p>params :</p>\n<pre><code>&lt;ActionController::Parameters {&quot;utf8&quot;=&gt;&quot;\u2713&quot;, &quot;_method&quot;=&gt;&quot;patch&quot;, &quot;authenticity_token&quot;=&gt;&quot;TaAxCldr0Hi2r81Oat3i9ERK8TWapiICbCeyf7J3oR6UDVSnqEoNsOjcJ6ms9Ms8MOPlYUc7mKL9A4sp+Hg4IQ==&quot;, &quot;user&quot;=&gt;&lt;ActionController::Parameters {&quot;last_name&quot;=&gt;&quot;fezfzgz&quot;, &quot;first_name&quot;=&gt;&quot;gzrgrzg&quot;, &quot;birthday(1i)&quot;=&gt;&quot;2013&quot;, &quot;birthday(2i)&quot;=&gt;&quot;8&quot;, &quot;birthday(3i)&quot;=&gt;&quot;22&quot;, &quot;gender&quot;=&gt;&quot;homme&quot;, &quot;website&quot;=&gt;&quot;zesvzzeze&quot;, &quot;phone_number&quot;=&gt;&quot;102030405&quot;, &quot;avaibility&quot;=&gt;&quot;false&quot;, &quot;description&quot;=&gt;&quot;&quot;, &quot;address&quot;=&gt;&quot;zregregreg&quot;, &quot;zip_code&quot;=&gt;&quot;13210&quot;, &quot;city&quot;=&gt;&quot;france&quot;, &quot;photos&quot;=&gt;[&quot;[{\\&quot;id\\&quot;:18,\\&quot;public_id\\&quot;:\\&quot;j3b5qdc90jj77ygib26f\\&quot;,\\&quot;version\\&quot;:\\&quot;1503409614\\&quot;,\\&quot;format\\&quot;:\\&quot;jpg\\&quot;,\\&quot;resource_type\\&quot;:\\&quot;image\\&quot;,\\&quot;path\\&quot;:\\&quot;v1503409614/j3b5qdc90jj77ygib26f.jpg\\&quot;}]&quot;], &quot;videos&quot;=&gt;[&quot;&quot;], &quot;voice_attribute&quot;=&gt;&quot;grave&quot;, &quot;voices&quot;=&gt;[&quot;&quot;]} permitted: false&gt;, &quot;commit&quot;=&gt;&quot;Save&quot;, &quot;controller&quot;=&gt;&quot;users&quot;, &quot;action&quot;=&gt;&quot;update&quot;, &quot;id&quot;=&gt;&quot;18&quot;} permitted: false&gt;\n</code></pre>\n<p>current_user :</p>\n<pre><code> #&lt;User id: 18, email: &quot;davqcze@freel.fr&quot;, created_at: &quot;2017-08-22 13:46:21&quot;, updated_at: &quot;2017-08-22 13:46:21&quot;, first_name: &quot;gzrgrzg&quot;, last_name: &quot;fezfzgz&quot;, birthday: nil, website: &quot;zesvzzeze&quot;, role: &quot;actor&quot;, gender: &quot;homme&quot;, phone_number: &quot;102030405&quot;, voice_attribute: &quot;grave&quot;, description: &quot;&quot;, avaibility: false, address: &quot;zregregreg&quot;, zip_code: &quot;52458&quot;, city: &quot;france&quot;&gt;\n</code></pre>\n<p>Users controller :</p>\n<pre><code>class UsersController &lt; ApplicationController\n  def index\n    @users = User.all\n  end\n\n  def edit\n    @user = User.find(params[:id])\n  end\n\n  def show\n    @user = User.find(params[:id])\n    @booking = Booking.new\n  end\n\n  def update\n    @user = current_user\n    if current_user.DA?\n      if @user.update(user_params_da)\n        redirect_to user_path(current_user)\n      else\n        render :edit\n      end\n    else\n      if @user.update(user_params)\n        redirect_to user_path(current_user)\n      else\n        render :edit\n      end\n    end\n  end\n\n\n  def user_params\n      params.require(:user).permit(\n        :first_name, :last_name, :phone_number, :address, :city, :birthday,\n        :website, :avaibility, :description, :zip_code, :gender, :voice_attribute,\n        voices: [], videos: [], photos: []\n      )\n  end\n  def user_params_da\n      params.require(:user).permit(\n        :first_name, :last_name, :phone_number, :address, :city, :birthday,\n        :website, :description, :zip_code, :gender\n        )\n  end\nend\n</code></pre>\n<p>user model :</p>\n<pre><code>class User &lt; ApplicationRecord\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise         :database_authenticatable, :registerable,\n                 :recoverable, :rememberable, :trackable, :validatable\n  has_many       :bookings\n  has_many       :projects\n\n  has_attachments :photos, maximum: 10 #limiting upload to 10 units\n  has_attachments :videos, maximum: 10 #limiting upload to 10 units\n  has_attachments :voices, maximum: 10 #limiting upload to 10 units\n\n\n  validates :first_name, presence: :true, on: :update, unless: :devise?\n  validates :last_name, presence: :true, on: :update, unless: :devise?\n  validates :zip_code, presence: :true, on: :update, unless: :devise?\n  validates :address, presence: :true, on: :update, unless: :devise?\n  validates :city, presence: :true, on: :update, unless: :devise?\n  validates :phone_number, presence: :true, on: :update, unless: :devise?\n  validates :gender, presence: :true, on: :update, unless: :devise?\n  validates :birthday, presence: :true, on: :update, unless: :devise?\n   with_options if: :actor? do |actor|\n    actor.validates_inclusion_of :avaibility, :in =&gt; [true, false], on: :update\n    actor.validates :voice_attribute, presence: :true, on: :update\n    actor.validates :voice_attribute, presence: :true, on: :update, unless: :devise?\n  end\n\n  enum voice_attribute: [:grave, :moyen, :aigu]\n  enum gender: [:femme, :homme]\n  enum role: [:DA, :actor]\n\n\n  private\n\n  def devise?\n    email_changed? || encrypted_password_changed?\n  end\nend\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/FOaoB.png\" rel=\"nofollow noreferrer\">https://preview.ibb.co/fxVW45/Capture_du_2017_08_22_23_52_21.png</a></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 34664, "user_id": 390819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee2ef44de10f7791cca06df317246935?s=128&d=identicon&r=PG", "display_name": "Cristian Lupascu", "link": "https://stackoverflow.com/users/390819/cristian-lupascu"}, "edited": false, "score": 0, "creation_date": 1503412229, "post_id": 45819844, "comment_id": 78598491, "body": "Why are you assuming that the minimum count is 1? It could be that the rarest has 3 occurrences, for example."}, {"owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "reply_to_user": {"reputation": 34664, "user_id": 390819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee2ef44de10f7791cca06df317246935?s=128&d=identicon&r=PG", "display_name": "Cristian Lupascu", "link": "https://stackoverflow.com/users/390819/cristian-lupascu"}, "edited": false, "score": 0, "creation_date": 1503413007, "post_id": 45819844, "comment_id": 78599109, "body": "Your right, I just assumed it would be one."}, {"owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "reply_to_user": {"reputation": 34664, "user_id": 390819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee2ef44de10f7791cca06df317246935?s=128&d=identicon&r=PG", "display_name": "Cristian Lupascu", "link": "https://stackoverflow.com/users/390819/cristian-lupascu"}, "edited": false, "score": 0, "creation_date": 1503413070, "post_id": 45819844, "comment_id": 78599161, "body": "my code seems to pass most tests though, now I realize why they aren&#39;t all passing."}], "answers": [{"tags": [], "owner": {"reputation": 2637, "user_id": 3223249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hri7E.jpg?s=128&g=1", "display_name": "Inpego", "link": "https://stackoverflow.com/users/3223249/inpego"}, "is_accepted": true, "score": 3, "last_activity_date": 1503414894, "creation_date": 1503414894, "answer_id": 45821420, "question_id": 45819844, "link": "https://stackoverflow.com/questions/45819844/tests-not-passing-in-rspec-in-codewars/45821420#45821420", "title": "Tests not passing in Rspec in CodeWars", "body": "<p>You should sort unique pepes by count of occurency, then take count of rarest (first) pepe and select all pepes having this count:</p>\n\n<pre><code>def find_rarest_pepe(pepes)\n  return 'No rare pepes!' if pepes.empty?\n\n  sorted_pepes = pepes.uniq.map { |pepe| [pepe, pepes.count(pepe)] }.sort_by(&amp;:last)\n  rarest_pepe_count = sorted_pepes[0][1]\n\n  return 'No rare pepes!' if rarest_pepe_count &gt;= 5\n\n  rarest_pepes = sorted_pepes.select { |_, pepe_count| pepe_count == rarest_pepe_count }\n  rarest_pepes = rarest_pepes.map(&amp;:first).sort\n  rarest_pepes = rarest_pepes[0] if rarest_pepes.count == 1\n  rarest_pepes\nend\n</code></pre>\n"}], "owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 45821420, "answer_count": 1, "score": 0, "last_activity_date": 1503414894, "creation_date": 1503410627, "last_edit_date": 1503411572, "question_id": 45819844, "link": "https://stackoverflow.com/questions/45819844/tests-not-passing-in-rspec-in-codewars", "title": "Tests not passing in Rspec in CodeWars", "body": "<blockquote>\n  <p>Your task in this kata is to implement a function that, given a list of pepes (<code>pepes</code>), returns the rarest pepe in the list. If two or more pepes are equally rare, return a list of these pepes, sorted in alphabetical order. Also, if the rarest pepe (or pepes) has a frequency of 5 or more, then it is not really a rare pepe, so your function should return <code>'No rare pepes!'</code>.</p>\n</blockquote>\n\n<p>I have my code:</p>\n\n<pre><code>def find_rarest_pepe(pepes)\n  x = pepes.select {|x| pepes.count(x) == 1}.sort\n    if x.count == 1\n     return x.join\n  elsif\n     x.count &gt;= 2\n     return x\n  else\n     return \"No rare pepes!\"\n   end\nend\n</code></pre>\n\n<p>However, what am I doing wrong here?</p>\n\n<p>Material: <code>https://www.codewars.com/kata/the-rarest-pepe/train/ruby</code></p>\n"}, {"tags": ["ruby", "selenium", "rspec", "automated-tests", "autoload"], "comments": [{"owner": {"reputation": 344, "user_id": 3922144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/814a54fafdd970b2b2abb3cf7b6ac32e?s=128&d=identicon&r=PG&f=1", "display_name": "insider", "link": "https://stackoverflow.com/users/3922144/insider"}, "edited": false, "score": 1, "creation_date": 1504220994, "post_id": 45819092, "comment_id": 78942698, "body": "What behaviour do you expect from the autoload? That it will automaticaly load file based on missing constant? You will most likely need to write a &quot;wrapper&quot; anyway as this functionality is not build in. The question is how do you expect it to behave. Typicaly you load all the dependencies through <code>require(_relative)</code> for each file. To do the work automaticaly you would need relativly strict naming convention to calculate files to be loaded."}], "answers": [{"comments": [{"owner": {"reputation": 556, "user_id": 1248224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oLsP0.jpg?s=128&g=1", "display_name": "Andree Wille", "link": "https://stackoverflow.com/users/1248224/andree-wille"}, "edited": false, "score": 0, "creation_date": 1503410142, "post_id": 45819540, "comment_id": 78596815, "body": "i know that this would work but i prefer auto loading files over adding requires manually. If i dont find a solution for autoloading then i go for this approach but before i want to try to get files autoloaded."}, {"owner": {"reputation": 556, "user_id": 1248224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oLsP0.jpg?s=128&g=1", "display_name": "Andree Wille", "link": "https://stackoverflow.com/users/1248224/andree-wille"}, "edited": false, "score": 0, "creation_date": 1503410608, "post_id": 45819540, "comment_id": 78597185, "body": "do you know how to create the symbol :ActiveAdminLoginPage from &#39;active_admin_login_page&#39;? Since im reading all files from the page_object directory i need to do this dynamically."}, {"owner": {"reputation": 18593, "user_id": 4304188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5695b0e5c30d4464163e3f3412fe5f1?s=128&d=identicon&r=PG", "display_name": "Mihai Dinculescu", "link": "https://stackoverflow.com/users/4304188/mihai-dinculescu"}, "reply_to_user": {"reputation": 556, "user_id": 1248224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oLsP0.jpg?s=128&g=1", "display_name": "Andree Wille", "link": "https://stackoverflow.com/users/1248224/andree-wille"}, "edited": false, "score": 0, "creation_date": 1503411453, "post_id": 45819540, "comment_id": 78597890, "body": "You shouldn&#39;t need to do anything special. Check out <a href=\"http://lifeonubuntu.com/use-rubys-autoload-instead-of-require-for-your-ruby-and-rails-apps/\" rel=\"nofollow noreferrer\">lifeonubuntu.com/&hellip;</a>"}, {"owner": {"reputation": 556, "user_id": 1248224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oLsP0.jpg?s=128&g=1", "display_name": "Andree Wille", "link": "https://stackoverflow.com/users/1248224/andree-wille"}, "edited": false, "score": 0, "creation_date": 1503412735, "post_id": 45819540, "comment_id": 78598925, "body": "i dont want to autoload one single file but rather a complete folder wit subfolders. I would like to replace this line <code>Dir[File.join(Dir.pwd, &#39;spec&#47;page_objects&#47;**&#47;*.rb&#39;)].each { |f| require f }</code> with a autoload command."}, {"owner": {"reputation": 18593, "user_id": 4304188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5695b0e5c30d4464163e3f3412fe5f1?s=128&d=identicon&r=PG", "display_name": "Mihai Dinculescu", "link": "https://stackoverflow.com/users/4304188/mihai-dinculescu"}, "reply_to_user": {"reputation": 556, "user_id": 1248224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oLsP0.jpg?s=128&g=1", "display_name": "Andree Wille", "link": "https://stackoverflow.com/users/1248224/andree-wille"}, "edited": false, "score": 0, "creation_date": 1503412983, "post_id": 45819540, "comment_id": 78599097, "body": "I don&#39;t think that this is possible without giving Ruby a way to know which file depends on which."}], "tags": [], "owner": {"reputation": 18593, "user_id": 4304188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5695b0e5c30d4464163e3f3412fe5f1?s=128&d=identicon&r=PG", "display_name": "Mihai Dinculescu", "link": "https://stackoverflow.com/users/4304188/mihai-dinculescu"}, "is_accepted": true, "score": 3, "last_activity_date": 1503410434, "last_edit_date": 1503410434, "creation_date": 1503409849, "answer_id": 45819540, "question_id": 45819092, "link": "https://stackoverflow.com/questions/45819092/dynamically-create-autoload-command-from-filenames-in-ruby/45819540#45819540", "title": "Dynamically create autoload command from filenames in Ruby", "body": "<p>How about you use <code>require</code> to load your dependency in the file that needs it?</p>\n\n<p><code>require</code> loads a file only once, so you shouldn't encounter any side effects.</p>\n\n<p>Or, even better, you can use <code>auto_load</code>, which uses <code>require</code> under the hood, but it does it in a smarter way</p>\n\n<pre><code>autoload :ActiveAdminLoginPage, 'active_admin_login_page'\n</code></pre>\n"}], "owner": {"reputation": 556, "user_id": 1248224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oLsP0.jpg?s=128&g=1", "display_name": "Andree Wille", "link": "https://stackoverflow.com/users/1248224/andree-wille"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 45819540, "answer_count": 1, "score": 5, "last_activity_date": 1504181179, "creation_date": 1503408725, "last_edit_date": 1503494646, "question_id": 45819092, "link": "https://stackoverflow.com/questions/45819092/dynamically-create-autoload-command-from-filenames-in-ruby", "title": "Dynamically create autoload command from filenames in Ruby", "body": "<p>I am testing a web application with ruby, rspec, capybara and selenium and i ran into an <code>uninitialized constant ActiveAdminLoginPage</code> Exception that i don't know how to solve.</p>\n\n<p>In spec_helper.rb i am requiring the following:</p>\n\n<pre><code>Dir[File.join(Dir.pwd, 'spec/page_objects/**/*.rb')].each { |f| require f }\n</code></pre>\n\n<p>I have 2 classes</p>\n\n<pre><code>spec/page_objects/products/active_admin_login_page.rb  \n\nmodule Products\n  class ActiveAdminLoginPage &lt; ::ActiveAdminLoginPage\n  ...\n  end\nend \n</code></pre>\n\n<p>inherits from</p>\n\n<pre><code>spec/page_objects/active_admin_login_page.rb\n</code></pre>\n\n<p>unfortunately the sub class is loaded before the parent class.</p>\n\n<p>How do i create a autoload command dynamically from all filenames in a directory? \nI would like to replace this command: </p>\n\n<p><code>Dir[File.join(Dir.pwd, 'spec/page_objects/**/*.rb')].each { |f| require f }</code> </p>\n\n<p>with a autoload command.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "winapi"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10206671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-E8IyJ4eZLU8/AAAAAAAAAAI/AAAAAAAAAFU/kny98ejzFEA/photo.jpg?sz=128", "display_name": "ss vinith", "link": "https://stackoverflow.com/users/10206671/ss-vinith"}, "is_accepted": false, "score": 0, "last_activity_date": 1533880323, "creation_date": 1533880323, "answer_id": 51779806, "question_id": 45819051, "link": "https://stackoverflow.com/questions/45819051/unable-to-load-win32-api-so-from-ruby-script/51779806#51779806", "title": "Unable to load win32/api.so from ruby script", "body": "<p>I have faced the same issue , I got resolved this by download the zip file of api.dll from <a href=\"https://www.dll-files.com/api.dll.html\" rel=\"nofollow noreferrer\">https://www.dll-files.com/api.dll.html</a> and extract the zip file and then paste the 'api.dll' inside my ruby bin folder : \"C:\\Ruby22\\bin </p>\n"}], "owner": {"reputation": 117, "user_id": 3833641, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8177a0622be81fd3f44b6f7f06e21b71?s=128&d=identicon&r=PG&f=1", "display_name": "getsuga", "link": "https://stackoverflow.com/users/3833641/getsuga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533880323, "creation_date": 1503408632, "question_id": 45819051, "link": "https://stackoverflow.com/questions/45819051/unable-to-load-win32-api-so-from-ruby-script", "title": "Unable to load win32/api.so from ruby script", "body": "<p>The command run the following : </p>\n\n<p>C:\\V4\\framework\\scripts > ruby SCM.rb</p>\n\n<p>The error I get is the following :</p>\n\n<p>C:/Rubby/lib/ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in require: 126: The specified module could not be found.   - C:/Rubby/lib/ruby/gems/2.4.0/gems/win32-api-1.4.8-x86-mingw32/lib/win32/ruby19/win32/api.so (LoadError)\n        from C:/Rubby/lib/ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n        from C:/Rubby/lib/ruby/gems/2.4.0/gems/win32-api-1.4.8-x86-mingw32/lib/win32/api.rb:2:in </p>\n\n<p>The first few lines of the calling script looks like following :</p>\n\n<pre><code>require 'watir/win32ole'\nrequire 'windows/com'\nrequire 'windows/window/message'\n</code></pre>\n\n<p>The second line is giving the Load Error. I googled and am not able to find a solution.</p>\n"}, {"tags": ["ruby", "amazon-web-services", "rubygems", "chef-infra", "test-kitchen"], "comments": [{"owner": {"reputation": 11, "user_id": 8485171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5ad2576810e499ffa0a2bbc2f39863c?s=128&d=identicon&r=PG&f=1", "display_name": "one", "link": "https://stackoverflow.com/users/8485171/one"}, "edited": false, "score": 0, "creation_date": 1503410521, "post_id": 45818827, "comment_id": 78597123, "body": "&gt;&gt;&gt;&gt;&gt;&gt; ------Exception------- &gt;&gt;&gt;&gt;&gt;&gt; Class: Kitchen::ShellOut::ShellCommandFailed &gt;&gt;&gt;&gt;&gt;&gt; Message: Expected process to exit with [0], but received &#39;1&#39; ---- Begin output of vagrant --version ---- STDOUT: STDERR: stdin is not a tty ---- End output of vagrant --version ---- Ran vagrant --version returned 1 &gt;&gt;&gt;&gt;&gt;&gt; ---------------------- &gt;&gt;&gt;&gt;&gt;&gt; Please see .kitchen/logs/kitchen.log for more details &gt;&gt;&gt;&gt;&gt;&gt; Also try running <code>kitchen diagnose --all</code> for configuration"}, {"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1503412810, "post_id": 45818827, "comment_id": 78598984, "body": "Please <a href=\"https://stackoverflow.com/posts/45818827/edit\">edit</a> your question to add informations, comments are not there for that. You should take the <a href=\"https://stackoverflow.com/tour\">tour</a> and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> also."}, {"owner": {"reputation": 11, "user_id": 8485171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5ad2576810e499ffa0a2bbc2f39863c?s=128&d=identicon&r=PG&f=1", "display_name": "one", "link": "https://stackoverflow.com/users/8485171/one"}, "reply_to_user": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1503414907, "post_id": 45818827, "comment_id": 78600605, "body": "C:/opscode/chefdk/embedded/lib/ruby/gems/2.4.0/gems/test-kit&zwnj;&#8203;chen-1.17.0/lib/kitc&zwnj;&#8203;hen/loader/yaml.rb:3&zwnj;&#8203;40:in           `rescue in parse_yaml_string&#39;"}], "answers": [{"tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 0, "last_activity_date": 1503425777, "creation_date": 1503425777, "answer_id": 45824417, "question_id": 45818827, "link": "https://stackoverflow.com/questions/45818827/chef-verify-error-windows/45824417#45824417", "title": "Chef Verify Error windows", "body": "<p><code>chef verify</code> is an internal command we (the developers of ChefDK) use as part of the packaging process. It is not for you. Do not run it.</p>\n"}], "owner": {"reputation": 11, "user_id": 8485171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5ad2576810e499ffa0a2bbc2f39863c?s=128&d=identicon&r=PG&f=1", "display_name": "one", "link": "https://stackoverflow.com/users/8485171/one"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503425777, "creation_date": 1503408007, "last_edit_date": 1503414893, "question_id": 45818827, "link": "https://stackoverflow.com/questions/45818827/chef-verify-error-windows", "title": "Chef Verify Error windows", "body": "<p>i am trying to kitchen test </p>\n\n<p>C:/opscode/chefdk/embedded/lib/ruby/gems/2.4.0/gems/chef-provisioning-aws-2.2.2/lib/chef/resource/aws_route53_record_set.rb:48: warning: constant ::Fixnum is deprecated</p>\n"}, {"tags": ["ruby", "rake", "rvm", "redmine"], "answers": [{"tags": [], "owner": {"reputation": 6274, "user_id": 5962766, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/0cfba776466d8668945e9a0b68eadcaf?s=128&d=identicon&r=PG", "display_name": "Justinas Jakavonis", "link": "https://stackoverflow.com/users/5962766/justinas-jakavonis"}, "is_accepted": true, "score": 0, "last_activity_date": 1503472074, "creation_date": 1503472074, "answer_id": 45832878, "question_id": 45818534, "link": "https://stackoverflow.com/questions/45818534/cannot-add-redmine-plugin-loaderror-cannot-load-such-file-redmine-wiki-for/45832878#45832878", "title": "Cannot add Redmine plugin - LoadError: cannot load such file -- redmine/wiki_formatting/textile/redcloth3", "body": "<p>Plugin migration worked well with previous version:</p>\n\n<pre><code>redmine_wiki_extensions-0.7.0.zip\n</code></pre>\n\n<p>Instead of:</p>\n\n<pre><code>redmine_wiki_extensions-0.8.0.zip\n</code></pre>\n\n<p>Environment:</p>\n\n<pre><code>  Redmine version                3.3.0.stable\n  Ruby version                   2.2.7-p470 \n  Rails version                  4.2.6\n</code></pre>\n"}], "owner": {"reputation": 6274, "user_id": 5962766, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/0cfba776466d8668945e9a0b68eadcaf?s=128&d=identicon&r=PG", "display_name": "Justinas Jakavonis", "link": "https://stackoverflow.com/users/5962766/justinas-jakavonis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 856, "favorite_count": 0, "accepted_answer_id": 45832878, "answer_count": 1, "score": 0, "last_activity_date": 1503472074, "creation_date": 1503407188, "question_id": 45818534, "link": "https://stackoverflow.com/questions/45818534/cannot-add-redmine-plugin-loaderror-cannot-load-such-file-redmine-wiki-for", "title": "Cannot add Redmine plugin - LoadError: cannot load such file -- redmine/wiki_formatting/textile/redcloth3", "body": "<p>Added Redmine plugin to:</p>\n\n<pre><code>/usr/share/redmine/plugins/redmine_wiki_extensions\n</code></pre>\n\n<p>Changed directory to:</p>\n\n<pre><code>/usr/share/redmine/\n</code></pre>\n\n<p>Executed:</p>\n\n<pre><code>rake redmine:plugins:migrate RAILS_ENV=production\n</code></pre>\n\n<p>And I get:</p>\n\n<pre><code>rake aborted!\nLoadError: cannot load such file -- redmine/wiki_formatting/textile/redcloth3\n</code></pre>\n\n<p>How to solve this problem?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "httparty"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1503402969, "post_id": 45816879, "comment_id": 78591164, "body": "Just a weird assumption: could you please copy-paste the real <code>sid</code> here? It could contain some invisible codepoints."}, {"owner": {"reputation": 2132, "user_id": 856753, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1c53a71370f55d0f0a4cc7e4b2c06b91?s=128&d=identicon&r=PG", "display_name": "Micheal", "link": "https://stackoverflow.com/users/856753/micheal"}, "reply_to_user": {"reputation": 6303, "user_id": 4680436, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yAD2X.jpg?s=128&g=1", "display_name": "aristotll", "link": "https://stackoverflow.com/users/4680436/aristotll"}, "edited": false, "score": 0, "creation_date": 1503403237, "post_id": 45816879, "comment_id": 78591375, "body": "@aristotl,yes first example is  a post request which generates the sid and returns it. second. I am parsing the sid and making a second request which is a get"}, {"owner": {"reputation": 2132, "user_id": 856753, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1c53a71370f55d0f0a4cc7e4b2c06b91?s=128&d=identicon&r=PG", "display_name": "Micheal", "link": "https://stackoverflow.com/users/856753/micheal"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1503403275, "post_id": 45816879, "comment_id": 78591402, "body": "@mudasobwa,  the above sid is the real sid returned by splunk api"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 1, "creation_date": 1503403341, "post_id": 45816879, "comment_id": 78591445, "body": "Can you post the url generated when you use <code>#{sid}</code>?"}, {"owner": {"reputation": 2132, "user_id": 856753, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1c53a71370f55d0f0a4cc7e4b2c06b91?s=128&d=identicon&r=PG", "display_name": "Micheal", "link": "https://stackoverflow.com/users/856753/micheal"}, "edited": false, "score": 0, "creation_date": 1503403441, "post_id": 45816879, "comment_id": 78591506, "body": "See my edit in question. I have posted the url generated when interpolate sid."}], "owner": {"reputation": 2132, "user_id": 856753, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1c53a71370f55d0f0a4cc7e4b2c06b91?s=128&d=identicon&r=PG", "display_name": "Micheal", "link": "https://stackoverflow.com/users/856753/micheal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1503505102, "creation_date": 1503402702, "last_edit_date": 1503505102, "question_id": 45816879, "link": "https://stackoverflow.com/questions/45816879/string-interpolation-in-get-uri-with-httparty-issue", "title": "string interpolation in Get URI with httparty issue", "body": "<p>So I was using the splunk rest api to generate the search id thorugh post and then get the search results through a get request.</p>\n\n<p>I am using httpparty, &amp; this is my post and get request as follows:</p>\n\n<pre><code>  def sid\n    self.class.post(\n      \"/services/search/jobs\",\n      headers: {'Content-Type' =&gt; 'application/json'},\n      basic_auth: @auth\n    ).parsed_response\n  end\n</code></pre>\n\n<p>The generated sid looks like this: </p>\n\n<blockquote>\n  <p>1503402217.608</p>\n</blockquote>\n\n<p>I make the necessary get request as follows:</p>\n\n<pre><code> def results(sid)\n   self.class.get(\n    \"/services/search/jobs/#{sid}/results/\",\n    headers: {'Content-Type' =&gt; 'application/json', 'Accept' =&gt; 'text/html'},\n    basic_auth: @auth\n  )  \n\n end\n</code></pre>\n\n<p>The above request gives a 204 no content.\nHowever if I manually paste the sid in my code and run it, i get results back.</p>\n\n<blockquote>\n  <p>for eg: \"/services/search/jobs/1503402217.608/results/\"</p>\n</blockquote>\n\n<p>So my question is how can interpolate the above to get results back.</p>\n\n<p>EDIT: my dyamic get request looks this in the console:</p>\n\n<pre><code>&lt;- \"GET /services/search/jobs/1503402217.608/results/ HTTP/1.1\\r\\nContent-Type: application/json\\r\\nAccept: text/html\\r\\nAuthorization: Basic something==\\r\\nConnection: close\\r\\nHost: server:8089\\r\\n\\r\\n\"\n-&gt; \"HTTP/1.1 204 No Content\\r\\n\"\n-&gt; \"Date: Tue, 22 Aug 2017 11:43:37 GMT\\r\\n\"\n-&gt; \"Expires: Thu, 26 Oct 1978 00:00:00 GMT\\r\\n\"\n-&gt; \"Cache-Control: no-store, no-cache, must-revalidate, max-age=0\\r\\n\"\n-&gt; \"Content-Length: 0\\r\\n\"\n-&gt; \"Vary: Cookie, Authorization\\r\\n\"\n-&gt; \"Connection: Close\\r\\n\"\n-&gt; \"X-Frame-Options: SAMEORIGIN\\r\\n\"\n-&gt; \"Server: Splunkd\\r\\n\"\n-&gt; \"\\r\\n\"\n</code></pre>\n\n<p>EDIT: Just so you know, this how i am parsing the sid in the first place before sending it as an argument to the GET request:</p>\n\n<blockquote>\n  <p>sid.parsed_response[\"sid\"]</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2119, "user_id": 1411047, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/673ade5df575380a2e2cd5a0c1503784?s=128&d=identicon&r=PG", "display_name": "Avdept", "link": "https://stackoverflow.com/users/1411047/avdept"}, "edited": false, "score": 0, "creation_date": 1503402316, "post_id": 45816636, "comment_id": 78590688, "body": "Last option works just fine  <code>2.4.1 :002 &gt; &quot;$(&#39;#card-element&#39;).find(&#39;[name*=\\&quot;__privateStripeFrame\\&quot;&#39;).&zwnj;&#8203;first().attr(&#39;name&#39;)&zwnj;&#8203;&quot;  =&gt; &quot;$(&#39;#card-element&#39;).find(&#39;[name*=\\&quot;__privateStripeFrame\\&quot;&#39;).&zwnj;&#8203;first().attr(&#39;name&#39;)&zwnj;&#8203;&quot; </code>  Make sure you passing correct argument(s)"}, {"owner": {"reputation": 201, "user_id": 6948716, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/57b79e3a77151943a2e0b41b603c38c7?s=128&d=identicon&r=PG&f=1", "display_name": "vladimirProp", "link": "https://stackoverflow.com/users/6948716/vladimirprop"}, "reply_to_user": {"reputation": 2119, "user_id": 1411047, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/673ade5df575380a2e2cd5a0c1503784?s=128&d=identicon&r=PG", "display_name": "Avdept", "link": "https://stackoverflow.com/users/1411047/avdept"}, "edited": false, "score": 0, "creation_date": 1503402726, "post_id": 45816636, "comment_id": 78590958, "body": "could be error in iframe_name =  part"}, {"owner": {"reputation": 3164, "user_id": 193785, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b9110bc3c6f788945c789bf190932dc1?s=128&d=identicon&r=PG", "display_name": "BookOfGreg", "link": "https://stackoverflow.com/users/193785/bookofgreg"}, "edited": false, "score": 0, "creation_date": 1503402908, "post_id": 45816636, "comment_id": 78591112, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/6705982/escaping-single-and-double-qoutes-from-a-string-in-ruby\">Escaping single and double qoutes from a string in ruby</a>"}, {"owner": {"reputation": 4346, "user_id": 6375113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JHg5K.jpg?s=128&g=1", "display_name": "Bugs", "link": "https://stackoverflow.com/users/6375113/bugs"}, "edited": false, "score": 0, "creation_date": 1503405024, "post_id": 45816636, "comment_id": 78592660, "body": "@vladimirProp please <a href=\"https://stackoverflow.com/help/be-nice\">be nice</a>."}, {"owner": {"reputation": 201, "user_id": 6948716, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/57b79e3a77151943a2e0b41b603c38c7?s=128&d=identicon&r=PG&f=1", "display_name": "vladimirProp", "link": "https://stackoverflow.com/users/6948716/vladimirprop"}, "edited": false, "score": 0, "creation_date": 1503405541, "post_id": 45816636, "comment_id": 78593088, "body": "problem was in something else take a look on my answer"}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1503402955, "post_id": 45816899, "comment_id": 78591151, "body": "Also some editors might use the heredoc delimiters to infer <a href=\"https://stackoverflow.com/a/10561197/125816\">what syntax highlighter to use for the string</a>!"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1503403139, "post_id": 45816899, "comment_id": 78591305, "body": "@SergioTulentsev indeed."}, {"owner": {"reputation": 201, "user_id": 6948716, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/57b79e3a77151943a2e0b41b603c38c7?s=128&d=identicon&r=PG&f=1", "display_name": "vladimirProp", "link": "https://stackoverflow.com/users/6948716/vladimirprop"}, "edited": false, "score": 0, "creation_date": 1503405553, "post_id": 45816899, "comment_id": 78593101, "body": "problem was in something else take a look at my answer"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1503402766, "creation_date": 1503402766, "answer_id": 45816899, "question_id": 45816636, "link": "https://stackoverflow.com/questions/45816636/ruby-escape-double-quotes/45816899#45816899", "title": "Ruby escape double quotes", "body": "<p>Use heredoc, it even reads better:</p>\n\n<pre><code>iframe_name = page.execute_script &lt;&lt;JS\n  $('#card-element').find('[name*=\"__privateStripeFrame\"]').first().attr('name')\nJS\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 201, "user_id": 6948716, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/57b79e3a77151943a2e0b41b603c38c7?s=128&d=identicon&r=PG&f=1", "display_name": "vladimirProp", "link": "https://stackoverflow.com/users/6948716/vladimirprop"}, "edited": false, "score": 0, "creation_date": 1503405501, "post_id": 45816929, "comment_id": 78593045, "body": "problem was in something else look at my answer"}], "tags": [], "owner": {"reputation": 3164, "user_id": 193785, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b9110bc3c6f788945c789bf190932dc1?s=128&d=identicon&r=PG", "display_name": "BookOfGreg", "link": "https://stackoverflow.com/users/193785/bookofgreg"}, "is_accepted": false, "score": 1, "last_activity_date": 1503402852, "creation_date": 1503402852, "answer_id": 45816929, "question_id": 45816636, "link": "https://stackoverflow.com/questions/45816636/ruby-escape-double-quotes/45816929#45816929", "title": "Ruby escape double quotes", "body": "<p><a href=\"https://blog.appsignal.com/2016/12/21/ruby-magic-escaping-in-ruby.html\" rel=\"nofollow noreferrer\">https://blog.appsignal.com/2016/12/21/ruby-magic-escaping-in-ruby.html</a></p>\n\n<p>In Ruby you escape double quotes with the backslash character.</p>\n\n<pre><code>\"foo\\\"bar\\\"\" =&gt; 'foo\"bar\"'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 201, "user_id": 6948716, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/57b79e3a77151943a2e0b41b603c38c7?s=128&d=identicon&r=PG&f=1", "display_name": "vladimirProp", "link": "https://stackoverflow.com/users/6948716/vladimirprop"}, "is_accepted": false, "score": 0, "last_activity_date": 1503405475, "creation_date": 1503405475, "answer_id": 45817887, "question_id": 45816636, "link": "https://stackoverflow.com/questions/45816636/ruby-escape-double-quotes/45817887#45817887", "title": "Ruby escape double quotes", "body": "<p>Sorry guys problem was in </p>\n\n<pre><code>page.execute_script\n</code></pre>\n\n<p>with this method TypeError is return </p>\n\n<p>try to use</p>\n\n<pre><code> page.evaluate_script\n</code></pre>\n\n<p>in order to store returned value</p>\n\n<pre><code>frame_name = page.evaluate_script(\"$('#card-element').find('[name*=\\\"__privateStripeFrame\\\"]').first().attr('name')\")\n</code></pre>\n"}], "owner": {"reputation": 201, "user_id": 6948716, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/57b79e3a77151943a2e0b41b603c38c7?s=128&d=identicon&r=PG&f=1", "display_name": "vladimirProp", "link": "https://stackoverflow.com/users/6948716/vladimirprop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1063, "favorite_count": 0, "accepted_answer_id": 45816899, "answer_count": 3, "score": -2, "last_activity_date": 1503405475, "creation_date": 1503402020, "question_id": 45816636, "link": "https://stackoverflow.com/questions/45816636/ruby-escape-double-quotes", "title": "Ruby escape double quotes", "body": "<p>Can someone help me with escaping double quotes </p>\n\n<pre><code> iframe_name = page.execute_script \"$('#card-element').find('[name*=\"__privateStripeFrame\"').first().attr('name')\"\n</code></pre>\n\n<p>tried with</p>\n\n<pre><code> iframe_name = page.execute_script \"$('#card-element').find('[name*=%Q[__privateStripeFrame]').first().attr('name')\"\n</code></pre>\n\n<p>and </p>\n\n<pre><code> iframe_name = page.execute_script \"$('#card-element').find('[name*=\\\"__privateStripeFrame\\\"').first().attr('name')\"\n</code></pre>\n\n<p>but got </p>\n\n<pre><code>TypeError (TypeError)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1503400627, "post_id": 45816126, "comment_id": 78589583, "body": "That error means you don&#39;t have a current_client (because you&#39;re not logged in or whatever). Anticipate and handle that situation."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1503400672, "post_id": 45816126, "comment_id": 78589621, "body": "<code>current_client</code> is <i>nil</i>. How did you set up <code>current_client</code>?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1503400749, "post_id": 45816126, "comment_id": 78589667, "body": "@Pavan: it&#39;s literally two lines below :)"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1503400814, "post_id": 45816126, "comment_id": 78589709, "body": "@SergioTulentsev Haha literally missed it :D"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8444434"}, "edited": false, "score": 0, "creation_date": 1503400880, "post_id": 45816126, "comment_id": 78589751, "body": "I&#39;m trying to set current client thru email cookie via the above method, I can&#39;t use the current_user helper because the userr is not logged in, I&#39;m trying to validate if account is active before the user can log-in."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1503400974, "post_id": 45816126, "comment_id": 78589808, "body": "@Devup: so far your code only handles the happy path, where the account is active. You should also handle the other situation, where it&#39;s inactive."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8444434"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1503401144, "post_id": 45816126, "comment_id": 78589937, "body": "@Sergio Tulentsev... I am, please check the def activate method in question, I updated it."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1503401188, "post_id": 45816126, "comment_id": 78589974, "body": "@Devup: no, you aren&#39;t. What if <code>cookies[&#39;email&#39;]</code> isn&#39;t there?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1503401246, "post_id": 45816126, "comment_id": 78590019, "body": "@Devup: also that <code>if</code> condition will not work as you intend it to."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8444434"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1503401370, "post_id": 45816126, "comment_id": 78590092, "body": "@Sergio Tulentsev...hmmm you&#39;re right.... any suggestions on how to fix the error and implement the inactive situation?"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1503401400, "post_id": 45816126, "comment_id": 78590112, "body": "@Devup : Check I have just post my answer"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1503401612, "post_id": 45816126, "comment_id": 78590237, "body": "@Devup: code-wise handling this is as simple as checking value of <code>current_client</code>. If it&#39;s nil, do one thing. If not, do another. As to what <i>exactly</i> you should do when it&#39;s nil, I don&#39;t have a slightest idea. That&#39;s your app and your logic."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8444434"}, "edited": false, "score": 0, "creation_date": 1503402832, "post_id": 45816383, "comment_id": 78591047, "body": "Thanks @Gagan Gami, I&#39;m not getting the error now!! But not sure if the whole activate method is working correctly, since the is_active column doesn&#39;t seem to get updated for some reason!! Any ideas?"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1503403119, "post_id": 45816383, "comment_id": 78591285, "body": "@Devup : instead of <code>update</code> method use <code>update_attributes</code> it will update the object"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8444434"}, "edited": false, "score": 0, "creation_date": 1503403521, "post_id": 45816383, "comment_id": 78591563, "body": "Nope, still not updating the object for some reason"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1503403887, "post_id": 45816383, "comment_id": 78591815, "body": "@Devup : use this gem in development env to debug code line by line  <a href=\"https://github.com/deivid-rodriguez/pry-byebug\" rel=\"nofollow noreferrer\">github.com/deivid-rodriguez/pry-byebug</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8444434"}, "edited": false, "score": 0, "creation_date": 1503404652, "post_id": 45816383, "comment_id": 78592378, "body": "I just diid @Gagan Gami, please check update 1 for more details!"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1503404812, "post_id": 45816383, "comment_id": 78592492, "body": "type <code>next</code> and hit enter to debug to next line"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8444434"}, "edited": false, "score": 0, "creation_date": 1503405131, "post_id": 45816383, "comment_id": 78592750, "body": "Sorry about that @Gagan Game, I did hit next a few times!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8444434"}, "edited": false, "score": 0, "creation_date": 1503407005, "post_id": 45816383, "comment_id": 78594262, "body": "It cant find the current_client.... am I reading this right @Gagan Game? <code>Store Load (4.6ms)  SELECT  &quot;stores&quot;.* FROM &quot;stores&quot; WHERE &quot;stores&quot;.&quot;email&quot; IS NULL LIMIT ?  [[&quot;LIMIT&quot;, 1]]</code>"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1503466017, "post_id": 45816383, "comment_id": 78619833, "body": "@Devup: Can you please describe me what you want? and how? explain me the whole flow."}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1503466062, "post_id": 45816383, "comment_id": 78619857, "body": "@Devup : Issue is you are not getting <code>current_client</code> but what you want to handle this <code>case if current_client</code> not found"}], "tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": false, "score": 0, "last_activity_date": 1503403054, "last_edit_date": 1503403054, "creation_date": 1503401270, "answer_id": 45816383, "question_id": 45816126, "link": "https://stackoverflow.com/questions/45816126/undefined-method-new-customer-id-for-nilnilclass/45816383#45816383", "title": "undefined method `new_customer_id&#39; for nil:NilClass", "body": "<blockquote>\n  <p>undefined method new_customer_id for nil:NilClass</p>\n</blockquote>\n\n<p>above error indicates that your <code>current_client</code> is <code>nil</code> so you can't get <code>new_customer_id</code> change your code like below:</p>\n\n<pre><code>def activate\n  if current_client.present?\n    customer_id = current_client.new_customer_id\n    customer = Braintree::Customer.find(customer_id )\n    customer_card = customer.payment_methods[0].token\n    payment_method = Braintree::PaymentMethod.find(customer_card)\n    sub = payment_method.subscriptions[0]\n    sub.status\n\n    if Braintree::Subscription::Status::Active\n      current_client.update_attributes(is_active: sub.status == Braintree::Subscription::Status::Active)\n    end\n  else\n    # here you need to place the code to handle this case (current_client not found)\n  end\nend\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8444434"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 231, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1503408998, "creation_date": 1503400540, "last_edit_date": 1503408998, "question_id": 45816126, "link": "https://stackoverflow.com/questions/45816126/undefined-method-new-customer-id-for-nilnilclass", "title": "undefined method `new_customer_id&#39; for nil:NilClass", "body": "<p>I have a braintree_customer_id column at my users table. And I want to access it  with the following active_subscription method. But it's returning an error <code>undefined method braintree_customer_id for nil:NilClass</code> at the first line of the active_subscription method.</p>\n\n<p>sessions_controller.rb</p>\n\n<pre><code>def active_subscription\n customer_id = current_client.braintree_customer_id\n customer = Braintree::Customer.find(customer_id )\n customer_card = customer.payment_methods[0].token\n payment_method = Braintree::PaymentMethod.find(customer_card)\n sub = payment_method.subscriptions[0]\n sub.status\n\n if Braintree::Subscription::Status::Active\n   current_client.update(is_active: sub.status == Braintree::Subscription::Status::Active)\n end\n</code></pre>\n\n<p>end</p>\n\n<pre><code>def current_client\n  if cookies[\"email\"].present?\n   Store.find_by_email(params[:email])\n  end\nend\n</code></pre>\n\n<p>Kind of new to rails, so help is very much appreciated on solving this one!</p>\n\n<p><strong>Update 1</strong> </p>\n\n<p>I try to sign-in and is_active column in stores is still not updated. </p>\n\n<pre><code>Started POST \"/stores/sign_in\" for 127.0.0.1 at 2017-08-22 15:20:37 +0300\nProcessing by Stores::SessionsController#create as HTML\nParameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"Xfdn28k5YfgzPokr5vGtPsBAV5K10B0+ndNoY9Vxq0C3Tw5hhmpvm7DRU4N79wCEXDuLzhuYWllh7B1N1fmYRg==\", \"store\"=&gt;{\"email\"=&gt;\"example@gmail.com\", \"password\"=&gt;\"[FILTERED]\", \"remember_me\"=&gt;\"0\"}, \"commit\"=&gt;\"Log in\"}\nStore Load (0.2ms)  SELECT  \"stores\".* FROM \"stores\" WHERE \"stores\".\"email\" = ? ORDER BY \"stores\".\"id\" ASC LIMIT ?  [[\"email\", \"example@gmail.com\"], [\"LIMIT\", 1]]\n(0.1ms)  begin transaction\n(0.0ms)  commit transaction\nCompleted 401 Unauthorized in 180ms (ActiveRecord: 1.3ms)\n\n\nStarted GET \"/stores/sign_in\" for 127.0.0.1 at 2017-08-22 15:20:37 +0300\nProcessing by Stores::SessionsController#new as HTML\nRendering stores/sessions/new.html.erb within layouts/application\nRendered stores/shared/_links.html.erb (1.1ms)\nRendered stores/sessions/new.html.erb within layouts/application (4.9ms)\n\n[31, 40] in  /Users/theopap/RubymineProjects/prices/app/controllers/stores/sessions_controller.rb\n 31:      end\n 32:    end\n 33: \n 34:    def active_subscription\n 35:      byebug\n =&gt; 36:      if current_client.present?\n 37:        customer_id = current_client.braintree_customer_id\n 38:        customer = Braintree::Customer.find(customer_id )\n 39:        customer_card = customer.payment_methods[0].token\n 40:        payment_method =   Braintree::PaymentMethod.find(customer_card)\n\nStore Load (4.6ms)  SELECT  \"stores\".* FROM \"stores\" WHERE \"stores\".\"email\" IS NULL LIMIT ?  [[\"LIMIT\", 1]]\n\n[244, 253] in /Users/theopap/.rvm/gems/ruby-2.4.0/gems/activesupport-5.1.2/lib/active_support/callbacks.rb\n244:             callback_sequence.after do |env|\n245:               unless env.halted\n246:                 user_callback.call env.target, env.value\n247:               end\n248: \n=&gt; 249:               env\n250:             end\n251:           end\n252:           private_class_method :halting\n253: \n(byebug) next\nnext\n\n[506, 515] in /Users/theopap/.rvm/gems/ruby-2.4.0/gems/activesupport-5.1.2/lib/active_support/callbacks.rb\n506:         def invoke_before(arg)\n507:           @before.each { |b| b.call(arg) }\n508:         end\n509: \n510:         def invoke_after(arg)\n=&gt; 511:           @after.each { |a| a.call(arg) }\n512:         end\n513:       end\n514: \n515:       # An Array with a compile method.\n(byebug) next\nnext\n\n[128, 137] in /Users/theopap/.rvm/gems/ruby-2.4.0/gems/activesupport-5.1.2/lib/active_support/callbacks.rb\n128:         # Common case: no 'around' callbacks defined\n129:         if next_sequence.final?\n130:           next_sequence.invoke_before(env)\n131:           env.value = !env.halted &amp;&amp; (!block_given? || yield)\n132:           next_sequence.invoke_after(env)\n=&gt; 133:           env.value\n134:         else\n135:           invoke_sequence.call\n136:         end\n137:       end\n(byebug) next\nnext\n\n[28, 37] in /Users/theopap/.rvm/gems/ruby-2.4.0/gems/actionpack-5.1.2/lib/action_controller/metal/instrumentation.rb\n28:        ActiveSupport::Notifications.instrument(\"start_processing.action_controller\", raw_payload.dup)\n29: \n30:        ActiveSupport::Notifications.instrument(\"process_action.action_controller\", raw_payload) do |payload|\n31:         begin\n32:           result = super\n=&gt; 33:           payload[:status] = response.status\n34:           result\n35:         ensure\n36:           append_info_to_payload(payload)\n37:         end\n</code></pre>\n\n<p>I also have the following inside store.rb in order to block store if not active!</p>\n\n<pre><code>def inactive_message\n  \"Store not active, please subscribe!\"\nend\n\ndef active_for_authentication?\n  super &amp;&amp; is_active?\nend\n</code></pre>\n"}, {"tags": ["python", "ruby", "openssl", "3des"], "comments": [{"owner": {"reputation": 58084, "user_id": 1816580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30e6b41f1e2bd48b058e8e72c1f0f57?s=128&d=identicon&r=PG", "display_name": "Artjom B.", "link": "https://stackoverflow.com/users/1816580/artjom-b"}, "edited": false, "score": 1, "creation_date": 1503398206, "post_id": 45815134, "comment_id": 78588011, "body": "A Triple DES should be 24 bytes long not 16 characters. Also, cryptographic keys should be indistinguishable from random noise which means that they cannot consist solely of digits or even alphanumerics. They should be randomly chosen may contain any possible byte value."}, {"owner": {"reputation": 58084, "user_id": 1816580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30e6b41f1e2bd48b058e8e72c1f0f57?s=128&d=identicon&r=PG", "display_name": "Artjom B.", "link": "https://stackoverflow.com/users/1816580/artjom-b"}, "edited": false, "score": 2, "creation_date": 1503398217, "post_id": 45815134, "comment_id": 78588019, "body": "<b>Don&#39;t use Triple DES nowadays.</b> It only provides at best 112 bit of security even if you use the largest key size of 192 bit. If a shorter key size is used, then it only provides 56 or 57 bits of security. AES would be faster (processors have a special AES-NI instruction set) and even more secure with the lowest key size of 128 bit. There is also a practical limit on the maximum ciphertext size with 3DES. See <a href=\"https://security.stackexchange.com/q/26179/45523\">Security comparison of 3DES and AES</a>."}, {"owner": {"reputation": 58084, "user_id": 1816580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30e6b41f1e2bd48b058e8e72c1f0f57?s=128&d=identicon&r=PG", "display_name": "Artjom B.", "link": "https://stackoverflow.com/users/1816580/artjom-b"}, "edited": false, "score": 1, "creation_date": 1503398232, "post_id": 45815134, "comment_id": 78588031, "body": "The IV must be unpredictable (read: random). Don&#39;t use a static IV, because that makes the cipher deterministic and therefore not semantically secure. An attacker who observes ciphertexts can determine when the same message prefix was sent before. The IV is not secret, so you can send it along with the ciphertext. Usually, it is simply prepended to the ciphertext and sliced off before decryption."}, {"owner": {"reputation": 675, "user_id": 3886157, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/73a22d4ddce0d352c07db9a13c9a2e76?s=128&d=identicon&r=PG", "display_name": "feng ce", "link": "https://stackoverflow.com/users/3886157/feng-ce"}, "reply_to_user": {"reputation": 58084, "user_id": 1816580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30e6b41f1e2bd48b058e8e72c1f0f57?s=128&d=identicon&r=PG", "display_name": "Artjom B.", "link": "https://stackoverflow.com/users/1816580/artjom-b"}, "edited": false, "score": 0, "creation_date": 1503398374, "post_id": 45815134, "comment_id": 78588135, "body": "@ArtjomB. the ruby result not equal python&#39;s"}, {"owner": {"reputation": 675, "user_id": 3886157, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/73a22d4ddce0d352c07db9a13c9a2e76?s=128&d=identicon&r=PG", "display_name": "feng ce", "link": "https://stackoverflow.com/users/3886157/feng-ce"}, "reply_to_user": {"reputation": 58084, "user_id": 1816580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30e6b41f1e2bd48b058e8e72c1f0f57?s=128&d=identicon&r=PG", "display_name": "Artjom B.", "link": "https://stackoverflow.com/users/1816580/artjom-b"}, "edited": false, "score": 0, "creation_date": 1503399178, "post_id": 45815134, "comment_id": 78588662, "body": "@ArtjomB. I&#39;m calling an api of a third party system used DES."}], "answers": [{"tags": [], "owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "is_accepted": true, "score": 2, "last_activity_date": 1504313238, "last_edit_date": 1504313238, "creation_date": 1503399927, "answer_id": 45815937, "question_id": 45815134, "link": "https://stackoverflow.com/questions/45815134/in-ruby-how-to-do-a-des-encryption-with-pkcs5-padding/45815937#45815937", "title": "In ruby, how to do a DES encryption with PKCS5 padding", "body": "<p>There are two issues here. First, don\u2019t use <code>pkcs5_keyivgen</code>, this is an old and deprecated function for deriving a key and iv from a password. You need to set these directly on the <code>Cipher</code> object:</p>\n\n<pre><code>cipher.key = key\ncipher.iv = iv\n</code></pre>\n\n<p>Second, in your Python code the key is 16 bytes, which means you are using <em>two key</em> (or keying option 2) triple DES. The Python code automatically determines which to use depending on the length of the key used. In the Ruby OpenSSL bindings you need to explicitly specify which to use. <code>des-ede3-cbc</code> is <em>three key</em> (or keying option 1). You need to use <code>des-ede-cbc</code> as the cipher name:</p>\n\n<pre><code>cipher = OpenSSL::Cipher.new('des-ede-cbc')\n</code></pre>\n"}], "owner": {"reputation": 675, "user_id": 3886157, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/73a22d4ddce0d352c07db9a13c9a2e76?s=128&d=identicon&r=PG", "display_name": "feng ce", "link": "https://stackoverflow.com/users/3886157/feng-ce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 594, "favorite_count": 2, "accepted_answer_id": 45815937, "answer_count": 1, "score": 0, "last_activity_date": 1504313238, "creation_date": 1503397596, "last_edit_date": 1503398549, "question_id": 45815134, "link": "https://stackoverflow.com/questions/45815134/in-ruby-how-to-do-a-des-encryption-with-pkcs5-padding", "title": "In ruby, how to do a DES encryption with PKCS5 padding", "body": "<p>I am trying to convert some Python code into Ruby. Here is a snippet of the Python code:</p>\n\n<pre><code># -*- coding: UTF-8 -*-\nimport pyDes\nimport base64\ndes3Key = '1234567887654321'\niv = des3Key[0:8]\ndata = r'abc'\nk = pyDes.triple_des(des3Key,pyDes.CBC,iv,pad=None,padmode=pyDes.PAD_PKCS5)\nd = k.encrypt(data)\nprint base64.b64encode(d)\n#q8qN6El3X8A=\n</code></pre>\n\n<p>My Ruby code:</p>\n\n<pre><code>require 'digest'\nrequire 'openssl'\nrequire 'base64'\n\ndata = 'abc'\n\nkey = '1234567887654321'\niv = key[0..7]\n# cipher = OpenSSL::Cipher::Cipher.new('DES-EDE3')\ncipher = OpenSSL::Cipher::Cipher.new('DES-EDE3-CBC') # or any other algorithm?\n\ncipher.encrypt\ncipher.pkcs5_keyivgen(key, iv)\noutput = cipher.update(data)\noutput &lt;&lt; cipher.final\np Base64.encode64(output).gsub(/\\n/, \"\")\n# y7TPhjBQO78=\n</code></pre>\n\n<p><strong>The ruby result not equal python's</strong> .Which algorithm should I choose?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "state-machine"], "comments": [{"owner": {"reputation": 330, "user_id": 3704776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xW0H6.jpg?s=128&g=1", "display_name": "Aditya Varma", "link": "https://stackoverflow.com/users/3704776/aditya-varma"}, "edited": false, "score": 0, "creation_date": 1503400493, "post_id": 45814900, "comment_id": 78589497, "body": "Did you try using this? <code>Machine#last_transition</code> which returns <code>Returns the most recent transition object</code>."}, {"owner": {"reputation": 2034, "user_id": 1980165, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0e1a38e5deca1c31b3bfa86d531864b2?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/1980165/steve"}, "reply_to_user": {"reputation": 330, "user_id": 3704776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xW0H6.jpg?s=128&g=1", "display_name": "Aditya Varma", "link": "https://stackoverflow.com/users/3704776/aditya-varma"}, "edited": false, "score": 0, "creation_date": 1503401110, "post_id": 45814900, "comment_id": 78589913, "body": "Yes, that gives me the last transition, and not the last state."}, {"owner": {"reputation": 2034, "user_id": 1980165, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0e1a38e5deca1c31b3bfa86d531864b2?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/1980165/steve"}, "reply_to_user": {"reputation": 330, "user_id": 3704776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xW0H6.jpg?s=128&g=1", "display_name": "Aditya Varma", "link": "https://stackoverflow.com/users/3704776/aditya-varma"}, "edited": false, "score": 0, "creation_date": 1503401166, "post_id": 45814900, "comment_id": 78589958, "body": "Look at this gem <a href=\"https://github.com/aasm/aasm#callbacks\" rel=\"nofollow noreferrer\">github.com/aasm/aasm#callbacks</a>  It has <code>from_state</code> and <code>to_state</code>"}, {"owner": {"reputation": 330, "user_id": 3704776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xW0H6.jpg?s=128&g=1", "display_name": "Aditya Varma", "link": "https://stackoverflow.com/users/3704776/aditya-varma"}, "edited": false, "score": 0, "creation_date": 1503401267, "post_id": 45814900, "comment_id": 78590037, "body": "Can&#39;t you get the state from the last transition?"}, {"owner": {"reputation": 2034, "user_id": 1980165, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0e1a38e5deca1c31b3bfa86d531864b2?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/1980165/steve"}, "reply_to_user": {"reputation": 330, "user_id": 3704776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xW0H6.jpg?s=128&g=1", "display_name": "Aditya Varma", "link": "https://stackoverflow.com/users/3704776/aditya-varma"}, "edited": false, "score": 0, "creation_date": 1503401513, "post_id": 45814900, "comment_id": 78590183, "body": "Nope. The DB stores <code>to_state</code> but not <code>from_state</code>   <code>previous_state = project.transitions.where(most_recent: false).last.to_state || project.initial_state</code> is the only way to do it that I can see, hence why asked this question."}, {"owner": {"reputation": 330, "user_id": 3704776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xW0H6.jpg?s=128&g=1", "display_name": "Aditya Varma", "link": "https://stackoverflow.com/users/3704776/aditya-varma"}, "edited": false, "score": 0, "creation_date": 1503401734, "post_id": 45814900, "comment_id": 78590318, "body": "Can&#39;t you add a metadata to the last transition. See this <code>Accessing metadata from the last transition</code>   <code>model_instance.last_transition.metadata[&quot;foo&quot;]</code>"}, {"owner": {"reputation": 2034, "user_id": 1980165, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0e1a38e5deca1c31b3bfa86d531864b2?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/1980165/steve"}, "reply_to_user": {"reputation": 330, "user_id": 3704776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xW0H6.jpg?s=128&g=1", "display_name": "Aditya Varma", "link": "https://stackoverflow.com/users/3704776/aditya-varma"}, "edited": false, "score": 0, "creation_date": 1503406835, "post_id": 45814900, "comment_id": 78594141, "body": "You could, but I wouldn&#39;t consider the previous state as metadata. Seems a bit crazy to put something in custom metadata when in other state machines it is a feature."}, {"owner": {"reputation": 330, "user_id": 3704776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xW0H6.jpg?s=128&g=1", "display_name": "Aditya Varma", "link": "https://stackoverflow.com/users/3704776/aditya-varma"}, "edited": false, "score": 0, "creation_date": 1503407505, "post_id": 45814900, "comment_id": 78594658, "body": "I know that. Is it not possible to just create a field previous state in order transition and update it in after transition for now. I see that you have raised an issue here as <a href=\"https://github.com/gocardless/statesman/issues/263\" rel=\"nofollow noreferrer\">well</a>"}, {"owner": {"reputation": 2034, "user_id": 1980165, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0e1a38e5deca1c31b3bfa86d531864b2?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/1980165/steve"}, "reply_to_user": {"reputation": 330, "user_id": 3704776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xW0H6.jpg?s=128&g=1", "display_name": "Aditya Varma", "link": "https://stackoverflow.com/users/3704776/aditya-varma"}, "edited": false, "score": 0, "creation_date": 1503419297, "post_id": 45814900, "comment_id": 78603577, "body": "I think I am going to do <code>previous_state = project.transitions.where(most_recent: false).last.to_state || initial_state</code> for now.   Will be the least destructive."}], "owner": {"reputation": 2034, "user_id": 1980165, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0e1a38e5deca1c31b3bfa86d531864b2?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/1980165/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 381, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1503396862, "creation_date": 1503396862, "question_id": 45814900, "link": "https://stackoverflow.com/questions/45814900/how-do-i-find-the-previous-state-from-a-statesman-state-machine", "title": "How do I find the previous state from a statesman state machine?", "body": "<p>I am using the statesman gem to handle a project state machine in my Rails 5 Application.</p>\n\n<p><a href=\"https://github.com/gocardless/statesman\" rel=\"nofollow noreferrer\">https://github.com/gocardless/statesman</a></p>\n\n<p>I can find the current state with: </p>\n\n<p><code>project.state_machine.current_state</code></p>\n\n<p>I would expect to find something like: </p>\n\n<p><code>project.state_machine.previous_state</code></p>\n\n<p>The <code>to_state</code> is stored in the transition table in the DB, but no <code>from_state</code>. I assume this could be deduced from: </p>\n\n<pre><code> previous_state = project.transitions.where(most_recent: false).last.to_state\n</code></pre>\n\n<p>I would have thought that this would be something required by everybody, is there a method available that I am not seeing here? Or does this feature not exist?</p>\n"}, {"tags": ["ruby", "symbols"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1503396448, "post_id": 45814353, "comment_id": 78586856, "body": "I have rarely used enums in Rails, but I&#39;d use <code>:architects_and_engineers</code> for the enum (ideally even shorter) and generate a value suitable for the dropdown via <code>I18n</code>, so the generated HTML looks like <code>&lt;option value=&quot;architects_and_engineers&quot;&gt;Architects &amp;amp; Engineers&lt;&#47;option&gt;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 5, "last_activity_date": 1503395680, "creation_date": 1503395680, "answer_id": 45814437, "question_id": 45814353, "link": "https://stackoverflow.com/questions/45814353/symbols-with-various-characters/45814437#45814437", "title": "Symbols with various characters", "body": "<pre><code>'Architects &amp; Engineers'.to_sym == :'Architects &amp; Engineers'\n#\u21d2 true\n\n['Architects &amp; Engineers'.to_sym, :'Architects &amp; Engineers'].map(&amp;:to_s)\n#\u21d2 [\"Architects &amp; Engineers\", \"Architects &amp; Engineers\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 4191656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jyXVf.jpg?s=128&g=1", "display_name": "Rohit Kumar", "link": "https://stackoverflow.com/users/4191656/rohit-kumar"}, "is_accepted": false, "score": 1, "last_activity_date": 1503397669, "creation_date": 1503397669, "answer_id": 45815165, "question_id": 45814353, "link": "https://stackoverflow.com/questions/45814353/symbols-with-various-characters/45815165#45815165", "title": "Symbols with various characters", "body": "<p>You can use classy_enum gem <a href=\"https://github.com/AgilionApps/classy_enum\" rel=\"nofollow noreferrer\">https://github.com/AgilionApps/classy_enum</a></p>\n\n<pre><code>class YourEnum &lt; ClassyEnum::Base\nend\n\nclass YourEnum::ArchitectAndEngineer &lt; YourEnum\n  def to_s\n    \"Architects &amp; Engineers\"\n  end\nend\n\nclass YourEnum::DocterOrEngineer &lt; YourEnum\n  def to_s\n    \"Doctor/Engineer\"\n  end\nend\n</code></pre>\n\n<p>then you can use it like</p>\n\n<pre><code>YourEnum.map(&amp;:to_s) # [\"Architects &amp; Engineers\", \"Doctor/Engineer\"]\n</code></pre>\n\n<p>You can find the enum like</p>\n\n<pre><code>YourEnum.find(\"Architects &amp; Engineers\") #&lt;YourEnum::ArchitectAndEngineer:0x007f96ccb16628&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 0, "last_activity_date": 1503413494, "creation_date": 1503413494, "answer_id": 45820911, "question_id": 45814353, "link": "https://stackoverflow.com/questions/45814353/symbols-with-various-characters/45820911#45820911", "title": "Symbols with various characters", "body": "<p>Another way:</p>\n\n<pre><code>:\"Architects &amp; Engineers\"     # =&gt; :\"Architects &amp; Engineers\"\n:\"Architects &amp; Engineers\" == \"Architects &amp; Engineers\".to_sym # =&gt; true\n</code></pre>\n"}], "owner": {"reputation": 1169, "user_id": 3346954, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e9998db95c439ee16a56bacfc750798b?s=128&d=identicon&r=PG&f=1", "display_name": "jbk", "link": "https://stackoverflow.com/users/3346954/jbk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 45814437, "answer_count": 3, "score": 0, "last_activity_date": 1503413494, "creation_date": 1503395481, "last_edit_date": 1503396841, "question_id": 45814353, "link": "https://stackoverflow.com/questions/45814353/symbols-with-various-characters", "title": "Symbols with various characters", "body": "<p>I would like to turn strings like the following into symbols:</p>\n\n<ul>\n<li><code>'Architects &amp; Engineers'</code></li>\n<li><code>'Catering &amp; Hotels'</code></li>\n</ul>\n\n<p>They have characters like <code>'&amp;'</code>, <code>'/'</code>.</p>\n\n<p>How can I achieve this?</p>\n"}, {"tags": ["java", "ruby", "multithreading", "selenium", "selenium-grid"], "answers": [{"tags": [], "owner": {"reputation": 12512, "user_id": 679824, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/ofTpa.jpg?s=128&g=1", "display_name": "Krishnan Mahadevan", "link": "https://stackoverflow.com/users/679824/krishnan-mahadevan"}, "is_accepted": false, "score": 0, "last_activity_date": 1503456050, "creation_date": 1503456050, "answer_id": 45829783, "question_id": 45813927, "link": "https://stackoverflow.com/questions/45813927/selenium-grid-specified-number-of-threads-not-getting-fully-occupied/45829783#45829783", "title": "Selenium Grid - Specified number of threads not getting fully occupied", "body": "<p>This has got nothing to do with Selenium, especially the Selenium Grid. The Grid is merely an execution environment, which facilitates running your browser based UI tests in a remote environment.</p>\n\n<p>It does not manage the test concurrency. You would need to check at the ruby level to figure out what is happening here.</p>\n"}], "owner": {"reputation": 2048, "user_id": 2310411, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/JrQvD.jpg?s=128&g=1", "display_name": "Vignesh Paramasivam", "link": "https://stackoverflow.com/users/2310411/vignesh-paramasivam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503478136, "creation_date": 1503394397, "last_edit_date": 1503478136, "question_id": 45813927, "link": "https://stackoverflow.com/questions/45813927/selenium-grid-specified-number-of-threads-not-getting-fully-occupied", "title": "Selenium Grid - Specified number of threads not getting fully occupied", "body": "<p>I have specified the number of threads as 20 for 300 test cases. When the test run starts it occupies all the 20 threads and completes over 270+ test cases, after that the thread occupancy is getting reduced to very few and by the end it is running with single thread.</p>\n\n<p>This is the same case irrespective of number of threads/number of test cases, where the last 10% of the tests are occupied with minimum number of threads even though there are more test cases to run than the number_of_threads.</p>\n\n<p>Test environment:</p>\n\n<ul>\n<li><p>Selenium Grid v2.53.1</p></li>\n<li><p>Ruby, Cucumber, Remotewebdriver with http::persistent client</p></li>\n</ul>\n\n<p>I have searched for similar issue and there is nothing i can relate to, please let me know if there is an existing issue in Selenium for this, or is there any tweaks to resolve this?</p>\n"}]