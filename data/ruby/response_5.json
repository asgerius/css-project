[{"tags": ["ruby", "linux", "ruby-2.1", "libgosu"], "answers": [{"comments": [{"owner": {"reputation": 484, "user_id": 3082118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0aa0c740f39d62fe0bdac58a1a7b55bf?s=128&d=identicon&r=PG&f=1", "display_name": "Achilles", "link": "https://stackoverflow.com/users/3082118/achilles"}, "reply_to_user": {"reputation": 4574, "user_id": 596757, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ArcqZ.jpg?s=128&g=1", "display_name": "Sadiksha Gautam", "link": "https://stackoverflow.com/users/596757/sadiksha-gautam"}, "edited": false, "score": 0, "creation_date": 1424762525, "post_id": 28624747, "comment_id": 45671902, "body": "Thank you for information but the script can&#39;t be stop there . please update the complete log or end of the log file , not start , you have to see Error or Fatal Error on Last Lines of Log file"}, {"owner": {"reputation": 484, "user_id": 3082118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0aa0c740f39d62fe0bdac58a1a7b55bf?s=128&d=identicon&r=PG&f=1", "display_name": "Achilles", "link": "https://stackoverflow.com/users/3082118/achilles"}, "reply_to_user": {"reputation": 4574, "user_id": 596757, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ArcqZ.jpg?s=128&g=1", "display_name": "Sadiksha Gautam", "link": "https://stackoverflow.com/users/596757/sadiksha-gautam"}, "edited": false, "score": 1, "creation_date": 1424763178, "post_id": 28624747, "comment_id": 45672167, "body": "also about missing deps , about libsdl , only two package available for your ubuntu version , you can install them with this command : apt-get install libsdl-ttf2.0-0 libsdl-ttf-gst  and another two missing package , can be install with this command : apt-get install libopenal-dev libsndfile1-dev"}, {"owner": {"reputation": 484, "user_id": 3082118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0aa0c740f39d62fe0bdac58a1a7b55bf?s=128&d=identicon&r=PG&f=1", "display_name": "Achilles", "link": "https://stackoverflow.com/users/3082118/achilles"}, "reply_to_user": {"reputation": 4574, "user_id": 596757, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ArcqZ.jpg?s=128&g=1", "display_name": "Sadiksha Gautam", "link": "https://stackoverflow.com/users/596757/sadiksha-gautam"}, "edited": false, "score": 0, "creation_date": 1424763348, "post_id": 28624747, "comment_id": 45672231, "body": "if you got faild on one of this command , first use the apt-cache search packagename , then try again ."}], "tags": [], "owner": {"reputation": 484, "user_id": 3082118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0aa0c740f39d62fe0bdac58a1a7b55bf?s=128&d=identicon&r=PG&f=1", "display_name": "Achilles", "link": "https://stackoverflow.com/users/3082118/achilles"}, "is_accepted": true, "score": 2, "last_activity_date": 1424421720, "creation_date": 1424421720, "answer_id": 28624747, "question_id": 28466834, "link": "https://stackoverflow.com/questions/28466834/unable-to-install-gosu-library-in-ruby-in-linux/28624747#28624747", "title": "unable to install Gosu library in Ruby in Linux", "body": "<p>are you sure all of dependencies are installed correctly ?</p>\n\n<p>first please check them :</p>\n\n<pre><code>dpkg -s gcc libsdl2-dev libsdl2-ttf-dev libpango1.0-dev libgl1-mesa-dev libfreeimage-dev libopenal-dev libsndfile-dev | grep Status\n</code></pre>\n\n<p>then , you can check the problem easily ! you have to check the install log file :</p>\n\n<p>you can open the file with editor like vi , nano , or cat , tail ... , I've used nano </p>\n\n<pre><code>nano /var/lib/gems/*/gems/*/ext/gosu/gem_make.out\n</code></pre>\n\n<p>move to end of the file and check why make the script stopped ! post the Error Here , then i can help you for resolve the issue !</p>\n"}], "owner": {"reputation": 4574, "user_id": 596757, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ArcqZ.jpg?s=128&g=1", "display_name": "Sadiksha Gautam", "link": "https://stackoverflow.com/users/596757/sadiksha-gautam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 723, "favorite_count": 0, "accepted_answer_id": 28624747, "answer_count": 1, "score": 1, "last_activity_date": 1440697925, "creation_date": 1423698550, "last_edit_date": 1440697925, "question_id": 28466834, "link": "https://stackoverflow.com/questions/28466834/unable-to-install-gosu-library-in-ruby-in-linux", "title": "unable to install Gosu library in Ruby in Linux", "body": "<p>I am getting this error when I am trying to install gosu on Ubuntu 13.10</p>\n\n<pre><code>Fetching gem metadata from https://rubygems.org/.........\nFetching version metadata from https://rubygems.org/..\nResolving dependencies...\nUsing diff-lcs 1.2.5\n\nGem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.\n\n        /usr/bin/ruby1.9.1 extconf.rb \nThe Gosu gem requires some libraries to be installed system-wide.\nSee the following site for a list:\nhttps://github.com/jlnr/gosu/wiki/Getting-Started-on-Linux\n\nchecking for TTF_RenderUTF8_Blended() in -lSDL2_ttf... yes\nchecking for SDL_ttf.h... yes\nchecking for FreeImage_ConvertFromRawBits() in -lfreeimage... yes\nchecking for FreeImage.h... yes\nchecking for main() in -lopenal... no\ncreating Makefile\n\nmake\ncompiling gosu_wrap.cxx\nIn file included from /usr/include/ruby-1.9.1/ruby.h:32:0,\n                 from gosu_wrap.cxx:850:\ngosu_wrap.cxx: In function \u2018void Gosu::loadBitmap(Gosu::Bitmap&amp;, VALUE)\u2019:\n/usr/include/ruby-1.9.1/ruby/ruby.h:675:31: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\n      RSTRING(str)-&gt;as.heap.len)\n                               ^\n</code></pre>\n\n<p>I tried adding every library from <a href=\"https://github.com/jlnr/gosu/wiki/Getting-Started-on-Linux\" rel=\"nofollow\">https://github.com/jlnr/gosu/wiki/Getting-Started-on-Linux</a>, but I am still getting the above error. Can anyone please help me with this?</p>\n\n<p><strong>Edited</strong>:\nWhen I check for status of installed packages as</p>\n\n<pre><code> dpkg -s gcc libsdl2-dev libsdl2-ttf-dev libpango1.0-dev libgl1-mesa-dev libfreeimage-dev libopenal-dev libsndfile-dev | grep Status\n</code></pre>\n\n<p>I get the following status:</p>\n\n<pre><code>Status: install ok installed\ndpkg-query: package 'libsdl2-ttf-dev' is not installed and no information is available\nStatus: install ok installed\nStatus: install ok installed\nStatus: install ok installed\ndpkg-query: package 'libopenal-dev' is not installed and no information is available\nStatus: install ok installed\ndpkg-query: package 'libsndfile-dev' is not installed and no information is available\nUse dpkg --info (= dpkg-deb --info) to examine archive files,\nand dpkg --contents (= dpkg-deb --contents) to list their contents.\n</code></pre>\n\n<p>So, libsdl2-ttf-dev and libsndfile-dev are not installed. I tried installing these packages with <code>apt-get install</code>, but was unable to install them as it says the packages could not be found in any sources.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1423702946, "post_id": 28466705, "comment_id": 45260485, "body": "Are the keys to be <code>&quot;key1&quot;</code> and <code>&quot;key2&quot;</code>, or the values of variables <code>key1</code> and <code>key2</code>? Are the values to be <code>&quot;value1&quot;</code> and <code>&quot;value2&quot;</code> or <code>&quot;\\&quot;value1\\&quot;&quot;</code> and <code>&quot;\\&quot;value2\\&quot;&quot;</code>?"}, {"owner": {"reputation": 195223, "user_id": 48523, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1c787bc735dbe80ec2f88824e1d10c6c?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/48523/andrew"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1423704651, "post_id": 28466705, "comment_id": 45260969, "body": "The values should be <code>value1</code> not <code>&quot;value1&quot;</code>"}, {"owner": {"reputation": 450, "user_id": 288261, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f3e4e56d2552921ee26e3df2395b920b?s=128&d=identicon&r=PG", "display_name": "Ninjarabbi", "link": "https://stackoverflow.com/users/288261/ninjarabbi"}, "edited": false, "score": 0, "creation_date": 1423726292, "post_id": 28466705, "comment_id": 45267596, "body": "I edited my answer to handle the superfluous quotation marks. Basically you just add <code>.tr(&#39;&quot;&#39;,&#39;&#39;)</code> to the original before everything else."}], "answers": [{"comments": [{"owner": {"reputation": 195223, "user_id": 48523, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1c787bc735dbe80ec2f88824e1d10c6c?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/48523/andrew"}, "edited": false, "score": 0, "creation_date": 1423705009, "post_id": 28466782, "comment_id": 45261059, "body": "not sure why a down vote...I&#39;ll give you an up vote because it works!"}], "tags": [], "owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "is_accepted": false, "score": 0, "last_activity_date": 1423700662, "last_edit_date": 1423700662, "creation_date": 1423698276, "answer_id": 28466782, "question_id": 28466705, "link": "https://stackoverflow.com/questions/28466705/how-to-turn-a-string-of-keys-and-values-into-a-ruby-hash/28466782#28466782", "title": "How to turn a string of keys and values into a Ruby hash?", "body": "<p>How about this bit: </p>\n\n<pre><code>original.split.each_with_object({}) do |el, h| \n   parts = el.split(\"=\")\n   h[parts.first] = parts.last.gsub(\"\\\"\", '') \nend\n\n=&gt; {\n  \"key1\" =&gt; \"value1\",\n  \"key2\" =&gt; \"value2\"\n}\n</code></pre>\n\n<p>I suggest you have a look at the <code>Enumerable</code> module, and it's <code>each_with_object</code> used here: <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-each_with_object\" rel=\"nofollow\">http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-each_with_object</a></p>\n"}, {"comments": [{"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1423698616, "post_id": 28466828, "comment_id": 45259207, "body": "<code>.to_h</code> is not an Array defined method for Ruby &lt; 2.2."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1423698680, "post_id": 28466828, "comment_id": 45259233, "body": "@dgilperez I don&#39;t know whether you are dreaming. <code>to_h</code> is an Array method."}, {"owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "reply_to_user": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 1, "creation_date": 1423698726, "post_id": 28466828, "comment_id": 45259244, "body": "@dgilperez It is in Ruby 2.2+."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1423699000, "post_id": 28466828, "comment_id": 45259333, "body": "To all the readers of this thread that came later: The original comment by  dgilperez did not say what it says now.  It said &quot;\t <code>.to_h</code> is not an Array defined method.&quot; Furthermore, dgilperez had somehow downvoted this answer, then retracted."}, {"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1423699257, "post_id": 28466828, "comment_id": 45259439, "body": "@sawa I change the comment to avoid confusion for others, but I revert that change just ahead. I just don&#39;t get your attitude: you reject my revision on the answer adding the note &quot;On Ruby 2.2+ only:&quot; which is just right, and probably downvote my working solution ... apart from unpolite, you&#39;re not being helpful to others. Maybe you can clarify that."}, {"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1423699324, "post_id": 28466828, "comment_id": 45259451, "body": "@sawa I didn&#39;t &quot;somehow&quot; downvoted, I <b>did</b> downvoted it as long as I thought it was just wrong. When I learned that it was a Ruby version issue, I removed my downvote because I changed my mind. How is that wrong in your opinion?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1423699426, "post_id": 28466828, "comment_id": 45259479, "body": "@dgilperez No need to mention Ruby 2.2+ only, which is the current version. If you are mentioning something about an older version, then that needs special note."}, {"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1423699632, "post_id": 28466828, "comment_id": 45259555, "body": "@sawa well, that&#39;s just a very questionable opinion. Ruby 2.2 was released less than 2 months ago and there are many of people out there not updated yet. I&#39;m one of those. I think that the note is helpful and that is why I added it. I just think you&#39;re acting a bit too rude and still don&#39;t get why. I hope you reconsider your attitude."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1423701854, "post_id": 28466828, "comment_id": 45260185, "body": "This returns <code>{&quot;key1&quot;=&gt;&quot;\\&quot;value1\\&quot;&quot;, &quot;key2&quot;=&gt;&quot;\\&quot;value2\\&quot;&quot;} </code>.  The question is not clear as to whether the keys are to be strings, but I expect the values are to be <code>&quot;value1&quot;</code> and <code>&quot;value2&quot;</code>."}], "tags": [], "owner": {"reputation": 450, "user_id": 288261, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f3e4e56d2552921ee26e3df2395b920b?s=128&d=identicon&r=PG", "display_name": "Ninjarabbi", "link": "https://stackoverflow.com/users/288261/ninjarabbi"}, "is_accepted": false, "score": 2, "last_activity_date": 1423702343, "last_edit_date": 1423702343, "creation_date": 1423698516, "answer_id": 28466828, "question_id": 28466705, "link": "https://stackoverflow.com/questions/28466705/how-to-turn-a-string-of-keys-and-values-into-a-ruby-hash/28466828#28466828", "title": "How to turn a string of keys and values into a Ruby hash?", "body": "<pre><code>items_hash = original.tr('\"','').split.collect {|i| i.split('=')}.to_h\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1423698811, "post_id": 28466888, "comment_id": 45259268, "body": "It will work, but your <code>*</code> and <code>flatten</code> is redundant."}, {"owner": {"reputation": 7553, "user_id": 128977, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc3ee45902521594d55e2b8e3de5cf8e?s=128&d=identicon&r=PG", "display_name": "DreadPirateShawn", "link": "https://stackoverflow.com/users/128977/dreadpirateshawn"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1423699110, "post_id": 28466888, "comment_id": 45259380, "body": "No... you get different results without <code>flatten</code>. Instead of the desired output, you get <code>{[&quot;key1&quot;, &#39;&quot;value1&quot;&#39;] =&gt; [&quot;key2&quot;, &#39;&quot;value2&quot;&#39;]}</code> -- that is, the first key/value as the new hash&#39;s key, and the next key/value as the new hash&#39;s value."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1423699220, "post_id": 28466888, "comment_id": 45259422, "body": "I did not intend each of them is redundant separately. I said they are redundant together."}, {"owner": {"reputation": 7553, "user_id": 128977, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc3ee45902521594d55e2b8e3de5cf8e?s=128&d=identicon&r=PG", "display_name": "DreadPirateShawn", "link": "https://stackoverflow.com/users/128977/dreadpirateshawn"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1423699478, "post_id": 28466888, "comment_id": 45259498, "body": "Ahhh... yes, yes they are. Much obliged!"}, {"owner": {"reputation": 195223, "user_id": 48523, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1c787bc735dbe80ec2f88824e1d10c6c?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/48523/andrew"}, "edited": false, "score": 0, "creation_date": 1423704743, "post_id": 28466888, "comment_id": 45260993, "body": "This is close, but it still needs to remove the double quotes around the value strings. The result should be <code>{&quot;key1&quot;=&gt;&quot;value1&quot;}</code> not <code>{&quot;key1&quot;=&gt;&quot;\\&quot;value1\\&quot;&quot;}</code>"}], "tags": [], "owner": {"reputation": 7553, "user_id": 128977, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc3ee45902521594d55e2b8e3de5cf8e?s=128&d=identicon&r=PG", "display_name": "DreadPirateShawn", "link": "https://stackoverflow.com/users/128977/dreadpirateshawn"}, "is_accepted": false, "score": 2, "last_activity_date": 1423699428, "last_edit_date": 1423699428, "creation_date": 1423698776, "answer_id": 28466888, "question_id": 28466705, "link": "https://stackoverflow.com/questions/28466705/how-to-turn-a-string-of-keys-and-values-into-a-ruby-hash/28466888#28466888", "title": "How to turn a string of keys and values into a Ruby hash?", "body": "<pre><code>Hash[original.split.collect {|i| i.split('=')}]\n</code></pre>\n\n<p>First, <code>split</code> gives you an array of each <code>key=\"value\"</code>:</p>\n\n<pre><code>&gt; original.split\n=&gt; [\"key1=\\\"value1\\\"\", \"key2=\\\"value2\\\"\"]\n</code></pre>\n\n<p>Then, <code>collect</code> + <code>split</code> turns each <code>key=\"value\"</code> sub-array into an array of <code>[key,value]</code>:</p>\n\n<pre><code>&gt; original.split.collect {|i| i.split('=')}\n=&gt; [[\"key1\", \"\\\"value1\\\"\"], [\"key2\", \"\\\"value2\\\"\"]]\n</code></pre>\n\n<p>Lastly, pass to the Hash constructor:</p>\n\n<pre><code>&gt; Hash[original.split.collect {|i| i.split('=')}]\n=&gt; {\"key2\"=&gt;\"\\\"value2\\\"\", \"key1\"=&gt;\"\\\"value1\\\"\"}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "is_accepted": true, "score": 3, "last_activity_date": 1423698846, "creation_date": 1423698846, "answer_id": 28466901, "question_id": 28466705, "link": "https://stackoverflow.com/questions/28466705/how-to-turn-a-string-of-keys-and-values-into-a-ruby-hash/28466901#28466901", "title": "How to turn a string of keys and values into a Ruby hash?", "body": "<p>If you can assume that the quotes around values are properly balanced and you'll never have an escaped quote in a value, it's pretty easy with a regexp:</p>\n\n<pre><code>Hash[*'key1=\"value1\" key2=\"value2\"'.scan(/(\\b.*?)=(\".*?\")/).flatten]\n# =&gt; {\"key1\"=&gt;\"\\\"value1\\\"\", \"key2\"=&gt;\"\\\"value2\\\"\"}\n</code></pre>\n\n<p>Or in Ruby 2.2:</p>\n\n<pre><code>'key1=\"value1\" key2=\"value2\"'.scan(/(\\b.*?)=(\".*?\")/).to_h\n</code></pre>\n\n<p>Otherwise, if you want to just split on the = and you'll never have a space in a value:</p>\n\n<pre><code>'key1=\"value1\" key2=\"value2\"'.split.map {|pair| pair.split \"=\", 2 }.to_h\n</code></pre>\n\n<p>If you might have spaces in values, then you're going to actually need to write a stateful parser.</p>\n"}], "owner": {"reputation": 195223, "user_id": 48523, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1c787bc735dbe80ec2f88824e1d10c6c?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/48523/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "accepted_answer_id": 28466901, "answer_count": 4, "score": 0, "last_activity_date": 1423702343, "creation_date": 1423697900, "question_id": 28466705, "link": "https://stackoverflow.com/questions/28466705/how-to-turn-a-string-of-keys-and-values-into-a-ruby-hash", "title": "How to turn a string of keys and values into a Ruby hash?", "body": "<p>I have a string which contains keys and values:</p>\n\n<pre><code>original = 'key1=\"value1\" key2=\"value2\"'\n</code></pre>\n\n<p>I have started by splitting on the spaces:</p>\n\n<pre><code>items = original.split\n=&gt; ['key1=\"value1\"', 'key2=\"value2\"']\n</code></pre>\n\n<p>But now I'm stuck trying to find a clean way to turn this into a hash. How can I easily turn this original string of keys and values into a hash of keys and values?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "api", "devise", "grape-api"], "comments": [{"owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "edited": false, "score": 1, "creation_date": 1423696439, "post_id": 28466270, "comment_id": 45258398, "body": "You can&#39;t call that before block all the time since it will block the authentication api call you&#39;re trying to make in the first place."}, {"owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "edited": false, "score": 1, "creation_date": 1423698751, "post_id": 28466270, "comment_id": 45259249, "body": "Did you make a typo or is it complaining about <code>ensure_authentication_token!</code> when you have defined <code>ensure_authentication_token</code> (bang vs non bang methods)?"}], "answers": [{"comments": [{"owner": {"reputation": 857, "user_id": 2232620, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/843451a0b102eb186b3494e6a009e9e1?s=128&d=identicon&r=PG", "display_name": "Coherent", "link": "https://stackoverflow.com/users/2232620/coherent"}, "edited": false, "score": 0, "creation_date": 1423720632, "post_id": 28469635, "comment_id": 45265253, "body": "Thanks for the response! So in this case, I&#39;d probably want the non bang/! version for all cases, right?"}, {"owner": {"reputation": 3597, "user_id": 2112512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9689bb4f705b8bede56deddf66c87ef?s=128&d=identicon&r=PG", "display_name": "Jake Worth", "link": "https://stackoverflow.com/users/2112512/jake-worth"}, "reply_to_user": {"reputation": 857, "user_id": 2232620, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/843451a0b102eb186b3494e6a009e9e1?s=128&d=identicon&r=PG", "display_name": "Coherent", "link": "https://stackoverflow.com/users/2232620/coherent"}, "edited": false, "score": 1, "creation_date": 1423752646, "post_id": 28469635, "comment_id": 45283340, "body": "Either one is fine, they just have to be the same. Since there is no bang in the method, I&#39;d go with no bang. You are saving the record on the next line of the controller anyway, which is what the bang means to Devise.  More info: <a href=\"http://ruby-doc.org//gems/docs/d/dcu-devise-1.0.7/Devise/Models/TokenAuthenticatable.html\" rel=\"nofollow noreferrer\">ruby-doc.org//gems/docs/d/dcu-devise-1.0.7/Devise/Models/&hellip;</a>"}], "tags": [], "owner": {"reputation": 3597, "user_id": 2112512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9689bb4f705b8bede56deddf66c87ef?s=128&d=identicon&r=PG", "display_name": "Jake Worth", "link": "https://stackoverflow.com/users/2112512/jake-worth"}, "is_accepted": true, "score": 2, "last_activity_date": 1423717191, "last_edit_date": 1495534193, "creation_date": 1423717191, "answer_id": 28469635, "question_id": 28466270, "link": "https://stackoverflow.com/questions/28466270/configuring-rails-grape-api-with-devise-token/28469635#28469635", "title": "Configuring rails grape api with devise token", "body": "<p>In your User model, you define a method called <code>ensure_authentication_token</code>.</p>\n\n<p>In your Session controller, you call a method called <code>ensure_authentication_token!</code>.</p>\n\n<p>These are not the same method: <a href=\"https://stackoverflow.com/questions/612189/why-are-exclamation-marks-used-in-ruby-methods\">Why are exclamation marks used in Ruby methods?</a></p>\n\n<p>This is preventing you from generating an authentication token, which probably explains the \"401 Unauthorized, 401\" error.</p>\n"}], "owner": {"reputation": 857, "user_id": 2232620, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/843451a0b102eb186b3494e6a009e9e1?s=128&d=identicon&r=PG", "display_name": "Coherent", "link": "https://stackoverflow.com/users/2232620/coherent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1276, "favorite_count": 0, "accepted_answer_id": 28469635, "answer_count": 1, "score": 0, "last_activity_date": 1423717191, "creation_date": 1423695761, "last_edit_date": 1423716626, "question_id": 28466270, "link": "https://stackoverflow.com/questions/28466270/configuring-rails-grape-api-with-devise-token", "title": "Configuring rails grape api with devise token", "body": "<p>I am trying to configure token generation with devise in a grape api rails app. Since I have the current version of devise, token generation has been disabled. I am having several issues. First, is that when I submit a username and password to the sessions controller, it gives me an error that \"ensure_authentication_token\":</p>\n\n<pre><code>undefined method `ensure_authentication_token!' for #&lt;User:0x007f880cca9090&gt;\n</code></pre>\n\n<p>This is so strange because as you can see below, I have it defined in my user model and when I manually create Users in rails console, it works properly.</p>\n\n<p>Is that a scope issue or why is that occurring?</p>\n\n<p>User Model:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  before_save :ensure_authentication_token\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n\n\n  def ensure_authentication_token\n    if authentication_token.blank?\n      self.authentication_token = generate_authentication_token\n    end\n  end\n\n  private\n\n    def generate_authentication_token\n      loop do\n        token = Devise.friendly_token\n        break token unless User.where(authentication_token: token).first\n      end\n    end\nend\n</code></pre>\n\n<p>Sessions Grape API Controller:</p>\n\n<pre><code>module API\n  module V1\n    class Sessions &lt; Grape::API\n      include API::V1::Defaults\n\n      resource :sessions do\n\n        params do\n          requires :email, type: String, desc: \"Email\"\n          requires :password, type: String, desc: \"Password\"\n        end\n\n       post do\n         email = params[:email]\n         password = params[:password]\n\n         if email.nil? or password.nil?\n           error!({error_code: 404, error_message: \"Invalid Email or Password.\"},401)\n           return\n         end\n\n         user = User.where(email: email.downcase).first\n         if user.nil?\n           error!({error_code: 404, error_message: \"Invalid Email or Password.\"},401)\n           return\n         end\n\n         if !user.valid_password?(password)\n           error!({error_code: 404, error_message: \"Invalid Email or Password.\"},401)\n           return\n         else\n           user.ensure_authentication_token!\n           user.save\n           {status: 'ok', token: user.authentication_token}.to_json\n         end\n       end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>The second problem is that when I follow <a href=\"http://www.programmatic.me/blog/2014/11/14/making-devise-token-authenticable-work-with-grape-apis/\" rel=\"nofollow\">this blog</a>, it says that I need to add the following authentication check in my defaults.rb in the base api controller. When I add the \"before do\" section, I get access denied error even if I enter in the right credentials and it doesn't even go on to the rest of the sessions controller that I mentioned above.  </p>\n\n<pre><code>before do\n    error!(\"401 Unauthorized, 401\") unless authenticated\n  end\n\n  helpers do\n    def warden\n      env['warden']\n    end\n\n    def authenticated\n      return true if warden.authenticated?\n      params[:access_token] &amp;&amp; @user = User.find_by_authentication_token(params[:access_token])\n    end\n\n    def current_user\n      warden.user || @user\n    end\n  end\n</code></pre>\n\n<p>Thanks for any help you can give!</p>\n\n<p>EDIT: Phillip was absolutely correct that one of these issues was due to the bang versus non banged version of ensure_authentication_token. Removing the ! from the controller fixed that issue. The other problem was indeed from adding the \"before do\" loop I had.</p>\n\n<p>This is so close to working, I can give and receive tokens in my api but when it connects to ember, it complains about a lack of a csrf token even though I have \"protect_from_forgery with: :null_session\" set in my application.rb</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 4044606, "user_type": "registered", "profile_image": "https://graph.facebook.com/801540695/picture?type=large", "display_name": "David Rosillo", "link": "https://stackoverflow.com/users/4044606/david-rosillo"}, "edited": false, "score": 1, "creation_date": 1423750839, "post_id": 28466212, "comment_id": 45281992, "body": "I can&#39;t believe it was something so easy to fix... Thank you very much, I was struggling with this for various days, you saved my life :D"}], "tags": [], "owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "is_accepted": true, "score": 2, "last_activity_date": 1423695532, "creation_date": 1423695532, "answer_id": 28466212, "question_id": 28466024, "link": "https://stackoverflow.com/questions/28466024/stack-level-too-deep-with-devise/28466212#28466212", "title": "Stack level too deep with Devise", "body": "<p>This bit of code is the one causing the <code>Stack level too deep error</code>: </p>\n\n<pre><code>def params\n  params.require(:user).permit({:fecha_nacimiento=&gt;[]},:nombre,:apellido,:ciudad_id,:foto,:genero,:estatura)\nend\n</code></pre>\n\n<p>As long as you use the method name inside the method itself, you are making your method call itself recursively until ... boom! Rename your method name: </p>\n\n<pre><code>def update_params\n  params.require(:user).permit({:fecha_nacimiento=&gt;[]},:nombre,:apellido,:ciudad_id,:foto,:genero,:estatura)\nend\n</code></pre>\n\n<p>and you should be fine.</p>\n"}], "owner": {"reputation": 43, "user_id": 4044606, "user_type": "registered", "profile_image": "https://graph.facebook.com/801540695/picture?type=large", "display_name": "David Rosillo", "link": "https://stackoverflow.com/users/4044606/david-rosillo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 28466212, "answer_count": 1, "score": 2, "last_activity_date": 1423695532, "creation_date": 1423694766, "question_id": 28466024, "link": "https://stackoverflow.com/questions/28466024/stack-level-too-deep-with-devise", "title": "Stack level too deep with Devise", "body": "<p>I've been recently working on a user's account update using Devise, what I'm trying to do is permit parameters that are needed for the update. I did it before for sign_up by permitting parameters like so:</p>\n\n<pre><code>#application_controller.rb\ndef configure_permitted_parameters\n     devise_parameter_sanitizer.for(:sign_up) &lt;&lt; :nombre &lt;&lt; :apellido\n    end\n</code></pre>\n\n<p>Now, that works like a charm for when a user signs up and I thought that I could do the same to edit the user's information, so I did the following:</p>\n\n<pre><code>#application_controller.rb\ndef configure_permitted_parameters\n     devise_parameter_sanitizer.for(:edit)  &lt;&lt; :genero &lt;&lt; :estatura &lt;&lt; :ciudad_id &lt;&lt; :foto &lt;&lt; :nombre &lt;&lt; :apellido\n    end\n</code></pre>\n\n<p>Surprisingly this didn't work and I don't know why. I did the exact same as I did before and nothing happened. So then I started searching for different ways to edit the user's information, did what <a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-edit-their-account-without-providing-a-password\" rel=\"nofollow\">palaformatec recommends to do</a> and even looked at various questions here but I couldn't find an answer.</p>\n\n<p>My registrations_controller.rb looks like this:</p>\n\n<pre><code>#registrations_controller.rb\n    class RegistrationsController &lt; Devise::RegistrationsController\n\ndef update\n\n    self.resource = resource_class.to_adapter.get!(send(:\"current_#{resource_name}\").to_key)\n    prev_unconfirmed_email = resource.unconfirmed_email if resource.respond_to?(:unconfirmed_email)\n    resource_updated = update_resource(resource,account_update_params)\n    yield resource if block_given?\n    if resource_updated\n        if is_flashing_format?\n            flash_key = update_needs_confirmation?(resource, prev_unconfirmed_email) ?\n            :update_needs_confirmation : :updated\n            set_flash_message :notice, flash_key\n        end\n        sign_in resource_name, resource, bypass: true\n        respond_with resource, location: after_update_path_for(resource)\n    else\n        clean_up_passwords resource\n        respond_with resource\n    end\nend\n\nprotected\n\n    def params\n        params.require(:user).permit({:fecha_nacimiento=&gt;[]},:nombre,:apellido,:ciudad_id,:foto,:genero,:estatura)\n    end\n\n    def account_update_params\n        devise_parameter_sanitizer.for(:account_update) &lt;&lt; {:fecha_nacimiento =&gt; []} &lt;&lt; :genero &lt;&lt; :estatura &lt;&lt; :ciudad_id &lt;&lt; :foto &lt;&lt; :nombre &lt;&lt; :apellido\n    end\n    def update_resource(resource,params)\n        resource.update_without_password(params)\n    end\n\nend\n</code></pre>\n\n<p>I really don't know what else to do, I asked friends too and no one knows what happens. I know that a stack level too deep appears when an infinite loop is present, but neither me nor my friends have managed to identify what's causing it.</p>\n\n<p>If you need any more information I'll edit the question and add it for you.</p>\n\n<p>Thank you all in advance.</p>\n"}, {"tags": ["ruby", "arrays", "string", "int"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1423694092, "post_id": 28465819, "comment_id": 45257403, "body": "It does not affect the code, but what is &quot;seduku&quot;?"}, {"owner": {"reputation": 21521, "user_id": 78613, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0fa1dc97175c4cc1ea4ecf506119961c?s=128&d=identicon&r=PG", "display_name": "Nick Veys", "link": "https://stackoverflow.com/users/78613/nick-veys"}, "edited": false, "score": 0, "creation_date": 1423694185, "post_id": 28465819, "comment_id": 45257440, "body": "<a href=\"http://en.wikipedia.org/wiki/Sudoku\" rel=\"nofollow noreferrer\">Sudoku</a> misspelled.  Or perhaps alternatively spelled."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1423694259, "post_id": 28465819, "comment_id": 45257476, "body": "It does not affect the code, but what is &quot;sedoku&quot;?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 3, "creation_date": 1423694339, "post_id": 28465819, "comment_id": 45257510, "body": "Why not do <code>@initial_board = Array.new(81, &quot;_&quot;)</code> from the beginning?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1423697087, "post_id": 28465819, "comment_id": 45258660, "body": "That Sudoku would probably appear in the paper on a Monday."}], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1423694565, "post_id": 28465966, "comment_id": 45257618, "body": "You can do <code>x.zero?</code>."}, {"owner": {"reputation": 559, "user_id": 4073431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69606a076e7ece7d552b00fe6984a168?s=128&d=identicon&r=PG&f=1", "display_name": "Abraham Chan", "link": "https://stackoverflow.com/users/4073431/abraham-chan"}, "edited": false, "score": 0, "creation_date": 1423694651, "post_id": 28465966, "comment_id": 45257664, "body": "May as well use <code>map!</code>"}, {"owner": {"reputation": 420, "user_id": 2120790, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2e06e9b7c07e5bb1381879b7c6ec635c?s=128&d=identicon&r=PG", "display_name": "Josh", "link": "https://stackoverflow.com/users/2120790/josh"}, "edited": false, "score": 0, "creation_date": 1423696781, "post_id": 28465966, "comment_id": 45258541, "body": "Thank you all for the quick responses. I learned something today. ;)"}], "tags": [], "owner": {"reputation": 21521, "user_id": 78613, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0fa1dc97175c4cc1ea4ecf506119961c?s=128&d=identicon&r=PG", "display_name": "Nick Veys", "link": "https://stackoverflow.com/users/78613/nick-veys"}, "is_accepted": true, "score": 2, "last_activity_date": 1423694451, "creation_date": 1423694451, "answer_id": 28465966, "question_id": 28465819, "link": "https://stackoverflow.com/questions/28465819/replacing-integers-with-strings-within-an-array-ruby/28465966#28465966", "title": "Replacing integers with strings within an array Ruby", "body": "<p>As @sawa suggested in the comments, I'd default the array to <code>'_'</code>, but you can always just swap <code>0</code> for <code>'_'</code> as you print:</p>\n\n<pre><code>puts make_better.map { |x| x == 0 ? '_' : x }.join(' | ')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5397, "user_id": 1149074, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/2Bm6Y.jpg?s=128&g=1", "display_name": "shock_one", "link": "https://stackoverflow.com/users/1149074/shock-one"}, "is_accepted": false, "score": 1, "last_activity_date": 1423697151, "creation_date": 1423697151, "answer_id": 28466566, "question_id": 28465819, "link": "https://stackoverflow.com/questions/28465819/replacing-integers-with-strings-within-an-array-ruby/28466566#28466566", "title": "Replacing integers with strings within an array Ruby", "body": "<p>How about using classes? It'a an object oriented language, right? I guess the method <code>#to_s</code> could have been prettier, though.</p>\n\n<pre><code>class Grid\n  SIZE = 3\n\n  def initialize\n    @array = Array.new(3) { |line| Array.new(3) { |column| generator.call(line, column) } }\n  end\n\n  def generator\n    proc { '_' }\n  end\n\n  def to_a\n    @array\n  end\nend\n\nclass RandomGrid &lt; Grid\n  def generator\n    @random_numbers ||= (1..9).to_a.shuffle\n    proc { @random_numbers.shift }\n  end\nend\n\n\nclass DiagonalBoard &lt; Grid\n  def generator\n    proc { |line, column| (line == column ? RandomGrid : Grid).new }\n  end\n\n  def to_s\n    @array.map do |grids|\n      grids.map(&amp;:to_a).transpose.map do |rows|\n        rows.flatten.join('|')\n      end.join(\"\\n\")\n    end.join(\"\\n\")\n  end\nend\n\nputs DiagonalBoard.new\n</code></pre>\n\n<p>Outputs </p>\n\n<pre><code>9|2|8|_|_|_|_|_|_\n5|3|7|_|_|_|_|_|_\n1|4|6|_|_|_|_|_|_\n_|_|_|8|1|5|_|_|_\n_|_|_|6|2|9|_|_|_\n_|_|_|3|4|7|_|_|_\n_|_|_|_|_|_|2|9|1\n_|_|_|_|_|_|7|5|6\n_|_|_|_|_|_|3|8|4\n</code></pre>\n"}], "owner": {"reputation": 420, "user_id": 2120790, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2e06e9b7c07e5bb1381879b7c6ec635c?s=128&d=identicon&r=PG", "display_name": "Josh", "link": "https://stackoverflow.com/users/2120790/josh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "accepted_answer_id": 28465966, "answer_count": 2, "score": 0, "last_activity_date": 1423697151, "creation_date": 1423693854, "last_edit_date": 1423694200, "question_id": 28465819, "link": "https://stackoverflow.com/questions/28465819/replacing-integers-with-strings-within-an-array-ruby", "title": "Replacing integers with strings within an array Ruby", "body": "<p>Currently I have code that looks like:</p>\n\n<pre><code>def sudoku_generator\n\n  @initial_board = [0] * 81\n\n  a = (1..9).sort_by{rand}\n  b = (1..9).sort_by{rand}\n  c = (1..9).sort_by{rand}\n\n  @initial_board[0..2] = a[0..2]\n  @initial_board[9..11] = a[3..5]\n  @initial_board[18..20] = a[6..8]\n  @initial_board[30..32] = b[0..2]\n  @initial_board[39..41] = b[3..5]\n  @initial_board[48..50] = b[6..8]\n\n  @initial_board[60..62] = c[0..2]\n  @initial_board[69..71] = c[3..5]\n  @initial_board[78..80] = c[6..8]\n\n  @initial_board.each_slice(9) do |make_better|\n    puts make_better.join(' | ')\n  end\n\nend\n\nprint sudoku_generator\n</code></pre>\n\n<p>This returns:</p>\n\n<pre><code>3 | 7 | 9 | 0 | 0 | 0 | 0 | 0 | 0\n1 | 5 | 6 | 0 | 0 | 0 | 0 | 0 | 0\n2 | 8 | 4 | 0 | 0 | 0 | 0 | 0 | 0\n0 | 0 | 0 | 1 | 5 | 8 | 0 | 0 | 0\n0 | 0 | 0 | 6 | 7 | 2 | 0 | 0 | 0\n0 | 0 | 0 | 3 | 4 | 9 | 0 | 0 | 0\n0 | 0 | 0 | 0 | 0 | 0 | 5 | 1 | 3\n0 | 0 | 0 | 0 | 0 | 0 | 4 | 8 | 7\n0 | 0 | 0 | 0 | 0 | 0 | 6 | 2 | 9\n</code></pre>\n\n<p>I am trying to find a way to now replace the zeros within this array with underscores \"_\". Any feedback would be appreciated. Thanks.</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 1, "creation_date": 1423692301, "post_id": 28465340, "comment_id": 45256495, "body": "Which is the result you want to achieve after the regex?"}, {"owner": {"reputation": 427, "user_id": 2956587, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6e5220dc3e0686e4b4773f5f88ef144c?s=128&d=identicon&r=PG", "display_name": "YoDK", "link": "https://stackoverflow.com/users/2956587/yodk"}, "reply_to_user": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1423706153, "post_id": 28465340, "comment_id": 45261359, "body": "Maybe a regex is not what I&#39;m looking for. I basically want <code>[some_number]</code> to be a wildcard."}, {"owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 0, "creation_date": 1423706280, "post_id": 28465340, "comment_id": 45261396, "body": "In general, when you open a file you can&#39;t use wildcard; you have to give the actual file name, and a relative or absolute path to it.  It sounds like you are hoping for <code>FileUtils.rm</code> to have some feature it doesn&#39;t have.  I don&#39;t know what you are trying to do, but maybe a good general strategy would be to get a directory listing, use a regex to search it for the files that are interesting, and then perform some action on those files."}, {"owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 1, "creation_date": 1423706398, "post_id": 28465340, "comment_id": 45261426, "body": "You might try using something like <code>Dir.glob(&#39;abcd_*.png&#39;)</code>; maybe you don&#39;t need the powerful features of regexes."}, {"owner": {"reputation": 427, "user_id": 2956587, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6e5220dc3e0686e4b4773f5f88ef144c?s=128&d=identicon&r=PG", "display_name": "YoDK", "link": "https://stackoverflow.com/users/2956587/yodk"}, "reply_to_user": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 0, "creation_date": 1423707799, "post_id": 28465340, "comment_id": 45261797, "body": "@DavidGrayson you&#39;re right. I don&#39;t need a regex at all (sorry for the wild goose chase folks). Looks like I can get exactly what I need from <code>newFileName = Dir.glob(&quot;#{variable_name_}*.png&quot;).first</code> then <code>Image.from_file(&quot;path&#47;to_file&#47;#{$newFileName}&quot;)</code> etc. Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "edited": false, "score": 2, "creation_date": 1423692818, "post_id": 28465546, "comment_id": 45256783, "body": "No need for <code>[\\d]+</code>.  You can just do <code>\\d+</code>."}, {"owner": {"reputation": 427, "user_id": 2956587, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6e5220dc3e0686e4b4773f5f88ef144c?s=128&d=identicon&r=PG", "display_name": "YoDK", "link": "https://stackoverflow.com/users/2956587/yodk"}, "edited": false, "score": 0, "creation_date": 1423693243, "post_id": 28465546, "comment_id": 45257021, "body": "Sorry, I should be clearer. It needs to be in a string.      (&quot;path/to_file\\/#{$variable_name}_\\d+\\.png&quot;)  ends up as     path/to_file/variable_name_d+.png"}, {"owner": {"reputation": 1333, "user_id": 1073889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JfbGr.jpg?s=128&g=1", "display_name": "RipTheJacker", "link": "https://stackoverflow.com/users/1073889/ripthejacker"}, "edited": false, "score": 1, "creation_date": 1423693713, "post_id": 28465546, "comment_id": 45257262, "body": "Can you clarify your goal a bit. Are you trying to create a regex to use with something like grep, or are you trying to create a string that replaces \\d with a number?"}, {"owner": {"reputation": 427, "user_id": 2956587, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6e5220dc3e0686e4b4773f5f88ef144c?s=128&d=identicon&r=PG", "display_name": "YoDK", "link": "https://stackoverflow.com/users/2956587/yodk"}, "edited": false, "score": 0, "creation_date": 1423695124, "post_id": 28465546, "comment_id": 45257851, "body": "no, my string already has a number in it. I want to find the string no matter what number it is."}, {"owner": {"reputation": 1333, "user_id": 1073889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JfbGr.jpg?s=128&g=1", "display_name": "RipTheJacker", "link": "https://stackoverflow.com/users/1073889/ripthejacker"}, "edited": false, "score": 1, "creation_date": 1423696054, "post_id": 28465546, "comment_id": 45258253, "body": "Ok, but what are you trying to do with the string? Say your string is &quot;path/to_file/file_a_1234\\.png&quot;, what is the goal?"}, {"owner": {"reputation": 427, "user_id": 2956587, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6e5220dc3e0686e4b4773f5f88ef144c?s=128&d=identicon&r=PG", "display_name": "YoDK", "link": "https://stackoverflow.com/users/2956587/yodk"}, "edited": false, "score": 0, "creation_date": 1423705400, "post_id": 28465546, "comment_id": 45261172, "body": "I&#39;m going to end up manipulating the image in something like Image Magick or just for arguments sake, delete it."}, {"owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 0, "creation_date": 1423706117, "post_id": 28465546, "comment_id": 45261355, "body": "What do you mean by &quot;find the string&quot;?  To me, the word &quot;find&quot; implies there is some collection of strings you are searching through.  Are you searching through a directory listing?  Could you edit the question above to give some example inputs and outputs?"}], "tags": [], "owner": {"reputation": 1333, "user_id": 1073889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JfbGr.jpg?s=128&g=1", "display_name": "RipTheJacker", "link": "https://stackoverflow.com/users/1073889/ripthejacker"}, "is_accepted": false, "score": 4, "last_activity_date": 1423693637, "last_edit_date": 1423693637, "creation_date": 1423692736, "answer_id": 28465546, "question_id": 28465340, "link": "https://stackoverflow.com/questions/28465340/using-wildcards-in-a-ruby-string/28465546#28465546", "title": "Using wildcards in a Ruby string", "body": "<p>You can have variables in regexes in ruby: <code>/#{$variable_name}_\\d+\\.png/</code></p>\n"}], "owner": {"reputation": 427, "user_id": 2956587, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6e5220dc3e0686e4b4773f5f88ef144c?s=128&d=identicon&r=PG", "display_name": "YoDK", "link": "https://stackoverflow.com/users/2956587/yodk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 849, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1423928617, "creation_date": 1423691885, "last_edit_date": 1423928617, "question_id": 28465340, "link": "https://stackoverflow.com/questions/28465340/using-wildcards-in-a-ruby-string", "title": "Using wildcards in a Ruby string", "body": "<p>Let's say I have something like:</p>\n\n<pre><code>Image.from_file(\"path/to_file/#{$variable_name}_[some_number].png\")\n</code></pre>\n\n<p>I don't know what <code>[some_number]</code> will be, but I know that it will always be there.</p>\n\n<p>How can I write a regex (presumably) so that it doesn't matter what <code>[some_number]</code> is?</p>\n\n<p>Thanks.</p>\n\n<p>--- edit ---</p>\n\n<p>@DavidGrayson you're right. I don't need a regex at all (sorry for the wild goose chase folks). </p>\n\n<p>Looks like I can get exactly what I need from <code>newFileName = Dir.glob(\"#{variable_name}_*.png\").first</code> then <code>Image.from_file(\"path/to_file/#{$newFileName}\")</code> etc. </p>\n\n<p>Thanks to everyone who tried to help.</p>\n"}, {"tags": ["html", "ruby", "erb"], "answers": [{"tags": [], "owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "is_accepted": true, "score": 8, "last_activity_date": 1423692395, "creation_date": 1423692395, "answer_id": 28465455, "question_id": 28465329, "link": "https://stackoverflow.com/questions/28465329/how-can-i-add-a-whitespace-to-a-string-in-erb/28465455#28465455", "title": "How can I add a whitespace to a string in erb?", "body": "<p>Try this: </p>\n\n<pre><code>&lt;%= link_to \"&amp;nbsp;#{@teacher.id + 1}\".html_safe, \"#\" %&gt;\n</code></pre>\n\n<p>Reference: <a href=\"http://apidock.com/rails/String/html_safe\" rel=\"noreferrer\">http://apidock.com/rails/String/html_safe</a></p>\n"}], "owner": {"reputation": 831, "user_id": 4534483, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6cc55b0239247898d3d30e712cdbcdf5?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Caros", "link": "https://stackoverflow.com/users/4534483/jeff-caros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1468, "favorite_count": 1, "accepted_answer_id": 28465455, "answer_count": 1, "score": 2, "last_activity_date": 1423692395, "creation_date": 1423691855, "question_id": 28465329, "link": "https://stackoverflow.com/questions/28465329/how-can-i-add-a-whitespace-to-a-string-in-erb", "title": "How can I add a whitespace to a string in erb?", "body": "<p>I'm displaying a link as a string in erb:</p>\n\n<pre><code>&lt;%= link_to (@teacher.id + 1).to_s, \"#\" %&gt;\n</code></pre>\n\n<p>How can I add one space at the beginning?\nIf I do this: <code>\" \" + (@teacher.id + 1).to_s</code>, the space is ignored, and if I do this: <code>\"&amp;nbsp\" + (@teacher.id + 1).to_s</code> or this: <code>'&amp;nbsp' + (@teacher.id + 1).to_s</code>, it just interprets \"&amp;nbsp\" as a five-character string.</p>\n"}, {"tags": ["ruby", "timer"], "comments": [{"owner": {"reputation": 34664, "user_id": 390819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee2ef44de10f7791cca06df317246935?s=128&d=identicon&r=PG", "display_name": "Cristian Lupascu", "link": "https://stackoverflow.com/users/390819/cristian-lupascu"}, "edited": false, "score": 0, "creation_date": 1423689575, "post_id": 28464579, "comment_id": 45255061, "body": "I would try using the <a href=\"https://github.com/jmettraux/rufus-scheduler\" rel=\"nofollow noreferrer\">rufus-scheduler gem</a>. The <code>scheduler.every ... do ... end</code> sample listed there seems what you need."}, {"owner": {"reputation": 4022, "user_id": 1741325, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/amaxC.png?s=128&g=1", "display_name": "DaniG2k", "link": "https://stackoverflow.com/users/1741325/danig2k"}, "edited": false, "score": 0, "creation_date": 1423691977, "post_id": 28464579, "comment_id": 45256333, "body": "<code>def aMethod; p &#39;hi there&#39;; end; while true; aMethod; sleep 1; end</code>"}, {"owner": {"reputation": 59, "user_id": 4556418, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y-1UPE679OU/AAAAAAAAAAI/AAAAAAAAABc/rc9xxxpx6kQ/photo.jpg?sz=128", "display_name": "Ali Khan", "link": "https://stackoverflow.com/users/4556418/ali-khan"}, "reply_to_user": {"reputation": 34664, "user_id": 390819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee2ef44de10f7791cca06df317246935?s=128&d=identicon&r=PG", "display_name": "Cristian Lupascu", "link": "https://stackoverflow.com/users/390819/cristian-lupascu"}, "edited": false, "score": 0, "creation_date": 1423696004, "post_id": 28464579, "comment_id": 45258237, "body": "@w0lf, Thank you very much -- yes this is exactly what I was looking for. Works like a charm...wish I could &#39;upvote&#39; you/your answer."}, {"owner": {"reputation": 34664, "user_id": 390819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee2ef44de10f7791cca06df317246935?s=128&d=identicon&r=PG", "display_name": "Cristian Lupascu", "link": "https://stackoverflow.com/users/390819/cristian-lupascu"}, "edited": false, "score": 0, "creation_date": 1423732077, "post_id": 28464579, "comment_id": 45270472, "body": "@AliKhan I can&#39;t add this as an answer, because the question was marked as a duplicate. Anyway, I&#39;m glad my suggestion worked."}], "owner": {"reputation": 59, "user_id": 4556418, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y-1UPE679OU/AAAAAAAAAAI/AAAAAAAAABc/rc9xxxpx6kQ/photo.jpg?sz=128", "display_name": "Ali Khan", "link": "https://stackoverflow.com/users/4556418/ali-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 221, "favorite_count": 0, "closed_date": 1423690851, "answer_count": 0, "score": 2, "last_activity_date": 1425061046, "creation_date": 1423689129, "last_edit_date": 1423690998, "question_id": 28464579, "link": "https://stackoverflow.com/questions/28464579/how-to-call-a-method-every-x-seconds-in-rails", "closed_reason": "Duplicate", "title": "How to call a method every X seconds in Rails?", "body": "<p>How can I call a method say every 10 seconds? For example, I would like to call the <code>aMethod</code> of class <code>MyFile</code> every 10 seconds:</p>\n\n<pre><code>class MyFile\n  def aMethod\n    p 'hi there'\n  end\nend\n</code></pre>\n\n<p>How can I accomplish this? My Production environment is Windows, and I don't have Ruby/Rails installed on the Production server (the application is jruby and will be deployed as a WAR package onto a Tomcat webserver).</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1423691108, "post_id": 28464570, "comment_id": 45255864, "body": "Your code does not do anything in the first place. It is invalid."}, {"owner": {"reputation": 690, "user_id": 2992299, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y9CzE.jpg?s=128&g=1", "display_name": "CatsLoveJazz", "link": "https://stackoverflow.com/users/2992299/catslovejazz"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1423693324, "post_id": 28464570, "comment_id": 45257061, "body": "Fixed, apologies I copied it in wrong"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1423695903, "post_id": 28464570, "comment_id": 45258199, "body": "Suppose <code>array = [[1],[],[2],[3],[4],[5]]</code>, Your code prints <code>1</code> and then breaks.  That is consistent with how David and I interpreted the question.  @Neil&#39;s code using <code>compact</code> and <code>reject</code> print <code>1,2,3</code> and <code>1,2,3,4</code>, respectively, yet you accepted his answer.  Please explain."}], "answers": [{"comments": [{"owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 0, "creation_date": 1423689897, "post_id": 28464618, "comment_id": 45255245, "body": "None of these examples preserve the original behavior of the code, which is to break after seeing the first empty element, ignoring all elements after it."}, {"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "reply_to_user": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 1, "creation_date": 1423690070, "post_id": 28464618, "comment_id": 45255329, "body": "Good point. Although I wonder if <code>x.empty?</code> is spurious in OP&#39;s code (an attempt to not go beyond end of array, despite <code>.each</code> already doing the right thing there). In which case the first suggestion would be a match"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1423696052, "post_id": 28464618, "comment_id": 45258252, "body": "I believe the first one can be simplified to <code>puts array[0,4]</code>."}, {"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1423731551, "post_id": 28464618, "comment_id": 45270189, "body": "@CarySwoveland: Yes, although the <code>puts</code> is standing in for whatever processing OP really wants to do with <code>x</code>"}], "tags": [], "owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "is_accepted": true, "score": 2, "last_activity_date": 1423689647, "last_edit_date": 1423689647, "creation_date": 1423689266, "answer_id": 28464618, "question_id": 28464570, "link": "https://stackoverflow.com/questions/28464570/iterate-through-first-n-elements-of-array-if-that-many-exist/28464618#28464618", "title": "Iterate through first n elements of array - if that many exist", "body": "<p>I'd suggest <a href=\"http://ruby-doc.org//core-2.2.0/Array.html#method-i-first\" rel=\"nofollow\">Array#first</a> as follows:</p>\n\n<pre><code>array.first(4).each do |x|\n  puts x\nend\n</code></pre>\n\n<p>If you only want to accept the first so many non-nil entries, then filter them out using <a href=\"http://ruby-doc.org//core-2.2.0/Array.html#method-i-compact\" rel=\"nofollow\">Array#compact</a>:</p>\n\n<pre><code>array.compact.first(4).each do |x|\n  puts x\nend\n</code></pre>\n\n<p>If you are concerned about empty values then you could still chain the filters using <a href=\"http://ruby-doc.org//core-2.2.0/Array.html#method-i-reject\" rel=\"nofollow\">Array#reject</a>:</p>\n\n<pre><code>array.reject(&amp;:empty?).first(4).each do |x|\n  puts x\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1423693061, "post_id": 28464794, "comment_id": 45256912, "body": "Note both of these work when <code>array.size &lt; 4</code>. Consider using <code>i.any?</code> rather than <code>!i.empty?</code>. Also, <code>i</code> is perhaps not a good name for the block variable."}, {"owner": {"reputation": 11718, "user_id": 1827631, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/I24JN.png?s=128&g=1", "display_name": "hirolau", "link": "https://stackoverflow.com/users/1827631/hirolau"}, "edited": false, "score": 0, "creation_date": 1423741423, "post_id": 28464794, "comment_id": 45276160, "body": "Are you not missing <code>each</code> statements on both of those examples?"}], "tags": [], "owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "is_accepted": false, "score": 4, "last_activity_date": 1423763829, "last_edit_date": 1423763829, "creation_date": 1423689840, "answer_id": 28464794, "question_id": 28464570, "link": "https://stackoverflow.com/questions/28464570/iterate-through-first-n-elements-of-array-if-that-many-exist/28464794#28464794", "title": "Iterate through first n elements of array - if that many exist", "body": "<p>I saw that you were calling <code>#empty?</code> on the elements in your array and quitting when you see the first empty element.  If you want to preserve that behavior, you could do:</p>\n\n<pre><code>array.first(4).each do |x|\n  break if x.empty?\n  puts x\nend\n</code></pre>\n\n<p>A fancier way would be:</p>\n\n<pre><code>array.take_while { |i| !i.empty? }.first(4).each do |i|\n  puts i\nend\n</code></pre>\n\n<p>I am not sure how many elements you want to print; please note that my examples will print at most 4 elements, whereas your code was printing up to 5.</p>\n"}, {"comments": [{"owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 0, "creation_date": 1423701741, "post_id": 28465309, "comment_id": 45260158, "body": "I&#39;m pretty sure <code>printem [[1],[2],[3],[4],[5],[6],[]], 4</code> would fail the specification.  You would end up printing 6 elements."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 0, "creation_date": 1423702255, "post_id": 28465309, "comment_id": 45260286, "body": "Thanks for the catch,  @DavidGrayson. I believe it&#39;s OK now, but have a look."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1423702199, "last_edit_date": 1423702199, "creation_date": 1423691795, "answer_id": 28465309, "question_id": 28464570, "link": "https://stackoverflow.com/questions/28464570/iterate-through-first-n-elements-of-array-if-that-many-exist/28465309#28465309", "title": "Iterate through first n elements of array - if that many exist", "body": "<p>Another way:</p>\n\n<pre><code>def printem(a,n)\n  puts a[0, [a.index(&amp;:empty?) || n, n].min]\nend\n\nprintem [[], [2],[3],[4],[5],[6]], 4\n  # &lt;prints nothing&gt;\nprintem [[1],[2], [],[4],[5],[6]], 4\n  # 1\n  # 2\nprintem [[1],[2],[3],[4],[5],[6]], 4\n  # 1\n  # 2\n  # 3\n  # 4\nprintem [[1],[2],[3],[4],[5],[6]], 7\n  # 1\n  # 2\n  # 3\n  # 4\n  # 5\n  # 6\n</code></pre>\n"}], "owner": {"reputation": 690, "user_id": 2992299, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y9CzE.jpg?s=128&g=1", "display_name": "CatsLoveJazz", "link": "https://stackoverflow.com/users/2992299/catslovejazz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 28464618, "answer_count": 3, "score": 0, "last_activity_date": 1423763829, "creation_date": 1423689094, "last_edit_date": 1423693287, "question_id": 28464570, "link": "https://stackoverflow.com/questions/28464570/iterate-through-first-n-elements-of-array-if-that-many-exist", "title": "Iterate through first n elements of array - if that many exist", "body": "<p>I am looking for a more elegant, 'Ruby-ists' way to do the following. Is there any cleaner way to do this?</p>\n\n<pre><code>i=0\narray.each do |x|\n    break if x.empty?\n    puts x\n    i+=1\n    break if i&gt;4\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "jruby", "resque"], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 4556418, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y-1UPE679OU/AAAAAAAAAAI/AAAAAAAAABc/rc9xxxpx6kQ/photo.jpg?sz=128", "display_name": "Ali Khan", "link": "https://stackoverflow.com/users/4556418/ali-khan"}, "edited": false, "score": 0, "creation_date": 1423696515, "post_id": 28465186, "comment_id": 45258432, "body": "Thank you however I don&#39;t think foreman would fit the bill.   The problem is, my Windows production server will not have ruby installed on it so using rails/rake/foreman commands would not be possible from the terminal.   If you can suggest a method for starting the resque workers from within rails itself (I agree, I would like to kill the workers once the rails application has been stopped).  Thank you very much"}, {"owner": {"reputation": 1333, "user_id": 1073889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JfbGr.jpg?s=128&g=1", "display_name": "RipTheJacker", "link": "https://stackoverflow.com/users/1073889/ripthejacker"}, "reply_to_user": {"reputation": 59, "user_id": 4556418, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y-1UPE679OU/AAAAAAAAAAI/AAAAAAAAABc/rc9xxxpx6kQ/photo.jpg?sz=128", "display_name": "Ali Khan", "link": "https://stackoverflow.com/users/4556418/ali-khan"}, "edited": false, "score": 0, "creation_date": 1423699860, "post_id": 28465186, "comment_id": 45259641, "body": "Updated for your case."}, {"owner": {"reputation": 59, "user_id": 4556418, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y-1UPE679OU/AAAAAAAAAAI/AAAAAAAAABc/rc9xxxpx6kQ/photo.jpg?sz=128", "display_name": "Ali Khan", "link": "https://stackoverflow.com/users/4556418/ali-khan"}, "edited": false, "score": 0, "creation_date": 1423711635, "post_id": 28465186, "comment_id": 45262732, "body": "Thank you very much -- this is the exact same solution I eventually came up with as well. I placed this code into the initializer and it works like a charm."}], "tags": [], "owner": {"reputation": 1333, "user_id": 1073889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JfbGr.jpg?s=128&g=1", "display_name": "RipTheJacker", "link": "https://stackoverflow.com/users/1073889/ripthejacker"}, "is_accepted": false, "score": 1, "last_activity_date": 1423699848, "last_edit_date": 1423699848, "creation_date": 1423691321, "answer_id": 28465186, "question_id": 28464233, "link": "https://stackoverflow.com/questions/28464233/how-to-run-resquework-rake-task-from-rails-application/28465186#28465186", "title": "How to run &#39;resque:work&#39; rake task from rails application?", "body": "<p>That approach would make it difficult to turn off your resque workers. I recommend using a common gem called <a href=\"https://github.com/ddollar/foreman\" rel=\"nofollow\">foreman</a> to handle this. I'll let you look a the documentation, but your Procfile would look something like:</p>\n\n<pre><code>web: rails s -p $PORT\nresque: TERM_CHILD=1 QUEUES=* rake resque:work\n</code></pre>\n\n<p>And you would be able to start both rails and resque by just running the <code>foreman</code> command in console. That will also allow you to exit out of both easily.</p>\n\n<p><strong>Updated per OP's message:</strong></p>\n\n<pre><code>require 'resque/tasks'\nENV['TERM_CHILD'] = 1\nENV['QUEUES'] = '*'\nThread.new { Rake::Task[\"resque:work\"] }\n</code></pre>\n\n<p>The <code>Thread.new</code> is there because it would otherwise cause the rest of the app to never load. </p>\n"}], "owner": {"reputation": 59, "user_id": 4556418, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y-1UPE679OU/AAAAAAAAAAI/AAAAAAAAABc/rc9xxxpx6kQ/photo.jpg?sz=128", "display_name": "Ali Khan", "link": "https://stackoverflow.com/users/4556418/ali-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 881, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1423699848, "creation_date": 1423687833, "last_edit_date": 1423690515, "question_id": 28464233, "link": "https://stackoverflow.com/questions/28464233/how-to-run-resquework-rake-task-from-rails-application", "title": "How to run &#39;resque:work&#39; rake task from rails application?", "body": "<p>Having followed the rails-cast (<a href=\"http://railscasts.com/episodes/271-resque?view=comments\" rel=\"nofollow\">http://railscasts.com/episodes/271-resque?view=comments</a>), I was able to setup my rails application similarly with worker and rake tasks.</p>\n\n<p>However, as specified in the rails-cast, once I start my rails server, I have to issue the following command in a separate terminal window:</p>\n\n<pre><code>TERM_CHILD=1 QUEUES=* rake resque:work\n</code></pre>\n\n<p>This gets me up-and-running and I have no issues. However, instead of firing off a rake command on terminal (or writing a startup shell script), I would like to issue this terminal command (TERM_CHILD=1 QUEUES=* rake resque:work) from Rails itself when the application starts up so its available during the duration of the application's uptime on the server.</p>\n\n<p>I am in the process of learning Rails framework so I would greatly appreciate if you can give me some help and let me know how/where to place any code snippet you may provide me with.</p>\n\n<p>Thank you very much in advance.</p>\n\n<p>Here are my environment specs:</p>\n\n<ul>\n<li><p>I am using jruby (jruby 1.7.16.1 (1.9.3p392) 2014-10-28 4e93f31 on Java HotSpot(TM) 64-Bit Server VM 1.7.0_72-b14 +jit [linux-amd64])</p></li>\n<li><p>Rails version 4.1.8</p></li>\n<li><p>I am developing on LINUX ubuntu 14.04</p></li>\n<li>I will be deploying this application to Windows 2008 server on a Tomcat server as a WAR package</li>\n<li>I am using PostgreSQL as my database.</li>\n</ul>\n"}, {"tags": ["java", "ruby", "twitter", "nlp", "stanford-nlp"], "comments": [{"owner": {"reputation": 691, "user_id": 4540645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S9rLf.png?s=128&g=1", "display_name": "Qualtagh", "link": "https://stackoverflow.com/users/4540645/qualtagh"}, "edited": false, "score": 0, "creation_date": 1423716771, "post_id": 28464095, "comment_id": 45264078, "body": "Consider writing Java service (WSDL, SOAP, REST or simple TCP-based) and calling it from Ruby. This is the most usual way. If you&#39;re able to use JRuby, it seems to be simple to call Java methods directly. <a href=\"http://stackoverflow.com/questions/7284161/how-to-call-java-api-from-ruby-1-8-or-1-9\">Here</a> are described methods of calling Java code from Ruby without using JRuby but they are looking complicated."}, {"owner": {"reputation": 1823, "user_id": 1276696, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/98f5650b5fc00e31208e8a3db0066693?s=128&d=identicon&r=PG", "display_name": "diasks2", "link": "https://stackoverflow.com/users/1276696/diasks2"}, "edited": false, "score": 0, "creation_date": 1423717022, "post_id": 28464095, "comment_id": 45264160, "body": "Have you seen this <a href=\"https://github.com/louismullie/stanford-core-nlp\" rel=\"nofollow noreferrer\">Ruby port</a> of CoreNLP?"}, {"owner": {"reputation": 810, "user_id": 1525876, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/beca86871a3ff758b4592547390ee580?s=128&d=identicon&r=PG", "display_name": "herb", "link": "https://stackoverflow.com/users/1525876/herb"}, "reply_to_user": {"reputation": 1823, "user_id": 1276696, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/98f5650b5fc00e31208e8a3db0066693?s=128&d=identicon&r=PG", "display_name": "diasks2", "link": "https://stackoverflow.com/users/1276696/diasks2"}, "edited": false, "score": 0, "creation_date": 1423726502, "post_id": 28464095, "comment_id": 45267691, "body": "@diasks2, I think I have seen it, but based on the readme it doesn&#39;t look like it would have sentiment analysis implemented in it. I&#39;m very interested in the Deep Learning model CoreNLP claims to have in it by default: <a href=\"http://nlp.stanford.edu/sentiment/\" rel=\"nofollow noreferrer\">nlp.stanford.edu/sentiment</a>"}, {"owner": {"reputation": 1823, "user_id": 1276696, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/98f5650b5fc00e31208e8a3db0066693?s=128&d=identicon&r=PG", "display_name": "diasks2", "link": "https://stackoverflow.com/users/1276696/diasks2"}, "edited": false, "score": 0, "creation_date": 1423789670, "post_id": 28464095, "comment_id": 45302854, "body": "@herb <a href=\"https://github.com/someben/treebank/\" rel=\"nofollow noreferrer\">This</a> was referenced in the comments of your link &quot;Just released a quick Ruby module to parse &amp; import the sentiment treebank, see <a href=\"https://github.com/someben/treebank/\" rel=\"nofollow noreferrer\">github.com/someben/treebank</a> &quot; - I haven&#39;t looked at it in detail but might be worth checking out."}], "answers": [{"tags": [], "owner": {"reputation": 2852, "user_id": 1426569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zUIqz.png?s=128&g=1", "display_name": "oseiskar", "link": "https://stackoverflow.com/users/1426569/oseiskar"}, "is_accepted": false, "score": 0, "last_activity_date": 1423835471, "last_edit_date": 1423835471, "creation_date": 1423812761, "answer_id": 28494581, "question_id": 28464095, "link": "https://stackoverflow.com/questions/28464095/how-to-use-stanford-corenlp-java-library-with-ruby-for-sentiment-analysis/28494581#28494581", "title": "How to use Stanford CoreNLP java library with Ruby for sentiment analysis?", "body": "<p>You can at least avoid the ugly and dangerous command line stuff by using <code>IO.popen</code> to open and communicate with the external process, for example:</p>\n\n<pre><code>input_string = \"\nfoo\nbar\nbaz\n\"\n\noutput_string =\n    IO.popen(\"grep 'foo'\", 'r+') do |pipe|\n        pipe.write(input_string)\n        pipe.close_write\n        pipe.read\n    end\n\nputs \"grep said #{output_string.strip} but not bar\"\n</code></pre>\n\n<p>EDIT: to avoid the overhead of reloading the Java program on each item, you can open the pipe around the <code>todo.each</code> loop an communicate with the process like this</p>\n\n<pre><code>inputs = ['a', 'b', 'c', 'd']\n\nIO.popen('cat', 'r+') do |pipe|\n\n    inputs.each do |s|\n        pipe.write(s + \"\\n\")\n        out = pipe.readline\n\n        puts \"cat said '#{out.strip}'\"\n    end\nend\n</code></pre>\n\n<p>that is, if the Java program supports such line-buffered \"batch\" input. However, it should not be very difficult to modify it to do so, if not.</p>\n"}, {"tags": [], "owner": {"reputation": 810, "user_id": 1525876, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/beca86871a3ff758b4592547390ee580?s=128&d=identicon&r=PG", "display_name": "herb", "link": "https://stackoverflow.com/users/1525876/herb"}, "is_accepted": true, "score": 0, "last_activity_date": 1424608239, "creation_date": 1424608239, "answer_id": 28657816, "question_id": 28464095, "link": "https://stackoverflow.com/questions/28464095/how-to-use-stanford-corenlp-java-library-with-ruby-for-sentiment-analysis/28657816#28657816", "title": "How to use Stanford CoreNLP java library with Ruby for sentiment analysis?", "body": "<p>As suggested in the comments by @Qualtagh, I decided to use <strong>JRuby</strong>. </p>\n\n<p>I first attempted to use Java to use MongoDB as the interface (read directly from MongoDB, analyze with Java / CoreNLP and write back to MongoDB), but the MongoDB Java Driver was more complex to use than the Mongoid ORM I use with Ruby, so this is why I felt JRuby was more appropriate. </p>\n\n<p>Doing a REST service for Java would have required me first to learn how to do a REST service in Java, which might have been easy, or then not. I didn't want to spend time figuring that out.</p>\n\n<p>So the code I needed to do to run my code was:</p>\n\n<pre><code>  def analyze_tweet_with_corenlp_jruby\n    require 'java'\n    require 'vendor/CoreNLPTest2.jar' # I made this Java JAR with IntelliJ IDEA that includes both CoreNLP and my initialization class\n\n    analyzer = com.me.Analyzer.new # this is the Java class I made for running the CoreNLP analysis, it initializes the CoreNLP with the correct annotations etc.\n    result = analyzer.analyzeTweet(self.text) # self.text is where the text-to-be-analyzed resides\n\n    self.corenlp_sentiment = result # adds the result into this field in the MongoDB model\n    self.save!\n    return \"#{result}: #{self.text}\" # for debugging purposes\n  end\n</code></pre>\n"}], "owner": {"reputation": 810, "user_id": 1525876, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/beca86871a3ff758b4592547390ee580?s=128&d=identicon&r=PG", "display_name": "herb", "link": "https://stackoverflow.com/users/1525876/herb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 708, "favorite_count": 1, "accepted_answer_id": 28657816, "answer_count": 2, "score": 4, "last_activity_date": 1424608239, "creation_date": 1423687351, "question_id": 28464095, "link": "https://stackoverflow.com/questions/28464095/how-to-use-stanford-corenlp-java-library-with-ruby-for-sentiment-analysis", "title": "How to use Stanford CoreNLP java library with Ruby for sentiment analysis?", "body": "<p>I'm trying to do <strong>sentiment analysis</strong> on a <strong>large corpus of tweets</strong> in a local MongoDB instance with Ruby on Rails 4, Ruby 2.1.2 and Mongoid ORM.</p>\n\n<p>I've used the freely available <a href=\"https://loudelement-free-natural-language-processing-service.p.mashape.com\" rel=\"nofollow\">https://loudelement-free-natural-language-processing-service.p.mashape.com</a> API on Mashape.com, however it starts timing out after pushing through a few hundred tweets in rapid fire sequence -- clearly it isn't meant for going through tens of thousands of tweets and that's understandable.</p>\n\n<p>So next I thought I'd <strong>use the Stanford CoreNLP library</strong> promoted here: <a href=\"http://nlp.stanford.edu/sentiment/code.html\" rel=\"nofollow\">http://nlp.stanford.edu/sentiment/code.html</a></p>\n\n<p>The default usage, in addition to using the library in Java 1.8 code, seems to be to use XML input and output files. For my use case this is annoying given I have tens of thousands of short tweets as opposed to long text files. I would want to use CoreNLP like a method and do a tweets.each type of loop.</p>\n\n<p>I guess one way would be to construct an XML file with all of the tweets and then get one out of the Java process and parse that and put it back to the DB, but that feels alien to me and would be a lot of work.</p>\n\n<p>So, I was happy to find on the site linked above a way to <strong>run CoreNLP from the command line and accept the text as stdin</strong> so that I didn't have to start fiddling with the filesystem but rather feed the text as a parameter. However, starting up the JVM separately for each tweet adds a huge overhead compared to using the loudelement free sentiment analysis API.</p>\n\n<p>Now, the code I wrote is ugly and slow but it works. Still, I'm wondering if there's a better way to run the CoreNLP java program from within Ruby without having to start fiddling with the filesystem (creating temp files and giving them as params) or writing Java code?</p>\n\n<p>Here's the code I'm using:</p>\n\n<pre><code>def self.mass_analyze_w_corenlp # batch run the method in multiple Ruby processes\n  todo = Tweet.all.exists(corenlp_sentiment: false).limit(5000).sort(follow_ratio: -1) # start with the \"least spammy\" tweets based on follow ratio\n  counter = 0\n\n  todo.each do |tweet|\n    counter = counter+1\n\n    fork {tweet.analyze_sentiment_w_corenlp} # run the analysis in a separate Ruby process\n\n    if counter &gt;= 5 # when five concurrent processes are running, wait until they finish to preserve memory\n      Process.waitall\n      counter = 0\n    end\n\n  end\nend\n\ndef analyze_sentiment_w_corenlp # run the sentiment analysis for each tweet object\n  text_to_be_analyzed = self.text.gsub(\"'\"){\" \"}.gsub('\"'){' '} # fetch the text field of DB item strip quotes that confuse the command line\n\n  start = \"echo '\"\n  finish = \"' | java -cp 'vendor/corenlp/*' -mx250m edu.stanford.nlp.sentiment.SentimentPipeline -stdin\"\n  command_string = start+text_to_be_analyzed+finish # assemble the command for the command line usage below\n\n  output =`#{command_string}` # run the CoreNLP on the command line, equivalent to system('...')\n  to_db = output.gsub(/\\s+/, \"\").downcase # since CoreNLP uses indentation, remove unnecessary whitespace\n  # output is in the format of \"neutral, \"positive\", \"negative\" and so on\n\n  puts \"Sentiment analysis successful, sentiment is: #{to_db} for tweet #{text_to_be_analyzed}.\"\n\n  self.corenlp_sentiment = to_db # insert result as a field to the object\n  self.save! # sentiment analysis done!\nend\n</code></pre>\n"}, {"tags": ["ruby", "sinatra", "activesupport"], "answers": [{"tags": [], "owner": {"reputation": 778, "user_id": 393978, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6f14edd240b3d89a54798d9ffc683e9d?s=128&d=identicon&r=PG", "display_name": "framauro13", "link": "https://stackoverflow.com/users/393978/framauro13"}, "is_accepted": true, "score": 0, "last_activity_date": 1423707164, "creation_date": 1423707164, "answer_id": 28468115, "question_id": 28464059, "link": "https://stackoverflow.com/questions/28464059/activesupport-testcase-not-running-in-sinatra/28468115#28468115", "title": "ActiveSupport TestCase not running in Sinatra", "body": "<p>Looks like the issue was caused by not requiring <code>minitest/autorun</code> in my test helper.  I added that line, and the tests ran fine.</p>\n"}], "owner": {"reputation": 778, "user_id": 393978, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6f14edd240b3d89a54798d9ffc683e9d?s=128&d=identicon&r=PG", "display_name": "framauro13", "link": "https://stackoverflow.com/users/393978/framauro13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 28468115, "answer_count": 1, "score": 0, "last_activity_date": 1423707164, "creation_date": 1423687195, "last_edit_date": 1423688619, "question_id": 28464059, "link": "https://stackoverflow.com/questions/28464059/activesupport-testcase-not-running-in-sinatra", "title": "ActiveSupport TestCase not running in Sinatra", "body": "<p>I'm setting up a new Sinatra app and am having issues getting my tests to run via a rake task.  When I run <code>rake:test</code>, the task runs, shows me which files it will be running, but nothing happens.  I know it's loading the class because it has failed due to syntax errors, but I never see my tests running.  What am I missing?  Below is my configuration and example test:</p>\n\n<h1>rakefile.rb</h1>\n\n<pre><code>require \"rake/testtask\"\nrequire \"sinatra/activerecord/rake\"\nrequire \"./app\"\n\ntask :default =&gt; :test\n\nTEST_FILES = FileList[\"test/**/test*.rb\"]\n\ndesc \"Run all of the tests for redFish\"\nRake::TestTask.new do |t|\n  t.libs &lt;&lt; \"test\"\n  t.test_files = TEST_FILES\n  t.verbose = true\nend\n\ntask :default =&gt; \"test\"\n</code></pre>\n\n<h1>test/test_helper.rb</h1>\n\n<pre><code>ENV[\"RACK_ENV\"] = \"test\"\n\nrequire \"rack/test\"\nrequire \"awesome_print\"\nrequire \"active_support\"\nrequire \"active_support/core_ext\"\n</code></pre>\n\n<h1>/test/unit/test_organization.rb</h1>\n\n<pre><code>require File.expand_path '../../test_helper.rb',__FILE__\n\nclass TestOrganization &lt; ActiveSupport::TestCase\n  def setup\n    puts \"setup for tests\"\n  end\n\n  test \"validates_required_fields\" do\n    puts \"RUNNING TESTS\"\n    assert true\n    refute false\n  end\nend\n</code></pre>\n\n<p>When I run <code>rake:test</code>, I can see that <code>test_helper</code> and <code>test_organization.rb</code> are being found by the TestTask, but I don't see any tests pass/fail.</p>\n\n<p>Am I missing something obvious?</p>\n"}, {"tags": ["ruby", "file-upload", "github", "github-api"], "comments": [{"owner": {"reputation": 21521, "user_id": 78613, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0fa1dc97175c4cc1ea4ecf506119961c?s=128&d=identicon&r=PG", "display_name": "Nick Veys", "link": "https://stackoverflow.com/users/78613/nick-veys"}, "edited": false, "score": 0, "creation_date": 1423686735, "post_id": 28463651, "comment_id": 45253545, "body": "Are you sure it&#39;s the first 425 bytes?  Have you downloaded it to see?  It&#39;s not something like you&#39;re uploading the absolute path as the file data or anything?"}, {"owner": {"reputation": 369, "user_id": 1195741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44add973a4967f4caf0073111901dd7f?s=128&d=identicon&r=PG", "display_name": "Craig J", "link": "https://stackoverflow.com/users/1195741/craig-j"}, "reply_to_user": {"reputation": 21521, "user_id": 78613, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0fa1dc97175c4cc1ea4ecf506119961c?s=128&d=identicon&r=PG", "display_name": "Nick Veys", "link": "https://stackoverflow.com/users/78613/nick-veys"}, "edited": false, "score": 0, "creation_date": 1423686926, "post_id": 28463651, "comment_id": 45253648, "body": "Yes, I&#39;ve compared the original zip file to the downloaded file. The first 425 bytes are the same."}], "answers": [{"tags": [], "owner": {"reputation": 4645, "user_id": 1418981, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/0f7a600b7301a23924ae818c812c9540?s=128&d=identicon&r=PG", "display_name": "Vlad", "link": "https://stackoverflow.com/users/1418981/vlad"}, "is_accepted": false, "score": 0, "last_activity_date": 1516660133, "creation_date": 1516660133, "answer_id": 48391294, "question_id": 28463651, "link": "https://stackoverflow.com/questions/28463651/how-do-i-upload-a-zip-file-to-a-github-release-in-ruby/48391294#48391294", "title": "How do I upload a zip file to a github release in ruby", "body": "<p>Using <code>Net::HTTP</code></p>\n\n<pre><code>require 'net/http'\nrequire 'json'\n\ndef attach(url, zipFilePath)\n  data = File.open(zipFilePath, \"rb\") { |f| f.read }\n  uri = URI.parse(url)\n  request = Net::HTTP::Post.new(uri)\n  request[\"Authorization\"] = \"Bearer #{YOUR_GITHUB_ACCESS_TOKEN}\"\n  request.content_type = 'application/zip'\n  request.body = data\n  response = Net::HTTP.start(uri.hostname, uri.port, { use_ssl: true }) { |http| http.request(request) }\n  return JSON.parse(response.body)\nend\n</code></pre>\n"}], "owner": {"reputation": 369, "user_id": 1195741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44add973a4967f4caf0073111901dd7f?s=128&d=identicon&r=PG", "display_name": "Craig J", "link": "https://stackoverflow.com/users/1195741/craig-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 651, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1516660133, "creation_date": 1423685697, "question_id": 28463651, "link": "https://stackoverflow.com/questions/28463651/how-do-i-upload-a-zip-file-to-a-github-release-in-ruby", "title": "How do I upload a zip file to a github release in ruby", "body": "<p>I'm trying to automate uploading a zip file to a release on a repo on github. I'm using <a href=\"https://github.com/peter-murach/github\" rel=\"nofollow noreferrer\">github_api</a> to interact with Github's api. I can create a release via that library, but when I try to upload my zip file only the first 425 bytes are transferred. Here's my code related to uploading the file:</p>\n\n<pre><code>files = Dir[\"&lt;dir_containing_zipefile&gt;\"]\n  files.each do |file|\n\n  github.repos.releases.assets.upload \"Owner\", \"Repo\", id, File.absolute_path(file),\n    name: \"#{File.basename file}\",\n    content_type: \"application/zip\"\nend\n</code></pre>\n\n<p>I get the <code>id</code> from a previous request and have ensured that is correct. I've also ensured that the file found is the correct file (both basename and absolute_path). The request succeeds, but the file uploaded is only a partial of the entire file.</p>\n\n<p>File on system:</p>\n\n<p><img src=\"https://i.stack.imgur.com/FK3bo.png\" alt=\"file on disk\"></p>\n\n<p>File after upload to github release:</p>\n\n<p><img src=\"https://i.stack.imgur.com/sUFB2.png\" alt=\"file uploaded to github\"></p>\n\n<p>After downloading the file from github, I noticed that the 425 Bytes are the first 425 Bytes of my build.zip, but then it seems to get truncated. Has anyone run into this before?</p>\n"}, {"tags": ["python", "css", "ruby", "node.js", "sass"], "comments": [{"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 0, "creation_date": 1424194951, "post_id": 28463516, "comment_id": 45445504, "body": "Have you tried libsass? (Meaning it&#39;s implementation in your favourite programming language) Check this: <a href=\"http://sass-lang.com/libsass\" rel=\"nofollow noreferrer\">sass-lang.com/libsass</a>"}, {"owner": {"reputation": 7798, "user_id": 937271, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/05cb1759e7799b7272464b6bfc06d6d1?s=128&d=identicon&r=PG", "display_name": "Gerard", "link": "https://stackoverflow.com/users/937271/gerard"}, "reply_to_user": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 0, "creation_date": 1424204218, "post_id": 28463516, "comment_id": 45450504, "body": "Yes I have, and as far as I&#39;ve seen, these implementations only compile SASS into CSS :( they&#39;re very good packages but not what I need. I need to be able to programatically modify the source before compilation. Thanks."}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 0, "creation_date": 1424204438, "post_id": 28463516, "comment_id": 45450607, "body": "Yeah, this was just my first intention. Now after having a closer look to that projects I must say you are right. However, they are a good starting point. You&#39;ll need to extract the code which parses the scss files and create something new around this. Its not a 5 minute job, but I think it is possible.. btw, I cannot understand why they put this question <i>on hold as off-topic</i>. Placed reopen-vote."}, {"owner": {"reputation": 62282, "user_id": 1652962, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2cf5a0741f183379686fe0995ffc27ae?s=128&d=identicon&r=PG", "display_name": "cimmanon", "link": "https://stackoverflow.com/users/1652962/cimmanon"}, "edited": false, "score": 0, "creation_date": 1424214575, "post_id": 28463516, "comment_id": 45455485, "body": "Tool requests are off topic for SO."}, {"owner": {"reputation": 7798, "user_id": 937271, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/05cb1759e7799b7272464b6bfc06d6d1?s=128&d=identicon&r=PG", "display_name": "Gerard", "link": "https://stackoverflow.com/users/937271/gerard"}, "edited": false, "score": 0, "creation_date": 1424276763, "post_id": 28463516, "comment_id": 45484018, "body": "Even though it is a tool request, the problem to solve with such tool is very specific and, from my point of view, unlikely to be opinionated since it&#39;s not an broad topic. One can stick to <i>facts</i> to why X tool would be better suited to solve X <i>problem</i>. Having said that, of course I might be missing the real &quot;why&quot; that turned this question off-topic. So, if this is off-topic for SO, where does this question belong and why there? Thanks for any clarification :)"}], "owner": {"reputation": 7798, "user_id": 937271, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/05cb1759e7799b7272464b6bfc06d6d1?s=128&d=identicon&r=PG", "display_name": "Gerard", "link": "https://stackoverflow.com/users/937271/gerard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 313, "favorite_count": 0, "closed_date": 1424261076, "answer_count": 0, "score": 5, "last_activity_date": 1424207296, "creation_date": 1423685268, "question_id": 28463516, "link": "https://stackoverflow.com/questions/28463516/how-to-programmatically-manipulate-scss", "closed_reason": "Not suitable for this site", "title": "How to programmatically manipulate SCSS?", "body": "<p>I'm trying to find a tool to parse and manipulate SCSS. What I need to do is programmatically \"merge\" two versions of SCSS files from different sources.</p>\n\n<p>The use cases involve files that only differ in declarations within the rules and not two totally different SCSS files.</p>\n\n<p>For example, if I have the following files:</p>\n\n<pre><code>// foo/sample.scss\n$myColor: #fff;\nbody { background-color: $myColor; margin: 0; }\n\n// bar/sample.scss\n$myColor: #ccc;\n$black: #000;\nbody { background-color: $myColor; color: $black; }\n</code></pre>\n\n<p>It would be cool to have a tool in which you could do something like:</p>\n\n<pre><code>var sass = require('some-sass-parsing-lib'),\n  fooFile = sass.parse({source: 'foo/sample.scss', otherOption: 'value'}),\n  barFile = sass.parse({source: 'bar/sample.scss', otherOption: 'value'});\n\nfunction findFooRuleSomehow () {\n  // this would be implemented by the developer, not a part of the lib\n}\n\nfunction hasDeclaration (rule, declaration) {\n  // return wether `rule` has a declaration `declaration`\n}\n\nbarFile.stylesheet.rules.forEach(function (barRule) {\n  var fooRule = findFooRuleSomehow();\n\n  rule.declarations.forEach(function (barDeclaration) {\n    if (!hasDeclaration(fooRule, barDeclaration)) {\n      fooRule.declarations.append(declaration);\n    }\n  });\n  // do the same with variables, etc.\n});\n\nsass.save(fooFile, 'result/sample.scss');  // produces the updated version of the SASS file (not CSS)\n</code></pre>\n\n<p>and produce something like:</p>\n\n<pre><code>// result/sample.scss\n$myColor: #fff;\n$black: #000;\nbody { background-color: $myColor; color: $black; margin: 0; }\n</code></pre>\n\n<p>Which, for example, would allow you to merge only new declarations from <code>bar/sample.scss</code> into <code>foo/sample.scss</code>.</p>\n\n<p>I found <a href=\"https://github.com/reworkcss/css\" rel=\"noreferrer\"><code>reworks/css</code></a> which actually allows you to do a very similar behavior to what I'm looking for but this one either a) only works for CSS (not SCSS) or b) I couldn't find what options to use so that it works for SCSS too.</p>\n\n<p>There is also <a href=\"https://github.com/sass/node-sass\" rel=\"noreferrer\"><code>node-sass</code></a> but it only renders the input to CSS, with no programmatic manipulation options.</p>\n\n<p>Do you know any tool for this you can recommend or point me to? A <code>nodejs</code>-based tool would be ideal but I'm open to alternatives in <code>ruby</code> or <code>python</code>.</p>\n"}, {"tags": ["ruby", "sorting", "hash"], "comments": [{"owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "edited": false, "score": 3, "creation_date": 1423685151, "post_id": 28463395, "comment_id": 45252705, "body": "What isn&#39;t working about the above?  Just drop the <code>.collect</code> and if you want to modify it in place add <code>!</code> to <code>sort_by</code>."}, {"owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 0, "creation_date": 1423685393, "post_id": 28463395, "comment_id": 45252824, "body": "I think this is one of those posts where the OP already has working code and wants to know if there is a more elegant way, but the OP should try harder to make that clear to the readers."}, {"owner": {"reputation": 690, "user_id": 2992299, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y9CzE.jpg?s=128&g=1", "display_name": "CatsLoveJazz", "link": "https://stackoverflow.com/users/2992299/catslovejazz"}, "reply_to_user": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "edited": false, "score": 0, "creation_date": 1423685511, "post_id": 28463395, "comment_id": 45252888, "body": "Thanks @PhilipHallstrom, that did it. I am slightly confused though as my original attempt did not reorder the original array but it sounds like it should have?"}, {"owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 2, "creation_date": 1423685558, "post_id": 28463395, "comment_id": 45252914, "body": "Your original attempt uses <code>sort_by</code> which does not modify the original array.  That&#39;s why he recommended you use <code>sort_by!</code> instead."}, {"owner": {"reputation": 690, "user_id": 2992299, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y9CzE.jpg?s=128&g=1", "display_name": "CatsLoveJazz", "link": "https://stackoverflow.com/users/2992299/catslovejazz"}, "edited": false, "score": 0, "creation_date": 1423685628, "post_id": 28463395, "comment_id": 45252948, "body": "Ok, thank you, I must read up on the documentation. I presume that my use of collect here was not correct here in this case"}], "answers": [{"comments": [{"owner": {"reputation": 690, "user_id": 2992299, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y9CzE.jpg?s=128&g=1", "display_name": "CatsLoveJazz", "link": "https://stackoverflow.com/users/2992299/catslovejazz"}, "edited": false, "score": 0, "creation_date": 1423687477, "post_id": 28464070, "comment_id": 45253940, "body": "Perfect, thank you. I have obviously misunderstood but I thought that collect would have done this for me and I wouldn&#39;t have needed sort_by!"}], "tags": [], "owner": {"reputation": 132392, "user_id": 244128, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/300502d6109af88a009074c42ff56c73?s=128&d=identicon&r=PG", "display_name": "maerics", "link": "https://stackoverflow.com/users/244128/maerics"}, "is_accepted": false, "score": 4, "last_activity_date": 1423687247, "creation_date": 1423687247, "answer_id": 28464070, "question_id": 28463395, "link": "https://stackoverflow.com/questions/28463395/sorting-an-array-of-hashes-by-a-date-field/28464070#28464070", "title": "Sorting an array of hashes by a date field", "body": "<p>Looks fine overall.  Although you can drop the <code>collect</code> call since it's not needed and use <a href=\"http://ruby-doc.org//core-2.2.0/Array.html#method-i-sort_by-21\" rel=\"nofollow\"><code>sort_by!</code></a> to modify the array in-place (instead of reassigning):</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>@array['info'].sort_by! { |x| Date.parse x['date'] }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 565, "user_id": 3825106, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/fd3bf76f5859d9e3fb029a64e624c233?s=128&d=identicon&r=PG&f=1", "display_name": "Curious Developer", "link": "https://stackoverflow.com/users/3825106/curious-developer"}, "edited": false, "score": 0, "creation_date": 1529498855, "post_id": 28467851, "comment_id": 88894755, "body": "I know i am late, but can anyone resolve it for me? My dates are like this #&lt;Date: 2018-04-04 ((2458213j,0s,0n),+0s,2299161j)&gt;. So I am getting this error: undefined method `split&#39; for #&lt;Date: 2018-04-04 ((2458213j,0s,0n),+0s,2299161j)&gt;"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 4, "last_activity_date": 1423705218, "creation_date": 1423705218, "answer_id": 28467851, "question_id": 28463395, "link": "https://stackoverflow.com/questions/28463395/sorting-an-array-of-hashes-by-a-date-field/28467851#28467851", "title": "Sorting an array of hashes by a date field", "body": "<p>Another way, which doesn't require converting the date strings to date objects, is the following.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>def sort_by_date(arr)\n  arr.sort_by { |h| h[\"date\"].split('/').reverse }\nend\n</code></pre>\n\n<p>If <code>arr</code> is to be sorted in place, use <a href=\"http://ruby-doc.org//core-2.2.0/Array.html#method-i-sort_by-21\" rel=\"nofollow\">Array#sort_by!</a> rather than <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-sort_by\" rel=\"nofollow\">Enumerable#sort_by</a>.</p>\n\n<p><strong>Example</strong></p>\n\n<pre><code>arr = [{ \"name\"=&gt;\"personA\", \"date\"=&gt;\"23/09/1980\" },\n       { \"name\"=&gt;\"personB\", \"date\"=&gt;\"01/04/1970\" },\n       { \"name\"=&gt;\"personC\", \"date\"=&gt;\"03/04/1975\" }]\n\nsort_by_date(arr)\n  #=&gt; [{ \"name\"=&gt;\"personB\", \"date\"=&gt;\"01/04/1970\" },\n  #    { \"name\"=&gt;\"personC\", \"date\"=&gt;\"03/04/1975\" },\n  #    { \"name\"=&gt;\"personA\", \"date\"=&gt;\"23/09/1980\" }]\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p>For <code>arr</code> in the example, <code>sort_by</code> passes the first element of <code>arr</code> into its block and assigns it to the block variable:</p>\n\n<pre><code>h = { \"name\"=&gt;\"personA\", \"date\"=&gt;\"23/09/1980\" }\n</code></pre>\n\n<p>then computes:</p>\n\n<pre><code>a = h[\"date\"].split('/')\n  #=&gt; [\"23\", \"09\", \"1980\"]\n</code></pre>\n\n<p>and then:</p>\n\n<pre><code>b = a.reverse\n  #=&gt; [\"1980\", \"09\", \"23\"]\n</code></pre>\n\n<p>Similarly, we obtain <code>b</code> equal to:</p>\n\n<pre><code>[\"1970\", \"04\", \"01\"]\n</code></pre>\n\n<p>and</p>\n\n<pre><code>[\"1975\", \"04\", \"03\"]\n</code></pre>\n\n<p>for each of the other two elements of <code>arr</code>.</p>\n\n<p>If you look at the docs for <a href=\"http://ruby-doc.org//core-2.2.0/Array.html#method-i-3C-3D-3E\" rel=\"nofollow\">Array#&lt;=></a> you will see that these three arrays are ordered as follows:</p>\n\n<pre><code>[\"1970\", \"04\", \"01\"] &lt; [\"1975\", \"04\", \"03\"] &lt; [\"1980\", \"09\", \"23\"]\n</code></pre>\n\n<p>There is no need to convert the string elements to integers.</p>\n"}], "owner": {"reputation": 690, "user_id": 2992299, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y9CzE.jpg?s=128&g=1", "display_name": "CatsLoveJazz", "link": "https://stackoverflow.com/users/2992299/catslovejazz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3536, "favorite_count": 0, "accepted_answer_id": 28467851, "answer_count": 2, "score": 2, "last_activity_date": 1423705218, "creation_date": 1423684881, "last_edit_date": 1423686787, "question_id": 28463395, "link": "https://stackoverflow.com/questions/28463395/sorting-an-array-of-hashes-by-a-date-field", "title": "Sorting an array of hashes by a date field", "body": "<p>I have an object with many arrays of hashes, one of which I want to sort by a value in the 'date' key.</p>\n\n<pre><code> @array['info'][0] = {\"name\"=&gt;\"personA\", \"date\"=&gt;\"23/09/1980\"}\n @array['info'][1] = {\"name\"=&gt;\"personB\", \"date\"=&gt;\"01/04/1970\"}\n @array['info'][2] = {\"name\"=&gt;\"personC\", \"date\"=&gt;\"03/04/1975\"}\n</code></pre>\n\n<p>I have tried various methods using Date.parse and with collect but an unable to find a good solution.</p>\n\n<p><strong>Edit:</strong>\n To be clear I want to sort the original array in place</p>\n\n<pre><code>    @array['info'].sort_by { |i| Date.parse i['date'] }.collect\n</code></pre>\n\n<p>How might one solve this elegantly the 'Ruby-ist' way. Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "factory-bot"], "comments": [{"owner": {"reputation": 9945, "user_id": 1270259, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f8493a9385dae9f438379050d76ac2bf?s=128&d=identicon&r=PG", "display_name": "TheWebs", "link": "https://stackoverflow.com/users/1270259/thewebs"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1423696468, "post_id": 28463305, "comment_id": 45258412, "body": "this has nothing to do with anything."}, {"owner": {"reputation": 9945, "user_id": 1270259, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f8493a9385dae9f438379050d76ac2bf?s=128&d=identicon&r=PG", "display_name": "TheWebs", "link": "https://stackoverflow.com/users/1270259/thewebs"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1423704677, "post_id": 28463305, "comment_id": 45260976, "body": "this has nothing to do with the issue at hand please either stick to the convo or leave. or provide some better feedback."}], "answers": [{"comments": [{"owner": {"reputation": 9945, "user_id": 1270259, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f8493a9385dae9f438379050d76ac2bf?s=128&d=identicon&r=PG", "display_name": "TheWebs", "link": "https://stackoverflow.com/users/1270259/thewebs"}, "edited": false, "score": 0, "creation_date": 1423696842, "post_id": 28464431, "comment_id": 45258568, "body": "While what I am doing is considered single table inheritance, what I am really trying to do is to move the models and there concerns and there relationships from the engine, in this case Xaaron, to the gem - in this case core_models. With that said, as you see from the updated question, the real issue is FactoryGirl."}], "tags": [], "owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "is_accepted": false, "score": 1, "last_activity_date": 1423688586, "creation_date": 1423688586, "answer_id": 28464431, "question_id": 28463305, "link": "https://stackoverflow.com/questions/28463305/rails-not-using-the-table-the-model-specified/28464431#28464431", "title": "Rails not using the table the model specified", "body": "<p>In general, Active Record is designed to use single table inheritance (same table used for records of all subclasses) rather than multiple table inheritance (different tables for subclasses.)</p>\n\n<p>That said, instead of setting the table name in your subclass using <code>self.table_name =</code> you could try overriding the <code>table_name</code> method e.g.</p>\n\n<pre><code>def table_name\n  'xaaron_users'\nend\n</code></pre>\n\n<p>and see if that works in your scenario. This is <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/ModelSchema/ClassMethods.html#method-i-table_name-3D\" rel=\"nofollow\">mentioned as an alternative in the docs</a>.</p>\n"}], "owner": {"reputation": 9945, "user_id": 1270259, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f8493a9385dae9f438379050d76ac2bf?s=128&d=identicon&r=PG", "display_name": "TheWebs", "link": "https://stackoverflow.com/users/1270259/thewebs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 548, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1423697375, "creation_date": 1423684592, "last_edit_date": 1423697375, "question_id": 28463305, "link": "https://stackoverflow.com/questions/28463305/rails-not-using-the-table-the-model-specified", "title": "Rails not using the table the model specified", "body": "<p>I have a model that subclasses another model, this particular model does not use the table that I specified, instead it defaults back to the parent class trying to find that table.</p>\n\n<p>The parent class is in a gem, the child class is in an engine who's name space is isolated.</p>\n\n<p>Parent (in the gem):</p>\n\n<pre><code>require_relative 'concerns/user_concerns'\nrequire 'bcrypt'\n\nmodule CoreModels\n  module Models\n    class User &lt; ActiveRecord::Base\n      self.abstract_class = true\n\n      extend FriendlyId\n      friendly_id :first_name, use: [:slugged, :finders, :history]\n\n      before_save :encrypt_password\n\n      has_many :group_memberships, :dependent =&gt; :delete_all\n      has_many :groups, :through =&gt; :group_memberships, :dependent =&gt; :delete_all\n      has_many :roles, :through =&gt; :group_memberships, :dependent =&gt; :delete_all\n\n      has_many :api_keys\n\n      validates :first_name, presence: true\n      validates :user_name, uniqueness: true, presence: true, length: {minimum: 5}\n      validates :email, presence: true, confirmation: true, uniqueness: true\n      validates_format_of :email, :with =&gt; /\\A([^@\\s]+)@((?:[-a-z0-9]+\\.)+[a-z]{2,})\\z/i\n      validates :password, presence: true, confirmation: true, length: { minimum: 10 }, if: :new_record?\n\n      include CoreModels::Models::Concerns::UserConcerns\n\n      before_create{ generate_token(:auth_token) }\n\n      def self.authenticate_user(user_name, password)\n        user = Xaaron::User.find_by_user_name(user_name)\n        if(user &amp;&amp; (user.password == BCrypt::Engine.hash_secret(password, user.salt)))\n          user\n        else\n          nil\n        end\n      end\n\n      def encrypt_password\n        if password.present?\n          self.salt = BCrypt::Engine.generate_salt\n          self.password = BCrypt::Engine.hash_secret(password, salt)\n        end\n      end\n\n      def send_password_reset\n        generate_token(:password_reset_token)\n        self.password_reset_timestamp = Time.zone.now\n        save!\n        UserMailer.password_reset(self).deliver\n      end\n\n      protected\n      def generate_token(column)\n        begin\n          self[column] = SecureRandom.urlsafe_base64\n        end while User.exists?(column =&gt; self[column])\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Child (in the engine):</p>\n\n<pre><code>require 'core_models/models/user'\n\nmodule Xaaron\n  class User &lt; CoreModels::Models::User\n    self.table_name = 'xaaron_users'\n  end\nend\n</code></pre>\n\n<p>When I run my tests, 135 of them fail giving me the same error over and over again:</p>\n\n<pre><code>Failure/Error: setup_group_role_permissions_relations_for_administrator\n     ActiveRecord::StatementInvalid:\n       PG::UndefinedTable: ERROR:  relation \"users\" does not exist\n       LINE 5:                WHERE a.attrelid = '\"users\"'::regclass\n                                                 ^\n       :               SELECT a.attname, format_type(a.atttypid, a.atttypmod),\n                            pg_get_expr(d.adbin, d.adrelid), a.attnotnull, a.atttypid, a.atttypmod\n                       FROM pg_attribute a LEFT JOIN pg_attrdef d\n                         ON a.attrelid = d.adrelid AND a.attnum = d.adnum\n                      WHERE a.attrelid = '\"users\"'::regclass\n                        AND a.attnum &gt; 0 AND NOT a.attisdropped\n                      ORDER BY a.attnum\n</code></pre>\n\n<p>This particular method is:</p>\n\n<pre><code>def setup_group_role_permissions_relations_for_administrator\n  @user = FactoryGirl.create(:user)\n  @role = FactoryGirl.create(:admin_role)\n  @group = FactoryGirl.create(:administrator_group)\n  @permission = FactoryGirl.create(:can_read)\n\n  @role.add_permission = @permission.permission_name\n  @group.add_role = @role.role_name\n\n  @user.add_group_membership(@group, @role)\nend\n</code></pre>\n\n<p>So as you can see its not listening to me when I say use table x. Instead its trying to use a table that doesn't exist./ All of my engines tables are name spaced with <code>xaaron_</code></p>\n\n<h1>Update</h1>\n\n<p>The core issue, after some investigation is FactoryGirl, if we look at the first thing that happens in: <code>setup_group_role_permissions_relations_for_administrator</code> I am doing <code>@user = FactoryGirl.create(:user)</code>, When I used pry to figure out what wa going on there - thats the issue, so lets look at this factory:</p>\n\n<pre><code>FactoryGirl.define do\n  sequence :user_email do |n|\n    \"user#{n}@example.com\"\n  end\n\n  # Allows for multiple user names\n  sequence :user_name do |n|\n    \"user#{n}\"\n  end\n\n  sequence :permission_name do |n|\n    \"can_read#{n}\"\n  end\n\n  sequence :role_name do |n|\n    \"Member#{n}\"\n  end\n\n\n  factory :user, :class =&gt; Xaaron::User do\n    first_name 'Adam'\n    last_name 'Something'\n    user_name {generate :user_name}\n    email {generate :user_email}\n    password 'somePasswordThat_Is$ecure10!'\n  end\n\n  factory :admin, :class =&gt; Xaaron::User do\n    first_name \"Sample Admin\"\n    email \"a@gmail.com\"\n    user_name \"Admin_User_Name\"\n    password \"admin_Password10985\"\n  end\nend\n</code></pre>\n\n<p>There is something wrong with the way factory girl is creating the user, because I can boot up a rails console and do <code>Xaaron::User.all</code> and it knows to look in <code>xaaron_users</code> and not <code>users</code></p>\n\n<p>So the <code>self.table_name=\"\"</code> works, but isn't working with factory girl for some reason.</p>\n\n<h1>Update 2</h1>\n\n<p>I have filed a possible bug report at: <a href=\"https://github.com/thoughtbot/factory_girl/issues/743\" rel=\"nofollow\">Their Github Repo</a></p>\n"}, {"tags": ["objective-c", "ruby", "nsdateformatter"], "comments": [{"owner": {"reputation": 1364, "user_id": 1558358, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rLZkP.png?s=128&g=1", "display_name": "DrGodCarl", "link": "https://stackoverflow.com/users/1558358/drgodcarl"}, "edited": false, "score": 0, "creation_date": 1423684952, "post_id": 28463235, "comment_id": 45252598, "body": "18.050 is seconds, isn&#39;t it?  And the -6 is from GMT."}], "answers": [{"tags": [], "owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "is_accepted": false, "score": 0, "last_activity_date": 1423684956, "creation_date": 1423684956, "answer_id": 28463420, "question_id": 28463235, "link": "https://stackoverflow.com/questions/28463235/converting-ruby-time-to-objective-c/28463420#28463420", "title": "Converting Ruby time to objective-c", "body": "<p>0.50 is the microseconds.  Check out Ruby's <code>strptime</code> command.</p>\n\n<pre><code>&gt; Time.strptime('2015-02-11T12:54:18.050-06:00', '%Y-%m-%dT%H:%M:%S.%L%:z')\n=&gt; 2015-02-11 12:54:18 -0600\n</code></pre>\n"}], "owner": {"reputation": 8908, "user_id": 172232, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5a3de2b746da71aadd6b33ddbcbccd52?s=128&d=identicon&r=PG", "display_name": "quantumpotato", "link": "https://stackoverflow.com/users/172232/quantumpotato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423684956, "creation_date": 1423684323, "question_id": 28463235, "link": "https://stackoverflow.com/questions/28463235/converting-ruby-time-to-objective-c", "title": "Converting Ruby time to objective-c", "body": "<p>2015-02-11T12:54:18.050-06:00</p>\n\n<p>I'm confused about the .050-6:00 formatting. Is the last -6 from GMT? What's .050? How do I show this in a date formatter?</p>\n\n<p>I'm just trying to get the Month, Day, Year and want to do it properly with date formatting instead of string parsing..</p>\n"}, {"tags": ["ruby", "rspec", "rspec3"], "answers": [{"comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1423685698, "post_id": 28463288, "comment_id": 45252984, "body": "Yep, I noticed the same thing - is there a way to &quot;teardown&quot; the constants between tests?"}, {"owner": {"reputation": 3881, "user_id": 1145861, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/478v9.png?s=128&g=1", "display_name": "doesterr", "link": "https://stackoverflow.com/users/1145861/doesterr"}, "edited": false, "score": 0, "creation_date": 1423691506, "post_id": 28463288, "comment_id": 45256092, "body": "They are reset when you load the file again. <code>load(&lt;path-to-file&gt;)</code>"}], "tags": [], "owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "is_accepted": true, "score": 1, "last_activity_date": 1423684516, "creation_date": 1423684516, "answer_id": 28463288, "question_id": 28463129, "link": "https://stackoverflow.com/questions/28463129/rspec-test-runs-correctly-only-when-run-in-sequence/28463288#28463288", "title": "RSpec test runs correctly only when run in sequence", "body": "<p><code>@options</code> is a class variable in that module.  I'm not sure that is technically the right name for it, but that's how it is acting.  As an experiment, print out <code>@options.object_id</code> right before you access it in <code>self.options</code>.  Then run your tests.  You'll see that in both cases it prints out the same id.  This is why when your tests are flipped you get 30.  <code>@options</code> is already defined so <code>@options ||= DEFAULTS</code> is not setting <code>@options</code> to <code>DEFAULTS</code>.</p>\n\n<pre><code>$ cat foo.rb\nmodule MyModule\n\n  DEFAULTS = {\n    pool: 15\n  }\n  def self.options\n    puts \"options_id: #{@options.object_id}\"\n    @options ||= DEFAULTS\n  end\n\n  def self.options=(opts)\n    @options = opts\n  end\nend\n\nmodule MyModule\n  class MyClass\n\n    def options\n      MyModule.options\n    end\n\n    def import_options(opts)\n      MyModule.options = opts\n    end\n\n  end\nend\n\nputs \"pool 30\"\nmy = MyModule::MyClass.new\nmy.import_options(pool: 30)\nmy.options[:pool]\n\nputs\nputs \"defaults\"\nmy = MyModule::MyClass.new\nmy.options[:pool]\n</code></pre>\n\n<p>And running it...</p>\n\n<pre><code>$ ruby foo.rb\npool 30\noptions_id: 70260665635400\n\ndefaults\noptions_id: 70260665635400\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2842, "user_id": 599686, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/6e2b017e2266ab3c15e0439a1ca10946?s=128&d=identicon&r=PG", "display_name": "bliof", "link": "https://stackoverflow.com/users/599686/bliof"}, "is_accepted": false, "score": 0, "last_activity_date": 1423687384, "last_edit_date": 1423687384, "creation_date": 1423686144, "answer_id": 28463759, "question_id": 28463129, "link": "https://stackoverflow.com/questions/28463129/rspec-test-runs-correctly-only-when-run-in-sequence/28463759#28463759", "title": "RSpec test runs correctly only when run in sequence", "body": "<p>You could always use a <a href=\"https://www.relishapp.com/rspec/rspec-core/v/2-0/docs/hooks/before-and-after-hooks\" rel=\"nofollow\">before(:each)</a></p>\n\n<pre><code>before(:each) do\n  MyModule.options = MyModule::DEFAULTS\nend\n</code></pre>\n\n<p>Side note - maybe a class for the configuration.</p>\n\n<p>Something like:</p>\n\n<pre><code>module MyModule\n  class Configuration\n    def initialize\n      @foo = 'default'\n      @bar = 'default'\n      @baz = 'default'\n    end\n\n    def load_from_yaml(path)\n      # :)\n    end\n\n    attr_accessor :foo, :bar, :baz\n  end\nend\n</code></pre>\n\n<p>And then you could add something like this:</p>\n\n<pre><code>module MyModule\n  class &lt;&lt; self\n    attr_accessor :configuration\n  end\n\n  # MyModule.configure do |config|\n  #   config.baz = 123\n  # end\n  def self.configure\n    self.configuration ||= Configuration.new\n    yield(configuration)\n  end\nend\n</code></pre>\n\n<p>And finally you will reset the configuration in a more meaningful manner</p>\n\n<pre><code>before(:each) do\n  MyModule.configuration = MyModule::Configuration.new\nend\n</code></pre>\n"}], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 28463288, "answer_count": 2, "score": 0, "last_activity_date": 1423687384, "creation_date": 1423683922, "last_edit_date": 1423684225, "question_id": 28463129, "link": "https://stackoverflow.com/questions/28463129/rspec-test-runs-correctly-only-when-run-in-sequence", "title": "RSpec test runs correctly only when run in sequence", "body": "<p>I have an issue that seems to be specific to my test suite.</p>\n\n<p>I have a module that holds some defaults in a constant like so:</p>\n\n<pre><code>module MyModule\n\n  DEFAULTS = {\n    pool: 15\n  }\n  def self.options\n    @options ||= DEFAULTS\n  end\n\n  def self.options=(opts)\n    @options = opts\n  end\n\nend\n\nmodule MyModule\n  class MyClass\n\n    def options\n      MyModule.options\n    end\n\n    def import_options(opts)\n      MyModule.options = opts\n    end\n\n  end\nend\n</code></pre>\n\n<p>I allow the program to boot with no options or a user can specify options.  If no options are given, we use the defaults but if options are given we use that instead.  An example test suite looks like this:</p>\n\n<pre><code>RSpec.describe MyModule::MyClass do\n  context \"with deafults\" do\n    let(:my) { MyModule::MyClass.new }\n    it 'has a pool of 15' do\n      expect(my.options[:pool]).to eq 15\n    end\n  end\n  context \"imported options\" do\n    let(:my) { MyModule::MyClass.new }\n    it 'has optional pool size' do\n      my.import_options(pool: 30)\n      expect(my.options[:pool]).to eq 30\n    end\n  end\nend\n</code></pre>\n\n<p>If those tests run in order, great, everything passes.  If it runs in reverse (where the second test goes first), the first test gets a pool size of 30.  </p>\n\n<p>I don't have a 'real world' scenario where this would happen, the program boots once and that's it but I'd like to test for this accordingly.  Any ideas?</p>\n"}, {"tags": ["ruby", "rspec", "watir"], "answers": [{"comments": [{"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 2, "creation_date": 1423685462, "post_id": 28462832, "comment_id": 45252856, "body": "You will still get an exception since Watir::Table also does not have an <code>each</code> method. Perhaps you meant to use a Watir::TableCollection - ie should be <code>b.tables</code> instead of <code>b.table</code>. Though I would guess that the question is actually looking to loop through links of a single table (since multiple tables should not have the same id) - ie something like <code>b.table(id: &quot;table_id&quot;).links.map(&amp;:title).join</code>."}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1423685518, "post_id": 28462832, "comment_id": 45252892, "body": "@JustinKo Go ahead. I&#39;ll down it :-)"}, {"owner": {"reputation": 25, "user_id": 2582210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23790cfcde6e279ecd94ccb61ebc1a97?s=128&d=identicon&r=PG", "display_name": "Dan Saint-Pierre", "link": "https://stackoverflow.com/users/2582210/dan-saint-pierre"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1423686332, "post_id": 28462832, "comment_id": 45253329, "body": "@JustinKo that&#39;s exactly what I was looking for. Thanks. (Thanks to you too, Arup.)"}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1423851981, "post_id": 28462832, "comment_id": 45331567, "body": "Dan: if this answer addressed your problem, you should accept it.  That way JustinKo will get credit...uhhh...actually @Arup will get the credit...either way, you should accept the answer ;)"}, {"owner": {"reputation": 25, "user_id": 2582210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23790cfcde6e279ecd94ccb61ebc1a97?s=128&d=identicon&r=PG", "display_name": "Dan Saint-Pierre", "link": "https://stackoverflow.com/users/2582210/dan-saint-pierre"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1424185606, "post_id": 28462832, "comment_id": 45439414, "body": "@orde Oh! I meant to accept but stepped away from the computer. How embarrassing! Thanks."}], "tags": [], "owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "is_accepted": true, "score": 1, "last_activity_date": 1423686447, "last_edit_date": 1495535049, "creation_date": 1423682813, "answer_id": 28462832, "question_id": 28462750, "link": "https://stackoverflow.com/questions/28462750/using-loops-to-find-all-matching-objects-in-watir/28462832#28462832", "title": "Using loops to find all matching objects in watir", "body": "<p>You are doing it wrong. Correct way is :</p>\n\n<pre><code>def get_titles\n  titles = \"\"\n  b.tables(id: \"table_id\").each do |table|\n    titles &lt;&lt; table.a.title\n  end\n  puts titles\nend\n</code></pre>\n\n<p><code>b.table(id: \"table_id\").a.title</code> gave you a <code>String</code> object, and you called <code>#each</code> on this string object. That's why the error.</p>\n\n<p>As per the <a href=\"https://stackoverflow.com/questions/28462750/using-loops-to-find-all-matching-objects-in-watir#comment45252856_28462832\">Justin's</a> comment, clear way is :</p>\n\n<pre><code>b.table(id: \"table_id\").links.map(&amp;:title).join\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "is_accepted": false, "score": 0, "last_activity_date": 1424139150, "creation_date": 1424139150, "answer_id": 28553600, "question_id": 28462750, "link": "https://stackoverflow.com/questions/28462750/using-loops-to-find-all-matching-objects-in-watir/28553600#28553600", "title": "Using loops to find all matching objects in watir", "body": "<p>As indicated in the comments to the other answer, the problem is that you are trying to use the .each method on a single object instead of some form of collection.</p>\n\n<p>To get a collection holding all the titles from inside some container, use the .titles method</p>\n\n<pre><code>titles = b.tables(id: \"table_id\").titles\n\nif you need something like a collection of all the text of the titles\n\nb.tables(id: \"table_id\").titles.each do |title|\n  titles &lt;&lt; title.text\nend\n</code></pre>\n\n<p>You can also use something like Justin gave in his comment to the first answer</p>\n"}], "owner": {"reputation": 25, "user_id": 2582210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23790cfcde6e279ecd94ccb61ebc1a97?s=128&d=identicon&r=PG", "display_name": "Dan Saint-Pierre", "link": "https://stackoverflow.com/users/2582210/dan-saint-pierre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 28462832, "answer_count": 2, "score": 1, "last_activity_date": 1424139150, "creation_date": 1423682592, "question_id": 28462750, "link": "https://stackoverflow.com/questions/28462750/using-loops-to-find-all-matching-objects-in-watir", "title": "Using loops to find all matching objects in watir", "body": "<p>I'm trying to make a script that looks for all instances of an element within a table by looping through. I can identify <em>one</em> object, the first instance of it:</p>\n\n<pre><code>b.table(id: \"table_id\").a.title\n=&gt; \"foo bar\"\n</code></pre>\n\n<p>but when I attempt to loop through the table, I run into issues:</p>\n\n<pre><code>def get_titles\n  titles = \"\"\n  b.table(id: \"table_id\").a.title.each do |title|\n    titles &lt;&lt; title\n  end\n  puts titles\nend\n\nget_titles\nNoMethodError: undefined method `each' for \"foo bar\":String\n</code></pre>\n\n<p>I believe there is something wrong with how I'm attempting to loop through the table.</p>\n"}, {"tags": ["ruby", "r"], "answers": [{"comments": [{"owner": {"reputation": 19505, "user_id": 3604745, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/U7HAo.png?s=128&g=1", "display_name": "Hack-R", "link": "https://stackoverflow.com/users/3604745/hack-r"}, "edited": false, "score": 0, "creation_date": 1423685356, "post_id": 28463269, "comment_id": 45252807, "body": "It worked! Thanks! I see the pull method in the J. Statistical Software article now that you mention it"}, {"owner": {"reputation": 3407, "user_id": 357012, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7LPK9.jpg?s=128&g=1", "display_name": "PhilT", "link": "https://stackoverflow.com/users/357012/philt"}, "edited": false, "score": 0, "creation_date": 1450709092, "post_id": 28463269, "comment_id": 56537613, "body": "an alternative is <code>R.pvalue</code>"}], "tags": [], "owner": {"reputation": 955, "user_id": 770104, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2343353db217c7906c3b997d3a638da1?s=128&d=identicon&r=PG", "display_name": "scottb", "link": "https://stackoverflow.com/users/770104/scottb"}, "is_accepted": true, "score": 1, "last_activity_date": 1423684443, "creation_date": 1423684443, "answer_id": 28463269, "question_id": 28462419, "link": "https://stackoverflow.com/questions/28462419/how-to-puts-value-from-r-in-ruby-via-rinruby/28463269#28463269", "title": "How to puts value from R in Ruby via rinruby", "body": "<p>Change your last line to:</p>\n\n<pre><code>puts R.pull(\"pvalue\")\n</code></pre>\n"}], "owner": {"reputation": 19505, "user_id": 3604745, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/U7HAo.png?s=128&g=1", "display_name": "Hack-R", "link": "https://stackoverflow.com/users/3604745/hack-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 28463269, "answer_count": 1, "score": 1, "last_activity_date": 1423684443, "creation_date": 1423681506, "last_edit_date": 1423682251, "question_id": 28462419, "link": "https://stackoverflow.com/questions/28462419/how-to-puts-value-from-r-in-ruby-via-rinruby", "title": "How to puts value from R in Ruby via rinruby", "body": "<p>I need to be able to access the values created in my R code within R, like in this example.</p>\n\n<pre><code>require \"rinruby\"      \n#Set all your variables in Ruby\nn = 10\nbeta_0 = 1\nbeta_1 = 0.25\nalpha = 0.05\nseed = 23423\nR.x = (1..n).entries\n#Use actual R code to perform the analysis\nR.eval &lt;&lt;EOF\n  set.seed(#{seed})\n  y &lt;- #{beta_0} + #{beta_1}*x + rnorm(#{n})\n  fit &lt;- lm( y ~ x )\n  est &lt;- round(coef(fit),3)\n  pvalue &lt;- summary(fit)$coefficients[2,4]\nEOF\nputs pvalue\n</code></pre>\n\n<p>But I get errors:</p>\n\n<pre><code> test.rb:21:in `&lt;main&gt;': undefined local variable or method `pvalue' for main:Object (NameError)\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "edited": false, "score": 0, "creation_date": 1423681632, "post_id": 28462384, "comment_id": 45250644, "body": "What do you mean by ruby app? You mean a ruby file that you&#39;re running with <code>ruby file.rb</code>? A gem? A web app? If you go to the terminal and run <code>ruby -v</code> what&#39;s the output. We need a bit more information to help you out."}, {"owner": {"reputation": 6244, "user_id": 1074400, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/52386dc6c94ab9b807981c9616dc2bb5?s=128&d=identicon&r=PG", "display_name": "Aakil Fernandes", "link": "https://stackoverflow.com/users/1074400/aakil-fernandes"}, "reply_to_user": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "edited": false, "score": 0, "creation_date": 1423681778, "post_id": 28462384, "comment_id": 45250730, "body": "I&#39;m not looking for a bug fix, I&#39;m looking for an aswer to the question."}, {"owner": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "edited": false, "score": 0, "creation_date": 1423682125, "post_id": 28462384, "comment_id": 45250923, "body": "I never mentioned anything about a bug fix...I&#39;m trying to get more information to properly answer your question. You have a ruby app...what kind of ruby app...what is the ruby app&#39;s target ruby version? you can find which ruby version you have/are running by running <code>ruby -v</code>...anything further will need more information from you. What you gave us does not give us much."}, {"owner": {"reputation": 6244, "user_id": 1074400, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/52386dc6c94ab9b807981c9616dc2bb5?s=128&d=identicon&r=PG", "display_name": "Aakil Fernandes", "link": "https://stackoverflow.com/users/1074400/aakil-fernandes"}, "reply_to_user": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "edited": false, "score": 0, "creation_date": 1423682390, "post_id": 28462384, "comment_id": 45251077, "body": "Maybe I should edit the question to rephrase."}], "answers": [{"tags": [], "owner": {"reputation": 202, "user_id": 2128481, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/rD0bJ.jpg?s=128&g=1", "display_name": "Tonmoy", "link": "https://stackoverflow.com/users/2128481/tonmoy"}, "is_accepted": true, "score": 1, "last_activity_date": 1423690925, "last_edit_date": 1495540170, "creation_date": 1423690925, "answer_id": 28465071, "question_id": 28462384, "link": "https://stackoverflow.com/questions/28462384/installing-a-ruby-app-on-a-machine-with-multiple-users/28465071#28465071", "title": "Installing a ruby app on a machine with multiple users", "body": "<p>If your app has a Gemfile (most will) you can specify ruby version on Gemfile.</p>\n\n<p>See this question  <a href=\"https://stackoverflow.com/questions/22427515/set-ruby-version-in-gemfile\">Set ruby version in Gemfile</a></p>\n"}], "owner": {"reputation": 6244, "user_id": 1074400, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/52386dc6c94ab9b807981c9616dc2bb5?s=128&d=identicon&r=PG", "display_name": "Aakil Fernandes", "link": "https://stackoverflow.com/users/1074400/aakil-fernandes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 28465071, "answer_count": 1, "score": -1, "last_activity_date": 1423690925, "creation_date": 1423681359, "last_edit_date": 1423682481, "question_id": 28462384, "link": "https://stackoverflow.com/questions/28462384/installing-a-ruby-app-on-a-machine-with-multiple-users", "title": "Installing a ruby app on a machine with multiple users", "body": "<p>When trying to install a ruby app via bundler, how does your system decide which version of Ruby to use?</p>\n\n<p>Will I run into problems if i use a version of Ruby installed in a directory I do not have access to? If so, how do I ensure I use a version of Ruby installed in the correct directory.</p>\n\n<hr>\n\n<p>For those voting to close, I am not looking for debugging help. I am looking for an understanding of how bundler decides which version of Ruby to use.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "amazon-s3"], "answers": [{"comments": [{"owner": {"reputation": 1359, "user_id": 54427, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0b914b1df2e4e4e7a93846dc4194631a?s=128&d=identicon&r=PG", "display_name": "chaostheory", "link": "https://stackoverflow.com/users/54427/chaostheory"}, "edited": false, "score": 0, "creation_date": 1456823469, "post_id": 28462596, "comment_id": 59112850, "body": "For people in the US with the same error, thinking that their region is &#39;us-standard&#39;, it&#39;s really &#39;us-east-1&#39;."}], "tags": [], "owner": {"reputation": 1538, "user_id": 1696287, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V8zk9.jpg?s=128&g=1", "display_name": "trosborn", "link": "https://stackoverflow.com/users/1696287/trosborn"}, "is_accepted": true, "score": 3, "last_activity_date": 1423682811, "last_edit_date": 1423682811, "creation_date": 1423682149, "answer_id": 28462596, "question_id": 28462341, "link": "https://stackoverflow.com/questions/28462341/rails-4-carrierwave-aws-exconerrorssocketerror-getaddrinfo-nodename-no/28462596#28462596", "title": "Rails 4: Carrierwave/AWS - Excon::Errors::SocketError / getaddrinfo: nodename nor servname provided", "body": "<p>Your region should be something like \"eu-west-1\" not \"Ireland\": </p>\n\n<pre><code>:region =&gt; 'eu-west-1',                    \n</code></pre>\n\n<p>Though you should check your region on your bucket to make sure you are picking the right one.</p>\n"}], "owner": {"reputation": 529, "user_id": 3574178, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6f9079310597136064b4b8197f7a8bf5?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/3574178/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1268, "favorite_count": 0, "accepted_answer_id": 28462596, "answer_count": 1, "score": 1, "last_activity_date": 1423682811, "creation_date": 1423681215, "question_id": 28462341, "link": "https://stackoverflow.com/questions/28462341/rails-4-carrierwave-aws-exconerrorssocketerror-getaddrinfo-nodename-no", "title": "Rails 4: Carrierwave/AWS - Excon::Errors::SocketError / getaddrinfo: nodename nor servname provided", "body": "<p>Want to use the carrierwave gem and AWS to upload images from my app.\nBut when i upload the image and submit get errors </p>\n\n<pre><code>Excon::Errors::SocketError in MoviesController#create\ngetaddrinfo: nodename nor servname provided\n</code></pre>\n\n<p>trace </p>\n\n<pre><code>app/controllers/movies_controller.rb:30:in `block in create'\napp/controllers/movies_controller.rb:29:in `create'\n\nParameters:\n\n{\"utf8\"=&gt;\"\u2713\",\n \"authenticity_token\"=&gt;\"laitXtzkMnWd/EHtVjFx0X5vE0P4kowXu84wH8fEVOQ=\",\n \"movie\"=&gt;{\"title\"=&gt;\"new \",\n \"description\"=&gt;\"te\",\n \"movie_length\"=&gt;\"12\",\n \"director\"=&gt;\"12\",\n \"rating\"=&gt;\"12\",\n \"image\"=&gt;#&lt;ActionDispatch::Http::UploadedFile:0x007fc913845fb0 @tempfile=#&lt;Tempfile:/var/folders/s8/fd5_m1_d3436ptj9znpcy3cc0000gn/T/RackMultipart20150211-642-1ow2dmn&gt;,\n @original_filename=\"IMG_0892.JPG\",\n @content_type=\"image/jpeg\",\n @headers=\"Content-Disposition: form-data; name=\\\"movie[image]\\\"; filename=\\\"IMG_0892.JPG\\\"\\r\\nContent-Type: image/jpeg\\r\\n\"&gt;},\n \"commit\"=&gt;\"Create Movie\"}\n</code></pre>\n\n<p>MoviesController#create</p>\n\n<pre><code>def create\n@movie = Movie.new(movie_params)\n\nrespond_to do |format|\n  **if @movie.save**&lt;--- Error\n    format.html { redirect_to @movie, notice: 'Movie was successfully created.' }\n    format.json { render :show, status: :created, location: @movie }\n  else\n    format.html { render :new }\n    format.json { render json: @movie.errors, status: :unprocessable_entity }\n  end\n</code></pre>\n\n<p>but i thinks it something to do with my aws setup  because i was able to create images without the AWS, but now since using the fog gem &amp; AWS access &amp; id keys it doesn't work</p>\n\n<p>config/initialiser.rb</p>\n\n<pre><code>CarrierWave.configure do |config|\n  config.fog_credentials = {\n    :provider               =&gt; 'AWS',                        # required\n    :aws_access_key_id      =&gt; 'AKIAIxxxxxxA',                        # required\n    :aws_secret_access_key  =&gt; 'UdRxhdOHoaxxxxxxxx3I9+vIId+',\n    :region =&gt; 'Ireland',                      # required\n  }\n  config.fog_directory  = 'moviesdemo'                     # required\nend\n</code></pre>\n\n<p>After searching for a solution, i believe you have to add the region now , but this does not work.</p>\n\n<pre><code>gemfile \n\nsource 'https://rubygems.org'\n\nruby \"2.0.0\"\ngem 'rails', '4.1.7'\ngem 'sqlite3', group: :development\ngem 'sass-rails', '~&gt; 4.0.3'\ngem 'uglifier', '&gt;= 1.3.0'\ngem 'coffee-rails', '~&gt; 4.0.0'\ngem 'jquery-rails'\ngem 'turbolinks'\ngem 'jbuilder', '~&gt; 2.0'\ngem 'sdoc', '~&gt; 0.4.0',          group: :doc\ngem 'spring',        group: :development\ngem 'bootstrap-sass', '~&gt; 3.3.3'\ngem 'rails_12factor', group: :production\ngem 'pg', group: :production\ngem 'carrierwave'\ngem 'fog'\n</code></pre>\n\n<p>image.uploader rb</p>\n\n<h1>encoding: utf-8</h1>\n\n<pre><code>class ImageUploader &lt; CarrierWave::Uploader::Base\n\n  # Include RMagick or MiniMagick support:\n  # include CarrierWave::RMagick\n  # include CarrierWave::MiniMagick\n\n  # Choose what kind of storage to use for this uploader:\n  # storage :file\n  storage :fog\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 252285, "user_id": 541091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd0165a88a06fc92a36f222606f17a11?s=128&d=identicon&r=PG", "display_name": "Michael Berkowski", "link": "https://stackoverflow.com/users/541091/michael-berkowski"}, "edited": false, "score": 1, "creation_date": 1423681349, "post_id": 28462338, "comment_id": 45250492, "body": "<a href=\"http://ruby-doc.org//core-2.2.0/Array.html#method-i-join\" rel=\"nofollow noreferrer\"><code>Array#join</code></a>"}], "answers": [{"comments": [{"owner": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "edited": false, "score": 0, "creation_date": 1423681402, "post_id": 28462370, "comment_id": 45250519, "body": "Perfect. Just what I was looking for. Thanks!"}], "tags": [], "owner": {"reputation": 18224, "user_id": 406987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8865b16d4f3493cfae865af2b3247fd3?s=128&d=identicon&r=PG", "display_name": "Doon", "link": "https://stackoverflow.com/users/406987/doon"}, "is_accepted": true, "score": 1, "last_activity_date": 1423681314, "creation_date": 1423681314, "answer_id": 28462370, "question_id": 28462338, "link": "https://stackoverflow.com/questions/28462338/how-do-i-convert-this-array-into-a-string/28462370#28462370", "title": "How do I convert this array into a string?", "body": "<p>use join?   <a href=\"http://ruby-doc.org//core-2.2.0/Array.html#method-i-join\" rel=\"nofollow\">http://ruby-doc.org//core-2.2.0/Array.html#method-i-join</a> </p>\n\n<pre><code>&gt;&gt; [\"39/13/36\", \"39/13/38/39\", \"39/13/38/35\"].join ','\n=&gt; \"39/13/36,39/13/38/39,39/13/38/35\"\n&gt;&gt;\n</code></pre>\n"}], "owner": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 28462370, "answer_count": 1, "score": -4, "last_activity_date": 1423681314, "creation_date": 1423681198, "question_id": 28462338, "link": "https://stackoverflow.com/questions/28462338/how-do-i-convert-this-array-into-a-string", "title": "How do I convert this array into a string?", "body": "<p>So I have an object that is an array with values like this:</p>\n\n<pre><code>[\"39/13/36\", \"39/13/38/39\", \"39/13/38/35\"]\n</code></pre>\n\n<p>I would like to convert that into a string that looks like this:</p>\n\n<pre><code>39/13/36,39/13/38/39,39/13/38/35\n</code></pre>\n\n<p>How do I do that?</p>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 0, "creation_date": 1423685353, "post_id": 28462122, "comment_id": 45252805, "body": "@mikej Please again compare this question with the one you referenced.  I do not understand the claim that this question is a duplicate of the former one. The previous question required a straightforward use of <code>invert</code>. That cannot be used here."}, {"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1423685835, "post_id": 28462122, "comment_id": 45253060, "body": "@Cary, sorry, you&#39;re right. Have re-opened. I think the title of this question could be improved, but the example does make it clear."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1578961523, "post_id": 28462122, "comment_id": 105602257, "body": "&quot;<a href=\"https://meta.stackoverflow.com/questions/260648\">Stack Overflow question checklist</a>&quot; is a good read. We need more than requirements, we need to see an attempt to solve the problem. Questions containing requirements only feel like you&#39;re asking us to write the code for you, which is off-topic."}], "answers": [{"comments": [{"owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "edited": false, "score": 1, "creation_date": 1423685875, "post_id": 28462234, "comment_id": 45253079, "body": "<code>Object#extend</code> blows out the ruby method cache and is not recommended for runtime code."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1423686224, "post_id": 28462234, "comment_id": 45253269, "body": "Very nice, JJ. Note you don&#39;t need <code>self.</code>. Perhaps worth noting that <code>...with_object(Hash.new { |h,k| h[k] = [] }</code>, <code>{ |v| result &lt;&lt; key }</code> is an alternative.  btw, I&#39;ve found that <code>...(result[v] ||= []) &lt;&lt; key</code> is generally the faster of the two. <code>include HashReverser</code> might be clearer."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1578961623, "post_id": 28462234, "comment_id": 105602278, "body": "Please explain your code and why it&#39;s the recommended solution. We&#39;re trying to educate, not just solve the immediate problem with the code."}], "tags": [], "owner": {"reputation": 16538, "user_id": 2602869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PkMYa.jpg?s=128&g=1", "display_name": "Jikku Jose", "link": "https://stackoverflow.com/users/2602869/jikku-jose"}, "is_accepted": false, "score": 3, "last_activity_date": 1423709122, "last_edit_date": 1423709122, "creation_date": 1423680925, "answer_id": 28462234, "question_id": 28462122, "link": "https://stackoverflow.com/questions/28462122/ruby-invert-a-hash-to-also-preserve-non-unique-values/28462234#28462234", "title": "Ruby: Invert a hash to also preserve non unique values", "body": "<p>Try this:</p>\n\n<pre><code>module HashReverser\n  def invert_map\n    each_with_object({}) do |(key, value), result|\n      value.each { |v| (result[v] ||= []) &lt;&lt; key }\n    end\n  end\nend\n\noriginal = {\"a\" =&gt; [1, 2, 3], \"b\" =&gt; [4, 5, 6], \"c\" =&gt; [3, 4, 5]}\n\noriginal.extend(HashReverser).invert_map # =&gt; {1=&gt;[\"a\"], 2=&gt;[\"a\"], 3=&gt;[\"a\", \"c\"], 4=&gt;[\"b\", \"c\"], 5=&gt;[\"b\", \"c\"], 6=&gt;[\"b\"]}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "is_accepted": false, "score": 1, "last_activity_date": 1423686894, "last_edit_date": 1423686894, "creation_date": 1423686588, "answer_id": 28463885, "question_id": 28462122, "link": "https://stackoverflow.com/questions/28462122/ruby-invert-a-hash-to-also-preserve-non-unique-values/28463885#28463885", "title": "Ruby: Invert a hash to also preserve non unique values", "body": "<p>An alternate solution:</p>\n\n<pre><code># Given\nh = {\"a\" =&gt; [1, 2, 3], \"b\" =&gt; [4, 5, 6], \"c\" =&gt; [3, 4, 5], \"d\" =&gt; [7, 2, 3]}\n\nh.flat_map {|k, v| v.product [k]}.group_by(&amp;:first).each_value {|v| v.map! &amp;:last }\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>h.flat_map {|k, v| v.product [k]}.reduce({}) {|o, (k, v)| (o[k] ||= []) &lt;&lt; v; o}\n</code></pre>\n\n<p>The idea here is that we use <code>Array#product</code> to create a list of inverted single key-value pairs:</p>\n\n<pre><code>product = h.flat_map {|k, v| v.product([k]) }\n# =&gt; [[1, \"a\"], [2, \"a\"], [3, \"a\"], [4, \"b\"], [5, \"b\"], [6, \"b\"], [3, \"c\"], [4, \"c\"], [5, \"c\"], [7, \"d\"], [2, \"d\"], [3, \"d\"]]\n</code></pre>\n\n<p>Group them by the value of the first item in each pair:</p>\n\n<pre><code>groups = product.group_by(&amp;:first)\n# =&gt; {1=&gt;[[1, \"a\"]], 2=&gt;[[2, \"a\"], [2, \"d\"]], 3=&gt;[[3, \"a\"], [3, \"c\"], [3, \"d\"]], 4=&gt;[[4, \"b\"], [4, \"c\"]], 5=&gt;[[5, \"b\"], [5, \"c\"]], 6=&gt;[[6, \"b\"]], 7=&gt;[[7, \"d\"]]}\n</code></pre>\n\n<p>And then convert the values to a list of the last values in each pair:</p>\n\n<pre><code>result = groups.each_value {|v| v.map! &amp;:last }\n# =&gt; {1=&gt;[\"a\"], 2=&gt;[\"a\", \"d\"], 3=&gt;[\"a\", \"c\", \"d\"], 4=&gt;[\"b\", \"c\"], 5=&gt;[\"b\", \"c\"], 6=&gt;[\"b\"], 7=&gt;[\"d\"]}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 2, "last_activity_date": 1578961584, "last_edit_date": 1578961584, "creation_date": 1423687678, "answer_id": 28464185, "question_id": 28462122, "link": "https://stackoverflow.com/questions/28462122/ruby-invert-a-hash-to-also-preserve-non-unique-values/28464185#28464185", "title": "Ruby: Invert a hash to also preserve non unique values", "body": "<p>I do prefer @Jikku's solution, but there's always another way. Here's one. \n(I see this is very close to @Chris's solution. I will leave it for the last line, which is a little different.)</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>def inside_out(h)\n  g = h.flat_map { |s,a| a.product([s]) }\n       .group_by(&amp;:first)\n  g.merge(g) { |_,a| a.map(&amp;:last) }\nend\n</code></pre>\n\n<p><strong>Example</strong></p>\n\n<pre><code>h = {\"a\" =&gt; [1, 2, 3], \"b\" =&gt; [4, 5, 6], \"c\" =&gt; [3, 4, 5], \"d\" =&gt; [7, 2, 3]}\n\ninside_out(h)\n  #=&gt; {1=&gt;[\"a\"], 2=&gt;[\"a\", \"d\"], 3=&gt;[\"a\", \"c\", \"d\"], 4=&gt;[\"b\", \"c\"],\n  #    5=&gt;[\"b\", \"c\"], 6=&gt;[\"b\"], 7=&gt;[\"d\"]} \n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p>For <code>h</code> above:</p>\n\n<pre><code>a = h.flat_map { |s,a| a.product([s]) }\n  #=&gt; [[1, \"a\"], [2, \"a\"], [3, \"a\"], [4, \"b\"], [5, \"b\"], [6, \"b\"],\n  #    [3, \"c\"], [4, \"c\"], [5, \"c\"], [7, \"d\"], [2, \"d\"], [3, \"d\"]] \ng = a.group_by(&amp;:first)\n  #=&gt; {1=&gt;[[1, \"a\"]], 2=&gt;[[2, \"a\"], [2, \"d\"]],\n  #    3=&gt;[[3, \"a\"], [3, \"c\"], [3, \"d\"]],\n  #    4=&gt;[[4, \"b\"], [4, \"c\"]],\n  #    5=&gt;[[5, \"b\"], [5, \"c\"]],\n  #    6=&gt;[[6, \"b\"]],\n  #    7=&gt;[[7, \"d\"]]} \ng.merge(g) { |_,a| a.map(&amp;:last) }\n  #=&gt; {1=&gt;[\"a\"], 2=&gt;[\"a\", \"d\"], 3=&gt;[\"a\", \"c\", \"d\"], 4=&gt;[\"b\", \"c\"],\n  #    5=&gt;[\"b\", \"c\"], 6=&gt;[\"b\"], 7=&gt;[\"d\"]} \n</code></pre>\n"}], "owner": {"reputation": 363, "user_id": 4344373, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/hBNOU.jpg?s=128&g=1", "display_name": "A.V. Arno", "link": "https://stackoverflow.com/users/4344373/a-v-arno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 0, "accepted_answer_id": 28464185, "answer_count": 3, "score": 1, "last_activity_date": 1578961584, "creation_date": 1423680576, "last_edit_date": 1423710070, "question_id": 28462122, "link": "https://stackoverflow.com/questions/28462122/ruby-invert-a-hash-to-also-preserve-non-unique-values", "title": "Ruby: Invert a hash to also preserve non unique values", "body": "<p>I have a hash that looks like this:</p>\n\n<pre><code>{\"a\" =&gt; [1, 2, 3], \"b\" =&gt; [4, 5, 6], \"c\" =&gt; [3, 4, 5], \"d\" =&gt; [7, 2, 3]}\n</code></pre>\n\n<p>What I want to do is to make a hash of all existing values with an array of all keys that included it, e.g. turn the above into this:</p>\n\n<pre><code>{1 =&gt; [\"a\"], 2 =&gt; [\"a\", \"d\"], 3 =&gt; [\"a\", \"c\", \"d\"], 4 =&gt; [\"b\", \"c\"]}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "unit-testing", "rspec", "stripe-payments"], "comments": [{"owner": {"reputation": 34809, "user_id": 49695, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/007fcb22bed672220b54afb4c46ef8c3?s=128&d=identicon&r=PG", "display_name": "soundly_typed", "link": "https://stackoverflow.com/users/49695/soundly-typed"}, "edited": false, "score": 0, "creation_date": 1423694141, "post_id": 28462061, "comment_id": 45257423, "body": "What Stripe API version are you using?"}, {"owner": {"reputation": 2950, "user_id": 4117788, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/8Rn69.jpg?s=128&g=1", "display_name": "softcode", "link": "https://stackoverflow.com/users/4117788/softcode"}, "reply_to_user": {"reputation": 34809, "user_id": 49695, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/007fcb22bed672220b54afb4c46ef8c3?s=128&d=identicon&r=PG", "display_name": "soundly_typed", "link": "https://stackoverflow.com/users/49695/soundly-typed"}, "edited": false, "score": 0, "creation_date": 1423694967, "post_id": 28462061, "comment_id": 45257781, "body": "I&#39;m using Stripe Custom Checkout @mindeavor 2015-01-11"}], "owner": {"reputation": 2950, "user_id": 4117788, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/8Rn69.jpg?s=128&g=1", "display_name": "softcode", "link": "https://stackoverflow.com/users/4117788/softcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1336, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1423681732, "creation_date": 1423680381, "last_edit_date": 1423681732, "question_id": 28462061, "link": "https://stackoverflow.com/questions/28462061/rspec-testing-with-stripe-ruby-mock", "title": "RSpec testing with stripe-ruby-mock", "body": "<p>If a Stripe charge is successful, and the posted info passes the validations, the user should be redirected to the sold_url.</p>\n\n<pre><code>def create\n\n    customer = Stripe::Customer.create(\n        :email        =&gt; params[:stripeEmail],\n        :card         =&gt; params[:stripeToken],\n    )\n    charge = Stripe::Charge.create(\n        :customer     =&gt; customer.id,\n        :amount       =&gt; @price * 100,\n    )\n\n    if charge[\"paid\"]\n      @product.update(status: \"sold\",\n                      email:      params[:stripeEmail],\n                      first_name: params[:first_name],\n                      last_name:  params[:last_name])\n      @product.update_attribute(:agreed_to_terms, 1)\n      redirect_to :back\n    else\n      @product.update_attribute(:status, \"for_sale\")\n    end\n</code></pre>\n\n<p>If it fails, it should be redirected <code>:back</code> to the url of the product it failed to buy.</p>\n\n<pre><code>rescue Stripe::CardError =&gt; e\n  flash[:error] = e.message\n  redirect_to :back\nend\n</code></pre>\n\n<p>I am trying to mock the transaction with stripe-ruby-mock.</p>\n\n<pre><code>RSpec.describe 'checkout page', :type =&gt; :request do\n\n  let(:stripe_helper) { StripeMock.create_test_helper }\n  before { StripeMock.start }\n  after { StripeMock.stop }\n\n    it 'redirects back if there is missing info' do\n    post \"/product/1\", {:first_name =&gt; \"john\", :last_name =&gt; \"doe\",\n     :stripeEmail =&gt; \"johndoe@doe.com\"}, {:referer =&gt; '/product/1'}\n    expect(response).to redirect_to '/product/1'\n  end\n\n  it 'successfully processes a charge' do\n    post \"/product/1\", {:first_name =&gt; \"john\",\n                     :last_name =&gt; \"doe\",\n                     :stripeEmail =&gt; \"johndoe@doe.com\",\n                     :stripeToken =&gt; stripe_helper.generate_card_token,\n                     :agreed_to_terms =&gt; 1},\n                    {:referer =&gt; '/product/1'}\n    expect(response).to redirect_to 'sold_url'\n  end\n</code></pre>\n\n<p>But it responds that the test with missing info is being redirected to the sold_url. </p>\n\n<pre><code>Failures:\n\n  1) checkout page redirects back if there is missing info\n     Failure/Error: expect(response).to redirect_to '/product/1'\n       Expected response to be a redirect to &lt;http://www.example.com/product/1&gt; but was a redirect to &lt;http://www.example.com/sold&gt;.\n       Expected \"http://www.example.com/product/1\" to be === \"http://www.example.com/sold\".\n</code></pre>\n\n<p>Is it my controller or my test that is misbehaving? </p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "erb"], "answers": [{"comments": [{"owner": {"reputation": 102358, "user_id": 15245, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a2a53db8e9b4476038c94a64b32833f?s=128&d=identicon&r=PG", "display_name": "Ryan Bigg", "link": "https://stackoverflow.com/users/15245/ryan-bigg"}, "edited": false, "score": 0, "creation_date": 1423691346, "post_id": 28462153, "comment_id": 45256004, "body": "This doesn&#39;t show an example of how to do what OP asked."}, {"owner": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "reply_to_user": {"reputation": 102358, "user_id": 15245, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a2a53db8e9b4476038c94a64b32833f?s=128&d=identicon&r=PG", "display_name": "Ryan Bigg", "link": "https://stackoverflow.com/users/15245/ryan-bigg"}, "edited": false, "score": 0, "creation_date": 1423710538, "post_id": 28462153, "comment_id": 45262463, "body": "My answer showed the signature to use in order to solve his problem. Added the example..."}], "tags": [], "owner": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "is_accepted": false, "score": 0, "last_activity_date": 1423710463, "last_edit_date": 1423710463, "creation_date": 1423680660, "answer_id": 28462153, "question_id": 28461970, "link": "https://stackoverflow.com/questions/28461970/add-extra-options-to-link-to-do/28462153#28462153", "title": "Add extra options to link_to do", "body": "<p>From my understanding you want to pass options to the <code>link_to</code> helper when using a block.</p>\n\n<p>From the documentation at <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to\" rel=\"nofollow\">http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to</a></p>\n\n<p>This is possible with the following format</p>\n\n<pre><code>link_to(options = {}, html_options = {}) do\n  # name\nend\n</code></pre>\n\n<p>To give you an example and using the code you provided: </p>\n\n<pre><code>&lt;%= link_to({:controller =&gt; 'my_controller', :action =&gt; 'my_action', :id =&gt; my_id}) do %&gt;\n    &lt;div&gt;haha&lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2154, "user_id": 1114100, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8d225bfda3b417fa74b8340a5a2c1cf4?s=128&d=identicon&r=PG", "display_name": "Vlad Otrocol", "link": "https://stackoverflow.com/users/1114100/vlad-otrocol"}, "edited": false, "score": 0, "creation_date": 1423770785, "post_id": 28465165, "comment_id": 45294847, "body": "I kept doing this but without any { }. Thank you for your repsonse."}], "tags": [], "owner": {"reputation": 102358, "user_id": 15245, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a2a53db8e9b4476038c94a64b32833f?s=128&d=identicon&r=PG", "display_name": "Ryan Bigg", "link": "https://stackoverflow.com/users/15245/ryan-bigg"}, "is_accepted": true, "score": 2, "last_activity_date": 1423691268, "creation_date": 1423691268, "answer_id": 28465165, "question_id": 28461970, "link": "https://stackoverflow.com/questions/28461970/add-extra-options-to-link-to-do/28465165#28465165", "title": "Add extra options to link_to do", "body": "<p>Just like in your second example:</p>\n\n<pre><code>&lt;%= link_to({:controller =&gt; 'my_controller', :action =&gt; 'my_action', :id =&gt; my_id}) do %&gt;\n   My text goes here\n&lt;% end %&gt;\n</code></pre>\n\n<p>If you have a path helper for this (i.e. if it's something like <code>PostsController</code>'s <code>show</code> action) then you could do:</p>\n\n<pre><code>&lt;%= link_to post_path(my_id) do %&gt;\n  My text goes here\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 2154, "user_id": 1114100, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8d225bfda3b417fa74b8340a5a2c1cf4?s=128&d=identicon&r=PG", "display_name": "Vlad Otrocol", "link": "https://stackoverflow.com/users/1114100/vlad-otrocol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 28465165, "answer_count": 2, "score": 0, "last_activity_date": 1423710463, "creation_date": 1423680125, "question_id": 28461970, "link": "https://stackoverflow.com/questions/28461970/add-extra-options-to-link-to-do", "title": "Add extra options to link_to do", "body": "<p>I would like to pass a parameter with this link_to helper. How do I do that?</p>\n\n<pre><code>&lt;%= link_to ('/my_controller/my_action') do %&gt;\n    &lt;div&gt;haha&lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>The original code I had used the standard text link:</p>\n\n<pre><code>&lt;%= link_to(\"link text\", {:controller =&gt; 'my_controller', :action =&gt; 'my_action', :id =&gt; my_id}) %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "time", "ruby-2.1"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1423677841, "post_id": 28461183, "comment_id": 45248457, "body": "Please rephrase your wording. It is misleading/confusing. Where you claim comparison fails, it isn&#39;t failing, it is succeeding and is returning <code>false</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1423680446, "post_id": 28461183, "comment_id": 45249929, "body": "This appears to be a pure Ruby question, in which case you should  remove all reference to Rails, especially the Rails tags."}], "answers": [{"comments": [{"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 2, "creation_date": 1423679251, "post_id": 28461413, "comment_id": 45249207, "body": "Sounds like the usual floating point shenanigans- 43.1 can&#39;t be represented exactly."}, {"owner": {"reputation": 10654, "user_id": 476048, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/dhByN.jpg?s=128&g=1", "display_name": "Berin Loritsch", "link": "https://stackoverflow.com/users/476048/berin-loritsch"}, "edited": false, "score": 0, "creation_date": 1423742932, "post_id": 28461413, "comment_id": 45277041, "body": "I.e. Precision.  When comparing 2 numbers that only matter if they are &quot;close enough&quot; (i.e. floating point and time values), you have to make sure they are within acceptable bounds."}], "tags": [], "owner": {"reputation": 4349, "user_id": 648392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b2bd8a8c583866711c234a612f6b157?s=128&d=identicon&r=PG", "display_name": "Jesper", "link": "https://stackoverflow.com/users/648392/jesper"}, "is_accepted": true, "score": 5, "last_activity_date": 1423678356, "creation_date": 1423678356, "answer_id": 28461413, "question_id": 28461183, "link": "https://stackoverflow.com/questions/28461183/why-do-certain-time-comparisons-have-counterintuitive-results/28461413#28461413", "title": "Why do certain Time comparisons have counterintuitive results?", "body": "<p>Ruby compares fractional seconds as well as seconds when comparing times. For some reason your times receive different fractional seconds:</p>\n\n<pre><code>Time.parse(\"2015-02-09T22:38:43.1Z\").subsec\n# =&gt; (1/10)\nTime.utc(2015, 2, 9, 22, 38, 43.1).subsec\n# =&gt; (14073748835533/140737488355328)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 10654, "user_id": 476048, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/dhByN.jpg?s=128&g=1", "display_name": "Berin Loritsch", "link": "https://stackoverflow.com/users/476048/berin-loritsch"}, "edited": false, "score": 0, "creation_date": 1423743074, "post_id": 28461550, "comment_id": 45277129, "body": "Anyone care to comment on why my answer was downvoted?  It is correct.  The <code>Time.parse</code> and <code>Time.utc</code> methods are logically similar, but due to precision and rounding issues have differing fractional values.  However, if 0.1 second granularity is all you need, they would be equivalent if you tested for that."}], "tags": [], "owner": {"reputation": 10654, "user_id": 476048, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/dhByN.jpg?s=128&g=1", "display_name": "Berin Loritsch", "link": "https://stackoverflow.com/users/476048/berin-loritsch"}, "is_accepted": false, "score": -1, "last_activity_date": 1423743648, "last_edit_date": 1423743648, "creation_date": 1423678791, "answer_id": 28461550, "question_id": 28461183, "link": "https://stackoverflow.com/questions/28461183/why-do-certain-time-comparisons-have-counterintuitive-results/28461550#28461550", "title": "Why do certain Time comparisons have counterintuitive results?", "body": "<p>I believe you are running into an issue with precision.  The reason the integer seconds compare works is due to the precision of integers, and Ruby performed a <code>.to_i</code> on the parsed version for you.</p>\n\n<p>Underlying the Time class is an integer that represents a very precise integer number, and parsing and explicit values might be treated just differently enough to cause problems.  If sub-second precision is not important to you, then it would be best to compare seconds:</p>\n\n<pre><code>Time.parse(\"2015-02-09T22:38:43.1Z\").to_i == Time.utc(2015, 2, 9, 22, 38, 43.1).to_i\n</code></pre>\n\n<p>In the above case you are comparing seconds since the Unix epoch (Jan 1, 1970)</p>\n\n<p>Another option would be to create a function to compare two times within a certain precision.  Many unit testing frameworks provide that feature.  Essentially if T1 == T2 within 0.1 seconds, it's good enough.</p>\n\n<p>The easiest way to do a \"within\" comparison would be like this:</p>\n\n<pre><code>def within(time1, time2, precision)\n    return (time1 - time2).abs &lt; precision\nend\n</code></pre>\n\n<p>NOTE: the above works with time, floating points, and fractions.</p>\n"}], "owner": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 1, "accepted_answer_id": 28461413, "answer_count": 2, "score": 0, "last_activity_date": 1423766476, "creation_date": 1423677579, "last_edit_date": 1423766476, "question_id": 28461183, "link": "https://stackoverflow.com/questions/28461183/why-do-certain-time-comparisons-have-counterintuitive-results", "title": "Why do certain Time comparisons have counterintuitive results?", "body": "<p>In Ruby 2.1.2, I can successfully compare the result of <code>Time.parse</code> and <code>Time.utc</code> for the same time, and it returns the expected <code>true</code>:</p>\n\n<pre><code>Time.parse(\"2015-02-09T22:38:43Z\") == Time.utc(2015, 2, 9, 22, 38, 43)\n=&gt; true\n</code></pre>\n\n<p>However, this same comparison counterintuitively returns <code>false</code> when the second value is not an integer:</p>\n\n<pre><code>Time.parse(\"2015-02-09T22:38:43.1Z\") == Time.utc(2015, 2, 9, 22, 38, 43.1)\n=&gt; false\n</code></pre>\n\n<p>This is despite the fact that the second values are still integers and are still equivalent:</p>\n\n<pre><code>Time.parse(\"2015-02-09T22:38:43.1Z\").sec\n=&gt; 43\nTime.utc(2015, 2, 9, 22, 38, 43.1).sec\n=&gt; 43\nTime.parse(\"2015-02-09T22:38:43.1Z\").sec == Time.utc(2015, 2, 9, 22, 38, 43.1).sec\n=&gt; true\n</code></pre>\n\n<p>Moreover, the comparison results in <code>true</code> between successive calls of the same methods:</p>\n\n<pre><code>Time.parse(\"2015-02-09T22:38:43.1Z\") == Time.parse(\"2015-02-09T22:38:43.1Z\")\n=&gt; true\nTime.utc(2015, 2, 9, 22, 38, 43.1) == Time.utc(2015, 2, 9, 22, 38, 43.1)\n=&gt; true\n</code></pre>\n\n<p>Why is this so? Is this a bug, or am I missing something?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 4018, "user_id": 135673, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42ee5885ec2ae8f7834b716a3a2b57c2?s=128&d=identicon&r=PG", "display_name": "froderik", "link": "https://stackoverflow.com/users/135673/froderik"}, "edited": false, "score": 0, "creation_date": 1423677472, "post_id": 28460892, "comment_id": 45248240, "body": "guessing that devise isn&#39;t set up properly for your new static pages. You could use another layout for them or make sure that your StaticPagesController is set up in the same way as other controllers in the application. (Assuming that there is other stuff in there that uses devise succesfully.)"}, {"owner": {"reputation": 15, "user_id": 4195621, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-daW3G1K7xuY/AAAAAAAAAAI/AAAAAAAAAiU/J4oFFGmCyWk/photo.jpg?sz=128", "display_name": "Eric M. Seitz", "link": "https://stackoverflow.com/users/4195621/eric-m-seitz"}, "reply_to_user": {"reputation": 4018, "user_id": 135673, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42ee5885ec2ae8f7834b716a3a2b57c2?s=128&d=identicon&r=PG", "display_name": "froderik", "link": "https://stackoverflow.com/users/135673/froderik"}, "edited": false, "score": 0, "creation_date": 1423699259, "post_id": 28460892, "comment_id": 45259440, "body": "Yes, I agree that devise is not set up to handle the static pages.  Not sure what you mean by setting up the controller the same way as the other controllers are."}, {"owner": {"reputation": 4018, "user_id": 135673, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42ee5885ec2ae8f7834b716a3a2b57c2?s=128&d=identicon&r=PG", "display_name": "froderik", "link": "https://stackoverflow.com/users/135673/froderik"}, "edited": false, "score": 0, "creation_date": 1423722879, "post_id": 28460892, "comment_id": 45266105, "body": "In most setups all controllers inherit <code>ApplicationController</code> that helps with this. (I don&#39;t remember how it is normally done with devise though.) Your error appears in the common layout that is used by default. If you don&#39;t care about logged in users in this case you could either: (1) add a check if it is a static page to the <code>if</code> in your markup or (2) use a different layout for static pages with maybe the common stuff in a partial"}, {"owner": {"reputation": 15, "user_id": 4195621, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-daW3G1K7xuY/AAAAAAAAAAI/AAAAAAAAAiU/J4oFFGmCyWk/photo.jpg?sz=128", "display_name": "Eric M. Seitz", "link": "https://stackoverflow.com/users/4195621/eric-m-seitz"}, "reply_to_user": {"reputation": 4018, "user_id": 135673, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42ee5885ec2ae8f7834b716a3a2b57c2?s=128&d=identicon&r=PG", "display_name": "froderik", "link": "https://stackoverflow.com/users/135673/froderik"}, "edited": false, "score": 1, "creation_date": 1423746755, "post_id": 28460892, "comment_id": 45279273, "body": "That&#39;s it! Your explanation did it for me. I will post an answer to my own question, but you deserve all of the credit. Your help is much appreciated."}], "answers": [{"tags": [], "owner": {"reputation": 15, "user_id": 4195621, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-daW3G1K7xuY/AAAAAAAAAAI/AAAAAAAAAiU/J4oFFGmCyWk/photo.jpg?sz=128", "display_name": "Eric M. Seitz", "link": "https://stackoverflow.com/users/4195621/eric-m-seitz"}, "is_accepted": true, "score": 0, "last_activity_date": 1423747014, "last_edit_date": 1495539812, "creation_date": 1423747014, "answer_id": 28478454, "question_id": 28460892, "link": "https://stackoverflow.com/questions/28460892/adding-a-new-controller-brings-a-new-devise-authentication-error-in-rails/28478454#28478454", "title": "Adding a New Controller Brings a new Devise Authentication Error in Rails", "body": "<p>With the help of froderik (see comments in question) I have figured this out.</p>\n\n<p>I was thinking about things the incorrect way, trying to blame devise, when it was only doing what it was told to do. My new static pages were utilizing the application layout, by default. This loaded my application's navbar. That navbar is full of devise authentication logic. </p>\n\n<p>By creating a new layout for static pages, and then telling my static pages controller to use that layout, I was able to solve my problem. </p>\n\n<p>The first answer on this post offers additional/related information. </p>\n\n<p><a href=\"https://stackoverflow.com/questions/8836741/rails-specify-layout-for-static-pages\">Rails specify layout for static pages</a></p>\n"}], "owner": {"reputation": 15, "user_id": 4195621, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-daW3G1K7xuY/AAAAAAAAAAI/AAAAAAAAAiU/J4oFFGmCyWk/photo.jpg?sz=128", "display_name": "Eric M. Seitz", "link": "https://stackoverflow.com/users/4195621/eric-m-seitz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 28478454, "answer_count": 1, "score": 0, "last_activity_date": 1423747014, "creation_date": 1423676627, "question_id": 28460892, "link": "https://stackoverflow.com/questions/28460892/adding-a-new-controller-brings-a-new-devise-authentication-error-in-rails", "title": "Adding a New Controller Brings a new Devise Authentication Error in Rails", "body": "<p>I am working on a Rails app that I have co-coded with another Jr. developer.</p>\n\n<p>I want to add a static home page and a static help page to the application.</p>\n\n<p>Following Hartl's instructions (<a href=\"https://www.railstutorial.org/book/static_pages#cha-static_pages\" rel=\"nofollow\">https://www.railstutorial.org/book/static_pages#cha-static_pages</a>) I added a static pages controller to the application for home and help pages. When I navigate to static_pages/home I get this error:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>NameError in Static_pages#home\r\n\r\nShowing /vagrant/src/statuscaster2/app/views/layouts/application.html.erb where line #34 raised:\r\n\r\nundefined local variable or method `devise_mapping' for #&lt;#&lt;Class:0xb9d6860c&gt;:0xb9d7ad34&gt;\r\nExtracted source (around line #34):\r\n\r\n31:           &lt;% if user_signed_in? %&gt;\r\n32:             &lt;%= link_to 'Sign Out', destroy_user_session_path, :method =&gt; :delete %&gt;\r\n33:           &lt;% else %&gt;\r\n34:             &lt;%- if devise_mapping.registerable? &amp;&amp; controller_name != 'registrations' %&gt;\r\n35:               &lt;%= link_to \"Sign up\", new_registration_path(resource_name) %&gt;\r\n36:             &lt;% end -%&gt;\r\n37:           &lt;% end %&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Devise isn't happy. Line 31 is asking the application if the visitor is signed in and trying to log the user out if they are registered. Line 33 sends visitors to an opportunity to register.</p>\n\n<p>I don't know how to handle this and would be grateful for assistance from the SO community.</p>\n"}, {"tags": ["ruby", "gem", "rubygems", "ubuntu-14.04"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1423677011, "post_id": 28460839, "comment_id": 45247995, "body": "The problem is likely with <code>checking for Ruby 1.9 Hash... no</code>. It results in <code>implicit declaration of function \u2018RHASH\u2019</code> and everything failed. I had no problem installing this gem on ruby2."}, {"owner": {"reputation": 417, "user_id": 1554541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gaA3Y.jpg?s=128&g=1", "display_name": "Denis", "link": "https://stackoverflow.com/users/1554541/denis"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1423687977, "post_id": 28460839, "comment_id": 45254258, "body": "I&#39;ve reinstalled ruby 2.0 from scratch and it helped! How to select your answer as best?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1423718896, "post_id": 28460839, "comment_id": 45264711, "body": "Since re-installation solved your problem I put slightly modified comment as an answer for future visitors."}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1423718865, "creation_date": 1423718865, "answer_id": 28469972, "question_id": 28460839, "link": "https://stackoverflow.com/questions/28460839/curb-v-0-8-5-wont-install-on-ubuntu-14-04/28469972#28469972", "title": "Curb v 0.8.5 won&#39;t install on Ubuntu 14.04", "body": "<p>The problem is likely with checking for <code>Ruby 1.9 Hash... no</code> (look for this string in your output.) It results in implicit declaration of function \u2018RHASH\u2019 and everything failed. </p>\n\n<p>I personally have no problem installing this gem on ruby2. </p>\n\n<p>I would suggest you to re-install ruby2 and that probably should help.</p>\n"}, {"comments": [{"owner": {"reputation": 172, "user_id": 4503232, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/z2jpl.png?s=128&g=1", "display_name": "FredyK", "link": "https://stackoverflow.com/users/4503232/fredyk"}, "edited": false, "score": 0, "creation_date": 1492632452, "post_id": 32790044, "comment_id": 74064865, "body": "Installing v 0.8.8 also solved my problem with ubuntu16 and ruby 2.4"}, {"owner": {"reputation": 172, "user_id": 4503232, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/z2jpl.png?s=128&g=1", "display_name": "FredyK", "link": "https://stackoverflow.com/users/4503232/fredyk"}, "edited": false, "score": 0, "creation_date": 1492632959, "post_id": 32790044, "comment_id": 74065159, "body": "In fact,  I did an &quot;bundle update curb&quot; after &quot;gem install curb -v &#39;0.8.8&#39;&quot;  to update the gemfile.lock"}], "tags": [], "owner": {"reputation": 25610, "user_id": 1426788, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8b836ad1cd8807ca747fe5c5cf6e1839?s=128&d=identicon&r=PG", "display_name": "lfender6445", "link": "https://stackoverflow.com/users/1426788/lfender6445"}, "is_accepted": false, "score": 1, "last_activity_date": 1443212338, "creation_date": 1443212338, "answer_id": 32790044, "question_id": 28460839, "link": "https://stackoverflow.com/questions/28460839/curb-v-0-8-5-wont-install-on-ubuntu-14-04/32790044#32790044", "title": "Curb v 0.8.5 won&#39;t install on Ubuntu 14.04", "body": "<p>Using ruby 2.2.3 I was able to resolve issue by upgrading curb</p>\n\n<pre><code>gem install curb -v '0.8.8'\n</code></pre>\n"}], "owner": {"reputation": 417, "user_id": 1554541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gaA3Y.jpg?s=128&g=1", "display_name": "Denis", "link": "https://stackoverflow.com/users/1554541/denis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 576, "favorite_count": 0, "accepted_answer_id": 28469972, "answer_count": 2, "score": 0, "last_activity_date": 1443212338, "creation_date": 1423676415, "last_edit_date": 1592644375, "question_id": 28460839, "link": "https://stackoverflow.com/questions/28460839/curb-v-0-8-5-wont-install-on-ubuntu-14-04", "title": "Curb v 0.8.5 won&#39;t install on Ubuntu 14.04", "body": "<p>I'm trying to install curb v 0.8.5 gem but without any success.</p>\n<p>Below is a stack trace:</p>\n<pre><code>/usr/local/bin/ruby -r ./siteconf20150211-19572-1mel9g2.rb extconf.rb\nchecking for curl-config... yes\nchecking for curlinfo_appconnect_time... yes\nchecking for curlinfo_redirect_time... yes\nchecking for curlinfo_response_code... yes\nchecking for curlinfo_filetime... yes\nchecking for curlinfo_redirect_count... yes\nchecking for curlinfo_os_errno... yes\nchecking for curlinfo_num_connects... yes\nchecking for curlinfo_ftp_entry_path... yes\nchecking for curl_version_ssl... yes\nchecking for curl_version_libz... yes\nchecking for curl_version_ntlm... yes\nchecking for curl_version_gssnegotiate... yes\nchecking for curl_version_debug... yes\nchecking for curl_version_asynchdns... yes\nchecking for curl_version_spnego... yes\nchecking for curl_version_largefile... yes\nchecking for curl_version_idn... yes\nchecking for curl_version_sspi... yes\nchecking for curl_version_conv... yes\nchecking for curlproxy_http... yes\nchecking for curlproxy_socks4... yes\nchecking for curlproxy_socks5... yes\nchecking for curlauth_basic... yes\nchecking for curlauth_digest... yes\nchecking for curlauth_gssnegotiate... yes\nchecking for curlauth_ntlm... yes\nchecking for curlauth_anysafe... yes\nchecking for curlauth_any... yes\nchecking for curle_tftp_notfound... yes\nchecking for curle_tftp_perm... yes\nchecking for curle_tftp_diskfull... yes\nchecking for curle_tftp_illegal... yes\nchecking for curle_tftp_unknownid... yes\nchecking for curle_tftp_exists... yes\nchecking for curle_tftp_nosuchuser... yes\nchecking for curle_send_fail_rewind... yes\nchecking for curle_ssl_engine_initfailed... yes\nchecking for curle_login_denied... yes\nchecking for curlmopt_maxconnects... yes\nchecking for curlopt_seekfunction... yes\nchecking for curlopt_seekdata... yes\nchecking for curlopt_sockoptfunction... yes\nchecking for curlopt_sockoptdata... yes\nchecking for curlopt_opensocketfunction... yes\nchecking for curlopt_opensocketdata... yes\nchecking for curle_conv_failed... yes\nchecking for curle_conv_reqd... yes\nchecking for curle_ssl_cacert_badfile... yes\nchecking for curle_remote_file_not_found... yes\nchecking for curle_ssh... yes\nchecking for curle_ssl_shutdown_failed... yes\nchecking for curle_again... yes\nchecking for curle_ssl_crl_badfile... yes\nchecking for curle_ssl_issuer_error... yes\nchecking for curlinfo_redirect_url... yes\nchecking for curlopt_username... yes\nchecking for curlopt_password... yes\nchecking for curlinfo_primary_ip... yes\nchecking for curlauth_digest_ie... yes\nchecking for curlftpmethod_multicwd... yes\nchecking for curlftpmethod_nocwd... yes\nchecking for curlftpmethod_singlecwd... yes\nchecking for curlm_bad_socket... yes\nchecking for curlm_unknown_option... yes\nchecking for curl_multi_timeout()... yes\nchecking for curl_multi_fdset()... yes\nchecking for curl_multi_perform()... yes\nchecking for curlopt_interleavefunction... yes\nchecking for curlopt_interleavedata... yes\nchecking for curlopt_chunk_bgn_function... yes\nchecking for curlopt_chunk_end_function... yes\nchecking for curlopt_chunk_data... yes\nchecking for curlopt_fnmatch_function... yes\nchecking for curlopt_fnmatch_data... yes\nchecking for curlopt_errorbuffer... yes\nchecking for curlopt_stderr... yes\nchecking for curlopt_failonerror... yes\nchecking for curlopt_url... yes\nchecking for curlopt_protocols... yes\nchecking for curlopt_redir_protocols... yes\nchecking for curlopt_proxy... yes\nchecking for curlopt_proxyport... yes\nchecking for curlopt_proxytype... yes\nchecking for curlopt_noproxy... yes\nchecking for curlopt_httpproxytunnel... yes\nchecking for curlopt_socks5_gssapi_service... yes\nchecking for curlopt_socks5_gssapi_nec... yes\nchecking for curlopt_interface... yes\nchecking for curlopt_localport... yes\nchecking for curlopt_dns_cache_timeout... yes\nchecking for curlopt_dns_use_global_cache... yes\nchecking for curlopt_buffersize... yes\nchecking for curlopt_port... yes\nchecking for curlopt_tcp_nodelay... yes\nchecking for curlopt_address_scope... yes\nchecking for curlopt_netrc... yes\nchecking for curl_netrc_optional... yes\nchecking for curl_netrc_ignored... yes\nchecking for curl_netrc_required... yes\nchecking for curlopt_netrc_file... yes\nchecking for curlopt_userpwd... yes\nchecking for curlopt_proxyuserpwd... yes\nchecking for curlopt_username... yes\nchecking for curlopt_password... yes\nchecking for curlopt_password... yes\nchecking for curlopt_password... yes\nchecking for curlopt_httpauth... yes\nchecking for curlauth_digest_ie... yes\nchecking for curlauth_only... yes\nchecking for curlopt_tlsauth_type... yes\nchecking for curlopt_tlsauth_srp... no\nchecking for curlopt_tlsauth_username... yes\nchecking for curlopt_tlsauth_password... yes\nchecking for curlopt_proxyauth... yes\nchecking for curlopt_autoreferer... yes\nchecking for curlopt_encoding... yes\nchecking for curlopt_followlocation... yes\nchecking for curlopt_unrestricted_auth... yes\nchecking for curlopt_maxredirs... yes\nchecking for curlopt_postredir... yes\nchecking for curlopt_put... yes\nchecking for curlopt_post... yes\nchecking for curlopt_postfields... yes\nchecking for curlopt_postfieldsize... yes\nchecking for curlopt_postfieldsize_large... yes\nchecking for curlopt_copypostfields... yes\nchecking for curlopt_httppost... yes\nchecking for curlopt_referer... yes\nchecking for curlopt_useragent... yes\nchecking for curlopt_httpheader... yes\nchecking for curlopt_http200aliases... yes\nchecking for curlopt_cookie... yes\nchecking for curlopt_cookiefile... yes\nchecking for curlopt_cookiejar... yes\nchecking for curlopt_cookiesession... yes\nchecking for curlopt_cookielist... yes\nchecking for curlopt_httpget... yes\nchecking for curlopt_http_version... yes\nchecking for curl_http_version_none... yes\nchecking for curl_http_version_1_0... yes\nchecking for curl_http_version_1_1... yes\nchecking for curlopt_ignore_content_length... yes\nchecking for curlopt_http_content_decoding... yes\nchecking for curlopt_http_transfer_decoding... yes\nchecking for curlopt_mail_from... yes\nchecking for curlopt_mail_rcpt... yes\nchecking for curlopt_tftp_blksize... yes\nchecking for curlopt_ftpport... yes\nchecking for curlopt_quote... yes\nchecking for curlopt_postquote... yes\nchecking for curlopt_prequote... yes\nchecking for curlopt_dirlistonly... yes\nchecking for curlopt_append... yes\nchecking for curlopt_ftp_use_eprt... yes\nchecking for curlopt_ftp_use_epsv... yes\nchecking for curlopt_ftp_use_pret... yes\nchecking for curlopt_ftp_create_missing_dirs... yes\nchecking for curlopt_ftp_response_timeout... yes\nchecking for curlopt_ftp_alternative_to_user... yes\nchecking for curlopt_ftp_skip_pasv_ip... yes\nchecking for curlopt_ftpsslauth... yes\nchecking for curlftpauth_default... yes\nchecking for curlftpauth_ssl... yes\nchecking for curlftpauth_tls... yes\nchecking for curlopt_ftp_ssl_ccc... yes\nchecking for curlftpssl_ccc_none... yes\nchecking for curlftpssl_ccc_passive... yes\nchecking for curlftpssl_ccc_active... yes\nchecking for curlopt_ftp_account... yes\nchecking for curlopt_ftp_filemethod... yes\nchecking for curlftpmethod_multicwd... yes\nchecking for curlftpmethod_nocwd... yes\nchecking for curlftpmethod_singlecwd... yes\nchecking for curlopt_rtsp_request... yes\nchecking for curl_rtspreq_options... yes\nchecking for curl_rtspreq_describe... yes\nchecking for curl_rtspreq_announce... yes\nchecking for curl_rtspreq_setup... yes\nchecking for curl_rtspreq_play... yes\nchecking for curl_rtspreq_pause... yes\nchecking for curl_rtspreq_teardown... yes\nchecking for curl_rtspreq_get_parameter... yes\nchecking for curl_rtspreq_set_parameter... yes\nchecking for curl_rtspreq_record... yes\nchecking for curl_rtspreq_receive... yes\nchecking for curlopt_rtsp_session_id... yes\nchecking for curlopt_rtsp_stream_uri... yes\nchecking for curlopt_rtsp_transport... yes\nchecking for curlopt_rtsp_header... no\nchecking for curlopt_rtsp_client_cseq... yes\nchecking for curlopt_rtsp_server_cseq... yes\nchecking for curlopt_transfertext... yes\nchecking for curlopt_proxy_transfer_mode... yes\nchecking for curlopt_crlf... yes\nchecking for curlopt_range... yes\nchecking for curlopt_resume_from... yes\nchecking for curlopt_resume_from_large... yes\nchecking for curlopt_customrequest... yes\nchecking for curlopt_filetime... yes\nchecking for curlopt_nobody... yes\nchecking for curlopt_infilesize... yes\nchecking for curlopt_infilesize_large... yes\nchecking for curlopt_upload... yes\nchecking for curlopt_maxfilesize... yes\nchecking for curlopt_maxfilesize_large... yes\nchecking for curlopt_timecondition... yes\nchecking for curlopt_timevalue... yes\nchecking for curlopt_timeout... yes\nchecking for curlopt_timeout_ms... yes\nchecking for curlopt_low_speed_limit... yes\nchecking for curlopt_low_speed_time... yes\nchecking for curlopt_max_send_speed_large... yes\nchecking for curlopt_max_recv_speed_large... yes\nchecking for curlopt_maxconnects... yes\nchecking for curlopt_closepolicy... yes\nchecking for curlopt_fresh_connect... yes\nchecking for curlopt_forbid_reuse... yes\nchecking for curlopt_connecttimeout... yes\nchecking for curlopt_connecttimeout_ms... yes\nchecking for curlopt_ipresolve... yes\nchecking for curl_ipresolve_whatever... yes\nchecking for curl_ipresolve_v4... yes\nchecking for curl_ipresolve_v6... yes\nchecking for curlopt_connect_only... yes\nchecking for curlopt_use_ssl... yes\nchecking for curlusessl_none... yes\nchecking for curlusessl_try... yes\nchecking for curlusessl_control... yes\nchecking for curlusessl_all... yes\nchecking for curlopt_resolve... yes\nchecking for curlopt_sslcert... yes\nchecking for curlopt_sslcerttype... yes\nchecking for curlopt_sslkey... yes\nchecking for curlopt_sslkeytype... yes\nchecking for curlopt_keypasswd... yes\nchecking for curlopt_sslengine... yes\nchecking for curlopt_sslengine_default... yes\nchecking for curlopt_sslversion... yes\nchecking for curl_sslversion_default... yes\nchecking for CURL_SSLVERSION_TLSv1... yes\nchecking for CURL_SSLVERSION_SSLv2... yes\nchecking for CURL_SSLVERSION_SSLv3... yes\nchecking for curlopt_ssl_verifypeer... yes\nchecking for curlopt_cainfo... yes\nchecking for curlopt_issuercert... yes\nchecking for curlopt_capath... yes\nchecking for curlopt_crlfile... yes\nchecking for curlopt_ssl_verifyhost... yes\nchecking for curlopt_certinfo... yes\nchecking for curlopt_random_file... yes\nchecking for curlopt_egdsocket... yes\nchecking for curlopt_ssl_cipher_list... yes\nchecking for curlopt_ssl_sessionid_cache... yes\nchecking for curlopt_krblevel... yes\nchecking for curlopt_ssh_auth_types... yes\nchecking for curlopt_ssh_host_public_key_md5... yes\nchecking for curlopt_ssh_public_keyfile... yes\nchecking for curlopt_ssh_private_keyfile... yes\nchecking for curlopt_ssh_knownhosts... yes\nchecking for curlopt_ssh_keyfunction... yes\nchecking for curlkhstat_fine_add_to_file... yes\nchecking for curlkhstat_fine... yes\nchecking for curlkhstat_reject... yes\nchecking for curlkhstat_defer... yes\nchecking for curlopt_ssh_keydata... yes\nchecking for curlopt_private... yes\nchecking for curlopt_share... yes\nchecking for curlopt_new_file_perms... yes\nchecking for curlopt_new_directory_perms... yes\nchecking for curlopt_telnetoptions... yes\nchecking for curle_not_built_in... yes\nchecking for curle_obsolete... yes\nchecking for curlopt_gssapi_delegation... yes\nchecking for curlgssapi_delegation_policy_flag... yes\nchecking for curlgssapi_delegation_flag... yes\nchecking for Ruby 1.9 Hash... no\nchecking for Ruby 1.9 st.h... yes\nchecking for curl_easy_escape... yes\nchecking for rb_thread_blocking_region()... no\ncreating curb_config.h\ncreating Makefile\n\nmake &quot;DESTDIR=&quot; clean\n\nmake &quot;DESTDIR=&quot;\ncompiling curb_upload.c\ncompiling curb.c\ncompiling curb_easy.c\ncurb_easy.c: In function \u2018ruby_curl_easy_resolve_mode\u2019:\ncurb_easy.c:1642:3: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]\n   unsigned short rm = rbce-&gt;resolve_mode;\n   ^\ncurb_easy.c: In function \u2018ruby_curl_easy_resolve_mode_set\u2019:\ncurb_easy.c:1673:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]\n     ID resolve_mode_id = rb_to_id(resolve_mode);\n     ^\ncurb_easy.c: In function \u2018cb_each_http_header\u2019:\ncurb_easy.c:1855:3: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]\n   VALUE header_str = Qnil;\n   ^\ncurb_easy.c: In function \u2018cb_each_ftp_command\u2019:\ncurb_easy.c:1887:3: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]\n   VALUE ftp_command_string = rb_obj_as_string(ftp_command);\n   ^\ncompiling curb_postfield.c\ncompiling curb_multi.c\ncurb_multi.c: In function \u2018curl_multi_free\u2019:\ncurb_multi.c:67:3: warning: implicit declaration of function \u2018RHASH\u2019 [-Wimplicit-function-declaration]\n   if (rbcm &amp;&amp; !rbcm-&gt;requests == Qnil &amp;&amp; rb_type(rbcm-&gt;requests) == T_HASH &amp;&amp; RHASH_LEN(rbcm-&gt;requests) &gt; 0) {\n   ^\nIn file included from curb_easy.h:10:0,\n                 from curb_multi.c:14:\ncurb.h:44:38: error: invalid type argument of \u2018-&gt;\u2019 (have \u2018int\u2019)\n   #define RHASH_LEN(hash) RHASH(hash)-&gt;tbl-&gt;num_entries\n                                      ^\ncurb_multi.c:67:79: note: in expansion of macro \u2018RHASH_LEN\u2019\n   if (rbcm &amp;&amp; !rbcm-&gt;requests == Qnil &amp;&amp; rb_type(rbcm-&gt;requests) == T_HASH &amp;&amp; RHASH_LEN(rbcm-&gt;requests) &gt; 0) {\n                                                                               ^\ncurb_multi.c: In function \u2018ruby_curl_multi_remove\u2019:\ncurb_multi.c:265:19: warning: variable \u2018rbce\u2019 set but not used [-Wunused-but-set-variable]\n   ruby_curl_easy *rbce;\n                   ^\ncurb_multi.c: In function \u2018ruby_curl_multi_perform\u2019:\ncurb_multi.c:581:7: warning: implicit declaration of function \u2018rb_thread_select\u2019 [-Wimplicit-function-declaration]\n       rc = rb_thread_select(maxfd+1, &amp;fdread, &amp;fdwrite, &amp;fdexcep, &amp;tv);\n       ^\nmake: *** [curb_multi.o] Error 1\n\nmake failed, exit code 2\n</code></pre>\n<p>I've installed all necessary packages:</p>\n<blockquote>\n<p>sudo apt-get install libcurl4-openssl-dev</p>\n<p>sudo apt-get install libcurl3 libcurl3-gnutls libcurl4-openssl-dev</p>\n<p>sudo apt-get install git-core curl zlib1g-dev build-essential libssl-dev libreadline-dev libyaml-dev libsqlite3-dev sqlite3 libxml2-dev libxslt1-dev libcurl4-openssl-dev python-software-properties</p>\n</blockquote>\n<p>But still getting this error.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "arrays", "has-many-through", "comparison-operators"], "answers": [{"comments": [{"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1423682552, "post_id": 28462177, "comment_id": 45251188, "body": "Perfect - works a charm! Thanks a bunch @gabrielhilal."}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 1, "creation_date": 1423742643, "post_id": 28462177, "comment_id": 45276875, "body": "As an FYI for anyone else visiting this - the answer put me on the right tracks, but threw up false positives (i.e. if just one id matches between user and recipe it shows true). I&#39;ve had to adjust this so the line calculates &#39;(@user.ingredients.pluck(:id) &amp; recipe.ingredients.pluck(:id)) == recipe.ingredients.pluck(:id)&#39; and I&#39;ve dropped this into a helper method to tidy up a little: &#39;def ingredient_matcher(one, two)     (one.ingredients.pluck(:id)) &amp; two.ingredients.pluck(:id)) == two.ingredients.pluck(:id)   end&#39;  Hope that&#39;s useful to someone! Any feedback, let me know. Steve."}], "tags": [], "owner": {"reputation": 10255, "user_id": 1155142, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c680db41999d478ca34d1a77a470e30d?s=128&d=identicon&r=PG", "display_name": "gabrielhilal", "link": "https://stackoverflow.com/users/1155142/gabrielhilal"}, "is_accepted": true, "score": 2, "last_activity_date": 1423681777, "last_edit_date": 1423681777, "creation_date": 1423680740, "answer_id": 28462177, "question_id": 28460309, "link": "https://stackoverflow.com/questions/28460309/rails-class-comparison-if-class-children-include-anotherclass-children-do/28462177#28462177", "title": "Rails class comparison - If Class.children include AnotherClass.children do", "body": "<p>You can compare two array like so:</p>\n\n<pre><code>a = [1,2,3]\nb = [1,2]\nc = [4,5]\n\na &amp; b\n#=&gt; [1, 2]\na &amp; c\n#=&gt; []\n(a &amp; c).empty?\n#=&gt; true\n</code></pre>\n\n<p>In this way, you can do something like:</p>\n\n<pre><code>&lt;% @recipes.each do |recipe| %&gt;\n    &lt;% unless (@user.ingredients.pluck(:id) &amp; recipe.ingredients.pluck(:id)).empty? %&gt;\n      &lt;!-- ... --&gt;  \n            &lt;td&gt;\n              &lt;%= recipe.name %&gt;\n            &lt;/td&gt;\n    &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>I hope it helps...</p>\n"}], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 28462177, "answer_count": 1, "score": 1, "last_activity_date": 1423681777, "creation_date": 1423674706, "question_id": 28460309, "link": "https://stackoverflow.com/questions/28460309/rails-class-comparison-if-class-children-include-anotherclass-children-do", "title": "Rails class comparison - If Class.children include AnotherClass.children do", "body": "<p>Simple question I hope. I've a couple of classes - User and Recipe - both of which have 'ingredients' as children via has-many-through relationships. I'd like to run a comparison that checks to see if User.ingredients include the ingredients for each Recipe.</p>\n\n<p>I thought a simple 'include?' query would work this out, but it's returning nil when implemented. Got a feeling this is because I'm applying it to a class rather than array (although doesn't User.ingredients return an array?!), though not sure how I should adjust this to get it working - I've tried converting items to arrays, plucking ids out, etc. but nothing has working yet.</p>\n\n<p>Any help much appreciated! Steve.</p>\n\n<p>Here's the controller code:</p>\n\n<pre><code>def meals\n    @recipes = Recipe.all\n    @user = current_user #from my user authentication\nend\n</code></pre>\n\n<p>And the (abridged) view that's returning nil even when both contain the same ingredients:</p>\n\n<pre><code>    &lt;% @recipes.each do |recipe| %&gt;\n        &lt;% if @user.ingredients.include?(recipe.ingredients) %&gt;\n          &lt;!-- ... --&gt;  \n                &lt;td&gt;\n                  &lt;%= recipe.name %&gt;\n                &lt;/td&gt;\n        &lt;% end %&gt;\n    &lt;% end %&gt;\n</code></pre>\n\n<p>One other point - testing this in the console, I've noticed running .include? on  arrays of ingredient ids don't match if they're in the wrong order. Does this also need addressing?</p>\n"}, {"tags": ["ruby", "proc"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1423706677, "post_id": 28459671, "comment_id": 45261499, "body": "See @UriAgassi&#39;s answer <a href=\"http://stackoverflow.com/questions/23695653/can-you-supply-arguments-to-the-mapmethod-syntax-in-ruby/23711606#23711606\">here</a>."}], "answers": [{"tags": [], "owner": {"reputation": 15775, "user_id": 634513, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/328293e03f2d7b888ecf197ec1ffb7a7?s=128&d=identicon&r=PG", "display_name": "Ismael Abreu", "link": "https://stackoverflow.com/users/634513/ismael-abreu"}, "is_accepted": false, "score": 1, "last_activity_date": 1423673821, "last_edit_date": 1423673821, "creation_date": 1423673403, "answer_id": 28459862, "question_id": 28459671, "link": "https://stackoverflow.com/questions/28459671/map-multidimensional-array-with-join-as-proc/28459862#28459862", "title": "Map multidimensional array with join as proc", "body": "<p>The only way to do it is creating a method that does that.</p>\n\n<pre><code>def my_join(a)\n  a.join(\" \")\nend\n\narr = [[\"a\", \"airway\", \"sarsaparilas\"], [\"a\", \"sarsaparilas\", \"airway\"]]\n\narr.map &amp;method(:my_join) # =&gt; [\"a airway sarsaparilas\", \"a sarsaparilas airway\"] \n</code></pre>\n\n<p>Of course this does not seem much better then using a proc</p>\n\n<pre><code>my_join = proc {|a| a.join(\" \") }\n\narr.map &amp;my_join # =&gt; [\"a airway sarsaparilas\", \"a sarsaparilas airway\"] \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "is_accepted": false, "score": 1, "last_activity_date": 1423673795, "creation_date": 1423673795, "answer_id": 28459998, "question_id": 28459671, "link": "https://stackoverflow.com/questions/28459671/map-multidimensional-array-with-join-as-proc/28459998#28459998", "title": "Map multidimensional array with join as proc", "body": "<p>You can simply pass a block in, instead of writing <code>&amp;:join</code>:</p>\n\n<pre><code>a = [[\"a\", \"b\", \"c\"], [\"d\", \"e\", \"f\"]]\na.map { |x| x.join(' ') }  # =&gt; [\"a b c\", \"d e f\"]\n</code></pre>\n\n<p>The <code>&amp;:join</code> syntax is just a shortcut for making a block that calls <code>.join</code> on its argument, but that syntax is not appropriate in every situation.</p>\n"}, {"tags": [], "owner": {"reputation": 13376, "user_id": 3357295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3PzYS.jpg?s=128&g=1", "display_name": "Doguita", "link": "https://stackoverflow.com/users/3357295/doguita"}, "is_accepted": false, "score": 3, "last_activity_date": 1423674768, "creation_date": 1423674768, "answer_id": 28460327, "question_id": 28459671, "link": "https://stackoverflow.com/questions/28459671/map-multidimensional-array-with-join-as-proc/28460327#28460327", "title": "Map multidimensional array with join as proc", "body": "<p>You can define <code>Array::to_proc</code> to use an array instead a symbol:  </p>\n\n<pre><code>class Array\n  def to_proc\n    -&gt;(element) { element.send(*self) }\n  end\nend\n</code></pre>\n\n<p>And now you can use like this:  </p>\n\n<pre><code>a=[[\"a\", \"airway\", \"sarsaparilas\"], [\"a\", \"sarsaparilas\", \"airway\"]]\na.map &amp;[:join] # =&gt; [\"aairwaysarsaparilas\", \"asarsaparilasairway\"] \na.map &amp;[:join, ' '] # =&gt; [\"a airway sarsaparilas\", \"a sarsaparilas airway\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 4492128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rc3nR.png?s=128&g=1", "display_name": "098328f3e4f871e81bd35600fdcd56", "link": "https://stackoverflow.com/users/4492128/098328f3e4f871e81bd35600fdcd56"}, "edited": false, "score": 0, "creation_date": 1423678497, "post_id": 28461179, "comment_id": 45248809, "body": "Great answer, thanks, could you explain why you would not recommend using this approach ?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 33, "user_id": 4492128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rc3nR.png?s=128&g=1", "display_name": "098328f3e4f871e81bd35600fdcd56", "link": "https://stackoverflow.com/users/4492128/098328f3e4f871e81bd35600fdcd56"}, "edited": false, "score": 0, "creation_date": 1423678587, "post_id": 28461179, "comment_id": 45248840, "body": "It is because using <code>Symbol#to_proc</code> with <code>&amp;</code> is a shorthand for a simple method without arguments. Insisting to use it with arguments is not making it any shorter or more readable. For this particular case, you can do it as I wrote above, but I don&#39;t see that writing <code>$, = &quot; &quot;</code> is any simpler than writing the join block with the argument"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 1, "last_activity_date": 1423677571, "creation_date": 1423677571, "answer_id": 28461179, "question_id": 28459671, "link": "https://stackoverflow.com/questions/28459671/map-multidimensional-array-with-join-as-proc/28461179#28461179", "title": "Map multidimensional array with join as proc", "body": "<p>I don't recommend doing it that way, but if you insist, this is a way to do it:</p>\n\n<pre><code>$, = \" \"\n[[\"a\", \"airway\", \"sarsaparilas\"], [\"a\", \"sarsaparilas\", \"airway\"]].map!(&amp;:join)\n#=&gt; [\"a airway sarsaparilas\", \"a sarsaparilas airway\"]\n</code></pre>\n\n<p>If necessary, you can revert <code>$,</code> back to the default value after doing this.</p>\n\n<pre><code>$, = nil\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 4492128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rc3nR.png?s=128&g=1", "display_name": "098328f3e4f871e81bd35600fdcd56", "link": "https://stackoverflow.com/users/4492128/098328f3e4f871e81bd35600fdcd56"}, "edited": false, "score": 1, "creation_date": 1423691458, "post_id": 28464079, "comment_id": 45256069, "body": "This is very interesting tool, thx :) Just for reference, here&#39;s the <a href=\"https://github.com/rapportive-oss/ampex\" rel=\"nofollow noreferrer\">link</a> for this library."}], "tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": false, "score": 2, "last_activity_date": 1423692696, "last_edit_date": 1423692696, "creation_date": 1423687265, "answer_id": 28464079, "question_id": 28459671, "link": "https://stackoverflow.com/questions/28459671/map-multidimensional-array-with-join-as-proc/28464079#28464079", "title": "Map multidimensional array with join as proc", "body": "<blockquote>\n  <p>can I pass argument, to symbol</p>\n</blockquote>\n\n<p>Someone created a gem for that:</p>\n\n<pre><code>require 'ampex'\n\narr = [[\"a\", \"airway\", \"sarsaparilas\"], [\"a\", \"sarsaparilas\", \"airway\"]]\n\np arr.map!(&amp;X.join(' '))\n\n--output:--\n[\"a airway sarsaparilas\", \"a sarsaparilas airway\"]\n</code></pre>\n\n<p>You have to write <code>&amp;X.</code> instead of <code>:</code> </p>\n"}], "owner": {"reputation": 33, "user_id": 4492128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rc3nR.png?s=128&g=1", "display_name": "098328f3e4f871e81bd35600fdcd56", "link": "https://stackoverflow.com/users/4492128/098328f3e4f871e81bd35600fdcd56"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 28461179, "answer_count": 5, "score": 2, "last_activity_date": 1423692696, "creation_date": 1423672877, "question_id": 28459671, "link": "https://stackoverflow.com/questions/28459671/map-multidimensional-array-with-join-as-proc", "title": "Map multidimensional array with join as proc", "body": "<p>can I pass argument, to symbol passed to map method ?</p>\n\n<p>Code:</p>\n\n<p><code>[[\"a\", \"airway\", \"sarsaparilas\"], [\"a\", \"sarsaparilas\", \"airway\"]].map!(&amp;:join)</code></p>\n\n<p>Results in:</p>\n\n<p><code>[\"aairwaysarsaparilas\", \"asarsaparilasairway\"]</code></p>\n\n<p>Result I'm interested in:</p>\n\n<p><code>[\"a airway sarsaparilas\", \"a sarsaparilas airway\"]</code></p>\n\n<p>I know how to use those methods separately, but this time I'm interested in symbol solution :)</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1400, "user_id": 2498890, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/222e90c365eee848543847010fa5454a?s=128&d=identicon&r=PG", "display_name": "user2498890", "link": "https://stackoverflow.com/users/2498890/user2498890"}, "edited": false, "score": 0, "creation_date": 1423681438, "post_id": 28459841, "comment_id": 45250537, "body": "So I&#39;ve put get &#39;jobs/info&#39;, :to =&gt; &quot;jobs/info&quot;, :as =&gt; job_info in the routes.rb file and the &lt;% link_to &quot;Job Info&quot;, job_info_path %&gt; in the index.html.erb - where does the def info - end go? And what do I put inside it?"}, {"owner": {"reputation": 27405, "user_id": 2112633, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/c9bf1e5beda923bfc9abb2271c5838e5?s=128&d=identicon&r=PG", "display_name": "usha", "link": "https://stackoverflow.com/users/2112633/usha"}, "reply_to_user": {"reputation": 1400, "user_id": 2498890, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/222e90c365eee848543847010fa5454a?s=128&d=identicon&r=PG", "display_name": "user2498890", "link": "https://stackoverflow.com/users/2498890/user2498890"}, "edited": false, "score": 0, "creation_date": 1423683762, "post_id": 28459841, "comment_id": 45251958, "body": "<code>def info</code> will go inside your jobs controller. what you put inside depends on what you want to use in <code>info.html.erb</code>. If you do not want to use any instance vairable, leave the method empty"}], "tags": [], "owner": {"reputation": 27405, "user_id": 2112633, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/c9bf1e5beda923bfc9abb2271c5838e5?s=128&d=identicon&r=PG", "display_name": "usha", "link": "https://stackoverflow.com/users/2112633/usha"}, "is_accepted": false, "score": 2, "last_activity_date": 1423681830, "last_edit_date": 1423681830, "creation_date": 1423673324, "answer_id": 28459841, "question_id": 28459660, "link": "https://stackoverflow.com/questions/28459660/link-path-to-a-specific-page-ruby-on-rails/28459841#28459841", "title": "Link path to a specific page - Ruby on Rails", "body": "<p>One way would be to add an action in your controller and add a custom route in your <code>config/routes.rb</code></p>\n\n<p>In JobsController</p>\n\n<pre><code>def info\n  #initialize instance variables that you would use in jobs/info.html.erb\nend\n</code></pre>\n\n<p>config/routes.rb</p>\n\n<pre><code>get 'jobs/info', :to =&gt; \"jobs/info\", :as =&gt; job_info\n</code></pre>\n\n<p>Now in your <code>index.html.erb</code></p>\n\n<pre><code>&lt;%= link_to \"Job Info\", job_info_path%&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1400, "user_id": 2498890, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/222e90c365eee848543847010fa5454a?s=128&d=identicon&r=PG", "display_name": "user2498890", "link": "https://stackoverflow.com/users/2498890/user2498890"}, "edited": false, "score": 0, "creation_date": 1423736817, "post_id": 28463059, "comment_id": 45273392, "body": "Hi Scott, thanks for your in-depth answer, quick question, if my routes.rb file looks like this - Rails.application.routes.draw do   get &#39;jobs/info&#39;    resources :jobs   root &#39;jobs#index&#39;  end  - then where do I put what you said to add to the routes.rb?"}], "tags": [], "owner": {"reputation": 955, "user_id": 770104, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2343353db217c7906c3b997d3a638da1?s=128&d=identicon&r=PG", "display_name": "scottb", "link": "https://stackoverflow.com/users/770104/scottb"}, "is_accepted": true, "score": 3, "last_activity_date": 1423683663, "creation_date": 1423683663, "answer_id": 28463059, "question_id": 28459660, "link": "https://stackoverflow.com/questions/28459660/link-path-to-a-specific-page-ruby-on-rails/28463059#28463059", "title": "Link path to a specific page - Ruby on Rails", "body": "<p>You can't actually \"do a link path to info.html.erb\".</p>\n\n<p>Links refer to abstract things called \"resources\". In Rails, a resource is, ultimately, a specific action on a given controller. The routes specified in <code>config/routes.rb</code> translate URL paths into actions on controllers.</p>\n\n<p>If you run <code>rake routes</code>, you'll see output that looks something like this:</p>\n\n<pre><code>  Prefix Verb   URI Pattern              Controller#Action\n    jobs GET    /jobs(.:format)          jobs#index\n         POST   /jobs(.:format)          jobs#create\n new_job GET    /jobs/new(.:format)      jobs#new\nedit_job GET    /jobs/:id/edit(.:format) jobs#edit\n     job GET    /jobs/:id(.:format)      jobs#show\n         PATCH  /jobs/:id(.:format)      jobs#update\n         PUT    /jobs/:id(.:format)      jobs#update\n         DELETE /jobs/:id(.:format)      jobs#destroy\n</code></pre>\n\n<p>This lists all of the routes defined for your application. The right-most column is the action that gets run. The <em>left-most</em> column is what you usually use in <code>link_to</code> calls in views.</p>\n\n<p>So, to answer your question, your <code>info.html.erb</code> file is a view available to the \"posts\" controller.</p>\n\n<p>If the view doesn't need any information from the database or other \"work\" done, then by default, invoking the action \"info\" on the controller will just render that view -- you don't need to modify the controller. (It will do this for <em>any</em> action, not just \"info\". If the view isn't defined, it generates a 404 error.)</p>\n\n<p>So, you need to add a route that maps to your action. If you look at <code>config/routes.rb</code>, you should see a line that says <code>resources :jobs</code>. If you change that to:</p>\n\n<pre><code>resources :jobs do\n  collection do\n    get :info\n  end\nend\n</code></pre>\n\n<p>You can re-run the <code>rake routes</code> command and you'll see a new line added to the output:</p>\n\n<pre><code>   Prefix Verb   URI Pattern              Controller#Action\ninfo_jobs GET    /jobs/info(.:format)     posts#info\n</code></pre>\n\n<p>That's a route pointing to the right action, and you can link to it in a view by writing <code>&lt;%= link_to 'Info', info_jobs_path %&gt;</code>. I got that value by taking the \"prefix\" column and adding <code>_path</code>, which tells it to generate a relative URI for that resource. If I had needed an absolute URI (typically needed in a mailer), then I'd have used <code>info_jobs_url</code>.</p>\n\n<p>There are other ways you can specify the route, depending on other information you might need -- look through the comments in the Rails-generated <code>config/routes.rb</code> for details.</p>\n"}], "owner": {"reputation": 1400, "user_id": 2498890, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/222e90c365eee848543847010fa5454a?s=128&d=identicon&r=PG", "display_name": "user2498890", "link": "https://stackoverflow.com/users/2498890/user2498890"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5308, "favorite_count": 0, "accepted_answer_id": 28463059, "answer_count": 2, "score": 0, "last_activity_date": 1423683812, "creation_date": 1423672852, "last_edit_date": 1423683812, "question_id": 28459660, "link": "https://stackoverflow.com/questions/28459660/link-path-to-a-specific-page-ruby-on-rails", "title": "Link path to a specific page - Ruby on Rails", "body": "<p>I'm a newbie and I'm having a bit of trouble understanding link paths on Ruby on Rails. Say I have say a page in app/views/jobs/info.html.erb and I want to make a link to that page from my index.html.erb which is in the same folder, what would the link path be? </p>\n\n<p>I have another link path inside my index.html.erb to new.html.erb which is as follows: </p>\n\n<pre><code>&lt;%= link_to \"Add a Position\", new_job_path %&gt;\n</code></pre>\n\n<p>but I if I wanted to do a link path to info.html.erb I don't understand what I put instead of 'new_job_path'?</p>\n\n<p>If anyone could help me I'd really appreciate it. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "gem"], "comments": [{"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1423673086, "post_id": 28459497, "comment_id": 45245613, "body": "You need to type <code>bundle install</code> or just <code>bundle</code> in your console (as it is said on the error BTW!)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1423673135, "post_id": 28459497, "comment_id": 45245647, "body": "<a href=\"https://railsapps.github.io/openssl-certificate-verify-failed.html\" rel=\"nofollow noreferrer\">railsapps.github.io/openssl-certificate-verify-failed.html</a> @dgilperez OP did; that\u2019s a certificate issue."}, {"owner": {"reputation": 123, "user_id": 4028514, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7L3J.jpg?s=128&g=1", "display_name": "Michal Koczwara", "link": "https://stackoverflow.com/users/4028514/michal-koczwara"}, "edited": false, "score": 0, "creation_date": 1423673168, "post_id": 28459497, "comment_id": 45245670, "body": "I tried to bundle-install and I got this error: <a href=\"http://tinypic.com/r/20711ti/8\" rel=\"nofollow noreferrer\">tinypic.com/r/20711ti/8</a>"}, {"owner": {"reputation": 123, "user_id": 4028514, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7L3J.jpg?s=128&g=1", "display_name": "Michal Koczwara", "link": "https://stackoverflow.com/users/4028514/michal-koczwara"}, "edited": false, "score": 2, "creation_date": 1423673914, "post_id": 28459497, "comment_id": 45246145, "body": "Ok I solved the problem. Opened gemfile and changed to HTTP form HTTPS         <a href=\"https://rubygems.org/\" rel=\"nofollow noreferrer\">rubygems.org</a> ---&gt; <a href=\"http://rubygems.org/\" rel=\"nofollow noreferrer\">rubygems.org</a>"}], "answers": [{"tags": [], "owner": {"reputation": 66, "user_id": 5365705, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5HbbX.jpg?s=128&g=1", "display_name": "Hart", "link": "https://stackoverflow.com/users/5365705/hart"}, "is_accepted": true, "score": 5, "last_activity_date": 1442971904, "last_edit_date": 1442971904, "creation_date": 1442971793, "answer_id": 32729612, "question_id": 28459497, "link": "https://stackoverflow.com/questions/28459497/could-not-find-gem-tzinfo-data/32729612#32729612", "title": "Could not find gem tzinfo-data", "body": "<p>Type on your command prompt :</p>\n\n<pre><code>bundle\n</code></pre>\n\n<p>this work for me.</p>\n\n<p><img src=\"https://i.stack.imgur.com/RzHlf.png\" alt=\"pic\"></p>\n"}], "owner": {"reputation": 123, "user_id": 4028514, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7L3J.jpg?s=128&g=1", "display_name": "Michal Koczwara", "link": "https://stackoverflow.com/users/4028514/michal-koczwara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2814, "favorite_count": 1, "accepted_answer_id": 32729612, "answer_count": 1, "score": 2, "last_activity_date": 1453971946, "creation_date": 1423672437, "last_edit_date": 1423672677, "question_id": 28459497, "link": "https://stackoverflow.com/questions/28459497/could-not-find-gem-tzinfo-data", "title": "Could not find gem tzinfo-data", "body": "<p>I created new app however I cannot run the server because of the error on screenshot(full image url: <a href=\"http://oi60.tinypic.com/xmqtr5.jpg\" rel=\"nofollow noreferrer\">http://oi60.tinypic.com/xmqtr5.jpg</a>).</p>\n\n<p>Any ideas?</p>\n\n<p><img src=\"https://i.stack.imgur.com/YDm2m.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 4336, "user_id": 574181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c78d396646e7612dead8bcd7c63a4fe?s=128&d=identicon&r=PG", "display_name": "Satya", "link": "https://stackoverflow.com/users/574181/satya"}, "edited": false, "score": 1, "creation_date": 1423672182, "post_id": 28459211, "comment_id": 45244994, "body": "That&#39;s just a very large number expressed in scientific notation. Hmm, but it&#39;s the sqrt of a smaller number? You may be running into integer overflow."}, {"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "reply_to_user": {"reputation": 4336, "user_id": 574181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c78d396646e7612dead8bcd7c63a4fe?s=128&d=identicon&r=PG", "display_name": "Satya", "link": "https://stackoverflow.com/users/574181/satya"}, "edited": false, "score": 1, "creation_date": 1423672599, "post_id": 28459211, "comment_id": 45245296, "body": "@Satya: It is the sqrt of a larger number. The problem is just lack of precision."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 4336, "user_id": 574181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c78d396646e7612dead8bcd7c63a4fe?s=128&d=identicon&r=PG", "display_name": "Satya", "link": "https://stackoverflow.com/users/574181/satya"}, "edited": false, "score": 0, "creation_date": 1423682408, "post_id": 28459211, "comment_id": 45251087, "body": "@Satya: There is no integer overflow in Ruby. This is, however, not an <code>Integer</code>, it is a <code>Float</code>."}], "answers": [{"comments": [{"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 1, "creation_date": 1423672782, "post_id": 28459560, "comment_id": 45245399, "body": "It is not only being <i>displayed</i> in scientific notation, but is a Ruby <code>Float</code>, therefore has lost precision where the OP needs it. I think your suggestion is sound, although you may want to expand on it with an example."}], "tags": [], "owner": {"reputation": 1846, "user_id": 2816949, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/LPiwD.jpg?s=128&g=1", "display_name": "theartofbeing", "link": "https://stackoverflow.com/users/2816949/theartofbeing"}, "is_accepted": true, "score": 1, "last_activity_date": 1424024957, "last_edit_date": 1424024957, "creation_date": 1423672597, "answer_id": 28459560, "question_id": 28459211, "link": "https://stackoverflow.com/questions/28459211/i-am-attempting-to-create-a-method-which-generates-a-true-or-false-return-value/28459560#28459560", "title": "I am attempting to create a method which generates a true or false return value for a Fibonacci detection method in Ruby", "body": "<p>I believe because it's such a large number it's being displayed as scientific notation by Ruby and not able to work in your is_fibonacci? method with the basic Math library. </p>\n\n<p>You might want to look into using the BigMath library for Ruby <a href=\"http://ruby-doc.org/stdlib-1.9.3/libdoc/bigdecimal/rdoc/BigMath.html\" rel=\"nofollow\">http://ruby-doc.org/stdlib-1.9.3/libdoc/bigdecimal/rdoc/BigMath.html</a></p>\n\n<p><strong>Edit</strong> As  Niel pointed out, it's a Ruby float and has therefore lost precision. Big Math should still do the trick for you.</p>\n"}], "owner": {"reputation": 1146, "user_id": 4232053, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0986f0e77e408117b8557a825ad84289?s=128&d=identicon&r=PG&f=1", "display_name": "Ctpelnar1988", "link": "https://stackoverflow.com/users/4232053/ctpelnar1988"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 28459560, "answer_count": 1, "score": 1, "last_activity_date": 1424024957, "creation_date": 1423671568, "last_edit_date": 1592644375, "question_id": 28459211, "link": "https://stackoverflow.com/questions/28459211/i-am-attempting-to-create-a-method-which-generates-a-true-or-false-return-value", "title": "I am attempting to create a method which generates a true or false return value for a Fibonacci detection method in Ruby", "body": "<p>I am attempting to create a method which generates a true or false return value when a number is given as its argument to detect if the number is a Fibonacci sequence, although I have never encountered a number like so:</p>\n<p>2.073668380220713e+21 .</p>\n<p>Forgive my ignorance but is there a way to deal with this type of value in ruby to make it work in the method below?</p>\n<pre><code>def is_fibonacci?(num)\n  high_square = Math.sqrt((5 * num) * num + 4)\n\n  low_square = Math.sqrt((5 * num) * num - 4)\n\n  # If high_square or low_square are perfect squares, return true, else false.\n  high_square == high_square.round || low_square == low_square.round ? true : false\nend\n\nputs is_fibonacci?(927372692193078999171) # Trying to return false, but returns true. The sqrt of this number is 2.073668380220713e+21. \nputs is_fibonacci?(987) # Returns true as expected.\n</code></pre>\n"}, {"tags": ["ruby", "vagrant", "chef-infra"], "comments": [{"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1423670071, "post_id": 28458367, "comment_id": 45243628, "body": "I don&#39;t get your question, vagrant ruby has nothing to do with the chef ruby installed in the target VM. You may use chef to install ruby on a target and then install gems, but you&#39;re not showing anything about your gem install here which sounds to be your original problem (and using multiples <code>execute</code> commands won&#39;t achieve what you wish as each <code>execute</code> will have it&#39;s own context)"}, {"owner": {"reputation": 5651, "user_id": 2308473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e694fbf7ee4853cdb75ffd32a4a59bf7?s=128&d=identicon&r=PG", "display_name": "Ian Kenney", "link": "https://stackoverflow.com/users/2308473/ian-kenney"}, "edited": false, "score": 0, "creation_date": 1423670812, "post_id": 28458367, "comment_id": 45244129, "body": "rvm usually sets up a script to run on startup (for example in .bashrc).  perhaps you need to manually kick this off before your rvm use command - something like  <code>execute &quot;source $HOME&#47;.rvm&#47;scripts&#47;rvm &amp;&amp; rvm use 2.0 --default&quot;</code>"}, {"owner": {"reputation": 4782, "user_id": 238292, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/481b0d37c8555a2b965d71efb5d8a8f8?s=128&d=identicon&r=PG", "display_name": "Arthur Maltson", "link": "https://stackoverflow.com/users/238292/arthur-maltson"}, "edited": false, "score": 0, "creation_date": 1423707898, "post_id": 28458367, "comment_id": 45261824, "body": "Are you trying to install the <code>cloudwatchtographite</code> gem as a system gem or do you just want to make use of it in Chef?"}, {"owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "edited": false, "score": 0, "creation_date": 1423740455, "post_id": 28458367, "comment_id": 45275618, "body": "managed to solve the problem by just installing <code>ruby1.9.3-dev</code> via apt-get. Not what I want but for vagrant it&#39;s fine."}, {"owner": {"reputation": 4782, "user_id": 238292, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/481b0d37c8555a2b965d71efb5d8a8f8?s=128&d=identicon&r=PG", "display_name": "Arthur Maltson", "link": "https://stackoverflow.com/users/238292/arthur-maltson"}, "edited": false, "score": 0, "creation_date": 1423746472, "post_id": 28458367, "comment_id": 45279080, "body": "@user3536548 that&#39;s definitely one approach, if what you want is to have <code>cloudwatchtographite</code> installed as a system gem. If you&#39;re only going to use it from Chef, you should use the <code>chef_gem</code> resource to install the gem. When using <code>chef_gem</code> it&#39;ll use Chef&#39;s embedded Ruby (2.1.x)."}, {"owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "edited": false, "score": 0, "creation_date": 1423752151, "post_id": 28458367, "comment_id": 45282979, "body": "huh, That might also be a way to go, but how would I use it after it&#39;s installed? As <code>cloudwatchtographite</code> wouldn&#39;t work as it wouldn&#39;t be on the path, right?"}], "owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1277, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1423669189, "creation_date": 1423669189, "question_id": 28458367, "link": "https://stackoverflow.com/questions/28458367/vagrant-is-using-the-wrong-version-of-ruby", "title": "vagrant is using the wrong version of ruby", "body": "<p>I'm trying to get 'cloudwatchtographite' gem up and running via chef; but (isn't there always?) it fails because vagrant keeps using vagrant_ruby which is at version 1.8 where as I need at minimum version 1.9.2 (specifically, nokogiri, a dependency requires 1.9.2) how do I install the correct version? </p>\n\n<p>I've tried using</p>\n\n<pre><code> execute \"gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3\" \n\n execute \"\\\\curl -sSL https://get.rvm.io | bash -s stable --ruby=2.0\"\n\n execute \"rvm use 2.0 --default\"\n</code></pre>\n\n<p>but it errors with `rvm is not a command\" and ruby 2.0 isn't even installed.</p>\n\n<p>I've added the vagrant 'omnibus' plugin and set it to (within the VagrantFile):</p>\n\n<pre><code>config.omnibus.chef_version = :latest\n</code></pre>\n\n<p>but it still uses the vagrant ruby of 1.8.</p>\n\n<p>I'm at a loss, how do I get this working?</p>\n"}, {"tags": ["ruby", "rspec", "rspec2"], "comments": [{"owner": {"reputation": 1094, "user_id": 2386620, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/65ad9f1a1aafff45f439ab9d622e00ac?s=128&d=identicon&r=PG", "display_name": "adbarads", "link": "https://stackoverflow.com/users/2386620/adbarads"}, "reply_to_user": {"reputation": 32543, "user_id": 528726, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6307569a99dd77fff0463032051d7e39?s=128&d=identicon&r=PG", "display_name": "joelparkerhenderson", "link": "https://stackoverflow.com/users/528726/joelparkerhenderson"}, "edited": false, "score": 0, "creation_date": 1425666969, "post_id": 28458237, "comment_id": 46069962, "body": "it sorta did. I found out I needed a require_relative &#39;&lt;path_to_file&#39;&gt;. reference: <a href=\"http://ruby.about.com/od/faqs/qt/Nameerror-Uninitialized-Constant-Object-Something.htm\" rel=\"nofollow noreferrer\">ruby.about.com/od/faqs/qt/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 10972, "user_id": 1299362, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f9ec564b963a34f47cc1719738d75b23?s=128&d=identicon&r=PG", "display_name": "Obromios", "link": "https://stackoverflow.com/users/1299362/obromios"}, "edited": false, "score": 0, "creation_date": 1485720604, "post_id": 28905447, "comment_id": 71031253, "body": "I have upvoted this because it works, although in general it is a last resort. The error normally means your rspec configuration is missing something."}], "tags": [], "owner": {"reputation": 1094, "user_id": 2386620, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/65ad9f1a1aafff45f439ab9d622e00ac?s=128&d=identicon&r=PG", "display_name": "adbarads", "link": "https://stackoverflow.com/users/2386620/adbarads"}, "is_accepted": true, "score": 1, "last_activity_date": 1425667185, "creation_date": 1425667185, "answer_id": 28905447, "question_id": 28458237, "link": "https://stackoverflow.com/questions/28458237/rspec-test-nameerror-uninitialized-constant-trying-to-tie-a-class-into-a-rspec/28905447#28905447", "title": "Rspec test NameError: uninitialized constant trying to tie a class into a rspec test", "body": "<p>After lots of Googling and sheer luck. I learned:\nI needed:</p>\n\n<pre><code>require_relative '&lt;path_to_file&gt;'\n</code></pre>\n\n<p>after I added that into the spec.rb file. I re-ran the rspec test and it started working.</p>\n\n<p>Here was good documentation and basically made me realized what I missed:\n<a href=\"http://ruby.about.com/od/faqs/qt/Nameerror-Uninitialized-Constant-Object-Something.htm\" rel=\"nofollow\">http://ruby.about.com/od/faqs/qt/Nameerror-Uninitialized-Constant-Object-Something.htm</a></p>\n"}], "owner": {"reputation": 1094, "user_id": 2386620, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/65ad9f1a1aafff45f439ab9d622e00ac?s=128&d=identicon&r=PG", "display_name": "adbarads", "link": "https://stackoverflow.com/users/2386620/adbarads"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2363, "favorite_count": 0, "accepted_answer_id": 28905447, "answer_count": 1, "score": 1, "last_activity_date": 1425667185, "creation_date": 1423668862, "question_id": 28458237, "link": "https://stackoverflow.com/questions/28458237/rspec-test-nameerror-uninitialized-constant-trying-to-tie-a-class-into-a-rspec", "title": "Rspec test NameError: uninitialized constant trying to tie a class into a rspec test", "body": "<p>So I\"m not too familiar with ruby or rspec, and I have an rspect test, and here is a code snippet from it:</p>\n\n<pre><code>describe 'thingMagic' do \n    let(:tester) { testClass.testing }\n    it { expect(tester).to be whatever doesn't matter at this point\n</code></pre>\n\n<p>So I wrote a class called <code>testClass</code> with a method called <code>testing</code> in it. Here's what it looks like:</p>\n\n<pre><code>class testClass\n  def testing\n    return pass_test\n  end\nend\n</code></pre>\n\n<p>I'm trying to figure out when I run rspec it is failing with this error in the console: </p>\n\n<pre><code> Failure/Error: let(:tester) { testClass.testing }\n     NameError:\n       uninitialized constant testClass\n</code></pre>\n\n<p>I can't seem to figure out how to initialize this class. Is there a file I have to modify in rspec giving it a relative path to this file?</p>\n"}, {"tags": ["ruby", "amazon-web-services", "mechanicalturk"], "answers": [{"tags": [], "owner": {"reputation": 182, "user_id": 2226080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5676b8362a4e37f5ff633b96e6f2af0?s=128&d=identicon&r=PG", "display_name": "Danny", "link": "https://stackoverflow.com/users/2226080/danny"}, "is_accepted": false, "score": 2, "last_activity_date": 1423670138, "creation_date": 1423670138, "answer_id": 28458700, "question_id": 28458004, "link": "https://stackoverflow.com/questions/28458004/ruby-aws-amazon-mechanical-turk/28458700#28458700", "title": "ruby-aws Amazon Mechanical Turk", "body": "<p>I was able to resolive the issue - AWS has terrible naming conventions.  The above example does use the correct format, however HitLayoutParameter must be HITLayoutParameter - Notice the CAPITAL HIT vs Hit.  </p>\n\n<p>Also, when submitting multiple parameters, the should only be one HITLayoutParameter that equals an array of Name/Value pairs.  Working code below.</p>\n\n<p>Hope this helps someone else!</p>\n\n<p>Best,</p>\n\n<p>~DFO~</p>\n\n<pre><code>hit = mturk.createHIT(\n    :Operation =&gt; 'CreateHIT',\n    :Title =&gt; 'Find a gift based on user scores',\n    :Description =&gt; 'Find a gift for an individual based on survey scores.',\n    :MaxAssignments =&gt; 3,\n    :Signature =&gt; signature,\n    :Timestamp =&gt; timestamp,\n    :Reward =&gt; { :Amount =&gt; 0.25, :CurrencyCode =&gt; 'USD' },\n    :HITLayoutId =&gt; '3AV6FF2M2GYMGLRQEKHZ7EBN4EZOJE',   \n    :HITLayoutParameter =&gt; [ \n        {:Name =&gt; 'additional_information', :Value =&gt; 'TEST'},\n        {:Name =&gt; 'age', :Value =&gt; '22'},\n        {:Name =&gt; 'environmental_consciousness', :Value =&gt; '54'},\n        {:Name =&gt; 'experience', :Value =&gt; '32'},\n        {:Name =&gt; 'gender', :Value =&gt; 'male'},\n        {:Name =&gt; 'humor', :Value =&gt; '66'},\n        {:Name =&gt; 'local', :Value =&gt; '21'},\n        {:Name =&gt; 'occasion', :Value =&gt; '43'},\n        {:Name =&gt; 'price', :Value =&gt; '33'},\n        {:Name =&gt; 'relationship', :Value =&gt; '23'},\n        {:Name =&gt; 'romance', :Value =&gt; '23'}\n    ],\n\n    :Keywords =&gt; 'data collection, gifting, gifts, shopping, gift listings, presents',\n    :AssignmentDurationInSeconds =&gt; 300,\n    :LifetimeInSeconds =&gt; 604800\n)\n</code></pre>\n"}], "owner": {"reputation": 182, "user_id": 2226080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5676b8362a4e37f5ff633b96e6f2af0?s=128&d=identicon&r=PG", "display_name": "Danny", "link": "https://stackoverflow.com/users/2226080/danny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1423670138, "creation_date": 1423668217, "question_id": 28458004, "link": "https://stackoverflow.com/questions/28458004/ruby-aws-amazon-mechanical-turk", "title": "ruby-aws Amazon Mechanical Turk", "body": "<p>I am trying to create a HIT with a pre-created form using the ruby-aws gem and keep getting a missing params error.  I have limited the missing params to the params specific to my form.  </p>\n\n<p>It seems my request is not being formatted correctly and there are next to no examples from Amazon.  My logs say the the following params are missing:</p>\n\n<p>relationship, price, environmental_consciousness, age, occasion, gender, humor, experience, local, romance, additional_information</p>\n\n<p>Any help is much appreciated!</p>\n\n<p>Below is my current request:</p>\n\n<pre><code>hit = mturk.createHIT(\n    :Operation =&gt; 'CreateHIT',\n    :Title =&gt; 'Find a gift based on user scores',\n    :Description =&gt; 'Find a gift for an individual based on survey scores.',\n    :MaxAssignments =&gt; 3,\n    :Signature =&gt; signature,\n    :Timestamp =&gt; timestamp,\n    :Reward =&gt; { :Amount =&gt; 0.25, :CurrencyCode =&gt; 'USD' },\n    :HITLayoutId =&gt; '3AV6FF2M2GYMGLRQEKHZ7EBN4EZOJE',\n    :HitLayoutParameter =&gt; {'Name' =&gt; 'additional_information', 'Value' =&gt; 'TEST'},\n    :HitLayoutParameter =&gt; {'Name' =&gt; 'age', 'Value' =&gt; '22'},\n    :HitLayoutParameter =&gt; {'Name' =&gt; 'environmental_consciousness', 'Value' =&gt; '54'},\n    :HitLayoutParameter =&gt; {'Name' =&gt; 'experience', 'Value' =&gt; '32'},\n    :HitLayoutParameter =&gt; {'Name' =&gt; 'gender', 'Value' =&gt; 'male'},\n    :HitLayoutParameter =&gt; {'Name' =&gt; 'humor', 'Value' =&gt; '66'},\n    :HitLayoutParameter =&gt; {'Name' =&gt; 'local', 'Value' =&gt; '21'},\n    :HitLayoutParameter =&gt; {'Name' =&gt; 'occasion', 'Value' =&gt; '43'},\n    :HitLayoutParameter =&gt; {'Name' =&gt; 'price', 'Value' =&gt; '33'},\n    :HitLayoutParameter =&gt; {'Name' =&gt; 'relationship', 'Value' =&gt; '23'},\n    :HitLayoutParameter =&gt; {'Name' =&gt; 'romance', 'Value' =&gt; '23'},  \n\n    :Keywords =&gt; 'data collection, gifting, gifts, shopping, gift listings, presents',\n    :AssignmentDurationInSeconds =&gt; 300,\n    :LifetimeInSeconds =&gt; 604800\n)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "capybara"], "comments": [{"owner": {"reputation": 8626, "user_id": 2800648, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/9Efoe.jpg?s=128&g=1", "display_name": "Igor Pantovi\u0107", "link": "https://stackoverflow.com/users/2800648/igor-pantovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1423667051, "post_id": 28457240, "comment_id": 45241532, "body": "Are you using selenium driver?"}, {"owner": {"reputation": 10550, "user_id": 1070064, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/00ae7c73f5cddc5043e90e88f09df2b7?s=128&d=identicon&r=PG", "display_name": "Marek P\u0159&#237;hoda", "link": "https://stackoverflow.com/users/1070064/marek-p%c5%99%c3%adhoda"}, "reply_to_user": {"reputation": 8626, "user_id": 2800648, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/9Efoe.jpg?s=128&g=1", "display_name": "Igor Pantovi\u0107", "link": "https://stackoverflow.com/users/2800648/igor-pantovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1423667679, "post_id": 28457240, "comment_id": 45241983, "body": "@IgorPantovi\u0107 I am using the poltergeist driver."}, {"owner": {"reputation": 9737, "user_id": 2422778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUihh.jpg?s=128&g=1", "display_name": "Mike Szyndel", "link": "https://stackoverflow.com/users/2422778/mike-szyndel"}, "edited": false, "score": 0, "creation_date": 1423668267, "post_id": 28457240, "comment_id": 45242382, "body": "It would be wise if you switch to selenium driver first to see what is happening. This should help you a lot"}], "answers": [{"tags": [], "owner": {"reputation": 10550, "user_id": 1070064, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/00ae7c73f5cddc5043e90e88f09df2b7?s=128&d=identicon&r=PG", "display_name": "Marek P\u0159&#237;hoda", "link": "https://stackoverflow.com/users/1070064/marek-p%c5%99%c3%adhoda"}, "is_accepted": false, "score": 0, "last_activity_date": 1423758140, "creation_date": 1423758140, "answer_id": 28482521, "question_id": 28457240, "link": "https://stackoverflow.com/questions/28457240/how-do-i-click-link-with-capybara-that-has-a-method-post/28482521#28482521", "title": "How do I click_link with Capybara that has a method: :post?", "body": "<p>To answer my own question, the solution is trivial: just set js: true on the scenarios that contain the link, like for example this:</p>\n\n<pre><code>scenario 'some description', js: true do\n</code></pre>\n\n<p>The explanation: for links with methods other than GET, Rails.js dynamically generates a form, something like this</p>\n\n<pre><code>&lt;a href=\"url\" data-method=\"post\" rel=\"nofollow\"&gt;...&lt;/a&gt;\n</code></pre>\n\n<p>so you need to tell Capybara that it should run the scenario using a javascript engine (poltergeist, in our case), and you do so via the js: true option.</p>\n"}, {"tags": [], "owner": {"reputation": 13460, "user_id": 110333, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/59436ecd4fe6ad7c34f67654d839f05f?s=128&d=identicon&r=PG", "display_name": "grosser", "link": "https://stackoverflow.com/users/110333/grosser"}, "is_accepted": false, "score": 1, "last_activity_date": 1452592081, "last_edit_date": 1452592081, "creation_date": 1452497326, "answer_id": 34716188, "question_id": 28457240, "link": "https://stackoverflow.com/questions/28457240/how-do-i-click-link-with-capybara-that-has-a-method-post/34716188#34716188", "title": "How do I click_link with Capybara that has a method: :post?", "body": "<p>To avoid js/browser overhead you can also do a fake click with pure ruby.\nFor example <code>click_ujs_link \"Send\"</code> with this code.</p>\n\n<pre><code>def click_ujs_link(name)\n  link = find(:link, name, {})\n  visit_with_method link['data-method'], link['href']\nend\n\ndef visit_with_method(method, url)\n  page.driver.send method, url\n  visit page.driver.response.location\nend\n</code></pre>\n"}], "owner": {"reputation": 10550, "user_id": 1070064, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/00ae7c73f5cddc5043e90e88f09df2b7?s=128&d=identicon&r=PG", "display_name": "Marek P\u0159&#237;hoda", "link": "https://stackoverflow.com/users/1070064/marek-p%c5%99%c3%adhoda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 640, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1452592081, "creation_date": 1423666147, "last_edit_date": 1423759836, "question_id": 28457240, "link": "https://stackoverflow.com/questions/28457240/how-do-i-click-link-with-capybara-that-has-a-method-post", "title": "How do I click_link with Capybara that has a method: :post?", "body": "<p>In my application, I have this link:</p>\n\n<pre><code>link_to 'Start', some_path, method: :post\n</code></pre>\n\n<p>and, in a feature test, I need to click this link and then assert that the page does not contain this link (instead, it should contain a 'Stop' link)</p>\n\n<p>I tried to:</p>\n\n<pre><code>click_link 'Start'\n</code></pre>\n\n<p>but it does not work - either the link Start is still on the page or I am getting a page with a 'getting redirected' text (I use save_and_open_page)</p>\n\n<p>How do I solve this issue?</p>\n\n<p>EDIT: I am using the poltergeist driver.</p>\n"}, {"tags": ["ruby", "random"], "comments": [{"owner": {"reputation": 15705, "user_id": 18601, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3c5cb8ebf97404f98f5e078227d619d?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/18601/matt"}, "edited": false, "score": 1, "creation_date": 1423666101, "post_id": 28457047, "comment_id": 45240877, "body": "Not sure if I got this right: Do you mean, that the averages calculated from a sliding window over your array should look like a sine wave? (Because in your code you always start from the beginning of <code>ary</code>, which will result in a straight line for larger values of <code>n</code>)"}, {"owner": {"reputation": 81552, "user_id": 562459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V3UR9.png?s=128&g=1", "display_name": "Mike Sherrill &#39;Cat Recall&#39;", "link": "https://stackoverflow.com/users/562459/mike-sherrill-cat-recall"}, "edited": false, "score": 0, "creation_date": 1423666409, "post_id": 28457047, "comment_id": 45241116, "body": "A sine wave returns to zero regularly, so I&#39;d expect an average to be positive for half a cycle, go to zero, then be negative for half a cycle. Is that what you really mean, or are you talking about following a <a href=\"http://en.wikipedia.org/wiki/Normal_distribution\" rel=\"nofollow noreferrer\">normal distribution</a>?"}, {"owner": {"reputation": 1945, "user_id": 451664, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7GIPx.jpg?s=128&g=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/451664/bryan"}, "edited": false, "score": 0, "creation_date": 1423666438, "post_id": 28457047, "comment_id": 45241132, "body": "Matt a sliding window would be fine too, and would likely make more sense anyway. Say the last 10 elements? So... ary[-10..-1].inject(:+).to_f"}, {"owner": {"reputation": 1945, "user_id": 451664, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7GIPx.jpg?s=128&g=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/451664/bryan"}, "edited": false, "score": 0, "creation_date": 1423666562, "post_id": 28457047, "comment_id": 45241212, "body": "Mike, ultimately I just want to generate an array of random numbers whose average at each element (whether it be a sliding window or from the beginning of the array) doesn&#39;t end up being a boring straight line when I plot the results."}, {"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1423670353, "post_id": 28457047, "comment_id": 45243808, "body": "In order for an average across an array of size n to change as n becomes large by adding the next item, the values (or rather their magnitudes) will need to become larger and larger - but it is do-able. A sliding window should work if the window is much smaller than the frequency."}], "answers": [{"comments": [{"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1423670114, "post_id": 28458569, "comment_id": 45243661, "body": "This is some nice code and results, but doesn&#39;t do anything about hitting targets for <i>average</i> as expressed by OP."}, {"owner": {"reputation": 132392, "user_id": 244128, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/300502d6109af88a009074c42ff56c73?s=128&d=identicon&r=PG", "display_name": "maerics", "link": "https://stackoverflow.com/users/244128/maerics"}, "reply_to_user": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1423670309, "post_id": 28458569, "comment_id": 45243779, "body": "@NeilSlater: thanks for the feedback; I think it might be what OP is looking for since he says he wants &quot;<i>an array of random numbers whose average at each element ... doesn&#39;t end up being a boring straight line when I plot the results</i>&quot;.  But I suppose we can let him judge..."}, {"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1423670544, "post_id": 28458569, "comment_id": 45243936, "body": "Although if the averaging window was much smaller than <code>size</code>, then this would work for the OP&#39;s windowed variant (from the comments). He says &quot;average at each element&quot; (which is not well-defined, and could be taken as &#39;expected value&#39; of each element or similar), but the code in the question very clearly shows an average &quot;so far&quot; into the array"}, {"owner": {"reputation": 1945, "user_id": 451664, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7GIPx.jpg?s=128&g=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/451664/bryan"}, "edited": false, "score": 0, "creation_date": 1423671700, "post_id": 28458569, "comment_id": 45244664, "body": "Oh wow, thanks maerics! This looks like it will do what I was hoping for... I just wish I understood what the heck it&#39;s doing on the inside! I&#39;ll let you know if it works! I know I didn&#39;t mention this in my original post, but is there a way to specify what the max and min values should be? For example, 0 and 10, such that the wave hovers around 5? If I understood better what the code is doing I suppose I&#39;d be able to figure this out myself... :-( Thanks again!"}, {"owner": {"reputation": 132392, "user_id": 244128, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/300502d6109af88a009074c42ff56c73?s=128&d=identicon&r=PG", "display_name": "maerics", "link": "https://stackoverflow.com/users/244128/maerics"}, "reply_to_user": {"reputation": 1945, "user_id": 451664, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7GIPx.jpg?s=128&g=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/451664/bryan"}, "edited": false, "score": 0, "creation_date": 1423671762, "post_id": 28458569, "comment_id": 45244704, "body": "@Bryan: glad to hear it!  If you want to make the wave hover around 5 instead of zero just add 5 to each value it produces, or multiply by 10 to have it hover around zero but peak/valley between 10/-10."}, {"owner": {"reputation": 5245, "user_id": 3741729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zAt11.png?s=128&g=1", "display_name": "PatNowak", "link": "https://stackoverflow.com/users/3741729/patnowak"}, "edited": false, "score": 2, "creation_date": 1423692791, "post_id": 28458569, "comment_id": 45256761, "body": "BTW what did you use to get those nice plots?"}], "tags": [], "owner": {"reputation": 132392, "user_id": 244128, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/300502d6109af88a009074c42ff56c73?s=128&d=identicon&r=PG", "display_name": "maerics", "link": "https://stackoverflow.com/users/244128/maerics"}, "is_accepted": true, "score": 5, "last_activity_date": 1423669804, "creation_date": 1423669804, "answer_id": 28458569, "question_id": 28457047, "link": "https://stackoverflow.com/questions/28457047/how-can-i-generate-random-numbers-whose-average-follows-a-sine-wave-in-ruby/28458569#28458569", "title": "How can I generate random numbers whose average follows a sine wave in Ruby?", "body": "<p>Here's an idea.  Create a class that has some sample size over which it generates points in a sine wave plus some random \"fudge factor\" (variance) above or below that point.  This way, if you plot the number of points in the sample size you should see a sine wave with \"roughness\" according to the configured variance (fudge factor).</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>class RandomSineWave\n  attr_reader :size\n  def initialize(size=20, variance=0.2)\n    @size = size\n    @step = 2 * Math::PI / size\n    @position = 0\n    @variance = variance\n  end\n  def next\n    @position = 0 if @position &gt;= 2 * Math::PI\n    next_rand = Math.sin(@position) + (rand * @variance) - (@variance / 2)\n    @position += @step\n    next_rand\n  end\nend\n\n# Generate TSV output for demonstration.\nrsw = RandomSineWave.new\nrsw.size.times { |i| puts [i, rsw.next].join \"\\t\" }\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/ipevn.png\" alt=\"random sine wave plot\"></p>\n\n<p>You can fiddle with the \"roughness\" by modifying the second argument to the constructor:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>rsw = RandomSineWave.new(20, 0.8) # Results plotted below...\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/3jL11.png\" alt=\"enter image description here\"></p>\n"}, {"comments": [{"owner": {"reputation": 42135, "user_id": 103739, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/2dUhl.jpg?s=128&g=1", "display_name": "JP Silvashy", "link": "https://stackoverflow.com/users/103739/jp-silvashy"}, "edited": false, "score": 0, "creation_date": 1474427971, "post_id": 28488496, "comment_id": 66522158, "body": "This is a great answer."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1424069253, "last_edit_date": 1424069253, "creation_date": 1423777849, "answer_id": 28488496, "question_id": 28457047, "link": "https://stackoverflow.com/questions/28457047/how-can-i-generate-random-numbers-whose-average-follows-a-sine-wave-in-ruby/28488496#28488496", "title": "How can I generate random numbers whose average follows a sine wave in Ruby?", "body": "<p>As I understand, given some positive integer <code>n</code>, you want to construct an array of <code>n</code> probability distributions such that the expected values of partial sums of random variables describes a sine wave. I presume the sine wave is over the interval <code>(0..2*\u03c0)</code> and that the expected values are to be evenly spaced over that interval.</p>\n\n<p>We must first ask if these probability distributions are statistically independent.  If they are not, it becomes hopelessly complex, so I will assume they are independent. Whether they are identical distributions, after adjusting for differences in their means, is not necessary or even important. I'll come back to that later.</p>\n\n<p>Since you want the expected values of partial sums of the random variables <code>X</code><sub>i</sub> to describe a sine wave, we require that:</p>\n\n<p>E [\u2211<sub>j=0...i</sub>X<sub>j</sub>] = k * sin(2*\u03c0*i/n)</p>\n\n<p>for all <code>i = 0...n-1</code>, for a given scale factor, <code>k</code> (with  (<code>E[..]</code> denoting \"expected value\"). We can assume, without loss of generality, that <code>k=1</code>, as we can always scale the random variables by <code>k</code>, resulting in their means being scaled by the same constant.</p>\n\n<p>Because the distributions are independent, we can write:</p>\n\n<p>\u2211<sub>j=0...i</sub>m<sub>j</sub> = sin(2*\u03c0*i/n)</p>\n\n<p>where</p>\n\n<p>m<sub>i</sub> = E[X<sub>i</sub>] is X<sub>i</sub>'s mean.</p>\n\n<p>In Ruby-speak, for an array <code>x</code> of <code>n</code> values (floats), this is:</p>\n\n<pre><code>x[0,i].reduce(:+) = Math::sin(2.0 * Math::PI * i.to_f/n)\n</code></pre>\n\n<p>We can easily compute <code>x</code>. Assume <code>n = 36</code>.\n For <code>i = 0</code>:</p>\n\n<pre><code>x[0,0].reduce(:+) = Math::sin(2.0 * Math::PI * 0.0/36)\n  # x[0] = 0\n</code></pre>\n\n<p>Let:</p>\n\n<pre><code>s = x[0]\n  #=&gt; 0.0\n</code></pre>\n\n<p>For <code>i = 1</code>:</p>\n\n<pre><code>x[0,1].reduce(:+) = Math::sin(2.0 * Math::PI * 1.0/36).round(6)\n  #=&gt;    0.0 + x[1] = Math::sin(0.17453292519943295).round(6) \n  #=&gt;               = 0.173648\n</code></pre>\n\n<p>So</p>\n\n<pre><code>x[1] = 0.173648 - 0.0\n  #=&gt; 0.173648\n</code></pre>\n\n<p>Now let</p>\n\n<pre><code>s += x[1]\n  #=&gt; 0.173648\n</code></pre>\n\n<p>For <code>i = 2</code>:</p>\n\n<pre><code>x[0,2].reduce(:+)     = Math::sin(2.0 * Math::PI * 2.0/36).round(6)\n  #=&gt;        s + x[2] = Math::sin(0.3490658503988659).round(6) \n  #=&gt; 0.173648 + x[2] = 0.342020 \n</code></pre>\n\n<p>So</p>\n\n<pre><code>x[2] = 0.342020 - 0.173648\n  #=&gt; 0.168372\n</code></pre>\n\n<p>We then update <code>s</code>:</p>\n\n<pre><code>s += 0.168372\n  #=&gt; 0.173648 += 0.168372  \n  #=&gt; 0.342020\n</code></pre>\n\n<p>and then compute <code>x[3]</code> similarly, then each of the remaining <code>x</code>'s:</p>\n\n<pre><code>def compute(n, p=6)\n  sum = 0.0\n  n.times.map do |i|\n    if i.zero?\n      [0.0, 0.0, 0.0, 0.0]\n    else\n      x = Math::sin(2.0 * Math::PI * i.to_f/n) - sum\n      sum += x\n      [(2.0*(i.to_f/n)*Math::PI).round(p), x.round(p),\n        sum.round(p), Math::sin(sum).round(p)]\n    end\n  end\nend\n\ncompute(36)\n  #   radians    x          sum        sin(sum)    degrees\n  # [[0.0,       0.0,       0.0,       0.0     ],     0\n  #  [0.174533,  0.173648,  0.173648,  0.172777],\n  #  ...\n  #  [1.396263,  0.045115,  0.984808,  0.833166],\n  #  [1.570796,  0.015192,  1.0,       0.841471],    90\n  #  [1.745329, -0.015192,  0.984808,  0.833166],\n  #  ...\n  #  [2.967060, -0.168372,  0.173648,  0.172777],\n  #  [3.141593, -0.173648,  0.0,       0.0     ],   180\n  #  [3.316126, -0.173648, -0.173648, -0.172777],\n  #  ...\n  #  [4.537856, -0.045115, -0.984808, -0.833166],\n  #  [4.712389, -0.015192, -1.0,      -0.841471],   270\n  #  [4.886922,  0.015192, -0.984808, -0.833166],  \n  #  ...\n  #  [5.934119,  0.15798,  -0.34202,  -0.335391],\n  #  [6.108652,  0.168372, -0.173648, -0.172777]]   350 \n</code></pre>\n\n<p>I will add a plot of these values when I have time to familiarize myself with @maeric's nifty plotting tool.</p>\n\n<p>Now that we have the means, we can consider constructing probability distributions having those means.</p>\n\n<p>Suppose, for example, we assume each random variable has the same uniform distribution with range (max-min) of <code>rng</code>, for varying means. If the mean were, say, <code>0.325467</code>, we could generate a pseudo random-variate as follows:</p>\n\n<pre><code>rng * (rand-0.325467)\n</code></pre>\n\n<p>where</p>\n\n<pre><code>(0.5-0.174533).round(6)\n  #=&gt; 0.325467\n</code></pre>\n\n<p>We therefore can generate pseudo-random variates for a uniform distribution with a given range and mean as follows:</p>\n\n<pre><code>def uniform_rv(rng, mean)\n  rng.to_f * (rand -0.5 -mean)\nend\n</code></pre>\n"}], "owner": {"reputation": 1945, "user_id": 451664, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7GIPx.jpg?s=128&g=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/451664/bryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1551, "favorite_count": 1, "accepted_answer_id": 28458569, "answer_count": 2, "score": 0, "last_activity_date": 1424069253, "creation_date": 1423665655, "question_id": 28457047, "link": "https://stackoverflow.com/questions/28457047/how-can-i-generate-random-numbers-whose-average-follows-a-sine-wave-in-ruby", "title": "How can I generate random numbers whose average follows a sine wave in Ruby?", "body": "<p>I'm not a math guy, so I don't really know what I'm trying to do is called, but I'm sure there's a name for it. ;-)</p>\n\n<p>I'm wanting to generate an array of random numbers in Ruby whose average at each element in the array follows a sine wave. What I mean by <strong>average at each element</strong> is the average at element <code>n</code> would be <code>ary[0..n].inject(:+).to_f / (n + 1)</code>. So, if I loop from <code>0..n</code> over the array of random numbers and generate the average like I described, I'd like the resulting values to follow a sine wave. I just don't know how to actually generate the random numbers in such a way...</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code># assuming `ary` is the array of random numbers\n# I'm trying to figure out how to generate...\n\naverages = []\n\n(0..ary.size).each do |n|\n  averages &lt;&lt; ary[0..n].inject(:+).to_f / (n + 1)\nend\n\n# `averages` should plot as a sine wave now...\n</code></pre>\n"}, {"tags": ["ruby", "time"], "comments": [{"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 1, "creation_date": 1423662695, "post_id": 28455977, "comment_id": 45238594, "body": "What you have tried?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1423663434, "post_id": 28455977, "comment_id": 45239109, "body": "There&#39;s <a href=\"https://github.com/JackC/tod\" rel=\"nofollow noreferrer\">github.com/JackC/tod</a>"}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1423663757, "post_id": 28456279, "comment_id": 45239329, "body": "What about adding times and check whether a time belongs to a range?"}, {"owner": {"reputation": 4279, "user_id": 3920143, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1b47dd912eaeb6cd72a15ec2932f6751?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/3920143/joel"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1423664102, "post_id": 28456279, "comment_id": 45239579, "body": "Check the bottom part of my answer... You can use the cover method"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1423664141, "post_id": 28456279, "comment_id": 45239606, "body": "<code>(Time.parse(&#39;11pm&#39;)..Time.parse(&#39;6am&#39;)).cover?(Time.parse(&#39;4&zwnj;&#8203;am&#39;)) =&gt; false</code>"}, {"owner": {"reputation": 4279, "user_id": 3920143, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1b47dd912eaeb6cd72a15ec2932f6751?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/3920143/joel"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1423666465, "post_id": 28456279, "comment_id": 45241146, "body": "Does that answer your question?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1423666640, "post_id": 28456279, "comment_id": 45241263, "body": "<code>cover</code> only works when you take the date part into account. For time-only values, it can give unexpected results, as shown in my example."}, {"owner": {"reputation": 4279, "user_id": 3920143, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1b47dd912eaeb6cd72a15ec2932f6751?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/3920143/joel"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1423678400, "post_id": 28456279, "comment_id": 45248750, "body": "Yeah but if you can take DateTime value and format it to just the time it seems to work..."}, {"owner": {"reputation": 4279, "user_id": 3920143, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1b47dd912eaeb6cd72a15ec2932f6751?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/3920143/joel"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1423714870, "post_id": 28456279, "comment_id": 45263523, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/70755/discussion-between-joell-and-stefan\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 4279, "user_id": 3920143, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1b47dd912eaeb6cd72a15ec2932f6751?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/3920143/joel"}, "is_accepted": false, "score": 5, "last_activity_date": 1424809856, "last_edit_date": 1424809856, "creation_date": 1423663281, "answer_id": 28456279, "question_id": 28455977, "link": "https://stackoverflow.com/questions/28455977/in-ruby-is-there-a-way-a-gem-perhaps-to-process-time-in-xxxx-format/28456279#28456279", "title": "In Ruby, is there a way (a gem, perhaps) to process time in &quot;XX:XX&quot; format?", "body": "<p>You can use <code>strftime</code> to format the time any way you want. If you want only the hour and minutes you can use this:</p>\n\n<pre><code>Time.now.strftime(\"%H:%M\")\n =&gt; \"08:57\"\n</code></pre>\n\n<blockquote>\n  <p>time.strftime gives you all of these options to format</p>\n</blockquote>\n\n<pre><code>%a - The abbreviated weekday name (\u201cSun\u201d)\n\n%A - The full weekday name (\u201cSunday\u201d)\n\n%b - The abbreviated month name (\u201cJan\u201d)\n\n%B - The full month name (\u201cJanuary\u201d)\n\n%c - The preferred local date and time representation\n\n%d - Day of the month (01..31)\n\n%H - Hour of the day, 24-hour clock (00..23)\n\n%I - Hour of the day, 12-hour clock (01..12)\n\n%j - Day of the year (001..366)\n\n%m - Month of the year (01..12)\n\n%M - Minute of the hour (00..59)\n\n%p - Meridian indicator (\u201cAM\u201d or \u201cPM\u201d)\n\n%S - Second of the minute (00..60)\n\n%U - Week number of the current year, starting with the first Sunday as the first day of the first week (00..53)\n\n%W - Week number of the current year, starting with the first Monday as the firstday of the first week (00..53)\n\n%w - Day of the week (Sunday is 0, 0..6)\n\n%x - Preferred representation for the date alone, no time\n\n%X - Preferred representation for the time alone, no date\n\n%y - Year without a century (00..99)\n\n%Y - Year with century\n\n%Z - Time zone name\n\n%% - Literal \u201c%\u201d character\n</code></pre>\n\n<p>Here is a link to the\n<a href=\"http://apidock.com/rails/ActiveSupport/TimeWithZone/strftime\" rel=\"nofollow\">strftime</a> docs</p>\n\n<blockquote>\n  <p>To check if time belongs to a certain range you can use the <a href=\"http://ruby-doc.org//core-1.9.3/Range.html#method-i-cover-3F\" rel=\"nofollow\">cover</a>\n  method</p>\n</blockquote>\n\n<pre><code>2.1.5 :003 &gt; (Time.now..Time.now+10).cover?(Time.now)\n =&gt; true\n\n2.1.5 :004 &gt; (Time.now..Time.now+10).cover?(Time.now+20)\n =&gt; false\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1423664099, "post_id": 28456366, "comment_id": 45239578, "body": "<code>(Time.parse(&#39;11pm&#39;)..Time.parse(&#39;6am&#39;)).cover?(Time.parse(&#39;4&zwnj;&#8203;am&#39;)) #=&gt; false</code>"}, {"owner": {"reputation": 2063, "user_id": 196834, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1EhzG.jpg?s=128&g=1", "display_name": "Ashley", "link": "https://stackoverflow.com/users/196834/ashley"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1423664178, "post_id": 28456366, "comment_id": 45239636, "body": "You need date information. How does it know that you are rolling over into tomorrow without it."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1423664271, "post_id": 28456366, "comment_id": 45239702, "body": "Exactly, but the OP is <i>&quot;(...) not interested in date-related features&quot;</i>"}, {"owner": {"reputation": 2063, "user_id": 196834, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1EhzG.jpg?s=128&g=1", "display_name": "Ashley", "link": "https://stackoverflow.com/users/196834/ashley"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1423664589, "post_id": 28456366, "comment_id": 45239912, "body": "Then OP can&#39;t perform your calculation as it&#39;s ambiguous to what day 4am is on."}, {"owner": {"reputation": 1089, "user_id": 3512592, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/189408ac24ce8bae9dc749c842c15037?s=128&d=identicon&r=PG&f=1", "display_name": "Devon Parsons", "link": "https://stackoverflow.com/users/3512592/devon-parsons"}, "edited": false, "score": 0, "creation_date": 1423665439, "post_id": 28456366, "comment_id": 45240458, "body": "@Ash I see what you&#39;re saying, I think he wants it to implicitly assume that the second number in the range is the soonest possible time after the first in a <code>cycle</code> type day"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1423669033, "post_id": 28456366, "comment_id": 45242940, "body": "Just like on a clock: the <code>4am</code> mark lies within the <code>11pm..6am</code> range. I&#39;m aware that Ruby&#39;s <code>Time</code> class doesn&#39;t work this way, but I think this is what the OP is looking for."}], "tags": [], "owner": {"reputation": 2063, "user_id": 196834, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1EhzG.jpg?s=128&g=1", "display_name": "Ashley", "link": "https://stackoverflow.com/users/196834/ashley"}, "is_accepted": false, "score": 3, "last_activity_date": 1423663538, "creation_date": 1423663538, "answer_id": 28456366, "question_id": 28455977, "link": "https://stackoverflow.com/questions/28455977/in-ruby-is-there-a-way-a-gem-perhaps-to-process-time-in-xxxx-format/28456366#28456366", "title": "In Ruby, is there a way (a gem, perhaps) to process time in &quot;XX:XX&quot; format?", "body": "<p><code>ActiveSupport</code>'s Numeric will help you.</p>\n\n<p>You can do:</p>\n\n<pre><code>require 'date'\nrequire 'active_support/all'\nDateTime.parse(\"11:40\") + 30.minutes\n</code></pre>\n\n<p>You will need the <code>ActiveSupport</code> gem in your <code>Gemfile</code>.</p>\n\n<p>As for checking if a time is in a range you can use <a href=\"http://www.ruby-doc.org/core-1.9.2/Range.html#method-i-cover-3F\" rel=\"nofollow\">#cover</a>:</p>\n\n<pre><code>irb(main):001:0&gt; (DateTime.parse(\"11:40\")..DateTime.parse(\"11:50\")).cover?(DateTime.parse(\"11:45\"))\n=&gt; true\nirb(main):002:0&gt; (DateTime.parse(\"11:40\")..DateTime.parse(\"11:50\")).cover?(DateTime.parse(\"12:00\"))\n=&gt; false\n</code></pre>\n"}], "owner": {"reputation": 363, "user_id": 4344373, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/hBNOU.jpg?s=128&g=1", "display_name": "A.V. Arno", "link": "https://stackoverflow.com/users/4344373/a-v-arno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1431115961, "creation_date": 1423662477, "last_edit_date": 1431115961, "question_id": 28455977, "link": "https://stackoverflow.com/questions/28455977/in-ruby-is-there-a-way-a-gem-perhaps-to-process-time-in-xxxx-format", "title": "In Ruby, is there a way (a gem, perhaps) to process time in &quot;XX:XX&quot; format?", "body": "<p>In particular, to add time (e.g. <code>11:40 + 00:30 = 12:10</code>) and check whether a time belongs to a range (e.g. <code>(11:00..12:00).include?(11:30)</code>).\nI understand that I can write a class, but maybe a solution already exists.\nThe built-in <code>Time</code> class is not entirely what I want, because I am not interested in date-related features, which are built-in.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 15106, "user_id": 1117851, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/9FMVK.jpg?s=128&g=1", "display_name": "itsnikolay", "link": "https://stackoverflow.com/users/1117851/itsnikolay"}, "edited": false, "score": 0, "creation_date": 1423669299, "post_id": 28455847, "comment_id": 45243116, "body": "do not user Windows with ruby :) seriously, install Ubuntu on Virtual Machine"}], "answers": [{"tags": [], "owner": {"reputation": 655, "user_id": 3650105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0abf617f55208bdfdd10136fd76ae25?s=128&d=identicon&r=PG&f=1", "display_name": "februaryInk", "link": "https://stackoverflow.com/users/3650105/februaryink"}, "is_accepted": false, "score": 0, "last_activity_date": 1423933156, "creation_date": 1423933156, "answer_id": 28517934, "question_id": 28455847, "link": "https://stackoverflow.com/questions/28455847/error-failed-to-build-gem-native-extension-when-installing-rails/28517934#28517934", "title": "ERROR: Failed to build gem native extension when installing rails", "body": "<p>Looks the same as the issue being discussed <a href=\"https://github.com/rubygems/rubygems/issues/977\" rel=\"nofollow\" title=\"here\">here</a>.</p>\n\n<p>Apparently, there is a problem with Ruby 1.9.3 and newer RubyGems versions on Windows machines. Their quick-fix solution was to downgrade to an earlier version of RubyGems.</p>\n\n<pre><code>gem update --system 1.8.29\n</code></pre>\n\n<p>Once you have done that, confirm that <code>gems -v</code> returns <code>1.8.29</code> and try your command again.</p>\n\n<p>Otherwise, you can upgrade to Ruby 2.X, which should also resolve this problem.</p>\n"}], "owner": {"reputation": 8045, "user_id": 1937021, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/7e8246fe40996d588afd5a876668e0e6?s=128&d=identicon&r=PG", "display_name": "user1937021", "link": "https://stackoverflow.com/users/1937021/user1937021"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 359, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423933156, "creation_date": 1423662095, "question_id": 28455847, "link": "https://stackoverflow.com/questions/28455847/error-failed-to-build-gem-native-extension-when-installing-rails", "title": "ERROR: Failed to build gem native extension when installing rails", "body": "<p>I'm on windows and trying to install rails. but I get the following error message:</p>\n\n<pre><code>Z:\\AlexL\\My Documents\\rails&gt;gem install rails\nTemporarily enhancing PATH to include DevKit...\nBuilding native extensions.  This could take a while...\nERROR:  Error installing rails:\n        ERROR: Failed to build gem native extension.\n\n    C:/Ruby193/bin/ruby.exe -r ./siteconf20150211-3312-5ie7vd.rb extconf.rb\ncreating Makefile\n\nmake  clean\nMakefile:165: *** target pattern contains no `%'.  Stop.\n\nmake\nMakefile:165: *** target pattern contains no `%'.  Stop.\n\nmake failed, exit code 2\n\nGem files will remain installed in C:/Ruby193/lib/ruby/gems/1.9.1/gems/json-1.8.\n2 for inspection.\nResults logged to C:/Ruby193/lib/ruby/gems/1.9.1/extensions/x86-mingw32/1.9.1/js\non-1.8.2/gem_make.out\n</code></pre>\n\n<p>Ruby version is:\nruby 1.9.3p484 </p>\n\n<p>I've got this devkit installed DevKit-tdm-32-4.5.2-20111229-1559-sfx\n in this folder:</p>\n\n<p>C:\\Ruby193\\DevKit\\</p>\n\n<p>Not sure what else is wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1423662781, "post_id": 28455800, "comment_id": 45238645, "body": "Why <code>ApplicationController</code> is not a solution? It was going to be my suggestion ..."}, {"owner": {"reputation": 3199, "user_id": 1611683, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/44576838a06da54b55272e8b7d662317?s=128&d=identicon&r=PG", "display_name": "pierallard", "link": "https://stackoverflow.com/users/1611683/pierallard"}, "reply_to_user": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1423664831, "post_id": 28455800, "comment_id": 45240078, "body": "Aggree with @dgilperez . <code>ApplicationController</code>&#39; <code>before_filter</code> is the solution."}, {"owner": {"reputation": 9737, "user_id": 2422778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUihh.jpg?s=128&g=1", "display_name": "Mike Szyndel", "link": "https://stackoverflow.com/users/2422778/mike-szyndel"}, "edited": false, "score": 0, "creation_date": 1423668519, "post_id": 28455800, "comment_id": 45242566, "body": "I don&#39;t believe that changing app time zone is the right approach. What if user changes timezone? (or it changes itself with daylight saving?)"}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 3497344, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5bbc0fbcd7b520dba9f8292854a10eba?s=128&d=identicon&r=PG&f=1", "display_name": "Serge", "link": "https://stackoverflow.com/users/3497344/serge"}, "edited": false, "score": 0, "creation_date": 1423705167, "post_id": 28460554, "comment_id": 45261105, "body": "The problem with ApplicationController was that some other controllers didn&#39;t have access to current_user (like API controller), but &quot;if current_user&quot; should solve this. :) Thank you so much for advice!"}], "tags": [], "owner": {"reputation": 3878, "user_id": 332032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8244d18af960b039be06c0664fcd0ac1?s=128&d=identicon&r=PG&f=1", "display_name": "SomeDudeSomewhere", "link": "https://stackoverflow.com/users/332032/somedudesomewhere"}, "is_accepted": true, "score": 2, "last_activity_date": 1423675422, "creation_date": 1423675422, "answer_id": 28460554, "question_id": 28455800, "link": "https://stackoverflow.com/questions/28455800/rails-set-default-timezone-when-current-user-loaded/28460554#28460554", "title": "Rails. Set default timezone when current_user loaded", "body": "<p>I think the safest approach here would be to use the <strong>around_action</strong> like such, make sure to specify which action you want this to happen on:</p>\n\n<pre><code>class SomeController &lt; ApplicationController\n    around_action :set_time_zone, only: :show\n\n    private\n\n    def set_time_zone\n       if current_user\n         Time.zone = current_user.settings(:main).time_zone \n       end\n       yield         \n    end\nend\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 3497344, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5bbc0fbcd7b520dba9f8292854a10eba?s=128&d=identicon&r=PG&f=1", "display_name": "Serge", "link": "https://stackoverflow.com/users/3497344/serge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 522, "favorite_count": 0, "accepted_answer_id": 28460554, "answer_count": 1, "score": 0, "last_activity_date": 1423675422, "creation_date": 1423661954, "question_id": 28455800, "link": "https://stackoverflow.com/questions/28455800/rails-set-default-timezone-when-current-user-loaded", "title": "Rails. Set default timezone when current_user loaded", "body": "<p>I'd like to change the application time zone when current_user (Devise) is initialized, like this:</p>\n\n<pre><code>    Time.zone = current_user.settings(:main).time_zone\n</code></pre>\n\n<p>What is the best place in the app to put this code at (application controller, before_filter is not a solution)?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "xml"], "comments": [{"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1423661529, "post_id": 28455550, "comment_id": 45237866, "body": "Can you show us more code, like the API call?"}, {"owner": {"reputation": 3307, "user_id": 3287921, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/967c36b17c947046fa295792b0e1db95?s=128&d=identicon&r=PG&f=1", "display_name": "Tarlen", "link": "https://stackoverflow.com/users/3287921/tarlen"}, "reply_to_user": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1423661617, "post_id": 28455550, "comment_id": 45237926, "body": "updated code with full response"}, {"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1423662380, "post_id": 28455550, "comment_id": 45238403, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/1459170/what-is-13\">What is &amp;#13;?</a>"}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1423769299, "post_id": 28455550, "comment_id": 45293980, "body": "When you say &quot;escape this&quot;, what precisely do you mean?  Do you mean that you want to turn that character into its unicode equivalent?"}], "answers": [{"tags": [], "owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "is_accepted": false, "score": 0, "last_activity_date": 1423662357, "creation_date": 1423662357, "answer_id": 28455932, "question_id": 28455550, "link": "https://stackoverflow.com/questions/28455550/api-yields-weird-characters/28455932#28455932", "title": "API yields weird characters", "body": "<p>That's no <em>weird character</em> but an ASCII-encoded character interpretable as an Carriage Return. Check <a href=\"http://www.asciitable.com/\" rel=\"nofollow\">AsciiTable</a> or any other reference.</p>\n\n<p>You can either reencode you output to change it to <code>\\n</code>, a <a href=\"http://www.w3.org/TR/html4/sgml/entities.html\" rel=\"nofollow\">html entity</a> or probably leave it like that as it will cause no harm. </p>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 2, "last_activity_date": 1423670093, "creation_date": 1423670093, "answer_id": 28458686, "question_id": 28455550, "link": "https://stackoverflow.com/questions/28455550/api-yields-weird-characters/28458686#28458686", "title": "API yields weird characters", "body": "<p>You should parse the XML response with <a href=\"http://www.nokogiri.org\" rel=\"nofollow\">Nokogiri</a>, it handles entity conversion.</p>\n\n<pre><code>require 'nokogiri'\n\nresponse = &lt;&lt;-XML\n&lt;daoapi&gt;\n  &lt;status&gt;FEJL&lt;/status&gt;\n  &lt;fejlkode&gt;520&lt;/fejlkode&gt;\n  &lt;fejltekst&gt;Fejl ved opslag: Der er fejl i input parametre:&amp;#13;\nHusnummer mangler eller er ikke numerisk&amp;#13;\n&lt;/fejltekst&gt;\n&lt;/daoapi&gt;\nXML\n\ndoc = Nokogiri::XML(response)\ndoc.at_xpath('//fejltekst').text\n#=&gt; \"Fejl ved opslag: Der er fejl i input parametre:\\r\\nHusnummer mangler eller er ikke numerisk\\r\\n\"\n</code></pre>\n"}], "owner": {"reputation": 3307, "user_id": 3287921, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/967c36b17c947046fa295792b0e1db95?s=128&d=identicon&r=PG&f=1", "display_name": "Tarlen", "link": "https://stackoverflow.com/users/3287921/tarlen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "closed_date": 1424024370, "accepted_answer_id": 28458686, "answer_count": 2, "score": 0, "last_activity_date": 1423670093, "creation_date": 1423661167, "last_edit_date": 1423661607, "question_id": 28455550, "link": "https://stackoverflow.com/questions/28455550/api-yields-weird-characters", "closed_reason": "Not suitable for this site", "title": "API yields weird characters", "body": "<p>Im connecting to an external API which returns messages with the character</p>\n\n<p>Response:</p>\n\n<pre><code>&lt;daoapi&gt;\n  &lt;status&gt;FEJL&lt;/status&gt;\n  &lt;fejlkode&gt;520&lt;/fejlkode&gt;\n  &lt;fejltekst&gt;Fejl ved opslag: Der er fejl i input parametre:&amp;#13;\nHusnummer mangler eller er ikke numerisk&amp;#13;\n&lt;/fejltekst&gt;\n&lt;/daoapi&gt;\n</code></pre>\n\n<p>It's in danish, but you can see the characters occuring twice </p>\n\n<p>How can I escape this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "arrays", "sorting", "comparison"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1423661681, "post_id": 28455523, "comment_id": 45237959, "body": "Is <code>[11, 3, 7, 1, 15]</code> &#224; 100% match?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1423661843, "post_id": 28455523, "comment_id": 45238065, "body": "Could you describe your algorithm? What makes No 1 a 75 % match, No 2 a 25% match and No 3 a 100% match?"}, {"owner": {"reputation": 305, "user_id": 932281, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4c4b7405d35963027863715fb96b9af6?s=128&d=identicon&r=PG", "display_name": "Thomas Kuhlmann", "link": "https://stackoverflow.com/users/932281/thomas-kuhlmann"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1423662363, "post_id": 28455523, "comment_id": 45238391, "body": "@CarySwoveland You are right, it&#39;s actually not a 100% match - it contains 100% of the numbers from the master array but it is only an 80% match. it would be great if I could highlight both. Not sure how difficult this is..."}, {"owner": {"reputation": 305, "user_id": 932281, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4c4b7405d35963027863715fb96b9af6?s=128&d=identicon&r=PG", "display_name": "Thomas Kuhlmann", "link": "https://stackoverflow.com/users/932281/thomas-kuhlmann"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1423662491, "post_id": 28455523, "comment_id": 45238470, "body": "@Stefan I&#39;ll try :) The master array contains 4 values, as a result each value that has a match represents a 25% increase. If the master array would have 5 values, each value would represent 20%"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1423663529, "post_id": 28455523, "comment_id": 45239182, "body": "You need to edit to define precisely how the measure of similarity is defined. Do not try to explain in comments."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1423663354, "post_id": 28455584, "comment_id": 45239056, "body": "Suppose master and array were both <code>[1,1]</code>?"}, {"owner": {"reputation": 5074, "user_id": 4207394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mmfTf.png?s=128&g=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/4207394/deep"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1423663935, "post_id": 28455584, "comment_id": 45239457, "body": "Thanks for denoting the mistake. I have corrected my answer but not sure if it will succeed in all scenarios or not. Please correct me if the answer is still wrong."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1423664551, "post_id": 28455584, "comment_id": 45239892, "body": "<code>uniq</code> won&#39;t work.Suppose the master were <code>[1,1]</code> and the array <code>[1]</code>. I presume that would be a 50% match, but we can&#39;t be sure because the question is not clear."}, {"owner": {"reputation": 5074, "user_id": 4207394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mmfTf.png?s=128&g=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/4207394/deep"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1423664983, "post_id": 28455584, "comment_id": 45240178, "body": "I have updated the answer more that it would be just a partial solution. Thanks for denoting the issues."}], "tags": [], "owner": {"reputation": 5074, "user_id": 4207394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mmfTf.png?s=128&g=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/4207394/deep"}, "is_accepted": false, "score": 2, "last_activity_date": 1423664933, "last_edit_date": 1423664933, "creation_date": 1423661277, "answer_id": 28455584, "question_id": 28455523, "link": "https://stackoverflow.com/questions/28455523/how-do-i-compare-multiple-arrays-and-identify-the-closest-match/28455584#28455584", "title": "How do I compare multiple arrays and identify the closest match?", "body": "<p>What you can do is take the master array and take each of the array. Make a intersection between the master and each array. Take the size of result which would give you the number of matched elements. Then if you need to find the percentage you can easily do that. A example:</p>\n\n<pre><code> master = [1, 3, 7, 11]\n arrays = [[1,2,3,4,5], [1,3,11,0], [1,2,3,7,11]]\n arrays.each{|a| puts ((master &amp; a).size.to_f/master.size.to_f) * 100 }\n</code></pre>\n\n<p>This will give the percentage of match. Instead of arrays you need to use the data in your database. Hope this helps.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>The above would only work when the array have unique element. If array has same elements and the order is not important then <code>uniq</code> can be used on both sides. But this would be partially correct as you can read the comments below. As @Cary Swoveland mentioned what might be wrong.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1423663718, "last_edit_date": 1423663718, "creation_date": 1423663185, "answer_id": 28456237, "question_id": 28455523, "link": "https://stackoverflow.com/questions/28455523/how-do-i-compare-multiple-arrays-and-identify-the-closest-match/28456237#28456237", "title": "How do I compare multiple arrays and identify the closest match?", "body": "<p>Assuming order is not important:</p>\n\n<pre><code>m = [1, 3, 7, 11]\na = [2, 3, 4, 8, 10].dup\n\nm.reduce(0) do |t,i| \n  idx = a.index(i)\n  if idx\n    a.delete_at(idx)\n    t+1\n  else\n    t\n  end\nend * 100 / a.size\n  #=&gt; 25\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1423910243, "post_id": 28456480, "comment_id": 45347065, "body": "There is a problem when <code>array</code> has duplicates, as that information is lost when <code>&amp;</code> is applied."}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1424078537, "post_id": 28456480, "comment_id": 45390173, "body": "Hmm, that&#39;s true.  I wonder whether, according the questioner&#39;s requirements, <code>[1,2,3]</code> is deemed closer to <code>[1,1,2]</code> or <code>[1,2]</code>"}], "tags": [], "owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "is_accepted": false, "score": 1, "last_activity_date": 1423663942, "creation_date": 1423663942, "answer_id": 28456480, "question_id": 28455523, "link": "https://stackoverflow.com/questions/28455523/how-do-i-compare-multiple-arrays-and-identify-the-closest-match/28456480#28456480", "title": "How do I compare multiple arrays and identify the closest match?", "body": "<p>Let <code>db_arrays</code> be the stored arrays and <code>array</code> the one you want to find the best match for.  I would do </p>\n\n<pre><code>ordered = db_arrays.sort_by{|db_array| (db_array &amp; array).size}.reverse\n</code></pre>\n\n<p>this will give you db_arrays in order of how well they match (according to your criteria), best first. </p>\n\n<p>EDIT: if you have a very large number of db_arrays then it might be better to try to do this with an sql query rather than loading them all out and testing them with ruby.  </p>\n"}], "owner": {"reputation": 305, "user_id": 932281, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4c4b7405d35963027863715fb96b9af6?s=128&d=identicon&r=PG", "display_name": "Thomas Kuhlmann", "link": "https://stackoverflow.com/users/932281/thomas-kuhlmann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1423664933, "creation_date": 1423661076, "question_id": 28455523, "link": "https://stackoverflow.com/questions/28455523/how-do-i-compare-multiple-arrays-and-identify-the-closest-match", "title": "How do I compare multiple arrays and identify the closest match?", "body": "<p>I have one array which contains the master data, e.g.:</p>\n\n<pre><code>[1, 3, 7, 11]\n</code></pre>\n\n<p>and a database with a table which contains arrays with various numbers, e.g:</p>\n\n<pre><code>1) [1, 5, 7, 11]\n2) [2, 3, 4, 8, 10]\n3) [1, 3, 7, 11, 15]\n...\n</code></pre>\n\n<p>I am looking for an easy way to calculate which ones of the arrays are the closest one to the master data and rank it accordingly. The result would be that </p>\n\n<ol>\n<li>No 3 - 100% match </li>\n<li>No 1 - 75% </li>\n<li>No 2 - 25%</li>\n</ol>\n\n<p>This probably isn't very difficult, but for some reason I can't wrap my head around it. Is there a function in ruby or a gem in rails that can help with this?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby", "conditional-statements"], "comments": [{"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 1, "creation_date": 1423660410, "post_id": 28455229, "comment_id": 45237141, "body": "<code>object.is_a?(ExampleObject) and object.respond_to?(:foo) and raise ArgumentError, &quot;incompatible object given: #{object.inspect}&quot;</code>?"}, {"owner": {"reputation": 5147, "user_id": 334761, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ZXRM5.jpg?s=128&g=1", "display_name": "Stefan Majewsky", "link": "https://stackoverflow.com/users/334761/stefan-majewsky"}, "reply_to_user": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 1, "creation_date": 1423660473, "post_id": 28455229, "comment_id": 45237180, "body": "That defeats the purpose of putting the action in front, where it will be found faster, which is what if/unless clauses (as opposed to if/unless statements) were originally designed for."}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1423660859, "post_id": 28455229, "comment_id": 45237443, "body": "I guess moving <code>unless</code> at the end of the first line isn&#39;t acceptable, too?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1423662488, "post_id": 28455229, "comment_id": 45238467, "body": "I&#39;d say a multiline expression defeats the purpose of an inline if/unless :-)"}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1423662130, "post_id": 28455812, "comment_id": 45238257, "body": "+1 because this is correct, but the OP is looking for a solution without a backslash: <i>&quot;(...) I can put a backslash at the end of the first line, but that looks ugly and feels wrong&quot;</i>"}], "tags": [], "owner": {"reputation": 4349, "user_id": 648392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b2bd8a8c583866711c234a612f6b157?s=128&d=identicon&r=PG", "display_name": "Jesper", "link": "https://stackoverflow.com/users/648392/jesper"}, "is_accepted": false, "score": 1, "last_activity_date": 1423661987, "creation_date": 1423661987, "answer_id": 28455812, "question_id": 28455229, "link": "https://stackoverflow.com/questions/28455229/can-i-put-an-if-unless-clause-on-the-next-line-in-ruby/28455812#28455812", "title": "Can I put an if/unless clause on the next line in Ruby?", "body": "<p><strong>This is not really a solution, I was sloppy when reading the question. The OP wants a solution without backslash.</strong></p>\n\n<p>You should be able to do this:</p>\n\n<pre><code>raise ArgumentError, \"incompatible object given: #{object.inspect}\" \\\n  unless object.is_a?(ExampleObject) and object.respond_to?(:foo)\n</code></pre>\n\n<p>The <code>\\</code> characters tells ruby to keep reading as if there was no line break.</p>\n"}, {"tags": [], "owner": {"reputation": 3381, "user_id": 727341, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/3a499408b456133e63f79c0ce935a0f9?s=128&d=identicon&r=PG", "display_name": "csch", "link": "https://stackoverflow.com/users/727341/csch"}, "is_accepted": false, "score": -1, "last_activity_date": 1423662878, "creation_date": 1423662878, "answer_id": 28456125, "question_id": 28455229, "link": "https://stackoverflow.com/questions/28455229/can-i-put-an-if-unless-clause-on-the-next-line-in-ruby/28456125#28456125", "title": "Can I put an if/unless clause on the next line in Ruby?", "body": "<p>As far as I know there is no other way than a <code>\\</code>, since otherwise, as you already said, Ruby thinks it's a new statement.</p>\n\n<p>Keep in mind that style guides and conventions differ from language to language. In Ruby I'd not expect an if/unless statement in a line coming after it's code. In fact I even dislike putting <code>if/unless</code> at the end of a line, since it reverses the reading direction from <code>If this, then that</code> to <code>that, if this (then what? Ah, I need to read back again)</code>, especially when the condition is more complex than <code>raise 'foo' if bar.empty?</code>.</p>\n\n<p>In Perl and other languages though this might be different, since you have other conventions, style guides and this <code>;</code>-thingy ;)</p>\n"}, {"tags": [], "owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "is_accepted": true, "score": 6, "last_activity_date": 1423664080, "creation_date": 1423664080, "answer_id": 28456525, "question_id": 28455229, "link": "https://stackoverflow.com/questions/28455229/can-i-put-an-if-unless-clause-on-the-next-line-in-ruby/28456525#28456525", "title": "Can I put an if/unless clause on the next line in Ruby?", "body": "<blockquote>\n  <p>Can I put an if/unless clause on the next line in Ruby?</p>\n</blockquote>\n\n<p>You can't. From page 107 (PDF page 127) of the <a href=\"https://www.ipa.go.jp/osc/english/ruby/\" rel=\"noreferrer\">final draft of ISO Ruby</a> which usually isn't relevant, but basic things like this are and it also spares us from having to read <code>parse.y</code>:</p>\n\n<pre><code>unless-modifier-statement ::\n    statement [no line-terminator here] unless expression\n</code></pre>\n\n<p>This is pretty clear. It just doesn't get more similar to your Perl example than:</p>\n\n<pre><code>raise ArgumentError, \"incompatible object given: #{object.inspect}\" unless\n  object.is_a?(ExampleObject) and object.respond_to?(:foo)`\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>raise ArgumentError, \"incompatible object given: #{object.inspect}\" \\\n  unless object.is_a?(ExampleObject) and object.respond_to?(:foo)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 2, "last_activity_date": 1423669851, "creation_date": 1423669851, "answer_id": 28458598, "question_id": 28455229, "link": "https://stackoverflow.com/questions/28455229/can-i-put-an-if-unless-clause-on-the-next-line-in-ruby/28458598#28458598", "title": "Can I put an if/unless clause on the next line in Ruby?", "body": "<p>Just as you feel wrong to put a backslash at the end to force a single line statement, it is wrong to use a single line statement when it extends beyond a single line.</p>\n"}], "owner": {"reputation": 5147, "user_id": 334761, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ZXRM5.jpg?s=128&g=1", "display_name": "Stefan Majewsky", "link": "https://stackoverflow.com/users/334761/stefan-majewsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 570, "favorite_count": 0, "accepted_answer_id": 28456525, "answer_count": 4, "score": 2, "last_activity_date": 1423669851, "creation_date": 1423660230, "question_id": 28455229, "link": "https://stackoverflow.com/questions/28455229/can-i-put-an-if-unless-clause-on-the-next-line-in-ruby", "title": "Can I put an if/unless clause on the next line in Ruby?", "body": "<p>In Perl, I often find myself using the following pattern:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>croak \"incompatible object given: $object\"\n    unless $object-&gt;isa('ExampleObject') and $object-&gt;can('foo');\n</code></pre>\n\n<p>I tried to translate this into Ruby like this:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>raise ArgumentError, \"incompatible object given: #{object.inspect}\"\n    unless object.is_a?(ExampleObject) and object.respond_to?(:foo)\n</code></pre>\n\n<p>But that does not work because Ruby interprets <code>unless</code> as the start of a new statement. As far as I understand, I can put a backslash at the end of the first line, but that looks ugly and feels wrong. I could also use a regular <code>unless condition raise error end</code> structure, but I like the style of the original form more. Is there a nice (and idiomatic) way to write this as a single statement in Ruby?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routes", "http-redirect"], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 4194893, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/148353803e1e8a205759260b32d5b449?s=128&d=identicon&r=PG&f=1", "display_name": "Fergus Morton", "link": "https://stackoverflow.com/users/4194893/fergus-morton"}, "edited": false, "score": 0, "creation_date": 1423663341, "post_id": 28455216, "comment_id": 45239038, "body": "Hey Nermin, thanks for the speedy reply. However, when the use selects the date on one form and presses submit, I want it to perform the do loop and then redirect to another form. When I have the route &#39;redirect_to bookings_new_path , it give me an undefined local variable/method error. Thoughts?"}, {"owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "reply_to_user": {"reputation": 45, "user_id": 4194893, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/148353803e1e8a205759260b32d5b449?s=128&d=identicon&r=PG&f=1", "display_name": "Fergus Morton", "link": "https://stackoverflow.com/users/4194893/fergus-morton"}, "edited": false, "score": 0, "creation_date": 1423664645, "post_id": 28455216, "comment_id": 45239948, "body": "Do you even have <code>bookings_new_path</code>, run in console <code>rake routes</code> and check if route exists"}, {"owner": {"reputation": 45, "user_id": 4194893, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/148353803e1e8a205759260b32d5b449?s=128&d=identicon&r=PG&f=1", "display_name": "Fergus Morton", "link": "https://stackoverflow.com/users/4194893/fergus-morton"}, "edited": false, "score": 0, "creation_date": 1423665105, "post_id": 28455216, "comment_id": 45240256, "body": "I have  bookings/new yeah"}], "tags": [], "owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "is_accepted": false, "score": 1, "last_activity_date": 1423660184, "creation_date": 1423660184, "answer_id": 28455216, "question_id": 28455113, "link": "https://stackoverflow.com/questions/28455113/how-can-i-redirect-after-an-action-is-performed-in-my-controller/28455216#28455216", "title": "How can I redirect after an action is performed in my controller?", "body": "<p>Add <code>redirect_to</code> helper and pass route to where progress</p>\n\n<pre><code>def bookingdate\n\n  @bookings = Booking.all\n  @bookings.each do |b|\n    if b.startdatetime == params[:startdatetime]\n      @musicians = Musician.where ([\"id != ?\", b.musician_id])\n    end\n  end\n\n  redirect_to path_where_you_want_to_redirect\nend\n</code></pre>\n\n<p>I guess you want to perform some checks, if user has correct filled form</p>\n\n<pre><code>def bookingdate\n\n  @bookings = Booking.all\n  @bookings.each do |b|\n    if b.startdatetime == params[:startdatetime]\n      @musicians = Musician.where ([\"id != ?\", b.musician_id])\n    end\n  end\n  if condition_successful\n     redirect_to path_where_you_want_to_redirect\n  else\n     render :bookingdate\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 4194893, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/148353803e1e8a205759260b32d5b449?s=128&d=identicon&r=PG&f=1", "display_name": "Fergus Morton", "link": "https://stackoverflow.com/users/4194893/fergus-morton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 859, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423660667, "creation_date": 1423659867, "last_edit_date": 1423659939, "question_id": 28455113, "link": "https://stackoverflow.com/questions/28455113/how-can-i-redirect-after-an-action-is-performed-in-my-controller", "title": "How can I redirect after an action is performed in my controller?", "body": "<p>I have a form set up to take in date time value. This value will then be sent as a parameter into my controller method \"bookingdate\" where it will be compared with other dates in the bookings to ensure there is no double booking, using a do loop.</p>\n\n<p>However when I submit the date form, rather than redirect to the next form where a user selects other details it throws me an error or redirects incorrectly.</p>\n\n<p>Here is my controller</p>\n\n<pre><code>def bookingdate\n\n  @bookings = Booking.all\n  @bookings.each do |b|\n    if b.startdatetime == params[:startdatetime]\n      @musicians = Musician.where ([\"id != ?\", b.musician_id])\n    end\n  end\n\n  render :action =&gt; 'new'\nend\n</code></pre>\n\n<p>Here is my routes</p>\n\n<pre><code>match '/bookdate', :to =&gt; 'bookings#bookingdate'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "edited": false, "score": 1, "creation_date": 1423658992, "post_id": 28454777, "comment_id": 45236371, "body": "A link to that github project would be helpful."}, {"owner": {"reputation": 2755, "user_id": 1543985, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/h2xDy.jpg?s=128&g=1", "display_name": "RichardAE", "link": "https://stackoverflow.com/users/1543985/richardae"}, "edited": false, "score": 0, "creation_date": 1423659022, "post_id": 28454777, "comment_id": 45236389, "body": "And whether your on mac/windows/linux?"}, {"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 3, "creation_date": 1423659112, "post_id": 28454777, "comment_id": 45236447, "body": "in gemfile do you have <code>gem pg</code>"}, {"owner": {"reputation": 197, "user_id": 3706202, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e5dd1d8b7eff3ed78ba06d595fe6f5e8?s=128&d=identicon&r=PG&f=1", "display_name": "user3706202", "link": "https://stackoverflow.com/users/3706202/user3706202"}, "edited": false, "score": 0, "creation_date": 1423659457, "post_id": 28454777, "comment_id": 45236614, "body": "Edited my question..."}, {"owner": {"reputation": 197, "user_id": 3706202, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e5dd1d8b7eff3ed78ba06d595fe6f5e8?s=128&d=identicon&r=PG&f=1", "display_name": "user3706202", "link": "https://stackoverflow.com/users/3706202/user3706202"}, "reply_to_user": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1423660529, "post_id": 28454777, "comment_id": 45237217, "body": "@RajarshiDas, yes I do."}, {"owner": {"reputation": 9737, "user_id": 2422778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUihh.jpg?s=128&g=1", "display_name": "Mike Szyndel", "link": "https://stackoverflow.com/users/2422778/mike-szyndel"}, "edited": false, "score": 0, "creation_date": 1423668753, "post_id": 28454777, "comment_id": 45242747, "body": "paste your config/database.yml"}], "answers": [{"tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": false, "score": 0, "last_activity_date": 1423685145, "creation_date": 1423685145, "answer_id": 28463476, "question_id": 28454777, "link": "https://stackoverflow.com/questions/28454777/cant-run-rails-server-on-downloaded-github-file/28463476#28463476", "title": "Cant run rails server on downloaded github file", "body": "<p>Add the postgresql adapter to the Gemfile:</p>\n\n<pre><code>gem 'pg'\n</code></pre>\n\n<p>And then run <code>bundle install</code></p>\n"}], "owner": {"reputation": 197, "user_id": 3706202, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e5dd1d8b7eff3ed78ba06d595fe6f5e8?s=128&d=identicon&r=PG&f=1", "display_name": "user3706202", "link": "https://stackoverflow.com/users/3706202/user3706202"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423685145, "creation_date": 1423658842, "last_edit_date": 1423659416, "question_id": 28454777, "link": "https://stackoverflow.com/questions/28454777/cant-run-rails-server-on-downloaded-github-file", "title": "Cant run rails server on downloaded github file", "body": "<p>I downloaded a file from github (<a href=\"https://github.com/raderj89/blocipedia\" rel=\"nofollow\">https://github.com/raderj89/blocipedia</a>), I would like to run it now with rails s but am running into an error:</p>\n\n<p>I did this;</p>\n\n<ul>\n<li>bundle install</li>\n<li>gem install activerecord-postgresql-adapter</li>\n</ul>\n\n<p>But still when i run rails s I get:</p>\n\n<pre><code> Please install the postgresql adapter: `gem install activerecord-postgresql- adapter` (pg is not part of the bundle. Add it to Gemfile.) (LoadError)\n</code></pre>\n\n<p>Any clues on what I should do to start a rails server with a downloaded project? Im working on a mac (os 10.8.5)</p>\n"}, {"tags": ["ruby", "ssh", "ruby-2.2"], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 4401921, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/44657da5a65bd21bfd9eebbb53624b4f?s=128&d=identicon&r=PG&f=1", "display_name": "skimisha", "link": "https://stackoverflow.com/users/4401921/skimisha"}, "edited": false, "score": 0, "creation_date": 1423663756, "post_id": 28455018, "comment_id": 45239328, "body": "Yeah, I&#39;ve already heard of sshpass, I&#39;ve tried it and it works great. The problem with sshpass is that I&#39;m not allowed to install anything, and avoid using ruby gems (company policy, don&#39;t ask -.-). Don&#39;t you know any other way to do this? Maybe implement an expect/send in ruby, something like <code>expect &quot;Password:&quot;; send &quot;&lt;password&gt;&quot;</code>"}], "tags": [], "owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "is_accepted": false, "score": 1, "last_activity_date": 1423666633, "last_edit_date": 1492085618, "creation_date": 1423659608, "answer_id": 28455018, "question_id": 28454769, "link": "https://stackoverflow.com/questions/28454769/how-to-test-ssh-connection-using-ruby/28455018#28455018", "title": "How to test SSH connection using Ruby", "body": "<p>I believe you cannot do that with <code>ssh</code> itself, but that's what <code>sshpass</code> it's for, as you can read in this <a href=\"https://serverfault.com/a/512220/64319\">serverfault answer</a>. In Ubuntu: </p>\n\n<pre><code>$ sudo apt-get install sshpass\n</code></pre>\n\n<p>And then change your <code>IO</code> call like this: </p>\n\n<pre><code>ping_output = IO.popen(\"sshpass -p ssh #{user}@#{host} 'echo \\\"success\\\"'\", \"w+\")\n</code></pre>\n\n<hr>\n\n<p>An alternative would be to rewrite your code to use Ruby SSH client, such as <a href=\"https://github.com/net-ssh/net-ssh\" rel=\"nofollow noreferrer\">net-ssh</a>, instead of using the system command. This is actually my recommendation, since it'll allow you to work at a higher abstraction level and not deal with system issues. Also, the result looks more beautiful! Check this (untested) code:</p>\n\n<pre><code>require 'net/ssh'\ndef ssh_conn(user, host, password, &amp;block)\n  authentication_successful = Net::SSH::Authentication::Session.authenticate(host, user, password)\n\n  authentication_successful &amp;&amp; (yield if block_given?)\n  authentication_successful\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1423666695, "post_id": 28457248, "comment_id": 45241303, "body": "You were faster! Well, glad to help ;)"}], "tags": [], "owner": {"reputation": 143, "user_id": 4401921, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/44657da5a65bd21bfd9eebbb53624b4f?s=128&d=identicon&r=PG&f=1", "display_name": "skimisha", "link": "https://stackoverflow.com/users/4401921/skimisha"}, "is_accepted": true, "score": 2, "last_activity_date": 1423666174, "last_edit_date": 1495540944, "creation_date": 1423666174, "answer_id": 28457248, "question_id": 28454769, "link": "https://stackoverflow.com/questions/28454769/how-to-test-ssh-connection-using-ruby/28457248#28457248", "title": "How to test SSH connection using Ruby", "body": "<p>By searching a bit in StackOverflow I've found <a href=\"https://stackoverflow.com/questions/14044289/automating-ssh-to-windows-with-ruby?rq=1\">this thread</a>\nand I was able to solve my problem doing this:</p>\n\n<pre><code>def ssh_try(user, host, pass)\n  puts \"SSHing #{host} ...\"\n  Net::SSH.start( host.to_s, user.to_s, :password =&gt; pass.to_s ) do |ssh|\n    puts ssh.exec!('date')\n    puts \"Logging out...\"\n  end\nend\n</code></pre>\n\n<p>Anyone who is facing a similar problem can try this method, works great to test/use ssh connection in ruby.</p>\n"}], "owner": {"reputation": 143, "user_id": 4401921, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/44657da5a65bd21bfd9eebbb53624b4f?s=128&d=identicon&r=PG&f=1", "display_name": "skimisha", "link": "https://stackoverflow.com/users/4401921/skimisha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1946, "favorite_count": 0, "accepted_answer_id": 28457248, "answer_count": 2, "score": 1, "last_activity_date": 1423666633, "creation_date": 1423658819, "last_edit_date": 1423663838, "question_id": 28454769, "link": "https://stackoverflow.com/questions/28454769/how-to-test-ssh-connection-using-ruby", "title": "How to test SSH connection using Ruby", "body": "<p>This is what I got so far. This works great, the problem being I can't input a password for the ssh login, I need to have shared ssh keys in order for this to work:</p>\n\n<pre><code>  def ssh_conn(user, host, &amp;block)\n     begin\n       ping_output = []\n       timeout(20) do\n         ping_output = IO.popen(\"ssh #{user}@#{host} 'echo \\\"success\\\"'\", \"w+\")\n       end\n     ping = ping_output.readlines.join[/success/] ? true : false\n     rescue Timeout::Error\n       ping = false\n     rescue\n       ping = false\n     end\n   ping_output.close\n   if block_given? &amp;&amp; ping\n     yield\n   end\n   return ping\n end\n</code></pre>\n\n<p>The question here is: How can I do something similar to this, but with password input through the arguments passed to the method? Preferably using ruby native Classes/Methods without installing any \"external\" gems.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "video-streaming"], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 4554605, "user_type": "registered", "profile_image": "https://graph.facebook.com/803386649698065/picture?type=large", "display_name": "Promit Neogy", "link": "https://stackoverflow.com/users/4554605/promit-neogy"}, "edited": false, "score": 0, "creation_date": 1423717593, "post_id": 28454350, "comment_id": 45264334, "body": "Do they provide apis to integrate in rails ?"}, {"owner": {"reputation": 875, "user_id": 3119689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7731087103afe687f041bf6d7e706f0b?s=128&d=identicon&r=PG", "display_name": "morganjlopes", "link": "https://stackoverflow.com/users/3119689/morganjlopes"}, "reply_to_user": {"reputation": 19, "user_id": 4554605, "user_type": "registered", "profile_image": "https://graph.facebook.com/803386649698065/picture?type=large", "display_name": "Promit Neogy", "link": "https://stackoverflow.com/users/4554605/promit-neogy"}, "edited": false, "score": 0, "creation_date": 1424114995, "post_id": 28454350, "comment_id": 45410852, "body": "@PromitNeogy, you can parse their iframe tag, and it works like a charm. Very light weight. It would look a little something like this: &lt;iframe src=&quot;<a href=\"http://player.theplatform.com/p/wer23fadf/&lt;%=\" rel=\"nofollow noreferrer\">player.theplatform.com/p/wer23fadf/&lt;%=</a> stream.player_id %&gt;/embed/select/media/&lt;%= stream.media_public_id %&gt;?form=html&quot; frameBorder=&quot;0&quot; seamless=&quot;seamless&quot; allowFullScreen&gt;&lt;/iframe&gt;"}], "tags": [], "owner": {"reputation": 875, "user_id": 3119689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7731087103afe687f041bf6d7e706f0b?s=128&d=identicon&r=PG", "display_name": "morganjlopes", "link": "https://stackoverflow.com/users/3119689/morganjlopes"}, "is_accepted": false, "score": 0, "last_activity_date": 1423657672, "creation_date": 1423657672, "answer_id": 28454350, "question_id": 28454083, "link": "https://stackoverflow.com/questions/28454083/how-do-i-embed-live-streaming-video-with-my-ruby2-2-1-on-rails4-applicatio/28454350#28454350", "title": "How do I embed live streaming (video) with my ruby(2.2.1) on rails(4) application", "body": "<p>This is by far the best tool I've experienced. We have a client who does large scale events, in both real time and playback. This is their preferred vendor. <a href=\"http://www.haivision.com/\" rel=\"nofollow\">http://www.haivision.com/</a></p>\n\n<p>They have good documentation and their support is pretty solid too.</p>\n"}], "owner": {"reputation": 19, "user_id": 4554605, "user_type": "registered", "profile_image": "https://graph.facebook.com/803386649698065/picture?type=large", "display_name": "Promit Neogy", "link": "https://stackoverflow.com/users/4554605/promit-neogy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 637, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423657672, "creation_date": 1423656764, "question_id": 28454083, "link": "https://stackoverflow.com/questions/28454083/how-do-i-embed-live-streaming-video-with-my-ruby2-2-1-on-rails4-applicatio", "title": "How do I embed live streaming (video) with my ruby(2.2.1) on rails(4) application", "body": "<p>I want to add a functionality which will enable live video streaming \nI am developing this in ROR \nIs there any gem for this ?\nIs there any third party vendor which will be good to embed ?</p>\n\n<p>Please help me with this if u have embedded live streaming video feature in your webapp.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 3307, "user_id": 3287921, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/967c36b17c947046fa295792b0e1db95?s=128&d=identicon&r=PG&f=1", "display_name": "Tarlen", "link": "https://stackoverflow.com/users/3287921/tarlen"}, "edited": false, "score": 0, "creation_date": 1423658649, "post_id": 28454134, "comment_id": 45236180, "body": "Im not sure the whole response is the PDF file. I updated the post the more of the raw output"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1423658833, "post_id": 28454134, "comment_id": 45236288, "body": "The response <i>body</i> is the pdf."}, {"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1423658870, "post_id": 28454134, "comment_id": 45236305, "body": "In deed. The file starts exactly at this line: <code>%PDF-1.3</code>. The first part is the <i>HEADER</i>. Which library are you using to make the HTTP call? Something like <code>response.body</code> would be necessary"}], "tags": [], "owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "is_accepted": true, "score": 1, "last_activity_date": 1423659079, "last_edit_date": 1423659079, "creation_date": 1423656932, "answer_id": 28454134, "question_id": 28453992, "link": "https://stackoverflow.com/questions/28453992/wrapping-an-application-pdf-file-in-ruby-file/28454134#28454134", "title": "Wrapping an application/pdf file in ruby File", "body": "<p>The response you are logging contains both the <em>header</em> and PDF file itself in the <em>body</em>. </p>\n\n<p>I'd just save that into a temp file:</p>\n\n<pre><code>f = Tempfile.open(\"/tmp/response.pdf\") do |fh|\n    response.body # or the method to get the body from your response object\n  end\n</code></pre>\n\n<p>and then upload your file <code>f</code> to your favorite cloud service.</p>\n"}], "owner": {"reputation": 3307, "user_id": 3287921, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/967c36b17c947046fa295792b0e1db95?s=128&d=identicon&r=PG&f=1", "display_name": "Tarlen", "link": "https://stackoverflow.com/users/3287921/tarlen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "accepted_answer_id": 28454134, "answer_count": 1, "score": 0, "last_activity_date": 1423659079, "creation_date": 1423656498, "last_edit_date": 1423658626, "question_id": 28453992, "link": "https://stackoverflow.com/questions/28453992/wrapping-an-application-pdf-file-in-ruby-file", "title": "Wrapping an application/pdf file in ruby File", "body": "<p>I am interacting with an external API that sends a PDF file(header content-type as application/pdf)</p>\n\n<p>When I log the response I get something like (snippet)</p>\n\n<pre><code>HTTP/1.1 200 OK\nDate: Wed, 11 Feb 2015 12:42:07 GMT\nServer: Apache/2.2.20 (Win32) DAV/2 mod_ssl/2.2.20 OpenSSL/0.9.8r PHP/5.2.17\nX-Powered-By: PHP/5.2.17\nContent-Disposition: inline; filename=\"Label2.pdf\"\nCache-Control: private, max-age=0, must-revalidate\nPragma: public\nVary: Accept-Encoding\nConnection: close\nTransfer-Encoding: chunked\nContent-Type: application/pdf\n\n%PDF-1.3\n3 0 obj\n&lt;&lt;/Type /Page\n/Parent 1 0 R\n/Resources 2 0 R\n/Contents 4 0 R&gt;&gt;\nendobj\n4 0 obj\n&lt;&lt;/Filter /FlateDecode /Length 330&gt;&gt;\nstream\nxmQ\u00cbN\u00c30\u00bc\u00f7+\u00e6l\u00bd\u00ebW\u00d2[Q[ {K\\)UiER\u00e0\u00f9\u00a4D\u00c2\u00c83\u00bb\u00d9&lt;Y\u00d1]\u00f1\u00c1B\u00be\u00c1&lt;o\u00ae5\u00e9\u00de3)A^\u00e0\u00e6\u00f1P    r\u00b7\u00c8\u00b7\n\u00eb^Q\u00ea\u00a1\u00e2\u00f6RdK\u00d6\u00e2\u00fd\u00e3{\u00c6\u00ec\u00e5\u00e8\u00dcNR\u00b2\nb-\u00b1 \u00c92F\u00f0\u00da\u00a9\u00b0\u00aaO\u00d6\u00c5w\u00b1kU\u00e4\u00a1&gt;\u00a29B\u00f6g%W\u00a6K5\u00b1m/\u00abjU\u00f5\u00efz\u00be\u00c36b\u00e0\u00e7M[\u00c0\u00a2M\u00d1\u00a9\u00b36%\u00a3;\u00db,,\u00e4\u00d4W\u00cc\"Z\u00f7H&amp;B\u00a4ym\u00fb\u00a1ac)\u00d5p\u00dc\u00a8\u00e1O7\u00d1h\u00aa  f\u00d3g\u00cc\u00ca\u00faX\u00eb\u00afcy\u00d8#\u00c1Sv5\u00e5&gt;r\u00ea\u00cee\u00bc\u00f5[\u00be\u00ed.\\\u00a3JT|'.$|\u00fa9/I\u00bba\u00a7\u00ad\u00e4\u00b7\u00d1\u00c6'$\u00b9@\u00b1\u00e1\u00c9~\u00b3mF\u00bb7u\u00bet\u00e1/G\u00b6\nendstream\nendobj\n1 0 obj\n&lt;&lt;/Type /Pages\n/Kids [3 0 R ]\n/Count 1\n/MediaBox [0 0 595.28 841.89]\n&gt;&gt;\nendobj\n5 0 obj\n&lt;&lt;/Type /Font\n/BaseFont /Helvetica-BoldOblique\n/Subtype /Type1\n/Encoding /WinAnsiEncoding\n&gt;&gt;\nendobj\n6 0 obj\n&lt;&lt;/Type /Font\n/BaseFont /Helvetica\n/Subtype /Type1\n/Encoding /WinAnsiEncoding\n\n....\n\n    ^\u00ed\u00bd P\u00d7\u00fa-\u00be\u00df\u00cb\u00bf\u00ac\u00ca\u00abT\u00a5RV\u00ca\u00d2\u00ff(\u00e7\u00d9\u00ab1\u00f1\u00e7\u00d5\u00f0\u00c42)j  3\u00ccTD@QA\u00c1   pQEDEAPDAB5o\u00ed\u00fd\u00c7\u00c3\u00cco.U\u00dbSM\u00db\u00bd{\u00d8\u00ab\u00d7\u00b7\u00be\u00dd\u00dd\u00bb\u00d9_\u00adO&gt;J'\u00fe\u00fat\u00eb~\u00da\u00c6\u00a1&gt;\u00abL\u00cd\u00e6\u00fd\u00a2'Q\u00e8\u00dcS\u00df\u00b5\u00b7\u00f9\u00bc_\u00fc\u00d6X\u00ac\u00df|\u00fcR\u00e2\u00ddG\u00d7\u00ca\u00fe,\u00ad\"?|\u00f8\u00f8\u00bf?}\u00fc\u00f4\u00e9t\u00ae\n3\u00b42\u00d0\u00de4|y\u00c3:5Ou=w5L=T0\u00ad\u00e7\u00aen\u00e0\u00a5\u00ae\u00ef\u00ae\u00ae\u00e3\u00a26\u00cd{\u00b0S\u00a8^\u00e8f\u00c9\u00f6cg\u00af\u00ce-\u00c8zW\u00f1*8\u00f4\u00e1cQ\n\u00d4TQ\u00eao\u00d6$\u00bf\u00a5\u00fb\u00af\u00b5\u00d2\u00f7P\u00d7sS? &lt;:.\u00ff\u00c0D\n\\\u00d4t%\u00ea_\u00e2\u00ae\u00a5t]\u00d5\u00f4]{\u00cc\u00e9a\u00bcj\u00a7\u00df\u00be\u00d4\u00d8+\u00a7\u00bf\u00ca\u00af\u00fa\u00c0kV  |B\u00a9\u00f8\u00f4B\u00ab\u00b4m8V\u00aa#\u00e9\u00de\u00c8HS_D\u00f9\u00ae\u00a0Vq\u00e5\u00c6\u00a5E\u00c7\u00a5\u00e7$\u00f7~\u00a83 \u00da6vp\u00d2\u00c5\u00af\u00be.U'cdQOE\u00a9/\u00d6!\u00c4\u00bf\u00ef*\u00de\u00d8/\u00d1@E\u00d2\u00f4\u00c2\u00f9\u00e4\u00cc)\n\u00a29=\u00a1L\u00d2\u00a8\u00e7\u00c1\u00f5\u00ec7\u00ef!!:!\\D\u00d4;\u00f2\u00f0\u00e9\u00dd\u00fa\u00a2^\n\u00a5`\u00c9Th\u00b4\u00fc\u00acI\u00cdP=u\u00f2 Q\nQ\u00c1\u00a2\u00c2ko\u00f5\"\u00ab\u00a3\u00de\u00b3y\u00e0\n\u00ed&lt;@#U\u00d4k]\u00b4=9y\u00d2\u00d6\u00b3;mQj\u00a2\u00a0\u00d5Q\u00a1\u00a2\u00a1\u00c7\u00ab\u00c0\u00b1\u00f3\u00a3\u00ac7\u00ec[\u00a8\u00f1 \u00bd\u00e4b\u00da[IRU*J\u00b5\u00adF\u00a0\u00eds     \u00c4\u00a1/\\d\n\n.....\n</code></pre>\n\n<p>My question is how can I wrap this response in a ruby File object, so that I can upload the pdf to an external storage service like S3?</p>\n\n<p>Much appreciated</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 899, "user_id": 1986039, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/lLSu0.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/1986039/developer"}, "edited": false, "score": 0, "creation_date": 1423656763, "post_id": 28453980, "comment_id": 45235054, "body": "on which url, you try to show?"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1423656937, "post_id": 28453980, "comment_id": 45235159, "body": "What is the error message?"}, {"owner": {"reputation": 299, "user_id": 4263820, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/fae12d17d6a02d0d7cf958a226f62467?s=128&d=identicon&r=PG&f=1", "display_name": "harvey", "link": "https://stackoverflow.com/users/4263820/harvey"}, "edited": false, "score": 0, "creation_date": 1423656990, "post_id": 28453980, "comment_id": 45235179, "body": "It shows as expected on the home page, with the header, footer, and body. However, when I click on the help link for instance (in the header), I get the error message as showed on the first post."}, {"owner": {"reputation": 299, "user_id": 4263820, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/fae12d17d6a02d0d7cf958a226f62467?s=128&d=identicon&r=PG&f=1", "display_name": "harvey", "link": "https://stackoverflow.com/users/4263820/harvey"}, "edited": false, "score": 0, "creation_date": 1423657081, "post_id": 28453980, "comment_id": 45235252, "body": "the error message is as showed on the screenshot. it comes when i click on either of the link I created in the header and footer (help, about, contact)"}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1423657313, "post_id": 28453980, "comment_id": 45235402, "body": "This is weirs, as that does not seem to be an exception. Have you restarted the server after changing routes?"}, {"owner": {"reputation": 299, "user_id": 4263820, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/fae12d17d6a02d0d7cf958a226f62467?s=128&d=identicon&r=PG&f=1", "display_name": "harvey", "link": "https://stackoverflow.com/users/4263820/harvey"}, "edited": false, "score": 0, "creation_date": 1423661813, "post_id": 28453980, "comment_id": 45238038, "body": "I don&#39;t thank the wuss who downvoted my question. It actually was a typo in the tutorial I am following (which is btw maybe the best RoR tutorial available at the moment, and whose author I am about to notify). I know, you must be a programming genius."}, {"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1423661836, "post_id": 28453980, "comment_id": 45238059, "body": "To the downvoter: an explanation about it is always appreciated, interesting for the guy asking and for others to learn about the rules here."}, {"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1423661917, "post_id": 28453980, "comment_id": 45238115, "body": "Hey @harvey, you could link the tutorial for completeness and to help others in the same situation."}], "answers": [{"comments": [{"owner": {"reputation": 299, "user_id": 4263820, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/fae12d17d6a02d0d7cf958a226f62467?s=128&d=identicon&r=PG&f=1", "display_name": "harvey", "link": "https://stackoverflow.com/users/4263820/harvey"}, "edited": false, "score": 0, "creation_date": 1423661216, "post_id": 28454345, "comment_id": 45237653, "body": "Yes, that was it. Thanks ! Well, the tutorial I am following got it wrong."}, {"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "reply_to_user": {"reputation": 299, "user_id": 4263820, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/fae12d17d6a02d0d7cf958a226f62467?s=128&d=identicon&r=PG&f=1", "display_name": "harvey", "link": "https://stackoverflow.com/users/4263820/harvey"}, "edited": false, "score": 0, "creation_date": 1423661449, "post_id": 28454345, "comment_id": 45237814, "body": "Nope. I&#39;m the one who answered ;)"}, {"owner": {"reputation": 299, "user_id": 4263820, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/fae12d17d6a02d0d7cf958a226f62467?s=128&d=identicon&r=PG&f=1", "display_name": "harvey", "link": "https://stackoverflow.com/users/4263820/harvey"}, "edited": false, "score": 0, "creation_date": 1423661613, "post_id": 28454345, "comment_id": 45237922, "body": "ok. I&#39;d like to upvote, but unfortunately thanks to the f*g who downvoted my question, i&#39;m now down to below 15 points, and the system does not allow me to up/down vote. Sorry mate, I don&#39;t know what I can do at the moment. Will upvote later when my reputation points are up above 15."}, {"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "reply_to_user": {"reputation": 299, "user_id": 4263820, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/fae12d17d6a02d0d7cf958a226f62467?s=128&d=identicon&r=PG&f=1", "display_name": "harvey", "link": "https://stackoverflow.com/users/4263820/harvey"}, "edited": false, "score": 0, "creation_date": 1423661872, "post_id": 28454345, "comment_id": 45238083, "body": "hahaha no problem mate. There goes an upvote to your question anyway :)  It&#39;s not the best of the questions actually, but I see no need to delete it."}], "tags": [], "owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "is_accepted": true, "score": 1, "last_activity_date": 1423657655, "creation_date": 1423657655, "answer_id": 28454345, "question_id": 28453980, "link": "https://stackoverflow.com/questions/28453980/issue-with-my-routes/28454345#28454345", "title": "Issue with my routes", "body": "<p>Your route is wrong. You need to rename your routes to change the slash for a \"#\", assuming <code>help</code> is a separate action in your <code>static_pages_controller.rb</code>, as well as for any other routes in your header (<code>about</code>, <code>help</code>, etc).</p>\n\n<pre><code>Rails.application.routes.draw do\n  get 'help'   =&gt;     'static_pages#help'\nend\n</code></pre>\n"}], "owner": {"reputation": 299, "user_id": 4263820, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/fae12d17d6a02d0d7cf958a226f62467?s=128&d=identicon&r=PG&f=1", "display_name": "harvey", "link": "https://stackoverflow.com/users/4263820/harvey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 28454345, "answer_count": 1, "score": 0, "last_activity_date": 1423657655, "creation_date": 1423656454, "question_id": 28453980, "link": "https://stackoverflow.com/questions/28453980/issue-with-my-routes", "title": "Issue with my routes", "body": "<p>I have the following error message when I load my app in the browser :</p>\n\n<p><img src=\"https://i.stack.imgur.com/bp2hW.jpg\" alt=\"routes\"></p>\n\n<p>I am not sure what I have missing here. The route for the home page is correctly defined. </p>\n\n<p>The paths are defined as follows in the view :</p>\n\n<pre><code>&lt;li&gt;&lt;%= link_to \"Home\",   root_path %&gt;&lt;/li&gt;\n&lt;li&gt;&lt;%= link_to \"Help\",   help_path %&gt;&lt;/li&gt;\n</code></pre>\n\n<p>and as follows in the routes file :</p>\n\n<pre><code>Rails.application.routes.draw do\n  root                'static_pages#home'\n  get 'help'   =&gt;     'static_pages/help'\nend\n</code></pre>\n\n<p>Any idea what I am missing here ?</p>\n\n<p>Thanks !</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1400, "user_id": 2498890, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/222e90c365eee848543847010fa5454a?s=128&d=identicon&r=PG", "display_name": "user2498890", "link": "https://stackoverflow.com/users/2498890/user2498890"}, "edited": false, "score": 0, "creation_date": 1423657691, "post_id": 28453918, "comment_id": 45235629, "body": "Thats awesome and works for the index page (index.html.erb) however its returning a &#39;NameError in Jobs#show&#39; error when I use the same code in show.html.erb, how can I fix this?"}, {"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "reply_to_user": {"reputation": 1400, "user_id": 2498890, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/222e90c365eee848543847010fa5454a?s=128&d=identicon&r=PG", "display_name": "user2498890", "link": "https://stackoverflow.com/users/2498890/user2498890"}, "edited": false, "score": 0, "creation_date": 1423660752, "post_id": 28453918, "comment_id": 45237365, "body": "Add an <code>@</code> to the front"}], "tags": [], "owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "is_accepted": true, "score": 5, "last_activity_date": 1423656294, "creation_date": 1423656294, "answer_id": 28453918, "question_id": 28453820, "link": "https://stackoverflow.com/questions/28453820/how-do-show-the-date-that-a-post-was-made-on/28453918#28453918", "title": "How do show the date that a post was made on?", "body": "<p>You'll need to use strftime for that.</p>\n\n<pre><code>&lt;%= job.created_at.strftime(\"#{job.created_at.day.ordinalize} %B %Y\") %&gt;\n</code></pre>\n\n<p>\"Posted on\" you'll need to put in statically.</p>\n\n<p>More about <a href=\"http://apidock.com/rails/ActiveSupport/Inflector/ordinalize\" rel=\"noreferrer\">ordinalize</a></p>\n"}, {"comments": [{"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 1, "creation_date": 1423661363, "post_id": 28455571, "comment_id": 45237750, "body": "Alternatively you could just define a method to do the strftime conversion in a model (or decorator/presenter if using them)."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 1, "last_activity_date": 1423661236, "last_edit_date": 1495542034, "creation_date": 1423661236, "answer_id": 28455571, "question_id": 28453820, "link": "https://stackoverflow.com/questions/28453820/how-do-show-the-date-that-a-post-was-made-on/28455571#28455571", "title": "How do show the date that a post was made on?", "body": "<p>(This is an addition to <a href=\"https://stackoverflow.com/a/28453918/477037\">japed's answer</a>, but too long for a comment)</p>\n\n<p>Since you need this in several places, you can add your own time format:</p>\n\n<pre><code># config/initializers/time_formats.rb\nTime::DATE_FORMATS[:short_ordinal] = -&gt;(time) { time.strftime(\"#{time.day.ordinalize} %B %Y\") }\n</code></pre>\n\n<p>and call <a href=\"http://api.rubyonrails.org/classes/Time.html#method-i-to_formatted_s\" rel=\"nofollow noreferrer\"><code>to_formatted_s</code></a> or its alias <code>to_s</code>:</p>\n\n<pre><code>job.created_at.to_s(:short_ordinal)\n#=&gt; \"11th February 2015\"\n</code></pre>\n"}], "owner": {"reputation": 1400, "user_id": 2498890, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/222e90c365eee848543847010fa5454a?s=128&d=identicon&r=PG", "display_name": "user2498890", "link": "https://stackoverflow.com/users/2498890/user2498890"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 1, "accepted_answer_id": 28453918, "answer_count": 2, "score": 0, "last_activity_date": 1423661236, "creation_date": 1423656003, "last_edit_date": 1423656129, "question_id": 28453820, "link": "https://stackoverflow.com/questions/28453820/how-do-show-the-date-that-a-post-was-made-on", "title": "How do show the date that a post was made on?", "body": "<p>I am creating a simple jobs board and would like to show the date that the post was created in the format - 'Posted on: 11th February 2015'</p>\n\n<p>I would like to show it in two places, in my index (index.html.erb) with the post and in the individual post pages (show.html.erb)</p>\n\n<p>My current code is as follows: </p>\n\n<p>index.html.erb - </p>\n\n<pre><code>    &lt;p&gt;&lt;%= link_to \"Add a Position\", new_job_path %&gt;&lt;/p&gt;\n\n    &lt;% @jobs.each do |job| %&gt;\n        &lt;div class=\"job\"&gt;\n            &lt;%= link_to job.position, job %&gt;\n            &lt;br&gt;&lt;br&gt;\n            &lt;ul class=\"entry_list\"&gt;\n                &lt;li&gt;Company: &lt;%= job.company %&gt;&lt;/li&gt;\n                &lt;li&gt;Salary: &lt;%= job.salary %&gt;&lt;/li&gt;\n                &lt;li&gt;Contract Type: &lt;%= job.contract %&gt;&lt;/li&gt;\n                &lt;li&gt;City: &lt;%= job.city %&gt;&lt;/li&gt;\n                &lt;li&gt;Expiry date: &lt;%= job.expirydate %&gt;&lt;/li&gt;\n                &lt;li&gt;Job Type: &lt;%= job.jobtype %&gt;&lt;/li&gt;\n            &lt;/ul&gt;\n        &lt;/div&gt;\n    &lt;% end %&gt;\n\n    &lt;p&gt;&lt;%= paginate @jobs %&gt;&lt;/p&gt;\n</code></pre>\n\n<p>show.html.erb - </p>\n\n<pre><code>    &lt;%= @job.position %&gt;\n    &lt;ul&gt;\n      &lt;li&gt;Company: &lt;%= @job.company %&gt;&lt;/li&gt;\n      &lt;li&gt;Salary: &lt;%= @job.salary %&gt;&lt;/li&gt;\n      &lt;li&gt;Contract Type: &lt;%= @job.contract %&gt;&lt;/li&gt;\n      &lt;li&gt;City: &lt;%= @job.city %&gt;&lt;/li&gt;\n      &lt;li&gt;Expiry date: &lt;%= @job.expirydate %&gt;&lt;/li&gt;\n      &lt;li&gt;Job Type: &lt;%= @job.jobtype %&gt;&lt;/li&gt;\n      &lt;li&gt;&lt;%= @job.description %&gt;&lt;/li&gt;\n      &lt;li&gt;How to apply: &lt;%= @job.apply %&gt;&lt;/li&gt;\n    &lt;/ul&gt;\n</code></pre>\n\n<p>job.rb - </p>\n\n<pre><code>class Job &lt; ActiveRecord::Base\n  validates :position, presence: true\n  validates :company, presence: true\n  validates :salary, presence: true\n  validates :companywebsite, presence: true\n  validates :companytwitter, presence: true\n  validates :contract, presence: true\n  validates :city, presence: true\n  validates :expirydate, presence: true\n  validates :jobtype, presence: true\n  validates :description, presence: true\n  validates :apply, presence: true\n  validates :contactname, presence: true\n  validates :contactemail, presence: true\n  validates :contactphone, presence: true\nend\n</code></pre>\n\n<p>jobs_controller.rb - </p>\n\n<pre><code>class JobsController &lt; ApplicationController\n  def index\n     @jobs = Job.page(params[:page]).per(25)\n  end\n\n  def new\n     @job = Job.new\n  end\n\n  def show\n     @job = Job.find(params[:id])\n  end\n\n  def create\n     @job = Job.new(params.require(:job).permit(:position, :company, :salary, :companywebsite, :companytwitter, :contract, :city, :expirydate, :jobtype, :description, :apply, :contactname, :contactemail, :contactphone, ))\n    if @job.save\n      redirect_to root_path\n    else\n      render \"new\"\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5304, "user_id": 740394, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/796442b522b037319711277a81d775ca?s=128&d=identicon&r=PG", "display_name": "Rodrigo", "link": "https://stackoverflow.com/users/740394/rodrigo"}, "edited": false, "score": 0, "creation_date": 1423655279, "post_id": 28453579, "comment_id": 45234148, "body": "Please, paste the full stack trace"}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 8045, "user_id": 1937021, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/7e8246fe40996d588afd5a876668e0e6?s=128&d=identicon&r=PG", "display_name": "user1937021", "link": "https://stackoverflow.com/users/1937021/user1937021"}, "edited": false, "score": 0, "creation_date": 1423655789, "post_id": 28453694, "comment_id": 45234446, "body": "Then update your <code>PATH</code> environment variable for ruby to find the binaries."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 8045, "user_id": 1937021, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/7e8246fe40996d588afd5a876668e0e6?s=128&d=identicon&r=PG", "display_name": "user1937021", "link": "https://stackoverflow.com/users/1937021/user1937021"}, "edited": false, "score": 0, "creation_date": 1423656184, "post_id": 28453694, "comment_id": 45234692, "body": "<a href=\"https://www.google.es/?gfe_rd=cr&amp;ei=30TbVOirLc6p8wf_rIGYBg&amp;gws_rd=ssl#safe=off&amp;q=how+to+update+PATH+variable+in+windows\" rel=\"nofollow noreferrer\">how to update PATH variable in windows</a>."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1423655563, "creation_date": 1423655563, "answer_id": 28453694, "question_id": 28453579, "link": "https://stackoverflow.com/questions/28453579/error-installing-rails-error-failed-to-build-gem-native-extension/28453694#28453694", "title": "Error: installing rails Error: Failed to build gem native extension", "body": "<p>The error message you got clearly states:</p>\n\n<blockquote>\n  <p>Please update your PATH to include build tools or download the DevKit\n  from '<a href=\"http://rubyinstaller.org/downloads\" rel=\"nofollow\">http://rubyinstaller.org/downloads</a>' and follow the instructions\n  at '<a href=\"http://github.com/oneclick/rubyinstaller/wiki/Development-Kit\" rel=\"nofollow\">http://github.com/oneclick/rubyinstaller/wiki/Development-Kit</a>'</p>\n</blockquote>\n\n<p>So, my advise would be you to download the DevKit and follow the instructions.</p>\n"}], "owner": {"reputation": 8045, "user_id": 1937021, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/7e8246fe40996d588afd5a876668e0e6?s=128&d=identicon&r=PG", "display_name": "user1937021", "link": "https://stackoverflow.com/users/1937021/user1937021"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 442, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1423655563, "creation_date": 1423655160, "question_id": 28453579, "link": "https://stackoverflow.com/questions/28453579/error-installing-rails-error-failed-to-build-gem-native-extension", "title": "Error: installing rails Error: Failed to build gem native extension", "body": "<p>I get this error when trying to install Rails:</p>\n\n<pre><code>    Z:\\AlexL\\My Documents\\rails&gt;gem install rails\nERROR:  Error installing rails:\n        The 'json' native gem requires installed build tools.\n\nPlease update your PATH to include build tools or download the DevKit\nfrom 'http://rubyinstaller.org/downloads' and follow the instructions\nat 'http://github.com/oneclick/rubyinstaller/wiki/Development-Kit'\n\nZ:\\AlexL\\My Documents\\rails&gt;gem install rails -include-dependencies\nERROR:  Error installing rails:\n        The 'json' native gem requires installed build tools.\n\nPlease update your PATH to include build tools or download the DevKit\nfrom 'http://rubyinstaller.org/downloads' and follow the instructions\nat 'http://github.com/oneclick/rubyinstaller/wiki/Development-Kit'\nERROR:  While executing gem ... (URI::InvalidURIError)\n    bad URI(is not URI?): ?gems=\u00fbinclude-dependencies\n\nZ:\\AlexL\\My Documents\\rails&gt;rails\n'rails' is not recognized as an internal or external command,\noperable program or batch file.\n</code></pre>\n\n<p>My Ruby version is:</p>\n\n<p><strong>ruby 1.9.3p484</strong></p>\n\n<p>how can I fix this? I'm on windows bytheway.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1400, "user_id": 2498890, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/222e90c365eee848543847010fa5454a?s=128&d=identicon&r=PG", "display_name": "user2498890", "link": "https://stackoverflow.com/users/2498890/user2498890"}, "edited": false, "score": 0, "creation_date": 1423656918, "post_id": 28453886, "comment_id": 45235147, "body": "That doesn&#39;t seem to be posting the post if you put in the correct answer of &#39;2&#39;?  I&#39;ve put the first bit of code in job.rb underneath what I currently have and placed the form input into the form on new.html.erb which has created the field &amp; if you put the incorrect number in then it doesn&#39;t post but likewise it doesn&#39;t post if you are indeed correct with the number &#39;2&#39;."}, {"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "reply_to_user": {"reputation": 1400, "user_id": 2498890, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/222e90c365eee848543847010fa5454a?s=128&d=identicon&r=PG", "display_name": "user2498890", "link": "https://stackoverflow.com/users/2498890/user2498890"}, "edited": false, "score": 0, "creation_date": 1423657104, "post_id": 28453886, "comment_id": 45235264, "body": "If you put the correct answer (<code>&#39;2&#39;</code>), then <code>human_sum.to_i</code> would be equal to <code>2</code>, which in turn will not add any errors to the model and the validation will pass. The <code>@job</code> will not be saved in your controller and probably the user will be returned to the form view. If you need a different behavior please clarify."}, {"owner": {"reputation": 1400, "user_id": 2498890, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/222e90c365eee848543847010fa5454a?s=128&d=identicon&r=PG", "display_name": "user2498890", "link": "https://stackoverflow.com/users/2498890/user2498890"}, "edited": false, "score": 0, "creation_date": 1423657530, "post_id": 28453886, "comment_id": 45235532, "body": "If I put in an incorrect answer it doesn&#39;t show any errors. If the answer is correct I would like it to post the post and redirect to the index as my original code does and if it is unsuccessful then I would like it to stay on new.html.erb but with an error showing on the bot input field."}, {"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "reply_to_user": {"reputation": 1400, "user_id": 2498890, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/222e90c365eee848543847010fa5454a?s=128&d=identicon&r=PG", "display_name": "user2498890", "link": "https://stackoverflow.com/users/2498890/user2498890"}, "edited": false, "score": 0, "creation_date": 1423657799, "post_id": 28453886, "comment_id": 45235693, "body": "I updated my answer to put the error on the correct attribute (you&#39;ll not printing errors on <code>:base</code>)"}, {"owner": {"reputation": 1400, "user_id": 2498890, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/222e90c365eee848543847010fa5454a?s=128&d=identicon&r=PG", "display_name": "user2498890", "link": "https://stackoverflow.com/users/2498890/user2498890"}, "edited": false, "score": 0, "creation_date": 1423658070, "post_id": 28453886, "comment_id": 45235843, "body": "That is still not posting the post if the bot field is answered correctly and is showing the bot error even if the answer is correct"}, {"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "reply_to_user": {"reputation": 1400, "user_id": 2498890, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/222e90c365eee848543847010fa5454a?s=128&d=identicon&r=PG", "display_name": "user2498890", "link": "https://stackoverflow.com/users/2498890/user2498890"}, "edited": false, "score": 0, "creation_date": 1423658309, "post_id": 28453886, "comment_id": 45235987, "body": "Are you using Strong Params? Did you add <code>human_sum</code> to the <code>params.permit</code> ?"}, {"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "reply_to_user": {"reputation": 1400, "user_id": 2498890, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/222e90c365eee848543847010fa5454a?s=128&d=identicon&r=PG", "display_name": "user2498890", "link": "https://stackoverflow.com/users/2498890/user2498890"}, "edited": false, "score": 0, "creation_date": 1423658315, "post_id": 28453886, "comment_id": 45235990, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/70702/discussion-between-dgilperez-and-user2498890\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "is_accepted": true, "score": 2, "last_activity_date": 1423658738, "last_edit_date": 1423658738, "creation_date": 1423656187, "answer_id": 28453886, "question_id": 28453392, "link": "https://stackoverflow.com/questions/28453392/ruby-on-rails-adding-a-human-security-field-into-the-simple-form-gem/28453886#28453886", "title": "Ruby on Rails - Adding a human security field into the simple_form gem?", "body": "<p>You can add a validation to your model like this: </p>\n\n<pre><code>class Job &lt; ActiveRecord::Base\n  attr_accessor :human_sum \n  validate :not_a_bot\n\n  private\n\n  def not_a_bot\n    if human_sum.to_i != 2 \n      errors.add(:human_sum, 'Get out, you bot!') \n    end\n  end\nend\n</code></pre>\n\n<p>And then in your form: </p>\n\n<pre><code>&lt;%= simple_form_for @job, html: { multipart: true } do |form| %&gt;   \n  ...\n  &lt;%= form.input :human_sum, label: 'What is 1+1?'\n&lt;% end %&gt; \n</code></pre>\n\n<p>Don't forget to add <code>:human_sum</code> to your permitted params in your controller as well.</p>\n"}], "owner": {"reputation": 1400, "user_id": 2498890, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/222e90c365eee848543847010fa5454a?s=128&d=identicon&r=PG", "display_name": "user2498890", "link": "https://stackoverflow.com/users/2498890/user2498890"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 1, "accepted_answer_id": 28453886, "answer_count": 1, "score": 1, "last_activity_date": 1423658738, "creation_date": 1423654648, "question_id": 28453392, "link": "https://stackoverflow.com/questions/28453392/ruby-on-rails-adding-a-human-security-field-into-the-simple-form-gem", "title": "Ruby on Rails - Adding a human security field into the simple_form gem?", "body": "<p>I currently have a form created using the simple_form gem in Ruby on Rails but I would like to add a sort of 'What is 1+1?' question and input field as the last question to remove the risk of bots etc. How would I add this function into my form?</p>\n\n<p>My form consists of the following:</p>\n\n<pre><code>&lt;%= simple_form_for @job, html: { multipart: true } do |form| %&gt;\n  &lt;h2&gt;Job Position:&lt;/h2&gt;\n    &lt;%= form.input :position, input_html: { maxlength: 60 }, placeholder: \"Job Position\", label: false %&gt;\n    &lt;%= form.input :company, input_html: { maxlength: 60 }, placeholder: \"Company name\", label: false %&gt;\n    &lt;%= form.input :salary, input_html: { maxlength: 60 }, placeholder: \"Salary\", label: false %&gt;\n    &lt;%= form.input :contract, input_html: { maxlength: 60 }, placeholder: \"Contract Type\", label: false, collection: ['full time', 'part time', 'internship'], prompt: \"Contract Type\" %&gt;\n    &lt;%= form.input :city, input_html: { maxlength: 60 }, placeholder: \"City\", label: false %&gt;\n    &lt;%= form.input :expirydate, input_html: { maxlength: 60 }, placeholder: \"Expiry date\", label: false %&gt;\n    &lt;%= form.input :description, input_html: { maxlength: 60 }, placeholder: \"Full job description\", label: false %&gt;\n    &lt;%= form.input :apply, input_html: { maxlength: 60 }, placeholder: \"How to apply\", label: false %&gt;\n    &lt;h2&gt;Your Contact Details:&lt;/h2&gt;\n    &lt;%= form.input :contactname, input_html: { maxlength: 60 }, placeholder: \"Contact Name\", label: false %&gt;\n    &lt;%= form.input :contactemail, input_html: { maxlength: 60 }, placeholder: \"Contact Email\", label: false %&gt;\n    &lt;%= form.input :contactphone, input_html: { maxlength: 60 }, placeholder: \"Contact Telephone\", label: false %&gt;\n    &lt;%= form.button :submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1423653433, "post_id": 28452963, "comment_id": 45233004, "body": "Provide full error message and backtrace please."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1423653608, "post_id": 28452963, "comment_id": 45233106, "body": "Please post your &quot;write a review button&quot;."}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1423653797, "post_id": 28452963, "comment_id": 45233235, "body": "Please post your <code>config&#47;routes.rb</code>."}, {"owner": {"reputation": 529, "user_id": 3574178, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6f9079310597136064b4b8197f7a8bf5?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/3574178/neil"}, "edited": false, "score": 0, "creation_date": 1423653806, "post_id": 28452963, "comment_id": 45233242, "body": "have updated as requested"}, {"owner": {"reputation": 529, "user_id": 3574178, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6f9079310597136064b4b8197f7a8bf5?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/3574178/neil"}, "edited": false, "score": 0, "creation_date": 1423654006, "post_id": 28452963, "comment_id": 45233372, "body": "added config/routes.rb"}], "answers": [{"tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 1, "last_activity_date": 1423653997, "creation_date": 1423653997, "answer_id": 28453167, "question_id": 28452963, "link": "https://stackoverflow.com/questions/28452963/rails-4-nomethoderror-in-reviewsnew/28453167#28453167", "title": "Rails 4. NoMethodError in Reviews#new", "body": "<p>You have:</p>\n\n<pre><code>@movies = Movie.find(params[:movie_id])\n</code></pre>\n\n<p>in your <code>set_movie</code> method. You should have:</p>\n\n<pre><code>@movie = Movie.find(params[:movie_id])\n</code></pre>\n"}], "owner": {"reputation": 529, "user_id": 3574178, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6f9079310597136064b4b8197f7a8bf5?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/3574178/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 403, "favorite_count": 0, "accepted_answer_id": 28453167, "answer_count": 1, "score": 0, "last_activity_date": 1423653997, "creation_date": 1423653370, "last_edit_date": 1423653766, "question_id": 28452963, "link": "https://stackoverflow.com/questions/28452963/rails-4-nomethoderror-in-reviewsnew", "title": "Rails 4. NoMethodError in Reviews#new", "body": "<p>Building movie review site , user can upload movies but when anyone wants to review the movie by clicking on the write a review button i get errors  NoMethodError in Reviews#new . so in my code it goes to the _form reviews.html.erb </p>\n\n<p><strong>_form.reviews.html.erb</strong></p>\n\n<p><strong>&lt;%= form_for([@movie, @review]) do |f| %></strong> - error</p>\n\n<pre><code>&lt;% if @review.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;&lt;%= pluralize(@review.errors.count, \"error\") %&gt; prohibited this review from being saved:&lt;/h2&gt;\n\n      &lt;ul&gt;\n      &lt;% @review.errors.full_messages.each do |message| %&gt;\n        &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :rating %&gt;&lt;br&gt;\n    &lt;%= f.number_field :rating %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :comment %&gt;&lt;br&gt;\n    &lt;%= f.text_area :comment %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>review controller.rb</p>\n\n<pre><code>class ReviewsController &lt; ApplicationController\n  before_action :set_review, only: [:show, :edit, :update, :destroy]\n  before_action :set_movie\n  before_action :authenticate_user!\n\n\n  respond_to :html\n\n  def new\n    @review = Review.new\n    respond_with(@review)\n  end\n\n  def edit\n  end\n\n  def create\n    @review = Review.new(review_params)\n    @review.user_id = current_user.id\n    @review.movie_id = @movie.id\n\n    if @review.save\n    redirect_to @movie\n    else\n    render 'new'\n    end \n\n  end\n\n  def update\n    @review.update(review_params)\n    respond_with(@review)\n  end\n\n  def destroy\n    @review.destroy\n    respond_with(@review)\n  end\n\n  private\n    def set_review\n      @review = Review.find(params[:id])\n    end\n\n    def set_movie\n      @movies = Movie.find(params[:movie_id])\n    end\n\n\n    def review_params\n      params.require(:review).permit(:rating, :comment)\n    end\nend\n</code></pre>\n\n<p>movie controller </p>\n\n<pre><code>class MoviesController &lt; ApplicationController\n  before_action :set_movie, only: [:show, :edit, :update, :destroy]\n  before_action :authenticate_user!, except: [:index, :show]\n\n\n  def index\n    @movies = Movie.all\n  end\n\n\n  def show\n  end\n\n  def new\n    @movie = current_user.movies.build\n  end\n\n  # GET /movies/1/edit\n  def edit\n  end\n\n  # POST /movies\n  # POST /movies.json\n  def create\n    @movie = current_user.movies.build(movie_params)\n\n    respond_to do |format|\n      if @movie.save\n        format.html { redirect_to @movie, notice: 'Movie was successfully created.' }\n        format.json { render :show, status: :created, location: @movie }\n      else\n        format.html { render :new }\n        format.json { render json: @movie.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /movies/1\n  # PATCH/PUT /movies/1.json\n  def update\n    respond_to do |format|\n      if @movie.update(movie_params)\n        format.html { redirect_to @movie, notice: 'Movie was successfully updated.' }\n        format.json { render :show, status: :ok, location: @movie }\n      else\n        format.html { render :edit }\n        format.json { render json: @movie.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /movies/1\n  # DELETE /movies/1.json\n  def destroy\n    @movie.destroy\n    respond_to do |format|\n      format.html { redirect_to movies_url, notice: 'Movie was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_movie\n      @movie = Movie.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def movie_params\n      params.require(:movie).permit(:title, :description, :movie_length, :director, :rating, :image)\n    end\nend\n</code></pre>\n\n<p>rake routes</p>\n\n<pre><code>new_movie_review GET    /movies/:movie_id/reviews/new(.:format)      reviews#new\n\n\n\nNoMethodError in Reviews#new\nShowing /Users/neilpatel/Desktop/Rails/movies/app/views/reviews/_form.html.erb where line #1 raised:\n\nundefined method `reviews_path' for #&lt;#&lt;Class:0x007f92db41b548&gt;:0x007f92dd52ff18&gt;\n\nTrace of template inclusion: app/views/reviews/new.html.erb\n\nRails.root: /Users/neilpatel/Desktop/Rails/movies\n\nApplication Trace | Framework Trace | Full Trace\napp/views/reviews/_form.html.erb:1:in `_app_views_reviews__form_html_erb__1769795460297873272_70134360199660'\napp/views/reviews/new.html.erb:3:in `_app_views_reviews_new_html_erb___894596083071563840_70134360230600'\napp/controllers/reviews_controller.rb:11:in `new'\n</code></pre>\n\n<p>write a review button</p>\n\n<pre><code>&lt;div class=\"panel panel-default\"&gt;\n  &lt;div class=\"panel-body\"&gt;&lt;/div&gt;\n    &lt;div class=\"row\"&gt;\n      &lt;div class=\"col-md-4\"&gt;\n        &lt;%= image_tag @movie.image.url(:medium) %&gt;\n        &lt;div class=\"table-responsive\"&gt;\n          &lt;table class=\"table\"&gt;\n            &lt;tbody&gt;&lt;/tbody&gt;\n            &lt;tr&gt;\n              &lt;td&gt;&lt;strong&gt;Title:&lt;/strong&gt;&lt;/td&gt;\n              &lt;td&gt;&lt;%= @movie.title %&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n              &lt;td&gt;&lt;strong&gt;Description:&lt;/strong&gt;&lt;/td&gt;\n              &lt;td&gt;&lt;%= @movie.description %&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n              &lt;td&gt;&lt;strong&gt;Movie Length:&lt;/strong&gt;&lt;/td&gt;\n              &lt;td&gt;&lt;%= @movie.movie_length %&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n              &lt;td&gt;&lt;strong&gt;Director:&lt;/strong&gt;&lt;/td&gt;\n              &lt;td&gt;&lt;%= @movie.director %&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n              &lt;td&gt;&lt;strong&gt;Rating:&lt;/strong&gt;&lt;/td&gt;\n              &lt;td&gt;&lt;%= @movie.rating %&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n          &lt;/table&gt;\n          &lt;%= link_to \"Write a Review\", new_movie_review_path(@movie) %&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n\n\n\n&lt;%= link_to 'Edit', edit_movie_path(@movie) %&gt; |\n&lt;%= link_to 'Back', movies_path %&gt;\n</code></pre>\n\n<p>config routes</p>\n\n<pre><code>Rails.application.routes.draw do\n\n\n  devise_for :users\n    resources :movies do\n     resources :reviews, except: [:show, :index]\n  end\n\n  root 'movies#index'\nend\n</code></pre>\n"}, {"tags": ["ruby", "regex", "pattern-matching", "match"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1423653133, "post_id": 28452545, "comment_id": 45232828, "body": "<code>&lt;ui&gt;</code> - is this a typo?"}], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 3, "last_activity_date": 1423653153, "creation_date": 1423653153, "answer_id": 28452890, "question_id": 28452545, "link": "https://stackoverflow.com/questions/28452545/output-value-is-array-in-ruby/28452890#28452890", "title": "Output value is array in ruby", "body": "<p>You should use <a href=\"http://www.nokogiri.org\" rel=\"nofollow\">Nokogiri</a> to parse HTML:</p>\n\n<pre><code>require 'nokogiri'\n\nhi = '&lt;ul&gt;&lt;li&gt;Welcome to select&lt;/li&gt;&lt;li&gt;hi&lt;/li&gt;&lt;li&gt;bye&lt;/li&gt;&lt;/ul&gt;'\n\nNokogiri::HTML.fragment(hi).css('ul li').each do |li|\n  puts li.text\nend\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Welcome to select\nhi\nbye\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 4514447, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UB1M9Yy2ACc/AAAAAAAAAAI/AAAAAAAAAKc/A373kW7Ei2o/photo.jpg?sz=128", "display_name": "naren65", "link": "https://stackoverflow.com/users/4514447/naren65"}, "is_accepted": false, "score": 0, "last_activity_date": 1423657877, "creation_date": 1423657877, "answer_id": 28454423, "question_id": 28452545, "link": "https://stackoverflow.com/questions/28452545/output-value-is-array-in-ruby/28454423#28454423", "title": "Output value is array in ruby", "body": "<p>If you want the output in separate lines, then you could use ruby array's <a href=\"http://www.ruby-doc.org/core-2.2.0/Array.html#method-i-flatten\" rel=\"nofollow\">flatten</a> method and then loop through it to print them in separate lines.\nFlatten converts the array of arrays to a single dimensional array.</p>\n\n<pre><code>hi.scan(/&lt;li&gt;(.*?)&lt;\\/li&gt;/).flatten.each {|x| puts x}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Welcome to select\nhi\nbye\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4554413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbe9b9b587a88591278779a610e95812?s=128&d=identicon&r=PG&f=1", "display_name": "Maria pesalava", "link": "https://stackoverflow.com/users/4554413/maria-pesalava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 28452890, "answer_count": 2, "score": 0, "last_activity_date": 1423727776, "creation_date": 1423652124, "last_edit_date": 1423727776, "question_id": 28452545, "link": "https://stackoverflow.com/questions/28452545/output-value-is-array-in-ruby", "title": "Output value is array in ruby", "body": "<p>This program output should be an string but it is array</p>\n\n<pre><code>hi = \"&lt;ui&gt;&lt;li&gt;Welcome to select&lt;/li&gt;&lt;li&gt;hi&lt;/li&gt;&lt;li&gt;bye&lt;/li&gt;&lt;/ul&gt;\"\n\ni = hi.scan(/&lt;ui&gt;(.*?)&lt;\\/ul/)\nputs i\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>[[\"&lt;li&gt;Welcome to select&lt;/li&gt;&lt;li&gt;hi&lt;/li&gt;&lt;li&gt;bye&lt;/li&gt;\"]]\n</code></pre>\n\n<p>but i want output like this </p>\n\n<pre><code> &lt;li&gt;Welcome to select&lt;/li&gt;&lt;li&gt;hi&lt;/li&gt;&lt;li&gt;bye&lt;/li&gt;\n</code></pre>\n\n<p>Then i want all the &lt;\\li>(.*?)&lt;/li> tags in seperate line </p>\n\n<p>Like this </p>\n\n<pre><code> Welcome to select\n hi\n bye\n</code></pre>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 1, "creation_date": 1423651538, "post_id": 28452300, "comment_id": 45231916, "body": "an example would be better."}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 3, "creation_date": 1423651572, "post_id": 28452300, "comment_id": 45231931, "body": "<code>&#47;^something.+&#47;</code> How about trying to learn regex yourself? You could start <a href=\"http://stackoverflow.com/tags/regex/info\">here</a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user266003"}, "reply_to_user": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 0, "creation_date": 1423651635, "post_id": 28452300, "comment_id": 45231966, "body": "@AvinashRaj, I already have shown an example."}, {"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 0, "creation_date": 1423651695, "post_id": 28452300, "comment_id": 45232003, "body": "<code>and contains some other characters using regex?</code>  What do you mean by some other characters?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user266003"}, "reply_to_user": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1423651839, "post_id": 28452300, "comment_id": 45232085, "body": "@Biffen, <code>if my_str =~ &#39;&#47;^\\&#47;categories.+&#47;&#39;</code> =====&gt; error <code>type mismatch, String given</code>. The original string to check is &quot;/categories&quot;."}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1423652007, "post_id": 28452300, "comment_id": 45232187, "body": "@Grienders I know virtually nothing about Ruby, so I wouldn&#39;t know. A wild guess is that the rvalue looks more like a string than a regex (if regex is a primitive type in Ruby). <b>Edit</b> A quick search later: Have you got the parameters in the wrong order?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1423652122, "post_id": 28452300, "comment_id": 45232236, "body": "<code>&#39;&#47;^\\&#47;categories.+&#47;&#39;</code> is a string, use <code>&#47;^\\&#47;categories.+&#47;</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1423652305, "post_id": 28452300, "comment_id": 45232346, "body": "BTW, if your regexp contains <code>&#47;</code>, you can use the <code>%r{...}</code> literal, e.g. <code>%r{&#47;categories.+}</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user266003"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1423656261, "post_id": 28452300, "comment_id": 45234747, "body": "@Stefan, then can&#39;t use if it as &quot;=~&quot;."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1423657742, "post_id": 28452300, "comment_id": 45235657, "body": "@Grienders of course you can: <code>&#39;abc&#39; =~ %r{b} #=&gt; 1</code>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user266003"}, "edited": false, "score": 0, "creation_date": 1423656226, "post_id": 28452726, "comment_id": 45234719, "body": "I haven&#39;t heard of A, why not ^?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1423657970, "post_id": 28452726, "comment_id": 45235777, "body": "@Grienders <code>^</code> = beginning of line, <code>\\A</code> = beginning of string. You can use them interchangeably if your string doesn&#39;t contain multiple lines."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 0, "last_activity_date": 1423652597, "creation_date": 1423652597, "answer_id": 28452726, "question_id": 28452300, "link": "https://stackoverflow.com/questions/28452300/a-string-starts-with-something-contains-something-else/28452726#28452726", "title": "A string starts with &quot;something&quot; + contains something else", "body": "<p>You can use <code>/\\Asomething.+/</code>:</p>\n\n<pre><code>regexp = /\\Asomething.+/\n</code></pre>\n\n<p><code>\\A</code> matches the beginning of a string. <code>.+</code> matches at least one following character.</p>\n\n<pre><code>'something'.match(regexp)\n#=&gt; nil\n\n'something else'.match(regexp)\n#=&gt; &lt;MatchData \"something else\"&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1423670045, "creation_date": 1423670045, "answer_id": 28458669, "question_id": 28452300, "link": "https://stackoverflow.com/questions/28452300/a-string-starts-with-something-contains-something-else/28458669#28458669", "title": "A string starts with &quot;something&quot; + contains something else", "body": "<p>spickermann's answer is close (it works), but is redundant. This is how to do it with regex:</p>\n\n<pre><code>my_str =~ /\\Asomething./\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user266003"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 28452726, "answer_count": 2, "score": 0, "last_activity_date": 1423670045, "creation_date": 1423651495, "question_id": 28452300, "link": "https://stackoverflow.com/questions/28452300/a-string-starts-with-something-contains-something-else", "title": "A string starts with &quot;something&quot; + contains something else", "body": "<p>How do I check if a string starts with \"something\" <strong>and</strong> contains some other characters using regex? I can do this that like this:</p>\n\n<pre><code>if my_str.start_with?(\"something\") &amp;&amp; my_str.size &gt; \"something\".size\n</code></pre>\n\n<p>How to do the same thing by regex?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "one-to-many"], "comments": [{"owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "edited": false, "score": 0, "creation_date": 1423651451, "post_id": 28452031, "comment_id": 45231865, "body": "why don&#39;t you use has_many relationhip, you don&#39;t have to use <code>append</code> then"}, {"owner": {"reputation": 13, "user_id": 4554272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e28329ced8ebd03b25c8be37ebc3468?s=128&d=identicon&r=PG&f=1", "display_name": "Ab Mu", "link": "https://stackoverflow.com/users/4554272/ab-mu"}, "reply_to_user": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "edited": false, "score": 0, "creation_date": 1423651964, "post_id": 28452031, "comment_id": 45232159, "body": "Has many is used,  &#39;has_many :developers&#39; , but the issue is when I want to add developers to my project this is done using the append &#39;&lt;&lt;&#39; operator."}, {"owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "edited": false, "score": 0, "creation_date": 1423652270, "post_id": 28452031, "comment_id": 45232315, "body": "add <code>belongs_to :project</code> in developer model and <code>has_many: developers</code> in project model and have you added foreign_key in developers table as <code>project_id</code>"}, {"owner": {"reputation": 13, "user_id": 4554272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e28329ced8ebd03b25c8be37ebc3468?s=128&d=identicon&r=PG&f=1", "display_name": "Ab Mu", "link": "https://stackoverflow.com/users/4554272/ab-mu"}, "reply_to_user": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "edited": false, "score": 0, "creation_date": 1423653249, "post_id": 28452031, "comment_id": 45232896, "body": "I already had this implemented, the append operation works in the rails console when I tested it. But in my web app it doesn&#39;t."}, {"owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "edited": false, "score": 0, "creation_date": 1423653516, "post_id": 28452031, "comment_id": 45233052, "body": "If all implemented then <code>@project.developers</code> this line should give you all the developers for particular project. If still you want to use append Check what&#39;s this it&#39;s a relation object or array <code>@project.developers</code>"}, {"owner": {"reputation": 13, "user_id": 4554272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e28329ced8ebd03b25c8be37ebc3468?s=128&d=identicon&r=PG&f=1", "display_name": "Ab Mu", "link": "https://stackoverflow.com/users/4554272/ab-mu"}, "reply_to_user": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "edited": false, "score": 0, "creation_date": 1423653712, "post_id": 28452031, "comment_id": 45233176, "body": "At the dev_to_project view page I try to render @project.developers.size it shows value 0 which mean the deveopler wasn&#39;t added."}, {"owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "edited": false, "score": 0, "creation_date": 1423653830, "post_id": 28452031, "comment_id": 45233256, "body": "from where you are adding project and developers from console, if so check that data is getting saved properly to db. Use <code>save!</code> method"}, {"owner": {"reputation": 13, "user_id": 4554272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e28329ced8ebd03b25c8be37ebc3468?s=128&d=identicon&r=PG&f=1", "display_name": "Ab Mu", "link": "https://stackoverflow.com/users/4554272/ab-mu"}, "reply_to_user": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "edited": false, "score": 0, "creation_date": 1423654612, "post_id": 28452031, "comment_id": 45233769, "body": "I used the save method, also I can add from forms in my web app. This is not the case what I meant is that I tested this feature on rails console before implementing it and it is working.  But it doesn&#39;t seem to work in my rails app."}], "answers": [{"tags": [], "owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "is_accepted": false, "score": 0, "last_activity_date": 1423652491, "creation_date": 1423652491, "answer_id": 28452685, "question_id": 28452031, "link": "https://stackoverflow.com/questions/28452031/one-to-many-association-using-the-append-operator-in-ruby-on-rails/28452685#28452685", "title": "One-to-Many association using the &quot;append&quot; operator in Ruby on Rails", "body": "<p>In Developer model</p>\n\n<pre><code>belongs_to :project\n</code></pre>\n\n<p>In project model</p>\n\n<pre><code>has_many: developers \n</code></pre>\n\n<p>add <code>foreign_key</code> in developers table as <code>project_id</code></p>\n\n<p>Then you can directly call</p>\n\n<pre><code>@project = Project.find_by(title:  params[:title])\n@project.developers.create(firstname: params[:name])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 4554272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e28329ced8ebd03b25c8be37ebc3468?s=128&d=identicon&r=PG&f=1", "display_name": "Ab Mu", "link": "https://stackoverflow.com/users/4554272/ab-mu"}, "is_accepted": false, "score": 0, "last_activity_date": 1423660883, "creation_date": 1423660883, "answer_id": 28455466, "question_id": 28452031, "link": "https://stackoverflow.com/questions/28452031/one-to-many-association-using-the-append-operator-in-ruby-on-rails/28455466#28455466", "title": "One-to-Many association using the &quot;append&quot; operator in Ruby on Rails", "body": "<p>A missing detail I forgot to mention is that my developer table has a password, and I have password authentication for it enabled, causing a failure to save whenever I called developer.save. now I provided developer.password as an experiment (I was 90% sure it is gonna work), and then the save was successful \"my data base was updated\".</p>\n\n<p>When I attempted to save after appending</p>\n\n<pre><code>irb(main):030:0&gt; dev.save\n (0.1ms)  BEGIN\n Developer Exists (0.2ms)  SELECT  1 AS one FROM `developers` WHERE    (`developers`.`email` = BINARY 'dev1@nc.com' AND `developers`.`id` != 1) LIMIT 1\n(0.1ms)  ROLLBACK\n=&gt; false\n</code></pre>\n\n<p>The error message I got:</p>\n\n<pre><code>irb(main):031:0&gt; dev.errors.full_messages\n=&gt; [\"Password can't be blank\", \"Password is too short (minimum is 4 characters)\"]\n</code></pre>\n\n<p>So my next step is to find a way to let my app know that I am an admin and don't need to authenticate the password in order to do successful save.</p>\n\n<p>Thanks a lot for you time and suggestions ...cheers :-).</p>\n"}], "owner": {"reputation": 13, "user_id": 4554272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e28329ced8ebd03b25c8be37ebc3468?s=128&d=identicon&r=PG&f=1", "display_name": "Ab Mu", "link": "https://stackoverflow.com/users/4554272/ab-mu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1423660883, "creation_date": 1423650693, "last_edit_date": 1423651261, "question_id": 28452031, "link": "https://stackoverflow.com/questions/28452031/one-to-many-association-using-the-append-operator-in-ruby-on-rails", "title": "One-to-Many association using the &quot;append&quot; operator in Ruby on Rails", "body": "<p>I have a Developers Table and a Projects Table.I am trying to assign a one to many relationship between these two tables in my rails application. Were I will add developers to projects.</p>\n\n<p>developer belongs to a project\n,project has many developers</p>\n\n<p>so I did the following. </p>\n\n<p>I created this method :</p>\n\n<pre><code> def add_to_project\n\n\n@project = Project.find_by(:title =&gt; params[:title])\n@developer = Developer.find_by(:name =&gt; params[:name])\n\nunless @developer.nil? ||  @project.nil?\n\n  # @project.developers.push(@developer)\n  @project.developers &lt;&lt; @developer\n\n  if @project.save\n\n    flash[:notice] = \"project was added successfully\"\n  else\n    flash[:notice] = \"project was not added successfully\"\n  end\n\nelse\n   flash[:notice] = \"project was not added successfully\"\n\nend\n\n redirect_to(:action =&gt; 'add_dev_proj') # this goes to a page that shows the two tables with the updates\nend\n</code></pre>\n\n<p>I obtain the values of the title and name from a form_tag I constructed like the following:</p>\n\n<pre><code>&lt;%= form_tag(:controller =&gt; 'projects', :action =&gt; 'add_to_project') do %&gt;\n&lt;%= text_field_tag('name', params[:name]) %&gt;\n&lt;%= text_field_tag('title', params[:title]) %&gt;\n\n&lt;%= submit_tag(\"Add dev to project\") %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>My problem is when trying this approach using rails console it works, but in my web app no modifications are being made. is there something I am missing here. Also I made sure my associations are defined in my model.</p>\n\n<p>Any insights would be great, thanks a lot in advance.</p>\n"}, {"tags": ["ruby", "macos", "performance", "ubuntu", "time"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1423650709, "post_id": 28451911, "comment_id": 45231457, "body": "Did you make sure you used the absolutely same ruby versions? If yes, this might be still caused by different ruby interpretors."}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 1, "creation_date": 1423651099, "post_id": 28451911, "comment_id": 45231685, "body": "It does look like there are some differences in <a href=\"https://github.com/ruby/ruby/blob/trunk/time.c\" rel=\"nofollow noreferrer\">github.com/ruby/ruby/blob/trunk/time.c</a> depending on the size of various types available (e.g. is there a 64 bit int type etc)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1423651791, "post_id": 28451911, "comment_id": 45232059, "body": "On my system (Ruby 2.2/OS X) <code>t1.to_i &lt;=&gt; t2.to_i</code> is <i>slower</i> by a factor of 10, but you probably should use <code>sort_by(&amp;:to_i)</code> either way :-)"}, {"owner": {"reputation": 632, "user_id": 1178637, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/771e985a3a6f992e12e11e0ea613c06e?s=128&d=identicon&r=PG", "display_name": "DZittersteyn", "link": "https://stackoverflow.com/users/1178637/dzittersteyn"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1423654523, "post_id": 28451911, "comment_id": 45233711, "body": "@mudasobwa Both pc&#39;s are running ruby 2.1.5p273"}], "owner": {"reputation": 632, "user_id": 1178637, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/771e985a3a6f992e12e11e0ea613c06e?s=128&d=identicon&r=PG", "display_name": "DZittersteyn", "link": "https://stackoverflow.com/users/1178637/dzittersteyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1423650314, "creation_date": 1423650314, "question_id": 28451911, "link": "https://stackoverflow.com/questions/28451911/what-is-the-difference-between-sorting-an-array-of-times-in-macos-vs-ubuntu", "title": "What is the difference between sorting an array of times in MacOs vs Ubuntu", "body": "<p>I was working on a performance improvement for a query, which returns a list of objects sorted by date. My first implementation was as follows:</p>\n\n<p><code>times.sort { |t1, t2| t1 &lt;=&gt; t2 }</code></p>\n\n<p>For a large array, this was taking more time that I'd like. A rewrite to </p>\n\n<p><code>times.sort { |t1, t2| t1.to_i &lt;=&gt; t2.to_i }</code></p>\n\n<p>greatly improved performance (by a factor 4-5). This puzzled me a bit, but it improved performance, so even though I couldn't find out why, I submitted it for code review.</p>\n\n<p>One of my colleagues reviewed my code, and was surprised about my claim, as he couldn't reproduce it. We ran some benchmarking with the following code:</p>\n\n<pre><code>now = Time.now\nlast_year = now - 60 * 60 * 24 * 365\ntimes = []\n10000.times { times.push rand(last_year..now) }\n\nBenchmark.bm do |x|\n  x.report { times.sort { |t1, t2| t1 &lt;=&gt; t2 } }\n  x.report { times.sort { |t1, t2| t1.to_i &lt;=&gt; t2.to_i } }\nend\n</code></pre>\n\n<p>and were very confused to find (reproduced over >5 runs):</p>\n\n<p>on OSX (10.10.2):</p>\n\n<pre><code>   user     system      total        real\n1.860000   2.570000   4.430000 (  4.604914)\n1.250000   0.030000   1.280000 (  1.418240)\n</code></pre>\n\n<p>on Ubuntu (3.13.0-37-generic, 64 bits)</p>\n\n<pre><code>   user     system      total        real\n0.920000   0.060000   0.980000 (  0.985049)\n0.990000   0.000000   0.990000 (  0.993462)\n</code></pre>\n\n<p>The absolute time difference doesn't bother me so much, as my colleague's machine might simply be less heavily loaded, but the entire performance gain has disappeared!</p>\n\n<p>What could possibly cause this difference?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1423647673, "post_id": 28450937, "comment_id": 45229661, "body": "They are method calls."}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 1, "creation_date": 1423650178, "post_id": 28450937, "comment_id": 45231128, "body": "They can be a bit magical-seeming at first glance, partly because of Ruby&#39;s optional brackets, which tend to be omitted.  For example, this <code>has_many :foos, :through =&gt; :bars</code> is shorthand for <code>has_many(:foos, {:through =&gt; :bars})</code>.  When you see it with the brackets added, it&#39;s easier to see that <code>has_many</code> is a method name, <code>:foos</code> is the primary argument, and <code>:through =&gt; :bars</code> is an optional key-value pair passed through in a hash, where the hash is effectively the second argument to the method."}], "answers": [{"tags": [], "owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "is_accepted": false, "score": 1, "last_activity_date": 1423648483, "creation_date": 1423648483, "answer_id": 28451271, "question_id": 28450937, "link": "https://stackoverflow.com/questions/28450937/what-are-before-create-validates-presence-of-has-many-etc/28451271#28451271", "title": "What are before_create, validates_presence_of, has_many etc?", "body": "<p>In pure Ruby terms, they are all just method calls. </p>\n\n<p>However, they do have a common theme. In the way they are constructed and used, you could consider them part of a <a href=\"http://en.wikipedia.org/wiki/Domain-specific_language\" rel=\"nofollow\">Domain-Specific Language (DSL)</a>  - the ones you list are part of Active Record's DSL for creating data models. </p>\n\n<p>Ruby lends itself well to creating DSL-like mini languages, using mix-ins or a base class in order to provide a set of class methods, which in turn will store data or create methods on the class and instances of it using meta-programming techniques.</p>\n"}, {"tags": [], "owner": {"reputation": 9917, "user_id": 100342, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/af270ac26bf744c2ef2534a138bf7f67?s=128&d=identicon&r=PG", "display_name": "janfoeh", "link": "https://stackoverflow.com/users/100342/janfoeh"}, "is_accepted": true, "score": 3, "last_activity_date": 1423650117, "last_edit_date": 1423650117, "creation_date": 1423649799, "answer_id": 28451709, "question_id": 28450937, "link": "https://stackoverflow.com/questions/28450937/what-are-before-create-validates-presence-of-has-many-etc/28451709#28451709", "title": "What are before_create, validates_presence_of, has_many etc?", "body": "<p>These methods are really just class methods. Try this:</p>\n\n<pre><code>class Test\n  def self.before_create\n    puts \"before_create\"\n  end\n\n  before_create\nend\n</code></pre>\n\n<p>The specific use case you mentioned - Rails DSL methods such as <code>before_create</code>, that are only available inside a <code>class</code> body \u2014 are often called <strong>class macros</strong>. Rubys metaprogramming abilities give you multiple ways to build them. A simple one is to make them private:</p>\n\n<pre><code>module Foo\n  private\n\n  def before_create\n    puts \"before_create\"\n  end\nend\n\nclass Bar\n  extend Foo\n\n  before_create\nend\n</code></pre>\n\n<p><code>before_create</code> is now accessible inside the class body, but not from outside:</p>\n\n<pre><code>Bar.before_create\nNoMethodError: private method `before_create' called for Bar:Class\n</code></pre>\n"}], "owner": {"reputation": 3658, "user_id": 1381745, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/acb5807e26cde875b19995ee6ecb09be?s=128&d=identicon&r=PG", "display_name": "user1381745", "link": "https://stackoverflow.com/users/1381745/user1381745"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 1, "accepted_answer_id": 28451709, "answer_count": 2, "score": 1, "last_activity_date": 1423650117, "creation_date": 1423647509, "question_id": 28450937, "link": "https://stackoverflow.com/questions/28450937/what-are-before-create-validates-presence-of-has-many-etc", "title": "What are before_create, validates_presence_of, has_many etc?", "body": "<p>I understand what these statements <em>do</em>, but not how to refer to them. They exist within a class, outside of that class's methods and perform a variety of functions. </p>\n\n<p>Collectively, what are they called?</p>\n"}, {"tags": ["ruby", "date", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "is_accepted": false, "score": 1, "last_activity_date": 1423647581, "creation_date": 1423647581, "answer_id": 28450968, "question_id": 28450834, "link": "https://stackoverflow.com/questions/28450834/rspec-returns-wrong-ruby-date-month-rubys-class-returns-the-right-one/28450968#28450968", "title": "Rspec returns wrong Ruby Date month. Ruby&#39;s Class returns the right one", "body": "<p><code>Date#new</code> <a href=\"http://ruby-doc.org/stdlib-2.2.0/libdoc/date/rdoc/Date.html#method-c-new\" rel=\"nofollow\">doesn't return today's date</a>. You're using <code>Time.new</code> in your class, and <code>Date.new</code> in your test. You should probably be using <code>Time.now</code> in both cases.</p>\n"}, {"tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 1, "last_activity_date": 1423647593, "creation_date": 1423647593, "answer_id": 28450973, "question_id": 28450834, "link": "https://stackoverflow.com/questions/28450834/rspec-returns-wrong-ruby-date-month-rubys-class-returns-the-right-one/28450973#28450973", "title": "Rspec returns wrong Ruby Date month. Ruby&#39;s Class returns the right one", "body": "<p><code>Date.new</code> without arguments doesn't return today's date but:</p>\n\n<pre><code>Date.new\n# =&gt; Mon, 01 Jan -4712\n</code></pre>\n\n<p>instead, you can use <code>Date.today</code>:</p>\n\n<pre><code>expect(subject.calendar['month']).to eq(Date.today.strftime(\"%B\"))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 1, "last_activity_date": 1423650978, "last_edit_date": 1423650978, "creation_date": 1423649191, "answer_id": 28451517, "question_id": 28450834, "link": "https://stackoverflow.com/questions/28450834/rspec-returns-wrong-ruby-date-month-rubys-class-returns-the-right-one/28451517#28451517", "title": "Rspec returns wrong Ruby Date month. Ruby&#39;s Class returns the right one", "body": "<p>Besides the <code>Date.new</code> issue (it defaults to the start of the Julian period, i.e. 4712 BC), both your test and your code use the current date. This may lead to unexpected behavior when running the tests on different dates.</p>\n\n<p>It's usually better to explicitly set the current time, e.g:</p>\n\n<pre><code>class Calendar\n  def initialize(time = Time.new)\n    @date = time\n  end\n  # ...\nend\n</code></pre>\n\n<p>In your test:</p>\n\n<pre><code>describe Calendar do\n  let(:now) { Time.new(2014, 1, 1) }\n  subject { Calendar.new(now) }\n\n  describe \"#month\" do\n    it \"returns the current month's name\" do\n      expect(subject.month).to eq('January')\n    end\n  end\n  #...\nend\n</code></pre>\n"}], "owner": {"reputation": 189, "user_id": 2933074, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2774ae1db81c2751bb81df948b904fba?s=128&d=identicon&r=PG&f=1", "display_name": "UnknownFrequency", "link": "https://stackoverflow.com/users/2933074/unknownfrequency"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 28450973, "answer_count": 3, "score": 0, "last_activity_date": 1423650978, "creation_date": 1423647208, "last_edit_date": 1423647423, "question_id": 28450834, "link": "https://stackoverflow.com/questions/28450834/rspec-returns-wrong-ruby-date-month-rubys-class-returns-the-right-one", "title": "Rspec returns wrong Ruby Date month. Ruby&#39;s Class returns the right one", "body": "<p>This is very strange? What magic am I missing?</p>\n\n<pre><code>class Calendar\n  def initialize\n    @date = Time.new\n  end\n  def month\n    @date.strftime(\"%B\")\n  end\n  def calendar\n    calendar = { 'month' =&gt; self.month }\n  end\nend\nc = Calendar.new \n\nputs c.calendar       =&gt; {\"month\"=&gt;\"February\"}\n</code></pre>\n\n<p>calendar_spec.rb</p>\n\n<pre><code>require 'date'\nrequire 'spec_helper'\nrequire 'calendar'\n\ndescribe Calendar do\n  subject { Calendar.new }\n\n  context \"calendar\" do\n    it \"should save current month into calendar hash\" do\n      expect(subject.calendar['month']).to eq(Date.new.strftime(\"%B\"))\n    end\n  end\n\n$&gt; rspec spec\n    Failures:\n\n    1) Calendar calendar should save current month into calendar hash\n     Failure/Error: expect(subject.calendar['month']).to eq(Date.new.strftime(\"%B\"))\n\n       expected: \"January\"\n            got: \"February\"\n\n       (compared using ==)\n     # ./spec/calendar_spec.rb:25:in `block (3 levels) in &lt;top (required)&gt;'\n</code></pre>\n"}, {"tags": ["ruby", "powershell", "psexec", "cookbook", "rundeck"], "comments": [{"owner": {"reputation": 19585, "user_id": 3115685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/206073fe8f46ef1f9261d75c80c19c6f?s=128&d=identicon&r=PG&f=1", "display_name": "arco444", "link": "https://stackoverflow.com/users/3115685/arco444"}, "edited": false, "score": 0, "creation_date": 1423650311, "post_id": 28450726, "comment_id": 45231217, "body": "<code>psexec</code> does odd things with output streams, this is quite a common scenario. Question is... Why are you using <code>cmd</code> to launch a <code>psexec</code> process that launches a <code>powershell</code> script? Why not directly launch powershell?"}, {"owner": {"reputation": 31, "user_id": 4449020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37053a1b8a7311d9750340c9db127a92?s=128&d=identicon&r=PG&f=1", "display_name": "Michael O&#39;Reilly", "link": "https://stackoverflow.com/users/4449020/michael-oreilly"}, "reply_to_user": {"reputation": 19585, "user_id": 3115685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/206073fe8f46ef1f9261d75c80c19c6f?s=128&d=identicon&r=PG&f=1", "display_name": "arco444", "link": "https://stackoverflow.com/users/3115685/arco444"}, "edited": false, "score": 0, "creation_date": 1423651392, "post_id": 28450726, "comment_id": 45231830, "body": "I need to use Powershell 32 bit and if I try and directly open Powershell it will give me the 64 bit Powershell which I am unable to run my modules on."}, {"owner": {"reputation": 19585, "user_id": 3115685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/206073fe8f46ef1f9261d75c80c19c6f?s=128&d=identicon&r=PG&f=1", "display_name": "arco444", "link": "https://stackoverflow.com/users/3115685/arco444"}, "edited": false, "score": 0, "creation_date": 1423651719, "post_id": 28450726, "comment_id": 45232015, "body": "Launch the 32bit version directly. Your current script calls the 64bit one anyway. 32bit is at: <code>C:\\Windows\\SysWOW64\\WindowsPowerShell\\v1.0\\powershell.exe</code>"}, {"owner": {"reputation": 31, "user_id": 4449020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37053a1b8a7311d9750340c9db127a92?s=128&d=identicon&r=PG&f=1", "display_name": "Michael O&#39;Reilly", "link": "https://stackoverflow.com/users/4449020/michael-oreilly"}, "reply_to_user": {"reputation": 19585, "user_id": 3115685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/206073fe8f46ef1f9261d75c80c19c6f?s=128&d=identicon&r=PG&f=1", "display_name": "arco444", "link": "https://stackoverflow.com/users/3115685/arco444"}, "edited": false, "score": 0, "creation_date": 1423652629, "post_id": 28450726, "comment_id": 45232544, "body": "Sorry I meant the other way about, I need to use Powershell 64 bit and if I try and directly open Powershell it will give me the 32 bit. Even when it is called directly it will still bring up the wrong Powershell :/"}], "owner": {"reputation": 31, "user_id": 4449020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37053a1b8a7311d9750340c9db127a92?s=128&d=identicon&r=PG&f=1", "display_name": "Michael O&#39;Reilly", "link": "https://stackoverflow.com/users/4449020/michael-oreilly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 535, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1423646892, "creation_date": 1423646892, "question_id": 28450726, "link": "https://stackoverflow.com/questions/28450726/psexec-not-returning-output", "title": "PsExec not returning output", "body": "<p>I have created a ruby script to open Powershell and run a module I have created in it, the following command is what I am using to do this; </p>\n\n<p><code>cmd /c C:\\\\NaviMedix\\\\Shared\\\\Bin\\\\psexec -s C:\\\\Windows\\\\System32\\\\WindowsPowerShell\\\\v1.0\\\\powershell.exe C:\\\\HTTP\\\\loadServerManager.ps1</code></p>\n\n<p>When running this locally in my own VM It works correctly and gives me the following output. Although when I store it in a cookbook as a library and run it through Run Deck it gives me a different output. </p>\n\n<p><strong>Local output:</strong></p>\n\n<pre><code>PsExec v1.86 - Execute processes remotely\nCopyright (C) 2001-2007 Mark Russinovich\nSysinternals - www.sysinternals.com\n\nStarting C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\powershell.exe on SCSBCHEFTE\n\n\nC:\\Windows\\System32\\WindowsPowerShell\\v1.0\\powershell.exe exited on SCSBCHEFTEST04 with error code 0.\n\nWelcome to Powershell augmented with NaviNet tools.\n\n\nDirectory: C:\\Windows\\system32\\WindowsPowerShell\\v1.0\\Modules\n\n\nModuleType Version    Name                                ExportedCommands\n---------- -------    ----                                ----------------\nManifest   2.0.0.0    AppLocker                           {Get-   AppLockerFile...\nManifest   2.0.0.0    Appx                                {Add-AppxPackage, ...\nManifest   1.0        BestPractices                       {Get-BpaModel, \n\nSuccess       : True\nRestartNeeded : No\nFeatureResult : {}\nExitCode      : NoChangeNeeded\n\n\nName                      : NET-HTTP-Activation\nDisplayName               : HTTP Activation\nDescription               : HTTP Activation supports process activation via\n                        HTTP. Applications that use HTTP Activation can\n                        start and stop dynamically in response to work\n                        items that arrive over the network via HTTP.\nInstalled                 : True\nInstallState              : Installed\n</code></pre>\n\n<p><strong>Run Deck output:</strong></p>\n\n<pre><code>PsExec v1.86 - Execute processes remotely\nCopyright (C) 2001-2007 Mark Russinovich\nSysinternals - www.sysinternals.com\n\nConnecting to local system...\nStarting PsExec service on local system...\nConnecting with PsExec service on SCSBCHEFTEST01...\nStarting C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\powershell.exe on SCSBCHEFTEST01...\nC:\\Windows\\System32\\WindowsPowerShell\\v1.0\\powershell.exe exited on SCSBCHEFTEST01 with error code 1.\n</code></pre>\n\n<p>I want the local output to appear in Run Deck output but can not seem to make it work. Can anyone help me to solve this problem please?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "actionmailer", "exception-notification"], "comments": [{"owner": {"reputation": 36449, "user_id": 2453699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0b0a49d160baf7d95b81d798ea0cb65?s=128&d=identicon&r=PG", "display_name": "vee", "link": "https://stackoverflow.com/users/2453699/vee"}, "edited": false, "score": 0, "creation_date": 1423646169, "post_id": 28450294, "comment_id": 45228804, "body": "I couldn&#39;t find a newer document.  I don&#39;t think much has changed.  Please see here: <a href=\"http://gmailblog.blogspot.com/2009/07/send-mail-from-another-address-without.html\" rel=\"nofollow noreferrer\">gmailblog.blogspot.com/2009/07/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 402, "user_id": 3809903, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9e1c36e71e453b8ecea77f2e8127942b?s=128&d=identicon&r=PG&f=1", "display_name": "kai", "link": "https://stackoverflow.com/users/3809903/kai"}, "edited": false, "score": 0, "creation_date": 1423647750, "post_id": 28450826, "comment_id": 45229703, "body": "I change username &quot;my_email@domain.com&quot; and domain.com is my custom gmail apps mail.  and It also sender is my email_address. :("}, {"owner": {"reputation": 402, "user_id": 3809903, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9e1c36e71e453b8ecea77f2e8127942b?s=128&d=identicon&r=PG&f=1", "display_name": "kai", "link": "https://stackoverflow.com/users/3809903/kai"}, "edited": false, "score": 0, "creation_date": 1423704536, "post_id": 28450826, "comment_id": 45260937, "body": "and then how to change and  send norepy@doamin.com ?"}], "tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": true, "score": 3, "last_activity_date": 1423647182, "creation_date": 1423647182, "answer_id": 28450826, "question_id": 28450294, "link": "https://stackoverflow.com/questions/28450294/rails4-exception-notifier-not-change-sender-address/28450826#28450826", "title": "Rails4, Exception Notifier not change sender_address", "body": "<p>If you authenticate using the Gmail SMTP account, Gmail will override the sender to your Gmail account. They don't allow you to use their SMTP to send emails from a different domain.</p>\n"}, {"comments": [{"owner": {"reputation": 402, "user_id": 3809903, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9e1c36e71e453b8ecea77f2e8127942b?s=128&d=identicon&r=PG&f=1", "display_name": "kai", "link": "https://stackoverflow.com/users/3809903/kai"}, "edited": false, "score": 0, "creation_date": 1423649153, "post_id": 28451083, "comment_id": 45230530, "body": "It Also not change sender address... mailUser name is change (&quot;Noreply &lt;my_email@our_domain.com&gt;&quot;) i will try more :)"}], "tags": [], "owner": {"reputation": 4101, "user_id": 1482055, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f4D9p.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/1482055/milind"}, "is_accepted": false, "score": 0, "last_activity_date": 1423647945, "creation_date": 1423647945, "answer_id": 28451083, "question_id": 28450294, "link": "https://stackoverflow.com/questions/28450294/rails4-exception-notifier-not-change-sender-address/28451083#28451083", "title": "Rails4, Exception Notifier not change sender_address", "body": "<p>try below code in <code>production.rb</code>(Assuming you want to work in production) and <strong>hard code</strong> it....</p>\n\n<pre><code> ##added exception notification gem\n MyApp::Application.config.middleware.use ExceptionNotification::Rack,\n   :email =&gt; {\n     :email_prefix =&gt; \"[MyApp_Error] \",\n     :sender_address =&gt; %{\"notifier\" &lt;notifier@myApp.com&gt;},\n     :exception_recipients =&gt; %w{your_desired_email@gmail.com}\n   }\n</code></pre>\n\n<p>i works for me....</p>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 4554605, "user_type": "registered", "profile_image": "https://graph.facebook.com/803386649698065/picture?type=large", "display_name": "Promit Neogy", "link": "https://stackoverflow.com/users/4554605/promit-neogy"}, "is_accepted": false, "score": 0, "last_activity_date": 1423656195, "creation_date": 1423656195, "answer_id": 28453887, "question_id": 28450294, "link": "https://stackoverflow.com/questions/28450294/rails4-exception-notifier-not-change-sender-address/28453887#28453887", "title": "Rails4, Exception Notifier not change sender_address", "body": "<p>#TRY THIS in :sender_address write your own name and mail address</p>\n\n<pre><code> :sender_address =&gt; %{\"Username\" &lt;useremailid@xyzmail.com&gt;},\n</code></pre>\n"}], "owner": {"reputation": 402, "user_id": 3809903, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9e1c36e71e453b8ecea77f2e8127942b?s=128&d=identicon&r=PG&f=1", "display_name": "kai", "link": "https://stackoverflow.com/users/3809903/kai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 28450826, "answer_count": 3, "score": 0, "last_activity_date": 1423656195, "creation_date": 1423645515, "last_edit_date": 1423647825, "question_id": 28450294, "link": "https://stackoverflow.com/questions/28450294/rails4-exception-notifier-not-change-sender-address", "title": "Rails4, Exception Notifier not change sender_address", "body": "<p>Our Rails Application using ExceptionNotifier Gem</p>\n\n<p>and change configuration file</p>\n\n<p>Exception Mail is working good</p>\n\n<p>But sender mail is not  Noreply &lt; noreply@our_domain.com ></p>\n\n<p>Always sender is my email_address </p>\n\n<p>My production.rb file is</p>\n\n<pre><code>config.log_formatter = ::Logger::Formatter.new\n\nconfig.middleware.use ExceptionNotification::Rack,\n   :email =&gt; {\n     :email_prefix =&gt; \"[Exception \",\n     :sender_address =&gt; %{\"Noreply\" &lt;noreply@our_domain.com&gt;},\n     :exception_recipients =&gt; %w{my_email@gmail.com}\n   }   \n</code></pre>\n\n<p>And setup_mailer.rb file is </p>\n\n<pre><code>ActionMailer::Base.delivery_method = :smtp\nActionMailer::Base.perform_deliveries = true\nActionMailer::Base.raise_delivery_errors = true\nActionMailer::Base.smtp_settings = {\n  :address =&gt; \"smtp.gmail.com\",\n  :port =&gt; 587,\n  :domain =&gt; \"our_domain.com\",\n  :user_name =&gt; \"my_eamail@our_domain.com\",\n  :password =&gt; \"PASSWORD\",\n  :authentication =&gt; \"login\",\n  :enable_starttls_auto =&gt; true\n\n} \n</code></pre>\n\n<p>why sender address not change???</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "oauth-2.0", "sinatra", "google-contacts-api"], "answers": [{"tags": [], "owner": {"reputation": 2755, "user_id": 1604312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVThG.gif?s=128&g=1", "display_name": "Rael Gugelmin Cunha", "link": "https://stackoverflow.com/users/1604312/rael-gugelmin-cunha"}, "is_accepted": false, "score": 0, "last_activity_date": 1423668487, "last_edit_date": 1423668487, "creation_date": 1423658026, "answer_id": 28454475, "question_id": 28450159, "link": "https://stackoverflow.com/questions/28450159/get-oauth2-access-token-owner-email-address-in-ruby/28454475#28454475", "title": "Get oauth2 access_token owner email address in ruby?", "body": "<p>Usually you can get that email with the response for any API call. For contacts API, by example, there is an entry called <code>author</code> in the response: <a href=\"https://developers.google.com/google-apps/contacts/v3/#retrieving_all_contacts\" rel=\"nofollow\">https://developers.google.com/google-apps/contacts/v3/#retrieving_all_contacts</a></p>\n\n<p>Anyway, I'm not sure which gem you're using. You can use <a href=\"https://github.com/intridea/oauth2\" rel=\"nofollow\">oauth2</a>, <a href=\"https://github.com/doorkeeper-gem/doorkeeper\" rel=\"nofollow\">doorkeeper</a> or <a href=\"http://www.cloudsponge.com/integrations/ruby\" rel=\"nofollow\">cloudsponge</a>.</p>\n"}], "owner": {"reputation": 5220, "user_id": 2442926, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/4b97751a77122dbf89ecb928967efbab?s=128&d=identicon&r=PG", "display_name": "ben", "link": "https://stackoverflow.com/users/2442926/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 349, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1423668487, "creation_date": 1423645095, "question_id": 28450159, "link": "https://stackoverflow.com/questions/28450159/get-oauth2-access-token-owner-email-address-in-ruby", "title": "Get oauth2 access_token owner email address in ruby?", "body": "<p>I am successfully using <strong>Oauth2 gem</strong> to get an <strong>access tokens</strong> from Google accounts. But I want to get the <strong>email address</strong> which produced the token (I mean if I used this account \"myemail@gmail.com\" to get the access_token, how can I know the email address from the token?). Or can I get the email while obtaining the token?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 2, "creation_date": 1423644913, "post_id": 28450065, "comment_id": 45228094, "body": "Issue cannot be reproduced in <code>ruby-2.0.0-p598</code>"}, {"owner": {"reputation": 12290, "user_id": 228370, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a3f87affc7032e0af7cc4ce2ddb08ce9?s=128&d=identicon&r=PG", "display_name": "23tux", "link": "https://stackoverflow.com/users/228370/23tux"}, "reply_to_user": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 0, "creation_date": 1423644984, "post_id": 28450065, "comment_id": 45228128, "body": "I have <code>ruby-2.1.2</code> and updated that information in my question"}, {"owner": {"reputation": 4005, "user_id": 4200092, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/saOd8.png?s=128&g=1", "display_name": "GoBusto", "link": "https://stackoverflow.com/users/4200092/gobusto"}, "edited": false, "score": 1, "creation_date": 1423645253, "post_id": 28450065, "comment_id": 45228277, "body": "Cannot reproduce on either <code>ruby-2.0.0-p598</code> or <code>ruby 2.1.5p273</code>."}, {"owner": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 1, "creation_date": 1423645471, "post_id": 28450065, "comment_id": 45228398, "body": "2.1.2p95 (OSX) works as expected"}, {"owner": {"reputation": 1910, "user_id": 676788, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/16dfcfaa3f6405e9572cea3f88a68c56?s=128&d=identicon&r=PG", "display_name": "Nafaa Boutefer", "link": "https://stackoverflow.com/users/676788/nafaa-boutefer"}, "edited": false, "score": 1, "creation_date": 1423645577, "post_id": 28450065, "comment_id": 45228460, "body": "Works well on ruby 2.1.3p242"}, {"owner": {"reputation": 12290, "user_id": 228370, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a3f87affc7032e0af7cc4ce2ddb08ce9?s=128&d=identicon&r=PG", "display_name": "23tux", "link": "https://stackoverflow.com/users/228370/23tux"}, "edited": false, "score": 0, "creation_date": 1423645691, "post_id": 28450065, "comment_id": 45228529, "body": "Ok, then I try to simply reinstall ruby"}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 4, "creation_date": 1423646118, "post_id": 28450065, "comment_id": 45228771, "body": "The original code probably contains a <a href=\"http://www.rubyinside.com/the-split-is-not-enough-whitespace-shenigans-for-rubyists-5980.html\" rel=\"nofollow noreferrer\">Unicode space</a> (check it with a hex editor). Maybe SO \u201ccorrected\u201d it or can you reproduce the error with the code on this site?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 1, "creation_date": 1423647593, "post_id": 28450065, "comment_id": 45229614, "body": "@cremno It <b>does contain</b> Unicode space. Edit \u21d2 copypaste to vim clearly shows it."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1423648184, "post_id": 28450065, "comment_id": 45229968, "body": "@mudasobwa unfortunately, SO sanitizes certain characters when rendering code, making it difficult to discuss or even reproduce such issues."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1423648679, "post_id": 28450065, "comment_id": 45230253, "body": "@Stefan Fortunately, SO leaves the <i>entered text</i> untouched, so you might click \u201cedit\u201d to open the issue text <i>exactly as it was entered</i>, than copy-paste it in your favorite editor and make sure that there is a non-ascii."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1423658327, "post_id": 28450065, "comment_id": 45236001, "body": "@mudasobwa yeah, that&#39;s what I meant by &quot;difficult&quot; :-)"}], "answers": [{"comments": [{"owner": {"reputation": 12290, "user_id": 228370, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a3f87affc7032e0af7cc4ce2ddb08ce9?s=128&d=identicon&r=PG", "display_name": "23tux", "link": "https://stackoverflow.com/users/228370/23tux"}, "edited": false, "score": 0, "creation_date": 1423647826, "post_id": 28451003, "comment_id": 45229739, "body": "Thanks, another thing learned. From now, I activate invisible characters in my editor ;)"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 3, "last_activity_date": 1423648230, "last_edit_date": 1423648230, "creation_date": 1423647666, "answer_id": 28451003, "question_id": 28450065, "link": "https://stackoverflow.com/questions/28450065/whitespaces-in-logic-statement-throw-an-error/28451003#28451003", "title": "Whitespaces in logic statement throw an error", "body": "<p>Your expression contains a special whitespace character, probably a <a href=\"http://en.wikipedia.org/wiki/Non-breaking_space\" rel=\"nofollow\">non-breaking space</a>:</p>\n\n<pre><code>!(x || y)\n#     ^\n#     |\n#   here\n</code></pre>\n\n<p>The error message shows it, too:</p>\n\n<pre><code>NameError: undefined local variable or method ' y' for main:Object\n#                                              ^\n#                                              |\n#                                             here\n</code></pre>\n"}], "owner": {"reputation": 12290, "user_id": 228370, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a3f87affc7032e0af7cc4ce2ddb08ce9?s=128&d=identicon&r=PG", "display_name": "23tux", "link": "https://stackoverflow.com/users/228370/23tux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "closed_date": 1423649332, "accepted_answer_id": 28451003, "answer_count": 1, "score": 0, "last_activity_date": 1423648230, "creation_date": 1423644761, "question_id": 28450065, "link": "https://stackoverflow.com/questions/28450065/whitespaces-in-logic-statement-throw-an-error", "closed_reason": "Not suitable for this site", "title": "Whitespaces in logic statement throw an error", "body": "<p>I have the following piece of Ruby code (Ruby 2.1.2):</p>\n\n<pre><code>x = false\ny = true\n!(x ||\u00a0y)\n</code></pre>\n\n<p>It throws a</p>\n\n<pre><code>NameError: undefined local variable or method `\u00a0y' for main:Object\n</code></pre>\n\n<p>However, this line works</p>\n\n<pre><code>x = true\ny = false\n!(x ||\u00a0y)\n=&gt; false\n</code></pre>\n\n<p>I can explain this, because <code>x</code> is already true, and so <code>y</code> isn't evaluated.</p>\n\n<p>Now it gets interesting. When I write</p>\n\n<pre><code>x = false\ny = true\n!(x||y)\n=&gt; false\n</code></pre>\n\n<p>everything works as expected. But can someone explain, why I have to strip out the two whitespaces in <code>x ||\u00a0y</code>?</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "regex"], "answers": [{"comments": [{"owner": {"reputation": 2119, "user_id": 1411047, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/673ade5df575380a2e2cd5a0c1503784?s=128&d=identicon&r=PG", "display_name": "Avdept", "link": "https://stackoverflow.com/users/1411047/avdept"}, "edited": false, "score": 0, "creation_date": 1423643912, "post_id": 28449821, "comment_id": 45227600, "body": "<code>.*?</code> means everything inside of <code>&lt;&gt;</code> ?"}, {"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "reply_to_user": {"reputation": 2119, "user_id": 1411047, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/673ade5df575380a2e2cd5a0c1503784?s=128&d=identicon&r=PG", "display_name": "Avdept", "link": "https://stackoverflow.com/users/1411047/avdept"}, "edited": false, "score": 0, "creation_date": 1423643975, "post_id": 28449821, "comment_id": 45227634, "body": "yes in a non-greedy way. If you remove <code>?</code> it will become greedy and replace the whole string with <code>&quot; &quot;</code>"}, {"owner": {"reputation": 13500, "user_id": 1401975, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1LLiP.png?s=128&g=1", "display_name": "HamZa", "link": "https://stackoverflow.com/users/1401975/hamza"}, "edited": false, "score": 0, "creation_date": 1423644015, "post_id": 28449821, "comment_id": 45227650, "body": "Basically it will break at <code>&lt;p title=&quot;a &gt; b&quot;&gt;foo&lt;&#47;p&gt;</code>"}, {"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "reply_to_user": {"reputation": 13500, "user_id": 1401975, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1LLiP.png?s=128&g=1", "display_name": "HamZa", "link": "https://stackoverflow.com/users/1401975/hamza"}, "edited": false, "score": 0, "creation_date": 1423644147, "post_id": 28449821, "comment_id": 45227707, "body": "@HamZa thats true. I am handling only basic examples."}], "tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 4, "last_activity_date": 1423643857, "creation_date": 1423643857, "answer_id": 28449821, "question_id": 28449761, "link": "https://stackoverflow.com/questions/28449761/replace-html-tags-with-whitespaces/28449821#28449821", "title": "Replace html tags with whitespaces", "body": "<p>Try using regex like this:</p>\n\n<pre><code>str.gsub!(/&lt;.*?&gt;/, \" \")\n# =&gt; \" Class GOesHere  SomeExtra Tag \"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 455, "user_id": 270433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2e71eea5bd76c6664eb3bc6f5f39c63?s=128&d=identicon&r=PG", "display_name": "Sidhannowe", "link": "https://stackoverflow.com/users/270433/sidhannowe"}, "edited": false, "score": 0, "creation_date": 1469104372, "post_id": 28449833, "comment_id": 64407229, "body": "It will not work if you have a simple tag like <code>&lt;br&gt;</code>"}], "tags": [], "owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "is_accepted": true, "score": -1, "last_activity_date": 1423643893, "creation_date": 1423643893, "answer_id": 28449833, "question_id": 28449761, "link": "https://stackoverflow.com/questions/28449761/replace-html-tags-with-whitespaces/28449833#28449833", "title": "Replace html tags with whitespaces", "body": "<pre><code>str\n =&gt; \"&lt;span&gt;Class GOesHere&lt;/span&gt;&lt;div&gt;SomeExtra Tag&lt;/div&gt;\"\n</code></pre>\n\n<p>You could change your string before striping tags, for example</p>\n\n<pre><code>str.gsub!('&gt;&lt;', '&gt; &lt;')\n</code></pre>\n\n<p>and it should produce</p>\n\n<pre><code>str\n =&gt; \"&lt;span&gt;Class GOesHere&lt;/span&gt; &lt;div&gt;SomeExtra Tag&lt;/div&gt;\" \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13500, "user_id": 1401975, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1LLiP.png?s=128&g=1", "display_name": "HamZa", "link": "https://stackoverflow.com/users/1401975/hamza"}, "edited": false, "score": 0, "creation_date": 1423644137, "post_id": 28449868, "comment_id": 45227704, "body": "I absolutely agree about using an HTML parser in this case but the output is just the same as the OP currently has."}, {"owner": {"reputation": 36449, "user_id": 2453699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0b0a49d160baf7d95b81d798ea0cb65?s=128&d=identicon&r=PG", "display_name": "vee", "link": "https://stackoverflow.com/users/2453699/vee"}, "reply_to_user": {"reputation": 13500, "user_id": 1401975, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1LLiP.png?s=128&g=1", "display_name": "HamZa", "link": "https://stackoverflow.com/users/1401975/hamza"}, "edited": false, "score": 1, "creation_date": 1423644681, "post_id": 28449868, "comment_id": 45227982, "body": "Added a solution. Thanks @HamZa for pointing that out.  I misread the last part."}], "tags": [], "owner": {"reputation": 36449, "user_id": 2453699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0b0a49d160baf7d95b81d798ea0cb65?s=128&d=identicon&r=PG", "display_name": "vee", "link": "https://stackoverflow.com/users/2453699/vee"}, "is_accepted": false, "score": 8, "last_activity_date": 1423644661, "last_edit_date": 1423644661, "creation_date": 1423644065, "answer_id": 28449868, "question_id": 28449761, "link": "https://stackoverflow.com/questions/28449761/replace-html-tags-with-whitespaces/28449868#28449868", "title": "Replace html tags with whitespaces", "body": "<p>I would recommend parsing the HTML and extracting the text.  <a href=\"http://www.nokogiri.org/\" rel=\"noreferrer\">Nokogiri</a>, a very well known gem should help solve this with ease:</p>\n\n<pre><code>require 'nokogiri'\n=&gt; false\n&gt; str = \"&lt;span&gt;Class GOesHere&lt;/span&gt;&lt;div&gt;SomeExtra Tag&lt;/div&gt;\"\n=&gt; \"&lt;span&gt;Class GOesHere&lt;/span&gt;&lt;div&gt;SomeExtra Tag&lt;/div&gt;\"\n&gt; Nokogiri::HTML(str).text\n=&gt; \"Class GOesHereSomeExtra Tag\"\n</code></pre>\n\n<p><strong>Update</strong>:</p>\n\n<p>This will search all text nodes in the html and map the text content.  The resultant array is concatenated with a space separator:</p>\n\n<pre><code>&gt; Nokogiri::HTML(str).xpath('//text()').map(&amp;:text).join(' ')\n=&gt; \"Class GOesHere SomeExtra Tag\"\n</code></pre>\n"}], "owner": {"reputation": 2119, "user_id": 1411047, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/673ade5df575380a2e2cd5a0c1503784?s=128&d=identicon&r=PG", "display_name": "Avdept", "link": "https://stackoverflow.com/users/1411047/avdept"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2178, "favorite_count": 1, "accepted_answer_id": 28449833, "answer_count": 3, "score": 2, "last_activity_date": 1423644661, "creation_date": 1423643596, "question_id": 28449761, "link": "https://stackoverflow.com/questions/28449761/replace-html-tags-with-whitespaces", "title": "Replace html tags with whitespaces", "body": "<p>I'm using method <code>strip_tags</code> which removes all tags from my string, however after removing some of my text lacking of whitespaces, especially where 1 tag ends and another begins. Is there any way to insert whitespaces into place where tags were removed? Look for ex. below</p>\n\n<pre><code>str\n =&gt; \"&lt;span&gt;Class GOesHere&lt;/span&gt;&lt;div&gt;SomeExtra Tag&lt;/div&gt;\" \n\nhelper.strip_tags(str)\n =&gt; \"Class GOesHereSomeExtra Tag\" \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "gem"], "comments": [{"owner": {"reputation": 4956, "user_id": 108000, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ca0b18ec9e11dc777b2b8084fe5d5f90?s=128&d=identicon&r=PG", "display_name": "Sam Kong", "link": "https://stackoverflow.com/users/108000/sam-kong"}, "edited": false, "score": 0, "creation_date": 1423729415, "post_id": 28448744, "comment_id": 45269092, "body": "This helps: <a href=\"http://blog.func-i.com/post/41108636143/bundler-gets-better-local-gem-support\" rel=\"nofollow noreferrer\">blog.func-i.com/post/41108636143/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 365, "user_id": 4519092, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ErtNqDUxxag/AAAAAAAAAAI/AAAAAAAAABs/A2oiRZfUUs0/photo.jpg?sz=128", "display_name": "GeekRiky", "link": "https://stackoverflow.com/users/4519092/geekriky"}, "is_accepted": false, "score": 0, "last_activity_date": 1423639765, "creation_date": 1423639765, "answer_id": 28448778, "question_id": 28448744, "link": "https://stackoverflow.com/questions/28448744/how-to-specify-version-of-a-local-gem-in-gemfile/28448778#28448778", "title": "How to specify version of a local gem in Gemfile?", "body": "<pre><code>In Gemfile:\ngem 'mygem', path: '~/shared/mygem', branch: 'branch name'\n</code></pre>\n\n<p>Or use ref: 'commit number' if your version is in a specific commit</p>\n"}, {"comments": [{"owner": {"reputation": 4956, "user_id": 108000, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ca0b18ec9e11dc777b2b8084fe5d5f90?s=128&d=identicon&r=PG", "display_name": "Sam Kong", "link": "https://stackoverflow.com/users/108000/sam-kong"}, "edited": false, "score": 0, "creation_date": 1423727469, "post_id": 28449247, "comment_id": 45268146, "body": "But for the local gem, bundler can find the latest version but not the past versions. When I speficy the version to &#39;0.0.3&#39;, the bundler says &quot;Could not find gem &#39;mygem (= 0.0.3) ruby&#39; in source at ../shared/mygem. Source contains &#39;mygem&#39; at: 0.0.4&quot;."}, {"owner": {"reputation": 53, "user_id": 4488966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f1b757c76d86afdd8a03e038dcb15cc?s=128&d=identicon&r=PG", "display_name": "ckreon", "link": "https://stackoverflow.com/users/4488966/ckreon"}, "reply_to_user": {"reputation": 4956, "user_id": 108000, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ca0b18ec9e11dc777b2b8084fe5d5f90?s=128&d=identicon&r=PG", "display_name": "Sam Kong", "link": "https://stackoverflow.com/users/108000/sam-kong"}, "edited": false, "score": 0, "creation_date": 1423737804, "post_id": 28449247, "comment_id": 45274039, "body": "If I understand you correctly, it should not be able to find 0.0.3 because you have 0.0.4 installed. Do you have 0.0.3? If so, maybe you need to do something like: <code>gem &#39;mygem&#39;, &#39;= 0.0.3&#39;, :path =&gt; &#39;path&#47;to&#47;gemfolder&#47;&#39;</code> - to specify the folder 0.0.3 is in. It seems like rails expects a directory as opposed to the file path."}], "tags": [], "owner": {"reputation": 53, "user_id": 4488966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f1b757c76d86afdd8a03e038dcb15cc?s=128&d=identicon&r=PG", "display_name": "ckreon", "link": "https://stackoverflow.com/users/4488966/ckreon"}, "is_accepted": false, "score": 1, "last_activity_date": 1423641523, "creation_date": 1423641523, "answer_id": 28449247, "question_id": 28448744, "link": "https://stackoverflow.com/questions/28448744/how-to-specify-version-of-a-local-gem-in-gemfile/28449247#28449247", "title": "How to specify version of a local gem in Gemfile?", "body": "<p>To specify versions, or more specifically, a range of versions, you use operators like you would in ruby code.</p>\n\n<p>The operators should be:</p>\n\n<p><code>&gt;=</code> , <code>&lt;=</code> , or <code>~&gt;</code></p>\n\n<p>Ranges allow that it may not be possible to match the exact version number (especially true for Windows-specific gem builds).</p>\n\n<p>The pessimistic operator (<code>~&gt;</code>) is often considered the best choice, as it stays within the same dot-range as the build you are using (1.0.4 would never reach 1.1.0, but could use anything between).</p>\n\n<p>An example of the gemfile syntax:</p>\n\n<pre><code>gem 'sinatra', '~&gt; 1.4.4'\n</code></pre>\n\n<p>or</p>\n\n<pre><code>gem 'uglifier', '&gt;= 1.3.0'\n</code></pre>\n"}], "owner": {"reputation": 4956, "user_id": 108000, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ca0b18ec9e11dc777b2b8084fe5d5f90?s=128&d=identicon&r=PG", "display_name": "Sam Kong", "link": "https://stackoverflow.com/users/108000/sam-kong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 944, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1423728321, "creation_date": 1423639633, "last_edit_date": 1495540170, "question_id": 28448744, "link": "https://stackoverflow.com/questions/28448744/how-to-specify-version-of-a-local-gem-in-gemfile", "title": "How to specify version of a local gem in Gemfile?", "body": "<p>I have a local gem and a rails app that uses the local gem.</p>\n\n<p>Is there a way to specify a specific version of the gem?</p>\n\n<p>I know that 'rake install' generates *.gem in /pkg directory of the gem. But I don't know how to use it.</p>\n\n<p>Here's how I use it now:</p>\n\n<pre><code>In Gemfile:\ngem 'mygem', path: '~/shared/mygem'\n</code></pre>\n\n<p>Thanks.</p>\n\n<p>Sam</p>\n\n<p>Edit:</p>\n\n<p>I think my question is almost a duplicate of <a href=\"https://stackoverflow.com/questions/6220664/how-to-tell-the-gem-file-to-use-a-specific-local-copy-of-a-gem\">How to tell the Gem File to use a specific local copy of a gem</a>.</p>\n\n<p>I just need to know how to specify a specific version of a local gem.</p>\n"}, {"tags": ["ruby", "file", "io", "eof"], "comments": [{"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 1, "creation_date": 1423637524, "post_id": 28448114, "comment_id": 45224854, "body": "can you post how are you counting the number of lines?"}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1423639270, "post_id": 28448114, "comment_id": 45225553, "body": "You could simply add 1 (<code>File.foreach(&#39;file.txt&#39;).count + 1</code>) to match the text editor&#39;s last line number."}, {"owner": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 0, "creation_date": 1423640681, "post_id": 28448114, "comment_id": 45226153, "body": "There is no 21&#39;st line. What do you see in editor as a 21&#39;st line is a <code>\\n</code> at the end of 20&#39;s line. So, the right answer is: there are 20 lines in this file."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1423681623, "post_id": 28448114, "comment_id": 45250636, "body": "It&#39;s 21 lines only if you count the red one."}], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 2, "last_activity_date": 1423668485, "last_edit_date": 1423668485, "creation_date": 1423642013, "answer_id": 28449358, "question_id": 28448114, "link": "https://stackoverflow.com/questions/28448114/ruby-count-lines-in-file-including-last-lineempty/28449358#28449358", "title": "Ruby Count lines in file including last line(empty)", "body": "<p>Interesting question (although your example file is cumbersome). Your editor shows a 21st line because the 20th line <em>ends</em> with a newline character. Without a trailing newline character, your editor would show 20 lines.</p>\n\n<p>Here's a simpler example:</p>\n\n<pre><code>a = \"foo\\nbar\"\nb = \"baz\\nqux\\n\"\n</code></pre>\n\n<p>A text editor would show:</p>\n\n<pre><code># file a\n1 foo\n2 bar\n\n# file b\n1 baz\n2 qux\n3\n</code></pre>\n\n<p>Ruby however sees 2 lines in either cases:</p>\n\n<pre><code>a.lines       #=&gt; [\"foo\\n\", \"bar\"]\na.lines.count #=&gt; 2\n\nb.lines       #=&gt; [\"baz\\n\", \"qux\\n\"]\nb.lines.count #=&gt; 2\n</code></pre>\n\n<p>You could trick Ruby into recognizing the trailing newline by adding an arbitrary character:</p>\n\n<pre><code>(a + '_').lines       #=&gt; [\"foo\\n\", \"bar_\"]\n(a + '_').lines.count #=&gt; 2\n\n(b + '_').lines       #=&gt; [\"baz\\n\", \"qux\\n\", \"_\"]\n(b + '_').lines.count #=&gt; 3\n</code></pre>\n\n<p>Or you could use a <code>Regexp</code> that matches either end of line (<code>$</code>) or end of string (<code>\\Z</code>):</p>\n\n<pre><code>a.scan(/$|\\Z/)       #=&gt; [\"\", \"\"]\na.scan(/$|\\Z/).count #=&gt; 2\n\nb.scan(/$|\\Z/)       #=&gt; [\"\", \"\", \"\"]\nb.scan(/$|\\Z/).count #=&gt; 3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 354, "user_id": 2289501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/647f15f7859430b4537a3350d074434b?s=128&d=identicon&r=PG&f=1", "display_name": "reguilon", "link": "https://stackoverflow.com/users/2289501/reguilon"}, "is_accepted": false, "score": 1, "last_activity_date": 1423644951, "creation_date": 1423644951, "answer_id": 28450117, "question_id": 28448114, "link": "https://stackoverflow.com/questions/28448114/ruby-count-lines-in-file-including-last-lineempty/28450117#28450117", "title": "Ruby Count lines in file including last line(empty)", "body": "<p>Ruby <code>lines</code> method doesn't count the last empty line.\nTo trick, you can add an arbitrary character at the end of your stream.</p>\n\n<p>Ruby <code>lines</code> returns 2 lines for this example:</p>\n\n<pre><code>1 Hello\n2 World\n3 \n</code></pre>\n\n<p>Instead, it returns 3 lines in this case</p>\n\n<pre><code>1 Hello\n2 World\n3 *\n</code></pre>\n"}], "owner": {"reputation": 876, "user_id": 1178968, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d574942e2627e5a01262657dda8a299?s=128&d=identicon&r=PG", "display_name": "acrogenesis", "link": "https://stackoverflow.com/users/1178968/acrogenesis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 908, "favorite_count": 0, "accepted_answer_id": 28449358, "answer_count": 2, "score": 0, "last_activity_date": 1423668485, "creation_date": 1423637095, "question_id": 28448114, "link": "https://stackoverflow.com/questions/28448114/ruby-count-lines-in-file-including-last-lineempty", "title": "Ruby Count lines in file including last line(empty)", "body": "<p>I'm trying to count the lines of a file with ruby but I can't get either <code>IO</code> or <code>File</code> to count the last line.\nWhat do I mean by last line?\nHere's a screenshot of Atom editor getting that last line\n<img src=\"https://i.stack.imgur.com/cg8Tj.png\" alt=\"enter image description here\"></p>\n\n<p>Ruby returns 20 lines, I need 21 lines. Here is such file\n<a href=\"https://copy.com/cJbiAS4wxjsc9lWI\" rel=\"nofollow noreferrer\">https://copy.com/cJbiAS4wxjsc9lWI</a></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 13948, "user_id": 1644531, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0eb5bf6995005de4e15ed6c0042f7f0b?s=128&d=identicon&r=PG", "display_name": "freemanoid", "link": "https://stackoverflow.com/users/1644531/freemanoid"}, "edited": false, "score": 0, "creation_date": 1423641115, "post_id": 28448072, "comment_id": 45226323, "body": "I don&#39;t think this is reasonable. As you know, #new is a constructor. Constructor always return an instance of the class. So your idea is pointless."}], "answers": [{"tags": [], "owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "is_accepted": false, "score": 0, "last_activity_date": 1423639553, "creation_date": 1423639553, "answer_id": 28448719, "question_id": 28448072, "link": "https://stackoverflow.com/questions/28448072/how-to-return-a-value-using-only-instance-name/28448719#28448719", "title": "How to return a value using only instance name", "body": "<p>Did you mean this?:</p>\n\n<pre><code>Test = Struct.new('Test', :a, :b)\nexample = Test.new(1, 2)\nexample.instance_eval do\n  def give_me_some_stuff\n    a + b\n  end\nend\n\nexample.give_me_some_stuff #=&gt; 3\nanother_example = Test.new(1, 2)\n# =&gt; #&lt;struct Struct::Test a=1, b=2&gt;\nanother_example.give_me_some_stuff\n#=&gt; NoMethodError: undefined method `give_me_some_stuff' for #&lt;struct Struct::Test a=1, b=2&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 149, "user_id": 1899395, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/aa26e5ca9300ad90a37039de809bdd68?s=128&d=identicon&r=PG", "display_name": "Corey", "link": "https://stackoverflow.com/users/1899395/corey"}, "edited": false, "score": 0, "creation_date": 1423666696, "post_id": 28448954, "comment_id": 45241306, "body": "This works for a string but it won&#39;t return the value of an instance method if  I put it in there. I&#39;ve updated the question with the exact code I&#39;m trying to get to pass."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 149, "user_id": 1899395, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/aa26e5ca9300ad90a37039de809bdd68?s=128&d=identicon&r=PG", "display_name": "Corey", "link": "https://stackoverflow.com/users/1899395/corey"}, "edited": false, "score": 0, "creation_date": 1423667029, "post_id": 28448954, "comment_id": 45241518, "body": "@Corey <code>inspect</code> is supposed to return a string. In your example, returning <code>@contents.inspect</code> should work."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 2, "last_activity_date": 1423640372, "creation_date": 1423640372, "answer_id": 28448954, "question_id": 28448072, "link": "https://stackoverflow.com/questions/28448072/how-to-return-a-value-using-only-instance-name/28448954#28448954", "title": "How to return a value using only instance name", "body": "<p><code>example</code> always returns your object. If it would return another object, <code>example.give_me_some_stuff</code> would not work anymore.</p>\n\n<p>Maybe you're looking for <a href=\"http://ruby-doc.org/core-2.2.0/Object.html#method-i-inspect\" rel=\"nofollow\"><code>inspect</code></a>. IRB calls <code>inspect</code> when printing your object:</p>\n\n<pre><code>class Test\n  def inspect\n    \"I am Test\"\n  end\nend\n</code></pre>\n\n<p>IRB session:</p>\n\n<pre><code>irb(main):001:0&gt; example = Test.new\n=&gt; I am Test\nirb(main):002:0&gt; example\n=&gt; I am Test\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 1899395, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/aa26e5ca9300ad90a37039de809bdd68?s=128&d=identicon&r=PG", "display_name": "Corey", "link": "https://stackoverflow.com/users/1899395/corey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1423666667, "creation_date": 1423636911, "last_edit_date": 1423666667, "question_id": 28448072, "link": "https://stackoverflow.com/questions/28448072/how-to-return-a-value-using-only-instance-name", "title": "How to return a value using only instance name", "body": "<p>I have a class called <code>Test</code>. I've created an instance:</p>\n\n<pre><code>example = Test.new\n</code></pre>\n\n<p>I want to return a value when I type this:</p>\n\n<pre><code>example\n</code></pre>\n\n<p>I know how to return a value when typing:</p>\n\n<pre><code>example.give_me_some_stuff\n</code></pre>\n\n<p>But I can't figure out how to override just the instance name and return some value, preferably the result of a method inside of the class.</p>\n\n<p>EDIT:</p>\n\n<p>This works for a method that returns a string, but I can't return an instance variable from the instance of the class. For example here is the test I'm trying to make work:</p>\n\n<pre><code>  def test_push\n    stack = Stack.new\n    stack.push(10)\n    binding.pry\n    refute stack.empty?\n  end\n</code></pre>\n\n<p>And here is my class:</p>\n\n<pre><code>class Stack\n  attr_accessor :contents\n\n  def inspect\n    @contents\n  end\n\n  def initialize\n     @contents = []\n  end\n\n  def push(n)\n    @contents &lt;&lt; n\n  end\n\nend\n</code></pre>\n\n<p>In the test my object comes back as:</p>\n\n<pre><code>#&lt;Stack:0x007f8cd9051938 @contents=[10]&gt;\n</code></pre>\n\n<p>When I want it to return just the value of @contents.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "arrays"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1423684624, "post_id": 28447851, "comment_id": 45252410, "body": "I don&#39;t understand. If you know <code>sample</code> contains a pair <code>[&quot;Jerry&quot;,x]</code> there is no point in extracting <code>&quot;Jerry&quot;</code>. If you want to know if there is pair whose first element is <code>&quot;Jerry&quot;</code>, you could use <code>sample.map(&amp;:first).include?(&quot;Jerry&quot;)</code>. If you want to extract a pair whose first element is <code>&quot;Jerry&quot;</code>, if there is one, <code>then sample.find { |s,_| s == &quot;Jerry&quot; }</code>. Which is it? Please clarify your question."}], "answers": [{"comments": [{"owner": {"reputation": 281, "user_id": 2893206, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2c1af82cc680a7b56b46ab93a9c65bf4?s=128&d=identicon&r=PG&f=1", "display_name": "ramya", "link": "https://stackoverflow.com/users/2893206/ramya"}, "edited": false, "score": 0, "creation_date": 1423637079, "post_id": 28447906, "comment_id": 45224682, "body": "Thanks. However both does not solve my problem if I want Jerry."}, {"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "reply_to_user": {"reputation": 281, "user_id": 2893206, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2c1af82cc680a7b56b46ab93a9c65bf4?s=128&d=identicon&r=PG&f=1", "display_name": "ramya", "link": "https://stackoverflow.com/users/2893206/ramya"}, "edited": false, "score": 0, "creation_date": 1423637315, "post_id": 28447906, "comment_id": 45224773, "body": "@ramya I made edit for namewise seach. please check. I didnot do that at first as your question mentioned only to find Tom."}, {"owner": {"reputation": 281, "user_id": 2893206, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2c1af82cc680a7b56b46ab93a9c65bf4?s=128&d=identicon&r=PG&f=1", "display_name": "ramya", "link": "https://stackoverflow.com/users/2893206/ramya"}, "edited": false, "score": 0, "creation_date": 1423637671, "post_id": 28447906, "comment_id": 45224917, "body": "Thanks. I want Tom based on second element of [&quot;Tom&quot;,1 ] it is like return &quot;Tom&quot; if i == 1. Please re-read my edited question."}, {"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "reply_to_user": {"reputation": 281, "user_id": 2893206, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2c1af82cc680a7b56b46ab93a9c65bf4?s=128&d=identicon&r=PG&f=1", "display_name": "ramya", "link": "https://stackoverflow.com/users/2893206/ramya"}, "edited": false, "score": 0, "creation_date": 1423637809, "post_id": 28447906, "comment_id": 45224977, "body": "@ramya I have edited it accordingly. Hope it helps :)"}, {"owner": {"reputation": 281, "user_id": 2893206, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2c1af82cc680a7b56b46ab93a9c65bf4?s=128&d=identicon&r=PG&f=1", "display_name": "ramya", "link": "https://stackoverflow.com/users/2893206/ramya"}, "edited": false, "score": 0, "creation_date": 1423637970, "post_id": 28447906, "comment_id": 45225028, "body": "It works. Thanks :).  I am hunting for still better approach. Please refer the last answer."}], "tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 1, "last_activity_date": 1423637788, "last_edit_date": 1423637788, "creation_date": 1423636236, "answer_id": 28447906, "question_id": 28447851, "link": "https://stackoverflow.com/questions/28447851/ruby-1-9-selecting-element-from-2d-array/28447906#28447906", "title": "Ruby 1.9 - Selecting element from 2D array", "body": "<p>If you want to get all names, you can try this:</p>\n\n<pre><code>sample.collect(&amp;:first)\n# =&gt; [\"Tom\", \"Jerry\"]\n</code></pre>\n\n<p>However, as in your question you just want the first element's name, you can try this:</p>\n\n<pre><code>sample.first.first\n# =&gt; \"Tom\"\n</code></pre>\n\n<p>If your search depend on name \"Tom\", then:</p>\n\n<pre><code>sample.detect{|i| i.first == \"Tom\"}.first\n# =&gt; \"Tom\"\n</code></pre>\n\n<p>Returning name on basis of second element's value:</p>\n\n<pre><code>sample.detect{|i| i[1] == 1}.first\n# =&gt; \"Tom\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 281, "user_id": 2893206, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2c1af82cc680a7b56b46ab93a9c65bf4?s=128&d=identicon&r=PG&f=1", "display_name": "ramya", "link": "https://stackoverflow.com/users/2893206/ramya"}, "edited": false, "score": 0, "creation_date": 1423637342, "post_id": 28447935, "comment_id": 45224786, "body": "Thanks. I request to read my question once again. It is 2D array and in [&quot;Tom&quot;, 1 ] I want to retrieve Tom based on 1. The solution you have given is for 1D array."}], "tags": [], "owner": {"reputation": 36449, "user_id": 2453699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0b0a49d160baf7d95b81d798ea0cb65?s=128&d=identicon&r=PG", "display_name": "vee", "link": "https://stackoverflow.com/users/2453699/vee"}, "is_accepted": false, "score": 0, "last_activity_date": 1423637514, "last_edit_date": 1423637514, "creation_date": 1423636345, "answer_id": 28447935, "question_id": 28447851, "link": "https://stackoverflow.com/questions/28447851/ruby-1-9-selecting-element-from-2d-array/28447935#28447935", "title": "Ruby 1.9 - Selecting element from 2D array", "body": "<p>Use <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-find\" rel=\"nofollow\"><code>Enumerable#find</code></a> on flattened input <code>sample</code>:</p>\n\n<pre><code>&gt; sample  = [[\"Tom\",1],[\"Jerry\",2]]\n&gt; sample.flatten.find { |name| name == 'Tom' }\n=&gt; \"Tom\"\n</code></pre>\n\n<p>Updated as per OP's comment:</p>\n\n<pre><code>&gt; sample.find { |name, id| id == 1 }.first\n=&gt; \"Tom\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "is_accepted": false, "score": 0, "last_activity_date": 1423636541, "creation_date": 1423636541, "answer_id": 28447983, "question_id": 28447851, "link": "https://stackoverflow.com/questions/28447851/ruby-1-9-selecting-element-from-2d-array/28447983#28447983", "title": "Ruby 1.9 - Selecting element from 2D array", "body": "<p>This should also work for you </p>\n\n<pre><code>sample.flatten.first \n</code></pre>\n\n<p>or</p>\n\n<pre><code>sample.flatten[0]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 281, "user_id": 2893206, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2c1af82cc680a7b56b46ab93a9c65bf4?s=128&d=identicon&r=PG&f=1", "display_name": "ramya", "link": "https://stackoverflow.com/users/2893206/ramya"}, "edited": false, "score": 0, "creation_date": 1423637852, "post_id": 28448153, "comment_id": 45224989, "body": "Thanku so much. It works :).  I understand time complexity is O(1) when searching in Hash.  With respect to space complexity, is it okay to convert 2D array to Hash and then select??"}, {"owner": {"reputation": 36449, "user_id": 2453699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0b0a49d160baf7d95b81d798ea0cb65?s=128&d=identicon&r=PG", "display_name": "vee", "link": "https://stackoverflow.com/users/2453699/vee"}, "edited": false, "score": 0, "creation_date": 1423638232, "post_id": 28448153, "comment_id": 45225134, "body": "This is going to fail if there is a third element in sample: <code>[&quot;Tom&quot;,3]</code> and that you want to find this &quot;Tom&quot; with &quot;3&quot;.  You might lose some data due to duplicate keys when calling <code>Hash[sample]</code>.  If your input data has unique keys, then this is a perfect solution!"}, {"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1423638245, "post_id": 28448153, "comment_id": 45225142, "body": "If you look at the source code of how <code>key(value</code> is implemented which loops and run each element(key-value pair) of the hash. It&#39;s same as doing <code>find</code>/<code>detect</code>(but rather faster since method is written in C) on an array and then taking first element of the result."}, {"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "reply_to_user": {"reputation": 36449, "user_id": 2453699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0b0a49d160baf7d95b81d798ea0cb65?s=128&d=identicon&r=PG", "display_name": "vee", "link": "https://stackoverflow.com/users/2453699/vee"}, "edited": false, "score": 0, "creation_date": 1423638404, "post_id": 28448153, "comment_id": 45225206, "body": "@vee : You&#39;re right. Added that in the note. Thanks."}], "tags": [], "owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "is_accepted": false, "score": 1, "last_activity_date": 1423638382, "last_edit_date": 1423638382, "creation_date": 1423637258, "answer_id": 28448153, "question_id": 28447851, "link": "https://stackoverflow.com/questions/28447851/ruby-1-9-selecting-element-from-2d-array/28448153#28448153", "title": "Ruby 1.9 - Selecting element from 2D array", "body": "<pre><code>sample  = [[\"Tom\",1],[\"Jerry\",2]]\nsample_hash = Hash[sample]\n</code></pre>\n\n<p>Now you can (given the condition that keys, i.e. first elements are unique, also if values are repeated then first key will be the output of matching value) -</p>\n\n<ol>\n<li><p>use <a href=\"http://www.ruby-doc.org/core-2.1.1/Hash.html#method-i-key\" rel=\"nofollow\"><code>Hash#key(value)</code></a> for Ruby 1.9 or above:</p>\n\n<p><code>sample_hash.key(1) #=&gt; \"Tom\"</code></p></li>\n<li><p>use <a href=\"http://ruby-doc.org/core-1.8.7/Hash.html#method-i-index\" rel=\"nofollow\"><code>Hash#index(value)</code></a> for Ruby 1.8:</p>\n\n<p><code>sample_hash.index(1) #=&gt; \"Tom\"</code></p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 11718, "user_id": 1827631, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/I24JN.png?s=128&g=1", "display_name": "hirolau", "link": "https://stackoverflow.com/users/1827631/hirolau"}, "is_accepted": false, "score": 0, "last_activity_date": 1423641455, "creation_date": 1423641455, "answer_id": 28449224, "question_id": 28447851, "link": "https://stackoverflow.com/questions/28447851/ruby-1-9-selecting-element-from-2d-array/28449224#28449224", "title": "Ruby 1.9 - Selecting element from 2D array", "body": "<p>The best way is to use a hash, but if you wanna keep it as a list then look at the function <code>rassoc</code></p>\n\n<pre><code>sample  = [[\"Tom\",1],[\"Jerry\",2]]\n\np sample.rassoc(2) #=&gt; [\"Jerry\",2]\np sample.rassoc(2).first #=&gt; \"Jerry\"\n\njerry_item,_ = sample.rassoc(2)\np jerry_item =&gt; \"Jerry\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 0, "last_activity_date": 1423644835, "creation_date": 1423644835, "answer_id": 28450086, "question_id": 28447851, "link": "https://stackoverflow.com/questions/28447851/ruby-1-9-selecting-element-from-2d-array/28450086#28450086", "title": "Ruby 1.9 - Selecting element from 2D array", "body": "<blockquote>\n  <p>If there is any better way to fetch element, please help.</p>\n</blockquote>\n\n<pre><code>sample.select { |i| i if i[1] == 2 }\n#=&gt; [[\"Jerry\", 2]]\n</code></pre>\n\n<p>can be written as:</p>\n\n<pre><code>sample.select { |i| i[1] == 2 }\n#=&gt; [[\"Jerry\", 2]]\n</code></pre>\n\n<p>Note that <a href=\"http://www.ruby-doc.org/core-2.2.0/Enumerable.html#method-i-select\" rel=\"nofollow\"><code>select</code></a> returns an array. To find the first element, use <a href=\"http://www.ruby-doc.org/core-2.2.0/Enumerable.html#method-i-find\" rel=\"nofollow\"><code>find</code></a>:</p>\n\n<pre><code>sample.find { |i| i[1] == 2 }\n#=&gt; [\"Jerry\", 2]\n</code></pre>\n\n<p>You still have to call <code>[0]</code> or <code>.first</code> to get <code>\"Jerry\"</code>. It might be cleaner to use a <a href=\"http://www.ruby-doc.org/core-2.2.0/Hash.html\" rel=\"nofollow\"><code>Hash</code></a> (or a custom class) for structured data:</p>\n\n<pre><code>sample = [{name: 'Tom', id: 1}, {name: 'Jerry', id: 2}]\nsample.find { |h| h[:id] == 2 }[:name]\n#=&gt; \"Jerry\"\n</code></pre>\n\n<p>Using another hash to store these objects by their <code>id</code> attribute is another option:</p>\n\n<pre><code>sample_by_id = sample.map { |h| [h[:id], h] }.to_h\n#=&gt; {1=&gt;{:name=&gt;\"Tom\", :id=&gt;1}, 2=&gt;{:name=&gt;\"Jerry\", :id=&gt;2}}\nsample_by_id[1][:name]\n#=&gt; \"Jerry\"\n</code></pre>\n"}], "owner": {"reputation": 281, "user_id": 2893206, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2c1af82cc680a7b56b46ab93a9c65bf4?s=128&d=identicon&r=PG&f=1", "display_name": "ramya", "link": "https://stackoverflow.com/users/2893206/ramya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1784, "favorite_count": 2, "answer_count": 6, "score": 1, "last_activity_date": 1423644835, "creation_date": 1423635976, "last_edit_date": 1423637425, "question_id": 28447851, "link": "https://stackoverflow.com/questions/28447851/ruby-1-9-selecting-element-from-2d-array", "title": "Ruby 1.9 - Selecting element from 2D array", "body": "<p>Assume I have following 2D array </p>\n\n<pre><code>sample  = [[\"Tom\",1],[\"Jerry\",2]]\n</code></pre>\n\n<p>I would like to fetch \"Jerry\" from the array.\nCurrently I am using</p>\n\n<pre><code>sample.select{|i| i if i[1] == 2}[0][0]\n</code></pre>\n\n<p>I also tried</p>\n\n<pre><code>sample.select{|i| i if i[1] == 2}.first.first # Returns \"Jerry\" - OK\nsample.select{|i| i[0] if i[1] == 2}          # Returns [\"Jerry\",2] - NOT OK\n</code></pre>\n\n<p>If there is any better way to fetch element, please help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "elasticsearch"], "answers": [{"tags": [], "owner": {"reputation": 699, "user_id": 1571583, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/eR0Ux.jpg?s=128&g=1", "display_name": "Manolis", "link": "https://stackoverflow.com/users/1571583/manolis"}, "is_accepted": false, "score": 0, "last_activity_date": 1423674653, "creation_date": 1423674653, "answer_id": 28460288, "question_id": 28447821, "link": "https://stackoverflow.com/questions/28447821/score-by-closest-match-in-elasticsearch/28460288#28460288", "title": "Score by closest match in Elasticsearch", "body": "<p>Elasticsearch returns by default the results sorted by relevance (i.e the score of each document).</p>\n\n<p>The way that this score is calculated is based on a set of basic rules combined with some query-specific rules.</p>\n\n<p>The standard similarity algorithm used in Elasticsearch is known as term frequency/inverse document frequency, or TF/IDF, which takes the following factors into account:</p>\n\n<ul>\n<li>Term frequency: How often does the term appear in the field? The more\noften, the more relevant. A field containing five mentions of the\nsame term is more likely to be relevant than a field containing just\none mention. </li>\n<li>Inverse document frequency: How often does each term\nappear in the index? The more often, the less relevant. Terms that\nappear in many documents have a lower weight than more-uncommon\nterms. </li>\n<li>Field-length norm: How long is the field? The longer it is, the\nless likely it is that words in the field will be relevant. A term\nappearing in a short title field carries more weight than the same term appearing in a long content field.</li>\n</ul>\n\n<p>Individual queries may combine the TF/IDF score with other factors such as the term proximity in phrase queries, or term similarity in fuzzy queries.</p>\n\n<p>For a complete description of relevance please refer here: <a href=\"http://www.elasticsearch.org/guide/en/elasticsearch/guide/current/sorting.html\" rel=\"nofollow\">http://www.elasticsearch.org/guide/en/elasticsearch/guide/current/sorting.html</a></p>\n"}], "owner": {"reputation": 575, "user_id": 497646, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/0b66d7eea76eca3623b6e5fe4f05536d?s=128&d=identicon&r=PG", "display_name": "Callum Jones", "link": "https://stackoverflow.com/users/497646/callum-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 684, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423674653, "creation_date": 1423635894, "question_id": 28447821, "link": "https://stackoverflow.com/questions/28447821/score-by-closest-match-in-elasticsearch", "title": "Score by closest match in Elasticsearch", "body": "<p>I have a <code>Elasticsearch::Model</code> on a <code>ActiveRecord::Base</code> model that looks like this</p>\n\n<pre><code>class ArtistGroup &lt; ActiveRecord::Base\n  include Elasticsearch::Model\n  include Elasticsearch::Model::Callbacks\n\n  FT_REDIS_KEY = \"agft\"\n  has_many :artists\n\n  settings index: { number_of_shards: 5 } do\n    mappings dynamic: 'false' do\n      indexes :normalized_name, analyzer: 'english'\n      indexes :name, analyzer: 'english'\n    end\n  end\n\n  def as_indexed_json(options={})\n    as_json(only: ['normalized_name', 'id', 'name'])\n  end\n....\n</code></pre>\n\n<p>When I search by <code>.search('haim')</code> I want the document with name: \"Haim\" to be returned first before others like \"Danielle Haim of Haim\", how can I control ES querying to score by closest match?</p>\n"}, {"tags": ["ruby", "apache", "centos", "chef-infra", "chef-recipe"], "answers": [{"comments": [{"owner": {"reputation": 625, "user_id": 2112750, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/788bc1362ee35201192f1b750b53f983?s=128&d=identicon&r=PG", "display_name": "Ste-3PO", "link": "https://stackoverflow.com/users/2112750/ste-3po"}, "edited": false, "score": 0, "creation_date": 1423638789, "post_id": 28448413, "comment_id": 45225365, "body": "Ahh ok, so as it is going to be a basic apache server, which of those options should I leave in?"}, {"owner": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "reply_to_user": {"reputation": 625, "user_id": 2112750, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/788bc1362ee35201192f1b750b53f983?s=128&d=identicon&r=PG", "display_name": "Ste-3PO", "link": "https://stackoverflow.com/users/2112750/ste-3po"}, "edited": false, "score": 0, "creation_date": 1423639668, "post_id": 28448413, "comment_id": 45225728, "body": "Sorry, I don&#39;t know. What do you want to achieve and how does the <code>vhost.erb</code> in the cookbook resp. <code>&#47;etc&#47;httpd&#47;conf.d&#47;stedelahunty2.conf</code> on the node look like?"}, {"owner": {"reputation": 625, "user_id": 2112750, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/788bc1362ee35201192f1b750b53f983?s=128&d=identicon&r=PG", "display_name": "Ste-3PO", "link": "https://stackoverflow.com/users/2112750/ste-3po"}, "edited": false, "score": 0, "creation_date": 1423639974, "post_id": 28448413, "comment_id": 45225847, "body": "I copied and pasted from another example into my recipe and it seems to have worked. Unfortunately this hasn&#39;t given me the knowledge to fix my solution in the future but it&#39;s working for now. Appreciate you trying to help. Thank you"}, {"owner": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "reply_to_user": {"reputation": 625, "user_id": 2112750, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/788bc1362ee35201192f1b750b53f983?s=128&d=identicon&r=PG", "display_name": "Ste-3PO", "link": "https://stackoverflow.com/users/2112750/ste-3po"}, "edited": false, "score": 0, "creation_date": 1423640298, "post_id": 28448413, "comment_id": 45225992, "body": "What I can read from the error message was that the argument supplied to the <a href=\"http://httpd.apache.org/docs/2.2/mod/mod_authz_host.html#order\" rel=\"nofollow noreferrer\">Order</a> directive was not valid. You can at least read the docs in order to understand, what it is doing. I can&#39;t say, if <code>Order</code> hat zero or more than one argument in you previously generated template."}, {"owner": {"reputation": 3973, "user_id": 4070979, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5a40b217933f720d09ae107a2b6d66cb?s=128&d=identicon&r=PG&f=1", "display_name": "Tejay Cardon", "link": "https://stackoverflow.com/users/4070979/tejay-cardon"}, "edited": false, "score": 0, "creation_date": 1423669393, "post_id": 28448413, "comment_id": 45243170, "body": "As StephenKing said, this is an apache problem, not a chef problem.  Perhaps post your stedelahunty2.conf file in a new question and tag that question with <code>apache</code> and see if the apache folks can help you understand why it was bad.  If you post the .erb file we may be able to help you understand why you got a bad value there."}], "tags": [], "owner": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "is_accepted": false, "score": 1, "last_activity_date": 1423638355, "creation_date": 1423638355, "answer_id": 28448413, "question_id": 28447647, "link": "https://stackoverflow.com/questions/28447647/chef-error-executing-action-start-on-resource-servicehttpd/28448413#28448413", "title": "Chef Error executing action `start` on resource &#39;service[httpd]&#39;", "body": "<p>That's not a chef problem. Apache httpd reports</p>\n\n<blockquote>\n  <p>Syntax error on line 15 of /etc/httpd/conf.d/stedelahunty2.conf: order takes one argument, 'allow,deny', 'deny,allow', or 'mutual-failure' </p>\n</blockquote>\n"}], "owner": {"reputation": 625, "user_id": 2112750, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/788bc1362ee35201192f1b750b53f983?s=128&d=identicon&r=PG", "display_name": "Ste-3PO", "link": "https://stackoverflow.com/users/2112750/ste-3po"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2608, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423638355, "creation_date": 1423634984, "question_id": 28447647, "link": "https://stackoverflow.com/questions/28447647/chef-error-executing-action-start-on-resource-servicehttpd", "title": "Chef Error executing action `start` on resource &#39;service[httpd]&#39;", "body": "<p>Here is my very basic recipes/default.rb file;</p>\n\n<pre><code>package \"httpd\" do\n        action :install\nend\n\nnode[\"apache\"][\"sites\"].each do |sitename, data|\n        document_root = \"/content/sites/#{sitename}\"\n\n        directory document_root do\n                mode \"0755\"\n                recursive true\n        end\n\ntemplate \"/etc/httpd/conf.d/#{sitename}.conf\" do\n        source \"vhost.erb\"\n        mode \"0644\"\n        variables(\n                :document_root =&gt; document_root,\n                :port =&gt; data[\"port\"],\n                :domain =&gt; data[\"domain\"]\n        )\n        notifies :restart, \"service[httpd]\"\nend\n\nend\n\nservice \"httpd\" do\n        action [:enable, :start]\nend\n</code></pre>\n\n<p>When I run the chef-client in the node it returns the following error:</p>\n\n<pre><code>Error executing action `start` on resource 'service[httpd]'\n    ================================================================================\n\n    Mixlib::ShellOut::ShellCommandFailed\n    ------------------------------------\n    Expected process to exit with [0], but received '1'\n    ---- Begin output of /sbin/service httpd start ----\n    STDOUT: Starting httpd: [FAILED]\n    STDERR: Syntax error on line 15 of /etc/httpd/conf.d/stedelahunty2.conf:\n    order takes one argument, 'allow,deny', 'deny,allow', or 'mutual-failure'\n    ---- End output of /sbin/service httpd start ----\n    Ran /sbin/service httpd start returned 1\n\n    Resource Declaration:\n    ---------------------\n    # In /var/chef/cache/cookbooks/apache/recipes/default.rb\n\n     35: service \"httpd\" do\n     36:    action [:enable, :start]\n     37: end\n\n    Compiled Resource:\n    ------------------\n    # Declared in /var/chef/cache/cookbooks/apache/recipes/default.rb:35:in `from_file'\n\n    service(\"httpd\") do\n      action [:enable, :start]\n      supports {:restart=&gt;false, :reload=&gt;false, :status=&gt;true}\n      retries 0\n      retry_delay 2\n      default_guard_interpreter :default\n      service_name \"httpd\"\n      enabled true\n      pattern \"httpd\"\n      declared_type :service\n      cookbook_name \"apache\"\n      recipe_name \"default\"\n    end\n</code></pre>\n\n<p>I've tried renaming it apache, changing the options to ':restart', commenting out entirely but that means httpd fails to start. I just need a simple way to restart the service after the chef run has completed. </p>\n\n<p>Again, apologies for the novice question; I'm very new to coding. </p>\n\n<p>Cheers</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 23312, "user_id": 560215, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bb365e8477053edcc55b40c3d27781d8?s=128&d=identicon&r=PG", "display_name": "sevenseacat", "link": "https://stackoverflow.com/users/560215/sevenseacat"}, "edited": false, "score": 0, "creation_date": 1423630176, "post_id": 28446761, "comment_id": 45222614, "body": "it&#39;s probably not compatible with your version of Ruby."}], "answers": [{"tags": [], "owner": {"reputation": 11234, "user_id": 518012, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/7792f4858924a9c1b47c7422bd84864d?s=128&d=identicon&r=PG", "display_name": "Eugene Goldberg", "link": "https://stackoverflow.com/users/518012/eugene-goldberg"}, "is_accepted": false, "score": 0, "last_activity_date": 1423662615, "creation_date": 1423662615, "answer_id": 28456031, "question_id": 28446761, "link": "https://stackoverflow.com/questions/28446761/gem-install-io-extra-v-1-2-6-fails/28456031#28456031", "title": "gem install io-extra -v &#39;1.2.6&#39; fails", "body": "<p>The answer came from asking folks at manageiq:</p>\n\n<p><a href=\"http://talk.manageiq.org/t/how-to-properly-install-manageiq-from-source-on-ubuntu/539\" rel=\"nofollow\">http://talk.manageiq.org/t/how-to-properly-install-manageiq-from-source-on-ubuntu/539</a></p>\n\n<p>They recommended installing ruby 2.0.0 and it worked well.</p>\n"}], "owner": {"reputation": 11234, "user_id": 518012, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/7792f4858924a9c1b47c7422bd84864d?s=128&d=identicon&r=PG", "display_name": "Eugene Goldberg", "link": "https://stackoverflow.com/users/518012/eugene-goldberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 226, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423662615, "creation_date": 1423629996, "question_id": 28446761, "link": "https://stackoverflow.com/questions/28446761/gem-install-io-extra-v-1-2-6-fails", "title": "gem install io-extra -v &#39;1.2.6&#39; fails", "body": "<p>My ruby version is 2.2.0</p>\n\n<p>As a part of installing manageiq software, I have to run the following install:</p>\n\n<p>gem install io-extra -v '1.2.6'</p>\n\n<p>I get this error:</p>\n\n<pre><code>eugene@3b4d8a92ac5d:~/manageiq/vmdb/manageiq/vmdb$ gem install io-extra -v '1.2.6'\nBuilding native extensions.  This could take a while...\nERROR:  Error installing io-extra:\n    ERROR: Failed to build gem native extension.\n\n    /home/eugene/.rvm/rubies/ruby-2.2.0/bin/ruby -r ./siteconf20150211-16945-9agvpk.rb extconf.rb\nchecking for stdint.h... yes\nchecking for sys/resource.h... yes\nchecking for sys/uio.h... yes\nchecking for closefrom()... no\nchecking for fdwalk()... no\nchecking for directio()... no\nchecking for pread()... yes\nchecking for pwrite()... yes\nchecking for writev()... yes\nchecking for rb_str_set_len() in ruby.h... yes\nchecking for rb_thread_blocking_region()... no\nchecking for ttyname()... yes\nchecking for O_DIRECT in sys/types.h,fcntl.h... yes\ncreating Makefile\n\nmake \"DESTDIR=\" clean\n\nmake \"DESTDIR=\"\ncompiling io/extra.c\nIn file included from io/extra.c:41:0:\n/home/eugene/.rvm/rubies/ruby-2.2.0/include/ruby-2.2.0/ruby/backward/rubysig.h:14:2: warning: #warning rubysig.h is obsolete [-Wcpp]\n #warning rubysig.h is obsolete\n  ^\nio/extra.c: In function 'rb_thread_blocking_region':\nio/extra.c:52:4: error: 'TRAP_BEG' undeclared (first use in this function)\n    TRAP_BEG;\n    ^\nio/extra.c:52:4: note: each undeclared identifier is reported only once for each function it appears in\nio/extra.c:54:4: error: 'TRAP_END' undeclared (first use in this function)\n    TRAP_END;\n    ^\nmake: *** [extra.o] Error 1\n\nmake failed, exit code 2\n\nGem files will remain installed in /home/eugene/.rvm/gems/ruby-2.2.0/gems/io-extra-1.2.6 for inspection.\nResults logged to /home/eugene/.rvm/gems/ruby-2.2.0/extensions/x86_64-linux/2.2.0/io-extra-1.2.6/gem_make.out\n</code></pre>\n\n<p>What can I do to overcome this error?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "minitest", "assertion"], "comments": [{"owner": {"reputation": 327, "user_id": 1471967, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/94048b3e53f1991544b01d988e5b4ee4?s=128&d=identicon&r=PG", "display_name": "Shishir Joshi", "link": "https://stackoverflow.com/users/1471967/shishir-joshi"}, "edited": false, "score": 2, "creation_date": 1423630404, "post_id": 28446729, "comment_id": 45222685, "body": "The &quot;1 assertions&quot; does not indicate an error. That is just a counter for the number of assertions in your test suite. Please take a look at this guide <a href=\"http://guides.rubyonrails.org/testing.html#running-tests\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/testing.html#running-tests</a>"}, {"owner": {"reputation": 113, "user_id": 3887892, "user_type": "registered", "profile_image": "https://graph.facebook.com/690296009/picture?type=large", "display_name": "Yannick Koehler", "link": "https://stackoverflow.com/users/3887892/yannick-koehler"}, "reply_to_user": {"reputation": 327, "user_id": 1471967, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/94048b3e53f1991544b01d988e5b4ee4?s=128&d=identicon&r=PG", "display_name": "Shishir Joshi", "link": "https://stackoverflow.com/users/1471967/shishir-joshi"}, "edited": false, "score": 0, "creation_date": 1423790260, "post_id": 28446729, "comment_id": 45302995, "body": "Ha!, so used to see asserts as problems I didn&#39;t grasp this properly.  Thanks for opening my eyes about this."}], "answers": [{"tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 0, "last_activity_date": 1423633969, "creation_date": 1423633969, "answer_id": 28447459, "question_id": 28446729, "link": "https://stackoverflow.com/questions/28446729/why-do-i-get-an-assert-but-all-test-are-passing/28447459#28447459", "title": "Why do I get an assert but all test are passing", "body": "<p>Your result:</p>\n\n<pre><code>1 runs, 1 assertions, 0 failures, 0 errors, 0 skips\n</code></pre>\n\n<p>Understanding this:</p>\n\n<ul>\n<li><code>1 runs</code>: How many times the test was run? Here 1.</li>\n<li><code>1 assertions</code>: An assertion is a line of code that evaluates an object (or expression) for expected results. So, How many times assertion was called? Answer 1. </li>\n<li><code>0 failures</code>: How many times assertion failed? Here none. </li>\n<li><code>0 errors</code>: How many errors were raised? (may be syntax, logic, runtime..). Here none.</li>\n<li><code>0 skips</code>: There are a few callbacks that you dont want to call while running tests (like sending mails etc) as these add no value to test and in some case slows down the process. You can skip these callbacks. So, how many skips were made? Here none.</li>\n</ul>\n"}], "owner": {"reputation": 113, "user_id": 3887892, "user_type": "registered", "profile_image": "https://graph.facebook.com/690296009/picture?type=large", "display_name": "Yannick Koehler", "link": "https://stackoverflow.com/users/3887892/yannick-koehler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423633969, "creation_date": 1423629755, "question_id": 28446729, "link": "https://stackoverflow.com/questions/28446729/why-do-i-get-an-assert-but-all-test-are-passing", "title": "Why do I get an assert but all test are passing", "body": "<p>need some help, I run \"bundle exec rake\" on a new rails application and I am getting an assertion, yet my test has passed, I can see in the test.log that my controller received a 200 OK response.</p>\n\n<p>My app is basic:</p>\n\n<pre><code>About your application's environment\nRails version             4.2.0\nRuby version              2.2.0-p0 (x86_64-linux)\nRubyGems version          2.4.5\nRack version              1.5\nJavaScript Runtime        Node.js (V8)\nMiddleware                Rack::Sendfile, ActionDispatch::Static, Rack::Lock, #&lt;ActiveSupport::Cache::Strategy::LocalCache::Middleware:0x00000002835098&gt;, Rack::Runtime, Rack::MethodOverride, ActionDispatch::RequestId, Rails::Rack::Logger, ActionDispatch::ShowExceptions, ActionDispatch::DebugExceptions, ActionDispatch::RemoteIp, ActionDispatch::Reloader, ActionDispatch::Callbacks, ActiveRecord::Migration::CheckPending, ActiveRecord::ConnectionAdapters::ConnectionManagement, ActiveRecord::QueryCache, ActionDispatch::Cookies, ActionDispatch::Session::CookieStore, ActionDispatch::Flash, ActionDispatch::ParamsParser, Rack::Head, Rack::ConditionalGet, Rack::ETag\nApplication root          /home/ykoehler/work/test2\nEnvironment               development\nDatabase adapter          postgresql\nDatabase schema version   0\n</code></pre>\n\n<p>After having created my app I did</p>\n\n<pre><code>rake db:create db:migrate\nrails g controller About index\nrake test\n</code></pre>\n\n<p>Here is the output:</p>\n\n<pre><code>Run options: --seed 52388\n\n# Running:\n\n.\n\nFinished in 0.049576s, 20.1709 runs/s, 20.1709 assertions/s.\n\n1 runs, 1 assertions, 0 failures, 0 errors, 0 skips\n</code></pre>\n\n<p>and the test.log</p>\n\n<pre><code>  ActiveRecord::SchemaMigration Load (0.5ms)  SELECT \"schema_migrations\".* FROM \"schema_migrations\"\n   (106.2ms)  DROP DATABASE IF EXISTS \"test2_test\"\n   (308.1ms)  CREATE DATABASE \"test2_test\" ENCODING = 'unicode'\n  SQL (0.5ms)  CREATE EXTENSION IF NOT EXISTS \"plpgsql\"\n   (5.9ms)  CREATE TABLE \"schema_migrations\" (\"version\" character varying NOT NULL) \n   (3.0ms)  CREATE UNIQUE INDEX  \"unique_schema_migrations\" ON \"schema_migrations\"  (\"version\")\n   (0.6ms)  SELECT version FROM \"schema_migrations\"\n   (1.1ms)  INSERT INTO \"schema_migrations\" (version) VALUES ('0')\n  ActiveRecord::SchemaMigration Load (0.4ms)  SELECT \"schema_migrations\".* FROM \"schema_migrations\"\n   (1.3ms)  BEGIN\n------------------------------------------\nAboutControllerTest: test_should_get_index\n------------------------------------------\nProcessing by AboutController#index as HTML\n  Rendered about/index.html.erb within layouts/application (0.8ms)\nCompleted 200 OK in 14ms (Views: 13.9ms | ActiveRecord: 0.0ms)\n   (0.4ms)  ROLLBACK\n</code></pre>\n\n<p>As you can see it says \"Completed 200 OK\" and test is outputted with a \".\" which means success.  But I still get an \"1 assertions\", I do not understand why and where it come from.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 3597, "user_id": 2112512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9689bb4f705b8bede56deddf66c87ef?s=128&d=identicon&r=PG", "display_name": "Jake Worth", "link": "https://stackoverflow.com/users/2112512/jake-worth"}, "edited": false, "score": 0, "creation_date": 1423790885, "post_id": 28446622, "comment_id": 45303171, "body": "What version of Ruby are you using?"}, {"owner": {"reputation": 11234, "user_id": 518012, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/7792f4858924a9c1b47c7422bd84864d?s=128&d=identicon&r=PG", "display_name": "Eugene Goldberg", "link": "https://stackoverflow.com/users/518012/eugene-goldberg"}, "reply_to_user": {"reputation": 3597, "user_id": 2112512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9689bb4f705b8bede56deddf66c87ef?s=128&d=identicon&r=PG", "display_name": "Jake Worth", "link": "https://stackoverflow.com/users/2112512/jake-worth"}, "edited": false, "score": 1, "creation_date": 1423793392, "post_id": 28446622, "comment_id": 45303675, "body": "I was using version 1.9.3.  I have since switched to 2.0.0 and was able to finish my install"}], "owner": {"reputation": 11234, "user_id": 518012, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/7792f4858924a9c1b47c7422bd84864d?s=128&d=identicon&r=PG", "display_name": "Eugene Goldberg", "link": "https://stackoverflow.com/users/518012/eugene-goldberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1487944694, "creation_date": 1423628892, "question_id": 28446622, "link": "https://stackoverflow.com/questions/28446622/manageiq-install-failing-on-step-bundle-install-without-qpid", "title": "manageiq install failing on step bundle install --without qpid", "body": "<p>I'm trying to build and run manageiq from source by following theses instructions:</p>\n\n<pre><code>http://ctl.parkerfleming.com/tutorials/manageiq/install-manageiq-on-ubuntu-14-04-on-the-centurylink-cloud/\n</code></pre>\n\n<p>When I run the following step:</p>\n\n<pre><code>$ git clone https://github.com/ManageIQ/manageiq\n$ cd manageiq/vmdb\n$ bundle install --without qpid\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>eugene@3b4d8a92ac5d:~/manageiq/vmdb/manageiq/vmdb$ bundle install --without qpid\nUnfortunately, a fatal error has occurred. Please see the Bundler troubleshooting documentation at http://bit.ly/bundler-issues. Thanks!\n/home/eugene/manageiq/vmdb/manageiq/lib/Gemfile:1:in `eval_gemfile': Ruby versions less than 2.0 are unsupported! (RuntimeError)\n    from /home/eugene/manageiq/vmdb/manageiq/vmdb/Gemfile.global.rb:53:in `eval'\n    from /home/eugene/manageiq/vmdb/manageiq/vmdb/Gemfile.global.rb:53:in `include_gemfile'\n    from /home/eugene/manageiq/vmdb/manageiq/vmdb/Gemfile:4:in `eval_gemfile'\n    from /home/eugene/.rvm/gems/ruby-1.9.3-p551@global/gems/bundler-1.7.6/lib/bundler/dsl.rb:32:in `instance_eval'\n    from /home/eugene/.rvm/gems/ruby-1.9.3-p551@global/gems/bundler-1.7.6/lib/bundler/dsl.rb:32:in `eval_gemfile'\n    from /home/eugene/.rvm/gems/ruby-1.9.3-p551@global/gems/bundler-1.7.6/lib/bundler/dsl.rb:10:in `evaluate'\n    from /home/eugene/.rvm/gems/ruby-1.9.3-p551@global/gems/bundler-1.7.6/lib/bundler/definition.rb:25:in `build'\n    from /home/eugene/.rvm/gems/ruby-1.9.3-p551@global/gems/bundler-1.7.6/lib/bundler.rb:154:in `definition'\n    from /home/eugene/.rvm/gems/ruby-1.9.3-p551@global/gems/bundler-1.7.6/lib/bundler/cli/install.rb:77:in `run'\n    from /home/eugene/.rvm/gems/ruby-1.9.3-p551@global/gems/bundler-1.7.6/lib/bundler/cli.rb:145:in `install'\n    from /home/eugene/.rvm/gems/ruby-1.9.3-p551@global/gems/bundler-1.7.6/lib/bundler/vendor/thor/command.rb:27:in `run'\n    from /home/eugene/.rvm/gems/ruby-1.9.3-p551@global/gems/bundler-1.7.6/lib/bundler/vendor/thor/invocation.rb:121:in `invoke_command'\n    from /home/eugene/.rvm/gems/ruby-1.9.3-p551@global/gems/bundler-1.7.6/lib/bundler/vendor/thor.rb:363:in `dispatch'\n    from /home/eugene/.rvm/gems/ruby-1.9.3-p551@global/gems/bundler-1.7.6/lib/bundler/vendor/thor/base.rb:440:in `start'\n    from /home/eugene/.rvm/gems/ruby-1.9.3-p551@global/gems/bundler-1.7.6/lib/bundler/cli.rb:9:in `start'\n    from /home/eugene/.rvm/gems/ruby-1.9.3-p551@global/gems/bundler-1.7.6/bin/bundle:20:in `block in &lt;top (required)&gt;'\n    from /home/eugene/.rvm/gems/ruby-1.9.3-p551@global/gems/bundler-1.7.6/lib/bundler/friendly_errors.rb:5:in `with_friendly_errors'\n    from /home/eugene/.rvm/gems/ruby-1.9.3-p551@global/gems/bundler-1.7.6/bin/bundle:18:in `&lt;top (required)&gt;'\n    from /home/eugene/.rvm/gems/ruby-1.9.3-p551@global/bin/bundle:23:in `load'\n    from /home/eugene/.rvm/gems/ruby-1.9.3-p551@global/bin/bundle:23:in `&lt;main&gt;'\n    from /home/eugene/.rvm/gems/ruby-1.9.3-p551@global/bin/ruby_executable_hooks:15:in `eval'\n    from /home/eugene/.rvm/gems/ruby-1.9.3-p551@global/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\n</code></pre>\n\n<p>What can I do to overcome this and finish manageiq install?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 14869, "user_id": 1794744, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/bed721a1153f97bdd0b31703673abee2?s=128&d=identicon&r=PG", "display_name": "cqcn1991", "link": "https://stackoverflow.com/users/1794744/cqcn1991"}, "edited": false, "score": 0, "creation_date": 1423621810, "post_id": 28445569, "comment_id": 45220497, "body": "I may not be clear initially, I want to reuse the name of <code>b</code> and its value. How can I do that?"}, {"owner": {"reputation": 20389, "user_id": 1620210, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8f130b2fa9903fca10a10b31ed3f7b94?s=128&d=identicon&r=PG", "display_name": "Kokizzu", "link": "https://stackoverflow.com/users/1620210/kokizzu"}, "reply_to_user": {"reputation": 14869, "user_id": 1794744, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/bed721a1153f97bdd0b31703673abee2?s=128&d=identicon&r=PG", "display_name": "cqcn1991", "link": "https://stackoverflow.com/users/1794744/cqcn1991"}, "edited": false, "score": 0, "creation_date": 1423622158, "post_id": 28445569, "comment_id": 45220602, "body": "see <code>EDIT 2</code> maybe that&#39;s what you&#39;re looking for"}, {"owner": {"reputation": 14869, "user_id": 1794744, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/bed721a1153f97bdd0b31703673abee2?s=128&d=identicon&r=PG", "display_name": "cqcn1991", "link": "https://stackoverflow.com/users/1794744/cqcn1991"}, "edited": false, "score": 0, "creation_date": 1423622304, "post_id": 28445569, "comment_id": 45220637, "body": "I need to change the <code>:tab</code> in <code>params[:tab]</code> into argument, how can I do that? I update my code with 2 example, maybe that&#39;s more clear."}, {"owner": {"reputation": 20389, "user_id": 1620210, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8f130b2fa9903fca10a10b31ed3f7b94?s=128&d=identicon&r=PG", "display_name": "Kokizzu", "link": "https://stackoverflow.com/users/1620210/kokizzu"}, "reply_to_user": {"reputation": 14869, "user_id": 1794744, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/bed721a1153f97bdd0b31703673abee2?s=128&d=identicon&r=PG", "display_name": "cqcn1991", "link": "https://stackoverflow.com/users/1794744/cqcn1991"}, "edited": false, "score": 0, "creation_date": 1423622780, "post_id": 28445569, "comment_id": 45220785, "body": "see <code>EDIT 4</code> maybe that what you need?"}, {"owner": {"reputation": 14869, "user_id": 1794744, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/bed721a1153f97bdd0b31703673abee2?s=128&d=identicon&r=PG", "display_name": "cqcn1991", "link": "https://stackoverflow.com/users/1794744/cqcn1991"}, "edited": false, "score": 0, "creation_date": 1423623080, "post_id": 28445569, "comment_id": 45220854, "body": "Could you explain why using params as an argument?, I think usage should be <code>selector_link(&#39;This is New&#39;, tab: &#39;new&#39;)</code>, <code>selector_link(&#39;This is like sorter&#39;, sort: &#39;like_count&#39;)</code>. There is no need for <code>params</code>"}, {"owner": {"reputation": 20389, "user_id": 1620210, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8f130b2fa9903fca10a10b31ed3f7b94?s=128&d=identicon&r=PG", "display_name": "Kokizzu", "link": "https://stackoverflow.com/users/1620210/kokizzu"}, "reply_to_user": {"reputation": 14869, "user_id": 1794744, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/bed721a1153f97bdd0b31703673abee2?s=128&d=identicon&r=PG", "display_name": "cqcn1991", "link": "https://stackoverflow.com/users/1794744/cqcn1991"}, "edited": false, "score": 0, "creation_date": 1423623137, "post_id": 28445569, "comment_id": 45220866, "body": "The first alternative should only used when <code>params</code> can be accessed within the helper, the second one when <code>params</code> cannot be accessed within helper.."}, {"owner": {"reputation": 14869, "user_id": 1794744, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/bed721a1153f97bdd0b31703673abee2?s=128&d=identicon&r=PG", "display_name": "cqcn1991", "link": "https://stackoverflow.com/users/1794744/cqcn1991"}, "edited": false, "score": 0, "creation_date": 1423623603, "post_id": 28445569, "comment_id": 45220979, "body": "It finally works, could you see my UPDATE? I still feel it&#39;s kind repetative."}, {"owner": {"reputation": 20389, "user_id": 1620210, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8f130b2fa9903fca10a10b31ed3f7b94?s=128&d=identicon&r=PG", "display_name": "Kokizzu", "link": "https://stackoverflow.com/users/1620210/kokizzu"}, "reply_to_user": {"reputation": 14869, "user_id": 1794744, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/bed721a1153f97bdd0b31703673abee2?s=128&d=identicon&r=PG", "display_name": "cqcn1991", "link": "https://stackoverflow.com/users/1794744/cqcn1991"}, "edited": false, "score": 0, "creation_date": 1423624210, "post_id": 28445569, "comment_id": 45221114, "body": "see <code>EDIT 5</code> <code>link[key]</code> is always equal to <code>value</code>"}], "tags": [], "owner": {"reputation": 20389, "user_id": 1620210, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8f130b2fa9903fca10a10b31ed3f7b94?s=128&d=identicon&r=PG", "display_name": "Kokizzu", "link": "https://stackoverflow.com/users/1620210/kokizzu"}, "is_accepted": true, "score": 2, "last_activity_date": 1423624172, "last_edit_date": 1423624172, "creation_date": 1423621593, "answer_id": 28445569, "question_id": 28445515, "link": "https://stackoverflow.com/questions/28445515/ruby-how-to-use-hash-as-argument-of-a-method/28445569#28445569", "title": "Ruby: How to use hash as argument of a method", "body": "<p>It's called named parameter or <a href=\"http://robots.thoughtbot.com/ruby-2-keyword-arguments\" rel=\"nofollow\">keyword argument</a>, so that</p>\n\n<pre><code>def x(a, b: 'test')\n  puts \"a = #{a}\"\n  puts \"b = #{b}\"\nend\n</code></pre>\n\n<p>could be called as:</p>\n\n<pre><code>x 123, b: 'yay'\n# a = 123\n# b = yay\n</code></pre>\n\n<p>You could also type it like this:</p>\n\n<pre><code>def x(a, b: nil) \n  b ||= anything      \nend\n</code></pre>\n\n<p><strong>EDIT 1</strong>: So in your case (if I'm not misunderstood), it should be something like this:</p>\n\n<pre><code>def selector_link(link_text, tab: path)\n  link_to link_text, url_for(key: tab), class: ('active' if tab == 'new')\nend\n</code></pre>\n\n<p><strong>EDIT 2:</strong> Or something like this:</p>\n\n<pre><code>def selector_link(link_text, opt={})\n  link_to link_text, url_for(opt), class: ('active' if opt[:tab] == 'new')\nend\n</code></pre>\n\n<p>Both function can be called as <code>selector_link('a',tab:'new')</code></p>\n\n<p><strong>EDIT 3</strong> for your last question edit, it should be something like this:</p>\n\n<pre><code>def selector_link(link_text, opt={})\n  active = nil\n  active = 'active' if !opt[:tab].nil? and opt[:tab] == 'new'\n  active = 'active' if !opt[:sort].nil? and opt[:sort] == 'like_count' \n  link_to link_text, url_for(opt), class: active\nend \n</code></pre>\n\n<p><strong>EDIT 4</strong> If Rail's helper can access <code>params</code>, you could type it like this:</p>\n\n<pre><code>def selector_link(link_text, opt={})\n  key = opt.first[0] # get the first :key or :param_name\n  link_to link_text, url_for(opt), class: ('active' if opt[key].to_s == params[key].to_s)\nend \n\n# call it using:\nselector_link('This is New', tab: 'new')\nselector_link('This is like sorter', sort: 'like_count')\nselector_link('This is number 7', number: 7)\n</code></pre>\n\n<p>If <code>params</code> not accessible from helper, you must pass it manually:</p>\n\n<pre><code>def selector_link(link_text, params, opt={})\n  key = opt.first[0]\n  link_to link_text, url_for(opt), class: ('active' if opt[key].to_s == params[key].to_s)\nend \n\n# call it using:\nselector_link('This is New', params, tab: 'new')\nselector_link('This is like sorter', params, sort: 'like_count')\nselector_link('This is number 7', params, number: 7)\n</code></pre>\n\n<p><strong>EDIT 5</strong> last update, for the repetitive part</p>\n\n<pre><code>def selector_link2(link_text, link = {})\n  key, value = link.first\n  link_to link_text, url_for(link), class: ('active' if params[key].to_s == value.to_s)\nend\n</code></pre>\n"}], "owner": {"reputation": 14869, "user_id": 1794744, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/bed721a1153f97bdd0b31703673abee2?s=128&d=identicon&r=PG", "display_name": "cqcn1991", "link": "https://stackoverflow.com/users/1794744/cqcn1991"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 28445569, "answer_count": 1, "score": 0, "last_activity_date": 1423624172, "creation_date": 1423621220, "last_edit_date": 1423623542, "question_id": 28445515, "link": "https://stackoverflow.com/questions/28445515/ruby-how-to-use-hash-as-argument-of-a-method", "title": "Ruby: How to use hash as argument of a method", "body": "<p>I want to define a helper in Rails:</p>\n\n<pre><code># Usage:\n# selector_link('This is New', tab: 'new')\n# selector_link('This is like sorter', sort: 'like_count')\n# selector_link('This is number 7', number: 7)\ndef selector_link2(link_text, param_name: param_content)\n  link_to link_text, url_for(param_name: param_content), class: ('active'if params[:param_name] == param_content)\n  # Should Generate:\n  # link_to link_text, url_for(tab: 'new'), class: ('active'if params[:tab] == 'new')\n  # link_to link_text, url_for(sort: 'like_count'), class: ('active'if params[:sort] == 'like_count')\n  # link_to link_text, url_for(number: 7), class: ('active'if params[:number] == 7)\nend\n</code></pre>\n\n<p>The problem is that, I don't know how to make the <code>key</code> in <code>url_for(key: path)</code> to accept the input <code>hash's key</code>, and <code>params[:key]</code> also seems a invalid syntax.</p>\n\n<p>What is the correct way of wrting this method?</p>\n\n<p>UPDATE:\nThis is what I end up with</p>\n\n<pre><code>def selector_link2(link_text, link = {})\n  key = link.first[0]\n  value = link.first[1]\n  link_to link_text, url_for(link), class: ('active'if params[link[key].to_s] == link[value])\nend\n</code></pre>\n"}, {"tags": ["ruby", "watir", "watir-webdriver"], "comments": [{"owner": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 1, "creation_date": 1423641358, "post_id": 28445184, "comment_id": 45226451, "body": "Did you try <code>browser.goto &#39;...full path&#47;log_file.txt&#39;</code>?"}, {"owner": {"reputation": 123, "user_id": 4522132, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ANrwo.jpg?s=128&g=1", "display_name": "ping-ot", "link": "https://stackoverflow.com/users/4522132/ping-ot"}, "reply_to_user": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 0, "creation_date": 1423643235, "post_id": 28445184, "comment_id": 45227310, "body": "@YevgeniyAnfilofyev .. not yet sir"}], "answers": [{"tags": [], "owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "is_accepted": true, "score": 2, "last_activity_date": 1424137315, "creation_date": 1424137315, "answer_id": 28553356, "question_id": 28445184, "link": "https://stackoverflow.com/questions/28445184/how-to-display-content-of-text-file-in-the-browser-using-watir/28553356#28553356", "title": "how to display content of text file in the browser using watir?", "body": "<p>write out the text file in html format (internally) and use a .html extension on the file. (then you can format it and make it look pretty)</p>\n\n<p>or just point the browser at the full path of the file including the extension, most browsers should render it, even if it is not pretty. </p>\n"}], "owner": {"reputation": 123, "user_id": 4522132, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ANrwo.jpg?s=128&g=1", "display_name": "ping-ot", "link": "https://stackoverflow.com/users/4522132/ping-ot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 2, "accepted_answer_id": 28553356, "answer_count": 1, "score": 2, "last_activity_date": 1424137315, "creation_date": 1423618910, "question_id": 28445184, "link": "https://stackoverflow.com/questions/28445184/how-to-display-content-of-text-file-in-the-browser-using-watir", "title": "how to display content of text file in the browser using watir?", "body": "<p>I am trying to save the results of my test in the log_file.txt and I want it to display in the browser. Is it possible?</p>\n\n<p>Thanks in advance,</p>\n\n<p>Helfe</p>\n"}, {"tags": ["ruby", "capistrano", "capistrano3", "rvm-capistrano"], "comments": [{"owner": {"reputation": 1348, "user_id": 1363520, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/dd01041b737eca45a9c5d01d234d3b9c?s=128&d=identicon&r=PG", "display_name": "Som Poddar", "link": "https://stackoverflow.com/users/1363520/som-poddar"}, "reply_to_user": {"reputation": 2291, "user_id": 1752333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1009edfa56c5a71d0e6de2738342bee7?s=128&d=identicon&r=PG", "display_name": "scorix", "link": "https://stackoverflow.com/users/1752333/scorix"}, "edited": false, "score": 0, "creation_date": 1423689202, "post_id": 28445139, "comment_id": 45254853, "body": "For now it is one script but soon will be an app with few additional classes."}], "owner": {"reputation": 1348, "user_id": 1363520, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/dd01041b737eca45a9c5d01d234d3b9c?s=128&d=identicon&r=PG", "display_name": "Som Poddar", "link": "https://stackoverflow.com/users/1363520/som-poddar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1423618619, "creation_date": 1423618619, "question_id": 28445139, "link": "https://stackoverflow.com/questions/28445139/capistrano-multi-server-deployment-with-different-parameters", "title": "Capistrano multi-server deployment with different parameters", "body": "<p>I would like to deploy a ruby script, <code>bin/app.rb</code> to multiple servers </p>\n\n<p><code>zone1.myapp.com</code>, <code>zone2.myapp.com</code> &amp; <code>zone3.myapp.com</code> using Capistrano v3. Post deployment, it will need to run as a daemon with a param specific to that zone, meaning ...</p>\n\n<p><code>zone1</code> should run <code>bundle exec ruby bin/app.rb zone1</code></p>\n\n<p><code>zone2</code> should run <code>bundle exec ruby bin/app.rb zone2</code></p>\n\n<p><code>zone3</code> should run <code>bundle exec ruby bin/app.rb zone3</code></p>\n\n<p>Is there a way to accomplish this by Capistrano?</p>\n"}, {"tags": ["ruby", "stringio"], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1423619079, "post_id": 28445047, "comment_id": 45219819, "body": "It appears that <a href=\"http://ruby-doc.org/stdlib-1.9.3/libdoc/stringio/rdoc/StringIO.html#method-i-reopen\" rel=\"nofollow noreferrer\">StringIO#reopen</a> works as well: <code>io.string #=&gt; &quot;foo&quot;; io.reopen(&#39;&#39;); io.string #=&gt; &quot;&quot;</code> . Yes?"}, {"owner": {"reputation": 312231, "user_id": 2225682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4958f4712d94ab82fe55fa471308e4b5?s=128&d=identicon&r=PG", "display_name": "falsetru", "link": "https://stackoverflow.com/users/2225682/falsetru"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1423619505, "post_id": 28445047, "comment_id": 45219928, "body": "@CarySwoveland, Thank you for the comment. I didn&#39;t know it. I updated the answer accordingly."}], "tags": [], "owner": {"reputation": 312231, "user_id": 2225682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4958f4712d94ab82fe55fa471308e4b5?s=128&d=identicon&r=PG", "display_name": "falsetru", "link": "https://stackoverflow.com/users/2225682/falsetru"}, "is_accepted": true, "score": 6, "last_activity_date": 1423619482, "last_edit_date": 1423619482, "creation_date": 1423618022, "answer_id": 28445047, "question_id": 28445000, "link": "https://stackoverflow.com/questions/28445000/how-can-i-clear-a-stringio-instance/28445047#28445047", "title": "How can I clear a `StringIO` instance?", "body": "<p><code>seek</code> or <code>rewind</code> only affect next read/write operations, not the content of the internal storage.</p>\n\n<p>You can use <a href=\"http://ruby-doc.org/stdlib/libdoc/stringio/rdoc/StringIO.html#method-i-truncate\" rel=\"noreferrer\"><code>StringIO#truncate</code></a> like <a href=\"http://ruby-doc.org/core/File.html#method-i-truncate\" rel=\"noreferrer\"><code>File#truncate</code></a>:</p>\n\n<pre><code>require 'stringio'\nio = StringIO.new\nio.write(\"foo\")\nio.string\n# =&gt; \"foo\"\nio.truncate(0)   # &lt;---------\nio.string\n# =&gt; \"\"\n</code></pre>\n\n<p>Alternative:</p>\n\n<p>You can also use <a href=\"http://ruby-doc.org/stdlib-2.2.0/libdoc/stringio/rdoc/StringIO.html#method-i-reopen\" rel=\"noreferrer\"><code>StringIO#reopen</code></a> (NOTE: <a href=\"http://ruby-doc.org/core-2.2.0/File.html\" rel=\"noreferrer\"><code>File</code></a> does not have <code>reopen</code> method):</p>\n\n<pre><code>io.reopen(\"\")\nio.string\n# =&gt; \"\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1143, "user_id": 1265056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7befe78ad4d6398812959adfcad732ce?s=128&d=identicon&r=PG", "display_name": "Jesus Monzon Legido", "link": "https://stackoverflow.com/users/1265056/jesus-monzon-legido"}, "is_accepted": false, "score": 3, "last_activity_date": 1469177588, "creation_date": 1469177588, "answer_id": 38522181, "question_id": 28445000, "link": "https://stackoverflow.com/questions/28445000/how-can-i-clear-a-stringio-instance/38522181#38522181", "title": "How can I clear a `StringIO` instance?", "body": "<p>I use <code>truncate</code> AND <code>rewind</code>. The rewind is required to prepare io for next operations.</p>\n\n<pre><code>io.truncate(0)\nio.rewind\n</code></pre>\n"}], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3548, "favorite_count": 0, "accepted_answer_id": 28445047, "answer_count": 2, "score": 5, "last_activity_date": 1469177588, "creation_date": 1423617691, "question_id": 28445000, "link": "https://stackoverflow.com/questions/28445000/how-can-i-clear-a-stringio-instance", "title": "How can I clear a `StringIO` instance?", "body": "<p>How can I clear a <code>StringIO</code> instance? After I write to and read from a string io, I want to clear it.</p>\n\n<pre><code>require \"stringio\"\nio = StringIO.new\nio.write(\"foo\")\nio.string #=&gt; \"foo\"\n# ... After doing something ...\nio.string #=&gt; Expecting \"\"\n</code></pre>\n\n<p>I tried <code>flush</code> and <code>rewind</code>, but I still get the same content.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 20389, "user_id": 1620210, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8f130b2fa9903fca10a10b31ed3f7b94?s=128&d=identicon&r=PG", "display_name": "Kokizzu", "link": "https://stackoverflow.com/users/1620210/kokizzu"}, "is_accepted": true, "score": 4, "last_activity_date": 1423617830, "last_edit_date": 1423617830, "creation_date": 1423617058, "answer_id": 28444920, "question_id": 28444892, "link": "https://stackoverflow.com/questions/28444892/what-does-name-mean-in-ruby/28444920#28444920", "title": "What does &quot;&amp;:name&quot; mean in Ruby", "body": "<p>Unary <a href=\"http://ablogaboutcode.com/2012/01/04/the-ampersand-operator-in-ruby/\" rel=\"nofollow\">Ampersand</a> is address of a function/block/lambda</p>\n\n<p>In this case, it means that the <code>.sort_by</code> function will use each <code>a</code>'s element's function named <code>name</code> for comparison</p>\n\n<p>Mostly it used for something else, like this:</p>\n\n<pre><code>[1,2,3].map{ |x| x.to_s } # ['1','2','3']\n</code></pre>\n\n<p>That could be shortened as:</p>\n\n<pre><code>[1,2,3].map(&amp;:to_s)\n</code></pre>\n\n<p>So, in your case, <code>a.sort_by(&amp;:name)</code> is a shorthand to:</p>\n\n<pre><code>a.sort_by{ |x| x.name }\n</code></pre>\n"}], "owner": {"reputation": 533, "user_id": 2035378, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/116050e40967e291257082fd770ffffd?s=128&d=identicon&r=PG", "display_name": "Colin Wu", "link": "https://stackoverflow.com/users/2035378/colin-wu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1226, "favorite_count": 1, "closed_date": 1423617850, "accepted_answer_id": 28444920, "answer_count": 1, "score": 1, "last_activity_date": 1423617830, "creation_date": 1423616880, "last_edit_date": 1423616955, "question_id": 28444892, "link": "https://stackoverflow.com/questions/28444892/what-does-name-mean-in-ruby", "closed_reason": "Duplicate", "title": "What does &quot;&amp;:name&quot; mean in Ruby", "body": "<p>I saw it in some sample Ruby code someone had posted. It was something like:</p>\n\n<pre><code>a.sort_by(&amp;:name)\n</code></pre>\n\n<p>where <code>a</code> is an array or ActiveRecord objects and <code>:name</code> is one of the attributes.</p>\n\n<p>I have never seen <code>&amp;:name</code> and Ruby's Symbol class documentation says nothing about it. Probably something really simple. :)</p>\n"}, {"tags": ["android", "ruby", "oauth", "instagram"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 1618351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c074910b20154ca0b2244ac1d56c176?s=128&d=identicon&r=PG", "display_name": "cacciatc", "link": "https://stackoverflow.com/users/1618351/cacciatc"}, "edited": false, "score": 0, "creation_date": 1424369598, "post_id": 28595881, "comment_id": 45530923, "body": "Yep, the Android WebView onPageFinished callback was firing twice and I was initiating two auth calls."}, {"owner": {"reputation": 575, "user_id": 4758413, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/2bxKg.jpg?s=128&g=1", "display_name": "user2028", "link": "https://stackoverflow.com/users/4758413/user2028"}, "edited": false, "score": 0, "creation_date": 1575540572, "post_id": 28595881, "comment_id": 104604074, "body": "Please look into this : <a href=\"https://stackoverflow.com/questions/59052304/oauthaccesstokenexception-the-access-token-provided-is-invalid-instagram-new-api?noredirect=1#comment104600245_59052304\" title=\"oauthaccesstokenexception the access token provided is invalid instagram new api\">stackoverflow.com/questions/59052304/&hellip;</a>"}, {"owner": {"reputation": 4150, "user_id": 1698736, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d4a0d13ad1606bcbd222a01471aee065?s=128&d=identicon&r=PG", "display_name": "cowlinator", "link": "https://stackoverflow.com/users/1698736/cowlinator"}, "reply_to_user": {"reputation": 575, "user_id": 4758413, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/2bxKg.jpg?s=128&g=1", "display_name": "user2028", "link": "https://stackoverflow.com/users/4758413/user2028"}, "edited": false, "score": 0, "creation_date": 1575586560, "post_id": 28595881, "comment_id": 104626779, "body": "@user2028, sorry, I haven&#39;t touched the Instagram API in almost 5 years."}], "tags": [], "owner": {"reputation": 4150, "user_id": 1698736, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d4a0d13ad1606bcbd222a01471aee065?s=128&d=identicon&r=PG", "display_name": "cowlinator", "link": "https://stackoverflow.com/users/1698736/cowlinator"}, "is_accepted": true, "score": 0, "last_activity_date": 1424301569, "creation_date": 1424301569, "answer_id": 28595881, "question_id": 28444600, "link": "https://stackoverflow.com/questions/28444600/instagram-api-returns-a-code-but-when-requesting-an-access-token-says-the-same/28595881#28595881", "title": "Instagram API returns a code, but when requesting an access token says the same code is invalid", "body": "<p>I know my answer is a bit late, but I'm posting it here so others (hopefully) won't have to search as hard as I did.</p>\n\n<p>It looks like you're using the Explicit auth.  We were having this issue using the explicit flow.  </p>\n\n<p>Here's the problem: \u00a0In the instant after you send the code to Instagram (step 3), that code expires.  However, Instagram will not send you a new code (step 1 &amp; 2) for at least 5 minutes (it re-issues the old code).  </p>\n\n<p>Make certain that you aren't sending more than one request with the same code (Android WebView tends to arbitrarily send multiple requests).  Or, better yet, cache the code->Instagram_response mapping on the server.  </p>\n"}], "owner": {"reputation": 11, "user_id": 1618351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c074910b20154ca0b2244ac1d56c176?s=128&d=identicon&r=PG", "display_name": "cacciatc", "link": "https://stackoverflow.com/users/1618351/cacciatc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 905, "favorite_count": 0, "accepted_answer_id": 28595881, "answer_count": 1, "score": 0, "last_activity_date": 1424301569, "creation_date": 1423615157, "question_id": 28444600, "link": "https://stackoverflow.com/questions/28444600/instagram-api-returns-a-code-but-when-requesting-an-access-token-says-the-same", "title": "Instagram API returns a code, but when requesting an access token says the same code is invalid", "body": "<p>Using the Instagram rubygem and sinatra I am able to successfully authenticate via oauth from a small AngularJS app and use the Instagram API. Here are the relevant oauth routes from my sinatra app:</p>\n\n<pre><code>get '/oauth/connect' do\n    logger.info \"going here \" + (Instagram.authorize_url :redirect_uri =&gt; CALLBACK)\n    redirect Instagram.authorize_url :redirect_uri =&gt; CALLBACK\nend\n\nget \"/oauth/callback\" do\n    logger.info params[:code]\n    response = Instagram.get_access_token params[:code], :redirect_uri =&gt; CALLBACK\n    session[:access_token] = response.access_token\n\n    users = DB[:users]\n    current_user = users[:instagram_id =&gt; response.user.id.to_i]\n\n    if current_user.nil?\n        new_user = response.user\n        users.insert :instagram_id =&gt; new_user.id.to_i, \n                             :username =&gt; new_user.username, \n                             :profile_picture =&gt; new_user.profile_picture,\n                             :created_at =&gt; DateTime.now\n\n        current_user = users[:instagram_id =&gt; new_user.id]\n    end\n    session[:current_user] = current_user\n    redirect \"/app\"\nend\n</code></pre>\n\n<p>However, when trying to authenticate from within a webview in an Android app using the same routes (GET oauth/connect, redirected to Instagram, then redirected back to oauth/callback) I get the following error:</p>\n\n<pre><code>Instagram::BadRequest - POST https://api.instagram.com/oauth/access_token/: 400: OAuthException: No matching code found.:\n</code></pre>\n\n<p>I have verified that I am using the same code returned from Instagram and that the redirect_uri is the same as what I registered with Instagram.</p>\n\n<p>Note, Oauth works when I use my web interface, but not via the Android webview.</p>\n\n<p>I have read a number of posts where other people have seen this behavior, but the solutions provided do not work for me:</p>\n\n<ol>\n<li><p>Instagram can disable your app because it thinks it is misbehaving. Nope, because oauth works via my web-interface still using the same client ID and secret and the same routes.</p></li>\n<li><p>You are not using the same redirect_uri as that listed with Instagram. I have checked and re-checked this and it looks fine.</p></li>\n</ol>\n\n<p>Where can I debug next to get to the bottom of this issue?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb", "mongoid"], "comments": [{"owner": {"reputation": 6650, "user_id": 422304, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/9be96371c2bf51abb95ac4ef29c0ca87?s=128&d=identicon&r=PG", "display_name": "Dean", "link": "https://stackoverflow.com/users/422304/dean"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1423759989, "post_id": 28444225, "comment_id": 45288397, "body": "According to MoneyRails, it&#39;s a hash like <code>#&lt;Money fractional:5500 currency:USD&gt;</code>. How do I unwrap the hash and aggregate?"}], "answers": [{"tags": [], "owner": {"reputation": 155, "user_id": 2448466, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/39d380d8cd780ee147be98337bed25d5?s=128&d=identicon&r=PG", "display_name": "Marco", "link": "https://stackoverflow.com/users/2448466/marco"}, "is_accepted": true, "score": 1, "last_activity_date": 1425063511, "last_edit_date": 1425063511, "creation_date": 1424988322, "answer_id": 28753660, "question_id": 28444225, "link": "https://stackoverflow.com/questions/28444225/mongoid-rubymoney/28753660#28753660", "title": "Mongoid + RubyMoney", "body": "<p>I just addded an answer to this <a href=\"https://github.com/RubyMoney/money-rails/issues/283\" rel=\"nofollow\">here</a>  but just in case someone else comes to this post as I did, I was able to sum money-rails values using something like this: </p>\n\n<pre><code>Order.sum(\"order_amount.cents\")\n</code></pre>\n\n<p>This will return just the cents values from the Money-rails structure: </p>\n\n<pre><code>{ cents: &lt; value &gt;, currency_iso: &lt; value &gt; }\n</code></pre>\n\n<p>So in order to get the sum in money-rails format you would use:</p>\n\n<pre><code>Money.new(Order.sum(\"order_amount.cents\"))\n</code></pre>\n\n<p>Please note that this is when using mongoid v3, because of how money-rails is serialized. \nI believe that with previous versions of mongoid, money-rails objects were serialized using \"fractional\" instead of cents, so you would have to use:</p>\n\n<pre><code>Money.new(Order.sum(\"order_amount.fractional\"))\n</code></pre>\n\n<p>Hope that helps!</p>\n"}], "owner": {"reputation": 6650, "user_id": 422304, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/9be96371c2bf51abb95ac4ef29c0ca87?s=128&d=identicon&r=PG", "display_name": "Dean", "link": "https://stackoverflow.com/users/422304/dean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 28753660, "answer_count": 1, "score": 0, "last_activity_date": 1425063511, "creation_date": 1423613081, "question_id": 28444225, "link": "https://stackoverflow.com/questions/28444225/mongoid-rubymoney", "title": "Mongoid + RubyMoney", "body": "<p>I'm using RubyMoney (money-rails) <a href=\"https://github.com/RubyMoney/money-rails\" rel=\"nofollow\">https://github.com/RubyMoney/money-rails</a> with Mongoid. Something like this:</p>\n\n<pre><code>class Order\n  include Mongoid::Document\n    field :order_amount, :type =&gt; Money, :default =&gt; Money.new(0)\n    ...\nend\n</code></pre>\n\n<p>How can I aggregate on a <code>Money</code> field? For example, when I run <code>Order.sum(:order_amount)</code>, I get <code>0</code> even if the field has a value like <code>#&lt;Money fractional:5500 currency:USD&gt;</code>. I've also tried <code>Order.sum(:order_amount_cents)</code> and that also returns <code>0</code>.</p>\n\n<p>This is the generated Ruby MongoDB command:</p>\n\n<pre><code>command={:aggregate=&gt;\"orders\", :pipeline=&gt;[{\"$match\"=&gt;{\"order_amount\"=&gt;{\"$nin\"=&gt;[nil]}}}, {\"$group\"=&gt;{\"_id\"=&gt;\"order_amount\", \"count\"=&gt;{\"$sum\"=&gt;1}, \"max\"=&gt;{\"$max\"=&gt;\"$order_amount\"}, \"min\"=&gt;{\"$min\"=&gt;\"$order_amount\"}, \"sum\"=&gt;{\"$sum\"=&gt;\"$order_amount\"}, \"avg\"=&gt;{\"$avg\"=&gt;\"$order_amount\"}}}]} (2.4292ms)\n</code></pre>\n\n<p>I've also tried using the <code>moped</code> aggregate command with <code>Order.collection.aggregate</code> and that doesn't seem to work either.</p>\n\n<pre><code>Order.collection.aggregate(\n    { \n        '$group' =&gt; { \n            '_id' =&gt; '$order_amount', \n            'totalOrder' =&gt; { '$sum' =&gt; '$order_amount' }       \n        }\n    }\n)\n</code></pre>\n\n<p>Any help please?</p>\n"}, {"tags": ["ruby", "gets"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1423612564, "post_id": 28443859, "comment_id": 45217910, "body": "I just logged on to see your comment in your other question.  I&#39;ve updated my answer there but @itdoesntwork has it exactly right."}], "answers": [{"comments": [{"owner": {"reputation": 531, "user_id": 1596461, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/0cfddcb66e02dc94ab17bd02db84aa1b?s=128&d=identicon&r=PG", "display_name": "Milksnake12", "link": "https://stackoverflow.com/users/1596461/milksnake12"}, "edited": false, "score": 0, "creation_date": 1423612846, "post_id": 28444122, "comment_id": 45217986, "body": "Thanks for the detail! No way I would have figured that out!"}], "tags": [], "owner": {"reputation": 4230, "user_id": 945873, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d561be4c73996732e6639b5421abfb97?s=128&d=identicon&r=PG&f=1", "display_name": "itdoesntwork", "link": "https://stackoverflow.com/users/945873/itdoesntwork"}, "is_accepted": true, "score": 2, "last_activity_date": 1423612395, "creation_date": 1423612395, "answer_id": 28444122, "question_id": 28443859, "link": "https://stackoverflow.com/questions/28443859/ruby-skipping-gets-after-previous-gets-with-parameter/28444122#28444122", "title": "Ruby skipping gets after previous gets with parameter", "body": "<p><code>Kernel#gets</code> can actually take an argument, a separator. This tells Ruby when to stop reading from stdin. If you don't provide this argument, the default value of <code>\\n</code> (<code>$/</code>) is used. Here's what happens when your program runs:</p>\n\n<ul>\n<li><code>gets</code> asks for everything until the first <code>done</code>.</li>\n<li>You type something, then type done, then hit enter. This is key, because now the input stream ends with <code>done\\n</code> but <code>gets</code> has only read up till <code>done</code>.</li>\n<li><code>gets</code> asks for everything until the first <code>\\n</code> This <code>\\n</code> is found immediately after the <code>done</code>, and <code>gets</code> already has it because you already typed it so it doesn't ask you for any more.</li>\n</ul>\n\n<p>That's why you're not getting a chance to input anything after the first <code>gets</code>. To eliminate this problem, you should make the separator <code>\"done\\n\"</code>, or perhaps <code>\"\\ndone\\n\"</code>, if you want it to strictly be on its own line.</p>\n"}, {"tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": false, "score": 0, "last_activity_date": 1423612412, "creation_date": 1423612412, "answer_id": 28444129, "question_id": 28443859, "link": "https://stackoverflow.com/questions/28443859/ruby-skipping-gets-after-previous-gets-with-parameter/28444129#28444129", "title": "Ruby skipping gets after previous gets with parameter", "body": "<p>When calling <code>gets(\"done\")</code> Ruby reads the STDIN until it finds any occurrence of <code>done</code>. This doesn't necessarily needs to be on a single line or even at the beginning or end of line. Ruby will return once you have entered a line containing <code>done</code>.</p>\n\n<p>Now, Ruby will just read input until it has consumed the <code>done</code>. The rest of the input will not be read but will be kept in the buffer. Thus, in your case, if you enter a single line containing <code>done</code> into your terminal and press enter, Ruby will only consume the done but not the newline.</p>\n\n<p>The newline (or generally the rest of the line following the <code>done</code>) will only be consumed by the next <code>gets</code>. Because of this, your second <code>gets</code> returns directly.</p>\n\n<p>To fix this, better approach then to use the separator argument to <code>gets</code> is to use a loop:</p>\n\n<pre><code>response = \"\"\nwhile line = gets do\n  response &lt;&lt; line\n  break if line == \"done\\n\"\nend\nresponse.chomp!\n</code></pre>\n"}], "owner": {"reputation": 531, "user_id": 1596461, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/0cfddcb66e02dc94ab17bd02db84aa1b?s=128&d=identicon&r=PG", "display_name": "Milksnake12", "link": "https://stackoverflow.com/users/1596461/milksnake12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 28444122, "answer_count": 2, "score": 0, "last_activity_date": 1423612412, "creation_date": 1423610866, "question_id": 28443859, "link": "https://stackoverflow.com/questions/28443859/ruby-skipping-gets-after-previous-gets-with-parameter", "title": "Ruby skipping gets after previous gets with parameter", "body": "<p>I have a multiline input using a gets parameter that works great. The problem is that it's skipping my next gets...</p>\n\n<pre><code>print \"Multi-line response: \"\nresponse = gets(\"done\").chomp\n\nprint \"One line response: \"\noneLine = gets.chomp\n</code></pre>\n\n<p>The first two lines run as expected (I can enter multiple lines of text until I type done and press enter). It then prints \"One line response: \" and exits the program. I never get to input for oneLine.</p>\n\n<p>Why is this happening?</p>\n"}, {"tags": ["ruby", "string"], "comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1423611054, "post_id": 28443844, "comment_id": 45217371, "body": "Core classes are typically not meant to be inherited from. While there are sometimes patches to make them behave consistently in the face of inheritance, often performance and other reasons are out before that. Thus, built-in methods often have unpredictable behaviour here (which can change between Ruby versions). In order to be safe, you should overwrite the methods and ensure that you return consistent classes, e.g. by using <code>MyString.new(super)</code>."}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 2, "creation_date": 1423611181, "post_id": 28443844, "comment_id": 45217426, "body": "That said, you probably don&#39;t want to inherit from core classes at all, esp. not from the basic types like <code>Hash</code>, <code>Array</code>, <code>String</code>, <code>Numeric</code>, ... Often, it is cleaner and less confusing to use a decorator instead (i.e wrap the string into your class and delegate method calls to it)"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1423611317, "post_id": 28443844, "comment_id": 45217476, "body": "@HolgerJust Inheriting from core classes is useful when you want to add functions to it without messing the original class."}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 1, "creation_date": 1423611480, "post_id": 28443844, "comment_id": 45217540, "body": "In Ruby 2.1 and later, there are refinements for this exact use-case. However, the feature is a bit confusing on its own and seldom used. As I said, it it probably cleaner to use a decorator instead of a subclass."}], "answers": [{"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 1, "last_activity_date": 1423865642, "last_edit_date": 1423865642, "creation_date": 1423653589, "answer_id": 28453027, "question_id": 28443844, "link": "https://stackoverflow.com/questions/28443844/why-does-on-a-subclass-of-string-return-the-receivers-class/28453027#28453027", "title": "Why does `*` on a subclass of `String` return the receiver&#39;s class?", "body": "<p>The unsatisfying answer is \u2026 because it's implemented that way.</p>\n\n<p>Here's <a href=\"https://github.com/rubinius/rubinius/blob/master/kernel/common/string.rb#L75-79\" rel=\"nofollow\">the implementation</a> of <a href=\"http://ruby-doc.org/core-2.2.0/String.html#method-i-2B\" rel=\"nofollow\"><code>String#+</code></a> in <a href=\"http://Rubini.us/\" rel=\"nofollow\">Rubinius</a>:</p>\n\n<pre><code>def +(other)\n  other = StringValue(other)\n  Rubinius::Type.compatible_encoding self, other\n  String.new(self) &lt;&lt; other\nend\n</code></pre>\n\n<p>As you can see, it explicitly constructs a <code>String</code>, that's why it always returns a <code>String</code>.</p>\n\n<p>Here's <a href=\"https://github.com/rubinius/rubinius/blob/master/kernel/common/string.rb#L52-58\" rel=\"nofollow\">the implementation</a> of <a href=\"http://ruby-doc.org/core-2.2.0/String.html#method-i-25\" rel=\"nofollow\"><code>String#%</code></a> in Rubinius:</p>\n\n<pre><code>def %(args)\n  *args = args\n  ret = Rubinius::Sprinter.get(self).call(*args)\n\n  ret.taint if tainted?\n  return ret\nend\n</code></pre>\n\n<p>It uses the <a href=\"https://github.com/rubinius/rubinius/blob/master/kernel/common/sprinter.rb\" rel=\"nofollow\"><code>Rubinius::Sprinter</code></a> for formatting the <code>String</code>, which always returns a <code>String</code>.</p>\n\n<p>And finally, here's <a href=\"https://github.com/rubinius/rubinius/blob/master/kernel/common/string.rb#L60-73\" rel=\"nofollow\">the implementation</a> of <a href=\"http://ruby-doc.org/core-2.2.0/String.html#method-i-2A\" rel=\"nofollow\"><code>String#*</code></a> in Rubinius:</p>\n\n<pre><code>def *(num)\n  num = Rubinius::Type.coerce_to(num, Integer, :to_int) unless num.kind_of? Integer\n\n  if num.kind_of? Bignum\n    raise RangeError, \"bignum too big to convert into `long' (#{num})\"\n  end\n\n  if num &lt; 0\n    raise ArgumentError, \"unable to multiple negative times (#{num})\"\n  end\n\n  str = self.class.pattern num * @num_bytes, self\n  return str\nend\n</code></pre>\n\n<p>The interesting part here is that it tries to find a class method not by calling <code>String.pattern</code>, but by calling <code>self.class.pattern</code>, so it will actually call <code>MyString::pattern</code> instead. <code>String::pattern</code> is actually implemented as a <a href=\"https://github.com/rubinius/rubinius/blob/master/kernel/bootstrap/string.rb#L14-17\" rel=\"nofollow\">primitive</a>, with which I am not very familiar, but I believe the interesting bit is <a href=\"https://github.com/rubinius/rubinius/blob/master/vm/builtin/string.cpp#L1219\" rel=\"nofollow\">this</a>:</p>\n\n<pre><code>String* s = state-&gt;new_object_dirty&lt;String&gt;(as&lt;Class&gt;(self));\n//                                          ^^^^^^^^^^^^^^^\n</code></pre>\n\n<p>In <a href=\"http://JRuby.Org/\" rel=\"nofollow\">JRuby</a>, I think the magic is <a href=\"https://github.com/jruby/jruby/blob/master/core/src/main/java/org/jruby/RubyString.java#L1189\" rel=\"nofollow\">here</a>:</p>\n\n<pre><code>RubyString result = new RubyString(context.runtime, getMetaClass(), bytes);\n//                                                  ^^^^^^^^^^^^^^\n</code></pre>\n\n<p>Interestingly, in <a href=\"http://TopazRuby.Com/\" rel=\"nofollow\">Topaz</a>, the class is <code>String</code>, not <code>MyString</code>:</p>\n\n<pre><code>topaz -e 'class MyStr &lt; String; end; p MyStr.new.*(2).class'\n# =&gt; String\n</code></pre>\n\n<p>It's implemented <a href=\"https://github.com/topazproject/topaz/blob/master/topaz/objects/stringobject.py#L165-166\" rel=\"nofollow\">here</a> (I think):</p>\n\n<pre><code>  def mul(self, space, storage, times):\n      return space.newstr_fromchars(self.unerase(storage) * times)\n</code></pre>\n\n<p>As it turns out, the <a href=\"http://iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=59579\" rel=\"nofollow\">ISO Ruby Language Specification</a> has this to say about <code>String#*</code>:</p>\n\n<blockquote>\n  <p>Create a direct instance <em>S</em> of the class <code>String</code> the content of which is <em>C</em> repeated <em>n</em> times.</p>\n</blockquote>\n\n<p>Note how it says \"direct instance\", i.e. not an instance of a subclass of <code>String</code>, but an instance of <code>String</code> itself. So, at first glance, it seems that YARV, JRuby, and Rubinius violate the spec here. But, this spec is for <code>String#*</code>, not for <code>MyString#*</code>, so the question is: does this spec also apply if the method is inherited by a subclass? Is it the responsibility of the subclass to maintain the invariant in the spec, or is it the responsibility of <code>String#*</code> to maintain the invariant even in the event that <code>String</code> is subclassed but <code>String#*</code> is not overridden?</p>\n"}], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1423865642, "creation_date": 1423610774, "last_edit_date": 1423631720, "question_id": 28443844, "link": "https://stackoverflow.com/questions/28443844/why-does-on-a-subclass-of-string-return-the-receivers-class", "title": "Why does `*` on a subclass of `String` return the receiver&#39;s class?", "body": "<p>If I make a subclass of <code>String</code>, <code>*</code> returns an instance of that class.</p>\n\n<pre><code>class MyString &lt; String\nend\n\nMyString.new(\"foo\").*(2).class #=&gt; MyString\n</code></pre>\n\n<p>This is different from other similar operations like <code>+</code> and <code>%</code>, which return a <code>String</code> instance.</p>\n\n<pre><code>MyString.new(\"foo\").+(\"bar\").class #=&gt; String\nMyString.new(\"%{foo}\").%(foo: \"bar\").class #=&gt; String\n</code></pre>\n\n<p>Why does <code>*</code> behave different from <code>+</code> and <code>%</code>?</p>\n"}, {"tags": ["ruby", "json", "parsing"], "comments": [{"owner": {"reputation": 7810, "user_id": 2671317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f13862b290e178f5a6c40b8d8dfc4f05?s=128&d=identicon&r=PG", "display_name": "ptierno", "link": "https://stackoverflow.com/users/2671317/ptierno"}, "edited": false, "score": 1, "creation_date": 1423610554, "post_id": 28443758, "comment_id": 45217153, "body": "nothing you have there should print to stdout unless you are in irb."}, {"owner": {"reputation": 233, "user_id": 4018167, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a01226d46498cc231d5892bbfffd446?s=128&d=identicon&r=PG", "display_name": "Max Wofford", "link": "https://stackoverflow.com/users/4018167/max-wofford"}, "reply_to_user": {"reputation": 7810, "user_id": 2671317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f13862b290e178f5a6c40b8d8dfc4f05?s=128&d=identicon&r=PG", "display_name": "ptierno", "link": "https://stackoverflow.com/users/2671317/ptierno"}, "edited": false, "score": 0, "creation_date": 1423610767, "post_id": 28443758, "comment_id": 45217232, "body": "I added it to <code>script.rb</code>, and ran <code>ruby script.rb</code>, and it printed it in the terminal. I&#39;m using ruby 2.1.2."}, {"owner": {"reputation": 126, "user_id": 2764817, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IbKTt.jpg?s=128&g=1", "display_name": "JariOtranen", "link": "https://stackoverflow.com/users/2764817/jariotranen"}, "edited": false, "score": 1, "creation_date": 1423610818, "post_id": 28443758, "comment_id": 45217254, "body": "can you test it smaller, definitely valid json file e.g. test.json {     &quot;test&quot;: 123 } ?"}, {"owner": {"reputation": 233, "user_id": 4018167, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a01226d46498cc231d5892bbfffd446?s=128&d=identicon&r=PG", "display_name": "Max Wofford", "link": "https://stackoverflow.com/users/4018167/max-wofford"}, "reply_to_user": {"reputation": 126, "user_id": 2764817, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IbKTt.jpg?s=128&g=1", "display_name": "JariOtranen", "link": "https://stackoverflow.com/users/2764817/jariotranen"}, "edited": false, "score": 0, "creation_date": 1423611019, "post_id": 28443758, "comment_id": 45217351, "body": "Thanks @JariOtranen! I think that was it. Tested with <a href=\"http://json.org/example\" rel=\"nofollow noreferrer\">json.org/example</a>, the script runs silently."}], "answers": [{"comments": [{"owner": {"reputation": 7810, "user_id": 2671317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f13862b290e178f5a6c40b8d8dfc4f05?s=128&d=identicon&r=PG", "display_name": "ptierno", "link": "https://stackoverflow.com/users/2671317/ptierno"}, "edited": false, "score": 0, "creation_date": 1423610877, "post_id": 28443853, "comment_id": 45217277, "body": "Apparantly it is printing even outside of irb"}], "tags": [], "owner": {"reputation": 32543, "user_id": 528726, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6307569a99dd77fff0463032051d7e39?s=128&d=identicon&r=PG", "display_name": "joelparkerhenderson", "link": "https://stackoverflow.com/users/528726/joelparkerhenderson"}, "is_accepted": true, "score": 2, "last_activity_date": 1423611132, "last_edit_date": 1423611132, "creation_date": 1423610819, "answer_id": 28443853, "question_id": 28443758, "link": "https://stackoverflow.com/questions/28443758/ruby-parse-json-without-printing-results/28443853#28443853", "title": "Ruby parse JSON without printing results", "body": "<p>Ruby shows the result, which is why IRB is printing the json.</p>\n\n<p>There's a typical Ruby IRB idiom to append any short item, like this:</p>\n\n<pre><code>input_object = JSON.parse(File.read('input.json')); 0\n</code></pre>\n\n<p>The appended 0 makes IRB print 0 instead of the long json.</p>\n\n<p>For your script, it is possibly printing the JSON because the JSON parser is hitting an error, and what you're seeing is an exception debugging message.</p>\n\n<p>Try wrapping the parse:</p>\n\n<pre><code>begin\n  input_object = JSON.parse(File.read('input.json'))\nrescue\n  raise \"JSON parse error!\"\nend\n</code></pre>\n\n<p>Does it still print the JSON?</p>\n\n<p>If so, try making the script executable:</p>\n\n<ol>\n<li><p>Make the first line of the script this:</p>\n\n<pre><code>#!/usr/bin/env ruby\n</code></pre></li>\n<li><p>Make the last line this:</p>\n\n<pre><code>exit 0\n</code></pre></li>\n<li><p>Make it executable:</p>\n\n<pre><code>chmod u+x script.rb\n</code></pre></li>\n<li><p>Run it:</p>\n\n<pre><code>./script.rb\n</code></pre></li>\n</ol>\n\n<p>Does it still print the JSON?</p>\n"}], "owner": {"reputation": 233, "user_id": 4018167, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a01226d46498cc231d5892bbfffd446?s=128&d=identicon&r=PG", "display_name": "Max Wofford", "link": "https://stackoverflow.com/users/4018167/max-wofford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1300, "favorite_count": 0, "accepted_answer_id": 28443853, "answer_count": 1, "score": 2, "last_activity_date": 1423611132, "creation_date": 1423610325, "last_edit_date": 1423610667, "question_id": 28443758, "link": "https://stackoverflow.com/questions/28443758/ruby-parse-json-without-printing-results", "title": "Ruby parse JSON without printing results", "body": "<p>I am parsing a file <code>input.json</code> to a hash like so</p>\n\n<pre><code>input_object = JSON.parse(File.read('input.json'))\n</code></pre>\n\n<p>When I run the script, either in irb or running <code>ruby script.rb</code>, the terminal I run it from starts to print the object. This would not normally be a problem, but <code>input.json</code> is a large file, and could take 10~20 minutes to print. Is there a way I can do this silently?</p>\n\n<p>Update: Even with <code>irb_context.echo = false</code>, it prints. This implies that setting <code>input_object =</code> the object is not being printed.</p>\n"}, {"tags": ["ruby", "arrays", "string", "search", "replace"], "comments": [{"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 1, "creation_date": 1423610170, "post_id": 28443652, "comment_id": 45216999, "body": "Hi it&#39;d help us greatly if you could give some example data for the string - you&#39;re splitting on stuff and I have no idea why... can you please edit your question and add some sample data, and an example of what the result should look like with that example?"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1423610252, "post_id": 28443652, "comment_id": 45217033, "body": "What mostly confuses me is that you have an empty string in <code>strList</code> - so there won&#39;t be any ids when you call split on that empty string, which means the loop will never be called"}, {"owner": {"reputation": 2600, "user_id": 876438, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ee459f598ec33dfdb43468c0f48dde10?s=128&d=identicon&r=PG", "display_name": "Ravi Sankar Raju", "link": "https://stackoverflow.com/users/876438/ravi-sankar-raju"}, "edited": false, "score": 0, "creation_date": 1423611035, "post_id": 28443652, "comment_id": 45217361, "body": "i get a feeling the code is way too complicated for the requirement. yet i am not able to completely gauge the requirement. a sample input and output would help a lot. thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4552530, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LCRRZ.png?s=128&g=1", "display_name": "SteTrezla", "link": "https://stackoverflow.com/users/4552530/stetrezla"}, "edited": false, "score": 0, "creation_date": 1423611010, "post_id": 28443763, "comment_id": 45217343, "body": "Although this may work in my case, I&#39;m not that experienced in the Ruby Language since the way I learned Ruby was looking at one file and figuring it out, then some research on some functions. I would really appreciate it if you could show me how to use this in my code. I know it sounds so noobish, then I can learn from what you show me. Thanks in advanced."}, {"owner": {"reputation": 1333, "user_id": 1073889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JfbGr.jpg?s=128&g=1", "display_name": "RipTheJacker", "link": "https://stackoverflow.com/users/1073889/ripthejacker"}, "reply_to_user": {"reputation": 3, "user_id": 4552530, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LCRRZ.png?s=128&g=1", "display_name": "SteTrezla", "link": "https://stackoverflow.com/users/4552530/stetrezla"}, "edited": false, "score": 0, "creation_date": 1423692095, "post_id": 28443763, "comment_id": 45256387, "body": "It&#39;s a bit difficult to tell what more advice to give without knowing my about what this is supposed to do. Can you maybe pseudo-code what are you trying to do here?"}], "tags": [], "owner": {"reputation": 1333, "user_id": 1073889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JfbGr.jpg?s=128&g=1", "display_name": "RipTheJacker", "link": "https://stackoverflow.com/users/1073889/ripthejacker"}, "is_accepted": true, "score": 1, "last_activity_date": 1423610364, "creation_date": 1423610364, "answer_id": 28443763, "question_id": 28443652, "link": "https://stackoverflow.com/questions/28443652/ruby-search-array-and-replace-string/28443763#28443763", "title": "Ruby Search Array And Replace String", "body": "<p>You want #each_with_index: <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-each_with_index\" rel=\"nofollow\">http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-each_with_index</a></p>\n\n<p>You may also want to look at #gsub since it takes a block. You may not need to split this string into an array at all. Basically something like <code>strList.gsub(...){ |match| #...your block }</code></p>\n"}], "owner": {"reputation": 3, "user_id": 4552530, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LCRRZ.png?s=128&g=1", "display_name": "SteTrezla", "link": "https://stackoverflow.com/users/4552530/stetrezla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 759, "favorite_count": 0, "accepted_answer_id": 28443763, "answer_count": 1, "score": 0, "last_activity_date": 1423849452, "creation_date": 1423609759, "last_edit_date": 1423849452, "question_id": 28443652, "link": "https://stackoverflow.com/questions/28443652/ruby-search-array-and-replace-string", "title": "Ruby Search Array And Replace String", "body": "<p>My question is, how can I search through an array and replace the string at the current index of the search without knowing what the indexed array string contains?</p>\n\n<p>The code below will search through an ajax file hosted on the internet, it will find the inventory, go through each weapon in my inventory, adding the ID to a string (so I can check if that weapon has been checked before). Then it will add another value after that of the amount of times it occurs in the inventory, then after I have check all weapon in the inventory, it will go through the all of the IDs added to the string and display them along with the number (amount of occurrences). This is so I know how many of each weapon I have.</p>\n\n<p>This is an example of what I have:</p>\n\n<pre><code>strList = \"\"\ninventory.each do |inv|\n    amount = 1\n    exists = false\n    ids = strList.split(',')\n    ids.each do |ind|\n        if (inv['id'] == ind.split('/').first) then\n            exists = true\n            amount = ind.split('/').first.to_i\n            amount += 1\n            ind = \"#{inv['id']}/#{amount.to_s}\" # This doesn't seem work as expected.\n        end\n    end\n    if (exists == true) then\n        ids.push(\"#{inv['id']}/#{amount.to_s}\")\n        strList = ids.join(\",\")\n    end\nend\nstrList.split(\",\").each do |item|\n    puts \"#{item.split('/').first} (#{item.split('/').last})\"\nend\n</code></pre>\n\n<p>Here is an idea of what code I expected (pseudo-code):</p>\n\n<pre><code>inventory = get_inventory()\ndrawn_inv = \"\"\nloop.inventory do |inv|\n    if (inv['id'].occurred_before?)\n        inv['id'].count += 1\n    end\nend loop\n\nloop.inventory do |inv|\n    drawn_inv.add(inv['id'] + \"/\" + inv['id'].count)\nend loop\n\nloop.drawn_inv do |inv|\n    puts \"#{inv}\"\nend loop\n</code></pre>\n\n<p>Any help on how to replace that line is appreciated!</p>\n\n<p>EDIT: Sorry for not requiring more information on my code. I skipped the less important part at the bottom of the code and displayed commented code instead of actual code, I'll add that now.</p>\n\n<p>EDIT #2: I'll update my description of what it does and what I'm expecting as a result.</p>\n\n<p>EDIT #3: Added pseudo-code.</p>\n\n<p>Thanks in advance,\nSteTrezla</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 417, "user_id": 745512, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e67c796b09dbef398668e11c0e3ff6ad?s=128&d=identicon&r=PG", "display_name": "roland", "link": "https://stackoverflow.com/users/745512/roland"}, "edited": false, "score": 0, "creation_date": 1423610355, "post_id": 28443593, "comment_id": 45217074, "body": "Or is there a way using the net-ssh ruby gem?"}, {"owner": {"reputation": 417, "user_id": 745512, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e67c796b09dbef398668e11c0e3ff6ad?s=128&d=identicon&r=PG", "display_name": "roland", "link": "https://stackoverflow.com/users/745512/roland"}, "edited": false, "score": 0, "creation_date": 1423676303, "post_id": 28443593, "comment_id": 45247568, "body": "Figured out a simple solution:                                                                           php_package = @box.execute &quot;yum install -y &lt;package-name&gt;&quot;                  the &quot;-y&quot; flag indicates to ignore the prompt, passes the &quot;y&quot; to the shell. No user interaction required"}], "owner": {"reputation": 417, "user_id": 745512, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e67c796b09dbef398668e11c0e3ff6ad?s=128&d=identicon&r=PG", "display_name": "roland", "link": "https://stackoverflow.com/users/745512/roland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 20, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1423609502, "creation_date": 1423609502, "question_id": 28443593, "link": "https://stackoverflow.com/questions/28443593/installing-php-package-on-linux-using-rye-rbox", "title": "Installing php package on linux using rye/rbox", "body": "<p>I'm trying to automate installing packages on a linux host using a Ruby script.\nCurrently I'm using the rye/rbox gem to establish a connection to a host and then execute a shell command, installing a package, and then checking if the package was installed successfully.</p>\n\n<p>When installing a package the regular way</p>\n\n<pre><code>yum install &lt;package-name&gt;\n</code></pre>\n\n<p>a prompt will be displayed:</p>\n\n<pre><code>Is this ok [y/N]:\n</code></pre>\n\n<p>asking fore the package to be installed.</p>\n\n<p>Currently I run the following ruby script/commands:</p>\n\n<pre><code>@box = Rye::Box.new(\"#{@host}\", :user =&gt; \"#{@user}\", :password =&gt; \"#{@passwd}\", :safe =&gt; false)\n\nphp_package = @box.execute \"yum install &lt;package-name&gt;\"\n</code></pre>\n\n<p>While the install command is being executed the process waits for the {y/N] command-line input.</p>\n\n<p>Does anyone know how to supply the [y/N] with the install request.\nRight now I'm stumped on this puzzle</p>\n"}, {"tags": ["ruby", "sinatra", "spotify"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 1358053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d79202fc76b83c368b400d635a0889d?s=128&d=identicon&r=PG", "display_name": "Enrique Moriarty", "link": "https://stackoverflow.com/users/1358053/enrique-moriarty"}, "edited": false, "score": 0, "creation_date": 1423645701, "post_id": 28444626, "comment_id": 45228534, "body": "When I set the header option HTTP Content-Type It gets 415 error. When ther is no Content-Type is just 400 error code."}], "tags": [], "owner": {"reputation": 17430, "user_id": 309483, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d797538504a367f277d19bd8369e9a19?s=128&d=identicon&r=PG", "display_name": "Janus Troelsen", "link": "https://stackoverflow.com/users/309483/janus-troelsen"}, "is_accepted": false, "score": 0, "last_activity_date": 1423615338, "creation_date": 1423615338, "answer_id": 28444626, "question_id": 28443365, "link": "https://stackoverflow.com/questions/28443365/ruby-post-call-from-server-fails/28444626#28444626", "title": "Ruby POST call from server fails", "body": "<p>Are you sure that kind of string interpolation works? Did you look at the traffic in wireshark to see if it is working correctly? It looks suspicious cause you use double-quotes within double quotes and still expect it to work. If you don't wanna set up wireshark, have your app post the request text on the console. Furthermore, are you sure Spotify will allow redirect_uri's with localhost? Also, when do you get the 400, and when do you get the 415? This is important information, you can't just conflate them like that.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 1358053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d79202fc76b83c368b400d635a0889d?s=128&d=identicon&r=PG", "display_name": "Enrique Moriarty", "link": "https://stackoverflow.com/users/1358053/enrique-moriarty"}, "is_accepted": false, "score": 0, "last_activity_date": 1423653913, "creation_date": 1423653913, "answer_id": 28453138, "question_id": 28443365, "link": "https://stackoverflow.com/questions/28443365/ruby-post-call-from-server-fails/28453138#28453138", "title": "Ruby POST call from server fails", "body": "<p>I've changed the Typhoeus gem for HTTParty, and now the error is becoming clearer.</p>\n\n<p>The main thing here is not the 400 or the 415 error, is the message attached to this error. The error here is: </p>\n\n<pre><code>\"error\"=&gt;\"invalid_grant\", \"error_description\"=&gt;\"Invalid authorization code\"\n</code></pre>\n\n<p>So, It's my fault not to be aware of that, but was not clear the message, sometimes the fatigue and frustration makes you not seeing the obvious.</p>\n\n<p>Now, just have to know why the auth. code is not valid.</p>\n\n<p>Anyway thanks for the help.</p>\n"}], "owner": {"reputation": 31, "user_id": 1358053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d79202fc76b83c368b400d635a0889d?s=128&d=identicon&r=PG", "display_name": "Enrique Moriarty", "link": "https://stackoverflow.com/users/1358053/enrique-moriarty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 177, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1423653913, "creation_date": 1423608441, "last_edit_date": 1423644795, "question_id": 28443365, "link": "https://stackoverflow.com/questions/28443365/ruby-post-call-from-server-fails", "title": "Ruby POST call from server fails", "body": "<p>I'm trying to make a spotify web manager with ruby, to make that I'm following the <a href=\"https://developer.spotify.com/web-api/authorization-guide/#authorization_code_flow\" rel=\"nofollow\">Authorization Guide</a>.</p>\n\n<p>My backend looks similar to the example made by the spotify's guys in this <a href=\"https://github.com/spotify/web-api-auth-examples/blob/master/authorization_code/app.js\" rel=\"nofollow\">github</a>. You can see mine here <a href=\"https://github.com/emoriarty/spotplayer/blob/master/app.rb\" rel=\"nofollow\">code here</a>.</p>\n\n<p>So the error I'm getting are 400 - Bad request or 415 - Unsupported media type.</p>\n\n<p>At first I was using the net/http core library, but because maybe I was doing something wrong I've used <a href=\"https://github.com/typhoeus/typhoeus\" rel=\"nofollow\">Typhoeus</a> and the result are the same.</p>\n\n<p>This is the code is not working:</p>\n\n<pre><code>request = Typhoeus::Request.new(\"https://accounts.spotify.com/api/token\",\n  method: :post,\n  body: { \n    grant_type: \"authorization_code\",\n    code: code,\n    redirect_uri: \"http://localhost:5000/auth/spotify/callback\"\n  },\n  headers: { \n    \"Authorization\": \"Basic #{Base64.strict_encode64(\"#{settings.spotify_id}:#{settings.spotify_key}\")}\"\n  },\n  followlocation: true\n)\n\nlogger.info request.inspect\n\nrequest.on_complete do |response|\n  logger.info \"[]\" * 100\n  logger.info response\n  if response.success?\n    logger.info \"SUCCESS\"\n  elsif response.timed_out?\n    logger.info \"TIMED OUT\"\n  elsif response.code == 0\n    logger.info response.return_message\n  else\n    logger.info \"HTTP request failed: #{response.code.to_s}\"\n    redirect '/auth/failure'\n  end\nend\n\nrequest.run\n</code></pre>\n\n<p>Well, if someone of you have any idea of what is happenning, It would be helpful to know it.</p>\n\n<p>Thanks in advance.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>The string interpolation is is working properly, has been tested on console.</p>\n\n<pre><code>\"Basic #{Base64.strict_encode64(\"#{settings.spotify_id}:#{settings.spotify_key}\")}\"\n</code></pre>\n\n<p>About the <strong>redirect_uri</strong>, must to work well, one thing because the guide is explained with localhost example, and second, the first request explained on the <a href=\"https://developer.spotify.com/web-api/authorization-guide/#authorization_code_flow\" rel=\"nofollow\">Authorization Guide</a> is working properly, the problem happens when I'm trying to do the 4 step on that guide.</p>\n"}, {"tags": ["ruby", "git", "tags", "rugged"], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 1781555, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7dacc1236a90f5dcfea22bc49870c1ec?s=128&d=identicon&r=PG", "display_name": "Daniel Devlin", "link": "https://stackoverflow.com/users/1781555/daniel-devlin"}, "edited": false, "score": 0, "creation_date": 1423730536, "post_id": 28451624, "comment_id": 45269658, "body": "Thanks Arthur. Can you make any suggestions as to why the additional code in my first comment doesn&#39;t work with Git 2.0.4?"}, {"owner": {"reputation": 511, "user_id": 1119896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27e7abe48c5b5c5d54563408f31e82db?s=128&d=identicon&r=PG", "display_name": "Arthur Schreiber", "link": "https://stackoverflow.com/users/1119896/arthur-schreiber"}, "reply_to_user": {"reputation": 85, "user_id": 1781555, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7dacc1236a90f5dcfea22bc49870c1ec?s=128&d=identicon&r=PG", "display_name": "Daniel Devlin", "link": "https://stackoverflow.com/users/1781555/daniel-devlin"}, "edited": false, "score": 0, "creation_date": 1423745256, "post_id": 28451624, "comment_id": 45278343, "body": "No idea. Maybe something changed between git 1.9 and 2.0.4, but I really doubt that is the case. Are you sure there&#39;s nothing else that is different?  Also, did you try the suggested solution for rugged?"}, {"owner": {"reputation": 85, "user_id": 1781555, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7dacc1236a90f5dcfea22bc49870c1ec?s=128&d=identicon&r=PG", "display_name": "Daniel Devlin", "link": "https://stackoverflow.com/users/1781555/daniel-devlin"}, "edited": false, "score": 0, "creation_date": 1423752202, "post_id": 28451624, "comment_id": 45283015, "body": "I was attempting to run the code through an ide which was working from a non git directory. Running the code file from the command line solved the issue. Thanks again Arthur."}], "tags": [], "owner": {"reputation": 511, "user_id": 1119896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27e7abe48c5b5c5d54563408f31e82db?s=128&d=identicon&r=PG", "display_name": "Arthur Schreiber", "link": "https://stackoverflow.com/users/1119896/arthur-schreiber"}, "is_accepted": false, "score": 0, "last_activity_date": 1423649529, "creation_date": 1423649529, "answer_id": 28451624, "question_id": 28443268, "link": "https://stackoverflow.com/questions/28443268/can-i-create-an-orphaned-tag-using-rugged-or-another-ruby-library/28451624#28451624", "title": "Can I create an orphaned tag using Rugged or another Ruby library?", "body": "<p>Yes, you can:</p>\n\n<pre><code># Get the repo\nrepo = Rugged::Repository.open(\"...\")\n\n# Lookup the target object\ntarget = repo.lookup(\"$object\")\n\n# Create the tag annotation object\nrepo.tags.create_annotation(\"$tag_name\", target, {\n  tagger: {\n    name: \"$user_name\"\n    email: \"$user_email\",\n    time: Date.parse(\"$date\")\n  },\n  message: \"$message\"\n})\n</code></pre>\n\n<p>I did not test this, but this should give you at least enough pointers on how to do this with rugged.</p>\n"}], "owner": {"reputation": 85, "user_id": 1781555, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7dacc1236a90f5dcfea22bc49870c1ec?s=128&d=identicon&r=PG", "display_name": "Daniel Devlin", "link": "https://stackoverflow.com/users/1781555/daniel-devlin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423674624, "creation_date": 1423608047, "last_edit_date": 1423674624, "question_id": 28443268, "link": "https://stackoverflow.com/questions/28443268/can-i-create-an-orphaned-tag-using-rugged-or-another-ruby-library", "title": "Can I create an orphaned tag using Rugged or another Ruby library?", "body": "<p>I am trying to emulate the following in Ruby:\n    object=$1\n    tag_name=$2\n    message=$3\n    user_name=<code>git config user.name</code>\n    user_email=<code>git config user.email</code>\n    date=<code>date +%s</code></p>\n\n<pre><code>tag=\"object ${object}\ntype commit\ntag ${tag_name}\ntagger ${user_name} &lt;${user_email}&gt; ${date} +0000\n\n${message}\"\n\necho \"${tag}\" | git mktag\n</code></pre>\n\n<p>I have tried the following using Rugged:\n    repo = Rugged::Repository.new(@full_path)\n    tag_collection = Rugged::TagCollection.new(repo)\n    annotated_tag_sha = tag_collection.create(tag_name, sha, {:message => msg, :time => Time.now})\n    repo.close</p>\n\n<p>However the two are not equivalent. Any suggestions would be appreciated.</p>\n\n<p>I did get it working locally using:</p>\n\n<pre><code>repo = Rugged::Config.global\ntype = \"commit\"\ntagname = \"v99.99.2\"\nusername = repo[\"user.name\"]\nemail = repo[\"user.email\"]\nmessage = \"this is the message for the annotated tag\"\ntag_contents = \"object f849f9e28c7f36a826d4b451efb16516c0c3acc2\\ntype #    {type}\\ntag #{tagname}\\ntagger #{username} &lt;#{email}&gt; #{Time.new.to_i}     +0000\\n\\n#{message}\"\nexecutecommand = \"printf \\\"#{tag_contents}\\\" | git mktag\"\nOpen3.popen3(executecommand) do |stdin, stdout, stderr, wait_thr|\nexit_stats = wait_thr.value\nerrors = stderr.readlines\nputs \"Errors are #{errors}\"\nunless exit_stats.success?\n  raise Exception, 'There was an error encountered'\nend\nsignature_file_sha = stdout.readline.chomp\nputs \"signature sha is #{signature_file_sha}\"\n</code></pre>\n\n<p>end</p>\n\n<p>using git 1.9 but it is throwing an error now in git 2.0.4 unable to verify object with id </p>\n"}, {"tags": ["html", "ruby", "json", "ruby-on-rails-4", "ruby-2.2"], "comments": [{"owner": {"reputation": 14290, "user_id": 367611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc23263c068a50a3901db239ea2dc2d5?s=128&d=identicon&r=PG", "display_name": "Sean Hill", "link": "https://stackoverflow.com/users/367611/sean-hill"}, "edited": false, "score": 0, "creation_date": 1423607641, "post_id": 28443145, "comment_id": 45215958, "body": "Have you added <code>.html_safe</code> to the end?"}, {"owner": {"reputation": 10088, "user_id": 2317928, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61GAZ.jpg?s=128&g=1", "display_name": "steel", "link": "https://stackoverflow.com/users/2317928/steel"}, "reply_to_user": {"reputation": 14290, "user_id": 367611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc23263c068a50a3901db239ea2dc2d5?s=128&d=identicon&r=PG", "display_name": "Sean Hill", "link": "https://stackoverflow.com/users/367611/sean-hill"}, "edited": false, "score": 0, "creation_date": 1423607778, "post_id": 28443145, "comment_id": 45216027, "body": "Yes. It makes it look a bit better, but does not actually fix the problem."}, {"owner": {"reputation": 10088, "user_id": 2317928, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61GAZ.jpg?s=128&g=1", "display_name": "steel", "link": "https://stackoverflow.com/users/2317928/steel"}, "edited": false, "score": 0, "creation_date": 1423610074, "post_id": 28443145, "comment_id": 45216962, "body": "By looking in Chrome inspect."}, {"owner": {"reputation": 10088, "user_id": 2317928, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61GAZ.jpg?s=128&g=1", "display_name": "steel", "link": "https://stackoverflow.com/users/2317928/steel"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1423612635, "post_id": 28443145, "comment_id": 45217928, "body": "Sorry, @muistooshort I thought it was clear. I&#39;ve enhanced the example to try to clarify the code and what it would take to reproduce."}], "answers": [{"tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 3, "last_activity_date": 1423614637, "creation_date": 1423614637, "answer_id": 28444487, "question_id": 28443145, "link": "https://stackoverflow.com/questions/28443145/ruby-json-multi-word-strings-rendered-incorrectly-in-html/28444487#28444487", "title": "Ruby JSON Multi-Word Strings Rendered Incorrectly in HTML", "body": "<p>If you push past the browser's interpretation of your \"HTML\" and look directly at the source you should see something like this:</p>\n\n<pre><code>&lt;section data-hash={&amp;quot;subhash&amp;quot;:{&amp;quot;single&amp;quot;:&amp;quot;word&amp;quot;,&amp;quot;double&amp;quot;:&amp;quot;two words&amp;quot;}}&gt;\n</code></pre>\n\n<p>At least that's what I get with Rails4.2. That also gives me the same results that you're seeing when I look at the HTML in a DOM inspector.</p>\n\n<p>The browser is seeing that as:</p>\n\n<pre><code>&lt;section data-hash={\"subhash\":{\"single\":\"word\",\"double\":\"two words\"}}&gt;\n</code></pre>\n\n<p>and trying to make sense of it as HTML but that doesn't make sense as HTML so the browser just gets confused.</p>\n\n<p>If you add the outer quotes yourself:</p>\n\n<pre><code>&lt;section data-hash=\"&lt;%= @hash %&gt;\"&gt;\n                   ^            ^\n</code></pre>\n\n<p>then you'll get this in the HTML:</p>\n\n<pre><code>&lt;section data-hash=\"{&amp;quot;subhash&amp;quot;:{&amp;quot;single&amp;quot;:&amp;quot;word&amp;quot;,&amp;quot;double&amp;quot;:&amp;quot;two words&amp;quot;}}\"&gt;\n</code></pre>\n\n<p>and the quotes will be interpreted correctly as the <code>&amp;quot;</code>s will be seen as HTML encoded content for the <code>data-hash</code> attribute rather than a strange looking attempt at an HTML attribute.</p>\n"}], "owner": {"reputation": 10088, "user_id": 2317928, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61GAZ.jpg?s=128&g=1", "display_name": "steel", "link": "https://stackoverflow.com/users/2317928/steel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 633, "favorite_count": 0, "accepted_answer_id": 28444487, "answer_count": 1, "score": 1, "last_activity_date": 1423614642, "creation_date": 1423607500, "last_edit_date": 1423614642, "question_id": 28443145, "link": "https://stackoverflow.com/questions/28443145/ruby-json-multi-word-strings-rendered-incorrectly-in-html", "title": "Ruby JSON Multi-Word Strings Rendered Incorrectly in HTML", "body": "<p>My multi-word strings aren't being interpreted correctly in the DOM. How can I ensure JSON integrity from server to HTML with multi-word strings?</p>\n\n<p>In the Rails controller, I store a JSON object in a variable. That object is correctly formatted when I check in the server logs. That variable is then passed to a data attribute in the view via erb. However, the generated HTML is incorrect.</p>\n\n<pre><code># in the controller\n@hash = {'subhash' =&gt; {'single' =&gt; 'word', 'double' =&gt; 'two words' } }.to_json\nputs @hash.inspect\n\n# output in the server log\n=&gt; \"{\\\"subhash\\\":{\\\"single\\\":\\\"word\\\",\\\"double\\\":\\\"two words\\\"}}\"\n\n# view.html.erb\n&lt;section data-hash=&lt;%= @hash %&gt; &gt;&lt;/section&gt;\n\n# generated html, 'double' value is incorrect\n&lt;section data-hash=\"{\"subhash\":{\"single\":\"word\",\"double\":\"two\" words&amp;quot;}}&gt;\n\n# complete data value is not obtainable in the console\n&gt; $('section').data().hash\n&lt; \"{\"subhash\":{\"single\":\"word\",\"double\":\"two\"\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<pre><code># adding html_safe does not help\n{\"subhash\" =&gt; {\"single\" =&gt; \"word\", \"double\" =&gt; \"two words\" } }.to_json.html_safe\n\n# results in\n\"{\"subhash\":{\"single\":\"word\",\"double\":\"two\" words\"}}\n</code></pre>\n"}, {"tags": ["ruby", "windows", "cucumber", "pageobjects"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 971624, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6e1bd72b2ef0a82b9843615041c0e5f3?s=128&d=identicon&r=PG", "display_name": "Chester Tester", "link": "https://stackoverflow.com/users/971624/chester-tester"}, "edited": false, "score": 0, "creation_date": 1423670817, "post_id": 28443209, "comment_id": 45244133, "body": "That as my first thought, i originally had 1.0.3 did a gem install page-object which gave me 0.9.8 uninstalled it and re-installed 1.0.3 I still get the warning:"}, {"owner": {"reputation": 31, "user_id": 971624, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6e1bd72b2ef0a82b9843615041c0e5f3?s=128&d=identicon&r=PG", "display_name": "Chester Tester", "link": "https://stackoverflow.com/users/971624/chester-tester"}, "edited": false, "score": 0, "creation_date": 1423671292, "post_id": 28443209, "comment_id": 45244414, "body": "That as my first thought, i originally had 1.0.3 did a gem install page-object which gave me 0.9.8 uninstalled it and re-installed 1.0.3 I still get the warning:&lt;br&gt;*** DEPRECATION WARNING *** You are calling a method named search_type_lst= at c:/my_proj/features/step_definitions/test.rb:100:in &#39;block in (top (required)) *** This method does not exist in page-object so it is being passed to the driver. *** This feature will be removed in the near future. *** Please change your code to call the correct page-object method. *** If you are using functionality that does not exist in page-object"}], "tags": [], "owner": {"reputation": 7544, "user_id": 1085998, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/459252fca62e56c1131babdba2b1babe?s=128&d=identicon&r=PG", "display_name": "daremkd", "link": "https://stackoverflow.com/users/1085998/daremkd"}, "is_accepted": false, "score": 0, "last_activity_date": 1423608282, "last_edit_date": 1495540677, "creation_date": 1423607808, "answer_id": 28443209, "question_id": 28443136, "link": "https://stackoverflow.com/questions/28443136/is-page-object-select-list-deprecated/28443209#28443209", "title": "Is page object &#39;select list&#39; deprecated?", "body": "<p>The problem is most likely with the version. I've been using page object for a while in my projects and never encountered this problem. I'm using the latest version on <a href=\"https://rubygems.org/gems/page-object/\" rel=\"nofollow noreferrer\">RubyGems</a> which is 1.0.3. You might want to tell explicitly RubyGems which version to install (<a href=\"https://stackoverflow.com/questions/17026441/how-to-install-a-specific-version-of-a-ruby-gem\">this question</a> might be useful).</p>\n"}], "owner": {"reputation": 31, "user_id": 971624, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6e1bd72b2ef0a82b9843615041c0e5f3?s=128&d=identicon&r=PG", "display_name": "Chester Tester", "link": "https://stackoverflow.com/users/971624/chester-tester"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423609441, "creation_date": 1423607455, "last_edit_date": 1423609441, "question_id": 28443136, "link": "https://stackoverflow.com/questions/28443136/is-page-object-select-list-deprecated", "title": "Is page object &#39;select list&#39; deprecated?", "body": "<p>I have been using the page-object gem and I am getting a DEPRECATION WARNING when trying to use <code>select_list(:my_name, :id =&gt; 'foo')</code>.  Should I not use select list?</p>\n\n<p>page-object 0.9.8 (this is what gem install page-object gives me)</p>\n"}, {"tags": ["ruby", "input"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1423606941, "post_id": 28442867, "comment_id": 45215567, "body": "The user obviously needs a way to tell you when he or she is finished. That might be an escape key, for example, or two returns in a row.  You might consider using <a href=\"http://www.ruby-doc.org/core-2.2.0/IO.html#method-i-getc\" rel=\"nofollow noreferrer\">IO#getc</a> for input."}, {"owner": {"reputation": 10490, "user_id": 513951, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6cace4406e1ea825e78ec0134a5ea6fd?s=128&d=identicon&r=PG&f=1", "display_name": "user513951", "link": "https://stackoverflow.com/users/513951/user513951"}, "edited": false, "score": 0, "creation_date": 1423617873, "post_id": 28442867, "comment_id": 45219501, "body": "The easiest way to signal &quot;I&#39;m finished&quot; is with <code>Ctrl-D</code>. See my answer below."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1423607020, "post_id": 28443012, "comment_id": 45215611, "body": "Nice one. I didn&#39;t know about that. Maybe replace &quot;Gets has...&quot; with <a href=\"http://www.ruby-doc.org/core-2.2.0/IO.html#method-i-gets\" rel=\"nofollow noreferrer\">IO#gets</a> has...&quot;."}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1423607405, "post_id": 28443012, "comment_id": 45215842, "body": "Thanks Cary, included the link."}, {"owner": {"reputation": 531, "user_id": 1596461, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/0cfddcb66e02dc94ab17bd02db84aa1b?s=128&d=identicon&r=PG", "display_name": "Milksnake12", "link": "https://stackoverflow.com/users/1596461/milksnake12"}, "edited": false, "score": 1, "creation_date": 1423609489, "post_id": 28443012, "comment_id": 45216748, "body": "When I used this, it ran right over my next gets.       print &quot;Multi-line response: &quot; response = gets(&quot;done&quot;).chomp  print &quot;One line Response: &quot; oneLine = gets.chomp"}], "tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": true, "score": 9, "last_activity_date": 1423612632, "last_edit_date": 1423612632, "creation_date": 1423606891, "answer_id": 28443012, "question_id": 28442867, "link": "https://stackoverflow.com/questions/28442867/ruby-multi-line-input-for-only-one-input/28443012#28443012", "title": "Ruby Multi-Line Input for Only One Input", "body": "<p><a href=\"http://www.ruby-doc.org/core-2.2.0/IO.html#method-i-gets\" rel=\"noreferrer\"><code>IO#gets</code></a> has an optional parameter that allows you to specify a separator.  Here's an example:</p>\n\n<pre><code>puts \"Enter Response\"\nresponse = gets.chomp\n\nputs \"Enter a multi line response ending with a tab\"\nresponse = gets(\"\\t\\n\").chomp\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Enter Response\nhello\nEnter a multi line response ending with a tab\nok\nhow\nis\nthis\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7544, "user_id": 1085998, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/459252fca62e56c1131babdba2b1babe?s=128&d=identicon&r=PG", "display_name": "daremkd", "link": "https://stackoverflow.com/users/1085998/daremkd"}, "is_accepted": false, "score": 2, "last_activity_date": 1423608058, "last_edit_date": 1423608058, "creation_date": 1423607313, "answer_id": 28443110, "question_id": 28442867, "link": "https://stackoverflow.com/questions/28442867/ruby-multi-line-input-for-only-one-input/28443110#28443110", "title": "Ruby Multi-Line Input for Only One Input", "body": "<p>This method accepts text until the first empty line:</p>\n\n<pre><code>def multi_gets(all_text='')\n  until (text = gets) == \"\\n\"\n    all_text &lt;&lt; text\n  end\n  return all_text.chomp # you can remove the chomp if you'd like\nend\n\nputs 'Enter your text:'\np multi_gets\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Enter your text:\nabc\ndef\n\n\"abc\\ndef\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1078, "user_id": 11000412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lyxuc.jpg?s=128&g=1", "display_name": "Oliver Gaida", "link": "https://stackoverflow.com/users/11000412/oliver-gaida"}, "is_accepted": false, "score": 0, "last_activity_date": 1591617867, "creation_date": 1591617867, "answer_id": 62261671, "question_id": 28442867, "link": "https://stackoverflow.com/questions/28442867/ruby-multi-line-input-for-only-one-input/62261671#62261671", "title": "Ruby Multi-Line Input for Only One Input", "body": "<p>i use this:</p>\n\n<pre><code>in = STDIN.readline(sep=\"\\t\\n\")\nputs in\n</code></pre>\n\n<p> ends the input. For more info see <a href=\"https://ruby-doc.org/core-2.2.0/IO.html#method-i-readline\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.2.0/IO.html#method-i-readline</a></p>\n"}], "owner": {"reputation": 531, "user_id": 1596461, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/0cfddcb66e02dc94ab17bd02db84aa1b?s=128&d=identicon&r=PG", "display_name": "Milksnake12", "link": "https://stackoverflow.com/users/1596461/milksnake12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2452, "favorite_count": 0, "accepted_answer_id": 28443012, "answer_count": 3, "score": 4, "last_activity_date": 1591617867, "creation_date": 1423606232, "last_edit_date": 1423610584, "question_id": 28442867, "link": "https://stackoverflow.com/questions/28442867/ruby-multi-line-input-for-only-one-input", "title": "Ruby Multi-Line Input for Only One Input", "body": "<p>I have a small program that I'm working on that at one point I would like the user to be able to input a potentially multiline response. </p>\n\n<p>I've found the example with </p>\n\n<pre><code>$/ = \"END\"\nuser_input = STDIN.gets\nputs user_input\n</code></pre>\n\n<p>But this makes all inputs require the END keyword, which I would only need for the one input.</p>\n\n<p>How can I produce a multi-line input for just the one input?</p>\n"}, {"tags": ["ruby", "gem", "quickbooks"], "answers": [{"tags": [], "owner": {"reputation": 1022, "user_id": 4190203, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ab42486428f113dcac28a2b3c289b4f2?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Black", "link": "https://stackoverflow.com/users/4190203/peter-black"}, "is_accepted": false, "score": 0, "last_activity_date": 1423746840, "creation_date": 1423746840, "answer_id": 28478397, "question_id": 28442810, "link": "https://stackoverflow.com/questions/28442810/why-does-quickbooks-drop-class-and-account-values-when-i-send-invoice/28478397#28478397", "title": "Why does Quickbooks drop class and account values when I send Invoice?", "body": "<p>For anyone who has the same question - You can not pass class_ref or ar_account_ref directly to Invoice. I contacted QB and they replied: </p>\n\n<p>\"Invoice by Class is supported.\nInvoice picks up the Accounts for the Items added in lines. Separately adding accounts is not supported by the product, so service does not support it.\nAdding account in future is not in plan. QB Enterprise and QBO are different.\nTemplates support is not yet planned.\"</p>\n"}], "owner": {"reputation": 1022, "user_id": 4190203, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ab42486428f113dcac28a2b3c289b4f2?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Black", "link": "https://stackoverflow.com/users/4190203/peter-black"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423746840, "creation_date": 1423605975, "last_edit_date": 1423607003, "question_id": 28442810, "link": "https://stackoverflow.com/questions/28442810/why-does-quickbooks-drop-class-and-account-values-when-i-send-invoice", "title": "Why does Quickbooks drop class and account values when I send Invoice?", "body": "<p>I am trying to set the class_ref and ar_account_ref values in quickbooks. but it drops them when I submit the changes. My local object looks like this:</p>\n\n<pre><code>{\n           \"global_tax_calculation\" =&gt; nil,\n                               \"id\" =&gt; nil,\n                       \"sync_token\" =&gt; nil,\n                        \"meta_data\" =&gt; nil,\n                    \"custom_fields\" =&gt; nil,\n                  \"auto_doc_number\" =&gt; nil,\n                       \"doc_number\" =&gt; nil,\n                         \"txn_date\" =&gt; \"2014-12-31T16:46:04+00:00\",\n                     \"currency_ref\" =&gt; nil,\n                    \"exchange_rate\" =&gt; nil,\n                     \"private_note\" =&gt; nil,\n              \"linked_transactions\" =&gt; nil,\n                       \"line_items\" =&gt; [\n    [0] #&lt;Quickbooks::Model::InvoiceLineItem id: nil, line_num: nil, description: nil, amount: 50000.0, detail_type: SalesItemLineDetail, sales_line_item_detail: {\"item_ref\"=&gt;nil, \"class_ref\"=&gt;nil, \"unit_price\"=&gt;50000.0, \"rate_percent\"=&gt;nil, \"price_level_ref\"=&gt;nil, \"quantity\"=&gt;1, \"tax_code_ref\"=&gt;nil, \"service_date\"=&gt;\"2014-12-31T16:46:04+00:00\"}, sub_total_line_detail: nil, payment_line_detail: nil, discount_line_detail: nil&gt;\n],\n                   \"txn_tax_detail\" =&gt; nil,\n                     \"customer_ref\" =&gt; {\n     \"name\" =&gt; nil,\n    \"value\" =&gt; 97,\n     \"type\" =&gt; nil\n},\n                    \"customer_memo\" =&gt; nil,\n                  \"billing_address\" =&gt; nil,\n                 \"shipping_address\" =&gt; nil,\n                        \"class_ref\" =&gt; {\n     \"name\" =&gt; nil,\n    \"value\" =&gt; 5000000000000001652,\n     \"type\" =&gt; nil\n},\n                   \"sales_term_ref\" =&gt; nil,\n                         \"due_date\" =&gt; nil,\n                  \"ship_method_ref\" =&gt; nil,\n                        \"ship_date\" =&gt; nil,\n                     \"tracking_num\" =&gt; nil,\n                   \"ar_account_ref\" =&gt; {\n     \"name\" =&gt; nil,\n    \"value\" =&gt; 33,\n     \"type\" =&gt; nil\n},\n                     \"total_amount\" =&gt; 50000.0,\n                \"home_total_amount\" =&gt; nil,\n        \"apply_tax_after_discount?\" =&gt; nil,\n                     \"print_status\" =&gt; nil,\n                     \"email_status\" =&gt; nil,\n                          \"balance\" =&gt; nil,\n                          \"deposit\" =&gt; nil,\n                   \"department_ref\" =&gt; nil,\n               \"allow_ipn_payment?\" =&gt; nil,\n                       \"bill_email\" =&gt; nil,\n            \"allow_online_payment?\" =&gt; nil,\n\"allow_online_credit_card_payment?\" =&gt; nil,\n        \"allow_online_ach_payment?\" =&gt; nil\n}\n</code></pre>\n\n<p>But when I commit my changes and grab the invoice object back from Quickbooks, customer_ref and ar_account_ref both return nil. I am using the Quickbooks Ruby Gem and all of the other params I pass work fine. I have tried setting the object with:</p>\n\n<pre><code>  invoice.class_ref = Quickbooks::Model::BaseReference.new(33)\n  invoice.class_id = Quickbooks::Model::BaseReference.new(33)\n  invoice.class_id = 33\n  invoice.class_ref = 33\n</code></pre>\n\n<p>Any suggestions? Interestingly enough, I am able to create a line_item with  a class and get that setting to stick. So, I am under the impression that the problem lies with Quickbooks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "params"], "comments": [{"owner": {"reputation": 5245, "user_id": 3741729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zAt11.png?s=128&g=1", "display_name": "PatNowak", "link": "https://stackoverflow.com/users/3741729/patnowak"}, "edited": false, "score": 0, "creation_date": 1423606034, "post_id": 28442748, "comment_id": 45215079, "body": "Your <code>routes.rb</code> should be prepared for that situation. You have change it and create access to particular page you want with <code>applyjobid</code> (better idea for that name is <code>apply_job_id</code>)."}, {"owner": {"reputation": 155, "user_id": 4511832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4fa0e767b81a41991f416e4322d2e38d?s=128&d=identicon&r=PG&f=1", "display_name": "reme", "link": "https://stackoverflow.com/users/4511832/reme"}, "reply_to_user": {"reputation": 5245, "user_id": 3741729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zAt11.png?s=128&g=1", "display_name": "PatNowak", "link": "https://stackoverflow.com/users/3741729/patnowak"}, "edited": false, "score": 0, "creation_date": 1423606224, "post_id": 28442748, "comment_id": 45215196, "body": "Hi Pipes, thanks I&#39;ll try tomorrow."}], "answers": [{"comments": [{"owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "reply_to_user": {"reputation": 155, "user_id": 4511832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4fa0e767b81a41991f416e4322d2e38d?s=128&d=identicon&r=PG&f=1", "display_name": "reme", "link": "https://stackoverflow.com/users/4511832/reme"}, "edited": false, "score": 0, "creation_date": 1423606351, "post_id": 28442820, "comment_id": 45215253, "body": "sure, hope it helps you."}, {"owner": {"reputation": 155, "user_id": 4511832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4fa0e767b81a41991f416e4322d2e38d?s=128&d=identicon&r=PG&f=1", "display_name": "reme", "link": "https://stackoverflow.com/users/4511832/reme"}, "edited": false, "score": 0, "creation_date": 1423607347, "post_id": 28442820, "comment_id": 45215802, "body": "I did what you told me to do, and ... It works perfectly, thanks a lot for your quick response."}], "tags": [], "owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "is_accepted": true, "score": 3, "last_activity_date": 1423606023, "creation_date": 1423606023, "answer_id": 28442820, "question_id": 28442748, "link": "https://stackoverflow.com/questions/28442748/ruby-on-rails-issue-with-params/28442820#28442820", "title": "Ruby on rails : Issue with Params", "body": "<p>What's wrong here is you are finding by id as you are using find, and you are passing applyjobid\nSo you have to use find_by_applyjobid </p>\n\n<p>try this</p>\n\n<pre><code>def show\n   @jobdetail = Jobdescription.find_by_applyjobid(params[:applyjobid])\nend\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 4511832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4fa0e767b81a41991f416e4322d2e38d?s=128&d=identicon&r=PG&f=1", "display_name": "reme", "link": "https://stackoverflow.com/users/4511832/reme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 28442820, "answer_count": 1, "score": -1, "last_activity_date": 1423606142, "creation_date": 1423605786, "last_edit_date": 1423606142, "question_id": 28442748, "link": "https://stackoverflow.com/questions/28442748/ruby-on-rails-issue-with-params", "title": "Ruby on rails : Issue with Params", "body": "<p>I'm developing a job board where the companies can submit job ads With jobdescriptions_controller, I also have an uuid field as ID for the outside world called \"applyjobid\", but now for the outside world I have created jobdetails_controller in order to find the jobdescription. </p>\n\n<p>So, when I goto <a href=\"http://localhost:3000/jobdetails/show?applyjobid=54da4118-0ba3-4375-ae87-6fa32201a369\" rel=\"nofollow\">http://localhost:3000/jobdetails/show?applyjobid=54da4118-0ba3-4375-ae87-6fa32201a369</a>  </p>\n\n<p>I have this error : ActiveRecord::RecordNotFound at /jobdetails/show\nCouldn't find Jobdescription with 'id'=54da4118-0ba3-4375-ae87-6fa32201a369</p>\n\n<p>If I go to <a href=\"http://localhost:3000/jobdetails/show?applyjobid=1\" rel=\"nofollow\">http://localhost:3000/jobdetails/show?applyjobid=1</a> it works !!! but I really want to use uuid.</p>\n\n<p>If you can tell me what is the problem, it would be very appreciated, thanks in advance.</p>\n\n<p>Schema.rb</p>\n\n<pre><code>  create_table \"jobdescriptions\", force: true do |t|\n    t.string   \"applyjobid\"\n    t.string   \"job_title\"\n    t.string   \"department\"\n    t.text     \"shift\"\n    t.string   \"work_location\"\n    t.string   \"position_supervisor\"\n    t.string   \"supervisor_position_supervisor\"\n    t.decimal  \"rate_pay\"\n    t.text     \"benefits\"\n    t.text     \"other_benefits\"\n    t.text     \"job_summary\"\n    t.text     \"job_duties\"\n    t.text     \"tasks\"\n    t.text     \"results\"\n    t.text     \"responsibilities\"\n    t.text     \"knowledge\"\n    t.text     \"skills\"\n    t.text     \"abilities\"\n    t.text     \"physical_requirement\"\n    t.text     \"work_envir_condition\"\n    t.text     \"protective_clothing_and_devices_required\"\n    t.text     \"tools_or_equipment_required\"\n    t.text     \"qualifications\"\n    t.text     \"education_and_training\"\n    t.text     \"license_certification\"\n    t.text     \"experience\"\n    t.text     \"aptitudes_interests_temperament\"\n    t.text     \"roles_relationships\"\n    t.text     \"supervisory_responsibility\"\n    t.text     \"advancement_promotion_opportunities\"\n    t.string   \"internal_comment\"\n    t.string   \"submited_by\"\n    t.string   \"approved_by\"\n    t.string   \"statut\"\n    t.date     \"from_date\"\n    t.date     \"end_date\"\n    t.integer  \"user_id\"\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n  end\n</code></pre>\n\n<p>jobdescriptions_controller.rb</p>\n\n<pre><code>class JobdescriptionsController &lt; ApplicationController\n  layout 'application'\n  def new\n    @jobdescription = Jobdescription.new\n  end\n  def create\n    @jobdescription = current_user.jobdescriptions.create(jobdescription_params)\n    redirect_to new_jobdescription_path\n  end\nprivate\n  def jobdescription_params\n    params.require(:jobdescription).permit(:applyjobid, :job_title,  )\n  end\nend\n</code></pre>\n\n<p>jobdetails_controller.rb</p>\n\n<pre><code>class JobdetailsController &lt; ApplicationController\n  layout 'application'\n\n  def show\n    @jobdetail = Jobdescription.find(params[:applyjobid])\n  end\n\n\nend\n</code></pre>\n\n<p>routes.rb</p>\n\n<pre><code>Rails.application.routes.draw do\n\n\n  resources :tests\n\n\n  devise_for :users\n  resources :timesheets\n  resources :expenses\n  resources :jobdescriptions\n  resources :jobdetails\n  root :to =&gt; 'dashbords#index'\n</code></pre>\n\n<p>thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "rabl"], "comments": [{"owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "edited": false, "score": 0, "creation_date": 1423604842, "post_id": 28442348, "comment_id": 45214457, "body": "Can you use <code>.select</code> like <code>Spree::Product.select(&quot;name, description&quot;)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3728, "user_id": 2612713, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/0a7f606f9e135589780620d1160d941e?s=128&d=identicon&r=PG&f=1", "display_name": "neo", "link": "https://stackoverflow.com/users/2612713/neo"}, "edited": false, "score": 0, "creation_date": 1423605821, "post_id": 28442503, "comment_id": 45214980, "body": "I prefer the rabl way, I updated the question, do I need to make it <code>belongs_to :product</code>"}, {"owner": {"reputation": 15775, "user_id": 634513, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/328293e03f2d7b888ecf197ec1ffb7a7?s=128&d=identicon&r=PG", "display_name": "Ismael Abreu", "link": "https://stackoverflow.com/users/634513/ismael-abreu"}, "reply_to_user": {"reputation": 3728, "user_id": 2612713, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/0a7f606f9e135589780620d1160d941e?s=128&d=identicon&r=PG&f=1", "display_name": "neo", "link": "https://stackoverflow.com/users/2612713/neo"}, "edited": false, "score": 0, "creation_date": 1423606800, "post_id": 28442503, "comment_id": 45215493, "body": "Nevermind. It seems you must use the relation type. For exemple <code>product.up_sells</code>"}], "tags": [], "owner": {"reputation": 15775, "user_id": 634513, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/328293e03f2d7b888ecf197ec1ffb7a7?s=128&d=identicon&r=PG", "display_name": "Ismael Abreu", "link": "https://stackoverflow.com/users/634513/ismael-abreu"}, "is_accepted": true, "score": 1, "last_activity_date": 1423604927, "creation_date": 1423604927, "answer_id": 28442503, "question_id": 28442348, "link": "https://stackoverflow.com/questions/28442348/ruby-map-json-multiple-but-not-all-attributes-with-rabl/28442503#28442503", "title": "Ruby map JSON multiple but not all attributes with RABL", "body": "<p>Well, there probably multiple ways to do it.</p>\n\n<p>You can use rails <code>#as_json</code> method.</p>\n\n<pre><code>node(:relations) do |p|\n  related = p.relations.pluck(:related_to_id)\n  Spree::Product.find(related).as_json(only: [:name, :description])\nend\n</code></pre>\n\n<p>Or you can try to do it the rabl way.</p>\n\n<pre><code>child :related_products do\n  attributes :name, :description\nend\n</code></pre>\n\n<p>But for this you might need to change your model a bit.</p>\n"}], "owner": {"reputation": 3728, "user_id": 2612713, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/0a7f606f9e135589780620d1160d941e?s=128&d=identicon&r=PG&f=1", "display_name": "neo", "link": "https://stackoverflow.com/users/2612713/neo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "accepted_answer_id": 28442503, "answer_count": 1, "score": 0, "last_activity_date": 1423619396, "creation_date": 1423604455, "last_edit_date": 1423619396, "question_id": 28442348, "link": "https://stackoverflow.com/questions/28442348/ruby-map-json-multiple-but-not-all-attributes-with-rabl", "title": "Ruby map JSON multiple but not all attributes with RABL", "body": "<p>I have the following Rabl in my views:</p>\n\n<pre><code>node(:relations) do |p|\n  related = p.relations.pluck(:related_to_id)\n  Spree::Product.find(related)\nend\n</code></pre>\n\n<p>This renders the following: </p>\n\n<pre><code>\"relations\": [\n{\n\"product\": {\n\"id\": 2,\n\"name\": \"T-SHIRT\",\n\"description\": \"Awesome T shirts\"\n\"created_at\": \"...\"\n\"updated_at: \"...\"\n .\n .\n .\n bunch of other columns that I don't need. \n</code></pre>\n\n<p>My question is how do I only grab <code>:name</code> and <code>:description</code>, so that the JSON output looks like: </p>\n\n<pre><code>\"relations\": [\n    {\n    \"product\": {\n    \"name\": \"T-SHIRT\",\n    \"description\": \"Awesome T shirts\"\n    }\n ]\n</code></pre>\n\n<p>I've tried mapping it, <code>Spree::Product.find(related).map { |r| [r.name, r.description] }</code></p>\n\n<p>But that returns only the values, like so:</p>\n\n<pre><code>\"relations\": [\n\"T-SHIRT\",\n\"Awesome T shirts\"\n]\n</code></pre>\n\n<p>Thank you for your help! </p>\n\n<p><strong>UPDATE</strong>:</p>\n\n<p>When I write:</p>\n\n<pre><code>child :related_products do\n  attributes :name, :description\nend\n</code></pre>\n\n<p>I get: </p>\n\n<pre><code>\"spree_relations\": [\n{}\n]\n</code></pre>\n\n<p>Link to model:</p>\n\n<p><a href=\"https://github.com/spree-contrib/spree_related_products/blob/master/app/models/spree/relation.rb\" rel=\"nofollow\">https://github.com/spree-contrib/spree_related_products/blob/master/app/models/spree/relation.rb</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "edited": false, "score": 0, "creation_date": 1423603500, "post_id": 28442040, "comment_id": 45213764, "body": "Can you please format it properly."}, {"owner": {"reputation": 2859, "user_id": 3945932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1794745acd9e572c24558b78b48d597?s=128&d=identicon&r=PG", "display_name": "ptd", "link": "https://stackoverflow.com/users/3945932/ptd"}, "edited": false, "score": 0, "creation_date": 1423603668, "post_id": 28442040, "comment_id": 45213867, "body": "You have two redirects if you create a <code>User</code> and there is a <code>Stripe::CardError</code> (in the <code>elsif</code> section)."}, {"owner": {"reputation": 5245, "user_id": 3741729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zAt11.png?s=128&g=1", "display_name": "PatNowak", "link": "https://stackoverflow.com/users/3741729/patnowak"}, "reply_to_user": {"reputation": 2859, "user_id": 3945932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1794745acd9e572c24558b78b48d597?s=128&d=identicon&r=PG", "display_name": "ptd", "link": "https://stackoverflow.com/users/3945932/ptd"}, "edited": false, "score": 0, "creation_date": 1423605790, "post_id": 28442040, "comment_id": 45214960, "body": "Agree with @ptd. You should terminate in <code>rescue</code> section or change order <code>begin... end</code> with &#39;if...elsif...else` and use <code>flash[:alert]...</code> only once."}], "answers": [{"tags": [], "owner": {"reputation": 22836, "user_id": 152786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/581hP.jpg?s=128&g=1", "display_name": "smathy", "link": "https://stackoverflow.com/users/152786/smathy"}, "is_accepted": false, "score": 1, "last_activity_date": 1423604217, "creation_date": 1423604217, "answer_id": 28442276, "question_id": 28442040, "link": "https://stackoverflow.com/questions/28442040/rails-help-spot-the-multiple-redirect-in-this-action-please/28442276#28442276", "title": "Rails: Help spot the multiple redirect in this action please", "body": "<p>When you rescue an exception, execution of your code continues on from there as normal, so your <code>redirect_to \"/st_buy_now\"</code> in your <code>rescue</code> block plus the <code>redirect_to :controller =&gt; 'misc', :action =&gt; 'create_1'</code> you're getting the error on are your two redirects.</p>\n\n<p>You probably want to throw a <code>return</code> in that <code>rescue</code> block.</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 4122159, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6f2e44802489ae83ef8b7437de755a4a?s=128&d=identicon&r=PG&f=1", "display_name": "willcom", "link": "https://stackoverflow.com/users/4122159/willcom"}, "edited": false, "score": 0, "creation_date": 1423686970, "post_id": 28442370, "comment_id": 45253676, "body": "Thanks. I&#39;m not quite there yet but this helps. When I try the suggested code I keep getting Please try again. It&#39;s got me thinking though if I should be leaving a user on the database if the stripe customer is not created due to an error. I wonder what best practice is there, but that&#39;s another question."}], "tags": [], "owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "is_accepted": false, "score": 1, "last_activity_date": 1423604534, "creation_date": 1423604534, "answer_id": 28442370, "question_id": 28442040, "link": "https://stackoverflow.com/questions/28442040/rails-help-spot-the-multiple-redirect-in-this-action-please/28442370#28442370", "title": "Rails: Help spot the multiple redirect in this action please", "body": "<p>What about this, if customer got created proceed further and redirect and if error occur redirect_to \"/st_buy_now\"</p>\n\n<pre><code>def st_buy_now_process\n    #create user in system\n    encrypted = BCrypt::Password.create(params[:password])\n    if (User.where(\"email = ?\", params[:email]).exists?)    \n       flash[:alert] = 'User exists. Please try again.'    \n       redirect_to \"/st_buy_now\"          \n    elsif (User.create(email: params[:email], encrypted_password: encrypted))\n        begin\n          customer = Stripe::Customer.create({:description =&gt; params[:email],:card =&gt; {:number =&gt; params[:cc], :exp_month =&gt; params[:exp_1],:exp_year =&gt; params[:exp_2], :cvc =&gt; params[:cvc], :name =&gt; params[:name]},:email =&gt; params['email'] })               \n          p=\"#{params['plan']}_#{params['billing-cycle']}\"\n          subscr = customer.subscriptions.create(:plan =&gt; p)\n          user = User.where(\"email = ?\", params[:email]).first\n          user.payg = ({:cus_id =&gt; customer.id, :subscr_id =&gt; subscr.id}).to_json\n          user.plan = p\n          user.save\n          RestClient.post \"https://api:key-nnnn\",\n            :from =&gt; \"&lt;test@test.com&gt;\",\n            :to =&gt; \"#{params[:email]}\",\n            :subject =&gt; \"Welcome to test\",\n            :text =&gt; \"\\n\\n\\n#{File.read(\"app/views/misc/mail_sign_up.txt\")}\\n\\n\\n\"\n          cookies['logged_in'] = {\n            :value =&gt; '1',\n          }\n          cookies['us_id'] = {\n            :value =&gt; params[:email],\n          }      \n          flash[:notice] = 'Registration successful.' \n          redirect_to :controller =&gt; 'misc', :action =&gt; 'create_1'\n        rescue Stripe::CardError =&gt; e          \n          flash[:alert] = 'Please try again'\n          redirect_to \"/st_buy_now\"\n        end  \n    else\n      flash[:alert] = 'Please try again'\n      redirect_to \"/st_buy_now\"\n    end\n  end  \n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 4122159, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6f2e44802489ae83ef8b7437de755a4a?s=128&d=identicon&r=PG&f=1", "display_name": "willcom", "link": "https://stackoverflow.com/users/4122159/willcom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1423604534, "creation_date": 1423603357, "last_edit_date": 1423604099, "question_id": 28442040, "link": "https://stackoverflow.com/questions/28442040/rails-help-spot-the-multiple-redirect-in-this-action-please", "title": "Rails: Help spot the multiple redirect in this action please", "body": "<p>I have been through a number of similar questions but still can't spot the multiple redirects in my action. Can you help me spot it? Also are there any generic tips for avoiding the so called Double Render Error?</p>\n\n<p>The code is as follows:</p>\n\n<pre><code>def st_buy_now_process\n  #create user in system\n  encrypted = BCrypt::Password.create(params[:password])\n  if (User.where(\"email = ?\", params[:email]).exists?)    \n    flash[:alert] = 'User exists. Please try again.'    \n    redirect_to \"/st_buy_now\"          \n  elsif (User.create(email: params[:email], encrypted_password: encrypted))\n    begin\n      customer = Stripe::Customer.create({\n        :description =&gt; params[:email],\n        :card =&gt; {\n          :number =&gt; params[:cc],\n          :exp_month =&gt; params[:exp_1],\n          :exp_year =&gt; params[:exp_2],\n          :cvc =&gt; params[:cvc],\n          :name =&gt; params[:name]\n        },\n        :email =&gt; params['email']\n      })               \n      p=\"#{params['plan']}_#{params['billing-cycle']}\"\n      subscr = customer.subscriptions.create(:plan =&gt; p)\n      user = User.where(\"email = ?\", params[:email]).first\n      user.payg = ({:cus_id =&gt; customer.id, :subscr_id =&gt; subscr.id}).to_json\n      user.plan = p\n      user.save\n    rescue Stripe::CardError =&gt; e          \n      flash[:alert] = 'Please try again'\n      redirect_to \"/st_buy_now\"\n    end  \n    RestClient.post \"https://api:key-nnnn\",\n      :from =&gt; \"&lt;test@test.com&gt;\",\n      :to =&gt; \"#{params[:email]}\",\n      :subject =&gt; \"Welcome to test\",\n      :text =&gt; \"\\n\\n\\n#{File.read(\"app/views/misc/mail_sign_up.txt\")}\\n\\n\\n\"\n    cookies['logged_in'] = {\n      :value =&gt; '1',\n    }\n    cookies['us_id'] = {\n      :value =&gt; params[:email],\n    }      \n    flash[:notice] = 'Registration successful.' \n    redirect_to :controller =&gt; 'misc', :action =&gt; 'create_1'\n  else\n    flash[:alert] = 'Please try again'\n    redirect_to \"/st_buy_now\"\n  end\nend\n</code></pre>\n\n<p>The error message highlights the last but one redirect - the line after the <code>\"Registration successful.\"</code> alert.</p>\n"}, {"tags": ["ruby", "loops"], "answers": [{"tags": [], "owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "is_accepted": true, "score": 6, "last_activity_date": 1423602872, "creation_date": 1423602872, "answer_id": 28441905, "question_id": 28441840, "link": "https://stackoverflow.com/questions/28441840/idiomatic-way-of-merging-arrays-in-ruby/28441905#28441905", "title": "Idiomatic way of merging arrays in Ruby?", "body": "<p>Try this:</p>\n\n<pre><code>array1.zip(array2).map(&amp;:flatten) #=&gt; [[1, 2, :a], [3, 4, :b]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1423606425, "creation_date": 1423606425, "answer_id": 28442907, "question_id": 28441840, "link": "https://stackoverflow.com/questions/28441840/idiomatic-way-of-merging-arrays-in-ruby/28442907#28442907", "title": "Idiomatic way of merging arrays in Ruby?", "body": "<pre><code>(array1.transpose+[array2]).transpose\n  #=&gt; [[1, 2, :a], [3, 4, :b]] \n</code></pre>\n"}], "owner": {"reputation": 653, "user_id": 3689403, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e7c44f5971856c4b5d94cc2e41c8e629?s=128&d=identicon&r=PG&f=1", "display_name": "SharkLaser", "link": "https://stackoverflow.com/users/3689403/sharklaser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 28441905, "answer_count": 2, "score": 1, "last_activity_date": 1423606425, "creation_date": 1423602664, "question_id": 28441840, "link": "https://stackoverflow.com/questions/28441840/idiomatic-way-of-merging-arrays-in-ruby", "title": "Idiomatic way of merging arrays in Ruby?", "body": "<p>Given i have two arrays that look like this: </p>\n\n<pre><code>array1 = [\n  [1, 2],\n  [3, 4],\n]\n\narray2 = [:a, :b]\n</code></pre>\n\n<p>What is the best way to combine them into a new array that looks like:</p>\n\n<pre><code>[\n  [1, 2, :a],\n  [3, 4, :b],\n]\n</code></pre>\n\n<p>I was hoping there's a way to do this without iterating over one of the arrays and using it's index to grab an element from the other array... Is there a better more ruby way?</p>\n"}, {"tags": ["javascript", "ruby", "memoization"], "comments": [{"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 0, "creation_date": 1423602647, "post_id": 28441821, "comment_id": 45213276, "body": "You&#39;re essentially asking for C&#39;s <code>static</code> when in a function, right?"}, {"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 0, "creation_date": 1423602681, "post_id": 28441821, "comment_id": 45213294, "body": "This might be a valid use for a global variable."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 0, "creation_date": 1423602694, "post_id": 28441821, "comment_id": 45213310, "body": "@Linuxios No, it&#39;s really not"}, {"owner": {"reputation": 5112, "user_id": 1849876, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/KpjC2.jpg?s=128&g=1", "display_name": "wmock", "link": "https://stackoverflow.com/users/1849876/wmock"}, "reply_to_user": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 0, "creation_date": 1423602709, "post_id": 28441821, "comment_id": 45213316, "body": "Sorry @Linuxios I&#39;m not very familiar with C so I&#39;m not sure if  <code>static</code> addresses my question"}, {"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1423602755, "post_id": 28441821, "comment_id": 45213347, "body": "@meagar: How isn&#39;t it? Values that persist between invocations of a function. That&#39;s what static means in a function in C, and that&#39;s what the OP is trying to do in Ruby."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 0, "creation_date": 1423602815, "post_id": 28441821, "comment_id": 45213387, "body": "@Linuxios A global variable is not the solution to this problem"}, {"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1423602998, "post_id": 28441821, "comment_id": 45213507, "body": "@meagar: I disagree. This is <b>immutable</b> global data that is valid anywhere in a program."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 1, "creation_date": 1423604552, "post_id": 28441821, "comment_id": 45214301, "body": "No: <a href=\"http://pastebin.com/UYGTGQiu\" rel=\"nofollow noreferrer\">pastebin.com/UYGTGQiu</a>; Use real names, not <code>Placeholder</code>; use arrays, not objects; use <code>||=</code> to memoize when possible; use <code>&lt;do something&gt; if &lt;condition&gt;</code>, <i>never</i> <code>if &lt;condition&gt; then do something; end</code>."}, {"owner": {"reputation": 5112, "user_id": 1849876, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/KpjC2.jpg?s=128&g=1", "display_name": "wmock", "link": "https://stackoverflow.com/users/1849876/wmock"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1423604784, "post_id": 28441821, "comment_id": 45214426, "body": "Thanks for the suggestions @meagar"}], "answers": [{"comments": [{"owner": {"reputation": 5112, "user_id": 1849876, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/KpjC2.jpg?s=128&g=1", "display_name": "wmock", "link": "https://stackoverflow.com/users/1849876/wmock"}, "edited": false, "score": 0, "creation_date": 1423603269, "post_id": 28441879, "comment_id": 45213658, "body": "Thanks for the input @meagar, I&#39;ve updated my question with an example. Can you confirm if this is what you mean?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1423615818, "post_id": 28441879, "comment_id": 45218905, "body": "&quot;You cannot have functions that do not belong to objects.&quot; \u2013 Of course you can: <code>-&gt; x {x}</code> is the identity function and doesn&#39;t belong to any object, in fact, it is an object itself."}], "tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": false, "score": 2, "last_activity_date": 1423602790, "creation_date": 1423602790, "answer_id": 28441879, "question_id": 28441821, "link": "https://stackoverflow.com/questions/28441821/creating-a-cache-in-ruby-methods/28441879#28441879", "title": "Creating a cache in Ruby methods", "body": "<blockquote>\n  <p>... a class structure when I don't really intend to create instances of Placeholder</p>\n</blockquote>\n\n<p>Well, there's your problem.</p>\n\n<p>Ruby is an object-oriented language. You cannot have functions that do not belong to objects. <em>Every</em> method is invoked on an object.</p>\n\n<p>You should simply create an instance of <code>Placeholder</code> (and give it an appropriate name like <code>FibonacciCalculator</code>) and make your cache a simple instance variable on that object.</p>\n"}, {"comments": [{"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1423603101, "post_id": 28441956, "comment_id": 45213558, "body": ". . .  not too happy with the method name <code>.series</code>, but cannot think of anything better"}, {"owner": {"reputation": 5112, "user_id": 1849876, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/KpjC2.jpg?s=128&g=1", "display_name": "wmock", "link": "https://stackoverflow.com/users/1849876/wmock"}, "edited": false, "score": 0, "creation_date": 1423603623, "post_id": 28441956, "comment_id": 45213841, "body": "Wow this is exactly what I was hoping to be able to do - although I didn&#39;t realize that you can create instance variables in a module. Conceptually though, what does <code>instance variable</code> mean here since you&#39;re not creating instances of the module?"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 3, "creation_date": 1423603709, "post_id": 28441956, "comment_id": 45213886, "body": "The module is an instance of the <code>Module</code> class. It&#39;s turtles all the way down in Ruby."}, {"owner": {"reputation": 5112, "user_id": 1849876, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/KpjC2.jpg?s=128&g=1", "display_name": "wmock", "link": "https://stackoverflow.com/users/1849876/wmock"}, "reply_to_user": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1423604038, "post_id": 28441956, "comment_id": 45214053, "body": "Thanks for the explanation @Max - this is a slight aside but what happens to the <code>@cache</code> instance variable when you <code>include</code> the <code>Fibonacci</code> module into a class? Will the instances of the class be able to access <code>@cache</code>?"}, {"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "reply_to_user": {"reputation": 5112, "user_id": 1849876, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/KpjC2.jpg?s=128&g=1", "display_name": "wmock", "link": "https://stackoverflow.com/users/1849876/wmock"}, "edited": false, "score": 1, "creation_date": 1423604240, "post_id": 28441956, "comment_id": 45214155, "body": "@wmock: No they will each have their own <code>@cache</code> variables. So if you are looking to do something more generic and sophisticated, you would probably consider having a dedicated caching/memoisation module/class, rather than this ad-hoc cache for a single method."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1423658384, "post_id": 28441956, "comment_id": 45236027, "body": "I would rename <code>series</code> to <code>call</code>, which is the standard name in Ruby for indicating that something is a &quot;function&quot;. Plus, it allows you to call it as <code>Fibonacci.(5)</code>."}, {"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1423658606, "post_id": 28441956, "comment_id": 45236155, "body": "@J&#246;rgWMittag: I&#39;ve not seen that before. Perhaps <code>:[]</code> would be nice too - allowing <code>Fibonacci[ 5 ]</code> - although I think both conventions would be OK, I also think making the code nicer is not answering the OP&#39;s question, and further differences from their original code could distract from the message."}], "tags": [], "owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "is_accepted": true, "score": 4, "last_activity_date": 1423603801, "last_edit_date": 1423603801, "creation_date": 1423603055, "answer_id": 28441956, "question_id": 28441821, "link": "https://stackoverflow.com/questions/28441821/creating-a-cache-in-ruby-methods/28441956#28441956", "title": "Creating a cache in Ruby methods", "body": "<p>When you don't need instances, then you can use a <code>Module</code> with a singleton method:</p>\n\n<pre><code>module Fibonacci\n  @cache = {}\n\n  def self.series(num)\n    if @cache[num] then return @cache[num]; end\n    if num  &lt; 0 then raise 'Negative numbers not allowed'; end\n    if num == 0 then return 0; end\n    if num == 1 then return 1; end\n\n    @cache[num] = series(num - 1) + series(num - 2)\n  end\nend\n\nputs Fibonacci.series(5) # results in 5\n</code></pre>\n\n<p>Note that for the cache, an instance variable on the <code>Fibonacci</code> module works just as well as a class variable (and for some extended uses, it could be better). It works because the module Fibonacci is an instance of <code>Module</code> - it is just the same as any other instance variable in that respect.</p>\n"}, {"tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": false, "score": 2, "last_activity_date": 1423604486, "creation_date": 1423604486, "answer_id": 28442359, "question_id": 28441821, "link": "https://stackoverflow.com/questions/28441821/creating-a-cache-in-ruby-methods/28442359#28442359", "title": "Creating a cache in Ruby methods", "body": "<p>You can also store the cache using a closure, which is similar to how javascript would do it.</p>\n\n<pre><code>def memoize func\n  cache = {}\n  proc do |*args|\n    next cache[args] if cache[args]\n    cache[args] = func[*args]\n  end\nend\n\ndef slow_double x\n  sleep 2\n  x * 2\nend\n\nmemoized_double = memoize(method :slow_double)\n\nmemoized_double[4] # takes 2 seconds\nmemoized_double[4] # returns instantly\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5112, "user_id": 1849876, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/KpjC2.jpg?s=128&g=1", "display_name": "wmock", "link": "https://stackoverflow.com/users/1849876/wmock"}, "edited": false, "score": 0, "creation_date": 1423683374, "post_id": 28454504, "comment_id": 45251719, "body": "Thanks for showing me the cool stuff with the latest version of JavaScript! @J&#246;rg W Mittag"}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 3, "last_activity_date": 1494764612, "last_edit_date": 1494764612, "creation_date": 1423658101, "answer_id": 28454504, "question_id": 28441821, "link": "https://stackoverflow.com/questions/28441821/creating-a-cache-in-ruby-methods/28454504#28454504", "title": "Creating a cache in Ruby methods", "body": "<p>A literal translation of your ECMAScript version would be this:</p>\n\n<pre><code>fibonacci = -&gt; {\n  cache = {} # cache for future calculations\n\n  -&gt; num {\n    raise ArgumentError, 'Negative numbers not allowed' if (num &lt; 0)\n    return 0 if num.zero?\n    return 1 if num == 1\n\n    cache[num] ||= fibonacci.(num - 1) + fibonacci.(num - 2)\n  }\n}.()\n\nfibonacci.(5)\n# =&gt; 5\nfibonacci.binding.local_variable_get(:cache)\n# =&gt; {2=&gt;1, 3=&gt;2, 4=&gt;3, 5=&gt;5}\n</code></pre>\n\n<p>By the way, there are a couple of simplifications we could do: instead of returning <code>0</code> if <code>num</code> is <code>0</code> and returning <code>1</code> if <code>num</code> is <code>1</code>, we could just return <code>num</code> if <code>num</code> is either <code>0</code> or <code>1</code> (or <code>num &lt;= 1</code>). And in fact, we can get rid of that whole condition altogether by simply pre-initializing the <code>cache</code> with the values for <code>0</code> and <code>1</code>. Also, the cache can just be an <code>Array</code>, since the indices are just a contiguous range of <code>Integer</code>s:</p>\n\n<pre><code>fibonacci = -&gt; {\n  cache = [0, 1] # cache for future calculations\n\n  -&gt; num {\n    raise ArgumentError, 'Negative numbers not allowed' if (num &lt; 0)\n    cache[num] ||= fibonacci.(num - 1) + fibonacci.(num - 2)\n  }\n}.()\n</code></pre>\n\n<p>Interestingly, if we write that in modern ECMAScript, then the relationship becomes obvious:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const fibonacci = (() =&gt; {\r\n    const cache = [0, 1, 1]; // cache for future calculations\r\n\r\n    return num =&gt; {\r\n        if (num &lt; 0) throw new Error('Negative numbers not allowed');\r\n        return cache[num] = cache[num] || fibonacci(num - 1) + fibonacci(num - 2);\r\n    };\r\n})();\r\n\r\nconsole.log(fibonacci(5));</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Which in old-school ECMAScript would be this:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var fibonacci = function () {\r\n    var cache = [0, 1, 1]; // cache for future calculations\r\n\r\n    return function (num) {\r\n        if (num &lt; 0) throw new Error('Negative numbers not allowed');\r\n        return cache[num] = cache[num] || fibonacci(num - 1) + fibonacci(num - 2);\r\n    };\r\n}();\r\n\r\nconsole.log(fibonacci(5));</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 5112, "user_id": 1849876, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/KpjC2.jpg?s=128&g=1", "display_name": "wmock", "link": "https://stackoverflow.com/users/1849876/wmock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 344, "favorite_count": 1, "accepted_answer_id": 28441956, "answer_count": 4, "score": 1, "last_activity_date": 1494764612, "creation_date": 1423602588, "last_edit_date": 1423605061, "question_id": 28441821, "link": "https://stackoverflow.com/questions/28441821/creating-a-cache-in-ruby-methods", "title": "Creating a cache in Ruby methods", "body": "<p>In <strong>JavaScript</strong>, it is fairly simple to memoize a function like Fibonacci:</p>\n\n<pre><code>// In JavaScript\n\nvar fibonacci = (function () {\n  var cache = {}; // cache for future calculations\n\n  return function (num) {\n    if (num &lt; 0)    throw new Error('Negative numbers not allowed');\n    if (num === 0)  return 0;\n    if (num === 1)  return 1;\n\n    cache[num] = cache[num] || fibonacci(num - 1) + fibonacci(num - 2);\n    return cache[num];\n  };\n})();\n\nconsole.log( fibonacci(5) ); // results in 5\nconsole.dir( fibonacci ); // you can inspect the closure scope and see that the cache object saves the values for future use\n</code></pre>\n\n<p>I'm trying to understand how to do something similar in <strong>Ruby</strong> and unfortunately, the only thing I can come up with is creating a class and storing the cache as a class variable:</p>\n\n<pre><code># In Ruby\nclass Placeholder\n  @@cache = {}\n\n  def fibonacci(num)\n    raise 'Negative numbers not allowed' if num &lt; 0\n    return 0 if num == 0\n    return 1 if num == 1\n\n    @@cache[num] ||= fibonacci(num - 1) + fibonacci(num - 2)\n  end\nend\n\nexample = Placeholder.new\nputs example.fibonacci(5) # results in 5\n</code></pre>\n\n<p>What I don't like about this is the fact that I'm creating a class structure when I don't really intend to create instances of <code>Placeholder</code>. Instead, I'm only doing this because I want to save the state in a Ruby class variable. Ideally, if I were able to create a <code>module</code> and have a <code>module</code> variable, then that would at least solve my \"problem\" of instantiation with the <code>class</code> based solution. <strong>What are your best suggestions for doing this in Ruby?</strong></p>\n\n<p><strong>Update based on @meagar's comment:</strong></p>\n\n<p>@meagar, are you suggesting something like this?</p>\n\n<pre><code>class Placeholder\n  attr_reader :cache\n\n  def initialize\n    @cache = {}\n  end\n\n  def fibonacci(num)\n    raise 'Negative numbers not allowed' if num  &lt; 0\n    return 0 if num == 0\n    return 1 if num == 1\n\n    @cache[num] ||= fibonacci(num - 1) + fibonacci(num - 2)\n  end\nend\n\nFibonacciCalculator = Placeholder.new\nputs FibonacciCalculator.fibonacci(5) # results in 5\n</code></pre>\n\n<p>I already like this better than my initial Ruby solution, although having the Placeholder class still rubs me the wrong way.</p>\n"}, {"tags": ["ruby", "macos", "rubygems"], "comments": [{"owner": {"reputation": 3240, "user_id": 1840421, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/515ec6ff557dab01ee32f0e2cf288663?s=128&d=identicon&r=PG", "display_name": "Sharif Mamun", "link": "https://stackoverflow.com/users/1840421/sharif-mamun"}, "edited": false, "score": 2, "creation_date": 1423602521, "post_id": 28441742, "comment_id": 45213212, "body": "You don&#39;t have the sudo privilege I guess, try using  &quot;sudo gem install twitter&quot; and see what happens!"}, {"owner": {"reputation": 35, "user_id": 4259214, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/3c83f6083dc252be385eb7ee7e59e405?s=128&d=identicon&r=PG&f=1", "display_name": "apple", "link": "https://stackoverflow.com/users/4259214/apple"}, "reply_to_user": {"reputation": 3240, "user_id": 1840421, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/515ec6ff557dab01ee32f0e2cf288663?s=128&d=identicon&r=PG", "display_name": "Sharif Mamun", "link": "https://stackoverflow.com/users/1840421/sharif-mamun"}, "edited": false, "score": 0, "creation_date": 1423602770, "post_id": 28441742, "comment_id": 45213355, "body": "It works. Thanks! :) @SMAlMamun"}, {"owner": {"reputation": 308, "user_id": 5963316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/86a5772242debdf0728675a5a690a373?s=128&d=identicon&r=PG&f=1", "display_name": "EVAL", "link": "https://stackoverflow.com/users/5963316/eval"}, "edited": false, "score": 1, "creation_date": 1457985958, "post_id": 28441742, "comment_id": 59646496, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/14607193/installing-gem-or-updating-rubygems-fails-with-permissions-error\">Installing gem or updating RubyGems fails with permissions error</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "edited": false, "score": 2, "creation_date": 1423602898, "post_id": 28441864, "comment_id": 45213450, "body": "Ofc it does... but I recommend you to not use sudo [i.e. Don&#39;t use the ruby that comes with OSX]. Look for <code>rbenv</code> or <code>rvm</code> and install ruby in your home enviroment. There are plenty instructions how to do this and why to do it on SO &amp; Google."}], "tags": [], "owner": {"reputation": 35, "user_id": 4259214, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/3c83f6083dc252be385eb7ee7e59e405?s=128&d=identicon&r=PG&f=1", "display_name": "apple", "link": "https://stackoverflow.com/users/4259214/apple"}, "is_accepted": false, "score": 0, "last_activity_date": 1423602741, "creation_date": 1423602741, "answer_id": 28441864, "question_id": 28441742, "link": "https://stackoverflow.com/questions/28441742/why-dont-i-have-write-permissions-when-adding-gems-to-my-system-library/28441864#28441864", "title": "Why don&#39;t I have write permissions when adding gems to my system library?", "body": "<p>Using <code>sudo gem install twitter</code> does the trick :)</p>\n"}, {"tags": [], "owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "is_accepted": false, "score": 3, "last_activity_date": 1423603209, "creation_date": 1423603209, "answer_id": 28442005, "question_id": 28441742, "link": "https://stackoverflow.com/questions/28441742/why-dont-i-have-write-permissions-when-adding-gems-to-my-system-library/28442005#28442005", "title": "Why don&#39;t I have write permissions when adding gems to my system library?", "body": "<h2>Why You're Experiencing Write Problems</h2>\n\n<p>You have ecountering a write permissions error because the user account you're using doesn't have write permissions to the system library where your current Ruby is storing its gems.</p>\n\n<h2>Don't Use Sudo When Installing Rubygems</h2>\n\n<p>You should <em>never</em> write to system directories when installing gems. Instead, use a Ruby version manager like <a href=\"https://rvm.io\" rel=\"nofollow\">rvm</a>, <a href=\"https://github.com/sstephenson/rbenv\" rel=\"nofollow\">rbenv</a>, or <a href=\"https://github.com/postmodern/chruby\" rel=\"nofollow\">chruby</a> to manage your interpreters and install gems in user-writable directories.</p>\n\n<p>There are numerous security and stability problems that you will inevitably encounter if you insist on abusing your system Ruby interpreter, especially on OS X. Don't do it.</p>\n"}], "owner": {"reputation": 35, "user_id": 4259214, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/3c83f6083dc252be385eb7ee7e59e405?s=128&d=identicon&r=PG&f=1", "display_name": "apple", "link": "https://stackoverflow.com/users/4259214/apple"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1423603367, "creation_date": 1423602307, "last_edit_date": 1423603367, "question_id": 28441742, "link": "https://stackoverflow.com/questions/28441742/why-dont-i-have-write-permissions-when-adding-gems-to-my-system-library", "title": "Why don&#39;t I have write permissions when adding gems to my system library?", "body": "<p>I attempted to install the twitter gem onto my Mac via the Terminal app. However, upon typing <code>gem install twitter</code>, I get errors as shown in the image below:</p>\n\n<p><img src=\"https://i.stack.imgur.com/lVQvT.png\" alt=\"The error given by the Terminal app\"></p>\n\n<p>Any solutions on how to eliminate this issue?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "actionmailer", "ruby-on-rails-4.2"], "comments": [{"owner": {"reputation": 5397, "user_id": 1149074, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/2Bm6Y.jpg?s=128&g=1", "display_name": "shock_one", "link": "https://stackoverflow.com/users/1149074/shock-one"}, "edited": false, "score": 0, "creation_date": 1423602245, "post_id": 28441625, "comment_id": 45213059, "body": "Maybe it will help to enable SQL logging and see if the correct data is sent to the database? <code>ActiveRecord::Base.logger = Logger.new(STDOUT)</code>."}, {"owner": {"reputation": 45252, "user_id": 326389, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d2c037ce48d12bd88ec6529f9bb39f0a?s=128&d=identicon&r=PG", "display_name": "at.", "link": "https://stackoverflow.com/users/326389/at"}, "reply_to_user": {"reputation": 5397, "user_id": 1149074, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/2Bm6Y.jpg?s=128&g=1", "display_name": "shock_one", "link": "https://stackoverflow.com/users/1149074/shock-one"}, "edited": false, "score": 0, "creation_date": 1423602340, "post_id": 28441625, "comment_id": 45213132, "body": "We actually do have SQL logging enabled and in the first case, we see the SQL <code>UPDATE</code> statement output. In the second case though, there is nothing sent to the database. We just see <code>begin transaction</code> followed immediately by <code>commit transaction</code>"}, {"owner": {"reputation": 5397, "user_id": 1149074, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/2Bm6Y.jpg?s=128&g=1", "display_name": "shock_one", "link": "https://stackoverflow.com/users/1149074/shock-one"}, "edited": false, "score": 0, "creation_date": 1423602708, "post_id": 28441625, "comment_id": 45213315, "body": "Try these couple of things: In pry <code>show-method billy.save</code> to make sure it&#39;s not redefined.  <code>billy.update_attributes(name: &#39;Jimmy&#39;)</code> to see if other persisting methods work.  Save another instance of this model.  Save an instance of another model."}, {"owner": {"reputation": 45252, "user_id": 326389, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d2c037ce48d12bd88ec6529f9bb39f0a?s=128&d=identicon&r=PG", "display_name": "at.", "link": "https://stackoverflow.com/users/326389/at"}, "reply_to_user": {"reputation": 5397, "user_id": 1149074, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/2Bm6Y.jpg?s=128&g=1", "display_name": "shock_one", "link": "https://stackoverflow.com/users/1149074/shock-one"}, "edited": false, "score": 0, "creation_date": 1423618472, "post_id": 28441625, "comment_id": 45219653, "body": "@shock_one - I&#39;ll try that"}, {"owner": {"reputation": 45252, "user_id": 326389, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d2c037ce48d12bd88ec6529f9bb39f0a?s=128&d=identicon&r=PG", "display_name": "at.", "link": "https://stackoverflow.com/users/326389/at"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1423618508, "post_id": 28441625, "comment_id": 45219663, "body": "@muistooshort - that SQL statement works and is only shown before sending the emails, that SQL statement is not sent for the saving after sending the emails"}], "answers": [{"comments": [{"owner": {"reputation": 45252, "user_id": 326389, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d2c037ce48d12bd88ec6529f9bb39f0a?s=128&d=identicon&r=PG", "display_name": "at.", "link": "https://stackoverflow.com/users/326389/at"}, "edited": false, "score": 0, "creation_date": 1433217825, "post_id": 30534660, "comment_id": 49243609, "body": "I have a few <code>attr_accessor</code>s, but they&#39;re all for completely unrelated fields (having to do with devise). <code>name</code> is not referenced."}], "tags": [], "owner": {"reputation": 39, "user_id": 2463647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f322d6c6caf67f8a1ba53359b766a250?s=128&d=identicon&r=PG", "display_name": "hetre85", "link": "https://stackoverflow.com/users/2463647/hetre85"}, "is_accepted": false, "score": 0, "last_activity_date": 1432917432, "last_edit_date": 1495535299, "creation_date": 1432917103, "answer_id": 30534660, "question_id": 28441625, "link": "https://stackoverflow.com/questions/28441625/calling-save-on-a-model-in-ruby-on-rails-not-actually-saving-it/30534660#30534660", "title": "Calling save on a model in Ruby on Rails not actually saving it", "body": "<p>I have run into this a couple of times.\nIt's always been a case of having set <code>attr_accessor</code> for that attribute in its respective model. Without seeing more of your code I can't tell you for sure, but I bet you have something like this.</p>\n\n<pre><code>class Student &lt; ActiveRecord::Base\n  attr_accessor :name\n  #code...\nend\n</code></pre>\n\n<p>Check out the  <a href=\"https://stackoverflow.com/questions/12905103/rails-model-attr-accessor-attribute-not-saving\">accepted answer to a similar question</a> for more details. But essentially you need to remove the <code>attr_accessor :name</code> line.</p>\n"}], "owner": {"reputation": 45252, "user_id": 326389, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d2c037ce48d12bd88ec6529f9bb39f0a?s=128&d=identicon&r=PG", "display_name": "at.", "link": "https://stackoverflow.com/users/326389/at"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 812, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1432917432, "creation_date": 1423601924, "question_id": 28441625, "link": "https://stackoverflow.com/questions/28441625/calling-save-on-a-model-in-ruby-on-rails-not-actually-saving-it", "title": "Calling save on a model in Ruby on Rails not actually saving it", "body": "<p>In my console I save models like this:</p>\n\n<pre><code>billy = Student.first\nbilly.name = 'Billy'\nbilly.save\n</code></pre>\n\n<p>Works as expected. However, after I call an <code>ApplicationMailer</code> in the console, the above mechanism no longer works :(</p>\n\n<pre><code>MyMailer.send_some_emails\nbilly.name = 'Jimmy'\nbilly.save # returns true\nbilly.save! # no exception thrown\nbilly.reload\nbilly.name # will return 'Billy', not 'Jimmy' as expected\n</code></pre>\n\n<p>Any ideas?</p>\n"}]