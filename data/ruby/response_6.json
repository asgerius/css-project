[{"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1424304329, "post_id": 28596164, "comment_id": 45499225, "body": "do you have a <code>.rspec</code> file?"}, {"owner": {"reputation": 55, "user_id": 4347144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f33cac1921989f89840143a4064c49c?s=128&d=identicon&r=PG&f=1", "display_name": "Archer", "link": "https://stackoverflow.com/users/4347144/archer"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1424304628, "post_id": 28596164, "comment_id": 45499324, "body": "Yeah, content: --color --require spec_helper"}, {"owner": {"reputation": 55, "user_id": 4347144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f33cac1921989f89840143a4064c49c?s=128&d=identicon&r=PG&f=1", "display_name": "Archer", "link": "https://stackoverflow.com/users/4347144/archer"}, "edited": false, "score": 1, "creation_date": 1424364099, "post_id": 28596164, "comment_id": 45527390, "body": "I just followed your suggestion - Got rid of before(:all) hook... thanks"}], "answers": [{"tags": [], "owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "is_accepted": true, "score": 1, "last_activity_date": 1424306343, "creation_date": 1424306343, "answer_id": 28596749, "question_id": 28596164, "link": "https://stackoverflow.com/questions/28596164/rspec-beforeall-hook-ignored-when-running-all-tests/28596749#28596749", "title": "rspec - before(:all) Hook ignored when running all tests", "body": "<p><code>before(:all)</code> is evil and is the source of many headaches, so many rspec has considered multiple times <a href=\"https://github.com/rspec/rspec-core/issues/573\" rel=\"nofollow\">to remove the command at all</a>. This block is not wrapped in a transaction, so the data will not be rolled back after the test. You should clear your data in the <code>after(:all)</code> block manually.</p>\n\n<p>My personal best practice is to use <code>before(:all)</code> only to set up environment variables, global libs configurations ... but never to use it to hit the DB.</p>\n\n<p>I suggest you just change your <code>before(:all)</code> for a <code>before(:each)</code>.</p>\n"}], "owner": {"reputation": 55, "user_id": 4347144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f33cac1921989f89840143a4064c49c?s=128&d=identicon&r=PG&f=1", "display_name": "Archer", "link": "https://stackoverflow.com/users/4347144/archer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 746, "favorite_count": 0, "accepted_answer_id": 28596749, "answer_count": 1, "score": 2, "last_activity_date": 1424306343, "creation_date": 1424303068, "last_edit_date": 1424304325, "question_id": 28596164, "link": "https://stackoverflow.com/questions/28596164/rspec-beforeall-hook-ignored-when-running-all-tests", "title": "rspec - before(:all) Hook ignored when running all tests", "body": "<pre><code>RSpec.configure do |config|\n  config.before(:suite) do\n    cleaner.strategy = :truncation\n    cleaner.clean_with(:truncation)\n  end\n\n  config.around(:each) do |example|\n    cleaner.cleaning do\n      example.run\n    end\n  end\nend\n</code></pre>\n\n<p>And one of the tests:</p>\n\n<pre><code>  require 'rspec'\n\n    describe 'Test of all Listing parameters' do\n      before(:all) do\n        populate_from_yaml('spec/sample_data/listing_param_filtering_data.yaml')\n      end\n\n      it 'filter by active listing' do\n        params = make_params(userId: 'users-1', limit: 100)\n        listings = request_shuffler(params)\n\n        expect(listings).not_to include('listing-inactive')\n        expect(listings).to include('listing-active-all-empty')\n      end\n\n      it 'filter by doorman' do\n        params = make_params(userId: 'users-1', limit: 100, doorman: true)\n        listings = request_shuffler(params)\n\n        expect(listings).to match_array(['listing-param-doorman'])\n      end\n      # and so on\n   end\n</code></pre>\n\n<p>When I run test specifing test name everything works fine</p>\n\n<pre><code>rspec spec/test_spec.rb\n</code></pre>\n\n<p>But if I execute all tests:</p>\n\n<pre><code>rspec spec\n</code></pre>\n\n<p>I got errors:</p>\n\n<pre><code>Test of all Listing parameters filter by active listing\nFailure/Error: populate_from_yaml('spec/sample_data/listing_param_filtering_data.yaml')\nSequel::UniqueConstraintViolation:\n    PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint \"agents_pkey\"\nDETAIL:  Key (id)=(agent-1) already exists.\nDebug data ...\n\nTest of all Listing parameters filter by doorman\nFailure/Error: populate_from_yaml('spec/sample_data/listing_param_filtering_data.yaml')\nSequel::UniqueConstraintViolation:\n    PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint \"agents_pkey\"\nDETAIL:  Key (id)=(agent-1) already exists.\nDebug data ...\n\n...\n</code></pre>\n\n<p>It looks like rspec just ignoring config.around(:each) stopping to clean database, ignores before(:all) hook and trying to populate database one each example... Any ideas?</p>\n\n<p>I'm using\nruby-2.2.0p0\nrspec-3.2.0</p>\n\n<p>btw it's not rails</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "facebook", "omniauth"], "comments": [{"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1424303724, "post_id": 28596144, "comment_id": 45499057, "body": "Did you actually add the ENV variables to your environment? Checked here are there? Restarted server?"}, {"owner": {"reputation": 229, "user_id": 4466048, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fcd759a73e5df253b85f5d95e152b00a?s=128&d=identicon&r=PG&f=1", "display_name": "roguerat", "link": "https://stackoverflow.com/users/4466048/roguerat"}, "reply_to_user": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1424304412, "post_id": 28596144, "comment_id": 45499248, "body": "Yes the ENV variables are there, took them out before posting here of course. And I just restated my server. But I&#39;m unsure what you mean by &quot;Checked here are there?&quot;"}, {"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1424304695, "post_id": 28596144, "comment_id": 45499344, "body": "Sorry, typo. I mean if you checked the env variables are actually in your environment (ie you added them to ~/.bashrc but forgot to <code>source ~&#47;.bashrc</code> would be a common mistake). You can stop your server, and, in  the same console, type <code>printenv | grep FACEBOOK_APP_ID</code> or whatever your env variable is named"}], "answers": [{"tags": [], "owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "is_accepted": false, "score": 9, "last_activity_date": 1438336807, "last_edit_date": 1438336807, "creation_date": 1424305007, "answer_id": 28596511, "question_id": 28596144, "link": "https://stackoverflow.com/questions/28596144/rails-omniauth-the-parameter-app-id-is-required/28596511#28596511", "title": "Rails: Omniauth - &quot;The parameter app_id is required&quot;", "body": "<p>Oh, now I see: you need to define environment variables to store your <code>facebook_app_id</code> and <code>facebook_secret</code>. You add them to your environment like this (assuming unix-like system): </p>\n\n<p>Add this to the bottom of your <code>~/.bashrc</code> file (or equivalent):</p>\n\n<pre><code>export FACEBOOK_APP_ID='your_id_here'\nexport FACEBOOK_SECRET='your_secret_here'\n</code></pre>\n\n<p>Then open a new terminal to be sure they get loaded in the environment. </p>\n\n<p>At last, in your <code>omniauth.rb</code> initializer you type exactly:</p>\n\n<pre><code>Rails.application.config.middleware.use OmniAuth::Builder do\n  provider :facebook, ENV['FACEBOOK_APP_ID'], ENV['FACEBOOK_SECRET']\nend\n</code></pre>\n\n<p>Read more about the topic <a href=\"http://www.gotealeaf.com/blog/managing-environment-configuration-variables-in-rails\">here</a>, for example.</p>\n\n<p>You can also use dotenv gem to handle environment variables.</p>\n"}, {"comments": [{"owner": {"reputation": 214, "user_id": 2128554, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2c4f9f1047510374882567fd796c8ebc?s=128&d=identicon&r=PG", "display_name": "learner", "link": "https://stackoverflow.com/users/2128554/learner"}, "edited": false, "score": 0, "creation_date": 1445338422, "post_id": 29462115, "comment_id": 54272435, "body": "This will help who are not good with Unix like OS or Linux distos."}], "tags": [], "owner": {"reputation": 7290, "user_id": 2325440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a7511e7a8057534793b48cd0b16be25?s=128&d=identicon&r=PG", "display_name": "Alejandro Silva", "link": "https://stackoverflow.com/users/2325440/alejandro-silva"}, "is_accepted": false, "score": 3, "last_activity_date": 1428267285, "creation_date": 1428267285, "answer_id": 29462115, "question_id": 28596144, "link": "https://stackoverflow.com/questions/28596144/rails-omniauth-the-parameter-app-id-is-required/29462115#29462115", "title": "Rails: Omniauth - &quot;The parameter app_id is required&quot;", "body": "<p>You can set the keys on the ENV variable as dgilperez says, or remove the ENV and write it directly.</p>\n\n<pre><code>Rails.application.config.middleware.use OmniAuth::Builder do\n  provider :facebook, 'FACEBOOK_APP_ID', 'FACEBOOK_SECRET'\nend\n</code></pre>\n\n<p>if you put the source code in a public repo (like github), use the ENV variable as it's more secure.</p>\n"}], "owner": {"reputation": 229, "user_id": 4466048, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fcd759a73e5df253b85f5d95e152b00a?s=128&d=identicon&r=PG&f=1", "display_name": "roguerat", "link": "https://stackoverflow.com/users/4466048/roguerat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9679, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1438336807, "creation_date": 1424302969, "question_id": 28596144, "link": "https://stackoverflow.com/questions/28596144/rails-omniauth-the-parameter-app-id-is-required", "title": "Rails: Omniauth - &quot;The parameter app_id is required&quot;", "body": "<p>I'm following this railscast tutorial to set up omniauth for facebook authentication on my rails project: <a href=\"http://railscasts.com/episodes/360-facebook-authentication?autoplay=true\">http://railscasts.com/episodes/360-facebook-authentication?autoplay=true</a>. I'm 4 minutes in and all I've done so far is bundle the gem <code>omniauth-facebook</code> and added, </p>\n\n<p>omniauth.rb</p>\n\n<pre><code>OmniAuth.config.logger = Rails.logger\n\nRails.application.config.middleware.use OmniAuth::Builder do\n  provider :facebook, ENV['my id here...'], ENV['my secret code here...']\n\nend\n</code></pre>\n\n<p>and then when I go to <code>http://localhost:3000/auth/facebook</code> I get an error saying <code>The parameter app_id is required</code>. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "scope", "erb", "rails-i18n"], "comments": [{"owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "edited": false, "score": 0, "creation_date": 1618930581, "post_id": 28595913, "comment_id": 118749143, "body": "This question is 5 years old. I would not recommend anymore &quot;smart&quot; translation scoping, but just to fall back to the recommended way (based on file path, compatible with Lazy lookup). When your application becomes bigger, it becomes harder to maintain &quot;smart scopes&quot; since it&#39;s harder to understand which translations are used where with static analysis.  -&gt; Better to make it easier to know which translations are used where. And if we need to change some key vocabulary, then it&#39;s up to the team to go through every available translation, using for example CTRL+F, to change everything."}], "answers": [{"comments": [{"owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "edited": false, "score": 0, "creation_date": 1424362825, "post_id": 28610954, "comment_id": 45526468, "body": "Someone else posted almost the same thing, but must have deleted his answer... The fact is that I&#39;m looking for a way to declare a default scope different than the default <code>controller&#47;action</code>. Here <code>t(&#39;.title&#39;)</code> would not output <code>scope: [:projects, :deadlines]</code>, but rather <code>scope: [:projects, :index]</code> as you wrote at the beginning"}, {"owner": {"reputation": 482, "user_id": 2462382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/468a35e119478b34d66cf0e7a9c1c217?s=128&d=identicon&r=PG", "display_name": "shoji", "link": "https://stackoverflow.com/users/2462382/shoji"}, "reply_to_user": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "edited": false, "score": 1, "creation_date": 1424366180, "post_id": 28610954, "comment_id": 45528879, "body": "Although I might be not understanding your question, I edited. I think lazy lookup is connected with <code>controller&#47;action</code>. It&#39;s connected with <b>views</b> such as <code>views&#47;projects&#47;_deadlines.html.erb</code>. So, I think you don&#39;t need change scope for <code>_deadlines.html.erb</code>. I don&#39;t mind you&#39;ll delete my post if it&#39;s not correct answer."}, {"owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "edited": false, "score": 0, "creation_date": 1424366686, "post_id": 28610954, "comment_id": 45529210, "body": "Oh right, it actually produces the right output ! sorry"}, {"owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "edited": false, "score": 0, "creation_date": 1431877381, "post_id": 28610954, "comment_id": 48674445, "body": "While your solution is nice, it won&#39;t let me have different default scopes per partial, and I cannot map different pages to the same default scope."}], "tags": [], "owner": {"reputation": 482, "user_id": 2462382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/468a35e119478b34d66cf0e7a9c1c217?s=128&d=identicon&r=PG", "display_name": "shoji", "link": "https://stackoverflow.com/users/2462382/shoji"}, "is_accepted": false, "score": 5, "last_activity_date": 1424365954, "last_edit_date": 1424365954, "creation_date": 1424361645, "answer_id": 28610954, "question_id": 28595913, "link": "https://stackoverflow.com/questions/28595913/rails-i18n-translations-scoping/28610954#28610954", "title": "Rails I18n translations scoping", "body": "<p>Rails implements a convenient way to look up the locale inside views.\nWhen you have the following dictionary:</p>\n\n<pre><code>es:\n  projects:\n    index:  # in 'index.html.erb' template file\n      title: \"T\u00edtulo\"\n    deadlines:  # in '_deadlines.html.erb' partial file\n      title: \"Fecha l\u00edmite\"\n</code></pre>\n\n<p>you can look up these values as below:</p>\n\n<pre><code># app/views/projects/index.html.erb\n&lt;%= t '.title' %&gt;  # =&gt; \"T\u00edtulo\"\n\n# app/views/projects/_deadlines.html.erb\n&lt;%= t '.title' %&gt;  # =&gt; \"Fecha l\u00edmite\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "edited": false, "score": 0, "creation_date": 1432510690, "post_id": 30288684, "comment_id": 48943653, "body": "I have further refined the code. Contact me if interested."}, {"owner": {"reputation": 1353, "user_id": 256234, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9c877363185e5f88c09aa28140c1a770?s=128&d=identicon&r=PG", "display_name": "JoshL", "link": "https://stackoverflow.com/users/256234/joshl"}, "edited": false, "score": 1, "creation_date": 1439403357, "post_id": 30288684, "comment_id": 51852010, "body": "This is a great solution EXCEPT it doesnt account for accessing other keys, such as t(&#39;footer.about&#39;).  It works well with t(:something) so you need to take into account strings versus symbols.  Here is a suggested rewrite:   <a href=\"https://gist.github.com/noctivityinc/5d4358b560fb92a1af70\" rel=\"nofollow noreferrer\">gist.github.com/noctivityinc/5d4358b560fb92a1af70</a>"}], "tags": [], "owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "is_accepted": true, "score": 3, "last_activity_date": 1500538175, "last_edit_date": 1500538175, "creation_date": 1431877087, "answer_id": 30288684, "question_id": 28595913, "link": "https://stackoverflow.com/questions/28595913/rails-i18n-translations-scoping/30288684#30288684", "title": "Rails I18n translations scoping", "body": "<p>Okay I was actuall still not happy with this. This default 'lazy lookup' scope is totally krap when you want to translate the same thing at different places. Say I have two different partials that contain information dealing with the same model. Using lazy lookup, I would need to have the same translation twice in my yml file.</p>\n\n<p>Here's a little piece of code that you can put in your application helper. It's basically an override of the default I18n.t that will set the scope to <code>@t_scope</code> when it is defined, and you don't need to worry about the scope anymore</p>\n\n<p><strong>My code addition</strong></p>\n\n<p><em>helpers/application_helper.rb</em></p>\n\n<pre><code>def t(*args)\n  # If there is just one param and we have defined a translation scope in the view\n  # only using symbols right now, need extended version to handle strings\n  if args.size == 1 and args.first.is_a?(Symbol) and @t_scope\n    super(args.shift, @t_scope)\n  else\n    super(*args)\n  end\nend\n\ndef set_t_scope(scope)\n  push_t_scope(@t_scope ||= {})\n  replace_t_scope(scope)\nend\nalias :t_scope :set_t_scope\n\ndef replace_t_scope(scope)\n  @t_scope = {scope: scope}\nend\n\ndef push_t_scope(scope)\n  (@tscope_stack ||= []) &lt;&lt; scope\nend\n\ndef pop_t_scope\n  @t_scope = @tscope_stack.pop\nend\n</code></pre>\n\n<p><strong>What you can do with it</strong></p>\n\n<p><em>projects/show.html.erb</em></p>\n\n<pre><code>&lt;%= t_scope([:projects, :deadlines]) %&gt;\n&lt;fieldset&gt;\n  &lt;legend&gt;Deadlines&lt;/legend&gt;\n  &lt;% if Time.now &gt; @project.deadline.expected_finish_date %&gt;\n  &lt;p&gt;&lt;%= t(:hurry) %&gt;&lt;/p&gt;\n  &lt;% else %&gt;\n  &lt;p&gt;&lt;%= t(:you_have_time) %&gt;\n&lt;/fieldset&gt;\n&lt;fieldset&gt;\n  &lt;legend&gt;Deadlines&lt;/legend&gt;\n  &lt;%= render 'tasks', tasks: @project.tasks %&gt;\n...\n</code></pre>\n\n<p><em>views/projects/_tasks.html.erb</em></p>\n\n<pre><code>&lt;%= t_scope([:projects, :tasks]) %&gt;\n  &lt;% tasks.each do | task| %&gt;\n  &lt;h2&gt;&lt;%= t(:person_in_charge) %&gt;&lt;/h2&gt;\n  ...\n&lt;% pop_t_scope %&gt;  \n</code></pre>\n\n<p><em>en.yml</em></p>\n\n<pre><code>en:\n  projects:\n    deadlines:\n      hurry: \"Hurry man !\"\n      you_have_time: \"Relax, there's still time\"\n    tasks:\n      person_in_charge: 'The Boss is %{name}'\n</code></pre>\n\n<p>Now the only problem that I see, is that when rendering multiple partials from a view, the @t_scope will be transferred and could potentiall cause problems. However wouldn't be a problem is @t_scope is set to nil at the beginning of each file</p>\n"}, {"tags": [], "owner": {"reputation": 968, "user_id": 2616474, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6f3ec2c6580807b5fa2e09035f53262e?s=128&d=identicon&r=PG", "display_name": "brcebn", "link": "https://stackoverflow.com/users/2616474/brcebn"}, "is_accepted": false, "score": 0, "last_activity_date": 1618936661, "last_edit_date": 1618936661, "creation_date": 1618929979, "answer_id": 67181224, "question_id": 28595913, "link": "https://stackoverflow.com/questions/28595913/rails-i18n-translations-scoping/67181224#67181224", "title": "Rails I18n translations scoping", "body": "<p>Since <code>t('.foo')</code> is possible and might have options (for interpolation for example), here is my proposition to improve <a href=\"https://stackoverflow.com/a/30288684/2616474\">the previous one</a></p>\n<pre class=\"lang-rb prettyprint-override\"><code>def t(*args, **kwargs)\n  if args.size == 1 and (args.first.is_a?(Symbol) || args.first.to_s.start_with?('.') ) and @t_scope\n    I18n.t(args.shift, kwargs.reverse_merge!(@t_scope))\n  else\n    I18n.t(*args)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4655, "favorite_count": 1, "accepted_answer_id": 30288684, "answer_count": 3, "score": 5, "last_activity_date": 1618936661, "creation_date": 1424301741, "last_edit_date": 1424366529, "question_id": 28595913, "link": "https://stackoverflow.com/questions/28595913/rails-i18n-translations-scoping", "title": "Rails I18n translations scoping", "body": "<p>Writing a fully translated app can become tedious. Is there a way to set a default translation scope for the current context ?</p>\n\n<p>Example : I am writing inside a partial <em>_deadlines.html.erb</em> in the <em>show.html.erb</em> action of my <code>ProjectsController</code></p>\n\n<p>Now because I am trying to be a good programmer, I am scoping all my translations. I would like to produce the following tree</p>\n\n<pre><code>projects:\n  deadlines:\n    now: \"Hurry the deadline is today !\"\n    ....\n</code></pre>\n\n<p>How can I make it less tedious than writing each time the full scope ?</p>\n\n<p><em>projects/show.html.erb</em></p>\n\n<pre><code>...\n&lt;%= render 'projects/deadlines', project: @project %&gt;\n...\n</code></pre>\n\n<p><em>projects/_deadlines.html.erb</em> called from <em>show.html.erb</em></p>\n\n<pre><code>&lt;p&gt;Deadline : &lt;%= t(:now, scope: [:projects, :deadlines]) %&gt;&lt;/p&gt;\n</code></pre>\n\n<p>Is there a way to set a default scope for the current context (here the whole <em>_deadlines.html.erb</em> file) ?</p>\n\n<p><strong>EDIT</strong> </p>\n\n<p>Some people suggested to use Rails <a href=\"http://guides.rubyonrails.org/i18n.html#lazy-lookup\" rel=\"noreferrer\">Lazy lookup</a>, but this does not produce the scoping I'm looking for. In my case, I want to skip the <code>action</code> default scope (show, index, etc...) and add a scope for the current partial I am rendering (in my case _deadlines.html.erb)</p>\n\n<p>Rails lazy lookup :</p>\n\n<pre><code>t('.now')\n&lt;=&gt; t(:now, scope: [:projects, :show]\n</code></pre>\n\n<p>But I wanted :</p>\n\n<pre><code>t('.now')\n&lt;=&gt; t(:now, scope: [:projects, :deadlines]\n</code></pre>\n"}, {"tags": ["ruby", "string", "magento"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1424302175, "post_id": 28595882, "comment_id": 45498530, "body": "What you want is what you get. Are you sure you didn&#39;t double-quote the string?  Please double-check."}, {"owner": {"reputation": 695, "user_id": 2108872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/vmdM9.jpg?s=128&g=1", "display_name": "igrossiter", "link": "https://stackoverflow.com/users/2108872/igrossiter"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1424302692, "post_id": 28595882, "comment_id": 45498702, "body": "I have to recover this as a attribute <code>irb(main):131:0&gt; a.street =&gt; &quot;rua rua urua\\nhuhuhucuhch&quot;</code>. This attribute is saved to the database based on a response of a webservice (magento), I have no control over what the user inputs here and whats get saved, but I could clean it when saving to the rails database, there is a way of cleaning it?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1424326764, "post_id": 28595882, "comment_id": 45505521, "body": "When you have a double-quoted string such as <code>str = &quot;rua rua urua\\nhuhuhucuhch&quot;</code>, you obviously cannot split on backslashes because it contains none.  The selected answer finds a way: convert each newline to a backslash followed by <code>&quot;n&quot;</code>, then split on backslashes.  I just wanted to point out that that has <i>nothing</i> to do with backslashes. We could replace the newlines with any string not in the string, plus <code>&quot;n&quot;</code>, then split on that string. For example, <code>str.gsub(&#47;\\n&#47;,&#39;9n&#39;).split(&#39;9&#39;) #=&gt;  [&quot;testestet&quot;, &quot;nehcucahu&quot;]</code>."}], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1424303914, "creation_date": 1424303914, "answer_id": 28596317, "question_id": 28595882, "link": "https://stackoverflow.com/questions/28595882/split-a-double-quoted-string-in-ruby-on-a-backslash/28596317#28596317", "title": "split a double quoted string in ruby on a backslash", "body": "<p>This is all about single-quoted versus double-quoted strings.</p>\n\n<p>The string <code>a.street</code> you mentioned in a comment, which I'll call</p>\n\n<pre><code>str = \"rua rua urua\\nhuhuhucuhch\"\n</code></pre>\n\n<p>contains a newline character at offset 12:</p>\n\n<pre><code>str.index(\"\\n\") =&gt; 12\n</code></pre>\n\n<p>and does not contain a backslash:</p>\n\n<pre><code>str.index(\"\\\\\") #=&gt; nil\n</code></pre>\n\n<p>so you can't split on a backslash.</p>\n\n<p>If this string had been in single quotes (as is the string in your question):</p>\n\n<pre><code>str = 'rua rua urua\\nhuhuhucuhch'\nstr.split(\"\\\\\") #=&gt; [\"rua rua urua\", \"nhuhuhucuhch\"]`.\n</code></pre>\n\n<p>That's because <code>str</code> now contains a backslash, followed by an <code>\"n\"</code>, but no newline:</p>\n\n<pre><code>str.index(\"\\\\\") #=&gt; 12 \nstr.index(\"n\")  #=&gt; 13 \nstr.index(\"\\n\") #=&gt; nil \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 695, "user_id": 2108872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/vmdM9.jpg?s=128&g=1", "display_name": "igrossiter", "link": "https://stackoverflow.com/users/2108872/igrossiter"}, "edited": false, "score": 0, "creation_date": 1424316048, "post_id": 28596455, "comment_id": 45502465, "body": "this worked, but how can I prevent the problem for others special chars?"}, {"owner": {"reputation": 695, "user_id": 2108872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/vmdM9.jpg?s=128&g=1", "display_name": "igrossiter", "link": "https://stackoverflow.com/users/2108872/igrossiter"}, "edited": false, "score": 0, "creation_date": 1424317999, "post_id": 28596455, "comment_id": 45502934, "body": "EDIT - I changed to this: <code>a.street.gsub(&#47;[\\t\\r\\n\\f]&#47;,&quot;\\\\n&quot;).split(&#47;\\\\&#47;)</code>, and it seems to cover everything I might encounter on a text field! but it has a bug where it changes the letter after the backslash to &quot;n&quot; EDIT -- final code <code>a.street.split(&#47;[\\t\\r\\n\\f\\\\]&#47;)</code>, I wont mind lose one letter"}, {"owner": {"reputation": 90, "user_id": 3697429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2271dab6ccfa163e1a088a073100f87?s=128&d=identicon&r=PG&f=1", "display_name": "coxy", "link": "https://stackoverflow.com/users/3697429/coxy"}, "reply_to_user": {"reputation": 695, "user_id": 2108872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/vmdM9.jpg?s=128&g=1", "display_name": "igrossiter", "link": "https://stackoverflow.com/users/2108872/igrossiter"}, "edited": false, "score": 1, "creation_date": 1424335065, "post_id": 28596455, "comment_id": 45508865, "body": "Are you sure you want to translate these escape characters into letters and not just split on them? If you definitely do, you could replace them all individually something like this <code>&quot;a\\tb\\nc\\rd\\f&quot;.gsub(&#47;[\\t\\n\\r\\f]&#47;,{&quot;\\t&quot;=&gt;&quot;\\\\t&quot;,&quot;\\r&quot;=&gt;&quot;\\\\r&quot;,&quot;\\&zwnj;&#8203;n&quot;=&gt;&quot;\\\\n&quot;,&quot;\\f&quot;=&gt;&quot;\\\\f&zwnj;&#8203;&quot;}).split(&#47;\\\\&#47;)</code> which produces <code>[&quot;a&quot;, &quot;tb&quot;, &quot;nc&quot;, &quot;rd&quot;, &quot;f&quot;]</code>"}], "tags": [], "owner": {"reputation": 90, "user_id": 3697429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2271dab6ccfa163e1a088a073100f87?s=128&d=identicon&r=PG&f=1", "display_name": "coxy", "link": "https://stackoverflow.com/users/3697429/coxy"}, "is_accepted": true, "score": 2, "last_activity_date": 1424304731, "creation_date": 1424304731, "answer_id": 28596455, "question_id": 28595882, "link": "https://stackoverflow.com/questions/28595882/split-a-double-quoted-string-in-ruby-on-a-backslash/28596455#28596455", "title": "split a double quoted string in ruby on a backslash", "body": "<p>Could you replace the newlines first and then split?</p>\n\n<p><code>str.gsub(/\\n/,\"\\\\n\").split(/\\\\/)</code></p>\n"}], "owner": {"reputation": 695, "user_id": 2108872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/vmdM9.jpg?s=128&g=1", "display_name": "igrossiter", "link": "https://stackoverflow.com/users/2108872/igrossiter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1495, "favorite_count": 0, "accepted_answer_id": 28596455, "answer_count": 2, "score": 0, "last_activity_date": 1424534515, "creation_date": 1424301582, "last_edit_date": 1424534515, "question_id": 28595882, "link": "https://stackoverflow.com/questions/28595882/split-a-double-quoted-string-in-ruby-on-a-backslash", "title": "split a double quoted string in ruby on a backslash", "body": "<p>I need to split a string by the backslash, the problem is that when I have something like '\\n' inside de string, it is not recognized. I found that this occurs because the double quoted string interprets the \\n as a new line char.</p>\n\n<p>example</p>\n\n<pre><code>irb(main):109:0&gt; 'testestet\\nehcucahu'.split('\\\\')\n=&gt; [\"testestet\", \"nehcucahu\"] # &lt;---- this is what I want\nirb(main):110:0&gt; \"testestet\\nehcucahu\".split('\\\\')\n=&gt; [\"testestet\\nehcucahu\"]\n</code></pre>\n\n<p>Can I convert a double quoted string to a single quoted before calling split? Or there is another way achieve the desired behavior?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Further work showed me that magento inserts a '\\n' for every line on street, which make a lot more sense. I could split it on this specific situation using .split(/\\n/). the comments below have better information if you need to split at a backslash</p>\n"}, {"tags": ["ruby", "json", "ruby-on-rails-4", "jbuilder"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 4579879, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef97c69ec617e5ba0a43251ef39f4081?s=128&d=identicon&r=PG&f=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/4579879/mitch"}, "edited": false, "score": 0, "creation_date": 1424302615, "post_id": 28595869, "comment_id": 45498676, "body": "Hi, thanks for taking the time to reply. Unfortunately your link seems to be dead, and I&#39;m not sure how to do the find."}, {"owner": {"reputation": 365, "user_id": 4519092, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ErtNqDUxxag/AAAAAAAAAAI/AAAAAAAAABs/A2oiRZfUUs0/photo.jpg?sz=128", "display_name": "GeekRiky", "link": "https://stackoverflow.com/users/4519092/geekriky"}, "reply_to_user": {"reputation": 53, "user_id": 4579879, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef97c69ec617e5ba0a43251ef39f4081?s=128&d=identicon&r=PG&f=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/4579879/mitch"}, "edited": false, "score": 0, "creation_date": 1424303141, "post_id": 28595869, "comment_id": 45498854, "body": "I suppose who params[:search_string] is an array of Ids and look like: [1,2,3]. If i suppose right find method return an array of objects."}, {"owner": {"reputation": 365, "user_id": 4519092, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ErtNqDUxxag/AAAAAAAAAAI/AAAAAAAAABs/A2oiRZfUUs0/photo.jpg?sz=128", "display_name": "GeekRiky", "link": "https://stackoverflow.com/users/4519092/geekriky"}, "reply_to_user": {"reputation": 53, "user_id": 4579879, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef97c69ec617e5ba0a43251ef39f4081?s=128&d=identicon&r=PG&f=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/4579879/mitch"}, "edited": false, "score": 0, "creation_date": 1424303322, "post_id": 28595869, "comment_id": 45498921, "body": "If search_string is a Json array string you can use this <a href=\"http://flori.github.io/json/\" rel=\"nofollow noreferrer\">library</a> for parse string, then use find."}, {"owner": {"reputation": 53, "user_id": 4579879, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef97c69ec617e5ba0a43251ef39f4081?s=128&d=identicon&r=PG&f=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/4579879/mitch"}, "edited": false, "score": 0, "creation_date": 1424303653, "post_id": 28595869, "comment_id": 45499029, "body": "sorry its probably my fault for explaining it badly but search_string isn&#39;t the json array, that&#39;s the input from the select field. what I need to extract is the results after the search here  <code>code</code>@viewings = Viewing.simple_search(params[:search_string])&quot;<code>code</code>"}, {"owner": {"reputation": 365, "user_id": 4519092, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ErtNqDUxxag/AAAAAAAAAAI/AAAAAAAAABs/A2oiRZfUUs0/photo.jpg?sz=128", "display_name": "GeekRiky", "link": "https://stackoverflow.com/users/4519092/geekriky"}, "reply_to_user": {"reputation": 53, "user_id": 4579879, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef97c69ec617e5ba0a43251ef39f4081?s=128&d=identicon&r=PG&f=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/4579879/mitch"}, "edited": false, "score": 0, "creation_date": 1424331264, "post_id": 28595869, "comment_id": 45507265, "body": "Ok, if you have room_id you can search this room and retrieve viewings: <code>@viewings=Room.find(params[:search_string]).viewings</code>"}, {"owner": {"reputation": 53, "user_id": 4579879, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef97c69ec617e5ba0a43251ef39f4081?s=128&d=identicon&r=PG&f=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/4579879/mitch"}, "edited": false, "score": 0, "creation_date": 1424391493, "post_id": 28595869, "comment_id": 45541820, "body": "Ok that&#39;s great, that works fine, but any idea how I can create a JSON array of the results yielded from @viewings=Room.find(params[:search_string]).viewings"}, {"owner": {"reputation": 53, "user_id": 4579879, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef97c69ec617e5ba0a43251ef39f4081?s=128&d=identicon&r=PG&f=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/4579879/mitch"}, "edited": false, "score": 0, "creation_date": 1424484396, "post_id": 28595869, "comment_id": 45581402, "body": "thanks again for the help. still having issues, if you could have a look at my edit to see where I am going wrong, that would be great!"}, {"owner": {"reputation": 365, "user_id": 4519092, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ErtNqDUxxag/AAAAAAAAAAI/AAAAAAAAABs/A2oiRZfUUs0/photo.jpg?sz=128", "display_name": "GeekRiky", "link": "https://stackoverflow.com/users/4519092/geekriky"}, "reply_to_user": {"reputation": 53, "user_id": 4579879, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef97c69ec617e5ba0a43251ef39f4081?s=128&d=identicon&r=PG&f=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/4579879/mitch"}, "edited": false, "score": 0, "creation_date": 1424596963, "post_id": 28595869, "comment_id": 45608914, "body": "If you call <code>render action: ...</code> is performed index action of current controller. Why you call render action? I can suppose  you wanted call only index view, if so you can use <code>render &#39;index&#39;</code>"}, {"owner": {"reputation": 53, "user_id": 4579879, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef97c69ec617e5ba0a43251ef39f4081?s=128&d=identicon&r=PG&f=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/4579879/mitch"}, "edited": false, "score": 0, "creation_date": 1424653900, "post_id": 28595869, "comment_id": 45625861, "body": "Thanks, I&#39;ve changed that now but it hasn&#39;t helped, my jbuilder is still creating an array for <code>@viewings.all</code> rather than the <code>@viewings=Room.find(params[:search_string]).viewings</code> that I want it too?"}], "tags": [], "owner": {"reputation": 365, "user_id": 4519092, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ErtNqDUxxag/AAAAAAAAAAI/AAAAAAAAABs/A2oiRZfUUs0/photo.jpg?sz=128", "display_name": "GeekRiky", "link": "https://stackoverflow.com/users/4519092/geekriky"}, "is_accepted": true, "score": 0, "last_activity_date": 1424424724, "last_edit_date": 1424424724, "creation_date": 1424301500, "answer_id": 28595869, "question_id": 28595791, "link": "https://stackoverflow.com/questions/28595791/ruby-on-rails-search-results-to-json-array-jbuilder/28595869#28595869", "title": "ruby on rails, search results to json array (jbuilder)", "body": "<p>Ok, I suppose the situation is like that:</p>\n\n<p>Viewing model:</p>\n\n<pre><code>class Viewing &lt; ActiveRecord::Base\n   ...\n   belongs_to :room\n   ...\nend\n</code></pre>\n\n<p>Room model:</p>\n\n<pre><code>class Room &lt; ActiveRecord::Base\n   ...\n   has_many :viewings\n   ...\nend\n</code></pre>\n\n<p>Retrive viewings from room id, you can do something like:</p>\n\n<pre><code>@viewings=Room.find(params[:search_string]).viewings\n</code></pre>\n\n<p>For create JSON array of result, render jbuilder view who contains something like that:</p>\n\n<pre><code># @people = People.all\n\njson.array! @people, :id, :name\n\n  # =&gt; [ { \"id\": 1, \"name\": \"David\" },      { \"id\": 2, \"name\": \"Jamie\" } ]\n</code></pre>\n\n<p>I report an example of official jbuilder <a href=\"https://github.com/rails/jbuilder/blob/master/README.md\" rel=\"nofollow\">docs</a> I think you can use  json.array with viewings:</p>\n\n<pre><code>json.array! @viewings, field1, field2, ...\n</code></pre>\n\n<p>Otherwise you can use this in your controller:</p>\n\n<pre><code>render json: @viewings\n</code></pre>\n\n<p>but if you've used jbuilder, I think it's better you continue that way.</p>\n"}], "owner": {"reputation": 53, "user_id": 4579879, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef97c69ec617e5ba0a43251ef39f4081?s=128&d=identicon&r=PG&f=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/4579879/mitch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1633, "favorite_count": 0, "accepted_answer_id": 28595869, "answer_count": 1, "score": 1, "last_activity_date": 1424484309, "creation_date": 1424301183, "last_edit_date": 1424484309, "question_id": 28595791, "link": "https://stackoverflow.com/questions/28595791/ruby-on-rails-search-results-to-json-array-jbuilder", "title": "ruby on rails, search results to json array (jbuilder)", "body": "<p>I'm new to rails and I just have a quick question...</p>\n\n<p>I have a calendar gem which currently pulls event data from json as such (viewings/index.json.jbuilder)</p>\n\n<pre><code>json.array!(@viewings) do |viewing|\n  json.extract! viewing, :id, :room_id, :user_id, :start_time, :end_time, :notes\n  json.title viewing.user.name\n  json.start viewing.start_time\n  json.end viewing.end_time\n  json.url viewing_url(viewing, format: :html)\nend\n</code></pre>\n\n<p>anyway, I have created a search feature on my \"viewings\" index page, where a user selects the room from a drop-down and it displays the corresponding viewings.</p>\n\n<p>However, I need to make a JSON array from the results of the search, so it can be fed to the calendar.</p>\n\n<p>I know I can achieve this by doing something like, which does work:</p>\n\n<pre><code>@viewings = Viewing.where(room_id: 1 )\n</code></pre>\n\n<p>but obviously I want to pass a variable in to that line of code, something like </p>\n\n<pre><code>@viewings = Viewing.where(room_id: params[:search_string] )\n</code></pre>\n\n<p>The search string will always be a room ID, but the above code (and any variations I can think of) don't seem to work.</p>\n\n<p>OR can I make a JSON array from my search output. my search is as so...</p>\n\n<pre><code>  def search\n    @rooms = Room.all\n        @viewings = Viewing.simple_search(params[:search_string])\n        render :action =&gt; \"index\"\n  end\n</code></pre>\n\n<p>Can anyone help?!</p>\n\n<p>EDIT:</p>\n\n<p>I'm still struggling with this one a lot. I had a look at the jquery page below but its still not doing what I hoped.</p>\n\n<p>I have simplified the function in my viewings controller as so:</p>\n\n<pre><code>  def rmselect\n    @query1 = params[:rmno]\n    @rooms = Room.all\n        @viewings=Room.find(params[:rmno]).viewings\n    render :action =&gt; \"index\"\n  end\n</code></pre>\n\n<p>And I have created an _rmselect.json.jbuilder as so:</p>\n\n<pre><code>@viewings = Viewing.where(room_id: @query1 )\njson.array!(@viewings) do |viewing|\n\n  json.title viewing.user.name\n  json.start viewing.start_time\n  json.end viewing.end_time\n\nend\n</code></pre>\n\n<p>I was hoping the <code>@query1</code> variable would be passed into the jbuilder page which would cause it only to display viewings for the selected room. However, it seems that jbuilder cannot see any variables unless they are in <code>def index</code> (where it's no good).</p>\n\n<p>I also can't understand why <code>_rmselect.json.jbuilder</code> is taking the <code>@viewings.all</code> from <code>def index</code>, rather then the <code>@viewings=Room.find(params[:rmno]).viewings</code> from <code>def rmselect</code>. </p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 3839058, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5cbee7ac7cfb1f0f94549721cc8599ec?s=128&d=identicon&r=PG&f=1", "display_name": "key", "link": "https://stackoverflow.com/users/3839058/key"}, "edited": false, "score": 0, "creation_date": 1424309267, "post_id": 28595839, "comment_id": 45500812, "body": "Thanks! This actually helped me solve a bug in another problem as well where I didn&#39;t properly understand the difference between return and break."}], "tags": [], "owner": {"reputation": 1073, "user_id": 1697631, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lt26U.jpg?s=128&g=1", "display_name": "jmccure", "link": "https://stackoverflow.com/users/1697631/jmccure"}, "is_accepted": true, "score": 1, "last_activity_date": 1424302608, "last_edit_date": 1424302608, "creation_date": 1424301354, "answer_id": 28595839, "question_id": 28595640, "link": "https://stackoverflow.com/questions/28595640/why-is-my-array-empty-after-i-populated-it-in-this-each-loop/28595839#28595839", "title": "Why is my array empty after I populated it in this each loop?", "body": "<p>You are not returning anything if <code>i == arr.length - 1</code>.</p>\n\n<p>You probably want to return this value:</p>\n\n<pre><code>return new_arr.reduce(:+) if i == arr.length - 1\n</code></pre>\n\n<p>or use <code>break</code> instead of <code>return</code>, so you just break out of the innermost loop.</p>\n"}, {"tags": [], "owner": {"reputation": 2859, "user_id": 3945932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1794745acd9e572c24558b78b48d597?s=128&d=identicon&r=PG", "display_name": "ptd", "link": "https://stackoverflow.com/users/3945932/ptd"}, "is_accepted": false, "score": 1, "last_activity_date": 1424306280, "last_edit_date": 1424306280, "creation_date": 1424301372, "answer_id": 28595842, "question_id": 28595640, "link": "https://stackoverflow.com/questions/28595640/why-is-my-array-empty-after-i-populated-it-in-this-each-loop/28595842#28595842", "title": "Why is my array empty after I populated it in this each loop?", "body": "<p>Your code doesn't work mainly because of the line <code>return if i == arr.length - 1</code>. You want to break out of the loop, but you are actually <code>return</code>ing out of the method, which is not what you want.</p>\n\n<p>I think you are a bit confused about how to use the <code>each</code> method, because you are also using an iterator (<code>i</code>) unnecessarily. Your code would be better with the <code>each_with_index</code> method. I think there is a better approach, though.</p>\n\n<p>What we really want to do is find all the numbers in <code>(arr[0]..arr[-1]).to_a</code> that aren't in <code>arr</code>, right?</p>\n\n<pre><code>arr.sort!\n((arr[0]..arr[-1]).to_a - arr).count\n</code></pre>\n\n<p>That will give you the number of numbers between the lowest number in the array (<code>arr[0]</code> after it is sorted) and the highest number in the array (<code>arr[-1]</code> after it is sorted) that aren't in the original array.</p>\n"}], "owner": {"reputation": 69, "user_id": 3839058, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5cbee7ac7cfb1f0f94549721cc8599ec?s=128&d=identicon&r=PG&f=1", "display_name": "key", "link": "https://stackoverflow.com/users/3839058/key"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 28595839, "answer_count": 2, "score": 0, "last_activity_date": 1424306280, "creation_date": 1424300531, "last_edit_date": 1424302556, "question_id": 28595640, "link": "https://stackoverflow.com/questions/28595640/why-is-my-array-empty-after-i-populated-it-in-this-each-loop", "title": "Why is my array empty after I populated it in this each loop?", "body": "<p>Learning Ruby and trying out problems on Coderbyte. This code is supposed to find the number of numbers between numbers in an array. So <code>[4,8,6]</code> should return 2 (it needs 5 and 7 to be consecutive). <code>[5,10,15]</code> should return 8 and <code>[-2,10,4]</code> should return 10.</p>\n\n<p>My solution is to get the difference between a number and its next greatest number, minus one, which is how many numbers are between them.</p>\n\n<p>When I <code>p new_arr</code> inside my each loop, it has the correct array: <code>[1,1]</code> in the first case, <code>[4,4]</code> in the next case and <code>[5,5]</code> in the last case. But when I exit the each loop, the array is empty again and <code>new_arr.reduce(:+)</code> returns nil. </p>\n\n<p>I can't understand why because I defined <code>new_arr</code> outside the <code>each</code> loop. Is there some scope issue I'm missing here?</p>\n\n<pre><code>def Consecutive(arr)\n\n  arr.sort!\n  num_of_nums = 0\n  new_arr = []\n  i = 0\n  arr.each do\n    return if i == arr.length - 1\n    num_of_nums = (arr[i+1] - arr[i]) - 1\n    new_arr &lt;&lt; num_of_nums\n    i+=1\n    p new_arr\n  end\n  new_arr.reduce(:+)\nend\n</code></pre>\n"}, {"tags": ["ruby", "noise"], "answers": [{"tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": true, "score": 1, "last_activity_date": 1424300149, "creation_date": 1424300149, "answer_id": 28595554, "question_id": 28595407, "link": "https://stackoverflow.com/questions/28595407/random-numbers-in-ruby/28595554#28595554", "title": "Random numbers in Ruby", "body": "<p>You would just do</p>\n\n<pre><code>def create_noise(n)\n  n.times.collect { rand(-0.5..0.5) }\nend\n</code></pre>\n\n<p>that will spit back an array like this:</p>\n\n<pre><code>[-0.034680737617880486, 0.34802029078157803, 0.1346483808607455, 0.12155616615186282, -0.41043213731234474]\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 4345724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00909e33eaec83442d81bca9a62eb176?s=128&d=identicon&r=PG&f=1", "display_name": "Gent Binaku", "link": "https://stackoverflow.com/users/4345724/gent-binaku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "closed_date": 1424317629, "accepted_answer_id": 28595554, "answer_count": 1, "score": -3, "last_activity_date": 1424300157, "creation_date": 1424299407, "last_edit_date": 1424299754, "question_id": 28595407, "link": "https://stackoverflow.com/questions/28595407/random-numbers-in-ruby", "closed_reason": "Not suitable for this site", "title": "Random numbers in Ruby", "body": "<p>I am trying to make n random numbers from -0.5 from to 0.5 </p>\n\n<p>and I made a function like this </p>\n\n<pre><code>def create_noise(n)\n\nend\n</code></pre>\n\n<p>I found an implementation of this but i don't think this works </p>\n\n<pre><code> randoms = Set.new \n      loop \n       randoms &lt;&lt; rand(max)\n       return randoms.to_a if randoms.size &gt;= n\n</code></pre>\n"}, {"tags": ["ruby", "json", "ruby-on-rails-4", "jbuilder"], "comments": [{"owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "edited": false, "score": 1, "creation_date": 1424300592, "post_id": 28595396, "comment_id": 45497931, "body": "Have a look here <a href=\"http://stackoverflow.com/questions/18154252/jbuilder-dynamic-keys-for-model-attributes\" title=\"jbuilder dynamic keys for model attributes\">stackoverflow.com/questions/18154252/&hellip;</a>"}, {"owner": {"reputation": 2194, "user_id": 2086124, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c67773f6baa7837df50a17a42fd79b9f?s=128&d=identicon&r=PG", "display_name": "Adnan Ali", "link": "https://stackoverflow.com/users/2086124/adnan-ali"}, "reply_to_user": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "edited": false, "score": 0, "creation_date": 1424323608, "post_id": 28595396, "comment_id": 45504488, "body": "@AntarrByrd thanks it helped."}], "answers": [{"tags": [], "owner": {"reputation": 2194, "user_id": 2086124, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c67773f6baa7837df50a17a42fd79b9f?s=128&d=identicon&r=PG", "display_name": "Adnan Ali", "link": "https://stackoverflow.com/users/2086124/adnan-ali"}, "is_accepted": true, "score": 14, "last_activity_date": 1424326756, "last_edit_date": 1495541396, "creation_date": 1424326756, "answer_id": 28599824, "question_id": 28595396, "link": "https://stackoverflow.com/questions/28595396/create-a-json-having-dynamic-hash-keys-with-jbuilder/28599824#28599824", "title": "Create a JSON having dynamic hash keys with jbuilder", "body": "<p>Thanks to @AntarrByrd there is similar answer to this problem:\n<a href=\"https://stackoverflow.com/questions/18154252/jbuilder-dynamic-keys-for-model-attributes\">JBuilder dynamic keys for model attributes</a></p>\n\n<p>Using above logic I have solved this issue:</p>\n\n<pre><code>@tickets.each do |k, v|\n    json.set! k do\n      json.array!(v)do |ticket|\n        json.partial! 'tickets/ticket', ticket: ticket\n      end\n    end\n  end\n</code></pre>\n"}], "owner": {"reputation": 2194, "user_id": 2086124, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c67773f6baa7837df50a17a42fd79b9f?s=128&d=identicon&r=PG", "display_name": "Adnan Ali", "link": "https://stackoverflow.com/users/2086124/adnan-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3329, "favorite_count": 4, "accepted_answer_id": 28599824, "answer_count": 1, "score": 6, "last_activity_date": 1424326756, "creation_date": 1424299324, "question_id": 28595396, "link": "https://stackoverflow.com/questions/28595396/create-a-json-having-dynamic-hash-keys-with-jbuilder", "title": "Create a JSON having dynamic hash keys with jbuilder", "body": "<p>Here I want to output json with dynamic <strong>group name</strong> rather than word <strong>group</strong></p>\n\n<pre><code>@tickets.each do |group, v|\n  json.group {\n    json.array! v do |ticket|\n      json.partial! 'tickets/ticket', ticket: ticket\n    end}\nend\n</code></pre>\n\n<p>Where @ticket is a hash like this </p>\n\n<p>{a: [....], b: [.....]}</p>\n\n<p>and I want output like this</p>\n\n<pre><code>{a: [\n.....\n],\nb: [\n....\n]}\n</code></pre>\n"}, {"tags": ["ruby", "sqlite", "gem"], "answers": [{"comments": [{"owner": {"reputation": 1803, "user_id": 1330926, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/JIPkr.jpg?s=128&g=1", "display_name": "Ryo", "link": "https://stackoverflow.com/users/1330926/ryo"}, "edited": false, "score": 0, "creation_date": 1424303400, "post_id": 28595890, "comment_id": 45498948, "body": "It is user specific, not thinking of network stuff and collecting data stuff etc.  And I didn&#39;t think of ~/.my_gem thing, and yea sounds like a good idea. thank you."}], "tags": [], "owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "is_accepted": false, "score": 0, "last_activity_date": 1424301626, "creation_date": 1424301626, "answer_id": 28595890, "question_id": 28595385, "link": "https://stackoverflow.com/questions/28595385/how-to-handle-database-in-a-gem-intended-for-system-wide-command-line-tool/28595890#28595890", "title": "How to handle database in a gem intended for system-wide command line tool", "body": "<p>Is the database completely user specific?  Or is it static data your app needs?  If it's user specific I'd put it in ~/.my_gem.db or ~/.my_gem/data.sqlite3 or similar.</p>\n"}, {"comments": [{"owner": {"reputation": 1803, "user_id": 1330926, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/JIPkr.jpg?s=128&g=1", "display_name": "Ryo", "link": "https://stackoverflow.com/users/1330926/ryo"}, "edited": false, "score": 0, "creation_date": 1424335752, "post_id": 28601874, "comment_id": 45509231, "body": "oh looks great, I&#39;ll check it out. Thanks for that."}], "tags": [], "owner": {"reputation": 432, "user_id": 415380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfca3ac132a345bc2a6a7f9f14386977?s=128&d=identicon&r=PG", "display_name": "tribeca", "link": "https://stackoverflow.com/users/415380/tribeca"}, "is_accepted": false, "score": 0, "last_activity_date": 1424335551, "creation_date": 1424335551, "answer_id": 28601874, "question_id": 28595385, "link": "https://stackoverflow.com/questions/28595385/how-to-handle-database-in-a-gem-intended-for-system-wide-command-line-tool/28601874#28601874", "title": "How to handle database in a gem intended for system-wide command line tool", "body": "<p>@Philip's answer is great but you might also be interested in the XDG Base Directory Specification <a href=\"http://standards.freedesktop.org/basedir-spec/basedir-spec-latest.html\" rel=\"nofollow\">http://standards.freedesktop.org/basedir-spec/basedir-spec-latest.html</a> I believe it is aimed at desktop applications but provides specification for data and config per user as well as system-wide configuration. High profile applications like Chrome and and Inkscape seem to make use of this specification.</p>\n\n<p>The spec is based on environment variables but the result will likely be something like this:</p>\n\n<pre><code> ~/.config/mygem/myconfig.db\n ~/.local/share/mygem/mydata.db\n</code></pre>\n"}], "owner": {"reputation": 1803, "user_id": 1330926, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/JIPkr.jpg?s=128&g=1", "display_name": "Ryo", "link": "https://stackoverflow.com/users/1330926/ryo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1424335551, "creation_date": 1424299205, "question_id": 28595385, "link": "https://stackoverflow.com/questions/28595385/how-to-handle-database-in-a-gem-intended-for-system-wide-command-line-tool", "title": "How to handle database in a gem intended for system-wide command line tool", "body": "<p>I'm developing a gem that's basically used as a system-wide command line tool. This gem stores necessary data for the app in database. I'm wondering if there's any defacto-standard ish way to handle database in this situation.</p>\n\n<p>So far, I'm thinking of using sqlite3 because I don't want users to go through these pain-in-the-ass processes to install system-wide mysql or postgress. (and yup, I'm using relational database and sqlite is more than enough in terms of performance etc, my app is just a simple small one)</p>\n\n<p>If this is the right decision, the question boils down to where I should put sqlite3 database file. Definitely putting this under gem directory isn't a good idea, and so far I'm thinking of locating at /usr/local/MY_GEM/*.</p>\n\n<p>Sorry the question might sound a bit vague for some people, but if I were to define a single question, it would be \"Am I doing all right?\" or \"You guys have any better idea?\".</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 2205, "user_id": 2736647, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/R5e3M.jpg?s=128&g=1", "display_name": "Katie H", "link": "https://stackoverflow.com/users/2736647/katie-h"}, "edited": false, "score": 0, "creation_date": 1424296735, "post_id": 28594737, "comment_id": 45496103, "body": "I&#39;m trying to retrieve all posts that a user has not voted for at all"}, {"owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "reply_to_user": {"reputation": 2205, "user_id": 2736647, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/R5e3M.jpg?s=128&g=1", "display_name": "Katie H", "link": "https://stackoverflow.com/users/2736647/katie-h"}, "edited": false, "score": 1, "creation_date": 1424297621, "post_id": 28594737, "comment_id": 45496573, "body": "@KatieH I&#39;ve update the answer to resolve my oversight."}, {"owner": {"reputation": 2205, "user_id": 2736647, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/R5e3M.jpg?s=128&g=1", "display_name": "Katie H", "link": "https://stackoverflow.com/users/2736647/katie-h"}, "edited": false, "score": 1, "creation_date": 1424300650, "post_id": 28594737, "comment_id": 45497960, "body": "Thank you sooooooooooo much hun! :))))"}], "tags": [], "owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "is_accepted": true, "score": 2, "last_activity_date": 1424297907, "last_edit_date": 1424297907, "creation_date": 1424296660, "answer_id": 28594737, "question_id": 28594611, "link": "https://stackoverflow.com/questions/28594611/acts-as-votable-query-rails/28594737#28594737", "title": "Acts_as_votable query - rails", "body": "<p>User has the following methods available, see the <a href=\"https://github.com/ryanto/acts_as_votable#the-voter\" rel=\"nofollow\">github doc</a> </p>\n\n<pre><code>@user.find_voted_items\n\n@user.find_up_voted_items\n@user.find_liked_items\n\n@user.find_down_voted_items\n@user.find_disliked_items\n</code></pre>\n\n<p>So using these methods you could</p>\n\n<pre><code>@not_voted_on = Post.where.not(id: @user.find_voted_items.map(&amp;:id))\n</code></pre>\n"}], "owner": {"reputation": 2205, "user_id": 2736647, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/R5e3M.jpg?s=128&g=1", "display_name": "Katie H", "link": "https://stackoverflow.com/users/2736647/katie-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "accepted_answer_id": 28594737, "answer_count": 1, "score": 1, "last_activity_date": 1424297907, "creation_date": 1424296186, "question_id": 28594611, "link": "https://stackoverflow.com/questions/28594611/acts-as-votable-query-rails", "title": "Acts_as_votable query - rails", "body": "<p>Within my rails app, i'm using the <a href=\"https://github.com/ryanto/acts_as_votable\" rel=\"nofollow\">acts_as_votable gem</a> to allow voting on my Post model.</p>\n\n<p>I'm trying to retrieve a list of all posts that the current user has not upvoted or downvoted. <strong>How do I do this?</strong></p>\n\n<p>This gives me the list of ids of all users that have voted on a particular post. Do I need to run this method on all posts and scan against the current user and map out the results, or is there a more efficient way to do this?</p>\n\n<pre><code>@post.votes_for_ids\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "angularjs", "omniauth", "omniauth-linkedin"], "answers": [{"comments": [{"owner": {"reputation": 2393, "user_id": 3881783, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/805971ed348177031fbd5699731e45b3?s=128&d=identicon&r=PG", "display_name": "balintant", "link": "https://stackoverflow.com/users/3881783/balintant"}, "edited": false, "score": 0, "creation_date": 1424296712, "post_id": 28594619, "comment_id": 45496090, "body": "Now I tried two things: - adding <code>respond_to :json</code> to the top of the class and - adding <code>render user.to_json</code> to the end, but I get the same error. :("}, {"owner": {"reputation": 2393, "user_id": 3881783, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/805971ed348177031fbd5699731e45b3?s=128&d=identicon&r=PG", "display_name": "balintant", "link": "https://stackoverflow.com/users/3881783/balintant"}, "edited": false, "score": 0, "creation_date": 1424296777, "post_id": 28594619, "comment_id": 45496127, "body": "I made this based on the 3rd chapter of &quot;Riding Rails with AngularJS&quot; (Is it neccessary information?)."}, {"owner": {"reputation": 2859, "user_id": 3945932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1794745acd9e572c24558b78b48d597?s=128&d=identicon&r=PG", "display_name": "ptd", "link": "https://stackoverflow.com/users/3945932/ptd"}, "reply_to_user": {"reputation": 2393, "user_id": 3881783, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/805971ed348177031fbd5699731e45b3?s=128&d=identicon&r=PG", "display_name": "balintant", "link": "https://stackoverflow.com/users/3881783/balintant"}, "edited": false, "score": 0, "creation_date": 1424296787, "post_id": 28594619, "comment_id": 45496135, "body": "Make sure you are <code>render</code>ing for both conditions of the <code>if&#47;else</code> statement."}, {"owner": {"reputation": 2393, "user_id": 3881783, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/805971ed348177031fbd5699731e45b3?s=128&d=identicon&r=PG", "display_name": "balintant", "link": "https://stackoverflow.com/users/3881783/balintant"}, "edited": false, "score": 0, "creation_date": 1424297295, "post_id": 28594619, "comment_id": 45496391, "body": "Thanks. :) I just found out that I put the <code>user</code> in a wrong statement.  I had to move it under the next end, and I wrote something like <code>render status: 200, json: { success: true, info: &#39;Authentication&#39;, data: { user: user } }</code>"}, {"owner": {"reputation": 2393, "user_id": 3881783, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/805971ed348177031fbd5699731e45b3?s=128&d=identicon&r=PG", "display_name": "balintant", "link": "https://stackoverflow.com/users/3881783/balintant"}, "edited": false, "score": 0, "creation_date": 1424297669, "post_id": 28594619, "comment_id": 45496604, "body": "Now I just have to find out how to use it on the client... :)"}], "tags": [], "owner": {"reputation": 2859, "user_id": 3945932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1794745acd9e572c24558b78b48d597?s=128&d=identicon&r=PG", "display_name": "ptd", "link": "https://stackoverflow.com/users/3945932/ptd"}, "is_accepted": true, "score": 1, "last_activity_date": 1424296221, "creation_date": 1424296221, "answer_id": 28594619, "question_id": 28594464, "link": "https://stackoverflow.com/questions/28594464/omniauth-missing-template-error-ruby-on-rails/28594619#28594619", "title": "Omniauth: &quot;Missing Template Error&quot; - Ruby on Rails", "body": "<p>Your <code>linkedin</code> method in the <code>Users::OmniauthCallbacksController</code> class doesn't <code>render</code> or <code>redirect</code> explicitly so it is attempting to do the implicit rendering of the <code>linkedin</code> template (usually <code>linkedin.html.erb</code>. </p>\n\n<p>Based on your code you probably want to <code>render user.to_json</code> or something to that effect in your code so the angular api receives something it can work with.</p>\n"}], "owner": {"reputation": 2393, "user_id": 3881783, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/805971ed348177031fbd5699731e45b3?s=128&d=identicon&r=PG", "display_name": "balintant", "link": "https://stackoverflow.com/users/3881783/balintant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1462, "favorite_count": 0, "accepted_answer_id": 28594619, "answer_count": 1, "score": 0, "last_activity_date": 1424296221, "creation_date": 1424295602, "question_id": 28594464, "link": "https://stackoverflow.com/questions/28594464/omniauth-missing-template-error-ruby-on-rails", "title": "Omniauth: &quot;Missing Template Error&quot; - Ruby on Rails", "body": "<p>I am building an API which authenticates via LinkedIn and then returns our tokens to the client.</p>\n\n<p>The client will be written in AngularJS and will run separately.</p>\n\n<p>Auth URL: <a href=\"http://example.com/users/auth/linkedin\" rel=\"nofollow\">http://example.com/users/auth/linkedin</a> </p>\n\n<p><strong>I get the following error after authentication:</strong></p>\n\n<pre><code>Missing template users/omniauth_callbacks/linkedin, \ndevise/omniauth_callbacks/linkedin, devise/linkedin,\napplication/linkedin with {\n    :locale=&gt;[:en],\n    :formats=&gt;[:html],\n    :variants=&gt;[],\n    :handlers=&gt;[:erb, :builder, :raw, :ruby, :coffee, :jbuilder]\n}.\n\nSearched in: * \"/usr/local/lib/ruby/gems/2.2.0/gems/web-console-2.0.0/lib/action_dispatch/templates\" * \"/usr/local/Cellar/ruby/2.2.0/lib/ruby/gems/2.2.0/gems/devise-3.4.1/app/views\"\n</code></pre>\n\n<p><strong>I use the following special gems:</strong></p>\n\n<pre><code># Authentication\ngem 'devise'\ngem 'devise-token_authenticatable'\ngem 'omniauth'\ngem 'omniauth-oauth'\ngem 'omniauth-linkedin'\n\n# API Wrappers\ngem 'linkedin'\n</code></pre>\n\n<hr>\n\n<h1>The Source Code</h1>\n\n<h2>config/routes.rb</h2>\n\n<pre><code># filename: routes.rb\n# encoding: utf-8\n\nRails.application.routes.draw do\n\n  #\n  # API v1 Endpoints\n  #\n\n  scope '/api' do\n    ## Authentication\n    devise_for :users,\n      :skip =&gt; [:sessions, :password, :registrations, :confirmation],\n      :controllers =&gt; {\n        :omniauth_callbacks =&gt; \"users/omniauth_callbacks\",\n        :registrations      =&gt; \"users/registrations\",\n        :sessions           =&gt; \"users/sessions\"\n      }\n\n    ## User specific routes\n    scope '/users' do\n      devise_scope :user do\n        post '/check'   =&gt; 'users/users#is_user', as: 'is_user'\n        post '/current' =&gt; 'users/sessions#get_current_user', as: 'current_user'\n      end\n    end\n  end\nend\n</code></pre>\n\n<h2>app/controllers/application_controller.rb</h2>\n\n<pre><code># filename: application_controller.rb\n# encoding: utf-8\n\nclass ApplicationController &lt; ActionController::Base\n  # Prevent CSRF attacks by raising an exception.\n  # For APIs, you may want to use :null_session instead.\n  protect_from_forgery with: :exception\n\n  before_filter :set_cors_headers\n  before_filter :cors_preflight\n\n  def set_cors_headers\n    headers['Access-Control-Allow-Origin']  = AppConfig.client['origin']\n    headers['Access-Control-Allow-Methods'] = 'GET,POST,PUT,DELETE,OPTIONS'\n    headers['Access-Control-Allow-Headers'] = '*'\n    headers['Access-Control-Max-Age']       = \"3628800\"\n  end\n\n  def cors_preflight\n    head(:ok) if request.method == :options\n  end\nend\n</code></pre>\n\n<h2>app/controllers/users/omniauth_callbacks_controller.rb</h2>\n\n<pre><code># filename: omniauth_callbacks_controller.rb\n# encoding: utf-8\n\nclass Users::OmniauthCallbacksController &lt; Devise::OmniauthCallbacksController\n  ## Sign in / up with LinkedIn\n  def linkedin\n    auth_hash = request.env[\"omniauth.auth\"]\n\n    auth = Authorization.find_by_provider_and_uid(\"linkedin\", auth_hash['uid'])\n\n    if auth\n      ## User already exists\n      user = auth.user\n    else\n      ## User already signed in\n      unless current_user\n        unless user = User.find_by_email(auth_hash['info']['email'])\n          user = User.create({\n            first_name: auth_hash['info']['first_name'],\n            last_name:  auth_hash['info']['last_name'],\n            email:      auth_hash['info']['email'],\n            password:   Devise.friendly_token[0,8]\n          })\n        end\n      ## Sign user in\n      else\n        user = current_user\n      end\n\n      # Create an authorization for the current user\n      unless auth = user.authorizations.find_by_provider(auth_hash[\"provider\"])\n        auth = user.authorizations.build(provider: auth_hash[\"provider\"])\n        user.authorizations &lt;&lt; auth\n      end\n\n      auth.update_attributes({\n          uid:    auth_hash['uid'],\n          token:  auth_hash['credentials']['token'],\n          secret: auth_hash['credentials']['secret'],\n        })\n\n      # Return user\n      user\n    end\n  end\nend\n</code></pre>\n\n<h2>app/controllers/users/registrations_controller.rb</h2>\n\n<pre><code># filename: registrations_controller.rb\n# encoding: utf-8\n\nclass Users::RegistrationsController &lt; Devise::RegistrationsController\u00fa\n  skip_before_filter :verify_authenticity_token\n\n  respond_to :json\n\n  def create\n    # Create the user\n    build_resource(sign_up_params)\n\n    # Try to save them\n    if resource.save\n      sign_in resource\n      render status: 200,\n        json: {\n          success: true,\n          info: \"Registered\",\n          data: {\n            user: resource,\n            auth_token: current_user.authentication_token\n          }\n        }\n    else\n      # Otherwise fail\n      render status: :unprocessable_entity,\n        json: {\n          success: false,\n          info: resource.errors,\n          data: {}\n        }\n  end\n\nend\n</code></pre>\n\n<h2>app/controllers/users/sessions_controller.rb</h2>\n\n<pre><code># filename: omniauth_callbacks_controller.rb\n# encoding: utf-8\n\nclass Users::OmniauthCallbacksController &lt; Devise::OmniauthCallbacksController\n  ## Sign in / up with LinkedIn\n  def linkedin\n    auth_hash = request.env[\"omniauth.auth\"]\n\n    auth = Authorization.find_by_provider_and_uid(\"linkedin\", auth_hash['uid'])\n\n    if auth\n      ## User already exists\n      user = auth.user\n    else\n      ## User already signed in\n      unless current_user\n        unless user = User.find_by_email(auth_hash['info']['email'])\n          user = User.create({\n            first_name: auth_hash['info']['first_name'],\n            last_name:  auth_hash['info']['last_name'],\n            email:      auth_hash['info']['email'],\n            password:   Devise.friendly_token[0,8]\n          })\n        end\n      ## Sign user in\n      else\n        user = current_user\n      end\n\n      # Create an authorization for the current user\n      unless auth = user.authorizations.find_by_provider(auth_hash[\"provider\"])\n        auth = user.authorizations.build(provider: auth_hash[\"provider\"])\n        user.authorizations &lt;&lt; auth\n      end\n\n      auth.update_attributes({\n          uid:    auth_hash['uid'],\n          token:  auth_hash['credentials']['token'],\n          secret: auth_hash['credentials']['secret'],\n        })\n\n      # Return user\n      user\n    end\n  end\nend\n</code></pre>\n\n<h2>\u00a0app/controllers/users/users_controller.rb</h2>\n\n<pre><code># filename: users_controller.rb\n# encoding: utf-8\n\nclass Users::UsersController &lt; Devise::SessionsController\n  protect_from_forgery with: :exception, except: [:is_user]\n\n  respond_to :json\n\n  ## Check if user exists by email\n  def is_user\n    #authenticate_user!\n    render status: 200, json: {\n        success: !User.find_by_email(params[:email]).blank?\n      }\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "nokogiri"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1424303016, "post_id": 28594169, "comment_id": 45498809, "body": "<code>text</code> returns all the text contained within a particular node. As <a href=\"http://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri/XML/Node#text-instance_method\" rel=\"nofollow noreferrer\">the docs</a> say, it &quot;Returns the content for this Node&quot;."}, {"owner": {"reputation": 46, "user_id": 3138572, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6d4b3c613941458a2967c1c4f94d625?s=128&d=identicon&r=PG&f=1", "display_name": "Brogrammer", "link": "https://stackoverflow.com/users/3138572/brogrammer"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1424385254, "post_id": 28594169, "comment_id": 45539642, "body": "Sorry I was doing something wrong I guess. My bad."}], "answers": [{"tags": [], "owner": {"reputation": 132392, "user_id": 244128, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/300502d6109af88a009074c42ff56c73?s=128&d=identicon&r=PG", "display_name": "maerics", "link": "https://stackoverflow.com/users/244128/maerics"}, "is_accepted": true, "score": 4, "last_activity_date": 1424297354, "last_edit_date": 1424297354, "creation_date": 1424296700, "answer_id": 28594744, "question_id": 28594169, "link": "https://stackoverflow.com/questions/28594169/how-do-i-get-all-the-text-within-a-tag-using-a-nokogiri-css-selector/28594744#28594744", "title": "How do I get all the text within a tag using a Nokogiri CSS selector?", "body": "<p>It looks like you can simply call the <code>#text</code> method of the target element and it will include all child text nodes:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>doc = Nokogiri::HTML(your_html_snippet)\nstr = doc.css('td').text\nstr # =&gt; \"\\n\\nsome text\\n\\n\\nmore text\\n\\n\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1062, "user_id": 1517624, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e6d7f2d2a5443be1694ee70b13720fb5?s=128&d=identicon&r=PG", "display_name": "ashishmohite", "link": "https://stackoverflow.com/users/1517624/ashishmohite"}, "is_accepted": false, "score": 0, "last_activity_date": 1445601957, "creation_date": 1445601957, "answer_id": 33301913, "question_id": 28594169, "link": "https://stackoverflow.com/questions/28594169/how-do-i-get-all-the-text-within-a-tag-using-a-nokogiri-css-selector/33301913#33301913", "title": "How do I get all the text within a tag using a Nokogiri CSS selector?", "body": "<p>You can use </p>\n\n<p><code>str = doc.css('td').content</code> </p>\n\n<p>this will get you all the text at all the levels of nesting </p>\n"}], "owner": {"reputation": 46, "user_id": 3138572, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6d4b3c613941458a2967c1c4f94d625?s=128&d=identicon&r=PG&f=1", "display_name": "Brogrammer", "link": "https://stackoverflow.com/users/3138572/brogrammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1185, "favorite_count": 0, "accepted_answer_id": 28594744, "answer_count": 2, "score": 0, "last_activity_date": 1445601957, "creation_date": 1424294498, "last_edit_date": 1424302844, "question_id": 28594169, "link": "https://stackoverflow.com/questions/28594169/how-do-i-get-all-the-text-within-a-tag-using-a-nokogiri-css-selector", "title": "How do I get all the text within a tag using a Nokogiri CSS selector?", "body": "<p>I am trying to extract text from an HTML page using Nokogiri. I am using CSS selectors to extract the text.</p>\n\n<p>I know the <code>text</code> method is used to extract the text inside a particular tag but it only gives the text that is an immediate child of the tag.</p>\n\n<p>How do I get all the text in a tag including the text that may be inside any tags that are nested within the said tag?</p>\n\n<pre><code>&lt;td&gt;\n&lt;div&gt;\nsome text\n&lt;/div&gt;\n&lt;div&gt;\nmore text\n&lt;/div&gt;\n&lt;/td&gt;\n</code></pre>\n\n<p>How do I get all the text in the <code>&lt;td&gt;</code> tags inside <code>&lt;td&gt;</code> since <code>text</code> will not return anything and it is not known beforehand how many tags are going to be there inside <code>&lt;td&gt;</code>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "redis"], "comments": [{"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1424300887, "post_id": 28593738, "comment_id": 45498041, "body": "Which version of <code>redis</code> gem is getting installed (check that on Gemfile.lock)?"}, {"owner": {"reputation": 1, "user_id": 4433657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jI3Ed.jpg?s=128&g=1", "display_name": "a2k11", "link": "https://stackoverflow.com/users/4433657/a2k11"}, "reply_to_user": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1424317776, "post_id": 28593738, "comment_id": 45502873, "body": "It works now, I&#39;m not sure why it was creating this error."}, {"owner": {"reputation": 3312, "user_id": 412528, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7a781dab51284428bf9a44f3e0c85b6a?s=128&d=identicon&r=PG", "display_name": "Guillermo Siliceo Trueba", "link": "https://stackoverflow.com/users/412528/guillermo-siliceo-trueba"}, "edited": false, "score": 0, "creation_date": 1510712062, "post_id": 28593738, "comment_id": 81548086, "body": "Probably Spring"}], "owner": {"reputation": 1, "user_id": 4433657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jI3Ed.jpg?s=128&g=1", "display_name": "a2k11", "link": "https://stackoverflow.com/users/4433657/a2k11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 468, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1424292916, "creation_date": 1424292916, "question_id": 28593738, "link": "https://stackoverflow.com/questions/28593738/using-redis-with-rails-4-2-0-problems-cant-run-rails-console", "title": "Using Redis with Rails 4.2.0 Problems, Can&#39;t run rails console", "body": "<p>I'm having problems running redis on a simple, standard rails application.  I added redis to my Gemfile:</p>\n\n<pre><code>1  source 'https://rubygems.org'                                                                                                                                         \n2                                                                                                                                                                       \n3  gem 'coffee-rails', '~&gt; 4.1.0'                                                                                                                                        \n4  gem 'jbuilder', '~&gt; 2.0'                                                                                                                                              \n5  gem 'jquery-rails'                                                                                                                                                    \n6  gem 'pg'                                                                                                                                                              \n7  gem 'rails', '4.2.0'                                                                                                                                                  \n8  gem 'redis'                                                                                                                                                           \n9  gem 'sass-rails', '~&gt; 5.0'                                                                                                                                            \n10 gem 'sdoc', '~&gt; 0.4.0', group: :doc                                                                                                                                   \n11 gem 'uglifier', '&gt;= 1.3.0'\n</code></pre>\n\n<p>I then bundle installed, and add config/initializers/redis.rb:</p>\n\n<pre><code>$redis = Redis.new(:host =&gt; 'localhost', :port =&gt; 6379)\n</code></pre>\n\n<p>When I went to run rails console I came up with this error.</p>\n\n<pre><code>/home/adam/dev/Sandbox/Redis/config/application.rb:17:in `&lt;top (required)&gt;': Redis is not a module (TypeError)\n    from /home/adam/.gem/ruby/2.1.5/gems/railties-4.2.0/lib/rails/commands/commands_tasks.rb:141:in `require'\n    from /home/adam/.gem/ruby/2.1.5/gems/railties-4.2.0/lib/rails/commands/commands_tasks.rb:141:in `require_application_and_environment!'\n    from /home/adam/.gem/ruby/2.1.5/gems/railties-4.2.0/lib/rails/commands/commands_tasks.rb:67:in `console'\n    from /home/adam/.gem/ruby/2.1.5/gems/railties-4.2.0/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n    from /home/adam/.gem/ruby/2.1.5/gems/railties-4.2.0/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n    from bin/rails:4:in `require'\n    from bin/rails:4:in `&lt;main&gt;'\n</code></pre>\n\n<p>I'm not sure how to fix this and would be appreciative for some help.</p>\n"}, {"tags": ["ruby", "html", "node.js", "user-interface", "web"], "comments": [{"owner": {"reputation": 692, "user_id": 3422069, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9rdt1.jpg?s=128&g=1", "display_name": "edu_", "link": "https://stackoverflow.com/users/3422069/edu"}, "edited": false, "score": 0, "creation_date": 1424292880, "post_id": 28593285, "comment_id": 45493979, "body": "When generating the HTML, you could put the content you want to highlight inside divs (or other tag) of a specific class. You could customize the style of this class with CSS, adding any effects you want. You&#39;ll still need to implement something to identify the chunks of data to be highlighted, but that is completely dependent on  how the log file is organized. For example, if each row represents a single event, whose type is identified by a specific keyword, you could use this keyword to decide whether or not to place each row into a highlighted div."}, {"owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "edited": false, "score": 0, "creation_date": 1424298939, "post_id": 28593285, "comment_id": 45497200, "body": "Is this a rails app or node?"}, {"owner": {"reputation": 1275, "user_id": 3846091, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/05a22704d6f3656abe5c948acafcd201?s=128&d=identicon&r=PG&f=1", "display_name": "user3846091", "link": "https://stackoverflow.com/users/3846091/user3846091"}, "edited": false, "score": 0, "creation_date": 1424299379, "post_id": 28593285, "comment_id": 45497417, "body": "None just a concept in my head... I am fine implementing it in either of those"}], "answers": [{"tags": [], "owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "is_accepted": false, "score": 0, "last_activity_date": 1424299480, "creation_date": 1424299480, "answer_id": 28595424, "question_id": 28593285, "link": "https://stackoverflow.com/questions/28593285/display-file-contents-on-the-web-browser-ui/28595424#28595424", "title": "Display File contents on the Web Browser UI", "body": "<p>I would use <a href=\"http://ckeditor.com/\" rel=\"nofollow\">CKEditor</a> and set to <a href=\"http://docs.ckeditor.com/#!/api/CKEDITOR.editor-method-setReadOnly\" rel=\"nofollow\">read-only</a> or completely hide the editor controls.</p>\n"}], "owner": {"reputation": 1275, "user_id": 3846091, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/05a22704d6f3656abe5c948acafcd201?s=128&d=identicon&r=PG&f=1", "display_name": "user3846091", "link": "https://stackoverflow.com/users/3846091/user3846091"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424299480, "creation_date": 1424291365, "question_id": 28593285, "link": "https://stackoverflow.com/questions/28593285/display-file-contents-on-the-web-browser-ui", "title": "Display File contents on the Web Browser UI", "body": "<p>I am looking to deploy a Web Interface to display file that has log contents. I am collecting the log details and storing them on my WebServer. I have an Apache interface that lets user download/view the file from the browser. </p>\n\n<p>However, the challenge here is that they don't look pretty. I want to show them in a UI that can highlight/color contents. I tried to simply pull the contents of the file and display in a Text Area which works but that would mean doing a lot of manual work to make it fancy. Wondering if something already exist that i could re-use ?</p>\n\n<p>As a future enhancement I was also hoping that the UI would find for patterns in the file and highlight them in the UI. For example, If the file contains connection refused messages just highlight them in red etc..</p>\n\n<p>I am not sure if I should build something from scratch or something already exist that i can re-use ? </p>\n"}, {"tags": ["ruby", "rubymine-7"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 1, "creation_date": 1424291269, "post_id": 28593089, "comment_id": 45493039, "body": "when <code>i</code> becomes 3, what&#39;s going to happen?"}, {"owner": {"reputation": 736, "user_id": 2783903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ecd8d52090a933ee3362bd05b95e8e6c?s=128&d=identicon&r=PG&f=1", "display_name": "JonB", "link": "https://stackoverflow.com/users/2783903/jonb"}, "edited": false, "score": 0, "creation_date": 1424292763, "post_id": 28593089, "comment_id": 45493899, "body": "When <code>i = 3</code> your return value for <code>arr[i + 1]</code> is <code>nil</code>.  You can&#39;t subtract from <code>nil</code>."}, {"owner": {"reputation": 55, "user_id": 4581251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04303d44308d109b6358dc029323e56c?s=128&d=identicon&r=PG&f=1", "display_name": "Ifad Noor", "link": "https://stackoverflow.com/users/4581251/ifad-noor"}, "edited": false, "score": 0, "creation_date": 1424292956, "post_id": 28593089, "comment_id": 45494015, "body": "AHA! thanks, I&#39;m very much a noobie at this as you can already tell. I am learning though and it&#39;s a lot of fun."}, {"owner": {"reputation": 736, "user_id": 2783903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ecd8d52090a933ee3362bd05b95e8e6c?s=128&d=identicon&r=PG&f=1", "display_name": "JonB", "link": "https://stackoverflow.com/users/2783903/jonb"}, "edited": false, "score": 0, "creation_date": 1424293116, "post_id": 28593089, "comment_id": 45494095, "body": "When in doubt play computer and step the code out on paper."}], "answers": [{"tags": [], "owner": {"reputation": 4071, "user_id": 3806046, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5fedf50ce7cd2659bca902e9a2969158?s=128&d=identicon&r=PG&f=1", "display_name": "jkeuhlen", "link": "https://stackoverflow.com/users/3806046/jkeuhlen"}, "is_accepted": true, "score": 0, "last_activity_date": 1424294823, "creation_date": 1424294823, "answer_id": 28594261, "question_id": 28593089, "link": "https://stackoverflow.com/questions/28593089/i-am-trying-to-run-the-following-array-method-using-ruby-but-keep-getting-the-fo/28594261#28594261", "title": "I am trying to run the following array method using ruby but keep getting the following error:", "body": "<p>Whenever you see the <code>nil:NilClass (NoMethodError)</code> error in ruby you should look for whatever objects could have become <code>nil</code>. In your case, you are iterating over an array and are hitting an edge case. </p>\n\n<p>Let's look at your code in detail:</p>\n\n<pre><code># Start with this array of length 4\narr = [2,4,6,8]\n# Initilize counter to 0\ni = 0\n# Run this loop while i &lt; 4\nwhile i &lt; arr.length do\n  puts arr[i + 1] - arr[i]\n  # Increment by 1 each time\n  i = i + 1\nend\n</code></pre>\n\n<p>The case you are running into the <code>nil</code> object is at the very end. When <code>i=3</code>, <code>i+1=4</code> and you are trying to access the index 4 element in your array. Remember, arrays in ruby (like most languages) are 0-indexed. So your array has indexes 0,1,2, and 3. If you attempt to access an index that you haven't defined a value for, ruby will return <code>nil</code>. So <code>arr[4]</code>,<code>arr[400]</code>, and <code>arr[100000000]</code> all return the same thing: <code>nil</code>. </p>\n"}], "owner": {"reputation": 55, "user_id": 4581251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04303d44308d109b6358dc029323e56c?s=128&d=identicon&r=PG&f=1", "display_name": "Ifad Noor", "link": "https://stackoverflow.com/users/4581251/ifad-noor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 28594261, "answer_count": 1, "score": 0, "last_activity_date": 1424294823, "creation_date": 1424290664, "last_edit_date": 1424291138, "question_id": 28593089, "link": "https://stackoverflow.com/questions/28593089/i-am-trying-to-run-the-following-array-method-using-ruby-but-keep-getting-the-fo", "title": "I am trying to run the following array method using ruby but keep getting the following error:", "body": "<pre><code>arr = [2,4,6,8]\ni = 0\nwhile i &lt; arr.length do\n  puts arr[i + 1] - arr[i]\n  i = i + 1\nend\n</code></pre>\n\n<p>It puts out the values on the console but also issues an error</p>\n\n<blockquote>\n  <p>ERROR (on RubyMine 7): C:\\Ruby21\\bin\\ruby.exe -e\n  $stdout.sync=true;$stderr.sync=true;load($0=ARGV.shift)\n  C:/.../file/application.rb \n  2  2  2\n  C:/Users/inoor/RubymineProjects/file/application.rb:4:in <code>&lt;top\n  (required)&gt;': undefined method</code>-' for nil:NilClass (NoMethodError)\n    from -e:1:in <code>load'     from -e:1:in</code>'</p>\n  \n  <p>Process finished with exit code 1</p>\n</blockquote>\n\n<p>Can someone please help me understand what's going on?</p>\n"}, {"tags": ["ruby", "symbols", "currency"], "answers": [{"tags": [], "owner": {"reputation": 5307, "user_id": 1193216, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/25fae6f93f4a2bf88f6a4e265d944685?s=128&d=identicon&r=PG", "display_name": "Josh", "link": "https://stackoverflow.com/users/1193216/josh"}, "is_accepted": false, "score": 0, "last_activity_date": 1424380532, "creation_date": 1424380532, "answer_id": 28617039, "question_id": 28592584, "link": "https://stackoverflow.com/questions/28592584/how-can-i-access-or-assign-custom-currency-symbols-when-format-method-is-called/28617039#28617039", "title": "How can I access or assign custom currency symbols when format method is called using money gem?", "body": "<p>One option is to override the necessary languages.</p>\n\n<pre><code>josh_dollar = {\n  :priority        =&gt; 1,\n  :iso_code        =&gt; \"USD\",\n  :iso_numeric     =&gt; \"840\",\n  :name            =&gt; \"United States Dollar\",\n  :symbol          =&gt; \"Josh\",\n  :subunit         =&gt; \"Cent\",\n  :subunit_to_unit =&gt; 100,\n  :separator       =&gt; \".\",\n  :delimiter       =&gt; \",\"\n}\n\nMoney::Currency.register(josh_dollar)\njosh_dollar = Money.new(1000,\"USD\")\njosh_dollar.format\n#=&gt; \"10.00 Josh\"\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 4580822, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-H9tPwQ4RFFQ/AAAAAAAAAAI/AAAAAAAAAWs/6K56AXCnAb8/photo.jpg?sz=128", "display_name": "cseifert", "link": "https://stackoverflow.com/users/4580822/cseifert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 240, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1424380532, "creation_date": 1424288954, "question_id": 28592584, "link": "https://stackoverflow.com/questions/28592584/how-can-i-access-or-assign-custom-currency-symbols-when-format-method-is-called", "title": "How can I access or assign custom currency symbols when format method is called using money gem?", "body": "<p>I have a list of currency codes that I need to display specific currency values for and have found that some are available in <a href=\"https://github.com/RubyMoney/money/blob/f2d455fff488d06744f666412dc1cb5eb07d211d/config/currency_iso.json#L7\" rel=\"nofollow\">alternate_symbols from money gem</a>. I can't figure out how to access those when using the format method, though, and also need to override a handful. For example, for CAD, I need to display the second symbol - CAD$ - but for SRD, I need to display SRD$ which doesn't exist in alternate_symbols array for that currency.</p>\n\n<p>I'm looking to use i18n to specify these currencies since some are more custom.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1424301001, "post_id": 28592579, "comment_id": 45498084, "body": "Did you do <code>bundle install</code>?"}, {"owner": {"reputation": 11166, "user_id": 847116, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/YLb4A.gif?s=128&g=1", "display_name": "jamesc", "link": "https://stackoverflow.com/users/847116/jamesc"}, "edited": false, "score": 0, "creation_date": 1424302384, "post_id": 28592579, "comment_id": 45498598, "body": "pty gem is currently not available in Windows. Not sure if/when it will ever be. Strongly suggest you use a Linux OS something like Mint if you are just getting started. You will run into a lot of Windows limitations and differences. Also you will be hosting on a linux distro so good to get familiar with the OS"}], "answers": [{"comments": [{"owner": {"reputation": 377, "user_id": 4151972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e6ddced56dc5f791b74c0752ffb995b6?s=128&d=identicon&r=PG", "display_name": "click", "link": "https://stackoverflow.com/users/4151972/click"}, "edited": false, "score": 0, "creation_date": 1424372961, "post_id": 28596063, "comment_id": 45532797, "body": "Thanks for your help!"}], "tags": [], "owner": {"reputation": 11166, "user_id": 847116, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/YLb4A.gif?s=128&g=1", "display_name": "jamesc", "link": "https://stackoverflow.com/users/847116/jamesc"}, "is_accepted": true, "score": 0, "last_activity_date": 1424302558, "creation_date": 1424302558, "answer_id": 28596063, "question_id": 28592579, "link": "https://stackoverflow.com/questions/28592579/rails-server-command-doesnt-run/28596063#28596063", "title": "rails server command doesn&#39;t run", "body": "<p>To solve this for the time being comment out the web-console gem as this has reference to the pty gem but please take note of my comment on your question</p>\n\n<pre><code># gem 'web-console'\n</code></pre>\n\n<p>You might then want to run bundle install again</p>\n"}], "owner": {"reputation": 377, "user_id": 4151972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e6ddced56dc5f791b74c0752ffb995b6?s=128&d=identicon&r=PG", "display_name": "click", "link": "https://stackoverflow.com/users/4151972/click"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 28596063, "answer_count": 1, "score": 0, "last_activity_date": 1424302558, "creation_date": 1424288944, "last_edit_date": 1424300965, "question_id": 28592579, "link": "https://stackoverflow.com/questions/28592579/rails-server-command-doesnt-run", "title": "rails server command doesn&#39;t run", "body": "<p>I am trying to run the rails server on windows instance (I am using gitbash). I already install ruby (1.9.3), rails(4.2.0) and gem (1.8.29). I have took a screen shots of my error and my Gemfiles so you guys can look at it. I dig into the error and it seems like PTY files which are required on the slave.rb files is not supported on the windows! Does anyone know the way around this problem?\nThanks!\n<img src=\"https://i.stack.imgur.com/Frs62.png\" alt=\"enter image description here\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/FoXuS.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "alchemy-cms"], "answers": [{"comments": [{"owner": {"reputation": 12346, "user_id": 393931, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b60fdebd80d26112521c45358c08cc1a?s=128&d=identicon&r=PG", "display_name": "Tobias J", "link": "https://stackoverflow.com/users/393931/tobias-j"}, "edited": false, "score": 0, "creation_date": 1424298490, "post_id": 28594120, "comment_id": 45497008, "body": "Ahh thanks, I wasn&#39;t thinking about it that way. Makes sense since the whole point of mountable engines is namespacing everything to avoid collisions!"}], "tags": [], "owner": {"reputation": 668, "user_id": 527689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6305f558f8a1db44442d37a9707152f4?s=128&d=identicon&r=PG", "display_name": "tvdeyen", "link": "https://stackoverflow.com/users/527689/tvdeyen"}, "is_accepted": true, "score": 2, "last_activity_date": 1424294350, "creation_date": 1424294350, "answer_id": 28594120, "question_id": 28592500, "link": "https://stackoverflow.com/questions/28592500/devise-controller-method-not-found-using-alchemy-cms/28594120#28594120", "title": "Devise controller method not found using Alchemy CMS", "body": "<p>Common rails routing proxy problem. Since the Alchemy views don't know your main apps routes, you need to use the 'main_app' routing proxy object. </p>\n\n<p>So calling 'main_app.new_user_session_path' should fix your problem. </p>\n\n<p>Read more about routes in engines in this Rails guide: <a href=\"http://guides.rubyonrails.org/engines.html#routes\" rel=\"nofollow\">http://guides.rubyonrails.org/engines.html#routes</a></p>\n"}], "owner": {"reputation": 12346, "user_id": 393931, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b60fdebd80d26112521c45358c08cc1a?s=128&d=identicon&r=PG", "display_name": "Tobias J", "link": "https://stackoverflow.com/users/393931/tobias-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "accepted_answer_id": 28594120, "answer_count": 1, "score": 0, "last_activity_date": 1424294350, "creation_date": 1424288650, "question_id": 28592500, "link": "https://stackoverflow.com/questions/28592500/devise-controller-method-not-found-using-alchemy-cms", "title": "Devise controller method not found using Alchemy CMS", "body": "<p>I have a Rails 4.1.8 app which was developed by a third party; it already uses Devise with a User model. I want to use Alchemy just to manage a few mostly-static pages like \"about us\" etc.</p>\n\n<p>So I followed the directions for installing Alchemy CMS 3.1.0-rc1 into the existing app, and set <code>Alchemy.user_class_name</code> in the initializer. I mounted Alchemy under the <code>/p/</code> path for now to avoid collisions with my existing paths.</p>\n\n<p>Everything seems to be working fine, except when I try to view an Alchemy page while logged out, my <code>application.html.erb</code> throws the following error:</p>\n\n<pre><code>undefined method `new_user_session_path' for\n#&lt;#&lt;Class:0x007fe4c6833ee0&gt;:0x007fe4cb5b8940&gt;\n</code></pre>\n\n<p>This happens because my app uses <code>new_user_session_path</code> in <code>application.html.erb</code>, to show a Login link for the guest user. In the regular app, it works fine, and also works fine when I view an Alchemy page when logged in.</p>\n\n<p>I'm not familiar enough with Devise and Alchemy to figure out where the problem exists. I'm guessing it's one of two things:</p>\n\n<ol>\n<li>when there is no logged-in User, the app is creating a \"guest\" User (for access to other methods on the User model), and Devise doesn't know about this user so it doesn't create the <code>new_user_session_path</code> helper.</li>\n<li>I have some problem in my routing, and because Alchemy is a mountable engine, there is maybe some logic in my application controller that isn't getting called.</li>\n</ol>\n\n<p>I'd prefer to not post my entire routes.rb or application controller, but here's the relevant devise section from the former.</p>\n\n<pre><code>  devise_for :users, :path =&gt; \"auth\", :path_names =&gt; { :sign_in =&gt; 'login', :sign_out =&gt; 'logout',\n    :password =&gt; 'secret', :confirmation =&gt; 'verification', :registration =&gt; 'register' },\n    :controllers =&gt; {\n        :registrations =&gt; \"authentication\",\n        :passwords =&gt; \"passwords\",\n        :omniauth_callbacks =&gt; \"omniauth_callbacks\",\n        :sessions =&gt; \"sessions\"\n      }\n\n  devise_scope :user do\n    # several get/post definitions here to change various urls\n  end\n</code></pre>\n\n<p>I don't think it's #2, because even if I define a <code>devise_scope</code> for a custom path like:</p>\n\n<pre><code>devise_scope :user do\n  get 'login', to: 'devise/sessions#new'\nend\n</code></pre>\n\n<p>I get the same problem: it works in the main app, and when users are logged in, but not on Alchemy pages with guest User.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2859, "user_id": 3945932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1794745acd9e572c24558b78b48d597?s=128&d=identicon&r=PG", "display_name": "ptd", "link": "https://stackoverflow.com/users/3945932/ptd"}, "edited": false, "score": 1, "creation_date": 1424288366, "post_id": 28592347, "comment_id": 45491286, "body": "The error message is clear. Look at how you define the method <code>set_brand_name</code> and then look at how you call it. Do you see the difference? It&#39;s useful to practice going through this process as you learn. Also, &#39;Object Oriented Programming&#39; is usually shortened to &#39;OOP&#39;, not &#39;OPP&#39;."}, {"owner": {"reputation": 47, "user_id": 4508939, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/550031871/picture?type=large", "display_name": "Taurus Omejia", "link": "https://stackoverflow.com/users/4508939/taurus-omejia"}, "reply_to_user": {"reputation": 2859, "user_id": 3945932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1794745acd9e572c24558b78b48d597?s=128&d=identicon&r=PG", "display_name": "ptd", "link": "https://stackoverflow.com/users/3945932/ptd"}, "edited": false, "score": 0, "creation_date": 1424288931, "post_id": 28592347, "comment_id": 45491652, "body": "Thanks for the swift response Tim! I see it now."}], "answers": [{"tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": false, "score": 1, "last_activity_date": 1424288355, "creation_date": 1424288355, "answer_id": 28592405, "question_id": 28592347, "link": "https://stackoverflow.com/questions/28592347/error-working-with-oop-classes/28592405#28592405", "title": "Error working with oop (classes)", "body": "<p>The problem is that you are not calling the method names as you've defined them.  You defined <code>set_brand_name</code> without an equal sign so use:</p>\n\n<pre><code>my_laptop.set_brand_name(\"HP\")\n</code></pre>\n\n<p>I would simply the getters and setters like so:</p>\n\n<pre><code>class Laptop\n  def brand_name=(brand_name)\n    @brand_name = brand_name\n  end\n\n  def brand_name\n    @brand_name\n  end\nend\n</code></pre>\n\n<p>Or even better:</p>\n\n<pre><code>class Laptop\n  attr_accessor :brand_name\nend\n</code></pre>\n\n<p>Then you can use it the same way:</p>\n\n<pre><code>my_laptop = Laptop.new\nmy_laptop.brand_name = \"HP\"\nputs my_laptop.brand_name # =&gt; \"HP\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 1, "last_activity_date": 1424288737, "last_edit_date": 1424288737, "creation_date": 1424288374, "answer_id": 28592411, "question_id": 28592347, "link": "https://stackoverflow.com/questions/28592347/error-working-with-oop-classes/28592411#28592411", "title": "Error working with oop (classes)", "body": "<p>In line 45, you are calling the method <code>set_brand_name=</code>, but your <code>Laptop</code> class doesn't have a method with that name. You need to either call the method which you <em>do</em> have (<code>set_brand_name</code>), or rename the <code>set_brand_name</code> method to <code>set_brand_name=</code>.</p>\n\n<p>Note that neither of those two is idiomatic, though. Idiomatically, the method should be named <code>brand_name=</code> (without the <code>set_</code> prefix, the \"setting\" part is already implied by the <code>=</code> sign), and you shouldn't define it manually, but programmatically using the <code>Module#attr_writer</code> method.</p>\n\n<p>Your entire code can be condensed to:</p>\n\n<pre><code>Laptop = Struct.new(:brand_name, :color, :processor, :storage, :memory)\n\nmy_laptop = Laptop.new('HP', 'Silver', 'i7-4700k', '750gb', '16gb')\n\nbrand     = my_laptop.brand_name\ncolor     = my_laptop.color\nprocessor = my_laptop.processor\nmemory    = my_laptop.memory\nstorage   = my_laptop.storage\n\nputs \"The Laptop I want is an #{brand}, it has a #{processor}, #{memory} of ram, a #{storage}, and it's #{color}!!!\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 4508939, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/550031871/picture?type=large", "display_name": "Taurus Omejia", "link": "https://stackoverflow.com/users/4508939/taurus-omejia"}, "edited": false, "score": 1, "creation_date": 1424289503, "post_id": 28592653, "comment_id": 45492003, "body": "Man, thats so much cleaner! Thanks Jorge, I will try that."}], "tags": [], "owner": {"reputation": 586, "user_id": 1333910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9a3d55cb561eb26f7151b94c3f5e86cd?s=128&d=identicon&r=PG", "display_name": "bonebroth", "link": "https://stackoverflow.com/users/1333910/bonebroth"}, "is_accepted": false, "score": 1, "last_activity_date": 1424289186, "creation_date": 1424289186, "answer_id": 28592653, "question_id": 28592347, "link": "https://stackoverflow.com/questions/28592347/error-working-with-oop-classes/28592653#28592653", "title": "Error working with oop (classes)", "body": "<p>Your setter methods are defined incorrectly.</p>\n\n<p>Here's your definition of the <code>set_brand_name</code> method:</p>\n\n<pre><code>def set_brand_name(brand_name)\n    @brand = brand_name\nend\n</code></pre>\n\n<p>And here's how you're calling it:</p>\n\n<pre><code>my_laptop.set_brand_name = \"HP\"\n</code></pre>\n\n<p>You're calling the method incorrectly. If you'd like to keep your definition, you should be calling it like this:</p>\n\n<pre><code>my_laptop.set_brand_name(\"HP\")\n</code></pre>\n\n<p>Or, if you'd like to use the equals sign, you should define your method like this:</p>\n\n<pre><code>def set_brand_name=(brand_name)\n    @brand = brand_name\nend\n</code></pre>\n\n<p>Notice the equals in the method definition? You're required to use it when you want the setter to look like a regular assignment.</p>\n\n<p>However, for most trivial cases you don't need to define getters and setters manually. You can just use <code>attr_accessor</code> on the class and pass it the properties you want to define. Here's what your class would look like with <code>attr_accessor</code>:</p>\n\n<pre><code>class Laptop    \n   attr_accessor: :brand_name, :color, :processor, :storage, :memory\nend\n\nmy_laptop = Laptop.new\nmy_laptop.brand_name = \"HP\"\nmy_laptop.processor = 'i7-4700k'\nmy_laptop.memory = '16gb'\nmy_laptop.storage = '750gb'\nmy_laptop.color = 'Silver'\n\nbrand = my_laptop.brand_name\ncolor = my_laptop.color\nprocessor = my_laptop.processor\nmemory = my_laptop.memory\nstorage = my_laptop.storage\n\nputs \"\"\"The Laptop I want is an #{brand}, it has a #{processor}, \n#{memory} of ram, a #{storage}, and it #{color}!!!\"\"\"\n</code></pre>\n\n<p>I encourage you to try it.</p>\n"}], "owner": {"reputation": 47, "user_id": 4508939, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/550031871/picture?type=large", "display_name": "Taurus Omejia", "link": "https://stackoverflow.com/users/4508939/taurus-omejia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1424289186, "creation_date": 1424288142, "last_edit_date": 1424288503, "question_id": 28592347, "link": "https://stackoverflow.com/questions/28592347/error-working-with-oop-classes", "title": "Error working with oop (classes)", "body": "<p>I just started with <code>ruby</code>, and just started learning <code>oop</code> today, after making a class, I am trying to print to console yet I keep getting this error. Does anyone know what's wrong?</p>\n\n<blockquote>\n  <p>undefined method `set_brand_name=' for # (NoMethodError)</p>\n</blockquote>\n\n<p>Here is the code causing this error:</p>\n\n<pre><code>class Laptop\n\n    def set_brand_name(brand_name)\n        @brand = brand_name\n    end\n\n    def get_brand_name\n        return @brand\n    end\n\n    def set_color(color)\n        @color = color\n    end\n\n    def get_color\n        return @color\n    end\n\n    def set_processor(processor)\n        @processor = processor\n    end\n\n    def get_processor\n        return @processor\n    end\n\n    def set_storage(hard_drive)\n        @storage = hard_drive\n    end\n\n    def get_storage\n        return @storage\n    end\n\n    def set_memory(ram)\n        @memory = ram\n    end\n\n    def get_memory\n        return @memory\n    end\nend\n\nmy_laptop = Laptop.new\nmy_laptop.set_brand_name = \"HP\"\nmy_laptop.set_processor = 'i7-4700k'\nmy_laptop.set_memory = '16gb'\nmy_laptop.set_storage = '750gb'\nmy_laptop.set_color = 'Silver'\n\nbrand = my_laptop.get_brand_name\ncolor = my_laptop.get_color\nprocessor = my_laptop.get_processor\nmemory = my_laptop.get_memory\nstorage = my_laptop.get_storage\n</code></pre>\n\n<p>This should output the message:</p>\n\n<blockquote>\n  <p>\"\"\"The Laptop I want is an #{brand}, it has a #{processor}, \n      #{memory} of ram, a #{storage}, and it #{color}!!!\"\"\"</p>\n</blockquote>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 343, "user_id": 3465125, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d0266c3b6ef13305e5b9100a207c0727?s=128&d=identicon&r=PG&f=1", "display_name": "St3", "link": "https://stackoverflow.com/users/3465125/st3"}, "edited": false, "score": 0, "creation_date": 1424288844, "post_id": 28592464, "comment_id": 45491587, "body": "Thanks I&#39;ll try this now.  Question since I&#39;m pretty new to rails servers.  Do I just Control-C out to log off and then <code>rails spring stop</code> and then run <code>rake tmp:clear</code> ?"}, {"owner": {"reputation": 22836, "user_id": 152786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/581hP.jpg?s=128&g=1", "display_name": "smathy", "link": "https://stackoverflow.com/users/152786/smathy"}, "reply_to_user": {"reputation": 343, "user_id": 3465125, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d0266c3b6ef13305e5b9100a207c0727?s=128&d=identicon&r=PG&f=1", "display_name": "St3", "link": "https://stackoverflow.com/users/3465125/st3"}, "edited": false, "score": 1, "creation_date": 1424289179, "post_id": 28592464, "comment_id": 45491800, "body": "Yes, although it should be just <code>spring stop</code> or <code>bin&#47;spring stop</code>."}, {"owner": {"reputation": 343, "user_id": 3465125, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d0266c3b6ef13305e5b9100a207c0727?s=128&d=identicon&r=PG&f=1", "display_name": "St3", "link": "https://stackoverflow.com/users/3465125/st3"}, "edited": false, "score": 0, "creation_date": 1424289844, "post_id": 28592464, "comment_id": 45492236, "body": "So this is odd but might be helpful.  I&#39;m on Windows 7 btw.  <code>spring</code> or <code>spring stop</code> wasn&#39;t recognized as any command no matter what I tried.  Then I did <code>rake tmp:clear</code> and when I refreshed the browser the links to the articles were deleted.  Earlier when trying to solve this problem I did <code>rake db:reset</code> thinking that would clear the cache.  Now I&#39;m thinking did that delete all my articles but not clear the cache causing this problem and now clearing the cache actually got rid of the articles in the browser?"}, {"owner": {"reputation": 14139, "user_id": 1108, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/48OpQ.jpg?s=128&g=1", "display_name": "jerhinesmith", "link": "https://stackoverflow.com/users/1108/jerhinesmith"}, "edited": false, "score": 2, "creation_date": 1424290569, "post_id": 28592464, "comment_id": 45492653, "body": "<code>db:reset</code> definitely would have deleted your articles and could explain what you&#39;re seeing now.  From the rails source, <code>db:reset</code> &#39;Drops and recreates the database from db/schema.rb for the current environment and loads the seeds.&#39;"}, {"owner": {"reputation": 343, "user_id": 3465125, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d0266c3b6ef13305e5b9100a207c0727?s=128&d=identicon&r=PG&f=1", "display_name": "St3", "link": "https://stackoverflow.com/users/3465125/st3"}, "reply_to_user": {"reputation": 14139, "user_id": 1108, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/48OpQ.jpg?s=128&g=1", "display_name": "jerhinesmith", "link": "https://stackoverflow.com/users/1108/jerhinesmith"}, "edited": false, "score": 1, "creation_date": 1424290777, "post_id": 28592464, "comment_id": 45492771, "body": "@jerhinesmith Yeah that was it.  Stupid move on my part.  Like I said I&#39;m pretty new to this.  Didn&#39;t realize that would delete my whole database.  Now I know.  The cache not being cleared is what wasn&#39;t making sense since everything was still showing up.  Thanks for the help everyone.  Everything works now."}, {"owner": {"reputation": 14139, "user_id": 1108, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/48OpQ.jpg?s=128&g=1", "display_name": "jerhinesmith", "link": "https://stackoverflow.com/users/1108/jerhinesmith"}, "edited": false, "score": 0, "creation_date": 1424292651, "post_id": 28592464, "comment_id": 45493841, "body": "Well, it could be worse -- at least you didn&#39;t run <code>db:reset</code> on production. :)"}], "tags": [], "owner": {"reputation": 22836, "user_id": 152786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/581hP.jpg?s=128&g=1", "display_name": "smathy", "link": "https://stackoverflow.com/users/152786/smathy"}, "is_accepted": true, "score": 1, "last_activity_date": 1424288501, "creation_date": 1424288501, "answer_id": 28592464, "question_id": 28592284, "link": "https://stackoverflow.com/questions/28592284/couldnt-find-article-with-id-1-and-undefined-method-title-for-nilnilclass/28592464#28592464", "title": "Couldn&#39;t find Article with &#39;id&#39;=1 and undefined method `title&#39; for nil:NilClass in Rails app", "body": "<p>Based on the code you're showing, that shouldn't be able to happen, if the link is present on your index page, then your show method should be able to find it.</p>\n\n<p>Maybe your index page is out of date, or using some cache that is no longer valid. Try reloading the page, or restarting your server (and if you do this, be sure to run <code>spring stop</code> so you get a full restart), I would also run <code>rake tmp:clear</code> to clear the cache, just in case.</p>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 8303813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab27f70b32dc43b21081b545c79b2565?s=128&d=identicon&r=PG&f=1", "display_name": "Subramaniam Chintamani", "link": "https://stackoverflow.com/users/8303813/subramaniam-chintamani"}, "is_accepted": false, "score": 0, "last_activity_date": 1514033623, "creation_date": 1514033623, "answer_id": 47952670, "question_id": 28592284, "link": "https://stackoverflow.com/questions/28592284/couldnt-find-article-with-id-1-and-undefined-method-title-for-nilnilclass/47952670#47952670", "title": "Couldn&#39;t find Article with &#39;id&#39;=1 and undefined method `title&#39; for nil:NilClass in Rails app", "body": "<p>I got the same error in a udemy course, i had not added a plural form of articles while redirecting the path. I had typed </p>\n\n<blockquote>\n  <p><strong>article_path(article)</strong></p>\n</blockquote>\n\n<p>instead of </p>\n\n<blockquote>\n  <p><strong>articles_path(article)</strong></p>\n</blockquote>\n\n<p>I hope this helps someone.</p>\n"}], "owner": {"reputation": 343, "user_id": 3465125, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d0266c3b6ef13305e5b9100a207c0727?s=128&d=identicon&r=PG&f=1", "display_name": "St3", "link": "https://stackoverflow.com/users/3465125/st3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2187, "favorite_count": 0, "accepted_answer_id": 28592464, "answer_count": 2, "score": 2, "last_activity_date": 1514033623, "creation_date": 1424287923, "question_id": 28592284, "link": "https://stackoverflow.com/questions/28592284/couldnt-find-article-with-id-1-and-undefined-method-title-for-nilnilclass", "title": "Couldn&#39;t find Article with &#39;id&#39;=1 and undefined method `title&#39; for nil:NilClass in Rails app", "body": "<p>I've been following the JumpStartLab Blogger 2 Project and I'm stuck on what seems to be something simple.  <a href=\"http://tutorials.jumpstartlab.com/projects/blogger.html#i1:-form-based-workflow\" rel=\"nofollow\">I'm at this point</a> Just scroll up a page where it says</p>\n\n<pre><code>@article = Article.find(params[:id])\n</code></pre>\n\n<p>Basically I've followed everything to a tee (I think) and after refreshing the browser after clicking the link for one of the articles I get the following error: </p>\n\n<blockquote>\n  <p>ActiveRecord::RecordNotFound in ArticlesController#show </p>\n  \n  <p>Couldn't find Article with 'id'=1</p>\n</blockquote>\n\n<p>My Articles_controller.rb looks like this</p>\n\n<pre><code>class ArticlesController &lt; ApplicationController\n\n  def index\n    @articles = Article.all\n  end\n\n  def show\n    @article = Article.find(params[:id])\n  end\n\nend\n</code></pre>\n\n<p>My index.html.erb looks like this</p>\n\n<pre><code>&lt;h1&gt;All Articles&lt;/h1&gt;\n\n    &lt;ul id=\"articles\"&gt;\n    &lt;% @articles.each do |article| %&gt;\n        &lt;li&gt;\n            &lt;%= link_to article.title, article_path(article), class: 'article_title', id: \"article_#{article.id}\" %&gt;\n        &lt;/li&gt;\n    &lt;% end %&gt;\n\n&lt;/ul&gt;\n\n&lt;%= link_to \"Create a New Article\", new_article_path, class: \"new_article\" %&gt;\n</code></pre>\n\n<p>And my show.html.erb looks like this.</p>\n\n<pre><code>&lt;h1&gt;&lt;%= @article.title %&gt;&lt;/h1&gt;\n&lt;p&gt;&lt;%= @article.body %&gt;&lt;/p&gt;\n&lt;%= link_to \"&lt;&lt; Back to Articles List\", articles_path %&gt;\n</code></pre>\n\n<p>Pretty stuck here and can't figure it out.  Also I noticed another problem.  At first I forgot the </p>\n\n<pre><code>@article = Article.find(params[:id])\n</code></pre>\n\n<p>and I was plagued with this error which I assume will come back after I figure out the first issue.</p>\n\n<blockquote>\n  <p>NoMethodError in Articles#show  show.html.erb where line #1 raised:</p>\n  \n  <p>undefined method `title' for nil:NilClass</p>\n</blockquote>\n\n<p>I've looked up similar questions but they all seem to be deeper into the program than I am and were talking about private methods which I don't think I'm dealing with yet. I posted both problems because I'm not sure if they are related or not. Any advice would help me out as this is really slowing me down.  Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "rspec-rails"], "comments": [{"owner": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "edited": false, "score": 0, "creation_date": 1424289102, "post_id": 28592072, "comment_id": 45491755, "body": "do you require the <code>rails_helper.rb</code> in your specs?"}, {"owner": {"reputation": 1826, "user_id": 185027, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8865c2bdaf725c5ac24fbe34ea97c945?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob", "link": "https://stackoverflow.com/users/185027/jacob"}, "reply_to_user": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "edited": false, "score": 0, "creation_date": 1424290920, "post_id": 28592072, "comment_id": 45492848, "body": "Yes, sorry, I have corrected the spec :)"}], "answers": [{"comments": [{"owner": {"reputation": 1826, "user_id": 185027, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8865c2bdaf725c5ac24fbe34ea97c945?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob", "link": "https://stackoverflow.com/users/185027/jacob"}, "edited": false, "score": 0, "creation_date": 1424517964, "post_id": 28594549, "comment_id": 45588256, "body": "You were absolutely right, the error wasn&#39;t related at all. Not understanding autoloading well lead me to think that, so the article that you provided was very useful. Thanks a lot!"}], "tags": [], "owner": {"reputation": 26839, "user_id": 1008891, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/BbcgE.jpg?s=128&g=1", "display_name": "Peter Alfvin", "link": "https://stackoverflow.com/users/1008891/peter-alfvin"}, "is_accepted": true, "score": 2, "last_activity_date": 1424295975, "creation_date": 1424295975, "answer_id": 28594549, "question_id": 28592072, "link": "https://stackoverflow.com/questions/28592072/how-can-i-make-rspec-see-my-services-folder/28594549#28594549", "title": "How can I make Rspec see my services folder?", "body": "<p>RSpec relies on Rails and Ruby autoloading and Rails and Ruby autoloading is explained in <a href=\"http://urbanautomaton.com/blog/2013/08/27/rails-autoloading-hell/\" rel=\"nofollow\">http://urbanautomaton.com/blog/2013/08/27/rails-autoloading-hell/</a>. Autoloading may be unrelated to the error you showed above, however. To understand what's happening there, you should look at and (if you're interested in help) share the backtrace and associated code (e.g. what is calling <code>.value</code>).</p>\n"}], "owner": {"reputation": 1826, "user_id": 185027, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8865c2bdaf725c5ac24fbe34ea97c945?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob", "link": "https://stackoverflow.com/users/185027/jacob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 911, "favorite_count": 0, "accepted_answer_id": 28594549, "answer_count": 1, "score": 2, "last_activity_date": 1424295975, "creation_date": 1424287268, "last_edit_date": 1424290899, "question_id": 28592072, "link": "https://stackoverflow.com/questions/28592072/how-can-i-make-rspec-see-my-services-folder", "title": "How can I make Rspec see my services folder?", "body": "<p>I'm trying to get a deeper understanding about how RSpec and Rails loads files, more than solving this specific issue.</p>\n\n<p>My rails application has a common structure, with a new folder:</p>\n\n<pre><code>my_app/\n      /assets\n      /controllers\n      /...\n      /services (new folder)\n      /spec\n</code></pre>\n\n<p>In the spec folder I have a test. At this moment, it only tests the creation of a new instance of my class</p>\n\n<pre><code>require 'rails_helper'\nRSpec.describe MyClass do\n    context 'something' do\n        it 'does something' do\n            instance = MyClass.new\n        end\n    end\nend\n</code></pre>\n\n<p>MyClass is a bit special, because in it's constructor a dependency from other of my classes is injected:</p>\n\n<pre><code>class MyClass\n     def initialize(dependency = MyDependency.new)\n         @dependency = dependency\n     end\nend\n</code></pre>\n\n<p>And to make it a bit more complicated, MyDependency belongs to a group of common classes, that inherits from a base class:</p>\n\n<pre><code>require 'my_base'\nclass MyDependency &lt; MyBase\nend\n</code></pre>\n\n<p>This code fails with the following exception:</p>\n\n<pre><code>Failure/Error: instance = MyClass.new\n NoMethodError:\n   undefined method `value' for nil:NilClass\n</code></pre>\n\n<p>My test is in the same folder than spec_helper.rb. This helper starts with:</p>\n\n<pre><code>ENV[\"RAILS_ENV\"] ||= 'test'\nrequire File.expand_path(\"../../config/environment\", __FILE__)\nrequire 'rspec/rails'\n</code></pre>\n\n<p>I don't understand what is the mechanism that allows RSpec to access the rails files, and also my services folder. It should consider, MyClass, MyBase and finally MyDependency.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "error-handling"], "answers": [{"tags": [], "owner": {"reputation": 141, "user_id": 4548795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afa26ce2d375977f03cc99282e94388e?s=128&d=identicon&r=PG", "display_name": "Eric Mulligan", "link": "https://stackoverflow.com/users/4548795/eric-mulligan"}, "is_accepted": true, "score": 1, "last_activity_date": 1424287495, "creation_date": 1424287495, "answer_id": 28592144, "question_id": 28591758, "link": "https://stackoverflow.com/questions/28591758/cannot-flash-errors-array/28592144#28592144", "title": "Cannot flash errors array", "body": "<p>Instead of:</p>\n\n<pre><code>redirect_to call_logs_path, flash: errors\n</code></pre>\n\n<p>do:</p>\n\n<pre><code>redirect_to call_logs_path, notice: errors.join(' ')\n</code></pre>\n\n<p>This way, it will return a string like the following:</p>\n\n<pre><code>'Please enter score range one. Please enter score range two. Please enter range between 1 and 100 for score one. Please enter range between 1 and 100 for score two.'\n</code></pre>\n\n<p>Check the RubyDocs documentation on the <a href=\"http://ruby-doc.org//core-2.2.0/Array.html#method-i-join\" rel=\"nofollow\"><code>join</code></a> method.</p>\n"}], "owner": {"reputation": 279, "user_id": 4279189, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/3Gy5u.jpg?s=128&g=1", "display_name": "Colton Seal", "link": "https://stackoverflow.com/users/4279189/colton-seal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 28592144, "answer_count": 1, "score": 0, "last_activity_date": 1424287495, "creation_date": 1424286126, "question_id": 28591758, "link": "https://stackoverflow.com/questions/28591758/cannot-flash-errors-array", "title": "Cannot flash errors array", "body": "<p>I am having trouble flashing my errors array.  Currently I am calling <code>notice: errors</code>, but that is returning an array that looks like this </p>\n\n<p>[\"Please enter score range one.\", \"Please enter score range two.\", \"Please enter range between 1 and 100 for score one.\", \"Please enter range between 1 and 100 for score two.\"]</p>\n\n<p>If I call <code>flash: errors</code> than I get this error </p>\n\n<p><code>undefined method 'keys' for #&lt;Array:0x0000010f196198&gt;</code></p>\n\n<p>What would be a better way of doing this?  My code is below</p>\n\n<pre><code>if beg_score.present? &amp;&amp; end_score.present? &amp;&amp; beg_score.to_i.between?(1, 100) &amp;&amp; end_score.to_i.between?(1, 100)\n  CallLogByScoreWorker.perform_async(beg_score, end_score, query)\n  redirect_to call_logs_path, notice: 'Calls were successfully made.'\nelse\n  errors = []\n  unless beg_score.present?\n    errors &lt;&lt; 'Please enter score range one.'\n  end\n  unless end_score.present?\n    errors &lt;&lt; 'Please enter score range two.'\n  end\n  unless beg_score.to_i.between?(1, 100)\n    errors &lt;&lt; 'Please enter range between 1 and 100 for score one.'\n  end\n  unless end_score.to_i.between?(1, 100)\n    errors &lt;&lt; 'Please enter range between 1 and 100 for score two.'\n  end\nredirect_to call_logs_path, flash: errors\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-s3", "acl", "aws-sdk"], "comments": [{"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1424301563, "post_id": 28591688, "comment_id": 45498302, "body": "What&#39;s the full error message?"}, {"owner": {"reputation": 223, "user_id": 3246122, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/CAEJF.jpg?s=128&g=1", "display_name": "bnzelener", "link": "https://stackoverflow.com/users/3246122/bnzelener"}, "reply_to_user": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1424306633, "post_id": 28591688, "comment_id": 45500030, "body": "Aws::S3::Errors::InvalidArgument is the bulk of the message.  The console just points towards my Model at the obj.put line.  Can post a screenshot if that would be helpful."}, {"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1424306694, "post_id": 28591688, "comment_id": 45500058, "body": "I was wondering if it was some hint about the error, such as the format of the argument or that not being allowed or such. No worries."}], "answers": [{"comments": [{"owner": {"reputation": 223, "user_id": 3246122, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/CAEJF.jpg?s=128&g=1", "display_name": "bnzelener", "link": "https://stackoverflow.com/users/3246122/bnzelener"}, "edited": false, "score": 1, "creation_date": 1425238669, "post_id": 28735909, "comment_id": 45870540, "body": "You rock - thanks!  I can&#39;t believe it was just a hyphen instead of an underscore.  I actually switched back to the old API because of this - but now I know how to upgrade.  Thanks!"}, {"owner": {"reputation": 3090, "user_id": 4454732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-8OrTJkCtkn4/AAAAAAAAAAI/AAAAAAAAA4s/7jp2lrThK2k/photo.jpg?sz=128", "display_name": "David Hempy", "link": "https://stackoverflow.com/users/4454732/david-hempy"}, "edited": false, "score": 0, "creation_date": 1440186914, "post_id": 28735909, "comment_id": 52185988, "body": "Ack!  Same here -- I had an underscore, too.  Double-checked the official docs three times without catching my error!"}, {"owner": {"reputation": 34900, "user_id": 493161, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ef45d137e9629d3fbe9c5f84997ac5ff?s=128&d=identicon&r=PG", "display_name": "jcomeau_ictx", "link": "https://stackoverflow.com/users/493161/jcomeau-ictx"}, "edited": false, "score": 0, "creation_date": 1480098346, "post_id": 28735909, "comment_id": 68841725, "body": "yep, the hyphen works, <i>thank you</i>. I&#39;m using Python/boto3 and had the same problem, now mostly solved. still problem with mime-type, but I&#39;ll figure it out."}, {"owner": {"reputation": 846, "user_id": 5805239, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/53b5c6384585bfc78c2b95b354d99a32?s=128&d=identicon&r=PG", "display_name": "Aakanksha", "link": "https://stackoverflow.com/users/5805239/aakanksha"}, "edited": false, "score": 0, "creation_date": 1511503810, "post_id": 28735909, "comment_id": 81888916, "body": "Why isn&#39;t this the accepted answer? Was stuck for hours until i stumbled across this answer."}], "tags": [], "owner": {"reputation": 268, "user_id": 2325069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b98217d9209061bdeb941f58e05404a?s=128&d=identicon&r=PG", "display_name": "kevinw", "link": "https://stackoverflow.com/users/2325069/kevinw"}, "is_accepted": false, "score": 21, "last_activity_date": 1424932292, "creation_date": 1424932292, "answer_id": 28735909, "question_id": 28591688, "link": "https://stackoverflow.com/questions/28591688/uploading-a-file-to-aws-s3-with-acl-set-to-public-read/28735909#28735909", "title": "Uploading a file to AWS S3 with ACL set to public_read", "body": "<p>This code works for me:</p>\n\n<pre><code>photo_obj = bucket.object object_name\nphoto_obj.upload_file path, {acl: 'public-read'}\n</code></pre>\n\n<p>so you need to use the string 'public-read' for the acl.  I found this by seeing an example in object.rb</p>\n"}], "owner": {"reputation": 223, "user_id": 3246122, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/CAEJF.jpg?s=128&g=1", "display_name": "bnzelener", "link": "https://stackoverflow.com/users/3246122/bnzelener"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4138, "favorite_count": 2, "answer_count": 1, "score": 12, "last_activity_date": 1424932292, "creation_date": 1424285881, "question_id": 28591688, "link": "https://stackoverflow.com/questions/28591688/uploading-a-file-to-aws-s3-with-acl-set-to-public-read", "title": "Uploading a file to AWS S3 with ACL set to public_read", "body": "<p>In my Rails app I save customer RMA shipping labels to an S3 bucket on creation.  I just updated to V2 of the aws-sdk gem, and now my code for setting the ACL doesn't work.</p>\n\n<p>Code that worked in V1.X:</p>\n\n<pre><code>  # Saves label to S3 bucket\n  s3 = AWS::S3.new\n  obj = s3.buckets[ENV['S3_BUCKET_NAME']].objects[\"#{shippinglabel_filename}\"]\n  obj.write(open(label.label('pdf').postage_label.label_pdf_url, 'rb'), :acl =&gt; :public_read)\n</code></pre>\n\n<p><code>.write</code> seems to have been deprecated, so I'm using <code>.put</code> now.  Everything is working, except when I try to set the ACL.</p>\n\n<p>New code for V2.0:</p>\n\n<pre><code>  # Saves label to S3 bucket\n  s3 = Aws::S3::Resource.new\n  obj = s3.bucket(ENV['S3_BUCKET_NAME']).object(\"#{shippinglabel_filename}\")\n  obj.put(Base64.decode64(label_base64), { :acl =&gt; :public_read })\n</code></pre>\n\n<p>I get an <code>Aws::S3::Errors::InvalidArgument</code> error, pointed at the ACL.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "nested-attributes"], "answers": [{"comments": [{"owner": {"reputation": 2287, "user_id": 2767026, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/100002642234495/picture?type=large", "display_name": "William Weckl", "link": "https://stackoverflow.com/users/2767026/william-weckl"}, "edited": false, "score": 0, "creation_date": 1424286771, "post_id": 28591872, "comment_id": 45490330, "body": "Don&#180;t know if I was clear enought, I need to replace all my old <code>days</code> to the <code>days</code> from nested attributes."}], "tags": [], "owner": {"reputation": 141, "user_id": 4548795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afa26ce2d375977f03cc99282e94388e?s=128&d=identicon&r=PG", "display_name": "Eric Mulligan", "link": "https://stackoverflow.com/users/4548795/eric-mulligan"}, "is_accepted": false, "score": 0, "last_activity_date": 1424286553, "creation_date": 1424286553, "answer_id": 28591872, "question_id": 28591636, "link": "https://stackoverflow.com/questions/28591636/rails-4-has-many-nested-attributes-to-replace-all/28591872#28591872", "title": "Rails 4 has_many nested_attributes to replace all", "body": "<p>Add a <code>reject_if</code> option like the following:</p>\n\n<pre><code>accepts_nested_attributes_for :days, reject_if: :all_blank\n</code></pre>\n\n<p>This should prevent the behaviour you described.</p>\n"}, {"tags": [], "owner": {"reputation": 1767, "user_id": 193444, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b3bc9db0cca9166bd17b19fea10fa0f5?s=128&d=identicon&r=PG", "display_name": "robertokl", "link": "https://stackoverflow.com/users/193444/robertokl"}, "is_accepted": false, "score": 1, "last_activity_date": 1434501650, "creation_date": 1434501650, "answer_id": 30880525, "question_id": 28591636, "link": "https://stackoverflow.com/questions/28591636/rails-4-has-many-nested-attributes-to-replace-all/30880525#30880525", "title": "Rails 4 has_many nested_attributes to replace all", "body": "<p>This is the best I could get:</p>\n\n<pre><code>def days_attributes=(*attrs)\n  self.days = []\n  super(*attrs)\nend\n</code></pre>\n\n<p>Hopefully is not too late.</p>\n"}], "owner": {"reputation": 2287, "user_id": 2767026, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/100002642234495/picture?type=large", "display_name": "William Weckl", "link": "https://stackoverflow.com/users/2767026/william-weckl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 598, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1434501650, "creation_date": 1424285723, "last_edit_date": 1424287465, "question_id": 28591636, "link": "https://stackoverflow.com/questions/28591636/rails-4-has-many-nested-attributes-to-replace-all", "title": "Rails 4 has_many nested_attributes to replace all", "body": "<p>I want to use nested_attributes to replace all my old associated objects by the new ones. How is the best way to do that?</p>\n\n<p>If I use the code below, every time I update my main object with nested_attributes, new objects associated are created.</p>\n\n<pre><code>accepts_nested_attributes_for :days\n</code></pre>\n\n<p><strong>Edit</strong></p>\n\n<p>I\u00b4ve got it with the <code>before_validation</code> callback below:</p>\n\n<pre><code>def replace_days\n  db_days = days.where('id IS NOT NULL')\n\n  all_days = days\n  all_days -= db_days\n\n  self.days = all_days\nend\n</code></pre>\n\n<p>The problem with that is my unique validation on the child model. Rails is going to the database to validate uniqueness. Since my replacement is not on database at the validation moment, got validation error. Don\u00b4t know how to bypass this and if this is the best way to do that. I hope that rails have some native function or parameter that helps me to do exactly what I want.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4.2", "collection-select"], "answers": [{"tags": [], "owner": {"reputation": 906, "user_id": 2901457, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/nxFaL.jpg?s=128&g=1", "display_name": "s_dolan", "link": "https://stackoverflow.com/users/2901457/s-dolan"}, "is_accepted": true, "score": 1, "last_activity_date": 1425051565, "creation_date": 1425051565, "answer_id": 28768810, "question_id": 28591484, "link": "https://stackoverflow.com/questions/28591484/rails-4-2-how-to-build-a-has-many-through-association-with-collection-select/28768810#28768810", "title": "Rails 4.2 - how to build a has_many, through: association with collection_select", "body": "<p>For anyone who is interested, I've got the form working. This may not be the ideal way to create multiple records at one time, but it's working for me right now.</p>\n\n<p>First, I took out the weird <code>accessories</code> definition in the <code>Users</code> controller. Since I was going to be directly creating, updating, and destroying a user's accessories, the join model deserved its own controller:</p>\n\n\n\n<pre><code>class UserAccessoriesController &lt; ApplicationController\n  def index\n    @user = User.friendly.find( params[:id] )\n    @user_accessories = @user.user_accessories\n  end\n\n  def create\n    @user = User.friendly.find( params[:id] )\n\n    create_params[:accessory].each do |accessory|\n      @user_accessory = UserAccessory.new( user: @user, accessory_id: accessory )\n\n      @user_accessory.save\n    end\n\n    redirect_to user_accessories_path( @user )\n  end\n\n  def destroy\n    @user_accessory = UserAccessory.friendly.find( params[:id] )\n\n    @user_accessory.destroy\n  end\n\n  private\n    def create_params\n      params.require( :user_accessory ).permit(\n        :id,\n        accessory: []\n      )\n    end\nend\n</code></pre>\n\n<p>I only have one view for <code>UserAccessories</code>, the index. This page lists all of a user's accessories, and if the displayed user is the same as the logged in user, the following form is displayed:</p>\n\n\n\n<pre><code>  &lt;%= form_for @user_accessories.new(), { method: :post } do |f| %&gt;\n    &lt;div class=\"form-group\"&gt;\n      &lt;%= f.collection_select(\n                               :accessory,\n                               # Get only accessories not on the user's account\n                               Accessory.where.not( id: @user.accessories ),\n                               :id,\n                               :name,\n                               {\n                                 include_hidden: false\n                               },\n                               {\n                                 multiple:    true,\n                                 class:       'form-control',\n                                 placeholder: 'Select Equipment to Add'\n                               }\n                             ) %&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"form-group\"&gt;\n      &lt;%= f.submit \"Update Equipment\" %&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<p>This allows the user to select multiple accessories (using select2), then on submit creates the association one by one in the controller.</p>\n\n<p>If anyone has a better method for the <em>creation</em> of the user accessories (i.e. not looping through my params and creating that many times), then please leave a comment!</p>\n"}], "owner": {"reputation": 906, "user_id": 2901457, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/nxFaL.jpg?s=128&g=1", "display_name": "s_dolan", "link": "https://stackoverflow.com/users/2901457/s-dolan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1118, "favorite_count": 0, "accepted_answer_id": 28768810, "answer_count": 1, "score": 0, "last_activity_date": 1425051565, "creation_date": 1424285268, "last_edit_date": 1424329943, "question_id": 28591484, "link": "https://stackoverflow.com/questions/28591484/rails-4-2-how-to-build-a-has-many-through-association-with-collection-select", "title": "Rails 4.2 - how to build a has_many, through: association with collection_select", "body": "<p>I'm currently using Rails 4.2 with these models:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class User &lt; ActiveRecord::Base\n  has_many :user_accessories, dependent: :destroy\n  accepts_nested_attributes_for :user_accessories,\n    reject_if: :all_blank,\n    allow_destroy: true\n  has_many :accessories, through: :user_accessories\nend\n\nclass UserAccessory &lt; ActiveRecord::Base\n  belongs_to :user,      required: true\n  belongs_to :accessory, required: true\nend\n\nclass Accessory &lt; ActiveRecord::Base\n  has_many :user_accessories, dependent: :destroy\n  has_many :users, through: :user_accessories\nend\n</code></pre>\n\n<p>This is a simple many-to-many relationship, where a user can \"own\" many accessories, and an accessory can be \"owned\" by many users.</p>\n\n<p>I've set up my routes in the following way:\n</p>\n\n<pre><code>resources :users, only: [ :index, :show, :edit, :update, :accessories ] do\n  member do\n    get 'accessories'\n  end\nend\n</code></pre>\n\n<p>This way, a user can go to their \"accessories\" path (<code>/users/1/accessories</code>) to see a list of their accessories, as well as to add new accessory associations to their account.</p>\n\n<p>Here's the view that renders for the accessories path:\n</p>\n\n<pre><code>&lt;table&gt;\n  &lt;thead&gt;\n    &lt;tr&gt;\n      &lt;th&gt;Name&lt;/th&gt;\n    &lt;/tr&gt;\n  &lt;/thead&gt;\n  &lt;tbody&gt;\n    &lt;%= render @accessories %&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n\n&lt;%= form_for( @user ) do |f| %&gt;\n  &lt;%= f.collection_select( \n    :accessory_ids, \n    Accessory.all, \n    :id, \n    :name, { include_hidden: false }, { multiple: true } ) \n  %&gt;\n\n  &lt;%= f.button \"Add Equipment\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>This just renders a table of current accessories, and then builds a collection_select box where you can choose multiple accessories to add. I've simplified this by removing Bootstrap styling.</p>\n\n<p>Finally, here are the relevant controller actions:\n</p>\n\n<pre><code>def update\n  @user = User.find( params[:id] )\n  if( @user.update_attributes( update_params ) )\n    redirect_to @user\n  else\n    render 'edit'\n  end\nend\n\ndef accessories \n  @user = User.find( params[:id] ) \n  @accessories = @user.accessories \nend \n\nprivate \n  def update_params \n    params.require( :user ).permit( \n      :first_name, \n      :last_name, \n      :region_id, \n      :country, \n      :profile_image, \n      :remove_profile_image, \n      accessory_ids: [:id], \n    )\n  end\n</code></pre>\n\n<p><strong>Now the Problems:</strong></p>\n\n<ol>\n<li><p>Submitting the form when I already have a value manually entered in the database actually just deletes <em>all</em> currently stored values and does not add any new ones:\n</p>\n\n<pre><code>Started PATCH \"/users/nuggles\" for 127.0.0.1 at 2015-02-18 13:31:50 -0500\n\nProcessing by UsersController#update as HTML\n\nParameters: {\n  \"utf8\"=&gt;\"\u2713\",\u00b7\u00b7\u00b7\u00b7\n  \"authenticity_token\"=&gt;\"my_token\",\u00b7\n  \"user\"=&gt;{\n    \"accessory_ids\"=&gt;[\"5\"]\n  },\u00b7 \n  \"button\"=&gt;\"\",\u00b7\n  \"id\"=&gt;\"nuggles\"\n} \n\nUser Load (40.0ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1  ORDER BY \"users\".\"id\" ASC LIMIT 1  [[\"id\", 4]] \n\nUser Load (36.4ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"slug\" = $1  ORDER BY \"users\".\"id\" ASC LIMIT 1  [[\"slug\", \"nuggles\"]]\u00b7\n\n(33.5ms)  BEGIN\n\nAccessory Load (34.1ms)  SELECT \"accessories\".* FROM \"accessories\" INNER JOIN \"user_accessories\" ON \"accessories\".\"id\" = \"user_accessories\".\"accessory_id\" WHERE \"user_accessories\".\"user_id\" = $1  [[\"user_id\", 4]]\n\n**SQL (34.1ms)  DELETE FROM \"user_accessories\" WHERE \"user_accessories\".\"user_id\" = $1 AND \"user_accessories\".\"accessory_id\" IN (1, 2, 3)  [[\"user_id\", 4]]**\n\nUser Exists (37.7ms)  SELECT  1 AS one FROM \"users\" WHERE (LOWER(\"users\".\"username\") = LOWER('Nuggles') AND \"users\".\"id\" != 4) LIMIT 1\n\n(34.2ms)  COMMIT\n\nRedirected to http://localhost:3000/users/nuggles\nCompleted 302 Found in 304ms (ActiveRecord: 250.0ms)\n</code></pre></li>\n<li><p>When submitting the form with nothing selected, I get the following error:\n</p>\n\n<pre><code>param is missing or the value is empty: user\n\nprivate\n  def update_params\n    params.require( :user ).permit(\n      :first_name,\n      :last_name,\n      :region_id,\n</code></pre></li>\n</ol>\n"}, {"tags": ["ruby", "metaprogramming"], "comments": [{"owner": {"reputation": 2859, "user_id": 3945932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1794745acd9e572c24558b78b48d597?s=128&d=identicon&r=PG", "display_name": "ptd", "link": "https://stackoverflow.com/users/3945932/ptd"}, "edited": false, "score": 0, "creation_date": 1424285367, "post_id": 28591480, "comment_id": 45489422, "body": "I don&#39;t understand your question. Are you asking how to verify that ruby works? If you are calling <code>important_method!</code> it will get called."}, {"owner": {"reputation": 1402, "user_id": 275249, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f4a6789a3cfae583e20b747df4dfe519?s=128&d=identicon&r=PG&f=1", "display_name": "n_x_l", "link": "https://stackoverflow.com/users/275249/n-x-l"}, "reply_to_user": {"reputation": 2859, "user_id": 3945932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1794745acd9e572c24558b78b48d597?s=128&d=identicon&r=PG", "display_name": "ptd", "link": "https://stackoverflow.com/users/3945932/ptd"}, "edited": false, "score": 0, "creation_date": 1424285536, "post_id": 28591480, "comment_id": 45489523, "body": "Ah right! I want to do it statically, so looping over all descendants of a particular class and see if their methods are calling <code>important_method!</code>."}, {"owner": {"reputation": 1402, "user_id": 275249, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f4a6789a3cfae583e20b747df4dfe519?s=128&d=identicon&r=PG&f=1", "display_name": "n_x_l", "link": "https://stackoverflow.com/users/275249/n-x-l"}, "reply_to_user": {"reputation": 2859, "user_id": 3945932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1794745acd9e572c24558b78b48d597?s=128&d=identicon&r=PG", "display_name": "ptd", "link": "https://stackoverflow.com/users/3945932/ptd"}, "edited": false, "score": 0, "creation_date": 1424285724, "post_id": 28591480, "comment_id": 45489649, "body": "For my particular use case its not feasible to simply call them because the methods do more than simply call <code>important_method!</code>. Plus these classes are added all the time, so I wanted to automated the check."}], "answers": [{"comments": [{"owner": {"reputation": 1402, "user_id": 275249, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f4a6789a3cfae583e20b747df4dfe519?s=128&d=identicon&r=PG&f=1", "display_name": "n_x_l", "link": "https://stackoverflow.com/users/275249/n-x-l"}, "edited": false, "score": 0, "creation_date": 1424346134, "post_id": 28592956, "comment_id": 45515363, "body": "This is very good. Here is a follow up question: What would you do if the methods a,b,c raise exceptions that you are not interested in at the time you are checking for <code>important_method</code>? Imagine I want to this at program start, so whatever the programmer put in methods a,b, and c should not matter to my checker script, so ideally i want to ignore all exceptions. I understand this might be tricky though."}, {"owner": {"reputation": 1402, "user_id": 275249, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f4a6789a3cfae583e20b747df4dfe519?s=128&d=identicon&r=PG&f=1", "display_name": "n_x_l", "link": "https://stackoverflow.com/users/275249/n-x-l"}, "edited": false, "score": 0, "creation_date": 1424348577, "post_id": 28592956, "comment_id": 45516780, "body": "What I did now, since I am not interested in any exceptions, is to simply rescue from StandardError, but it&#39;s tricky because unless a call to <code>important_method!</code> is at the top of the method, I could rescue from the exception and never make it to that check."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 1402, "user_id": 275249, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f4a6789a3cfae583e20b747df4dfe519?s=128&d=identicon&r=PG&f=1", "display_name": "n_x_l", "link": "https://stackoverflow.com/users/275249/n-x-l"}, "edited": false, "score": 0, "creation_date": 1424409793, "post_id": 28592956, "comment_id": 45546258, "body": "My apologies for the late reply. You must first fix the code that raises the exceptions. If you catch an exception and continue, you obviously may miss calls to <code>imporant_method</code> that would have been made had the exception not been raised."}, {"owner": {"reputation": 1402, "user_id": 275249, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f4a6789a3cfae583e20b747df4dfe519?s=128&d=identicon&r=PG&f=1", "display_name": "n_x_l", "link": "https://stackoverflow.com/users/275249/n-x-l"}, "edited": false, "score": 0, "creation_date": 1424424685, "post_id": 28592956, "comment_id": 45552128, "body": "Yep, in this case I will have to move to a more static solution that does not require me to run the code, otherwise I write a lot of code simply to ensure that there are no exceptions. Your answers however given my initial requirements are spot on. :)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 1402, "user_id": 275249, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f4a6789a3cfae583e20b747df4dfe519?s=128&d=identicon&r=PG&f=1", "display_name": "n_x_l", "link": "https://stackoverflow.com/users/275249/n-x-l"}, "edited": false, "score": 0, "creation_date": 1424426270, "post_id": 28592956, "comment_id": 45552998, "body": "One simple thing you might consider is writing a bit of code to look through the source listing, searching for calls to the given method. Often that would be indeterminent, of course, but if a method had no calls to the given method under any circumstances, you could rule it out. Alas, I don&#39;t know enough about your problem to know if that would have any merit."}, {"owner": {"reputation": 1402, "user_id": 275249, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f4a6789a3cfae583e20b747df4dfe519?s=128&d=identicon&r=PG&f=1", "display_name": "n_x_l", "link": "https://stackoverflow.com/users/275249/n-x-l"}, "edited": false, "score": 0, "creation_date": 1424430943, "post_id": 28592956, "comment_id": 45555751, "body": "I think it does yes. I know exactly which classes <i>should</i> have all public methods calling <code>important_method!</code>, and I know where they will be (say in folder A), so my plan now is to read folder A files, parse the ruby code in there, and ensure public methods are calling <code>important_method!</code>. The issue now is whether I should simply get the sexp and find def calls or what?"}, {"owner": {"reputation": 342, "user_id": 2074840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11346f6761befbc4857bca7eb1eb85a1?s=128&d=identicon&r=PG", "display_name": "michal.samluk", "link": "https://stackoverflow.com/users/2074840/michal-samluk"}, "edited": false, "score": 0, "creation_date": 1424445889, "post_id": 28592956, "comment_id": 45564814, "body": "I you would like to analyse this statically you probably can use SexpProcessor or something.  <a href=\"https://github.com/seattlerb/ruby_parser\" rel=\"nofollow noreferrer\">github.com/seattlerb/ruby_parser</a> <a href=\"https://github.com/seattlerb/sexp_processor\" rel=\"nofollow noreferrer\">github.com/seattlerb/sexp_processor</a>  I can try to do something. I was playing lately with those tools."}, {"owner": {"reputation": 342, "user_id": 2074840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11346f6761befbc4857bca7eb1eb85a1?s=128&d=identicon&r=PG", "display_name": "michal.samluk", "link": "https://stackoverflow.com/users/2074840/michal-samluk"}, "edited": false, "score": 0, "creation_date": 1424446237, "post_id": 28592956, "comment_id": 45565044, "body": "I&#39;ve created once this <a href=\"https://gist.github.com/michal-samluk/8e17f0f820c459f4426d\" rel=\"nofollow noreferrer\">gist.github.com/michal-samluk/8e17f0f820c459f4426d</a> If you run it against your code it will visualise you the sexp tree. You can easilly see there that you have methods. You should have no trouble in creating a similar code that ensures the method call is within other method. This is static solution."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 342, "user_id": 2074840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11346f6761befbc4857bca7eb1eb85a1?s=128&d=identicon&r=PG", "display_name": "michal.samluk", "link": "https://stackoverflow.com/users/2074840/michal-samluk"}, "edited": false, "score": 0, "creation_date": 1424449212, "post_id": 28592956, "comment_id": 45566982, "body": "@michal.samluk, that&#39;s interesting. I&#39;d think the OP would find that useful. After posting my last comment it occurred to me that I was probably suggesting the reinvention of the wheel."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 2, "last_activity_date": 1424331995, "last_edit_date": 1424331995, "creation_date": 1424290200, "answer_id": 28592956, "question_id": 28591480, "link": "https://stackoverflow.com/questions/28591480/ruby-capture-method-calls-sent-from-method-body/28592956#28592956", "title": "Ruby - Capture method calls sent from method body", "body": "<p>My answer was initially to use <code>TracePoint</code>, but then I read how @user2074840 used <code>alias</code>, which got me thinking of using <code>alias</code> in conjunctions with <code>caller</code>, which leads to a very direct solution. I present that below as <code>#2 Use Caller</code>.</p>\n\n<p><strong>#1 Use TracePoint</strong></p>\n\n<p>In Ruby 2.0+ you can use <a href=\"http://ruby-doc.org/core-2.0.0/TracePoint.html\" rel=\"nofollow\">TracePoint</a> to obtain the information you need. (In earlier versions, you may be able to use <a href=\"http://ruby-doc.org/core-2.1.1/Kernel.html#method-i-set_trace_func\" rel=\"nofollow\">Kernel#set_trace_point</a>.)</p>\n\n<p>To see how this works, let's lay down some sample code:</p>\n\n<pre><code>def a\n  puts \"a\"\n  c\n  important\nend\n\ndef b\n  puts \"b\"\n  important\nend\n\ndef c\n  puts \"c\"\nend\n\ndef important\n  puts \"important\"\nend\n</code></pre>\n\n<p>We now set up for the trace, specifying the two events of interest, <code>:call</code> and <code>:return</code>, and the information we want to save, the event (<code>:call</code> or <code>:return</code>) and the method (<code>:a</code>, <code>:b</code> or <code>:c</code>):</p>\n\n<pre><code>events = []\ntrace = TracePoint.trace(:call, :return) { |tp|\n  events &lt;&lt;  { event: tp.event, method: tp.method_id } }\n</code></pre>\n\n<p>Then execute the code:</p>\n\n<pre><code>4.times { send([:a, :b, :c][rand(0..2)]) }\n  # b\n  # important\n  # b\n  # important\n  # a\n  # c\n  # important\n  # c\n</code></pre>\n\n<p>disable trace:</p>\n\n<pre><code>trace.disable\n</code></pre>\n\n<p>and examine the information collected:</p>\n\n<pre><code>p events\n  # [{:event=&gt;:call,   :method=&gt;:b},\n  #  {:event=&gt;:call,   :method=&gt;:important},\n  #  {:event=&gt;:return, :method=&gt;:important},\n  #  {:event=&gt;:return, :method=&gt;:b},\n  #  {:event=&gt;:call,   :method=&gt;:b},\n  #  {:event=&gt;:call,   :method=&gt;:important},\n  #  {:event=&gt;:return, :method=&gt;:important},\n  #  {:event=&gt;:return, :method=&gt;:b},\n  #  {:event=&gt;:call,   :method=&gt;:a},\n  #  {:event=&gt;:call,   :method=&gt;:c},\n  #  {:event=&gt;:return, :method=&gt;:c},\n  #  {:event=&gt;:call,   :method=&gt;:important},\n  #  {:event=&gt;:return, :method=&gt;:important},\n  #  {:event=&gt;:return, :method=&gt;:a},\n  #  {:event=&gt;:call,   :method=&gt;:c},\n  #  {:event=&gt;:return, :method=&gt;:c}]\n</code></pre>\n\n<p>Note that this cannot be run in <code>IRB</code> or <code>PRY</code>.</p>\n\n<p>We can now extract the calls to <code>:important</code> as follows:</p>\n\n<pre><code>def calls_to_method(events, method) \n  stack = []\n  events.each_with_object([]) do |h, calling_methods|\n    stack &lt;&lt; h\n    while stack.size &gt; 1 &amp;&amp;\n          stack[-1][:event] == :return &amp;&amp;\n          stack[-2][:event] == :call &amp;&amp;\n          stack[-1][:method] == stack[-2][:method] do\n      if (stack.size &gt; 2 &amp;&amp; (stack[-1][:method] == method))\n        calling_methods &lt;&lt; stack[-3][:method]\n      end\n      stack.pop\n      stack.pop\n    end  \n  end\nend\n\ncalls = calls_to_method(events, :important)\n  #=&gt; [:b, :b, :a]\n\ncalls.uniq\n  #=&gt; [:b, :a]\n</code></pre>\n\n<p><strong>#2 Use Caller</strong></p>\n\n<p>This approach uses <code>alias</code> and <a href=\"http://ruby-doc.org//core-2.2.0/Kernel.html#method-i-caller\" rel=\"nofollow\">Kernel#caller</a>:</p>\n\n<pre><code>@calling_methods = []\nalias :old_important :important\n\ndef important\n  @calling_methods &lt;&lt; caller.first[/`(.*)'/,1]\n  old_important\nend\n\n4.times { send([:a, :b, :c][rand(0..2)]) }\n  # b\n  # important\n  # c\n  # a\n  # c\n  # important\n  # a\n  # c\n  # important\n  # b\n  # a\n  # a\n\np @calling_methods\n  #=&gt; [\"b\", \"a\", \"a\"]\n</code></pre>\n\n<p>Here's an example of an array returned by <code>caller</code>:</p>\n\n<pre><code>caller\n  #=&gt; [\"abc.rb:9:in `b'\",\n  #    \"abc.rb:32:in `block in &lt;main&gt;'\",\n  #    \"abc.rb:32:in `times'\",\n  #    \"abc.rb:32:in `&lt;main&gt;'\"]\n</code></pre>\n\n<p>It is only the first element that we use:</p>\n\n<pre><code>caller.first\n  #=&gt; \"abc.rb:9:in `b'\",\n</code></pre>\n\n<p>and we apply the regex to extract the method name, which is preceded by <code>'</code>'` (Ascii 96) and followed by a single quote.</p>\n"}, {"tags": [], "owner": {"reputation": 342, "user_id": 2074840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11346f6761befbc4857bca7eb1eb85a1?s=128&d=identicon&r=PG", "display_name": "michal.samluk", "link": "https://stackoverflow.com/users/2074840/michal-samluk"}, "is_accepted": false, "score": 1, "last_activity_date": 1424306535, "creation_date": 1424306535, "answer_id": 28596778, "question_id": 28591480, "link": "https://stackoverflow.com/questions/28591480/ruby-capture-method-calls-sent-from-method-body/28596778#28596778", "title": "Ruby - Capture method calls sent from method body", "body": "<p>I've played a little with this. What do you think about such solution? </p>\n\n<pre><code>module CallImportantMethod\n\n  def important_method!\n    puts 'Important Method called!'\n  end \n\n  def self.included(base)\n\n\n    base.instance_methods(false).each do |method_name|\n\n      base.class_eval do\n        alias_method :\"old_#{method_name}\", method_name \n      end\n\n      base.class_eval &lt;&lt;-eoruby\n        def #{method_name}(*args, &amp;block)\n          important_method!\n          old_#{method_name}(*args, &amp;block)\n        end\n      eoruby\n\n    end \n  end\n\nend \n\nclass SomeClass\n\n  def testing \n    puts 'My Method was called'\n  end \n\n  def testing_with_args(a,b)\n    puts a + b\n  end \n\n  def testing_with_block\n    yield\n  end \n\n  include CallImportantMethod\n\nend \n\ni = SomeClass.new \ni.testing \n# =&gt; Important Method called!\n# =&gt; My Method was called\ni.testing_with_args(5,8)\n# =&gt; Important Method called!\n# =&gt; 13\ni.testing_with_block { puts 'passing block...' } \n# =&gt; Important Method called!\n# =&gt; passing block...\n</code></pre>\n"}], "owner": {"reputation": 1402, "user_id": 275249, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f4a6789a3cfae583e20b747df4dfe519?s=128&d=identicon&r=PG&f=1", "display_name": "n_x_l", "link": "https://stackoverflow.com/users/275249/n-x-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "accepted_answer_id": 28592956, "answer_count": 2, "score": 2, "last_activity_date": 1424331995, "creation_date": 1424285248, "question_id": 28591480, "link": "https://stackoverflow.com/questions/28591480/ruby-capture-method-calls-sent-from-method-body", "title": "Ruby - Capture method calls sent from method body", "body": "<p>I am looking for ways to ensure that a set of methods defined in my objects are all calling a particular method. To illustrate, say I have objects A and B, both have methods like so: </p>\n\n<pre><code>class A\n  def method_a\n     important_method!\n  end\nend\n\nclass B\n  def method_b\n     important_method!\n  end\nend\n</code></pre>\n\n<p>How can I easily ensure that both <code>method_a</code> from A and <code>method_b</code> are calling <code>important_method!</code>? </p>\n\n<p>In this case <code>important_method</code> will come from a module that will be included in both A and B (Actually in their common superclass). </p>\n\n<p>So far what I tried is to wrap both objects in a proxy that defines <code>method_missing</code> and collect methods calls, but this only tells me that <code>method_a</code> and <code>method_b</code> are called. Any ideas? </p>\n"}, {"tags": ["ruby", "arrays", "indexing"], "comments": [{"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 1, "creation_date": 1424287354, "post_id": 28590902, "comment_id": 45490669, "body": "<code>&quot;#{month}&quot;</code> is overly complicated. Just <code>month</code> is enough."}, {"owner": {"reputation": 25, "user_id": 4580738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77fbc84742084a0a810c656754b886ba?s=128&d=identicon&r=PG&f=1", "display_name": "Marisa", "link": "https://stackoverflow.com/users/4580738/marisa"}, "reply_to_user": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1424336043, "post_id": 28590902, "comment_id": 45509403, "body": "Thanks for that clarification"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 4580738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77fbc84742084a0a810c656754b886ba?s=128&d=identicon&r=PG&f=1", "display_name": "Marisa", "link": "https://stackoverflow.com/users/4580738/marisa"}, "edited": false, "score": 0, "creation_date": 1424295565, "post_id": 28590993, "comment_id": 45495482, "body": "Thanks, all of your examples were very helpful!"}], "tags": [], "owner": {"reputation": 32543, "user_id": 528726, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6307569a99dd77fff0463032051d7e39?s=128&d=identicon&r=PG", "display_name": "joelparkerhenderson", "link": "https://stackoverflow.com/users/528726/joelparkerhenderson"}, "is_accepted": true, "score": 2, "last_activity_date": 1424448107, "last_edit_date": 1424448107, "creation_date": 1424283654, "answer_id": 28590993, "question_id": 28590902, "link": "https://stackoverflow.com/questions/28590902/how-to-access-index-value-of-array-in-conditional-test-using-ruby/28590993#28590993", "title": "How to access index value of array in conditional test using Ruby", "body": "<p>To get the index of an array item, use the <code>index</code> method:</p>\n\n<pre><code>monthsOfYear = [ \"January\", \"February\", \"March\", ... ]\nmonthsOfYear.index(\"February\") #=&gt; 1\n</code></pre>\n\n<p>If you're looking for date calculations specifically,\nRuby has a built-in way:</p>\n\n<pre><code>Date.new(date.year, date.month, -1).mday #=&gt; the number of days in the month\n</code></pre>\n\n<p>If you're looking to iterate with the month and index, Anthony's answer is correct.</p>\n\n<pre><code>monthsOfYear.each_with_index do |month, index| {\n  ...\n  # The first loop: month = \"January\", index = 0\n  ...\n}\n</code></pre>\n\n<p>If you're looking for a way to improve your code, use a <code>case</code> statement:</p>\n\n<pre><code>case month\nwhen \"April\", \"June\", \"September\", \"November\" \n  daysInMonth = 30\nwhen \"February\"\n  if isLeapYear\n    daysInMonth = 29\n  else\n    daysInMonth = 28\n  end\nelse\n  daysInMonth = 31\nend\n</code></pre>\n\n<p>In Ruby, you can set anything equal to the result of a <code>case</code> statement, and also a case statement can match numbers, so it's possible to write:</p>\n\n<pre><code>daysInMonth = case monthsOfYear.index(currentMonthName) \nwhen 3, 5, 8, 10 \n  30\nwhen 1\n  isLeapYear ? 29 : 28\nelse\n  31\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 4580738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77fbc84742084a0a810c656754b886ba?s=128&d=identicon&r=PG&f=1", "display_name": "Marisa", "link": "https://stackoverflow.com/users/4580738/marisa"}, "edited": false, "score": 1, "creation_date": 1424295495, "post_id": 28591069, "comment_id": 45495447, "body": "Thanks, this was exactly the type of information I was having trouble locating, although I&#39;ll take your advice and try to implement it differently."}], "tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": false, "score": 5, "last_activity_date": 1424283886, "creation_date": 1424283886, "answer_id": 28591069, "question_id": 28590902, "link": "https://stackoverflow.com/questions/28590902/how-to-access-index-value-of-array-in-conditional-test-using-ruby/28591069#28591069", "title": "How to access index value of array in conditional test using Ruby", "body": "<p>Joel's answer is a better implementation but to keep with your code and to answer your question, Enumerable has an an each_with_index method (<a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-each_with_index\">Enumberable#each_with_index</a>):</p>\n\n<pre><code>monthsOfYear.each_with_index do |month, index|\n</code></pre>\n\n<p>then you can use index in your if/else conditionals.  Note that arrays are zero based so January is actually going to be <code>0</code>.</p>\n"}], "owner": {"reputation": 25, "user_id": 4580738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77fbc84742084a0a810c656754b886ba?s=128&d=identicon&r=PG&f=1", "display_name": "Marisa", "link": "https://stackoverflow.com/users/4580738/marisa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 887, "favorite_count": 0, "accepted_answer_id": 28590993, "answer_count": 2, "score": 2, "last_activity_date": 1424448107, "creation_date": 1424283350, "question_id": 28590902, "link": "https://stackoverflow.com/questions/28590902/how-to-access-index-value-of-array-in-conditional-test-using-ruby", "title": "How to access index value of array in conditional test using Ruby", "body": "<p>Background: I am trying to write a simple function that generates a list of calendar days, which I have mostly working except for one if/else loop.</p>\n\n<p>The relevant variables and their initial declaration values:</p>\n\n<pre><code>monthsOfYear = %w[January February March April May June July August September October November December]\ncurrentMonthName = \"\" # empty string\ndaysInMonth = 0 # integer\n</code></pre>\n\n<p>The relevant loop:</p>\n\n<pre><code>monthsOfYear.each do |month| #loop through each month\n    # first get the current month name\n    currentMonthName = \"#{month}\" # reads month name from monthsOfYear array\n    if ??month == 3 || 5 || 8 || 10 ?? # April, June, September, November \n        daysInMonth = 30\n    elsif ??month == 1?? # February\n        if isLeapYear\n            daysInMonth = 29\n        else\n            daysInMonth = 28\n        end\n    else # All the rest\n        daysInMonth = 31\n    end\n</code></pre>\n\n<p>I've marked the part that I'm having trouble with between ?? ??\nBasically, I am trying to figure out how to access the numerical value of the index as it loops and test whether that index number matches the few specific cases. I have searched the documentation extensively trying to find a method that returns the index number value (NOT the value stored at x index), in other words I want to be able to read x in Array[x], not what's stored at Array[x]</p>\n\n<p>Perhaps in this specific case it would be better to test whether month == \"April\" || \"June\" || \"September\" || \"November\" rather than trying to build the case from parsing the array index number?</p>\n\n<p>But in general, what method can be called to find out the index number value? Or is that even possible?</p>\n"}, {"tags": ["mysql", "ruby", "regex"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1424284067, "post_id": 28590556, "comment_id": 45488680, "body": "Are you saying that you have a Ruby <code>Regexp</code> object that you need to programatically rewrite to a MySQL-compatible form?"}, {"owner": {"reputation": 1460, "user_id": 40444, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Yjucl.jpg?s=128&g=1", "display_name": "Glen T", "link": "https://stackoverflow.com/users/40444/glen-t"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1424327292, "post_id": 28590556, "comment_id": 45505744, "body": "Yes that is what I&#39;m saying. I&#39;ll try reword to make it clearer. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 1568, "user_id": 3957977, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KVs29.jpg?s=128&g=1", "display_name": "Eugene Petrov", "link": "https://stackoverflow.com/users/3957977/eugene-petrov"}, "is_accepted": true, "score": 1, "last_activity_date": 1424307164, "last_edit_date": 1424307164, "creation_date": 1424283239, "answer_id": 28590868, "question_id": 28590556, "link": "https://stackoverflow.com/questions/28590556/removing-free-spacing-whitespace-and-comments-from-regex/28590868#28590868", "title": "Removing Free-Spacing (whitespace and comments) from Regex", "body": "<pre><code>r = /(?x)\n      # Some comment\n       example.com|\n             subdomain.example.me\n     /\n        puts r     #=&gt; (?x-mi:\n                   #    # Some comment\n                   #     example.com|\n                   #          subdomain.example.me\n                   #  )\n\n        puts r.to_s.gsub(/#.*?\\n|^\\(\\?x-mi:|\\)$|\\s/,\"\")   \n                   #=&gt;example.com|subdomain.example.me\n</code></pre>\n\n<p>limitation is no sharps in the new regex area.</p>\n"}], "owner": {"reputation": 1460, "user_id": 40444, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Yjucl.jpg?s=128&g=1", "display_name": "Glen T", "link": "https://stackoverflow.com/users/40444/glen-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 28590868, "answer_count": 1, "score": 0, "last_activity_date": 1424327573, "creation_date": 1424282300, "last_edit_date": 1424327573, "question_id": 28590556, "link": "https://stackoverflow.com/questions/28590556/removing-free-spacing-whitespace-and-comments-from-regex", "title": "Removing Free-Spacing (whitespace and comments) from Regex", "body": "<p>I have a Ruby <code>Regexp</code> object that includes comments and whitespace (free-space mode), I'd like to manipulate it into MySQL-compatible (REGEXP) form.</p>\n\n<p>Example:</p>\n\n<pre><code>r = /(?x)\n      # Some comment\n      example.com|\n      subdomain.example.me\n/\n</code></pre>\n\n<p>Desired resulting regex (without comments or whitespace): </p>\n\n<pre><code>/example.com|subdomain.example.me/\n</code></pre>\n\n<p><strong>More Context:</strong></p>\n\n<p>I have a regex which has been build with the \\x attribute to enable free-spacing mode. This mode ignores whitespace and comments in the regex.</p>\n\n<p>I have a Regexp object build with the \\x attribute, which works when used in ruby. However I'd like to use this regex in a mySQL 'REGEXP' query which doesn't support free-mode (to my knowledge). </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1424281772, "post_id": 28590345, "comment_id": 45487310, "body": "Look into the <code>has_many :through</code> relation..."}, {"owner": {"reputation": 1, "user_id": 2468466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81ed2840d0e291a6e2a1b7e48da35345?s=128&d=identicon&r=PG", "display_name": "Ben Bristow", "link": "https://stackoverflow.com/users/2468466/ben-bristow"}, "reply_to_user": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1424282084, "post_id": 28590345, "comment_id": 45487496, "body": "Hey Arup, darn I&#39;m stupid! Missed out the has_many. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 1744, "user_id": 1576116, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/72f1a1b0aac390eca25881ffb8d17931?s=128&d=identicon&r=PG", "display_name": "Radolino", "link": "https://stackoverflow.com/users/1576116/radolino"}, "is_accepted": false, "score": 0, "last_activity_date": 1424294524, "last_edit_date": 1424294524, "creation_date": 1424283509, "answer_id": 28590952, "question_id": 28590345, "link": "https://stackoverflow.com/questions/28590345/rails-4-relations-with-3-models/28590952#28590952", "title": "Rails 4: Relations with 3 models", "body": "<p>It's possible </p>\n\n<p><strong>1. app</strong></p>\n\n<pre><code>belongs_to :service\n</code></pre>\n\n<p><strong>2. service</strong></p>\n\n<pre><code>has_many :apps\n</code></pre>\n\n<p>Not sure about the platform though. An app has many platforms that runs on ? Be careful that :through is a relationship that has to do with both tables, so If platform is the \"third\" table it makes sense, otherwise not.</p>\n"}], "owner": {"reputation": 1, "user_id": 2468466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81ed2840d0e291a6e2a1b7e48da35345?s=128&d=identicon&r=PG", "display_name": "Ben Bristow", "link": "https://stackoverflow.com/users/2468466/ben-bristow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424294524, "creation_date": 1424281675, "question_id": 28590345, "link": "https://stackoverflow.com/questions/28590345/rails-4-relations-with-3-models", "title": "Rails 4: Relations with 3 models", "body": "<p>Having a bit of a problem, wonder if you guys could help me out.</p>\n\n<p>I have 3 models:</p>\n\n<p>An <code>app</code> which belongs to a <code>service</code> and a <code>platform</code></p>\n\n<p>A <code>service</code> that has many apps</p>\n\n<p>I'm looking to find the correct way to use a relation to find the services that a platform has.</p>\n\n<p>I'm unsure how to do this. I've looked into has_and_belongs_to_many with no cigar.</p>\n\n<p>Wonder if anyone could help me.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "logging", "warnings", "httpclient"], "owner": {"reputation": 2931, "user_id": 1523560, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a04c8a5d97cf0b1c298c85b20c21f113?s=128&d=identicon&r=PG", "display_name": "bmalets", "link": "https://stackoverflow.com/users/1523560/bmalets"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 227, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1434443084, "creation_date": 1424280232, "last_edit_date": 1434443084, "question_id": 28589858, "link": "https://stackoverflow.com/questions/28589858/how-setup-global-configuration-of-httpclient-gem-for-rails-app", "title": "How setup global configuration of `httpclient` gem for rails app?", "body": "<p>Every time when some gem from my application use <code>httpclient-2.1.0</code> (I don't have this gem in rails Gemfile) - it writes many warnings to log file:</p>\n\n<pre><code>opt/ruby/2.1.2/lib/ruby/gems/2.1.0/gems/httpclient-2.3.4.1/lib/httpclient/ssl_config.rb:333:in `default_verify_callback' : at depth 2 - 19: self signed certificate in certificate chain (StandardWarning)\nopt/ruby/2.1.2/lib/ruby/gems/2.1.0/gems/httpclient-2.3.4.1/lib/httpclient/ssl_config.rb:333:in `default_verify_callback' : at depth 2 - 19: self signed certificate in certificate chain (StandardWarning)\nopt/ruby/2.1.2/lib/ruby/gems/2.1.0/gems/httpclient-2.3.4.1/lib/httpclient/ssl_config.rb:333:in `default_verify_callback' : at depth 2 - 19: self signed certificate in certificate chain (StandardWarning)\nopt/ruby/2.1.2/lib/ruby/gems/2.1.0/gems/httpclient-2.3.4.1/lib/httpclient/ssl_config.rb:333:in `default_verify_callback' : at depth 2 - 19: self signed certificate in certificate chain (StandardWarning)\nopt/ruby/2.1.2/lib/ruby/gems/2.1.0/gems/httpclient-2.3.4.1/lib/httpclient/ssl_config.rb:333:in `default_verify_callback' : at depth 2 - 19: self signed certificate in certificate chain (StandardWarning)\nopt/ruby/2.1.2/lib/ruby/gems/2.1.0/gems/httpclient-2.3.4.1/lib/httpclient/ssl_config.rb:333:in `default_verify_callback' : at depth 2 - 19: self signed certificate in certificate chain (StandardWarning)\n</code></pre>\n\n<p>Application works without errors, and I don't know what is a reason of these warning. And how I can disable it..</p>\n\n<p>May I somehow globally set HttpClient configuration 'use_ssl' to false?\nPlease help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "rake", "scaffold"], "comments": [{"owner": {"reputation": 9139, "user_id": 773228, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/baaecdda322cf4462a0dd018d7959b1e?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Wood", "link": "https://stackoverflow.com/users/773228/justin-wood"}, "edited": false, "score": 0, "creation_date": 1424279638, "post_id": 28589482, "comment_id": 45485969, "body": "Have you tried <code>rake db:seed</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 973, "user_id": 1693169, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b132e6176f5115b43f6a0c5446dea0c2?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/1693169/sean"}, "is_accepted": true, "score": 1, "last_activity_date": 1424279644, "last_edit_date": 1495542224, "creation_date": 1424279644, "answer_id": 28589643, "question_id": 28589482, "link": "https://stackoverflow.com/questions/28589482/running-rake-dbsetup-removes-all-my-users-data/28589643#28589643", "title": "Running rake db:setup removes all my users data", "body": "<p>I think you are looking to do a <code>rake db:seed</code>.  Here is a good explanation of the other db rake tasks <a href=\"https://stackoverflow.com/questions/10301794/difference-between-rake-dbmigrate-dbreset-and-dbschemaload\">Difference between rake db:migrate db:reset and db:schema:load</a></p>\n"}, {"tags": [], "owner": {"reputation": 4279, "user_id": 3920143, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1b47dd912eaeb6cd72a15ec2932f6751?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/3920143/joel"}, "is_accepted": false, "score": 1, "last_activity_date": 1424279712, "creation_date": 1424279712, "answer_id": 28589678, "question_id": 28589482, "link": "https://stackoverflow.com/questions/28589482/running-rake-dbsetup-removes-all-my-users-data/28589678#28589678", "title": "Running rake db:setup removes all my users data", "body": "<p><code>db:seed</code> runs the db/seed.rb file</p>\n\n<p><code>db:schema:load</code> loads the schema into the current env's database</p>\n\n<p><code>db:setup</code> runs both  <code>db:schema:load</code> and <code>db:seed</code></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4227507"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 28589643, "answer_count": 2, "score": 2, "last_activity_date": 1424279712, "creation_date": 1424279160, "question_id": 28589482, "link": "https://stackoverflow.com/questions/28589482/running-rake-dbsetup-removes-all-my-users-data", "title": "Running rake db:setup removes all my users data", "body": "<p>Within my ruby on rails application I have the seeds file, which contains data on the users such as:</p>\n\n<pre><code>User.create(:password =&gt; \"jb\", :password_confirmation =&gt; \"jb\", :role =&gt; 'admin', :first_name =&gt; \"Joe\", :last_name =&gt; \"Bloggs\",  :house_no =&gt; \"1\", :street =&gt; \"A Street\", :town =&gt; \"A Town\", :postcode =&gt; \"ABC1 2DE\", :email =&gt; \"anemail@anemailaddress.co.uk\")\n</code></pre>\n\n<p>But when I run <code>rake db:setup</code> it removes all the users data that I have entered into the database through the application (which is fine and expected) but does not enter the users data from the seeds.</p>\n\n<p>I'm not sure if this makes a difference but I recently did three consecutive scaffolds.</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["ruby", "sass"], "comments": [{"owner": {"reputation": 24855, "user_id": 3850595, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100007829376909/picture?type=large", "display_name": "Jordi Castilla", "link": "https://stackoverflow.com/users/3850595/jordi-castilla"}, "edited": false, "score": 1, "creation_date": 1424278873, "post_id": 28589251, "comment_id": 45485469, "body": "Do you have internet connection?"}, {"owner": {"reputation": 131, "user_id": 4572813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c7e66beb5a19ed10c93e54bd4c500ab?s=128&d=identicon&r=PG&f=1", "display_name": "Nela", "link": "https://stackoverflow.com/users/4572813/nela"}, "reply_to_user": {"reputation": 24855, "user_id": 3850595, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100007829376909/picture?type=large", "display_name": "Jordi Castilla", "link": "https://stackoverflow.com/users/3850595/jordi-castilla"}, "edited": false, "score": 0, "creation_date": 1424283476, "post_id": 28589251, "comment_id": 45488340, "body": "obviously if I have internet connection"}], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 4572813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c7e66beb5a19ed10c93e54bd4c500ab?s=128&d=identicon&r=PG&f=1", "display_name": "Nela", "link": "https://stackoverflow.com/users/4572813/nela"}, "edited": false, "score": 0, "creation_date": 1424283967, "post_id": 28591001, "comment_id": 45488625, "body": "I suspect, because I&#39;m actually in the office and security policies apply here, but I should ask? if I have some blocked port? or if you have to make a special configuration?"}, {"owner": {"reputation": 1744, "user_id": 1576116, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/72f1a1b0aac390eca25881ffb8d17931?s=128&d=identicon&r=PG", "display_name": "Radolino", "link": "https://stackoverflow.com/users/1576116/radolino"}, "reply_to_user": {"reputation": 131, "user_id": 4572813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c7e66beb5a19ed10c93e54bd4c500ab?s=128&d=identicon&r=PG&f=1", "display_name": "Nela", "link": "https://stackoverflow.com/users/4572813/nela"}, "edited": false, "score": 0, "creation_date": 1424284188, "post_id": 28591001, "comment_id": 45488731, "body": "I&#39;ve updated my answer with some ports and addresses I believe should be open in order to download gems. But don&#39;t take it for granted because proxies are cross-functional and don&#39;t often work as a simple firewall."}, {"owner": {"reputation": 1744, "user_id": 1576116, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/72f1a1b0aac390eca25881ffb8d17931?s=128&d=identicon&r=PG", "display_name": "Radolino", "link": "https://stackoverflow.com/users/1576116/radolino"}, "reply_to_user": {"reputation": 131, "user_id": 4572813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c7e66beb5a19ed10c93e54bd4c500ab?s=128&d=identicon&r=PG&f=1", "display_name": "Nela", "link": "https://stackoverflow.com/users/4572813/nela"}, "edited": false, "score": 0, "creation_date": 1424284238, "post_id": 28591001, "comment_id": 45488767, "body": "I often connect a 3G modem or a guest Wifi network in order to just download and update them."}, {"owner": {"reputation": 131, "user_id": 4572813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c7e66beb5a19ed10c93e54bd4c500ab?s=128&d=identicon&r=PG&f=1", "display_name": "Nela", "link": "https://stackoverflow.com/users/4572813/nela"}, "edited": false, "score": 0, "creation_date": 1424299312, "post_id": 28591001, "comment_id": 45497391, "body": "I have removed the proxy and have even given me free ip and permissions to install &quot;gem install sass&quot; but the error keeps coming but now appears to be another   &quot;C:\\Users\\usuario&gt;gem install sass ERROR:  Could not find a valid gem &#39;sass&#39; (&gt;= 0), here is why:           Unable to download data from <a href=\"https://rubygems.org/\" rel=\"nofollow noreferrer\">rubygems.org</a> - SSL_connect retur ned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed ( <a href=\"https://api.rubygems.org/latest_specs.4.8.gz\" rel=\"nofollow noreferrer\">api.rubygems.org/latest_specs.4.8.gz</a>)  &quot;"}], "tags": [], "owner": {"reputation": 1744, "user_id": 1576116, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/72f1a1b0aac390eca25881ffb8d17931?s=128&d=identicon&r=PG", "display_name": "Radolino", "link": "https://stackoverflow.com/users/1576116/radolino"}, "is_accepted": false, "score": 0, "last_activity_date": 1424284119, "last_edit_date": 1424284119, "creation_date": 1424283683, "answer_id": 28591001, "question_id": 28589251, "link": "https://stackoverflow.com/questions/28589251/error-installing-gem-install-sass-windows-7/28591001#28591001", "title": "Error installing gem install sass windows 7", "body": "<p>Check out your firewall and network connections. I have this problem when connecting through the network of company where I work, because we have a proxy that blocks those.</p>\n\n<p>Check for these addresses and ports to be open in a firewall:</p>\n\n<pre><code>rubygems.org 443 \ngithub.com 443 \ns3.amazonaws.com 443\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 194, "user_id": 3585239, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bGYHx.jpg?s=128&g=1", "display_name": "Egle Kreivyte", "link": "https://stackoverflow.com/users/3585239/egle-kreivyte"}, "edited": false, "score": 1, "creation_date": 1475671794, "post_id": 28596021, "comment_id": 67035365, "body": "Thanks, you saved my day ;)"}, {"owner": {"reputation": 283, "user_id": 1523198, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6de09bf9e54fa301145fe7c98609229d?s=128&d=identicon&r=PG", "display_name": "Nicolas T", "link": "https://stackoverflow.com/users/1523198/nicolas-t"}, "edited": false, "score": 0, "creation_date": 1487072216, "post_id": 28596021, "comment_id": 71609923, "body": "Great little tip!! :)"}], "tags": [], "owner": {"reputation": 131, "user_id": 4572813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c7e66beb5a19ed10c93e54bd4c500ab?s=128&d=identicon&r=PG&f=1", "display_name": "Nela", "link": "https://stackoverflow.com/users/4572813/nela"}, "is_accepted": true, "score": 12, "last_activity_date": 1424302318, "creation_date": 1424302318, "answer_id": 28596021, "question_id": 28589251, "link": "https://stackoverflow.com/questions/28589251/error-installing-gem-install-sass-windows-7/28596021#28596021", "title": "Error installing gem install sass windows 7", "body": "<p>I got friends thanks to <a href=\"https://www.youtube.com/user/johanricardo1108/about\">https://www.youtube.com/user/johanricardo1108/about</a></p>\n\n<p>that have:\ngem sources -a <a href=\"http://rubygems.org/\">http://rubygems.org/</a>\ncomfirmed and then this:\ngem install sass</p>\n\n<pre><code>C:\\Ruby21&gt;gem sources -a http://rubygems.org/\nhttps://rubygems.org is recommended for security over http://rubygems.org/\n\nDo you want to add this insecure source? [yn]  y\nhttp://rubygems.org/ added to sources\n\nC:\\Ruby21&gt;gem install sass\nFetching: sass-3.4.12.gem (100%)\nSuccessfully installed sass-3.4.12\nParsing documentation for sass-3.4.12\nInstalling ri documentation for sass-3.4.12\nDone installing documentation for sass after 6 seconds\nWARNING:  Unable to pull data from 'https://rubygems.org/': SSL_connect returned\n=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed (htt\nps://api.rubygems.org/latest_specs.4.8.gz)\n1 gem installed\n\nC:\\Ruby21&gt;sass -v\nSass 3.4.12 (Selective Steve)\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 4572813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c7e66beb5a19ed10c93e54bd4c500ab?s=128&d=identicon&r=PG&f=1", "display_name": "Nela", "link": "https://stackoverflow.com/users/4572813/nela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8055, "favorite_count": 2, "accepted_answer_id": 28596021, "answer_count": 2, "score": 1, "last_activity_date": 1424302318, "creation_date": 1424278563, "last_edit_date": 1424299652, "question_id": 28589251, "link": "https://stackoverflow.com/questions/28589251/error-installing-gem-install-sass-windows-7", "title": "Error installing gem install sass windows 7", "body": "<p>please help me to resolve this installation error.\nfirst install ruby \"Ruby 2.1.5\" and then wrote in cmd \"gem install sass\" but got an error</p>\n\n<p><strong>C:\\Ruby21</strong></p>\n\n<blockquote>\n  <p>C:>ruby -v ruby 2.1.5p273 (2014-11-13 revision 48405) [i386-mingw32]</p>\n  \n  <p>C:>gem install sass ERROR:  Could not find a valid gem 'sass' (>= 0),\n  here is why:\n            Unable to download data from <a href=\"https://rubygems.org/\" rel=\"nofollow\">https://rubygems.org/</a> - Errno::ETIMEDOUT:  Se produjo un error durante el intento de conexi?n\n  ya que la parte conectada no  respondi? adecuadamente tras un periodo\n  de tiempo, o bien se produjo un error e n la conexi?n establecida ya\n  que el host conectado no ha podido responder. - con nect(2) for\n  \"api.rubygems.org\" port 443 (<a href=\"https://api.rubygems.org/latest_specs.4\" rel=\"nofollow\">https://api.rubygems.org/latest_specs.4</a>\n  .8.gz)</p>\n</blockquote>\n\n<p>I have removed the proxy and have even given me free ip and permissions to install \"gem install sass\" but the error keeps coming but now appears to be another</p>\n\n<pre><code>C:\\Users\\usuario&gt;gem install sass\nERROR:  Could not find a valid gem 'sass' (&gt;= 0), here is why:\n          Unable to download data from https://rubygems.org/ - SSL_connect retur\nned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed (\nhttps://api.rubygems.org/latest_specs.4.8.gz)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "rspec", "tdd"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1424278565, "post_id": 28589231, "comment_id": 45485225, "body": "<i>\\should this be changed to user.id?</i> -- I think yes."}, {"owner": {"reputation": 2549, "user_id": 3284936, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TDrZU.jpg?s=128&g=1", "display_name": "dimitry_n", "link": "https://stackoverflow.com/users/3284936/dimitry-n"}, "reply_to_user": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1424279400, "post_id": 28589231, "comment_id": 45485805, "body": "1) <code>expected [object] got nil</code>   2) <code>expect(response).to render_template :show but rendering with &lt;[]&gt;</code>. Same two errors I listed in the OP"}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1424279438, "post_id": 28589231, "comment_id": 45485837, "body": "may be your #show action is empty.. that&#39;s why"}], "answers": [{"comments": [{"owner": {"reputation": 2549, "user_id": 3284936, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TDrZU.jpg?s=128&g=1", "display_name": "dimitry_n", "link": "https://stackoverflow.com/users/3284936/dimitry-n"}, "edited": false, "score": 0, "creation_date": 1424280754, "post_id": 28589992, "comment_id": 45486714, "body": "yep! I was also using a local var instead of an instance var (<code>user</code> vs <code>@user</code>). Thanks!"}], "tags": [], "owner": {"reputation": 2859, "user_id": 3945932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1794745acd9e572c24558b78b48d597?s=128&d=identicon&r=PG", "display_name": "ptd", "link": "https://stackoverflow.com/users/3945932/ptd"}, "is_accepted": true, "score": 2, "last_activity_date": 1424280624, "creation_date": 1424280624, "answer_id": 28589992, "question_id": 28589231, "link": "https://stackoverflow.com/questions/28589231/controller-spec-show-action-exoected-object-got-nil-error-rspec-3/28589992#28589992", "title": "Controller Spec #Show Action: exoected: [Object], got: nil Error - RSpec 3", "body": "<p>Your issue comes from <code>before_action :authenticate</code> either you need to set yourself as authenticated in the specs or you need to skip authentication for the <code>show</code> action.</p>\n\n<p>You would normally test like:</p>\n\n<pre><code>context 'when logged in' do\n  before(:each) do\n    set_as_logged_in\n  end\n\n  # your specs\nend\n</code></pre>\n\n<p>where the <code>set_as_logged_in</code> method would differ based on the way you are authenticating. Then you could also have a <code>'when not logged in'</code> context to verify the action behaves as expected when you are not logged in.</p>\n"}], "owner": {"reputation": 2549, "user_id": 3284936, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TDrZU.jpg?s=128&g=1", "display_name": "dimitry_n", "link": "https://stackoverflow.com/users/3284936/dimitry-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 683, "favorite_count": 0, "accepted_answer_id": 28589992, "answer_count": 1, "score": 0, "last_activity_date": 1424280624, "creation_date": 1424278495, "last_edit_date": 1424278984, "question_id": 28589231, "link": "https://stackoverflow.com/questions/28589231/controller-spec-show-action-exoected-object-got-nil-error-rspec-3", "title": "Controller Spec #Show Action: exoected: [Object], got: nil Error - RSpec 3", "body": "<p>I am going through Aaron Sumner's Everyday Rails Testing with RSpec (3) book, and can't get passed the following step:</p>\n\n<p>I am trying to spec out a <code>users#show</code> action with: </p>\n\n<p><strong>users_controller_spec:</strong></p>\n\n<pre><code>...    \ndescribe 'GET #show' do\n\n  it \"assigns the requested contact to @user\" do\n    user = create(:user)\n    get :show, id: user.id\n    expect(assigns(:user)).to eq user\n  end\n\n\n  it \"renders the :show template\" do\n    user = create(:user)\n    get :show, id: user.id\n    expect(response).to render_template :show\n  end\n\nend\n...\n</code></pre>\n\n<p><strong>users_controller:</strong></p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  before_action :authenticate\n  before_action :set_user, only: [:show]\n\n  ### Read:\n  def show\n    ...\n  end\n\n\n  private\n\n  def set_user\n    @user = User.find(params[:id])\n  end\n\nend\n</code></pre>\n\n<p><strong>application_controller helpers:</strong></p>\n\n<pre><code>  def authenticate\n    redirect_to home_path, alert: 'Please log in first' if current_user.nil?\n  end\n\n  private \n\n  def current_user\n    @current_user ||= User.find(session[:user_id]) if session[:user_id]\n  end\n\n  helper_method :current_user\n</code></pre>\n\n<p><strong>Errors:</strong>  </p>\n\n<pre><code>Failures:\n\n  1) UsersController GET #show assigns the requested user to @user\n     Failure/Error: expect(assigns(:user)).to eq user\n\n       expected: #&lt;User id: 1, ...\"&gt;\n            got: nil\n\n       (compared using ==)\n     # ./spec/controllers/users_controller_spec.rb:10:in `block (3 levels) in &lt;top (required)&gt;'\n\n  2) UsersController GET #show renders the :show template\n     Failure/Error: expect(response).to render_template :show\n       expecting &lt;\"show\"&gt; but rendering with &lt;[]&gt;\n     # ./spec/controllers/users_controller_spec.rb:17:in `block (3 levels) in &lt;top (required)&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "sunspot"], "answers": [{"tags": [], "owner": {"reputation": 12768, "user_id": 695749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/vV72v.jpg?s=128&g=1", "display_name": "Michael Giovanni Pumo", "link": "https://stackoverflow.com/users/695749/michael-giovanni-pumo"}, "is_accepted": true, "score": 0, "last_activity_date": 1424282325, "creation_date": 1424282325, "answer_id": 28590561, "question_id": 28589199, "link": "https://stackoverflow.com/questions/28589199/sunspot-how-to-include-user-data-in-json-output/28590561#28590561", "title": "Sunspot - How to include user data in JSON output?", "body": "<p>I figured out a solution by creating an empty array, looping the results from Sunspot, finding the respective user and pushing to the array.</p>\n\n<pre><code>_results = _search.results\n_pins = []\n\n_results.each do |pin|\n    _object = pin.attributes\n    _object[\"user\"] = { :profile =&gt; pin.user.profile }\n    _pins &lt;&lt; _object\nend\n</code></pre>\n\n<p>I now get a structure, where the profile data is nested in a user key within the pin hash, like so:</p>\n\n<p><img src=\"https://i.stack.imgur.com/KwUeD.png\" alt=\"enter image description here\"></p>\n"}], "owner": {"reputation": 12768, "user_id": 695749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/vV72v.jpg?s=128&g=1", "display_name": "Michael Giovanni Pumo", "link": "https://stackoverflow.com/users/695749/michael-giovanni-pumo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 28590561, "answer_count": 1, "score": 0, "last_activity_date": 1424282325, "creation_date": 1424278425, "question_id": 28589199, "link": "https://stackoverflow.com/questions/28589199/sunspot-how-to-include-user-data-in-json-output", "title": "Sunspot - How to include user data in JSON output?", "body": "<p>In my Rails app, I'm using Sunspot, so that users can search \"pins\" (like a post). All works fine and I'm returning the data as JSON.</p>\n\n<p>However, I'd also like to include in the JSON response, the \"user\" data associated with each \"pin\". </p>\n\n<p>I'm not needing \"user\" to be included in the search, but only as data with each \"pin\" after the search has been done.</p>\n\n<p>My search works fine, but I can't work out how to add the user data.</p>\n\n<pre><code>module Api\n\n    module V1\n\n        class PinsController &lt; ApplicationController \n\n            respond_to :json\n\n            def index\n\n                _search = Sunspot.search(Pin) do\n\n                    fulltext params[:q] do\n\n                        highlight :title\n                        phrase_fields :title =&gt; 2.0\n                        phrase_slop 1\n                        minimum_match 1\n\n                    end\n\n                    facet(:position_id, :type_id, :instrument_id, :genre_ids, :skill_id)\n\n                    with(:position_id, params[:position]) if params[:position].present?\n                    with(:type_id, params[:type]) if params[:type].present?\n                    with(:instrument_id, params[:instrument]) if params[:instrument].present?\n                    with(:genre_ids).all_of(params[:genre]) if params[:genre].present?\n                    with(:skill_id, params[:skill]) if params[:skill].present?\n\n                    paginate(:page =&gt; params[:page], :per_page =&gt; 25)\n\n                end\n\n                _pins = _search.results\n\n                _pins_positions = []\n                _pins_types = []\n                _pins_instruments = []\n                _pins_genres = []\n                _pins_skills = []\n\n                _search.facet(:position_id).rows.each do |row|\n                    _facet = Position.find_by_id(row.value)\n                    _object = _facet.attributes\n                    _object[\"count\"] = row.count\n                    _pins_positions &lt;&lt; _object\n                end\n\n                _search.facet(:type_id).rows.each do |row|\n                    _facet = Type.find_by_id(row.value)\n                    _object = _facet.attributes\n                    _object[\"count\"] = row.count\n                    _pins_types &lt;&lt; _object\n                end\n\n                _search.facet(:instrument_id).rows.each do |row|\n                    _facet = Instrument.find_by_id(row.value)\n                    _object = _facet.attributes\n                    _object[\"count\"] = row.count\n                    _pins_instruments &lt;&lt; _object\n                end\n\n                _search.facet(:genre_ids).rows.each do |row|\n                    _facet = Genre.find_by_id(row.value)\n                    _object = _facet.attributes\n                    _object[\"count\"] = row.count\n                    _pins_genres &lt;&lt; _object\n                end\n\n                _search.facet(:skill_id).rows.each do |row|\n                    _facet = Skill.find_by_id(row.value)\n                    _object = _facet.attributes\n                    _object[\"count\"] = row.count\n                    _pins_skills &lt;&lt; _object\n                end\n\n                _pins_positions = _pins_positions.sort_by { |e| e[\"title\"] }\n                _pins_types = _pins_types.sort_by { |e| e[\"title\"] }\n                _pins_instruments = _pins_instruments.sort_by { |e| e[\"title\"] }\n                _pins_genres = _pins_genres.sort_by { |e| e[\"title\"] }\n                _pins_skills = _pins_skills.sort_by { |e| e[\"title\"] }\n\n                _response = {\n                    :pins =&gt; _pins, \n                    :facets =&gt; {\n                        :positions =&gt; _pins_positions,\n                        :types =&gt; _pins_types,\n                        :instruments =&gt; _pins_instruments,\n                        :genres =&gt; _pins_genres,\n                        :skills =&gt; _pins_skills\n                    }\n                }\n\n                respond_with _response\n\n            end\n\n        end\n\n    end\n\nend\n</code></pre>\n\n<p>A typical response looks like:</p>\n\n<pre><code>{\"pins\":[{\n\"id\":95,\n\"user_id\":22,\n\"title\":\"Ratione sint odio vitae in quis aspernatur.\",\n\"description\":\"Sunt ut pariatur aut ipsum sit unde alias.\",\n\"latitude\":null,\n\"longitude\":null,\n\"position_id\":1,\n\"type_id\":1,\n\"instrument_id\":4,\n\"skill_id\":1,\n\"soundcloud_url\":null,\n\"created_at\":\"2012-09-04T06:54:17.000Z\",\n\"updated_at\":\"2013-10-14T21:58:17.000Z\",\n\"deleted_at\":null\n}],\n\"facets\":{\n\"positions\":[{\n\"id\":1,\n\"title\":\"Non-Professional\",\n\"token\":\"non-professional\",\"count\":2\n}],\n\"types\":[{\n\"id\":1,\n\"title\":\"Wanted\",\n\"token\":\"wanted\",\n\"count\":2\n}],\n\"instruments\":[{\n\"id\":4,\n\"title\":\"Synth\",\n\"token\":\"synth\",\n\"count\":2\n}],\n\"genres\":[{\n\"id\":12,\n\"title\":\"Folk\",\n\"token\":\"folk\",\n\"count\":2\n},\n{\n\"id\":16,\"title\":\"Hip Hop\",\"token\":\"hiphop\",\"count\":2}\n],\n\"skills\":[{\n\"id\":3,\n\"title\":\"Advanced\",\n\"token\":\"advanced\",\n\"count\":1},\n{\n\"id\":1,\n\"title\":\"Novice\",\n\"token\":\"novice\",\n\"count\":1\n}]\n}}\n</code></pre>\n\n<p>But, ideally, I'd like to include the associated \"user\" data for each \"pin\" in the JSON. As you can see, all I have here is \"user_id\"...but I want this JSON API to be rather 'flat' and include another hash key called \"user\" that has things like, \"first_name\", \"age\", \"gender\" etc.</p>\n\n<p>If I was doing a traditional View template, I could just expose \"pin\" as an instance variable and do something like: <code>@pin.user.profile.first_name</code> - how can I do this when building my data within Sunspot?</p>\n\n<p>Hope I've made this clear. Many thanks!</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1424276414, "post_id": 28588407, "comment_id": 45483767, "body": "What do you mean by <code>\\n\\\\r</code>? Normally that&#39;s <code>\\n\\r</code>, or are you looking for literal backslash-r? Do you have an example of the sorts of data you&#39;re matching against you could append to your question?"}, {"owner": {"reputation": 47, "user_id": 4169054, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/df976997f4d1bfb6bbe3f160425f7006?s=128&d=identicon&r=PG&f=1", "display_name": "Rebs", "link": "https://stackoverflow.com/users/4169054/rebs"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1424276472, "post_id": 28588407, "comment_id": 45483811, "body": "@tadman im searching for a literal backslash"}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1424276535, "post_id": 28588407, "comment_id": 45483854, "body": "the dotall modifier in ruby is <code>m</code> not <code>s</code>"}, {"owner": {"reputation": 47, "user_id": 4169054, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/df976997f4d1bfb6bbe3f160425f7006?s=128&d=identicon&r=PG&f=1", "display_name": "Rebs", "link": "https://stackoverflow.com/users/4169054/rebs"}, "reply_to_user": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1424276631, "post_id": 28588407, "comment_id": 45483918, "body": "@CasimiretHippolyte ah, thank you. that&#39;s worked, i thought regexp would be the same in all languages"}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1424276819, "post_id": 28588407, "comment_id": 45484054, "body": "And if you want to impress your friends you can write: <code>(?m:\\\\ms3(.*?)\\\\p)</code>"}, {"owner": {"reputation": 47, "user_id": 4169054, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/df976997f4d1bfb6bbe3f160425f7006?s=128&d=identicon&r=PG&f=1", "display_name": "Rebs", "link": "https://stackoverflow.com/users/4169054/rebs"}, "reply_to_user": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1424276991, "post_id": 28588407, "comment_id": 45484164, "body": "@CasimiretHippolyte haha brilliant thanks"}], "answers": [{"tags": [], "owner": {"reputation": 62965, "user_id": 3679490, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/70f98fb23b16862298ea208aedfd18ae?s=128&d=identicon&r=PG&f=1", "display_name": "vks", "link": "https://stackoverflow.com/users/3679490/vks"}, "is_accepted": false, "score": 0, "last_activity_date": 1424276639, "creation_date": 1424276639, "answer_id": 28588514, "question_id": 28588407, "link": "https://stackoverflow.com/questions/28588407/ruby-regex-section-to-match-multiline/28588514#28588514", "title": "Ruby regex section to match multiline", "body": "<pre><code>(.*?)==&gt;([\\s\\S]*?)\n</code></pre>\n\n<p>You can use this instead of <code>DOTALL</code> modifier.</p>\n"}, {"tags": [], "owner": {"reputation": 1568, "user_id": 3957977, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KVs29.jpg?s=128&g=1", "display_name": "Eugene Petrov", "link": "https://stackoverflow.com/users/3957977/eugene-petrov"}, "is_accepted": false, "score": 0, "last_activity_date": 1424277192, "creation_date": 1424277192, "answer_id": 28588728, "question_id": 28588407, "link": "https://stackoverflow.com/questions/28588407/ruby-regex-section-to-match-multiline/28588728#28588728", "title": "Ruby regex section to match multiline", "body": "<pre><code>convert = contents.gsub(/\\\\s1(.*?)(\\n\\\\r.*?)?\\n((\\n*)\\\\ms3(.*?)\\\\p)/, 'replacement code')\n</code></pre>\n\n<p>This will capture any(0+) newlines before \"\\ms3\". If it's not what you meant, please, clarify what functionality do you expect from <code>(?s)</code>?</p>\n"}], "owner": {"reputation": 47, "user_id": 4169054, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/df976997f4d1bfb6bbe3f160425f7006?s=128&d=identicon&r=PG&f=1", "display_name": "Rebs", "link": "https://stackoverflow.com/users/4169054/rebs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1424277192, "creation_date": 1424276344, "question_id": 28588407, "link": "https://stackoverflow.com/questions/28588407/ruby-regex-section-to-match-multiline", "title": "Ruby regex section to match multiline", "body": "<p>So this is my code </p>\n\n<p><code>convert = contents.gsub(/\\\\s1(.*?)(\\n\\\\r.*?)?\\n((?s)\\\\ms3(.*?)\\\\p)/, 'replacement code')</code></p>\n\n<p>in the first bit: <code>\\\\s1(.*?)(\\n\\\\r.*?)?\\n</code>i only want it to match a newline when i tell it there's one there. But when searching for <code>\\\\ms3(.*?)\\\\p</code> i want it to pick up any newlines that are there. Unfortunately it looks like Ruby doesn't support this <code>(?s)</code>prefix. Is there any way of doing this?</p>\n\n<p>thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "boolean", "percentage"], "comments": [{"owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "edited": false, "score": 2, "creation_date": 1424276272, "post_id": 28588305, "comment_id": 45483663, "body": "Please demonstrate some wiliness to learn by showing the query you tried."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1424276522, "post_id": 28588305, "comment_id": 45483846, "body": "So you mean a scope like <code>Vote.where(valid_vote: true)</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 3, "creation_date": 1424276541, "post_id": 28588472, "comment_id": 45483859, "body": "Careful with potentially dividing by zero."}, {"owner": {"reputation": 22836, "user_id": 152786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/581hP.jpg?s=128&g=1", "display_name": "smathy", "link": "https://stackoverflow.com/users/152786/smathy"}, "edited": false, "score": 1, "creation_date": 1424276816, "post_id": 28588472, "comment_id": 45484051, "body": "<code>Constituency.votes</code> isn&#39;t a method, you need to get a <code>Constituency</code> instance."}], "tags": [], "owner": {"reputation": 5307, "user_id": 1193216, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/25fae6f93f4a2bf88f6a4e265d944685?s=128&d=identicon&r=PG", "display_name": "Josh", "link": "https://stackoverflow.com/users/1193216/josh"}, "is_accepted": true, "score": 3, "last_activity_date": 1424276935, "last_edit_date": 1424276935, "creation_date": 1424276516, "answer_id": 28588472, "question_id": 28588305, "link": "https://stackoverflow.com/questions/28588305/counting-percentage-of-true-elements-in-ruby/28588472#28588472", "title": "Counting percentage of true elements in ruby", "body": "<p>To get all the percentage of valid votes to all votes run:</p>\n\n<pre><code>all_votes_count = constituency.votes.count\nvalid_votes_count = constituency.votes.where(valid_vote: true).count\nif all_votes_count &gt; 0\n  percent = valid_notes_count / all_votes_count\nelse\n  puts \"no votes\"\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22836, "user_id": 152786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/581hP.jpg?s=128&g=1", "display_name": "smathy", "link": "https://stackoverflow.com/users/152786/smathy"}, "is_accepted": false, "score": 2, "last_activity_date": 1424276756, "creation_date": 1424276756, "answer_id": 28588559, "question_id": 28588305, "link": "https://stackoverflow.com/questions/28588305/counting-percentage-of-true-elements-in-ruby/28588559#28588559", "title": "Counting percentage of true elements in ruby", "body": "<p>You can do it with a single SQL query like this:</p>\n\n<pre><code>h = votes.group(:valid_vote).count\npercentage = 100.0 * h[true] / h.values.sum rescue 0\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 4569230, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eaa65370e9c4ce49af7ae39062ad792d?s=128&d=identicon&r=PG&f=1", "display_name": "Ricce", "link": "https://stackoverflow.com/users/4569230/ricce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 28588472, "answer_count": 2, "score": 2, "last_activity_date": 1424276935, "creation_date": 1424276053, "question_id": 28588305, "link": "https://stackoverflow.com/questions/28588305/counting-percentage-of-true-elements-in-ruby", "title": "Counting percentage of true elements in ruby", "body": "<pre><code>class Constituency &lt; ActiveRecord::Base\n    has_many :votes\nend\n\nclass Vote &lt;ActiveRecord::Base\n    belongs_to :constituency\nend\n</code></pre>\n\n<p>I have a database with votes and each vote has boolean attribute \"valid_vote\".\nWhat I want to receive how many votes are in each constituency (in percent), but counting only valid votes. So 100% is all votes, where valid_vote == true.\nAny ideas how should I write it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "cucumber"], "answers": [{"comments": [{"owner": {"reputation": 1344, "user_id": 562646, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e1dc86932c17fa61ffd81a0a0e63e6b8?s=128&d=identicon&r=PG", "display_name": "digitig", "link": "https://stackoverflow.com/users/562646/digitig"}, "edited": false, "score": 0, "creation_date": 1424276884, "post_id": 28588336, "comment_id": 45484095, "body": "The constants in the initialiser don&#39;t appear to be available to the step definition. When I run cucumber, it complains that they&#39;re uninitialised, but I can use them perfectly well from within models and migrations.  Note that the directory for my factories is the RSpec one -- I don&#39;t want to repeat the factories for Cucumber."}, {"owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "reply_to_user": {"reputation": 1344, "user_id": 562646, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e1dc86932c17fa61ffd81a0a0e63e6b8?s=128&d=identicon&r=PG", "display_name": "digitig", "link": "https://stackoverflow.com/users/562646/digitig"}, "edited": false, "score": 0, "creation_date": 1424277465, "post_id": 28588336, "comment_id": 45484526, "body": "If you check the FactoryGirl source code, you&#39;ll notice it will lookup the factories in several different folders. <a href=\"https://github.com/thoughtbot/factory_girl_rails/blob/master/lib/factory_girl_rails/railtie.rb#L12-L18\" rel=\"nofollow noreferrer\">github.com/thoughtbot/factory_girl_rails/blob/master/lib/&hellip;</a>"}, {"owner": {"reputation": 1344, "user_id": 562646, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e1dc86932c17fa61ffd81a0a0e63e6b8?s=128&d=identicon&r=PG", "display_name": "digitig", "link": "https://stackoverflow.com/users/562646/digitig"}, "edited": false, "score": 1, "creation_date": 1424279264, "post_id": 28588336, "comment_id": 45485720, "body": "None of which is the folder I specified :) Still, I&#39;ll give you credit for the answer, because you confirmed that the behaviour I expected was the standard behaviour, and led me to chase down issues in my gemfile, environment.rb and env.rb files, and I can move my factories to somewhere FactoryGirl does look."}, {"owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "reply_to_user": {"reputation": 1344, "user_id": 562646, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e1dc86932c17fa61ffd81a0a0e63e6b8?s=128&d=identicon&r=PG", "display_name": "digitig", "link": "https://stackoverflow.com/users/562646/digitig"}, "edited": false, "score": 0, "creation_date": 1424279636, "post_id": 28588336, "comment_id": 45485967, "body": "Sorry, I just noticed the extra <code>&#47;support</code> folder inside <code>spec</code> :)"}], "tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": true, "score": 1, "last_activity_date": 1424276153, "creation_date": 1424276153, "answer_id": 28588336, "question_id": 28588211, "link": "https://stackoverflow.com/questions/28588211/how-do-i-tell-cucumber-where-to-search-for-files/28588336#28588336", "title": "How do I tell cucumber where to search for files?", "body": "<p>Files in the initializer are loaded automatically when the Rails application starts. The <a href=\"https://github.com/thoughtbot/factory_girl_rails/blob/master/lib/factory_girl_rails/railtie.rb\" rel=\"nofollow\">same applies</a> to factories, as long as the <code>factory_girl_rails</code> is added as dependency to the environment that is used by cucumber to run the scenarios (generally <code>cucumber</code>).</p>\n"}], "owner": {"reputation": 1344, "user_id": 562646, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e1dc86932c17fa61ffd81a0a0e63e6b8?s=128&d=identicon&r=PG", "display_name": "digitig", "link": "https://stackoverflow.com/users/562646/digitig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19, "favorite_count": 0, "accepted_answer_id": 28588336, "answer_count": 1, "score": 0, "last_activity_date": 1424276165, "creation_date": 1424275771, "last_edit_date": 1424276165, "question_id": 28588211, "link": "https://stackoverflow.com/questions/28588211/how-do-i-tell-cucumber-where-to-search-for-files", "title": "How do I tell cucumber where to search for files?", "body": "<p>In my cucumber step definitions, I want to use constants defined in <code>\"#{Rails.root}/config/initializers/constants.rb\"</code> and <code>FactoryGirl</code> factories defined in <code>#{Rails.root}/spec/support/factories\"</code>. How do I configure cucumber to look in those places?</p>\n"}, {"tags": ["ruby", "chef-infra"], "comments": [{"owner": {"reputation": 2859, "user_id": 3945932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1794745acd9e572c24558b78b48d597?s=128&d=identicon&r=PG", "display_name": "ptd", "link": "https://stackoverflow.com/users/3945932/ptd"}, "edited": false, "score": 0, "creation_date": 1424275515, "post_id": 28588060, "comment_id": 45483130, "body": "Why are you using two backslashes instead of one?"}, {"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1424279541, "post_id": 28588060, "comment_id": 45485898, "body": "Just stop escaping things which do not have to be escaped. you&#39;re using <code>%Q{}</code> which allows you to not escape double quotes. <code>cmd=%Q{knife bootstrap windows winrm &#39;mynode&#39; -N &#39;mynode&#39; -x &#39;Administrator&#39; -P &#39;password&#39; -p 5985 -j &#39;{&quot;db-mssql&quot; : {&quot;full_install&quot; : true, &quot;cluster_install&quot; : true}}&#39;} </code> should work"}], "answers": [{"comments": [{"owner": {"reputation": 7877, "user_id": 1401560, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/347d89519bdf28150424b22543d0fbdb?s=128&d=identicon&r=PG", "display_name": "Chris F", "link": "https://stackoverflow.com/users/1401560/chris-f"}, "edited": false, "score": 0, "creation_date": 1424281342, "post_id": 28588104, "comment_id": 45487070, "body": "I like this answer best. I had to put require &quot;json&quot; in my file so the Hash object inherits the .to_json function."}], "tags": [], "owner": {"reputation": 213, "user_id": 4046996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00bc2b05af3b81eaf361b6acc5cb4a51?s=128&d=identicon&r=PG&f=1", "display_name": "Khanad", "link": "https://stackoverflow.com/users/4046996/khanad"}, "is_accepted": true, "score": 0, "last_activity_date": 1424283764, "last_edit_date": 1424283764, "creation_date": 1424275489, "answer_id": 28588104, "question_id": 28588060, "link": "https://stackoverflow.com/questions/28588060/how-to-embed-json-in-a-command-line-called-in-a-ruby-script/28588104#28588104", "title": "How to embed json in a command line called in a ruby script?", "body": "<p>Just use a ruby hash and then call .to_json on it.</p>\n\n<p>Make sure to 'require json' in order to get the .to_json functionality. </p>\n"}], "owner": {"reputation": 7877, "user_id": 1401560, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/347d89519bdf28150424b22543d0fbdb?s=128&d=identicon&r=PG", "display_name": "Chris F", "link": "https://stackoverflow.com/users/1401560/chris-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 28588104, "answer_count": 1, "score": 0, "last_activity_date": 1424283764, "creation_date": 1424275347, "question_id": 28588060, "link": "https://stackoverflow.com/questions/28588060/how-to-embed-json-in-a-command-line-called-in-a-ruby-script", "title": "How to embed json in a command line called in a ruby script?", "body": "<p>I'm trying to run the following command (which works) inside a ruby script</p>\n\n<pre><code>knife bootstrap windows winrm 'mynode' -N 'mynode' -x 'Administrator' -P 'password' -p 5985 -j '{\"db-mssql\" : {\"full_install\" : true, \"cluster_install\" : true}}'\n</code></pre>\n\n<p>I've attempted this...</p>\n\n<pre><code>cmd=%Q{knife bootstrap windows winrm 'mynode' -N 'mynode' \\\n         -x 'Administrator' -P 'password' -p 5985 \\\n         \"echo '{\\\\\"db-mssql\\\\\" : { \\\\\"full_install\\\\\" : true, \\\\\"cluster_install\\\\\" : false}}' | -j /dev/stdin\"}\nputs (cmd)\nsystem(cmd)\n</code></pre>\n\n<p>...and this...</p>\n\n<pre><code>cmd=%Q{knife bootstrap windows winrm 'mynode' -N 'mynode' \\\n         -x 'Administrator' -P 'password' -p 5985 \\\n         -j '{\\\\\"db-mssql\\\\\" : { \\\\\"full_install\\\\\" : true, \\\\\"cluster_install\\\\\" : false}}'}\nputs (cmd)\nsystem(cmd)\n</code></pre>\n\n<p>...resulting in a JSON Parse error by the interpreter. What is the correct syntax?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1424309288, "post_id": 28596885, "comment_id": 45500817, "body": "This is off-topic, should be on codereview.stackexchange.com"}], "answers": [{"comments": [{"owner": {"reputation": 286, "user_id": 1056064, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ebc72f09231eb2b700ab7e36657018aa?s=128&d=identicon&r=PG&f=1", "display_name": "victoroux", "link": "https://stackoverflow.com/users/1056064/victoroux"}, "edited": false, "score": 0, "creation_date": 1424358749, "post_id": 28597223, "comment_id": 45523421, "body": "I assume it&#39;s bad form to create variables that will only delete themselves out of the block scope anyhow.  However, for the last three lines (again just out of curiousity) is it possible to make that a one liner?  I seem obsessed with minimizing the code, but really I am just curious because this is a new language for me and I&#39;m wondering what all can be done still -- Thank you for the answer, the second is what I ended up doing.  The weirdest thing I tried to do what create a hash of variable names and their respective text file and then try to feed that into a function. That did not work xP"}, {"owner": {"reputation": 286, "user_id": 1056064, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ebc72f09231eb2b700ab7e36657018aa?s=128&d=identicon&r=PG&f=1", "display_name": "victoroux", "link": "https://stackoverflow.com/users/1056064/victoroux"}, "edited": false, "score": 0, "creation_date": 1424359277, "post_id": 28597223, "comment_id": 45523792, "body": "Nvm I got it! One line of awesomeness. cheap, expensive, auction = load(cheap.txt), load(exp.txt), load(auc.txt)"}], "tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": true, "score": 1, "last_activity_date": 1424309361, "creation_date": 1424309361, "answer_id": 28597223, "question_id": 28596885, "link": "https://stackoverflow.com/questions/28596885/ruby-how-to-create-multiple-hashes-using-their-respective-text-file-name-in-one/28597223#28597223", "title": "Ruby: How to create multiple hashes using their respective text file name in one block", "body": "<p>There are lots of options. The easiest and closest to what you're trying to achieve is to store your hashes <em>in a hash</em>:</p>\n\n<pre><code>items = {}\n\n%w{cheap.txt expensive.txt auction.txt}.each do |x|\n    items[x] = Hash.new {|name, id| name[id] = ''}\n    File.open(x, 'r').each_line do |l|\n        name, id = line.split(':')\n        items[x][name] &lt;&lt; id\n    end\nend\n</code></pre>\n\n<p>Alternatively, wrap the actual loading in a function, which accepts a filename:</p>\n\n<pre><code>def load_file(filename)\n  data = Hash.new {|name, id| name[id] = ''}\n  File.open(\"expensive.txt\", \"r\").each_line do |line|\n    name, id = line.split(\":\")\n    data[name] &lt;&lt; id\n  end\n  data.sort_by{|k,v| v}\nend\n\ncheap = load_file('cheap.txt')\nexpensive = load_file('expensive.txt')\nauction = load_file('auction.txt')\n</code></pre>\n"}], "migrated_from": {"other_site": {"aliases": ["http://programmer.stackexchange.com", "http://programmers.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1292524346, "open_beta_date": 1283972400, "closed_beta_date": 1283367600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/apple-touch-icon@2.png", "twitter_account": "StackSoftEng", "favicon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/apple-touch-icon.png", "audience": "professionals, academics, and students working within the systems development life cycle", "site_url": "https://softwareengineering.stackexchange.com", "api_site_parameter": "softwareengineering", "logo_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/logo.png", "name": "Software Engineering", "site_type": "main_site"}, "on_date": 1424307176, "question_id": 273639}, "owner": {"reputation": 286, "user_id": 1056064, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ebc72f09231eb2b700ab7e36657018aa?s=128&d=identicon&r=PG&f=1", "display_name": "victoroux", "link": "https://stackoverflow.com/users/1056064/victoroux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 28597223, "answer_count": 1, "score": 0, "last_activity_date": 1424309361, "creation_date": 1424274192, "question_id": 28596885, "link": "https://stackoverflow.com/questions/28596885/ruby-how-to-create-multiple-hashes-using-their-respective-text-file-name-in-one", "title": "Ruby: How to create multiple hashes using their respective text file name in one block", "body": "<p>I want to read in each line of multiple files (e.g. 3 files) to their own hash.</p>\n\n<p>This is easy as three separate blocks:</p>\n\n<pre><code>cheap = Hash.new {|name, id| name[id] = ''}\nFile.open(\"cheap.txt\", \"r\").each_line do |line|\n  name, id = line.split(\":\")\n  cheap[name] &lt;&lt; id\nend\ncheap = cheap.sort_by{|k,v| v}\n\nexpensive = Hash.new {|name, id| name[id] = ''}\nFile.open(\"expensive.txt\", \"r\").each_line do |line|\n  name, id = line.split(\":\")\n  expensive[name] &lt;&lt; id\nend\nexpensive = expensive.sort_by{|k,v| v}\n\nauction = Hash.new {|name, id| name[id] = ''}\nFile.open(\"auction.txt\", \"r\").each_line do |line|\n  name, id = line.split(\":\")\n  auction[name] &lt;&lt; id\nend\nauction = auction.sort_by{|k,v| v}\n</code></pre>\n\n<p>But in the spirit of \"DRY\" (Don't Repeat Yourself) I am trying to write this in one block. I google'd and read up on some different methods, the best analogy I came close to was a \"require\" set up as such:</p>\n\n<pre><code>%w{rubygems daemons eventmachine}.each { |x| require x }\n</code></pre>\n\n<p>However if I try to apply this to my puzzle I run into the problem of trying to create a hash name out of the variable I've assigned it to:</p>\n\n<pre><code>%w{cheap.txt expensive.txt auction.txt}.each do |x|\n    x = Hash.new {|name, id| name[id] = ''}\n    File.open(x, 'r').each_line do |l|\n        name, id = line.split(':')\n        x.split(\".\")[name] &lt;&lt; id\n    end\nend\n</code></pre>\n\n<p>This will obviously output the error that I'm trying to convert a string into a hash. How can I pull each line out of three separate files into their own hash object? For now I will use three separate blocks, but conceptually I'm very curious about this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "email", "ruby-on-rails-4", "activeadmin"], "answers": [{"tags": [], "owner": {"reputation": 1840, "user_id": 858525, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/14c82101fbf5765eedc8a5054ee6b18e?s=128&d=identicon&r=PG", "display_name": "Misha", "link": "https://stackoverflow.com/users/858525/misha"}, "is_accepted": false, "score": 0, "last_activity_date": 1424333090, "creation_date": 1424333090, "answer_id": 28601258, "question_id": 28587559, "link": "https://stackoverflow.com/questions/28587559/im-trying-to-send-emails-using-activeadmin-but-its-showing-no-route-matches-po/28601258#28601258", "title": "I&#39;m trying to send emails using ActiveAdmin but it&#39;s showing no route matches post error", "body": "<p>Seems like <a href=\"https://github.com/sendgrid/sendgrid-ruby\" rel=\"nofollow\">Sendgrid</a> maintain a gem for your need. Check it out.</p>\n"}], "owner": {"reputation": 11, "user_id": 4580231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9ff9c1493e5bdeea589b03822cc525d?s=128&d=identicon&r=PG&f=1", "display_name": "Sayan Chakraborty", "link": "https://stackoverflow.com/users/4580231/sayan-chakraborty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 758, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1424333090, "creation_date": 1424274088, "question_id": 28587559, "link": "https://stackoverflow.com/questions/28587559/im-trying-to-send-emails-using-activeadmin-but-its-showing-no-route-matches-po", "title": "I&#39;m trying to send emails using ActiveAdmin but it&#39;s showing no route matches post error", "body": "<p>I have setup a simple email form but I dont know how to use ActiveAdmin to send emails when I click the 'send email' button, i did not find any helping documentation regarding email and mailer setup in Active Admin,</p>\n\n<p>I had added these codes to development.rb:</p>\n\n<pre><code>config.action_mailer.default_url_options = { :host =&gt; 'http://0.0.0.0:3000/admin' }\nActionMailer::Base.delivery_method = :sendmail\nActionMailer::Base.perform_deliveries = true\nActionMailer::Base.raise_delivery_errors = true\nhost = '0.0.0.0.:3000/admin/'\nActionMailer::Base.smtp_settings =\n{\n\n      :address            =&gt; 'smtp.sendgrid.com',\n      :port               =&gt; 587,\n      :domain             =&gt; 'sendgrid.com',\n      :authentication     =&gt; :login,\n      :user_name          =&gt; 'xxxxx',\n      :password           =&gt; 'xxxxxx',\n      :enable_starttls_auto =&gt; true\n  }\n</code></pre>\n\n<p>and these lines to emailer.rb in mailers:</p>\n\n<pre><code>def contact(to, subject, message, sent_at = Time.now)\n       @subject = subject\n       @recipients = to\n       @from = 'no-reply@xxxx.com'\n       @sent_on = sent_at\n       @body[\"title\"] = 'This is title'\n       @body[\"email\"] = 'sender@yourdomain.com'\n       @body[\"message\"] = message\n       @headers = {}\nend\n</code></pre>\n\n<p>I would like to know how to setup an email sending form using ActiveAdmin and how to use sendgrid or any other platform to send it briefly, any help would be appreciated</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "stringbuilder"], "comments": [{"owner": {"reputation": 1089, "user_id": 3512592, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/189408ac24ce8bae9dc749c842c15037?s=128&d=identicon&r=PG&f=1", "display_name": "Devon Parsons", "link": "https://stackoverflow.com/users/3512592/devon-parsons"}, "edited": false, "score": 0, "creation_date": 1424273065, "post_id": 28586824, "comment_id": 45481377, "body": "What you have currently is not valid Ruby code, were you just saying that an example line in the file is <code>blah&#39;blah&quot;blah</code>? It also appears that your variable <code>line</code> is unset but I assume that&#39;s what you are pumping the source file into"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1424274519, "post_id": 28586824, "comment_id": 45482406, "body": "You can use the <code>%q</code> literal to enter a string with unescaped <code>&#39;</code> and <code>&quot;</code>: <code>file_line = %q{blah&#39;blah&quot;blah}</code>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1424274525, "post_id": 28586824, "comment_id": 45482413, "body": "What is your question?"}, {"owner": {"reputation": 1022, "user_id": 4190203, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ab42486428f113dcac28a2b3c289b4f2?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Black", "link": "https://stackoverflow.com/users/4190203/peter-black"}, "edited": false, "score": 0, "creation_date": 1424276053, "post_id": 28586824, "comment_id": 45483507, "body": "file_line was an example. not actual code.. sorry for the confusion"}], "answers": [{"tags": [], "owner": {"reputation": 1089, "user_id": 3512592, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/189408ac24ce8bae9dc749c842c15037?s=128&d=identicon&r=PG&f=1", "display_name": "Devon Parsons", "link": "https://stackoverflow.com/users/3512592/devon-parsons"}, "is_accepted": false, "score": 0, "last_activity_date": 1424274042, "creation_date": 1424274042, "answer_id": 28587538, "question_id": 28586824, "link": "https://stackoverflow.com/questions/28586824/trying-to-keep-some-escape-characters-but-not-others-ruby-rails/28587538#28587538", "title": "trying to keep some escape characters.. but not others. ruby rails", "body": "<pre><code>string = \"blah'blah\\\"blah\"\nputs string.gsub(/'/,\"\\\\\\\\'\").gsub(/\"/,'\\\"') # =&gt; blah\\'blah\\\"blah\n</code></pre>\n\n<p>There's a whole lot of escaping going on here. To be honest I don't really understand the first one, but the second one is simple. I think in the first one we are escaping the backslash we want to add, and then escaping those two backslashes to avoid ruby interpretting them as a reference to the string. Or something. Trying to do a single level of escaping yields this:</p>\n\n<pre><code>puts string.gsub(/'/,\"\\\\'\").gsub(/\"/,'\\\"') # =&gt; blahblah\\\"blahblah\\\"blah\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6602, "user_id": 3425360, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-D0hYGNyMGPo/AAAAAAAAAAI/AAAAAAAAA1c/wVJzgXu5zZI/photo.jpg?sz=128", "display_name": "Sharvy Ahmed", "link": "https://stackoverflow.com/users/3425360/sharvy-ahmed"}, "edited": false, "score": 0, "creation_date": 1424276562, "post_id": 28588025, "comment_id": 45483875, "body": "It&#39;s the cleaner solution."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 2, "last_activity_date": 1424275254, "creation_date": 1424275254, "answer_id": 28588025, "question_id": 28586824, "link": "https://stackoverflow.com/questions/28586824/trying-to-keep-some-escape-characters-but-not-others-ruby-rails/28588025#28588025", "title": "trying to keep some escape characters.. but not others. ruby rails", "body": "<p>I'd use a single <code>gsub</code> matching both, <code>'</code> and <code>\"</code>, along with a block to prepend a <code>\\</code>:</p>\n\n<pre><code>line = %q{blah'blah\"blah}\n\nstring = line.gsub(/[\"']/) { |m| \"\\\\#{m}\" }\n#=&gt; \"blah\\\\'blah\\\\\\\"blah\"\n\nputs string\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>blah\\'blah\\\"blah\n</code></pre>\n"}], "owner": {"reputation": 1022, "user_id": 4190203, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ab42486428f113dcac28a2b3c289b4f2?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Black", "link": "https://stackoverflow.com/users/4190203/peter-black"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 28588025, "answer_count": 2, "score": 0, "last_activity_date": 1424275254, "creation_date": 1424272024, "question_id": 28586824, "link": "https://stackoverflow.com/questions/28586824/trying-to-keep-some-escape-characters-but-not-others-ruby-rails", "title": "trying to keep some escape characters.. but not others. ruby rails", "body": "<p>I am having trouble formatting my string correctly. I am reading strings from a file and trying to use them as js code.</p>\n\n<pre><code>file_line = blah'blah\"blah\nstring = line.gsub(/'/, \"\\\\\\'\").gsub(/\"/, \"\\\\\\\"\").dump\n</code></pre>\n\n<p>I want the output to be:</p>\n\n<pre><code>blah\\'blah\\\"blah\n</code></pre>\n\n<p>But I cant seem to format it right. I have tried a bunch of things.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "associations", "relationship", "models"], "comments": [{"owner": {"reputation": 1358, "user_id": 2385217, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/bd10572a2009c613bef5244ee24c5a8f?s=128&d=identicon&r=PG&f=1", "display_name": "sansarp", "link": "https://stackoverflow.com/users/2385217/sansarp"}, "edited": false, "score": 0, "creation_date": 1424272119, "post_id": 28586776, "comment_id": 45480782, "body": "Do you have user_id in your booking table?"}, {"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1424272205, "post_id": 28586776, "comment_id": 45480829, "body": "You have some <code>Booking</code> in your <code>@bookings</code> collection that has an empty <code>user</code>. There are different ways of dealing with that, first tell us if that is that is possible or show us more code (controller code for example)"}, {"owner": {"reputation": 6602, "user_id": 3425360, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-D0hYGNyMGPo/AAAAAAAAAAI/AAAAAAAAA1c/wVJzgXu5zZI/photo.jpg?sz=128", "display_name": "Sharvy Ahmed", "link": "https://stackoverflow.com/users/3425360/sharvy-ahmed"}, "edited": false, "score": 0, "creation_date": 1424272224, "post_id": 28586776, "comment_id": 45480836, "body": "What is the response of Booking.last.user in your rails console?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4227507"}, "edited": false, "score": 0, "creation_date": 1424272259, "post_id": 28586776, "comment_id": 45480866, "body": "Yes, I&#39;ve just checked"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4227507"}, "edited": false, "score": 0, "creation_date": 1424272292, "post_id": 28586855, "comment_id": 45480886, "body": "That still doesn&#39;t work, and the user is not null, it has saved the user_id in the bookings table"}, {"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1424272391, "post_id": 28586855, "comment_id": 45480936, "body": "did you use <code>booking.try(:user).try(:first_name)</code> and <code>booking.try(:user).try(:last_name)</code>"}, {"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1424272478, "post_id": 28586855, "comment_id": 45480990, "body": "Please post your <code>index</code> method"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4227507"}, "edited": false, "score": 0, "creation_date": 1424272796, "post_id": 28586855, "comment_id": 45481183, "body": "I&#39;ve uploaded the bookings_controller"}, {"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1424272893, "post_id": 28586855, "comment_id": 45481256, "body": "<code>booking.try(:user).try(:first_name)</code> after using it can you please post your logs to show what exact error do you get ?"}], "tags": [], "owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "is_accepted": false, "score": 0, "last_activity_date": 1424272099, "creation_date": 1424272099, "answer_id": 28586855, "question_id": 28586776, "link": "https://stackoverflow.com/questions/28586776/why-can-i-not-get-data-from-an-associated-table/28586855#28586855", "title": "Why can I not get data from an associated table?", "body": "<p>because the <code>user</code> is nil so <code>booking.user</code> throws the error</p>\n\n<p>Simply try this <code>booking.try(:user).try(:first_name)</code></p>\n\n<pre><code> &lt;% @bookings.each do |booking| %&gt;\n                                    &lt;tr&gt;\n                                        &lt;td&gt;&lt;%= booking.try(:user).try(:first_name) %&gt; &lt;%= booking.try(:user).try(:last_name) %&gt;&lt;/td&gt;\n                                        &lt;td&gt;&lt;%= booking.showing.film.title %&gt;&lt;/td&gt;\n                                        &lt;td&gt;&lt;%= booking.showing.show_date %&gt;&lt;/td&gt;\n                                        &lt;td&gt;&lt;%= booking.showing.show_time.strftime(\"%H:%M\") %&gt;&lt;/td&gt;\n                                        &lt;td&gt;&lt;/td&gt;\n                                        &lt;td&gt;&lt;%= booking.seat.row_letter %&gt;&lt;%= booking.seat.number %&gt;&lt;/td&gt;\n                                        &lt;td style=\"padding-right:65px\"&gt;\n                                            &lt;%#= link_to 'Edit', edit_user_path(user) %&gt;  \n                                            &lt;%#= link_to 'Show', user_path(user) %&gt;  \n                                            &lt;%#= link_to 'Destroy', user_path(user), method: :delete, data: { confirm: 'Are you sure?' } %&gt;\n                                        &lt;/td&gt;\n                                    &lt;/tr&gt;\n                                &lt;% end %&gt;\n</code></pre>\n\n<p>For more information of nil handling of click <a href=\"http://api.rubyonrails.org/classes/Object.html#method-i-try\" rel=\"nofollow\">try</a> </p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4227507"}, "edited": false, "score": 0, "creation_date": 1424272476, "post_id": 28586891, "comment_id": 45480987, "body": "That still does not work, the user_id in bookings is not blank. I tested this using the code: <code>&lt;% if not booking.user_id.blank? %&gt;&lt;%= booking.user.first_name %&gt;&lt;% end %&gt;</code>, but I still get the error, hence the booking has a user_id"}, {"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1424272524, "post_id": 28586891, "comment_id": 45481014, "body": "I think you got error in the controller action <code>index</code> please post it"}, {"owner": {"reputation": 25560, "user_id": 14253, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/235c58ad566abb4c7979bc7033e9882c?s=128&d=identicon&r=PG", "display_name": "DGM", "link": "https://stackoverflow.com/users/14253/dgm"}, "edited": false, "score": 0, "creation_date": 1424274670, "post_id": 28586891, "comment_id": 45482524, "body": "Even if the user_id is not blank, you can still get an error if there isn&#39;t a matching user"}], "tags": [], "owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "is_accepted": false, "score": 0, "last_activity_date": 1424272230, "creation_date": 1424272230, "answer_id": 28586891, "question_id": 28586776, "link": "https://stackoverflow.com/questions/28586776/why-can-i-not-get-data-from-an-associated-table/28586891#28586891", "title": "Why can I not get data from an associated table?", "body": "<p>You have correct set up associations.\nBut question is have you add <code>user_id</code> in your <code>booking</code> record, when you created it.</p>\n\n<pre><code>&lt;% @bookings.each do |booking| %&gt;\n  &lt;tr&gt;\n     &lt;td&gt;&lt;%= booking.user.try(:first_name) %&gt; &lt;%#= booking.user.try(:last_name) %&gt;&lt;/td&gt;\n     &lt;td&gt;&lt;%= booking.showing.film.title %&gt;&lt;/td&gt;\n     &lt;td&gt;&lt;%= booking.showing.show_date %&gt;&lt;/td&gt;\n     &lt;td&gt;&lt;%= booking.showing.show_time.strftime(\"%H:%M\") %&gt;&lt;/td&gt;\n     &lt;td&gt;&lt;/td&gt;\n     &lt;td&gt;&lt;%= booking.seat.row_letter %&gt;&lt;%= booking.seat.number %&gt;&lt;/td&gt;\n     &lt;td style=\"padding-right:65px\"&gt;\n       &lt;%#= link_to 'Edit', edit_user_path(user) %&gt;  \n       &lt;%#= link_to 'Show', user_path(user) %&gt;  \n       &lt;%#= link_to 'Destroy', user_path(user), method: :delete, data: { confirm: 'Are you sure?' } %&gt;\n     &lt;/td&gt;\n  &lt;/tr&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>using method <code>try</code> will ensure that error does not occur</p>\n\n<pre><code>booking.user.try(:first_name) # display user first name if exist\nbooking.user.try(:last_name)  # display user last  name if exist\n</code></pre>\n\n<p>Open <code>rails c</code> and check which your <code>booking</code> record does not have <code>user_id</code></p>\n"}, {"tags": [], "owner": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "is_accepted": true, "score": 1, "last_activity_date": 1424281071, "last_edit_date": 1424281071, "creation_date": 1424273937, "answer_id": 28587499, "question_id": 28586776, "link": "https://stackoverflow.com/questions/28586776/why-can-i-not-get-data-from-an-associated-table/28587499#28587499", "title": "Why can I not get data from an associated table?", "body": "<p>Using more than one dot is a violation of <code>Law of Demeter</code> and is considered as a <strong>bad</strong> practice. To follow the Law of Demeter, you can <code>delegate</code> the name to the <code>user</code> model and create a instance method in the <code>user</code> class to return the full name,</p>\n\n<p>booking class</p>\n\n<pre><code>class Booking &lt; ActiveRecord::Base\n  belongs_to :user\n  delegate :full_name, to: :user, prefix: true, allow_nil: true\nend\n</code></pre>\n\n<p>user class</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :bookings\n\n  def full_name\n    \"#{first_name} #{last_name}\"\n  end\nend\n</code></pre>\n\n<p>the view</p>\n\n<pre><code>&lt;td&gt;&lt;%= booking.user_full_name %&gt;&lt;/td&gt;\n</code></pre>\n\n<p>If the user is <code>nil</code> this function will return gracefully return nil without complaining about not having a user.</p>\n\n<p>It's always better to delegate the method calls ( don't mean <code>delegate</code> as a  keyword specifically ) rather than call wit so many dots, take <code>booking.showing.film.title</code> for example, there's so many things that could go wrong with this, if booking or showing or film changed any attribute you'll need to keep iterating on all your views and fix every one of them every time, instead try to create a centralized function called for example <code>booking.film_title</code>, then you only need to maintain it in a single place.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4227507"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 28587499, "answer_count": 3, "score": 0, "last_activity_date": 1424281071, "creation_date": 1424271871, "last_edit_date": 1424272766, "question_id": 28586776, "link": "https://stackoverflow.com/questions/28586776/why-can-i-not-get-data-from-an-associated-table", "title": "Why can I not get data from an associated table?", "body": "<p>In my Ruby on Rails application I am trying to display the first_name and last_name of the user who made a booking.</p>\n\n<p>On the bookings/index.html.erb I have this:</p>\n\n<pre><code>&lt;% @bookings.each do |booking| %&gt;\n                                    &lt;tr&gt;\n                                        &lt;td&gt;&lt;%= booking.user.first_name %&gt; &lt;%#= booking.user.last_name %&gt;&lt;/td&gt;\n                                        &lt;td&gt;&lt;%= booking.showing.film.title %&gt;&lt;/td&gt;\n                                        &lt;td&gt;&lt;%= booking.showing.show_date %&gt;&lt;/td&gt;\n                                        &lt;td&gt;&lt;%= booking.showing.show_time.strftime(\"%H:%M\") %&gt;&lt;/td&gt;\n                                        &lt;td&gt;&lt;/td&gt;\n                                        &lt;td&gt;&lt;%= booking.seat.row_letter %&gt;&lt;%= booking.seat.number %&gt;&lt;/td&gt;\n                                        &lt;td style=\"padding-right:65px\"&gt;\n                                            &lt;%#= link_to 'Edit', edit_user_path(user) %&gt;  \n                                            &lt;%#= link_to 'Show', user_path(user) %&gt;  \n                                            &lt;%#= link_to 'Destroy', user_path(user), method: :delete, data: { confirm: 'Are you sure?' } %&gt;\n                                        &lt;/td&gt;\n                                    &lt;/tr&gt;\n                                &lt;% end %&gt;\n</code></pre>\n\n<p>The <code>booking.showing.film.title</code> and the code below that works but with the <code>booking.user.first_name</code> I get the error:</p>\n\n<pre><code>NoMethodError in Bookings#index     \nundefined method `first_name' for nil:NilClass\n</code></pre>\n\n<p>But my models I think are set up correctly, user.rb:</p>\n\n<pre><code>has_many :bookings\n</code></pre>\n\n<p>bookings.rb:</p>\n\n<pre><code>belongs_to :user\n</code></pre>\n\n<p>bookings_controller:</p>\n\n<pre><code>class BookingsController &lt; ApplicationController\n  before_action :set_booking, only: [:show, :edit, :update, :destroy]\n\n  # GET /bookings\n  # GET /bookings.json\n  def index\n    @bookings = Booking.all\n  end\n\n  # GET /bookings/1\n  # GET /bookings/1.json\n  def show\n  end\n\n  # GET /bookings/new\n  def new\n    @booking = Booking.new\n  end\n\n  # GET /bookings/1/edit\n  def edit\n  end\n\n  # POST /bookings\n  # POST /bookings.json\n  def create\n    @booking = Booking.new(booking_params)\n\n    respond_to do |format|\n      if @booking.save\n        format.html { redirect_to @booking, notice: 'Booking was successfully created.' }\n        format.json { render :show, status: :created, location: @booking }\n      else\n        format.html { render :new }\n        format.json { render json: @booking.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /bookings/1\n  # PATCH/PUT /bookings/1.json\n  def update\n     respond_to do |format|\n      if @booking.update(booking_params)\n        format.html { redirect_to @booking, notice: 'Booking was successfully updated.' }\n        format.json { render :show, status: :ok, location: @booking }\n      else\n        format.html { render :edit }\n        format.json { render json: @booking.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /bookings/1\n  # DELETE /bookings/1.json\n  def destroy\n     @booking.destroy\n    respond_to do |format|\n      format.html { redirect_to bookings_url, notice: 'Booking was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_booking\n      @booking = Booking.find(params[:id])\n    end\n\n   # Never trust parameters from the scary internet, only allow the white list through.\n    def booking_params\n      params.require(:booking).permit(:showing_id, :user_id, :seat_id)\n    end\nend\n</code></pre>\n\n<p>Am I missing something? The attribute names and table names are correct.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "routing"], "comments": [{"owner": {"reputation": 4349, "user_id": 648392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b2bd8a8c583866711c234a612f6b157?s=128&d=identicon&r=PG", "display_name": "Jesper", "link": "https://stackoverflow.com/users/648392/jesper"}, "edited": false, "score": 0, "creation_date": 1424273737, "post_id": 28586774, "comment_id": 45481855, "body": "The generated route is a <code>GET</code> yet you&#39;re performing a <code>POST</code>. I see you attempt to create a <code>POST</code> in <code>routes.rb</code>, can&#39;t figure out why that doesn&#39;t work."}, {"owner": {"reputation": 4349, "user_id": 648392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b2bd8a8c583866711c234a612f6b157?s=128&d=identicon&r=PG", "display_name": "Jesper", "link": "https://stackoverflow.com/users/648392/jesper"}, "edited": false, "score": 0, "creation_date": 1424274285, "post_id": 28586774, "comment_id": 45482242, "body": "I just pasted your routes into a local rails app and the correct route, a <code>POST</code>. Which version of Rails and versionist are you using?"}, {"owner": {"reputation": 1226, "user_id": 1542969, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/d501778a83b20ae04e862e0af57a157d?s=128&d=identicon&r=PG", "display_name": "Brad Rice", "link": "https://stackoverflow.com/users/1542969/brad-rice"}, "reply_to_user": {"reputation": 4349, "user_id": 648392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b2bd8a8c583866711c234a612f6b157?s=128&d=identicon&r=PG", "display_name": "Jesper", "link": "https://stackoverflow.com/users/648392/jesper"}, "edited": false, "score": 0, "creation_date": 1424280487, "post_id": 28586774, "comment_id": 45486544, "body": "@Jesper sorry, I had bounced back and forth between <code>GET</code> and <code>POST</code> to see if that was the issue. On my system, it is a <code>POST</code> request across the board. I get the aforementioned failure when the request is actually set up correctly."}, {"owner": {"reputation": 1226, "user_id": 1542969, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/d501778a83b20ae04e862e0af57a157d?s=128&d=identicon&r=PG", "display_name": "Brad Rice", "link": "https://stackoverflow.com/users/1542969/brad-rice"}, "reply_to_user": {"reputation": 4349, "user_id": 648392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b2bd8a8c583866711c234a612f6b157?s=128&d=identicon&r=PG", "display_name": "Jesper", "link": "https://stackoverflow.com/users/648392/jesper"}, "edited": false, "score": 0, "creation_date": 1424280538, "post_id": 28586774, "comment_id": 45486582, "body": "@Jesper I&#39;m running versionist v1.3.0, rspec-rails v2.99.0, and rails v3.2.13"}, {"owner": {"reputation": 26839, "user_id": 1008891, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/BbcgE.jpg?s=128&g=1", "display_name": "Peter Alfvin", "link": "https://stackoverflow.com/users/1008891/peter-alfvin"}, "edited": false, "score": 0, "creation_date": 1424297295, "post_id": 28586774, "comment_id": 45496390, "body": "If you&#39;re saying that rake routes actually shows a POST route, you really should update the body of your question."}, {"owner": {"reputation": 1226, "user_id": 1542969, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/d501778a83b20ae04e862e0af57a157d?s=128&d=identicon&r=PG", "display_name": "Brad Rice", "link": "https://stackoverflow.com/users/1542969/brad-rice"}, "reply_to_user": {"reputation": 26839, "user_id": 1008891, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/BbcgE.jpg?s=128&g=1", "display_name": "Peter Alfvin", "link": "https://stackoverflow.com/users/1008891/peter-alfvin"}, "edited": false, "score": 0, "creation_date": 1424300580, "post_id": 28586774, "comment_id": 45497922, "body": "@PeterAlfvin I missed that one as well. Fixing now."}], "answers": [{"comments": [{"owner": {"reputation": 1226, "user_id": 1542969, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/d501778a83b20ae04e862e0af57a157d?s=128&d=identicon&r=PG", "display_name": "Brad Rice", "link": "https://stackoverflow.com/users/1542969/brad-rice"}, "edited": false, "score": 0, "creation_date": 1424353035, "post_id": 28601073, "comment_id": 45519556, "body": "That was it. For some reason Rails 3 doesn&#39;t complain about the missing namespace. I eventually gave up and moved on to writing controller specs and began having other problems there that led me to creating the directory and all necessary rework. Then I saw my routing spec working. Thanks for all the help!"}], "tags": [], "owner": {"reputation": 4349, "user_id": 648392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b2bd8a8c583866711c234a612f6b157?s=128&d=identicon&r=PG", "display_name": "Jesper", "link": "https://stackoverflow.com/users/648392/jesper"}, "is_accepted": true, "score": 2, "last_activity_date": 1424340190, "last_edit_date": 1592644375, "creation_date": 1424332314, "answer_id": 28601073, "question_id": 28586774, "link": "https://stackoverflow.com/questions/28586774/rspec-routing-specs-fail-when-route-does-exist/28601073#28601073", "title": "Rspec routing specs fail when route DOES exist", "body": "<p>By running your spec (albeit in Rails 4), I got this error:</p>\n<pre><code>Failure/Error: expect(post: '/v1/nphase/device_service/get_device_information').to route_to(\n       A route matches &quot;/v1/nphase/device_service/get_device_information&quot;, but references missing controller: Api::V1::Nphase::DeviceServiceController\n     # ./spec/controller_spec.rb:5:in `block (2 levels) in &lt;top (required)&gt;'\n</code></pre>\n<p>This tells us that your controller isn't in the <code>Nphase</code> module.</p>\n<p>By using <code>namespace</code>, you're telling Rails to search for the controller in particular module.</p>\n<p>So either put the controller in the correct module (and change the directory structure accordingly), or tell rails to look for the controller in the correct place (from <a href=\"http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing\" rel=\"nofollow noreferrer\">the Rails guides</a>):</p>\n<blockquote>\n<p>If you want to route /admin/articles to ArticlesController (without the Admin:: module prefix), you could use:</p>\n<pre><code> scope '/admin' do\n   resources :articles, :comments\n end\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 1226, "user_id": 1542969, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/d501778a83b20ae04e862e0af57a157d?s=128&d=identicon&r=PG", "display_name": "Brad Rice", "link": "https://stackoverflow.com/users/1542969/brad-rice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1766, "favorite_count": 0, "accepted_answer_id": 28601073, "answer_count": 1, "score": 0, "last_activity_date": 1424340190, "creation_date": 1424271847, "last_edit_date": 1495541189, "question_id": 28586774, "link": "https://stackoverflow.com/questions/28586774/rspec-routing-specs-fail-when-route-does-exist", "title": "Rspec routing specs fail when route DOES exist", "body": "<p>I'm trying to test the routing of a namespaced Rails controller action, and something isn't set up correctly.</p>\n\n<p>I've already looked at the following issues, none of them even seemed to answer the questions at hand, much less give me an answer to my issue:</p>\n\n<ul>\n<li><a href=\"https://github.com/rspec/rspec-rails/issues/169\" rel=\"nofollow noreferrer\">https://github.com/rspec/rspec-rails/issues/169</a></li>\n<li><a href=\"https://github.com/rspec/rspec-rails/issues/575\" rel=\"nofollow noreferrer\">https://github.com/rspec/rspec-rails/issues/575</a></li>\n<li><a href=\"https://stackoverflow.com/questions/9610677/rspec-namespaced-route-specs-failing-even-though-route-exists\">Rspec namespaced route specs failing even though route exists</a></li>\n</ul>\n\n<p>It's not so much that I'm passing incorrect parameters to the action, it's that the route doesn't match at all when in the context of this test. What am I missing here?</p>\n\n<p>config/routes.rb (using versionist gem):</p>\n\n<pre><code>...\napi_version(module: 'api/v1', path: {value: 'v1'}) do\n  namespace :nphase do\n    resource :device_service, controller: 'device_service', only: :none, format: :json do\n      collection do\n        post :get_device_information\n      end\n    end\n  end\nend\n...\n</code></pre>\n\n<p>app/controllers/api/v1/device_service_controller.rb:</p>\n\n<pre><code>module Api                                               \n  module V1                                              \n\n    class DeviceServiceController &lt; ApplicationController\n      respond_to :json                                   \n\n      def get_device_information                       \n        respond_with json: {\"success\" =&gt; true}           \n      end                                                \n    end                                                  \n\n  end                                                    \nend                                                      \n</code></pre>\n\n<p>output of <code>rake routes |grep nphase</code>:</p>\n\n<pre><code>get_device_information_v1_nphase_device_service POST    /v1/nphase/device_service/get_device_information(.:format) api/v1/nphase/device_service#get_device_information {:format=&gt;:json}\n</code></pre>\n\n<p>spec/routing/api/v1/device_service_routing_spec.rb:</p>\n\n<pre><code>require 'spec_helper'\n\ndescribe 'routes for DeviceService' do\n  it 'routes correctly' do\n    expect(post('/v1/nphase/device_service/get_device_information')).to route_to(\n      controller: 'api/v1/device_service',\n      action: 'get_device_information'\n    )\n  end\nend\n</code></pre>\n\n<p>Test failure:</p>\n\n<pre><code>Failure/Error: expect(post('/v1/nphase/device_service/get_device_information')).to route_to(\n  No route matches \"/v1/nphase/device_service/get_device_information\"\n</code></pre>\n"}, {"tags": ["ruby", "metaprogramming", "singleton-methods"], "comments": [{"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1424294074, "post_id": 28586569, "comment_id": 45494646, "body": "Can you justify why you&#39;re using this confusing structure? I can think of no reason why defining a singleton method on a module would result in an instance method being defined in the enclosing module. If we know the use case, we might be able to show you a more idiomatic approach."}, {"owner": {"reputation": 90, "user_id": 3697429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2271dab6ccfa163e1a088a073100f87?s=128&d=identicon&r=PG&f=1", "display_name": "coxy", "link": "https://stackoverflow.com/users/3697429/coxy"}, "reply_to_user": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1424296894, "post_id": 28586569, "comment_id": 45496194, "body": "It&#39;s an experiment and a purely syntactical one as a way to group or add extra functionality to certain methods. I appreciate a more idiomatic way might be to use a class method something like <code>special_method :baz</code> etc but I was just exploring an alternative approach. A possible application might be to memoize a method in this way, i.e. <code>def memoize.baz</code> but I agree it&#39;s confusing and probably not something I&#39;d use in a real project. I&#39;d still be interested in knowing if it&#39;s possible though."}], "answers": [{"comments": [{"owner": {"reputation": 90, "user_id": 3697429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2271dab6ccfa163e1a088a073100f87?s=128&d=identicon&r=PG&f=1", "display_name": "coxy", "link": "https://stackoverflow.com/users/3697429/coxy"}, "edited": false, "score": 0, "creation_date": 1424287857, "post_id": 28587867, "comment_id": 45490971, "body": "Thanks J&#246;rg. Maybe it&#39;s not possible then. Though I did get closer (I think) - I&#39;ve updated the example. The <code>instance_exec</code> method does call the <code>baz</code> method (tested with puts statements) but it&#39;s not printing the value of <code>@bar</code>"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1424378013, "post_id": 28587867, "comment_id": 45535716, "body": "It is possible to work around this using anonymous modules in place of <code>A::Singletons</code>, but even then you run into the error mentioned in my answer."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 0, "last_activity_date": 1424274810, "creation_date": 1424274810, "answer_id": 28587867, "question_id": 28586569, "link": "https://stackoverflow.com/questions/28586569/ruby-execute-singleton-method-in-different-context/28587867#28587867", "title": "Ruby: execute singleton method in different context", "body": "<p>I don't think this is possible. <code>A::Singletons</code> is, ironically, itself a singleton (in the sense of the Singleton Pattern), and so, since there is only one single <code>A::Singletons</code> in the system, but <code>A</code> may be <code>include</code>ded in many different modules, there is no way of knowing in <em>which</em> module to add the method.</p>\n"}, {"tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": true, "score": 0, "last_activity_date": 1424377947, "creation_date": 1424377947, "answer_id": 28616313, "question_id": 28586569, "link": "https://stackoverflow.com/questions/28586569/ruby-execute-singleton-method-in-different-context/28616313#28616313", "title": "Ruby: execute singleton method in different context", "body": "<p>This is not possible. In fact Ruby has a specific error for when you try to do so:</p>\n\n<pre><code>module Foo\n  def self.bar\n  end\nend\n\nclass Baz\nend\n\nFoo.method(:bar).unbind.bind(Baz.new)\n# TypeError: singleton method called for a different object\n</code></pre>\n\n<p>This really is an artificial restriction, since <code>UnboundMethod#bind</code> could easily just skip the type check and let you do it. But it would be a fundamental contradiction if you could call a singleton method with a different receiver: a singleton method is defined for a <strong>single</strong> instance. It makes sense that this isn't allowed.</p>\n"}], "owner": {"reputation": 90, "user_id": 3697429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2271dab6ccfa163e1a088a073100f87?s=128&d=identicon&r=PG&f=1", "display_name": "coxy", "link": "https://stackoverflow.com/users/3697429/coxy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 1, "accepted_answer_id": 28616313, "answer_count": 2, "score": 2, "last_activity_date": 1424377947, "creation_date": 1424271300, "last_edit_date": 1424299151, "question_id": 28586569, "link": "https://stackoverflow.com/questions/28586569/ruby-execute-singleton-method-in-different-context", "title": "Ruby: execute singleton method in different context", "body": "<p><strong>(edited to make question more specific)</strong></p>\n\n<p>I would like to know if it's possible to execute a singleton method in the context of another object as in the following example:</p>\n\n<pre><code>class A\n  def initialize\n    @foo = 'foo'\n  end\nend\n\ndef A.singleton(*args)\n  puts 'in singleton'\n  puts @foo\nend\n\nA.new.instance_eval &amp;A.method(:singleton)\n\n# output is:\n# - in singleton\n\n# desired output:\n# - in singleton\n# - foo\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 54, "user_id": 4440835, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9845b042951b9c1f6cff1cdda8e0d9b2?s=128&d=identicon&r=PG&f=1", "display_name": "Yui", "link": "https://stackoverflow.com/users/4440835/yui"}, "edited": false, "score": 0, "creation_date": 1424272565, "post_id": 28586641, "comment_id": 45481039, "body": "With instance variables you can&#39;t run into trouble then. Because with locale variables on a view you are not able to get access to them anymore, right? So why are there still locale variables in Ruby? You can use instance variables for everything..."}, {"owner": {"reputation": 968, "user_id": 132048, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1e326ae7b416d9e62198c11a40d00817?s=128&d=identicon&r=PG", "display_name": "Michael Lang", "link": "https://stackoverflow.com/users/132048/michael-lang"}, "edited": false, "score": 0, "creation_date": 1424274777, "post_id": 28586641, "comment_id": 45482610, "body": "Using instance vars is akin to using global vars.  By electing to use local vars, you&#39;re controlling the scope of when that variable is available whereas instance variables broadens the scope of where that variable is accessible (and changeable).  The broader the scope of the var, the more likely you are to have undesirable/undetected side-effects in your code that is hard to track down.  You can potentially be combing through a few thousand lines of code to find the issue.  So think about your solutions and choose the right scope for your variables to keep your debugging effort to a minimum."}], "tags": [], "owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "is_accepted": false, "score": 1, "last_activity_date": 1424271490, "creation_date": 1424271490, "answer_id": 28586641, "question_id": 28586542, "link": "https://stackoverflow.com/questions/28586542/ruby-why-is-it-possible-to-use-instance-variables-like-everywhere/28586641#28586641", "title": "Ruby - Why is it possible to use Instance variables like everywhere", "body": "<p>Best use case for instance variables is in <code>Controller</code>'s when you want to pass parameter to the <code>view</code>.</p>\n\n<p>Then you use something like</p>\n\n<pre><code>class TestController &lt; ActionController::Base\n  def show\n    @usable_in_view = Test.first\n    not_usable_in_view = Test.first\n  end\nend\n</code></pre>\n\n<p>In your <code>view</code> you can now use <code>@usable_in_view</code>, but cant use variable <code>not_usable_in_view</code>. Most people always use <code>instance variable</code> in controllers even if they do not need them in view, because they do not understand why they need <code>instance variable</code></p>\n"}, {"comments": [{"owner": {"reputation": 54, "user_id": 4440835, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9845b042951b9c1f6cff1cdda8e0d9b2?s=128&d=identicon&r=PG&f=1", "display_name": "Yui", "link": "https://stackoverflow.com/users/4440835/yui"}, "edited": false, "score": 0, "creation_date": 1424272395, "post_id": 28586750, "comment_id": 45480942, "body": "This example is indeed clear for me. I know how to create Objects in Ruby and also know the &quot;major&quot; use of instance-variables. My Question above was more about... why is it possible to use &quot;instance variables&quot; like everywhere in Ruby? You can easily use instance variables only instead of using locale variables. So this fact make the use of locale variables irrelevant for me."}], "tags": [], "owner": {"reputation": 1358, "user_id": 2385217, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/bd10572a2009c613bef5244ee24c5a8f?s=128&d=identicon&r=PG&f=1", "display_name": "sansarp", "link": "https://stackoverflow.com/users/2385217/sansarp"}, "is_accepted": false, "score": 0, "last_activity_date": 1424272701, "last_edit_date": 1424272701, "creation_date": 1424271776, "answer_id": 28586750, "question_id": 28586542, "link": "https://stackoverflow.com/questions/28586542/ruby-why-is-it-possible-to-use-instance-variables-like-everywhere/28586750#28586750", "title": "Ruby - Why is it possible to use Instance variables like everywhere", "body": "<p>Instance variables are used so that they can be accessed in the view page.\nLocal variables are not accessible in the view. It has become the habit even I sometimes write instance variables though it is not required in the view.:-)</p>\n"}, {"tags": [], "owner": {"reputation": 2231, "user_id": 1238868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b9884f1eabc8587f2c9dfd2b1ccf9a6?s=128&d=identicon&r=PG", "display_name": "Michael Chaney", "link": "https://stackoverflow.com/users/1238868/michael-chaney"}, "is_accepted": false, "score": 0, "last_activity_date": 1424273143, "creation_date": 1424273143, "answer_id": 28587220, "question_id": 28586542, "link": "https://stackoverflow.com/questions/28586542/ruby-why-is-it-possible-to-use-instance-variables-like-everywhere/28587220#28587220", "title": "Ruby - Why is it possible to use Instance variables like everywhere", "body": "<p>People probably get in the [bad] habit of using instance variables everywhere since it's common in Rails to use them to get information from the controller to the view.</p>\n\n<p>In my own Ruby code I use instance variables only when I need to, local variables otherwise.  That's the proper way to use Ruby.</p>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 4, "last_activity_date": 1424273796, "creation_date": 1424273796, "answer_id": 28587454, "question_id": 28586542, "link": "https://stackoverflow.com/questions/28586542/ruby-why-is-it-possible-to-use-instance-variables-like-everywhere/28587454#28587454", "title": "Ruby - Why is it possible to use Instance variables like everywhere", "body": "<blockquote>\n  <p>I was wondering why people always use <strong>instance variables</strong> instead of <strong>locale ones</strong>.</p>\n</blockquote>\n\n<p>I'm not sure how you get that impression. I certainly don't \"always\" use instance variables. I use instance variables when I need an instance variable, and I use local variables, when I need a local variable, and most code I see does it the same way.</p>\n\n<p>Usually, it doesn't even make sense to interchange them. They have completely different purpose: local variables have static lexical scope, instance variables have dynamic object scope. There's pretty much no way to interchange them, except for the very narrow case of a simple single-file procedural script, where the dynamic scope of the top-level <code>main</code> object and the lexical scope of the script body are identical.</p>\n\n<blockquote>\n  <p>I always thought that you would use <strong>instance variables</strong> only for classes (so these <strong>instance variables</strong> are the attributes of the class).</p>\n</blockquote>\n\n<p>No. Instance variables are attributes of the <em>instance</em> (i.e. <em>object</em>), not the class, that's why they are called \"instance variables\", after all. Class variables are attributes of the class, but class variables are a different beast and only used in very specific circumstances. (Classes are objects (i.e. instances), too, so they can have instance variables as well; there's generally no need to use class variables, which have some weird and un-intuitive properties, unless you specifically <em>need</em> those weird and un-intuitive properties).</p>\n\n<blockquote>\n  <p>For instance, take a look on this short codelines:</p>\n\n<pre><code>class Foo \n  def print_a_hello\n    puts \"Hello World\"\n  end\nend\n\n@instance_variable = Foo.new\n@instance_variable.print_a_hello\n# =&gt; \"Hello World\"\n\nlocale_variable = Foo.new\nlocale_variable.print_a_hello\n# =&gt; \"Hello World\"\n</code></pre>\n</blockquote>\n\n<p>This is the case I mentioned above: in <em>this</em> specific case (and <em>only</em> in this case), the dynamic scope of the top-level <code>main</code> object and the static lexical scope of the script body are identical, so it doesn't matter whether you use a local variable of the script body or an instance variable of the <code>main</code> object.</p>\n\n<p>However, if we make just a tiny change to that, by adding a second script and <code>require</code>ing it from the first, that condition will no longer hold, because we now have two separate script bodies and thus two separate script scopes, but still only one top-level object.</p>\n\n<p>The idiomatic way in your example would definitely be to use a local variable, and nobody I know would do otherwise.</p>\n"}], "owner": {"reputation": 54, "user_id": 4440835, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9845b042951b9c1f6cff1cdda8e0d9b2?s=128&d=identicon&r=PG&f=1", "display_name": "Yui", "link": "https://stackoverflow.com/users/4440835/yui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 514, "favorite_count": 0, "accepted_answer_id": 28587454, "answer_count": 4, "score": 0, "last_activity_date": 1424283046, "creation_date": 1424271201, "last_edit_date": 1424283046, "question_id": 28586542, "link": "https://stackoverflow.com/questions/28586542/ruby-why-is-it-possible-to-use-instance-variables-like-everywhere", "title": "Ruby - Why is it possible to use Instance variables like everywhere", "body": "<p>I'm into Ruby on Rails programming for almost 5 weeks now.</p>\n\n<p>I was wondering why people always use <strong>instance variables</strong> instead of <strong>local ones</strong>.</p>\n\n<p>I always thought that you would use <strong>instance variables</strong> only for classes (so these <strong>instance variables</strong> are the attributes of the class).</p>\n\n<p>But people also use them not only for being <strong>attributes</strong> of a class. And this is the part where I am getting confused.</p>\n\n<p>For instance, take a look at these lines of codes:</p>\n\n<pre><code>class Foo \n    def print_a_hello\n        puts \"Hello World\"\n    end\nend\n\n@instance_variable = Foo.new\n@instance_variable.print_a_hello\n# =&gt; \"Hello World\"\n\nlocale_variable = Foo.new\nlocale_variable.print_a_hello\n# =&gt; \"Hello World\"\n</code></pre>\n\n<p>So, who of you got a great explanation for me?</p>\n"}, {"tags": ["ruby", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 1061, "user_id": 1371731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a269243b41197bff635a3d9f83de6ef4?s=128&d=identicon&r=PG", "display_name": "xoryves", "link": "https://stackoverflow.com/users/1371731/xoryves"}, "is_accepted": true, "score": 1, "last_activity_date": 1432203600, "creation_date": 1432203600, "answer_id": 30370931, "question_id": 28586390, "link": "https://stackoverflow.com/questions/28586390/can-you-add-remove-required-rubygems-programmatically-in-ruby-or-as-a-command-li/30370931#30370931", "title": "Can you add/remove required RubyGems programmatically in Ruby or as a command line arg?", "body": "<p>You can wrap your <code>require</code> statements inside an <code>if/else</code>.</p>\n\n<pre><code>if `hostname`.strip == 'local'\n    require 'ruby_ext_gem'\nelse\n    require 'ruby_native_gem'\nend\n</code></pre>\n\n<p>Or run the Ruby interpreter with the <code>-r</code> option.</p>\n\n<pre><code>ruby -rruby_ext_gem -rruby_ext_gem2 script.rb\n</code></pre>\n\n<p>Maybe <a href=\"http://bundler.io/\" rel=\"nofollow\"><code>bundler</code></a> would be what you are searching for?</p>\n\n<pre><code>#Gemfile\nsource 'https://rubygems.org'\ngroup 'local' do\n  gem 'ruby_ext_gem'\n  gem 'ruby-ldap', require: 'ldap'\nend\n\ngroup 'cloud' do\n  gem 'ruby_native_gem'\n  gem 'ruby-net-ldap', require: 'net/ldap'\nend\n\n# local\nbundle install --without cloud\n# cloud\nbundle install --without local\n\n#script.rb\n#!/usr/bin/env ruby\nrequire 'bundler/setup'\nBundler.require(`hostname`.strip)\n</code></pre>\n"}], "owner": {"reputation": 427, "user_id": 2956587, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6e5220dc3e0686e4b4773f5f88ef144c?s=128&d=identicon&r=PG", "display_name": "YoDK", "link": "https://stackoverflow.com/users/2956587/yodk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 30370931, "answer_count": 1, "score": 0, "last_activity_date": 1432203600, "creation_date": 1424270751, "question_id": 28586390, "link": "https://stackoverflow.com/questions/28586390/can-you-add-remove-required-rubygems-programmatically-in-ruby-or-as-a-command-li", "title": "Can you add/remove required RubyGems programmatically in Ruby or as a command line arg?", "body": "<p>I have a test suite that is designed to run locally and on a cloud vendor. When the test is run locally I would like to use a RubyGem that makes use of native extensions that run much faster. On the cloud vendor however, I cannot include this particular flavour of gem and must use a different one.</p>\n\n<p>Is there a way that I can, either by command line argument, or as a function in Ruby add or remove gem requirements?</p>\n"}, {"tags": ["ruby", "csv"], "comments": [{"owner": {"reputation": 4279, "user_id": 3920143, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1b47dd912eaeb6cd72a15ec2932f6751?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/3920143/joel"}, "edited": false, "score": 0, "creation_date": 1424270557, "post_id": 28586165, "comment_id": 45479812, "body": "This post might be helpful <a href=\"http://stackoverflow.com/questions/28545559/how-to-work-with-leading-zeros-in-integers\" title=\"how to work with leading zeros in integers\">stackoverflow.com/questions/28545559/&hellip;</a>"}, {"owner": {"reputation": 594, "user_id": 238428, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f02c1016c9234f052a60180146889250?s=128&d=identicon&r=PG", "display_name": "hupf", "link": "https://stackoverflow.com/users/238428/hupf"}, "reply_to_user": {"reputation": 4279, "user_id": 3920143, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1b47dd912eaeb6cd72a15ec2932f6751?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/3920143/joel"}, "edited": false, "score": 0, "creation_date": 1424271262, "post_id": 28586165, "comment_id": 45480264, "body": "Thanks, but this is actually not my problem. <code>&#39;0123&#39;</code> already is a string and I want it to be quoted as such, in contrast to <code>123</code> or <code>1.5</code> which should not be quoted."}, {"owner": {"reputation": 1089, "user_id": 3512592, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/189408ac24ce8bae9dc749c842c15037?s=128&d=identicon&r=PG&f=1", "display_name": "Devon Parsons", "link": "https://stackoverflow.com/users/3512592/devon-parsons"}, "edited": false, "score": 0, "creation_date": 1424271951, "post_id": 28586165, "comment_id": 45480657, "body": "Are you certain that your stated result is valid CSV? I cannot get it to validate at csvlint.io"}, {"owner": {"reputation": 1089, "user_id": 3512592, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/189408ac24ce8bae9dc749c842c15037?s=128&d=identicon&r=PG&f=1", "display_name": "Devon Parsons", "link": "https://stackoverflow.com/users/3512592/devon-parsons"}, "edited": false, "score": 0, "creation_date": 1424272400, "post_id": 28586165, "comment_id": 45480945, "body": "See this post for more information: <a href=\"http://superuser.com/questions/318420/formatting-a-comma-delimited-csv-to-force-excel-to-interpret-value-as-a-string\" title=\"formatting a comma delimited csv to force excel to interpret value as a string\">superuser.com/questions/318420/&hellip;</a>"}, {"owner": {"reputation": 594, "user_id": 238428, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f02c1016c9234f052a60180146889250?s=128&d=identicon&r=PG", "display_name": "hupf", "link": "https://stackoverflow.com/users/238428/hupf"}, "edited": false, "score": 0, "creation_date": 1424274037, "post_id": 28586165, "comment_id": 45482067, "body": "I saw that <a href=\"http://en.wikipedia.org/wiki/Comma-separated_values\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Comma-separated_values</a> features examples with both quoted <i>and</i> unquoted values."}], "answers": [{"comments": [{"owner": {"reputation": 594, "user_id": 238428, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f02c1016c9234f052a60180146889250?s=128&d=identicon&r=PG", "display_name": "hupf", "link": "https://stackoverflow.com/users/238428/hupf"}, "edited": false, "score": 0, "creation_date": 1424273197, "post_id": 28586886, "comment_id": 45481463, "body": "Alright, you&#39;d have to manually escape quotes in these strings then, as it could be <code>&#39;a &quot;b&quot; c&#39;</code>. And maybe also better use <code>is_a?</code> to compare the classes?"}, {"owner": {"reputation": 1089, "user_id": 3512592, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/189408ac24ce8bae9dc749c842c15037?s=128&d=identicon&r=PG&f=1", "display_name": "Devon Parsons", "link": "https://stackoverflow.com/users/3512592/devon-parsons"}, "reply_to_user": {"reputation": 594, "user_id": 238428, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f02c1016c9234f052a60180146889250?s=128&d=identicon&r=PG", "display_name": "hupf", "link": "https://stackoverflow.com/users/238428/hupf"}, "edited": false, "score": 0, "creation_date": 1424273352, "post_id": 28586886, "comment_id": 45481577, "body": "You don&#39;t need to manually escape internal quotes, csv will do it for you. And yes, <code>is_a?</code> is better for class checking, I just wasn&#39;t thinking."}, {"owner": {"reputation": 1089, "user_id": 3512592, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/189408ac24ce8bae9dc749c842c15037?s=128&d=identicon&r=PG&f=1", "display_name": "Devon Parsons", "link": "https://stackoverflow.com/users/3512592/devon-parsons"}, "reply_to_user": {"reputation": 594, "user_id": 238428, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f02c1016c9234f052a60180146889250?s=128&d=identicon&r=PG", "display_name": "hupf", "link": "https://stackoverflow.com/users/238428/hupf"}, "edited": false, "score": 0, "creation_date": 1424273402, "post_id": 28586886, "comment_id": 45481616, "body": "So to confirm, <code>csv &lt;&lt; [&#39;a &quot;b&quot; c&#39;]</code> will get imported into excel as <code>&quot;a &quot;b&quot; c&quot;</code> if you pass it through the test above"}, {"owner": {"reputation": 594, "user_id": 238428, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f02c1016c9234f052a60180146889250?s=128&d=identicon&r=PG", "display_name": "hupf", "link": "https://stackoverflow.com/users/238428/hupf"}, "edited": false, "score": 0, "creation_date": 1424274727, "post_id": 28586886, "comment_id": 45482570, "body": "There is one more problem, as I don&#39;t want to have the quotes in the Excel rows. Right now, with three quotes, the string value is displayed as <code>&quot;a&quot;</code> in the cell."}, {"owner": {"reputation": 1089, "user_id": 3512592, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/189408ac24ce8bae9dc749c842c15037?s=128&d=identicon&r=PG&f=1", "display_name": "Devon Parsons", "link": "https://stackoverflow.com/users/3512592/devon-parsons"}, "reply_to_user": {"reputation": 594, "user_id": 238428, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f02c1016c9234f052a60180146889250?s=128&d=identicon&r=PG", "display_name": "hupf", "link": "https://stackoverflow.com/users/238428/hupf"}, "edited": false, "score": 0, "creation_date": 1424275054, "post_id": 28586886, "comment_id": 45482810, "body": "You will need to specify to excel how you want to read values in, then. There is no way to encode the fact that <code>0123</code> is a string and not a number without adding characters to the CSV. The superuser post I linked to above shows you how to specify data type during file opening."}, {"owner": {"reputation": 594, "user_id": 238428, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f02c1016c9234f052a60180146889250?s=128&d=identicon&r=PG", "display_name": "hupf", "link": "https://stackoverflow.com/users/238428/hupf"}, "edited": false, "score": 0, "creation_date": 1424277109, "post_id": 28586886, "comment_id": 45484255, "body": "It would work if there&#39;s the value <code>&quot;0123&quot;</code> (only one double quote) in the CSV. Then the option &quot;Quoted field as text&quot; might be used when opening the CSV. But as it seems, this is not possible to achieve without extending the CSV generator...?"}], "tags": [], "owner": {"reputation": 1089, "user_id": 3512592, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/189408ac24ce8bae9dc749c842c15037?s=128&d=identicon&r=PG&f=1", "display_name": "Devon Parsons", "link": "https://stackoverflow.com/users/3512592/devon-parsons"}, "is_accepted": false, "score": 0, "last_activity_date": 1424272907, "last_edit_date": 1424272907, "creation_date": 1424272223, "answer_id": 28586886, "question_id": 28586165, "link": "https://stackoverflow.com/questions/28586165/only-string-not-number-quoting-when-generating-csv/28586886#28586886", "title": "Only string (not number) quoting when generating CSV", "body": "<pre><code>require 'csv'\ntest = CSV.generate do |csv|\n  csv &lt;&lt; ['a', 123, 1.5, '0123'].map{|e|e.class == String ? \"\\\"#{e}\\\"\" : e}\nend\nputs test # =&gt; \"\"\"a\"\"\",123,1.5,\"\"\"0123\"\"\"\n</code></pre>\n\n<p>This output is valid CSV and gets imported into spreadsheets as:</p>\n\n<pre><code>A1: \"a\"\nB1: 123\nC1: 1.5\nD1: \"0123\"\n</code></pre>\n\n<p>Is this what you are looking for?</p>\n\n<hr>\n\n<p>Edit: </p>\n\n<p>In case it wasn't obvious, what I'm doing here is checking each value before I pass it into the csv. If it's a string, surround it with quotes (the <code>\\\"</code> is the escaped quote) and then let CSV escape them however it needs to in order to be valid. </p>\n\n<p>Regardless of the method you are using to pass things into your csv object, you should be able to do the same check and modify the strings that way. </p>\n\n<p>Alternatively if you have access to the source data, add the surrounding quotes there.</p>\n"}], "owner": {"reputation": 594, "user_id": 238428, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f02c1016c9234f052a60180146889250?s=128&d=identicon&r=PG", "display_name": "hupf", "link": "https://stackoverflow.com/users/238428/hupf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 240, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424272907, "creation_date": 1424270032, "question_id": 28586165, "link": "https://stackoverflow.com/questions/28586165/only-string-not-number-quoting-when-generating-csv", "title": "Only string (not number) quoting when generating CSV", "body": "<p>I generate CSV data as follows:</p>\n\n<pre><code>require 'csv'\nCSV.generate do |csv|\n  csv &lt;&lt; ['a', 123, 1.5, '0123']\nend\n</code></pre>\n\n<p>This returns this result:</p>\n\n<pre><code>\"a,123,1.5,0123\\n\"\n</code></pre>\n\n<p>The problem is that Excel will interpret <code>0123</code> as integer. On the other side, when using <code>force_quotes: true</code>, the values <code>123</code> and <code>1.5</code> won't be interpreted as numbers anymore.</p>\n\n<p>How can I quote only strings, not numbers, to get the following result?</p>\n\n<pre><code>\"\\\"a\\\",123,1.5,\\\"0123\\\"\\n\"\n</code></pre>\n"}, {"tags": ["ruby", "rvm", "foreman"], "answers": [{"comments": [{"owner": {"reputation": 29994, "user_id": 252799, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/d3fe046c4a216826ec87eeab92e7d55b?s=128&d=identicon&r=PG", "display_name": "oma", "link": "https://stackoverflow.com/users/252799/oma"}, "edited": false, "score": 0, "creation_date": 1504259393, "post_id": 28602987, "comment_id": 78954997, "body": "Is this an authoritive answer? I got several small apps that work together and it&#39;s really nice to fire them up together. After having one upgraded to other ruby version, I too got this problem"}], "tags": [], "owner": {"reputation": 471, "user_id": 200237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/781bda58d641b468092d36f4abda0170?s=128&d=identicon&r=PG", "display_name": "Glenn Gillen", "link": "https://stackoverflow.com/users/200237/glenn-gillen"}, "is_accepted": false, "score": 0, "last_activity_date": 1424338873, "creation_date": 1424338873, "answer_id": 28602987, "question_id": 28586001, "link": "https://stackoverflow.com/questions/28586001/changing-ruby-versions-with-foreman/28602987#28602987", "title": "changing ruby versions with foreman", "body": "<p>Foreman is designed to run multiple processes related to a single application, not to run multiple applications. You should have a separate <code>Procfile</code> for each app, and switch into the appropriate version of ruby <em>before</em> running foreman.</p>\n"}], "owner": {"reputation": 968, "user_id": 132048, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1e326ae7b416d9e62198c11a40d00817?s=128&d=identicon&r=PG", "display_name": "Michael Lang", "link": "https://stackoverflow.com/users/132048/michael-lang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 519, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1424338873, "creation_date": 1424269523, "last_edit_date": 1424272341, "question_id": 28586001, "link": "https://stackoverflow.com/questions/28586001/changing-ruby-versions-with-foreman", "title": "changing ruby versions with foreman", "body": "<p>I need to use foreman to run multiple Rails apps, which works fine for the Rails apps that can run on same Ruby version as foreman is using.  However, I have an older Rails app that requires Ruby 1.8.6.  I've tried a few tricks already with no success:</p>\n\n<pre><code>old_web_app: /bin/bash --login -c \"cd ../2.1 &amp;&amp; rvm use 1.8.6 &amp;&amp; script/server\"\n</code></pre>\n\n<p>Error output:</p>\n\n<pre><code>06:14:03 old_web_app.1 | started with pid 36499\n06:14:03 old_web_app.1 | RVM is not a function, selecting rubies with 'rvm use ...' will not work.\n06:14:03 old_web_app.1 |\n06:14:03 old_web_app.1 | You need to change your terminal emulator preferences to allow login shell.\n06:14:03 old_web_app.1 | Sometimes it is required to use `/bin/bash --login` as the command.\n06:14:03 old_web_app.1 | Please visit https://rvm.io/integration/gnome-terminal/ for an example.\n06:14:03 old_web_app.1 |\n06:14:03 old_web_app.1 | script/server:2:in `require': cannot load such file -- script/../config/boot (LoadError)\n06:14:03 old_web_app.1 |    from script/server:2:in `&lt;main&gt;'\n06:14:03 old_web_app.1 | exited with code 1\n06:14:03 system        | sending SIGTERM to all processes\n</code></pre>\n\n<p>I also tried setting a .ruby-version file in the directory.  The \"cannot load such file\" error that follows is because the app is attempting to run on Ruby 2.x instead of 1.8.6, so I know the ruby environment isn't changing to 1.8.6 as desired.</p>\n\n<p>UPDATE:</p>\n\n<p>Looking into the \"RVM is not a function\" I learned that rvm runs in two modes and I needed to switch rvm to function mode within the script.  So, I created a run_old_web_app.sh script with the following (and updated the Procfile to call the script):</p>\n\n<pre><code>if [[ -s \"$HOME/.rvm/scripts/rvm\" ]] ; then\n  source \"$HOME/.rvm/scripts/rvm\"\nelif [[ -s \"/usr/local/rvm/scripts/rvm\" ]] ; then\n  source \"/usr/local/rvm/scripts/rvm\"\nelse\n  printf \"ERROR: An RVM installation was not found.\\n\"\nfi\n\ncd \"../2.1\"\nrvm use 1.8.6\nscript/server\n</code></pre>\n\n<p>However, this also does not work and produces the following:</p>\n\n<pre><code>07:06:55 old_web_app.1         | started with pid 38387\n07:06:56 old_web_app.1         | Using /Users/mwlang/.rvm/gems/ruby-1.8.6-p420\n07:06:56 old_web_app.1         | /Users/mwlang/.rvm/gems/ruby-1.8.6-p420@global/gems/executable-hooks-1.3.2/lib/executable-hooks/regenerate_binstubs_command.rb:89: warning: parenthesize argument(s) for future version\n07:06:56 old_web_app.1         | /Users/mwlang/.rvm/gems/ruby-2.1.2@global/gems/bundler-1.6.2/lib/bundler/rubygems_integration.rb:366: warning: parenthesize argument(s) for future version\n07:06:56 old_web_app.1         | /Users/mwlang/.rvm/gems/ruby-2.1.2@global/gems/bundler-1.6.2/lib/bundler/settings.rb:159:in `[]': odd number of arguments for Hash (ArgumentError)\n07:06:56 old_web_app.1         |    from /Users/mwlang/.rvm/gems/ruby-2.1.2@global/gems/bundler-1.6.2/lib/bundler/settings.rb:159:in `load_config'\n07:06:56 old_web_app.1         |    from /Users/mwlang/.rvm/gems/ruby-2.1.2@global/gems/bundler-1.6.2/lib/bundler/settings.rb:6:in `initialize'\n07:06:56 old_web_app.1         |    from /Users/mwlang/.rvm/gems/ruby-2.1.2@global/gems/bundler-1.6.2/lib/bundler.rb:213:in `new'\n07:06:56 old_web_app.1         |    from /Users/mwlang/.rvm/gems/ruby-2.1.2@global/gems/bundler-1.6.2/lib/bundler.rb:213:in `settings'\n07:06:56 old_web_app.1         |    from /Users/mwlang/.rvm/gems/ruby-2.1.2@global/gems/bundler-1.6.2/lib/bundler.rb:398:in `configure_gem_home_and_path'\n07:06:56 old_web_app.1         |    from /Users/mwlang/.rvm/gems/ruby-2.1.2@global/gems/bundler-1.6.2/lib/bundler.rb:90:in `configure'\n07:06:56 old_web_app.1         |    from /Users/mwlang/.rvm/gems/ruby-2.1.2@global/gems/bundler-1.6.2/lib/bundler.rb:151:in `definition'\n07:06:56 old_web_app.1         |    from /Users/mwlang/.rvm/gems/ruby-2.1.2@global/gems/bundler-1.6.2/lib/bundler.rb:116:in `setup'\n07:06:56 old_web_app.1         |    from /Users/mwlang/.rvm/gems/ruby-2.1.2@global/gems/bundler-1.6.2/lib/bundler/setup.rb:17\n07:06:56 old_web_app.1         | exited with code 1\n07:06:56 system            | sending SIGTERM to all processes\n</code></pre>\n\n<p>Running the script on command-line by itself works, but running it within foreman does not.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "multithreading", "ruby-on-rails-4", "server-sent-events"], "answers": [{"tags": [], "owner": {"reputation": 968, "user_id": 132048, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1e326ae7b416d9e62198c11a40d00817?s=128&d=identicon&r=PG", "display_name": "Michael Lang", "link": "https://stackoverflow.com/users/132048/michael-lang"}, "is_accepted": true, "score": 0, "last_activity_date": 1424271145, "creation_date": 1424271145, "answer_id": 28586518, "question_id": 28585997, "link": "https://stackoverflow.com/questions/28585997/rails-sse-active-passive-waiting/28586518#28586518", "title": "Rails SSE active / passive waiting", "body": "<p>A more common term and approach for what you're attempting to do is called \"comet\" or long polling.  SSE is HTML5 specific and thus newer.  I'm not sure if there's a Rails solution using SSE, yet, but Goliath (built on top of EventMachine) allows you to easily implement SSE if a non-Rails solution is an option for you.  Here's a fairly complete tutorial for doing so:</p>\n\n<p><a href=\"https://www.igvita.com/2011/08/26/server-sent-event-notifications-with-html5/\" rel=\"nofollow\">https://www.igvita.com/2011/08/26/server-sent-event-notifications-with-html5/</a></p>\n\n<p>If you want to use Rails and a Comet solution, two projects I know about are the orbited gem (<a href=\"https://github.com/mallio/orbited\" rel=\"nofollow\">https://github.com/mallio/orbited</a>) and Faye (<a href=\"http://faye.jcoglan.com/ruby.html\" rel=\"nofollow\">http://faye.jcoglan.com/ruby.html</a>).</p>\n\n<p>Speaking specifically to your question about the app stops working, this is because you're only running one process and the app only handles one connection at a time in development environments.  The aforementioned gems alleviate this by using messaging servers to manage the open connections, returning control back to the Rails app (so it's no longer blocking).  In production, you could just fire up 10, 20 workers under Apache/Nginx, but this limits you to exactly that many connections.</p>\n"}], "owner": {"reputation": 547, "user_id": 1282137, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ef0086da3762db8b3175c2667c96b225?s=128&d=identicon&r=PG", "display_name": "Adrian Deja", "link": "https://stackoverflow.com/users/1282137/adrian-deja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 28586518, "answer_count": 1, "score": 1, "last_activity_date": 1424292998, "creation_date": 1424269516, "last_edit_date": 1424292998, "question_id": 28585997, "link": "https://stackoverflow.com/questions/28585997/rails-sse-active-passive-waiting", "title": "Rails SSE active / passive waiting", "body": "<p>I'm writing application in ruby and rails. I'm trying to use SSE for notifications for user. All works but i want to do passive waiting on HTTP connection and have no idea how. I think each request is processed on same thread and that's why, when i open connection and wait for messages, application stops working because server wait on another request. How can i do it? One way it to do some king of passive waiting and another is to process each request on other thread. Any idea how to solve this problem?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json"], "answers": [{"comments": [{"owner": {"reputation": 12768, "user_id": 695749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/vV72v.jpg?s=128&g=1", "display_name": "Michael Giovanni Pumo", "link": "https://stackoverflow.com/users/695749/michael-giovanni-pumo"}, "edited": false, "score": 0, "creation_date": 1424268735, "post_id": 28585543, "comment_id": 45478593, "body": "Wow, it&#39;s that easy! Brilliant."}], "tags": [], "owner": {"reputation": 9254, "user_id": 625365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ab819ffb4ef53da36f840e46dd72e967?s=128&d=identicon&r=PG", "display_name": "spike", "link": "https://stackoverflow.com/users/625365/spike"}, "is_accepted": true, "score": 5, "last_activity_date": 1424275713, "last_edit_date": 1424275713, "creation_date": 1424268225, "answer_id": 28585543, "question_id": 28585478, "link": "https://stackoverflow.com/questions/28585478/ruby-how-do-i-sort-an-array-based-on-the-value-of-nested-hash-items/28585543#28585543", "title": "Ruby - How do I sort an array based on the value of nested hash items?", "body": "<p>You're looking for <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-sort_by\" rel=\"nofollow\">Enumerable#sort_by</a>.</p>\n\n<pre><code>instruments.sort_by { |x| x[\"title\"] }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 213, "user_id": 4046996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00bc2b05af3b81eaf361b6acc5cb4a51?s=128&d=identicon&r=PG&f=1", "display_name": "Khanad", "link": "https://stackoverflow.com/users/4046996/khanad"}, "is_accepted": false, "score": 0, "last_activity_date": 1424269406, "creation_date": 1424269406, "answer_id": 28585952, "question_id": 28585478, "link": "https://stackoverflow.com/questions/28585478/ruby-how-do-i-sort-an-array-based-on-the-value-of-nested-hash-items/28585952#28585952", "title": "Ruby - How do I sort an array based on the value of nested hash items?", "body": "<p>You can use the ruby sort_by method (<a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-sort_by\" rel=\"nofollow\">http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-sort_by</a>)</p>\n\n<p>So in your case where the instruments look like this:</p>\n\n<pre><code>instruments=[\n{\"id\"=&gt;1,\"title\"=&gt;\"Piano\",\"token\"=&gt;\"piano\",\"count\"=&gt;13},\n{\"id\"=&gt;6,\"title\"=&gt;\"Bass Guitar\",\"token\"=&gt;\"bass\",\"count\"=&gt;12},\n{\"id\"=&gt;11,\"title\"=&gt;\"Viola\",\"token\"=&gt;\"viola\",\"count\"=&gt;12},\n{\"id\"=&gt;4,\"title\"=&gt;\"Synth\",\"token\"=&gt;\"synth\",\"count\"=&gt;11},\n{\"id\"=&gt;3,\"title\"=&gt;\"Keyboard\",\"token\"=&gt;\"keyboard\",\"count\"=&gt;9},\n{\"id\"=&gt;7,\"title\"=&gt;\"Saxophone\",\"token\"=&gt;\"saxophone\",\"count\"=&gt;8},\n{\"id\"=&gt;12,\"title\"=&gt;\"Flute\",\"token\"=&gt;\"flute\",\"count\"=&gt;8},\n{\"id\"=&gt;5,\"title\"=&gt;\"Drums\",\"token\"=&gt;\"drums\",\"count\"=&gt;6},\n{\"id\"=&gt;2,\"title\"=&gt;\"Guitar\",\"token\"=&gt;\"guitar\",\"count\"=&gt;5},\n{\"id\"=&gt;8,\"title\"=&gt;\"Violin\",\"token\"=&gt;\"violin\",\"count\"=&gt;5},\n{\"id\"=&gt;9,\"title\"=&gt;\"Vocals\",\"token\"=&gt;\"vocals\",\"count\"=&gt;4},\n{\"id\"=&gt;10,\"title\"=&gt;\"Cello\",\"token\"=&gt;\"cello\",\"count\"=&gt;4}\n]\n</code></pre>\n\n<p>You can use this to sort by the given column (\"title\" in your case)</p>\n\n<pre><code> instruments.sort_by{|instrument| instrument[\"title\"]}\n</code></pre>\n\n<p>Hope this Helps.</p>\n"}, {"tags": [], "owner": {"reputation": 6001, "user_id": 451544, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/y1dRE.jpg?s=128&g=1", "display_name": "Snips", "link": "https://stackoverflow.com/users/451544/snips"}, "is_accepted": false, "score": 0, "last_activity_date": 1613306221, "last_edit_date": 1613306221, "creation_date": 1578493756, "answer_id": 59647997, "question_id": 28585478, "link": "https://stackoverflow.com/questions/28585478/ruby-how-do-i-sort-an-array-based-on-the-value-of-nested-hash-items/59647997#59647997", "title": "Ruby - How do I sort an array based on the value of nested hash items?", "body": "<p>In case it helps anyone following on, my JSON is doubly-nested</p>\n<pre><code>products = [\n{:product=&gt;{:id=&gt;866468155, :code=&gt;&quot;TB2&quot;, :name=&gt;&quot;Thunderbird 2&quot;}},\n{:product=&gt;{:id=&gt;805953484, :code=&gt;&quot;FAB1&quot;, :name=&gt;&quot;Rolls-Royce FAB 1&quot;}},\n{:product=&gt;{:id=&gt;715919491, :code=&gt;&quot;TB1&quot;, :name=&gt;&quot;Thunderbird 1&quot;}},\n{:product=&gt;{:id=&gt;767677594, :code=&gt;&quot;TB5&quot;, :name=&gt;&quot;Thunderbird 5&quot;}},\n]\n</code></pre>\n<p>And I was able to sort by name using,</p>\n<pre><code>table.sort_by! { |x| x[:product][:name]}\n</code></pre>\n<p>...note this also uses ! to sort in place, rather than creating a new Array.</p>\n"}], "owner": {"reputation": 12768, "user_id": 695749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/vV72v.jpg?s=128&g=1", "display_name": "Michael Giovanni Pumo", "link": "https://stackoverflow.com/users/695749/michael-giovanni-pumo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2105, "favorite_count": 0, "accepted_answer_id": 28585543, "answer_count": 3, "score": 2, "last_activity_date": 1613306221, "creation_date": 1424268006, "question_id": 28585478, "link": "https://stackoverflow.com/questions/28585478/ruby-how-do-i-sort-an-array-based-on-the-value-of-nested-hash-items", "title": "Ruby - How do I sort an array based on the value of nested hash items?", "body": "<p>I have some rather complex sorting to do.</p>\n\n<p>Given an array of hashes, I need to sort the hashes within the array, based on a value in a key of each hash. </p>\n\n<p>For example (given in JSON format):</p>\n\n<pre><code>\"instruments\":[\n{\"id\":1,\"title\":\"Piano\",\"token\":\"piano\",\"count\":13},\n{\"id\":6,\"title\":\"Bass Guitar\",\"token\":\"bass\",\"count\":12},\n{\"id\":11,\"title\":\"Viola\",\"token\":\"viola\",\"count\":12},\n{\"id\":4,\"title\":\"Synth\",\"token\":\"synth\",\"count\":11},\n{\"id\":3,\"title\":\"Keyboard\",\"token\":\"keyboard\",\"count\":9},\n{\"id\":7,\"title\":\"Saxophone\",\"token\":\"saxophone\",\"count\":8},\n{\"id\":12,\"title\":\"Flute\",\"token\":\"flute\",\"count\":8},\n{\"id\":5,\"title\":\"Drums\",\"token\":\"drums\",\"count\":6},\n{\"id\":2,\"title\":\"Guitar\",\"token\":\"guitar\",\"count\":5},\n{\"id\":8,\"title\":\"Violin\",\"token\":\"violin\",\"count\":5},\n{\"id\":9,\"title\":\"Vocals\",\"token\":\"vocals\",\"count\":4},\n{\"id\":10,\"title\":\"Cello\",\"token\":\"cello\",\"count\":4}\n]\n</code></pre>\n\n<p>This JSON is the result of a <code>responds_with</code> in Rails. Before it gets to that, I'd like to switch these hashes around in the array, based on the  alphabetical order of the <code>\"title\"</code> key in each hash.</p>\n\n<p>Here's a screenshot of a part of the JSON (in Firebug) to better illustrate what I mean:</p>\n\n<p><img src=\"https://i.stack.imgur.com/v2mus.png\" alt=\"enter image description here\"></p>\n\n<p>Any help would be greatly appreciated.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1424267616, "post_id": 28584998, "comment_id": 45477874, "body": "OMG! Your code is waiting for a refactoring..Really :-)"}, {"owner": {"reputation": 550, "user_id": 3868832, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/f9927e6b41853798340f92fe9fb078e5?s=128&d=identicon&r=PG&f=1", "display_name": "user3868832", "link": "https://stackoverflow.com/users/3868832/user3868832"}, "reply_to_user": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1424267738, "post_id": 28584998, "comment_id": 45477965, "body": "yes exactly - i write the tests first, then i refactor!"}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1424268292, "post_id": 28584998, "comment_id": 45478319, "body": "@Anthony ... I know what you meant.. lol ;)"}], "answers": [{"tags": [], "owner": {"reputation": 26839, "user_id": 1008891, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/BbcgE.jpg?s=128&g=1", "display_name": "Peter Alfvin", "link": "https://stackoverflow.com/users/1008891/peter-alfvin"}, "is_accepted": false, "score": 0, "last_activity_date": 1424278106, "creation_date": 1424278106, "answer_id": 28589075, "question_id": 28584998, "link": "https://stackoverflow.com/questions/28584998/rspec-stubbing-return-values-from-a-given-block/28589075#28589075", "title": "Rspec stubbing return values from a given block", "body": "<p>If you define <code>some_jobs</code> to be <code>[job]</code> (e.g. via RSpec's <code>let</code> mechanism), then you don't need to redefine map and your production code will continue to execute. By stubbing out <code>some_jobs.map</code>, you basically bypassed the rest of your production code.</p>\n\n<p>As an aside, the definitions of <code>client_location</code>, <code>client</code>, <code>some_jobs</code> and <code>job</code> are all highly relevant to the code snippet you shared and should be included.</p>\n"}], "owner": {"reputation": 550, "user_id": 3868832, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/f9927e6b41853798340f92fe9fb078e5?s=128&d=identicon&r=PG&f=1", "display_name": "user3868832", "link": "https://stackoverflow.com/users/3868832/user3868832"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 302, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424278301, "creation_date": 1424266647, "last_edit_date": 1424278301, "question_id": 28584998, "link": "https://stackoverflow.com/questions/28584998/rspec-stubbing-return-values-from-a-given-block", "title": "Rspec stubbing return values from a given block", "body": "<p>I am trying to get to grips with stubbing in Rspec. I would like to understand how to stub returns values from an array.</p>\n\n<p>Here is what I am attempting to stub at the moment,</p>\n\n<pre><code>if client.jobs.any?\n      client.jobs.map do |job|\n        if job.job_locations.any?\n            job.job_locations.map do |jl| \n                if jl.location_id == self.location_id\n                    errors.add(:location_id, \"This location is in use with another of the client's jobs\")\n                    return false\n                end\n            end\n        end\n      end\n    end\n</code></pre>\n\n<p>I can stub the first line (that there the client has jobs) but I am not sure how to stub the return values of the array so that they run in the spec tests.</p>\n\n<p>here is the relevant snippet </p>\n\n<pre><code>        context \"location_id matches job_location location_id\" do \n          before do\n            allow(client_location).to receive(:client).and_return(client)\n            allow(client).to receive(:jobs).and_return(some_jobs) \n            allow(some_jobs).to receive(:map).and_return([job]) \n            #eventually I want to get to this\n            allow_any_instance_of(JobLocation).to receive(:location_id).and_return(1)\n            allow_any_instance_of(ClientLocation).to receive(:location_id).and_return(1)\n          end\n          it \"returns false\" do \n            expect(@instance.destroy).to be_falsey\n          end\n        end\n</code></pre>\n\n<p>I should add the 'some_jobs' variables in the spec test are factory girl generated instances. Some jobs would equal [some_jobs]. </p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1424267544, "post_id": 28584972, "comment_id": 45477822, "body": "There&#39;s a <code>pluck</code> method, I thought it worked with conditionals as well, but may be wrong; haven&#39;t used Rails in awhile."}], "answers": [{"comments": [{"owner": {"reputation": 595, "user_id": 2236337, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/563a0196b150a8e204441f3031f7cda2?s=128&d=identicon&r=PG", "display_name": "Huw", "link": "https://stackoverflow.com/users/2236337/huw"}, "edited": false, "score": 0, "creation_date": 1424267092, "post_id": 28585063, "comment_id": 45477522, "body": "self.child_objects.where.not(whitelisted_at: nil).map(&amp;:name) appears to work... That&#39;s awesome thank you so much. Humm .map() eh? I guess I should go read up on that. Could you explain what the &amp; is doing in that final method? Also is there any advantage to using .where.not() instead of .where(&quot;whitelisted_at IS NOT NULL&quot;) ?"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "reply_to_user": {"reputation": 595, "user_id": 2236337, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/563a0196b150a8e204441f3031f7cda2?s=128&d=identicon&r=PG", "display_name": "Huw", "link": "https://stackoverflow.com/users/2236337/huw"}, "edited": false, "score": 0, "creation_date": 1424267393, "post_id": 28585063, "comment_id": 45477726, "body": "I think where.not is more idiomatic and easier to read but that&#39;s a style thing, they both do the same thing.  Added info for the map with proc method."}, {"owner": {"reputation": 595, "user_id": 2236337, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/563a0196b150a8e204441f3031f7cda2?s=128&d=identicon&r=PG", "display_name": "Huw", "link": "https://stackoverflow.com/users/2236337/huw"}, "edited": false, "score": 0, "creation_date": 1424267454, "post_id": 28585063, "comment_id": 45477771, "body": "Ah, Proc, yet another on the newbie to-learn list. Thanks for all the help I&#39;ll mark this as answered when the timelock expires!"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1424268126, "post_id": 28585063, "comment_id": 45478210, "body": "Or: <code>child_objects.where.not(whitelisted_at: nil).pluck(:name)</code>"}], "tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": true, "score": 2, "last_activity_date": 1424269193, "last_edit_date": 1424269193, "creation_date": 1424266830, "answer_id": 28585063, "question_id": 28584972, "link": "https://stackoverflow.com/questions/28584972/how-to-get-an-array-of-values-from-a-conditional-activerecord-query-with-associa/28585063#28585063", "title": "How to get an array of values from a conditional ActiveRecord query with associations?", "body": "<p>In your parent model you could use <a href=\"http://guides.rubyonrails.org/active_record_querying.html#not-conditions\" rel=\"nofollow\"><code>where.not</code></a> and use the pluck method ActiveRecord gives you (props to Stefan - see <a href=\"http://apidock.com/rails/ActiveRecord/Calculations/pluck\" rel=\"nofollow\"><code>pluck</code></a>)</p>\n\n<pre><code>class ParentObject &lt; ActiveRecord::Base\n...\n  def whitelisted_names\n    child_objects.where.not(whitelisted_at: nil).pluck(:name)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 595, "user_id": 2236337, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/563a0196b150a8e204441f3031f7cda2?s=128&d=identicon&r=PG", "display_name": "Huw", "link": "https://stackoverflow.com/users/2236337/huw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1412, "favorite_count": 0, "accepted_answer_id": 28585063, "answer_count": 1, "score": 0, "last_activity_date": 1424269193, "creation_date": 1424266577, "last_edit_date": 1424267479, "question_id": 28584972, "link": "https://stackoverflow.com/questions/28584972/how-to-get-an-array-of-values-from-a-conditional-activerecord-query-with-associa", "title": "How to get an array of values from a conditional ActiveRecord query with associations?", "body": "<p>I'm looking to define a method on one of my objects that will return a just one column of data from all of its child objects so long as another column in the same record meets certain conditions.</p>\n\n<p>For instance if I have two objects</p>\n\n<pre><code>ParentObject\n  has_many: child_objects\n\n  #fields\n  name (string)\n\nChildObject\n  belongs_to: parent_object\n\n  #fields\n  name (string)\n  whitelisted_at (datetime)\n</code></pre>\n\n<p>I've read up that I can get a list of all child_object records for a parent_object based on a conditional specified using .where(). For instance in my controller I have code like so:</p>\n\n<pre><code>ParentObject.child_objects.where(\"whitelisted_at IS NOT NULL\")\n</code></pre>\n\n<p>This gives me an active record associate like so:</p>\n\n<pre><code>#&lt;ActiveRecord::AssociationRelation [\n&lt;ChildObject id: 1, name:\"Susan\", whitelisted_at: \"2015-02-18 12:07:37\"&gt;,\n&lt;ChildObject id: 1, name:\"Simon\", whitelisted_at: \"2015-02-18 12:07:37\"&gt;, \n&lt;ChildObject id: 1, name:\"Sally\", whitelisted_at: \"2015-02-18 12:07:37\"&gt;\n]\n</code></pre>\n\n<p>I was looking how I would then filter through these to return an array of just names. Ideally i'd be able to run this all as a Model method so:</p>\n\n<pre><code>class ChainObject &lt; ActiveRecord::Base\n...\n  def whitelisted_names\n    #... outputs [Susan, Simon, Sally]\n  end\nend\n</code></pre>\n\n<p>What would be the most concise and rails-y way of doing this. I thought about doing a .where() then an .each() and having a block method but that seems really cumbersome and I'm sure I'm just missing some smart ActiveRecord or Association method that could pluck an array of values from multiple hashes. I'm pouring over the APIdock but I think the problem is I don't know how to describe what I'm trying to do!</p>\n"}, {"tags": ["ruby", "testing", "factory-bot"], "answers": [{"tags": [], "owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "is_accepted": true, "score": 9, "last_activity_date": 1448902721, "last_edit_date": 1448902721, "creation_date": 1424269488, "answer_id": 28585980, "question_id": 28584777, "link": "https://stackoverflow.com/questions/28584777/how-do-i-achieve-conditional-behavior-of-factorygirl-based-on-traits/28585980#28585980", "title": "How do I achieve conditional behavior of FactoryGirl based on traits", "body": "<p>You were almost there:</p>\n\n<pre><code>factory :user do\n  transient do\n    unconfirmed false\n  end\n\n  trait :unconfirmed do\n    unconfirmed true\n  end\n\n  after(:create) do |user, evaluator|\n    user.confirm! unless evaluator.unconfirmed\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1020, "user_id": 3094876, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WRVeI.jpg?s=128&g=1", "display_name": "branch14", "link": "https://stackoverflow.com/users/3094876/branch14"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2483, "favorite_count": 0, "accepted_answer_id": 28585980, "answer_count": 1, "score": 5, "last_activity_date": 1448902721, "creation_date": 1424266028, "last_edit_date": 1424266441, "question_id": 28584777, "link": "https://stackoverflow.com/questions/28584777/how-do-i-achieve-conditional-behavior-of-factorygirl-based-on-traits", "title": "How do I achieve conditional behavior of FactoryGirl based on traits", "body": "<p>I have a factory for user. I want the users to be confirmed by default. But given a trait <code>unconfirmed</code>, I don't want them to be confirmed.</p>\n\n<p>While I have a working implementation, which is based on implementation details, rather than on abstraction, I would like to know how to do this properly.</p>\n\n<pre><code>factory :user do\n  after(:create) do |user, evaluator|\n    # unwanted implementation details here\n    unless FactoryGirl.factories[:user].defined_traits.map(&amp;:name).include?(:unconfirmed)\n      user.confirm!\n    end\n  end\n  trait :unconfirmed do\n  end\nend\n</code></pre>\n\n<p>I'm thinking something along these lines. But this doesn't work and yields an\n<em>undefined method `unconfirmed'</em></p>\n\n<pre><code>factory :user do\n  ignore do\n    unconfirmed = false\n  end\n\n  after(:create) do |user, evaluator|\n    user.confirm! unless evaluator.unconfirmed\n  end\n\n  trait :unconfirmed do\n    unconfirmed = true\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "gem", "system"], "comments": [{"owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "edited": false, "score": 0, "creation_date": 1424265974, "post_id": 28584634, "comment_id": 45476783, "body": "This is a good tutorial for movie ticket booking, hope it helps <a href=\"http://dan.chak.org/enterprise-rails/chapter-5-building-a-solid-data-model/\" rel=\"nofollow noreferrer\">dan.chak.org/enterprise-rails/&hellip;</a>"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 2, "creation_date": 1424266876, "post_id": 28584634, "comment_id": 45477379, "body": "Sit down with a pencil and paper and draw out all your real life entities and how they relate to each other, eg Cinema, Screen, Seat, Film, Showing, Booking"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4227507"}, "edited": false, "score": 0, "creation_date": 1424267285, "post_id": 28584634, "comment_id": 45477649, "body": "Yeah I&#39;ve done that, made a basic ERD for it, just wondered if there&#39;s a gem to use for bookings"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1424267421, "post_id": 28584634, "comment_id": 45477747, "body": "ah - you should have said that earlier, i just wasted my time drawing up a schema for you."}], "answers": [{"comments": [{"owner": {"reputation": 1312, "user_id": 2112025, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/8ya3Q.jpg?s=128&g=1", "display_name": "Breen ho", "link": "https://stackoverflow.com/users/2112025/breen-ho"}, "edited": false, "score": 0, "creation_date": 1460049020, "post_id": 28585233, "comment_id": 60575252, "body": "I do not understand why do we need to have Seat has many bookings..? Can you please tell me a real time example.? Did you mean, One seat can be booked my many people.? or one seat can be attempted to book by many people.? This might be a silly question, but i really dont understand.."}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "reply_to_user": {"reputation": 1312, "user_id": 2112025, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/8ya3Q.jpg?s=128&g=1", "display_name": "Breen ho", "link": "https://stackoverflow.com/users/2112025/breen-ho"}, "edited": false, "score": 1, "creation_date": 1460118562, "post_id": 28585233, "comment_id": 60606623, "body": "Think of an actual seat in a cinema.  How many people do you think sit on that seat in a given year?  Each of those is a booking."}, {"owner": {"reputation": 1312, "user_id": 2112025, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/8ya3Q.jpg?s=128&g=1", "display_name": "Breen ho", "link": "https://stackoverflow.com/users/2112025/breen-ho"}, "edited": false, "score": 0, "creation_date": 1460129842, "post_id": 28585233, "comment_id": 60614486, "body": "Oh yeah I got it. I dint think of that., I thought a seat can be booked by multiple people for a single show. Thanks a lot Max. :) :) :)"}], "tags": [], "owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "is_accepted": true, "score": 4, "last_activity_date": 1424267313, "creation_date": 1424267313, "answer_id": 28585233, "question_id": 28584634, "link": "https://stackoverflow.com/questions/28584634/cinema-booking-application/28585233#28585233", "title": "Cinema Booking Application", "body": "<p>I think this is how i would start off trying to logically represent the relationships between entities.  Real life may be more complicated but this is a good start i think.  From these relationships you can determine the tables and fields required.  Note that i've mainly just listed the relationship fields, there would probably be lots of other fields you might want to store, eg whether a cinema or particular screen has wheelchair access etc.</p>\n\n<pre><code>Cinema #eg Odeon, West Street, Brighton\n  has_many :screens\n  #fields - name, address\n\nScreen #eg Screen 1, Screen 2 etc\n  belongs_to :cinema\n  has_many :seats\n  #fields - name\n\nSeat #A1, A2 etc\n  belongs_to :screen\n  has_many :bookings\n  #fields - number, eg \"A2\"\n\nFilm #eg Jaws\n  has_many :showings\n  #fields - name, length, rating, etc\n\nShowing #Eg Jaws in screen 2 of odeon west street brighton at 9pm on 10/3/2015\n  belongs_to :screen\n  belongs_to :film\n  has_many :bookings\n  #fields: screening_time (datetime)\n\nUser #eg Joe Bloggs\n  has_many :bookings\n  #fields - name, address etc  \n\nBooking #eg Joe Bloggs' reservation for seat A2 for Jaws in screen 2 of odeon west street brighton at 9pm on 10/3/2015\n  belongs_to :showing\n  belongs_to :seat\n  belongs_to :user\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4227507"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2803, "favorite_count": 0, "closed_date": 1424344708, "accepted_answer_id": 28585233, "answer_count": 1, "score": 2, "last_activity_date": 1445026849, "creation_date": 1424265564, "last_edit_date": 1445026849, "question_id": 28584634, "link": "https://stackoverflow.com/questions/28584634/cinema-booking-application", "closed_reason": "Needs more focus", "title": "Cinema Booking Application", "body": "<p>I am creating a cinema application in Ruby on Rails where users can log in and view movies and the times and dates they're being shown. What I want to do is create a booking system so that a user, e.g. \"Joe Bloggs\", can select a film, e.g. \"Jaws\", and a seat in its 20:00 showing at the cinema. Has anyone got some suggestions for how I can create this?</p>\n\n<p>I already have a lot of the tables and entities needed, but what I'm asking is how to code this into the application? Is there a gem that I could use?</p>\n"}, {"tags": ["mysql", "sql", "ruby", "mysql2"], "comments": [{"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 1, "creation_date": 1424265758, "post_id": 28584633, "comment_id": 45476652, "body": "<code>UPDATE x SET tok=&#39;new_val&#39; WHERE tok=&#39;old_val&#39;</code> will not update anything unless <code>tok=&#39;old_val&#39;</code> exists. Am I missing something?"}], "answers": [{"comments": [{"owner": {"reputation": 49334, "user_id": 168493, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/222744c69de603549106896f3f222a8d?s=128&d=identicon&r=PG", "display_name": "Marcus Adams", "link": "https://stackoverflow.com/users/168493/marcus-adams"}, "edited": false, "score": 0, "creation_date": 1424266479, "post_id": 28584717, "comment_id": 45477114, "body": "Those are procedural IFs, which require a stored procedure."}, {"owner": {"reputation": 69, "user_id": 4562342, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3TG1u7ygVg4/AAAAAAAAAAI/AAAAAAAAAu8/aLq1QrzsPhY/photo.jpg?sz=128", "display_name": "Nitin Alapati", "link": "https://stackoverflow.com/users/4562342/nitin-alapati"}, "edited": false, "score": 0, "creation_date": 1424266767, "post_id": 28584717, "comment_id": 45477314, "body": "I thought he was using a Stored procedure. Did not see properly. My Bad."}, {"owner": {"reputation": 5220, "user_id": 2442926, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/4b97751a77122dbf89ecb928967efbab?s=128&d=identicon&r=PG", "display_name": "ben", "link": "https://stackoverflow.com/users/2442926/ben"}, "edited": false, "score": 0, "creation_date": 1424267463, "post_id": 28584717, "comment_id": 45477777, "body": "I am not using a stored procedure. I want to do this using one query."}], "tags": [], "owner": {"reputation": 69, "user_id": 4562342, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3TG1u7ygVg4/AAAAAAAAAAI/AAAAAAAAAu8/aLq1QrzsPhY/photo.jpg?sz=128", "display_name": "Nitin Alapati", "link": "https://stackoverflow.com/users/4562342/nitin-alapati"}, "is_accepted": false, "score": -1, "last_activity_date": 1424265855, "creation_date": 1424265855, "answer_id": 28584717, "question_id": 28584633, "link": "https://stackoverflow.com/questions/28584633/check-if-a-value-exists-before-updating-a-column-for-a-already-existing-record-i/28584717#28584717", "title": "Check if a value exists before updating a column for a already existing record in mysql", "body": "<p>You can use the following statements to perform a check before updating.    </p>\n\n<pre><code>IF (NOT EXISTS(SELECT * FROM Tokens WHERE Token = ''))  \n    BEGIN \n        INSERT INTO Tokens(token,..,..) \n        VALUES(val1,val2,val3) \n    END \n    END\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>  IF (EXISTS(SELECT * FROM Tokens WHERE Token = ''))  \n        BEGIN \n            update Tokens\n           SET token = myVal\n        END \n        END\n</code></pre>\n\n<p>Not sure what you need. Hope any one of the above helps you :)</p>\n"}, {"comments": [{"owner": {"reputation": 5220, "user_id": 2442926, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/4b97751a77122dbf89ecb928967efbab?s=128&d=identicon&r=PG", "display_name": "ben", "link": "https://stackoverflow.com/users/2442926/ben"}, "edited": false, "score": 0, "creation_date": 1424301313, "post_id": 28592935, "comment_id": 45498211, "body": "thanks marcus, I will explain. I have a table column named access_token and another called token. the access_token column should be holding unique values, but can be having NULL value too. Later someone can enter values of the blank refresh_tokens. (BTW these refresh tokens are got from the corresponding tokens in the same row), You know oauth2 access_tokens."}, {"owner": {"reputation": 5220, "user_id": 2442926, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/4b97751a77122dbf89ecb928967efbab?s=128&d=identicon&r=PG", "display_name": "ben", "link": "https://stackoverflow.com/users/2442926/ben"}, "edited": false, "score": 0, "creation_date": 1424301545, "post_id": 28592935, "comment_id": 45498293, "body": "If another refresh_token exists, it means that the token belongs to the same user. therefore that row is deleted and nothing is done. But if the refresh_token got from a token is unique, we will update that token row and add that refresh_token. I will show you what I have done, because I am now sure if is the most optimal way. Check the question update"}, {"owner": {"reputation": 49334, "user_id": 168493, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/222744c69de603549106896f3f222a8d?s=128&d=identicon&r=PG", "display_name": "Marcus Adams", "link": "https://stackoverflow.com/users/168493/marcus-adams"}, "reply_to_user": {"reputation": 5220, "user_id": 2442926, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/4b97751a77122dbf89ecb928967efbab?s=128&d=identicon&r=PG", "display_name": "ben", "link": "https://stackoverflow.com/users/2442926/ben"}, "edited": false, "score": 0, "creation_date": 1424352535, "post_id": 28592935, "comment_id": 45519214, "body": "@ben, the method you&#39;re using is fine and pretty much standard for that type of action in code. For peformance index the <code>refresh_token</code> column. For a minute performance improvement, if you&#39;re not using the returned <code>id</code>, use <code>SELECT 1</code> so that less data is sent between the server and app/web server."}], "tags": [], "owner": {"reputation": 49334, "user_id": 168493, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/222744c69de603549106896f3f222a8d?s=128&d=identicon&r=PG", "display_name": "Marcus Adams", "link": "https://stackoverflow.com/users/168493/marcus-adams"}, "is_accepted": false, "score": 0, "last_activity_date": 1424290089, "creation_date": 1424290089, "answer_id": 28592935, "question_id": 28584633, "link": "https://stackoverflow.com/questions/28584633/check-if-a-value-exists-before-updating-a-column-for-a-already-existing-record-i/28592935#28592935", "title": "Check if a value exists before updating a column for a already existing record in mysql", "body": "<p>You can perform the update like this:</p>\n\n<pre><code>UPDATE Tokens\nSET refresh_token = 'C08Rbs'\nWHERE id = '2'\nAND NOT EXISTS (SELECT refresh_token FROM Tokens WHERE refresh_token = 'C08Rbs')\n</code></pre>\n\n<p>Use <a href=\"http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_row-count\" rel=\"nofollow\"><code>ROW_COUNT()</code></a> to determine if any rows were actually updated. Assuming the row where id = 2 actually exists, it will return 0 if no rows were updated (because the value already exists).</p>\n\n<p>The <code>ROW_COUNT()</code> function is also provided in the MySQL API (as <code>mysql_affected_rows()</code>), so your programming language of choice will have a function to return the same thing, and generally the result of an <code>UPDATE</code> will return the number of affected rows.</p>\n\n<p>Normally, you use a unique index to avoid duplicates on a particular column or columns and simply try to update:</p>\n\n<pre><code>UPDATE IGNORE Tokens\nSET refresh_token = 'C08Rbs'\nWHERE id = 2\n</code></pre>\n\n<p>Using <code>IGNORE</code> keeps you from getting an error on a duplicate value, the update won't occur, and it will still return the number of rows actually updated. It will return 1 on success and 0 on failure.</p>\n\n<p>It's still strange that you're changing a \"NULL\" value rather than inserting a new record.</p>\n\n<p>You haven't said what you want to do if the value already exists.</p>\n"}], "owner": {"reputation": 5220, "user_id": 2442926, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/4b97751a77122dbf89ecb928967efbab?s=128&d=identicon&r=PG", "display_name": "ben", "link": "https://stackoverflow.com/users/2442926/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 6714, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1613491585, "creation_date": 1424265563, "last_edit_date": 1424302289, "question_id": 28584633, "link": "https://stackoverflow.com/questions/28584633/check-if-a-value-exists-before-updating-a-column-for-a-already-existing-record-i", "title": "Check if a value exists before updating a column for a already existing record in mysql", "body": "<p>Lets say I have table called <strong>Tokens</strong>,  with columns: <strong>id</strong>, <strong>refresh_token</strong>, and <strong>token</strong>. refresh_token column should be unique. But we may have many refresh_token fields that are null. These null refresh_token fields should be updated later, but there is a possibility that we may try to enter a refresh_token value that is contained in another field, and that will cause a conflict.</p>\n\n<p>So, what I wanted to do is: first check if the refresh_token value is contained in any other fields. If it is not contained or if unique, the that new refresh_token value can be used to update a specific row with a given id.\nIf the value is not unique then we can do something else.</p>\n\n<p>This is how I did it, but i am not sure if it is the best way. Maybe you can advise and give a little explanation about your answer.</p>\n\n<pre><code>if con.query(\"(SELECT id FROM Tokens WHERE refresh_token='#{refresh_token}') LIMIT 1;\").count == 1\n          # do something important here\n        else\n          con.query(\"UPDATE Tokens SET refresh_token='#{refresh_token}' WHERE id='#{id}';\")\n        end\n</code></pre>\n\n<p>this is done using ruby.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 11351, "user_id": 1573638, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mmZS8.jpg?s=128&g=1", "display_name": "Michael Radionov", "link": "https://stackoverflow.com/users/1573638/michael-radionov"}, "edited": false, "score": 0, "creation_date": 1424269383, "post_id": 28584565, "comment_id": 45479016, "body": "As a final goal do you want to get all <code>News</code> ids as an array? Why do you want <code>News</code> to support methods of <code>Enumerable</code>, how do you want to use those methods?"}, {"owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "reply_to_user": {"reputation": 11351, "user_id": 1573638, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mmZS8.jpg?s=128&g=1", "display_name": "Michael Radionov", "link": "https://stackoverflow.com/users/1573638/michael-radionov"}, "edited": false, "score": 0, "creation_date": 1424269526, "post_id": 28584565, "comment_id": 45479108, "body": "1: yes all the id . 2: for future reference."}, {"owner": {"reputation": 11351, "user_id": 1573638, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mmZS8.jpg?s=128&g=1", "display_name": "Michael Radionov", "link": "https://stackoverflow.com/users/1573638/michael-radionov"}, "edited": false, "score": 1, "creation_date": 1424269871, "post_id": 28584565, "comment_id": 45479375, "body": "1. <code>News.ids</code> should be faster, it filters out another columns on the database level 2. I&#39;d suggest to use Active Record methods and database features as much as you can to work with records, to eliminate the need of filtering the records using <code>Enumerable</code> and another ruby stuff, because it is usually much slower"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1424270343, "post_id": 28584565, "comment_id": 45479671, "body": "Your method is called <code>user_ids</code> but it returns <code>News</code> ids, is that a mistake?"}], "answers": [{"comments": [{"owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "edited": false, "score": 0, "creation_date": 1424278015, "post_id": 28588730, "comment_id": 45484839, "body": "thanks @simone for making this clear ,have some doubt 1: what is <i>inner instance methods</i> ? 2: <i>first-class object _. and 3: _association proxy</i>"}, {"owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "reply_to_user": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "edited": false, "score": 0, "creation_date": 1424339917, "post_id": 28588730, "comment_id": 45511640, "body": "I can&#39;t answer such questions in a comment. You can find an explanation of what is a Ruby instance method in every basic Ruby tutorial. An association proxy is the proxy object used by ActiveRecord to represent an association."}], "tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": true, "score": 0, "last_activity_date": 1424277195, "creation_date": 1424277195, "answer_id": 28588730, "question_id": 28584565, "link": "https://stackoverflow.com/questions/28584565/implement-each-method-in-user-class-which-has-extend-activerecordbase/28588730#28588730", "title": "implement each method in user class which has extend ActiveRecord::Base", "body": "<p>This is not a good idea. The reason is because ActiveRecord classes (and therefore inner instance methods) can be both accessed as first-class object (when you call <code>Model.foo</code>) or via the <code>ActiveRecord::Relation</code> object and association proxy.</p>\n\n<p>There is a very high chance that you will cause some hard-to-detect conflict at some point.</p>\n\n<p>There is no real benefit of trying to do what you want to do. In fact, the method</p>\n\n<pre><code>class User &lt; ActiveRecord::Base \n  include Enumerable\n\n  def user_ids\n    User.all.map(&amp;:id)\n  end \nend\n</code></pre>\n\n<p>can already be rewritten to</p>\n\n<pre><code>def user_ids\n  User.ids\nend \n</code></pre>\n\n<p>that is a shorter version for</p>\n\n<pre><code>def user_ids\n  User.pluck(:id)\nend \n</code></pre>\n\n<p>Note that both <code>pluck</code> and <code>ids</code> selects only the required field, hence they are way more efficient (both at Ruby level and at database level) than loading all the records and mapping a field.</p>\n\n<p>Without mentioning that your code is probably wrong. In fact, you are defining an instance method that should be called</p>\n\n<pre><code>User.new.user_ids\n</code></pre>\n\n<p>whereas you probably expect to use it as</p>\n\n<pre><code>User.user_ids\n</code></pre>\n\n<p>hence you can define it as</p>\n\n<pre><code>class User &lt; ActiveRecord::Base \n\n  def self.user_ids\n    # User it's implicit, its the current scope\n    ids\n  end \nend\n</code></pre>\n\n<p>You can define <code>each</code></p>\n\n<pre><code>class User &lt; ActiveRecord::Base \n  include Enumerable\n\n  def each(&amp;block)\n    # all returns a lazy-evaluated scope\n    # that responds to each\n    # Note that .each will trigger a query.\n    # In this case, that's effectively equivalent to to_a.each\n    all.each(&amp;block)\n  end \nend\n</code></pre>\n\n<p>but it will not bring you any advantage. Moreover, that will always trigger a query at the time you call the method, skipping the very handy lazy-load feature of active record.</p>\n\n<p>In fact, <code>ActiveRecord::Relation</code> exists also as a performance improvement to take advantage of lazy-load.</p>\n\n<hr>\n\n<p>Bottom line, if your goal is to not type <code>User.all.map(&amp;:id)</code> then use a custom method, or use the Rails API effectively.</p>\n\n<pre><code>User.all.map(&amp;:id)\n</code></pre>\n\n<p>can be written as</p>\n\n<pre><code>User.pluck(:id)\n</code></pre>\n\n<p>which is equivalent to</p>\n\n<pre><code>User.ids\n</code></pre>\n\n<p>that wrapped in a method becomes</p>\n\n<pre><code>class User\n  def self.user_ids\n    ids\n  end\nend\n\nUser.user_ids\n</code></pre>\n"}], "owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "accepted_answer_id": 28588730, "answer_count": 1, "score": 0, "last_activity_date": 1424277195, "creation_date": 1424265346, "last_edit_date": 1424274106, "question_id": 28584565, "link": "https://stackoverflow.com/questions/28584565/implement-each-method-in-user-class-which-has-extend-activerecordbase", "title": "implement each method in user class which has extend ActiveRecord::Base", "body": "<p>Redefine <code>each</code> methods in <code>ActiveRecord::Base</code> for spec class <code>User</code></p>\n\n<p>This is what i know</p>\n\n<pre><code>class Rainbow\n include Enumerable\n  def each\n   yield \"red\"\n   yield \"orange\"\n   yield \"yellow\"\n   yield \"green\"\n   yield \"blue\"\n   yield \"indigo\"\n   yield \"violet\"\n  end\nend\n\nr = Rainbow.new\n\nr.select { |a| a.start_with?('r')} #=&gt; [\"red\"]\n</code></pre>\n\n<p><strong>Ok !!</strong> </p>\n\n<p>Like this way what i want in <code>User Model</code></p>\n\n<pre><code> class User &lt; ActiveRecord::Base \n  include Enumerable\n   def user_ids\n    User.all.map(&amp;:id)   ## instead of this i want to write like User.map(&amp;:id) \n   end \n  end\n</code></pre>\n\n<p>Actually There is lots of data in <code>News model</code> and in need only <code>id</code> from all the record To write the query like <code>User.all.map(&amp;:id)</code> it taking lots of time.</p>\n\n<p><strong>1:</strong> For that i need to redefine <code>each method</code> but how ? but what line of codes i need to write in each method .</p>\n\n<p><strong>2:</strong> so that all the enumerable method can invoke on that classe`s object</p>\n\n<p>Is there any other way.</p>\n\n<p>Any help would be greatly appreciate.</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1022, "user_id": 4190203, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ab42486428f113dcac28a2b3c289b4f2?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Black", "link": "https://stackoverflow.com/users/4190203/peter-black"}, "edited": false, "score": 0, "creation_date": 1424270039, "post_id": 28585507, "comment_id": 45479478, "body": "TY! Where do you think is the best place to put this? I&#39;d ultimately like to make this into a gem.."}, {"owner": {"reputation": 813, "user_id": 1961154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af6b9daa60a6856519080acddfd5f254?s=128&d=identicon&r=PG", "display_name": "intale", "link": "https://stackoverflow.com/users/1961154/intale"}, "reply_to_user": {"reputation": 1022, "user_id": 4190203, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ab42486428f113dcac28a2b3c289b4f2?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Black", "link": "https://stackoverflow.com/users/4190203/peter-black"}, "edited": false, "score": 0, "creation_date": 1424270624, "post_id": 28585507, "comment_id": 45479869, "body": "You may want to put it in the config/initializers/sprockets.rb file."}], "tags": [], "owner": {"reputation": 813, "user_id": 1961154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af6b9daa60a6856519080acddfd5f254?s=128&d=identicon&r=PG", "display_name": "intale", "link": "https://stackoverflow.com/users/1961154/intale"}, "is_accepted": true, "score": 0, "last_activity_date": 1424268082, "creation_date": 1424268082, "answer_id": 28585507, "question_id": 28584395, "link": "https://stackoverflow.com/questions/28584395/is-there-a-way-to-make-ruby-edit-js-files-before-they-are-served/28585507#28585507", "title": "Is there a way to make Ruby edit .js files before they are served?", "body": "<p>Here is the solution:</p>\n\n<pre><code>if Rails.env.development?\n  Sprockets::Server.module_eval do\n    alias_method :ok_response_orig, :ok_response\n    def ok_response(asset, env)\n      asset.instance_eval do\n        #The next string to be appended\n        @source += %{\n        \\n;(function(){\n            console.log(\"Called from #{File.basename(@pathname)}\");\n          })();\n          }\n        @length = Rack::Utils.bytesize(@source)\n        @digest = Digest::MD5.new.update(@source).hexdigest\n      end if asset.instance_eval{@pathname.to_s}.include?(\".js\") #You might want to add .coffee here\n      ok_response_orig(asset, env)\n    end\n    def etag_match?(*args)\n      true\n    end\n  end\nend\n</code></pre>\n\n<p>Enjoy.\nP.S. Use it only in development env.</p>\n"}], "owner": {"reputation": 1022, "user_id": 4190203, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ab42486428f113dcac28a2b3c289b4f2?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Black", "link": "https://stackoverflow.com/users/4190203/peter-black"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 1, "accepted_answer_id": 28585507, "answer_count": 1, "score": 0, "last_activity_date": 1424268082, "creation_date": 1424264771, "last_edit_date": 1424265104, "question_id": 28584395, "link": "https://stackoverflow.com/questions/28584395/is-there-a-way-to-make-ruby-edit-js-files-before-they-are-served", "title": "Is there a way to make Ruby edit .js files before they are served?", "body": "<p>I would like to write something (in Ruby) that will automatically add console.log() to each line of my javascript assets before serving it to the user. This tool would aid me greatly in my debugging efforts of large js files by saving time and giving me a back-trace. I know rails has all sorts of built-in helpers... Maybe a before_serve ? I know sprockets mashes the files together before serving them.. </p>\n"}, {"tags": ["ruby", "symbols"], "answers": [{"comments": [{"owner": {"reputation": 1191, "user_id": 499332, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5958e3ab9a729029a914d92462d07654?s=128&d=identicon&r=PG", "display_name": "Gabriel Baker", "link": "https://stackoverflow.com/users/499332/gabriel-baker"}, "edited": false, "score": 0, "creation_date": 1424269489, "post_id": 28584363, "comment_id": 45479086, "body": "Totally spot on @matt! Thanks a lot!"}], "tags": [], "owner": {"reputation": 15705, "user_id": 18601, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3c5cb8ebf97404f98f5e078227d619d?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/18601/matt"}, "is_accepted": true, "score": 5, "last_activity_date": 1424265050, "last_edit_date": 1424265050, "creation_date": 1424264674, "answer_id": 28584363, "question_id": 28584295, "link": "https://stackoverflow.com/questions/28584295/assigning-symbol-to-variable-result-in-nil/28584363#28584363", "title": "Assigning symbol to variable result in nil", "body": "<p>You need to fix the parentheses because of operator precedence (e.g. the ternary operator <code>?</code> is evaluated before <code>has_key?</code>). Try this instead:</p>\n\n<pre><code>branch_name = @payload.has_key?('branch_name') ? @payload['branch_name'].to_sym : false;\n</code></pre>\n\n<p>The behaviour can be reproduced with the following example snippet:</p>\n\n<pre><code>a = { 2 =&gt; 2 }\n=&gt; {2=&gt;2}\na.has_key?\u00ad 1 ? 2 : 3 # 1 evalutes to true, which reduces into a.has_key?(2)\n=&gt; true\n</code></pre>\n"}], "owner": {"reputation": 1191, "user_id": 499332, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5958e3ab9a729029a914d92462d07654?s=128&d=identicon&r=PG", "display_name": "Gabriel Baker", "link": "https://stackoverflow.com/users/499332/gabriel-baker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 28584363, "answer_count": 1, "score": 0, "last_activity_date": 1424265050, "creation_date": 1424264456, "question_id": 28584295, "link": "https://stackoverflow.com/questions/28584295/assigning-symbol-to-variable-result-in-nil", "title": "Assigning symbol to variable result in nil", "body": "<p>I'm attempting to assign a symbol to a variable and pass that into a function, however it doesn't seem to assign, I get <code>nil</code> instead</p>\n\n<pre><code>  logger.info @payload['branch_name']\n  logger.info @payload['branch_name'].to_sym\n  branch_name = @payload.has_key? 'branch_name' ? @payload['branch_name'].to_sym : false;\n  logger.info branch_name\n</code></pre>\n\n<p>Results in:</p>\n\n<pre><code>[2015-02-18T12:53:01.237082 #6]  INFO -- : develop\n[2015-02-18T12:53:01.237154 #6]  INFO -- : :develop\n[2015-02-18T12:53:01.237234 #6]  INFO -- : nil\n</code></pre>\n\n<p>But I would have expected it to assign the symbol to the variable?</p>\n"}, {"tags": ["ruby", "cucumber", "bdd"], "answers": [{"comments": [{"owner": {"reputation": 1362, "user_id": 3236557, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p6V9b.jpg?s=128&g=1", "display_name": "Kirill Zhukov", "link": "https://stackoverflow.com/users/3236557/kirill-zhukov"}, "edited": false, "score": 0, "creation_date": 1425091387, "post_id": 28677247, "comment_id": 45833004, "body": "Thank you. That helped me!"}], "tags": [], "owner": {"reputation": 1410, "user_id": 3890924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uy8Gd.jpg?s=128&g=1", "display_name": "alannichols", "link": "https://stackoverflow.com/users/3890924/alannichols"}, "is_accepted": true, "score": 1, "last_activity_date": 1424705386, "creation_date": 1424705386, "answer_id": 28677247, "question_id": 28583352, "link": "https://stackoverflow.com/questions/28583352/cucumber-how-to-find-out-either-current-scenario-is-last-one-or-not-in-after-ho/28677247#28677247", "title": "Cucumber: How to find out either current scenario is last one or not in After hook?", "body": "<p>Could you not move the function to be in the Before hook instead?\nThat way it would never run on the last scenario, but would run for all other scenarios.</p>\n\n<p>If you don't want it to run before the first scenario for whatever reason, you can set a global variable to store whether this scenario is the first one.</p>\n\n<p>e.g.</p>\n\n<p>In env or somewhere create and set</p>\n\n<pre><code>$first_scenario = true\n</code></pre>\n\n<p>Then in the before hook </p>\n\n<pre><code>run_your_function unless $first_scenario\n$first_scenario = false\n</code></pre>\n"}], "owner": {"reputation": 1362, "user_id": 3236557, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p6V9b.jpg?s=128&g=1", "display_name": "Kirill Zhukov", "link": "https://stackoverflow.com/users/3236557/kirill-zhukov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 557, "favorite_count": 0, "accepted_answer_id": 28677247, "answer_count": 1, "score": 0, "last_activity_date": 1434664596, "creation_date": 1424261356, "last_edit_date": 1434664596, "question_id": 28583352, "link": "https://stackoverflow.com/questions/28583352/cucumber-how-to-find-out-either-current-scenario-is-last-one-or-not-in-after-ho", "title": "Cucumber: How to find out either current scenario is last one or not in After hook?", "body": "<p>I need to execute specific function after each scenario, except the last one in the queue. Is there a way to do that?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "rspec"], "comments": [{"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1424261499, "post_id": 28583248, "comment_id": 45474188, "body": "Do you have <code>shoulda</code> gem in your Gemfile? <a href=\"https://github.com/thoughtbot/shoulda\" rel=\"nofollow noreferrer\">github.com/thoughtbot/shoulda</a> Also, please: can you indent properly your code?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3905600"}, "reply_to_user": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1424262404, "post_id": 28583248, "comment_id": 45474722, "body": "No if the gem is having more than 100 contributors the only i can use that gem. And for indentation this is my first question with program."}, {"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1424262571, "post_id": 28583248, "comment_id": 45474822, "body": "Thanks for editing, much better now. I don&#39;t understand what you say about gem contributors."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3905600"}, "reply_to_user": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1424262877, "post_id": 28583248, "comment_id": 45474986, "body": "Its complicated client requirements.Anyway Thanks for Your suggestion It worked perfectly."}, {"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1424263138, "post_id": 28583248, "comment_id": 45475130, "body": "As far as I know, <code>validate_presence_of</code> is provided by <code>shoulda</code> gem. If you cannot use that gem, then you cannot use that helper."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3905600"}, "reply_to_user": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 1, "creation_date": 1424263198, "post_id": 28583248, "comment_id": 45475167, "body": "If no option available.I am going to use your suggestion only.I thought it is from Activerecord."}, {"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1424263299, "post_id": 28583248, "comment_id": 45475228, "body": "I&#39;m not sure your are understanding what I mean. I do not understand your last comment."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3905600"}, "edited": false, "score": 0, "creation_date": 1424262470, "post_id": 28583387, "comment_id": 45474763, "body": "I edited the new code but it showing        ArgumentError:        wrong number of arguments (0 for 2)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3905600"}, "edited": false, "score": 0, "creation_date": 1424262803, "post_id": 28583387, "comment_id": 45474943, "body": "I changed my code without argument in constructor and tried Yours .But it shows again no method error"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3905600"}, "edited": false, "score": 0, "creation_date": 1424263338, "post_id": 28583387, "comment_id": 45475255, "body": "I got it @dgilperez suggestion of using shoulda gem helped."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 0, "last_activity_date": 1424291720, "last_edit_date": 1424291720, "creation_date": 1424261474, "answer_id": 28583387, "question_id": 28583248, "link": "https://stackoverflow.com/questions/28583248/how-to-validate-the-non-active-record-models-in-rspec/28583387#28583387", "title": "How to Validate the non active record models in rspec?", "body": "<p>Ensure that you have the <code>shoulda</code> gem in your <code>Gemfile</code>. And check the syntax, shoulda expectations should look like this:</p>\n\n<pre><code>describe Item do\n  it { is_expected.to validate_presence_of(:url) }\nend\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3905600"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 28583387, "answer_count": 1, "score": 0, "last_activity_date": 1424291720, "creation_date": 1424261043, "last_edit_date": 1424262283, "question_id": 28583248, "link": "https://stackoverflow.com/questions/28583248/how-to-validate-the-non-active-record-models-in-rspec", "title": "How to Validate the non active record models in rspec?", "body": "<pre><code>#item class\nclass Item\n include ActiveModel::Model\n   #validations from activemodel class\n\n    validates :url, presence: true\n    validates :text, presence: true \n    attr_accessor :url\n    attr_accessor :text    \n\n    def initialize (url,text)\n          @url=url\n          @text=text\n    end \nend\n  --------------------------------------------------------\n\nRSpec.describe Item, type: :model do\n before :each do\n   @url=\"www.fb.com\"\n   @text=\"to see fb\"\n   @item=Item.new(@url,@text)\n end\n\n    it { (@item).to validate_presence_of(:url) }\n\nend\n</code></pre>\n\n<p>it shows error in rspec No method error on validate_presence_of all my remaining test are passing all the validations are showing no method error </p>\n"}, {"tags": ["ruby", "factory-bot"], "answers": [{"tags": [], "owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "is_accepted": true, "score": 1, "last_activity_date": 1424261337, "creation_date": 1424261337, "answer_id": 28583344, "question_id": 28583209, "link": "https://stackoverflow.com/questions/28583209/reusing-factorygirl-sequence-results/28583344#28583344", "title": "Reusing FactoryGirl sequence results", "body": "<p>Use a block to access your current object: </p>\n\n<pre><code>  FactoryGirl.define do\n    sequence :username do |n|\n      \"User#{n}\"\n    end\n    factory :user do\n      username\n      email {\u00a0|u| \"#{u.username}@example.com\" }\n      password 'password'\n      password_confirmation 'password'\n    end\n  end\n</code></pre>\n"}], "owner": {"reputation": 1344, "user_id": 562646, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e1dc86932c17fa61ffd81a0a0e63e6b8?s=128&d=identicon&r=PG", "display_name": "digitig", "link": "https://stackoverflow.com/users/562646/digitig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "accepted_answer_id": 28583344, "answer_count": 1, "score": 1, "last_activity_date": 1424261337, "creation_date": 1424260953, "question_id": 28583209, "link": "https://stackoverflow.com/questions/28583209/reusing-factorygirl-sequence-results", "title": "Reusing FactoryGirl sequence results", "body": "<p>If I have a fairly standard factory for a <code>User</code> class, like this:</p>\n\n<pre><code>FactoryGirl.define do\n  sequence :username do |n|\n    \"User#{n}\"\n  end\n  factory :user do\n    username\n    email 'user@example.com'\n    password 'password'\n    password_confirmation 'password'\n  end\nend\n</code></pre>\n\n<p>then everything works as I'd expect, getting a unique username every time unless I override it. But I'd like the email to be based on the username, like this:</p>\n\n<pre><code>FactoryGirl.define do\n  sequence :username do |n|\n    \"User#{n}\"\n  end\n  factory :user do\n    username\n    email \"#{username}@example.com\" # doesn't work\n    password 'password'\n    password_confirmation 'password'\n  end\nend\n</code></pre>\n\n<p>When I try to <code>build_stubbed</code> a <code>User</code>, I get an error <code>Attribute already defined: username</code>.</p>\n\n<p>I could always set up <code>email</code> as another sequence, of course, but for the tests where I override the username the messages will be clearer if the email matches it. Is there any way I can set up <code>username</code> to automatically increment and still use its value later on in the factory?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nested-forms"], "comments": [{"owner": {"reputation": 5074, "user_id": 4207394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mmfTf.png?s=128&g=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/4207394/deep"}, "edited": false, "score": 0, "creation_date": 1424260445, "post_id": 28582924, "comment_id": 45473483, "body": "any error on console?"}], "answers": [{"tags": [], "owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "is_accepted": true, "score": 1, "last_activity_date": 1424260615, "creation_date": 1424260615, "answer_id": 28583082, "question_id": 28582924, "link": "https://stackoverflow.com/questions/28582924/rails-4-nested-form-not-saving/28583082#28583082", "title": "rails 4 nested_form not saving", "body": "<pre><code>:reject_if =&gt; lambda { |a| a[:questions].blank? }\n</code></pre>\n\n<p><code>a</code> variable is a hash of attributes which will be passed to a question record. Your question model has no <code>questions</code> field, hence <code>a[:questions]</code> is always blank and the record it is rejected. Instead, do:</p>\n\n<pre><code>:reject_if =&gt; :all_blank\n</code></pre>\n"}], "owner": {"reputation": 802, "user_id": 3110574, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/a693b6055e0568a059a9457064277cba?s=128&d=identicon&r=PG", "display_name": "junior", "link": "https://stackoverflow.com/users/3110574/junior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 28583082, "answer_count": 1, "score": 0, "last_activity_date": 1424260615, "creation_date": 1424260187, "question_id": 28582924, "link": "https://stackoverflow.com/questions/28582924/rails-4-nested-form-not-saving", "title": "rails 4 nested_form not saving", "body": "<p>I know there is a lot questions like this before, I have following all the answer, but still mine doesn't work. please help.</p>\n\n<p><strong><em>survey.rb</em></strong></p>\n\n<pre><code># app/models/survey.rb\nclass Survey &lt; ActiveRecord::Base\n  has_many :questions, :dependent =&gt; :destroy\n  accepts_nested_attributes_for :questions, :reject_if =&gt; lambda { |a| a[:questions].blank? }, :allow_destroy =&gt; true\nend\n</code></pre>\n\n<p><strong><em>question.rb</em></strong></p>\n\n<pre><code># app/models/question.rb\nclass Question &lt; ActiveRecord::Base\n  belongs_to :survey\nend\n</code></pre>\n\n<p><strong><em>surveys_controller.rb</em></strong></p>\n\n<pre><code># app/controllerss/surveys_controller.rb\n\n  def new\n    @survey = Survey.new\n    @survey.questions.build\n  end\n\n  def edit\n  end\n\n  def create\n    @survey = Survey.new(survey_params)\n\n    respond_to do |format|\n      if @survey.save\n        format.html { redirect_to @survey, notice: 'Survey was successfully created.' }\n        format.json { render :show, status: :created, location: @survey }\n      else\n        format.html { render :new }\n        format.json { render json: @survey.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\ndef survey_params\n      params.require(:survey).permit(:name, questions_attributes: [:id, :content, :_destroy])\n    end\n</code></pre>\n\n<p><strong><em>_form.html.erb</em></strong></p>\n\n<pre><code># app/views/surveys/_form.html.erb\n\n&lt;%= nested_form_for @survey do |f| %&gt;\n  &lt;% if @survey.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;&lt;%= pluralize(@survey.errors.count, \"error\") %&gt; prohibited this survey from being saved:&lt;/h2&gt;\n\n      &lt;ul&gt;\n      &lt;% @survey.errors.full_messages.each do |message| %&gt;\n        &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :name %&gt;&lt;br&gt;\n    &lt;%= f.text_field :name %&gt;\n  &lt;/div&gt;\n\n  &lt;%= f.fields_for :questions do |builder| %&gt;\n    &lt;div class=\"field\"&gt;\n      &lt;%= builder.label :content, \"Question\" %&gt; &lt;br&gt;\n      &lt;%= builder.text_field :content, :rows =&gt; 3 %&gt;\n      &lt;%= builder.link_to_remove \"Remove this question\" %&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;p&gt;&lt;%= f.link_to_add \"Add a question\", :questions %&gt;&lt;/p&gt;\n\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Help? what do I miss?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "rails-activerecord"], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 1, "last_activity_date": 1424258920, "last_edit_date": 1424258920, "creation_date": 1424258568, "answer_id": 28582391, "question_id": 28582237, "link": "https://stackoverflow.com/questions/28582237/rails-get-records-of-a-specific-id-and-store-it-in-an-array/28582391#28582391", "title": "Rails - Get records of a specific id and store it in an Array", "body": "<p>You can get an <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Relation.html\" rel=\"nofollow\">ActiveRecord::Relation</a> object like this:</p>\n\n<pre><code>ModelName.where('FIX_ID = ?', 10)\n</code></pre>\n\n<p>Relation object will perform a database query as soon as you call methods like <code>all</code>, <code>each</code> or <code>any?</code> on it. If you really need an array, call <code>to_a</code> on that Relation:</p>\n\n<pre><code>ModelName.where('FIX_ID = ?', 10).to_a\n</code></pre>\n"}], "owner": {"reputation": 54, "user_id": 4440835, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9845b042951b9c1f6cff1cdda8e0d9b2?s=128&d=identicon&r=PG&f=1", "display_name": "Yui", "link": "https://stackoverflow.com/users/4440835/yui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 948, "favorite_count": 0, "accepted_answer_id": 28582391, "answer_count": 1, "score": 0, "last_activity_date": 1424281601, "creation_date": 1424258150, "last_edit_date": 1424281601, "question_id": 28582237, "link": "https://stackoverflow.com/questions/28582237/rails-get-records-of-a-specific-id-and-store-it-in-an-array", "title": "Rails - Get records of a specific id and store it in an Array", "body": "<p>How do I get records from a table with a specific ID and store these records in an Array?</p>\n\n<p>For better understanding I try to explain it to you more clear:</p>\n\n<p>Imagine a table with the following columns: <strong>(ID,FIX_ID,AMOUNT)</strong></p>\n\n<p>where <strong>ID</strong> is an unique ID which always will auto_incremented by 1.</p>\n\n<p><strong>FIX_ID</strong> is an ID which can appear multiple times in the table.</p>\n\n<p>And <strong>AMOUNT</strong> is just a simple type which represents the amount of some \"things\".</p>\n\n<hr>\n\n<p>So all I want to get now is every record from the table which have the <strong>FIX_ID</strong> that I am looking for.\nRemember: The <strong>FIX_ID</strong> is not unique => it can appear multiple times.</p>\n\n<p>And that's it. So imagine that I want to get all records with the <strong>FIX_ID</strong> of 10. All these records which I will get should be stored in an Array.</p>\n\n<p>My question to you: Is it possible to realize this \"request\" to the database with ActiveRecord?\nIf so, then how?</p>\n"}, {"tags": ["ruby", "symbols", "literals"], "comments": [{"owner": {"reputation": 43, "user_id": 3463260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10fef280365d5428140e9c9e8575acee?s=128&d=identicon&r=PG&f=1", "display_name": "zushe", "link": "https://stackoverflow.com/users/3463260/zushe"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1424258240, "post_id": 28582184, "comment_id": 45472293, "body": "it&#39;s converted to :country. for you? (included the point as part of the simbol)"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1424258637, "post_id": 28582184, "comment_id": 45472498, "body": "Yes, it is working. Even your own code shows it working, at least in lines 1, 2 and 4, the period is clearly there."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1424259076, "post_id": 28582184, "comment_id": 45472765, "body": "All good...: <code>&quot;country.&quot;.to_sym.class #=&gt; Symbol</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 4575222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e32b1570239b5b65bed27e51341c599?s=128&d=identicon&r=PG", "display_name": "Maksym Khukhrianskyi", "link": "https://stackoverflow.com/users/4575222/maksym-khukhrianskyi"}, "is_accepted": false, "score": 0, "last_activity_date": 1424258618, "creation_date": 1424258618, "answer_id": 28582410, "question_id": 28582184, "link": "https://stackoverflow.com/questions/28582184/how-to-convert-string-with-point-to-symbol/28582410#28582410", "title": "How to convert string with point to symbol", "body": "<p>perhaps it will help you:</p>\n\n<pre><code>:'country.'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9125, "user_id": 671422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/85da2a1fa3e4017815ff5d3a3d70fabe?s=128&d=identicon&r=PG", "display_name": "Yule", "link": "https://stackoverflow.com/users/671422/yule"}, "is_accepted": true, "score": 0, "last_activity_date": 1424259671, "creation_date": 1424259671, "answer_id": 28582760, "question_id": 28582184, "link": "https://stackoverflow.com/questions/28582184/how-to-convert-string-with-point-to-symbol/28582760#28582760", "title": "How to convert string with point to symbol", "body": "<p>It's working as expected. \nA symbol most of the time looks like:</p>\n\n<pre><code>:symbol_name\n</code></pre>\n\n<p>However when the symbol contains special characters such as spaces or hyphens, or in your case a period, it needs to be enclosed in quotes:</p>\n\n<pre><code>:\"symbol name with-many special characters.\"\n</code></pre>\n\n<p>Although it doesn't look 'correct', it will act as any other symbol. </p>\n"}], "owner": {"reputation": 43, "user_id": 3463260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10fef280365d5428140e9c9e8575acee?s=128&d=identicon&r=PG&f=1", "display_name": "zushe", "link": "https://stackoverflow.com/users/3463260/zushe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "closed_date": 1425256319, "accepted_answer_id": 28582760, "answer_count": 2, "score": -3, "last_activity_date": 1424260089, "creation_date": 1424258011, "last_edit_date": 1424260089, "question_id": 28582184, "link": "https://stackoverflow.com/questions/28582184/how-to-convert-string-with-point-to-symbol", "closed_reason": "Not suitable for this site", "title": "How to convert string with point to symbol", "body": "<p>I am trying to convert the string <code>\"country.\"</code> to a symbol. I expect to receive <code>:country.</code> including the point <code>.</code>.</p>\n\n<p>I tried the following, but they do not work as my symbols still have quotes.</p>\n\n<pre><code>\"country.\".to_sym; #=&gt; :\"country.\"\n\"country.\".intern; #=&gt; :\"country.\"\n\"country.\".parameterize.underscore.to_sym; #=&gt; :country\n\"country\\.\".to_sym; #=&gt; :\"country.\"\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 8519, "user_id": 3581788, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ghs5V.jpg?s=128&g=1", "display_name": "Sylar", "link": "https://stackoverflow.com/users/3581788/sylar"}, "edited": false, "score": 0, "creation_date": 1424269236, "post_id": 28584125, "comment_id": 45478913, "body": "Sorry that did not even displayed anything. Wrapping did nothing. My issue was that the result wont loop to the other items."}], "tags": [], "owner": {"reputation": 813, "user_id": 1961154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af6b9daa60a6856519080acddfd5f254?s=128&d=identicon&r=PG", "display_name": "intale", "link": "https://stackoverflow.com/users/1961154/intale"}, "is_accepted": false, "score": 0, "last_activity_date": 1424264182, "last_edit_date": 1424264182, "creation_date": 1424263817, "answer_id": 28584125, "question_id": 28582025, "link": "https://stackoverflow.com/questions/28582025/rails-4-changing-table-values-with-javascript-buttons/28584125#28584125", "title": "Rails 4: Changing Table Values with JavaScript Buttons", "body": "<p>I guess you forgot to wrap value of innerHTML into \"\" :</p>\n\n<pre><code>onclick=\"document.getElementById('t1').innerHTML = \\\"&lt;%= y.method3 %&gt;\\\"\"&gt;\n</code></pre>\n\n<p>Plus, it looks like you may have more than 1 td with id <code>t1</code>, which is wrong. So use classes instead(but in this case your code with assigning innerHTML to the all elements with class <code>someClass</code> will be much larger)</p>\n"}], "owner": {"reputation": 8519, "user_id": 3581788, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ghs5V.jpg?s=128&g=1", "display_name": "Sylar", "link": "https://stackoverflow.com/users/3581788/sylar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1493305282, "creation_date": 1424257515, "last_edit_date": 1493305282, "question_id": 28582025, "link": "https://stackoverflow.com/questions/28582025/rails-4-changing-table-values-with-javascript-buttons", "title": "Rails 4: Changing Table Values with JavaScript Buttons", "body": "<p>I want to use JavaScript in my rails 4 scaffold. In my table I want when I click a button (javascript button) it changes the values on that table column. My table has a loop:</p>\n\n<pre><code>&lt;% @x.each do |y| %&gt;\n &lt;%= y.method %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Out of that loop I will have:</p>\n\n<pre><code>&lt;button type=\"button\"\n  onclick=\"document.getElementById('t1').innerHTML = &lt;%= y.method1 %&gt;\"&gt;\n  Type 1.\n&lt;/button&gt;\n\n&lt;button type=\"button\"\n  onclick=\"document.getElementById('t1').innerHTML = &lt;%= y.method2 %&gt;\"&gt;\n  Type 2.\n&lt;/button&gt;\n\n&lt;button type=\"button\"\n  onclick=\"document.getElementById('t1').innerHTML = &lt;%= y.method3 %&gt;\"&gt;\n  Type 3.\n&lt;/button&gt;\n</code></pre>\n\n<p>And in the loop as above table:</p>\n\n<pre><code>&lt;% @x.each do |y| %&gt;\n &lt;td id=\"t1\"&gt;&lt;/td&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Sure enough I get undeclared method \"y\". But If I put the loop around the javascript buttons it work BUT...in the table only one row's value changed. What's the correct way around it?</p>\n"}, {"tags": ["ruby", "mongodb", "mongodb-query", "subdocument"], "comments": [{"owner": {"reputation": 2823, "user_id": 3163075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f206f27fdda86c8ff8c98595a611133?s=128&d=identicon&r=PG&f=1", "display_name": "Anima-t3d", "link": "https://stackoverflow.com/users/3163075/anima-t3d"}, "edited": false, "score": 1, "creation_date": 1432931113, "post_id": 28581944, "comment_id": 49150267, "body": "Related to: <a href=\"http://stackoverflow.com/questions/3985214/retrieve-only-the-queried-element-in-an-object-array-in-mongodb-collection\" title=\"retrieve only the queried element in an object array in mongodb collection\">stackoverflow.com/questions/3985214/&hellip;</a>"}], "owner": {"reputation": 31, "user_id": 4579082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc105d3ead6d9eedf571142d11feaf1a?s=128&d=identicon&r=PG&f=1", "display_name": "d4vesm", "link": "https://stackoverflow.com/users/4579082/d4vesm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 314, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1432933703, "creation_date": 1424257256, "last_edit_date": 1432933703, "question_id": 28581944, "link": "https://stackoverflow.com/questions/28581944/how-do-i-search-for-a-mongodb-subdocument-partial-match", "title": "How do I search for a MongoDB subdocument partial match?", "body": "<p>I have a set of documents in a MongoDB database that describe a meeting venue.  It also contains information about the opening times of a meeting venue.</p>\n\n<p>Example:</p>\n\n<pre><code>{\n  _id: ObjectId(\"54ccbb90cbcb91146d000001\"),\n  name: \"temp_can_add_slots_to_position\",\n  seats: 4,\n  slots: [\n    {\n      _id: ObjectId(\"54ccbb91cbcb91146d000002\"),\n      start_time: 1441094400,\n      end_time: 1441096200,\n      status: \"test\"\n    },\n    {\n      _id: ObjectId(\"54ccbb91cbcb91146d000003\"),\n      start_time: 1441096200,\n      end_time: 1441098000,\n      status: \"open\"\n    },\n    {\n      _id: ObjectId(\"54ccbb91cbcb91146d000004\"),\n      start_time: 1441098000,\n      end_time: 1441099800,\n      status: \"open\"\n    },\n    {\n      _id: ObjectId(\"54ccbb91cbcb91146d000005\"),\n      start_time: 1441099800,\n      end_time: 1441101600,\n      status: \"open\"\n    },\n    {\n      _id: ObjectId(\"54ccbb91cbcb91146d000006\"),\n      start_time: 1441101600,\n      end_time: 1441103400,\n      status: \"open\"\n    },\n    {\n      _id: ObjectId(\"54ccbb91cbcb91146d000007\"),\n      start_time: 1441103400,\n      end_time: 1441105200,\n      status: \"open\"\n    },\n    {\n      _id: ObjectId(\"54ccbb91cbcb91146d000008\"),\n      start_time: 1441105200,\n      end_time: 1441107000,\n      status: \"open\"\n    },\n  ],\n  type: \"private\"\n}\n</code></pre>\n\n<p>I want to search for the document and only return the document, with the subdocuments that have status 'open'.  I can't seem to write a 'find' clause which can achieve this.</p>\n\n<p>For example I'd like the document as above, unchanged except for the 'slot' subdocument with object id 54ccbb91cbcb91146d000002.</p>\n\n<p>This, for example, returns the whole document:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>find({_id: ObjectId(\"54ccbb90cbcb91146d000001\"),\"slots.status\": \"open\"}).limit(10)\n</code></pre>\n\n<p>(Actually sits inside some Ruby which looks like this):</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def list_open_slots_at_a_position(id)\n    working_position = @coll.find( { \"_id:\" =&gt; \"ObjectId(\\\"#{id}\\\")\", \"slots.status:\" =&gt; \"open\" } ).to_a\n    puts working_position\nend\n</code></pre>\n\n<p>What am I doing wrong ?</p>\n"}, {"tags": ["ruby", "chef-infra", "yum"], "answers": [{"tags": [], "owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "is_accepted": true, "score": 0, "last_activity_date": 1424264471, "creation_date": 1424264471, "answer_id": 28584302, "question_id": 28581705, "link": "https://stackoverflow.com/questions/28581705/chef-making-yum-localinstall-of-cookbook-file/28584302#28584302", "title": "chef - making yum localinstall of cookbook_file", "body": "<p>The brief answer is \"use notifications\" but as you talk about many files I would loop over a list like this:</p>\n\n<pre><code>['mksh-39-5.el6.x86_64.rpm','package2.rpm'].each do |p| # start from an array of packages, could be an attributes like node['my_namespace']['packages']\n  package p do # no need to do interpolation here, we just need the name\n    source \"/tmp/#{p}\" # Here we have to concatenate path and name\n    action :nothing # do nothing, just define the resource\n  end\n\n  cookbook_file \"/tmp/#{p}\" do # I prefer setting the destination in the name\n    source p                   # and tell the source name, so in case of different platfom I can take advantage of the resolution of files withint the cookbook tree\n    action :create \n    notifies :install, \"package[/tmp/#{p}]\", :immediately \n  end\nend\n</code></pre>\n\n<p>The <code>:immediately</code> is to fire the package install as soon as the file has been placed, if there's dependencies, you'll have to manage the order of the packages in the array</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3292534"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1179, "favorite_count": 0, "accepted_answer_id": 28584302, "answer_count": 1, "score": 0, "last_activity_date": 1424264471, "creation_date": 1424256527, "question_id": 28581705, "link": "https://stackoverflow.com/questions/28581705/chef-making-yum-localinstall-of-cookbook-file", "title": "chef - making yum localinstall of cookbook_file", "body": "<p>I have some certain rpm's that need to be moved to a box, and yum localinstall'ed there.</p>\n\n<p>Now I know how to make <code>notifies</code> for upon file creation yum would install something from repo, but I don't know how to specify source in this case.</p>\n\n<p>So for now, I have the following:</p>\n\n<pre><code>cookbook_file \"mksh-39-5.el6.x86_64.rpm\" do\n        path \"/tmp/mksh-39-5.el6.x86_64.rpm\"\n        action :create\nend\n\npackage \"mksh-39-5.el6.x86_64.rpm\" do\n        source \"/tmp/mksh-39-5.el6.x86_64.rpm\"\n        action :install\nend\n</code></pre>\n\n<p>The question is - how do I bind them, so that installation would be called upon file creation?</p>\n"}, {"tags": ["ruby", "lambda", "introspection", "proc"], "answers": [{"comments": [{"owner": {"reputation": 2689, "user_id": 1134991, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/e102cb584a0fba3cd07b0a4d79350ba2?s=128&d=identicon&r=PG", "display_name": "user1134991", "link": "https://stackoverflow.com/users/1134991/user1134991"}, "edited": false, "score": 0, "creation_date": 1424256619, "post_id": 28581693, "comment_id": 45471400, "body": "About which version of Ruby are we talking here? I have the old 1.8.7, and it does not have it... Actually, there is no method which begins with &quot;l&quot;... irb(main):006:0&gt; k.methods().sort().select{ |x| x.to_s().match(/^l/)  } =&gt; []"}, {"owner": {"reputation": 660, "user_id": 2422869, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1356c45431d15bc5838dc507ec6868e0?s=128&d=identicon&r=PG&f=1", "display_name": "user2422869", "link": "https://stackoverflow.com/users/2422869/user2422869"}, "reply_to_user": {"reputation": 2689, "user_id": 1134991, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/e102cb584a0fba3cd07b0a4d79350ba2?s=128&d=identicon&r=PG", "display_name": "user1134991", "link": "https://stackoverflow.com/users/1134991/user1134991"}, "edited": false, "score": 1, "creation_date": 1424256714, "post_id": 28581693, "comment_id": 45471446, "body": "@user1134991 I think this method is available since 1.9.3"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 2689, "user_id": 1134991, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/e102cb584a0fba3cd07b0a4d79350ba2?s=128&d=identicon&r=PG", "display_name": "user1134991", "link": "https://stackoverflow.com/users/1134991/user1134991"}, "edited": false, "score": 1, "creation_date": 1424257334, "post_id": 28581693, "comment_id": 45471775, "body": "@user1134991 you should mention your Ruby version in your question and tag it accordingly, especially if you are running a legacy version."}, {"owner": {"reputation": 660, "user_id": 2422869, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1356c45431d15bc5838dc507ec6868e0?s=128&d=identicon&r=PG&f=1", "display_name": "user2422869", "link": "https://stackoverflow.com/users/2422869/user2422869"}, "reply_to_user": {"reputation": 2689, "user_id": 1134991, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/e102cb584a0fba3cd07b0a4d79350ba2?s=128&d=identicon&r=PG", "display_name": "user1134991", "link": "https://stackoverflow.com/users/1134991/user1134991"}, "edited": false, "score": 0, "creation_date": 1424264406, "post_id": 28581693, "comment_id": 45475855, "body": "@user1134991 see updated answer! Hope you&#39;ll enjoy it."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1424281579, "post_id": 28581693, "comment_id": 45487214, "body": "<i>&quot;We are going to make ruby native extension&quot;</i> +1 down the rabbit hole :-P"}], "tags": [], "owner": {"reputation": 660, "user_id": 2422869, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1356c45431d15bc5838dc507ec6868e0?s=128&d=identicon&r=PG&f=1", "display_name": "user2422869", "link": "https://stackoverflow.com/users/2422869/user2422869"}, "is_accepted": true, "score": 5, "last_activity_date": 1424295246, "last_edit_date": 1424295246, "creation_date": 1424256482, "answer_id": 28581693, "question_id": 28581642, "link": "https://stackoverflow.com/questions/28581642/how-can-one-know-if-a-proc-is-a-lambda-or-not-in-ruby/28581693#28581693", "title": "How can one know if a Proc is a lambda or not in Ruby", "body": "<p><strong>Ruby 1.9.3 and higher</strong></p>\n\n<p>You are looking for <a href=\"http://ruby-doc.org//core-2.2.0/Proc.html#method-i-lambda-3F\" rel=\"nofollow\">Proc#lambda?</a> method.</p>\n\n<pre><code>k = lambda { |x| x.to_i + 1 }\nk.lambda? #=&gt; true\nk = proc { |x| x.to_i + 1 }\nk.lambda? #=&gt; false\n</code></pre>\n\n<p><strong>Pre 1.9.3 solution</strong></p>\n\n<p>We are going to make ruby native extension.\nCreate <code>proc_lambda/proc_lambda.c</code> file with following content.</p>\n\n<pre><code>#include &lt;ruby.h&gt;\n#include &lt;node.h&gt;\n#include &lt;env.h&gt;\n\n\n/* defined so at eval.c */\n#define BLOCK_LAMBDA  2\nstruct BLOCK {\n    NODE *var;\n    NODE *body;\n    VALUE self;\n    struct FRAME frame;\n    struct SCOPE *scope;\n    VALUE klass;\n    NODE *cref;\n    int iter;\n    int vmode;\n    int flags;\n    int uniq;\n    struct RVarmap *dyna_vars;\n    VALUE orig_thread;\n    VALUE wrapper;\n    VALUE block_obj;\n    struct BLOCK *outer;\n    struct BLOCK *prev;\n};\n\n/* the way of checking if flag is set I took from proc_invoke function at eval.c */\nVALUE is_lambda(VALUE self) \n{\n    struct BLOCK *data;\n    Data_Get_Struct(self, struct BLOCK, data);\n    return (data-&gt;flags &amp; BLOCK_LAMBDA) ? Qtrue : Qfalse;\n}\n\nvoid Init_proc_lambda() \n{\n    /* getting Proc class */\n    ID proc_id = rb_intern(\"Proc\");\n    VALUE proc = rb_const_get(rb_cObject, proc_id);\n\n    /* extending Proc with lambda? method */\n    rb_define_method(proc, \"lambda?\", is_lambda, 0);\n}\n</code></pre>\n\n<p>Create <code>proc_lambda/extconf.rb</code> file:</p>\n\n<pre><code>require 'mkmf'\ncreate_makefile('proc_lambda')\n</code></pre>\n\n<p>In terminal cd to <code>proc_lambda</code> and run</p>\n\n<pre><code>$ ruby extconf.rb\n$ make &amp;&amp; make install\n</code></pre>\n\n<p>Test it in irb</p>\n\n<pre><code>irb(main):001:0&gt; require 'proc_lambda'\n=&gt; true\nirb(main):002:0&gt; lambda {}.lambda?\n=&gt; true\nirb(main):003:0&gt; Proc.new {}.lambda?\n=&gt; false\n</code></pre>\n"}], "owner": {"reputation": 2689, "user_id": 1134991, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/e102cb584a0fba3cd07b0a4d79350ba2?s=128&d=identicon&r=PG", "display_name": "user1134991", "link": "https://stackoverflow.com/users/1134991/user1134991"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1036, "favorite_count": 0, "accepted_answer_id": 28581693, "answer_count": 1, "score": 3, "last_activity_date": 1424295246, "creation_date": 1424256324, "question_id": 28581642, "link": "https://stackoverflow.com/questions/28581642/how-can-one-know-if-a-proc-is-a-lambda-or-not-in-ruby", "title": "How can one know if a Proc is a lambda or not in Ruby", "body": "<p>Suppose I have created a lambda instance, and I want later to query this object to see if it is a proc or a lambda. How does one do that? the .class() method does not do the trick.</p>\n\n<pre><code>irb(main):001:0&gt; k = lambda{ |x| x.to_i() +1 }\n=&gt; #&lt;Proc:0x00002b931948e590@(irb):1&gt;\nirb(main):002:0&gt; k.class()\n=&gt; Proc\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activeadmin"], "answers": [{"comments": [{"owner": {"reputation": 658, "user_id": 1655825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd99f8c81231e4a9d22eea7c1a001ce0?s=128&d=identicon&r=PG", "display_name": "ericpeters0n", "link": "https://stackoverflow.com/users/1655825/ericpeters0n"}, "edited": false, "score": 2, "creation_date": 1470386181, "post_id": 28600867, "comment_id": 64939972, "body": "This doesn&#39;t answer the OPs question, nor does it offer any explicit reason to do otherwise. More detail might be of value to the community."}, {"owner": {"reputation": 1840, "user_id": 858525, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/14c82101fbf5765eedc8a5054ee6b18e?s=128&d=identicon&r=PG", "display_name": "Misha", "link": "https://stackoverflow.com/users/858525/misha"}, "reply_to_user": {"reputation": 658, "user_id": 1655825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd99f8c81231e4a9d22eea7c1a001ce0?s=128&d=identicon&r=PG", "display_name": "ericpeters0n", "link": "https://stackoverflow.com/users/1655825/ericpeters0n"}, "edited": false, "score": 0, "creation_date": 1470417798, "post_id": 28600867, "comment_id": 64959708, "body": "Sorry, but you are wrong here. This answer comes as a suggestion. I got in the past an identical answer from activeadmin and formtastic at the github issues page. So  it comes from personal experience and doesn&#39;t need explicit reasoning if understand that you can use the same github issue tracker as the first source of resolving your problems."}], "tags": [], "owner": {"reputation": 1840, "user_id": 858525, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/14c82101fbf5765eedc8a5054ee6b18e?s=128&d=identicon&r=PG", "display_name": "Misha", "link": "https://stackoverflow.com/users/858525/misha"}, "is_accepted": false, "score": 0, "last_activity_date": 1424331717, "last_edit_date": 1424331717, "creation_date": 1424331403, "answer_id": 28600867, "question_id": 28581105, "link": "https://stackoverflow.com/questions/28581105/active-admin-has-and-belongs-to-many-relationships/28600867#28600867", "title": "Active Admin - has_and_belongs_to_many relationships", "body": "<p>I would use <strong>has_many  througth</strong> association. </p>\n\n<p><strong>has_and_belongs_to_many</strong> can cost few issues in Active Admin.</p>\n"}], "owner": {"reputation": 1178, "user_id": 3414157, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/liyLh.jpg?s=128&g=1", "display_name": "olleh", "link": "https://stackoverflow.com/users/3414157/olleh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 895, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424331717, "creation_date": 1424254810, "question_id": 28581105, "link": "https://stackoverflow.com/questions/28581105/active-admin-has-and-belongs-to-many-relationships", "title": "Active Admin - has_and_belongs_to_many relationships", "body": "<h3>Gemfile</h3>\n\n<pre><code>gem 'rails', '4.1.7'\ngem 'activeadmin', github: 'activeadmin'\n</code></pre>\n\n<h1>Health Profiles</h1>\n\n<h3>model: HealthProfile</h3>\n\n<pre><code>has_and_belongs_to_many :health_concerns, :join_table =&gt; :health_profile_health_concerns\n</code></pre>\n\n<h3>table name: health_profiles</h3>\n\n<pre><code>health_profiles\nid\nname\n</code></pre>\n\n<h1>Health Profile Health Concerns</h1>\n\n<h3>model HealthProfileHealthConcern</h3>\n\n<p>table name = health_profile_health_concerns</p>\n\n<pre><code>health_profile_health_concerns\nhealth_profile_id\nhealth_concerns_id\n</code></pre>\n\n<h1>Health Concerns</h1>\n\n<h3>model HealthConcern</h3>\n\n<pre><code>has_and_belongs_to_many :health_profiles, :join_table =&gt; :health_profile_health_concerns\n</code></pre>\n\n<p>table name = health_concerns</p>\n\n<pre><code>health_concerns\nid\nname\n</code></pre>\n\n<p>My goal is to access the health_concerns of a selected health_profile.</p>\n\n<p>Should I create a link like this? But for this example(blood pressure), I've used a Many To Many relationship unlike has_and_belongs_to_many</p>\n\n<pre><code>li link_to \"Blood Pressure\",    admin_health_profile_blood_pressures_path(health_profile)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "heroku", "devise"], "comments": [{"owner": {"reputation": 2755, "user_id": 1543985, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/h2xDy.jpg?s=128&g=1", "display_name": "RichardAE", "link": "https://stackoverflow.com/users/1543985/richardae"}, "edited": false, "score": 0, "creation_date": 1424254320, "post_id": 28580677, "comment_id": 45469871, "body": "Line 6 is the &#39;end&#39;, is that the omniauth file you were deploying?"}, {"owner": {"reputation": 23981, "user_id": 2813589, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/9axBj.jpg?s=128&g=1", "display_name": "\u30a2\u30ec\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/2813589/%e3%82%a2%e3%83%ac%e3%83%83%e3%82%af%e3%82%b9"}, "reply_to_user": {"reputation": 2755, "user_id": 1543985, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/h2xDy.jpg?s=128&g=1", "display_name": "RichardAE", "link": "https://stackoverflow.com/users/1543985/richardae"}, "edited": false, "score": 0, "creation_date": 1424254850, "post_id": 28580677, "comment_id": 45470240, "body": "@RichardAE, it points to <code>provider(:google_oauth2, .....</code> line."}], "answers": [{"comments": [{"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1424255532, "post_id": 28581319, "comment_id": 45470683, "body": "This has nothing to do with the error and stacktrace"}], "tags": [], "owner": {"reputation": 318, "user_id": 4015297, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/827cf44882f40849d3b6f2540915a901?s=128&d=identicon&r=PG", "display_name": "MaxCodes", "link": "https://stackoverflow.com/users/4015297/maxcodes"}, "is_accepted": false, "score": -1, "last_activity_date": 1424255424, "creation_date": 1424255424, "answer_id": 28581319, "question_id": 28580677, "link": "https://stackoverflow.com/questions/28580677/nomethoderror-undefined-method-for-nilnilclass-for-assetsprecompile-on-h/28581319#28581319", "title": "NoMethodError: undefined method `[]&#39; for nil:NilClass for assets:precompile on heroku", "body": "<p>I was having the same problem. The cause of this problem is that Rails uses a database system called <strong>sqlite3</strong>, Heroku does not use this database. To fix this, go into your <strong>Gemfile</strong> and scroll down until you see something which will look a bit like this</p>\n\n<pre><code>group :development, :test do\n  gem 'byebug'\n  gem 'web-console', '~&gt; 2.0'\nend\n</code></pre>\n\n<p><strong>Note</strong>: If you are using any versions lower than Rails 4.0.0, you will not have this group, simply create it. </p>\n\n<p>Now somewhere at the top of your Gemfile, will be a line which says</p>\n\n<pre><code>gem 'sqlite3'\n</code></pre>\n\n<p>Move this line into the <strong>Development, Test Group</strong> This now will only run in development. You can now try creating your Heroku app again by writing</p>\n\n<pre><code>$ heroku create\n</code></pre>\n\n<p>Then you may need to migrate your database. Do this by running</p>\n\n<pre><code>$ rake db:migrate\n</code></pre>\n\n<p>Now push to Heroku</p>\n\n<pre><code>$ heroku push\n</code></pre>\n\n<p>That should work!</p>\n\n<p>Hope I helped ;)</p>\n"}, {"comments": [{"owner": {"reputation": 23981, "user_id": 2813589, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/9axBj.jpg?s=128&g=1", "display_name": "\u30a2\u30ec\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/2813589/%e3%82%a2%e3%83%ac%e3%83%83%e3%82%af%e3%82%b9"}, "edited": false, "score": 0, "creation_date": 1424255647, "post_id": 28581327, "comment_id": 45470766, "body": "but <code>$ga_client</code> is defined in <code>initializers&#47;ga.rb</code>. hasn&#39;t it been executed by the time when omniauth.rb is being executed?"}, {"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "reply_to_user": {"reputation": 23981, "user_id": 2813589, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/9axBj.jpg?s=128&g=1", "display_name": "\u30a2\u30ec\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/2813589/%e3%82%a2%e3%83%ac%e3%83%83%e3%82%af%e3%82%b9"}, "edited": false, "score": 0, "creation_date": 1424255836, "post_id": 28581327, "comment_id": 45470902, "body": "The stacktrace says it s nil. defining that in other file does not make it available  here"}, {"owner": {"reputation": 23981, "user_id": 2813589, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/9axBj.jpg?s=128&g=1", "display_name": "\u30a2\u30ec\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/2813589/%e3%82%a2%e3%83%ac%e3%83%83%e3%82%af%e3%82%b9"}, "edited": false, "score": 0, "creation_date": 1424255923, "post_id": 28581327, "comment_id": 45470961, "body": "it&#39;s a global variable and it should be visible."}, {"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "reply_to_user": {"reputation": 23981, "user_id": 2813589, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/9axBj.jpg?s=128&g=1", "display_name": "\u30a2\u30ec\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/2813589/%e3%82%a2%e3%83%ac%e3%83%83%e3%82%af%e3%82%b9"}, "edited": false, "score": 0, "creation_date": 1424255999, "post_id": 28581327, "comment_id": 45471002, "body": "I think you are misunderstanding $ variables. In ruby those are not global variables. Check this for some uses of $ in ruby: <a href=\"http://jimneath.org/2010/01/04/cryptic-ruby-global-variables-and-their-meanings.html\" rel=\"nofollow noreferrer\">jimneath.org/2010/01/04/&hellip;</a>"}, {"owner": {"reputation": 23981, "user_id": 2813589, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/9axBj.jpg?s=128&g=1", "display_name": "\u30a2\u30ec\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/2813589/%e3%82%a2%e3%83%ac%e3%83%83%e3%82%af%e3%82%b9"}, "edited": false, "score": 0, "creation_date": 1424256162, "post_id": 28581327, "comment_id": 45471125, "body": "are you saying that <code>Variables starting with $ are global,</code> is false?"}, {"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "reply_to_user": {"reputation": 23981, "user_id": 2813589, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/9axBj.jpg?s=128&g=1", "display_name": "\u30a2\u30ec\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/2813589/%e3%82%a2%e3%83%ac%e3%83%83%e3%82%af%e3%82%b9"}, "edited": false, "score": 0, "creation_date": 1424256385, "post_id": 28581327, "comment_id": 45471256, "body": "Hmmm it looks Im wrong on the last one. There ARE $ global  variables in ruby, but they are regarded as bad practice - as you could experience yourself! :-) the problem might be the load order of the initializers. Using ENV variables is still the way to go"}, {"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "reply_to_user": {"reputation": 23981, "user_id": 2813589, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/9axBj.jpg?s=128&g=1", "display_name": "\u30a2\u30ec\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/2813589/%e3%82%a2%e3%83%ac%e3%83%83%e3%82%af%e3%82%b9"}, "edited": false, "score": 0, "creation_date": 1424256744, "post_id": 28581327, "comment_id": 45471474, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/71162/discussion-between-dgilperez-and-alexander-supertramp\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "is_accepted": true, "score": 3, "last_activity_date": 1424256594, "last_edit_date": 1424256594, "creation_date": 1424255442, "answer_id": 28581327, "question_id": 28580677, "link": "https://stackoverflow.com/questions/28580677/nomethoderror-undefined-method-for-nilnilclass-for-assetsprecompile-on-h/28581327#28581327", "title": "NoMethodError: undefined method `[]&#39; for nil:NilClass for assets:precompile on heroku", "body": "<p>In your code, $ga_client is nil. You are not defining such an array anywhere in your file and, in case is defined in other place, it's not loaded at the time this initializer is executed.</p>\n\n<p>Try setting the client_id and client_secret with environment variables, as recommended in the docs.</p>\n\n<pre><code>provider :google_auth2, ENV['GOOGLE_KEY'], ENV['GOOGLE_SECRET']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23981, "user_id": 2813589, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/9axBj.jpg?s=128&g=1", "display_name": "\u30a2\u30ec\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/2813589/%e3%82%a2%e3%83%ac%e3%83%83%e3%82%af%e3%82%b9"}, "is_accepted": false, "score": 0, "last_activity_date": 1424255535, "creation_date": 1424255535, "answer_id": 28581358, "question_id": 28580677, "link": "https://stackoverflow.com/questions/28580677/nomethoderror-undefined-method-for-nilnilclass-for-assetsprecompile-on-h/28581358#28581358", "title": "NoMethodError: undefined method `[]&#39; for nil:NilClass for assets:precompile on heroku", "body": "<p>The globals variables weren't initialized:</p>\n\n<pre><code># but it is necessary\n\nRails.application.config.middleware.use OmniAuth::Builder do\n  provider(:google_oauth2, $ga_client['client_id'], $ga_client['client_secret'], \n    { scope: 'userinfo.profile, userinfo.email, analytics', access_type: 'offline', prompt: 'consent' }\n  )\nend\n\n# ops $ga_client is nil\n</code></pre>\n\n<p>I discovered it when I replaced the code above with:</p>\n\n<pre><code>Rails.application.config.middleware.use OmniAuth::Builder do\n  provider :google_oauth2, ENV[\"GOOGLE_CLIENT_ID\"], ENV[\"GOOGLE_CLIENT_SECRET\"]\nend\n</code></pre>\n"}], "owner": {"reputation": 23981, "user_id": 2813589, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/9axBj.jpg?s=128&g=1", "display_name": "\u30a2\u30ec\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/2813589/%e3%82%a2%e3%83%ac%e3%83%83%e3%82%af%e3%82%b9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2067, "favorite_count": 0, "accepted_answer_id": 28581327, "answer_count": 3, "score": 0, "last_activity_date": 1424256594, "creation_date": 1424253635, "last_edit_date": 1424255054, "question_id": 28580677, "link": "https://stackoverflow.com/questions/28580677/nomethoderror-undefined-method-for-nilnilclass-for-assetsprecompile-on-h", "title": "NoMethodError: undefined method `[]&#39; for nil:NilClass for assets:precompile on heroku", "body": "<p>An app using devise and omniauth is working well on localhost, but when I deploy it on heroku, I get an error:</p>\n\n<pre><code>-----&gt; Preparing app for Rails asset pipeline\n       Running: rake assets:precompile\n       rake aborted!\n       NoMethodError: undefined method `[]' for nil:NilClass\n       /tmp/build_e711adadeab2d8cb9d37632e4c0ba08b/config/initializers/omniauth.rb:6:in `block in &lt;top (required)&gt;'\n       /tmp/build_e711adadeab2d8cb9d37632e4c0ba08b/vendor/bundle/ruby/2.1.0/gems/rack-1.5.2/lib/rack/builder.rb:55:in `instance_eval'\n       /tmp/build_e711adadeab2d8cb9d37632e4c0ba08b/vendor/bundle/ruby/2.1.0/gems/rack-1.5.2/lib/rack/builder.rb:55:in `initialize'\n       /tmp/build_e711adadeab2d8cb9d37632e4c0ba08b/vendor/bundle/ruby/2.1.0/gems/omniauth-1.2.2/lib/omniauth/builder.rb:6:in `initialize'\n       /tmp/build_e711adadeab2d8cb9d37632e4c0ba08b/vendor/bundle/ruby/2.1.0/gems/actionpack-4.1.4/lib/action_dispatch/middleware/stack.rb:43:in `new'\n       /tmp/build_e711adadeab2d8cb9d37632e4c0ba08b/vendor/bundle/ruby/2.1.0/gems/actionpack-4.1.4/lib/action_dispatch/middleware/stack.rb:43:in `build'\n       /tmp/build_e711adadeab2d8cb9d37632e4c0ba08b/vendor/bundle/ruby/2.1.0/gems/actionpack-4.1.4/lib/action_dispatch/middleware/stack.rb:118:in `block in build'\n       /tmp/build_e711adadeab2d8cb9d37632e4c0ba08b/vendor/bundle/ruby/2.1.0/gems/actionpack-4.1.4/lib/action_dispatch/middleware/stack.rb:118:in `each'\n       /tmp/build_e711adadeab2d8cb9d37632e4c0ba08b/vendor/bundle/ruby/2.1.0/gems/actionpack-4.1.4/lib/action_dispatch/middleware/stack.rb:118:in `inject'\n       /tmp/build_e711adadeab2d8cb9d37632e4c0ba08b/vendor/bundle/ruby/2.1.0/gems/actionpack-4.1.4/lib/action_dispatch/middleware/stack.rb:118:in `build'\n       /tmp/build_e711adadeab2d8cb9d37632e4c0ba08b/vendor/bundle/ruby/2.1.0/gems/railties-4.1.4/lib/rails/engine.rb:498:in `app'\n       /tmp/build_e711adadeab2d8cb9d37632e4c0ba08b/vendor/bundle/ruby/2.1.0/gems/railties-4.1.4/lib/rails/application/finisher.rb:36:in `block in &lt;module:Finisher&gt;'\n       /tmp/build_e711adadeab2d8cb9d37632e4c0ba08b/vendor/bundle/ruby/2.1.0/gems/railties-4.1.4/lib/rails/initializable.rb:30:in `instance_exec'\n       /tmp/build_e711adadeab2d8cb9d37632e4c0ba08b/vendor/bundle/ruby/2.1.0/gems/railties-4.1.4/lib/rails/initializable.rb:30:in `run'\n       /tmp/build_e711adadeab2d8cb9d37632e4c0ba08b/vendor/bundle/ruby/2.1.0/gems/railties-4.1.4/lib/rails/initializable.rb:55:in `block in run_initializers'\n       /tmp/build_e711adadeab2d8cb9d37632e4c0ba08b/vendor/bundle/ruby/2.1.0/gems/railties-4.1.4/lib/rails/initializable.rb:54:in `run_initializers'\n       /tmp/build_e711adadeab2d8cb9d37632e4c0ba08b/vendor/bundle/ruby/2.1.0/gems/railties-4.1.4/lib/rails/application.rb:300:in `initialize!'\n       /tmp/build_e711adadeab2d8cb9d37632e4c0ba08b/config/environment.rb:5:in `&lt;top (required)&gt;'\n       /tmp/build_e711adadeab2d8cb9d37632e4c0ba08b/vendor/bundle/ruby/2.1.0/gems/activesupport-4.1.4/lib/active_support/dependencies.rb:247:in `require'\n       /tmp/build_e711adadeab2d8cb9d37632e4c0ba08b/vendor/bundle/ruby/2.1.0/gems/activesupport-4.1.4/lib/active_support/dependencies.rb:247:in `block in require'\n       /tmp/build_e711adadeab2d8cb9d37632e4c0ba08b/vendor/bundle/ruby/2.1.0/gems/activesupport-4.1.4/lib/active_support/dependencies.rb:232:in `load_dependency'\n       /tmp/build_e711adadeab2d8cb9d37632e4c0ba08b/vendor/bundle/ruby/2.1.0/gems/activesupport-4.1.4/lib/active_support/dependencies.rb:247:in `require'\n       /tmp/build_e711adadeab2d8cb9d37632e4c0ba08b/vendor/bundle/ruby/2.1.0/gems/railties-4.1.4/lib/rails/application.rb:276:in `require_environment!'\n       /tmp/build_e711adadeab2d8cb9d37632e4c0ba08b/vendor/bundle/ruby/2.1.0/gems/railties-4.1.4/lib/rails/application.rb:379:in `block in run_tasks_blocks'\n       /tmp/build_e711adadeab2d8cb9d37632e4c0ba08b/vendor/bundle/ruby/2.1.0/gems/sprockets-rails-2.2.2/lib/sprockets/rails/task.rb:64:in `block (2 levels) in define'\n       Tasks: TOP =&gt; environment\n       (See full trace by running task with --trace)\n !\n !     Precompiling assets failed.\n !\n\n !     Push rejected, failed to compile Ruby app\n\nTo git@heroku.com:my-app.git\n ! [remote rejected] master -&gt; master (pre-receive hook declined)\n</code></pre>\n\n<p>Here is Gemfile and omniauth files:</p>\n\n<pre><code>#Gemfile:\n#....\ngem 'google-api-client'\ngem 'omniauth'\ngem 'omniauth-google-oauth2'\ngem 'devise'\n#.....\n\n\n#config/initializers/omniauth.rb\n\n# probably this isn't necessary\nif Rails.env.production?\n  OmniAuth.config.full_host = 'https://my-app.herokuapp.com'\nend\n\n# but it is necessary\nRails.application.config.middleware.use OmniAuth::Builder do\n  provider(:google_oauth2, $ga_client['client_id'], $ga_client['client_secret'], \n    { scope: 'userinfo.profile, userinfo.email, analytics', access_type: 'offline', prompt: 'consent' }\n  )\nend\n</code></pre>\n"}, {"tags": ["html", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1130, "user_id": 4574914, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c27823d944d6c2125057e337c8700b97?s=128&d=identicon&r=PG&f=1", "display_name": "joeyk16", "link": "https://stackoverflow.com/users/4574914/joeyk16"}, "edited": false, "score": 0, "creation_date": 1424253617, "post_id": 28580557, "comment_id": 45469403, "body": "You are a champion! Give yourself a high 5 before you go to bed tonight."}, {"owner": {"reputation": 1130, "user_id": 4574914, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c27823d944d6c2125057e337c8700b97?s=128&d=identicon&r=PG&f=1", "display_name": "joeyk16", "link": "https://stackoverflow.com/users/4574914/joeyk16"}, "edited": false, "score": 0, "creation_date": 1424253852, "post_id": 28580557, "comment_id": 45469535, "body": "Just a quick one. When i Click &quot;sign out&quot; i get the same error  No route matches [GET] &quot;/users/sign_out&quot;  Where do i fix that error? I cant see anything that i should change to get instead of put...."}, {"owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "reply_to_user": {"reputation": 1130, "user_id": 4574914, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c27823d944d6c2125057e337c8700b97?s=128&d=identicon&r=PG&f=1", "display_name": "joeyk16", "link": "https://stackoverflow.com/users/4574914/joeyk16"}, "edited": false, "score": 0, "creation_date": 1424253978, "post_id": 28580557, "comment_id": 45469634, "body": "Go to <code>config&#47;initializers&#47;devise.rb</code>. find <code>config.sign_out_via = :delete</code>, if no there put <code>config.sign_out_via = :get</code> or if exist change <code>:delete</code> to <code>:get</code>"}, {"owner": {"reputation": 1130, "user_id": 4574914, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c27823d944d6c2125057e337c8700b97?s=128&d=identicon&r=PG&f=1", "display_name": "joeyk16", "link": "https://stackoverflow.com/users/4574914/joeyk16"}, "edited": false, "score": 0, "creation_date": 1424254461, "post_id": 28580557, "comment_id": 45469966, "body": "It was there. So i changed to config.sign_out_via = :get  I still get the same error. Weird.."}, {"owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "reply_to_user": {"reputation": 1130, "user_id": 4574914, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c27823d944d6c2125057e337c8700b97?s=128&d=identicon&r=PG&f=1", "display_name": "joeyk16", "link": "https://stackoverflow.com/users/4574914/joeyk16"}, "edited": false, "score": 0, "creation_date": 1424254679, "post_id": 28580557, "comment_id": 45470121, "body": "Restart rails server, because you have changed <code>initializers</code> file. also restart when you add gem"}], "tags": [], "owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "is_accepted": false, "score": 1, "last_activity_date": 1424253321, "creation_date": 1424253321, "answer_id": 28580557, "question_id": 28580447, "link": "https://stackoverflow.com/questions/28580447/no-route-matches-get-links-1-like-ruby-on-rails/28580557#28580557", "title": "No route matches [GET] &quot;/links/1/like&quot; - Ruby On Rails", "body": "<p>In your route you have defined</p>\n\n<pre><code>put \"like\",    to: \"links#upvote\"\n</code></pre>\n\n<p>Which means that verb has to be 'PUT'</p>\n\n<p>You are hitting 'GET' <code>/links/1/like</code>.\nYou nedd to change from <code>get</code> request to <code>put</code> request</p>\n\n<p>You route is <code>[PUT] \"/links/1/like\"</code> not <code>[GET] \"/links/1/like\"</code> </p>\n\n<p>Every link is <code>get</code> request, you need <code>ajax</code> request for this</p>\n"}, {"comments": [{"owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "edited": false, "score": 0, "creation_date": 1424253845, "post_id": 28580638, "comment_id": 45469531, "body": "What if someone by accident opens <code>&#47;links&#47;1&#47;like</code> then he will get upvote, this is not god practice."}, {"owner": {"reputation": 9125, "user_id": 671422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/85da2a1fa3e4017815ff5d3a3d70fabe?s=128&d=identicon&r=PG", "display_name": "Yule", "link": "https://stackoverflow.com/users/671422/yule"}, "edited": false, "score": 0, "creation_date": 1424256955, "post_id": 28580638, "comment_id": 45471591, "body": "GET should only be used for non-changing requests. i.e. if you requested it a 1000 times, nothing would change. Generally crawlers will follow GET links and you may end up with lots of fake up/down votes"}], "tags": [], "owner": {"reputation": 108, "user_id": 3457261, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/52959c16273e65e6de6c46cb72429b96?s=128&d=identicon&r=PG&f=1", "display_name": "shilpi_agrawal", "link": "https://stackoverflow.com/users/3457261/shilpi-agrawal"}, "is_accepted": false, "score": 0, "last_activity_date": 1424253525, "creation_date": 1424253525, "answer_id": 28580638, "question_id": 28580447, "link": "https://stackoverflow.com/questions/28580447/no-route-matches-get-links-1-like-ruby-on-rails/28580638#28580638", "title": "No route matches [GET] &quot;/links/1/like&quot; - Ruby On Rails", "body": "<p>Make your path in routes as get or post instead of put</p>\n\n<p>For e.g. </p>\n\n<p><code>resources :links do\n    member do\n      get 'like'\n      get 'dislike'\n    end</code></p>\n\n<p>You are getting the error because you haven't specified the routes in your routes file.</p>\n"}, {"tags": [], "owner": {"reputation": 813, "user_id": 1961154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af6b9daa60a6856519080acddfd5f254?s=128&d=identicon&r=PG", "display_name": "intale", "link": "https://stackoverflow.com/users/1961154/intale"}, "is_accepted": false, "score": 0, "last_activity_date": 1424254225, "last_edit_date": 1424254225, "creation_date": 1424253901, "answer_id": 28580775, "question_id": 28580447, "link": "https://stackoverflow.com/questions/28580447/no-route-matches-get-links-1-like-ruby-on-rails/28580775#28580775", "title": "No route matches [GET] &quot;/links/1/like&quot; - Ruby On Rails", "body": "<p>@joeyk16, just try to change <code>:method =&gt; :put</code> option to <code>:data =&gt; {:method =&gt; :put}</code> and include jquery_ujs in your application.js (if you haven't yet).</p>\n\n<p>So the link would looks like: </p>\n\n<pre><code>link_to dislike_link_path(link), :data =&gt; {:method =&gt; :put}, :class =&gt; \"btn btn-default btn-sm\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1004, "user_id": 2091331, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9ff378547e4b88acd5cd7b4f9b15b956?s=128&d=identicon&r=PG", "display_name": "Jbur43", "link": "https://stackoverflow.com/users/2091331/jbur43"}, "is_accepted": false, "score": 0, "last_activity_date": 1450377126, "creation_date": 1450377126, "answer_id": 34341798, "question_id": 28580447, "link": "https://stackoverflow.com/questions/28580447/no-route-matches-get-links-1-like-ruby-on-rails/34341798#34341798", "title": "No route matches [GET] &quot;/links/1/like&quot; - Ruby On Rails", "body": "<p>I had this problem and solved it this way:</p>\n\n<p>It turns out that the answer was related to JQuery. I was getting an Uncaught ReferenceError: jQuery is not defined error and so what I did was include JQuery outright in my application.html.erb file.</p>\n\n<p>You have to put this ahead of all your other scripts.</p>\n\n<pre><code>&lt;script src=\"http://code.jquery.com/jquery-1.11.3.min.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>After that, the voting began to work</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5757100, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IeVpM.jpg?s=128&g=1", "display_name": "Hazrijordan", "link": "https://stackoverflow.com/users/5757100/hazrijordan"}, "is_accepted": false, "score": 0, "last_activity_date": 1460141938, "creation_date": 1460141938, "answer_id": 36507288, "question_id": 28580447, "link": "https://stackoverflow.com/questions/28580447/no-route-matches-get-links-1-like-ruby-on-rails/36507288#36507288", "title": "No route matches [GET] &quot;/links/1/like&quot; - Ruby On Rails", "body": "<p>For my routes, I removed the <code>member do</code> bit:    </p>\n\n<pre><code>resources :links do\n    #member do\n      put \"Like\",    to: \"links#upvote\"\n      put \"Dislike\", to: \"links#downvote\"\n    #end\nend \n</code></pre>\n\n<p>After running rake routes I realised that the path name has been changed as well. Here's my <strong>app/views/links/index.html.erb</strong>:</p>\n\n<pre><code>&lt;% @links.each do |link| %&gt;\n &lt;div class=\"link row clearfix\"&gt;\n    &lt;h2&gt;\n        &lt;%= link_to link.title, link %&gt;&lt;br /&gt;\n        &lt;small class=\"author\"&gt;Submitted &lt;%= time_ago_in_words(link.created_at) %&gt; by &lt;%= link.user.email %&gt;&lt;/small&gt;\n    &lt;/h2&gt;\n\n    &lt;div class=\"btn-group\"&gt;\n        &lt;a class=\"btn btn-default btn-sm\" href=\"&lt;%= link.url %&gt;\"&gt;Visit Link&lt;/a&gt;\n        &lt;%= link_to link_Like_path(link), method: :put, class: \"btn btn-default btn-sm\" do %&gt;\n          &lt;span class=\"glyphicon glyphicon-chevron-up\"&gt;&lt;/span&gt;\n          Upvote\n          &lt;%= link.get_upvotes.size %&gt;\n        &lt;% end %&gt;\n        &lt;%= link_to link_Dislike_path(link), method: :put, class: \"btn btn-default btn-sm\" do %&gt;\n          &lt;span class=\"glyphicon glyphicon-chevron-down\"&gt;\n            Downvote\n            &lt;%= link.get_downvotes.size %&gt;\n        &lt;% end %&gt;\n    &lt;/div&gt;\n &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>apparently it's now <code>link_Like_path(link)</code> &amp; <code>link_Dislike_path(link)</code></p>\n\n<p>Hope this helps </p>\n"}], "owner": {"reputation": 1130, "user_id": 4574914, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c27823d944d6c2125057e337c8700b97?s=128&d=identicon&r=PG&f=1", "display_name": "joeyk16", "link": "https://stackoverflow.com/users/4574914/joeyk16"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 386, "favorite_count": 1, "answer_count": 5, "score": 0, "last_activity_date": 1460141938, "creation_date": 1424253003, "question_id": 28580447, "link": "https://stackoverflow.com/questions/28580447/no-route-matches-get-links-1-like-ruby-on-rails", "title": "No route matches [GET] &quot;/links/1/like&quot; - Ruby On Rails", "body": "<p>Hello im doing <a href=\"https://www.youtube.com/watch?v=7-1HCWbu7iU\" rel=\"nofollow\">https://www.youtube.com/watch?v=7-1HCWbu7iU</a> and im up to 50.07min. Im new to ruby. Been studying for 3 weeks.</p>\n\n<p>I just loaded Acts As Votable Gem. Loaded it as per instructions. I was able to add an upvote using ruby console. So it seems to work.</p>\n\n<p>However.</p>\n\n<p><strong>When i click upvote</strong> I get this error <strong>No route matches [GET] \"/links/1/like\"</strong></p>\n\n<p>You can see an image of it at this link <a href=\"http://postimg.org/delete/8cmbm60j6/\" rel=\"nofollow\">http://postimg.org/delete/8cmbm60j6/</a></p>\n\n<p><strong>Below is my views>links>index.html.erb</strong></p>\n\n<pre><code>&lt;% @links.each do |link| %&gt;\n  &lt;div class=\"link row clearfix\"&gt;\n    &lt;h2&gt;\n      &lt;%= link_to link.title, link %&gt;&lt;br&gt;\n      &lt;small class=\"author\"&gt;Submitted &lt;%= time_ago_in_words(link.created_at) %&gt; by &lt;%= link.user.email %&gt;&lt;/small&gt;\n    &lt;/h2&gt;\n&lt;div class=\"btn-group\"&gt;\n      &lt;a class=\"btn btn-default btn-sm\" href=\"&lt;%= link.url %&gt;\"&gt;Visit Link&lt;/a&gt;\n      &lt;%= link_to like_link_path(link), method: :put, class: \"btn btn-default btn-sm\" do %&gt;\n        &lt;span class=\"glyphicon glyphicon-chevron-up\"&gt;&lt;/span&gt;\n        Upvote\n        &lt;%= link.get_upvotes.size %&gt;\n      &lt;% end %&gt;\n      &lt;%= link_to dislike_link_path(link), method: :put, class: \"btn btn-default btn-sm\" do %&gt;\n        &lt;span class=\"glyphicon glyphicon-chevron-down\"&gt;\n        Downvote\n        &lt;%= link.get_downvotes.size %&gt;\n      &lt;% end %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>Below is my routes.rb</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n  resources :comments\n\n  devise_for :users\n\n  resources :links do\n    member do\n      put \"like\",    to: \"links#upvote\"\n      put \"dislike\", to: \"links#downvote\"\n    end\n    resources :comments\n  end\n  root \"links#index\"\n</code></pre>\n\n<p>Anyone know what the problem is? Google isn't helping... Thanks!</p>\n"}, {"tags": ["ruby", "regex", "constants"], "comments": [{"owner": {"reputation": 2672, "user_id": 223936, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/j58Xn.jpg?s=128&g=1", "display_name": "Plastikfan", "link": "https://stackoverflow.com/users/223936/plastikfan"}, "edited": false, "score": 0, "creation_date": 1424254240, "post_id": 28580382, "comment_id": 45469808, "body": "mmm, I&#39;ve just discovered the BEGIN statement which defines functionality to be run before program starts. Is this where you could initialise constants?"}], "answers": [{"comments": [{"owner": {"reputation": 2672, "user_id": 223936, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/j58Xn.jpg?s=128&g=1", "display_name": "Plastikfan", "link": "https://stackoverflow.com/users/223936/plastikfan"}, "edited": false, "score": 0, "creation_date": 1424256104, "post_id": 28580539, "comment_id": 45471078, "body": "That&#39;s great and exactly what I needed. I can&#39;t believe that all the combinations I tried, this one was not one of them. So the fact that an identifier starts with a capital letter inside a class, automatically makes it class level without having to prefix with @@. Is that correct?"}, {"owner": {"reputation": 6606, "user_id": 1586762, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fb7415aea80a8fa64f7427086eedb6ee?s=128&d=identicon&r=PG", "display_name": "Vitalii Elenhaupt", "link": "https://stackoverflow.com/users/1586762/vitalii-elenhaupt"}, "reply_to_user": {"reputation": 2672, "user_id": 223936, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/j58Xn.jpg?s=128&g=1", "display_name": "Plastikfan", "link": "https://stackoverflow.com/users/223936/plastikfan"}, "edited": false, "score": 0, "creation_date": 1424344131, "post_id": 28580539, "comment_id": 45514207, "body": "@Shantaram yes, that is correct. Here is relevant question regarding class variables and constants <a href=\"http://stackoverflow.com/questions/5890118/what-does-variable-mean-in-ruby\" title=\"what does variable mean in ruby\">stackoverflow.com/questions/5890118/&hellip;</a>"}], "tags": [], "owner": {"reputation": 6606, "user_id": 1586762, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fb7415aea80a8fa64f7427086eedb6ee?s=128&d=identicon&r=PG", "display_name": "Vitalii Elenhaupt", "link": "https://stackoverflow.com/users/1586762/vitalii-elenhaupt"}, "is_accepted": true, "score": 5, "last_activity_date": 1424254292, "last_edit_date": 1424254292, "creation_date": 1424253254, "answer_id": 28580539, "question_id": 28580382, "link": "https://stackoverflow.com/questions/28580382/how-to-define-class-level-constant-regular-expressions-in-ruby-to-be-used-by-ext/28580539#28580539", "title": "How to define class level constant regular expressions in Ruby to be used by external classes", "body": "<blockquote>\n  <p>A constant in Ruby is like a variable, except that its value is supposed to\n  remain constant for the duration of a program. The Ruby interpreter does not\n  actually enforce the constancy of constants, but it does issue a warning if a\n  program changes the value of a constant. Lexically, the names of constants look\n  like the names of local variables, except that they begin with a capital letter.\n  By convention, most constants are written in all uppercase with underscores to\n  separate words, LIKE_THIS. Ruby class and module names are also constants, but\n  they are conventionally written using initial capital letters and camel case,\n  LikeThis.</p>\n  \n  <p>The Ruby Programming Language: David Flanagan; Yukihiro Matsumoto.</p>\n</blockquote>\n\n<p>This should work:</p>\n\n<pre><code>class Expressions\n  DATE = /.../\nend\n\nclass MyTest &lt; Test::Unit::TestCase\n  def setup\n    @expression = Expressions::DATE\n  end\n  # ...\nend\n</code></pre>\n"}], "owner": {"reputation": 2672, "user_id": 223936, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/j58Xn.jpg?s=128&g=1", "display_name": "Plastikfan", "link": "https://stackoverflow.com/users/223936/plastikfan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2550, "favorite_count": 0, "accepted_answer_id": 28580539, "answer_count": 1, "score": 3, "last_activity_date": 1424255740, "creation_date": 1424252827, "last_edit_date": 1424255740, "question_id": 28580382, "link": "https://stackoverflow.com/questions/28580382/how-to-define-class-level-constant-regular-expressions-in-ruby-to-be-used-by-ext", "title": "How to define class level constant regular expressions in Ruby to be used by external classes", "body": "<p>I'm writing some tests to verify the behaviour of some regular expressions to be used within a Ruby console application. I'm trying to define constant class level fields on a class not meant to be instantiated (just supposed to have constant RE values defined on it. I'm having trouble defining this properly using Ruby idiom (I have C++/C# background).</p>\n\n<p>First I tried to define a class constant</p>\n\n<pre><code>class Expressions\n  # error is on following line (undefined method DATE)\n  Expressions.DATE = /(?&lt;Year&gt;\\d{4})-(?&lt;Month&gt;\\d{2})-(?&lt;Day&gt;\\d{2})/\n\nend\n\nclass MyTest &lt; Test::Unit::TestCase\n  def setup\n    @expression = Expressions::DATE\n  end\n\n  def test\n    assert \"1970-01-01\" =~ @expression\n  end\nend\n</code></pre>\n\n<p>this just produces error: undefined method `DATE=' for Expressions:Class (NoMethodError)</p>\n\n<p>Next I tried class attributes:</p>\n\n<pre><code>class Expressions\n  @@Expressions.DATE = /(?&lt;Year&gt;\\d{4})-(?&lt;Month&gt;\\d{2})-(?&lt;Day&gt;\\d{2})/ \nend\n\nclass MyTest &lt; Test::Unit::TestCase\n  def setup\n    # NameError: uninitialized constant Expressions::DATE here:\n    @expression = Expressions::DATE\n  end\n\n  def test\n    assert \"1970-01-01\" =~ @expression\n  end\nend\n</code></pre>\n\n<p>This produces an NameError: uninitialized constant Expressions::DATE error.</p>\n\n<p>I know I could just define attributes on a class to be used as an instance, but this is inefficient and not a correct solution to the problem (just a hack). (In C++ I would use a static const, done)</p>\n\n<p>So I'm stuck really. I need to know what is the correct way in Ruby to define constant regular expressions that need to be used in other classes. I'm having a problem with the definition, initialisation and its use,</p>\n\n<p>thanks. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord", "rails-activerecord"], "comments": [{"owner": {"reputation": 25, "user_id": 4431514, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001458116040/picture?type=large", "display_name": "okeigo", "link": "https://stackoverflow.com/users/4431514/okeigo"}, "edited": false, "score": 0, "creation_date": 1424251396, "post_id": 28579493, "comment_id": 45468030, "body": "Maybe, these are same things and the reason to create scoped_to_tenant is just for using as a helper...?"}], "answers": [{"tags": [], "owner": {"reputation": 1893, "user_id": 2266478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fb3e6529436cf68f53deec32b3e94a55?s=128&d=identicon&r=PG", "display_name": "JoJoS", "link": "https://stackoverflow.com/users/2266478/jojos"}, "is_accepted": true, "score": 0, "last_activity_date": 1424251343, "creation_date": 1424251343, "answer_id": 28579906, "question_id": 28579493, "link": "https://stackoverflow.com/questions/28579493/creating-an-association-and-scoping/28579906#28579906", "title": "creating an association and scoping", "body": "<p>A call to <code>scoped_to_tenant</code> method call the method <code>belongs_to</code> for you and add the many association to <code>Tenant</code>.</p>\n\n<p>This is same as doing this :</p>\n\n<pre><code># app/model/user.rb\nclass User &lt; ActiveRecord::Base\n  belongs_to :tenant\nend\n\n# app/model/tenant.rb\nclass Tenant &lt; ActiveRecord::Base\n  has_many :users\nend\n</code></pre>\n\n<p>The benefit of the <code>scoped_to_tenant</code> is that you don't care about adding <code>has_many</code> relationship to <code>Tenant</code> model.\nIf you only have one model to associate with <code>Tenant</code>, you don't need this extension.</p>\n"}], "owner": {"reputation": 25, "user_id": 4431514, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001458116040/picture?type=large", "display_name": "okeigo", "link": "https://stackoverflow.com/users/4431514/okeigo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 28579906, "answer_count": 1, "score": 0, "last_activity_date": 1424251343, "creation_date": 1424249843, "question_id": 28579493, "link": "https://stackoverflow.com/questions/28579493/creating-an-association-and-scoping", "title": "creating an association and scoping", "body": "<p>I read \"Multitenancy with Rails\" by Ryan Bigg and I'm creating a multi-tenant application using Ruby on Rails. </p>\n\n<p>I make two models, Tenant and User.\nTenant has many User, User belongs to Tenant.</p>\n\n<p>To associate these models, I made this file, </p>\n\n<p>active_record_extensions.rb</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>ActiveRecord::Base.class_eval do\n  def self.scoped_to_tenant\n    belongs_to :tenant\n    association_name = self.to_s.downcase.pluralize\n    Tenant.has_many association_name.to_sym, class_name: self.to_s\n  end\nend\n</code></pre>\n\n<p>and add \"scoped_to_tenant\" to User.rb</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class User &lt; ActiveRecord::Base\n  scoped_to_tenant\nend\n</code></pre>\n\n<p>When I want to get all users of one Tenant(id=1), I can get it by these code.\n</p>\n\n<pre><code>Tenant.find(1).users\n</code></pre>\n\n<p>The question is, what is the difference between I write </p>\n\n<pre><code>belongs_to :tenant\n</code></pre>\n\n<p>to User.rb and use scoped_to_tenant method ?</p>\n\n<p>In both case, Tenant.rb is this.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Tenant.rb &lt; ActiveRecord::Base\n   has_many :users\nend\n</code></pre>\n\n<p>Thank you for answer.\nI may get English wrong, so please tell me if you can't understand something.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "gpu"], "answers": [{"tags": [], "owner": {"reputation": 943, "user_id": 1032936, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a26471d9333f95f0e6af4285fd492cbd?s=128&d=identicon&r=PG", "display_name": "sambehera", "link": "https://stackoverflow.com/users/1032936/sambehera"}, "is_accepted": false, "score": 0, "last_activity_date": 1494618825, "creation_date": 1494618825, "answer_id": 43945524, "question_id": 28579461, "link": "https://stackoverflow.com/questions/28579461/make-rspec-tests-run-in-parallel-on-gpu/43945524#43945524", "title": "Make rspec tests run in parallel on GPU", "body": "<p>not sure if rspec is supported but if you use JRuby -- you can parallelize ruby code on GPUs using the \"barracuda\" gem (it supports OpenCL currently)</p>\n"}], "owner": {"reputation": 697, "user_id": 1554462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11613011bb640807d4862e140041cfe?s=128&d=identicon&r=PG", "display_name": "SergeyKutsko", "link": "https://stackoverflow.com/users/1554462/sergeykutsko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 431, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1494618825, "creation_date": 1424249734, "question_id": 28579461, "link": "https://stackoverflow.com/questions/28579461/make-rspec-tests-run-in-parallel-on-gpu", "title": "Make rspec tests run in parallel on GPU", "body": "<p>Could we some how execute rspec tests on GPU in parrallel? For example <a href=\"https://github.com/grosser/parallel_tests\" rel=\"nofollow\">https://github.com/grosser/parallel_tests</a> do that i need but on CPU.</p>\n"}, {"tags": ["ruby", "arrays", "data-structures", "hash"], "answers": [{"comments": [{"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1424247736, "post_id": 28578898, "comment_id": 45466233, "body": "Had to edit this, sorry!  My original solution wasn&#39;t working :/"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1424255831, "post_id": 28578898, "comment_id": 45470898, "body": "This is highly un-idiomatic. The idiomatic way would be to use the block form of <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-c-new\" rel=\"nofollow noreferrer\"><code>Array::new</code></a> as in <a href=\"http://stackoverflow.com/a/28580232/2988\">@Nafaa&#39;s answer</a>."}], "tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": false, "score": 1, "last_activity_date": 1424257136, "last_edit_date": 1424257136, "creation_date": 1424247411, "answer_id": 28578898, "question_id": 28578547, "link": "https://stackoverflow.com/questions/28578547/creating-key-value-hash-out-of-array-in-ruby/28578898#28578898", "title": "creating key/value hash out of array in ruby", "body": "<p>Although your question's a bit unclear, I can guess what the problem is.</p>\n\n<pre><code>@store = Array.new(size, [])\n</code></pre>\n\n<p>That creates an array of the right size, but where every element is the SAME OBJECT. </p>\n\n<p>Change the array-within-an-array at any position, and the change will be evident in every position.</p>\n\n<p>Try instead </p>\n\n<pre><code>@store = Array.new\nsize.times { @store &lt;&lt; [] }\n</code></pre>\n\n<p>Every sub-array will be a separate object that way.</p>\n\n<p>EDIT</p>\n\n<p>@nafaa boutefer's answer is better. The block gets evaluated for each instance of the array so each sub-array is a different object.</p>\n\n<pre><code>@store = Array.new(size){ [] }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1910, "user_id": 676788, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/16dfcfaa3f6405e9572cea3f88a68c56?s=128&d=identicon&r=PG", "display_name": "Nafaa Boutefer", "link": "https://stackoverflow.com/users/676788/nafaa-boutefer"}, "is_accepted": true, "score": 1, "last_activity_date": 1424252383, "creation_date": 1424252383, "answer_id": 28580232, "question_id": 28578547, "link": "https://stackoverflow.com/questions/28578547/creating-key-value-hash-out-of-array-in-ruby/28580232#28580232", "title": "creating key/value hash out of array in ruby", "body": "<p>You can simply do this</p>\n\n<pre><code>@store = Array.new(size){ [] }\n</code></pre>\n\n<p>Every element is a separate array.</p>\n"}], "owner": {"reputation": 1468, "user_id": 2635088, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/XJqfg.jpg?s=128&g=1", "display_name": "user2635088", "link": "https://stackoverflow.com/users/2635088/user2635088"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "accepted_answer_id": 28580232, "answer_count": 2, "score": -1, "last_activity_date": 1424503116, "creation_date": 1424245788, "last_edit_date": 1424503116, "question_id": 28578547, "link": "https://stackoverflow.com/questions/28578547/creating-key-value-hash-out-of-array-in-ruby", "title": "creating key/value hash out of array in ruby", "body": "<p>I came across an old piece of code which was creating the hash datatype using simple arrays in ruby. I get most of it, except one part:</p>\n\n<p>The point as I understand it is, every element of <code>@store</code> is a memory location for a particular key/value pair, as a function of the key. So <code>@store[3]</code> would generally store key/value pairs corresponding to key=3, key=53, ... and in general where <code>key % size == 3</code> (in this case size = 50). </p>\n\n<p>However, when I set <code>hash[3] = 7</code>, <code>hash[53] = 9</code>, etc., every element of <code>@store</code> array is populated with the key/value pairs, and not just the index 3 element. It seems like the line <code>@store[store_key] &lt;&lt; [key, value]</code> in the method <code>[]=(key, value)</code> is adding [key, value] to every element of <code>@store</code>, and not just one with the index <code>store_key</code>. Any ideas?</p>\n\n<pre><code>class SimpleHash\n  attr_accessor :size, :store\n\n  def initialize(size)\n    @size = size\n    @store = Array.new(size, [])\n  end\n\n  def []=(key, value)\n    store_key = key % @size\n    index = find_key(key, @store[store_key])\n    if index\n      @store[store_key][index][1] = value\n    else\n      p \"***********************************\"\n      p @store\n      @store[store_key] &lt;&lt; [key, value]\n      p \"after\"\n      p store_key\n      p @store\n    end\n  end\nend\n\nhash = SimpleHash.new(50)\np hash\nhash[3] = 5\np hash\nhash[3] = 7\nhash[53] = 9\nhash[103] = 11\nhash[104] = 11\n</code></pre>\n"}, {"tags": ["ruby", "arrays"], "comments": [{"owner": {"reputation": 6733, "user_id": 4486146, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/BZuMx.jpg?s=128&g=1", "display_name": "Danoram", "link": "https://stackoverflow.com/users/4486146/danoram"}, "edited": false, "score": 0, "creation_date": 1424245205, "post_id": 28578211, "comment_id": 45465174, "body": "Just to note, I have tried to come up with a solution by researching ruby array-manipulations but while having not found one, my code is very bloated and so I am also looking for nice code abstractions using various tricks in ruby to get something quite modular."}], "answers": [{"comments": [{"owner": {"reputation": 6733, "user_id": 4486146, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/BZuMx.jpg?s=128&g=1", "display_name": "Danoram", "link": "https://stackoverflow.com/users/4486146/danoram"}, "edited": false, "score": 0, "creation_date": 1424246019, "post_id": 28578513, "comment_id": 45465503, "body": "Did my mind just implode? Yes, yes it did. You are awesome! double thumbs up for being short and modular xD"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1424250829, "post_id": 28578513, "comment_id": 45467719, "body": "clearly an edge case, but <code>e[l-1] ||= nil</code> could overwrite <code>false</code>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1424251396, "post_id": 28578513, "comment_id": 45468029, "body": "@Stefan The OP says the values are all strings (or <code>nil</code>)."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 3, "last_activity_date": 1424245651, "creation_date": 1424245651, "answer_id": 28578513, "question_id": 28578211, "link": "https://stackoverflow.com/questions/28578211/how-to-populate-a-2d-array-with-arrays-of-different-lengths-so-that-they-are-all/28578513#28578513", "title": "How to populate a 2D array with arrays of different lengths so that they are all the same length, in ruby", "body": "<pre><code>l = my_2D_array.map(&amp;:length).max\nmy_2D_array.each{|e| e[l - 1] ||= nil}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7419, "user_id": 867590, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/uujdC.jpg?s=128&g=1", "display_name": "shweta", "link": "https://stackoverflow.com/users/867590/shweta"}, "is_accepted": false, "score": 0, "last_activity_date": 1424250712, "creation_date": 1424250712, "answer_id": 28579735, "question_id": 28578211, "link": "https://stackoverflow.com/questions/28578211/how-to-populate-a-2d-array-with-arrays-of-different-lengths-so-that-they-are-all/28579735#28579735", "title": "How to populate a 2D array with arrays of different lengths so that they are all the same length, in ruby", "body": "<p>Try: </p>\n\n<pre><code>max_size = my_2D_array.max_by(&amp;:size).size\n\nmy_2D_array.each do |i|\n   max_size.times {|j| i[j] = nil if i[j].blank? }\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6733, "user_id": 4486146, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/BZuMx.jpg?s=128&g=1", "display_name": "Danoram", "link": "https://stackoverflow.com/users/4486146/danoram"}, "edited": false, "score": 0, "creation_date": 1424320638, "post_id": 28579995, "comment_id": 45503591, "body": "Awesome! This is very relevant to what I want to achieve in my script! +1 vote once I can upvote."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 3, "last_activity_date": 1424251669, "creation_date": 1424251669, "answer_id": 28579995, "question_id": 28578211, "link": "https://stackoverflow.com/questions/28578211/how-to-populate-a-2d-array-with-arrays-of-different-lengths-so-that-they-are-all/28579995#28579995", "title": "How to populate a 2D array with arrays of different lengths so that they are all the same length, in ruby", "body": "<p>A slightly different way to construct equally sized arrays using <a href=\"http://ruby-doc.org//core-2.2.0/Array.html#method-c-new\" rel=\"nofollow\"><code>Array::new</code></a> with a block:</p>\n\n<pre><code>size = my_2D_array.map(&amp;:size).max \nmy_2D_array.map { |ary| Array.new(size) { |i| ary[i] } }\n</code></pre>\n\n<p>This returns a new array and doesn't modify the nested arrays.</p>\n"}], "owner": {"reputation": 6733, "user_id": 4486146, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/BZuMx.jpg?s=128&g=1", "display_name": "Danoram", "link": "https://stackoverflow.com/users/4486146/danoram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 1, "accepted_answer_id": 28578513, "answer_count": 3, "score": 1, "last_activity_date": 1424251669, "creation_date": 1424244474, "question_id": 28578211, "link": "https://stackoverflow.com/questions/28578211/how-to-populate-a-2d-array-with-arrays-of-different-lengths-so-that-they-are-all", "title": "How to populate a 2D array with arrays of different lengths so that they are all the same length, in ruby", "body": "<p>In my Ruby script I currently have a 2D array where the elements are all arrays of a differing length. In this example, for simplicity, the integers are the indexes of each respective array and can be thought of as placeholders for the real values which are all strings ..</p>\n\n<pre><code>my_2D_array = \n[[1],\n[1, 2, 3],\n[1, 2, 3, 4, 5, 6, 7, 8],\n[1, 2, 3, 4],\n[1, 2],\n[1, 2, 3, 4, 5],\n[1, 2, 3, 4, 5, 6, 7, 8, 9],\n[],\n[1, 2, 3, 4, 5, 6],\n[1, 2, 3, 4, 5, 6, 7]]\n</code></pre>\n\n<p>How can I populate a new 2D array or manipulate the existing 2D array so that all arrays are the same length, with nil values to fill the new elelements? like this:</p>\n\n<pre><code>my_2D_array = \n[[1, nil, nil, nil, nil, nil, nil, nil, nil],\n[1, 2, 3, nil, nil, nil, nil, nil, nil],\n[1, 2, 3, 4, 5, 6, 7, 8, nil],\n[1, 2, 3, 4,, nil, nil, nil, nil, nil],\n[1, 2, nil, nil, nil, nil, nil, nil, nil],\n[1, 2, 3, 4, 5, nil, nil, nil, nil],\n[1, 2, 3, 4, 5, 6, 7, 8, 9],\n[nil, nil, nil, nil, nil, nil, nil, nil, nil],\n[1, 2, 3, 4, 5, 6, nil, nil, nil],\n[1, 2, 3, 4, 5, 6, 7, nil, nil]]\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 1300, "user_id": 3118220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dac8cc81c7b432465c18eb731b5a1a8c?s=128&d=identicon&r=PG&f=1", "display_name": "user3118220", "link": "https://stackoverflow.com/users/3118220/user3118220"}, "is_accepted": true, "score": 1, "last_activity_date": 1424245308, "creation_date": 1424245308, "answer_id": 28578440, "question_id": 28578161, "link": "https://stackoverflow.com/questions/28578161/in-query-taking-id-as-1-instead-of-1/28578440#28578440", "title": "in query taking id as $1 instead of 1", "body": "<p>It is numbered placeholders in PostgreSQL driver, It working correctly </p>\n\n<p>Example:\nThe PostgreSQL driver wants to see numbered placeholders ($1, $2, ...) not question marks and you need to give your prepared statement a name:</p>\n\n<blockquote>\n  <p>ActiveRecord::Base.connection.raw_connection.prepare('some_name',\n  \"DELETE FROM my_table WHERE id = $1\")</p>\n</blockquote>\n"}], "owner": {"reputation": 334, "user_id": 4562300, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/PK5u6.jpg?s=128&g=1", "display_name": "santosh dadi", "link": "https://stackoverflow.com/users/4562300/santosh-dadi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 2, "accepted_answer_id": 28578440, "answer_count": 1, "score": 1, "last_activity_date": 1424247345, "creation_date": 1424244254, "last_edit_date": 1424247345, "question_id": 28578161, "link": "https://stackoverflow.com/questions/28578161/in-query-taking-id-as-1-instead-of-1", "title": "in query taking id as $1 instead of 1", "body": "<p>Hi I am facing problem please help me </p>\n\n<pre><code> def messaging\n  user = User.friendly.find(params[:id])\n\n  @owner = user.owner\n  authorize @owner\n\n  if params[:renter_id].to_i == 0\n    @renter = User.friendly.find(params[:renter_id]).renter\n  else\n    @renter = Renter.find(params[:renter_id])\n  end     \n\n   @messages = @owner.messages.where(renter_id: @renter.id).order(created_at: :desc)\n   @last_property = Property.find(@messages.first.property_id)\n   mark_read(@renter.id)\n end\n</code></pre>\n\n<p>here in the <code>@messages</code> i am getting query from backend like this </p>\n\n<pre><code>SELECT \"messages\".* FROM \"messages\"  WHERE \"messages\".\"owner_id\" = $1 AND \"messages\".\"renter_id\" = 2  ORDER BY \"messages\".\"created_at\" DESC  [[\"owner_id\", 1]]\n</code></pre>\n\n<p>Here <code>owner_id</code> is taking as $1 instead of 1 ,why?</p>\n\n<p>Also please explain me about authorization.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3"], "answers": [{"comments": [{"owner": {"reputation": 777, "user_id": 3692176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5OpSk.jpg?s=128&g=1", "display_name": "Hardik Hardiya", "link": "https://stackoverflow.com/users/3692176/hardik-hardiya"}, "edited": false, "score": 0, "creation_date": 1424246524, "post_id": 28578315, "comment_id": 45465728, "body": "This answer is also work for me when i am on rails 3."}], "tags": [], "owner": {"reputation": 1300, "user_id": 3118220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dac8cc81c7b432465c18eb731b5a1a8c?s=128&d=identicon&r=PG&f=1", "display_name": "user3118220", "link": "https://stackoverflow.com/users/3118220/user3118220"}, "is_accepted": false, "score": 1, "last_activity_date": 1424244842, "creation_date": 1424244842, "answer_id": 28578315, "question_id": 28578116, "link": "https://stackoverflow.com/questions/28578116/loging-out-of-site-if-navigating-to-other-pages-in-ruby-on-rails-app/28578315#28578315", "title": "loging out of site if navigating to other pages in ruby on rails app", "body": "<p>I think issue it related to your authenticity_token</p>\n\n<p>If you make a links in menu with the help of Rails form helper then You will not face this issue</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 4283858, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b5ce46f0ffc7fd83fc3b156938b21327?s=128&d=identicon&r=PG", "display_name": "39467", "link": "https://stackoverflow.com/users/4283858/39467"}, "edited": false, "score": 0, "creation_date": 1424778644, "post_id": 28578708, "comment_id": 45680756, "body": "( in my file the code is like this )                                                                         class ApplicationController &lt; ActionController::Base       include SimpleCaptcha::ControllerHelpers        protect_from_forgery                                                                      should i change it to exception or null_session"}], "tags": [], "owner": {"reputation": 777, "user_id": 3692176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5OpSk.jpg?s=128&g=1", "display_name": "Hardik Hardiya", "link": "https://stackoverflow.com/users/3692176/hardik-hardiya"}, "is_accepted": false, "score": 0, "last_activity_date": 1424246467, "creation_date": 1424246467, "answer_id": 28578708, "question_id": 28578116, "link": "https://stackoverflow.com/questions/28578116/loging-out-of-site-if-navigating-to-other-pages-in-ruby-on-rails-app/28578708#28578708", "title": "loging out of site if navigating to other pages in ruby on rails app", "body": "<p>I changed the default in controller</p>\n\n<pre><code>protect_from_forgery with: :exception\n</code></pre>\n\n<p>to</p>\n\n<pre><code>protect_from_forgery with: :null_session\n</code></pre>\n\n<p>will also solve problem in rails 4</p>\n"}], "owner": {"reputation": 13, "user_id": 4283858, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b5ce46f0ffc7fd83fc3b156938b21327?s=128&d=identicon&r=PG", "display_name": "39467", "link": "https://stackoverflow.com/users/4283858/39467"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1424863471, "creation_date": 1424244031, "last_edit_date": 1424863471, "question_id": 28578116, "link": "https://stackoverflow.com/questions/28578116/loging-out-of-site-if-navigating-to-other-pages-in-ruby-on-rails-app", "title": "loging out of site if navigating to other pages in ruby on rails app", "body": "<p>I have an issue when i am loging in to site after clicking on other menu tabs it is automatically loging out and if i wait for few minutes refresh and then login tabs are working fine.If i logout and login again and i click on other tabs geting loged out. I am not understanding where i need to check the code.</p>\n\n<pre><code>class SessionsController &lt; Devise::SessionsController\n# POST /resource/sign_in\ndef create    \nrespond_to do |format|\n  format.json do\n    self.resource = warden.authenticate!(auth_options)\n    sign_in(resource_name, resource)\n    return render :json =&gt; resource\n  end\n  format.html do\n    super\n  end\nend\nend  \nend\n</code></pre>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1424243179, "post_id": 28577775, "comment_id": 45464301, "body": "Implement this way <a href=\"http://stackoverflow.com/a/5777262/2767755\">stackoverflow.com/a/5777262/2767755</a>"}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1424243630, "post_id": 28577775, "comment_id": 45464487, "body": "Are these all <code>:name</code>, <code>:email</code>, <code>:image</code> columns coming from <code>data</code> only ?"}, {"owner": {"reputation": 6153, "user_id": 250304, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e12032d7b77e41490803c34ae66d6d5d?s=128&d=identicon&r=PG", "display_name": "codeObserver", "link": "https://stackoverflow.com/users/250304/codeobserver"}, "reply_to_user": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1424244717, "post_id": 28577775, "comment_id": 45464947, "body": "No they are not. Updated the question &quot;Here :name and :email are actual columns on the table and :image is a computed column&quot;"}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1424248953, "post_id": 28577775, "comment_id": 45466775, "body": "What database are you using?"}], "answers": [{"comments": [{"owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "reply_to_user": {"reputation": 6153, "user_id": 250304, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e12032d7b77e41490803c34ae66d6d5d?s=128&d=identicon&r=PG", "display_name": "codeObserver", "link": "https://stackoverflow.com/users/250304/codeobserver"}, "edited": false, "score": 0, "creation_date": 1424244885, "post_id": 28577962, "comment_id": 45465027, "body": "The data column will not be loaded into memory, how will that not solve it?"}, {"owner": {"reputation": 6153, "user_id": 250304, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e12032d7b77e41490803c34ae66d6d5d?s=128&d=identicon&r=PG", "display_name": "codeObserver", "link": "https://stackoverflow.com/users/250304/codeobserver"}, "edited": false, "score": 0, "creation_date": 1424248408, "post_id": 28577962, "comment_id": 45466525, "body": "So we display all users in the index view. So as soon as that page is loaded all the data column would be loaded into memory. I believe using lazy_load would just delay the loading?"}], "tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": false, "score": 0, "last_activity_date": 1424243417, "creation_date": 1424243417, "answer_id": 28577962, "question_id": 28577775, "link": "https://stackoverflow.com/questions/28577775/rails4-how-to-add-computed-columns-in-active-record/28577962#28577962", "title": "Rails4: How to add Computed columns in Active record", "body": "<p>I would move the data column to another table, but if that's not an option try the <a href=\"https://github.com/jorgemanrubia/lazy_columns\" rel=\"nofollow\">lazy_columns</a> gem. </p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  lazy_load :data\nend\n</code></pre>\n\n<p>Now the <code>data</code> column will be excluded during the initial load, but if you try to access the <code>.data</code> it will be retrieved from the database.</p>\n"}, {"comments": [{"owner": {"reputation": 6153, "user_id": 250304, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e12032d7b77e41490803c34ae66d6d5d?s=128&d=identicon&r=PG", "display_name": "codeObserver", "link": "https://stackoverflow.com/users/250304/codeobserver"}, "edited": false, "score": 1, "creation_date": 1424248601, "post_id": 28578445, "comment_id": 45466616, "body": "I see. This would work .. but ..  I would not prefer to add new columns to the actual table because a] There are many such computed fields b] The schema of json might change and hence persisted in a schma-less column.  Thoughts ?"}, {"owner": {"reputation": 2205, "user_id": 6460122, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/WTsp7.jpg?s=128&g=1", "display_name": "ricks", "link": "https://stackoverflow.com/users/6460122/ricks"}, "edited": false, "score": 0, "creation_date": 1573844832, "post_id": 28578445, "comment_id": 104033683, "body": "This is bad practice, you do not want to store calculated fields in your database."}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "reply_to_user": {"reputation": 2205, "user_id": 6460122, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/WTsp7.jpg?s=128&g=1", "display_name": "ricks", "link": "https://stackoverflow.com/users/6460122/ricks"}, "edited": false, "score": 0, "creation_date": 1573883875, "post_id": 28578445, "comment_id": 104042338, "body": "@ricks Ok so where do you want store them? Why it is bad practice to store them to DB?"}, {"owner": {"reputation": 2205, "user_id": 6460122, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/WTsp7.jpg?s=128&g=1", "display_name": "ricks", "link": "https://stackoverflow.com/users/6460122/ricks"}, "edited": false, "score": 0, "creation_date": 1574089287, "post_id": 28578445, "comment_id": 104096254, "body": "@ArupRakshit It&#39;s against Database normalization, with large datasets you a small mistake can lead to a lot of data integrity issues, if calculations are modified you need to update tables to recalculate. Plus adding more columns for calculated fields can slow down performance. Maybe its not a big deal in specific scenarios but i would still consider it bad practice."}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "reply_to_user": {"reputation": 2205, "user_id": 6460122, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/WTsp7.jpg?s=128&g=1", "display_name": "ricks", "link": "https://stackoverflow.com/users/6460122/ricks"}, "edited": false, "score": 0, "creation_date": 1574105778, "post_id": 28578445, "comment_id": 104104724, "body": "@ricks This is a solution problem specific. Nothing will go wrong, when you have tests. For one column, I can&#39;t think of a table... complex calculation result can be cached, and keep it in sync with all the available callbacks.. Rails has <b>counter cache</b> for a reason, and if that is appreciated and helpful.. I can&#39;t go against my this answer suggestions either."}], "tags": [], "owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "is_accepted": false, "score": 0, "last_activity_date": 1424245693, "last_edit_date": 1424245693, "creation_date": 1424245320, "answer_id": 28578445, "question_id": 28577775, "link": "https://stackoverflow.com/questions/28577775/rails4-how-to-add-computed-columns-in-active-record/28578445#28578445", "title": "Rails4: How to add Computed columns in Active record", "body": "<p>Add the column <code>:image</code> using the <em>migration</em>. Then add the below code :</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  before_save :extract_image\n\n  private\n\n  def extract_image\n    self.image = self.data['profile_data']['data']['image']\n    self.save\n  end\nend\n</code></pre>\n\n<p><a href=\"http://apidock.com/rails/ActiveRecord/Callbacks/before_save\" rel=\"nofollow\"><code>before_save</code></a>: Is called before <code>Base.save</code> (regardless of whether it\u2019s a <code>create</code> or <code>update</code> save).</p>\n"}, {"tags": [], "owner": {"reputation": 1910, "user_id": 676788, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/16dfcfaa3f6405e9572cea3f88a68c56?s=128&d=identicon&r=PG", "display_name": "Nafaa Boutefer", "link": "https://stackoverflow.com/users/676788/nafaa-boutefer"}, "is_accepted": false, "score": 0, "last_activity_date": 1424257983, "last_edit_date": 1495541560, "creation_date": 1424257198, "answer_id": 28581923, "question_id": 28577775, "link": "https://stackoverflow.com/questions/28577775/rails4-how-to-add-computed-columns-in-active-record/28581923#28581923", "title": "Rails4: How to add Computed columns in Active record", "body": "<p>Postgresql support two <a href=\"http://www.postgresql.org/docs/9.4/static/datatype-json.html\" rel=\"nofollow noreferrer\">json data type</a>, as described in the documentation</p>\n\n<blockquote>\n  <p>There are two JSON data types: json and jsonb. They accept almost identical sets of values as input. The major practical difference is one of efficiency. The json data type stores an exact copy of the input text, which processing functions must reparse on each execution; while jsonb data is stored in a decomposed binary format that makes it slightly slower to input due to added conversion overhead, but significantly faster to process, since no reparsing is needed. jsonb also supports indexing, which can be a significant advantage.</p>\n</blockquote>\n\n<p>So to solve your problem, you need to change the type of the <code>data</code> column to <code>jsonb</code> through a migration:</p>\n\n<pre><code># This should use the up and down methods, because change_column \n# is not reversible     \nclass ChangeUsersDataColumnTypeToJsonb &lt; ActiveRecord::Migration\n   def up\n      change_column :users, :data, :jsonb\n   end\n   def down\n      change_column :users, :data, :text # or whatever datatype it was\n   end\nend\n</code></pre>\n\n<p>than to query the image field with you use the <a href=\"http://www.postgresql.org/docs/9.3/static/functions-json.html\" rel=\"nofollow noreferrer\">functions</a> that postgres provides to query the <code>json</code> data type :</p>\n\n<pre><code>Users.where(SOME_CONDITION).select(:name,:email,\"data::json-&gt;'image' as image\")\n</code></pre>\n\n<p>than you access the <code>image</code> attribute like any other attribute.</p>\n\n<p>You have also to define the <code>:data</code> attribute as a <a href=\"https://stackoverflow.com/a/28577962/676788\">lazy loading column</a>, like , so that column do not get loaded when the user object is instantiated.</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  lazy_load :data\nend\n</code></pre>\n"}], "owner": {"reputation": 6153, "user_id": 250304, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e12032d7b77e41490803c34ae66d6d5d?s=128&d=identicon&r=PG", "display_name": "codeObserver", "link": "https://stackoverflow.com/users/250304/codeobserver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2328, "favorite_count": 2, "answer_count": 3, "score": 4, "last_activity_date": 1424257983, "creation_date": 1424242683, "last_edit_date": 1424249725, "question_id": 28577775, "link": "https://stackoverflow.com/questions/28577775/rails4-how-to-add-computed-columns-in-active-record", "title": "Rails4: How to add Computed columns in Active record", "body": "<p>We have landed ourself with a column 'data' on User table that has a huge json dump in it. </p>\n\n<p>Now every time we load a bunch of users we get all this data into the memory resulting into out of memory errors. </p>\n\n<p>We want to be able to write some computed columns that we can use in our select statements. </p>\n\n<pre><code>eg:\nInstead of doing this \nuser.data['profile_data']['data']['image']\n\nWe would like to add a column :image and then write a query like:\n\nHere :name and :email are actual columns on the table and :image is a computed column:\nUsers.where(SOME_CONDITION).select(:name,:email,:image)\n</code></pre>\n\n<p>The main use case is the index page where we display all users which basically loads data column for all users</p>\n\n<p>This will avoid loading the huge data column in memory and help us load the fields we want from the data column</p>\n\n<p>Whats the best way to do this in Rails4?</p>\n\n<p>Updates:</p>\n\n<ul>\n<li>We use postgres on Heroku.</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby", "websocket", "puma"], "comments": [{"owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "edited": false, "score": 0, "creation_date": 1424244279, "post_id": 28577617, "comment_id": 45464776, "body": "can you post some of your code"}, {"owner": {"reputation": 697, "user_id": 3869978, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3109721820b1827f05bc6bf7e6c11d99?s=128&d=identicon&r=PG&f=1", "display_name": "TheNastyOne", "link": "https://stackoverflow.com/users/3869978/thenastyone"}, "reply_to_user": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "edited": false, "score": 0, "creation_date": 1424245011, "post_id": 28577617, "comment_id": 45465082, "body": "Definitely, I&#39;ll update the post."}], "answers": [{"tags": [], "owner": {"reputation": 697, "user_id": 3869978, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3109721820b1827f05bc6bf7e6c11d99?s=128&d=identicon&r=PG&f=1", "display_name": "TheNastyOne", "link": "https://stackoverflow.com/users/3869978/thenastyone"}, "is_accepted": true, "score": 0, "last_activity_date": 1426124034, "creation_date": 1426124034, "answer_id": 29000491, "question_id": 28577617, "link": "https://stackoverflow.com/questions/28577617/websocket-rails-cant-add-new-key-into-hash/29000491#29000491", "title": "Websocket-rails Can&#39;t Add New Key Into Hash", "body": "<p>Within my socket controller I was performing a single-threaded blocking operation that would eventually max out the number of concurrent connections websockets allowed.</p>\n"}], "owner": {"reputation": 697, "user_id": 3869978, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3109721820b1827f05bc6bf7e6c11d99?s=128&d=identicon&r=PG&f=1", "display_name": "TheNastyOne", "link": "https://stackoverflow.com/users/3869978/thenastyone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 29000491, "answer_count": 1, "score": 0, "last_activity_date": 1426124034, "creation_date": 1424242059, "last_edit_date": 1424245526, "question_id": 28577617, "link": "https://stackoverflow.com/questions/28577617/websocket-rails-cant-add-new-key-into-hash", "title": "Websocket-rails Can&#39;t Add New Key Into Hash", "body": "<p>I am currently making an app that uses Rails, Puma and Websocket-rails to push Twitter Streaming tweets to the client.  For some reason, I randomly get the following error after I navigate to the index page (single page app).  I can't figure out where the error is happening in my project code or why it is happening.  I am very lost, and therefore any help is appreciated.</p>\n\n<p>Entire repo can be found <a href=\"https://github.com/dcurletti/Tweheat\" rel=\"nofollow\">here</a>.  The problem is definitely in lib/twitter_stream.rb.  What happens is this: inside of restart_stream is the Twitter Streaming connection, and I would like it to restart whenever a new search term is requested; however, whenever I make two or three requests in a row, I get that error.</p>\n\n<pre><code>RuntimeError - can't add a new key into hash during iteration:\n   () Users/Nasty1/.rbenv/versions/2.1.2/lib/ruby/gems/2.1.0/bundler/gems/websocket-rails-712fd4e35325/lib/websocket_rails/connection_manager.rb:83:in `open_connection'\n   () Users/Nasty1/.rbenv/versions/2.1.2/lib/ruby/gems/2.1.0/bundler/gems/websocket-rails-712fd4e35325/lib/websocket_rails/connection_manager.rb:55:in `call'\n  actionpack (4.2.0) lib/action_dispatch/routing/mapper.rb:51:in `serve'\n  actionpack (4.2.0) lib/action_dispatch/journey/router.rb:43:in `block in serve'\n  actionpack (4.2.0) lib/action_dispatch/journey/router.rb:30:in `serve'\n  actionpack (4.2.0) lib/action_dispatch/routing/route_set.rb:802:in `call'\n  newrelic_rpm (3.9.9.275) lib/new_relic/agent/instrumentation/middleware_tracing.rb:57:in `call'\n  newrelic_rpm (3.9.9.275) lib/new_relic/rack/agent_hooks.rb:30:in `traced_call'\n  newrelic_rpm (3.9.9.275) lib/new_relic/agent/instrumentation/middleware_tracing.rb:55:in `call'\n  newrelic_rpm (3.9.9.275) lib/new_relic/rack/browser_monitoring.rb:23:in `traced_call'\n  newrelic_rpm (3.9.9.275) lib/new_relic/agent/instrumentation/middleware_tracing.rb:55:in `call'\n  rack (1.6.0) lib/rack/etag.rb:24:in `call'\n  newrelic_rpm (3.9.9.275) lib/new_relic/agent/instrumentation/middleware_tracing.rb:57:in `call'\n  rack (1.6.0) lib/rack/conditionalget.rb:25:in `call'\n  newrelic_rpm (3.9.9.275) lib/new_relic/agent/instrumentation/middleware_tracing.rb:57:in `call'\n  rack (1.6.0) lib/rack/head.rb:13:in `call'\n  newrelic_rpm (3.9.9.275) lib/new_relic/agent/instrumentation/middleware_tracing.rb:57:in `call'\n  actionpack (4.2.0) lib/action_dispatch/middleware/params_parser.rb:27:in `call'\n  newrelic_rpm (3.9.9.275) lib/new_relic/agent/instrumentation/middleware_tracing.rb:57:in `call'\n  actionpack (4.2.0) lib/action_dispatch/middleware/flash.rb:260:in `call'\n  newrelic_rpm (3.9.9.275) lib/new_relic/agent/instrumentation/middleware_tracing.rb:57:in `call'\n  rack (1.6.0) lib/rack/session/abstract/id.rb:225:in `context'\n  rack (1.6.0) lib/rack/session/abstract/id.rb:220:in `call'\n  newrelic_rpm (3.9.9.275) lib/new_relic/agent/instrumentation/middleware_tracing.rb:57:in `call'\n  actionpack (4.2.0) lib/action_dispatch/middleware/cookies.rb:560:in `call'\n  newrelic_rpm (3.9.9.275) lib/new_relic/agent/instrumentation/middleware_tracing.rb:57:in `call'\n  activerecord (4.2.0) lib/active_record/query_cache.rb:36:in `call'\n  newrelic_rpm (3.9.9.275) lib/new_relic/agent/instrumentation/middleware_tracing.rb:57:in `call'\n  activerecord (4.2.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:647:in `call'\n  newrelic_rpm (3.9.9.275) lib/new_relic/agent/instrumentation/middleware_tracing.rb:57:in `call'\n  activerecord (4.2.0) lib/active_record/migration.rb:378:in `call'\n  newrelic_rpm (3.9.9.275) lib/new_relic/agent/instrumentation/middleware_tracing.rb:57:in `call'\n  actionpack (4.2.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'\n  activesupport (4.2.0) lib/active_support/callbacks.rb:88:in `_run_callbacks'\n  activesupport (4.2.0) lib/active_support/callbacks.rb:734:in `_run_call_callbacks'\n  activesupport (4.2.0) lib/active_support/callbacks.rb:81:in `run_callbacks'\n  actionpack (4.2.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'\n  newrelic_rpm (3.9.9.275) lib/new_relic/agent/instrumentation/middleware_tracing.rb:57:in `call'\n  actionpack (4.2.0) lib/action_dispatch/middleware/reloader.rb:73:in `call'\n  newrelic_rpm (3.9.9.275) lib/new_relic/agent/instrumentation/middleware_tracing.rb:57:in `call'\n  actionpack (4.2.0) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'\n  newrelic_rpm (3.9.9.275) lib/new_relic/agent/instrumentation/middleware_tracing.rb:57:in `call'\n  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'\n  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'\n  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'\n  newrelic_rpm (3.9.9.275) lib/new_relic/agent/instrumentation/middleware_tracing.rb:57:in `call'\n  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:18:in `middleware_call'\n  web-console (2.0.0) lib/action_dispatch/debug_exceptions.rb:13:in `call'\n  newrelic_rpm (3.9.9.275) lib/new_relic/agent/instrumentation/middleware_tracing.rb:57:in `call'\n  actionpack (4.2.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\n  newrelic_rpm (3.9.9.275) lib/new_relic/agent/instrumentation/middleware_tracing.rb:57:in `call'\n  railties (4.2.0) lib/rails/rack/logger.rb:38:in `call_app'\n  railties (4.2.0) lib/rails/rack/logger.rb:20:in `block in call'\n  activesupport (4.2.0) lib/active_support/tagged_logging.rb:68:in `block in tagged'\n  activesupport (4.2.0) lib/active_support/tagged_logging.rb:26:in `tagged'\n  activesupport (4.2.0) lib/active_support/tagged_logging.rb:68:in `tagged'\n  railties (4.2.0) lib/rails/rack/logger.rb:20:in `call'\n  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'\n  newrelic_rpm (3.9.9.275) lib/new_relic/agent/instrumentation/middleware_tracing.rb:57:in `call'\n  actionpack (4.2.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'\n  newrelic_rpm (3.9.9.275) lib/new_relic/agent/instrumentation/middleware_tracing.rb:57:in `call'\n  rack (1.6.0) lib/rack/methodoverride.rb:22:in `call'\n  newrelic_rpm (3.9.9.275) lib/new_relic/agent/instrumentation/middleware_tracing.rb:57:in `call'\n  rack (1.6.0) lib/rack/runtime.rb:18:in `call'\n  newrelic_rpm (3.9.9.275) lib/new_relic/agent/instrumentation/middleware_tracing.rb:57:in `call'\n  activesupport (4.2.0) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'\n  newrelic_rpm (3.9.9.275) lib/new_relic/agent/instrumentation/middleware_tracing.rb:57:in `call'\n  actionpack (4.2.0) lib/action_dispatch/middleware/static.rb:113:in `call'\n  newrelic_rpm (3.9.9.275) lib/new_relic/agent/instrumentation/middleware_tracing.rb:57:in `call'\n  rack (1.6.0) lib/rack/sendfile.rb:113:in `call'\n  newrelic_rpm (3.9.9.275) lib/new_relic/agent/instrumentation/middleware_tracing.rb:57:in `call'\n  railties (4.2.0) lib/rails/engine.rb:518:in `call'\n  railties (4.2.0) lib/rails/application.rb:164:in `call'\n  newrelic_rpm (3.9.9.275) lib/new_relic/agent/instrumentation/middleware_tracing.rb:57:in `call'\n  rack (1.6.0) lib/rack/content_length.rb:15:in `call'\n  puma (2.11.0) lib/puma/server.rb:507:in `handle_request'\n  puma (2.11.0) lib/puma/server.rb:375:in `process_client'\n  puma (2.11.0) lib/puma/server.rb:262:in `block in run'\n  puma (2.11.0) lib/puma/thread_pool.rb:104:in `block in spawn_thread'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "timer"], "answers": [{"tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": true, "score": 0, "last_activity_date": 1424242885, "last_edit_date": 1424242885, "creation_date": 1424242438, "answer_id": 28577700, "question_id": 28577557, "link": "https://stackoverflow.com/questions/28577557/is-there-anything-like-timer-in-ruby/28577700#28577700", "title": "Is There Anything Like Timer in Ruby", "body": "<p>This code will try to get the file 3 times before failing.  The <code>get_file</code> method is wrapped in a <code>Timeout.timeout</code> block, which will raise a <code>Timeout::Error</code> if it takes longer than 60 seconds to complete. If the timeout error is raised we either retry the operation or re-raise the error depending on whether there are more retries left.</p>\n\n<pre><code>require 'timeout'\n\ndef get_file_from_web\n  retries = 3\n  begin\n    Timeout.timeout(60) { get_file() }\n  rescue Timeout::Error\n    if (retries -= 1) &gt; 0\n      retry \n    else\n      raise\n    end\n  end\nend\n</code></pre>\n\n<p>You could also use the <a href=\"https://github.com/nfedyashev/retryable\" rel=\"nofollow\">retryable</a> to reduce the amount of code needed.</p>\n\n<pre><code>require 'timeout'\n\ndef get_file_from_web\n  Retryable.retryable(tries: 3, on: Timeout::Error) do\n    Timeout.timeout(60) { get_file() }\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 403, "user_id": 4439275, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/jMuFE.jpg?s=128&g=1", "display_name": "Vijay", "link": "https://stackoverflow.com/users/4439275/vijay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 423, "favorite_count": 1, "accepted_answer_id": 28577700, "answer_count": 1, "score": 0, "last_activity_date": 1424244506, "creation_date": 1424241844, "last_edit_date": 1424244506, "question_id": 28577557, "link": "https://stackoverflow.com/questions/28577557/is-there-anything-like-timer-in-ruby", "title": "Is There Anything Like Timer in Ruby", "body": "<p>Here is what I need - </p>\n\n<pre><code>def get_file_from_web()\n    # This is a function which retries the following function when that function is not completed with in 1 min.\n    timer(60)\n    # This method is use to connect to internet and get the file specified and i should not take more than 1 min. \n    file = get_file()\nend\n</code></pre>\n\n<p>Please help me to solve this problem guys. I need exactly a timer to trigger an action after the specified time.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "twitter-bootstrap", "bower", "bootstrap-material-design"], "answers": [{"tags": [], "owner": {"reputation": 380, "user_id": 686227, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/168ea52dda0f06e5b8d753b0dcf3a3c0?s=128&d=identicon&r=PG", "display_name": "walt_die", "link": "https://stackoverflow.com/users/686227/walt-die"}, "is_accepted": false, "score": 2, "last_activity_date": 1424277162, "creation_date": 1424277162, "answer_id": 28588716, "question_id": 28577504, "link": "https://stackoverflow.com/questions/28577504/where-are-my-font-files-in-my-rails-project-i-use-bower-and-material-design/28588716#28588716", "title": "where are my font files - in my Rails project I use Bower and Material Design", "body": "<p>How much I really wanted to use Bower to manage the client side assets, I reverted to letting Bundler do the heavy lifting :/</p>\n\n<p>There is a 'service' - <a href=\"https://rails-assets.org/\" rel=\"nofollow\">https://rails-assets.org/</a> - a kind of 'gem wrapping giftshop' that I've used; and as it turned out to be: will continue to use.</p>\n\n<p>It's sweet and easy and all you have to do is follow the short recipe right on the landing page.</p>\n\n<p>Added this snippet to my Gemfile</p>\n\n<pre><code>source 'https://rails-assets.org' do\n  gem 'rails-assets-sweetalert'\n  gem 'rails-assets-jquery'\n  gem 'rails-assets-jquery-ujs'\n  gem 'rails-assets-bootstrap-material-design'\nend\n</code></pre>\n\n<p>kept my require's in application.js and application.scss and waisted all the bower.json, Bowerfile, vendor/assets/bower_components folder etc</p>\n\n<p>and did one last <code>bundle install</code></p>\n\n<p>Case closed :)</p>\n"}], "owner": {"reputation": 380, "user_id": 686227, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/168ea52dda0f06e5b8d753b0dcf3a3c0?s=128&d=identicon&r=PG", "display_name": "walt_die", "link": "https://stackoverflow.com/users/686227/walt-die"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 529, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462983755, "creation_date": 1424241603, "last_edit_date": 1462983755, "question_id": 28577504, "link": "https://stackoverflow.com/questions/28577504/where-are-my-font-files-in-my-rails-project-i-use-bower-and-material-design", "title": "where are my font files - in my Rails project I use Bower and Material Design", "body": "<p>Bootstrap-Material-Design by <a href=\"https://github.com/FezVrasta\" rel=\"nofollow\">FezVrasta</a> is a very nice module! I only have one tiny itch - and that is pertaining to the fonts addressed in the material.css</p>\n\n<p>I'm on Ruby 2.1.2, Rails 4.1.5, Node 0.10.35 and Bower 1.3.7</p>\n\n<p>I added a .bowerrc with</p>\n\n<pre><code>{\n  \"directory\" : \"vendor/assets/bower_components\"\n}\n</code></pre>\n\n<p>then I put <code>gem \"bower-rails\", \"~&gt; 0.9.2\"</code> in my Gemfile</p>\n\n<p>and then I listed the bower packages in Bowerfile</p>\n\n<pre><code># A sample Bowerfile\n# Check out https://github.com/42dev/bower-rails#ruby-dsl-configuration for more options\n# asset 'bootstrap'\n\nasset \"jquery\", \"2.1.1\"\nasset \"jquery-ujs\", \"1.0.1\"\nasset \"sweetalert\", \"0.2.0\"\nasset \"bootstrap-material-design\", \"0.2.2\"\nThen I did my bower install \u2013 and everything was perfect!\n</code></pre>\n\n<p>But after cap production deploy I have to go and do on my app servers this:</p>\n\n<pre><code>cd public &amp;&amp; ln -s /var/www/clock/current/vendor/assets/bower_components/bootstrap-material-design/fonts fonts\n</code></pre>\n\n<p>Or else my browser barfs with</p>\n\n<pre><code>Failed to load resource: the server responded with a status of 404 (Not Found)\nhttp://irrelevant.domain/fonts/Material-Design-Icons.woff?-g7cqhn\nIs there a way around this?\n</code></pre>\n\n<p>It's not like I cannot automate the symbolic linking - it just seems kind'a sticking a band-aid on :)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "arguments", "url-for", "respond-with"], "comments": [{"owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "edited": false, "score": 0, "creation_date": 1424241882, "post_id": 28577380, "comment_id": 45463796, "body": "try this <code>redirect_to questions_path</code>"}, {"owner": {"reputation": 919, "user_id": 3544524, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/db1b08a462baf39134ade1bace3da4fa?s=128&d=identicon&r=PG", "display_name": "Marvin Caspar", "link": "https://stackoverflow.com/users/3544524/marvin-caspar"}, "reply_to_user": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "edited": false, "score": 0, "creation_date": 1424242304, "post_id": 28577380, "comment_id": 45463948, "body": "Again the same error"}, {"owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "edited": false, "score": 0, "creation_date": 1424242364, "post_id": 28577380, "comment_id": 45463966, "body": "where you want user to redirect, when question is created?"}, {"owner": {"reputation": 919, "user_id": 3544524, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/db1b08a462baf39134ade1bace3da4fa?s=128&d=identicon&r=PG", "display_name": "Marvin Caspar", "link": "https://stackoverflow.com/users/3544524/marvin-caspar"}, "reply_to_user": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "edited": false, "score": 0, "creation_date": 1424242567, "post_id": 28577380, "comment_id": 45464030, "body": "after creating I want to redirect to the show view"}], "answers": [{"comments": [{"owner": {"reputation": 919, "user_id": 3544524, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/db1b08a462baf39134ade1bace3da4fa?s=128&d=identicon&r=PG", "display_name": "Marvin Caspar", "link": "https://stackoverflow.com/users/3544524/marvin-caspar"}, "edited": false, "score": 0, "creation_date": 1424242471, "post_id": 28577661, "comment_id": 45463996, "body": "The same error: <code>arguments passed to url_for can&#39;t be handled. Please require routes or provide your own implementation</code>"}, {"owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "reply_to_user": {"reputation": 919, "user_id": 3544524, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/db1b08a462baf39134ade1bace3da4fa?s=128&d=identicon&r=PG", "display_name": "Marvin Caspar", "link": "https://stackoverflow.com/users/3544524/marvin-caspar"}, "edited": false, "score": 0, "creation_date": 1424242759, "post_id": 28577661, "comment_id": 45464114, "body": "This is the error with Rails 4, try finding this line of code in your application <code>include Rails.application.routes.url_helpers</code> and commenting it as specifed here <a href=\"http://stackoverflow.com/questions/20660604/using-the-correct-url-for-method-in-a-rails-engine-spec\" title=\"using the correct url for method in a rails engine spec\">stackoverflow.com/questions/20660604/&hellip;</a>"}, {"owner": {"reputation": 919, "user_id": 3544524, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/db1b08a462baf39134ade1bace3da4fa?s=128&d=identicon&r=PG", "display_name": "Marvin Caspar", "link": "https://stackoverflow.com/users/3544524/marvin-caspar"}, "edited": false, "score": 0, "creation_date": 1424243264, "post_id": 28577661, "comment_id": 45464332, "body": "I comment out all included <code>url_helpers</code> but thats not the solution"}], "tags": [], "owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "is_accepted": false, "score": 0, "last_activity_date": 1424242262, "creation_date": 1424242262, "answer_id": 28577661, "question_id": 28577380, "link": "https://stackoverflow.com/questions/28577380/rails-4-respond-with-arguments-error/28577661#28577661", "title": "Rails 4: respond_with arguments error", "body": "<p>Try this</p>\n\n<pre><code>def create\n    @question = Question.new question_params\n    if @question.save\n        flash[:success] = \"Question created!\"\n        redirect_to questions_path\n        or \n        redirect_to :controller =&gt; 'questions', :action =&gt; 'new'\n        or\n        redirect_to :back\n    end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 919, "user_id": 3544524, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/db1b08a462baf39134ade1bace3da4fa?s=128&d=identicon&r=PG", "display_name": "Marvin Caspar", "link": "https://stackoverflow.com/users/3544524/marvin-caspar"}, "is_accepted": true, "score": 2, "last_activity_date": 1424246196, "creation_date": 1424246196, "answer_id": 28578639, "question_id": 28577380, "link": "https://stackoverflow.com/questions/28577380/rails-4-respond-with-arguments-error/28578639#28578639", "title": "Rails 4: respond_with arguments error", "body": "<p>I found my problem. In a helper I included <code>ActionView::Helpers::UrlHelper</code>. After removing this, <code>respond_with</code> and <code>redirect_to</code> works fine.</p>\n"}], "owner": {"reputation": 919, "user_id": 3544524, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/db1b08a462baf39134ade1bace3da4fa?s=128&d=identicon&r=PG", "display_name": "Marvin Caspar", "link": "https://stackoverflow.com/users/3544524/marvin-caspar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 567, "favorite_count": 0, "accepted_answer_id": 28578639, "answer_count": 2, "score": 0, "last_activity_date": 1424246196, "creation_date": 1424241048, "last_edit_date": 1424241438, "question_id": 28577380, "link": "https://stackoverflow.com/questions/28577380/rails-4-respond-with-arguments-error", "title": "Rails 4: respond_with arguments error", "body": "<p>in my rails app (v. 4.1.9) i get the following error after a create action:</p>\n\n<p><code>arguments passed to url_for can't be handled. Please require routes or provide your own implementation</code></p>\n\n<p>Here is my code:</p>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>scope module: :explore do\n  resources :questions\nend\n</code></pre>\n\n<p><strong>questions_controller.rb</strong></p>\n\n<pre><code>class Explore::QuestionsController &lt; Explore::BaseController\n  respond_to :html\n  authorize_resource\n\n  def create\n    @question = Question.new question_params\n    @question.save\n\n    respond_with @question\n  end\nend\n</code></pre>\n\n<p>I also tried <code>respond_with question_path</code>and <code>redirect_to question_path</code> but always the same error. </p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "rails-activerecord"], "answers": [{"tags": [], "owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "is_accepted": true, "score": 1, "last_activity_date": 1424241056, "creation_date": 1424241056, "answer_id": 28577382, "question_id": 28577204, "link": "https://stackoverflow.com/questions/28577204/converting-sql-query-to-rails-syntax/28577382#28577382", "title": "Converting Sql Query to Rails Syntax", "body": "<p>Here is the Rails way :</p>\n\n<pre><code>User.joins(:affiliates)\n    .where(\"users.email ILIKE :name or users.name ILIKE :name or users.contact_number ILIKE :name\", name: '%web%')\n    .select(\"users.*\")\n    .limit(10)\n</code></pre>\n"}], "owner": {"reputation": 384, "user_id": 3062270, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/1985ce4a2b8afa4ed3f9813bd4b7ef34?s=128&d=identicon&r=PG&f=1", "display_name": "sreenivas", "link": "https://stackoverflow.com/users/3062270/sreenivas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 1, "closed_date": 1424252914, "accepted_answer_id": 28577382, "answer_count": 1, "score": 0, "last_activity_date": 1454777403, "creation_date": 1424240212, "last_edit_date": 1454777403, "question_id": 28577204, "link": "https://stackoverflow.com/questions/28577204/converting-sql-query-to-rails-syntax", "closed_reason": "Needs more focus", "title": "Converting Sql Query to Rails Syntax", "body": "<p>I am having trouble in converting this query to Rails syntax. would any one please guide me </p>\n\n<pre><code>SELECT\n   \"users\".*\nFROM\n   \"affiliates\"\nINNER JOIN\n   \"users\"\nON\n   \"users\".\"id\" = \"affiliates\".\"user_id\"\nWHERE (\n   users.email ILIKE'%web%' or\n   users.name ILIKE'%web%' or\n   users.contact_number ILIKE'%web%'\n)\nLIMIT\n   10;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "devise"], "answers": [{"comments": [{"owner": {"reputation": 1737, "user_id": 408244, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/fa7ce0371b834c41b62bbfa087d6d15c?s=128&d=identicon&r=PG", "display_name": "Jarred", "link": "https://stackoverflow.com/users/408244/jarred"}, "edited": false, "score": 0, "creation_date": 1436897925, "post_id": 28576764, "comment_id": 50801596, "body": "This causes an error: uninitialized constant Controllers."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2780708"}, "is_accepted": true, "score": 2, "last_activity_date": 1424238097, "creation_date": 1424238097, "answer_id": 28576764, "question_id": 28576280, "link": "https://stackoverflow.com/questions/28576280/rspec-before-confusion-with-devise-mappings/28576764#28576764", "title": "RSpec before confusion with devise mappings", "body": "<p>Your method <strong>set_devise_mapping</strong> inside <strong>describe</strong> but not <strong>it</strong></p>\n\n<p>instead of (this work when using in <strong>it</strong> blocks)</p>\n\n<blockquote>\n  <p>config.include Controllers::DeviseHelpers, type: :controller</p>\n</blockquote>\n\n<p>must (this work when using in <strong>describe</strong> blocks)</p>\n\n<blockquote>\n  <p>config.extend Controllers::DeviseHelpers, type: :controller</p>\n</blockquote>\n"}], "owner": {"reputation": 409, "user_id": 3495715, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/8d20ea5b9e9aa18509e83bda1a646a82?s=128&d=identicon&r=PG&f=1", "display_name": "Ativ", "link": "https://stackoverflow.com/users/3495715/ativ"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1223, "favorite_count": 1, "accepted_answer_id": 28576764, "answer_count": 1, "score": 0, "last_activity_date": 1424238097, "creation_date": 1424235507, "last_edit_date": 1592644375, "question_id": 28576280, "link": "https://stackoverflow.com/questions/28576280/rspec-before-confusion-with-devise-mappings", "title": "RSpec before confusion with devise mappings", "body": "<p>so I need to set a devise mapping for my tests to work properly. Per <a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Test-controllers-with-Rails-3-and-4-%28and-RSpec%29\" rel=\"nofollow noreferrer\">https://github.com/plataformatec/devise/wiki/How-To:-Test-controllers-with-Rails-3-and-4-%28and-RSpec%29</a>, I added</p>\n<pre><code>describe Api::SessionsController do\n  before(:each) do\n    @request.env[&quot;devise.mapping&quot;] = Devise.mappings[:admin]\n  end\n  ...\nend\n</code></pre>\n<p>This works fine. However, since I'll be reusing this across multiple specs, I wanted to put it in a module in a support folder. Hence:</p>\n<h1>support/devise_helper.rb</h1>\n<pre><code>module Controllers\n  module DeviseHelpers\n    def set_devise_mapping\n      before(:each) do\n        @request.env[&quot;devise.mapping&quot;] = Devise.mappings[:api_user]\n      end\n    end\n  end\nend\n</code></pre>\n<p>And I include the module via:</p>\n<pre><code>RSpec.configure do |config|\n  config.include Controllers::DeviseHelpers, type: :controller\nend\n</code></pre>\n<p>And then in the spec:</p>\n<pre><code>describe Api::SessionsController do\n  set_devise_mapping\nend\n</code></pre>\n<p>and I get the following error:</p>\n<pre><code>ruby/gems/2.2.0/gems/rspec-core-3.2.0/lib/rspec/core/example_group.rb:626:in `method_missing':\n `set_devise_mapping` is not available on an example group (e.g. a `describe` or `context` block).\n It is only available from within individual examples (e.g. `it` blocks) or from constructs that run in the scope of an example (e.g. `before`, `let`, etc). (RSpec::Core::ExampleGroup::WrongScopeError)\n</code></pre>\n<p>Why do I get this? This is what the github example linked above does. Also it works without the method. I tried using :context and putting it in different places but I get an error no matter where I put it.</p>\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "forms", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 3065, "user_id": 419959, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/7ca7408d9899de034d52aeca2df043a5?s=128&d=identicon&r=PG", "display_name": "Aswin Ramakrishnan", "link": "https://stackoverflow.com/users/419959/aswin-ramakrishnan"}, "edited": false, "score": 0, "creation_date": 1424235744, "post_id": 28576188, "comment_id": 45461785, "body": "Nice! Any idea how I can find \u2032x\u2032? Or any other alternatives? I can have x as a constant, which might not be the case in some circumstances."}, {"owner": {"reputation": 3065, "user_id": 419959, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/7ca7408d9899de034d52aeca2df043a5?s=128&d=identicon&r=PG", "display_name": "Aswin Ramakrishnan", "link": "https://stackoverflow.com/users/419959/aswin-ramakrishnan"}, "edited": false, "score": 0, "creation_date": 1424235824, "post_id": 28576188, "comment_id": 45461809, "body": "Also, I get an &quot;undefined method `save&#39; for #&lt;Array:0x007fdd7741a760&gt;&quot; at the line @hours.save"}, {"owner": {"reputation": 707, "user_id": 3583511, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xB5JH.jpg?s=128&g=1", "display_name": "Jake Shorty", "link": "https://stackoverflow.com/users/3583511/jake-shorty"}, "reply_to_user": {"reputation": 3065, "user_id": 419959, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/7ca7408d9899de034d52aeca2df043a5?s=128&d=identicon&r=PG", "display_name": "Aswin Ramakrishnan", "link": "https://stackoverflow.com/users/419959/aswin-ramakrishnan"}, "edited": false, "score": 0, "creation_date": 1424236158, "post_id": 28576188, "comment_id": 45461913, "body": "If you are just going for duplicates of the same kind of <code>item</code> and want the user to dictate how many, you could add a form field that passes the number of items you want. Otherwise you&#39;d have to decide for yourself, using a constant or otherwise.  You haven&#39;t posted any code with <code>@hours</code>, but saving an array to the database shouldn&#39;t work. If you&#39;re trying to get things to persist beyond a single request, you&#39;ll need to either add columns to your <code>users</code> resource or create new resources."}, {"owner": {"reputation": 3065, "user_id": 419959, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/7ca7408d9899de034d52aeca2df043a5?s=128&d=identicon&r=PG", "display_name": "Aswin Ramakrishnan", "link": "https://stackoverflow.com/users/419959/aswin-ramakrishnan"}, "edited": false, "score": 0, "creation_date": 1424236597, "post_id": 28576188, "comment_id": 45462036, "body": "Apologies..  <code>@items</code>, not <code>@hours</code>. I&#39;m trying to save each item in @items, not the array itself"}, {"owner": {"reputation": 707, "user_id": 3583511, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xB5JH.jpg?s=128&g=1", "display_name": "Jake Shorty", "link": "https://stackoverflow.com/users/3583511/jake-shorty"}, "reply_to_user": {"reputation": 3065, "user_id": 419959, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/7ca7408d9899de034d52aeca2df043a5?s=128&d=identicon&r=PG", "display_name": "Aswin Ramakrishnan", "link": "https://stackoverflow.com/users/419959/aswin-ramakrishnan"}, "edited": false, "score": 0, "creation_date": 1424237273, "post_id": 28576188, "comment_id": 45462224, "body": "If you want them in the database, you&#39;ll need to create an <code>items</code> resource if you haven&#39;t already- a table in the database and a corresponding model with associations to <code>users</code>. A <code>user</code> would <code>has_many :items</code> and an <code>item</code> would <code>belong_to :user</code>, based on the relationship you&#39;re portraying."}], "tags": [], "owner": {"reputation": 707, "user_id": 3583511, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xB5JH.jpg?s=128&g=1", "display_name": "Jake Shorty", "link": "https://stackoverflow.com/users/3583511/jake-shorty"}, "is_accepted": false, "score": 2, "last_activity_date": 1424234939, "creation_date": 1424234939, "answer_id": 28576188, "question_id": 28575966, "link": "https://stackoverflow.com/questions/28575966/rails-submitting-an-array-of-child-elements/28576188#28576188", "title": "Rails: Submitting an array of child elements", "body": "<p>It looks like right now you are only ever telling Rails to build one <code>item</code> object. Your form is passing up the two parameters for an item, and in your controller you call <code>build</code> once, so <code>@items</code> is only ever set equal to the single <code>Item</code> returned by <code>build</code>. Unless their are hidden parts of your form you aren't showing, it looks like you're only setting one set of options for a <code>user</code>'s <code>items</code>. If your goal is to have an array of many <code>items</code> with identical parameters, the fastest fix would be to just do this within the logic of your <code>create</code> action. There are many ways you could implement that (here is one simple way):</p>\n\n<pre><code>@items = []\nx.times { @items &lt;&lt; @user.items.build(item_params) }\n</code></pre>\n\n<p>If you're looking to send a request from the form with multiple unique <code>items</code>, you'll have to add more fields to your form, since currently you are only sending one set of parameters.</p>\n"}, {"tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": true, "score": 1, "last_activity_date": 1424249945, "creation_date": 1424249945, "answer_id": 28579523, "question_id": 28575966, "link": "https://stackoverflow.com/questions/28575966/rails-submitting-an-array-of-child-elements/28579523#28579523", "title": "Rails: Submitting an array of child elements", "body": "<p>There are few corrections to be made in your code.</p>\n\n<p>In your <code>users_controller</code></p>\n\n<pre><code>def new\n @user = User.new\n 3.times do #this will generate three records of items\n @user.items.build\n end\nend\n\ndef create\n@user = User.new(user_params)\n\nrespond_to do |format|\n  if @user.save\n      format.html { redirect_to @user, notice: 'User was successfully created.' }          \n  else\n    format.html { render action: 'new' }\n    format.json { render json: @userd.errors, status: :unprocessable_entity }\n  end\nend\nend\n\n\nprivate\ndef user_params\n   params.require(:user).permit(:name,items_attributes: [:name,price])\nend\n</code></pre>\n"}], "owner": {"reputation": 3065, "user_id": 419959, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/7ca7408d9899de034d52aeca2df043a5?s=128&d=identicon&r=PG", "display_name": "Aswin Ramakrishnan", "link": "https://stackoverflow.com/users/419959/aswin-ramakrishnan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 360, "favorite_count": 0, "accepted_answer_id": 28579523, "answer_count": 2, "score": 0, "last_activity_date": 1424249945, "creation_date": 1424233517, "last_edit_date": 1424238788, "question_id": 28575966, "link": "https://stackoverflow.com/questions/28575966/rails-submitting-an-array-of-child-elements", "title": "Rails: Submitting an array of child elements", "body": "<p>I'm trying to submit a form which is supposed to have an array of child elements. I'm not sure if I have it correctly. Can somebody help me refactor?</p>\n\n<p>I have a couple of models <code>user</code> and <code>item</code>. A user<code>has_many :items</code>.</p>\n\n<p>The form that sends the information for user and items look like the following -</p>\n\n<pre><code>&lt;%= form_for(@user) do |f| %&gt;\n   &lt;% f.text_field :name %&gt;\n   &lt;% f.fields_for :items do |item| %&gt;\n      &lt;% item.text_field :name %&gt;\n      &lt;% item.text_field :price %&gt;\n   &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>I have the following in my controller -</p>\n\n<pre><code>def create\n@user = User.new(user_params)\n\nrespond_to do |format|\n  if @user.save\n    @items = @user.items.build(item_params)\n\n    if @items.save\n      format.html { redirect_to @user, notice: 'User was successfully created.' }          \n    end\n\n    format.html { redirect_to @user, notice: 'User was successfully created. But there was a problem saving the items.' }\n  else\n    format.html { render action: 'new' }\n    format.json { render json: @userd.errors, status: :unprocessable_entity }\n  end\nend\nend\n\n\nprivate\n    def user_params\n      params.require(:user).permit(:name)\n    end\n\n    def item_params\n      params.require(:user).require(:item).permit(:name, :price)\n    end\n</code></pre>\n\n<p>When I save the <code>user</code>, only 1 record of <code>items</code> get saved, meaning - the data isn't being passed as an array of objects. How do I get this to work?</p>\n"}, {"tags": ["objective-c", "ruby", "macos", "cocoa", "rubymotion"], "answers": [{"comments": [{"owner": {"reputation": 2435, "user_id": 846062, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/9818e02496659c79a595da7dd52b6ad9?s=128&d=identicon&r=PG", "display_name": "J. Ky Marsh", "link": "https://stackoverflow.com/users/846062/j-ky-marsh"}, "edited": false, "score": 0, "creation_date": 1424598343, "post_id": 28598855, "comment_id": 45609230, "body": "Thanks for replying! Sadly, UIButtonTypeCustom doesn&#39;t seem to exist in the OSX API. Appreciate it, though."}], "tags": [], "owner": {"reputation": 4793, "user_id": 1250389, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/fvSNO.jpg?s=128&g=1", "display_name": "Gant Laborde", "link": "https://stackoverflow.com/users/1250389/gant-laborde"}, "is_accepted": false, "score": 1, "last_activity_date": 1424321772, "creation_date": 1424321772, "answer_id": 28598855, "question_id": 28575424, "link": "https://stackoverflow.com/questions/28575424/how-to-implement-image-button-on-osx-in-rubymotion/28598855#28598855", "title": "How to implement image button on OSX in RubyMotion?", "body": "<p>Firstly, let me say I have zero experience with OSX, but I'm hoping this iOS info will help.  I've been told they are pretty identical.  You need to make sure you're using a custom button (UIButtonTypeCustom).  This will allow you to use background image abilities.</p>\n\n<p>Here's some good example code, that might help you out.</p>\n\n<p><a href=\"https://github.com/IconoclastLabs/rubymotion_cookbook/tree/master/ch_2/16_buttons\" rel=\"nofollow\">https://github.com/IconoclastLabs/rubymotion_cookbook/tree/master/ch_2/16_buttons</a></p>\n\n<p>Again, I'm sorry if this doesn't do the job, but I figure I'd post this info to help!</p>\n"}, {"tags": [], "owner": {"reputation": 2435, "user_id": 846062, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/9818e02496659c79a595da7dd52b6ad9?s=128&d=identicon&r=PG", "display_name": "J. Ky Marsh", "link": "https://stackoverflow.com/users/846062/j-ky-marsh"}, "is_accepted": true, "score": 0, "last_activity_date": 1424598575, "creation_date": 1424598575, "answer_id": 28656505, "question_id": 28575424, "link": "https://stackoverflow.com/questions/28575424/how-to-implement-image-button-on-osx-in-rubymotion/28656505#28656505", "title": "How to implement image button on OSX in RubyMotion?", "body": "<p>So I sort of figured this out. It would appear that either <code>imageNamed</code> doesn't work the way I'm expecting, or I'm simply using it incorrectly.</p>\n\n<p>I was able to set an image on a button by doing the following:</p>\n\n<pre><code>NSButton.alloc.initWithFrame(\n    [[110, 10], [100, 22]]\n).tap do |button|\n    neutralImgPath = NSBundle.mainBundle.pathForResource(\"img/circle2\", ofType: \"png\")\n    neutralImgUrl = NSURL.fileURLWithPath(neutralImgPath)\n    neutralImg = NSImage.alloc.initWithContentsOfURL(neutralImgUrl)\n\n    button.setImage(neutralImg)\n\n    button.setImageScaling(NSImageScaleProportionallyDown)\n    button.setImagePosition(NSImageOnly)\n\n    button.translatesAutoresizingMaskIntoConstraints = false\n    button.bordered = false\n    button.bezelStyle = NSShadowlessSquareBezelStyle\n    button.buttonType = NSMomentaryChangeButton\n\n    button.target = MainAppWindow.get\n    button.action = 'minimize:'\nend\n</code></pre>\n\n<p>Would definitely love to figure out a more concise way to do this, but for now, it gets the job done!</p>\n"}], "owner": {"reputation": 2435, "user_id": 846062, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/9818e02496659c79a595da7dd52b6ad9?s=128&d=identicon&r=PG", "display_name": "J. Ky Marsh", "link": "https://stackoverflow.com/users/846062/j-ky-marsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "accepted_answer_id": 28656505, "answer_count": 2, "score": 0, "last_activity_date": 1424598575, "creation_date": 1424229851, "question_id": 28575424, "link": "https://stackoverflow.com/questions/28575424/how-to-implement-image-button-on-osx-in-rubymotion", "title": "How to implement image button on OSX in RubyMotion?", "body": "<p>This strikes me as something that should be incredibly easy, but I just can't get it to work.</p>\n\n<p>I'm creating a button as such:</p>\n\n<pre><code>closeButton = NSButton.alloc.initWithFrame(\n    [[10, 10], [100, 22]]\n  ).tap do |button|\n    button.bezelStyle = NSShadowlessSquareBezelStyle\n    button.buttonType = NSMomentaryChangeButton\n    button.title = 'Close'\n    button.bordered = false\n    button.image = NSImage.imageNamed('img/circle')\n    p button.image\n    button.imagePosition = NSImageOnly\n    button.target = window\n    button.action = 'close'\n  end\n</code></pre>\n\n<p>There are 2 images, <code>circle.png</code> and <code>circle@2x.png</code>, stored in <code>/Resources/img</code>.</p>\n\n<p>Needless to say, I get a gray button with no text or image within it. Also, <code>p button.image</code> returns <code>nil</code>.</p>\n\n<p>I've cleaned and rebuilt my project a number of times.</p>\n\n<p>This doesn't seem like it should be so difficult to implement. What am I overlooking?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "mongoid", "mongoid3"], "answers": [{"tags": [], "owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1424241978, "creation_date": 1424241978, "answer_id": 28577596, "question_id": 28575394, "link": "https://stackoverflow.com/questions/28575394/mongoid-embedded-document-with-reference/28577596#28577596", "title": "MongoId Embedded Document With Reference", "body": "<p>The simple answer is that you can't create standalone documents for an embedded model (you are architecturally preventing that by choosing to embed). If you need to have a standalone set of Types you should use <code>has_many</code> and <code>belongs_to</code> instead of <code>embeds_many</code> and <code>embedded_in</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 500, "user_id": 3037415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d02016001039ff03930f92cb2b4be71?s=128&d=identicon&r=PG&f=1", "display_name": "jgburet", "link": "https://stackoverflow.com/users/3037415/jgburet"}, "is_accepted": false, "score": 0, "last_activity_date": 1424370112, "last_edit_date": 1424370112, "creation_date": 1424367295, "answer_id": 28613065, "question_id": 28575394, "link": "https://stackoverflow.com/questions/28575394/mongoid-embedded-document-with-reference/28613065#28613065", "title": "MongoId Embedded Document With Reference", "body": "<p>Have you thought about inheritance?  </p>\n\n<p>Make your <code>Client</code> and <code>Discount</code> models inherit from <code>Type</code>.<br>\nThey will benefit from your <code>Type</code> fields and you will be able to have a standalone <code>Type</code> index too.</p>\n"}], "owner": {"reputation": 547, "user_id": 2549370, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f08960e20a1df201b0c6988acbd13391?s=128&d=identicon&r=PG", "display_name": "sescob27", "link": "https://stackoverflow.com/users/2549370/sescob27"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 633, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1424370112, "creation_date": 1424229671, "last_edit_date": 1424244586, "question_id": 28575394, "link": "https://stackoverflow.com/questions/28575394/mongoid-embedded-document-with-reference", "title": "MongoId Embedded Document With Reference", "body": "<p>I have the following case where I have a document that I need to embed in some documents, but for traceability (e.g need to know the amount of people who is subscribed to each type) I need it to be stored as a different document. So when I try to save a default set of Types it says:</p>\n\n<p><code>Mongoid::Errors::NoParent: \nProblem:\n  Cannot persist embedded document Type without a parent document.</code></p>\n\n<p>I don't know how to do it or how to handle this situation, any help or suggestion is appreciated.</p>\n\n<pre><code>class Type\n  include Mongoid::Document\n    embedded_in :typeable, polymorphic: true\n    belongs_to :client\n    field :count, type: Integer # number of people interested in each Type\nend\n\nclass Client\n  include Mongoid::Document\n    has_many :types\n    embeds_many :discounts, as: :discountable\nend\n\nclass Discount\n  include Mongoid::Document\n    embeds_many :types, as: :typeable\n    embedded_in :discountable, polymorphic: true\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 1, "creation_date": 1424231778, "post_id": 28575347, "comment_id": 45460635, "body": "<a href=\"https://github.com/railsbp/rails_best_practices\" rel=\"nofollow noreferrer\">github.com/railsbp/rails_best_practices</a>"}, {"owner": {"reputation": 105, "user_id": 2905629, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/320e7d923db8bc5a4260f940348df07c?s=128&d=identicon&r=PG&f=1", "display_name": "maggs", "link": "https://stackoverflow.com/users/2905629/maggs"}, "reply_to_user": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1424323906, "post_id": 28575347, "comment_id": 45504595, "body": "this a good resource thanks"}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 1, "creation_date": 1424330955, "post_id": 28575347, "comment_id": 45507131, "body": "You&#39;re welcome. I just realized I posted the wrong link. I meant to do <a href=\"https://github.com/bbatsov/rails-style-guide\" rel=\"nofollow noreferrer\">github.com/bbatsov/rails-style-guide</a>. His <a href=\"https://github.com/bbatsov/ruby-style-guide\" rel=\"nofollow noreferrer\">github.com/bbatsov/ruby-style-guide</a> is very good, too."}, {"owner": {"reputation": 105, "user_id": 2905629, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/320e7d923db8bc5a4260f940348df07c?s=128&d=identicon&r=PG&f=1", "display_name": "maggs", "link": "https://stackoverflow.com/users/2905629/maggs"}, "reply_to_user": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1424481503, "post_id": 28575347, "comment_id": 45580857, "body": "This is another good resource to help with best practices. thanks"}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 2905629, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/320e7d923db8bc5a4260f940348df07c?s=128&d=identicon&r=PG&f=1", "display_name": "maggs", "link": "https://stackoverflow.com/users/2905629/maggs"}, "edited": false, "score": 1, "creation_date": 1424323954, "post_id": 28575464, "comment_id": 45504619, "body": "Yes this was the issue."}], "tags": [], "owner": {"reputation": 22836, "user_id": 152786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/581hP.jpg?s=128&g=1", "display_name": "smathy", "link": "https://stackoverflow.com/users/152786/smathy"}, "is_accepted": true, "score": 3, "last_activity_date": 1424230160, "creation_date": 1424230160, "answer_id": 28575464, "question_id": 28575347, "link": "https://stackoverflow.com/questions/28575347/ruby-model-naming-conventions-can-uppercase-characters-be-used/28575464#28575464", "title": "ruby model naming conventions can uppercase characters be used", "body": "<p>If you created the model file/class yourself then yes, this is probably the issue.</p>\n\n<p>The filename should be: <code>seen_by_hw.rb</code> and in that the class name will be <code>SeenByHw</code>.</p>\n\n<p>If you use the generators that comes with Rails then it would have done this for you, type <code>rails generate</code> in your app directory to see more info on them.</p>\n"}], "owner": {"reputation": 105, "user_id": 2905629, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/320e7d923db8bc5a4260f940348df07c?s=128&d=identicon&r=PG&f=1", "display_name": "maggs", "link": "https://stackoverflow.com/users/2905629/maggs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 28575464, "answer_count": 1, "score": 1, "last_activity_date": 1424231911, "creation_date": 1424229410, "last_edit_date": 1424231911, "question_id": 28575347, "link": "https://stackoverflow.com/questions/28575347/ruby-model-naming-conventions-can-uppercase-characters-be-used", "title": "ruby model naming conventions can uppercase characters be used", "body": "<p>I have run a migration and am getting a 500 error saying <code>seen_by_hw</code> does not exist. Could this be due to the fact I have used an uppercase characters when creating the ruby model. eg\n<code>seen_by_HW</code>. Or should it be <code>seen_by_hw</code>\nthanks</p>\n"}, {"tags": ["ruby", "watir", "watir-webdriver"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1424231320, "post_id": 28575334, "comment_id": 45460512, "body": "What are you trying to do?  <code>puts</code> the text in the <code>text_field</code>?  It&#39;s hard to tell what you are asking."}, {"owner": {"reputation": 85, "user_id": 4522470, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/skLDl.jpg?s=128&g=1", "display_name": "eunice", "link": "https://stackoverflow.com/users/4522470/eunice"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1424231891, "post_id": 28575334, "comment_id": 45460666, "body": "I am asking for the specific page source of the element"}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 2, "creation_date": 1424232725, "post_id": 28575334, "comment_id": 45460935, "body": "Are you using FF35?  Sounds like it.  If so, it&#39;s been having <a href=\"https://code.google.com/p/selenium/issues/detail?id=8390\" rel=\"nofollow noreferrer\">issues</a>, so you might want to downgrade to FF34.  <code>@browser.text_field(:id =&gt; &quot;foo&quot;).html</code> should return the HTML for the specific element, and <code>@browser.text_field(:id =&gt; &quot;foo&quot;).value</code> should return the text within the text field. YMMV."}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1424235996, "post_id": 28575334, "comment_id": 45461862, "body": "execute_script is currently broken for Firefox 35, the fix will be ready whenever WebDriver 2.45 is released.  Actually, you want      @browser.text_field(:id =&gt; &quot;foo&quot;).text to return the text in the text field. If there is a value attribute in the tag, value would return that."}, {"owner": {"reputation": 85, "user_id": 4522470, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/skLDl.jpg?s=128&g=1", "display_name": "eunice", "link": "https://stackoverflow.com/users/4522470/eunice"}, "edited": false, "score": 0, "creation_date": 1424236856, "post_id": 28575334, "comment_id": 45462102, "body": "FF35? Is that firefox version 35? Yes. I am using that one. But how can I downgrade it to FF34?"}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1424302718, "post_id": 28575334, "comment_id": 45498707, "body": "Try this: <a href=\"https://support.mozilla.org/en-US/kb/install-older-version-of-firefox\" rel=\"nofollow noreferrer\">support.mozilla.org/en-US/kb/install-older-version-of-firefo&zwnj;&#8203;x</a>"}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 4522470, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/skLDl.jpg?s=128&g=1", "display_name": "eunice", "link": "https://stackoverflow.com/users/4522470/eunice"}, "edited": false, "score": 0, "creation_date": 1424230211, "post_id": 28575441, "comment_id": 45460174, "body": "find_element method is undefine for Watir. And the alternative method for that is @browser.element(:id, &quot;street&quot;). But the error I have got is still the same."}], "tags": [], "owner": {"reputation": 3299, "user_id": 1749638, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cERvr.jpg?s=128&g=1", "display_name": "coderhs", "link": "https://stackoverflow.com/users/1749638/coderhs"}, "is_accepted": false, "score": 0, "last_activity_date": 1424230002, "creation_date": 1424230002, "answer_id": 28575441, "question_id": 28575334, "link": "https://stackoverflow.com/questions/28575334/error-in-displaying-html-element-in-watir/28575441#28575441", "title": "Error in displaying HTML Element in Watir", "body": "<p>Try this one, as this would go specific to the element.</p>\n\n<pre><code>@browser.find_element(:id, \"street\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "is_accepted": false, "score": 0, "last_activity_date": 1424408058, "creation_date": 1424408058, "answer_id": 28621859, "question_id": 28575334, "link": "https://stackoverflow.com/questions/28575334/error-in-displaying-html-element-in-watir/28621859#28621859", "title": "Error in displaying HTML Element in Watir", "body": "<p>Try</p>\n\n<pre><code>puts @browser.text_field(:id =&gt; \"street\").value if @browser.text_field(:id =&gt; \"street\").exists?\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 4522470, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/skLDl.jpg?s=128&g=1", "display_name": "eunice", "link": "https://stackoverflow.com/users/4522470/eunice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1424408058, "creation_date": 1424229315, "last_edit_date": 1424237291, "question_id": 28575334, "link": "https://stackoverflow.com/questions/28575334/error-in-displaying-html-element-in-watir", "title": "Error in displaying HTML Element in Watir", "body": "<p>I have the following lines of code:</p>\n\n<pre><code>if @browser.text_field(:id =&gt; \"street\").exists?\n      puts \"street exist\"\n      puts @browser.text_field(:id =&gt; \"street\").html\n    else\n      puts \"street does not exist\"\n    end\n</code></pre>\n\n<p>But after running this one, I've got an error:</p>\n\n<pre><code>Run options: \n\n# Running tests:\n\nstreet exist\nE\n\nFinished tests in 90.183158s, 0.0111 tests/s, 0.0000 assertions/s.\n\n  1) Error:\ntest_login(TC_Login):\nSelenium::WebDriver::Error::JavascriptError: invalid 'in' operand a\n    [remote server] http://sam.org/user/ line 68 &gt; Function:18:in `G'\n    [remote server] http://sam.org/user/ line 68 &gt; Function:18:in `anonymous/&lt;/&lt;'\n    [remote server] http://sam.org/user/ line 68 &gt; Function:15:in `anonymous/&lt;'\n    [remote server] http://sam.org/user/ line 68 &gt; Function:15:in `anonymous'\n    [remote server] http://sam.org/user/:68:in `handleEvaluateEvent'\n    c:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.44.0/lib/selenium/webdriver/remote/response.rb:52:in `assert_ok'\n    c:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.44.0/lib/selenium/webdriver/remote/response.rb:15:in `initialize'\n    c:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.44.0/lib/selenium/webdriver/remote/http/common.rb:59:in `new'\n    c:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.44.0/lib/selenium/webdriver/remote/http/common.rb:59:in `create_response'\n    c:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.44.0/lib/selenium/webdriver/remote/http/default.rb:66:in `request'\n    c:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.44.0/lib/selenium/webdriver/remote/http/common.rb:40:in `call'\n    c:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.44.0/lib/selenium/webdriver/remote/bridge.rb:640:in `raw_execute'\n    c:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.44.0/lib/selenium/webdriver/remote/bridge.rb:618:in `execute'\n    c:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.44.0/lib/selenium/webdriver/remote/bridge.rb:339:in `executeScript'\n    c:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.44.0/lib/selenium/webdriver/common/driver.rb:193:in `execute_script'\n    c:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-webdriver-0.6.11/lib/watir-webdriver/atoms.rb:20:in `execute_atom'\n    c:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-webdriver-0.6.11/lib/watir-webdriver/elements/element.rb:290:in `outer_html'\n    excel.rb:279:in `test_login'\n\n1 tests, 0 assertions, 0 failures, 1 errors, 0 skips\n</code></pre>\n\n<p>The element already exists. And when I try <code>puts @browser.html</code>, it displays the whole page source. My goal is to display only a specific HTML Element. And I tried the lines of code above. And I can't understand what the error says.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "module"], "answers": [{"comments": [{"owner": {"reputation": 3387, "user_id": 978906, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/996f9b10f66cffa29e3949029930f9e4?s=128&d=identicon&r=PG", "display_name": "index", "link": "https://stackoverflow.com/users/978906/index"}, "edited": false, "score": 0, "creation_date": 1424247345, "post_id": 28577233, "comment_id": 45466074, "body": "What are the blank <code>def</code> methods on each modules used for?"}, {"owner": {"reputation": 3387, "user_id": 978906, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/996f9b10f66cffa29e3949029930f9e4?s=128&d=identicon&r=PG", "display_name": "index", "link": "https://stackoverflow.com/users/978906/index"}, "edited": false, "score": 0, "creation_date": 1424247503, "post_id": 28577233, "comment_id": 45466130, "body": "Also right now I get <code>uninitialized constant Features::ClassMethods</code> in the part where I should write <code>extend Stuff::ClassMethods</code>"}, {"owner": {"reputation": 3387, "user_id": 978906, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/996f9b10f66cffa29e3949029930f9e4?s=128&d=identicon&r=PG", "display_name": "index", "link": "https://stackoverflow.com/users/978906/index"}, "edited": false, "score": 0, "creation_date": 1424259285, "post_id": 28577233, "comment_id": 45472875, "body": "I think I got it working, but I&#39;ve changed it a bit and removed the blank methods in the beginning. I&#39;ll edit my post and write my change there."}, {"owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "reply_to_user": {"reputation": 3387, "user_id": 978906, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/996f9b10f66cffa29e3949029930f9e4?s=128&d=identicon&r=PG", "display_name": "index", "link": "https://stackoverflow.com/users/978906/index"}, "edited": false, "score": 0, "creation_date": 1424279438, "post_id": 28577233, "comment_id": 45485836, "body": "The blank methods are just there to show that they get extended onto the final class. Your solution looks like it should work, but you could make it more terse, like <code>[Running, Walking].each {|mod| include mod }</code>, since you&#39;re already in the <code>Features</code> namespace."}, {"owner": {"reputation": 3387, "user_id": 978906, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/996f9b10f66cffa29e3949029930f9e4?s=128&d=identicon&r=PG", "display_name": "index", "link": "https://stackoverflow.com/users/978906/index"}, "edited": false, "score": 0, "creation_date": 1424325980, "post_id": 28577233, "comment_id": 45505242, "body": "Should I remove the <code>Features::</code>... part?"}, {"owner": {"reputation": 3387, "user_id": 978906, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/996f9b10f66cffa29e3949029930f9e4?s=128&d=identicon&r=PG", "display_name": "index", "link": "https://stackoverflow.com/users/978906/index"}, "edited": false, "score": 0, "creation_date": 1424327273, "post_id": 28577233, "comment_id": 45505735, "body": "A awesome! I didn&#39;t know I could that. Haha. Played around with it, and I&#39;m posting my updated <code>Features</code> module. It looks nicer."}], "tags": [], "owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "is_accepted": true, "score": 3, "last_activity_date": 1424240346, "creation_date": 1424240346, "answer_id": 28577233, "question_id": 28575328, "link": "https://stackoverflow.com/questions/28575328/ruby-rails-extending-or-including-other-modules/28577233#28577233", "title": "ruby/rails: extending or including other modules", "body": "<p>You can; the issue you're likely running into is that <code>ActiveSupport::Concern</code> automagically extends the methods in <code>ClassMethods</code> onto the target class, rather than combining multiple <code>ClassMethods</code> sub-modules into one. This is unfortunately a little hard to do automatically because of Ruby's cyclical include prevention code, but you can actually do it all manually without AS::Concern.</p>\n\n<pre><code>module Foo\n  def foo\n  end\n\n  module ClassMethods\n    def cfoo\n    end\n  end\nend\n\nmodule Baz\n  def baz\n  end\n\n  module ClassMethods\n    def cbaz\n    end\n  end\nend\n\nmodule Bar\n  include Baz\n  def bar\n  end\n\n  module ClassMethods\n    include Baz::ClassMethods\n    def cbar\n    end\n  end\nend\n\nmodule Stuff\n  include Foo\n  include Bar\n\n  module ClassMethods\n    include Foo::ClassMethods\n    include Bar::ClassMethods\n  end\nend\n\nclass Final\n  include Stuff\n  extend Stuff::ClassMethods\nend\n</code></pre>\n\n<p>This is a little more verbose, but you can compose pieces as deep as you want, though you have to be careful to always include the parent module and then include ClassMethods onto the corresponding ClassMethods submodule.</p>\n"}], "owner": {"reputation": 3387, "user_id": 978906, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/996f9b10f66cffa29e3949029930f9e4?s=128&d=identicon&r=PG", "display_name": "index", "link": "https://stackoverflow.com/users/978906/index"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1449, "favorite_count": 0, "accepted_answer_id": 28577233, "answer_count": 1, "score": 2, "last_activity_date": 1424327466, "creation_date": 1424229242, "last_edit_date": 1424327466, "question_id": 28575328, "link": "https://stackoverflow.com/questions/28575328/ruby-rails-extending-or-including-other-modules", "title": "ruby/rails: extending or including other modules", "body": "<p>I separated my modules so they are easier to read and search like</p>\n\n<pre><code>lib\n  features\n    - running.rb\n    - walking.rb\n  features.rb\n</code></pre>\n\n<p>And they have</p>\n\n<pre><code># lib/features/running.rb\nmodule Features::Running\n  extend ActiveSupport::Concern\n\n  module ClassMethods\n    def can_run\n      ...\n    end\n  end\nend\n</code></pre>\n\n<p>and the other is:</p>\n\n<pre><code># lib/features/walking.rb\nmodule Features::Walking\n  extend ActiveSupport::Concern\n\n  module ClassMethods\n    def can_walk\n      ...\n    end\n  end\nend\n</code></pre>\n\n<p>And I might have a lot of this someday.</p>\n\n<p>My problem is when I want to add them in a model, I'd need to</p>\n\n<pre><code># Sample model\nclass Man &lt; ActiveRecord::Base\n  # Include features modules\n  include Features::Walking\n  include Features::Running\n\n  # Define what man can do\n  can_walk\n  can_run\nend\n</code></pre>\n\n<p>I was wondering if there is a way to create another module and include all of them. Something like:</p>\n\n<pre><code># lib/features.rb\nmodule Features\n  extend ActiveSupport::Concern\n\n  extend Features::Walking\n  extend Features::Running\nend\n</code></pre>\n\n<p>So I'd only need to add</p>\n\n<pre><code># Sample model\nclass Man &lt; ActiveRecord::Base\n  # Include features modules\n  include Features\n\n  # Define what man can do\n  can_walk\n  can_run\nend\n</code></pre>\n\n<p>Or how should I go about this?</p>\n\n<p><strong>Edit - solution</strong></p>\n\n<p>I got the fix now based on @Chris solution. I got something like this:</p>\n\n<pre><code>module Features\n  FEATURES = %w(running walking)\n\n  # include Features::Running\n  FEATURES.each do |feature|\n    send :include, \"Features::#{feature.camelize}\".constantize\n  end\n\n  module ClassMethods\n    # include Features::Running::ClassMethods\n    FEATURES.each do |feature|\n      send :include, \"Features::#{feature.camelize}::ClassMethods\".constantize\n    end\n  end\n\n  def self.included(base)\n    base.send :extend, ClassMethods\n  end\nend\n</code></pre>\n\n<p>and my other feature modules are now:</p>\n\n<pre><code># lib/features/running.rb\nmodule Features::Running\n  module ClassMethods\n    def can_run\n      ...\n    end\n  end\nend\n\n# lib/features/walking.rb\nmodule Features::Walking\n  module ClassMethods\n    def can_walk\n      ...\n    end\n  end\nend\n</code></pre>\n\n<p><strong>Edit - updated solution</strong></p>\n\n<pre><code>module Features\n  FEATURES = [Running, Walking]\n\n  # include Features::Running\n  FEATURES.each do |feature|\n    send :include, feature\n  end\n\n  module ClassMethods\n    # include Features::Running::ClassMethods\n    FEATURES.each do |feature|\n      send :include, feature::ClassMethods\n    end\n  end\n\n  def self.included(base)\n    base.send :extend, ClassMethods\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "arrays"], "answers": [{"comments": [{"owner": {"reputation": 460, "user_id": 4175836, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c2983b88ac03d20a18427f3658f4fe49?s=128&d=identicon&r=PG", "display_name": "collinksmith", "link": "https://stackoverflow.com/users/4175836/collinksmith"}, "edited": false, "score": 0, "creation_date": 1424230986, "post_id": 28575266, "comment_id": 45460410, "body": "I actually had been referring to each instance variable by their names and for some reason thought I needed to. It turns out I didn&#39;t. When I tried this and then switched the references (eg. <code>@cells[0]</code> instead of <code>@cell_1</code>), it worked. Thanks for your help."}], "tags": [], "owner": {"reputation": 312231, "user_id": 2225682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4958f4712d94ab82fe55fa471308e4b5?s=128&d=identicon&r=PG", "display_name": "falsetru", "link": "https://stackoverflow.com/users/2225682/falsetru"}, "is_accepted": true, "score": 1, "last_activity_date": 1424228771, "creation_date": 1424228771, "answer_id": 28575266, "question_id": 28575239, "link": "https://stackoverflow.com/questions/28575239/initializing-an-array-of-instance-variables/28575266#28575266", "title": "Initializing an array of instance variables", "body": "<p>If you don't need to create each instance variables (<code>@cell_1, @cell_2, ...</code>), you can use <a href=\"http://ruby-doc.org//core/Enumerable.html#method-i-map\" rel=\"nofollow\"><code>Enumerable#map</code></a>:</p>\n\n<pre><code>@cells = [*1..8, 0].map { |i| Cell.new(i) }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 106, "user_id": 959066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4466dc01d40b56ea61033ce4bd59cc3?s=128&d=identicon&r=PG", "display_name": "Andrea", "link": "https://stackoverflow.com/users/959066/andrea"}, "is_accepted": false, "score": 0, "last_activity_date": 1424243537, "last_edit_date": 1424243537, "creation_date": 1424243209, "answer_id": 28577915, "question_id": 28575239, "link": "https://stackoverflow.com/questions/28575239/initializing-an-array-of-instance-variables/28577915#28577915", "title": "Initializing an array of instance variables", "body": "<p>If you really need to refer every instance variable by name you can do something like this.</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>class Board\n   def initialize\n     @cells = (1..9).to_a.map { |i| Cell.new(i) }\n   end\n\n   def method_missing(method, *args, &amp;block)\n     if method =~ /^cell_[1-9][0-9]*$/\n       index = method[/\\d+/].to_i\n       @cells[index-1]\n     else\n       super\n     end\n   end\nend\n</code></pre>\n\n<p>In this way you can call:</p>\n\n<pre><code>board = Board.new\nboard.cell_1 #=&gt; first cell\n</code></pre>\n\n<p>Of course I'd use the solution proposed by @falsetru.</p>\n"}], "owner": {"reputation": 460, "user_id": 4175836, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c2983b88ac03d20a18427f3658f4fe49?s=128&d=identicon&r=PG", "display_name": "collinksmith", "link": "https://stackoverflow.com/users/4175836/collinksmith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 28575266, "answer_count": 2, "score": 0, "last_activity_date": 1424243537, "creation_date": 1424228610, "last_edit_date": 1424228819, "question_id": 28575239, "link": "https://stackoverflow.com/questions/28575239/initializing-an-array-of-instance-variables", "title": "Initializing an array of instance variables", "body": "<p>I'm making a game with a Board class Cell class. The Board class needs to be initialized with a unique instance variable for each Cell. I can hardcode it so that it works, but it seems inelegant and doesn't allow the size of the board to be chosen by the user at runtime. Here's what I have:</p>\n\n<pre><code>class Board\n  def initialize\n    @cell_1 = Cell.new(1)\n    @cell_2 = Cell.new(2)\n    @cell_3 = Cell.new(3)\n    @cell_4 = Cell.new(4)\n    @cell_5 = Cell.new(5)\n    @cell_6 = Cell.new(6)\n    @cell_7 = Cell.new(7)\n    @cell_8 = Cell.new(8)\n    @cell_9 = Cell.new(0)\n    @cells = [@cell_1, @cell_2, @cell_3,\n              @cell_4, @cell_5, @cell_6,\n              @cell_7, @cell_8, @cell_9]\n  end\nend\n</code></pre>\n\n<p>I think I could use a loop to create a hash with unique key names pointing to unique Cell objects, but I don't know how I could make unique <em>instance variables</em> with a loop.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "methods", "initialization", "arguments"], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1424226970, "post_id": 28574696, "comment_id": 45459329, "body": "&quot;if params is nil it will get set to {}&quot;. That&#39;s close. If params is nil or <i>false</i> it will get set to <code>{}</code>."}, {"owner": {"reputation": 1527, "user_id": 2763058, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/859276278ee617106e18a7a655774f8e?s=128&d=identicon&r=PG&f=1", "display_name": "foxtrotuniform6969", "link": "https://stackoverflow.com/users/2763058/foxtrotuniform6969"}, "edited": false, "score": 0, "creation_date": 1424227095, "post_id": 28574696, "comment_id": 45459356, "body": "@draffensperger You are correct, &#39;parsed_date&#39; is not a Rails method. i edited my question to include its definition, I apologize for initially omitting that."}, {"owner": {"reputation": 1527, "user_id": 2763058, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/859276278ee617106e18a7a655774f8e?s=128&d=identicon&r=PG&f=1", "display_name": "foxtrotuniform6969", "link": "https://stackoverflow.com/users/2763058/foxtrotuniform6969"}, "edited": false, "score": 0, "creation_date": 1424230261, "post_id": 28574696, "comment_id": 45460192, "body": "So, if I&#39;m understanding this correctly.... if <code>params</code> arguments (<code>date_to</code> and <code>date_from</code>) are left blank by the user, then <code>params</code> is empty (<code>nil</code>), meaning that <code>parsed_date(params[:date_to], Date.today.to_s)</code> only outputs <code>Date.today.to_s</code>, right?  If that&#39;s true, how does Rails know to ignore <code>Date.today.to_s</code> when <code>params</code> is not <code>nil</code>? What part of the code, or part of Rails, makes the default <code>Date.today.to_s</code> get ignored?"}], "tags": [], "owner": {"reputation": 310, "user_id": 1995125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0cf04426ece49f04d66ace0150c42c8?s=128&d=identicon&r=PG", "display_name": "draffensperger", "link": "https://stackoverflow.com/users/1995125/draffensperger"}, "is_accepted": false, "score": 0, "last_activity_date": 1424262037, "last_edit_date": 1424262037, "creation_date": 1424224685, "answer_id": 28574696, "question_id": 28574656, "link": "https://stackoverflow.com/questions/28574656/in-a-ruby-method-def-initializeparams-what-does-params-do/28574696#28574696", "title": "In a Ruby method &quot;def initialize(params)&quot; what does &quot;params||={}&quot; do?", "body": "<p>So <code>params ||= {}</code> is equivalent to <code>params = params || {}</code>. In Ruby <code>nil</code> is considered false. So if <code>params</code> is <code>nil</code> (or <code>false</code>) it will get set to <code>{}</code>. That's important in the code below because if <code>params</code> is <code>nil</code> then <code>params[:date_from]</code> will cause an error. But if <code>params</code> is an empty hash, i.e. <code>{}</code> then <code>params[:date_from]</code> will return <code>nil</code> and won't cause an error.</p>\n\n<p>Based on the definition of <code>parsed_date</code> it will attempt to parse <code>date_string</code> but if <code>date_string</code> is nil or an invalid date (e.g. <code>Feb 30, 2015</code>) then it will throw an error. The <code>rescue ArgumentError, TypeError</code> handles those errors and will return <code>default</code>.</p>\n\n<p>If your program expects <code>@date_from</code> and <code>@date_to</code> to be <code>Date</code> objects, then your calls should not include the <code>.to_s</code> for <code>default</code> because that will cause e.g. <code>@date_from</code> to be set to the string to e.g. <code>\"Wed, 18 Feb 2015\"</code> rather than the actual <code>Date</code> object corresponding to today's date.</p>\n\n<p>So in summary, the line <code>@date_to = parsed_date(params[:date_to], Date.today.to_s)</code> will attempt to parse the date given by the parameter <code>date_to</code> and convert it to a <code>Date</code> object, but if the parameter wasn't specified (so <code>params[:date_to]</code> is <code>nil</code>), it was <code>false</code> or it was an invalid date, then <code>@date_to</code> will get assigned to the default value, in your case, the string of today's date.</p>\n"}], "owner": {"reputation": 1527, "user_id": 2763058, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/859276278ee617106e18a7a655774f8e?s=128&d=identicon&r=PG&f=1", "display_name": "foxtrotuniform6969", "link": "https://stackoverflow.com/users/2763058/foxtrotuniform6969"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 282, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424262037, "creation_date": 1424224403, "last_edit_date": 1424227834, "question_id": 28574656, "link": "https://stackoverflow.com/questions/28574656/in-a-ruby-method-def-initializeparams-what-does-params-do", "title": "In a Ruby method &quot;def initialize(params)&quot; what does &quot;params||={}&quot; do?", "body": "<p>I have this inside my Rails Model \"InvoiceSearch\":</p>\n\n<pre><code>class InvoiceSearch\n  attr_reader :date_from, :date_to\n\n def initialize(params)\n    params||={}\n    @date_from = parsed_date(params[:date_from], 7.days.ago.to_date.to_s)\n    @date_to = parsed_date(params[:date_to], Date.today.to_s)\n  end\n</code></pre>\n\n<p>What am I doing by saying <code>params||={}</code>?</p>\n\n<p>What does</p>\n\n<pre><code>@date_to = parsed_date(params[:date_to], Date.today.to_s)\"\n</code></pre>\n\n<p>do exactly?</p>\n\n<p>Definition of 'parsed_date':</p>\n\n<pre><code>private\n  def parsed_date(date_string, default)\n    Date.parse(date_string)\n  rescue ArgumentError, TypeError\n    default\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "gem", "jekyll", "kramdown"], "comments": [{"owner": {"reputation": 256, "user_id": 724636, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/bdc2afd90cf7c5fe4642c017abcc9d0b?s=128&d=identicon&r=PG", "display_name": "master", "link": "https://stackoverflow.com/users/724636/master"}, "edited": false, "score": 0, "creation_date": 1424222379, "post_id": 28574314, "comment_id": 45458069, "body": "I should note, the default MD library, redcarpet works just fine. I&#39;m trying to use a different MD library."}, {"owner": {"reputation": 256, "user_id": 724636, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/bdc2afd90cf7c5fe4642c017abcc9d0b?s=128&d=identicon&r=PG", "display_name": "master", "link": "https://stackoverflow.com/users/724636/master"}, "edited": false, "score": 0, "creation_date": 1424880731, "post_id": 28574314, "comment_id": 45734563, "body": "Explanation of why this was down voted would be helpful in crafted better questions in the future."}], "answers": [{"comments": [{"owner": {"reputation": 256, "user_id": 724636, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/bdc2afd90cf7c5fe4642c017abcc9d0b?s=128&d=identicon&r=PG", "display_name": "master", "link": "https://stackoverflow.com/users/724636/master"}, "edited": false, "score": 0, "creation_date": 1424234722, "post_id": 28575812, "comment_id": 45461485, "body": "It didn&#39;t work because it didn&#39;t add it to my gemfile. I had to manually add the gem kramdown entry to my gemfile and run &#39;bundle install again&#39;"}, {"owner": {"reputation": 299, "user_id": 4263820, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/fae12d17d6a02d0d7cf958a226f62467?s=128&d=identicon&r=PG&f=1", "display_name": "harvey", "link": "https://stackoverflow.com/users/4263820/harvey"}, "reply_to_user": {"reputation": 256, "user_id": 724636, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/bdc2afd90cf7c5fe4642c017abcc9d0b?s=128&d=identicon&r=PG", "display_name": "master", "link": "https://stackoverflow.com/users/724636/master"}, "edited": false, "score": 0, "creation_date": 1424235197, "post_id": 28575812, "comment_id": 45461633, "body": "what is your error message when you type : gem install markdown ?  alternatively, you can manually install the dependencies. <a href=\"https://rubygems.org/gems/markdown\" rel=\"nofollow noreferrer\">rubygems.org/gems/markdown</a>"}, {"owner": {"reputation": 21993, "user_id": 702275, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/25411d307fa0ce0f741e7eb1b28d2cd9?s=128&d=identicon&r=PG", "display_name": "tim peterson", "link": "https://stackoverflow.com/users/702275/tim-peterson"}, "edited": false, "score": 0, "creation_date": 1437219829, "post_id": 28575812, "comment_id": 50945269, "body": "did you ever get an answer for this?"}], "tags": [], "owner": {"reputation": 299, "user_id": 4263820, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/fae12d17d6a02d0d7cf958a226f62467?s=128&d=identicon&r=PG&f=1", "display_name": "harvey", "link": "https://stackoverflow.com/users/4263820/harvey"}, "is_accepted": false, "score": 1, "last_activity_date": 1424232553, "creation_date": 1424232553, "answer_id": 28575812, "question_id": 28574314, "link": "https://stackoverflow.com/questions/28574314/missing-gem-dependencies/28575812#28575812", "title": "Missing Gem Dependencies", "body": "<p>If I understand well your question, you should just have to type :</p>\n\n<pre><code>gem install markdown\n</code></pre>\n\n<p>that will auto-install the dependencies.\nIt worked fine for me.</p>\n"}], "owner": {"reputation": 256, "user_id": 724636, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/bdc2afd90cf7c5fe4642c017abcc9d0b?s=128&d=identicon&r=PG", "display_name": "master", "link": "https://stackoverflow.com/users/724636/master"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1362, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1424277120, "creation_date": 1424222334, "last_edit_date": 1424277120, "question_id": 28574314, "link": "https://stackoverflow.com/questions/28574314/missing-gem-dependencies", "title": "Missing Gem Dependencies", "body": "<p>I am experiencing a problem with my build and missing a gem. However, I've installed the gem multiple times to no avail. I'm using NPM to manage packages as well. Since Jekyll is looking for kramdown, a gem, how can I let my build know it's installed locally?</p>\n\n<p>Apologies on the weird question. I'm new to gems and stuff.</p>\n\n<p>My error:</p>\n\n<pre><code>    Warning: Command failed: You are missing a library required for Markdown. Please run:\n  $ [sudo] gem install kramdown\n  Conversion error: There was an error converting 'project/adrian-college.md'.\n             ERROR: YOUR SITE COULD NOT BE BUILT:\n                    ------------------------------------\n                    Missing dependency: kramdown\n Use --force to continue.\n</code></pre>\n\n<p><strong>SOLUTION</strong></p>\n\n<p>'gem install kramdown' installed the gem locally but wasn't included as a dependency for the project. I had to simply edit the Gemfile manually and add: <code>gem 'kramdown'</code> then run <code>bundle install</code>.</p>\n"}, {"tags": ["ruby", "minitest"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 3618158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5b0d13d8f61064711372bc5451bdcc?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Fincher", "link": "https://stackoverflow.com/users/3618158/chris-fincher"}, "edited": false, "score": 0, "creation_date": 1424227954, "post_id": 28574925, "comment_id": 45459538, "body": "Yep. <code>gem install minitest</code> did the trick. I didn&#39;t even think about it because I thought Minitest was included with Ruby, which I guess it is, but they leave certain things out... In any event, thanks!"}], "tags": [], "owner": {"reputation": 1391, "user_id": 1141107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8d22585090624d7683365a1f81ec6866?s=128&d=identicon&r=PG", "display_name": "Marius Pop", "link": "https://stackoverflow.com/users/1141107/marius-pop"}, "is_accepted": true, "score": 0, "last_activity_date": 1424226219, "creation_date": 1424226219, "answer_id": 28574925, "question_id": 28574193, "link": "https://stackoverflow.com/questions/28574193/why-did-my-minitest-pride-alias-break/28574925#28574925", "title": "Why did my minitest/pride alias break?", "body": "<p>Duplicated your error by switching to ruby 2.3.0. I just ran the tests before installing any gems.</p>\n\n<p>I managed to get the tests running with your alias by simply doing a <code>gem minitest install</code>. Not sure if your problem is caused by the same reason since I'm using rbenv for managing my rubies and gems but it does feel like you are having a package management issue. Hope this helps.</p>\n"}], "owner": {"reputation": 3, "user_id": 3618158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5b0d13d8f61064711372bc5451bdcc?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Fincher", "link": "https://stackoverflow.com/users/3618158/chris-fincher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 28574925, "answer_count": 1, "score": 0, "last_activity_date": 1424226219, "creation_date": 1424221555, "question_id": 28574193, "link": "https://stackoverflow.com/questions/28574193/why-did-my-minitest-pride-alias-break", "title": "Why did my minitest/pride alias break?", "body": "<p>Silly, cosmetic question for everyone.</p>\n\n<p>I take pride in my testing. That is, I like to use <code>minitest/pride</code>. Unfortunately, not everyone on my team is a fan, so I have activated it in the past using the command line instead of modifying the code by setting an alias to this:</p>\n\n<pre><code>RUBYOPT=-rminitest/pride bex rake` \n</code></pre>\n\n<p>(<code>bex</code> is an alias to <code>bundle exec</code>, and the default rake task runs our tests.)</p>\n\n<p>Recently, we updated the ruby version of our project from 1.9.3 to 2.2.0. This has broken my alias, and now when I try to run it, I get this error instead:</p>\n\n<pre><code>/Users/cf5455/.rubies/ruby-2.2.0/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require': cannot load such file -- minitest/pride (LoadError)\nfrom /Users/cf5455/.rubies/ruby-2.2.0/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n</code></pre>\n\n<p>My best guess as to why this is happening is that MiniTest was changed since our last Ruby version and <code>pride</code> has been renamed or moved, but I have not been successfully able to Google its new name or location.</p>\n\n<p>Does someone know a way that I can fix my arguments to get <code>pride</code> working again?</p>\n"}, {"tags": ["ruby", "warnings"], "answers": [{"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1424227263, "creation_date": 1424227263, "answer_id": 28575056, "question_id": 28574067, "link": "https://stackoverflow.com/questions/28574067/ruby-warning-check-without-backtrace/28575056#28575056", "title": "Ruby warning check without backtrace?", "body": "<blockquote>\n  <p>Is this right way to get warning from my project?</p>\n</blockquote>\n\n<p>I use:</p>\n\n<pre><code>ruby -wW2 /path/to/script.rb\n</code></pre>\n\n<p>to get full warnings when I'm checking code.</p>\n\n<p>Ruby's command-line helps says:</p>\n\n<pre><code>  -w              turn warnings on for your script\n  -W[level=2]     set warning level; 0=silence, 1=medium, 2=verbose\n</code></pre>\n"}], "owner": {"reputation": 4644, "user_id": 104080, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Mq2Yx.jpg?s=128&g=1", "display_name": "Matt - sanemat", "link": "https://stackoverflow.com/users/104080/matt-sanemat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424227263, "creation_date": 1424220719, "question_id": 28574067, "link": "https://stackoverflow.com/questions/28574067/ruby-warning-check-without-backtrace", "title": "Ruby warning check without backtrace?", "body": "<p>I want to check warning with all ruby files in my project.</p>\n\n<pre><code>$ cd my_project\n$ ruby -w **/*.rb\n /Users/sane/work/tachiko/pigeon.tachikoma.io/vendor/bundle/ruby/2.1.0/gems/newrelic_rpm-3.9.9.275/lib/new_relic/agent/sql_sampler.rb:9: warning: loading in progress, circular require considered harmful - /Users/sane/work/tachiko/pigeon.tachikoma.io/vendor/bundle/ruby/2.1.0/gems/newrelic_rpm-3.9.9.275/lib/new_relic/agent.rb\n        from config/application.rb:14:in  `&lt;main&gt;'\n        from /Users/sane/.anyenv/envs/rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/bundler-1.7.12/lib/bundler.rb:134:in  `require'\n        from /Users/sane/.anyenv/envs/rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/bundler-1.7.12/lib/bundler/runtime.rb:61:in  `require'\n        from /Users/sane/.anyenv/envs/rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/bundler-1.7.12/lib/bundler/runtime.rb:61:in  `each'\n        from /Users/sane/.anyenv/envs/rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/bundler-1.7.12/lib/bundler/runtime.rb:72:in  `block in require'\n        from /Users/sane/.anyenv/envs/rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/bundler-1.7.12/lib/bundler/runtime.rb:72:in  `each'\n        from /Users/sane/.anyenv/envs/rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/bundler-1.7.12/lib/bundler/runtime.rb:76:in  `block (2 levels) in require'\n        from /Users/sane/.anyenv/envs/rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/bundler-1.7.12/lib/bundler/runtime.rb:76:in  `require'\n        from /Users/sane/work/tachiko/pigeon.tachikoma.io/vendor/bundle/ruby/2.1.0/gems/newrelic_rpm-3.9.9.275/lib/newrelic_rpm.rb:25:in  `&lt;top (required)&gt;'\n        from /Users/sane/work/tachiko/pigeon.tachikoma.io/vendor/bundle/ruby/2.1.0/gems/newrelic_rpm-3.9.9.275/lib/newrelic_rpm.rb:25:in  `require'\n        from /Users/sane/work/tachiko/pigeon.tachikoma.io/vendor/bundle/ruby/2.1.0/gems/newrelic_rpm-3.9.9.275/lib/new_relic/control.rb:23:in  `&lt;top (required)&gt;'\n        from /Users/sane/work/tachiko/pigeon.tachikoma.io/vendor/bundle/ruby/2.1.0/gems/newrelic_rpm-3.9.9.275/lib/new_relic/control.rb:23:in  `require'  \n        from /Users/sane/work/tachiko/pigeon.tachikoma.io/vendor/bundle/ruby/2.1.0/gems/newrelic_rpm-3.9.9.275/lib/new_relic/agent.rb:40:in  `&lt;top (required)&gt;'\n    from /Users/sane/work/tachiko/pigeon.tachikoma.io/vendor/bundle/ruby/2.1.0/gems/newrelic_rpm-3.9.9.275/lib/new_relic/agent.rb:69:in  `&lt;module:NewRelic&gt;'\n    from /Users/sane/work/tachiko/pigeon.tachikoma.io/vendor/bundle/ruby/2.1.0/gems/newrelic_rpm-3.9.9.275/lib/new_relic/agent.rb:95:in  `&lt;module:Agent&gt;'\n    from /Users/sane/work/tachiko/pigeon.tachikoma.io/vendor/bundle/ruby/2.1.0/gems/newrelic_rpm-3.9.9.275/lib/new_relic/agent.rb:95:in  `require'\n    from /Users/sane/work/tachiko/pigeon.tachikoma.io/vendor/bundle/ruby/2.1.0/gems/newrelic_rpm-3.9.9.275/lib/new_relic/agent/sql_sampler.rb:10:in  `&lt;top (required)&gt;'\n    from /Users/sane/work/tachiko/pigeon.tachikoma.io/vendor/bundle/ruby/2.1.0/gems/newrelic_rpm-3.9.9.275/lib/new_relic/agent/sql_sampler.rb:10:in  `require'\n/Users/sane/work/tachiko/pigeon.tachikoma.io/vendor/bundle/ruby/2.1.0/gems/safe_yaml-1.0.4/lib/safe_yaml.rb:28: warning: method redefined; discarding old safe_load\n/Users/sane/.anyenv/envs/rbenv/versions/2.1.5/lib/ruby/2.1.0/psych.rb:283: warning: previous definition of safe_load was here\n(snip)\n</code></pre>\n\n<p>I want to show warning(line1, line20 and line21). I don't want to show backtrace(line2-line19).</p>\n\n<ol>\n<li>Is this right way to get warning from my project?</li>\n<li>How to hide backtrace? Any option? or <code>ruby -w **/*.rb | grep -v LINE_START_WITH_SPACE</code> ?</li>\n</ol>\n"}, {"tags": ["ruby", "postgresql", "gem"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1424220961, "post_id": 28573799, "comment_id": 45457628, "body": "Do you really need to run a Ruby version that is almost 7 years old? I suggest to update to a newer Ruby version, to avoid problems with gems that do not support Ruby 1.8 anymore."}, {"owner": {"reputation": 41, "user_id": 4521228, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/710168017/picture?type=large", "display_name": "Goktug Gea", "link": "https://stackoverflow.com/users/4521228/goktug-gea"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1424669632, "post_id": 28573799, "comment_id": 45629396, "body": "I am going to go ahead and upgrade the ruby version on CentOS 6.5"}], "owner": {"reputation": 41, "user_id": 4521228, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/710168017/picture?type=large", "display_name": "Goktug Gea", "link": "https://stackoverflow.com/users/4521228/goktug-gea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 652, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1424219138, "creation_date": 1424219138, "question_id": 28573799, "link": "https://stackoverflow.com/questions/28573799/ruby-gem-install-pg-with-ruby-1-8-7-on-centos-6-5", "title": "ruby gem install pg with ruby 1.8.7 on CentOS 6.5", "body": "<p>When trying to install the ruby gem pg with the command gem install pg\nI get the following error message:</p>\n\n<p>Building native extensions. This could take a while.:</p>\n\n<p>Gem files will remain installed in /usr/lib/ruby/gems/1.8/gems/pg-0.18.0 for inspection. Results logged to /usr/lib/ruby/gems/0.18.0/ext/gem_make.out    </p>\n\n<p>I have ruby 1.8.7 running.\nI have installed yum install postgresql-devel.</p>\n\n<p>Thanks for the help.</p>\n\n<p>The gem.make.out contains the following:</p>\n\n<pre><code>/usr/bin/ruby extconf.rb\nchecking for pg_config... yes\nUsing config values from /usr/bin/pg_config\nchecking for libpq-fe.h... yes\nchecking for libpq/libpq-fs.h... yes\nchecking for pg_config_manual.h... yes\nchecking for PQconnectdb() in -lpq... yes\nchecking for PQconnectionUsedPassword()... yes\nchecking for PQisthreadsafe()... yes\nchecking for PQprepare()... yes\nchecking for PQexecParams()... yes\nchecking for PQescapeString()... yes\nchecking for PQescapeStringConn()... yes\nchecking for PQescapeLiteral()... no\nchecking for PQescapeIdentifier()... no\nchecking for PQgetCancel()... yes\nchecking for lo_create()... yes\nchecking for pg_encoding_to_char()... yes\nchecking for pg_char_to_encoding()... yes\nchecking for PQsetClientEncoding()... yes\nchecking for PQlibVersion()... no\nchecking for PQping()... no\nchecking for PQsetSingleRowMode()... no\nchecking for PQconninfo()... no\nchecking for PQhostaddr()... no\nchecking for rb_encdb_alias()... no\nchecking for rb_enc_alias()... no\nchecking for rb_thread_call_without_gvl()... no\nchecking for rb_thread_call_with_gvl()... no\nchecking for rb_thread_fd_select()... no\nchecking for rb_w32_wrap_io_handle()... no\nchecking for rb_str_modify_expand()... no\nchecking for rb_hash_dup()... no\nchecking for PGRES_COPY_BOTH in libpq-fe.h... no\nchecking for PGRES_SINGLE_TUPLE in libpq-fe.h... no\nchecking for PG_DIAG_TABLE_NAME in libpq-fe.h... no\nchecking for struct pgNotify.extra in libpq-fe.h... yes\nchecking for unistd.h... yes\nchecking for ruby/st.h... no\nchecking for st.h... yes\ncreating extconf.h\ncreating Makefile\n\nmake\ngcc -I. -I. -I/usr/lib64/ruby/1.8/x86_64-linux -I. -DRUBY_EXTCONF_H=\\\"extconf.h\\\" -I/usr/include    -fPIC -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -fno-strict-aliasing  -fPIC   -c pg_type_map_by_class.c\npg_type_map_by_class.c: In function \u2018pg_tmbk_lookup_klass\u2019:\npg_type_map_by_class.c:68: warning: implicit declaration of function \u2018RB_TYPE_P\u2019\n\ngcc -I. -I. -I/usr/lib64/ruby/1.8/x86_64-linux -I. -DRUBY_EXTCONF_H=\\\"extconf.h\\\" -I/usr/include    -fPIC -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -fno-strict-aliasing  -fPIC   -c pg_result.c\npg_result.c:428: warning: \u2018pgresult_ntuples_for_enum\u2019 defined but not used\n\ngcc -I. -I. -I/usr/lib64/ruby/1.8/x86_64-linux -I. -DRUBY_EXTCONF_H=\\\"extconf.h\\\" -I/usr/include    -fPIC -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -fno-strict-aliasing  -fPIC   -c pg_type_map.c\n\ngcc -I. -I. -I/usr/lib64/ruby/1.8/x86_64-linux -I. -DRUBY_EXTCONF_H=\\\"extconf.h\\\" -I/usr/include    -fPIC -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -fno-strict-aliasing  -fPIC   -c pg_type_map_by_column.c\npg_type_map_by_column.c: In function \u2018pg_tmbc_result_value\u2019:\npg_type_map_by_column.c:102: warning: implicit declaration of function \u2018ENCODING_GET\u2019\n\ngcc -I. -I. -I/usr/lib64/ruby/1.8/x86_64-linux -I. -DRUBY_EXTCONF_H=\\\"extconf.h\\\" -I/usr/include    -fPIC -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -fno-strict-aliasing  -fPIC   -c pg_copy_coder.c\npg_copy_coder.c: In function \u2018pg_copycoder_encoder_allocate\u2019:\npg_copy_coder.c:38: warning: implicit declaration of function \u2018rb_str_new_cstr\u2019\ngcc -I. -I. -I/usr/lib64/ruby/1.8/x86_64-linux -I. -DRUBY_EXTCONF_H=\\\"extconf.h\\\" -I/usr/include    -fPIC -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -fno-strict-aliasing  -fPIC   -c util.c\n\ngcc -I. -I. -I/usr/lib64/ruby/1.8/x86_64-linux -I. -DRUBY_EXTCONF_H=\\\"extconf.h\\\" -I/usr/include    -fPIC -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -fno-strict-aliasing  -fPIC   -c pg_binary_encoder.c\npg_binary_encoder.c: In function \u2018pg_bin_enc_from_base64\u2019:\npg_binary_encoder.c:122: warning: implicit declaration of function \u2018RSTRING_LENINT\u2019\n\ngcc -I. -I. -I/usr/lib64/ruby/1.8/x86_64-linux -I. -DRUBY_EXTCONF_H=\\\"extconf.h\\\" -I/usr/include    -fPIC -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -fno-strict-aliasing  -fPIC   -c pg_type_map_by_mri_type.c\npg_type_map_by_mri_type.c: In function \u2018pg_tmbmt_typecast_query_param\u2019:\npg_type_map_by_mri_type.c:61: error: \u2018T_COMPLEX\u2019 undeclared (first use in this function)\npg_type_map_by_mri_type.c:61: error: (Each undeclared identifier is reported only once\npg_type_map_by_mri_type.c:61: error: for each function it appears in.)\npg_type_map_by_mri_type.c:61: error: \u2018T_RATIONAL\u2019 undeclared (first use in this function)\npg_type_map_by_mri_type.c: In function \u2018pg_tmbmt_aset\u2019:\npg_type_map_by_mri_type.c:197: warning: implicit declaration of function \u2018RB_TYPE_P\u2019\nmake: *** [pg_type_map_by_mri_type.o] Error 1\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "api", "view"], "answers": [{"tags": [], "owner": {"reputation": 310, "user_id": 1995125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0cf04426ece49f04d66ace0150c42c8?s=128&d=identicon&r=PG", "display_name": "draffensperger", "link": "https://stackoverflow.com/users/1995125/draffensperger"}, "is_accepted": false, "score": 0, "last_activity_date": 1424219353, "creation_date": 1424219353, "answer_id": 28573832, "question_id": 28573757, "link": "https://stackoverflow.com/questions/28573757/rails-options-from-collection-for-select-display-proper-data-in-dropdown-from/28573832#28573832", "title": "rails options_from_collection_for_select - display proper data in dropdown from API and user selects from dropdown", "body": "<p>So <a href=\"http://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/options_from_collection_for_select\" rel=\"nofollow\">options_from_collection_for_select</a> just takes the collection you pass into it and doesn't specifically use anything from the controller unless you specify it to. Your code <code>options_from_collection_for_select(Category.all, :id, :title)</code> queries from the database via the <code>Category.all</code>.</p>\n\n<p>It looks like you're storing the info from the API in <code>@events</code> (though that looks like an event list not a categories list). If you had a variable you generated from the API that you assigned to <code>@categories</code> then you could use it in your view like this:</p>\n\n<p><code>options_from_collection_for_select(@categories, :id, :title)</code></p>\n"}], "owner": {"reputation": 123, "user_id": 3604867, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/34157cbbda6e36fc551bd120fee40d00?s=128&d=identicon&r=PG&f=1", "display_name": "user3604867", "link": "https://stackoverflow.com/users/3604867/user3604867"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 586, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424219353, "creation_date": 1424218975, "question_id": 28573757, "link": "https://stackoverflow.com/questions/28573757/rails-options-from-collection-for-select-display-proper-data-in-dropdown-from", "title": "rails options_from_collection_for_select - display proper data in dropdown from API and user selects from dropdown", "body": "<p>Currently building my first rails app ... I'm using an external API to get the information. I can seed the db locally and see the results of that data in the dropdown menu that the user sees, but I would like this information to come from the API instead. </p>\n\n<p>This code displays categories for what I have in my seed.db, but I need to pull from the api and display those categories, then I would like to show the items related to that specific category when a user selects that particular category. I plan on using JS for this but open to suggestions for ways to do that in Rails - since I am new! - </p>\n\n<p>in the view - (displays dropdown of categories found in seed.db)</p>\n\n<pre><code>   &lt;select&gt;\n      &lt;option value=\"category\"&gt;Select Book Category&lt;/option&gt;\n      &lt;%= options_from_collection_for_select(Category.all, :id, :title) %&gt;\n   &lt;/select&gt;\n</code></pre>\n\n<p>in the controller - I am parsing the information correctly from the api (I'm sure it's not the best format but it's working). I'm able to iterate through in the corresponding view and show the information from the parsed info in the view. It's just a matter of connecting the dots in the dropdown menu and displaying that information correctly now. </p>\n\n<p>in the controller - </p>\n\n<pre><code>def index\n  base_url = 'sample url from google api using'\n  key = ENV['GOOGLE_API_KEY'] \n  url = base_url + key\n\n  response = RestClient.get(url)\n  @events = JSON.parse(response)\n\n  respond_to do |format|\n  format.html\n  format.json { render json: @events }\n end\n</code></pre>\n"}, {"tags": ["ruby", "sinatra", "instagram", "instagram-api"], "comments": [{"owner": {"reputation": 1952, "user_id": 1982006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f29b061ef718e5ca1867cb5544dcbfe9?s=128&d=identicon&r=PG", "display_name": "ShaneQful", "link": "https://stackoverflow.com/users/1982006/shaneqful"}, "edited": false, "score": 1, "creation_date": 1424215629, "post_id": 28573033, "comment_id": 45455928, "body": "Not sure exactly what your asking you can access params using the params object like so <code>params[:queryparam]</code>"}, {"owner": {"reputation": 107, "user_id": 1283092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b25ad2d09cd8be4ce4c4f27a737b1d6c?s=128&d=identicon&r=PG", "display_name": "Vlad", "link": "https://stackoverflow.com/users/1283092/vlad"}, "reply_to_user": {"reputation": 1952, "user_id": 1982006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f29b061ef718e5ca1867cb5544dcbfe9?s=128&d=identicon&r=PG", "display_name": "ShaneQful", "link": "https://stackoverflow.com/users/1982006/shaneqful"}, "edited": false, "score": 0, "creation_date": 1424259967, "post_id": 28573033, "comment_id": 45473247, "body": "user_recent_media(self, options = {:count =&gt; 30})  @ shaneqful I need to set the <b>count</b> parameter to 30 and it seems to be the incorrect way"}, {"owner": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "reply_to_user": {"reputation": 1952, "user_id": 1982006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f29b061ef718e5ca1867cb5544dcbfe9?s=128&d=identicon&r=PG", "display_name": "ShaneQful", "link": "https://stackoverflow.com/users/1982006/shaneqful"}, "edited": false, "score": 2, "creation_date": 1424299762, "post_id": 28573033, "comment_id": 45497572, "body": "@ShaneQful is right, try putting <code>count = (params.fetch :count, 30).to_i</code> (if 30 is your default and then <code>options = {:count =&gt; count}</code>. Then, any GET request made with a <code>count=20</code> in the querystring will then set the count to 20, without, it will be 30. See <a href=\"http://www.sinatrarb.com/intro.html\" rel=\"nofollow noreferrer\">the first section of the Sinatra README</a>."}, {"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 2, "creation_date": 1424313343, "post_id": 28573033, "comment_id": 45501841, "body": "What do you mean by \u201cit doesn&#39;t seem to be working\u201d? You need to include in your question what is happening and what you are expecting to happen."}, {"owner": {"reputation": 107, "user_id": 1283092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b25ad2d09cd8be4ce4c4f27a737b1d6c?s=128&d=identicon&r=PG", "display_name": "Vlad", "link": "https://stackoverflow.com/users/1283092/vlad"}, "reply_to_user": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "edited": false, "score": 0, "creation_date": 1424348345, "post_id": 28573033, "comment_id": 45516639, "body": "@iain Thanks a lot, that did it."}, {"owner": {"reputation": 107, "user_id": 1283092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b25ad2d09cd8be4ce4c4f27a737b1d6c?s=128&d=identicon&r=PG", "display_name": "Vlad", "link": "https://stackoverflow.com/users/1283092/vlad"}, "reply_to_user": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1424348480, "post_id": 28573033, "comment_id": 45516724, "body": "@matt The default value was 20 and I was trying to set it to 30, however, the way I did it, it only caused a server error. (using heroku to deploy and test an app)"}], "owner": {"reputation": 107, "user_id": 1283092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b25ad2d09cd8be4ce4c4f27a737b1d6c?s=128&d=identicon&r=PG", "display_name": "Vlad", "link": "https://stackoverflow.com/users/1283092/vlad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 755, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1424299470, "creation_date": 1424214797, "last_edit_date": 1424299470, "question_id": 28573033, "link": "https://stackoverflow.com/questions/28573033/sinatra-query-parameters", "title": "Sinatra query parameters", "body": "<p>Trying to get familiar with <a href=\"https://github.com/Instagram/instagram-ruby-gem\" rel=\"nofollow\">sample Sinatra app</a> for the <a href=\"https://rubygems.org/gems/instagram\" rel=\"nofollow\">Instagram Ruby gem</a>. The issue is that I can't find the correct way to apply arguments to queries, for example I'm trying to set the amount of posts being shown to <strong>30</strong>:</p>\n\n<pre><code>get \"/user_recent_media\" do\n  client = Instagram.client(:access_token =&gt; session[:access_token])\n  user = client.user\n  html =\n  \"\"\"\n    &lt;h1 align=\\\"center\\\"&gt;#{user.username}&lt;/h1&gt;\n  \"\"\"\n  for media_item in client.user_recent_media(self, options = {:count =&gt; 30})\n    html &lt;&lt; \"&lt;img src='#{media_item.images.low_resolution.url}'&gt;\"\n  end\n  html\nend\n</code></pre>\n\n<p>I tried to apply the parameters this way but it doesn't seem to be working.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 2, "creation_date": 1424214942, "post_id": 28572978, "comment_id": 45455639, "body": "The pros and cons of different coding styles usually just apply to you and the team working on the code. As such, I think there is just one general rule: Be consistent. NB not necessarily same format in each case, although that is reasonable. Instead, know when you use which format, and if it helps you decide, formulate a rationale. BTW you have copied the example incorrectly from the link, it is <code>{ minimum: 5 }</code>"}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 1, "creation_date": 1424214966, "post_id": 28572978, "comment_id": 45455648, "body": "<a href=\"https://github.com/bbatsov/rails-style-guide\" rel=\"nofollow noreferrer\">github.com/bbatsov/rails-style-guide</a>"}, {"owner": {"reputation": 666, "user_id": 2337188, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/aCiAF.gif?s=128&g=1", "display_name": "digijim", "link": "https://stackoverflow.com/users/2337188/digijim"}, "edited": false, "score": 0, "creation_date": 1424215292, "post_id": 28572978, "comment_id": 45455797, "body": "The new syntax requires less keystrokes."}], "answers": [{"comments": [{"owner": {"reputation": 108, "user_id": 1437085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d174cbe73478dbf6debf2029997adb7?s=128&d=identicon&r=PG", "display_name": "Daniel Below", "link": "https://stackoverflow.com/users/1437085/daniel-below"}, "edited": false, "score": 0, "creation_date": 1424215406, "post_id": 28573093, "comment_id": 45455838, "body": "Ohh, that makes sense then. Everything I&#39;ve read on symbols thus far has been using colon as prefix. And syntax-highlighting is different in my IDE for both versions :("}, {"owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "edited": false, "score": 0, "creation_date": 1424216633, "post_id": 28573093, "comment_id": 45456286, "body": "There&#39;s a special feature in late versions of ruby, for Hash literals only, where <code>{foo: &quot;bar&quot;}</code> is equivalent to <code>{:foo =&gt; &quot;bar&quot;}</code>.  These things mean the same thing. While the newer shorter version is convenient and more concise for a common case, it is confusing to beginners when there are multiple syntax for the same thing -- it&#39;s not just you, it&#39;s kinda confusing. You seem to be on the right track, and seem to be understanding what&#39;s up, though. All your alternatives are equivalent, most find the versions with less characters and less parens to be more readable --except when they aren&#39;t."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "edited": false, "score": 0, "creation_date": 1424228552, "post_id": 28573093, "comment_id": 45459691, "body": "@jrochkind <i>Some</i> symbols. You can say <code>{ :$set =&gt; x }</code> but you can&#39;t <code>{ $set: x }</code> (but you can <code>{ &#39;$set&#39;: x }</code> in Ruby 2.2+). I also find it bizarre that people say that the JavaScript-style uses fewer keystrokes while using double quotes for strings. Yes, this is my pet peeve."}], "tags": [], "owner": {"reputation": 973, "user_id": 1693169, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b132e6176f5115b43f6a0c5446dea0c2?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/1693169/sean"}, "is_accepted": true, "score": 2, "last_activity_date": 1424215083, "creation_date": 1424215083, "answer_id": 28573093, "question_id": 28572978, "link": "https://stackoverflow.com/questions/28572978/rubyonrails-method-notation/28573093#28573093", "title": "RubyOnRails Method notation", "body": "<p>the following syntax is preferred</p>\n\n<pre><code>validates :title, presence: true, \n                  length: { minimum: 5 }\n</code></pre>\n\n<p>you are passing in symbols in this one as well because of the new 1.9 hash syntax.  see <a href=\"http://effectif.com/ruby/update-your-project-for-ruby-19-hash-syntax\" rel=\"nofollow\">http://effectif.com/ruby/update-your-project-for-ruby-19-hash-syntax</a></p>\n\n<p>you could write the same validates method like so</p>\n\n<pre><code>validates :title, :presence =&gt; true, \n                  :length =&gt; { :minimum =&gt; 5 }\n</code></pre>\n\n<p>in both examples, <code>title</code>, <code>presence</code>, <code>length</code>, and <code>minimum</code> are all symbols</p>\n"}], "owner": {"reputation": 108, "user_id": 1437085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d174cbe73478dbf6debf2029997adb7?s=128&d=identicon&r=PG", "display_name": "Daniel Below", "link": "https://stackoverflow.com/users/1437085/daniel-below"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "closed_date": 1424605306, "accepted_answer_id": 28573093, "answer_count": 1, "score": 0, "last_activity_date": 1424215083, "creation_date": 1424214582, "last_edit_date": 1424215079, "question_id": 28572978, "link": "https://stackoverflow.com/questions/28572978/rubyonrails-method-notation", "closed_reason": "Opinion-based", "title": "RubyOnRails Method notation", "body": "<p>I've started to look into some RubyOnRails (coming from more of a Java / C# background) and I have some questions regarding what the general consensus of notation is.</p>\n\n<p>I've been following the Rails tutorial from (<a href=\"http://guides.rubyonrails.org/getting_started.html\" rel=\"nofollow\">http://guides.rubyonrails.org/getting_started.html</a>). \nAt 5.10 they're adding some validation to their Article class via</p>\n\n<pre><code>validates :title, presence: true, \n                  length: { minimum: 5 }\n</code></pre>\n\n<p>But since <code>validates</code> is just a normal method, I could write</p>\n\n<pre><code>validates(:title, :presence =&gt; true, :length =&gt; { :minimum =&gt; 5 })\n# or\nvalidates(:title, { :presence =&gt; true, :length =&gt; { :minimum =&gt; 5 } })\n</code></pre>\n\n<p>Which of the above notations is the generally accepted one? What are the downsides to either?</p>\n\n<p>(Also, why would I pass the symbol in the second examples, but not in the first one?)</p>\n"}]