[{"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "paperclip"], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 6254115, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mCP4i.png?s=128&g=1", "display_name": "Senator", "link": "https://stackoverflow.com/users/6254115/senator"}, "edited": false, "score": 0, "creation_date": 1466647329, "post_id": 37980136, "comment_id": 63407620, "body": "Thanks on the quick reply Dennis but that doesn&#39;t seem to work for me.  I added exactly as above to my upload model, still lets me attach more than six images with one user.  the name of my Paperclip attachment is &#39;picture&#39; not &#39;image&#39;, would that matter at all?"}, {"owner": {"reputation": 161, "user_id": 1803758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5ae879780970c64e61245af881074e2?s=128&d=identicon&r=PG", "display_name": "DennisCastro", "link": "https://stackoverflow.com/users/1803758/denniscastro"}, "reply_to_user": {"reputation": 63, "user_id": 6254115, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mCP4i.png?s=128&g=1", "display_name": "Senator", "link": "https://stackoverflow.com/users/6254115/senator"}, "edited": false, "score": 0, "creation_date": 1466699236, "post_id": 37980136, "comment_id": 63437815, "body": "the picture is an attribute to Upload model. Your model User has_many :uploads. are you sure the upload is populate the user_id attribute?, try in console. User.first.uploads.count"}, {"owner": {"reputation": 63, "user_id": 6254115, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mCP4i.png?s=128&g=1", "display_name": "Senator", "link": "https://stackoverflow.com/users/6254115/senator"}, "edited": false, "score": 0, "creation_date": 1466732809, "post_id": 37980136, "comment_id": 63452778, "body": "it is weird, when i look at the user attribute for each record in the Upload model, it&#39;s a long unintelligible ID # that is different for each record.  However, the user_id is the normal numeric # for that user... does Devise do something weird here?"}], "tags": [], "owner": {"reputation": 161, "user_id": 1803758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5ae879780970c64e61245af881074e2?s=128&d=identicon&r=PG", "display_name": "DennisCastro", "link": "https://stackoverflow.com/users/1803758/denniscastro"}, "is_accepted": false, "score": 1, "last_activity_date": 1466640053, "creation_date": 1466640053, "answer_id": 37980136, "question_id": 37980076, "link": "https://stackoverflow.com/questions/37980076/how-to-limit-number-of-uploads-by-user/37980136#37980136", "title": "How to limit number of uploads by user?", "body": "<pre><code>class Upload &lt; ActiveRecord::Base\n\n  MAX_IMAGES = 6\n  validate :maximum_images\n\n  private\n\n  def count_valid_images\n    self.user.uploads.count\n  end\n\n  def maximum_images\n    errors.add(:base, \"must have max #{MAX_IMAGES} images\") if count_valid_images &gt; MAX_IMAGES\n  end\n\n\nend\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 6254115, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mCP4i.png?s=128&g=1", "display_name": "Senator", "link": "https://stackoverflow.com/users/6254115/senator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466640053, "creation_date": 1466639719, "question_id": 37980076, "link": "https://stackoverflow.com/questions/37980076/how-to-limit-number-of-uploads-by-user", "title": "How to limit number of uploads by user?", "body": "<p>relatively new to ruby on rails and I'm creating a simple Uploads model for Paperclip images to be attached and displayed.  I've got that all working well, but I want to limit a current user to upload no more than 6 images at any given time.  </p>\n\n<p>In what file and what code would I add this?  It would be quite helpful to know this for any future model I create ! </p>\n\n<p>I'm assuming it's quite a small bit of code but I can't see an answer anywhere online... thanks !</p>\n\n<p>my UploadsController (did a simple scaffolding and paperclip setup):</p>\n\n<pre><code>class UploadsController &lt; ApplicationController\n      before_action :set_upload, only: [:show, :edit, :update, :destroy]\n\n      # GET /uploads\n      # GET /uploads.json\n      def index\n        @uploads = Upload.all\n      end\n\n      # GET /uploads/1\n      # GET /uploads/1.json\n      def show\n      end\n\n      # GET /uploads/new\n      def new\n        @upload = current_user.uploads.build\n      end\n\n      # GET /uploads/1/edit\n      def edit\n      end\n\n      # POST /uploads\n      # POST /uploads.json\n      def create\n        @upload = current_user.uploads.build(upload_params)\n\n        respond_to do |format|\n          if @upload.save\n            format.html { redirect_to @upload, notice: 'Upload was successfully created.' }\n            format.json { render :show, status: :created, location: @upload }\n          else\n            format.html { render :new }\n            format.json { render json: @upload.errors, status: :unprocessable_entity }\n          end\n        end\n      end\n\n      # PATCH/PUT /uploads/1\n      # PATCH/PUT /uploads/1.json\n      def update\n        respond_to do |format|\n          if @upload.update(upload_params)\n            format.html { redirect_to @upload, notice: 'Upload was successfully updated.' }\n            format.json { render :show, status: :ok, location: @upload }\n          else\n            format.html { render :edit }\n            format.json { render json: @upload.errors, status: :unprocessable_entity }\n          end\n        end\n      end\n\n      # DELETE /uploads/1\n      # DELETE /uploads/1.json\n      def destroy\n        @upload.destroy\n        respond_to do |format|\n          format.html { redirect_to uploads_url, notice: 'Upload was successfully destroyed.' }\n          format.json { head :no_content }\n        end\n      end\n\n      private\n        # Use callbacks to share common setup or constraints between actions.\n        def set_upload\n          @upload = Upload.find(params[:id])\n        end\n\n        # Never trust parameters from the scary internet, only allow the white list through.\n        def upload_params\n          params.require(:upload).permit(:upload_title, :upload_description, :upload_datecreated, :user_id, :picture, :delete_picture)\n        end\n    end\n</code></pre>\n\n<p>Upload model: </p>\n\n<pre><code> class Upload &lt; ActiveRecord::Base\n        belongs_to :user\n        has_attached_file :picture, styles: { large: \"600x600#\", medium: \"300x300#\", small: \"150x150#\", thumb: \"50x50#\" }, default_url: \"/images/:style/missing.png\"\n        validates_attachment_content_type :picture, content_type: /\\Aimage\\/.*\\Z/\n\n        before_validation { image.clear if @delete_image }\n\n        def delete_picture\n          @delete_image ||= false\n        end\n\n        def delete_picture=(value)\n          @delete_image  = !value.to_i.zero?\n        end\n      end\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1466640917, "post_id": 37980062, "comment_id": 63406105, "body": "1. <code>i == sorted.length</code> will never be true. 2. When <code>i  == sorted.size - 1</code>, <code>arr[i+1] #=&gt; nil</code>, so <code>arr[i+1] - arr[i]</code>, which is shorthand for <code>arr[i+1].-(arr[i])</code>, evaluates to <code>nil.-(arr[i])</code>, but <code>nil</code> has no method <code>:-</code>; i.e., <code>NilClass</code> has no instance method <code>:-</code>. 3. Method (and variable) names are to be &quot;snake_case&quot;, which begins with a lower case letter. <code>Consecutive</code>, since it begins with a capital letter, is a constant."}, {"owner": {"reputation": 81, "user_id": 5899018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4b8ae6da87378dd8c26711188f8afe6e?s=128&d=identicon&r=PG&f=1", "display_name": "IliasP", "link": "https://stackoverflow.com/users/5899018/iliasp"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1466642097, "post_id": 37980062, "comment_id": 63406409, "body": "wow do many mistakes in such a small piece of code. Thank you @CarySwoveland"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1466642699, "post_id": 37980062, "comment_id": 63406554, "body": "Thanks for the \u2705, but in future consider waiting longer before making a selection. Others may be still working on answers and an early selection may discourage other answers. More than once I&#39;ve seen an answer posted after the selection has been made that is a better answer or shows the selected answer to be incorrect. There&#39;s no rush to award the greenie. Many here wait at the least a couple of hours--often longer--before doing so."}, {"owner": {"reputation": 81, "user_id": 5899018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4b8ae6da87378dd8c26711188f8afe6e?s=128&d=identicon&r=PG&f=1", "display_name": "IliasP", "link": "https://stackoverflow.com/users/5899018/iliasp"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1466726141, "post_id": 37980062, "comment_id": 63451263, "body": "I will in the future - still learning. Thank you Cary :)"}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1466641792, "post_id": 37980170, "comment_id": 63406331, "body": "You could do this in one line, and avoid the creation of the local variables <code>f</code> and <code>l</code>, but is would be less readable: <code>arr.minmax.reverse.reduce(:-) + 1 - arr.size</code> #=&gt; 3."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 1, "last_activity_date": 1466640322, "creation_date": 1466640322, "answer_id": 37980170, "question_id": 37980062, "link": "https://stackoverflow.com/questions/37980062/find-number-of-missing-numbers-to-complete-consecutive-array/37980170#37980170", "title": "Find number of missing numbers to complete consecutive array", "body": "<p>If <code>arr</code> is your array, you can do this:</p>\n\n<pre><code>arr = [3,1,5,7,8]\n\nf,l = arr.minmax\n  #=&gt; [1, 8] \nl-f+1 - arr.size\n  #=&gt; 3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5730, "user_id": 667987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c00249587cb5aa0ceb5765dc811faa7?s=128&d=identicon&r=PG", "display_name": "seph", "link": "https://stackoverflow.com/users/667987/seph"}, "is_accepted": false, "score": 0, "last_activity_date": 1466643676, "last_edit_date": 1466643676, "creation_date": 1466641062, "answer_id": 37980274, "question_id": 37980062, "link": "https://stackoverflow.com/questions/37980062/find-number-of-missing-numbers-to-complete-consecutive-array/37980274#37980274", "title": "Find number of missing numbers to complete consecutive array", "body": "<p><code>arr[i + 1]</code> is going to be nil on your final pass through <code>each_index</code>. You can use <code>each_cons(2)</code> instead and have it deal with the indices for you:</p>\n\n<pre><code>def Consecutive(arr)\n  sorted = arr.sort\n  current_count = 0\n\n  sorted.each_cons(2) do |a, b|\n    difference = b - a - 1\n    current_count += difference\n  end \n\n  current_count\nend\n\nConsecutive([3,5,7])\n =&gt; 2 \n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 5899018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4b8ae6da87378dd8c26711188f8afe6e?s=128&d=identicon&r=PG&f=1", "display_name": "IliasP", "link": "https://stackoverflow.com/users/5899018/iliasp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 37980170, "answer_count": 2, "score": 1, "last_activity_date": 1466643676, "creation_date": 1466639644, "last_edit_date": 1466641990, "question_id": 37980062, "link": "https://stackoverflow.com/questions/37980062/find-number-of-missing-numbers-to-complete-consecutive-array", "title": "Find number of missing numbers to complete consecutive array", "body": "<p>I am trying to write a function that gives you the number of numbers need to complete a consecutive array. For example if we have the array [3,5,7] the function should return 2 (i.e. 4,6). I have come up with the code below but it gives me the following error? Any ideas why? Thanks!</p>\n\n<pre><code>    def consecutive(*arr)\n\n      sorted = arr.sort\n      current_count = 0\n\n      sorted.each_index do |i| \n        next if i == sorted.length\n        difference = arr[i+1] - arr[i] - 1\n        current_count += difference\n      end \n\n      current_count\n    end\n</code></pre>\n\n<p>And this is the error: </p>\n\n<pre><code>   undefined method `-' for nil:NilClass\n   (repl):9:in `block in Consecutive'\n   (repl):6:in `each_index'\n   (repl):6:in `Consecutive'\n   (repl):16:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "jquery-select2", "select2"], "answers": [{"comments": [{"owner": {"reputation": 1126, "user_id": 2847322, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/PFcQc.jpg?s=128&g=1", "display_name": "Carlos Morales", "link": "https://stackoverflow.com/users/2847322/carlos-morales"}, "edited": false, "score": 0, "creation_date": 1466690533, "post_id": 37980101, "comment_id": 63431376, "body": "Ryan sorry about #province_id i edited the post according the correct code and still show html error."}], "tags": [], "owner": {"reputation": 3807, "user_id": 733721, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/29kzY.jpg?s=128&g=1", "display_name": "Ryan K", "link": "https://stackoverflow.com/users/733721/ryan-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1466639854, "creation_date": 1466639854, "answer_id": 37980101, "question_id": 37979333, "link": "https://stackoverflow.com/questions/37979333/html-issue-code-doing-ajax-using-select2-gem/37980101#37980101", "title": "Html issue code doing ajax using select2 gem", "body": "<p>I see a few potential problems:</p>\n\n<ol>\n<li>The id of your <code>select_tag</code> seems to be <code>#province_id</code> and not <code>#province</code> (as you have in your <code>.rjs</code> file). This will mean that the partial is rendered (as you see in your logs) to the <code>.rjs</code> file, but then that code isn't used as there isn't a <code>#province</code> element in your html.</li>\n<li>If the new <code>select_tag</code> is correctly rendered to the html, <code>select2</code> doesn't automatically know to update. You would need to tell it to by saying <code>$(\"#province_id\").select2();</code> in your <code>.rjs</code> after the first line. This <em>might</em> cause two forms to render, but I'm not sure.</li>\n</ol>\n"}], "owner": {"reputation": 1126, "user_id": 2847322, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/PFcQc.jpg?s=128&g=1", "display_name": "Carlos Morales", "link": "https://stackoverflow.com/users/2847322/carlos-morales"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466690432, "creation_date": 1466634866, "last_edit_date": 1466690432, "question_id": 37979333, "link": "https://stackoverflow.com/questions/37979333/html-issue-code-doing-ajax-using-select2-gem", "title": "Html issue code doing ajax using select2 gem", "body": "<p>After selecting an option, I use an <code>ajax</code> call to update the other <code>select_tag</code> but is generating the html code wrong (on id and values).</p>\n\n<p>Tables:</p>\n\n<pre><code>|departaments|\n  |id|  |name|\n   1     dep1\n   2     dep2\n|provinces|\n  |id|  |name| |departament_id|\n    1    pr1      1\n    2    pr2      1\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>def new\n  @client= Client.new\nend\n\ndef province_update\n  @provinces = Province.where(departament_id: params[:departament_id])\nend\n</code></pre>\n\n<p>View <strong>new.html.erb</strong></p>\n\n<pre><code>&lt;script&gt;\n  $(document).ready(function() { \n    $(\".search_select\").select2();\n  });\n&lt;/script&gt;\n&lt;script&gt;\n $(function() {\n   $('#departament_id').on('change', function() {\n    $.get(\"province_update\", {\n      departament_id: $('#departament_id').val()\n    }, function(e) {\n       if (e)\n       $(\"#province_id\").select2().html(e);\n   })\n });\n});\n\n&lt;/script&gt;\n\nDepartament: &lt;%= select_tag :departament_id,options_from_collection_for_select(@departaments, 'id', 'name') %&gt;\nProvince: &lt;%= select_tag :province_id) %&gt;\n</code></pre>\n\n<p>Javascript <strong>province_update.rjs</strong></p>\n\n<pre><code>$(\"#province_id\").html('&lt;%= j render partial: \"provinces_result\" %&gt;')\n</code></pre>\n\n<p>Partial <strong>_provinces_result.erb</strong></p>\n\n<pre><code>&lt;%= select_tag :province_id,options_from_collection_for_select(@provinces, 'id', 'name')\n</code></pre>\n\n<p>Logs:</p>\n\n<pre><code>Started GET \"/clients/province_update?departament_id=6\" for 127.0.0.1 at 2016-06-22 17:03:55 -0500\n  Processing by ClientsController#province_update as */*\n  Parameters: {\"departament_id\"=&gt;\"6\"}\n   Province Load (0.1ms)  SELECT `provinces`.* FROM `provinces` WHERE `provinces`.`departament_id` = 6  ORDER BY name ASC\n   Rendered _provinces_result.erb (2.3ms)\n   Rendered client_management/clients/province_update.js.erb (9.1ms)\n   Completed 200 OK in 14ms (Views: 12.5ms | ActiveRecord: 0.3ms)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>&lt;select name=\"province_id\" id=\"province_id\" class=\"select2-offscreen\" title=\"\" tabindex=\"-1\"&gt;$(\"#province\").html(' \\n\\nProvince&amp;lt;\\/label&amp;gt; \n   &lt;option value=\"\\&amp;quot;105\\&amp;quot;\"&gt;pr1&amp;lt;\\/option&amp;gt;\\n&lt;/option&gt;\n   &lt;option value=\"\\&amp;quot;108\\&amp;quot;\"&gt;pr2&amp;lt;\\/option&amp;gt;&amp;lt;\\/select&amp;gt;\\n')\n   $(\"#district\").html('\\nDistrito&amp;lt;\\/label&amp;gt; &lt;/option&gt;\n   &lt;option value=\"\\&amp;quot;\\&amp;quot;\"&gt;Select&amp;lt;\\/option&amp;gt;&amp;lt;\\/select&amp;gt;\\n')&lt;/option&gt;\n&lt;/select&gt;\n</code></pre>\n\n<p>I tried this code, but I'm still having the html issue:</p>\n\n<pre><code> $(\"#province_bill\").append('&lt;%= j render partial: \"provinces_bill_result\" %&gt;')\n</code></pre>\n\n<p>If I change this code, the dropdown won't update:</p>\n\n<pre><code> $(\"#province_id\").select2();\n</code></pre>\n\n<p>I tried this code on the controller, but it is not updating the dropdown:</p>\n\n<pre><code>def province_update\n  @provinces = Province.where(departament_id: params[:departament_id])\n  respond_to do |format|\n    format.json { render json: @provinces }\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "timezone-offset"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1466639162, "post_id": 37979099, "comment_id": 63405682, "body": "Welcome to Stack Overflow. We&#39;d like to see what you&#39;ve tried. As is it looks like you&#39;re asking us to do the research and/or write a tutorial, but that&#39;s not what SO is for. What code have you written to solve this? Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot;, including the linked pages."}], "answers": [{"tags": [], "owner": {"reputation": 2172, "user_id": 4412925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf7fa1503a3820659b27943c99d463a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nabeel", "link": "https://stackoverflow.com/users/4412925/nabeel"}, "is_accepted": true, "score": 3, "last_activity_date": 1466635964, "last_edit_date": 1466635964, "creation_date": 1466635646, "answer_id": 37979452, "question_id": 37979099, "link": "https://stackoverflow.com/questions/37979099/how-can-i-programmatically-change-an-rfc3339-timezone-offset-in-ruby/37979452#37979452", "title": "How can I programmatically change an RFC3339 timezone offset in Ruby?", "body": "<p>Have a look at <a href=\"http://apidock.com/rails/DateTime/change\" rel=\"nofollow\"><code>DateTime#change</code></a>, you can pass in an offset.</p>\n\n<pre><code>require 'active_support/core_ext/date_time'\n\nDateTime.now.change(offset: '-0400')\n#=&gt; Wed, 22 Jun 2016 23:47:34 -0400\n</code></pre>\n"}], "owner": {"reputation": 9806, "user_id": 382982, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/9ZaxF.jpg?s=128&g=1", "display_name": "pdoherty926", "link": "https://stackoverflow.com/users/382982/pdoherty926"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 1, "accepted_answer_id": 37979452, "answer_count": 1, "score": 2, "last_activity_date": 1466651766, "creation_date": 1466633443, "last_edit_date": 1466651766, "question_id": 37979099, "link": "https://stackoverflow.com/questions/37979099/how-can-i-programmatically-change-an-rfc3339-timezone-offset-in-ruby", "title": "How can I programmatically change an RFC3339 timezone offset in Ruby?", "body": "<p>I'm wondering how I can programmatically change an RFC3339 DateTime's timezone offset in Ruby 2.3 (ActiveSupport is available, if that'd help).</p>\n\n<p>I'd like to convert: <code>2016-06-22T00:00:00+00:00</code> into <code>2016-06-22T00:00:00-04:00</code> without resorting to string substitution.</p>\n\n<p>EDIT: Per the Tin Man's request, I'll elaborate on what I've tried. As alluded to above, I tried using <code>String#sub</code> to find-and-replace the offending section of the original string. That worked, but I considered it to be a kludge and wanted to find a solution that made use of the Time/Date API.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "socket.io", "actioncable"], "comments": [{"owner": {"reputation": 6273, "user_id": 2392106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/iXOIu.jpg?s=128&g=1", "display_name": "medBouzid", "link": "https://stackoverflow.com/users/2392106/medbouzid"}, "edited": false, "score": 0, "creation_date": 1519153986, "post_id": 37978215, "comment_id": 84790703, "body": "have you found an answer ? share your experience please"}], "answers": [{"comments": [{"owner": {"reputation": 2871, "user_id": 443501, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/49a21b86a7574b48ac486b5880146b49?s=128&d=identicon&r=PG", "display_name": "Boti", "link": "https://stackoverflow.com/users/443501/boti"}, "edited": false, "score": 0, "creation_date": 1466673157, "post_id": 37979518, "comment_id": 63418633, "body": "can you please provide some data to prove the hypothesis?"}, {"owner": {"reputation": 2501, "user_id": 6458966, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iUhao.jpg?s=128&g=1", "display_name": "Harrison Lucas", "link": "https://stackoverflow.com/users/6458966/harrison-lucas"}, "reply_to_user": {"reputation": 2871, "user_id": 443501, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/49a21b86a7574b48ac486b5880146b49?s=128&d=identicon&r=PG", "display_name": "Boti", "link": "https://stackoverflow.com/users/443501/boti"}, "edited": false, "score": 1, "creation_date": 1466679150, "post_id": 37979518, "comment_id": 63422807, "body": "@boti what hypothesis is that?"}], "tags": [], "owner": {"reputation": 2501, "user_id": 6458966, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iUhao.jpg?s=128&g=1", "display_name": "Harrison Lucas", "link": "https://stackoverflow.com/users/6458966/harrison-lucas"}, "is_accepted": true, "score": 6, "last_activity_date": 1466636006, "creation_date": 1466636006, "answer_id": 37979518, "question_id": 37978215, "link": "https://stackoverflow.com/questions/37978215/actioncable-vs-socket-io-is-the-most-reliable-and-most-scalable/37979518#37979518", "title": "ActionCable vs Socket.Io is the most reliable and most scalable?", "body": "<p>If you are using Rails, ActionCable will be fine. It is currently used on <a href=\"http://basecamp.com\" rel=\"noreferrer\">Basecamp</a> and powers their chat and notification features. </p>\n\n<p>This is a large scale application with heaps of daily active users so really you shouldn't be worried about scale. However, if you are talking about millions and millions of active connections, then probably neither is your best option - with the better alternative being Elixir/Erlang (<a href=\"http://www.phoenixframework.org/blog/the-road-to-2-million-websocket-connections\" rel=\"noreferrer\">2Million Websocket connections in Phoenix</a>) or even NodeJS.</p>\n\n<p>However in your case if you are using a Rails application, then Actioncable is going to be much easier to implement as it is a feature of Rails and not an external party.</p>\n"}], "owner": {"reputation": 2871, "user_id": 443501, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/49a21b86a7574b48ac486b5880146b49?s=128&d=identicon&r=PG", "display_name": "Boti", "link": "https://stackoverflow.com/users/443501/boti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2607, "favorite_count": 2, "closed_date": 1466672250, "accepted_answer_id": 37979518, "answer_count": 1, "score": 0, "last_activity_date": 1466672908, "creation_date": 1466629424, "last_edit_date": 1466672908, "question_id": 37978215, "link": "https://stackoverflow.com/questions/37978215/actioncable-vs-socket-io-is-the-most-reliable-and-most-scalable", "closed_reason": "Opinion-based", "title": "ActionCable vs Socket.Io is the most reliable and most scalable?", "body": "<p>Which one is the most reliable and the most scalable?\nActionCable or Socket.io?</p>\n\n<p>In order to avoid the opinion based answers please provide some real measured data which prove the hypothesis.</p>\n\n<p>Are there any apps out there in production which were implemented using ActionCable, since ActionCable is out for a year?</p>\n\n<p>Thx</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 858, "user_id": 1875195, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3ed18248b30a2d90cf49ea9393097425?s=128&d=identicon&r=PG", "display_name": "user1875195", "link": "https://stackoverflow.com/users/1875195/user1875195"}, "edited": false, "score": 2, "creation_date": 1466629144, "post_id": 37978082, "comment_id": 63402283, "body": "Because ruby is pass-by-value. So the method <code>a_method</code> is not mutating the original reference to the string <code>&quot;goodnight&quot;</code>"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1466632843, "post_id": 37978082, "comment_id": 63403865, "body": "In your case it comes down to your use of <code>&lt;&lt;</code>, which modifies the object instead of just returning a changed version. If your method instead had <code>string + &quot;world&quot;</code> this wouldn&#39;t happen."}, {"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "reply_to_user": {"reputation": 858, "user_id": 1875195, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3ed18248b30a2d90cf49ea9393097425?s=128&d=identicon&r=PG", "display_name": "user1875195", "link": "https://stackoverflow.com/users/1875195/user1875195"}, "edited": false, "score": 0, "creation_date": 1466636838, "post_id": 37978082, "comment_id": 63405068, "body": "@user1875195 if <code>a_method</code> was not mutating the original reference to the string <code>&quot;goodnight&quot;</code> then it would not print <code>&quot;goodnight world&quot;</code>. Concatenating <code>&quot; world&quot;</code> to <code>bedtime</code> is mutating it."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "edited": false, "score": 0, "creation_date": 1466838005, "post_id": 37978082, "comment_id": 63492328, "body": "@Mike: No, it is not mutating the reference, because that is simply impossible. Ruby is pass-by-value, you <i>cannot</i> mutate the reference. It is dereferencing the reference and then mutating the object the reference points to. The difference between variables and the objects referenced by them is fundamental, not just in Ruby, but in any language."}, {"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1466840366, "post_id": 37978082, "comment_id": 63492914, "body": "@J&#246;rgWMittag Yes I was not thinking carefully enough about my wording when I said &quot;original reference,&quot; I meant the object the original variable was referencing, as you said. But just to split hairs, doesn&#39;t this mean Ruby is <b>not</b> pass-by-value? How can <code>a_method</code> know the memory location that <code>bedtime</code> is referencing if that information is not passed along when <code>a_method</code> is called? You said yourself that it is derefencing the reference and mutating the object the reference points to. How does that reference exist inside the scope of <code>a_method</code> if Ruby is pass-by-value?"}, {"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1466879714, "post_id": 37978082, "comment_id": 63503665, "body": "@J&#246;rgWMittag Oh I see. Pass-by-value must not imply that a reference is not passed (pass-by-value and pass-by-reference are horrendously misleading names). The reference is definitely passed in Ruby, you just can&#39;t change which object the reference points to inside the scope of the method. As opposed to copying the object to a new location and passing a reference to that new object, which would be a much more accurate outcome for pass-by-value. But to be perfectly clear and technical, I don&#39;t see how you could argue that Ruby is not pass-by-reference when a reference is clearly being passed."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "edited": false, "score": 1, "creation_date": 1466901979, "post_id": 37978082, "comment_id": 63508548, "body": "@Mike: It&#39;s not called &quot;pass-a-reference&quot;, it is called &quot;pass-by-reference&quot;. In other words, it is not about <i>what</i> is being passed, it is about <i>how</i> it is being passed. And the reference is being passe by value. Note also, that you are confusing two different instances of the term &quot;reference&quot;, which mean two different things in two different contexts. the word &quot;reference&quot; in &quot;pass-by-reference&quot; does <i>not</i> mean the same thing as the word &quot;reference&quot; in &quot;the reference is being passed&quot;. You could maybe replace the term with &quot;pass-by-variable&quot; and &quot;the pointer is being passed&quot;."}, {"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1467049007, "post_id": 37978082, "comment_id": 63558821, "body": "@J&#246;rgWMittag Okay after reading several explanations I finally get it. And I do see why &quot;passing a reference for the object&quot; is not the same as passing the original reference that points to the object. Also, I discovered there is an enormous amount of confusion generated on the Internet because the names &quot;pass-by-reference&quot; and &quot;pass-by-value&quot; are so misleading. At some point one must wonder whether the mass confusion is worth perpetuating those names just for history&#39;s sake."}], "answers": [{"comments": [{"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "edited": false, "score": 0, "creation_date": 1466637411, "post_id": 37978316, "comment_id": 63405237, "body": "This sort of blows my mind. How does one know whether a given method is an &quot;in-place&quot; operation? Besides writing out a code example like the one in the question."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "edited": false, "score": 0, "creation_date": 1466638239, "post_id": 37978316, "comment_id": 63405443, "body": "@Mike It&#39;s often necessary to read the documentation and look carefully at the description. <a href=\"http://ruby-doc.org/core-2.3.0/Array.html#method-i-push\" rel=\"nofollow noreferrer\"><code>Array#push</code></a> modifies in-place, many of the Array methods do without any hint like <code>!</code> presumably due to tradition, it behaves the same as JavaScript, Python and others. Other classes are more explicit about their intent, like String with <code>gsub</code> vs. <code>gsub!</code>. Until you know for sure, read the documentation to check."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1466716725, "post_id": 37978316, "comment_id": 63448129, "body": "<code>String#replace</code> is <i>not</i> re-assignment, it is mutation, in exactly the same way <code>String#&lt;&lt;</code> or <code>String#gsub!</code> is. Variables aren&#39;t objects, you can only call methods on objects, therefore you cannot call methods on variables, therefore a method call cannot re-assign a variable. Only <code>=</code> can re-assign a variable. (Modulo reflection using <code>Binding#local_variable_set</code>, which as you may notice is not a method on variables (because variables aren&#39;t objects) but on bindings and does not take a variable as argument (because variables aren&#39;t objects) but a symbol denoting the name of a variable.)"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1466827426, "post_id": 37978316, "comment_id": 63490567, "body": "@J&#246;rgWMittag I mean &quot;re-assign&quot; in the context of the content itself. There&#39;s many layers to this particular situation."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 3, "last_activity_date": 1466827450, "last_edit_date": 1466827450, "creation_date": 1466629957, "answer_id": 37978316, "question_id": 37978082, "link": "https://stackoverflow.com/questions/37978082/mutating-calling-objects-in-ruby/37978316#37978316", "title": "Mutating Calling Objects in Ruby", "body": "<p>In Ruby there's a difference between <em>in-place</em> operations and those that return a copy. Sometimes the name provides a hint, like <code>gsub</code> vs <code>gsub!</code>, but other times you just need to know, like <code>&lt;&lt;</code>.</p>\n\n<p>What you're doing here is redefining which object <code>string</code> references so no permanent modification is made to the original reference.</p>\n\n<p>The line <code>string = \"hello\"</code> does not mean that the original <code>bedtime</code> object reference changes.</p>\n\n<p>If you wanted that effect you'd do <code>string.replace(\"hello\")</code> which is an in-place reassignment of the string's content.</p>\n\n<p>To find out what object you're referencing call <code>object_id</code> on the object in question. You'll notice here that with your code that value changes, but with <code>replace</code> it does not.</p>\n\n<p>Ruby method arguments are passed by <em>object reference</em> which in practice is a lot like a pointer. If you're expecting that value to be passed by absolute reference that's not the case.</p>\n"}], "owner": {"reputation": 401, "user_id": 3794052, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oImv9.jpg?s=128&g=1", "display_name": "Louis Magnotti", "link": "https://stackoverflow.com/users/3794052/louis-magnotti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 315, "favorite_count": 1, "accepted_answer_id": 37978316, "answer_count": 1, "score": 2, "last_activity_date": 1466827450, "creation_date": 1466628923, "question_id": 37978082, "link": "https://stackoverflow.com/questions/37978082/mutating-calling-objects-in-ruby", "title": "Mutating Calling Objects in Ruby", "body": "<p>Can someone explain why this prints \"goodnight\"? If you removed</p>\n\n<pre><code>string = \"hello\"\n</code></pre>\n\n<p>It would print \"goodnight world\" .</p>\n\n<pre><code>def a_method(string)\n  string = \"hello\"\n  string &lt;&lt; \" world\"\nend\n\nbedtime = \"goodnight\"\na_method(bedtime)\n\nputs bedtime\n</code></pre>\n\n<p>I understand that &lt;&lt; mutates, but not why adding the = hello makes such a big difference? </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1466630085, "post_id": 37977952, "comment_id": 63402702, "body": "Ruby strongly encourages people to name methods like <code>longest_word</code>. The leading capital style is reserved for <code>ClassName</code> and <code>CONSTANT_NAME</code> uses."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1466632697, "post_id": 37977952, "comment_id": 63403818, "body": "Use two spaces to indent, not tabs or four spaces."}], "answers": [{"comments": [{"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 1, "creation_date": 1466632076, "post_id": 37978218, "comment_id": 63403581, "body": "If you want to pass the indexes to a block you may user <code>sen1.each_index</code> (<a href=\"http://docs.ruby-lang.org/en/2.0.0/Array.html#method-i-each_index\" rel=\"nofollow noreferrer\">docs.ruby-lang.org/en/2.0.0/Array.html#method-i-each_index</a>)&zwnj;&#8203;."}], "tags": [], "owner": {"reputation": 404, "user_id": 1888553, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WznXZ.jpg?s=128&g=1", "display_name": "Derrell Durrett", "link": "https://stackoverflow.com/users/1888553/derrell-durrett"}, "is_accepted": false, "score": 2, "last_activity_date": 1466637245, "last_edit_date": 1466637245, "creation_date": 1466629439, "answer_id": 37978218, "question_id": 37977952, "link": "https://stackoverflow.com/questions/37977952/accidental-type-conversion-in-ruby-with-strings/37978218#37978218", "title": "Accidental Type conversion in Ruby with strings", "body": "<p>The type conversion is caused by the array entry <code>i</code> being converted (probably unsuccessfully) into an integer (though I suppose it could be ruby trying to convert the array into a hash, and use <code>i</code> as a key to the hash).</p>\n\n<p>Your misunderstanding is that you think you're getting the array's indices passed into the block for <code>each</code>. What is passed in to that block is each individual value in the array. I.e., if your string <code>sen</code> is 'this is a silly string', then the values passed are 'this', 'is', 'a', 'silly', and 'string'.</p>\n"}, {"tags": [], "owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "is_accepted": false, "score": 1, "last_activity_date": 1466633469, "last_edit_date": 1466633469, "creation_date": 1466633079, "answer_id": 37979038, "question_id": 37977952, "link": "https://stackoverflow.com/questions/37977952/accidental-type-conversion-in-ruby-with-strings/37979038#37979038", "title": "Accidental Type conversion in Ruby with strings", "body": "<p>You don't see the type conversion, but it is there. In more than one place.</p>\n\n<p>As <strong>Derrell Durrett</strong> pointed out in his answer, your are assuming (wrongly) that the index of the array is passed to the block, not its elements.</p>\n\n<p>Then you write <code>if sen1[i].length &gt; sen1[grt].length</code>. Let's consider the string is <strong>'this is a silly string'</strong>. The first element is <strong>'this'</strong> and what you are trying to do is <code>if sen1['this'].length &gt; sen1[0].length</code>. As Ruby arrays always have integer indexes, Ruby tries to convert 'this' to an integer in order to find the element at the specified position. Of course this fails!</p>\n\n<p>But your code is not that far from being right. A few small changes and it will run perfectly well:</p>\n\n<pre><code>def longest_word(sen)\n  sen1 = sen.split(\" \")\n  grt = 0\n  sen1.each_index do |i|\n    if sen1[i].length &gt; sen1[grt].length \n      grt = i\n    end\n  end\n  sen1[grt] \nend\n\nputs LongestWord(STDIN.gets)  \n</code></pre>\n\n<p>Now you'd be passing the indexes with <code>sen1.each_index</code> and it'd be working fine.</p>\n\n<p>Notice that I changed the name of your method to <strong>longest_word</strong>. This is much better, in fact, because this first capital letter is reserved to constants and class names.</p>\n\n<p>I also would like to point that you are not using a good Ruby style. This could be written like this:</p>\n\n<pre><code>def longest_word(str)\n  str.split(\" \").max_by{ |s| s.length }\nend\n</code></pre>\n\n<p>and the result would be the same.</p>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1466633364, "creation_date": 1466633364, "answer_id": 37979088, "question_id": 37977952, "link": "https://stackoverflow.com/questions/37977952/accidental-type-conversion-in-ruby-with-strings/37979088#37979088", "title": "Accidental Type conversion in Ruby with strings", "body": "<p>You get the error because, when the code is running, <code>i</code> is the first value of <code>sen1</code>, which results in <code>sen1['some string']</code> being evaluated. </p>\n\n<p>An array can't have a string index, only a hash can, resulting in the Type error.</p>\n\n<p>Meditate on this:</p>\n\n<pre><code>def longest_word(sen)\n\n  sen1 = sen.split # =&gt; [\"foo\", \"barbaz\"]\n  grt = 0\n  sen1.each do |i|\n\n    i # =&gt; \"foo\"\n    sen1 # =&gt; [\"foo\", \"barbaz\"]\n    sen1[i] # =&gt; \n    sen1[grt] # =&gt; \n\n    sen1[i].length # =&gt; \n    sen1[grt].length # =&gt; \n\n    if sen1[i].length &gt; sen1[grt].length #Type conversion error\n      grt = i # =&gt; \n    end\n  end\n\n\n  sen1[grt] \n\nend\n\n# keep this function call here    \nlongest_word('foo barbaz')\n</code></pre>\n\n<p>Breaking it down further, here's the offending problem:</p>\n\n<pre><code>sen1 = 'foo barbaz'.split\nsen1['foo'] # =&gt; \n\n# ~&gt; TypeError\n# ~&gt; no implicit conversion of String into Integer\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6334589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5434066a1204be1e3ce15db4dab4647?s=128&d=identicon&r=PG&f=1", "display_name": "Keith L.", "link": "https://stackoverflow.com/users/6334589/keith-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1466637245, "creation_date": 1466628347, "last_edit_date": 1466633695, "question_id": 37977952, "link": "https://stackoverflow.com/questions/37977952/accidental-type-conversion-in-ruby-with-strings", "title": "Accidental Type conversion in Ruby with strings", "body": "<p>I'm trying to solve a challenge where you take in a string of words but return the longest word in the string. My strategy is to break the string into an array of individual words and search the array. However, I'm getting a type conversion error. What is causing the type conversion error? This is particularly strange to me because I don't actually see any type conversion happening here. </p>\n\n<pre><code>def LongestWord(sen)\n\n  sen1 = sen.split(\"/\\W+/\")\n  grt = 0\n  sen1.each do |i|\n      if sen1[i].length &gt; sen1[grt].length # Type conversion error\n          grt = i\n      end\n  end\n\n  sen1[grt] \nend\n\n# keep this function call here    \nputs LongestWord(STDIN.gets)  \n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 957, "user_id": 2831651, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/WPzHx.jpg?s=128&g=1", "display_name": "Joe Eifert", "link": "https://stackoverflow.com/users/2831651/joe-eifert"}, "edited": false, "score": 17, "creation_date": 1478778112, "post_id": 37978494, "comment_id": 68293691, "body": "Here comes my non-constructive comment of the day: Thanks for not using <code>foo</code> as the default variable. <code>glubsch</code> is more fun."}, {"owner": {"reputation": 170, "user_id": 3697545, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/eac7d4c2d4fe4689b83c5e463609a8ca?s=128&d=identicon&r=PG", "display_name": "firetonton", "link": "https://stackoverflow.com/users/3697545/firetonton"}, "edited": false, "score": 2, "creation_date": 1546775767, "post_id": 37978494, "comment_id": 94955797, "body": "Response is old but just a comment to mean, in the last point, the <code>try</code> version and the <code>&amp;.</code> version doesn&#39;t behaves the same. Example when foo is <code>nil</code>: try version will result in <code>nil.to_s</code> whereas <code>&amp;.</code> version will try to call <code>blam</code> on <code>nil</code> and raise a NoMethodError"}, {"owner": {"reputation": 170, "user_id": 3697545, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/eac7d4c2d4fe4689b83c5e463609a8ca?s=128&d=identicon&r=PG", "display_name": "firetonton", "link": "https://stackoverflow.com/users/3697545/firetonton"}, "edited": false, "score": 0, "creation_date": 1546776688, "post_id": 37978494, "comment_id": 94956012, "body": "Actually, the truely equal version with full ruby should be more like <code>foo&amp;.yield_self { |foo| foo.glubsch.blam }&amp;.bar.to_s</code> or more readable if it&#39;s ok to consider to react the same for false foo as for nil foor: <code>foo &amp;&amp; foo.glubsch.blam&amp;.bar.to_s</code>"}, {"owner": {"reputation": 2481, "user_id": 1212000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZPwGy.png?s=128&g=1", "display_name": "Raffael", "link": "https://stackoverflow.com/users/1212000/raffael"}, "reply_to_user": {"reputation": 170, "user_id": 3697545, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/eac7d4c2d4fe4689b83c5e463609a8ca?s=128&d=identicon&r=PG", "display_name": "firetonton", "link": "https://stackoverflow.com/users/3697545/firetonton"}, "edited": false, "score": 0, "creation_date": 1547069789, "post_id": 37978494, "comment_id": 95069971, "body": "The example is indeed wrong. Thank&#39;s for pointing that out, @firetonton. I&#39;ll leave it there as a reminder that complicated chains of method calls are a maintenance nightmare."}], "tags": [], "owner": {"reputation": 2481, "user_id": 1212000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZPwGy.png?s=128&g=1", "display_name": "Raffael", "link": "https://stackoverflow.com/users/1212000/raffael"}, "is_accepted": true, "score": 77, "last_activity_date": 1466667835, "last_edit_date": 1466667835, "creation_date": 1466630594, "answer_id": 37978494, "question_id": 37977721, "link": "https://stackoverflow.com/questions/37977721/why-is-safe-navigation-better-than-using-try-in-rails/37978494#37978494", "title": "Why is safe navigation better than using try in Rails?", "body": "<h2>(1) <code>&amp;.</code> is generally shorter than <code>try(...)</code></h2>\n\n<p>Depending on the scenario, this can make your code more readable.</p>\n\n<h2>(2) <code>&amp;.</code> is standard Ruby, as opposed to <code>try</code></h2>\n\n<p>The method <code>try</code> is not defined in a Ruby core library but rather in a Rails library. When you are not developing a RoR web app but instead are writing e.g. little helper scripts, this will get relevant pretty fast. \n(I prefer Ruby over Bash, for example.)</p>\n\n<h2>(3) <code>&amp;.</code> makes debugging easier</h2>\n\n<p>The safe traversal operator will throw an error if a nonexistent method is being invoked.</p>\n\n<pre><code>&gt;&gt; \"s\"&amp;.glubsch\nNoMethodError: undefined method `glubsch' for \"s\":String\n</code></pre>\n\n<p>Only on <code>nil</code> it will behave leniently:</p>\n\n<pre><code>&gt;&gt; nil&amp;.glubsch\n=&gt; nil\n</code></pre>\n\n<p>The <code>try</code> method will always return <code>nil</code>.</p>\n\n<pre><code>&gt;&gt; \"s\".try(:glubsch)\n=&gt; nil\n</code></pre>\n\n<p>Note that this is the case with most recent versions of Ruby and Rails.</p>\n\n<p>Now imagine a scenario where a method named <code>glubsch</code> exists. Then you decide to rename that method but forget to rename it in one place. (Sadly, that can happen with ruby...) With the safe traversal operator, you will notice the mistake almost immediately (as soon as that line of code is executed for the first time). The <code>try</code> method however will happily provide you with a <code>nil</code> and you will get a <code>nil</code> related error somewhere downstream in program execution. Figuring out where such a <code>nil</code> came from can be hard at times. </p>\n\n<p>Failing fast and hard with <code>&amp;.</code> makes debugging easier than blithely returning <code>nil</code> with <code>try</code>.</p>\n\n<p><strong><em>EDIT:</strong> There is also the variant <code>try!</code> (with a bang) that behaves the same as <code>&amp;.</code> in this regard. Use that if you don't like <code>&amp;.</code>.</em></p>\n\n<h2>(4) What if I don't care if a method is implemented or not?</h2>\n\n<p>That would be strange. Since that would be an unexpected way of programming, please make it explicit. For example by fleshing out the two cases (implemented or not) using <code>respond_to?</code> and branch off of that. </p>\n\n<h2>(5) What about <code>try</code>'s block form?</h2>\n\n<p>Instead of a method name, a block can be passed to <code>try</code>. The block will be executed in the context of the receiver; and within the block there is no leniency applied. So with just a single method call, it will acutally behave the same as <code>&amp;.</code>.</p>\n\n<pre><code>&gt;&gt; \"s\".try{ glubsch }\nNameError: undefined local variable or method `glubsch' for \"s\":String\n</code></pre>\n\n<p>For more complex computations, you might prefer this block form over introducing lots of local variables. E.g. a chain of </p>\n\n<pre><code>foo.try{ glubsch.blam }.try{ bar }.to_s\n</code></pre>\n\n<p>would allow <code>foo</code> to be <code>nil</code> but require <code>foo.glubsch</code> to return a non-<code>nil</code> value. Then again, you can do the same with the safe traversal operator in a more concise fashion:</p>\n\n<pre><code>foo&amp;.glubsch.blam&amp;.bar.to_s\n</code></pre>\n\n<p>Using <code>try</code>'s block form for complex computations IMHO is a code smell, though, because it impedes readability. When you need to implement complex logic, introduce local variables with descriptive names and maybe use an <code>if</code> to branch off a <code>nil</code> case. Your code will be more maintainable.</p>\n\n<p>HTH!</p>\n"}, {"comments": [{"owner": {"reputation": 170, "user_id": 3697545, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/eac7d4c2d4fe4689b83c5e463609a8ca?s=128&d=identicon&r=PG", "display_name": "firetonton", "link": "https://stackoverflow.com/users/3697545/firetonton"}, "edited": false, "score": 3, "creation_date": 1546778673, "post_id": 48939332, "comment_id": 94956543, "body": "It seems to be 3 times faster on my machine, but you forgot to bench the case when <code>foo</code> is actually not nil. So I wrote the following benchmark: <a href=\"https://gist.github.com/alchimere/1cd424ee8b093867a88d82026734c78c\" rel=\"nofollow noreferrer\">gist.github.com/alchimere/1cd424ee8b093867a88d82026734c78c</a> and for non-nil objects, <code>&amp;.</code> seems to be <b>8 times faster</b> than <code>try</code>"}], "tags": [], "owner": {"reputation": 9165, "user_id": 655769, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ylFlJ.jpg?s=128&g=1", "display_name": "rorra", "link": "https://stackoverflow.com/users/655769/rorra"}, "is_accepted": false, "score": 26, "last_activity_date": 1519345403, "creation_date": 1519345403, "answer_id": 48939332, "question_id": 37977721, "link": "https://stackoverflow.com/questions/37977721/why-is-safe-navigation-better-than-using-try-in-rails/48939332#48939332", "title": "Why is safe navigation better than using try in Rails?", "body": "<h2>(6) Speed</h2>\n\n<p>Safe navigation is almost 4 times faster than using the try method from <a href=\"https://github.com/rails/rails/tree/master/activesupport\" rel=\"noreferrer\">activesupport</a></p>\n\n<pre><code>require 'active_support/all'\nrequire 'benchmark'\n\nfoo = nil\n\nputs Benchmark.measure { 10_000_000.times { foo.try(:lala) } }\nputs Benchmark.measure { 10_000_000.times { foo&amp;.lala } }\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>  1.310000   0.000000   1.310000 (  1.311835)\n  0.360000   0.000000   0.360000 (  0.353127)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 86, "user_id": 10505877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daacd2b5fb0d5bf6ef7eab20ee91c2f3?s=128&d=identicon&r=PG&f=1", "display_name": "harmag", "link": "https://stackoverflow.com/users/10505877/harmag"}, "is_accepted": false, "score": 6, "last_activity_date": 1565341212, "last_edit_date": 1565341212, "creation_date": 1565331559, "answer_id": 57424395, "question_id": 37977721, "link": "https://stackoverflow.com/questions/37977721/why-is-safe-navigation-better-than-using-try-in-rails/57424395#57424395", "title": "Why is safe navigation better than using try in Rails?", "body": "<p>I don't think we should be comparing those two things, because they do something else.</p>\n\n<p>Given this example <code>Person</code> class</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Person\n  def name\n    \"John\"\n  end\nend\n</code></pre>\n\n<h3>try</h3>\n\n<p><code>try</code> should be used if you're not sure whether the given method <strong>exists</strong> on the object or not.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>person = Person.new\nperson.name        # =&gt; \"John\"\nperson.email       # =&gt; NoMethodError: undefined method `email' for #&lt;Person&gt;\nperson.try(:email) # =&gt; nil\n</code></pre>\n\n<h3>&amp;.</h3>\n\n<p>Safe nagivation should be used if you're not sure if the object you're calling your method <strong>on</strong> is nil or not</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>person = nil\nperson.name  # =&gt; NoMethodError: undefined method `name' for nil:NilClass\nperson&amp;.name # =&gt; nil\n</code></pre>\n\n<h3>You can't use them interchangeably</h3>\n\n<p>People often confuse those two methods, because you can use <code>try</code> instead of <code>&amp;.</code></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>person = nil\nperson.name       # =&gt; NoMethodError: undefined method `name' for nil:NilClass\nperson&amp;.name      # =&gt; nil\nperson.try(:name) # =&gt; nil\n</code></pre>\n\n<p>But you cannot use <code>&amp;.</code> instead of <code>try</code></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>person = Person.new\nperson.name        # =&gt; \"John\"\nperson.email       # =&gt; NoMethodError: undefined method `email' for #&lt;Person&gt;\nperson.try(:email) # =&gt; nil\nperson&amp;.email      # NoMethodError: undefined method `email' for #&lt;Person&gt;\n</code></pre>\n"}], "owner": {"reputation": 8818, "user_id": 2714301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/23c7ba1f14e71e14f65b7b95516b0f19?s=128&d=identicon&r=PG", "display_name": "Jwan622", "link": "https://stackoverflow.com/users/2714301/jwan622"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10947, "favorite_count": 12, "accepted_answer_id": 37978494, "answer_count": 3, "score": 35, "last_activity_date": 1565341212, "creation_date": 1466627416, "last_edit_date": 1466667554, "question_id": 37977721, "link": "https://stackoverflow.com/questions/37977721/why-is-safe-navigation-better-than-using-try-in-rails", "title": "Why is safe navigation better than using try in Rails?", "body": "<p>I'm reading <a href=\"http://mitrev.net/ruby/2015/11/13/the-operator-in-ruby/\" rel=\"noreferrer\">this</a>. What's the benefit of using this:</p>\n\n<pre><code>user&amp;.address&amp;.state\n</code></pre>\n\n<p>over</p>\n\n<pre><code>user.try(:address).try(:state)\n</code></pre>\n\n<p>I still don't get it.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nomethoderror"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4776684"}, "edited": false, "score": 0, "creation_date": 1466626016, "post_id": 37977265, "comment_id": 63400743, "body": "You told him the right thing, but you should adjust his code to make it clear."}, {"owner": {"reputation": 53, "user_id": 5753254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7d76204088b7ec84356c00a5a2e7aa3?s=128&d=identicon&r=PG&f=1", "display_name": "Edoardo Lopez", "link": "https://stackoverflow.com/users/5753254/edoardo-lopez"}, "edited": false, "score": 0, "creation_date": 1466626286, "post_id": 37977265, "comment_id": 63400886, "body": "thanks Josh, would you mind give me an example because I&#39;m a little bit confuse how should I call it"}, {"owner": {"reputation": 5307, "user_id": 1193216, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/25fae6f93f4a2bf88f6a4e265d944685?s=128&d=identicon&r=PG", "display_name": "Josh", "link": "https://stackoverflow.com/users/1193216/josh"}, "reply_to_user": {"reputation": 53, "user_id": 5753254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7d76204088b7ec84356c00a5a2e7aa3?s=128&d=identicon&r=PG&f=1", "display_name": "Edoardo Lopez", "link": "https://stackoverflow.com/users/5753254/edoardo-lopez"}, "edited": false, "score": 0, "creation_date": 1466648365, "post_id": 37977265, "comment_id": 63407829, "body": "@EdoardoLopez added examples"}], "tags": [], "owner": {"reputation": 5307, "user_id": 1193216, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/25fae6f93f4a2bf88f6a4e265d944685?s=128&d=identicon&r=PG", "display_name": "Josh", "link": "https://stackoverflow.com/users/1193216/josh"}, "is_accepted": false, "score": 1, "last_activity_date": 1466626101, "last_edit_date": 1466626101, "creation_date": 1466625858, "answer_id": 37977265, "question_id": 37977175, "link": "https://stackoverflow.com/questions/37977175/nomethoderror-undefined-method-onvos-encoded-url-ruby-on-rails/37977265#37977265", "title": "NoMethodError: undefined method `onvos_encoded_url&#39; -- ruby on rails", "body": "<p>You defined an instance method but you called it as a class method.</p>\n\n<p>You have 2 options:</p>\n\n<p><strong>Use a class method</strong></p>\n\n<p>In your class:</p>\n\n<pre><code>class Vimeo::Video &lt; ActiveRecord::Base\n  def self.onvos_encoded_url\n    hash = json_onvos()\n    enc = Base64.encode64(hash.to_json)\n    return URI::encode(enc)\n  end\nend\n</code></pre>\n\n<p>In your rake task:</p>\n\n<pre><code>desc \"Tareas\"\ntask :update_videos =&gt; :environment do\n    onvos_service()\nend\n\ndef onvos_service\n  @enc = Vimeo::Video.onvos_encoded_url\n  puts @enc\nend\n</code></pre>\n\n<p><strong>Use an instance method</strong></p>\n\n<p>In your class:</p>\n\n<pre><code>class Vimeo::Video &lt; ActiveRecord::Base\n  def self.onvos_encoded_url\n    hash = json_onvos()\n    enc = Base64.encode64(hash.to_json)\n    return URI::encode(enc)\n  end\nend\n</code></pre>\n\n<p>In your rake task:</p>\n\n<pre><code>desc \"Tareas\"\ntask :update_videos =&gt; :environment do\n    onvos_service()\nend\n\ndef onvos_service\n  @enc = Vimeo::Video.new.onvos_encoded_url\n  puts @enc\nend\n</code></pre>\n\n<p>As an unrelated aside, ruby implicitly returns the last expression in a method so the <code>return</code>s are not necessary in this context.</p>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 0, "last_activity_date": 1466625921, "creation_date": 1466625921, "answer_id": 37977282, "question_id": 37977175, "link": "https://stackoverflow.com/questions/37977175/nomethoderror-undefined-method-onvos-encoded-url-ruby-on-rails/37977282#37977282", "title": "NoMethodError: undefined method `onvos_encoded_url&#39; -- ruby on rails", "body": "<p>Change</p>\n\n<pre><code>def onvos_encoded_url\n</code></pre>\n\n<p>to </p>\n\n<pre><code>def self.onvos_encoded_url\n</code></pre>\n\n<p>Because you want to define a class method and not an instance method.</p>\n"}], "owner": {"reputation": 53, "user_id": 5753254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7d76204088b7ec84356c00a5a2e7aa3?s=128&d=identicon&r=PG&f=1", "display_name": "Edoardo Lopez", "link": "https://stackoverflow.com/users/5753254/edoardo-lopez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1466626101, "creation_date": 1466625523, "question_id": 37977175, "link": "https://stackoverflow.com/questions/37977175/nomethoderror-undefined-method-onvos-encoded-url-ruby-on-rails", "title": "NoMethodError: undefined method `onvos_encoded_url&#39; -- ruby on rails", "body": "<p>I'm having some issues trying to call an instance:</p>\n\n<p>in my first model file: \"video.rb\" a got this code :</p>\n\n<pre><code>class Vimeo::Video &lt; ActiveRecord::Base\n      def onvos_encoded_url\n        hash = json_onvos()\n        enc = Base64.encode64(hash.to_json)\n        return URI::encode(enc)\n      end\nend\n</code></pre>\n\n<p>them I try to call it scheduller.rake</p>\n\n<pre><code>desc \"Tareas\"\ntask :update_videos =&gt; :environment do\n    onvos_service()\nend\n\ndef onvos_service\n   @enc = Vimeo::Video.onvos_encoded_url\n   puts @enc\nend\n</code></pre>\n\n<p>i got the massage </p>\n\n<pre><code>NoMethodError: undefined method `onvos_encoded_url' for #&lt;Class:0x007fe003e9eef0&gt;\n\nTasks: TOP =&gt; update_videos\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1466643145, "post_id": 37976959, "comment_id": 63406648, "body": "Why do you have the arguments <code>attr</code> and <code>options</code>, considering that they are not used? Is <code>form_label</code> a method?"}], "answers": [{"tags": [], "owner": {"reputation": 1299, "user_id": 2923846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e45ca52b59ce69b3844c6e8b09f278c?s=128&d=identicon&r=PG", "display_name": "lwassink", "link": "https://stackoverflow.com/users/2923846/lwassink"}, "is_accepted": true, "score": 2, "last_activity_date": 1466625743, "creation_date": 1466625743, "answer_id": 37977239, "question_id": 37976959, "link": "https://stackoverflow.com/questions/37976959/string-concatenation-and-yielding-block-based-on-if-modifier/37977239#37977239", "title": "string concatenation and yielding block based on if modifier", "body": "<p>You can't concatenate strings like that. The line <code>yield(block) +</code> isn't a complete line. That's why you're getting the errors. Here are two possible fixes:</p>\n\n<pre><code>def wrapper(form, attr, options = {}, &amp;block)\n  if block_given?\n    return yield(block) + form.label(form_label, class: \"control-label\")\n  end\n  form.label(form_label, class: \"control-label\")\nend\n</code></pre>\n\n<p>Or this</p>\n\n<pre><code>def wrapper(form, attr, options = {}, &amp;block)\n  content = ''\n  if block_given?\n    content = yield(block)\n  end\n  content + form.label(form_label, class: \"control-label\")\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 858, "user_id": 1875195, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3ed18248b30a2d90cf49ea9393097425?s=128&d=identicon&r=PG", "display_name": "user1875195", "link": "https://stackoverflow.com/users/1875195/user1875195"}, "is_accepted": false, "score": 1, "last_activity_date": 1466625868, "creation_date": 1466625868, "answer_id": 37977267, "question_id": 37976959, "link": "https://stackoverflow.com/questions/37976959/string-concatenation-and-yielding-block-based-on-if-modifier/37977267#37977267", "title": "string concatenation and yielding block based on if modifier", "body": "<p>You're seeing an error because you left a dangling <code>+</code> inside your if block</p>\n\n<p>You could do something like this</p>\n\n<pre><code>def wrapper(form, attr, options = {}, &amp;block)\n  res = block_given? ? yield(block) : \"\"\n  res + form.label(form_label, class: \"control-label\")\nend\n</code></pre>\n"}], "owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 37977239, "answer_count": 2, "score": 1, "last_activity_date": 1466625868, "creation_date": 1466624696, "last_edit_date": 1466625664, "question_id": 37976959, "link": "https://stackoverflow.com/questions/37976959/string-concatenation-and-yielding-block-based-on-if-modifier", "title": "string concatenation and yielding block based on if modifier", "body": "<p>This is a purely ruby syntax question, even though it's in the context of Rails.</p>\n\n<p>I have a method which accepts a block and converts it to proc object in its definition:</p>\n\n<pre><code>def wrapper(form, attr, options = {}, &amp;block)\n  if block_given?\n    yield(block) +\n  end\n  form.label(form_label, class: \"control-label\")\nend\n</code></pre>\n\n<p>The block is a piece of html as a string and I want to concatenate it with form.label which itself is returned as a string of html. However, I only want to concatenate the two if the block is given.</p>\n\n<p>The above produces syntax error:</p>\n\n<pre><code>SyntaxError: (irb):14: syntax error, unexpected keyword_end\n</code></pre>\n\n<p>Using the if modifier also does not work:</p>\n\n<pre><code>def wrapper(form, attr, options = {}, &amp;block)\n  yield(block) + if block_given?\n  form.label(form_label, class: \"control-label\")\nend\n</code></pre>\n\n<p>I might also later need to do something like this (in which case I concatenate 3 strings conditionally):</p>\n\n<pre><code>def wrapper(form, attr, options = {}, &amp;block)\n  form.label(options[:errors], class: \"control-label required\") +\n  yield(block) + if block_given?\n  form.label(form_label, class: \"control-label\")\nend\n</code></pre>\n\n<p>What is the best approach to concatenate a block with a string when the block may be optional?</p>\n\n<p>One solution I thought of after asking the question is maybe this:</p>\n\n<pre><code>   def wrapper(form, attr, options = {}, &amp;block)     \n     if block_given?\n       content = capture(&amp;block)\n     else\n       content = \"\"\n     end\n\n     form.label(form.object.errors[attr]) + content + form.label(form_label, class: \"control-label\")\n   end\n</code></pre>\n"}, {"tags": ["ruby", "testing", "page-object-gem"], "answers": [{"tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": true, "score": 2, "last_activity_date": 1466649143, "creation_date": 1466649143, "answer_id": 37981384, "question_id": 37976763, "link": "https://stackoverflow.com/questions/37976763/how-to-iterate-over-series-of-checkboxes-using-page-object/37981384#37981384", "title": "How to iterate over series of checkboxes using page-object?", "body": "<p>The <code>checkboxes</code> accessor method (as opposed to <code>checkbox</code>) is used to create an <code>Array</code> of checkboxes.</p>\n\n<p>Assuming the page HTML is structured like:</p>\n\n<pre><code>&lt;div id=\"other\"&gt;\n  &lt;input type=\"checkbox\"&gt;\n  &lt;input type=\"checkbox\"&gt;\n&lt;/div&gt;\n&lt;div id=\"container\"&gt;\n  &lt;input type=\"checkbox\"&gt;\n  &lt;input type=\"checkbox\"&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>You could specify a block that locates all checkboxes in say the <code>div</code> with id \"container\":</p>\n\n<pre><code>checkboxes(:thumb) { div_element(id: 'container').checkbox_elements }\n</code></pre>\n\n<p>Alternatively, you may find a CSS-selector or XPath more concise:</p>\n\n<pre><code>checkboxes(:thumb, css: 'div#container input[type=\"checkbox\"]')\n</code></pre>\n\n<p>Either way, the page object gets a <code>&lt;name&gt;_elements</code> method that returns the matching checkboxes:</p>\n\n<pre><code>page.thumb_elements.each do |checkbox|\n  checkbox.check\nend\n</code></pre>\n\n<p>Or as a one-liner:</p>\n\n<pre><code>page.thumb_elements.each(&amp;:check)\n</code></pre>\n"}], "owner": {"reputation": 628, "user_id": 2522327, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1be8c6de5292483b5ee3466213de52c2?s=128&d=identicon&r=PG", "display_name": "Vincent Rodomista", "link": "https://stackoverflow.com/users/2522327/vincent-rodomista"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "accepted_answer_id": 37981384, "answer_count": 1, "score": 0, "last_activity_date": 1466649143, "creation_date": 1466623939, "question_id": 37976763, "link": "https://stackoverflow.com/questions/37976763/how-to-iterate-over-series-of-checkboxes-using-page-object", "title": "How to iterate over series of checkboxes using page-object?", "body": "<p>I have a list of checkboxes defined by their IDs using the page-object gem. A sample follows:</p>\n\n<pre><code>checkbox        :main_product,                      id:             '19437578_58659806'\ncheckbox        :thumb_one,                         id:             '19437579_58659811'\ncheckbox        :thumb_two,                         id:             '19437580_58659812'\ncheckbox        :thumb_three,                       id:             '19437581_58659813'\ncheckbox        :thumb_four,                        id:             '19437582_58659814'\ncheckbox        :thumb_five,                        id:             '19437583_58659815'\ncheckbox        :thumb_six,                         id:             '19437584_58659816'\ncheckbox        :thumb_seven,                       id:             '19437585_58659817'\ncheckbox        :thumb_eight,                       id:             '19437586_58659818'\ncheckbox        :thumb_nine,                        id:             '19437587_58659819'\ncheckbox        :thumb_ten,                         id:             '19437588_58659820'\ncheckbox        :tt_one,                            id:             '19437594_58659842'\ncheckbox        :tt_two,                            id:             '19437595_58659843'\ncheckbox        :tt_three,                          id:             '19437596_58659844'\ncheckbox        :tt_four,                           id:             '19437597_58659845'\ncheckbox        :tt_five,                           id:             '19437598_58659846'\ncheckbox        :tt_six,                            id:             '19437599_58659847'\ncheckbox        :tt_seven,                          id:             '19437600_58659848'\ncheckbox        :tt_eight,                          id:             '19437601_58659849'\ncheckbox        :tt_nine,                           id:             '19437602_58659850'\ncheckbox        :tt_ten,                            id:             '19437603_58659851'\n</code></pre>\n\n<p>The way I see it; there must be a more efficient way to gather all of the checkbox elements inside of a particular div. </p>\n\n<p>I'm looking for a way to essentially do </p>\n\n<pre><code>checkbox_objects.each do |checkbox|\n  checkbox.check\nend\n</code></pre>\n\n<p>But I'm not sure how to define <code>checkbox_objects</code>. Is anyone knowledgable of a way to gather all of the checkboxes inside a particular element and put them into an array? Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "date", "time"], "comments": [{"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1466623977, "post_id": 37976719, "comment_id": 63399697, "body": "Why do you want to check it? Some of them share methods that allows you to use them without knowing what type it is?"}, {"owner": {"reputation": 1837, "user_id": 2190425, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/24ca4182ce692ec73ef35a86f268c802?s=128&d=identicon&r=PG", "display_name": "Aurimas", "link": "https://stackoverflow.com/users/2190425/aurimas"}, "reply_to_user": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1466624180, "post_id": 37976719, "comment_id": 63399790, "body": "I have a Rails active record that has 2 attributes that are Time, I need to do a <code>.map</code> to convert each attribute that is Time to datetime. Would be great that in the future the type of time could be changed in the DB, hence the question.. but I guess I&#39;m just kinda curious now..."}, {"owner": {"reputation": 1837, "user_id": 2190425, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/24ca4182ce692ec73ef35a86f268c802?s=128&d=identicon&r=PG", "display_name": "Aurimas", "link": "https://stackoverflow.com/users/2190425/aurimas"}, "reply_to_user": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1466627396, "post_id": 37976719, "comment_id": 63401430, "body": "Curious why the downvote? .. Is there a way to ask the people who downvoted? I must have made somebody furious in this <code>forum</code>"}, {"owner": {"reputation": 129, "user_id": 5573465, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Np_waTIPCnQ/AAAAAAAAAAI/AAAAAAAAANk/cAADwcmVrZg/photo.jpg?sz=128", "display_name": "Tim Mee", "link": "https://stackoverflow.com/users/5573465/tim-mee"}, "edited": false, "score": 0, "creation_date": 1466631982, "post_id": 37976719, "comment_id": 63403544, "body": "No you can&#39;t ask why someone down voted it... Don&#39;t let it get to you, I&#39;m confused a lot of the time people down vote things as well.  You asked a simple question and got straight to the point... someone who doesn&#39;t like that style ( i.e. they want a draw out reason of why you just asked your question. not necessary IMO) could have down voted it.  But as others have noted the <code>. instance_of?</code> or <code>.class</code> is probably the best solution to finding the class of an object in Ruby.  GL with your work!"}], "answers": [{"tags": [], "owner": {"reputation": 48, "user_id": 6462346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40d29a51c2362d9ffe7f48bb1b0117f0?s=128&d=identicon&r=PG&f=1", "display_name": "robert.otherone", "link": "https://stackoverflow.com/users/6462346/robert-otherone"}, "is_accepted": false, "score": 1, "last_activity_date": 1466626850, "last_edit_date": 1466626850, "creation_date": 1466624143, "answer_id": 37976818, "question_id": 37976719, "link": "https://stackoverflow.com/questions/37976719/how-to-check-if-variable-is-date-or-time-or-datetime-in-ruby/37976818#37976818", "title": "How to check if variable is Date or Time or DateTime in Ruby?", "body": "<p>I do not think there is an \"easy way\" without typing all the type variations of <code>Date</code> / <code>Time</code> / <code>DateTime</code> / <code>Timezone</code> out.</p>\n\n<p>The simplest and fastest way is to do <code>dateTime.is_a?(DateTime)</code> or <code>Time.is_a?(Time)</code>, <em>repeat ad nausem</em> - which all will return a boolean.</p>\n\n<p>Conversely you can also use <code>kind_of?.</code></p>\n\n<p>You might also be able to find a framework that has a function to check all of the variations of date and time.</p>\n"}, {"tags": [], "owner": {"reputation": 597, "user_id": 2055252, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8f740b1af3815ed9ca61789f376cb590?s=128&d=identicon&r=PG", "display_name": "nisevi", "link": "https://stackoverflow.com/users/2055252/nisevi"}, "is_accepted": false, "score": 3, "last_activity_date": 1466626659, "last_edit_date": 1495542313, "creation_date": 1466624801, "answer_id": 37976975, "question_id": 37976719, "link": "https://stackoverflow.com/questions/37976719/how-to-check-if-variable-is-date-or-time-or-datetime-in-ruby/37976975#37976975", "title": "How to check if variable is Date or Time or DateTime in Ruby?", "body": "<p>If you want to verify the object, here you have a couple of examples:</p>\n\n<pre><code>nisevi@nisevi ~:$ irb\nirb(main):001:0&gt; require \"date\"\n=&gt; true\nirb(main):002:0&gt; require \"time\"\n=&gt; true\nirb(main):003:0&gt; d = Date.new\n=&gt; #&lt;Date: -4712-01-01 ((0j,0s,0n),+0s,2299161j)&gt;\nirb(main):004:0&gt; dt = DateTime.new\n=&gt; #&lt;DateTime: -4712-01-01T00:00:00+00:00 ((0j,0s,0n),+0s,2299161j)&gt;  \nirb(main):005:0&gt; t = Time.new\n=&gt; 2016-06-22 21:33:09 +0200\n\nirb(main):014:0&gt; d.instance_of?(Date)\n=&gt; true\nirb(main):015:0&gt; d.instance_of?(DateTime)\n=&gt; false\nirb(main):016:0&gt; d.instance_of?(Time)\n=&gt; false\nirb(main):017:0&gt; dt.instance_of?(DateTime)\n=&gt; true\nirb(main):018:0&gt; dt.instance_of?(Time)\n=&gt; false\nirb(main):019:0&gt; dt.instance_of?(Date)\n=&gt; false\nirb(main):020:0&gt; t.instance_of?(Time)\n=&gt; true\nirb(main):021:0&gt; t.instance_of?(DateTime)\n=&gt; false\nirb(main):022:0&gt; t.instance_of?(Date)\n=&gt; false\n</code></pre>\n\n<p>Also I think that TimeZone is from <a href=\"http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html\" rel=\"nofollow noreferrer\">Rails</a> and not from Ruby.</p>\n\n<p>As per your comment if you want to convert a Time object to DateTime I think that something like this it should work:</p>\n\n<pre><code>def time_to_datetime time\n  return time.to_datetime if time.instance_of?(Time)\n  false\nend\n</code></pre>\n\n<p>Here you have some code:</p>\n\n<pre><code>irb(main):026:0&gt; t.instance_of?(Time)\n=&gt; true\nirb(main):027:0&gt; t.methods.sort.to_s\n=&gt; \"[:!, :!=, :!~, :+, :-, :&lt;, :&lt;=, :&lt;=&gt;, :==, :===, :=~, :&gt;, :&gt;=, :__id__, :__send__, :asctime, :between?, :class, :clone, :ctime, :day, :define_singleton_method, :display, :dst?, :dup, :enum_for, :eql?, :equal?, :extend, :freeze, :friday?, :frozen?, :getgm, :getlocal, :getutc, :gmt?, :gmt_offset, :gmtime, :gmtoff, :hash, :hour, :httpdate, :inspect, :instance_eval, :instance_exec, :instance_of?, :instance_variable_defined?, :instance_variable_get, :instance_variable_set, :instance_variables, :is_a?, :isdst, :iso8601, :itself, :kind_of?, :localtime, :mday, :method, :methods, :min, :mon, :monday?, :month, :nil?, :nsec, :object_id, :private_methods, :protected_methods, :public_method, :public_methods, :public_send, :remove_instance_variable, :respond_to?, :rfc2822, :rfc822, :round, :saturday?, :sec, :send, :singleton_class, :singleton_method, :singleton_methods, :strftime, :subsec, :succ, :sunday?, :taint, :tainted?, :tap, :thursday?, :to_a, :to_date, :to_datetime, :to_enum, :to_f, :to_i, :to_r, :to_s, :to_time, :trust, :tuesday?, :tv_nsec, :tv_sec, :tv_usec, :untaint, :untrust, :untrusted?, :usec, :utc, :utc?, :utc_offset, :wday, :wednesday?, :xmlschema, :yday, :year, :zone]\"\nirb(main):028:0&gt; t.to_datetime\n=&gt; #&lt;DateTime: 2016-06-22T21:33:09+02:00 ((2457562j,70389s,767750206n),+7200s,2299161j)&gt;\nirb(main):029:0&gt; t.instance_of?(Time)\n=&gt; true\nirb(main):030:0&gt; t.instance_of?(DateTime)\n=&gt; false\nirb(main):031:0&gt; tdt = t.to_datetime\n=&gt; #&lt;DateTime: 2016-06-22T21:33:09+02:00 ((2457562j,70389s,767750206n),+7200s,2299161j)&gt;\nirb(main):032:0&gt; tdt.instance_of?(Time)\n=&gt; false\nirb(main):033:0&gt; tdt.instance_of?(DateTime)\n=&gt; true\n</code></pre>\n\n<p>Here you have some interesting info <a href=\"https://stackoverflow.com/questions/3928275/in-ruby-on-rails-whats-the-difference-between-datetime-timestamp-time-and-da?rq=1\">In Ruby on Rails, what's the difference between DateTime, Timestamp, Time and Date?</a></p>\n"}, {"tags": [], "owner": {"reputation": 2765, "user_id": 5864985, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/UlhbW.jpg?s=128&g=1", "display_name": "Ronan Lopes", "link": "https://stackoverflow.com/users/5864985/ronan-lopes"}, "is_accepted": false, "score": 5, "last_activity_date": 1466630624, "creation_date": 1466630624, "answer_id": 37978502, "question_id": 37976719, "link": "https://stackoverflow.com/questions/37976719/how-to-check-if-variable-is-date-or-time-or-datetime-in-ruby/37978502#37978502", "title": "How to check if variable is Date or Time or DateTime in Ruby?", "body": "<p>you can inspect the class of a object doing</p>\n\n<pre><code>object.class\n</code></pre>\n\n<p>It should return Date, String or whatever it is. You can also do the reverse and check if an object is an instance of a class:</p>\n\n<pre><code>object.instance_of?(class)\n</code></pre>\n\n<p>where class is the one you want to check (String, Date), returning true/false</p>\n"}, {"tags": [], "owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "is_accepted": false, "score": 1, "last_activity_date": 1466639731, "creation_date": 1466639731, "answer_id": 37980077, "question_id": 37976719, "link": "https://stackoverflow.com/questions/37976719/how-to-check-if-variable-is-date-or-time-or-datetime-in-ruby/37980077#37980077", "title": "How to check if variable is Date or Time or DateTime in Ruby?", "body": "<p>To find what class the module (or method) is located in, you use the <code>.class</code> function, this allows you to inspect Ruby objects to find out what class they are located in. The syntax for this looks like this: <code>object.class</code>. Here's some examples:</p>\n\n<pre><code>irb(main):001:0&gt; require 'date'\n=&gt; true\nirb(main):002:0&gt; d = Date.today\n=&gt; #&lt;Date: 2016-06-22 ((2457562j,0s,0n),+0s,2299161j)&gt;\nirb(main):003:0&gt; t = Time.now\n=&gt; 2016-06-22 18:52:24 -0500\nirb(main):004:0&gt; t.class\n=&gt; Time\nirb(main):005:0&gt; d.class\n=&gt; Date\n</code></pre>\n\n<p>As you can see this is an easy and simple way to find the class that the object is in.</p>\n"}, {"comments": [{"owner": {"reputation": 1226, "user_id": 536138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/942df288a7d01060f791117f03c54357?s=128&d=identicon&r=PG", "display_name": "St&#233;phane", "link": "https://stackoverflow.com/users/536138/st%c3%a9phane"}, "edited": false, "score": 14, "creation_date": 1511875201, "post_id": 44708660, "comment_id": 82021640, "body": "Thanks for this answer. It led me to this solution : <code>d.respond_to?(:strftime)</code>"}], "tags": [], "owner": {"reputation": 3179, "user_id": 502369, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a3dc256435d712a0fa80232736644aba?s=128&d=identicon&r=PG", "display_name": "zeke", "link": "https://stackoverflow.com/users/502369/zeke"}, "is_accepted": true, "score": 27, "last_activity_date": 1577485941, "last_edit_date": 1577485941, "creation_date": 1498162781, "answer_id": 44708660, "question_id": 37976719, "link": "https://stackoverflow.com/questions/37976719/how-to-check-if-variable-is-date-or-time-or-datetime-in-ruby/44708660#44708660", "title": "How to check if variable is Date or Time or DateTime in Ruby?", "body": "<p>Another option:</p>\n\n<pre><code>def is_datetime(d)\n  d.methods.include? :strftime\nend\n</code></pre>\n\n<p>Or alternatively:</p>\n\n<pre><code>if d.respond_to?(:strftime)\n  # d is a Date or DateTime object\nend \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 4225250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a0f3b4335c7a68243f57bb4abb45488?s=128&d=identicon&r=PG&f=1", "display_name": "wuyuedefeng", "link": "https://stackoverflow.com/users/4225250/wuyuedefeng"}, "is_accepted": false, "score": 1, "last_activity_date": 1521510668, "last_edit_date": 1521510668, "creation_date": 1521507764, "answer_id": 49374821, "question_id": 37976719, "link": "https://stackoverflow.com/questions/37976719/how-to-check-if-variable-is-date-or-time-or-datetime-in-ruby/49374821#49374821", "title": "How to check if variable is Date or Time or DateTime in Ruby?", "body": "<p>The Column objects returned by columns and columns_hash can then be used to get information such as the data type and default values, for example:</p>\n\n<pre><code>User.columns_hash['email'].type\n=&gt; :string\nUser.columns_hash['email'].default\n=&gt; nil\nUser.columns_hash['email'].sql_type\n=&gt; \"varchar(255)\"\n</code></pre>\n\n<p>(<a href=\"https://thewebfellas.com/blog/accessing-column-information-with-activerecord\" rel=\"nofollow noreferrer\">Source</a>)</p>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 10231304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0d3e8c4341018b811820d352e693b4f?s=128&d=identicon&r=PG", "display_name": "T&#237;mor Espallargas", "link": "https://stackoverflow.com/users/10231304/t%c3%admor-espallargas"}, "is_accepted": false, "score": 0, "last_activity_date": 1547819621, "creation_date": 1547819621, "answer_id": 54255444, "question_id": 37976719, "link": "https://stackoverflow.com/questions/37976719/how-to-check-if-variable-is-date-or-time-or-datetime-in-ruby/54255444#54255444", "title": "How to check if variable is Date or Time or DateTime in Ruby?", "body": "<p>For the sake of completion, another option would be:</p>\n\n<pre><code>def responds_to_datetime?(date)\n  true if date.to_datetime rescue false\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 348, "user_id": 6895653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a29f287800b9ea23f06b1fe328761f9?s=128&d=identicon&r=PG&f=1", "display_name": "CamiloVA", "link": "https://stackoverflow.com/users/6895653/camilova"}, "is_accepted": false, "score": 2, "last_activity_date": 1579115320, "creation_date": 1579115320, "answer_id": 59758095, "question_id": 37976719, "link": "https://stackoverflow.com/questions/37976719/how-to-check-if-variable-is-date-or-time-or-datetime-in-ruby/59758095#59758095", "title": "How to check if variable is Date or Time or DateTime in Ruby?", "body": "<p>In rails <code>5.2+</code> you can test if an object <code>is_a?</code></p>\n\n<pre><code>Date.today.is_a?(Date) # -&gt; true\nDate.today.is_a?(DateTime) # -&gt; false\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 495, "user_id": 778579, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/299d87deedac8135c4b6babe4c83678b?s=128&d=identicon&r=PG", "display_name": "Lief", "link": "https://stackoverflow.com/users/778579/lief"}, "is_accepted": false, "score": 0, "last_activity_date": 1603404852, "creation_date": 1603404852, "answer_id": 64491260, "question_id": 37976719, "link": "https://stackoverflow.com/questions/37976719/how-to-check-if-variable-is-date-or-time-or-datetime-in-ruby/64491260#64491260", "title": "How to check if variable is Date or Time or DateTime in Ruby?", "body": "<p>In Rails you can use the <code>acts_like?</code> method. Time does not <code>act_like_date?</code> so you need to check for date and time.</p>\n<pre class=\"lang-rb prettyprint-override\"><code>var.acts_like?(:date) || var.acts_like?(:time)\n</code></pre>\n"}], "owner": {"reputation": 1837, "user_id": 2190425, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/24ca4182ce692ec73ef35a86f268c802?s=128&d=identicon&r=PG", "display_name": "Aurimas", "link": "https://stackoverflow.com/users/2190425/aurimas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14577, "favorite_count": 1, "accepted_answer_id": 44708660, "answer_count": 9, "score": 14, "last_activity_date": 1603404852, "creation_date": 1466623759, "last_edit_date": 1466626479, "question_id": 37976719, "link": "https://stackoverflow.com/questions/37976719/how-to-check-if-variable-is-date-or-time-or-datetime-in-ruby", "title": "How to check if variable is Date or Time or DateTime in Ruby?", "body": "<p>Any easy way to check if a variable / object is of <code>Date</code> / <code>Time</code> / <code>DateTime</code> type? Without naming all the types</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "string", "gsub", "code-cleanup"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1466625069, "post_id": 37976615, "comment_id": 63400239, "body": "Apostrophe&#39;s and single quotes use the same symbol but have different meanings. Suppose your string were <code>&quot;She said, &#39;I don&#39;t know&#39;&quot;</code>. Do you want to obtain <code>&quot;She said, &#39;I dont know&#39;&quot;</code> (removing apostrophe&#39;s only) or <code>&quot;She said, I dont know&quot;</code> (removing the symbol <code>&quot;&#39;&quot;</code>) or something else? If it&#39;s the former, it&#39;s a bit tricky because some words have an apostrophe after the last character (&quot;bro&#39;&quot;, or the possessive form for words ending with an &quot;s&quot;, such as &quot;Chris&#39; car&quot;) and some words have multiple apostrophe&#39;s (&quot;couldn&#39;t&#39;ve&quot;)."}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 6415738, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/080Rq.png?s=128&g=1", "display_name": "Akamaru", "link": "https://stackoverflow.com/users/6415738/akamaru"}, "edited": false, "score": 0, "creation_date": 1466623775, "post_id": 37976660, "comment_id": 63399603, "body": "tried it and i recieved this error:  testing.rb:41:in <code>block in process_unis&#39;: undefined method </code>[]&#39; for nil:NilClass (NoMethodError)"}, {"owner": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "reply_to_user": {"reputation": 83, "user_id": 6415738, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/080Rq.png?s=128&g=1", "display_name": "Akamaru", "link": "https://stackoverflow.com/users/6415738/akamaru"}, "edited": false, "score": 0, "creation_date": 1466623960, "post_id": 37976660, "comment_id": 63399690, "body": "That error is not related to the issue you mentioned as you can see below:  2.2.1 :001 &gt; string = &quot;I&#39;m a string&quot;  =&gt; &quot;I&#39;m a string&quot;  2.2.1 :002 &gt; string.gsub!(&quot;&#39;&quot;, &#39;&#39;)  =&gt; &quot;Im a string&quot;  2.2.1 :003 &gt;  If you post more code I can help you with the other issue but you may be better off opening a new issue and marking my answer for this issue since my answer solves the question you asked."}], "tags": [], "owner": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "is_accepted": false, "score": 3, "last_activity_date": 1466623557, "creation_date": 1466623557, "answer_id": 37976660, "question_id": 37976615, "link": "https://stackoverflow.com/questions/37976615/gsub-clean-string-taking-away-apostrophe/37976660#37976660", "title": "gsub! clean string, taking away apostrophe", "body": "<p>This should do the trick:     </p>\n\n<pre><code>    def clean_uniname(text)\n     text.gsub!(\"'\", '')\n    end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 3, "last_activity_date": 1466623978, "creation_date": 1466623978, "answer_id": 37976780, "question_id": 37976615, "link": "https://stackoverflow.com/questions/37976615/gsub-clean-string-taking-away-apostrophe/37976780#37976780", "title": "gsub! clean string, taking away apostrophe", "body": "<p><code>\\s</code> means \"whitespace character\", and <code>\"</code> represents a quote. If you don't want those in your regular expression, pull them. For debugging help try <a href=\"http://rubular.com\" rel=\"nofollow\">Rubular</a> for testing.</p>\n\n<p>This means your code should be:</p>\n\n<pre><code>def clean_uniname(text)\n  text.gsub!(/\\s|\"|'/, '')\n\n  text\nend\n</code></pre>\n\n<p>It's worth noting that <code>gsub!</code> returns <code>nil</code> if no changes have been made so an explicit return of <code>text</code> is required here if you're using the return value.</p>\n"}], "owner": {"reputation": 83, "user_id": 6415738, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/080Rq.png?s=128&g=1", "display_name": "Akamaru", "link": "https://stackoverflow.com/users/6415738/akamaru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 562, "favorite_count": 0, "accepted_answer_id": 37976780, "answer_count": 2, "score": 2, "last_activity_date": 1466623978, "creation_date": 1466623379, "question_id": 37976615, "link": "https://stackoverflow.com/questions/37976615/gsub-clean-string-taking-away-apostrophe", "title": "gsub! clean string, taking away apostrophe", "body": "<p>Trying to remove the apostrophe within a string. Using the code below I've removed the apostrophe and the spaces, can anyone help me fix it so I'm just removing the apostrophe? </p>\n\n<pre><code>def clean_uniname(text)\n return text.gsub!(/\\s|\"|'/, '')\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "raty"], "comments": [{"owner": {"reputation": 3020, "user_id": 1276552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/baa29da52b110cc638a327f75baaf80f?s=128&d=identicon&r=PG", "display_name": "twonegatives", "link": "https://stackoverflow.com/users/1276552/twonegatives"}, "edited": false, "score": 0, "creation_date": 1466625310, "post_id": 37976482, "comment_id": 63400366, "body": "you should probably share <code>Photo#rate</code> and <code>Photo#calculate_overall_average</code> methods code as a problems seems to be there..."}, {"owner": {"reputation": 5157, "user_id": 97893, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/679f1c565405b6521eb1b78eeab69051?s=128&d=identicon&r=PG", "display_name": "fenec", "link": "https://stackoverflow.com/users/97893/fenec"}, "reply_to_user": {"reputation": 3020, "user_id": 1276552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/baa29da52b110cc638a327f75baaf80f?s=128&d=identicon&r=PG", "display_name": "twonegatives", "link": "https://stackoverflow.com/users/1276552/twonegatives"}, "edited": false, "score": 0, "creation_date": 1466625734, "post_id": 37976482, "comment_id": 63400599, "body": "If you do that, you are not rating a specific <code>photo</code>."}], "owner": {"reputation": 5157, "user_id": 97893, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/679f1c565405b6521eb1b78eeab69051?s=128&d=identicon&r=PG", "display_name": "fenec", "link": "https://stackoverflow.com/users/97893/fenec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 592, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1466622863, "creation_date": 1466622863, "question_id": 37976482, "link": "https://stackoverflow.com/questions/37976482/how-do-i-get-the-total-rating-average-with-ratyrate", "title": "how do i get the total rating average with ratyrate?", "body": "<p>I am having two issues,\n-Rating with the same user multiple times is creating and error \n-Calculating the total average is returning nil</p>\n\n<pre><code>   186: test \"Same user should not be able to submit multiple ratings for photo\" do\n    187:   user = FactoryGirl.create(:user)\n    188:   photo = FactoryGirl.create(:photo)\n    189:   user2 = FactoryGirl.create(:user2)\n    190:   binding.pry\n =&gt; 191:   photo.rate(1,user)\n    192:   photo.rate(3,user2) # Must have 2nd user to bypass error.\n    193:   # Will return undefined method 'avg= ' without user2.\n    194:   photo.rate(2,user)\n    195:   assert_equal photo.rates.count, 2, \"There are more than two ratings for the users\"\n    196: end\n\n[1] pry(#&lt;UserTest&gt;)&gt; photo.rate(1,user)\n=&gt; #&lt;RatingCache:0x007fadf4849208\n id: 77,\n cacheable_id: 37,\n cacheable_type: \"Photo\",\n avg: 1.0,\n qty: 1,\n dimension: nil,\n created_at: Wed, 22 Jun 2016 19:07:19 UTC +00:00,\n updated_at: Wed, 22 Jun 2016 19:07:19 UTC +00:00&gt;\n[2] pry(#&lt;UserTest&gt;)&gt; photo.rate(1,user)\nNoMethodError: undefined method `avg=' for nil:NilClass\nfrom /Users/rbennacer/.rvm/gems/ruby-2.3.0@mop2/gems/ratyrate-1.2.2.alpha/lib/ratyrate/model.rb:73:in `update_current_rate'\n[3] pry(#&lt;UserTest&gt;)&gt; photo.calculate_overall_average\n=&gt; nil\n[4] pry(#&lt;UserTest&gt;)&gt;\n</code></pre>\n"}, {"tags": ["ruby", "http", "rspec", "sinatra", "webmock"], "comments": [{"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1466622539, "post_id": 37975975, "comment_id": 63398984, "body": "Try running rspec with the -b option (by default rspec hides portions of the backtrace not from your app which can make you look in the wrong place)"}, {"owner": {"reputation": 781, "user_id": 2750478, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/db3f32fbc9f8de3052199d04c48f7200?s=128&d=identicon&r=PG&f=1", "display_name": "Xirux Nefer", "link": "https://stackoverflow.com/users/2750478/xirux-nefer"}, "reply_to_user": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1466623360, "post_id": 37975975, "comment_id": 63399409, "body": "@FrederickCheung I have updated the error message."}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1466624278, "post_id": 37975975, "comment_id": 63399832, "body": "Looks like your fake request object doesn&#39;t have a <code>method</code> method so it is calling the <code>method</code> method from Object which does indeed expect an argument"}, {"owner": {"reputation": 781, "user_id": 2750478, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/db3f32fbc9f8de3052199d04c48f7200?s=128&d=identicon&r=PG&f=1", "display_name": "Xirux Nefer", "link": "https://stackoverflow.com/users/2750478/xirux-nefer"}, "reply_to_user": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1466626948, "post_id": 37975975, "comment_id": 63401207, "body": "I went down that path but it just keeps asking for something else, like a <code>body_stream</code> with a <code>read</code> method and etc., etc."}], "answers": [{"comments": [{"owner": {"reputation": 781, "user_id": 2750478, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/db3f32fbc9f8de3052199d04c48f7200?s=128&d=identicon&r=PG&f=1", "display_name": "Xirux Nefer", "link": "https://stackoverflow.com/users/2750478/xirux-nefer"}, "edited": false, "score": 0, "creation_date": 1466629010, "post_id": 37977814, "comment_id": 63402219, "body": "Sorry, I don&#39;t understand... I need to pass a request object to the request method. The way it is going to be created in production is like this: <code>request = Net::HTTP::Get.new VERIFY_URL.request_uri</code>, but if I pass that, Webmock alerts me that Real HTTP connections are disabled. I don&#39;t want to have any calls to <code>new</code> inside the method because I want to use dependency injection."}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "reply_to_user": {"reputation": 781, "user_id": 2750478, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/db3f32fbc9f8de3052199d04c48f7200?s=128&d=identicon&r=PG&f=1", "display_name": "Xirux Nefer", "link": "https://stackoverflow.com/users/2750478/xirux-nefer"}, "edited": false, "score": 0, "creation_date": 1466630025, "post_id": 37977814, "comment_id": 63402677, "body": "Webmock docs suggest that should be fine. Perhaps you are stubbing the request incorrectly? (Eg what is VERIFY_URL)"}, {"owner": {"reputation": 781, "user_id": 2750478, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/db3f32fbc9f8de3052199d04c48f7200?s=128&d=identicon&r=PG&f=1", "display_name": "Xirux Nefer", "link": "https://stackoverflow.com/users/2750478/xirux-nefer"}, "edited": false, "score": 0, "creation_date": 1466632840, "post_id": 37977814, "comment_id": 63403863, "body": "VERIFY_URL is a string that contains an URI object with the URL that I would like to connect to. My understanding is that webmock will catch requests to that URL and return the stubbed response."}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "reply_to_user": {"reputation": 781, "user_id": 2750478, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/db3f32fbc9f8de3052199d04c48f7200?s=128&d=identicon&r=PG&f=1", "display_name": "Xirux Nefer", "link": "https://stackoverflow.com/users/2750478/xirux-nefer"}, "edited": false, "score": 0, "creation_date": 1466661453, "post_id": 37977814, "comment_id": 63411674, "body": "It looks like it is an actual URI object which may not be what webmock is expecting - docs imply it&#39;s just a string"}, {"owner": {"reputation": 781, "user_id": 2750478, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/db3f32fbc9f8de3052199d04c48f7200?s=128&d=identicon&r=PG&f=1", "display_name": "Xirux Nefer", "link": "https://stackoverflow.com/users/2750478/xirux-nefer"}, "edited": false, "score": 0, "creation_date": 1467240739, "post_id": 37977814, "comment_id": 63656181, "body": "I finally understood your answer. When I do <code>response = net_http.request(request)</code> it automagically uses the stub. So if I remove the first line of the test and the assignment of the stub, it works :)"}], "tags": [], "owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "is_accepted": true, "score": 0, "last_activity_date": 1466627734, "creation_date": 1466627734, "answer_id": 37977814, "question_id": 37975975, "link": "https://stackoverflow.com/questions/37975975/wrong-number-of-arguments-in-nethttp-request/37977814#37977814", "title": "wrong number of arguments in Net::HTTP request", "body": "<p>You don't need to use the return value of <code>stub_request</code> as you are. You can construct an instance of <code>Net::HTTP::Request</code> as normal. </p>\n"}], "owner": {"reputation": 781, "user_id": 2750478, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/db3f32fbc9f8de3052199d04c48f7200?s=128&d=identicon&r=PG&f=1", "display_name": "Xirux Nefer", "link": "https://stackoverflow.com/users/2750478/xirux-nefer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 960, "favorite_count": 0, "accepted_answer_id": 37977814, "answer_count": 1, "score": 1, "last_activity_date": 1466627734, "creation_date": 1466621025, "last_edit_date": 1466624028, "question_id": 37975975, "link": "https://stackoverflow.com/questions/37975975/wrong-number-of-arguments-in-nethttp-request", "title": "wrong number of arguments in Net::HTTP request", "body": "<p>In a Sinatra application, I'm trying to make my own wrapper around <code>Net::HTTP</code>, but I'm stuck at one of my tests. I'm using Webmock to stub a request and pass it to the <code>request</code> method of <code>Net::HTTP</code>. I do the testing with RSpec. The error I'm getting is:</p>\n\n<pre><code> Failure/Error: client.request(request)\n\n ArgumentError:\n   wrong number of arguments (given 0, expected 1)\n # /home/admin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/webmock-2.1.0/lib/webmock/http_lib_adapters/net_http.rb:279:in `method'\n # /home/admin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/webmock-2.1.0/lib/webmock/http_lib_adapters/net_http.rb:279:in `request_signature_from_request'\n # /home/admin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/webmock-2.1.0/lib/webmock/http_lib_adapters/net_http.rb:75:in `request'\n # ./lib/net_http.rb:19:in `request'\n # ./spec/net_http_spec.rb:21:in `block (2 levels) in &lt;top (required)&gt;'\n # /home/admin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/rspec-core-3.4.4/lib/rspec/core/example.rb:236:in `instance_exec'\n # /home/admin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/rspec-core-3.4.4/lib/rspec/core/example.rb:236:in `block in run'\n # /home/admin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/rspec-core-3.4.4/lib/rspec/core/example.rb:478:in `block in with_around_and_singleton_context_hooks'\n # /home/admin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/rspec-core-3.4.4/lib/rspec/core/example.rb:435:in `block in with_around_example_hooks'\n # /home/admin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/rspec-core-3.4.4/lib/rspec/core/hooks.rb:478:in `block in run'\n # /home/admin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/rspec-core-3.4.4/lib/rspec/core/hooks.rb:616:in `run_around_example_hooks_for'\n # /home/admin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/rspec-core-3.4.4/lib/rspec/core/hooks.rb:478:in `run'\n # /home/admin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/rspec-core-3.4.4/lib/rspec/core/example.rb:435:in `with_around_example_hooks'\n # /home/admin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/rspec-core-3.4.4/lib/rspec/core/example.rb:478:in `with_around_and_singleton_context_hooks'\n # /home/admin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/rspec-core-3.4.4/lib/rspec/core/example.rb:233:in `run'\n # /home/admin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/rspec-core-3.4.4/lib/rspec/core/example_group.rb:581:in `block in run_examples'\n # /home/admin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/rspec-core-3.4.4/lib/rspec/core/example_group.rb:577:in `map'\n # /home/admin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/rspec-core-3.4.4/lib/rspec/core/example_group.rb:577:in `run_examples'\n # /home/admin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/rspec-core-3.4.4/lib/rspec/core/example_group.rb:543:in `run'\n # /home/admin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/rspec-core-3.4.4/lib/rspec/core/runner.rb:119:in `block (3 levels) in run_specs'\n # /home/admin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/rspec-core-3.4.4/lib/rspec/core/runner.rb:119:in `map'\n # /home/admin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/rspec-core-3.4.4/lib/rspec/core/runner.rb:119:in `block (2 levels) in run_specs'\n # /home/admin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/rspec-core-3.4.4/lib/rspec/core/configuration.rb:1680:in `with_suite_hooks'\n # /home/admin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/rspec-core-3.4.4/lib/rspec/core/runner.rb:118:in `block in run_specs'\n # /home/admin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/rspec-core-3.4.4/lib/rspec/core/reporter.rb:77:in `report'\n # /home/admin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/rspec-core-3.4.4/lib/rspec/core/runner.rb:117:in `run_specs'\n # /home/admin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/rspec-core-3.4.4/lib/rspec/core/runner.rb:93:in `run'\n # /home/admin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/rspec-core-3.4.4/lib/rspec/core/runner.rb:78:in `run'\n # /home/admin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/rspec-core-3.4.4/lib/rspec/core/runner.rb:45:in `invoke'\n # /home/admin/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/rspec-core-3.4.4/exe/rspec:4:in `&lt;top (required)&gt;'\n # /home/admin/.rbenv/versions/2.3.0/bin/rspec:23:in `load'\n # /home/admin/.rbenv/versions/2.3.0/bin/rspec:23:in `&lt;main&gt;'\n</code></pre>\n\n<p>Line 279 of <code>net_http.rb</code> (the first line of the stack) is:</p>\n\n<pre><code>method = request.method.downcase.to_sym\n</code></pre>\n\n<p>which is inside the method:</p>\n\n<pre><code>module WebMock\n  module NetHTTPUtility\n\n    def self.request_signature_from_request(net_http, request, body = nil)\n      ...\n</code></pre>\n\n<p>which is called in line 75 of the same file:</p>\n\n<pre><code>def request(request, body = nil, &amp;block)\n  request_signature = WebMock::NetHTTPUtility.request_signature_from_request(self, request, body)\n</code></pre>\n\n<p>which is the method I am calling on my client. These are my files:</p>\n\n<p><strong>net_http.rb</strong></p>\n\n<pre><code>class NetHttp\n\n  def initialize(client)\n    @client = client\n  end\n\n  def request(request)\n    client.request(request)\n  end\n\n  private\n\n  attr_reader :client\n\nend\n</code></pre>\n\n<p><strong>net_http_spec.rb</strong></p>\n\n<pre><code>describe \"NetHttp\" do\n\n  let(:client)   {Net::HTTP.new(VERIFY_URL.host, VERIFY_URL.port)}\n  let(:net_http) {NetHttp.new(client)}\n\n  it \"sends a get request\" do\n    request  = request_with_path\n    response = net_http.request(request)\n    expect(response.code).to eq(\"200\")\n  end\n\n  def request_with_path\n    request = stub_request(:get, VERIFY_URL)\n      .with(:headers =&gt; {\n        'Accept'=&gt;'*/*',\n        'Accept-Encoding'=&gt;'gzip;q=1.0,deflate;q=0.6,identity;q=0.3',\n        'User-Agent'=&gt;'Ruby'\n        })\n      .to_return(:status =&gt; 200, :body =&gt; '{\"hello\": \"world\"}', :headers =&gt; {})\n\n    class &lt;&lt; request\n      attr_accessor :path\n    end\n\n    request.path = VERIFY_URL.request_uri\n    request\n  end\n\nend\n</code></pre>\n\n<p>The last part where I add an attribute on the fly was to solve another error. It feels a bit like a dirty hack. Maybe there is a better way to do all this, that will also prevent me from doing that?</p>\n\n<p>And in my <strong>spec_helper.rb</strong> I added the line:</p>\n\n<pre><code>WebMock.disable_net_connect!(allow_localhost: true)\n</code></pre>\n\n<p>I have put the contents of the request inside the <code>request</code> method and everything seems to be ok, I have also used a double of <code>Net::HTTPRequest</code> instead of a webmock stub, but I get the same error. I don't want to stub the client because that's my system under test. I have also looked at the code of the <code>request</code> method in the Ruby docs. I don't understand... where is that error coming from and how to solve it?</p>\n"}, {"tags": ["ruby", "dynamic", "data-structures", "tree", "dynamic-programming"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1466621056, "post_id": 37975938, "comment_id": 63398183, "body": "This is not a list of strings. This is an array of literals."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1466621242, "post_id": 37975938, "comment_id": 63398286, "body": "Cf. <a href=\"http://stackoverflow.com/questions/8404769\">stackoverflow.com/questions/8404769</a>."}, {"owner": {"reputation": 9, "user_id": 3803572, "user_type": "registered", "profile_image": "https://graph.facebook.com/1172239912/picture?type=large", "display_name": "jfnietom", "link": "https://stackoverflow.com/users/3803572/jfnietom"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1466622245, "post_id": 37975938, "comment_id": 63398816, "body": "@mudasobwa Sorry for the bad format, but I wasn&#39;t closed to a strict Ruby answer, I just wanted to translate my idea as generic. I was asking for help for the algorith not for the language."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1466635451, "post_id": 37975938, "comment_id": 63404669, "body": "SO wants you to ask only one question at a time. You should post the &quot;related question&quot; as a separate question."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 3803572, "user_type": "registered", "profile_image": "https://graph.facebook.com/1172239912/picture?type=large", "display_name": "jfnietom", "link": "https://stackoverflow.com/users/3803572/jfnietom"}, "edited": false, "score": 0, "creation_date": 1466622267, "post_id": 37976104, "comment_id": 63398833, "body": "Thank you so much! That&#39;s all I need."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1466621510, "creation_date": 1466621510, "answer_id": 37976104, "question_id": 37975938, "link": "https://stackoverflow.com/questions/37975938/generate-a-tree-from-string-split/37976104#37976104", "title": "Generate a tree from string split", "body": "<pre><code>arr = %w|ana_ola_una\n  ana_ola_ina\n  ana_asta\n  ana_ena_ola\n  ana_ena_cala\n  ana_ena_cina\n  ana_ena_cina_ula|\n\nresult = arr.each_with_object({}) do |s, memo|\n  s.split('_').inject(memo) do |deep, k|\n    deep[k.to_sym] ||= {}\n  end \nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": false, "score": 2, "last_activity_date": 1466632982, "creation_date": 1466632982, "answer_id": 37979018, "question_id": 37975938, "link": "https://stackoverflow.com/questions/37975938/generate-a-tree-from-string-split/37979018#37979018", "title": "Generate a tree from string split", "body": "<p>mudasobwa's answer is good, but if you're using Ruby 2.3+ here's a slightly more concise alternative:</p>\n\n<pre><code>arr = [\n  \"ana_ola_una\",\n  \"ana_ola_ina\",\n  \"ana_asta\",\n  \"ana_ena_ola\", \n  \"ana_ena_cala\",\n  \"ana_ena_cina\",\n  \"ana_ena_cina_ula\"\n]\n\ntree = Hash.new {|h,k| h[k] = Hash.new(&amp;h.default_proc) }\narr.each {|str| tree.dig(*str.split(?_).map(&amp;:to_sym)) }\n\np tree\n# =&gt; { ana:\n#      { ola:\n#        { una: {},\n#          ina: {}\n#        },\n#        asta: {},\n#        ena:\n#        { ola: {},\n#          cala: {},\n#          cina: { ula: {} }\n#        }\n#      }\n#    }\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 3803572, "user_type": "registered", "profile_image": "https://graph.facebook.com/1172239912/picture?type=large", "display_name": "jfnietom", "link": "https://stackoverflow.com/users/3803572/jfnietom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1466632982, "creation_date": 1466620903, "last_edit_date": 1466626454, "question_id": 37975938, "link": "https://stackoverflow.com/questions/37975938/generate-a-tree-from-string-split", "title": "Generate a tree from string split", "body": "<p>I have an array of strings </p>\n\n<pre><code>[\"ana_ola_una\",\n\"ana_ola_ina\",\n\"ana_asta\",\n\"ana_ena_ola\", \n\"ana_ena_cala\",\n\"ana_ena_cina\",\n\"ana_ena_cina_ula\"] \n</code></pre>\n\n<p>I need to reformat it as a hash of hashes of hashes of ... to make it a tree. The expected result would be:</p>\n\n<pre><code>{ana: \n    {\n     ola: {\n           una: {},\n           ina: {}\n          }, \n     asta: {},\n     ena: {\n           ola: {}, \n           cala:{},\n           cina: \n                {\n                ula: {}\n                }\n           }\n     }\n}\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>I edit this issue because I have a related question, finally I want it in a JSON with this format. How could I do:</p>\n\n<pre><code>var tree = [\n        {\n            text: \"Parent 1\",\n            nodes: [\n                {\n                    text: \"Child 1\",\n                    nodes: [\n                        {\n                            text: \"Grandchild 1\"\n                        },\n                        {\n                            text: \"Grandchild 2\"\n                        }\n                    ]\n                },\n                {\n                    text: \"Child 2\"\n                }\n            ]\n        },\n        {\n            text: \"Parent 2\"\n        },\n        {\n            text: \"Parent 3\"\n        },\n        {\n            text: \"Parent 4\"\n        },\n        {\n            text: \"Parent 5\"\n        }\n    ];\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 42085, "user_id": 3444240, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/OjOru.jpg?s=128&g=1", "display_name": "potashin", "link": "https://stackoverflow.com/users/3444240/potashin"}, "edited": false, "score": 0, "creation_date": 1466620523, "post_id": 37975779, "comment_id": 63397882, "body": "single quote line 7"}], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 6484304, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/096a6a8772c22dff7fcb6f150a799d77?s=128&d=identicon&r=PG&f=1", "display_name": "kyttcar", "link": "https://stackoverflow.com/users/6484304/kyttcar"}, "edited": false, "score": 0, "creation_date": 1466621313, "post_id": 37975831, "comment_id": 63398314, "body": "O yah ! Duh! Thank you so much . The life of a newbie !"}, {"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "reply_to_user": {"reputation": 149, "user_id": 6484304, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/096a6a8772c22dff7fcb6f150a799d77?s=128&d=identicon&r=PG&f=1", "display_name": "kyttcar", "link": "https://stackoverflow.com/users/6484304/kyttcar"}, "edited": false, "score": 0, "creation_date": 1466621522, "post_id": 37975831, "comment_id": 63398424, "body": "Happy to help, not sure why are you getting down votes. It will help if instead of a link to an image, you post the relevant parts on your <code>routes.rb</code> file in the question text instead."}, {"owner": {"reputation": 149, "user_id": 6484304, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/096a6a8772c22dff7fcb6f150a799d77?s=128&d=identicon&r=PG&f=1", "display_name": "kyttcar", "link": "https://stackoverflow.com/users/6484304/kyttcar"}, "edited": false, "score": 0, "creation_date": 1466621612, "post_id": 37975831, "comment_id": 63398483, "body": "So don&#39;t post an image and instead post only the description of the erroneous text ?"}, {"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "reply_to_user": {"reputation": 149, "user_id": 6484304, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/096a6a8772c22dff7fcb6f150a799d77?s=128&d=identicon&r=PG&f=1", "display_name": "kyttcar", "link": "https://stackoverflow.com/users/6484304/kyttcar"}, "edited": false, "score": 0, "creation_date": 1466621708, "post_id": 37975831, "comment_id": 63398526, "body": "If an image helps, yes, post it. But in this case, having the text provides all the context for the question within the question, without needing to leave the page."}, {"owner": {"reputation": 149, "user_id": 6484304, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/096a6a8772c22dff7fcb6f150a799d77?s=128&d=identicon&r=PG&f=1", "display_name": "kyttcar", "link": "https://stackoverflow.com/users/6484304/kyttcar"}, "edited": false, "score": 0, "creation_date": 1466621831, "post_id": 37975831, "comment_id": 63398593, "body": "Got it . Thanks again . Will do!"}], "tags": [], "owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "is_accepted": true, "score": 0, "last_activity_date": 1466620520, "creation_date": 1466620520, "answer_id": 37975831, "question_id": 37975779, "link": "https://stackoverflow.com/questions/37975779/error-in-routes-rb-config-syntax-error-in-line-11/37975831#37975831", "title": "Error in Routes.rb config syntax error in line 11?", "body": "<p>Line 7, opens a string with <code>'</code>. It reports the error on that line because a <code>'</code> closes the string and the rest becomes error. </p>\n"}], "owner": {"reputation": 149, "user_id": 6484304, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/096a6a8772c22dff7fcb6f150a799d77?s=128&d=identicon&r=PG&f=1", "display_name": "kyttcar", "link": "https://stackoverflow.com/users/6484304/kyttcar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 37975831, "answer_count": 1, "score": -1, "last_activity_date": 1466620520, "creation_date": 1466620364, "question_id": 37975779, "link": "https://stackoverflow.com/questions/37975779/error-in-routes-rb-config-syntax-error-in-line-11", "title": "Error in Routes.rb config syntax error in line 11?", "body": "<p>I am going through the rubyonrails tutorial by Michael hartl and I was only updating the routes.rb config as required at end of chapter 1 in order to add a application#goodbye.</p>\n\n<p>However, now even my application#hello shows a syntax error in line 11 , eventhough i didn't change that line at all.</p>\n\n<p>Any ideas on why ? </p>\n\n<p>Here is a pic of the file and the code \n<a href=\"http://i.stack.imgur.com/zBWkA.png\" rel=\"nofollow\">enter image description here</a></p>\n\n<p>Thanks a lot in advance !</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "simple-form", "simple-form-for"], "comments": [{"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1466619934, "post_id": 37975594, "comment_id": 63397553, "body": "What&#39;s the result of your test? UTC still? What&#39;s the timezone for the rails app? What&#39;s the value of <code>@model.date</code> and <code>@model.date.in_time_zone(&#39;Eastern Time (US &amp; Canada)&#39;)</code>"}, {"owner": {"reputation": 1600, "user_id": 2222931, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2a95f05bd9b203919d7fd28a9457a9e6?s=128&d=identicon&r=PG", "display_name": "letz", "link": "https://stackoverflow.com/users/2222931/letz"}, "reply_to_user": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1466620045, "post_id": 37975594, "comment_id": 63397607, "body": "the form  sticks with UTC all the time, if a call <code>@model.date.in_time_zone(&#39;Eastern Time (US &amp; Canada)&#39;)</code> e.g. in console or display in a view, it converts it"}, {"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1466620397, "post_id": 37975594, "comment_id": 63397815, "body": "I had the opposite requirement in a project, show UTC and my solution was to create my own <code>UtcDateSelectInput</code>, this was for <code>Formtastic</code>, but a similar/analog solution should work with simple_form. The custom input inherits from DateSelectInput and override the value method as follows: <code>super.utc if super.respond_to? :utc</code>. I hope that helps."}, {"owner": {"reputation": 3020, "user_id": 4493564, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-ZrR5HKgzmQA/AAAAAAAAAAI/AAAAAAAAA2Y/YxH3F9m512U/photo.jpg?sz=128", "display_name": "Petr Gazarov", "link": "https://stackoverflow.com/users/4493564/petr-gazarov"}, "edited": false, "score": 0, "creation_date": 1467083694, "post_id": 37975594, "comment_id": 63571297, "body": "I wonder if you pass string to <code>value</code> instead of <code>ActiveSupport::TimeWithZone</code> object (which is the result of <code>in_time_zone</code>). It will probably solve your problem."}], "answers": [{"tags": [], "owner": {"reputation": 1600, "user_id": 2222931, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2a95f05bd9b203919d7fd28a9457a9e6?s=128&d=identicon&r=PG", "display_name": "letz", "link": "https://stackoverflow.com/users/2222931/letz"}, "is_accepted": true, "score": 5, "last_activity_date": 1479920738, "creation_date": 1479920738, "answer_id": 40770376, "question_id": 37975594, "link": "https://stackoverflow.com/questions/37975594/how-can-i-set-timezone-in-simple-form-datetime-field/40770376#40770376", "title": "How can I set timezone in simple form datetime field?", "body": "<p>It will work if you set the timezone in the controller:</p>\n\n<p>Example:</p>\n\n<pre><code>around_action :set_time_zone, if: :current_user\n\nprivate\n\ndef set_time_zone(&amp;block)\n   Time.use_zone(current_user.time_zone, &amp;block)\nend\n</code></pre>\n"}], "owner": {"reputation": 1600, "user_id": 2222931, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2a95f05bd9b203919d7fd28a9457a9e6?s=128&d=identicon&r=PG", "display_name": "letz", "link": "https://stackoverflow.com/users/2222931/letz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1482, "favorite_count": 0, "accepted_answer_id": 40770376, "answer_count": 1, "score": 7, "last_activity_date": 1479920738, "creation_date": 1466619695, "last_edit_date": 1466673282, "question_id": 37975594, "link": "https://stackoverflow.com/questions/37975594/how-can-i-set-timezone-in-simple-form-datetime-field", "title": "How can I set timezone in simple form datetime field?", "body": "<p>I have a model with a datetime field, and is stored in UTC, how can I display that date in simple form gem in a specific timezone?</p>\n\n<p>Already tried with the option <code>input_html: {value: @model.date.in_time_zone('Eastern Time (US &amp; Canada)')}</code></p>\n\n<p>Note: I can't change the timezone of rails app</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1466624076, "post_id": 37975388, "comment_id": 63399739, "body": "As a note when posting a question try and include the <i>exact</i> error message. If the stack trace indicates a line, describe which line produces the error."}, {"owner": {"reputation": 5705, "user_id": 2002588, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4jk78.jpg?s=128&g=1", "display_name": "Marco Scabbiolo", "link": "https://stackoverflow.com/users/2002588/marco-scabbiolo"}, "edited": false, "score": 0, "creation_date": 1466627199, "post_id": 37975388, "comment_id": 63401333, "body": "What do you mean with &quot;do not seem to work&quot;? What&#180;s the expected behaviour and what&#180;s the current behaviour?"}, {"owner": {"reputation": 31, "user_id": 6499926, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-GK1_Scdxrco/AAAAAAAAAAI/AAAAAAAAAAw/0l3DWfso9Lg/photo.jpg?sz=128", "display_name": "Paul Duca", "link": "https://stackoverflow.com/users/6499926/paul-duca"}, "edited": false, "score": 0, "creation_date": 1467229459, "post_id": 37975388, "comment_id": 63651112, "body": "It wasn&#39;t returning the &quot;talk&quot; method of all the animals, it was giving me an error."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 6499926, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-GK1_Scdxrco/AAAAAAAAAAI/AAAAAAAAAAw/0l3DWfso9Lg/photo.jpg?sz=128", "display_name": "Paul Duca", "link": "https://stackoverflow.com/users/6499926/paul-duca"}, "edited": false, "score": 0, "creation_date": 1466619552, "post_id": 37975497, "comment_id": 63397332, "body": "AHH thank you so much this fixed it. I guess step one to learning programing is working on my spelling thanks so much!"}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1466631813, "post_id": 37975497, "comment_id": 63403462, "body": "Paul Duca: if this answer addresses your issue, please accept it as answer.  It helps keep SO tidy."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1466714854, "post_id": 37975497, "comment_id": 63447143, "body": "There&#39;s absolutely nothing special about <code>initialize</code>. It is a method like any other. <code>initialize</code> returns whatever it returns, and you definitely can change its return value."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1466718048, "post_id": 37975497, "comment_id": 63448777, "body": "@J&#246;rgWMittag oh okay. removed the false assertion."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 3, "last_activity_date": 1466718032, "last_edit_date": 1466718032, "creation_date": 1466619372, "answer_id": 37975497, "question_id": 37975388, "link": "https://stackoverflow.com/questions/37975388/defined-method-comes-up-undefined/37975497#37975497", "title": "Defined method comes up undefined?", "body": "<p>There are a few problems with your code:</p>\n\n<ol>\n<li><p>It's spelled <code>initialize</code>, not <code>initilize</code>. Methods with this name defined on classes are special because they return an instance of the class.</p></li>\n<li><p>When you do something like this: <code>Cat.new.initilize(\"Tiger\")</code> that is incorrect. You will never manually call the <code>initialize</code> method. It automatically gets run when you call <code>Cat.new(\"Tiger\")</code> and has the arguments passed to it. </p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 6499926, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-GK1_Scdxrco/AAAAAAAAAAI/AAAAAAAAAAw/0l3DWfso9Lg/photo.jpg?sz=128", "display_name": "Paul Duca", "link": "https://stackoverflow.com/users/6499926/paul-duca"}, "edited": false, "score": 0, "creation_date": 1466635895, "post_id": 37975707, "comment_id": 63404792, "body": "Thanks so much I appreciate the help! Need to improve my spelling before my programing skills can improve."}], "tags": [], "owner": {"reputation": 1254, "user_id": 4576274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5Wnd.jpg?s=128&g=1", "display_name": "Pramod", "link": "https://stackoverflow.com/users/4576274/pramod"}, "is_accepted": false, "score": 2, "last_activity_date": 1466629272, "last_edit_date": 1466629272, "creation_date": 1466620115, "answer_id": 37975707, "question_id": 37975388, "link": "https://stackoverflow.com/questions/37975388/defined-method-comes-up-undefined/37975707#37975707", "title": "Defined method comes up undefined?", "body": "<p>Your code is wrong at couple of places.</p>\n\n<ol>\n<li>You should change your method name from <code>initilize</code> to <code>initialize</code>.</li>\n<li>Instead of doing <code>Cat.new.initilize(\"Tiger\")</code>, you should do <code>Cat.new(\"Tiger\")</code> to create the object.</li>\n</ol>\n\n<p>After the code changes, you will get the desired results.</p>\n\n<pre><code>    animals = [Cat.new(\"Tiger\"), Dog.new(\"Ginger\"), Cow.new(\"Gretta\"), Sheep.new(\"Sally\")]\n\n    animals.each {|x| puts x.talk}\n</code></pre>\n\n<p>will give</p>\n\n<p><code>Meow!</code></p>\n\n<p><code>Woof!</code></p>\n\n<p><code>Moo!</code></p>\n\n<p><code>Bahhhh</code></p>\n"}], "owner": {"reputation": 31, "user_id": 6499926, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-GK1_Scdxrco/AAAAAAAAAAI/AAAAAAAAAAw/0l3DWfso9Lg/photo.jpg?sz=128", "display_name": "Paul Duca", "link": "https://stackoverflow.com/users/6499926/paul-duca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 37975497, "answer_count": 2, "score": 0, "last_activity_date": 1466718032, "creation_date": 1466619033, "last_edit_date": 1466628149, "question_id": 37975388, "link": "https://stackoverflow.com/questions/37975388/defined-method-comes-up-undefined", "title": "Defined method comes up undefined?", "body": "<p>I was trying to recreate an example from <em>beginning ruby</em> by Peter Cooper.</p>\n\n<pre><code>class Animal\n  attr_accessor :name\n\n  def initilize(name)\n    @name = name\n  end\nend\n\nclass Cat &lt; Animal\n  def talk\n    puts \"Meow!\"\n  end\nend\n\nclass Dog &lt; Animal\n  def talk\n    puts \"Woof!\"\n  end\nend\n\nclass Cow &lt; Animal\n  def talk\n    puts \"Moo!\"\n  end\nend\n\nclass Sheep &lt; Animal\n  def talk\n    puts \"Bahhhh\"\n  end\nend\n\nanimals = [Cat.new.initilize(\"Tiger\"), Dog.new.initilize(\"Ginger\"), Cow.new.initilize(\"Gretta\"), Sheep.new.initilize(\"Sally\")]\n\nanimals.each do |x|\n  x.talk\nend\n</code></pre>\n\n<p>Various attempts including calling the method separately do not seem to work. I'm not sure if the problem is with inheritance. Please help.</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ruby-on-rails-3", "activerecord"], "comments": [{"owner": {"reputation": 161, "user_id": 1803758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5ae879780970c64e61245af881074e2?s=128&d=identicon&r=PG", "display_name": "DennisCastro", "link": "https://stackoverflow.com/users/1803758/denniscastro"}, "edited": false, "score": 3, "creation_date": 1466619025, "post_id": 37975323, "comment_id": 63397011, "body": "add &lt;%= hidden_field_tag &#39;id&#39;,@pin.id  %&gt; to your form"}, {"owner": {"reputation": 4249, "user_id": 531479, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/52be1662035d921d395ca5b1d6b9c64c?s=128&d=identicon&r=PG", "display_name": "CWitty", "link": "https://stackoverflow.com/users/531479/cwitty"}, "edited": false, "score": 0, "creation_date": 1466619605, "post_id": 37975323, "comment_id": 63397362, "body": "Your other option is to nest the <code>ChargesController</code> as a resource under <code>Pin</code> so that you can use <code>pin_id</code> and have a url like <code>&#47;pins&#47;{pin_id}&#47;charges</code>"}, {"owner": {"reputation": 485, "user_id": 4206932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef7320590394d82dd8ca2a8d62e453dc?s=128&d=identicon&r=PG&f=1", "display_name": "Codestudio", "link": "https://stackoverflow.com/users/4206932/codestudio"}, "edited": false, "score": 0, "creation_date": 1466630194, "post_id": 37975323, "comment_id": 63402742, "body": "Thank you!  These both work."}], "owner": {"reputation": 485, "user_id": 4206932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef7320590394d82dd8ca2a8d62e453dc?s=128&d=identicon&r=PG&f=1", "display_name": "Codestudio", "link": "https://stackoverflow.com/users/4206932/codestudio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1466618794, "creation_date": 1466618794, "question_id": 37975323, "link": "https://stackoverflow.com/questions/37975323/activerecordrecordnotfound-in-chargescontrollercreate", "title": "ActiveRecord::RecordNotFound in ChargesController#create", "body": "<p>I have an app with a user model, pin model, and charges controller for stripe payments. I get the following error when I login in as a user in development and try to purchase a pin via stripe payments:</p>\n\n<p><strong>ActiveRecord::RecordNotFound in ChargesController#create</strong></p>\n\n<p><strong>Couldn't find Pin without an ID</strong></p>\n\n<p>It indicates that the error is coming from @pin = Pin.find(params[:id]) from the code below.  I believe it is doing this because the pin is still 'nil.  I am not sure if or how I would go about assigning a value to it so that it corresponds to the exact price associated with that pin.</p>\n\n<pre><code>class ChargesController &lt; ApplicationController\n\n    def create\n      # Amount in cents\n      @pin = Pin.find(params[:id])\n      @amount = (@pin.price * 100).floor\n\n      customer = Stripe::Customer.create(\n        :email =&gt; params[:stripeEmail],\n        :card  =&gt; params[:stripeToken]\n      )\n\n      charge = Stripe::Charge.create(\n        :customer    =&gt; customer.id,\n        :amount      =&gt; @amount,\n        :description =&gt; 'Rails Stripe customer',\n        :currency    =&gt; 'usd'\n      )\n\n    rescue Stripe::CardError =&gt; e\n      flash[:error] = e.message\n      redirect_to charges_path\n    end\n\nend\n</code></pre>\n\n<p>Also, whatever button or link calls the ChargesController#create method is likely in the code below here in the pins show.html.erb:</p>\n\n<p>app/views/pins/show/html.erb</p>\n\n<pre><code>      &lt;% if @pin.user == current_user %&gt;\n\n          &lt;%= form_tag charges_path, id: 'chargesForm' do %&gt;\n              &lt;script src=\"https://checkout.stripe.com/checkout.js\"&gt;&lt;/script&gt;\n              &lt;%= hidden_field_tag 'stripeToken' %&gt;\n              &lt;%= hidden_field_tag 'stripeEmail' %&gt;  \n              &lt;button id=\"btn-buy\" type=\"button\" class=\"btn btn-success btn-lg btn-block\"&gt;&lt;span class=\"glyphicon glyphicon-heart\"&gt;&lt;/span&gt;   I want this!&lt;/button&gt;\n\n              &lt;script&gt;\n                  var handler = StripeCheckout.configure({\n                    key: '&lt;%= Rails.configuration.stripe[:publishable_key] %&gt;',\n                    token: function(token, arg) {\n                      document.getElementById(\"stripeToken\").value = token.id;\n                      document.getElementById(\"stripeEmail\").value = token.email;\n                      document.getElementById(\"chargesForm\").submit();\n                    }\n                  });\n                   document.getElementById('btn-buy').addEventListener('click', function(e) {\n                    handler.open({\n                      name: &lt;%= @pin.manufacturer %&gt;',\n                      description: '&lt;%= @pin.description %&gt;',\n                      amount: '&lt;%= (@pin.price * 100).floor %&gt;'\n                  });\n                  e.preventDefault();\n                 })\n              &lt;/script&gt;\n          &lt;% end %&gt;\n\n      &lt;% else %&gt;\n\n          &lt;%= link_to 'I want this!', new_user_registration_path, class: \"btn btn-success btn-lg btn-block\" %&gt;\n\n      &lt;% end %&gt;\n\n   &lt;ul id=\"details-infobox\" class=\"list-group\"&gt;\n          &lt;li class=\"list-group-item active clearfix\"&gt;DETAILS&lt;/li&gt;\n          &lt;li class=\"list-group-item\"&gt;\n            &lt;p&gt;&lt;strong&gt;Description:&lt;/strong&gt;   &lt;%= @pin.description %&gt;&lt;/p&gt;&lt;/li&gt;\n          &lt;li class=\"list-group-item clearfix\"&gt;\n            &lt;span class=\"pull-left content-qualifier\"&gt;&lt;b&gt;Price: $ &lt;%= @pin.price %&gt;&lt;/b&gt;&lt;/span&gt;\n\n          &lt;/li&gt;\n        &lt;/ul&gt;\n    &lt;/aside&gt;\n\n&lt;/section&gt;\n</code></pre>\n\n<p>What should I do to patch this issue?  Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nokogiri"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1466723458, "post_id": 37975212, "comment_id": 63450627, "body": "When asking about code you&#39;ve written, it <i>REALLY</i> helps us make sense of your question if you provide the minimum input data, HTML in this case, and the expected output. Without those we&#39;re left to invent data and guess what you want based on your description, and, like a picture, code is worth 1000 words. Please see &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; which explains it."}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1466724114, "post_id": 37977124, "comment_id": 63450786, "body": "The documentation is at <a href=\"http://www.nokogiri.org/tutorials/modifying_an_html_xml_document.html#wrapping_a_nodeset\" rel=\"nofollow noreferrer\">nokogiri.org/tutorials/&hellip;</a>."}], "tags": [], "owner": {"reputation": 854, "user_id": 4696152, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ce4a2a4814cedafd095f3516a9f9cfe4?s=128&d=identicon&r=PG&f=1", "display_name": "Zack Herbert", "link": "https://stackoverflow.com/users/4696152/zack-herbert"}, "is_accepted": true, "score": 1, "last_activity_date": 1466625277, "creation_date": 1466625277, "answer_id": 37977124, "question_id": 37975212, "link": "https://stackoverflow.com/questions/37975212/use-nokogiri-to-wrap-a-document-fragment-in-a-div/37977124#37977124", "title": "Use Nokogiri to wrap a document fragment in a div", "body": "<pre><code>def clean_html\n  frag = Nokogiri::HTML::DocumentFragment.parse(self.description)\n  embeds = frag.css(\"iframe\")\n  embeds.wrap(\"&lt;div class='video-container'&gt;\") if embeds.count &gt; 0\n  self.description = frag.to_html\nend\n</code></pre>\n\n<p>Didn't realize there was a wrap function that lets you wrap a fragment with some html...<em>face palm</em></p>\n"}], "owner": {"reputation": 854, "user_id": 4696152, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ce4a2a4814cedafd095f3516a9f9cfe4?s=128&d=identicon&r=PG&f=1", "display_name": "Zack Herbert", "link": "https://stackoverflow.com/users/4696152/zack-herbert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "accepted_answer_id": 37977124, "answer_count": 1, "score": 0, "last_activity_date": 1466723318, "creation_date": 1466618409, "last_edit_date": 1466723318, "question_id": 37975212, "link": "https://stackoverflow.com/questions/37975212/use-nokogiri-to-wrap-a-document-fragment-in-a-div", "title": "Use Nokogiri to wrap a document fragment in a div", "body": "<p>I am trying to use Nokogiri to find an iframe and wrap it in a div with a certain class.</p>\n\n<p>So far I have the following code, but this adds a video-container class to the iframe. I need to wrap the iframe in a div and give that div the video-container class:</p>\n\n<pre><code>def clean_html\n  frag = Nokogiri::HTML::DocumentFragment.parse(self.description)\n  embeds = frag.css(\"iframe\")\n  embeds.add_class(\"video-container\") if embeds.count &gt; 0\n  self.description = frag.to_html\nend\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 1, "creation_date": 1466618450, "post_id": 37975191, "comment_id": 63396701, "body": "Is there any reason you&#39;re using a hash?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1466618716, "post_id": 37975191, "comment_id": 63396842, "body": "That expression is invalid."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1466618876, "post_id": 37975191, "comment_id": 63396917, "body": "What @sawa is talking about is the <code>&quot;results&quot; =&gt; {[ hash, hash ]}</code> part. It should be <code>&quot;results&quot; =&gt; [ hash, hash ]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 1, "last_activity_date": 1466620006, "last_edit_date": 1466620006, "creation_date": 1466618528, "answer_id": 37975246, "question_id": 37975191, "link": "https://stackoverflow.com/questions/37975191/hash-with-array-of-hashes-inside-hash/37975246#37975246", "title": "Hash with array of hashes inside hash", "body": "<pre><code>document[\"results\"].each do |result|\n  if result[\"ip\"] &gt; 10\n    puts result # will print ip and host\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 193, "user_id": 6500563, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/79d8d08238533616559c33c5650255b1?s=128&d=identicon&r=PG&f=1", "display_name": "mila002", "link": "https://stackoverflow.com/users/6500563/mila002"}, "edited": false, "score": 0, "creation_date": 1466621537, "post_id": 37975644, "comment_id": 63398433, "body": "It works! Thanks :) Could You explain it to me step by step? I would like to understand it for the future."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 193, "user_id": 6500563, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/79d8d08238533616559c33c5650255b1?s=128&d=identicon&r=PG&f=1", "display_name": "mila002", "link": "https://stackoverflow.com/users/6500563/mila002"}, "edited": false, "score": 0, "creation_date": 1466625525, "post_id": 37975644, "comment_id": 63400479, "body": "@mila002 : Added an explanation."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1466625496, "last_edit_date": 1466625496, "creation_date": 1466619881, "answer_id": 37975644, "question_id": 37975191, "link": "https://stackoverflow.com/questions/37975191/hash-with-array-of-hashes-inside-hash/37975644#37975644", "title": "Hash with array of hashes inside hash", "body": "<p>I would use <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-select\" rel=\"nofollow\"><code>select</code></a>:</p>\n\n<pre><code>document = { \"results\" =&gt; [{\"ip\" =&gt; 10, \"host\" =&gt; 12},{\"ip\" =&gt; 13, \"host\" =&gt; 17}] }\n\nputs document['results'].select { |hash| hash['ip'] &gt; 10 }\n#=&gt; {\"ip\"=&gt;13, \"host\"=&gt;17}\n</code></pre>\n\n<p>Explanation:</p>\n\n<pre><code>document['results']\n</code></pre>\n\n<p>returns the array of hashes:</p>\n\n<pre><code>[{\"ip\" =&gt; 10, \"host\" =&gt; 12},{\"ip\" =&gt; 13, \"host\" =&gt; 17}]\n</code></pre>\n\n<p>In the next step <code>select</code> is called on that returned array:</p>\n\n<pre><code>document['results'].select { |hash| hash['ip'] &gt; 10 }\n</code></pre>\n\n<p>This returns all sub-hashes with an value <code>&gt; 10</code> assigned to the key <code>'ip'</code>.</p>\n\n<p><code>puts</code> just prints the result to <code>STDOUT</code></p>\n"}, {"tags": [], "owner": {"reputation": 193, "user_id": 6500563, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/79d8d08238533616559c33c5650255b1?s=128&d=identicon&r=PG&f=1", "display_name": "mila002", "link": "https://stackoverflow.com/users/6500563/mila002"}, "is_accepted": false, "score": 0, "last_activity_date": 1466705737, "creation_date": 1466705737, "answer_id": 37998985, "question_id": 37975191, "link": "https://stackoverflow.com/questions/37975191/hash-with-array-of-hashes-inside-hash/37998985#37998985", "title": "Hash with array of hashes inside hash", "body": "<p>I have another problem today. Here is my code:</p>\n\n<pre><code>require 'rubygems'\nrequire 'json'\n\ndocument = JSON.load File.new(\"hosts.txt\")\nfile = JSON.load File.new(\"admins.txt\")\n\nfirst_table = document[\"results\"]\nsecond_table = file[\"admins\"]\nnew_one = first_table | second_table\n</code></pre>\n\n<p>First hash looks like this:</p>\n\n<pre><code>document = { \"results\" =&gt; [{\"ip\" =&gt; 10, \"host\" =&gt; 12},{\"ip\" =&gt; 13, \"host\" =&gt; 17}] }\n</code></pre>\n\n<p>The second hash is</p>\n\n<pre><code>file = { \"admins\" =&gt; [{\"host\" =&gt; 12, \"name\" =&gt; 12},{\"host\" =&gt; 17, \"name\" =&gt; 17}] }\n</code></pre>\n\n<p>I want merge these two hashes matching them by host by the same value to get</p>\n\n<pre><code>{ \"new_one\" =&gt; [{\"ip\" =&gt; 10, \"host\" =&gt; 12, \"name\" =&gt; 12}, {\"ip\" =&gt; 13, \"host\" =&gt; 17}, \"name\" =&gt; 17]\n</code></pre>\n\n<p>When I try <code>new_one = first_table | second_table</code>it says test.rb:24:in <code>&lt;main&gt;': undefined method</code>|' for #Hash:0x00000002ca8be8 (NoMethodError) and when I try <code>new_one = first_table.merge(second_table)</code>its says test.rb:26:in <code>&lt;main&gt;': undefined method</code>merge' for #Array:0x00000002ce88b0(NoMethodError). So what is wrong with these hashes? One time they are hashes and the second time they are arrays? How to mach these hashes? The keys and values of host the same in both hashes.</p>\n"}], "owner": {"reputation": 193, "user_id": 6500563, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/79d8d08238533616559c33c5650255b1?s=128&d=identicon&r=PG&f=1", "display_name": "mila002", "link": "https://stackoverflow.com/users/6500563/mila002"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1466705737, "creation_date": 1466618354, "last_edit_date": 1466623920, "question_id": 37975191, "link": "https://stackoverflow.com/questions/37975191/hash-with-array-of-hashes-inside-hash", "title": "Hash with array of hashes inside hash", "body": "<p>I have a hash like this:</p>\n\n<pre><code>document = {\n  \"results\" =&gt; {[\n    {\"ip\" =&gt; 10, \"host\" =&gt; 12},\n    {\"ip\" =&gt; 13, \"host\" =&gt; 17}\n  ]}\n}\n</code></pre>\n\n<p>It's a one item hash with an array of hashes inside the hash. I specified a value of <code>ip = 10</code>.</p>\n\n<p>If the <code>ip</code> is more than <code>10</code>, I want to print both keys with values. This hash is very complicated and I don't know how to access these values. Can you help me?</p>\n\n<p>Edit:\nWhat if I had hash like this\n<code>document = { \"results\" =&gt; [{\"ip\" =&gt; 10, \"host\" =&gt; 12, \"temp\" =&gt; yes},{\"ip\" =&gt; 13, \"host\" =&gt; 17, \"temp\" =&gt; yes}] }</code> and wanted print only ip and host after matching ip with 10?</p>\n"}, {"tags": ["ruby", "time"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1466617279, "post_id": 37974808, "comment_id": 63396017, "body": "If the gem does the job why are you concerned? Getting this right is extremely tricky and the Ruby core is probably not the best place to put all that cruft required to get it working properly."}, {"owner": {"reputation": 23753, "user_id": 134367, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PgGXL.png?s=128&g=1", "display_name": "craig", "link": "https://stackoverflow.com/users/134367/craig"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1466617639, "post_id": 37974808, "comment_id": 63396252, "body": "I guess that I&#39;m concerned that it&#39;s making calls to Geonames or Google to do the conversion--I should probably read the source."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1466617708, "post_id": 37974808, "comment_id": 63396294, "body": "Those calls are likely made on-demand if you&#39;re using lat/long lookup. You&#39;re not obligated to use those. The source will probably reveal a lot more."}], "owner": {"reputation": 23753, "user_id": 134367, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PgGXL.png?s=128&g=1", "display_name": "craig", "link": "https://stackoverflow.com/users/134367/craig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1466618484, "creation_date": 1466617041, "last_edit_date": 1466618484, "question_id": 37974808, "link": "https://stackoverflow.com/questions/37974808/new-time-at-time-zone", "title": "New time at time zone", "body": "<p>Is there a gem-free way to create a <code>Time</code> instance at a given timezone:</p>\n\n<ul>\n<li>using its name or abbreviation</li>\n<li><strong>without having to know if daylight savings is in effect?</strong></li>\n</ul>\n\n<p>I'm using the <a href=\"https://github.com/panthomakos/timezone\" rel=\"nofollow\">timezone gem</a> for this:</p>\n\n<pre><code>require 'timezone'\nCDT = Time.new\n# =&gt; 2016-06-22 12:23:30 -0500\ntz = Timezone.fetch('America/Los_Angeles')\n# =&gt; #&lt;Timezone::Zone name: \"America/Los_Angeles\"&gt;\nPDT = tz.time_with_offset(CDT)\n# =&gt; 2016-06-22 10:23:30 -0700\n</code></pre>\n\n<p>I can get the offsets:</p>\n\n<pre><code>Time.zone_offset('CDT')\n# =&gt; -25200\nTime.zone_offset('CST')\n# =&gt; -28800\n</code></pre>\n\n<p>then use these to create <code>Time</code> instances:</p>\n\n<pre><code>CDT=Time.new\n# =&gt; 2016-06-22 12:31:17 -0500\ntzoff=Time.zone_offset('PDT')\n# =&gt; -25200\nPDT=CDT.getlocal(tzoff)\n# =&gt; 2016-06-22 10:31:17 -0700\n</code></pre>\n\n<p>This requires me to know if daylight savings is in effect and if the other timezone uses an adjustment.</p>\n"}, {"tags": ["ruby", "syntax-error"], "comments": [{"owner": {"reputation": 4621, "user_id": 1939638, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/vu1kQ.jpg?s=128&g=1", "display_name": "Matt Cremeens", "link": "https://stackoverflow.com/users/1939638/matt-cremeens"}, "edited": false, "score": 0, "creation_date": 1466617091, "post_id": 37974645, "comment_id": 63395911, "body": "What is the error you receive and what line(s) does it point to?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1466617455, "post_id": 37974645, "comment_id": 63396143, "body": "It&#39;s usually better to declare large, unchanging arrays like <code>ones</code>, <code>tens</code> and <code>teens</code> as constants outside of your method. For example: <code>ONES</code>, <code>TENS</code> and <code>TEENS</code> with the same definitions. You could also add support for negative values easily like: <code>return &#39;negative &#39; + toNumber(-number)</code>. It&#39;s worth noting here that method names should be like <code>to_number</code> to follow Ruby coding conventions."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1466618470, "post_id": 37974645, "comment_id": 63396712, "body": "Welcome to Ruby. Be aware that you&#39;re writing Ruby code like it&#39;s Python, which would never go well in a team setting or if you intend to share your code. There are Ruby style guides that&#39;ll help you wrangle your code into line."}, {"owner": {"reputation": 39, "user_id": 5506705, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bb84537e1e0f1e206723cd3ab4d7d27c?s=128&d=identicon&r=PG&f=1", "display_name": "LMCMLJ", "link": "https://stackoverflow.com/users/5506705/lmcmlj"}, "reply_to_user": {"reputation": 4621, "user_id": 1939638, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/vu1kQ.jpg?s=128&g=1", "display_name": "Matt Cremeens", "link": "https://stackoverflow.com/users/1939638/matt-cremeens"}, "edited": false, "score": 0, "creation_date": 1466620215, "post_id": 37974645, "comment_id": 63397709, "body": "@MattCremeens At the moment, the program runs, but just displays an input cursor, like if I was to call gets. I implemented the fixes suggested here, but haven&#39;t done some of the conventions related stuff yet. Thanks."}, {"owner": {"reputation": 39, "user_id": 5506705, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bb84537e1e0f1e206723cd3ab4d7d27c?s=128&d=identicon&r=PG&f=1", "display_name": "LMCMLJ", "link": "https://stackoverflow.com/users/5506705/lmcmlj"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1466620277, "post_id": 37974645, "comment_id": 63397749, "body": "@theTinMan ok, thanks! Is there anything in particular that I&#39;ve done wrong here, or just the overall style of coding?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1466629682, "post_id": 37974645, "comment_id": 63402528, "body": "There are several things. Ruby methods are snake_case, not camelCase. The same is true of local and instance variables. We indent by two spaces. <code>return</code> is implied and the last value seen is the default return value so your program flow can reduce using explicit <code>return</code> statements. Check out <a href=\"https://codereview.stackexchange.com\">Code Review</a>; Once your code works you can ask how to refactor/simplify it."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1466617406, "post_id": 37974685, "comment_id": 63396107, "body": "Clarifying: Ruby&#39;s coding conventions strongly encourage two spaces. Other languages have other contradictory styles."}, {"owner": {"reputation": 39, "user_id": 5506705, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bb84537e1e0f1e206723cd3ab4d7d27c?s=128&d=identicon&r=PG&f=1", "display_name": "LMCMLJ", "link": "https://stackoverflow.com/users/5506705/lmcmlj"}, "edited": false, "score": 1, "creation_date": 1466617851, "post_id": 37974685, "comment_id": 63396371, "body": "Thanks for the help! I&#39;ve fixed that, and a similar issue with the reversing code. Now, for some reason, when I run the code I get a flashing cursor similar to the one from the &quot;gets&quot; command, and the code doesn&#39;t finish. Any ideas? Thanks for the help anyway! With regards to the indentation, eight is just what my VIM was set to, I&#39;ll change that, thanks!"}, {"owner": {"reputation": 6367, "user_id": 4451732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/UQN4l.jpg?s=128&g=1", "display_name": "Franklin Yu", "link": "https://stackoverflow.com/users/4451732/franklin-yu"}, "reply_to_user": {"reputation": 39, "user_id": 5506705, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bb84537e1e0f1e206723cd3ab4d7d27c?s=128&d=identicon&r=PG&f=1", "display_name": "LMCMLJ", "link": "https://stackoverflow.com/users/5506705/lmcmlj"}, "edited": false, "score": 1, "creation_date": 1466618260, "post_id": 37974685, "comment_id": 63396600, "body": "@LMCMLJ Maybe because the loop does not break? Try inserting something like <code>puts &quot;looping&quot;</code> into the loop."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1466619376, "post_id": 37974685, "comment_id": 63397213, "body": "While <code>Integer</code> doesn&#39;t have a method called <code>[]</code>, <code>Integer</code> is an abstract class with two concrete subclasses, <code>Bignum</code> and <code>Fixnum</code>, both of which <i>do</i> have a <code>[]</code> method."}], "tags": [], "owner": {"reputation": 6367, "user_id": 4451732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/UQN4l.jpg?s=128&g=1", "display_name": "Franklin Yu", "link": "https://stackoverflow.com/users/4451732/franklin-yu"}, "is_accepted": false, "score": 2, "last_activity_date": 1538946541, "last_edit_date": 1538946541, "creation_date": 1466616559, "answer_id": 37974685, "question_id": 37974645, "link": "https://stackoverflow.com/questions/37974645/no-output-from-ruby-program/37974685#37974685", "title": "No output from ruby program", "body": "<p>One missing <code>end</code> after line 35, i.e. at</p>\n\n<pre><code>                        number = (numberRev / 100).reverse\n                # HERE! there should be an `end`\n                if left == 0\n                        return numEnglish\n</code></pre>\n\n<p>In addition, at line 18 and 19 you are asking <code>number[0]</code> for the first non-zero digit of <code>Integer</code>, while <del><a href=\"http://ruby-doc.org/core/Integer.html\" rel=\"nofollow noreferrer\">the class</a> does not have a member <code>#[]</code></del> <code>#[]</code> in both <a href=\"http://ruby-doc.org/core-2.3.7/Bignum.html#method-i-5B-5D\" rel=\"nofollow noreferrer\">Bignum</a> and <a href=\"http://ruby-doc.org/core-2.3.7/Fixnum.html#method-i-5B-5D\" rel=\"nofollow noreferrer\">Fixnum</a> do not do what you mean. Try something else, for example, <code>number.to_s[0].to_i</code>.</p>\n\n<p>Note: it is widely accepted to indent with two spaces, not eight.</p>\n"}, {"tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1466630047, "last_edit_date": 1495540727, "creation_date": 1466618676, "answer_id": 37975287, "question_id": 37974645, "link": "https://stackoverflow.com/questions/37974645/no-output-from-ruby-program/37975287#37975287", "title": "No output from ruby program", "body": "<p>Some advice: </p>\n\n<ul>\n<li>use two spaces. It's more common and easier to read and spot such errors.</li>\n<li>use an editor like Sublime Text or a IDE like RubyMine. ST has several add-ons that facilitate debugging. In this case all I had to do is run a \"Beautify-Ruby\" on the code and it gave me this output.</li>\n</ul>\n\n<p>It looks like you are missing an <code>end</code> somewhere. I'm not sure where because there are other errors also, such as line 20 and 34. But, even after fixing these, your code runs forever.</p>\n\n<p>The code is surely not Ruby-like, there are far better contructs to be used.</p>\n\n<p>For instance, the loop where you can't exit, a <code>while</code> is seldom used, rather use an <code>each</code> or something similar:</p>\n\n<pre><code>def toEnglish number\n  if number &lt; 0\n    return 'Please try again, negative numbers are not allowed'\n  end\n  if number == 0\n    return 'Zero'\n  end\n  if number &gt; 0\n    numEnglish = ''\n    left = number.to_s.size\n    ones = ['one', 'two', 'three', 'four', 'five', 'six', 'seven',\n            'eight', 'nine']\n    tens = ['ten', 'twenty', 'thirty', 'forty', 'fifty', 'sixty',\n            'seventy', 'eighty', 'ninety']\n    teens = ['eleven', 'twelve', 'thirteen', 'fourteen', 'fifteen',\n             'sixteen', 'seventeen', 'eighteen', 'nineteen']\n    while left.to_i &gt; 0\n      firstDigit = number[0]\n      secondDigit = number[1]\n      sum = (firstDigit.to_i * 10) + secondDigit+to_i\n      if secondDigit != 0\n        if sum &lt; 20 and sum &gt; 10\n          numEnglish &lt;&lt; teens[sum.to_i - 11] +\n            'hundred'\n        elsif (sum % 10) == 0\n          numEnglish &lt;&lt; tens[(sum.to_i / 10)].to_s +\n            'hundred'\n        else\n          numEnglish &lt;&lt; tens[(firstDigit.to_i /\n                              10) - 1] + ones[secondDigit - 1]\n        end\n      end\n      numEnglish &lt;&lt; ones[firstDigit.to_i - 1]\n      numberRev = number.reverse\n      number = (numberRev / 100).reverse\n      if left == 0\n        return numEnglish\n      end\n    end\n  end\n\n  puts toEnglish(54)\n  puts toEnglish(447)\n</code></pre>\n\n<p>I understand this exercise is to learn Ruby because there are already gems that do this conversion for you. See also \"<a href=\"https://stackoverflow.com/questions/19445003/using-ruby-convert-numbers-to-words\">Using Ruby convert numbers to words?</a>\".</p>\n"}], "owner": {"reputation": 39, "user_id": 5506705, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bb84537e1e0f1e206723cd3ab4d7d27c?s=128&d=identicon&r=PG&f=1", "display_name": "LMCMLJ", "link": "https://stackoverflow.com/users/5506705/lmcmlj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1538946541, "creation_date": 1466616358, "last_edit_date": 1466630107, "question_id": 37974645, "link": "https://stackoverflow.com/questions/37974645/no-output-from-ruby-program", "title": "No output from ruby program", "body": "<p>I recently started learning ruby, coming from a background in python. This is one of my first programs above a few lines in length, and I have made a mistake somewhere in the syntax that I cannot catch, that is causing the program to fail with the error \"unexpected end-of-output, expected keyword_end\"</p>\n\n<p>Here is the code, many thanks for any help! It is a program that converts numbers from digit form into english.</p>\n\n<pre><code>def toEnglish number\n        if number &lt; 0\n                return 'Please try again, negative numbers are not allowed'\n        end\n        if number == 0\n                return 'Zero'\n        end\n        if number &gt; 0\n                numEnglish = ''\n                left = number.to_s.size\n                ones = ['one', 'two', 'three', 'four', 'five', 'six', 'seven',\n                    'eight', 'nine']\n                tens = ['ten', 'twenty', 'thirty', 'forty', 'fifty', 'sixty',\n                    'seventy', 'eighty', 'ninety']\n                teens = ['eleven', 'twelve', 'thirteen', 'fourteen', 'fifteen',\n                     'sixteen', 'seventeen', 'eighteen', 'nineteen']\n                while left.to_i &gt; 0\n                        firstDigit = number.to_s[0].to_i\n                        secondDigit = number.to_s[1].to_i\n                        sum = (firstDigit.to_i * 10) + secondDigit.to_i\n                        if secondDigit != 0\n                                if sum &lt; 20 and sum &gt; 10\n                                        numEnglish &lt;&lt; teens[sum.to_i - 11] +\n                                    'hundred'\n                                elsif (sum % 10) == 0\n                                        numEnglish &lt;&lt; tens[(sum.to_i / 10)].to_s +\n                                    'hundred'\n                                else\n                                        numEnglish &lt;&lt; tens[(firstDigit.to_i /\n                                    10) - 1] + ones[secondDigit - 1]\n                                end\n                        end\n                                numEnglish &lt;&lt; ones[firstDigit.to_i - 1]\n                        numberRev = number.to_s.reverse\n                        number = (numberRev.to_i / 100).to_s.reverse\n                end\n                if left == 0\n                        return numEnglish\n                end\n        end\nend\n\nputs toEnglish(54)\nputs toEnglish(447)\n</code></pre>\n\n<p>At the moment, the code runs without errors, but I am left with a blinking cursor like the one I would get from the <code>gets</code> method.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 538, "user_id": 4942501, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/01df718ae071cabc2f077114e4ab4908?s=128&d=identicon&r=PG&f=1", "display_name": "Jared", "link": "https://stackoverflow.com/users/4942501/jared"}, "edited": false, "score": 0, "creation_date": 1466616539, "post_id": 37974605, "comment_id": 63395582, "body": "which line is line 42?"}, {"owner": {"reputation": 15, "user_id": 3096564, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/03ce6210eb366609fd2f1579ac69dff3?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffw", "link": "https://stackoverflow.com/users/3096564/jeffw"}, "reply_to_user": {"reputation": 538, "user_id": 4942501, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/01df718ae071cabc2f077114e4ab4908?s=128&d=identicon&r=PG&f=1", "display_name": "Jared", "link": "https://stackoverflow.com/users/4942501/jared"}, "edited": false, "score": 0, "creation_date": 1466616982, "post_id": 37974605, "comment_id": 63395844, "body": "pay_for_period = hourly_wage * hours_per_week * 2"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1466619735, "post_id": 37974605, "comment_id": 63397447, "body": "Hint: in that empty method that doesn&#39;t do anything which only has the comment &quot;code to validate and set <code>@hourly_wage</code>&quot; in it, there should be code to validate and set <code>@hourly_wage</code> in it."}, {"owner": {"reputation": 15, "user_id": 3096564, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/03ce6210eb366609fd2f1579ac69dff3?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffw", "link": "https://stackoverflow.com/users/3096564/jeffw"}, "edited": false, "score": 0, "creation_date": 1466620023, "post_id": 37974605, "comment_id": 63397590, "body": "Thanks. I just noticed that a little bit ago. I did not realize that is was telling me to add something. Bah. Been working on this since the early hours of the morning. I think I need to step away from the computer for a while =)"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 3096564, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/03ce6210eb366609fd2f1579ac69dff3?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffw", "link": "https://stackoverflow.com/users/3096564/jeffw"}, "edited": false, "score": 0, "creation_date": 1466616909, "post_id": 37974724, "comment_id": 63395805, "body": "I was not trying to access the part of Salary. I am trying to do the Hourly part. That is why salary is nil. The error os on line 42 and 56.  pay_for_period = hourly_wage * hours_per_week * 2"}, {"owner": {"reputation": 963, "user_id": 605691, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/DJk76.png?s=128&g=1", "display_name": "Austin Pocus", "link": "https://stackoverflow.com/users/605691/austin-pocus"}, "reply_to_user": {"reputation": 15, "user_id": 3096564, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/03ce6210eb366609fd2f1579ac69dff3?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffw", "link": "https://stackoverflow.com/users/3096564/jeffw"}, "edited": false, "score": 0, "creation_date": 1466616939, "post_id": 37974724, "comment_id": 63395825, "body": "Gotcha. So you need to make sure hourly_wage and hours_per_week are set."}, {"owner": {"reputation": 15, "user_id": 3096564, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/03ce6210eb366609fd2f1579ac69dff3?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffw", "link": "https://stackoverflow.com/users/3096564/jeffw"}, "edited": false, "score": 0, "creation_date": 1466617064, "post_id": 37974724, "comment_id": 63395891, "body": "I did set those. You can see it better in the gist. <a href=\"https://gist.github.com/jeffwolfram/cb72b4301feaf1adb55c7888ec2b3c6f\" rel=\"nofollow noreferrer\">gist.github.com/jeffwolfram/cb72b4301feaf1adb55c7888ec2b3c6f</a>"}, {"owner": {"reputation": 963, "user_id": 605691, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/DJk76.png?s=128&g=1", "display_name": "Austin Pocus", "link": "https://stackoverflow.com/users/605691/austin-pocus"}, "reply_to_user": {"reputation": 15, "user_id": 3096564, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/03ce6210eb366609fd2f1579ac69dff3?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffw", "link": "https://stackoverflow.com/users/3096564/jeffw"}, "edited": false, "score": 0, "creation_date": 1466617208, "post_id": 37974724, "comment_id": 63395974, "body": "In the code you&#39;re actually running, did you write the <code>hourly_wage=</code> and <code>hours_per_week=</code> methods? Without those, the attributes won&#39;t actually be set."}, {"owner": {"reputation": 15, "user_id": 3096564, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/03ce6210eb366609fd2f1579ac69dff3?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffw", "link": "https://stackoverflow.com/users/3096564/jeffw"}, "edited": false, "score": 0, "creation_date": 1466617306, "post_id": 37974724, "comment_id": 63396034, "body": "`   hourly_employee = HourlyEmployee.new hourly_employee.name = &quot;Amy&quot; hourly_employee.hourly_wage = 14 hourly_employee.hours_per_week = 30 hourly_employee.print_pay_stub       `"}, {"owner": {"reputation": 963, "user_id": 605691, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/DJk76.png?s=128&g=1", "display_name": "Austin Pocus", "link": "https://stackoverflow.com/users/605691/austin-pocus"}, "reply_to_user": {"reputation": 15, "user_id": 3096564, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/03ce6210eb366609fd2f1579ac69dff3?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffw", "link": "https://stackoverflow.com/users/3096564/jeffw"}, "edited": false, "score": 0, "creation_date": 1466617369, "post_id": 37974724, "comment_id": 63396079, "body": "No, I see where you&#39;re <i>calling</i> the methods. But you need to <i>define</i> them. As in <code>def hourly_wage=(wage) @hourly_wage = wage end</code>"}, {"owner": {"reputation": 15, "user_id": 3096564, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/03ce6210eb366609fd2f1579ac69dff3?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffw", "link": "https://stackoverflow.com/users/3096564/jeffw"}, "edited": false, "score": 0, "creation_date": 1466617379, "post_id": 37974724, "comment_id": 63396087, "body": "sorry for some reason I can not figure out how to make it show up as code"}, {"owner": {"reputation": 963, "user_id": 605691, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/DJk76.png?s=128&g=1", "display_name": "Austin Pocus", "link": "https://stackoverflow.com/users/605691/austin-pocus"}, "reply_to_user": {"reputation": 15, "user_id": 3096564, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/03ce6210eb366609fd2f1579ac69dff3?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffw", "link": "https://stackoverflow.com/users/3096564/jeffw"}, "edited": false, "score": 0, "creation_date": 1466617424, "post_id": 37974724, "comment_id": 63396119, "body": "No worries. Sorry about the formatting on the method code -- I can make a gist (or comment on yours) if that makes it more clear."}, {"owner": {"reputation": 15, "user_id": 3096564, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/03ce6210eb366609fd2f1579ac69dff3?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffw", "link": "https://stackoverflow.com/users/3096564/jeffw"}, "edited": false, "score": 0, "creation_date": 1466617498, "post_id": 37974724, "comment_id": 63396176, "body": "You have helped me a lot. I think I know where my mistake is. I am going to try it now."}, {"owner": {"reputation": 963, "user_id": 605691, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/DJk76.png?s=128&g=1", "display_name": "Austin Pocus", "link": "https://stackoverflow.com/users/605691/austin-pocus"}, "reply_to_user": {"reputation": 15, "user_id": 3096564, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/03ce6210eb366609fd2f1579ac69dff3?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffw", "link": "https://stackoverflow.com/users/3096564/jeffw"}, "edited": false, "score": 0, "creation_date": 1466617604, "post_id": 37974724, "comment_id": 63396230, "body": "Great! Glad I could help."}], "tags": [], "owner": {"reputation": 963, "user_id": 605691, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/DJk76.png?s=128&g=1", "display_name": "Austin Pocus", "link": "https://stackoverflow.com/users/605691/austin-pocus"}, "is_accepted": true, "score": 2, "last_activity_date": 1466616691, "creation_date": 1466616691, "answer_id": 37974724, "question_id": 37974605, "link": "https://stackoverflow.com/questions/37974605/having-trouble-with-this-exercise/37974724#37974724", "title": "Having trouble with this exercise", "body": "<p>Edit: My mistake -- either <code>hourly_wage</code> or <code>hours_per_week</code> is nil. Make sure those are set.</p>\n\n<p><strike>It looks like <code>salary</code> is <code>nil</code> -- at least, that's the only line there with an <code>*</code>. You need to make sure <code>salary</code> is set</strike></p>\n\n<p>Edit: clarification</p>\n\n<p>Edit 2: correction</p>\n"}], "owner": {"reputation": 15, "user_id": 3096564, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/03ce6210eb366609fd2f1579ac69dff3?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffw", "link": "https://stackoverflow.com/users/3096564/jeffw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 37974724, "answer_count": 1, "score": -2, "last_activity_date": 1466618970, "creation_date": 1466616201, "last_edit_date": 1466618970, "question_id": 37974605, "link": "https://stackoverflow.com/questions/37974605/having-trouble-with-this-exercise", "title": "Having trouble with this exercise", "body": "<p>I am working on <em>Head First Ruby</em>. Here is my code:</p>\n\n<pre><code>class Employee\n  attr_reader :name\n\n  def name=(name)\n  end\n\n  def print_name\n    puts \"Name: #{name}\"\n  end\nend\n\nclass SalariedEmployee &lt; Employee\n  attr_reader :salary\n\n  def salary=(salary)\n    # code to validate and set @salary\n  end\n\n  def print_pay_stub\n    print_name\n    pay_for_period = (salary / 365.0) * 14\n    formatted_pay = format(\"$%.2f\", pay_for_period)\n    puts \"Pay this period: #{formatted_pay}\"\n  end\nend\n\nclass HourlyEmployee &lt; Employee\n  attr_reader :hourly_wage, :hours_per_week\n\n  def hourly_wage=(hourly_wage)\n    # code to validate and set @hourly_wage\n  end\n\n  def hours_per_week=(hours_per_week)\n    # code to validate and set @hours_per_week\n  end\n\n  def print_pay_stub\n    print_name\n    pay_for_period = hourly_wage * hours_per_week * 2\n    formatted_pay = format(\"$%.2f\", pay_for_period)\n    puts \"pay This Period: #{formatted_pay}\"\n  end\nend\n</code></pre>\n\n<p>I cannot get this exercise to work. I get this error:</p>\n\n<pre><code>employee.rb:42:in `print_pay_stub': undefined method `*' for nil:NilClass (NoMethodError)\nfrom employee.rb:56:in `&lt;main&gt;'\n</code></pre>\n\n<p>Could someone look over this code and tell what is going wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "selenium", "selenium-webdriver"], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 0, "last_activity_date": 1466618764, "creation_date": 1466618764, "answer_id": 37975317, "question_id": 37974595, "link": "https://stackoverflow.com/questions/37974595/how-to-pause-wait-for-button-to-be-not-disabled/37975317#37975317", "title": "How to pause/wait for button to be not disabled", "body": "<p>There's an <code>.empty?</code> method on Arrays.</p>\n\n<p>If you include ActiveSupport, there's a <code>.blank?</code> method which works on arrays, strings, and hashes. </p>\n\n<p>More simply you could check <code>if array.length == 0</code></p>\n"}], "owner": {"reputation": 285, "user_id": 2970050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6ebb92674288a036a7df33655b85eec0?s=128&d=identicon&r=PG&f=1", "display_name": "user2970050", "link": "https://stackoverflow.com/users/2970050/user2970050"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466655711, "creation_date": 1466616151, "last_edit_date": 1466655711, "question_id": 37974595, "link": "https://stackoverflow.com/questions/37974595/how-to-pause-wait-for-button-to-be-not-disabled", "title": "How to pause/wait for button to be not disabled", "body": "<p>With Ruby on Rails, I am running a Selenium service.  I am running through a web page many times. </p>\n\n<p>Having a bit of trouble as I need it to sometimes wait for the the 'button' to be active  (in a not disabled state).  </p>\n\n<pre><code># wait for a specific element to show up\nwait = Selenium::WebDriver::Wait.new(:timeout =&gt; 10) # seconds\nwait.until { driver.find_element(:id =&gt; \"foo\") }\n</code></pre>\n\n<p>So I am trying to use \nthe wait.until method below but can't get the syntax.  I tried this. </p>\n\n<pre><code>```\n  def css_removed_timeout(css)\n    wait = Selenium::WebDriver::Wait.new(timeout: 10)\n    wait.until { !find_css(css).displayed? }\n  end```\n</code></pre>\n\n<p>Is there anyway to detect 'not displayed'?  ( is there an 'is_empty' equivalent in Ruby)?</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1466616052, "creation_date": 1466616052, "answer_id": 37974558, "question_id": 37974498, "link": "https://stackoverflow.com/questions/37974498/filter-that-will-pass-a-message-only-if-it-contains-one-of-words-in-list/37974558#37974558", "title": "Filter that will pass a message only if it contains one of words in list", "body": "<pre><code>mywords = %w(ago time hero)\nnews = [\n  'One day bla-bla-bla',\n  'Long time ago bla-bla'\n]\nnews.select { |n| mywords.any? { |w| n =~ /\\b#{w}\\b/ } }\n#\u21d2 [\"Long time ago bla-bla\"]\n</code></pre>\n\n<p>or even better:</p>\n\n<pre><code>news.select { |n| n =~ Regexp.union(mywords) }\n#\u21d2 [\"Long time ago bla-bla\"]\n</code></pre>\n\n<p>Please note, that my answer is more robust than others two [currently posted] since it will not match the news \u201cSuperman calls back\u201d against word \u201cman\u201d.</p>\n"}, {"comments": [{"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1466616200, "post_id": 37974559, "comment_id": 63395373, "body": "Lol. It wasn&#39;t so easy give the same answer."}, {"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "reply_to_user": {"reputation": 694, "user_id": 5493147, "user_type": "registered", "accept_rate": 66, "profile_image": "https://graph.facebook.com/10207662115541894/picture?type=large", "display_name": "nobilik", "link": "https://stackoverflow.com/users/5493147/nobilik"}, "edited": false, "score": 0, "creation_date": 1466616791, "post_id": 37974559, "comment_id": 63395735, "body": "Niceee... What are the chances?! @nobilik, same answers mean good answers :)"}, {"owner": {"reputation": 694, "user_id": 5493147, "user_type": "registered", "accept_rate": 66, "profile_image": "https://graph.facebook.com/10207662115541894/picture?type=large", "display_name": "nobilik", "link": "https://stackoverflow.com/users/5493147/nobilik"}, "edited": false, "score": 0, "creation_date": 1466617030, "post_id": 37974559, "comment_id": 63395869, "body": "@Uzbekjon sorry, but mudasobwa show me my error also. but thanks a lot."}], "tags": [], "owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "is_accepted": false, "score": 1, "last_activity_date": 1466616056, "creation_date": 1466616056, "answer_id": 37974559, "question_id": 37974498, "link": "https://stackoverflow.com/questions/37974498/filter-that-will-pass-a-message-only-if-it-contains-one-of-words-in-list/37974559#37974559", "title": "Filter that will pass a message only if it contains one of words in list", "body": "<p>This would do the trick:</p>\n\n<pre><code>news.select { |item| mywords.any? { |word| item.include? word } }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 0, "last_activity_date": 1466616066, "creation_date": 1466616066, "answer_id": 37974563, "question_id": 37974498, "link": "https://stackoverflow.com/questions/37974498/filter-that-will-pass-a-message-only-if-it-contains-one-of-words-in-list/37974563#37974563", "title": "Filter that will pass a message only if it contains one of words in list", "body": "<p>In one line</p>\n\n<pre><code>news.select { |item| my_words.any? { |word| item.include? word } }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1466616369, "post_id": 37974625, "comment_id": 63395473, "body": "How this answer differs from mine, posted 5 mins ago (besides it is less ruby idiomatic)?"}, {"owner": {"reputation": 1670, "user_id": 1392229, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/083edb871ee8732be160ca6930f8b7ef?s=128&d=identicon&r=PG", "display_name": "Dawid Gos\u0142awski", "link": "https://stackoverflow.com/users/1392229/dawid-gos%c5%82awski"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1466616418, "post_id": 37974625, "comment_id": 63395503, "body": "@mudasobwa despite what you might think it&#39;s not the race :)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1466616695, "post_id": 37974625, "comment_id": 63395668, "body": "Feel free to post duplicates, it\u2019s just never appreciated here."}, {"owner": {"reputation": 1670, "user_id": 1392229, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/083edb871ee8732be160ca6930f8b7ef?s=128&d=identicon&r=PG", "display_name": "Dawid Gos\u0142awski", "link": "https://stackoverflow.com/users/1392229/dawid-gos%c5%82awski"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1466616785, "post_id": 37974625, "comment_id": 63395730, "body": "@mudasobwa hey, I entered the page and it was  EMPTY!!!!! 5 minutes is NOTHING. Do you understand that ?"}, {"owner": {"reputation": 1670, "user_id": 1392229, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/083edb871ee8732be160ca6930f8b7ef?s=128&d=identicon&r=PG", "display_name": "Dawid Gos\u0142awski", "link": "https://stackoverflow.com/users/1392229/dawid-gos%c5%82awski"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1466616848, "post_id": 37974625, "comment_id": 63395763, "body": "and yeah, I also know some people who post 1 line, then edit to 2 lines, edit to 5 lines and so on just to be first. Is not good practice either but seems to be acceptable. So just calm down and live your day."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1466618579, "post_id": 37974625, "comment_id": 63396770, "body": "Duplicate answers are time-wasters. As I was reading your answer I thought, &quot;Hey, isn&#39;t this the same as the answer I just read?&quot; (If two answers that are the same and are posted within seconds of each other, I don&#39;t treat them as duplicates, and may upvote (or down vote) both, though the author of the later answer may voluntarily delete their answer.)"}], "tags": [], "owner": {"reputation": 1670, "user_id": 1392229, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/083edb871ee8732be160ca6930f8b7ef?s=128&d=identicon&r=PG", "display_name": "Dawid Gos\u0142awski", "link": "https://stackoverflow.com/users/1392229/dawid-gos%c5%82awski"}, "is_accepted": false, "score": 0, "last_activity_date": 1466616290, "creation_date": 1466616290, "answer_id": 37974625, "question_id": 37974498, "link": "https://stackoverflow.com/questions/37974498/filter-that-will-pass-a-message-only-if-it-contains-one-of-words-in-list/37974625#37974625", "title": "Filter that will pass a message only if it contains one of words in list", "body": "<p>include does not check for words but for strings. Rather check if the news contains whole word, not part of it:</p>\n\n<pre><code>messages = []\nallowed.each do |a|\n  news.each do |n|\n    messages &lt;&lt; n if n =~ /\\b#{a}\\b/ \n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 694, "user_id": 5493147, "user_type": "registered", "accept_rate": 66, "profile_image": "https://graph.facebook.com/10207662115541894/picture?type=large", "display_name": "nobilik", "link": "https://stackoverflow.com/users/5493147/nobilik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 37974558, "answer_count": 4, "score": -1, "last_activity_date": 1466619597, "creation_date": 1466615822, "last_edit_date": 1466619597, "question_id": 37974498, "link": "https://stackoverflow.com/questions/37974498/filter-that-will-pass-a-message-only-if-it-contains-one-of-words-in-list", "title": "Filter that will pass a message only if it contains one of words in list", "body": "<p>I want to filter incoming info:</p>\n\n<pre><code>news = [\n  'One day bla-bla-bla',\n  'Long time ago bla-bla',\n]\n</code></pre>\n\n<p>and pass messages that have one of the words that I specify:</p>\n\n<pre><code>mywords = ['ago', 'time', 'hero']\n</code></pre>\n\n<p>I tried:</p>\n\n<pre><code>messages = []\nnews.each do |item|\n  mywords.each do |word|\n    if item.include?(word)\n      messages &lt;&lt; item\n      return\n    end\n  end\nend\n</code></pre>\n\n<p>What is the Rails or Ruby way to do it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "multithreading", "model-view-controller", "concurrency"], "comments": [{"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1466621873, "post_id": 37974282, "comment_id": 63398616, "body": "Configuracao.logged_in_document could be thread unsafe - depends on how you have implemented it"}, {"owner": {"reputation": 344, "user_id": 1208060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcf6cccdbca2194b2cfcf470d99096f2?s=128&d=identicon&r=PG", "display_name": "vinicius gati", "link": "https://stackoverflow.com/users/1208060/vinicius-gati"}, "reply_to_user": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1466623674, "post_id": 37974282, "comment_id": 63399557, "body": "this is just a setter/getter for a class variable."}], "answers": [{"comments": [{"owner": {"reputation": 344, "user_id": 1208060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcf6cccdbca2194b2cfcf470d99096f2?s=128&d=identicon&r=PG", "display_name": "vinicius gati", "link": "https://stackoverflow.com/users/1208060/vinicius-gati"}, "edited": false, "score": 0, "creation_date": 1466683705, "post_id": 37975932, "comment_id": 63425990, "body": "i found this <a href=\"https://github.com/steveklabnik/request_store\" rel=\"nofollow noreferrer\">github.com/steveklabnik/request_store</a> maybe it could solve this ?"}], "tags": [], "owner": {"reputation": 11166, "user_id": 847116, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/YLb4A.gif?s=128&g=1", "display_name": "jamesc", "link": "https://stackoverflow.com/users/847116/jamesc"}, "is_accepted": false, "score": 1, "last_activity_date": 1466682409, "last_edit_date": 1466682409, "creation_date": 1466620872, "answer_id": 37975932, "question_id": 37974282, "link": "https://stackoverflow.com/questions/37974282/ruby-on-rails-thread-safe-class-variable-for-webservice-access/37975932#37975932", "title": "Ruby on Rails Thread Safe Class Variable for Webservice access", "body": "<p>For thread safety you need to not use class variables.</p>\n\n<p>The session object is a cookie and therefore is specific to only one specific 'user' in one specific session if cookies are cleared out by the user after every visit. So another application accessing your site and using it as a web service will get the cookie.</p>\n\n<p>Normally in an application before filter you would log in the 'user' and set up the session with the users credentials and as such you would expect the application accessing your services to 'log in' by providing authentication credentials. This might be a good place to ensure that the seller_document is always set.</p>\n\n<p>There is no issue with multi threading here as you are not specifically forking processes.</p>\n\n<p>It is perfectly normal for a Rails application to be a web service You are doing everything that rails is intended to do without needing any special consideration over and above the normal security and development considerations needed for a standard Rails application.</p>\n"}, {"comments": [{"owner": {"reputation": 344, "user_id": 1208060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcf6cccdbca2194b2cfcf470d99096f2?s=128&d=identicon&r=PG", "display_name": "vinicius gati", "link": "https://stackoverflow.com/users/1208060/vinicius-gati"}, "edited": false, "score": 0, "creation_date": 1466626288, "post_id": 37977355, "comment_id": 63400889, "body": "the problem is , for each select on the database, i need to set an enterprise code, each table has it, its a legacy system integration... i have to set it class level in every request."}, {"owner": {"reputation": 344, "user_id": 1208060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcf6cccdbca2194b2cfcf470d99096f2?s=128&d=identicon&r=PG", "display_name": "vinicius gati", "link": "https://stackoverflow.com/users/1208060/vinicius-gati"}, "edited": false, "score": 0, "creation_date": 1466688030, "post_id": 37977355, "comment_id": 63429283, "body": "i found this github.com/steveklabnik/request_store maybe it could solve this ? its close from your solution, maybe it is even a better approach?"}], "tags": [], "owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "is_accepted": true, "score": 1, "last_activity_date": 1466626168, "creation_date": 1466626168, "answer_id": 37977355, "question_id": 37974282, "link": "https://stackoverflow.com/questions/37974282/ruby-on-rails-thread-safe-class-variable-for-webservice-access/37977355#37977355", "title": "Ruby on Rails Thread Safe Class Variable for Webservice access", "body": "<p>Using a class variable in this manner is not threadsafe. You could use a thread local (ie <code>Thread.current[:some_key])</code> , but in general this feels like a design smell to me. </p>\n"}], "owner": {"reputation": 344, "user_id": 1208060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcf6cccdbca2194b2cfcf470d99096f2?s=128&d=identicon&r=PG", "display_name": "vinicius gati", "link": "https://stackoverflow.com/users/1208060/vinicius-gati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 0, "accepted_answer_id": 37977355, "answer_count": 2, "score": 1, "last_activity_date": 1466682409, "creation_date": 1466614937, "question_id": 37974282, "link": "https://stackoverflow.com/questions/37974282/ruby-on-rails-thread-safe-class-variable-for-webservice-access", "title": "Ruby on Rails Thread Safe Class Variable for Webservice access", "body": "<p>I have a system where, depending on the logged in user i need to set some class variables because the database table names changes for each one, and the key to communicate with the webserver changes to, it is the user document.</p>\n\n<p>I user class variables, like globals, is it thread safe? any chance to save things on the wrong place with many users using the system?</p>\n\n<p>I just set the key on the session and fill the Configuracao class</p>\n\n<pre><code>def set_variables\n    if current_usuario\n        session[:seller_document] ||= current_usuario.documento\n        Configuracao.logged_in_document = current_usuario.documento\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby", "process", "stdout"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1466616452, "post_id": 37974276, "comment_id": 63395521, "body": "It&#39;s difficult to tell what you&#39;re trying to do based on your code and example output. If you&#39;re piping output from one script to another, you might want to look at using the built-in <code>grep</code> tool, which is part of *nix. (We can&#39;t tell what OS you&#39;re on.) Something like <code>foo | grep -v &#39;oops&#39; | bar</code> is very standard. Wanting to do it all in a particular language is nice, but there&#39;s a HUGE amount of useful code that&#39;s prewritten and available to you in the OS, so it&#39;s worth your time to take advantage of it and write code that hasn&#39;t been invented already."}, {"owner": {"reputation": 2689, "user_id": 1134991, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/e102cb584a0fba3cd07b0a4d79350ba2?s=128&d=identicon&r=PG", "display_name": "user1134991", "link": "https://stackoverflow.com/users/1134991/user1134991"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1466616678, "post_id": 37974276, "comment_id": 63395660, "body": "True. The thing is that I want the lines filtered printed to a different file. Also, there are cases when filtering a line depends on what was printed in the preceding line..."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1466617322, "post_id": 37974276, "comment_id": 63396043, "body": "Then that information needs to be in your question, not a comment, and you need to show how you tried to solve those problems."}], "owner": {"reputation": 2689, "user_id": 1134991, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/e102cb584a0fba3cd07b0a4d79350ba2?s=128&d=identicon&r=PG", "display_name": "user1134991", "link": "https://stackoverflow.com/users/1134991/user1134991"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1466616155, "creation_date": 1466614922, "last_edit_date": 1466616155, "question_id": 37974276, "link": "https://stackoverflow.com/questions/37974276/filter-lines-in-ongoing-process-using-ruby", "title": "Filter lines in ongoing process, using Ruby", "body": "<p>I have an EDA vendor SW1, which outputs STDOUT information to a different EDA vendor SW2. The SW2 prints out in a GUI, as the run continues.</p>\n\n<p>I need some way of filtering out certain things, from  STDOUT, in \"real time\", instead of getting lines:</p>\n\n<pre><code>hey now\noops\nhello\n</code></pre>\n\n<p>I will get:</p>\n\n<pre><code>hey now\nhello\n</code></pre>\n\n<p>I tried to use:</p>\n\n<pre><code>Popen3.popen2e( 'run_eda', 'script name' ){ |i,o,t|\n...\n}\n</code></pre>\n\n<p>And using timeout when reading <code>o</code>, and timeout when trying to run <code>t.value()</code>\nI get nothing in pipe <code>o</code>, but the run completes well.</p>\n\n<p>I looked at other answers here, but they don't handle STDERR, as far as I know.</p>\n\n<p>Any recomendations?</p>\n"}, {"tags": ["ruby", "text", "web-scraping"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1466616538, "post_id": 37974236, "comment_id": 63395581, "body": "Your question  is asking for us to recommend solutions, which is off-topic. &quot;Questions asking us to recommend or find a book, tool, software library, tutorial or other off-site resource are off-topic for Stack Overflow as they tend to attract opinionated answers and spam. Instead, <a href=\"http://meta.stackoverflow.com/questions/254393\">describe the problem</a> and what has been done so far to solve it.&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 369, "user_id": 3997439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L7TFV.png?s=128&g=1", "display_name": "plombix", "link": "https://stackoverflow.com/users/3997439/plombix"}, "is_accepted": false, "score": -1, "last_activity_date": 1466615063, "creation_date": 1466615063, "answer_id": 37974329, "question_id": 37974236, "link": "https://stackoverflow.com/questions/37974236/fill-in-a-text-box-on-a-website-with-ruby/37974329#37974329", "title": "Fill in a Text Box on a Website with Ruby", "body": "<p>You 'll have to use a test gem , some to fill form inputs .\nLike <a href=\"https://github.com/jnicklas/capybara\" rel=\"nofollow\">\"capybara\"</a></p>\n\n<p>The documentation is a bit exhaustive , but it's a powerfull tool </p>\n"}, {"tags": [], "owner": {"reputation": 1499, "user_id": 209557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0741fe85201c947ecc2cf6180a1d28bc?s=128&d=identicon&r=PG", "display_name": "smileart", "link": "https://stackoverflow.com/users/209557/smileart"}, "is_accepted": true, "score": 2, "last_activity_date": 1466761051, "last_edit_date": 1466761051, "creation_date": 1466676526, "answer_id": 37988566, "question_id": 37974236, "link": "https://stackoverflow.com/questions/37974236/fill-in-a-text-box-on-a-website-with-ruby/37988566#37988566", "title": "Fill in a Text Box on a Website with Ruby", "body": "<p>You should probably try <a href=\"https://github.com/sparklemotion/mechanize\" rel=\"nofollow\">mechanize</a> gem which allows you to do this:</p>\n\n<pre><code>require 'mechanize'\n\nagent = Mechanize.new\npage  = agent.get('http://google.com/')\n\nform = page.forms.first\nform['field_name_1'] = input1\nform['field_name_2'] = input2\n\npage = agent.submit(form, form.buttons.first)\nputs page\n</code></pre>\n\n<p>It's quite easy to use and very intuitive. Here is the <a href=\"http://docs.seattlerb.org/mechanize/\" rel=\"nofollow\">documentation</a> with <a href=\"http://docs.seattlerb.org/mechanize/GUIDE_rdoc.html\" rel=\"nofollow\">more</a> <a href=\"http://docs.seattlerb.org/mechanize/EXAMPLES_rdoc.html\" rel=\"nofollow\">examples</a>.</p>\n\n<p>Or you can use Developer tools of your choice in your favorite browser to record and inspect the HTTP request after that form submission and then use standard <a href=\"http://ruby-doc.org/stdlib-2.3.1/libdoc/net/http/rdoc/Net/HTTP.html\" rel=\"nofollow\">HTTP Client</a> to send a direct request to the site (form action) with all the POST request data prepared (instead of feeling a form).</p>\n\n<p>If you are going to scrap a lot of data I would suggest using something like <a href=\"https://github.com/igrigorik/em-http-request\" rel=\"nofollow\">em-http-request</a> to do it asynchronously.</p>\n"}], "owner": {"reputation": 45, "user_id": 4603984, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/67318449df619b1505afc2eccc23d777?s=128&d=identicon&r=PG", "display_name": "zcmckenna", "link": "https://stackoverflow.com/users/4603984/zcmckenna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 541, "favorite_count": 0, "accepted_answer_id": 37988566, "answer_count": 2, "score": 0, "last_activity_date": 1466761051, "creation_date": 1466614774, "question_id": 37974236, "link": "https://stackoverflow.com/questions/37974236/fill-in-a-text-box-on-a-website-with-ruby", "title": "Fill in a Text Box on a Website with Ruby", "body": "<p>I was wondering if there was a way or a library that could fill in a text box on a website that Ruby connects to. I am working on a web-scraping application that pulls a table from a website... Here is the text box I am referring to:</p>\n\n<p><img src=\"https://i.imgur.com/yeXOnkk.png?1\" alt=\"The text box\"></p>\n\n<p>Is there an easy way to do this or a library I could use?</p>\n\n<p>(All the different pages of data are in one url so I can't use a different url to do this).</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "min"], "comments": [{"owner": {"reputation": 1835, "user_id": 4985645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMblv.png?s=128&g=1", "display_name": "Vishal JAIN", "link": "https://stackoverflow.com/users/4985645/vishal-jain"}, "edited": false, "score": 0, "creation_date": 1466615115, "post_id": 37974121, "comment_id": 63394764, "body": "hey you can try this way by using mysql group <code>Userprofile.joins(:uprograms).group(:userprofile_id).select(&zwnj;&#8203;&quot;user_profile.*,min(&zwnj;&#8203;program_year) as member_since&quot;)</code>"}, {"owner": {"reputation": 326, "user_id": 4954795, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/9d5a6a4729a786805054a118296d8bc5?s=128&d=identicon&r=PG&f=1", "display_name": "teresa", "link": "https://stackoverflow.com/users/4954795/teresa"}, "reply_to_user": {"reputation": 1835, "user_id": 4985645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMblv.png?s=128&g=1", "display_name": "Vishal JAIN", "link": "https://stackoverflow.com/users/4985645/vishal-jain"}, "edited": false, "score": 0, "creation_date": 1466615724, "post_id": 37974121, "comment_id": 63395104, "body": "@VishalJAIN hey, I&#39;m not sure if I understand this fully. The code joins the programs and userprofile table by id? Then it returns the min of program_year based on userprofile as member_since? Does it belongs in the members_controller and stored in a variable? Then displayed in view? Sorry for having so many questions.."}], "answers": [{"comments": [{"owner": {"reputation": 326, "user_id": 4954795, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/9d5a6a4729a786805054a118296d8bc5?s=128&d=identicon&r=PG&f=1", "display_name": "teresa", "link": "https://stackoverflow.com/users/4954795/teresa"}, "edited": false, "score": 0, "creation_date": 1466699720, "post_id": 37976455, "comment_id": 63438107, "body": "Actually, I just noticed..the <code>current_user.userprofile.id</code> gives me the earliest <code>program_year</code> of the current_user..and it&#39;s displaying that year for all users which is incorrect.   I was able to use: <code>@member_since = Uprogram.where(:userprofile_id =&gt; f.id).minimum(:program_year)</code> But it is used in the view."}], "tags": [], "owner": {"reputation": 116, "user_id": 6443001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t64Bn.png?s=128&g=1", "display_name": "&#201;ric C&#244;t&#233;", "link": "https://stackoverflow.com/users/6443001/%c3%89ric-c%c3%b4t%c3%a9"}, "is_accepted": false, "score": 1, "last_activity_date": 1466622760, "creation_date": 1466622760, "answer_id": 37976455, "question_id": 37974121, "link": "https://stackoverflow.com/questions/37974121/rails-how-to-display-the-earliest-year-value-of-the-programs-that-the-user-bel/37976455#37976455", "title": "Rails how to display the earliest year (value) of the programs that the user belongs to?", "body": "<p>Couple of ideas:</p>\n\n<p>1- This will get you only the earliest <code>program_year</code> among all the user programs:</p>\n\n<pre><code>Uprogram.where(userprofile_id: current_user.userprofile.id).order(: program_year).limit(1).pluck(:program_year).first\n</code></pre>\n\n<p>2- This will give you the earliest <code>Uprogram</code> object:</p>\n\n<pre><code>current_user.userprofile.programs.order(:program_year).limit(1).first\n</code></pre>\n"}], "owner": {"reputation": 326, "user_id": 4954795, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/9d5a6a4729a786805054a118296d8bc5?s=128&d=identicon&r=PG&f=1", "display_name": "teresa", "link": "https://stackoverflow.com/users/4954795/teresa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466622760, "creation_date": 1466614386, "last_edit_date": 1495535644, "question_id": 37974121, "link": "https://stackoverflow.com/questions/37974121/rails-how-to-display-the-earliest-year-value-of-the-programs-that-the-user-bel", "title": "Rails how to display the earliest year (value) of the programs that the user belongs to?", "body": "<p>I have a <code>program</code> table that <code>belongs_to userprofile</code> and <code>userprofile</code> table that <code>has_many programs</code>. The program has a program_year column and I wanted to display just the earliest year (value in that program_year) out of the programs if the user has multiple programs that he/she belongs to.</p>\n\n<p>I have looked for similar questions and answers (<a href=\"https://stackoverflow.com/questions/28091778/how-to-get-earliest-and-latest-dates-for-associated-objects\">How to get earliest and latest dates for associated objects</a>). But can't seem to get my display working properly. </p>\n\n<p>Having trouble understanding how to get the minimum program_year from programs for each userprofile. The code I have now..just gives me the minimum program_year of the current user and since it is in a loop. It displays the year x amount of times. </p>\n\n<p>members_controller.rb</p>\n\n<pre><code>def index\n\n  @userprofiles  = Userprofile.all\n  # the use of current_user is incorrect..\n  @member_program = Uprogram.where(:userprofile_id =&gt; current_user.userprofile.id).all \n  @member_since = @member_program.min\n\nend\n</code></pre>\n\n<p>index.html.erb </p>\n\n<pre><code>&lt;% f.uprograms.each do |program| %&gt;\n  &lt;% if program.present? %&gt;\n    &lt;!-- just want to display the lowest program_year value) \n    Member since: &lt;%= program.program_year %&gt;\n    &lt;%= @member_since.program_year %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt; \n</code></pre>\n\n<p>Any insight would help! Thank you. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "object", "input", "properties"], "comments": [{"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1466615074, "post_id": 37974000, "comment_id": 63394745, "body": "First of all, you must notice that <code>matrix</code>, <code>blue</code>, <code>fit</code>, <code>silver</code>, <code>volvo</code>... all these parameters should be strings (&#39;matrix&#39;) or symbols (:matrix). The way it is now your definition of matrix, for instance, depends on itself in a cyclic dependency."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1466615893, "post_id": 37974000, "comment_id": 63395187, "body": "Welcome to Stack Overflow. I&#39;d recommend reading &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; including the linked pages, especially the long but very useful <a href=\"http://catb.org/esr/faqs/smart-questions.html\" rel=\"nofollow noreferrer\">catb.org/esr/faqs/smart-questions.html</a>. We don&#39;t care if you&#39;re new, we want well-asked questions."}], "answers": [{"comments": [{"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1466616928, "post_id": 37974376, "comment_id": 63395820, "body": "In this case, to have a complete response, you should show the OP how to create a model <code>Car</code>. If you run the code as you showed the OP you&#39;d get <code>cars.rb:8:in </code>&lt;main&gt;&#39;: uninitialized constant Car (NameError)<code>, because Ruby won&#39;t recognize any object named </code>Car` unless you previously defined it somewhere."}], "tags": [], "owner": {"reputation": 1254, "user_id": 4576274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5Wnd.jpg?s=128&g=1", "display_name": "Pramod", "link": "https://stackoverflow.com/users/4576274/pramod"}, "is_accepted": false, "score": 0, "last_activity_date": 1466615604, "last_edit_date": 1466615604, "creation_date": 1466615286, "answer_id": 37974376, "question_id": 37974000, "link": "https://stackoverflow.com/questions/37974000/how-to-match-user-input-with-object-properties/37974376#37974376", "title": "How to match user input with object properties", "body": "<p>First of all, You should pass parameters as <code>String</code> to create object.</p>\n\n<ul>\n<li><code>matrix = Car.new('matrix', 'blue', 4)</code></li>\n<li><code>fit = Car.new('fit', 'silver', 2)</code></li>\n<li><code>volvo = Car.new('volvo', 'silver', 4)</code></li>\n</ul>\n\n<p>Code to produce desired output would be similar to what you wrote.</p>\n\n<pre><code>       (0...cars.length).each do |x|\n         if response == cars[x].color\n            puts \"We have #{cars[x].model} available\"\n         end\n       end\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1466617018, "post_id": 37974479, "comment_id": 63395862, "body": "In this case, to have a complete response, you should show the OP how to create a model Car. If you run the code as you showed the OP you&#39;d get cars.rb:8:in &lt;main&gt;&#39;: uninitialized constant Car (NameError), because Ruby won&#39;t recognize any object named Car` unless you previously defined it somewhere. The OP said he is a noob, then it is better not to assume he knows how to create the Car instances, don&#39;t you think?"}], "tags": [], "owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "is_accepted": false, "score": 2, "last_activity_date": 1466615716, "creation_date": 1466615716, "answer_id": 37974479, "question_id": 37974000, "link": "https://stackoverflow.com/questions/37974000/how-to-match-user-input-with-object-properties/37974479#37974479", "title": "How to match user input with object properties", "body": "<p>Assuming you create your <code>Car</code> instances correctly:</p>\n\n<pre><code>matrix = Car.new(:matrix, :blue, 4)\n</code></pre>\n\n<p>You can then use <code>Array#any?</code> method to check if any element of an array evaluates to true:</p>\n\n<pre><code>cars.any? { |car| car.color.to_s == response }\n# returns true or false\n</code></pre>\n\n<p>So, your code would become:</p>\n\n<pre><code>puts \"We have #{cars[x].model} available\" if cars.any? { |car| car.color.to_s == response }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "is_accepted": false, "score": 0, "last_activity_date": 1466617278, "last_edit_date": 1466617278, "creation_date": 1466616344, "answer_id": 37974641, "question_id": 37974000, "link": "https://stackoverflow.com/questions/37974000/how-to-match-user-input-with-object-properties/37974641#37974641", "title": "How to match user input with object properties", "body": "<p>First let's make clear that these parameters (<code>matrix</code>, <code>blue</code> etc) must be strings or symbols. The way it is they are variables and, as they weren't previously defined them, you'll get some <code>Undefined variable XXX</code> errors for your code.</p>\n\n<p>Besides, when you write something like:</p>\n\n<pre><code>matrix = Car.new( matrix, blue, 4)\n</code></pre>\n\n<p>your have a cyclic definition, since the <code>matrix</code> being defined outside depends on a previous definition of <code>matrix</code> inside.</p>\n\n<p>Your code should be something like:</p>\n\n<pre><code>cars = [ { model: 'matrix', color: 'blue', doors: 4}, {model: 'fit', color: 'silver', doors: 2}, { model: 'volvo', color: 'silver', doors: 4} ]\n\nputs \"What color car do you want?\"\nresponse = gets.chomp\n\ncars.each{ |car| puts \"We have #{car[:model]} available\" if car[:color] == response }\n</code></pre>\n\n<p>Notice that you don't need to assign a name for each car available. This would be impossible if the available cars were read from a large database, while in this solution above (with an array of hashes to store cars' data) this wouldn't be a problem. </p>\n\n<p>This leads to a 'big picture advise': <strong>Don't ever think about hardcoding things that may change.</strong></p>\n\n<p>In this case, if you ever think about a real application based on this code, how would you maintain your cars updated, having to manually insert each new car and, worst of all, find a different name for the instance of it?</p>\n\n<p>This way I presented above, if your cars are read from a database you'll just write something like:</p>\n\n<pre><code>cars = get_cars_data\n</code></pre>\n\n<p>where get_cars_data is a method to read the database. The only requirement is that this method returns each car as a hash with <code>:model</code>, <code>:color</code> and <code>:doors</code> keys.</p>\n"}], "owner": {"reputation": 5, "user_id": 6500298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a670bd8c7126320e5c191fe05c80dc2a?s=128&d=identicon&r=PG&f=1", "display_name": "old_dog_new_tricks", "link": "https://stackoverflow.com/users/6500298/old-dog-new-tricks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1466617278, "creation_date": 1466613996, "last_edit_date": 1466615685, "question_id": 37974000, "link": "https://stackoverflow.com/questions/37974000/how-to-match-user-input-with-object-properties", "title": "How to match user input with object properties", "body": "<p>I have given some objects various properties. And then I want to display the objects with properties that match user input:</p>\n\n<pre><code>Car = Struct.new( :model, :color, :number_doors)\n\nmatrix = Car.new( matrix, blue, 4)\nfit = Car.new( fit, silver, 2)\nvolvo = Car.new( volvo, silver, 4)\n\ncars = [matrix, fit, volvo]\n\nputs \"What color car do you want?\"\nresponse = gets.chomp\n\n# something like \n# if response == cars[X].color\n# puts \"We have #{cars[X].model} available\n</code></pre>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "sqlite", "rails-migrations"], "comments": [{"owner": {"reputation": 1835, "user_id": 4985645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMblv.png?s=128&g=1", "display_name": "Vishal JAIN", "link": "https://stackoverflow.com/users/4985645/vishal-jain"}, "edited": false, "score": 0, "creation_date": 1466615413, "post_id": 37973988, "comment_id": 63394927, "body": "if data is less then just do this way <code>Pizza.each{|p| Pizza.create!(:mystry_id =&gt; 2, :name =&gt; p.name, :description =&gt; p.description )}</code>"}], "answers": [{"comments": [{"owner": {"reputation": 861, "user_id": 3966009, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/lynj8.png?s=128&g=1", "display_name": "Samuel Thompson", "link": "https://stackoverflow.com/users/3966009/samuel-thompson"}, "edited": false, "score": 0, "creation_date": 1466624464, "post_id": 37974657, "comment_id": 63399933, "body": "the problem with this is that my database is not empty it is quite full. so i cannot use a seed, that is if seeds work like i think they do. i could use a script, but that is kinda a pain."}, {"owner": {"reputation": 772, "user_id": 2957138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab451aa640d9cd3b7931489557ce3aa7?s=128&d=identicon&r=PG", "display_name": "TheZanke", "link": "https://stackoverflow.com/users/2957138/thezanke"}, "reply_to_user": {"reputation": 861, "user_id": 3966009, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/lynj8.png?s=128&g=1", "display_name": "Samuel Thompson", "link": "https://stackoverflow.com/users/3966009/samuel-thompson"}, "edited": false, "score": 0, "creation_date": 1466626868, "post_id": 37974657, "comment_id": 63401165, "body": "That bottom part should be able to do what you were asking without requiring you to have an empty database. You can either paste it into rails console or use it as a script! Hope it helps!"}], "tags": [], "owner": {"reputation": 772, "user_id": 2957138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab451aa640d9cd3b7931489557ce3aa7?s=128&d=identicon&r=PG", "display_name": "TheZanke", "link": "https://stackoverflow.com/users/2957138/thezanke"}, "is_accepted": false, "score": 4, "last_activity_date": 1466626904, "last_edit_date": 1466626904, "creation_date": 1466616424, "answer_id": 37974657, "question_id": 37973988, "link": "https://stackoverflow.com/questions/37973988/copy-rails-table-with-changed-data-in-migrations/37974657#37974657", "title": "copy rails table with changed data in migrations", "body": "<p>Migrations aren't the right thing to use here. Migrations are for adjusting the database structure; they're not for inserting, deleting, or modifying records.</p>\n\n<p>You'll probably want to either use seeds.db (for seeding your database with initial data) OR just perform the operation in rails console or a standalone script.</p>\n\n<p><strong>For using seeds.db:</strong></p>\n\n<p>Starting with an empty pizza database and assuming your <code>Pizza</code> model contains <code>belongs_to :mystery</code></p>\n\n<pre><code>Mystery.create({ /* mystery params */ }) // Create mystery 1\nMystery.create({ /* mystery params */ }) // Create mystery 2\n\npizza_data = [\n  { name: 'fun', description: 'really fun' },\n  { name: 'car', description: 'it is fast' },\n  { name: 'hou', description: 'i live!' },\n  { name: 'air', description: 'breathy' },\n]\n\nMystery.all.each do |mystery|\n  pizza_data.each do |pizza_params|\n    mystery.pizza.create(pizza_params)\n  end\nend\n</code></pre>\n\n<p>and then in terminal you want to run <code>bundle exec rake db:seed</code></p>\n\n<p>(see <a href=\"http://www.xyzpub.com/en/ruby-on-rails/3.2/seed_rb.html\" rel=\"nofollow\">http://www.xyzpub.com/en/ruby-on-rails/3.2/seed_rb.html</a> for more info on seeds.rb)</p>\n\n<p><strong>For using rails console / script:</strong></p>\n\n<p>If you want to do it manually using rails console with your pre-existing pizza rows type <code>rails c</code> in terminal and enter:</p>\n\n<pre><code>Pizza.all.each { |p| Pizza.create(mystery_id: 2, name: p.name, description: p.description) }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 407, "user_id": 122002, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/7316779331b6839d320d9b2cacc0c734?s=128&d=identicon&r=PG", "display_name": "Dawson Goodell", "link": "https://stackoverflow.com/users/122002/dawson-goodell"}, "edited": false, "score": 1, "creation_date": 1466618300, "post_id": 37974947, "comment_id": 63396626, "body": "It&#39;s important to keep Models out of your migrations.  If the model changes this migration could also fail.  Consider using seeds or a dedicated script."}, {"owner": {"reputation": 861, "user_id": 3966009, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/lynj8.png?s=128&g=1", "display_name": "Samuel Thompson", "link": "https://stackoverflow.com/users/3966009/samuel-thompson"}, "reply_to_user": {"reputation": 407, "user_id": 122002, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/7316779331b6839d320d9b2cacc0c734?s=128&d=identicon&r=PG", "display_name": "Dawson Goodell", "link": "https://stackoverflow.com/users/122002/dawson-goodell"}, "edited": false, "score": 0, "creation_date": 1466624046, "post_id": 37974947, "comment_id": 63399724, "body": "but if the model changes the dedicated script will also fail.  is there a way to say      foo = foo.new(a.everything_in_a, :mystery_id =&gt; 2           )"}], "tags": [], "owner": {"reputation": 861, "user_id": 3966009, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/lynj8.png?s=128&g=1", "display_name": "Samuel Thompson", "link": "https://stackoverflow.com/users/3966009/samuel-thompson"}, "is_accepted": true, "score": -1, "last_activity_date": 1466624543, "last_edit_date": 1466624543, "creation_date": 1466617467, "answer_id": 37974947, "question_id": 37973988, "link": "https://stackoverflow.com/questions/37973988/copy-rails-table-with-changed-data-in-migrations/37974947#37974947", "title": "copy rails table with changed data in migrations", "body": "<p>I used a bit of the stack overflow question I noted, and this is what i came up with. I did end up using migrations though, and it worked fine.</p>\n\n<pre><code>def up        \n    Foo.find_each do |a|\n      a.mystery_id = 1\n      a.save!\n    end\n\n    Foo.all.each do |a|\n      foo = foo.new(\n        :name =&gt; a.name,\n        :name =&gt; a.description,\n        :mystery_id =&gt; 2\n      )\n      reminderEvent.save!\n    end\n  end\n\n  def down\n\n    TODO: somehow remove half all with mystery_id = 2\n  end\n</code></pre>\n"}], "owner": {"reputation": 861, "user_id": 3966009, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/lynj8.png?s=128&g=1", "display_name": "Samuel Thompson", "link": "https://stackoverflow.com/users/3966009/samuel-thompson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "accepted_answer_id": 37974947, "answer_count": 2, "score": 0, "last_activity_date": 1466626904, "creation_date": 1466613960, "last_edit_date": 1495541769, "question_id": 37973988, "link": "https://stackoverflow.com/questions/37973988/copy-rails-table-with-changed-data-in-migrations", "title": "copy rails table with changed data in migrations", "body": "<p>I have a table Pizza linked to mystery that currently looks like this</p>\n\n<pre><code>|pizza_id|mystery_id|name|description|\n|1       |1         |fun |really fun |\n|2       |1         |car |it is fast |\n|3       |1         |hou |i live!    |\n|4       |1         |air |breathy    |\n</code></pre>\n\n<p>and after my migration I would like it to look like this:</p>\n\n<pre><code>|pizza_id|mystery_id|name|description|\n|1       |1         |fun |really fun |\n|2       |1         |car |it is fast |\n|3       |1         |hou |i live!    |\n|4       |1         |air |breathy    |\n|5       |2         |fun |really fun |\n|6       |2         |car |it is fast |\n|7       |2         |hou |i live!    |\n|8       |2         |air |breathy    |\n</code></pre>\n\n<p>Basically i just want to copy the table's data, and paste it back into the same table, but slightly different. To make matters worse, I SUCK at ruby on rails.</p>\n\n<p>I tried, but I just cant figure out the syntax to copy a table, then paste a table back with changed data. To make matters worse my test site is in sqlite, and my production server is in MYSQL. So I cannot just write one or the other it has to use ruby migration syntax.</p>\n\n<p>This <a href=\"https://stackoverflow.com/questions/28089441/how-can-i-move-data-from-one-table-to-another-in-rails-migration\" title=\"stack overflow question\">stackoverflow question</a> looks helpful, but it is copying into another table, and it uses just ruby not ruby migrations is that legal in a migration? Any help would be appreciated.</p>\n"}, {"tags": ["ruby", "date"], "comments": [{"owner": {"reputation": 3621, "user_id": 6188402, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a8bdb7cbe81f5544f0ddc6ded12a23f1?s=128&d=identicon&r=PG&f=1", "display_name": "Washington Guedes", "link": "https://stackoverflow.com/users/6188402/washington-guedes"}, "edited": false, "score": 0, "creation_date": 1466613450, "post_id": 37973701, "comment_id": 63393740, "body": "I&#39;m not sure, but maybe <code>[date.wday, 7].detect { i != 0 }</code>"}, {"owner": {"reputation": 28753, "user_id": 371184, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cebee1b08fb960edf79a359af330391a?s=128&d=identicon&r=PG", "display_name": "Mike Cluck", "link": "https://stackoverflow.com/users/371184/mike-cluck"}, "edited": false, "score": 1, "creation_date": 1466613920, "post_id": 37973701, "comment_id": 63394016, "body": "Given that <a href=\"http://stackoverflow.com/questions/10387515/why-treat-0-as-true-in-ruby\">0 is not falsey in Ruby</a> it&#39;s logically impossible to get what you want. You would have to perform at least one comparison before using the value."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 6, "creation_date": 1466614305, "post_id": 37973701, "comment_id": 63394234, "body": "Regarding your <a href=\"http://stackoverflow.com/revisions/37973701/1\">original question</a>: just use <code>cwday</code> (instead of <code>wday</code>) \u2013 it returns <code>7</code> (instead of <code>0</code>) if the date is a Sunday ;-)"}, {"owner": {"reputation": 793, "user_id": 1810183, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/aD21S.jpg?s=128&g=1", "display_name": "victorf", "link": "https://stackoverflow.com/users/1810183/victorf"}, "edited": false, "score": 0, "creation_date": 1466616545, "post_id": 37973701, "comment_id": 63395583, "body": "wait... Must you use a Date method like <code>wday</code> or not?"}, {"owner": {"reputation": 1837, "user_id": 2190425, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/24ca4182ce692ec73ef35a86f268c802?s=128&d=identicon&r=PG", "display_name": "Aurimas", "link": "https://stackoverflow.com/users/2190425/aurimas"}, "edited": false, "score": 0, "creation_date": 1466616898, "post_id": 37973701, "comment_id": 63395794, "body": "I had to convert to datetime first, but <code>cwday</code> solved my case."}, {"owner": {"reputation": 793, "user_id": 1810183, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/aD21S.jpg?s=128&g=1", "display_name": "victorf", "link": "https://stackoverflow.com/users/1810183/victorf"}, "edited": false, "score": 0, "creation_date": 1466797367, "post_id": 37973701, "comment_id": 63483735, "body": "come on @Aurimas isn&#39;t there any chance to choose my answer? :D"}], "answers": [{"comments": [{"owner": {"reputation": 1837, "user_id": 2190425, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/24ca4182ce692ec73ef35a86f268c802?s=128&d=identicon&r=PG", "display_name": "Aurimas", "link": "https://stackoverflow.com/users/2190425/aurimas"}, "edited": false, "score": 1, "creation_date": 1466613570, "post_id": 37973828, "comment_id": 63393798, "body": "That I could figure out by myself, any better versions? I edited the question to be just Ruby, not Rails"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4776684"}, "reply_to_user": {"reputation": 1837, "user_id": 2190425, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/24ca4182ce692ec73ef35a86f268c802?s=128&d=identicon&r=PG", "display_name": "Aurimas", "link": "https://stackoverflow.com/users/2190425/aurimas"}, "edited": false, "score": 0, "creation_date": 1466613808, "post_id": 37973828, "comment_id": 63393945, "body": "Ruby does not treat 0 as nil/false. It is one of the things you have to get used to. A better way would be to add your custom method to the Date class. You can find an example here: <a href=\"http://stackoverflow.com/questions/12343555/ruby-extend-date-class-to-add-new-method\" title=\"ruby extend date class to add new method\">stackoverflow.com/questions/12343555/&hellip;</a>"}, {"owner": {"reputation": 449, "user_id": 6441528, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eKXj0.png?s=128&g=1", "display_name": "hightempo", "link": "https://stackoverflow.com/users/6441528/hightempo"}, "edited": false, "score": 0, "creation_date": 1466614309, "post_id": 37973828, "comment_id": 63394236, "body": "0 evaluating to true is just part of the language.  It&#39;s intentional.  See, for example: <a href=\"http://stackoverflow.com/a/10387572/6441528\">stackoverflow.com/a/10387572/6441528</a> .  If you want an exception, you should do something like build a utility class that provides one.  I personally wouldn&#39;t override Date, at least not if you&#39;re working collaboratively.  It&#39;ll just confuse anyone who shares your code."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4776684"}, "reply_to_user": {"reputation": 449, "user_id": 6441528, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eKXj0.png?s=128&g=1", "display_name": "hightempo", "link": "https://stackoverflow.com/users/6441528/hightempo"}, "edited": false, "score": 0, "creation_date": 1466614582, "post_id": 37973828, "comment_id": 63394438, "body": "@hightempo: Who said something about overriding? I said, &quot;create your custom method&quot;."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4776684"}, "reply_to_user": {"reputation": 1837, "user_id": 2190425, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/24ca4182ce692ec73ef35a86f268c802?s=128&d=identicon&r=PG", "display_name": "Aurimas", "link": "https://stackoverflow.com/users/2190425/aurimas"}, "edited": false, "score": 1, "creation_date": 1466615380, "post_id": 37973828, "comment_id": 63394908, "body": "@Aurimas: I don&#39;t know if you could figure out about ternary operator by yourself, considering that you could not figure out that 0 in Ruby is not nil/false, which should be the case for operator-|| usage."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1466615482, "post_id": 37973828, "comment_id": 63394975, "body": "While I would use <code>cwday</code>, I think this is a close second. I have no idea why it was downvoted, unless it was by the OP, who found it insulting."}, {"owner": {"reputation": 1837, "user_id": 2190425, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/24ca4182ce692ec73ef35a86f268c802?s=128&d=identicon&r=PG", "display_name": "Aurimas", "link": "https://stackoverflow.com/users/2190425/aurimas"}, "edited": false, "score": 0, "creation_date": 1466616308, "post_id": 37973828, "comment_id": 63395446, "body": "@gen, I knew 0 is not false in Ruby before I asked, I actually had used your answer before asking the question. The problem is when the variable in question has very long name. In my case the rest of the line was already complicated enough so I couldn&#39;t make it even less readable."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4776684"}, "reply_to_user": {"reputation": 1837, "user_id": 2190425, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/24ca4182ce692ec73ef35a86f268c802?s=128&d=identicon&r=PG", "display_name": "Aurimas", "link": "https://stackoverflow.com/users/2190425/aurimas"}, "edited": false, "score": 0, "creation_date": 1466617578, "post_id": 37973828, "comment_id": 63396211, "body": "@Aurimas: A long name should not be an issue. If you have a long name, create an alias with a short name and be done with it. Or create a custom method that does what you want (or use another API method, such as cwday). There is no need to expect a functionality from another language to be in a new language. Beside, I think even the creator of JS has said that decision of making 0 to be false was a bad idea. The semantics of || is &quot;false/nill or else&quot;, and 0 is neither."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4776684"}, "is_accepted": false, "score": 2, "last_activity_date": 1466613482, "creation_date": 1466613482, "answer_id": 37973828, "question_id": 37973701, "link": "https://stackoverflow.com/questions/37973701/ruby-equivalent-to-javascript-operator/37973828#37973828", "title": "Ruby equivalent to JavaScript operator `||`", "body": "<p>You can use ternary operator:</p>\n\n<pre><code> date.wday == 0 ? 7 : date.wday\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4776684"}, "edited": false, "score": 0, "creation_date": 1466614363, "post_id": 37974106, "comment_id": 63394279, "body": ":) Nice! Readable as hell!"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 3, "last_activity_date": 1466614308, "creation_date": 1466614308, "answer_id": 37974106, "question_id": 37973701, "link": "https://stackoverflow.com/questions/37973701/ruby-equivalent-to-javascript-operator/37974106#37974106", "title": "Ruby equivalent to JavaScript operator `||`", "body": "<p>For the particular case of <code>0</code> and <code>7</code>:</p>\n\n<pre><code>a = (b + 6) % 7 + 1\n</code></pre>\n\n<p>:)</p>\n"}, {"comments": [{"owner": {"reputation": 793, "user_id": 1810183, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/aD21S.jpg?s=128&g=1", "display_name": "victorf", "link": "https://stackoverflow.com/users/1810183/victorf"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1466615866, "post_id": 37974195, "comment_id": 63395168, "body": "@CarySwoveland it&#39;s because you already have a 5-digit reputation here, Cary (; I&#39;m just hi-lighting the most important part."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1466616633, "post_id": 37974195, "comment_id": 63395637, "body": "Frankly, I have a 3 digits (and one decimal point, though,) but I don\u2019t need the bold face either."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1466616891, "post_id": 37974195, "comment_id": 63395792, "body": "For the sake of entropy constancy I upvoted it to give 10 rep more :)"}], "tags": [], "owner": {"reputation": 793, "user_id": 1810183, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/aD21S.jpg?s=128&g=1", "display_name": "victorf", "link": "https://stackoverflow.com/users/1810183/victorf"}, "is_accepted": false, "score": 6, "last_activity_date": 1466616774, "last_edit_date": 1466616774, "creation_date": 1466614626, "answer_id": 37974195, "question_id": 37973701, "link": "https://stackoverflow.com/questions/37973701/ruby-equivalent-to-javascript-operator/37974195#37974195", "title": "Ruby equivalent to JavaScript operator `||`", "body": "<p>There are only two falsy values in Ruby: <code>nil</code> and <code>false</code>. So, if you really want this approach</p>\n\n<pre><code>a = b == 0 ? 7 : b\n</code></pre>\n\n<p>is a plausible solution, because <code>0</code> can't be evaluated as <code>false</code>.</p>\n\n<p>However, a better option for your need is <a href=\"http://ruby-doc.org/stdlib-2.3.1/libdoc/date/rdoc/Date.html#method-i-cwday\" rel=\"nofollow\"><code>cwday</code></a>, and not <a href=\"http://ruby-doc.org/stdlib-2.3.1/libdoc/date/rdoc/Date.html#method-i-wday\" rel=\"nofollow\"><code>wday</code></a>. Then you don't need to make this comparison anymore, because it returns <code>1</code> for Monday, <code>2</code> for Tuesday, and finally <code>7</code> for Sunday, as you need.</p>\n\n<pre><code>date = Date.new(2016,19,6) # =&gt; Jun 19 2016, Sunday\ndate.cwday # =&gt; 7\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 3, "creation_date": 1466616352, "post_id": 37974263, "comment_id": 63395470, "body": "Readers: mudsie has gone off his medication."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1466616533, "post_id": 37974263, "comment_id": 63395577, "body": "Aye. It\u2019s time to get my pills, thanks @CarySwoveland for the reminder! See ya all tomorrow."}, {"owner": {"reputation": 793, "user_id": 1810183, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/aD21S.jpg?s=128&g=1", "display_name": "victorf", "link": "https://stackoverflow.com/users/1810183/victorf"}, "edited": false, "score": 0, "creation_date": 1466617359, "post_id": 37974263, "comment_id": 63396072, "body": "Rubyist will to power"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1466617888, "post_id": 37974263, "comment_id": 63396392, "body": "Could also <code>case self</code> which might be faster than this chain of <code>||</code> operators."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1466620437, "post_id": 37974263, "comment_id": 63397839, "body": "@tadman Yeah, I thought about it (though I doubt it could be any faster,) but I on purpose made this answer as cryptic as possible."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 6, "last_activity_date": 1468297000, "last_edit_date": 1468297000, "creation_date": 1466614860, "answer_id": 37974263, "question_id": 37973701, "link": "https://stackoverflow.com/questions/37973701/ruby-equivalent-to-javascript-operator/37974263#37974263", "title": "Ruby equivalent to JavaScript operator `||`", "body": "<p>Just out of curiosity:</p>\n\n<pre><code>class Object\n  def javascript_or?(other)\n    (is_a?(FalseClass) || nil? || '' == self || 0 == self) ? nil : self\n  end\nend\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>a = b.javascript_or?(7)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1837, "user_id": 2190425, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/24ca4182ce692ec73ef35a86f268c802?s=128&d=identicon&r=PG", "display_name": "Aurimas", "link": "https://stackoverflow.com/users/2190425/aurimas"}, "edited": false, "score": 0, "creation_date": 1466618734, "post_id": 37975143, "comment_id": 63396848, "body": "Nice, but doesn&#39;t it look a bit more complicated than <code>day || 7</code> ? :D"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4776684"}, "reply_to_user": {"reputation": 1837, "user_id": 2190425, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/24ca4182ce692ec73ef35a86f268c802?s=128&d=identicon&r=PG", "display_name": "Aurimas", "link": "https://stackoverflow.com/users/2190425/aurimas"}, "edited": false, "score": 0, "creation_date": 1466619441, "post_id": 37975143, "comment_id": 63397249, "body": "@Aurimas; That is actually pretty good solution because after initialization (just once), you will not need to use any logical operations to determine your value."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 1837, "user_id": 2190425, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/24ca4182ce692ec73ef35a86f268c802?s=128&d=identicon&r=PG", "display_name": "Aurimas", "link": "https://stackoverflow.com/users/2190425/aurimas"}, "edited": false, "score": 2, "creation_date": 1466619712, "post_id": 37975143, "comment_id": 63397428, "body": "@Aurimas Since Ruby is extremely strict about what&#39;s <i>false</i> in a logical sense, <code>|| 7</code> is never going to happen so you may as well abandon that idea: The <i>When in Rome</i> principle applies here. If you&#39;re doing a mapping operation, express it as such. In other languages you can take advantage of zero being a <i>false</i> value so the simplest expression of your desire does vary considerably depending on constraints."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1466620586, "post_id": 37975143, "comment_id": 63397925, "body": "In fact, this is the best answer here, hence it narrows down the fact this is a mapping issue."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1466618165, "creation_date": 1466618165, "answer_id": 37975143, "question_id": 37973701, "link": "https://stackoverflow.com/questions/37973701/ruby-equivalent-to-javascript-operator/37975143#37975143", "title": "Ruby equivalent to JavaScript operator `||`", "body": "<p>What you're describing here is less of a logical problem and more of a mapping one:</p>\n\n<pre><code>WEEKDAY_MAP = Hash.new { |h,k| h[k] = k &lt; 7 ? k : nil }.merge(0 =&gt; 7)   \n</code></pre>\n\n<p>This one re-writes 1..6 to be the same, but 0 becomes 7. All other values are <code>nil</code>.</p>\n\n<p>Then you can use this to re-write your day indicies:</p>\n\n<pre><code>b = WEEKDAY_MAP[a]\n</code></pre>\n\n<p>If at some point you want to tinker with the logic some more, that's also possible.</p>\n"}], "owner": {"reputation": 1837, "user_id": 2190425, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/24ca4182ce692ec73ef35a86f268c802?s=128&d=identicon&r=PG", "display_name": "Aurimas", "link": "https://stackoverflow.com/users/2190425/aurimas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "accepted_answer_id": 37974263, "answer_count": 5, "score": 2, "last_activity_date": 1468297000, "creation_date": 1466613079, "last_edit_date": 1466623441, "question_id": 37973701, "link": "https://stackoverflow.com/questions/37973701/ruby-equivalent-to-javascript-operator", "title": "Ruby equivalent to JavaScript operator `||`", "body": "<p>How can this be achieved in Ruby? Can it be done without repeating the variable?\nJavascript:</p>\n\n<pre><code>b = a || 7\n</code></pre>\n\n<p>This assigns <code>a</code> if <code>a</code> is not <code>0</code> and <code>7</code> otherwise</p>\n\n<p>One specific case is converting date.wday to 7 if it returns 0 (Sunday).</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1466613234, "post_id": 37973668, "comment_id": 63393619, "body": "Does your InvitationsController start with <code>class InvitationsController &lt; ApplicationController</code>? Is that file named <code>app&#47;controller&#47;invitations_controller.rb</code>? And can you please post the full error message including the file name and line number?"}, {"owner": {"reputation": 1, "user_id": 6500200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a05691da40542eaabe7fc57c2126b4?s=128&d=identicon&r=PG&f=1", "display_name": "Piotrek \u017buk", "link": "https://stackoverflow.com/users/6500200/piotrek-%c5%bbuk"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1466615417, "post_id": 37973668, "comment_id": 63394929, "body": "No, it starts with &#39;ControlPanel::InvitationsController &lt; ControlPanel::ControlPanelController&#39;. File naed is &#39;app/controllers/control_panel/invitations_controller.rb. Error message looks like this  <a href=\"http://files.tinypic.pl/i/00797/pac6h950975b.png\" rel=\"nofollow noreferrer\">files.tinypic.pl/i/00797/pac6h950975b.png</a>"}], "answers": [{"tags": [], "owner": {"reputation": 117, "user_id": 2512805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8G1Wg.jpg?s=128&g=1", "display_name": "Yoyo Coder", "link": "https://stackoverflow.com/users/2512805/yoyo-coder"}, "is_accepted": false, "score": 0, "last_activity_date": 1466615401, "last_edit_date": 1466615401, "creation_date": 1466614395, "answer_id": 37974124, "question_id": 37973668, "link": "https://stackoverflow.com/questions/37973668/rails-uninitialized-constant-error-with-boolean-variable/37974124#37974124", "title": "Rails uninitialized constant error with boolean variable", "body": "<p>I propose you can follow the below steps to resolve your problem:</p>\n\n<p>1/ run command <code>rake routes</code> to make sure your routes are correct?\nIn my opinion, it should be:</p>\n\n<pre><code>resources :invitations do\n  member do\n    put :sumbit_invitation\n  end\nend\n</code></pre>\n\n<p>2/ Make sure you URL is correct</p>\n\n<p><code>link_to(\"Accept\", invitation_sumbit_invitation_url(invitations), method: :put)</code>\n<br>\nshould be changed to\n<br>\n<code>link_to(\"Accept\", invitations_sumbit_invitation_path(invitations), method: :put)</code></p>\n\n<p>Using <code>rake routes</code> to get correct path</p>\n\n<p>4/ Make sure that your controller <code>InvitationsController</code> worked</p>\n\n<p>P/S: It is better if you share your routes.rb file or logs <code>rake routes</code></p>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 0, "last_activity_date": 1466619069, "creation_date": 1466619069, "answer_id": 37975394, "question_id": 37973668, "link": "https://stackoverflow.com/questions/37973668/rails-uninitialized-constant-error-with-boolean-variable/37975394#37975394", "title": "Rails uninitialized constant error with boolean variable", "body": "<p>You controller is in the module <code>ControlPanel</code> and lives in the <code>control_panel</code> subfolder of your app's <code>controller's</code> folder, but your route doesn't have a corresponding <code>controll_panel</code> namespace defined.</p>\n\n<p>Add a <code>controll_panel</code> namespace to your routes:</p>\n\n<pre><code>namespace :controll_panel do\n  resources :invitations do\n    put :sumbit_invitation\n  end\nend\n</code></pre>\n\n<p>This will make the <code>invitation_sumbit_invitation_url</code> invalid and you will have to change it to something like <code>admin_invitation_sumbit_invitation_url</code> or <code>invitation_sumbit_admin_invitation_url</code>. From the top of my head I am not sure how Rails handles the naming. Use <code>rake routes</code> in your console to get a list of all available route names in your app.</p>\n\n<p>I this context I advise to read: <a href=\"http://guides.rubyonrails.org/routing.html\" rel=\"nofollow\">The Rails Guide: Routing</a></p>\n"}], "owner": {"reputation": 1, "user_id": 6500200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a05691da40542eaabe7fc57c2126b4?s=128&d=identicon&r=PG&f=1", "display_name": "Piotrek \u017buk", "link": "https://stackoverflow.com/users/6500200/piotrek-%c5%bbuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 681, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1466619069, "creation_date": 1466612948, "last_edit_date": 1466613267, "question_id": 37973668, "link": "https://stackoverflow.com/questions/37973668/rails-uninitialized-constant-error-with-boolean-variable", "title": "Rails uninitialized constant error with boolean variable", "body": "<p>When I hit this link:</p>\n\n<pre><code>link_to(\"Accept\", invitation_sumbit_invitation_url(invitations), method: :put)\n</code></pre>\n\n<p>I get this error:</p>\n\n<blockquote>\n  <p>uninitialized constant <code>InvitationsController</code></p>\n</blockquote>\n\n<p>The method in InvitationsController looks like this:</p>\n\n<pre><code>def sumbit_invitation\n    @invi = @invitations.find(params[:id])\n    @invi.update_attributes(accepted: true)\nend\n</code></pre>\n\n<p>and routes is:</p>\n\n<pre><code>resources :invitations do\n  put :sumbit_invitation\nend\n</code></pre>\n"}, {"tags": ["css", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1466613747, "post_id": 37973550, "comment_id": 63393901, "body": "There&#39;s another way to approach this problem. Instead of trying to remove or conditionally limit the duplicates, you could group the activities by date."}], "answers": [{"tags": [], "owner": {"reputation": 78750, "user_id": 2827823, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1pdiw.png?s=128&g=1", "display_name": "Ason", "link": "https://stackoverflow.com/users/2827823/ason"}, "is_accepted": true, "score": 1, "last_activity_date": 1466613870, "creation_date": 1466613870, "answer_id": 37973959, "question_id": 37973550, "link": "https://stackoverflow.com/questions/37973550/how-can-i-keep-duplicate-elements-from-displaying/37973959#37973959", "title": "How can I keep duplicate elements from displaying?", "body": "<p>This might be a way.</p>\n\n<p>Based on the code used to generate this in the first place, you might be able to loop in such a way that only one <code>style</code> could be generated instead of one per element group.</p>\n\n<pre><code>&lt;style&gt;.time-label[data-actdate=\"&lt;%= activity_date(activity) %&gt;\"] ~ .time-label[data-actdate=\"&lt;%= activity_date(activity) %&gt;\"] { display: none; }&lt;/style&gt;\n&lt;li class=\"time-label\" data-actdate=\"&lt;%= activity_date(activity) %&gt;\"&gt;\n  &lt;span class=\"bg-red\"&gt;\n   &lt;%= activity_date(activity) %&gt;\n  &lt;/span&gt;\n&lt;/li&gt;\n</code></pre>\n\n<p>Sample snippet</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;style&gt;.time-label[data-actdate=\"3 June\"] ~ .time-label[data-actdate=\"3 June\"] { display: none; }&lt;/style&gt;\r\n&lt;li class=\"time-label\" data-actdate=\"3 June\"&gt;\r\n  &lt;span class=\"bg-red\"&gt;\r\n   3 June\r\n  &lt;/span&gt;\r\n&lt;/li&gt;\r\n\r\n&lt;style&gt;.time-label[data-actdate=\"3 June\"] ~ .time-label[data-actdate=\"3 June\"] { display: none; }&lt;/style&gt;\r\n&lt;li class=\"time-label\" data-actdate=\"3 June\"&gt;\r\n  &lt;span class=\"bg-red\"&gt;\r\n   3 June\r\n  &lt;/span&gt;\r\n&lt;/li&gt;\r\n\r\n&lt;style&gt;.time-label[data-actdate=\"3 June\"] ~ .time-label[data-actdate=\"3 June\"] { display: none; }&lt;/style&gt;\r\n&lt;li class=\"time-label\" data-actdate=\"3 June\"&gt;\r\n  &lt;span class=\"bg-red\"&gt;\r\n   3 June\r\n  &lt;/span&gt;\r\n&lt;/li&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 81, "user_id": 5361122, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/31ca2a1ddfa0f7cddacb22265e9bceb8?s=128&d=identicon&r=PG", "display_name": "Bruce1138", "link": "https://stackoverflow.com/users/5361122/bruce1138"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 37973959, "answer_count": 1, "score": 0, "last_activity_date": 1466616279, "creation_date": 1466612582, "last_edit_date": 1466616279, "question_id": 37973550, "link": "https://stackoverflow.com/questions/37973550/how-can-i-keep-duplicate-elements-from-displaying", "title": "How can I keep duplicate elements from displaying?", "body": "<p>I have a timeline page that has dates displayed based on time stamps from activities I have created. The activities are made with the Public Activity Rails gem. Example:</p>\n\n<p><a href=\"https://i.stack.imgur.com/8qAOw.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8qAOw.jpg\" alt=\"Example Picture of Timeline\"></a></p>\n\n<p>As seen in the example there are multiple dates that are displayed on the left in green. These dates are taken from the created_at time stamps for the activities and displayed in a user friendly format. </p>\n\n<p>What is the best way to keep the duplicates from displaying. For example there are multiple June 3rd dates that I would like to display only once.</p>\n\n<p>HTML for date elements (displayed in a loop): </p>\n\n<pre><code>&lt;li class=\"time-label\"&gt;\n  &lt;span class=\"bg-red\"&gt;\n   &lt;%= activity_date(activity) %&gt;\n  &lt;/span&gt;\n&lt;/li&gt;\n</code></pre>\n\n<p>Ruby Method to format the date:</p>\n\n<pre><code>  def activity_date(activity)\n   local_date(activity.created_at)\n  end\n</code></pre>\n\n<p>I was thinking of maybe having a conditional in Ruby or Javascript to limit the duplicates from displaying. Any suggestions?</p>\n"}, {"tags": ["ruby", "braintree"], "comments": [{"owner": {"reputation": 11166, "user_id": 847116, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/YLb4A.gif?s=128&g=1", "display_name": "jamesc", "link": "https://stackoverflow.com/users/847116/jamesc"}, "edited": false, "score": 0, "creation_date": 1466613557, "post_id": 37973200, "comment_id": 63393796, "body": "What is in the params? <code>params:{...}</code>?"}, {"owner": {"reputation": 812, "user_id": 2034213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09835300056e6e3f54e25c35e9e89a3?s=128&d=identicon&r=PG", "display_name": "igneus", "link": "https://stackoverflow.com/users/2034213/igneus"}, "reply_to_user": {"reputation": 11166, "user_id": 847116, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/YLb4A.gif?s=128&g=1", "display_name": "jamesc", "link": "https://stackoverflow.com/users/847116/jamesc"}, "edited": false, "score": 0, "creation_date": 1466614468, "post_id": 37973200, "comment_id": 63394356, "body": "@jamesw <code>{:payment_method=&gt;{:customer_id=&gt;&quot;75850275&quot;, :billing_address_id=&gt;&quot;jh&quot;, :payment_method_nonce=&gt;&quot;fake-valid-visa-nonce&quot;}, :controller=&gt;&quot;payment_methods&quot;, :action=&gt;&quot;create&quot;, :merchant_id=&gt;&quot;XXXXXX&quot;}</code>"}, {"owner": {"reputation": 11166, "user_id": 847116, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/YLb4A.gif?s=128&g=1", "display_name": "jamesc", "link": "https://stackoverflow.com/users/847116/jamesc"}, "edited": false, "score": 0, "creation_date": 1466614597, "post_id": 37973200, "comment_id": 63394448, "body": "That <code>:billing_address_id=&gt;&quot;jh&quot;</code> looks suspicious to me. Might be the cause cause of your issues"}, {"owner": {"reputation": 812, "user_id": 2034213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09835300056e6e3f54e25c35e9e89a3?s=128&d=identicon&r=PG", "display_name": "igneus", "link": "https://stackoverflow.com/users/2034213/igneus"}, "reply_to_user": {"reputation": 11166, "user_id": 847116, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/YLb4A.gif?s=128&g=1", "display_name": "jamesc", "link": "https://stackoverflow.com/users/847116/jamesc"}, "edited": false, "score": 0, "creation_date": 1466614784, "post_id": 37973200, "comment_id": 63394578, "body": "@jamesw <code>params</code> simply contain what was sent to the server. <code>&quot;jh&quot;</code> is ID of the <code>Address</code> object created first. There is nothing suspicious about it. (Address IDs in Braintree look like this.)"}, {"owner": {"reputation": 11166, "user_id": 847116, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/YLb4A.gif?s=128&g=1", "display_name": "jamesc", "link": "https://stackoverflow.com/users/847116/jamesc"}, "edited": false, "score": 0, "creation_date": 1466615145, "post_id": 37973200, "comment_id": 63394780, "body": "I can see nothing wrong with your code. Of course that doesn&#39;t mean there isn&#39;t. Perhaps a bug? Maybe report it to the Gem develppers, see what they say?, maybe you are not on a stable branch? Just kicking ideas around."}, {"owner": {"reputation": 812, "user_id": 2034213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09835300056e6e3f54e25c35e9e89a3?s=128&d=identicon&r=PG", "display_name": "igneus", "link": "https://stackoverflow.com/users/2034213/igneus"}, "reply_to_user": {"reputation": 11166, "user_id": 847116, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/YLb4A.gif?s=128&g=1", "display_name": "jamesc", "link": "https://stackoverflow.com/users/847116/jamesc"}, "edited": false, "score": 0, "creation_date": 1466615664, "post_id": 37973200, "comment_id": 63395081, "body": "@jamesw The response is generated on the server, not in the gem. The gem is only a thin wrapper over an API. (And the question is rather a question for someone who has plenty of experience with Braintree than for someone able to kick around general &quot;Ruby ideas&quot;.)"}, {"owner": {"reputation": 11166, "user_id": 847116, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/YLb4A.gif?s=128&g=1", "display_name": "jamesc", "link": "https://stackoverflow.com/users/847116/jamesc"}, "edited": false, "score": 0, "creation_date": 1466615951, "post_id": 37973200, "comment_id": 63395229, "body": "Is it not the gem that passes the information to the server? (6 years of payment gateway experience but I&#39;ll  leave you to it!) Good luck"}], "answers": [{"comments": [{"owner": {"reputation": 507, "user_id": 85788, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Csa4v.jpg?s=128&g=1", "display_name": "jminkler", "link": "https://stackoverflow.com/users/85788/jminkler"}, "edited": false, "score": 0, "creation_date": 1488311553, "post_id": 37977655, "comment_id": 72172001, "body": "I have tried this without a test nonce (hosted fields), and it also doesn&#39;t accept the billingAddressId  - is there a way to actually test this in the sandbox? Don&#39;t want it to create new addresses ..."}], "tags": [], "owner": {"reputation": 831, "user_id": 200217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d34395a887d6507f24ec98a52a28d6f5?s=128&d=identicon&r=PG", "display_name": "Raymond Berg", "link": "https://stackoverflow.com/users/200217/raymond-berg"}, "is_accepted": true, "score": 2, "last_activity_date": 1466627212, "creation_date": 1466627212, "answer_id": 37977655, "question_id": 37973200, "link": "https://stackoverflow.com/questions/37973200/associate-braintree-paymentmethod-with-an-address/37977655#37977655", "title": "Associate Braintree PaymentMethod with an Address", "body": "<p><sub>Full disclosure: I work at Braintree. If you have any further questions, feel free to contact <a href=\"https://support.braintreepayments.com/\" rel=\"nofollow\">support</a>.</sub></p>\n\n<p>Bottom-line: At this time, you cannot test the <code>billing_address_id</code> with a <a href=\"https://developers.braintreepayments.com/reference/general/testing/ruby#payment-method-nonces\" rel=\"nofollow\">test nonce</a>, but it will work with <a href=\"https://developers.braintreepayments.com/start/overview#payment-method-nonce\" rel=\"nofollow\">a nonce generated for the sandbox from a Drop-in or Custom Integration at the client side</a>.</p>\n\n<p>This is a limitation of the testing API itself. When you submit one of the test nonces, it pre-populates with data that is commonly required for various checks. One of those pre-populated fields is that of <code>billing_address=&gt;zip_code</code> which you can see if you do a vanilla payment method create with the fake nonce you are using. <code>billing_address</code> can be overwritten with whatever test values you want, but you can't undo it or zero it out. </p>\n"}], "owner": {"reputation": 812, "user_id": 2034213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09835300056e6e3f54e25c35e9e89a3?s=128&d=identicon&r=PG", "display_name": "igneus", "link": "https://stackoverflow.com/users/2034213/igneus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 37977655, "answer_count": 1, "score": 1, "last_activity_date": 1466627212, "creation_date": 1466611557, "question_id": 37973200, "link": "https://stackoverflow.com/questions/37973200/associate-braintree-paymentmethod-with-an-address", "title": "Associate Braintree PaymentMethod with an Address", "body": "<pre><code>require 'braintree'\n\n# set credentials\nBraintree::Configuration.merchant_id = 'XXX'\nBraintree::Configuration.public_key = 'YYY'\nBraintree::Configuration.private_key = 'ZZZ'\n\nBraintree::Configuration.environment = :sandbox\n\n# see the raw messages going to and from the Braintree server\nBraintree::Configuration.logger = Logger.new(STDERR)\nBraintree::Configuration.logger.level = Logger::DEBUG\n\n\ncustomer = Braintree::Customer.create!(first_name: 'John', last_name: 'Doe')\n\nbegin\n  address = Braintree::Address.create!(customer_id: customer.id, locality: 'London')\n  pmethod = Braintree::PaymentMethod.create(customer_id: customer.id, billing_address_id: address.id, payment_method_nonce: 'fake-valid-visa-nonce')\n  p pmethod\nensure\n  # always delete the Customer in order not to leave much rubbish\n  # behind the testing session\n  Braintree::Customer.delete(customer.id)\nend\n</code></pre>\n\n<p>I create a <code>Customer</code>, than an <code>Address</code> for him. When I attempt to create a <code>PaymentMethod</code>, using a nonce representing a credit card, and provide a billing address (by means of an ID of the previously saved <code>Address</code>), the <code>PaymentMethod</code> is not saved and error result is returned. The <code>p pmethod</code> line prints</p>\n\n<pre><code>#&lt;Braintree::ErrorResult params:{...} errors:&lt;credit_card:[(91701) Cannot provide both a billing address and a billing address ID.]&gt;&gt;\n</code></pre>\n\n<p>The error message doesn't make sense, as I only provide billing address ID. I have also checked that the SDK doesn't e.g. forge an empty address and send it to the server together with the <code>PaymentMethod</code> data provided in my code.</p>\n\n<p>Creating a <code>PaymentMethod</code> without billing address works, but I really want to specify one.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "heroku", "sprockets"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 6094382, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8e8e88e3b7ba5f9d802fe180c7649988?s=128&d=identicon&r=PG&f=1", "display_name": "Rails_learner", "link": "https://stackoverflow.com/users/6094382/rails-learner"}, "edited": false, "score": 0, "creation_date": 1466611074, "post_id": 37972895, "comment_id": 63392205, "body": "Thanks for your answer. I am using Heroku, so i don&#39;t need to precompile locally either?"}, {"owner": {"reputation": 83, "user_id": 6094382, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8e8e88e3b7ba5f9d802fe180c7649988?s=128&d=identicon&r=PG&f=1", "display_name": "Rails_learner", "link": "https://stackoverflow.com/users/6094382/rails-learner"}, "edited": false, "score": 0, "creation_date": 1466611413, "post_id": 37972895, "comment_id": 63392474, "body": "I&#39;m guessing i don&#39;t need to add the line you previously mentioned either?"}, {"owner": {"reputation": 83, "user_id": 6094382, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8e8e88e3b7ba5f9d802fe180c7649988?s=128&d=identicon&r=PG&f=1", "display_name": "Rails_learner", "link": "https://stackoverflow.com/users/6094382/rails-learner"}, "edited": false, "score": 0, "creation_date": 1466612039, "post_id": 37972895, "comment_id": 63392887, "body": "Actually, Heroku just said the same thing.  <code>Error compiling CSS asset</code> <code>No method Error: undefined method &#39;[ ]&#39; for nil:Nil Class</code>"}, {"owner": {"reputation": 83, "user_id": 6094382, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8e8e88e3b7ba5f9d802fe180c7649988?s=128&d=identicon&r=PG&f=1", "display_name": "Rails_learner", "link": "https://stackoverflow.com/users/6094382/rails-learner"}, "edited": false, "score": 0, "creation_date": 1466612217, "post_id": 37972895, "comment_id": 63393001, "body": "the error on the page is <code>&#47;app&#47;vendor&#47;bundle&#47;ruby&#47;2.2.0&#47;gems&#47;sprockets-3.5.2&#47;lib&#47;sproc&zwnj;&#8203;kets&#47;sass_processor.&zwnj;&#8203;rb:278:in &#39;sprockets_context&#39;</code>"}, {"owner": {"reputation": 75, "user_id": 4476182, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cHy4bRmRTQ4/AAAAAAAAAAI/AAAAAAAAAv4/jyu_QP6ItFs/photo.jpg?sz=128", "display_name": "Jay Gabez", "link": "https://stackoverflow.com/users/4476182/jay-gabez"}, "reply_to_user": {"reputation": 83, "user_id": 6094382, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8e8e88e3b7ba5f9d802fe180c7649988?s=128&d=identicon&r=PG&f=1", "display_name": "Rails_learner", "link": "https://stackoverflow.com/users/6094382/rails-learner"}, "edited": false, "score": 0, "creation_date": 1466616283, "post_id": 37972895, "comment_id": 63395431, "body": "So you have not yet been able to push to heroku, and you&#39;re getting this error when trying to push your app up to heroku for the first time? Go back and make sure all of your .css files are renamed to .scss"}, {"owner": {"reputation": 83, "user_id": 6094382, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8e8e88e3b7ba5f9d802fe180c7649988?s=128&d=identicon&r=PG&f=1", "display_name": "Rails_learner", "link": "https://stackoverflow.com/users/6094382/rails-learner"}, "edited": false, "score": 0, "creation_date": 1466617611, "post_id": 37972895, "comment_id": 63396239, "body": "It allowed me push to heroku, but when the page loaded, i got this error on the screen"}], "tags": [], "owner": {"reputation": 75, "user_id": 4476182, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cHy4bRmRTQ4/AAAAAAAAAAI/AAAAAAAAAv4/jyu_QP6ItFs/photo.jpg?sz=128", "display_name": "Jay Gabez", "link": "https://stackoverflow.com/users/4476182/jay-gabez"}, "is_accepted": true, "score": 0, "last_activity_date": 1466610973, "last_edit_date": 1466610973, "creation_date": 1466610637, "answer_id": 37972895, "question_id": 37972696, "link": "https://stackoverflow.com/questions/37972696/assets-would-not-compile-in-production/37972895#37972895", "title": "Assets would not Compile in production", "body": "<p>If you're using Heroku you don't need to precompile your own assets, it will be done automatically when you push to the server.</p>\n"}], "owner": {"reputation": 83, "user_id": 6094382, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8e8e88e3b7ba5f9d802fe180c7649988?s=128&d=identicon&r=PG&f=1", "display_name": "Rails_learner", "link": "https://stackoverflow.com/users/6094382/rails-learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "accepted_answer_id": 37972895, "answer_count": 1, "score": 2, "last_activity_date": 1466610973, "creation_date": 1466610058, "question_id": 37972696, "link": "https://stackoverflow.com/questions/37972696/assets-would-not-compile-in-production", "title": "Assets would not Compile in production", "body": "<p>I've been trying to precompile assets in production but it just keeps breaking. </p>\n\n<p>I tried </p>\n\n<pre><code>  RAILS_ENV=production rake assets:precompile\n</code></pre>\n\n<p>and got:</p>\n\n<pre><code>I, [2016-06-22T15:59:02.648161 #1680]  INFO -- : Writing /Users/johndoe/Documents/be/Chak/public/assets/application-3b7afc621ec8ef5d713fe45400021fdd80041418493b774e248da6a1fcfc4052.js\nI, [2016-06-22T15:59:02.939980 #1680]  INFO -- : Writing /Users/johndoe/Documents/be/Chak/public/assets/application-3b7afc621ec8ef5d713fe45400021fdd80041418493b774e248da6a1fcfc4052.js.gz\nrake aborted!\nNoMethodError: undefined method `[]' for nil:NilClass\n\nTasks: TOP =&gt; assets:precompile\n(See full trace by running task with --trace)\nJohnDoesMBP:Chak johndoe$ RAILS_ENV=production rake assets:precompile --trace\n** Invoke assets:precompile (first_time)\n** Invoke assets:environment (first_time)\n** Execute assets:environment\n** Invoke environment (first_time)\n** Execute environment\n** Execute assets:precompile\nrake aborted!\nNoMethodError: undefined method `[]' for nil:NilClass\n/Users/johndoe/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/sprockets-3.5.2/lib/sprockets/sass_processor.rb:278:in `sprockets_context'\n/Users/johndoe/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/sprockets-3.5.2/lib/sprockets/sass_processor.rb:124:in `asset_path'\n/Users/johndoe/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/sprockets-3.5.2/lib/sprockets/sass_processor.rb:200:in `font_path'\n/Users/johndoe/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/sass-3.4.21/lib/sass/script/tree/funcall.rb:140:in `_perform'\n</code></pre>\n\n<p>Anyone have an idea, what's wrong?</p>\n\n<p>My production.rb file looks like this:</p>\n\n<pre><code>config.serve_static_files = true\nconfig.assets.js_compressor = :uglifier\nconfig.assets.compile = true\nconfig.assets.digest = true\nconfig.log_level = :debug\n</code></pre>\n\n<p>Any help would be appreciated. Thanks in advance!</p>\n\n<p>Gemfile:</p>\n\n<pre><code>ruby '2.2.2'\ngem 'figaro', '~&gt; 1.0.0'\ngem 'rails_12factor', group: :production\ngem 'puma'\ngem 'nifty-generators', :group =&gt; :development\ngem 'table_print'\ngem 'omniauth-facebook'\ngem 'omniauth-twitter'\ngem 'omniauth-google'\ngem 'devise'\ngem 'devise_invitable'\ngem 'carrierwave', :github =&gt; 'satoruk/carrierwave', :ref =&gt; '43179f94d6a4e62f69e812f5082d6447c9138480'\ngem 'rmagick', require: false\ngem 'rails', '4.2.4'\ngem 'pg'\ngem 'bootstrap-sass', '~&gt; 3.3.6'\ngem 'sass-rails', '~&gt; 5.0'\ngem 'uglifier', '&gt;= 1.3.0'\ngem 'coffee-rails', '~&gt; 4.1.0'\ngem 'jquery-rails'\ngem 'turbolinks'\ngem 'jbuilder', '~&gt; 2.0'\ngem 'sdoc', '~&gt; 0.4.0', group: :doc\ngem 'activemerchant'\ngem 'paypal-sdk-rest'\ngem 'paypal-sdk-adaptivepayments'\n\ngroup :development, :test do\n  gem 'byebug'\n  gem 'quiet_assets'\n  gem 'pry-rails'\n  gem 'thin'\nend\n\ngroup :development do\n  gem 'web-console', '~&gt; 2.0'\n  gem 'spring'\nend\n</code></pre>\n"}, {"tags": ["ruby", "firefox", "selenium-webdriver", "watir-webdriver", "firefox-marionette"], "owner": {"reputation": 15006, "user_id": 520567, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6cb1b2c58abc2116f910ec9253ee387f?s=128&d=identicon&r=PG", "display_name": "akostadinov", "link": "https://stackoverflow.com/users/520567/akostadinov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 389, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1466609151, "creation_date": 1466609151, "last_edit_date": 1495540350, "question_id": 37972337, "link": "https://stackoverflow.com/questions/37972337/how-to-add-new-trusted-certificate-for-firefox-profile", "title": "How to add new trusted certificate for firefox profile", "body": "<p>Upgrading to Firefox 47 leaves one with the only option to use the <code>marionette</code> web driver. It seems to not support untrusted certificates though:\n<a href=\"https://stackoverflow.com/a/37868534/520567\">https://stackoverflow.com/a/37868534/520567</a></p>\n\n<p>I'm struggling to find a way to import certificate when creating a firefox profile:</p>\n\n<pre><code>    firefox_profile = Selenium::WebDriver::Firefox::Profile.new\n    client = Selenium::WebDriver::Remote::Http::Default.new\n    caps = Selenium::WebDriver::Remote::Capabilities.firefox(firefox_profile: firefox_profile)\n    driver = Selenium::WebDriver.for :firefox, marionette: true, desired_capabilities: caps, :http_client=&gt;client\n    @browser = Watir::Browser.new driver\n</code></pre>\n\n<p>With the above code, how do I add an additional trusted certificate to firefox?! It might be a self-signed certificate depending on the server under testing.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "multithreading", "webrick", "inherited-resources"], "answers": [{"comments": [{"owner": {"reputation": 960, "user_id": 4109592, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7Sip6.jpg?s=128&g=1", "display_name": "Nick Schwaderer", "link": "https://stackoverflow.com/users/4109592/nick-schwaderer"}, "edited": false, "score": 0, "creation_date": 1466670107, "post_id": 37973372, "comment_id": 63416522, "body": "I have switched to Unicorn to test, it <i>seems</i> to have stopped that error from flagging up for now but it is still functionally bereft over about 5,000 objects. I&#39;m starting to wonder if there&#39;s a load limit that my browser can handle of activerecord objects loading at once."}, {"owner": {"reputation": 960, "user_id": 4109592, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7Sip6.jpg?s=128&g=1", "display_name": "Nick Schwaderer", "link": "https://stackoverflow.com/users/4109592/nick-schwaderer"}, "edited": false, "score": 0, "creation_date": 1468846484, "post_id": 37973372, "comment_id": 64280057, "body": "This removed the error. The greater problem appears to be that I was unoptimally handling data and abusing ActiveRecord a bit too much."}], "tags": [], "owner": {"reputation": 432, "user_id": 5113832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/991ef57603f1d1c2358d5beee3f8a521?s=128&d=identicon&r=PG", "display_name": "bideowego", "link": "https://stackoverflow.com/users/5113832/bideowego"}, "is_accepted": true, "score": 1, "last_activity_date": 1466612122, "creation_date": 1466612122, "answer_id": 37973372, "question_id": 37972108, "link": "https://stackoverflow.com/questions/37972108/how-do-i-resolve-this-error-while-increasing-eager-loading-error-threaderror/37973372#37973372", "title": "How do I resolve this error while increasing eager loading? &quot;ERROR ThreadError: Attempt to unlock a mutex which is locked by another thread&quot;", "body": "<p>Is switching from WEBrick to <a href=\"http://puma.io\" rel=\"nofollow\">Puma</a> an option? I had a application that required concurrent requests. I was getting the error you described:</p>\n\n<p><code>ERROR ThreadError: Attempt to unlock a mutex which is locked by another thread</code></p>\n\n<p>Switching to Puma solved that problem right out of the box.</p>\n"}], "owner": {"reputation": 960, "user_id": 4109592, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7Sip6.jpg?s=128&g=1", "display_name": "Nick Schwaderer", "link": "https://stackoverflow.com/users/4109592/nick-schwaderer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 513, "favorite_count": 0, "accepted_answer_id": 37973372, "answer_count": 1, "score": 4, "last_activity_date": 1466612122, "creation_date": 1466608541, "last_edit_date": 1495542153, "question_id": 37972108, "link": "https://stackoverflow.com/questions/37972108/how-do-i-resolve-this-error-while-increasing-eager-loading-error-threaderror", "title": "How do I resolve this error while increasing eager loading? &quot;ERROR ThreadError: Attempt to unlock a mutex which is locked by another thread&quot;", "body": "<p>My Rails application uses the <code>inherited_resources</code> gem. I am currently trying to speed it up to be able to handle a much larger data set. So I went forward (with the help of the Bullet gem) to use eager loading where it would prove helpful. Within inherited_resources it looks something like this:</p>\n\n<pre><code>def collection\n  my_widgets ||= end_of_association_chain.includes(:association_one, :association_two, :association_three, :association_four)\n\n  @widgets = case params[:filter]\n                  when nil then my_widgets.all\n                  when 'old' then my_widgets.old\n                  when 'new' then my_widgets.new\n                  end\n\n  @final_collection\nend\n</code></pre>\n\n<p>The new code is <code>.includes(:association_one, :association_two, :association_three, :association_four)</code></p>\n\n<p>This simple change sped up my loadtime in the logs by about 5 times for my test huge database. However, the browser would just sit there, blank. Nothing. With the chrome loading icon going. </p>\n\n<p>When I kill the server in the Terminal, I get this rather unique error:</p>\n\n<pre><code> ERROR ThreadError: Attempt to unlock a mutex which is locked by another thread\n</code></pre>\n\n<p>Backtrace at the bottom.</p>\n\n<p>I have already attempted the solution discussed in the top answer to this question: <a href=\"https://stackoverflow.com/questions/21605318/how-can-i-serve-requests-concurrently-with-rails-4\">How can I serve requests concurrently with Rails 4?</a> , with the following: </p>\n\n<pre><code>#config/environments/development.rb\nconfig.cache_classes = false\nconfig.eager_load = true\nconfig.allow_concurrency=true\n</code></pre>\n\n<p>What am I missing here? Why does simply adding these associations into eager loading, which significantly speeds up things behind the scenes, lend me an unresponsive browser with this ThreadError?</p>\n\n<pre>\n    /Users/johndoeuser/.rvm/gems/ruby-2.2.1/gems/rack-1.6.4/lib/rack/lock.rb:22:in `unlock'\n    /Users/johndoeuser/.rvm/gems/ruby-2.2.1/gems/rack-1.6.4/lib/rack/lock.rb:22:in `ensure in call'\n    /Users/johndoeuser/.rvm/gems/ruby-2.2.1/gems/rack-1.6.4/lib/rack/lock.rb:23:in `call'\n    /Users/johndoeuser/.rvm/gems/ruby-2.2.1/gems/rack-1.6.4/lib/rack/content_length.rb:15:in `call'\n    /Users/johndoeuser/.rvm/gems/ruby-2.2.1/gems/rack-1.6.4/lib/rack/handler/webrick.rb:88:in `service'\n    /Users/johndoeuser/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'\n    /Users/johndoeuser/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'\n    /Users/johndoeuser/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'\n/Users/johndoeuser/.rvm/gems/ruby-2.2.1/gems/rack-1.6.4/lib/rack/handler/webrick.rb:48:in `shutdown': undefined method `shutdown' for nil:NilClass (NoMethodError)\n    from /Users/johndoeuser/.rvm/gems/ruby-2.2.1/gems/rack-1.6.4/lib/rack/server.rb:280:in `block in start'\n    from /Users/johndoeuser/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:206:in `call'\n    from /Users/johndoeuser/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:206:in `join'\n    from /Users/johndoeuser/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:206:in `block (2 levels) in start'\n    from /Users/johndoeuser/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:206:in `each'\n    from /Users/johndoeuser/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:206:in `block in start'\n    from /Users/johndoeuser/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:32:in `start'\n    from /Users/johndoeuser/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:162:in `start'\n    from /Users/johndoeuser/.rvm/gems/ruby-2.2.1/gems/rack-1.6.4/lib/rack/handler/webrick.rb:34:in `run'\n    from /Users/johndoeuser/.rvm/gems/ruby-2.2.1/gems/rack-1.6.4/lib/rack/server.rb:286:in `start'\n    from /Users/johndoeuser/.rvm/gems/ruby-2.2.1/gems/railties-4.2.6/lib/rails/commands/server.rb:80:in `start'\n    from /Users/johndoeuser/.rvm/gems/ruby-2.2.1/gems/railties-4.2.6/lib/rails/commands/commands_tasks.rb:80:in `block in server'\n    from /Users/johndoeuser/.rvm/gems/ruby-2.2.1/gems/railties-4.2.6/lib/rails/commands/commands_tasks.rb:75:in `tap'\n    from /Users/johndoeuser/.rvm/gems/ruby-2.2.1/gems/railties-4.2.6/lib/rails/commands/commands_tasks.rb:75:in `server'\n    from /Users/johndoeuser/.rvm/gems/ruby-2.2.1/gems/railties-4.2.6/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n    from /Users/johndoeuser/.rvm/gems/ruby-2.2.1/gems/railties-4.2.6/lib/rails/commands.rb:17:in `'\n    from bin/rails:4:in `require'\n    from bin/rails:4:in `'\n</pre>\n\n<p>edit: I am starting to wonder if this is less of a thread error than my dataset being too large for eager loading, is there a threshold where you are eager loading so many objects that, while it loads quickly in the terminal, the browser just sits there forever?</p>\n"}, {"tags": ["mysql", "sql", "ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 4023, "user_id": 396964, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9d5d2fc7ebac788a7eca7acd89a96485?s=128&d=identicon&r=PG", "display_name": "chrismanderson", "link": "https://stackoverflow.com/users/396964/chrismanderson"}, "edited": false, "score": 0, "creation_date": 1466610796, "post_id": 37971862, "comment_id": 63392032, "body": "You can do <code>Playlist.where(:main =&gt; true).select { |x| x.keywords.include? &quot;Summer&quot; }</code>with <code>select</code> instead of <code>map</code>. However, you should use a query instead (such as potashin&#39;s answer) as it will be more efficient."}], "answers": [{"tags": [], "owner": {"reputation": 42085, "user_id": 3444240, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/OjOru.jpg?s=128&g=1", "display_name": "potashin", "link": "https://stackoverflow.com/users/3444240/potashin"}, "is_accepted": false, "score": 2, "last_activity_date": 1466607973, "creation_date": 1466607973, "answer_id": 37971900, "question_id": 37971862, "link": "https://stackoverflow.com/questions/37971862/rails-find-all-records-matching-condition-for-any-of-the-associated-objects/37971900#37971900", "title": "Rails: Find all records matching condition for any of the associated objects", "body": "<p>Something like this should work, using <code>includes</code>:</p>\n\n<pre><code>Playlist.includes(:keywords)\n        .where(playlists: {main: true}, keywords: {name: 'Summer'})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 363, "user_id": 4433763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F9rxz.png?s=128&g=1", "display_name": "Long Nguyen", "link": "https://stackoverflow.com/users/4433763/long-nguyen"}, "is_accepted": false, "score": 0, "last_activity_date": 1466662699, "creation_date": 1466662699, "answer_id": 37983676, "question_id": 37971862, "link": "https://stackoverflow.com/questions/37971862/rails-find-all-records-matching-condition-for-any-of-the-associated-objects/37983676#37983676", "title": "Rails: Find all records matching condition for any of the associated objects", "body": "<p>You should create scopes to increase reusability.</p>\n\n<pre><code>class Playlist &lt; ActiveRecord::Base\n  has_and_belongs_to_many :keywords\n\n  scope :main, -&gt; { where(main: true) }\n  scope :with_key_words, -&gt; (key_words) { joins(:keywords).where(keywords: {name: key_words}) }\nend\n</code></pre>\n\n<p>To get all playlists satisfy your requirements, just:</p>\n\n<pre><code>Playlist.main.with_key_words(['Summer'])\n</code></pre>\n"}], "owner": {"reputation": 2559, "user_id": 2428124, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0b8d5f0469fd19543aae40a101713834?s=128&d=identicon&r=PG", "display_name": "ste", "link": "https://stackoverflow.com/users/2428124/ste"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1624, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1466662699, "creation_date": 1466607846, "last_edit_date": 1466637758, "question_id": 37971862, "link": "https://stackoverflow.com/questions/37971862/rails-find-all-records-matching-condition-for-any-of-the-associated-objects", "title": "Rails: Find all records matching condition for any of the associated objects", "body": "<p>I have the following Ruby on Rails entity:</p>\n\n<p>Playlist:</p>\n\n<pre><code>class Playlist &lt; ActiveRecord::Base {\n                             :id =&gt; :integer,\n                           :name =&gt; :string,\n                     :created_at =&gt; :datetime,\n                     :updated_at =&gt; :datetime,\n                      :dimension =&gt; :string,\n                          :title =&gt; :string,\n                           :text =&gt; :string,\n                          :price =&gt; :float,\n       :playlist_image_file_name =&gt; :string,\n    :playlist_image_content_type =&gt; :string,\n       :playlist_image_file_size =&gt; :integer,\n      :playlist_image_updated_at =&gt; :datetime,\n                           :main =&gt; :boolean,\n                         :action =&gt; :string,\n                 :hairdresser_id =&gt; :integer\n}\n</code></pre>\n\n<p>And Keyword:</p>\n\n<pre><code>class Keyword &lt; ActiveRecord::Base {\n             :id =&gt; :integer,\n           :name =&gt; :string,\n     :created_at =&gt; :datetime,\n     :updated_at =&gt; :datetime,\n    :preselected =&gt; :boolean\n}\n</code></pre>\n\n<p>The relation between them is very simple: basically a Playlist object can have 0 or more keywords associated.\nThose are the models:</p>\n\n<pre><code>class Keyword &lt; ActiveRecord::Base\n  has_and_belongs_to_many :playlists\nend\n\nclass Playlist &lt; ActiveRecord::Base\n  has_and_belongs_to_many :keywords\n\n  has_attached_file :playlist_image, styles: {medium: \"500x500\", small: \"200x200\", thumb: \"40x40\"}, default_url: \"/system/playlist_default.jpg\"\n  validates_attachment_content_type :playlist_image, content_type: /\\Aimage\\/.*\\Z/\nend\n</code></pre>\n\n<p>That allows me to do something like that:</p>\n\n<pre><code>Playlist.first.keywords\n</code></pre>\n\n<p>and retrieve all the keywords associated with the first playlist.</p>\n\n<p>Now I would like to build a function to return all the playlists that have certain words as keywords and have \"main\" equals to true.\nFor example all the playlist that have the keyword \"Summer\".\nI tryed with that:</p>\n\n<pre><code>Playlist.where(:main =&gt; true).map{|x| x.keywords.include? \"Summer\"}\n</code></pre>\n\n<p>But that returns only an array containing true or false depending if the related Playlist contains or not the keyword \"Summer\", I'm looking for something that return the whole playlist only if the array of keywords of that playlist include the word \"summer\". How can I achieve that?</p>\n"}, {"tags": ["ruby", "coffeescript", "conditional-operator"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1466610184, "post_id": 37971599, "comment_id": 63391623, "body": "For those of us who don&#39;t have the entire CoffeeScript Language Specification memorized, would you mind explaining what the &quot;Ruby equivalent&quot; is supposed to do?"}, {"owner": {"reputation": 1837, "user_id": 2190425, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/24ca4182ce692ec73ef35a86f268c802?s=128&d=identicon&r=PG", "display_name": "Aurimas", "link": "https://stackoverflow.com/users/2190425/aurimas"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1466613362, "post_id": 37971599, "comment_id": 63393688, "body": "Updated the description. Looks good?"}], "answers": [{"comments": [{"owner": {"reputation": 1837, "user_id": 2190425, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/24ca4182ce692ec73ef35a86f268c802?s=128&d=identicon&r=PG", "display_name": "Aurimas", "link": "https://stackoverflow.com/users/2190425/aurimas"}, "edited": false, "score": 0, "creation_date": 1466607547, "post_id": 37971660, "comment_id": 63389717, "body": "I think I must accept this, although what I actually need is Ruby equivalent to Javascript Boolean <code>or</code>. That is I need <code>(0 || &quot;something&quot;)</code> to return &quot;something&quot;, instead it returns <code>0</code>. Asked the wrong question I guess:)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 1837, "user_id": 2190425, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/24ca4182ce692ec73ef35a86f268c802?s=128&d=identicon&r=PG", "display_name": "Aurimas", "link": "https://stackoverflow.com/users/2190425/aurimas"}, "edited": false, "score": 1, "creation_date": 1466608895, "post_id": 37971660, "comment_id": 63390677, "body": "@Aurimas note that <code>0 ? &quot;something&quot;</code> in CoffeeScript also returns <code>0</code>, it&#39;s not equivalent to JavaScript&#39;s <code>||</code>"}, {"owner": {"reputation": 1837, "user_id": 2190425, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/24ca4182ce692ec73ef35a86f268c802?s=128&d=identicon&r=PG", "display_name": "Aurimas", "link": "https://stackoverflow.com/users/2190425/aurimas"}, "edited": false, "score": 0, "creation_date": 1466609319, "post_id": 37971660, "comment_id": 63390973, "body": "Figures, totally wrong question, but maybe useful to somebody else. If you know the answer to my new question - feel free to elaborate. I have to wait 90min to ask new question."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1466610917, "post_id": 37971660, "comment_id": 63392101, "body": "<code>name = (a.nil? || a.empty? || a.zero?) ? &#39;bear&#39; : a</code>?"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 3, "last_activity_date": 1466607292, "creation_date": 1466607292, "answer_id": 37971660, "question_id": 37971599, "link": "https://stackoverflow.com/questions/37971599/ruby-equivalent-to-coffeescript-shortened-version-of-shorthand-if-operator/37971660#37971660", "title": "Ruby equivalent to Coffeescript shortened version of shorthand `if` operator", "body": "<p>Boolean <code>or</code>:</p>\n\n<pre><code>name = a || \"bear\"\n</code></pre>\n\n<p>To be precise, the following is an exact equivalent (there is no <code>undefined</code> in ruby):</p>\n\n<pre><code>name = a.nil? ? 'bear' : a\n</code></pre>\n"}], "owner": {"reputation": 1837, "user_id": 2190425, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/24ca4182ce692ec73ef35a86f268c802?s=128&d=identicon&r=PG", "display_name": "Aurimas", "link": "https://stackoverflow.com/users/2190425/aurimas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 37971660, "answer_count": 1, "score": 1, "last_activity_date": 1466613336, "creation_date": 1466607136, "last_edit_date": 1466613336, "question_id": 37971599, "link": "https://stackoverflow.com/questions/37971599/ruby-equivalent-to-coffeescript-shortened-version-of-shorthand-if-operator", "title": "Ruby equivalent to Coffeescript shortened version of shorthand `if` operator", "body": "<p>In coffeescript you can do <code>name = a ? \"bear\"</code>. How can you do this in Ruby?</p>\n\n<p>For those not aware of Coffeescript (v1.10), the statement above translates to Javascript as so:</p>\n\n<pre><code>name = typeof a !== \"undefined\" &amp;&amp; a !== null ? a : \"bear\"\n</code></pre>\n\n<p>In other words, if <code>a</code> is <code>undefined</code> or <code>null</code>, then assign <code>\"bear\"</code> to <code>name</code> (instead of assigning <code>a</code> to <code>name</code>)</p>\n"}, {"tags": ["ruby", "testing", "rspec", "rspec3"], "comments": [{"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1466609085, "post_id": 37971550, "comment_id": 63390808, "body": "Why do you feel that <code>request.env</code> is method, and not a <code>Hash</code>?"}, {"owner": {"reputation": 7633, "user_id": 417449, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/313df1d3543ef456912017412509a395?s=128&d=identicon&r=PG", "display_name": "Noah Clark", "link": "https://stackoverflow.com/users/417449/noah-clark"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1466609579, "post_id": 37971550, "comment_id": 63391165, "body": "I guess it doesn&#39;t really matter right? It&#39;s return value is a hash. So it really is how do you stub a hash look up."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1466618265, "post_id": 37971550, "comment_id": 63396601, "body": "<code>request.env</code> is compelled to return an object if you want that notation to work, but it&#39;s not compelled to do any work. When that object has its <code>[]</code> method called that&#39;s when you need to stub. Are you asking for a stub that returns a stub on-demand?"}], "answers": [{"tags": [], "owner": {"reputation": 1396, "user_id": 1425701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5adcc8f5c0e025e9b33e80ba19cf7d82?s=128&d=identicon&r=PG", "display_name": "nTraum", "link": "https://stackoverflow.com/users/1425701/ntraum"}, "is_accepted": false, "score": 1, "last_activity_date": 1466610415, "last_edit_date": 1466610415, "creation_date": 1466610096, "answer_id": 37972717, "question_id": 37971550, "link": "https://stackoverflow.com/questions/37971550/how-do-i-stub-a-method-call-followed-by-hash-look-up/37972717#37972717", "title": "How do I stub a method call followed by hash look up?", "body": "<pre><code>RSpec.describe Hash do\n  subject { described_class.new(foo: :bar) }\n\n  it \"returns the value via #[]\" do\n    expect(subject).to receive(\"[]\").with(:foo)\n    subject[:foo]\n  end\nend\n</code></pre>\n\n<p>In Ruby, <code>hash[:foo]</code> is just syntactic sugar. It's identical to calling the method <code>[]</code> with the argument <code>:foo</code> on the hash:</p>\n\n<pre><code>hash = { foo: :bar }\n#=&gt; {:foo=&gt;:bar}\nhash.public_send(\"[]\", :foo)\n#=&gt; :bar\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 969, "user_id": 3937845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HMxb5.jpg?s=128&g=1", "display_name": "tyamagu2", "link": "https://stackoverflow.com/users/3937845/tyamagu2"}, "is_accepted": false, "score": 2, "last_activity_date": 1466619320, "creation_date": 1466619320, "answer_id": 37975476, "question_id": 37971550, "link": "https://stackoverflow.com/questions/37971550/how-do-i-stub-a-method-call-followed-by-hash-look-up/37975476#37975476", "title": "How do I stub a method call followed by hash look up?", "body": "<p>I assume you want to stub <code>#[]</code> method of request.env. One way to do so is to define a singleton method in request.env using <code>define_singleton_method</code> and override the original <code>#[]</code> method.</p>\n\n<pre><code>[19] pry(main)&gt; env = { a: 1 } # or whatever object of a class that has #[]\n=&gt; {:a=&gt;1}\n[20] pry(main)&gt; env[:a]\n=&gt; 1\n[21] pry(main)&gt; env.size\n=&gt; 2\n[22] pry(main)&gt; env.define_singleton_method(:[]) { |key| key.upcase }\n=&gt; :[]\n[23] pry(main)&gt; env[:a]\n=&gt; :A\n[24] pry(main)&gt; env.size\n=&gt; 2\n[25] pry(main)&gt; env.define_singleton_method(:[]) { |key| key == 'HTTP_REFERER' ? 'http://example.com' : super(key) }\n=&gt; :[]\n[26] pry(main)&gt; env[:a]\n=&gt; 1\n[27] pry(main)&gt; env['HTTP_REFERER']\n=&gt; \"http://example.com\"\n</code></pre>\n"}], "owner": {"reputation": 7633, "user_id": 417449, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/313df1d3543ef456912017412509a395?s=128&d=identicon&r=PG", "display_name": "Noah Clark", "link": "https://stackoverflow.com/users/417449/noah-clark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1466619320, "creation_date": 1466607044, "last_edit_date": 1466611824, "question_id": 37971550, "link": "https://stackoverflow.com/questions/37971550/how-do-i-stub-a-method-call-followed-by-hash-look-up", "title": "How do I stub a method call followed by hash look up?", "body": "<p>I have the following:</p>\n\n<pre><code>request.env['HTTP_REFERER']\n</code></pre>\n\n<p>and want to stub the <code>request.env</code> only when it is followed by the hash look up.</p>\n\n<p>Any thoughts on how to do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "factory-bot"], "answers": [{"comments": [{"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 0, "creation_date": 1466607795, "post_id": 37971773, "comment_id": 63389902, "body": "Oh wow!  Awesome thanks!  Looks like I need to study up more on blocks.  Appreciate it!"}], "tags": [], "owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "is_accepted": true, "score": 2, "last_activity_date": 1466607612, "creation_date": 1466607612, "answer_id": 37971773, "question_id": 37971503, "link": "https://stackoverflow.com/questions/37971503/shorthand-block-syntax-for-factory-girl-traits/37971773#37971773", "title": "Shorthand block syntax for factory_girl traits", "body": "<p>You see, <code>trait</code> is actually a method that takes a name of the trait and a block. These are 2 parameters of a method. When you used <code>do ... end</code> syntax, Ruby interpreter could guess that you are giving a second (block) argument. But, in the second <code>{ ... }</code> case, it is not clear, because you might be passing a <code>Hash</code> for example.</p>\n\n<p>That's why you need to make it clear that you are passing in the second param and it is a block like this:</p>\n\n<pre><code>trait(:my_name) { name \"Neil\" }\n</code></pre>\n"}], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 1, "accepted_answer_id": 37971773, "answer_count": 1, "score": 0, "last_activity_date": 1466607612, "creation_date": 1466606904, "question_id": 37971503, "link": "https://stackoverflow.com/questions/37971503/shorthand-block-syntax-for-factory-girl-traits", "title": "Shorthand block syntax for factory_girl traits", "body": "<p>Is it possible to use the shorthand block syntax for <a href=\"https://rubygems.org/gems/factory_girl\" rel=\"nofollow\">factory_girl</a> traits?</p>\n\n<p>Consider this factory:</p>\n\n<pre><code>FactoryGirl.define do\n  factory :foo do\n    name \"name\"\n\n    # not using the block shorthand {} syntax, instead using do...end block syntax\n    trait :my_name do\n      name \"Neil\"\n    end\n\n  end\nend\n</code></pre>\n\n<p>And using this factory works:</p>\n\n<pre><code>create(:foo, traits: [:my_name])\n</code></pre>\n\n<p>However I would like to use the shorthand block syntax for my traits like so:</p>\n\n<pre><code>FactoryGirl.define do\n  factory :foo do\n    name \"name\"\n\n    # using shorthand block syntax but does not work\n    trait :my_name {name \"Neil\"}\n\n  end\nend\n</code></pre>\n\n<p>And now using this factory errors out.  Here is what happens:</p>\n\n<pre><code>create(:foo, traits: [:my_name])\n</code></pre>\n\n<blockquote>\n  <p>syntax error, unexpected '{', expecting keyword_end (SyntaxError)</p>\n</blockquote>\n\n<p>This seems odd because I thought that wherever you use <code>do ... end</code> you can opt for the shorthand <code>{}</code> block syntax.</p>\n\n<p><strong>Question</strong>:  Is there something wrong with my shorthand block syntax for the factory_girl <code>trait</code> method and that is why it is erroring out?  Or: are you just not allowed to use the shorthand block syntax with factory_girl <code>traits</code>?  Is there a way to make using the shorthand block syntax for factory_girl traits work?</p>\n\n<p><a href=\"http://www.rubydoc.info/gems/factory_girl/4.7.0/FactoryGirl/Trait\" rel=\"nofollow\">Docs on the factory_girl trait attribute</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 797, "user_id": 3067296, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZaNmN.png?s=128&g=1", "display_name": "DannyRosenblatt", "link": "https://stackoverflow.com/users/3067296/dannyrosenblatt"}, "edited": false, "score": 0, "creation_date": 1466683462, "post_id": 37973050, "comment_id": 63425809, "body": "Cool thanks, I didn&#39;t realize you could pass a block to allow/receive."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 3, "last_activity_date": 1466611091, "creation_date": 1466611091, "answer_id": 37973050, "question_id": 37971440, "link": "https://stackoverflow.com/questions/37971440/access-count-of-message-received/37973050#37973050", "title": "Access count of message received?", "body": "<p>Not very pretty, but your could set up your own counters like this:</p>\n\n<pre><code>@method_1_received_count = 0\n@method_2_received_count = 0\nallow(SomeClass).to receive(:method_1) { @method_1_received_count += 1 }\nallow(SomeClass).to receive(:method_2) { @method_2_received_count += 1 }\n\n# setup and code here\n\nexpect(@method_1_received_count).to eq(@method_2_received_count)\n</code></pre>\n"}], "owner": {"reputation": 797, "user_id": 3067296, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZaNmN.png?s=128&g=1", "display_name": "DannyRosenblatt", "link": "https://stackoverflow.com/users/3067296/dannyrosenblatt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 37973050, "answer_count": 1, "score": 1, "last_activity_date": 1466611091, "creation_date": 1466606744, "question_id": 37971440, "link": "https://stackoverflow.com/questions/37971440/access-count-of-message-received", "title": "Access count of message received?", "body": "<p>Is it possible to access in a test how many times an object has received a certain message? My goal is to test that a class has received two class method calls the same number of times.</p>\n\n<p>Logically, it seems like this count would be stored somewhere as code is executed.</p>\n\n<p>This would look something like </p>\n\n<pre><code>allow(SomeClass).to receive(:method_1).at_least(1).times\nallow(SomeClass).to receive(:method_2).at_least(1).times\n\n# setup and code here\n\nexpect(method_1_received_times).to eq (method_2_received_times)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1466606300, "post_id": 37971049, "comment_id": 63388742, "body": "This could be related: <a href=\"https://github.com/heroku/rails_stdout_logging/issues/1\" rel=\"nofollow noreferrer\">Rails 4 log messages appear 2x</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1018, "user_id": 2908778, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/shRDJ.png?s=128&g=1", "display_name": "Seal", "link": "https://stackoverflow.com/users/2908778/seal"}, "edited": false, "score": 0, "creation_date": 1466611254, "post_id": 37971384, "comment_id": 63392347, "body": "I thought that this was fixed prior to rails <code>4.2.5</code>"}], "tags": [], "owner": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "is_accepted": false, "score": 0, "last_activity_date": 1466606614, "creation_date": 1466606614, "answer_id": 37971384, "question_id": 37971049, "link": "https://stackoverflow.com/questions/37971049/double-everything-in-my-db-logs-rails/37971384#37971384", "title": "Double everything in my db logs Rails", "body": "<p>you can add the following to application.rb</p>\n\n<pre><code>        if Rails.env.development?\n            # Don't log to STDOUT, by default rails s will handle it\n            config.logger = Logger.new('/dev/null')\n        else\n            # Don't log to file, sending everything to unicorn file.\n            config.logger = Logger.new(STDOUT)\n        end\n</code></pre>\n\n<p>Basically rails server and rails logger both send their messages to stdout which results in duplication in the logs. </p>\n"}], "owner": {"reputation": 1018, "user_id": 2908778, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/shRDJ.png?s=128&g=1", "display_name": "Seal", "link": "https://stackoverflow.com/users/2908778/seal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466606614, "creation_date": 1466605731, "question_id": 37971049, "link": "https://stackoverflow.com/questions/37971049/double-everything-in-my-db-logs-rails", "title": "Double everything in my db logs Rails", "body": "<p>I have double everything in my logs.  Not sure how to get rid of it.  Any suggestions?</p>\n\n<pre><code>  Bid Load (0.2ms)  SELECT \"bids\".* FROM \"bids\" WHERE \"bids\".\"order_id\" = $1  [[\"order_id\", 7]]\n  Bid Load (0.2ms)  SELECT \"bids\".* FROM \"bids\" WHERE \"bids\".\"order_id\" = $1  [[\"order_id\", 7]]\n  Size Load (0.2ms)  SELECT  \"sizes\".* FROM \"sizes\" WHERE \"sizes\".\"order_id\" = $1 LIMIT 1  [[\"order_id\", 7]]\n  Size Load (0.2ms)  SELECT  \"sizes\".* FROM \"sizes\" WHERE \"sizes\".\"order_id\" = $1 LIMIT 1  [[\"order_id\", 7]]\n  Bid Load (0.2ms)  SELECT \"bids\".* FROM \"bids\" WHERE \"bids\".\"order_id\" = $1  [[\"order_id\", 8]]\n  Bid Load (0.2ms)  SELECT \"bids\".* FROM \"bids\" WHERE \"bids\".\"order_id\" = $1  [[\"order_id\", 8]]\n  Size Load (0.3ms)  SELECT  \"sizes\".* FROM \"sizes\" WHERE \"sizes\".\"order_id\" = $1 LIMIT 1  [[\"order_id\", 8]]\n  Size Load (0.3ms)  SELECT  \"sizes\".* FROM \"sizes\" WHERE \"sizes\".\"order_id\" = $1 LIMIT 1  [[\"order_id\", 8]]\n  Bid Load (0.2ms)  SELECT \"bids\".* FROM \"bids\" WHERE \"bids\".\"order_id\" = $1  [[\"order_id\", 9]]\n  Bid Load (0.2ms)  SELECT \"bids\".* FROM \"bids\" WHERE \"bids\".\"order_id\" = $1  [[\"order_id\", 9]]\n  Size Load (0.2ms)  SELECT  \"sizes\".* FROM \"sizes\" WHERE \"sizes\".\"order_id\" = $1 LIMIT 1  [[\"order_id\", 9]]\n  Size Load (0.2ms)  SELECT  \"sizes\".* FROM \"sizes\" WHERE \"sizes\".\"order_id\" = $1 LIMIT 1  [[\"order_id\", 9]]\n  Bid Load (0.2ms)  SELECT \"bids\".* FROM \"bids\" WHERE \"bids\".\"order_id\" = $1  [[\"order_id\", 10]]\n  Bid Load (0.2ms)  SELECT \"bids\".* FROM \"bids\" WHERE \"bids\".\"order_id\" = $1  [[\"order_id\", 10]]\n  CACHE (0.0ms)  SELECT  \"printers\".* FROM \"printers\" WHERE \"printers\".\"id\" = $1 LIMIT 1  [[\"id\", 1]]\n  CACHE (0.0ms)  SELECT  \"printers\".* FROM \"printers\" WHERE \"printers\".\"id\" = $1 LIMIT 1  [[\"id\", 1]]\n  Size Load (0.2ms)  SELECT  \"sizes\".* FROM \"sizes\" WHERE \"sizes\".\"order_id\" = $1 LIMIT 1  [[\"order_id\", 10]]\n  Size Load (0.2ms)  SELECT  \"sizes\".* FROM \"sizes\" WHERE \"sizes\".\"order_id\" = $1 LIMIT 1  [[\"order_id\", 10]]\n</code></pre>\n\n<p>Rails Version <code>Rails 4.2.5</code>\nRuby Version <code>2.3.0</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 4313, "user_id": 1177198, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4ea56c658e69eef33b6557b20c7a19ab?s=128&d=identicon&r=PG", "display_name": "bigtunacan", "link": "https://stackoverflow.com/users/1177198/bigtunacan"}, "edited": false, "score": 0, "creation_date": 1466606393, "post_id": 37971146, "comment_id": 63388819, "body": "I understand that it has moved out to <code>ActiveRecord::AttributeAssignment</code>.  This is a module now though so I don&#39;t see a clear way to monkey patch this.  I also agree that monkey-patching core classes is a bad idea; that said this is started as a Rail 1 app that is well over 1/2 million lines of code so right now I&#39;m just interested in keeping the existing functionality working and improvements can go in one step at a time."}], "tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": false, "score": 1, "last_activity_date": 1466605977, "creation_date": 1466605977, "answer_id": 37971146, "question_id": 37971037, "link": "https://stackoverflow.com/questions/37971037/activerecordbaseassign-attributes-monkey-patch-doesnt-work-after-rails-4-upg/37971146#37971146", "title": "ActiveRecord::Base#assign_attributes monkey patch doesn&#39;t work after Rails 4 upgrade", "body": "<p>This (and many other) methods were split out into concerns in Rails 4. This one went into <code>ActiveRecord::AttributeAssignment</code>. You should be monkey-patching that concern, not <code>ActiveRecord::Base</code>.</p>\n\n<p>That said, if you want to define your own <code>assign_attributes</code> method, you should do so by defining your own concern, <strong>not</strong> by monkey-patching core classes.</p>\n"}], "owner": {"reputation": 4313, "user_id": 1177198, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4ea56c658e69eef33b6557b20c7a19ab?s=128&d=identicon&r=PG", "display_name": "bigtunacan", "link": "https://stackoverflow.com/users/1177198/bigtunacan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466605977, "creation_date": 1466605703, "question_id": 37971037, "link": "https://stackoverflow.com/questions/37971037/activerecordbaseassign-attributes-monkey-patch-doesnt-work-after-rails-4-upg", "title": "ActiveRecord::Base#assign_attributes monkey patch doesn&#39;t work after Rails 4 upgrade", "body": "<p>I'm upgrading an existing Rails 3 upgrade to Rails 4.  This application monkey patches <code>ActiveRecord::Base#assign_attributes</code> and was working fine in Rails 3; now in Rails 4 the monkey patched code never gets called.</p>\n\n<p>I have a config initializer which requires the monkey patched code from the lib directory and I can see that it is run once during the startup initialization process.</p>\n\n<p>This is a simplified version of the monkey patch file from the lib directory.</p>\n\n<pre><code># encoding: UTF-8\nmodule ActiveRecord\n  class Base\n    alias_method :default_assign_attributes, :assign_attributes\n\n    def assign_attributes(new_attributes)\n      # Do some custom stuff here\n      default_assign_attributes(new_attributes)\n    end\n\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "yard"], "comments": [{"owner": {"reputation": 1135, "user_id": 1638009, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cce87e94a76af5a587b5c9fe48461910?s=128&d=identicon&r=PG", "display_name": "Shimu", "link": "https://stackoverflow.com/users/1638009/shimu"}, "edited": false, "score": 0, "creation_date": 1466663499, "post_id": 37970478, "comment_id": 63412541, "body": "Did you take a look to the template architecture docu? <a href=\"http://www.rubydoc.info/gems/yard/file/docs/Templates.md\" rel=\"nofollow noreferrer\">rubydoc.info/gems/yard/file/docs/Templates.md</a>"}, {"owner": {"reputation": 1482, "user_id": 33483, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/955323838b1c111c5e9b1936dc44d9fd?s=128&d=identicon&r=PG", "display_name": "Tom Opgenorth", "link": "https://stackoverflow.com/users/33483/tom-opgenorth"}, "reply_to_user": {"reputation": 1135, "user_id": 1638009, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cce87e94a76af5a587b5c9fe48461910?s=128&d=identicon&r=PG", "display_name": "Shimu", "link": "https://stackoverflow.com/users/1638009/shimu"}, "edited": false, "score": 3, "creation_date": 1466689147, "post_id": 37970478, "comment_id": 63430202, "body": "Yes I did. I also had a co-worker look at the YARD template architecture independently. He came to the same conclusion as me, that the existing documentation is weak on this topic.  The YARD docs seem to be geared more towards extending or tweaking the existing templates."}], "owner": {"reputation": 1482, "user_id": 33483, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/955323838b1c111c5e9b1936dc44d9fd?s=128&d=identicon&r=PG", "display_name": "Tom Opgenorth", "link": "https://stackoverflow.com/users/33483/tom-opgenorth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 490, "favorite_count": 1, "answer_count": 0, "score": 6, "last_activity_date": 1466612213, "creation_date": 1466604398, "last_edit_date": 1466612213, "question_id": 37970478, "link": "https://stackoverflow.com/questions/37970478/create-a-completely-new-template-for-yard", "title": "Create a completely new template for YARD?", "body": "<p>I need to change the structure of the HTML documentation generated by <a href=\"http://yardoc.org\" rel=\"noreferrer\">Yard</a>; there isn't much in common with the default HTML template.</p>\n\n<p>As I understand it, the solution to this is to create a new YARD template,  but I'm having trouble creating one. The <a href=\"http://www.rubydoc.info/gems/yard/file/docs/GettingStarted.md#Templating_YARD\" rel=\"noreferrer\">YARD documentation</a> and an <a href=\"http://gnuu.org/2009/11/18/customizing-yard-templates/\" rel=\"noreferrer\">old blog post on customizing on this topic</a> seem to be geared more towards tweaking the existing template.</p>\n\n<p>I was hoping that someone can help me with some references or samples on creating a brand new YARD template.</p>\n"}, {"tags": ["ruby", "google-cloud-messaging", "apple-push-notifications"], "answers": [{"tags": [], "owner": {"reputation": 15264, "user_id": 6143482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MD37S.jpg?s=128&g=1", "display_name": "noogui", "link": "https://stackoverflow.com/users/6143482/noogui"}, "is_accepted": true, "score": 0, "last_activity_date": 1466673237, "creation_date": 1466673237, "answer_id": 37987218, "question_id": 37970138, "link": "https://stackoverflow.com/questions/37970138/apns-and-gcm-for-android-ios-and-browsers/37987218#37987218", "title": "APNS and GCM for Android, iOs and Browsers", "body": "<p><strong>I wonder if the process of registration of the client(for whom we send push-messages from server) is same for Android and Chrome?(Safari and iOS)</strong></p>\n\n<p><em>From the <a href=\"https://developers.google.com/cloud-messaging/android/client#sample-register\" rel=\"nofollow\">GCM Android docs</a></em> :</p>\n\n<blockquote>\n  <p>An Android application needs to register with GCM connection servers\n  before it can receive messages. When an app registers, it receives a\n  registration token and sends it to the app server. The client app\n  should store a boolean value indicating whether the registration token\n  has been sent to the server. Google provides the Instance ID API to\n  handle the creation and updating of registration tokens.</p>\n</blockquote>\n\n<p><em>From the <a href=\"https://developers.google.com/cloud-messaging/chrome/client\" rel=\"nofollow\">GCM Chrome docs</a></em>:</p>\n\n<blockquote>\n  <p>For Chrome apps and extensions, GCM enables Chrome instances to send\n  and receive message data from servers. The chrome.gcm API allows the\n  Chrome apps or extensions to access the GCM service. The service works\n  even if an app or extension isn't currently running.</p>\n</blockquote>\n\n<p><em>From the <a href=\"https://developers.google.com/cloud-messaging/ios/client\" rel=\"nofollow\">GCM iOS docs</a></em>:</p>\n\n<blockquote>\n  <p>Before it can receive messages, an iOS application needs to register\n  with both Apple Push Notification service (APNs) and the GCM\n  connection server. When a client app registers with GCM, it receives a\n  registration token, which it must then send to the app server (the\n  APNs device token is not sent to the server). The client app must\n  store a boolean value indicating whether the registration token has\n  been sent to the server.</p>\n</blockquote>\n\n<p><strong>What is different, except device_id, when I send push message from the server to browser and to android app?</strong></p>\n\n<p>Chrome apps and extensions can access the GCM service directly through chrome.gcm API. Android needs to setup configurations like Google Play Services, manifests, etc.</p>\n\n<p><strong>Can I expect that when I send a message via GCM(or APNS) it will be delivered for Browsers and for Android devices as well?(if correct id specified)</strong>\n      Yes.</p>\n\n<p><strong>I should handle browser users and Android app users like absolutely different entities?</strong> \nGCM was built to support chrome, ios, and android. Watch this <a href=\"https://www.youtube.com/watch?v=owhf42SZadk\" rel=\"nofollow\">Google GCM video</a> for additional info.</p>\n"}], "owner": {"reputation": 23, "user_id": 5465991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a0a16c75c9f48f6a7802dfd09600110?s=128&d=identicon&r=PG", "display_name": "Maxc", "link": "https://stackoverflow.com/users/5465991/maxc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "accepted_answer_id": 37987218, "answer_count": 1, "score": 0, "last_activity_date": 1466673237, "creation_date": 1466603538, "question_id": 37970138, "link": "https://stackoverflow.com/questions/37970138/apns-and-gcm-for-android-ios-and-browsers", "title": "APNS and GCM for Android, iOs and Browsers", "body": "<p>Dear stackoverflow guys, </p>\n\n<p>I want to use APNS and GCM  to create push notifications like a boss. But one thing is still unclear to me. I wonder if the process of registration of the client(for whom we send push-messages from server) is same for Android and Chrome?(Safari and iOS) </p>\n\n<p>What is different except device_id when I send push message from the server to browser and to android app?</p>\n\n<p>Can I expect that when I send a message via GCM(or APNS) it will be delivered for Browsers and for Android devices as well?(if correct id specified)</p>\n\n<p>Should I manually style them differently?</p>\n\n<p>Or I should handle browser users and Android app users like absolutely different entities?</p>\n\n<p>Thanks in advance and sorry for the messy message, xnagpa</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 7071, "user_id": 549010, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/181219cd20b8036ef8ec45b94aed6474?s=128&d=identicon&r=PG", "display_name": "Roger", "link": "https://stackoverflow.com/users/549010/roger"}, "edited": false, "score": 0, "creation_date": 1466602668, "post_id": 37969579, "comment_id": 63385348, "body": "So  value of <code>__content__</code> need to go in <code>parentId</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 713, "user_id": 520910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79a6856519364c26462c51fea9b8e29b?s=128&d=identicon&r=PG", "display_name": "Larry Lv", "link": "https://stackoverflow.com/users/520910/larry-lv"}, "is_accepted": false, "score": 0, "last_activity_date": 1466602640, "creation_date": 1466602640, "answer_id": 37969789, "question_id": 37969579, "link": "https://stackoverflow.com/questions/37969579/replace-hash-value/37969789#37969789", "title": "Replace hash value", "body": "<pre><code>arr = [{\"__content__\"=&gt;\"Guitars\", \"id\"=&gt;\"2\"}, {\"__content__\"=&gt;\"For Guitars\", \"id\"=&gt;\"3\", \"parentId\"=&gt;\"2\"}]\n\nid_content_mapping = arr.reduce({}) do |h, elt|\n  h[elt[\"id\"]] = elt[\"__content__\"]\n  h\nend\n\narr.map do |elt|\n  if elt.has_key? \"parentId\"\n    elt[\"parentId\"] = id_content_mapping[elt[\"parentId\"]]\n  end\n  elt\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1241, "user_id": 4402478, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/6db20762ebe145c59b6e10eb68955678?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4402478/user"}, "edited": false, "score": 0, "creation_date": 1466603453, "post_id": 37969943, "comment_id": 63386121, "body": ",it works.Pretty complex,but in general it did what i need. thx"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1466613775, "post_id": 37969943, "comment_id": 63393930, "body": "I upvoted, but have two suggestions for improving your answer. Firstly, when you present the solution you would use, adding an inferior alternative (here the one that uses <code>sort</code>) weakens your answer. (When there are two ways of doing something that does not have a clear winner, sure, present them both.) Secondly, I think most readers would like to see all the code in one place, rather than building it with explanations. You could either put the code first, then explain the steps (which readers who understand the code may skip) or give the steps in words before you present the code."}, {"owner": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1466662072, "post_id": 37969943, "comment_id": 63411909, "body": "@CarySwoveland Thank you for your suggestions. I will try to improve my answers."}], "tags": [], "owner": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "is_accepted": true, "score": 4, "last_activity_date": 1466603539, "last_edit_date": 1466603539, "creation_date": 1466602998, "answer_id": 37969943, "question_id": 37969579, "link": "https://stackoverflow.com/questions/37969579/replace-hash-value/37969943#37969943", "title": "Replace hash value", "body": "<p>I prefer to change this nasted <code>array</code> to <code>hash</code> for better maping.</p>\n\n<p><strong>input</strong></p>\n\n<pre><code>arr = [\n  {\"__content__\" =&gt; \"Guitars\", \"id\" =&gt; \"2\"},\n  {\"__content__\" =&gt; \"For Guitars\", \"id\" =&gt; \"3\", \"parentId\" =&gt; \"2\"},\n  {\"__content__\" =&gt; \"6-string\", \"id\" =&gt; \"24\", \"parentId\" =&gt; \"2\"},\n  {\"__content__\" =&gt; \"7-string\", \"id\" =&gt; \"25\", \"parentId\" =&gt; \"2\"},\n  {\"__content__\" =&gt; \"8-string\", \"id\" =&gt; \"26\", \"parentId\" =&gt; \"2\"}\n]\n</code></pre>\n\n<p><strong>create parents</strong></p>\n\n<pre><code>parents = arr.each_with_object({}) { |h, exp| exp[h['id']] = h['__content__'] }\n</code></pre>\n\n<p>After this good map structure you can use simply <code>map</code> method.</p>\n\n<p><strong>process</strong></p>\n\n<pre><code>output = arr.map do |h|\n  h['parentId'] = parents[h['parentId']] if h['parentId'] &amp;&amp; parents[h['parentId']]\n  h\nend\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>p output\n\n# [\n#   {\"__content__\" =&gt; \"Guitars\", \"id\" =&gt; \"2\"},\n#   {\"__content__\" =&gt; \"For Guitars\", \"id\" =&gt; \"3\", \"parentId\" =&gt; \"Guitars\"},\n#   {\"__content__\" =&gt; \"6-string\", \"id\" =&gt; \"24\", \"parentId\" =&gt; \"Guitars\"},\n#   {\"__content__\" =&gt; \"7-string\", \"id\" =&gt; \"25\", \"parentId\" =&gt; \"Guitars\"},\n#   {\"__content__\" =&gt; \"8-string\", \"id\" =&gt; \"26\", \"parentId\" =&gt; \"Guitars\"}\n# ]\n</code></pre>\n\n<p>I hope this helps.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>You can also use this way</p>\n\n<p>sort by ID</p>\n\n<pre><code>arr.sort_by! { |h| h['id'] }\n</code></pre>\n\n<p><strong>process</strong></p>\n\n<pre><code>output = arr.each_with_object({}) do |h, exp|\n    exp[h['id']] = h\n    h['parentId'] = exp[h['parentId']]['__content__'] if h['parentId'] &amp;&amp; exp[h['parentId']]\n    h\n  end\n</code></pre>\n\n<p>after this you will have hash with id like keys, so for your output:</p>\n\n<p><strong>output</strong></p>\n\n<pre><code>p output.values\n\n# [\n#  {\"__content__\"=&gt;\"Guitars\", \"id\"=&gt;\"2\"},\n#  {\"__content__\"=&gt;\"6-string\", \"id\"=&gt;\"24\", \"parentId\"=&gt;\"Guitars\"},\n#  {\"__content__\"=&gt;\"7-string\", \"id\"=&gt;\"25\", \"parentId\"=&gt;\"Guitars\"}, \n#  {\"__content__\"=&gt;\"8-string\", \"id\"=&gt;\"26\", \"parentId\"=&gt;\"Guitars\"},\n#  {\"__content__\"=&gt;\"For Guitars\", \"id\"=&gt;\"3\", \"parentId\"=&gt;\"Guitars\"}\n# ]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1466610160, "post_id": 37970816, "comment_id": 63391602, "body": "That&#39;s an interesting name for an array."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1466615230, "post_id": 37970816, "comment_id": 63394833, "body": "@CarySwoveland I love to tangle!"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1466615798, "post_id": 37970816, "comment_id": 63395141, "body": "I&#39;ve noticed. Me, I&#39;m crushed by criticism."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1466615889, "post_id": 37970816, "comment_id": 63395185, "body": "@CarySwoveland I appended a locale (&#39;es&#39; in my case) to the original name and it seemed to fix everything :)"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1466615828, "last_edit_date": 1466615828, "creation_date": 1466605172, "answer_id": 37970816, "question_id": 37969579, "link": "https://stackoverflow.com/questions/37969579/replace-hash-value/37970816#37970816", "title": "Replace hash value", "body": "<p>Beware! The solution below mutates the original hash!</p>\n\n<pre><code>\u25b6 hashes = [{\"__content__\"=&gt;\"Guitars\", \"id\"=&gt;\"2\"},\n\u25b7   {\"__content__\"=&gt;\"For Guitars\", \"id\"=&gt;\"3\", \"parentId\"=&gt;\"2\"}, \n\u25b7   {\"__content__\"=&gt;\"6-string\", \"id\"=&gt;\"24\", \"parentId\"=&gt;\"2\"}, \n\u25b7   {\"__content__\"=&gt;\"7-string\", \"id\"=&gt;\"25\", \"parentId\"=&gt;\"2\"}, \n\u25b7   {\"__content__\"=&gt;\"8-string\", \"id\"=&gt;\"26\", \"parentId\"=&gt;\"2\"}]   \n\nhashes.each_with_object({}) do |h, memo|\n  memo[h['id']] = h['__content__']\n  h['parentId'] = memo[h['parentId']]\nend\n\nhashes\n#\u21d2 [{\"__content__\"=&gt;\"Guitars\", \"id\"=&gt;\"2\", \"parentId\"=&gt;nil},\n#   {\"__content__\"=&gt;\"For Guitars\", \"id\"=&gt;\"3\", \"parentId\"=&gt;\"Guitars\"},\n#   {\"__content__\"=&gt;\"6-string\", \"id\"=&gt;\"24\", \"parentId\"=&gt;\"Guitars\"},\n#   {\"__content__\"=&gt;\"7-string\", \"id\"=&gt;\"25\", \"parentId\"=&gt;\"Guitars\"},\n#   {\"__content__\"=&gt;\"8-string\", \"id\"=&gt;\"26\", \"parentId\"=&gt;\"Guitars\"}]\n</code></pre>\n"}], "owner": {"reputation": 1241, "user_id": 4402478, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/6db20762ebe145c59b6e10eb68955678?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4402478/user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 461, "favorite_count": 0, "accepted_answer_id": 37969943, "answer_count": 3, "score": 0, "last_activity_date": 1466615828, "creation_date": 1466602164, "last_edit_date": 1466611977, "question_id": 37969579, "link": "https://stackoverflow.com/questions/37969579/replace-hash-value", "title": "Replace hash value", "body": "<p>I have an array of hashes:</p>\n\n<pre><code>[{\"__content__\"=&gt;\"Guitars\", \"id\"=&gt;\"2\"},\n {\"__content__\"=&gt;\"For Guitars\", \"id\"=&gt;\"3\", \"parentId\"=&gt;\"2\"},\n {\"__content__\"=&gt;\"6-string\", \"id\"=&gt;\"24\", \"parentId\"=&gt;\"2\"},\n {\"__content__\"=&gt;\"7-string\", \"id\"=&gt;\"25\", \"parentId\"=&gt;\"2\"},\n {\"__content__\"=&gt;\"8-string\", \"id\"=&gt;\"26\", \"parentId\"=&gt;\"2\"}]\n</code></pre>\n\n<p>I want to replace the <code>parentId</code> values with the <code>__content__</code> values to get:</p>\n\n<pre><code>[{\"__content__\"=&gt;\"Guitars\", \"id\"=&gt;\"2\"},\n {\"__content__\"=&gt;\"For Guitars\", \"id\"=&gt;\"3\", \"parentId\"=&gt;\"Guitars\"},\n {\"__content__\"=&gt;\"6-string\", \"id\"=&gt;\"24\", \"parentId\"=&gt;\"Guitars\"},\n {\"__content__\"=&gt;\"7-string\", \"id\"=&gt;\"25\", \"parentId\"=&gt;\"Guitars\"},\n {\"__content__\"=&gt;\"8-string\", \"id\"=&gt;\"26\", \"parentId\"=&gt;\"Guitars\"}]\n</code></pre>\n\n<p>How can I do it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb", "ruby-on-rails-3", "devise"], "comments": [{"owner": {"reputation": 5744, "user_id": 461557, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/chqe8.jpg?s=128&g=1", "display_name": "Viren", "link": "https://stackoverflow.com/users/461557/viren"}, "edited": false, "score": 1, "creation_date": 1466605578, "post_id": 37968602, "comment_id": 63388072, "body": "Ever wonder to do something like <a href=\"https://github.com/resque/resque-web/blob/master/README.md#security\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 4355, "user_id": 1392154, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/61e860048a2e2226ea2726fe3d29451a?s=128&d=identicon&r=PG", "display_name": "Elmor", "link": "https://stackoverflow.com/users/1392154/elmor"}, "reply_to_user": {"reputation": 5744, "user_id": 461557, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/chqe8.jpg?s=128&g=1", "display_name": "Viren", "link": "https://stackoverflow.com/users/461557/viren"}, "edited": false, "score": 0, "creation_date": 1467290511, "post_id": 37968602, "comment_id": 63678221, "body": "I&#39;ll try this out, thanks!"}], "owner": {"reputation": 4355, "user_id": 1392154, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/61e860048a2e2226ea2726fe3d29451a?s=128&d=identicon&r=PG", "display_name": "Elmor", "link": "https://stackoverflow.com/users/1392154/elmor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1466599908, "creation_date": 1466599908, "question_id": 37968602, "link": "https://stackoverflow.com/questions/37968602/rails-authenticate-mongodb-logger-with-devise", "title": "Rails authenticate mongodb_logger with devise", "body": "<p>I've got installed gems <code>mongodb_logger</code> and <code>devise</code>.<br>\nI was wondering how to restrict access to users who are registered in <code>devise</code> ?<br>\nI tried as follows( restricting to users with <code>admin</code> role)</p>\n\n<blockquote>\n  <p>authenticate :user, ->(u) { u.admin? } do<br>\n  mount MongodbLogger::Server.new,\n          at: \"/mongodb_logger\",\n          as: :mongodb_logger,</p>\n</blockquote>\n\n<p>in my routes.rb. But this didn't help... How can I do such a thing ?</p>\n"}, {"tags": ["ruby", "selenium"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6404631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/130a1ddf10351fab2b3a64ef85560b25?s=128&d=identicon&r=PG&f=1", "display_name": "Acolli", "link": "https://stackoverflow.com/users/6404631/acolli"}, "edited": false, "score": 0, "creation_date": 1466604346, "post_id": 37968829, "comment_id": 63386979, "body": "Thanks! it&#39;s exactly what i was looking for!"}, {"owner": {"reputation": 21114, "user_id": 3193455, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/47fc2c18bcbdb84eb374ca3f407c7318?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Gaur", "link": "https://stackoverflow.com/users/3193455/saurabh-gaur"}, "reply_to_user": {"reputation": 23, "user_id": 6404631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/130a1ddf10351fab2b3a64ef85560b25?s=128&d=identicon&r=PG&f=1", "display_name": "Acolli", "link": "https://stackoverflow.com/users/6404631/acolli"}, "edited": false, "score": 0, "creation_date": 1466604563, "post_id": 37968829, "comment_id": 63387171, "body": "@Acolli you are welcome..please have a look <a href=\"http://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\" title=\"how does accepting an answer work\">meta.stackexchange.com/questions/5234/&hellip;</a>"}], "tags": [], "owner": {"reputation": 21114, "user_id": 3193455, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/47fc2c18bcbdb84eb374ca3f407c7318?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Gaur", "link": "https://stackoverflow.com/users/3193455/saurabh-gaur"}, "is_accepted": false, "score": 3, "last_activity_date": 1466600421, "creation_date": 1466600421, "answer_id": 37968829, "question_id": 37968404, "link": "https://stackoverflow.com/questions/37968404/ruby-selenium-webdriver-displayed-method-not-working/37968829#37968829", "title": "Ruby Selenium WebDriver: .displayed? method not working", "body": "<p>Your <code>element</code> cannot be found, so <code>.displayed</code> cannot be determined. <code>.displayed</code> can only be called on an element that exists and has <strong>already been found</strong>.</p>\n\n<p>If you want to check <code>existence</code> of <code>element</code>, you should try as below :-</p>\n\n<pre><code>if (driver.find_elements(:class_name,'example').size &gt; 0)\nputs 'ELEMENT FOUND'\nelse\nputs 'NOT FOUND'\nend\n</code></pre>\n\n<p>Hope it will help you...:)</p>\n"}], "owner": {"reputation": 23, "user_id": 6404631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/130a1ddf10351fab2b3a64ef85560b25?s=128&d=identicon&r=PG&f=1", "display_name": "Acolli", "link": "https://stackoverflow.com/users/6404631/acolli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1247, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1466602754, "creation_date": 1466599429, "last_edit_date": 1495540351, "question_id": 37968404, "link": "https://stackoverflow.com/questions/37968404/ruby-selenium-webdriver-displayed-method-not-working", "title": "Ruby Selenium WebDriver: .displayed? method not working", "body": "<p>I am trying to run a script where I open a web page and look for a specific element. If the element is present I would like to put 'Element Found', if the element is not present put 'Not Found'. I always get the error <strong>'Unable to locate element'</strong></p>\n\n<p>I've tried to follow the advice <a href=\"https://stackoverflow.com/questions/27639550/how-to-test-whether-an-element-is-displayed-on-the-page/37967721#37967721\">here</a> but it is still not working. I think this is something relatively easy, but I really don't get what I'm doing wrong:</p>\n\n<pre><code>require 'rubygems'\nrequire 'selenium-webdriver'\n\ndriver = Selenium::WebDriver.for:firefox\ndriver.manage.timeouts.implicit_wait = 5\ndriver.get 'http://www.example.com'\n\ncase driver.find_element(:class_name,'example').displayed?\nwhen true\n    puts 'ELEMENT FOUND'\nwhen false\n    puts 'NOT FOUND'\nend\n</code></pre>\n\n<p>with <code>if</code> statement:</p>\n\n<pre><code>#the rest is identical as in the above example\nif (driver.find_element(:class_name,'example').displayed?)\n    puts 'ELEMENT FOUND'\nelse\n    puts 'NOT FOUND'\nend\n</code></pre>\n"}, {"tags": ["ruby", "database", "activerecord", "sinatra", "multi-database"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1466600001, "creation_date": 1466600001, "answer_id": 37968646, "question_id": 37968046, "link": "https://stackoverflow.com/questions/37968046/database-connection-too-much-with-activerecordbase-establish-connection/37968646#37968646", "title": "Database connection too much with ActiveRecord::Base.establish_connection", "body": "<p>Build a global hash of <code>{db_name =&gt; connection_instance }</code> for all possible connections you have and retrieve them from your models intelligently:</p>\n\n<pre><code>def get_or_establish_connection db\n  $connections[db] ||= establish_connection db\nend\n</code></pre>\n\n<p>That way you\u2019ll reuse all already established connections.</p>\n\n<p><strong>NB</strong> I wrote \u201cglobal\u201d because there is no way to suggest anything more robust without knowledge of your architecture details. In the real life one would put this hash as a class variable somewhere accessible from everywhere.</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 6405315, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ONaIL.jpg?s=128&g=1", "display_name": "sozgur", "link": "https://stackoverflow.com/users/6405315/sozgur"}, "edited": false, "score": 0, "creation_date": 1466626985, "post_id": 37968688, "comment_id": 63401227, "body": "I tried your suggest but Database class can&#39;t inherit to model class."}], "tags": [], "owner": {"reputation": 745, "user_id": 3033467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8a33988a3dc0d009236304ff4ad8d615?s=128&d=identicon&r=PG&f=1", "display_name": "user3033467", "link": "https://stackoverflow.com/users/3033467/user3033467"}, "is_accepted": false, "score": 0, "last_activity_date": 1466600102, "creation_date": 1466600102, "answer_id": 37968688, "question_id": 37968046, "link": "https://stackoverflow.com/questions/37968046/database-connection-too-much-with-activerecordbase-establish-connection/37968688#37968688", "title": "Database connection too much with ActiveRecord::Base.establish_connection", "body": "<p>What we did in our projects that used multiple databases was creating one class per database, that establish the connection, and make models inherit from it. That way, only one connection is created per database.</p>\n\n<pre><code>class UsageTable &lt; ActiveRecord::Base\n  self.abstract_class = true\n  establish_connection :usage\nend\nclass User &lt; UsageTable\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6405315, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ONaIL.jpg?s=128&g=1", "display_name": "sozgur", "link": "https://stackoverflow.com/users/6405315/sozgur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 241, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1466751519, "creation_date": 1466598546, "last_edit_date": 1466751519, "question_id": 37968046, "link": "https://stackoverflow.com/questions/37968046/database-connection-too-much-with-activerecordbase-establish-connection", "title": "Database connection too much with ActiveRecord::Base.establish_connection", "body": "<p>I use multible databases with ActiveRecord. I must put <code>establish_connection db</code> in all models. But i want to call the connection of libraries file. While put <code>establish_connection db</code> in for all models Database connection count is too much . How can I do other methods? </p>\n\n<p>My project is a Ruby on Sinatra.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "migration"], "comments": [{"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 2, "creation_date": 1466598061, "post_id": 37967789, "comment_id": 63381428, "body": "I would start by here: <a href=\"http://guides.rubyonrails.org/generators.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/generators.html</a>"}], "owner": {"reputation": 139, "user_id": 3414447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42bbdb27dde7e0ef8e9a3fada837d727?s=128&d=identicon&r=PG&f=1", "display_name": "Shivam", "link": "https://stackoverflow.com/users/3414447/shivam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 148, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1483034716, "creation_date": 1466597843, "last_edit_date": 1483034716, "question_id": 37967789, "link": "https://stackoverflow.com/questions/37967789/how-do-we-override-activerecordmigration-class", "title": "How do we override ActiveRecord::Migration class?", "body": "<p>I just wants to override the base migration class by adding some attribute in it.\ne.g.: for the purpose of soft delete, I wants whenever I generate a new migration using \"rails g migration\", <strong>is_deleted</strong> column always be there.\nSo the point is where we can define this <strong>is_deleted</strong> column as default column, to avoid re-writing it in each migration?</p>\n"}, {"tags": ["arrays", "ruby", "iterator"], "answers": [{"comments": [{"owner": {"reputation": 932, "user_id": 655051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc200fdbb63c5fa39f7a8c98b4915924?s=128&d=identicon&r=PG", "display_name": "Andi", "link": "https://stackoverflow.com/users/655051/andi"}, "edited": false, "score": 2, "creation_date": 1466597647, "post_id": 37967557, "comment_id": 63381149, "body": "Yes, this is exactly what i need! I looked through <a href=\"http://ruby-doc.org/core-2.1.0/Enumerable.html\" rel=\"nofollow noreferrer\">Enumerable</a> and <a href=\"http://ruby-doc.org/core-2.1.0/Enumerator.html\" rel=\"nofollow noreferrer\">Enumerator</a> but did not see this one. Thx"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 932, "user_id": 655051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc200fdbb63c5fa39f7a8c98b4915924?s=128&d=identicon&r=PG", "display_name": "Andi", "link": "https://stackoverflow.com/users/655051/andi"}, "edited": false, "score": 2, "creation_date": 1466599447, "post_id": 37967557, "comment_id": 63382480, "body": "@Andi and regarding your use case: <code>ary.each_cons(2).all? { |a, b| a &lt;= b }</code> returns <code>true</code> if the values are sorted. (unfortunately, you can&#39;t use <code>all?(&amp;:&lt;=)</code> here due to the way <code>each_cons</code> yields values)"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 42, "last_activity_date": 1466598916, "last_edit_date": 1466598916, "creation_date": 1466597217, "answer_id": 37967557, "question_id": 37967476, "link": "https://stackoverflow.com/questions/37967476/iterate-pairwise-through-a-ruby-array/37967557#37967557", "title": "Iterate pairwise through a ruby array", "body": "<p>You are looking for <a href=\"http://ruby-doc.org/core-2.3.1/Enumerable.html#method-i-each_cons\" rel=\"noreferrer\"><code>each_cons</code></a>:</p>\n\n<pre><code>(1..6).each_cons(2) { |a, b| p a: a, b: b }\n# {:a=&gt;1, :b=&gt;2}\n# {:a=&gt;2, :b=&gt;3}\n# {:a=&gt;3, :b=&gt;4}\n# {:a=&gt;4, :b=&gt;5}\n# {:a=&gt;5, :b=&gt;6}\n</code></pre>\n"}], "owner": {"reputation": 932, "user_id": 655051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc200fdbb63c5fa39f7a8c98b4915924?s=128&d=identicon&r=PG", "display_name": "Andi", "link": "https://stackoverflow.com/users/655051/andi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6742, "favorite_count": 2, "closed_date": 1551798235, "accepted_answer_id": 37967557, "answer_count": 1, "score": 25, "last_activity_date": 1525986822, "creation_date": 1466596977, "last_edit_date": 1495540445, "question_id": 37967476, "link": "https://stackoverflow.com/questions/37967476/iterate-pairwise-through-a-ruby-array", "closed_reason": "Duplicate", "title": "Iterate pairwise through a ruby array", "body": "<p>How can i iterate over a ruby array and always get two values, the current and the next, like:</p>\n\n<pre><code>[1,2,3,4,5,6].pairwise do |a,b|\n  # a=1, b=2 in first iteration\n  # a=2, b=3 in second iteration\n  # a=3, b=4 in third iteration\n  # ...\n  # a=5, b=6 in last iteration\nend\n</code></pre>\n\n<p>My usecase: I want to test if an array is sorted, and by having an iterator like this i could always compare two values.</p>\n\n<p>I am not searching for <code>each_slice</code> like in this question: <a href=\"https://stackoverflow.com/questions/3477775/converting-ruby-array-to-array-of-consecutive-pairs\">Converting ruby array to array of consecutive pairs</a></p>\n"}, {"tags": ["ruby", "sinatra", "bundle", "systemd"], "comments": [{"owner": {"reputation": 43, "user_id": 6498879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/172dbdecb2796f0a2e53323851a5a523?s=128&d=identicon&r=PG", "display_name": "rwaffen", "link": "https://stackoverflow.com/users/6498879/rwaffen"}, "edited": false, "score": 0, "creation_date": 1466599611, "post_id": 37966795, "comment_id": 63382613, "body": "tried to install all the gems system wide and start the service directly (without bundler) : same outcome. started on the cli all is fine, started via systemd it cannot load the config file."}], "answers": [{"tags": [], "owner": {"reputation": 11251, "user_id": 254318, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fqtBB.jpg?s=128&g=1", "display_name": "Mark Stosberg", "link": "https://stackoverflow.com/users/254318/mark-stosberg"}, "is_accepted": false, "score": 0, "last_activity_date": 1466607867, "creation_date": 1466607867, "answer_id": 37971866, "question_id": 37966795, "link": "https://stackoverflow.com/questions/37966795/sinatra-will-not-load-config-data-when-started-via-systemd/37971866#37971866", "title": "sinatra will not load config data when started via systemd", "body": "<p>Your systemd configuration looks good to me. You set both the environment variables and the WorkingDirectory correctly.</p>\n\n<p>Replace your app that with something that just dumps out the environment and the current directory. Run this test app through bundler, and also via systemd. </p>\n\n<p>You should find there's still some difference between the environment that is being set up by systemd and your alternate method.   Resolve the differences. :)</p>\n"}, {"tags": [], "owner": {"reputation": 43, "user_id": 6498879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/172dbdecb2796f0a2e53323851a5a523?s=128&d=identicon&r=PG", "display_name": "rwaffen", "link": "https://stackoverflow.com/users/6498879/rwaffen"}, "is_accepted": true, "score": 1, "last_activity_date": 1466770594, "creation_date": 1466770594, "answer_id": 38013262, "question_id": 37966795, "link": "https://stackoverflow.com/questions/37966795/sinatra-will-not-load-config-data-when-started-via-systemd/38013262#38013262", "title": "sinatra will not load config data when started via systemd", "body": "<p>after all it was</p>\n\n<pre><code>Environment=RACK_ENV=\"production\"\n</code></pre>\n\n<p>which should be more like</p>\n\n<pre><code>Environment=RACK_ENV=production\n</code></pre>\n\n<p>after this change, everything worked as expected!</p>\n"}], "owner": {"reputation": 43, "user_id": 6498879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/172dbdecb2796f0a2e53323851a5a523?s=128&d=identicon&r=PG", "display_name": "rwaffen", "link": "https://stackoverflow.com/users/6498879/rwaffen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 423, "favorite_count": 1, "accepted_answer_id": 38013262, "answer_count": 2, "score": 1, "last_activity_date": 1466770594, "creation_date": 1466595143, "last_edit_date": 1466597386, "question_id": 37966795, "link": "https://stackoverflow.com/questions/37966795/sinatra-will-not-load-config-data-when-started-via-systemd", "title": "sinatra will not load config data when started via systemd", "body": "<p>i have a sinatra app. when loaded locally via bundler, everything is fine. when i load the app via systemd the app got started, but the config file seems to be not loading. It says that in the logs that its loaded but the values are not available inside the app</p>\n\n<p>The unit file:</p>\n\n<pre><code>[Unit]\nDescription=PNL: Puppet Node Lister\nAfter=network.target\n\n[Service]\nType=simple\nExecStart=/bin/bundle exec ruby puppetdb_node_lister.rb\nKillMode=process\nEnvironment=RACK_ENV=\"production\"\nRestart=always\nUser=pnl\nGroup=pnl\nWorkingDirectory=/opt/puppetdb_node_lister\n\n[Install]\nWantedBy=multi-user.target\n</code></pre>\n\n<p>my sinatra app:</p>\n\n<pre><code>require 'rubygems'\nrequire 'sinatra'\nrequire 'sinatra/config_file'\nrequire 'json'\nrequire 'rest-client'\nrequire 'date'\nrequire 'time'\nrequire 'active_support/time_with_zone'\nrequire 'tilt/erb'\n\n### local methods\nrequire_relative 'lib/methods.rb'\n\nconfig_file 'config.yaml'\n\n### request area\nget '/' do\n \"#{settings.methods(false).inspect} &lt;br/&gt;&lt;br/&gt; #{$:} &lt;br/&gt;&lt;br/&gt; #{File.expand_path(File.dirname(__FILE__))}\"\n\nend\n</code></pre>\n\n<p>my yaml:</p>\n\n<pre><code>development:\n  username: 'test'\n  password: 'test'\n  puppetdb: 'puppet.example.com'\n  puppetsrv: 'puppet.example.com'\nproduction:\n  username: 'superadmin'\n  password: 'somes3cret'\n  puppetdb: 'puppet.example.com'\n  puppetsrv: 'puppet.example.com'\n</code></pre>\n\n<p>local bundle output of /</p>\n\n<pre><code>[:app_file=, :app_file, :app_file?, :logging=, :logging, :logging?, :method_override=, :method_override, :method_override?, :run=, :run, :run?, :session_secret=, :session_secret, :session_secret?, :register, :environments=, :environments, :environments?, :username=, :username, :username?, :password=, :password, :password?, :puppetdb=, :puppetdb, :puppetdb?, :puppetsrv=, :puppetsrv, :puppetsrv?, :traps=, :traps, :traps?, :running_server=, :running_server, :running_server?, :handler_name=, :handler_name, :handler_name?] \n\n[\"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/sinatra-contrib-1.4.7/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/sinatra-1.4.7/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/tilt-2.0.4/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/rubygems-update-2.6.4/hide_lib_for_update\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/rest-client-1.8.0/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/rack-test-0.6.3/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/rack-protection-1.5.3/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/rack-1.6.4/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/netrc-0.11.0/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/multi_json-1.12.1/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/mime-types-2.99.2/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/http-cookie-1.0.2/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/domain_name-0.5.20160310/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/unf-0.1.4/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/unf_ext-0.0.7.2/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/unf_ext-0.0.7.2/lib\", \"/usr/share/gems/gems/bundler-1.7.8/lib/gems/bundler-1.7.8/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/backports-3.6.8/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/activesupport-4.2.6/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/tzinfo-1.2.2/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/thread_safe-0.3.5/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/minitest-5.9.0/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/json-1.8.3/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/json-1.8.3/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/i18n-0.7.0/lib\", \"/usr/share/gems/gems/bundler-1.7.8/lib\", \"/usr/local/share/ruby/site_ruby\", \"/usr/local/lib64/ruby/site_ruby\", \"/usr/share/ruby/vendor_ruby\", \"/usr/lib64/ruby/vendor_ruby\", \"/usr/share/rubygems\", \"/usr/share/ruby\", \"/usr/lib64/ruby/\"] \n\n/opt/puppetdb_node_lister\n</code></pre>\n\n<p>systemd output of /</p>\n\n<pre><code>[:app_file=, :app_file, :app_file?, :logging=, :logging, :logging?, :method_override=, :method_override, :method_override?, :run=, :run, :run?, :session_secret=, :session_secret, :session_secret?, :register, :environments=, :environments, :environments?, :traps=, :traps, :traps?, :running_server=, :running_server, :running_server?, :handler_name=, :handler_name, :handler_name?] \n\n[\"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/sinatra-contrib-1.4.7/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/sinatra-1.4.7/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/tilt-2.0.4/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/rubygems-update-2.6.4/hide_lib_for_update\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/rest-client-1.8.0/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/rack-test-0.6.3/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/rack-protection-1.5.3/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/rack-1.6.4/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/netrc-0.11.0/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/multi_json-1.12.1/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/mime-types-2.99.2/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/http-cookie-1.0.2/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/domain_name-0.5.20160310/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/unf-0.1.4/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/unf_ext-0.0.7.2/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/unf_ext-0.0.7.2/lib\", \"/usr/share/gems/gems/bundler-1.7.8/lib/gems/bundler-1.7.8/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/backports-3.6.8/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/activesupport-4.2.6/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/tzinfo-1.2.2/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/thread_safe-0.3.5/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/minitest-5.9.0/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/json-1.8.3/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/json-1.8.3/lib\", \"/opt/puppetdb_node_lister/vendor/bundle/ruby/gems/i18n-0.7.0/lib\", \"/usr/share/gems/gems/bundler-1.7.8/lib\", \"/usr/local/share/ruby/site_ruby\", \"/usr/local/lib64/ruby/site_ruby\", \"/usr/share/ruby/vendor_ruby\", \"/usr/lib64/ruby/vendor_ruby\", \"/usr/share/rubygems\", \"/usr/share/ruby\", \"/usr/lib64/ruby/\"] \n\n/opt/puppetdb_node_lister\n</code></pre>\n\n<p>one can see, that if loaded via systemd the values in settings (which would come from the yaml) are missing. </p>\n\n<p>can anybody help me with that? am i doing this right, or is there i'm missing something?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "rr"], "answers": [{"tags": [], "owner": {"reputation": 1596, "user_id": 1087841, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ca433142386fe814075e37027dccde0a?s=128&d=identicon&r=PG", "display_name": "Saad", "link": "https://stackoverflow.com/users/1087841/saad"}, "is_accepted": false, "score": 1, "last_activity_date": 1466596206, "creation_date": 1466596206, "answer_id": 37967220, "question_id": 37966778, "link": "https://stackoverflow.com/questions/37966778/nomethod-error-when-trying-to-make-rr-mock-stubs-work/37967220#37967220", "title": "Nomethod error when trying to make rr mock stubs work", "body": "<p>I got this working finally, I used <code>gem 'rr',  '1.1.2'</code> instead of <code>1.2.0</code> which got auto installed when running bundler without the gem version.</p>\n"}], "owner": {"reputation": 1596, "user_id": 1087841, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ca433142386fe814075e37027dccde0a?s=128&d=identicon&r=PG", "display_name": "Saad", "link": "https://stackoverflow.com/users/1087841/saad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466596206, "creation_date": 1466595107, "question_id": 37966778, "link": "https://stackoverflow.com/questions/37966778/nomethod-error-when-trying-to-make-rr-mock-stubs-work", "title": "Nomethod error when trying to make rr mock stubs work", "body": "<p>I am setting up a project and have been trying to make rr mocks work but I am getting nomethod error. I have tried moving the required method as well but nothing works. This is my <a href=\"https://github.com/saadbinakhlaq/test-rr\" rel=\"nofollow\">repo</a></p>\n\n<pre><code>$ rspec spec/views\nF\n\nFailures:\n\n  1) home/show.html.haml\n     Failure/Error: stub(view).user { user }\n\n     NoMethodError:\n       undefined method `stub' for #&lt;RSpec::ExampleGroups::HomeShowHtmlHaml:0x007fc245188f08&gt;\n     # ./spec/views/home/show.html.haml_spec.rb:6:in `block (2 levels) in &lt;top (required)&gt;'\n     # /Users/saadbinakhlaq/.rvm/gems/ruby-2.3.0/gems/bundler-1.12.5/lib/bundler/cli/exec.rb:63:in `load'\n     # /Users/saadbinakhlaq/.rvm/gems/ruby-2.3.0/gems/bundler-1.12.5/lib/bundler/cli/exec.rb:63:in `kernel_load'\n     # /Users/saadbinakhlaq/.rvm/gems/ruby-2.3.0/gems/bundler-1.12.5/lib/bundler/cli/exec.rb:24:in `run'\n     # /Users/saadbinakhlaq/.rvm/gems/ruby-2.3.0/gems/bundler-1.12.5/lib/bundler/cli.rb:304:in `exec'\n     # /Users/saadbinakhlaq/.rvm/gems/ruby-2.3.0/gems/bundler-1.12.5/lib/bundler/cli.rb:11:in `start'\n     # /Users/saadbinakhlaq/.rvm/gems/ruby-2.3.0/gems/bundler-1.12.5/exe/bundle:27:in `block in &lt;top (required)&gt;'\n     # /Users/saadbinakhlaq/.rvm/gems/ruby-2.3.0/gems/bundler-1.12.5/lib/bundler/friendly_errors.rb:98:in `with_friendly_errors'\n     # /Users/saadbinakhlaq/.rvm/gems/ruby-2.3.0/gems/bundler-1.12.5/exe/bundle:19:in `&lt;top (required)&gt;'\n</code></pre>\n\n<p>I have tried whatever was mentioned here <a href=\"https://github.com/rr/rr\" rel=\"nofollow\">rr</a></p>\n\n<pre><code># Gemfile\ngroup :test do\n  gem 'rr', require: false\nend\n\n# test helper\nrequire File.expand_path('../../config/environment', __FILE__)\nrequire 'your/test/framework'  # if you are using something other than MiniTest / Test::Unit\nrequire 'rr'\n</code></pre>\n"}, {"tags": ["ruby", "class", "inheritance", "module", "mixins"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1466594173, "post_id": 37966234, "comment_id": 63378772, "body": "Post <i>working</i> code, please. You can&#39;t define a module with a lowercase name. Besides, the classes in your code don&#39;t include the module and you don&#39;t call <code>print_header</code>. Furthermore, <code>Core_Class</code> looks odd, you should use <code>CoreClass</code> instead."}, {"owner": {"reputation": 845, "user_id": 5646801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d133162c0a6c4b45ad559f5a86f8f8a?s=128&d=identicon&r=PG&f=1", "display_name": "Sergii K", "link": "https://stackoverflow.com/users/5646801/sergii-k"}, "edited": false, "score": 0, "creation_date": 1466594573, "post_id": 37966234, "comment_id": 63379017, "body": "In your example <code>CoreClass</code> used in the <code>PrintHeader</code> module. Basically, its just wrong idea from the point of architecture. Your <code>PrintHeader</code> must &quot;know nothing&quot; about any other class (<code>CoreClass</code> or <code>UseClass</code>). And weird thing: <code>print_header</code> is not printing header, but <code>header</code> just implements that functionality."}, {"owner": {"reputation": 141, "user_id": 3950314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f452817dbb732a622ea3609a357c18e?s=128&d=identicon&r=PG&f=1", "display_name": "John Nikolaou", "link": "https://stackoverflow.com/users/3950314/john-nikolaou"}, "edited": false, "score": 0, "creation_date": 1466596779, "post_id": 37966234, "comment_id": 63380510, "body": "Sorry for the lack of working code, I&#39;m remoting into a unix enviroment without the ability to take code out"}], "answers": [{"tags": [], "owner": {"reputation": 845, "user_id": 5646801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d133162c0a6c4b45ad559f5a86f8f8a?s=128&d=identicon&r=PG&f=1", "display_name": "Sergii K", "link": "https://stackoverflow.com/users/5646801/sergii-k"}, "is_accepted": true, "score": 0, "last_activity_date": 1466594962, "creation_date": 1466594962, "answer_id": 37966725, "question_id": 37966234, "link": "https://stackoverflow.com/questions/37966234/calling-a-class-function-that-gets-redefined-from-an-included-module-in-ruby/37966725#37966725", "title": "Calling a class-function that gets redefined, from an included Module in Ruby", "body": "<p>I think, that you want to implement something like this:</p>\n\n<pre><code>module PrintHeader\n  def print_header\n    puts header\n  end\nend\n\nclass CoreClass\n  include PrintHeader\n\n  def header\n    'old header'\n  end\nend\n\nclass UseClass &lt; CoreClass\n  def header\n    'New header'\n  end\nend\n\ncore = CoreClass.new\nuse = UseClass.new\n\ncore.header\n# =&gt; 'old header'\ncore.print_header\n# old header\n# =&gt; nil\nuse.header\n# =&gt; 'New header'\nuse.print_header\n# New header\n# =&gt; nil\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 3950314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f452817dbb732a622ea3609a357c18e?s=128&d=identicon&r=PG&f=1", "display_name": "John Nikolaou", "link": "https://stackoverflow.com/users/3950314/john-nikolaou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 1, "accepted_answer_id": 37966725, "answer_count": 1, "score": 0, "last_activity_date": 1466597065, "creation_date": 1466593664, "last_edit_date": 1466597065, "question_id": 37966234, "link": "https://stackoverflow.com/questions/37966234/calling-a-class-function-that-gets-redefined-from-an-included-module-in-ruby", "title": "Calling a class-function that gets redefined, from an included Module in Ruby", "body": "<p>Here's the current situation : </p>\n\n<p>Core_Class is the key class which includes a lot of modules\nUse_Class inherits from Core_Class</p>\n\n<p>In one of the modules included by Core_Class, I want it to access a method defined in the Core_Class. This works just fine. Lets call this method header()</p>\n\n<p>I am now trying to re-define this function in Use_class, so that the use_class has a unique header method. </p>\n\n<p>This all looks a bit like this: </p>\n\n<pre><code>module Print_header\n  def print_header_\n    Core_Class.header()\n  end\nend\nclass Core_Class\n  include Print_header\n  def header()\n    puts \"old header\"\n  end\n  def run\n    print_header\n  end\nend\nclass Use_Class &lt; Core_Class\n  def header()\n    puts \"New header\"\n  end\n  def run\n    print_header\n  end\nend\n</code></pre>\n\n<p>Now my problem is that the old code gets used. I feel that I'm missing something about object oriented programming, inheritance and mixins, but I am unsure what. Spend about 2 hours googling it, couldn't find something to help me understand, and I'm the only Ruby(very very junior) dev in the office. </p>\n\n<p>If possible, can you include an explanation of whats wrong, beyond a fix? </p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 3, "creation_date": 1466592773, "post_id": 37965507, "comment_id": 63377840, "body": "You are doing it wrong. You should calculate averages and order everything inside database engine, that said with SQL. Otherwise you\u2019ll get infinite response time tomorrow."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4776684"}, "edited": false, "score": 1, "creation_date": 1466594532, "post_id": 37965507, "comment_id": 63378994, "body": "First, Rails naming <i>conventions</i> suggest not to use camel-case naming for methods, so you should call your method avg_votes. Second, as @kriskova mentioned, it is not a good idea to write a separate method for ordering because it is much more expensive in comparison to SQL ordering. The fact that you had to write a separate method for sorting shows that you have a flaw in your design."}], "answers": [{"tags": [], "owner": {"reputation": 558, "user_id": 3294749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28b89617237a3446a856c0e28585934b?s=128&d=identicon&r=PG&f=1", "display_name": "kriskova", "link": "https://stackoverflow.com/users/3294749/kriskova"}, "is_accepted": true, "score": 3, "last_activity_date": 1466592838, "last_edit_date": 1466592838, "creation_date": 1466592357, "answer_id": 37965738, "question_id": 37965507, "link": "https://stackoverflow.com/questions/37965507/order-collection-by-method-value/37965738#37965738", "title": "Order collection by method value", "body": "<p>I think you should keep as much logic out of the view as you can.</p>\n\n<p>So in your controller, you could do something like this:</p>\n\n<pre><code>@projects = Project.all.sort_by(&amp;:avgVotes)\n</code></pre>\n\n<p>Keep in mind, that this ordering is not as efficient as:</p>\n\n<pre><code>Project.order()\n</code></pre>\n\n<p>because the later orders the results in the db, but the earlier is run in pure ruby which is a lot slower. If you could precalculate these values and store them in the db then you could do this ordering much faster.</p>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 4, "last_activity_date": 1466604099, "last_edit_date": 1466604099, "creation_date": 1466598032, "answer_id": 37967867, "question_id": 37965507, "link": "https://stackoverflow.com/questions/37965507/order-collection-by-method-value/37967867#37967867", "title": "Order collection by method value", "body": "<p>Your database can perform calculations and Rails comes with corresponding <a href=\"http://guides.rubyonrails.org/active_record_querying.html#calculations\" rel=\"nofollow\">caluclation methods</a>.</p>\n\n<p>Assuming that <code>Vote</code> has an attribute <code>value</code> (from 1 to 5), you can find a project's average vote value via:</p>\n\n<pre><code>project = Project.find(1)\n#=&gt; &lt;Project id:1&gt;\nproject.votes.average(:value)\n# SELECT AVG(`votes`.`value`) FROM `votes` WHERE `votes`.`project_id` = 1\n#=&gt; 2.1\n</code></pre>\n\n<p>The above will actually return a <code>BigDecimal</code>, I've used a float here because it is easier to read.</p>\n\n<p>But running this query once for every project can be expensive. You can therefore <a href=\"http://guides.rubyonrails.org/active_record_querying.html#group\" rel=\"nofollow\">apply a <code>GROUP BY</code> clause</a> to find the average values for all projects in a single query:</p>\n\n<pre><code>Vote.group_by(:project).average(:value)\n# SELECT AVG(`votes`.`value`) AS average_value, project_id AS project_id\n# FROM `votes`\n# GROUP BY `votes`.`project_id`\n</code></pre>\n\n<p>(Well, actually two queries, because it will also fetch the projects)</p>\n\n<p>It returns a hash with <code>project =&gt; average_value</code> pairs, something like:</p>\n\n<pre><code>{\n  &lt;Project id:1&gt; =&gt; 2.1,\n  &lt;Project id:2&gt; =&gt; 4.8,\n  &lt;Project id:3&gt; =&gt; 3.0,\n  # ...\n}\n</code></pre>\n\n<p>(again, you'll get <code>BigDecimal</code> values, not floats)</p>\n\n<p>You can also let the database order the results from highest average vote value to lowest:</p>\n\n<pre><code>Vote.group_by(:project).order('average_value DESC').average(:value)\n# SELECT AVG(`votes`.`value`) AS average_value, project_id AS project_id\n# FROM `votes`\n# GROUP BY `votes`.`project_id`\n# ORDER BY average_value DESC\n</code></pre>\n\n<p>Note that the name <code>average_value</code> depends on your attribute name. i.e. <code>average_...</code></p>\n"}], "owner": {"reputation": 233, "user_id": 3495553, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/PqsPr.jpg?s=128&g=1", "display_name": "LucasP", "link": "https://stackoverflow.com/users/3495553/lucasp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 522, "favorite_count": 0, "accepted_answer_id": 37965738, "answer_count": 2, "score": 0, "last_activity_date": 1466604099, "creation_date": 1466591766, "last_edit_date": 1466595612, "question_id": 37965507, "link": "https://stackoverflow.com/questions/37965507/order-collection-by-method-value", "title": "Order collection by method value", "body": "<p>I have a model for <code>Project</code>:</p>\n\n<pre><code>class Project &lt; ActiveRecord::Base\n  has many :votes\nend\n</code></pre>\n\n<p>And for <code>Votes</code>:</p>\n\n<pre><code>class Votes &lt; ActiveRecord::Base\n  belongs_to :project\nend\n</code></pre>\n\n<p>Each <code>Project</code> has a number of votes from 1 to 5. To get the average i made a function called <code>avgVotes</code> in the <code>project_controller</code>.</p>\n\n<p>Now, for my view I can use the <code>@projects = Project.all</code> given by the controller, but I want it so that <code>@projects</code> is ordered by the value of the <code>avgVotes</code> for each <code>project</code>. </p>\n\n<p>How can I accomplish this? </p>\n\n<p>Should I order it in the controller or in the view?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 558, "user_id": 3294749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28b89617237a3446a856c0e28585934b?s=128&d=identicon&r=PG&f=1", "display_name": "kriskova", "link": "https://stackoverflow.com/users/3294749/kriskova"}, "is_accepted": false, "score": 1, "last_activity_date": 1466591203, "last_edit_date": 1466591203, "creation_date": 1466590743, "answer_id": 37965114, "question_id": 37965081, "link": "https://stackoverflow.com/questions/37965081/rails-ruby-undefined-method/37965114#37965114", "title": "Rails/ruby undefined method", "body": "<p>You have to define handle_errors on the class as well:</p>\n\n<pre><code>def self.handle_errors(request)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1466591114, "post_id": 37965120, "comment_id": 63376737, "body": "<code>private</code> in the first snippet does not declare <code>self.handle_errors</code> as private class method. Use <code>private_class_method :handle_errors</code> instead."}], "tags": [], "owner": {"reputation": 2755, "user_id": 1543985, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/h2xDy.jpg?s=128&g=1", "display_name": "RichardAE", "link": "https://stackoverflow.com/users/1543985/richardae"}, "is_accepted": false, "score": 2, "last_activity_date": 1466590764, "creation_date": 1466590764, "answer_id": 37965120, "question_id": 37965081, "link": "https://stackoverflow.com/questions/37965081/rails-ruby-undefined-method/37965120#37965120", "title": "Rails/ruby undefined method", "body": "<p>When you're using a self. for a class method, all private methods also need to use self to be accessed from within it. The following will work:</p>\n\n<pre><code>class XmlConnection\n\n def self.guitarmania\n    request = HTTParty.get(site_url)\n    handle_errors(request)\n  end\n\n private\n\n  def self.handle_errors(request)\n    if request.code == 200\n      request\n    else\n      raise 'Connection error'\n    end\n  end\nend\n</code></pre>\n\n<p>If all your methods will be class methods, you could wrap them all in a self to make it a bit more readable. This works exactly as above:</p>\n\n<pre><code>class XmlConnection\n   class &lt;&lt; self\n     def guitarmania\n        request = HTTParty.get(site_url)\n        handle_errors(request)\n      end\n\n     private\n\n      def handle_errors(request)\n        if request.code == 200\n          request\n        else\n          raise 'Connection error'\n        end\n      end\n    end\nend\n</code></pre>\n"}], "owner": {"reputation": 1241, "user_id": 4402478, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/6db20762ebe145c59b6e10eb68955678?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4402478/user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1466591203, "creation_date": 1466590631, "last_edit_date": 1466590694, "question_id": 37965081, "link": "https://stackoverflow.com/questions/37965081/rails-ruby-undefined-method", "title": "Rails/ruby undefined method", "body": "<p>I have simple class with class's and private's methods</p>\n\n<pre><code>class XmlConnection\n\n def self.guitarmania\n    request = HTTParty.get(site_url)\n    handle_errors(request)\n  end\n\n private\n\n  def handle_errors(request)\n    if request.code == 200\n      request\n    else\n      raise 'Connection error'\n    end\n  end\n\n\n\nend\n</code></pre>\n\n<p>when i call <code>XmlConnection.guitarmania</code> i get</p>\n\n<blockquote>\n  <p>NoMethodError: undefined method 'handle_errors' for\n  XmlConnection:Class</p>\n</blockquote>\n\n<p>How i can fix it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 873, "user_id": 1581718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/evhC6.jpg?s=128&g=1", "display_name": "Pavel Bulanov", "link": "https://stackoverflow.com/users/1581718/pavel-bulanov"}, "edited": false, "score": 0, "creation_date": 1466591666, "post_id": 37964734, "comment_id": 63377069, "body": "So you have where clause for searchkick, right? From doc - <code>Product.search &quot;apples&quot;, where: {in_stock: true}</code>"}], "answers": [{"tags": [], "owner": {"reputation": 83, "user_id": 6094382, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8e8e88e3b7ba5f9d802fe180c7649988?s=128&d=identicon&r=PG&f=1", "display_name": "Rails_learner", "link": "https://stackoverflow.com/users/6094382/rails-learner"}, "is_accepted": false, "score": 0, "last_activity_date": 1466614078, "creation_date": 1466614078, "answer_id": 37974029, "question_id": 37964734, "link": "https://stackoverflow.com/questions/37964734/searchkick-to-show-only-with-condition/37974029#37974029", "title": "searchkick to show only with condition", "body": "<p>You can try finding the customer first before doing the search, so something like:</p>\n\n<pre><code>def index\n  @customer = Customer.find_by(params[:id])\n  @customers = Customer.search(params.fetch(:q, \"*\"),\n  order: {name: :asc})\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 39, "user_id": 6421809, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f6164edd01a87469b2ebe6cb83d917e7?s=128&d=identicon&r=PG&f=1", "display_name": "C.Yee", "link": "https://stackoverflow.com/users/6421809/c-yee"}, "is_accepted": false, "score": 0, "last_activity_date": 1466653752, "creation_date": 1466653752, "answer_id": 37981996, "question_id": 37964734, "link": "https://stackoverflow.com/questions/37964734/searchkick-to-show-only-with-condition/37981996#37981996", "title": "searchkick to show only with condition", "body": "<p>I have figured it out by adding the code:</p>\n\n<pre><code>where: {user_id: current_user.id})\n</code></pre>\n\n<p>into the controller</p>\n\n<p>Thanks to all that tried to help!</p>\n"}], "owner": {"reputation": 39, "user_id": 6421809, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f6164edd01a87469b2ebe6cb83d917e7?s=128&d=identicon&r=PG&f=1", "display_name": "C.Yee", "link": "https://stackoverflow.com/users/6421809/c-yee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1466653752, "creation_date": 1466589703, "question_id": 37964734, "link": "https://stackoverflow.com/questions/37964734/searchkick-to-show-only-with-condition", "title": "searchkick to show only with condition", "body": "<p>I am currently working on a Customer Management System. I am using searchkick to search customers from my customers table. What i am trying to do is to limit the search for each user to only be able to search within their own customer list. Each customer has their own user_id column and i would like searchkick to only search within the users own customers with his/her user_id.</p>\n\n<p>This is my customer_controller.html.erb</p>\n\n<pre><code>def index\n  @customers = Customer.search(params.fetch(:q, \"*\"),\n  order: {name: :asc})\nend\n</code></pre>\n\n<p>can anyone help me? thanks so much!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "simple-form-for"], "comments": [{"owner": {"reputation": 3002, "user_id": 976498, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CSZVp.jpg?s=128&g=1", "display_name": "LHH", "link": "https://stackoverflow.com/users/976498/lhh"}, "edited": false, "score": 0, "creation_date": 1466589496, "post_id": 37964465, "comment_id": 63375710, "body": "you need label_method should be concatenate of name &amp; project_number ?"}, {"owner": {"reputation": 17, "user_id": 5295705, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PMwqj.jpg?s=128&g=1", "display_name": "Sherlock_Stalker", "link": "https://stackoverflow.com/users/5295705/sherlock-stalker"}, "reply_to_user": {"reputation": 3002, "user_id": 976498, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CSZVp.jpg?s=128&g=1", "display_name": "LHH", "link": "https://stackoverflow.com/users/976498/lhh"}, "edited": false, "score": 0, "creation_date": 1466592673, "post_id": 37964465, "comment_id": 63377768, "body": "Yes, this is what I want to try because I have sometimes the same project name but different project numbers"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 5295705, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PMwqj.jpg?s=128&g=1", "display_name": "Sherlock_Stalker", "link": "https://stackoverflow.com/users/5295705/sherlock-stalker"}, "edited": false, "score": 0, "creation_date": 1466592553, "post_id": 37964876, "comment_id": 63377691, "body": "Thank you for your fast answer. I&#39;ve tried your solution but I get this error message: undefined method `name_of_method&#39; for #&lt;PmProject:0x007f0d8beb77c0&gt;"}, {"owner": {"reputation": 17, "user_id": 5295705, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PMwqj.jpg?s=128&g=1", "display_name": "Sherlock_Stalker", "link": "https://stackoverflow.com/users/5295705/sherlock-stalker"}, "edited": false, "score": 0, "creation_date": 1466593178, "post_id": 37964876, "comment_id": 63378139, "body": "Oh god I&#39;m so stupid... You&#39;re totally right. This is the right way to solve my problem. Thank you. I&#39;ve made the mistake and put the def name_of_method... in the controller not in the model"}, {"owner": {"reputation": 2448, "user_id": 2621389, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/uiNbQ.jpg?s=128&g=1", "display_name": "Bharat soni", "link": "https://stackoverflow.com/users/2621389/bharat-soni"}, "reply_to_user": {"reputation": 17, "user_id": 5295705, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PMwqj.jpg?s=128&g=1", "display_name": "Sherlock_Stalker", "link": "https://stackoverflow.com/users/5295705/sherlock-stalker"}, "edited": false, "score": 0, "creation_date": 1466593219, "post_id": 37964876, "comment_id": 63378169, "body": "Do not write it inside the private block, and try to get the same method work inside the console on the pmpobject."}, {"owner": {"reputation": 2448, "user_id": 2621389, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/uiNbQ.jpg?s=128&g=1", "display_name": "Bharat soni", "link": "https://stackoverflow.com/users/2621389/bharat-soni"}, "reply_to_user": {"reputation": 17, "user_id": 5295705, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PMwqj.jpg?s=128&g=1", "display_name": "Sherlock_Stalker", "link": "https://stackoverflow.com/users/5295705/sherlock-stalker"}, "edited": false, "score": 0, "creation_date": 1466593275, "post_id": 37964876, "comment_id": 63378202, "body": "Yeah, what ever the formatting you need on the attributes you need to put into the model not in controller."}], "tags": [], "owner": {"reputation": 2448, "user_id": 2621389, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/uiNbQ.jpg?s=128&g=1", "display_name": "Bharat soni", "link": "https://stackoverflow.com/users/2621389/bharat-soni"}, "is_accepted": true, "score": 1, "last_activity_date": 1466590088, "creation_date": 1466590088, "answer_id": 37964876, "question_id": 37964465, "link": "https://stackoverflow.com/questions/37964465/rails-two-values-for-label-method-simple-form-for/37964876#37964876", "title": "Rails: Two values for label_method (simple_form_for)", "body": "<p>It's not possible to have to attributes or field name inside the label method. But I have an alternate soluction for you resolve this problem.</p>\n\n<p>You are taking PmProject collections, So now create a instance level method insdie the PmProject model like as below.</p>\n\n<pre><code>def name_of_method\n  \"#{name} #{project_number}\"\nend\n</code></pre>\n\n<p>Now to use the same on the view input of the simple form for use like that as below...</p>\n\n<pre><code>&lt;%= f.input :project_id, :collection =&gt; PmProject.order('name'), :label_method =&gt; :name_of_method, :value_method =&gt; :id, :label =&gt; \"Project\", :include_blank =&gt; false %&gt;\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 5295705, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PMwqj.jpg?s=128&g=1", "display_name": "Sherlock_Stalker", "link": "https://stackoverflow.com/users/5295705/sherlock-stalker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 930, "favorite_count": 0, "accepted_answer_id": 37964876, "answer_count": 1, "score": 0, "last_activity_date": 1466591862, "creation_date": 1466589094, "last_edit_date": 1466589620, "question_id": 37964465, "link": "https://stackoverflow.com/questions/37964465/rails-two-values-for-label-method-simple-form-for", "title": "Rails: Two values for label_method (simple_form_for)", "body": "<p>I want to create a new pm_workload. I have the following code-snippet</p>\n\n<pre><code>&lt;%= f.input :project_id, :collection =&gt; PmProject.order('name'), :label_method =&gt; :name, :value_method =&gt; :id, :label =&gt; \"Project\", :include_blank =&gt; false %&gt;\n</code></pre>\n\n<p>Is there an option to use two values for :label_method? e.g. \n<br/>\n<code>:label_method =&gt; :name &lt;&lt; (PmProject.project_number)</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "twitter-bootstrap", "authentication", "bootstrap-modal"], "answers": [{"comments": [{"owner": {"reputation": 1201, "user_id": 5097493, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/95b290a191545edb4077adfaab317f1a?s=128&d=identicon&r=PG&f=1", "display_name": "RuNpiXelruN", "link": "https://stackoverflow.com/users/5097493/runpixelrun"}, "edited": false, "score": 0, "creation_date": 1466592124, "post_id": 37965264, "comment_id": 63377387, "body": "@pavel_bulanov thanks for the answer but i still get an error. This time <code>uninitialized constant ActionView::CompiledTemplates::Session</code> I&#39;ve completely hit a wall and can&#39;t work out what to to"}, {"owner": {"reputation": 873, "user_id": 1581718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/evhC6.jpg?s=128&g=1", "display_name": "Pavel Bulanov", "link": "https://stackoverflow.com/users/1581718/pavel-bulanov"}, "reply_to_user": {"reputation": 1201, "user_id": 5097493, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/95b290a191545edb4077adfaab317f1a?s=128&d=identicon&r=PG&f=1", "display_name": "RuNpiXelruN", "link": "https://stackoverflow.com/users/5097493/runpixelrun"}, "edited": false, "score": 0, "creation_date": 1466592305, "post_id": 37965264, "comment_id": 63377508, "body": "Does it happen on page load or after submitting the form? Maybe give a bit more of stacktrace. When it happens - does create method run? In the meantime, you have <code>render :new</code> for login error - do you have corresponding view? It should be under view/sessions"}, {"owner": {"reputation": 873, "user_id": 1581718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/evhC6.jpg?s=128&g=1", "display_name": "Pavel Bulanov", "link": "https://stackoverflow.com/users/1581718/pavel-bulanov"}, "reply_to_user": {"reputation": 1201, "user_id": 5097493, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/95b290a191545edb4077adfaab317f1a?s=128&d=identicon&r=PG&f=1", "display_name": "RuNpiXelruN", "link": "https://stackoverflow.com/users/5097493/runpixelrun"}, "edited": false, "score": 0, "creation_date": 1466592401, "post_id": 37965264, "comment_id": 63377584, "body": "Also, for this specific error try searching SO, e.g. [this]<a href=\"http://stackoverflow.com/questions/10588749/uninitialized-constant-actionviewcompiledtemplatescategory\" title=\"uninitialized constant actionviewcompiledtemplatescategory\">stackoverflow.com/questions/10588749/&hellip;</a>) answer - maybe it helps"}], "tags": [], "owner": {"reputation": 873, "user_id": 1581718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/evhC6.jpg?s=128&g=1", "display_name": "Pavel Bulanov", "link": "https://stackoverflow.com/users/1581718/pavel-bulanov"}, "is_accepted": false, "score": 0, "last_activity_date": 1466591160, "creation_date": 1466591160, "answer_id": 37965264, "question_id": 37964355, "link": "https://stackoverflow.com/questions/37964355/rails-bootstrap-modal-login-using-monban-authentication-issue/37965264#37965264", "title": "Rails bootstrap modal login using Monban authentication issue", "body": "<p>I see following in Rails documentation for <a href=\"http://guides.rubyonrails.org/routing.html#singular-resources\" rel=\"nofollow\">singular resources</a> (resource command)</p>\n\n<blockquote>\n  <p>A long-standing bug prevents form_for from working automatically with\n  singular resources. As a workaround, specify the URL for the form\n  directly, like so:</p>\n</blockquote>\n\n<pre><code>resource :geocoder\nform_for @geocoder, url: geocoder_path do |f|\n</code></pre>\n\n<p>So should be something like this in your case:</p>\n\n<pre><code>&lt;%= form_for Session.new, url: session_path do |f| %&gt;\n</code></pre>\n\n<p>By the way, new_session_path is not what you want anyway, as new is for the form rendering and not saving (creating) the object.</p>\n"}], "owner": {"reputation": 1201, "user_id": 5097493, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/95b290a191545edb4077adfaab317f1a?s=128&d=identicon&r=PG&f=1", "display_name": "RuNpiXelruN", "link": "https://stackoverflow.com/users/5097493/runpixelrun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466591160, "creation_date": 1466588825, "question_id": 37964355, "link": "https://stackoverflow.com/questions/37964355/rails-bootstrap-modal-login-using-monban-authentication-issue", "title": "Rails bootstrap modal login using Monban authentication issue", "body": "<p>I'm using the gem Monban for user authentication am trying to implement modal usage for users to login/signup/edit etc. I am able to sign up a user through bootstrap modal use no problem at all using <code>form_for User.new</code> etc, however I can't do the same to log a user in. I've tried <code>form_for Session.new</code> but it errors and says <code>uninitialized constant</code> on homepage load, before even seeing the modal. I've tried <code>form_for new_session_path</code>, and i see the modal this time but get the error message <code>No route matches [POST] \"/\"</code>. I've also tried using <code>form_tag</code> and other combinations but still no luck. If anyone can point me in the right direction that would be great! Please see my code below:</p>\n\n<h2>view/modals/_signin.html.erb</h2>\n\n<pre><code>&lt;div id=\"signin-modal\" class=\"modal fade\" tabindex=\"-1\" role=\"dialog\"&gt;\n  &lt;div class=\"modal-dialog\"&gt;\n    &lt;div class=\"modal-content\"&gt;\n      &lt;div class=\"modal-header\"&gt;\n        &lt;button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"&gt;&lt;span aria-hidden=\"true\"&gt;&amp;times;&lt;/span&gt;&lt;/button&gt;\n        &lt;h4 class=\"modal-title\"&gt;Welcome Back!&lt;/h4&gt;\n      &lt;/div&gt;\n      &lt;div class=\"modal-body\"&gt;\n          &lt;%= form_for Session.new do |f| %&gt;\n            &lt;div&gt;\n              &lt;span class=\"model-label\"&gt;&lt;%= f.label :username %&gt;&lt;/span&gt;\n              &lt;p&gt;&lt;%= f.text_field :username, placeholder: \"Username..\", required: true, class: \"modal-input\" %&gt;&lt;p&gt;\n            &lt;/div&gt;\n            &lt;div&gt;\n              &lt;span class=\"model-label\"&gt;&lt;%= f.label :password %&gt;&lt;/span&gt;\n              &lt;p&gt;&lt;%= f.password_field :password, require: true, placeholder: \"Password..\", class: \"modal-input\" %&gt;&lt;/p&gt;\n            &lt;/div&gt;\n      &lt;/div&gt;\n      &lt;div class=\"modal-footer\"&gt;\n        &lt;%= f.submit \"Sign In\", class: \"btn btn-info\" %&gt;\n        &lt;button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\"&gt;Close&lt;/button&gt;\n        &lt;% end %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;&lt;!-- /.modal-content --&gt;\n  &lt;/div&gt;&lt;!-- /.modal-dialog --&gt;\n&lt;/div&gt;&lt;!-- /.modal --&gt;\n</code></pre>\n\n<h2>sessions_controller.rb</h2>\n\n<pre><code>class SessionsController &lt; ApplicationController\n  skip_before_action :require_login, only: [:new, :create], raise: false\n\n  def new\n  end\n\n  def create\n    user = authenticate_session(session_params)\n\n    if sign_in(user)\n      redirect_to root_path\n    else\n      render :new\n    end\n  end\n\n  def destroy\n    sign_out\n    redirect_to root_path\n  end\n\n  private\n\n  def session_params\n    params.require(:session).permit(:username, :password)\n  end\nend\n</code></pre>\n\n<h2>config/routes.rb</h2>\n\n<pre><code>Rails.application.routes.draw do\n  resources :chats, only: [:show, :update, :index] do\n    resources :comments, only: [:new, :create]\n  end\n  resources :comments, only: [:edit, :update, :destroy]\n  resources :posts, only: [:edit, :update, :destroy]\n  resources :locations, only: [:edit, :update]\n  resources :profiles, only: [:show, :edit, :update] do\n    resources :chats, only: [:new, :create]\n    resources :locations, only: [:new, :create], module: :profiles\n    resources :posts, only: [:new, :create]\n  end\n  resource :session, only: [:new, :create, :destroy]\n  resources :users, only: [:new, :create, :index, :update] do\n      post 'follow', to: 'following_relationships#create'\n    delete 'follow', to: 'following_relationships#destroy'\n      post 'tutor',  to: 'tutoring_relationships#create'\n    delete 'tutor',  to: 'tutoring_relationships#destroy'\n  end\n  root 'home#index'\nend\n</code></pre>\n\n<p><em>which give me the following routes</em></p>\n\n<pre><code>              Prefix Verb   URI Pattern                                   Controller#Action\n       chat_comments POST   /chats/:chat_id/comments(.:format)            comments#create\n    new_chat_comment GET    /chats/:chat_id/comments/new(.:format)        comments#new\n               chats GET    /chats(.:format)                              chats#index\n                chat GET    /chats/:id(.:format)                          chats#show\n                     PATCH  /chats/:id(.:format)                          chats#update\n                     PUT    /chats/:id(.:format)                          chats#update\n        edit_comment GET    /comments/:id/edit(.:format)                  comments#edit\n             comment PATCH  /comments/:id(.:format)                       comments#update\n                     PUT    /comments/:id(.:format)                       comments#update\n                     DELETE /comments/:id(.:format)                       comments#destroy\n           edit_post GET    /posts/:id/edit(.:format)                     posts#edit\n                post PATCH  /posts/:id(.:format)                          posts#update\n                     PUT    /posts/:id(.:format)                          posts#update\n                     DELETE /posts/:id(.:format)                          posts#destroy\n       edit_location GET    /locations/:id/edit(.:format)                 locations#edit\n            location PATCH  /locations/:id(.:format)                      locations#update\n                     PUT    /locations/:id(.:format)                      locations#update\n       profile_chats POST   /profiles/:profile_id/chats(.:format)         chats#create\n    new_profile_chat GET    /profiles/:profile_id/chats/new(.:format)     chats#new\n   profile_locations POST   /profiles/:profile_id/locations(.:format)     profiles/locations#create\nnew_profile_location GET    /profiles/:profile_id/locations/new(.:format) profiles/locations#new\n       profile_posts POST   /profiles/:profile_id/posts(.:format)         posts#create\n    new_profile_post GET    /profiles/:profile_id/posts/new(.:format)     posts#new\n        edit_profile GET    /profiles/:id/edit(.:format)                  profiles#edit\n             profile GET    /profiles/:id(.:format)                       profiles#show\n                     PATCH  /profiles/:id(.:format)                       profiles#update\n                     PUT    /profiles/:id(.:format)                       profiles#update\n             session POST   /session(.:format)                            sessions#create\n         new_session GET    /session/new(.:format)                        sessions#new\n                     DELETE /session(.:format)                            sessions#destroy\n         user_follow POST   /users/:user_id/follow(.:format)              following_relationships#create\n                     DELETE /users/:user_id/follow(.:format)              following_relationships#destroy\n          user_tutor POST   /users/:user_id/tutor(.:format)               tutoring_relationships#create\n                     DELETE /users/:user_id/tutor(.:format)               tutoring_relationships#destroy\n               users GET    /users(.:format)                              users#index\n                     POST   /users(.:format)                              users#create\n            new_user GET    /users/new(.:format)                          users#new\n                user PATCH  /users/:id(.:format)                          users#update\n                     PUT    /users/:id(.:format)                          users#update\n                root GET    /                                             home#index\n</code></pre>\n\n<p>Thanks, and please let me know if you have any ideas!</p>\n"}, {"tags": ["mysql", "sql", "ruby-on-rails", "ruby", "search"], "comments": [{"owner": {"reputation": 42085, "user_id": 3444240, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/OjOru.jpg?s=128&g=1", "display_name": "potashin", "link": "https://stackoverflow.com/users/3444240/potashin"}, "edited": false, "score": 0, "creation_date": 1466588323, "post_id": 37964108, "comment_id": 63374840, "body": "There is no built-in solution for that."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1466588534, "post_id": 37964108, "comment_id": 63374997, "body": "This looks like full text search. There are specialized fast engines for this."}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1466588902, "creation_date": 1466588902, "answer_id": 37964382, "question_id": 37964108, "link": "https://stackoverflow.com/questions/37964108/rails-search-all-columns-of-db-for-value-without-explicitly-naming-them/37964382#37964382", "title": "Rails search all columns of db for value without explicitly naming them", "body": "<pre><code>MyModel.where do\n  MyModel.columns.map do |col|\n    col.matches(\"%#{search[:search_key]}%\")\n  end.reduce :|\nend\n</code></pre>\n\n<p>or use <code>ActiveRecord::Base#column_names</code> to build a query.</p>\n"}], "owner": {"reputation": 2121, "user_id": 1358592, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/ccb08bd4985792b43283b90df6dd24cd?s=128&d=identicon&r=PG", "display_name": "MeesterPatat", "link": "https://stackoverflow.com/users/1358592/meesterpatat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 287, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466588902, "creation_date": 1466588238, "question_id": 37964108, "link": "https://stackoverflow.com/questions/37964108/rails-search-all-columns-of-db-for-value-without-explicitly-naming-them", "title": "Rails search all columns of db for value without explicitly naming them", "body": "<p>If I want to search a a set of columns for a value, then I can do something like this:</p>\n\n<pre><code>MyModel.where do\n col1.matches(\"%#{search[:search_key]}%\") | col2.matches(\"%#{search[:search_key]}%\") | ...\nend\n</code></pre>\n\n<p>But when I want to search all columns of the table, it shouldn't be necessary to explicitly name them all in my query right? Because otherwise every time I add a column to my database, I'll have to add it to my search query too. </p>\n\n<p>Is there a way to just search all the columns of a table for a value. So something like this:</p>\n\n<pre><code>MyModel.search_all_columns(search[:search_key])\n</code></pre>\n\n<p>So basically what angular filter does.</p>\n"}, {"tags": ["ruby", "vagrant", "yaml", "vagrantfile"], "answers": [{"comments": [{"owner": {"reputation": 15576, "user_id": 523168, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/DzsTt.jpg?s=128&g=1", "display_name": "Valter Silva", "link": "https://stackoverflow.com/users/523168/valter-silva"}, "edited": false, "score": 0, "creation_date": 1466588493, "post_id": 37963911, "comment_id": 63374972, "body": "I have read about <code>aliases</code> but I didn&#39;t get it. But with your example I could understand it. Thank you @mudasobwa!"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1466587718, "creation_date": 1466587718, "answer_id": 37963911, "question_id": 37963378, "link": "https://stackoverflow.com/questions/37963378/how-to-use-yaml-files-with-vagrant/37963911#37963911", "title": "How to use YAML files with Vagrant?", "body": "<p>You might want to use <a href=\"http://www.yaml.org/spec/1.2/spec.html#alias//\" rel=\"nofollow\">YAML aliases</a> to achieve this functionality:</p>\n\n<pre><code>en:\n  site_name: &amp;site_name \"Site Name\" # declaring alias\n  static_pages:\n    company:\n      description: \n        - *site_name                # reference\n        - \"is an online system\"\n</code></pre>\n\n<p>And later on:</p>\n\n<pre><code>puts set['en']['static_pages']['company']['description'].join(' ')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15576, "user_id": 523168, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/DzsTt.jpg?s=128&g=1", "display_name": "Valter Silva", "link": "https://stackoverflow.com/users/523168/valter-silva"}, "edited": false, "score": 0, "creation_date": 1466588453, "post_id": 37964150, "comment_id": 63374944, "body": "You have helped me once again @Fr&#233;d&#233;ric! Thank you mate! :)"}, {"owner": {"reputation": 44774, "user_id": 4296747, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-muYS9LV5AoA/AAAAAAAAAAI/AAAAAAAACG4/KcTmlFyGWRI/photo.jpg?sz=128", "display_name": "Frederic Henri", "link": "https://stackoverflow.com/users/4296747/frederic-henri"}, "reply_to_user": {"reputation": 15576, "user_id": 523168, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/DzsTt.jpg?s=128&g=1", "display_name": "Valter Silva", "link": "https://stackoverflow.com/users/523168/valter-silva"}, "edited": false, "score": 0, "creation_date": 1466602751, "post_id": 37964150, "comment_id": 63385426, "body": "welcome Valter - depending your use case, the other is more simple but if you have variable in the middle of the string, join will not work and the resolution of parameter would be needed, for example if you had the string <i>&#39;welcome on %{site_name} - we are online !&#39;</i> a simple join will not make the parameter at specific location, also if you have multiple variables it might be better to work with parameter than join"}], "tags": [], "owner": {"reputation": 44774, "user_id": 4296747, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-muYS9LV5AoA/AAAAAAAAAAI/AAAAAAAACG4/KcTmlFyGWRI/photo.jpg?sz=128", "display_name": "Frederic Henri", "link": "https://stackoverflow.com/users/4296747/frederic-henri"}, "is_accepted": true, "score": 2, "last_activity_date": 1466588359, "creation_date": 1466588359, "answer_id": 37964150, "question_id": 37963378, "link": "https://stackoverflow.com/questions/37963378/how-to-use-yaml-files-with-vagrant/37964150#37964150", "title": "How to use YAML files with Vagrant?", "body": "<p>as they say in the answer of the post </p>\n\n<blockquote>\n  <p>and then call in the appropriate view with the site name as a parameter </p>\n</blockquote>\n\n<p>so you don't get directly after you load the yaml file the expected string, you need to match the parameter. one way you could work this in your Vagrantfile is</p>\n\n<pre><code>require 'yaml'\nset = YAML.load_file(ENV['DEVOPS_HOME'] + '/vagrant/server/settings.yml')\nstr = set['en']['static_pages']['company']['description']\narg = {:site_name=&gt; set['en']['site_name']}\np str % arg\n</code></pre>\n\n<p>will print out <code>\"Site Name is an online system\"</code></p>\n\n<p>The other way would be to use the answer from mudasobwa which is also detailed in the original post you reference</p>\n"}], "owner": {"reputation": 15576, "user_id": 523168, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/DzsTt.jpg?s=128&g=1", "display_name": "Valter Silva", "link": "https://stackoverflow.com/users/523168/valter-silva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1230, "favorite_count": 1, "accepted_answer_id": 37964150, "answer_count": 2, "score": 0, "last_activity_date": 1466588359, "creation_date": 1466586373, "last_edit_date": 1495541613, "question_id": 37963378, "link": "https://stackoverflow.com/questions/37963378/how-to-use-yaml-files-with-vagrant", "title": "How to use YAML files with Vagrant?", "body": "<p>I'm trying to improve my YAML file for my Vagrant project. According to <a href=\"https://stackoverflow.com/a/13954066\">this post</a>, if I have something like this:</p>\n\n<pre><code>en:\n  site_name: \"Site Name\"\n  static_pages:\n    company:\n      description: ! '%{site_name} is an online system'\n</code></pre>\n\n<p>I should be able to print <code>\"Site Name is an online system\"</code>, but I don't know how to use it inside my <code>Vagrantfile</code>.\nI tried so far but I couldn't print it out properly, just this:</p>\n\n<pre><code>%{site_name} is an online system\n</code></pre>\n\n<p>This is how I'm using it:</p>\n\n<pre><code>require 'yaml'\nset = YAML.load_file(ENV['DEVOPS_HOME'] + '/vagrant/server/settings.yml')\nputs set['en']['static_pages']['company']['description']\n</code></pre>\n"}, {"tags": ["javascript", "ruby", "twitter-bootstrap"], "answers": [{"tags": [], "owner": {"reputation": 914, "user_id": 5623916, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/669f68ec2bcf6b94e10dd1ef2819186d?s=128&d=identicon&r=PG&f=1", "display_name": "Gopalakrishnan", "link": "https://stackoverflow.com/users/5623916/gopalakrishnan"}, "is_accepted": true, "score": 3, "last_activity_date": 1466586746, "creation_date": 1466586746, "answer_id": 37963518, "question_id": 37963155, "link": "https://stackoverflow.com/questions/37963155/passing-image-into-bootstrap-modal/37963518#37963518", "title": "Passing image into bootstrap modal", "body": "<p>by using javascript you can do it</p>\n\n<p>JAVASCRIPT</p>\n\n<pre><code>$(document).on(\"click\", \".open-AddImgDialog\", function () {\n var imgsrc = $(this).data('id');\n $('#my_image').attr('src',imgsrc););\n});\n</code></pre>\n\n<p>HTML code </p>\n\n<pre><code>&lt;div class=\"item_info\"&gt;\n&lt;button type=\"button\" class=\"btn btn-info btn-lg open-AddImgDialog\" data-id=\"img/img.jpg\" data-toggle=\"modal\" data-target=\"#myModal\"&gt;Create Outfit&lt;/button&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>MODAL Pop</p>\n\n<pre><code>&lt;div class=\"modal-body\"&gt;\n    &lt;img id=\"my_image\" /&gt;\n &lt;/div&gt;\n</code></pre>\n\n<p>Here data-id=\"img/img.jpg\" is your image path and add class name open-AddImgDialog in button.</p>\n"}], "owner": {"reputation": 1130, "user_id": 4574914, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c27823d944d6c2125057e337c8700b97?s=128&d=identicon&r=PG&f=1", "display_name": "joeyk16", "link": "https://stackoverflow.com/users/4574914/joeyk16"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2884, "favorite_count": 0, "accepted_answer_id": 37963518, "answer_count": 1, "score": 0, "last_activity_date": 1473465757, "creation_date": 1466585815, "last_edit_date": 1473465757, "question_id": 37963155, "link": "https://stackoverflow.com/questions/37963155/passing-image-into-bootstrap-modal", "title": "Passing image into bootstrap modal", "body": "<p>Hello I have a list of images. User can click on any image and it will open a bootstrap modal. In this boostrap modal, I need the image, that the user clicked on, to appear.</p>\n\n<p>Please, view my comments in the below code for more clarity.</p>\n\n<p>Any help would greatly be appreciated. Thank you.</p>\n\n<pre><code>&lt;center&gt;\n  &lt;div id=\"items\" class=\"transitions-enabled\"&gt;\n    &lt;% @images.each do |image| %&gt;\n      &lt;div class=\"box panel panel-default\"&gt;\n        &lt;div class=\"square_item_image\"&gt;\n          #HERE IS THE IMAGE I WANT TO APPEAR IN THE BOOSTRAP MODAL\n          &lt;%= image_tag(image[\"images\"][\"low_resolution\"][\"url\"]) %&gt;\n        &lt;/div&gt;\n        &lt;div class=\"item_info\"&gt;\n          &lt;button type=\"button\" class=\"btn btn-info btn-lg\" data-toggle=\"modal\" data-target=\"#myModal\"&gt;Create Outfit&lt;/button&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n&lt;/center&gt;\n\n&lt;!-- Modal --&gt;\n&lt;div class=\"modal fade\" id=\"myModal\" role=\"dialog\"&gt;\n  &lt;div class=\"modal-dialog\"&gt;\n    &lt;!-- Modal content--&gt;\n    &lt;div class=\"modal-content\"&gt;\n      &lt;div class=\"modal-header\"&gt;\n        &lt;button type=\"button\" class=\"close\" data-dismiss=\"modal\"&gt;&amp;times;&lt;/button&gt;\n        &lt;h4 class=\"modal-title\"&gt;Create&lt;/h4&gt;\n      &lt;/div&gt;\n      &lt;div class=\"modal-body\"&gt;\n        #I WOULD LIKE THE IMAGE TO APPEAR HERE\n        &lt;p&gt;Some text in the modal.&lt;/p&gt;\n      &lt;/div&gt;\n      &lt;div class=\"modal-footer\"&gt;\n        &lt;button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\"&gt;Close&lt;/button&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 6, "creation_date": 1466586099, "post_id": 37963134, "comment_id": 63373241, "body": "Why the array? Why not just require first and then require the other? Better yet, require first file from the second, so that even if you require the second file first, the order is maintained correct."}, {"owner": {"reputation": 233, "user_id": 5428132, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/984768732cd87f4daae3aaffe0a78659?s=128&d=identicon&r=PG&f=1", "display_name": "alexin", "link": "https://stackoverflow.com/users/5428132/alexin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1466586818, "post_id": 37963134, "comment_id": 63373749, "body": "First file create other file with data, which process second file. If data-file not create, second file show error. Files will be greater than 2. Maybe I&#39;m wrong in my logic."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1466587060, "post_id": 37963134, "comment_id": 63373924, "body": "It doesn&#39;t matter. All of the above suggestions still stand. I&#39;d require first file from the second, since it&#39;s its implicit dependency. Better make it explicit."}, {"owner": {"reputation": 11227, "user_id": 1087866, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/52hpI.jpg?s=128&g=1", "display_name": "Jon Cairns", "link": "https://stackoverflow.com/users/1087866/jon-cairns"}, "edited": false, "score": 0, "creation_date": 1466587141, "post_id": 37963134, "comment_id": 63373997, "body": "@alexin are you saying that you&#39;re generating ruby files dynamically, which then need to be required after they&#39;re generated?"}, {"owner": {"reputation": 233, "user_id": 5428132, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/984768732cd87f4daae3aaffe0a78659?s=128&d=identicon&r=PG&f=1", "display_name": "alexin", "link": "https://stackoverflow.com/users/5428132/alexin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1466587328, "post_id": 37963134, "comment_id": 63374115, "body": "@SergioTulentsev thanks for the advice!"}, {"owner": {"reputation": 233, "user_id": 5428132, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/984768732cd87f4daae3aaffe0a78659?s=128&d=identicon&r=PG&f=1", "display_name": "alexin", "link": "https://stackoverflow.com/users/5428132/alexin"}, "reply_to_user": {"reputation": 11227, "user_id": 1087866, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/52hpI.jpg?s=128&g=1", "display_name": "Jon Cairns", "link": "https://stackoverflow.com/users/1087866/jon-cairns"}, "edited": false, "score": 0, "creation_date": 1466587370, "post_id": 37963134, "comment_id": 63374151, "body": "@JonCairns,  generating csv files."}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 3, "creation_date": 1466587449, "post_id": 37963134, "comment_id": 63374218, "body": "I find the idea of requiring a file doing something else than declaring classes,methods etc to be unappealing."}], "answers": [{"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 1, "last_activity_date": 1466602975, "creation_date": 1466602975, "answer_id": 37969933, "question_id": 37963134, "link": "https://stackoverflow.com/questions/37963134/ruby-reading-files-in-turn/37969933#37969933", "title": "Ruby: reading files in turn", "body": "<p>Since it is <code>file-name-2.rb</code> that depends on <code>file-name-1.rb</code>, then it should be the one to <code>require \"file-name-1.rb\"</code>. It should not be <code>run.rb</code>'s job to know what another file's dependencies are. The correct way to solve this, then, is:</p>\n\n<h3>file-name-2.rb</h3>\n\n<pre><code>require \"file-name-1.rb\"\n# ...\n</code></pre>\n\n<h3>run.rb</h3>\n\n<pre><code>require \"file-name-2.rb\n# ....\n</code></pre>\n\n<p>And, as Frederick suggests in the comments above, it's unorthodox for a file to do work other than declaring constants (classes, modules) and/or methods at the time it's required. Instead, it should define methods to do that work, and then other files that <code>require</code> it can invoke those methods. This way you always know exactly when the work will be done, even if your application has a complex dependency structure.</p>\n"}], "owner": {"reputation": 233, "user_id": 5428132, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/984768732cd87f4daae3aaffe0a78659?s=128&d=identicon&r=PG&f=1", "display_name": "alexin", "link": "https://stackoverflow.com/users/5428132/alexin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 37969933, "answer_count": 1, "score": 0, "last_activity_date": 1466602975, "creation_date": 1466585754, "last_edit_date": 1466586439, "question_id": 37963134, "link": "https://stackoverflow.com/questions/37963134/ruby-reading-files-in-turn", "title": "Ruby: reading files in turn", "body": "<p>I have 2 files which should be run in order. I create run.rb file:</p>\n\n<pre><code>files =[\n  './file-name-1.rb',\n  './file-name-2.rb',\n]\n\nfiles.each do |file|\n  require file\nend\n</code></pre>\n\n<p>And run it. Are there more correct methods of solving this problem?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "dry"], "answers": [{"comments": [{"owner": {"reputation": 951, "user_id": 5772567, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/1019679394721468/picture?type=large", "display_name": "Miguel Angel Quintana", "link": "https://stackoverflow.com/users/5772567/miguel-angel-quintana"}, "edited": false, "score": 0, "creation_date": 1466617587, "post_id": 37963566, "comment_id": 63396222, "body": "Thank you im having one issue though . the helper ends up displaying <code>&lt;span&gt;{:class=&amp;gt;&amp;quot;fa fa-github&amp;quot;}&lt;&#47;span&gt;</code>"}], "tags": [], "owner": {"reputation": 2278, "user_id": 2244501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/231d8805a81cf94c09ff60cdba6e4029?s=128&d=identicon&r=PG", "display_name": "retgoat", "link": "https://stackoverflow.com/users/2244501/retgoat"}, "is_accepted": false, "score": 2, "last_activity_date": 1466648919, "last_edit_date": 1466648919, "creation_date": 1466586852, "answer_id": 37963566, "question_id": 37963109, "link": "https://stackoverflow.com/questions/37963109/dry-code-for-social-icons/37963566#37963566", "title": "DRY code for Social icons", "body": "<p>You could define a helper for that:</p>\n\n<pre><code>def social_icon_helper(user, service)\n  if user.respond_to?(service) &amp;&amp; !user.send(service).nil?\n    link_to user.send(service), class: \"btn btn-social-social btn-#{service}\" do\n      content_tag(:span, class: \"fa fa-#{service}\")\n    end\n  end\nend\n</code></pre>\n\n<p>Then in your view:</p>\n\n<pre><code>&lt;p&gt;\n  &lt;%= social_icon_helper(@user, :github) %&gt;\n&lt;/p&gt;\n</code></pre>\n\n<p>or even</p>\n\n<pre><code>&lt;% %i(github facebook twitter).each do |service| %&gt;\n  &lt;%= social_icon_helper(@user, service) %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Sorry, please find updated helper code. Please note that I added a <code>\" #{service}\"</code> after tag definition.</p>\n\n<pre><code>def social_icon_helper(user, service)\n  if user.respond_to?(service) &amp;&amp; !user.send(service).nil?\n    link_to user.send(service), class: \"btn btn-social-social btn-#{service}\" do\n      content_tag(:span, \" #{service}\", class: \"fa fa-#{service}\")\n    end\n  end\nend\n</code></pre>\n\n<p>That helper produces the following link for me:</p>\n\n<p><a href=\"https://i.stack.imgur.com/NVCcr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NVCcr.png\" alt=\"github link\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 1, "last_activity_date": 1466587380, "creation_date": 1466587380, "answer_id": 37963781, "question_id": 37963109, "link": "https://stackoverflow.com/questions/37963109/dry-code-for-social-icons/37963781#37963781", "title": "DRY code for Social icons", "body": "<p>You'll only have a few of them, right? ~5 or so? In this case, I wouldn't bother too much about keeping the code DRY. The code for different links is different enough to make it not worth the effort (different object properties, css classes, etc.)</p>\n\n<p>You have shown only one case (github), but I can easily imagine that for some cases the property and the css class will not match (for example, <code>user.google_plus</code> and <code>fa-gplus</code>, or something)</p>\n\n<p>Just repeat the code 5 times and hide it in a partial.</p>\n\n<p>If you insist, then @retgoat's answer should do.</p>\n"}], "owner": {"reputation": 951, "user_id": 5772567, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/1019679394721468/picture?type=large", "display_name": "Miguel Angel Quintana", "link": "https://stackoverflow.com/users/5772567/miguel-angel-quintana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1466648919, "creation_date": 1466585707, "question_id": 37963109, "link": "https://stackoverflow.com/questions/37963109/dry-code-for-social-icons", "title": "DRY code for Social icons", "body": "<p>Im trying to implement Social links to my rails app but im starting to realized its going to be a bit repetitive. I want the appropriate icon to appear if a link is provided by user. </p>\n\n<p>Here is what I have so far . </p>\n\n<pre><code>&lt;% unless @user.github == nil %&gt;\n  &lt;%= link_to @user.github , class: 'btn btn-social-social btn-github' do %&gt;\n   &lt;span class=\"fa fa-github\"&gt;&lt;/span&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Here the Github icon will show up only if <code>github</code> its not nil . How can i do this to multiple links and at the same time keeping my Code DRY ? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "windows", "installation", "redmine"], "comments": [{"owner": {"reputation": 9368, "user_id": 316408, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2d693c173f4a9e6cfec05c26c1df0d91?s=128&d=identicon&r=PG&f=1", "display_name": "mahatmanich", "link": "https://stackoverflow.com/users/316408/mahatmanich"}, "edited": false, "score": 0, "creation_date": 1466583038, "post_id": 37962162, "comment_id": 63371299, "body": "have you done &#39;bundle install&#39;"}, {"owner": {"reputation": 9368, "user_id": 316408, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2d693c173f4a9e6cfec05c26c1df0d91?s=128&d=identicon&r=PG&f=1", "display_name": "mahatmanich", "link": "https://stackoverflow.com/users/316408/mahatmanich"}, "edited": false, "score": 0, "creation_date": 1466583110, "post_id": 37962162, "comment_id": 63371354, "body": "are you using rbenv or rvm? You might be using a different ruby gem set for the directory you are installing it in."}, {"owner": {"reputation": 9368, "user_id": 316408, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2d693c173f4a9e6cfec05c26c1df0d91?s=128&d=identicon&r=PG&f=1", "display_name": "mahatmanich", "link": "https://stackoverflow.com/users/316408/mahatmanich"}, "edited": false, "score": 0, "creation_date": 1466583178, "post_id": 37962162, "comment_id": 63371399, "body": "have you tried just &quot;rake db:migrate&quot;"}, {"owner": {"reputation": 757, "user_id": 4069108, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f25a52a7df8f41a6b1dd64be08ea2c74?s=128&d=identicon&r=PG&f=1", "display_name": "Majkl", "link": "https://stackoverflow.com/users/4069108/majkl"}, "reply_to_user": {"reputation": 9368, "user_id": 316408, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2d693c173f4a9e6cfec05c26c1df0d91?s=128&d=identicon&r=PG&f=1", "display_name": "mahatmanich", "link": "https://stackoverflow.com/users/316408/mahatmanich"}, "edited": false, "score": 0, "creation_date": 1466583672, "post_id": 37962162, "comment_id": 63371691, "body": "I followed the installation instructions and bundle install was succesfully done a show cca 30 installed gem include rake"}, {"owner": {"reputation": 757, "user_id": 4069108, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f25a52a7df8f41a6b1dd64be08ea2c74?s=128&d=identicon&r=PG&f=1", "display_name": "Majkl", "link": "https://stackoverflow.com/users/4069108/majkl"}, "reply_to_user": {"reputation": 9368, "user_id": 316408, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2d693c173f4a9e6cfec05c26c1df0d91?s=128&d=identicon&r=PG&f=1", "display_name": "mahatmanich", "link": "https://stackoverflow.com/users/316408/mahatmanich"}, "edited": false, "score": 0, "creation_date": 1466583872, "post_id": 37962162, "comment_id": 63371823, "body": "Actually i tried &quot;rake db:migrate&quot; (in redminde directory where is rakefile) and it do something and say rmagick is not installed (i will install it and post info there)"}, {"owner": {"reputation": 757, "user_id": 4069108, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f25a52a7df8f41a6b1dd64be08ea2c74?s=128&d=identicon&r=PG&f=1", "display_name": "Majkl", "link": "https://stackoverflow.com/users/4069108/majkl"}, "reply_to_user": {"reputation": 9368, "user_id": 316408, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2d693c173f4a9e6cfec05c26c1df0d91?s=128&d=identicon&r=PG&f=1", "display_name": "mahatmanich", "link": "https://stackoverflow.com/users/316408/mahatmanich"}, "edited": false, "score": 0, "creation_date": 1466583909, "post_id": 37962162, "comment_id": 63371840, "body": "if it will be work, than mahatmanich can create answer and i will marked it as accepted."}], "answers": [{"tags": [], "owner": {"reputation": 9368, "user_id": 316408, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2d693c173f4a9e6cfec05c26c1df0d91?s=128&d=identicon&r=PG&f=1", "display_name": "mahatmanich", "link": "https://stackoverflow.com/users/316408/mahatmanich"}, "is_accepted": true, "score": 1, "last_activity_date": 1466666651, "last_edit_date": 1466666651, "creation_date": 1466588409, "answer_id": 37964173, "question_id": 37962162, "link": "https://stackoverflow.com/questions/37962162/redmine-install-process-rake-dbmigrate-does-not-work/37964173#37964173", "title": "Redmine install process rake db:migrate does not work", "body": "<p>Try <code>rake db:migrate</code> in your redmine directory without <code>bundle exec</code> and see if that resolves your issue.</p>\n\n<p><em>Bundler usually provides bin stubs for rake and other gem files, so that <code>bundle exec</code> is not necessary or will even fail because it will look in an other gem directory where, in this case, rake might not be installed.</em></p>\n"}], "owner": {"reputation": 757, "user_id": 4069108, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f25a52a7df8f41a6b1dd64be08ea2c74?s=128&d=identicon&r=PG&f=1", "display_name": "Majkl", "link": "https://stackoverflow.com/users/4069108/majkl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 574, "favorite_count": 0, "accepted_answer_id": 37964173, "answer_count": 1, "score": 1, "last_activity_date": 1466666651, "creation_date": 1466582933, "last_edit_date": 1466583220, "question_id": 37962162, "link": "https://stackoverflow.com/questions/37962162/redmine-install-process-rake-dbmigrate-does-not-work", "title": "Redmine install process rake db:migrate does not work", "body": "<p>I am in process of installing Redmine app via <a href=\"http://www.redmine.org/projects/redmine/wiki/RedmineInstall\" rel=\"nofollow\">RedmineInstall documentation</a> I try step 5 : </p>\n\n<pre><code>bundle exec rake db:migrate\n</code></pre>\n\n<p>then error shows : </p>\n\n<pre><code>bundler: command not found: rake\nInstall missing gem executables with \u00b4bundle install\u00b4\n</code></pre>\n\n<p>I use redmine 3.3.0 64 for windows</p>\n\n<p>I use redmine gemfile and rake was installed (i see <code>Using rake 11.2.2</code>)</p>\n\n<p>I tried reinstall it via bundle install or gem install/uninstall, but did not help (see Successfully installed rake-11.2.2 but rake do not work).</p>\n\n<p>I tried this command from ruby/bin directory or redmine directory not success.</p>\n\n<p>I do not understand, that rake is successfully installed, but when i try use it with bundle it says that command not found.\nThe problem may be in the directory where the Redmine or rake?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "rubygems", "nokogiri", "rubyzip"], "answers": [{"comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1466582804, "post_id": 37962040, "comment_id": 63371157, "body": "Out of interest, I checked older versions of the gem to see whether the API changed. But <code>Zip::Archive</code> was <i>never</i> defined by the gem."}, {"owner": {"reputation": 23, "user_id": 6203614, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7bc543bf1f426b8072d93a184e8ad765?s=128&d=identicon&r=PG&f=1", "display_name": "Arvind Rajput", "link": "https://stackoverflow.com/users/6203614/arvind-rajput"}, "edited": false, "score": 0, "creation_date": 1466583538, "post_id": 37962040, "comment_id": 63371599, "body": "@holger it&#39;s work  and i read it already but i am not getting expected result. initially i have used zipruby gem and now upgrading the environment of rails and ruby then i decide to switch rubyzip gem but face difficulties to moving. i have fully updated my method which i need to convert.please check it and give me exact solution if possible."}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "reply_to_user": {"reputation": 23, "user_id": 6203614, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7bc543bf1f426b8072d93a184e8ad765?s=128&d=identicon&r=PG&f=1", "display_name": "Arvind Rajput", "link": "https://stackoverflow.com/users/6203614/arvind-rajput"}, "edited": false, "score": 1, "creation_date": 1466584764, "post_id": 37962040, "comment_id": 63372356, "body": "@ArvindRajput The answer to your original (and changed) question is still the same. If you have an additional question, please ask a new one. Please make sure to describe exactly what your problem is in this new question. Please refer to <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a> on how to write a good question that allows people to help you."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 23, "user_id": 6203614, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7bc543bf1f426b8072d93a184e8ad765?s=128&d=identicon&r=PG&f=1", "display_name": "Arvind Rajput", "link": "https://stackoverflow.com/users/6203614/arvind-rajput"}, "edited": false, "score": 0, "creation_date": 1466584952, "post_id": 37962040, "comment_id": 63372461, "body": "@ArvindRajput If you are still having difficulties, please create a new, well structured question. As this answer shows, your syntax for using this gem is invalid - you need to read the documentation and update it appropriately."}], "tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": false, "score": 3, "last_activity_date": 1466582600, "creation_date": 1466582600, "answer_id": 37962040, "question_id": 37961431, "link": "https://stackoverflow.com/questions/37961431/uninitialized-constant-ziparchive/37962040#37962040", "title": "uninitialized constant Zip::Archive", "body": "<p>According to the <a href=\"https://github.com/rubyzip/rubyzip#reading-a-zip-file\" rel=\"nofollow\">README file</a> of the rubyzip gem, the correct class to use is <code>Zip::File</code>. You can read a zip file by using</p>\n\n<pre><code>Zip::File.open('foo.zip') do |zip_file|\n  # Handle entries one by one\n  zip_file.each do |entry|\n    # Extract to file/directory/symlink\n    puts \"Extracting #{entry.name}\"\n    entry.extract(dest_file)\n\n    # Read into memory\n    content = entry.get_input_stream.read\n  end\n\n  # Find specific entry\n  entry = zip_file.glob('*.csv').first\n  puts entry.get_input_stream.read\nend\n</code></pre>\n\n<p>Please read the documentation available to you.</p>\n"}], "owner": {"reputation": 23, "user_id": 6203614, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7bc543bf1f426b8072d93a184e8ad765?s=128&d=identicon&r=PG&f=1", "display_name": "Arvind Rajput", "link": "https://stackoverflow.com/users/6203614/arvind-rajput"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 634, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466583735, "creation_date": 1466580875, "last_edit_date": 1466583735, "question_id": 37961431, "link": "https://stackoverflow.com/questions/37961431/uninitialized-constant-ziparchive", "title": "uninitialized constant Zip::Archive", "body": "<p>Initially i have used zipruby gem and upgrading the rails environment and try to switch rubyzip. then what will be the equivalent of this.</p>\n\n<p>Used gem in gem file - gem 'rubyzip',gem 'nokogiri',rails-4.1.9,ruby -2.2</p>\n\n<pre><code>Zip::Archive.open(\"#{@docx_file.path}\") do |dest|\n   n = dest.num_files\n    n.times do |i|\n      case dest.get_name(i)\n        when 'word/document.xml'\n          dest.replace_buffer i, @docx[:template].to_xml\n       else\n          #\n       end\n   end\nend\n</code></pre>\n\n<p>issue -uninitialized constant Zip::Archive</p>\n"}, {"tags": ["jquery", "html", "ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 11595, "user_id": 748259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d341d3b717765103bbd71484af0e96b?s=128&d=identicon&r=PG", "display_name": "Mikhail Nikalyukin", "link": "https://stackoverflow.com/users/748259/mikhail-nikalyukin"}, "is_accepted": false, "score": 1, "last_activity_date": 1466581012, "creation_date": 1466581012, "answer_id": 37961476, "question_id": 37961287, "link": "https://stackoverflow.com/questions/37961287/check-if-href-linked-page-exists/37961476#37961476", "title": "Check if href linked page exists", "body": "<p>With ruby stdlib you can do following:</p>\n\n<pre><code>require 'net/http'\n\nurl = URI.parse(@teaser_item.link)\nresponse = Net::HTTP.new(url.host, url.port)\nhttp.request_head(url.path)\np response.status # check if 200 or 201\n</code></pre>\n\n<p>With Faraday gem:</p>\n\n<pre><code>Faraday.head(@teaser_item.link).status == 200\n</code></pre>\n"}], "owner": {"reputation": 138, "user_id": 3403382, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/91lnA.jpg?s=128&g=1", "display_name": "DannielR", "link": "https://stackoverflow.com/users/3403382/dannielr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466581012, "creation_date": 1466580499, "question_id": 37961287, "link": "https://stackoverflow.com/questions/37961287/check-if-href-linked-page-exists", "title": "Check if href linked page exists", "body": "<p>Is there a charming way to check whether a link on a page leads to a page that returns a HTML 200 code? I want to allow users to set their own links in a model but also i want to prevent links that leads to a 500 or 404 page. </p>\n\n<p>One way, i think, is to check given links in the controller on every page request and examen the return code (with http-party) of that link. And than react according to that result.</p>\n\n<p>Model (schema.rb):</p>\n\n<pre><code>create_table \"teaser_items\" do |t|\n    t.string   \"text\",     limit: 255\n    t.string   \"link\",     limit: 255\n    ...\nend\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>def show\n   # only if TeaserItem link is valid\n   @teaser_items = TeaserItems.where(active: true).order(:position)\n   ...\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "gmail"], "comments": [{"owner": {"reputation": 1047, "user_id": 2936733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eaecbfee79e2b901ccfc23d4d77ac50e?s=128&d=identicon&r=PG&f=1", "display_name": "\u5b59\u609f\u7a7a", "link": "https://stackoverflow.com/users/2936733/%e5%ad%99%e6%82%9f%e7%a9%ba"}, "edited": false, "score": 0, "creation_date": 1466582635, "post_id": 37961071, "comment_id": 63371058, "body": "Show us all your config.action_mailer. delivery_method, default_url_options, perform_deliveries, raise_delivery_errors etc ...   and show your mail.log if you can go /var/log/mail.log."}], "answers": [{"tags": [], "owner": {"reputation": 5118, "user_id": 3893710, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/YaxSL.jpg?s=128&g=1", "display_name": "oreoluwa", "link": "https://stackoverflow.com/users/3893710/oreoluwa"}, "is_accepted": false, "score": 0, "last_activity_date": 1466582905, "creation_date": 1466582905, "answer_id": 37962150, "question_id": 37961071, "link": "https://stackoverflow.com/questions/37961071/netsmtpauthenticationerror-in-userscontrollercreate/37962150#37962150", "title": "Net::SMTPAuthenticationError in UsersController#create", "body": "<p>You mentioned using Gmail's settings, I'd say you should try this:</p>\n\n<pre><code>ActionMailer::Base.smtp_settings = {\n address: \"smtp.gmail.com\",\n port: 587,\n user_name: ENV['GMAIL_USERNAME'],\n password: ENV['GMAIL_PASSWORD'],\n authentication: :plain,\n enable_starttls_auto: true\n}\n</code></pre>\n\n<p>If you're using Sendgrid, as above you should have something like:</p>\n\n<pre><code>ActionMailer::Base.smtp_settings = {\n    user_name: ENV['SENDGRID_USERNAME'],\n    password: ENV['SENDGRID_PASSWORD'],\n    domain: 'heroku.com', #for your helo domain\n    address: 'smtp.sendgrid.net',\n    port: 587,\n    authentication: :plain,\n    enable_starttls_auto: true\n  }\n</code></pre>\n\n<p>Don't forget to define your <code>ENV</code> variables appropriately. \nYou can find <a href=\"https://launchschool.com/blog/handling-emails-in-rails\" rel=\"nofollow\">more discussion around this here</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2602252"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 672, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466582905, "creation_date": 1466579935, "question_id": 37961071, "link": "https://stackoverflow.com/questions/37961071/netsmtpauthenticationerror-in-userscontrollercreate", "title": "Net::SMTPAuthenticationError in UsersController#create", "body": "<p>our Rails 3.2 application's \"resend activation code\" mail feature was working until the code was transferred from the previous developer to us. Now we get this error  </p>\n\n<pre><code>Net::SMTPAuthenticationError in UsersController#create  \n</code></pre>\n\n<p>Our mail settings remain untouched like this:  </p>\n\n<pre><code>ActionMailer::Base.smtp_settings = {  \n:address              =&gt; \"smtp.sendgrid.net\",  \n:port                 =&gt; 587,  \n:domain               =&gt; \"example.com\",  \n:user_name            =&gt; \"username\",  \n:password             =&gt; \"password\",  \n:authentication       =&gt; \"plain\",  \n:enable_starttls_auto =&gt; true  \n}  \n</code></pre>\n\n<p>We are somehow not able to figure it out as to why the email stop's working.<br>\nWe have checked the gmail server also responding back to us via telnet.<br>\nWe have also enabled the Less Secure Apps feature of Gmail's in Security -> Account permissions -> Access for less secure apps<br>\nThanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1466581702, "post_id": 37960846, "comment_id": 63370514, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/13759902/when-to-use-method-missing\">When to use `method_missing`</a>"}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1466580552, "creation_date": 1466580552, "answer_id": 37961300, "question_id": 37960846, "link": "https://stackoverflow.com/questions/37960846/what-is-the-purpose-of-overriding-method-missing-method/37961300#37961300", "title": "What is the purpose of overriding method_missing method?", "body": "<p>This is required for metaprogramming when one does not know in advance, what methods are \u201cexpected\u201d on that object.</p>\n\n<p>Nai\u0308ve example (implement <code>attr_reader</code> for <em>all</em> instance variables for <em>all</em> derived classes):</p>\n\n<pre><code>class A\n  def method_missing m, *args, &amp;cb\n    return instance_variable_get(:\"@#{m}\") if instance_variables.include? :\"@#{m}\"\n    super\n  end\nend\n\nclass B &lt; A\n  def initialize\n    @b = 42\n  end\nend\n\nB.new.b\n#\u21d2\u00a042\n</code></pre>\n\n<p>For more complicated examples, one might look into Rails code, that is full of <code>method_missing</code>s.</p>\n"}, {"comments": [{"owner": {"reputation": 2311, "user_id": 1795483, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/tDYbt.jpg?s=128&g=1", "display_name": "David Ljung Madison Stellar", "link": "https://stackoverflow.com/users/1795483/david-ljung-madison-stellar"}, "edited": false, "score": 1, "creation_date": 1466580872, "post_id": 37961351, "comment_id": 63369982, "body": "Another example is the way that Rails provides methods such as:  car.find_by_owner, car.find_by_year, etc..    That&#39;s not to say that this is how Rails implements these methods - there are other ways to dynamically define methods and I have a feeling Rails uses something more clever than method_missing, though I haven&#39;t read the source yet."}], "tags": [], "owner": {"reputation": 2311, "user_id": 1795483, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/tDYbt.jpg?s=128&g=1", "display_name": "David Ljung Madison Stellar", "link": "https://stackoverflow.com/users/1795483/david-ljung-madison-stellar"}, "is_accepted": false, "score": 1, "last_activity_date": 1466580652, "creation_date": 1466580652, "answer_id": 37961351, "question_id": 37960846, "link": "https://stackoverflow.com/questions/37960846/what-is-the-purpose-of-overriding-method-missing-method/37961351#37961351", "title": "What is the purpose of overriding method_missing method?", "body": "<p>Imagine if you wanted to dynamically respond to methods without defining them in advance or because a set of method names use similar/same code for a list of possibilities.</p>\n\n<p>As an example, you could have different classes that have a set price, but you want to easily add conversions for a large set of currencies.  So you could do:  obj.price_euro,  obj.price_usd, etc..  and all of this could be caught by method_missing.</p>\n\n<p>This doesn't make it necessarily a good or bad idea.</p>\n\n<p>Note that if you override method_missing, you'll be much slower than a \"def method\", and don't forget to update respond_to? to match!</p>\n"}, {"tags": [], "owner": {"reputation": 3020, "user_id": 1276552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/baa29da52b110cc638a327f75baaf80f?s=128&d=identicon&r=PG", "display_name": "twonegatives", "link": "https://stackoverflow.com/users/1276552/twonegatives"}, "is_accepted": true, "score": 2, "last_activity_date": 1466581024, "creation_date": 1466581024, "answer_id": 37961482, "question_id": 37960846, "link": "https://stackoverflow.com/questions/37960846/what-is-the-purpose-of-overriding-method-missing-method/37961482#37961482", "title": "What is the purpose of overriding method_missing method?", "body": "<p>I'm not sure which <code>Well Grounded Rubyist</code> edition you're reading (consider switching to the second one), but the latter actually gives you an idea of what <code>method_missing</code> can be used for. <strong>Listing 4.13</strong> at page 113 provides you with an idea of combining bunch of a slightly similar methods like</p>\n\n<pre><code>class Person\n  def all_with_children\n    # some select...\n  end\n  def all_with_parents\n    # seems like another select but joined with another table...\n  end\n  def all_with_cars\n    # the same here...\n  end\n  def all_with_house\n    # woah, four methods doing slightly the same!\n  end\n  # so what if you have 100 database attributes and want to \n  # provide a selector for all of them?\nend\n</code></pre>\n\n<p>And replacing them with some metaprogramming using <code>method_missing</code>:</p>\n\n<pre><code>def self.method_missing m, *args\n  method = m.to_s\n  if method.start_with? (\"all_with_\")\n  # now we know that we're going to do SELECT.\n  # the only thing to consider is what table should be joined.\n  # we defer that from the right part of the method name\n  # e.g. \"children\" for \"all_with_children\"\n  # in case we gonna ask for \"all_with_wife\" we won't need to add new method!\nend\n</code></pre>\n\n<p>Prior to <code>Ruby on Rails 4</code> it was a common pattern to call something like <code>Person.find_by_username</code> which implied the same <code>method_missing</code> logics. </p>\n\n<p>Think of <code>method_missing</code> as a method which gives you an opportunity to do something before an application fails due to unknown method call.</p>\n\n<p>You could desire to add some debug information on failure (log an extended error description to the logfile, or send a email to admin that something goes wrong). </p>\n\n<p><code>method_missing</code> could give you an ability to define your own getters/setters methods for all attributes with just a couple of lines.</p>\n\n<p>In short, it gives you one more opportunity to write short and readable code. Note that it should not be abused though, as you have some price to pay for its usage (both overall code comlexity and execution time).</p>\n"}], "owner": {"reputation": 717, "user_id": 1881184, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a664c0a5b6aef4ebb056c5341dcec513?s=128&d=identicon&r=PG", "display_name": "Ordep81", "link": "https://stackoverflow.com/users/1881184/ordep81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 37961482, "answer_count": 3, "score": 0, "last_activity_date": 1466581024, "creation_date": 1466579215, "question_id": 37960846, "link": "https://stackoverflow.com/questions/37960846/what-is-the-purpose-of-overriding-method-missing-method", "title": "What is the purpose of overriding method_missing method?", "body": "<p>Going through \"Well Grounded Rubyist\" book. In chapter 4, it goes through examples as to how you could override the <code>method_missing</code> method. What it doesnt explain very well is why you want to do this in the first place? What is the purpose of overriding <code>method_missing</code> method?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2412, "user_id": 1253504, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ba0b6bef219b34fa4f2d014046ff987?s=128&d=identicon&r=PG", "display_name": "kasperite", "link": "https://stackoverflow.com/users/1253504/kasperite"}, "edited": false, "score": 0, "creation_date": 1466581697, "post_id": 37960508, "comment_id": 63370512, "body": "did you get this error when submitting?if so what&#39;s the <code>update</code> action like?"}, {"owner": {"reputation": 25, "user_id": 5132888, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a8dfd13b74c15dc6d311ec22828c922a?s=128&d=identicon&r=PG&f=1", "display_name": "r0uder", "link": "https://stackoverflow.com/users/5132888/r0uder"}, "reply_to_user": {"reputation": 2412, "user_id": 1253504, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ba0b6bef219b34fa4f2d014046ff987?s=128&d=identicon&r=PG", "display_name": "kasperite", "link": "https://stackoverflow.com/users/1253504/kasperite"}, "edited": false, "score": 0, "creation_date": 1466581940, "post_id": 37960508, "comment_id": 63370669, "body": "@kasperite I don&#39;t get any errors when I create a campaign. But pictures I attach just don&#39;t go to the database, it&#39;s empty."}, {"owner": {"reputation": 2412, "user_id": 1253504, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ba0b6bef219b34fa4f2d014046ff987?s=128&d=identicon&r=PG", "display_name": "kasperite", "link": "https://stackoverflow.com/users/1253504/kasperite"}, "edited": false, "score": 0, "creation_date": 1466583238, "post_id": 37960508, "comment_id": 63371434, "body": "it will be useful to see full error log, can you paste it in question?"}, {"owner": {"reputation": 25, "user_id": 5132888, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a8dfd13b74c15dc6d311ec22828c922a?s=128&d=identicon&r=PG&f=1", "display_name": "r0uder", "link": "https://stackoverflow.com/users/5132888/r0uder"}, "reply_to_user": {"reputation": 2412, "user_id": 1253504, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ba0b6bef219b34fa4f2d014046ff987?s=128&d=identicon&r=PG", "display_name": "kasperite", "link": "https://stackoverflow.com/users/1253504/kasperite"}, "edited": false, "score": 0, "creation_date": 1466583938, "post_id": 37960508, "comment_id": 63371856, "body": "@kasperite sure I&#39;ve updated the post. <a href=\"http://i.stack.imgur.com/YVmVj.jpg\" rel=\"nofollow noreferrer\">i.stack.imgur.com/YVmVj.jpg</a>"}], "owner": {"reputation": 25, "user_id": 5132888, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a8dfd13b74c15dc6d311ec22828c922a?s=128&d=identicon&r=PG&f=1", "display_name": "r0uder", "link": "https://stackoverflow.com/users/5132888/r0uder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1466583906, "creation_date": 1466578138, "last_edit_date": 1466583906, "question_id": 37960508, "link": "https://stackoverflow.com/questions/37960508/multiple-paperclip-upload", "title": "Multiple paperclip upload", "body": "<p>So I've read all the answers and still code does not work for some reason.</p>\n\n<p>Here are my models:</p>\n\n<p>Campaign:</p>\n\n<pre><code>class Campaign &lt; ActiveRecord::Base\n  has_many :pictures\n  accepts_nested_attributes_for :pictures, reject_if: lambda { |t| t['picture'].nil? }\nend\n</code></pre>\n\n<p>Picture:</p>\n\n<pre><code>class Picture &lt; ActiveRecord::Base\n\n  belongs_to :campaign\n  has_attached_file :banner, styles: { small: \"150x150&gt;\", large: \"320x240&gt;\" }\n  do_not_validate_attachment_file_type :banner\nend\n</code></pre>\n\n<p>Controller:\nDefault CRUD scaffold controller except:</p>\n\n<pre><code> def new\n  @campaign = Campaign.new\n  4.times {@campaign.pictures.build}\n end\n\n def edit\n  @campaign = Campaign.find(params[:id])\n  4.times { @campaign.pictures.build }\n end\n\n def campaign_params\n  params.require(:campaign).permit(:title, :pictures_attributes =&gt; [:banner, :banner_content_type, :banner_file_name, :tempfile, :banner_file_size, :banner_updated_at, :_destroy])\n end\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>&lt;%= form_for @campaign, :html =&gt; { :multipart =&gt; true } do |f| %&gt;\n\n&lt;%= f.fields_for :pictures do |builder| %&gt;\n&lt;% if builder.object.new_record? %&gt;\n\n&lt;p&gt;\n  &lt;%= builder.label :banner, \"Image File\" %&gt;\n  &lt;%= builder.file_field :banner, multiple: true %&gt;\n&lt;/p&gt;\n\n&lt;% end %&gt;\n&lt;% end %&gt;\n&lt;div class=\"actions\"&gt;\n  &lt;%= f.submit %&gt;\n&lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Also here's what server says:</p>\n\n<p><a href=\"http://i.stack.imgur.com/YVmVj.jpg\" rel=\"nofollow\">Console Screen</a></p>\n\n<p>But why, it seems I've permitted it in controller.</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 2634, "user_id": 1210949, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/vAL35.jpg?s=128&g=1", "display_name": "Albin", "link": "https://stackoverflow.com/users/1210949/albin"}, "edited": false, "score": 0, "creation_date": 1466578090, "post_id": 37960396, "comment_id": 63368191, "body": "It is the \\W that matches them. I do not know why though."}, {"owner": {"reputation": 7975, "user_id": 3836111, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bc8e3526756540925b0536455b280205?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian Proske", "link": "https://stackoverflow.com/users/3836111/sebastian-proske"}, "edited": false, "score": 0, "creation_date": 1466578170, "post_id": 37960396, "comment_id": 63368238, "body": "Furthermore it only matches, when used with i-Modifier and inside a character glass."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 3, "creation_date": 1466578174, "post_id": 37960396, "comment_id": 63368246, "body": "It is a bug in Ruby regex. See <a href=\"https://ideone.com/mIi82W\" rel=\"nofollow noreferrer\"><code>[\\W]</code></a>, it matches <code>k</code> / <code>K</code> and <code>s</code> / <code>S</code> (yeah, with <code>&#47;i</code> only)."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1466578759, "post_id": 37960396, "comment_id": 63368598, "body": "@WiktorStribi\u017cew AFAIK, it is the more-or-less common glitch with negated matchers used inside <code>[]</code>. <code>\\R</code> (that is to match anything consisting of <code>\\r</code> and <code>\\n</code> since Ruby 2) does not work in <code>[]</code> as expected. That is because most negated matchers are built as a combined regexps (unfortunately I can\u2019t find a proof link now.)"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1466579213, "post_id": 37960396, "comment_id": 63368877, "body": "@mudasobwa: Well, I do not think this should be a bug. <a href=\"https://ideone.com/4S0rmt\" rel=\"nofollow noreferrer\"><code>&#47;[^[:alnum:]_]&#47;i</code></a> works anyway. <code>\\W</code> could be parsed by the regex engine as that construct. Gonzalo, just remove <code>&#47;i</code> and add uppercase variants: <code>&#47;^[aAeEiIoOuU_0-9\\W]|^$&#47;</code>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1466579370, "post_id": 37960396, "comment_id": 63368977, "body": "@WiktorStribi\u017cew yes and no. <code>\\W</code> is parsed that way, but afterwards it\u2019s <i>becoming a part of <code>[]</code> group</i>, and the latter brings a problem."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1466579491, "post_id": 37960396, "comment_id": 63369055, "body": "Well, I mean I think the Ruby regex engine needs fixing since <a href=\"https://regex101.com/r/dD1dR1/1\" rel=\"nofollow noreferrer\">PCRE/JS/Python engines deal with <code>&#47;[\\W]&#47;i</code> well</a>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1466579517, "post_id": 37960396, "comment_id": 63369073, "body": "Ah, yes, definitely :)"}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1466578817, "post_id": 37960652, "comment_id": 63368631, "body": "This is by no means an answer, it should be posted as a comment."}, {"owner": {"reputation": 191, "user_id": 5822656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7205fec43d378dd34d43a4084199c1d?s=128&d=identicon&r=PG&f=1", "display_name": "fjsuarez", "link": "https://stackoverflow.com/users/5822656/fjsuarez"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1466578935, "post_id": 37960652, "comment_id": 63368703, "body": "Sorry, I just recently started posting in SO and need 50 rep to comment on the question."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1466579132, "post_id": 37960652, "comment_id": 63368822, "body": "Then you could try to elaborate, e. g. find a proof links, show the alternative examples for different versions etc. The fact that this \u201cis a bug in some ruby version\u201d is evident for both OP and all readers."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1466579420, "post_id": 37960652, "comment_id": 63369007, "body": "Thanks, now this answer has it\u2019s added value."}, {"owner": {"reputation": 191, "user_id": 5822656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7205fec43d378dd34d43a4084199c1d?s=128&d=identicon&r=PG&f=1", "display_name": "fjsuarez", "link": "https://stackoverflow.com/users/5822656/fjsuarez"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1466579609, "post_id": 37960652, "comment_id": 63369150, "body": "Thank you for guidance. I will try to be as thorough as possible in my answers from now on."}], "tags": [], "owner": {"reputation": 191, "user_id": 5822656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7205fec43d378dd34d43a4084199c1d?s=128&d=identicon&r=PG&f=1", "display_name": "fjsuarez", "link": "https://stackoverflow.com/users/5822656/fjsuarez"}, "is_accepted": false, "score": 3, "last_activity_date": 1466579386, "last_edit_date": 1466579386, "creation_date": 1466578551, "answer_id": 37960652, "question_id": 37960396, "link": "https://stackoverflow.com/questions/37960396/weird-thing-in-regex/37960652#37960652", "title": "Weird thing in regex", "body": "<p>It is a bug in Ruby regex in some versions. Select version 1.8.7 in the dropdown and you will see your regex works properly.</p>\n\n<p>Edit. Check the docs at <a href=\"http://ruby-doc.org/core-2.1.5/Regexp.html\" rel=\"nofollow\">http://ruby-doc.org/core-2.1.5/Regexp.html</a>. More specifically, in the metacharacters section:</p>\n\n<ul>\n<li>/\\W/ - A non-word character ([^a-zA-Z0-9_]). Please take a look at Bug <a href=\"https://bugs.ruby-lang.org/issues/4044\" rel=\"nofollow\">#4044</a> if using /\\W/ with the /i modifier.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1466579266, "post_id": 37960748, "comment_id": 63368910, "body": "<code>((&#39;a&#39;..&#39;z&#39;).to_a - %w(a e o u i)).join</code> looks more expressive and error-prone."}], "tags": [], "owner": {"reputation": 135, "user_id": 3716864, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100001704871366/picture?type=large", "display_name": "Sophtware", "link": "https://stackoverflow.com/users/3716864/sophtware"}, "is_accepted": true, "score": 3, "last_activity_date": 1466581020, "last_edit_date": 1466581020, "creation_date": 1466578878, "answer_id": 37960748, "question_id": 37960396, "link": "https://stackoverflow.com/questions/37960396/weird-thing-in-regex/37960748#37960748", "title": "Weird thing in regex", "body": "<p>This is very funny because you have stumbled across a bug specifically for just the letters k and s when using \\W with /i (it's like a perfect storm).</p>\n\n<p>Here is the link that explains the bug: <a href=\"https://bugs.ruby-lang.org/issues/4044\" rel=\"nofollow\">https://bugs.ruby-lang.org/issues/4044</a></p>\n\n<p>Perhaps this was patched in a later version of ruby, but if you don't feel like going through the hassle of going to a new version of ruby, then you can just explicitly make an inverted character class of all the consonants:</p>\n\n<pre><code>/^[^bcdfghjklmnpqrstvwxyz]|^$/i\n</code></pre>\n\n<p>Here is the rubular link: <a href=\"http://rubular.com/r/URgsWP3suQ\" rel=\"nofollow\">http://rubular.com/r/URgsWP3suQ</a></p>\n\n<p>Edit: \nSo, something else I noticed about your regex is that your regex (and the regex I provided above) matches only the first letter of the words where as the regex that I provided matches the whole word. I don't know if this makes a difference for you, but I felt it was worth pointing out. Please see the difference in the highlighting in the rubular link above and the one below (See how the link above only highlights the first letter of the words where as the link below highlights the whole words):</p>\n\n<pre><code>^[^bcdfghjklmnpqrstvwxyz].*|^$\n</code></pre>\n\n<p><a href=\"http://rubular.com/r/IVJ03uOK4h\" rel=\"nofollow\">http://rubular.com/r/IVJ03uOK4h</a></p>\n"}], "owner": {"reputation": 3173, "user_id": 2593900, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/6jkz8.jpg?s=128&g=1", "display_name": "Gonzalo Pincheira Arancibia", "link": "https://stackoverflow.com/users/2593900/gonzalo-pincheira-arancibia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 37960748, "answer_count": 2, "score": 1, "last_activity_date": 1466581020, "creation_date": 1466577748, "last_edit_date": 1466578021, "question_id": 37960396, "link": "https://stackoverflow.com/questions/37960396/weird-thing-in-regex", "title": "Weird thing in regex", "body": "<p>When I was practice in <a href=\"http://rubular.com/\" rel=\"nofollow\">rubular.com</a>, I've be trying to match with a regular expression that checks if a word starts with a non-consonant. My approach it's check cases how that begins with a non-letter, or starts with a number or underscore, or checks the empty string\nI've founded a strange behaviour:</p>\n\n<p>My regex <code>/^[aeiou_0-9\\W]|^$/i</code> match the <code>k</code> and <code>s</code> consonants!. I don't understand why.</p>\n\n<p>Any ideas?</p>\n\n<p>A link to example -> <a href=\"http://rubular.com/r/0zt0VPmcwr\" rel=\"nofollow\">http://rubular.com/r/0zt0VPmcwr</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-2.1"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 3, "creation_date": 1466576565, "post_id": 37959755, "comment_id": 63367333, "body": "How is <code>Queue</code> defined? What does <code>Queue#dequeue</code> look like (I noticed <code>dequeue</code> is not defined for the <code>Queue</code> that comes with Ruby)? Who enqueues objects into the queue? How many objects are in the queue on average?"}, {"owner": {"reputation": 2623, "user_id": 625354, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xc5hf.jpg?s=128&g=1", "display_name": "Dbz", "link": "https://stackoverflow.com/users/625354/dbz"}, "edited": false, "score": 0, "creation_date": 1466696902, "post_id": 37959755, "comment_id": 63436326, "body": "Did your question get answered?"}], "answers": [{"comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1466577330, "post_id": 37960089, "comment_id": 63367757, "body": "At a first glance I was thinking the same. That loop would lead to a high CPU usage for sure, but why should it lead to a high memory usage?"}, {"owner": {"reputation": 377, "user_id": 2563577, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/m4S4U.jpg?s=128&g=1", "display_name": "SaravanaKumAr", "link": "https://stackoverflow.com/users/2563577/saravanakumar"}, "edited": false, "score": 0, "creation_date": 1466578049, "post_id": 37960089, "comment_id": 63368172, "body": "@Dbz Actually its a worker. It will run for every sec. It will Liston the queue. if any message is pushed to queue it will take the message from queue and do the job."}, {"owner": {"reputation": 2623, "user_id": 625354, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xc5hf.jpg?s=128&g=1", "display_name": "Dbz", "link": "https://stackoverflow.com/users/625354/dbz"}, "edited": false, "score": 0, "creation_date": 1466579476, "post_id": 37960089, "comment_id": 63369050, "body": "Yup. You guys are definitely correct. I&#39;ve updated my answer with debugging tips. Make sure to post the results after trying this."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 377, "user_id": 2563577, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/m4S4U.jpg?s=128&g=1", "display_name": "SaravanaKumAr", "link": "https://stackoverflow.com/users/2563577/saravanakumar"}, "edited": false, "score": 2, "creation_date": 1466579990, "post_id": 37960089, "comment_id": 63369392, "body": "@SaravanaKumAr How on the Earth the answer consisting of \u201cprobably\u201d and \u201clikely\u201d got approved as correct? Did you check this assumption? You claimed it took hours for the leak to notice? Please avoid marking answers that <b>were not proven to work for you</b>."}, {"owner": {"reputation": 2623, "user_id": 625354, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xc5hf.jpg?s=128&g=1", "display_name": "Dbz", "link": "https://stackoverflow.com/users/625354/dbz"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1466612677, "post_id": 37960089, "comment_id": 63393275, "body": "@mudasobwa I think you linked to an excellent and informative stack overflow answer. His question stated he did not know <b>how</b> to find the memory leak. If my answer including &#39;probably&#39; and &#39;likely&#39; was able to help him find the memory leak, <b>and it worked for him</b>, then it doesn&#39;t seem unreasonable to up vote and/or mark it accepted. That being said, your answer on <b>why</b> and what he can do is equally important."}], "tags": [], "owner": {"reputation": 2623, "user_id": 625354, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xc5hf.jpg?s=128&g=1", "display_name": "Dbz", "link": "https://stackoverflow.com/users/625354/dbz"}, "is_accepted": true, "score": 1, "last_activity_date": 1466579422, "last_edit_date": 1466579422, "creation_date": 1466576577, "answer_id": 37960089, "question_id": 37959755, "link": "https://stackoverflow.com/questions/37959755/ruby-code-memory-leak-in-loop/37960089#37960089", "title": "Ruby code memory leak in loop", "body": "<p>Try removing the lines from the bottom up, and seeing if the memory leak persists. It's possible that the Memory leak is coming from the find method, or possibly the JSON.parse (extremely unlikely), or the custom Queue data structure. If the memory leak is still there after removing all of the lines, it is likely coming from the worker itself and/or the program running the workers.</p>\n\n<pre><code>q = Queue.new(\"test\")\nwhile true do\n  m = q.dequeue # Finally remove this and stub the while true with a sleep or something\n  body = JSON.parse(m.body) # Then remove these two lines\n  user_id = body[\"Records\"][0]\n  user = V2::User.find(user_id) # Remove the bottom two lines first\n  post = V2::Post.find(post_id)\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 377, "user_id": 2563577, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/m4S4U.jpg?s=128&g=1", "display_name": "SaravanaKumAr", "link": "https://stackoverflow.com/users/2563577/saravanakumar"}, "edited": false, "score": 0, "creation_date": 1466580271, "post_id": 37961028, "comment_id": 63369579, "body": "After each GC.start the local variables memory will be freed rite?"}, {"owner": {"reputation": 377, "user_id": 2563577, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/m4S4U.jpg?s=128&g=1", "display_name": "SaravanaKumAr", "link": "https://stackoverflow.com/users/2563577/saravanakumar"}, "edited": false, "score": 0, "creation_date": 1466580581, "post_id": 37961028, "comment_id": 63369797, "body": "For example am running a loop 1000 times. Inside that loop each time am just assigning user_id = some_value. Also each loop am running GC.start too. In that case when the memory will be freed?. What&#39;s your view on this. while i &lt; 1000   i++   user_id = i   GC.start end"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 377, "user_id": 2563577, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/m4S4U.jpg?s=128&g=1", "display_name": "SaravanaKumAr", "link": "https://stackoverflow.com/users/2563577/saravanakumar"}, "edited": false, "score": 0, "creation_date": 1466580822, "post_id": 37961028, "comment_id": 63369948, "body": "I have linked a detailed description and asked you to read it twice. <code>GC</code> <b>does not release heaps</b>. Let me repeat it again: <code>GC</code> <b>does not release heaps</b>. It does not matter how many times you have it run, <code>GC</code> <b>does not release heaps</b>. So, on each subsequent iteration of the loop,  each <code>user_id</code>, that obviously fits 40 bytes, will allocate a new heap that <b>will not be released back to OS</b>."}, {"owner": {"reputation": 377, "user_id": 2563577, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/m4S4U.jpg?s=128&g=1", "display_name": "SaravanaKumAr", "link": "https://stackoverflow.com/users/2563577/saravanakumar"}, "edited": false, "score": 0, "creation_date": 1466581190, "post_id": 37961028, "comment_id": 63370211, "body": "I understood your answer. What am asking is when that heap will released back to OS?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 377, "user_id": 2563577, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/m4S4U.jpg?s=128&g=1", "display_name": "SaravanaKumAr", "link": "https://stackoverflow.com/users/2563577/saravanakumar"}, "edited": false, "score": 0, "creation_date": 1466581247, "post_id": 37961028, "comment_id": 63370240, "body": "Never. <b>Please read the answer I linked</b>, it contains a detailed explanation."}, {"owner": {"reputation": 377, "user_id": 2563577, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/m4S4U.jpg?s=128&g=1", "display_name": "SaravanaKumAr", "link": "https://stackoverflow.com/users/2563577/saravanakumar"}, "edited": false, "score": 0, "creation_date": 1466581813, "post_id": 37961028, "comment_id": 63370591, "body": "Never. Your answer doesn&#39;t clarify when the heap memory released back to OS?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 377, "user_id": 2563577, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/m4S4U.jpg?s=128&g=1", "display_name": "SaravanaKumAr", "link": "https://stackoverflow.com/users/2563577/saravanakumar"}, "edited": false, "score": 0, "creation_date": 1466582077, "post_id": 37961028, "comment_id": 63370731, "body": "Are you bullying at me? The heap memory is <b>never released back to OS</b>."}, {"owner": {"reputation": 5234, "user_id": 79079, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/27fd295ebb207dcbfd231a6dbab29f74?s=128&d=identicon&r=PG", "display_name": "mltsy", "link": "https://stackoverflow.com/users/79079/mltsy"}, "reply_to_user": {"reputation": 377, "user_id": 2563577, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/m4S4U.jpg?s=128&g=1", "display_name": "SaravanaKumAr", "link": "https://stackoverflow.com/users/2563577/saravanakumar"}, "edited": false, "score": 0, "creation_date": 1586558157, "post_id": 37961028, "comment_id": 108179700, "body": "Heap memory reserved by Ruby is release when the process terminates.  But you are right @SaravanaKumAr - the memory generally should go back into the available pool for Ruby if it is garbage collected.  Defining when that happens is beyond my expertise, but involves RValues (as mentioned in this answer), and references and scopes, and GC settings, etc."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1466579802, "last_edit_date": 1495542780, "creation_date": 1466579802, "answer_id": 37961028, "question_id": 37959755, "link": "https://stackoverflow.com/questions/37959755/ruby-code-memory-leak-in-loop/37961028#37961028", "title": "Ruby code memory leak in loop", "body": "<p>I bet the problem is with introduced local variables (sic!). Get rid of <code>user_id</code> and <code>post_id</code> and it\u2019ll likely stop leaking:</p>\n\n<pre><code># user_id = body[\"Records\"][0]\n# user = V2::User.find(user_id)\nuser = V2::User.find(body[\"Records\"][0]) # sic!\n</code></pre>\n\n<p>The reason is how Ruby <a href=\"https://stackoverflow.com/questions/20385767/finding-the-cause-of-a-memory-leak-in-ruby/20608455#20608455\">stores objects in RValues</a>.</p>\n"}], "owner": {"reputation": 377, "user_id": 2563577, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/m4S4U.jpg?s=128&g=1", "display_name": "SaravanaKumAr", "link": "https://stackoverflow.com/users/2563577/saravanakumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1144, "favorite_count": 0, "accepted_answer_id": 37960089, "answer_count": 2, "score": 1, "last_activity_date": 1466579802, "creation_date": 1466575321, "question_id": 37959755, "link": "https://stackoverflow.com/questions/37959755/ruby-code-memory-leak-in-loop", "title": "Ruby code memory leak in loop", "body": "<p>Below code is having memory leak. It's running under ruby 2.1.1. I am not able to find the actual leak.</p>\n\n<pre><code>q = Queue.new(\"test\")\nwhile true do\n  m = q.dequeue\n  body = JSON.parse(m.body)\n  user_id = body[\"Records\"][0]\n  user = V2::User.find(user_id)\n  post = V2::Post.find(post_id)  \nend\n</code></pre>\n\n<p>After few hours of run I added GC.start but its not solving the problem</p>\n\n<pre><code>q = Queue.new(\"test\")\nwhile true do\n  m = q.dequeue\n  body = JSON.parse(m.body)\n  user_id = body[\"Records\"][0]\n  user = V2::User.find(user_id)\n  post = V2::Post.find(post_id) \n  GC.start \nend\n</code></pre>\n\n<p>I don't know how to find the actual memory leak.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1466575327, "post_id": 37959237, "comment_id": 63366699, "body": "are you running this on command line? or it is in Gemfile"}], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 1, "last_activity_date": 1466575221, "creation_date": 1466575221, "answer_id": 37959723, "question_id": 37959237, "link": "https://stackoverflow.com/questions/37959237/gem-tzinfo-data-platforms-mingw-mswin-x64-mingw-command-line-error/37959723#37959723", "title": "gem &#39;tzinfo-data&#39;, platforms: [:mingw, :mswin, :x64_mingw] Command line error", "body": "<p>The line you posted isn't a command, it is not meant to be run on the command line. Instead you add the line to your <code>Gemfile</code> in the root of your application and run:</p>\n\n<pre><code>bundle install\n</code></pre>\n\n<p>on your command line to install that gem and all other gems mentioned in the <code>Gemfile</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": false, "score": 1, "last_activity_date": 1466575842, "last_edit_date": 1466575842, "creation_date": 1466575500, "answer_id": 37959793, "question_id": 37959237, "link": "https://stackoverflow.com/questions/37959237/gem-tzinfo-data-platforms-mingw-mswin-x64-mingw-command-line-error/37959793#37959793", "title": "gem &#39;tzinfo-data&#39;, platforms: [:mingw, :mswin, :x64_mingw] Command line error", "body": "<p>Well you are doing it wrong. You should add it to <code>Gemfile</code></p>\n\n<pre><code># Gemfile\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw]\n</code></pre>\n\n<p>and bundle it with <code>bundle install</code></p>\n\n<p>or run this via command line</p>\n\n<pre><code>gem install 'tzinfo-data' --platform=mingw --platform=mswin --platform=x64_mingw\n</code></pre>\n"}], "owner": {"reputation": 654, "user_id": 1321050, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/4xtpV.jpg?s=128&g=1", "display_name": "bLaXjack", "link": "https://stackoverflow.com/users/1321050/blaxjack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1810, "favorite_count": 1, "accepted_answer_id": 37959723, "answer_count": 2, "score": 1, "last_activity_date": 1466575842, "creation_date": 1466573281, "question_id": 37959237, "link": "https://stackoverflow.com/questions/37959237/gem-tzinfo-data-platforms-mingw-mswin-x64-mingw-command-line-error", "title": "gem &#39;tzinfo-data&#39;, platforms: [:mingw, :mswin, :x64_mingw] Command line error", "body": "<p>I have install the window rails installer and when i execute this command</p>\n\n<pre><code>gem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw]\n</code></pre>\n\n<p>I am getting </p>\n\n<pre><code>ERROR:  While executing gem ... (Gem::CommandLineError)\n    Unknown command tzinfo-data,\n</code></pre>\n\n<p>not sure what i am missing.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "stripe-payments"], "comments": [{"owner": {"reputation": 845, "user_id": 5646801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d133162c0a6c4b45ad559f5a86f8f8a?s=128&d=identicon&r=PG&f=1", "display_name": "Sergii K", "link": "https://stackoverflow.com/users/5646801/sergii-k"}, "edited": false, "score": 0, "creation_date": 1466573523, "post_id": 37959185, "comment_id": 63365873, "body": "At <code>ChargesController#create</code> variable <code>@pin</code> is not initialized (<code>@pin == nil</code>). You need to add something like <code>@pin = Pin.find(params[:id])</code> or <code>@pin = Pin.build(...)</code>."}, {"owner": {"reputation": 485, "user_id": 4206932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef7320590394d82dd8ca2a8d62e453dc?s=128&d=identicon&r=PG&f=1", "display_name": "Codestudio", "link": "https://stackoverflow.com/users/4206932/codestudio"}, "reply_to_user": {"reputation": 845, "user_id": 5646801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d133162c0a6c4b45ad559f5a86f8f8a?s=128&d=identicon&r=PG&f=1", "display_name": "Sergii K", "link": "https://stackoverflow.com/users/5646801/sergii-k"}, "edited": false, "score": 0, "creation_date": 1466575726, "post_id": 37959185, "comment_id": 63366899, "body": "Just initialized the variable with @pin = Pin.find(params[:id]) and got the error message: &quot;Couldn&#39;t find Pin without an ID&quot;.  Not sure, why is this happening?"}, {"owner": {"reputation": 845, "user_id": 5646801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d133162c0a6c4b45ad559f5a86f8f8a?s=128&d=identicon&r=PG&f=1", "display_name": "Sergii K", "link": "https://stackoverflow.com/users/5646801/sergii-k"}, "edited": false, "score": 0, "creation_date": 1466576419, "post_id": 37959185, "comment_id": 63367252, "body": "You just need to find out what is <code>@pin</code>. Do you create it or retrieve from database? I can be more specific, if there will be more code from your models/controllers."}], "answers": [{"comments": [{"owner": {"reputation": 485, "user_id": 4206932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef7320590394d82dd8ca2a8d62e453dc?s=128&d=identicon&r=PG&f=1", "display_name": "Codestudio", "link": "https://stackoverflow.com/users/4206932/codestudio"}, "edited": false, "score": 0, "creation_date": 1466578318, "post_id": 37960277, "comment_id": 63368329, "body": "Where would you pass in the id of the pin in the request path?  I&#39;m trying to see if there is a more scalable way to do this instead of assigning @pin and all its instances to only one id in the database."}, {"owner": {"reputation": 2501, "user_id": 6458966, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iUhao.jpg?s=128&g=1", "display_name": "Harrison Lucas", "link": "https://stackoverflow.com/users/6458966/harrison-lucas"}, "reply_to_user": {"reputation": 485, "user_id": 4206932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef7320590394d82dd8ca2a8d62e453dc?s=128&d=identicon&r=PG&f=1", "display_name": "Codestudio", "link": "https://stackoverflow.com/users/4206932/codestudio"}, "edited": false, "score": 0, "creation_date": 1466579176, "post_id": 37960277, "comment_id": 63368851, "body": "So whatever method, or button or link calls the ChargesController#create method, that is where you would pass in the PIN ID. Also, this won&#39;t be a global assign - it will only assign <code>@pin</code> to the passed in pin id. See my edit for clarification"}, {"owner": {"reputation": 485, "user_id": 4206932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef7320590394d82dd8ca2a8d62e453dc?s=128&d=identicon&r=PG&f=1", "display_name": "Codestudio", "link": "https://stackoverflow.com/users/4206932/codestudio"}, "edited": false, "score": 0, "creation_date": 1466580812, "post_id": 37960277, "comment_id": 63369941, "body": "So for some reason this is not working.  I&#39;ve added more of my code with the button that calls ChargesController, I believe -- not sure if I adding another hidden field text with the path you recommended would work."}], "tags": [], "owner": {"reputation": 2501, "user_id": 6458966, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iUhao.jpg?s=128&g=1", "display_name": "Harrison Lucas", "link": "https://stackoverflow.com/users/6458966/harrison-lucas"}, "is_accepted": true, "score": 1, "last_activity_date": 1466579303, "last_edit_date": 1466579303, "creation_date": 1466577271, "answer_id": 37960277, "question_id": 37959185, "link": "https://stackoverflow.com/questions/37959185/stripe-payment-undefined-method-price-for-nilnilclass/37960277#37960277", "title": "Stripe Payment: undefined method `price&#39; for nil:NilClass", "body": "<p>The problem is that in your charges controller <code>@pin</code> isn't assigned to anything and therefore has a value of <code>nil</code> hence the error. </p>\n\n<p>You therefore need to assign <code>@pin</code> to a value before you call price on it. In order to do that you need to figure out how you are going to get the pin from the DB or whether or not you create it.</p>\n\n<p>One solution could be to pass in the id of the pin in the request path, e.g.</p>\n\n<pre><code>create_charge_path(pin_id: 123) \n</code></pre>\n\n<p>EDIT: This doesn't have to be hardcoded to 123 it can be whatever pin you like, just depends on where it's being called from. E.g. if you are calling from another controller action that has already loaded a particular pin from the database you could do:</p>\n\n<pre><code>create_charge_path(pin_id: pin.id)\n</code></pre>\n\n<p>Then in your <code>ChargesController</code></p>\n\n<pre><code>class ChargesController &lt; ApplicationController\n\n    def create\n      @pin = Pin.find(params[:pin_id])\n      # Amount in cents\n      @amount = (@pin.price * 100).floor\n\n      customer = Stripe::Customer.create(\n        :email =&gt; params[:stripeEmail],\n        :card  =&gt; params[:stripeToken]\n      )\n\n      charge = Stripe::Charge.create(\n        :customer    =&gt; customer.id,\n        :amount      =&gt; @amount,\n        :description =&gt; 'Rails Stripe customer',\n        :currency    =&gt; 'usd'\n      )\n\n    rescue Stripe::CardError =&gt; e\n      flash[:error] = e.message\n      redirect_to charges_path\n    end\nend\n</code></pre>\n\n<p>This will then assign <code>@pin</code> to a pin with a database ID of <code>123</code>.</p>\n"}], "owner": {"reputation": 485, "user_id": 4206932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef7320590394d82dd8ca2a8d62e453dc?s=128&d=identicon&r=PG&f=1", "display_name": "Codestudio", "link": "https://stackoverflow.com/users/4206932/codestudio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 934, "favorite_count": 0, "accepted_answer_id": 37960277, "answer_count": 1, "score": 0, "last_activity_date": 1466580472, "creation_date": 1466573042, "last_edit_date": 1466580472, "question_id": 37959185, "link": "https://stackoverflow.com/questions/37959185/stripe-payment-undefined-method-price-for-nilnilclass", "title": "Stripe Payment: undefined method `price&#39; for nil:NilClass", "body": "<p>I have an application that I am testing stripe payments on.  Right now, I am trying to configuring the charge so that it takes the price from another model (pin.price) and charges it correctly.  So far, I am running into the following error message:</p>\n\n<p><strong>NoMethodError in ChargesController#create\nundefined method `price' for nil:NilClass</strong></p>\n\n<p>app/controllers/charges_controller.rb</p>\n\n<pre><code>class ChargesController &lt; ApplicationController\n\n    def create\n      # Amount in cents\n      @amount = (@pin.price * 100).floor\n\n      customer = Stripe::Customer.create(\n        :email =&gt; params[:stripeEmail],\n        :card  =&gt; params[:stripeToken]\n      )\n\n      charge = Stripe::Charge.create(\n        :customer    =&gt; customer.id,\n        :amount      =&gt; @amount,\n        :description =&gt; 'Rails Stripe customer',\n        :currency    =&gt; 'usd'\n      )\n\n    rescue Stripe::CardError =&gt; e\n      flash[:error] = e.message\n      redirect_to charges_path\n    end\nend\n</code></pre>\n\n<p>app/controllers/pins_controller.rb</p>\n\n<pre><code>class PinsController &lt; ApplicationController\n  before_action :set_pin, only: [:show, :edit, :update, :destroy, :bid]\n  before_action :correct_user, only: [:edit, :update, :destroy]\n  before_action :authenticate_user!, except: [:index, :show]\n\n  .....\n\n    def pin_params\n      params.require(:pin).permit(:description, :price, :image, :manufacturer, :model)\n    end\nend\n</code></pre>\n\n<p>app/db/migrate</p>\n\n<pre><code>class AddPriceToPins &lt; ActiveRecord::Migration\n  def change\n    add_column :pins, :price, :decimal\n  end\nend\n</code></pre>\n\n<p>I'm pretty sure the error is coming from \"@amount = (@pin.price * 100).floor\" but I am just not sure how to better express this amount so each pin's price isn't static but matches to its current inputted value in the database.</p>\n\n<p>EDIT: Including form with link to stripe payment code here:</p>\n\n<pre><code> &lt;%= form_tag charges_path, id: 'chargesForm' do %&gt;\n              &lt;script src=\"https://checkout.stripe.com/checkout.js\"&gt;&lt;/script&gt;\n              &lt;%= hidden_field_tag 'stripeToken' %&gt;\n              &lt;%= hidden_field_tag 'stripeEmail' %&gt;  \n              &lt;button id=\"btn-buy\" type=\"button\" class=\"btn btn-success btn-lg btn-block\"&gt;&lt;span class=\"glyphicon glyphicon-heart\"&gt;&lt;/span&gt;   I want this!&lt;/button&gt;\n\n              &lt;script&gt;\n                  var handler = StripeCheckout.configure({\n                    key: '&lt;%= Rails.configuration.stripe[:publishable_key] %&gt;',\n                    token: function(token, arg) {\n                      document.getElementById(\"stripeToken\").value = token.id;\n                      document.getElementById(\"stripeEmail\").value = token.email;\n                      document.getElementById(\"chargesForm\").submit();\n                    }\n                  });\n                   document.getElementById('btn-buy').addEventListener('click', function(e) {\n                    handler.open({\n                      name: '&lt;%= @pin.manufacturer %&gt;',\n                      description: '&lt;%= @pin.description %&gt;',\n                      amount: '&lt;%= (@pin.price * 100).floor %&gt;'\n                  });\n                  e.preventDefault();\n                 })\n              &lt;/script&gt;\n          &lt;% end %&gt;\n</code></pre>\n\n<p>Any thoughts?</p>\n"}, {"tags": ["ruby", "pdfnet"], "answers": [{"comments": [{"owner": {"reputation": 3090, "user_id": 3804420, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7143c03b5b0e42cb070947af0d60ebd1?s=128&d=identicon&r=PG", "display_name": "gmuraleekrishna", "link": "https://stackoverflow.com/users/3804420/gmuraleekrishna"}, "edited": false, "score": 0, "creation_date": 1466671992, "post_id": 37973520, "comment_id": 63417818, "body": "Is PDFNet a singleton? Why isn&#39;t that using an instance to do the conversion?"}, {"owner": {"reputation": 2165, "user_id": 3761687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe84b940e9ab4cd6c22dc4969027dd89?s=128&d=identicon&r=PG", "display_name": "Ryan", "link": "https://stackoverflow.com/users/3761687/ryan"}, "reply_to_user": {"reputation": 3090, "user_id": 3804420, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7143c03b5b0e42cb070947af0d60ebd1?s=128&d=identicon&r=PG", "display_name": "gmuraleekrishna", "link": "https://stackoverflow.com/users/3804420/gmuraleekrishna"}, "edited": false, "score": 0, "creation_date": 1466697795, "post_id": 37973520, "comment_id": 63436923, "body": "PDFNet is fully compatible with multi-threading, but some API calls are synchronized and affect all threads. PDFNet.Initialize is such a call. If you are having a particular issue, perhaps you should create a new SO question detailing what exactly that is. Or edit this one, as it is unclear what issue (if any) you are having."}], "tags": [], "owner": {"reputation": 2165, "user_id": 3761687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe84b940e9ab4cd6c22dc4969027dd89?s=128&d=identicon&r=PG", "display_name": "Ryan", "link": "https://stackoverflow.com/users/3761687/ryan"}, "is_accepted": true, "score": 0, "last_activity_date": 1466612518, "creation_date": 1466612518, "answer_id": 37973520, "question_id": 37958884, "link": "https://stackoverflow.com/questions/37958884/how-to-use-pdfnet-instance-across-the-ruby-app/37973520#37973520", "title": "How to use PDFNet instance across the ruby app", "body": "<p>PDFNet.Initialize is a process wide call, so if both code snippets are in the same process, both will be in licensed mode.</p>\n"}], "owner": {"reputation": 3090, "user_id": 3804420, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7143c03b5b0e42cb070947af0d60ebd1?s=128&d=identicon&r=PG", "display_name": "gmuraleekrishna", "link": "https://stackoverflow.com/users/3804420/gmuraleekrishna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 37973520, "answer_count": 1, "score": 0, "last_activity_date": 1466612518, "creation_date": 1466571570, "question_id": 37958884, "link": "https://stackoverflow.com/questions/37958884/how-to-use-pdfnet-instance-across-the-ruby-app", "title": "How to use PDFNet instance across the ruby app", "body": "<p>I have to initialize the PDFNet library once in my app. I did it in my <code>app.rb</code> which is run first</p>\n\n<pre><code># app.rb\nrequire 'PDFNetC/Lib/PDFNetRuby'\ninclude PDFNetRuby\nPDFNet.Initialize(ENV['PDFTRON_LICENSE_KEY'])\n</code></pre>\n\n<p>Later in my controller I need to convert pdf to xod for which I will require the initialized PDFNet instance</p>\n\n<pre><code># SomeController.rb\nout_file_path = \"#{ENV['TEMP_DIR']}/#{Time.now.to_i}.xod\"\n::PDFNetRuby::Convert.ToXod(in_file_path, out_file_path)\nFile.open(out_file_path, 'rb')\n</code></pre>\n\n<p>Will the above method get the license registerd instance of PDFNet?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nested-forms", "ruby-on-rails-4.2", "dynamic-forms"], "comments": [{"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1466571024, "post_id": 37958515, "comment_id": 63364993, "body": "Hi and welcome to Stack overflow. Thanks heaps for adding your code. Can you clarify a bit about the problem you are having. &quot;I&#39;m having trouble&quot; is a bit vague. What do you expect to see? what do you see instead? what have you tried to make it work and what other research have you done? (we don&#39;t want to duplicate your efforts)"}, {"owner": {"reputation": 11, "user_id": 6497171, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Kdhrn_t22MI/AAAAAAAAAAI/AAAAAAAATm4/eEa3rd--uwQ/photo.jpg?sz=128", "display_name": "vinicius carvalho", "link": "https://stackoverflow.com/users/6497171/vinicius-carvalho"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1466600525, "post_id": 37958515, "comment_id": 63383395, "body": "Hi, when I create a new appointment the app should allow I enter multiple dynamic forms (record_forms) and display its fields (record_form_fields). The values for the dynamics fields should be salve in the hash properties. I&#39;m having trouble with the partial _appointment_record_form_fields, with appointment_controller and with _appointment_record_form_fields thats is not salving and showing correctly the dynamic forms."}, {"owner": {"reputation": 11, "user_id": 6497171, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Kdhrn_t22MI/AAAAAAAAAAI/AAAAAAAATm4/eEa3rd--uwQ/photo.jpg?sz=128", "display_name": "vinicius carvalho", "link": "https://stackoverflow.com/users/6497171/vinicius-carvalho"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1466602500, "post_id": 37958515, "comment_id": 63385196, "body": "Now I&#39;m getting the error  ActionView::Template::Error (undefined method `properties&#39; for nil:NilClass):"}, {"owner": {"reputation": 11, "user_id": 6497171, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Kdhrn_t22MI/AAAAAAAAAAI/AAAAAAAATm4/eEa3rd--uwQ/photo.jpg?sz=128", "display_name": "vinicius carvalho", "link": "https://stackoverflow.com/users/6497171/vinicius-carvalho"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1466602647, "post_id": 37958515, "comment_id": 63385328, "body": "Schema &gt;&gt; <a href=\"https://gist.github.com/viniciuscdes/f435c94a261183d6356ad8b52cc12aa7\" rel=\"nofollow noreferrer\">gist.github.com/viniciuscdes/f435c94a261183d6356ad8b52cc12aa&zwnj;&#8203;7</a>"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1466639024, "post_id": 37958515, "comment_id": 63405646, "body": "&quot; is not salving and showing correctly the dynamic forms&quot; You need to edit your question (don&#39;t post code here in the comments because code formatting is dreadful) and add an example of this. Show us what information you entered. Show us the server-logs that have the params that arrived at the controller. show us what is displaying in the forms, and then tell us what you&#39;d expect to see in the forms."}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1466639153, "post_id": 37958515, "comment_id": 63405679, "body": "&quot;ActionView::Template::Error (undefined method `properties&#39; for nil:NilClass&quot; Show us the full stacktrace of the error (from your server logs) (again - edit your question and put it there, don&#39;t put it in these comments). Don&#39;t just give us the error message (what you have above), in your logs there will be about 20-30 lines of filenames... please copy the first couple (you don&#39;t need the full set, but you definitely need the first few lines) because that will tell us which file and which line of code is causing the error. You will be able to work backward from that to find the bug."}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1466639216, "post_id": 37958515, "comment_id": 63405701, "body": "&quot;Schema &gt;&gt;&quot; Please don&#39;t include links to offsite locations in Stack Overflow. Here we want he question to contain the full set of information fora problem. This is because external links become stale, but we want our questions to last forever - in case anyone else ever has the same problem, they can look at your question, and our answers and then they can be helped solve their problem too."}], "owner": {"reputation": 11, "user_id": 6497171, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Kdhrn_t22MI/AAAAAAAAAAI/AAAAAAAATm4/eEa3rd--uwQ/photo.jpg?sz=128", "display_name": "vinicius carvalho", "link": "https://stackoverflow.com/users/6497171/vinicius-carvalho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1466569412, "creation_date": 1466569412, "question_id": 37958515, "link": "https://stackoverflow.com/questions/37958515/using-has-many-through-with-dynamic-forms-rails-4", "title": "using has_many through with dynamic forms rails 4", "body": "<p>I want to create an appointment form with dynamics forms. But I'm not getting what I'm doing wrong</p>\n\n<p>I'm having trouble with the partial _appointment_record_form_fields and with appointment_controller. </p>\n\n<p>Someone can help me fix the controller and the view?</p>\n\n<p>My Models:</p>\n\n<pre><code>class Appointment &lt; ActiveRecord::Base\n\n  has_many   :appointment_record_forms, dependent: :destroy\n  has_many   :record_forms, through: :appointment_record_forms\n\n accepts_nested_attributes_for  :appointment_record_forms, allow_destroy: true\n\nend\n\n\n\n class AppointmentRecordForm &lt; ActiveRecord::Base\n  belongs_to :appointment\n  belongs_to :record_form\n\n\n  serialize :properties, Hash\n\n  def validate_properties\n    record_form.record_form_fields.each do |record_form_field|\n      if record_form_field.required? &amp;&amp; properties[record_form_field.name].blank?\n        errors.add record_form_field.name, \"must not be blank\"\n      end\n    end\n  end\n\nend\n\nclass RecordForm &lt; ActiveRecord::Base\n    has_many :record_form_fields\n\n    has_many :appointment_record_forms, dependent: :destroy\n    has_many :appointments, through: :appointment_record_forms\n\n    accepts_nested_attributes_for :record_form_fields, allow_destroy: true\n\nend\n\nclass RecordFormField &lt; ActiveRecord::Base\n  belongs_to :record_form\nend\n</code></pre>\n\n<p>My Controller </p>\n\n<pre><code>class AppointmentsController &lt; ApplicationController\n.\n.\n.\n    def appointment_params\n      params.require(:appointment).permit(:duration, :appointment_date, :patient_id, :doctor_id, \n                                           :record_forms =&gt; [:id, :name, :_destroy],\n                                           :record_form_fields =&gt; [:id, :name, :field_type, :require, :record_form_id, :_destroy]) \n    end\nend\n</code></pre>\n\n<p>Views:\nviews/appointment/_form</p>\n\n<pre><code>...\n  &lt;%= f.fields_for :appointment_record_forms do |builder| %&gt;\n    &lt;%= render 'appointment_record_form_fields', f: builder %&gt;\n  &lt;% end %&gt;\n  &lt;%= link_to_add_fields \"Add Field\", f, :appointment_record_forms %&gt;\n...\n</code></pre>\n\n<p>partial/_appointment_record_form_fields</p>\n\n<pre><code> &lt;fieldset&gt; \n  &lt;%= f.fields_for :properties, OpenStruct.new(@appointment_record_forms.properties) do    |builder| %&gt;\n    &lt;% @appointment_record_forms.record_form.record_form_fields.each do |record_form_field| %&gt;\n\n      &lt;%= render \"appointments/fields/#{record_form_field.field_type}\", record_form_field: record_form_field, f: builder %&gt;\n    &lt;% end %&gt;\n  &lt;% end %&gt;\n\n  &lt;%= f.hidden_field :_destroy %&gt;\n  &lt;%= link_to \"remove\", '#', class: \"remove_fields\" %&gt;\n&lt;/fieldset&gt;\n</code></pre>\n\n<p>TKS</p>\n"}, {"tags": ["javascript", "ruby", "mechanize"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1466569169, "post_id": 37958461, "comment_id": 63364486, "body": "i dont think mechanize runs any javascript, you&#39;ll have to use a headless browser like phantom/selenium for that."}, {"owner": {"reputation": 1826, "user_id": 5150708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/252ff188dc7377773468944f8794dc3f?s=128&d=identicon&r=PG&f=1", "display_name": "Santosh Sharma", "link": "https://stackoverflow.com/users/5150708/santosh-sharma"}, "edited": false, "score": 0, "creation_date": 1466571828, "post_id": 37958461, "comment_id": 63365251, "body": "You can search script tag in page like <code>agent.page.search(&quot;script&quot;)[1]</code>"}], "owner": {"reputation": 45, "user_id": 4672285, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-nfGx59V6uxQ/AAAAAAAAAAI/AAAAAAAAABI/u6bx6Pjfu6Y/photo.jpg?sz=128", "display_name": "Tai Tri Vo", "link": "https://stackoverflow.com/users/4672285/tai-tri-vo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 239, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1466575022, "creation_date": 1466569027, "last_edit_date": 1466575022, "question_id": 37958461, "link": "https://stackoverflow.com/questions/37958461/mechanize-work-with-javascript-window-open-in-ruby", "title": "Mechanize work with javascript window.open in Ruby", "body": "<p>I'm using <code>Mechanize</code> to crawl web and I get problem with <code>window.open</code>\nPage has html like below:</p>\n\n<pre><code>&lt;form name=\"form1\" method=\"post\" action=\"index.asp\"&gt;\n  &lt;a href=\"javascript:yoyaku('0','main','https://example.com/xyz/')\" class= \"col\"&gt;\n    &lt;span class=\"font-M1b\"&gt;Click link&lt;/span&gt;\n  &lt;/a&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>Page object in <code>mechanize</code> like:</p>\n\n<pre><code>[1] pry(#&lt;Crawler::Inzai&gt;)&gt; agent.page\n=&gt; #&lt;Mechanize::Page\n ...\n {links\n  #&lt;Mechanize::Page::Link \"Click link\" \"javascript:yoyaku('0','main','https://example.com/xyz/')\"&gt;\n {forms\n  #&lt;Mechanize::Form\n   {name \"form1\"}\n   {method \"POST\"}\n   {action \"index.asp\"}\n   {fields [hidden:0x4399a00 type: hidden name: MENULINK value: ] [hidden:0x4399870 type: hidden name: UPFLG value: ]}\n   &gt;}&gt;\n</code></pre>\n\n<p>And <code>javascript:yoyaku</code> function like:</p>\n\n<pre><code>function yoyaku(wkobj,wkvalue,wklnk){\n    var wkurl = '';\n\n    // jump to here\n    if (wkvalue != '' &amp;&amp; document.links[wkobj].disabled != true){\n        for (cnt = 0; cnt &lt; document.links.length; cnt++){\n            document.links[cnt].disabled = true;            \n        }\n\n        // return 'https://example.com/xyz/logon.asp?LINK=showmenu'\n        wkurl = wklnk + 'logon.asp?LINK=showmenu';\n\n        window.open(wkurl,'SisetuReserveIac','location=no,menubar=no,status=no,titlebar=no,toolbar=no,scrollbars=yes,resizable=yes,width=1024,height='+(screen.availHeight)+',top=0');\n\n        for (cnt = 0; cnt &lt; document.links.length; cnt++){\n            document.links[cnt].disabled = false;\n        }\n    }\n    return;\n}\n</code></pre>\n\n<p>I expect when I click <code>Click link</code> above, I'll get a page with 2 frames in new window like that:</p>\n\n<pre><code>&lt;frame src=\"menu.asp\" name=\"menu\" frameborder=\"0\" noresize=\"\"&gt;\n  ...\n&lt;frame&gt;\n\n&lt;frame src=\"top.asp\" name=\"contents\" frameborder=\"0\" noresize=\"\"&gt;\n  &lt;form name=\"form1\" method=\"post\" action=\"top.asp\"&gt;\n    ...\n  &lt;/form&gt;\n&lt;frame&gt;\n</code></pre>\n\n<p>Currently, I use <code>mechanize</code> get url that we have in <code>javascript</code> function, like:</p>\n\n<pre><code>agent.get(\"https://example.com/xyz/logon.asp?LINK=showmenu\")\n</code></pre>\n\n<p>But, i get page have only 1 frame like :</p>\n\n<pre><code>[1] pry(#&lt;Crawler::Inzai&gt;)&gt; agent.page\n=&gt; #&lt;Mechanize::Page\n ...\n {frames #&lt;Mechanize::Page::Frame \"menu\" \"menu.asp\"&gt; #&lt;Mechanize::Page::Frame \"contents\" \"top.asp\"&gt;}&gt;\n</code></pre>\n\n<p>Can you help about it?\nCan I use <code>Mechanize</code> for this case?\nMany thanks!</p>\n"}, {"tags": ["ruby", "macos", "rspec", "rubygems"], "comments": [{"owner": {"reputation": 3020, "user_id": 4493564, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-ZrR5HKgzmQA/AAAAAAAAAAI/AAAAAAAAA2Y/YxH3F9m512U/photo.jpg?sz=128", "display_name": "Petr Gazarov", "link": "https://stackoverflow.com/users/4493564/petr-gazarov"}, "edited": false, "score": 0, "creation_date": 1466568227, "post_id": 37958307, "comment_id": 63364238, "body": "<a href=\"https://github.com/rubygems/rubygems/issues/515\" rel=\"nofollow noreferrer\">github.com/rubygems/rubygems/issues/515</a> This might be helpful"}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 0, "last_activity_date": 1466572548, "creation_date": 1466572548, "answer_id": 37959075, "question_id": 37958307, "link": "https://stackoverflow.com/questions/37958307/cant-install-any-rubygems-invalid-argument-error-when-connecting-to-sources-g/37959075#37959075", "title": "Can&#39;t install any RubyGems, invalid argument error when connecting to sources [gem 2.4.8]", "body": "<p>There are [known] issues with SSL on <em>rubygems.org</em>, not on your machine. Explicitly set the source to be HTTP, not HTTPS:</p>\n\n<pre><code>gem install rspec --source http://rubygems.org\n</code></pre>\n\n<p>In your <code>Gemfile</code> (if any) you probably should set:</p>\n\n<pre><code>source 'http://rubygems.org'\n</code></pre>\n\n<p>as the very top line.</p>\n"}], "owner": {"reputation": 3, "user_id": 6497074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3OrU.jpg?s=128&g=1", "display_name": "reblws", "link": "https://stackoverflow.com/users/6497074/reblws"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 915, "favorite_count": 0, "accepted_answer_id": 37959075, "answer_count": 1, "score": 0, "last_activity_date": 1466572548, "creation_date": 1466567953, "question_id": 37958307, "link": "https://stackoverflow.com/questions/37958307/cant-install-any-rubygems-invalid-argument-error-when-connecting-to-sources-g", "title": "Can&#39;t install any RubyGems, invalid argument error when connecting to sources [gem 2.4.8]", "body": "<p>I can't install any ruby gems on this Mac running OSX 10.11.</p>\n\n<p>Here is what happens when I try to install a gem:</p>\n\n<blockquote>\n  <p>$ gem install rspec</p>\n  \n  <p>ERROR:  Could not find a valid gem 'rspec' (>= 0), here is why:</p>\n  \n  <p>Unable to download data from <a href=\"https://rubygems.org/\" rel=\"nofollow\">https://rubygems.org/</a> - Errno::EINVAL: Invalid argument - connect(2) for \"rubygems.org\" port 443 (<a href=\"https://rubygems.org/specs.4.8.gz\" rel=\"nofollow\">https://rubygems.org/specs.4.8.gz</a>)`</p>\n</blockquote>\n\n<p>I thought it might be an ssl issue so I tried running </p>\n\n<blockquote>\n  <p>$ openssl s_client -showcerts -connect rubygems.org:https</p>\n  \n  <p>connect: Invalid argument</p>\n  \n  <p>connect:errno=22</p>\n</blockquote>\n\n<p>Any ideas on what the problem is? Thank you for your time and help</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "unit-testing", "rspec", "paper-trail-gem"], "comments": [{"owner": {"reputation": 13756, "user_id": 567762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG", "display_name": "Jared Beck", "link": "https://stackoverflow.com/users/567762/jared-beck"}, "edited": false, "score": 0, "creation_date": 1467149517, "post_id": 37958090, "comment_id": 63609512, "body": "I think that all classes which extend <code>ActiveRecord::Base</code> must have a table in the database. It feels like you&#39;re fighting the framework. Also, you are not testing production code (actual models) so I would question the value of such tests."}, {"owner": {"reputation": 13756, "user_id": 567762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG", "display_name": "Jared Beck", "link": "https://stackoverflow.com/users/567762/jared-beck"}, "edited": false, "score": 0, "creation_date": 1467149597, "post_id": 37958090, "comment_id": 63609550, "body": "You&#39;ve probably already seen it, but there&#39;s a whole section of the PT docs regarding testing: <a href=\"https://github.com/airblade/paper_trail#7-testing\" rel=\"nofollow noreferrer\">github.com/airblade/paper_trail#7-testing</a>"}, {"owner": {"reputation": 541, "user_id": 2978882, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a10d94307331f18881be9b85f9a02c77?s=128&d=identicon&r=PG&f=1", "display_name": "gazubi", "link": "https://stackoverflow.com/users/2978882/gazubi"}, "reply_to_user": {"reputation": 13756, "user_id": 567762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG", "display_name": "Jared Beck", "link": "https://stackoverflow.com/users/567762/jared-beck"}, "edited": false, "score": 0, "creation_date": 1467182523, "post_id": 37958090, "comment_id": 63619500, "body": "yeah have checked that section out. the papertrail functionality is isolated in a separate module, and I want to be able to write tests for that module, agnostic of the actual model it is testing"}, {"owner": {"reputation": 13756, "user_id": 567762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG", "display_name": "Jared Beck", "link": "https://stackoverflow.com/users/567762/jared-beck"}, "edited": false, "score": 0, "creation_date": 1467390729, "post_id": 37958090, "comment_id": 63729789, "body": "re: &quot;I want to .. write tests for [PaperTrail itself] agnostic of the actual model it is testing&quot; You are more than welcome to contribute tests to the PaperTrail codebase at <a href=\"https://github.com/airblade/paper_trail\" rel=\"nofollow noreferrer\">github.com/airblade/paper_trail</a>. I will be happy to help with that."}, {"owner": {"reputation": 541, "user_id": 2978882, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a10d94307331f18881be9b85f9a02c77?s=128&d=identicon&r=PG&f=1", "display_name": "gazubi", "link": "https://stackoverflow.com/users/2978882/gazubi"}, "reply_to_user": {"reputation": 13756, "user_id": 567762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG", "display_name": "Jared Beck", "link": "https://stackoverflow.com/users/567762/jared-beck"}, "edited": false, "score": 0, "creation_date": 1468844249, "post_id": 37958090, "comment_id": 64278404, "body": "will do @JaredBeck. I&#39;ll work on it and create a PR"}], "owner": {"reputation": 541, "user_id": 2978882, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a10d94307331f18881be9b85f9a02c77?s=128&d=identicon&r=PG&f=1", "display_name": "gazubi", "link": "https://stackoverflow.com/users/2978882/gazubi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 602, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1466566479, "creation_date": 1466566479, "question_id": 37958090, "link": "https://stackoverflow.com/questions/37958090/testing-papertrail-in-a-model-concern-using-rspec-rails", "title": "Testing papertrail in a model concern using RSpec Rails", "body": "<p>I have added an <code>ActiveSupport::Concern</code> that declares <code>has_paper_trail</code> with some additional options in the class method. This concern is included by the actual model, that can now have versioning enabled on it via papertrail</p>\n\n<p>Now I want to test this concern only using RSpecs on a mock model (that does not currently exist in the database), and make sure that the versions table gets populated correctly.</p>\n\n<p>So I have an RSpec where I am doing this :</p>\n\n<pre><code>describe PapertrailConcern do\n  before(:all) do\n    class PaperTrailModel &lt; ActiveRecord::Base\n      include PapertrailConcern\n\n      has_paper_trail\n    end\n  end\n\n  it 'stores changes to model in paper trail versions' do\n    # check if PaperTrailModel attribute changes are tracked in versions\n  end\nend\n</code></pre>\n\n<p>Since the PaperTrail Model does not exist in the database, I get this error if I do any operations on it:</p>\n\n<pre><code>  PG::UndefinedTable: ERROR:  relation \"paper_trail_models\" does not exist\n       LINE 5:                WHERE a.attrelid = '\"paper_trail_models\"'::re...\n                                                 ^\n</code></pre>\n\n<p>I also considered using Rspec Mock Model, but I am not sure how to enable papertrail versioning on a mock model. Haven't found anything along those lines online</p>\n\n<p>Has anyone run into this issue or would happen to know how I could declare a test model and test if papertrail versioning works correctly on it?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1466563252, "post_id": 37957449, "comment_id": 63363118, "body": "No, it&#39;s not possible because you don&#39;t have a reference to the constant, you have a reference to the value of the constant."}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1466573029, "post_id": 37957512, "comment_id": 63365678, "body": "Consider removing empty parentheses, to use them is not idiomatic ruby."}, {"owner": {"reputation": 1592, "user_id": 1201134, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d3a6eb2a8f20220e8f13f58adf9c63ac?s=128&d=identicon&r=PG", "display_name": "mayatron", "link": "https://stackoverflow.com/users/1201134/mayatron"}, "edited": false, "score": 0, "creation_date": 1517527092, "post_id": 37957512, "comment_id": 84143482, "body": "This actually doesn&#39;t work. It&#39;s only referencing the order that the constants are listed in the <code>Colors</code> module and not the actual value for each constant. In the example given, this works only because the sort order and values match."}], "tags": [], "owner": {"reputation": 1588, "user_id": 6353415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HI3UX.png?s=128&g=1", "display_name": "Alastair Brown", "link": "https://stackoverflow.com/users/6353415/alastair-brown"}, "is_accepted": false, "score": 1, "last_activity_date": 1466573501, "last_edit_date": 1466573501, "creation_date": 1466562286, "answer_id": 37957512, "question_id": 37957449, "link": "https://stackoverflow.com/questions/37957449/how-to-get-the-name-of-the-constant/37957512#37957512", "title": "How to get the name of the constant", "body": "<p>Try using <a href=\"http://apidock.com/ruby/v1_9_3_392/Module/constants\" rel=\"nofollow\"><code>constants</code></a>:</p>\n\n<pre><code>Colors.constants\n</code></pre>\n\n<p>so </p>\n\n<ul>\n<li><code>Colors.constants[0].id2name</code> is <code>Red</code></li>\n<li><code>Colors.constants[1].id2name</code> is <code>Blue</code></li>\n<li><code>Colors.constants[2].id2name</code> is <code>Green</code></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 1254, "user_id": 4576274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5Wnd.jpg?s=128&g=1", "display_name": "Pramod", "link": "https://stackoverflow.com/users/4576274/pramod"}, "is_accepted": false, "score": 1, "last_activity_date": 1466565846, "creation_date": 1466565846, "answer_id": 37957995, "question_id": 37957449, "link": "https://stackoverflow.com/questions/37957449/how-to-get-the-name-of-the-constant/37957995#37957995", "title": "How to get the name of the constant", "body": "<p>No, It's not possible to get the string representation as <code>Colors::Red</code> will refer to value of constant <code>Red</code> defined in module <code>Colors</code>.</p>\n\n<pre><code>        Colors::Red =&gt; 0                     \n</code></pre>\n\n<p>However, You can get the list of constants for the module using <code>Colors.constants</code></p>\n\n<pre><code>        Colors.constants =&gt; [:Red, :Blue, :Green]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3374, "user_id": 312462, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2UuwY.jpg?s=128&g=1", "display_name": "Yeonho", "link": "https://stackoverflow.com/users/312462/yeonho"}, "edited": false, "score": 0, "creation_date": 1466568841, "post_id": 37958373, "comment_id": 63364405, "body": "Thanks, I wanted to know if a built-in method existed for this."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1466572944, "post_id": 37958373, "comment_id": 63365650, "body": "You must be kidding :) <code>Colors</code> is <i>the constant</i> of absolutely same nature as <code>Colors::Red</code>. They are both constants. Their names are to be retrieven <i>the same way</i>. While your answer has an added value, demonstrating introspection techniques etc, it is <i>not an answer to the question stated</i>. As Jordan pointed out in the comments to original question, in general it is impossible. For <code>Colors::Red</code> reference, as in your example, the answer would be <code>Colors::Red.to_s</code>. For <code>0</code> it is ambiguous (hence not defined): <code>class A; A1 = 0; A2 = 0; end</code>."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 6, "last_activity_date": 1575356420, "last_edit_date": 1575356420, "creation_date": 1466568444, "answer_id": 37958373, "question_id": 37957449, "link": "https://stackoverflow.com/questions/37957449/how-to-get-the-name-of-the-constant/37958373#37958373", "title": "How to get the name of the constant", "body": "<p>Yes, provided only one constant has a value equal to the value of the given reference.</p>\n\n<pre><code>def ref_to_str(value)\n  k = Colors.constants.find { |k| Colors.const_get(k) == value }\n  k.nil? ? nil : \"Colors::#{k}\"\nend\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>ref_to_str(0)\n  #=&gt; \"Colors::Red\" \nref_to_str(1)    \n  #=&gt; \"Colors::Blue\" \nref_to_str(2)\n  #=&gt; \"Colors::Green\" \nref_to_str(3)\n  #=&gt; nil \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 1, "last_activity_date": 1466583695, "creation_date": 1466583695, "answer_id": 37962413, "question_id": 37957449, "link": "https://stackoverflow.com/questions/37957449/how-to-get-the-name-of-the-constant/37962413#37962413", "title": "How to get the name of the constant", "body": "<p><code>'Colors'</code> is <em>not</em> the name of the constant <code>Colors</code>, it is the name of the <code>Module</code> that has been assigned to the constant <code>Colors</code>. There is a <em>fundamental</em> difference between variables (and I include constants in this, together with local variables, instance variables, class variables, global variables, thread-local pseudo-globals, method-local pseudo-globals, and special variables) and objects, not the least of which is that objects are, well, objects (duh!) and variables are <em>not</em> objects! You cannot store them in variables, you cannot call methods on them, all you can do is assign them (at least some of them) and dereference them.</p>\n\n<p>Since in an object-oriented language, method calling is pretty much all you can do, and you cannot call methods on variables because they aren't objects, there is no way that you can ask a variable questions such as \"what is your name\".</p>\n\n<p>You can ask a <code>Module</code> for its name, because the <a href=\"http://ruby-doc.org/core/Module.html\" rel=\"nofollow\"><code>Module</code></a> class has a <a href=\"http://ruby-doc.org/core/Module.html#method-i-name\" rel=\"nofollow\"><code>name</code></a> instance method that returns the <code>Module</code>'s name. <a href=\"http://ruby-doc.org/core/Integer.html\" rel=\"nofollow\"><code>Integer</code></a> doesn't have a <code>name</code> method, so you cannot ask an <code>Integer</code> for its name.</p>\n\n<p>Note that the name of a <code>Module</code> is somewhat \"magical\". It is <code>nil</code> by default, but the first time you assign a <code>Module</code> to a constant, the name will become <em>some</em> representation of the path to said constant (basically the <code>name</code> of the enclosing module + <code>::</code> + the name of the constant). However, if you assign the module to a different constant, even if you <a href=\"http://ruby-doc.org/core-2.3.1/Module.html#method-i-remove_const\" rel=\"nofollow\"><code>remove_const</code></a> the constant, the name will still stay the same.</p>\n\n<p>Here's a nice little snippet of code that demonstrates that <code>Module#name</code> really returns the name of the <code>Module</code>, not the name of the variable used to refer to it:</p>\n\n<pre><code>m = Module.new\n\nm.name\n# =&gt; nil\n\nA = m\n\nm.name\n# =&gt; 'A'\n\nA = nil\nObject.send(:remove_const, :A) # just to be *really* sure\n\nA\n# NameError: uninitialized constant A\n\nm.name\n# =&gt; 'A'\n</code></pre>\n\n<p>So, in short: no, there is no way you can get the name of a constant (or any variable) from the object referenced by that constant, even if just because the object can be referenced by more than one variable, and then what name would you return?</p>\n"}], "owner": {"reputation": 3374, "user_id": 312462, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2UuwY.jpg?s=128&g=1", "display_name": "Yeonho", "link": "https://stackoverflow.com/users/312462/yeonho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2716, "favorite_count": 0, "accepted_answer_id": 37958373, "answer_count": 4, "score": 1, "last_activity_date": 1575356420, "creation_date": 1466561646, "question_id": 37957449, "link": "https://stackoverflow.com/questions/37957449/how-to-get-the-name-of-the-constant", "title": "How to get the name of the constant", "body": "<pre><code>module Colors\n  Red = 0\n  Blue = 1\n  Green = 2\nend\n</code></pre>\n\n<p>When I have the reference to the module <code>Colors</code>, I can get the name of that module <code>\"Colors\"</code> by <code>Colors.name</code>.</p>\n\n<p>Is it possible to get the string representation of the constant <code>\"Colors::Red\"</code> when I have a reference to the constant <code>Colors::Red</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 11638, "user_id": 461294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQqHn.jpg?s=128&g=1", "display_name": "vich", "link": "https://stackoverflow.com/users/461294/vich"}, "edited": false, "score": 0, "creation_date": 1466562076, "post_id": 37957448, "comment_id": 63362870, "body": "Is your production code up to date? Did you run <code>rake db:migrate</code> in production?"}, {"owner": {"reputation": 198, "user_id": 3966729, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7da8b9392fa083519689ae308e92cd36?s=128&d=identicon&r=PG", "display_name": "Devon Quick", "link": "https://stackoverflow.com/users/3966729/devon-quick"}, "reply_to_user": {"reputation": 11638, "user_id": 461294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQqHn.jpg?s=128&g=1", "display_name": "vich", "link": "https://stackoverflow.com/users/461294/vich"}, "edited": false, "score": 0, "creation_date": 1466562183, "post_id": 37957448, "comment_id": 63362901, "body": "yes i did and i verified the table was created in MySQL. I also manually added records via SQL."}, {"owner": {"reputation": 11638, "user_id": 461294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQqHn.jpg?s=128&g=1", "display_name": "vich", "link": "https://stackoverflow.com/users/461294/vich"}, "edited": false, "score": 0, "creation_date": 1466562516, "post_id": 37957448, "comment_id": 63362972, "body": "That&#39;s strange then. I would suggest you use a debugger (e.g. byebug) to inspect your index action, and check to see that the <code>EventType</code> class is defined. It seems weird to me that it would work locally and not in production if the code and db are up to date."}, {"owner": {"reputation": 3020, "user_id": 4493564, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-ZrR5HKgzmQA/AAAAAAAAAAI/AAAAAAAAA2Y/YxH3F9m512U/photo.jpg?sz=128", "display_name": "Petr Gazarov", "link": "https://stackoverflow.com/users/4493564/petr-gazarov"}, "edited": false, "score": 0, "creation_date": 1466563816, "post_id": 37957448, "comment_id": 63363220, "body": "What happens when you open production rails console and type EventType?"}, {"owner": {"reputation": 198, "user_id": 3966729, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7da8b9392fa083519689ae308e92cd36?s=128&d=identicon&r=PG", "display_name": "Devon Quick", "link": "https://stackoverflow.com/users/3966729/devon-quick"}, "reply_to_user": {"reputation": 3020, "user_id": 4493564, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-ZrR5HKgzmQA/AAAAAAAAAAI/AAAAAAAAA2Y/YxH3F9m512U/photo.jpg?sz=128", "display_name": "Petr Gazarov", "link": "https://stackoverflow.com/users/4493564/petr-gazarov"}, "edited": false, "score": 0, "creation_date": 1466566701, "post_id": 37957448, "comment_id": 63363891, "body": "@PetrGazarov, I put the results above."}, {"owner": {"reputation": 198, "user_id": 3966729, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7da8b9392fa083519689ae308e92cd36?s=128&d=identicon&r=PG", "display_name": "Devon Quick", "link": "https://stackoverflow.com/users/3966729/devon-quick"}, "reply_to_user": {"reputation": 11638, "user_id": 461294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQqHn.jpg?s=128&g=1", "display_name": "vich", "link": "https://stackoverflow.com/users/461294/vich"}, "edited": false, "score": 0, "creation_date": 1466567230, "post_id": 37957448, "comment_id": 63364013, "body": "@mmichael, I added the byebug results above"}, {"owner": {"reputation": 3020, "user_id": 4493564, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-ZrR5HKgzmQA/AAAAAAAAAAI/AAAAAAAAA2Y/YxH3F9m512U/photo.jpg?sz=128", "display_name": "Petr Gazarov", "link": "https://stackoverflow.com/users/4493564/petr-gazarov"}, "edited": false, "score": 1, "creation_date": 1466567586, "post_id": 37957448, "comment_id": 63364099, "body": "What is the complete path where you defined the model?"}, {"owner": {"reputation": 198, "user_id": 3966729, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7da8b9392fa083519689ae308e92cd36?s=128&d=identicon&r=PG", "display_name": "Devon Quick", "link": "https://stackoverflow.com/users/3966729/devon-quick"}, "edited": false, "score": 0, "creation_date": 1466568079, "post_id": 37957448, "comment_id": 63364212, "body": "wow, I cant believe I missed that. I forgot to add the model file to git so it did not deploy. I apologize guys and thanks for the help"}], "answers": [{"comments": [{"owner": {"reputation": 198, "user_id": 3966729, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7da8b9392fa083519689ae308e92cd36?s=128&d=identicon&r=PG", "display_name": "Devon Quick", "link": "https://stackoverflow.com/users/3966729/devon-quick"}, "edited": false, "score": 0, "creation_date": 1466566368, "post_id": 37957614, "comment_id": 63363813, "body": "i have ran db:migrate against production multiple times and the table does exist in production"}], "tags": [], "owner": {"reputation": 53, "user_id": 2218187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61de43d7e701bebc412ada861be94277?s=128&d=identicon&r=PG", "display_name": "Roy Bleasdale", "link": "https://stackoverflow.com/users/2218187/roy-bleasdale"}, "is_accepted": false, "score": 0, "last_activity_date": 1466570266, "last_edit_date": 1466570266, "creation_date": 1466562978, "answer_id": 37957614, "question_id": 37957448, "link": "https://stackoverflow.com/questions/37957448/rails-uninitialized-constant-error/37957614#37957614", "title": "Rails uninitialized constant error", "body": "<p>Perhaps <code>EventType</code> table is found in development and not production.</p>\n\n<p>Have you successfully migrated the <code>EventType</code> table to production?</p>\n\n<pre><code>$ bin/rails db:migrate RAILS_ENV=production\n</code></pre>\n"}], "owner": {"reputation": 198, "user_id": 3966729, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7da8b9392fa083519689ae308e92cd36?s=128&d=identicon&r=PG", "display_name": "Devon Quick", "link": "https://stackoverflow.com/users/3966729/devon-quick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1004, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466570266, "creation_date": 1466561646, "last_edit_date": 1466567190, "question_id": 37957448, "link": "https://stackoverflow.com/questions/37957448/rails-uninitialized-constant-error", "title": "Rails uninitialized constant error", "body": "<p>In my development environment, the page loads fine. In production, I get this error:</p>\n\n<blockquote>\n  <p>NameError (uninitialized constant EventTypesController::EventType):\n    app/controllers/event_types_controller.rb:3:in `index'</p>\n</blockquote>\n\n<p>Here is my controller:</p>\n\n<pre><code>class EventTypesController &lt; ApplicationController\n  def index\n    @event_types = EventType.all\n  end\n\n  def update_event_type\n    event_type = EventType.find_by_id(params[:id])\n    if event_type.update(event_type_params)\n      flash[:notice] = 'Event Type Updated'\n      redirect_to :action =&gt; :index\n    end\n  end\n\n  def create_event_type\n    event_type = EventType.new(event_type_params)\n    if event_type.save\n      flash[:notice] = 'Event Type Created'\n      redirect_to :action =&gt; :index\n    end\n  end\n\n  def destroy_event_type\n    event_type = EventType.find_by_id(params[:id])\n    if event_type.destroy\n      flash[:notice] = 'Event Type Deleted'\n      redirect_to :action =&gt; :index\n    end\n  end\n\n  def event_type_params\n    params.require('eventtype').permit('description')\n  end\nend\n</code></pre>\n\n<p>Here is my View:</p>\n\n<pre><code>&lt;h1&gt;Event Types&lt;/h1&gt;\n\n&lt;table&gt;\n  &lt;tr&gt;\n    &lt;th&gt;Event Type Description&lt;/th&gt;\n    &lt;th&gt;&lt;/th&gt;\n  &lt;/tr&gt;\n  &lt;% @event_types.each do |eventtype| %&gt;\n    &lt;% if params[:edit] &amp;&amp; params[:edit] == eventtype.id.to_s %&gt;\n      &lt;tr&gt;\n        &lt;%=form_for :eventtype, :url =&gt; {:action =&gt; 'update_event_type', :id =&gt; eventtype } do |form| -%&gt;\n          &lt;td&gt;&lt;%= form.text_field :description %&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;%= submit_tag(\"Update\") %&gt;\n            &lt;%= link_to 'Cancel', {:action =&gt; :index} %&gt;&lt;/td&gt;\n        &lt;%end%&gt;\n      &lt;/tr&gt;\n      &lt;%else%&gt;\n        &lt;tr&gt;\n          &lt;td&gt;&lt;%= eventtype.description %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%=link_to \"Edit\", {:edit =&gt; eventtype.id} %&gt;\n            &lt;%=link_to \"Delete\", {:action =&gt; 'destroy_event_type', :id =&gt; eventtype.id},:method =&gt; :delete ,data: {confirm:'Are you sure you want to delete this event type?'} %&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n    &lt;%end%&gt;\n  &lt;%end%&gt;\n  &lt;% if !params[:edit] %&gt;\n      &lt;%=form_for :eventtype, :url =&gt; {:action =&gt; 'create_event_type' } do |form| -%&gt;\n        &lt;tr&gt;\n          &lt;td&gt;&lt;%= form.text_field :description %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= submit_tag(\"Add Event Type\") %&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n      &lt;%end%&gt;\n  &lt;%end%&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>Any idea what I am doing wrong?</p>\n\n<p>This is what happens when I type EventType into production console:</p>\n\n<blockquote>\n  <p>irb(main):004:0> EventType\n  NameError: uninitialized constant EventType\n          from (irb):4\n          from /home/deploy/track/shared/bundle/ruby/2.2.0/gems/railties-4.2.6/lib/rails/commands/console.rb:110:in <code>start'\n          from /home/deploy/track/shared/bundle/ruby/2.2.0/gems/railties-4.2.6/lib/rails/commands/console.rb:9:in</code>start'\n          from /home/deploy/track/shared/bundle/ruby/2.2.0/gems/railties-4.2.6/lib/rails/commands/commands_tasks.rb:68:in <code>console'\n          from /home/deploy/track/shared/bundle/ruby/2.2.0/gems/railties-4.2.6/lib/rails/commands/commands_tasks.rb:39:in</code>run_command!'\n          from /home/deploy/track/shared/bundle/ruby/2.2.0/gems/railties-4.2.6/lib/rails/commands.rb:17:in <code>&lt;top (required)&gt;'\n          from bin/rails:4:in</code>require'\n          from bin/rails</p>\n</blockquote>\n\n<p>ByeBug Results:</p>\n\n<blockquote>\n  <p>EventType\n  EventType\n  EventType(id: integer, description: string, created_at: datetime, updated_at: datetime)\n  (byebug) </p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1466560162, "post_id": 37957168, "comment_id": 63362393, "body": "You know how there&#39;s <code>puts</code> there&#39;s also <code>gets</code> I recommend you google &quot;ruby gets&quot; and start there :)"}, {"owner": {"reputation": 655, "user_id": 6237879, "user_type": "registered", "accept_rate": 96, "profile_image": "https://lh4.googleusercontent.com/-UfA0mW9tzP4/AAAAAAAAAAI/AAAAAAAAACw/LNGijM-AF6I/photo.jpg?sz=128", "display_name": "Jorge Cuevas", "link": "https://stackoverflow.com/users/6237879/jorge-cuevas"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1466562240, "post_id": 37957168, "comment_id": 63362915, "body": "The string is not the result of a user input, it is the output of rails running a console program via backticks. I am able to store the output as a string, now I require to find the relevant data inside that huge string."}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1466562459, "post_id": 37957168, "comment_id": 63362953, "body": "Right so what you want is a sub-string function then... have you checked out the string functions? <a href=\"http://ruby-doc.org/core-2.3.0/String.html\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.3.0/String.html</a>"}, {"owner": {"reputation": 655, "user_id": 6237879, "user_type": "registered", "accept_rate": 96, "profile_image": "https://lh4.googleusercontent.com/-UfA0mW9tzP4/AAAAAAAAAAI/AAAAAAAAACw/LNGijM-AF6I/photo.jpg?sz=128", "display_name": "Jorge Cuevas", "link": "https://stackoverflow.com/users/6237879/jorge-cuevas"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1466562732, "post_id": 37957168, "comment_id": 63363017, "body": "@TarynEast this looks promising, allow me to check it in detail."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1466569485, "post_id": 37957168, "comment_id": 63364577, "body": "What is the format for the time? Is it the string representation of a <code>Time</code> object, seconds since the Epoch, seconds since midnight, &quot;Noon&quot; or what? Please clarify by editing your question. Perhaps give a small example, including the desired result."}, {"owner": {"reputation": 655, "user_id": 6237879, "user_type": "registered", "accept_rate": 96, "profile_image": "https://lh4.googleusercontent.com/-UfA0mW9tzP4/AAAAAAAAAAI/AAAAAAAAACw/LNGijM-AF6I/photo.jpg?sz=128", "display_name": "Jorge Cuevas", "link": "https://stackoverflow.com/users/6237879/jorge-cuevas"}, "edited": false, "score": 0, "creation_date": 1466569764, "post_id": 37957168, "comment_id": 63364668, "body": "It is the total duration of the print in seconds might have been useful to clarify it is a 3D Print, anyway the question has been successfully answered."}], "answers": [{"comments": [{"owner": {"reputation": 655, "user_id": 6237879, "user_type": "registered", "accept_rate": 96, "profile_image": "https://lh4.googleusercontent.com/-UfA0mW9tzP4/AAAAAAAAAAI/AAAAAAAAACw/LNGijM-AF6I/photo.jpg?sz=128", "display_name": "Jorge Cuevas", "link": "https://stackoverflow.com/users/6237879/jorge-cuevas"}, "edited": false, "score": 0, "creation_date": 1466566802, "post_id": 37958008, "comment_id": 63363913, "body": "This look like it could solve my problem, how would it be written when the string is this: <code>print time: 4431</code>, the print time is actually in seconds."}, {"owner": {"reputation": 25126, "user_id": 578288, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5b2b185c814bb25f2f95a1152e58f033?s=128&d=identicon&r=PG", "display_name": "Rory O&#39;Kane", "link": "https://stackoverflow.com/users/578288/rory-okane"}, "reply_to_user": {"reputation": 655, "user_id": 6237879, "user_type": "registered", "accept_rate": 96, "profile_image": "https://lh4.googleusercontent.com/-UfA0mW9tzP4/AAAAAAAAAAI/AAAAAAAAACw/LNGijM-AF6I/photo.jpg?sz=128", "display_name": "Jorge Cuevas", "link": "https://stackoverflow.com/users/6237879/jorge-cuevas"}, "edited": false, "score": 0, "creation_date": 1466576969, "post_id": 37958008, "comment_id": 63367565, "body": "@JorgeCuevas The regex I wrote will still work without changes. It just gets whatever is on the same line after \u201cprint time: \u201d, no matter its format. However, you will probably want to add a <code>.to_i</code> call to the result to convert it from a string to a number. Like <code>print_time_in_secs = log.match(\u2026)[1].to_i</code>."}, {"owner": {"reputation": 655, "user_id": 6237879, "user_type": "registered", "accept_rate": 96, "profile_image": "https://lh4.googleusercontent.com/-UfA0mW9tzP4/AAAAAAAAAAI/AAAAAAAAACw/LNGijM-AF6I/photo.jpg?sz=128", "display_name": "Jorge Cuevas", "link": "https://stackoverflow.com/users/6237879/jorge-cuevas"}, "edited": false, "score": 0, "creation_date": 1466577290, "post_id": 37958008, "comment_id": 63367736, "body": "I noticed that it worked so I marked it as answered, and yes, the <code>.to_i</code> method was necessary. Many thanks for your help, you saved me much time with this answer."}], "tags": [], "owner": {"reputation": 25126, "user_id": 578288, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5b2b185c814bb25f2f95a1152e58f033?s=128&d=identicon&r=PG", "display_name": "Rory O&#39;Kane", "link": "https://stackoverflow.com/users/578288/rory-okane"}, "is_accepted": true, "score": 1, "last_activity_date": 1466565910, "creation_date": 1466565910, "answer_id": 37958008, "question_id": 37957168, "link": "https://stackoverflow.com/questions/37957168/how-to-find-and-save-a-string-section-in-ruby-on-rails-4/37958008#37958008", "title": "How to find and save a string section in ruby on rails 4?", "body": "<p>Use <a href=\"http://www.regular-expressions.info/\" rel=\"nofollow\">regular expressions</a>, which in Ruby can be written with the <code>/\u2026/</code> syntax and matched against using <a href=\"http://ruby-doc.org/core/String.html#method-i-match\" rel=\"nofollow\"><code>String#match</code></a>.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>log = \"username: jsmith\\nprint time: 08:02:41\\npower level: 9001\"\nprint_time = log.match(/print time:\\s*([^\\n]+)\\s*\\n/)[1]\np print_time # =&gt; \"08:02:41\"\n</code></pre>\n\n<p>The regex <code>/print time:\\s*([^\\n]+?)\\s*\\n/</code> matches any text after \u201cprint time:\u201d, on the same line, ignoring surrounding whitespace <code>\\s*</code>, and saves it as the first capture group using the <code>()</code>. Then <code>[1]</code> selects the contents of that first capture group.</p>\n\n<p>After extracting the <code>print_time</code> string, you can do whatever you need to with it. For example, if you had a Rails model <code>PrintTime</code>, you might save the extracted time to the database with <code>PrintTime.create(extracted_time: print_time)</code>.</p>\n"}], "owner": {"reputation": 655, "user_id": 6237879, "user_type": "registered", "accept_rate": 96, "profile_image": "https://lh4.googleusercontent.com/-UfA0mW9tzP4/AAAAAAAAAAI/AAAAAAAAACw/LNGijM-AF6I/photo.jpg?sz=128", "display_name": "Jorge Cuevas", "link": "https://stackoverflow.com/users/6237879/jorge-cuevas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 37958008, "answer_count": 1, "score": 0, "last_activity_date": 1466565910, "creation_date": 1466559432, "question_id": 37957168, "link": "https://stackoverflow.com/questions/37957168/how-to-find-and-save-a-string-section-in-ruby-on-rails-4", "title": "How to find and save a string section in ruby on rails 4?", "body": "<p>I need to find a section of a string that includes the substring <code>\"print time:\"</code> and save it with the time it displays after the colon on the database.</p>\n\n<p>What I've used until now is the <code>downcase</code> helper and the <code>includes?</code> helper to start the search but I'm not sure how to actually execute a search inside the string.</p>\n\n<p>How can I find the section of the string so that I can save it afterwards?</p>\n"}, {"tags": ["ruby", "binary"], "answers": [{"comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 1105, "user_id": 1161270, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30d22ba2a60cccbae9cb7e109442e5b2?s=128&d=identicon&r=PG", "display_name": "randy newfield", "link": "https://stackoverflow.com/users/1161270/randy-newfield"}, "edited": false, "score": 0, "creation_date": 1466560714, "post_id": 37957217, "comment_id": 63362518, "body": "Thanks, I just edited it and accidentally broke it in the process. Let me try and fix it."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 1105, "user_id": 1161270, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30d22ba2a60cccbae9cb7e109442e5b2?s=128&d=identicon&r=PG", "display_name": "randy newfield", "link": "https://stackoverflow.com/users/1161270/randy-newfield"}, "edited": false, "score": 0, "creation_date": 1466561012, "post_id": 37957217, "comment_id": 63362588, "body": "@randynewfield should work now. It was just a typo, but a little annoying to debug because errors in <code>inspect</code> methods are silenced."}, {"owner": {"reputation": 1105, "user_id": 1161270, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30d22ba2a60cccbae9cb7e109442e5b2?s=128&d=identicon&r=PG", "display_name": "randy newfield", "link": "https://stackoverflow.com/users/1161270/randy-newfield"}, "edited": false, "score": 0, "creation_date": 1466561306, "post_id": 37957217, "comment_id": 63362653, "body": "Works beautifully, only issue is that if a the forth bit is set, it adds 4 more unset bits. ex: <code>0b1000 =&gt; 0b0000_1000</code> although I guess that is livable. Would your prior method of defining the binary width resolve this rather than trying to dynamically calculate it?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 1105, "user_id": 1161270, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30d22ba2a60cccbae9cb7e109442e5b2?s=128&d=identicon&r=PG", "display_name": "randy newfield", "link": "https://stackoverflow.com/users/1161270/randy-newfield"}, "edited": false, "score": 0, "creation_date": 1466562383, "post_id": 37957217, "comment_id": 63362944, "body": "Ok i updated it to fix that. Theres a special case now when the unpadded length is a multiple of 4"}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 1, "last_activity_date": 1466562156, "last_edit_date": 1466562156, "creation_date": 1466559905, "answer_id": 37957217, "question_id": 37956842, "link": "https://stackoverflow.com/questions/37956842/is-there-a-way-to-force-ruby-to-output-results-in-binary/37957217#37957217", "title": "Is there a way to force ruby to output results in binary", "body": "<p>If you write <code>0b0001.class</code> you will find that it is Fixnum.</p>\n\n<p>Writing <code>puts 0b1000</code> shows <code>8</code>, and it's clear this Fixnum is stored in base 10.</p>\n\n<p>So as far as I'm aware, there isn't any way to prevent the conversion to base 10. </p>\n\n<p>If you want to control the way that Fixnum objects are displayed in IRB, you can implement a custom <code>inspect</code> method for the class:</p>\n\n<pre><code>class Fixnum\n  def inspect\n    unpadded_binary_string = to_s(2)\n    binary_width = if unpadded_binary_string.length % 4 == 0\n      unpadded_binary_string.length\n    else\n      ((unpadded_binary_string.length / 4) * 4) + 4\n    end\n    padded_binary_string = \"%0#{binary_width}d\" % unpadded_binary_string\n    # join groups of 4 with an underscore\n    padded_binary_string = padded_binary_string.scan(/.{4}/).join(\"_\")\n    \"0b\" + padded_binary_string\n  end\nend\n</code></pre>\n\n<p>results:</p>\n\n<pre><code>irb(main):007:0&gt; 0b1000\n=&gt; 0b1000\nirb(main):011:0&gt; 99999999\n=&gt; 0b0101_1111_0101_1110_0000_1111_1111\n</code></pre>\n\n<p>The inspect method uses <code>to_s(2)</code>, which takes an integer and produces a string representation of it's binary. But the zeroes at the front of the binary are lost when it's converted to base 10. That's why the inspect method\nneeds to manually add zeroes to the front of the string. </p>\n\n<p>There's no way I can think of to add the correct number of zeroes to the front of the string in a completely dynamic way.</p>\n\n<p>What I'm doing here is calculating the minimum width (in a multiple of 4) that can contain the unpadded binary string. So if the unpadded length is 5 characters, the final width will be 8. If the unpadded length is 2, the final length is 4. </p>\n\n<p>Instead of calculating it on-the-go, you could alternatively set the <code>binary_width</code> as an external variable that you change at runtime, then reference it from the inspect function.  </p>\n"}], "owner": {"reputation": 1105, "user_id": 1161270, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30d22ba2a60cccbae9cb7e109442e5b2?s=128&d=identicon&r=PG", "display_name": "randy newfield", "link": "https://stackoverflow.com/users/1161270/randy-newfield"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 37957217, "answer_count": 1, "score": 1, "last_activity_date": 1466562156, "creation_date": 1466556554, "last_edit_date": 1466561192, "question_id": 37956842, "link": "https://stackoverflow.com/questions/37956842/is-there-a-way-to-force-ruby-to-output-results-in-binary", "title": "Is there a way to force ruby to output results in binary", "body": "<p>I want to do a demo for some peers, and I want to force IRB to return values in only binary.</p>\n\n<p>For example it currently returns the result in base 10 no matter which base the input is in:</p>\n\n<pre><code>0b1111\n# =&gt; 15 #should return 1111 or 0b1111\n0b0001 | 0b0011\n# =&gt; 3 #should return 0011 or 0b0011\n</code></pre>\n\n<p>Is there a way to force this result? I want to demo bitwise operators and it is much easier for them to understand if they see the bits flowing around rather than base 10 numbers being returned, that I would have to convert to base 2 afterwards.</p>\n\n<p>Also I would like for all results to be in multiples of 4 bits. If possible with underscores or spaces separating the half byte groupings.</p>\n\n<p>For example:</p>\n\n<pre><code>0b0001_0101\n# =&gt; 0b0001_0101 #or 0b0001 0101, or 0001 0101, or 0001_0101\n</code></pre>\n\n<p>If I result does not need to be represented by 4 bits (example 3, 11) pad it to 4, 8, 16 bits in length depending on the number.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1466556058, "post_id": 37956727, "comment_id": 63361540, "body": "have you looked at <code>heroku logs --tail</code> to find the errors for your seed?"}, {"owner": {"reputation": 339, "user_id": 5241955, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a0abbd797508561c53992c650ea2e2f2?s=128&d=identicon&r=PG&f=1", "display_name": "kpaul ", "link": "https://stackoverflow.com/users/5241955/kpaul"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1466556416, "post_id": 37956727, "comment_id": 63361612, "body": "@maxpleaner, I haven&#39;t but I&#39;ll look at it now and post the log file as well."}, {"owner": {"reputation": 339, "user_id": 5241955, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a0abbd797508561c53992c650ea2e2f2?s=128&d=identicon&r=PG&f=1", "display_name": "kpaul ", "link": "https://stackoverflow.com/users/5241955/kpaul"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1466556886, "post_id": 37956727, "comment_id": 63361703, "body": "@maxpleaner, I have posted the live log file from heroku. Not sure what is happening but the post request isn&#39;t going through"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1466557809, "post_id": 37956727, "comment_id": 63361906, "body": "So the logs show no error. How sure are you that the seeds command is &quot;not working&quot;? Have you checked the console to see if any records are there?"}, {"owner": {"reputation": 339, "user_id": 5241955, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a0abbd797508561c53992c650ea2e2f2?s=128&d=identicon&r=PG&f=1", "display_name": "kpaul ", "link": "https://stackoverflow.com/users/5241955/kpaul"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1466557869, "post_id": 37956727, "comment_id": 63361921, "body": "@maxpleaner, the command works in development. I have tried that. I have ran the exact same command in production before and it has worked"}, {"owner": {"reputation": 339, "user_id": 5241955, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a0abbd797508561c53992c650ea2e2f2?s=128&d=identicon&r=PG&f=1", "display_name": "kpaul ", "link": "https://stackoverflow.com/users/5241955/kpaul"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1466557996, "post_id": 37956727, "comment_id": 63361944, "body": "@maxpleaner, I feel like heroku isn&#39;t even making the connection."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1466558147, "post_id": 37956727, "comment_id": 63361967, "body": "are you sure you pushed the latest version to heroku? By the way, looks like some lines in your seeds.rb file should be commented out. Everything before the <code>5.times do</code> block."}, {"owner": {"reputation": 339, "user_id": 5241955, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a0abbd797508561c53992c650ea2e2f2?s=128&d=identicon&r=PG&f=1", "display_name": "kpaul ", "link": "https://stackoverflow.com/users/5241955/kpaul"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1466558411, "post_id": 37956727, "comment_id": 63362024, "body": "@maxpleaner, I have those commented out, only the 5.times block is running. The version of heroku is   heroku-cli/5.2.21-1a1f0bc (linux-amd64) go1.6.2"}, {"owner": {"reputation": 2501, "user_id": 6458966, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iUhao.jpg?s=128&g=1", "display_name": "Harrison Lucas", "link": "https://stackoverflow.com/users/6458966/harrison-lucas"}, "edited": false, "score": 0, "creation_date": 1466558621, "post_id": 37956727, "comment_id": 63362075, "body": "@kpaul have you run your migrations in production?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1466558765, "post_id": 37956727, "comment_id": 63362101, "body": "what i mean by &quot;pushed the latest version to heroku&quot; is doing a <code>git push heroku master</code>"}, {"owner": {"reputation": 339, "user_id": 5241955, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a0abbd797508561c53992c650ea2e2f2?s=128&d=identicon&r=PG&f=1", "display_name": "kpaul ", "link": "https://stackoverflow.com/users/5241955/kpaul"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1466558959, "post_id": 37956727, "comment_id": 63362131, "body": "@maxpleaner, yes I pushed latest changes to heroku. I ran heroku run rake db:migrate, migrations are good to go in production. I am able to sign up users in production just fine."}, {"owner": {"reputation": 48205, "user_id": 2989261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b03110b84c83464a58832d4d55ff4542?s=128&d=identicon&r=PG", "display_name": "Rico", "link": "https://stackoverflow.com/users/2989261/rico"}, "edited": false, "score": 0, "creation_date": 1466567491, "post_id": 37956727, "comment_id": 63364070, "body": "@kpaul so did you fix it ?"}, {"owner": {"reputation": 339, "user_id": 5241955, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a0abbd797508561c53992c650ea2e2f2?s=128&d=identicon&r=PG&f=1", "display_name": "kpaul ", "link": "https://stackoverflow.com/users/5241955/kpaul"}, "reply_to_user": {"reputation": 48205, "user_id": 2989261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b03110b84c83464a58832d4d55ff4542?s=128&d=identicon&r=PG", "display_name": "Rico", "link": "https://stackoverflow.com/users/2989261/rico"}, "edited": false, "score": 0, "creation_date": 1466608595, "post_id": 37956727, "comment_id": 63390478, "body": "@Rico nope the problem still exists"}, {"owner": {"reputation": 5962, "user_id": 115159, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ac02a81e50f368f6d5c7a14b99ce2469?s=128&d=identicon&r=PG", "display_name": "Dharam Gollapudi", "link": "https://stackoverflow.com/users/115159/dharam-gollapudi"}, "edited": false, "score": 0, "creation_date": 1466818273, "post_id": 37956727, "comment_id": 63489330, "body": "<code>seeds.rb</code> should be in the repository in order for <code>rails</code> to seed it. If there is no <code>seeds.rb</code>, <code>rails</code> doesn&#39;t complain that the file is missing, instead it completes the <code>rake db:seed</code> task with out any error. So make sure you remove the <code>seeds.rb</code> from the <code>.gitignore</code> and push it to the repository."}, {"owner": {"reputation": 339, "user_id": 5241955, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a0abbd797508561c53992c650ea2e2f2?s=128&d=identicon&r=PG&f=1", "display_name": "kpaul ", "link": "https://stackoverflow.com/users/5241955/kpaul"}, "reply_to_user": {"reputation": 5962, "user_id": 115159, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ac02a81e50f368f6d5c7a14b99ce2469?s=128&d=identicon&r=PG", "display_name": "Dharam Gollapudi", "link": "https://stackoverflow.com/users/115159/dharam-gollapudi"}, "edited": false, "score": 0, "creation_date": 1466818491, "post_id": 37956727, "comment_id": 63489366, "body": "@Dharam, I have taken the file out of gitignore, however, any changes I make to the seeds file are still not tracked. Is there an extra step I have to do."}, {"owner": {"reputation": 5962, "user_id": 115159, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ac02a81e50f368f6d5c7a14b99ce2469?s=128&d=identicon&r=PG", "display_name": "Dharam Gollapudi", "link": "https://stackoverflow.com/users/115159/dharam-gollapudi"}, "edited": false, "score": 0, "creation_date": 1466820006, "post_id": 37956727, "comment_id": 63489560, "body": "Try <code>git add --force db&#47;seeds.rb</code>"}, {"owner": {"reputation": 339, "user_id": 5241955, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a0abbd797508561c53992c650ea2e2f2?s=128&d=identicon&r=PG&f=1", "display_name": "kpaul ", "link": "https://stackoverflow.com/users/5241955/kpaul"}, "reply_to_user": {"reputation": 5962, "user_id": 115159, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ac02a81e50f368f6d5c7a14b99ce2469?s=128&d=identicon&r=PG", "display_name": "Dharam Gollapudi", "link": "https://stackoverflow.com/users/115159/dharam-gollapudi"}, "edited": false, "score": 0, "creation_date": 1466820356, "post_id": 37956727, "comment_id": 63489611, "body": "@Dharam, Thanks man. It worked. You can put your comment in an answer and i&#39;ll accept it as soon it allows me to do it. I can&#39;t believe such a small thing caused such as big confusion"}], "answers": [{"tags": [], "owner": {"reputation": 5962, "user_id": 115159, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ac02a81e50f368f6d5c7a14b99ce2469?s=128&d=identicon&r=PG", "display_name": "Dharam Gollapudi", "link": "https://stackoverflow.com/users/115159/dharam-gollapudi"}, "is_accepted": true, "score": 1, "last_activity_date": 1466820867, "creation_date": 1466820867, "answer_id": 38024325, "question_id": 37956727, "link": "https://stackoverflow.com/questions/37956727/cannot-seed-data-in-production-using-heroku/38024325#38024325", "title": "Cannot seed data in production using heroku", "body": "<p><code>seeds.rb</code> should be in the repository in order for <code>rails</code> to seed it. If there is no <code>seeds.rb</code>, <code>rails</code> doesn't complain that the file is missing, instead it just completes the <code>rake db:seed</code> task with out any error. </p>\n\n<p>So make sure you remove the <code>seeds.rb</code> from the <code>.gitignore</code>, add it to the <code>git</code> with <code>git add --force db/seeds.rb</code> and <code>git push</code> it to the repository.</p>\n"}], "owner": {"reputation": 339, "user_id": 5241955, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a0abbd797508561c53992c650ea2e2f2?s=128&d=identicon&r=PG&f=1", "display_name": "kpaul ", "link": "https://stackoverflow.com/users/5241955/kpaul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2115, "favorite_count": 1, "accepted_answer_id": 38024325, "answer_count": 1, "score": 3, "last_activity_date": 1466820867, "creation_date": 1466555443, "last_edit_date": 1466816848, "question_id": 37956727, "link": "https://stackoverflow.com/questions/37956727/cannot-seed-data-in-production-using-heroku", "title": "Cannot seed data in production using heroku", "body": "<p>I had posted this question before but I haven't got any answers that solved my problem. Therefore, I am reposting this question.</p>\n\n<p>I am using heroku to deploy my rails app. I am trying to seed some data in the production by running the command <code>heroku run rake db:seed.</code> However, the command is not working. I am not able to seed files in production. The <code>seeds.rb</code> file is given below.</p>\n\n<pre><code>#This file should contain all the record creation needed to seed the database with its default values.\n#The data can then be loaded with the rake db:seed (or created alongside the db with db:setup).\n\n#Examples:\n\n  #cities = City.create([{ name: 'Chicago' }, { name: 'Copenhagen' }])\n  #Mayor.create(name: 'Emanuel', city: cities.first)\n\n#end\n\n\n    5.times do              \n    Scoreboard.create!(name_of_scoreboard: \"scoreboard_abc\",\n                      name_of_organization: \"abcdef\",\n                      name_of_activity: \"ghijklmn\",\n                      user_id: 1,\n                      states: \"state\",\n                      country: \"state\",\n                      cities: \"state\")\n    end\n</code></pre>\n\n<p>$ heroku run rake db:seed\n    Running rake db:seed on \u2b22 app... up, run.4751\n      ActiveRecord::SchemaMigration Load (2.0ms)  SELECT \"schema_migrations\".* FROM \"schema_migrations\"</p>\n\n<p>I run <code>heroku restart</code> but the objects aren't seeded in the production database. I have tried seeding this file in development and it works perfectly. I am not sure what's wrong. </p>\n\n<p>The heroku logs -t file is given below.</p>\n\n<pre><code>2016-06-22T00:50:58.882699+00:00 heroku[api]: Starting process with command `bundle exec rake db:seed` by *******@gmail.com\n2016-06-22T00:51:07.986301+00:00 heroku[run.1041]: Awaiting client\n2016-06-22T00:51:08.026539+00:00 heroku[run.1041]: Starting process with command `bundle exec rake db:seed`\n2016-06-22T00:51:08.157630+00:00 heroku[run.1041]: State changed from starting to up\n2016-06-22T00:51:12.891248+00:00 heroku[run.1041]: State changed from up to complete\n2016-06-22T00:51:12.881329+00:00 heroku[run.1041]: Process exited with status 0\n</code></pre>\n\n<p>I have the database.yml file and seeds.rb files as part of gitignore. I am not sure if that might be the cause of the problem. I am pretty sure its not. </p>\n"}, {"tags": ["ruby", "phantomjs", "sinatra"], "answers": [{"comments": [{"owner": {"reputation": 10797, "user_id": 1078829, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/d352293c8c828fa7bbbb54a98ca47edf?s=128&d=identicon&r=PG", "display_name": "Dev01", "link": "https://stackoverflow.com/users/1078829/dev01"}, "edited": false, "score": 0, "creation_date": 1466605136, "post_id": 37958655, "comment_id": 63387675, "body": "Thanks for the answer Max.  With the console.log, I&#39;m trying to print the text content of a website to the browser.  In other words, when someone visits <a href=\"http://myurl.com/?url=google.com\" rel=\"nofollow noreferrer\">myurl.com/?url=google.com</a> I want to see all the text that is on that site."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 0, "last_activity_date": 1466570174, "last_edit_date": 1495540727, "creation_date": 1466570174, "answer_id": 37958655, "question_id": 37956570, "link": "https://stackoverflow.com/questions/37956570/how-to-setup-phantomjs-to-output-a-urls-text/37958655#37958655", "title": "How to setup PhantomJS to output a url&#39;s text", "body": "<p>To use <code>console.log</code> you need to write a special listener - see <a href=\"http://phantomjs.org/api/webpage/handler/on-console-message.html\" rel=\"nofollow noreferrer\">onConsoleMessage</a>. There's something similar in order to see errors, by the way. </p>\n\n<p>There's an example given from those docs:</p>\n\n<pre><code>var webPage = require('webpage');\nvar page = webPage.create();\n\npage.onConsoleMessage = function(msg, lineNum, sourceId) {\n  console.log('CONSOLE: ' + msg + ' (from line #' + lineNum + ' in \"' + sourceId + '\")');\n};\n</code></pre>\n\n<p>To pass arguments to the phantom script, I searched for existing StackOverflow questions and found <a href=\"https://stackoverflow.com/questions/16814997/phantomjs-pass-argument-to-the-js-file\">phantomJS - Pass Argument to the JS File</a>. It appears that the way to do so is to use command line arguments. See the <a href=\"http://phantomjs.org/api/system/property/args.html\" rel=\"nofollow noreferrer\">phantom docs on <code>args</code></a> for more detail. </p>\n\n<p>It seems like your <code>system</code> call is ok, but in the phantom script you'll need to use <code>args</code> to read the passed arguments. </p>\n"}], "owner": {"reputation": 10797, "user_id": 1078829, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/d352293c8c828fa7bbbb54a98ca47edf?s=128&d=identicon&r=PG", "display_name": "Dev01", "link": "https://stackoverflow.com/users/1078829/dev01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 277, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1466570174, "creation_date": 1466554247, "question_id": 37956570, "link": "https://stackoverflow.com/questions/37956570/how-to-setup-phantomjs-to-output-a-urls-text", "title": "How to setup PhantomJS to output a url&#39;s text", "body": "<p>I followed <a href=\"https://blog.openshift.com/screen-scraper-as-a-service/\" rel=\"nofollow\">this tutorial</a> and have images of websites being created.  What I want is it to output text of a website not an image.</p>\n\n<p>The <code>config.ru</code> file looks like this:</p>\n\n<pre><code>require 'sinatra/base'\nrequire 'digest/md5'\n\nclass App &lt; Sinatra::Base\n\n  get '/' do\n    return \"to specifiy the rendered URL use \\\"?url=&amp;lt;some url&amp;gt;\\\"\" unless params[:url]\n    digest = Digest::MD5.hexdigest(params[:url])\n    system(File.expand_path(\"~/app-root/data/phantomjs/bin/phantomjs\"), File.expand_path(\"~/app-root/data/phantomjs/examples/rasterize.js\"), params[:url], \"public/#{digest}.png\")\n    digest\n  end\n\nend\n\nrun App\n</code></pre>\n\n<p>I found an example for outputting the content, here's the code, <code>content.js</code>:</p>\n\n<pre><code>var webPage = require('webpage');\nvar page = webPage.create();\npage.open('http://google.com', function () {\n    console.log(page.content);\n    phantom.exit();\n});\n</code></pre>\n\n<p>So there are two questions:</p>\n\n<ol>\n<li>How do I print out the <code>page.content</code>?</li>\n<li>How do I pass the <code>url</code> query string parameter to <code>content.js</code> file?</li>\n</ol>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1466556625, "post_id": 37956356, "comment_id": 63361658, "body": "<a href=\"http://ruby-doc.org/stdlib-2.3.1/libdoc/open3/rdoc/Open3.html\" rel=\"nofollow noreferrer\"><code>Open3</code></a> is your friend."}], "answers": [{"comments": [{"owner": {"reputation": 655, "user_id": 6237879, "user_type": "registered", "accept_rate": 96, "profile_image": "https://lh4.googleusercontent.com/-UfA0mW9tzP4/AAAAAAAAAAI/AAAAAAAAACw/LNGijM-AF6I/photo.jpg?sz=128", "display_name": "Jorge Cuevas", "link": "https://stackoverflow.com/users/6237879/jorge-cuevas"}, "edited": false, "score": 0, "creation_date": 1466562931, "post_id": 37956573, "comment_id": 63363049, "body": "This allowed me to save all the console log on a variable and now I can use a string function to find the relevant data, thank you."}], "tags": [], "owner": {"reputation": 5118, "user_id": 3893710, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/YaxSL.jpg?s=128&g=1", "display_name": "oreoluwa", "link": "https://stackoverflow.com/users/3893710/oreoluwa"}, "is_accepted": true, "score": 1, "last_activity_date": 1466554279, "creation_date": 1466554279, "answer_id": 37956573, "question_id": 37956356, "link": "https://stackoverflow.com/questions/37956356/how-to-store-values-that-result-from-executing-an-app-using-system-on-ruby/37956573#37956573", "title": "How to store values that result from executing an app using system(&quot; &quot;) on ruby on rails 4?", "body": "<p>I don't think the <code>system</code> method is the best method to use here, as I think this would either return <code>true</code> or <code>false</code>. However to get back the value, you should try to use the <code>backticks</code></p>\n\n<pre><code>statistics = `method to call on computer`\n</code></pre>\n\n<p>let me know if that works</p>\n"}], "owner": {"reputation": 655, "user_id": 6237879, "user_type": "registered", "accept_rate": 96, "profile_image": "https://lh4.googleusercontent.com/-UfA0mW9tzP4/AAAAAAAAAAI/AAAAAAAAACw/LNGijM-AF6I/photo.jpg?sz=128", "display_name": "Jorge Cuevas", "link": "https://stackoverflow.com/users/6237879/jorge-cuevas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17, "favorite_count": 0, "accepted_answer_id": 37956573, "answer_count": 1, "score": 0, "last_activity_date": 1466554279, "creation_date": 1466552910, "question_id": 37956356, "link": "https://stackoverflow.com/questions/37956356/how-to-store-values-that-result-from-executing-an-app-using-system-on-ruby", "title": "How to store values that result from executing an app using system(&quot; &quot;) on ruby on rails 4?", "body": "<p>I'm using <code>system(\" \")</code> on the rails console to execute an application that takes inside a file, processes it and outputs another file.</p>\n\n<p>The application also logs statistics for said file on the terminal before closing.</p>\n\n<p>My objective is to save those logged statistics as variables inside rails, although I'm not exactly sure how I can do that.</p>\n\n<p>How can I save the logged statistics inside rails variables?</p>\n"}, {"tags": ["ruby", "chef-infra"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6496565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5750665a1141b4119dd2f0625382d462?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Cox", "link": "https://stackoverflow.com/users/6496565/christopher-cox"}, "edited": false, "score": 0, "creation_date": 1466618028, "post_id": 37956490, "comment_id": 63396475, "body": "Thanks for your quick reply. :) That works. However, it only works if I add: &lt;% node[:environment][:extrahosts].each do |item| %&gt;  It seems like my line in the recipe of : extra_hosts = node[:environment][:extrahosts] ... isn&#39;t working to take the contents of the attributes and put them in as an array?  My templates portion reads: template &#39;/blahblah&#39; do   source &#39;blahblah.erb&#39;   variables( :extra_hosts =&gt; extra_hosts ) end"}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 1, "user_id": 6496565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5750665a1141b4119dd2f0625382d462?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Cox", "link": "https://stackoverflow.com/users/6496565/christopher-cox"}, "edited": false, "score": 0, "creation_date": 1466621543, "post_id": 37956490, "comment_id": 63398436, "body": "What you have is correct overall (though double check for typos) but if you are setting the node attribute via some converge-time trickery it might cause issues."}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 1, "user_id": 6496565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5750665a1141b4119dd2f0625382d462?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Cox", "link": "https://stackoverflow.com/users/6496565/christopher-cox"}, "edited": false, "score": 0, "creation_date": 1466621566, "post_id": 37956490, "comment_id": 63398452, "body": "You can log the value of <code>extra_hosts</code> in your recipe code via a log resource."}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 1, "last_activity_date": 1466553728, "creation_date": 1466553728, "answer_id": 37956490, "question_id": 37956294, "link": "https://stackoverflow.com/questions/37956294/i-am-trying-to-use-attributes-in-a-chef-template/37956490#37956490", "title": "I am trying to use attributes in a chef template", "body": "<p>The way you write a loop in Ruby is to use the <code>each</code> method and a block.</p>\n\n<pre><code>&lt;% @extra_hosts.each do |item| %&gt;\n  - &lt;%= item %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Also note that the loop variable doesn't have the at sign because it isn't an instance variable.</p>\n"}], "owner": {"reputation": 1, "user_id": 6496565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5750665a1141b4119dd2f0625382d462?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Cox", "link": "https://stackoverflow.com/users/6496565/christopher-cox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2095, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466553728, "creation_date": 1466552429, "last_edit_date": 1466553604, "question_id": 37956294, "link": "https://stackoverflow.com/questions/37956294/i-am-trying-to-use-attributes-in-a-chef-template", "title": "I am trying to use attributes in a chef template", "body": "<p>I am having trouble trying to get information from a default attributes file into a template using Chef. Currently, I have this:</p>\n\n<pre><code># attributes/default.rb\ndefault['environment']['extrahosts'] = [ 'hostname1:address1', 'hostname2:address2' ]\n\n#recipes/default.rb\nextra_hosts = node[:environment][:extrahosts]\n\n...\n...\ntemplate '/blahblah' do\n  source 'blahblah.erb'\n  variables( :extra_hosts =&gt; extra_hosts )\nend\n\n#templates/blahblah.erb\n&lt;% for @item in @extra_hosts %&gt;\n  - &lt;%= @item %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Although this doesn't work. What do I add to my template to yield:</p>\n\n<pre><code>  - hostname1:address1\n  - hostname2:address2\n</code></pre>\n"}, {"tags": ["html", "css", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 6352541, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b6995294cd046a303219a834480fdc12?s=128&d=identicon&r=PG&f=1", "display_name": "jean Zaniloi", "link": "https://stackoverflow.com/users/6352541/jean-zaniloi"}, "edited": false, "score": 0, "creation_date": 1466550453, "post_id": 37955768, "comment_id": 63360176, "body": "Thanks for the documentation about the column and bootstrap, it is realy much clear to understand it"}], "tags": [], "owner": {"reputation": 3377, "user_id": 3438405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bacfe7cf1712f9858bebaf738438718?s=128&d=identicon&r=PG&f=1", "display_name": "The F", "link": "https://stackoverflow.com/users/3438405/the-f"}, "is_accepted": false, "score": 1, "last_activity_date": 1466549599, "last_edit_date": 1466549599, "creation_date": 1466548936, "answer_id": 37955768, "question_id": 37955737, "link": "https://stackoverflow.com/questions/37955737/how-to-display-inline-with-rails/37955768#37955768", "title": "How to display inline with rails?", "body": "<p>As you are using bootstrap, use columns:</p>\n\n<pre><code>&lt;div class=\"transitions-enabled\" id=\"post\"&gt;\n    &lt;div class=\"row\"&gt;    \n        &lt;%- @posts.each do |post|%&gt;   \n            &lt;div class=\"col-md-4 post\"&gt;  \n                &lt;!-- post content --&gt;   \n            &lt;/div&gt;\n        &lt;% end %&gt;\n    &lt;/div&gt;     \n&lt;/div&gt;\n</code></pre>\n\n<p>You'll find the different column types <a href=\"https://getbootstrap.com/examples/grid/\" rel=\"nofollow\">here</a>.</p>\n\n<p>giving your post a <code>.col-md-4</code> class will make them appear aligned by three:</p>\n\n<p>4-4-4<br/>\n4-4-4</p>\n\n<p>summing each row to 12.</p>\n\n<p>You should also remove the <code>float</code> styling in your css and move the <code>.row</code> outside of your iteration, as bootstrap takes care of that for you.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 2777067, "user_type": "registered", "profile_image": "https://graph.facebook.com/767907781/picture?type=large", "display_name": "Jeroen Stoker", "link": "https://stackoverflow.com/users/2777067/jeroen-stoker"}, "is_accepted": false, "score": 0, "last_activity_date": 1466549252, "creation_date": 1466549252, "answer_id": 37955830, "question_id": 37955737, "link": "https://stackoverflow.com/questions/37955737/how-to-display-inline-with-rails/37955830#37955830", "title": "How to display inline with rails?", "body": "<p>You should try adding it to <strong>panel-body</strong>.</p>\n\n<p>Also have a look (not now, but in the future when you are using more then 3 blocks) at <a href=\"http://masonry.desandro.com/\" rel=\"nofollow\">http://masonry.desandro.com/</a> for continuous tiled divs.</p>\n"}, {"tags": [], "owner": {"reputation": 10264, "user_id": 188145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239a70da80d3959611470d87ca8f0755?s=128&d=identicon&r=PG", "display_name": "James Chen", "link": "https://stackoverflow.com/users/188145/james-chen"}, "is_accepted": true, "score": 2, "last_activity_date": 1466557232, "last_edit_date": 1466557232, "creation_date": 1466549515, "answer_id": 37955863, "question_id": 37955737, "link": "https://stackoverflow.com/questions/37955737/how-to-display-inline-with-rails/37955863#37955863", "title": "How to display inline with rails?", "body": "<p>Besides CSS style, the problem you have is you've added a <code>row</code> class surrounding every post.</p>\n\n<p>Say you want to display three posts in each row, do it like this:</p>\n\n<pre><code>&lt;%- @posts.each_slice(3) do |posts| %&gt;\n  &lt;div class=\"row\"&gt;\n    &lt;%- posts.each do |post|\n      ...\n    &lt;% end %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>Update</strong>: just realized original code example was not showing although this has been marked as answer. Updated to show the example.</p>\n\n<p>Or just move <code>.row</code> div outside our <code>each</code> block, which puts all posts inside a single <code>.row</code>.</p>\n"}], "owner": {"reputation": 113, "user_id": 6352541, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b6995294cd046a303219a834480fdc12?s=128&d=identicon&r=PG&f=1", "display_name": "jean Zaniloi", "link": "https://stackoverflow.com/users/6352541/jean-zaniloi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 547, "favorite_count": 0, "accepted_answer_id": 37955863, "answer_count": 3, "score": 2, "last_activity_date": 1466557232, "creation_date": 1466548763, "question_id": 37955737, "link": "https://stackoverflow.com/questions/37955737/how-to-display-inline-with-rails", "title": "How to display inline with rails?", "body": "<p>I would like to know how I can display my Post \"inline\"\nI'm begining on css, and I don't know where do I have to put the code display:inline on my css sheet. I'd try post, main_content, body, but it's not working. Can you explain me how to doo it, I follow a lot of tuto and the result it's never the same for me, so I don't understand how to do it .</p>\n\n<p>my actual post display :\n<a href=\"https://i.stack.imgur.com/n5QJB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/n5QJB.png\" alt=\"Actual display\"></a></p>\n\n<p>My code :\nIndex post view :</p>\n\n<pre><code>&lt;div class=\"transitions-enabled\" id=\"post\"&gt;\n\n&lt;%- @posts.each do |post|%&gt;\n\n  &lt;div class=\"row\"&gt;\n\n      &lt;div class=\"post\"&gt;\n\n\n        &lt;div class=\"panel-body\"&gt;\n          &lt;div class=\"form-group text-center\"&gt;\n            &lt;h3&gt; &lt;%=post.title%&gt;&lt;/h3&gt;\n          &lt;/div&gt;\n        &lt;/div&gt; \n\n        &lt;div class=\"box panel panel-default\"&gt;\n          &lt;div class=\"image_wrapper\"&gt;\n             &lt;%= link_to (image_tag post.image.url(:medium), class: 'img-responsive'), post_path(post)%&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"panel-body\"&gt;\n          &lt;div class=\"form-group text-center\"&gt;\n            &lt;p&gt;&lt;%= post.prix %&gt;&lt;/p&gt;\n          &lt;/div&gt; \n        &lt;/div&gt; \n\n\n    &lt;/div&gt;\n  &lt;/div&gt; \n\n&lt;%end%&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>&amp; my application css :</p>\n\n<pre><code>@import \"bootstrap-sprockets\";\n@import \"bootstrap\";\n\n@mixin box-shadow {\n  -webkit-box-shadow: rgba(0, 0, 0, 0.09) 0 2px 0;\n  -moz-box-shadow: rgba(0, 0, 0, 0.09) 0 2px 0;\n  box-shadow: rgba(0, 0, 0, 0.09) 0 2px 0;\n}\n\n$red: #DB6161;\n\nbody {\n  background: rgb(235, 238, 243);\n}\n\n.main_content {\n  padding: 0 0 50px 0;\n\n}\n\n.alert {\n  padding: 15px;\n  margin-bottom: 20px;\n  border: 1px solid transparent;\n  border-radius: 5px;\n  @include box-shadow;\n  background: white;\n  font-weight: bold;\n}\n\n\n.navbar {\n  margin-bottom: 50px;\n  @include box-shadow;\n  border: none;\n  .navbar-brand {\n    text-transform: uppercase;\n    letter-spacing: -1px;\n    font-weight: bold;\n    font-size: 25px;\n    a {\n      color: $red;\n    }\n  }\n}\n\n.post {\n  background: white;\n  border-radius: 5px;\n  margin-bottom: 40px;\n  @include box-shadow;\n  float: left;\n\n\n  .image_wrapper {\n    width: 400px;\n    height: 300px;\n    border-radius: 5px 5px 5px 5px;\n    overflow: hidden;\n  }\n  img {\n    width: 100%;\n    -webkit-transition: all .3s ease-out;\n    -moz-transition: all .3s ease-out;\n    -o-transition: all .3s ease-out;\n    transition: all .3s ease-out;\n    &amp;:hover {\n      transform: scale(1.075);\n    }\n  .panel-body {\n    padding: 35px;\n    h1 {\n      margin: 0 0 10px 0;\n    }\n    .description {\n      color: #868686;\n      line-height: 1.75;\n      margin: 0;\n    }\n  }\n  }\n  h2 {\n    padding: 15px 5%;\n    margin: 0;\n    font-size: 20px;\n    font-weight: normal;\n    line-height: 1.5;\n    a {\n      color: $red;\n    }\n  }\n}\n\n#post_top {\n  margin-bottom: 50px;\n}\n\n#post_info, #ingredients, #directions {\n  background: white;\n  @include box-shadow;\n  min-height: 360px;\n  border-radius: 5px;\n  padding: 2em 8%;\n}\n\n.post_image {\n  max-width: 100%;\n  border-radius: 5px;\n  @include box-shadow;\n}\n\n#post_info {\n  h1 {\n    font-size: 36px;\n    font-weight: normal;\n    color: $red;\n  }\n  .description {\n    color: #8A8A8A;\n    font-size: 20px;\n  }\n}\n\n#ingredients, #directions {\n  margin-bottom: 50px;\n  ul, ol {\n    padding-left: 18px;\n    li {\n      padding: 1em 0;\n      border-bottom: 1px solid #EAEAEA;\n    }\n  }\n}\n\n.form-inline {\n  margin-top: 15px;\n}\n.form-input {\n  width: 65% !important;\n  float: left;\n}\n.form-button {\n  float: left;\n  width: 30% !important;\n  margin-left: 5%;\n}\n.add-button {\n  margin-top: 25px;\n}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 143, "user_id": 2071419, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bfd00886bcee6dba349dcc1613120892?s=128&d=identicon&r=PG", "display_name": "Hanno Opperman", "link": "https://stackoverflow.com/users/2071419/hanno-opperman"}, "reply_to_user": {"reputation": 5118, "user_id": 3893710, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/YaxSL.jpg?s=128&g=1", "display_name": "oreoluwa", "link": "https://stackoverflow.com/users/3893710/oreoluwa"}, "edited": false, "score": 0, "creation_date": 1466580357, "post_id": 37955732, "comment_id": 63369651, "body": "there is no error, as far as I can tell that line of code runs successfully."}], "answers": [{"tags": [], "owner": {"reputation": 5118, "user_id": 3893710, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/YaxSL.jpg?s=128&g=1", "display_name": "oreoluwa", "link": "https://stackoverflow.com/users/3893710/oreoluwa"}, "is_accepted": false, "score": 0, "last_activity_date": 1466581908, "creation_date": 1466581908, "answer_id": 37961791, "question_id": 37955732, "link": "https://stackoverflow.com/questions/37955732/honeybadger-notify-not-sending-a-notification-from-controller/37961791#37961791", "title": "Honeybadger.notify() not sending a notification from controller", "body": "<p>Could you try the following:</p>\n\n<pre><code>class ApplicationController\n  rescue_from MyError, with: :my_method\n\n  def error_trigger\n    raise MyError.new\n  end\n\n private\n  def my_method(exception)\n    HoneyBadger.notify(exception, force: true)\n    render_formatted_error 500, Errors::MyError.new(exception)\n  end\nend\n</code></pre>\n\n<p>In your routes</p>\n\n<pre><code>get :error_trigger, to: 'application#error_trigger'\n</code></pre>\n\n<p>With these in place, visit: <a href=\"http://localhost:3000/error_trigger\" rel=\"nofollow\">http://localhost:3000/error_trigger</a> and check the dashboard again</p>\n"}, {"tags": [], "owner": {"reputation": 143, "user_id": 2071419, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bfd00886bcee6dba349dcc1613120892?s=128&d=identicon&r=PG", "display_name": "Hanno Opperman", "link": "https://stackoverflow.com/users/2071419/hanno-opperman"}, "is_accepted": false, "score": 0, "last_activity_date": 1466585546, "creation_date": 1466585546, "answer_id": 37963053, "question_id": 37955732, "link": "https://stackoverflow.com/questions/37955732/honeybadger-notify-not-sending-a-notification-from-controller/37963053#37963053", "title": "Honeybadger.notify() not sending a notification from controller", "body": "<p>It was due to an issue that occurred during the deployment process to our server. </p>\n"}], "owner": {"reputation": 143, "user_id": 2071419, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bfd00886bcee6dba349dcc1613120892?s=128&d=identicon&r=PG", "display_name": "Hanno Opperman", "link": "https://stackoverflow.com/users/2071419/hanno-opperman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 438, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1466585546, "creation_date": 1466548734, "last_edit_date": 1466581386, "question_id": 37955732, "link": "https://stackoverflow.com/questions/37955732/honeybadger-notify-not-sending-a-notification-from-controller", "title": "Honeybadger.notify() not sending a notification from controller", "body": "<p>Environment: Rails 5 rc1, ruby 2.3</p>\n\n<p>Gem version: Honeybadger 2.6</p>\n\n<p>Problem: </p>\n\n<p>When triggering a honeybadger notification from console (on a production-esq environment) using <code>Honeybadger.notify({})</code> the notification is successfully sent and can be viewed on the honeybadger dashboard.</p>\n\n<p>But in my ApplicationController where Honeybadger is being implemented, nothing happens.</p>\n\n<p>Implementation:</p>\n\n<p><code>rescue_from MyError, with: my_method</code> in my <code>ApplicationController</code> </p>\n\n<p>in the <code>my_method</code> I have the following lines of code:</p>\n\n<p><code>Honeybadger.notify(ex, force: true)\nrender_formatted_error 500, Errors::MyError.new(ex)\n</code></p>\n\n<p>I know it's hitting the last line of the method, because I can see the output from the formatted error.</p>\n\n<p>I'm guessing it's because I have it in a <code>rescue_from</code> ? The Honeybadger docs state that you can still use the manual Honeybadger.notify method.</p>\n\n<p>The <code>force: true</code> was one of the solutions I tried.</p>\n"}, {"tags": ["ruby", "regex", "conditional"], "comments": [{"owner": {"reputation": 6182, "user_id": 10638, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/36498a2ecff4b366792d7f97ab923cdc?s=128&d=identicon&r=PG", "display_name": "DJ.", "link": "https://stackoverflow.com/users/10638/dj"}, "edited": false, "score": 0, "creation_date": 1466547630, "post_id": 37955495, "comment_id": 63359308, "body": "What do you mean by rubify? That seems to be in Ruby already :-P"}, {"owner": {"reputation": 161, "user_id": 4988127, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-CtjCNKRLnFs/AAAAAAAAAAI/AAAAAAAAAI4/sTP_9BMMVsU/photo.jpg?sz=128", "display_name": "Dirk Bruins", "link": "https://stackoverflow.com/users/4988127/dirk-bruins"}, "reply_to_user": {"reputation": 6182, "user_id": 10638, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/36498a2ecff4b366792d7f97ab923cdc?s=128&d=identicon&r=PG", "display_name": "DJ.", "link": "https://stackoverflow.com/users/10638/dj"}, "edited": false, "score": 0, "creation_date": 1466549240, "post_id": 37955495, "comment_id": 63359799, "body": "@DJ. I updated the question to clear it up ... with hope."}, {"owner": {"reputation": 28990, "user_id": 1114966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af8712b05e5cfb862323a07c83749054?s=128&d=identicon&r=PG", "display_name": "squiguy", "link": "https://stackoverflow.com/users/1114966/squiguy"}, "edited": false, "score": 0, "creation_date": 1466549846, "post_id": 37955495, "comment_id": 63359980, "body": "Something like this:  <code>irb(main):005:0&gt; inn = string.chars.select { |c| letters.chars.include?(c) } =&gt; [&quot;a&quot;] </code>?"}, {"owner": {"reputation": 12341, "user_id": 3678068, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QWjMd.png?s=128&g=1", "display_name": "Fabricator", "link": "https://stackoverflow.com/users/3678068/fabricator"}, "edited": false, "score": 0, "creation_date": 1466550161, "post_id": 37955495, "comment_id": 63360084, "body": "<code>inn = string.scan(&#47;[#{letters}]&#47;).join</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1466553952, "post_id": 37955495, "comment_id": 63361060, "body": "We applaud your enthusiasm for Ruby, but it does not belong in your SO questions. Here, for example, your second and third paragraphs are irrelevant and therefore should be removed."}], "answers": [{"tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": false, "score": 1, "last_activity_date": 1466550055, "creation_date": 1466550055, "answer_id": 37955944, "question_id": 37955495, "link": "https://stackoverflow.com/questions/37955495/simplify-ruby-conditional-involving-regex-and-two-vars/37955944#37955944", "title": "Simplify Ruby conditional involving regex and two vars?", "body": "<pre><code>string = 'abcd'\nletters = 'az'\ninn, out = letters.chars.partition{|char| string.include?(char)}.map!(&amp;:join)\n</code></pre>\n"}], "owner": {"reputation": 161, "user_id": 4988127, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-CtjCNKRLnFs/AAAAAAAAAAI/AAAAAAAAAI4/sTP_9BMMVsU/photo.jpg?sz=128", "display_name": "Dirk Bruins", "link": "https://stackoverflow.com/users/4988127/dirk-bruins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466550055, "creation_date": 1466547407, "last_edit_date": 1466549189, "question_id": 37955495, "link": "https://stackoverflow.com/questions/37955495/simplify-ruby-conditional-involving-regex-and-two-vars", "title": "Simplify Ruby conditional involving regex and two vars?", "body": "<p>The goal is to Rubify (ie. use some Ruby magic) the so commented code.</p>\n\n<p>I'm learning Ruby and it seems every time I write a bit of code, Ruby has some magic that can simplify and make it more readable.</p>\n\n<p>For example (and unrelated to the code below), instead of writing a loop to iterate over an array of integers to get the sum, in Ruby, <code>sum = array.inject(:+)</code> works magic.</p>\n\n<pre><code>string = 'abcd'\ninn = ''\nout = ''\nletters = 'az'\n\n# Rubify below, por favor\nletters.split('').each do |l|\n  if string[/#{l}/i]\n    inn &lt;&lt; l\n  else\n    out &lt;&lt; l\n  end\nend\n</code></pre>\n\n<p>Ideas?</p>\n"}, {"tags": ["ruby", "rubocop"], "answers": [{"tags": [], "owner": {"reputation": 5730, "user_id": 667987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c00249587cb5aa0ceb5765dc811faa7?s=128&d=identicon&r=PG", "display_name": "seph", "link": "https://stackoverflow.com/users/667987/seph"}, "is_accepted": true, "score": 2, "last_activity_date": 1466558051, "creation_date": 1466558051, "answer_id": 37957017, "question_id": 37955481, "link": "https://stackoverflow.com/questions/37955481/why-is-rubocop-asking-me-to-put-around-regex-when-im-using-r-already/37957017#37957017", "title": "Why is rubocop asking me to put // around regex when i&#39;m using %r already?", "body": "<p>I don't run rubocop so not sure this will solve your problem. You can use // instead of {} to surround the regex when using %r:</p>\n\n<pre><code>regexp = %r/((returned|undelivered)\\smail|mail\\sdelivery(\\sfailed)?)/x\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": -2, "last_activity_date": 1466581875, "creation_date": 1466581875, "answer_id": 37961781, "question_id": 37955481, "link": "https://stackoverflow.com/questions/37955481/why-is-rubocop-asking-me-to-put-around-regex-when-im-using-r-already/37961781#37961781", "title": "Why is rubocop asking me to put // around regex when i&#39;m using %r already?", "body": "<blockquote>\n  <p>when I run rubocop on it, it complains that I need to \"Use // around regular expression.\"</p>\n  \n  <p>How can I get around it?</p>\n</blockquote>\n\n<p>I think the message is pretty clear: to get around it, you can use <code>//</code> around the regular expression:</p>\n\n<pre><code>regexp = /((returned|undelivered)\\smail|mail\\sdelivery(\\sfailed)?)/x\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 213, "user_id": 2304511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf3c73ff695a758432f256d3cfd76472?s=128&d=identicon&r=PG", "display_name": "R. Peereboom", "link": "https://stackoverflow.com/users/2304511/r-peereboom"}, "is_accepted": false, "score": 3, "last_activity_date": 1476927621, "creation_date": 1476927621, "answer_id": 40144118, "question_id": 37955481, "link": "https://stackoverflow.com/questions/37955481/why-is-rubocop-asking-me-to-put-around-regex-when-im-using-r-already/40144118#40144118", "title": "Why is rubocop asking me to put // around regex when i&#39;m using %r already?", "body": "<p>You can disable (and enable) any rubocop cop by adding a <code>.rubocop.yml</code> file to the root of your project folder and setting up the appropriate configurations. To see what you can do, check out the global <code>default.yml</code> in your rubocop package. It's fully commented.</p>\n\n<p>For this particular problem, create a <code>.rubocop.yml</code> and...</p>\n\n<p>To disable the cop completely:</p>\n\n<p><code>\nStyle/RegexpLiteral:\n  Enabled: false\n</code></p>\n\n<p>To <em>always</em> use <code>%r</code>:</p>\n\n<p><code>\nStyle/RegexpLiteral:\n  EnforcedStyle: percent_r\n</code></p>\n"}, {"tags": [], "owner": {"reputation": 828, "user_id": 115436, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ca6df53a03c9823bad93783d7067908?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/115436/michael"}, "is_accepted": false, "score": 1, "last_activity_date": 1489640849, "creation_date": 1489640849, "answer_id": 42825726, "question_id": 37955481, "link": "https://stackoverflow.com/questions/37955481/why-is-rubocop-asking-me-to-put-around-regex-when-im-using-r-already/42825726#42825726", "title": "Why is rubocop asking me to put // around regex when i&#39;m using %r already?", "body": "<p>You can use multiline regexp with <code>/.../x</code> either:</p>\n\n<pre><code>regexp = /\n  ((returned|undelivered)\n  \\s\n  mail|mail\n  \\s\n  delivery\n  (\\sfailed)?)\n/x\n</code></pre>\n\n<p>See more in <a href=\"http://www.rubydoc.info/gems/rubocop/RuboCop/Cop/Style/RegexpLiteral\" rel=\"nofollow noreferrer\">Rubocop gem doc</a></p>\n"}], "owner": {"reputation": 1085, "user_id": 1511361, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/80d92fa4688a493a66475c4e351781af?s=128&d=identicon&r=PG", "display_name": "kchoi", "link": "https://stackoverflow.com/users/1511361/kchoi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2982, "favorite_count": 0, "accepted_answer_id": 37957017, "answer_count": 4, "score": 8, "last_activity_date": 1489640849, "creation_date": 1466547338, "question_id": 37955481, "link": "https://stackoverflow.com/questions/37955481/why-is-rubocop-asking-me-to-put-around-regex-when-im-using-r-already", "title": "Why is rubocop asking me to put // around regex when i&#39;m using %r already?", "body": "<p>I have the following regex </p>\n\n<pre><code>  regexp = %r{\n     ((returned|undelivered)\\smail|mail\\sdelivery(\\sfailed)?)\n  }x\n</code></pre>\n\n<p>But when I run rubocop on it, it complains that I need to \"Use // around regular expression.\"</p>\n\n<p>How can I get around it?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 45754, "user_id": 17410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1022b779bdc1ddef7cd9d29abd70ed15?s=128&d=identicon&r=PG", "display_name": "zetetic", "link": "https://stackoverflow.com/users/17410/zetetic"}, "edited": false, "score": 1, "creation_date": 1466618606, "post_id": 37955530, "comment_id": 63396783, "body": "You can also use the <code>$!</code> global inside a rescue block to get the exception object."}], "tags": [], "owner": {"reputation": 858, "user_id": 1875195, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3ed18248b30a2d90cf49ea9393097425?s=128&d=identicon&r=PG", "display_name": "user1875195", "link": "https://stackoverflow.com/users/1875195/user1875195"}, "is_accepted": true, "score": 7, "last_activity_date": 1466547596, "creation_date": 1466547596, "answer_id": 37955530, "question_id": 37955406, "link": "https://stackoverflow.com/questions/37955406/accessing-error-messages-within-a-rescue-block/37955530#37955530", "title": "Accessing Error Messages within a Rescue Block", "body": "<p>You need to specify a variable to store the error in</p>\n\n<pre><code>def foo\n  raise RuntimeError, \"This is an error\"\nend\n\ndef bar\n  begin\n    foo\n  rescue RuntimeError =&gt; ex\n    puts \"Rescued #{ex.message}\"\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 306, "user_id": 5161833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8OKud.jpg?s=128&g=1", "display_name": "krc", "link": "https://stackoverflow.com/users/5161833/krc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1011, "favorite_count": 0, "accepted_answer_id": 37955530, "answer_count": 1, "score": 1, "last_activity_date": 1466547596, "creation_date": 1466546989, "question_id": 37955406, "link": "https://stackoverflow.com/questions/37955406/accessing-error-messages-within-a-rescue-block", "title": "Accessing Error Messages within a Rescue Block", "body": "<p>Is there any way to get access to an error message in a rescue block as a string? For example:</p>\n\n<pre><code>def foo\n  raise RuntimeError, \"This is an error\"\nend\n\ndef bar\n  begin\n    foo\n  rescue RuntimeError\n    puts \"Rescued\"\n  end\nend\n\nbar\n</code></pre>\n\n<p>Is there any way to gain access to <code>\"This is an error\"</code> from with-in the rescue block? Something like this:</p>\n\n<pre><code>...\nrescue RuntimeError\n    puts &lt;error-message&gt;\nend\n...\n</code></pre>\n"}, {"tags": ["ruby", "rspec", "capybara"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 5313962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2141320bdf425a68e58160376b5e5e2e?s=128&d=identicon&r=PG&f=1", "display_name": "Donald C.", "link": "https://stackoverflow.com/users/5313962/donald-c"}, "edited": false, "score": 0, "creation_date": 1466601347, "post_id": 37955642, "comment_id": 63384086, "body": "After doing just gsub, I&#39;m getting a new error: no implicit conversion of Enumerator into String"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 43, "user_id": 5313962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2141320bdf425a68e58160376b5e5e2e?s=128&d=identicon&r=PG&f=1", "display_name": "Donald C.", "link": "https://stackoverflow.com/users/5313962/donald-c"}, "edited": false, "score": 1, "creation_date": 1466625240, "post_id": 37955642, "comment_id": 63400326, "body": "@DonaldC. because gsub takes two parameters if you want it to return a string -  I&#39;m guessing you want  <code>random_doc.gsub(&#39; doc&#39;,&#39;&#39;)</code>"}, {"owner": {"reputation": 43, "user_id": 5313962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2141320bdf425a68e58160376b5e5e2e?s=128&d=identicon&r=PG&f=1", "display_name": "Donald C.", "link": "https://stackoverflow.com/users/5313962/donald-c"}, "edited": false, "score": 0, "creation_date": 1466627984, "post_id": 37955642, "comment_id": 63401707, "body": "Just realized this after posting. Thanks for the help, much appreciated!"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 43, "user_id": 5313962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2141320bdf425a68e58160376b5e5e2e?s=128&d=identicon&r=PG&f=1", "display_name": "Donald C.", "link": "https://stackoverflow.com/users/5313962/donald-c"}, "edited": false, "score": 0, "creation_date": 1466638120, "post_id": 37955642, "comment_id": 63405414, "body": "@DonaldC. You&#39;re welcome, if the answer helped you, don&#39;t forget to accept the answer (the checkmark) so that the question gets marked as answered"}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 5, "last_activity_date": 1466548244, "creation_date": 1466548244, "answer_id": 37955642, "question_id": 37955347, "link": "https://stackoverflow.com/questions/37955347/cant-modify-frozen-string-error-using-gsub-and-hash/37955642#37955642", "title": "Can&#39;t modify frozen String error using gsub and hash", "body": "<p>The key name is frozen so you can't modify it in place - just use gsub rather than gsub! so that it returns a modified copy of the string rather than trying to do inplace modification</p>\n"}], "owner": {"reputation": 43, "user_id": 5313962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2141320bdf425a68e58160376b5e5e2e?s=128&d=identicon&r=PG&f=1", "display_name": "Donald C.", "link": "https://stackoverflow.com/users/5313962/donald-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4135, "favorite_count": 2, "accepted_answer_id": 37955642, "answer_count": 1, "score": 2, "last_activity_date": 1466548244, "creation_date": 1466546685, "question_id": 37955347, "link": "https://stackoverflow.com/questions/37955347/cant-modify-frozen-string-error-using-gsub-and-hash", "title": "Can&#39;t modify frozen String error using gsub and hash", "body": "<p>I'm trying to create a ruby rspec with capybara and I'm getting this error when attempting to remove part of a string from a hash: can't modify frozen String</p>\n\n<pre><code>scenario \"check doc\" do\ndocs = {\n  'A doc' =&gt; 'a.txt',\n  'B doc' =&gt; 'b.txt',\n  'C doc' =&gt; 'c.txt'\n}\nrandom_doc = docs.keys.sample\npage.should have_css('.class', :text =&gt; 'Document ' + random_doc.gsub!(' doc') + ' was selected')\n</code></pre>\n\n<p>Any help would be appreciated!</p>\n"}, {"tags": ["ruby", "lazy-evaluation"], "answers": [{"comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1466547247, "post_id": 37955391, "comment_id": 63359164, "body": "So lazy evaluation is the default for Enumerator objects?"}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1466548689, "post_id": 37955391, "comment_id": 63359653, "body": "A very ehh.. lazy programmer could just generate an array and use it&#39;s <code>each</code> method, completely missing the point of having an Enumerator; but in general yes, Enumerators are lazy."}], "tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": true, "score": 2, "last_activity_date": 1466631271, "last_edit_date": 1466631271, "creation_date": 1466546888, "answer_id": 37955391, "question_id": 37954959, "link": "https://stackoverflow.com/questions/37954959/how-can-i-get-the-length-n-combinations-for-an-array-using-lazy-evaluation/37955391#37955391", "title": "How can I get the length N combinations for an array using lazy evaluation?", "body": "<p>\"What I'm specifically trying to do is run a block for each element of the array.combination results, but I don't want to load up all the length-N combinations into memory first.\" </p>\n\n<p>That is exactly what your code is doing. You are invoking the <code>combination</code> method without a block, which results in an Enumerator. Then you use its <code>each</code>method. Only one combination is in memory at a time.</p>\n"}], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 247, "favorite_count": 0, "accepted_answer_id": 37955391, "answer_count": 1, "score": 1, "last_activity_date": 1466631271, "creation_date": 1466544837, "last_edit_date": 1466547188, "question_id": 37954959, "link": "https://stackoverflow.com/questions/37954959/how-can-i-get-the-length-n-combinations-for-an-array-using-lazy-evaluation", "title": "How can I get the length N combinations for an array using lazy evaluation?", "body": "<p>I think I understand the difference between permutation and combination:</p>\n\n<p>In short, <code>[1,20,30].permutation(3).map(&amp;:sort).uniq</code> is the same as <code>[1,20,30].combination(3)</code>. </p>\n\n<p>I currently have a program which gets all of an array's combinations:</p>\n\n<pre><code>array = [1,20,30,40,50,60]\n1.upto(array.length).each do |combination_length|\n  array.combination(combination_length).each do |combination|\n    # ... do something here with the combination ...\n  end\nend\n</code></pre>\n\n<p>I'm trying to reduce the memory consumption and I think I should find an alternative to <code>array.combination(combination_length).each</code>.</p>\n\n<p>The <a href=\"http://ruby-doc.org/core-2.0.0/Enumerator/Lazy.html\" rel=\"nofollow\">Ruby docs for Lazy Enumerators</a> don't seem to show a <code>combination</code> method. The source for the <code>Array#combination</code> method is written in C, so I don't really have the skill to alter it. </p>\n\n<p>What I'm specifically trying to do is run a block for each element of the <code>array.combination</code> results, but I <em>don't</em> want to load up all the length-N combinations into memory first.</p>\n\n<p>I've looked around for an implementation of <code>combination</code> that I can understand, but I'm having a difficult time. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "edited": false, "score": 0, "creation_date": 1466548364, "post_id": 37954881, "comment_id": 63359559, "body": "what happens right now with your current code?"}, {"owner": {"reputation": 5, "user_id": 2892065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbe76dd78628b894f3f40bf3a1bca3e8?s=128&d=identicon&r=PG&f=1", "display_name": "jdune", "link": "https://stackoverflow.com/users/2892065/jdune"}, "reply_to_user": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "edited": false, "score": 0, "creation_date": 1466613252, "post_id": 37954881, "comment_id": 63393627, "body": "@MohammadAbuShady Sorry for not putting that in the question, I was a bit rushed.  It was throwing a very weird error, although I fixed it by containing it in a &#39;before&#39; block.  Dumb mistake on my part but thanks for responding."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 2892065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbe76dd78628b894f3f40bf3a1bca3e8?s=128&d=identicon&r=PG&f=1", "display_name": "jdune", "link": "https://stackoverflow.com/users/2892065/jdune"}, "edited": false, "score": 0, "creation_date": 1466613523, "post_id": 37956705, "comment_id": 63393777, "body": "My problem was with where I had my stub statements - fixed the weird error I was getting by putting it in a &#39;before&#39; block.  Also changed from stub to allow because I found out that was deprecated.  Thanks!"}], "tags": [], "owner": {"reputation": 45754, "user_id": 17410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1022b779bdc1ddef7cd9d29abd70ed15?s=128&d=identicon&r=PG", "display_name": "zetetic", "link": "https://stackoverflow.com/users/17410/zetetic"}, "is_accepted": true, "score": 0, "last_activity_date": 1466555268, "creation_date": 1466555268, "answer_id": 37956705, "question_id": 37954881, "link": "https://stackoverflow.com/questions/37954881/rspec-mocking-module-function-of-controller/37956705#37956705", "title": "RSpec mocking module function of controller", "body": "<p>The controller instance can be stubbed like any other object. You may also need to add the route:</p>\n\n<pre><code>describe FakeController, type: :controller do\n  let(:admin_user) { instance_double(User, admin?: true) }\n\n  it \"performs my excellent test\" do\n    allow(controller).to receive(:current_user).and_return(admin_user)\n    routes.draw { get \"custom_action\" =&gt; \"fake#custom_action\" }\n    get :custom_action\n  end\nend\n</code></pre>\n\n<p><code>let(:controller)</code> is uneccessary -- RSpec does that for you. Also, the test class does not need to go into a <code>before</code> block -- it can simply be defined at the top of the file, or require-d.</p>\n"}], "owner": {"reputation": 5, "user_id": 2892065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbe76dd78628b894f3f40bf3a1bca3e8?s=128&d=identicon&r=PG&f=1", "display_name": "jdune", "link": "https://stackoverflow.com/users/2892065/jdune"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 448, "favorite_count": 0, "accepted_answer_id": 37956705, "answer_count": 1, "score": 0, "last_activity_date": 1466613419, "creation_date": 1466544456, "last_edit_date": 1466613419, "question_id": 37954881, "link": "https://stackoverflow.com/questions/37954881/rspec-mocking-module-function-of-controller", "title": "RSpec mocking module function of controller", "body": "<p>So I'm very new to Rails and struggling a bit with RSpec, specifically mocking certain things.  So I have a module (concern) that a few of my controllers are using.  That module (ValidateAdmin) calls two other functions within, current_user and logged_in_user.  To cover the most possibilities, I wanted to stub both those functions and set their return value.  Any suggestions on how to make this work?</p>\n\n<pre><code>describe ValidateAdmin do\n  before :all do\n    class FakeController &lt; ApplicationController\n      include ValidateAdmin\n    end\n  end\n\nlet(:controller) { FakeController.new }\n\ndescribe '#validate_admin_logged_in' do\n  controller.stub(:current_user).and_return(instance_double(User, admin?: true))\n  controller.stub(:logged_in_user).and_return(instance_double(User, admin?: true))\n  [RSpec contexts go here]\n</code></pre>\n\n<p>Edit - Fixed it by containing my mocking statements inside a 'before' block.  Also just realized stub is deprecated so switched to allow statements.</p>\n"}, {"tags": ["ruby", "sinatra", "ruby-datamapper"], "answers": [{"tags": [], "owner": {"reputation": 4370, "user_id": 465082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab74528b8223851cd7b546beec220fdc?s=128&d=identicon&r=PG", "display_name": "Kashyap", "link": "https://stackoverflow.com/users/465082/kashyap"}, "is_accepted": false, "score": 0, "last_activity_date": 1467583238, "last_edit_date": 1467583238, "creation_date": 1466589529, "answer_id": 37964655, "question_id": 37954443, "link": "https://stackoverflow.com/questions/37954443/use-geocoder-with-sinatra-and-datamapper/37964655#37964655", "title": "Use Geocoder with Sinatra and DataMapper", "body": "<p>First up, it looks like the Geocode gem won't have direct support for Datamapper, <a href=\"https://github.com/alexreisner/geocoder/issues/83#issuecomment-76081022\" rel=\"nofollow\">as per this issue</a>.</p>\n\n<p>Second, when you include a module inside a class, the methods are available to the instance of the class, and not at the class level. For example:</p>\n\n<pre><code>module Name\n  def name\n    puts \"Module\"\n  end\nend\n\nclass SomeClass\n  include Name\nend\n\nSomeClass.new.name # =&gt; \"Module\"\n</code></pre>\n\n<p>This works because when you <code>include</code> a module, that module gets added to the ancestor chain of that class. Any methods that get sent to the instance which are not available on the instance are forwarded to the ancestors. However, there's another method called <code>extend</code> which adds the methods at a class-level rather than at instance level:</p>\n\n<pre><code># module definition same as before\n\nclass SomeClass\n  extend Name\n\n  name # works!\nend\n</code></pre>\n\n<p>Inorder to get class-level inclusion, there is another way (which is what the <a href=\"https://github.com/alexreisner/geocoder/blob/master/lib/geocoder/models/mongoid.rb#L10\" rel=\"nofollow\">Geocoder gem uses for supported models</a>:</p>\n\n<pre><code># module code same as before\n\nmodule Name\n  def name\n    puts \"Module\"\n  end\n\n  def self.included(klass)\n    klass.extend(self)\n  end\nend\n</code></pre>\n\n<p>The <code>included</code> hook is provided for models which can be overridden to do something when the <code>include Name</code> step executes. Since there's no Datamapper specific module that is not executing this step, you see that error.</p>\n"}], "owner": {"reputation": 23753, "user_id": 134367, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PgGXL.png?s=128&g=1", "display_name": "craig", "link": "https://stackoverflow.com/users/134367/craig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467583238, "creation_date": 1466542673, "question_id": 37954443, "link": "https://stackoverflow.com/questions/37954443/use-geocoder-with-sinatra-and-datamapper", "title": "Use Geocoder with Sinatra and DataMapper", "body": "<p>I'm attempting to use the Geocoder gem with a DataMapper model in a Sinatra application.</p>\n\n<p><code>environment.rb</code>:</p>\n\n<pre><code>require 'rubygems'\nrequire 'bundler/setup'\nrequire 'dm-core'\nrequire 'dm-timestamps'\nrequire 'dm-validations'\nrequire 'dm-aggregates'\nrequire 'dm-migrations'\nrequire 'dm-types'\nrequire 'geocoder'\n\nrequire 'sinatra' unless defined?(Sinatra)\n\n# load models\n$LOAD_PATH.unshift(\"#{File.dirname(__FILE__)}/lib\")\nDir.glob(\"#{File.dirname(__FILE__)}/lib/*.rb\") { |lib| require File.basename(lib, '.*') }\n\nDataMapper.setup(:default, (ENV[\"DATABASE_URL\"] || \"sqlite3:///#{File.expand_path(File.dirname(__FILE__))}/#{Sinatra::Base.environment}.db\"))\nDataMapper.finalize\nDataMapper.auto_upgrade!\n</code></pre>\n\n<p><code>lib/location.rb</code>:</p>\n\n<pre><code>  class Location\n    include DataMapper::Resource\n    include Geocoder::Model::Base\n\n    property :id, Serial\n    property :address, String, :required =&gt; true\n\n    # geocoder gem\n    geocoded_by :address, :latitude  =&gt; :lat, :longitude =&gt; :lng\n\n    # geocoder\n    after_validation :geocode, :if =&gt; :address_changed?\n\n  end\n</code></pre>\n\n<p>When I attempt to start an IRB session, an exception is generated:</p>\n\n<pre><code>irb&gt; require './environment'\nNameError: uninitialized constant Geocoder::Model\n...\n</code></pre>\n\n<p>What am I not understanding?</p>\n"}]