[{"tags": ["ruby", "rubygems", "irb"], "comments": [{"owner": {"reputation": 1113, "user_id": 1569557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c37644f013aa8529be67f22183174583?s=128&d=identicon&r=PG", "display_name": "shadowbq", "link": "https://stackoverflow.com/users/1569557/shadowbq"}, "edited": false, "score": 1, "creation_date": 1509579769, "post_id": 47064950, "comment_id": 81078918, "body": "Do you want a different HOME env? This can be accomplished during the launch by overloading the BASH HOME"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 2, "creation_date": 1509588762, "post_id": 47064950, "comment_id": 81081111, "body": "&quot;~&quot; needs expansion. If you want to avoid that, you can set irb to move the current directory to the home on boot."}, {"owner": {"reputation": 6654, "user_id": 654457, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8806c26cc5687109c0669221ab54ecb7?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Nelson", "link": "https://stackoverflow.com/users/654457/ben-nelson"}, "edited": false, "score": 0, "creation_date": 1509641044, "post_id": 47064950, "comment_id": 81109960, "body": "Right I was curious on how to automate the expansion. Is there a config for irb you can set or do I have to manually do it?"}], "owner": {"reputation": 6654, "user_id": 654457, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8806c26cc5687109c0669221ab54ecb7?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Nelson", "link": "https://stackoverflow.com/users/654457/ben-nelson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1509577057, "creation_date": 1509577057, "question_id": 47064950, "link": "https://stackoverflow.com/questions/47064950/easy-way-to-set-irb-to-alias-requires-to-home-directory", "title": "Easy way to set irb to alias requires to home directory", "body": "<p>Is there an easy way to set IRB to alias the home directory to the correct path? ie. if I do a <code>require('~')</code> in an irb terminal it will require my home directory at the correct path?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 1397, "user_id": 4940278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06NHi.jpg?s=128&g=1", "display_name": "Luna Lovegood", "link": "https://stackoverflow.com/users/4940278/luna-lovegood"}, "edited": false, "score": 0, "creation_date": 1544697295, "post_id": 47064735, "comment_id": 94371661, "body": "Maybe the params[:value] is serialized data?"}], "answers": [{"tags": [], "owner": {"reputation": 271, "user_id": 1204300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d927adbf98a50d6008fbb24c10924291?s=128&d=identicon&r=PG", "display_name": "Jean-Fran&#231;ois Rioux", "link": "https://stackoverflow.com/users/1204300/jean-fran%c3%a7ois-rioux"}, "is_accepted": false, "score": 2, "last_activity_date": 1509591676, "creation_date": 1509591676, "answer_id": 47066899, "question_id": 47064735, "link": "https://stackoverflow.com/questions/47064735/cant-quote-actioncontrollerparameters/47066899#47066899", "title": "can&#39;t quote ActionController::Parameters", "body": "<p>I don't think you are using permit as it's intended to be used.</p>\n\n<p><code>params.permit</code> returns an instance of <code>ActionController::Parameters</code>, hence the error you get. See <a href=\"https://github.com/rails/rails/blob/c1014e435d26db867b2c15b74c9ef47ccff38edb/actionpack/lib/action_controller/metal/strong_parameters.rb#L522\" rel=\"nofollow noreferrer\">here</a> for the code.</p>\n\n<p><code>permit</code> should be used to limit the attributes that can be updated through mass assignment. </p>\n\n<p>Here's the relevant documentation for it: <a href=\"https://apidock.com/rails/ActionController/Parameters/permit\" rel=\"nofollow noreferrer\">https://apidock.com/rails/ActionController/Parameters/permit</a>\n<a href=\"http://guides.rubyonrails.org/action_controller_overview.html#strong-parameters\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/action_controller_overview.html#strong-parameters</a></p>\n"}], "owner": {"reputation": 265, "user_id": 492919, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ba64c96f5400159f84a6de03b0a7eff3?s=128&d=identicon&r=PG", "display_name": "mike", "link": "https://stackoverflow.com/users/492919/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1909, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1509591676, "creation_date": 1509575757, "last_edit_date": 1509577974, "question_id": 47064735, "link": "https://stackoverflow.com/questions/47064735/cant-quote-actioncontrollerparameters", "title": "can&#39;t quote ActionController::Parameters", "body": "<p>I have following index action in controller</p>\n\n<pre><code>  def index\n    details = CustomerInfo.current\n                          .for_user(params[:user])\n                          .for_product(params[:product])\n                          .for_area(params[:area])\n                          .where(value: params.permit(:value))\n    render(json: details)\n  end\n</code></pre>\n\n<p>When i added permit in <code>where</code> i started getting the error <code>can't quote ActionController::Parameters</code> at <code>render(json: details)</code>\nBut if i not use permit <code>.where(value: params[:value])</code> it works fine. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "cucumber", "webrick"], "answers": [{"comments": [{"owner": {"reputation": 30697, "user_id": 31667, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/082b069c287878a1bd5731f44c8f10e7?s=128&d=identicon&r=PG", "display_name": "viraptor", "link": "https://stackoverflow.com/users/31667/viraptor"}, "edited": false, "score": 0, "creation_date": 1509662272, "post_id": 47065579, "comment_id": 81120957, "body": "I need something more generic that that unfortunately. I want some reusable step to say &quot;you can&#39;t handle any requests why this is running&quot;, wherever it&#39;s used. (this cannot rely on specific resources) I&#39;m not sure what you mean by the rack driver? Could you expand on that?"}, {"owner": {"reputation": 3257, "user_id": 4341733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b1793f226cb3189da8bc9c6264d72b7?s=128&d=identicon&r=PG", "display_name": "diabolist", "link": "https://stackoverflow.com/users/4341733/diabolist"}, "reply_to_user": {"reputation": 30697, "user_id": 31667, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/082b069c287878a1bd5731f44c8f10e7?s=128&d=identicon&r=PG", "display_name": "viraptor", "link": "https://stackoverflow.com/users/31667/viraptor"}, "edited": false, "score": 0, "creation_date": 1509769834, "post_id": 47065579, "comment_id": 81165100, "body": "The default stack for cuking with rails is, Cucumber, Capybara and Rack (<a href=\"https://rack.github.io/\" rel=\"nofollow noreferrer\">rack.github.io</a>). Rack provides a minimal interface between webservers that use ruby and ruby frameworks e.g. Rails. Capybara acts as a middleman between your Cukes and your browser. You can configure Capybara to talk to your webserver using rack, selenium or a number of other drivers. Rack is the simplest and fastest talks directly to the webserver but doesn&#39;t support javascript. Selenium is much slower, does support javascript and can use real or headless browsers."}], "tags": [], "owner": {"reputation": 3257, "user_id": 4341733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b1793f226cb3189da8bc9c6264d72b7?s=128&d=identicon&r=PG", "display_name": "diabolist", "link": "https://stackoverflow.com/users/4341733/diabolist"}, "is_accepted": false, "score": 1, "last_activity_date": 1509581547, "creation_date": 1509581547, "answer_id": 47065579, "question_id": 47064709, "link": "https://stackoverflow.com/questions/47064709/blocking-web-requests-while-step-code-is-running-in-cucumber/47065579#47065579", "title": "Blocking web requests while step code is running in cucumber", "body": "<p>One thing you could do is have the first request look for something from the extra resources so that it doesn't finish until they have loaded. If you use Capybara you will find it is very good at doing this.</p>\n\n<p>Another thing you could do is use the rack driver instead, as this won't load the javascript that your using to load your extra resources. If you don't need the extra resources for your test why load them :)</p>\n"}], "owner": {"reputation": 30697, "user_id": 31667, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/082b069c287878a1bd5731f44c8f10e7?s=128&d=identicon&r=PG", "display_name": "viraptor", "link": "https://stackoverflow.com/users/31667/viraptor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1509581547, "creation_date": 1509575559, "question_id": 47064709, "link": "https://stackoverflow.com/questions/47064709/blocking-web-requests-while-step-code-is-running-in-cucumber", "title": "Blocking web requests while step code is running in cucumber", "body": "<p>I'm using Cucumber + Selenium for testing some Rails code. In that configuration I'm sometimes running into an issue where some extra resources / delayed request gets loaded in the browser after the first step (requesting the page) has finished and the second step is running.</p>\n\n<p>Unfortunately the code is not thread-safe and the extra request and the next step cannot run at the same time.</p>\n\n<p>Is there any way to lock the webrick from accepting any requests until a specific section of feature/step code is complete? Does cucumber or webrick expose any relevant synchronisation?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5962, "user_id": 115159, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ac02a81e50f368f6d5c7a14b99ce2469?s=128&d=identicon&r=PG", "display_name": "Dharam Gollapudi", "link": "https://stackoverflow.com/users/115159/dharam-gollapudi"}, "edited": false, "score": 0, "creation_date": 1509575577, "post_id": 47064637, "comment_id": 81077629, "body": "Error message says that the corresponding template for <code>CafesController#root</code> is missing. Try setting up view <code>app&#47;views&#47;cafes&#47;root.html.erb</code> in order for <code>rails</code> to render it."}], "answers": [{"comments": [{"owner": {"reputation": 1440, "user_id": 4282529, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/dW8oZ.jpg?s=128&g=1", "display_name": "kdweber89", "link": "https://stackoverflow.com/users/4282529/kdweber89"}, "edited": false, "score": 1, "creation_date": 1509580232, "post_id": 47064708, "comment_id": 81079051, "body": "I really like this idea, it works quite well for what I am trying to do. Thank you so much!"}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 1, "last_activity_date": 1509576270, "last_edit_date": 1509576270, "creation_date": 1509575553, "answer_id": 47064708, "question_id": 47064637, "link": "https://stackoverflow.com/questions/47064637/creating-a-dynamic-root-route-in-rails/47064708#47064708", "title": "Creating a dynamic root route in rails", "body": "<p>I image you could do something like:</p>\n\n<pre><code>class CafeController &lt; ApplicationController \n  def root\n    redirect_to Cafe.all.sample\n  end \nend\n</code></pre>\n\n<p>By the way, this approach has the benefits of letting you keep and use all your normal routes in the conventional manner. </p>\n\n<p>Also, you might consider calling this action something a little more descriptive. Perhaps something like <code>random_cafe</code>. IMO, <code>root 'cafes#random_cafe'</code> is a bit more understandable.</p>\n"}, {"comments": [{"owner": {"reputation": 536, "user_id": 8436554, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/d3XUa.jpg?s=128&g=1", "display_name": "Amr Adel", "link": "https://stackoverflow.com/users/8436554/amr-adel"}, "edited": false, "score": 0, "creation_date": 1509575772, "post_id": 47064732, "comment_id": 81077691, "body": "Look at ways that you can render a template <a href=\"https://stackoverflow.com/questions/5045222/difference-between-render-action-and-render-template\">here</a>"}], "tags": [], "owner": {"reputation": 536, "user_id": 8436554, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/d3XUa.jpg?s=128&g=1", "display_name": "Amr Adel", "link": "https://stackoverflow.com/users/8436554/amr-adel"}, "is_accepted": false, "score": 0, "last_activity_date": 1509576158, "last_edit_date": 1509576158, "creation_date": 1509575729, "answer_id": 47064732, "question_id": 47064637, "link": "https://stackoverflow.com/questions/47064637/creating-a-dynamic-root-route-in-rails/47064732#47064732", "title": "Creating a dynamic root route in rails", "body": "<p><code>missing a template error</code> because you have to specify a template to render, I'm imagining that <code>array.sample</code> will return something like <code>/cafes/firstsampe.html.erb</code> where <code>firstsampe.html.erb</code> persists inside cafes views folder so you can use it like this <code>redirect_to :template =&gt; array.sample</code>.</p>\n\n<p>Hope it helps.</p>\n"}, {"tags": [], "owner": {"reputation": 2813, "user_id": 482842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/135dc4655009942421d5def8c6d153b4?s=128&d=identicon&r=PG", "display_name": "ghstcode", "link": "https://stackoverflow.com/users/482842/ghstcode"}, "is_accepted": false, "score": 0, "last_activity_date": 1509576278, "last_edit_date": 1509576278, "creation_date": 1509575807, "answer_id": 47064746, "question_id": 47064637, "link": "https://stackoverflow.com/questions/47064637/creating-a-dynamic-root-route-in-rails/47064746#47064746", "title": "Creating a dynamic root route in rails", "body": "<p>I don't have any idea about what your data looks like, but there are two approaches you can take here: </p>\n\n<ol>\n<li>Show a random cafe when the user hits your home page (root)</li>\n<li>Redirect a user to a cafe's page randomly when they hit the home page</li>\n</ol>\n\n<p><strong>In scenario 1:</strong> </p>\n\n<p>Controller: </p>\n\n<pre><code>class CafesController &lt; ApplicationController\n  def index\n     @cafe = Cafe.order(\"RANDOM()\").first\n  end\nend\n</code></pre>\n\n<p>Routing: </p>\n\n<pre><code>root 'cafes#index'\n</code></pre>\n\n<p>Views:</p>\n\n<pre><code>app/views/cafes/index.html.erb\n\n&lt;p&gt;&lt;%= @cafe.name %&gt;&lt;/p&gt;\n</code></pre>\n\n<p><strong>In scenario 2:</strong> </p>\n\n<p>Controller: </p>\n\n<pre><code>class CafesController &lt; ApplicationController\n  def index\n     redirect_to cafe_path(Cafe.order(\"RANDOM()\").first)\n  end\n\n  def show\n    @cafe = Cafe.find(params[:id])\n  end\nend\n</code></pre>\n\n<p>Routing: </p>\n\n<pre><code>root 'cafes#index'\nresources :cafes, only: [:show]\n</code></pre>\n\n<p>Views:</p>\n\n<pre><code>app/views/cafes/show.html.erb\n\n&lt;p&gt;&lt;%= @cafe.name %&gt;&lt;/p&gt;\n</code></pre>\n"}], "owner": {"reputation": 1440, "user_id": 4282529, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/dW8oZ.jpg?s=128&g=1", "display_name": "kdweber89", "link": "https://stackoverflow.com/users/4282529/kdweber89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 0, "accepted_answer_id": 47064708, "answer_count": 3, "score": 2, "last_activity_date": 1509576278, "creation_date": 1509575126, "question_id": 47064637, "link": "https://stackoverflow.com/questions/47064637/creating-a-dynamic-root-route-in-rails", "title": "Creating a dynamic root route in rails", "body": "<p>I have a rails app where I am wanting to make the landing page dynamic so that every time the user goes to it it changes. </p>\n\n<p>I have cafe's in my app, and each cafe has its own show page. I want each show page to be dynamic. The url's are based off of the cafe's id, so I figured I'd have to use those IDs as the focal point for creating the dynamic work i'm looking for. </p>\n\n<p>In my cafe's controller I have</p>\n\n<pre><code>class CafesController &lt; ApplicationController\n  def root\n    array = Cafe.pluck(:id)\n\n    array.sample\n  end\nend\n</code></pre>\n\n<p>in my routes file I have</p>\n\n<pre><code>root 'cafes#root'\n</code></pre>\n\n<p>The error I'm getting is </p>\n\n<pre><code>`CafesController#root is missing a template for this request format and variant. `\n</code></pre>\n\n<p>Would anyone know what I am missing with this one? Much appreciated. </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1509580701, "post_id": 47064630, "comment_id": 81079180, "body": "It&#39;s peculiar to see <code>puts</code> in Rails code since that output usually goes nowhere."}, {"owner": {"reputation": 12440, "user_id": 688266, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/7987473923dcc33913003686350b33f6?s=128&d=identicon&r=PG", "display_name": "Kamilski81", "link": "https://stackoverflow.com/users/688266/kamilski81"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1509712811, "post_id": 47064630, "comment_id": 81141409, "body": "Puts is just for example. I would actually have my UI display-button there instead"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1509725133, "post_id": 47064630, "comment_id": 81149856, "body": "Don&#39;t forget about <code>Rails.logger.debug(...)</code> when using Rails code."}], "answers": [{"tags": [], "owner": {"reputation": 2813, "user_id": 482842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/135dc4655009942421d5def8c6d153b4?s=128&d=identicon&r=PG", "display_name": "ghstcode", "link": "https://stackoverflow.com/users/482842/ghstcode"}, "is_accepted": false, "score": 1, "last_activity_date": 1509576066, "creation_date": 1509576066, "answer_id": 47064803, "question_id": 47064630, "link": "https://stackoverflow.com/questions/47064630/how-can-i-clean-up-my-user-permissions-code-in-ruby-rails/47064803#47064803", "title": "How can I clean up my user permissions code in Ruby/Rails?", "body": "<p>Have you looked at using something like <a href=\"https://github.com/CanCanCommunity/cancancan\" rel=\"nofollow noreferrer\">https://github.com/CanCanCommunity/cancancan</a> ? </p>\n\n<p>I used it recently and you end up adding some code to the models like this:</p>\n\n<pre><code>if user.has_role? :uam_officer\n  can :create, Segment\n  cannot :approve, User\n  cannot :reject, User\nend\n</code></pre>\n\n<p>and then in views for instance: </p>\n\n<pre><code>&lt;% if can?(:create, Segment) %&gt;\n   &lt;%= link_to 'New', new_management_segment_path, { :class=&gt;\"btn btn-primary\" } %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>it helps keep the authorization logic packaged neatly. </p>\n"}, {"tags": [], "owner": {"reputation": 12440, "user_id": 688266, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/7987473923dcc33913003686350b33f6?s=128&d=identicon&r=PG", "display_name": "Kamilski81", "link": "https://stackoverflow.com/users/688266/kamilski81"}, "is_accepted": true, "score": 0, "last_activity_date": 1510690874, "creation_date": 1510690874, "answer_id": 47294532, "question_id": 47064630, "link": "https://stackoverflow.com/questions/47064630/how-can-i-clean-up-my-user-permissions-code-in-ruby-rails/47294532#47294532", "title": "How can I clean up my user permissions code in Ruby/Rails?", "body": "<p>I decided to use Pundit and move all of those methods into my policies.  Works like a charm and is much cleaner.</p>\n"}], "owner": {"reputation": 12440, "user_id": 688266, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/7987473923dcc33913003686350b33f6?s=128&d=identicon&r=PG", "display_name": "Kamilski81", "link": "https://stackoverflow.com/users/688266/kamilski81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 47294532, "answer_count": 2, "score": 0, "last_activity_date": 1510690874, "creation_date": 1509575095, "question_id": 47064630, "link": "https://stackoverflow.com/questions/47064630/how-can-i-clean-up-my-user-permissions-code-in-ruby-rails", "title": "How can I clean up my user permissions code in Ruby/Rails?", "body": "<p>I am writing a system where every user can manage other users' permissions.</p>\n\n<p>I have a business requirement where a logged_in_user can't demote someone higher than them in rankings.  My positions are the following:</p>\n\n<pre><code>STAFF &lt; MANAGER &lt; ORGANIZATION_ADMIN\n</code></pre>\n\n<p>I am trying to display the permission buttons for the users and have the following (ugly) method that gets the job done, but feels like awful code.</p>\n\n<pre><code># Iterate through all users and allow for their permissions to be modified\nother_users.each do |other_user|\n  buttons_to_show = get_buttons_to_show(logged_in_user, other_user)\n\n  if buttons_to_show.include?(ORGANIZATION_ADMIN)\n    puts \"Make other_user #{ORGANIZATION_ADMIN}\" # Will be a button on UI\n\n  if buttons_to_show.include?(MANAGER)\n    puts \"Make other_user #{MANAGER}\" # Will be a button on UI\n\n  if buttons_to_show.include?(STAFF)\n    puts \"Make other_user #{STAFF}\" # Will be a button on UI\nend\n\n\ndef get_buttons_to_show(current_user, other_user)\n  buttons_to_show = []\n\n  if (current_user.at_least_staff? &amp;&amp; other_user.role != MANAGER &amp;&amp; other_user.role != ORGANIZATION_ADMIN) ||\n      (current_user.at_least_manager? &amp;&amp; other_user.role != ORGANIZATION_ADMIN) ||\n      (current_user.at_least_organization_admin?)\n    buttons_to_show &lt;&lt; STAFF\n  end\n\n  if (current_user.at_least_manager? &amp;&amp; other_user.role != ORGANIZATION_ADMIN) ||\n      (current_user.at_least_organization_admin?)\n    buttons_to_show &lt;&lt; MANAGER\n  end\n\n  if current_user.at_least_organization_admin?\n    buttons_to_show &lt;&lt; ORGANIZATION_ADMIN\n  end\n\n  buttons_to_show\nend                \n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1509574636, "post_id": 47064498, "comment_id": 81077309, "body": "Ruby doesn&#39;t use <code>&#47;&#47;</code> for comments, it uses <code>#</code>, but the problem is that <code>#</code> also appears inside strings as an interpolation indicator, not a comment."}, {"owner": {"reputation": 7462, "user_id": 278816, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9vekw.png?s=128&g=1", "display_name": "Garry Pettet", "link": "https://stackoverflow.com/users/278816/garry-pettet"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1509574720, "post_id": 47064498, "comment_id": 81077350, "body": "@tadman: Yeah I know. The instructions in the file are run through <code>eval()</code> so might include <code>#</code> at the beginning of the line. Chose to use <code>&#47;&#47;</code> to indicate a comment."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1509574874, "post_id": 47064498, "comment_id": 81077402, "body": "It&#39;s not clear what the end goal is here, nor why you need this peculiar form in the first place. Maybe you can better describe your intent and how <code>&#47;&#47;</code> might appear. If it&#39;s in a string do you ignore it? Is it presumed that <code>&#47;&#47;</code> can be in the middle of a line? If so, <code>line.sub(%r[&#47;&#47;.*], &#39;&#39;)</code> can delete the comment and everything after, then you can <code>lines.reject(&amp;:empty?)</code>."}], "answers": [{"tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 2, "last_activity_date": 1509576797, "last_edit_date": 1509576797, "creation_date": 1509575116, "answer_id": 47064635, "question_id": 47064498, "link": "https://stackoverflow.com/questions/47064498/how-can-i-read-lines-from-a-file-into-an-array-that-are-not-comments-or-empty/47064635#47064635", "title": "How can I read lines from a file into an array that are not comments or empty?", "body": "<p><code>start_with</code> takes multiple arguments, so you can do</p>\n\n<pre><code>File.open(\"test.txt\").each_line.reject{|line| line.start_with?(\"//\", \"\\n\")}.map(&amp;:chomp)\n</code></pre>\n\n<p>in one go.</p>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1509588937, "post_id": 47064654, "comment_id": 81081146, "body": "The regex <code>&#47;^\\s*\\&#47;\\&#47;.*$&#47;</code> is redundant. You only need <code>&#47;^\\s*\\&#47;\\&#47;&#47;</code>. But to my interpretation, it should rather be <code>&#47;^\\&#47;\\&#47;&#47;</code>."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 0, "last_activity_date": 1509575535, "last_edit_date": 1509575535, "creation_date": 1509575224, "answer_id": 47064654, "question_id": 47064498, "link": "https://stackoverflow.com/questions/47064498/how-can-i-read-lines-from-a-file-into-an-array-that-are-not-comments-or-empty/47064654#47064654", "title": "How can I read lines from a file into an array that are not comments or empty?", "body": "<p>I would do it like so, using regex:</p>\n\n<pre><code>def read_commands(path)\n  File.read(path).split(\"\\n\").reduce([]) do |results, line|\n    case line\n    when /^\\s*\\/\\/.*$/ # check for comments\n    when /^\\s*$/       # check for empty lines\n    else\n      results.push line\n    end\n    results\n  end\nend\n</code></pre>\n\n<p>To break down the regexes:</p>\n\n<pre><code>comments_regex = %r{\n  ^     # beginning of line\n  \\s*   # any number of whitespaces\n  \\/\\/  # the // sequence\n  .*    # any number of anything\n  $     # end of line\n}x\n\nempty_lines_regex = %r{\n  ^     # beginning of line\n  \\s*   # any number of whitespaces\n  $     # end of line\n}x\n</code></pre>\n"}], "owner": {"reputation": 7462, "user_id": 278816, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9vekw.png?s=128&g=1", "display_name": "Garry Pettet", "link": "https://stackoverflow.com/users/278816/garry-pettet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1509576797, "creation_date": 1509574310, "question_id": 47064498, "link": "https://stackoverflow.com/questions/47064498/how-can-i-read-lines-from-a-file-into-an-array-that-are-not-comments-or-empty", "title": "How can I read lines from a file into an array that are not comments or empty?", "body": "<p>I have a text file where a line may be either blank, a comment (begins with <code>//</code>) or an instruction (i.e. anything <strong>not</strong> blank or a comment). For instance:</p>\n\n<pre><code>Hiya #{prefs(\"interlocutor\")}!\n\n// Say morning appropriately or hi otherwise\n#{(0..11).include?(Time.now.hour) ? 'Morning' : 'Hi'} #{prefs(\"interlocutor\")}\n</code></pre>\n\n<p>I'm trying to read the contents of the file into an array where only the instruction lines are included (i.e. skip the blank lines and comments). I have this code (which works):</p>\n\n<pre><code>path = Pathname.new(\"test.txt\")\n# Get each line from the file and reject comment lines\nlines = path.readlines.reject{ |line| line.start_with?(\"//\") }.map{ |line| line.chomp }\n# Reject blank lines\nlines = lines.reject{ |line| line.length == 0 }\n</code></pre>\n\n<p>Is there a more efficient or elegant way of doing it? Thanks.</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ajax", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "edited": false, "score": 0, "creation_date": 1509584851, "post_id": 47065662, "comment_id": 81080298, "body": "I get <code>NoMethodError: super: no superclass method </code>xhr&#39; for ...`. Bit weird?"}, {"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "reply_to_user": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "edited": false, "score": 0, "creation_date": 1510241621, "post_id": 47065662, "comment_id": 81360179, "body": "@CD-RUM Found that <code>xhr</code> is deprecated in rails 5 so <code>xhr: true</code> option is the way to go. Updated my answer"}, {"owner": {"reputation": 1127, "user_id": 399940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52fbb830df79b0280d8d45826c202d5f?s=128&d=identicon&r=PG", "display_name": "emptywalls", "link": "https://stackoverflow.com/users/399940/emptywalls"}, "edited": false, "score": 0, "creation_date": 1562790729, "post_id": 47065662, "comment_id": 100492464, "body": "New syntax for Rails 5! Thank you!"}], "tags": [], "owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "is_accepted": true, "score": 9, "last_activity_date": 1510241493, "last_edit_date": 1510241493, "creation_date": 1509582156, "answer_id": 47065662, "question_id": 47064424, "link": "https://stackoverflow.com/questions/47064424/testing-ajax-with-rspec-this-code-works-but-the-spec-cant-find-the-route/47065662#47065662", "title": "Testing AJAX with Rspec: this code works but the spec can&#39;t find the route", "body": "<p>Was getting the same error in rails 4 xhr specs. This format works for me:</p>\n\n<pre><code>xhr :post, :update_quantity, id: cart.id, order_id: cart.orders.first.id, quantity: 50\n</code></pre>\n\n<p>Looks like you have rails 5 app so try this one:</p>\n\n<pre><code>post :update_quantity, xhr: true, params: {\n  id: cart.id,\n  order_id: cart.orders.first.id,\n  quantity: 50\n}\n</code></pre>\n\n<p>Note that <code>xhr</code> method is deprecated in rails 5 so use option <code>xhr: true</code></p>\n"}], "owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 891, "favorite_count": 0, "accepted_answer_id": 47065662, "answer_count": 1, "score": 0, "last_activity_date": 1510241493, "creation_date": 1509573900, "last_edit_date": 1509574159, "question_id": 47064424, "link": "https://stackoverflow.com/questions/47064424/testing-ajax-with-rspec-this-code-works-but-the-spec-cant-find-the-route", "title": "Testing AJAX with Rspec: this code works but the spec can&#39;t find the route", "body": "<p>I have this Javascript in a page:</p>\n\n<pre><code>&lt;script type='text/javascript'&gt;\n  function update_price(order_id, quantity) {\n    $.ajax({\n      beforeSend: function(xhr) {\n        xhr.setRequestHeader(\n          'X-CSRF-Token', $('meta[name=\"csrf-token\"]').attr('content'));\n      },\n      url: \"/carts/\" + &lt;%= @cart.id %&gt; + \"/update_quantity\", #you are missing 's' here is this a typo?\n      type: \"POST\",\n      data: {\n        \"order_id\" : order_id,\n        \"quantity\" : quantity }\n    });\n  }\n&lt;/script&gt;\n</code></pre>\n\n<p>It works just fine for the user. The matching routes look like this:</p>\n\n<pre><code>resources :carts, only: %i[update destroy index] do\n  member do\n    match 'update_quantity', to: 'carts#update_quantity', via: %i[get post]\n  end\nend\n</code></pre>\n\n<p>My spec looks like this:</p>\n\n<pre><code>it 'updates the quantity' do\n  post \"/cart/#{cart.id}/update_quantity\", xhr: true, params: {\n    order_id: cart.orders.first.id,\n    quantity: 50\n  }\n  expect(response.status).to eq 200\nend\n</code></pre>\n\n<p>But I keep getting this error:</p>\n\n<pre><code>ActionController::UrlGenerationError:\n   No route matches {:action=&gt;\"/cart/2/update_quantity\", :controller=&gt;\"carts\", :order_id=&gt;1, :quantity=&gt;50}\n</code></pre>\n\n<p>In short, it works for the user but I can't get the spec to pass. What am I doing wrong?</p>\n"}, {"tags": ["c#", "ruby", "perl", "pdf", "pypdf2"], "comments": [{"owner": {"reputation": 77029, "user_id": 1729265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VMMeP.jpg?s=128&g=1", "display_name": "mkl", "link": "https://stackoverflow.com/users/1729265/mkl"}, "edited": false, "score": 0, "creation_date": 1509573700, "post_id": 47064033, "comment_id": 81076964, "body": "how do those partial documents differ? How had they been merged? In which programming language using which pdf library do you plan to implement your pdf splitter?"}, {"owner": {"reputation": 21, "user_id": 2221883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a28e45b3e1fbf27d8e59dd8b561cbd55?s=128&d=identicon&r=PG", "display_name": "Rasmus Riis", "link": "https://stackoverflow.com/users/2221883/rasmus-riis"}, "reply_to_user": {"reputation": 77029, "user_id": 1729265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VMMeP.jpg?s=128&g=1", "display_name": "mkl", "link": "https://stackoverflow.com/users/1729265/mkl"}, "edited": false, "score": 0, "creation_date": 1509574820, "post_id": 47064033, "comment_id": 81077389, "body": "They are made by varying products. A quick test showed BancTec? and Adobe. But they are images, text and more. Can&#39;t differentiate them that way. I would prefer to make the splitter in python and PyPDF2"}, {"owner": {"reputation": 3835, "user_id": 4254700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5225a3969314fb32ff3192e48c752c1?s=128&d=identicon&r=PG", "display_name": "joelgeraci", "link": "https://stackoverflow.com/users/4254700/joelgeraci"}, "edited": false, "score": 0, "creation_date": 1509579615, "post_id": 47064033, "comment_id": 81078880, "body": "If the cross-reference tables (xref) were never consolidated, it might be possible but again, it depends on how they were assembled. You could use the xref tables to basically undo the merge by stripping off the last merged file all the way back to the first file. If I could see an example PDF, I could tell for sure."}, {"owner": {"reputation": 77029, "user_id": 1729265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VMMeP.jpg?s=128&g=1", "display_name": "mkl", "link": "https://stackoverflow.com/users/1729265/mkl"}, "edited": false, "score": 0, "creation_date": 1509602321, "post_id": 47064033, "comment_id": 81084957, "body": "@Rasmus <i>&quot;I would prefer to make the splitter in python and PyPDF2&quot;</i> - please mention this in your question and tag it accordingly."}, {"owner": {"reputation": 21, "user_id": 2221883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a28e45b3e1fbf27d8e59dd8b561cbd55?s=128&d=identicon&r=PG", "display_name": "Rasmus Riis", "link": "https://stackoverflow.com/users/2221883/rasmus-riis"}, "reply_to_user": {"reputation": 77029, "user_id": 1729265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VMMeP.jpg?s=128&g=1", "display_name": "mkl", "link": "https://stackoverflow.com/users/1729265/mkl"}, "edited": false, "score": 0, "creation_date": 1509607941, "post_id": 47064033, "comment_id": 81087513, "body": "@mkl I have tagged them and revised the question"}, {"owner": {"reputation": 21, "user_id": 2221883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a28e45b3e1fbf27d8e59dd8b561cbd55?s=128&d=identicon&r=PG", "display_name": "Rasmus Riis", "link": "https://stackoverflow.com/users/2221883/rasmus-riis"}, "reply_to_user": {"reputation": 3835, "user_id": 4254700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5225a3969314fb32ff3192e48c752c1?s=128&d=identicon&r=PG", "display_name": "joelgeraci", "link": "https://stackoverflow.com/users/4254700/joelgeraci"}, "edited": false, "score": 0, "creation_date": 1509607994, "post_id": 47064033, "comment_id": 81087535, "body": "@joelgeraci I have an example document for you. Where should i send it to?"}, {"owner": {"reputation": 77029, "user_id": 1729265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VMMeP.jpg?s=128&g=1", "display_name": "mkl", "link": "https://stackoverflow.com/users/1729265/mkl"}, "edited": false, "score": 0, "creation_date": 1509614360, "post_id": 47064033, "comment_id": 81091114, "body": "If possible, share example documents not individually but to all readers of your question, e.g. by creating a public share with them in dropbox or google drive and posting the URL here."}, {"owner": {"reputation": 3835, "user_id": 4254700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5225a3969314fb32ff3192e48c752c1?s=128&d=identicon&r=PG", "display_name": "joelgeraci", "link": "https://stackoverflow.com/users/4254700/joelgeraci"}, "reply_to_user": {"reputation": 77029, "user_id": 1729265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VMMeP.jpg?s=128&g=1", "display_name": "mkl", "link": "https://stackoverflow.com/users/1729265/mkl"}, "edited": false, "score": 0, "creation_date": 1509635057, "post_id": 47064033, "comment_id": 81105617, "body": "As @mkl commented, any publicly addressable URL will be fine. It would also help to know if all of the PDFs were merged using the same application and in the same manner."}, {"owner": {"reputation": 21, "user_id": 2221883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a28e45b3e1fbf27d8e59dd8b561cbd55?s=128&d=identicon&r=PG", "display_name": "Rasmus Riis", "link": "https://stackoverflow.com/users/2221883/rasmus-riis"}, "reply_to_user": {"reputation": 3835, "user_id": 4254700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5225a3969314fb32ff3192e48c752c1?s=128&d=identicon&r=PG", "display_name": "joelgeraci", "link": "https://stackoverflow.com/users/4254700/joelgeraci"}, "edited": false, "score": 0, "creation_date": 1509656149, "post_id": 47064033, "comment_id": 81118220, "body": "@joelgeraci and mkl. The documents we work with are classified. But I have uploaded a similar document which is public. The state decided to &#39;digitize&#39; all the documents regarding properties, so they decided to scann all the documents and merge them into 1 huge pdf. It is up to the rest of us to seperate the documents when we need them. A case of digitalization gone wrong :-) But as such I cannot guarantee which program is used. But most seem to be made by BancTec..  I have uploaded a public document to my gdrive: <a href=\"https://drive.google.com/open?id=1k1yKTNsuGCF11u0DoQ8UtCKm2umaEPom\" rel=\"nofollow noreferrer\">drive.google.com/open?id=1k1yKTNsuGCF11u0DoQ8UtCKm2umaEPom</a>"}, {"owner": {"reputation": 3835, "user_id": 4254700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5225a3969314fb32ff3192e48c752c1?s=128&d=identicon&r=PG", "display_name": "joelgeraci", "link": "https://stackoverflow.com/users/4254700/joelgeraci"}, "edited": false, "score": 0, "creation_date": 1509658099, "post_id": 47064033, "comment_id": 81119186, "body": "Well... unfortunately, I&#39;m only seeing one cross-reference table. I&#39;m not seeing any metadata that you might be able to use in the images either. I&#39;m not sure if you&#39;ll ever be able to burst these into the separate files based on the content of the pages."}, {"owner": {"reputation": 21, "user_id": 2221883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a28e45b3e1fbf27d8e59dd8b561cbd55?s=128&d=identicon&r=PG", "display_name": "Rasmus Riis", "link": "https://stackoverflow.com/users/2221883/rasmus-riis"}, "edited": false, "score": 0, "creation_date": 1509682351, "post_id": 47064033, "comment_id": 81126251, "body": "Damn. I really hoped there would be a way. Thank you for trying!"}], "owner": {"reputation": 21, "user_id": 2221883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a28e45b3e1fbf27d8e59dd8b561cbd55?s=128&d=identicon&r=PG", "display_name": "Rasmus Riis", "link": "https://stackoverflow.com/users/2221883/rasmus-riis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1509607080, "creation_date": 1509572017, "last_edit_date": 1509607080, "question_id": 47064033, "link": "https://stackoverflow.com/questions/47064033/splitting-pdf-with-varying-page-lengths", "title": "Splitting pdf with varying page lengths", "body": "<p>I have a number of pdfs that are merged from various other pdfs of varying length.</p>\n\n<p>That gives a lot of problems when you have to examine the pdf to find out where to split it, open Adobe and then split the document up into the 10-20 different documents.</p>\n\n<p>Is there a way to detect where the pdfs have been merged and possibly split them automatically. Preferably in python using PyPDF2, but any language would do. I'm just interested in getting something that works. </p>\n"}, {"tags": ["ruby", "text"], "comments": [{"owner": {"reputation": 3305, "user_id": 356629, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f563718f19b5aab648973d6e38a9d8af?s=128&d=identicon&r=PG", "display_name": "kenny_k", "link": "https://stackoverflow.com/users/356629/kenny-k"}, "edited": false, "score": 3, "creation_date": 1509571693, "post_id": 47063925, "comment_id": 81076073, "body": "Hi, welcome to SO. Please show what you have already tried. Your question, as it currently is will probably not receive a good answer, and may be closed. Please <a href=\"https://stackoverflow.com/tour\">take the tour</a> and read <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask</a> and <a href=\"https://stackoverflow.com/help/mcve\">how to create a minimal, verifiable example</a> for better results using this site. Good luck!"}, {"owner": {"reputation": 49960, "user_id": 32453, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/bec38d63650c8912b6ba9b557fb953b9?s=128&d=identicon&r=PG", "display_name": "rogerdpack", "link": "https://stackoverflow.com/users/32453/rogerdpack"}, "edited": false, "score": 0, "creation_date": 1509571921, "post_id": 47063925, "comment_id": 81076173, "body": "You may be able to &quot;parse&quot; it as JSON first then search through that...GL!"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1509574685, "post_id": 47063925, "comment_id": 81077336, "body": "If that&#39;s well-formed JSON, which you can test <a href=\"https://jsonlint.com\" rel=\"nofollow noreferrer\">with a lint tool</a>, then you can parse it with <code>JSON.load</code>. The problem there is there&#39;s sequential documents, so you&#39;ll need to split on blank lines. This also has malformed quotes, so if those are present in the original you&#39;ll need to fix them first."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1509589268, "post_id": 47063925, "comment_id": 81081236, "body": "At least in software context, I think the term <i>sort</i> is not used for what you have in mind here. Sort means to change the order of things in a list. Rather, you seem to want to <i>filter</i> or <i>select</i> the sections."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8870687, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/26fcbfae50c14bea3b8bf3620b3b8647?s=128&d=identicon&r=PG&f=1", "display_name": "M. Hajar", "link": "https://stackoverflow.com/users/8870687/m-hajar"}, "edited": false, "score": 0, "creation_date": 1509585452, "post_id": 47064794, "comment_id": 81080445, "body": "Excuse me sir. I was wondering what are some useful ways that you learned how to code (Ruby)? I&#39;m a complete novice and I&#39;ve read that you liked to help people learn ruby."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 21, "user_id": 8870687, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/26fcbfae50c14bea3b8bf3620b3b8647?s=128&d=identicon&r=PG&f=1", "display_name": "M. Hajar", "link": "https://stackoverflow.com/users/8870687/m-hajar"}, "edited": false, "score": 0, "creation_date": 1509596301, "post_id": 47064794, "comment_id": 81083013, "body": "I always recommend the <a href=\"http://courses.rubylearning.org/catalog?new=true\" rel=\"nofollow noreferrer\">Core Ruby</a> course at Ruby Learning&quot;. There you will get help and feedback from human instructors."}, {"owner": {"reputation": 21, "user_id": 8870687, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/26fcbfae50c14bea3b8bf3620b3b8647?s=128&d=identicon&r=PG&f=1", "display_name": "M. Hajar", "link": "https://stackoverflow.com/users/8870687/m-hajar"}, "edited": false, "score": 0, "creation_date": 1509636381, "post_id": 47064794, "comment_id": 81106617, "body": "Thank you sir! One more question, what are your thoughts about Lynda?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 21, "user_id": 8870687, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/26fcbfae50c14bea3b8bf3620b3b8647?s=128&d=identicon&r=PG&f=1", "display_name": "M. Hajar", "link": "https://stackoverflow.com/users/8870687/m-hajar"}, "edited": false, "score": 0, "creation_date": 1509637757, "post_id": 47064794, "comment_id": 81107696, "body": "I don&#39;t know anything about Lynda."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1509595982, "last_edit_date": 1509595982, "creation_date": 1509576023, "answer_id": 47064794, "question_id": 47063925, "link": "https://stackoverflow.com/questions/47063925/filter-through-a-text-file/47064794#47064794", "title": "Filter through a text file", "body": "<p><strong>Code</strong></p>\n\n<pre><code>def retrieve_block(fname, summary_target)\n  arr = []\n  File.foreach(fname) do |line|\n    next if line.strip.empty? \n    arr &lt;&lt; line\n    next unless arr.size == 7\n    return arr.join if arr[3].match?(/\\\"summary\\\"=&gt;\\\"#{summary_target}\\\"/)\n    arr = []\n  end\nend\n</code></pre>\n\n<p><strong>Example</strong></p>\n\n<p>Let's first create a file.</p>\n\n<pre><code>text =&lt;&lt;_\n{\n  \"id\"=&gt;\"0000001\", \n  \"type\"=&gt;\"cashier\", \n  \"summary\"=&gt;\"Henock\", \n  \"self\"=&gt;\"https://google.com/accounts/0000001\", \n  \"html_url\"=&gt;\"https://google.com/accounts/0000001\"\n}\n\n{\n  \"id\"=&gt;\"0000003\", \n  \"type\"=&gt;\"cashier\", \n  \"summary\"=&gt;\"Mo\", \n  \"self\"=&gt;\"https://google.com/accounts/0000003\", \n  \"html_url\"=&gt;\"https://google.com/accounts/0000003\"\n}\n_\n</code></pre>\n\n<p>All of the keys and values represented in this string are surrounded with double-quotes. In the question however, many of these keys and values are surrounded by special characters that have a superficial appearance of a double quote. I have assumed that those characters would be converted to double quotes in a pre-processing step.</p>\n\n<pre><code>FName = \"test\"\nFile.write(FName, text)\n  #=&gt; 325\n\nputs retrieve_block(FName, \"Mo\")\n{\n  \"id\"=&gt;\"0000003\",\n  \"type\"=&gt;\"cashier\",\n  \"summary\"=&gt;\"Mo\",\n  \"self\"=&gt;\"https://google.com/accounts/0000003\",\n  \"html_url\"=&gt;\"https://google.com/accounts/0000003\"\n}\n</code></pre>\n\n<p>This should work because of the consistent format of the file.</p>\n\n<p>To return a hash, rather than a string, a slight modification is required.</p>\n\n<pre><code>def retrieve_block(fname, summary_target)\n  h = {}\n  File.foreach(fname) do |line|\n    line.strip!\n    next if line.empty? || line == '{'\n    if line == '}'\n      if h[\"summary\"] == summary_target\n        break h\n      else\n        h = {}\n      end\n    else\n      k, v = line.delete('\",').split(\"=&gt;\")\n      h[k] = v\n    end  \n  end\nend\n\nretrieve_block(FName, \"Mo\")\n  #=&gt; {\"id\"=&gt;\"0000003\",\n  #    \"type\"=&gt;\"cashier\",\n  #    \"summary\"=&gt;\"Mo\",\n  #    \"self\"=&gt;\"https://google.com/accounts/0000003\",\n  #    \"html_url\"=&gt;\"https://google.com/accounts/0000003\"}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8870687, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/26fcbfae50c14bea3b8bf3620b3b8647?s=128&d=identicon&r=PG&f=1", "display_name": "M. Hajar", "link": "https://stackoverflow.com/users/8870687/m-hajar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1509595982, "creation_date": 1509571567, "last_edit_date": 1509589135, "question_id": 47063925, "link": "https://stackoverflow.com/questions/47063925/filter-through-a-text-file", "title": "Filter through a text file", "body": "<p>I want to sort through a text file and leave only a certain section. I have this text in the text file:</p>\n\n<pre><code>{\n  \"id\"=&gt;\u201d0000001\u201d, \n  \"type\"=&gt;\u201dcashier\u201d, \n  \"summary\"=&gt;\u201dHenock\u201d, \n  \"self\"=&gt;\"https://google.com/accounts/0000001\u201d, \n  \"html_url\"=&gt;\"https://google.com/accounts/0000001\u201d\n}\n\n{\n  \"id\"=&gt;\u201d0000002\u201d, \n  \"type\"=&gt;\u201dcashier\u201d, \n  \"summary\"=&gt;\u201dVic\u201d, \n  \"self\"=&gt;\"https://google.com/accounts/0000002\u201d, \n  \"html_url\"=&gt;\"https://google.com/accounts/0000002\u201d\n}\n\n{\n  \"id\"=&gt;\u201d0000003\u201d, \n  \"type\"=&gt;\u201dcashier\u201d, \n  \"summary\"=&gt;\u201dMo\u201d, \n  \"self\"=&gt;\"https://google.com/accounts/0000003\u201d, \n  \"html_url\"=&gt;\"https://google.com/accounts/0000003\u201d\n}\n</code></pre>\n\n<p>How would I sort it so that only the information with person <code>\"Mo\"</code> is shown?</p>\n\n<p>This is what I tried:</p>\n\n<pre><code>somefile.readlines(\"filename.txt\").grep /Mo}/i\n</code></pre>\n\n<p>but it is useless.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ajax"], "answers": [{"tags": [], "owner": {"reputation": 536, "user_id": 8436554, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/d3XUa.jpg?s=128&g=1", "display_name": "Amr Adel", "link": "https://stackoverflow.com/users/8436554/amr-adel"}, "is_accepted": false, "score": 0, "last_activity_date": 1509571724, "creation_date": 1509571724, "answer_id": 47063960, "question_id": 47063479, "link": "https://stackoverflow.com/questions/47063479/ajax-post-to-external-database-from-rails-app/47063960#47063960", "title": "ajax post to external database from Rails app", "body": "<p>For the problem of which table to add to your DB server you could specify this in hidden fields in your form and every fieled should have a name, When you say <code>$form.serialize();</code> it turns it to something like <code>FirstName=Amr&amp;SecondName=Adel</code> and so on where <code>FirstName</code> is the name of the field and <code>Amr</code> is the value of the field, Then you put this serialization into a form of JSON format like <code>{\"data\": $form.serialize()}</code> and add <code>dataType: \"JSON\"</code> to your post request, In your <code>Insert</code> function you can get it through <code>params[:data]</code> and split it with<code>&amp;</code> to be something like <code>['FirstName=Amr','SecondName=Adel']</code> and every element split it with <code>=</code> so you can get something like this <code>[['FirstName','Amr'], ['SecondName','Adel']]</code>.</p>\n\n<p>Hope this helps.</p>\n"}, {"tags": [], "owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "is_accepted": true, "score": 1, "last_activity_date": 1509573173, "last_edit_date": 1509573173, "creation_date": 1509571757, "answer_id": 47063971, "question_id": 47063479, "link": "https://stackoverflow.com/questions/47063479/ajax-post-to-external-database-from-rails-app/47063971#47063971", "title": "ajax post to external database from Rails app", "body": "<p>Rails will <a href=\"http://guides.rubyonrails.org/action_controller_overview.html#hash-and-array-parameters\" rel=\"nofollow noreferrer\">format the data for you</a>. In controller like this:</p>\n\n<pre><code>{'Report_Name': 'some name', 'Report_link': 'www.example.com'}\n</code></pre>\n\n<p>and will be accessible via the <code>params</code>.</p>\n\n<p>Your job is now to format the data correctly for the manual execution of the SQL query.</p>\n\n<pre><code>insert_values = \"('%s', '%s')\" % params['Report_Name'], params['Report_link']\n@ipinsert=Ipdw.connection.execute(\"insert into [DB_Test02].[dbo].[My_Table] (Report_Name,Report_Link) values #{insert_values}\")\n</code></pre>\n"}], "owner": {"reputation": 635, "user_id": 5071216, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-LjxRu3CIx6s/AAAAAAAAAAI/AAAAAAAAABY/D4C4_4oGl2I/photo.jpg?sz=128", "display_name": "Jordan Davis", "link": "https://stackoverflow.com/users/5071216/jordan-davis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 47063971, "answer_count": 2, "score": 2, "last_activity_date": 1509573173, "creation_date": 1509569504, "question_id": 47063479, "link": "https://stackoverflow.com/questions/47063479/ajax-post-to-external-database-from-rails-app", "title": "ajax post to external database from Rails app", "body": "<p>I am trying to insert data from a form built with Ruby on Rails to my SQL Server database. I have connected my database correctly and can pull data from it. I am now trying to post back to it. I am needing help with figuring out how to get the data from the form into the correct columns in my table in the database. </p>\n\n<p>My ajax:</p>\n\n<pre><code>  &lt;script&gt;\n$('#Favorites').on('submit',function(event){\n\u00a0\u00a0\u00a0\u00a0var $form = $(this),\n\u00a0\u00a0\u00a0\u00a0data = $form.serialize();\n\u00a0\u00a0\u00a0\u00a0var url = 'http://localhost:3000/welcome/insert';\n\u00a0\u00a0\u00a0\u00a0$.ajax({\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0type: 'POST',\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0url: url,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0data: data,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0success: function(){\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\n            alert('Your form has been successfully submitted!');\n            document.getElementById('Favorites').reset();\n            window.location.reload();\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0},\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0fail:function(){\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0alert('something went wrong...try again');\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0});\n return false;\n });\n\n&lt;/script&gt;\n</code></pre>\n\n<p>My controller function:</p>\n\n<pre><code>def insert\n    @ipinsert=Ipdw.connection.execute(\"insert into [DB_Test02].[dbo].[My_Table] (Report_Name,Report_Link)\n  values ('I am cool','www.google.com')\")\n  end\n</code></pre>\n\n<p>Currently I just have a dummy insert statement here to make sure that I can insert into the tables and I can. I just need to know how to break out the form values sent to the controller and how to tell Rails what table and columns to put those values into.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "activerecord", "rake"], "comments": [{"owner": {"reputation": 906, "user_id": 7933325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4181aecdacd635102e337da145eafe9?s=128&d=identicon&r=PG", "display_name": "Tom Copeland", "link": "https://stackoverflow.com/users/7933325/tom-copeland"}, "edited": false, "score": 0, "creation_date": 1510019902, "post_id": 47063062, "comment_id": 81247595, "body": "Are you asking for advice on how to write a migration that adds a constraint that would prevent bad data from being inserted?"}], "owner": {"reputation": 269, "user_id": 5540621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b9595fea10a08cb575f402ae9ba274e?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael Oliveira", "link": "https://stackoverflow.com/users/5540621/rafael-oliveira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1509572055, "creation_date": 1509567768, "last_edit_date": 1509572055, "question_id": 47063062, "link": "https://stackoverflow.com/questions/47063062/migration-code-to-prevent-date-overlapping-in-rails", "title": "Migration code to prevent date overlapping in Rails", "body": "<p>I have a Ruby on Rails project, in which I need to ensure that dates (start_date, end_date) for an <strong>Period</strong> class do not overlap (partially or fully contained) between periods. </p>\n\n<p>An event class has many <strong>PeriodDays</strong> associated, which already ensure no repeating days can be added to the same Period. I've seen that this can be done in pure PostgreSQL, but is there a way to write an ActiveRecord Migration so that two periods do not overlap? </p>\n\n<p><strong>Additional Info</strong>: In this case, a Period's start and end dates are always inside the same month.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "instagram", "omniauth"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7159179"}, "edited": false, "score": 0, "creation_date": 1509917062, "post_id": 47064639, "comment_id": 81203694, "body": "Sir, I&#39;m afraid &#39;key1&#39;, &#39;key2&#39; and &#39;key3&#39; prevent the cookie from being saved"}], "tags": [], "owner": {"reputation": 5962, "user_id": 115159, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ac02a81e50f368f6d5c7a14b99ce2469?s=128&d=identicon&r=PG", "display_name": "Dharam Gollapudi", "link": "https://stackoverflow.com/users/115159/dharam-gollapudi"}, "is_accepted": false, "score": 1, "last_activity_date": 1509575141, "creation_date": 1509575141, "answer_id": 47064639, "question_id": 47063005, "link": "https://stackoverflow.com/questions/47063005/keep-an-instance-variable-on-a-latter-iteration-on-rails-5/47064639#47064639", "title": "Keep an instance variable on a latter iteration on Rails 5", "body": "<p>One way to do it is make use of <code>cookies</code> in storing the info that is needed and retrieving it for later use, as follows:</p>\n\n<pre><code>class SomeOAuthController &lt; Devise::OmniauthCallbacksController\n    def instagram \n        @user_ig = User.from_omniauth_instagram(request.env[\"omniauth.auth\"])\n\n        if @user_ig.provider != :instagram.to_s\n            redirect_to root_path\n        else\n            # store the values that you would need in the subsequent request\n            cookies[:instagram] = {\n                key1: @user_ig.value1,\n                key2: @user_ig.value2,\n                key3: @user_ig.value3,\n            }\n        end\n    end\n\n    def create_instagram_user\n        @user_ig = {}\n        @user_ig['key1'] = cookies[:instagram][:key1]\n        @user_ig['key2'] = cookies[:instagram][:key2]\n        @user_ig['key3'] = cookies[:instagram][:key3]\n        @user_ig['adult'] = params[:user][:adult]\n        @user_ig['email'] = params[:user][:email]\n        # create instagram user with the @user_ig info\n        cookies.delete(:instagram) # some housekeeping\n    end\nend\n</code></pre>\n\n<p>In place of <code>cookies[:instagram]</code>, you could also use <code>cookies.signed[:instagram]</code> or <code>cookies.encrypted[:instagram]</code> to be more secure.</p>\n\n<p>Review <a href=\"http://api.rubyonrails.org/v5.1/classes/ActionDispatch/Cookies.html\" rel=\"nofollow noreferrer\">Cookies</a> for more info on use the use of <code>cookies</code>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7159179"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1509575141, "creation_date": 1509567473, "question_id": 47063005, "link": "https://stackoverflow.com/questions/47063005/keep-an-instance-variable-on-a-latter-iteration-on-rails-5", "title": "Keep an instance variable on a latter iteration on Rails 5", "body": "<p>I have a problem which I haven't been able to find the answer for quite some time...</p>\n\n<p>I'm implementing Instagram login using the omniauth gem, however there's a limit on the info that instagram provides such as the email or the age of a user which I particularly need for this web app.</p>\n\n<p>So what I'm trying to do is to get all possible data from instagram and then redirect the user to another view where I can have provided both age and email.</p>\n\n<p>By doing so I'm using two controllers which I need to share the user's data, however when the second controller method needs to use this variable's contents, the var is set to Nil and there's no method I can use to rebuild the data as it hasn't been actually saved to the database.</p>\n\n<p>Here's some code:</p>\n\n<pre><code>class SomeOAuthController &lt; Devise::OmniauthCallbacksController\n\n...\n\n#This controller retrieves the oauth data and has a view to retrieve all the extra data.\ndef instagram \n   @user_ig = User.from_omniauth_instagram(request.env[\"omniauth.auth\"])\n\n  if @user_ig.provider != :instagram.to_s\n    redirect_to root_path\n  end\n\nend\n\n#M\u00e9todo para completar el registro de instagram\ndef create_instagram_user\n\n  p 'entro a create_instagram_user'\n  p @user_ig\n  #@user_ig.adult = params[:user][:adult]\n  #@user_ig.email = params[:user][:email]\n\nend\n\n...\n</code></pre>\n\n<p>Here is the view for the instagram method:</p>\n\n<pre><code>&lt;%= form_for(@user_ig, url: {action: :create_instagram_user}) do |f| %&gt;\n\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :email %&gt;&lt;br /&gt;\n    &lt;%= f.email_field :email, autofocus: true %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :adult %&gt;\n    &lt;%= f.check_box :adult %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit t('bulula.session.sign_up') %&gt;\n  &lt;/div&gt;\n</code></pre>\n\n   \n\n<p>So, wrapping it up:</p>\n\n<p><strong>Problem</strong></p>\n\n<p>I need to keep not Nil the variable filled in the <code>instagram</code> method for it to be used in the <code>create_instagram_user</code> method which will be called by submitting the <code>instagram</code> view button without saving any content to the database.</p>\n\n<p><strong>Workaround solution</strong></p>\n\n<p>In case I can't find any solution here I was hoping to create a temp database table where I can save the incomplete content retrieved from instagram and move it along with the data the user provides from the form and create a new user.</p>\n\n<p>Nonetheless this seems a bit tricky and I'm not fully comfortable with it.</p>\n\n<p>Thanks a lot for your help!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bash", "macos", "google-chrome"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1509568701, "post_id": 47062669, "comment_id": 81074701, "body": "using `` isn&#39;t running in your shell, it&#39;s running in a subshell via <code>sh</code>."}, {"owner": {"reputation": 455, "user_id": 1489498, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/456ae9493608b49dcca6d5b5dc6bc752?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/1489498/john"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1509572565, "post_id": 47062669, "comment_id": 81076495, "body": "<code>system %(source ~&#47;.bash_profile \\n chrome --version)</code> works, is there a way to include aliases in bash_profile in the rails shell commands?"}, {"owner": {"reputation": 95060, "user_id": 89817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df253c3b6533949ea94f31f328f3e769?s=128&d=identicon&r=PG", "display_name": "Gordon Davisson", "link": "https://stackoverflow.com/users/89817/gordon-davisson"}, "edited": false, "score": 1, "creation_date": 1509586106, "post_id": 47062669, "comment_id": 81080576, "body": "Shell aliases are really intended for interactive use; they&#39;re almost certainly the wrong way to do whatever you&#39;re actually trying to accomplish. Please read about the <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY Problem</a>, and tell us what you are actually trying to do."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8680478"}, "is_accepted": false, "score": 1, "last_activity_date": 1510115152, "last_edit_date": 1510115152, "creation_date": 1509589033, "answer_id": 47066531, "question_id": 47062669, "link": "https://stackoverflow.com/questions/47062669/mac-osx-running-application-in-bash-alias-not-working/47066531#47066531", "title": "Mac OSX Running Application in bash, alias not working", "body": "<blockquote>\n  <p><code>which chrome</code> produces no output, and that seems odd.</p>\n</blockquote>\n\n<p><code>which</code> is an external command which know notihng about Bash's aliases. You can use Bash's <code>type</code> command:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code># type chrome\n</code></pre>\n"}], "owner": {"reputation": 455, "user_id": 1489498, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/456ae9493608b49dcca6d5b5dc6bc752?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/1489498/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1510115152, "creation_date": 1509566062, "last_edit_date": 1509644795, "question_id": 47062669, "link": "https://stackoverflow.com/questions/47062669/mac-osx-running-application-in-bash-alias-not-working", "title": "Mac OSX Running Application in bash, alias not working", "body": "<p>I'm trying to invoke headless Chrome in a rake task. It works in terminal, but doesn't in the rake task.</p>\n\n<p>I've installed Chrome on Mac OS X, and created an alias to the application: <code>alias chrome=\"/Applications/Google\\ Chrome.app/Contents/MacOS/Google\\ Chrome\"</code></p>\n\n<p>The command <code>chrome --version</code> produces the output: <code>Google Chrome 61.0.3163.100</code></p>\n\n<p><code>which chrome</code> produces no output, and that seems odd. <code>chrome --headless --disabled-gpu</code> opens and closes a chrome session, as expected.</p>\n\n<p>I want to run headless chrome in a Rails environment, and conducting rake tests:</p>\n\n<pre><code>namespace :chrome do\n  task test_versions: :environment do\n    p `chrome --version`\n  end\nend\n</code></pre>\n\n<p>Then run the rake task: <code>rake chrome:test_versions</code> resulting in:\n<code>/User/username/.rvm/gems/ruby-2.4.2/bin/rake: No such file or directory - chrome</code></p>\n\n<p>EDIT: After a few comments, I'm not addressing the real problem. I want to use rake tasks to invoke chrome headless in Mac.</p>\n"}, {"tags": ["ruby", "cucumber", "bundle", "bundler"], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 2272766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdd1f61353d1abcee5cc3a3c8e4cb62c?s=128&d=identicon&r=PG", "display_name": "DanVoges", "link": "https://stackoverflow.com/users/2272766/danvoges"}, "edited": false, "score": 0, "creation_date": 1509647386, "post_id": 47065535, "comment_id": 81113782, "body": "Thanks for the answer. Why, though? Shouldn&#39;t specifying my ruby version automatically determine which sub-dependency version I need?"}], "tags": [], "owner": {"reputation": 3257, "user_id": 4341733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b1793f226cb3189da8bc9c6264d72b7?s=128&d=identicon&r=PG", "display_name": "diabolist", "link": "https://stackoverflow.com/users/4341733/diabolist"}, "is_accepted": false, "score": 0, "last_activity_date": 1509581227, "creation_date": 1509581227, "answer_id": 47065535, "question_id": 47062488, "link": "https://stackoverflow.com/questions/47062488/how-to-make-bundler-respect-ruby-version-for-sub-dependencies/47065535#47065535", "title": "How to make bundler respect Ruby version for sub-dependencies?", "body": "<p>You are going to need to specify a much older version of nokogiri to get this to work. You may have to specify older versions of capybara or xpath as well. Try putting in your Gemfile</p>\n\n<p><code>gem 'nokogiri', '1.6.8'</code></p>\n\n<p>and work from there.</p>\n"}], "owner": {"reputation": 9, "user_id": 2272766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdd1f61353d1abcee5cc3a3c8e4cb62c?s=128&d=identicon&r=PG", "display_name": "DanVoges", "link": "https://stackoverflow.com/users/2272766/danvoges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1509581227, "creation_date": 1509565289, "question_id": 47062488, "link": "https://stackoverflow.com/questions/47062488/how-to-make-bundler-respect-ruby-version-for-sub-dependencies", "title": "How to make bundler respect Ruby version for sub-dependencies?", "body": "<p>Ruby version: 1.9.3</p>\n\n<p>Gemfile:</p>\n\n<pre><code>   ruby '1.9.3'\n   source 'http://rubygems.org'\n   gem 'site_prism', '2.6'\n</code></pre>\n\n<p>Running \"bundle install\" fails with:</p>\n\n<pre><code>Gem::InstallError: nokogiri requires Ruby version &lt; 2.5, &gt;= 2.2.\nAn error occurred while installing nokogiri (1.8.1), and Bundler cannot\ncontinue.\nMake sure that `gem install nokogiri -v '1.8.1'` succeeds before bundling.\n\nIn Gemfile:\n site_prism was resolved to 2.6, which depends on\n  capybara was resolved to 2.15.4, which depends on\n   xpath was resolved to 2.1.0, which depends on\n    nokogiri\n</code></pre>\n\n<p>nokogiri 1.8.1 is incompatible with Ruby 1.9.3. </p>\n\n<p><strong>Why does bundle try to install a gem that isn't compatible with my current Ruby version?</strong></p>\n\n<p>Things I've tried: </p>\n\n<ul>\n<li>Different bundler version (1.12.5, 1.15.4, 1.16.0)</li>\n<li>Specify \"ruby '1.9.3' in Gemfile\"</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1509564061, "post_id": 47062046, "comment_id": 81072229, "body": "You&#39;re almost there, just add the two ids you&#39;ll need to refer to that specific category: <code>&lt;%= link_to &#39;Show&#39;, [location_id, category_id] %&gt;</code>. Hope that helps!"}], "answers": [{"tags": [], "owner": {"reputation": 16234, "user_id": 2202702, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lTGWe.jpg?s=128&g=1", "display_name": "Arslan Ali", "link": "https://stackoverflow.com/users/2202702/arslan-ali"}, "is_accepted": false, "score": 1, "last_activity_date": 1509563689, "creation_date": 1509563689, "answer_id": 47062088, "question_id": 47062046, "link": "https://stackoverflow.com/questions/47062046/rails-5-nested-resources-urls-with-has-many-through-association/47062088#47062088", "title": "Rails 5 Nested Resources Urls with Has-Many Through Association", "body": "<pre><code>location_category_path  GET /locations/:location_id/categories/:id(.:format)    \n</code></pre>\n\n<p>As you can see here, the route: <code>location_category_path</code> required two things: <code>:location_id</code> &amp; <code>:id</code>(the <code>id</code> of category you want to refer to).</p>\n\n<p>In your case, you are only specifying one, and not the other. You also need to specify <code>:location_id</code>.</p>\n\n<p>There is a shorter way as well to write this URL: <code>[location_id, category_id]</code>. Just write an array with both ids starting with <code>location_id</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 2525, "user_id": 3200391, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/dc8c798b0aaf54577e388f7bc177093c?s=128&d=identicon&r=PG", "display_name": "Charles Smith", "link": "https://stackoverflow.com/users/3200391/charles-smith"}, "edited": false, "score": 0, "creation_date": 1509564798, "post_id": 47062137, "comment_id": 81072635, "body": "I added the array as above and received the error <code>undefined local variable or method </code>location_id&#39; ...` I then formatted the link like <code>&lt;%= link_to &#39;Show&#39;, location_category_path(location_id: category.location.id, id: category.category_id) %&gt;</code> and received error <code>undefined method </code>location&#39; for #&lt;Category:0x007fd1eb9ef128&gt;`"}, {"owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "reply_to_user": {"reputation": 2525, "user_id": 3200391, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/dc8c798b0aaf54577e388f7bc177093c?s=128&d=identicon&r=PG", "display_name": "Charles Smith", "link": "https://stackoverflow.com/users/3200391/charles-smith"}, "edited": false, "score": 0, "creation_date": 1509565083, "post_id": 47062137, "comment_id": 81072804, "body": "Location_id and category_id are just placeholders here. What I\u2019m trying to say is that you need to actually add the location Id and category id in the array. You get what I\u2019m saying?"}], "tags": [], "owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "is_accepted": true, "score": 1, "last_activity_date": 1509565418, "last_edit_date": 1509565418, "creation_date": 1509563891, "answer_id": 47062137, "question_id": 47062046, "link": "https://stackoverflow.com/questions/47062046/rails-5-nested-resources-urls-with-has-many-through-association/47062137#47062137", "title": "Rails 5 Nested Resources Urls with Has-Many Through Association", "body": "<p>For the route:</p>\n\n<pre><code>location_category_path  GET /locations/:location_id/categories/:id(.:format)    \n</code></pre>\n\n<p>You need several things, the location id object and category id object:</p>\n\n<pre><code>&lt;!-- /locations/:location_id/categories/:id --&gt;\n&lt;%= link_to 'Show', [{location_id}, {category_id}] %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1509564352, "post_id": 47062196, "comment_id": 81072395, "body": "Your assumption is wrong, please read the question (<code>has_many :locations</code>). Therefore your solutions wouldn&#39;t work. You&#39;d get an error actually:  <code>undefined method id for &lt;ActiveRecord::Associations::CollectionProxy []&gt;</code>"}, {"owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 1, "creation_date": 1509564726, "post_id": 47062196, "comment_id": 81072606, "body": "No worries :) happy coding!"}], "tags": [], "owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "is_accepted": false, "score": -1, "last_activity_date": 1509565058, "last_edit_date": 1509565058, "creation_date": 1509564152, "answer_id": 47062196, "question_id": 47062046, "link": "https://stackoverflow.com/questions/47062046/rails-5-nested-resources-urls-with-has-many-through-association/47062196#47062196", "title": "Rails 5 Nested Resources Urls with Has-Many Through Association", "body": "<p>Just to add to Arslan' answer.</p>\n\n<p>You'll probably need to set <code>@location</code> in your controller if you don't have yet.</p>\n\n<p><strong>app/controllers/categories_controller.rb</strong></p>\n\n<pre><code>class CategoriesController &lt; ApplicationController\n  def index\n    @location = # your code here\n  end\nend\n</code></pre>\n\n<p><strong>app/views/categories/index.html.erb</strong></p>\n\n<pre><code>&lt;% @categories.each do |category| %&gt;\n   &lt;tr&gt;\n     &lt;td&gt;&lt;%= category.name %&gt;&lt;/td&gt;\n     &lt;td&gt;&lt;%= link_to 'Show', location_category_path(@location.id, category.id) %&gt;&lt;/td&gt;\n     &lt;td&gt;&lt;%= link_to 'Edit', edit_location_category_path(@location.id, category.id) %&gt;&lt;/td&gt;\n     &lt;td&gt;&lt;%= link_to 'Destroy', location_categories_path(@location.id, category.id), method: :delete, data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;\n   &lt;/tr&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>For routes URL parameters, you can use either:</p>\n\n<pre><code>location_category_path(@location.id, category.id)\n</code></pre>\n\n<p>Which follows the order of your routes (which is <code>:location_id</code> then <code>:id</code>) when you do <code>bundle exec rake routes</code>, or you can also be specific like the following:</p>\n\n<pre><code>location_category_path(location_id: @location.id, id: category.id)\n</code></pre>\n"}], "owner": {"reputation": 2525, "user_id": 3200391, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/dc8c798b0aaf54577e388f7bc177093c?s=128&d=identicon&r=PG", "display_name": "Charles Smith", "link": "https://stackoverflow.com/users/3200391/charles-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 310, "favorite_count": 0, "accepted_answer_id": 47062137, "answer_count": 3, "score": 0, "last_activity_date": 1509565418, "creation_date": 1509563513, "last_edit_date": 1509564914, "question_id": 47062046, "link": "https://stackoverflow.com/questions/47062046/rails-5-nested-resources-urls-with-has-many-through-association", "title": "Rails 5 Nested Resources Urls with Has-Many Through Association", "body": "<p>I've created a small test app utilizing the Has-Many Through Association method but I can seem to get <code>link_to</code> to work with within my nested routes. </p>\n\n<p><strong>error message</strong> </p>\n\n<pre><code>No route matches {:action=&gt;\"show\", :controller=&gt;\"categories\", :location_id=&gt;#&lt;Category id: 1, name: \"parties\", created_at: \"2017-11-01 17:40:25\", updated_at: \"2017-11-01 17:40:25\"&gt;}, missing required keys: [:id]\n</code></pre>\n\n<p><strong>location.rb</strong></p>\n\n<pre><code>class Location &lt; ApplicationRecord\n  belongs_to :product\n  belongs_to :category\nend\n</code></pre>\n\n<p><strong>category.rb</strong></p>\n\n<pre><code>class Category &lt; ApplicationRecord\n  has_many :locations\n  has_many :products, through: :locations\nend\n</code></pre>\n\n<p><strong>product.rb</strong></p>\n\n<pre><code>class Product &lt; ApplicationRecord\n  has_many :locations\n  has_many :categories, through: :locations\nend\n</code></pre>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n  resources :locations do\n    resources :categories do\n      resources :products\n    end\n  end\n  root :to =&gt; 'locations#index'\nend\n</code></pre>\n\n<p><strong>categories/index.html</strong></p>\n\n<pre><code>...\n&lt;% @categories.each do |category| %&gt;\n   &lt;tr&gt;\n     &lt;td&gt;&lt;%= category.name %&gt;&lt;/td&gt;\n     &lt;td&gt;&lt;%= link_to 'Show', location_category_path(category) %&gt;&lt;/td&gt;\n     &lt;td&gt;&lt;%= link_to 'Edit', edit_location_category_path(category) %&gt;&lt;/td&gt;\n     &lt;td&gt;&lt;%= link_to 'Destroy', location_categories_path(category), method: :delete, data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;\n   &lt;/tr&gt;\n&lt;% end %&gt;\n...\n</code></pre>\n\n<p><strong>127.0.0.1:3000/rails/info/routes</strong></p>\n\n<pre><code>location_category_products_path GET /locations/:location_id/categories/:category_id/products(.:format)  \nproducts#index\n\nPOST    /locations/:location_id/categories/:category_id/products(.:format)  \nproducts#create\n\nnew_location_category_product_path  GET /locations/:location_id/categories/:category_id/products/new(.:format)  \nproducts#new\n\nedit_location_category_product_path GET /locations/:location_id/categories/:category_id/products/:id/edit(.:format) \nproducts#edit\n\nlocation_category_product_path  GET /locations/:location_id/categories/:category_id/products/:id(.:format)  \nproducts#show\n\nPATCH   /locations/:location_id/categories/:category_id/products/:id(.:format)  \nproducts#update\n\nPUT /locations/:location_id/categories/:category_id/products/:id(.:format)  \nproducts#update\n\nDELETE  /locations/:location_id/categories/:category_id/products/:id(.:format)  \nproducts#destroy\n\nlocation_categories_path    GET /locations/:location_id/categories(.:format)    \ncategories#index\n\nPOST    /locations/:location_id/categories(.:format)    \ncategories#create\n\nnew_location_category_path  GET /locations/:location_id/categories/new(.:format)    \ncategories#new\n\nedit_location_category_path GET /locations/:location_id/categories/:id/edit(.:format)   \ncategories#edit\n\nlocation_category_path  GET /locations/:location_id/categories/:id(.:format)    \ncategories#show\n\nPATCH   /locations/:location_id/categories/:id(.:format)    \ncategories#update\n\nPUT /locations/:location_id/categories/:id(.:format)    \ncategories#update\n\nDELETE  /locations/:location_id/categories/:id(.:format)    \ncategories#destroy\n\nlocations_path  GET /locations(.:format)    \nlocations#index\n\nPOST    /locations(.:format)    \nlocations#create\n\nnew_location_path   GET /locations/new(.:format)    \nlocations#new\n\nedit_location_path  GET /locations/:id/edit(.:format)   \nlocations#edit\n\nlocation_path   GET /locations/:id(.:format)    \nlocations#show\n\nPATCH   /locations/:id(.:format)    \nlocations#update\n\nPUT /locations/:id(.:format)    \nlocations#update\n\nDELETE  /locations/:id(.:format)    \nlocations#destroy\n\nroot_path   GET /   \nlocations#index\n</code></pre>\n"}, {"tags": ["ruby", "amazon-web-services", "ssl", "certificate"], "answers": [{"comments": [{"owner": {"reputation": 4660, "user_id": 4111447, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/81mmi.png?s=128&g=1", "display_name": "Tomer Shemesh", "link": "https://stackoverflow.com/users/4111447/tomer-shemesh"}, "edited": false, "score": 0, "creation_date": 1509625656, "post_id": 47066987, "comment_id": 81098835, "body": "i dont think this is what im looking for. in my example i am using my own Certificate Authority to sign it. but in your example i dont see anywhere i would do that"}], "tags": [], "owner": {"reputation": 43265, "user_id": 8016720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXsod.png?s=128&g=1", "display_name": "John Hanley", "link": "https://stackoverflow.com/users/8016720/john-hanley"}, "is_accepted": false, "score": 1, "last_activity_date": 1509592316, "creation_date": 1509592316, "answer_id": 47066987, "question_id": 47061785, "link": "https://stackoverflow.com/questions/47061785/how-to-generate-csr-and-crt-files-using-openssl-in-ruby/47066987#47066987", "title": "How to generate csr and crt files using openssl in ruby", "body": "<p>Here is an example to generate a self signed certificate.</p>\n\n<pre><code>require 'rubygems'\nrequire 'openssl'\n\nkey = OpenSSL::PKey::RSA.new(1024)\npublic_key = key.public_key\n\nsubject = \"/C=BE/O=Test/OU=Test/CN=Test\"\n\ncert = OpenSSL::X509::Certificate.new\ncert.subject = cert.issuer = OpenSSL::X509::Name.parse(subject)\ncert.not_before = Time.now\ncert.not_after = Time.now + 365 * 24 * 60 * 60\ncert.public_key = public_key\ncert.serial = 0x0\ncert.version = 2\n\nef = OpenSSL::X509::ExtensionFactory.new\nef.subject_certificate = cert\nef.issuer_certificate = cert\ncert.extensions = [\n  ef.create_extension(\"basicConstraints\",\"CA:TRUE\", true),\n  ef.create_extension(\"subjectKeyIdentifier\", \"hash\"),\n  # ef.create_extension(\"keyUsage\", \"cRLSign,keyCertSign\", true),\n]\ncert.add_extension ef.create_extension(\"authorityKeyIdentifier\",\n                                       \"keyid:always,issuer:always\")\n\ncert.sign key, OpenSSL::Digest::SHA1.new\n\nputs cert.to_pem\n</code></pre>\n\n<p><a href=\"https://gist.github.com/nickyp/886884\" rel=\"nofollow noreferrer\">Source for Example</a></p>\n"}, {"tags": [], "owner": {"reputation": 4660, "user_id": 4111447, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/81mmi.png?s=128&g=1", "display_name": "Tomer Shemesh", "link": "https://stackoverflow.com/users/4111447/tomer-shemesh"}, "is_accepted": true, "score": 0, "last_activity_date": 1509901411, "creation_date": 1509901411, "answer_id": 47124226, "question_id": 47061785, "link": "https://stackoverflow.com/questions/47061785/how-to-generate-csr-and-crt-files-using-openssl-in-ruby/47124226#47124226", "title": "How to generate csr and crt files using openssl in ruby", "body": "<p>was able to eventually figure it out using this rdoc example\n<a href=\"http://ruby-doc.org/stdlib-2.0.0/libdoc/openssl/rdoc/OpenSSL/X509/Certificate.html#method-c-new\" rel=\"nofollow noreferrer\">http://ruby-doc.org/stdlib-2.0.0/libdoc/openssl/rdoc/OpenSSL/X509/Certificate.html#method-c-new</a></p>\n"}], "owner": {"reputation": 4660, "user_id": 4111447, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/81mmi.png?s=128&g=1", "display_name": "Tomer Shemesh", "link": "https://stackoverflow.com/users/4111447/tomer-shemesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 545, "favorite_count": 0, "accepted_answer_id": 47124226, "answer_count": 2, "score": 2, "last_activity_date": 1509901411, "creation_date": 1509562536, "question_id": 47061785, "link": "https://stackoverflow.com/questions/47061785/how-to-generate-csr-and-crt-files-using-openssl-in-ruby", "title": "How to generate csr and crt files using openssl in ruby", "body": "<p>So i'm using AWS Iot and have a server running ruby on rails in the backend. i need to generate some certs for the client and the example on the AWS website only provides a way to do it using the openssl command line. If possible i would like to use the open ssl library in ruby to do this to avoid making ruby run commands in the terminal which may cause issues.<br>\nThese are the commands i want to replicate using ruby   </p>\n\n<pre><code>openssl genrsa -out deviceCert.key 2048    \n\nopenssl req -new -key deviceCert.key -out deviceCert.csr    \n\nopenssl x509 -req -in deviceCert.csr -CA sampleCACertificate.pem -CAkey sampleCACertificate.key -CAcreateserial -out deviceCert.crt -days 99999 -sha256  \n</code></pre>\n\n<p>The first line i found and think i can do    </p>\n\n<pre><code>require 'openssl'    \nrsa_key = OpenSSL::PKey::RSA.new(2048)    \n</code></pre>\n\n<p>but i'm stuck on the last 2 lines. Any ideas?   </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "carrierwave"], "comments": [{"owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1509562132, "post_id": 47061651, "comment_id": 81071232, "body": "Could you show us some code. Your controller for example."}, {"owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1509562373, "post_id": 47061651, "comment_id": 81071356, "body": "to view the image in the browser you&#39;ll need an <code>image_tag</code> view helper: <code>&lt;%= image_tag &#39; http:&#47;&#47;localhost:34676&#47;v3&#47;attachments&#47;h2lk9kf5bgn6&#47;views&#47;ori&zwnj;&#8203;ginal&#39; %&gt;</code> However I don&#39;t see the file extension. What file type is downloaded when you hit that endpoint?"}, {"owner": {"reputation": 5772, "user_id": 1562574, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5b2213bb9127f969d58a83ee828bcb1b?s=128&d=identicon&r=PG", "display_name": "Dipak Panchal", "link": "https://stackoverflow.com/users/1562574/dipak-panchal"}, "reply_to_user": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1509562441, "post_id": 47061651, "comment_id": 81071378, "body": "I want to store into database. when I open that url in browser then It&#39;s download image."}, {"owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 1, "creation_date": 1509562525, "post_id": 47061651, "comment_id": 81071427, "body": "Well you&#39;d need to capture the specific url and then in your controller action you can do whatever you want with the parameter (ie: save it to a db)"}], "owner": {"reputation": 5772, "user_id": 1562574, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5b2213bb9127f969d58a83ee828bcb1b?s=128&d=identicon&r=PG", "display_name": "Dipak Panchal", "link": "https://stackoverflow.com/users/1562574/dipak-panchal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1509562251, "creation_date": 1509562029, "last_edit_date": 1509562251, "question_id": 47061651, "link": "https://stackoverflow.com/questions/47061651/get-image-url-for-store-into-database", "title": "Get Image URL for store into Database", "body": "<p>I have download image url - <a href=\"http://localhost:34676/v3/attachments/h2lk9kf5bgn6/views/original\" rel=\"nofollow noreferrer\">http://localhost:34676/v3/attachments/h2lk9kf5bgn6/views/original</a>.\nWhen I use this url in browser then image will be download instead of view in browser.\nNow, I want to store this image into database then How can I do this?\nHelp me please.</p>\n\n<p><strong>Update 2</strong></p>\n\n<blockquote>\n  <p>{\"name\"=>\"nodebot_error.png\", \"contentType\"=>\"image/png\",\n  \"contentUrl\"=>\"<a href=\"http://localhost:34676/v3/attachments/h2lk9kf5bgn6/views/original\" rel=\"nofollow noreferrer\">http://localhost:34676/v3/attachments/h2lk9kf5bgn6/views/original</a>\"}</p>\n</blockquote>\n\n<p>above hash that I'm getting in the backend system. This response come from the Bot Microsoft Framework.</p>\n"}, {"tags": ["ruby", "file", "relative-path"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1509556740, "post_id": 47059670, "comment_id": 81068140, "body": "Your code looks fine. The only possible issue is the assumption of a forward slash, as explained below. If this is a <i>rails</i> project, for example, then you could also use <code>Rails.root</code> to define paths within the project."}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1509559773, "post_id": 47059670, "comment_id": 81069917, "body": "This is why the <a href=\"https://ruby-doc.org/stdlib-2.1.0/libdoc/pathname/rdoc/Pathname.html\" rel=\"nofollow noreferrer\">Pathname</a> gem exists."}, {"owner": {"reputation": 10736, "user_id": 45813, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c9d4814af02064c80e0a15d48854b592?s=128&d=identicon&r=PG", "display_name": "Clay Bridges", "link": "https://stackoverflow.com/users/45813/clay-bridges"}, "edited": false, "score": 0, "creation_date": 1568247625, "post_id": 47059670, "comment_id": 102217325, "body": "This may be a duplicate, but it&#39;s not a duplicate of the linked question, since that doesn&#39;t deal with relative paths at all."}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 3, "last_activity_date": 1509556614, "creation_date": 1509556614, "answer_id": 47060285, "question_id": 47059670, "link": "https://stackoverflow.com/questions/47059670/ruby-way-relative-path/47060285#47060285", "title": "ruby way - relative path", "body": "<p>There's a number of ways, but this one is the most flexible:</p>\n\n<pre><code>File.read(File.expand_path('file.txt', File.dirname(__FILE__))\n</code></pre>\n\n<p>You may also want to use <code>Dir.pwd</code> to be relative to the current working directory in your shell.</p>\n\n<p>Note that using string concatenation for paths <em>may</em> work, but using <code>expand_path</code> or <code>join</code> is more reliable and properly handles platform differences, like on Windows where parts are natively joined with backslash instead.</p>\n"}], "owner": {"reputation": 1690, "user_id": 4602919, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9c8081c1665f7277b43cf167af5ccf28?s=128&d=identicon&r=PG&f=1", "display_name": "Asara", "link": "https://stackoverflow.com/users/4602919/asara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1600, "favorite_count": 0, "closed_date": 1509560746, "answer_count": 1, "score": 0, "last_activity_date": 1509556614, "creation_date": 1509554582, "last_edit_date": 1509555327, "question_id": 47059670, "link": "https://stackoverflow.com/questions/47059670/ruby-way-relative-path", "closed_reason": "Duplicate", "title": "ruby way - relative path", "body": "<p>I am using <code>File.read('file.txt')</code> in a ruby script. But I don't know what is the best way to create a correct relative path, I can do</p>\n\n<pre><code>File.read(File.dirname(__FILE__) + '/file.txt)\n</code></pre>\n\n<p>but I wonder if there a more beautiful way in ruby?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 4, "creation_date": 1509552353, "post_id": 47058982, "comment_id": 81065344, "body": "You <code>Card</code> model looks weird. Did you really define the <code>add_product</code> method outside of the <code>Card</code> model?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1509553719, "post_id": 47058982, "comment_id": 81066221, "body": "The error also says you&#39;ve called a <i>private</i> method on the class, yet this is not what you&#39;ve written in the code above. Please double check that all files are saved, and correctly copied into your question."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 576, "user_id": 6432658, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/9UtJH.png?s=128&g=1", "display_name": "MisterCal", "link": "https://stackoverflow.com/users/6432658/mistercal"}, "edited": false, "score": 0, "creation_date": 1509554470, "post_id": 47058982, "comment_id": 81066703, "body": "@MisterCal Your syntax is wrong, and your code style is bad advice. The &quot;right&quot; answer should be to not define <code>add_product</code> as a private method. (But as I said above, we can&#39;t see if this has actually happened because the code above looks incorrectly copied?!)"}, {"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 0, "creation_date": 1509554586, "post_id": 47058982, "comment_id": 81066780, "body": "All he needs to move add_product into a class model. The method chills, out side of the class..."}, {"owner": {"reputation": 576, "user_id": 6432658, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/9UtJH.png?s=128&g=1", "display_name": "MisterCal", "link": "https://stackoverflow.com/users/6432658/mistercal"}, "edited": false, "score": 0, "creation_date": 1509555908, "post_id": 47058982, "comment_id": 81067602, "body": "Deleted. just caught that he used a local variable as an arg. but based on the error it seems that the code was indeed copied wrong. However <code>@cart</code> is still undefined thats also a problem"}, {"owner": {"reputation": 19, "user_id": 8745775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fe423a08bd07afb19b2f4138d111fdb?s=128&d=identicon&r=PG&f=1", "display_name": "george", "link": "https://stackoverflow.com/users/8745775/george"}, "edited": false, "score": 0, "creation_date": 1509703053, "post_id": 47058982, "comment_id": 81135261, "body": "Hello guys,the only item missing in the cart.rb is (end) after the current_item . thanks for helping guys"}, {"owner": {"reputation": 19, "user_id": 8745775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fe423a08bd07afb19b2f4138d111fdb?s=128&d=identicon&r=PG&f=1", "display_name": "george", "link": "https://stackoverflow.com/users/8745775/george"}, "edited": false, "score": 0, "creation_date": 1509704557, "post_id": 47058982, "comment_id": 81136238, "body": "Problem has been solved guys, I had to copy the entire def add_product(product) into the Class cart."}], "owner": {"reputation": 19, "user_id": 8745775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fe423a08bd07afb19b2f4138d111fdb?s=128&d=identicon&r=PG&f=1", "display_name": "george", "link": "https://stackoverflow.com/users/8745775/george"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1509553594, "creation_date": 1509552229, "last_edit_date": 1509553594, "question_id": 47058982, "link": "https://stackoverflow.com/questions/47058982/cannot-increment-same-product-in-cart", "title": "cannot increment same product in cart", "body": "<p>i cannot seem to be able to add a method to increment the same product in my app.i am designing an online store, i want to be able to add a product to cart so that the number of the same items in the cart will increment,\nwhen i run the program it starts fine, but when i add a product to cart it gives me this error...</p>\n\n<pre><code>ruby 2.4.1p111 (2017-03-22 revision 58053) [i386-mingw32]\n\nC:\\Users\\COMPUTER&gt;cd desktop\n\nC:\\Users\\COMPUTER\\Desktop&gt;cd trial\n\nC:\\Users\\COMPUTER\\Desktop\\trial&gt;cd depot\n\nC:\\Users\\COMPUTER\\Desktop\\trial\\depot&gt;rails s\n=&gt; Booting Puma\n=&gt; Rails 5.0.5 application starting in development on http://localhost:3000\n=&gt; Run `rails server -h` for more startup options\n*** SIGUSR2 not implemented, signal based restart unavailable!\n*** SIGUSR1 not implemented, signal based restart unavailable!\n*** SIGHUP not implemented, signal based logs reopening unavailable!\nPuma starting in single mode...\n* Version 3.10.0 (ruby 2.4.1-p111), codename: Russell's Teapot\n* Min threads: 5, max threads: 5\n* Environment: development\n* Listening on tcp://0.0.0.0:3000\nUse Ctrl-C to stop\nStarted POST \"/line_items?product_id=3\" for 127.0.0.1 at 2017-11-01 19:32:19 +0100\n  ActiveRecord::SchemaMigration Load (1.0ms)  SELECT \"schema_migrations\".* FROM \"schema_migrations\"\nProcessing by LineItemsController#create as HTML\n  Parameters: {\"authenticity_token\"=&gt;\"i1T0s2RDpZMJfxGvhgygNCSXXowIblsp4R+t1rrIOe9NKPkB83qppszYRtmW65uCUPOJyUPPq9p3yVz+pCCvcw==\", \"product_id\"=&gt;\"3\"}\n  Cart Load (1.0ms)  SELECT  \"carts\".* FROM \"carts\" WHERE \"carts\".\"id\" = ? LIMIT ?  [[\"id\", 17], [\"LIMIT\", 1]]\n  Product Load (1.0ms)  SELECT  \"products\".* FROM \"products\" WHERE \"products\".\"id\" = ? LIMIT ?  [[\"id\", 3], [\"LIMIT\", 1]]\nCompleted 500 Internal Server Error in 1005ms (ActiveRecord: 14.0ms)\n\n\n\nNoMethodError (private method `add_product' called for #&lt;Cart:0x4de4bb0&gt;):\n\napp/controllers/line_items_controller.rb:29:in `create'\n  Rendering C:/Ruby24/lib/ruby/gems/2.4.0/gems/actionpack-5.0.5/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout\n  Rendering C:/Ruby24/lib/ruby/gems/2.4.0/gems/actionpack-5.0.5/lib/action_dispatch/middleware/templates/rescues/_source.html.erb\n  Rendered C:/Ruby24/lib/ruby/gems/2.4.0/gems/actionpack-5.0.5/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (223.0ms)\n  Rendering C:/Ruby24/lib/ruby/gems/2.4.0/gems/actionpack-5.0.5/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb\n  Rendered C:/Ruby24/lib/ruby/gems/2.4.0/gems/actionpack-5.0.5/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (44.0ms)\n  Rendering C:/Ruby24/lib/ruby/gems/2.4.0/gems/actionpack-5.0.5/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb\n  Rendered C:/Ruby24/lib/ruby/gems/2.4.0/gems/actionpack-5.0.5/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (7.0ms)\n  Rendered C:/Ruby24/lib/ruby/gems/2.4.0/gems/actionpack-5.0.5/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (11138.2ms)\n</code></pre>\n\n<p>this is the controller where the code resides.......</p>\n\n<pre><code>class LineItemsController &lt; ApplicationController\n  include CurrentCart\n  before_action :set_cart, only: [:create]\n  before_action :set_line_item, only: [:show, :edit, :update, :destroy]\n\n  # GET /line_items\n  # GET /line_items.json\n  def index\n    @line_items = LineItem.all\n  end\n  # GET /line_items/1\n  # GET /line_items/1.json\n  def show\n  end\n\n  # GET /line_items/new\n  def new\n    @line_item = LineItem.new\n  end\n\n  # GET /line_items/1/edit\n  def edit\n  end\n\n  # POST /line_items\n  # POST /line_items.json\n  def create\n    product = Product.find(params[:product_id])  \n    @line_item = @cart.add_product(product)\n\n    respond_to do |format|\n      if @line_item.save  \n        format.html { redirect_to @line_item.cart, notice: 'Line item was successfully created.' }\n        format.json { render :show, status: :created, location: @line_item }\n      else\n        format.html { render :new }\n        format.json { render json: @line_item.errors, status: :unprocessable_entity }\n      end\n    end  \n  end\n\n  # PATCH/PUT /line_items/1\n  # PATCH/PUT /line_items/1.json\n  def update\n    respond_to do |format|\n      if @line_item.update(line_item_params)\n        format.html { redirect_to @line_item, notice: 'Line item was successfully updated.' }\n        format.json { render :show, status: :ok, location: @line_item }\n      else\n        format.html { render :edit }\n        format.json { render json: @line_item.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /line_items/1\n  # DELETE /line_items/1.json\n  def destroy\n    @line_item.destroy\n    respond_to do |format|\n      format.html { redirect_to line_items_url, notice: 'Line item was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_line_item\n      @line_item = LineItem.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def line_item_params\n      params.require(:line_item).permit(:product_id, :cart_id)\n    end\nend\n</code></pre>\n\n<p>this is the cart.rb.......</p>\n\n<pre><code>class Cart &lt; ApplicationRecord\n    has_many :line_items, dependent: :destroy\nend\n\ndef add_product(product)\n current_item = line_items.find_by(product_id: product.id)\n  if current_item\n   current_item.quantity += 1 \nelse\n   current_item = line_items.build(product_id: product.id)\n     end \n     current_item \n</code></pre>\n\n<p>here is the index </p>\n\n<pre><code>&lt;p id=\"notice\"&gt;&lt;%= notice %&gt;&lt;/p&gt; \n\n&lt;h1&gt;Your Pragmatic Catalog&lt;/h1&gt; \n&lt;% cache @products do %&gt;\n&lt;% @products.each do |product| %&gt; \n&lt;% cache @product do %&gt;\n&lt;div class=\"entry\"&gt; \n\n\n&lt;h3&gt;&lt;%= product.title %&gt;&lt;/h3&gt; \n\n&lt;%= image_tag(product.image_url) %&gt;\n&lt;%= sanitize(product.description) %&gt;\n&lt;div class=\"price_line\"&gt; \n\n&lt;span class=\"price\"&gt;&lt;%= number_to_currency (product.price) %&gt;&lt;/span&gt; \n\n&lt;%= button_to 'Add to Cart' , line_items_path(product_id: product.id)%&gt;\n&lt;/div&gt; \n&lt;/div&gt; \n&lt;% end %&gt;\n&lt;% end %&gt;\n&lt;% end %&gt; \n</code></pre>\n"}, {"tags": ["arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1509551875, "post_id": 47058364, "comment_id": 81065022, "body": "this question is asked before - <a href=\"https://stackoverflow.com/questions/47058364/ruby-koans-step-41-hashes-with\" title=\"ruby koans step 41 hashes with\">stackoverflow.com/questions/47058364/&hellip;</a> btw, <code>&lt;&lt;</code> is  called shovel operator, you can search by that name."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1509556769, "post_id": 47058364, "comment_id": 81068161, "body": "@marmeladze The operator itself also does other things like bit shifting, but in this particular context, an array, it does shovel."}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1509559070, "post_id": 47058364, "comment_id": 81069490, "body": "@tadman i thought it is called shovel because it looks like shovel. do not know if &quot;shoveling&quot; has some other meaning."}, {"owner": {"reputation": 1692, "user_id": 4476908, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/103c9d3979fd6388ba1c1f985646321c?s=128&d=identicon&r=PG&f=1", "display_name": "NotAnAmbiTurner", "link": "https://stackoverflow.com/users/4476908/notanambiturner"}, "edited": false, "score": 0, "creation_date": 1509584476, "post_id": 47058364, "comment_id": 81080184, "body": "I had no idea this was called shovelling - learning!"}], "owner": {"reputation": 1692, "user_id": 4476908, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/103c9d3979fd6388ba1c1f985646321c?s=128&d=identicon&r=PG&f=1", "display_name": "NotAnAmbiTurner", "link": "https://stackoverflow.com/users/4476908/notanambiturner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "closed_date": 1509551869, "answer_count": 0, "score": 0, "last_activity_date": 1511783976, "creation_date": 1509550319, "last_edit_date": 1511783976, "question_id": 47058364, "link": "https://stackoverflow.com/questions/47058364/ruby-koans-step-41-hashes-with", "closed_reason": "Duplicate", "title": "Ruby Koans step 41 - Hashes with `&lt;&lt;`", "body": "<p>As I understood it, the <code>&lt;&lt;</code> operator on arrays was essentially the same as <code>push</code>. I can't seem to find any good docs on <code>&lt;&lt;</code> (maybe those symbols don't Google well), for whatever reason.</p>\n\n<p>In case you aren't familiar, Ruby Koans is a test-driven teaching tool. You run a command at command prompt, it executes, tests fail, and you learn by making the tests pass. Not much in the way of explanation (but some), and it is pretty darn good for someone with a background in another language to learn Ruby. The lack of explanation, however, has lead me here.</p>\n\n<p>Here is the correct answer to <a href=\"http://rubykoans.com/\" rel=\"nofollow noreferrer\">Ruby Koans</a> 41 (of 282):</p>\n\n<pre><code>  def test_default_value_is_the_same_object\n    hash = Hash.new([])\n\n    hash[:one] &lt;&lt; \"uno\"\n    hash[:two] &lt;&lt; \"dos\"\n\n    assert_equal [\"uno\", \"dos\"], hash[:one]\n    assert_equal [\"uno\", \"dos\"], hash[:two]\n    assert_equal [\"uno\", \"dos\"], hash[:three]\n\n    assert_equal true, hash[:one].object_id == hash[:two].object_id\n  end\n</code></pre>\n\n<p>What I am trying to figure out is <em>why</em> using \"&lt;&lt;\" would return an <code>Array</code> of values when you retrieve any key from <code>hash</code>, including non-existent ones. I <em>think</em> this Koans is just trying to note that <code>&lt;&lt;</code> appends to the default value Array of the <code>Hash</code> and throws away any keys you try to pass in (or in other words, \"you probably don't want this\"), but I would love someone to tell me if I am right on that and maybe explain a little further.</p>\n\n<p>It is kind of cool that Ruby hashes have a mutable array attached to them as default values. Not sure how <em>useful</em> that is (maybe someone can tell me), but it is cool.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1509550494, "post_id": 47058324, "comment_id": 81064089, "body": "Perhaps inconsistent, but documented."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1509609380, "post_id": 47058324, "comment_id": 81088279, "body": "@sawa you&#39;ve asked this one 5 years ago: <a href=\"https://stackoverflow.com/q/13273318/477037\">Empty strings at the beginning and end of split</a>. It was marked as a duplicate of <a href=\"https://stackoverflow.com/q/5453051/477037\">How do I avoid trailing empty items being removed when splitting strings?</a>."}], "answers": [{"comments": [{"owner": {"reputation": 7544, "user_id": 1085998, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/459252fca62e56c1131babdba2b1babe?s=128&d=identicon&r=PG", "display_name": "daremkd", "link": "https://stackoverflow.com/users/1085998/daremkd"}, "edited": false, "score": 0, "creation_date": 1509550584, "post_id": 47058384, "comment_id": 81064145, "body": "Thanks, just 2 clarifications: a) What is considered a &quot;null field&quot; in this context? b) A negative number works too, why?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 7544, "user_id": 1085998, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/459252fca62e56c1131babdba2b1babe?s=128&d=identicon&r=PG", "display_name": "daremkd", "link": "https://stackoverflow.com/users/1085998/daremkd"}, "edited": false, "score": 2, "creation_date": 1509550680, "post_id": 47058384, "comment_id": 81064203, "body": "@daremkd a) an empty field b) because it was implemented this way."}, {"owner": {"reputation": 7544, "user_id": 1085998, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/459252fca62e56c1131babdba2b1babe?s=128&d=identicon&r=PG", "display_name": "daremkd", "link": "https://stackoverflow.com/users/1085998/daremkd"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1509550691, "post_id": 47058384, "comment_id": 81064210, "body": "@Stefan I think maybe a negative number would be more appropriate here, coz what if the string is &quot;hello|||&quot; then 2 would just give one empty string."}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "reply_to_user": {"reputation": 7544, "user_id": 1085998, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/459252fca62e56c1131babdba2b1babe?s=128&d=identicon&r=PG", "display_name": "daremkd", "link": "https://stackoverflow.com/users/1085998/daremkd"}, "edited": false, "score": 1, "creation_date": 1509550759, "post_id": 47058384, "comment_id": 81064254, "body": "@daremkd, it depends on your particular case."}], "tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": true, "score": 9, "last_activity_date": 1509550799, "last_edit_date": 1509550799, "creation_date": 1509550396, "answer_id": 47058384, "question_id": 47058324, "link": "https://stackoverflow.com/questions/47058324/inconsistent-ruby-split-behavior/47058384#47058384", "title": "Inconsistent Ruby .split behavior", "body": "<p>This behaviour is described in <a href=\"https://ruby-doc.org/core-2.2.0/String.html#method-i-split\" rel=\"noreferrer\">documentation</a>:</p>\n\n<blockquote>\n  <p>If the limit parameter is omitted, trailing null fields are\n  suppressed.</p>\n</blockquote>\n\n<p>If you want to save trailing empty string, just add positive or negative limit, as documentation offering:</p>\n\n<pre><code>\"hello|\".split('|', 2)\n #=&gt; [\"hello\", \"\"]\n\"hello|||\".split('|', -1)\n #=&gt; [\"hello\", \"\", \"\", \"\"]\n</code></pre>\n\n<p>Note</p>\n\n<blockquote>\n  <p>If negative, there is no limit to the number of fields returned, and trailing null fields are not suppressed.</p>\n</blockquote>\n"}], "owner": {"reputation": 7544, "user_id": 1085998, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/459252fca62e56c1131babdba2b1babe?s=128&d=identicon&r=PG", "display_name": "daremkd", "link": "https://stackoverflow.com/users/1085998/daremkd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "closed_date": 1509609394, "accepted_answer_id": 47058384, "answer_count": 1, "score": 2, "last_activity_date": 1509550799, "creation_date": 1509550192, "question_id": 47058324, "link": "https://stackoverflow.com/questions/47058324/inconsistent-ruby-split-behavior", "closed_reason": "Duplicate", "title": "Inconsistent Ruby .split behavior", "body": "<p>Suppose I have this:</p>\n\n<pre><code>a = \"|hello\"\n</code></pre>\n\n<p>if I do:</p>\n\n<pre><code>a.split(\"|\") #=&gt; [\"\", \"hello\"]\n</code></pre>\n\n<p>Now say I have:</p>\n\n<pre><code>b = \"hello|\"\n</code></pre>\n\n<p>if I do:</p>\n\n<pre><code>b.split(\"|\") #=&gt; [\"hello\"]\n</code></pre>\n\n<p>Why is this happening? I expected the result to be <code>[\"hello\", \"\"]</code> , similar to the first example. This is the <code>split</code> method working inconsistently. Or is there something about its inner working that I'm not aware of?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1509548548, "post_id": 47057759, "comment_id": 81062804, "body": "Please can you provide a more complete overview of your code? What are your models, <b>controllers and views</b>? Your question as it currently stands is too broad for a StackOverflow answer."}, {"owner": {"reputation": 13, "user_id": 8868875, "user_type": "registered", "profile_image": "https://graph.facebook.com/1964236963592134/picture?type=large", "display_name": "Faisal Al-Sudani", "link": "https://stackoverflow.com/users/8868875/faisal-al-sudani"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1509548953, "post_id": 47057759, "comment_id": 81063062, "body": "Just update the code!"}, {"owner": {"reputation": 844, "user_id": 2278637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/767a91d7f4f23807cb97b1f2847dde6e?s=128&d=identicon&r=PG", "display_name": "boxmein", "link": "https://stackoverflow.com/users/2278637/boxmein"}, "edited": false, "score": 1, "creation_date": 1509548965, "post_id": 47057759, "comment_id": 81063073, "body": "The 4th model idea is quite good. You should do that :)"}, {"owner": {"reputation": 13, "user_id": 8868875, "user_type": "registered", "profile_image": "https://graph.facebook.com/1964236963592134/picture?type=large", "display_name": "Faisal Al-Sudani", "link": "https://stackoverflow.com/users/8868875/faisal-al-sudani"}, "edited": false, "score": 0, "creation_date": 1509549067, "post_id": 47057759, "comment_id": 81063157, "body": "I tried it, but for some reasons it&#39;s not working :("}, {"owner": {"reputation": 13, "user_id": 8868875, "user_type": "registered", "profile_image": "https://graph.facebook.com/1964236963592134/picture?type=large", "display_name": "Faisal Al-Sudani", "link": "https://stackoverflow.com/users/8868875/faisal-al-sudani"}, "edited": false, "score": 0, "creation_date": 1509549316, "post_id": 47057759, "comment_id": 81063307, "body": "I can list the questions and the answers, but I didn&#39;t mange to make it in form so that it can be submitted"}, {"owner": {"reputation": 572, "user_id": 5100555, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6de1f19624f27e2e059e2b511ef4bfe6?s=128&d=identicon&r=PG", "display_name": "tfantina", "link": "https://stackoverflow.com/users/5100555/tfantina"}, "edited": false, "score": 0, "creation_date": 1509549390, "post_id": 47057759, "comment_id": 81063353, "body": "I&#39;m a bit confused as to why you have separate controllers for exams, questions, answers and possibly now submissions.  Wouldn&#39;t it be easier to have just an exams controller, user controller, and an admin controller, and under the exams controller for the &quot;Create&quot; action make sure that there is some sort of <code>before_action</code> ensuring that only a logged in administrator can create an exam?  I&#39;m not trying to be nit picky, I really just want to understand the structure and your reasoning so I can familiarize myself with the issue."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1509549592, "post_id": 47057759, "comment_id": 81063472, "body": "@FaisalAl-Sudani <i>&quot;I didn&#39;t mange to make it in form so that it can be submitted&quot;</i> \u2013 what have you tried so far to build that form? Could you show some code? (BTW, the controllers and views for your admin don&#39;t seem to be relevant to your question)"}, {"owner": {"reputation": 13, "user_id": 8868875, "user_type": "registered", "profile_image": "https://graph.facebook.com/1964236963592134/picture?type=large", "display_name": "Faisal Al-Sudani", "link": "https://stackoverflow.com/users/8868875/faisal-al-sudani"}, "reply_to_user": {"reputation": 572, "user_id": 5100555, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6de1f19624f27e2e059e2b511ef4bfe6?s=128&d=identicon&r=PG", "display_name": "tfantina", "link": "https://stackoverflow.com/users/5100555/tfantina"}, "edited": false, "score": 0, "creation_date": 1509549765, "post_id": 47057759, "comment_id": 81063600, "body": "@tfantina Each Exam have many questions. Each question have a title, sort ( multichoice, number, yes no) and a timer. And each Question have max 4 answers, where answer have title and correct. and that works fine, I don&#39;t know if it&#39;s possible to do in just one controller"}, {"owner": {"reputation": 13, "user_id": 8868875, "user_type": "registered", "profile_image": "https://graph.facebook.com/1964236963592134/picture?type=large", "display_name": "Faisal Al-Sudani", "link": "https://stackoverflow.com/users/8868875/faisal-al-sudani"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1509549816, "post_id": 47057759, "comment_id": 81063640, "body": "@Stefan don&#39;t think about the admin thing, lets say all users can take the exam :D"}, {"owner": {"reputation": 13, "user_id": 8868875, "user_type": "registered", "profile_image": "https://graph.facebook.com/1964236963592134/picture?type=large", "display_name": "Faisal Al-Sudani", "link": "https://stackoverflow.com/users/8868875/faisal-al-sudani"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1509549900, "post_id": 47057759, "comment_id": 81063699, "body": "@Stefan updated with Submission controller"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1509549991, "post_id": 47057759, "comment_id": 81063750, "body": "@FaisalAl-Sudani where do you build the form?"}, {"owner": {"reputation": 13, "user_id": 8868875, "user_type": "registered", "profile_image": "https://graph.facebook.com/1964236963592134/picture?type=large", "display_name": "Faisal Al-Sudani", "link": "https://stackoverflow.com/users/8868875/faisal-al-sudani"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1509550151, "post_id": 47057759, "comment_id": 81063883, "body": "@Stefan in views/submissions/new  updated"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1509550276, "post_id": 47057759, "comment_id": 81063946, "body": "You can&#39;t write multiline code in comments. Please edit your question instead. And you should probably reduce the question to your model structure and the form building. The other controllers are irrelevant."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1509550441, "post_id": 47057759, "comment_id": 81064055, "body": "Okay, so what&#39;s wrong with your form? Do you get any errors or unexpected output?"}, {"owner": {"reputation": 572, "user_id": 5100555, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6de1f19624f27e2e059e2b511ef4bfe6?s=128&d=identicon&r=PG", "display_name": "tfantina", "link": "https://stackoverflow.com/users/5100555/tfantina"}, "edited": false, "score": 0, "creation_date": 1509550682, "post_id": 47057759, "comment_id": 81064204, "body": "@FaisalAl-Sudani  makes sense, sorry, I wasn&#39;t thinking about that, I do think you did that the right way.  You now say that you are looking for a way to make the exam open to users (rather than admins)?  Is that the question?"}, {"owner": {"reputation": 13, "user_id": 8868875, "user_type": "registered", "profile_image": "https://graph.facebook.com/1964236963592134/picture?type=large", "display_name": "Faisal Al-Sudani", "link": "https://stackoverflow.com/users/8868875/faisal-al-sudani"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1509550700, "post_id": 47057759, "comment_id": 81064223, "body": "@Stefan it submit a submission entry without taking any value from the answers. even if I use submission_params with answers_attributes: [:answer_id]. the radio button is acting as one button for all questions. and also get this Unpermitted parameter: answers"}, {"owner": {"reputation": 13, "user_id": 8868875, "user_type": "registered", "profile_image": "https://graph.facebook.com/1964236963592134/picture?type=large", "display_name": "Faisal Al-Sudani", "link": "https://stackoverflow.com/users/8868875/faisal-al-sudani"}, "reply_to_user": {"reputation": 572, "user_id": 5100555, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6de1f19624f27e2e059e2b511ef4bfe6?s=128&d=identicon&r=PG", "display_name": "tfantina", "link": "https://stackoverflow.com/users/5100555/tfantina"}, "edited": false, "score": 0, "creation_date": 1509550758, "post_id": 47057759, "comment_id": 81064252, "body": "@tfantina for let&#39;s say make the exam open to all users"}, {"owner": {"reputation": 572, "user_id": 5100555, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6de1f19624f27e2e059e2b511ef4bfe6?s=128&d=identicon&r=PG", "display_name": "tfantina", "link": "https://stackoverflow.com/users/5100555/tfantina"}, "edited": false, "score": 0, "creation_date": 1509551087, "post_id": 47057759, "comment_id": 81064469, "body": "So you want something like <code>User -&gt; has_many :questions</code> so that you could match the user to every question they answered.  (I&#39;m assuming you have a user model and these aren&#39;t just anonymous questions)."}, {"owner": {"reputation": 13, "user_id": 8868875, "user_type": "registered", "profile_image": "https://graph.facebook.com/1964236963592134/picture?type=large", "display_name": "Faisal Al-Sudani", "link": "https://stackoverflow.com/users/8868875/faisal-al-sudani"}, "reply_to_user": {"reputation": 572, "user_id": 5100555, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6de1f19624f27e2e059e2b511ef4bfe6?s=128&d=identicon&r=PG", "display_name": "tfantina", "link": "https://stackoverflow.com/users/5100555/tfantina"}, "edited": false, "score": 0, "creation_date": 1509551216, "post_id": 47057759, "comment_id": 81064558, "body": "@tfantina I&#39;ve user model, but there is no relationship between user and questions. I&#39;m searching for way to make a form where users/guests anyone to answering the questions and submit"}, {"owner": {"reputation": 572, "user_id": 5100555, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6de1f19624f27e2e059e2b511ef4bfe6?s=128&d=identicon&r=PG", "display_name": "tfantina", "link": "https://stackoverflow.com/users/5100555/tfantina"}, "edited": false, "score": 0, "creation_date": 1509551436, "post_id": 47057759, "comment_id": 81064718, "body": "@FaisalAl-Sudani if the below answer does not help can you put the project on github so I can fork it and mess around with it, I want to solve this but I think I really need to play with the code to figure out how to get what you want."}, {"owner": {"reputation": 13, "user_id": 8868875, "user_type": "registered", "profile_image": "https://graph.facebook.com/1964236963592134/picture?type=large", "display_name": "Faisal Al-Sudani", "link": "https://stackoverflow.com/users/8868875/faisal-al-sudani"}, "edited": false, "score": 0, "creation_date": 1509551646, "post_id": 47057759, "comment_id": 81064874, "body": "<a href=\"https://github.com/faisalalsudani/Questionnaire\" rel=\"nofollow noreferrer\">github.com/faisalalsudani/Questionnaire</a> feel free :D"}, {"owner": {"reputation": 572, "user_id": 5100555, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6de1f19624f27e2e059e2b511ef4bfe6?s=128&d=identicon&r=PG", "display_name": "tfantina", "link": "https://stackoverflow.com/users/5100555/tfantina"}, "edited": false, "score": 0, "creation_date": 1509576325, "post_id": 47057759, "comment_id": 81077864, "body": "Cool, we can continue to discuss this there."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8868875, "user_type": "registered", "profile_image": "https://graph.facebook.com/1964236963592134/picture?type=large", "display_name": "Faisal Al-Sudani", "link": "https://stackoverflow.com/users/8868875/faisal-al-sudani"}, "edited": false, "score": 0, "creation_date": 1509551584, "post_id": 47058705, "comment_id": 81064841, "body": "Thanks for answering. I&#39;ve a submission model that connect to user and exam.  I also have correct:boolean attribute in the answer model.  The form that I use is  submitting only the exam_id and user_id and it&#39;s ignoring the answers"}, {"owner": {"reputation": 5767, "user_id": 752920, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/Oi9pN.jpg?s=128&g=1", "display_name": "Ankit", "link": "https://stackoverflow.com/users/752920/ankit"}, "reply_to_user": {"reputation": 13, "user_id": 8868875, "user_type": "registered", "profile_image": "https://graph.facebook.com/1964236963592134/picture?type=large", "display_name": "Faisal Al-Sudani", "link": "https://stackoverflow.com/users/8868875/faisal-al-sudani"}, "edited": false, "score": 0, "creation_date": 1510085311, "post_id": 47058705, "comment_id": 81282969, "body": "First, I do not think that the <code>correct</code> field should go in the <code>Answer</code> model. Nevertheless, if the answers are ignored, check the logs to see if when submitting the form, the server is receiving the parameters. If not , then something is wrong in your view. If the logs show that the server receives the answers, then something is wrong in the controller. In that case, check if you are permitting the answers as parameters."}], "tags": [], "owner": {"reputation": 5767, "user_id": 752920, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/Oi9pN.jpg?s=128&g=1", "display_name": "Ankit", "link": "https://stackoverflow.com/users/752920/ankit"}, "is_accepted": false, "score": 0, "last_activity_date": 1509552130, "last_edit_date": 1509552130, "creation_date": 1509551340, "answer_id": 47058705, "question_id": 47057759, "link": "https://stackoverflow.com/questions/47057759/how-to-allow-users-to-submit-answers-to-a-questionnaire-app/47058705#47058705", "title": "How to allow users to submit answers to a questionnaire app?", "body": "<p>First, you need to work some more on your models.</p>\n\n<p>I am assuming that every question has at least one correct answer (unless you are building a survey tool). If that is the case, you also need the notion of correct answer(s) to be encapsulated in the models.</p>\n\n<p><strong>Case 1: Single correct answer per question</strong>\nAdd a <code>correct_answer_id</code> to the question model.</p>\n\n<p><strong>Case 2: Multiple correct answers per question</strong>\nIf a question can have multiple correct answers you need to create a join table/model</p>\n\n<pre><code># migration for model CorrectAnswer\ncreate_table :correct_answers do |t|\n t.integer question_id\n t.integer answer_id #answer_id is the id of the answer selected by a user\nend\n\n# Also update the Question class\nclass Question &lt; ActiveRecord::Base\n...\nhas_many :correct_answers\n...\nend\n</code></pre>\n\n<p>Note: I will recommend the second option even if you are planning on a single correct answer. This will allow your models to be flexible for any future requirements.</p>\n\n<p>For creating submissions, you need to create a new Model called <code>Submission</code>. The fields of the submission model  with following fields</p>\n\n<pre><code>#migration for Submission model\ncreate_table :submissions do |t|\n t.integer user_id\n t.integer exam_id\n t.integer question_id\n t.integer answer_id\nend\n</code></pre>\n\n<p>You will need to create a corresponding Submissions controller which will allow you non-admin users to submit answers to an exam.</p>\n\n<p>Do not forget to create appropriate index for the tables</p>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 8868875, "user_type": "registered", "profile_image": "https://graph.facebook.com/1964236963592134/picture?type=large", "display_name": "Faisal Al-Sudani", "link": "https://stackoverflow.com/users/8868875/faisal-al-sudani"}, "is_accepted": false, "score": 0, "last_activity_date": 1510250047, "creation_date": 1510250047, "answer_id": 47208522, "question_id": 47057759, "link": "https://stackoverflow.com/questions/47057759/how-to-allow-users-to-submit-answers-to-a-questionnaire-app/47208522#47208522", "title": "How to allow users to submit answers to a questionnaire app?", "body": "<p>So, I already solved this problem by changing the questions model. \nI added a answers array to the question model</p>\n\n<pre><code>create_table \"questions\", force: :cascade do |t|\n t.string \"answers\", default: [], array: true\nend\n</code></pre>\n\n<p>changed also something in the view of the form of submission</p>\n\n<pre><code>&lt;% question.answers.each_with_index do |answer, index| %&gt;\n  &lt;p&gt;&lt;%= answer %&gt;&lt;span&gt;\n     &lt;%= radio_button_tag 'submission[answers][]',\"#{answer}\", id: \"#{answer}\", class: \"form-control\"%&gt;\n  &lt;/span&gt;&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>The problem now is that I get the questions like this \n<a href=\"https://i.stack.imgur.com/P0TDX.png\" rel=\"nofollow noreferrer\">radio_button</a>\nI can only select one radio button! So if I select answer_A from question 1 and then I select answer_B from question 2. Question 1 then will be deselect?</p>\n"}], "owner": {"reputation": 13, "user_id": 8868875, "user_type": "registered", "profile_image": "https://graph.facebook.com/1964236963592134/picture?type=large", "display_name": "Faisal Al-Sudani", "link": "https://stackoverflow.com/users/8868875/faisal-al-sudani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1510250047, "creation_date": 1509548384, "last_edit_date": 1509552249, "question_id": 47057759, "link": "https://stackoverflow.com/questions/47057759/how-to-allow-users-to-submit-answers-to-a-questionnaire-app", "title": "How to allow users to submit answers to a questionnaire app?", "body": "<p>I'm building a questionnaire app.\nfor now I've 3 models</p>\n\n<p>1- <code>Exam -&gt; has_many :questions</code></p>\n\n<p>2- <code>Question -&gt; has_many :answers &amp;&amp; belongs_to :exam</code></p>\n\n<pre><code>class QuestionsController &lt; ApplicationController\n\n  def index\n    @questions = Question.all\n  end\n\n  def show\n    exam = Exam.find(params[:exam_id])\n    @question = exam.questions.find(params[:id])\n  end\n\n  def new\n    exam = Exam.find(params[:exam_id])\n    @question = exam.questions.build\n    @question = Question.new\n    @question.answers.build\n  end\n\n  def create\n    exam = Exam.find(params[:exam_id])\n\n    @question = exam.questions.create(question_params)\n\n      if @question.save\n        redirect_to @question.exam, notice: \"Exam created!\"\n      else\n        render :new\n      end\n\n  end\n\n  def destroy\n    @question = Question.find(params[:id])\n    @question.destroy\n    redirect_to @question.exam\n  end\n\n\n\n  private\n  def question_params\n    params.require(:question).permit(:title,:timer,:exam_id,answers_attributes:[:title,:correct, :question_id], :sort =&gt; [])\n  end\n\nend\n</code></pre>\n\n<p>3- <code>Answer -&gt; belongs_to :question</code></p>\n\n<p>I can add an exam, and add questions to the exam and add answers for each question. (through nested form)</p>\n\n<p>So for now the admin is the only user who can add exams,questions,answers. I want make the exam visible to other users so the can take and exam and see the result. </p>\n\n<p>I thought about making a 4th model for submission that belongs to Exam where users can see the questions with the options and chose the option that they want and submitting it. After the submit they get a page with the result if the pass the exam or not!</p>\n\n<p><strong>BUT HOW TO DO IT?</strong></p>\n\n<p>UPDATE!!!\nThe code above works fine!. I'm only searching for some way to make the exam visible or takable for the users</p>\n\n<pre><code>&lt;%= form_for [@exam, @submission]  do |f| %&gt;\n      &lt;% @questions.each do |question| %&gt;\n        &lt;p&gt;&lt;%= question.title %&gt;&lt;/p&gt;\n        &lt;ul&gt;\n          &lt;% question.answers.each do |answer| %&gt;\n          &lt;li&gt;\n            &lt;%= @chosen_option = answer.title %&gt;\n            &lt;%= f.fields_for :option do |o| %&gt;\n              &lt;%= render 'option_fields', :f =&gt; o %&gt;\n            &lt;% end %&gt;\n          &lt;/li&gt;\n          &lt;% end %&gt;\n        &lt;/ul&gt;\n      &lt;% end %&gt;\n    &lt;br&gt;\n    &lt;br&gt;\n    &lt;%= f.hidden_field :user_id, :value =&gt; current_user.id %&gt;\n    &lt;%= f.submit \"Submit\", class: \"btn  btn-primary \" %&gt;\n    &lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "capistrano"], "answers": [{"tags": [], "owner": {"reputation": 318, "user_id": 4268986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37e65181e551235f91df02d3f958d25d?s=128&d=identicon&r=PG", "display_name": "Nam Tran", "link": "https://stackoverflow.com/users/4268986/nam-tran"}, "is_accepted": true, "score": 0, "last_activity_date": 1509548524, "creation_date": 1509548524, "answer_id": 47057796, "question_id": 47056697, "link": "https://stackoverflow.com/questions/47056697/capistrano-devise-secret-key-not-set/47057796#47057796", "title": "Capistrano Devise.secret_key not set", "body": "<p><strong>Reason</strong></p>\n\n<p>Capistrano use <code>non-login</code>, <code>non-interactive</code> shell modes, which doesn't load you environment variables. \nWhen you do <code>ssh</code> to server, it uses <code>login</code>, <code>interactive</code> shell modes, which loads your environment variables</p>\n\n<p><strong>Solution</strong></p>\n\n<p>Use another way to set environment variables. I often use <a href=\"https://github.com/laserlemon/figaro\" rel=\"nofollow noreferrer\">Figaro</a> and it works with Capistrano.</p>\n\n<p>To prevent sensitive information are included in Git, add <code>config/application.yml</code> to Capistrano's <code>linked_files</code> and fill correct sensitive information to <code>&lt;shared directory&gt;/config/application.yml</code> on server</p>\n"}, {"tags": [], "owner": {"reputation": 1717, "user_id": 1034924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecedc78563223e4f7742bbfc66992905?s=128&d=identicon&r=PG", "display_name": "nzajt", "link": "https://stackoverflow.com/users/1034924/nzajt"}, "is_accepted": false, "score": 0, "last_activity_date": 1509548735, "creation_date": 1509548735, "answer_id": 47057863, "question_id": 47056697, "link": "https://stackoverflow.com/questions/47056697/capistrano-devise-secret-key-not-set/47057863#47057863", "title": "Capistrano Devise.secret_key not set", "body": "<p>You need to declare the ENV variable in your capistrano production file.\nSet an env variable on your computer(or the computer, or virtual machine where deploy is being called), then add the following code to your capistrano production file.</p>\n\n<p>in config/deploy/production.rb</p>\n\n<pre><code>set :default_env, {\n  \"SECRET_KEY_BASE\" =&gt; ENV['PRODUCTION_SECRET_KEY'],\n ....\n}\n</code></pre>\n\n<p>You should always set env variable like this when using capistrano, because sometimes depending on the way you have capistrano set up, env variables on the server will not work, you could be using a different user to deploy, or you could be using rbenv or rvm. Whatever the reason, this is the best way to set env variables when using capistrano. And you don't have to set them on the server or keep them in version control.</p>\n"}], "owner": {"reputation": 66, "user_id": 8042691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61c5f0d5050e66cbb9f02e57a668e0be?s=128&d=identicon&r=PG", "display_name": "Jeremiah", "link": "https://stackoverflow.com/users/8042691/jeremiah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 0, "accepted_answer_id": 47057796, "answer_count": 2, "score": 0, "last_activity_date": 1509548735, "creation_date": 1509545005, "question_id": 47056697, "link": "https://stackoverflow.com/questions/47056697/capistrano-devise-secret-key-not-set", "title": "Capistrano Devise.secret_key not set", "body": "<p>When I try to deploy with Capistrano it gets to assets:precompile and I get this message:</p>\n\n<pre><code>01:08 deploy:assets:precompile\n      01 ~/.rvm/bin/rvm default do bundle exec rake assets:precompile\n      01 rake aborted!\n      01 Devise.secret_key was not set. Please add the following to your Devise initializer:\n      01\n      01   config.secret_key = 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'\n      01\n      01 Please ensure you restarted your application after installing Devise or setting the key.\n</code></pre>\n\n<p>I don't want to add my secret key into devise.rb because I don't want it in version control. I am using an environment variable for secret_key_base which Devise.secret_key is supposed to fall back on. In fact, when I ssh into the server, manually navigate to the failed release and go into the rails console I find that <code>Devise.secret_key</code> works fine. It seems the only time it doesn't work is during the Capistrano deploy.</p>\n\n<p>Edit: I can also manually run <code>bundle exec rake assets:precompile</code> just fine through ssh. The problem just seems to be Capistrano, but my environment variables are in /etc/environment so they should be loaded.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "psql"], "comments": [{"owner": {"reputation": 5465, "user_id": 405796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ecvqq.jpg?s=128&g=1", "display_name": "craig.kaminsky", "link": "https://stackoverflow.com/users/405796/craig-kaminsky"}, "edited": false, "score": 0, "creation_date": 1509543611, "post_id": 47056142, "comment_id": 81059422, "body": "How often does the data change? Is this something that you need to access &quot;live&quot; or &quot;on demand&quot; each time the page is requested?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1509543615, "post_id": 47056142, "comment_id": 81059425, "body": "Since you think you reached the limit of your optimizations, now you can proceed to getting bigger/more hardware."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1509543683, "post_id": 47056142, "comment_id": 81059475, "body": "Also, you can pre-calculate it in the background and the page would just show prepared data."}, {"owner": {"reputation": 407, "user_id": 4232135, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f87ff89748cfd69ec911633118392d1e?s=128&d=identicon&r=PG&f=1", "display_name": "Hassan-Zahid", "link": "https://stackoverflow.com/users/4232135/hassan-zahid"}, "reply_to_user": {"reputation": 5465, "user_id": 405796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ecvqq.jpg?s=128&g=1", "display_name": "craig.kaminsky", "link": "https://stackoverflow.com/users/405796/craig-kaminsky"}, "edited": false, "score": 0, "creation_date": 1509543733, "post_id": 47056142, "comment_id": 81059518, "body": "@craig.kaminsky the data will update on a frequent basis. Actually, it&#39;s report of my activity on account. So if I perform another task, the report should show updated stats."}, {"owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "edited": false, "score": 0, "creation_date": 1509543741, "post_id": 47056142, "comment_id": 81059524, "body": "Hard to say without code. Have you considered setting up a worker to process the data and storing the results in a table? How up-to-date do the results have to be? If real-time is the expectation, there may not be much more you can do."}, {"owner": {"reputation": 407, "user_id": 4232135, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f87ff89748cfd69ec911633118392d1e?s=128&d=identicon&r=PG&f=1", "display_name": "Hassan-Zahid", "link": "https://stackoverflow.com/users/4232135/hassan-zahid"}, "reply_to_user": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "edited": false, "score": 0, "creation_date": 1509544276, "post_id": 47056142, "comment_id": 81059914, "body": "@NickM Thanks. Would diving the process in different ajax calls do any help. Right now its processing on page rendering"}, {"owner": {"reputation": 5465, "user_id": 405796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ecvqq.jpg?s=128&g=1", "display_name": "craig.kaminsky", "link": "https://stackoverflow.com/users/405796/craig-kaminsky"}, "edited": false, "score": 0, "creation_date": 1509544762, "post_id": 47056142, "comment_id": 81060239, "body": "@H_Z I was headed down the same road as NickM ... using a worker to process the data in the background and store it in a table (or materialized view). But, if it has to refreshed quite frequently, that can be tough. It may be worth looking at PG&#39;s MatViews, however, if you have some data that is more static than others."}, {"owner": {"reputation": 407, "user_id": 4232135, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f87ff89748cfd69ec911633118392d1e?s=128&d=identicon&r=PG&f=1", "display_name": "Hassan-Zahid", "link": "https://stackoverflow.com/users/4232135/hassan-zahid"}, "edited": false, "score": 0, "creation_date": 1509546224, "post_id": 47056142, "comment_id": 81061236, "body": "Should I consider denormalizing my database a bit, to avoid some joins?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1509546430, "post_id": 47056142, "comment_id": 81061377, "body": "@H_Z that would be cheating. According to your question the queries cannot be optimized any further."}, {"owner": {"reputation": 407, "user_id": 4232135, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f87ff89748cfd69ec911633118392d1e?s=128&d=identicon&r=PG&f=1", "display_name": "Hassan-Zahid", "link": "https://stackoverflow.com/users/4232135/hassan-zahid"}, "edited": false, "score": 0, "creation_date": 1509546747, "post_id": 47056142, "comment_id": 81061596, "body": "Well, I said queries, not the database structure. So denormalization would be an option for you right?"}], "answers": [{"tags": [], "owner": {"reputation": 342, "user_id": 2074840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11346f6761befbc4857bca7eb1eb85a1?s=128&d=identicon&r=PG", "display_name": "michal.samluk", "link": "https://stackoverflow.com/users/2074840/michal-samluk"}, "is_accepted": false, "score": 0, "last_activity_date": 1531144848, "creation_date": 1531144848, "answer_id": 51247424, "question_id": 47056142, "link": "https://stackoverflow.com/questions/47056142/ruby-on-rails-best-way-to-show-big-data-report-efficiently/51247424#51247424", "title": "Ruby on Rails: Best way to show big data report efficiently", "body": "<p>Maybe you could move generating report to some background job? You have 2 options here: \n1. Generate after some action/cron job (e.g. project finished -> generate report) \n2. Have a nice button (request report) and then display nice message to user that you are going to email him a link to the report (or even you could display it on frontend after processing is finished). </p>\n\n<p>I once was doing something similar and we were storing full html on S3 after generating report. Caching just the data was not enough - the amount of the data was so big that generating HTML was taking quite some time. </p>\n"}], "owner": {"reputation": 407, "user_id": 4232135, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f87ff89748cfd69ec911633118392d1e?s=128&d=identicon&r=PG&f=1", "display_name": "Hassan-Zahid", "link": "https://stackoverflow.com/users/4232135/hassan-zahid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 676, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1531144848, "creation_date": 1509543294, "last_edit_date": 1509543554, "question_id": 47056142, "link": "https://stackoverflow.com/questions/47056142/ruby-on-rails-best-way-to-show-big-data-report-efficiently", "title": "Ruby on Rails: Best way to show big data report efficiently", "body": "<p>I am implementing a report that shows the analysis of quite a large set of data. The process includes joins and filtering on 4 database tables that themselves have around a million records on average. The complete processing and page rendering was taking around two minutes. I have improved this time to around 1 minute 35 seconds by optimizing my queries and applying indexing to the database.</p>\n\n<p>Considering we cannot further optimize the queries, what are the possible solutions to improve the process speed that are usually used in Ruby on Rails.</p>\n"}, {"tags": ["ruby", "activeadmin"], "answers": [{"tags": [], "owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "is_accepted": false, "score": 2, "last_activity_date": 1509545474, "last_edit_date": 1509545474, "creation_date": 1509541714, "answer_id": 47055626, "question_id": 47055402, "link": "https://stackoverflow.com/questions/47055402/activeadmin-generic-form-partial/47055626#47055626", "title": "ActiveAdmin Generic Form Partial", "body": "<p>For the form answer is to place the form in a partial that resides in:</p>\n\n<pre><code>app/views/active_admin/base/_pdf_form.erb\n</code></pre>\n\n<p>and then render it like this:</p>\n\n<pre><code>  render partial: 'pdf_form', locals: {f: f}\n</code></pre>\n\n<p>For the display parital you should place the partial at:        </p>\n\n<pre><code>app/views/active_admin/base/_pdf.erb\n</code></pre>\n\n<p>and then render it like this:</p>\n\n<pre><code>render partial: 'pdf', collection: event.pdfs\n</code></pre>\n\n<p>The partial name needs to be in quotes otherwise rails won't look for it <code>active_admin/base</code>.</p>\n"}], "owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 395, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1509545474, "creation_date": 1509540938, "question_id": 47055402, "link": "https://stackoverflow.com/questions/47055402/activeadmin-generic-form-partial", "title": "ActiveAdmin Generic Form Partial", "body": "<p>I have the following form for uploading PDFs:</p>\n\n<pre><code>  f.inputs 'PDF' do\n    f.has_many :pdfs, allow_destroy: true do |pdf_f|\n      pdf_f.semantic_errors\n      pdf_f.input :name\n      pdf_f.input :description\n      pdf_f.input :enabled\n      pdf_f.input :link, label: 'file', as: :file\n    end\n  end\n</code></pre>\n\n<p>And a way to display the file:    </p>\n\n<pre><code>   li do\n      div \"name: #{pdf.name}\"\n      div \"filename: #{pdf.link.path.split('/').last}\"\n      div raw \"description: &lt;br&gt; #{pdf.description}\"\n      div \"enabled: #{pdf.enabled ? \"yes\" : \"no\"}\"\n    end\n</code></pre>\n\n<p><code>Pdf</code> is a polymorphic object thus can appear on several models.</p>\n\n<p>How do I create a generic shard partial for each of them that can then be re-used across ActiveAdmin so I don't have to recreate them every time?</p>\n\n<p>Bear in mind the second one I expect to iterate over it by passing it in as a <code>collection:</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "google-app-engine", "google-cloud-platform", "cloud"], "comments": [{"owner": {"reputation": 2659, "user_id": 483133, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NcB9j.jpg?s=128&g=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/483133/phil"}, "edited": false, "score": 0, "creation_date": 1509987181, "post_id": 47055164, "comment_id": 81233712, "body": "this looks like a misconfiguration somewhere, since the app is so simple. Do you have any other logs from GCP you can share?"}], "answers": [{"tags": [], "owner": {"reputation": 1020, "user_id": 5278152, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FssLuWM9mnk/AAAAAAAAAAI/AAAAAAAAC4M/yFo3atAiKJs/photo.jpg?sz=128", "display_name": "Sergio Gonzalez", "link": "https://stackoverflow.com/users/5278152/sergio-gonzalez"}, "is_accepted": false, "score": 0, "last_activity_date": 1510088028, "creation_date": 1510088028, "answer_id": 47167241, "question_id": 47055164, "link": "https://stackoverflow.com/questions/47055164/deploy-ruby-api-google-cloud/47167241#47167241", "title": "Deploy ruby api google cloud", "body": "<p>The Google Cloud example <a href=\"https://cloud.google.com/ruby/getting-started/hello-world\" rel=\"nofollow noreferrer\">https://cloud.google.com/ruby/getting-started/hello-world</a> uses Sinatra, not Rails.\nIf you check <a href=\"https://github.com/GoogleCloudPlatform/ruby-docs-samples/tree/master/appengine/hello_world\" rel=\"nofollow noreferrer\">https://github.com/GoogleCloudPlatform/ruby-docs-samples/tree/master/appengine/hello_world</a> in the app.yaml file it just has:</p>\n\n<pre><code># [START app_yaml]\nruntime: ruby\nenv: flex\nentrypoint: bundle exec ruby app.rb\n# [END app_yaml]\n</code></pre>\n\n<p>And app.rb is just a simple sinatra app.</p>\n\n<pre><code># [START app]\nrequire \"sinatra\"\nget \"/\" do\n  \"Hello world!\"\nend\n# [END app]\n</code></pre>\n\n<p>Rails configuration is a little bit more complex. First of all it seems that GCP App Engine doesn't support Puma (please correct me if I am wrong), but rackup, and you need to set some environment variables like the SECRET_KEY (use <code>bundle exec rails secret</code>), so your app.yaml file should be:</p>\n\n<pre><code># [START app_yaml]\nruntime: ruby\nenv: flex\nentrypoint: bundle exec rackup --port $PORT\nenv_variables:\n  SECRET_KEY_BASE: [SECRET_KEY]\n# [END app_yaml]\n</code></pre>\n\n<p>Remember you also need to run:</p>\n\n<pre><code>RAILS_ENV=production bundle exec rails assets:precompile\n</code></pre>\n\n<p>before running</p>\n\n<pre><code>gcloud app deploy\n</code></pre>\n\n<p>to precompile your assets.</p>\n\n<p>What you are looking for is in this guide: <a href=\"https://cloud.google.com/ruby/rails/appengine\" rel=\"nofollow noreferrer\">https://cloud.google.com/ruby/rails/appengine</a>, skip the initial steps (since you already have the app) and go straight to: \"Deploy the app to the App Engine flexible environment\"</p>\n\n<p>Sources:\nGoogle guide: <a href=\"https://cloud.google.com/ruby/rails/appengine\" rel=\"nofollow noreferrer\">https://cloud.google.com/ruby/rails/appengine</a></p>\n\n<p>Code: <a href=\"https://github.com/GoogleCloudPlatform/ruby-docs-samples/tree/master/appengine/rails-hello_world\" rel=\"nofollow noreferrer\">https://github.com/GoogleCloudPlatform/ruby-docs-samples/tree/master/appengine/rails-hello_world</a></p>\n\n<p>EDIT:\nI see you have some GET requests in your logs, so maybe Puma is supported. Try to just set up the SECRET_KEY and precompile your assets before deploy.</p>\n"}], "owner": {"reputation": 3588, "user_id": 1121139, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/c8ZRU.jpg?s=128&g=1", "display_name": "guisantogui", "link": "https://stackoverflow.com/users/1121139/guisantogui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 418, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1510088028, "creation_date": 1509540239, "last_edit_date": 1509620018, "question_id": 47055164, "link": "https://stackoverflow.com/questions/47055164/deploy-ruby-api-google-cloud", "title": "Deploy ruby api google cloud", "body": "<p>I'm pretty new to Google cloud and I have this issue when I try to deploy my ruby api to google cloud, here goes what I have done:</p>\n\n<p>I have uploaded my ruby api to github (it works fine on localhost), here >> <a href=\"https://github.com/guisantogui/it\" rel=\"nofollow noreferrer\">https://github.com/guisantogui/it</a></p>\n\n<p>I have been trough hello world google tutorial >> <a href=\"https://cloud.google.com/ruby/getting-started/hello-world\" rel=\"nofollow noreferrer\">https://cloud.google.com/ruby/getting-started/hello-world</a></p>\n\n<p>and it worked as expected, but when I upload my own application I got this <code>http 502 bad gateway</code> message, here goes the logs:</p>\n\n<pre><code>2017-10-30 23:48:53 default[20171030t213633]  =&gt; Booting Puma\n2017-10-30 23:48:53 default[20171030t213633]  =&gt; Rails 5.1.4 application starting in production \n2017-10-30 23:48:53 default[20171030t213633]  =&gt; Run `rails server -h` for more startup options\n2017-10-30 23:48:53 default[20171030t213633]  Puma starting in single mode... \n2017-10-30 23:48:53 default[20171030t213633]  * Version 3.10.0 (ruby 2.4.1-p111), codename: Russell's Teapot\n2017-10-30 23:48:53 default[20171030t213633]  * Min threads: 5, max threads: 5\n2017-10-30 23:48:53 default[20171030t213633]  * Environment: production\n2017-10-30 23:48:53 default[20171030t213633]  * Listening on tcp://0.0.0.0:3000 \n2017-10-30 23:48:53 default[20171030t213633] Use Ctrl-C to stop \n2017-10-30 23:58:01 default[20171030t213633]  \"GET /\" 502 \n2017-10-30 23:58:02 default[20171030t213633]  \"GET /favicon.ico\" 502 \n2017-10-30 23:58:06 default[20171030t213633]  \"GET /\" 502 \n2017-10-30 23:58:06 default[20171030t213633]  \"GET /favicon.ico\" 502 \n2017-11-01 10:54:50 default[20171030t213633]  \"GET /\" 502 \n2017-11-01 10:54:50 default[20171030t213633]  \"GET /favicon.ico\" 502 \n2017-11-01 10:55:02 default[20171030t213633]  \"GET /favicon.ico\" 502 \n2017-11-01 10:55:02 default[20171030t213633]  \"GET /tatoo_artis/list\" 502\n</code></pre>\n\n<p>And finally and i think more important the app.yaml file:</p>\n\n<pre><code>entrypoint: bundle exec rails server Puma -p 3000\nenv: flex\nruntime: ruby\n</code></pre>\n\n<p>Thanks in advance, i got no idea what is the problem and how to fix it!</p>\n"}, {"tags": ["arrays", "ruby", "raspberry-pi", "widget", "dashing"], "comments": [{"owner": {"reputation": 37, "user_id": 7401669, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/747f0e206e67591c7ab7e81a28ecbf0d?s=128&d=identicon&r=PG", "display_name": "Alex Arthur", "link": "https://stackoverflow.com/users/7401669/alex-arthur"}, "edited": false, "score": 0, "creation_date": 1509626227, "post_id": 47054434, "comment_id": 81099218, "body": "Having read up on the matter a good lot more this morning, I believe I&#39;ve been going about this the wrong way and that I need to create a hash rather than an array,"}], "answers": [{"tags": [], "owner": {"reputation": 37, "user_id": 7401669, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/747f0e206e67591c7ab7e81a28ecbf0d?s=128&d=identicon&r=PG", "display_name": "Alex Arthur", "link": "https://stackoverflow.com/users/7401669/alex-arthur"}, "is_accepted": true, "score": 0, "last_activity_date": 1510848483, "creation_date": 1510848483, "answer_id": 47334238, "question_id": 47054434, "link": "https://stackoverflow.com/questions/47054434/format-array-to-feed-into-smash-table-widget/47334238#47334238", "title": "Format Array to feed into Smash Table Widget", "body": "<p>It was quite a pain to get this working but I eventually got there.</p>\n\n<p>Just incase anyone comes across this via google. </p>\n\n<p>The desired format is an Array containing a new hash at each index, with each hash having a cols key which contains an array where each index is a column in the table. These are further contained within a hash which includes the various keys that are used to render the table.</p>\n"}], "owner": {"reputation": 37, "user_id": 7401669, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/747f0e206e67591c7ab7e81a28ecbf0d?s=128&d=identicon&r=PG", "display_name": "Alex Arthur", "link": "https://stackoverflow.com/users/7401669/alex-arthur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 47334238, "answer_count": 1, "score": 0, "last_activity_date": 1510848483, "creation_date": 1509538011, "last_edit_date": 1509573911, "question_id": 47054434, "link": "https://stackoverflow.com/questions/47054434/format-array-to-feed-into-smash-table-widget", "title": "Format Array to feed into Smash Table Widget", "body": "<p>I am creating a Smashing Dashboard that is required to feed information from an xlsx file into a table on the dashboard. This system is running on a Raspberry Pi.</p>\n\n<p>I am able to read from the spreadsheet using the roo gem, this works fine. However the table widget only accepts data in the form</p>\n\n<pre><code>[\n    {:cols=&gt;[\n        {:class=&gt;\"left\", :value=&gt;\"Office\", :style=&gt;\"color: #FFFFFF\"}, \n        {:class=&gt;\"left\", :value=&gt;\"Aberdeen\"}, \n        {:class=&gt;\"left\", :value=&gt;\"Australia\"}, \n        {:class=&gt;\"left\", :value=&gt;\"Eurocentral\"}, \n\n        ]\n    }, \n    {:cols=&gt;[{:class=&gt;\"left\", :value=&gt;\"Number\", :style=&gt;\"color: #FFFFFF\"}, \n        {:value=&gt;\"1234\"}, \n        {:value=&gt;\"5454\"}, \n        {:value=&gt;\"9999\"}\n        ]\n    }\n]\n</code></pre>\n\n<p>I am uncertain on how to go about forming an array in this format. I have attempted to loop through the cells in a column and put these into an array then to push these column arrays into a rows array. Below is the code I've written which is far off.</p>\n\n<pre><code>i = 0\n    maxRows = is.last_row\n    maxCols = is.last_column\n\n    rows = [] \n\n    #Loop from the first row to the last\n    loop do\n\n\n        #Break out of the loop if we're done\n        if (i &gt; maxRows)\n            break\n        end\n\n\n         #Put the row into the array as a new row\n\n        j = 0\n        cols = [] \n        loop do\n            cols[j] = \"{:value=&gt; #{is.cell(i,j)}}\"\n            j +=1 \n\n            if (j &gt; maxRows)\n                break\n            end\n\n\n\n        end\n\n        #rows.push(cols)\n\n\n\n    end\n</code></pre>\n\n<p>I'd appreciate any help on the matter. Resources I need to read, procedures I'm clearly unaware of or anything like this.</p>\n"}, {"tags": ["arrays", "ruby", "printing"], "comments": [{"owner": {"reputation": 2597, "user_id": 2948793, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/YkdhN.png?s=128&g=1", "display_name": "ConorB", "link": "https://stackoverflow.com/users/2948793/conorb"}, "edited": false, "score": 1, "creation_date": 1509532476, "post_id": 47052735, "comment_id": 81052570, "body": "Can you post the tests you&#39;re running against this code? I tested it locally and it worked as expected - i.e <code>print_songs</code> printed all the songs added to the artist I created."}, {"owner": {"reputation": 425, "user_id": 1583603, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nU3gz.jpg?s=128&g=1", "display_name": "dskecse", "link": "https://stackoverflow.com/users/1583603/dskecse"}, "edited": false, "score": 1, "creation_date": 1509532580, "post_id": 47052735, "comment_id": 81052630, "body": "@alexnewby what is considered a <code>song</code>? simply a <code>String</code>?"}, {"owner": {"reputation": 2597, "user_id": 2948793, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/YkdhN.png?s=128&g=1", "display_name": "ConorB", "link": "https://stackoverflow.com/users/2948793/conorb"}, "edited": false, "score": 1, "creation_date": 1509533006, "post_id": 47052735, "comment_id": 81052879, "body": "It looks like in your tests that a <code>song</code> is an object of some kind, so when you print you songs you&#39;re printing the song object rather than the string of the song name."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1509533236, "post_id": 47052735, "comment_id": 81053027, "body": "<i>&quot;I have tried at least 5 different ways to do it&quot;</i> \u2013 approaching problems this way will disguise the actual fault. If it used to work &quot;a million times&quot; then obviously <i>something else</i> is wrong. You have to fix <i>that</i> instead."}, {"owner": {"reputation": 41, "user_id": 5244092, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/85dc8164b8fbf6a6c99e4a0912af1799?s=128&d=identicon&r=PG&f=1", "display_name": "alexnewby", "link": "https://stackoverflow.com/users/5244092/alexnewby"}, "edited": false, "score": 0, "creation_date": 1509538367, "post_id": 47052735, "comment_id": 81055941, "body": "ok so the song is an object. When I do print song.to_s, it still doesn&#39;t work."}, {"owner": {"reputation": 5746, "user_id": 4984564, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9bc286af6678a63ceb881eaf9e966f5f?s=128&d=identicon&r=PG", "display_name": "DarkWiiPlayer", "link": "https://stackoverflow.com/users/4984564/darkwiiplayer"}, "edited": false, "score": 0, "creation_date": 1509542303, "post_id": 47052735, "comment_id": 81058526, "body": "@alexnewby Did you code the song class yourself, or do you just get the instance from someplace else? In the first case, you could just define <code>to_s</code>, in the second case you&#39;d need to look up how to get the song title (it&#39;s probably something trivial like <code>song.title</code>) and use that in your <code>print_songs</code> method."}, {"owner": {"reputation": 41, "user_id": 5244092, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/85dc8164b8fbf6a6c99e4a0912af1799?s=128&d=identicon&r=PG&f=1", "display_name": "alexnewby", "link": "https://stackoverflow.com/users/5244092/alexnewby"}, "edited": false, "score": 0, "creation_date": 1509543090, "post_id": 47052735, "comment_id": 81059053, "body": "There is another file, song.rb with a Song class. The Song belongs to Artist."}], "answers": [{"comments": [{"owner": {"reputation": 5746, "user_id": 4984564, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9bc286af6678a63ceb881eaf9e966f5f?s=128&d=identicon&r=PG", "display_name": "DarkWiiPlayer", "link": "https://stackoverflow.com/users/4984564/darkwiiplayer"}, "edited": false, "score": 2, "creation_date": 1509533838, "post_id": 47053113, "comment_id": 81053399, "body": "Not sure if this shouldn&#39;t be a comment rather than an answer. It doesn&#39;t really solve the problem but confirm OPs statement that it <i>should</i> work."}], "tags": [], "owner": {"reputation": 103, "user_id": 5923183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ew1qN.jpg?s=128&g=1", "display_name": "Luna Das", "link": "https://stackoverflow.com/users/5923183/luna-das"}, "is_accepted": false, "score": 0, "last_activity_date": 1509533244, "creation_date": 1509533244, "answer_id": 47053113, "question_id": 47052735, "link": "https://stackoverflow.com/questions/47052735/ruby-list-all-items-in-an-array/47053113#47053113", "title": "Ruby: List all items in an array", "body": "<p>It is working as expected.Lets look at tried.Could you post the test cases you have tried with?</p>\n\n<pre><code>a1 = Artist.create(name: 'Lana del re')\na1.add_song('Young and Beautiful')\na1.add_song('haunted')\na1.print_songs\n[\"Young and Beautiful\", \"haunted\"] #output assuming song as a String object \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 5244092, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/85dc8164b8fbf6a6c99e4a0912af1799?s=128&d=identicon&r=PG&f=1", "display_name": "alexnewby", "link": "https://stackoverflow.com/users/5244092/alexnewby"}, "edited": false, "score": 0, "creation_date": 1509537230, "post_id": 47053227, "comment_id": 81055291, "body": "Why doesn&#39;t song.to_s work? Why do I need to make a new method to_s?"}, {"owner": {"reputation": 425, "user_id": 1583603, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nU3gz.jpg?s=128&g=1", "display_name": "dskecse", "link": "https://stackoverflow.com/users/1583603/dskecse"}, "reply_to_user": {"reputation": 41, "user_id": 5244092, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/85dc8164b8fbf6a6c99e4a0912af1799?s=128&d=identicon&r=PG&f=1", "display_name": "alexnewby", "link": "https://stackoverflow.com/users/5244092/alexnewby"}, "edited": false, "score": 0, "creation_date": 1509539093, "post_id": 47053227, "comment_id": 81056379, "body": "@alexnewby by default, the call to <code>to_s</code> prints the object&#39;s class and an encoding of the object id like this: <code>&quot;#&lt;Song:0x007f9fd16a0770&gt;&quot;</code>. In order to change this one has to override the <code>to_s</code> method"}], "tags": [], "owner": {"reputation": 5746, "user_id": 4984564, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9bc286af6678a63ceb881eaf9e966f5f?s=128&d=identicon&r=PG", "display_name": "DarkWiiPlayer", "link": "https://stackoverflow.com/users/4984564/darkwiiplayer"}, "is_accepted": false, "score": 2, "last_activity_date": 1509541045, "last_edit_date": 1592644375, "creation_date": 1509533580, "answer_id": 47053227, "question_id": 47052735, "link": "https://stackoverflow.com/questions/47052735/ruby-list-all-items-in-an-array/47053227#47053227", "title": "Ruby: List all items in an array", "body": "<p>It's apparent that the song is probably just not a string, but an object of some sort. Add a <code>to_s</code> method to whatever object that is and puts should automatically call that, although you could, of course, also call to_s manually.</p>\n<p>Here's the quick test I did to confirm this behaviour</p>\n<pre><code>irb(main):001:0&gt; class Song\nirb(main):002:1&gt; def initialize(title)\nirb(main):003:2&gt; @title = title\nirb(main):004:2&gt; end\nirb(main):005:1&gt; end\n=&gt; :initialize\nirb(main):006:0&gt; s = Song.new &quot;scarborough fair&quot;\n=&gt; #&lt;Song:0x0000000030bb78 @title=&quot;scarborough fair&quot;&gt;\nirb(main):007:0&gt; puts s\n#&lt;Song:0x0000000030bb78&gt;\n=&gt; nil\nirb(main):008:0&gt; class Song\nirb(main):009:1&gt; def to_s\nirb(main):010:2&gt; return @title\nirb(main):011:2&gt; end\nirb(main):012:1&gt; end\n=&gt; :to_s\nirb(main):013:0&gt; puts s\nscarborough fair\n=&gt; nil\nirb(main):014:0&gt;\n</code></pre>\n<p>EDIT:</p>\n<h3>But why is this?</h3>\n<p>In short, when you create some custom object class, like <code>Song</code> in my example above, Ruby has no idea how to represent it as a string. The default <code>to_s</code> method simply outputs the class and the object ID, which is OK for debugging, but if there's some obvious way to represent the object as a string, like in the case of <code>Song</code> (one would expect song.to_s to return the song title), one has to override the default to_s method or include / inherit from another class/module that has a more fitting implementation of <code>to_s</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 5746, "user_id": 4984564, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9bc286af6678a63ceb881eaf9e966f5f?s=128&d=identicon&r=PG", "display_name": "DarkWiiPlayer", "link": "https://stackoverflow.com/users/4984564/darkwiiplayer"}, "edited": false, "score": 1, "creation_date": 1509541237, "post_id": 47055102, "comment_id": 81057826, "body": "That&#39;s partly incorrect; puts already takes care of calling <code>to_s</code> on non-string objects, so once you define Song.to_s, you can just do <code>puts instance_of_Song</code> and it will work just fine (see my answer, where I do precisely that in irb)"}, {"owner": {"reputation": 425, "user_id": 1583603, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nU3gz.jpg?s=128&g=1", "display_name": "dskecse", "link": "https://stackoverflow.com/users/1583603/dskecse"}, "reply_to_user": {"reputation": 5746, "user_id": 4984564, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9bc286af6678a63ceb881eaf9e966f5f?s=128&d=identicon&r=PG", "display_name": "DarkWiiPlayer", "link": "https://stackoverflow.com/users/4984564/darkwiiplayer"}, "edited": false, "score": 0, "creation_date": 1509544340, "post_id": 47055102, "comment_id": 81059967, "body": "@DarkWiiPlayer good call, I should have recalled this peculiarity"}], "tags": [], "owner": {"reputation": 425, "user_id": 1583603, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nU3gz.jpg?s=128&g=1", "display_name": "dskecse", "link": "https://stackoverflow.com/users/1583603/dskecse"}, "is_accepted": false, "score": 0, "last_activity_date": 1509545944, "last_edit_date": 1509545944, "creation_date": 1509540068, "answer_id": 47055102, "question_id": 47052735, "link": "https://stackoverflow.com/questions/47052735/ruby-list-all-items-in-an-array/47055102#47055102", "title": "Ruby: List all items in an array", "body": "<p>By default, the call to <code>to_s</code> prints the object's class name and an encoding of the object id like so: <code>\"#&lt;Song:0x007f9fd16a0770&gt;\"</code>. That said, you need to override the <code>to_s</code> method on a <code>Song</code> class:</p>\n\n<pre><code>class Song\n  def initialize(title)\n    @title = title\n  end\n\n  def to_s\n    @title\n  end\nend\n</code></pre>\n\n<p>Then you would need to modify the <code>print_songs</code> method accordingly on an existing <code>Artist</code> class:</p>\n\n<pre><code>def print_songs\n  puts @songs.each(&amp;:to_s)\nend\n</code></pre>\n\n<p>The <code>each(&amp;:to_s)</code> bit basically invokes the <code>to_s</code> method on each <code>Song</code> object passed to the block, which is essentially the same as</p>\n\n<pre><code>def print_songs\n  puts @songs.each { |song| song.to_s }\nend\n</code></pre>\n\n<p>This could've also been rewritten as just</p>\n\n<pre><code>def print_songs\n  puts @songs\nend\n</code></pre>\n\n<p>and in this case <code>puts</code> would implicitly invoke the <code>to_s</code> method on the elements of <code>@songs</code>.</p>\n"}], "owner": {"reputation": 41, "user_id": 5244092, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/85dc8164b8fbf6a6c99e4a0912af1799?s=128&d=identicon&r=PG&f=1", "display_name": "alexnewby", "link": "https://stackoverflow.com/users/5244092/alexnewby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2144, "favorite_count": 1, "answer_count": 3, "score": -1, "last_activity_date": 1509545944, "creation_date": 1509532067, "last_edit_date": 1509545163, "question_id": 47052735, "link": "https://stackoverflow.com/questions/47052735/ruby-list-all-items-in-an-array", "title": "Ruby: List all items in an array", "body": "<p>I have tried at least 5 different ways to do it, currently using the .each method. </p>\n\n<p>I believe the problem lies in the <code>print_songs</code> method at the bottom of the code block. </p>\n\n<p>The error I'm getting: </p>\n\n<pre><code>Artist #print_songs lists all of the artist's songs\n     Failure/Error: expect{artist.print_songs}.to output(\"Dirty Diana\\nBillie Jean\\n\").to_stdout\n       expected block to output \"Dirty Diana\\nBillie Jean\\n\" to stdout, but output \"#&lt;Song:0x000000019757b0&gt;\\n#&lt;Song:0x000000019756e8&gt;\\n\"\n       Diff:\n       @@ -1,3 +1,3 @@\n       -Dirty Diana\n       -Billie Jean\n       +#&lt;Song:0x000000019757b0&gt;\n       +#&lt;Song:0x000000019756e8&gt;\n</code></pre>\n\n<p>The code:</p>\n\n<pre><code>class Artist\n  attr_accessor :name, :song\n  @@all = []\n\n  def initialize(name)\n    @name = name\n    @songs = []\n  end\n\n  def add_song(song)\n    @songs &lt;&lt; song\n  end\n\n  def songs\n    @songs\n  end\n\n  def self.all\n    @@all\n  end\n\n  def save\n    self.class.all &lt;&lt; self\n  end\n\n  def self.create_by_name(name)\n    artist = Artist.new(name)\n  end\n\n  def self.find_or_create_by_name(name)\n    artist_name = @@all.detect{|x| x.name == name}\n    if artist_name == nil\n      self.create_by_name(name)\n    else\n      artist_name\n    end\n  end\n\n  def print_songs\n    @songs.each{|song| puts song}\n  end\n\nend\n</code></pre>\n\n<p>Song Class: </p>\n\n<pre><code>class Song\n  attr_accessor :name, :artist\n\n  def initialize(name)\n    @name = name\n  end\n\n  # def artist=(name)\n  #   self.artist = Artist.new(name)\n  # end\n\n  def self.new_by_filename(file_name)\n    file_name.basename(\"\")\n  end\n\nend\n</code></pre>\n\n<p>Answer:</p>\n\n<pre><code>def print_songs\n  @songs.each{|song| puts song.name}\nend\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "virtualbox", "bundler", "gemfile.lock"], "comments": [{"owner": {"reputation": 329, "user_id": 1919995, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/59f2e666102af47b6d8e989f7f435327?s=128&d=identicon&r=PG", "display_name": "Muhammad Yaseen", "link": "https://stackoverflow.com/users/1919995/muhammad-yaseen"}, "edited": false, "score": 0, "creation_date": 1509528620, "post_id": 47051722, "comment_id": 81050395, "body": "Regenerate Gemfile.lock. It seems like it was out of sync with the Gemfile."}, {"owner": {"reputation": 1, "user_id": 7600539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/809abb1370386322f0d8254dd4cd5112?s=128&d=identicon&r=PG&f=1", "display_name": "dianaalco", "link": "https://stackoverflow.com/users/7600539/dianaalco"}, "reply_to_user": {"reputation": 329, "user_id": 1919995, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/59f2e666102af47b6d8e989f7f435327?s=128&d=identicon&r=PG", "display_name": "Muhammad Yaseen", "link": "https://stackoverflow.com/users/1919995/muhammad-yaseen"}, "edited": false, "score": 0, "creation_date": 1509529152, "post_id": 47051722, "comment_id": 81050704, "body": "I tried to regenerate it, but it&#39;s still the same. When I run it in my local machine, it works, but it doesn&#39;t happen the same in the VM, which it&#39;s weird, because my local machine and the VMs share the project&#39;s folder."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1509529189, "post_id": 47051722, "comment_id": 81050719, "body": "&quot;If somebody has any suggestion about&quot;--The sentence is not completed."}, {"owner": {"reputation": 1, "user_id": 7600539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/809abb1370386322f0d8254dd4cd5112?s=128&d=identicon&r=PG&f=1", "display_name": "dianaalco", "link": "https://stackoverflow.com/users/7600539/dianaalco"}, "edited": false, "score": 0, "creation_date": 1509529330, "post_id": 47051722, "comment_id": 81050807, "body": "Well, I&#39;ve completed it now."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1509529761, "post_id": 47051722, "comment_id": 81051023, "body": "Permissions issue? How have you installed ruby? Via <code>sudo</code>? Don&#39;t; use <code>rbenv</code> or <code>rvm</code> and install it as the local user."}, {"owner": {"reputation": 1, "user_id": 7600539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/809abb1370386322f0d8254dd4cd5112?s=128&d=identicon&r=PG&f=1", "display_name": "dianaalco", "link": "https://stackoverflow.com/users/7600539/dianaalco"}, "edited": false, "score": 0, "creation_date": 1509530766, "post_id": 47051722, "comment_id": 81051573, "body": "Yes, I use rvm and I&#39;ve configured the permissions for the VMs. I have different versions of Ruby and it seems that Bundler is installing global gems, not only the ones from the gemfile, even when I set Ruby 1.9.3 with rvm. I don&#39;t know how to specify Bundler that only install those ones."}], "owner": {"reputation": 1, "user_id": 7600539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/809abb1370386322f0d8254dd4cd5112?s=128&d=identicon&r=PG&f=1", "display_name": "dianaalco", "link": "https://stackoverflow.com/users/7600539/dianaalco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 700, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1509529233, "creation_date": 1509528409, "last_edit_date": 1509529233, "question_id": 47051722, "link": "https://stackoverflow.com/questions/47051722/bundler-initialize-read-only-file-system-gemfile-lock", "title": "Bundler: `initialize&#39;: Read-only file system Gemfile.lock", "body": "<p>I'm running <code>bundle install</code> in a VM for an application in Ruby 1.9.3, Rails 3.0.20, Bundler 1.6.2, but it gives me this error about the gemfile.lock</p>\n\n<p>I guess that Bundler is using the global gems, but I need it to use strictly the versions from the gemfile.</p>\n\n<p>I've tried with the few solutions that I've found, but it's the same. If somebody has any suggestion about it.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1509528934, "post_id": 47051648, "comment_id": 81050577, "body": "<i>&quot;we can call the function inside rails&quot;</i> \u2013 which function?"}, {"owner": {"reputation": 2566, "user_id": 1578898, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13d8e2260005e30e823d507385019735?s=128&d=identicon&r=PG", "display_name": "vidur punj", "link": "https://stackoverflow.com/users/1578898/vidur-punj"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1509530218, "post_id": 47051648, "comment_id": 81051268, "body": "functions inside the rails controller."}, {"owner": {"reputation": 2566, "user_id": 1578898, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13d8e2260005e30e823d507385019735?s=128&d=identicon&r=PG", "display_name": "vidur punj", "link": "https://stackoverflow.com/users/1578898/vidur-punj"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1509532616, "post_id": 47051648, "comment_id": 81052650, "body": "def index can be redirected using redirect_to &#39;index&#39; or redirect_to :index both. so asking if both are same the reason. which cleared. thanks"}], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 4, "last_activity_date": 1509529321, "last_edit_date": 1509529321, "creation_date": 1509528761, "answer_id": 47051837, "question_id": 47051648, "link": "https://stackoverflow.com/questions/47051648/what-is-the-difference-between-symbols/47051837#47051837", "title": "What is the difference between symbols?", "body": "<p><code>:xyz</code> and <code>'xyz'</code> are indeed different. That does not contradict with the fact that a method can take either type of argument. For example, <code>Array#*</code> can take a <code>String</code> or <code>Integer</code> as an argument:</p>\n\n<pre><code>[\"a\", \"b\"] * \"foo\" # =&gt; \"afoob\"\n[\"a\", \"b\"] * 2 # =&gt; [\"a\", \"b\", \"a\", \"b\"]\n</code></pre>\n\n<p>but that does not mean that <code>\"foo\"</code> is the same as <code>2</code>.</p>\n\n<p>And if you follow the logic you are implying, it would mean that all objects in Ruby are the same.</p>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 3, "creation_date": 1509529254, "post_id": 47051851, "comment_id": 81050759, "body": "<code>1.0</code> is a <code>Float</code>, <code>1</code> is an <code>Integer</code>. An <code>Integer</code> is not a <code>Float</code>. Nevertheless <code>1.0 == 1</code> is <code>true</code>."}], "tags": [], "owner": {"reputation": 635, "user_id": 7842011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbca165d2a40ba6819b02b6b956778e1?s=128&d=identicon&r=PG&f=1", "display_name": "jk_", "link": "https://stackoverflow.com/users/7842011/jk"}, "is_accepted": true, "score": 0, "last_activity_date": 1509528819, "creation_date": 1509528819, "answer_id": 47051851, "question_id": 47051648, "link": "https://stackoverflow.com/questions/47051648/what-is-the-difference-between-symbols/47051851#47051851", "title": "What is the difference between symbols?", "body": "<p><code>:xyz</code> is a symbol. A symbol is an instance of the class <code>Symbol</code>. </p>\n\n<p><code>\"xyz</code>\" is a string. A string is not a Symbol.</p>\n\n<p>Therefore, <code>:xyz=='xyz'</code> is not true. Because the instance of <code>Symbol</code> that is <code>:xyz</code> is not equivalent to the instance of String <code>xyz</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 3, "last_activity_date": 1509539016, "last_edit_date": 1509539016, "creation_date": 1509538489, "answer_id": 47054598, "question_id": 47051648, "link": "https://stackoverflow.com/questions/47051648/what-is-the-difference-between-symbols/47054598#47054598", "title": "What is the difference between symbols?", "body": "<blockquote>\n  <p>I checked that <code>:xyz == 'xyz'</code> is <code>false</code>. But we can call functions inside rails with <code>:index</code> or <code>'index'</code>. Please clear my wonder.</p>\n</blockquote>\n\n<p>There is nothing mysterious about this.</p>\n\n<p><code>Symbol#==</code> is a method just like any other method. The person who wrote it, wrote it in such a way that it returns <code>false</code>. She could have written it to return <code>true</code> or return <code>42</code> or format your harddisk, but she decided to return <code>false</code>.</p>\n\n<p>Rails methods are methods just like any other method. The person who wrote them, wrote them in such a way that accepts either <code>Symbol</code>s or <code>String</code>s. She could have written them to accept only <code>Symbol</code>s or only <code>String</code>s or to accept only <code>String</code>s on even days of the week, only <code>String</code>s on odd days of the week, and only <code>Integer</code>s during a full moon, but she decided to accept both <code>String</code>s and <code>Symbol</code>s.</p>\n\n<p>The developers who write Rails and the developers who write Ruby are free to do in their methods whatever they want, just like you are free to do whatever you want in methods you write. You can write a method that accepts <code>String</code>s, you can write a method that accepts <code>Symbol</code>s, you can write a method that accepts both, you can write a method that accepts neither. It's your choice, just like it is the choice of the Rails and Ruby developers.</p>\n\n<p>It implies absolutely nothing about the relationship between <code>Symbol</code>s and <code>String</code>s.</p>\n"}, {"tags": [], "owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "is_accepted": false, "score": 2, "last_activity_date": 1509540399, "creation_date": 1509540399, "answer_id": 47055222, "question_id": 47051648, "link": "https://stackoverflow.com/questions/47051648/what-is-the-difference-between-symbols/47055222#47055222", "title": "What is the difference between symbols?", "body": "<p>My guess is that you've come across Rails' use of <code>HashWithIndifferentAccess</code>. This allows you to access a Hash using either a Symbol or a String.</p>\n\n<p>In other words, <code>params[:a]</code> is the same as <code>params[\"a\"]</code> because internally, <code>HashWithIndifferentAccess</code> converts all the keys to strings.</p>\n\n<p>See the <a href=\"http://api.rubyonrails.org/v5.0/classes/ActiveSupport/HashWithIndifferentAccess.html\" rel=\"nofollow noreferrer\">documentation</a> for more information.</p>\n"}], "owner": {"reputation": 2566, "user_id": 1578898, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13d8e2260005e30e823d507385019735?s=128&d=identicon&r=PG", "display_name": "vidur punj", "link": "https://stackoverflow.com/users/1578898/vidur-punj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 47051851, "answer_count": 4, "score": -3, "last_activity_date": 1509913017, "creation_date": 1509528135, "last_edit_date": 1509913017, "question_id": 47051648, "link": "https://stackoverflow.com/questions/47051648/what-is-the-difference-between-symbols", "title": "What is the difference between symbols?", "body": "<p>I checked that <code>:xyz == 'xyz'</code> is <code>false</code>. But we can call functions inside rails with <code>:index</code> or <code>'index'</code>. Please clear my wonder.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "session", "devise", "localhost"], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 4, "last_activity_date": 1509526757, "last_edit_date": 1509526757, "creation_date": 1509525931, "answer_id": 47051078, "question_id": 47051000, "link": "https://stackoverflow.com/questions/47051000/devise-session-does-not-persist-on-different-url/47051078#47051078", "title": "Devise session does not persist on different URL", "body": "<p>The fact that you are logged in is store in the <code>session</code> which is stored in a <code>cookie</code>. For security reasons, the browser sends cookies only to the URLs from which the cookie was set. </p>\n\n<p>From the browser's point of view, <code>localhost</code> and <code>127.0.0.1</code> are totally different URLs. Therefore the login information stored in the cookie on <code>localhost</code> is not sent to the server running at <code>127.0.0.1</code> and therefore the server running at <code>127.0.0.1</code> has no information about an existing session on <code>localhost</code>.</p>\n\n<p>UPDATE:</p>\n\n<p>Using the <code>cache_store</code> to store the session doesn't change anything because the information what session in the cache store belongs to the user is still stored in the cookie. </p>\n\n<p>Imaging that your server needs to store all generated sessions somewhere. And if a user comes backs the server needs to know which session belongs to the user. A simplified solution to this problem might be to assign a random number to each session and give the user this number (stored in the cookie). When the user returns the cookie is returned too and that allows the server to load the session by that number.</p>\n\n<p>And a cookie is bound to a domain. This is a security feature of the browser. If it didn't work that way all sessions would be sent to all domains: Google would know if you were logged in to Facebook, every website would know that you have a cookie from your bank... </p>\n"}], "owner": {"reputation": 6929, "user_id": 1262519, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/zvPMu.jpg?s=128&g=1", "display_name": "Sachin Singh", "link": "https://stackoverflow.com/users/1262519/sachin-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 431, "favorite_count": 1, "accepted_answer_id": 47051078, "answer_count": 1, "score": 0, "last_activity_date": 1509526757, "creation_date": 1509525615, "last_edit_date": 1509526072, "question_id": 47051000, "link": "https://stackoverflow.com/questions/47051000/devise-session-does-not-persist-on-different-url", "title": "Devise session does not persist on different URL", "body": "<p>I have a rails application and I am using devise for authentication.\nWhen I get logged in successfully on URL <a href=\"http://localhost:5000/\" rel=\"nofollow noreferrer\">http://localhost:5000/</a>,\nI try to access <a href=\"http://127.0.0.1:5000/\" rel=\"nofollow noreferrer\">http://127.0.0.1:5000/</a> in the same browser.\nI expect to be logged in as soon as I access it on <a href=\"http://127.0.0.1:5000/\" rel=\"nofollow noreferrer\">http://127.0.0.1:5000/</a> but application remains logged out. Whats going on I really cannot understand as I am trying to access both URLs in the same browser?</p>\n\n<p>UPDATE:</p>\n\n<p>my config/initializers/session_store.rb</p>\n\n<pre><code>Rails.application.config.session_store :cache_store, key: '_app'\n</code></pre>\n"}, {"tags": ["ruby", "liferay", "mechanize", "portlet"], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1509521365, "creation_date": 1509521365, "answer_id": 47050109, "question_id": 47048137, "link": "https://stackoverflow.com/questions/47048137/mechanize-link-with-producing-a-different-url/47050109#47050109", "title": "Mechanize &#39;link_with&#39; producing a different URL", "body": "<p><code>data-ppid</code> is a data attribute, which is supposed to be handled by JavaScript. The change of the URL is probably due to some Javascript code on the client side (and a redirect on the server side).</p>\n"}, {"tags": [], "owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "is_accepted": false, "score": 0, "last_activity_date": 1509579085, "creation_date": 1509579085, "answer_id": 47065267, "question_id": 47048137, "link": "https://stackoverflow.com/questions/47048137/mechanize-link-with-producing-a-different-url/47065267#47065267", "title": "Mechanize &#39;link_with&#39; producing a different URL", "body": "<p>Links that start with # are \"named links\" or \"bookmark links\" - they don't go anywhere, just jump you somewhere on the page.</p>\n\n<p>In other words, there's no reason to ever \"follow\" a link like that with mechanize.</p>\n"}], "owner": {"reputation": 1, "user_id": 3275984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71ad6b7ce508b50ed05f94b73376beee?s=128&d=identicon&r=PG&f=1", "display_name": "michael.graham", "link": "https://stackoverflow.com/users/3275984/michael-graham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 182, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1510032559, "creation_date": 1509509689, "last_edit_date": 1510032559, "question_id": 47048137, "link": "https://stackoverflow.com/questions/47048137/mechanize-link-with-producing-a-different-url", "title": "Mechanize &#39;link_with&#39; producing a different URL", "body": "<p>I accessed a page that has this link:</p>\n\n<pre><code>&lt;a class=\"portletpage-portlet-title is-active\" tabindex=\"0\" title=\"Registration\" data-ppid=\"registration_WAR_registration\" href=\"#registration\"&gt;Registration&lt;/a&gt;\n</code></pre>\n\n<p>The page is encrypted with SSL. The HTML attribute <code>href</code> is <code>#registration</code>. I am trying to follow this link get to the URL:</p>\n\n<pre><code>www.redacted.com/#registration\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>agent.get('*redacted*'). do |page|\npage.form_with(:action =&gt; '*redacted*') do |f|\n    f.field_with(:id =&gt; 'username').value = get_username()\n    f.field_with(:id =&gt; 'password').value = get_password()\nend.click_button\n\nagent.page.link_with(:text =&gt; 'Registration').click\n</code></pre>\n\n<p>When it clicks on the link, it produces the following error:</p>\n\n<pre><code>`fetch': 404 =&gt; Net::HTTPNotFound for https://*redacted*/group/1403104853945/academics?p_p_id=registration_WAR_uofsregistration&amp;p_p_state=maximized -- unhandled response (Mechanize::ResponseCodeError)\n    from /home/mike/.rvm/gems/ruby-2.4.1/gems/mechanize-2.7.5/lib/mechanize.rb:464:in `get'\n    from /home/mike/.rvm/gems/ruby-2.4.1/gems/mechanize-2.7.5/lib/mechanize.rb:348:in `click'\n    from /home/mike/.rvm/gems/ruby-2.4.1/gems/mechanize-2.7.5/lib/mechanize/page/link.rb:30:in `click'\n    from u-of-s-scraper.rb:34:in `&lt;main&gt;'\n</code></pre>\n\n<p>and comes up with the URL:</p>\n\n<pre><code>www.redacted.com/group/1403104853945/academics?p_p_id=registration_WAR_uofsregistration&amp;p_p_state=maximized\n</code></pre>\n\n<p>I'm not sure where Mechanize is getting the URL. The link has an attribute <code>data-ppid</code>, which appears to be contributing to the URL. Can anyone provide some insight?</p>\n\n<p>It turns out that the page is written using Liferay's Portlets. Unfortunately, Portlets are not directly URL accessible, so I am currently investigating a different means of scraping the page - potentially with Selenium or PhantomJS. </p>\n"}, {"tags": ["arrays", "ruby", "screen-scraping"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 8865982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7b2251fea146ab276128d7e487b760a?s=128&d=identicon&r=PG&f=1", "display_name": "liquidsword", "link": "https://stackoverflow.com/users/8865982/liquidsword"}, "edited": false, "score": 0, "creation_date": 1509510929, "post_id": 47048191, "comment_id": 81043649, "body": "Sorry I wasn&#39;t clear...I&#39;m trying to get the scraped data from school_1 to school_5 into: def self.schools         schools = []         schools &lt;&lt; self.scrape_cbs         schools     end"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 53, "user_id": 8865982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7b2251fea146ab276128d7e487b760a?s=128&d=identicon&r=PG&f=1", "display_name": "liquidsword", "link": "https://stackoverflow.com/users/8865982/liquidsword"}, "edited": false, "score": 1, "creation_date": 1509511053, "post_id": 47048191, "comment_id": 81043691, "body": "That is what I suggested in my answer above."}, {"owner": {"reputation": 53, "user_id": 8865982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7b2251fea146ab276128d7e487b760a?s=128&d=identicon&r=PG&f=1", "display_name": "liquidsword", "link": "https://stackoverflow.com/users/8865982/liquidsword"}, "edited": false, "score": 0, "creation_date": 1509670098, "post_id": 47048191, "comment_id": 81123295, "body": "Wait a minute...I wrote a whole paragraph explaining what the problem was and you, @sawa, edited it out  to just have it say &quot;I&#39;m working on scraping.&quot; WTF!!! is that about????"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1509510106, "creation_date": 1509510106, "answer_id": 47048191, "question_id": 47048067, "link": "https://stackoverflow.com/questions/47048067/shoveling-objects-into-an-array/47048191#47048191", "title": "Shoveling objects into an array", "body": "<p>Without any explanation, it is absolutely not clear what you are trying to do, but it is clear that in your <code>self.scrape_cbs</code> definition, the lines:</p>\n\n<pre><code>schools_1\n...\nschools_2\n...\n...\nschools_4\n</code></pre>\n\n<p>are meaningless. Perhaps, you intended to return an array like this from this method:</p>\n\n<pre><code>[schools_1, schools_2, ..., schools_5]\n</code></pre>\n\n<p>If so, put the line above as the last line of your method definition of <code>self.scrape_cbs</code>.</p>\n"}], "owner": {"reputation": 53, "user_id": 8865982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7b2251fea146ab276128d7e487b760a?s=128&d=identicon&r=PG&f=1", "display_name": "liquidsword", "link": "https://stackoverflow.com/users/8865982/liquidsword"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1509510106, "creation_date": 1509509279, "last_edit_date": 1509509784, "question_id": 47048067, "link": "https://stackoverflow.com/questions/47048067/shoveling-objects-into-an-array", "title": "Shoveling objects into an array", "body": "<p>I'm working on scraping.</p>\n\n<pre><code>class MMA::School\n    attr_accessor :name, :location_info, :url\n\n    def self.today\n        self.schools\n    end\n\n    def self.schools\n        schools = []\n        schools &lt;&lt; self.scrape_cbs\n        schools\n    end\n\n    def self.scrape_cbs\n        doc = Nokogiri::HTML(open(\"http://newyork.cbslocal.com/top-lists/5-best-mma-and-martial-arts-studios-in-new-york/\"))\n\n        schools_1 = self.new\n        schools_1.name = doc.search(\"//div/p/strong/span\").text.strip\n        schools_1.location_info = doc.search(\"//div/p\")[4].text.strip\n        schools_1.url = doc.search(\"//div/p/a\")[0].text.strip\n\n        schools_1\n\n        schools_2 = self.new\n        schools_2.name = doc.search(\"//div/p/span\")[0].text.strip\n        schools_2.location_info = doc.search(\"//div/p\")[7].text.strip\n        schools_2.url = doc.search(\"//div/p/a\")[2].text.strip\n\n        schools_2\n\n        schools_3 = self.new\n        schools_3.name = doc.search(\"//div/p/span\")[1].text.strip\n        schools_3.location_info = doc.search(\"//div/p\")[9].text.strip\n        schools_3.url = doc.search(\"//div/p/a\")[3].text.strip\n\n        schools_3\n\n        schools_4 = self.new\n        schools_4.name = doc.search(\"//div/p/span\")[2].text.strip\n        schools_4.location_info = doc.search(\"//div/p\")[12].text.strip\n        schools_4.url = doc.search(\"//div/p/a\")[5].text.strip\n\n        schools_4\n\n        schools_5 = self.new\n        schools_5.name = doc.search(\"//div/p/span\")[3].text.strip\n        schools_5.location_info = doc.search(\"//div/p\")[14].text.strip\n        schools_5.url = doc.search(\"//div/p/a\")[6].text.strip\n\n        schools_5\n    end   \nend\n</code></pre>\n\n<p>I have some trouble placing my scraped data into an empty array. It only pushes one of the <code>schools_1</code> etc. to the <code>schools</code> array.</p>\n\n<p>Does anyone have any suggestions on how to fix this?</p>\n"}, {"tags": ["php", "ruby", "symbols"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1509508747, "post_id": 47047954, "comment_id": 81043160, "body": "Can&#39;t PHP constant refer to anything?"}, {"owner": {"reputation": 20643, "user_id": 3684882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ff8NL.jpg?s=128&g=1", "display_name": "ArtisticPhoenix", "link": "https://stackoverflow.com/users/3684882/artisticphoenix"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1509509992, "post_id": 47047954, "comment_id": 81043437, "body": "@sawa - no they cant, for example you cannot put an object in a constant. Until recently you could only put primitives in there ( if I recall PHP7 allows arrays for constants now ).  That said I don&#39;t know how Ruby does it.  But saying <code>anything</code> is way to broad ... :-p"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1509510268, "post_id": 47047954, "comment_id": 81043494, "body": "I see. But it seems that PHP still allows much more things to be referred to as a constant."}, {"owner": {"reputation": 20643, "user_id": 3684882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ff8NL.jpg?s=128&g=1", "display_name": "ArtisticPhoenix", "link": "https://stackoverflow.com/users/3684882/artisticphoenix"}, "edited": false, "score": 0, "creation_date": 1509510619, "post_id": 47047954, "comment_id": 81043571, "body": "There are user defined global constants <code>define(&#39;Constant&#39;, $value )</code> and class constants  <code>class foo{ const Constant = 1; }</code> and  access with <code>foo:Constant;</code>  You can also go <code>$var = &#39;foo&#39;;</code> and then <code>$var::Constant;</code> but that might blow your mind."}, {"owner": {"reputation": 20643, "user_id": 3684882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ff8NL.jpg?s=128&g=1", "display_name": "ArtisticPhoenix", "link": "https://stackoverflow.com/users/3684882/artisticphoenix"}, "edited": false, "score": 0, "creation_date": 1509511000, "post_id": 47047954, "comment_id": 81043678, "body": "In either case <code>class constants</code> or <code>defined constants</code> you cant change the value at run time.  That is why they are constants.  Class constants are useful because they don&#39;t mess up the global space, and can be easier to locate then the global ones."}], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1509525516, "post_id": 47048655, "comment_id": 81048846, "body": "&quot;Most ruby implementations keep something called a symbol table that is internal to the interpreter. &quot; \u2013 Pretty much all language implementations have something like that, including (I&#39;m guessing) most PHP implementations (P8, Quercus, Peachpie, etc.). The difference is that Ruby, Smalltalk, Lisp, Erlang, Elixir, etc. expose it to the programmer."}, {"owner": {"reputation": 635, "user_id": 7842011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbca165d2a40ba6819b02b6b956778e1?s=128&d=identicon&r=PG&f=1", "display_name": "jk_", "link": "https://stackoverflow.com/users/7842011/jk"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1509526551, "post_id": 47048655, "comment_id": 81049311, "body": "@J&#246;rgWMittag Since humans are the ones programming things... understand?"}], "tags": [], "owner": {"reputation": 635, "user_id": 7842011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbca165d2a40ba6819b02b6b956778e1?s=128&d=identicon&r=PG&f=1", "display_name": "jk_", "link": "https://stackoverflow.com/users/7842011/jk"}, "is_accepted": true, "score": 5, "last_activity_date": 1509513490, "creation_date": 1509513490, "answer_id": 47048655, "question_id": 47047954, "link": "https://stackoverflow.com/questions/47047954/are-ruby-symbols-the-equivalent-of-php-constants/47048655#47048655", "title": "Are Ruby symbols the equivalent of PHP constants?", "body": "<p>Symbols in ruby and constants in PHP are not really equivalent. </p>\n\n<p>Most ruby implementations keep something called a symbol table that is internal to the interpreter. The symbol table stores identifiers used throughout a program, like method names, class names, and so on in said table. Lookups of said names are performed based on the integer position of said names in the symbol table. </p>\n\n<p>Symbols themselves are objects, and there is a 1-to-1 correspondence between symbol names and Symbol objects. So when you have e.g. <code>def hello ...</code> and call the <code>hello</code> method somewhere in a program, this is referring to the exact same object as if you'd referred to <code>:hello</code>. The symbol table is basically a way to avoid doing a bunch of string comparisons when referring to commonly-used names throughout a program. </p>\n\n<p>To illustrate, consider the following code: </p>\n\n<pre><code>class A\n  def hello\n    puts \"the method name is #{__method__}\"\n    puts \"the class of the method name is #{__method__.class}\"\n    puts \"the object ID of the name hello is #{__method__.__id__}\"\n  end\nend\n\nA.new.hello\nputs \"the object id of :hello is #{:hello.__id__}\"\n</code></pre>\n\n<p>This outputs: </p>\n\n<pre><code>$ the method name is hello\nthe class of the method name is Symbol\nthe object ID of the name hello is 898268\nthe object id of :hello is 898268\n</code></pre>\n\n<p>So, the method name 'hello' and the symbol :hello refer to the same object. Storing symbols in this way reduces object allocations -- as you hinted at -- and by extension makes looking up commonly-used names in a program much faster.</p>\n\n<p>Also, you can't assign values to symbols. e.g., <code>:hello = \"blah\"</code> won't work. Because :hello has a very concrete value according to the internal symbol table. So that's another obvious difference between ruby symbols and PHP constants. </p>\n\n<p>In PHP, a constant is an identifier bound to a value where the value is immutable for the duration of the program's execution. The value can be any object or value. If you have two PHP constants that refer to the same value, e.g. <code>define(\"A\", \"value\")</code> and <code>define(\"B\", \"value\")</code>, then this is actually two separate identifiers pointing to two unique values. </p>\n\n<p>So while <code>A</code> and <code>B</code> there point to the same semantic content, they do not point to a single identifiable object. And they do not reduce to a single identifiable object by referencing them. There's no internal store in PHP that keeps a map of common symbols-to-ids like there is for symbols in ruby. So I would not say that ruby symbols are the equivalent of PHP constants at all. </p>\n\n<p>[1] - <a href=\"https://ruby-doc.org/core-2.2.0/Symbol.html\" rel=\"noreferrer\">https://ruby-doc.org/core-2.2.0/Symbol.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 0, "last_activity_date": 1509525896, "creation_date": 1509525896, "answer_id": 47051064, "question_id": 47047954, "link": "https://stackoverflow.com/questions/47047954/are-ruby-symbols-the-equivalent-of-php-constants/47051064#47051064", "title": "Are Ruby symbols the equivalent of PHP constants?", "body": "<p>They have nothing to do with each other. Asking about their differences is like asking about the differences between a Toyota Corolla and the color blue.</p>\n\n<p>A <em>constant</em> is (as a first approximation) a variable that can only be assigned once, during initialization. A constant is an immutable <em>reference to a value</em>.</p>\n\n<p>A symbol is a value that represents the idea of a \"name\" (in the programming language sense), an \"identifier\" (again, in the programming language sense), or a \"label\". Just like a string is a value that represents the idea of \"text\". Symbols are immutable, immediate, and they evaluate to themselves.</p>\n\n<p>So, symbols are values, constants are not. (Constants are references <em>to</em> values). Symbols evaluate to themselves, constants evaluate to whatever value they reference. The symbol datatype essentially exposes something to the programmer that most language implementations (including Peachpie, P8, Quercus, and the other PHP implementations) have but that is usually not exposed: a symbol table. Symbols aren't unique to Ruby, they also exist in Smalltalk (where Ruby got them from), Newspeak, Self, most Lisps (including Clojure, Scheme, CommonLisp), Elixir, Erlang, ECMAScript, Scala, and many others.</p>\n"}], "owner": {"reputation": 45, "user_id": 7120923, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d2b63436fa0df6fd191c4f6fb7e453f3?s=128&d=identicon&r=PG&f=1", "display_name": "user7120923", "link": "https://stackoverflow.com/users/7120923/user7120923"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 47048655, "answer_count": 2, "score": 2, "last_activity_date": 1509525896, "creation_date": 1509508278, "last_edit_date": 1509508431, "question_id": 47047954, "link": "https://stackoverflow.com/questions/47047954/are-ruby-symbols-the-equivalent-of-php-constants", "title": "Are Ruby symbols the equivalent of PHP constants?", "body": "<p>It seems like there might be a difference on the memory-front, but otherwise, they seem fairly similar. Any differences I should be aware of?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "metaprogramming"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1509507955, "post_id": 47047866, "comment_id": 81042985, "body": "FYI, English an sentence ends with a period, not a comma."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1509508087, "post_id": 47047866, "comment_id": 81043011, "body": "If you are using a specific library or framework, mention that (if there is a tag, then tagging is enough).,"}, {"owner": {"reputation": 478, "user_id": 3568626, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8242a180ffea103035a63a0615154946?s=128&d=identicon&r=PG&f=1", "display_name": "HFX", "link": "https://stackoverflow.com/users/3568626/hfx"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 2, "creation_date": 1509508482, "post_id": 47047866, "comment_id": 81043104, "body": "@sawa Thanks for your advice and sorry for my bad english :D"}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1509514991, "post_id": 47047866, "comment_id": 81044748, "body": "is it a module or class?"}, {"owner": {"reputation": 478, "user_id": 3568626, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8242a180ffea103035a63a0615154946?s=128&d=identicon&r=PG&f=1", "display_name": "HFX", "link": "https://stackoverflow.com/users/3568626/hfx"}, "reply_to_user": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1509515575, "post_id": 47047866, "comment_id": 81044950, "body": "@Ilya Yes, it&#39;s a class that extends ActiveRecord::Base."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1509520471, "post_id": 47047866, "comment_id": 81046759, "body": "How about just replacing <code>alias_method_chain</code> with two <code>alias_method</code> calls?"}, {"owner": {"reputation": 3624, "user_id": 5615038, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wW8mP.jpg?s=128&g=1", "display_name": "fangxing", "link": "https://stackoverflow.com/users/5615038/fangxing"}, "edited": false, "score": 0, "creation_date": 1509520920, "post_id": 47047866, "comment_id": 81046936, "body": "Add <code>user_self=self</code> below <code>def configuration</code>, and then in the block call <code>super</code> by <code>user_self.super</code>."}, {"owner": {"reputation": 478, "user_id": 3568626, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8242a180ffea103035a63a0615154946?s=128&d=identicon&r=PG&f=1", "display_name": "HFX", "link": "https://stackoverflow.com/users/3568626/hfx"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1509521317, "post_id": 47047866, "comment_id": 81047110, "body": "@SergioTulentsev So we are going to bring <code>alias_method_chain</code> back? Is there a better way to make it work? I think it&#39;s the last option if there&#39;s no other ways, thanks."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1509522280, "post_id": 47047866, "comment_id": 81047475, "body": "@HFX: why do you think <code>alias_method_chain</code> (or what it does) is bad?"}, {"owner": {"reputation": 478, "user_id": 3568626, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8242a180ffea103035a63a0615154946?s=128&d=identicon&r=PG&f=1", "display_name": "HFX", "link": "https://stackoverflow.com/users/3568626/hfx"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1509522985, "post_id": 47047866, "comment_id": 81047785, "body": "@SergioTulentsev alias_method_chain was good at removing duplicated aliases, but it also came with a few problems of its own. For a start, alias_method_chain is just an encapsulation of an Around Alias (134), and Around Aliases have the subtle problems that you might remember from The Thor Example, on page 133. To make things worse, alias_method_chain turned out to be too clever for its own good: with all the method renaming and shuffling that was going on in Rails, it could become hard to track which version of a method you were actually calling.  (refer: Metaprogramming Ruby)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1509523079, "post_id": 47047866, "comment_id": 81047828, "body": "@HFX: ah yes, great book."}], "answers": [{"comments": [{"owner": {"reputation": 478, "user_id": 3568626, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8242a180ffea103035a63a0615154946?s=128&d=identicon&r=PG&f=1", "display_name": "HFX", "link": "https://stackoverflow.com/users/3568626/hfx"}, "edited": false, "score": 0, "creation_date": 1509517062, "post_id": 47049026, "comment_id": 81045445, "body": "I don&#39;t follow you. I think maybe you misunderstood what the problem is. What I want is calling <code>super</code> in the block and pass the block to another method, and keeping the <code>super</code> in the scope that creates the block. That is, the <code>super</code> should be the super of <code>User#configuration</code>, instead of the super of the method that calls the block(<code>Rails.cache.fetch</code> here)."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 478, "user_id": 3568626, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8242a180ffea103035a63a0615154946?s=128&d=identicon&r=PG&f=1", "display_name": "HFX", "link": "https://stackoverflow.com/users/3568626/hfx"}, "edited": false, "score": 0, "creation_date": 1509520982, "post_id": 47049026, "comment_id": 81046973, "body": "@HFX: interesting, this doesn&#39;t reproduce in my experiments."}, {"owner": {"reputation": 478, "user_id": 3568626, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8242a180ffea103035a63a0615154946?s=128&d=identicon&r=PG&f=1", "display_name": "HFX", "link": "https://stackoverflow.com/users/3568626/hfx"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1509522007, "post_id": 47049026, "comment_id": 81047381, "body": "@SergioTulentsev You are right. In fact I got <code>TypeError: can&#39;t cast Class </code>, and I misunderstood it."}], "tags": [], "owner": {"reputation": 1, "user_id": 5897329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b814de7834a4e4077bfeed035937d490?s=128&d=identicon&r=PG&f=1", "display_name": "Ritesh Jain Fujitsu Consulting", "link": "https://stackoverflow.com/users/5897329/ritesh-jain-fujitsu-consulting"}, "is_accepted": false, "score": -1, "last_activity_date": 1509515664, "creation_date": 1509515664, "answer_id": 47049026, "question_id": 47047866, "link": "https://stackoverflow.com/questions/47047866/how-to-call-super-in-a-block/47049026#47049026", "title": "How to call `super` in a block", "body": "<p>you can user Super in block.</p>\n\n<p>please see this, any issues let me know.</p>\n\n<p>Calling it as just 'super' will pass the block.\nsuper(*args, &amp;block)' will as well.</p>\n"}, {"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": -1, "last_activity_date": 1509522905, "last_edit_date": 1509522905, "creation_date": 1509522212, "answer_id": 47050310, "question_id": 47047866, "link": "https://stackoverflow.com/questions/47047866/how-to-call-super-in-a-block/47050310#47050310", "title": "How to call `super` in a block", "body": "<p>To start off, calling <code>super</code> in blocks <strong>does</strong> behave the way you want. Must be your console is in a corrupted state (or something).</p>\n\n<pre><code>class User\n  def professional?\n    Rails.cache.fetch(\"user_professional\")  do\n      puts 'running super'\n      super\n    end\n  end\nend\nUser.new.professional?\n# &gt;&gt; running super\n# =&gt; false\nUser.new.professional?\n# =&gt; false\n</code></pre>\n\n<p>Next, this looks like something <a href=\"http://gshutler.com/2013/04/ruby-2-module-prepend/\" rel=\"nofollow noreferrer\"><code>Module#prepend</code> was made to help with</a>.</p>\n\n<pre><code>module Cacher\n  def with_rails_cache(method)\n    mod = Module.new do\n      define_method method do\n        cache_key = \"my_cache_for_#{method}\"\n        Rails.cache.fetch(cache_key) do\n          puts \"filling the cache\"\n          super()\n        end\n      end\n    end\n    prepend mod\n  end\nend\n\nclass User\n  extend Cacher\n\n  with_rails_cache :professional?\nend\nUser.new.professional?\n# &gt;&gt; filling the cache\n# =&gt; false\nUser.new.professional?\n# =&gt; false\n</code></pre>\n"}], "owner": {"reputation": 478, "user_id": 3568626, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8242a180ffea103035a63a0615154946?s=128&d=identicon&r=PG&f=1", "display_name": "HFX", "link": "https://stackoverflow.com/users/3568626/hfx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 0, "accepted_answer_id": 47050310, "answer_count": 2, "score": 2, "last_activity_date": 1509522905, "creation_date": 1509507551, "last_edit_date": 1509522671, "question_id": 47047866, "link": "https://stackoverflow.com/questions/47047866/how-to-call-super-in-a-block", "title": "How to call `super` in a block", "body": "<p>I have a block of code. It was:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  def configuration_with_cache\n    Rails.cache.fetch(\"user_#{id}_configuration\") do\n      configuration_without_cache\n    end\n  end\n  alias_method_chain :configuration, :cache\nend\n</code></pre>\n\n<p>I want to remove the notorious <code>alias_method_chain</code>, so I decided to refactor it. Here is my version:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  def configuration\n    Rails.cache.fetch(\"#{id}_agency_configuration\") do\n      super\n    end\n  end\nend\n</code></pre>\n\n<p>But it doesn't work. <del>The super enters a new scope. How can I make it work?</del> I got <code>TypeError: can't cast Class</code>, and I misunderstood it.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "nested-forms"], "answers": [{"tags": [], "owner": {"reputation": 576, "user_id": 6432658, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/9UtJH.png?s=128&g=1", "display_name": "MisterCal", "link": "https://stackoverflow.com/users/6432658/mistercal"}, "is_accepted": true, "score": 2, "last_activity_date": 1509500804, "last_edit_date": 1509500804, "creation_date": 1509500152, "answer_id": 47046967, "question_id": 47046906, "link": "https://stackoverflow.com/questions/47046906/problems-with-rails-nested-form/47046967#47046967", "title": "Problems with rails nested_form", "body": "<p>You need to add a foreign key <code>product_id</code> on your <code>imagenes_productos</code> table so rails is aware of the relationship. That is the reason for the error.\nAlso, with image_tag  your going to have to specify the source of your picture in this format  <code>image_tag(source, options={})</code>  so you might want to do something more along the lines of <code>image_tag(\"#{imagen.name}\" + \".png\")</code> or whatever the format of your image is. </p>\n"}], "owner": {"reputation": 23, "user_id": 6866642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd5b9a8b58b066fbfc33898938960a2c?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Avila Gurrola", "link": "https://stackoverflow.com/users/6866642/luis-avila-gurrola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 47046967, "answer_count": 1, "score": 0, "last_activity_date": 1509500804, "creation_date": 1509499594, "question_id": 47046906, "link": "https://stackoverflow.com/questions/47046906/problems-with-rails-nested-form", "title": "Problems with rails nested_form", "body": "<p>Good day for everyone, I have a problem that does not let me sleep, I'm new to Rails and I want to create an ecommerce, I have products and each of those products can have more than one image so I use nested_forms to create one-to-many relationships. Apparently if they are uploaded to the server but this problem appears:\n<a href=\"https://i.stack.imgur.com/EmNtZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EmNtZ.png\" alt=\"enter image description here\"></a></p>\n\n<p>I have this code:</p>\n\n<p>product.rb</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>class Product &lt; ApplicationRecord\r\n\thas_many :imagenes_productos\r\n  \taccepts_nested_attributes_for :imagenes_productos, allow_destroy: true\r\n\t#paperclip para subir imagenes\r\n\thas_attached_file :imagenPrincipal, style: {medium: \"1280x720\", thumb:\"800x600\"}\r\n\tvalidates_attachment_content_type :imagenPrincipal, content_type: /\\Aimage\\/.*\\z/\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>imagenes_producto.rb</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>class ImagenesProducto &lt; ApplicationRecord\r\n\tbelongs_to :product\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>_form.erb</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;%= javascript_include_tag \"application\", \"nested_form\" %&gt;\r\n\r\n\r\n&lt;div id=\"principalNuevoProducto\"&gt;\r\n  &lt;div id=\"centradoNuevoProducto\"&gt;\r\n    &lt;%= nested_form_for(@product) do |form| %&gt;\r\n      &lt;% if product.errors.any? %&gt;\r\n        &lt;div id=\"error_explanation\"&gt;\r\n          &lt;h2&gt;&lt;%= pluralize(product.errors.count, \"error\") %&gt; prohibited this product from being saved:&lt;/h2&gt;\r\n\r\n          &lt;ul&gt;\r\n          &lt;% product.errors.full_messages.each do |message| %&gt;\r\n            &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\r\n          &lt;% end %&gt;\r\n          &lt;/ul&gt;\r\n        &lt;/div&gt;\r\n      &lt;% end %&gt;\r\n\r\n    &lt;div id=\"izquierdaNuevoProducto\"&gt;\r\n      &lt;div id=\"detallesProducto\"&gt;\r\n        &lt;h2 id=\"subtitulosNuevoProducto\"&gt;Detalles del producto&lt;/h2&gt;\r\n        &lt;div id=\"contenidoDetallesProducto\"&gt;\r\n          &lt;%= form.text_field :nombre, id: :product_nombre, placeholder: \"Nombre de tu producto\" %&gt;\r\n          &lt;%= form.text_area :descripcionBreve, id: :product_descripcionBreve, placeholder: \"Escribe una descripci\u00f3n breve sobre tu producto o servicio...\" %&gt;\r\n            &lt;div id=\"contenedorFileField\"&gt;\r\n              &lt;p&gt;A\u00f1adir imagen principal:&lt;/p&gt;\r\n              &lt;%= form.file_field :imagenPrincipal, class:\"upload\" %&gt;\r\n            &lt;/div&gt;\r\n            &lt;div id=\"contenedorYoutubeURL\"&gt;\r\n              &lt;p&gt;URL de video de Youtube:&lt;/p&gt;\r\n              &lt;%= form.text_field :URLvideo, id: :product_URLvideo, placeholder: 'https://www.youtube.com/watch?v=-1111111' %&gt;\r\n            &lt;/div&gt;\r\n            &lt;fieldset id=\"tareas\"&gt;\r\n              &lt;p&gt;A\u00f1adir im\u00e1genes secundarias&lt;/p&gt;\r\n              &lt;%= form.fields_for :imagenes_productos do |imagenes_form| %&gt;\r\n                &lt;%= imagenes_form.file_field :imagen %&gt;\r\n\r\n                &lt;%= imagenes_form.link_to_remove \"Eliminar esta imagen\" %&gt;\r\n              &lt;% end %&gt;\r\n              &lt;p&gt;&lt;%= form.link_to_add \"Agregar una imagen\", :imagenes_productos %&gt;&lt;/p&gt;\r\n            &lt;/fieldset&gt;\r\n        &lt;/div&gt; \r\n      &lt;/div&gt;  \r\n\r\n      &lt;div id=\"descripcionDetallada\"&gt;\r\n        &lt;h2 id=\"subtitulosNuevoProducto\"&gt;Decripci\u00f3n detallada&lt;/h2&gt;\r\n        &lt;div id=\"editor\"&gt;&lt;/div&gt;\r\n        &lt;%= form.hidden_field :descripcionDetallada, id: :product_descripcionDetallada %&gt;\r\n      &lt;/div&gt;\r\n\r\n      &lt;div id=\"inventario\"&gt;\r\n        &lt;h2 id=\"subtitulosNuevoProducto\"&gt;Inventario&lt;/h2&gt;\r\n        &lt;div id=\"contenidoInventario\"&gt;\r\n          &lt;p&gt;\r\n            \u00bfDesea manejar inventario de este producto?\r\n          &lt;/p&gt;\r\n          &lt;%= form.select(:manejarInventario, ['Si', 'No'], {}, {:class =&gt; 'manejarInventario'}) %&gt;\r\n          &lt;p id=\"cantidadProductos\"&gt;Cantidad de productos disponibles&lt;/p&gt;\r\n          &lt;%= form.text_field :stock, placeholder:'0', id:'stock' %&gt;\r\n        &lt;/div&gt;\r\n      &lt;/div&gt;\r\n\r\n      &lt;div id=\"detallesCompra\"&gt;\r\n        &lt;h2 id=\"subtitulosNuevoProducto\"&gt;Detalles de compra&lt;/h2&gt;\r\n        &lt;div id=\"contenidoDetallesCompra\"&gt;\r\n          &lt;div id=\"izquierdaDetallesCompra\"&gt;\r\n             &lt;%= form.text_field :precioNormal, id: :product_precioNormal, placeholder:'Precio', class:'fieldsDetallesCompra' %&gt;\r\n             &lt;p&gt;\r\n               Seleccione cuando comenzar\u00e1 la oferta:\r\n             &lt;/p&gt;\r\n             &lt;%= form.datetime_select(:inicioOferta, prompt: { day: 'D\u00eda', month: 'Mes', year: 'A\u00f1o', hour: 'Hora', minute:'Minutos' }, order: [:day, :month, :year], start_year: 2017) %&gt;\r\n             &lt;%= form.text_field :diasAnticipacion, id: :product_diasAnticipacion, placeholder: 'D\u00edas de anticipaci\u00f3n para entrega de resultado', class:'fieldsDetallesCompra' %&gt;\r\n          &lt;/div&gt;\r\n          &lt;div id=\"derechaDetallesCompra\"&gt;\r\n            &lt;%= form.text_field :precioOferta, id: :product_precioOferta, placeholder: 'Precio de oferta', class:'fieldsDetallesCompra' %&gt;\r\n            &lt;p&gt;\r\n               Seleccione cuando terminar\u00e1 la oferta:\r\n             &lt;/p&gt;\r\n            &lt;%= form.datetime_select(:terminoOferta, prompt: { day: 'D\u00eda', month: 'Mes', year: 'A\u00f1o', hour: 'Hora', minute:'Minutos' }, order: [:day, :month, :year], start_year: 2017) %&gt;\r\n            &lt;%= form.text_field :entregaResultados, id: :product_entregaResultados, placeholder: 'D\u00edas para entrega de resultados', class:'fieldsDetallesCompra' %&gt;\r\n          &lt;/div&gt;\r\n          &lt;p id=\"preguntaDetallesCompra\"&gt;\u00bfPermite pedidos con menor tiempo de anticipaci\u00f3n? De ser as\u00ed, \u00bfCu\u00e1nto aumenta el costo?&lt;/p&gt;\r\n          &lt;%= form.select(:menorAnticipacion, options_for_select([['Acepto con retraso', 1],['No acepto con retraso', 0]]), {}, {:class =&gt; 'anticipacion_field'}) %&gt;\r\n          &lt;%= form.select(:diasAtrasoAnticipacion, options_for_select([['1 dia anticipaci\u00f3n', 1],['2 d\u00edas anticipaci\u00f3n', 2],['3 dias anticipaci\u00f3n', 3],['4 dias anticipaci\u00f3n', 4],['5 dias anticipaci\u00f3n', 5], ['6 dias anticipaci\u00f3n', 6],['7 dias anticipaci\u00f3n', 7], ['8 dias anticipaci\u00f3n', 8], ['9 dias anticipaci\u00f3n', 9],['10 dias anticipaci\u00f3n', 10], ['11 dias anticipaci\u00f3n', 11], ['12 dias anticipaci\u00f3n', 12], ['13 dias anticipaci\u00f3n', 13], ['14 dias anticipaci\u00f3n', 14], ['15 dias anticipaci\u00f3n', 15], ['16 dias anticipaci\u00f3n', 16], ['17 dias anticipaci\u00f3n', 17], ['18 dias anticipaci\u00f3n', 18], ['19 dias anticipaci\u00f3n', 19], ['20 dias anticipaci\u00f3n', 20], ['21 dias anticipaci\u00f3n', 21], ['22 dias anticipaci\u00f3n', 22], ['23 dias anticipaci\u00f3n', 23], ['24 dias anticipaci\u00f3n', 24], ['25 dias anticipaci\u00f3n', 25], ['26 dias anticipaci\u00f3n', 26], ['27 dias anticipaci\u00f3n', 27], ['28 dias anticipaci\u00f3n', 28], ['29 dias anticipaci\u00f3n', 29], ['Un mes', 30], ['Un mes y una semana', 37], ['Un mes y dos semanas', 45], ['Un mes y tres semanas', 52], ['Dos meses', 60]]), {}, {:class =&gt; 'atrasoAnticipacion_field'}) %&gt;\r\n          &lt;%= form.text_field :aumentoAtrasoAnticipacion, id: :product_aumentoAtrasoAnticipacion, placeholder: '100.00' %&gt;\r\n          &lt;p id=\"tituloMetodosPago\"&gt;M\u00e9todos de pago&lt;/p&gt;\r\n          &lt;p id=\"pmetodos\"&gt;Indique hasta en cuantos pagos podr\u00e1 liquidar el cliente&lt;/p&gt;\r\n          &lt;%= form.select(:numeroPagos, options_for_select([['1 pago', 1], ['3 pagos', 3], ['6 pagos', 6], ['9 pagos', 9], ['12 pagos', 12]]), {}, {:class =&gt; 'numeroPagos_field'}) %&gt;\r\n          &lt;p id=\"pmetodos\"&gt;Indique con cuantos d\u00edas de anticipaci\u00f3n debe estar liquidado el total de la compra&lt;/p&gt;\r\n          &lt;%= form.select(:diasAnticipoLiquidacion, options_for_select([['1 dia anticipaci\u00f3n', 1],['2 d\u00edas anticipaci\u00f3n', 2],['3 dias anticipaci\u00f3n', 3],['4 dias anticipaci\u00f3n', 4],['5 dias anticipaci\u00f3n', 5], ['6 dias anticipaci\u00f3n', 6],['7 dias anticipaci\u00f3n', 7], ['8 dias anticipaci\u00f3n', 8], ['9 dias anticipaci\u00f3n', 9],['10 dias anticipaci\u00f3n', 10], ['11 dias anticipaci\u00f3n', 11], ['12 dias anticipaci\u00f3n', 12], ['13 dias anticipaci\u00f3n', 13], ['14 dias anticipaci\u00f3n', 14], ['15 dias anticipaci\u00f3n', 15], ['16 dias anticipaci\u00f3n', 16], ['17 dias anticipaci\u00f3n', 17], ['18 dias anticipaci\u00f3n', 18], ['19 dias anticipaci\u00f3n', 19], ['20 dias anticipaci\u00f3n', 20], ['21 dias anticipaci\u00f3n', 21], ['22 dias anticipaci\u00f3n', 22], ['23 dias anticipaci\u00f3n', 23], ['24 dias anticipaci\u00f3n', 24], ['25 dias anticipaci\u00f3n', 25], ['26 dias anticipaci\u00f3n', 26], ['27 dias anticipaci\u00f3n', 27], ['28 dias anticipaci\u00f3n', 28], ['29 dias anticipaci\u00f3n', 29], ['Un mes', 30], ['Un mes y una semana', 37], ['Un mes y dos semanas', 45], ['Un mes y tres semanas', 52], ['Dos meses', 60]]), {}, {:class =&gt; 'anticipacionLiquidacion_field'}) %&gt;\r\n          &lt;p id=\"pmetodos\"&gt;\u00bfPermitir\u00e1 a sus clientes manejar pagos libres? De lo contrario se manejar\u00e1n pagos iguales.&lt;/p&gt;\r\n          &lt;%= form.select(:permitePagosLibres, ['Si', 'No'], {}, {:class =&gt; 'pagosLibres_field'}) %&gt;\r\n        &lt;/div&gt;\r\n      &lt;/div&gt;\r\n\r\n\r\n    &lt;/div&gt; &lt;!-- Aqui cierra izquierdaNuevoProducto --&gt;\r\n    \r\n    &lt;div id=\"derechaNuevoProducto\"&gt;\r\n      &lt;div id=\"publicarProducto\"&gt;\r\n        &lt;h2 id=\"subtitulosNuevoProducto\"&gt;Publicar producto o servicio&lt;/h2&gt;\r\n        &lt;div id=\"contenidoPublicar\"&gt;\r\n          &lt;div id=\"botonVistaPrevia\"&gt;\r\n            &lt;p style=\"float: left;\"&gt;Vista previa&lt;/p&gt;\r\n            &lt;img src=\"/assets/eye.png\" style=\"float: left;\"&gt;\r\n          &lt;/div&gt;\r\n          &lt;%= form.select(:visible, ['Visible', 'Oculto'], {}, {:class =&gt; 'visible_field'}) %&gt;\r\n          &lt;div id=\"botonesPublicarProducto\"&gt;\r\n            &lt;div class=\"boton-publicar gris\"&gt;\r\n              &lt;p&gt;Cancelar&lt;/p&gt;\r\n            &lt;/div&gt;\r\n            &lt;%= form.submit 'Publicar', :class =&gt; 'boton-publicar azul' %&gt;\r\n          &lt;/div&gt;\r\n        &lt;/div&gt;\r\n      &lt;/div&gt;\r\n      &lt;!-- Modificar --&gt;\r\n      &lt;div id=\"tipoEvento\"&gt;\r\n        &lt;h2 id=\"subtitulosNuevoProducto\"&gt;Tipo de evento&lt;/h2&gt;\r\n        &lt;div id=\"contenidoTipoEvento\"&gt;\r\n          &lt;p&gt;Categoria&lt;/p&gt;\r\n          &lt;%= form.select(:categoria, ['Fotograf\u00eda y video', 'Invitaciones', 'Cabinas de fotos', 'Spa', 'Pasteleria', 'Est\u00e9ticas', 'Letras gigantes', 'Organizadores de eventos', 'Tuxedos', 'Renta de autos o transporte', 'Decoraci\u00f3n y manteler\u00eda', 'Cocteler\u00eda/shots/licores', 'Grupos musicales o djs', 'Agencia de viajes', 'Salones ', 'Vestidos', 'Florerias', 'Candy bar', 'Coreografias', 'Animaci\u00f3n','Guarder\u00edas para eventos', 'Religiosos', 'Servicios banquetes y alimentos']) %&gt;\r\n        &lt;/div&gt;\r\n      &lt;/div&gt;\r\n      &lt;div id=\"lugarEntrega\"&gt;\r\n        &lt;h2 id=\"subtitulosNuevoProducto\"&gt;Lugar de entrega&lt;/h2&gt;\r\n        &lt;div id=\"contenidoLugarEntrega\"&gt;\r\n          &lt;p&gt;Escribe el lugar de entrega&lt;/p&gt;\r\n          &lt;%= form.text_field :lugarEntrega, placeholder:'Ej. A domicilio o calle Prime #3125', id: :product_lugarEntrega %&gt;\r\n        &lt;/div&gt;\r\n      &lt;/div&gt;\r\n      &lt;div id=\"duracionServicio\"&gt;\r\n        &lt;h2 id=\"subtitulosNuevoProducto\"&gt;Duraci\u00f3n del servicio&lt;/h2&gt;\r\n        &lt;div id=\"contenidoDuracionServicio\"&gt;\r\n          &lt;p&gt;Si est\u00e1s ofreciendo un servicio y no un producto espec\u00edfica la duraci\u00f3n de tu servicio: &lt;/p&gt;\r\n          &lt;%= form.select(:duracionServicio, ['00:30:00', '01:00:00', '01:30:00', '02:00:00', '02:30:00', '03:00:00', '03:30:00', '04:00:00', '04:30:00', '05:00:00', '05:30:00', '06:00:00', '06:30:00', '07:00:00', '07:30:00', '08:00:00', '08:30:00', '09:00:00', '09:30:00', '10:00:00', '10:30:00', '11:00:00', '11:30:00', '12:00:00', '12:30:00', '13:00:00', '13:30:00', '14:00:00', '14:30:00', '15:00:00', '15:30:00', '16:00:00', '16:30:00', '17:00:00', '17:30:00', '18:00:00', '18:30:00', '19:00:00', '19:30:00', '20:00:00', '20:30:00', '21:00:00', '21:30:00', '22:00:00', '22:30:00', '23:00:00', '23:30:00', '24:00:00'], {}, {:class =&gt; 'servicio_field'}) %&gt; hrs\r\n          \r\n        &lt;/div&gt;\r\n      &lt;/div&gt;\r\n\r\n    &lt;/div&gt;\r\n    &lt;% end %&gt;\r\n  &lt;/div&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>products_controller.rb</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>class ProductsController &lt; ApplicationController\r\n  before_action :set_product, only: [:show, :edit, :update, :destroy]\r\n\r\n  # GET /products\r\n  # GET /products.json\r\n  def index\r\n    @products = Product.all\r\n  end\r\n\r\n  # GET /products/1\r\n  # GET /products/1.json\r\n  def show\r\n  end\r\n\r\n  # GET /products/new\r\n  def new\r\n    @product = Product.new\r\n  end\r\n\r\n  # GET /products/1/edit\r\n  def edit\r\n  end\r\n\r\n  # POST /products\r\n  # POST /products.json\r\n  def create\r\n    @product = Product.new(product_params)\r\n\r\n    respond_to do |format|\r\n      if @product.save\r\n        format.html { redirect_to @product, notice: 'Product was successfully created.' }\r\n        format.json { render :show, status: :created, location: @product }\r\n      else\r\n        format.html { render :new }\r\n        format.json { render json: @product.errors, status: :unprocessable_entity }\r\n      end\r\n    end\r\n  end\r\n\r\n  # PATCH/PUT /products/1\r\n  # PATCH/PUT /products/1.json\r\n  def update\r\n    respond_to do |format|\r\n      if @product.update(product_params)\r\n        format.html { redirect_to @product, notice: 'Product was successfully updated.' }\r\n        format.json { render :show, status: :ok, location: @product }\r\n      else\r\n        format.html { render :edit }\r\n        format.json { render json: @product.errors, status: :unprocessable_entity }\r\n      end\r\n    end\r\n  end\r\n\r\n  # DELETE /products/1\r\n  # DELETE /products/1.json\r\n  def destroy\r\n    @product.destroy\r\n    respond_to do |format|\r\n      format.html { redirect_to products_url, notice: 'Product was successfully destroyed.' }\r\n      format.json { head :no_content }\r\n    end\r\n  end\r\n\r\n  private\r\n    # Use callbacks to share common setup or constraints between actions.\r\n    def set_product\r\n      @product = Product.find(params[:id])\r\n    end\r\n\r\n    # Never trust parameters from the scary internet, only allow the white list through.\r\n    def product_params\r\n      params.require(:product).permit(:nombre, :descripcionBreve, :descripcionDetallada, :precioNormal, :precioOferta, :inicioOferta, :terminoOferta, :calificacion, :entregaResultados, :duracionServicio, :URLvideo, :categoria, :subcategoria, :lugarEntrega, :diasAnticipacion, :menorAnticipacion, :diasAtrasoAnticipacion, :aumentoAtrasoAnticipacion, :numeroPagos, :diasAnticipoLiquidacion, :imagenPrincipal, :visible, :manejarInventario, :stock, :permitePagosLibres, imagenes_producto_attributes: [:imagen, :_destroy])\r\n    end\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>show.erb</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;p id=\"notice\"&gt;&lt;%= notice %&gt;&lt;/p&gt;\r\n\r\n&lt;p&gt;\r\n  &lt;strong&gt;Nombre:&lt;/strong&gt;\r\n  &lt;%= @product.nombre %&gt;\r\n&lt;/p&gt;\r\n&lt;h2&gt;Imagen principal&lt;/h2&gt;\r\n&lt;%= image_tag @product.imagenPrincipal %&gt;\r\n&lt;h2&gt;Imagenes secundarias&lt;/h2&gt;\r\n&lt;% @product.imagenes_productos.each do |imagen| %&gt;\r\n    &lt;%= image_tag imagen.imagen %&gt;\r\n&lt;% end %&gt;\r\n&lt;p&gt;\r\n  &lt;strong&gt;Descripcionbreve:&lt;/strong&gt;\r\n  &lt;%= @product.descripcionBreve %&gt;\r\n&lt;/p&gt;\r\n\r\n&lt;p&gt;\r\n  &lt;strong&gt;Descripciondetallada:&lt;/strong&gt;\r\n  &lt;%= @product.descripcionDetallada %&gt;\r\n&lt;/p&gt;\r\n\r\n&lt;p&gt;\r\n  &lt;strong&gt;Precionormal:&lt;/strong&gt;\r\n  &lt;%= @product.precioNormal %&gt;\r\n&lt;/p&gt;\r\n\r\n&lt;p&gt;\r\n  &lt;strong&gt;Preciooferta:&lt;/strong&gt;\r\n  &lt;%= @product.precioOferta %&gt;\r\n&lt;/p&gt;\r\n\r\n&lt;p&gt;\r\n  &lt;strong&gt;Iniciooferta:&lt;/strong&gt;\r\n  &lt;%= @product.inicioOferta %&gt;\r\n&lt;/p&gt;\r\n\r\n&lt;p&gt;\r\n  &lt;strong&gt;Terminooferta:&lt;/strong&gt;\r\n  &lt;%= @product.terminoOferta %&gt;\r\n&lt;/p&gt;\r\n\r\n&lt;p&gt;\r\n  &lt;strong&gt;Calificacion:&lt;/strong&gt;\r\n  &lt;%= @product.calificacion %&gt;\r\n&lt;/p&gt;\r\n\r\n&lt;p&gt;\r\n  &lt;strong&gt;Entregaresultados:&lt;/strong&gt;\r\n  &lt;%= @product.entregaResultados %&gt;\r\n&lt;/p&gt;\r\n\r\n&lt;p&gt;\r\n  &lt;strong&gt;Duracionservicio:&lt;/strong&gt;\r\n  &lt;%= @product.duracionServicio %&gt;\r\n&lt;/p&gt;\r\n\r\n&lt;p&gt;\r\n  &lt;strong&gt;Urlvideo:&lt;/strong&gt;\r\n  &lt;%= @product.URLvideo %&gt;\r\n&lt;/p&gt;\r\n\r\n&lt;p&gt;\r\n  &lt;strong&gt;Categoria:&lt;/strong&gt;\r\n  &lt;%= @product.categoria %&gt;\r\n&lt;/p&gt;\r\n\r\n&lt;p&gt;\r\n  &lt;strong&gt;Subcategoria:&lt;/strong&gt;\r\n  &lt;%= @product.subcategoria %&gt;\r\n&lt;/p&gt;\r\n\r\n&lt;p&gt;\r\n  &lt;strong&gt;Duracionservicio:&lt;/strong&gt;\r\n  &lt;%= @product.duracionServicio %&gt;\r\n&lt;/p&gt;\r\n\r\n&lt;p&gt;\r\n  &lt;strong&gt;Lugarentrega:&lt;/strong&gt;\r\n  &lt;%= @product.lugarEntrega %&gt;\r\n&lt;/p&gt;\r\n\r\n&lt;p&gt;\r\n  &lt;strong&gt;Diasanticipacion:&lt;/strong&gt;\r\n  &lt;%= @product.diasAnticipacion %&gt;\r\n&lt;/p&gt;\r\n\r\n&lt;p&gt;\r\n  &lt;strong&gt;Menoranticipacion:&lt;/strong&gt;\r\n  &lt;%= @product.menorAnticipacion %&gt;\r\n&lt;/p&gt;\r\n\r\n&lt;p&gt;\r\n  &lt;strong&gt;Diasatrasoanticipacion:&lt;/strong&gt;\r\n  &lt;%= @product.diasAtrasoAnticipacion %&gt;\r\n&lt;/p&gt;\r\n\r\n&lt;p&gt;\r\n  &lt;strong&gt;Aumentoatrasoanticipacion:&lt;/strong&gt;\r\n  &lt;%= @product.aumentoAtrasoAnticipacion %&gt;\r\n&lt;/p&gt;\r\n\r\n&lt;p&gt;\r\n  &lt;strong&gt;Numeropagos:&lt;/strong&gt;\r\n  &lt;%= @product.numeroPagos %&gt;\r\n&lt;/p&gt;\r\n\r\n&lt;p&gt;\r\n  &lt;strong&gt;Diasanticipoliquidacion:&lt;/strong&gt;\r\n  &lt;%= @product.diasAnticipoLiquidacion %&gt;\r\n&lt;/p&gt;\r\n\r\n&lt;%= link_to 'Edit', edit_product_path(@product) %&gt; |\r\n&lt;%= link_to 'Back', products_path %&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Thank you very much in advance</p>\n"}, {"tags": ["ruby", "string", "rubocop"], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1509502775, "post_id": 47047188, "comment_id": 81041732, "body": "You are confusing variables and objects."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1509502967, "post_id": 47047188, "comment_id": 81041775, "body": "Nice concise answer."}, {"owner": {"reputation": 635, "user_id": 7842011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbca165d2a40ba6819b02b6b956778e1?s=128&d=identicon&r=PG&f=1", "display_name": "jk_", "link": "https://stackoverflow.com/users/7842011/jk"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1509503333, "post_id": 47047188, "comment_id": 81041870, "body": "@J&#246;rgWMittag I agree that my original phrasing was sloppy, so I&#39;ve revised it. Thanks."}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1509519724, "post_id": 47047188, "comment_id": 81046472, "body": "@jk_ : Aside from the increased safety, is there also a performance advantage in freezing a constant?"}, {"owner": {"reputation": 5001, "user_id": 902217, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w2DJ9.gif?s=128&g=1", "display_name": "CAMOBAP", "link": "https://stackoverflow.com/users/902217/camobap"}, "edited": false, "score": 0, "creation_date": 1547046889, "post_id": 47047188, "comment_id": 95058726, "body": "@jk_ maybe you know how to <code>freeze</code> multiline literals?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1566941877, "post_id": 47047188, "comment_id": 101811534, "body": "&quot;You just get a warning if you mutate the value assigned to the constant.&quot; - nope, not even a warning. You&#39;re thinking of constant redefinition warning, perhaps?"}], "tags": [], "owner": {"reputation": 635, "user_id": 7842011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbca165d2a40ba6819b02b6b956778e1?s=128&d=identicon&r=PG&f=1", "display_name": "jk_", "link": "https://stackoverflow.com/users/7842011/jk"}, "is_accepted": true, "score": 23, "last_activity_date": 1509503288, "last_edit_date": 1509503288, "creation_date": 1509502265, "answer_id": 47047188, "question_id": 47046846, "link": "https://stackoverflow.com/questions/47046846/ruby-why-freeze-mutable-objects-assigned-to-constants/47047188#47047188", "title": "Ruby: Why freeze mutable objects assigned to constants?", "body": "<p>You should freeze the value assigned to <code>IP</code> because you've declared <code>IP</code> to be a constant. This indicates that you don't want the value assigned to <code>IP</code> to be mutated. </p>\n\n<p>The problem is that in ruby, assigning a value to a constant does not make the value immutable. You just get a warning if you mutate the value assigned to the constant. To make the value actually immutable, you need to <code>.freeze</code> the value assigned to the constant. After you've frozen a value assigned to a constant, if you try to change the value, you will hit a runtime error. </p>\n"}, {"comments": [{"owner": {"reputation": 4845, "user_id": 745359, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/25da42a68fcf79b0842fbc1607259092?s=128&d=identicon&r=PG", "display_name": "wintersolutions", "link": "https://stackoverflow.com/users/745359/wintersolutions"}, "edited": false, "score": 3, "creation_date": 1544027434, "post_id": 47047239, "comment_id": 94133149, "body": "Note: <code>IP = &#39;192.168.1.1&#39;</code> is still possible and will still result in a warning, not a error."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 18, "last_activity_date": 1509502682, "creation_date": 1509502682, "answer_id": 47047239, "question_id": 47046846, "link": "https://stackoverflow.com/questions/47046846/ruby-why-freeze-mutable-objects-assigned-to-constants/47047239#47047239", "title": "Ruby: Why freeze mutable objects assigned to constants?", "body": "<p>Freezing an object means you are no longer allowed to mutate it. A constant means you are no longer allowed to mutate the binding. (Well, okay, you get a warning if you mutate the binding.) The two just go together well.</p>\n\n<p>In particular, the fact that a mutable object assigned to an immutable binding can still be mutated, might be confusing to some. Just witness the various questions on Stack Overflow about it:</p>\n\n<pre><code>IP = '34.111.241.111'\n# Dis is a constant, I can never change it, amirite?\n\nIP &lt;&lt; '.255'\n\nIP\n#=&gt; '34.111.241.111.255'\n# Ooops!\n\nIP.freeze\n\nIP &lt;&lt; '.255'\n# RuntimeError: can't modify frozen String\n</code></pre>\n"}], "owner": {"reputation": 4855, "user_id": 3618156, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b3e1907a7f15ed006abc8ad406cf40fe?s=128&d=identicon&r=PG&f=1", "display_name": "american-ninja-warrior", "link": "https://stackoverflow.com/users/3618156/american-ninja-warrior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9477, "favorite_count": 3, "accepted_answer_id": 47047188, "answer_count": 2, "score": 15, "last_activity_date": 1587231277, "creation_date": 1509499129, "last_edit_date": 1587231277, "question_id": 47046846, "link": "https://stackoverflow.com/questions/47046846/ruby-why-freeze-mutable-objects-assigned-to-constants", "title": "Ruby: Why freeze mutable objects assigned to constants?", "body": "<p>Consider this offense reported by rubocop</p>\n\n<pre><code>lib/awesomelib/aws.rb:6:10: C: Style/MutableConstant: Freeze mutable objects assigned to constants.\n    IP = '34.111.241.111'\n     ^^^^^^^^^^^^^^^^\n</code></pre>\n\n<p>Why should I freeze this IP address?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord", "gon"], "answers": [{"tags": [], "owner": {"reputation": 5962, "user_id": 115159, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ac02a81e50f368f6d5c7a14b99ce2469?s=128&d=identicon&r=PG", "display_name": "Dharam Gollapudi", "link": "https://stackoverflow.com/users/115159/dharam-gollapudi"}, "is_accepted": true, "score": 1, "last_activity_date": 1509503903, "creation_date": 1509503903, "answer_id": 47047396, "question_id": 47046775, "link": "https://stackoverflow.com/questions/47046775/rails-4-remove-attributes-from-an-already-filtered-active-record-query/47047396#47047396", "title": "Rails 4 - Remove attributes from an already filtered Active Record query", "body": "<p>You can use <code>as_json</code> to control what will be exposed by the <code>to_json</code>. <code>gon</code> calls <code>to_json</code> internally, in order to convert <code>ruby</code> object to <code>javascript</code> object and exposes it to the view.</p>\n\n<p>Try the following:</p>\n\n<pre><code>def inject_deal_steps_data\n  # Used in html view     \n  @steps = @deal.steps.select(\n    :attribute1,\n    :attribute2,\n    :attribute3,\n    :attribute4,                                             \n    :attribute5\n  ).order(attribute4: :asc)\n\n  # Used in js file\n  gon.push({ \n    deal_steps: @steps.as_json(except: [:attribute1,:attribute3,:attribute4])\n  }) if @steps\nend\n</code></pre>\n\n<p>Review <a href=\"http://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html#method-i-as_json\" rel=\"nofollow noreferrer\"><code>as_json</code></a> for more information.</p>\n"}], "owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 466, "favorite_count": 0, "accepted_answer_id": 47047396, "answer_count": 1, "score": 0, "last_activity_date": 1509503903, "creation_date": 1509498405, "last_edit_date": 1509499009, "question_id": 47046775, "link": "https://stackoverflow.com/questions/47046775/rails-4-remove-attributes-from-an-already-filtered-active-record-query", "title": "Rails 4 - Remove attributes from an already filtered Active Record query", "body": "<p>In one of my ruby on Rails 4 controller, I have a method that injects data necessary to a View.</p>\n\n<p>The data needed vary between the data needed by the html and the data needed by the javascript. I am using <a href=\"https://github.com/gazay/gon\" rel=\"nofollow noreferrer\">gon</a> to inject the data into the js scripts.</p>\n\n<p>My app works fine but gon is injecting in the HTML (FYI in a script just below the body tag) <strong>too much data</strong> as I only need for Gon/Javascript 2 of the 5 attributes needed by the HTML view. (Reason for wishing that: As I load a lot of objects, the difference in bytes for the HTML file is very significant)</p>\n\n<pre><code>def inject_deal_steps_data\n      # Used in html view     \n      @steps = @deal.steps.select(:attribute1,\n                                  :attribute2,\n                                  :attribute3,\n                                  :attribute4,                                             \n                                  :attribute5). order(attribute4: :asc)\n\n      # Used in js file\n      gon.push( { deal_steps: @steps } ) if @steps\n    end\n</code></pre>\n\n<p>I tried using methods such as unscope like below but it did not work.</p>\n\n<pre><code>def inject_deal_steps_data\n          # Used in html view     \n          @steps = @deal.steps.select(:attribute1,\n                                      :attribute2,\n                                      :attribute3,\n                                      :attribute4,                                             \n                                      :attribute5). order(attribute4: :asc)\n\n          # Used in js file\n          gon.push( { deal_steps: @steps.unscope(:attribute1,:attribute3,:attribute4 } ) if @steps\n        end\n</code></pre>\n\n<p>I don't want to create another new selection like below as it creates a new request/hit on the database.</p>\n\n<pre><code>@steps = @deal.steps.select(:attribute1,\n                                      :attribute2,\n                                      :attribute3,\n                                      :attribute4,                                             \n                                      :attribute5). order(attribute4: :asc)\ngon.push( { deal_steps: @deal.steps.select(:attribute2,:attribute5) } ) if @deal.steps\n</code></pre>\n\n<p>I want to re-use for GON the same @steps created for the HTML but remove 3 attributes from it.</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 7099, "user_id": 2520235, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3d38dd753b48e1ee04a961e398d2b03c?s=128&d=identicon&r=PG", "display_name": "YouneL", "link": "https://stackoverflow.com/users/2520235/younel"}, "edited": false, "score": 1, "creation_date": 1509498709, "post_id": 47046747, "comment_id": 81040791, "body": "What do you mean by &#39;match the super exact one&#39; ? can you give an example of what texts are matching?"}, {"owner": {"reputation": 1161, "user_id": 1520956, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e1de66cb040b2256a6de3625fb4735ba?s=128&d=identicon&r=PG&f=1", "display_name": "rukia_kuchiki_21", "link": "https://stackoverflow.com/users/1520956/rukia-kuchiki-21"}, "reply_to_user": {"reputation": 7099, "user_id": 2520235, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3d38dd753b48e1ee04a961e398d2b03c?s=128&d=identicon&r=PG", "display_name": "YouneL", "link": "https://stackoverflow.com/users/2520235/younel"}, "edited": false, "score": 0, "creation_date": 1509498777, "post_id": 47046747, "comment_id": 81040807, "body": "If string is <code>labels&#47;beauty-stuff</code> it keeps getting <code>beauty</code> as the match result... I want regex to get <code>beauty-stuff</code> as the match result instead of <code>beauty</code> @YouneL"}, {"owner": {"reputation": 1161, "user_id": 1520956, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e1de66cb040b2256a6de3625fb4735ba?s=128&d=identicon&r=PG&f=1", "display_name": "rukia_kuchiki_21", "link": "https://stackoverflow.com/users/1520956/rukia-kuchiki-21"}, "reply_to_user": {"reputation": 7099, "user_id": 2520235, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3d38dd753b48e1ee04a961e398d2b03c?s=128&d=identicon&r=PG", "display_name": "YouneL", "link": "https://stackoverflow.com/users/2520235/younel"}, "edited": false, "score": 0, "creation_date": 1509498832, "post_id": 47046747, "comment_id": 81040819, "body": "the regex expression from the example is <code>&#47;beauty|beauty-stuff|beauty-salon|beauty-bar&#47;</code> @YouneL"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1509501047, "post_id": 47046747, "comment_id": 81041349, "body": "How about <code>&#47;\\bbeauty-(stuff|salon|bar)\\b&#47;</code>?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1509502726, "post_id": 47046747, "comment_id": 81041716, "body": "In defining <code>labels</code> please include quotes around the string so that it is a valid Ruby expression. Also, it&#39;s best to avoid showing pictures of code. Links have a way of breaking over time and readers cannot cut and paste your code (though here the regex is quite short)."}], "answers": [{"tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 0, "last_activity_date": 1509498946, "creation_date": 1509498946, "answer_id": 47046829, "question_id": 47046747, "link": "https://stackoverflow.com/questions/47046747/find-exact-match-on-multiple-occurrences-of-a-word/47046829#47046829", "title": "Find exact match on multiple occurrences of a word", "body": "<p>Order stuff by descending length. <code>/beauty|beauty-stuff/</code> will find <code>beauty</code> in both <code>\"labels/beauty\"</code> and <code>\"labels/beauty-stuff\"</code>; <code>/beauty-stuff|beauty/</code> (or its more optimised version, <code>/beauty(?:-stuff|)/</code>) will find <code>beauty-stuff</code> in <code>\"labels/beauty-stuff\"</code>, <code>beauty</code> in <code>\"labels/beauty\"</code>. This works because regex will always return the first matching alternation (at the earliest matching position).</p>\n"}], "owner": {"reputation": 1161, "user_id": 1520956, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e1de66cb040b2256a6de3625fb4735ba?s=128&d=identicon&r=PG&f=1", "display_name": "rukia_kuchiki_21", "link": "https://stackoverflow.com/users/1520956/rukia-kuchiki-21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 47046829, "answer_count": 1, "score": -1, "last_activity_date": 1509503219, "creation_date": 1509498156, "last_edit_date": 1509503219, "question_id": 47046747, "link": "https://stackoverflow.com/questions/47046747/find-exact-match-on-multiple-occurrences-of-a-word", "title": "Find exact match on multiple occurrences of a word", "body": "<p>Is there a way to make a regex match only the super exact once as with <code>beauty-stuff</code> wording in this example?</p>\n\n<p><a href=\"https://i.stack.imgur.com/gUdnY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gUdnY.png\" alt=\"enter image description here\"></a></p>\n\n<p>I have a regex posted below:</p>\n\n<pre><code>labels = beauty|beauty-stuff|beauty-salon|beauty-bar\n</code></pre>\n\n<p>It matches the first word as the match result.</p>\n"}, {"tags": ["ruby", "rubygems", "jekyll", "rvm", "bundler"], "comments": [{"owner": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "edited": false, "score": 0, "creation_date": 1509498642, "post_id": 47046746, "comment_id": 81040777, "body": "try install specific 2.4.2 version of ruby &#39;rvm install 2.4.2&#39;, set it as default and then install the gems again and everything"}, {"owner": {"reputation": 37699, "user_id": 1081396, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4da642ebb2987685f30442660dc6751e?s=128&d=identicon&r=PG", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/1081396/alvaro"}, "reply_to_user": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "edited": false, "score": 0, "creation_date": 1509498730, "post_id": 47046746, "comment_id": 81040798, "body": "I just did that a few minutes ago as per what I was suggested to do <a href=\"https://stackoverflow.com/a/47039723/1081396\">here in the comments</a>."}, {"owner": {"reputation": 37699, "user_id": 1081396, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4da642ebb2987685f30442660dc6751e?s=128&d=identicon&r=PG", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/1081396/alvaro"}, "reply_to_user": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "edited": false, "score": 0, "creation_date": 1509498756, "post_id": 47046746, "comment_id": 81040802, "body": "<code>rvm --default use 2.4.2</code>?  How to install the gems and &quot;everything&quot; ? As you can see I&#39;m quite lost here :)"}, {"owner": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "edited": false, "score": 0, "creation_date": 1509498962, "post_id": 47046746, "comment_id": 81040849, "body": "rvm install 2.4.2, then, rvm --default use 2.4.2, gem install jekyll"}, {"owner": {"reputation": 37699, "user_id": 1081396, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4da642ebb2987685f30442660dc6751e?s=128&d=identicon&r=PG", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/1081396/alvaro"}, "reply_to_user": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "edited": false, "score": 0, "creation_date": 1509499157, "post_id": 47046746, "comment_id": 81040894, "body": "I did that.  <code>rvm install 2.4.2</code> shows <code>Already installed ruby-2.4.2.</code>. I then did <code>rvm --default use 2.4.2</code> but doing <code>ruby -v</code> still showing the same as before <code>ruby 2.4.2p198 (2017-09-14 revision 59899) [x86_64-darwin15]</code>. I also did <code>gem install jekyll</code> but still having exactly the same issue when running <code>sudo jekyll serve</code>"}, {"owner": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "edited": false, "score": 0, "creation_date": 1509499244, "post_id": 47046746, "comment_id": 81040913, "body": "post the output of &#39;rvm list&#39;"}, {"owner": {"reputation": 37699, "user_id": 1081396, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4da642ebb2987685f30442660dc6751e?s=128&d=identicon&r=PG", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/1081396/alvaro"}, "reply_to_user": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "edited": false, "score": 0, "creation_date": 1509499314, "post_id": 47046746, "comment_id": 81040928, "body": "Check it in the question. I updated it."}, {"owner": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "edited": false, "score": 0, "creation_date": 1509499507, "post_id": 47046746, "comment_id": 81040986, "body": "maybe the problem that you are facing is that you tried to install ruby before, without rvm, try removing everything about ruby, I don&#39;t have much experience with mac, but google &#39;how to remove ruby completely from mac&#39; or something like that, then try again with the steps that I sent before, it should work"}, {"owner": {"reputation": 37699, "user_id": 1081396, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4da642ebb2987685f30442660dc6751e?s=128&d=identicon&r=PG", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/1081396/alvaro"}, "reply_to_user": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "edited": false, "score": 0, "creation_date": 1509499571, "post_id": 47046746, "comment_id": 81040997, "body": "Ok thanks! I&#39;ll try tomorrow and let you know! :)"}, {"owner": {"reputation": 37699, "user_id": 1081396, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4da642ebb2987685f30442660dc6751e?s=128&d=identicon&r=PG", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/1081396/alvaro"}, "reply_to_user": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "edited": false, "score": 0, "creation_date": 1509549226, "post_id": 47046746, "comment_id": 81063250, "body": "@xploshioOn according to <a href=\"https://stackoverflow.com/q/4115803/1081396\">this answer</a> and <a href=\"https://superuser.com/questions/194051/how-to-completely-remove-ruby-ruby-gems-on-mac-os-x-10-6-4\">this other one</a> we should never remove the system&#39;s Ruby. So... not quite sure how to proceed with the removal of the rvm ruby I installed. Any tips?"}], "answers": [{"tags": [], "owner": {"reputation": 37699, "user_id": 1081396, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4da642ebb2987685f30442660dc6751e?s=128&d=identicon&r=PG", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/1081396/alvaro"}, "is_accepted": true, "score": 4, "last_activity_date": 1509551773, "creation_date": 1509551773, "answer_id": 47058852, "question_id": 47046746, "link": "https://stackoverflow.com/questions/47046746/jekyll-serve-error-cant-find-gem-jekyll-0-a-gemgemnotfoundexception/47058852#47058852", "title": "Jekyll serve error: can&#39;t find gem jekyll (&gt;= 0.a) (Gem::GemNotFoundException", "body": "<p>I finally solved it by doing:</p>\n\n<pre><code>sudo rm -rf _site\nbundle update\nbundle exec jekyll serve\n</code></pre>\n\n<p>And then always using <code>bundle exec jekyll serve</code> instead of <code>sudo jekyll serve</code> or <code>jekyll serve</code>.</p>\n\n<p>I got this solution thanks to the answers <a href=\"https://github.com/jekyll/jekyll/issues/6510#issuecomment-341145757\" rel=\"nofollow noreferrer\">in this post</a>.</p>\n"}], "owner": {"reputation": 37699, "user_id": 1081396, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4da642ebb2987685f30442660dc6751e?s=128&d=identicon&r=PG", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/1081396/alvaro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2293, "favorite_count": 0, "accepted_answer_id": 47058852, "answer_count": 1, "score": 3, "last_activity_date": 1509551773, "creation_date": 1509498153, "last_edit_date": 1509499298, "question_id": 47046746, "link": "https://stackoverflow.com/questions/47046746/jekyll-serve-error-cant-find-gem-jekyll-0-a-gemgemnotfoundexception", "title": "Jekyll serve error: can&#39;t find gem jekyll (&gt;= 0.a) (Gem::GemNotFoundException", "body": "<p>When doing <code>sudo jekyll serve</code> I get the following error:</p>\n\n<pre><code>Users/myusername/.rvm/rubies/ruby-2.4.2/lib/ruby/site_ruby/2.4.0/rubygems.rb:271:in 'find_spec_for_exe': can't find gem jekyll (&gt;= 0.a) (Gem::GemNotFoundException)\nfrom /Users/myusername/.rvm/rubies/ruby-2.4.2/lib/ruby/site_ruby/2.4.0/rubygems.rb:299:in 'activate_bin_path'\nfrom /Users/myusername/.rvm/gems/ruby-2.4.2/bin/jekyll:23:in '&lt;main&gt;'\nfrom /Users/myusername/.rvm/gems/ruby-2.4.2/bin/ruby_executable_hooks:15:in 'eval'\nfrom /Users/myusername/.rvm/gems/ruby-2.4.2/bin/ruby_executable_hooks:15:in '&lt;main&gt;'\n</code></pre>\n\n<p>In case it helps:</p>\n\n<ul>\n<li><code>jekyll -v</code> returns <code>jekyll 3.6.2</code></li>\n<li><code>ruby -v</code> returns <code>ruby 2.4.2p198 (2017-09-14 revision 59899) [x86_64-darwin15]</code></li>\n<li><code>gem -v</code> returns <code>2.6.14</code></li>\n<li><code>bundle -v</code> returns <code>Bundler version 1.16.0</code></li>\n</ul>\n\n<p>On my Gem file I have:</p>\n\n<blockquote>\n  <p>ruby '2.4.2'</p>\n</blockquote>\n\n<p><code>rmv list</code> output:</p>\n\n<pre><code>ruby-2.3.5 [ x86_64 ]\n=* ruby-2.4.2 [ x86_64 ]\n\n# =&gt; - current\n# =* - current &amp;&amp; default\n#  * - default\n</code></pre>\n"}, {"tags": ["ruby", "jekyll", "rvm", "bundler"], "answers": [{"comments": [{"owner": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "reply_to_user": {"reputation": 37699, "user_id": 1081396, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4da642ebb2987685f30442660dc6751e?s=128&d=identicon&r=PG", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/1081396/alvaro"}, "edited": false, "score": 0, "creation_date": 1509497534, "post_id": 47046561, "comment_id": 81040544, "body": "just see the part that is changing, it seems that it&#39;s not installing the dependencies for jekyll, so just change the gem name with next error until you finish to install all the dependencies, in this case, the last update, the gem is minima, so, gem install minima"}, {"owner": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "reply_to_user": {"reputation": 37699, "user_id": 1081396, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4da642ebb2987685f30442660dc6751e?s=128&d=identicon&r=PG", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/1081396/alvaro"}, "edited": false, "score": 0, "creation_date": 1509497600, "post_id": 47046561, "comment_id": 81040563, "body": "and to be more specific, just add the version that is on the error, like gem install minima -v 2.1.1, and keep on with the other errors if you get more"}, {"owner": {"reputation": 37699, "user_id": 1081396, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4da642ebb2987685f30442660dc6751e?s=128&d=identicon&r=PG", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/1081396/alvaro"}, "edited": false, "score": 0, "creation_date": 1509497857, "post_id": 47046561, "comment_id": 81040610, "body": "Just <code>gem install minima -v 2.1.1</code> got rid of all the other errors! Thanks for that!"}, {"owner": {"reputation": 37699, "user_id": 1081396, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4da642ebb2987685f30442660dc6751e?s=128&d=identicon&r=PG", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/1081396/alvaro"}, "edited": false, "score": 0, "creation_date": 1509498186, "post_id": 47046561, "comment_id": 81040685, "body": "Right now I&#39;m having a new issue with using <code>jekyll serve</code>. I&#180;ve created <a href=\"https://stackoverflow.com/q/47046746/1081396\">a new question</a> about it."}], "tags": [], "owner": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "is_accepted": true, "score": 1, "last_activity_date": 1509497244, "last_edit_date": 1509497244, "creation_date": 1509496716, "answer_id": 47046561, "question_id": 47046526, "link": "https://stackoverflow.com/questions/47046526/jekyll-v-error-bundlergemnotfound/47046561#47046561", "title": "Jekyll -v error (Bundler::GemNotFound)", "body": "<p>It seems that you don't have another gem installed, try with this to install it</p>\n\n<pre><code>gem install jekyll-feed\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 202, "user_id": 955972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c150a49c7709fa40bffca545ecf8942d?s=128&d=identicon&r=PG", "display_name": "Floppy", "link": "https://stackoverflow.com/users/955972/floppy"}, "is_accepted": false, "score": 1, "last_activity_date": 1509614740, "creation_date": 1509614740, "answer_id": 47071695, "question_id": 47046526, "link": "https://stackoverflow.com/questions/47046526/jekyll-v-error-bundlergemnotfound/47071695#47071695", "title": "Jekyll -v error (Bundler::GemNotFound)", "body": "<p>You're having a bunch of related issues around dependencies. To make sure it all works itself out, add a <code>Gemfile</code> with the contents:</p>\n\n<pre><code>source \"https://rubygems.org\"\n\nruby \"2.4.2\"\n\ngem 'github-pages' # helpfully pulls in more than just jekyll\n</code></pre>\n\n<p>and then run <code>bundle</code>. Then when you want to run jekyll, do <code>bundle exec jekyll</code>, and you should be fine.</p>\n"}], "owner": {"reputation": 37699, "user_id": 1081396, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4da642ebb2987685f30442660dc6751e?s=128&d=identicon&r=PG", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/1081396/alvaro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 986, "favorite_count": 0, "accepted_answer_id": 47046561, "answer_count": 2, "score": 0, "last_activity_date": 1509614740, "creation_date": 1509496453, "last_edit_date": 1509497199, "question_id": 47046526, "link": "https://stackoverflow.com/questions/47046526/jekyll-v-error-bundlergemnotfound", "title": "Jekyll -v error (Bundler::GemNotFound)", "body": "<p>When running <code>jekyll -v</code> I get the following:</p>\n\n<pre><code>/Users/myusername/.rvm/gems/ruby-2.4.2/gems/bundler-1.16.0/lib/bundler/spec_set.rb:88:in 'block in materialize': Could not find jekyll-feed-0.9.2 in any of the sources (Bundler::GemNotFound)\nfrom /Users/myusername/.rvm/gems/ruby-2.4.2/gems/bundler-1.16.0/lib/bundler/spec_set.rb:82:in 'map!'\nfrom /Users/myusername/.rvm/gems/ruby-2.4.2/gems/bundler-1.16.0/lib/bundler/spec_set.rb:82:in 'materialize'\nfrom /Users/myusername/.rvm/gems/ruby-2.4.2/gems/bundler-1.16.0/lib/bundler/definition.rb:170:in 'specs'\nfrom /Users/myusername/.rvm/gems/ruby-2.4.2/gems/bundler-1.16.0/lib/bundler/definition.rb:237:in 'specs_for'\nfrom /Users/myusername/.rvm/gems/ruby-2.4.2/gems/bundler-1.16.0/lib/bundler/definition.rb:226:in 'requested_specs'\nfrom /Users/myusername/.rvm/gems/ruby-2.4.2/gems/bundler-1.16.0/lib/bundler/runtime.rb:108:in 'block in definition_method'\nfrom /Users/myusername/.rvm/gems/ruby-2.4.2/gems/bundler-1.16.0/lib/bundler/runtime.rb:20:in 'setup'\nfrom /Users/myusername/.rvm/gems/ruby-2.4.2/gems/bundler-1.16.0/lib/bundler.rb:107:in 'setup'\nfrom /Users/myusername/.rvm/gems/ruby-2.4.2/gems/jekyll-3.6.2/lib/jekyll/plugin_manager.rb:50:in 'require_from_bundler'\nfrom /Users/myusername/.rvm/gems/ruby-2.4.2/gems/jekyll-3.6.2/exe/jekyll:11:in '&lt;top (required)&gt;'\nfrom /Users/myusername/.rvm/gems/ruby-2.4.2/bin/jekyll:23:in 'load'\nfrom /Users/myusername/.rvm/gems/ruby-2.4.2/bin/jekyll:23:in '&lt;main&gt;'\nfrom /Users/myusername/.rvm/gems/ruby-2.4.2/bin/ruby_executable_hooks:15:in 'eval'\nfrom /Users/myusername/.rvm/gems/ruby-2.4.2/bin/ruby_executable_hooks:15:in '&lt;main&gt;'\n</code></pre>\n\n<h1>Update:</h1>\n\n<p>After using <code>gem install jekyll-feed</code> I get the following:</p>\n\n<pre><code>/Users/myusername/.rvm/gems/ruby-2.4.2/gems/bundler-1.16.0/lib/bundler/spec_set.rb:88:in 'block in materialize': Could not find minima-2.1.1 in any of the sources (Bundler::GemNotFound)\nfrom /Users/myusername/.rvm/gems/ruby-2.4.2/gems/bundler-1.16.0/lib/bundler/spec_set.rb:82:in 'map!'\nfrom /Users/myusername/.rvm/gems/ruby-2.4.2/gems/bundler-1.16.0/lib/bundler/spec_set.rb:82:in 'materialize'\nfrom /Users/myusername/.rvm/gems/ruby-2.4.2/gems/bundler-1.16.0/lib/bundler/definition.rb:170:in 'specs'\nfrom /Users/myusername/.rvm/gems/ruby-2.4.2/gems/bundler-1.16.0/lib/bundler/definition.rb:237:in 'specs_for'\nfrom /Users/myusername/.rvm/gems/ruby-2.4.2/gems/bundler-1.16.0/lib/bundler/definition.rb:226:in 'requested_specs'\nfrom /Users/myusername/.rvm/gems/ruby-2.4.2/gems/bundler-1.16.0/lib/bundler/runtime.rb:108:in 'block in definition_method'\nfrom /Users/myusername/.rvm/gems/ruby-2.4.2/gems/bundler-1.16.0/lib/bundler/runtime.rb:20:in 'setup'\nfrom /Users/myusername/.rvm/gems/ruby-2.4.2/gems/bundler-1.16.0/lib/bundler.rb:107:in 'setup'\nfrom /Users/myusername/.rvm/gems/ruby-2.4.2/gems/jekyll-3.6.2/lib/jekyll/plugin_manager.rb:50:in 'require_from_bundler'\nfrom /Users/myusername/.rvm/gems/ruby-2.4.2/gems/jekyll-3.6.2/exe/jekyll:11:in '&lt;top (required)&gt;'\nfrom /Users/myusername/.rvm/gems/ruby-2.4.2/bin/jekyll:23:in 'load'\nfrom /Users/myusername/.rvm/gems/ruby-2.4.2/bin/jekyll:23:in '&lt;main&gt;'\nfrom /Users/myusername/.rvm/gems/ruby-2.4.2/bin/ruby_executable_hooks:15:in 'eval'\nfrom /Users/myusername/.rvm/gems/ruby-2.4.2/bin/ruby_executable_hooks:15:in '&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby", "jekyll", "rvm"], "comments": [{"owner": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "edited": false, "score": 0, "creation_date": 1509495905, "post_id": 47046419, "comment_id": 81040161, "body": "are you on windows?"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1509495951, "post_id": 47046419, "comment_id": 81040171, "body": "<code>gem install jekyll</code>? Did you recently upgrade your RVM Ruby?"}, {"owner": {"reputation": 37699, "user_id": 1081396, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4da642ebb2987685f30442660dc6751e?s=128&d=identicon&r=PG", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/1081396/alvaro"}, "reply_to_user": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "edited": false, "score": 0, "creation_date": 1509496121, "post_id": 47046419, "comment_id": 81040217, "body": "@xploshioOn on Mac"}, {"owner": {"reputation": 37699, "user_id": 1081396, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4da642ebb2987685f30442660dc6751e?s=128&d=identicon&r=PG", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/1081396/alvaro"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1509496469, "post_id": 47046419, "comment_id": 81040290, "body": "@Casper I did install rvm ruby recently as it was suggested to me in <a href=\"https://stackoverflow.com/a/47039723/1081396\">this answer</a>. I&#39;ve now tried <code>gem install jekyll</code> and now I got a new problem. I&#39;ve created <a href=\"https://stackoverflow.com/q/47046526/1081396\">a new issue for it</a>. Please add your comment as a solution and I&#39;ll accept it."}], "answers": [{"comments": [{"owner": {"reputation": 37699, "user_id": 1081396, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4da642ebb2987685f30442660dc6751e?s=128&d=identicon&r=PG", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/1081396/alvaro"}, "edited": false, "score": 0, "creation_date": 1509496543, "post_id": 47046509, "comment_id": 81040308, "body": "Thanks! Done! But now I got <a href=\"https://stackoverflow.com/q/47046526/1081396\">a new issue</a>."}], "tags": [], "owner": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "is_accepted": true, "score": 1, "last_activity_date": 1509496325, "creation_date": 1509496325, "answer_id": 47046509, "question_id": 47046419, "link": "https://stackoverflow.com/questions/47046419/could-not-find-jekyll-0/47046509#47046509", "title": "Could not find &#39;jekyll&#39; (&gt;= 0)", "body": "<p>it seems that you don't have the jekyll gem installed, try installing it with </p>\n\n<pre><code>gem install jekyll\n</code></pre>\n\n<p>and remember that if you are using rvm, you need to select the version you will use in that terminal session, </p>\n\n<pre><code>rvm use x.x.x\n</code></pre>\n\n<p>or set the default, so everytime you open a terminal, then a version to use is set by default </p>\n\n<pre><code>rvm --default use x.x.x\n</code></pre>\n"}], "owner": {"reputation": 37699, "user_id": 1081396, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4da642ebb2987685f30442660dc6751e?s=128&d=identicon&r=PG", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/1081396/alvaro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 47046509, "answer_count": 1, "score": 0, "last_activity_date": 1509496325, "creation_date": 1509495601, "question_id": 47046419, "link": "https://stackoverflow.com/questions/47046419/could-not-find-jekyll-0", "title": "Could not find &#39;jekyll&#39; (&gt;= 0)", "body": "<p>Using <code>jekyll -v</code> returns the following:</p>\n\n<blockquote>\n  <p>/Library/Ruby/Site/2.0.0/rubygems/dependency.rb:308:in 'to_specs': Could not find 'jekyll' (>= 0) among 21 total gem(s) (Gem::MissingSpecError)\n  Checked in 'GEM_PATH=/Users/myusername/.rvm/gems/ruby-2.4.2:/Users/myusername/.rvm/gems/ruby-2.4.2@global', execute 'gem env' for more information\n      from /Library/Ruby/Site/2.0.0/rubygems/dependency.rb:320:in 'to_spec'\n      from /Library/Ruby/Site/2.0.0/rubygems/core_ext/kernel_gem.rb:65:in 'gem'\n      from /usr/local/bin/jekyll:22:in `'</p>\n</blockquote>\n\n<p>What's going on?</p>\n"}, {"tags": ["ruby", "linux", "rspec", "chef-infra", "chefspec"], "answers": [{"tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 1, "last_activity_date": 1509490528, "creation_date": 1509490528, "answer_id": 47045686, "question_id": 47045621, "link": "https://stackoverflow.com/questions/47045621/chefspec-test-linux-kernel-version-number/47045686#47045686", "title": "chefspec: test linux kernel version number", "body": "<p>ChefSpec isn't used for things like this, it doesn't know anything about actual systems. It just runs your recipe code in an abstract no-op-y kind of way. Most Chef users neither need nor should use ChefSpec, it's for stupidly complex cookbooks mostly, like the kind released to the community.</p>\n"}, {"tags": [], "owner": {"reputation": 878, "user_id": 3256048, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cmJzF.png?s=128&g=1", "display_name": "slashpai", "link": "https://stackoverflow.com/users/3256048/slashpai"}, "is_accepted": false, "score": 0, "last_activity_date": 1509824090, "creation_date": 1509824090, "answer_id": 47114787, "question_id": 47045621, "link": "https://stackoverflow.com/questions/47045621/chefspec-test-linux-kernel-version-number/47114787#47114787", "title": "chefspec: test linux kernel version number", "body": "<p>You should use an integration testing tool like test kitchen for that since chefspec doesn't run on a actual machine where as kitchen tests does. You can use either serverspec or inspec as your testing framework. Refer <a href=\"https://docs.chef.io/kitchen.html\" rel=\"nofollow noreferrer\">https://docs.chef.io/kitchen.html</a></p>\n"}], "owner": {"reputation": 1342, "user_id": 8027110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01381cee1045d52e1cb4576fc92d94a6?s=128&d=identicon&r=PG&f=1", "display_name": "shalamus", "link": "https://stackoverflow.com/users/8027110/shalamus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1509824090, "creation_date": 1509490047, "question_id": 47045621, "link": "https://stackoverflow.com/questions/47045621/chefspec-test-linux-kernel-version-number", "title": "chefspec: test linux kernel version number", "body": "<p>How do I write a test on Linux system meets minimum kernel version of 2.6.20 or greater inside the following file?</p>\n\n<blockquote>\n  <p>spec/unit.recipes/default_spec.rb</p>\n</blockquote>\n"}, {"tags": ["ruby", "xml", "passwords", "base64"], "answers": [{"tags": [], "owner": {"reputation": 382, "user_id": 5063336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57fd0d38dd403b01722df127f7dc6807?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/5063336/tom"}, "is_accepted": false, "score": 1, "last_activity_date": 1509497053, "last_edit_date": 1509497053, "creation_date": 1509496293, "answer_id": 47046506, "question_id": 47045450, "link": "https://stackoverflow.com/questions/47045450/best-practices-for-storing-passwords-in-ruby-xml-source-or-other/47046506#47046506", "title": "Best Practices for storing passwords in Ruby. Xml, source or other?", "body": "<p>Base64 is not encryption, anyone can reverse it.  For that matter, using actual encryption isn't going to help if your program contains the key and is itself readable.  If you need to write a program that uses a password, but you do not want the password accessible to users of the program, you will need to use the operating system as well as code.</p>\n\n<ol>\n<li>Put the password into a separate file from the code.</li>\n<li>Use the operating system's access control for files to make sure only people who are allowed to can read the file with the password.  This is not the same list as people who can run the program, and may only be the administrator.</li>\n<li>Add a pseudo-user to the operating system for the script. This is not a real person, but an account that only the program will use in order to run.  Add this user to the access control for the file with the password such that it can read the file.  Make sure this user cannot login interactively, e.g. obtain a shell prompt or get a desktop session.</li>\n<li>Enable the people you want to run the program to run the program \"as\" the pseudo-user for the script.  In Windows this can be done with the \"runas\" command.  On Linux you can use \"sudo\".  </li>\n</ol>\n"}], "owner": {"reputation": 301, "user_id": 8377803, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5830df75f0a77fc8e13dab48748cb559?s=128&d=identicon&r=PG&f=1", "display_name": "Tom D", "link": "https://stackoverflow.com/users/8377803/tom-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1509497053, "creation_date": 1509489094, "question_id": 47045450, "link": "https://stackoverflow.com/questions/47045450/best-practices-for-storing-passwords-in-ruby-xml-source-or-other", "title": "Best Practices for storing passwords in Ruby. Xml, source or other?", "body": "<p>I have a Ruby script that sends an email, but I need to store the smtp account credentials in order for the email to get sent. Currently, I have an xml file that I'm storing the password in, however I'm encoding the password using Bas64 in the xml and then decoding in my script. I packaged the script into an .exe as well.</p>\n\n<p>I'm trying to figure out what the best practice is in terms of storing credentials. Should I be storing the password in the actual script instead of the xml? Is there some other method that I should be using? The script isn't going to be running on a server that's exposed outside of the LAN, but I'd still like to make sure that the password is as secure as possible.</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 2771, "user_id": 1887370, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/08bf95201cabfe02acc28041cff862ff?s=128&d=identicon&r=PG", "display_name": "sakurashinken", "link": "https://stackoverflow.com/users/1887370/sakurashinken"}, "edited": false, "score": 1, "creation_date": 1509488538, "post_id": 47044733, "comment_id": 81038106, "body": "running count on the array every time will be super slow if you&#39;re working with a large array, as it grows with O(n^2)"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1509490991, "post_id": 47044733, "comment_id": 81038871, "body": "<code>arr.uniq.select { |n| arr.count(n) == 1 }</code> would be an improvement to my earlier suggestion, though still not as performant as the answers given so far."}], "answers": [{"comments": [{"owner": {"reputation": 277, "user_id": 2304266, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b52096308a2b0f75d0c0933b1c1bcf17?s=128&d=identicon&r=PG", "display_name": "Noel Vock", "link": "https://stackoverflow.com/users/2304266/noel-vock"}, "edited": false, "score": 0, "creation_date": 1509488755, "post_id": 47044844, "comment_id": 81038190, "body": "This returns an array with the unique values of the original array. Is it in terms of result in anyway different to or better then <code>myarray.select { |n| myarray.count(n) == 1 }</code>? I&#39;m assuming it might be faster?"}, {"owner": {"reputation": 2771, "user_id": 1887370, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/08bf95201cabfe02acc28041cff862ff?s=128&d=identicon&r=PG", "display_name": "sakurashinken", "link": "https://stackoverflow.com/users/1887370/sakurashinken"}, "edited": false, "score": 0, "creation_date": 1509489384, "post_id": 47044844, "comment_id": 81038412, "body": "much faster. myarray.count will hang on huge shuffled arrays."}, {"owner": {"reputation": 277, "user_id": 2304266, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b52096308a2b0f75d0c0933b1c1bcf17?s=128&d=identicon&r=PG", "display_name": "Noel Vock", "link": "https://stackoverflow.com/users/2304266/noel-vock"}, "edited": false, "score": 0, "creation_date": 1509490189, "post_id": 47044844, "comment_id": 81038634, "body": "which of these two answers is faster and better practice?"}, {"owner": {"reputation": 2771, "user_id": 1887370, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/08bf95201cabfe02acc28041cff862ff?s=128&d=identicon&r=PG", "display_name": "sakurashinken", "link": "https://stackoverflow.com/users/1887370/sakurashinken"}, "edited": false, "score": 0, "creation_date": 1509492472, "post_id": 47044844, "comment_id": 81039268, "body": "Id say Davids is slightly faster, but mine is a bit more readable. If you need performance, go with davids, readability, mine."}], "tags": [], "owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "is_accepted": false, "score": 2, "last_activity_date": 1509485562, "creation_date": 1509485562, "answer_id": 47044844, "question_id": 47044733, "link": "https://stackoverflow.com/questions/47044733/how-can-i-find-unique-values-in-an-array-and-assign-them-to-variables-in-ruby/47044844#47044844", "title": "How can I find unique values in an array and assign them to variables in ruby", "body": "<p>This is a bit leggy, perhaps, but gets the job done</p>\n\n<pre><code>my_array.each_with_object(Hash.new(0)){|x,h| h[x] += 1}.select{|k,v| v == 1}.keys\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2771, "user_id": 1887370, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/08bf95201cabfe02acc28041cff862ff?s=128&d=identicon&r=PG", "display_name": "sakurashinken", "link": "https://stackoverflow.com/users/1887370/sakurashinken"}, "edited": false, "score": 0, "creation_date": 1509487635, "post_id": 47044914, "comment_id": 81037799, "body": "not sure why this is being downvoted. I just benchmarked it with a 2 million element array and it seems relatively performant, and correct."}, {"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 0, "creation_date": 1509524321, "post_id": 47044914, "comment_id": 81048334, "body": "Have you got the benchmark results? It would be good to be able to compare all the methods."}, {"owner": {"reputation": 2771, "user_id": 1887370, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/08bf95201cabfe02acc28041cff862ff?s=128&d=identicon&r=PG", "display_name": "sakurashinken", "link": "https://stackoverflow.com/users/1887370/sakurashinken"}, "reply_to_user": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 0, "creation_date": 1509559314, "post_id": 47044914, "comment_id": 81069642, "body": "I just generated an array in irb with 2 million elements, called shuffle, then called Benchmark.measure. The each with object measure was about 1.14s real time vs group_by at 1.66s"}], "tags": [], "owner": {"reputation": 2771, "user_id": 1887370, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/08bf95201cabfe02acc28041cff862ff?s=128&d=identicon&r=PG", "display_name": "sakurashinken", "link": "https://stackoverflow.com/users/1887370/sakurashinken"}, "is_accepted": true, "score": 3, "last_activity_date": 1509685340, "last_edit_date": 1509685340, "creation_date": 1509485905, "answer_id": 47044914, "question_id": 47044733, "link": "https://stackoverflow.com/questions/47044733/how-can-i-find-unique-values-in-an-array-and-assign-them-to-variables-in-ruby/47044914#47044914", "title": "How can I find unique values in an array and assign them to variables in ruby", "body": "<p>Use <code>array.group_by</code>.</p>\n\n<pre><code>my_array.group_by{|v| v}.delete_if{|k,v| v.length &gt; 1}.keys\n</code></pre>\n\n<p>or alternatively</p>\n\n<pre><code>  my_array.group_by{|v| v}.select{|k,v| v.length == 1}.keys\n</code></pre>\n"}], "owner": {"reputation": 277, "user_id": 2304266, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b52096308a2b0f75d0c0933b1c1bcf17?s=128&d=identicon&r=PG", "display_name": "Noel Vock", "link": "https://stackoverflow.com/users/2304266/noel-vock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 47044914, "answer_count": 2, "score": 2, "last_activity_date": 1509685340, "creation_date": 1509485042, "last_edit_date": 1509485232, "question_id": 47044733, "link": "https://stackoverflow.com/questions/47044733/how-can-i-find-unique-values-in-an-array-and-assign-them-to-variables-in-ruby", "title": "How can I find unique values in an array and assign them to variables in ruby", "body": "<p>How can I find unique values in an array.</p>\n\n<p>For instance:</p>\n\n<pre><code>my_array = [2,4,4,5,5,7]\n</code></pre>\n\n<p>In the above array are two unique values 2 and 7 and I would like to know either a self defined or other method to assign these unique values to variables.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "macos", "vagrant", "vagrant-provision"], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 8864792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f889e2ae6bf6d9ef1bfc1ab249bc4ec?s=128&d=identicon&r=PG&f=1", "display_name": "Dimitris", "link": "https://stackoverflow.com/users/8864792/dimitris"}, "is_accepted": false, "score": 6, "last_activity_date": 1515089452, "last_edit_date": 1515089452, "creation_date": 1509498063, "answer_id": 47046735, "question_id": 47044613, "link": "https://stackoverflow.com/questions/47044613/vagrant-v-ignoring-ffi-nokogiri-and-unf-ext-because-its-extensions-are-not-bui/47046735#47046735", "title": "Vagrant -v Ignoring ffi -nokogiri and unf_ext because its extensions are not built", "body": "<p>Problem finally solved by:</p>\n\n<ol>\n<li><p>Completely uninstalling Vagrant 2.0.0 with:</p>\n\n<pre><code>sudo rm -rf /opt/vagrant\nrm -f /usr/local/bin/vagrant\nsudo pkgutil --forget com.vagrant.vagrant\n</code></pre></li>\n<li><p>Removing the <code>~/.vagrant.d</code> directory.</p></li>\n<li>Cleaning up the <strong>old Vagrant gem</strong> in Library>Ruby>Gems>2.0.0>gems.</li>\n<li>Running this in terminal: <code>gem update</code>.</li>\n<li>Reinstalling Vagrant from <a href=\"https://www.vagrantup.com/downloads.html\" rel=\"nofollow noreferrer\">Vagrant Official Site</a>.</li>\n</ol>\n\n<p>Installing Vagrant as a Ruby gem is no longer supported, and old versions have to be removed prior installing a newer version as is stated at the official site.</p>\n"}], "owner": {"reputation": 91, "user_id": 8864792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f889e2ae6bf6d9ef1bfc1ab249bc4ec?s=128&d=identicon&r=PG&f=1", "display_name": "Dimitris", "link": "https://stackoverflow.com/users/8864792/dimitris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1146, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1515089452, "creation_date": 1509484363, "question_id": 47044613, "link": "https://stackoverflow.com/questions/47044613/vagrant-v-ignoring-ffi-nokogiri-and-unf-ext-because-its-extensions-are-not-bui", "title": "Vagrant -v Ignoring ffi -nokogiri and unf_ext because its extensions are not built", "body": "<p><br>\nAfter trying to setup vagrant I get this output on flag -v </p>\n\n<pre>vagrant -v \nIgnoring ffi-1.9.14 because its extensions are not built.  Try: gem pristine ffi --version 1.9.14 \nIgnoring nokogiri-1.6.7.1 because its extensions are not built.  Try: gem pristine nokogiri --version 1.6.7.1 \nIgnoring unf_ext-0.0.7.2 because its extensions are not built.  Try: gem pristine unf_ext --version 0.0.7.2 \nVagrant 2.0.0</pre>\n\n<p>Besides the above try suggestions I've already tried: <pre>gem pristine --all </pre></p>\n\n<pre>gem pristine --system </pre>\n\n<p>and with flag <pre>-- --use-system-libraries</pre>\nAlso unistalled vagrant with:</p>\n\n<pre>rm -rf /opt/vagrant\nrm -f /usr/local/bin/vagrant\nsudo pkgutil --forget com.vagrant.vagrant</pre>\n\n<p>and install it again....Same thing!!!<br>\nI'm on <b>Mac OS X El Capitan</b> with ruby version :</p>\n\n<pre>ruby 2.4.2p198 (2017-09-14 revision 59899) [x86_64-darwin15]</pre>\n\n<p>Problem still there!!!\nAny suggestions? Thank you :-)</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 2157, "user_id": 6407868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5f5ea0c071e2a5adff7d131f58cc2011?s=128&d=identicon&r=PG&f=1", "display_name": "the12", "link": "https://stackoverflow.com/users/6407868/the12"}, "edited": false, "score": 1, "creation_date": 1509488289, "post_id": 47045201, "comment_id": 81038001, "body": "Thanks for the explanation, but just wondering, are they equal (creating a new class/module via class and module keywords, and assigning them to a constant like shown above?)"}, {"owner": {"reputation": 3286, "user_id": 1851041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/736f0189c216f8d9ece902e96fd37f6a?s=128&d=identicon&r=PG", "display_name": "BernardK", "link": "https://stackoverflow.com/users/1851041/bernardk"}, "reply_to_user": {"reputation": 2157, "user_id": 6407868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5f5ea0c071e2a5adff7d131f58cc2011?s=128&d=identicon&r=PG&f=1", "display_name": "the12", "link": "https://stackoverflow.com/users/6407868/the12"}, "edited": false, "score": 0, "creation_date": 1509492496, "post_id": 47045201, "comment_id": 81039275, "body": "@the12 Updated."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 2157, "user_id": 6407868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5f5ea0c071e2a5adff7d131f58cc2011?s=128&d=identicon&r=PG&f=1", "display_name": "the12", "link": "https://stackoverflow.com/users/6407868/the12"}, "edited": false, "score": 2, "creation_date": 1509503078, "post_id": 47045201, "comment_id": 81041800, "body": "@the12: there are some differences, e.g. a module and class definition body is its own local variable scope, whereas <code>Module.new</code> and <code>Class.new</code> take blocks which have <i>nested</i> local variable scope and are closures. Also, <code>Foo = Module.new</code> will <i>always</i> overwrite whatever <code>Foo</code> referenced before, whereas <code>module Foo</code> will <i>re-open</i> <code>Foo</code> if it was a module before, and be an error if it was something else."}, {"owner": {"reputation": 2157, "user_id": 6407868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5f5ea0c071e2a5adff7d131f58cc2011?s=128&d=identicon&r=PG&f=1", "display_name": "the12", "link": "https://stackoverflow.com/users/6407868/the12"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1509515206, "post_id": 47045201, "comment_id": 81044821, "body": "@J&#246;rgWMittag Right... I suppose those would be additional details of how instantiating differs from using the keyword method. But  just wanted to be 100% sure that the constants <code>Somemodule&#47;SomeClass = Module.new&#47;Class.new</code> is the same thing as <code>module Somemodule&#47;class Someclass</code> ? Just wanted to confirm with a senior programmer :)"}], "tags": [], "owner": {"reputation": 3286, "user_id": 1851041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/736f0189c216f8d9ece902e96fd37f6a?s=128&d=identicon&r=PG", "display_name": "BernardK", "link": "https://stackoverflow.com/users/1851041/bernardk"}, "is_accepted": false, "score": 0, "last_activity_date": 1509492383, "last_edit_date": 1509492383, "creation_date": 1509487510, "answer_id": 47045201, "question_id": 47044551, "link": "https://stackoverflow.com/questions/47044551/are-modules-and-classes-implemented-as-constants/47045201#47045201", "title": "Are modules and classes implemented as constants?", "body": "<p>All your questions have answers in <a href=\"https://pragprog.com/book/ruby4/programming-ruby-1-9-2-0\" rel=\"nofollow noreferrer\">The Pickaxe</a>.</p>\n\n<pre><code>class \u2039 scope:: \u203a classname \u2039 &lt; superexpr \u203a\n    body\nend\n</code></pre>\n\n<blockquote>\n  <p>A Ruby class definition creates or extends an object of class Class by\n  executing the code in body. In the first form, a named class is\n  created or extended. The resulting Class object is assigned to a\n  constant named classname (keep reading for scoping rules). This name\n  should start with an uppercase letter. ...</p>\n</blockquote>\n\n<pre><code>module name\n    body\nend\n</code></pre>\n\n<blockquote>\n  <p>A module is basically a class that cannot be instantiated. Like a\n  class, its body is executed during definition, and the resulting\n  Module object is stored in a constant.</p>\n</blockquote>\n\n<p><code>Class.new( super_class=Object ) \u2039{\u2026}\u203a</code> \u2192 cls</p>\n\n<blockquote>\n  <p>Creates a new anonymous (unnamed) class with the given superclass (or\n  Object if no parameter is given). If called with a block, that block\n  is used as the body of the class.</p>\n</blockquote>\n\n<p><code>Module.new</code> \u2192 mod</p>\n\n<p><code>Module.new {|mod| \u2026 }</code> \u2192 mod</p>\n\n<blockquote>\n  <p>Creates a new anonymous module. If a block is given, it is passed the\n  module object, and the block is evaluated in the context of this\n  module using module_eval.</p>\n</blockquote>\n\n<p>There is something interesting about the name :</p>\n\n<pre><code>some_class = Class.new\nobj        = some_class.new\nputs \"Initial name is #{some_class.name.inspect}\"\n\nSomeClass = some_class\nputs \"After assigning to the constant SomeClass, the name is #{some_class.name}\"\nputs \"also works via the object: #{obj.class.name}\"\n</code></pre>\n\n<p>Execution :</p>\n\n<pre><code>$ ruby -w t.rb \nInitial name is nil\nAfter assigning to the constant SomeClass, the name is SomeClass\nalso works via the object: SomeClass\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<blockquote>\n  <p>Are Somemodule and Someclass simply constants that represent\n  Module.new and Class.new?</p>\n</blockquote>\n\n<p>Certainly not. <code>Module.new</code> creates an instance of class <code>Module</code> whose pointer is stored in the constant <code>Somemodule</code>. <code>Class.new</code> creates an instance of class <code>Class</code> whose pointer is stored in the constant <code>Someclass</code>.</p>\n\n<p>For</p>\n\n<pre><code>class Someclass\nend\n</code></pre>\n\n<p>and</p>\n\n<pre><code>Someclass = Class.new\n</code></pre>\n\n<p>from the definitions above and the fact that an unnamed class becomes named after assignment to a constant, I'm almost sure it's the same thing, but I'm not an expert. Consult answers of Gurus like <a href=\"https://stackoverflow.com/users/2988/j%C3%B6rg-w-mittag\">J\u00f6rg</a>.</p>\n"}], "owner": {"reputation": 2157, "user_id": 6407868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5f5ea0c071e2a5adff7d131f58cc2011?s=128&d=identicon&r=PG&f=1", "display_name": "the12", "link": "https://stackoverflow.com/users/6407868/the12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1509504172, "creation_date": 1509484020, "last_edit_date": 1509504172, "question_id": 47044551, "link": "https://stackoverflow.com/questions/47044551/are-modules-and-classes-implemented-as-constants", "title": "Are modules and classes implemented as constants?", "body": "<p>When I call a class or module like this:</p>\n\n<pre><code>module Somemodule\nend\n\nclass Someclass\nend\n</code></pre>\n\n<p>are these the same as when I set them as constants?</p>\n\n<pre><code>Somemodule = Module.new\nSomeclass = Class.new\n</code></pre>\n\n<p>Are <code>Somemodule</code> and <code>Someclass</code> simply constants that represent <code>Module.new</code> and <code>Class.new</code>? </p>\n"}, {"tags": ["android", "ruby", "google-drive-api", "client", "unauthorized"], "comments": [{"owner": {"reputation": 15264, "user_id": 6143482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MD37S.jpg?s=128&g=1", "display_name": "noogui", "link": "https://stackoverflow.com/users/6143482/noogui"}, "edited": false, "score": 0, "creation_date": 1509554619, "post_id": 47044069, "comment_id": 81066808, "body": "Make sure to check the <a href=\"https://developers.google.com/drive/v3/web/quickstart/ruby#step_1_turn_on_the_api_name\" rel=\"nofollow noreferrer\">Turn on the Drive API</a> instructions because unlike the Android setup, you&#39;ll be using OAuth Client IDs type Others. Makes sure you didn&#39;t miss that one."}, {"owner": {"reputation": 364, "user_id": 2945187, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5e1c57d5a4dcfdb6703e6f3944800686?s=128&d=identicon&r=PG&f=1", "display_name": "Renegade", "link": "https://stackoverflow.com/users/2945187/renegade"}, "reply_to_user": {"reputation": 15264, "user_id": 6143482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MD37S.jpg?s=128&g=1", "display_name": "noogui", "link": "https://stackoverflow.com/users/6143482/noogui"}, "edited": false, "score": 0, "creation_date": 1509632828, "post_id": 47044069, "comment_id": 81103865, "body": "@noogui I did that. And I put the client_secret.json in the root folder of my sinatra app."}], "owner": {"reputation": 364, "user_id": 2945187, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5e1c57d5a4dcfdb6703e6f3944800686?s=128&d=identicon&r=PG&f=1", "display_name": "Renegade", "link": "https://stackoverflow.com/users/2945187/renegade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 332, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1509481890, "creation_date": 1509481890, "question_id": 47044069, "link": "https://stackoverflow.com/questions/47044069/getting-unauthorized-client-when-accessing-google-drive-api-with-serverauthcode", "title": "Getting unauthorized_client when accessing Google Drive API with serverAuthCode", "body": "<p>I'm writing an app in which we're making the user login from the Android app with Google SDK as follows</p>\n\n<pre><code>gso = getGoogleSignInOptions();\n    mGoogleApiClient = getGoogleApiClient(this, this);\n    SignInButton mSignInButton = (SignInButton) findViewById(R.id.sign_in_button);\n    mSignInButton.setSize(SignInButton.SIZE_WIDE);\n    mSignInButton.setScopes(gso.getScopeArray());\n    mSignInButton.setOnClickListener(new View.OnClickListener() {\n                                         @RequiresApi(api = Build.VERSION_CODES.M)\n                                         @Override\n                                         public void onClick(View v) {\n                                             Intent signInIntent = Auth.GoogleSignInApi.getSignInIntent(mGoogleApiClient);\n                                             startActivityForResult(signInIntent, RC_SIGN_IN);\n                                         }\n                                     }\n    );\n\nprivate Scope AUTH_DRIVE = new Scope(\"https://www.googleapis.com/auth/drive\");\n\npublic GoogleSignInOptions getGoogleSignInOptions() {\n    Scope scope = new Scope(Scopes.PROFILE);\n\n    gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\n            .requestEmail()\n            .requestIdToken(Constants.serverClientID)\n            .requestServerAuthCode(Constants.serverClientID)\n            .requestScopes(scope, new Scope[]{AUTH_DRIVE})\n            .build();\n\n    return gso;\n}\n\n    public GoogleApiClient getGoogleApiClient(AppCompatActivity activity, GoogleApiClient.OnConnectionFailedListener listener) {\n    this.activity = activity;\n    mGoogleApiClient = new GoogleApiClient.Builder(this)\n            .enableAutoManage(this.activity, listener)\n            .addApi(Auth.GOOGLE_SIGN_IN_API, getGoogleSignInOptions())\n            .addApi(Drive.API)\n            .build();\n    return mGoogleApiClient;\n}\n</code></pre>\n\n<p>And handling the login result like this</p>\n\n<pre><code>@Override\npublic void onActivityResult(int requestCode, int resultCode, Intent data) {\n    super.onActivityResult(requestCode, resultCode, data);\n    Log.wtf(TAG, \"onactivity result\");\n\n    if (requestCode == RC_SIGN_IN) {\n        GoogleSignInResult result = Auth.GoogleSignInApi.getSignInResultFromIntent(data);\n        handleSignInResult(result);\n    }\n}\n\nprivate void handleSignInResult(GoogleSignInResult result) {\n\n    if (result.isSuccess()) {\n        Toast.makeText(getApplicationContext(), \"Signed In!\", Toast.LENGTH_LONG).show();\n        userAccount = result.getSignInAccount();\n        String gCode = userAccount.getServerAuthCode();\n        Log.wtf(TAG, \"gcode = \"+userAccount.getServerAuthCode());\n        Log.wtf(TAG, \"token = \"+userAccount.getIdToken());\n\n        if (userAccount != null) {\n            signUp(convertNull(userAccount.getDisplayName()), convertNull(userAccount.getEmail()), null, convertNull(userAccount.getId()), null, convertNull(userAccount.getId()), convertNull(\"Android\"), convertNull(userAccount.getIdToken()), gCode);\n        }\n\n    } else {\n        Log.wtf(TAG, \"msg = \" + result.getStatus().getStatusMessage());\n        Log.wtf(TAG, result.getStatus().getStatusCode());\n    }\n}\n</code></pre>\n\n<p>Now we're getting the serverAuthCode and the ID token fine and its being uploaded to our backend server fine as well. </p>\n\n<p>But when I try to access the Google Drive API using the code I found on google's website</p>\n\n<pre><code>OOB_URI = 'urn:ietf:wg:oauth:2.0:oob'\nAPPLICATION_NAME = 'AppName'\nCLIENT_SECRETS_PATH = 'client_secret.json'\nCREDENTIALS_PATH = File.join(Dir.home, '.credentials',\n                             \"drive-ruby-quickstart.yaml\")\nSCOPE = Google::Apis::DriveV3::AUTH_DRIVE\nFOLDER_NAME = \"AppName\"\n\n@service = nil\n\ndef authorize(user_id, code)\n  FileUtils.mkdir_p(File.dirname(CREDENTIALS_PATH))\n\n  client_id = Google::Auth::ClientId.from_file(CLIENT_SECRETS_PATH)\n  token_store = Google::Auth::Stores::FileTokenStore.new(file: CREDENTIALS_PATH)\n  authorizer = Google::Auth::UserAuthorizer.new(\n    client_id, SCOPE, token_store)\n  #user_id = 'default'\n  credentials = authorizer.get_credentials(user_id)\n  #credentials = nil\n  if credentials.nil?\n    url = authorizer.get_authorization_url(\n      base_url: OOB_URI)\n    puts \"Open the following URL in the browser and enter the resulting code after authorization\"\n    puts url\n    credentials = authorizer.get_and_store_credentials_from_code(user_id: user_id, code: code, base_url: OOB_URI)\n  else\n    puts \"credentials is not nil\"\n  end\n\n  credentials\nend\n</code></pre>\n\n<p>We get the following error</p>\n\n<pre><code>{\n\"error\": \"unauthorized_client\",\n\"error_description\": \"Unauthorized\"\n}\n</code></pre>\n\n<p>Can someone help me on why am I getting this error? I've been banging my head for over a week on this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3004, "user_id": 5830036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/B2b06.png?s=128&g=1", "display_name": "Mayur Shah", "link": "https://stackoverflow.com/users/5830036/mayur-shah"}, "edited": false, "score": 0, "creation_date": 1509481636, "post_id": 47043926, "comment_id": 81035289, "body": "what about <code>Module.constants</code> ? have you try this"}, {"owner": {"reputation": 25, "user_id": 8863042, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/467b23d73e6f4fe5ea9d078a9c91249e?s=128&d=identicon&r=PG&f=1", "display_name": "rackymortor", "link": "https://stackoverflow.com/users/8863042/rackymortor"}, "reply_to_user": {"reputation": 3004, "user_id": 5830036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/B2b06.png?s=128&g=1", "display_name": "Mayur Shah", "link": "https://stackoverflow.com/users/5830036/mayur-shah"}, "edited": false, "score": 0, "creation_date": 1509481936, "post_id": 47043926, "comment_id": 81035413, "body": "Oh nice. write an answer, i&#39;ll accept."}], "answers": [{"tags": [], "owner": {"reputation": 3004, "user_id": 5830036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/B2b06.png?s=128&g=1", "display_name": "Mayur Shah", "link": "https://stackoverflow.com/users/5830036/mayur-shah"}, "is_accepted": true, "score": 1, "last_activity_date": 1509482062, "creation_date": 1509482062, "answer_id": 47044120, "question_id": 47043926, "link": "https://stackoverflow.com/questions/47043926/internals-of-the-object-constant/47044120#47044120", "title": "Internals of the Object constant", "body": "<p><code>Module.constants  # ==&gt; All constants</code>  may help you.</p>\n"}], "owner": {"reputation": 25, "user_id": 8863042, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/467b23d73e6f4fe5ea9d078a9c91249e?s=128&d=identicon&r=PG&f=1", "display_name": "rackymortor", "link": "https://stackoverflow.com/users/8863042/rackymortor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 47044120, "answer_count": 1, "score": 2, "last_activity_date": 1509482062, "creation_date": 1509481291, "question_id": 47043926, "link": "https://stackoverflow.com/questions/47043926/internals-of-the-object-constant", "title": "Internals of the Object constant", "body": "<p>Reading the Rails guides, I notice that the actual Object constant stores a table.</p>\n\n<blockquote>\n  <p>First, when the module keyword is processed, the interpreter creates a\n  new entry in the constant table of the class object stored in the\n  Object constant. Said entry associates the name \"Colors\" to a newly\n  created module object. Furthermore, the interpreter sets the name of\n  the new module object to be the string \"Colors\"</p>\n</blockquote>\n\n<p>However when I try to access Object  it just returns</p>\n\n<pre><code>=&gt; Object\n</code></pre>\n\n<p>Is there a way to access the internals of the Object constant in Ruby? And perhaps get a glimpse of the table with said <code>Module-object-to-name</code>\nmappings. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "metaprogramming"], "comments": [{"owner": {"reputation": 3004, "user_id": 5830036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/B2b06.png?s=128&g=1", "display_name": "Mayur Shah", "link": "https://stackoverflow.com/users/5830036/mayur-shah"}, "edited": false, "score": 0, "creation_date": 1509481845, "post_id": 47043894, "comment_id": 81035374, "body": "model name we can consider as car, bus, bike, right ?"}, {"owner": {"reputation": 15, "user_id": 8532277, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1429855430429697/picture?type=large", "display_name": "gui12344455", "link": "https://stackoverflow.com/users/8532277/gui12344455"}, "reply_to_user": {"reputation": 3004, "user_id": 5830036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/B2b06.png?s=128&g=1", "display_name": "Mayur Shah", "link": "https://stackoverflow.com/users/5830036/mayur-shah"}, "edited": false, "score": 0, "creation_date": 1509482086, "post_id": 47043894, "comment_id": 81035484, "body": "sorry, yes, model names are Car, Bus, Bike"}, {"owner": {"reputation": 2267, "user_id": 882025, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zK7M6.jpg?s=128&g=1", "display_name": "hoffm", "link": "https://stackoverflow.com/users/882025/hoffm"}, "edited": false, "score": 0, "creation_date": 1509482386, "post_id": 47043894, "comment_id": 81035644, "body": "Posted an answer that gets you the whole <code>MAPPING</code> hash, but maybe you just wanted the keys of that hash? Can you clarify?"}, {"owner": {"reputation": 15, "user_id": 8532277, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1429855430429697/picture?type=large", "display_name": "gui12344455", "link": "https://stackoverflow.com/users/8532277/gui12344455"}, "edited": false, "score": 0, "creation_date": 1509482588, "post_id": 47043894, "comment_id": 81035742, "body": "yes I need to get the whole hash."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 8532277, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1429855430429697/picture?type=large", "display_name": "gui12344455", "link": "https://stackoverflow.com/users/8532277/gui12344455"}, "edited": false, "score": 0, "creation_date": 1509482627, "post_id": 47044190, "comment_id": 81035758, "body": "thanks, the problem is that model variable is a string: &quot;Bike&quot;, &quot;Car&quot; etc. Is there a way to bind this string to a model based on the name ?"}, {"owner": {"reputation": 2267, "user_id": 882025, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zK7M6.jpg?s=128&g=1", "display_name": "hoffm", "link": "https://stackoverflow.com/users/882025/hoffm"}, "reply_to_user": {"reputation": 15, "user_id": 8532277, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1429855430429697/picture?type=large", "display_name": "gui12344455", "link": "https://stackoverflow.com/users/8532277/gui12344455"}, "edited": false, "score": 0, "creation_date": 1509482701, "post_id": 47044190, "comment_id": 81035792, "body": "Ok, updated it for that scenario. Thought it was the class because of the variable name."}, {"owner": {"reputation": 2267, "user_id": 882025, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zK7M6.jpg?s=128&g=1", "display_name": "hoffm", "link": "https://stackoverflow.com/users/882025/hoffm"}, "reply_to_user": {"reputation": 15, "user_id": 8532277, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1429855430429697/picture?type=large", "display_name": "gui12344455", "link": "https://stackoverflow.com/users/8532277/gui12344455"}, "edited": false, "score": 0, "creation_date": 1509482841, "post_id": 47044190, "comment_id": 81035853, "body": "Also, if you <i>can</i> pass in the class, that&#39;d be cleaner than using <code>eval</code>, which is usually a code smell."}, {"owner": {"reputation": 2267, "user_id": 882025, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zK7M6.jpg?s=128&g=1", "display_name": "hoffm", "link": "https://stackoverflow.com/users/882025/hoffm"}, "reply_to_user": {"reputation": 15, "user_id": 8532277, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1429855430429697/picture?type=large", "display_name": "gui12344455", "link": "https://stackoverflow.com/users/8532277/gui12344455"}, "edited": false, "score": 0, "creation_date": 1509988505, "post_id": 47044190, "comment_id": 81234578, "body": "@gui12344455 Awesome! It&#39;s customary on SO to upvote/accept helpful answers ;)"}], "tags": [], "owner": {"reputation": 2267, "user_id": 882025, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zK7M6.jpg?s=128&g=1", "display_name": "hoffm", "link": "https://stackoverflow.com/users/882025/hoffm"}, "is_accepted": false, "score": 0, "last_activity_date": 1509482681, "last_edit_date": 1509482681, "creation_date": 1509482355, "answer_id": 47044190, "question_id": 47043894, "link": "https://stackoverflow.com/questions/47043894/search-inside-hash-in-another-class/47044190#47044190", "title": "Search inside hash in another class", "body": "<pre><code>class Permission\n  def self.keys_for(model_name)\n    eval(model_name).const_get(:MAPPING)\n  end\nend\n</code></pre>\n\n<p>But, have you considered an implementation in which <code>Permission</code> is a <a href=\"http://api.rubyonrails.org/v5.1/classes/ActiveSupport/Concern.html\" rel=\"nofollow noreferrer\">concern</a> that gets included into each model so that you don't have to pass the classes around explicitly?</p>\n"}, {"tags": [], "owner": {"reputation": 3004, "user_id": 5830036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/B2b06.png?s=128&g=1", "display_name": "Mayur Shah", "link": "https://stackoverflow.com/users/5830036/mayur-shah"}, "is_accepted": false, "score": 0, "last_activity_date": 1509483296, "last_edit_date": 1509483296, "creation_date": 1509482760, "answer_id": 47044289, "question_id": 47043894, "link": "https://stackoverflow.com/questions/47043894/search-inside-hash-in-another-class/47044289#47044289", "title": "Search inside hash in another class", "body": "<pre><code>class Permission\n  def self.keys_for(model)\n    f = File.open(\"#{model}.rb\") #f give you the permissions hash\n  end\nend\n</code></pre>\n\n<p><strong>notes</strong> : make sure that model param is the same as file name and also take care for path of files.</p>\n\n<p>Hope you got my point</p>\n"}], "owner": {"reputation": 15, "user_id": 8532277, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1429855430429697/picture?type=large", "display_name": "gui12344455", "link": "https://stackoverflow.com/users/8532277/gui12344455"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1509483296, "creation_date": 1509481156, "question_id": 47043894, "link": "https://stackoverflow.com/questions/47043894/search-inside-hash-in-another-class", "title": "Search inside hash in another class", "body": "<p>I have the following structure:</p>\n\n<p>policies/permissions</p>\n\n<p>Inside permissions folder:</p>\n\n<pre><code>car.rb\nbus.rb\nbike.rb\n</code></pre>\n\n<p>Every permission file has a hash:</p>\n\n<pre><code>MAPPING = {\n   create: [:admin]\n   delete: [:admin]\n   etc\n}\n</code></pre>\n\n<p>On Permission class (policies folder) I have the following method to check permissions:</p>\n\n<pre><code>class Permission\n   def self.keys_for(model)\n     # ?\n   end\nend\n</code></pre>\n\n<p>How can I dynamically search the MAPPING hash based on the model that is being passed as parameter ?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 67, "user_id": 8826153, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5fea90c40c56a9052523f185fcfb5709?s=128&d=identicon&r=PG&f=1", "display_name": "msc", "link": "https://stackoverflow.com/users/8826153/msc"}, "reply_to_user": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1509481237, "post_id": 47043874, "comment_id": 81035112, "body": "I havent even made one yet, I wanted a hash with that outcome from the array"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1509485055, "post_id": 47043874, "comment_id": 81036821, "body": "More or less what @CarySwoveland posted today/yesterday for an answer: <code>arr.map { |first, *rest| [first,rest.zip]  }.to_h</code>"}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 8826153, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5fea90c40c56a9052523f185fcfb5709?s=128&d=identicon&r=PG&f=1", "display_name": "msc", "link": "https://stackoverflow.com/users/8826153/msc"}, "edited": false, "score": 0, "creation_date": 1509487238, "post_id": 47044049, "comment_id": 81037671, "body": "by altering the array I was able to get this outcome [[&quot;&lt;object&gt;&quot;], [&quot;waves&quot;], [&quot;big    yellow       flowers&quot;], [&quot;slugs&quot;]]"}, {"owner": {"reputation": 67, "user_id": 8826153, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5fea90c40c56a9052523f185fcfb5709?s=128&d=identicon&r=PG&f=1", "display_name": "msc", "link": "https://stackoverflow.com/users/8826153/msc"}, "edited": false, "score": 0, "creation_date": 1509487300, "post_id": 47044049, "comment_id": 81037686, "body": "is there a way now to get {&lt;object&gt;&quot;=&gt; [[&quot;waves&quot;], [&quot;big&quot;, &quot;yellow&quot;, &quot;flowers&quot;], [&quot;slugs&quot;]]}"}], "tags": [], "owner": {"reputation": 2267, "user_id": 882025, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zK7M6.jpg?s=128&g=1", "display_name": "hoffm", "link": "https://stackoverflow.com/users/882025/hoffm"}, "is_accepted": true, "score": 0, "last_activity_date": 1509482133, "last_edit_date": 1509482133, "creation_date": 1509481813, "answer_id": 47044049, "question_id": 47043874, "link": "https://stackoverflow.com/questions/47043874/convert-array-to-hash-ruby/47044049#47044049", "title": "Convert Array to Hash Ruby", "body": "<p>You'll need to alter your input a bit, but you probably want <code>Hash#[]</code> (<a href=\"https://ruby-doc.org/core-2.4.0/Hash.html#method-i-5B-5D\" rel=\"nofollow noreferrer\">docs</a>).</p>\n\n<p>Example:</p>\n\n<pre><code>arry = [[\"key1\", \"val1\"], [\"key2\", \"val2\"]]\nHash[arry]\n # =&gt; {\"key1\"=&gt;\"val1\", \"key2\"=&gt;\"val2\"} \n</code></pre>\n\n<p>So you need to massage your array into an array of pairs of keys and values.</p>\n\n<pre><code>input = [\n  [\"&lt; start &gt;\", \"The   &lt; object &gt;   &lt; verb &gt;   tonight.\"],\n  [\"&lt; object &gt;\", \"waves\", \"big    yellow       flowers\", \"slugs\"]\n]\n\nmassaged_input = input.map{|arry| [arry.slice!(0), arry.join.squeeze(\" \")] }\n # =&gt; [[\"&lt; start &gt;\", \"The &lt; object &gt; &lt; verb &gt; tonight.\"], [\"&lt; object &gt;\", \"wavesbig yellow flowersslugs\"]]    \n\nHash[massaged_input]\n # =&gt; {\"&lt; start &gt;\"=&gt;\"The &lt; object &gt; &lt; verb &gt; tonight.\", \"&lt; object &gt;\"=&gt;\"wavesbig yellow flowersslugs\"} \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1509497598, "post_id": 47044091, "comment_id": 81040562, "body": "I think something happened during your edit. Your code produces an array of hashes, rather than the hash you show (which I expect is a relic), the latter being the desired return value."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1509498389, "post_id": 47044091, "comment_id": 81040730, "body": "@caryswoveland thank you edit made to resolve although now essentially duplicates yours"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1509502420, "post_id": 47044091, "comment_id": 81041651, "body": "I figure it&#39;s what you intended, so it&#39;s mine that&#39;s a close dup of yours. Oh, well, the question&#39;s closed so time to move on..."}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 0, "last_activity_date": 1509498353, "last_edit_date": 1509498353, "creation_date": 1509481963, "answer_id": 47044091, "question_id": 47043874, "link": "https://stackoverflow.com/questions/47043874/convert-array-to-hash-ruby/47044091#47044091", "title": "Convert Array to Hash Ruby", "body": "<p>This is how I would go about this specific example</p>\n\n<pre><code>a = [[\"&lt; start &gt;\", \"The   &lt; object &gt;   &lt; verb &gt;   tonight.\"], \n [\"&lt; object &gt;\", \"waves\", \"big    yellow       flowers\", \"slugs\"]]\n\na.each_with_object({}) { |(k,*v), obj| obj[k] = v.map { |a| a.scan(/&lt;\\s\\w+\\s&gt;|\\w+/) } } \n#=&gt; {\"&lt; start &gt;\"=&gt;[[\"The\", \"&lt; object &gt;\", \"&lt; verb &gt;\", \"tonight\"]], \n#    \"&lt; object &gt;\"=&gt;[[\"waves\"], [\"big\", \"yellow\", \"flowers\"], [\"slugs\"]]}\n</code></pre>\n\n<p>This just uses a simple regex to parse the strings into the requested format.</p>\n\n<p><a href=\"https://repl.it/N7H3/6\" rel=\"nofollow noreferrer\">Code Example</a></p>\n\n<p>Regex: <code>/&lt;\\s\\w+\\s&gt;|\\w+/</code></p>\n\n<ul>\n<li>match <code>&lt;\\s\\w+\\s&gt;</code> \n\n<ul>\n<li><code>&lt;</code>(literal) </li>\n<li><code>\\s</code> space </li>\n<li><code>\\w+</code> one or more word characters (letter, number, underscore) </li>\n<li><code>\\s</code> space </li>\n<li><code>&gt;</code> (literal)</li>\n</ul></li>\n<li><code>|</code> OR</li>\n<li>match <code>\\w+</code> one or more word characters (letter, number, underscore)</li>\n</ul>\n\n<p><a href=\"http://rubular.com/r/IPbnHgx8fb\" rel=\"nofollow noreferrer\">Regex Example</a></p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1509497187, "creation_date": 1509497187, "answer_id": 47046622, "question_id": 47043874, "link": "https://stackoverflow.com/questions/47043874/convert-array-to-hash-ruby/47046622#47046622", "title": "Convert Array to Hash Ruby", "body": "<pre><code>arr = [[\"&lt; start &gt;\", \"The   &lt; object &gt;   &lt; verb &gt;   tonight.\"], \n       [\"&lt; object &gt;\", \"waves\", \"big    yellow       flowers\", \"slugs\"]]\n\narr.each_with_object({}) { |(first, *rest),h|\n  h[first] = rest.map { |s| s.scan(/\\&lt; \\S+ \\&gt;|\\S+/) } }\n  #=&gt; {\"&lt; start &gt; \"=&gt;[[\"The\", \"&lt; object &gt;\", \"&lt; verb &gt;\", \"tonight.\"]],\n  #    \"&lt; object &gt;\"=&gt;[[\"waves\"], [\"big\", \"yellow\", \"flowers\"], [\"slugs\"]]}.\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 8826153, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5fea90c40c56a9052523f185fcfb5709?s=128&d=identicon&r=PG&f=1", "display_name": "msc", "link": "https://stackoverflow.com/users/8826153/msc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "closed_date": 1509497040, "accepted_answer_id": 47044049, "answer_count": 3, "score": 0, "last_activity_date": 1509498353, "creation_date": 1509481055, "last_edit_date": 1509481244, "question_id": 47043874, "link": "https://stackoverflow.com/questions/47043874/convert-array-to-hash-ruby", "closed_reason": "Duplicate", "title": "Convert Array to Hash Ruby", "body": "<p>I have an array with the following contents:</p>\n\n<pre><code>[[\"&lt; start &gt;\", \"The   &lt; object &gt;   &lt; verb &gt;   tonight.\"], \n [\"&lt; object &gt;\", \"waves\", \"big    yellow       flowers\", \"slugs\"]]\n</code></pre>\n\n<p>I would like to create a Hash that would return</p>\n\n<pre><code>{\"&lt; start &gt;\"=&gt;[[\"The\", \"&lt; object &gt;\", \"&lt; verb &gt;\", \"tonight.\"]], \n \"&lt; object &gt;\"=&gt;[[\"waves\"], [\"big\", \"yellow\", \"flowers\"], [\"slugs\"]]}\n</code></pre>\n\n<p>I wanted to do some sort of match key.to_s.match(/&lt; ? >/) but im not sure how to implement..complete noob</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 7736, "user_id": 687142, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VErBp.jpg?s=128&g=1", "display_name": "xlembouras", "link": "https://stackoverflow.com/users/687142/xlembouras"}, "is_accepted": false, "score": 1, "last_activity_date": 1509482709, "last_edit_date": 1509482709, "creation_date": 1509478711, "answer_id": 47043345, "question_id": 47043285, "link": "https://stackoverflow.com/questions/47043285/skip-children-validations-with-condition/47043345#47043345", "title": "Skip children validations with condition", "body": "<p>You need to provide a <code>Proc</code> to the conditional validation</p>\n\n<pre><code>validates :score_url, presence: true, if: Proc.new { |book| book.author.scientist? }\n</code></pre>\n\n<p>if your validation gets any more complex, you should extract the logic to a new method.</p>\n\n<pre><code>validates :score_url, presence: true, if: :author_scientist?\n\nprivate\n\ndef author_scientist?\n  author.present? &amp;&amp; author.scientist?\nend\n</code></pre>\n"}], "owner": {"reputation": 298, "user_id": 2522666, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d99019d49e480c8654156065b29eeb6f?s=128&d=identicon&r=PG", "display_name": "dosuken123", "link": "https://stackoverflow.com/users/2522666/dosuken123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1509482709, "creation_date": 1509478448, "question_id": 47043285, "link": "https://stackoverflow.com/questions/47043285/skip-children-validations-with-condition", "title": "Skip children validations with condition", "body": "<p>I have two ActiveRecords <code>Author</code> and <code>Book</code>.</p>\n\n<pre><code>class Author &lt; ActiveRecord::Base\n  has_many :books\n\n  enum author_type: {\n    musician: 0,\n    scientist: 1\n  }\n\n  accepts_nested_attributes_for :books\nend\n\nclass Book &lt; ActiveRecord::Base\n  belongs_to :author\n\n  validates :name, presence: true\n  validates :score_url, presence: true\nend\n</code></pre>\n\n<p>Now <code>Book</code> validates presence for both <code>name</code> and <code>score_url</code>, \nbut I want skip validation for <code>score_url</code> when <code>author.author_type</code> is <code>scientist</code>.</p>\n\n<p>I tried this way, but <code>author</code> can not be found during creation.</p>\n\n<pre><code>class Book &lt; ActiveRecord::Base\n  belongs_to :author\n\n  validates :name, presence: true\n  validates :score_url, presence: true, if: \"author.scientist?\"\nend\n</code></pre>\n\n<p>What is the best solution here?</p>\n"}, {"tags": ["ruby", "xml", "nokogiri"], "answers": [{"tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 1, "last_activity_date": 1509477492, "last_edit_date": 1509477492, "creation_date": 1509476334, "answer_id": 47042778, "question_id": 47042757, "link": "https://stackoverflow.com/questions/47042757/storing-xml-text-nodes-into-an-array/47042778#47042778", "title": "Storing XML text nodes into an array", "body": "<p>That's because you're iterating over an empty array. The <code>directories</code> array you've created doesn't have any content, that's why when you assign to directory the content from the iteration you get an empty array too.</p>\n\n<p>Try instead iterating over the parsed XML and then pushing, like:</p>\n\n<pre><code>xml_structure = &lt;&lt;-XML\n&lt;config&gt;\n  &lt;directories&gt;\n    &lt;directory&gt;directory1&lt;/directory&gt;\n    &lt;directory&gt;directory2&lt;/directory&gt;\n  &lt;/directories&gt;\n&lt;/config&gt;\nXML\n\ndoc = Nokogiri::XML(xml_structure)\ndirectories = []\ndoc.xpath('//config/directories/directory').each do |directory|\n  directories.push directory.text\nend\np directories\n#\u00a0[\"directory1\", \"directory2\"]\n</code></pre>\n\n<p>Or using map you can do it too:</p>\n\n<pre><code>doc = Nokogiri::XML(xml_structure)\np doc.xpath('//config/directories/directory').map(&amp;:text)\n# [\"directory1\", \"directory2\"]\n</code></pre>\n"}], "owner": {"reputation": 301, "user_id": 8377803, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5830df75f0a77fc8e13dab48748cb559?s=128&d=identicon&r=PG&f=1", "display_name": "Tom D", "link": "https://stackoverflow.com/users/8377803/tom-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 47042778, "answer_count": 1, "score": 1, "last_activity_date": 1509477492, "creation_date": 1509476258, "question_id": 47042757, "link": "https://stackoverflow.com/questions/47042757/storing-xml-text-nodes-into-an-array", "title": "Storing XML text nodes into an array", "body": "<p>I'm trying to store all of the text nodes of of the \"directory\" elements into an array of strings. I'm getting an empty array returned and I can't figure out why the array is empty.</p>\n\n<p>Here's the XML</p>\n\n<pre><code>&lt;config&gt;\n    &lt;directories&gt;\n        &lt;directory&gt;directory1&lt;/directory&gt;\n        &lt;directory&gt;directory2&lt;/directory&gt;\n    &lt;/directories&gt;\n&lt;/config&gt;\n</code></pre>\n\n<p>Here's the ruby code</p>\n\n<pre><code>require 'nokogiri'\n\ndirectories = []\ndirectories.each do |directory|\n  directory = config.at('//config/directories').text\nend\n</code></pre>\n\n<p>What am I missing?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "variables", "prawn", "scopes"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 1, "creation_date": 1509475467, "post_id": 47042406, "comment_id": 81032025, "body": "Please include what you have tried, what you expect to happen, and what actually happens. As it is, if I copy and paste your code and run <code>PdfGen.new(&#39;foo&#39;).build</code> it raises an exception because you have not formatted your <a href=\"http://prawnpdf.org/docs/0.11.1/Prawn/Document.html#method-c-generate\" rel=\"nofollow noreferrer\">generate call</a> properly."}], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 4337545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c27815b7114b89bd5c252163f4d2cce1?s=128&d=identicon&r=PG", "display_name": "apt", "link": "https://stackoverflow.com/users/4337545/apt"}, "edited": false, "score": 0, "creation_date": 1509479442, "post_id": 47042690, "comment_id": 81034226, "body": "Hi that is exactly it.  `  def initialize(&amp;block)`       <code>if block</code>         <code>block.arity &lt; 1 ? instance_eval(&amp;block) : block[self]</code>       <code>end</code>       <code>end</code>"}], "tags": [], "owner": {"reputation": 1606, "user_id": 3137698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1819a8d2ac84a22c29b910b38dd4686f?s=128&d=identicon&r=PG", "display_name": "zinovyev", "link": "https://stackoverflow.com/users/3137698/zinovyev"}, "is_accepted": true, "score": 2, "last_activity_date": 1509476006, "creation_date": 1509476006, "answer_id": 47042690, "question_id": 47042406, "link": "https://stackoverflow.com/questions/47042406/instance-variable-not-avaliable-in-instance-method-call/47042690#47042690", "title": "Instance variable not avaliable in instance method call", "body": "<p>It seems like <code>Prawn::Document.generate()</code> evaluates code block in it's own scope (e.g. via <code>#instance_eval</code> method), different from your object's scope.</p>\n\n<p>You can prove it by printing <code>puts class</code> in this block. This will give you a picture of what's going on there)</p>\n"}], "owner": {"reputation": 117, "user_id": 4337545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c27815b7114b89bd5c252163f4d2cce1?s=128&d=identicon&r=PG", "display_name": "apt", "link": "https://stackoverflow.com/users/4337545/apt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 47042690, "answer_count": 1, "score": 0, "last_activity_date": 1509476006, "creation_date": 1509475032, "question_id": 47042406, "link": "https://stackoverflow.com/questions/47042406/instance-variable-not-avaliable-in-instance-method-call", "title": "Instance variable not avaliable in instance method call", "body": "<p>Given the situation below, why can't I access my @inst variable in the Prawn block?</p>\n\n<p>calling: PdfGen.new('inst').build</p>\n\n<pre><code>class PdfGen\n @class = \"class\"\n\n  def initialize(inst)\n   @inst = inst\n  end\n\n  def build\n    @inst  #=&gt; 'inst'\n    Prawn::Document.generate() do\n      @inst  #=&gt; nil\n      @class #=&gt; 'class'\n    end\n  end\n\nend\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "count"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1509476563, "post_id": 47041780, "comment_id": 81032648, "body": "Is <code>ary</code> an array of 1-character strings? If not, and one element of <code>ary</code> is <code>&quot;DDr&quot;</code>, does that count as <code>0</code>, <code>1</code> or <code>2</code> <code>&#39;D&#39;</code>&#39;s?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1509482874, "post_id": 47041780, "comment_id": 81035876, "body": "@CarySwoveland: well, if provided examples are any indication, then it&#39;s an array of one-char strings."}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1509976571, "post_id": 47041780, "comment_id": 81226399, "body": "Ready to select an answer?"}, {"owner": {"reputation": 1690, "user_id": 4602919, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9c8081c1665f7277b43cf167af5ccf28?s=128&d=identicon&r=PG&f=1", "display_name": "Asara", "link": "https://stackoverflow.com/users/4602919/asara"}, "edited": false, "score": 0, "creation_date": 1509990210, "post_id": 47041780, "comment_id": 81235510, "body": "the problem is, my question somehow violated the stackoverflow question restrictions, thats why I cant accept an answer now because there is no real answer :)"}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1510153254, "post_id": 47041780, "comment_id": 81314723, "body": "This question is not on hold or otherwise closed or locked. I see no reason why you can&#39;t click the green checkmark by my answer (or one of the others :) )"}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1509473297, "post_id": 47041852, "comment_id": 81030781, "body": "Maybe just <code>&#39;DEF&#39;.include?(item)</code>."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1509476229, "post_id": 47041852, "comment_id": 81032447, "body": "Maybe, but this will also match &quot;DE&quot;, &quot;EF&quot; and &quot;DEF&quot;. If a strict single letter match is needed, this won&#39;t suffice"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1509476606, "post_id": 47041852, "comment_id": 81032671, "body": "We need clarification. I left a comment on the question."}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": false, "score": 1, "last_activity_date": 1509472872, "creation_date": 1509472872, "answer_id": 47041852, "question_id": 47041780, "link": "https://stackoverflow.com/questions/47041780/how-to-make-more-beauty-ruby-code-to-count-multiple-items-in-flatten-array/47041852#47041852", "title": "How to make more beauty ruby code to count multiple items in flatten Array", "body": "<p>You can pass a <strong>block</strong> to <code>Array#count</code>, as follows:</p>\n\n<pre><code>ary.count { |item| %w(D E F).include?(item) }\n</code></pre>\n\n<p>This will return a count of how many elements for which the block returns a truthy (not <code>nil</code> or <code>false</code>) value.</p>\n\n<p><code>%w()</code> is a nice syntax for defining an array of <em>strings</em> - i.e. the following are equivalent:</p>\n\n<pre><code>['D', 'E', 'F'] == %w(D E F)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1509474028, "post_id": 47041856, "comment_id": 81031217, "body": "Why the anchors? I must be missing something obvious."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1509475739, "post_id": 47041856, "comment_id": 81032173, "body": "@CarySwoveland To match single-letter strings and not, say, strings like <code>&quot;F grade&quot;</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1509476657, "post_id": 47041856, "comment_id": 81032693, "body": "See my comment on the question."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 3, "last_activity_date": 1509473252, "last_edit_date": 1509473252, "creation_date": 1509472904, "answer_id": 47041856, "question_id": 47041780, "link": "https://stackoverflow.com/questions/47041780/how-to-make-more-beauty-ruby-code-to-count-multiple-items-in-flatten-array/47041856#47041856", "title": "How to make more beauty ruby code to count multiple items in flatten Array", "body": "<p>You could use a regex. </p>\n\n<pre><code>ary.grep(/\\A(D|E|F)\\z/).size\n</code></pre>\n\n<p>You can easily build this regex from array <code>['D', 'E', 'F']</code>, but I'll leave that up to you.</p>\n"}, {"comments": [{"owner": {"reputation": 1690, "user_id": 4602919, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9c8081c1665f7277b43cf167af5ccf28?s=128&d=identicon&r=PG&f=1", "display_name": "Asara", "link": "https://stackoverflow.com/users/4602919/asara"}, "edited": false, "score": 1, "creation_date": 1509473561, "post_id": 47041962, "comment_id": 81030949, "body": "that does not look simpler to me"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1509473634, "post_id": 47041962, "comment_id": 81030999, "body": "A tiny suggestion: <code>&#39;FISSION.each_char.grep...</code>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1509474152, "post_id": 47041962, "comment_id": 81031308, "body": "@CarySwoveland Why <code>each_char</code> vs. <code>chars</code>?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1509477192, "post_id": 47041962, "comment_id": 81032959, "body": "To avoid creating a temporary array. I&#39;m in the habit of using <code>each_char</code> whenever an Enumerable follows."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1509478137, "post_id": 47041962, "comment_id": 81033512, "body": "@CarySwoveland Ah, that is a good point. For repeat operations that&#39;d be more efficient."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 3, "last_activity_date": 1509473357, "creation_date": 1509473357, "answer_id": 47041962, "question_id": 47041780, "link": "https://stackoverflow.com/questions/47041780/how-to-make-more-beauty-ruby-code-to-count-multiple-items-in-flatten-array/47041962#47041962", "title": "How to make more beauty ruby code to count multiple items in flatten Array", "body": "<p>It's pretty straightforward if you're simply counting letters:</p>\n\n<pre><code>letters = 'AEIOU'.chars\n\nmatches = 'FISSION'.chars.grep(Regexp.union(letters)).count\n</code></pre>\n\n<p>Where this is useful for matching single letter instances in a case-sensitive manner. Here <code>Regexp.union</code> creates a single regular expression that matches any of those letters.</p>\n"}, {"tags": [], "owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "is_accepted": false, "score": 0, "last_activity_date": 1509497621, "creation_date": 1509497621, "answer_id": 47046680, "question_id": 47041780, "link": "https://stackoverflow.com/questions/47041780/how-to-make-more-beauty-ruby-code-to-count-multiple-items-in-flatten-array/47046680#47046680", "title": "How to make more beauty ruby code to count multiple items in flatten Array", "body": "<p>You were close. It's actually very simple, using a little-known feature of <code>String#count</code>:</p>\n\n<pre><code>'DEF'.count('DEF') #=&gt; 3\n'FEED ME'.count('DEF') #=&gt; 5\n</code></pre>\n"}], "owner": {"reputation": 1690, "user_id": 4602919, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9c8081c1665f7277b43cf167af5ccf28?s=128&d=identicon&r=PG&f=1", "display_name": "Asara", "link": "https://stackoverflow.com/users/4602919/asara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1509497621, "creation_date": 1509472591, "question_id": 47041780, "link": "https://stackoverflow.com/questions/47041780/how-to-make-more-beauty-ruby-code-to-count-multiple-items-in-flatten-array", "title": "How to make more beauty ruby code to count multiple items in flatten Array", "body": "<p>I want to count how much <code>D</code> and <code>E</code> and <code>F</code> contains the array <code>ary</code> in total.</p>\n\n<p>I can do it like</p>\n\n<pre><code>ary.count('D') + ary.count('E') + ary.count('F')\n</code></pre>\n\n<p>or like</p>\n\n<pre><code>count = 0\n'DEF'.split('').each do |letter|\n  count += ary.count(letter)\nend\ncount\n</code></pre>\n\n<p>but both of it don't look very smart to me, is there a better way in ruby? Unfortunately, <code>.count('D','E','F')</code> does not work.</p>\n"}, {"tags": ["ruby", "regex", "regex-negation"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1509472455, "post_id": 47041682, "comment_id": 81030288, "body": "Any zero-width assertion loses its meaning inside a character class. See <a href=\"https://ideone.com/54MTLn\" rel=\"nofollow noreferrer\">this Ruby demo</a>. <code>[^\\b]</code> matches any char but a backspace char."}, {"owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "edited": false, "score": 0, "creation_date": 1509472460, "post_id": 47041682, "comment_id": 81030292, "body": "Maybe you&#39;re looking for <code>\\B</code>? the opposite of <code>\\b</code>"}, {"owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "edited": false, "score": 0, "creation_date": 1509472532, "post_id": 47041682, "comment_id": 81030345, "body": "If you want <code>hello</code>, just use <code>[a-z]+</code>"}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1509472560, "post_id": 47041715, "comment_id": 81030362, "body": "Backspace? What do you mean?"}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1509472619, "post_id": 47041715, "comment_id": 81030396, "body": "@SergioTulentsev: The character backspace, octal <code>010</code> or decimal <code>8</code>"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1509472691, "post_id": 47041715, "comment_id": 81030434, "body": "I&#39;ll be damned, it does mean that. TIL"}], "tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": true, "score": 2, "last_activity_date": 1509472711, "last_edit_date": 1509472711, "creation_date": 1509472429, "answer_id": 47041715, "question_id": 47041682, "link": "https://stackoverflow.com/questions/47041682/is-there-a-difference-between-b-and/47041715#47041715", "title": "Is there a difference between `[^\\b]` and `.`?", "body": "<p><code>[\\b]</code> means backspace and <code>[^\\b]</code> not a backspace</p>\n\n<p><code>\\b</code> is not a character, it can't be included in a character class.</p>\n\n<p>The negation of a word boundary is <code>\\B</code></p>\n"}], "owner": {"reputation": 7087, "user_id": 966097, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/ee7b96184af7d8545fa8516b847401a2?s=128&d=identicon&r=PG", "display_name": "Mike H-R", "link": "https://stackoverflow.com/users/966097/mike-h-r"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "closed_date": 1509472433, "accepted_answer_id": 47041715, "answer_count": 1, "score": 0, "last_activity_date": 1509472895, "creation_date": 1509472316, "question_id": 47041682, "link": "https://stackoverflow.com/questions/47041682/is-there-a-difference-between-b-and", "closed_reason": "Duplicate", "title": "Is there a difference between `[^\\b]` and `.`?", "body": "<p>Is there a difference between <code>[^\\b]</code> and <code>.</code>?</p>\n\n<p>I was modifying some code created by someone else that included this no-word-boundary-character-class (<code>[^\\b]</code>). and am not able to find a difference between that and wildcard <code>.</code> (this is in ruby).</p>\n\n<p>My assumption was that <code>[^\\b]+</code> when applied to the string <code>hello world</code> should match <code>hello</code> and stop before the space, (as that is where there is a word boundary.</p>\n\n<p>My observation is that it seems to just match everything. <a href=\"http://rubular.com/r/b06M3OhelZ\" rel=\"nofollow noreferrer\">rubular link</a>.</p>\n\n<p>What should be happening here?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-5", "aws-sdk"], "comments": [{"owner": {"reputation": 10865, "user_id": 2933977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25308d33862d9b72e0b93160b1fd778c?s=128&d=identicon&r=PG", "display_name": "stdunbar", "link": "https://stackoverflow.com/users/2933977/stdunbar"}, "edited": false, "score": 1, "creation_date": 1509471912, "post_id": 47041306, "comment_id": 81029913, "body": "You&#39;ll need to make the destination bucket first."}, {"owner": {"reputation": 41, "user_id": 6153252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae757cd455ce0ad298dfc2622fef3f11?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Watkins", "link": "https://stackoverflow.com/users/6153252/richard-watkins"}, "reply_to_user": {"reputation": 10865, "user_id": 2933977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25308d33862d9b72e0b93160b1fd778c?s=128&d=identicon&r=PG", "display_name": "stdunbar", "link": "https://stackoverflow.com/users/2933977/stdunbar"}, "edited": false, "score": 0, "creation_date": 1509479537, "post_id": 47041306, "comment_id": 81034283, "body": "I&#39;ve already made the permanent bucket but when I copy the temporary object I want to place that in the bucket under the file path which is the <code>permanent_objects</code> key."}, {"owner": {"reputation": 10865, "user_id": 2933977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25308d33862d9b72e0b93160b1fd778c?s=128&d=identicon&r=PG", "display_name": "stdunbar", "link": "https://stackoverflow.com/users/2933977/stdunbar"}, "edited": false, "score": 0, "creation_date": 1509479815, "post_id": 47041306, "comment_id": 81034425, "body": "Can you give a bit more concrete example then?  Give an example source and destination as I&#39;m not sure I&#39;m completely following you."}, {"owner": {"reputation": 41, "user_id": 6153252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae757cd455ce0ad298dfc2622fef3f11?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Watkins", "link": "https://stackoverflow.com/users/6153252/richard-watkins"}, "reply_to_user": {"reputation": 10865, "user_id": 2933977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25308d33862d9b72e0b93160b1fd778c?s=128&d=identicon&r=PG", "display_name": "stdunbar", "link": "https://stackoverflow.com/users/2933977/stdunbar"}, "edited": false, "score": 0, "creation_date": 1509481208, "post_id": 47041306, "comment_id": 81035094, "body": "I have 2 buckets a temporary one and a permanent one. At this point in my code the permanent_object has a key <code>&#47;account_reference&#47;&lt;time_stamp&gt;</code>. So when I copy the <code>temporary_object</code> to the <code>permanent_object</code> as far as I understand the <code>temporary_object</code> should be copied to the <code>permanent_object</code> so it should exist under <code>my-permanent-bucket&#47;account_reference&#47;&lt;time_stamp&gt;</code>. Just copying one object to another."}], "owner": {"reputation": 41, "user_id": 6153252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae757cd455ce0ad298dfc2622fef3f11?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Watkins", "link": "https://stackoverflow.com/users/6153252/richard-watkins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1509471133, "creation_date": 1509471133, "question_id": 47041306, "link": "https://stackoverflow.com/questions/47041306/aws-copying-one-object-to-another", "title": "AWS copying one object to another", "body": "<p>I'm trying to copy data from one bucket to another using the ruby <code>\"aws-sdk\"</code> gem version 3.</p>\n\n<p>My code is shown below:</p>\n\n<pre><code>temporary_object = @temporary_bucket.object(temporary_path)\npermanent_object = @permanent_bucket.object(permanent_path)\ntemporary_object.copy_to(permanent_object)\n</code></pre>\n\n<p>However I keep getting the error <code>Aws::S3::Errors::NoSuchKey: The specified key does not exist.</code> Which makes sense as the permanent bucket doesn't exist at this moment however I thought that using <code>copy_to</code> creates the bucket if it does not exist.</p>\n\n<p>Any advice would be very helpful.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "watir"], "comments": [{"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1509471732, "post_id": 47041056, "comment_id": 81029754, "body": "When you say the &quot;script was just timing out&quot; do you mean that an exception occurred when calling <code>browser.goto</code>? If so, couldn&#39;t you rescue the exception and exit with that specified status?"}, {"owner": {"reputation": 17, "user_id": 2719433, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bfbbaa98ad1b6e8227c8b2e10e4bafb1?s=128&d=identicon&r=PG&f=1", "display_name": "BanditBBS", "link": "https://stackoverflow.com/users/2719433/banditbbs"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1509489811, "post_id": 47041056, "comment_id": 81038523, "body": "The <code>browser.goto</code> line times out after 60 seconds and the script just exits with an exception.  I did this to get around it: <code>begin   Timeout::timeout(28) do     browser.goto test_site   end rescue =&gt; e   puts &quot;CRITICAL: Open a SEV1 - Page never loads!&quot;   exit 2 end </code> Not sure if that was the best method and more than open to feedback"}, {"owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "edited": false, "score": 0, "creation_date": 1509570290, "post_id": 47041056, "comment_id": 81075457, "body": "In ruby it seems there is always more than one way to do things and endless potential discussions over which is the &#39;best way&#39;.  I&#39;d say if this is working for you, then go ahead and use it.   It&#39;s pretty much what I would do if the basic timeout error was not enough to inform me of what went wrong."}], "answers": [{"comments": [{"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1509608536, "post_id": 47042210, "comment_id": 81087820, "body": "There is no way <code>Watir.default_timeout</code> is related to <code>b.goto</code>, <code>b.goto</code> time setting doesn&#39;t depends upon Watir.default_timeout. We can set the timings for b.goto, but there is an another way to do it."}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1509609043, "post_id": 47042210, "comment_id": 81088100, "body": "b.goto will return time if you use watir-classic not when you use recent watir which uses selenium at the back, it simply returns the url which is loaded now."}, {"owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "reply_to_user": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1509663618, "post_id": 47042210, "comment_id": 81121450, "body": "I had thought that the default timeout related to more than just the wait methods, but it appears I am wrong..  revising answer accordingly"}, {"owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "reply_to_user": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1509664899, "post_id": 47042210, "comment_id": 81121839, "body": "I started using Watir around 10 years ago, before watir-webdriver..  but had not used the return of .goto for a LONG time, so did not realize that was unique to the old watir we now call watir-classic.  I&#39;ve updated the answer to remove references to that..   Thanks for the catch."}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1509693434, "post_id": 47042210, "comment_id": 81129843, "body": "Okay, All right! Actually <code>driver.manage.timeouts.page_load</code> has to take care of every page loading after every click, but it&#39;s not doing it&#39;s Job It&#39;s working only for goto method. This is the problem in the Ruby selenium Binding, but not in Java Binding. The reason for this problem is, the variable which is used for read timeout is not receiving the value from <code>.page_load=30</code> instead it&#39;s hard-coded for 60 seconds ! I believe this is a bug in selenium ruby binding."}, {"owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "reply_to_user": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1509734109, "post_id": 47042210, "comment_id": 81154885, "body": "I would file a bug against that in the appropriate webdriver project then."}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1509809602, "post_id": 47042210, "comment_id": 81174566, "body": "Okay! That&#39;s great!"}], "tags": [], "owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "is_accepted": false, "score": 0, "last_activity_date": 1509664800, "last_edit_date": 1509664800, "creation_date": 1509474270, "answer_id": 47042210, "question_id": 47041056, "link": "https://stackoverflow.com/questions/47041056/ruby-and-watir-testing-for-page-load/47042210#47042210", "title": "Ruby and Watir - testing for page load", "body": "<p>So while the wait methods have a default timeout, settable thusly: <code>Watir.default_timeout = 30</code> it appears there is no such setting in Watir itself for the the goto method.  However since this is just calling the webdriver navigate.to method, and there IS a timeout settable in webdriver for that, then you can set that using watir's .driver method prior to trying to goto the page.  You should be able set that as follows</p>\n\n<pre><code>b.driver.manage.timeouts.page_load = 30\nb.goto\n</code></pre>\n\n<p>In your case since it's the initial load that is failing this ought to work for you, and if you don't like the default error message, you could rescue and provide your own.</p>\n\n<p>In most cases I've seen however, the delays are often with REST services that are slow or overloaded, so just setting that prior to your goto will most often not be sufficient if the delays are with subsequent AJAX calls.  What is checked when you use goto is the browser status, which will be 'ready' once the initial page content has been loaded, and often that happens pretty quickly as these days that content is often all static, cached and rapidly served by the webserver.  Basically that is the time for loading a web 1.0 web-page.  </p>\n\n<p>Typically modern 'web 2.0' pages have a LOT of scripts and AJAX/REST style interactions that are usually necessary for all the page content to appear. It's not uncommon for the browser to report 'ready' when the page is mostly blank as the remaining contents are pulled in via REST or GRAPHQL requests. There is not unfortunately a standard way to tell if the browser is busy making further requests due to scripts.  </p>\n\n<p>The most standard thing to do is wait a given amount of time for a specific condition to be true, usually something to appear on the page that is one of the last things loaded/rendered.  The wait methods take timeout parameterss, so you could do something along these lines</p>\n\n<pre><code>b.goto 'www.mysite.com'\nWatir::Wait.until(timeout=30) { browser.text_field(name: 'username').exists? }\n</code></pre>\n\n<p>The Watir::Wait.until method (rubydocs <a href=\"http://www.rubydoc.info/gems/watir/Watir/Wait\" rel=\"nofollow noreferrer\">here</a>) also accepts a custom message if you want to provide one to make it easier to know what timed out when it fails. </p>\n"}], "owner": {"reputation": 17, "user_id": 2719433, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bfbbaa98ad1b6e8227c8b2e10e4bafb1?s=128&d=identicon&r=PG&f=1", "display_name": "BanditBBS", "link": "https://stackoverflow.com/users/2719433/banditbbs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 488, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1509664800, "creation_date": 1509470262, "question_id": 47041056, "link": "https://stackoverflow.com/questions/47041056/ruby-and-watir-testing-for-page-load", "title": "Ruby and Watir - testing for page load", "body": "<p>I wrote this script a couple months ago and it has been working great.  However, had an issue last night that the page never loads and just spins forever.  My script was just timing out.  I need to add code to test if the page fully loads within 30 second and if not to exit with a status of 2 and a proper message.  Here is the code I have:</p>\n\n<pre><code>#-------------------------------------------------------------#\n# Watir Login to XXXX SSO Site\n#  Written 2017-09-17 for ITC by Jim Clark\n#-------------------------------------------------------------#\n# the Watir controller\nrequire \"watir\"\n# set a variable\n#test_site = \"https://oracle.pomeroy.com\"\ntest_site = \"http://xxx.xxx\"\n# open a browser\nbrowser = Watir::Browser.new :phantomjs\n#puts \"Beginning of test: XXXX SSO Login.\"\n#puts \" Step 1: go to the test site: \" + test_site\nbrowser.goto test_site\n# Test if page fully loaded after 30 seconds, if not, exit with proper status and message\n\n\n# validate login site loads\nif browser.text.include? \"Username\"\n  #puts \" Step 2: enter username and password text fields.\"\n  browser.text_field(:name, \"username\").set \"xxxx\"\n  browser.text_field(:name, \"password\").set \"xxxx\"\n  #puts \" Step 3: click login\"\n  browser.button(:text, \"Login\").click\n  if browser.text.include? \"Logged In As XXXX\"\n    puts \"OK: Test Passed.  Login worked!\"\n    status = 0\n  else\n    puts \"CRITICAL: Open a SEV1 - Test login failed!\"\n    status = 2\n  end\nelse\n  puts \"CRITICAL: Open a SEV1 - Could not find login page!\"\n  status = 2\nend\nbrowser.close\nexit status\n</code></pre>\n\n<p>I have just spent the last 3 hours searching and reading and tried about 20 different things and nothing I did seemed to work. </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 1, "creation_date": 1509469975, "post_id": 47040927, "comment_id": 81028672, "body": "How and where are you defining <code>@outing</code>?"}, {"owner": {"reputation": 17, "user_id": 7671529, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dbaf7b528af6b4fc322006a558d44000?s=128&d=identicon&r=PG&f=1", "display_name": "AleA", "link": "https://stackoverflow.com/users/7671529/alea"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1509470877, "post_id": 47040927, "comment_id": 81029231, "body": "In the outings_controller <code>@outing = Outing.new</code>"}], "answers": [{"comments": [{"owner": {"reputation": 621, "user_id": 1690384, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4187ec71a8ae5536ad9c319cb5535d14?s=128&d=identicon&r=PG", "display_name": "Junan Chakma", "link": "https://stackoverflow.com/users/1690384/junan-chakma"}, "reply_to_user": {"reputation": 17, "user_id": 7671529, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dbaf7b528af6b4fc322006a558d44000?s=128&d=identicon&r=PG&f=1", "display_name": "AleA", "link": "https://stackoverflow.com/users/7671529/alea"}, "edited": false, "score": 0, "creation_date": 1509473132, "post_id": 47041524, "comment_id": 81030679, "body": "Could you provide the error message a bit in details? may be in screenshot?"}, {"owner": {"reputation": 17, "user_id": 7671529, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dbaf7b528af6b4fc322006a558d44000?s=128&d=identicon&r=PG&f=1", "display_name": "AleA", "link": "https://stackoverflow.com/users/7671529/alea"}, "edited": false, "score": 0, "creation_date": 1509474254, "post_id": 47041524, "comment_id": 81031352, "body": "Sorry I forgot to save a file still I get this error !<a href=\"http://i66.tinypic.com/21muiwo.jpg\" rel=\"nofollow noreferrer\">rails nil argument error</a>"}, {"owner": {"reputation": 621, "user_id": 1690384, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4187ec71a8ae5536ad9c319cb5535d14?s=128&d=identicon&r=PG", "display_name": "Junan Chakma", "link": "https://stackoverflow.com/users/1690384/junan-chakma"}, "reply_to_user": {"reputation": 17, "user_id": 7671529, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dbaf7b528af6b4fc322006a558d44000?s=128&d=identicon&r=PG&f=1", "display_name": "AleA", "link": "https://stackoverflow.com/users/7671529/alea"}, "edited": false, "score": 0, "creation_date": 1509497196, "post_id": 47041524, "comment_id": 81040469, "body": "Could you please provide the full code of  <code>index.html.erb</code>, <code>outings&#47;_index.html.erb</code>, <code>_new_modal.html.erb </code> and <code>outings_controller</code>. May be by creating a gist <a href=\"https://gist.github.com/\" rel=\"nofollow noreferrer\">gist.github.com</a>?"}], "tags": [], "owner": {"reputation": 621, "user_id": 1690384, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4187ec71a8ae5536ad9c319cb5535d14?s=128&d=identicon&r=PG", "display_name": "Junan Chakma", "link": "https://stackoverflow.com/users/1690384/junan-chakma"}, "is_accepted": false, "score": 0, "last_activity_date": 1509472255, "last_edit_date": 1509472255, "creation_date": 1509471846, "answer_id": 47041524, "question_id": 47040927, "link": "https://stackoverflow.com/questions/47040927/rails-5-nil-error-in-the-first-argument-of-a-form/47041524#47041524", "title": "Rails 5: Nil error in the first argument of a form", "body": "<p>You need to pass <code>@outing</code> variable to all forms those are using <code>@outing</code> variable. </p>\n\n<p>Change the line of rendering <code>_new_modal.html.erb</code> partial like this</p>\n\n<p><code>&lt;%= render 'outings/new_modal', outing: outings %&gt;</code> </p>\n\n<p>Then change the line of rendering <code>_form.html.erb</code> like this</p>\n\n<p><code>&lt;%= render 'outings/form', outing: outing %&gt;</code></p>\n\n<p>And finally change the actual form like this</p>\n\n<pre><code>&lt;%= bootstrap_form_for outing do |f| %&gt;\n  &lt;%= f.date_field :day, label: 'Giorno:' %&gt;\n  &lt;%= f.text_field :location, label: 'Luogo:' %&gt;\n  &lt;%= f.time_field :time, label: 'Ora:' %&gt;\n  &lt;%= f.submit 'Aggiorna' %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "is_accepted": false, "score": 0, "last_activity_date": 1509472071, "creation_date": 1509472071, "answer_id": 47041608, "question_id": 47040927, "link": "https://stackoverflow.com/questions/47040927/rails-5-nil-error-in-the-first-argument-of-a-form/47041608#47041608", "title": "Rails 5: Nil error in the first argument of a form", "body": "<p>In app > views > observative_sessions I have the index.html.erb with</p>\n\n<pre><code>&lt;div class=\"panel panel-default\" id = \"observative_sessions\"&gt;\n...\n&lt;/div&gt;\n&lt;%= render partial: 'outings/index', locals: {outing: @outing} %&gt;\n</code></pre>\n\n<p>In app > views > outings I put an _index.html.erb</p>\n\n<pre><code>&lt;%= render partial: 'outings/new_modal',locals: {outing: outing} %&gt;\n  &lt;div class=\"panel panel-default\"&gt;\n...\n&lt;tbody&gt;\n  &lt;% @outings.each do |outing| %&gt;\n    ...\n  &lt;% end %&gt;\n&lt;/tbody&gt;\n</code></pre>\n\n<p>The _new_modal.html.erb calls the _form.html.erb</p>\n\n<pre><code>&lt;%= render partial: 'outings/form', locals: {outing: outing} %&gt;\n</code></pre>\n\n<p>Then in your form use the local outing variable:</p>\n\n<pre><code>&lt;%= bootstrap_form_for outing do |f| %&gt;\n  &lt;%= f.date_field :day, label: 'Giorno:' %&gt;\n  &lt;%= f.text_field :location, label: 'Luogo:' %&gt;\n  &lt;%= f.time_field :time, label: 'Ora:' %&gt;\n  &lt;%= f.submit 'Aggiorna' %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 7671529, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dbaf7b528af6b4fc322006a558d44000?s=128&d=identicon&r=PG&f=1", "display_name": "AleA", "link": "https://stackoverflow.com/users/7671529/alea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1509485766, "creation_date": 1509469841, "last_edit_date": 1509485766, "question_id": 47040927, "link": "https://stackoverflow.com/questions/47040927/rails-5-nil-error-in-the-first-argument-of-a-form", "title": "Rails 5: Nil error in the first argument of a form", "body": "<p>I'm quite new with rails so excuse my ignorance. \nI have an homepage with a view of astronomic observations and I want to put in the same page the view of the outings that the observatory organize.\nSince I can't append two views in the same page I tryed to pass the second view as a partial but I get an error</p>\n\n<pre><code>First argument in form cannot contain nil or be empty\n</code></pre>\n\n<p>So I though it was a problem of variables and tryed to pass the local variable of the partial but nothing changed.\nSo how do I pass a variable of @outing to the partial outings/_index.html.erb which will be visualized in the view of observative_sessions </p>\n\n<p>I defined  <code>@outing=Outing.new</code> in outings_controller which is the controller for the view outings</p>\n\n<p>In app > views > observative_sessions I have the index.html.erb with</p>\n\n<pre><code>&lt;div class=\"panel panel-default\" id = \"observative_sessions\"&gt;\n...\n&lt;/div&gt;\n&lt;%= render 'outings/index', :outings =&gt; @outing %&gt;\n</code></pre>\n\n<p>In app > views > outings I put an _index.html.erb</p>\n\n<pre><code>&lt;%= render 'outings/new_modal' %&gt;\n  &lt;div class=\"panel panel-default\"&gt;\n...\n&lt;tbody&gt;\n  &lt;% @outings.each do |outing| %&gt;\n    ...\n  &lt;% end %&gt;\n&lt;/tbody&gt;\n</code></pre>\n\n<p>The _new_modal.html.erb calls the _form.html.erb</p>\n\n<pre><code>&lt;%= render 'outings/form' %&gt;\n</code></pre>\n\n<p>And then the form</p>\n\n<pre><code>&lt;%= bootstrap_form_for @outing do |f| %&gt;\n &lt;%= f.date_field :day, label: 'Giorno:' %&gt;\n &lt;%= f.text_field :location, label: 'Luogo:' %&gt;\n &lt;%= f.time_field :time, label: 'Ora:' %&gt;\n &lt;%= f.submit 'Aggiorna' %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>I get the error in the first line of the form with @outing.\nIf I put the view in a page alone everything work but not with the partial.\nSo what did I do wrong?</p>\n\n<p>Thank you in advance for all the help.</p>\n"}, {"tags": ["ruby", "sinatra", "filepath"], "comments": [{"owner": {"reputation": 382, "user_id": 5063336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57fd0d38dd403b01722df127f7dc6807?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/5063336/tom"}, "edited": false, "score": 1, "creation_date": 1509497354, "post_id": 47040855, "comment_id": 81040499, "body": "Why not just put the PDF file in the filesystem accessible to Sinatra as a static file?  &lt;a href=&quot;/static/pdf/ebook.pdf&quot;&gt; or some such."}, {"owner": {"reputation": 4370, "user_id": 465082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab74528b8223851cd7b546beec220fdc?s=128&d=identicon&r=PG", "display_name": "Kashyap", "link": "https://stackoverflow.com/users/465082/kashyap"}, "edited": false, "score": 0, "creation_date": 1510204700, "post_id": 47040855, "comment_id": 81337771, "body": "It&#39;d help if you can add the error/behaviour you&#39;re seeing when you click on the link."}], "owner": {"reputation": 410, "user_id": 41900, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b81c045c21684b5687044668d0c8da44?s=128&d=identicon&r=PG", "display_name": "RobinReborn", "link": "https://stackoverflow.com/users/41900/robinreborn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1509479427, "creation_date": 1509469632, "last_edit_date": 1509479427, "question_id": 47040855, "link": "https://stackoverflow.com/questions/47040855/cannot-deploy-a-pdf-by-a-link-from-sinatra", "title": "Cannot deploy a pdf by a link from Sinatra", "body": "<p>I'm trying to add a PDF file to a website which uses the Sinatra framework when I add:</p>\n\n<p><code>get \"/test\" do\n    return send_file File.join(File.dirname(__FILE__), \"pdf\",  'ebook.pdf')\nend</code></p>\n\n<p>I can get the ebook by going to /test</p>\n\n<p>However the ebook needs to be linked to via an image, here's an excerpt from my html:</p>\n\n<pre><code>&lt;a href=\"/test\"&gt;&lt;img src=\"/static/images/ebook_image.png\" title=\"Download Ebook\"&gt;&lt;/a&gt;\n</code></pre>\n\n<p>It doesn't work when I click the link, I assume it has something to do with the File.join but I've tried several modifications and can't get it to work.  </p>\n\n<p>EDIT: Somehow it works when I do \"open in new tab\" but not when I click the link directly.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "edited": false, "score": 2, "creation_date": 1509469602, "post_id": 47040820, "comment_id": 81028408, "body": "Code code Code, people want to see the code"}, {"owner": {"reputation": 15486, "user_id": 719547, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/51e61f099c7b1ac0588ecda69193f75c?s=128&d=identicon&r=PG", "display_name": "Jim Stewart", "link": "https://stackoverflow.com/users/719547/jim-stewart"}, "edited": false, "score": 0, "creation_date": 1509469924, "post_id": 47040820, "comment_id": 81028642, "body": "What error are you getting?"}], "answers": [{"tags": [], "owner": {"reputation": 619, "user_id": 4996524, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5b7910ac129ed37a15e32deb4a2c3bd9?s=128&d=identicon&r=PG&f=1", "display_name": "YoTengoUnLCD", "link": "https://stackoverflow.com/users/4996524/yotengounlcd"}, "is_accepted": false, "score": 2, "last_activity_date": 1509469656, "creation_date": 1509469656, "answer_id": 47040859, "question_id": 47040820, "link": "https://stackoverflow.com/questions/47040820/ruby-why-i-cant-define-singlteon-method-on-fixnum-class/47040859#47040859", "title": "Ruby: Why i cant define singlteon method on fixnum class", "body": "<p>It means that whenever you access some Fixnum, such as the number 1, you\u2019re always treating with the same \u201cinstance\u201d, this is mostly an implementation detail which ruby uses to optimize numbers.</p>\n"}, {"tags": [], "owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "is_accepted": false, "score": 2, "last_activity_date": 1509469850, "creation_date": 1509469850, "answer_id": 47040929, "question_id": 47040820, "link": "https://stackoverflow.com/questions/47040820/ruby-why-i-cant-define-singlteon-method-on-fixnum-class/47040929#47040929", "title": "Ruby: Why i cant define singlteon method on fixnum class", "body": "<p>The <code>Integer</code> class is frozen by default:</p>\n\n<pre><code>1.frozen?\n =&gt; true\n</code></pre>\n\n<p>There only ever exists one instance of any Integer object. You don't have to do anything special to enable this. In other words, the optimization you are trying to apply is built into Ruby.</p>\n"}, {"comments": [{"owner": {"reputation": 619, "user_id": 4996524, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5b7910ac129ed37a15e32deb4a2c3bd9?s=128&d=identicon&r=PG&f=1", "display_name": "YoTengoUnLCD", "link": "https://stackoverflow.com/users/4996524/yotengounlcd"}, "edited": false, "score": 1, "creation_date": 1509473543, "post_id": 47041008, "comment_id": 81030936, "body": "There <b>is</b> a technical reason to prevent that, <code>Fixnum</code>s (in MRI) are represented as plain C integers, and not structs like every other object, so they <b>can&#39;t</b> have a singleton class. This of course is just an implementation detail, which made small ints work way faster, but ultimately was decided to remain that way for all ints (<code>Fixnum</code>s and <code>Bignum</code>s which are now unified under the <code>Integer</code> class)."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "reply_to_user": {"reputation": 619, "user_id": 4996524, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5b7910ac129ed37a15e32deb4a2c3bd9?s=128&d=identicon&r=PG&f=1", "display_name": "YoTengoUnLCD", "link": "https://stackoverflow.com/users/4996524/yotengounlcd"}, "edited": false, "score": 0, "creation_date": 1509483135, "post_id": 47041008, "comment_id": 81036007, "body": "True, but my point is that it doesn&#39;t <i>need</i> to be that way. The language could have been defined/implemented differently without any internal inconsistency. I think this decision was made to be more in line with other OO languages and for efficiency as you point out."}], "tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": false, "score": 3, "last_activity_date": 1509470584, "last_edit_date": 1509470584, "creation_date": 1509470091, "answer_id": 47041008, "question_id": 47040820, "link": "https://stackoverflow.com/questions/47040820/ruby-why-i-cant-define-singlteon-method-on-fixnum-class/47041008#47041008", "title": "Ruby: Why i cant define singlteon method on fixnum class", "body": "<blockquote>\n  <p>I want to define singleton method to every integer value (object)</p>\n</blockquote>\n\n<p>This is contradictory. The singleton class is for when you want something to apply to a <strong>single</strong> object. You want to define something for <em>every</em> integer object, so the singleton class is not an appropriate tool. Just use the normal class</p>\n\n<pre><code>class Integer\n  def foobar\n    \"hey\"\n  end\nend\n\n3.foobar\n# \"hey\"\n</code></pre>\n\n<p>If you could modify the singleton class of 3, then there would be some behaviors that only apply to the number 3 and no other number. There is no technical reason to prevent that, but trust me that it's a good thing that you can't.</p>\n\n<blockquote>\n  <p>There is effectively only one Fixnum object instance for any given integer value</p>\n</blockquote>\n\n<p>This is talking about something else. Notice the difference:</p>\n\n<pre><code>x = []\ny = []\nx == y                     # true\nx.object_id == y.object_id # false!\n\nx = 3\ny = 3\nx == y                     # true\nx.object_id == y.object_id # true!\nx.object_id == 5.object_id # false\n</code></pre>\n\n<p>Unlike most other objects, equal fixnums are identical objects. 3 and 5 are two different instances of Fixnum, but it is impossible to have two different instances of Fixnum that are both 3. Every 3 is the same. Again, this is not a technical necessity but more of a convenience for how most programmers think about numerical data.</p>\n"}], "owner": {"reputation": 831, "user_id": 2274074, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/ba7786aa3605017e6a85f45dd0e26835?s=128&d=identicon&r=PG", "display_name": "user2274074", "link": "https://stackoverflow.com/users/2274074/user2274074"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1509472400, "creation_date": 1509469510, "last_edit_date": 1509470734, "question_id": 47040820, "link": "https://stackoverflow.com/questions/47040820/ruby-why-i-cant-define-singlteon-method-on-fixnum-class", "title": "Ruby: Why i cant define singlteon method on fixnum class", "body": "<p>I want to define singleton method to every integer value (object) . but i am getting error while applying singleton method.</p>\n\n<p>RubyDoc says <code>There is effectively only one Fixnum object instance for any given integer value</code> . what does this mean ?? how it is different from other normal classes??  i am not able to interpret this line. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 454, "user_id": 7350753, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TqdKq.png?s=128&g=1", "display_name": "Franklin Antony", "link": "https://stackoverflow.com/users/7350753/franklin-antony"}, "edited": false, "score": 0, "creation_date": 1509476565, "post_id": 47040744, "comment_id": 81032650, "body": "`correct the sql query"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 8569812, "user_type": "registered", "profile_image": "https://graph.facebook.com/1561887163867601/picture?type=large", "display_name": "Gustavo Rey", "link": "https://stackoverflow.com/users/8569812/gustavo-rey"}, "edited": false, "score": 0, "creation_date": 1509472776, "post_id": 47041497, "comment_id": 81030489, "body": "Thanks your help! But, I need to make a Left Join,  because I need to show all the ideas, and when I change to &quot;left_joins&quot; appears to me the message &quot;undefined method&quot;"}, {"owner": {"reputation": 644, "user_id": 2727026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97d1d9347d677e2790bf7c7021b000d5?s=128&d=identicon&r=PG", "display_name": "charlesdg", "link": "https://stackoverflow.com/users/2727026/charlesdg"}, "reply_to_user": {"reputation": 57, "user_id": 8569812, "user_type": "registered", "profile_image": "https://graph.facebook.com/1561887163867601/picture?type=large", "display_name": "Gustavo Rey", "link": "https://stackoverflow.com/users/8569812/gustavo-rey"}, "edited": false, "score": 0, "creation_date": 1509472963, "post_id": 47041497, "comment_id": 81030586, "body": "sorry I give to you an inner join. I&#39;m updating my response now."}, {"owner": {"reputation": 644, "user_id": 2727026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97d1d9347d677e2790bf7c7021b000d5?s=128&d=identicon&r=PG", "display_name": "charlesdg", "link": "https://stackoverflow.com/users/2727026/charlesdg"}, "reply_to_user": {"reputation": 57, "user_id": 8569812, "user_type": "registered", "profile_image": "https://graph.facebook.com/1561887163867601/picture?type=large", "display_name": "Gustavo Rey", "link": "https://stackoverflow.com/users/8569812/gustavo-rey"}, "edited": false, "score": 0, "creation_date": 1509472998, "post_id": 47041497, "comment_id": 81030612, "body": "doc on active record join here: <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-joins\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActiveRecord/&hellip;</a>"}], "tags": [], "owner": {"reputation": 644, "user_id": 2727026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97d1d9347d677e2790bf7c7021b000d5?s=128&d=identicon&r=PG", "display_name": "charlesdg", "link": "https://stackoverflow.com/users/2727026/charlesdg"}, "is_accepted": true, "score": 1, "last_activity_date": 1509473053, "last_edit_date": 1509473053, "creation_date": 1509471763, "answer_id": 47041497, "question_id": 47040744, "link": "https://stackoverflow.com/questions/47040744/query-ruby-on-rails/47041497#47041497", "title": "Query - Ruby on Rails", "body": "<p>Your SQL query looks strange. If your sql query is:</p>\n\n<pre><code>SELECT i.*, count(v.id) AS numero_votos \nFROM ideas i \nLEFT JOIN votes v ON v.idea_id = i.id \nGROUP BY i.id \nORDER BY numero_votos DESC, i.created_at\n</code></pre>\n\n<p>Then, you should try something as:</p>\n\n<pre><code>Idea.select(\"ideas.*, count(votes.id) AS numero_votos \")\n    .joins(\"LEFT JOIN votes ON votes.idea_id = ideas.id\")\n    .group(\"ideas.id\")\n    .order(\"numero_votos DESC\")\n    .order(\"ideas.created_at\")\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 8569812, "user_type": "registered", "profile_image": "https://graph.facebook.com/1561887163867601/picture?type=large", "display_name": "Gustavo Rey", "link": "https://stackoverflow.com/users/8569812/gustavo-rey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 47041497, "answer_count": 1, "score": -2, "last_activity_date": 1509473053, "creation_date": 1509469283, "last_edit_date": 1509470201, "question_id": 47040744, "link": "https://stackoverflow.com/questions/47040744/query-ruby-on-rails", "title": "Query - Ruby on Rails", "body": "<p>I don't have knowledge of Rails</p>\n\n<p>Please, how do I make this query in Rails?</p>\n\n<pre><code>SELECT *, count(v.id) numero_votos FROM ideas i left join votes v on v.idea_id = i.id group by i.id order by numero_votos desc, i.created_at\n</code></pre>\n\n<p>I tried this...</p>\n\n<pre><code>@listOfIdeas = Idea.find(:all, joins: \"LEFT JOIN 'votes' on votes.idea_id = ideas.id\",\n                                    select: \"ideas.*, count(votes.id) numero_de_votos\",\n                                    group: \"ideas.id\",\n                                    order: \"numero_de_votos DESC, ideas.created_at DESC\")\n</code></pre>\n\n<p>But, didn't work, it's showing me this message:</p>\n\n<blockquote>\n  <p>Couldn't find all Ideas with 'id': (all, {:joins=>\"LEFT JOIN 'votes' on votes.idea_id = ideas.id\", :select=>\"ideas.*, count(votes.id) numero_de_votos\", :group=>\"ideas.id\", :order=>\"numero_de_votos DESC, ideas.created_at DESC\"}) (found 0 results, but was looking for 2)</p>\n</blockquote>\n\n<p>Rails version: 5.1.4</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "activerecord", "sinatra", "sinatra-activerecord"], "comments": [{"owner": {"reputation": 214, "user_id": 2125379, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/677dbb945adcd4fc00d8a51a083c7c06?s=128&d=identicon&r=PG", "display_name": "Brandon Sturgeon", "link": "https://stackoverflow.com/users/2125379/brandon-sturgeon"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1509472885, "post_id": 47040424, "comment_id": 81030548, "body": "Hey!! It&#39;s that simple, thank you. If you make an answer I&#39;d be happy to accept it."}], "answers": [{"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 1, "last_activity_date": 1509476168, "creation_date": 1509476168, "answer_id": 47042733, "question_id": 47040424, "link": "https://stackoverflow.com/questions/47040424/rails-using-a-belongs-to-and-has-one-association-to-the-same-class/47042733#47042733", "title": "Rails, using a belongs_to and has_one association to the same class", "body": "<p><code>interactions</code> table just needs a <code>victim_id</code> column and then change the <code>has_one</code> to <code>belongs_to :victim, class_name: Player</code>.</p>\n\n<p>This will work since an <code>Interaction</code> is basically a join table of <code>Player</code> to <code>Player</code>. </p>\n\n<p><code>has_one</code> implies that the victim (<code>Player</code> in this case) would have a <code>interaction_id</code> which is incorrect. </p>\n\n<p>Instead an <code>Interaction</code> belongs to the killer and the victim. </p>\n\n<p>Setup as: </p>\n\n<pre><code>class Player\n  has_many :kills, class_name: Interaction, foreign_key: :player_id inverse_of: :killer\n  has_many :deaths, class_name: Interaction, foreign_key: :victim_id, inverse_of: :victim \nend\n\nclass Interaction\n  belongs_to :killer, class_name: Player, foreign_key: :player_id, inverse_of: :kills\n  belongs_to :victim, class_name: Player, foreign_key: :victim_id, inverse_of :deaths\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1509663983, "post_id": 47058591, "comment_id": 81121555, "body": "Change <code>Interaction</code> to <code>Kill</code> or this makes no sense and also my &quot;fluff&quot;is functionality right now based on this a <code>Player</code> kind of has kills but does not have deathes"}, {"owner": {"reputation": 214, "user_id": 2125379, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/677dbb945adcd4fc00d8a51a083c7c06?s=128&d=identicon&r=PG", "display_name": "Brandon Sturgeon", "link": "https://stackoverflow.com/users/2125379/brandon-sturgeon"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1509679496, "post_id": 47058591, "comment_id": 81125593, "body": "@engineersmnky Thank you for pointing that out! I fixed it. The reason I say there&#39;s some fluff, is because a death isn&#39;t necessarily the inverse of a kill. Players can die in other ways. I wanted to make sure there was a clear, barebones answer to the question. Thank you for the help!"}], "tags": [], "owner": {"reputation": 214, "user_id": 2125379, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/677dbb945adcd4fc00d8a51a083c7c06?s=128&d=identicon&r=PG", "display_name": "Brandon Sturgeon", "link": "https://stackoverflow.com/users/2125379/brandon-sturgeon"}, "is_accepted": false, "score": 0, "last_activity_date": 1509724788, "last_edit_date": 1509724788, "creation_date": 1509551006, "answer_id": 47058591, "question_id": 47040424, "link": "https://stackoverflow.com/questions/47040424/rails-using-a-belongs-to-and-has-one-association-to-the-same-class/47058591#47058591", "title": "Rails, using a belongs_to and has_one association to the same class", "body": "<p>engineersmnky gave me a great answer which helped me solve the problem, but it has a little more fluff. Here's the exact solution I used to solve my problem:</p>\n\n<pre><code># ./models/player.rb\nclass Player &lt; ActiveRecord::Base\n  has_many :interactions\nend\n\n# ./models/interaction.rb\nclass Interaction &lt; ActiveRecord::Base\n  belongs_to :player\n  belongs_to :victim, class_name: 'Player', foreign_key: 'victim_id'\nend\n\n# ./db/migrate/migrate/create_players.rb\nclass CreatePlayersAndInteractions &lt; ActiveRecord::Migration[5.0]\n  def change\n    create_table :interactions do |t|\n      t.integer :victim_id\n      t.belongs_to :player, index: true\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 214, "user_id": 2125379, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/677dbb945adcd4fc00d8a51a083c7c06?s=128&d=identicon&r=PG", "display_name": "Brandon Sturgeon", "link": "https://stackoverflow.com/users/2125379/brandon-sturgeon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 464, "favorite_count": 0, "accepted_answer_id": 47042733, "answer_count": 2, "score": 1, "last_activity_date": 1509724788, "creation_date": 1509468248, "question_id": 47040424, "link": "https://stackoverflow.com/questions/47040424/rails-using-a-belongs-to-and-has-one-association-to-the-same-class", "title": "Rails, using a belongs_to and has_one association to the same class", "body": "<p>Here's a picture I made which visually describes the relationship I'm seeking: <a href=\"https://i.stack.imgur.com/BQKKs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BQKKs.png\" alt=\"enter image description here\"></a></p>\n\n<p>In the picture I say <code>Interaction</code>, but more specifically these interactions are in-game Kills. A kill, as we all know, has the killer, and the victim. In this case our killer will be called <code>player</code>, and our victim will be called <code>victim</code>.</p>\n\n<p>Given this picture, here are some example queries I'd like to perform:</p>\n\n<pre><code>Player.find(1).Interactions\n&gt; [&lt;#Interaction id: 1&gt;, &lt;#Interaction id: 2&gt;, &lt;#Interaction id: 3&gt;]\n\nInteractions.where(player: Player.find(1))\n&gt; [&lt;#Interaction id: 1&gt;, &lt;#Interaction id: 2&gt;, &lt;#Interaction id: 3&gt;]\n\nInteractions.where(victim: Player.find(1))\n&gt; [&lt;#Interaction id: 4&gt;]\n\nPlayer.find(1).Interactions.where(victim: Player.find(2))\n&gt; [&lt;#Interaction id: 2&gt;]\n\nPlayer.find(1).Interactions.count()\n&gt; 3\n\n# Player.find(1).Interactions should (ideally) return Interactions where &lt;#Player id: 1&gt; is the player (not victim)\n\nInteractions.all.count()\n&gt; 4\n\nPlayer.all.count()\n&gt; 4\n\nPlayer.find(2).Interactions\n&gt; []\n\nPlayer.find(3).Interactions\n&gt; [ &lt;#Interaction id: 4&gt; ]\n\nPlayer.find(4).Interactions\n&gt; []\n</code></pre>\n\n<p>I've tried a lot of different associations (I've been digging through google and Stack Overflow results for hours)</p>\n\n<p>This is how I think my <code>Interaction</code> model should look:</p>\n\n<pre><code>class Interaction &lt; ActiveRecord::Base\n  belongs_to :player\n  has_one :victim, :class_name =&gt; 'Player'\nend\n</code></pre>\n\n<p>And my <code>Player</code> model:</p>\n\n<pre><code>class Player &lt; ActiveRecord::Base\n  has_man :kills\nend\n</code></pre>\n\n<p>And finally, how I think the migration should look:</p>\n\n<pre><code>class CreatePlayerAndInteraction &lt; ActiveRecord::Migration[5.0]\n  def change\n    create_table :players do |t|\n      t.string :steam_id\n    end\n\n    create_table :interactions do |t|\n      t.string :weapon\n      t.belongs_to :player, index: true\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby", "selenium"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1509470258, "post_id": 47040301, "comment_id": 81028866, "body": "There is a method called <code>location_once_scrolled_into_view</code> as mentioned <a href=\"https://stackoverflow.com/questions/23160999/how-to-scroll-down-to-bottom-using-selenium-in-ruby\" title=\"how to scroll down to bottom using selenium in ruby\">stackoverflow.com/questions/23160999/&hellip;</a> , <a href=\"https://stackoverflow.com/questions/7327858/how-to-scroll-with-selenium\" title=\"how to scroll with selenium\">stackoverflow.com/questions/7327858/how-to-scroll-with-selen&zwnj;&#8203;ium</a> , <a href=\"https://github.com/SeleniumHQ/selenium/wiki/Ruby-Bindings\" rel=\"nofollow noreferrer\">github.com/SeleniumHQ/selenium/wiki/Ruby-Bindings</a>"}, {"owner": {"reputation": 18005, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1509495581, "post_id": 47040301, "comment_id": 81040076, "body": "See: <a href=\"https://meta.stackoverflow.com/questions/253069/whats-the-appropriate-new-current-close-reason-for-how-do-i-do-x\">How do I do X?</a> The expectation on SO is that the user asking a question not only does research to answer their own question but also shares that research, code attempts, and results. This demonstrates that you\u2019ve taken the time to try to help yourself, it saves us from reiterating obvious answers, and most of all it helps you get a more specific and relevant answer! See also: <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3015, "user_id": 1518336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/238d1c14366d5d0dd398b088c99f7b4c?s=128&d=identicon&r=PG", "display_name": "Daniel Westendorf", "link": "https://stackoverflow.com/users/1518336/daniel-westendorf"}, "is_accepted": true, "score": 10, "last_activity_date": 1509475910, "creation_date": 1509475910, "answer_id": 47042658, "question_id": 47040301, "link": "https://stackoverflow.com/questions/47040301/how-can-i-scroll-to-the-bottom-using-selenium-ruby/47042658#47042658", "title": "How can I scroll to the bottom using Selenium Ruby?", "body": "<p>Executing the script</p>\n\n<pre><code>driver.execute_script(\"window.scrollTo(0, document.body.scrollHeight)\")\n</code></pre>\n\n<p>will scroll the window to the bottom of the page.</p>\n"}], "owner": {"reputation": 485, "user_id": 8798283, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0522bfc3b8fd78d05a7d4e1bbee5188e?s=128&d=identicon&r=PG&f=1", "display_name": "Jas", "link": "https://stackoverflow.com/users/8798283/jas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2928, "favorite_count": 1, "closed_date": 1509522832, "accepted_answer_id": 47042658, "answer_count": 1, "score": 1, "last_activity_date": 1509475910, "creation_date": 1509467797, "question_id": 47040301, "link": "https://stackoverflow.com/questions/47040301/how-can-i-scroll-to-the-bottom-using-selenium-ruby", "closed_reason": "Needs more focus", "title": "How can I scroll to the bottom using Selenium Ruby?", "body": "<p>I have a test where I'd like to scroll to the end of the page, in order to assert something.<br>\nHow can I implement this using selenium and ruby? Is there something I can add to this \"particular\" test where I can scroll to the bottom? </p>\n"}, {"tags": ["ruby", "httprequest", "office365", "office365api"], "comments": [{"owner": {"reputation": 27872, "user_id": 105518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1e47ca9372faad8084cbaf9f90c6a75?s=128&d=identicon&r=PG", "display_name": "Marc LaFleur", "link": "https://stackoverflow.com/users/105518/marc-lafleur"}, "edited": false, "score": 1, "creation_date": 1509467032, "post_id": 47040040, "comment_id": 81026789, "body": "Welcome to Stack Overflow! Since you are new user, I recommend you read <a href=\"https://stackoverflow.com/help/how-to-ask\">&quot;How to Ask a Good Question&quot;</a>. Asking question properly will help you get better answers and help others be able to understand your question if they have a similar problem."}, {"owner": {"reputation": 5463, "user_id": 4092015, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jskhe.jpg?s=128&g=1", "display_name": "Dan Kershaw - MSFT", "link": "https://stackoverflow.com/users/4092015/dan-kershaw-msft"}, "edited": false, "score": 0, "creation_date": 1509648413, "post_id": 47040040, "comment_id": 81114353, "body": "While we would like to (and maybe some day will) have this API/data set as part of Microsoft Graph, this is NOT part of Microsoft Graph. Looking to see if there is a different tag for you."}], "owner": {"reputation": 1, "user_id": 8863537, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7C-seb2x2hA/AAAAAAAAAAI/AAAAAAAAGPE/7EJQnvBUvsM/photo.jpg?sz=128", "display_name": "Yoly Meneses", "link": "https://stackoverflow.com/users/8863537/yoly-meneses"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1509648487, "creation_date": 1509466850, "last_edit_date": 1509648487, "question_id": 47040040, "link": "https://stackoverflow.com/questions/47040040/how-can-i-generate-events-for-context-audit-general-and-dlp-all-using-apis", "title": "How can I generate events for Context Audit.General and DLP.All using apis?", "body": "<p>How can I generate events for Context Audit? General and DLP. All using apis?</p>\n\n<p>Basically, I'm interested in generating those type of events using the API.</p>\n\n<p>Right now I\u2019m getting the information of the content types using an API as it is shown on this page <a href=\"https://msdn.microsoft.com/office-365/office-365-management-activity-api-reference#start-a-subscription\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/office-365/office-365-management-activity-api-reference#start-a-subscription</a> and my objective is to be able to generate events that trigger logs/events for Audit.General and DLP.All.</p>\n\n<p>For example: for generating logs/events for contentType=Audit.AzureActiveDirectory I only had to create a new user through Microsoft graph API <a href=\"https://developer.microsoft.com/en-us/graph/docs/api-reference/v1.0/api/user_post_users\" rel=\"nofollow noreferrer\">https://developer.microsoft.com/en-us/graph/docs/api-reference/v1.0/api/user_post_users</a> and it was all, in that way I triggered events/information and I can query using request mentioned here <a href=\"https://msdn.microsoft.com/office-365/office-365-management-activity-api-reference#start-a-subscription\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/office-365/office-365-management-activity-api-reference#start-a-subscription</a>.</p>\n\n<p>Basically, that is I want to do for Audit.General and DLP. All but I have not found a way to trigger those events.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 1, "creation_date": 1509466090, "post_id": 47039746, "comment_id": 81026232, "body": "aka <a href=\"https://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Literals#The_.25_Notation\" rel=\"nofollow noreferrer\">the % notation</a>"}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1509467866, "post_id": 47039746, "comment_id": 81027312, "body": "This is correct. I don&#39;t recommend using <code>%I</code> however."}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "reply_to_user": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 4, "creation_date": 1564331278, "post_id": 47039746, "comment_id": 100986545, "body": "@MarkThomas Why don&#39;t you recommend <code>%I</code> would you elaborate?"}, {"owner": {"reputation": 36888, "user_id": 293280, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6e6e22d81a1f4f394f62301be40c2e20?s=128&d=identicon&r=PG", "display_name": "Joshua Pinter", "link": "https://stackoverflow.com/users/293280/joshua-pinter"}, "reply_to_user": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1604596088, "post_id": 47039746, "comment_id": 114401488, "body": "@ArupRakshit My guess is that it&#39;s ugly and can be much less clear than using a more obvious String interpolation."}], "tags": [], "owner": {"reputation": 3593, "user_id": 613256, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JuDL2.jpg?s=128&g=1", "display_name": "Stanislav Mekhonoshin", "link": "https://stackoverflow.com/users/613256/stanislav-mekhonoshin"}, "is_accepted": true, "score": 100, "last_activity_date": 1558884041, "last_edit_date": 1558884041, "creation_date": 1509465837, "answer_id": 47039746, "question_id": 47039716, "link": "https://stackoverflow.com/questions/47039716/what-does-i-or-i-do-in-ruby/47039746#47039746", "title": "What does %i or %I do in ruby?", "body": "<pre><code>%i[ ] # Non-interpolated Array of symbols, separated by whitespace\n%I[ ] # Interpolated Array of symbols, separated by whitespace\n</code></pre>\n\n<p>The second link from my search results <a href=\"http://ruby.zigzo.com/2014/08/21/rubys-notation/\" rel=\"noreferrer\">http://ruby.zigzo.com/2014/08/21/rubys-notation/</a></p>\n\n<p>Examples in IRB:</p>\n\n<pre><code>%i[ test ]\n# =&gt; [:test]\nstr = \"other\"\n%I[ test_#{str} ]\n# =&gt; [:test_other] \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1125, "user_id": 1357375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48962bedad55cfb49df3d52521a913d5?s=128&d=identicon&r=PG", "display_name": "Vishal Kanaujia", "link": "https://stackoverflow.com/users/1357375/vishal-kanaujia"}, "edited": false, "score": 1, "creation_date": 1556622037, "post_id": 47039876, "comment_id": 98492804, "body": "This answers the question more clearly. The usage of &quot;%I&quot; is just to create hash keys from an array of strings, separated by whitespaces. Thanks a lot for your answer."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 1125, "user_id": 1357375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48962bedad55cfb49df3d52521a913d5?s=128&d=identicon&r=PG", "display_name": "Vishal Kanaujia", "link": "https://stackoverflow.com/users/1357375/vishal-kanaujia"}, "edited": false, "score": 2, "creation_date": 1556639645, "post_id": 47039876, "comment_id": 98502943, "body": "@VishalKanaujia While symbols are often used as hash keys, that&#39;s not their only purpose. In Ruby a hash key can be literally anything, and symbols can be used in many other circumstances."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 12, "last_activity_date": 1509466256, "creation_date": 1509466256, "answer_id": 47039876, "question_id": 47039716, "link": "https://stackoverflow.com/questions/47039716/what-does-i-or-i-do-in-ruby/47039876#47039876", "title": "What does %i or %I do in ruby?", "body": "<p>It's like <code>%w</code> and <code>%W</code> which work similar to <code>'</code> and <code>\"</code>:</p>\n\n<pre><code>x = :test\n\n# %w won't interpolate #{...} style strings, leaving as literal\n%w[ #{x} x ]\n# =&gt; [\"\\#{x}\", \"x\"]\n\n# %w will interpolate #{...} style strings, converting to string\n%W[ #{x} x ]\n# =&gt; [ \"test\", \"x\"]\n</code></pre>\n\n<p>Now the same thing with <code>%i</code> and <code>%I</code>:</p>\n\n<pre><code># %i won't interpolate #{...} style strings, leaving as literal, symbolized\n%i[ #{x} x ]\n# =&gt; [:\"\\#{x}\", :x ]\n\n# %w will interpolate #{...} style strings, converting to symbols\n%I[ #{x} x ]\n# =&gt; [ :test, :x ]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2310, "user_id": 768772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fSj7z.jpg?s=128&g=1", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/768772/dmitri"}, "edited": false, "score": 4, "creation_date": 1561583679, "post_id": 50458651, "comment_id": 100116944, "body": "just FYI, the <a href=\"https://www.rubydoc.info/gems/rubocop/RuboCop/Cop/Style/PercentLiteralDelimiters\" rel=\"nofollow noreferrer\">Ruby Style Guide</a> calls for square brackets."}], "tags": [], "owner": {"reputation": 2832, "user_id": 451893, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/0dba10774351090583ce306ef0ca805b?s=128&d=identicon&r=PG", "display_name": "Les Nightingill", "link": "https://stackoverflow.com/users/451893/les-nightingill"}, "is_accepted": false, "score": 19, "last_activity_date": 1526953407, "creation_date": 1526953407, "answer_id": 50458651, "question_id": 47039716, "link": "https://stackoverflow.com/questions/47039716/what-does-i-or-i-do-in-ruby/50458651#50458651", "title": "What does %i or %I do in ruby?", "body": "<p>It can be hard to find the official Ruby documentation (<a href=\"https://ruby-doc.org/\" rel=\"noreferrer\" title=\"it&#39;s here\">it's here</a>). At the time of writing the current version is 2.5.1, and the documentation for the %i construct is found in the documentation for <a href=\"https://ruby-doc.org/core-2.5.1/doc/syntax/literals_rdoc.html\" rel=\"noreferrer\">Ruby's literals.</a></p>\n\n<p>There are some surprising (to me at least!) variants of Ruby's % construct. There are the often used <code>%i %q %r %s %w %x</code> forms, each with an uppercase version to enable interpolation. (see the <a href=\"https://ruby-doc.org/core-2.5.1/doc/syntax/literals_rdoc.html\" rel=\"noreferrer\">Ruby literals docs</a> for explanations.</p>\n\n<p>But you can use many types of delimiters, not just <code>[]</code>. You can use any kind of bracket <code>() {} [] &lt;&gt;</code>, <em>and</em> you can use (quoting from the ruby docs) \"most other non-alphanumeric characters for percent string delimiters such as \u201c%\u201d, \u201c|\u201d, \u201c^\u201d, etc.\"</p>\n\n<p>So <code>%i% bish bash bosh %</code> works the same as <code>%i[bish bash bosh]</code></p>\n"}], "owner": {"reputation": 4855, "user_id": 3618156, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b3e1907a7f15ed006abc8ad406cf40fe?s=128&d=identicon&r=PG&f=1", "display_name": "american-ninja-warrior", "link": "https://stackoverflow.com/users/3618156/american-ninja-warrior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32696, "favorite_count": 6, "accepted_answer_id": 47039746, "answer_count": 3, "score": 67, "last_activity_date": 1596929808, "creation_date": 1509465760, "last_edit_date": 1596929808, "question_id": 47039716, "link": "https://stackoverflow.com/questions/47039716/what-does-i-or-i-do-in-ruby", "title": "What does %i or %I do in ruby?", "body": "<p>Whats the meaning of %i or %I in ruby?</p>\n\n<p>I searched google for </p>\n\n<pre><code>\"%i or %I\" ruby\n</code></pre>\n\n<p>but didn't find anything relevant to ruby.</p>\n"}, {"tags": ["arrays", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 4, "creation_date": 1509463722, "post_id": 47038935, "comment_id": 81024599, "body": "No, that&#39;s not array of arrays. That&#39;s array of strings, where strings contain what appears to be yaml code"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1509464272, "post_id": 47038935, "comment_id": 81024996, "body": "A weird mix of YAML and JSON? Or is <code>[]</code> valid YAML, without the leading <code>---</code>?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1509465293, "post_id": 47038935, "comment_id": 81025682, "body": "@meagar: yes, <a href=\"http://yaml-online-parser.appspot.com/?yaml=%5B%22https%3A%2F%2Fsomewebsite1.com%22%5D&amp;type=json\" rel=\"nofollow noreferrer\">it appears to be valid yaml</a>"}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1509465828, "post_id": 47039545, "comment_id": 81026047, "body": "Much gsub, so string manipulation, wow. :) Why not use output of <code>YAML.parse</code> instead? Or, better, <code>YAML.load</code>?"}, {"owner": {"reputation": 3593, "user_id": 613256, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JuDL2.jpg?s=128&g=1", "display_name": "Stanislav Mekhonoshin", "link": "https://stackoverflow.com/users/613256/stanislav-mekhonoshin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1509465894, "post_id": 47039545, "comment_id": 81026086, "body": "It&#39;s fast and dirty solution. Yeah, working with deserialized YAML would be much better."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1509466532, "post_id": 47039545, "comment_id": 81026511, "body": "Just use <code>YAML.load</code>, it&#39;ll simplify code <i>substantially</i>. <code>my_array.compact.map(&amp;YAML.method(:load)).reject(&amp;:empty?).f&zwnj;&#8203;latten</code>"}], "tags": [], "owner": {"reputation": 3593, "user_id": 613256, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JuDL2.jpg?s=128&g=1", "display_name": "Stanislav Mekhonoshin", "link": "https://stackoverflow.com/users/613256/stanislav-mekhonoshin"}, "is_accepted": true, "score": 3, "last_activity_date": 1509466363, "last_edit_date": 1509466363, "creation_date": 1509465229, "answer_id": 47039545, "question_id": 47038935, "link": "https://stackoverflow.com/questions/47038935/ruby-remove-empty-nil-arrays-strings-from-array-of-strings/47039545#47039545", "title": "Ruby remove empty, nil arrays strings from array of strings", "body": "<p>First of all, it is a simple array of strings.</p>\n\n<p>You can remove nil elements using <code>array.compact</code> or <code>array.reject(&amp;:nil?)</code></p>\n\n<p>And to remove empty yaml entries you can use deserialization</p>\n\n<p><code>array.compact\n  .reject { |i| YAML.parse(i).children.first.children.empty? }\n  .map { |i| i.gsub('[\"', '').gsub('\"]', '').gsub(\"---\\n- \", '').strip }</code></p>\n\n<p>So the output would be you stated.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>Another approach, without string manipulation</p>\n\n<pre><code>res = a.compact\ndeserialized = res.map { |i| YAML.parse(i) }\nres = deserialized.reject { |i| i.children.first.children.empty? }\nres.map { |i| i.children.first.children.first.value }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1509466135, "post_id": 47039811, "comment_id": 81026261, "body": "Have you tried your first snippet? It&#39;s not working."}, {"owner": {"reputation": 1401, "user_id": 642716, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f0267ad4081b2cc7686b088dab53aefd?s=128&d=identicon&r=PG", "display_name": "Mark Tabler", "link": "https://stackoverflow.com/users/642716/mark-tabler"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1509467105, "post_id": 47039811, "comment_id": 81026837, "body": "My bad - I <i>had</i> tried it, but with too simple a test case; the bug didn&#39;t show up.  I&#39;ve edited in a fix.  Good catch, and many thanks!"}], "tags": [], "owner": {"reputation": 1401, "user_id": 642716, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f0267ad4081b2cc7686b088dab53aefd?s=128&d=identicon&r=PG", "display_name": "Mark Tabler", "link": "https://stackoverflow.com/users/642716/mark-tabler"}, "is_accepted": false, "score": 1, "last_activity_date": 1509467046, "last_edit_date": 1509467046, "creation_date": 1509466034, "answer_id": 47039811, "question_id": 47038935, "link": "https://stackoverflow.com/questions/47038935/ruby-remove-empty-nil-arrays-strings-from-array-of-strings/47039811#47039811", "title": "Ruby remove empty, nil arrays strings from array of strings", "body": "<p>To just remove nil elements, you can use the <code>compact</code> method on an array.\nTo remove both nil and empty strings, you can use the <code>select</code> method:</p>\n\n<pre><code>my_array.select! { |element| element&amp;.size.to_i &gt; 0 }\n</code></pre>\n\n<p>To process the remaining strings, you'll need to iterate over each string and figure out whether it needs YAML parsing or not. The method you'll use to collect the results of that iteration is <code>map</code>:</p>\n\n<pre><code>my_array.map! { |element| clever_string_parsing_on(element) }\n</code></pre>\n"}], "owner": {"reputation": 1705, "user_id": 1060070, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/30fc2666127827c20a1bef8802c5e755?s=128&d=identicon&r=PG", "display_name": "mamesaye", "link": "https://stackoverflow.com/users/1060070/mamesaye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3178, "favorite_count": 0, "accepted_answer_id": 47039545, "answer_count": 2, "score": 0, "last_activity_date": 1509470341, "creation_date": 1509463411, "last_edit_date": 1509470341, "question_id": 47038935, "link": "https://stackoverflow.com/questions/47038935/ruby-remove-empty-nil-arrays-strings-from-array-of-strings", "title": "Ruby remove empty, nil arrays strings from array of strings", "body": "<p>I have this array of arrays:   </p>\n\n<pre><code>[\"[]\", \"[\\\"https://somewebsite1.com\\\"]\", \"[\\\"https://somewebsite2.com\\\"]\", \"[]\", \"[]\", \"[]\", \"---\\n- https://somewebsite3.com\\n\", \"--- []\\n\", \"---\\n- https://somewebsite4.com\\n\", \"--- []\\n\", \"--- []\\n\", \"---\\n- https://somewebsite.com\\n\", \"---\\n- https://somewebsite5.com\\n\", nil, nil, nil, nil, nil]      \n</code></pre>\n\n<p>How can I:<br>\n1- remove all the empty, nil element<br>\n2- have an array of string:   </p>\n\n<pre><code>[\"https://somewebsite1.com\", \"https://somewebsite2.com\", \"https://somewebsite3.com\", \"https://somewebsite4.com\", \"https://somewebsite.com\", \"https://somewebsite5.com\"]\n</code></pre>\n\n<p><code>array.select &amp;:present?</code> remove <code>nil</code><br>\nthen <code>array.delete_if {|i| i == '[]'}</code> remove <code>[]</code><br>\nso I am left with :   </p>\n\n<pre><code>[\"[\\\"https://somewebsite1.com\\\"]\", \"[\\\"https://somewebsite2.com\\\"]\",  \"---\\n- https://somewebsite3.com\\n\", \"--- []\\n\", \"---\\n- https://somewebsite4.com\\n\", \"--- []\\n\", \"--- []\\n\", \"---\\n- https://somewebsite.com\\n\", \"---\\n- https://somewebsite5.com\\n\"]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubymine", "rails-i18n"], "comments": [{"owner": {"reputation": 4243, "user_id": 4638378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pGqPN.png?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/4638378/brian"}, "edited": false, "score": 1, "creation_date": 1509461700, "post_id": 47038279, "comment_id": 81023198, "body": "Why is your file called <code>ry.yml</code> in the screenshot?"}, {"owner": {"reputation": 115, "user_id": 2728125, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0f1602153f3fc861303681b48a6ae357?s=128&d=identicon&r=PG&f=1", "display_name": "Alex85", "link": "https://stackoverflow.com/users/2728125/alex85"}, "reply_to_user": {"reputation": 4243, "user_id": 4638378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pGqPN.png?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/4638378/brian"}, "edited": false, "score": 0, "creation_date": 1509462258, "post_id": 47038279, "comment_id": 81023563, "body": "I just made typo"}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 2728125, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0f1602153f3fc861303681b48a6ae357?s=128&d=identicon&r=PG&f=1", "display_name": "Alex85", "link": "https://stackoverflow.com/users/2728125/alex85"}, "edited": false, "score": 0, "creation_date": 1509462148, "post_id": 47038383, "comment_id": 81023510, "body": "Jared, ry. just typo. Could you please clarify what  does &quot;root&quot; mean? Is the locales files should have strong structure?"}, {"owner": {"reputation": 115, "user_id": 2728125, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0f1602153f3fc861303681b48a6ae357?s=128&d=identicon&r=PG&f=1", "display_name": "Alex85", "link": "https://stackoverflow.com/users/2728125/alex85"}, "edited": false, "score": 0, "creation_date": 1509462529, "post_id": 47038383, "comment_id": 81023771, "body": "OMG! This text in the file &#39;space&#39; sensitive. It is my fault."}, {"owner": {"reputation": 1105, "user_id": 391122, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/63c655bc5282d3f343574aef29de460a?s=128&d=identicon&r=PG", "display_name": "Jared", "link": "https://stackoverflow.com/users/391122/jared"}, "reply_to_user": {"reputation": 115, "user_id": 2728125, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0f1602153f3fc861303681b48a6ae357?s=128&d=identicon&r=PG&f=1", "display_name": "Alex85", "link": "https://stackoverflow.com/users/2728125/alex85"}, "edited": false, "score": 1, "creation_date": 1509463197, "post_id": 47038383, "comment_id": 81024217, "body": "Yup, only one thing can have zero spaces at the <code>root</code> and every level below that has to have two spaces to indent to the next level."}, {"owner": {"reputation": 115, "user_id": 2728125, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0f1602153f3fc861303681b48a6ae357?s=128&d=identicon&r=PG&f=1", "display_name": "Alex85", "link": "https://stackoverflow.com/users/2728125/alex85"}, "edited": false, "score": 0, "creation_date": 1509466719, "post_id": 47038383, "comment_id": 81026618, "body": "I see. Thank you!"}], "tags": [], "owner": {"reputation": 1105, "user_id": 391122, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/63c655bc5282d3f343574aef29de460a?s=128&d=identicon&r=PG", "display_name": "Jared", "link": "https://stackoverflow.com/users/391122/jared"}, "is_accepted": true, "score": 1, "last_activity_date": 1509461759, "creation_date": 1509461759, "answer_id": 47038383, "question_id": 47038279, "link": "https://stackoverflow.com/questions/47038279/rails-i18n-add-new-locale-file/47038383#47038383", "title": "Rails I18n add new locale file", "body": "<p>That error is because you have two \"root level\" nodes in that .yml file.</p>\n\n<pre><code>ru:\n  foo:\nbad_root:\n</code></pre>\n\n<p>Also your file appears to be named <code>ry.yml</code> instead of your expected <code>ru.yml</code> not sure if that is what you intended.</p>\n"}], "owner": {"reputation": 115, "user_id": 2728125, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0f1602153f3fc861303681b48a6ae357?s=128&d=identicon&r=PG&f=1", "display_name": "Alex85", "link": "https://stackoverflow.com/users/2728125/alex85"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 582, "favorite_count": 0, "accepted_answer_id": 47038383, "answer_count": 1, "score": 0, "last_activity_date": 1509461759, "creation_date": 1509461482, "question_id": 47038279, "link": "https://stackoverflow.com/questions/47038279/rails-i18n-add-new-locale-file", "title": "Rails I18n add new locale file", "body": "<p>I am trying to add new file to </p>\n\n<pre><code>/home/user/Project/blog/config/locales/ru.yml\n</code></pre>\n\n<p>So, I do just right click no the locales folder and add file <code>ru.yml</code></p>\n\n<p>BUT <code>RubyMine</code> show me exeption:</p>\n\n<pre><code>Rails i18n locale file should have single root!\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/gXSEA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gXSEA.png\" alt=\"enter image description here\"></a></p>\n\n<p>Should I do some additional actions?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1509461594, "post_id": 47038270, "comment_id": 81023113, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/995593/what-does-or-equals-mean-in-ruby\">What does ||= (or-equals) mean in Ruby?</a>"}, {"owner": {"reputation": 25, "user_id": 8863042, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/467b23d73e6f4fe5ea9d078a9c91249e?s=128&d=identicon&r=PG&f=1", "display_name": "rackymortor", "link": "https://stackoverflow.com/users/8863042/rackymortor"}, "edited": false, "score": 0, "creation_date": 1509462545, "post_id": 47038270, "comment_id": 81023786, "body": "The main vice of my question would be, what&#39;s the purpose of setting @looked_for[str_name] = 1."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 2, "creation_date": 1509462834, "post_id": 47038270, "comment_id": 81023971, "body": "You&#39;re missing that this method may be invoked multiple times. We <b>don&#39;t</b> &quot;know @looked_for is nil&quot; at all. It <i>won&#39;t</i> be, except on the first invocation."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1509463232, "post_id": 47038270, "comment_id": 81024249, "body": "Also @sergio to slightly nitpick, <code>x ||= y</code> is <b>not</b> equivalent to <code>x = x || y</code>. A lot has been written about the subtle differences, but unlike <code>a += b</code> and <code>a = a + b</code>, their implementation is completely different."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1509463298, "post_id": 47038270, "comment_id": 81024297, "body": "@meagar: if you can see deleted comments, I was asserting that <code>x ||= y</code> is equivalent to <code>x || x = y</code> (in functionality, if not implementation). Off the top of my head, I can&#39;t produce an example which would give different results."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1509463889, "post_id": 47038270, "comment_id": 81024722, "body": "Right, refreshed my mind on nuances from the linked post. :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1509464329, "post_id": 47038270, "comment_id": 81025031, "body": "@meagar: I&#39;m curious, <i>can</i> diamond admins see deleted comments? :)"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1509465331, "post_id": 47038270, "comment_id": 81025716, "body": "@SergioTulentsev Yes, we can"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 8863042, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/467b23d73e6f4fe5ea9d078a9c91249e?s=128&d=identicon&r=PG&f=1", "display_name": "rackymortor", "link": "https://stackoverflow.com/users/8863042/rackymortor"}, "edited": false, "score": 0, "creation_date": 1509462862, "post_id": 47038691, "comment_id": 81023989, "body": "So does that mean you could use any arbitrary value as a placeholder?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 25, "user_id": 8863042, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/467b23d73e6f4fe5ea9d078a9c91249e?s=128&d=identicon&r=PG&f=1", "display_name": "rackymortor", "link": "https://stackoverflow.com/users/8863042/rackymortor"}, "edited": false, "score": 0, "creation_date": 1509462880, "post_id": 47038691, "comment_id": 81024008, "body": "@rackymortor Yes, any truthy value"}, {"owner": {"reputation": 25, "user_id": 8863042, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/467b23d73e6f4fe5ea9d078a9c91249e?s=128&d=identicon&r=PG&f=1", "display_name": "rackymortor", "link": "https://stackoverflow.com/users/8863042/rackymortor"}, "edited": false, "score": 0, "creation_date": 1509463042, "post_id": 47038691, "comment_id": 81024116, "body": "Makes more sense now, I mistakenly overlooked the pupose of the <code>if</code> statement. I thought all logic of the <code>if</code> came after it, but in this case the <code>if</code> statement was inline so it was referencing the statement before."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 0, "last_activity_date": 1509462864, "last_edit_date": 1509462864, "creation_date": 1509462657, "answer_id": 47038691, "question_id": 47038270, "link": "https://stackoverflow.com/questions/47038270/can-someone-explain-the-purpose-of-what-const-missing-does-in-this-case/47038691#47038691", "title": "Can someone explain the purpose of what const_missing does in this case?", "body": "<blockquote>\n  <p>Why did they decide to place it there, considering we know <code>@looked_for</code> is nil?</p>\n</blockquote>\n\n<p>We don't know that. It might have value already. Remember, this is instance variable <strong>on a class</strong> object. And classes live for a long time.</p>\n\n<blockquote>\n  <p>The main vice of my question would be, what's the purpose of setting <code>@looked_for[str_name] = 1</code></p>\n</blockquote>\n\n<p>To short-circuit subsequent invocations of <code>const_missing</code> with the same parameter (since we tried it already and didn't find a matching constant). Again, this is possible because <code>@looked_for</code> persists between invocations of <code>const_missing</code>.</p>\n"}], "owner": {"reputation": 25, "user_id": 8863042, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/467b23d73e6f4fe5ea9d078a9c91249e?s=128&d=identicon&r=PG&f=1", "display_name": "rackymortor", "link": "https://stackoverflow.com/users/8863042/rackymortor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 47038691, "answer_count": 1, "score": 0, "last_activity_date": 1509462864, "creation_date": 1509461459, "last_edit_date": 1509462287, "question_id": 47038270, "link": "https://stackoverflow.com/questions/47038270/can-someone-explain-the-purpose-of-what-const-missing-does-in-this-case", "title": "Can someone explain the purpose of what const_missing does in this case?", "body": "<pre><code>def Object.const_missing(name)\n  @looked_for ||= {}\n  str_name = name.to_s\n  raise \"Class not found: #{name}\" if @looked_for[str_name]\n  @looked_for[str_name] = 1\n  file = str_name.downcase\n  require file\n  klass = const_get(name)\n  return klass if klass\n  raise \"Class not found: #{name}\"\nend\n</code></pre>\n\n<p>Now I understand that the point of this is to rescue from const_missing when autoloading is triggered and a Constant cannot be located within its current nesting scope. I also understand the mission is to require a file that perhaps got overlooked in the autoloading process, whose filename is the same name of the missing constant. </p>\n\n<p>However, there are a few things that confuse me. Firstly, <code>@looked_for ||= {}</code> which if I'm not mistaken is saying <code>@looked_for || @looked_for = {}</code>. Why did they decide to place it there, considering we know @looked_for is nil? We are just creating that instance variable and we KNOW that its going to be empty so why not just say <code>@looked_for = {}</code>?</p>\n\n<p>Also, it says <code>if @looked_for[str_name]</code>  but how could our @looked_for hash have an existing key already if we are just now creating it? Won't it be nil? What's even more, is that the entire rest of the function lies under that <code>if</code> statement so nothing happens after the fact, if @looked_for is indeed empty. </p>\n\n<p>In the event that this @looked_for variable somehow already existed and did have that key of our constant name,  @looked_for[str_name] why are we setting it to <code>1</code>?  What is the purpose of that?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 4243, "user_id": 4638378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pGqPN.png?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/4638378/brian"}, "edited": false, "score": 0, "creation_date": 1509460719, "post_id": 47037992, "comment_id": 81022501, "body": "What problem are you trying to solve?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1509460817, "post_id": 47037992, "comment_id": 81022566, "body": "&quot;how to read the file byte-wise&quot; - not sure what exactly what you mean here, but JFYI, doing regex replace on byte streams is... quite difficult, to put it mildly. :)"}], "answers": [{"comments": [{"owner": {"reputation": 4142, "user_id": 2460378, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8195a4ad4c898abfd9544088d62901de?s=128&d=identicon&r=PG", "display_name": "Thomas S.", "link": "https://stackoverflow.com/users/2460378/thomas-s"}, "edited": false, "score": 0, "creation_date": 1509470741, "post_id": 47040908, "comment_id": 81029156, "body": "For what method I can provide the <code>open</code> arguments? For <code>File.read(path)</code> or for <code>File.open(path)</code>, too?"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "reply_to_user": {"reputation": 4142, "user_id": 2460378, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8195a4ad4c898abfd9544088d62901de?s=128&d=identicon&r=PG", "display_name": "Thomas S.", "link": "https://stackoverflow.com/users/2460378/thomas-s"}, "edited": false, "score": 0, "creation_date": 1509483223, "post_id": 47040908, "comment_id": 81036044, "body": "Check the docs. Looks like <code>File.read</code> is actually mixed in from <code>IO.read</code> which accepts the same kinds of encoding arguments."}], "tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": true, "score": 2, "last_activity_date": 1509469784, "creation_date": 1509469784, "answer_id": 47040908, "question_id": 47037992, "link": "https://stackoverflow.com/questions/47037992/ruby-read-file-byte-wise/47040908#47040908", "title": "Ruby: read file byte-wise", "body": "<p>You want <a href=\"http://ruby-doc.org/core/File.html#method-c-open\" rel=\"nofollow noreferrer\"><code>File#open</code></a>. Rather than returning a string, this gives you an IO object on which you can call methods such as <a href=\"http://ruby-doc.org/core/IO.html#method-i-each_byte\" rel=\"nofollow noreferrer\"><code>each_byte</code></a>. You can also pass <code>open</code> arguments specifying the encoding.</p>\n"}], "owner": {"reputation": 4142, "user_id": 2460378, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8195a4ad4c898abfd9544088d62901de?s=128&d=identicon&r=PG", "display_name": "Thomas S.", "link": "https://stackoverflow.com/users/2460378/thomas-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 774, "favorite_count": 0, "accepted_answer_id": 47040908, "answer_count": 1, "score": 1, "last_activity_date": 1509470660, "creation_date": 1509460619, "last_edit_date": 1509470660, "question_id": 47037992, "link": "https://stackoverflow.com/questions/47037992/ruby-read-file-byte-wise", "title": "Ruby: read file byte-wise", "body": "<p>I'm absolutely new to Ruby having just read some tutorials. It looks like I can read the file content as</p>\n\n<pre><code>svg = File.read(path)\n</code></pre>\n\n<p>Now it looks like the file content is treated as a string and regular expression replace is used:</p>\n\n<pre><code>svg = svg.gsub(/(width|height)=\"\\d+px\"/, '')\n</code></pre>\n\n<p>How to define the encoding to use the text file? How to read the file contents into a byte array (leaving the regular expression aside)?</p>\n"}, {"tags": ["ruby", "linux", "ubuntu"], "comments": [{"owner": {"reputation": 2773, "user_id": 1003288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b7c2d49748426791dc98b8214dfac9d1?s=128&d=identicon&r=PG", "display_name": "Jacob Tomlinson", "link": "https://stackoverflow.com/users/1003288/jacob-tomlinson"}, "edited": false, "score": 0, "creation_date": 1509460118, "post_id": 47037665, "comment_id": 81022085, "body": "This question may already have the answer you&#39;re looking for <a href=\"https://askubuntu.com/a/839782/65827\">askubuntu.com/a/839782/65827</a>"}, {"owner": {"reputation": 430, "user_id": 986597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O0hCj.jpg?s=128&g=1", "display_name": "Graham Nicholls", "link": "https://stackoverflow.com/users/986597/graham-nicholls"}, "reply_to_user": {"reputation": 2773, "user_id": 1003288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b7c2d49748426791dc98b8214dfac9d1?s=128&d=identicon&r=PG", "display_name": "Jacob Tomlinson", "link": "https://stackoverflow.com/users/1003288/jacob-tomlinson"}, "edited": false, "score": 0, "creation_date": 1509462060, "post_id": 47037665, "comment_id": 81023445, "body": "Question updated to reflect that I&#39;d already tried the ppa."}, {"owner": {"reputation": 2773, "user_id": 1003288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b7c2d49748426791dc98b8214dfac9d1?s=128&d=identicon&r=PG", "display_name": "Jacob Tomlinson", "link": "https://stackoverflow.com/users/1003288/jacob-tomlinson"}, "edited": false, "score": 0, "creation_date": 1509463345, "post_id": 47037665, "comment_id": 81024334, "body": "Fair enough! It may also be useful if you provide information on what you are trying to achieve. What are you using ruby for?"}, {"owner": {"reputation": 430, "user_id": 986597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O0hCj.jpg?s=128&g=1", "display_name": "Graham Nicholls", "link": "https://stackoverflow.com/users/986597/graham-nicholls"}, "reply_to_user": {"reputation": 2773, "user_id": 1003288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b7c2d49748426791dc98b8214dfac9d1?s=128&d=identicon&r=PG", "display_name": "Jacob Tomlinson", "link": "https://stackoverflow.com/users/1003288/jacob-tomlinson"}, "edited": false, "score": 0, "creation_date": 1509660573, "post_id": 47037665, "comment_id": 81120231, "body": "I&#39;m using Ruby as it&#39;s one of my favourite programming languages. 2.4 is the currently supported and documented version.  Not sure how that helps, though."}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 7412293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6aba880c66144e12b0e6d41f0ae4998?s=128&d=identicon&r=PG&f=1", "display_name": "Micha\u0142 Zaj\u0105c", "link": "https://stackoverflow.com/users/7412293/micha%c5%82-zaj%c4%85c"}, "is_accepted": false, "score": 4, "last_activity_date": 1509463687, "creation_date": 1509463687, "answer_id": 47039013, "question_id": 47037665, "link": "https://stackoverflow.com/questions/47037665/whats-the-best-way-to-install-ruby-2-4-on-kubuntu-17-10/47039013#47039013", "title": "What&#39;s the best way to install ruby 2.4 on (K)Ubuntu 17.10?", "body": "<p>Please do yourself a favor and install Ruby using <a href=\"https://rvm.io/\" rel=\"nofollow noreferrer\">RVM</a> or <a href=\"https://github.com/rbenv/rbenv\" rel=\"nofollow noreferrer\">rbenv</a>.</p>\n\n<p>Both solutions allow multiple Ruby versions to be installed alongside each other and offer an easy way out (<code>rvm implode</code> for example removed all traces of RVM without messing up your system) in case you mess something up.</p>\n\n<p>If you REALLY want to install Ruby not using any version managers then your best bet would be: <code>sudo apt-get build-dep ruby2.3</code> and compiling Ruby from source.</p>\n"}, {"comments": [{"owner": {"reputation": 430, "user_id": 986597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O0hCj.jpg?s=128&g=1", "display_name": "Graham Nicholls", "link": "https://stackoverflow.com/users/986597/graham-nicholls"}, "edited": false, "score": 0, "creation_date": 1509660933, "post_id": 47046013, "comment_id": 81120404, "body": "This is (K)Ubuntu 17.10 by the way"}, {"owner": {"reputation": 430, "user_id": 986597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O0hCj.jpg?s=128&g=1", "display_name": "Graham Nicholls", "link": "https://stackoverflow.com/users/986597/graham-nicholls"}, "edited": false, "score": 6, "creation_date": 1509714332, "post_id": 47046013, "comment_id": 81142393, "body": "Added the brightbox ppa.  Then tried to run   <code>apt install ruby2.4 ruby2.4-dev</code>  no packages found"}], "tags": [], "owner": {"reputation": 131, "user_id": 8808517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81a701948f30fe324172fdfbae072120?s=128&d=identicon&r=PG&f=1", "display_name": "dburcu", "link": "https://stackoverflow.com/users/8808517/dburcu"}, "is_accepted": false, "score": 11, "last_activity_date": 1509492682, "last_edit_date": 1592644375, "creation_date": 1509492682, "answer_id": 47046013, "question_id": 47037665, "link": "https://stackoverflow.com/questions/47037665/whats-the-best-way-to-install-ruby-2-4-on-kubuntu-17-10/47046013#47046013", "title": "What&#39;s the best way to install ruby 2.4 on (K)Ubuntu 17.10?", "body": "<p>Just add our repository, if you haven\u2019t already:</p>\n<blockquote>\n<p>$ sudo apt-add-repository ppa:brightbox/ruby-ng</p>\n<p>$ sudo apt-get update</p>\n</blockquote>\n<p>Install the packages:</p>\n<blockquote>\n<p>$ sudo apt-get install ruby2.4 ruby2.4-dev</p>\n</blockquote>\n<p>And you\u2019re up and running:</p>\n<blockquote>\n<p>$ ruby2.4 -v</p>\n</blockquote>\n<p>ruby 2.4.0p0 (2016-12-24 revision 57164) [x86_64-linux-gnu]</p>\n"}], "owner": {"reputation": 430, "user_id": 986597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O0hCj.jpg?s=128&g=1", "display_name": "Graham Nicholls", "link": "https://stackoverflow.com/users/986597/graham-nicholls"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9354, "favorite_count": 2, "answer_count": 2, "score": 6, "last_activity_date": 1515447265, "creation_date": 1509459627, "last_edit_date": 1510507193, "question_id": 47037665, "link": "https://stackoverflow.com/questions/47037665/whats-the-best-way-to-install-ruby-2-4-on-kubuntu-17-10", "title": "What&#39;s the best way to install ruby 2.4 on (K)Ubuntu 17.10?", "body": "<p>I run Kubuntu, and would like to install the latest stable Ruby version, which as of writing  is 2.4.2.  Unfortunately, the Ubuntus are a bit behind: 17.10 has this:</p>\n\n<pre><code>$ ruby --version  \n  ruby 2.3.3p222 (2016-11-21) [x86_64-linux-gnu]  \n$\n</code></pre>\n\n<p>I've googled, and seen lots of suggestions none of which are elegant.  I don't want to use rvm (nothing wrong with it - I just want my \"base\" ruby  updated).  Building from source is OK, except that it will default at least, to installing under /usr/local somewhere, and will leave the old version in place.  I'd like to upgrade to 2.4.2 - possibly using rvm to install 2.5.</p>\n\n<p>I've have already tried using the suggestion in the comment below.\nThe ppa doesn't seem to have 2.4.    When I use apt install ruby 2.4*, the * is a regex, so matches 2.{anything_or_nothing}, so tries to pull in 2.3, which is not what I want - eg  </p>\n\n<pre><code>$ sudo apt install ruby2.4*\nReading package lists... Done\nBuilding dependency tree       \nReading state information... Done\nNote, selecting 'ruby2.3' for regex 'ruby2.4*'\nNote, selecting 'uwsgi-plugin-rack-ruby2.3' for regex 'ruby2.4*'\nNote, selecting 'ruby2.3-dev' for regex 'ruby2.4*'\nNote, selecting 'ruby2.3-doc' for regex 'ruby2.4*'\nNote, selecting 'libruby2.3' for regex 'ruby2.4*'\nNote, selecting 'ruby-ruby2ruby' for regex 'ruby2.4*'\nNote, selecting 'ruby2.3-tcltk' for regex 'ruby2.4*'\nlibruby2.3 is already the newest version (2.3.3-1ubuntu1).\nruby2.3 is already the newest version (2.3.3-1ubuntu1).\nruby2.3-dev is already the newest version (2.3.3-1ubuntu1).\nruby2.3-dev set to manually installed.\nThe following additional packages will be installed:\n  libmatheval1 ruby-parser ruby-sexp-processor uwsgi-core\nSuggested packages:\n  nginx-full | cherokee | libapache2-mod-proxy-uwsgi | libapache2-mod-uwsgi | libapache2-mod-ruwsgi uwsgi-plugins-all uwsgi-extra\nThe following NEW packages will be installed\n  libmatheval1 ruby-parser ruby-ruby2ruby ruby-sexp-processor ruby2.3-doc ruby2.3-tcltk uwsgi-core uwsgi-plugin-rack-ruby2.3\n0 to upgrade, 8 to newly install, 0 to remove and 44 not to upgrade.\nNeed to get 4,444 kB of archives.\nAfter this operation, 34.5 MB of additional disk space will be used.\nDo you want to continue? [Y/n] n\nAbort.\n</code></pre>\n\n<p>Thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "amazon-ec2", "rubber"], "comments": [{"owner": {"reputation": 515, "user_id": 3079794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f80484f70a0d26f0eb49e030f5331b?s=128&d=identicon&r=PG&f=1", "display_name": "Mkou", "link": "https://stackoverflow.com/users/3079794/mkou"}, "edited": false, "score": 0, "creation_date": 1515030448, "post_id": 47037546, "comment_id": 83150096, "body": "In rubber.yml in your app you have a <code>key_file</code> attribute that represents the path to a file where you have to add your amazon keys etc. Is this file present in your case ?"}], "owner": {"reputation": 143, "user_id": 8141329, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f4321efd70d112fc7a0393e547d84fbb?s=128&d=identicon&r=PG&f=1", "display_name": "Somnath Das", "link": "https://stackoverflow.com/users/8141329/somnath-das"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1509460156, "creation_date": 1509459305, "last_edit_date": 1509460156, "question_id": 47037546, "link": "https://stackoverflow.com/questions/47037546/deploying-rails-app-to-amazon-ec2-instance-using-rubberfree-tier", "title": "Deploying rails app to Amazon Ec2 instance using rubber(free-tier)", "body": "<p>I am trying to upload my rails app to free-tier ec2 instance using <code>rubber</code> gem. Using railcast video and following this tutorial\n<a href=\"https://liggat.org/a-full-AWS-rails-stack-provision-and-deployment-with-the-rubber-gem/\" rel=\"nofollow noreferrer\">https://liggat.org/a-full-AWS-rails-stack-provision-and-deployment-with-the-rubber-gem/</a></p>\n\n<p>Using <code>cap rubber:create</code>, I am able to create ec2 instance, but it does not get connected. I get the following error:</p>\n\n<pre><code>** Failed to connect to xx.xxx.xxx.xx, retrying\n  * 2017-10-31 19:10:56 executing `rubber:_ensure_key_file_present'\n    servers: [\"xx.xxx.xxx.xx\"]\n/Users/somnathdas/.rvm/gems/ruby-2.4.0/gems/net-ssh-2.9.4/lib/net/ssh.rb:197: warning: constant ::Fixnum is deprecated\n/Users/somnathdas/.rvm/gems/ruby-2.4.0/gems/net-ssh-2.9.4/lib/net/ssh/transport/session.rb:67:in `initialize': Object#timeout is deprecated, use Timeout.timeout instead.\n/Users/somnathdas/.rvm/gems/ruby-2.4.0/gems/net-ssh-2.9.4/lib/net/ssh/transport/session.rb:84:in `initialize': Object#timeout is deprecated, use Timeout.timeout instead.\n./Users/somnathdas/.rvm/gems/ruby-2.4.0/gems/net-ssh-2.9.4/lib/net/ssh/transport/cipher_factory.rb:98: warning: constant OpenSSL::Cipher::Cipher is deprecated\n. ** Failed to connect to xx.xxx.xxx.xx, retrying\n  * 2017-10-31 19:10:59 executing `rubber:_ensure_key_file_present'\n</code></pre>\n\n<p>Also <code>rubber</code> does not update <em>/etc/hosts</em> file. But interestingly when I ssh into remote instance through</p>\n\n<pre><code>ssh -v -i ~/.ec2/gsg-keypair ubuntu@ec2-xx.xxx.xxx.xx.us-west-2.compute.amazonaws.com\n</code></pre>\n\n<p>it gets connected. Also, <code>cap rubber:bootstrap</code> fails after this, giving this error</p>\n\n<pre><code>* 2017-10-31 19:13:17 executing `rubber:bootstrap'\n    triggering before callbacks for `rubber:bootstrap'\n  * 2017-10-31 19:13:17 executing `rubber:base:update_sudoers'\n    servers: [\"production.xxxxx.io\"]\n/Users/somnathdas/.rvm/gems/ruby-2.4.0/gems/net-ssh-2.9.4/lib/net/ssh.rb:197: warning: constant ::Fixnum is deprecated\n/Users/somnathdas/.rvm/gems/ruby-2.4.0/gems/net-ssh-2.9.4/lib/net/ssh/transport/session.rb:67:in `initialize': Object#timeout is deprecated, use Timeout.timeout instead.\nconnection failed for: production.xxxx.io (SocketError: getaddrinfo: nodename nor servname provided, or not known)\n</code></pre>\n\n<p><strong>I am stuck on this for 5 days. if some kind soul can help, I would really be obliged.</strong></p>\n"}, {"tags": ["ruby", "class"], "comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1509459127, "post_id": 47037383, "comment_id": 81021366, "body": "Instead of <code>@@all</code> maybe use <code>def self.all; @all ||= []; end</code>."}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1509459196, "post_id": 47037383, "comment_id": 81021402, "body": "Also <code>def self.name</code> is a class method, I&#39;m guessing it needs to be removed."}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1509459554, "post_id": 47037383, "comment_id": 81021665, "body": "You can also simplify <code>find_or_create_by_name</code> to <code>find_by_name(name) || create_by_name(name)</code>."}, {"owner": {"reputation": 41, "user_id": 5244092, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/85dc8164b8fbf6a6c99e4a0912af1799?s=128&d=identicon&r=PG&f=1", "display_name": "alexnewby", "link": "https://stackoverflow.com/users/5244092/alexnewby"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1509460317, "post_id": 47037383, "comment_id": 81022231, "body": "Thank you guys for the help"}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 5244092, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/85dc8164b8fbf6a6c99e4a0912af1799?s=128&d=identicon&r=PG&f=1", "display_name": "alexnewby", "link": "https://stackoverflow.com/users/5244092/alexnewby"}, "is_accepted": false, "score": 0, "last_activity_date": 1509460454, "creation_date": 1509460454, "answer_id": 47037930, "question_id": 47037383, "link": "https://stackoverflow.com/questions/47037383/ruby-object-relation/47037930#47037930", "title": "Ruby: object relation", "body": "<p>I went back and noticed that the .new_by_name method was creating a new Song instead of Artist. I changed that line to artist_name = Artist.new(name) and now that error no longer appears. </p>\n\n<p>Here is the rest of the code with the changes you guys mentioned (thanks!): </p>\n\n<pre><code>class Artist\n  attr_accessor :name, :song\n  @@all = []\n\n  def initialize(name)\n    @name = name\n    @songs = []\n  end\n\n\n  def add_song(song)\n    @songs &lt;&lt; song\n  end\n\n  def songs\n    @songs\n  end\n\n  def self.all\n    @@all\n  end\n\n  def save\n    self.class.all &lt;&lt; self\n  end\n\n  def self.new_by_name(name)\n    artist_name = Artist.new(name)\n    artist_name\n  end\n\n  def self.create_by_name(name)\n    artist = self.new_by_name(name)\n    artist.save\n    artist\n  end\n\n  def self.find_by_name(name)\n    @@all.detect{|x| x.name == name}\n  end\n\n  def self.find_or_create_by_name(name)\n    if self.find_by_name(name) == nil\n      self.create_by_name(name)\n    else\n      self.find_by_name(name)\n    end\n  end\n\nend\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 5244092, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/85dc8164b8fbf6a6c99e4a0912af1799?s=128&d=identicon&r=PG&f=1", "display_name": "alexnewby", "link": "https://stackoverflow.com/users/5244092/alexnewby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 185, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1509460454, "creation_date": 1509458806, "question_id": 47037383, "link": "https://stackoverflow.com/questions/47037383/ruby-object-relation", "title": "Ruby: object relation", "body": "<p>I am working on a project involving object relations, and building classes that interact with each other through association. </p>\n\n<p>Specifically, I am having problems with the .find_or_create_by_name method. This method finds or creates an artist by name, maintaining uniqueness of objects by name property. This works. \nThe next part is it should create a new instance of Artist if none exists. This doesn't work. </p>\n\n<pre><code>class Artist\n  attr_accessor :name, :song\n  @@all = []\n\n  def initialize(name)\n    @name = name\n    @songs = []\n  end\n\n  def self.name=\n    @name\n  end\n\n  def add_song(song)\n    @songs &lt;&lt; song\n  end\n\n  def songs\n    @songs\n  end\n\n  def self.all\n    @@all\n  end\n\n  def save\n    self.class.all &lt;&lt; self\n  end\n\n  def self.new_by_name(name)\n    artist_name = Song.new(name)\n    artist_name\n  end\n\n  def self.create_by_name(name = nil)\n    artist = self.new_by_name(name)\n    artist.save\n    artist\n  end\n\n  def self.find_by_name(name = nil)\n    @@all.detect{|x| x.name == name}\n  end\n\n  def self.find_or_create_by_name(name)\n    if find_by_name(name) == nil\n      create_by_name(name)\n    else\n      find_by_name(name)\n    end\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "parsing", "mechanize"], "comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1509459628, "post_id": 47037354, "comment_id": 81021717, "body": "Not sure if copy/paste issue but it looks like you are missing an <code>end</code>."}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1509459727, "post_id": 47037354, "comment_id": 81021803, "body": "You can use <code>next</code> to skip an iteration of a loop, e.g. <code>next if some_condition</code>"}, {"owner": {"reputation": 1, "user_id": 8862793, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yUcBYDMHa-Y/AAAAAAAAAAI/AAAAAAAADrY/lGCKGCJGp04/photo.jpg?sz=128", "display_name": "Joel Steinmann", "link": "https://stackoverflow.com/users/8862793/joel-steinmann"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1509608030, "post_id": 47037354, "comment_id": 81087558, "body": "how would that next look like?"}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1509627541, "post_id": 47037354, "comment_id": 81100180, "body": "e.g. <code>next</code>,  <code>next if some_condition</code>, <code>next if true</code>, <code>next if false</code>"}, {"owner": {"reputation": 1, "user_id": 8862793, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yUcBYDMHa-Y/AAAAAAAAAAI/AAAAAAAADrY/lGCKGCJGp04/photo.jpg?sz=128", "display_name": "Joel Steinmann", "link": "https://stackoverflow.com/users/8862793/joel-steinmann"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1509695286, "post_id": 47037354, "comment_id": 81130717, "body": ".any helped me.  if container.search(&quot;.contact&quot;).css(&quot;.url&quot;).any?         url = container.search(&quot;.url&quot;).at(&quot;a&quot;).text         else         url = &quot;no website&quot;       end"}], "owner": {"reputation": 1, "user_id": 8862793, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yUcBYDMHa-Y/AAAAAAAAAAI/AAAAAAAADrY/lGCKGCJGp04/photo.jpg?sz=128", "display_name": "Joel Steinmann", "link": "https://stackoverflow.com/users/8862793/joel-steinmann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1509630811, "creation_date": 1509458738, "last_edit_date": 1509630811, "question_id": 47037354, "link": "https://stackoverflow.com/questions/47037354/parse-html-with-mechnize-ruby-and-go-to-next-element-if-not-existing", "title": "Parse HTML with Mechnize/Ruby and go to next element if not existing", "body": "<p>I like to build a scraper using mechanize gem. a few things work just fine but I face a problem when the structure of the html I like to parse changes e.g. doesn't contain all requested elements. </p>\n\n<p>here is what I did so far and this works just fine:</p>\n\n<pre><code>require 'mechanize'\n\nmechanize = Mechanize.new\n\n################ GET TOTAL NUMBER OF PAGES ################\npage = mechanize.get(\"https://yellow.local.ch/de/q?browse=physiotherapy&amp;where=&amp;page=1\")\ntotal_pages = page.search(\".page\").last.at(\"a\").text.strip.to_i\n\n##########\u00a0LOOP OVER EACH PAGE ##############\n\ntotal_pages.times do |page_num|\n  puts (\"https://yellow.local.ch/de/q?browse=physiotherapy&amp;where=&amp;page=#{page_num + 1}\")\n  page = mechanize.get(\"https://yellow.local.ch/de/q?browse=physiotherapy&amp;where=&amp;page=#{ page_num + 1}\")\n  containers = page.search(\".container\")\n\n  # ################\u00a0GET DATA FOR EACH PAGE ####################\n  containers.each do |container|\n    firma = container.at(\"h2\").text.strip\n    categories = container.search(\".categories\").at(\"span\").text.strip\n    address = container.search(\".address\").at(\"span\").text.strip\n    phone = container.search(\".contact\").at(\"a\").text.strip\n\n\n############## URL empty ######################\n\n\n  end\n</code></pre>\n\n<p>this is the HTML I like to parse</p>\n\n<pre><code> &lt;div class=\"container clearfix\"&gt;\n&lt;h2&gt;\n&lt;a class=\"details-entry-title-link\" href=\"https://yellow.local.ch/de/d/Arlesheim/4144/Physiotherapie/panta-rhei-KfNsAr3NLV8NSL4Z1Q3CQA\"&gt;panta rhei&lt;/a&gt;\n&lt;/h2&gt;\n&lt;div class=\"listing-index-content\"&gt;\n&lt;span class=\"categories first-two\"&gt;Physiotherapie&lt;/span&gt;\n&lt;br&gt;\n&lt;span class=\"address first-two\"&gt;Tramweg 2, 4144 Arlesheim&lt;/span&gt;\n&lt;br&gt;\n&lt;span class=\"contact last-two\"&gt;\n&lt;span class=\"phone\"&gt;\n&lt;label&gt;Telefon&lt;/label&gt;\n&lt;span class=\"value\"&gt;&lt;span class=\"star\"&gt;*&lt;/span&gt;&lt;a rel=\"nofollow\" class=\"number\" href=\"tel:+41617016318\"&gt;061 701 63 18&lt;/a&gt;\n&lt;/span&gt;\n&lt;/span&gt;\n\n|\n&lt;span class=\"url\"&gt;\n&lt;a class=\"redirect\" data-href=\"https://www.local.ch/redirect?entity_id=KfNsAr3NLV8NSL4Z1Q3CQA&amp;amp;hmac=926efdfbc1e4c457a45e16b4e903b8dfdff31c8f&amp;amp;locale=de&amp;amp;url=http%3A%2F%2Fwww.pantarhei-arlesheim.ch\" href=\"http://www.pantarhei-arlesheim.ch\"&gt;www.pantarhei-arlesheim.ch&lt;/a&gt;\n&lt;/span&gt;\n\n&lt;/span&gt;\n&lt;br&gt;\n&lt;span class=\"icons last-two\"&gt;\n&lt;span id=\"heart-place_KfNsAr3NLV8NSL4Z1Q3CQA\"&gt;\n&lt;button class=\"button-reseted heart\" data-action=\"favorited\" data-create=\"/de/favorites?place_id=KfNsAr3NLV8NSL4Z1Q3CQA\" data-delete=\"/de/favorites/:id\"&gt;\n&lt;i class=\"heart-icon icon-heart-outline\"&gt;&lt;/i&gt;\n&lt;/button&gt;\n&lt;span class=\"interestingness\" data-load-with=\"&lt;span class=&amp;quot;bootstrap&amp;quot;&gt;&lt;i class=&amp;quot;icon-spinner icon-spin&amp;quot;&gt;&lt;/i&gt;&lt;/span&gt;\"&gt;\n2\n&lt;/span&gt;\n&lt;/span&gt;\n\n&lt;/span&gt;\n&lt;a class=\"big info-link button details-entry-link-button\" href=\"https://yellow.local.ch/de/d/Arlesheim/4144/Physiotherapie/panta-rhei-KfNsAr3NLV8NSL4Z1Q3CQA\" title=\"panta rhei\"&gt;Details&lt;/a&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>sometimes the part ** span class=\"url\" ** does not exist. therefore I guess I have to check the container if there is such an element. If yes all good if not skip it and to go next element to parse.</p>\n\n<p>thanks for helping. </p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "model"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 1, "creation_date": 1509458490, "post_id": 47036953, "comment_id": 81020887, "body": "Take a look at the <code>source</code> option: <a href=\"https://stackoverflow.com/questions/4632408/understanding-source-option-of-has-one-has-many-through-of-rails\" title=\"understanding source option of has one has many through of rails\">stackoverflow.com/questions/4632408/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 554, "user_id": 8066456, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fcdc1b0ee11fa7ab705b178bd0a888da?s=128&d=identicon&r=PG&f=1", "display_name": "stig Garet", "link": "https://stackoverflow.com/users/8066456/stig-garet"}, "edited": false, "score": 0, "creation_date": 1509457987, "post_id": 47037041, "comment_id": 81020538, "body": "My mistake, I did&#39;nt edit my question but I have also try with &#39;group&#39;"}, {"owner": {"reputation": 554, "user_id": 8066456, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fcdc1b0ee11fa7ab705b178bd0a888da?s=128&d=identicon&r=PG&f=1", "display_name": "stig Garet", "link": "https://stackoverflow.com/users/8066456/stig-garet"}, "edited": false, "score": 0, "creation_date": 1509458075, "post_id": 47037041, "comment_id": 81020599, "body": "Could not find the source association(s) &quot;fav_group&quot; or :fav_groups in model FavoritGroup"}, {"owner": {"reputation": 554, "user_id": 8066456, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fcdc1b0ee11fa7ab705b178bd0a888da?s=128&d=identicon&r=PG&f=1", "display_name": "stig Garet", "link": "https://stackoverflow.com/users/8066456/stig-garet"}, "edited": false, "score": 0, "creation_date": 1509458139, "post_id": 47037041, "comment_id": 81020649, "body": "I&#39;m already using the user.groups association, and I would like to buid something similar for the favorites groups"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 554, "user_id": 8066456, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fcdc1b0ee11fa7ab705b178bd0a888da?s=128&d=identicon&r=PG&f=1", "display_name": "stig Garet", "link": "https://stackoverflow.com/users/8066456/stig-garet"}, "edited": false, "score": 1, "creation_date": 1509458177, "post_id": 47037041, "comment_id": 81020675, "body": "Are you sure you are not calling fav_group/fav_groups somewhere else on a FavoritGroup object by mistake? This part you described us seems correct"}, {"owner": {"reputation": 554, "user_id": 8066456, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fcdc1b0ee11fa7ab705b178bd0a888da?s=128&d=identicon&r=PG&f=1", "display_name": "stig Garet", "link": "https://stackoverflow.com/users/8066456/stig-garet"}, "edited": false, "score": 0, "creation_date": 1509458329, "post_id": 47037041, "comment_id": 81020767, "body": "I don&#39;t think so, So if I understand you well, something like : has_many :favorit_groups, dependent: :destroy             has_many :fav_groups, through: :favorit_groups, class_name: &quot;Group&quot;  Should be correct ?"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1509458443, "post_id": 47037041, "comment_id": 81020843, "body": "You are missing the <code>source: :group</code> option (<a href=\"https://stackoverflow.com/questions/4632408/understanding-source-option-of-has-one-has-many-through-of-rails\" title=\"understanding source option of has one has many through of rails\">stackoverflow.com/questions/4632408/&hellip;</a>)"}, {"owner": {"reputation": 554, "user_id": 8066456, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fcdc1b0ee11fa7ab705b178bd0a888da?s=128&d=identicon&r=PG&f=1", "display_name": "stig Garet", "link": "https://stackoverflow.com/users/8066456/stig-garet"}, "edited": false, "score": 0, "creation_date": 1509458475, "post_id": 47037041, "comment_id": 81020871, "body": "After the class name ?"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 2, "last_activity_date": 1509458747, "last_edit_date": 1509458747, "creation_date": 1509457736, "answer_id": 47037041, "question_id": 47036953, "link": "https://stackoverflow.com/questions/47036953/select-the-favorite-groups/47037041#47037041", "title": "Select the favorite groups", "body": "<p>As the relation name <code>fav_groups</code> is not the same as the relation name between <code>FavoritGroup</code> and <code>Group</code>, Rails does not not how to fetch those records.</p>\n\n<p>Luckily, <code>has_many</code> accept a <code>source</code> option:</p>\n\n<pre><code>has_many :fav_groups, source: :group, through: :favorit_groups, class_name: \"Group\"\n</code></pre>\n\n<p>See full explanation here: <a href=\"https://stackoverflow.com/questions/tagged/ruby-on-rails\">https://stackoverflow.com/questions/tagged/ruby-on-rails</a></p>\n"}, {"comments": [{"owner": {"reputation": 554, "user_id": 8066456, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fcdc1b0ee11fa7ab705b178bd0a888da?s=128&d=identicon&r=PG&f=1", "display_name": "stig Garet", "link": "https://stackoverflow.com/users/8066456/stig-garet"}, "edited": false, "score": 2, "creation_date": 1509458005, "post_id": 47037056, "comment_id": 81020552, "body": "Thanks for your answer but I need the association current_user.groups for other stuff, so I would like to build a new one with a scope .fav_groups"}], "tags": [], "owner": {"reputation": 2735, "user_id": 7006199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kFqCJ.jpg?s=128&g=1", "display_name": "Nimish Gupta", "link": "https://stackoverflow.com/users/7006199/nimish-gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1509459998, "last_edit_date": 1509459998, "creation_date": 1509457802, "answer_id": 47037056, "question_id": 47036953, "link": "https://stackoverflow.com/questions/47036953/select-the-favorite-groups/47037056#47037056", "title": "Select the favorite groups", "body": "<p>Its look like there is many to many relationship between <code>user</code> and <code>group</code></p>\n\n<pre><code>class User\n\n  has_many :favorit_groups, dependent: :destroy\n  has_many :fav_groups, through: :favorit_groups, source: :group\n\nend\n</code></pre>\n\n<p>Try\n<code>current_user.groups</code> which will automatical fire a join query and fetch those groups that are marked favorite by the use i.e those groups for which an entry is present in <code>favorit_groups</code> table</p>\n"}], "owner": {"reputation": 554, "user_id": 8066456, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fcdc1b0ee11fa7ab705b178bd0a888da?s=128&d=identicon&r=PG&f=1", "display_name": "stig Garet", "link": "https://stackoverflow.com/users/8066456/stig-garet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 47037041, "answer_count": 2, "score": 0, "last_activity_date": 1509459998, "creation_date": 1509457492, "last_edit_date": 1509458038, "question_id": 47036953, "link": "https://stackoverflow.com/questions/47036953/select-the-favorite-groups", "title": "Select the favorite groups", "body": "<p>I have a model favorit_group (user:references, group:references).</p>\n\n<p>And would like to find all the favorites groups of my User with something like that :</p>\n\n<pre><code>current_user.fav_groups\n</code></pre>\n\n<p>I suppose that i have to write something like this in my model User, but it's not working </p>\n\n<pre><code>has_many :favorit_groups, dependent: :destroy\nhas_many :fav_groups, through: :favorit_groups, class_name: \"Group\"\n</code></pre>\n\n<p>Is anyone who is working with this kind of association ? Or should I have to join and merge the model favorit_groups inside my User model ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "hash"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1509458159, "post_id": 47036906, "comment_id": 81020667, "body": "Where are you executing this from? What version of rails are you using."}, {"owner": {"reputation": 1315, "user_id": 7412183, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a73ddfb4eba2ce63e534ab68317210dc?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/7412183/dennis"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1509458739, "post_id": 47036906, "comment_id": 81021080, "body": "@engineersmnky, I execute this from inside of a controller. Rails 5 used."}], "answers": [{"comments": [{"owner": {"reputation": 1315, "user_id": 7412183, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a73ddfb4eba2ce63e534ab68317210dc?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/7412183/dennis"}, "edited": false, "score": 1, "creation_date": 1509458630, "post_id": 47037084, "comment_id": 81021002, "body": "Is this also includes user provided POST parameters? Oh, the same page shows for <code>request_parameters()</code>. So I will compare and combine them."}, {"owner": {"reputation": 199, "user_id": 4950238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9c0ab7ac8b0aef7e3b5898608e49335?s=128&d=identicon&r=PG&f=1", "display_name": "Smartens", "link": "https://stackoverflow.com/users/4950238/smartens"}, "edited": false, "score": 0, "creation_date": 1613245461, "post_id": 47037084, "comment_id": 117018509, "body": "<code>request.request_method</code> worked for me"}], "tags": [], "owner": {"reputation": 635, "user_id": 7842011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbca165d2a40ba6819b02b6b956778e1?s=128&d=identicon&r=PG&f=1", "display_name": "jk_", "link": "https://stackoverflow.com/users/7842011/jk"}, "is_accepted": false, "score": 1, "last_activity_date": 1509457862, "creation_date": 1509457862, "answer_id": 47037084, "question_id": 47036906, "link": "https://stackoverflow.com/questions/47036906/how-to-get-just-get-and-post-params-as-hash-in-rails/47037084#47037084", "title": "How to get just GET and POST params as hash in Rails?", "body": "<p>In the controller, you have access to a <code>request</code> object. <code>request</code> has a method <code>query_parameters</code>, which will return a hash of just the explicitly supplied parameters.</p>\n\n<pre><code>`request.query_parameters`\n</code></pre>\n\n<p><a href=\"http://api.rubyonrails.org/classes/ActionDispatch/Request.html#method-i-query_parameters\" rel=\"nofollow noreferrer\">http://api.rubyonrails.org/classes/ActionDispatch/Request.html#method-i-query_parameters</a></p>\n"}, {"comments": [{"owner": {"reputation": 1315, "user_id": 7412183, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a73ddfb4eba2ce63e534ab68317210dc?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/7412183/dennis"}, "edited": false, "score": 0, "creation_date": 1509458786, "post_id": 47037352, "comment_id": 81021113, "body": "query1 and query2 is not static. It may contains much much more parameters. Have no strict/permitted keys for query. But, this will be helpful for me for other issue. See, I am trying to collect and calculate all provided query parameters regardless permitted or not permitted."}, {"owner": {"reputation": 6058, "user_id": 662425, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-JXe9IA2rZYM/AAAAAAAAAAI/AAAAAAAAGEg/RlIJwUwmP90/photo.jpg?sz=128", "display_name": "AnkitG", "link": "https://stackoverflow.com/users/662425/ankitg"}, "reply_to_user": {"reputation": 1315, "user_id": 7412183, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a73ddfb4eba2ce63e534ab68317210dc?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/7412183/dennis"}, "edited": false, "score": 0, "creation_date": 1509458916, "post_id": 47037352, "comment_id": 81021220, "body": "are they namespaced in any other params. Eg: users: [:query1, query2] ?"}, {"owner": {"reputation": 1315, "user_id": 7412183, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a73ddfb4eba2ce63e534ab68317210dc?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/7412183/dennis"}, "edited": false, "score": 0, "creation_date": 1509459003, "post_id": 47037352, "comment_id": 81021280, "body": "I am trying to collect all user provided query (GET and POST) parameters and hash them. That&#39;s why I cannot permit any. This has nothing to do with database or any action like critical."}, {"owner": {"reputation": 1315, "user_id": 7412183, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a73ddfb4eba2ce63e534ab68317210dc?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/7412183/dennis"}, "edited": false, "score": 0, "creation_date": 1509459136, "post_id": 47037352, "comment_id": 81021369, "body": "Actually, permit may work better in my situation. About security. So I can filter all unnecessary queries and only grab what I need."}, {"owner": {"reputation": 6058, "user_id": 662425, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-JXe9IA2rZYM/AAAAAAAAAAI/AAAAAAAAGEg/RlIJwUwmP90/photo.jpg?sz=128", "display_name": "AnkitG", "link": "https://stackoverflow.com/users/662425/ankitg"}, "reply_to_user": {"reputation": 1315, "user_id": 7412183, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a73ddfb4eba2ce63e534ab68317210dc?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/7412183/dennis"}, "edited": false, "score": 1, "creation_date": 1509459586, "post_id": 47037352, "comment_id": 81021687, "body": "I have updated my answer on how to still whitelist <code>query*</code> parameter and thn get the whitelisted as hash"}, {"owner": {"reputation": 1315, "user_id": 7412183, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a73ddfb4eba2ce63e534ab68317210dc?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/7412183/dennis"}, "edited": false, "score": 0, "creation_date": 1509460775, "post_id": 47037352, "comment_id": 81022533, "body": "Wonderful! Thank you for your time and explaining to me."}], "tags": [], "owner": {"reputation": 6058, "user_id": 662425, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-JXe9IA2rZYM/AAAAAAAAAAI/AAAAAAAAGEg/RlIJwUwmP90/photo.jpg?sz=128", "display_name": "AnkitG", "link": "https://stackoverflow.com/users/662425/ankitg"}, "is_accepted": true, "score": 4, "last_activity_date": 1509463026, "last_edit_date": 1509463026, "creation_date": 1509458737, "answer_id": 47037352, "question_id": 47036906, "link": "https://stackoverflow.com/questions/47036906/how-to-get-just-get-and-post-params-as-hash-in-rails/47037352#47037352", "title": "How to get just GET and POST params as hash in Rails?", "body": "<blockquote>\n  <p>You should have permitted params (<a href=\"http://api.rubyonrails.org/v5.0/classes/ActionController/StrongParameters.html\" rel=\"nofollow noreferrer\">Strong parameters</a>).</p>\n</blockquote>\n\n<p>In your controller have permitted params method.</p>\n\n<pre><code>def your_params\n  params.permit(:query1, :query2)\nend\n</code></pre>\n\n<p>If you wish to have a hash of those you can do</p>\n\n<pre><code>your_params.to_h #This will return hash of permitted params\n</code></pre>\n\n<p><em>Update:</em></p>\n\n<p>Incase you have multiple <code>query*</code> type of parameters you can <a href=\"http://api.rubyonrails.org/classes/ActionController/Parameters.html#method-i-select\" rel=\"nofollow noreferrer\">select</a> them and <a href=\"http://api.rubyonrails.org/classes/ActionController/Parameters.html#method-i-permit-21\" rel=\"nofollow noreferrer\">permit!</a>. Here is a command line explanation</p>\n\n<pre><code># passing the list of parameters\n&gt; params = ActionController::Parameters.new({query1: 'aa', query2: 'bb', query3: 'cc', controller: 'users', action: 'index'})\n=&gt; &lt;ActionController::Parameters {\"query1\"=&gt;\"aa\", \"query2\"=&gt;\"bb\", \"query3\"=&gt;\"cc\", \"controller\"=&gt;\"users\", \"action\"=&gt;\"index\"} permitted: false&gt;\n\n# Select all the parameters of type query&lt;integer&gt;\n&gt; all_queries = params.select {|i| i.match?(/query\\d/) }\n=&gt; &lt;ActionController::Parameters {\"query1\"=&gt;\"aa\", \"query2\"=&gt;\"bb\", \"query3\"=&gt;\"cc\"} permitted: false&gt;\n\n # mark the selected as permitted\n&gt; all_queries.permit!\n=&gt; &lt;ActionController::Parameters {\"query1\"=&gt;\"aa\", \"query2\"=&gt;\"bb\", \"query3\"=&gt;\"cc\"} permitted: true&gt;\n\n# get them as hash\n&gt; all_queries.to_h\n=&gt; {\"query1\"=&gt;\"aa\", \"query2\"=&gt;\"bb\", \"query3\"=&gt;\"cc\"}\n</code></pre>\n\n<p>Controller method will look like</p>\n\n<pre><code># getting all query&lt;integer&gt; like params\ndef your_params\n  params.select {|param| param.match?(/query\\d/}.permit!\nend\n</code></pre>\n"}], "owner": {"reputation": 1315, "user_id": 7412183, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a73ddfb4eba2ce63e534ab68317210dc?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/7412183/dennis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6112, "favorite_count": 0, "accepted_answer_id": 47037352, "answer_count": 2, "score": 4, "last_activity_date": 1509463026, "creation_date": 1509457352, "last_edit_date": 1509458730, "question_id": 47036906, "link": "https://stackoverflow.com/questions/47036906/how-to-get-just-get-and-post-params-as-hash-in-rails", "title": "How to get just GET and POST params as hash in Rails?", "body": "<p>I would like to get any additional <code>GET</code> and <code>POST</code> <strong>params</strong> in Rails without Rails' own additions such as <code>controller</code>, <code>format</code>, etc...</p>\n\n<p><code>params.inspect</code> gave me what I want but it has some keys that Rails adds for me such as <code>controller</code> or <code>format</code>. I only want to get user input <code>GET</code> and <code>POST</code> params as hash. How can I do that? I cannot find anything.</p>\n\n<p><strong>URL:</strong></p>\n\n<p><code>http:/test.com/some/path?query1=1&amp;query2=1</code></p>\n\n<p><strong>Run:</strong></p>\n\n<p><code>puts params.inspect</code></p>\n\n<p><strong>Expected:</strong></p>\n\n<p><code>{\"query1\"=&gt;\"1\", \"query2\"=&gt;\"1\"}</code></p>\n\n<p><strong>Actual:</strong></p>\n\n<p><code>{\"query1\"=&gt;\"1\", \"query2\"=&gt;\"1\", \"format\"=&gt;\":json\", \"controller\"=&gt;\"get\", \"action\"=&gt;\"index\", \"folder\"=&gt;\"some/path\"}</code></p>\n\n<p>Also this can be combined with POST request. I only want to filter them and only get them as hash.</p>\n\n<p>I execute this from inside of a controller. Rails 5 used.</p>\n"}, {"tags": ["ruby", "post", "scripting", "slack"], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 8104993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c832e0d59dbc2c816074e093c1bde336?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian Caffarelli", "link": "https://stackoverflow.com/users/8104993/adrian-caffarelli"}, "is_accepted": false, "score": 2, "last_activity_date": 1509455045, "creation_date": 1509455045, "answer_id": 47036180, "question_id": 47036179, "link": "https://stackoverflow.com/questions/47036179/slack-webhook-getting-the-request-could-not-be-satisfied-ruby/47036180#47036180", "title": "Slack webhook - Getting: &quot;The request could not be satisfied.&quot; - Ruby", "body": "<p>So the problem was that I didn't setting Net::http to use ssl.\nJust add this line:</p>\n\n<pre><code>http.use_ssl = true\n</code></pre>\n\n<p>and require 'openssl' at the beginning.</p>\n\n<p>So:</p>\n\n<pre><code>require 'net/http'        \nrequire 'uri'        \nrequire 'openssl'    \n\nuri =    \nURI.parse('https://hooks.slack.com/services/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')        \nhttp = Net::HTTP.new(uri.host, uri.port)\n\nhttp.use_ssl = true            \n\nheader = { 'Content-Type': 'application/json' }        \nparams = { text: 'Some text to post' }        \nrequest = Net::HTTP::Post.new(uri.request_uri, header)        \nrequest.body = params.to_json        \n\nhttp.request(request)\n</code></pre>\n\n<p>Hope that helps you!</p>\n"}], "owner": {"reputation": 51, "user_id": 8104993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c832e0d59dbc2c816074e093c1bde336?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian Caffarelli", "link": "https://stackoverflow.com/users/8104993/adrian-caffarelli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 889, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1509455045, "creation_date": 1509455045, "question_id": 47036179, "link": "https://stackoverflow.com/questions/47036179/slack-webhook-getting-the-request-could-not-be-satisfied-ruby", "title": "Slack webhook - Getting: &quot;The request could not be satisfied.&quot; - Ruby", "body": "<p>Im was trying to post a message in Slack through POST request.\nBut I was getting 400 Bad Request, The request could not be satisfied.</p>\n\n<p>My POST request was:</p>\n\n<pre><code>uri = URI.parse(\"https://hooks.slack.com/services/XXXYXXXYX/YYYXXXYYY/21slaajsajslkk212ks\")\nhttp = Net::HTTP.new(uri.host, uri.port)\n\nheader = { \"Content-Type\": \"application/json\" }\nparams = { text: changelog_diff }\nrequest = Net::HTTP::Post.new(uri.request_uri, header)\nrequest.body = params.to_json\n\nhttp.request(request)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1509456638, "post_id": 47035892, "comment_id": 81019601, "body": "You put <code>rails 5</code> in the title, and <code>rails 4</code> as a tag. Which is it? Please correct."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1509456915, "post_id": 47035892, "comment_id": 81019791, "body": "Is this in the context of a test? Is it possibly you&#39;re dealing with a stale object and are therefore seeing misleading data? Try: <code>@grant.reload.taxes_period_id</code>"}, {"owner": {"reputation": 87, "user_id": 8070825, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/69004026ff28a9a881b636c81ae38d82?s=128&d=identicon&r=PG&f=1", "display_name": "Mongoid", "link": "https://stackoverflow.com/users/8070825/mongoid"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1509459324, "post_id": 47035892, "comment_id": 81021509, "body": "@TomLord just corrected incorrect tagging. I can&#39;t reload because the update is failing, if I reload old object will reloaded. But here is an interesting fact is that I&#39;ve saved an object with <code>taxes_period_id=2</code> doing with <code>validate(false)</code> and when I pulled it in the <code>rails console</code> the <code>. taxes_period</code> comes back as nil even though <code>taxes_period_id</code> and <code>reload.taxes_period_id</code> comes back as 2"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1509463443, "post_id": 47035892, "comment_id": 81024403, "body": "Can you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? Have you defined a <code>taxes_period</code> method on the model? Are you stubbing something in the test? What does the whole test look like? Are there any <code>before_create</code> etc hooks that could be impacting things?"}, {"owner": {"reputation": 87, "user_id": 8070825, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/69004026ff28a9a881b636c81ae38d82?s=128&d=identicon&r=PG&f=1", "display_name": "Mongoid", "link": "https://stackoverflow.com/users/8070825/mongoid"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1509463537, "post_id": 47035892, "comment_id": 81024473, "body": "hi @TomLord yes I have it on my model defined like this <code>belongs_to :taxes_period, class_name: &#39;Period&#39;</code>, I also have presence validation for <code>taxes_period</code>. This is not only in the test, this is in the actual app, I am unable to update or save my objects because of this, not passing validation"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1509463806, "post_id": 47035892, "comment_id": 81024661, "body": "Please <a href=\"https://stackoverflow.com/posts/47035892/edit\">edit your question</a> and <b>show all the relevant code</b>. People reading this will not want to dig through the comments to find crucial bits of information."}], "answers": [{"tags": [], "owner": {"reputation": 87, "user_id": 8070825, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/69004026ff28a9a881b636c81ae38d82?s=128&d=identicon&r=PG&f=1", "display_name": "Mongoid", "link": "https://stackoverflow.com/users/8070825/mongoid"}, "is_accepted": true, "score": 0, "last_activity_date": 1509475688, "creation_date": 1509475688, "answer_id": 47042595, "question_id": 47035892, "link": "https://stackoverflow.com/questions/47035892/ruby-on-rails-5-validation-fails-with-belongs-to-with-relation-being-present/47042595#47042595", "title": "Ruby on rails 5 validation fails with belongs to with relation being present", "body": "<p>Long answer short, the relation name is incorrect, it should have been named :</p>\n\n<p><code>tax_period_id</code> instead of <code>taxes_period_id</code></p>\n\n<p>There wasn't anymore to that, I guess rails does enforce convention over configuration. Everything starts from proper naming I guess, was really a last resort that worked.</p>\n"}], "owner": {"reputation": 87, "user_id": 8070825, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/69004026ff28a9a881b636c81ae38d82?s=128&d=identicon&r=PG&f=1", "display_name": "Mongoid", "link": "https://stackoverflow.com/users/8070825/mongoid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 47042595, "answer_count": 1, "score": 0, "last_activity_date": 1509475688, "creation_date": 1509454210, "last_edit_date": 1509459162, "question_id": 47035892, "link": "https://stackoverflow.com/questions/47035892/ruby-on-rails-5-validation-fails-with-belongs-to-with-relation-being-present", "title": "Ruby on rails 5 validation fails with belongs to with relation being present", "body": "<p>I have 2 different associations to the same table, as defined like below in my model (Grant):</p>\n\n<pre><code>belongs_to :taxes_period, class_name: 'Period'\nbelongs_to :insurance_period, class_name: 'Period'\n</code></pre>\n\n<p>Period is a table that has values <code>Monthly</code>, <code>Quarterly</code>, <code>Yearly</code>. So in my grant form update or create, I get validation error on the back-end (<code>@grant.errors</code>) :</p>\n\n<pre><code> @details={:taxes_period=&gt;[{:error=&gt;:blank}]},\n @messages={:taxes_period=&gt;[\"must exist\"]}&gt;\n</code></pre>\n\n<p>But when I inspect the object for presence of <code>taxes_period_id</code>, it's in there, putting relevant debugging details:</p>\n\n<pre><code>@grant.taxes_period_id\n=&gt; 2\n[7] pry(#&lt;GrantsController&gt;)&gt; Period.find(@grant.taxes_period_id)\n  Period Load (1.0ms)  SELECT  \"periods\".* FROM \"periods\" WHERE \"periods\".\"id\" = $1 LIMIT $2  [[\"id\", 2], [\"LIMIT\", 1]]\n=&gt; #&lt;Period:0x007f8571220e18 id: 2, name: \"Monthly\"&gt;\n[8] pry(#&lt;GrantsController&gt;)&gt; @grant.valid?\n  Period Load (2.3ms)  SELECT  \"periods\".* FROM \"periods\" ORDER BY \"periods\".\"id\" ASC LIMIT $1  [[\"LIMIT\", 1]]\n  Period Load (0.6ms)  SELECT  \"periods\".* FROM \"periods\" WHERE \"periods\".\"id\" = $1 LIMIT $2  [[\"id\", 1], [\"LIMIT\", 1]]\n=&gt; false\n</code></pre>\n\n<p>Why am I unable to save this object? What is going on here?</p>\n"}, {"tags": ["arrays", "ruby", "hashmap"], "answers": [{"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1509455128, "post_id": 47035806, "comment_id": 81018498, "body": "I believe <code>to_a</code> is not needed here."}, {"owner": {"reputation": 42085, "user_id": 3444240, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/OjOru.jpg?s=128&g=1", "display_name": "potashin", "link": "https://stackoverflow.com/users/3444240/potashin"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1509456290, "post_id": 47035806, "comment_id": 81019363, "body": "@sagarpandya82: it is, because combination without a block returns an instance of <code>Enumerator</code> instead of an <code>Array</code> one"}], "tags": [], "owner": {"reputation": 42085, "user_id": 3444240, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/OjOru.jpg?s=128&g=1", "display_name": "potashin", "link": "https://stackoverflow.com/users/3444240/potashin"}, "is_accepted": true, "score": 6, "last_activity_date": 1509456009, "last_edit_date": 1509456009, "creation_date": 1509454003, "answer_id": 47035806, "question_id": 47035565, "link": "https://stackoverflow.com/questions/47035565/combine-array-items-uniquely-regarding-order-and-duplication/47035806#47035806", "title": "Combine array items uniquely regarding order and duplication", "body": "<p>You can use <a href=\"https://ruby-doc.org/core-2.4.1/Array.html#method-i-combination\" rel=\"nofollow noreferrer\"><code>combination</code></a> and <code>uniq</code> with <code>sort</code>:</p>\n\n<pre><code>a.combination(2).to_a.uniq(&amp;:sort)\n# =&gt; [[\"a\", \"b\"], [\"a\", \"a\"], [\"a\", \"f\"], [\"b\", \"f\"]]\n</code></pre>\n\n<h3><a href=\"https://repl.it/N5CJ\" rel=\"nofollow noreferrer\">Demonstration</a></h3>\n"}], "owner": {"reputation": 1690, "user_id": 4602919, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9c8081c1665f7277b43cf167af5ccf28?s=128&d=identicon&r=PG&f=1", "display_name": "Asara", "link": "https://stackoverflow.com/users/4602919/asara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 47035806, "answer_count": 1, "score": 2, "last_activity_date": 1509464934, "creation_date": 1509453264, "last_edit_date": 1509464934, "question_id": 47035565, "link": "https://stackoverflow.com/questions/47035565/combine-array-items-uniquely-regarding-order-and-duplication", "title": "Combine array items uniquely regarding order and duplication", "body": "<p>I have an array:</p>\n\n<pre><code>a = ['a', 'b', 'a', 'f']\n</code></pre>\n\n<p>and now want to get possible combinations of two, but the order of the letters is not important. So the result <strong>should be</strong>:</p>\n\n<pre><code>[['a', 'a'],['a', 'b'],['a', 'f'],['b', 'f']]\n</code></pre>\n\n<p>I tried </p>\n\n<pre><code>a.product(a)\n</code></pre>\n\n<p>But that of course returned ALL possible combinations, not regarding that the order is not important and that double results should be removed:</p>\n\n<pre><code>[[\"a\", \"a\"], [\"a\", \"b\"], [\"a\", \"a\"], [\"a\", \"f\"], [\"b\", \"a\"], [\"b\", \"b\"], [\"b\", \"a\"], [\"b\", \"f\"], [\"a\", \"a\"], [\"a\", \"b\"], [\"a\", \"a\"], [\"a\", \"f\"], [\"f\", \"a\"], [\"f\", \"b\"], [\"f\", \"a\"], [\"f\", \"f\"]]\n</code></pre>\n\n<p>I could solve these issues in loops, but I wonder if there is some ruby array/hash magic that could help me out.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 3015, "user_id": 1518336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/238d1c14366d5d0dd398b088c99f7b4c?s=128&d=identicon&r=PG", "display_name": "Daniel Westendorf", "link": "https://stackoverflow.com/users/1518336/daniel-westendorf"}, "is_accepted": false, "score": 1, "last_activity_date": 1509461061, "creation_date": 1509461061, "answer_id": 47038136, "question_id": 47035470, "link": "https://stackoverflow.com/questions/47035470/how-to-use-send-method-to-post-get-update-route/47038136#47038136", "title": "How to use send method to post, get, update route?", "body": "<p>The route api_cars_path is really a method which returns a string like <code>/api/cars</code>. So you need to invoke the route helper and then pass it to the get method as the first argument.</p>\n\n<pre><code>send(:get, send(:api_cars_path))\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 8532277, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1429855430429697/picture?type=large", "display_name": "gui12344455", "link": "https://stackoverflow.com/users/8532277/gui12344455"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1509461061, "creation_date": 1509453023, "question_id": 47035470, "link": "https://stackoverflow.com/questions/47035470/how-to-use-send-method-to-post-get-update-route", "title": "How to use send method to post, get, update route?", "body": "<p>I'm trying to DRY some request specs.\nI need to pass to a shared example the following params:</p>\n\n<pre><code>method, action, params\n</code></pre>\n\n<p>shared_example:</p>\n\n<pre><code>shared_context \"blah\" do |method, action, params|\n  let(:url_path) { send(\"api_cars_path\") }\nend\n</code></pre>\n\n<p>How can I execute a route with send using the method that is being passed as parameter ? Something like this:</p>\n\n<pre><code>send(:get, \"api_cars_path\")\n</code></pre>\n\n<p>So I can can pass :get, :post, etc dynamically.</p>\n"}, {"tags": ["ruby", "jekyll", "rvm"], "comments": [{"owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1509460378, "post_id": 47035080, "comment_id": 81022265, "body": "Try adding <code>ruby &#39;2.2.0&#39;</code> to your gemfile (replacing RUBY_VERSION with the actual version). Let me know what you get then when you try to <code>bundle install</code>"}, {"owner": {"reputation": 37699, "user_id": 1081396, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4da642ebb2987685f30442660dc6751e?s=128&d=identicon&r=PG", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/1081396/alvaro"}, "reply_to_user": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1509466361, "post_id": 47035080, "comment_id": 81026400, "body": "I did, now I get <code>Required ruby-2.2.0 is not installed.</code>, even though using <code>ruby -v</code> returns me: <code>ruby 2.0.0p648 (2015-12-16 revision 53162) [universal.x86_64-darwin15]</code>"}, {"owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1509466440, "post_id": 47035080, "comment_id": 81026450, "body": "<code>rvm use 2.2.0</code> now ruby version should be version should be set to that version"}, {"owner": {"reputation": 37699, "user_id": 1081396, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4da642ebb2987685f30442660dc6751e?s=128&d=identicon&r=PG", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/1081396/alvaro"}, "reply_to_user": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1509468101, "post_id": 47035080, "comment_id": 81027454, "body": "@Cyzanfar using <code>rvm use 2.2.0</code> returns <code>Required ruby-2.2.0 is not installed. To install do: &#39;rvm install &quot;ruby-2.2.0&quot;&#39;</code>"}, {"owner": {"reputation": 37699, "user_id": 1081396, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4da642ebb2987685f30442660dc6751e?s=128&d=identicon&r=PG", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/1081396/alvaro"}, "reply_to_user": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1509468214, "post_id": 47035080, "comment_id": 81027520, "body": "I added extra info in the question."}, {"owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1509468248, "post_id": 47035080, "comment_id": 81027547, "body": "ok one last try haha.<code>rvm install ruby-2.2.0</code> then <code>rvm --default use ruby-2.2.0</code> to set the default version."}], "answers": [{"comments": [{"owner": {"reputation": 37699, "user_id": 1081396, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4da642ebb2987685f30442660dc6751e?s=128&d=identicon&r=PG", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/1081396/alvaro"}, "edited": false, "score": 0, "creation_date": 1509466447, "post_id": 47039723, "comment_id": 81026455, "body": "I tried both. Removing it won&#39;t work as it says: <code>Now using system ruby. Could not determine which Ruby to use; . should contain .rvmrc or .versions.conf or .ruby-version or .rbfu-version or .rbenv-version, or an appropriate line in Gemfile. Run </code>rvm help` to see usage information`"}, {"owner": {"reputation": 37699, "user_id": 1081396, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4da642ebb2987685f30442660dc6751e?s=128&d=identicon&r=PG", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/1081396/alvaro"}, "edited": false, "score": 0, "creation_date": 1509466491, "post_id": 47039723, "comment_id": 81026485, "body": "And using a number such as &#39;ruby 2.0.0&#39; shows me: <code>Required ruby-2.2.0 is not installed. etc....</code> even though using <code>ruby -v</code> returns  <code>ruby 2.0.0p648 (2015-12-16 revision 53162) [universal.x86_64-darwin15]</code>"}, {"owner": {"reputation": 202, "user_id": 955972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c150a49c7709fa40bffca545ecf8942d?s=128&d=identicon&r=PG", "display_name": "Floppy", "link": "https://stackoverflow.com/users/955972/floppy"}, "reply_to_user": {"reputation": 37699, "user_id": 1081396, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4da642ebb2987685f30442660dc6751e?s=128&d=identicon&r=PG", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/1081396/alvaro"}, "edited": false, "score": 0, "creation_date": 1509466670, "post_id": 47039723, "comment_id": 81026591, "body": "A couple of things to try: <code>rvm --default use system</code> to make sure rvm has a good fallback, then try setting the full version string in the file, &#39;2.0.0p648&#39;."}, {"owner": {"reputation": 37699, "user_id": 1081396, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4da642ebb2987685f30442660dc6751e?s=128&d=identicon&r=PG", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/1081396/alvaro"}, "edited": false, "score": 0, "creation_date": 1509467936, "post_id": 47039723, "comment_id": 81027357, "body": "Both done, with  <code>rvm --default use system</code> I got the message &quot;Now using system ruby.&quot; twice. But nothing changed."}, {"owner": {"reputation": 37699, "user_id": 1081396, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4da642ebb2987685f30442660dc6751e?s=128&d=identicon&r=PG", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/1081396/alvaro"}, "edited": false, "score": 0, "creation_date": 1509468001, "post_id": 47039723, "comment_id": 81027396, "body": "Using the whole string <code>2.0.0p648</code> didn&#39;t change anything, still getting <code>Required ruby-2.0.0p648 is not installed. Could not determine which Ruby to use; . should contain .rvmrc or .versions.conf or .ruby-version or .rbfu-version or .rbenv-version, or an appropriate line in Gemfile.</code>"}, {"owner": {"reputation": 37699, "user_id": 1081396, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4da642ebb2987685f30442660dc6751e?s=128&d=identicon&r=PG", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/1081396/alvaro"}, "edited": false, "score": 0, "creation_date": 1509468019, "post_id": 47039723, "comment_id": 81027408, "body": "Maybe relevant to mention I also get this in yellow ? <code>RVM used your Gemfile for selecting Ruby, it is all fine - Heroku does that too, you can ignore these warnings with &#39;rvm rvmrc warning ignore .&#47;Gemfile&#39;. To ignore the warning for all files run &#39;rvm rvmrc warning ignore allGemfiles&#39;.</code>"}, {"owner": {"reputation": 202, "user_id": 955972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c150a49c7709fa40bffca545ecf8942d?s=128&d=identicon&r=PG", "display_name": "Floppy", "link": "https://stackoverflow.com/users/955972/floppy"}, "reply_to_user": {"reputation": 37699, "user_id": 1081396, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4da642ebb2987685f30442660dc6751e?s=128&d=identicon&r=PG", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/1081396/alvaro"}, "edited": false, "score": 0, "creation_date": 1509468085, "post_id": 47039723, "comment_id": 81027446, "body": "Maybe it&#39;s just not picking up the system ruby. Try <code>rvm install 2.4.2</code>, then use &quot;2.4.2&quot; in the gemfile, see if that helps."}, {"owner": {"reputation": 37699, "user_id": 1081396, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4da642ebb2987685f30442660dc6751e?s=128&d=identicon&r=PG", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/1081396/alvaro"}, "edited": false, "score": 0, "creation_date": 1509495630, "post_id": 47039723, "comment_id": 81040089, "body": "Thanks that last thing solved the issue! Now I get another one. I opened this new question for it: <a href=\"https://stackoverflow.com/q/47046419/1081396\">stackoverflow.com/q/47046419/1081396</a>"}], "tags": [], "owner": {"reputation": 202, "user_id": 955972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c150a49c7709fa40bffca545ecf8942d?s=128&d=identicon&r=PG", "display_name": "Floppy", "link": "https://stackoverflow.com/users/955972/floppy"}, "is_accepted": true, "score": 1, "last_activity_date": 1509465791, "creation_date": 1509465791, "answer_id": 47039723, "question_id": 47035080, "link": "https://stackoverflow.com/questions/47035080/unknown-ruby-interpreter-version-do-not-know-how-to-handle-ruby-version/47039723#47039723", "title": "Unknown ruby interpreter version (do not know how to handle): RUBY_VERSION", "body": "<p>RUBY_VERSION should be a specific version string, like '2.4.2' (with the quotes).</p>\n\n<p>However, if you don't particularly care which Ruby version you use, then you should be able to just remove the whole line and rvm will use the default.</p>\n"}], "owner": {"reputation": 37699, "user_id": 1081396, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4da642ebb2987685f30442660dc6751e?s=128&d=identicon&r=PG", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/1081396/alvaro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2274, "favorite_count": 0, "accepted_answer_id": 47039723, "answer_count": 1, "score": 1, "last_activity_date": 1509468250, "creation_date": 1509451794, "last_edit_date": 1509468250, "question_id": 47035080, "link": "https://stackoverflow.com/questions/47035080/unknown-ruby-interpreter-version-do-not-know-how-to-handle-ruby-version", "title": "Unknown ruby interpreter version (do not know how to handle): RUBY_VERSION", "body": "<p>Trying to <code>rvm use .</code> in order to follow the instructions <a href=\"https://github.com/rvm/rvm/issues/1860#issuecomment-17342047\" rel=\"nofollow noreferrer\">in here</a> in an attempt to fix my messed up configuration, I get the following message in console:</p>\n\n<blockquote>\n  <p>Unknown ruby interpreter version (do not know how to handle): RUBY_VERSION.\n  Could not determine which Ruby to use; . should contain .rvmrc or .versions.conf or .ruby-version or .rbfu-version or .rbenv-version, or an appropriate line in Gemfile.</p>\n</blockquote>\n\n<p>Which I guess refers to the variable RUBY_VERSION in the Gemfile:</p>\n\n<pre><code>source \"https://rubygems.org\" \nruby RUBY_VERSION\n</code></pre>\n\n<p>What should I do? I guess <code>RUBY_VERSION</code> variable has to be defined as a system variable ?</p>\n\n<p>I'm just trying to use Jekyll.</p>\n\n<h1>Extra info:</h1>\n\n<p>Now I have:</p>\n\n<ul>\n<li><code>gem -v</code> 2.6.14</li>\n<li><code>ruby -v</code> ruby 2.0.0p648 (2015-12-16 revision 53162) [universal.x86_64-darwin15]</li>\n<li><code>jekyll -v</code> fails with a very long error. </li>\n<li><code>bundle -v</code> Bundler version 1.14.4</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby", "model", "attributes"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1509450460, "post_id": 47034593, "comment_id": 81015389, "body": "You could instead have array or hash <code>seats</code>. It seems to be much more appropriate data structure here. But if you insist, look up documentation on <code>public_send</code>"}, {"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1509464074, "post_id": 47034593, "comment_id": 81024851, "body": "I agree with @SergioTulentsev. having a hardcoded seat number in the method is not the way to go."}], "answers": [{"tags": [], "owner": {"reputation": 635, "user_id": 7842011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbca165d2a40ba6819b02b6b956778e1?s=128&d=identicon&r=PG&f=1", "display_name": "jk_", "link": "https://stackoverflow.com/users/7842011/jk"}, "is_accepted": false, "score": 0, "last_activity_date": 1509450779, "creation_date": 1509450779, "answer_id": 47034757, "question_id": 47034593, "link": "https://stackoverflow.com/questions/47034593/ruby-rails-model-attribute/47034757#47034757", "title": "Ruby rails model attribute", "body": "<p><code>#send</code> is generally what to use when you want to call a method dynamically, specifying the name at runtime. In your case this could work: </p>\n\n<pre><code>def addplayer(seatno, playername)\n  send(\"Seat_#{seatno}=\", playername)\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2735, "user_id": 7006199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kFqCJ.jpg?s=128&g=1", "display_name": "Nimish Gupta", "link": "https://stackoverflow.com/users/7006199/nimish-gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1509453409, "creation_date": 1509453409, "answer_id": 47035618, "question_id": 47034593, "link": "https://stackoverflow.com/questions/47034593/ruby-rails-model-attribute/47035618#47035618", "title": "Ruby rails model attribute", "body": "<p>A good way is to use <code>write_attribute</code> method</p>\n\n<pre><code>def addplayer(seatno, playername)\n  write_attribute(\"Seat_#{ seatno }\", playername)\nend\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 8862064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/276a190456f720fc85484b7855387532?s=128&d=identicon&r=PG&f=1", "display_name": "Mhon", "link": "https://stackoverflow.com/users/8862064/mhon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1509453409, "creation_date": 1509450269, "last_edit_date": 1509450353, "question_id": 47034593, "link": "https://stackoverflow.com/questions/47034593/ruby-rails-model-attribute", "title": "Ruby rails model attribute", "body": "<p>I have a model table, with attributes Seat_1, Seat_2, Seat_3.</p>\n\n<p>I have a this method in the model: </p>\n\n<pre><code>def addplayer(seatno, playername)\n    case seatno.to_i\n    when 1\n      self.Seat_1 = playername.to_s\n    when 2\n      self.Seat_2 = playername\n    when 3\n      self.Seat_3 = playername\nend   \n</code></pre>\n\n<p>What I'd really like is to make this method something like this</p>\n\n<pre><code>def addplayer(seatno, playername)\n    self.Seat_\"#{seatno}\" = playername\nend\n</code></pre>\n\n<p>How can I write this, so the Seat_x is refering to the attribute - so I can avoid the 'case' way.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "activerecord", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1509450532, "post_id": 47034353, "comment_id": 81015433, "body": "is <code>client_id</code> set if you create a custom validation (i.e. <code>validate</code>)?"}, {"owner": {"reputation": 9806, "user_id": 382982, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/9ZaxF.jpg?s=128&g=1", "display_name": "pdoherty926", "link": "https://stackoverflow.com/users/382982/pdoherty926"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1509450869, "post_id": 47034353, "comment_id": 81015641, "body": "@Kris No. Related, if I add <code>client_id</code> presence validation, <code>client.save</code> will fail because (of course) <code>client_id</code> doesn&#39;t exist yet."}], "answers": [{"tags": [], "owner": {"reputation": 863, "user_id": 934876, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/60f5a73972bce656c8d4daf75cf8c96b?s=128&d=identicon&r=PG", "display_name": "AndrewSwerlick", "link": "https://stackoverflow.com/users/934876/andrewswerlick"}, "is_accepted": true, "score": 1, "last_activity_date": 1513390984, "creation_date": 1513390984, "answer_id": 47841984, "question_id": 47034353, "link": "https://stackoverflow.com/questions/47034353/prevent-duplicate-has-many-records-in-rails-5/47841984#47841984", "title": "Prevent duplicate has_many records in Rails 5", "body": "<p>There's not a super clean way to do this with AR validations when you're batch inserting, but you can do it manually with the following steps.</p>\n\n<ol>\n<li>Make a single query to the database using a Postgresql VALUES list to load any potentially duplicate records.</li>\n<li>Compare the records you are about to batch create and pull out any duplicates</li>\n<li>Manually generate and return your error message </li>\n</ol>\n\n<p>Step 1 looks a little like this </p>\n\n<pre><code># Build array of uniq attribute pairs we want to check for\nuniq_attrs = new_collection.map do |record|\n  [\n    record.day,\n    record.client_id,\n  ]\nend\n\n# santize the values and create a tuple like ('Monday', 5)\nvalues = uniq_attrs.map do |attrs|\n  safe = attrs.map {|v| ActiveRecord::Base.connection.quote(v)}\n  \"( #{safe.join(\",\")} )\"\nend\n\nexisting = Preference.where(%{\n    (day, client_id) in\n    (#{values.join(\",\")})\n })\n\n# SQL Looks like \n# select * from preferences where (day, client_id) in (('Monday',5), ('Tuesday', 3) ....)\n</code></pre>\n\n<p>Then you can take the collection <code>existing</code> and use it in steps 2 and 3 to pull out your duplicates and generate your error messages.</p>\n\n<p>When I've needed this functionality, I've generally made it a self method off my class, so something like </p>\n\n<pre><code>class Preference &lt; ApplicationRecord\n\n  def self.filter_duplicates(collection)\n    # blah blah blah from above\n\n    non_duplicates = collection.reject do |record|\n      existing.find do |exist|\n        exist.duplicate?(record)\n      end\n    end\n\n    [non_duplicates, existing]\n\n  end\n\n  def duplicate?(record)\n    record.day == self.day &amp;&amp; \n    record.client_id = self.client_id\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 9806, "user_id": 382982, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/9ZaxF.jpg?s=128&g=1", "display_name": "pdoherty926", "link": "https://stackoverflow.com/users/382982/pdoherty926"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 447, "favorite_count": 0, "accepted_answer_id": 47841984, "answer_count": 1, "score": 1, "last_activity_date": 1513390984, "creation_date": 1509449549, "last_edit_date": 1509450219, "question_id": 47034353, "link": "https://stackoverflow.com/questions/47034353/prevent-duplicate-has-many-records-in-rails-5", "title": "Prevent duplicate has_many records in Rails 5", "body": "<p>Given the following models:</p>\n\n<pre><code>class Client &lt; ApplicationRecord\n  has_many :preferences\n  validates_associated :preferences\n  accepts_nested_attributes_for :preferences\nend\n\nclass Preference &lt; ApplicationRecord\n  belongs_to :client\n  validates_uniqueness_of :block, scope: [:day, :client_id]\nend\n</code></pre>\n\n<p>I'm still able to create preferences with duplicate days* when creating a batch of preferences during client creation. This is (seemingly) because the client_id foreign key isn't available when the <code>validates_uniqueness_of</code> validation is run. (*I have an index in place which prevents the duplicate from being saved, but I'd like to catch the error, and return a user friendly error message, before it hits the database.)</p>\n\n<p>Is there any way to prevent this from happening via ActiveRecord validations?</p>\n\n<p>EDIT: <a href=\"https://github.com/rails/rails/issues/1572\" rel=\"nofollow noreferrer\">This appears to be a known issue</a>.</p>\n"}, {"tags": ["ruby", "chef-infra"], "answers": [{"comments": [{"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1509460199, "post_id": 47037331, "comment_id": 81022144, "body": "/opt/chef-server is the path for the open source chef-server 11, chef-server 12 is under /opt/opscode. And that doesn&#39;t tell you which server is really running."}, {"owner": {"reputation": 1469, "user_id": 7869690, "user_type": "registered", "profile_image": "https://graph.facebook.com/1512557412087773/picture?type=large", "display_name": "Bryce McDonald", "link": "https://stackoverflow.com/users/7869690/bryce-mcdonald"}, "reply_to_user": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 1, "creation_date": 1509461162, "post_id": 47037331, "comment_id": 81022832, "body": "Either way, the first line of the file gives you the version number, does it not?  If you try <code>head -n 1 &#47;opt&#47;opscode&#47;version-manifest.txt</code> you should receive something similar to <code>chef-server 12.0.0</code>"}, {"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1509461308, "post_id": 47037331, "comment_id": 81022938, "body": "Yes, but during a migration, until you asked chef12 to clean up chef 11 both path are there. After running <code>chef-server-ctl cleanup</code> that would be less a problem."}], "tags": [], "owner": {"reputation": 1469, "user_id": 7869690, "user_type": "registered", "profile_image": "https://graph.facebook.com/1512557412087773/picture?type=large", "display_name": "Bryce McDonald", "link": "https://stackoverflow.com/users/7869690/bryce-mcdonald"}, "is_accepted": false, "score": 0, "last_activity_date": 1509458675, "creation_date": 1509458675, "answer_id": 47037331, "question_id": 47033687, "link": "https://stackoverflow.com/questions/47033687/how-can-i-find-chef-server-version-after-upgrading-the-server/47037331#47037331", "title": "How can i find chef server version after upgrading the server?", "body": "<p>In your chef installation directory, you should be able to find a \"version-manifest.txt\" which will tell you the version.</p>\n\n<p>I believe by default in Ubuntu it is located in: <code>/opt/chef-server/version-manifest.txt</code></p>\n"}], "owner": {"reputation": 41, "user_id": 5575691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2123ff751ac6fd8baeac52f5be7a65a8?s=128&d=identicon&r=PG&f=1", "display_name": "Coder", "link": "https://stackoverflow.com/users/5575691/coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 490, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1509458675, "creation_date": 1509447426, "question_id": 47033687, "link": "https://stackoverflow.com/questions/47033687/how-can-i-find-chef-server-version-after-upgrading-the-server", "title": "How can i find chef server version after upgrading the server?", "body": "<p>I have upgraded chef server from 11 to 12 opensource, Now i want to know how i can find chef server version if it is running old 11 or new 12. I tried \"chef-server-ctl version\" but didn't help me. Please help me with it.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1509446705, "post_id": 47033394, "comment_id": 81013158, "body": "Or <code>self.params</code>"}, {"owner": {"reputation": 814, "user_id": 3731571, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6968a0b37e3587e194da1a1418f53d43?s=128&d=identicon&r=PG", "display_name": "alexb", "link": "https://stackoverflow.com/users/3731571/alexb"}, "edited": false, "score": 0, "creation_date": 1509447103, "post_id": 47033394, "comment_id": 81013407, "body": "Thanks! I didn&#39;t know that Ruby has variable hoisting. So the question is not relevant to Rails at all..."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 814, "user_id": 3731571, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6968a0b37e3587e194da1a1418f53d43?s=128&d=identicon&r=PG", "display_name": "alexb", "link": "https://stackoverflow.com/users/3731571/alexb"}, "edited": false, "score": 0, "creation_date": 1509447654, "post_id": 47033394, "comment_id": 81013722, "body": "@Sandrik: the variable is not hoisted. Unlike ECMAScript, for example, it does <i>not</i> exist before it is defined. It <i>is</i>, however, defined at <i>parse time</i>, not at runtime. This is explained better and in much more detail in several of the dozens of duplicates of this question (which is one of the reasons why duplicate questions shouldn&#39;t be answered (or even better yet, shouldn&#39;t be asked in the first place) but instead be closed so that the knowledge doesn&#39;t end up fragmented all over the site)."}, {"owner": {"reputation": 814, "user_id": 3731571, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6968a0b37e3587e194da1a1418f53d43?s=128&d=identicon&r=PG", "display_name": "alexb", "link": "https://stackoverflow.com/users/3731571/alexb"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1509452231, "post_id": 47033394, "comment_id": 81016555, "body": "@J&#246;rgWMittag got it, if it was hoisted, the output would be <code>nil</code> in both cases. As for your (very reasonable btw) remark, I did try to find duplicates, but I couldn&#39;t find any because I didn&#39;t know what the actual problem was. It&#39;s the same reason why I couldn&#39;t find help in google."}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 2, "last_activity_date": 1509447647, "last_edit_date": 1509447647, "creation_date": 1509446614, "answer_id": 47033394, "question_id": 47033241, "link": "https://stackoverflow.com/questions/47033241/params-assignment-in-dead-branch-leads-to-params-being-nil-in-rails/47033394#47033394", "title": "Params assignment in dead branch leads to params being nil in Rails", "body": "<p>Because you introduce <code>params</code> local variable (even though you don't initialize it), which has identical name to <code>params</code> method. If you refer to params as <code>params()</code> or <code>self.params</code> (to tell Ruby interpreter that you're refering to method, not variable), you will see your <code>ActionController::Parameters</code> in both cases. </p>\n"}], "owner": {"reputation": 814, "user_id": 3731571, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6968a0b37e3587e194da1a1418f53d43?s=128&d=identicon&r=PG", "display_name": "alexb", "link": "https://stackoverflow.com/users/3731571/alexb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "closed_date": 1509455537, "accepted_answer_id": 47033394, "answer_count": 1, "score": 0, "last_activity_date": 1509447647, "creation_date": 1509446198, "question_id": 47033241, "link": "https://stackoverflow.com/questions/47033241/params-assignment-in-dead-branch-leads-to-params-being-nil-in-rails", "closed_reason": "Duplicate", "title": "Params assignment in dead branch leads to params being nil in Rails", "body": "<p>This is a before_action in a controller:</p>\n\n<pre><code>def map_params\n  Rails.logger.error \"[before] #{params.inspect}\"\n  if false\n    params = { :hi =&gt; :there }\n  end\n  Rails.logger.error \"[after] #{params.inspect}\"\nend\n</code></pre>\n\n<p>This is an output:</p>\n\n<pre><code>[before] &lt;ActionController::Parameters ...&gt;\n[after] nil\n</code></pre>\n\n<p>Interestrngly enough, if I comment out the params assignment it will behave differently:</p>\n\n<pre><code>[before] &lt;ActionController::Parameters ...&gt;\n[after] &lt;ActionController::Parameters ...&gt;\n</code></pre>\n\n<p>Why is it happening?</p>\n"}, {"tags": ["arrays", "ruby", "parsing", "hash"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 2, "creation_date": 1509445499, "post_id": 47032910, "comment_id": 81012416, "body": "Your code is bad because you&#39;re using some crazy combination of arrays and strings to represent a complex data type! Define a class for your data, and use proper objects instead."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1509447519, "post_id": 47032910, "comment_id": 81013635, "body": "<i>&quot;I need to join the elements ... in the following form&quot;</i> \u2013 okay, but what are the rules?"}, {"owner": {"reputation": 63, "user_id": 7160598, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/436456193df6d6abf5e7becc05a94c42?s=128&d=identicon&r=PG&f=1", "display_name": "Misha1991", "link": "https://stackoverflow.com/users/7160598/misha1991"}, "edited": false, "score": 0, "creation_date": 1509448090, "post_id": 47032910, "comment_id": 81013968, "body": "I want to get a few blocks whicj be sorted of block number and position number. The serial number of block is defined by the second digit. The position in the block is determined by the first character.  For example  &quot;32o&quot; element. 3 - it&#39;s position number 2 - it&#39;s block number  o - random text"}], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 3, "last_activity_date": 1509473296, "last_edit_date": 1509473296, "creation_date": 1509445508, "answer_id": 47033014, "question_id": 47032910, "link": "https://stackoverflow.com/questions/47032910/ordered-array-connection-in-ruby/47033014#47033014", "title": "Ordered array connection in Ruby", "body": "<p>Try this one</p>\n\n<pre><code>[*arr1, *arr2, *arr3].sort_by { |item| [item[1], item[-1], item[0]]  }\n[\n    [ 0] \"11a\",\n    [ 1] \"21g\",\n    [ 2] \"31m\",\n    [ 3] \"31n\",\n    [ 4] \"12b\",\n    [ 5] \"22h\",\n    [ 6] \"32o\",\n    [ 7] \"32p\",\n    [ 8] \"13c\",\n    [ 9] \"23i\",\n    [10] \"33q\",\n    [11] \"14d\",\n    [12] \"24j\",\n    [13] \"34r\",\n    [14] \"15e\",\n    [15] \"25k\",\n    [16] \"35s\",\n    [17] \"16f\",\n    [18] \"26l\",\n    [19] \"36t\",\n    [20] \"36u\"\n]\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 7160598, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/436456193df6d6abf5e7becc05a94c42?s=128&d=identicon&r=PG&f=1", "display_name": "Misha1991", "link": "https://stackoverflow.com/users/7160598/misha1991"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1509473296, "creation_date": 1509445201, "question_id": 47032910, "link": "https://stackoverflow.com/questions/47032910/ordered-array-connection-in-ruby", "title": "Ordered array connection in Ruby", "body": "<p>I have 3 arrays of the following form:</p>\n\n<pre><code>arr1 = [11a,12b,13c,14d,15e,16f]\narr2 = [21g,22h,23i,24j,25k,26l]\narr3 = [31m,31n,32o,32p,33q,34r,35s,36t,36u]\n</code></pre>\n\n<p>You can notice that the first digit in the element number indicates the array number. The second digit is the identifier of the element in the array.</p>\n\n<p>I need to join the elements of these arrays in the following form:</p>\n\n<pre><code>11a\n21g\n31m\n31n\n12b\n22h\n32o\n32p\n13c\n23i\n33q\n14d\n24j\n34r\n15e\n25k\n35s\n16f\n26l\n36t\n36u\n</code></pre>\n\n<p>I'm trying to organize the data by connecting them to one array. I do it this way:</p>\n\n<pre><code>res_array=[]\nlast_element = res3.index(res3.last)\ni=-1\nloop do\ni+=1\nres_array&lt;&lt;arr1[i]\nres_array&lt;&lt;arr2[i]\nres_array&lt;&lt;arr3[i]\nbreak if i &gt;= last_element\nend\n</code></pre>\n\n<p>My decision is bad because that I get the data in the wrong form:</p>\n\n<pre><code>11a\n21g\n31m # wrong. lacking 31n\n12b\n22h\n31n # is incorrect. here should be 32o and 32p\n13c\n23i\n32o\n14d\n24j\n32p # is incorrect. there should be 34r\n15e\n25k\n33q # wrong. here should be 35s\n16f\n26l\n34r # wrong. here should be 36t and 36u\n35s\n36t\n36u\n</code></pre>\n\n<p>My code is bad because the elements that start at 3 are not written to the correct blocks. </p>\n\n<p>I think that I need to create an additional loop that will perform res_array &lt;&lt; arr3 [i] for elements whose serial number is less than or equal to the sequence number of the previous block.</p>\n"}, {"tags": ["ruby", "amazon-web-services", "curl", "amazon-s3", "pre-signed-url"], "comments": [{"owner": {"reputation": 138098, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 0, "creation_date": 1509490117, "post_id": 47032125, "comment_id": 81038612, "body": "This sounds like you have connectivity issues... packet loss.  Are you running these tests from inside EC2 or elsewhere on the Internet?"}, {"owner": {"reputation": 41740, "user_id": 12037, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3f719a88bc46c61695a03e624ab5564c?s=128&d=identicon&r=PG", "display_name": "Codebeef", "link": "https://stackoverflow.com/users/12037/codebeef"}, "reply_to_user": {"reputation": 138098, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 0, "creation_date": 1509493739, "post_id": 47032125, "comment_id": 81039601, "body": "Elsewhere, though no connection issues for anything else."}, {"owner": {"reputation": 41740, "user_id": 12037, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3f719a88bc46c61695a03e624ab5564c?s=128&d=identicon&r=PG", "display_name": "Codebeef", "link": "https://stackoverflow.com/users/12037/codebeef"}, "reply_to_user": {"reputation": 138098, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 0, "creation_date": 1509538331, "post_id": 47032125, "comment_id": 81055920, "body": "I&#39;ve tested this from several geographic locations, and found the same problem"}, {"owner": {"reputation": 15161, "user_id": 1067003, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e3af2bd4b5604b0b661b5e6646544eba?s=128&d=identicon&r=PG", "display_name": "hanshenrik", "link": "https://stackoverflow.com/users/1067003/hanshenrik"}, "edited": false, "score": 0, "creation_date": 1509624960, "post_id": 47032125, "comment_id": 81098322, "body": "its a server problem, not related to any of the code you&#39;ve shown here. could be your actual server, could be a proxy, but somewhere there is a max size or max upload time or max connection time rule being violated. can you reproduce it  running <code>echo ok&gt;ok.txt; php -S 0.0.0.0:9999 ok.txt</code> on the server and <code>curl -v -T testfile url:9999</code> on the client? also i think its a case for serverfault.com , not stackoverflow.com"}, {"owner": {"reputation": 41740, "user_id": 12037, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3f719a88bc46c61695a03e624ab5564c?s=128&d=identicon&r=PG", "display_name": "Codebeef", "link": "https://stackoverflow.com/users/12037/codebeef"}, "reply_to_user": {"reputation": 15161, "user_id": 1067003, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e3af2bd4b5604b0b661b5e6646544eba?s=128&d=identicon&r=PG", "display_name": "hanshenrik", "link": "https://stackoverflow.com/users/1067003/hanshenrik"}, "edited": false, "score": 0, "creation_date": 1509625845, "post_id": 47032125, "comment_id": 81098966, "body": "@hanshenrik the upload goes directly to s3 from the browser / client / curl. No intermediate server is involved."}, {"owner": {"reputation": 15161, "user_id": 1067003, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e3af2bd4b5604b0b661b5e6646544eba?s=128&d=identicon&r=PG", "display_name": "hanshenrik", "link": "https://stackoverflow.com/users/1067003/hanshenrik"}, "edited": false, "score": 0, "creation_date": 1509627273, "post_id": 47032125, "comment_id": 81100003, "body": "contact the server admins (i guess this means going through s3 customer support?), im pretty sure its their fault"}, {"owner": {"reputation": 41740, "user_id": 12037, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3f719a88bc46c61695a03e624ab5564c?s=128&d=identicon&r=PG", "display_name": "Codebeef", "link": "https://stackoverflow.com/users/12037/codebeef"}, "edited": false, "score": 0, "creation_date": 1509627513, "post_id": 47032125, "comment_id": 81100161, "body": "Yeah, unfortunately, that&#39;s a paid service. This problem seems too broad to be unique to this situation, so asking here first if anyone else has experienced it"}, {"owner": {"reputation": 1304, "user_id": 4468480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/130659ac1924b37be6965ccaa4532d93?s=128&d=identicon&r=PG&f=1", "display_name": "Payman", "link": "https://stackoverflow.com/users/4468480/payman"}, "edited": false, "score": 0, "creation_date": 1509820253, "post_id": 47032125, "comment_id": 81178061, "body": "It can&#39;t be S3. I use boto3 to get a pre-signed URL and upload very large zip files to S3 using Javascript with no problem. Maybe you want to try using boto or the cli to verify the problem is not with the SDK. Also have you tried specifying the range for your upload using <code>content-length-range</code>?"}, {"owner": {"reputation": 1541, "user_id": 2232135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7swMf.png?s=128&g=1", "display_name": "smcstewart", "link": "https://stackoverflow.com/users/2232135/smcstewart"}, "edited": false, "score": 0, "creation_date": 1510087138, "post_id": 47032125, "comment_id": 81283879, "body": "S3 will send this error when it does not receive data from the client for 20 seconds. Does using curl with retries resolve the issue? Multi-part upload? Some people have reported similar issues which are resolved with sending headers before the payload using the <code>100-continue</code> <code>Expect</code> header <a href=\"http://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectPUT.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectPUT.html</a>. Otherwise, it doesn&#39;t appear you&#39;re hitting any S3 limits."}], "owner": {"reputation": 41740, "user_id": 12037, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3f719a88bc46c61695a03e624ab5564c?s=128&d=identicon&r=PG", "display_name": "Codebeef", "link": "https://stackoverflow.com/users/12037/codebeef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 706, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1511555559, "creation_date": 1509442767, "question_id": 47032125, "link": "https://stackoverflow.com/questions/47032125/getting-requesttimeout-from-s3-when-uploading-to-a-presigned-url", "title": "Getting RequestTimeout from S3 when uploading to a presigned URL", "body": "<p>For small files, say &lt; 5Mb, uploading to S3 via a presigned URL is working fine. When I try to upload anything larger than this then, I seem to get <code>400 Bad Request</code> responses from S3 with <code>RequestTimeout</code> as the error.</p>\n\n<p>I'm able to recreate this using curl:</p>\n\n<pre><code># Create a test file:\nmkfile -n 20m ./testfile\n\n# Get the presigned URL\ncurl -XPOST http://localhost:3000/uploads -d \"filename=testdata\"\n\n# Upload to S3\ncurl -H \"Content-Type: binary/octet-stream\" -XPUT -vvv -T testfile \"&lt;Presigned URL&gt;\"\n</code></pre>\n\n<p>Signing code looks like this:</p>\n\n<pre><code>@presigned_url ||= Aws::S3::Presigner.new.presigned_url(\n  :put_object,\n  bucket: ENV['AWS_BUCKET'],\n  key: key,\n  acl: 'private',\n  expires_in: 3600,\n  content_type: 'binary/octet-stream'\n)\n</code></pre>\n\n<p>Note that this all works fine for files &lt; 5Mb, with more frequent failures occurring as the file size increases. Has anyone seen these issues and resolved them?</p>\n"}, {"tags": ["ruby", "rails-console", "pry"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1509443255, "post_id": 47032104, "comment_id": 81010953, "body": "As pointed out below, it&#39;s likely a whitespace issue with your code. Otherwise, the code looks fine."}, {"owner": {"reputation": 39, "user_id": 5160696, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HdmLvfvX3-c/AAAAAAAAAAI/AAAAAAAAAN0/ddfsUEyFvWI/photo.jpg?sz=128", "display_name": "Okan Binli", "link": "https://stackoverflow.com/users/5160696/okan-binli"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1509446255, "post_id": 47032104, "comment_id": 81012868, "body": "Thanks, I figured it out now."}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1509442924, "post_id": 47032140, "comment_id": 81010753, "body": "&quot;<code>user_order</code> not <code>user_order</code>&quot; - wat? these are the same, no?"}, {"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 2, "creation_date": 1509442947, "post_id": 47032140, "comment_id": 81010765, "body": "SO strips whitespace it views as un-necessary. Took me a minute to see as well, but if you look at the original error message things become more obvious when you&#39;re looking for a leading whitespace char in the variable name"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1509442993, "post_id": 47032140, "comment_id": 81010800, "body": "@SimpleLime: ah, indeed. Yes, must be some unusual unicode whitespace in the source code."}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1509443401, "post_id": 47032140, "comment_id": 81011035, "body": "@SergioTulentsev : In such cases, it helps looking at the code with a hex editor. This helps to identify the culprit."}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 2, "last_activity_date": 1509443004, "last_edit_date": 1509443004, "creation_date": 1509442804, "answer_id": 47032140, "question_id": 47032104, "link": "https://stackoverflow.com/questions/47032104/ruby-block-variable-not-defined-error-in-one-line-but-works-on-do-end-block/47032140#47032140", "title": "Ruby Block Variable not defined error in one line, but works on do..end block", "body": "<p>The problem is you have an additional \"non-breaking space\" between the pipe and <code>user_order</code>, that's why the message says:</p>\n\n<blockquote>\n  <p>NameError: undefined local variable or method ` user_order' for\n  main:Object</p>\n</blockquote>\n\n<p>Your actual variable is \" user_order\" not \"user_order\".</p>\n\n<p>This commonly happens when pressing <kbd>alt</kbd> and <kbd>space</kbd> at the same time (on OSX), that's common when opening curly braces for \"inline\" blocks in Ruby.</p>\n"}], "owner": {"reputation": 39, "user_id": 5160696, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HdmLvfvX3-c/AAAAAAAAAAI/AAAAAAAAAN0/ddfsUEyFvWI/photo.jpg?sz=128", "display_name": "Okan Binli", "link": "https://stackoverflow.com/users/5160696/okan-binli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 47032140, "answer_count": 1, "score": 0, "last_activity_date": 1509443004, "creation_date": 1509442705, "question_id": 47032104, "link": "https://stackoverflow.com/questions/47032104/ruby-block-variable-not-defined-error-in-one-line-but-works-on-do-end-block", "title": "Ruby Block Variable not defined error in one line, but works on do..end block", "body": "<p>I don't know how to explain this more, I'm open to suggestions.</p>\n\n<p>Here is an example:</p>\n\n<pre><code>User.last.orders.detect { |user_order|\u00a0user_order.query.id == 107 }\n</code></pre>\n\n<p>This doesn't work;</p>\n\n<pre><code>NameError: undefined local variable or method `\u00a0user_order' for main:Object\nfrom (pry):51:in `block in &lt;main&gt;'\n</code></pre>\n\n<p>But this works:</p>\n\n<pre><code>User.last.orders.detect do |user_order|\n  user_order.query.id == 107\nend\n</code></pre>\n\n<p>This is just a simple example. I really don't understand why this happens. Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 8717, "user_id": 6413377, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/J4tD1.png?s=128&g=1", "display_name": "pirho", "link": "https://stackoverflow.com/users/6413377/pirho"}, "edited": false, "score": 3, "creation_date": 1509440079, "post_id": 47031262, "comment_id": 81008986, "body": "Please try to edit a better title it tells quite little about your problem."}], "answers": [{"comments": [{"owner": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "edited": false, "score": 0, "creation_date": 1509440605, "post_id": 47031343, "comment_id": 81009269, "body": "you also need to provide pagination"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 33, "user_id": 4489206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wvrMH.jpg?s=128&g=1", "display_name": "Jedidiah", "link": "https://stackoverflow.com/users/4489206/jedidiah"}, "edited": false, "score": 0, "creation_date": 1509440794, "post_id": 47031343, "comment_id": 81009406, "body": "@Jedidiah: I updated my answer to joins <code>comparison_price</code> (singular) because you have a <code>has_one</code> relationship. Please note that the SQL query still needs the plural tables name."}, {"owner": {"reputation": 33, "user_id": 4489206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wvrMH.jpg?s=128&g=1", "display_name": "Jedidiah", "link": "https://stackoverflow.com/users/4489206/jedidiah"}, "edited": false, "score": 0, "creation_date": 1509441217, "post_id": 47031343, "comment_id": 81009682, "body": "Thanks @spickermann one last querstion is this one achievable too?  SELECT   * FROM   tires JOIN   comparison_prices USING   (id) WHERE (   (comparison_prices.simple_tire_price &lt; tires.web_price AND comparison_prices.simple_tire_price &gt;= tires.web_price - 5) OR   (comparison_prices.walmart_price &lt; tires.web_price AND comparison_prices.walmart_price &gt;= tires.web_price - 5) )"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 33, "user_id": 4489206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wvrMH.jpg?s=128&g=1", "display_name": "Jedidiah", "link": "https://stackoverflow.com/users/4489206/jedidiah"}, "edited": false, "score": 0, "creation_date": 1509466549, "post_id": 47031343, "comment_id": 81026526, "body": "@Jedidiah Sure, just pass strings to <code>joins</code> and <code>where</code>: <code>Tire.joins(&quot;comparison_prices USING (id)&quot;).where(&quot;WHERE ( (comparison_prices.simple_tire_price &lt; tires.web_price AND comparison_prices.simple_tire_price &gt;= tires.web_price - 5) OR (comparison_prices.walmart_price &lt; tires.web_price AND comparison_prices.walmart_price &gt;= tires.web_price - 5)&quot;)</code>"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 0, "last_activity_date": 1509440717, "last_edit_date": 1509440717, "creation_date": 1509440139, "answer_id": 47031343, "question_id": 47031262, "link": "https://stackoverflow.com/questions/47031262/how-can-i-do-something-like-this-on-rails-active-record/47031343#47031343", "title": "How can I do something like this? on rails active record", "body": "<p>Because your <code>Tire</code> model <code>has_one :comparison_price</code> you can just write:</p>\n\n<pre><code>@tires = Tire.joins(:comparison_price)\n             .where('comparison_prices.simple_tire_price &lt; tires.web_price')\n             .where('comparison_prices.simple_tire_price &gt;= tires.web_price - 5')\n             .paginate(page: params[:page], per_page: 10).order(:id)\n</code></pre>\n\n<p>Or: </p>\n\n<pre><code>@tires = Tire.joins(:comparison_price)\n             .where('comparison_prices.simple_tire_price BETWEEN tires.web_price - 5 AND tires.web_price')\n             .paginate(page: params[:page], per_page: 10).order(:id)\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 4489206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wvrMH.jpg?s=128&g=1", "display_name": "Jedidiah", "link": "https://stackoverflow.com/users/4489206/jedidiah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 47031343, "answer_count": 1, "score": -1, "last_activity_date": 1509440883, "creation_date": 1509439926, "last_edit_date": 1509440883, "question_id": 47031262, "link": "https://stackoverflow.com/questions/47031262/how-can-i-do-something-like-this-on-rails-active-record", "title": "How can I do something like this? on rails active record", "body": "<p>I want to achieve something like this in rails active record.</p>\n\n<pre><code>SELECT * \nFROM tires \nJOIN comparison_prices \nWHERE comparison_prices.simple_tire_price &lt; tires.web_price \n  AND comparison_prices.simple_tire_price &gt;= tires.web_price - 5\n</code></pre>\n\n<p>Currently I have something like this:</p>\n\n<pre><code>@tires = Tire.all\n@tires = @tires.joins(:comparison_price).where('tires.web_price &gt; 0')\n@tires = @tires.paginate(page: params[:page], per_page: 10).order(:id)\n</code></pre>\n"}, {"tags": ["ruby", "azure", "oauth", "oauth-2.0", "azure-active-directory"], "answers": [{"comments": [{"owner": {"reputation": 248, "user_id": 4741035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c64b21801c30f0d34766d00cf659a85f?s=128&d=identicon&r=PG&f=1", "display_name": "rochitsen", "link": "https://stackoverflow.com/users/4741035/rochitsen"}, "edited": false, "score": 0, "creation_date": 1509611116, "post_id": 47047522, "comment_id": 81089185, "body": "thanks for the response. I am trying to use the Ruby ADAL library from microsoft. It seems like the oauth2 gem is not updated and hence it is creating the incorrect authorize endpoint. I will update how things went with ADAL library"}], "tags": [], "owner": {"reputation": 13359, "user_id": 5752362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fHSfj.jpg?s=128&g=1", "display_name": "Fei Xue - MSFT", "link": "https://stackoverflow.com/users/5752362/fei-xue-msft"}, "is_accepted": false, "score": 0, "last_activity_date": 1509504779, "creation_date": 1509504779, "answer_id": 47047522, "question_id": 47028888, "link": "https://stackoverflow.com/questions/47028888/issues-in-ruby-script-using-oauth2-to-access-api-hosted-on-azure-ad/47047522#47047522", "title": "Issues in Ruby script using oauth2 to access API hosted on Azure AD", "body": "<blockquote>\n  <p>1.What I don\u2019t understand is what is the 'authorization_code_value' parameter in the token request?</p>\n</blockquote>\n\n<p>This parameter is used in the <a href=\"https://docs.microsoft.com/en-us/azure/active-directory/develop/active-directory-protocols-oauth-code\" rel=\"nofollow noreferrer\">code grant flow</a>. This flow is used for web app or the native client for mobile. please ensure that you were using this flow if you want to use this parameter.</p>\n\n<blockquote>\n  <p>The headers options hash says 'Authorization'=>'Basic some password'. What would this be for and what to put here</p>\n</blockquote>\n\n<p>The OAuth 2.0 required to send the token with the format like <code>Authorization: bearer {access_token}</code>. More detail, you can refer the link below:</p>\n\n<p><a href=\"https://docs.microsoft.com/en-us/azure/active-directory/develop/active-directory-protocols-oauth-code#use-the-access-token-to-access-the-resource\" rel=\"nofollow noreferrer\">Use the access token to access the resource</a></p>\n\n<blockquote>\n  <p>Another thing I noticed is that the gem when creating the auth_url takes away the name of the application from the site address and creates the url starting with: <a href=\"https://login.microsoftonline.com/oauth/authorize\" rel=\"nofollow noreferrer\">https://login.microsoftonline.com/oauth/authorize</a>. This is incorrect as when I copy paste this url in browser, it does not open. However the correct url would be: <a href=\"https://login.microsoftonline.com/someapp.com/oauth2/authorize\" rel=\"nofollow noreferrer\">https://login.microsoftonline.com/someapp.com/oauth2/authorize</a>. When I use this in browser, I am presented with the microsoft login, where after entering credentials the user is redirected to our application and login is successful.</p>\n</blockquote>\n\n<p>The correct authorize endpoint should be <code>https://login.microsoftonline.com/{tenant}/oauth2/authorize</code>, refer the <a href=\"https://login.microsoftonline.com/common/.well-known/openid-configuration\" rel=\"nofollow noreferrer\">OpenID Connect metadata document</a>.  And <a href=\"https://login.microsoftonline.com/common/v2.0/.well-known/openid-configuration\" rel=\"nofollow noreferrer\">this link</a> is for the <a href=\"https://docs.microsoft.com/en-us/azure/active-directory/develop/active-directory-appmodel-v2-overview\" rel=\"nofollow noreferrer\">Azure AD V2.0 endpoint</a>.</p>\n\n<p><em>The {tenant} value in the path of the request can be used to control who can sign into the application. The allowed values are tenant identifiers, for example, 8eaef023-2b34-4da1-9baa-8bc8c9d6a490 or contoso.onmicrosoft.com or common for tenant-independent tokens</em></p>\n\n<p>And below link is also very helpful for understanding developing with Azure AD:</p>\n\n<p><a href=\"https://docs.microsoft.com/en-us/azure/active-directory/develop/active-directory-authentication-scenarios\" rel=\"nofollow noreferrer\">Authentication Scenarios for Azure AD</a></p>\n"}], "owner": {"reputation": 248, "user_id": 4741035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c64b21801c30f0d34766d00cf659a85f?s=128&d=identicon&r=PG&f=1", "display_name": "rochitsen", "link": "https://stackoverflow.com/users/4741035/rochitsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 363, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1509504779, "creation_date": 1509430087, "question_id": 47028888, "link": "https://stackoverflow.com/questions/47028888/issues-in-ruby-script-using-oauth2-to-access-api-hosted-on-azure-ad", "title": "Issues in Ruby script using oauth2 to access API hosted on Azure AD", "body": "<p>Ruby version: 2.4.1p111</p>\n\n<p>I have a ruby script that I was trying out by copying the Bearer token and then passing in the request to the application API I am want to access. This works fine and now I want to enhance the script by taking out my bearer token hack and instead get a token through oauth to access the API.\nThe API is hosted on Azure as an App Service. I have the following information:\n1. client_id\n2. client_secret\n3. Site address: <a href=\"https://login.microsoftonline.com/someapp.com\" rel=\"nofollow noreferrer\">https://login.microsoftonline.com/someapp.com</a>\n4. Redirect_uri: <a href=\"https://someapp/login\" rel=\"nofollow noreferrer\">https://someapp/login</a></p>\n\n<p>I used gem 'oauth2' and followed the example on the gem wiki page. Following is what I do:\nGem wiki page: <a href=\"https://github.com/intridea/oauth2\" rel=\"nofollow noreferrer\">https://github.com/intridea/oauth2</a></p>\n\n<hr>\n\n<pre><code>require 'oauth2'\n\n#Initializing a client\nclient = OAuth2::Client.new('client_id', 'client_secret', :site \n=&gt;'https://login.microsoftonline.com/someapp.com')\n\n#Creating a auth url\nauth_url = client.auth_code.authorize_url(:redirect_uri \n=&gt;'https://someapp/login')\n\n#After auth_url is created, I then send a request to access the token\ntoken = client.auth_code.get_token('authorization_code_value', :redirect_uri \n=&gt; 'https://someapp/login', :headers =&gt; {'Authorization' =&gt; 'Basic \nsome_password'})\nresponse = token.get('/api/resource', :params =&gt; { 'query_foo' =&gt; 'bar' })\n</code></pre>\n\n<hr>\n\n<ol>\n<li>What I don\u2019t understand is what is the 'authorization_code_value' parameter in the token request?</li>\n<li>The headers options hash says 'Authorization'=>'Basic some password'. What would this be for and what to put here</li>\n<li>Another thing I noticed is that the gem when creating the auth_url takes away the name of the application from the site address and creates the url starting with: <a href=\"https://login.microsoftonline.com/oauth/authorize\" rel=\"nofollow noreferrer\">https://login.microsoftonline.com/oauth/authorize</a>. This is incorrect as when I copy paste this url in browser, it does not open. However the correct url would be: <a href=\"https://login.microsoftonline.com/someapp.com/oauth2/authorize\" rel=\"nofollow noreferrer\">https://login.microsoftonline.com/someapp.com/oauth2/authorize</a>. When I use this in browser, I am presented with the microsoft login, where after entering credentials the user is redirected to our application and login is successful.</li>\n</ol>\n\n<p>In summary, what I would want to do is get a token in my script and then use that token to make requests to the API. Is this the right gem to use? Or a better / simpler approach to achieve this?</p>\n\n<p>Please let me know if more info is required. Looking forward on help guidance from you guys on this. Have spent couple of days and I am unable to figure out. </p>\n"}, {"tags": ["ruby", "xml", "nokogiri"], "comments": [{"owner": {"reputation": 6058, "user_id": 662425, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-JXe9IA2rZYM/AAAAAAAAAAI/AAAAAAAAGEg/RlIJwUwmP90/photo.jpg?sz=128", "display_name": "AnkitG", "link": "https://stackoverflow.com/users/662425/ankitg"}, "edited": false, "score": 1, "creation_date": 1509426021, "post_id": 47028137, "comment_id": 81003288, "body": "I ran your code at my end and it does return &quot;server&quot; string"}, {"owner": {"reputation": 301, "user_id": 8377803, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5830df75f0a77fc8e13dab48748cb559?s=128&d=identicon&r=PG&f=1", "display_name": "Tom D", "link": "https://stackoverflow.com/users/8377803/tom-d"}, "reply_to_user": {"reputation": 6058, "user_id": 662425, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-JXe9IA2rZYM/AAAAAAAAAAI/AAAAAAAAGEg/RlIJwUwmP90/photo.jpg?sz=128", "display_name": "AnkitG", "link": "https://stackoverflow.com/users/662425/ankitg"}, "edited": false, "score": 1, "creation_date": 1509426204, "post_id": 47028137, "comment_id": 81003335, "body": "On my end I just get an empty string. Could it be something environmental on my end? I have the XML file located in the same directory as my ruby file. Do I need to do anything special to grant permissions to view the XML file?"}, {"owner": {"reputation": 2813, "user_id": 482842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/135dc4655009942421d5def8c6d153b4?s=128&d=identicon&r=PG", "display_name": "ghstcode", "link": "https://stackoverflow.com/users/482842/ghstcode"}, "reply_to_user": {"reputation": 6058, "user_id": 662425, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-JXe9IA2rZYM/AAAAAAAAAAI/AAAAAAAAGEg/RlIJwUwmP90/photo.jpg?sz=128", "display_name": "AnkitG", "link": "https://stackoverflow.com/users/662425/ankitg"}, "edited": false, "score": 0, "creation_date": 1509426242, "post_id": 47028137, "comment_id": 81003348, "body": "I can confirm the same results as @ankitg, the &#39;server&#39; string gets printed."}, {"owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1509426331, "post_id": 47028137, "comment_id": 81003380, "body": "I get &#39;server&#39; too. File also located in the same directory"}, {"owner": {"reputation": 301, "user_id": 8377803, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5830df75f0a77fc8e13dab48748cb559?s=128&d=identicon&r=PG&f=1", "display_name": "Tom D", "link": "https://stackoverflow.com/users/8377803/tom-d"}, "edited": false, "score": 0, "creation_date": 1509426502, "post_id": 47028137, "comment_id": 81003433, "body": "I figured it out, it was something weird with my xml file, I don&#39;t think it formatting properly in Sublime. I copied the xml over to a plain text file and bam, instant success. Thanks guys"}, {"owner": {"reputation": 142, "user_id": 3735300, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/70ZRI.png?s=128&g=1", "display_name": "Laurie", "link": "https://stackoverflow.com/users/3735300/laurie"}, "edited": false, "score": 0, "creation_date": 1509468017, "post_id": 47028137, "comment_id": 81027406, "body": "I see there are also some tutorials and resources on <a href=\"http://www.nokogiri.org/\" rel=\"nofollow noreferrer\">nokogiri.org</a>"}], "owner": {"reputation": 301, "user_id": 8377803, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5830df75f0a77fc8e13dab48748cb559?s=128&d=identicon&r=PG&f=1", "display_name": "Tom D", "link": "https://stackoverflow.com/users/8377803/tom-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 183, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1509425757, "creation_date": 1509425757, "question_id": 47028137, "link": "https://stackoverflow.com/questions/47028137/ruby-nokogiri-returning-empty-string", "title": "Ruby - Nokogiri returning empty string", "body": "<p>I'm attempting to pull values from an xml file using nokogiri, but there are no values being returned. What am I doing wrong?</p>\n\n<p>Here's the xml file called \"smtp.xml\"</p>\n\n\n\n<pre><code>&lt;options&gt;\n    &lt;address&gt;server&lt;/address&gt;\n    &lt;port&gt;587&lt;/port&gt;\n    &lt;domain&gt;domain name&lt;/domain&gt;\n    &lt;user_name&gt;my_user&lt;/user_name&gt;\n    &lt;password&gt;my_password&lt;/password&gt;\n&lt;/options&gt;\n</code></pre>\n\n<p>Here's my Ruby code: </p>\n\n<pre><code>require 'nokogiri'\n\ndoc = Nokogiri::XML(File.open(\"smtp.xml\"))\n\naddress = doc.xpath('//options/address').text\nputs address\n</code></pre>\n\n<p>'address' is just returning an empty string...</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1509426032, "post_id": 47028099, "comment_id": 81003293, "body": "You may have to rebuild the hash e.g. <code>p hash.keys.map(&amp;:strip).zip(hash.values).to_h</code>. Not sure if you can easily re-key the keys."}], "answers": [{"tags": [], "owner": {"reputation": 2813, "user_id": 482842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/135dc4655009942421d5def8c6d153b4?s=128&d=identicon&r=PG", "display_name": "ghstcode", "link": "https://stackoverflow.com/users/482842/ghstcode"}, "is_accepted": false, "score": 1, "last_activity_date": 1509425996, "creation_date": 1509425996, "answer_id": 47028170, "question_id": 47028099, "link": "https://stackoverflow.com/questions/47028099/how-to-trim-all-the-whitespace-in-hashs-key/47028170#47028170", "title": "How to trim all the whitespace in hash&#39;s key?", "body": "<p>The loop you are using wont work because your code is essentially deleting the whitespace from the variable <code>key</code> and not the hash itself.</p>\n\n<p>What I would do is write a function that encapsulates the looping logic and returns a new hash with the keys modified, like this:</p>\n\n<pre><code>def normalize_keys!(hash)   \n  buffer = {}\n  hash.each do |key, value|\n    buffer[key.strip] = value\n  end   \n  buffer\nend\n\nnew_hash = normalize_keys!(old_hash)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1509427910, "creation_date": 1509427910, "answer_id": 47028451, "question_id": 47028099, "link": "https://stackoverflow.com/questions/47028099/how-to-trim-all-the-whitespace-in-hashs-key/47028451#47028451", "title": "How to trim all the whitespace in hash&#39;s key?", "body": "<pre><code>hash.each_with_object({}) { |(k,v),h| h[k.strip] = v }\n  #=&gt; {\"&lt;start&gt;\"=&gt;[[\"&lt;intro&gt;\"]],\n  #    \"&lt;intro&gt;\"=&gt;[[\"&lt;FirstSentence&gt;\", \"&lt;Funnel&gt;\", \"&lt;Thesis&gt;\"]], \n  #    \"&lt;FirstSentence&gt;\"=&gt;[[\"&lt;StartingClause&gt;\", \"&lt;Group&gt;\", \"&lt;PastAction&gt;\", \".\"],\n  #                        [\"&lt;Quotation&gt;\", \"--\", \"&lt;Author&gt;\", \"&lt;QuoteEnd&gt;\",\n  #                         \"&lt;QuoteTransition&gt;\", \".\"]]}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 3, "last_activity_date": 1509434449, "creation_date": 1509434449, "answer_id": 47029860, "question_id": 47028099, "link": "https://stackoverflow.com/questions/47028099/how-to-trim-all-the-whitespace-in-hashs-key/47029860#47029860", "title": "How to trim all the whitespace in hash&#39;s key?", "body": "<pre><code>hash.map { |k, v| [k.strip, v] }.to_h\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "is_accepted": false, "score": 0, "last_activity_date": 1509443563, "creation_date": 1509443563, "answer_id": 47032357, "question_id": 47028099, "link": "https://stackoverflow.com/questions/47028099/how-to-trim-all-the-whitespace-in-hashs-key/47032357#47032357", "title": "How to trim all the whitespace in hash&#39;s key?", "body": "<p>The method to apply is <code>delete!</code>, not <code>delete</code>. String#delete does not modify the receiver. String#delete! does.</p>\n"}], "owner": {"reputation": 590, "user_id": 6820501, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-0V9mIgdiVKM/AAAAAAAAAAI/AAAAAAAADdw/LVw8LNpAV_Y/photo.jpg?sz=128", "display_name": "Travis Su", "link": "https://stackoverflow.com/users/6820501/travis-su"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 459, "favorite_count": 0, "accepted_answer_id": 47029860, "answer_count": 4, "score": 0, "last_activity_date": 1509443563, "creation_date": 1509425374, "last_edit_date": 1509433609, "question_id": 47028099, "link": "https://stackoverflow.com/questions/47028099/how-to-trim-all-the-whitespace-in-hashs-key", "title": "How to trim all the whitespace in hash&#39;s key?", "body": "<p>Here's a hash:</p>\n\n<pre><code>hash = {\"&lt;start&gt;\"=&gt;[[\"&lt;intro&gt;\"]],\n        \"&lt;intro&gt; \"=&gt;[[\"&lt;FirstSentence&gt;\", \"&lt;Funnel&gt;\", \"&lt;Thesis&gt;\"]],\n        \"&lt;FirstSentence&gt; \"=&gt;[[\"&lt;StartingClause&gt;\", \"&lt;Group&gt;\", \"&lt;PastAction&gt;\", \".\"], [\"&lt;Quotation&gt;\", \"--\", \"&lt;Author&gt;\", \"&lt;QuoteEnd&gt;\", \"&lt;QuoteTransition&gt;\", \".\"]]}\n</code></pre>\n\n<p><code>key[1]</code> and <code>key[2]</code> here have a white space after <code>&gt;</code>. I want to delete that. I tried <code>tr(' ', '')</code>, <code>delete(' ')</code>, <code>strip</code>,<code>gsub</code>, etc.</p>\n\n<pre><code>hash.each do |key, _|\n  key.delete(' ')\nend\n</code></pre>\n\n<p>But they do not work. White space is immune to all the trimming/deleting methods. Am I using the method in a wrong way?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "model-view-controller"], "comments": [{"owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1509424875, "post_id": 47027962, "comment_id": 81002971, "body": "The way to go about this is to have 1 table with a <code>side</code> column for example, where you&#39;d save the order side (ie &#39;sell&#39; / &#39;buy&#39;)"}, {"owner": {"reputation": 3309, "user_id": 3786332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R33iW.jpg?s=128&g=1", "display_name": "uzaif", "link": "https://stackoverflow.com/users/3786332/uzaif"}, "edited": false, "score": 0, "creation_date": 1509425274, "post_id": 47027962, "comment_id": 81003097, "body": "hi @rod check this <a href=\"https://github.com/hzamani/active_record-acts_as\" rel=\"nofollow noreferrer\">github.com/hzamani/active_record-acts_as</a>"}, {"owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "reply_to_user": {"reputation": 3309, "user_id": 3786332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R33iW.jpg?s=128&g=1", "display_name": "uzaif", "link": "https://stackoverflow.com/users/3786332/uzaif"}, "edited": false, "score": 0, "creation_date": 1509425975, "post_id": 47027962, "comment_id": 81003280, "body": "@uzaif do you see a need for inheritance here?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1509432658, "post_id": 47027962, "comment_id": 81005381, "body": "This is called Single Table Inheritance (STI) and it&#39;s a common pattern. Not sure it&#39;s warranted here, if attribute sets of buy/sell orders are the same (are they?). Anyway, google this up."}], "answers": [{"comments": [{"owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1509832208, "post_id": 47028129, "comment_id": 81181822, "body": "did this not help?"}], "tags": [], "owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "is_accepted": false, "score": 1, "last_activity_date": 1509425658, "creation_date": 1509425658, "answer_id": 47028129, "question_id": 47027962, "link": "https://stackoverflow.com/questions/47027962/rail-two-models-for-one-table/47028129#47028129", "title": "Rail: two models for one table", "body": "<p>I can't see the use of separating your \"order\" model into two distinct one. Personally, I'd chose to go for simplicity. In your order table have an attribute <code>side</code> that will be either <code>sell</code> or <code>buy</code>. A <code>product</code> would then have many <code>orders</code>, each of them belonging to a <code>product</code>.</p>\n\n<pre><code>class Product &lt; ApplicationRecord\n    has_many :orders\n    has_many :stocks\nend\n</code></pre>\n\n<p>You can then easily refer to the side like:</p>\n\n<pre><code>Product.first.orders.where(side: 'sell')\n</code></pre>\n\n<p>Would retrieve all <code>sell</code> orders for the first product record.</p>\n"}], "owner": {"reputation": 387, "user_id": 8152465, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/17b78615d8f648d8b9745b530b880422?s=128&d=identicon&r=PG&f=1", "display_name": "rod", "link": "https://stackoverflow.com/users/8152465/rod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1509425658, "creation_date": 1509424436, "last_edit_date": 1509425183, "question_id": 47027962, "link": "https://stackoverflow.com/questions/47027962/rail-two-models-for-one-table", "title": "Rail: two models for one table", "body": "<p>When a User buys a product, it goes to his stock. So only products in stock can be sold. Stock table has a product_id column. Simply, when a user is on products/product_id page orders must be a buy, when is on stocks/stock_id page order must be sell.</p>\n\n<p><strong>I want to use just one table Order, and not to create two table buy_order and sell_order.</strong></p>\n\n<p>So I created buy_order and sell_order model without migration obviously that inherit from Order model, and controllers sell_orders and buy_orders.</p>\n\n<p>I just want to know if this is a correct way to go to use just one table.</p>\n\n<p>My Models:</p>\n\n<pre><code>class Order &lt; ApplicationRecord\n    belongs_to :product\nend\n\nclass BuyOrder &lt; Order\nend\n\nclass SellOrder &lt; Order\nend\n\nclass Product &lt; ApplicationRecord\n    has_many :buy_orders\n    has_many :sell_orders\n    has_many :stocks\nend\n\nclass Stock &lt; ApplicationRecord\n    belongs_to :product\nend\n</code></pre>\n\n<p>My Controllers</p>\n\n<pre><code>class BuyOrdersController &lt; ApplicationController\n\n    def create\n       ...\n       order.type = 'buy'\n       ...\n    end\nend\n\nclass SellOrdersController &lt; ApplicationController\n\n    def create\n       ...\n       order.type = 'sell'\n       ...\n    end\nend\n</code></pre>\n\n<p>Routes.rb:</p>\n\n<pre><code>resources :products, only: [:index, :show] do\n  resources :buy_orders, only: [:create]\nend\n\nresources :stocks, only: [:index, :show] do\n  resources :sell_orders, only: [:create]\nend\n</code></pre>\n\n<p>Rake Routes:</p>\n\n<pre><code>products_orders POST       /products/:product_id/buy_orders(.:format) orders#create\nproducts_index GET        /products(.:format) products#index\nproduct GET        /products/:id(.:format) products#show\nstocks_orders POST       /stocks/:stock_id/sell_orders(.:format) orders#create\nstocks_index GET        /stocks(.:format) stocks#index\nstock GET        /stock/:id(.:format) stocks#show\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "ruby-on-rails-5.1"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1509418219, "post_id": 47027112, "comment_id": 81001376, "body": "You don&#39;t need <code>self.</code>."}], "answers": [{"tags": [], "owner": {"reputation": 3502, "user_id": 2558108, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DUiG3.jpg?s=128&g=1", "display_name": "Qwertie", "link": "https://stackoverflow.com/users/2558108/qwertie"}, "is_accepted": true, "score": 1, "last_activity_date": 1509418271, "creation_date": 1509418271, "answer_id": 47027139, "question_id": 47027112, "link": "https://stackoverflow.com/questions/47027112/activerecord-searching-by-pseudo-attributes/47027139#47027139", "title": "ActiveRecord searching by pseudo attributes", "body": "<p>Looks like the way to do this is to create a scope for the model:</p>\n\n<pre><code>scope :complete, -&gt; { where.not(address_id: nil, user_id: nil, location_id: nil)}\n</code></pre>\n\n<p>And then search with <code>Model.complete</code></p>\n"}], "owner": {"reputation": 3502, "user_id": 2558108, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DUiG3.jpg?s=128&g=1", "display_name": "Qwertie", "link": "https://stackoverflow.com/users/2558108/qwertie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 47027139, "answer_count": 1, "score": 1, "last_activity_date": 1509418271, "creation_date": 1509418030, "question_id": 47027112, "link": "https://stackoverflow.com/questions/47027112/activerecord-searching-by-pseudo-attributes", "title": "ActiveRecord searching by pseudo attributes", "body": "<p>On my model I have the method</p>\n\n<pre><code>def complete?\n    self.address_id &amp;&amp; self.user_id &amp;&amp; self.location\nend\n</code></pre>\n\n<p>Is it possible to do a search with activerecord for records where this is true or will I have to just check all of these columns are not nil in each lookup?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "websocket", "ruby-on-rails-5", "actioncable"], "comments": [{"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1509418939, "post_id": 47026637, "comment_id": 81001538, "body": "Could you be using an iFrame inside the HTML client?"}, {"owner": {"reputation": 185, "user_id": 7733552, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d0585b2af4349bcf8312cad05f837ab9?s=128&d=identicon&r=PG&f=1", "display_name": "megahra", "link": "https://stackoverflow.com/users/7733552/megahra"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1509556092, "post_id": 47026637, "comment_id": 81067717, "body": "Nope, I checked my views again, but I&#39;m not using an iFrame @Myst"}], "owner": {"reputation": 185, "user_id": 7733552, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d0585b2af4349bcf8312cad05f837ab9?s=128&d=identicon&r=PG&f=1", "display_name": "megahra", "link": "https://stackoverflow.com/users/7733552/megahra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 359, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1509413542, "creation_date": 1509413542, "question_id": 47026637, "link": "https://stackoverflow.com/questions/47026637/rails-project-with-actioncable-suddenly-shows-double-websocket-connection", "title": "Rails project with ActionCable suddenly shows double Websocket connection", "body": "<p>I've been developing a quiz web application with Rails 5 and ActionCable and everything was working fine, but suddenly my browser started showing 2 'cable' websocket connections (and the logs also confirm that messages are sent twice).</p>\n\n<p>What I'm talking about is this:\n<a href=\"https://i.stack.imgur.com/8lu5I.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8lu5I.png\" alt=\"browser network console screen capture\"></a></p>\n\n<p>This is wholly unintentional on my part, but even after restarting the server and my PC and searching my code I don't get where the second connection comes from.</p>\n\n<p>This is my <code>connection.rb</code> - standard for ActionCable:</p>\n\n<pre><code>module ApplicationCable\n  class Connection &lt; ActionCable::Connection::Base\n    identified_by :current_user\n\n    def connect\n      self.current_user = find_verified_user\n      logger.add_tags 'ActionCable', current_user\n    end\n\n    private\n    def find_verified_user\n      if verified_user = User.find_by(id: cookies.signed[:user_id])\n        verified_user\n      else\n        reject_unauthorized_connection\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>This is my <code>routes.rb</code>:</p>\n\n<pre><code>Rails.application.routes.draw do\n  root to: redirect('teacher/home'), :role =&gt; \"teacher\", :page =&gt; \"home\"\n\n  mount ActionCable.server =&gt; '/cable'\nend\n</code></pre>\n\n<p>And this is <a href=\"https://stackoverflow.com/questions/47002385/rails-5-execjsruntimeerror\">the issue</a> I was solving when the second connection started to appear. ^^*</p>\n\n<p>I'd be happy for any ideas of where to look or what to do! :)</p>\n"}, {"tags": ["html", "css", "ruby-on-rails", "ruby", "simple-form"], "comments": [{"owner": {"reputation": 6361, "user_id": 2097529, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/QnP8n.jpg?s=128&g=1", "display_name": "Kick Buttowski", "link": "https://stackoverflow.com/users/2097529/kick-buttowski"}, "edited": false, "score": 0, "creation_date": 1509413289, "post_id": 47026564, "comment_id": 81000285, "body": "Just wondering to know how this questions is related to ruby or even ruby on rails?"}, {"owner": {"reputation": 595, "user_id": 6633003, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fNSzq.png?s=128&g=1", "display_name": "Andrew Siplas", "link": "https://stackoverflow.com/users/6633003/andrew-siplas"}, "reply_to_user": {"reputation": 6361, "user_id": 2097529, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/QnP8n.jpg?s=128&g=1", "display_name": "Kick Buttowski", "link": "https://stackoverflow.com/users/2097529/kick-buttowski"}, "edited": false, "score": 0, "creation_date": 1509414020, "post_id": 47026564, "comment_id": 81000449, "body": "@KickButtowski I read the question as \u201chow do I generate this HTML using ruby/<a href=\"https://github.com/plataformatec/simple_form/blob/master/README.md\" rel=\"nofollow noreferrer\">simple_form</a>"}, {"owner": {"reputation": 87, "user_id": 8070825, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/69004026ff28a9a881b636c81ae38d82?s=128&d=identicon&r=PG&f=1", "display_name": "Mongoid", "link": "https://stackoverflow.com/users/8070825/mongoid"}, "reply_to_user": {"reputation": 6361, "user_id": 2097529, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/QnP8n.jpg?s=128&g=1", "display_name": "Kick Buttowski", "link": "https://stackoverflow.com/users/2097529/kick-buttowski"}, "edited": false, "score": 0, "creation_date": 1509446466, "post_id": 47026564, "comment_id": 81013019, "body": "@KickButtowski it would be easy to solve this problem with HTML. I am using the simple_form in a ruby on rails view, completely different game"}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 8070825, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/69004026ff28a9a881b636c81ae38d82?s=128&d=identicon&r=PG&f=1", "display_name": "Mongoid", "link": "https://stackoverflow.com/users/8070825/mongoid"}, "edited": false, "score": 0, "creation_date": 1509446539, "post_id": 47026656, "comment_id": 81013065, "body": "I am able to align them with HTML, I don&#39;t actually know how to do it with simple form"}], "tags": [], "owner": {"reputation": 200, "user_id": 8033802, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/--PyKjdE5zIY/AAAAAAAAAAI/AAAAAAAAAFU/kLF73V1ao20/photo.jpg?sz=128", "display_name": "DannyV", "link": "https://stackoverflow.com/users/8033802/dannyv"}, "is_accepted": false, "score": 0, "last_activity_date": 1509413705, "creation_date": 1509413705, "answer_id": 47026656, "question_id": 47026564, "link": "https://stackoverflow.com/questions/47026564/simple-form-inline-input-with-check-boxes/47026656#47026656", "title": "Simple form inline input with check boxes", "body": "<p>I believe you're asking how to align all those elements in a straight line, in that case, you would just use <code>display: inline-block;</code> to the parent div containing all these elements. Or you could use flexbox to vertically and horizontally align them in a div</p>\n"}], "owner": {"reputation": 87, "user_id": 8070825, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/69004026ff28a9a881b636c81ae38d82?s=128&d=identicon&r=PG&f=1", "display_name": "Mongoid", "link": "https://stackoverflow.com/users/8070825/mongoid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1509413873, "creation_date": 1509412866, "question_id": 47026564, "link": "https://stackoverflow.com/questions/47026564/simple-form-inline-input-with-check-boxes", "title": "Simple form inline input with check boxes", "body": "<p>My form currently has a form with field like this :</p>\n\n<p><a href=\"https://i.stack.imgur.com/CSxah.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CSxah.png\" alt=\"enter image description here\"></a></p>\n\n<p>Simple form code being very simple for this one (using horizontal_form class) :</p>\n\n<pre><code>&lt;%= f.input :taxes %&gt;\n</code></pre>\n\n<p>However when entering data, most of the time people know their yearly tax, but rarely monthly as well. So I need some kind of different UX, than have them divide and remember all the time, this is what I came up with.</p>\n\n<p><a href=\"https://i.stack.imgur.com/sNBDb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sNBDb.png\" alt=\"enter image description here\"></a></p>\n\n<p>I'm not sure how to achieve this HTML with simple_form, but above screen is rendered from this HTML :</p>\n\n<pre><code>&lt;div class=\"form-group row decimal optional calculator_taxes\"&gt;&lt;label class=\"col-sm-3 col-form-label control-label decimal optional\" for=\"calculator_taxes\"&gt;Taxes&lt;/label&gt;&lt;div class=\"col-sm-5\"&gt;&lt;input class=\"form-control numeric decimal optional\" type=\"number\" step=\"any\" value=\"0.0\" name=\"calculator[taxes]\" id=\"calculator_taxes\"&gt;&lt;/div&gt;\n&lt;div class=\"form-check form-check-inline\"&gt;\n  &lt;label class=\"form-check-label\"&gt;\n    &lt;input class=\"form-check-input\" type=\"radio\" name=\"inlineRadioOptions\" id=\"inlineRadio1\" value=\"Yearly\"&gt;Yearly&lt;/label&gt;\n&lt;/div&gt;\n&lt;div class=\"form-check form-check-inline\"&gt;\n  &lt;label class=\"form-check-label\"&gt;\n    &lt;input class=\"form-check-input\" type=\"radio\" name=\"inlineRadioOptions\" id=\"inlineRadio2\" value=\"option2\"&gt;Monthly&lt;/label&gt;\n&lt;/div&gt;&lt;/div&gt;\n</code></pre>\n\n<p>How does one add these 2 divs with radio <code>&lt;div class=\"form-check form-check-inline\"&gt;</code> to the existing input HTML with simple form?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "database-migration"], "answers": [{"comments": [{"owner": {"reputation": 3502, "user_id": 2558108, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DUiG3.jpg?s=128&g=1", "display_name": "Qwertie", "link": "https://stackoverflow.com/users/2558108/qwertie"}, "edited": false, "score": 0, "creation_date": 1509411508, "post_id": 47026310, "comment_id": 80999919, "body": "That was the issue. Somehow my schema was using the correct address_id. How that managed to happen I will never know but after fixing the migration and renaming the column on the server with psql it works find now."}], "tags": [], "owner": {"reputation": 6559, "user_id": 382520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05f73868bd13eba39cab490c897f1333?s=128&d=identicon&r=PG", "display_name": "JCorcuera", "link": "https://stackoverflow.com/users/382520/jcorcuera"}, "is_accepted": true, "score": 1, "last_activity_date": 1509410912, "creation_date": 1509410912, "answer_id": 47026310, "question_id": 47026256, "link": "https://stackoverflow.com/questions/47026256/pgundefinedcolumn-when-deploying-rails-app/47026310#47026310", "title": "&quot;PG::UndefinedColumn:&quot; when deploying rails app", "body": "<p>I believe the problem is here:</p>\n\n<pre><code>create_table :member_applications do |t|\n  ...\n  t.references :addresses, null: false\n  ...\nend\n</code></pre>\n\n<p>It should be <code>t.references :address, null: false</code> in singular.</p>\n\n<p>You can check your <code>db/schema.rb</code> to verify.</p>\n"}], "owner": {"reputation": 3502, "user_id": 2558108, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DUiG3.jpg?s=128&g=1", "display_name": "Qwertie", "link": "https://stackoverflow.com/users/2558108/qwertie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 47026310, "answer_count": 1, "score": 1, "last_activity_date": 1509410912, "creation_date": 1509410362, "question_id": 47026256, "link": "https://stackoverflow.com/questions/47026256/pgundefinedcolumn-when-deploying-rails-app", "title": "&quot;PG::UndefinedColumn:&quot; when deploying rails app", "body": "<p>When deploying my changes to production using Capistrano I get the error </p>\n\n<pre><code>PG::UndefinedColumn: ERROR:  column \"address_id\" of relation \"member_applications\" does not exist\n</code></pre>\n\n<p>In my migrations I have </p>\n\n<pre><code>class CreateAddresses &lt; ActiveRecord::Migration[5.1]\n    def change\n        create_table :addresses do |t|\n            t.string :full_name, null: false\n            t.string :email, null: false\n            t.string :phone, null: false\n            t.string :address, null: false\n            t.string :state, null: false\n            t.string :country, null: false\n            t.string :postcode, null: false\n            t.timestamps\n        end\n    end\nend\n</code></pre>\n\n<p>and</p>\n\n<pre><code>class CreateMemberApplications &lt; ActiveRecord::Migration[5.1]\n    def change\n        create_table :member_applications do |t|\n            t.references :location, null: false\n            t.references :addresses, null: false\n            t.references :user, null: false\n            t.string :full_name, null: false\n            t.date :birthdate, null: false\n            t.timestamps\n        end\n    end\nend\n</code></pre>\n\n<p>and finally</p>\n\n<pre><code>class SetAddressToNull &lt; ActiveRecord::Migration[5.1]\n  def change\n      change_column_null :member_applications, :address_id, true\n  end\nend\n</code></pre>\n\n<p>This last migration seems to be the one causing issues. What could be causing this issue? It has been working on my development machine but it has been a little while since I last deployed.</p>\n"}, {"tags": ["ruby", "rubygems", "bundle", "jekyll"], "comments": [{"owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1509414404, "post_id": 47026174, "comment_id": 81000529, "body": "Can this help maybe: <a href=\"https://github.com/rvm/rvm/issues/1860\" rel=\"nofollow noreferrer\">github.com/rvm/rvm/issues/1860</a>"}, {"owner": {"reputation": 37699, "user_id": 1081396, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4da642ebb2987685f30442660dc6751e?s=128&d=identicon&r=PG", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/1081396/alvaro"}, "reply_to_user": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1509451970, "post_id": 47026174, "comment_id": 81016403, "body": "@Cyzanfar thanks for that! I tried it, now got a new error on the process: <a href=\"https://stackoverflow.com/questions/47035080/unknown-ruby-interpreter-version-do-not-know-how-to-handle-ruby-version\" title=\"unknown ruby interpreter version do not know how to handle ruby version\">stackoverflow.com/questions/47035080/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 892, "user_id": 1757329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b704ffa251bb57a54b71428852e686db?s=128&d=identicon&r=PG", "display_name": "humanity", "link": "https://stackoverflow.com/users/1757329/humanity"}, "edited": false, "score": 6, "creation_date": 1520623674, "post_id": 47201709, "comment_id": 85406767, "body": "After you &quot;fix&quot; it, make sure you fix your directory permissions on .rvm and .gem"}, {"owner": {"reputation": 10428, "user_id": 5790492, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/xfz6Q.jpg?s=128&g=1", "display_name": "Nik Kov", "link": "https://stackoverflow.com/users/5790492/nik-kov"}, "reply_to_user": {"reputation": 892, "user_id": 1757329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b704ffa251bb57a54b71428852e686db?s=128&d=identicon&r=PG", "display_name": "humanity", "link": "https://stackoverflow.com/users/1757329/humanity"}, "edited": false, "score": 1, "creation_date": 1521939143, "post_id": 47201709, "comment_id": 85945613, "body": "@humanity explain more detailed please, buy editing my answer"}, {"owner": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "reply_to_user": {"reputation": 892, "user_id": 1757329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b704ffa251bb57a54b71428852e686db?s=128&d=identicon&r=PG", "display_name": "humanity", "link": "https://stackoverflow.com/users/1757329/humanity"}, "edited": false, "score": 1, "creation_date": 1522130543, "post_id": 47201709, "comment_id": 86014725, "body": "@humanity chrs for your answer - would you pls be able to elaborate what you mean by fix your directory permissions on .rvm and .gem?"}, {"owner": {"reputation": 181, "user_id": 7806855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86906723439bcd61d45a8c8279c6a0f7?s=128&d=identicon&r=PG", "display_name": "Souravirus", "link": "https://stackoverflow.com/users/7806855/souravirus"}, "edited": false, "score": 1, "creation_date": 1527869514, "post_id": 47201709, "comment_id": 88305338, "body": "@Nik kov the location of .rvm and .gem folders are probably inside your home folder. Try to change the permissions of them by chmod command. It worked for me."}, {"owner": {"reputation": 892, "user_id": 1757329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b704ffa251bb57a54b71428852e686db?s=128&d=identicon&r=PG", "display_name": "humanity", "link": "https://stackoverflow.com/users/1757329/humanity"}, "reply_to_user": {"reputation": 181, "user_id": 7806855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86906723439bcd61d45a8c8279c6a0f7?s=128&d=identicon&r=PG", "display_name": "Souravirus", "link": "https://stackoverflow.com/users/7806855/souravirus"}, "edited": false, "score": 1, "creation_date": 1535484127, "post_id": 47201709, "comment_id": 91080322, "body": "What @souravirus said...  Permissions need to be open enough on those directories, else failure."}, {"owner": {"reputation": 2801, "user_id": 261405, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e8ad8be98f554e0ebd4c820ac2e36aab?s=128&d=identicon&r=PG", "display_name": "Adrian Carr", "link": "https://stackoverflow.com/users/261405/adrian-carr"}, "edited": false, "score": 1, "creation_date": 1539360836, "post_id": 47201709, "comment_id": 92488097, "body": "Would love for someone to elaborate on what chmod permissions they granted here that worked."}, {"owner": {"reputation": 560, "user_id": 6317812, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8YfWu.jpg?s=128&g=1", "display_name": "Dmitry Shvetsov", "link": "https://stackoverflow.com/users/6317812/dmitry-shvetsov"}, "edited": false, "score": 4, "creation_date": 1547170228, "post_id": 47201709, "comment_id": 95109951, "body": "sudo gem install is bad practice, in normal case all gem install should work without sudo"}], "tags": [], "owner": {"reputation": 10428, "user_id": 5790492, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/xfz6Q.jpg?s=128&g=1", "display_name": "Nik Kov", "link": "https://stackoverflow.com/users/5790492/nik-kov"}, "is_accepted": false, "score": 81, "last_activity_date": 1563398767, "last_edit_date": 1592644375, "creation_date": 1510230019, "answer_id": 47201709, "question_id": 47026174, "link": "https://stackoverflow.com/questions/47026174/find-spec-for-exe-cant-find-gem-bundler-0-a-gemgemnotfoundexception/47201709#47201709", "title": "find_spec_for_exe&#39;: can&#39;t find gem bundler (&gt;= 0.a) (Gem::GemNotFoundException)", "body": "<h1>Update:</h1>\n<p>According @noraj's <a href=\"https://stackoverflow.com/a/54083113/5790492\">answer</a> and @Niels Kristian's comment, the following command should do the job.</p>\n<pre><code>gem update --system\nbundle install\n</code></pre>\n<hr />\n<p>I wrote this in case someone gets into an issue like mine.</p>\n<p><code>gem install bundler</code> shows that everythings installs well.</p>\n<pre><code>Fetching: bundler-1.16.0.gem (100%)\nSuccessfully installed bundler-1.16.0\nParsing documentation for bundler-1.16.0\nInstalling ri documentation for bundler-1.16.0\nDone installing documentation for bundler after 7 seconds\n1 gem installed\n</code></pre>\n<p>When I typed <code>bundle</code> there was an error:</p>\n<pre><code>/Users/nikkov/.rvm/gems/ruby-2.4.0/bin/bundle:23:in `load': cannot load such file -- /Users/nikkov/.rvm/rubies/ruby-2.4.0/lib/ruby/gems/2.4.0/gems/bundler-1.16.0/exe/bundle (LoadError)\n    from /Users/nikkov/.rvm/gems/ruby-2.4.0/bin/bundle:23:in `&lt;main&gt;'\n    from /Users/nikkov/.rvm/gems/ruby-2.4.0/bin/ruby_executable_hooks:15:in `eval'\n    from /Users/nikkov/.rvm/gems/ruby-2.4.0/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\n</code></pre>\n<p>And in the folder <code>/Users/nikkov/.rvm/rubies/ruby-2.4.0/lib/ruby/gems/2.4.0/gems/</code> there wasn't a <code>bundler-1.16.0</code> folder.</p>\n<p>I <strong>fixed</strong> this with <code>sudo gem install bundler</code></p>\n"}, {"comments": [{"owner": {"reputation": 1072, "user_id": 4237897, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/5b4e4693ad8791b9c8056b8481276fb8?s=128&d=identicon&r=PG&f=1", "display_name": "bormat", "link": "https://stackoverflow.com/users/4237897/bormat"}, "edited": false, "score": 1, "creation_date": 1565347343, "post_id": 50708461, "comment_id": 101334652, "body": "You save me I had export PATH=&quot;$PATH:$HOME/.rvm/bin&quot; in my bashrc, I remove it and it works"}], "tags": [], "owner": {"reputation": 1551, "user_id": 2361752, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/54TDP.png?s=128&g=1", "display_name": "xhg", "link": "https://stackoverflow.com/users/2361752/xhg"}, "is_accepted": false, "score": 1, "last_activity_date": 1528230540, "creation_date": 1528230540, "answer_id": 50708461, "question_id": 47026174, "link": "https://stackoverflow.com/questions/47026174/find-spec-for-exe-cant-find-gem-bundler-0-a-gemgemnotfoundexception/50708461#50708461", "title": "find_spec_for_exe&#39;: can&#39;t find gem bundler (&gt;= 0.a) (Gem::GemNotFoundException)", "body": "<p>I had the same issue today. I solve this problem by removing any <code>PATH</code> in <code>.bashrc</code> for older <code>rvm</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1981, "user_id": 1983957, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/uPeRS.png?s=128&g=1", "display_name": "Greg Hilston", "link": "https://stackoverflow.com/users/1983957/greg-hilston"}, "is_accepted": false, "score": 1, "last_activity_date": 1533666810, "creation_date": 1533666810, "answer_id": 51733336, "question_id": 47026174, "link": "https://stackoverflow.com/questions/47026174/find-spec-for-exe-cant-find-gem-bundler-0-a-gemgemnotfoundexception/51733336#51733336", "title": "find_spec_for_exe&#39;: can&#39;t find gem bundler (&gt;= 0.a) (Gem::GemNotFoundException)", "body": "<p>My problem was I'm using RVM and had the wrong Ruby version activated...</p>\n\n<p>Hope this helps at least one person</p>\n"}, {"tags": [], "owner": {"reputation": 17, "user_id": 9296773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2b4e006157ae82ae1c5fc20dee032a8?s=128&d=identicon&r=PG&f=1", "display_name": "Sudhanshu", "link": "https://stackoverflow.com/users/9296773/sudhanshu"}, "is_accepted": false, "score": -2, "last_activity_date": 1546925702, "last_edit_date": 1546925702, "creation_date": 1536675590, "answer_id": 52278087, "question_id": 47026174, "link": "https://stackoverflow.com/questions/47026174/find-spec-for-exe-cant-find-gem-bundler-0-a-gemgemnotfoundexception/52278087#52278087", "title": "find_spec_for_exe&#39;: can&#39;t find gem bundler (&gt;= 0.a) (Gem::GemNotFoundException)", "body": "<p>I had to do <code>rake clean --force</code>.  Then did <code>gem install rake</code> and so forth.</p>\n"}, {"tags": [], "owner": {"reputation": 2218, "user_id": 628305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73d3144dac34eb753c837faa8f58807c?s=128&d=identicon&r=PG", "display_name": "Wawa Loo", "link": "https://stackoverflow.com/users/628305/wawa-loo"}, "is_accepted": false, "score": 12, "last_activity_date": 1544083239, "creation_date": 1544083239, "answer_id": 53646933, "question_id": 47026174, "link": "https://stackoverflow.com/questions/47026174/find-spec-for-exe-cant-find-gem-bundler-0-a-gemgemnotfoundexception/53646933#53646933", "title": "find_spec_for_exe&#39;: can&#39;t find gem bundler (&gt;= 0.a) (Gem::GemNotFoundException)", "body": "<p>If you changed the ruby version you're using with <code>rvm use</code>, remove Gemfile.lock and try again.</p>\n"}, {"comments": [{"owner": {"reputation": 212, "user_id": 5849539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pMvPm.png?s=128&g=1", "display_name": "Unencoded", "link": "https://stackoverflow.com/users/5849539/unencoded"}, "edited": false, "score": 16, "creation_date": 1546724328, "post_id": 54038218, "comment_id": 94947076, "body": "As an alternative, you may wish to change the <code>BUNDLED_WITH</code> version to the latest version of bundler. This worked for me and also saved me needing outdated software :)"}, {"owner": {"reputation": 1459, "user_id": 4875295, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/676f153e67fffed6c41698f68353b9b5?s=128&d=identicon&r=PG", "display_name": "cameck", "link": "https://stackoverflow.com/users/4875295/cameck"}, "edited": false, "score": 5, "creation_date": 1546980413, "post_id": 54038218, "comment_id": 95031709, "body": "Bundler 2 just got released, so if you are not specifying as above in your Dockerfile, you are going to hit this error <a href=\"https://bundler.io/blog/2019/01/03/announcing-bundler-2.html\" rel=\"nofollow noreferrer\">bundler.io/blog/2019/01/03/announcing-bundler-2.html</a>"}, {"owner": {"reputation": 318, "user_id": 357884, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c2d3651aa1cf028726643ff0cf0bac2f?s=128&d=identicon&r=PG", "display_name": "German", "link": "https://stackoverflow.com/users/357884/german"}, "edited": false, "score": 0, "creation_date": 1548861472, "post_id": 54038218, "comment_id": 95696825, "body": "Hi @antonio-tapiador I&#39;m having this issue, but i&#39;m on windows (can&#39;t switch to linux). I&#39;ve run  <code>gem install bundler -v 1.16.1</code> and now if aI run  <code>gem.bat list bundler</code>  I get bundler (2.0.1, 1.16.1, 1.9.6).  I cant change the current version: executing <code>bundle.bat _1.16.1 install</code> gives me this error: <code>Could not find command &quot;_1.16.1&quot;</code>. Do you have any idea, so I don&#39;t have to create a new question? Thanks!"}, {"owner": {"reputation": 318, "user_id": 357884, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c2d3651aa1cf028726643ff0cf0bac2f?s=128&d=identicon&r=PG", "display_name": "German", "link": "https://stackoverflow.com/users/357884/german"}, "edited": false, "score": 0, "creation_date": 1548864298, "post_id": 54038218, "comment_id": 95698587, "body": "Never mind, I was missing an underscore at the end of the version."}, {"owner": {"reputation": 306, "user_id": 4736460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bpRn4.jpg?s=128&g=1", "display_name": "widi83", "link": "https://stackoverflow.com/users/4736460/widi83"}, "edited": false, "score": 0, "creation_date": 1590471623, "post_id": 54038218, "comment_id": 109683519, "body": "Thanks. This also solve my  same problem using ruby v2.5.1p57"}, {"owner": {"reputation": 6018, "user_id": 3446655, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/AH6Ys.jpg?s=128&g=1", "display_name": "HarlemSquirrel", "link": "https://stackoverflow.com/users/3446655/harlemsquirrel"}, "edited": false, "score": 0, "creation_date": 1607705679, "post_id": 54038218, "comment_id": 115365283, "body": "For CI, I&#39;m now using <code>bundler_version=$(grep -A 1 &#39;BUNDLED WITH&#39; Gemfile.lock | grep -o -P &quot;[\\d.]+&quot;); gem install bundler -v $bundler_version</code> to dynamically install the version needed."}], "tags": [], "owner": {"reputation": 4016, "user_id": 579934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbdd0d26ec0146cbe4e22318fc5341b5?s=128&d=identicon&r=PG", "display_name": "Antonio Tapiador", "link": "https://stackoverflow.com/users/579934/antonio-tapiador"}, "is_accepted": false, "score": 382, "last_activity_date": 1547467647, "last_edit_date": 1547467647, "creation_date": 1546601837, "answer_id": 54038218, "question_id": 47026174, "link": "https://stackoverflow.com/questions/47026174/find-spec-for-exe-cant-find-gem-bundler-0-a-gemgemnotfoundexception/54038218#54038218", "title": "find_spec_for_exe&#39;: can&#39;t find gem bundler (&gt;= 0.a) (Gem::GemNotFoundException)", "body": "<p>The problem in my case is that the <code>Gemfile.lock</code> file had a <code>BUNDLED_WITH</code> version of <code>1.16.1</code> and <code>gem install bundler</code> installed version <code>2.0.1</code>, so there was a version mismatch when looking to right the folder</p>\n\n<p><code>gem install bundler -v 1.16.1</code> fixed it</p>\n\n<p>Of course, you can also change your <code>Gemfile.lock</code>'s <code>BUNDLED_WITH</code> with last <code>bundler</code> version and use recent software, as <a href=\"https://stackoverflow.com/users/5849539/sam3000\">Sam3000</a> suggests</p>\n"}, {"tags": [], "owner": {"reputation": 3440, "user_id": 484460, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/2a42fb3ca4383d21fa8884752f5e2675?s=128&d=identicon&r=PG", "display_name": "Victor Pudeyev", "link": "https://stackoverflow.com/users/484460/victor-pudeyev"}, "is_accepted": false, "score": -2, "last_activity_date": 1546721084, "creation_date": 1546721084, "answer_id": 54056089, "question_id": 47026174, "link": "https://stackoverflow.com/questions/47026174/find-spec-for-exe-cant-find-gem-bundler-0-a-gemgemnotfoundexception/54056089#54056089", "title": "find_spec_for_exe&#39;: can&#39;t find gem bundler (&gt;= 0.a) (Gem::GemNotFoundException)", "body": "<p>I downgraded ruby from 2.5.x to 2.4.x in my particular case.</p>\n"}, {"comments": [{"owner": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "edited": false, "score": 1, "creation_date": 1546968300, "post_id": 54083113, "comment_id": 95026159, "body": "Thanks, your link saved me some time from googling the problem"}, {"owner": {"reputation": 4249, "user_id": 531479, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/52be1662035d921d395ca5b1d6b9c64c?s=128&d=identicon&r=PG", "display_name": "CWitty", "link": "https://stackoverflow.com/users/531479/cwitty"}, "edited": false, "score": 0, "creation_date": 1547246093, "post_id": 54083113, "comment_id": 95140811, "body": "Capistrano was failing on a new machine but not old ones. This fixed the issue for me."}, {"owner": {"reputation": 4059, "user_id": 643928, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/360ecf3d8d7fded3e799f4689a8a6158?s=128&d=identicon&r=PG", "display_name": "Philihp Busby", "link": "https://stackoverflow.com/users/643928/philihp-busby"}, "edited": false, "score": 1, "creation_date": 1547496620, "post_id": 54083113, "comment_id": 95205071, "body": "It can&#39;t be &quot;the real answer&quot; to the OP&#39;s question because Bundler 2.0 didn&#39;t exist in 2017, although people will certainly find this page because the symptoms are the same."}, {"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1550515289, "post_id": 54083113, "comment_id": 96288841, "body": "I am experiencing the problem with bundler 2.0.1"}, {"owner": {"reputation": 36888, "user_id": 293280, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6e6e22d81a1f4f394f62301be40c2e20?s=128&d=identicon&r=PG", "display_name": "Joshua Pinter", "link": "https://stackoverflow.com/users/293280/joshua-pinter"}, "edited": false, "score": 0, "creation_date": 1551712366, "post_id": 54083113, "comment_id": 96729957, "body": "Here are other breaking changes in version 2.0.0: <a href=\"https://github.com/bundler/bundler/releases/tag/v2.0.0\" rel=\"nofollow noreferrer\">github.com/bundler/bundler/releases/tag/v2.0.0</a>"}], "tags": [], "owner": {"reputation": 2024, "user_id": 5511315, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBuFb.png?s=128&g=1", "display_name": "noraj", "link": "https://stackoverflow.com/users/5511315/noraj"}, "is_accepted": false, "score": 34, "last_activity_date": 1546906409, "last_edit_date": 1592644375, "creation_date": 1546902329, "answer_id": 54083113, "question_id": 47026174, "link": "https://stackoverflow.com/questions/47026174/find-spec-for-exe-cant-find-gem-bundler-0-a-gemgemnotfoundexception/54083113#54083113", "title": "find_spec_for_exe&#39;: can&#39;t find gem bundler (&gt;= 0.a) (Gem::GemNotFoundException)", "body": "<p>The real answer is here if you try to install bundler 2.0.1 or 2.0.0 due to Bundler requiring RubyGems v3.0.0</p>\n<blockquote>\n<p>Yesterday I released Bundler 2.0 that introduced a number of breaking changes. One of the those changes was setting Bundler to require RubyGems v3.0.0. After making the release, it has become clear that lots of our users are running into issues with Bundler 2 requiring a really new version of RubyGems.</p>\n<p>We have been listening closely to feedback from users and have decided to relax the RubyGems requirement to v2.5.0 at minimum. We have released a new Bundler version, v2.0.1, that adjusts this requirement.</p>\n</blockquote>\n<p>For more info, see: <a href=\"https://bundler.io/blog/2019/01/04/an-update-on-the-bundler-2-release.html\" rel=\"noreferrer\">https://bundler.io/blog/2019/01/04/an-update-on-the-bundler-2-release.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 992, "user_id": 767845, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/535745704e0ae6e947221fc078df3e54?s=128&d=identicon&r=PG", "display_name": "Sandro L", "link": "https://stackoverflow.com/users/767845/sandro-l"}, "edited": false, "score": 3, "creation_date": 1547132361, "post_id": 54094206, "comment_id": 95094025, "body": "I would not recommend deleting the Gemfile.lock because that would also update all gems. This can lead to huge problems."}, {"owner": {"reputation": 1828, "user_id": 2562729, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/5u9lC.jpg?s=128&g=1", "display_name": "Georg Keferb&#246;ck", "link": "https://stackoverflow.com/users/2562729/georg-keferb%c3%b6ck"}, "reply_to_user": {"reputation": 992, "user_id": 767845, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/535745704e0ae6e947221fc078df3e54?s=128&d=identicon&r=PG", "display_name": "Sandro L", "link": "https://stackoverflow.com/users/767845/sandro-l"}, "edited": false, "score": 0, "creation_date": 1547498623, "post_id": 54094206, "comment_id": 95205915, "body": "@SandroL - totally agree with your statement. However, it is an option to those who are risk takers and drawn to drama."}, {"owner": {"reputation": 581, "user_id": 1743995, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/43e6ac349c2f8d8bd9f8b0ab97b24d83?s=128&d=identicon&r=PG", "display_name": "codeadventurer", "link": "https://stackoverflow.com/users/1743995/codeadventurer"}, "edited": false, "score": 0, "creation_date": 1548878779, "post_id": 54094206, "comment_id": 95706185, "body": "Thank you. Installing the version I had in the <code>Gemfile.lock</code> folder did the trick!"}], "tags": [], "owner": {"reputation": 1828, "user_id": 2562729, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/5u9lC.jpg?s=128&g=1", "display_name": "Georg Keferb&#246;ck", "link": "https://stackoverflow.com/users/2562729/georg-keferb%c3%b6ck"}, "is_accepted": false, "score": 5, "last_activity_date": 1546958710, "creation_date": 1546958710, "answer_id": 54094206, "question_id": 47026174, "link": "https://stackoverflow.com/questions/47026174/find-spec-for-exe-cant-find-gem-bundler-0-a-gemgemnotfoundexception/54094206#54094206", "title": "find_spec_for_exe&#39;: can&#39;t find gem bundler (&gt;= 0.a) (Gem::GemNotFoundException)", "body": "<p>Open Gemfile.lock, which is to be found in the root of your app folder. Scroll to the end of the file and see the bundler version used. Then you make sure you install the bundler version used: </p>\n\n<pre><code>gem install bundler -v x.xx.xx\n</code></pre>\n\n<p>Or - delete the Gemfile.lock and bundle if you have higher bundler version installed. </p>\n\n<p>The choice is yours, my friend. </p>\n"}, {"comments": [{"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 3, "creation_date": 1547113263, "post_id": 54118329, "comment_id": 95082867, "body": "Just to clarify - as @noraj points out - the problem was introduced in the new version of bundler. If you follow the link, the solution is to update RubyGems."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 1, "creation_date": 1556601742, "post_id": 54118329, "comment_id": 98483064, "body": "<code>gem update --system</code> worked for me: <code>ruby</code> <b>2.5.0</b>, <code>bundler</code> <b>2.0.1</b>, <code>macOS</code> <b>10.13.6</b>."}, {"owner": {"reputation": 10968, "user_id": 232220, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/7123839b35e3f4235aab013e7ac75106?s=128&d=identicon&r=PG&f=1", "display_name": "Teekin", "link": "https://stackoverflow.com/users/232220/teekin"}, "reply_to_user": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 0, "creation_date": 1604354520, "post_id": 54118329, "comment_id": 114317665, "body": "@ReggieB: What link?"}, {"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "reply_to_user": {"reputation": 10968, "user_id": 232220, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/7123839b35e3f4235aab013e7ac75106?s=128&d=identicon&r=PG&f=1", "display_name": "Teekin", "link": "https://stackoverflow.com/users/232220/teekin"}, "edited": false, "score": 1, "creation_date": 1604395910, "post_id": 54118329, "comment_id": 114328205, "body": "@Teekin <a href=\"https://bundler.io/blog/2019/01/04/an-update-on-the-bundler-2-release.html\" rel=\"nofollow noreferrer\">bundler.io/blog/2019/01/04/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1504, "user_id": 2323731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bdb590314b750987fe5d26278fc8044?s=128&d=identicon&r=PG", "display_name": "antonpaisov", "link": "https://stackoverflow.com/users/2323731/antonpaisov"}, "is_accepted": false, "score": 140, "last_activity_date": 1547067819, "creation_date": 1547067819, "answer_id": 54118329, "question_id": 47026174, "link": "https://stackoverflow.com/questions/47026174/find-spec-for-exe-cant-find-gem-bundler-0-a-gemgemnotfoundexception/54118329#54118329", "title": "find_spec_for_exe&#39;: can&#39;t find gem bundler (&gt;= 0.a) (Gem::GemNotFoundException)", "body": "<pre><code>gem update --system\n</code></pre>\n\n<p>will update the rubygems and will fix the problem.</p>\n"}, {"comments": [{"owner": {"reputation": 461, "user_id": 5478795, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8p8QO.png?s=128&g=1", "display_name": "David Jones", "link": "https://stackoverflow.com/users/5478795/david-jones"}, "edited": false, "score": 0, "creation_date": 1549274253, "post_id": 54347031, "comment_id": 95830351, "body": "I&#39;m using Visual Studio Code and uploading and publishing via  Azure Devops, which is where it was failing on Build.,  I just deleted the lock file locally, committed and then pushed.  The Build was failing on the <b>Install Gems</b> step but now it works."}, {"owner": {"reputation": 8657, "user_id": 160917, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c108a27181fb47626092b9dc9fd2a0b8?s=128&d=identicon&r=PG", "display_name": "Intentss", "link": "https://stackoverflow.com/users/160917/intentss"}, "edited": false, "score": 4, "creation_date": 1550853567, "post_id": 54347031, "comment_id": 96437846, "body": "For an existing production project this is a terrible idea. You will end up installing a bunch of untested (with your system) new code."}, {"owner": {"reputation": 5631, "user_id": 1589422, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c03d217df4867dfb3b3674649fa92e5b?s=128&d=identicon&r=PG", "display_name": "Robin Daugherty", "link": "https://stackoverflow.com/users/1589422/robin-daugherty"}, "edited": false, "score": 0, "creation_date": 1572108489, "post_id": 54347031, "comment_id": 103462043, "body": "Yes, this is a bad idea and should not be considered a fix. It does prove that the other answer (about having a mismatched Bundler version) is correct. Installing the correct version of Bundler should fix it."}, {"owner": {"reputation": 515, "user_id": 10192842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1a4Xj.jpg?s=128&g=1", "display_name": "Klonept", "link": "https://stackoverflow.com/users/10192842/klonept"}, "reply_to_user": {"reputation": 5631, "user_id": 1589422, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c03d217df4867dfb3b3674649fa92e5b?s=128&d=identicon&r=PG", "display_name": "Robin Daugherty", "link": "https://stackoverflow.com/users/1589422/robin-daugherty"}, "edited": false, "score": 0, "creation_date": 1589023828, "post_id": 54347031, "comment_id": 109129896, "body": "Thanks @RobinDaugherty, I&#39;ve edited the answer to warn everyone not to do it in production."}, {"owner": {"reputation": 5631, "user_id": 1589422, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c03d217df4867dfb3b3674649fa92e5b?s=128&d=identicon&r=PG", "display_name": "Robin Daugherty", "link": "https://stackoverflow.com/users/1589422/robin-daugherty"}, "edited": false, "score": 0, "creation_date": 1589055949, "post_id": 54347031, "comment_id": 109142982, "body": "This shouldn&#39;t be done in development either. There&#39;s a good reason for the lock file, it shouldn&#39;t be deleted in an existing project. <a href=\"https://stackoverflow.com/a/60906902/1589422\">Installing the correct version of bundler on your machine</a> fixes the problem, deleting <code>Gemfile.lock</code> should be considered a last resort since it can lead to other problems."}], "tags": [], "owner": {"reputation": 515, "user_id": 10192842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1a4Xj.jpg?s=128&g=1", "display_name": "Klonept", "link": "https://stackoverflow.com/users/10192842/klonept"}, "is_accepted": false, "score": 39, "last_activity_date": 1589023717, "last_edit_date": 1589023717, "creation_date": 1548334036, "answer_id": 54347031, "question_id": 47026174, "link": "https://stackoverflow.com/questions/47026174/find-spec-for-exe-cant-find-gem-bundler-0-a-gemgemnotfoundexception/54347031#54347031", "title": "find_spec_for_exe&#39;: can&#39;t find gem bundler (&gt;= 0.a) (Gem::GemNotFoundException)", "body": "<p>This fixed it:</p>\n\n<ol>\n<li>Remove Gemfile.lock <code>rm Gemfile.lock</code></li>\n<li>run <code>bundle install</code> again</li>\n</ol>\n\n<p>EDIT: DON'T DO IT IN PRODUCTION!</p>\n\n<p>For production go to this answer:\n<a href=\"https://stackoverflow.com/posts/54083113/revisions\">https://stackoverflow.com/posts/54083113/revisions</a></p>\n"}, {"comments": [{"owner": {"reputation": 3619, "user_id": 135160, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/ukXAo.jpg?s=128&g=1", "display_name": "anka", "link": "https://stackoverflow.com/users/135160/anka"}, "edited": false, "score": 2, "creation_date": 1551006762, "post_id": 54413164, "comment_id": 96474565, "body": "Thanks for that. Definitely everybody should use the <i>safe</i> version to don&#39;t mess up the environment with newly <i>untested</i> gems. To install bundler with specific version e.g. <code>1.17</code> use <code>gem install bundler -v 1.17</code>"}], "tags": [], "owner": {"reputation": 793, "user_id": 1122265, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e5e6392782fb2b1856409b89a62ae9f8?s=128&d=identicon&r=PG", "display_name": "Mathew P. Jones", "link": "https://stackoverflow.com/users/1122265/mathew-p-jones"}, "is_accepted": false, "score": 21, "last_activity_date": 1548730234, "creation_date": 1548730234, "answer_id": 54413164, "question_id": 47026174, "link": "https://stackoverflow.com/questions/47026174/find-spec-for-exe-cant-find-gem-bundler-0-a-gemgemnotfoundexception/54413164#54413164", "title": "find_spec_for_exe&#39;: can&#39;t find gem bundler (&gt;= 0.a) (Gem::GemNotFoundException)", "body": "<p>The reason is your current ruby environment, you got a different version of bundler with the version in <code>Gemfile.lock</code>.</p>\n\n<ul>\n<li>Safe way, install bundler with the same version in <code>Gemfile.lock</code>, this won't break anything if there is some incampatibly thing happened.</li>\n<li>Hard way, just remove <code>Gemfile.lock</code>, and run <code>bundle install</code>.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 1809, "user_id": 3786657, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/36fc24f84a8173d1242876432c3990f2?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Dess", "link": "https://stackoverflow.com/users/3786657/rahul-dess"}, "is_accepted": false, "score": 3, "last_activity_date": 1575492024, "creation_date": 1575492024, "answer_id": 59184371, "question_id": 47026174, "link": "https://stackoverflow.com/questions/47026174/find-spec-for-exe-cant-find-gem-bundler-0-a-gemgemnotfoundexception/59184371#59184371", "title": "find_spec_for_exe&#39;: can&#39;t find gem bundler (&gt;= 0.a) (Gem::GemNotFoundException)", "body": "<p>In my case the above suggestions did not work for me. Mine was little different scenario.</p>\n\n<p>When i tried installing <code>bundler</code> using <code>gem install bundler</code> .. But i was getting </p>\n\n<pre><code>ERROR:  While executing gem ... (Gem::FilePermissionError)\n    You don't have write permissions for the /Library/Ruby/Gems/2.3.0 directory.\n</code></pre>\n\n<p>then i tried using <code>sudo gem install bundler</code> then i was getting </p>\n\n<pre><code>ERROR:  While executing gem ... (Gem::FilePermissionError)\n  You don't have write permissions for the /usr/bin directory.\n</code></pre>\n\n<p>then i tried with <code>sudo gem install bundler -n /usr/local/bin</code> ( Just <code>/usr/bin</code> dint work in my case ).</p>\n\n<p>And then successfully installed <code>bundler</code></p>\n\n<p>EDIT: I use MacOS, maybe <code>/usr/bin</code> din't work for me for that reason (<a href=\"https://stackoverflow.com/a/34989655/3786657\">https://stackoverflow.com/a/34989655/3786657</a> comment )</p>\n"}, {"tags": [], "owner": {"reputation": 2139, "user_id": 208769, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7678cf457f3bcd08972a960104761cf9?s=128&d=identicon&r=PG", "display_name": "user208769", "link": "https://stackoverflow.com/users/208769/user208769"}, "is_accepted": false, "score": 1, "last_activity_date": 1582308713, "creation_date": 1582308713, "answer_id": 60344189, "question_id": 47026174, "link": "https://stackoverflow.com/questions/47026174/find-spec-for-exe-cant-find-gem-bundler-0-a-gemgemnotfoundexception/60344189#60344189", "title": "find_spec_for_exe&#39;: can&#39;t find gem bundler (&gt;= 0.a) (Gem::GemNotFoundException)", "body": "<p>Adding to the many answers, my problem stemmed from wanting to use the docker's ruby as a base, but then using rbenv on top. This screws up a lot of things.</p>\n\n<p>I fixed it in this case by:</p>\n\n<ul>\n<li>The Gemfile.lock version did need updating - changing the \"BUNDLED WITH\" to the latest version did at one point change the error message, so may have been required</li>\n<li>in .bash_profile or .bashrc, unsetting the environment variables:</li>\n</ul>\n\n<pre><code>unset GEM_HOME\nunset BUNDLE_PATH\n</code></pre>\n\n<p>After that, rbenv worked fine. Not sure how those env vars were getting loaded in the first place...</p>\n"}, {"tags": [], "owner": {"reputation": 121, "user_id": 2784661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da40839b74b9b81710abf8a11f4bf930?s=128&d=identicon&r=PG", "display_name": "Naser Mirzaei", "link": "https://stackoverflow.com/users/2784661/naser-mirzaei"}, "is_accepted": false, "score": 8, "last_activity_date": 1585428936, "creation_date": 1585428936, "answer_id": 60906902, "question_id": 47026174, "link": "https://stackoverflow.com/questions/47026174/find-spec-for-exe-cant-find-gem-bundler-0-a-gemgemnotfoundexception/60906902#60906902", "title": "find_spec_for_exe&#39;: can&#39;t find gem bundler (&gt;= 0.a) (Gem::GemNotFoundException)", "body": "<p>to install bundler that matches with your <code>Gemfile.lock</code> use:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>gem install bundler -v \"$(grep -A 1 \"BUNDLED WITH\" Gemfile.lock | tail -n 1)\"\n</code></pre>\n"}], "owner": {"reputation": 37699, "user_id": 1081396, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4da642ebb2987685f30442660dc6751e?s=128&d=identicon&r=PG", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/1081396/alvaro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111576, "favorite_count": 35, "protected_date": 1564417252, "answer_count": 15, "score": 237, "last_activity_date": 1589023717, "creation_date": 1509409595, "last_edit_date": 1569832201, "question_id": 47026174, "link": "https://stackoverflow.com/questions/47026174/find-spec-for-exe-cant-find-gem-bundler-0-a-gemgemnotfoundexception", "title": "find_spec_for_exe&#39;: can&#39;t find gem bundler (&gt;= 0.a) (Gem::GemNotFoundException)", "body": "<p>I used <code>sudo bundle install</code> and that might be the cause of the issue? </p>\n\n<p>Now I have:</p>\n\n<ul>\n<li><code>gem -v</code> 2.6.14</li>\n<li><code>ruby -v</code> ruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-darwin15]</li>\n<li><code>jekyll -v</code> jekyll 3.6.2</li>\n<li><code>bundle -v</code>Bundler version 1.16.0.pre.3</li>\n</ul>\n\n<p>I'm getting the following error when trying to run <code>bundle exec jekyll serve</code> or just <code>jekyll serve</code></p>\n\n<pre><code>/Users/myusername/.rvm/rubies/ruby-2.3.5/lib/ruby/site_ruby/2.3.0/rubygems.rb:271:in `find_spec_for_exe': can't find gem bundler (&gt;= 0.a) (Gem::GemNotFoundException)\n    from /Users/myusername/.rvm/rubies/ruby-2.3.5/lib/ruby/site_ruby/2.3.0/rubygems.rb:299:in `activate_bin_path'\n    from /Users/myusername/.rvm/gems/ruby-2.3.5/bin/bundle:23:in `&lt;main&gt;'\n    from /Users/myusername/.rvm/gems/ruby-2.3.5/bin/ruby_executable_hooks:15:in `eval'\n    from /Users/myusername/.rvm/gems/ruby-2.3.5/bin/ruby_executable_hooks:15:in `&lt;MacBooMacBook-MacBook-MacBook-Pro-MacBook-PrMacBook-MacBooMacBMaMacBMaMaMaMaMaMaMaMaMacBMaMaMaMacBMa\n</code></pre>\n\n<p>Also, when accessing the folder in which I have my blog <code>cd my_path</code> I get the following message:</p>\n\n<blockquote>\n  <p>VM used your Gemfile for selecting Ruby, it is all fine - Heroku does that too,\n  you can ignore these warnings with 'rvm rvmrc warning ignore /Library/WebServer/Documents/blog/Gemfile'.\n  To ignore the warning for all files run 'rvm rvmrc warning ignore allGemfiles'.\n  Unknown ruby interpreter version (do not know how to handle): RUBY_VERSION.</p>\n</blockquote>\n\n<p>I've no idea how to solve this. I just want to create my static blog and honestly I have no idea about Ruby, Gem or Bundle :) So I would appreciate some insights!</p>\n"}, {"tags": ["ruby", "rubygems", "rubocop"], "comments": [{"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1509409720, "post_id": 47026155, "comment_id": 80999498, "body": "Does this help? Definition: <a href=\"https://idiosyncratic-ruby.com/58-magic-instructions.html\" rel=\"nofollow noreferrer\">idiosyncratic-ruby.com/58-magic-instructions.html</a>, Style guide: <a href=\"https://github.com/bbatsov/ruby-style-guide#magic-comments\" rel=\"nofollow noreferrer\">github.com/bbatsov/ruby-style-guide#magic-comments</a>"}, {"owner": {"reputation": 1230, "user_id": 511203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ec96aadd672b8056173e4e8a5225d8b?s=128&d=identicon&r=PG", "display_name": "Mike Gorski", "link": "https://stackoverflow.com/users/511203/mike-gorski"}, "edited": false, "score": 0, "creation_date": 1509412898, "post_id": 47026155, "comment_id": 81000189, "body": "Can you share a source file with errors?"}, {"owner": {"reputation": 4855, "user_id": 3618156, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b3e1907a7f15ed006abc8ad406cf40fe?s=128&d=identicon&r=PG&f=1", "display_name": "american-ninja-warrior", "link": "https://stackoverflow.com/users/3618156/american-ninja-warrior"}, "edited": false, "score": 0, "creation_date": 1509413602, "post_id": 47026155, "comment_id": 81000350, "body": "the first line of the file is source &quot;<a href=\"https://rubygems.org\" rel=\"nofollow noreferrer\">rubygems.org</a>&quot;"}, {"owner": {"reputation": 4855, "user_id": 3618156, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b3e1907a7f15ed006abc8ad406cf40fe?s=128&d=identicon&r=PG&f=1", "display_name": "american-ninja-warrior", "link": "https://stackoverflow.com/users/3618156/american-ninja-warrior"}, "edited": false, "score": 1, "creation_date": 1540296000, "post_id": 47026155, "comment_id": 92805005, "body": "why is this downvoted?"}], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 25, "last_activity_date": 1550384064, "last_edit_date": 1550384064, "creation_date": 1509435005, "answer_id": 47029997, "question_id": 47026155, "link": "https://stackoverflow.com/questions/47026155/rubocop-how-do-you-fix-missing-magic-comment/47029997#47029997", "title": "rubocop how do you fix Missing magic comment", "body": "<p>Just add</p>\n\n<pre><code># frozen_string_literal: true\n</code></pre>\n\n<p>to the first line of each Ruby file. Or run</p>\n\n<pre><code>rubocop -a\n</code></pre>\n\n<p>to allow Rubocop to fix all offenses automatically that it is able to fix.</p>\n\n<p>Btw. I like Rubocop and use it myself, but I wouldn't call the things it finds <em>defects</em>. I see the list more like suggestions or reasons for a discussion with my co-workers.</p>\n"}, {"tags": [], "owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "is_accepted": false, "score": 1, "last_activity_date": 1509471134, "creation_date": 1509471134, "answer_id": 47041308, "question_id": 47026155, "link": "https://stackoverflow.com/questions/47026155/rubocop-how-do-you-fix-missing-magic-comment/47041308#47041308", "title": "rubocop how do you fix Missing magic comment", "body": "<p>Try running Rubocop with the <code>-D</code> option:</p>\n\n<pre><code>rubocop -D\nInspecting 1 file\nC\n\nOffenses:\n\nspec/rails_helper.rb:1:1: C: Style/FrozenStringLiteralComment: Missing magic comment # frozen_string_literal: true.\nrequire 'spec_helper'\n^\n</code></pre>\n\n<p>Adding <code>-D</code> will cause Rubocop to print the name of the cop that was violated, in this case <code>Style/FrozenStringLiteralComment</code>. You can then search for that cop in the Rubocop documentation:</p>\n\n<p><a href=\"http://www.rubydoc.info/gems/rubocop/RuboCop/Cop/Style/FrozenStringLiteralComment\" rel=\"nofollow noreferrer\">http://www.rubydoc.info/gems/rubocop/RuboCop/Cop/Style/FrozenStringLiteralComment</a></p>\n\n<blockquote>\n  <p>This cop is designed to help upgrade to Ruby 3.0. It will add the comment <code># frozen_string_literal: true</code> to the top of files to enable frozen string literals. Frozen string literals will be default in Ruby 3.0. The comment will be added below a shebang and encoding comment. The frozen string literal comment is only valid in Ruby 2.3+.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 166, "user_id": 10206592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kKKgn.jpg?s=128&g=1", "display_name": "Meursault", "link": "https://stackoverflow.com/users/10206592/meursault"}, "edited": false, "score": 0, "creation_date": 1598722084, "post_id": 54914968, "comment_id": 112554057, "body": "Also, to correct the &quot;Add an empty line after magic comments.&quot; offenses that running this command will likely produce you can use this:      rubocop --only &quot;Style/FrozenStringLiteralComment, Layout/EmptyLineAfterMagicComment&quot; -A"}, {"owner": {"reputation": 1723, "user_id": 4735914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d998392dbbbd8061d2ef13ea60955633?s=128&d=identicon&r=PG&f=1", "display_name": "jdgray", "link": "https://stackoverflow.com/users/4735914/jdgray"}, "reply_to_user": {"reputation": 166, "user_id": 10206592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kKKgn.jpg?s=128&g=1", "display_name": "Meursault", "link": "https://stackoverflow.com/users/10206592/meursault"}, "edited": false, "score": 0, "creation_date": 1598886315, "post_id": 54914968, "comment_id": 112595468, "body": "Hey good call out! Just noticed this in the docs: <a href=\"https://docs.rubocop.org/rubocop/0.89/usage/auto_correct.html\" rel=\"nofollow noreferrer\">docs.rubocop.org/rubocop/0.89/usage/auto_correct.html</a>"}], "tags": [], "owner": {"reputation": 1723, "user_id": 4735914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d998392dbbbd8061d2ef13ea60955633?s=128&d=identicon&r=PG&f=1", "display_name": "jdgray", "link": "https://stackoverflow.com/users/4735914/jdgray"}, "is_accepted": false, "score": 12, "last_activity_date": 1598886401, "last_edit_date": 1598886401, "creation_date": 1551303847, "answer_id": 54914968, "question_id": 47026155, "link": "https://stackoverflow.com/questions/47026155/rubocop-how-do-you-fix-missing-magic-comment/54914968#54914968", "title": "rubocop how do you fix Missing magic comment", "body": "<p>If you want to be more specific and run <code>rubocop</code> for <em>only</em> <code># frozen_string_literal: true</code> you can use the <code>--only</code> flag option:</p>\n<blockquote>\n<p>Run only the specified cop(s) and/or cops in the specified departments.</p>\n</blockquote>\n<p>To view those files:</p>\n<pre><code>rubocop --only Style/FrozenStringLiteralComment\n</code></pre>\n<p>To autocorrect those specific files use the <code>-a</code> flag (as mentioned in a previous answer):</p>\n<pre><code>rubocop --only Style/FrozenStringLiteralComment -a\n</code></pre>\n<p>You can view more information about autocorrect <a href=\"https://docs.rubocop.org/rubocop/0.89/usage/auto_correct.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 829, "user_id": 9428538, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-noZGWMCKQv4/AAAAAAAAAAI/AAAAAAAAASU/5qF94fMUq-U/photo.jpg?sz=128", "display_name": "Constantin De La Roche", "link": "https://stackoverflow.com/users/9428538/constantin-de-la-roche"}, "is_accepted": false, "score": 2, "last_activity_date": 1574042002, "creation_date": 1574042002, "answer_id": 58907031, "question_id": 47026155, "link": "https://stackoverflow.com/questions/47026155/rubocop-how-do-you-fix-missing-magic-comment/58907031#58907031", "title": "rubocop how do you fix Missing magic comment", "body": "<p>If you want to ignore it, add to your <code>.rubocop.yml</code></p>\n\n<pre><code>Style/FrozenStringLiteralComment:\n  Enabled: false\n</code></pre>\n\n<p>But may be you want to know <a href=\"https://stackoverflow.com/questions/37799296/what-does-the-comment-frozen-string-literal-true-do\">what \"Magic comment\" is</a>, especially if you're using Ruby 2.x</p>\n"}], "owner": {"reputation": 4855, "user_id": 3618156, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b3e1907a7f15ed006abc8ad406cf40fe?s=128&d=identicon&r=PG&f=1", "display_name": "american-ninja-warrior", "link": "https://stackoverflow.com/users/3618156/american-ninja-warrior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12454, "favorite_count": 1, "accepted_answer_id": 47029997, "answer_count": 4, "score": 10, "last_activity_date": 1598886401, "creation_date": 1509409461, "last_edit_date": 1595883076, "question_id": 47026155, "link": "https://stackoverflow.com/questions/47026155/rubocop-how-do-you-fix-missing-magic-comment", "title": "rubocop how do you fix Missing magic comment", "body": "<p>I have a library of ruby code, and to look for defects I run</p>\n\n<pre><code>$ rubocop\n</code></pre>\n\n<p>And I get</p>\n\n<pre><code>$ rubocop\nInspecting 153 files\nCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCWCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCWCCCCCCCWWCCCCC\n\nOffenses:\n\nGemfile:1:1: C: Missing magic comment # frozen_string_literal: true.\nsource \"https://rubygems.org\"\n</code></pre>\n\n<p>What modifications are required in my Gemfile to make rubocop not complain?</p>\n"}, {"tags": ["ruby", "random", "hash"], "comments": [{"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1509406971, "post_id": 47025760, "comment_id": 80998815, "body": "Is there a reason to start with a data structure of that format? Or are you open to alternatives?"}, {"owner": {"reputation": 590, "user_id": 6820501, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-0V9mIgdiVKM/AAAAAAAAAAI/AAAAAAAADdw/LVw8LNpAV_Y/photo.jpg?sz=128", "display_name": "Travis Su", "link": "https://stackoverflow.com/users/6820501/travis-su"}, "reply_to_user": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1509407035, "post_id": 47025760, "comment_id": 80998838, "body": "@MarkThomas yeah that data structure is required due to my HW requirement."}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1509407404, "post_id": 47025760, "comment_id": 80998939, "body": "Why is the value for <code>&quot;&lt;object&gt;&quot;</code> <code>[[&quot;waves&quot;], [&quot;big&quot;, &quot;yellow&quot;, &quot;flowers&quot;], [&quot;slugs&quot;]]</code>? Why wouldn&#39;t it be <code>[[&quot;waves&quot;], [&quot;big&quot;], [&quot;yellow&quot;], [&quot;flowers&quot;], [&quot;slugs&quot;]]</code>? In your example sentence, &quot;yellow&quot; appears on its own without &quot;big&quot; or &quot;flowers.&quot;"}, {"owner": {"reputation": 590, "user_id": 6820501, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-0V9mIgdiVKM/AAAAAAAAAAI/AAAAAAAADdw/LVw8LNpAV_Y/photo.jpg?sz=128", "display_name": "Travis Su", "link": "https://stackoverflow.com/users/6820501/travis-su"}, "reply_to_user": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1509408729, "post_id": 47025760, "comment_id": 80999260, "body": "@moveson if that&#39;s the case the output would be &quot;big yellow flowers&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "reply_to_user": {"reputation": 590, "user_id": 6820501, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-0V9mIgdiVKM/AAAAAAAAAAI/AAAAAAAADdw/LVw8LNpAV_Y/photo.jpg?sz=128", "display_name": "Travis Su", "link": "https://stackoverflow.com/users/6820501/travis-su"}, "edited": false, "score": 0, "creation_date": 1509409310, "post_id": 47026073, "comment_id": 80999392, "body": "Not sure if you&#39;ve been taught recursion yet, but as you can see, it makes for very brief code."}], "tags": [], "owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "is_accepted": true, "score": 2, "last_activity_date": 1509408784, "creation_date": 1509408784, "answer_id": 47026073, "question_id": 47025760, "link": "https://stackoverflow.com/questions/47025760/random-sentence-generator-in-ruby-how-to-randomly-select-values-on-specific-ke/47026073#47026073", "title": "Random Sentence Generator in Ruby : How to randomly select values on specific key in hash?", "body": "<p>I assume they're looking for a recursive method, let's call it <code>generate</code>.</p>\n\n<pre><code>def generate(key)\n</code></pre>\n\n<p>Read the hash at the key and take one randomly using <code>sample</code>:</p>\n\n<pre><code>  words = @hash[key].sample\n</code></pre>\n\n<p>Then, for each word, check to see if it's a <code>&lt;key&gt;</code>. If so, call <code>generate</code> on it, otherwise save it:</p>\n\n<pre><code>    if (word.start_with?(\"&lt;\") &amp;&amp; word.end_with?(\"&gt;\"))\n      generate(word)\n    else\n      @sentence &lt;&lt; word\n    end\n</code></pre>\n\n<p>Putting it all together:</p>\n\n<pre><code>@hash = {\"&lt;start&gt;\"=&gt;[[\"The\", \"&lt;object&gt;\", \"&lt;verb&gt;\", \"tonight.\"]],\n        \"&lt;object&gt;\"=&gt;[[\"waves\"], [\"big\", \"yellow\", \"flowers\"], [\"slugs\"]], \n        \"&lt;verb&gt;\"=&gt;[[\"sigh\", \"&lt;adverb&gt;\"], [\"portend\", \"like\", \"&lt;object&gt;\"],[\"die\", \"&lt;adverb&gt;\"]], \n        \"&lt;adverb&gt;\"=&gt;[[\"warily\"], [\"grumpily\"]]}\n\n@sentence = []\n\ndef generate(key)\n  words = @hash[key].sample\n  words.each do |word|\n    if (word.start_with?(\"&lt;\") &amp;&amp; word.end_with?(\"&gt;\"))\n      generate(word)\n    else\n      @sentence &lt;&lt; word\n    end\n  end\nend\n\ngenerate(\"&lt;start&gt;\")\nputs @sentence.join(\" \")\n</code></pre>\n\n<p>Notice I used @-variables to make their scope reachable from within the method.</p>\n\n<p>Sample output: <code>The big yellow flowers sigh grumpily tonight.</code></p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1509474714, "last_edit_date": 1509474714, "creation_date": 1509433744, "answer_id": 47029699, "question_id": 47025760, "link": "https://stackoverflow.com/questions/47025760/random-sentence-generator-in-ruby-how-to-randomly-select-values-on-specific-ke/47029699#47029699", "title": "Random Sentence Generator in Ruby : How to randomly select values on specific key in hash?", "body": "<p><strong>Code</strong></p>\n\n<pre><code>def generate(hash, start_key)\n  mod_hash = hash.transform_values{ |v| v.map { |a| a.join(' ') } }\n  sentence = mod_hash[start_key].sample\n  while sentence.include?('&lt;')\n    sentence.gsub!(/\\&lt;.+?\\&gt;/) { |s| mod_hash[s].sample }\n  end\n  sentence\nend  \n</code></pre>\n\n<p><strong>Examples</strong></p>\n\n<pre><code>hash = { \"&lt;start&gt;\" =&gt;[[\"The\", \"&lt;object&gt;\", \"&lt;verb&gt;\", \"tonight.\"]],\n         \"&lt;object&gt;\"=&gt;[[\"waves\"], [\"big\", \"yellow\", \"flowers\"], [\"slugs\"]],\n         \"&lt;verb&gt;\"  =&gt;[[\"sigh\", \"&lt;adverb&gt;\"], [\"portend\", \"like\", \"&lt;object&gt;\"],\n                      [\"die\", \"&lt;adverb&gt;\"]],\n         \"&lt;adverb&gt;\"=&gt;[[\"warily\"], [\"grumpily\"]]}\n\ngenerate(hash, '&lt;start&gt;') #=&gt; \"The big yellow flowers die grumpily tonight.\"\ngenerate(hash, '&lt;start&gt;') #=&gt; \"The waves die warily tonight.\"\ngenerate(hash, '&lt;start&gt;') #=&gt; \"The slugs sigh warily tonight.\"\ngenerate(hash, '&lt;verb&gt;')  #=&gt; \"portend like big yellow flowers\"\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p>Firstly, <code>mod_hash</code> is constructed.</p>\n\n<pre><code>mod_hash = hash.transform_values{ |v| v.map { |a| a.join(' ') } }\n  #=&gt; {\"&lt;start&gt;\" =&gt;[\"The &lt;object&gt; &lt;verb&gt; tonight.\"],\n  #    \"&lt;object&gt;\"=&gt;[\"waves\", \"big yellow flowers\", \"slugs\"],\n  #    \"&lt;verb&gt;\"  =&gt;[\"sigh &lt;adverb&gt;\", \"portend like &lt;object&gt;\", \"die &lt;adverb&gt;\"],\n  #    \"&lt;adverb&gt;\"=&gt;[\"warily\", \"grumpily\"]}\n</code></pre>\n\n<p>Then the initial sentence is obtained.</p>\n\n<pre><code>start_key = '&lt;start&gt;'\nsentence = mod_hash[start_key].sample\n  #=&gt; \"The &lt;object&gt; &lt;verb&gt; tonight.\"\n</code></pre>\n\n<p>We now simply replace each word in <code>sentence</code> that begins <code>'&lt;'</code> and ends <code>'&gt;'</code> with a randomly-selected element of the value of that key in <code>mod_hash</code> (the value being an array of strings). This continues until there are no more such words in <code>sentence</code>.</p>\n\n<p>The question mark in the regex means that one or more characters are to be matched <em>lazily</em>. That means that the match is terminated as soon as the first <code>'&gt;'</code> is encountered. If, for example, the sentence were <code>\"a &lt;hat&gt; and &lt;cat&gt;!\"</code>, the regex would match both <code>&lt;hat&gt;</code> and <code>&lt;cat&gt;</code>. By contrast, if the match were <em>greedy</em> (the default), it would match <code>\"&lt;hat&gt; and &lt;cat&gt;\"</code>, which of course is not a key of <code>mod_hash</code>.</p>\n\n<p>Note that <code>hash</code> could have a structure that results in a non-terminating sequence of replacements.</p>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.4.0/Hash.html#method-i-transform_values\" rel=\"nofollow noreferrer\">Hash#transform_values</a>.</p>\n"}], "owner": {"reputation": 590, "user_id": 6820501, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-0V9mIgdiVKM/AAAAAAAAAAI/AAAAAAAADdw/LVw8LNpAV_Y/photo.jpg?sz=128", "display_name": "Travis Su", "link": "https://stackoverflow.com/users/6820501/travis-su"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 625, "favorite_count": 0, "accepted_answer_id": 47026073, "answer_count": 2, "score": 1, "last_activity_date": 1509474714, "creation_date": 1509406279, "last_edit_date": 1509409105, "question_id": 47025760, "link": "https://stackoverflow.com/questions/47025760/random-sentence-generator-in-ruby-how-to-randomly-select-values-on-specific-ke", "title": "Random Sentence Generator in Ruby : How to randomly select values on specific key in hash?", "body": "<p>I'm working on a Ruby verison of RSG and somehow stuck on the sentence generating process (...)</p>\n\n<p>so I managed to implement all functions like read, convert to hash...,etc. But problem is how to randomly pick values in hash to generate the sentence?</p>\n\n<p>Now I have a hash here:</p>\n\n<pre><code>hash = {\"&lt;start&gt;\"=&gt;[[\"The\", \"&lt;object&gt;\", \"&lt;verb&gt;\", \"tonight.\"]],\n        \"&lt;object&gt;\"=&gt;[[\"waves\"], [\"big\", \"yellow\", \"flowers\"], [\"slugs\"]], \n        \"&lt;verb&gt;\"=&gt;[[\"sigh\", \"&lt;adverb&gt;\"], [\"portend\", \"like\", \"&lt;object&gt;\"],[\"die\", \"&lt;adverb&gt;\"]], \n        \"&lt;adverb&gt;\"=&gt;[[\"warily\"], [\"grumpily\"]]}\n</code></pre>\n\n<p>The Objective is to assemble the strings using random values in the hash for example when the function iterates to <code>\"&lt;object&gt;\"</code>, it will take it as a key and search in the hash to find matching key then randomly pick the corresponding values (one of the strings in <code>\"&lt;object&gt;\"=&gt;[[\"waves\"], [\"big\", \"yellow\", \"flowers\"], [\"slugs\"]]</code>) and assemble it, then the output would be something like this:</p>\n\n<pre><code>\"The waves sigh warily tonight\" \n</code></pre>\n\n<p>My code so far:</p>\n\n<pre><code>hash.each do |_, value|\n  value.map{|x| x.map{|y| is_non_terminal?(y) ? (puts value.values_at(\"SomethingToPutInto\")) : (puts y)}}\nend\n</code></pre>\n\n<p>Somehow the logics in the code becomes too complicated and I'm stuck on this step.. Using <code>values_at</code> will cause TypeError: <code>no implicit conversion of String into Integer (TypeError)</code></p>\n\n<p>For <code>is_non_terminal?(y)</code> is just a function to check whether the string contains <code>&lt;</code> and <code>&gt;</code>:</p>\n\n<pre><code>def is_non_terminal?(s)\n   s.include?('&lt;' &amp;&amp; '&gt;') ? true : false\nend\n</code></pre>\n"}]