[{"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "edited": false, "score": 1, "creation_date": 1519252784, "post_id": 48916700, "comment_id": 84839894, "body": "can you show how you call this function?"}, {"owner": {"reputation": 2110, "user_id": 327229, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d29c53311c32eb408aaba2e5ae55d161?s=128&d=identicon&r=PG", "display_name": "radixhound", "link": "https://stackoverflow.com/users/327229/radixhound"}, "edited": false, "score": 0, "creation_date": 1519253077, "post_id": 48916700, "comment_id": 84840004, "body": "The first thing you need to do is figure out what line is causing the error. Most likely when your method is called, only 1 parameter is given, so you need to look at the code that calls your method and ensure it always passes 2 parameters. It could also be that it&#39;s failing on some other line which is throwing you off. Ultimately you need to provide more information if someone is going to help you figure it out."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9157191"}, "reply_to_user": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "edited": false, "score": 0, "creation_date": 1519253857, "post_id": 48916700, "comment_id": 84840284, "body": "@meta, i call User.find_by_exemple(&#39;exemple&#39;)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9157191"}, "reply_to_user": {"reputation": 2110, "user_id": 327229, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d29c53311c32eb408aaba2e5ae55d161?s=128&d=identicon&r=PG", "display_name": "radixhound", "link": "https://stackoverflow.com/users/327229/radixhound"}, "edited": false, "score": 0, "creation_date": 1519254099, "post_id": 48916700, "comment_id": 84840367, "body": "@radixhound was just this line the is causing the error, but as i&#39;m learning i created this exemple to understand how to pass the parameters to the function"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1519285974, "post_id": 48916700, "comment_id": 84850606, "body": "The problem is in how you call the method. Somehow, it seems you are only passing one argument, but have defined the method to take two parameters. Unfortunately, you don&#39;t show the part of the code where you are calling the method, so there is no way that we can possibly help you."}], "answers": [{"comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1519253591, "post_id": 48916827, "comment_id": 84840195, "body": "What happens when you have <code>user_1</code> with <code>username = &#39;email@to_find.com&#39;</code> and <code>email = &#39;foo@bar.com&#39;</code> and <code>user_2</code> with <code>username = &#39;foo@bar.com&#39;</code> and <code>email = &#39;email@to_find.com&#39;</code> and you call <code>User.find_by_example(&#39;email@to_find.com&#39;)</code>?"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1519254217, "post_id": 48916827, "comment_id": 84840417, "body": "In the latter case, why have a new function? Why not just do <code>User.find_by(email: &#39;email@example.com&#39;)</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9157191"}, "edited": false, "score": 0, "creation_date": 1519254289, "post_id": 48916827, "comment_id": 84840449, "body": "@Pablo thank you, but one of my doubts is why must not use the attibute as the parameters? and should be just 1 when the function have a conditional?"}, {"owner": {"reputation": 2885, "user_id": 3372172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q3RaO.png?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3372172/pablo"}, "edited": false, "score": 0, "creation_date": 1519254447, "post_id": 48916827, "comment_id": 84840493, "body": "You know what happens :). Just showing lula the possible error in the way she is calling the function and showing different ways to pass parameters, as she asked."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1519254597, "post_id": 48916827, "comment_id": 84840549, "body": "Oh, this makes my heart weep."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9157191"}, "edited": false, "score": 0, "creation_date": 1519254666, "post_id": 48916827, "comment_id": 84840568, "body": "Pablo, thank you, i&#39;m starting to understand, so in this case, you did not pass the parameter name but just a reference?"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1519254864, "post_id": 48916827, "comment_id": 84840641, "body": "While you&#39;re at it, you might as well discuss how to handle <code>nil</code> cases (like, <code>User.find_by_example</code> - with no parameters)."}, {"owner": {"reputation": 2885, "user_id": 3372172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q3RaO.png?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3372172/pablo"}, "edited": false, "score": 0, "creation_date": 1519254891, "post_id": 48916827, "comment_id": 84840651, "body": "In the first case I&#39;m passing one parameter (a string) and the function will use it as a name and as an email (it will do the find_by twice with this parameter, if the first find does not work). In the second case, I&#39;m also passing one parameter, but this time it is a hash. Depending on the keys in the hash, the function will do the corresponding find_by."}, {"owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "edited": false, "score": 0, "creation_date": 1519296519, "post_id": 48916827, "comment_id": 84857037, "body": "This <code>if..elseif</code> code can be improved if you just call <code>find_by(email: &#39;foo&#39;)</code>. I&#39;m pretty sure <code>find_by_WHATEVER_FIELD</code> methods are discouraged or even deprecated in current rails."}], "tags": [], "owner": {"reputation": 2885, "user_id": 3372172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q3RaO.png?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3372172/pablo"}, "is_accepted": true, "score": 1, "last_activity_date": 1519260652, "last_edit_date": 1519260652, "creation_date": 1519253252, "answer_id": 48916827, "question_id": 48916700, "link": "https://stackoverflow.com/questions/48916700/ruby-passing-parameters/48916827#48916827", "title": "Ruby passing parameters", "body": "<p>You must be calling the function like `User.find_by_example(\"name to find\") and the function expects two arguments (name and email). You could define the function as:</p>\n\n<pre><code>def self.find_by_example(term)\n  user = User.find_by_username(term) || User.find_by_email(term)\nend\n</code></pre>\n\n<p>And call it <code>User.find_by_example(\"Name to find\")</code> or <code>User.find_by_example(\"email@to_find.com\")</code></p>\n\n<p>This does not work ok if you have users with a username like an email. And it is not much efficient if you wish to search by other fields. SO you could also:</p>\n\n<pre><code>def self.find_by_example(terms)\n  if terms[:email]\n    user = User.find_by_email(terms[:email])\n  elsif terms[:username]\n    user = User.find_by_username(terms[:username])\n  elsif terms[:id]\n    user = User.find_by_id(terms[:id])\n  elsif terms[:document]\n    user = User.find_by_document(terms[:document])\n  end\nend\n</code></pre>\n\n<p>And call the method <code>User.find_by_example(:email =&gt; \"email@example.com\")</code>. This is similar to the <code>find_by</code> method that Active Record already provides (but allows many arguments), so no need to implement it.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9157191"}, "edited": false, "score": 0, "creation_date": 1519324650, "post_id": 48925909, "comment_id": 84876344, "body": "thank you for your contribution, i found that has a lot of way to solve this too. but, my first doubt in this case was about the parameters. which Pablo clarified me as i understood, that was not about pass the attributes itself but a reference to it."}], "tags": [], "owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "is_accepted": false, "score": 0, "last_activity_date": 1519297672, "creation_date": 1519297672, "answer_id": 48925909, "question_id": 48916700, "link": "https://stackoverflow.com/questions/48916700/ruby-passing-parameters/48925909#48925909", "title": "Ruby passing parameters", "body": "<p>The proposed and accepted answer is not really the equivalent of the code asked in the question. It is accepted, so one might assume that it guessed the OP intent correctly. But I think it can be useful for (especially junior) programmers to think about the problem more deeply. </p>\n\n<h1>Think of what method should do</h1>\n\n<p>(not just if it immediately gives you result you wish to see, there can be surprises in the edge cases)</p>\n\n<p>The original code</p>\n\n<pre><code>def self.find_by_example(username, email)\n  user = User.find_by_username(username) || User.find_by_email(email)\nend\n</code></pre>\n\n<p>Could be used this way <code>x.find_by_example(nil, 'test@example.com')</code>. \nIf we assume there can't be users with NULL <code>username</code> (which IMO is a reasonable assumption), the call would result in finding an user strictly by <code>email</code>. </p>\n\n<p>The proposed solution does not give you this possibility:</p>\n\n<pre><code>def self.find_by_example(term)\n  user = User.find_by_username(term) || User.find_by_email(term)\nend\n</code></pre>\n\n<p><code>x.find_by_example('test@example.com')</code> would return user with such username if exists, and (possibly other) user with such e-mail otherwise. </p>\n\n<p>In other words - you have less control which field is used to find a user (which can be correct, if that's really what you need) </p>\n\n<p>So it depends on the OP intent. </p>\n\n<p>If one want to retain how the original method works, but improve the interface, it could be done like this: </p>\n\n<pre><code>def self.find_by_example2(username: nil, email: nil)\n  user = User.find_by_username(username) || User.find_by_email(email)\nend\n</code></pre>\n\n<p>And calling <code>x.find_by_example2(email: 'test@example.com')</code> is equivalent to <code>x.find_by_example(nil, 'test@example.com')</code> but looks better. </p>\n\n<h1>Bonus: Performance implications</h1>\n\n<p>The proposed solution</p>\n\n<pre><code>def self.find_by_example(term)\n  user = User.find_by_username(term) || User.find_by_email(term)\nend\n</code></pre>\n\n<p>makes second query when the user is not find by <code>username</code>. You can improve it as well if you wish to employ some sql magic:</p>\n\n<pre><code>def self.find_by_example(term)\n  user = User.where(\"username = ? OR (username IS NULL and email = ?)\", term, term).first\nend\n</code></pre>\n\n<p>There's another possibility (though not 100% equivalent to the accepted solution): </p>\n\n<pre><code>def self.find_by_example(term)\n  user = User.where(\"username = ? OR email = ?\", term, term).first\nend\n</code></pre>\n\n<p>(I'll leave as an exercise the answer how those are different, to keep this post short...ish)</p>\n\n<h1>Bonus 2: flexibility</h1>\n\n<p>This</p>\n\n<pre><code>def self.find_by_example(terms)\n  if terms[:email]\n    user = User.find_by_email(terms[:email])\n  elsif terms[:username]\n    user = User.find_by_username(terms[:username])\n  elsif terms[:id]\n    user = User.find_by_id(terms[:id])\n  elsif terms[:document]\n    user = User.find_by_document(terms[:document])\n  end\nend\n</code></pre>\n\n<p>is a waste of your time, because rails gives you already better interface to do this. </p>\n\n<p>Instead of calling</p>\n\n<pre><code>x.find_by_example(document: 'foo')\n</code></pre>\n\n<p>you could just do </p>\n\n<pre><code>User.find_by(document: 'foo')\n</code></pre>\n\n<p>There's really no need to implement it that way, it's basically crippled version of ActiveRecord interface, that you have to maintain as you add new fields to <code>User</code> model.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9157191"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 48916827, "answer_count": 2, "score": -1, "last_activity_date": 1519302114, "creation_date": 1519252571, "last_edit_date": 1519302114, "question_id": 48916700, "link": "https://stackoverflow.com/questions/48916700/ruby-passing-parameters", "title": "Ruby passing parameters", "body": "<p>What is the proper way to pass the parameters to a function?</p>\n\n<p>For example:</p>\n\n<pre><code> def self.find_by_example(username, email)\n   user = User.find_by_username(username) || User.find_by_email(email)\n end\n</code></pre>\n\n<p>I would like to find the user by his <code>username</code> or <code>email</code> but if a create a function passing the 2 parameters Rails shows</p>\n\n<blockquote>\n  <p>(wrong number of arguments (given 1, expected 2))</p>\n</blockquote>\n\n<p>When I call <code>User.find_by_example('example')</code></p>\n\n<p>I still don't get it, the parameters passed in must not be the attribute?\nand why does it say \"given 1\"?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "stripe-payments"], "comments": [{"owner": {"reputation": 2110, "user_id": 327229, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d29c53311c32eb408aaba2e5ae55d161?s=128&d=identicon&r=PG", "display_name": "radixhound", "link": "https://stackoverflow.com/users/327229/radixhound"}, "edited": false, "score": 0, "creation_date": 1519253248, "post_id": 48916558, "comment_id": 84840065, "body": "Look at the output of your rails server and your javascript console. One of them will probably give you more information. Is it even posting to your rails server? If so is it doing anything? Is it erroring?"}, {"owner": {"reputation": 119, "user_id": 8883284, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-xmS4vtu8uvM/AAAAAAAAAAI/AAAAAAAAAaI/LgUjMM_2s6c/photo.jpg?sz=128", "display_name": "miklki14567", "link": "https://stackoverflow.com/users/8883284/miklki14567"}, "reply_to_user": {"reputation": 2110, "user_id": 327229, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d29c53311c32eb408aaba2e5ae55d161?s=128&d=identicon&r=PG", "display_name": "radixhound", "link": "https://stackoverflow.com/users/327229/radixhound"}, "edited": false, "score": 0, "creation_date": 1519253650, "post_id": 48916558, "comment_id": 84840206, "body": "When I fill out the payment form nothing happens in my server logs. Although, when I refresh the page and click on the button I see there is an error It&#39;s &#39;&lt;Stripe::CardError: (Status 402) (Request req_kIesUxNbPgbABQ) Cannot charge a customer that has no active card&gt;&#39; error. But it doesn&#39;t ever load the stripe popup payment form."}, {"owner": {"reputation": 1070, "user_id": 5915807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f4095e2e965e552e521bc9d38886d77?s=128&d=identicon&r=PG", "display_name": "korben", "link": "https://stackoverflow.com/users/5915807/korben"}, "edited": false, "score": 1, "creation_date": 1519254184, "post_id": 48916558, "comment_id": 84840403, "body": "You need to replace <code>function(token) { token.id }</code> with code that sends that <code>token.id</code> to your backend.  I&#39;d use AJAX."}, {"owner": {"reputation": 119, "user_id": 8883284, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-xmS4vtu8uvM/AAAAAAAAAAI/AAAAAAAAAaI/LgUjMM_2s6c/photo.jpg?sz=128", "display_name": "miklki14567", "link": "https://stackoverflow.com/users/8883284/miklki14567"}, "edited": false, "score": 0, "creation_date": 1519269188, "post_id": 48916558, "comment_id": 84844384, "body": "Alright, I will try this out."}, {"owner": {"reputation": 119, "user_id": 8883284, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-xmS4vtu8uvM/AAAAAAAAAAI/AAAAAAAAAaI/LgUjMM_2s6c/photo.jpg?sz=128", "display_name": "miklki14567", "link": "https://stackoverflow.com/users/8883284/miklki14567"}, "reply_to_user": {"reputation": 1070, "user_id": 5915807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f4095e2e965e552e521bc9d38886d77?s=128&d=identicon&r=PG", "display_name": "korben", "link": "https://stackoverflow.com/users/5915807/korben"}, "edited": false, "score": 0, "creation_date": 1519342730, "post_id": 48916558, "comment_id": 84884990, "body": "@korben you had the correct answer. How would I give you credit?"}, {"owner": {"reputation": 1070, "user_id": 5915807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f4095e2e965e552e521bc9d38886d77?s=128&d=identicon&r=PG", "display_name": "korben", "link": "https://stackoverflow.com/users/5915807/korben"}, "edited": false, "score": 1, "creation_date": 1519419286, "post_id": 48916558, "comment_id": 84918961, "body": "@miklki14567 - Just enjoy using Stripe.  I work for Stripe and giving you good answers is part of my job.  :)"}], "owner": {"reputation": 119, "user_id": 8883284, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-xmS4vtu8uvM/AAAAAAAAAAI/AAAAAAAAAaI/LgUjMM_2s6c/photo.jpg?sz=128", "display_name": "miklki14567", "link": "https://stackoverflow.com/users/8883284/miklki14567"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 310, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1519267597, "creation_date": 1519251924, "last_edit_date": 1519267597, "question_id": 48916558, "link": "https://stackoverflow.com/questions/48916558/stripe-custom-checkout-issue-with-rails", "title": "Stripe Custom Checkout Issue with Rails", "body": "<p>I'm currently creating a job board where when a customer posts a job board they pay for it in one form and it will then post the job and charge there card all at once.</p>\n\n<p>First, I used the standard Stripe Checkout button along with my listings form and it submitted both my form and took payment.</p>\n\n<p>Then I tried customizing the Stripe Checkout button using the custom docs <a href=\"https://stripe.com/docs/checkout#integration-custom\" rel=\"nofollow noreferrer\"><strong>found here</strong></a> but I can't seem to understand what I'm missing. </p>\n\n<p>Now when I click on the button it pops up like normal but when I submit the button my Rails form doesn't create nor does it charge Stripe. </p>\n\n<p><strong>listings_controller.rb</strong></p>\n\n<pre><code>def create\n  p @listing = Listing.new(listing_params)\n  @categories = Category.all.map{|c| [ c.title, c.id ] }\n  charge_error = nil\n\n  p @listing.valid?\n  p @listing.errors\n\n  if @listing.valid?\n    begin\n      customer = Stripe::Customer.create(\n        :email =&gt; params[:stripeEmail],\n        :card =&gt; params[:stripeToken]\n      )\n\n      charge = Stripe::Charge.create(\n        :customer =&gt; customer.id,\n        :amount =&gt; @amount,\n        :description =&gt; 'New Job Posting',\n        :currency =&gt; 'usd'\n      )\n\n    rescue Stripe::CardError =&gt; e\n      p 'rescue'\n      p e\n      charge_error = e.message\n    end\n\n    if charge_error\n      p 'change error not nil'\n      p charge_error\n      flash[:error] = charge_error\n      render :new\n    else\n      p 'trying to save listing'\n      p @listing.save\n      redirect_to @listing\n    end\n  else\n    p 'listing not valid'\n    flash[:error] = 'one or more errors in your orders'\n    render :new\n  end\nend\n</code></pre>\n\n<p><strong>listings/_form.html.erb</strong></p>\n\n<pre><code>//Top of the page //\n&lt;script src=\"https://checkout.stripe.com/checkout.js\"&gt;&lt;/script&gt;\n\n&lt;button class='btn btn-block btn-primary' id='customButton'&gt;\n  Pay and Post Your Job Posting!\n&lt;/button&gt;\n\n&lt;% end %&gt;\n\n&lt;script&gt;\n  var handler = StripeCheckout.configure({\n    key: \"pk_test_iSItYFJUx04fB9Ax6yGQjRDP\",\n    image: \"https://stripe.com/img/documentation/checkout/marketplace.png\",\n    name: \"Example Name\",\n    description: \"Pro Subscription ($29 per month)\",\n    panelLabel: \"Subscribe\",\n    allowRememberMe: false,\n    locale: 'auto',\n    token: function(token) {\n      token.id\n    }\n  });\n\n  document.getElementById('customButton').addEventListener('click', function(e) {\n    handler.open({\n      name: 'Example Name #2',\n      description: 'Subscripe ($99/monthly)',\n      amount: 2000\n    });\n    e.preventDefault();\n  });\n\n  // Close Checkout on page navigation:\n  window.addEventListener('popstate', function() {\n    handler.close();\n  });\n&lt;/script&gt;\n</code></pre>\n\n<p>If you need any other info please ask. Thank you!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 880, "user_id": 3334690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1a9715a46ee28e3151148688c0149f9?s=128&d=identicon&r=PG&f=1", "display_name": "user3334690", "link": "https://stackoverflow.com/users/3334690/user3334690"}, "edited": false, "score": 0, "creation_date": 1519250632, "post_id": 48915845, "comment_id": 84838935, "body": "So just to clarify; you want to ask your rails application how to get to one model from another through associations you&#39;ve defined?"}, {"owner": {"reputation": 1961, "user_id": 7754093, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VoAj5.png?s=128&g=1", "display_name": "Francesco Meli", "link": "https://stackoverflow.com/users/7754093/francesco-meli"}, "reply_to_user": {"reputation": 880, "user_id": 3334690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1a9715a46ee28e3151148688c0149f9?s=128&d=identicon&r=PG&f=1", "display_name": "user3334690", "link": "https://stackoverflow.com/users/3334690/user3334690"}, "edited": false, "score": 0, "creation_date": 1519250945, "post_id": 48915845, "comment_id": 84839089, "body": "Yes I believe that would a clearer way to explain it"}, {"owner": {"reputation": 1961, "user_id": 7754093, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VoAj5.png?s=128&g=1", "display_name": "Francesco Meli", "link": "https://stackoverflow.com/users/7754093/francesco-meli"}, "reply_to_user": {"reputation": 880, "user_id": 3334690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1a9715a46ee28e3151148688c0149f9?s=128&d=identicon&r=PG&f=1", "display_name": "user3334690", "link": "https://stackoverflow.com/users/3334690/user3334690"}, "edited": false, "score": 0, "creation_date": 1519250998, "post_id": 48915845, "comment_id": 84839115, "body": "I do need the hash though, exactly as explained."}, {"owner": {"reputation": 880, "user_id": 3334690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1a9715a46ee28e3151148688c0149f9?s=128&d=identicon&r=PG&f=1", "display_name": "user3334690", "link": "https://stackoverflow.com/users/3334690/user3334690"}, "edited": false, "score": 0, "creation_date": 1519251913, "post_id": 48915845, "comment_id": 84839538, "body": "When rails loads your models it is rather lazy about it.  That means that your application might know about the house model but might not yet know about the city model.  So you would get associations that could not be followed even though the path does exist.  I think you could fix that with <code>config.eager_load = true</code> in your Application config though that will increase application boot time."}, {"owner": {"reputation": 1961, "user_id": 7754093, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VoAj5.png?s=128&g=1", "display_name": "Francesco Meli", "link": "https://stackoverflow.com/users/7754093/francesco-meli"}, "reply_to_user": {"reputation": 880, "user_id": 3334690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1a9715a46ee28e3151148688c0149f9?s=128&d=identicon&r=PG&f=1", "display_name": "user3334690", "link": "https://stackoverflow.com/users/3334690/user3334690"}, "edited": false, "score": 0, "creation_date": 1519252086, "post_id": 48915845, "comment_id": 84839619, "body": "Ok let&#39;s assume then that I can eager load my application, can you think of a way of getting the path?"}, {"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1519254662, "post_id": 48915845, "comment_id": 84840566, "body": "You say path, do you mean a URL? This is very unclear."}, {"owner": {"reputation": 1961, "user_id": 7754093, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VoAj5.png?s=128&g=1", "display_name": "Francesco Meli", "link": "https://stackoverflow.com/users/7754093/francesco-meli"}, "edited": false, "score": 0, "creation_date": 1519254877, "post_id": 48915845, "comment_id": 84840646, "body": "Nope I don&#39;t mean url I mean the an hash describing the series of associations to go from a model to another"}, {"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1519255397, "post_id": 48915845, "comment_id": 84840829, "body": "Ok can you explain why? I ask because it seems like you are trying to do something that might be done easier in a different way. What are trying to achieve ultimately? &quot;...to go from a model to another&quot; is vague and does not seem to align with usual Rails conventions."}, {"owner": {"reputation": 1961, "user_id": 7754093, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VoAj5.png?s=128&g=1", "display_name": "Francesco Meli", "link": "https://stackoverflow.com/users/7754093/francesco-meli"}, "edited": false, "score": 0, "creation_date": 1519259633, "post_id": 48915845, "comment_id": 84841993, "body": "I&#39;m realizing I probably need a tree to do this which needs to compose an hash with plural/singular keys. Anyway I did write a little explanation above."}, {"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1519265272, "post_id": 48915845, "comment_id": 84843381, "body": "Ok, that&#39;s quite a bit more clear. When you say &quot;generate&quot; what do you want to get back, a string? An array? <code>&quot;can :read, House, { neighborhood: { users: {id: user.id } }&quot;</code> is different than <code>[can :read, House, { neighborhood: { users: {id: user.id } }]</code>. It sounds like you are passing this to CanCan, what is it expecting as far as the type of object?"}, {"owner": {"reputation": 1961, "user_id": 7754093, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VoAj5.png?s=128&g=1", "display_name": "Francesco Meli", "link": "https://stackoverflow.com/users/7754093/francesco-meli"}, "edited": false, "score": 0, "creation_date": 1519266154, "post_id": 48915845, "comment_id": 84843589, "body": "the method signature is defined as can(symbol, Model, hash). Does that make sense?"}, {"owner": {"reputation": 1961, "user_id": 7754093, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VoAj5.png?s=128&g=1", "display_name": "Francesco Meli", "link": "https://stackoverflow.com/users/7754093/francesco-meli"}, "edited": false, "score": 0, "creation_date": 1519266218, "post_id": 48915845, "comment_id": 84843596, "body": "what I would like to generate is only the last argument aka hash."}, {"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "reply_to_user": {"reputation": 1961, "user_id": 7754093, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VoAj5.png?s=128&g=1", "display_name": "Francesco Meli", "link": "https://stackoverflow.com/users/7754093/francesco-meli"}, "edited": false, "score": 0, "creation_date": 1519266537, "post_id": 48915845, "comment_id": 84843675, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/165603/discussion-between-beartech-and-pnknrg\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "is_accepted": true, "score": 1, "last_activity_date": 1519278726, "creation_date": 1519278726, "answer_id": 48920509, "question_id": 48915845, "link": "https://stackoverflow.com/questions/48915845/association-path-between-2-rails-models/48920509#48920509", "title": "Association path between 2 Rails models", "body": "<p>This certainly requires quite a bit of meta-programming. This could be a start using the <code>reflections_on_all_associations</code> method...</p>\n\n<p>Given <code>permission read_own_state_cities</code></p>\n\n<pre><code>def permission(perms)\n  @perms = perms.split('_')  #['read', 'own', 'state', 'cities']\n  @model = @perms[-1].singularize.capitalize.constantize   #City\n  @action = @perms[0].to_sym   #:read\n  @ownership = @perms[1].to_sym   #:own\n  @top_level = @perms[2]   #:state\n\n  hash_items = []\n  current_level = @top_level\n  until current_level = :user do\n    hash_items &lt;&lt; current_level\n    current_level = current_level.reflect_on_all_associations(:has_many).first.name.to_sym\n  end   #[:state, :cities, :neighborhoods]\n\n  @hash = hash_items.reverse.inject({users: {}}) { |a, n| { n =&gt; a } } #{state: {cities: {neigborhoods: {users: {}}}}}\nend\n</code></pre>\n\n<p>This is as far as I can get easily without having your actual situation to test against. You'll need to address how you decide what goes into the <code>users: {}</code> hash based on the value of <code>@ownership</code>. That should give you most everything you need to end up building a <code>can....</code> on the fly.       </p>\n"}], "owner": {"reputation": 1961, "user_id": 7754093, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VoAj5.png?s=128&g=1", "display_name": "Francesco Meli", "link": "https://stackoverflow.com/users/7754093/francesco-meli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 48920509, "answer_count": 1, "score": 0, "last_activity_date": 1519278726, "creation_date": 1519248814, "last_edit_date": 1519270504, "question_id": 48915845, "link": "https://stackoverflow.com/questions/48915845/association-path-between-2-rails-models", "title": "Association path between 2 Rails models", "body": "<p>So I have a few Rails models. Here's a similar example list:</p>\n\n<ul>\n<li>one house belongs to a neighborhood</li>\n<li>one neighborhood belongs to a city</li>\n<li>one city belongs to a state</li>\n<li>one state belongs to a country</li>\n<li>one user belongs to a house</li>\n</ul>\n\n<p>I would like to get a very magic function that I could use as follows:</p>\n\n<pre><code>(resource, scope, scope_ids) =&gt; {...}\n</code></pre>\n\n<p>a successful call would look like: </p>\n\n<pre><code>(\"house\", \"country\", [30]) =&gt; { neighborhood: { city: { state: { country: [30] } } } }\n(\"house\", \"state\", [1,2,3]) =&gt; { neighborhood: { city: { state: [1,2,3] } } }\n</code></pre>\n\n<p>and a failing call would return:</p>\n\n<pre><code>(\"house\", \"people\", [1,2,3]) =&gt; { id: -1 }\n</code></pre>\n\n<p>I would like to do this auto-magically so anything hardcoded would not be acceptable. </p>\n\n<p>EDIT:</p>\n\n<p>I would like to achieve the above result since I'm developing an authorization layer with CanCanCan that allows to do stuff like:</p>\n\n<pre><code>can :read, House, { neighborhood: { city: { state: { name: \"Illinois\" }}}}\n</code></pre>\n\n<p>Considered the above syntax, I would like to auto-magically generate permissions such as (where for example \"own_neightborhood\" is the neightborhood of the user being authorized and \"others_houses\" are the houses of the users different from the one being authorized):</p>\n\n<pre><code># permission read_own_neighborhood_houses should generate:\ncan :read, House, { neighborhood: { users: {id: user.id } }\n\n# permission read_own_state_cities should generate:\ncan :read, City, { state: { cities: { houses: { users: {id: user.id } } } } } } }\n\n# permission read_others_neighborhoods_states should generate: \ncan :read, State, { cities: { neighborhoods: { houses: { users: { id: User.where.not(id: user.id) } } } } }\n</code></pre>\n"}, {"tags": ["ruby", "vim"], "comments": [{"owner": {"reputation": 156267, "user_id": 546861, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SIhsx.png?s=128&g=1", "display_name": "romainl", "link": "https://stackoverflow.com/users/546861/romainl"}, "edited": false, "score": 0, "creation_date": 1519281020, "post_id": 48915343, "comment_id": 84848176, "body": "What do you mean by &quot;Both ruby and vim are x86.&quot;?"}, {"owner": {"reputation": 7315, "user_id": 789222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jEjDf.jpg?s=128&g=1", "display_name": "Christian Brabandt", "link": "https://stackoverflow.com/users/789222/christian-brabandt"}, "edited": false, "score": 0, "creation_date": 1519282441, "post_id": 48915343, "comment_id": 84848814, "body": "Please do not ask the question here, at vim-use and in the vim issue tracker"}, {"owner": {"reputation": 11, "user_id": 9393179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea6c9e958ccff0857820d436fc144f50?s=128&d=identicon&r=PG&f=1", "display_name": "frantz", "link": "https://stackoverflow.com/users/9393179/frantz"}, "edited": false, "score": 0, "creation_date": 1519289974, "post_id": 48915343, "comment_id": 84852754, "body": "<a href=\"https://github.com/vim/vim/issues/2660\" rel=\"nofollow noreferrer\">github.com/vim/vim/issues/2660</a> Add C:\\Ruby24\\bin\\ruby_builtin_dlls to the PATH solve the issue."}, {"owner": {"reputation": 8806, "user_id": 82682, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/20153d6f09abfcfd056c35faf3125b87?s=128&d=identicon&r=PG", "display_name": "joce", "link": "https://stackoverflow.com/users/82682/joce"}, "edited": false, "score": 0, "creation_date": 1527177616, "post_id": 48915343, "comment_id": 88039756, "body": "@frantz this should have been an answer, though."}], "owner": {"reputation": 11, "user_id": 9393179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea6c9e958ccff0857820d436fc144f50?s=128&d=identicon&r=PG&f=1", "display_name": "frantz", "link": "https://stackoverflow.com/users/9393179/frantz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 261, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1519248217, "creation_date": 1519246722, "last_edit_date": 1519248217, "question_id": 48915343, "link": "https://stackoverflow.com/questions/48915343/could-not-load-library-msvcrt-ruby240-dll", "title": "Could not load library msvcrt-ruby240.dll", "body": "<p>I have install the last version of the <code>x86</code> version of <code>vim 8</code> and I have an issue whith the <code>ruby integration</code>.<br>\nMy plugins like <code>LustyExplorer</code> can\u2019t work and when I enter  </p>\n\n<pre><code>:ruby \u2013version\n</code></pre>\n\n<p>I got the following error :  </p>\n\n<pre><code>E370: Could not load library msvcrt-ruby240.dll  \nE266 : Sorry, this command is disabled, the Ruby Library could not be loaded. \n</code></pre>\n\n<p>When I run</p>\n\n<pre><code>:version\n</code></pre>\n\n<p>I have : <code>+ruby/dyn</code> and </p>\n\n<pre><code>-DDYNAMIC_RUBY -DDYNAMIC_RUBY_VER=24 -\nDDYNAMIC_RUBY_DLL=\\\"msvcrt-ruby240.dll\\\"\n</code></pre>\n\n<p>Ruby is install in <code>C:\\Ruby24</code> and the <code>bin</code> folder containing the <code>msvcrt-ruby240.dll</code> is in <code>%PATH%</code>.<br>\nI also tried to put in my <code>vimrc</code> file  </p>\n\n<pre><code>set rubydll=\"C:\\Ruby24\\bin\\msvcrt-ruby240.dll\"\n</code></pre>\n\n<p>but I got the following error :</p>\n\n<pre><code>E370: Could not load Library\nE266 : Sorry, this command is disabled, the Ruby Library could not be loaded.\n</code></pre>\n\n<p>Both <code>ruby</code> and <code>vim</code> are <code>x86</code>.</p>\n\n<p>I am working on <code>windows 10</code>.\nThanks for your help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 160, "user_id": 6709718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c3f7e1c09dc77be70077c3534213b4b?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph L.", "link": "https://stackoverflow.com/users/6709718/joseph-l"}, "edited": false, "score": 0, "creation_date": 1519303304, "post_id": 48914610, "comment_id": 84861473, "body": "Have a look at simple_form gem. It let&#39;s you painlessly write helper functions for custom inputs. It also supports bootstrap if you&#39;re interested in that."}, {"owner": {"reputation": 507, "user_id": 6484367, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/8e9d26d6946fc918749adbefd5dd751c?s=128&d=identicon&r=PG&f=1", "display_name": "dsomel21", "link": "https://stackoverflow.com/users/6484367/dsomel21"}, "reply_to_user": {"reputation": 160, "user_id": 6709718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c3f7e1c09dc77be70077c3534213b4b?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph L.", "link": "https://stackoverflow.com/users/6709718/joseph-l"}, "edited": false, "score": 0, "creation_date": 1519398746, "post_id": 48914610, "comment_id": 84908245, "body": "My only concern is we are also using a Cocoon GEM which, as it describes, allows you to nest forms. You can imagine, it gets very messy editing, populating and deleting subsects of forms."}], "answers": [{"tags": [], "owner": {"reputation": 36501, "user_id": 3785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91e799ee062d66b9a2da8428d28038a0?s=128&d=identicon&r=PG", "display_name": "Mario F", "link": "https://stackoverflow.com/users/3785/mario-f"}, "is_accepted": false, "score": 2, "last_activity_date": 1519244269, "creation_date": 1519244269, "answer_id": 48914729, "question_id": 48914610, "link": "https://stackoverflow.com/questions/48914610/how-can-i-dry-this-div-with-rails-forms/48914729#48914729", "title": "How can I DRY this &lt;div&gt; with Rails Forms?", "body": "<p>You can create your own <a href=\"http://api.rubyonrails.org/v5.1/classes/ActionView/Helpers/FormBuilder.html\" rel=\"nofollow noreferrer\">FormBuilder</a> and create custom controls that include the wrapper classes than you need. </p>\n\n<p>For example if you want to wrap your text fields in a particular <code>div</code>:</p>\n\n<pre><code>class CustomFormBuilder &lt; ActionView::Helpers::FormBuilder\n  def custom_text_field(method, tag_value, options = {})\n    @template.content_tag(:div,\n      @template.text_field(\n        @object_name, method, tag_value, objectify_options(options)\n      ),\n      class: 'mdl-textfield mdl-js-textfield'\n    )\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 507, "user_id": 6484367, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/8e9d26d6946fc918749adbefd5dd751c?s=128&d=identicon&r=PG&f=1", "display_name": "dsomel21", "link": "https://stackoverflow.com/users/6484367/dsomel21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519244269, "creation_date": 1519243842, "question_id": 48914610, "link": "https://stackoverflow.com/questions/48914610/how-can-i-dry-this-div-with-rails-forms", "title": "How can I DRY this &lt;div&gt; with Rails Forms?", "body": "<p>I understand that with Rails Form Helpers, I can pass in classes, placeholders, types, etc. into Rails, so instead of writing </p>\n\n<pre><code>&lt;input id=\"name\" name=\"name\" type: \"text\" pattern=\"\" value=\"Kanye West\"/&gt;\n&lt;label class=\"mdl-textfield__label\" for=\"name\"&gt;Enter Name&lt;/label&gt;\n</code></pre>\n\n<p>I can do:</p>\n\n<pre><code>&lt;%= f.text_field :name, class: 'mdl-textfield__input', type: 'text', pattern: '-?[0-9]*(\\.[0-9]+)?', id: 'name', value: 'Kanye West' %&gt;\n&lt;label class=\"mdl-textfield__label\" for=\"name\"&gt;Enter Name&lt;/label&gt;\n</code></pre>\n\n<p>But it becomes pointless, because if I use a CSS framework, it ends up looking like this...</p>\n\n<pre><code>&lt;div class=\"mdl-cell mdl-cell--6-col mdl-cell--4-col-tablet hide-dis\"&gt;\n  &lt;div class=\"mdl-textfield advanced-input mdl-js-textfield mdl-textfield--expandable\"&gt;\n    &lt;div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\"&gt;\n      &lt;%= f.text_field :name, class: 'mdl-textfield__input', type: 'text', pattern: '-?[0-9]*(\\.[0-9]+)?', id: 'name', value: 'Kanye West' %&gt;\n      &lt;label class=\"mdl-textfield__label\" for=\"name\"&gt;Enter Name&lt;/label&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>You can imagine how ugly this can get when you have 10 form elements, right. I could try <em>partializing</em> it, but I don't know how I would pass in the <code>f.textfield</code> part. Please let me know how I can improve this mess and <strong>or anything else that you see that can be improved with me code :)</strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "simple-form", "simple-form-for"], "comments": [{"owner": {"reputation": 191, "user_id": 5281834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b5Vmy.jpg?s=128&g=1", "display_name": "olucube.com", "link": "https://stackoverflow.com/users/5281834/olucube-com"}, "edited": false, "score": 0, "creation_date": 1519259327, "post_id": 48914381, "comment_id": 84841925, "body": "show us your attachment method"}, {"owner": {"reputation": 1, "user_id": 9392928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5073c2e8f5f25d4c47a1af1e072fcfa5?s=128&d=identicon&r=PG&f=1", "display_name": "Fred", "link": "https://stackoverflow.com/users/9392928/fred"}, "reply_to_user": {"reputation": 191, "user_id": 5281834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b5Vmy.jpg?s=128&g=1", "display_name": "olucube.com", "link": "https://stackoverflow.com/users/5281834/olucube-com"}, "edited": false, "score": 0, "creation_date": 1519262852, "post_id": 48914381, "comment_id": 84842821, "body": "I don&#39;t have an attachment method. Should I create one?"}, {"owner": {"reputation": 191, "user_id": 5281834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b5Vmy.jpg?s=128&g=1", "display_name": "olucube.com", "link": "https://stackoverflow.com/users/5281834/olucube-com"}, "edited": false, "score": 1, "creation_date": 1519268871, "post_id": 48914381, "comment_id": 84844315, "body": "then where do you specify the attachment to go with the email?"}, {"owner": {"reputation": 191, "user_id": 5281834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b5Vmy.jpg?s=128&g=1", "display_name": "olucube.com", "link": "https://stackoverflow.com/users/5281834/olucube-com"}, "edited": false, "score": 0, "creation_date": 1519269491, "post_id": 48914381, "comment_id": 84844450, "body": "Try to add this to the header method &quot;add_file :filename =&gt; &#39;somefile.png&#39;, :content =&gt; File.read(&#39;/filename.png&#39;)&quot; or &quot;attachments[&#39;filename.jpg&#39;] = File.read(&#39;/path/to/filename.jpg&#39;)&quot;"}, {"owner": {"reputation": 1, "user_id": 9392928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5073c2e8f5f25d4c47a1af1e072fcfa5?s=128&d=identicon&r=PG&f=1", "display_name": "Fred", "link": "https://stackoverflow.com/users/9392928/fred"}, "reply_to_user": {"reputation": 191, "user_id": 5281834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b5Vmy.jpg?s=128&g=1", "display_name": "olucube.com", "link": "https://stackoverflow.com/users/5281834/olucube-com"}, "edited": false, "score": 1, "creation_date": 1519339011, "post_id": 48914381, "comment_id": 84883655, "body": "@olucube thanks for your help! I figured out the solution and it was ridiculous! It was just missing this: &quot;attribute :file,  <b><i>attachment: true</i></b>"}], "owner": {"reputation": 1, "user_id": 9392928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5073c2e8f5f25d4c47a1af1e072fcfa5?s=128&d=identicon&r=PG&f=1", "display_name": "Fred", "link": "https://stackoverflow.com/users/9392928/fred"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 337, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1519262825, "creation_date": 1519242877, "last_edit_date": 1519262825, "question_id": 48914381, "link": "https://stackoverflow.com/questions/48914381/ruby-on-rails-how-to-send-email-with-attachment-using-simple-form-and-mail-form", "title": "Ruby on Rails How To send email with attachment using simple_form and mail_form gem. I do receive the email but there is nothing attached", "body": "<p>I'm trying to send an email with attachment using simple_form and mail_form gem but it's not working.</p>\n\n<p>I used: </p>\n\n<pre><code>&lt;%= simple_form_for @payment, html: { multipart: true }, defaults: \n{ wrapper_html: { class: 'form-group' }, input_html: { class: 'form-control' } } do |f| %&gt;\n  ...\n  &lt;%= f.file_field :file %&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p>I receive the email but there is nothing attached.</p>\n\n<p><strong>Email`s Body</strong></p>\n\n<p>Name: John</p>\n\n<p>Email: test@email.com</p>\n\n<p>Message: Testing email</p>\n\n<p>File: #ActionDispatch::Http::UploadedFile:0x00007fc9094557c0</p>\n\n<p>This is my Model</p>\n\n<pre><code>class Payment &lt; MailForm::Base\nattribute :name\nattribute :cell_phone\nattribute :user_code\nattribute :email,    validate: /\\A([\\w\\.%\\+\\-]+)@([\\w\\-]+\\.)+([\\w]{2,})\\z/i\nattribute :message\nattribute :file\nattribute :nickname, captcha: true\n\ndef headers\n    {\n      subject: \"Comprovante - Contas Atecorp\",\n      to: \"email@email.com\",\n      from: %(\"Contas Atecorp\" &lt;email@email.com&gt;),\n      reply_to: %(\"#{name}\" &lt;#{email}&gt;)\n    }\n  end\nend\n</code></pre>\n\n<p>And this is my Controller</p>\n\n<pre><code>class PaymentsController &lt; ApplicationController\n  def create\n    @payment = Payment.new(payment_params)\n    @payment.request = request\n    if @payment.deliver\n      flash.now[:notice] = 'Thank you for your message!'\n      redirect_to user_faturas_path(current_user)\n    else\n      flash.now[:error] = 'Cannot send message.'\n      redirect_to user_faturas_path(current_user)\n    end\n  end\n\n  private\n\n  def payment_params\n    params.require(:payment).permit(:name, :email, :message, :nickname,\n                                        :cell_phone, :user_code, :file)\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 1531, "user_id": 1677069, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d169336c1d2c08a2d9d8022115c2c9a0?s=128&d=identicon&r=PG", "display_name": "Andres Ehrenpreis", "link": "https://stackoverflow.com/users/1677069/andres-ehrenpreis"}, "edited": false, "score": 0, "creation_date": 1519245703, "post_id": 48913735, "comment_id": 84836549, "body": "Which Rails version are you using with Migration-class exactly?"}, {"owner": {"reputation": 1099, "user_id": 4762756, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/rm0a3.jpg?s=128&g=1", "display_name": "davidwessman", "link": "https://stackoverflow.com/users/4762756/davidwessman"}, "reply_to_user": {"reputation": 1531, "user_id": 1677069, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d169336c1d2c08a2d9d8022115c2c9a0?s=128&d=identicon&r=PG", "display_name": "Andres Ehrenpreis", "link": "https://stackoverflow.com/users/1677069/andres-ehrenpreis"}, "edited": false, "score": 0, "creation_date": 1519245934, "post_id": 48913735, "comment_id": 84836673, "body": "Not using Rails at all, only using <code>activerecord (5.1.5)</code> at the moment. @AndresEhrenpreis"}], "answers": [{"comments": [{"owner": {"reputation": 1099, "user_id": 4762756, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/rm0a3.jpg?s=128&g=1", "display_name": "davidwessman", "link": "https://stackoverflow.com/users/4762756/davidwessman"}, "edited": false, "score": 0, "creation_date": 1519245165, "post_id": 48914483, "comment_id": 84836274, "body": "Thank you for your answer!  I have tried this approach, but alas, no migrations are completed. I added the outputs to my original question."}], "tags": [], "owner": {"reputation": 1531, "user_id": 1677069, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d169336c1d2c08a2d9d8022115c2c9a0?s=128&d=identicon&r=PG", "display_name": "Andres Ehrenpreis", "link": "https://stackoverflow.com/users/1677069/andres-ehrenpreis"}, "is_accepted": false, "score": 2, "last_activity_date": 1581648632, "last_edit_date": 1581648632, "creation_date": 1519243354, "answer_id": 48914483, "question_id": 48913735, "link": "https://stackoverflow.com/questions/48913735/run-activerecord-migrations-without-rails/48914483#48914483", "title": "Run ActiveRecord migrations without Rails", "body": "<p>By looking at the <a href=\"https://github.com/rails/rails\" rel=\"nofollow noreferrer\">rails github page</a> then starting from <a href=\"https://github.com/rails/rails/tree/5-2-stable\" rel=\"nofollow noreferrer\">Rails 5.2</a> the <a href=\"https://github.com/rails/rails/blob/5-2-stable/activerecord/lib/active_record/migration.rb#L1159\" rel=\"nofollow noreferrer\">Migrator class</a> is cut down quite a bit. Much of its methods have moved to <a href=\"https://github.com/rails/rails/blob/5-2-stable/activerecord/lib/active_record/migration.rb#L516\" rel=\"nofollow noreferrer\">Migration class</a> instead (including the <a href=\"https://github.com/rails/rails/blob/5-2-stable/activerecord/lib/active_record/migration.rb#L773\" rel=\"nofollow noreferrer\">.up method</a>).</p>\n\n<p>Therefore just replace <code>ActiveRecord::Migrator</code> with <code>ActiveRecord::Migration</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1099, "user_id": 4762756, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/rm0a3.jpg?s=128&g=1", "display_name": "davidwessman", "link": "https://stackoverflow.com/users/4762756/davidwessman"}, "is_accepted": true, "score": 2, "last_activity_date": 1520603605, "creation_date": 1520603605, "answer_id": 49195324, "question_id": 48913735, "link": "https://stackoverflow.com/questions/48913735/run-activerecord-migrations-without-rails/49195324#49195324", "title": "Run ActiveRecord migrations without Rails", "body": "<p>I managed to solve this (until Rails 6 is release at least), the implementation can be seen on <a href=\"https://github.com/textacular/textacular/blob/master/Rakefile#L45\" rel=\"nofollow noreferrer\">textacular</a></p>\n\n<pre><code>task :up =&gt; :'db:connect' do\n  migrations = if ActiveRecord.version.version &gt;= '5.2'\n    ActiveRecord::Migration.new.migration_context.migrations\n  else\n    ActiveRecord::Migrator.migrations('db/migrate')\n  end\n  ActiveRecord::Migrator.new(:up, migrations, nil).migrate\nend\n</code></pre>\n\n<p>Not very satisfied with this solution, but this was the only way I could get the migrations to run on Rails 5, 5.1 and 5.2.</p>\n"}, {"tags": [], "owner": {"reputation": 435, "user_id": 1245880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f60568f76ca5b580dc6bea0f72c4b32?s=128&d=identicon&r=PG", "display_name": "Ruan Carlos", "link": "https://stackoverflow.com/users/1245880/ruan-carlos"}, "is_accepted": false, "score": 4, "last_activity_date": 1572634380, "creation_date": 1572634380, "answer_id": 58664398, "question_id": 48913735, "link": "https://stackoverflow.com/questions/48913735/run-activerecord-migrations-without-rails/58664398#58664398", "title": "Run ActiveRecord migrations without Rails", "body": "<p>You can also use this command:</p>\n\n<pre><code>ActiveRecord::MigrationContext.new(Rails.root.join('db', 'migrate'), ActiveRecord::SchemaMigration).migrate\n</code></pre>\n"}], "owner": {"reputation": 1099, "user_id": 4762756, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/rm0a3.jpg?s=128&g=1", "display_name": "davidwessman", "link": "https://stackoverflow.com/users/4762756/davidwessman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2072, "favorite_count": 0, "accepted_answer_id": 49195324, "answer_count": 3, "score": 5, "last_activity_date": 1581648632, "creation_date": 1519240529, "last_edit_date": 1519245134, "question_id": 48913735, "link": "https://stackoverflow.com/questions/48913735/run-activerecord-migrations-without-rails", "title": "Run ActiveRecord migrations without Rails", "body": "<p>I am trying to update a gem called <a href=\"https://github.com/textacular/textacular/pull/121/files\" rel=\"noreferrer\"><code>textacular</code></a> to be compatible with latest rails version.</p>\n\n<p>In the development Rake-tasks we need to run a few ActiveRecord migrations - without Rails.</p>\n\n<p>Today it looks like: </p>\n\n<pre><code>namespace :migrate do\n    desc 'Run the test database migrations'\n    task :up =&gt; :'db:connect' do\n      ActiveRecord::Migrator.up 'db/migrate'\n    end\n\n    desc 'Reverse the test database migrations'\n    task :down =&gt; :'db:connect' do\n      ActiveRecord::Migrator.down 'db/migrate'\n    end\nend\n</code></pre>\n\n<p>However when using ActiveRecord >= 5, it fails with: </p>\n\n<p><code>NoMethodError: undefined method 'up' for ActiveRecord::Migrator:Class</code>.</p>\n\n<p>I have tried to look through the source code for ActiveRecord, tried a bunch of different methods but have not managed to run the migrations.</p>\n\n<p>Does anyone have a hint of what to do?</p>\n\n<p><strong>Edit</strong></p>\n\n<p><em>Using <code>ActiveRecord::Migration.up</code> does nothing, probably just <code>returns</code> based on the method.</em></p>\n\n<p><em>Using <code>ActiveRecord::Migration.migrate(:up)</code> gives output:</em></p>\n\n<pre><code>==  ActiveRecord::Migration: migrating ========================================\n==  ActiveRecord::Migration: migrated (0.0000s) ===============================\n</code></pre>\n\n<p>All migrations are in the folder <code>db/migrate</code>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 16407, "user_id": 157752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Qgx5T.jpg?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/157752/thilo"}, "is_accepted": true, "score": 3, "last_activity_date": 1519253068, "creation_date": 1519253068, "answer_id": 48916796, "question_id": 48913037, "link": "https://stackoverflow.com/questions/48913037/error-failed-to-build-gem-native-extension-cant-find-header-files-for-ruby-h/48916796#48916796", "title": "Error: Failed to build gem native extension (can&#39;t find header files for ruby.h)", "body": "<p>Well I suspect you actually need ruby2.4-dev if you're using ruby 2.4. But I'd recommend not using system ruby and installing gems globally with <code>sudo</code> in the first place. Using a ruby environment manager such as <a href=\"https://github.com/rbenv/rbenv\" rel=\"nofollow noreferrer\">rbenv</a> is the best way to avoid dependency hell. Here's a good overview of the available options: <a href=\"http://kgrz.io/programmers-guide-to-choosing-ruby-version-manager.html\" rel=\"nofollow noreferrer\">http://kgrz.io/programmers-guide-to-choosing-ruby-version-manager.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 139, "user_id": 338016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aca8b340c69cfaec191ceffe2597f304?s=128&d=identicon&r=PG", "display_name": "Peyman Karimi", "link": "https://stackoverflow.com/users/338016/peyman-karimi"}, "is_accepted": false, "score": 3, "last_activity_date": 1565334796, "creation_date": 1565334796, "answer_id": 57425101, "question_id": 48913037, "link": "https://stackoverflow.com/questions/48913037/error-failed-to-build-gem-native-extension-cant-find-header-files-for-ruby-h/57425101#57425101", "title": "Error: Failed to build gem native extension (can&#39;t find header files for ruby.h)", "body": "<p>I've had the same problem, and finally solved it by:</p>\n\n<pre><code>apt-get --reinstall install ruby\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 4521215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcd0f953a98cee25d2bb0ffdc7d3787f?s=128&d=identicon&r=PG&f=1", "display_name": "Mark98074", "link": "https://stackoverflow.com/users/4521215/mark98074"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3116, "favorite_count": 0, "accepted_answer_id": 48916796, "answer_count": 2, "score": 4, "last_activity_date": 1565334796, "creation_date": 1519237825, "question_id": 48913037, "link": "https://stackoverflow.com/questions/48913037/error-failed-to-build-gem-native-extension-cant-find-header-files-for-ruby-h", "title": "Error: Failed to build gem native extension (can&#39;t find header files for ruby.h)", "body": "<p>I'm trying to install <code>azure_mgmt_storage</code> on Ubuntu 14.04.5 LTS. (And I'm new to Linux and Ruby.) Here's the command I tried:</p>\n\n<pre><code>sudo gem install azure_mgmt_storage\nBuilding native extensions. This could take a while...\nERROR:  Error installing azure_mgmt_storage:\n    ERROR: Failed to build gem native extension.\n\ncurrent directory: /var/lib/gems/2.4.0/gems/unf_ext-0.0.7.5/ext/unf_ext\n/usr/bin/ruby2.4 -r ./siteconf20180221-102454-dq4ty1.rb extconf.rb\nmkmf.rb can't find header files for ruby at /usr/lib/ruby/include/ruby.h\n</code></pre>\n\n<p>I've have Rails 4.02 installed, and Ruby 2.4.3p205 (2017-12-14 revision 61247).\nBased on another post, I also ran these:</p>\n\n<pre><code>sudo apt-get install ruby-dev\nsudo apt-get install ruby2.0-dev\nsudo apt-get install ruby2.2-dev\nsudo apt-get install ruby2.3-dev\n</code></pre>\n\n<p>How do I get ruby.h installed?\nThanks!</p>\n"}, {"tags": ["ruby", "sketchup"], "answers": [{"tags": [], "owner": {"reputation": 2208, "user_id": 6584878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eef2518f750afd08b60ab22d5ec9ddb8?s=128&d=identicon&r=PG&f=1", "display_name": "avariant", "link": "https://stackoverflow.com/users/6584878/avariant"}, "is_accepted": false, "score": 1, "last_activity_date": 1519404961, "creation_date": 1519404961, "answer_id": 48952751, "question_id": 48912905, "link": "https://stackoverflow.com/questions/48912905/ruby-sketchup-add-a-measurment/48952751#48952751", "title": "Ruby SketchUp ... add a measurment", "body": "<p>You are probably looking for the Sketchup::Entities::add_dimension_linear method.\n<a href=\"http://ruby.sketchup.com/Sketchup/Entities.html#add_dimension_linear-instance_method\" rel=\"nofollow noreferrer\">http://ruby.sketchup.com/Sketchup/Entities.html#add_dimension_linear-instance_method</a></p>\n\n<p>Assuming <code>a</code> and <code>b</code> below are edges</p>\n\n<pre><code>voffset = [-20, 0, 0]\nSketchup.active_model.entities.add_dimension_linear(a.start, b.start, voffset)\n</code></pre>\n\n<p>The value of <code>voffset</code> controls not just how far offset the dimension is, but also the axis along which the measurement is made. You may need to experiment with different values to get a feeling for how that determination is done.  As with many things in SketchUp, it often guesses (or 'infers') at what you want. </p>\n"}], "owner": {"reputation": 89, "user_id": 1803095, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c8051c7d18c4819d8ea4d1ba12865640?s=128&d=identicon&r=PG", "display_name": "user1803095", "link": "https://stackoverflow.com/users/1803095/user1803095"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1519404961, "creation_date": 1519237284, "question_id": 48912905, "link": "https://stackoverflow.com/questions/48912905/ruby-sketchup-add-a-measurment", "title": "Ruby SketchUp ... add a measurment", "body": "<p>still learning about Ruby + Sketchup!</p>\n\n<p>Today,I would like to add a measurement (good english word ?) as I can do manually with the 'cotation' (french version) tool when I click to point then drag the measure text.</p>\n\n<p>Can't find that in the docs to do with Ruby and API ...</p>\n\n<p>Thanks for your help</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "faraday"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8469392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c33baf85a35252ed8567f1fbe138acfd?s=128&d=identicon&r=PG&f=1", "display_name": "mrdmr", "link": "https://stackoverflow.com/users/8469392/mrdmr"}, "edited": false, "score": 0, "creation_date": 1519304607, "post_id": 48915566, "comment_id": 84862387, "body": "Thanks for your answer. I tried your solution but I cannot get it to work. I edited my question."}, {"owner": {"reputation": 1854, "user_id": 669745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a4b0416684de65970e4d1b4da1bb290?s=128&d=identicon&r=PG", "display_name": "Panic", "link": "https://stackoverflow.com/users/669745/panic"}, "reply_to_user": {"reputation": 13, "user_id": 8469392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c33baf85a35252ed8567f1fbe138acfd?s=128&d=identicon&r=PG&f=1", "display_name": "mrdmr", "link": "https://stackoverflow.com/users/8469392/mrdmr"}, "edited": false, "score": 0, "creation_date": 1519307606, "post_id": 48915566, "comment_id": 84864719, "body": "@mrdmr In your code you need to replace <code>def index</code> with <code>def products</code>, <code>StatsClient.products</code> with <code>StatsClient.new.products</code>, and <code>@hash = response.body[&#39;data&#39;]</code> with <code>response.body[&#39;data&#39;]</code>"}], "tags": [], "owner": {"reputation": 1854, "user_id": 669745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a4b0416684de65970e4d1b4da1bb290?s=128&d=identicon&r=PG", "display_name": "Panic", "link": "https://stackoverflow.com/users/669745/panic"}, "is_accepted": true, "score": 0, "last_activity_date": 1519247567, "creation_date": 1519247567, "answer_id": 48915566, "question_id": 48912654, "link": "https://stackoverflow.com/questions/48912654/cache-api-json-request-to-avoid-repeating-the-request/48915566#48915566", "title": "Cache api (json) request to avoid repeating the request", "body": "<p>Move the code from your controller into a separate class (or module) <code>StatsClient</code>. Then in your controller:</p>\n\n<pre><code>def index\n  @hash = Rails.cache.fetch('something', expires_in: 15.minutes) do\n    StatsClient.products\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8469392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c33baf85a35252ed8567f1fbe138acfd?s=128&d=identicon&r=PG&f=1", "display_name": "mrdmr", "link": "https://stackoverflow.com/users/8469392/mrdmr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 606, "favorite_count": 0, "accepted_answer_id": 48915566, "answer_count": 1, "score": 0, "last_activity_date": 1519304702, "creation_date": 1519236340, "last_edit_date": 1519304702, "question_id": 48912654, "link": "https://stackoverflow.com/questions/48912654/cache-api-json-request-to-avoid-repeating-the-request", "title": "Cache api (json) request to avoid repeating the request", "body": "<p>So I created this request which gives me a response as json. </p>\n\n<pre><code>require 'dotenv/load'\nrequire 'faraday'\n\nclass OverviewController &lt; ApplicationController\n\n  def api_key\n    ENV[\"API_KEY\"]\n  end\n\n  def url\n    \"https://example.com\"+api_key\n  end\n\n  def index\n    conn = Faraday.new(url, request: {open_timeout: 1, timeout: 1}) do |c|\n      c.response :json, :content_type =&gt; /\\bjson$/\n      c.adapter Faraday.default_adapter\n    end\n\n  response = conn.get url\n  @hash = response.body['data']\n\n  end\nend\n</code></pre>\n\n<p>Response:</p>\n\n<pre><code>{\n    \"type\": \"products\",\n    \"version\": \"x.x.x\",\n    \"data\": {\n        \"Product 1\": {\n            \"title\": \"xxx\",\n            \"attributes\": {\n                \"x\"=1\n            },\n            \"id\": 22,\n            \"name\": \"Product 1\"\n        },\n        \"Product 2\": {\n            \"title\": \"xXx\",\n            \"attributes\": {\n                \"x\"=2\n            },\n            \"id\": 25,\n            \"name\": \"Product 2\"\n        },\n...\n</code></pre>\n\n<p>This works great so far. But since the data in this json changes really rarely and there is a policy to not request the api as much I would like to cache my result.</p>\n\n<p>I tried different solutions with \"faraday-http-cache\" but I can't get it to work. But I like to not use another lib.</p>\n\n<p>I read the \"rails - Guides - caching\" segment and I think I need <strong>low level caching</strong> <code>Rails.cache.fetch</code></p>\n\n<p>I would be really glad if someone could help me :-)</p>\n\n<p>EDIT(after Panic's comment):\nI tried this, but I need some more help</p>\n\n<pre><code>require 'dotenv/load'\nrequire 'faraday'\n\nclass StatsClient\n\n  def api_key\n    ENV[\"API_KEY\"]\n  end\n\n  def url\n    \"https://example.com\"+api_key\n  end\n\n  def index\n    conn = Faraday.new(url, request: {open_timeout: 1, timeout: 1}) do |c|\n      c.response :json, :content_type =&gt; /\\bjson$/\n      c.adapter Faraday.default_adapter\n    end\n\n  response = conn.get url\n  @hash = response.body['data']\n\n  end\nend\n\nclass OverviewController &lt; ApplicationController\n  def index\n    @hash = Rails.cache.fetch('something', expires_in: 15.minutes) do\n      StatsClient.products\n    end\n  end\nend\n</code></pre>\n\n<p>Like this? What has to go actually as <strong><code>'something'</code></strong>. Also I get the error that \"StatsClient.products is not recognised.</p>\n"}, {"tags": ["ruby", "random", "calculation"], "comments": [{"owner": {"reputation": 790, "user_id": 4873159, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Ygmek.png?s=128&g=1", "display_name": "Burgan", "link": "https://stackoverflow.com/users/4873159/burgan"}, "edited": false, "score": 0, "creation_date": 1519239917, "post_id": 48912499, "comment_id": 84833419, "body": "I think your problem should now be solved in my final edit"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9392387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f57144f16bf1445e7ca8a2419c6b624f?s=128&d=identicon&r=PG&f=1", "display_name": "K James", "link": "https://stackoverflow.com/users/9392387/k-james"}, "edited": false, "score": 0, "creation_date": 1519238300, "post_id": 48912966, "comment_id": 84832589, "body": "Sorry, perhaps I wasn&#39;t clear enough. It&#39;s akin to rolling a 6-sided dice 2 times and adding them together. But instead of manually coding &#39;rand + rand&#39;, I want to be able to duplicate that rand two times and gather the result."}, {"owner": {"reputation": 3, "user_id": 9392387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f57144f16bf1445e7ca8a2419c6b624f?s=128&d=identicon&r=PG&f=1", "display_name": "K James", "link": "https://stackoverflow.com/users/9392387/k-james"}, "edited": false, "score": 0, "creation_date": 1519239565, "post_id": 48912966, "comment_id": 84833240, "body": "My main reasoning is the number of dice rolls will be in a variable and passed through to the calculation, so I was hoping for something along the lines of &gt;@var * D6 rolls = 1-6, 2-12, 3-18, 4-24 (depending on @var being 1,2,3,4). Looking at the other response I can see that pushing each dice roll to an array is an option for this, I need to play around with that.."}, {"owner": {"reputation": 3, "user_id": 9392387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f57144f16bf1445e7ca8a2419c6b624f?s=128&d=identicon&r=PG&f=1", "display_name": "K James", "link": "https://stackoverflow.com/users/9392387/k-james"}, "edited": false, "score": 0, "creation_date": 1519240306, "post_id": 48912966, "comment_id": 84833613, "body": "Thankyou for Edit2. That&#39;s interesting, I&#39;ll have a play around with that."}], "tags": [], "owner": {"reputation": 790, "user_id": 4873159, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Ygmek.png?s=128&g=1", "display_name": "Burgan", "link": "https://stackoverflow.com/users/4873159/burgan"}, "is_accepted": false, "score": 1, "last_activity_date": 1519239833, "last_edit_date": 1519239833, "creation_date": 1519237584, "answer_id": 48912966, "question_id": 48912499, "link": "https://stackoverflow.com/questions/48912499/how-can-i-multiply-2-separate-rand-values-within-one-argument-in-ruby/48912966#48912966", "title": "How can I multiply 2 separate rand values within one argument in Ruby?", "body": "<p>It works much like it does for addition.</p>\n\n<pre><code>rand(1..6) * rand(1..6)\n</code></pre>\n\n<p>will first generate the two random numbers, and then it will multiply them.\nThe result for this example will be 1 at minimum and 36 at a maximum.</p>\n\n<p>EDIT:</p>\n\n<p>If you want any number 2-12 (with an even distribution unlike rolling two dice),</p>\n\n<pre><code>rand(2..12)\n</code></pre>\n\n<p>otherwise, there is really no reason to multiply anything. You should just use the addition that you have in your question.</p>\n\n<p>EDIT2:</p>\n\n<p>Now to the core of your question, you want to roll a d6 n times. In your function give this a try.</p>\n\n<pre><code>total = 0\nn.times { total += rand(1..6) }\n</code></pre>\n\n<p>This will roll a die n times and add it to the total each time.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 9392387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f57144f16bf1445e7ca8a2419c6b624f?s=128&d=identicon&r=PG&f=1", "display_name": "K James", "link": "https://stackoverflow.com/users/9392387/k-james"}, "edited": false, "score": 0, "creation_date": 1519240147, "post_id": 48913243, "comment_id": 84833524, "body": "Thanks, this is interesting. I&#39;ll have a play around with this, I guess I was just assuming there was an easy bit of code related to rand itself that I didn&#39;t know about."}], "tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": false, "score": 2, "last_activity_date": 1519238604, "creation_date": 1519238604, "answer_id": 48913243, "question_id": 48912499, "link": "https://stackoverflow.com/questions/48912499/how-can-i-multiply-2-separate-rand-values-within-one-argument-in-ruby/48913243#48913243", "title": "How can I multiply 2 separate rand values within one argument in Ruby?", "body": "<p>What you can do is construct a random array and then sum its elements:</p>\n\n<pre><code>Array.new(2) { rand(1..6) }.reduce(:+)\n</code></pre>\n\n<p>This creates an array with two elements and populates each element by running the block. Since the block is run separately for each element, you get separate random numbers.</p>\n"}, {"tags": [], "owner": {"reputation": 864, "user_id": 1285054, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/49090e67bce683fb15ee068b88beb0fa?s=128&d=identicon&r=PG", "display_name": "Aniket Schneider", "link": "https://stackoverflow.com/users/1285054/aniket-schneider"}, "is_accepted": false, "score": 0, "last_activity_date": 1519239943, "creation_date": 1519239943, "answer_id": 48913587, "question_id": 48912499, "link": "https://stackoverflow.com/questions/48912499/how-can-i-multiply-2-separate-rand-values-within-one-argument-in-ruby/48913587#48913587", "title": "How can I multiply 2 separate rand values within one argument in Ruby?", "body": "<p>For just two numbers, <code>rand(1..6) + rand(1..6)</code> is probably easier to read. However, as the number of random numbers to be added together grows, something like this might be more appropriate:</p>\n\n<pre><code>2.times.map { rand(1..6) }.reduce(:+)\n</code></pre>\n\n<p><code>2.times</code> produces a 2-element <code>Enumerator</code>.</p>\n\n<p><code>.map { rand(1..6) }</code> turns this into an array of 2 random numbers from 1 to 6.</p>\n\n<p><code>.reduce(:+)</code> adds all the elements of that array together.</p>\n\n<p>See the docs for <a href=\"http://ruby-doc.org/core-2.2.2/Integer.html#method-i-times\" rel=\"nofollow noreferrer\">times</a>, <a href=\"https://ruby-doc.org/core-2.5.0/Enumerable.html#method-i-map\" rel=\"nofollow noreferrer\">map</a>, and <a href=\"https://ruby-doc.org/core-2.5.0/Enumerable.html#method-i-reduce\" rel=\"nofollow noreferrer\">reduce</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "is_accepted": true, "score": 1, "last_activity_date": 1519242369, "creation_date": 1519242369, "answer_id": 48914220, "question_id": 48912499, "link": "https://stackoverflow.com/questions/48912499/how-can-i-multiply-2-separate-rand-values-within-one-argument-in-ruby/48914220#48914220", "title": "How can I multiply 2 separate rand values within one argument in Ruby?", "body": "<pre><code>2.times.sum { rand(1..6) }\n</code></pre>\n\n<p>or</p>\n\n<pre><code>(1..2).sum { rand(1..6) }\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9392387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f57144f16bf1445e7ca8a2419c6b624f?s=128&d=identicon&r=PG&f=1", "display_name": "K James", "link": "https://stackoverflow.com/users/9392387/k-james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 48914220, "answer_count": 4, "score": -1, "last_activity_date": 1519329011, "creation_date": 1519235816, "last_edit_date": 1592644375, "question_id": 48912499, "link": "https://stackoverflow.com/questions/48912499/how-can-i-multiply-2-separate-rand-values-within-one-argument-in-ruby", "title": "How can I multiply 2 separate rand values within one argument in Ruby?", "body": "<p>I would like to multiply 2 separate random numbers within an argument, to match the following (for example):</p>\n<blockquote>\n<p>rand(1..6) + rand(1..6)</p>\n<p>=&gt;9   (result could be anything between 2-12)</p>\n</blockquote>\n<p>I am in early stages of learning Ruby, so forgive me, but how do I achieve the same with multiplication? For example, the following will only multiply the same random number twice:</p>\n<blockquote>\n<p>2 * rand(1..6)</p>\n<p>=&gt;2   (will only produce 2,4,6,etc)</p>\n</blockquote>\n<p>Which is what you would expect. But how do I alter that statement to signify 2 separate rand calculations within that range (giving me a possible value between 2 and 12)? Thank you.</p>\n<p>EDIT: Solved by using @var <strong>.times</strong> the rand, then doing an element <strong>.push</strong>. This allows me also to display both results individually, as well as doing <strong>.sum</strong> to make the total.</p>\n"}, {"tags": ["ruby", "algorithm", "pathfinder"], "comments": [{"owner": {"reputation": 493, "user_id": 4698629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i5UuD.jpg?s=128&g=1", "display_name": "Sergio Rivas", "link": "https://stackoverflow.com/users/4698629/sergio-rivas"}, "edited": false, "score": 0, "creation_date": 1519235909, "post_id": 48912462, "comment_id": 84831347, "body": "If $game_player is global you don&#39;t need to pass that variable into a function or method, just use it out"}, {"owner": {"reputation": 23, "user_id": 9215608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9418fe9929319e10cff7bc5f320ad78?s=128&d=identicon&r=PG&f=1", "display_name": "toto8080", "link": "https://stackoverflow.com/users/9215608/toto8080"}, "reply_to_user": {"reputation": 493, "user_id": 4698629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i5UuD.jpg?s=128&g=1", "display_name": "Sergio Rivas", "link": "https://stackoverflow.com/users/4698629/sergio-rivas"}, "edited": false, "score": 0, "creation_date": 1519236083, "post_id": 48912462, "comment_id": 84831458, "body": "Same error occurs, similar my &quot;local variable before the function&quot; case, so the function cannot see it somehow."}], "answers": [{"comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1519236321, "post_id": 48912546, "comment_id": 84831574, "body": "That&#39;s not what OP has. OP has <code>def find_path(startx,starty,destx,desty, $game_player)</code> (I&#39;m inferring the <code>def</code>)\u2014not a default, just an argument. (The rest of your answer is accurate.)"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1519243238, "post_id": 48912546, "comment_id": 84835192, "body": "@JordanRunning read the entire question. That is their &quot;working solution&quot; which they don&#39;t understand why it works."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1519243523, "post_id": 48912546, "comment_id": 84835368, "body": "I see what you mean. You might want to clarify that your first few sentences refer not to OP&#39;s initial problem statement (&quot;it throws a SyntaxError&quot;), but rather what they discuss later in their question."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 1, "last_activity_date": 1519235968, "creation_date": 1519235968, "answer_id": 48912546, "question_id": 48912462, "link": "https://stackoverflow.com/questions/48912462/formal-argument-cannot-be-a-global-variable/48912546#48912546", "title": "Formal argument cannot be a global variable", "body": "<p>What you have here:</p>\n\n<pre><code> find_path(startx, starty, destx, desty, character_position = $game_player)\n</code></pre>\n\n<p>is <code>$game_player</code> set as a <em>default value</em> for the argument. If you pass a different value for the fifth argument, it will be used instead. If you omit the fifth argument, the default value (the global) will be used. Keep in mind that unassigned globals don't raise NoMethodError upon reference, so if you don't define the global and don't pass a fifth argument, the value in the function will be nil.</p>\n\n<p>If you don't want to allow custom values for <code>character_position</code> to be allowed, you can remove the argument and just reference <code>$game_player</code> directly from the function body.</p>\n\n<p>In general, it's a good idea to avoid many globals if you can help it, but without seeing more of the code it's hard to advise on this.</p>\n"}, {"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1519250822, "post_id": 48913463, "comment_id": 84839037, "body": "Note that up until (and including) Ruby 1.8, block argument binding used assignment semantics, and thus block parameters could be <i>anything</i> that was legal on the left hand side of an assignment, including instance variables, class variables, global variables, and even setters! In Ruby 1.8, what the OP wants to do can be achieved with <code>define_method(:find_path) {|startx, starty, destx, desty, $game_player| \u2026\u00a0}</code>. Although I&#39;m still not sure why someone would want to do that."}], "tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1519239528, "creation_date": 1519239528, "answer_id": 48913463, "question_id": 48912462, "link": "https://stackoverflow.com/questions/48912462/formal-argument-cannot-be-a-global-variable/48913463#48913463", "title": "Formal argument cannot be a global variable", "body": "<p>I'm guessing you aren't showing all of the code and what you really have is:</p>\n\n<pre><code>def find_path(startx, starty, destx, desty, $game_player)\n</code></pre>\n\n<p>This is a method <em>definition</em> and the names <code>startx</code>, <code>starty</code>, etc. are <em>argument names</em> for the method. Arguments are placeholders for data that will be provided later when the <code>find_path</code> method is actually run.</p>\n\n<p>The problem is that <code>$game_player</code> is not an argument name, it is a global that actually represents some data somewhere in your script. Ruby is expecting a list of names, but you're giving it data!</p>\n\n<p>When you change it to this, the meaning is entirely different:</p>\n\n<pre><code>def find_path(startx, starty, destx, desty, character_position = $game_player)\n</code></pre>\n\n<p>Now you're giving it an argument name <code>character_position</code>, so everything is OK. The <code>= $game_player</code> means that <em>when the method is run</em>, if data isn't provided for the <code>character_position</code> argument, <code>$game_player</code> will be used instead.</p>\n"}], "owner": {"reputation": 23, "user_id": 9215608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9418fe9929319e10cff7bc5f320ad78?s=128&d=identicon&r=PG&f=1", "display_name": "toto8080", "link": "https://stackoverflow.com/users/9215608/toto8080"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 441, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1519240020, "creation_date": 1519235685, "last_edit_date": 1519240020, "question_id": 48912462, "link": "https://stackoverflow.com/questions/48912462/formal-argument-cannot-be-a-global-variable", "title": "Formal argument cannot be a global variable", "body": "<p>I'm currently working on a pathfinder algorithm and I'm using Ruby (RGSS3) language where I have a function  <strong>find_path (startx,starty,destx,desty, $game_player)</strong></p>\n\n<ul>\n<li>startx: X coordinate of the starting position </li>\n<li>starty: Y coordinate of the starting position </li>\n<li>destx: X coordinate of the desired position </li>\n<li>desty: Y coordinate of the starting position </li>\n<li>$game_player: Player's current X and Y coordinates</li>\n</ul>\n\n<p>Sadly, it throws a <a href=\"https://i.stack.imgur.com/Qm30S.jpg\" rel=\"nofollow noreferrer\">SyntaxError</a> message, since I can't pass global variables as formal arguments. </p>\n\n<p>I've tried to make a local variable (character_position = $game_player) just before I call the find_path() function, but then a <a href=\"https://i.stack.imgur.com/K50Rm.jpg\" rel=\"nofollow noreferrer\">different error occurs</a>, so the function can't see the variable.</p>\n\n<p>The other day I found a solution to this problem; I made the character_position variable not before, but inside the find_path() funcion, and it seems like working, but I don't really know how and why. </p>\n\n<p><em>Working solution: find_path(startx, starty, destx, desty, character_position = $game_player)</em></p>\n\n<p>Can somebody explain what's happening there? Is there a cleaner, more elegant solution? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "timezone"], "comments": [{"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1519238000, "post_id": 48912422, "comment_id": 84832429, "body": "In <code>Time</code> class,  override <code>now</code> method or, just add <code>with_timezone</code> method which returns <code>timezone.now</code> -))"}], "answers": [{"comments": [{"owner": {"reputation": 515, "user_id": 8811309, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/4476b7cc4e5b6bce944fc80edc861729?s=128&d=identicon&r=PG&f=1", "display_name": "awsm sid", "link": "https://stackoverflow.com/users/8811309/awsm-sid"}, "edited": false, "score": 0, "creation_date": 1519276579, "post_id": 48913189, "comment_id": 84846504, "body": "yes bro i agree but i dont want to change Time.now to Time.current i want to overirde Time.now so that i don&#39;t have to change anywhere."}], "tags": [], "owner": {"reputation": 1531, "user_id": 1677069, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d169336c1d2c08a2d9d8022115c2c9a0?s=128&d=identicon&r=PG", "display_name": "Andres Ehrenpreis", "link": "https://stackoverflow.com/users/1677069/andres-ehrenpreis"}, "is_accepted": false, "score": 2, "last_activity_date": 1519238361, "creation_date": 1519238361, "answer_id": 48913189, "question_id": 48912422, "link": "https://stackoverflow.com/questions/48912422/how-to-override-time-now-with-time-zone-now-in-rails/48913189#48913189", "title": "How to override Time.now with Time.zone.now in rails", "body": "<p>Why not use <code>Time.current</code>? It will give you time with timezone if you have the zone set in <code>config.zone</code> or <code>Time.zone</code>.</p>\n\n<p>See the example:</p>\n\n<pre><code>2.5.0 :021 &gt; Time.zone = \"Tallinn\"\n  =&gt; \"Tallinn\" \n2.5.0 :022 &gt; Time.current\n  =&gt; Wed, 21 Feb 2018 20:37:29 EET +02:00 \n2.5.0 :023 &gt; Time.zone = \"New Delhi\"\n  =&gt; \"New Delhi\" \n2.5.0 :024 &gt; Time.current\n  =&gt; Thu, 22 Feb 2018 00:07:38 IST +05:30 \n</code></pre>\n\n<p>See the corresponding apidock about <a href=\"https://apidock.com/rails/Time/current/class\" rel=\"nofollow noreferrer\">.current</a> method and a good article in <a href=\"https://robots.thoughtbot.com/its-about-time-zones#time-zone-related-querying\" rel=\"nofollow noreferrer\">thoughtbot</a> about Ruby timezones.</p>\n"}, {"comments": [{"owner": {"reputation": 515, "user_id": 8811309, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/4476b7cc4e5b6bce944fc80edc861729?s=128&d=identicon&r=PG&f=1", "display_name": "awsm sid", "link": "https://stackoverflow.com/users/8811309/awsm-sid"}, "edited": false, "score": 0, "creation_date": 1519276496, "post_id": 48916150, "comment_id": 84846473, "body": "yes i have implement the same but the project is too big and i can&#39;t replace Time.now to Time.zone.now. i want to override Time.now to Time.zone.now so that i dont have to change everywhere"}, {"owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "reply_to_user": {"reputation": 515, "user_id": 8811309, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/4476b7cc4e5b6bce944fc80edc861729?s=128&d=identicon&r=PG&f=1", "display_name": "awsm sid", "link": "https://stackoverflow.com/users/8811309/awsm-sid"}, "edited": false, "score": 0, "creation_date": 1611185587, "post_id": 48916150, "comment_id": 116373375, "body": "@awsmsid You&#39;re creating a nightmare for anybody else joining the project if you monkey patch a ruby core library to produce different behaviour.  Don&#39;t do that.  Just grep the entire project with your IDE and replace all instances of <code>Time.now</code> to <code>Time.zone.now</code>."}], "tags": [], "owner": {"reputation": 2885, "user_id": 3372172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q3RaO.png?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3372172/pablo"}, "is_accepted": false, "score": 0, "last_activity_date": 1519250112, "creation_date": 1519250112, "answer_id": 48916150, "question_id": 48912422, "link": "https://stackoverflow.com/questions/48912422/how-to-override-time-now-with-time-zone-now-in-rails/48916150#48916150", "title": "How to override Time.now with Time.zone.now in rails", "body": "<p>This is how I do it, following Ryan Bates' railscast at: <a href=\"http://railscasts.com/episodes/106-time-zones-revised\" rel=\"nofollow noreferrer\">http://railscasts.com/episodes/106-time-zones-revised</a></p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n\n  around_action :set_time_zone, if: :current_user\n\n  def set_time_zone(&amp;block)\n    Time.use_zone(current_user.time_zone, &amp;block)\n  end\n\nend\n</code></pre>\n\n<p>The use_zone method expects a block and sets the time zone for the duration of that block. The original time zone is set back when the request completes.</p>\n\n<p>Then, I can use Time.zone.now and it will always use the correct time_zone set for the user (the time_zone method returns the time zone the user has configured in his settings or UTC). All date and time fields in forms are also treated in current user's time zone when processed in the controller or model.</p>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 3683451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/437a65880af8a5f4d4702ae5b25d6033?s=128&d=identicon&r=PG&f=1", "display_name": "hsaini734", "link": "https://stackoverflow.com/users/3683451/hsaini734"}, "is_accepted": false, "score": 0, "last_activity_date": 1584079526, "creation_date": 1584079526, "answer_id": 60665577, "question_id": 48912422, "link": "https://stackoverflow.com/questions/48912422/how-to-override-time-now-with-time-zone-now-in-rails/60665577#60665577", "title": "How to override Time.now with Time.zone.now in rails", "body": "<p>Hope this will help</p>\n\n<pre><code>module TimeOverride\n  # overriding time to return time accoring to the application configured \n  #  timezone\n  # instead of utc timezone\n  def now\n    super.getlocal(Time.zone.utc_offset)\n  end\nend\n\nmodule DateTimeOverride\n  # overriding time to return time accoring to the application configured \n  #timezone\n  # instead of utc timezone\n  def now\n    Time.now.to_datetime\n  end\nend\n\nTime.singleton_class.send(:prepend, TimeOverride)\nDateTime.singleton_class.send(:prepend, DateTimeOverride)\n</code></pre>\n"}], "owner": {"reputation": 515, "user_id": 8811309, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/4476b7cc4e5b6bce944fc80edc861729?s=128&d=identicon&r=PG&f=1", "display_name": "awsm sid", "link": "https://stackoverflow.com/users/8811309/awsm-sid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 566, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1584079526, "creation_date": 1519235516, "question_id": 48912422, "link": "https://stackoverflow.com/questions/48912422/how-to-override-time-now-with-time-zone-now-in-rails", "title": "How to override Time.now with Time.zone.now in rails", "body": "<p>Hello i am working on a rails project. i want the time with specific zone, i know i can use <code>Time.zone.now</code>\nbut i want to first set the zone and then want to get the time based on the zone. is there any way so that i can override the <code>Time.now</code> method with <code>Time.zone.now</code> after setting the zone. </p>\n\n<p>I have tried to create a before action in application_controller.rb and then define the zone, but whenever i am trying to access Time.now its always returns the time without time zone. please help me. Thanx in advance.</p>\n\n<pre><code>application_controller.rb\ndef set_current_time_zone\n  Time.zone = current_user.time_zone unless current_user.blank?\nend\n</code></pre>\n"}, {"tags": ["ruby", "postgresql", "heroku", "rubygems", "rake"], "comments": [{"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1519237837, "post_id": 48911869, "comment_id": 84832346, "body": "try 0.18. i don&#39;t know the versioning policy of pg, but always had problems with higher versions -))"}, {"owner": {"reputation": 67, "user_id": 8702406, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/47fb8c4a8861392467967f25e114c877?s=128&d=identicon&r=PG&f=1", "display_name": "Bsde", "link": "https://stackoverflow.com/users/8702406/bsde"}, "reply_to_user": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1519280803, "post_id": 48911869, "comment_id": 84848082, "body": "How to do it? Even if i set in gemfile to 0.18.4, version 1.0.0 is getting installed"}, {"owner": {"reputation": 67, "user_id": 8702406, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/47fb8c4a8861392467967f25e114c877?s=128&d=identicon&r=PG&f=1", "display_name": "Bsde", "link": "https://stackoverflow.com/users/8702406/bsde"}, "reply_to_user": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1519281494, "post_id": 48911869, "comment_id": 84848385, "body": "i cant install pg version 0.21.0 in heroku. It always install ver 1.0.0, why? I set pg (= 0.21.0) in gemlock"}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1519281987, "post_id": 48911869, "comment_id": 84848615, "body": "no, not in <code>Gemfile.lock</code>, but in your <code>Gemfile</code>,  add <code>gem &#39;pg&#39;, &#39;~&gt; 0.18&#39;</code> it will download <code>0.21</code> or some relevant version other than 1"}, {"owner": {"reputation": 67, "user_id": 8702406, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/47fb8c4a8861392467967f25e114c877?s=128&d=identicon&r=PG&f=1", "display_name": "Bsde", "link": "https://stackoverflow.com/users/8702406/bsde"}, "reply_to_user": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1519288374, "post_id": 48911869, "comment_id": 84851836, "body": "Still version 1.0.0 is get installed in heroku!! remote:        Gem::LoadError: can&#39;t activate pg (~&gt; 0.18), already activated pg-1.0.0. Make sure all dependencies are added to Gemfile."}, {"owner": {"reputation": 67, "user_id": 8702406, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/47fb8c4a8861392467967f25e114c877?s=128&d=identicon&r=PG&f=1", "display_name": "Bsde", "link": "https://stackoverflow.com/users/8702406/bsde"}, "reply_to_user": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1519288882, "post_id": 48911869, "comment_id": 84852095, "body": "I bundled, but not run rake create and migrate after this"}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1519289808, "post_id": 48911869, "comment_id": 84852641, "body": "remove Gemfile.lock, then bundle again."}, {"owner": {"reputation": 67, "user_id": 8702406, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/47fb8c4a8861392467967f25e114c877?s=128&d=identicon&r=PG&f=1", "display_name": "Bsde", "link": "https://stackoverflow.com/users/8702406/bsde"}, "reply_to_user": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1519299535, "post_id": 48911869, "comment_id": 84858987, "body": "Still version 1.0.0 is get installed I am a newbie, did I miss any simple configuration steps?"}, {"owner": {"reputation": 67, "user_id": 8702406, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/47fb8c4a8861392467967f25e114c877?s=128&d=identicon&r=PG&f=1", "display_name": "Bsde", "link": "https://stackoverflow.com/users/8702406/bsde"}, "reply_to_user": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1519301138, "post_id": 48911869, "comment_id": 84860026, "body": "<a href=\"https://github.com/rails/rails/pull/31671\" rel=\"nofollow noreferrer\">github.com/rails/rails/pull/31671</a>"}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1519314373, "post_id": 48911869, "comment_id": 84869720, "body": "I&#39;ll add steps as an answer. Please follow it."}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 8702406, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/47fb8c4a8861392467967f25e114c877?s=128&d=identicon&r=PG&f=1", "display_name": "Bsde", "link": "https://stackoverflow.com/users/8702406/bsde"}, "edited": false, "score": 0, "creation_date": 1519236820, "post_id": 48912075, "comment_id": 84831841, "body": "gets same error, but why pg 1.0.0 get installed insead 0.21.0?"}, {"owner": {"reputation": 2366, "user_id": 1644614, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/2NKuT.jpg?s=128&g=1", "display_name": "vaibhavatul47", "link": "https://stackoverflow.com/users/1644614/vaibhavatul47"}, "edited": false, "score": 0, "creation_date": 1566686454, "post_id": 48912075, "comment_id": 101735643, "body": "<code>Could not find gem &#39;pg (= 0.21.1)&#39;</code>"}], "tags": [], "owner": {"reputation": 580, "user_id": 5041876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/942018cf0f020de80bef0fbdf4a882f8?s=128&d=identicon&r=PG&f=1", "display_name": "NiftyAsp", "link": "https://stackoverflow.com/users/5041876/niftyasp"}, "is_accepted": false, "score": -2, "last_activity_date": 1519234260, "creation_date": 1519234260, "answer_id": 48912075, "question_id": 48911869, "link": "https://stackoverflow.com/questions/48911869/add-gem-pg-to-your-gemfile-and-ensure-its-version-is-at-the-minimum-required/48912075#48912075", "title": "Add `gem &#39;pg&#39;` to your Gemfile and ensure its version is at the minimum required by ActiveRecord", "body": "<p><a href=\"https://github.com/rails/rails/issues/31673\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/issues/31673</a></p>\n\n<p>It seems this is a rails issue.  I would try specifying a pg gem version in your gem file with <code>gem \"pg\", \"0.21.1\"</code></p>\n"}, {"comments": [{"owner": {"reputation": 67, "user_id": 8702406, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/47fb8c4a8861392467967f25e114c877?s=128&d=identicon&r=PG&f=1", "display_name": "Bsde", "link": "https://stackoverflow.com/users/8702406/bsde"}, "edited": false, "score": 0, "creation_date": 1519322239, "post_id": 48931972, "comment_id": 84875028, "body": "$ git add . $ git commit -m &quot;change postgres version&quot;     These steps I omitted previously. Problem solved now. Thanks for taking time to solve my issue. Please tell me can I host and run following script in github or must need heroku like service? <a href=\"https://github.com/justinechacko/projectlkp.github.io\" rel=\"nofollow noreferrer\">github.com/justinechacko/projectlkp.github.io</a>"}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "reply_to_user": {"reputation": 67, "user_id": 8702406, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/47fb8c4a8861392467967f25e114c877?s=128&d=identicon&r=PG&f=1", "display_name": "Bsde", "link": "https://stackoverflow.com/users/8702406/bsde"}, "edited": false, "score": 0, "creation_date": 1519323536, "post_id": 48931972, "comment_id": 84875700, "body": "you can host your code in github. you can also host your static web pages in github. <a href=\"https://guides.github.com/features/pages/\" rel=\"nofollow noreferrer\">github has some guides</a> about how to do this. but github can not run your server-side logic. it does not provide (as far as i know) such service. but <a href=\"https://devcenter.heroku.com/articles/github-integration\" rel=\"nofollow noreferrer\">you can host your code in github and might give heroku some instructions to deploy your code</a>."}], "tags": [], "owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "is_accepted": true, "score": 7, "last_activity_date": 1519315478, "creation_date": 1519315478, "answer_id": 48931972, "question_id": 48911869, "link": "https://stackoverflow.com/questions/48911869/add-gem-pg-to-your-gemfile-and-ensure-its-version-is-at-the-minimum-required/48931972#48931972", "title": "Add `gem &#39;pg&#39;` to your Gemfile and ensure its version is at the minimum required by ActiveRecord", "body": "<p>When you create a rails 5 application with</p>\n\n<pre><code>rails new app-name -d postgresql\n</code></pre>\n\n<p>it will set postgres gem (pg) to 0.21 by default. </p>\n\n<p>Possibly you've skipped this step when you started your project, and added <code>pg</code> on later stages. Let's rewind. </p>\n\n<pre><code>rails new without-db #defaults to sqlite3\ncd  without-db\n</code></pre>\n\n<p>Then I've edited my Gemfile replacing</p>\n\n<pre><code>gem 'sqlite3'\n</code></pre>\n\n<p>to</p>\n\n<pre><code>gem 'pg'\n</code></pre>\n\n<p>then </p>\n\n<pre><code>bundle install\n</code></pre>\n\n<p>Now, postgres gem version is 1.0.0. Edited my <code>database.yml</code> for connection credentials.Then some stuff to generate model, migration, controller etc. and push them to heroku. </p>\n\n<pre><code>$ rails g scaffold book title:string author:string genre:string description:string\n...\n$ rake db:create\n...\n$ rake db:migrate\n...\n$ heroku login\n...\n$ git init\n...\n$ heroku git:remote -a without-db-sample\n...\n$ git add .\n... \n$ git commit -m \"initial commit\"\n...\n$ git push heroku master\n...\n$ heroku run rake db:migrate\n...\n$ heroku open\n</code></pre>\n\n<p>Albeit I don't love this version of pg, it worked normally. </p>\n\n<p>Then edited <code>Gemfile</code> again, replacing, </p>\n\n<pre><code>gem 'pg' \n</code></pre>\n\n<p>to </p>\n\n<pre><code>gem 'pg', '~&gt; 0.18'\n</code></pre>\n\n<p>then </p>\n\n<pre><code>$ bundle install\n... \n$ bundle show pg\n/home/ziya/.rvm/gems/ruby-2.4.1/gems/pg-0.21.0\n$ git status\n...\n$ git add .\n...\n$ git commit -m \"change postgres version\"\n...\n$ git push heroku master\n</code></pre>\n\n<p>It still works normally - <a href=\"https://without-db-sample.herokuapp.com/books\" rel=\"noreferrer\">https://without-db-sample.herokuapp.com/books</a></p>\n"}], "owner": {"reputation": 67, "user_id": 8702406, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/47fb8c4a8861392467967f25e114c877?s=128&d=identicon&r=PG&f=1", "display_name": "Bsde", "link": "https://stackoverflow.com/users/8702406/bsde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13070, "favorite_count": 1, "accepted_answer_id": 48931972, "answer_count": 2, "score": 4, "last_activity_date": 1519315478, "creation_date": 1519233603, "last_edit_date": 1519233711, "question_id": 48911869, "link": "https://stackoverflow.com/questions/48911869/add-gem-pg-to-your-gemfile-and-ensure-its-version-is-at-the-minimum-required", "title": "Add `gem &#39;pg&#39;` to your Gemfile and ensure its version is at the minimum required by ActiveRecord", "body": "<p>I am trying to install a ruby script in heroku. I run <code>bundle install</code>, <code>rake db:create</code>, <code>rake db:migrate</code> when I tried to deploy it to heroku it throws an error, </p>\n\n<p><strong>Here is the Error :</strong></p>\n\n<pre><code>Counting objects: 858, done.\nDelta compression using up to 2 threads.\nCompressing objects: 100% (366/366), done.\nWriting objects: 100% (858/858), 1.27 MiB | 158.00 KiB/s, done.\nTotal 858 (delta 434), reused 858 (delta 434)\nremote: Compressing source files... done.\nremote: Building source:\nremote: \nremote: -----&gt; Ruby app detected\nremote: -----&gt; Compiling Ruby/Rails\nremote: -----&gt; Using Ruby version: ruby-2.3.4\nremote: ###### WARNING:\nremote:        Removing `Gemfile.lock` because it was generated on Windows.\nremote:        Bundler will do a full resolve so native gems are handled properly.\nremote:        This may result in unexpected gem versions being used in your app.\nremote:        In rare occasions Bundler may not be able to resolve your dependencies at all.\nremote:        https://devcenter.heroku.com/articles/bundler-windows-gemfile\nremote: \nremote: -----&gt; Installing dependencies using bundler 1.15.2\nremote:        Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin -j4\nremote:        The dependency tzinfo-data (&gt;= 0) will be unused by any of the platforms Bundler is installing for. Bundler is installing for ruby but the dependency is only for x86-mingw32, x86-mswin32, x64-mingw32, java. To add those platforms to the bundle, run `bundle lock --add-platform x86-mingw32 x86-mswin32 x64-mingw32 java`.\nremote:        Fetching gem metadata from https://rubygems.org/..........\nremote:        Fetching version metadata from https://rubygems.org/..\nremote:        Fetching dependency metadata from https://rubygems.org/.\nremote:        Resolving dependencies...\nremote:        Fetching rake 12.3.0\nremote:        Fetching concurrent-ruby 1.0.5\nremote:        Fetching minitest 5.11.3\nremote:        Installing rake 12.3.0\nremote:        Installing minitest 5.11.3\nremote:        Installing concurrent-ruby 1.0.5\nremote:        Fetching thread_safe 0.3.6\nremote:        Fetching builder 3.2.3\nremote:        Installing thread_safe 0.3.6\nremote:        Installing builder 3.2.3\nremote:        Fetching erubis 2.7.0\nremote:        Fetching mini_portile2 2.3.0\nremote:        Fetching crass 1.0.3\nremote:        Installing erubis 2.7.0\nremote:        Installing mini_portile2 2.3.0\nremote:        Installing crass 1.0.3\nremote:        Fetching rack 2.0.4\nremote:        Fetching nio4r 2.2.0\nremote:        Installing rack 2.0.4\nremote:        Installing nio4r 2.2.0 with native extensions\nremote:        Fetching websocket-extensions 0.1.3\nremote:        Fetching mini_mime 1.0.0\nremote:        Installing websocket-extensions 0.1.3\nremote:        Fetching coffee-script-source 1.12.2\nremote:        Installing mini_mime 1.0.0\nremote:        Installing coffee-script-source 1.12.2\nremote:        Fetching execjs 2.7.0\nremote:        Installing execjs 2.7.0\nremote:        Fetching method_source 0.9.0\nremote:        Fetching thor 0.20.0\nremote:        Installing thor 0.20.0\nremote:        Installing method_source 0.9.0\nremote:        Fetching formtastic_i18n 0.6.0\nremote:        Installing formtastic_i18n 0.6.0\nremote:        Fetching kaminari-core 1.1.1\nremote:        Fetching arel 7.1.4\nremote:        Installing kaminari-core 1.1.1\nremote:        Installing arel 7.1.4\nremote:        Fetching rb-fsevent 0.10.2\nremote:        Fetching ffi 1.9.21\nremote:        Installing rb-fsevent 0.10.2\nremote:        Fetching bcrypt 3.1.11\nremote:        Installing bcrypt 3.1.11 with native extensions\nremote:        Installing ffi 1.9.21 with native extensions\nremote:        Using bundler 1.15.2\nremote:        Fetching orm_adapter 0.5.0\nremote:        Installing orm_adapter 0.5.0\nremote:        Fetching multi_json 1.13.1\nremote:        Installing multi_json 1.13.1\nremote:        Fetching nested_scaffold 1.0.0\nremote:        Installing nested_scaffold 1.0.0\nremote:        Fetching pg 1.0.0\nremote:        Installing pg 1.0.0 with native extensions\nremote:        Fetching puma 3.11.2\nremote:        Installing puma 3.11.2 with native extensions\nremote:        Fetching tilt 2.0.8\nremote:        Installing tilt 2.0.8\nremote:        Fetching turbolinks-source 5.1.0\nremote:        Installing turbolinks-source 5.1.0\nremote:        Fetching will_paginate 3.1.6\nremote:        Installing will_paginate 3.1.6\nremote:        Fetching i18n 0.9.5\nremote:        Installing i18n 0.9.5\nremote:        Fetching tzinfo 1.2.5\nremote:        Installing tzinfo 1.2.5\nremote:        Fetching nokogiri 1.8.2\nremote:        Installing nokogiri 1.8.2 with native extensions\nremote:        Fetching rack-test 0.6.3\nremote:        Installing rack-test 0.6.3\nremote:        Fetching sprockets 3.7.1\nremote:        Installing sprockets 3.7.1\nremote:        Fetching warden 1.2.7\nremote:        Installing warden 1.2.7\nremote:        Fetching websocket-driver 0.6.5\nremote:        Installing websocket-driver 0.6.5 with native extensions\nremote:        Fetching mail 2.7.0\nremote:        Installing mail 2.7.0\nremote:        Fetching coffee-script 2.4.1\nremote:        Installing coffee-script 2.4.1\nremote:        Fetching autoprefixer-rails 8.0.0\nremote:        Installing autoprefixer-rails 8.0.0\nremote:        Fetching uglifier 4.1.6\nremote:        Installing uglifier 4.1.6\nremote:        Fetching rb-inotify 0.9.10\nremote:        Installing rb-inotify 0.9.10\nremote:        Fetching turbolinks 5.1.0\nremote:        Installing turbolinks 5.1.0\nremote:        Fetching activesupport 5.0.6\nremote:        Installing activesupport 5.0.6\nremote:        Fetching sass-listen 4.0.0\nremote:        Installing sass-listen 4.0.0\nremote:        Fetching globalid 0.4.1\nremote:        Installing globalid 0.4.1\nremote:        Fetching arbre 1.1.1\nremote:        Installing arbre 1.1.1\nremote:        Fetching activemodel 5.0.6\nremote:        Installing activemodel 5.0.6\nremote:        Fetching jbuilder 2.7.0\nremote:        Installing jbuilder 2.7.0\nremote:        Fetching sass 3.5.5\nremote:        Installing sass 3.5.5\nremote:        Fetching activejob 5.0.6\nremote:        Installing activejob 5.0.6\nremote:        Fetching activerecord 5.0.6\nremote:        Installing activerecord 5.0.6\nremote:        Fetching bootstrap-sass 3.3.7\nremote:        Installing bootstrap-sass 3.3.7\nremote:        Fetching kaminari-activerecord 1.1.1\nremote:        Installing kaminari-activerecord 1.1.1\nremote:        Fetching polyamorous 1.3.3\nremote:        Installing polyamorous 1.3.3\nremote:        Fetching rails-dom-testing 2.0.3\nremote:        Fetching loofah 2.2.0\nremote:        Installing rails-dom-testing 2.0.3\nremote:        Installing loofah 2.2.0\nremote:        Fetching rails-html-sanitizer 1.0.3\nremote:        Installing rails-html-sanitizer 1.0.3\nremote:        Fetching actionview 5.0.6\nremote:        Installing actionview 5.0.6\nremote:        Fetching kaminari-actionview 1.1.1\nremote:        Fetching actionpack 5.0.6\nremote:        Installing kaminari-actionview 1.1.1\nremote:        Fetching kaminari 1.1.1\nremote:        Installing actionpack 5.0.6\nremote:        Installing kaminari 1.1.1\nremote:        Fetching actioncable 5.0.6\nremote:        Fetching actionmailer 5.0.6\nremote:        Fetching railties 5.0.6\nremote:        Installing actionmailer 5.0.6\nremote:        Installing actioncable 5.0.6\nremote:        Fetching formtastic 3.1.5\nremote:        Installing railties 5.0.6\nremote:        Fetching has_scope 0.7.1\nremote:        Installing formtastic 3.1.5\nremote:        Installing has_scope 0.7.1\nremote:        Fetching ransack 1.8.7\nremote:        Installing ransack 1.8.7\nremote:        Fetching sprockets-rails 3.2.1\nremote:        Installing sprockets-rails 3.2.1\nremote:        Fetching simple_form 3.5.1\nremote:        Installing simple_form 3.5.1\nremote:        Fetching coffee-rails 4.2.2\nremote:        Fetching responders 2.4.0\nremote:        Installing coffee-rails 4.2.2\nremote:        Installing responders 2.4.0\nremote:        Fetching jquery-rails 4.3.1\nremote:        Fetching rails 5.0.6\nremote:        Installing rails 5.0.6\nremote:        Fetching sass-rails 5.0.7\nremote:        Installing sass-rails 5.0.7\nremote:        Fetching inherited_resources 1.8.0\nremote:        Fetching devise 4.4.1\nremote:        Installing inherited_resources 1.8.0\nremote:        Installing jquery-rails 4.3.1\nremote:        Installing devise 4.4.1\nremote:        Fetching activeadmin 1.2.1\nremote:        Installing activeadmin 1.2.1\nremote:        Bundle complete! 18 Gemfile dependencies, 79 gems now installed.\nremote:        Gems in the groups development and test were not installed.\nremote:        Bundled gems are installed into ./vendor/bundle.\nremote:        Bundle completed (30.42s)\nremote:        Cleaning up the bundler cache.\nremote: -----&gt; Installing node-v6.11.1-linux-x64\nremote: -----&gt; Detecting rake tasks\nremote: -----&gt; Preparing app for Rails asset pipeline\nremote:        Running: rake assets:precompile\nremote:        DEPRECATION WARNING: `config.static_cache_control` is deprecated and will be removed in Rails 5.1.\nremote:        Please use\nremote:        `config.public_file_server.headers = { 'Cache-Control' =&gt; 'public, max-age=2592000' }`\nremote:        instead.\nremote:        (called from block in &lt;top (required)&gt; at /tmp/build_95d492fa8732a678c298a47e2e3bb8e4/config/environments/production.rb:28)\nremote:        intializing git\nremote:        rake aborted!\nremote:        Gem::LoadError: Specified 'postgresql' for database adapter, but the gem is not loaded. Add `gem 'pg'` to your Gemfile (and ensure its version is at the minimum required by ActiveRecord).\nremote:        /tmp/build_95d492fa8732a678c298a47e2e3bb8e4/vendor/bundle/ruby/2.3.0/gems/activerecord-5.0.6/lib/active_record/connection_adapters/connection_specification.rb:176:in `rescue in spec'\nremote:        /tmp/build_95d492fa8732a678c298a47e2e3bb8e4/vendor/bundle/ruby/2.3.0/gems/activerecord-5.0.6/lib/active_record/connection_adapters/connection_specification.rb:173:in `spec'\nremote:        /tmp/build_95d492fa8732a678c298a47e2e3bb8e4/vendor/bundle/ruby/2.3.0/gems/activerecord-5.0.6/lib/active_record/connection_handling.rb:53:in `establish_connection'\nremote:        /tmp/build_95d492fa8732a678c298a47e2e3bb8e4/vendor/bundle/ruby/2.3.0/gems/activerecord-5.0.6/lib/active_record/railtie.rb:125:in `block (2 levels) in &lt;class:Railtie&gt;'\nremote:        /tmp/build_95d492fa8732a678c298a47e2e3bb8e4/vendor/bundle/ruby/2.3.0/gems/activesupport-5.0.6/lib/active_support/lazy_load_hooks.rb:69:in `instance_eval'\nremote:        /tmp/build_95d492fa8732a678c298a47e2e3bb8e4/vendor/bundle/ruby/2.3.0/gems/activesupport-5.0.6/lib/active_support/lazy_load_hooks.rb:69:in `block in execute_hook'\nremote:        /tmp/build_95d492fa8732a678c298a47e2e3bb8e4/vendor/bundle/ruby/2.3.0/gems/activesupport-5.0.6/lib/active_support/lazy_load_hooks.rb:60:in `with_execution_control'\nremote:        /tmp/build_95d492fa8732a678c298a47e2e3bb8e4/vendor/bundle/ruby/2.3.0/gems/activesupport-5.0.6/lib/active_support/lazy_load_hooks.rb:65:in `execute_hook'\nremote:        /tmp/build_95d492fa8732a678c298a47e2e3bb8e4/vendor/bundle/ruby/2.3.0/gems/activesupport-5.0.6/lib/active_support/lazy_load_hooks.rb:50:in `block in run_load_hooks'\nremote:        /tmp/build_95d492fa8732a678c298a47e2e3bb8e4/vendor/bundle/ruby/2.3.0/gems/activesupport-5.0.6/lib/active_support/lazy_load_hooks.rb:49:in `each'\nremote:        /tmp/build_95d492fa8732a678c298a47e2e3bb8e4/vendor/bundle/ruby/2.3.0/gems/activesupport-5.0.6/lib/active_support/lazy_load_hooks.rb:49:in `run_load_hooks'\n\nremote:        /tmp/build_95d492fa8732a678c298a47e2e3bb8e4/vendor/bundle/ruby/2.3.0/gems/devise-4.4.1/lib/devise/mapping.rb:78:in `modules'\nremote:        /tmp/build_95d492fa8732a678c298a47e2e3bb8e4/vendor/bundle/ruby/2.3.0/gems/devise-4.4.1/lib/devise/mapping.rb:95:in `routes'\nremote:        \n        /tmp/build_95d492fa8732a678c298a47e2e3bb8e4/vendor/bundle/ruby/2.3.0/gems/railties-5.0.6/lib/rails/initializable.rb:55:in `block in run_initializers'\nremote:        /tmp/build_95d492fa8732a678c298a47e2e3bb8e4/vendor/bundle/ruby/2.3.0/gems/railties-5.0.6/lib/rails/initializable.rb:54:in `run_initializers'\nremote:        /tmp/build_95d492fa8732a678c298a47e2e3bb8e4/vendor/bundle/ruby/2.3.0/gems/railties-5.0.6/lib/rails/application.rb:352:in `initialize!'\nremote:        /tmp/build_95d492fa8732a678c298a47e2e3bb8e4/config/environment.rb:5:in `&lt;top (required)&gt;'\nremote:        /tmp/build_95d492fa8732a678c298a47e2e3bb8e4/vendor/bundle/ruby/2.3.0/gems/activesupport-5.0.6/lib/active_support/dependencies.rb:293:in `require'\nremote:        /tmp/build_95d492fa8732a678c298a47e2e3bb8e4/vendor/bundle/ruby/2.3.0/gems/activesupport-5.0.6/lib/active_support/dependencies.rb:293:in `block in require'\nremote:        /tmp/build_95d492fa8732a678c298a47e2e3bb8e4/vendor/bundle/ruby/2.3.0/gems/activesupport-5.0.6/lib/active_support/dependencies.rb:259:in `load_dependency'\nremote:        /tmp/build_95d492fa8732a678c298a47e2e3bb8e4/vendor/bundle/ruby/2.3.0/gems/activesupport-5.0.6/lib/active_support/dependencies.rb:293:in `require'\nremote:        /tmp/build_95d492fa8732a678c298a47e2e3bb8e4/vendor/bundle/ruby/2.3.0/gems/railties-5.0.6/lib/rails/application.rb:328:in `require_environment!'\nremote:        /tmp/build_95d492fa8732a678c298a47e2e3bb8e4/vendor/bundle/ruby/2.3.0/gems/railties-5.0.6/lib/rails/application.rb:448:in `block in run_tasks_blocks'\nremote:        /tmp/build_95d492fa8732a678c298a47e2e3bb8e4/vendor/bundle/ruby/2.3.0/gems/sprockets-rails-3.2.1/lib/sprockets/rails/task.rb:62:in `block (2 levels) in define'\nremote:        /tmp/build_95d492fa8732a678c298a47e2e3bb8e4/vendor/bundle/ruby/2.3.0/gems/rake-12.3.0/exe/rake:27:in `&lt;top (required)&gt;'\nremote:        Tasks: TOP =&gt; environment\nremote:        (See full trace by running task with --trace)\nremote:  !\nremote:  !     Precompiling assets failed.\nremote:  !\nremote:  !     Push rejected, failed to compile Ruby app.\nremote: \nremote:  !     Push failed\nremote: Verifying deploy...\nremote: \nremote: !   Push rejected to limitless-hamlet-95451.\nremote: \nTo https://git.heroku.com/limitless-hamlet-95451.git\n ! [remote rejected] master -&gt; master (pre-receive hook declined)\nerror: failed to push some refs to 'https://git.heroku.com/limitless-hamlet-95451.git\n</code></pre>\n\n<p>'\nIn localhost it runs smooth..</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nested-forms"], "answers": [{"comments": [{"owner": {"reputation": 505, "user_id": 5909738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNscA.jpg?s=128&g=1", "display_name": "Tashows", "link": "https://stackoverflow.com/users/5909738/tashows"}, "reply_to_user": {"reputation": 767, "user_id": 7985922, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9f8bcc5be5da750cd58183b5ef19c89b?s=128&d=identicon&r=PG&f=1", "display_name": "Proz1g", "link": "https://stackoverflow.com/users/7985922/proz1g"}, "edited": false, "score": 0, "creation_date": 1519297124, "post_id": 48912719, "comment_id": 84857435, "body": "Glad it helped! :) You might want to mark that as the right answer, so the question is marked as resolved."}, {"owner": {"reputation": 767, "user_id": 7985922, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9f8bcc5be5da750cd58183b5ef19c89b?s=128&d=identicon&r=PG&f=1", "display_name": "Proz1g", "link": "https://stackoverflow.com/users/7985922/proz1g"}, "edited": false, "score": 0, "creation_date": 1519378780, "post_id": 48912719, "comment_id": 84896358, "body": "I forgot to do that. It&#39;s done now ;) Thk you again!"}], "tags": [], "owner": {"reputation": 505, "user_id": 5909738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNscA.jpg?s=128&g=1", "display_name": "Tashows", "link": "https://stackoverflow.com/users/5909738/tashows"}, "is_accepted": true, "score": 2, "last_activity_date": 1519236581, "creation_date": 1519236581, "answer_id": 48912719, "question_id": 48911344, "link": "https://stackoverflow.com/questions/48911344/rails-nested-forms-get-a-attribute-from-another-model/48912719#48912719", "title": "Rails - Nested Forms - Get a attribute from another model", "body": "<p>To get from the form_builder_object to the actual object you can do <code>p.object.description_type.name</code></p>\n\n<p>If you just want that as a title and not as an input field you can either:</p>\n\n<ol>\n<li>Add it in a <code>p</code> or <code>span</code> tag and make it look like a label with css or</li>\n<li>Add a <code>label_tag</code> with a custom name and title as you need. <a href=\"https://apidock.com/rails/ActionView/Helpers/FormTagHelper/label_tag\" rel=\"nofollow noreferrer\">https://apidock.com/rails/ActionView/Helpers/FormTagHelper/label_tag</a></li>\n</ol>\n"}], "owner": {"reputation": 767, "user_id": 7985922, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9f8bcc5be5da750cd58183b5ef19c89b?s=128&d=identicon&r=PG&f=1", "display_name": "Proz1g", "link": "https://stackoverflow.com/users/7985922/proz1g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 48912719, "answer_count": 1, "score": 0, "last_activity_date": 1519236581, "creation_date": 1519232042, "last_edit_date": 1519234499, "question_id": 48911344, "link": "https://stackoverflow.com/questions/48911344/rails-nested-forms-get-a-attribute-from-another-model", "title": "Rails - Nested Forms - Get a attribute from another model", "body": "<p>I'm new to Rails so maybe this is a stupid question. I'm struggling to get a attribute from another model in a nested form. Let me explain:</p>\n\n<p>I have 3 models linked each other. Poi -> PoiDescription &lt;- DescriptionType\nOne Poi can have multiple descriptions and a description have only one description type. I'm creating the PoiDescriptions inside the Poi form with a nested form. Every thing is working well, but now, inside the fields_for I want a label before the textarea with the name of the description type. But I don't know how to get it...I can't do something like 'p.description_type.name' so how can I get that attribute?</p>\n\n<p>Here is my code:</p>\n\n<p><strong>Poi Controller</strong></p>\n\n<pre><code>def new\n  @poi = Poi.new\n  @descriptions = DescriptionType.all\n  @descriptions.each do |d|\n   @poi.poi_descriptions.new(description_type_id: d.id)\n  end\nend\n</code></pre>\n\n<p><strong>Poi form</strong></p>\n\n<pre><code>&lt;%= form_with model: @poi do |f| %&gt;\n...\n  &lt;div class=\"col-md-12\"&gt;\n     &lt;%= f.fields_for :poi_descriptions do |p| %&gt;\n       &lt;%= p.hidden_field :description_type_id %&gt;\n       &lt;%= p.text_area :description %&gt;\n     &lt;% end %&gt;\n  &lt;/div&gt;\n...\n</code></pre>\n\n<p><strong>Schema</strong></p>\n\n<pre><code>create_table \"description_types\", force: :cascade do |t|\n  t.string \"name\"\n  t.datetime \"created_at\", null: false\n  t.datetime \"updated_at\", null: false\nend\n\ncreate_table \"poi_descriptions\", force: :cascade do |t|\n  t.text \"description\"\n  t.bigint \"poi_id\"\n  t.bigint \"description_type_id\"\n  t.datetime \"created_at\", null: false\n  t.datetime \"updated_at\", null: false\n  t.index [\"description_type_id\"], name: \"index_poi_descriptions_on_description_type_id\"\n  t.index [\"poi_id\"], name: \"index_poi_descriptions_on_poi_id\"\nend\n\ncreate_table \"pois\", id: :serial, force: :cascade do |t|\n  t.text \"name\"\n  t.float \"longitude\"\n  t.float \"latitude\"\n  t.datetime \"created_at\", null: false\n  t.datetime \"updated_at\", null: false\n  t.integer \"monument_id\"\n  t.integer \"beacon_id\"\n  t.string \"image_file_name\"\n  t.string \"image_content_type\"\n  t.integer \"image_file_size\"\n  t.datetime \"image_updated_at\"\n  t.index [\"beacon_id\"], name: \"index_pois_on_beacon_id\"\n  t.index [\"monument_id\"], name: \"index_pois_on_monument_id\"\nend\n</code></pre>\n\n<p>Hope you can help me! Thanks in advance.</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 778, "user_id": 2581843, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000141231384/picture?type=large", "display_name": "Sander Saelmans", "link": "https://stackoverflow.com/users/2581843/sander-saelmans"}, "is_accepted": true, "score": 1, "last_activity_date": 1519232344, "last_edit_date": 1519232344, "creation_date": 1519231747, "answer_id": 48911248, "question_id": 48910949, "link": "https://stackoverflow.com/questions/48910949/regex-timestamp-loglevel-info/48911248#48911248", "title": "Regex: timestamp + loglevel info", "body": "<p>Lets make this slightly more readable (using the regex you provided)</p>\n\n<pre><code>date_regex = /\\d{4}-\\d{2}-\\d{2}/\ntime_regex = /\\d{2}:\\d{2}:\\d{2}[,.]\\d{3}/\nlog_level_regex = /[a-zA-Z]{4,10}/\nregex = /#{date_regex}\\s#{time_regex}\\s?#{log_level_regex}/\n</code></pre>\n\n<p>The error in your regex is the wrong use of quantifiers. You're using <code>\\s</code> (exactly 1 whitespace), and <code>\\s?</code> (1 or 0 whitespaces). </p>\n\n<p>You want to use <code>\\s+</code> (1 or more whitespaces), or <code>\\s*</code> (0 or more whitespaces) instead.</p>\n\n<p>this would result in:</p>\n\n<pre><code>/#{date_regex}\\s+#{time_regex}\\s*#{log_level_regex}/\n# or if you prefer the not so readable version:\n/\\d{4}-\\d{2}-\\d{2}\\s+\\d{2}:\\d{2}:\\d{2}[,.]\\d{3}\\s*[a-zA-Z]{4,10}/\n</code></pre>\n\n<p>I'd suggest you take a look at <a href=\"http://www.rexegg.com/regex-quickstart.html#quantifiers\" rel=\"nofollow noreferrer\">regex cheat sheet quantifiers section</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1519232335, "creation_date": 1519232335, "answer_id": 48911449, "question_id": 48910949, "link": "https://stackoverflow.com/questions/48910949/regex-timestamp-loglevel-info/48911449#48911449", "title": "Regex: timestamp + loglevel info", "body": "<pre><code>log.split($/).map { |line| line[/\\A.*?(?=\\[)/].strip }\n#\u21d2 [\"2018-02-21 17:06:00,011 DEBUG\",\n#   \"2018-02-21  17:06:00,011 DEBUG\",\n#   \"2018-02-21 17:06:00,011   DEBUG\"]\n</code></pre>\n"}], "owner": {"reputation": 492, "user_id": 3797368, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/122152bc219f2f8c3efa0ce1257950e3?s=128&d=identicon&r=PG&f=1", "display_name": "MUHAHA", "link": "https://stackoverflow.com/users/3797368/muhaha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 48911248, "answer_count": 2, "score": 0, "last_activity_date": 1519232344, "creation_date": 1519230820, "question_id": 48910949, "link": "https://stackoverflow.com/questions/48910949/regex-timestamp-loglevel-info", "title": "Regex: timestamp + loglevel info", "body": "<p>I want to match (timestamp + log level info) </p>\n\n<p>Examples:</p>\n\n<pre><code>2018-02-21 17:06:00,011 DEBUG  [example]loremipsum\n2018-02-21  17:06:00,011 DEBUG [example]  loremipsum \n2018-02-21 17:06:00,011   DEBUG  [example]  loremipsum \n</code></pre>\n\n<p>with:</p>\n\n<pre><code>\\d{4}-\\d{2}-\\d{2}\\s\\d{2}:\\d{2}:\\d{2}[,.]\\d{3}\\s?[a-zA-Z]{4,10}\n</code></pre>\n\n<p>Problem is that I dont know if is correct, because I have sometimes 0 matches if after loglevel info (DEBUG) are more than two whitespaces, or tabs.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["json", "ruby", "amazon-web-services", "yaml", "amazon-cloudformation"], "comments": [{"owner": {"reputation": 4775, "user_id": 970247, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/16ecabff67e069a281676fbee172071b?s=128&d=identicon&r=PG", "display_name": "Laurent Jalbert Simard", "link": "https://stackoverflow.com/users/970247/laurent-jalbert-simard"}, "edited": false, "score": 0, "creation_date": 1519230676, "post_id": 48910737, "comment_id": 84827975, "body": "This is a bit unrelated to the question, but what are the benefits of using cfndsl over YAML templates? This makes debugging your particular problem harder as you added a moving part to the process."}, {"owner": {"reputation": 93, "user_id": 6423171, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/37ef56397b5778ab8908b8d2b5333380?s=128&d=identicon&r=PG&f=1", "display_name": "rotwar", "link": "https://stackoverflow.com/users/6423171/rotwar"}, "reply_to_user": {"reputation": 4775, "user_id": 970247, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/16ecabff67e069a281676fbee172071b?s=128&d=identicon&r=PG", "display_name": "Laurent Jalbert Simard", "link": "https://stackoverflow.com/users/970247/laurent-jalbert-simard"}, "edited": false, "score": 0, "creation_date": 1519253732, "post_id": 48910737, "comment_id": 84840236, "body": "updated to yaml"}, {"owner": {"reputation": 93, "user_id": 6423171, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/37ef56397b5778ab8908b8d2b5333380?s=128&d=identicon&r=PG&f=1", "display_name": "rotwar", "link": "https://stackoverflow.com/users/6423171/rotwar"}, "reply_to_user": {"reputation": 4775, "user_id": 970247, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/16ecabff67e069a281676fbee172071b?s=128&d=identicon&r=PG", "display_name": "Laurent Jalbert Simard", "link": "https://stackoverflow.com/users/970247/laurent-jalbert-simard"}, "edited": false, "score": 0, "creation_date": 1519254519, "post_id": 48910737, "comment_id": 84840520, "body": "here is the full stack <a href=\"https://github.com/manideep444/cloudformations/blob/master/365sandbox.yml\" rel=\"nofollow noreferrer\">github.com/manideep444/cloudformations/blob/master/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 6423171, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/37ef56397b5778ab8908b8d2b5333380?s=128&d=identicon&r=PG&f=1", "display_name": "rotwar", "link": "https://stackoverflow.com/users/6423171/rotwar"}, "edited": false, "score": 0, "creation_date": 1519328703, "post_id": 48919222, "comment_id": 84878546, "body": "the error is similar to that thanks, i use cfndsl to convert ruby to json and then to yaml for simplicity. replaced &quot;square bracket&quot; with &quot;bracket&quot; in my ruby template..did the trick"}], "tags": [], "owner": {"reputation": 4502, "user_id": 2244717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea1c764169ecb4ce79813d4ac5fcc556?s=128&d=identicon&r=PG", "display_name": "Sudharsan Sivasankaran", "link": "https://stackoverflow.com/users/2244717/sudharsan-sivasankaran"}, "is_accepted": true, "score": 2, "last_activity_date": 1519270433, "creation_date": 1519270433, "answer_id": 48919222, "question_id": 48910737, "link": "https://stackoverflow.com/questions/48910737/cloudformation-errorvalue-of-property-stepadjustments-must-be-a-list-of-objects/48919222#48919222", "title": "Cloudformation Error(Value of property Stepadjustments must be a list of objects)", "body": "<p>\"StepAdjustments\" should be a <a href=\"https://github.com/Animosity/CraftIRC/wiki/Complete-idiot%27s-introduction-to-yaml#lists\" rel=\"nofollow noreferrer\">list</a>, not a list inside a list.</p>\n\n<p>Here is an example from the <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-as-policy.html\" rel=\"nofollow noreferrer\">official documentation</a>. </p>\n\n<pre><code>StepAdjustments: \n      - \n        MetricIntervalLowerBound: \"0\"\n        MetricIntervalUpperBound: \"50\"\n        ScalingAdjustment: \"1\"\n      - \n        MetricIntervalLowerBound: \"50\"\n        ScalingAdjustment: \"2\"\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 6423171, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/37ef56397b5778ab8908b8d2b5333380?s=128&d=identicon&r=PG&f=1", "display_name": "rotwar", "link": "https://stackoverflow.com/users/6423171/rotwar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1671, "favorite_count": 0, "accepted_answer_id": 48919222, "answer_count": 1, "score": 1, "last_activity_date": 1519270433, "creation_date": 1519230206, "last_edit_date": 1519257498, "question_id": 48910737, "link": "https://stackoverflow.com/questions/48910737/cloudformation-errorvalue-of-property-stepadjustments-must-be-a-list-of-objects", "title": "Cloudformation Error(Value of property Stepadjustments must be a list of objects)", "body": "<p>I keep getting this resource creation error when i try to launch the stack</p>\n\n<pre><code>    ServiceScalingPolicyIn:\n    Properties:\n      PolicyName: StepDown\n      PolicyType: StepScaling\n      ScalingTargetId:\n        Ref: ServiceScalingTarget\n      StepScalingPolicyConfiguration:\n        AdjustmentType: ChangeInCapacity\n        Cooldown: '300'\n        MetricAggregationType: Average\n        StepAdjustments:\n        - - MetricIntervalLowerBound: '0'\n            ScalingAdjustment:\n              Ref: TasksCount\n    Type: AWS::ApplicationAutoScaling::ScalingPolicy\n\nCPUAlarmScalein:\n    Properties:\n      EvaluationPeriods: '1'\n      Statistic: Average\n      Threshold: '25'\n      AlarmDescription: Alarm if CPU usage is lower, this will always be\n      Period: '300'\n      AlarmActions:\n      - Ref: ServiceScalingPolicyIn\n      Namespace: AWS/ECS\n      Dimensions:\n      - Name: ClusterName\n        Value: ECS365-sandbox\n      - Name: ServiceName\n        Value: ECSService365\n      ComparisonOperator: LessThanThreshold\n      MetricName: CPUUtilization\n    Type: AWS::CloudWatch::Alarm\n</code></pre>\n\n<p>I tried tweaking changes </p>\n\n<pre><code>ServiceScalingTarget:\nDependsOn: ECSService365\nProperties:\n  MaxCapacity: '10'\n  MinCapacity: '1'\n  ResourceId:\n    Fn::Join:\n    - ''\n    - - service/\n      - Ref: Cluster365\n      - \"/\"\n      - Fn::GetAtt:\n        - ECSService365\n        - Name\n  RoleARN:\n    Fn::GetAtt:\n    - AutoscalingRole\n    - Arn\n  ScalableDimension: ecs:service:DesiredCount\n  ServiceNamespace: ecs\nType: AWS::ApplicationAutoScaling::ScalableTarget\n</code></pre>\n\n<p>full stack link <a href=\"https://github.com/manideep444/cloudformations/blob/master/365sandbox.yml\" rel=\"nofollow noreferrer\">https://github.com/manideep444/cloudformations/blob/master/365sandbox.yml</a>\nAWS Doc:\nAmazon EC2 Auto Scaling originally supported only simple scaling policies. If you created your scaling policy before target tracking and step policies were introduced, your policy is treated as a simple scaling policy.</p>\n\n<p><a href=\"https://i.stack.imgur.com/ARKVE.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"}, {"tags": ["ruby", "hash", "chef-infra"], "comments": [{"owner": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "edited": false, "score": 0, "creation_date": 1519230950, "post_id": 48910669, "comment_id": 84828190, "body": "I have never used Chef, but keep in mind that <code>[]</code> is a method that can be overridden, so maybe whatever Chef uses isn&#39;t really a Hash but something that uses a similar interface."}, {"owner": {"reputation": 441, "user_id": 4059501, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/9718b1a48872f0f0d9e2c74a8717dff8?s=128&d=identicon&r=PG&f=1", "display_name": "ViggyNash", "link": "https://stackoverflow.com/users/4059501/viggynash"}, "reply_to_user": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "edited": false, "score": 0, "creation_date": 1519231074, "post_id": 48910669, "comment_id": 84828272, "body": "That sounds likely. Am I right in assuming my initial understanding works for standard Ruby?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1519231777, "post_id": 48910669, "comment_id": 84828765, "body": "<code>node</code> is not a <code>Hash</code>. <code>node</code> is a <code>Chef::Node</code> the <code>[]</code> method gives you access to a <code>Chef::Attribute</code> also not a <code>Hash</code> but closer it is a <code>Mash</code> which is <code>Chef</code>s subclass of <code>Hash</code>. Why the first version did not work I cannot explain as <code>[]=(arg)</code> is a writer. Additionally why <code>merge</code> did work does not make sense either since it is not destructive (meaning it creates a copy and modifies the copy leaving the original intact) in essence <code>[]=</code> is actually similar to <code>merge!</code>"}], "answers": [{"tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 0, "last_activity_date": 1519246843, "creation_date": 1519246843, "answer_id": 48915383, "question_id": 48910669, "link": "https://stackoverflow.com/questions/48910669/chef-ruby-hash-merge-vs-hashnew-key/48915383#48915383", "title": "Chef Ruby hash.merge VS hash[new_key]", "body": "<p>The issue is you can't use <code>node['foo']</code> like that. That accesses the merged view of all attribute levels. If you then want to set things, it wouldn't know where to put them. So you need to lead off by tell it where to put the data:</p>\n\n<pre><code>tags = node.normal['attribute']['tags']\ntags['new_key'] = json_value\n</code></pre>\n\n<p>Or just:</p>\n\n<pre><code>node.normal['attribute']['tags']['new_key'] = json_value\n</code></pre>\n\n<p>Beware of setting things at the <code>normal</code> level though, it is not reset at the start of each run which is probably what you want here, but it does mean that even if you remove the recipe code doing the set, the value will still be in place on any node that already ran it. If you want to actually remove things, you have to do it explicitly.</p>\n"}], "owner": {"reputation": 441, "user_id": 4059501, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/9718b1a48872f0f0d9e2c74a8717dff8?s=128&d=identicon&r=PG&f=1", "display_name": "ViggyNash", "link": "https://stackoverflow.com/users/4059501/viggynash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 481, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519246843, "creation_date": 1519230007, "question_id": 48910669, "link": "https://stackoverflow.com/questions/48910669/chef-ruby-hash-merge-vs-hashnew-key", "title": "Chef Ruby hash.merge VS hash[new_key]", "body": "<p>I ran into an odd issue when trying to modify a chef recipe. I have an attribute that contains a large hash of hashes. For each of those sub-hashes, I wanted to add a new key/value to a 'tags' hash within. In my recipe, I create a 'tags' local variable for each of those large hashes and assign the tags hash to that local variable.</p>\n\n<p>I wanted to add a modification to the tags hash, but the modification had to be done at compile time since the value was dependent on a value stored in an input json. My first attempt was to do this:</p>\n\n<pre><code>tags = node['attribute']['tags']\ntags['new_key'] = json_value\n</code></pre>\n\n<p>However, this resulted in a spec error that indicated I should use node.default, or the equivalent attribute assignment function. So I tried that:</p>\n\n<pre><code>tags = node['attribute']['tags']\nnode.normal['attribute']['tags']['new_key'] = json_value\n</code></pre>\n\n<p>While I did not have a spec error, the new key/value was not sticking.</p>\n\n<hr>\n\n<p>At this point I reached my \"throw stuff at a wall\" phase and used the hash.merge function, which I used to think was functionally identical to hash['new_key'] for a single key/value pair addition:</p>\n\n<pre><code>tags = node['attribute']['tags']\ntags.merge({ 'new_key' =&gt; 'json_value' })\n</code></pre>\n\n<p>This ultimately worked, but I do not understand why. What functional difference is there between the two methods that causes one to be seen as a modification of the original chef attribute, but not the other?</p>\n"}, {"tags": ["ruby", "web-crawler", "mechanize", "rescue"], "comments": [{"owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 1, "creation_date": 1519284051, "post_id": 48909188, "comment_id": 84849638, "body": "Honestly, any of those sites is going to start sending 403&#39;s after the first 50 or so requests so you&#39;ve got much bigger problems than you think."}, {"owner": {"reputation": 19, "user_id": 2120677, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1decf2ddd29cab572003b8f0f8082a6?s=128&d=identicon&r=PG", "display_name": "Josh", "link": "https://stackoverflow.com/users/2120677/josh"}, "reply_to_user": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 1, "creation_date": 1519312550, "post_id": 48909188, "comment_id": 84868438, "body": "pguardiario  Do you think there is a way to just ignore the 403 and the like??"}, {"owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 0, "creation_date": 1519355095, "post_id": 48909188, "comment_id": 84887939, "body": "403 means you&#39;ve been blocked. What good would ignoring that do?"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 2120677, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1decf2ddd29cab572003b8f0f8082a6?s=128&d=identicon&r=PG", "display_name": "Josh", "link": "https://stackoverflow.com/users/2120677/josh"}, "edited": false, "score": 0, "creation_date": 1519239588, "post_id": 48911996, "comment_id": 84833253, "body": "Makushimaru I really appreciate your feedback. The shortened version definitely looks much better. I actually do have 404 rescue for <code>Mechanize::ResponseCodeError</code>. I truncated the original code and forgot to add it in. Somehow it never was successful in skipping the errors. <code>e.skip</code> wasn&#39;t actually doing what I had expected it to do."}], "tags": [], "owner": {"reputation": 96, "user_id": 8086571, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hF7EH.png?s=128&g=1", "display_name": "Makushimaru", "link": "https://stackoverflow.com/users/8086571/makushimaru"}, "is_accepted": false, "score": 1, "last_activity_date": 1519234513, "last_edit_date": 1519234513, "creation_date": 1519234012, "answer_id": 48911996, "question_id": 48909188, "link": "https://stackoverflow.com/questions/48909188/how-to-bypass-network-errors-while-using-ruby-mechanize-web-crawling/48911996#48911996", "title": "How to bypass network errors while using Ruby Mechanize web crawling", "body": "<p>If I understand the error raised is <strong>Mechanize::ResponseCodeError</strong> and this is clearly a <strong>404</strong> response_code. But in your script you don't raise 404 response_code from <strong>Mechanize::ResponseCodeError</strong></p>\n\n<pre><code>all_response_code = ['403', '404', '502']\n\nrescue Mechanize::ResponseCodeError =&gt; e\n  if all_response_code.include? response_code \n    e.skip\n    sleep 5\n  else\n    retry\n  end\n</code></pre>\n\n<p>Maybe if you add a condition for the 404 response_code, it will do the trick</p>\n\n<p><strong>EDIT</strong>\nI changed the code a little bit in order to have less lines</p>\n"}], "owner": {"reputation": 19, "user_id": 2120677, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1decf2ddd29cab572003b8f0f8082a6?s=128&d=identicon&r=PG", "display_name": "Josh", "link": "https://stackoverflow.com/users/2120677/josh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 624, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1519239239, "creation_date": 1519225629, "last_edit_date": 1519239239, "question_id": 48909188, "link": "https://stackoverflow.com/questions/48909188/how-to-bypass-network-errors-while-using-ruby-mechanize-web-crawling", "title": "How to bypass network errors while using Ruby Mechanize web crawling", "body": "<p>I am using the Ruby mechanize web crawler to pull data from popular real estate websites. I'm using the home address as keywords to scrape the public data on Zillow, Redfin, etc. \nI'm basically trying to bypass any HTTP and network errors. The following rescue function doesn't seem to do the job.</p>\n\n<pre><code>def scrape_single(key_word)\n    #setup agent\n    agent = Mechanize.new{ |agent|\n        agent.user_agent_alias = 'Mac Safari'\n    }\n    agent.ignore_bad_chunking = true\n    agent.verify_mode = OpenSSL::SSL::VERIFY_NONE \n    agent.request_headers = { \"Accept-Encoding\" =&gt; \"\"}\n    agent.follow_meta_refresh = true\n    agent.keep_alive = false\n\n    #page setup\n    begin\n      agent.get(@@search_engine) do |page|\n        @@search_result = page.form('f') do |search|\n          search.q = key_word\n        end.submit\n      end \n    rescue Timeout::Error\n      puts \"Timeout\"\n      retry\n    rescue Net::HTTPGatewayTimeOut =&gt; e\n      if e.response_code == '504' || '502'\n        e.skip\n        sleep 5\n      end\n    rescue Net::HTTPBadGateway  =&gt; e\n      if e.response_code == '504' || '502'\n        e.skip\n        sleep 5\n      end\n    rescue Net::HTTPNotFound =&gt; e\n      if e.response_code == '404'\n        e.skip\n        sleep 5\n      end\n    rescue Net::HTTPFatalError =&gt; e\n      if e.response_code == '503'\n        e.skip\n      end\n    rescue Mechanize::ResponseCodeError =&gt; e\n      if e.response_code == '404'\n        e.skip\n        sleep 5\n      elsif e.response_code == '502'\n        e.skip\n        sleep 5\n      else\n        retry\n      end\n    rescue Errno::ETIMEDOUT\n      retry\n    end\n\n    return @@search_result      # returns Mechanize::Page\n  end \n</code></pre>\n\n<p>The following is an example of error message I get for a keyword with an address in MA. </p>\n\n<blockquote>\n  <p>/home/ec2-user/.gem/ruby/2.1/gems/mechanize-2.7.5/lib/mechanize/http/agent.rb:323:in `fetch': 404 => Net::HTTPNotFound for <a href=\"https://www.redfin.com/MA/WASHINGTON/306-WERDEN-RD-Unknown/home/134059623\" rel=\"nofollow noreferrer\">https://www.redfin.com/MA/WASHINGTON/306-WERDEN-RD-Unknown/home/134059623</a> -- unhandled response (Mechanize::ResponseCodeError)</p>\n</blockquote>\n\n<p>The actual message you see when you input the above URL is:</p>\n\n<blockquote>\n  <p>Cannot GET /MA/WASHINGTON/306-WERDEN-RD-Unknown/home/134059623</p>\n</blockquote>\n\n<p>My goal is to simply ignore and skip sporadic errors and move onto next keyword. I couldn't really find a working solution online and any feedback would be greatly appreciated. </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 554, "user_id": 2627121, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/19db1b0378deb105b44f7319fa60d1b7?s=128&d=identicon&r=PG", "display_name": "Leaf", "link": "https://stackoverflow.com/users/2627121/leaf"}, "edited": false, "score": 1, "creation_date": 1519223349, "post_id": 48908327, "comment_id": 84822593, "body": "Have you tried to run <code>bundle install</code>?"}, {"owner": {"reputation": 11, "user_id": 8430085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/131798831695b1ce8a5933ce080b7fb0?s=128&d=identicon&r=PG&f=1", "display_name": "Manoj Karthik", "link": "https://stackoverflow.com/users/8430085/manoj-karthik"}, "reply_to_user": {"reputation": 554, "user_id": 2627121, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/19db1b0378deb105b44f7319fa60d1b7?s=128&d=identicon&r=PG", "display_name": "Leaf", "link": "https://stackoverflow.com/users/2627121/leaf"}, "edited": false, "score": 0, "creation_date": 1519223397, "post_id": 48908327, "comment_id": 84822633, "body": "yes i have and it keeps showing the same error"}, {"owner": {"reputation": 591, "user_id": 8502555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gysjl.jpg?s=128&g=1", "display_name": "e_a_o", "link": "https://stackoverflow.com/users/8502555/e-a-o"}, "edited": false, "score": 0, "creation_date": 1519223597, "post_id": 48908327, "comment_id": 84822785, "body": "Can you update your question with the content of your <code>Gemfile</code>?"}, {"owner": {"reputation": 11, "user_id": 8430085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/131798831695b1ce8a5933ce080b7fb0?s=128&d=identicon&r=PG&f=1", "display_name": "Manoj Karthik", "link": "https://stackoverflow.com/users/8430085/manoj-karthik"}, "edited": false, "score": 0, "creation_date": 1519223873, "post_id": 48908327, "comment_id": 84823005, "body": "Done as requested"}, {"owner": {"reputation": 554, "user_id": 2627121, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/19db1b0378deb105b44f7319fa60d1b7?s=128&d=identicon&r=PG", "display_name": "Leaf", "link": "https://stackoverflow.com/users/2627121/leaf"}, "edited": false, "score": 0, "creation_date": 1519224012, "post_id": 48908327, "comment_id": 84823127, "body": "gemfile.lock?:)"}, {"owner": {"reputation": 554, "user_id": 2627121, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/19db1b0378deb105b44f7319fa60d1b7?s=128&d=identicon&r=PG", "display_name": "Leaf", "link": "https://stackoverflow.com/users/2627121/leaf"}, "edited": false, "score": 0, "creation_date": 1519224152, "post_id": 48908327, "comment_id": 84823239, "body": "and <code>ruby -v</code> plz"}, {"owner": {"reputation": 11, "user_id": 8430085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/131798831695b1ce8a5933ce080b7fb0?s=128&d=identicon&r=PG&f=1", "display_name": "Manoj Karthik", "link": "https://stackoverflow.com/users/8430085/manoj-karthik"}, "edited": false, "score": 1, "creation_date": 1519224927, "post_id": 48908327, "comment_id": 84823828, "body": "provided all the information as requested"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1519226600, "post_id": 48908327, "comment_id": 84825029, "body": "@ManojKarthik <i>What</i> error to you get when running <code>bundle install</code>? This is the crucial information, and you have not provided it. Also, please do not post screenshots of the files; just post the actual file (as text)."}, {"owner": {"reputation": 6898, "user_id": 2012487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631fa1981d36a3b5f71426c821a8064?s=128&d=identicon&r=PG", "display_name": "Aguardientico", "link": "https://stackoverflow.com/users/2012487/aguardientico"}, "edited": false, "score": 1, "creation_date": 1519234694, "post_id": 48908327, "comment_id": 84830642, "body": "Did you try <code>bundle exec rails s</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8430085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/131798831695b1ce8a5933ce080b7fb0?s=128&d=identicon&r=PG&f=1", "display_name": "Manoj Karthik", "link": "https://stackoverflow.com/users/8430085/manoj-karthik"}, "edited": false, "score": 0, "creation_date": 1519225170, "post_id": 48908898, "comment_id": 84824002, "body": "after i try the first command it gives me the same error and update bundler says there are no updates"}, {"owner": {"reputation": 554, "user_id": 2627121, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/19db1b0378deb105b44f7319fa60d1b7?s=128&d=identicon&r=PG", "display_name": "Leaf", "link": "https://stackoverflow.com/users/2627121/leaf"}, "reply_to_user": {"reputation": 11, "user_id": 8430085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/131798831695b1ce8a5933ce080b7fb0?s=128&d=identicon&r=PG&f=1", "display_name": "Manoj Karthik", "link": "https://stackoverflow.com/users/8430085/manoj-karthik"}, "edited": false, "score": 0, "creation_date": 1519225289, "post_id": 48908898, "comment_id": 84824090, "body": "@ManojKarthik I updated answer after you had provided gemfile.lock. Plz let me know if updating json helps"}, {"owner": {"reputation": 554, "user_id": 2627121, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/19db1b0378deb105b44f7319fa60d1b7?s=128&d=identicon&r=PG", "display_name": "Leaf", "link": "https://stackoverflow.com/users/2627121/leaf"}, "reply_to_user": {"reputation": 11, "user_id": 8430085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/131798831695b1ce8a5933ce080b7fb0?s=128&d=identicon&r=PG&f=1", "display_name": "Manoj Karthik", "link": "https://stackoverflow.com/users/8430085/manoj-karthik"}, "edited": false, "score": 0, "creation_date": 1519226153, "post_id": 48908898, "comment_id": 84824672, "body": "hmm, here is a thread on the same issue <a href=\"https://stackoverflow.com/questions/21095098/why-wont-bundler-install-json-gem\" title=\"why wont bundler install json gem\">stackoverflow.com/questions/21095098/&hellip;</a>  Maybe something from there could help"}], "tags": [], "owner": {"reputation": 554, "user_id": 2627121, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/19db1b0378deb105b44f7319fa60d1b7?s=128&d=identicon&r=PG", "display_name": "Leaf", "link": "https://stackoverflow.com/users/2627121/leaf"}, "is_accepted": false, "score": 0, "last_activity_date": 1519226530, "last_edit_date": 1519226530, "creation_date": 1519224689, "answer_id": 48908898, "question_id": 48908327, "link": "https://stackoverflow.com/questions/48908327/ruby-on-rails-could-not-find-json-1-8-6-in-any-of-the-sources/48908898#48908898", "title": "Ruby on Rails Could not find json-1.8.6 in any of the sources", "body": "<p>Try <code>gem update json</code> and retry 'bundle install'</p>\n"}], "owner": {"reputation": 11, "user_id": 8430085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/131798831695b1ce8a5933ce080b7fb0?s=128&d=identicon&r=PG&f=1", "display_name": "Manoj Karthik", "link": "https://stackoverflow.com/users/8430085/manoj-karthik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1385, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519234049, "creation_date": 1519223166, "last_edit_date": 1519234049, "question_id": 48908327, "link": "https://stackoverflow.com/questions/48908327/ruby-on-rails-could-not-find-json-1-8-6-in-any-of-the-sources", "title": "Ruby on Rails Could not find json-1.8.6 in any of the sources", "body": "<p>When I run <code>rails s</code> I get the following error:</p>\n\n<blockquote>\n  <p>Could not find json-1.8.6 in any of the sources.\n  Run <code>bundle install</code> to install missing gems.</p>\n</blockquote>\n\n<p>Does anyone know how I fix this?</p>\n\n<p>Here are the contents of my \n<a href=\"https://i.stack.imgur.com/XaCYO.png\" rel=\"nofollow noreferrer\">Gemfile</a>.</p>\n\n<p>And my <a href=\"https://drive.google.com/file/d/1NZU7U5NIikfbNWVUhCUhpa7O9slq7B83/view?usp=sharing\" rel=\"nofollow noreferrer\">gemfile.lock</a>.</p>\n\n<p>I'm using Ruby version\n<code>2.3.1p112 (2016-04-26 revision 54768) [x86_64-linux]</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rake"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1519221893, "post_id": 48907782, "comment_id": 84821528, "body": "So your question is &quot;how can my rake task accept an argument&quot;? This should be easily googlable."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1519221979, "post_id": 48907782, "comment_id": 84821580, "body": "<a href=\"http://cobwwweb.com/4-ways-to-pass-arguments-to-a-rake-task\" rel=\"nofollow noreferrer\">cobwwweb.com/4-ways-to-pass-arguments-to-a-rake-task</a>"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 2, "creation_date": 1519223219, "post_id": 48907782, "comment_id": 84822484, "body": "Why not just use <code>bin&#47;rspec spec&#47;foo</code>? The rspec command already takes a path as an argument. This can be a folder or an individual file."}], "owner": {"reputation": 290, "user_id": 5630536, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/aa8b05352d99138a1001a5ec186497c4?s=128&d=identicon&r=PG&f=1", "display_name": "Speedychuck", "link": "https://stackoverflow.com/users/5630536/speedychuck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1519234719, "creation_date": 1519221536, "last_edit_date": 1519234719, "question_id": 48907782, "link": "https://stackoverflow.com/questions/48907782/first-api-testing-framework-with-rake", "title": "First API testing Framework with Rake", "body": "<p>I am setting up my own API testing framework but I am using <a href=\"http://www.mwtestconsultancy.co.uk/automated-api-framework-part-1/\" rel=\"nofollow noreferrer\">this guide</a> as a foundation. </p>\n\n<p>In the guide it uses <code>rake</code> to run the tests from the rake file by using the default rake command. </p>\n\n<p>The command runs all tests under the <code>spec</code> folder; however, I want to create a rake task I can run from the command line and just pass in which file under that folder I would like to run. </p>\n\n<p>I.E. I want to run one script at a time from the command line, instead of running every file with the default rake command.</p>\n\n<pre><code>require 'rspec/core/rake_task'\n\nRSpec::Core::RakeTask.new(:spec)\n\ntask :default =&gt; :spec\n\ntask :run do |file|\n\n  :spec =&gt; file\n\n   end\n</code></pre>\n\n<p>You can see the default rake command will run all tests under spec folder; however, I just want to pass in the file I want to run. How can I achieve this? </p>\n"}, {"tags": ["ruby", "linux", "apache-kafka", "james"], "comments": [{"owner": {"reputation": 21865, "user_id": 350613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bded62396ea66c84bd10e91c718dea9?s=128&d=identicon&r=PG", "display_name": "Robin Moffatt", "link": "https://stackoverflow.com/users/350613/robin-moffatt"}, "edited": false, "score": 0, "creation_date": 1519221651, "post_id": 48907708, "comment_id": 84821368, "body": "What&#39;s generating the emails? And what are you doing with them once they&#39;re in the database?"}, {"owner": {"reputation": 41, "user_id": 8994552, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Fuz2c3oi-Wg/AAAAAAAAAAI/AAAAAAAAAPg/GlrkZXwhwTw/photo.jpg?sz=128", "display_name": "sajeesh krishnan", "link": "https://stackoverflow.com/users/8994552/sajeesh-krishnan"}, "reply_to_user": {"reputation": 21865, "user_id": 350613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bded62396ea66c84bd10e91c718dea9?s=128&d=identicon&r=PG", "display_name": "Robin Moffatt", "link": "https://stackoverflow.com/users/350613/robin-moffatt"}, "edited": false, "score": 0, "creation_date": 1519222257, "post_id": 48907708, "comment_id": 84821782, "body": "Some alert mechanism and I dont have access to that tool; I am getting them just as an email; Once they are in DB / in a folder on a linux machine I planning to create a tool with those data. @RobinMoffatt"}], "answers": [{"tags": [], "owner": {"reputation": 13349, "user_id": 224334, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/bfeafb6026cbf6128309744296c6d726?s=128&d=identicon&r=PG", "display_name": "RyanWilcox", "link": "https://stackoverflow.com/users/224334/ryanwilcox"}, "is_accepted": false, "score": 0, "last_activity_date": 1519266554, "creation_date": 1519266554, "answer_id": 48918686, "question_id": 48907708, "link": "https://stackoverflow.com/questions/48907708/injecting-emails-into-kafka-or-any-other-message-queue/48918686#48918686", "title": "Injecting emails into Kafka or any other message queue", "body": "<p>If your Outlook account supports IMAP (<a href=\"https://www.pcworld.com/article/2048652/heres-how-to-use-outlook-coms-long-overdue-imap-support.html%20Which%20it%20may\" rel=\"nofollow noreferrer\">which it may!</a>!) then just use a gem like <a href=\"https://github.com/seattlerb/imap_processor\" rel=\"nofollow noreferrer\">https://github.com/seattlerb/imap_processor</a> to process and send these messages off. (As far as sending to Kafka, last time I looked <a href=\"https://github.com/zendesk/ruby-kafka\" rel=\"nofollow noreferrer\">https://github.com/zendesk/ruby-kafka</a> looked awesome).</p>\n\n<p>The imap processor gem has some standalone apps you can use, to check to see if your servers are compatible.</p>\n\n<p>If you are in a corporate environment and running Outlook &lt; 2013?? then IMAP might not work. I\u2019d try and set up a filter rule server side that formwarded certain messages to a Gmail account. ?? Or try to set this up client side?</p>\n"}], "owner": {"reputation": 41, "user_id": 8994552, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Fuz2c3oi-Wg/AAAAAAAAAAI/AAAAAAAAAPg/GlrkZXwhwTw/photo.jpg?sz=128", "display_name": "sajeesh krishnan", "link": "https://stackoverflow.com/users/8994552/sajeesh-krishnan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1859, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1519266554, "creation_date": 1519221262, "question_id": 48907708, "link": "https://stackoverflow.com/questions/48907708/injecting-emails-into-kafka-or-any-other-message-queue", "title": "Injecting emails into Kafka or any other message queue", "body": "<p>So my requirement is : </p>\n\n<p>I have alert emails coming into my email address ( outlook ); I want to move those ( forward ) email to a linux machine so that I can use them to push into a DB. </p>\n\n<p>--> Is there a way to get emails from my outlook box to a folder in Linux machine ( I have looked into apache james but i feel its a overhead )</p>\n\n<p>Any help would be much appreciated </p>\n\n<h1>Was following this :</h1>\n\n<h1><a href=\"https://dzone.com/articles/how-to-ingest-email-into-apache-hadoop-in-real-tim\" rel=\"nofollow noreferrer\">https://dzone.com/articles/how-to-ingest-email-into-apache-hadoop-in-real-tim</a></h1>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "rubygems", "bcrypt"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1519229895, "post_id": 48907634, "comment_id": 84827410, "body": "Asking for recommendations is off-topic. Why don&#39;t you ask for help with bcrypt / devise instead? What do you mean by <i>&quot;messing my whole website up&quot;</i>? Can you give some details?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1519251381, "post_id": 48907634, "comment_id": 84839288, "body": "&quot;messing my whole website up&quot; is not a precise enough error description for us to help you. <i>What</i> doesn&#39;t work? <i>How</i> doesn&#39;t it work? What trouble do you have with your code? Do you get an error message? What is the error message? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ? Is the behavior you are observing not the desired behavior? What is the desired behavior and why, what is the observed behavior, and in what way do they differ?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1519251391, "post_id": 48907634, "comment_id": 84839292, "body": "Can you provide a <i>precise</i> specification of what it is that you want to happen, including any and all rules, exceptions from those rules, corner cases, special cases, boundary cases, and edge cases? Can you provide sample inputs and outputs demonstrating what you expect to happen, both in normal cases, and in all the exceptions, corner cases, special cases, boundary cases, and edge cases? Please, also make sure to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1519227956, "post_id": 48907797, "comment_id": 84825933, "body": "I upvoted strictly for <b>don&#39;t do that</b>"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1519228133, "post_id": 48907797, "comment_id": 84826079, "body": "@engineersmnky: the rest of the answer is also pretty good. &#175;\\_(\u30c4)_/&#175;"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 3, "last_activity_date": 1519221583, "creation_date": 1519221583, "answer_id": 48907797, "question_id": 48907634, "link": "https://stackoverflow.com/questions/48907634/is-there-another-user-authentication-gem-that-doesnt-depend-on-bcrypt/48907797#48907797", "title": "Is there another user authentication gem that doesn&#39;t depend on bcrypt?", "body": "<p>Devise allows you to hook up any encryptor/hasher of your choice: <a href=\"https://github.com/plataformatec/devise/wiki/how-to:-create-a-custom-encryptor\" rel=\"nofollow noreferrer\">https://github.com/plataformatec/devise/wiki/how-to:-create-a-custom-encryptor</a></p>\n\n<p>You could even write your own if you wanted (don't do that).</p>\n\n<p>But if I were you, I'd really try to fix whatever problems you have with bcrypt. It is the industry standard for hashing passwords (at least in rails land).</p>\n"}], "owner": {"reputation": 1, "user_id": 9391312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd30e45774796e877c44fd3345e0644?s=128&d=identicon&r=PG&f=1", "display_name": "500ml", "link": "https://stackoverflow.com/users/9391312/500ml"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "closed_date": 1519402940, "answer_count": 1, "score": -6, "last_activity_date": 1519221583, "creation_date": 1519221061, "question_id": 48907634, "link": "https://stackoverflow.com/questions/48907634/is-there-another-user-authentication-gem-that-doesnt-depend-on-bcrypt", "closed_reason": "Not suitable for this site", "title": "Is there another user authentication gem that doesn&#39;t depend on bcrypt?", "body": "<p>I've been having a hard time with bcrypt and devise and it's messing my whole website up. Is there any other gem like devise which doesn't depend on bcrypt? Or is there another gem such as bcrypt that's compatible with devise? </p>\n\n<p>Thanks. </p>\n"}, {"tags": ["mysql", "ruby", "bundler", "globalize", "rails-generate"], "comments": [{"owner": {"reputation": 5592, "user_id": 167820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/809ac34c7d3f932baf08bba11c486b9a?s=128&d=identicon&r=PG", "display_name": "ck3g", "link": "https://stackoverflow.com/users/167820/ck3g"}, "edited": false, "score": 0, "creation_date": 1519220108, "post_id": 48906711, "comment_id": 84820320, "body": "what is the <code>source</code> on top of your Gemfile? Does it work if you try to install it localy via <code>gem install i18n -v 0.9.5</code>?"}, {"owner": {"reputation": 1095, "user_id": 5004690, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6LQZv.jpg?s=128&g=1", "display_name": "TamerB", "link": "https://stackoverflow.com/users/5004690/tamerb"}, "reply_to_user": {"reputation": 5592, "user_id": 167820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/809ac34c7d3f932baf08bba11c486b9a?s=128&d=identicon&r=PG", "display_name": "ck3g", "link": "https://stackoverflow.com/users/167820/ck3g"}, "edited": false, "score": 0, "creation_date": 1519220992, "post_id": 48906711, "comment_id": 84820925, "body": "No. It doesn&#39;t work even with <code>geme install i18n -v 0.9.5</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1095, "user_id": 5004690, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6LQZv.jpg?s=128&g=1", "display_name": "TamerB", "link": "https://stackoverflow.com/users/5004690/tamerb"}, "edited": false, "score": 0, "creation_date": 1519223770, "post_id": 48908319, "comment_id": 84822921, "body": "I updated my question with the content of my Gemfile"}, {"owner": {"reputation": 591, "user_id": 8502555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gysjl.jpg?s=128&g=1", "display_name": "e_a_o", "link": "https://stackoverflow.com/users/8502555/e-a-o"}, "reply_to_user": {"reputation": 1095, "user_id": 5004690, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6LQZv.jpg?s=128&g=1", "display_name": "TamerB", "link": "https://stackoverflow.com/users/5004690/tamerb"}, "edited": false, "score": 0, "creation_date": 1519223982, "post_id": 48908319, "comment_id": 84823104, "body": "Okay, seen, run <code>bin&#47;spring stop</code> from your terminal and try again. Does that help?"}, {"owner": {"reputation": 6020, "user_id": 200985, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/0a07a11efd94fa8a87043f7ef91cd08d?s=128&d=identicon&r=PG", "display_name": "lmat - Reinstate Monica", "link": "https://stackoverflow.com/users/200985/lmat-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1591873317, "post_id": 48908319, "comment_id": 110223491, "body": "Nope, didn&#39;t help me. Aha, fixed for me by <code>rm Gemfile.lock;</code>!"}], "tags": [], "owner": {"reputation": 591, "user_id": 8502555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gysjl.jpg?s=128&g=1", "display_name": "e_a_o", "link": "https://stackoverflow.com/users/8502555/e-a-o"}, "is_accepted": true, "score": 2, "last_activity_date": 1519223155, "creation_date": 1519223155, "answer_id": 48908319, "question_id": 48906711, "link": "https://stackoverflow.com/questions/48906711/rails-could-not-find-i18n-0-9-5-in-any-of-the-sources/48908319#48908319", "title": "Rails - Could not find i18n-0.9.5 in any of the sources", "body": "<p>Can you update your question to show the content of your <code>Gemfile</code>?</p>\n\n<p>In the meantime, here are 2 suggestions you could try:</p>\n\n<ul>\n<li><p>If you manage your gems using gemset, you could remove the gemset for that particular project using <code>rvm gemset empty gemsetname</code> or the rbenv equivalent if you use rbenv. Then run bundle install again.</p></li>\n<li><p>I've seen this happen a lot because of spring. If you happen to have the spring gem in your <code>Gemfile</code>, run <code>bin/spring stop</code>.</p></li>\n</ul>\n"}], "owner": {"reputation": 1095, "user_id": 5004690, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6LQZv.jpg?s=128&g=1", "display_name": "TamerB", "link": "https://stackoverflow.com/users/5004690/tamerb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3250, "favorite_count": 0, "accepted_answer_id": 48908319, "answer_count": 1, "score": 3, "last_activity_date": 1576514231, "creation_date": 1519218367, "last_edit_date": 1576514231, "question_id": 48906711, "link": "https://stackoverflow.com/questions/48906711/rails-could-not-find-i18n-0-9-5-in-any-of-the-sources", "title": "Rails - Could not find i18n-0.9.5 in any of the sources", "body": "<p>I'm working on a Ruby website using MySQL and I was working on internationalization using Globalize.</p>\n\n<p>However, when I run <code>rails g migration create_translation_for_articles</code>\nThe terminal displays the following:</p>\n\n<pre><code>Could not find i18n-0.9.5 in any of the sources\nRun `bundle install` to install missing gems.\n</code></pre>\n\n<p>I added <code>gem 'i18n', '~&gt; 0.9.5'</code> to Gemfile and ran <code>bundle install</code> but still no change.</p>\n\n<p>How can I fix this issue?</p>\n\n<p><strong>UPDATE</strong>: the message appears when I run any <code>rails g</code> command</p>\n\n<p>Note: Adding the gem or not makes no difference. Installing <code>i18n</code> using <code>gem install</code> gives the same result too.</p>\n\n<p>The content of my Gemfile is :</p>\n\n<pre><code>source 'https://rubygems.org'\n\ngit_source(:github) do |repo_name|\n  repo_name = \"#{repo_name}/#{repo_name}\" unless repo_name.include?(\"/\")\n  \"https://github.com/#{repo_name}.git\"\nend\n\n\ngem 'rails', '~&gt; 5.1.4'\ngem 'mysql2', '&gt;= 0.3.18', '&lt; 0.5'\ngem 'puma', '~&gt; 3.7'\ngem 'sass-rails', '~&gt; 5.0'\ngem 'uglifier', '&gt;= 1.3.0'\n\n\ngem 'coffee-rails', '~&gt; 4.2'\ngem 'turbolinks', '~&gt; 5'\n\ngem 'jbuilder', '~&gt; 2.5'\n\ngem 'devise', '~&gt; 4.4'\ngem 'toastr-rails', '~&gt; 1.0', '&gt;= 1.0.3'\n\n\ngem 'activeadmin', '~&gt; 1.1'\n\ngem 'cancancan', '~&gt; 2.1', '&gt;= 2.1.3'\n\ngem 'omniauth-facebook', '~&gt; 4.0'\ngem 'omniauth-google-oauth2', '~&gt; 0.5.2'\ngem 'dotenv', '~&gt; 2.2', '&gt;= 2.2.1'\n\ngem 'paperclip', '~&gt; 5.1'\ngem 'paperclip-av-transcoder'\n\ngem 'countries', '~&gt; 2.1', '&gt;= 2.1.3'\ngem 'flag-icons-rails'\n\ngem 'country_select'\n\ngem 'activeadmin_froala_editor', '~&gt; 0.1.2'\ngem 'jquery-rails', '~&gt; 4.3', '&gt;= 4.3.1'\n\ngem 'friendly_id', '~&gt; 5.2', '&gt;= 5.2.3'\n\ngem 'rails-i18n', '~&gt; 5.1'\ngem 'geocoder', '~&gt; 1.4', '&gt;= 1.4.5'\ngem 'globalize', '~&gt; 5.1'\ngem 'activeadmin-globalize', '~&gt; 1.0.0.pre'\n\n\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug', platforms: [:mri, :mingw, :x64_mingw]\n   # Adds support for Capybara system testing and selenium driver\n  gem 'capybara', '~&gt; 2.13'\n  gem 'selenium-webdriver'\nend\n\ngroup :development do\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; anywhere in the code.\n  gem 'web-console', '&gt;= 3.3.0'\n  gem 'listen', '&gt;= 3.0.5', '&lt; 3.2'\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring'\n  gem 'spring-watcher-listen', '~&gt; 2.0.0'\nend\n\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 2, "creation_date": 1519218261, "post_id": 48905926, "comment_id": 84818964, "body": "With respect, the sample in the guide is nonsense.  <code>clear_respond_to</code> is a class method that is executed when the <code>SessionsController</code> is initialised (i.e. application startup). At that point (application startup) there isn&#39;t a request yet so the line as provided makes no sense.  apneadiving has given you a good answer but keep in mind that whoever wrote the guide didn&#39;t actually ever run that code."}, {"owner": {"reputation": 13, "user_id": 7903109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdce6e319834ea551e99ed6143aac1af?s=128&d=identicon&r=PG", "display_name": "Marcelo Moraes", "link": "https://stackoverflow.com/users/7903109/marcelo-moraes"}, "reply_to_user": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1519219868, "post_id": 48905926, "comment_id": 84820114, "body": "@SteveTurczyn, thanks for the explanation. I searched a few posts about authentication using Devise and JWT and found a few posts, just following this which seemed the more explanatory, but unfortunately ended up not working out."}], "answers": [{"tags": [], "owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "is_accepted": true, "score": 3, "last_activity_date": 1519217576, "creation_date": 1519217576, "answer_id": 48906446, "question_id": 48905926, "link": "https://stackoverflow.com/questions/48905926/error-when-implements-devisesessionscontroller-in-request-variable/48906446#48906446", "title": "Error when implements Devise::SessionsController in request variable", "body": "<p>Try this way:</p>\n\n<pre><code>before_action :trigger_clear_respond_to, if: -&gt; { request.format == 'json' }\n\ndef trigger_clear_respond_to\n  clear_respond_to\nend\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7903109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdce6e319834ea551e99ed6143aac1af?s=128&d=identicon&r=PG", "display_name": "Marcelo Moraes", "link": "https://stackoverflow.com/users/7903109/marcelo-moraes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 1, "accepted_answer_id": 48906446, "answer_count": 1, "score": 0, "last_activity_date": 1519217576, "creation_date": 1519215984, "question_id": 48905926, "link": "https://stackoverflow.com/questions/48905926/error-when-implements-devisesessionscontroller-in-request-variable", "title": "Error when implements Devise::SessionsController in request variable", "body": "<p>I followed <a href=\"https://www.pluralsight.com/guides/ruby-ruby-on-rails/dual-authentication-using-devise-and-jwt?status=in-review\" rel=\"nofollow noreferrer\">this guide</a> to implement Dual authentication using Devise and JWT, and when I try to login into my application, I received this error:</p>\n\n<p>undefined local variable or method `request' for SessionsController:Class Did you mean? require</p>\n\n<p>Code of sessions_controller.rb:</p>\n\n<pre><code>class SessionsController &lt; Devise::SessionsController\n  respond_to :html, :json\n  clear_respond_to if request.format == 'json'\nend\n</code></pre>\n\n<p>Could someone help me with this error? Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "object", "activerecord"], "comments": [{"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 1, "creation_date": 1519217805, "post_id": 48905723, "comment_id": 84818650, "body": "except the undetermined <code>JSON.parse(node.to_json)</code>, its ok"}, {"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 3, "creation_date": 1519217947, "post_id": 48905723, "comment_id": 84818756, "body": "maybe try <code>node.as_json</code> ?"}, {"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 1, "creation_date": 1519218475, "post_id": 48905723, "comment_id": 84819108, "body": "what is actually not great is that it would lead to many db queries, this is where gems like ancestry thrive as the get all your tree members in one query"}, {"owner": {"reputation": 4429, "user_id": 102133, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/561a3a55352fe6a5343e541a6894b541?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/102133/ben"}, "reply_to_user": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1519223991, "post_id": 48905723, "comment_id": 84823114, "body": "@apneadiving agree for the queries that&#39;s why i&#39;m asking; that is, I&#39;ve checked that gem some time ago as it sounded like the go-to; but if I&#39;m not mistaking, you don&#39;t get many-to-many handling, right ? from 2012, but sounded like <a href=\"https://github.com/stefankroes/ancestry/issues/94#issuecomment-6755069\" rel=\"nofollow noreferrer\">github.com/stefankroes/ancestry/issues/94#issuecomment-67550&zwnj;&#8203;69</a> it would never ever be planned"}, {"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1519225013, "post_id": 48905723, "comment_id": 84823882, "body": "many to many feels weird in a tree though but yeah I can understand you would need it"}, {"owner": {"reputation": 4429, "user_id": 102133, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/561a3a55352fe6a5343e541a6894b541?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/102133/ben"}, "reply_to_user": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1519226563, "post_id": 48905723, "comment_id": 84825001, "body": "am building a menu for an estore; for example having a &#39;men&#39; and &#39;women&#39; category, a given &#39;shirt&#39; category can be nested in both. unfortunately ancestry &quot;owns&quot; its children, so felt like going this way; but I&#39;m still learning"}, {"owner": {"reputation": 4429, "user_id": 102133, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/561a3a55352fe6a5343e541a6894b541?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/102133/ben"}, "reply_to_user": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1519227431, "post_id": 48905723, "comment_id": 84825574, "body": "tried such <a href=\"http://www.portailsig.org/content/postgresql-focus-sur-les-requetes-sql-recursives\" rel=\"nofollow noreferrer\">portailsig.org/content/&hellip;</a> as it would limit the queries to a single function call; but am unable to completely understand the syntax"}], "answers": [{"comments": [{"owner": {"reputation": 4429, "user_id": 102133, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/561a3a55352fe6a5343e541a6894b541?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/102133/ben"}, "edited": false, "score": 0, "creation_date": 1519258350, "post_id": 48911411, "comment_id": 84841679, "body": "anyone would admit the poor sql performance, the question is here to get a nicer alternative. While I don&#39;t see the use case being that evil (let&#39;s say you&#39;ll dig 2 levels deep most of the time, that just keep the ability to nest further), am a bit deceived not to see a decent alternative. Looked into serializers, checked again as you&#39;re linking; it runs a single sql query for each includes \u2014 if Im&#39; not wrong, you get the same poor performance. I might not look into the right direction, but am wondering"}], "tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": true, "score": 1, "last_activity_date": 1519232237, "creation_date": 1519232237, "answer_id": 48911411, "question_id": 48905723, "link": "https://stackoverflow.com/questions/48905723/rubyonrails-building-full-tree-from-deeply-nested-relational-models/48911411#48911411", "title": "RubyOnRails / building full tree from deeply nested relational models", "body": "<p>Something like this should give you some inspiration:</p>\n\n<pre><code>class Item &lt; ApplicationRecord\n  has_many :joins, dependent: :destroy\n  has_many :child_items, through: :joins\n\n  def as_json_iterated\n    options = {}\n    chain_length.times { options[:include] = {child_items: options} }\n    as_json(options)\n  end\n\n  def chain_length(counter = 0)\n    return counter if child_items.empty?\n    child_items.map { |item| item.chain_length(counter + 1) }.max\n  end\n\nend\n</code></pre>\n\n<p>This results in:</p>\n\n<pre><code>Item.find(1).as_json_iterated\n#=&gt; {\n#     \"id\"=&gt;1, \n#     \"child_items\"=&gt;[{\n#       \"id\"=&gt;2, \n#       \"child_items\"=&gt;[{\n#         \"id\"=&gt;4, \n#         \"child_items\"=&gt;[{\n#           \"id\"=&gt;7,  \n#           \"child_items\"=&gt;[]\n#         }]\n#       }, {\n#         \"id\"=&gt;5, \n#         \"child_items\"=&gt;[]\n#       }]\n#     }, {\n#       \"id\"=&gt;3,  \n#       \"child_items\"=&gt;[{\n#         \"id\"=&gt;6,\n#         \"child_items\"=&gt;[]\n#       }]\n#     }]\n#   }\n</code></pre>\n\n<p><strong>Keep in mind that this method has some terrible SQL performance.</strong></p>\n\n<p>For more info about the <em>#as_json</em> options see: <em><a href=\"http://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html#method-i-as_json\" rel=\"nofollow noreferrer\">ActiveModel::Serializers::JSON#as_json</a></em></p>\n"}], "owner": {"reputation": 4429, "user_id": 102133, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/561a3a55352fe6a5343e541a6894b541?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/102133/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 1, "accepted_answer_id": 48911411, "answer_count": 1, "score": 2, "last_activity_date": 1519232237, "creation_date": 1519215394, "question_id": 48905723, "link": "https://stackoverflow.com/questions/48905723/rubyonrails-building-full-tree-from-deeply-nested-relational-models", "title": "RubyOnRails / building full tree from deeply nested relational models", "body": "<p>Having the following self relational many-to-many setup :</p>\n\n<pre><code>class Item &lt; ApplicationRecord\n  has_many :joins, dependent: :destroy\n  has_many :child_items, through: :joins\nend\n\nclass Join &lt; ApplicationRecord\n  belongs_to :item\n  belongs_to :child_item, class_name: 'Item'\nend\n</code></pre>\n\n<p>What would be the most straightforward pattern to rebuild a json representation of the full tree ? Like:</p>\n\n<pre><code>[\n  {\n    id: 1,\n    child_items: [\n      {\n        id: 2,\n        child_items: [\n          {\n            id: 3,\n            child_items: etc\u2026 untils there are no more\n          }\n        ]\n    ]\n  }, {\n    id: 4,\n    child_items: { etc... }\n  }, etc\u2026\n]\n</code></pre>\n\n<p>So far I have the simple following :</p>\n\n<pre><code>def render\n  iterate(entrypoint_item)\nend\n\ndef iterate(node)\n  h = JSON.parse(node.to_json)\n  h['child_items'] = []\n  node.child_items.collect{ |child|\n    h['child_items'] &lt;&lt; iterate(child)\n  }\n  h.delete('child_items') if h['child_items'].length &lt;= 0\n  h\nend\n</code></pre>\n\n<p>Is there a more ruby/rails-way to accomplish this ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 6, "creation_date": 1519213383, "post_id": 48904997, "comment_id": 84815588, "body": "Your <code>Store.Configurations[&#39;themify_colors&#39;]</code> seems to already be a hash. In this case, just don&#39;t parse it."}, {"owner": {"reputation": 744, "user_id": 1885107, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f3cb4e9a996ab41c7980d6954dfb68d?s=128&d=identicon&r=PG", "display_name": "Prakash Laxkar", "link": "https://stackoverflow.com/users/1885107/prakash-laxkar"}, "edited": false, "score": 0, "creation_date": 1519213506, "post_id": 48904997, "comment_id": 84815678, "body": "Can you post contains of <code>Store.Configurations</code>  here ? I would like to see the structure of it."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1519214345, "post_id": 48904997, "comment_id": 84816235, "body": "<code>@themify_colors ||= Store.Configurations[&#39;themify_colors&#39;]</code> as a function body would do."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1519217351, "post_id": 48904997, "comment_id": 84818335, "body": "See: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Please provide enough information in your question for us to be able to answer it. In this case, we need to know what is <code>Store.Configurations[&#39;themify_colors&#39;]</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1519221243, "post_id": 48907425, "comment_id": 84821093, "body": "Still does not fix the fact that the var is reassigned every time the method is called."}], "tags": [], "owner": {"reputation": 41, "user_id": 7736969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43fd7461c440c9b1783600583003df34?s=128&d=identicon&r=PG&f=1", "display_name": "kzq", "link": "https://stackoverflow.com/users/7736969/kzq"}, "is_accepted": false, "score": 0, "last_activity_date": 1519220373, "creation_date": 1519220373, "answer_id": 48907425, "question_id": 48904997, "link": "https://stackoverflow.com/questions/48904997/implicit-conversion-hash-to-string/48907425#48907425", "title": "Implicit conversion hash to string", "body": "<p>JSON.parse only accepts string as argument and by default returns a Hash. But in your case you are already passing it Hash thats why JSON.parse is throwing error.</p>\n\n<p><a href=\"http://ruby-doc.org/stdlib-2.0.0/libdoc/json/rdoc/JSON.html\" rel=\"nofollow noreferrer\">http://ruby-doc.org/stdlib-2.0.0/libdoc/json/rdoc/JSON.html</a></p>\n\n<pre><code>def themify_colors\n    @themify_colors = Store.Configurations['themify_colors'] \n    @themify_colors = JSON.parse(@themify_colors) unless @themify_colors.is_a?(Hash)\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1519221758, "creation_date": 1519221758, "answer_id": 48907854, "question_id": 48904997, "link": "https://stackoverflow.com/questions/48904997/implicit-conversion-hash-to-string/48907854#48907854", "title": "Implicit conversion hash to string", "body": "<p>You should add a conditional to avoid reassigning the variable and a check that that <code>Store.Configurations['themify_colors']</code> is a string before attemping to parse it.</p>\n\n<pre><code>def themify_colors\n  unless @themify_colors\n    config = Store.Configurations['themify_colors']\n    @themify_colors = config.is_a?(String) ? JSON.parse(config) : config  \n  end\n  @themify_colors\nend\n</code></pre>\n\n<p>Even at that its still less than perfect and a prime canidate for refactoring. Parsing config is something that more likely should be done in the initialization of the application - not in the getter that uses the value.</p>\n"}], "owner": {"reputation": 57, "user_id": 7074402, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xvyMsa5Nuas/AAAAAAAAAAI/AAAAAAAAAF8/bBnhybWeZ-E/photo.jpg?sz=128", "display_name": "Sikindar Mirza", "link": "https://stackoverflow.com/users/7074402/sikindar-mirza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1179, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1537633418, "creation_date": 1519213252, "last_edit_date": 1537633418, "question_id": 48904997, "link": "https://stackoverflow.com/questions/48904997/implicit-conversion-hash-to-string", "title": "Implicit conversion hash to string", "body": "<p>I'm getting this error.</p>\n\n<blockquote>\n  <p>\"no implicit conversion of Hash into String\"</p>\n</blockquote>\n\n<p>this is my .rb file. can anyone suggest me with a solution.</p>\n\n<pre><code>def themify_colors\n    if Store.Configurations['themify_colors'].present?\n        @themify_colors = JSON.parse(Store.Configurations['themify_colors'])\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby", "html", "cucumber", "capybara"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 4, "creation_date": 1519212337, "post_id": 48903966, "comment_id": 84814870, "body": "Those arrows are a browser-specific feature. They will render differently, or even not at all, on different browsers/versions. Unless you have explicitly implemented your <i>own</i> arrows, I wouldn&#39;t suggest using them as part of the automated tests -- all you&#39;re really testing here is the browser itself, not your own code!"}, {"owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1519217735, "post_id": 48903966, "comment_id": 84818593, "body": "That is something I put back to them but did say I&#39;d look into it.  Thank you for the response."}], "owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1519212299, "creation_date": 1519210036, "last_edit_date": 1519212299, "question_id": 48903966, "link": "https://stackoverflow.com/questions/48903966/capybara-html-number-attribute-interaction", "title": "Capybara HTML &#39;number&#39; attribute interaction", "body": "<p>I'm testing a webpage that has two input fields of type <code>number</code>. When I hover over a field, two arrows, up and down, appear to increase or decrease the value in the field.</p>\n\n<p>Is there a Capybara script that would click these arrows?</p>\n\n<p>I can use a standard <code>fill_in</code> function to change the value, but I would like to automate clicking the arrows to change the value.</p>\n"}, {"tags": ["ruby", "google-api", "google-signin", "google-oauth", "google-api-ruby-client"], "answers": [{"tags": [], "owner": {"reputation": 1070, "user_id": 1401773, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/kxDMC.jpg?s=128&g=1", "display_name": "Rodrigo Vasconcelos", "link": "https://stackoverflow.com/users/1401773/rodrigo-vasconcelos"}, "is_accepted": true, "score": 1, "last_activity_date": 1519317716, "last_edit_date": 1519317716, "creation_date": 1519308756, "answer_id": 48929545, "question_id": 48903926, "link": "https://stackoverflow.com/questions/48903926/google-signin-from-server-side-app-in-ruby/48929545#48929545", "title": "Google Signin from server side app in ruby", "body": "<p>In case somebody stumbles here with a similar problem, what caused the request to fail was the <code>Content-Type</code>, and not the <code>grant_type</code> parameter.\nDigging around in the code for the client library I saw that they use <code>application/x-www-form-urlencoded</code> the endpoint expects a <code>application/x-www-form-urlencoded</code> content type. I adjusted my code accordingly and was able to get a successful response with the valid credentials and token.\nHere follows the resulting code:</p>\n\n<pre><code>require 'uri'\nrequire 'net/http'\nrequire 'json'\n\nurl = URI(\"https://www.googleapis.com/oauth2/v4/token\")\n\nparams = {\n    \"code\" =&gt; \"#{server_auth_code_sent_to_api}\",\n    \"client_id\" =&gt; \"#{client_id_from_developer_console}\",\n    \"client_secret\" =&gt; \"#{client_secret_from_developer_console}\",\n    \"grant_type\" =&gt; \"authorization_code\",\n    \"redirect_url\" =&gt; \"#{redirect_url_from_developer_console}\",\n}\n\nresponse = Net::HTTP.post_form(url, params)\n\nputs JSON.parse(response.read_body)\n</code></pre>\n"}], "owner": {"reputation": 1070, "user_id": 1401773, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/kxDMC.jpg?s=128&g=1", "display_name": "Rodrigo Vasconcelos", "link": "https://stackoverflow.com/users/1401773/rodrigo-vasconcelos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 389, "favorite_count": 0, "accepted_answer_id": 48929545, "answer_count": 1, "score": 2, "last_activity_date": 1519317716, "creation_date": 1519209890, "last_edit_date": 1519215170, "question_id": 48903926, "link": "https://stackoverflow.com/questions/48903926/google-signin-from-server-side-app-in-ruby", "title": "Google Signin from server side app in ruby", "body": "<p>I have a mobile app that is signin in with google and sending a server auth code to my backend app.\nI want to use this code, along with the client secrets from the google developer console, to retrieve a refresh code for retrieving data from google drive when the user is offline.</p>\n\n<p>Google provides an <a href=\"https://github.com/google/google-auth-library-ruby\" rel=\"nofollow noreferrer\">client</a> for auth calls in ruby, but it seems not to be maintained lately and I could not see a way to do this kind of authorisation in the docs.\nIn the documentation, I could find an example of how to do this on python:</p>\n\n<pre><code>from oauth2client import client\n\n# Exchange auth code for access token, refresh token, and ID token\ncredentials = client.credentials_from_clientsecrets_and_code(\n    CLIENT_SECRET_FILE,\n    ['https://www.googleapis.com/auth/drive.appdata', 'profile', 'email'],\n    auth_code)\n</code></pre>\n\n<p>I would like to do this in ruby through a post to their <code>https://www.googleapis.com/oauth2/v4/token</code> endpoint. Here is what I've tried so far:</p>\n\n<pre><code>require 'uri'\nrequire 'net/http'\nrequire 'json'\n\nurl = URI(\"https://www.googleapis.com/oauth2/v4/token\")\n\nhttp = Net::HTTP.new(url.host, url.port)\nhttp.use_ssl = true    \n\nheaders = {'Content-Type': 'application/json'}\nrequest = Net::HTTP::Post.new(url.request_uri, headers)\n\nrequest.body = {\n    code: \"#{server_auth_code_sent_to_api}\",\n    client_id: \"#{client_id_from_developer_console}\",\n    client_secret: \"#{client_secret_from_developer_console}\",\n    grant_type: 'authorization_code',\n    redirect_url: '',\n}.to_json\n\nresponse = http.request(request)\nputs JSON.parse(response.read_body)\n</code></pre>\n\n<p>But I keep getting the following error:</p>\n\n<pre><code>{\n \"error\": \"unsupported_grant_type\",\n \"error_description\": \"Invalid grant_type: \"\n}\n</code></pre>\n\n<p>Does anybody has an idea on what I'm doing wrong, or has a working example on how to do this kind of authorisation?\nThanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1113, "user_id": 4701098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4QnL4.jpg?s=128&g=1", "display_name": "Samy Kacimi", "link": "https://stackoverflow.com/users/4701098/samy-kacimi"}, "edited": false, "score": 0, "creation_date": 1519210661, "post_id": 48903943, "comment_id": 84813771, "body": "Indeed. Thank you!"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 5, "last_activity_date": 1519212187, "last_edit_date": 1519212187, "creation_date": 1519209960, "answer_id": 48903943, "question_id": 48903863, "link": "https://stackoverflow.com/questions/48903863/ruby-on-rails-calling-class-method-from-concern/48903943#48903943", "title": "Ruby On Rails : Calling class method from concern", "body": "<p>Ruby is a scripting language and <em>the order matters</em>. The following would do:</p>\n\n<pre><code>class Foo &lt; ApplicationRecord\n  def self.encrypted_attributes\n     %i[attr_1 attr_2]\n  end\n\n  # OK, now we have self.encrypted_attributes defined\n  include Encryptable\nend\n</code></pre>\n\n<p>More info: <a href=\"http://api.rubyonrails.org/classes/ActiveSupport/Concern.html\" rel=\"nofollow noreferrer\"><code>ActiveSupport::Concern#included</code></a>.</p>\n"}], "owner": {"reputation": 1113, "user_id": 4701098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4QnL4.jpg?s=128&g=1", "display_name": "Samy Kacimi", "link": "https://stackoverflow.com/users/4701098/samy-kacimi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1132, "favorite_count": 0, "accepted_answer_id": 48903943, "answer_count": 1, "score": 3, "last_activity_date": 1519212187, "creation_date": 1519209711, "question_id": 48903863, "link": "https://stackoverflow.com/questions/48903863/ruby-on-rails-calling-class-method-from-concern", "title": "Ruby On Rails : Calling class method from concern", "body": "<p>In Rails, is it possible to call methods from the class that included the concern, in the concern itself ? ie:</p>\n\n<pre><code>class Foo &lt; ApplicationRecord\n  include Encryptable\n\n  def self.encrypted_attributes\n     %i[attr_1 attr_2]\n  end\nend\n\nmodule Encryptable\n  extend ActiveSupport::Concern\n\n  included do\n    self.encrypted_attributes do |attr|\n      define_method(\"#{attr}=\") do |arg|\n        # do some stuff\n      end\n\n      define_method(\"#{attr}\") do\n        # do some stuff\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>The issue is, when I try to do that, I get an error like :</p>\n\n<p><code>*** NoMethodError Exception: undefined method 'encrypted_attributes' for #&lt;Class:0x00005648d71c2430&gt;</code></p>\n\n<p>And, when debugging inside the concern, I get this something like this :</p>\n\n<pre><code>(byebug) self\nFoo (call 'Foo' to establish a connection)\n(byebug) self.class\nClass\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "rails-activerecord", "active-record-query"], "comments": [{"owner": {"reputation": 4429, "user_id": 102133, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/561a3a55352fe6a5343e541a6894b541?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/102133/ben"}, "edited": false, "score": 0, "creation_date": 1519206620, "post_id": 48902699, "comment_id": 84810697, "body": "see here for a good ref <a href=\"https://stackoverflow.com/questions/13281784/rails-activerecord-query-using-inner-join\" title=\"rails activerecord query using inner join\">stackoverflow.com/questions/13281784/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 0, "last_activity_date": 1519207148, "creation_date": 1519207148, "answer_id": 48902943, "question_id": 48902699, "link": "https://stackoverflow.com/questions/48902699/how-to-write-complex-active-record-query-in-rails/48902943#48902943", "title": "How to Write Complex Active Record Query in Rails", "body": "<p>Except for case and tables names your query should look something like this</p>\n\n<pre><code>Person.left_joins(:sales_person, :sales_territory).\n    where(sales_persons: {business_entity_id: nil, territory_id: nil}).\n    pluck(:first_name)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1519228454, "post_id": 48906133, "comment_id": 84826345, "body": "You are definitely correct about the wrong query generation although <code>select</code> and <code>pluck</code> are not both required just <code>pluck</code> will do if the intention is an <code>Array</code> of <code>first_name</code>s and just <code>select</code> will do if the intention is an <code>ActiveRecord::Relation</code> of <code>Person</code> that only has a <code>first_name</code> attribute. As it stands you will end up with the result of <code>pluck</code> with or without the <code>select</code>"}], "tags": [], "owner": {"reputation": 41, "user_id": 7736969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43fd7461c440c9b1783600583003df34?s=128&d=identicon&r=PG&f=1", "display_name": "kzq", "link": "https://stackoverflow.com/users/7736969/kzq"}, "is_accepted": false, "score": 2, "last_activity_date": 1519216636, "creation_date": 1519216636, "answer_id": 48906133, "question_id": 48902699, "link": "https://stackoverflow.com/questions/48902699/how-to-write-complex-active-record-query-in-rails/48906133#48906133", "title": "How to Write Complex Active Record Query in Rails", "body": "<p>The accepted answer will generate a wrong query as below</p>\n\n<pre><code>select * from persons \nleft outer join sales_persons on sales_persons.person_id = persons.id \nleft outer join sales_territories on sales_territories.person_id = persons.id\n</code></pre>\n\n<p>SalesTerritory table is joined with Person but according to your SQL it should join with SalesPerson</p>\n\n<p>As it is a nested join so following will generate correct SQL</p>\n\n<pre><code>Person.select(:first_name).left_joins(sales_person: :sales_territory).\nwhere(sales_persons: {business_entity_id: nil, territory_id: nil}).\npluck(:first_name)\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 7783163, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f925474fc294a6ada25188df69c528eb?s=128&d=identicon&r=PG&f=1", "display_name": "Sudeep Ghimiray", "link": "https://stackoverflow.com/users/7783163/sudeep-ghimiray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 48902943, "answer_count": 2, "score": 0, "last_activity_date": 1519216636, "creation_date": 1519206385, "question_id": 48902699, "link": "https://stackoverflow.com/questions/48902699/how-to-write-complex-active-record-query-in-rails", "title": "How to Write Complex Active Record Query in Rails", "body": "<p>I need a Active Record Query to fetch an array. CRUDS for the models are working correctly but i need to fetch array in view file. I have following SQL syntax.</p>\n\n<pre><code>select FirstName from Person.Person\nLEFT JOIN Sales.SalesPerson\nON Person.BusinessEntityID = SalesPerson.BusinessEntityID\nLEFT JOIN Sales.SalesTerritory\nON SalesPerson.TerritoryID = SalesTerritory.TerritoryID\nwhere SalesPerson.BusinessEntityID is null and SalesPerson.TerritoryID is null\n</code></pre>\n\n<p>What will be the Active Record Query syntax in rails? Any Idea?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "carrierwave"], "comments": [{"owner": {"reputation": 10727, "user_id": 479167, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0ddf90fe12087db9cfae84c52ae0147c?s=128&d=identicon&r=PG", "display_name": "rubish", "link": "https://stackoverflow.com/users/479167/rubish"}, "edited": false, "score": 0, "creation_date": 1519235772, "post_id": 48902510, "comment_id": 84831257, "body": "You can keep your current code and add <code>attr_accessor :height, :width</code> in the model. Since you are doing validation on model side, you would need height and width available there, but you do not need to persist them in database if you do not want to."}, {"owner": {"reputation": 213, "user_id": 8725207, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7f4084b5adc3677e77b5b27ca8710db4?s=128&d=identicon&r=PG&f=1", "display_name": "john seymour ", "link": "https://stackoverflow.com/users/8725207/john-seymour"}, "reply_to_user": {"reputation": 10727, "user_id": 479167, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0ddf90fe12087db9cfae84c52ae0147c?s=128&d=identicon&r=PG", "display_name": "rubish", "link": "https://stackoverflow.com/users/479167/rubish"}, "edited": false, "score": 0, "creation_date": 1519260663, "post_id": 48902510, "comment_id": 84842282, "body": "@rubish Hello rubish!  Thankyou for  replying! thats worked... My only question is how come i dont need to put the attr_accessor in the uploader as thats where the height and width are set? and its read in the model?"}, {"owner": {"reputation": 213, "user_id": 8725207, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7f4084b5adc3677e77b5b27ca8710db4?s=128&d=identicon&r=PG&f=1", "display_name": "john seymour ", "link": "https://stackoverflow.com/users/8725207/john-seymour"}, "reply_to_user": {"reputation": 10727, "user_id": 479167, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0ddf90fe12087db9cfae84c52ae0147c?s=128&d=identicon&r=PG", "display_name": "rubish", "link": "https://stackoverflow.com/users/479167/rubish"}, "edited": false, "score": 0, "creation_date": 1519260754, "post_id": 48902510, "comment_id": 84842307, "body": "@rubish can you answer the question so i mark it answered please too"}, {"owner": {"reputation": 10727, "user_id": 479167, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0ddf90fe12087db9cfae84c52ae0147c?s=128&d=identicon&r=PG", "display_name": "rubish", "link": "https://stackoverflow.com/users/479167/rubish"}, "edited": false, "score": 0, "creation_date": 1519643556, "post_id": 48902510, "comment_id": 84978732, "body": "Have posted it as an answer."}], "answers": [{"tags": [], "owner": {"reputation": 10727, "user_id": 479167, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0ddf90fe12087db9cfae84c52ae0147c?s=128&d=identicon&r=PG", "display_name": "rubish", "link": "https://stackoverflow.com/users/479167/rubish"}, "is_accepted": true, "score": 1, "last_activity_date": 1519808148, "last_edit_date": 1519808148, "creation_date": 1519643520, "answer_id": 48987157, "question_id": 48902510, "link": "https://stackoverflow.com/questions/48902510/sending-information-from-image-uploader-to-the-model-carrierwave/48987157#48987157", "title": "Sending information from image uploader to the model carrierwave", "body": "<p>To use some fields only for validations, one can define attr_accessor on the model, but need to keep in mind that these attributes would only be available when assigned explicitly(since not backed by DB columns).</p>\n\n<p>For current scenario, you can keep your current code and define <code>attr_accessor :height, :width</code> on the model and use them in validations.</p>\n"}], "owner": {"reputation": 213, "user_id": 8725207, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7f4084b5adc3677e77b5b27ca8710db4?s=128&d=identicon&r=PG&f=1", "display_name": "john seymour ", "link": "https://stackoverflow.com/users/8725207/john-seymour"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 48987157, "answer_count": 1, "score": 0, "last_activity_date": 1519808148, "creation_date": 1519205891, "question_id": 48902510, "link": "https://stackoverflow.com/questions/48902510/sending-information-from-image-uploader-to-the-model-carrierwave", "title": "Sending information from image uploader to the model carrierwave", "body": "<p>So currently i have my table with a width column and a height column, </p>\n\n<pre><code>def store_dimensions\nif file &amp;&amp; model\n  model.width, model.height = ::MiniMagick::Image.open(file.file[:dimensions])\n end\nend\n</code></pre>\n\n<p>I use this method to set the height and width so when in validation methods in the model i can validate that the dimensions are valid. </p>\n\n<p>I wondering if there was a better way to send params over to the model instead of persisting them to the database because after validation they arent used again.</p>\n\n<p>Ive tried to add</p>\n\n<p><code>attr_accessor :height, width</code></p>\n\n<p>to the uploader and the model then setting the variables in store dimensions method but cant retrieve them on the model end. </p>\n\n<p>If anyone has had any experience doing this could you shed some light thanks</p>\n"}, {"tags": ["ruby", "windows"], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 2, "last_activity_date": 1519213520, "creation_date": 1519213520, "answer_id": 48905087, "question_id": 48902332, "link": "https://stackoverflow.com/questions/48902332/opening-an-image-using-system-or-exec/48905087#48905087", "title": "Opening an image using &#39;system&#39; or &#39;exec&#39;", "body": "<p>According to <a href=\"https://superuser.com/a/246827/102368\">this answer</a>, this should work on windows.</p>\n\n<pre><code>system(\"start #{path_to_image}\")\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 9389919, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anders Aagaard", "link": "https://stackoverflow.com/users/9389919/anders-aagaard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "accepted_answer_id": 48905087, "answer_count": 1, "score": -2, "last_activity_date": 1519213549, "creation_date": 1519205402, "last_edit_date": 1519213549, "question_id": 48902332, "link": "https://stackoverflow.com/questions/48902332/opening-an-image-using-system-or-exec", "title": "Opening an image using &#39;system&#39; or &#39;exec&#39;", "body": "<p>My goal is to open image files in a default image viewer (Windows 10 Photos app), and close them per user input. My file path contains backslashes, not standard slashes, although replacing them doesn't seem to change the results I mention below.</p>\n\n<p>I tried the following:</p>\n\n<pre><code>Kernel.system('full_path_to_image')\n</code></pre>\n\n<p>or the same thing using <code>exec</code> instead, but it simply returns a format error <code>Errno::ENOEXEC</code>. Manually entering the file path in the command interpreter works even if the interpreter is opened via:</p>\n\n<pre><code>Kernel.system('cmd')\n</code></pre>\n\n<p>I tried to avoid the shell by using a multi-argument version of <code>system</code>, but I could not.</p>\n\n<p>Is it possible to do what I want to?</p>\n"}, {"tags": ["ruby", "encryption"], "answers": [{"tags": [], "owner": {"reputation": 3629, "user_id": 384693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f847aeef61e9466a132b6fdbd980e11?s=128&d=identicon&r=PG", "display_name": "spikeheap", "link": "https://stackoverflow.com/users/384693/spikeheap"}, "is_accepted": true, "score": 3, "last_activity_date": 1529233919, "creation_date": 1529233919, "answer_id": 50896081, "question_id": 48901852, "link": "https://stackoverflow.com/questions/48901852/ruby-how-to-decrypt-csv-gpg-file-using-public-private-key/50896081#50896081", "title": "Ruby: How to decrypt *.csv.gpg file using public/private key", "body": "<p>Assuming you have a <code>Gemfile</code> like:</p>\n\n<pre><code>source 'https://rubygems.org'\n\ngem 'iostreams', '~&gt; 0.14.0'\n</code></pre>\n\n<p>The following script will prompt you for the receiver's key ID and passphrase</p>\n\n<pre><code>require 'rubygems'\nrequire 'bundler/setup'\nrequire 'io/console'\n\nrequire 'iostreams'\n\ncsv_filename = './data.csv'\nencrypted_filename = './secure.pgp'\ncsv_data = File.read(csv_filename)\n\nputs \"Generating sender's key...\"\nsigner_passphrase = 'somethingreallysecure'\nsender_key_id = IOStreams::Pgp.generate_key(\n  name:       'Sender',\n  email:      'sender@example.org',\n  passphrase: signer_passphrase\n)\n\nputs 'Enter receiver key ID:'\nreceiver_key_id = gets.strip\n\nputs \"Downloading receiver's key...\"\nputs `gpg --keyserver keyserver.ubuntu.com --recv #{receiver_key_id}`\n\nputs \"Encrypting #{csv_filename} to #{encrypted_filename}\"\nsender_key = IOStreams::Pgp.list_keys(key_id: sender_key_id).first\nreceiver_key = IOStreams::Pgp.list_keys(key_id: receiver_key_id).first\n\nIOStreams::Pgp::Writer.open(\n  'secure.pgp',\n  recipient:         receiver_key[:email],\n  signer:            sender_key[:email],\n  signer_passphrase: signer_passphrase\n) do |output|\n  output.puts(csv_data)\nend\n\nputs \"Decrypting #{encrypted_filename}\"\nputs 'Enter receiver passphrase:'\nreceiver_passphrase = STDIN.noecho(&amp;:gets).chomp\ndecrypted_data = ''\nIOStreams::Pgp::Reader.open('secure.pgp', passphrase: receiver_passphrase) do |stream|\n  decrypted_data += stream.read(10) until stream.eof?\nend\n\nputs ''\nputs 'Source data'\nputs '--------------'\nputs csv_data\nputs '--------------'\nputs ''\nputs 'Decrypted data'\nputs '--------------'\nputs decrypted_data\nputs '--------------'\n</code></pre>\n\n<p>The bit you may have been missing is calling out to download (\"receive\") the key from the public server for the recipient.</p>\n\n<p>Thanks to the <a href=\"https://github.com/rocketjob/rocketjob/wiki/PGP-Encryption-with-Ruby\" rel=\"nofollow noreferrer\">RocketJob docs</a> for some of the legwork here.</p>\n"}], "owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 849, "favorite_count": 0, "accepted_answer_id": 50896081, "answer_count": 1, "score": 1, "last_activity_date": 1529233919, "creation_date": 1519203976, "question_id": 48901852, "link": "https://stackoverflow.com/questions/48901852/ruby-how-to-decrypt-csv-gpg-file-using-public-private-key", "title": "Ruby: How to decrypt *.csv.gpg file using public/private key", "body": "<p>I have a requirement to decrypt a *.csv.pgp file that should be decrypted by using the public/private key shared in public.</p>\n\n<p>I tried to find some resources \n<a href=\"https://github.com/rocketjob/rocketjob/wiki/PGP-Encryption-with-Ruby\" rel=\"nofollow noreferrer\">https://github.com/rocketjob/rocketjob/wiki/PGP-Encryption-with-Ruby</a>\n<a href=\"https://stackoverflow.com/questions/9891708/ruby-file-encryption-decryption-with-private-public-keys\">Ruby: file encryption/decryption with private/public keys</a>\nBut did not work out.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 8223442, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2gWl3BD71Dk/AAAAAAAAAAI/AAAAAAAAAEQ/_ZoryjS0kx8/photo.jpg?sz=128", "display_name": "Phathdt", "link": "https://stackoverflow.com/users/8223442/phathdt"}, "edited": false, "score": 0, "creation_date": 1519203642, "post_id": 48901645, "comment_id": 84808721, "body": "it will generate something like <code>SELECT  &quot;items&quot;.* FROM &quot;items&quot; LIMIT $1</code>, and not have some query, anything else? plz"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 25, "user_id": 8223442, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2gWl3BD71Dk/AAAAAAAAAAI/AAAAAAAAAEQ/_ZoryjS0kx8/photo.jpg?sz=128", "display_name": "Phathdt", "link": "https://stackoverflow.com/users/8223442/phathdt"}, "edited": false, "score": 0, "creation_date": 1519203831, "post_id": 48901645, "comment_id": 84808832, "body": "Try <code>unscope(where: [:status])</code>"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 25, "user_id": 8223442, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2gWl3BD71Dk/AAAAAAAAAAI/AAAAAAAAAEQ/_ZoryjS0kx8/photo.jpg?sz=128", "display_name": "Phathdt", "link": "https://stackoverflow.com/users/8223442/phathdt"}, "edited": false, "score": 0, "creation_date": 1519204122, "post_id": 48901645, "comment_id": 84809004, "body": "But you have to define your default_scope with hash, not string <code>default_scope { joins(:house}.where.not(status: deleted) }</code>"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 25, "user_id": 8223442, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2gWl3BD71Dk/AAAAAAAAAAI/AAAAAAAAAEQ/_ZoryjS0kx8/photo.jpg?sz=128", "display_name": "Phathdt", "link": "https://stackoverflow.com/users/8223442/phathdt"}, "edited": false, "score": 0, "creation_date": 1519204505, "post_id": 48901645, "comment_id": 84809246, "body": "Great. My pleasure"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 4, "last_activity_date": 1519205465, "last_edit_date": 1519205465, "creation_date": 1519203327, "answer_id": 48901645, "question_id": 48901490, "link": "https://stackoverflow.com/questions/48901490/unscope-a-default-scope-by-joins-asociation/48901645#48901645", "title": "Unscope a default scope by joins asociation", "body": "<p>Try </p>\n\n<pre><code>House.first.items.unscoped\n</code></pre>\n\n<p>Anyway, I'd use <code>default_scope</code> very rarely</p>\n\n<p>If you want to unscope just a where condition you can do</p>\n\n<pre><code>House.first.items.unscope(where: [:status])\n</code></pre>\n\n<p>But you have to change your <code>default_scope</code> declaration using an hash</p>\n\n<pre><code>default_scope { joins(:house}.where.not(status: deleted) }\n</code></pre>\n\n<p>See: <em><a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Scoping/Default/ClassMethods.html#method-i-unscoped\" rel=\"nofollow noreferrer\">ActiveRecord::Scoping::Default::ClassMethods#unscoped</a></em></p>\n"}], "owner": {"reputation": 25, "user_id": 8223442, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2gWl3BD71Dk/AAAAAAAAAAI/AAAAAAAAAEQ/_ZoryjS0kx8/photo.jpg?sz=128", "display_name": "Phathdt", "link": "https://stackoverflow.com/users/8223442/phathdt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 348, "favorite_count": 0, "accepted_answer_id": 48901645, "answer_count": 1, "score": -1, "last_activity_date": 1519205465, "creation_date": 1519202840, "question_id": 48901490, "link": "https://stackoverflow.com/questions/48901490/unscope-a-default-scope-by-joins-asociation", "title": "Unscope a default scope by joins asociation", "body": "<pre><code>class House\n  has_many :items\nend\n\nclass Item\n  belongs_to :house\n  default_scope { joins(:house}.where.not(\"house.status\": deleted) }\nend\n</code></pre>\n\n<p>i want to know how to unscope <code>where.not(\"houses.status\": deleted)</code> when i call <code>House.first.items</code> not have <code>WHERE (\"houses\".\"status\" != deleted)\n</code>\nthis default_scope is important, can not remove it T.T</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "macos", "rubymine"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1519202594, "post_id": 48901391, "comment_id": 84808129, "body": "<i>Hint:</i> <code>git</code> is a distributed version control system."}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1519202804, "post_id": 48901391, "comment_id": 84808229, "body": "@mudasobwa as far as I understand, that doesn&#39;t solve the problem, which is running the application in development mode on local machine."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1519203780, "post_id": 48901391, "comment_id": 84808806, "body": "@MarekLipka maybe you are right; I meant working on windows, then <code>git</code> it directly to mac and upload to heroku from there."}, {"owner": {"reputation": 313, "user_id": 1406904, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/70ae82210e956e534c6bba9eb626f175?s=128&d=identicon&r=PG", "display_name": "Guj Mil", "link": "https://stackoverflow.com/users/1406904/guj-mil"}, "edited": false, "score": 0, "creation_date": 1519203906, "post_id": 48901391, "comment_id": 84808868, "body": "I tried this, but the problem is all the incompatibilities on gem versions and other shenanigans that are there in Windows and OS X, it just doesn&#39;t work. So I figured it would be easier to just make it work on the Mac, and somehow access it through Windows."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1519228900, "post_id": 48901391, "comment_id": 84826699, "body": "Maybe try and solve your issues with windows and heroku because I push code from a windows machine to git and deploy to heroku from the same machine all the time"}], "answers": [{"comments": [{"owner": {"reputation": 313, "user_id": 1406904, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/70ae82210e956e534c6bba9eb626f175?s=128&d=identicon&r=PG", "display_name": "Guj Mil", "link": "https://stackoverflow.com/users/1406904/guj-mil"}, "edited": false, "score": 0, "creation_date": 1519204027, "post_id": 48901775, "comment_id": 84808953, "body": "This is exactly what I&#39;m doing now, except I use Dropbox instead of shared folders. This works fine. However, what I would like to do is run and execute on the Mac <b>from RubyMine on Windows.</b>"}], "tags": [], "owner": {"reputation": 5582, "user_id": 27060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50576d785edd6db7d1999810863bcb01?s=128&d=identicon&r=PG", "display_name": "Reuben Mallaby", "link": "https://stackoverflow.com/users/27060/reuben-mallaby"}, "is_accepted": false, "score": 0, "last_activity_date": 1519203727, "creation_date": 1519203727, "answer_id": 48901775, "question_id": 48901391, "link": "https://stackoverflow.com/questions/48901391/rubymine-on-windows-with-rails-code-on-os-x-server/48901775#48901775", "title": "RubyMine on Windows with rails code on OS X server", "body": "<p>If your question sounds bizarre, so does my answer. I have experimented a similar setup with Linux servers.</p>\n\n<ol>\n<li><p>Set up a shared folder to host the code on the Mac: <a href=\"https://support.apple.com/kb/PH25346?locale=en_GB\" rel=\"nofollow noreferrer\">Apple\ninstructions here</a>    </p></li>\n<li><p>Access the folder over your LAN and edit the code in RubyMine. </p></li>\n<li><p>Open an SSH terminal to your Mac so that you can remotely run the\nRails server, run necessary commands and view the logs (easy with\nyour multi-monitor setup)      </p></li>\n</ol>\n\n<p>Note: RubyMine will likely complain about missing gems.</p>\n"}, {"comments": [{"owner": {"reputation": 313, "user_id": 1406904, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/70ae82210e956e534c6bba9eb626f175?s=128&d=identicon&r=PG", "display_name": "Guj Mil", "link": "https://stackoverflow.com/users/1406904/guj-mil"}, "edited": false, "score": 0, "creation_date": 1519206157, "post_id": 48902344, "comment_id": 84810355, "body": "This is what I&#39;m currently trying out. I set up a remote Ruby SDK, and then I created a Run configuration with that SDK. When I hit &#39;Run&#39;, the console prints the command:  <b>/Users/&lt;My_User&gt;/.rbenv/versions/2.3.0/bin/ruby Z:/&lt;My_Project&gt;/bin/rails server -b 192.168.1.3 -p 3000 -e development</b>  Z would be the shared drive on Windows, which links to a folder on the Mac. This is an error because Z:/ doesn&#39;t exist on the Mac."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 313, "user_id": 1406904, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/70ae82210e956e534c6bba9eb626f175?s=128&d=identicon&r=PG", "display_name": "Guj Mil", "link": "https://stackoverflow.com/users/1406904/guj-mil"}, "edited": false, "score": 0, "creation_date": 1519226297, "post_id": 48902344, "comment_id": 84824787, "body": "I found the issue to your problem and update the answer."}], "tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": true, "score": 1, "last_activity_date": 1519228859, "last_edit_date": 1519228859, "creation_date": 1519205428, "answer_id": 48902344, "question_id": 48901391, "link": "https://stackoverflow.com/questions/48901391/rubymine-on-windows-with-rails-code-on-os-x-server/48902344#48902344", "title": "RubyMine on Windows with rails code on OS X server", "body": "<p>You can let RubyMine use an SDK over SSH. </p>\n\n<ol>\n<li>go to: <em>File => Settings</em> </li>\n<li>select: <em>Languages &amp; Frameworks => Ruby SDK and gems</em></li>\n<li>click the <em>add</em> icon (plus symbol)</li>\n<li>choose: <em>New remote...</em> </li>\n<li>select: <em>SSH Credentials</em></li>\n<li>fill in the host, username, password and path</li>\n</ol>\n\n<p>After adding the remote SDK make sure it is selected as your project SDK.</p>\n\n<p><strong>edit</strong></p>\n\n<p>As @GujMil pointed out in the comments below, when running the application the Windows path is send as parameter to the Ruby SDK. After some fiddling I found that you can map the local path to the remote path in the SDK Configuration or Run/Debug Configurations.</p>\n\n<ol>\n<li>go back to the SDK configuration (step 1 &amp; 2 previous list)</li>\n<li>click the <em>Edit Path Mappings</em> icon for your remote Ruby SDK (<a href=\"https://www.jetbrains.com/help/img/idea/2017.3/edit_path_mapping_icon.png\" rel=\"nofollow noreferrer\">img</a>)</li>\n<li>add your path maps</li>\n</ol>\n\n<p>For me the following was enough (using Linux instead of OS X):</p>\n\n<pre><code>+----------------+-------------+\n| Local path     | Remote path |\n+----------------+-------------+\n| //192.168.0.96 | /home       |\n+----------------+-------------+\n</code></pre>\n\n<p>For further info see: <a href=\"https://www.jetbrains.com/help/ruby/configuring-remote-interpreters-via-ssh.html\" rel=\"nofollow noreferrer\">https://www.jetbrains.com/help/ruby/configuring-remote-interpreters-via-ssh.html</a></p>\n"}], "owner": {"reputation": 313, "user_id": 1406904, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/70ae82210e956e534c6bba9eb626f175?s=128&d=identicon&r=PG", "display_name": "Guj Mil", "link": "https://stackoverflow.com/users/1406904/guj-mil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 48902344, "answer_count": 2, "score": 0, "last_activity_date": 1519228859, "creation_date": 1519202497, "question_id": 48901391, "link": "https://stackoverflow.com/questions/48901391/rubymine-on-windows-with-rails-code-on-os-x-server", "title": "RubyMine on Windows with rails code on OS X server", "body": "<p>This is a weird question, so bear with me while I try to explain it properly. </p>\n\n<p>I have a Ruby on Rails app running on Heroku, with source code on Git. In my home, I have a Mac small laptop, and a Windows 7 Desktop PC.</p>\n\n<p>What I want is to be able to work the code on RubyMine on my Windows machine. Because of many many shenanigans, working on Windows and then uploading to heroku <strong>just doesn't work.</strong></p>\n\n<p>Instead, I would like to download my code on my Mac, open it somehow from Windows (on LAN), and be able to run it on the Mac (from RubyMine on Windows), and open it in a browser from Windows.</p>\n\n<p>I've been trying for several weeks now. Have anyone done this before? I know it sounds bizarre, but I really wish to work on my 3 monitors Windows setup.</p>\n"}, {"tags": ["ruby", "ssh", "capistrano", "capistrano3"], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 6485717, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/ZE0KH.png?s=128&g=1", "display_name": "Junmar Calimbas Jose", "link": "https://stackoverflow.com/users/6485717/junmar-calimbas-jose"}, "edited": false, "score": 0, "creation_date": 1519200192, "post_id": 48900471, "comment_id": 84806859, "body": "Could you please explain more? Pretty please."}, {"owner": {"reputation": 1930, "user_id": 6015889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2359a5839ab1afea717f15dc0536449e?s=128&d=identicon&r=PG&f=1", "display_name": "Anthony L ", "link": "https://stackoverflow.com/users/6015889/anthony-l"}, "reply_to_user": {"reputation": 133, "user_id": 6485717, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/ZE0KH.png?s=128&g=1", "display_name": "Junmar Calimbas Jose", "link": "https://stackoverflow.com/users/6485717/junmar-calimbas-jose"}, "edited": false, "score": 0, "creation_date": 1519200316, "post_id": 48900471, "comment_id": 84806926, "body": "The domain (siliconserve.com) is not accepting connections on port 22.  It is not possible to troubleshoot further without knowing the OS and firewall configuration of the server for that domain."}, {"owner": {"reputation": 133, "user_id": 6485717, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/ZE0KH.png?s=128&g=1", "display_name": "Junmar Calimbas Jose", "link": "https://stackoverflow.com/users/6485717/junmar-calimbas-jose"}, "edited": false, "score": 0, "creation_date": 1519201493, "post_id": 48900471, "comment_id": 84807557, "body": "You mean we could only deploy using port 22?"}], "tags": [], "owner": {"reputation": 1930, "user_id": 6015889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2359a5839ab1afea717f15dc0536449e?s=128&d=identicon&r=PG&f=1", "display_name": "Anthony L ", "link": "https://stackoverflow.com/users/6015889/anthony-l"}, "is_accepted": false, "score": 0, "last_activity_date": 1519198844, "creation_date": 1519198844, "answer_id": 48900471, "question_id": 48900427, "link": "https://stackoverflow.com/questions/48900427/capistrano-sshkit-execute-error/48900471#48900471", "title": "Capistrano SSHKit Execute Error", "body": "<p>It looks like your firewall is blocking port 22 on your domain (SSH).</p>\n"}], "owner": {"reputation": 133, "user_id": 6485717, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/ZE0KH.png?s=128&g=1", "display_name": "Junmar Calimbas Jose", "link": "https://stackoverflow.com/users/6485717/junmar-calimbas-jose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 527, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519198844, "creation_date": 1519198668, "question_id": 48900427, "link": "https://stackoverflow.com/questions/48900427/capistrano-sshkit-execute-error", "title": "Capistrano SSHKit Execute Error", "body": "<p>I'm new to deploying using Capistrano and I don't know why I am receiving this kind of error. I need your insights about what is happening here and what are the possible solutions.</p>\n\n<pre><code>** Invoke sandbox (first_time)\n** Execute sandbox\n** Invoke load:defaults (first_time)\n** Execute load:defaults\n** Invoke deploy (first_time)\n** Execute deploy\n** Invoke deploy:starting (first_time)\n** Execute deploy:starting\n** Invoke deploy:check (first_time)\n** Invoke git:check (first_time)\n** Invoke git:wrapper (first_time)\n** Execute git:wrapper\n00:00 git:wrapper\n      01 mkdir -p /tmp\ncap aborted!\nSSHKit::Runner::ExecuteError: Exception while executing as silicons@siliconserve.com: Net::SSH::ConnectionTimeout\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/sshkit-1.16.0/lib/sshkit/runners/parallel.rb:15:in `rescue in block (2 levels) in execute'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/sshkit-1.16.0/lib/sshkit/runners/parallel.rb:11:in `block (2 levels) in execute'\nNet::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/net-ssh-4.2.0/lib/net/ssh/transport/session.rb:90:in `rescue in initialize'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/net-ssh-4.2.0/lib/net/ssh/transport/session.rb:56:in `initialize'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/net-ssh-4.2.0/lib/net/ssh.rb:237:in `new'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/net-ssh-4.2.0/lib/net/ssh.rb:237:in `start'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/sshkit-1.16.0/lib/sshkit/backends/connection_pool.rb:59:in `call'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/sshkit-1.16.0/lib/sshkit/backends/connection_pool.rb:59:in `with'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/sshkit-1.16.0/lib/sshkit/backends/netssh.rb:176:in `with_ssh'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/sshkit-1.16.0/lib/sshkit/backends/netssh.rb:129:in `execute_command'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/sshkit-1.16.0/lib/sshkit/backends/abstract.rb:141:in `block in create_command_and_execute'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/sshkit-1.16.0/lib/sshkit/backends/abstract.rb:141:in `tap'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/sshkit-1.16.0/lib/sshkit/backends/abstract.rb:141:in `create_command_and_execute'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/sshkit-1.16.0/lib/sshkit/backends/abstract.rb:74:in `execute'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/capistrano-3.10.1/lib/capistrano/scm/tasks/git.rake:8:in `block (3 levels) in eval_rakefile'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/sshkit-1.16.0/lib/sshkit/backends/abstract.rb:29:in `instance_exec'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/sshkit-1.16.0/lib/sshkit/backends/abstract.rb:29:in `run'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/sshkit-1.16.0/lib/sshkit/runners/parallel.rb:12:in `block (2 levels) in execute'\nErrno::ETIMEDOUT: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. - connect(2) for 78.46.114.60:22\nC:/Ruby24-x64/lib/ruby/2.4.0/socket.rb:64:in `connect'\nC:/Ruby24-x64/lib/ruby/2.4.0/socket.rb:64:in `connect_internal'\nC:/Ruby24-x64/lib/ruby/2.4.0/socket.rb:137:in `connect'\nC:/Ruby24-x64/lib/ruby/2.4.0/socket.rb:627:in `block in tcp'\nC:/Ruby24-x64/lib/ruby/2.4.0/socket.rb:227:in `each'\nC:/Ruby24-x64/lib/ruby/2.4.0/socket.rb:227:in `foreach'\nC:/Ruby24-x64/lib/ruby/2.4.0/socket.rb:617:in `tcp'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/net-ssh-4.2.0/lib/net/ssh/transport/session.rb:70:in `initialize'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/net-ssh-4.2.0/lib/net/ssh.rb:237:in `new'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/net-ssh-4.2.0/lib/net/ssh.rb:237:in `start'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/sshkit-1.16.0/lib/sshkit/backends/connection_pool.rb:59:in `call'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/sshkit-1.16.0/lib/sshkit/backends/connection_pool.rb:59:in `with'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/sshkit-1.16.0/lib/sshkit/backends/netssh.rb:176:in `with_ssh'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/sshkit-1.16.0/lib/sshkit/backends/netssh.rb:129:in `execute_command'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/sshkit-1.16.0/lib/sshkit/backends/abstract.rb:141:in `block in create_command_and_execute'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/sshkit-1.16.0/lib/sshkit/backends/abstract.rb:141:in `tap'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/sshkit-1.16.0/lib/sshkit/backends/abstract.rb:141:in `create_command_and_execute'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/sshkit-1.16.0/lib/sshkit/backends/abstract.rb:74:in `execute'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/capistrano-3.10.1/lib/capistrano/scm/tasks/git.rake:8:in `block (3 levels) in eval_rakefile'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/sshkit-1.16.0/lib/sshkit/backends/abstract.rb:29:in `instance_exec'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/sshkit-1.16.0/lib/sshkit/backends/abstract.rb:29:in `run'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/sshkit-1.16.0/lib/sshkit/runners/parallel.rb:12:in `block (2 levels) in execute'\nTasks: TOP =&gt; deploy:check =&gt; git:check =&gt; git:wrapper\nThe deploy has failed with an error: Exception while executing as silicons@siliconserve.com: Net::SSH::ConnectionTimeout\n** Invoke deploy:failed (first_time)\n** Execute deploy:failed\n</code></pre>\n\n<p>I've been figuring out this since this morning and I couldn't move on. Please help! Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv", "export-to-csv"], "comments": [{"owner": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "edited": false, "score": 0, "creation_date": 1519195913, "post_id": 48899756, "comment_id": 84804723, "body": "I doubt that there&#39;s a faster way, without more context. Can parts of it be pre-generated? What will it be used for?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1519196012, "post_id": 48899756, "comment_id": 84804778, "body": "This stringifying shouldn&#39;t take 8 seconds (unless your individual arrays are huge and/or your machine is terribly underpowered). Something else must be eating the time."}, {"owner": {"reputation": 9584, "user_id": 1420684, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/78242bebaa42db9b1f771e6c19a074fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mirror318", "link": "https://stackoverflow.com/users/1420684/mirror318"}, "edited": false, "score": 0, "creation_date": 1519196079, "post_id": 48899756, "comment_id": 84804812, "body": "It&#39;s dumped into a view file (Ruby on Rails) which is then presented to the user to be downloaded. The data is collected from a db, and it just needs to be plain text in a csv format"}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1519196908, "post_id": 48899756, "comment_id": 84805202, "body": "If your data does not include fields that need to be escaped (strings that may include <code>,</code> or <code>&quot;</code>) you can try to generate the csv using <code>@data.map { |row| row.join(&#39;,&#39;) }.join(&quot;\\n&quot;)</code>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1519202499, "post_id": 48899756, "comment_id": 84808093, "body": "If it is a one-time task, 8 secs are perfectly good. If it is recurring, you should rethink the approach."}], "owner": {"reputation": 9584, "user_id": 1420684, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/78242bebaa42db9b1f771e6c19a074fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mirror318", "link": "https://stackoverflow.com/users/1420684/mirror318"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1519195826, "creation_date": 1519195826, "question_id": 48899756, "link": "https://stackoverflow.com/questions/48899756/fastest-way-to-parse-big-matrix-into-csv", "title": "Fastest way to parse big matrix into csv?", "body": "<p>I have an array containing ~30k lines (arrays) of data.</p>\n\n<p>I've tried:</p>\n\n<pre><code>@data.map(&amp;:to_csv).join\n</code></pre>\n\n<p>And also</p>\n\n<pre><code>@data.each do |line_data|\n  CSV.generate_line line_data\nend\n</code></pre>\n\n<p>They both take around 8 seconds. Is there any faster way to do it?</p>\n"}, {"tags": ["ruby", "counter"], "comments": [{"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1519195430, "post_id": 48899497, "comment_id": 84804493, "body": "If green followed by red then count is 1?"}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1519195608, "post_id": 48899497, "comment_id": 84804577, "body": "are looking for the cases red followed by green or what?"}, {"owner": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "reply_to_user": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1519195669, "post_id": 48899497, "comment_id": 84804603, "body": "@RAJ If red to green dont count as 1"}, {"owner": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "edited": false, "score": 0, "creation_date": 1519195670, "post_id": 48899497, "comment_id": 84804604, "body": "This will always evaluate to <code>event_type.length&#47;2</code>. On line 2, when you say <code>break unless green</code>, <code>green</code> is a string. Strings always evaluate to true. Therefore <code>count</code> will be incremented on every iteration."}, {"owner": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "reply_to_user": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1519195900, "post_id": 48899497, "comment_id": 84804720, "body": "@marmeladze Yes, looking for red to green. It will not reset if orange appears."}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1519196000, "post_id": 48899497, "comment_id": 84804773, "body": "so array you&#39;ve provided has 2 cases right?"}, {"owner": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "reply_to_user": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1519196543, "post_id": 48899497, "comment_id": 84805030, "body": "@marmeladze yes. the count should be 2"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1519197548, "post_id": 48899497, "comment_id": 84805508, "body": "Why is the count 2? The first <code>&quot;red&quot;</code> changes to <code>&quot;orange&quot;</code> and the second one changes to <code>&quot;yellow&quot;</code>. Neither changes to <code>&quot;green&quot;</code> and according to the question <i>&quot;If it is another color, the code would ignore it&quot;</i>."}, {"owner": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1519197660, "post_id": 48899497, "comment_id": 84805559, "body": "@Stefan IF it is red it will look for green. IF the second is orange, it would ignore that color and continue looking for green."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1519197836, "post_id": 48899497, "comment_id": 84805657, "body": "Could you explain the algorithm step by step? What I see is <code>&quot;red&quot;</code> followed by (or changing to) <code>&quot;orange&quot;</code>, followed by <code>&quot;green&quot;</code> and so on."}, {"owner": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1519198163, "post_id": 48899497, "comment_id": 84805836, "body": "@Stefan Hi Stefan, I&#39;ve written the steps on my question."}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1519198165, "post_id": 48899497, "comment_id": 84805838, "body": "Stefan, he is possibly looking for event chains in arbitrary length  that occurs between red and green."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1519231897, "post_id": 48899497, "comment_id": 84828848, "body": "I expect the downvotes and votes to close are largely attributable to your phrase &#39;&quot;red&quot; changes to &quot;green&quot;&#39;, which makes no sense. If you wish to count the number of times &#39;&quot;red&quot; is followed by &quot;green&quot;&#39;, you need to edit your question and make that change."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1519284294, "post_id": 48899497, "comment_id": 84849777, "body": "Looking over the answers I see that&#39;s what you want, so it reads fine now. I deleted my last comment."}, {"owner": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1519284377, "post_id": 48899497, "comment_id": 84849825, "body": "@CarySwoveland Thanks for your input :)"}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "edited": false, "score": 0, "creation_date": 1519197477, "post_id": 48899962, "comment_id": 84805468, "body": "where should I add my count to print it out?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1519198509, "post_id": 48899962, "comment_id": 84806018, "body": "You can use <code>select { condition }</code> instead of <code>reject { !condition }</code> and <code>count { condition }</code> instead of <code>select { condition }.size</code>"}, {"owner": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "edited": false, "score": 0, "creation_date": 1519198993, "post_id": 48899962, "comment_id": 84806265, "body": "sorry but could you point out which line that outputs the count?"}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1519200347, "post_id": 48899962, "comment_id": 84806945, "body": "check ruby documentation - <a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-include-3F\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.2.0/Array.html#method-i-include-3F</a>"}, {"owner": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "edited": false, "score": 0, "creation_date": 1519202935, "post_id": 48899962, "comment_id": 84808286, "body": "If my <code>a</code> is a nested array, [color, time]. How would I select the color to do comparison?  I tried changing <code>a.select(&amp;method(:either_red_or_green))</code> to <code>&quot;#a[0]&quot;.select(&amp;method(:either_red_or_green))</code> it doesnt work, may I ask for your suggestion?"}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 1, "creation_date": 1519213515, "post_id": 48899962, "comment_id": 84815686, "body": "How about <code>count([&#39;red&#39;, &#39;green&#39;])</code> ?"}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1519218383, "post_id": 48899962, "comment_id": 84819050, "body": "Just another variation: configuration <code>ends = [&quot;red&quot;, &quot;green&quot;]</code> followed by <code>a.select { |x| ends.include? x }.each_cons(2).count(ends)</code>"}, {"owner": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "edited": false, "score": 0, "creation_date": 1519268377, "post_id": 48899962, "comment_id": 84844186, "body": "@marmeladze <code>a.map(&amp;:first)</code> doesnt work. Result: <code>&quot;red&quot;,  &quot;green&quot; = 1</code> <code>&quot;red&quot;, &quot;orange&quot;, &quot;green&quot; = 0</code>"}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1519277540, "post_id": 48899962, "comment_id": 84846845, "body": "possibly you are missing something - <a href=\"https://repl.it/@marmeladze1/CleverSorrowfulAssociate\" rel=\"nofollow noreferrer\">have a look up this</a>"}], "tags": [], "owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "is_accepted": true, "score": 6, "last_activity_date": 1519217858, "last_edit_date": 1519217858, "creation_date": 1519196798, "answer_id": 48899962, "question_id": 48899497, "link": "https://stackoverflow.com/questions/48899497/counting-changes-in-an-array/48899962#48899962", "title": "Counting changes in an array", "body": "<p>Below one is solution I believe. Sure there is more room to refactor it, you can start from here.</p>\n\n<pre><code>a = [\"red\", \"orange\", \"green\", \"red\", \"yellow\", \"blue\", \"green\"]    \na.reject {|e| !['red', 'green'].include? e }\n  .each_cons(2)\n  .select{|e| e == ['red', 'green']}\n  .size\n</code></pre>\n\n<p>A more artistic version. </p>\n\n<pre><code>def neither_red_nor_green e\n  !['red', 'green'].include? e\nend\n\ndef red_followed_by_green ary\n  ary == ['red', 'green']\nend\n\na.reject(&amp;method(:neither_red_nor_green))\n  .each_cons(2)\n  .select(&amp;method(:red_followed_by_green))\n  .size\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Thanks to @Stefan for below suggestions. </p>\n\n<pre><code>def either_red_or_green e\n  ['red', 'green'].include? e\nend\n\ndef red_followed_by_green ary\n  ary == ['red', 'green']\nend\n\n\na.select(&amp;method(:either_red_or_green))\n  .each_cons(2)\n  .count(&amp;method(:red_followed_by_green))\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>As Stefan Pochmann proposed, </p>\n\n<pre><code>a.select(&amp;method(:either_red_or_green))\n  .each_cons(2)\n  .count(['red', 'green'])\n</code></pre>\n\n<p>will do the same work, without needing another method call. </p>\n"}, {"comments": [{"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 1, "creation_date": 1519219842, "post_id": 48900809, "comment_id": 84820096, "body": "Fun little variations combining count and state: <a href=\"https://eval.in/960310\" rel=\"nofollow noreferrer\">eval.in/960310</a> and <a href=\"https://eval.in/960317\" rel=\"nofollow noreferrer\">eval.in/960317</a>"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 2, "last_activity_date": 1519200226, "creation_date": 1519200226, "answer_id": 48900809, "question_id": 48899497, "link": "https://stackoverflow.com/questions/48899497/counting-changes-in-an-array/48900809#48900809", "title": "Counting changes in an array", "body": "<pre><code>count, _ =\n[\"red\", \"orange\", \"green\", \"red\", \"yellow\", \"blue\", \"green\"]\n.inject([0, nil]) do |(count, state), word|\n  if word == \"red\"\n    state = :red\n  elsif word == \"green\" and state == :red\n    state = nil\n    count += 1\n  end\n  [count, state]\nend\ncount # =&gt; 2\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1519202932, "post_id": 48901216, "comment_id": 84808284, "body": "Coincidence! I maintain that this operator is barely known. Kudos for popularizing it, though."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1519203136, "post_id": 48901216, "comment_id": 84808414, "body": "Something is bugging me about your usage of flip-flop here, but I having troubling pinning it down..."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1519203587, "post_id": 48901216, "comment_id": 84808688, "body": "This code counts incomplete sequences. If your input ends with <code>red yellow yellow</code>, it will count it (it shouldn&#39;t)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1519203858, "post_id": 48901216, "comment_id": 84808851, "body": "Nah, it doesn&#39;t look like flip-flop should be used here at all. Doesn&#39;t handle edge conditions well. I like @marmeladze&#39;s answer better."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1519204541, "post_id": 48901216, "comment_id": 84809270, "body": "@SergioTulentsev sure it does, flip-flop is to skip multiple left boundaries, and here it does it\u2019s job perfectly. I have it fixed, btw. You like other answers more because you like Rails :-P"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1519204709, "post_id": 48901216, "comment_id": 84809367, "body": "Yep, with this edit it works better, but look at all this extra cruft. It is <i>hardly</i> a &quot;perfect use-case&quot;, would you agree? It would be, if the loop body was a nice and clean <code>foo if a..b</code> :trollface:"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1519204820, "post_id": 48901216, "comment_id": 84809440, "body": "This accumulator juggling completely obscures the purpose, imho. You now have to write documentation to explain what this does. (which you did already)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1519205078, "post_id": 48901216, "comment_id": 84809600, "body": "&quot;in a week&quot; - JFYI, that one was exactly <i>two</i> weeks ago. :)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1519205244, "post_id": 48901216, "comment_id": 84809719, "body": "@SergioTulentsev it\u2019s so-called \u201crelativistic\u201d week."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1519205381, "post_id": 48901216, "comment_id": 84809813, "body": "@SergioTulentsev one more edit: are you now satisfied with how it does not obscure anything? :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1519205621, "post_id": 48901216, "comment_id": 84809959, "body": "Have you tried competing in logical obfuscation contexts? You have great potential. :trollface: This code easily generates two <a href=\"http://www.osnews.com/story/19266/WTFs_m\" rel=\"nofollow noreferrer\">WTFs</a>. Good exercise, yes, but I wouldn&#39;t put this into production code. I&#39;m too dumb to understand it later :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1519206075, "post_id": 48901216, "comment_id": 84810293, "body": "Mind you, this is still  better than anything I have (that isn&#39;t a copy of marmeladze&#39;s answer). :)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1519206557, "post_id": 48901216, "comment_id": 84810649, "body": "@SergioTulentsev sure I have; basically I am having tried competing in logical obfuscation contexts 40hrs/week :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1519206737, "post_id": 48901216, "comment_id": 84810793, "body": "Ah, that was supposed to be &quot;contest&quot;, btw. Noticed it just now."}, {"owner": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "edited": false, "score": 0, "creation_date": 1519206806, "post_id": 48901216, "comment_id": 84810851, "body": "@mudasobwa Thanks for pointing out the use of Flip Flop. Is it possible to use it for nested arrays? for eg, [color, time] the occurrence from red to green should be within 10 seconds"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "edited": false, "score": 0, "creation_date": 1519207188, "post_id": 48901216, "comment_id": 84811165, "body": "@JoshuaNg I am not sure I follow. Flip-flop is all about booleans, is has nothing to do with arrays."}, {"owner": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "edited": false, "score": 0, "creation_date": 1519207245, "post_id": 48901216, "comment_id": 84811216, "body": "@mudasobwa ah I see"}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "reply_to_user": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "edited": false, "score": 0, "creation_date": 1519208241, "post_id": 48901216, "comment_id": 84811953, "body": "@JoshuaNg the same applies here. if you want to use that solution (which is really sexy) change <code>input.reduce(0)</code> to <code>input.map(&amp;:first).reduce(0)</code>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 1, "creation_date": 1519208998, "post_id": 48901216, "comment_id": 84812556, "body": "@marmeladze or just <code>input.reduce(0) { |acc, (e, _)| ...}</code> to avoid redundant mapping."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 1, "creation_date": 1519210248, "post_id": 48901216, "comment_id": 84813422, "body": "@marmeladze, mudasobwa, but you&#39;re ignoring the time part here. Instead Joshua wants to further filter the matches (count only those flips that happened within 10 seconds, I think). It is definitely out of scope here, though :)"}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 3, "creation_date": 1519217113, "post_id": 48901216, "comment_id": 84818165, "body": "@SergioTulentsev You said you want a nice and clean <code>foo if a..b</code> body? No problem: <code>input.count { |x| x == &quot;green&quot; if (x == &quot;red&quot;)..(x == &quot;green&quot;) }</code>"}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1519224414, "post_id": 48901216, "comment_id": 84823437, "body": "@StefanPochmann after 10+ years of Ruby I have no idea why or how that works."}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 1, "creation_date": 1519225109, "post_id": 48901216, "comment_id": 84823962, "body": "Just read the linked post and it&#39;s awesome. I wish I remember to use it for something one day, if not for efficient clean code, at least to confuse the heck out of the colleagues."}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 1, "creation_date": 1519226903, "post_id": 48901216, "comment_id": 84825235, "body": "According to <a href=\"http://chrisseaton.com/rubytruffle/flip-flops/\" rel=\"nofollow noreferrer\">chrisseaton.com/rubytruffle/flip-flops</a> at the time of writing the flipflop was used in only 8 out of all gems."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "reply_to_user": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1519230873, "post_id": 48901216, "comment_id": 84828138, "body": "@KimmoLehto I wonder how he counted them... anyway, yeah, flip-flop is neat, I don&#39;t know why apparently only few people know/like it. It&#39;s one of the few things I remember from learning Perl about 18 years ago and I was delighted to learn that Ruby has it, too."}, {"owner": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1519268665, "post_id": 48901216, "comment_id": 84844267, "body": "@SergioTulentsev Yup, you are right! I guess I will ask a separate question as it involves nested arrays."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "edited": false, "score": 0, "creation_date": 1519281502, "post_id": 48901216, "comment_id": 84848388, "body": "@JoshuaNg: try to solve it yourself first, though. Great learning potential there."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 7, "last_activity_date": 1519218035, "last_edit_date": 1519218035, "creation_date": 1519201821, "answer_id": 48901216, "question_id": 48899497, "link": "https://stackoverflow.com/questions/48899497/counting-changes-in-an-array/48901216#48901216", "title": "Counting changes in an array", "body": "<p>This is a perfect use-case for Ruby famous <a href=\"http://nithinbekal.com/posts/ruby-flip-flop/\" rel=\"nofollow noreferrer\">flip-flop</a>:</p>\n\n<pre><code>input = %w[red orange green red yellow blue green]\n\ninput.reduce(0) do |count, e|\n  if (e == \"red\")..(e == \"green\") and (e == \"green\")\n    count + 1  # inc on right boundary\n  else\n    count\n  end\nend\n#\u21d2\u00a02\n</code></pre>\n\n<p>Also tested on</p>\n\n<pre><code>%w[yellow green green red orange green red yellow blue green red yellow]\n</code></pre>\n\n<p><sub>FWIW, this is a second question I answered suggesting the flip-flop in a week. The previous <a href=\"https://stackoverflow.com/a/48665714/2035262\">one is here</a>.</sub></p>\n\n<hr>\n\n<p><strong>Clean solution from Stefan Pochmann</strong></p>\n\n<pre><code>input.count { |x| x == \"green\" if (x == \"red\")..(x == \"green\") }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1519295640, "last_edit_date": 1519295640, "creation_date": 1519285485, "answer_id": 48922030, "question_id": 48899497, "link": "https://stackoverflow.com/questions/48899497/counting-changes-in-an-array/48922030#48922030", "title": "Counting changes in an array", "body": "<pre><code>def count_red_to_green(arr)\n  count = 0\n  unmatched_red = false\n  arr.each do |colour|\n    case colour\n    when \"red\"\n      unmatched_red = true\n    when \"green\"\n      if unmatched_red\n        count += 1\n        unmatched_red = false\n      end\n    end\n  end\n  count\nend\n\ncount_red_to_green [\"red\", \"orange\", \"green\", \"red\", \"yellow\", \"blue\", \"green\"]\n  #=&gt; 2\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 48899962, "answer_count": 4, "score": -2, "last_activity_date": 1519295640, "creation_date": 1519194765, "last_edit_date": 1519286001, "question_id": 48899497, "link": "https://stackoverflow.com/questions/48899497/counting-changes-in-an-array", "title": "Counting changes in an array", "body": "<p>I would like to count the number of times <code>\"red\"</code> is followed by <code>\"green\"</code> in this array:</p>\n\n<pre><code>[\"red\", \"orange\", \"green\", \"red\", \"yellow\", \"blue\", \"green\"]\n</code></pre>\n\n<p>If it is another color, the code should ignore it and proceed to the next item in the array.</p>\n\n<pre><code>event_type.each_slice(2) do |red, green|\n  break unless green\n  count = count + 1\nend\n\np \"The count is #{count}\"\n</code></pre>\n\n<p>Step 1: </p>\n\n<pre><code>Look for red\n</code></pre>\n\n<p>Step 2: </p>\n\n<pre><code>IF not last item \n           Compare with next item on array\nELSE       Go to Step 4\n</code></pre>\n\n<p>Step 3: </p>\n\n<pre><code>IF green, count = count + 1\n          Go to Step 1\nELSE      Go to Step 2\n</code></pre>\n\n<p>Step 4: </p>\n\n<pre><code>Print Count\n</code></pre>\n"}, {"tags": ["java", "ruby", "rubygems", "marshalling", "artifactory"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6713075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a916a0cece99acdd6c7bc4d52b001c0?s=128&d=identicon&r=PG&f=1", "display_name": "syk_coder", "link": "https://stackoverflow.com/users/6713075/syk-coder"}, "edited": false, "score": 0, "creation_date": 1519208644, "post_id": 48903386, "comment_id": 84812285, "body": "Yeah when I am trying to write a decoder for it in Java I am getting the above exception. I want to read and generate the index of rubygems just like how rubygems/geminabox does. For that I need to be able to read the index file that is already generated which is latest_specs.4.8. Once I am able to read the file I can map the respective objects to Java equivalents."}, {"owner": {"reputation": 21, "user_id": 6713075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a916a0cece99acdd6c7bc4d52b001c0?s=128&d=identicon&r=PG&f=1", "display_name": "syk_coder", "link": "https://stackoverflow.com/users/6713075/syk-coder"}, "edited": false, "score": 0, "creation_date": 1519717335, "post_id": 48903386, "comment_id": 85011404, "body": "As this file is generated externally I cannot change the format."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 0, "last_activity_date": 1519208379, "creation_date": 1519208379, "answer_id": 48903386, "question_id": 48899327, "link": "https://stackoverflow.com/questions/48899327/loading-ruby-serialized-data-in-java-for-indexing-rubygems/48903386#48903386", "title": "Loading ruby-serialized data in Java for indexing rubygems", "body": "<p>The Marshal format is documented. If you want to read it in Java, you will have to write a decoder for it. But, the Marshal file may contain Ruby objects which expect their respective classes to be in memory, so you will also have to implement a Java version of those classes.</p>\n\n<p>Or, you could just a language-independent serialization format such as JSON, YAML, XML, ASN.1, BSON, BER, BERT, ogdl, \u2026</p>\n"}], "owner": {"reputation": 21, "user_id": 6713075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a916a0cece99acdd6c7bc4d52b001c0?s=128&d=identicon&r=PG&f=1", "display_name": "syk_coder", "link": "https://stackoverflow.com/users/6713075/syk-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1519359777, "creation_date": 1519194010, "last_edit_date": 1519359777, "question_id": 48899327, "link": "https://stackoverflow.com/questions/48899327/loading-ruby-serialized-data-in-java-for-indexing-rubygems", "title": "Loading ruby-serialized data in Java for indexing rubygems", "body": "<p>Is there a way to read the ruby-Marshalled data in Java.\nI need to read the gzipped Marshalled latest_specs.4.8.gz file of rubygems in Java for my use case. </p>\n\n<p>What I have noticed is that Ruby uses the Marshalled format of Version 4.8 where as Java is using the version 5(STREAM_VERSION in ObjectStreamConstants) and I think this is giving an exception \"java.io.StreamCorruptedException: invalid stream header: 04085B02\" in my code. </p>\n\n<p>I tried with jruby but getting an exception \"undefined class/module Gem::Version\"</p>\n\n<p>I hope this is what is done in artifactory for indexing the gems.</p>\n\n<p>Has anyone ever had a similar issue? Any help is much appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "migrate"], "answers": [{"comments": [{"owner": {"reputation": 128, "user_id": 3176030, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/kw9uz.jpg?s=128&g=1", "display_name": "Gregory Desrosiers", "link": "https://stackoverflow.com/users/3176030/gregory-desrosiers"}, "edited": false, "score": 1, "creation_date": 1519349118, "post_id": 48898134, "comment_id": 84886599, "body": "One FYI to point out: the tutorial is from here. :) <a href=\"https://www.tutorialspoint.com/ruby-on-rails/rails-views.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/ruby-on-rails/rails-views.htm</a>  I think the tutorial itself is outdated."}], "tags": [], "owner": {"reputation": 446, "user_id": 6298150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cac2b85cf603248a2fd6fd7ac4c6fdd9?s=128&d=identicon&r=PG&f=1", "display_name": "Yechiel K", "link": "https://stackoverflow.com/users/6298150/yechiel-k"}, "is_accepted": true, "score": 1, "last_activity_date": 1519186962, "creation_date": 1519186962, "answer_id": 48898134, "question_id": 48897945, "link": "https://stackoverflow.com/questions/48897945/ruby-on-rails-5-1-5-migration-error-relation-already-exists-in-following-tut/48898134#48898134", "title": "Ruby on Rails 5.1.5 - Migration Error (Relation already exists) in following TutorialsPoint tutorial", "body": "<p>I'm not sure where the tutorial is from, but those last two migration files look like they might be there from a previous version.</p>\n\n<p>Try deleting them and restart the Rails server and see if that fixes it.</p>\n\n<p>If not reset the database by running <code>rails db:reset</code> (that's the equivalent of dropping the database and then recreating it. Any data in the database will be lost, but I don't think that should be an issue for you).</p>\n"}, {"tags": [], "owner": {"reputation": 1443, "user_id": 4064922, "user_type": "registered", "accept_rate": 36, "profile_image": "https://lh4.googleusercontent.com/-2_1oNmjkoec/AAAAAAAAAAI/AAAAAAAAAXE/OTUcRfaAZeM/photo.jpg?sz=128", "display_name": "Aboozar Rajabi", "link": "https://stackoverflow.com/users/4064922/aboozar-rajabi"}, "is_accepted": false, "score": 0, "last_activity_date": 1545044241, "creation_date": 1545044241, "answer_id": 53813765, "question_id": 48897945, "link": "https://stackoverflow.com/questions/48897945/ruby-on-rails-5-1-5-migration-error-relation-already-exists-in-following-tut/53813765#53813765", "title": "Ruby on Rails 5.1.5 - Migration Error (Relation already exists) in following TutorialsPoint tutorial", "body": "<p>It seems that you have the same migration files in your <code>/db/migrate</code> folder. I mean the same files for creating the tables which are exist in your <code>schema.rb</code> file. So, you can simply remove the those files from your <code>/db/migrate</code> folder and try running the <code>rake db:migrate</code> command again.</p>\n"}, {"tags": [], "owner": {"reputation": 16, "user_id": 5780150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da66f72a31210f6241f2f09553af49fe?s=128&d=identicon&r=PG", "display_name": "certilremy", "link": "https://stackoverflow.com/users/5780150/certilremy"}, "is_accepted": false, "score": 0, "last_activity_date": 1583174837, "creation_date": 1583174837, "answer_id": 60494866, "question_id": 48897945, "link": "https://stackoverflow.com/questions/48897945/ruby-on-rails-5-1-5-migration-error-relation-already-exists-in-following-tut/60494866#60494866", "title": "Ruby on Rails 5.1.5 - Migration Error (Relation already exists) in following TutorialsPoint tutorial", "body": "<p>I had this issue. I used the '.Env' file to store my PG credentials, make sure you have this gem in your Gemfile if it's the case.</p>\n\n<pre><code>gem 'dotenv-rails'\n</code></pre>\n"}], "owner": {"reputation": 128, "user_id": 3176030, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/kw9uz.jpg?s=128&g=1", "display_name": "Gregory Desrosiers", "link": "https://stackoverflow.com/users/3176030/gregory-desrosiers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2239, "favorite_count": 0, "accepted_answer_id": 48898134, "answer_count": 3, "score": 1, "last_activity_date": 1583174837, "creation_date": 1519185541, "question_id": 48897945, "link": "https://stackoverflow.com/questions/48897945/ruby-on-rails-5-1-5-migration-error-relation-already-exists-in-following-tut", "title": "Ruby on Rails 5.1.5 - Migration Error (Relation already exists) in following TutorialsPoint tutorial", "body": "<p>I am following this <a href=\"https://www.tutorialspoint.com/ruby-on-rails/rails-views.htm\" rel=\"nofollow noreferrer\">Ruby on Rails tutorial from TutorialsPoint.com</a>. I'm completely new to Ruby on Rails development, and already running into some hiccups.</p>\n\n<p>I am using Ruby 2.3.3p222 (2016-11-21 revision 56859) [i386-mingw32] and Ruby on Rails 5.1.5.</p>\n\n<p>For some reason, after adding list.html.erb with the code specified and trying to run \"rails server\", upon opening up <a href=\"http://localhost:3000\" rel=\"nofollow noreferrer\">http://localhost:3000</a>, I get this migration error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/LlTnW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LlTnW.png\" alt=\"PendingMigrationError\"></a></p>\n\n<p>When I run \"rails db:migrate RAILS_ENV=development\", I get this log of errors in the console:</p>\n\n<pre><code>C:\\Users\\gregp\\Documents\\&lt;secret directory&gt;\\Programming Experiments\\TutorialsPointRoR\\demo2&gt;rails db:migrate RAILS_ENV=development\n== 20180221025323 Books: migrating ============================================\n-- create_table(:books)\nrails aborted!\nStandardError: An error has occurred, this and all later migrations canceled:\n\nPG::DuplicateTable: ERROR:  relation \"books\" already exists\n: CREATE TABLE \"books\" (\"id\" bigserial primary key, \"title\" character varying(32) NOT NULL, \"price\" float, \"subject_id\" integer, \"description\" text, \"created_at\" timestamp)\nC:/Users/gregp/Documents/&lt;secret directory&gt;/Programming Experiments/TutorialsPointRoR/demo2/db/migrate/20180221025323_books.rb:3:in `up'\nbin/rails:4:in `require'\nbin/rails:4:in `&lt;main&gt;'\n\nCaused by:\nActiveRecord::StatementInvalid: PG::DuplicateTable: ERROR:  relation \"books\" already exists\n: CREATE TABLE \"books\" (\"id\" bigserial primary key, \"title\" character varying(32) NOT NULL, \"price\" float, \"subject_id\" integer, \"description\" text, \"created_at\" timestamp)\nC:/Users/gregp/Documents/&lt;secret directory&gt;/Programming Experiments/TutorialsPointRoR/demo2/db/migrate/20180221025323_books.rb:3:in `up'\nbin/rails:4:in `require'\nbin/rails:4:in `&lt;main&gt;'\n\nCaused by:\nPG::DuplicateTable: ERROR:  relation \"books\" already exists\nC:/Users/gregp/Documents/&lt;secret directory&gt;/Programming Experiments/TutorialsPointRoR/demo2/db/migrate/20180221025323_books.rb:3:in `up'\nbin/rails:4:in `require'\nbin/rails:4:in `&lt;main&gt;'\nTasks: TOP =&gt; db:migrate\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>I have these files in the db/migrate directory (I don't know why even when I started creating the project, it created a pair of migrate files for the Books table and another for the Subjects table):</p>\n\n<p>20180221024754_create_books.rb:</p>\n\n<pre><code>class CreateBooks &lt; ActiveRecord::Migration[5.1]\n  def change\n    create_table :books do |t|\n       t.column :title, :string, :limit =&gt; 32, :null =&gt; false\n       t.column :price, :float\n       t.column :subject_id, :integer\n       t.column :description, :text\n       t.column :created_at, :timestamp\n    end\n  end\nend\n</code></pre>\n\n<p>20180221024922_create_subjects.rb:</p>\n\n<pre><code>class CreateSubjects &lt; ActiveRecord::Migration[5.1]\n  def change\n    create_table :subjects do |t|\n       t.column :name, :string\n    end\n\n    Subject.create :name =&gt; \"Physics\"\n    Subject.create :name =&gt; \"Mathematics\"\n    Subject.create :name =&gt; \"Chemistry\"\n    Subject.create :name =&gt; \"Psychology\"\n    Subject.create :name =&gt; \"Geography\"\n  end\nend\n</code></pre>\n\n<p>20180221025323_books.rb:</p>\n\n<pre><code>class Books &lt; ActiveRecord::Migration[5.1]\n  def self.up\n      create_table :books do |t|\n         t.column :title, :string, :limit =&gt; 32, :null =&gt; false\n         t.column :price, :float\n         t.column :subject_id, :integer\n         t.column :description, :text\n         t.column :created_at, :timestamp\n      end\n   end\n\n   def self.down\n      drop_table :books\n  end\nend\n</code></pre>\n\n<p>20180221025434_subjects.rb:</p>\n\n<pre><code>class Subjects &lt; ActiveRecord::Migration[5.1]\n  def self.up\n\n     create_table :subjects do |t|\n        t.column :name, :string\n     end\n\n     Subject.create :name =&gt; \"Physics\"\n     Subject.create :name =&gt; \"Mathematics\"\n     Subject.create :name =&gt; \"Chemistry\"\n     Subject.create :name =&gt; \"Psychology\"\n     Subject.create :name =&gt; \"Geography\"\n  end\n\n  def self.down\n     drop_table :subjects\n  end\nend\n</code></pre>\n\n<p>This is really strange, because I don't think I am supposed to have duplicate code between the migrate files. I don't even see the significance of using the self.up and self.down functions when I'm only creating the database for now and using it for the tutorial as a whole.</p>\n\n<p>What should I do to fix this problem? I think I need to get rid of the self.up and self.down functions, and run rake db:migrate again, but I don't know if there's an extra step needed or another way.</p>\n"}, {"tags": ["ruby", "csv", "time"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1519197691, "post_id": 48897581, "comment_id": 84805582, "body": "FYI: <a href=\"http://ruby-doc.org/stdlib-2.5.0/libdoc/date/rdoc/DateTime.html#class-DateTime-label-When+should+you+use+DateTime+and+when+should+you+use+Time-3F\" rel=\"nofollow noreferrer\">When should you use <code>DateTime</code> and when should you use <code>Time</code>?</a>"}, {"owner": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1519198318, "post_id": 48897581, "comment_id": 84805924, "body": "@Stefan Thanks for pointing that out"}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1519232329, "post_id": 48897581, "comment_id": 84829180, "body": "What would you like to get as an outcome? difference in seconds? minutes or what?"}, {"owner": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "reply_to_user": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1519271202, "post_id": 48897581, "comment_id": 84844884, "body": "@marmeladze difference in seconds. The purpose I had in mind was to form a nested array here <a href=\"https://stackoverflow.com/questions/48919172/counting-transitions-in-nested-array-using-ruby\" title=\"counting transitions in nested array using ruby\">stackoverflow.com/questions/48919172/&hellip;</a>"}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1519278005, "post_id": 48897581, "comment_id": 84847026, "body": "<code>Time.parse(t2) - Time.parse(t1)</code> will possibly work you. It will give difference as a float number - where you can easily can parse it to integer. <a href=\"https://repl.it/@marmeladze1/MushyDeterminedCharactermapping\" rel=\"nofollow noreferrer\">a more compact solution here</a>"}], "answers": [{"comments": [{"owner": {"reputation": 598, "user_id": 5866447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GMv8H.jpg?s=128&g=1", "display_name": "sxm1972", "link": "https://stackoverflow.com/users/5866447/sxm1972"}, "reply_to_user": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "edited": false, "score": 1, "creation_date": 1519185435, "post_id": 48897664, "comment_id": 84801345, "body": "Since the DateTime object takes one string at a time to parse you may want to try something like:     time_converted = time.map() { |t| DateTime.new(t.to_s) }"}, {"owner": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "edited": false, "score": 0, "creation_date": 1519186010, "post_id": 48897664, "comment_id": 84801480, "body": "p time_converted[0] gives me <code>#&lt;DateTime: 0012-01-01T00:00:00+00:00 ((1725441j,0s,0n),+0s,2299161j)&gt;</code>  Is there a way to get only time?"}, {"owner": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "edited": false, "score": 0, "creation_date": 1519186070, "post_id": 48897664, "comment_id": 84801495, "body": "Ultimately, the goal is to subtract time_converted[1] with time_converted[0]"}, {"owner": {"reputation": 598, "user_id": 5866447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GMv8H.jpg?s=128&g=1", "display_name": "sxm1972", "link": "https://stackoverflow.com/users/5866447/sxm1972"}, "reply_to_user": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "edited": false, "score": 0, "creation_date": 1519199620, "post_id": 48897664, "comment_id": 84806557, "body": "The DateTime class has a <code>to_time</code> method that will return a <code>Time</code> object. Try that."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1519234006, "post_id": 48897664, "comment_id": 84830267, "body": "From the docs, &quot;if you need to deal with dates and times in a historical context you\u2019ll want to use DateTime&quot;. For regular time parsing you should use <code>Time</code>"}], "tags": [], "owner": {"reputation": 598, "user_id": 5866447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GMv8H.jpg?s=128&g=1", "display_name": "sxm1972", "link": "https://stackoverflow.com/users/5866447/sxm1972"}, "is_accepted": false, "score": -1, "last_activity_date": 1519183042, "creation_date": 1519183042, "answer_id": 48897664, "question_id": 48897581, "link": "https://stackoverflow.com/questions/48897581/subtract-time-from-csv-using-ruby/48897664#48897664", "title": "Subtract Time from CSV using Ruby", "body": "<p>Use the Ruby <a href=\"http://ruby-doc.org/stdlib-2.3.1/libdoc/date/rdoc/DateTime.html\" rel=\"nofollow noreferrer\">DateTime</a> class and parse your dates into objects of that class.</p>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "edited": false, "score": 0, "creation_date": 1519201500, "post_id": 48900181, "comment_id": 84807565, "body": "I got an error saying undefined method for &#39;strptime&#39;. Is there anything missing?"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "reply_to_user": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "edited": false, "score": 1, "creation_date": 1519234061, "post_id": 48900181, "comment_id": 84830301, "body": "@JoshuaNg You have to <code>require &#39;time&#39;</code>"}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1519380289, "post_id": 48900181, "comment_id": 84897123, "body": "ah. fixed that."}], "tags": [], "owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "is_accepted": true, "score": 2, "last_activity_date": 1519380273, "last_edit_date": 1519380273, "creation_date": 1519197714, "answer_id": 48900181, "question_id": 48897581, "link": "https://stackoverflow.com/questions/48897581/subtract-time-from-csv-using-ruby/48900181#48900181", "title": "Subtract Time from CSV using Ruby", "body": "<p>You can use <a href=\"http://ruby-doc.org/stdlib-2.1.1/libdoc/time/rdoc/Time.html#method-c-strptime\" rel=\"nofollow noreferrer\">Time#strptime</a> to define the format of the parsed string.</p>\n\n<p>In your case the string is <code>%I:%M:%S%p</code>.</p>\n\n<ul>\n<li><code>%I</code> = 12 hour time</li>\n<li><code>%M</code> = minutes</li>\n<li><code>%S</code> = seconds</li>\n<li><code>%p</code> = AM/PM indicator</li>\n</ul>\n\n<p>So to parse your example:</p>\n\n<pre><code>require 'time'\ntime = %w(12:12:00AM 12:12:01AM)\nparsed_time = time.map { |t| Time.strptime(t, '%I:%M:%S%p').to_i }\nparsed_time.last - parsed_time.first\n\n=&gt; 1\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 48900181, "answer_count": 2, "score": 1, "last_activity_date": 1519380273, "creation_date": 1519182369, "last_edit_date": 1519183923, "question_id": 48897581, "link": "https://stackoverflow.com/questions/48897581/subtract-time-from-csv-using-ruby", "title": "Subtract Time from CSV using Ruby", "body": "<p>Hi I would like to subtract time from a CSV array using Ruby</p>\n\n<blockquote>\n  <p>time[0] is 12:12:00AM<br>\n  time[1] is 12:12:01AM</p>\n</blockquote>\n\n<p>Here is my code</p>\n\n<pre><code>time_converted = DateTime.parse(time)\ndifference = time_converted[1].to_i - time_converted[0].to_i\np difference\n</code></pre>\n\n<p>However, I got 0</p>\n\n<p><code>p time[0].to_i</code> gives me 12</p>\n\n<p>is there a way to fix this? </p>\n"}, {"tags": ["ruby", "postgresql", "rubygems", "rake"], "comments": [{"owner": {"reputation": 2447, "user_id": 468618, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32701e4c5c6d91bbbb092077f8bdd2f8?s=128&d=identicon&r=PG", "display_name": "Brian Morearty", "link": "https://stackoverflow.com/users/468618/brian-morearty"}, "edited": false, "score": 0, "creation_date": 1519192237, "post_id": 48897470, "comment_id": 84803269, "body": "What\u2019s updog? :-)"}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 8702406, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/47fb8c4a8861392467967f25e114c877?s=128&d=identicon&r=PG&f=1", "display_name": "Bsde", "link": "https://stackoverflow.com/users/8702406/bsde"}, "edited": false, "score": 0, "creation_date": 1519233840, "post_id": 48899049, "comment_id": 84830137, "body": "it works now. Sadly I get error with rails s command on localhost:3000  <code>No such file or directory @ rb_sysopen - &#47;home&#47;justinechacko&#47;www&#47;updog&#47;tmp&#47;request-count.txt</code>"}], "tags": [], "owner": {"reputation": 2447, "user_id": 468618, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32701e4c5c6d91bbbb092077f8bdd2f8?s=128&d=identicon&r=PG", "display_name": "Brian Morearty", "link": "https://stackoverflow.com/users/468618/brian-morearty"}, "is_accepted": true, "score": 0, "last_activity_date": 1519192778, "creation_date": 1519192778, "answer_id": 48899049, "question_id": 48897470, "link": "https://stackoverflow.com/questions/48897470/loaderror-cannot-load-such-file-dropbox-sdk/48899049#48899049", "title": "LoadError: cannot load such file -- dropbox_sdk", "body": "<p>It looks like this project needs the dropbox-sdk gem but does not specify it in the Gemfile. If it\u2019s not in the Gemfile, the <code>require</code> statement can\u2019t find it.</p>\n"}], "owner": {"reputation": 67, "user_id": 8702406, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/47fb8c4a8861392467967f25e114c877?s=128&d=identicon&r=PG&f=1", "display_name": "Bsde", "link": "https://stackoverflow.com/users/8702406/bsde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 0, "accepted_answer_id": 48899049, "answer_count": 1, "score": 0, "last_activity_date": 1519192778, "creation_date": 1519181505, "question_id": 48897470, "link": "https://stackoverflow.com/questions/48897470/loaderror-cannot-load-such-file-dropbox-sdk", "title": "LoadError: cannot load such file -- dropbox_sdk", "body": "<p>I am trying to deploy updog.co code locally. <a href=\"https://github.com/jshawl/updog\" rel=\"nofollow noreferrer\">https://github.com/jshawl/updog</a> . I installed ruby, nodejs, npm, postgresql, sqlite3 etc. I cloned repo, did a bundle install. Now I am trying to issue command in terminal like <code>rake db:migrate</code>. I get following error</p>\n\n<pre><code>SQL (0.5ms)  INSERT INTO \"schema_migrations\" (\"version\") VALUES ($1)  [[\"version\", \"20150223214551\"]]\n   (2.4ms)  COMMIT\nMigrating to CreateVersions (20150225004003)\n   (0.5ms)  BEGIN\n== 20150225004003 CreateVersions: migrating ===================================\n-- create_table(:versions)\n   (82.9ms)  CREATE TABLE \"versions\" (\"id\" serial primary key, \"item_type\" character varying NOT NULL, \"item_id\" integer NOT NULL, \"event\" character varying NOT NULL, \"whodunnit\" character varying, \"object\" text, \"created_at\" timestamp) \n   -&gt; 0.0838s\n-- add_index(:versions, [:item_type, :item_id])\n   (39.2ms)  CREATE  INDEX  \"index_versions_on_item_type_and_item_id\" ON \"versions\"  (\"item_type\", \"item_id\")\n   -&gt; 0.0448s\n== 20150225004003 CreateVersions: migrated (0.1289s) ==========================\n\n  SQL (0.7ms)  INSERT INTO \"schema_migrations\" (\"version\") VALUES ($1)  [[\"version\", \"20150225004003\"]]\n   (20.8ms)  COMMIT\nMigrating to CreateClicks (20160630134655)\n   (0.5ms)  BEGIN\n== 20160630134655 CreateClicks: migrating =====================================\n-- create_table(:clicks)\nDEPRECATION WARNING: `#timestamp` was called without specifying an option for `null`. In Rails 5, this behavior will change to `null: false`. You should manually specify `null: true` to prevent the behavior of your existing migrations from changing. (called from block in change at /home/justinechacko/www/updog/db/migrate/20160630134655_create_clicks.rb:6)\n   (83.5ms)  CREATE TABLE \"clicks\" (\"id\" serial primary key, \"data\" json, \"site_id\" integer, \"created_at\" timestamp, \"updated_at\" timestamp) \n   -&gt; 0.0848s\n== 20160630134655 CreateClicks: migrated (0.0850s) ============================\n\n  SQL (0.6ms)  INSERT INTO \"schema_migrations\" (\"version\") VALUES ($1)  [[\"version\", \"20160630134655\"]]\n   (19.4ms)  COMMIT\nMigrating to CreateSubscriptions (20161002210857)\n   (0.6ms)  BEGIN\n== 20161002210857 CreateSubscriptions: migrating ==============================\n-- create_table(:subscriptions)\n   (84.7ms)  CREATE TABLE \"subscriptions\" (\"id\" serial primary key, \"stripe_id\" character varying, \"user_id\" integer, \"active_until\" timestamp) \n   -&gt; 0.0856s\n== 20161002210857 CreateSubscriptions: migrated (0.0858s) =====================\n\n  SQL (0.9ms)  INSERT INTO \"schema_migrations\" (\"version\") VALUES ($1)  [[\"version\", \"20161002210857\"]]\n   (18.1ms)  COMMIT\nMigrating to AddDocumentRootToSites (20161006225750)\nrake aborted!\nLoadError: cannot load such file -- dropbox_sdk\n/var/lib/gems/2.3.0/gems/activesupport-4.2.1/lib/active_support/dependencies.rb:274:in `require'\n/var/lib/gems/2.3.0/gems/activesupport-4.2.1/lib/active_support/dependencies.rb:274:in `block in require'\n/var/lib/gems/2.3.0/gems/activesupport-4.2.1/lib/active_support/dependencies.rb:240:in `load_dependency'\n/var/lib/gems/2.3.0/gems/activesupport-4.2.1/lib/active_support/dependencies.rb:274:in `require'\n/home/justinechacko/www/updog/db/migrate/20161006225750_add_document_root_to_sites.rb:1:in `&lt;top (required)&gt;'\n/var/lib/gems/2.3.0/gems/activesupport-4.2.1/lib/active_support/dependencies.rb:274:in `require'\n/var/lib/gems/2.3.0/gems/activesupport-4.2.1/lib/active_support/dependencies.rb:274:in `block in require'\n/var/lib/gems/2.3.0/gems/activesupport-4.2.1/lib/active_support/dependencies.rb:240:in `load_dependency'\n/var/lib/gems/2.3.0/gems/activesupport-4.2.1/lib/active_support/dependencies.rb:274:in `require'\n/var/lib/gems/2.3.0/gems/activerecord-4.2.1/lib/active_record/migration.rb:774:in `load_migration'\n/var/lib/gems/2.3.0/gems/activerecord-4.2.1/lib/active_record/migration.rb:770:in `migration'\n/var/lib/gems/2.3.0/gems/activerecord-4.2.1/lib/active_record/migration.rb:765:in `disable_ddl_transaction'\n/var/lib/gems/2.3.0/gems/activerecord-4.2.1/lib/active_record/migration.rb:1048:in `use_transaction?'\n/var/lib/gems/2.3.0/gems/activerecord-4.2.1/lib/active_record/migration.rb:1040:in `ddl_transaction'\n/var/lib/gems/2.3.0/gems/activerecord-4.2.1/lib/active_record/migration.rb:994:in `execute_migration_in_transaction'\n/var/lib/gems/2.3.0/gems/activerecord-4.2.1/lib/active_record/migration.rb:956:in `block in migrate'\n/var/lib/gems/2.3.0/gems/activerecord-4.2.1/lib/active_record/migration.rb:952:in `each'\n/var/lib/gems/2.3.0/gems/activerecord-4.2.1/lib/active_record/migration.rb:952:in `migrate'\n/var/lib/gems/2.3.0/gems/activerecord-4.2.1/lib/active_record/migration.rb:820:in `up'\n/var/lib/gems/2.3.0/gems/activerecord-4.2.1/lib/active_record/migration.rb:798:in `migrate'\n/var/lib/gems/2.3.0/gems/activerecord-4.2.1/lib/active_record/tasks/database_tasks.rb:137:in `migrate'\n/var/lib/gems/2.3.0/gems/activerecord-4.2.1/lib/active_record/railties/databases.rake:44:in `block (2 levels) in &lt;top (required)&gt;'\nTasks: TOP =&gt; db:migrate\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>There is a file called updog/db/migrate/20161006225750_add_document_root_to_sites.rb</p>\n\n<pre><code>require 'dropbox_sdk'\nclass AddDocumentRootToSites &lt; ActiveRecord::Migration\n  def change\n    add_column :sites, :document_root, :string\n    Site.all.each do |site|\n      p \"getting #{site.name}\"\n      begin\n        site.content(DropboxClient.new(site.creator.access_token),\n          {\n            'REQUEST_URI' =&gt; '/_config.yml',\n            'REMOTE_ADDR' =&gt; '127.0.0.1',\n            'HTTP_REFERER' =&gt; '',\n            'PATH_INFO' =&gt; '/_config.yml'\n          }\n        )\n        site.update(document_root: '_site/')\n      rescue =&gt; e\n        p e\n      end\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "rubygems", "redhat", "mysql2"], "owner": {"reputation": 11, "user_id": 9388348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c116b56bb2bd6331dacc1fbbc22d1f5?s=128&d=identicon&r=PG&f=1", "display_name": "new guy", "link": "https://stackoverflow.com/users/9388348/new-guy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1519173404, "creation_date": 1519173404, "question_id": 48896465, "link": "https://stackoverflow.com/questions/48896465/installing-mysql2-gem-on-redhat", "title": "installing mysql2 gem on redhat", "body": "<p>Currently trying to install the mysql2 gem on redhat.  This is what I'm getting after running gem install</p>\n\n<pre><code>gem install mysql2 -v 0.3.18 -- --with-mysql-config=/usr/bin/mysql_config\n\n\nchecking for ruby/thread.h... *** extconf.rb failed ***\n\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n</code></pre>\n\n<p>It looks like most people who get a similar error need to install mysql dev/lib packages.  The packages are already installed and up to date. The mkmf.log file looks like this:</p>\n\n<pre><code>\"gcc -o conftest -I/home/zdev/.rbenv/versions/2.2.0/include/ruby-2.2.0/x86_64-linux -I/home/zdev/.rbenv/versions/2.2.0/include/ruby-2.2.0/ruby/backward \n    -I/home/zdev/.rbenv/versions/2.2.0/include/ruby-2.2.0 -I. -I/home/zdev/.rbenv/versions/2.2.0/include  -D_FILE_OFFSET_BITS=64   -O3 -fno-fast-math -ggdb3 \n    -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wunused-variable -Wpointer-arith -Wwrite-strings \n    -Wdeclaration-after-statement -Wimplicit-function-declaration -Wdeprecated-declarations -Wno-packed-bitfield-compat conftest.c  -L. \n    -L/home/zdev/.rbenv/versions/2.2.0/lib -Wl,-R/home/zdev/.rbenv/versions/2.2.0/lib -L/home/zdev/.rbenv/versions/2.2.0/lib -lruby-static  -lpthread -lrt \n    -ldl -lcrypt -lm   -lc\"\n\nIn file included from /home/zdev/.rbenv/versions/2.2.0/include/ruby-2.2.0/ruby.h:33,\n    from conftest.c:1:\n/home/zdev/.rbenv/versions/2.2.0/include/ruby-2.2.0/ruby/ruby.h:107: error: size of array 'ruby_check_sizeof_long' is negative\n/home/zdev/.rbenv/versions/2.2.0/include/ruby-2.2.0/ruby/ruby.h:111: error: size of array 'ruby_check_sizeof_voidp' is negative\nIn file included from /home/zdorman/.rbenv/versions/2.2.0/include/ruby-2.2.0/ruby.h:33,\n    from conftest.c:1:\n/home/zdev/.rbenv/versions/2.2.0/include/ruby-2.2.0/ruby/ruby.h: In function 'rb_int2num_inline':\n/home/zdev/.rbenv/versions/2.2.0/include/ruby-2.2.0/ruby/ruby.h:1303: warning: comparison is always true due to limited range of data type\n/home/zdev/.rbenv/versions/2.2.0/include/ruby-2.2.0/ruby/ruby.h:1303: warning: comparison is always true due to limited range of data type\n/home/zdev/.rbenv/versions/2.2.0/include/ruby-2.2.0/ruby/ruby.h: In function 'rb_uint2num_inline':\n/home/zdev/.rbenv/versions/2.2.0/include/ruby-2.2.0/ruby/ruby.h:1313: warning: comparison is always true due to limited range of data type\nIn file included from /home/zdorman/.rbenv/versions/2.2.0/include/ruby-2.2.0/ruby/intern.h:35,\n    from /home/zdorman/.rbenv/versions/2.2.0/include/ruby-2.2.0/ruby/ruby.h:1710,\n    from /home/zdorman/.rbenv/versions/2.2.0/include/ruby-2.2.0/ruby.h:33,\n    from conftest.c:1:\n/home/zdev/.rbenv/versions/2.2.0/include/ruby-2.2.0/ruby/st.h: At top level:\n/home/zdev/.rbenv/versions/2.2.0/include/ruby-2.2.0/ruby/st.h:52: error: size of array 'st_check_for_sizeof_st_index_t' is negative\nchecked program was:\n/* begin */\n1: #include \"ruby.h\"\n2:\n3: int main(int argc, char **argv)\n4: {\n5:   return 0;\n6: }\n/* end */\n</code></pre>\n\n<p>The errors in the log file are produced by sanity checks like this:</p>\n\n<pre><code>typedef char ruby_check_sizeof_long[SIZEOF_LONG == sizeof(long) ? 1 : -1];\n</code></pre>\n\n<p>What could be the cause of this issue?  gcc and mysql are both 64 bit - are there any other binaries/libs that would cause this issue?</p>\n\n<p>For the record, there is a copy of the mysql2 gem already installed on this system.  It was installed a couple years ago by the original developer, and is tied to a ruby install in /usr/bin.  I'm trying to migrate a project over to using a ruby managed by rbenv.  From a clean ruby install made through rbenv, bundle install will work flawlessly on our ubuntu box, but it trips up with the mysql2 gem on this system.</p>\n"}, {"tags": ["ruby", "rubygems", "redhat", "rhc"], "comments": [{"owner": {"reputation": 1, "user_id": 1223975, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/5Oh7r.jpg?s=128&g=1", "display_name": "Alexander Mills", "link": "https://stackoverflow.com/users/1223975/alexander-mills"}, "edited": false, "score": 0, "creation_date": 1519169778, "post_id": 48895914, "comment_id": 84797625, "body": "I think it might be because I upgraded the ruby version..."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1519173374, "post_id": 48895914, "comment_id": 84798585, "body": "You may need to uninstall and reinstall the gem."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 1223975, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/5Oh7r.jpg?s=128&g=1", "display_name": "Alexander Mills", "link": "https://stackoverflow.com/users/1223975/alexander-mills"}, "is_accepted": false, "score": 0, "last_activity_date": 1519244885, "creation_date": 1519244885, "answer_id": 48914892, "question_id": 48895914, "link": "https://stackoverflow.com/questions/48895914/conflict-at-command-line-between-redhat-client-rhc-and-a-ruby-gem-with-the-sam/48914892#48914892", "title": "Conflict at command line between RedHat client `rhc` and a Ruby gem with the same name", "body": "<p>Not a Ruby expert, so this will be obvious for those that are.\nBut I switch Ruby versions using RVM, and so no longer had the <code>rhc</code> gem for the newer version of Ruby.</p>\n"}], "owner": {"reputation": 1, "user_id": 1223975, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/5Oh7r.jpg?s=128&g=1", "display_name": "Alexander Mills", "link": "https://stackoverflow.com/users/1223975/alexander-mills"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519244885, "creation_date": 1519169610, "question_id": 48895914, "link": "https://stackoverflow.com/questions/48895914/conflict-at-command-line-between-redhat-client-rhc-and-a-ruby-gem-with-the-sam", "title": "Conflict at command line between RedHat client `rhc` and a Ruby gem with the same name", "body": "<p>Everything was fine until I installed some Ruby gems - I was using <code>rhc</code> and the command line which was the RedHat client. After installing Ruby and some Ruby gems, I get this error when <code>rhc</code> is called:</p>\n\n<pre><code> $ rhc tail foobar -p \"${mypwd}\" \n</code></pre>\n\n<p>stdio:</p>\n\n<blockquote>\n  <p>/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/dependency.rb:296:in\n  <code>to_specs': Could not find 'rhc' (&gt;= 0) among 30 total gem(s)\n  (Gem::LoadError)\n        from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/dependency.rb:307:in\n  </code>to_spec'\n        from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_gem.rb:47:in\n  <code>gem'\n        from /usr/local/bin/rhc:22:in</code>'</p>\n</blockquote>\n\n<p>not sure how to mitigate this - has anyone had this problem?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "rspec-rails"], "comments": [{"owner": {"reputation": 4429, "user_id": 102133, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/561a3a55352fe6a5343e541a6894b541?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/102133/ben"}, "edited": false, "score": 0, "creation_date": 1519172727, "post_id": 48895841, "comment_id": 84798399, "body": "eventhough it might not sounds as the approach you&#39;re describing, aren&#39;t shared_examples/shared_contexts a good match here ? unsure it&#39;ll speed up or not; but at least would reduce the codebase"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1519181392, "post_id": 48895841, "comment_id": 84800479, "body": "My company is going through a similar process. I would recommend considering fixtures. There are definitely some hefty &quot;cons&quot; to using them (such as having to maintain global lists), but they do let you seed data on a per-test basis very quickly."}, {"owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "edited": false, "score": 0, "creation_date": 1519189437, "post_id": 48895841, "comment_id": 84802330, "body": "Are you working with real images in your factories? That was a huge killer for one of our apps, and substituting that for mock images (like just bogus file names in Paperclip for example) saved ~10 minutes in build time."}], "owner": {"reputation": 595, "user_id": 1154843, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/Mjhv5.jpg?s=128&g=1", "display_name": "Lane", "link": "https://stackoverflow.com/users/1154843/lane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 181, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1519169189, "creation_date": 1519169189, "question_id": 48895841, "link": "https://stackoverflow.com/questions/48895841/rails-testing-shared-rspec-data-across-files", "title": "Rails Testing: Shared RSpec Data Across Files", "body": "<p>SO...</p>\n\n<p>I am currently working on reducing my project's build time, specifically the time our test suite takes to run.</p>\n\n<p>We do have some poorly written tests that are creating database objects in <code>let</code> bindings (so they get saved every test) that have the opportunity to be refactored into <code>before(:context)</code> and <code>after(:context)</code> with <code>let(:object) { @object.clone }</code>. We also have some poorly written FactoryGirl (FactoryBot now?) factories that are a bit aggressive with the objects they create (I know about <code>build_stubbed</code>) that can be improved upon.</p>\n\n<p>Addressing these issues would be a step in the right direction, but I am interested in creating a more fundamental change to my team's shared testing model as many files in our system require the same core setup (i.e. many <code>before(:context)</code> blocks look the exact same). </p>\n\n<p>I was thinking that it would be a great win if my team could keep <code>db/seeds.rb</code> up to date and in <code>rails_helper.rb</code> or <code>spec_helper.rb</code>, load the seeds before running the test suite and expose the core data via instance variables.</p>\n\n<p>Tests would then be able to do... <code>let(:core_object) { @core_object.clone }</code> that would immediately be available to them (a bit of magic, yes). I think we would have to be quite careful with these instance variable names as well to ensure they don't conflict with individual file instance variables.</p>\n\n<p>I was wondering if anyone else has attempted something similar or has any suggestions on how to further DRY up my team's common test setup, thanks.</p>\n"}, {"tags": ["ruby", "selenium", "rspec", "kendo-ui", "capybara"], "answers": [{"comments": [{"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 1, "creation_date": 1519170631, "post_id": 48895893, "comment_id": 84797885, "body": "By default <code>find</code> only finds visible elements so checking <code>visible?</code> immediately on an element returned from <code>find</code> is pointless."}], "tags": [], "owner": {"reputation": 71, "user_id": 5505639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b329f26843a2bc3997b77e6d7014035?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Jeston", "link": "https://stackoverflow.com/users/5505639/sam-jeston"}, "is_accepted": false, "score": 0, "last_activity_date": 1519169474, "creation_date": 1519169474, "answer_id": 48895893, "question_id": 48895803, "link": "https://stackoverflow.com/questions/48895803/ruby-selenium-capybara-wait-for-element-to-go-away/48895893#48895893", "title": "Ruby selenium/capybara wait for element to go away", "body": "<p>If your current loop isn't working, I expect the spinner with class k-loading-color is remaining in the DOM but with the hidden property.</p>\n\n<p>I'd try using the visible? method</p>\n\n<pre><code>def wait_until_load\n  Timeout.timeout(Capybara.default_max_wait_time) do\n    loop until !find(\".k-loading-color\").visible?\n  end\nend\n</code></pre>\n\n<p>Of course this will only work if</p>\n\n<pre><code>find(\".k-loading-color\").visible? == true\n</code></pre>\n\n<p>when the page first loads</p>\n"}, {"comments": [{"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 2, "creation_date": 1519170369, "post_id": 48896009, "comment_id": 84797815, "body": "has_no_css? already has waiting behavior and <code>Timeout.timeout</code> is actually a very dangerous method to use with programs involving network connections since it can leave the connection in a completely unknown state - explanation: <a href=\"https://medium.com/@adamhooper/in-ruby-dont-use-timeout-77d9d4e5a001\" rel=\"nofollow noreferrer\">medium.com/@adamhooper/in-ruby-dont-use-timeout-77d9d4e5a001</a>"}], "tags": [], "owner": {"reputation": 2096, "user_id": 2108990, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/886481640b3ab8f05cdf3be8c0efdad6?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/2108990/zack"}, "is_accepted": false, "score": 1, "last_activity_date": 1519170186, "creation_date": 1519170186, "answer_id": 48896009, "question_id": 48895803, "link": "https://stackoverflow.com/questions/48895803/ruby-selenium-capybara-wait-for-element-to-go-away/48896009#48896009", "title": "Ruby selenium/capybara wait for element to go away", "body": "<p>I ended up using:</p>\n\n<pre><code>def wait_until_load\n  Timeout.timeout(Capybara.default_max_wait_time) do\n    loop until page.has_no_css?(\".k-loading-color\")\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 2096, "user_id": 2108990, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/886481640b3ab8f05cdf3be8c0efdad6?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/2108990/zack"}, "edited": false, "score": 1, "creation_date": 1519170871, "post_id": 48896028, "comment_id": 84797949, "body": "@Zack Upping your <code>default_max_wait_time</code> is fine, and on pretty much all of Capybara&#39;s finders/matchers/assertions you can override that default by passing the <code>:wait</code> option if you need for a specific thing.  The thing a lot of people fail to grab is that both <code>default_max_wait_time</code> and the <code>:wait</code> option specify maximum wait times so making it longer really doesn&#39;t slow anything down in most cases (other than failures)"}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 2, "last_activity_date": 1519170302, "creation_date": 1519170302, "answer_id": 48896028, "question_id": 48895803, "link": "https://stackoverflow.com/questions/48895803/ruby-selenium-capybara-wait-for-element-to-go-away/48896028#48896028", "title": "Ruby selenium/capybara wait for element to go away", "body": "<p>99% of the time if you need <code>wait_for_ajax</code> you're doing something wrong.  In your current case you should just be doing</p>\n\n<pre><code>expect(page).to have_no_css('.k-loading-color')\n</code></pre>\n\n<p>which will wait up to <code>Capybara.default_max_wait_time</code> seconds for matching elements to disappear. If you need to allow longer than you have <code>Capybara.default_max_wait_time</code> set to you can override the maximum wait time like</p>\n\n<pre><code>expect(page).to have_no_css('.k-loading-color', wait: 10)\n</code></pre>\n\n<p>which will wait up to 10 seconds for any matching items to disappear</p>\n"}], "owner": {"reputation": 2096, "user_id": 2108990, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/886481640b3ab8f05cdf3be8c0efdad6?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/2108990/zack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2171, "favorite_count": 1, "accepted_answer_id": 48896028, "answer_count": 3, "score": 3, "last_activity_date": 1519170302, "creation_date": 1519168894, "question_id": 48895803, "link": "https://stackoverflow.com/questions/48895803/ruby-selenium-capybara-wait-for-element-to-go-away", "title": "Ruby selenium/capybara wait for element to go away", "body": "<p>I know this isn't a unique problem but I have yet to find an actual solution... I have a page that has a spinner on it while it is loading. What I would like my ruby rspec to do is wait for the spinner to go away before it moves on... </p>\n\n<p>I've already implemented a <code>wait_for_ajax</code> which helps but doesn't completely solve the issue:</p>\n\n<pre><code>def wait_for_ajax\n  Timeout.timeout(Capybara.default_max_wait_time) do\n    loop until page.evaluate_script('jQuery.active').zero?\n  end\nend\n</code></pre>\n\n<p>Given the spinner has a certain class (generated by Kendo), how can I wait for that element to go away? This is what I'm currently trying... </p>\n\n<pre><code>def wait_until_load\n  Timeout.timeout(Capybara.default_max_wait_time) do\n    loop until !find(\".k-loading-color\")\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "safari", "webdriver", "watir"], "comments": [{"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1519172991, "post_id": 48895724, "comment_id": 84798481, "body": "try <code>browser.spans(id: &#39;submit-btn&#39;).size</code>. There&#39;s a decent chance you have more than one submit button on the page."}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1519189843, "post_id": 48895724, "comment_id": 84802460, "body": "ah, I didn&#39;t see that last part. Try <code>browser.spans.map(&amp;:id)</code> should show you what the id values are. perhaps safari has spaces in there that aren&#39;t being handled correctly."}], "answers": [{"comments": [{"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 1, "creation_date": 1519173058, "post_id": 48896418, "comment_id": 84798504, "body": "<code>#spans</code> will return an <code>SpanCollection</code> not a <code>Span</code>, you&#39;d at least need to add <code>.first</code>"}, {"owner": {"reputation": 1230, "user_id": 511203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ec96aadd672b8056173e4e8a5225d8b?s=128&d=identicon&r=PG", "display_name": "Mike Gorski", "link": "https://stackoverflow.com/users/511203/mike-gorski"}, "reply_to_user": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1519180021, "post_id": 48896418, "comment_id": 84800148, "body": "@titusfortner - good point. I edited my answer to reflect that"}], "tags": [], "owner": {"reputation": 1230, "user_id": 511203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ec96aadd672b8056173e4e8a5225d8b?s=128&d=identicon&r=PG", "display_name": "Mike Gorski", "link": "https://stackoverflow.com/users/511203/mike-gorski"}, "is_accepted": false, "score": 0, "last_activity_date": 1519179945, "last_edit_date": 1519179945, "creation_date": 1519173017, "answer_id": 48896418, "question_id": 48895724, "link": "https://stackoverflow.com/questions/48895724/issue-locating-button-in-safari-using-watir/48896418#48896418", "title": "Issue locating button in Safari using Watir", "body": "<p>Try using <code>spans</code> instead of <code>span</code>. This worked for me:</p>\n\n<pre><code>browser.spans(:id =&gt; \"submit-btn\").first\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 9021933, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c699040b7b1d8339aa0bd1f6f5f7fb4c?s=128&d=identicon&r=PG&f=1", "display_name": "Eng80lvl", "link": "https://stackoverflow.com/users/9021933/eng80lvl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519183549, "creation_date": 1519168384, "question_id": 48895724, "link": "https://stackoverflow.com/questions/48895724/issue-locating-button-in-safari-using-watir", "title": "Issue locating button in Safari using Watir", "body": "<p>I have weird issue with locating button in Safari.\nThis is the button's html:</p>\n\n<pre><code>&lt;span id=\"submit-btn\" class=\"btn\"&gt;Submit&lt;/span&gt;\n</code></pre>\n\n<p>When I'm trying to locate button by ID it can't find it</p>\n\n<pre><code>browser.span(:css =&gt; \"span[id=submit-btn]\")\nbrowser.span(:id =&gt; \"submit-btn\")\n</code></pre>\n\n<p>But when I'm locating it by text it finds the button properly:</p>\n\n<pre><code>browser.span(:text =&gt; \"Submit\")\n</code></pre>\n\n<p>What is possible issue? Is it issues with safari webdriver? I am running on Safari 11.1 with native webdriver.\nTried couple of different ways to locate button by xpath and from parent elements, but no luck.\nNote: every way to locate the button works of windows with Chrome.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "associations"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 3, "creation_date": 1519161967, "post_id": 48894441, "comment_id": 84794780, "body": "The table <code>user</code> does not exists, it is called the <code>users</code> table (notice the plural). Use <code>[...].select(&#39;users.fname [...]</code> instead"}, {"owner": {"reputation": 39, "user_id": 9387840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d4a0322841f2d910f39c2cb9c36ecb?s=128&d=identicon&r=PG&f=1", "display_name": "Ant-IWH", "link": "https://stackoverflow.com/users/9387840/ant-iwh"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1519162119, "post_id": 48894441, "comment_id": 84794842, "body": "I did try that and I get a slightly different error message:  Mysql2::Error: Unknown column &#39;pto_requests.user_id&#39; in &#39;on clause&#39;: SELECT  users.fname as user_name FROM <code>pto_requests</code> INNER JOIN <code>users</code> ON <code>users</code>.<code>id</code> = <code>pto_requests</code>.<code>user_id</code> ORDER BY <code>pto_requests</code>.<code>id</code> ASC LIMIT 1"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 1, "creation_date": 1519162345, "post_id": 48894441, "comment_id": 84794945, "body": "According to the documentation, you should use the singular version of <code>users</code> for the <code>add_reference</code> call: <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/SchemaStatements.html#method-i-add_reference\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/&zwnj;&#8203;&hellip;</a> . You should rollback that migration (so that the column is dropped), rewrite the code to change <code>users</code> to <code>user</code> in the migration file and re-run the migration."}, {"owner": {"reputation": 4429, "user_id": 102133, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/561a3a55352fe6a5343e541a6894b541?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/102133/ben"}, "edited": false, "score": 0, "creation_date": 1519162545, "post_id": 48894441, "comment_id": 84795029, "body": "Why don&#39;t your migrate with <code>belongs_to :pto_requests</code> ? <a href=\"http://guides.rubyonrails.org/association_basics.html#belongs-to-association-reference\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a> kind of failsafe"}, {"owner": {"reputation": 39, "user_id": 9387840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d4a0322841f2d910f39c2cb9c36ecb?s=128&d=identicon&r=PG&f=1", "display_name": "Ant-IWH", "link": "https://stackoverflow.com/users/9387840/ant-iwh"}, "edited": false, "score": 0, "creation_date": 1519162880, "post_id": 48894441, "comment_id": 84795153, "body": "Thank you, I had tried this earlier as well but after receiving a new error related to nil value I now realize I had to go into my database and manually enter some values, as changing the column removed the old values causing this. I would like to test my other tables as well but I have a feeling I made this mistake in multiple places."}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1519163024, "post_id": 48894441, "comment_id": 84795215, "body": "@Ant-IWH if you are sure that a <code>PtoRequest</code> must be associated to a <code>User</code>, then you should remove the <code>optional: true</code> of the <code>belongs_to</code> so that it is validated at each create/update of a <code>PtoRequest</code>."}, {"owner": {"reputation": 39, "user_id": 9387840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d4a0322841f2d910f39c2cb9c36ecb?s=128&d=identicon&r=PG&f=1", "display_name": "Ant-IWH", "link": "https://stackoverflow.com/users/9387840/ant-iwh"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1519163374, "post_id": 48894441, "comment_id": 84795393, "body": "@MrYoshiji Yes I am sure, but when I do this I receive this: 1 error prohibited this pto_request from being saved: User must exist  from what I found in other posts, adding the optional: true line fixed that. The user does exist, and if I add optional:true, it saves to the database properly. If you know why this may happen maybe I can fix it in a different way then. Thank you again for all of your help, I appreciate it  EDIT: Disregard, I am dumb. Needed to remember to add &#39;user_id&#39; to the controller parameters rather than &#39;users_id&#39;"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1519163508, "post_id": 48894441, "comment_id": 84795443, "body": "Well, using <code>optional: true</code> makes Rails skip the validation of the existence of the associated record (in this case, a User record). As you made Rails skip this existence check, you allowed you app to save data associated to non-existing Users. When you create/update a <code>PtoRequest</code>, you must associate an existing User to it. The primary issue had to be fixed, not worked-around."}, {"owner": {"reputation": 39, "user_id": 9387840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d4a0322841f2d910f39c2cb9c36ecb?s=128&d=identicon&r=PG&f=1", "display_name": "Ant-IWH", "link": "https://stackoverflow.com/users/9387840/ant-iwh"}, "edited": false, "score": 0, "creation_date": 1519163808, "post_id": 48894441, "comment_id": 84795567, "body": "I edited my last comment but I was too slow, I said: Disregard, I am dumb. Needed to remember to add &#39;user_id&#39; to the controller parameters rather than &#39;users_id&#39;. it works without optional:true."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 9387840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d4a0322841f2d910f39c2cb9c36ecb?s=128&d=identicon&r=PG&f=1", "display_name": "Ant-IWH", "link": "https://stackoverflow.com/users/9387840/ant-iwh"}, "edited": false, "score": 0, "creation_date": 1519394790, "post_id": 48895916, "comment_id": 84905544, "body": "Hi, as I understand it I believe I have already done that migration  properly now thanks to the above comment, &#39;user_id&#39; is in &#39;pto_requests&#39; currently after my migration i created. I am unable to mark his comments as the answer though because they were comments and not a question answer."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1519170156, "last_edit_date": 1519170156, "creation_date": 1519169624, "answer_id": 48895916, "question_id": 48894441, "link": "https://stackoverflow.com/questions/48894441/ruby-on-rails-activerecord-association-issues-queries-not-being-made-properl/48895916#48895916", "title": "Ruby on Rails - ActiveRecord Association Issues : Queries Not Being Made Properly (singular vs. plural?)", "body": "<p>You have missunderstood the associations completely.</p>\n\n<p><code>belongs_to</code> creates a one-to-one or one-to-many association and places the foreign key column on this models table:</p>\n\n<pre><code>class PtoRequest &lt; ApplicationRecord\n  belongs_to :user, optional: true\nend\n</code></pre>\n\n<p>This association thus will reference <code>pto_requests.user_id</code>. You have added the foreign key to the wrong table.</p>\n\n<p>To generate the correct migration run:</p>\n\n<pre><code>rails g migration add_user_to_pto_requests user:references\n</code></pre>\n\n<p>The enitity you are referencing should always be singular.</p>\n"}], "owner": {"reputation": 39, "user_id": 9387840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d4a0322841f2d910f39c2cb9c36ecb?s=128&d=identicon&r=PG&f=1", "display_name": "Ant-IWH", "link": "https://stackoverflow.com/users/9387840/ant-iwh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1519170156, "creation_date": 1519161779, "question_id": 48894441, "link": "https://stackoverflow.com/questions/48894441/ruby-on-rails-activerecord-association-issues-queries-not-being-made-properl", "title": "Ruby on Rails - ActiveRecord Association Issues : Queries Not Being Made Properly (singular vs. plural?)", "body": "<p>First post I've ever felt I had to make here, normally my questions are answered by just reading other posts but this time I think I'm in too deep to find the proper answer, I've been looking for quite a while. I may have multiple issues going on in my code.</p>\n\n<p>I'm a novice with RoR, just started working with it the last couple of months. I'm attempting to run a test query to make sure my associations are working properly, and based on the errors I'm getting, I feel like I've messed up something simple. I'm setting up a couple of tables for a webapp, I'll focus on 2 tables for now because a fix to this can be applied elsewhere afterwards.</p>\n\n<p>Pertinent information:</p>\n\n<p>-I'm using Devise for user authentication</p>\n\n<p>-I have a pto_requests_controller.rb and registrations_controller.rb (registrations is used with devise as a user controller)</p>\n\n<p>-In the database, the table names are 'users' and 'pto_requests'</p>\n\n<p>I have a pto_request model (filename is 'pto_request.rb'):</p>\n\n<pre><code>class PtoRequest &lt; ApplicationRecord\n  belongs_to :user, optional: true\nend\n</code></pre>\n\n<p>And a user model (filename is 'user.rb'):</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_many :pto_requests\nend\n</code></pre>\n\n<p>To create associations in the database, I used this migration:</p>\n\n<pre><code>class AddUsersToPtorequests &lt; ActiveRecord::Migration[5.1]\n  def change\n    add_reference :pto_requests, :users, foreign_key: true\n  end\nend\n</code></pre>\n\n<p>The foreign key was created in the 'pto_requests' table and called 'users_id'</p>\n\n<p>I can query the tables individually with no issues, but once I try to access data like, for example, user.fname through pto_requests, it errors out. As an example query I've tried: </p>\n\n<pre><code>&lt;%= PtoRequest.joins(:user)\n.select('user.fname as user_name').first.user_name%&gt;\n</code></pre>\n\n<p>I receive the following error:</p>\n\n<blockquote>\n  <p>Mysql2::Error: Unknown column 'user.fname' in 'field list': SELECT  user.fname >as user_name FROM <code>pto_requests</code> INNER JOIN <code>users</code> ON <code>users</code>.<code>id</code> = ><code>pto_requests</code>.<code>user_id</code> ORDER BY <code>pto_requests</code>.<code>id</code> ASC LIMIT 1</p>\n</blockquote>\n\n<p>My current theory is it has something to do with an issue in the end of the generated SQL syntax as it is looking for 'user_id' but this does not exist, only 'users_id' does. Any help is greatly appreciated, and if any more information is required please let me know.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1519160744, "post_id": 48894063, "comment_id": 84794185, "body": "you can do <code>check_box_tag &quot;locations[]&quot;, i.id, checked: user.location_ids.include?(i.id)</code>"}, {"owner": {"reputation": 1483, "user_id": 3793234, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pOraI.jpg?s=128&g=1", "display_name": "Hamdi Bayhan", "link": "https://stackoverflow.com/users/3793234/hamdi-bayhan"}, "edited": false, "score": 0, "creation_date": 1519161403, "post_id": 48894063, "comment_id": 84794515, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/11796629/rails-check-box-tag-set-checked-with-default-value\">rails check_box_tag set checked with default value</a>"}, {"owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1519161471, "post_id": 48894063, "comment_id": 84794556, "body": "I was able to use <code>&lt;%= check_box_tag &quot;locations[]&quot;, i.id, @user.location_ids.include?(i.id) %&gt;</code> and got it to work.  I didn&#39;t know about the <code>location_ids</code> method. Makes sense now. Thanks! @MrYoshiji"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 1, "creation_date": 1519161839, "post_id": 48894063, "comment_id": 84794727, "body": "Rails offers you a lot of useful methods: it generated for you 4 methods for the <code>has_many :locations, through: :some_join_records</code> relation: 2 getters <code>locations</code> and <code>location_ids</code> and 2 setters <code>locations=(array_of_locations_object)</code> and <code>location_ids=(array_of_location_ids)</code>. But <b>beware</b>, the setters works differently if the primary object is persisted or not.  Doing <code>User.new.location_ids = [1,2,3]</code> will build but not persist the locations, but doing <code>User.last.location_ids = [1,2,3]</code> will actually trigger insertions and will try to persist the data (!!!!!)"}], "owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1519160160, "creation_date": 1519160160, "question_id": 48894063, "link": "https://stackoverflow.com/questions/48894063/show-checked-records-on-rails-edit-form-many-to-many", "title": "Show Checked Records on Rails Edit Form - Many to Many", "body": "<p>I have two forms where I can create and edit users. Each of these users has a many to many relationship with my location model. On my form, for a given user, you can check/uncheck locations that this user is associated with. Here is my code to render the locations:</p>\n\n<pre><code>&lt;% @locations.each do |i| %&gt;\n      &lt;li class=\"list-group-item\"&gt;\n          &lt;%= check_box_tag \"locations[]\", i.id %&gt;\n          &lt;%= i.name %&gt;\n       &lt;/li&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>This code works fine when creating the users and checking their associated locations, but I obviously have no way of displaying the associated locations on edit. I want the previously associated locations to be automatically checked. What is the most efficient way of achieving this? </p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing"], "answers": [{"comments": [{"owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "edited": false, "score": 0, "creation_date": 1519162511, "post_id": 48894564, "comment_id": 84795016, "body": "hmm I see.. really I&#39;m trying to clear the database out before all tests (so once at the beginning of the file), and then clear 1 particular table out before each test (so before each test). Should I just try to use rspec or something to do this? What is the recommended approach there?"}, {"owner": {"reputation": 8626, "user_id": 2800648, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/9Efoe.jpg?s=128&g=1", "display_name": "Igor Pantovi\u0107", "link": "https://stackoverflow.com/users/2800648/igor-pantovi%c4%87"}, "reply_to_user": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "edited": false, "score": 0, "creation_date": 1519162832, "post_id": 48894564, "comment_id": 84795137, "body": "@Tallboy This is probably what you&#39;re looking for then <a href=\"https://github.com/DatabaseCleaner/database_cleaner\" rel=\"nofollow noreferrer\">github.com/DatabaseCleaner/database_cleaner</a>"}, {"owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "edited": false, "score": 0, "creation_date": 1519163291, "post_id": 48894564, "comment_id": 84795343, "body": "Does <code>ActiveSupport::TestCase</code> automatically clean out the database between each test? It&#39;s driving me crazy, but it seems it&#39;s already doing that? (without needing any extra gems)"}, {"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1519169735, "post_id": 48894564, "comment_id": 84797612, "body": "You seem to be missing &quot;test fixtures&quot;. A search for &quot;Rails test fixtures&quot; will reveal the wheel you are trying to reinvent here."}], "tags": [], "owner": {"reputation": 8626, "user_id": 2800648, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/9Efoe.jpg?s=128&g=1", "display_name": "Igor Pantovi\u0107", "link": "https://stackoverflow.com/users/2800648/igor-pantovi%c4%87"}, "is_accepted": true, "score": 2, "last_activity_date": 1519162309, "creation_date": 1519162309, "answer_id": 48894564, "question_id": 48893910, "link": "https://stackoverflow.com/questions/48893910/activesupporttestcase-wont-run-db-commands/48894564#48894564", "title": "ActiveSupport::TestCase won&#39;t run DB commands?", "body": "<p>I think you should separate this into 3 posts as it's easier.</p>\n\n<h1>1 ActiveSupport::TestCase framework</h1>\n\n<p><code>ActiveSupport::TestCase</code> extends <code>Minitest::Test</code></p>\n\n<h1>2 Setup before all examples in a file</h1>\n\n<p>As far as I know, all the ways to do it are workarounds. This is discouraged and not supported through a nice API by default. \n   Quick search comes up with this:</p>\n\n<pre><code>setup_executed = false\nsetup do\n  unless setup_executed\n    #code goes here\n    setup_executed = true\n  end\nend\n</code></pre>\n\n<h1>3 Setup not working</h1>\n\n<p>In development and test environments by default classes are autoloaded lazily, as they are required. Unless you reference a class somewhere in your code before running <code>ActiveRecord::Base.subclasses</code>, ruby won't know it exists, because it was never loaded.</p>\n"}], "owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 48894564, "answer_count": 1, "score": 0, "last_activity_date": 1519162309, "creation_date": 1519159477, "last_edit_date": 1519160881, "question_id": 48893910, "link": "https://stackoverflow.com/questions/48893910/activesupporttestcase-wont-run-db-commands", "title": "ActiveSupport::TestCase won&#39;t run DB commands?", "body": "<p>I have 3 questions:</p>\n\n<ol>\n<li><p>What is the default testing library that comes with Rails? I can't actually see what it's called... MiniTest? TestUnit?</p></li>\n<li><p>How can I make some code run once <strong>per TestCase</strong> to setup for ALL tests. It seems <code>setup do</code> is run before each test, but I want to set up for the entire file.</p></li>\n<li><p>How come my example below doesn't work (it won't clear out and re-create the seed data before each test)</p></li>\n</ol>\n\n<p>Code:</p>\n\n<pre><code>require 'test_helper'\n\n# negative numbers\n# 3+ line item journal entries\n\nclass LedgerTest &lt; ActiveSupport::TestCase\n  setup do\n    ActiveRecord::Base.subclasses.each(&amp;:delete_all)\n\n    AccountType.create!(code: 101, name: 'Cash',                     category: :asset,     normal_balance: :debit)\n    AccountType.create!(code: 102, name: 'Equipment',                category: :asset,     normal_balance: :debit)\n    AccountType.create!(code: 103, name: 'Accumulated Depreciation', category: :asset,     normal_balance: :credit, contra: true)\n  end\n\n  test \"test 1 here\" do\n  end\n\n  test \"test 2 here\" do\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "caching", "controller"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1519162426, "post_id": 48893742, "comment_id": 84794989, "body": "I think the reason it reloads on the second is because the before save &quot;changes&quot; the template (the exists is a <code>name</code> uniqueness validation almost certainly) since the template is &quot;changed&quot; it reloads and reloads it&#39;s children where as when the template is unchanged and only the children change it does not need to reload. I would recommend your known work around to reload always to avoid this inconsistency"}, {"owner": {"reputation": 4257, "user_id": 1028679, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/fe67e29bbbb733dedab9bdf075a9ff38?s=128&d=identicon&r=PG", "display_name": "rmcsharry", "link": "https://stackoverflow.com/users/1028679/rmcsharry"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1519171322, "post_id": 48893742, "comment_id": 84798061, "body": "@engineersmnky Thanks, that does seem to make sense. I would like to try to find an official reference in the docs if possible...will keep looking. And yes for now I think I need the workaround...and probably forever :)"}, {"owner": {"reputation": 1389, "user_id": 4133078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P24yz.jpg?s=128&g=1", "display_name": "Cody Gustafson", "link": "https://stackoverflow.com/users/4133078/cody-gustafson"}, "edited": false, "score": 0, "creation_date": 1519319022, "post_id": 48893742, "comment_id": 84873149, "body": "I expect something is happening in your serializer if you are experiencing the model being reloaded automatically. Could you include that code?"}, {"owner": {"reputation": 4257, "user_id": 1028679, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/fe67e29bbbb733dedab9bdf075a9ff38?s=128&d=identicon&r=PG", "display_name": "rmcsharry", "link": "https://stackoverflow.com/users/1028679/rmcsharry"}, "reply_to_user": {"reputation": 1389, "user_id": 4133078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P24yz.jpg?s=128&g=1", "display_name": "Cody Gustafson", "link": "https://stackoverflow.com/users/4133078/cody-gustafson"}, "edited": false, "score": 0, "creation_date": 1519387725, "post_id": 48893742, "comment_id": 84901350, "body": "@CodyGustafson I don&#39;t think it&#39;s that, but I added the serializer code."}, {"owner": {"reputation": 1389, "user_id": 4133078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P24yz.jpg?s=128&g=1", "display_name": "Cody Gustafson", "link": "https://stackoverflow.com/users/4133078/cody-gustafson"}, "edited": false, "score": 1, "creation_date": 1519390713, "post_id": 48893742, "comment_id": 84903080, "body": "Yeah,  pretty slim serializer. I am now expecting updating the parent may be invalidating the association cache."}, {"owner": {"reputation": 1389, "user_id": 4133078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P24yz.jpg?s=128&g=1", "display_name": "Cody Gustafson", "link": "https://stackoverflow.com/users/4133078/cody-gustafson"}, "edited": false, "score": 0, "creation_date": 1519661368, "post_id": 48893742, "comment_id": 84990025, "body": "@rmcsharry, I finally got the chance to get on my laptop again (instead of my phone). I expect my updated answer to be surprising to you, but should help you fix this behavior."}, {"owner": {"reputation": 4257, "user_id": 1028679, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/fe67e29bbbb733dedab9bdf075a9ff38?s=128&d=identicon&r=PG", "display_name": "rmcsharry", "link": "https://stackoverflow.com/users/1028679/rmcsharry"}, "reply_to_user": {"reputation": 1389, "user_id": 4133078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P24yz.jpg?s=128&g=1", "display_name": "Cody Gustafson", "link": "https://stackoverflow.com/users/4133078/cody-gustafson"}, "edited": false, "score": 0, "creation_date": 1519727329, "post_id": 48893742, "comment_id": 85017323, "body": "@CodyGustafson Yes, you are right and I was surprised. Thanks for taking the time to update the answer - I will change my code as a result."}], "answers": [{"comments": [{"owner": {"reputation": 4257, "user_id": 1028679, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/fe67e29bbbb733dedab9bdf075a9ff38?s=128&d=identicon&r=PG", "display_name": "rmcsharry", "link": "https://stackoverflow.com/users/1028679/rmcsharry"}, "edited": false, "score": 0, "creation_date": 1519388386, "post_id": 48931722, "comment_id": 84901724, "body": "Thanks for all this info. I took out the before_save and now I get the same behaviour, so that answers the question that it is causing the different behaviour - not the serializer."}], "tags": [], "owner": {"reputation": 1389, "user_id": 4133078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P24yz.jpg?s=128&g=1", "display_name": "Cody Gustafson", "link": "https://stackoverflow.com/users/4133078/cody-gustafson"}, "is_accepted": true, "score": 1, "last_activity_date": 1519663295, "last_edit_date": 1519663295, "creation_date": 1519314761, "answer_id": 48931722, "question_id": 48893742, "link": "https://stackoverflow.com/questions/48893742/rails-5-api-controller-update-action-sometimes-does-not-reflect-database-chang/48931722#48931722", "title": "Rails 5 API - controller update action sometimes does not reflect database changes (cache issue)?", "body": "<p>The issue here is that you are requesting the items prior changing the sort. This means that the array of items that you have will no longer be sorted since you changed the property they are sorted on. Put another way, after you modify them, there isn't another query which returns the correct order.</p>\n\n<p>So, I'll say the possible solutions are:</p>\n\n<ol>\n<li>Reload the items after you mutate the sort.</li>\n<li>Don't pull the items until after you mutate the sort.</li>\n<li>Mutate the order of <code>template_items</code> based on sort values that changed.</li>\n</ol>\n\n<p>The tradeoffs:</p>\n\n<ol>\n<li>You have 2 select queries as well as the updates.</li>\n<li>You have to update the records using <code>TemplateItem.update(id, sort: sort)</code> with all those updates within a transaction prior to selecting the records.</li>\n<li>If you aren't rendering all the results, or decide not to in the future, it is possible that you will be modifying an item which will no longer be on the page. And, possibly other issues.</li>\n</ol>\n\n<hr>\n\n<blockquote>\n  <p>Why the different behaviour for the same action? If it is the before_save, then why?</p>\n</blockquote>\n\n<p>The before_save is requesting <code>template_items</code> prior to them being saved. Otherwise, <code>template_items</code> doesn't get called until the serializer renders them. Note, that this means your <code>before_save</code> callback isn't performing the way you want it to since it is modifying the status based on the previous values.</p>\n\n<blockquote>\n  <p>Why in the correct case does the log show Template Exists (since it does exist in both cases)?</p>\n</blockquote>\n\n<pre><code>SELECT  1 AS one FROM \"templates\" WHERE\n\"templates\".\"name\" = 'Daffy' AND \n(\"templates\".\"id\" != 'c965c3ed-ace2-43af-9abd-f85392bdb948') AND \n\"templates\".\"account_id\" = 'c379e356-4cce-4de2-b1b4-984b773dd43e' AND\n\"templates\".\"template_type\" = 0\n LIMIT 1\n</code></pre>\n\n<p>Looking at the SQL, this looks like a validation to ensure name is unique across templates and type.</p>\n\n<blockquote>\n  <p>How does Rails know to reload the updated children in the correct case but not in the incorrect case?</p>\n</blockquote>\n\n<p>Rails does not know. It is only loading them once in both cases. Just, with the before_save it is running before the records are updated.</p>\n\n<h2>Summary:</h2>\n\n<p>The easiest way to fix this timing issue would using a different callback which fires after updating the children such as <code>after_update</code>.</p>\n"}], "owner": {"reputation": 4257, "user_id": 1028679, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/fe67e29bbbb733dedab9bdf075a9ff38?s=128&d=identicon&r=PG", "display_name": "rmcsharry", "link": "https://stackoverflow.com/users/1028679/rmcsharry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 518, "favorite_count": 0, "accepted_answer_id": 48931722, "answer_count": 1, "score": 1, "last_activity_date": 1519663295, "creation_date": 1519158729, "last_edit_date": 1519388080, "question_id": 48893742, "link": "https://stackoverflow.com/questions/48893742/rails-5-api-controller-update-action-sometimes-does-not-reflect-database-chang", "title": "Rails 5 API - controller update action sometimes does not reflect database changes (cache issue)?", "body": "<p>I have 2 simple models in a has_many relationship. A Template has_many TemplateItems. A Template has a template_type which can be one of two values ('template' or 'checklist').</p>\n\n<p>For brevity I have removed non-relevant code.</p>\n\n<p><strong>template.rb</strong></p>\n\n<pre><code>class Template &lt; ApplicationRecord\n\n  # Relationships\n  belongs_to :account\n  has_many :template_items, -&gt; { order('sort ASC') }, dependent: :destroy\n  accepts_nested_attributes_for :template_items, allow_destroy: true\n\n  # Enums\n  enum template_type: {template: 0, checklist: 1}\n  enum status: {not_started: 0, started: 1, completed: 2}\n\n  # Callbacks\n  before_save :set_status, unless: :is_template? # only care about status for checklists\n\n  def is_template?\n    return self.template_type == 'template'\n  end\n\n  def set_status\n    completed = 0\n    self.template_items.each do |item|\n      completed += 1 if item.is_completed\n    end\n    case completed\n      when 0\n        self.status = Template.statuses[:not_started]\n      when 1..(self.template_items.length - 1)\n        self.status = Template.statuses[:started]\n      when self.template_items.length\n        self.status = Template.statuses[:completed]\n    end\n  end\nend\n</code></pre>\n\n<p><strong>template_item.rb</strong></p>\n\n<pre><code>class TemplateItem &lt; ApplicationRecord  \n\n  # Relationships\n  belongs_to :template\n\n  # Validations\n  validates_presence_of :template\nend\n</code></pre>\n\n<p>When a client sends an update to Template Controller, it includes the template_items nested:</p>\n\n<p><strong>templates_controller.rb</strong></p>\n\n<pre><code>def template_params \n  params.require(:template).\n    permit(:id, :account_id, :list_type, :name, :title, :info, :status, \n      template_items_attributes: \n      [:id, :template_id, :is_completed, :content, :item_type, :sort, :_destroy])\nend\n</code></pre>\n\n<p>Notice that one of the attributes of an item is called sort. Notice also that the sort order is used in the <code>Template</code> model to sort the <code>template_items</code> (see the <code>has_many</code> line).</p>\n\n<p>If a client resorts the template_items, the following update action is called:</p>\n\n<p><strong>templates_controller.rb</strong></p>\n\n<pre><code>  def update\n    if @template.update(template_params)\n      render json: @template, serializer: TemplateSerializer, status: :ok \n    else\n      render json: ErrorSerializer.serialize(@template.errors), status: :unprocessable_entity\n    end\n  end\n</code></pre>\n\n<p>The strange behaviour is that the database is always updated (verified in the logs and in the db) but <strong>sometimes</strong> the render does not render the new sort order but instead renders the previous sort order.</p>\n\n<p>Here is the log when the action incorrectly returns the previous data:</p>\n\n<pre><code>I, [2018-02-20T20:22:55.997835 #1852]  INFO -- : Processing by Api::TemplatesController#update as JSON\n...parameters here...\nD, [2018-02-20T20:22:56.002965 #1852] DEBUG -- :   User Load (1.7ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"uid\" = $1 LIMIT $2  [[\"uid\", \"rmcsharry+owner@gmail.com\"], [\"LIMIT\", 1]]\nD, [2018-02-20T20:22:56.115190 #1852] DEBUG -- :   Template Load (2.6ms)  SELECT  \"templates\".* FROM \"templates\" WHERE \"templates\".\"id\" = $1 ORDER BY LOWER(templates.name) ASC LIMIT $2  [[\"id\", \"f9f6bca2-cb84-4349-8546-ca38026db407\"], [\"LIMIT\", 1]]\nD, [2018-02-20T20:22:56.121995 #1852] DEBUG -- :    (0.4ms)  BEGIN\nD, [2018-02-20T20:22:56.129177 #1852] DEBUG -- :   TemplateItem Load (2.5ms)  SELECT \"template_items\".* FROM \"template_items\" WHERE \"template_items\".\"template_id\" = $1 AND \"template_items\".\"id\" IN ('419cb7ec-ca3f-4911-8a00-bec20f5ca89c', 'a7ac1687-8cb5-4199-a03b-d7cc975a0387', 'd7d885b6-2a75-487a-918c-6f3abaae7df1', 'b1b0277c-632f-4fe1-82e5-d020ee313d5b') ORDER BY sort ASC  [[\"template_id\", \"f9f6bca2-cb84-4349-8546-ca38026db407\"]]\nD, [2018-02-20T20:22:56.137975 #1852] DEBUG -- :   Account Load (1.4ms)  SELECT  \"accounts\".* FROM \"accounts\" WHERE \"accounts\".\"id\" = $1 LIMIT $2  [[\"id\", \"c379e356-4cce-4de2-b1b4-984b773dd43e\"], [\"LIMIT\", 1]]\nD, [2018-02-20T20:22:56.144421 #1852] DEBUG -- :   CACHE Template Load (0.0ms)  SELECT  \"templates\".* FROM \"templates\" WHERE \"templates\".\"id\" = $1 ORDER BY LOWER(templates.name) ASC LIMIT $2  [[\"id\", \"f9f6bca2-cb84-4349-8546-ca38026db407\"], [\"LIMIT\", 1]]\nD, [2018-02-20T20:22:56.148992 #1852] DEBUG -- :   CACHE Template Load (0.0ms)  SELECT  \"templates\".* FROM \"templates\" WHERE \"templates\".\"id\" = $1 ORDER BY LOWER(templates.name) ASC LIMIT $2  [[\"id\", \"f9f6bca2-cb84-4349-8546-ca38026db407\"], [\"LIMIT\", 1]]\nD, [2018-02-20T20:22:56.156300 #1852] DEBUG -- :   TemplateItem Load (2.4ms)  SELECT \"template_items\".* FROM \"template_items\" WHERE \"template_items\".\"template_id\" = $1 ORDER BY sort ASC  [[\"template_id\", \"f9f6bca2-cb84-4349-8546-ca38026db407\"]]\nD, [2018-02-20T20:22:56.171567 #1852] DEBUG -- :   SQL (1.9ms)  UPDATE \"template_items\" SET \"sort\" = $1, \"updated_at\" = $2 WHERE \"template_items\".\"id\" = $3  [[\"sort\", 2], [\"updated_at\", \"2018-02-20 19:22:56.167142\"], [\"id\", \"d7d885b6-2a75-487a-918c-6f3abaae7df1\"]]\nD, [2018-02-20T20:22:56.175072 #1852] DEBUG -- :   SQL (0.7ms)  UPDATE \"template_items\" SET \"sort\" = $1, \"updated_at\" = $2 WHERE \"template_items\".\"id\" = $3  [[\"sort\", 1], [\"updated_at\", \"2018-02-20 19:22:56.172797\"], [\"id\", \"a7ac1687-8cb5-4199-a03b-d7cc975a0387\"]]\nD, [2018-02-20T20:22:56.176305 #1852] DEBUG -- :    (0.6ms)  COMMIT\nI, [2018-02-20T20:22:56.183481 #1852]  INFO -- : Rendered TemplateSerializer with ActiveModelSerializers::Adapter::Attributes (2.97ms)\n</code></pre>\n\n<p>Here is the log when the action correctly returns the new data - I have marked the differences (1) and (2):</p>\n\n<pre><code>I, [2018-02-20T20:52:47.490513 #3087]  INFO -- : Processing by Api::TemplatesController#update as JSON\n ...parameters...\nD, [2018-02-20T20:52:47.499201 #3087] DEBUG -- :   User Load (2.0ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"uid\" = $1 LIMIT $2  [[\"uid\", \"rmcsharry+owner@gmail.com\"], [\"LIMIT\", 1]]\nD, [2018-02-20T20:52:47.706520 #3087] DEBUG -- :   Template Load (2.3ms)  SELECT  \"templates\".* FROM \"templates\" WHERE \"templates\".\"id\" = $1 ORDER BY LOWER(templates.name) ASC LIMIT $2  [[\"id\", \"c965c3ed-ace2-43af-9abd-f85392bdb948\"], [\"LIMIT\", 1]]\nD, [2018-02-20T20:52:47.727668 #3087] DEBUG -- :    (0.3ms)  BEGIN\nD, [2018-02-20T20:52:47.777126 #3087] DEBUG -- :   TemplateItem Load (2.2ms)  SELECT \"template_items\".* FROM \"template_items\" WHERE \"template_items\".\"template_id\" = $1 AND \"template_items\".\"id\" IN ('ff034c14-252f-4366-9b31-526b5211e92b', '4e6ec7ef-ba53-4ec2-ab2e-97dd3b2c41bc', '3628b6ca-cddb-4d65-a6c3-86dfdcaa92f4', '35e61d68-143c-4bac-ab15-fbbb2b3f13d1') ORDER BY sort ASC  [[\"template_id\", \"c965c3ed-ace2-43af-9abd-f85392bdb948\"]]\nD, [2018-02-20T20:52:47.820226 #3087] DEBUG -- :   Account Load (1.4ms)  SELECT  \"accounts\".* FROM \"accounts\" WHERE \"accounts\".\"id\" = $1 LIMIT $2  [[\"id\", \"c379e356-4cce-4de2-b1b4-984b773dd43e\"], [\"LIMIT\", 1]]\nD, [2018-02-20T20:52:47.847928 #3087] DEBUG -- :   CACHE Template Load (0.0ms)  SELECT  \"templates\".* FROM \"templates\" WHERE \"templates\".\"id\" = $1 ORDER BY LOWER(templates.name) ASC LIMIT $2  [[\"id\", \"c965c3ed-ace2-43af-9abd-f85392bdb948\"], [\"LIMIT\", 1]]\nD, [2018-02-20T20:52:47.850995 #3087] DEBUG -- :   CACHE Template Load (0.0ms)  SELECT  \"templates\".* FROM \"templates\" WHERE \"templates\".\"id\" = $1 ORDER BY LOWER(templates.name) ASC LIMIT $2  [[\"id\", \"c965c3ed-ace2-43af-9abd-f85392bdb948\"], [\"LIMIT\", 1]]\n(1) D, [2018-02-20T20:52:47.856858 #3087] DEBUG -- :   Template Exists (0.9ms)  SELECT  1 AS one FROM \"templates\" WHERE \"templates\".\"name\" = $1 AND (\"templates\".\"id\" != $2) AND \"templates\".\"account_id\" = 'c379e356-4cce-4de2-b1b4-984b773dd43e' AND \"templates\".\"template_type\" = $3 LIMIT $4  [[\"name\", \"Daffy\"], [\"id\", \"c965c3ed-ace2-43af-9abd-f85392bdb948\"], [\"template_type\", 0], [\"LIMIT\", 1]]\nD, [2018-02-20T20:52:47.863415 #3087] DEBUG -- :   SQL (1.1ms)  UPDATE \"template_items\" SET \"sort\" = $1, \"updated_at\" = $2 WHERE \"template_items\".\"id\" = $3  [[\"sort\", 2], [\"updated_at\", \"2018-02-20 19:52:47.859495\"], [\"id\", \"3628b6ca-cddb-4d65-a6c3-86dfdcaa92f4\"]]\nD, [2018-02-20T20:52:47.865969 #3087] DEBUG -- :   SQL (0.6ms)  UPDATE \"template_items\" SET \"sort\" = $1, \"updated_at\" = $2 WHERE \"template_items\".\"id\" = $3  [[\"sort\", 3], [\"updated_at\", \"2018-02-20 19:52:47.864044\"], [\"id\", \"35e61d68-143c-4bac-ab15-fbbb2b3f13d1\"]]\nD, [2018-02-20T20:52:47.868568 #3087] DEBUG -- :    (2.0ms)  COMMIT\n(2) D, [2018-02-20T20:52:47.918381 #3087] DEBUG -- :   TemplateItem Load (1.5ms)  SELECT \"template_items\".* FROM \"template_items\" WHERE \"template_items\".\"template_id\" = $1 ORDER BY sort ASC  [[\"template_id\", \"c965c3ed-ace2-43af-9abd-f85392bdb948\"]]\nI, [2018-02-20T20:52:47.930257 #3087]  INFO -- : Rendered TemplateSerializer with ActiveModelSerializers::Adapter::Attributes (17.22ms)\n</code></pre>\n\n<p>Notice the differences:</p>\n\n<p>(1) the log shows a 'Template Exists' message</p>\n\n<p>(2) after the commit Rails reloads the template_items to get the updated data from the database.</p>\n\n<p>I know that I can fix this and force the update action to always do (2) and reload the template_items child objects:</p>\n\n<p><strong>templates_controller.rb</strong></p>\n\n<pre><code>  def update\n    if @template.update(template_params)\n      @template.template_items.reload\n      render json: @template, serializer: TemplateSerializer, status: :ok \n    else\n      render json: ErrorSerializer.serialize(@template.errors), status: :unprocessable_entity\n    end\n  end\n</code></pre>\n\n<p>But why do I need to do that if Rails has the ability (sometimes) to figure that out on its own? Although the cache is used in both calls, in the correct second example Rails has figured out it needs to reload the child objects after the database was updated, but not in the first case.</p>\n\n<p>So what I am trying to understand is what controls this behaviour. It seems to me that it must be related to the <code>before_save</code> action in the <code>Template</code> model, since that action only fires for the 2nd case (template_type is 'template') and not the 1st (template_type is 'checklist'). In other words it seems when that action fires it 'changes' the behaviour of the update action.</p>\n\n<p>So my questions are:</p>\n\n<ol>\n<li><p>Why the different behaviour for the same action? If it is the\nbefore_save, then why?</p></li>\n<li><p>Why in the correct case does the log show Template Exists (since it\ndoes exist in both cases)? </p></li>\n<li><p>How does Rails know to reload the updated children in the correct case\nbut not in the incorrect case?</p></li>\n</ol>\n\n<p>** UPDATE **</p>\n\n<p>Here is the <strong>template_serializer.rb</strong></p>\n\n<pre><code>class TemplateSerializer &lt; ActiveModel::Serializer\n  attributes :id, \n    :account_id,\n    :name,\n    :info,\n    :title,\n    :template_type,\n    :status\n\n  has_many :template_items, include_nested_associations: true\nend\n</code></pre>\n"}, {"tags": ["ruby", "selenium", "capybara", "pageobjects", "page-object-gem"], "answers": [{"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 2, "last_activity_date": 1519154803, "creation_date": 1519154803, "answer_id": 48892785, "question_id": 48892562, "link": "https://stackoverflow.com/questions/48892562/how-do-i-reference-the-capybara-driver-for-creating-my-pageobjects-specs/48892785#48892785", "title": "How do I reference the Capybara driver for creating my pageobjects/specs.", "body": "<p>Assuming you're talking about the <code>page-object</code> gem - <a href=\"https://github.com/cheezy/page-object\" rel=\"nofollow noreferrer\">https://github.com/cheezy/page-object</a> - it doesn't support Capybara, it supports watir-webdriver/watir and selenium-webdriver.  Additionally <code>Capybara::Selenium::Driver</code> is a class not an object instance.  As shown in the <code>page-object</code> readme you need to pass an object instance into your page objects constructor</p>\n\n<pre><code>@browser = Selenium::WebDriver.for :firefox\n</code></pre>\n\n<p>If you want a page object framework that supports Capybara you may want to look at something like <code>site-prism</code> instead.</p>\n"}], "owner": {"reputation": 2096, "user_id": 2108990, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/886481640b3ab8f05cdf3be8c0efdad6?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/2108990/zack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 48892785, "answer_count": 1, "score": 0, "last_activity_date": 1519154803, "creation_date": 1519153815, "question_id": 48892562, "link": "https://stackoverflow.com/questions/48892562/how-do-i-reference-the-capybara-driver-for-creating-my-pageobjects-specs", "title": "How do I reference the Capybara driver for creating my pageobjects/specs.", "body": "<p>I am attempting to use pageobjects along with with my Capybara specs but can't seem to properly reference the driver. Basically I want to be able to use the PageObjects to define the fields on the page (this is <code>login_page.rb</code>), but when I try to create the object in the spec, it is throwing errors with saying that the object is nil. </p>\n\n<p><strong>spec_helper.rb</strong>:</p>\n\n<pre><code># frozen-string-literal: true\n\nrequire 'rspec'\nrequire 'capybara/rspec'\nrequire 'capybara/dsl'\nrequire 'selenium-webdriver'\nrequire 'page-object'\n\n\n# loading page object files\npage_paths  = File.join(Dir.pwd, 'spec', 'pages', '**', '*.rb')\nputs 'foo'\nDir.glob(page_paths).each { |file| puts file}\nDir.glob(page_paths).each { |file| require file }\n\nCapybara.register_driver :firefox do |app|\n  Capybara::Selenium::Driver.new(app, browser: :firefox)\nend\n\nCapybara.default_driver = :firefox\nCapybara.app_host = *********** #redacted\nCapybara.default_max_wait_time = 5\n\nRSpec.configure do |config|\n  config.before(:all) do\n    @browser =  Capybara::Selenium::Driver\n  end\n\n  config.before(:each) do\n    config.include Capybara::DSL\n  end\nend\n</code></pre>\n\n<p><strong>login_page.rb</strong></p>\n\n<pre><code>class LoginPage\n  include Capybara::DSL\n  include PageObject\n\n  text_field(:username, id: 'username')\n  text_field(:password, id: 'password')\n  button(:login, id: 'loginButton')\n\n  def initialize(driver)\n    @driver = driver\n  end\nend\n</code></pre>\n\n<p><strong>login_spec.rb</strong></p>\n\n<pre><code>require 'spec_helper'\n\ndescribe 'On Login page' do\n  context 'using proper password' do\n    before(:each) do\n      visit('/')\n    end\n\n    it 'logs in as foo' do\n      login_page = LoginPage.new(@browser)\n      login_page.username = 'foo'\n      login_page.password = 'bar'\n      login_page.login\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "chef-infra", "recipe", "datadog"], "comments": [{"owner": {"reputation": 55, "user_id": 6566614, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dVpPC.jpg?s=128&g=1", "display_name": "kian", "link": "https://stackoverflow.com/users/6566614/kian"}, "edited": false, "score": 0, "creation_date": 1534948026, "post_id": 48892401, "comment_id": 90888538, "body": "What does the input value for the databag pre-encryption look like here? <code>{ &quot;api_key&quot; : &quot;$api_key&quot;, &quot;application_key&quot; : &quot;$application_key&quot; }</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": true, "score": 2, "last_activity_date": 1519155205, "creation_date": 1519155205, "answer_id": 48892885, "question_id": 48892401, "link": "https://stackoverflow.com/questions/48892401/chefencrypteddatabagitem-load-method-use/48892885#48892885", "title": "Chef::EncryptedDataBagItem.load method use", "body": "<p>Neither, you want something like this I think:</p>\n\n<pre><code>api_key = data_bag_item('datadog', 'datadog_keys')['api_key']\n                        ^ bag name ^ item name    ^ accessing something from the item hash\n</code></pre>\n\n<p>Also putting the key into node attributes like that is very unsafe and kind of defeats the point of encrypted bags since node attributes are all written back to the Chef Server and so the key will be sent unencrypted.</p>\n"}], "owner": {"reputation": 638, "user_id": 2103312, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6008140e285ec0d3a4705d2a1a7905cf?s=128&d=identicon&r=PG", "display_name": "JavaRed", "link": "https://stackoverflow.com/users/2103312/javared"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 552, "favorite_count": 0, "accepted_answer_id": 48892885, "answer_count": 1, "score": 0, "last_activity_date": 1519155205, "creation_date": 1519153154, "question_id": 48892401, "link": "https://stackoverflow.com/questions/48892401/chefencrypteddatabagitem-load-method-use", "title": "Chef::EncryptedDataBagItem.load method use", "body": "<p>I try to use a wrapper Chef recipe to read Datadog API keys from an encrypted data bag and override node default attribute. My confusion here is with  Chef::EncryptedDataBagItem.load method use. I created an encrypted bag with name datadog with an item datadog_keys inside of it. I would like to get api key and app key from inside of this data bag item. So I'm using:</p>\n\n<pre><code>node.default['datadog']['api_key'] = Chef::EncryptedDataBagItem.load(\"datadog\", \"api_key\")\nnode.default['datadog']['application_key'] = Chef::EncryptedDataBagItem.load(\"datadog\", \"chef\")\n</code></pre>\n\n<p>My question, this usage is it correct or should I use:</p>\n\n<p><code>Chef::EncryptedDataBagItem.load(\"datadog_keys\", \"api_key\")</code></p>\n\n<p>or</p>\n\n<p><code>Chef::EncryptedDataBagItem.load(\"datadog::datadog_keys\", \"api_key\")</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "associations"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1519153706, "post_id": 48892162, "comment_id": 84790543, "body": "The name <code>Role</code> seems fine IMO. Maybe you should add a string column like <code>role_type</code> so that a <code>role</code> with <code>role_type = &#39;founder&#39;</code> is actually a <code>Founder</code> of the associated <code>Company</code>."}, {"owner": {"reputation": 1003, "user_id": 66493, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/cbd5ff0beb1fcfc28ff844110b7add06?s=128&d=identicon&r=PG", "display_name": "egyamado", "link": "https://stackoverflow.com/users/66493/egyamado"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1519158401, "post_id": 48892162, "comment_id": 84792932, "body": "@MrYoshiji Is the association i have correct? How I would go about doing it&#39;s controller?"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 1, "creation_date": 1519159460, "post_id": 48892162, "comment_id": 84793483, "body": "The association is correct. You might want to have different plain-old-ruby-objects (or CanCan Ability subclasses) to define each role&#39;s type ACL. About the controller, you would not need a <code>RolesController</code> since the Role is the record defining the relation type between a User and a Company. So when adding a Founder to a Company, it would be <code>company.founders.create!(user_id: current_user.id)</code> where <code>Company#founders</code> is defined as <code>Company</code> <code>has_many :founders, -&gt;{ where(role_type: :founder) }, class_name: &#39;User&#39;</code>"}, {"owner": {"reputation": 1003, "user_id": 66493, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/cbd5ff0beb1fcfc28ff844110b7add06?s=128&d=identicon&r=PG", "display_name": "egyamado", "link": "https://stackoverflow.com/users/66493/egyamado"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1519242420, "post_id": 48892162, "comment_id": 84834739, "body": "Thanks @MrYoshiji I will consider CanCan Ability for sure. I&#39;m at a point when &#39;current_user&#39; can create a company. But when I do <code>users.companies</code> I got nothing, same with <code>companies.users</code>.  I update my Q with CompaniesController."}], "owner": {"reputation": 1003, "user_id": 66493, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/cbd5ff0beb1fcfc28ff844110b7add06?s=128&d=identicon&r=PG", "display_name": "egyamado", "link": "https://stackoverflow.com/users/66493/egyamado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1519242704, "creation_date": 1519152111, "last_edit_date": 1519242704, "question_id": 48892162, "link": "https://stackoverflow.com/questions/48892162/instruct-a-relationship-between-many-users-and-many-companies-in-rails-5", "title": "Instruct a relationship between many Users and many Companies in Rails 5", "body": "<p>I\u2019m working on a project where I got confused on how to structure it models, and I appreciate your inputs in order to understand how to grow about the best solution fits projects requirements.</p>\n\n<p><strong>Requirements</strong></p>\n\n<p>After a user signup it would be able to complete is profile (users has_on :profile).   That profile would be available to public to review as profile to resume, regardless user is looking for a job or one a company. \nAll users should be able to create one or more than one company (users has_many :companies, through: :roles) and companies would belongs to many users (companies has_mamy :users , through: :roles).</p>\n\n<p>Here are my models and migrations:</p>\n\n<pre><code>class Company &lt; ApplicationRecord\n  has_many :roles\n  has_many :users, through: :roles\nend\n\nclass Role &lt; ApplicationRecord\n  belongs_to :company\n  belongs_to :user\nend\n\nclass User &lt; ApplicationRecord\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n\n  has_many :roles\n  has_many :companies, through: :roles\nend\n\n\nclass CreateCompanies &lt; ActiveRecord::Migration[5.1]\n  def change\n    create_table :companies do |t|\n      t.string    :name, limit: 255, null: false\n      t.text      :description, limit: 1500, null: false\n\n      t.timestamps null: false\n    end\n  end\nend\n\n\nclass CreateRoles &lt; ActiveRecord::Migration[5.1]\n  def change\n    create_table :roles do |t|\n      t.references :company, foreign_key: true\n      t.references :user, foreign_key: true\n\n      t.timestamps null: false\n    end\n    add_index :roles, [:user_id, :company_id]\n  end\nend\n</code></pre>\n\n<p>And User is done by Devise.</p>\n\n<p>I have tried <code>has_many_and_belongs_to</code> association, but I found it is limitation since I would need to interact with Role model later on. As you see I would have different Uses, \u2018<strong>Employee</strong>\u2019, \u2018<strong>Job Seekers</strong>\u2019, \u2018<strong>Founders</strong>\u2019, \u2018<strong>Investors</strong>\u2019, \u2026.etc and other interactions.  </p>\n\n<p>Job seekers would be able to create Notes, Blog posts, and News <strong>but NOT</strong> create a job post or Marketing Campaign. While Founders would do everything.</p>\n\n<p>I\u2019m having problem with the following:</p>\n\n<ul>\n<li>Am I using the right associations? I know naming table is important, does Role fits the requirements? </li>\n<li>How to construct Companies, Users, and Roles controllers and views. </li>\n</ul>\n\n<p>I want to show: </p>\n\n<ul>\n<li>All Companies from all users.</li>\n<li>Companies from specific User (Employees/ investors/ founders)</li>\n<li>All Founders profile.(either user show method or a separate profile model) </li>\n<li>All Investors. </li>\n<li>All job seekers. </li>\n</ul>\n\n<p><strong>UPDATE</strong></p>\n\n<p><code>companies_controller.rb</code>\nWhere I'm having problem with retrieving <code>users companies</code> and <code>companies users or user</code>.</p>\n\n<pre><code>class CompaniesController &lt; ApplicationController\n  before_action :authenticate_user!, only: %i[new create edit update destroy]\n  before_action :assign_company, except: %i[new create index]\n\n  def index\n    @companies = Company.all\n  end\n\n  def show\n  end\n\n  def new\n    @company = current_user.companies.build\n  end\n\n  def create\n    @company = current_user.companies.build(company_params)\n    if @company.save\n      redirect_to company_path(@company), notice: \"Saved...\"\n    else\n      render :new\n    end\n  end\n\n  def edit\n    return redirect_to company_path if current_user.id == @company.user.id\n    render :edit\n  end\n\n  def update\n    @company.update(company_params)\n    return redirect_to company_path(@company) if @company.save\n    render :edit\n  end\n\n\n  def destroy\n    @company.destroy\n    redirect_to companies_path, notice: 'Company was successfully destroyed.'\n  end\n\n\n  private\n    def assign_company\n      @company = Company.find(params[:id])\n    end\n\n    def company_params\n      params.require(:company).permit(:name, :description, :roles)\n    end\nend\n</code></pre>\n\n<p>I feel it is an easy to accomplish and I feel I over complicated it. Am I?\nI would appreciate your input and helping me on understanding the best work fellow.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["arrays", "ruby", "string"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1519149796, "post_id": 48891292, "comment_id": 84788432, "body": "<code>indexArray.push [$`.size]</code> pushes <i>another array</i> onto <code>indexArray</code>, so you end up with something like <code>[[0],[2],[3],[4],[5],[6]]</code>. You probably want <code>indexArray.push $`.size</code>."}, {"owner": {"reputation": 165, "user_id": 9164069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3a76cf933419cf5da005cdc3cc771d5?s=128&d=identicon&r=PG&f=1", "display_name": "neznidalibor", "link": "https://stackoverflow.com/users/9164069/neznidalibor"}, "edited": false, "score": 0, "creation_date": 1519151587, "post_id": 48891292, "comment_id": 84789433, "body": "Adding an example would help quite a bit in solving this since it would allow us to see what you&#39;re trying to achieve."}, {"owner": {"reputation": 183, "user_id": 5662649, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c66fd33748de9a2bcc009f8cf1316ecd?s=128&d=identicon&r=PG&f=1", "display_name": "Lyres", "link": "https://stackoverflow.com/users/5662649/lyres"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1519151727, "post_id": 48891292, "comment_id": 84789529, "body": "Not at my machine right now but thank you @Stefan! This is most likely the solution"}, {"owner": {"reputation": 183, "user_id": 5662649, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c66fd33748de9a2bcc009f8cf1316ecd?s=128&d=identicon&r=PG&f=1", "display_name": "Lyres", "link": "https://stackoverflow.com/users/5662649/lyres"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1519156176, "post_id": 48891292, "comment_id": 84791789, "body": "I confirm that was the solution. Thank you @Stefan"}, {"owner": {"reputation": 598, "user_id": 5866447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GMv8H.jpg?s=128&g=1", "display_name": "sxm1972", "link": "https://stackoverflow.com/users/5866447/sxm1972"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1519183332, "post_id": 48891292, "comment_id": 84800904, "body": "@Stefan can you please make an answer out of your comment so this question can be closed?"}], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 2, "last_activity_date": 1519196804, "creation_date": 1519196804, "answer_id": 48899964, "question_id": 48891292, "link": "https://stackoverflow.com/questions/48891292/finding-a-character-in-a-string-using-an-index-array/48899964#48899964", "title": "Finding a character in a string using an index array", "body": "<p>First of all, you should use <code>snake_case</code> instead of <code>camelCase</code> for method names and variables. The following code is changed accordingly.</p>\n\n<p>This line:</p>\n\n<pre><code>index_array.push [$`.size]\n</code></pre>\n\n<p>will create a new array with a single element <code>$`.size</code> and push that onto <code>index_array</code>.</p>\n\n<p>You'll end up with a nested array like this: (you can inspect the array via <code>p index_array</code>)</p>\n\n<pre><code>index_array #=&gt; [[0], [2], [3], [4], [5], [6]]\n</code></pre>\n\n<p>This can be easily fixed by just pushing <code>$`.size</code> (without the array):</p>\n\n<pre><code>index_array.push $`.size\n</code></pre>\n\n<p>Furthermore, your code can be simplified:</p>\n\n<pre><code>index_array = my_string.to_enum(:scan, /\\n/).map { $`.size }\n</code></pre>\n\n<ul>\n<li><code>map</code> already returns an array containing the elements returned by the given block.</li>\n<li>the capture group around <code>\\n</code> is not used and therefore not needed.</li>\n<li>the <code>i</code> flag is superfluous because there's only one <code>\\n</code>.</li>\n</ul>\n"}], "owner": {"reputation": 183, "user_id": 5662649, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c66fd33748de9a2bcc009f8cf1316ecd?s=128&d=identicon&r=PG&f=1", "display_name": "Lyres", "link": "https://stackoverflow.com/users/5662649/lyres"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 1, "accepted_answer_id": 48899964, "answer_count": 1, "score": 0, "last_activity_date": 1519200478, "creation_date": 1519148775, "last_edit_date": 1519200478, "question_id": 48891292, "link": "https://stackoverflow.com/questions/48891292/finding-a-character-in-a-string-using-an-index-array", "title": "Finding a character in a string using an index array", "body": "<p>I have a string to parse. I managed to use a method to find the indices of a substring. Here's the code:</p>\n\n<pre><code>indexArray = []\nmyString.to_enum(:scan, /(\\n)/i).map do\n  indexArray.push [$`.size]                                         #`\nend\n#indexArray = [0,2,3,4,5,6]\nmyString[indexArray[1]] # =&gt; no implicit conversion of Array into Integer (TypeError)\n</code></pre>\n\n<p>I tried using <code>to_i</code>, but it seems like broken logic. Any insight is appreciated. If I uncomment the second to the last line, making <code>indexArray</code> an array of integers, it works. I am wondering why I can get a character at an index using a basic array, but not the array derived from this method.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1519145582, "post_id": 48890227, "comment_id": 84785885, "body": "Use indirect associations. <a href=\"http://guides.rubyonrails.org/association_basics.html#the-has-one-through-association\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 2, "last_activity_date": 1519164258, "creation_date": 1519164258, "answer_id": 48894994, "question_id": 48890227, "link": "https://stackoverflow.com/questions/48890227/querying-through-four-models-in-rails/48894994#48894994", "title": "Querying through four models in Rails", "body": "<p>Assuming </p>\n\n<pre><code>class Audit\n  belongs_to :content_body\nend\nclass ContentBody\n  belongs_to :document\nend\nclass Document\n  belongs_to :project\nend \n</code></pre>\n\n<p>Then </p>\n\n<pre><code>@audits = Audit.joins(content_body: { document: :project })\n            .where(projects: {id: some_id })\n            .order(created_at: :desc) \n</code></pre>\n\n<p>Or </p>\n\n<pre><code>@audits = Audit.joins(content_body: :document)\n            .where(documents: {project_id: some_id })\n            .order(created_at: :desc)  \n</code></pre>\n\n<p>Should do the trick. As for the order you did not specify what column exactly descending should be based on so I assumed <code>created_at</code></p>\n"}], "owner": {"reputation": 6105, "user_id": 1700874, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad36477949cfd7db659cd4420537911c?s=128&d=identicon&r=PG&f=1", "display_name": "The Whiz of Oz", "link": "https://stackoverflow.com/users/1700874/the-whiz-of-oz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519164258, "creation_date": 1519145265, "question_id": 48890227, "link": "https://stackoverflow.com/questions/48890227/querying-through-four-models-in-rails", "title": "Querying through four models in Rails", "body": "<p>My relationships are set up like this: </p>\n\n<p>A <code>Project</code> <code>has_many</code> documents</p>\n\n<p>A <code>Document</code> <code>has_one</code> content_body</p>\n\n<p><code>ContentBody</code> <code>has_many</code> audits</p>\n\n<p>I need to retrieve the Audits having only a project id in a descending order. </p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1519144353, "post_id": 48889894, "comment_id": 84785028, "body": "<code>output_file.reduce(&amp;:merge)</code>?"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1519144571, "post_id": 48889894, "comment_id": 84785176, "body": "even better!  Thanks @mudasobwa"}, {"owner": {"reputation": 187, "user_id": 7000824, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/18f5b8d948e80daa67a21058927b3850?s=128&d=identicon&r=PG&f=1", "display_name": "Catalina Cenan", "link": "https://stackoverflow.com/users/7000824/catalina-cenan"}, "edited": false, "score": 0, "creation_date": 1519144767, "post_id": 48889894, "comment_id": 84785293, "body": "Looks pretty simple but in my case what is output_file? it will be atr &lt;&lt; node.reduce(&amp;:merge) ?"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "reply_to_user": {"reputation": 187, "user_id": 7000824, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/18f5b8d948e80daa67a21058927b3850?s=128&d=identicon&r=PG&f=1", "display_name": "Catalina Cenan", "link": "https://stackoverflow.com/users/7000824/catalina-cenan"}, "edited": false, "score": 0, "creation_date": 1519145067, "post_id": 48889894, "comment_id": 84785502, "body": "@CatalinaCenan, I named it that from your comment: <code>The output file looks like:</code>"}], "tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": true, "score": 1, "last_activity_date": 1519149497, "last_edit_date": 1519149497, "creation_date": 1519144247, "answer_id": 48889894, "question_id": 48889784, "link": "https://stackoverflow.com/questions/48889784/merge-two-or-more-hashes-from-array-in-one-json-file/48889894#48889894", "title": "merge two or more hashes from array in one json file", "body": "<pre><code>output_file = [{\"haproxy\"=&gt;{\"app_server_role\"=&gt;[\"s1\", \"s2\"]}}, {\"apache\"=&gt;{\"listen_ports\"=&gt;[\"80\", \"443\"]}}, {\"tags\"=&gt;[]}]\n\noutput_file.each_with_object({}) { |h, h2| h2.merge!(h) }\n =&gt; {\"haproxy\"=&gt;{\"app_server_role\"=&gt;[\"s1\", \"s2\"]}, \"apache\"=&gt;{\"listen_ports\"=&gt;[\"80\", \"443\"]}, \"tags\"=&gt;[]}\n</code></pre>\n\n<p>another great option suggested by mudasobwa:</p>\n\n<pre><code>output_file.reduce(&amp;:merge)\n</code></pre>\n"}], "owner": {"reputation": 187, "user_id": 7000824, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/18f5b8d948e80daa67a21058927b3850?s=128&d=identicon&r=PG&f=1", "display_name": "Catalina Cenan", "link": "https://stackoverflow.com/users/7000824/catalina-cenan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 48889894, "answer_count": 1, "score": 0, "last_activity_date": 1519149497, "creation_date": 1519143894, "question_id": 48889784, "link": "https://stackoverflow.com/questions/48889784/merge-two-or-more-hashes-from-array-in-one-json-file", "title": "merge two or more hashes from array in one json file", "body": "<p>The issue that I'm facing is when I'm trying to automate a terraform script for bootstrap VMs. I keep all the templates in json files and depending on instance it will take one, two or more templates to create the node json file.\nMy code looks like:</p>\n\n<pre><code>template.each do |t|\n  node = JSON.parse(File.read(\"./terraform/node/#{t}.json\"))\n  atr &lt;&lt; node.each { |k, v| puts \"#{k}: #{v}\" }\n  concatenated = atr.flatten\n  temp = concatenated  \n  File.open(\"./terraform/node/#{instance_name}.json\",\"w\") do |f|\n    f.puts JSON.pretty_generate(temp)\n  end\nend\n</code></pre>\n\n<p>The output file looks like:</p>\n\n<pre><code>[{\"haproxy\"=&gt;{\"app_server_role\"=&gt;[\"s1\", \"s2\"]}}, {\"apache\"=&gt;{\"listen_ports\"=&gt;[\"80\", \"443\"]}}, {\"tags\"=&gt;[]}]\n</code></pre>\n\n<p>The issue is that inside the array we have the exact template stored in erb :</p>\n\n<pre><code>{\"haproxy\"=&gt;{\"app_server_role\"=&gt;[\"s1\", \"s2\"]}}\n{\"tags\"=&gt;[]} ...\n</code></pre>\n\n<p>What I want is a valid json with the content of templates like:</p>\n\n<pre><code> {\"haproxy\"=&gt;{\"app_server_role\"=&gt;[\"s1\", \"s2\"]}, \"apache\"=&gt;{\"listen_ports\"=&gt;[\"80\", \"443\"]}, {\"tags\"=&gt;[]}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1519142775, "post_id": 48889279, "comment_id": 84783957, "body": "Sounds as though you&#39;re looking to use a <b>composite primary key</b>. Perhaps something like this? <a href=\"https://github.com/composite-primary-keys/composite_primary_keys\" rel=\"nofollow noreferrer\">github.com/composite-primary-keys/composite_primary_keys</a> Alternatively, why not just store a second database column - something like <code>user_post_number</code>? (You could add a scoped uniqueness constraint here, too.) Then look up the records by this value instead of the <code>id</code>."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1519143083, "post_id": 48889279, "comment_id": 84784173, "body": "I&#39;m not really sure why you&#39;re doing this, though... There are other ways to create &quot;friendly URLs&quot; that don&#39;t involve integers at all (e.g. use the post title), which would avoid this whole complexity."}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1519143191, "post_id": 48889279, "comment_id": 84784236, "body": "I strongly agree with @TomLord, composite primary keys are a pain (I am currently working on a huge task to remove one from our DB, it&#39;s a pain, trust me), and also using a simple <code>user_post_number</code> (integer) indexed column would do the trick. But best of all, friendly URLs like <code>&#47;user&#47;1&#47;post&#47;12-slug-of-the-post-title</code> is much more readable AND helps your ranking in the search engines."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1519143862, "post_id": 48889279, "comment_id": 84784684, "body": "Look at the URL of <i>this</i> web page, for example! It&#39;s <code>&#47;questions&#47;48889279&#47;using-ruby-on-rails-what-......</code>, not <code>users&#47;523051&#47;questions&#47;52</code>."}, {"owner": {"reputation": 2902, "user_id": 523051, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/497825ebbcb0e06c2451d3ff91d644b2?s=128&d=identicon&r=PG", "display_name": "chrickso", "link": "https://stackoverflow.com/users/523051/chrickso"}, "edited": false, "score": 0, "creation_date": 1519144093, "post_id": 48889279, "comment_id": 84784856, "body": "i&#39;m trying to mimick the stackoverflow method where /user1/post/:post_id/slug-here-is-irrelevant-and-changes-to-&zwnj;&#8203;it-will-still-enable&zwnj;&#8203;-old-urls-to-work"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1519144292, "post_id": 48889279, "comment_id": 84784994, "body": "@chrickso The description of your question is <b>not</b> mimicking StackOverflow. As I just said, the <code>post_id</code> <b>is</b> the <code>post_id</code>, not some secondary counter."}, {"owner": {"reputation": 2902, "user_id": 523051, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/497825ebbcb0e06c2451d3ff91d644b2?s=128&d=identicon&r=PG", "display_name": "chrickso", "link": "https://stackoverflow.com/users/523051/chrickso"}, "edited": false, "score": 0, "creation_date": 1519145569, "post_id": 48889279, "comment_id": 84785877, "body": "tom, my question is &quot;phase 1&quot; of getting to a SO-style of utilizing both a post id and slug, but unlike SO that just increments an id of a &quot;questions&quot; DB, i can&#39;t be having user1 get post 1 and user2&#39;s next post is post 2."}], "owner": {"reputation": 2902, "user_id": 523051, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/497825ebbcb0e06c2451d3ff91d644b2?s=128&d=identicon&r=PG", "display_name": "chrickso", "link": "https://stackoverflow.com/users/523051/chrickso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1519142242, "creation_date": 1519142242, "question_id": 48889279, "link": "https://stackoverflow.com/questions/48889279/using-ruby-on-rails-what-is-an-efficient-method-of-ordering-separate-users-post", "title": "Using Ruby on Rails, what is an efficient method of ordering separate users post_id&#39;s sequentially?", "body": "<p>My domain structure is similar to this:</p>\n\n<pre><code>www.domain.com/:user_id/post/:post_id\ni.e. www.domain.com/user1/post/1\n</code></pre>\n\n<p>I would like it to work where each user's post increments up the user's last :post_id, disregarding the actual ID of the database row, as multiple users posts will be stored there, like so:</p>\n\n<pre><code>www.domain.com/user1/post/1\nwww.domain.com/user1/post/2\n\nwww.domain.com/user2/post/1\nwww.domain.com/user2/post/2\n</code></pre>\n\n<p>I understand I will need a \"secondary_id\" column in the Post database and before committing a post to the database I will need to query the last post of the user to obtain that secondary_id to increment but I'm unsure where this logic would best reside in my app structure and what can I do to simplify/automate the process?</p>\n\n<p>Also, how can I avoid race conditions on the secondary_id if this where implemented in a team environment where users could be submitting posts in between when another user has queried for the last secondary_id to increment and the second user would error out since the other user got to that secondary_id first?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nested-forms"], "answers": [{"tags": [], "owner": {"reputation": 767, "user_id": 7985922, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9f8bcc5be5da750cd58183b5ef19c89b?s=128&d=identicon&r=PG&f=1", "display_name": "Proz1g", "link": "https://stackoverflow.com/users/7985922/proz1g"}, "is_accepted": false, "score": 1, "last_activity_date": 1519224615, "creation_date": 1519224615, "answer_id": 48908873, "question_id": 48889040, "link": "https://stackoverflow.com/questions/48889040/rails-nested-forms/48908873#48908873", "title": "Rails - Nested Forms", "body": "<p>I've found the solution. Before having the PoiDescription model I had an attribute 'description' on the Poi model and I've put a validation on that attribute. When I changed the model, I forgot to remove that validation and that was the origin of my problem.</p>\n"}], "owner": {"reputation": 767, "user_id": 7985922, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9f8bcc5be5da750cd58183b5ef19c89b?s=128&d=identicon&r=PG&f=1", "display_name": "Proz1g", "link": "https://stackoverflow.com/users/7985922/proz1g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519224615, "creation_date": 1519141564, "question_id": 48889040, "link": "https://stackoverflow.com/questions/48889040/rails-nested-forms", "title": "Rails - Nested Forms", "body": "<p>I'm having a problem with nested forms, I'm new to rails so probably I'm doing something wrong, so I hope you can help me. Thanks in advance.</p>\n\n<p>I have a model Poi (Points of Interest), a model PoiDescription and a model DescriptionType. An instance of Poi has many PoiDescriptions and a DescriptionType has many PoiDescriptions. What I want is this: when I'm creating a new Poi, I want to create multiple descriptions to it. A description has a category associated to it and there can only be one description for each category(ex: 10 categories = 10 descriptions). So here is my code:</p>\n\n<p><strong>Poi model</strong> </p>\n\n<pre><code>has_many :poi_descriptions\naccepts_nested_attributes_for :poi_descriptions\n</code></pre>\n\n<p><strong>PoiDescription model</strong></p>\n\n<pre><code>belongs_to :poi\nbelongs_to :description_type\n</code></pre>\n\n<p><strong>DescriptionType model</strong></p>\n\n<pre><code>has_many :poi_descriptions\n</code></pre>\n\n<p><strong>Poi controller</strong></p>\n\n<pre><code>def new\n  @poi = Poi.new\n  @poi.poi_descriptions.build\n  @availableType = DescriptionType.where.not(id: @poi.poi_descriptions.pluck(:description_type_id))\nend\n\ndef poi_params\n  params.require(:poi).permit(:name, :image, :longitude, :latitude, :monument_id, :beacon_id, poi_descriptions_attributes: [:description, :description_type_id, :id])\nend\n</code></pre>\n\n<p><strong>routes</strong></p>\n\n<pre><code>resources :pois do\n  resources :poi_descriptions\nend\nresources :description_types\n</code></pre>\n\n<p><strong>Poi _form</strong></p>\n\n<pre><code>&lt;%= form_with model: @poi do |f| %&gt;\n...\n  &lt;%= f.fields_for :poi_descriptions do |p| %&gt;\n    &lt;%= p.collection_select :description_type_id, @availableType,:id,:name %&gt;\n    &lt;%= p.text_area :description %&gt;\n  &lt;% end %&gt;\n...\n</code></pre>\n\n<p><strong>schema</strong></p>\n\n<pre><code>create_table \"description_types\", force: :cascade do |t|\n  t.string \"name\"\n  t.datetime \"created_at\", null: false\n  t.datetime \"updated_at\", null: false\nend\n\ncreate_table \"poi_descriptions\", force: :cascade do |t|\n  t.text \"description\"\n  t.bigint \"poi_id\"\n  t.bigint \"description_type_id\"\n  t.datetime \"created_at\", null: false\n  t.datetime \"updated_at\", null: false\n  t.index [\"description_type_id\"], name: \"index_poi_descriptions_on_description_type_id\"\n  t.index [\"poi_id\"], name: \"index_poi_descriptions_on_poi_id\"\nend\n\ncreate_table \"pois\", id: :serial, force: :cascade do |t|\n  t.text \"name\"\n  t.float \"longitude\"\n  t.float \"latitude\"\n  t.datetime \"created_at\", null: false\n  t.datetime \"updated_at\", null: false\n  t.integer \"monument_id\"\n  t.integer \"beacon_id\"\n  t.string \"image_file_name\"\n  t.string \"image_content_type\"\n  t.integer \"image_file_size\"\n  t.datetime \"image_updated_at\"\n  t.index [\"beacon_id\"], name: \"index_pois_on_beacon_id\"\n  t.index [\"monument_id\"], name: \"index_pois_on_monument_id\"\nend\n</code></pre>\n\n<p>Now, the problem. Every time I try to create a new Poi I have this error:\n<a href=\"https://i.stack.imgur.com/XXlrw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XXlrw.png\" alt=\"enter image description here\"></a>\nDoes anyone know why this is happening? Thanks.</p>\n\n<p>P.S: Sorry for the long post :)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "floating-point", "action", "edit"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 3, "creation_date": 1519140884, "post_id": 48888781, "comment_id": 84782654, "body": "<i>Why</i> is your primary key a float?"}, {"owner": {"reputation": 107, "user_id": 8412647, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/52ec2f32c16019c1616648921848ea91?s=128&d=identicon&r=PG&f=1", "display_name": "Gunther Gib", "link": "https://stackoverflow.com/users/8412647/gunther-gib"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1519141132, "post_id": 48888781, "comment_id": 84782826, "body": "@JordanRunning Thing is its like a version column, ex 1.0023."}, {"owner": {"reputation": 107, "user_id": 8412647, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/52ec2f32c16019c1616648921848ea91?s=128&d=identicon&r=PG&f=1", "display_name": "Gunther Gib", "link": "https://stackoverflow.com/users/8412647/gunther-gib"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1519141163, "post_id": 48888781, "comment_id": 84782842, "body": "And i cant make changes to the database"}, {"owner": {"reputation": 107, "user_id": 8412647, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/52ec2f32c16019c1616648921848ea91?s=128&d=identicon&r=PG&f=1", "display_name": "Gunther Gib", "link": "https://stackoverflow.com/users/8412647/gunther-gib"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1519141475, "post_id": 48888781, "comment_id": 84783045, "body": "so i cant eh?...."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1519141920, "post_id": 48888781, "comment_id": 84783355, "body": "It&#39;s really unfortunate that you can&#39;t change the database, because a float is the wrong data type for a version number, <a href=\"https://stackoverflow.com/questions/21895756/why-are-floating-point-numbers-inaccurate\">for several reasons</a>. You want a string, decimal (iif you&#39;re certain you&#39;ll only have major.minor), or even <a href=\"https://github.com/semver/semver/issues/79\" rel=\"nofollow noreferrer\">multiple integer/string columns</a>. You&#39;re not totally out of luck, though. I&#39;ll write up an answer if no one else beats me to it."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1519142711, "post_id": 48888781, "comment_id": 84783915, "body": "What database are you using?"}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 1, "creation_date": 1519142730, "post_id": 48888781, "comment_id": 84783926, "body": "Wow, I can&#39;t get my head around this code.  Where is <code>params[:SUBSYSTEM_ID]</code> defined?  It should just be <code>params[:id]</code> Can you show your <code>rake routes</code> ?"}, {"owner": {"reputation": 107, "user_id": 8412647, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/52ec2f32c16019c1616648921848ea91?s=128&d=identicon&r=PG&f=1", "display_name": "Gunther Gib", "link": "https://stackoverflow.com/users/8412647/gunther-gib"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1519142955, "post_id": 48888781, "comment_id": 84784088, "body": "@JordanRunning I tried changing it to string, still no luck. I&#39;m sure even with the change to a decimal notation i&#39;ll encounter the same problem."}, {"owner": {"reputation": 107, "user_id": 8412647, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/52ec2f32c16019c1616648921848ea91?s=128&d=identicon&r=PG&f=1", "display_name": "Gunther Gib", "link": "https://stackoverflow.com/users/8412647/gunther-gib"}, "reply_to_user": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1519143004, "post_id": 48888781, "comment_id": 84784122, "body": "@SteveTurczyn I am using an external database with all column and table name in uppercase"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1519143107, "post_id": 48888781, "comment_id": 84784189, "body": "@gundergobi that does not mean your routes will generate in this fashion try <code>params[:id]</code> instead. If you are unsure about this run rake routes and I would guess you will see routes like &quot;subsystem_tbls/:id&quot; the <code>:id</code> portion is what you are referencing"}, {"owner": {"reputation": 107, "user_id": 8412647, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/52ec2f32c16019c1616648921848ea91?s=128&d=identicon&r=PG&f=1", "display_name": "Gunther Gib", "link": "https://stackoverflow.com/users/8412647/gunther-gib"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1519143534, "post_id": 48888781, "comment_id": 84784453, "body": "@engineersmnky, i have made modifications as you have specified. Yet the same error on edit"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1519143675, "post_id": 48888781, "comment_id": 84784539, "body": "And in doing so you have proved @SteveTurczyn and my point <code>params[:SUBSYSTEM_ID]</code> should be <code>params[:id]</code> now that being said I am unsure why you have a routing issue other than it appears to be placing single quotes into your route."}, {"owner": {"reputation": 107, "user_id": 8412647, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/52ec2f32c16019c1616648921848ea91?s=128&d=identicon&r=PG&f=1", "display_name": "Gunther Gib", "link": "https://stackoverflow.com/users/8412647/gunther-gib"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1519144036, "post_id": 48888781, "comment_id": 84784810, "body": "Now its showing this: No route matches [GET] &quot;/subsystem_tbls/1.123/edit&quot; yet if i manually change the 1.123 in the url to 1 its gets into the edit page perfectly. @engineersmnky"}, {"owner": {"reputation": 107, "user_id": 8412647, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/52ec2f32c16019c1616648921848ea91?s=128&d=identicon&r=PG&f=1", "display_name": "Gunther Gib", "link": "https://stackoverflow.com/users/8412647/gunther-gib"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1519144631, "post_id": 48888781, "comment_id": 84785207, "body": "@engineersmnky my thoughts exactly. And yea since i&#39;m testing there is only one record as of now."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1519144679, "post_id": 48888781, "comment_id": 84785232, "body": "Yeah I am not sure I can help other than to suggest a schema change maybe @JordanRunning can as mentioned in a comment above"}, {"owner": {"reputation": 107, "user_id": 8412647, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/52ec2f32c16019c1616648921848ea91?s=128&d=identicon&r=PG&f=1", "display_name": "Gunther Gib", "link": "https://stackoverflow.com/users/8412647/gunther-gib"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1519144790, "post_id": 48888781, "comment_id": 84785315, "body": "I&#39;ll check with the schema change with my superiors, and @engineersmnky if you don&#39;t mind i have question for you. How hard is it to implement github style search and filtering mechanism in rails and i don&#39;t have a clue about it."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 107, "user_id": 8412647, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/52ec2f32c16019c1616648921848ea91?s=128&d=identicon&r=PG&f=1", "display_name": "Gunther Gib", "link": "https://stackoverflow.com/users/8412647/gunther-gib"}, "edited": false, "score": 0, "creation_date": 1519144863, "post_id": 48888781, "comment_id": 84785372, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/165503/discussion-between-engineersmnky-and-gunder-gobi\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 107, "user_id": 8412647, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/52ec2f32c16019c1616648921848ea91?s=128&d=identicon&r=PG&f=1", "display_name": "Gunther Gib", "link": "https://stackoverflow.com/users/8412647/gunther-gib"}, "is_accepted": true, "score": 0, "last_activity_date": 1519327277, "creation_date": 1519327277, "answer_id": 48935597, "question_id": 48888781, "link": "https://stackoverflow.com/questions/48888781/cant-perform-edit-when-primary-key-is-float/48935597#48935597", "title": "Cant perform edit when primary key is float?", "body": "<p>Any datatypes which includes a decimal point as a primary key is not suitable for rails.</p>\n"}], "owner": {"reputation": 107, "user_id": 8412647, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/52ec2f32c16019c1616648921848ea91?s=128&d=identicon&r=PG&f=1", "display_name": "Gunther Gib", "link": "https://stackoverflow.com/users/8412647/gunther-gib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 48935597, "answer_count": 1, "score": 0, "last_activity_date": 1519327277, "creation_date": 1519140754, "last_edit_date": 1519143732, "question_id": 48888781, "link": "https://stackoverflow.com/questions/48888781/cant-perform-edit-when-primary-key-is-float", "title": "Cant perform edit when primary key is float?", "body": "<p>I am using an existing external database which has primary key set has floating/double. All actions work fine except for edit.</p>\n\n<p>The error it gives is this.\nIs there a way around this or changing it to int is the only way?</p>\n\n<blockquote>\n  <p>No route matches [GET] \"/subsystem_tbls/'1.123'/edit\"</p>\n</blockquote>\n\n<h3>Routes.rb</h3>\n\n<pre><code>Rails.application.routes.draw do\n  root \"subsystem_tbls#index\"\n  resources :subsystem_tbls\n  resources :ui_types_tbls\n  resources :cmd_types_tbls\nend\n</code></pre>\n\n<h3>Controller</h3>\n\n<pre><code>class SubsystemTblsController &lt; ApplicationController\n  def index\n    @subs = SUBSYSTEM_TBL.all\n  end\n\n  def new\n    @subs = SUBSYSTEM_TBL.new\n  end\n\n  def show\n    @subs = SUBSYSTEM_TBL.find_by(params[:SUBSYSTEM_ID])\n  end\n\n  def edit\n    @subs = SUBSYSTEM_TBL.find_by(params[:SUBSYSTEM_ID])\n  end\n\n  def create\n    @subs = SUBSYSTEM_TBL.new(sub_params)\n    if @subs.save\n      redirect_to @subs\n    else\n      render 'new'\n    end\n  end\n\n  def update\n    @subs = SUBSYSTEM_TBL.find_by(params[:SUBSYSTEM_ID])\n    if @subs.update_attributes(sub_params)\n      redirect_to root_url\n    else\n      render 'edit'\n    end\n  end\n\n  def destroy\n    SUBSYSTEM_TBL.find_by(params[:SUBSYSTEM_ID]).destroy\n    redirect_to root_url\n  end\n\n  private\n\n  def sub_params\n    params.require(:subsystem_tbl).permit(:SUBSYSTEM_ID, :SUBSYSTEM_NAME)\n  end\nend\n</code></pre>\n\n<h1>Rake ROutes</h1>\n\n<pre><code>root_path   GET     /   \n\nsubsystem_tbls#index\nsubsystem_tbls_path     GET     /subsystem_tbls(.:format)   \n\nsubsystem_tbls#index\n    POST    /subsystem_tbls(.:format)   \n\nsubsystem_tbls#create\nnew_subsystem_tbl_path  GET     /subsystem_tbls/new(.:format)   \n\nsubsystem_tbls#new\nedit_subsystem_tbl_path     GET     /subsystem_tbls/:id/edit(.:format)  \n\nsubsystem_tbls#edit\nsubsystem_tbl_path  GET     /subsystem_tbls/:id(.:format)   \n\nsubsystem_tbls#show\n    PATCH   /subsystem_tbls/:id(.:format)   \n\nsubsystem_tbls#update\n    PUT     /subsystem_tbls/:id(.:format)   \n\nsubsystem_tbls#update\n    DELETE  /subsystem_tbls/:id(.:format)   \n\nsubsystem_tbls#destroy\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "exception", "exception-handling", "watir"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 2, "creation_date": 1519140417, "post_id": 48888534, "comment_id": 84782304, "body": "Fix your indentation. This makes the problem quite easy to see. Your text editor should ideally be configured to automatically set your indentation correctly."}], "answers": [{"tags": [], "owner": {"reputation": 2031, "user_id": 2337830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a378c6d6daf4fb5ec84b9079db4d5d60?s=128&d=identicon&r=PG", "display_name": "tombeynon", "link": "https://stackoverflow.com/users/2337830/tombeynon"}, "is_accepted": false, "score": 0, "last_activity_date": 1519140344, "creation_date": 1519140344, "answer_id": 48888652, "question_id": 48888534, "link": "https://stackoverflow.com/questions/48888534/rescue-exeception-marked-as-red-in-editor-were-am-i-going-wrong/48888652#48888652", "title": "rescue / exeception marked as red in editor? Were Am I going wrong", "body": "<p>Your rescue should be at the end of the <code>begin</code> block, since that's the block you're rescuing exceptions within. You're seeing an error because it can't rescue in the middle of the <code>if</code> block.</p>\n\n<pre><code>def check(up_timer)\n  limit = 0\n  begin\n    @browser.alert.wait_until_present(up_timer)\n    code if code\n  rescue Watir::Exception::TimeOutException =&gt; e\n    limit += 1\n    retry if limit &lt;= 3\n    #Add in Message for HTML Report?\n  end\nend\n</code></pre>\n\n<p>Another issue in your code is the <code>UpTimer</code> variable - Ruby is seeing that as a constant instead of a variable due to your casing. That should be <code>up_timer</code>.</p>\n"}], "owner": {"reputation": 290, "user_id": 5630536, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/aa8b05352d99138a1001a5ec186497c4?s=128&d=identicon&r=PG&f=1", "display_name": "Speedychuck", "link": "https://stackoverflow.com/users/5630536/speedychuck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1519148267, "creation_date": 1519140003, "last_edit_date": 1519148267, "question_id": 48888534, "link": "https://stackoverflow.com/questions/48888534/rescue-exeception-marked-as-red-in-editor-were-am-i-going-wrong", "title": "rescue / exeception marked as red in editor? Were Am I going wrong", "body": "<p>I have just started test automation project in ruby, however, am only used to java so trying to get the hang of ruby and I cant see where my syntax is going wrong.</p>\n\n<pre><code>rescue Watir::Exception::TimeOutException =&gt; e\n</code></pre>\n\n<p>is underlined in red, why? Unexpected keyword rescue?</p>\n\n<pre><code>def check(UpTimer)\n  limit = 0\n  begin\n    @browser.alert.wait_until_present(UpTimer)\n    if code\n      code\n    rescue Watir::Exception::TimeOutException =&gt; e\n      limit += 1\n      retry if limit &lt;= 3\n      #Add in Message for HTML Report?\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["json", "ruby", "enums", "avro"], "answers": [{"tags": [], "owner": {"reputation": 15, "user_id": 9386203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73eb6b39bed7a1d0a61aa7b21d0240da?s=128&d=identicon&r=PG&f=1", "display_name": "user265629", "link": "https://stackoverflow.com/users/9386203/user265629"}, "is_accepted": true, "score": 0, "last_activity_date": 1519200857, "creation_date": 1519200857, "answer_id": 48900942, "question_id": 48888267, "link": "https://stackoverflow.com/questions/48888267/how-to-resolve-the-datum-is-not-an-example-of-schema-avroioavrotypeerror/48900942#48900942", "title": "How to resolve The datum is not an example of schema (Avro::IO::AvroTypeError)", "body": "<p>I found the issue!</p>\n\n<p>The attribute \"IndepYear\" have nulls in database and I missed to mention the same in Avro Schema which encountered to the above error.</p>\n"}], "owner": {"reputation": 15, "user_id": 9386203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73eb6b39bed7a1d0a61aa7b21d0240da?s=128&d=identicon&r=PG&f=1", "display_name": "user265629", "link": "https://stackoverflow.com/users/9386203/user265629"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2305, "favorite_count": 0, "accepted_answer_id": 48900942, "answer_count": 1, "score": 1, "last_activity_date": 1519200857, "creation_date": 1519139260, "question_id": 48888267, "link": "https://stackoverflow.com/questions/48888267/how-to-resolve-the-datum-is-not-an-example-of-schema-avroioavrotypeerror", "title": "How to resolve The datum is not an example of schema (Avro::IO::AvroTypeError)", "body": "<p>I am a newbie to Avro with Ruby and basically to programming.</p>\n\n<p>While i was performing some basic stuff on Avro with ruby, I see some issues with the schema.\nBelow is the code.</p>\n\n<pre><code>require 'rubygems'\nrequire 'avro'  \nrequire 'mysql2' \nrequire 'json' \nrequire 'multi_json'\n\n# setup mysql\ndb = Mysql2::Client.new(:host =&gt; \"localhost\", :username =&gt;\"root\",:password=&gt; \"root\", :database =&gt; 'world')\n\nfile = File.open('C:/Avro-Spark-Inputs/Serialized_Avro/country_join.avro', 'wb')  \n\nschema = Avro::Schema.parse(File.open(\"C:/Avro-Spark-Inputs/Schema/country.avsc\", \"rb\").read)\n\nwriter = Avro::IO::DatumWriter.new(schema) \n\ndw = Avro::DataFile::Writer.new(file, writer, schema) \n\nresults = db.query(\"SELECT * FROM country\")\n\nresults.each do |row| \ndw &lt;&lt; row\nend\n\n# close the avro data file\ndw1.close   \n\nputs \"Avro File Created Succesfully\"\n</code></pre>\n\n<p>Below is the defined schema.</p>\n\n<pre><code>   {\n \"type\" : \"record\",\n \"namespace\" : \"country.avro\",\n \"name\" : \"country\",\n \"fields\" : [\n          {\"name\": \"Code\", \"type\": \"string\"},\n          {\"name\": \"Name\", \"type\": \"string\"},\n          {\"name\": \"Continent\", \"type\": {\"name\": \"Continent\", \"type\":\"enum\", \"symbols\": [\"Asia\", \"Europe\", \"North America\", \"Africa\", \"Oceania\", \"Antarctica\", \"South America\"]}},\n          {\"name\": \"Region\", \"type\": \"string\"},\n          {\"name\": \"SurfaceArea\", \"type\": \"float\"},\n          {\"name\": \"IndepYear\", \"type\": \"int\"},\n          {\"name\": \"Population\", \"type\": \"int\"},\n          {\"name\": \"LifeExpectancy\", \"type\": \"float\"},\n          {\"name\": \"GNP\", \"type\": \"float\"},\n          {\"name\": \"GNPOld\", \"type\": \"float\"},\n          {\"name\": \"LocalName\", \"type\": \"string\"},\n          {\"name\": \"GovernmentForm\", \"type\": \"string\"},\n          {\"name\": \"HeadOfState\", \"type\": \"string\"},\n          {\"name\": \"Capital\", \"type\": \"int\"},\n          {\"name\": \"Code2\", \"type\": \"string\"}\n        ]\n}\n</code></pre>\n\n<p>Error Observed:</p>\n\n<pre><code>C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/avro-1.8.2/lib/avro/io.rb:547:in `write_data': The datum {\"Code\"=&gt;\"ABW\", \"Name\"=&gt;\"Aruba\", \"Continent\"=&gt;\"North America\", \"Region\"=&gt;\"Caribbean\", \"SurfaceArea\"=&gt;193.0, \"IndepYear\"=&gt;nil, \"Population\"=&gt;103000, \"LifeExpectancy\"=&gt;78.4, \"GNP\"=&gt;828.0, \"GNPOld\"=&gt;793.0, \"LocalName\"=&gt;\"Aruba\", \"GovernmentForm\"=&gt;\"Nonmetropolitan Territory of The Netherlands\", \"HeadOfState\"=&gt;\"Beatrix\", \"Capital\"=&gt;129, \"Code2\"=&gt;\"AW\"} is not an example of schema {\"type\":\"record\",\"name\":\"country\",\"namespace\":\"country.avro\",\"fields\":[{\"name\":\"Code\",\"type\":\"string\"},{\"name\":\"Name\",\"type\":\"string\"},{\"name\":\"Continent\",\"type\":{\"type\":\"enum\",\"name\":\"Continent\",\"namespace\":\"country.avro\",\"symbols\":[\"Asia\",\"Europe\",\"North America\",\"Africa\",\"Oceania\",\"Antarctica\",\"South America\"]}},{\"name\":\"Region\",\"type\":\"string\"},{\"name\":\"SurfaceArea\",\"type\":\"float\"},{\"name\":\"IndepYear\",\"type\":\"int\"},{\"name\":\"Population\",\"type\":\"int\"},{\"name\":\"LifeExpectancy\",\"type\":\"float\"},{\"name\":\"GNP\",\"type\":\"float\"},{\"name\":\"GNPOld\",\"type\":\"float\"},{\"name\":\"LocalName\",\"type\":\"string\"},{\"name\":\"GovernmentForm\",\"type\":\"string\"},{\"name\":\"HeadOfState\",\"type\":\"string\"},{\"name\":\"Capital\",\"type\":\"int\"},{\"name\":\"Code2\",\"type\":\"string\"}]} (Avro::IO::AvroTypeError)\n    from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/avro-1.8.2/lib/avro/io.rb:542:in `write'\n    from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/avro-1.8.2/lib/avro/data_file.rb:136:in `&lt;&lt;'\n    from C:/Avro-Spark-Inputs/Serialization/Country_Serialization.rb:26:in `block in &lt;main&gt;'\n    from C:/Avro-Spark-Inputs/Serialization/Country_Serialization.rb:25:in `each'\n    from C:/Avro-Spark-Inputs/Serialization/Country_Serialization.rb:25:in `&lt;main&gt;'\n</code></pre>\n\n<p>I am stuck here and couldn't find any answers online(Must be a silly question to ask). </p>\n"}, {"tags": ["ruby", "datetime"], "answers": [{"comments": [{"owner": {"reputation": 2512, "user_id": 1050389, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/9544928845a390ba53444700e96064b4?s=128&d=identicon&r=PG", "display_name": "aclowkay", "link": "https://stackoverflow.com/users/1050389/aclowkay"}, "edited": false, "score": 0, "creation_date": 1519140630, "post_id": 48887819, "comment_id": 84782473, "body": "next_month works! Thanks for useful link of documentation"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 9, "last_activity_date": 1519138826, "last_edit_date": 1519138826, "creation_date": 1519137786, "answer_id": 48887819, "question_id": 48887736, "link": "https://stackoverflow.com/questions/48887736/how-to-subtract-n-months-from-a-datetime-in-ruby/48887819#48887819", "title": "How to subtract n months from a DateTime in Ruby?", "body": "<p>Since <code>DateTime</code> is a subclass of <code>Date</code>, you can use <a href=\"http://ruby-doc.org/stdlib-2.5.0/libdoc/date/rdoc/Date.html#method-i-3C-3C\" rel=\"noreferrer\"><code>&lt;&lt;</code></a> or <a href=\"http://ruby-doc.org/stdlib-2.5.0/libdoc/date/rdoc/Date.html#method-i-prev_month\" rel=\"noreferrer\"><code>prev_month</code></a>:</p>\n\n<pre><code>require 'date'\n\nd = DateTime.now    #=&gt; #&lt;DateTime: 2018-02-20T15:39:44+01:00 ...&gt;\nd &lt;&lt; 4              #=&gt; #&lt;DateTime: 2017-10-20T15:39:44+01:00 ...&gt;\nd.prev_month(4)     #=&gt; #&lt;DateTime: 2017-10-20T15:39:44+01:00 ...&gt;\n</code></pre>\n\n<p>Note that <code>DateTime</code> doesn't account for daylight savings time.</p>\n"}], "owner": {"reputation": 2512, "user_id": 1050389, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/9544928845a390ba53444700e96064b4?s=128&d=identicon&r=PG", "display_name": "aclowkay", "link": "https://stackoverflow.com/users/1050389/aclowkay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1982, "favorite_count": 0, "accepted_answer_id": 48887819, "answer_count": 1, "score": 6, "last_activity_date": 1519139481, "creation_date": 1519137561, "last_edit_date": 1519137954, "question_id": 48887736, "link": "https://stackoverflow.com/questions/48887736/how-to-subtract-n-months-from-a-datetime-in-ruby", "title": "How to subtract n months from a DateTime in Ruby?", "body": "<p>I'm new in ruby and date arithmetics seems confusing.</p>\n\n<p>How can I remove <em>n</em> months from a <code>DateTime</code> without using any other modules?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1519131464, "post_id": 48885788, "comment_id": 84776228, "body": "I literally have no idea what is being asked here. But the code looks okey-ish."}, {"owner": {"reputation": 663, "user_id": 8282168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba492cef39f592a7e738a4d3a70b8bab?s=128&d=identicon&r=PG&f=1", "display_name": "L_Church", "link": "https://stackoverflow.com/users/8282168/l-church"}, "edited": false, "score": 0, "creation_date": 1519131533, "post_id": 48885788, "comment_id": 84776272, "body": "i think hes trying to get us to debug his code or ask why the output is what it is"}, {"owner": {"reputation": 710, "user_id": 3685411, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/651824110/picture?type=large", "display_name": "Snoobie", "link": "https://stackoverflow.com/users/3685411/snoobie"}, "edited": false, "score": 0, "creation_date": 1519131644, "post_id": 48885788, "comment_id": 84776339, "body": "In this example, you just asking to output the class by <code>puts valores  </code>. So you can do <code>puts valores.as_json</code> to access to the variable inside your class or <code>valores. teste1</code> to get the value of your  <code>@variavel1</code>"}, {"owner": {"reputation": 663, "user_id": 8282168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba492cef39f592a7e738a4d3a70b8bab?s=128&d=identicon&r=PG&f=1", "display_name": "L_Church", "link": "https://stackoverflow.com/users/8282168/l-church"}, "edited": false, "score": 1, "creation_date": 1519131708, "post_id": 48885788, "comment_id": 84776383, "body": "this is stuff he could just google lol or maybe actually look at ruby docs"}, {"owner": {"reputation": 105, "user_id": 7904441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10695b72a21e81c694020dcb419cb52e?s=128&d=identicon&r=PG&f=1", "display_name": "Anderson N. Barbosa", "link": "https://stackoverflow.com/users/7904441/anderson-n-barbosa"}, "edited": false, "score": 0, "creation_date": 1519133071, "post_id": 48885788, "comment_id": 84777358, "body": "Snoobie, put valores.as_json did not help. However, values.test1 came to the result I wanted. Thank you very much.  Sergio Tulentsev, thanks for the feedback.  L_Church, thanks for the debug tip. I&#39;m going to study about it."}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 7904441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10695b72a21e81c694020dcb419cb52e?s=128&d=identicon&r=PG&f=1", "display_name": "Anderson N. Barbosa", "link": "https://stackoverflow.com/users/7904441/anderson-n-barbosa"}, "edited": false, "score": 0, "creation_date": 1519133000, "post_id": 48885886, "comment_id": 84777314, "body": "Makushimaru, thank you very much. I enjoyed learning about .inspect. In addition, valores.test1 and valores.teste2 worked perfectly, it was this result that I wanted."}, {"owner": {"reputation": 96, "user_id": 8086571, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hF7EH.png?s=128&g=1", "display_name": "Makushimaru", "link": "https://stackoverflow.com/users/8086571/makushimaru"}, "reply_to_user": {"reputation": 105, "user_id": 7904441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10695b72a21e81c694020dcb419cb52e?s=128&d=identicon&r=PG&f=1", "display_name": "Anderson N. Barbosa", "link": "https://stackoverflow.com/users/7904441/anderson-n-barbosa"}, "edited": false, "score": 0, "creation_date": 1519133480, "post_id": 48885886, "comment_id": 84777610, "body": "No problem ! Have fun :)"}], "tags": [], "owner": {"reputation": 96, "user_id": 8086571, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hF7EH.png?s=128&g=1", "display_name": "Makushimaru", "link": "https://stackoverflow.com/users/8086571/makushimaru"}, "is_accepted": true, "score": 0, "last_activity_date": 1519132010, "last_edit_date": 1519132010, "creation_date": 1519131655, "answer_id": 48885886, "question_id": 48885788, "link": "https://stackoverflow.com/questions/48885788/simple-script-with-error-in-output-ruby-language/48885886#48885886", "title": "Simple script with Error in output - Ruby language", "body": "<p>By doing the following:</p>\n\n<pre><code>valores = Contagem.new(valor1,valor2)\nputs valores\n</code></pre>\n\n<p>You ask Ruby to print your Object valores which gives you:</p>\n\n<pre><code>#&lt;Contagem:0x0000000190c148&gt;\n</code></pre>\n\n<p>You can see more details by doing:</p>\n\n<pre><code>puts valores.inspect\n</code></pre>\n\n<p>But if you want to print the value, just call the functions you made:</p>\n\n<pre><code>puts valores.teste1\nputs valores.teste2\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105, "user_id": 7904441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10695b72a21e81c694020dcb419cb52e?s=128&d=identicon&r=PG&f=1", "display_name": "Anderson N. Barbosa", "link": "https://stackoverflow.com/users/7904441/anderson-n-barbosa"}, "edited": false, "score": 0, "creation_date": 1519133031, "post_id": 48885915, "comment_id": 84777333, "body": "mbuechmann, thank you very much for the class. This tip is perfect."}, {"owner": {"reputation": 4420, "user_id": 1360318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60c954665247aae8de274c26e843867?s=128&d=identicon&r=PG", "display_name": "mbuechmann", "link": "https://stackoverflow.com/users/1360318/mbuechmann"}, "reply_to_user": {"reputation": 105, "user_id": 7904441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10695b72a21e81c694020dcb419cb52e?s=128&d=identicon&r=PG&f=1", "display_name": "Anderson N. Barbosa", "link": "https://stackoverflow.com/users/7904441/anderson-n-barbosa"}, "edited": false, "score": 0, "creation_date": 1519135212, "post_id": 48885915, "comment_id": 84778705, "body": "As @Makushimaru pointed out the <code>inspect</code> method is handy, too."}], "tags": [], "owner": {"reputation": 4420, "user_id": 1360318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60c954665247aae8de274c26e843867?s=128&d=identicon&r=PG", "display_name": "mbuechmann", "link": "https://stackoverflow.com/users/1360318/mbuechmann"}, "is_accepted": false, "score": 0, "last_activity_date": 1519131763, "creation_date": 1519131763, "answer_id": 48885915, "question_id": 48885788, "link": "https://stackoverflow.com/questions/48885788/simple-script-with-error-in-output-ruby-language/48885915#48885915", "title": "Simple script with Error in output - Ruby language", "body": "<p>The output you see is not an error but an internal representation of the object in ruby.</p>\n\n<p>To improve the output you could define the <code>to_s</code> instance method. In this method you build and return a string that has an output to your liking. E.g.:</p>\n\n<pre><code>class Contagem\n  def to_s\n    sprintf(\"variavel1: %d, variavel2: %d\", @variavel1, @variavel2) \n  end\nend\n</code></pre>\n\n<p>This is assuming that @variavel1 and @variavel2 are ints.</p>\n"}], "owner": {"reputation": 105, "user_id": 7904441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10695b72a21e81c694020dcb419cb52e?s=128&d=identicon&r=PG&f=1", "display_name": "Anderson N. Barbosa", "link": "https://stackoverflow.com/users/7904441/anderson-n-barbosa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 48885886, "answer_count": 2, "score": -3, "last_activity_date": 1519132010, "creation_date": 1519131338, "question_id": 48885788, "link": "https://stackoverflow.com/questions/48885788/simple-script-with-error-in-output-ruby-language", "title": "Simple script with Error in output - Ruby language", "body": "<p>I'm starting in ruby language and I have the following problem:\n\"Look at the script below and see the output he's giving me (meaningless to me). I do not know if there are any mistakes in writing but I do not think so. Anyone have any suggestions for what's going on?\"\nNote: ruby 2.3.1p112 (2016-04-26) [x86_64-linux-gnu]</p>\n\n<pre><code>class Contagem\n    def initialize(x,y)\n        @variavel1 = x\n        @variavel2 = y\n    end\n\n    def teste1\n        return @variavel1\n    end\n\n    def teste2\n        return @variavel2\n    end\nend\n\nvalor1 = 1\nvalor2 = 2\n\nvalores = Contagem.new(valor1,valor2)\nputs valores\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>#&lt;Contagem:0x0000000190c148&gt;\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-5", "actionmailer"], "comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 1, "creation_date": 1519131742, "post_id": 48885749, "comment_id": 84776407, "body": "You&#39;re not &quot;missing&quot; anything, you seem to be aware of the problem and its solution: &quot;Mailer file name and class name are different&quot;."}, {"owner": {"reputation": 19, "user_id": 4804920, "user_type": "registered", "profile_image": "https://graph.facebook.com/1656460467909439/picture?type=large", "display_name": "Waqar Hassan", "link": "https://stackoverflow.com/users/4804920/waqar-hassan"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1519132244, "post_id": 48885749, "comment_id": 84776777, "body": "This is a legacy code used as API. I can not modify it.  I need a workaround to access <code>ReportUserMailer</code> class without changing filename."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1519143382, "post_id": 48885749, "comment_id": 84784350, "body": "@WaqarHassan what do you mean you can&#39;t modify it aren&#39;t you working on it? Doesn&#39;t that require modification? you can always <code>require</code> the file in the <code>UserController</code>. e.g. <code>require Rails.root.join(&#39;app&#39;,&#39;mailers&#39;,&#39;report_mailer.rb&#39;)</code>"}, {"owner": {"reputation": 19, "user_id": 4804920, "user_type": "registered", "profile_image": "https://graph.facebook.com/1656460467909439/picture?type=large", "display_name": "Waqar Hassan", "link": "https://stackoverflow.com/users/4804920/waqar-hassan"}, "edited": false, "score": 0, "creation_date": 1519191661, "post_id": 48885749, "comment_id": 84803055, "body": "<code>require</code> was what I needed. Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 4804920, "user_type": "registered", "profile_image": "https://graph.facebook.com/1656460467909439/picture?type=large", "display_name": "Waqar Hassan", "link": "https://stackoverflow.com/users/4804920/waqar-hassan"}, "edited": false, "score": 0, "creation_date": 1519132295, "post_id": 48885872, "comment_id": 84776817, "body": "It is legacy code being already used as API. So, I can&#39;t modify it."}, {"owner": {"reputation": 1266, "user_id": 6022100, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/dc0adea29934c8ee1c31f96bf85a7fbc?s=128&d=identicon&r=PG", "display_name": "rwold", "link": "https://stackoverflow.com/users/6022100/rwold"}, "reply_to_user": {"reputation": 19, "user_id": 4804920, "user_type": "registered", "profile_image": "https://graph.facebook.com/1656460467909439/picture?type=large", "display_name": "Waqar Hassan", "link": "https://stackoverflow.com/users/4804920/waqar-hassan"}, "edited": false, "score": 0, "creation_date": 1519133763, "post_id": 48885872, "comment_id": 84777788, "body": "Ok, so if it wasn&#39;t clear from my post, I&#39;ve edited it with an example."}, {"owner": {"reputation": 19, "user_id": 4804920, "user_type": "registered", "profile_image": "https://graph.facebook.com/1656460467909439/picture?type=large", "display_name": "Waqar Hassan", "link": "https://stackoverflow.com/users/4804920/waqar-hassan"}, "edited": false, "score": 0, "creation_date": 1519191515, "post_id": 48885872, "comment_id": 84803008, "body": "Thanks. <code>require</code> worked."}], "tags": [], "owner": {"reputation": 1266, "user_id": 6022100, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/dc0adea29934c8ee1c31f96bf85a7fbc?s=128&d=identicon&r=PG", "display_name": "rwold", "link": "https://stackoverflow.com/users/6022100/rwold"}, "is_accepted": true, "score": 1, "last_activity_date": 1519225055, "last_edit_date": 1519225055, "creation_date": 1519131626, "answer_id": 48885872, "question_id": 48885749, "link": "https://stackoverflow.com/questions/48885749/ruby-on-rails-uninitialized-constant-usercontrollerreportusermailer/48885872#48885872", "title": "Ruby on Rails: uninitialized constant UserController::ReportUserMailer", "body": "<p>Rails expects the file to be named <code>report_user_mailer.rb</code>. If can't you modify the file name (why?) you'll need to manually <code>require</code> the file <code>mailers/app/report_mailer.rb</code>, like this: </p>\n\n<pre><code>class SomeClass &lt; ActiveRecord\n\n require \"#{RAILS_ROOT}/mailers/report_mailer.rb\"\n\n#your code that uses the ReportUserMailer class\nend\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 4804920, "user_type": "registered", "profile_image": "https://graph.facebook.com/1656460467909439/picture?type=large", "display_name": "Waqar Hassan", "link": "https://stackoverflow.com/users/4804920/waqar-hassan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 560, "favorite_count": 0, "closed_date": 1519131717, "accepted_answer_id": 48885872, "answer_count": 1, "score": -3, "last_activity_date": 1519225055, "creation_date": 1519131227, "last_edit_date": 1519132477, "question_id": 48885749, "link": "https://stackoverflow.com/questions/48885749/ruby-on-rails-uninitialized-constant-usercontrollerreportusermailer", "closed_reason": "Needs details or clarity", "title": "Ruby on Rails: uninitialized constant UserController::ReportUserMailer", "body": "<p>I have following method is <strong>UserController</strong> </p>\n\n<pre><code>def report_user\n  current_user = User.find_by(id: params[:id])\n  unless current_user.nil?\n    ReportUserMailer.report_user_email(user, params).deliver_now\n  end\n  respond_to do |format|\n    format.js\n  end\nend\n</code></pre>\n\n<p>And in <strong>mailers/report_mailer.rb</strong> . I have following code.</p>\n\n<pre><code>class ReportUserMailer &lt; ApplicationMailer\n\n   layout \"layouts/mailer\"\n\n  def report_user_email(currentUser, params)\n    @user = currentUser\n    @first_name = params[:first_name]\n    @last_name = params[:last_name]\n    @email = params[:current_user_email]\n    @report_user_first_name = params[:report_user_first_name]\n    @report_user_id = params[:report_user_id]\n    @message = params[:message]\n    if Rails.env.production?\n      mail(to: \"something@email.com\", subject: \"User Report\")\n    else\n      mail(to: \"something@email.com\", subject: \"User Report \")\n    end\n  end\nend\n</code></pre>\n\n<p>When I make a post request to UserConroller. I get following error.</p>\n\n<blockquote>\n  <p>NameError (uninitialized constant UserController::ReportUserMailer):</p>\n</blockquote>\n\n<p>Mailer file name and class name are different but I can't modify file name or mailer code.</p>\n\n<p>What am I missing here?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I can't modify the code as It is already being used as API.\nI need a workaround to call mailer class without changing file name. </p>\n"}, {"tags": ["ruby", "markdown", "redcarpet", "readme"], "comments": [{"owner": {"reputation": 24616, "user_id": 866026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96fae8527632d33d7bf929fada83e8d1?s=128&d=identicon&r=PG", "display_name": "Waylan", "link": "https://stackoverflow.com/users/866026/waylan"}, "edited": false, "score": 0, "creation_date": 1519145730, "post_id": 48885559, "comment_id": 84786002, "body": "What do you mean by &quot;looks pretty&quot;? Sounds like you might need to define some CSS rules."}, {"owner": {"reputation": 24616, "user_id": 866026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96fae8527632d33d7bf929fada83e8d1?s=128&d=identicon&r=PG", "display_name": "Waylan", "link": "https://stackoverflow.com/users/866026/waylan"}, "edited": false, "score": 0, "creation_date": 1519146123, "post_id": 48885559, "comment_id": 84786249, "body": "If this is an issue of needing to define CSS, then this could be a duplicate of <a href=\"https://stackoverflow.com/q/43757300/866026\">How to apply style for the inbuilt markdown tags?</a>"}, {"owner": {"reputation": 24616, "user_id": 866026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96fae8527632d33d7bf929fada83e8d1?s=128&d=identicon&r=PG", "display_name": "Waylan", "link": "https://stackoverflow.com/users/866026/waylan"}, "edited": false, "score": 0, "creation_date": 1519146171, "post_id": 48885559, "comment_id": 84786277, "body": "See also, <a href=\"https://stackoverflow.com/q/35465557/866026\">How to apply color in Markdown</a>."}, {"owner": {"reputation": 551, "user_id": 3681793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a23b03da4efe057f090c33cae367f09?s=128&d=identicon&r=PG", "display_name": "bonafernando", "link": "https://stackoverflow.com/users/3681793/bonafernando"}, "reply_to_user": {"reputation": 24616, "user_id": 866026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96fae8527632d33d7bf929fada83e8d1?s=128&d=identicon&r=PG", "display_name": "Waylan", "link": "https://stackoverflow.com/users/866026/waylan"}, "edited": false, "score": 0, "creation_date": 1519156078, "post_id": 48885559, "comment_id": 84791728, "body": "Thanks for the comments, you lead me to more investigation and I&#39;ve edited the question adding more information."}, {"owner": {"reputation": 24616, "user_id": 866026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96fae8527632d33d7bf929fada83e8d1?s=128&d=identicon&r=PG", "display_name": "Waylan", "link": "https://stackoverflow.com/users/866026/waylan"}, "edited": false, "score": 0, "creation_date": 1519157239, "post_id": 48885559, "comment_id": 84792340, "body": "Ah, you appear to be missing two pieces: Fenced code blocks are non-standard (you may need to enable them or use a different Markdown parser) and syntax highlighting (usually handled separately from Markdown)."}], "answers": [{"comments": [{"owner": {"reputation": 551, "user_id": 3681793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a23b03da4efe057f090c33cae367f09?s=128&d=identicon&r=PG", "display_name": "bonafernando", "link": "https://stackoverflow.com/users/3681793/bonafernando"}, "edited": false, "score": 0, "creation_date": 1519156050, "post_id": 48886001, "comment_id": 84791711, "body": "Thanks, your comment lead me to more investigation and I&#39;ve edited the question adding more information."}], "tags": [], "owner": {"reputation": 2072, "user_id": 853065, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aa14452cb8fbbc5b22c10c567ce710d8?s=128&d=identicon&r=PG", "display_name": "yoones", "link": "https://stackoverflow.com/users/853065/yoones"}, "is_accepted": false, "score": 1, "last_activity_date": 1519132017, "creation_date": 1519132017, "answer_id": 48886001, "question_id": 48885559, "link": "https://stackoverflow.com/questions/48885559/ruby-how-to-generate-html-from-markdown-like-githubs-or-bitbuckets/48886001#48886001", "title": "Ruby: how to generate HTML from Markdown like GitHub&#39;s or BitBucket&#39;s?", "body": "<p>Github provides its own ruby gem to do so: <a href=\"https://github.com/github/markup\" rel=\"nofollow noreferrer\">https://github.com/github/markup</a>.\nYou just need to install the right dependencies and you're good to go.</p>\n"}, {"comments": [{"owner": {"reputation": 551, "user_id": 3681793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a23b03da4efe057f090c33cae367f09?s=128&d=identicon&r=PG", "display_name": "bonafernando", "link": "https://stackoverflow.com/users/3681793/bonafernando"}, "edited": false, "score": 0, "creation_date": 1519161613, "post_id": 48893724, "comment_id": 84794624, "body": "Good, we have moved forward. It changed the color of the code. But there is no box yet... I&#39;ve updated the post again..."}, {"owner": {"reputation": 24616, "user_id": 866026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96fae8527632d33d7bf929fada83e8d1?s=128&d=identicon&r=PG", "display_name": "Waylan", "link": "https://stackoverflow.com/users/866026/waylan"}, "reply_to_user": {"reputation": 551, "user_id": 3681793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a23b03da4efe057f090c33cae367f09?s=128&d=identicon&r=PG", "display_name": "bonafernando", "link": "https://stackoverflow.com/users/3681793/bonafernando"}, "edited": false, "score": 0, "creation_date": 1519186317, "post_id": 48893724, "comment_id": 84801560, "body": "The &quot;box&quot; is just a background color defined in a CSS rule. For example, here on Stackoverflow, the rule <code>code { background-color: #eff0f1; }</code> defines a background color for code blocks. That sort of stuff is not going to be provided by a Markdown processor. You either need to define it yourself or use some sort of framework which provides a &quot;theme&quot; such as a static site generator. But those things are different questions which should be asked separately."}, {"owner": {"reputation": 551, "user_id": 3681793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a23b03da4efe057f090c33cae367f09?s=128&d=identicon&r=PG", "display_name": "bonafernando", "link": "https://stackoverflow.com/users/3681793/bonafernando"}, "edited": false, "score": 0, "creation_date": 1519222150, "post_id": 48893724, "comment_id": 84821706, "body": "Thank you very much Waylan. But I can&#39;t believe that there is not a simple one or two lines of code that already makes it look identical or very similar to GitHub or BitBucket. There must be someone who already solve it.... If not there is a very good opportunity to a gem."}, {"owner": {"reputation": 24616, "user_id": 866026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96fae8527632d33d7bf929fada83e8d1?s=128&d=identicon&r=PG", "display_name": "Waylan", "link": "https://stackoverflow.com/users/866026/waylan"}, "reply_to_user": {"reputation": 551, "user_id": 3681793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a23b03da4efe057f090c33cae367f09?s=128&d=identicon&r=PG", "display_name": "bonafernando", "link": "https://stackoverflow.com/users/3681793/bonafernando"}, "edited": false, "score": 0, "creation_date": 1519224781, "post_id": 48893724, "comment_id": 84823721, "body": "You should look at <a href=\"https://www.staticgen.com/\" rel=\"nofollow noreferrer\">static site generators</a> (<a href=\"https://staticsitegenerators.net/\" rel=\"nofollow noreferrer\">more here</a>). Of course, making tool recomendations is out-of-scope for Stackoverflow, so I have no further input on this question."}], "tags": [], "owner": {"reputation": 24616, "user_id": 866026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96fae8527632d33d7bf929fada83e8d1?s=128&d=identicon&r=PG", "display_name": "Waylan", "link": "https://stackoverflow.com/users/866026/waylan"}, "is_accepted": false, "score": 0, "last_activity_date": 1519158665, "creation_date": 1519158665, "answer_id": 48893724, "question_id": 48885559, "link": "https://stackoverflow.com/questions/48885559/ruby-how-to-generate-html-from-markdown-like-githubs-or-bitbuckets/48893724#48893724", "title": "Ruby: how to generate HTML from Markdown like GitHub&#39;s or BitBucket&#39;s?", "body": "<p>You need to enable a few nonstandard features.</p>\n\n<h1>Fenced code blocks</h1>\n\n<p>Fenced code blocks are nonstandard and are not enabled by default on most Markdown parsers (some older ones don't support them at all). According to Redcarpet's <a href=\"https://github.com/vmg/redcarpet#and-its-like-really-simple-to-use\" rel=\"nofollow noreferrer\">docs</a>, you want to enable the <code>fenced_code_blocks</code> extension:</p>\n\n<blockquote>\n  <ul>\n  <li><code>:fenced_code_blocks:</code> parse fenced code blocks, PHP-Markdown style. Blocks delimited with 3 or more <code>~</code> or backticks will be considered as code, without the need to be indented. An optional language name may be added at the end of the opening fence for the code block. </li>\n  </ul>\n</blockquote>\n\n<h1>Syntax Highlighting</h1>\n\n<p>Most Markdown parsers to not do syntax highlighting of code blocks. And those that do always do it as an option. Even then, you will still need to provide your own CSS styles to have the code blocks styled properly. As it turns out, Redcarpet does include support for a <code>prettify</code> option to the <code>HTML</code> renderer:</p>\n\n<blockquote>\n  <ul>\n  <li><code>:prettify:</code> add prettyprint classes to <code>&lt;code&gt;</code> tags for google-code-prettify.</li>\n  </ul>\n</blockquote>\n\n<p>You will need to get the Javascript and CSS from the <a href=\"https://github.com/google/code-prettify\" rel=\"nofollow noreferrer\">google-code-prettify</a> project to include in your pages.</p>\n\n<h1>Solution</h1>\n\n<p>In the end you'll need something like this:</p>\n\n<pre><code>renderer = Redcarpet::Render::HTML.new(prettify: true)\nmarkdown = Redcarpet::Markdown.new(renderer, fenced_code_blocks: true)\nhtml = markdown.render(source_text)\n</code></pre>\n"}], "owner": {"reputation": 551, "user_id": 3681793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a23b03da4efe057f090c33cae367f09?s=128&d=identicon&r=PG", "display_name": "bonafernando", "link": "https://stackoverflow.com/users/3681793/bonafernando"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2755, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1519161760, "creation_date": 1519130574, "last_edit_date": 1519161760, "question_id": 48885559, "link": "https://stackoverflow.com/questions/48885559/ruby-how-to-generate-html-from-markdown-like-githubs-or-bitbuckets", "title": "Ruby: how to generate HTML from Markdown like GitHub&#39;s or BitBucket&#39;s?", "body": "<p>On the main page of every repository in GitHub or BitBucket it shows the Readme.md in a very pretty format.</p>\n\n<p>Is there a way to make the same thing with ruby? I have already found some gems like <a href=\"https://github.com/vmg/redcarpet\" rel=\"nofollow noreferrer\">Redcarpet</a>, but it never looks pretty. I've followed <a href=\"https://stackoverflow.com/a/48039494/3681793\">this instructions</a> for Redcarpet.</p>\n\n<p>Edit:\nAfter I tried <a href=\"https://github.com/github/markup\" rel=\"nofollow noreferrer\">Github's markup ruby gem</a>, the same thing is happening.\nWhat is shown is this:\n<a href=\"https://i.stack.imgur.com/yBmHs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yBmHs.png\" alt=\"enter image description here\"></a>\nAnd what I want is this:\n<a href=\"https://i.stack.imgur.com/ZMwFD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZMwFD.png\" alt=\"enter image description here\"></a></p>\n\n<p>And I'm sure it's not only css missing, because after 3 backquotes (```) I write the syntax like <code>json</code> or <code>bash</code> and in the first image it is written.</p>\n\n<p>Edit2:</p>\n\n<p>This code here:</p>\n\n<pre><code>  renderer = Redcarpet::Render::HTML.new(prettify: true)\n  markdown = Redcarpet::Markdown.new(renderer, fenced_code_blocks: true)\n  html = markdown.render(source_text)\n  '&lt;script src=\"https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js\"&gt;&lt;/script&gt;'+html\n</code></pre>\n\n<p>Generated this:\n<a href=\"https://i.stack.imgur.com/qHs8z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qHs8z.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pry"], "comments": [{"owner": {"reputation": 3438, "user_id": 751716, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/E36nI.jpg?s=128&g=1", "display_name": "Rubyrider", "link": "https://stackoverflow.com/users/751716/rubyrider"}, "edited": false, "score": 1, "creation_date": 1519128885, "post_id": 48884932, "comment_id": 84774645, "body": "Which gem you are using of PRY? did you check the <a href=\"https://github.com/rweng/pry-rails\" rel=\"nofollow noreferrer\">github.com/rweng/pry-rails</a> PRY RAILS?"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1519128913, "post_id": 48884932, "comment_id": 84774660, "body": "For the same reason simply typing <code>irb</code> doesn&#39;t load all said constants. <code>irb</code> and <code>pry</code> are plain Ruby consoles. Add <a href=\"https://github.com/rweng/pry-rails\" rel=\"nofollow noreferrer\">pry rails</a> and type <code>rails c</code>, it will now use <code>pry</code>."}], "answers": [{"tags": [], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "is_accepted": true, "score": 1, "last_activity_date": 1519293612, "last_edit_date": 1519293612, "creation_date": 1519228852, "answer_id": 48910289, "question_id": 48884932, "link": "https://stackoverflow.com/questions/48884932/why-all-constants-not-loading-on-pry-console-in-rails-project-root-dir/48910289#48910289", "title": "Why all constants not loading on pry console in rails project root dir?", "body": "<p>To expand on the comments, what's being said is to install the <code>pry-rails</code> gem in your Gemfile. </p>\n\n<p><code>pry</code> alone works the same as <code>irb</code> (a Ruby console, outside of the project's context), while using <code>pry-rails</code> means <code>rails c</code> will load using <code>pry</code> with all its functionality. And therefore access to the required constants.</p>\n\n<p>This will also allow you to use the <code>binding.pry</code> breakpoints within the code, as desired.</p>\n\n<p>Alternatively, if you load <code>rails c</code> with the <code>pry</code> gem installed, you should be able to run the command <code>pry</code> within that (you <em>might</em> need to <code>require 'pry'</code> ahead of this), and it jump to using <code>pry</code> within the project's context. This will be handy if you're not able to add the <code>pry-rails</code> gem to the project's dependencies.</p>\n\n<p>(Whew - that's a lot of <code>'pry's</code>.)</p>\n\n<p>Hope that helps - let me know if you've any questions.</p>\n"}], "owner": {"reputation": 42, "user_id": 5984220, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7ec5f0d61bbedb3dcae57dd7566a6793?s=128&d=identicon&r=PG&f=1", "display_name": "Deesplay Nem", "link": "https://stackoverflow.com/users/5984220/deesplay-nem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 0, "accepted_answer_id": 48910289, "answer_count": 1, "score": 0, "last_activity_date": 1519293612, "creation_date": 1519128310, "question_id": 48884932, "link": "https://stackoverflow.com/questions/48884932/why-all-constants-not-loading-on-pry-console-in-rails-project-root-dir", "title": "Why all constants not loading on pry console in rails project root dir?", "body": "<p>I have a rails project named food_delight and I have been using pry in place of irb, now my problem is \"When I do 'pry' to enter in pry console inside rails project root dir non of the ActiveRecord classes are found but when I do 'rails console' in same rot directry then all the classes are autoloaded. Why this type of behavior, please explain in detail since I'm new to rails only 2-3 months and I'm learning alot.</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1519125389, "post_id": 48883996, "comment_id": 84772423, "body": "I see from your tags that you&#39;re using Rails. What&#39;s wrong with the built-in numericality validator?"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1519126384, "post_id": 48883996, "comment_id": 84773034, "body": "I want alphanumeric value not only numeric value, string must contain both letter and numbers"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1519126912, "post_id": 48883996, "comment_id": 84773384, "body": "Your condition is not clear. &quot;Whether a string contains alphanumeric or not&quot; is not the same as &quot;whether the string contains anything other than alphanumeric&quot;."}, {"owner": {"reputation": 2537, "user_id": 5371321, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ZFyVo.jpg?s=128&g=1", "display_name": "Narasimha Reddy - Geeker", "link": "https://stackoverflow.com/users/5371321/narasimha-reddy-geeker"}, "edited": false, "score": 1, "creation_date": 1519126977, "post_id": 48883996, "comment_id": 84773435, "body": "/^[A-Za-z][A-Za-z\\d]*$/ try this. You can play with regular expressions here <a href=\"http://rubular.com/\" rel=\"nofollow noreferrer\">rubular.com</a>"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1519127006, "post_id": 48883996, "comment_id": 84773452, "body": "@sawa String must contain alphanumeric , not only letters, not only numbers, and not special characters"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "reply_to_user": {"reputation": 2537, "user_id": 5371321, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ZFyVo.jpg?s=128&g=1", "display_name": "Narasimha Reddy - Geeker", "link": "https://stackoverflow.com/users/5371321/narasimha-reddy-geeker"}, "edited": false, "score": 1, "creation_date": 1519127106, "post_id": 48883996, "comment_id": 84773512, "body": "@NarasimhaReddy it is not duplicate, check it, i need to check string must contain alphanumeric, your regex will allow if string contains only letters. in my case, string must contain both letter and numbers"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1519127350, "post_id": 48883996, "comment_id": 84773666, "body": "@sawa i updated my question, please check it"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1519127924, "post_id": 48883996, "comment_id": 84774066, "body": "<code>chrs = str.chars; chrs.all?(&#47;[a-z\\d]&#47;i) &amp;&amp; chrs.any?(&#47;\\d&#47;) &amp;&amp; chrs.any?(&#47;[a-z]&#47;i)</code>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1519133800, "post_id": 48883996, "comment_id": 84777816, "body": "Is btw <code>&quot;O\u03011&quot;</code> valid? FYI: <code>&quot;O\u0301&quot;</code> is a letter."}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1519185783, "post_id": 48883996, "comment_id": 84801421, "body": "@mudasobwa &quot;<code>O\u03011</code>&quot; no its not valid, and it is giving me error."}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1519133671, "post_id": 48884737, "comment_id": 84777726, "body": "FYI: the above fails on <code>&quot;A1\\n#@&amp;(</code>^=&quot;<code>. Always use </code>\\A` and <code>\\z</code> matchers instead of <code>^</code> and <code>$</code> unless you do pretty fine understand what you are doing."}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1519186024, "post_id": 48884737, "comment_id": 84801486, "body": "@mudasobwa when i used this regex <code>\\A(?=[a-zA-Z0-9]*[a-zA-Z])(?=[a-zA-Z0-9]*\\d)[a-zA-Z0-9]\\Z</code> it is not allowing me this <code>TTTada41adada</code> simple alphanumeric. Can you please help me out in this  ?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1519191943, "post_id": 48884737, "comment_id": 84803162, "body": "The good start would be stop blindly copying the code and go read about <a href=\"https://ruby-doc.org/core-2.3.0/Regexp.html#class-Regexp-label-Anchors\" rel=\"nofollow noreferrer\">regular expression anchors</a>. The trailing <code>*</code> is significant otherwise it matches single-character string only."}], "tags": [], "owner": {"reputation": 91443, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "is_accepted": true, "score": 4, "last_activity_date": 1519127779, "last_edit_date": 1519127779, "creation_date": 1519127631, "answer_id": 48884737, "question_id": 48883996, "link": "https://stackoverflow.com/questions/48883996/string-must-be-alphanumeric-validation/48884737#48884737", "title": "String must be alphanumeric validation", "body": "<p>You might use 2 positive <a href=\"https://www.regular-expressions.info/lookaround.html\" rel=\"nofollow noreferrer\">lookaheads</a> <code>(?=</code> to assert that there is at least a character and at least a digit:</p>\n\n<p><a href=\"http://rubular.com/r/TRNhIrJZg4\" rel=\"nofollow noreferrer\"><code>^(?=[a-zA-Z0-9]*[a-zA-Z])(?=[a-zA-Z0-9]*\\d)[a-zA-Z0-9]*$</code></a></p>\n\n<p>Or with the case insensitive flag and <code>\\d</code> to match digits:</p>\n\n<p><a href=\"http://rubular.com/r/zPz5Ocu72v\" rel=\"nofollow noreferrer\"><code>^(?=[a-z\\d]*[a-z])(?=[a-z\\d]*\\d)[a-z\\d]*$</code></a></p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1519169049, "creation_date": 1519169049, "answer_id": 48895820, "question_id": 48883996, "link": "https://stackoverflow.com/questions/48883996/string-must-be-alphanumeric-validation/48895820#48895820", "title": "String must be alphanumeric validation", "body": "<p>It appears you want to check if a string contains letters and digits only and at least one letter and one digit.</p>\n\n<p>You can use the following regular expression which I've written in free-spacing mode to make it self-documenting.</p>\n\n<pre><code>r = /\n    \\A                   # match beginning of string\n    \\p{Alnum}*           # match zero or more letters or numbers\n    (?:                  # begin non-capture group\n      \\p{Alpha}\\p{Digit} # match a letter followed by a digit\n      |                  # or\n      \\p{Digit}\\p{Alpha} # match a digit followed by a letter\n    )                    # end non-capture group\n    \\p{Alnum}*           # match zero or more letters or numbers\n    \\z                   # match end of string\n    /x                   # free spacing regex definition mode\n\n%w| test TEST 0123 T12^ T123 123T t123 123t |.each { |s| puts \"#{s}: #{s.match?(r)}\" }\ntest: false\nTEST: false\n0123: false\nT12^: false\nT123: true\n123T: true\nt123: true\n123t: true\n</code></pre>\n"}], "owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 638, "favorite_count": 0, "accepted_answer_id": 48884737, "answer_count": 2, "score": -3, "last_activity_date": 1519169049, "creation_date": 1519125222, "last_edit_date": 1519127322, "question_id": 48883996, "link": "https://stackoverflow.com/questions/48883996/string-must-be-alphanumeric-validation", "title": "String must be alphanumeric validation", "body": "<p>A string must contain both letters and numbers</p>\n\n<p>i tried below regular expression, but it is allow me to add special characters, i don't want any special character in string</p>\n\n<pre><code>/^(?=.*[a-z])(?=.*[0-9])/\n</code></pre>\n\n<p>Below is my cases</p>\n\n<p><strong>invalid</strong></p>\n\n<ul>\n<li>test </li>\n<li>TEST </li>\n<li>0123 </li>\n<li>T12^</li>\n</ul>\n\n<p><strong>Valid</strong></p>\n\n<ul>\n<li>T123 </li>\n<li>123T</li>\n<li>t123</li>\n<li>123t</li>\n</ul>\n\n<p>Any help or suggestion will be appreciated, Thanks in advance :)</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 3, "creation_date": 1519124056, "post_id": 48883422, "comment_id": 84771426, "body": "FYI \u2013 Ruby has an excellent documentation, e.g. <a href=\"http://ruby-doc.org/core/Array.html\" rel=\"nofollow noreferrer\">ruby-doc.org/core/Array.html</a>"}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1519129963, "post_id": 48883422, "comment_id": 84775306, "body": "@Stefan Mmh, for &quot;excellent&quot; it&#39;s too often way too frustratingly bad. For example <a href=\"https://docs.ruby-lang.org/en/2.5.0/\" rel=\"nofollow noreferrer\">docs.ruby-lang.org/en/2.5.0</a> doesn&#39;t even list the Array class in its Class and Module Index."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1519131570, "post_id": 48883422, "comment_id": 84776291, "body": "@StefanPochmann yeah, seems like RDoc messed up the index. With &quot;excellent&quot; I was referring to Ruby&#39;s documentation in general, not a particular website. Maybe I should have said <code>ri Array</code> ;-)"}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1519132067, "post_id": 48883422, "comment_id": 84776643, "body": "@Stefan That&#39;s just one thing, I mentioned it because it fit the topic here. I <i>also</i> meant Ruby&#39;s documentation in general. Too much missing or wrong stuff. I do use ruby-doc.org most of the time. Newest nuisance <i>there</i> is that  it does document 2.4.0, 2.4.1 and 2.4.2, but <i>not</i> 2.4.3 even though that&#39;s been out for over two months. Didn&#39;t know <code>ri</code>, btw, but it only tells me &quot;Nothing known about Array&quot; :-("}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 1, "creation_date": 1519132920, "post_id": 48883422, "comment_id": 84777252, "body": "@StefanPochmann Luckily we&#39;re part of the Ruby community so we can fix most of it. (BTW, ruby-doc.org is maintained by James Britt, you can contact him via suggestions@ruby-doc.org)"}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 6, "creation_date": 1519123813, "post_id": 48883500, "comment_id": 84771231, "body": "Or simply <code>a.rindex(nil)</code>"}], "tags": [], "owner": {"reputation": 394, "user_id": 9289181, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kEJV4.jpg?s=128&g=1", "display_name": "fl9", "link": "https://stackoverflow.com/users/9289181/fl9"}, "is_accepted": true, "score": 3, "last_activity_date": 1519123733, "creation_date": 1519123733, "answer_id": 48883500, "question_id": 48883422, "link": "https://stackoverflow.com/questions/48883422/get-index-of-last-value-that-matches-a-condition-in-an-array/48883500#48883500", "title": "Get Index of last value that matches a condition in an array", "body": "<p>You could do </p>\n\n<pre><code>a = [nil, \"Pending Verification\", nil, \"Bla\"] \na.rindex { |x| x.nil? }\n</code></pre>\n"}], "owner": {"reputation": 1796, "user_id": 2809686, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/df4c97dd08b33a8a0684cd226bfe89ce?s=128&d=identicon&r=PG&f=1", "display_name": "Kingsley Simon", "link": "https://stackoverflow.com/users/2809686/kingsley-simon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 48883500, "answer_count": 1, "score": -2, "last_activity_date": 1519126749, "creation_date": 1519123489, "last_edit_date": 1519126749, "question_id": 48883422, "link": "https://stackoverflow.com/questions/48883422/get-index-of-last-value-that-matches-a-condition-in-an-array", "title": "Get Index of last value that matches a condition in an array", "body": "<p>I want to get the index of the last <code>nil</code> in an array. For the following array:</p>\n\n<pre><code>[\"Pending Verification\", \"Pending Verification\", nil, nil]\n</code></pre>\n\n<p>the index should be <code>3</code>. Or in this scenario:</p>\n\n<pre><code>[nil, \"Pending Verification\", nil, \"Bla\"]\n</code></pre>\n\n<p>it should be <code>2</code>.</p>\n\n<p>How can I do this in ruby?</p>\n"}, {"tags": ["ruby", "string"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 4, "creation_date": 1519123535, "post_id": 48883318, "comment_id": 84771011, "body": "That&#39;s part of Ruby&#39;s parser which cannot be altered from within Ruby."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1519124449, "post_id": 48883318, "comment_id": 84771718, "body": "BTW, what kind of input do you want to parse? There&#39;s probably another solution to your problem"}, {"owner": {"reputation": 99733, "user_id": 165495, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/219001761/picture?type=large", "display_name": "Casebash", "link": "https://stackoverflow.com/users/165495/casebash"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1519124985, "post_id": 48883318, "comment_id": 84772137, "body": "@Stefan: Just interested in possibility, don&#39;t have a specific use case in mind"}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 2, "creation_date": 1519126231, "post_id": 48883318, "comment_id": 84772937, "body": "Btw. they&#39;re called percent strings/literals and there&#39;s also <code>%W</code> (unquoted version), <code>%s</code> (symbol) and the new-ish <code>%i</code>/<code>%I</code> (array of symbols)."}], "answers": [{"tags": [], "owner": {"reputation": 2447, "user_id": 468618, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32701e4c5c6d91bbbb092077f8bdd2f8?s=128&d=identicon&r=PG", "display_name": "Brian Morearty", "link": "https://stackoverflow.com/users/468618/brian-morearty"}, "is_accepted": true, "score": 1, "last_activity_date": 1519191677, "creation_date": 1519191677, "answer_id": 48898856, "question_id": 48883318, "link": "https://stackoverflow.com/questions/48883318/defining-custom-general-delimited-input-in-ruby/48898856#48898856", "title": "Defining custom general delimited input in Ruby", "body": "<p>No, it\u2019s not possible to do so in Ruby. You would have to modify the Ruby interpreter itself.</p>\n"}], "owner": {"reputation": 99733, "user_id": 165495, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/219001761/picture?type=large", "display_name": "Casebash", "link": "https://stackoverflow.com/users/165495/casebash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 48898856, "answer_count": 1, "score": 2, "last_activity_date": 1519191677, "creation_date": 1519123205, "last_edit_date": 1519165343, "question_id": 48883318, "link": "https://stackoverflow.com/questions/48883318/defining-custom-general-delimited-input-in-ruby", "title": "Defining custom general delimited input in Ruby", "body": "<p>Ruby allows <a href=\"http://www.linuxtopia.org/online_books/programming_books/ruby_tutorial/The_Ruby_Language_General_Delimited_Input.html\" rel=\"nofollow noreferrer\">general delimited input</a> as follows:</p>\n\n<pre><code>%q/this is a string/\n</code></pre>\n\n<p>This is only defined for a few characters as the prefix like %r for regular expressions and %x for shell commands. Is it possible to define custom general delimited inputs in Ruby?</p>\n"}, {"tags": ["ruby", "sqlite", "sqlite3-ruby"], "comments": [{"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1519122653, "post_id": 48883015, "comment_id": 84770350, "body": "i&#39;ve created a similar schema and tried - no surprise happened. please add your <a href=\"http://www.sqlitetutorial.net/sqlite-dump/\" rel=\"nofollow noreferrer\">sql dump</a>, maybe there is something I can not not populate."}, {"owner": {"reputation": 4616, "user_id": 284257, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f4e37ffbbf81653b797ec4cf995a23b1?s=128&d=identicon&r=PG", "display_name": "Sig", "link": "https://stackoverflow.com/users/284257/sig"}, "reply_to_user": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1519123477, "post_id": 48883015, "comment_id": 84770970, "body": "@marmeladze I have dded it in my post. Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 4616, "user_id": 284257, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f4e37ffbbf81653b797ec4cf995a23b1?s=128&d=identicon&r=PG", "display_name": "Sig", "link": "https://stackoverflow.com/users/284257/sig"}, "edited": false, "score": 0, "creation_date": 1519131654, "post_id": 48885182, "comment_id": 84776344, "body": "Thanks for the reply. Unfortunately, I don&#39;t understand what you are trying to    tell me. Why my strings are stored as hex?"}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "reply_to_user": {"reputation": 4616, "user_id": 284257, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f4e37ffbbf81653b797ec4cf995a23b1?s=128&d=identicon&r=PG", "display_name": "Sig", "link": "https://stackoverflow.com/users/284257/sig"}, "edited": false, "score": 0, "creation_date": 1519133573, "post_id": 48885182, "comment_id": 84777671, "body": "Your strings are not stored as hex, you are instructing those numeric strings to be handled as hex. <code>X&#39;{hex_literal}&#39;</code> takes given as hex and converts them to string."}], "tags": [], "owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "is_accepted": false, "score": 0, "last_activity_date": 1519129197, "creation_date": 1519129197, "answer_id": 48885182, "question_id": 48883015, "link": "https://stackoverflow.com/questions/48883015/sqlite3-stores-string-as-hexadecimal/48885182#48885182", "title": "Sqlite3 stores string as hexadecimal", "body": "<p>X prefix converts HEX values to strings. </p>\n\n<pre><code>sqlite&gt; SELECT X'41';\nA\nsqlite&gt; SELECT X'42';\nB\nsqlite&gt; SELECT X'4242';\nBB\nsqlite&gt; SELECT X'54545831';\nTTX1 # Do not forget this one\nsqlite&gt; SELECT X'54';\nT\nsqlite&gt; SELECT X'58';\nX\n</code></pre>\n\n<p>Not let's see your code,</p>\n\n<pre><code>sqlite&gt; select * from batches;\nTTX1|0|2018-02-20 11:40:46 +0100|2018-02-20 11:40:46 +0100\nTTX2|0|2018-02-20 11:40:54 +0100|2018-02-20 11:40:54 +0100\nTTX3|0|2018-02-20 11:41:02 +0100|2018-02-20 11:41:02 +0100\n</code></pre>\n\n<p>Below queries returns empty sets.</p>\n\n<pre><code>sqlite&gt; SELECT * FROM batches WHERE batch = 'TTX1';\nsqlite&gt; SELECT * FROM batches WHERE batch = 'TTX2';\nsqlite&gt; SELECT * FROM batches WHERE batch = 'TTX3';\n</code></pre>\n\n<p>Not insert ordinary string data.</p>\n\n<pre><code>sqlite&gt; INSERT INTO batches VALUES('TTX2',0,'2018-02-20 11:40:46 +0100','2018-02-20 11:40:46 +0100');\nsqlite&gt; select * from batches;\nTTX1|0|2018-02-20 11:40:46 +0100|2018-02-20 11:40:46 +0100\nTTX2|0|2018-02-20 11:40:54 +0100|2018-02-20 11:40:54 +0100\nTTX3|0|2018-02-20 11:41:02 +0100|2018-02-20 11:41:02 +0100\nTTX2|0|2018-02-20 11:40:46 +0100|2018-02-20 11:40:46 +0100\nsqlite&gt; select * from batches where batch = 'TTX2';\nTTX2|0|2018-02-20 11:40:46 +0100|2018-02-20 11:40:46 +0100\n</code></pre>\n\n<p>let's check some equalities. </p>\n\n<pre><code>sqlite&gt; Select 123 = 123;\n1\nsqlite&gt; Select X'54545831' = 'TTX1';\n0\n</code></pre>\n\n<p>The data which responds to <code>batch = TTX{number}</code> are the ones which you inserted as strings. But the others do not met that condition.</p>\n"}, {"comments": [{"owner": {"reputation": 4616, "user_id": 284257, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f4e37ffbbf81653b797ec4cf995a23b1?s=128&d=identicon&r=PG", "display_name": "Sig", "link": "https://stackoverflow.com/users/284257/sig"}, "edited": false, "score": 0, "creation_date": 1519210798, "post_id": 48890724, "comment_id": 84813881, "body": "Thanks for the explanation. I&#39;m not sure why they were written as blobs, anyway I have re-written the INSERT query and now everything seems fine."}], "tags": [], "owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "is_accepted": false, "score": 2, "last_activity_date": 1519146844, "creation_date": 1519146844, "answer_id": 48890724, "question_id": 48883015, "link": "https://stackoverflow.com/questions/48883015/sqlite3-stores-string-as-hexadecimal/48890724#48890724", "title": "Sqlite3 stores string as hexadecimal", "body": "<p>These values are <em>not</em> stored as hexadecimal, they are stored as blobs. In SQL statements, the only way to write a blob is with a <a href=\"http://www.sqlite.org/lang_expr.html#hexint\" rel=\"nofollow noreferrer\">blob literal</a>, in which the blob's bytes are represented with hexadecimal digits.</p>\n\n<p>Whatever program wrote the database wrote these values as blobs.</p>\n\n<p>To search for a blob, convert your search value into a blob:</p>\n\n\n\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT * FROM batches WHERE batch = CAST('TTX3' AS BLOB);\n</code></pre>\n\n<p>Alternatively, modify the database so that it contains text values (which might break that other program):</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>UPDATE batches SET batch = CAST(batch AS TEXT);\n</code></pre>\n"}], "owner": {"reputation": 4616, "user_id": 284257, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f4e37ffbbf81653b797ec4cf995a23b1?s=128&d=identicon&r=PG", "display_name": "Sig", "link": "https://stackoverflow.com/users/284257/sig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2313, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1519146844, "creation_date": 1519122308, "last_edit_date": 1519124564, "question_id": 48883015, "link": "https://stackoverflow.com/questions/48883015/sqlite3-stores-string-as-hexadecimal", "title": "Sqlite3 stores string as hexadecimal", "body": "<p>In a Ruby script I need to read some values from an existing g SQLite3 database.</p>\n\n<pre><code>DB = SQLite3::Database.open \"#{App.root}/db/dm4sea_#{App.env}.db\"\n</code></pre>\n\n<p>The database has 1 table (batches) with the following structure</p>\n\n<pre><code>DB.execute \"PRAGMA table_info(batches);\"\n=&gt; [[0, \"batch\", \"VARCHAR(30)\", 0, nil, 1], \n   [1, \"fdl\", \"INT\", 0, nil, 0], \n   [2, \"created_at\", \"DATETIME\", 0, nil, 0], \n   [3, \"updated_at\", \"DATETIME\", 0, nil, 0]]\n</code></pre>\n\n<p>The current content is</p>\n\n<pre><code>DB.execute \"SELECT * FROM batches\"\n=&gt; [[\"TTX1\", 0, \"2018-02-20 10:26:17 +0100\", \"2018-02-20 10:26:17 +0100\"], \n    [\"TTX2\", 0, \"2018-02-20 10:36:33 +0100\", \"2018-02-20 10:36:33 +0100\"], \n    [\"TTX3\", 0, \"2018-02-20 10:39:52 +0100\", \"2018-02-20 10:39:52 +0100\"]]\n</code></pre>\n\n<p>However, with my big surprise, the following happens</p>\n\n<pre><code>DB.execute \"SELECT * FROM batches WHERE batch = 'TTX3'\"\n=&gt; [] \n</code></pre>\n\n<p>Here the database dump</p>\n\n<pre><code>sqlite&gt; .dump\nPRAGMA foreign_keys=OFF;\nBEGIN TRANSACTION;\nCREATE TABLE batches (\n          batch VARCHAR(30) PRIMARY KEY,\n          fdl INT,\n          created_at DATETIME,\n          updated_at DATETIME\n        );\nINSERT INTO batches VALUES(X'54545831',0,'2018-02-20 11:40:46 +0100','2018-02-20 11:40:46 +0100');\nINSERT INTO batches VALUES(X'54545832',0,'2018-02-20 11:40:54 +0100','2018-02-20 11:40:54 +0100');\nINSERT INTO batches VALUES(X'54545833',0,'2018-02-20 11:41:02 +0100','2018-02-20 11:41:02 +0100');\nCREATE INDEX batches_batch\n        ON batches (batch);\nCREATE INDEX batches_fdl\n        ON batches (fdl);\nCOMMIT;\n</code></pre>\n\n<p>Why are the batches stored as hexadecimal values?</p>\n\n<pre><code>DB.execute \"SELECT * FROM batches WHERE batch = X'54545833'\"\n=&gt; [[\"TTX3\", 0, \"2018-02-20 11:41:02 +0100\", \"2018-02-20 11:41:02 +0100\"]]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "soap", "wash-out"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1519158382, "post_id": 48882977, "comment_id": 84792921, "body": "It is very unclear what you are asking here. Chances are the answer is yes but you will need to clarify the question what part are you trying to map and what are you trying to map into?"}, {"owner": {"reputation": 192, "user_id": 6078174, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh3.googleusercontent.com/-mSfmR5-qURA/AAAAAAAAAAI/AAAAAAAAAOU/4wPjvIHS-BQ/photo.jpg?sz=128", "display_name": "Raman Preet Singh", "link": "https://stackoverflow.com/users/6078174/raman-preet-singh"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1519193571, "post_id": 48882977, "comment_id": 84803757, "body": "@engineersmnky The initial problem statement was ambiguous.I have edited it now. I want to map the XML request (XSD) to a ruby hash into a form which is required as :args for the soap action."}], "answers": [{"comments": [{"owner": {"reputation": 192, "user_id": 6078174, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh3.googleusercontent.com/-mSfmR5-qURA/AAAAAAAAAAI/AAAAAAAAAOU/4wPjvIHS-BQ/photo.jpg?sz=128", "display_name": "Raman Preet Singh", "link": "https://stackoverflow.com/users/6078174/raman-preet-singh"}, "edited": false, "score": 0, "creation_date": 1519193678, "post_id": 48887282, "comment_id": 84803799, "body": "The initial problem statement was ambiguous, please have a look at the updated problem statement."}], "tags": [], "owner": {"reputation": 129, "user_id": 4944651, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QdVLr51yOJo/AAAAAAAAAAI/AAAAAAAABNE/Xg2CIoB-czE/photo.jpg?sz=128", "display_name": "Sebastian Meza", "link": "https://stackoverflow.com/users/4944651/sebastian-meza"}, "is_accepted": false, "score": 0, "last_activity_date": 1519136194, "creation_date": 1519136194, "answer_id": 48887282, "question_id": 48882977, "link": "https://stackoverflow.com/questions/48882977/map-xml-arguments-to-ruby-class-while-using-wash-out-gem-for-soap-request/48887282#48887282", "title": "Map XML arguments to ruby class while using wash-out gem for SOAP request", "body": "<p>I dont know any way to do that without mapping every nested attribute one by one to a ruby object, but you can try to use the <a href=\"https://github.com/multi-io/xml-mapping\" rel=\"nofollow noreferrer\">xml-mapping</a> gem and try to test what you want.</p>\n"}], "owner": {"reputation": 192, "user_id": 6078174, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh3.googleusercontent.com/-mSfmR5-qURA/AAAAAAAAAAI/AAAAAAAAAOU/4wPjvIHS-BQ/photo.jpg?sz=128", "display_name": "Raman Preet Singh", "link": "https://stackoverflow.com/users/6078174/raman-preet-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519193469, "creation_date": 1519122202, "last_edit_date": 1519193469, "question_id": 48882977, "link": "https://stackoverflow.com/questions/48882977/map-xml-arguments-to-ruby-class-while-using-wash-out-gem-for-soap-request", "title": "Map XML arguments to ruby class while using wash-out gem for SOAP request", "body": "<p>I'm using wash-out gem (<a href=\"https://github.com/inossidabile/wash_out\" rel=\"nofollow noreferrer\">https://github.com/inossidabile/wash_out</a>) for exposing a SOAP service.</p>\n\n<p>Sample usage of wash-out documentation goes something like this:</p>\n\n<pre><code># Params from XML attributes;\n  # e.g. for a request to the 'AddCircle' action:\n  #   &lt;soapenv:Envelope&gt;\n  #     &lt;soapenv:Body&gt;\n  #       &lt;AddCircle&gt;\n  #         &lt;Circle radius=\"5.0\"&gt;\n  #           &lt;Center x=\"10\" y=\"12\" /&gt;\n  #         &lt;/Circle&gt;\n  #       &lt;/AddCircle&gt;\n  #     &lt;/soapenv:Body&gt;\n  #   &lt;/soapenv:Envelope&gt;\n  soap_action \"AddCircle\",\n              :args   =&gt; { :circle =&gt; { :center =&gt; { :@x =&gt; :integer,\n                                                     :@y =&gt; :integer },\n                                        :@radius =&gt; :double } },\n              :return =&gt; nil, # [] for wash_out below 0.3.0\n              :to     =&gt; :add_circle\n  def add_circle\n    circle = params[:circle]\n    Circle.new(circle[:center][:x], circle[:center][:y], circle[:radius])\n\n    render :soap =&gt; nil\n  end\n</code></pre>\n\n<p>But my XML request has many nested arguments and I don't want to define mappings (:args) for each XML attribute. Is there any way to map the XML request (XSD) to a ruby hash into a form which is required as :args for the soap action. </p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 7736969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43fd7461c440c9b1783600583003df34?s=128&d=identicon&r=PG&f=1", "display_name": "kzq", "link": "https://stackoverflow.com/users/7736969/kzq"}, "is_accepted": false, "score": 1, "last_activity_date": 1539500226, "last_edit_date": 1539500226, "creation_date": 1519128942, "answer_id": 48885115, "question_id": 48882883, "link": "https://stackoverflow.com/questions/48882883/allow-two-checkboxes-ror-application/48885115#48885115", "title": "Allow Two checkboxes / RoR application", "body": "<p>jQuery is not linked with the form. Simple solution is to add a class with each form and use that class in selector.  </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>$(document).ready(function() {\r\n  \r\n  \r\n  $('.form input[type=checkbox]').on('change', function(e) {\r\n  \tvar MyForm=this.parentNode.id;\r\n  \tif ($('form[id='+MyForm+'] input[type=checkbox]:checked').length == 2) {\r\n  \t\t$('form[id='+MyForm+'] input[type=checkbox]:not(:checked)').prop('disabled', 'disabled');\r\n\t\t}else{\r\n  \t\t$('form[id='+MyForm+'] input[type=checkbox]:not(:checked)').prop('disabled', false);\r\n  \t}\r\n });   \r\n  \r\n});</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js\"&gt;&lt;/script&gt;\r\n&lt;div&gt;\r\n &lt;h4&gt;\r\n  Form 1\r\n &lt;/h4&gt;\r\n&lt;form id=\"form_1\" class=\"form\"&gt;\r\n  &lt;input type=\"checkbox\"  value=\"1\"&gt;\r\n  &lt;input type=\"checkbox\"  value=\"2\"&gt;\r\n  &lt;input type=\"checkbox\"  value=\"3\"&gt;\r\n&lt;/form&gt;\r\n&lt;/div&gt;\r\n\r\n&lt;div&gt;\r\n&lt;h4&gt;\r\n Form 2\r\n&lt;/h4&gt;\r\n &lt;form id=\"jj\" class=\"form\"&gt;\r\n  &lt;input type=\"checkbox\" name=\"group\" value=\"1\"&gt;\r\n  &lt;input type=\"checkbox\" name=\"group\" value=\"2\"&gt;\r\n  &lt;input type=\"checkbox\" name=\"group\" value=\"3\"&gt;\r\n&lt;/form&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>In your Ruby code</p>\n\n<pre><code>&lt;%= form_for([@formulaire, @formulaire.polls.new]) do |f| %&gt;\n            &lt;% @formulaire.questions.each_with_index do |question, i| %&gt;\n            &lt;li&gt;\n                &lt;div&gt;\n\n                &lt;form id=\"form\" class=\"form\"&gt; \n                &lt;%= question.nom.html_safe %&gt;\n                &lt;ul&gt;\n                   &lt;% if question.typequestion == \"choix_multiple\"%&gt;\n                        &lt;% question.answers.each_with_index do |answer, j| %&gt;\n                                &lt;div&gt;\n                                &lt;%  a= Answer.find_by_sql([\"Select * from answers where id=?\", answer.id]).as_json(only: [:question_id,:content]) %&gt;\n                                &lt;%= check_box_tag :\"nom_#{i}_#{j}\", answer.id %&gt; \n                                &lt;%= f.label :\"nom_#{answer.content}\", answer.content%&gt; &lt;% answer.id%&gt;\n                                &lt;br/&gt;\n                                &lt;/div&gt;\n                        &lt;% end %&gt;\n                    &lt;% elsif question.typequestion == \"choix_simple\"%&gt;\n                        (...)\n\n        &lt;%= f.submit \"Valider les r\u00e9ponses\", class:\"pull-right btn btn-primary\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 9007028, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6ae912f9d735136cdab36dddbc6f68b?s=128&d=identicon&r=PG&f=1", "display_name": "user9007028", "link": "https://stackoverflow.com/users/9007028/user9007028"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539500226, "creation_date": 1519121914, "last_edit_date": 1592644375, "question_id": 48882883, "link": "https://stackoverflow.com/questions/48882883/allow-two-checkboxes-ror-application", "title": "Allow Two checkboxes / RoR application", "body": "<p>Hello I'm developing a form generator with RoR and I want allow only 2 checkboxes when I have a 'multiple choice' question. I wrote a JavaScript that works for this example :</p>\n<h1>My View example</h1>\n<pre><code>&lt;div&gt;\n &lt;h4&gt;\n  Form 1\n &lt;/h4&gt;\n&lt;form id=&quot;form_1&quot;&gt;\n  &lt;input type=&quot;checkbox&quot;  value=&quot;1&quot;&gt;\n  &lt;input type=&quot;checkbox&quot;  value=&quot;2&quot;&gt;\n  &lt;input type=&quot;checkbox&quot;  value=&quot;3&quot;&gt;\n&lt;/form&gt;\n&lt;/div&gt;\n\n&lt;div&gt;\n&lt;h4&gt;\n Form 2\n&lt;/h4&gt;\n &lt;form id=&quot;jj&quot;&gt;\n  &lt;input type=&quot;checkbox&quot; name=&quot;group&quot; value=&quot;1&quot;&gt;\n  &lt;input type=&quot;checkbox&quot; name=&quot;group&quot; value=&quot;2&quot;&gt;\n  &lt;input type=&quot;checkbox&quot; name=&quot;group&quot; value=&quot;3&quot;&gt;\n&lt;/form&gt;\n</code></pre>\n\n<h1>My Javascript :</h1>\n<pre><code>&lt;script&gt;\n\n$(function() {\n  $('form input[type=checkbox]').on('change', function(e) {\n  var MyForm=this.parentNode.id;\n  if ($('form[id='+MyForm+'] input[type=checkbox]:checked').length == 2) {\n  $('form[id='+MyForm+'] input[type=checkbox]:not(:checked)').prop('disabled', 'disabled');\n}else{\n  $('form[id='+MyForm+'] input[type=checkbox]:not(:checked)').prop('disabled', false);\n  }\n });\n\n});\n</code></pre>\n\n<p>How can I adapt to to make it works with my Ruby code :</p>\n<pre><code>&lt;%= form_for([@formulaire, @formulaire.polls.new]) do |f| %&gt;\n            &lt;% @formulaire.questions.each_with_index do |question, i| %&gt;\n            &lt;li&gt;\n                &lt;div&gt;\n\n                &lt;form id=&quot;form&quot;&gt; \n                &lt;%= question.nom.html_safe %&gt;\n                &lt;ul&gt;\n                   &lt;% if question.typequestion == &quot;choix_multiple&quot;%&gt;\n                        &lt;% question.answers.each_with_index do |answer, j| %&gt;\n                                &lt;div&gt;\n                                &lt;%  a= Answer.find_by_sql([&quot;Select * from answers where id=?&quot;, answer.id]).as_json(only: [:question_id,:content]) %&gt;\n                                &lt;%= check_box_tag :&quot;nom_#{i}_#{j}&quot;, answer.id %&gt; \n                                &lt;%= f.label :&quot;nom_#{answer.content}&quot;, answer.content%&gt; &lt;% answer.id%&gt;\n                                &lt;br/&gt;\n                                &lt;/div&gt;\n                        &lt;% end %&gt;\n                    &lt;% elsif question.typequestion == &quot;choix_simple&quot;%&gt;\n                        (...)\n\n        &lt;%= f.submit &quot;Valider les r\u00e9ponses&quot;, class:&quot;pull-right btn btn-primary&quot; %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["javascript", "ruby", "google-chrome"], "answers": [{"tags": [], "owner": {"reputation": 871354, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "is_accepted": true, "score": 1, "last_activity_date": 1519122544, "last_edit_date": 1592644375, "creation_date": 1519121823, "answer_id": 48882841, "question_id": 48882791, "link": "https://stackoverflow.com/questions/48882791/javascript-equivalent-for-rubys-line-and-file-constants/48882841#48882841", "title": "Javascript equivalent for Ruby&#39;s __LINE__ and __FILE__ constants", "body": "<blockquote>\n<p>Is there a javascript/Chrome equivalent ?</p>\n</blockquote>\n<p>There is no equivalent I'm afraid. It just doesn't exist. The line numbers you've referred to that are auto-logged by devtools when you use <code>console.xyz</code> are the closest you get I'm afraid.</p>\n<hr />\n<blockquote>\n<p>For the moment I use</p>\n<pre><code>console.log(20, &quot;what I want to view&quot;)\n</code></pre>\n<p>for code on line 20 but you can imagine that has to be changed a lot.</p>\n</blockquote>\n<p>FWIW, rather than using a line number that (as you say) needs changing, consider using a marker that doesn't need changing but is easily found, e.g.:</p>\n<pre><code>console.log(&quot;*A*&quot;, &quot;what I want to view&quot;);\n</code></pre>\n<p>That won't need updating so much.</p>\n<p>There may well be logging frameworks that do a better job, of course. Or it would be trivial to write a pre-processor for your JavaScript files that replaced <code>__FILE__</code>  and <code>__LINE__</code> with the name of the file and the line number... (Or perhaps a <a href=\"https://github.com/jamiebuilds/babel-handbook/blob/master/translations/en/plugin-handbook.md#toc-stages-of-babel\" rel=\"nofollow noreferrer\">Babel plugin</a>, although <code>__FILE__</code> may be tricky; the parsing stage retains line number, but since it may well not even know what file the source is coming from or even if it came from a file [as opposed to output of another tool]...)</p>\n"}], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 48882841, "answer_count": 1, "score": 1, "last_activity_date": 1519122544, "creation_date": 1519121686, "question_id": 48882791, "link": "https://stackoverflow.com/questions/48882791/javascript-equivalent-for-rubys-line-and-file-constants", "title": "Javascript equivalent for Ruby&#39;s __LINE__ and __FILE__ constants", "body": "<p>I primarely code in Ruby but occasionally need javascript for the browser frontend and use the Chrome console to debug the javascript code.</p>\n\n<p>Sometimes it is difficult to follow what code line produces the output, I have to crosscheck at the right end of the line to see the linenumber which is not easy if there is a lot of content, also this linenumber not always corresponds with the line in the sourcefile, there is often an offset when using a template.</p>\n\n<p>In Ruby you have the <code>__FILE__</code> constant which contains the sourcecode filepath and the <code>__LINE__</code> constant with the linenumber of the code being executed.</p>\n\n<p>So a <code>p [__LINE__, \"what i want to view\"]</code> gives me the linenumber followed by \"what i want to view\". Is there a javascript/Chrome equivalent ?</p>\n\n<p>For the moment I use </p>\n\n<pre><code>console.log(20, \"what I want to view\")\n</code></pre>\n\n<p>for code on line 20 but you can imagine that has to be changed a lot.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "searchkick"], "answers": [{"tags": [], "owner": {"reputation": 2031, "user_id": 2337830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a378c6d6daf4fb5ec84b9079db4d5d60?s=128&d=identicon&r=PG", "display_name": "tombeynon", "link": "https://stackoverflow.com/users/2337830/tombeynon"}, "is_accepted": false, "score": 2, "last_activity_date": 1519674702, "last_edit_date": 1519674702, "creation_date": 1519141014, "answer_id": 48888868, "question_id": 48882785, "link": "https://stackoverflow.com/questions/48882785/searchkick-requests-together-with-active-record-requests-rails/48888868#48888868", "title": "searchkick requests together with active record requests rails", "body": "<p>It appears SearchKick doesn't allow you to chain a search onto an ActiveRecord Relation like that. It uses ElasticSearch to search instead of your database so if you did that you would be querying two databases for the information. However, <a href=\"https://github.com/ankane/searchkick#querying\" rel=\"nofollow noreferrer\">it does provide a <code>where</code> option</a> for the <code>search</code> method:</p>\n\n<pre><code>Article.search(query, where: {user_id: user_id})\n</code></pre>\n\n<p>If you absolutely have to make the ActiveRecord query first, you could get the IDs from the first query and provide them to the second. </p>\n\n<pre><code>ids = Article.where(user_id: user_id)\nArticle.search(query, where: {id: ids})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 11137242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32f50cf8efccb6c5290e1500b1fe04c9?s=128&d=identicon&r=PG&f=1", "display_name": "Zeaneth", "link": "https://stackoverflow.com/users/11137242/zeaneth"}, "is_accepted": false, "score": 0, "last_activity_date": 1597911034, "last_edit_date": 1597911034, "creation_date": 1597910722, "answer_id": 63500837, "question_id": 48882785, "link": "https://stackoverflow.com/questions/48882785/searchkick-requests-together-with-active-record-requests-rails/63500837#63500837", "title": "searchkick requests together with active record requests rails", "body": "<p>You can use the method <code>records</code> so the results can be filtered via a <code>where</code> method. Like this:</p>\n<pre><code>@articles = Article.search(query).records.where(user_id: user_id)\n</code></pre>\n<p>If your search method returns a <code>Searchkick::Results</code> object, then you won't have the <code>records</code> method, which I would turn around by explicitly asking for an <code>Elasticsearch::Model::Response::Response</code> via the <code>__elasticsearch__</code> method. Like this:</p>\n<pre><code>@articles = Article.__elasticsearch__.search(query).records.where(user_id: user_id)\n</code></pre>\n<p>You can see more of how to access records with <a href=\"https://github.com/elastic/elasticsearch-rails/tree/master/elasticsearch-model#search-results-as-database-records\" rel=\"nofollow noreferrer\">elasticsearch-rails gem documentation</a></p>\n"}], "owner": {"reputation": 401, "user_id": 7156757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8768142e36048bf7d98b346110611ebc?s=128&d=identicon&r=PG&f=1", "display_name": "O.Vykhor", "link": "https://stackoverflow.com/users/7156757/o-vykhor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 379, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1597911034, "creation_date": 1519121673, "last_edit_date": 1519683414, "question_id": 48882785, "link": "https://stackoverflow.com/questions/48882785/searchkick-requests-together-with-active-record-requests-rails", "title": "searchkick requests together with active record requests rails", "body": "<p>I have a trouble. For example I have a model Article, and my <code>search_data</code> method below</p>\n\n<pre><code>def search_data\n  title: title,\n  body: body\nend\n</code></pre>\n\n<p>And I need to receive some records from my controller according to some attributes, for example:</p>\n\n<pre><code>def index\n  @articles = Article.where(user_id: user_id).search(query)\nend\n</code></pre>\n\n<p>But this approach received all data whos according to query in <code>search</code> method ignoring <code>where</code> method, while I need to search by <code>search</code> method among data received by <code>where</code> method. How to resolve this?</p>\n\n<p><strong>Update</strong></p>\n\n<p>Desirely to use <code>where</code> before <code>search</code> method, not the inside it</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1519121298, "post_id": 48882571, "comment_id": 84769353, "body": "<a href=\"https://robots.thoughtbot.com/ruby-2-keyword-arguments\" rel=\"nofollow noreferrer\">robots.thoughtbot.com/ruby-2-keyword-arguments</a>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1519121535, "post_id": 48882571, "comment_id": 84769503, "body": "You could <a href=\"http://ruby-doc.org/core-2.5.0/Hash.html#method-i-merge\" rel=\"nofollow noreferrer\"><code>merge</code></a> default values into the given hash."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1519122018, "post_id": 48882571, "comment_id": 84769843, "body": "What is <code>hash</code>?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1519122033, "post_id": 48882571, "comment_id": 84769860, "body": "What is <code>method</code>?"}, {"owner": {"reputation": 367, "user_id": 7852372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ukz2Q.jpg?s=128&g=1", "display_name": "rhunal", "link": "https://stackoverflow.com/users/7852372/rhunal"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1519122302, "post_id": 48882571, "comment_id": 84770065, "body": "@sawa why are you asking such questions?"}], "answers": [{"comments": [{"owner": {"reputation": 367, "user_id": 7852372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ukz2Q.jpg?s=128&g=1", "display_name": "rhunal", "link": "https://stackoverflow.com/users/7852372/rhunal"}, "edited": false, "score": 0, "creation_date": 1519121795, "post_id": 48882619, "comment_id": 84769682, "body": "is there any better way to dry those three lines?"}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "reply_to_user": {"reputation": 367, "user_id": 7852372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ukz2Q.jpg?s=128&g=1", "display_name": "rhunal", "link": "https://stackoverflow.com/users/7852372/rhunal"}, "edited": false, "score": 0, "creation_date": 1519122032, "post_id": 48882619, "comment_id": 84769859, "body": "sure, use <code>merge</code>  as @Stefan proposed. see my update."}, {"owner": {"reputation": 367, "user_id": 7852372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ukz2Q.jpg?s=128&g=1", "display_name": "rhunal", "link": "https://stackoverflow.com/users/7852372/rhunal"}, "edited": false, "score": 0, "creation_date": 1519127183, "post_id": 48882619, "comment_id": 84773559, "body": "I want to use this logic inside the <code>method</code>, so that method can be called without passing an arguments."}, {"owner": {"reputation": 367, "user_id": 7852372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ukz2Q.jpg?s=128&g=1", "display_name": "rhunal", "link": "https://stackoverflow.com/users/7852372/rhunal"}, "edited": false, "score": 0, "creation_date": 1519128981, "post_id": 48882619, "comment_id": 84774704, "body": "<code>merge</code> idea is not useful in this case."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 367, "user_id": 7852372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ukz2Q.jpg?s=128&g=1", "display_name": "rhunal", "link": "https://stackoverflow.com/users/7852372/rhunal"}, "edited": false, "score": 0, "creation_date": 1519158733, "post_id": 48882619, "comment_id": 84793100, "body": "@Rhunal what do you mean the method can be called without passing arguments? You mean you want a <code>Hash</code>?"}, {"owner": {"reputation": 367, "user_id": 7852372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ukz2Q.jpg?s=128&g=1", "display_name": "rhunal", "link": "https://stackoverflow.com/users/7852372/rhunal"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1519187429, "post_id": 48882619, "comment_id": 84801808, "body": "@engineersmnky I want to pass hash as an argument to the method, please see the answer below."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 367, "user_id": 7852372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ukz2Q.jpg?s=128&g=1", "display_name": "rhunal", "link": "https://stackoverflow.com/users/7852372/rhunal"}, "edited": false, "score": 1, "creation_date": 1519187538, "post_id": 48882619, "comment_id": 84801834, "body": "@Rhunal this answer is the DRYest version as requested and can easily be adapted to a method. eg <code>def sent_email(args={}); DEFAULTS.merge(args);end</code>"}], "tags": [], "owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "is_accepted": true, "score": 3, "last_activity_date": 1519122235, "last_edit_date": 1519122235, "creation_date": 1519121258, "answer_id": 48882619, "question_id": 48882571, "link": "https://stackoverflow.com/questions/48882571/how-to-set-default-values-while-passing-hash-as-an-argument-to-ruby-method/48882619#48882619", "title": "How to set default values while passing hash as an argument to ruby method?", "body": "<p>Is it better?</p>\n\n<pre><code>args[:file_type] ||= 'html'\n\n\n&gt; args = {file_type: 'html', css_tag: 'title'}\n# =&gt; {:file_type=&gt;\"html\", :css_tag=&gt;\"title\"} \n&gt; args[:file_type] ||= 'last'\n# =&gt; \"html\" \n&gt; args[:occurence] ||= 'last'\n# =&gt; \"last\" \n&gt; args\n# =&gt; {:file_type=&gt;\"html\", :css_tag=&gt;\"title\", :occurence=&gt;\"last\"}  \n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<pre><code>DEFAULTS = {file_type: \"html\", css_tag: \"title\", occurence: \"last\"}\nargs = {}\nothers = {file_type: \"xml\", css_tag: \"h1\"}\n\nDEFAULTS.merge(args) # =&gt; {:file_type=&gt;\"html\", :css_tag=&gt;\"title\", :occurence=&gt;\"last\"}\nDEFAULTS.merge(others) # =&gt; {:file_type=&gt;\"xml\", :css_tag=&gt;\"h1\", :occurence=&gt;\"last\"}\n</code></pre>\n"}], "owner": {"reputation": 367, "user_id": 7852372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ukz2Q.jpg?s=128&g=1", "display_name": "rhunal", "link": "https://stackoverflow.com/users/7852372/rhunal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 48882619, "answer_count": 1, "score": -3, "last_activity_date": 1519128937, "creation_date": 1519121116, "last_edit_date": 1519127385, "question_id": 48882571, "link": "https://stackoverflow.com/questions/48882571/how-to-set-default-values-while-passing-hash-as-an-argument-to-ruby-method", "title": "How to set default values while passing hash as an argument to ruby method?", "body": "<p>Is there any better way to set default values of <code>hash</code> parameters in below ruby <code>method</code>?</p>\n\n<pre><code>def sent_email(args)\n  args[:file_type] = 'html' if args[:file_type].nil?\n  args[:css_tag] = 'title' if args[:css_tag].nil?\n  args[:occurrence] = 'last' if args[:occurrence].nil?\nend\n</code></pre>\n\n<p>I want to build such <code>method</code>, when no arguments are passed, then it should take default values of hash.</p>\n\n<p>If such method is called without an arguments, then it should not give below error.</p>\n\n<p><code>1.9.3-p0 :040 &gt; sent_email</code></p>\n\n<pre><code>ArgumentError: wrong number of arguments (0 for 1)\n</code></pre>\n"}, {"tags": ["ruby", "csv"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 2, "creation_date": 1519120359, "post_id": 48882247, "comment_id": 84768719, "body": "Paste relevant code fragment into your question instead of pasting screenshot."}, {"owner": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1519120606, "post_id": 48882247, "comment_id": 84768900, "body": "I&#39;ve edited the question"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1519120865, "post_id": 48882247, "comment_id": 84769077, "body": "Now the code doesn&#39;t have line 24"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1519121033, "post_id": 48882247, "comment_id": 84769173, "body": "Does the event_type always transition from ALARM_OPENED to ALARM_NORMALIZED and than either back to ALARM_OPENED or to the final event_type of ALARM_CLOSED?"}, {"owner": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1519121085, "post_id": 48882247, "comment_id": 84769204, "body": "@SergioTulentsev ah my bad. Line 24 was basically #time[0] - time[1] = 2 seconds"}, {"owner": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1519121545, "post_id": 48882247, "comment_id": 84769510, "body": "@Stefan Yes, the purpose is to count how many times it transit from ALARM_OPENED to ALARM_NORMALIZED"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1519121689, "post_id": 48882247, "comment_id": 84769601, "body": "And does your example code work accordingly? (hard to say without some context)"}, {"owner": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1519123634, "post_id": 48882247, "comment_id": 84771092, "body": "@Stefan The comparison I\u2019m making in my sample code assumes it would be ALARM_OPENED, ALARM_NORMALIZED, ALARM_OPENED, ALARM_NORMALIZED. I would like it to compare row.next until it meets the toggle criteria."}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "edited": false, "score": 0, "creation_date": 1519175540, "post_id": 48895405, "comment_id": 84799162, "body": "I&#39;ve edited the data sample. I was wondering if your code could be altered to identify the toggling of alarm from opened to normalized?"}], "tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1519166491, "creation_date": 1519166491, "answer_id": 48895405, "question_id": 48882247, "link": "https://stackoverflow.com/questions/48882247/how-to-compare-alternating-rows-in-csv-using-ruby/48895405#48895405", "title": "How to compare alternating rows in CSV using RUBY", "body": "<p>If you can assume that you always have a bunch of OPENED/NORMALIZED pairs, you can slice the array into pairs:</p>\n\n<pre><code>event_type.each_slice(2) do |opened, normalized|\n  break unless normalized # unpaired event at the end\n  # whatever you want to do with the two events here\nend\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 9320758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1956448207702706/picture?type=large", "display_name": "Joshua Ng", "link": "https://stackoverflow.com/users/9320758/joshua-ng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519175431, "creation_date": 1519120211, "last_edit_date": 1519175431, "question_id": 48882247, "link": "https://stackoverflow.com/questions/48882247/how-to-compare-alternating-rows-in-csv-using-ruby", "title": "How to compare alternating rows in CSV using RUBY", "body": "<p>I have a data set that consists thousand of rows. I would like to count how many times an alarm toggle between ALARM_OPENED and ALARM_NORMALIZED </p>\n\n<p>Here is a data sample. The Alarm toggle twice and hence ideally the <code>count = 2</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/FQxeE.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FQxeE.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>The issue now is I cannot figure how to </p>\n\n<p>1) compare  ALARM _OPENED and ALARM_NORMALIZED for the event type</p>\n\n<p>2) To compare the difference in time between the change in event (the toggling should happen within a time frame of two seconds.)</p>\n\n<pre><code>count = 0 \n#loop this \nif event_type[0] = 'ALARM_OPENED' \n  if event_type[1] = 'ALARM_NORMALIZED'\n    #time[0] - time[1] = 2 seconds\n    count = count + 1\n  end\nend\n\np count\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "hash"], "comments": [{"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1519119590, "post_id": 48881941, "comment_id": 84768235, "body": "where is <code>getting_hash</code> used?"}, {"owner": {"reputation": 898, "user_id": 6162996, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/oLM0m.jpg?s=128&g=1", "display_name": "Alexander Gorg", "link": "https://stackoverflow.com/users/6162996/alexander-gorg"}, "reply_to_user": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1519119763, "post_id": 48881941, "comment_id": 84768347, "body": "@apneadiving class VideosController &lt; ApplicationController"}, {"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1519120080, "post_id": 48881941, "comment_id": 84768550, "body": "how? we dont see this in your code samples"}, {"owner": {"reputation": 898, "user_id": 6162996, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/oLM0m.jpg?s=128&g=1", "display_name": "Alexander Gorg", "link": "https://stackoverflow.com/users/6162996/alexander-gorg"}, "reply_to_user": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1519120262, "post_id": 48881941, "comment_id": 84768647, "body": "@apneadiving updated"}, {"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1519120553, "post_id": 48881941, "comment_id": 84768871, "body": "what if you do <code>write_to_file({id: 12, title: &quot;title&quot;, desc: &quot;desc&quot;})</code>?"}, {"owner": {"reputation": 898, "user_id": 6162996, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/oLM0m.jpg?s=128&g=1", "display_name": "Alexander Gorg", "link": "https://stackoverflow.com/users/6162996/alexander-gorg"}, "reply_to_user": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1519121054, "post_id": 48881941, "comment_id": 84769186, "body": "JSON::ParserError (lexical error: invalid char in json text.                          {&quot;12&quot;=&gt;{:id=&gt;&quot;12&quot;, :title=&gt;                      (right here) ------^ ): I&#39;ll add this to the question with pretty formatting"}, {"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1519121127, "post_id": 48881941, "comment_id": 84769236, "body": "seems it is saved as ruby hash, not json"}, {"owner": {"reputation": 898, "user_id": 6162996, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/oLM0m.jpg?s=128&g=1", "display_name": "Alexander Gorg", "link": "https://stackoverflow.com/users/6162996/alexander-gorg"}, "reply_to_user": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1519121492, "post_id": 48881941, "comment_id": 84769475, "body": "look update 2 then, please"}, {"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 1, "creation_date": 1519121691, "post_id": 48881941, "comment_id": 84769602, "body": "I confirm: what is stored is a ruby hash, its not json. Not sure why though, is it the proper file? Is to json really called?"}, {"owner": {"reputation": 898, "user_id": 6162996, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/oLM0m.jpg?s=128&g=1", "display_name": "Alexander Gorg", "link": "https://stackoverflow.com/users/6162996/alexander-gorg"}, "reply_to_user": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1519121790, "post_id": 48881941, "comment_id": 84769677, "body": "My clue is that when it is called for variable it contains &quot;{\\&quot;12\\&quot;:{\\&quot;id\\&quot;:12,\\&quot;title\\&quot;:\\&quot;How to make it work?\\&quot;,\\&quot;desc\\&quot;:\\&quot;No idea...\\&quot;}}&quot;, but in file - look in the question."}, {"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1519122080, "post_id": 48881941, "comment_id": 84769895, "body": "the code looks good, you sure you send the proper file name to <code>read_from_file</code> ?"}, {"owner": {"reputation": 898, "user_id": 6162996, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/oLM0m.jpg?s=128&g=1", "display_name": "Alexander Gorg", "link": "https://stackoverflow.com/users/6162996/alexander-gorg"}, "reply_to_user": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1519122364, "post_id": 48881941, "comment_id": 84770124, "body": "unfortunately..."}, {"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 1, "creation_date": 1519122825, "post_id": 48881941, "comment_id": 84770498, "body": "<code>File.read(&quot;foo.json&quot;)</code> =&gt; <code>&quot;{\\&quot;12\\&quot;:{\\&quot;id\\&quot;:\\&quot;12\\&quot;,\\&quot;title\\&quot;:\\&quot;How to make it work?\\&quot;,\\&quot;description\\&quot;:\\&quot;No idea...\\&quot;},\\&quot;14\\&quot;:{\\&quot;id\\&quot;:\\&quot;14\\&quot;,\\&quot;title\\&quot;:\\&quot;Yoga\\&quot;,\\&quot;descri&zwnj;&#8203;ption\\&quot;:\\&quot;Guide\\&quot;}}&quot;</code> and  <code>JSON.parse(File.read(&quot;foo.json&quot;))</code> =&gt; <code>{&quot;12&quot;=&gt;{&quot;id&quot;=&gt;&quot;12&quot;, &quot;title&quot;=&gt;&quot;How to make it work?&quot;, &quot;description&quot;=&gt;&quot;No idea...&quot;}, &quot;14&quot;=&gt;{&quot;id&quot;=&gt;&quot;14&quot;, &quot;title&quot;=&gt;&quot;Yoga&quot;, &quot;description&quot;=&gt;&quot;Guide&quot;}}</code>"}, {"owner": {"reputation": 1266, "user_id": 6022100, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/dc0adea29934c8ee1c31f96bf85a7fbc?s=128&d=identicon&r=PG", "display_name": "rwold", "link": "https://stackoverflow.com/users/6022100/rwold"}, "edited": false, "score": 1, "creation_date": 1519126435, "post_id": 48881941, "comment_id": 84773071, "body": "I just tried your code, including file IO, and it worked perfectly. Either there&#39;s a subtle difference between the example input you&#39;ve given us (<code>test</code>) and what your code is actually generating, or there&#39;s a bug in your stack that has been fixed in later versions (I&#39;m using Rails 5.1, ruby 2.4.0; json 1.8.3). You might find it helpful to share the versions you&#39;re using."}], "answers": [{"comments": [{"owner": {"reputation": 898, "user_id": 6162996, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/oLM0m.jpg?s=128&g=1", "display_name": "Alexander Gorg", "link": "https://stackoverflow.com/users/6162996/alexander-gorg"}, "edited": false, "score": 0, "creation_date": 1519236652, "post_id": 48884524, "comment_id": 84831757, "body": "It doesn&#39;t explain why json parsing fails, but still it works! Thanks!"}], "tags": [], "owner": {"reputation": 71, "user_id": 8005454, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-p-rqQD59PD4/AAAAAAAAAAI/AAAAAAAAACk/zymBuheQLso/photo.jpg?sz=128", "display_name": "ahmed eshra", "link": "https://stackoverflow.com/users/8005454/ahmed-eshra"}, "is_accepted": true, "score": 1, "last_activity_date": 1519126860, "creation_date": 1519126860, "answer_id": 48884524, "question_id": 48881941, "link": "https://stackoverflow.com/questions/48881941/saving-hash-as-json-and-getting-it-back-trouble-in-ruby-on-rails/48884524#48884524", "title": "Saving hash as json and getting it back trouble in ruby on rails", "body": "<p>I think passing the object itself with to_json conversion, is better for what you need and it will be saved as hash.</p>\n\n<pre><code>def getting_hash\n    video = Video.new\n    video.id = 12\n    video.title = \"How to make it work?\"\n    video.desc = \"No idea...\"\n    # Removing the hash conversion step\n    write_to_file(video)\nend\n</code></pre>\n"}], "owner": {"reputation": 898, "user_id": 6162996, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/oLM0m.jpg?s=128&g=1", "display_name": "Alexander Gorg", "link": "https://stackoverflow.com/users/6162996/alexander-gorg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 48884524, "answer_count": 1, "score": 0, "last_activity_date": 1519236874, "creation_date": 1519119284, "last_edit_date": 1519236874, "question_id": 48881941, "link": "https://stackoverflow.com/questions/48881941/saving-hash-as-json-and-getting-it-back-trouble-in-ruby-on-rails", "title": "Saving hash as json and getting it back trouble in ruby on rails", "body": "<p>I'm saving the result of this method to file in json format:</p>\n\n<pre><code>class VideosController &lt; ApplicationController\n    ...\n\n    def getting_hash\n        video = Video.new\n        video.id = 12\n        video.title = \"How to make it work?\"\n        video.desc = \"No idea...\"\n        video_hash = Hash.new\n        video_hash[video.id] = {id: video.id, title: video.title, desc: video.desc}\n        write_to_file(video_hash)\n    end\n\n    ...\nend\n</code></pre>\n\n<p>So for saving to the file I use:</p>\n\n<pre><code>  def write_to_file(model)\n    path  = \"#{Rails.root}/public/my_file.cache\"\n    open(path, 'w') { |f|\n      f.write(model.to_json)\n    }\n  end\n</code></pre>\n\n<p>Seems like vanilla, but when I use:\n     read_from_file(my_file.cache)</p>\n\n<pre><code>  def read_from_file(file_name)\n    path = Rails.root + \"public/#{file_name}\"\n    file = File.read(path)\n    hash_to_return = JSON.parse(file)\n  end\n</code></pre>\n\n<p>It returns not the hash, but an array! </p>\n\n<pre><code>NoMethodError (undefined method `id' for #&lt;Array:0x007f1926325460&gt;):\n</code></pre>\n\n<p>And when I check:</p>\n\n<pre><code>[\"12\", {\"id\"=&gt;\"12\", \"title\"=&gt;\"How to make it work?\", \"description\"=&gt;\"No idea...\"}]\n</code></pre>\n\n<p>I don't understand how is that possible, because if I use variables it makes everything perfect like:</p>\n\n<pre><code>(byebug) test = {\"12\":{\"id\":12,\"title\":\"How to make it work?\",\"desc\":\"No idea...\"}}\n{:\"12\"=&gt;{:id=&gt;12, :title=&gt;\"How to make it work?\", :desc=&gt;\"No idea...\"}}\n(byebug) test2 = test.to_json\n\"{\\\"12\\\":{\\\"id\\\":12,\\\"title\\\":\\\"How to make it work?\\\",\\\"desc\\\":\\\"No idea...\\\"}}\"\n(byebug) JSON.parse(test2)\n{\"12\"=&gt;{\"id\"=&gt;12, \"title\"=&gt;\"How to make it work?\", \"desc\"=&gt;\"No idea...\"}}\n</code></pre>\n\n<p>Please, help me with getting correct hashes back! Any ideas are highly appreciated!</p>\n\n<p><strong>UPDATE</strong></p>\n\n<pre><code>JSON::ParserError (lexical error: invalid char in json text.\n                         {\"12\"=&gt;{:id=&gt;\"12\", :title=&gt;\n                     (right here) ------^\n):\n</code></pre>\n\n<p><strong>UPDATE 2</strong>\nmy_file.cache's output:\n{\"12\":{\"id\":\"12\",\"title\":\"How to make it work?\",\"description\":\"No idea...\"},\"14\":{\"id\":\"14\",\"title\":\"Yoga\",\"description\":\"Guide\"}}</p>\n\n<p><strong>UPDATE 3</strong>\nFor now I've overriden this situation with: <code>video_hash = Hash[*hash_to_return.flatten]</code> and got the desired format.\nSo back home I'll try with running plain ruby file (as rwold said) and also I'll test the approach by ahmed eshra.\nSincere thanks to all who participated!</p>\n\n<p><strong><em>UPDATE 4</em></strong></p>\n\n<p>I tried my code as a plain ruby file outside Rails (with slight modifications) and it worked perfectly!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1519119434, "post_id": 48881900, "comment_id": 84768136, "body": "What&#39;s the problem? This seems to be working exactly as it should be?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1519119548, "post_id": 48881900, "comment_id": 84768208, "body": "<a href=\"http://www.dictionary.com/browse/outbound\" rel=\"nofollow noreferrer\"><b>Outbound</b></a> is not the same thing as <a href=\"http://www.dictionary.com/browse/out-of-bounds\" rel=\"nofollow noreferrer\">&quot;Out of bounds&quot;</a>. Were you just confused by this use of language?"}, {"owner": {"reputation": 21, "user_id": 8131780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa693d291d697dc3a0355b2a94839217?s=128&d=identicon&r=PG&f=1", "display_name": "Arun D", "link": "https://stackoverflow.com/users/8131780/arun-d"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1519124070, "post_id": 48881900, "comment_id": 84771439, "body": "Hi, Tom .!  I doesnt got any mail in my Gmail inbox. i dont know why it is? This is what the confusion be.  i had also configured smtp_settings properly.    &quot;Devise::Mailer#reset_password_instructions: processed outbound mail in 14.8ms&quot;"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1519133732, "post_id": 48881900, "comment_id": 84777765, "body": "<i>&quot;processed outbound mail&quot;</i> means <b>it worked</b>. Maybe the email is getting stuck somewhere else - e.g. by your firewall, junk mail folder, or a mail interceptor like <code>letter_opener</code>, <code>mailtrap</code> or an <code>Action Mailer Interceptor</code>?"}, {"owner": {"reputation": 21, "user_id": 8131780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa693d291d697dc3a0355b2a94839217?s=128&d=identicon&r=PG&f=1", "display_name": "Arun D", "link": "https://stackoverflow.com/users/8131780/arun-d"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1521463823, "post_id": 48881900, "comment_id": 85726919, "body": "thanks Mr Tom Lord. My mail has security level high, i had reduced the security level now its working fine"}], "owner": {"reputation": 21, "user_id": 8131780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa693d291d697dc3a0355b2a94839217?s=128&d=identicon&r=PG&f=1", "display_name": "Arun D", "link": "https://stackoverflow.com/users/8131780/arun-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1519119143, "creation_date": 1519119143, "question_id": 48881900, "link": "https://stackoverflow.com/questions/48881900/devisemailerreset-password-instructions-outbound", "title": "DeviseMailer#reset_password_instructions Outbound", "body": "<p>While in press forgort password in devise temple getting executed by i'm getting out of bound mail like below.</p>\n\n<pre><code> Rendering devise/mailer/reset_password_instructions.html.erb\n Rendered devise/mailer/reset_password_instructions.html.erb (0.7ms)\n DeviseMailer#reset_password_instructions: processed outbound mail in 14.8ms\n</code></pre>\n\n<p>but mailer template is getting rendered in my console.</p>\n\n<pre><code>Mime-Version: 1.0\nContent-Type: text/html;\n charset=UTF-8\nContent-Transfer-Encoding: 7bit\n\n&lt;p&gt;Hello arun.yinyan@gmail.com!&lt;/p&gt;\n\n&lt;p&gt;Someone has requested a link to change your password. You can do this through the link below.&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=\"http://localhost:3000/users/password/edit?reset_password_token=92RT59FWsw_duH1Y5kbg\"&gt;Change my password&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;If you didn't request this, please ignore this email.&lt;/p&gt;\n&lt;p&gt;Your password won't change until you access the link above and create a new one.&lt;/p&gt;\n\nRedirected to http://localhost:3000/users/sign_in\n</code></pre>\n\n<p>Completed 302 Found in 1930ms (ActiveRecord: 103.3ms)</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 4480, "user_id": 259889, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/aba1af6d6197093c880797a82e1bc2a2?s=128&d=identicon&r=PG", "display_name": "Sid", "link": "https://stackoverflow.com/users/259889/sid"}, "edited": false, "score": 0, "creation_date": 1519115540, "post_id": 48880769, "comment_id": 84765627, "body": "<code>self</code> refers to the class and not instance."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1519116260, "post_id": 48880769, "comment_id": 84766053, "body": "Why do you think it can?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1519116394, "post_id": 48880769, "comment_id": 84766123, "body": "Why is <code>last_payment_gathering_information</code> a class method that operates solely on <code>Payment.first</code>? Can you explain what the methods are supposed to do?"}, {"owner": {"reputation": 163, "user_id": 8036369, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-VWQVfsqCPYI/AAAAAAAAAAI/AAAAAAAAAWw/zzdKyhG7L98/photo.jpg?sz=128", "display_name": "romss182", "link": "https://stackoverflow.com/users/8036369/romss182"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1519116802, "post_id": 48880769, "comment_id": 84766363, "body": "@Stefan, I simplified the method, I&#39;ll edit and put the original method. This method aims at getting the last Payment. I need to add the second method (update_message_business_id) to update the information."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1519115817, "post_id": 48880797, "comment_id": 84765790, "body": "From the <a href=\"http://ruby-doc.org/core-2.5.0/doc/syntax/modules_and_classes_rdoc.html#label-Visibility\" rel=\"nofollow noreferrer\">docs</a>: <i>&quot;A private method may not be called with a receiver, not even <code>self</code>&quot;</i>"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1519115993, "post_id": 48880797, "comment_id": 84765887, "body": "@Stefan I have to mention that this is not true about setter methods, you can do <code>self.foo = &#39;bar&#39;</code> even if <code>foo</code> is private."}, {"owner": {"reputation": 163, "user_id": 8036369, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-VWQVfsqCPYI/AAAAAAAAAAI/AAAAAAAAAWw/zzdKyhG7L98/photo.jpg?sz=128", "display_name": "romss182", "link": "https://stackoverflow.com/users/8036369/romss182"}, "edited": false, "score": 0, "creation_date": 1519116038, "post_id": 48880797, "comment_id": 84765913, "body": "ok, thank you Marek. If I understand correctly, there is a kind of &#39;conflict&#39; on what the &#39;self&#39; refer to between the two methods ? If it works with public method but not private ones, I guess there are different mechanism when calling them. I&#39;ll do some research in that direction."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1519116132, "post_id": 48880797, "comment_id": 84765982, "body": "@MarekLipka that&#39;s correct. My point is that Ruby checks for an explicit receiver, not for the right context."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1519116134, "post_id": 48880797, "comment_id": 84765984, "body": "@MarekLipka <code>foo=</code> and <code>foo</code> are different methods."}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1519116370, "post_id": 48880797, "comment_id": 84766115, "body": "@sawa I never said otherwise."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1519116552, "post_id": 48880797, "comment_id": 84766211, "body": "@MarekLipka sawa is probably referring to <i>&quot;even if <code>foo</code> is private&quot;</i> which should have been <i>&quot;even if <code>foo=</code> is private&quot;</i> ;-)"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1519116564, "post_id": 48880797, "comment_id": 84766216, "body": "@MarekLipka Your &quot;you can do <code>self.foo = &#39;bar&#39;</code> even if <code>foo</code> is private&quot; strongly implies that you take <code>foo=</code> and <code>foo</code> as the same method."}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 163, "user_id": 8036369, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-VWQVfsqCPYI/AAAAAAAAAAI/AAAAAAAAAWw/zzdKyhG7L98/photo.jpg?sz=128", "display_name": "romss182", "link": "https://stackoverflow.com/users/8036369/romss182"}, "edited": false, "score": 1, "creation_date": 1519116567, "post_id": 48880797, "comment_id": 84766219, "body": "Oh, right, typo, sorry for that ;) Anyway I edited my answer, I hope it&#39;s better now. And @romss182 yes, <code>self</code> in these two contexts point to the objects of different classes."}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 3, "last_activity_date": 1519116856, "last_edit_date": 1519116856, "creation_date": 1519115480, "answer_id": 48880797, "question_id": 48880769, "link": "https://stackoverflow.com/questions/48880769/why-cant-the-method-be-used-in-private/48880797#48880797", "title": "Why can&#39;t the method be used in private?", "body": "<p>Directly, it's because you call this method with the explicit receiver, which you can't do in Ruby.</p>\n\n<p>To extend this answer, you can't really perform this private method call in this context, because <code>self</code> (which is always default receiver) in <code>last_payment_gathering_information</code> refers to <code>Payment</code> class, not the <code>Payment</code> instance (which has <code>update_message_business_id</code> private method).</p>\n"}], "owner": {"reputation": 163, "user_id": 8036369, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-VWQVfsqCPYI/AAAAAAAAAAI/AAAAAAAAAWw/zzdKyhG7L98/photo.jpg?sz=128", "display_name": "romss182", "link": "https://stackoverflow.com/users/8036369/romss182"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 48880797, "answer_count": 1, "score": -2, "last_activity_date": 1519116887, "creation_date": 1519115373, "last_edit_date": 1519116887, "question_id": 48880769, "link": "https://stackoverflow.com/questions/48880769/why-cant-the-method-be-used-in-private", "title": "Why can&#39;t the method be used in private?", "body": "<p>Why can <code>update_message_business_id</code> method not be used under <code>private</code>?</p>\n\n<pre><code>class Payment &lt; ApplicationRecord\n\n ...\n\n  def self.last_payment_gathering_information(customer_thread_id, employee_user_id, business_id)\n    payment = Payment.joins(:message).where(\"messages.customer_thread_id = ?\", customer_thread_id)\n       .where(\"messages.employee_user_id = ?\", employee_user_id)\n       .where(state: :gathering_information)\n       .order(id: :desc).first\n    payment.update_message_business_id(business_id) unless payment.nil?\n    payment\n  end\n\n  private\n\n  def update_message_business_id(business_setting_id)\n    business_setting = BusinessSetting.find_by_business_id(business_setting_id)\n    self.message.business_setting = business_setting\n    self.message.save\n  end\nend\n\n# =&gt; NoMethodError (private method `update_message_business_id' called for Payment:0x00007faac24548d0*\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "timezone", "timezone-offset"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1519111096, "post_id": 48879271, "comment_id": 84763422, "body": "There&#39;s <code>Time</code> in the core and then there&#39;s the extra stuff from the standard library that gets patched into <code>Time</code> when you <code>require &#39;time&#39;</code>, that&#39;s where you&#39;ll find <code>Time#iso8601</code> (which is just an alias for <code>Time#xmlschema</code>): <a href=\"http://ruby-doc.org/stdlib-2.5.0/libdoc/time/rdoc/index.html\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib-2.5.0/libdoc/time/rdoc/index.html</a>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1519114399, "post_id": 48879271, "comment_id": 84765009, "body": "On my system both return <code>Z</code>. What version of Ruby and Rails are you running?"}, {"owner": {"reputation": 25945, "user_id": 743464, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3a21f6147bcc6bd9d997d5cc5b5f87c?s=128&d=identicon&r=PG", "display_name": "Andy Ray", "link": "https://stackoverflow.com/users/743464/andy-ray"}, "edited": false, "score": 0, "creation_date": 1519165522, "post_id": 48879271, "comment_id": 84796241, "body": "I&#39;m running ruby 2.1.5 and Rails 3.2. Upgrading is not an option for this specific case unfortunately. I&#39;m asking how to get both to format in identical strings"}, {"owner": {"reputation": 195413, "user_id": 634824, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/889cf720c96957e615463b5c903a5e18?s=128&d=identicon&r=PG", "display_name": "Matt Johnson-Pint", "link": "https://stackoverflow.com/users/634824/matt-johnson-pint"}, "edited": false, "score": 2, "creation_date": 1519170392, "post_id": 48879271, "comment_id": 84797820, "body": "Note their not <i>exactly</i> the same.  Both have a +0 offset, but <code>Z</code> explicitly means UTC while <code>+00:00</code> <i>may</i> have come from UTC, or may have come from a local time that happens to be using a +0 offset at the timestamp given."}, {"owner": {"reputation": 25945, "user_id": 743464, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3a21f6147bcc6bd9d997d5cc5b5f87c?s=128&d=identicon&r=PG", "display_name": "Andy Ray", "link": "https://stackoverflow.com/users/743464/andy-ray"}, "reply_to_user": {"reputation": 195413, "user_id": 634824, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/889cf720c96957e615463b5c903a5e18?s=128&d=identicon&r=PG", "display_name": "Matt Johnson-Pint", "link": "https://stackoverflow.com/users/634824/matt-johnson-pint"}, "edited": false, "score": 0, "creation_date": 1519176846, "post_id": 48879271, "comment_id": 84799433, "body": "@MattJohnson that is something I didn&#39;t consider! That may be a crucial piece of info here"}], "owner": {"reputation": 25945, "user_id": 743464, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3a21f6147bcc6bd9d997d5cc5b5f87c?s=128&d=identicon&r=PG", "display_name": "Andy Ray", "link": "https://stackoverflow.com/users/743464/andy-ray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1700, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1519136374, "creation_date": 1519108617, "last_edit_date": 1519136374, "question_id": 48879271, "link": "https://stackoverflow.com/questions/48879271/ruby-rails-datetime-utc-iso8601-and-time-utc-iso8601-format-differently", "title": "Ruby/Rails DateTime.utc.iso8601 and Time.utc.iso8601 format differently", "body": "<p>Since Rails monkeypatches the date objects, it's not clear to me if this is a Rails specific behavior or a Ruby specific behavior.</p>\n\n<pre><code>DateTime.now.utc.iso8601\n=&gt; \"2018-02-20T06:31:44+00:00\"\n\nTime.now.utc.iso8601\n=&gt; \"2018-02-20T06:31:44Z\"\n</code></pre>\n\n<p>Note how one has the timezone string \"+00:00\" and the other has the string \"Z\". They're both equivalent in the iso8610 standard, but I'm trying to produce the same string given either starting class type.</p>\n\n<p><a href=\"http://ruby-doc.org/core-2.2.0/Time.html\" rel=\"nofollow noreferrer\">The Ruby docs on Time</a> don't even document the <code>#iso8601</code> method, they just show it in use in a different context, so I'm not sure how to figure out what's going on.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1519109351, "post_id": 48879252, "comment_id": 84762677, "body": "In addition to the excellent explanation given by Sergio Tulentsev, two suggestions since you are new in Ruby: 1. Bookmark the <a href=\"https://ruby-doc.org/core-2.3.3/\" rel=\"nofollow noreferrer\">Ruby Docs</a> page for your Ruby version. For instance, if you enter in this page <code>printf</code> in the <i>Methods</i> fields, you would have found out already much of what you have asked for. 2. Use <i>irb</i>, which comes with your Ruby installation, to play with expressions and see their result.... Finally, I would like to point out that there are no <i>equations</i> in the code you posted."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1519118334, "post_id": 48879252, "comment_id": 84767327, "body": "It would be really helpful if you could explain which <i>precise</i> parts of the documentation are unclear to you, so that the Ruby developers can improve their documentation. That way, future Rubyists won&#39;t stumble over the same problem again."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1519118385, "post_id": 48879252, "comment_id": 84767360, "body": "Also, it would help if you could clarify your question. What &quot;modulos&quot; are you talking about? There is only multiplication and addition in your question, not a single modulo in sight."}, {"owner": {"reputation": 111, "user_id": 8257082, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOqmS.jpg?s=128&g=1", "display_name": "Twistedben", "link": "https://stackoverflow.com/users/8257082/twistedben"}, "edited": false, "score": 0, "creation_date": 1519195130, "post_id": 48879252, "comment_id": 84804364, "body": "Sorry for the incorrect  verbiage as I don&#39;t research terms, I just code. Thank you for the excellent answers!"}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1519111334, "post_id": 48879286, "comment_id": 84763545, "body": "It appears that Ruby is disregarding the two periods in <code>3.*(a).+(2) #=&gt; 32</code>.  As well, <code>3.*a.+2 #=&gt; 36</code>, but <code>(3.).is_a?(Integer) #=&gt; SyntaxError: (irb):8: syntax error, unexpected &#39;)&#39;, expecting &#39;(&#39;</code> (under the right parenthesis following <code>3.</code>). Can you explain this behaviour?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1519111611, "post_id": 48879286, "comment_id": 84763678, "body": "@CarySwoveland: are <i>you</i> genuinely asking? :) I have a feeling that this kind of detail is two steps above OPs level (not to mention one never sees such expressions in real-life codebases)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1519113530, "post_id": 48879286, "comment_id": 84764613, "body": "@CarySwoveland what do you mean by <i>&quot;disregarding the two periods&quot;</i>?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1519113716, "post_id": 48879286, "comment_id": 84764684, "body": "I just meant it seems Ruby is evaluating that as <code>3*(a)+(2)</code>. I&#39;m just curious. It&#39;s getting late here in Victoria, Canada, so I&#39;ll check back tomorrow to see if you have any thoughts on this. btw, I am also curious how the (er, &quot;alleged&quot;) \u0440\u0443\u0441\u0441\u043a\u0438\u0439 meddling in the US election is playing there, but that&#39;s for a different time and place."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1519113950, "post_id": 48879286, "comment_id": 84764797, "body": "@CarySwoveland: well, it&#39;s kinda obvious. In <code>3.*(a).+(2)</code> all method arguments are parenthesized and methods are called &quot;left to right&quot;, as always (for example, <code>project.user.name</code>). in <code>3.*a.+2</code>, the expressions are parsed/folded &quot;inside-out&quot; (as in <code>puts rand 10</code>), so it is <code>3.*(a.+(2))</code> and you get corresponding result. Operator precedence does not apply here because these are unambiguous method calls."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1519114276, "post_id": 48879286, "comment_id": 84764946, "body": "re-reading what I posted, I must be not explaining this clearly, but it&#39;s the best I can do at the moment :)"}, {"owner": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1519115416, "post_id": 48879286, "comment_id": 84765558, "body": "@CarySwoveland I assume you were just tired, but <code>(3.).is_a?(Integer)</code> doesn&#39;t work because <code>3.</code> is not a valid float. <code>3.*(a)</code> on the other hand is just <code>3 * a</code>, but written as a method call (the <code>*</code> method called on the object <code>3</code> with an argument of <code>a</code>). As for the precedence, that was already well explained by Sergio."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "edited": false, "score": 1, "creation_date": 1519146334, "post_id": 48879286, "comment_id": 84786382, "body": "Sergio and @Michael, oh my!"}, {"owner": {"reputation": 111, "user_id": 8257082, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOqmS.jpg?s=128&g=1", "display_name": "Twistedben", "link": "https://stackoverflow.com/users/8257082/twistedben"}, "edited": false, "score": 1, "creation_date": 1519195337, "post_id": 48879286, "comment_id": 84804458, "body": "Thanks, it actually isn&#39;t above my level (I&#39;m lacking Ruby academia, but real world coding I&#39;m more than familiar with). I just hadn&#39;t run into this (mainly because like you mentioned, you wouldn&#39;t see it likely in a real world app like I work in. But wanted to reinforce my knowledge) and was wondering the right direction. Thank you for providing it for me! And the details."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 4, "last_activity_date": 1519109567, "last_edit_date": 1519109567, "creation_date": 1519108679, "answer_id": 48879286, "question_id": 48879252, "link": "https://stackoverflow.com/questions/48879252/ruby-printf-output-explained/48879286#48879286", "title": "Ruby printf output explained", "body": "<blockquote>\n  <p>why it equates to 1032</p>\n</blockquote>\n\n<p>It does <strong>not</strong>. What it does, it <strong>prints</strong> number 10 and then, immediately after, number 32 (result of 3 * 10 + 2).</p>\n\n<p>It is paramount to learn to distinguish the two: actual value of an expression and its side-effect (text printed to console, in this example).</p>\n\n<blockquote>\n  <p>I'm especially interested in understanding the modulos and the d and \\n</p>\n</blockquote>\n\n<p>Those are not modulos. <code>%d</code> is a format specifier. Means \"print an integer here\". Read up on <a href=\"https://apidock.com/ruby/Kernel/sprintf\" rel=\"nofollow noreferrer\"><code>sprintf</code></a>.</p>\n"}], "owner": {"reputation": 111, "user_id": 8257082, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOqmS.jpg?s=128&g=1", "display_name": "Twistedben", "link": "https://stackoverflow.com/users/8257082/twistedben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 557, "favorite_count": 0, "accepted_answer_id": 48879286, "answer_count": 1, "score": -3, "last_activity_date": 1519938525, "creation_date": 1519108558, "last_edit_date": 1519938525, "question_id": 48879252, "link": "https://stackoverflow.com/questions/48879252/ruby-printf-output-explained", "title": "Ruby printf output explained", "body": "<p>Can someone explain and break this down for me please and help me understand why it prints to 1032? I'm especially interested in understanding the % and the <code>d</code> and <code>\\n</code>. Links to the topic that addresses this would help as well.</p>\n\n<pre><code>a = 10\nb = 3.*(a).+(2)\nprintf(\"%d%d\\n\", a, b) ;\n#output = 1032\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1136, "user_id": 5215927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w06Fv.jpg?s=128&g=1", "display_name": "mr_sudaca", "link": "https://stackoverflow.com/users/5215927/mr-sudaca"}, "edited": false, "score": 0, "creation_date": 1519097067, "post_id": 48877373, "comment_id": 84758807, "body": "Isn\u2019t working because the last param you passed it\u2019s range, not scope. You can achieve this by passing a hash instead"}, {"owner": {"reputation": 149, "user_id": 7447394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ae37ddfcdfdf369aeedee29a2f184405?s=128&d=identicon&r=PG&f=1", "display_name": "PushkarKadam", "link": "https://stackoverflow.com/users/7447394/pushkarkadam"}, "edited": false, "score": 0, "creation_date": 1519098102, "post_id": 48877373, "comment_id": 84759060, "body": "Yes, I want to skip passing range and directly pass the scope."}], "answers": [{"tags": [], "owner": {"reputation": 2609, "user_id": 416122, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/2f5883c65768f5146bc6b79cce8bc29a?s=128&d=identicon&r=PG", "display_name": "gangelo", "link": "https://stackoverflow.com/users/416122/gangelo"}, "is_accepted": false, "score": 2, "last_activity_date": 1519097716, "creation_date": 1519097716, "answer_id": 48877465, "question_id": 48877373, "link": "https://stackoverflow.com/questions/48877373/default-arguments-in-ruby/48877465#48877465", "title": "Default arguments in ruby", "body": "<p>Have you considered passing a hash?</p>\n\n<pre><code>def stun(params)\n    body = {\n        voltage: 0,\n        frequency: 2,\n        range: '',\n        scope: ''\n    }\n    body.merge!(params)\n    response = body.to_json\nend\n\nstun({voltate: 1, frequency: 2, scope: 'universal'})\n=&gt; \"{\\\"voltage\\\":0,\\\"frequency\\\":2,\\\"range\\\":\\\"\\\",\\\"scope\\\":\\\"universal\\\",\\\"voltate\\\":1}\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 17, "last_activity_date": 1519098260, "last_edit_date": 1519098260, "creation_date": 1519097880, "answer_id": 48877489, "question_id": 48877373, "link": "https://stackoverflow.com/questions/48877373/default-arguments-in-ruby/48877489#48877489", "title": "Default arguments in ruby", "body": "<p>You've set up default values for the arguments, but you're still using positional arguments, the first argument will always go to <code>voltage</code>, the second to <code>frequency</code>, the third to <code>range</code>, the fourth to <code>scope</code>. Since you are passing 3 arguments, you end up passing <code>voltage</code>, <code>frequency</code>, and <code>range</code>.</p>\n\n<p>Those equal signs in the method call, aren't doing what you think. Instead of telling ruby which parameter is getting assigned, you are creating a local variable with those names:</p>\n\n<pre><code>stun(voltage = 1,frequency = 2,scope = \"universal\")\nputs [voltage, frequency, scope].inspect # =&gt; [1, 2, \"universal\"]\n</code></pre>\n\n<p>Ruby does have a way, with named parameters, to do what you want though:</p>\n\n<pre><code>def stun(voltage: 0, frequency: 0, range: \"\", scope: \"\")\n    body = {\n        :voltage =&gt; voltage,\n        :frequency =&gt; frequency,\n        :range =&gt; range,\n        :scope =&gt; scope\n    }\n\n    response = body.to_json\nend\n\nputs stun(voltage: 1, frequency: 2, scope: \"universal\")\n# =&gt; {\"voltage\":1,\"frequency\":2,\"range\":\"\",\"scope\":\"universal\"}\n</code></pre>\n\n<p>This is available (I believe) since Ruby 2.0. If you use these though, you'll always need to pass the parameters with their names, for instance:</p>\n\n<pre><code>stun(1, 2, \"\", \"universal\")\n</code></pre>\n\n<p>raises <code>wrong number of arguments (given 4, expected 0)</code> now. This isn't a bad thing, in my opinion, just something to keep in mind.</p>\n"}], "owner": {"reputation": 149, "user_id": 7447394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ae37ddfcdfdf369aeedee29a2f184405?s=128&d=identicon&r=PG&f=1", "display_name": "PushkarKadam", "link": "https://stackoverflow.com/users/7447394/pushkarkadam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11818, "favorite_count": 0, "accepted_answer_id": 48877489, "answer_count": 2, "score": 6, "last_activity_date": 1519098260, "creation_date": 1519096935, "question_id": 48877373, "link": "https://stackoverflow.com/questions/48877373/default-arguments-in-ruby", "title": "Default arguments in ruby", "body": "<p>I am trying to set up default parameter and I would like to skip passing an argument and assign particular arguments in the function call. But, I am not able to get the desired output.</p>\n\n<pre><code>require \"json\"\ndef stun(voltage = 0,frequency = 0,range = \"\",scope = \"\")\n    body = {\n        :voltage =&gt; voltage,\n        :frequency =&gt; frequency,\n        :range =&gt; range,\n        :scope =&gt; scope\n    }\n    response = body.to_json\nend\n\n\nstun(voltage = 1,frequency = 2,scope = \"universal\")\n</code></pre>\n\n<p>As you can see in the code above, I am trying to assign value to scope while keeping the range parameter an empty string. I am getting the following response.</p>\n\n<pre><code>\"{\\\"voltage\\\":1,\\\"frequency\\\":2,\\\"range\\\":\\\"universal\\\",\\\"scope\\\":\\\"\\\"}\"\n</code></pre>\n\n<p>My desired output would be to have range as an empty string and scope as \"universal\"</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activemodel"], "answers": [{"tags": [], "owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "is_accepted": false, "score": 0, "last_activity_date": 1519099713, "creation_date": 1519099713, "answer_id": 48877698, "question_id": 48877282, "link": "https://stackoverflow.com/questions/48877282/rails-validates-format-of-with-ip-addresses/48877698#48877698", "title": "rails validates_format_of with IP addresses", "body": "<p>While I'm still open to a nice eloquent one-liner within the Model itself, I was able to get this working through creating a concern:</p>\n\n<blockquote>\n  <p>models/concerns/ip_validator.rb</p>\n</blockquote>\n\n<pre><code>class IpValidator &lt; ActiveModel::Validator\n  def validate(record)\n    ips = record.ips_scan.split(',')\n    ips.each do |ip|\n      /([0-9]{1,3}\\.){3}[0-9]{1,3}(\\/([1-2][0-9]|[0-9]|3[0-2]))?(-([0-9]{1,3}))?/ =~ ip\n      record.errors.add(:ips_scan, ' is not valid') unless $LAST_MATCH_INFO\n    end\n  end\nend\n</code></pre>\n\n<p>The call in my model now looks like:</p>\n\n<pre><code>validates :ips_scan, :ips_exclude, ip: true, on: :update\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1519146984, "post_id": 48882016, "comment_id": 84786790, "body": "This is a much more eloquent solution, however it doesn&#39;t account for if the user passes in an IP range like <code>10.10.10.1-25</code>"}], "tags": [], "owner": {"reputation": 1854, "user_id": 669745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a4b0416684de65970e4d1b4da1bb290?s=128&d=identicon&r=PG", "display_name": "Panic", "link": "https://stackoverflow.com/users/669745/panic"}, "is_accepted": false, "score": 0, "last_activity_date": 1519119494, "creation_date": 1519119494, "answer_id": 48882016, "question_id": 48877282, "link": "https://stackoverflow.com/questions/48877282/rails-validates-format-of-with-ip-addresses/48882016#48882016", "title": "rails validates_format_of with IP addresses", "body": "<p>You can use this method in your custom validator to check an IP address</p>\n\n<pre><code>require 'ipaddr'\n\ndef valid_ip_addr?(ip_addr)\n  IPAddr.new(ip_addr)\n  true\nrescue IPAddr::InvalidAddressError =&gt; _error\n  false\nend\n</code></pre>\n"}], "owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 290, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1519119494, "creation_date": 1519096258, "question_id": 48877282, "link": "https://stackoverflow.com/questions/48877282/rails-validates-format-of-with-ip-addresses", "title": "rails validates_format_of with IP addresses", "body": "<p>I'm allowing a user to enter IP addresses in an input field which may be of different types delimited by a comma, such as (in no particular order):</p>\n\n<p><code>192.168.1.1,192.168.2.1-25,10.10.10.0/24,192.168.1.2</code></p>\n\n<p>This 'string' would get saved in my DB under <code>device.ips_to_scan</code>.</p>\n\n<p>I want to <code>validates_format_of</code> on these, but am finding it a little difficult to write a regex that seems to work in rails, while it does work on regex101 (<a href=\"https://regex101.com/r/nf2bnM/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/nf2bnM/1</a>):</p>\n\n<pre><code> validates_format_of :ips_scan, with: /\\A([0-9]{1,3}\\.){3}[0-9]{1,3}(\\/([1-2][0-9]|[0-9]|3[0-2]))?(-([0-9]{1,3}))?,?\\Z/i, on: :update\n</code></pre>\n\n<p><strong>This one is expected to fail:</strong></p>\n\n<pre><code>Started PUT \"/devices/2\" for 127.0.0.1 at 2018-02-19 22:03:15 -0500\nProcessing by DevicesController#update as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"EQCFG6/xoJHtP6Nd3oqaYRW6mypfEoCMrnio1yj6loP+KtvjgLZ9Gmhb0oTwCjD0RGH+qQuctZFVIvF5HBJcGw==\", \"device\"=&gt;{\"ips_scan\"=&gt;\"192.168.1.1,192.168.2.1-25,a.b.c.d\", \"ips_exclude\"=&gt;\"10.10.10.1\"}, \"commit\"=&gt;\"Save\", \"id\"=&gt;\"2\"}\n  User Load (0.8ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 ORDER BY \"users\".\"id\" ASC LIMIT $2  [[\"id\", 2], [\"LIMIT\", 1]]\n  Device Load (1.6ms)  SELECT  \"devices\".* FROM \"devices\" WHERE \"devices\".\"id\" = $1 LIMIT $2  [[\"id\", 2], [\"LIMIT\", 1]]\n   (0.5ms)  BEGIN\n  User Load (0.7ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 LIMIT $2  [[\"id\", 2], [\"LIMIT\", 1]]\n   (0.5ms)  ROLLBACK\nRedirected to http://localhost:3000/devices/2/edit\nCompleted 302 Found in 47ms (ActiveRecord: 12.1ms)\n</code></pre>\n\n<p><strong>...But this one should have worked:</strong></p>\n\n<pre><code>Processing by DevicesController#update as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"JJfmT/0l5MEDc+gUH/WHHp3bbgyzjGa0xTzaXM3E/WHLvbi30mI5SoYXmc0xdS2LzAALj+cCU6k+ZoPy+Sw3+Q==\", \"device\"=&gt;{\"ips_scan\"=&gt;\"192.168.1.1,192.168.2.1-25,192.168.1.2\", \"ips_exclude\"=&gt;\"10.10.10.1\"}, \"commit\"=&gt;\"Save\", \"id\"=&gt;\"2\"}\n  User Load (0.9ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 ORDER BY \"users\".\"id\" ASC LIMIT $2  [[\"id\", 2], [\"LIMIT\", 1]]\n  Device Load (0.7ms)  SELECT  \"devices\".* FROM \"devices\" WHERE \"devices\".\"id\" = $1 LIMIT $2  [[\"id\", 2], [\"LIMIT\", 1]]\n   (0.6ms)  BEGIN\n  User Load (0.7ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 LIMIT $2  [[\"id\", 2], [\"LIMIT\", 1]]\n   (0.6ms)  ROLLBACK\nRedirected to http://localhost:3000/devices/2/edit\nCompleted 302 Found in 17ms (ActiveRecord: 3.5ms)\n</code></pre>\n\n<p>Last thing I can think of, is that I do have strong parameters, but I'm permitting <code>ips_scan</code>, so that this shouldn't be an issue:</p>\n\n<pre><code>def update\n  if @device.update(device_params)\n    flash[:notice] = 'Successful update'\n    respond_with :edit, :device\n  else\n    flash[:warning] = 'Unable to update'\n    respond_with :edit, :device\n  end\nend\n\nprivate def device_params\n  params.require(:device).permit(:token, :ips_scan, :ips_exclude)\nend\n</code></pre>\n\n<p>I'm hoping you rubyist's out there have a eloquent solution.  The first thought that comes to mind is that I have to <code>split</code> the string, and check each element sequentially to ensure it matches instead.  </p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1519095050, "post_id": 48877106, "comment_id": 84758314, "body": "Why not go ahead and do it?"}, {"owner": {"reputation": 41, "user_id": 5244092, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/85dc8164b8fbf6a6c99e4a0912af1799?s=128&d=identicon&r=PG&f=1", "display_name": "alexnewby", "link": "https://stackoverflow.com/users/5244092/alexnewby"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1519095457, "post_id": 48877106, "comment_id": 84758402, "body": "Cause I have no idea how to do it. How can I do it unless someone shows me first? I read the entire regex doc and it didn&#39;t help one bit."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1519099667, "post_id": 48877106, "comment_id": 84759418, "body": "Are you required to use regexes for this?"}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 5244092, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/85dc8164b8fbf6a6c99e4a0912af1799?s=128&d=identicon&r=PG&f=1", "display_name": "alexnewby", "link": "https://stackoverflow.com/users/5244092/alexnewby"}, "is_accepted": false, "score": 0, "last_activity_date": 1519101209, "last_edit_date": 1519101209, "creation_date": 1519099829, "answer_id": 48877713, "question_id": 48877106, "link": "https://stackoverflow.com/questions/48877106/ruby-regex-take-consonants-and-move-them-to-end-of-wordstring-and-add-ay-af/48877713#48877713", "title": "Ruby/Regex: Take consonants and move them to end of word(string) and add &quot;ay&quot; after them", "body": "<p>Here's the answer:</p>\n\n<pre><code>def piglatinize(word)\n      if !word.downcase.split(\"\")[0].match(/[aeiou]/)\n        first_consonants = word.match(/\\b([^aeiou]{1,})/)\n        the_rest = word.gsub(/#{first_consonants}/, \"\")\n        new_word = \"#{the_rest}#{first_consonants}ay\"\n      end\n    end\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 5244092, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/85dc8164b8fbf6a6c99e4a0912af1799?s=128&d=identicon&r=PG&f=1", "display_name": "alexnewby", "link": "https://stackoverflow.com/users/5244092/alexnewby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1519101209, "creation_date": 1519094722, "last_edit_date": 1519099645, "question_id": 48877106, "link": "https://stackoverflow.com/questions/48877106/ruby-regex-take-consonants-and-move-them-to-end-of-wordstring-and-add-ay-af", "title": "Ruby/Regex: Take consonants and move them to end of word(string) and add &quot;ay&quot; after them", "body": "<p>I must \"piglatinize\" a word, meaning, take the first consonants in a word and move them to the end, and add \"ay\" at the end of that. For example:</p>\n\n<p>\"character\" to \"aracterchay\"    or    \"bundy\" to \"undybay\"</p>\n\n<p>This is what I have so far: </p>\n\n<pre><code>def piglatinize(word)\n  if !word.downcase.split(\"\")[0].match(/[aeiou]/)\n    first_consonants = word.match(/\\b([^aeiou]{1,})/)\n    the_rest = word.gsub(first_consonants, \"\")\n    new_word = the_rest + first_consonants + \"ay\"\n  end\nend\n</code></pre>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "controller", "rubygems", "spotify"], "comments": [{"owner": {"reputation": 3737, "user_id": 7417402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0362a30046be9244cf62d2a9fc6f8568?s=128&d=identicon&r=PG", "display_name": "Devstr", "link": "https://stackoverflow.com/users/7417402/devstr"}, "edited": false, "score": 0, "creation_date": 1519084683, "post_id": 48875903, "comment_id": 84755852, "body": "Please add full stacktrace of the exception"}, {"owner": {"reputation": 11, "user_id": 9383210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0730cc3d97797d4269a84db12457ccc?s=128&d=identicon&r=PG&f=1", "display_name": "jerusha", "link": "https://stackoverflow.com/users/9383210/jerusha"}, "reply_to_user": {"reputation": 3737, "user_id": 7417402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0362a30046be9244cf62d2a9fc6f8568?s=128&d=identicon&r=PG", "display_name": "Devstr", "link": "https://stackoverflow.com/users/7417402/devstr"}, "edited": false, "score": 0, "creation_date": 1519086049, "post_id": 48875903, "comment_id": 84756195, "body": "edited to add the stacktrace from the exception, sorry!"}, {"owner": {"reputation": 3737, "user_id": 7417402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0362a30046be9244cf62d2a9fc6f8568?s=128&d=identicon&r=PG", "display_name": "Devstr", "link": "https://stackoverflow.com/users/7417402/devstr"}, "edited": false, "score": 0, "creation_date": 1519086295, "post_id": 48875903, "comment_id": 84756263, "body": "Judging from the code RSPOTIFY.get returns nil <a href=\"https://github.com/guilhermesad/rspotify/blob/master/lib/rspotify/recommendations.rb\" rel=\"nofollow noreferrer\">github.com/guilhermesad/rspotify/blob/master/lib/rspotify/&hellip;</a>"}, {"owner": {"reputation": 3737, "user_id": 7417402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0362a30046be9244cf62d2a9fc6f8568?s=128&d=identicon&r=PG", "display_name": "Devstr", "link": "https://stackoverflow.com/users/7417402/devstr"}, "edited": false, "score": 0, "creation_date": 1519086816, "post_id": 48875903, "comment_id": 84756406, "body": "I suggest figuring out how to enable RestClient wire logs and look at what Spotify returns in response."}, {"owner": {"reputation": 1930, "user_id": 6015889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2359a5839ab1afea717f15dc0536449e?s=128&d=identicon&r=PG&f=1", "display_name": "Anthony L ", "link": "https://stackoverflow.com/users/6015889/anthony-l"}, "edited": false, "score": 1, "creation_date": 1519090188, "post_id": 48875903, "comment_id": 84757293, "body": "Are you authenticating your client prior to making this request?"}, {"owner": {"reputation": 110, "user_id": 7823348, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/17dd023c0e21968db8d855c33f7d7ada?s=128&d=identicon&r=PG", "display_name": "Matias Carpintini", "link": "https://stackoverflow.com/users/7823348/matias-carpintini"}, "edited": false, "score": 0, "creation_date": 1519092744, "post_id": 48875903, "comment_id": 84757864, "body": "I do not see the declaration of the @music variable, will it be that you did not declare it? admitting that you did not declare the varariable the error is logical."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9383210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0730cc3d97797d4269a84db12457ccc?s=128&d=identicon&r=PG&f=1", "display_name": "jerusha", "link": "https://stackoverflow.com/users/9383210/jerusha"}, "edited": false, "score": 0, "creation_date": 1522786747, "post_id": 49617326, "comment_id": 86284617, "body": "Sorry for the late reply - you&#39;re right, the docs don&#39;t mention you need to auth before working with any of the API. This fixed it for me too. Thanks!"}], "tags": [], "owner": {"reputation": 11, "user_id": 8776279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccd93eb56760c4d0b07c99939e84994a?s=128&d=identicon&r=PG&f=1", "display_name": "Laura", "link": "https://stackoverflow.com/users/8776279/laura"}, "is_accepted": false, "score": 0, "last_activity_date": 1522696387, "creation_date": 1522696387, "answer_id": 49617326, "question_id": 48875903, "link": "https://stackoverflow.com/questions/48875903/ruby-on-rails-nomethoderror-undefined-method-for-nilnilclass/49617326#49617326", "title": "Ruby on Rails NoMethodError: undefined method `[]&#39; for nil:NilClass", "body": "<p>I got a similar error as above when I tried to connect to the Spotify API. The documentation on rspotify missed out the fact that you need to run the authenticate method before you do anything with the API.</p>\n\n<p>i.e.</p>\n\n<pre><code>RSpotify.authenticate(\"&lt;your_client_id&gt;\", \"&lt;your_client_secret&gt;\")\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9383210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0730cc3d97797d4269a84db12457ccc?s=128&d=identicon&r=PG&f=1", "display_name": "jerusha", "link": "https://stackoverflow.com/users/9383210/jerusha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 736, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1522696387, "creation_date": 1519084209, "last_edit_date": 1519085847, "question_id": 48875903, "link": "https://stackoverflow.com/questions/48875903/ruby-on-rails-nomethoderror-undefined-method-for-nilnilclass", "title": "Ruby on Rails NoMethodError: undefined method `[]&#39; for nil:NilClass", "body": "<p>I'm new to ruby on rails and currently working on a web application which uses the 'rspotify' gem to interact with the Spotify API.</p>\n\n<p>I have a controller called 'genre' which I use to direct my search results from the index page. However, it won't let me initialize any variables inside the index function. </p>\n\n<p>This is what my controller looks like</p>\n\n<pre><code># genre_controller.rb\n  def index\n    if params[:search]\n      @genres = RSpotify::Recommendations.generate(limit: 20, seed_genres: ['country'])\n      # render :json =&gt; @songs\n    else\n      redirect_to root_path\n    end\n  end\n</code></pre>\n\n<p>This is what my my index page looks like</p>\n\n<pre><code>&lt;h1&gt;Genre#index&lt;/h1&gt;\n&lt;p&gt;Find me in app/views/genre/index.html.erb&lt;/p&gt;\n\n&lt;h1 class=\"page-header\"&gt;Music Matching &lt;%= params[:search] %&gt;&lt;/h1&gt;\n&lt;ul&gt;\n &lt;% @music.each do |music| %&gt;\n   &lt;li&gt;&lt;%= music.name %&gt; | &lt;%= link_to \"Show\", genre_path(music.id) %&gt;&lt;/li&gt;\n &lt;% end %&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>This is what my routes look like</p>\n\n<pre><code>  get 'genre/index'\n  get 'genre/show', to:'genre#show', as: 'genre'\n\n  get 'site/index'\n  root 'site#index'\n</code></pre>\n\n<p>I get an error on line 4 of my genre controller, where I call the RSpotify method. Any variable I try to instantiate there returns a NoErrorMethod. </p>\n\n<p>Any help is appreciated, thanks! </p>\n\n<p>Edit:</p>\n\n<p>Here's the exception I get from the console</p>\n\n<pre><code>NoMethodError (undefined method `[]' for nil:NilClass):\n\napp/controllers/genre_controller.rb:4:in `index'\nStarted GET \"/genre/index?utf8=%E2%9C%93&amp;search=hello\" for 127.0.0.1 at 2018-02-19 16:14:59 -0800\nProcessing by GenreController#index as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"search\"=&gt;\"hello\"}\nCompleted 500 Internal Server Error in 295ms\n</code></pre>\n\n<p>Here's the full tracestack from the exception</p>\n\n<pre><code>rspotify (1.27.0) lib/rspotify/recommendations.rb:101:in `initialize'\nrspotify (1.27.0) lib/rspotify/recommendations.rb:97:in `new'\nrspotify (1.27.0) lib/rspotify/recommendations.rb:97:in `generate'\napp/controllers/genre_controller.rb:4:in `index'\nactionpack (5.1.4) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'\nactionpack (5.1.4) lib/abstract_controller/base.rb:186:in `process_action'\nactionpack (5.1.4) lib/action_controller/metal/rendering.rb:30:in `process_action'\nactionpack (5.1.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'\nactivesupport (5.1.4) lib/active_support/callbacks.rb:131:in `run_callbacks'\nactionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'\nactionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'\nactionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'\nactivesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'\nactivesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'\nactivesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'\nactionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'\nactionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'\nactiverecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'\nactionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'\nactionview (5.1.4) lib/action_view/rendering.rb:30:in `process'\nactionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'\nactionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'\nactionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'\nactionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'\nactionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'\nactionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `each'\nactionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'\nactionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'\nrack (2.0.4) lib/rack/etag.rb:25:in `call'\nrack (2.0.4) lib/rack/conditional_get.rb:25:in `call'\nrack (2.0.4) lib/rack/head.rb:12:in `call'\nrack (2.0.4) lib/rack/session/abstract/id.rb:232:in `context'\nrack (2.0.4) lib/rack/session/abstract/id.rb:226:in `call'\nactionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'\nactiverecord (5.1.4) lib/active_record/migration.rb:556:in `call'\nactionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'\nactivesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'\nactionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'\nactionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'\nactionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'\nweb-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'\nweb-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'\nweb-console (3.5.1) lib/web_console/middleware.rb:18:in `catch'\nweb-console (3.5.1) lib/web_console/middleware.rb:18:in `call'\nactionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'\nrailties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'\nrailties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'\nactivesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'\nactivesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'\nactivesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'\nrailties (5.1.4) lib/rails/rack/logger.rb:24:in `call'\nsprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'\nactionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'\nactionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'\nrack (2.0.4) lib/rack/method_override.rb:22:in `call'\nrack (2.0.4) lib/rack/runtime.rb:22:in `call'\nactivesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'\nactionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'\nactionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'\nrack (2.0.4) lib/rack/sendfile.rb:111:in `call'\nrailties (5.1.4) lib/rails/engine.rb:522:in `call'\npuma (3.11.2) lib/puma/configuration.rb:225:in `call'\npuma (3.11.2) lib/puma/server.rb:624:in `handle_request'\npuma (3.11.2) lib/puma/server.rb:438:in `process_client'\npuma (3.11.2) lib/puma/server.rb:302:in `block in run'\npuma (3.11.2) lib/puma/thread_pool.rb:120:in `block in spawn_thread'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 2072, "user_id": 3389795, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiAJt.jpg?s=128&g=1", "display_name": "Shiko", "link": "https://stackoverflow.com/users/3389795/shiko"}, "is_accepted": false, "score": 1, "last_activity_date": 1519084522, "last_edit_date": 1519084522, "creation_date": 1519084189, "answer_id": 48875897, "question_id": 48875227, "link": "https://stackoverflow.com/questions/48875227/nested-resources-as-json-sorted-with-specific-columns/48875897#48875897", "title": "Nested resources as_json, sorted, with specific columns", "body": "<p>There are 2 solutions to implement the <strong>Order</strong> on AR:  </p>\n\n<p><strong>Solution #1:</strong><br>\nYou can order the model and its' associations using <strong>.order</strong> as below:  </p>\n\n<pre><code>Page.joins(sections: :fields).order(\"pages.order, sections.order, fields.order\")\n</code></pre>\n\n<p><strong>Reference:</strong><br>\n<a href=\"https://apidock.com/rails/ActiveRecord/QueryMethods/order\" rel=\"nofollow noreferrer\">https://apidock.com/rails/ActiveRecord/QueryMethods/order</a></p>\n\n<p><strong>Solution #2:</strong><br>\nAdd sorting to <strong>default scope</strong> as below:  </p>\n\n<pre><code>class Page \n  default_scope { order(order: :asc) }\nend\n\nclass Section \n  default_scope { order(order: :asc) }\nend\n\nclass Field \n  default_scope { order(order: :asc) }\nend\n</code></pre>\n\n<p><strong>Reference:</strong><br>\n<a href=\"https://apidock.com/rails/ActiveRecord/Base/default_scope/class\" rel=\"nofollow noreferrer\">https://apidock.com/rails/ActiveRecord/Base/default_scope/class</a></p>\n"}], "owner": {"reputation": 305, "user_id": 2600348, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/a867cf9853519e56bbae2aabba4aae35?s=128&d=identicon&r=PG", "display_name": "MGreenfield", "link": "https://stackoverflow.com/users/2600348/mgreenfield"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519084522, "creation_date": 1519079851, "question_id": 48875227, "link": "https://stackoverflow.com/questions/48875227/nested-resources-as-json-sorted-with-specific-columns", "title": "Nested resources as_json, sorted, with specific columns", "body": "<p>I have 3 resources: <code>pages</code>, <code>sections</code>, and <code>fields</code> each with <code>name</code> and <code>order</code> columns.</p>\n\n<p>My goal is to get a JSON representation of all of these resources, ordered by their order columns.</p>\n\n<p>Example output:</p>\n\n<pre><code>[\n  {\"name\": \"Page 1\", \"order\": 0, \"sections\":  [\n    {\"name\": \"Section 1\", \"order\": 0, \"fields\": [\n      {\"name\": \"Field 1\", \"order\": 0},\n      {\"name\": \"Field 2\", \"order\": 1}\n    ]},\n    {\"name\": \"Section 2\", \"order\": 0, \"fields\": [\n      {\"name\": \"Field 1\", \"order\": 0}\n    ]}\n  ]},\n  {\"name\": \"Page 2\", \"order\": 1, \"sections\": [\n    {\"name\": \"Section 1\", \"order\": 0, \"fields\": [\n      {\"name\": \"Field 1\", \"order\": 0}\n    ]}\n  ]}\n]\n</code></pre>\n\n<p>Note that the above is actual JSON (i.e. after running <code>to_json</code>).</p>\n\n<p>For the life of me, I can't figure out a way to do this with ActiveModel.</p>\n\n<p>My most successful attempt is something like this:</p>\n\n<pre><code>Page.joins(sections: :fields)\n  .as_json(only: [:name, :order], include: {\n    sections: {only: [:name, :order], include: {\n      fields: {only: [:prototype_id, :order]}\n    }}\n  })\n</code></pre>\n\n<p>This allows me to select the name and order, but then I have to recursively sort every array.</p>\n\n<p>If I try to let ActiveModel do the sorting, I have to select the specific columns in SQL, which requires me to join, which requires a distinct, which makes the JSON nesting very tricky...</p>\n\n<p>Can anyone point out what I'm doing wrong here?</p>\n\n<p>Thanks for your time.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 1, "creation_date": 1519079292, "post_id": 48875076, "comment_id": 84754165, "body": "can you show the output of the page?"}, {"owner": {"reputation": 33, "user_id": 9115831, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1982047225143005/picture?type=large", "display_name": "Chris", "link": "https://stackoverflow.com/users/9115831/chris"}, "reply_to_user": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1519079642, "post_id": 48875076, "comment_id": 84754298, "body": "can&#39;t figure out how to add a screenshot in the comments at the moment, but on the html page, this is printed after the unordered list -"}, {"owner": {"reputation": 33, "user_id": 9115831, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1982047225143005/picture?type=large", "display_name": "Chris", "link": "https://stackoverflow.com/users/9115831/chris"}, "reply_to_user": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1519079648, "post_id": 48875076, "comment_id": 84754300, "body": "[#&lt;Car id: 3, make: &quot;new&quot;, model: &quot;car&quot;, year: 0, color: &quot;4&quot;, user_id: 1, created_at: &quot;2018-02-19 21:31:50&quot;, updated_at: &quot;2018-02-19 22:04:20&quot;&gt;]"}, {"owner": {"reputation": 1962, "user_id": 63887, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0b4b25c5ff9291319d364b4cf6e7ad28?s=128&d=identicon&r=PG", "display_name": "cstack", "link": "https://stackoverflow.com/users/63887/cstack"}, "edited": false, "score": 0, "creation_date": 1519079700, "post_id": 48875076, "comment_id": 84754320, "body": "Could it be the <code>&lt;%=</code> in <code>&lt;%= current_user.cars.each do |car| %&gt;</code> ? The equals sign means it should output the result of that ruby code, and <code>each</code> outputs the array being iterated over"}], "answers": [{"tags": [], "owner": {"reputation": 2095, "user_id": 1172724, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c430604dc066eec3ca657502c55a2c9b?s=128&d=identicon&r=PG", "display_name": "Shani", "link": "https://stackoverflow.com/users/1172724/shani"}, "is_accepted": true, "score": 2, "last_activity_date": 1519079829, "last_edit_date": 1519079829, "creation_date": 1519079469, "answer_id": 48875153, "question_id": 48875076, "link": "https://stackoverflow.com/questions/48875076/why-is-my-object-printing-to-the-page-in-rails/48875153#48875153", "title": "Why is my object printing to the page in rails?", "body": "<p>you are itreating that hash and printing it at the same time </p>\n\n<p>remove the # from this line<code>&lt;%= current_user.cars.each do |car| %&gt;\n</code> to following <code>&lt;% current_user.cars.each do |car| %&gt;\n</code></p>\n"}], "owner": {"reputation": 33, "user_id": 9115831, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1982047225143005/picture?type=large", "display_name": "Chris", "link": "https://stackoverflow.com/users/9115831/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 48875153, "answer_count": 1, "score": 1, "last_activity_date": 1519079829, "creation_date": 1519078930, "question_id": 48875076, "link": "https://stackoverflow.com/questions/48875076/why-is-my-object-printing-to-the-page-in-rails", "title": "Why is my object printing to the page in rails?", "body": "<p>When I run my rails server in chrome, at the end of the unordered list, the object hash is printing to the page. I am not sure why this is happening. Here is my show.html.erb - </p>\n\n<pre><code>&lt;h1&gt;&lt;%= current_user.email %&gt;'s Cars&lt;/h1&gt;\n\n&lt;ul&gt;\n&lt;%= current_user.cars.each do |car| %&gt;\n&lt;li&gt;&lt;%= car.color %&gt;&lt;/li&gt;\n&lt;li&gt;&lt;%= car.make %&gt;&lt;/li&gt;\n&lt;li&gt;&lt;%= car.model %&gt;&lt;/li&gt;\n&lt;li&gt;&lt;%= car.year %&gt;&lt;/li&gt;\n&lt;button class=\"btn btn-default\"&gt;&lt;%= link_to 'Edit', edit_car_path(car) %&gt;\n&lt;/button&gt;\n&lt;button class=\"btn btn-default\"&gt;&lt;%= link_to 'Delete', car,  :data =&gt; {:confirm \n=&gt; \"You Sure?\", :method =&gt; :delete}  %&gt;&lt;/button&gt;\n&lt;%end%&gt;\n&lt;/ul&gt;\n\n&lt;% if user_signed_in? %&gt;\n  &lt;button class=\"btn btn-default\"&gt;&lt;%=link_to \"Add a car\", \nnew_user_car_path(current_user)%&gt;&lt;/button&gt;\n&lt;%end%&gt;\n</code></pre>\n"}, {"tags": ["ruby", "class"], "answers": [{"tags": [], "owner": {"reputation": 1854, "user_id": 669745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a4b0416684de65970e4d1b4da1bb290?s=128&d=identicon&r=PG", "display_name": "Panic", "link": "https://stackoverflow.com/users/669745/panic"}, "is_accepted": false, "score": 0, "last_activity_date": 1519122342, "last_edit_date": 1519122342, "creation_date": 1519078545, "answer_id": 48875022, "question_id": 48874991, "link": "https://stackoverflow.com/questions/48874991/calling-a-ruby-method-once-when-the-class-is-defined/48875022#48875022", "title": "Calling a ruby method once when the class is defined", "body": "<p>Are you sure you need metaprogramming in this case? Can you just define the method in Parent with an extra param for method name?</p>\n\n<p>If Parent can be a module, then we can solve it this way:</p>\n\n<pre><code>module Parent\n  def self.module(*methods)\n    Module.new do |_mod|\n      methods.each do |method|\n        define_method(method) { \"You called method #{method}\" }\n      end\n    end\n  end\nend\n\nclass ChildOne\n  include Parent.module(:foo, :bar)\nend\n\nclass ChildTwo\n  include Parent.module(:alpha, :bravo)\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1958, "user_id": 951604, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sZVf7.jpg?s=128&g=1", "display_name": "railscard", "link": "https://stackoverflow.com/users/951604/railscard"}, "is_accepted": false, "score": 0, "last_activity_date": 1519080004, "last_edit_date": 1519080004, "creation_date": 1519079034, "answer_id": 48875095, "question_id": 48874991, "link": "https://stackoverflow.com/questions/48874991/calling-a-ruby-method-once-when-the-class-is-defined/48875095#48875095", "title": "Calling a ruby method once when the class is defined", "body": "<p>You have defined an instance method for a parent, but you need a class method, like this:</p>\n\n<pre><code>class Parent\n  def self.define_some_methods!\n    self::MY_METHODS.each do |m|\n      proc = Proc.new { \"You called method #{m}\" }\n      send(:define_method, m, &amp;proc)\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 7734, "user_id": 2490003, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/3dRD0.png?s=128&g=1", "display_name": "user2490003", "link": "https://stackoverflow.com/users/2490003/user2490003"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1519122342, "creation_date": 1519078318, "question_id": 48874991, "link": "https://stackoverflow.com/questions/48874991/calling-a-ruby-method-once-when-the-class-is-defined", "title": "Calling a ruby method once when the class is defined", "body": "<p>Say I have multiple child classes that inherit from a common parent.</p>\n\n<p>I want to use <code>define_method</code> to programmatically define some methods on each child. But the list of methods to define <em>is different for each child)</em>. </p>\n\n<p>So I implemented something as below - </p>\n\n<pre><code>class Parent\n  def define_some_methods!\n    self.class::MY_METHODS.each do |m|\n      proc = Proc.new { \"You called method #{m}\" }\n      self.class.send(:define_method, m, &amp;proc)\n    end\n  end\nend\n\nclass ChildOne &lt; Parent\n  MY_METHODS = [:foo, :bar]\n\n  def initialize\n    define_some_methods!\n  end\nend\n\nclass ChildTwo &lt; Parent\n  MY_METHODS = [:alpha, :bravo]\n\n  def initialize\n    define_some_methods!\n  end\nend\n\nChildOne.new.foo    #=&gt; \"You called method foo\"\nChildTwo.new.alpha  #=&gt; \"You called method alpha\"\n</code></pre>\n\n<p>This works fine, but it calls <code>define_some_methods</code> each time a new class is instantiated. That constantly redefines the same methods over and over at the class level. </p>\n\n<p>Is there a way to do this <strong>once</strong> when the initial class is defined? </p>\n\n<p>I tried something like -</p>\n\n<pre><code>class ChildTwo &lt; Parent\n  MY_METHODS = [:alpha, :bravo]\n\n  define_some_methods!\nend\n</code></pre>\n\n<p>But it errors with </p>\n\n<pre><code>NoMethodError: undefined method `define_some_methods!' for ChildTwo:Class\nDid you mean?  define_method\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1519077813, "post_id": 48874725, "comment_id": 84753618, "body": "Can you try putting spaces around the minus sign? might be being interpreted oddly (ie as unary negative for some reason). <code>@to_add = (@associates - @coordinators)</code>"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1519077905, "post_id": 48874725, "comment_id": 84753653, "body": "Also... when you use <code>puts</code> please use <code>inspect</code> - it can make all the difference. So: <code>puts @associates.inspect</code> and <code>puts (@associates - @coordinators).inspect</code> -&gt; sometime&#39;s Rails implicit <code>to_s</code> can cause two different things to <i>appear</i> to be the same when they&#39;re really not. So do this now for all your <code>puts</code>s and then show us the new results."}, {"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 2, "creation_date": 1519077918, "post_id": 48874725, "comment_id": 84753658, "body": "Also, since <code>@associates</code> comes from <code>params</code> and <code>@coordinators</code> comes from database records; It&#39;s very likely <code>@associates</code> is an array of strings while <code>@coordinators</code> is an array of integers. Maybe try <code>@associates = params[:associate_to].map(&amp;:to_i)</code>"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 1, "creation_date": 1519077981, "post_id": 48874725, "comment_id": 84753685, "body": "I bet on the good ol&#39; String vs Integer comparison"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 1, "creation_date": 1519079532, "post_id": 48874725, "comment_id": 84754259, "body": "Yup - that&#39;s why <code>inspect</code> is an excellent thing when using <code>puts</code>... it will instantly show you the difference..."}], "answers": [{"tags": [], "owner": {"reputation": 1854, "user_id": 669745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a4b0416684de65970e4d1b4da1bb290?s=128&d=identicon&r=PG", "display_name": "Panic", "link": "https://stackoverflow.com/users/669745/panic"}, "is_accepted": true, "score": 1, "last_activity_date": 1519078008, "creation_date": 1519078008, "answer_id": 48874925, "question_id": 48874725, "link": "https://stackoverflow.com/questions/48874725/ruby-array-behave-strange-in-rails-controller/48874925#48874925", "title": "ruby array behave strange in rails controller", "body": "<p>It is probably because one array contains integers and the other contains strings. Try converting elements of one of the arrays to string or int.</p>\n\n<pre><code>arr.map(&amp;:to_i)\n# or\narr.map(&amp;:to_s)\n</code></pre>\n"}], "owner": {"reputation": 540, "user_id": 5046468, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-_MJIiKu6U44/AAAAAAAAAAI/AAAAAAAAAB0/X1g73J1CrQ4/photo.jpg?sz=128", "display_name": "Mi Ro", "link": "https://stackoverflow.com/users/5046468/mi-ro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 48874925, "answer_count": 1, "score": 0, "last_activity_date": 1519078008, "creation_date": 1519077109, "question_id": 48874725, "link": "https://stackoverflow.com/questions/48874725/ruby-array-behave-strange-in-rails-controller", "title": "ruby array behave strange in rails controller", "body": "<p>let say I have 2 arrays \n@arr1 = [10,20,30,40]\n@arr2 = [30,40,50,60]</p>\n\n<p>In rails controller I am trying to find both diffs and according it add or remove records.\nIf I do in console simple <code>@diff1 = (@arr1 - @arr2)</code> I get correct result [10,20]</p>\n\n<p>if I do in rails controller the same, I get whole @arr1 instead of @diff1 so I tried simple <code>puts (@arr1 - @arr2)</code> but with wrong result\nhere is the sample code:</p>\n\n<pre><code>@associates = params[:associate_to]\n      @coordinators = @guild.coordinators.pluck(:coordinator_id)\n\n      @to_add = (@associates-@coordinators)\n\n      @to_remove = (@coordinators-@associates)\n      puts \"first array\"\n      puts @associates\n      puts \"----\"\n      puts \"second array\"\n      puts @coordinators\n      puts \"-----\"\n\n      puts \"calculation\"      \n      puts (@associates-@coordinators)\n      puts \"result\"\n      puts @to_add\n</code></pre>\n\n<p>and here is result from rails server </p>\n\n<p><a href=\"https://i.stack.imgur.com/5uoRS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5uoRS.png\" alt=\"enter image description here\"></a></p>\n\n<p>what am I doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "edited": false, "score": 0, "creation_date": 1519075549, "post_id": 48874287, "comment_id": 84752668, "body": "Yea, there have been <b>a lot</b> of changes between Rails 3 and Rails 5. This syntax no longer works, but <a href=\"http://guides.rubyonrails.org/active_record_querying.html#conditions\" rel=\"nofollow noreferrer\">there are plenty of others</a>."}], "answers": [{"tags": [], "owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "is_accepted": true, "score": 0, "last_activity_date": 1519079700, "creation_date": 1519079700, "answer_id": 48875198, "question_id": 48874287, "link": "https://stackoverflow.com/questions/48874287/rails-cant-convert-hash-into-integer/48875198#48875198", "title": "Rails can&#39;t convert Hash into Integer", "body": "<p>As mentioned: Rails' finder syntax has changed a lot.</p>\n\n<p>Try something more like:</p>\n\n<pre><code>def current_user\n  @current_user ||= User.where('auth_token = :token or oauth_token = :token', token: cookies[:auth_token]).first if cookies[:auth_token].present?\nend\n</code></pre>\n\n<p>(Note: I have not tested this code - fixing bugs is an exercise for the reader)</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6528504"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 48875198, "answer_count": 1, "score": -2, "last_activity_date": 1519079700, "creation_date": 1519074949, "last_edit_date": 1519075580, "question_id": 48874287, "link": "https://stackoverflow.com/questions/48874287/rails-cant-convert-hash-into-integer", "title": "Rails can&#39;t convert Hash into Integer", "body": "<p>After setup the current_user </p>\n\n<pre><code>def current_user\n    @current_user ||= User.first(conditions: ['auth_token = :token or oauth_token = :token', { token: cookies[:auth_token] }]) if cookies[:auth_token]\n  end\n</code></pre>\n\n<p>rails raised </p>\n\n<blockquote>\n  <p>can't convert Hash into Integer</p>\n</blockquote>\n\n<p>This method was working in rails 3 now on rails 5 raised this, someone can spare a hint about this issue?</p>\n"}, {"tags": ["ruby", "systemd", "sharetribe"], "owner": {"reputation": 11, "user_id": 9382836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d01b37bd818119003e343c6c103412?s=128&d=identicon&r=PG&f=1", "display_name": "Arvind", "link": "https://stackoverflow.com/users/9382836/arvind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 191, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1519075809, "creation_date": 1519074605, "last_edit_date": 1519075809, "question_id": 48874209, "link": "https://stackoverflow.com/questions/48874209/errnoeacces-permission-denied-rb-sysopen-when-using-systemd-to-start-sharet", "title": "Errno::EACCES: Permission denied @ rb_sysopen when using systemd to start sharetribe service", "body": "<p>I am new to sharetribe and dont have any experience with ruby etc. I followed the steps to setup sharetribe from here:\n<a href=\"https://freedif.org/how-to-install-sharetribe-for-ubuntu-16-04/\" rel=\"nofollow noreferrer\">https://freedif.org/how-to-install-sharetribe-for-ubuntu-16-04/</a></p>\n\n<p>When i start the services manually I do not see such issues. I see the below errors when i connect to the terminal again and check the status using 'journalctl -u sharetribe.service'.</p>\n\n<p>I checked the permissions for the path and the files, i did chmod 777 so that all users have permissions. Any thoughts?</p>\n\n<pre><code>Feb 19 03:07:16 ubuntu-xenial-1 sharetri[4628]: W, [2018-02-19T03:07:16.099853 #4775] WARN -- : Failed creating logger for file /home/arvind_nm/sharetribe/sharetribe/lo\nFeb 19 03:07:16 ubuntu-xenial-1 sharetri[4628]: W, [2018-02-19T03:07:16.102594 #4775] WARN -- : Errno::EACCES: Permission denied @ rb_sysopen - /home/arvind_nm/sharetribe/sharetribe/log/newrelic_agent.log\nFeb 19 03:07:16 ubuntu-xenial-1 sharetri[4628]: D, [2018-02-19T03:07:16.102956 #4775] DEBUG -- : Debugging backtrace:\nFeb 19 03:07:16 ubuntu-xenial-1 sharetri[4628]: D, [2018-02-19T03:07:16.102956 #4775] DEBUG -- : Debugging backtrace:\n</code></pre>\n"}, {"tags": ["ruby", "ubuntu", "jekyll", "ubuntu-17.10"], "comments": [{"owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "edited": false, "score": 0, "creation_date": 1519075783, "post_id": 48873852, "comment_id": 84752763, "body": "<code>exec: autoreconf: not found</code> is the important part."}], "answers": [{"tags": [], "owner": {"reputation": 9, "user_id": 7307451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b13bc51fd2cec089fddd4065f0caf7a7?s=128&d=identicon&r=PG&f=1", "display_name": "Hampus Weslien", "link": "https://stackoverflow.com/users/7307451/hampus-weslien"}, "is_accepted": false, "score": 0, "last_activity_date": 1519107740, "last_edit_date": 1592644375, "creation_date": 1519107740, "answer_id": 48879078, "question_id": 48873852, "link": "https://stackoverflow.com/questions/48873852/cannot-install-jekyll-on-ubuntu-17-10/48879078#48879078", "title": "Cannot install jekyll on Ubuntu 17.10", "body": "<h1>Solved!</h1>\n<p>had to run the command:</p>\n<p>sudo apt-get install autoconf libtool</p>\n"}], "owner": {"reputation": 9, "user_id": 7307451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b13bc51fd2cec089fddd4065f0caf7a7?s=128&d=identicon&r=PG&f=1", "display_name": "Hampus Weslien", "link": "https://stackoverflow.com/users/7307451/hampus-weslien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519107740, "creation_date": 1519072876, "question_id": 48873852, "link": "https://stackoverflow.com/questions/48873852/cannot-install-jekyll-on-ubuntu-17-10", "title": "Cannot install jekyll on Ubuntu 17.10", "body": "<p>Trying to install Jekyll but keep getting this error message:</p>\n\n<pre><code>current directory: /var/lib/gems/2.3.0/gems/ffi-1.9.21/ext/ffi_c\n/usr/bin/ruby2.3 -r ./siteconf20180219-16974-6pgqng.rb extconf.rb\nchecking for ffi.h... no\nchecking for ffi.h in /usr/local/include,/usr/include/ffi... no\nchecking for shlwapi.h... no\nchecking for rb_thread_blocking_region()... no\nchecking for rb_thread_call_with_gvl()... yes\nchecking for rb_thread_call_without_gvl()... yes\ncreating extconf.h\ncreating Makefile\n\ncurrent directory: /var/lib/gems/2.3.0/gems/ffi-1.9.21/ext/ffi_c\nmake \"DESTDIR=\" clean\n\ncurrent directory: /var/lib/gems/2.3.0/gems/ffi-1.9.21/ext/ffi_c\nmake \"DESTDIR=\"\nRunning autoreconf for libffi\n/var/lib/gems/2.3.0/gems/ffi-1.9.21/ext/ffi_c/libffi/autogen.sh: 2:         exec: autoreconf: not found\nlibffi.mk:6: recipe for target '\"/var/lib/gems/2.3.0/gems/ffi-    1.9.21/ext/ffi_c/libffi-x86_64-linux-gnu\"/.libs/libffi_convenience.a'     failed\nmake: *** [\"/var/lib/gems/2.3.0/gems/ffi-1.9.21/ext/ffi_c/libffi-x86_64-linux-gnu\"/.libs/libffi_convenience.a] Error 127\n\nmake failed, exit code 2\n</code></pre>\n\n<p>I have installed the following but perhaps not in this order</p>\n\n<ul>\n<li>make</li>\n<li>build-essential</li>\n<li>ruby </li>\n<li>ruby-dev</li>\n<li>gcc</li>\n</ul>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby", "csv", "encoding", "utf-8", "utf"], "comments": [{"owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "edited": false, "score": 0, "creation_date": 1519073399, "post_id": 48873775, "comment_id": 84751764, "body": "Can you try <code>BOM|utf-8</code> (BOM in capitals)"}, {"owner": {"reputation": 63, "user_id": 1639481, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HpfNDEV7P6E/AAAAAAAAAAI/AAAAAAAAIhg/hS2vncF1fEY/photo.jpg?sz=128", "display_name": "romeu.hcf", "link": "https://stackoverflow.com/users/1639481/romeu-hcf"}, "reply_to_user": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "edited": false, "score": 0, "creation_date": 1519074217, "post_id": 48873775, "comment_id": 84752115, "body": "@knut - same result when using &quot;BOM|utf-8&quot;, &quot;BOM|utf8&quot; , &quot;BOM|UTF-8&quot; or &quot;BOM|UTF8&quot;"}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 2, "creation_date": 1519125446, "post_id": 48873775, "comment_id": 84772454, "body": "<a href=\"https://github.com/ruby/csv/issues/23\" rel=\"nofollow noreferrer\">There&#39;s already a bug report.</a>"}, {"owner": {"reputation": 63, "user_id": 1639481, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HpfNDEV7P6E/AAAAAAAAAAI/AAAAAAAAIhg/hS2vncF1fEY/photo.jpg?sz=128", "display_name": "romeu.hcf", "link": "https://stackoverflow.com/users/1639481/romeu-hcf"}, "edited": false, "score": 0, "creation_date": 1538664962, "post_id": 48873775, "comment_id": 92231362, "body": "I ended up with: <a href=\"https://gist.github.com/romeuhcf/29132ebd3084b14901f8770f3baac3bf\" rel=\"nofollow noreferrer\">gist.github.com/romeuhcf/29132ebd3084b14901f8770f3baac3bf</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9570029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cc0bf395f6f577663bc7e2e02316b68?s=128&d=identicon&r=PG&f=1", "display_name": "DrMercathoz", "link": "https://stackoverflow.com/users/9570029/drmercathoz"}, "is_accepted": false, "score": 0, "last_activity_date": 1522336227, "last_edit_date": 1522336227, "creation_date": 1522330525, "answer_id": 49557516, "question_id": 48873775, "link": "https://stackoverflow.com/questions/48873775/reading-utf-8-with-bom-in-ruby-2-5-0/49557516#49557516", "title": "Reading UTF-8 with BOM in ruby 2.5.0", "body": "<p>You can try this:</p>\n\n<pre><code>require 'file_with_bom'\n\nFile.open(file_path, \"w:utf-8\", :bom =&gt; true ) do |csv|\n\nend\n</code></pre>\n\n<p>it works well</p>\n\n\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6126795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c8899e36d05b2bbb8360b831a5eaffc?s=128&d=identicon&r=PG&f=1", "display_name": "vdz", "link": "https://stackoverflow.com/users/6126795/vdz"}, "is_accepted": false, "score": 1, "last_activity_date": 1532358476, "creation_date": 1532358476, "answer_id": 51482005, "question_id": 48873775, "link": "https://stackoverflow.com/questions/48873775/reading-utf-8-with-bom-in-ruby-2-5-0/51482005#51482005", "title": "Reading UTF-8 with BOM in ruby 2.5.0", "body": "<p>You can try this as well:</p>\n\n<blockquote>\n  <p>File.open(file_path, \"r:bom|utf-8\")</p>\n</blockquote>\n"}], "owner": {"reputation": 63, "user_id": 1639481, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HpfNDEV7P6E/AAAAAAAAAAI/AAAAAAAAIhg/hS2vncF1fEY/photo.jpg?sz=128", "display_name": "romeu.hcf", "link": "https://stackoverflow.com/users/1639481/romeu-hcf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2271, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1532358476, "creation_date": 1519072492, "question_id": 48873775, "link": "https://stackoverflow.com/questions/48873775/reading-utf-8-with-bom-in-ruby-2-5-0", "title": "Reading UTF-8 with BOM in ruby 2.5.0", "body": "<p>Is there a way to read files encoded in UTF-8 with BOM (Byte order marks) on Ruby v2.5.0?</p>\n\n<p>On Ruby 2.3.1 this used to work:</p>\n\n<pre><code> csv = CSV.open(file_path, encoding: 'bom|utf-8')\n</code></pre>\n\n<p>However, on 2.5.0 the following error ocurrs:</p>\n\n<pre><code>  ArgumentError:\n    unknown encoding name - bom|utf-8 \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1519102212, "post_id": 48873405, "comment_id": 84760080, "body": "Hi and welcome to stack Overflow! Can you please edit your question, and show us the form-tag that you are using?"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1519102237, "post_id": 48873405, "comment_id": 84760088, "body": "Could this be your solution? <a href=\"https://stackoverflow.com/questions/29094795/paperclip-no-handler-found-for-file-jpg-rails-4\" title=\"paperclip no handler found for file jpg rails 4\">stackoverflow.com/questions/29094795/&hellip;</a>"}], "owner": {"reputation": 31, "user_id": 6557015, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a7e9f4616456a5095bbebca95fed3cf4?s=128&d=identicon&r=PG", "display_name": "Tysaic", "link": "https://stackoverflow.com/users/6557015/tysaic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1519070753, "creation_date": 1519070753, "question_id": 48873405, "link": "https://stackoverflow.com/questions/48873405/not-found-handler-image-jpg-paperclip-rails-idont-know-how-fix-it", "title": "not found handler &#39;image.jpg&#39; paperclip rails, idont know how fix it", "body": "<p>My problem is make a databank than upload a paperclip image in the once register for example image, title, username, password, url, etc... I used paperclip but really do a headache  because in the devise user is be able but if we use in databank say the error <code>No handler found for \"image.jpg\"</code></p>\n\n<pre><code> # POST /databanks.json\n  def create\n    @databank = Databank.new(databank_params)\n\n    respond_to do |format|\n      if @databank.save\n</code></pre>\n\n<p>schema.rb:</p>\n\n<pre><code>ActiveRecord::Schema.define(version: 20180219174845) do\n\n  create_table \"activities\", force: :cascade do |t|\n    t.string \"name\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\n  create_table \"contract_types\", force: :cascade do |t|\n    t.string \"name\"\n    t.text \"description\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\n  create_table \"contracts\", force: :cascade do |t|\n    t.string \"currency\"\n    t.string \"name\"\n    t.decimal \"amount\"\n    t.integer \"contract_type_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"contract_type_id\"], name: \"index_contracts_on_contract_type_id\"\n  end\n\n  create_table \"databanks\", force: :cascade do |t|\n    t.string \"title\"\n    t.string \"username\"\n    t.string \"password\"\n    t.string \"repeat_password\"\n    t.string \"url\"\n    t.string \"description\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.string \"thumbnail_file_name\"\n    t.string \"thumbnail_content_type\"\n    t.integer \"thumbnail_file_size\"\n    t.datetime \"thumbnail_updated_at\"\n  end\n\n  create_table \"groups\", force: :cascade do |t|\n    t.string \"name\"\n    t.text \"description\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\n  create_table \"memberships\", force: :cascade do |t|\n    t.integer \"user_id\"\n    t.integer \"group_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"group_id\"], name: \"index_memberships_on_group_id\"\n    t.index [\"user_id\"], name: \"index_memberships_on_user_id\"\n  end\n\n  create_table \"permissions\", force: :cascade do |t|\n    t.integer \"group_id\"\n    t.integer \"activity_id\"\n    t.boolean \"c\"\n    t.boolean \"r\"\n    t.boolean \"u\"\n    t.boolean \"d\"\n    t.boolean \"p\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"activity_id\"], name: \"index_permissions_on_activity_id\"\n    t.index [\"group_id\"], name: \"index_permissions_on_group_id\"\n  end\n\n  create_table \"project_statuses\", force: :cascade do |t|\n    t.string \"name\"\n    t.text \"description\"\n    t.decimal \"percentage\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\n  create_table \"project_types\", force: :cascade do |t|\n    t.string \"name\"\n    t.text \"description\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\n  create_table \"recruitments\", force: :cascade do |t|\n    t.string \"Position\"\n    t.decimal \"salary\"\n    t.date \"begin\"\n    t.date \"finish\"\n    t.integer \"contract_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"contract_id\"], name: \"index_recruitments_on_contract_id\"\n  end\n\n  create_table \"users\", force: :cascade do |t|\n    t.string \"email\", default: \"\", null: false\n    t.string \"encrypted_password\", default: \"\", null: false\n    t.string \"reset_password_token\"\n    t.datetime \"reset_password_sent_at\"\n    t.datetime \"remember_created_at\"\n    t.integer \"sign_in_count\", default: 0, null: false\n    t.datetime \"current_sign_in_at\"\n    t.datetime \"last_sign_in_at\"\n    t.string \"current_sign_in_ip\"\n    t.string \"last_sign_in_ip\"\n    t.string \"confirmation_token\"\n    t.datetime \"confirmed_at\"\n    t.datetime \"confirmation_sent_at\"\n    t.string \"unconfirmed_email\"\n    t.integer \"failed_attempts\", default: 0, null: false\n    t.string \"unlock_token\"\n    t.datetime \"locked_at\"\n    t.string \"name\", default: \"\", null: false\n    t.string \"bank\"\n    t.string \"type_of_bank_account\"\n    t.integer \"bank_account_number\", limit: 20\n    t.string \"email_paypal\"\n    t.integer \"identification_card\", limit: 8\n    t.integer \"phone_number\", limit: 20\n    t.integer \"house_number\", limit: 20\n    t.string \"skype\"\n    t.text \"abilities\"\n    t.text \"languages\"\n    t.string \"invitation_token\"\n    t.datetime \"invitation_created_at\"\n    t.datetime \"invitation_sent_at\"\n    t.datetime \"invitation_accepted_at\"\n    t.integer \"invitation_limit\"\n    t.integer \"invited_by_id\"\n    t.string \"invited_by_type\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.string \"avatar_file_name\"\n    t.string \"avatar_content_type\"\n    t.integer \"avatar_file_size\"\n    t.datetime \"avatar_updated_at\"\n    t.index [\"confirmation_token\"], name: \"index_users_on_confirmation_token\", unique: true\n    t.index [\"email\"], name: \"index_users_on_email\", unique: true\n    t.index [\"invitation_token\"], name: \"index_users_on_invitation_token\", unique: true\n    t.index [\"reset_password_token\"], name: \"index_users_on_reset_password_token\", unique: true\n    t.index [\"unlock_token\"], name: \"index_users_on_unlock_token\", unique: true\n  end\n\nend\n</code></pre>\n\n<p>databanks_controller.rb:</p>\n\n<pre><code>class DatabanksController &lt; ApplicationController\n  before_action :set_databank, only: [:show, :edit, :update, :destroy]\n\n  # GET /databanks\n  # GET /databanks.json\n  def index\n    @databanks = Databank.all\n  end\n\n  # GET /databanks/1\n  # GET /databanks/1.json\n  def show\n  end\n\n  # GET /databanks/new\n  def new\n    @databank = Databank.new\n  end\n\n  # GET /databanks/1/edit\n  def edit\n  end\n\n  # POST /databanks\n  # POST /databanks.json\n  def create\n    @databank = Databank.new(databank_params)\n\n    respond_to do |format|\n      if @databank.save\n        format.html { redirect_to @databank, notice: 'Databank was successfully created.' }\n        format.json { render :show, status: :created, location: @databank }\n      else\n        format.html { render :new }\n        format.json { render json: @databank.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /databanks/1\n  # PATCH/PUT /databanks/1.json\n  def update\n    respond_to do |format|\n      if @databank.update(databank_params)\n        format.html { redirect_to @databank, notice: 'Databank was successfully updated.' }\n        format.json { render :show, status: :ok, location: @databank }\n      else\n        format.html { render :edit }\n        format.json { render json: @databank.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /databanks/1\n  # DELETE /databanks/1.json\n  def destroy\n    @databank.destroy\n    respond_to do |format|\n      format.html { redirect_to databanks_url, notice: 'Databank was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_databank\n      @databank = Databank.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def databank_params\n      params.require(:databank).permit(:title, :thumbnail,:username, :password, :repeat_password, :url, :description )\n    end\nend\n</code></pre>\n\n<p>databank.rb:</p>\n\n<pre><code>class Databank &lt; ApplicationRecord\n  has_attached_file :thumbnail, styles: { medium: \"300x300&gt;\", thumb: \"100x100&gt;\" }, default_url: \"default_image\"\n  validates_attachment_content_type :thumbnail, content_type: /\\Aimage\\/.*\\z/\nend\n</code></pre>\n\n<p>migrations:</p>\n\n<pre><code>class CreateDatabanks &lt; ActiveRecord::Migration[5.1]\n  def change\n    create_table :databanks do |t|\n      t.string :title\n      t.string :username\n      t.string :password\n      t.string :repeat_password\n      t.string :url\n      t.string :description\n\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>add_attachment_thumbnail_to_databanks.rb:</p>\n\n<pre><code>class AddAttachmentThumbnailToDatabanks &lt; ActiveRecord::Migration[4.2]\n  def self.up\n    change_table :databanks do |t|\n      t.attachment :thumbnail\n    end\n  end\n\n  def self.down\n    remove_attachment :databanks, :thumbnail\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "websocket", "sinatra"], "answers": [{"tags": [], "owner": {"reputation": 1436, "user_id": 2096740, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/67b4b0da1074e71906237509810c7eac?s=128&d=identicon&r=PG", "display_name": "arjun", "link": "https://stackoverflow.com/users/2096740/arjun"}, "is_accepted": true, "score": 0, "last_activity_date": 1519371754, "creation_date": 1519371754, "answer_id": 48943315, "question_id": 48873137, "link": "https://stackoverflow.com/questions/48873137/sinatra-pass-data-from-tcp-to-websockets/48943315#48943315", "title": "Sinatra pass data from TCP to websockets", "body": "<p>I found this to be difficult to interface. Instead, a compartmentalized approach does the job.</p>\n\n<p>Starting a websocket server separately and independently, which the Sinatra server communicates as a client, a short lived one, on every incoming TCP request.</p>\n\n<p>The websocket server broadcasts this incoming message to all other connected clients.</p>\n"}], "owner": {"reputation": 1436, "user_id": 2096740, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/67b4b0da1074e71906237509810c7eac?s=128&d=identicon&r=PG", "display_name": "arjun", "link": "https://stackoverflow.com/users/2096740/arjun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "accepted_answer_id": 48943315, "answer_count": 1, "score": 0, "last_activity_date": 1519371754, "creation_date": 1519069474, "question_id": 48873137, "link": "https://stackoverflow.com/questions/48873137/sinatra-pass-data-from-tcp-to-websockets", "title": "Sinatra pass data from TCP to websockets", "body": "<p>I am attempting to use Sinatra to listen to a custom HTTP method. Whatever data is received from there, is passed through websocket to <em>n number</em> of clients, in real-time.</p>\n\n<p>This is the progress - </p>\n\n<ol>\n<li>I have been able to make Sinatra listen to the custom HTTP method, NOTIFY.   </li>\n<li>I also have a websocket server running.   </li>\n<li><strong>But I can't figure out the last part, passing the data from NOTIFY as and when received to the websocket clients. How to do this?</strong>   </li>\n</ol>\n\n<p>Ruby app.rb</p>\n\n<pre><code>require 'sinatra'\nrequire 'sinatra-websocket'\n\nconfigure do\n  class &lt;&lt; Sinatra::Base\n    def notify(path, opts={}, &amp;block)\n      route 'NOTIFY', path, opts, &amp;block\n    end\n  end\n  Sinatra::Delegator.delegate :notify\nend\n\nset :server, 'thin'\nset :sockets, []\nset :bind, '0.0.0.0'\nenable :sessions # For some reason sessions don't work. Relying on class variable.\n\n\n\nnotify '/' do   \n    @json = request.body.read    \n    session[:order] = @json\n    @@pass = session[:order] # Saved in class variable. Hacky?\n    puts \"NOTIFY\"\n    puts \"is session[:order] nil? #{session[:order].nil?}\" # returns false\n    puts \"END NOTIFY\"\nend    \n\nget '/' do\n  if !request.websocket?\n    puts @@pass # prints NOTIFY data successfully\n\n    puts \"GETS\"\n    puts \"is session[:order] nil? #{session[:order].nil?}\" # returns true. Session dont work\n    puts \"END GETS\"\n\n    @new = @@pass\n    erb :index\n  else\n    request.websocket do |ws|\n      ws.onopen do\n        ws.send(\"Hello World!\")            \n        settings.sockets &lt;&lt; ws\n      end\n      ws.onmessage do |msg|\n        EM.next_tick { settings.sockets.each{|s| s.send(msg) } }\n        ws.send(@@pass) # this will send on each message. Not real-time\n      end\n      ws.onclose do\n        warn(\"websocket closed\")\n        settings.sockets.delete(ws)\n      end\n    end\n  end\nend    \n\n__END__\n</code></pre>\n\n<p>Inline ERB Index</p>\n\n<pre><code>@@ index\n&lt;html&gt;\n  &lt;body&gt;\n     &lt;h1&gt;Simple Echo &amp;amp; Chat Server&lt;/h1&gt;\n     &lt;p&gt;&lt;%= @new %&gt;&lt;/p&gt;\n     &lt;form id=\"form\"&gt;\n       &lt;input type=\"text\" id=\"input\" value=\"send a message\"&gt;&lt;/input&gt;\n     &lt;/form&gt;\n     &lt;div id=\"msgs\"&gt;&lt;/div&gt;\n\n\n  &lt;script type=\"text/javascript\"&gt;\n    window.onload = function(){\n      (function(){\n        var show = function(el){\n          return function(msg){ el.innerHTML = msg + '&lt;br /&gt;' + el.innerHTML; }\n        }(document.getElementById('msgs'));\n\n        var ws       = new WebSocket('ws://' + window.location.host + window.location.pathname);\n        console.log(ws);\n        ws.onopen    = function()  { show('websocket opened'); };\n        ws.onclose   = function()  { show('websocket closed'); }\n        ws.onmessage = function(m) { show('websocket message: ' +  m.data); };\n\n        var sender = function(f){\n          var input     = document.getElementById('input');\n          input.onclick = function(){ input.value = \"\" };\n          f.onsubmit    = function(){\n            ws.send(input.value);\n            input.value = \"send a message\";\n            return false;\n          }\n        }(document.getElementById('form'));\n      })();\n    }\n  &lt;/script&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Is there any other industrial way for a robust data transmission in this manner?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1436, "user_id": 2096740, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/67b4b0da1074e71906237509810c7eac?s=128&d=identicon&r=PG", "display_name": "arjun", "link": "https://stackoverflow.com/users/2096740/arjun"}, "edited": false, "score": 0, "creation_date": 1519069790, "post_id": 48872997, "comment_id": 84750215, "body": "You can serialize the object using Ruby Marshal. A simple way to do that is here - <a href=\"https://stackoverflow.com/a/21520793/2096740\">stackoverflow.com/a/21520793/2096740</a>"}], "owner": {"reputation": 41, "user_id": 2502852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CGm52.jpg?s=128&g=1", "display_name": "hanez", "link": "https://stackoverflow.com/users/2502852/hanez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "closed_date": 1519071748, "answer_count": 0, "score": 1, "last_activity_date": 1519071412, "creation_date": 1519068830, "last_edit_date": 1519071412, "question_id": 48872997, "link": "https://stackoverflow.com/questions/48872997/ruby-convert-string-to-object-of-special-type", "closed_reason": "Duplicate", "title": "Ruby convert string to object of special type", "body": "<p>What I want do is to save Ruby objects for caching to disk. That works nice using YAML or JSON. But when I read that file I want to convert the content back to an object of a special type.</p>\n\n<p>In my case I am using the flickraw library and am using some Ruby code for downloading photos from Flickr. There is a method in <code>flickraw</code> called</p>\n\n<pre><code>photo_info = flickraw.photos.getInfo(:photo_id =&gt; photo_id)\n</code></pre>\n\n<p>which gives me a lot of information about the photo. I dump this information to a file which works great. Since I do not want to download this information every time I run my code but want to read the cached data from the written file I do open the file and then do</p>\n\n<pre><code>file = File.open('photo.meta', 'r')\nphoto_info = YAML::load(file.read)\n</code></pre>\n\n<p>Now I need <code>photo_info</code> to become of the object type the <code>getInfo</code> method is returning when using flickraw.</p>\n\n<p>How can I do this in Ruby?</p>\n"}, {"tags": ["ruby", "rspec-puppet"], "answers": [{"tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": false, "score": 2, "last_activity_date": 1519072220, "creation_date": 1519072220, "answer_id": 48873712, "question_id": 48872737, "link": "https://stackoverflow.com/questions/48872737/output-rspec-tests-on-screen-while-redirecting-them-to-a-file/48873712#48873712", "title": "output rspec tests on screen while redirecting them to a file", "body": "<p>RSpec supports <a href=\"https://relishapp.com/rspec/rspec-core/v/2-5/docs/command-line/format-option#multiple-formats\" rel=\"nofollow noreferrer\">multiple formatters</a> in a command. So for instance, I can setup my <strong>.rspec</strong> file to look like:</p>\n\n<pre><code>--format json\n--out rspec.json\n--format progress\n</code></pre>\n\n<p>and when I run <code>rake spec</code>, I see the default progress indicators in the terminal and a <strong>rspec.json</strong> file is created with the JSON output.</p>\n"}], "owner": {"reputation": 27, "user_id": 5935844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b327972fa2b9bde58b514667867298e?s=128&d=identicon&r=PG&f=1", "display_name": "fasten", "link": "https://stackoverflow.com/users/5935844/fasten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1519072220, "creation_date": 1519067606, "question_id": 48872737, "link": "https://stackoverflow.com/questions/48872737/output-rspec-tests-on-screen-while-redirecting-them-to-a-file", "title": "output rspec tests on screen while redirecting them to a file", "body": "<p>In .rpsec, \n<code>\n--format json\n--out rspec.json\n</code></p>\n\n<p>This setting redirects rspec tests results to rspec.json. </p>\n\n<p>At same time I also want to watch these results displaying on screen .  Is there a way doing that?  </p>\n"}, {"tags": ["html", "ruby", "twitter-bootstrap", "sinatra", "sinatra-activerecord"], "answers": [{"tags": [], "owner": {"reputation": 165, "user_id": 9164069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3a76cf933419cf5da005cdc3cc771d5?s=128&d=identicon&r=PG&f=1", "display_name": "neznidalibor", "link": "https://stackoverflow.com/users/9164069/neznidalibor"}, "is_accepted": false, "score": 0, "last_activity_date": 1519079797, "creation_date": 1519079797, "answer_id": 48875216, "question_id": 48872634, "link": "https://stackoverflow.com/questions/48872634/output-text-file-in-html-table-using-ruby-views-erb/48875216#48875216", "title": "Output text file in html table using ruby views (ERB)", "body": "<p>Shouldn't <code>&lt;td&gt;&lt;%= logfile %&gt;&lt;/td&gt;</code> be <code>&lt;td&gt;&lt;%= line %&gt;&lt;/td&gt;</code> ?</p>\n\n<p>I'm guessing that you can load the file already and just want to render it in the view.</p>\n"}], "owner": {"reputation": 620, "user_id": 6795180, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Yc1w6Tq3t4A/AAAAAAAAAAI/AAAAAAAAA7k/oUYfyaNyIz0/photo.jpg?sz=128", "display_name": "Chidozie Nnachor", "link": "https://stackoverflow.com/users/6795180/chidozie-nnachor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519079797, "creation_date": 1519067102, "last_edit_date": 1519070272, "question_id": 48872634, "link": "https://stackoverflow.com/questions/48872634/output-text-file-in-html-table-using-ruby-views-erb", "title": "Output text file in html table using ruby views (ERB)", "body": "<p>I have a text file which I want to output on a table in HTML using the lines as markers. The text file is formatted thus:</p>\n\n<pre><code>Admin logged out at 2018-02-13 13:21:30 +0000\nAdmin logged in at 2018-02-13 13:33:08 +0000\nAdmin logged out at 2018-02-13 13:46:07 +0000\n</code></pre>\n\n<p>And goes on for hundreds of lines.I am trying to run it using a view (ERB) file. Any Ideas on how to do this? The best I have been able to do is:</p>\n\n<pre><code>&lt;table class=\"table\"&gt;\n  &lt;thead&gt;\n  &lt;tr&gt;\n    &lt;th&gt;Log of activities&lt;/th&gt;\n\n  &lt;/tr&gt;\n  &lt;/thead&gt;\n\n  &lt;tbody&gt;\n  &lt;% @logfile.each do |line| %&gt;\n  &lt;tr&gt;\n    &lt;td&gt;&lt;%= logfile %&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n  &lt;% end %&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>where \"logfile\" is the filename. Of course it is wrong. I can't figure it out. I am running the file on Sinatra, and I use bootstrap to style the html.</p>\n\n<p>Thanks.</p>\n"}]