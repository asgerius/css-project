[{"tags": ["ruby-on-rails", "ruby", "json", "ruby-on-rails-3", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1447285466, "post_id": 33661702, "comment_id": 55097516, "body": "Is this not just a simple typo? <code>views&#47;api&#47;v1&#47;index.json.jbuilder</code> - you&#39;re missing the <code>j</code> in <code>json</code>, son :)"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1447285603, "post_id": 33661702, "comment_id": 55097567, "body": "Note that rails uses directories for &quot;namespaced views&quot; not dots in the file name."}, {"owner": {"reputation": 772, "user_id": 3500477, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/hd7QR.jpg?s=128&g=1", "display_name": "Andrew Walz", "link": "https://stackoverflow.com/users/3500477/andrew-walz"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1447288853, "post_id": 33661702, "comment_id": 55098500, "body": "Hey. Sorry it is not a typo in the actual project"}, {"owner": {"reputation": 772, "user_id": 3500477, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/hd7QR.jpg?s=128&g=1", "display_name": "Andrew Walz", "link": "https://stackoverflow.com/users/3500477/andrew-walz"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1447289033, "post_id": 33661702, "comment_id": 55098555, "body": "I was unaware that rails uses directories in the name. Will try this thanks"}], "owner": {"reputation": 772, "user_id": 3500477, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/hd7QR.jpg?s=128&g=1", "display_name": "Andrew Walz", "link": "https://stackoverflow.com/users/3500477/andrew-walz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 325, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1447288868, "creation_date": 1447283988, "last_edit_date": 1447288868, "question_id": 33661702, "link": "https://stackoverflow.com/questions/33661702/creating-custom-json-response-with-jbuilder", "title": "Creating custom JSON response with Jbuilder", "body": "<p>I am attempting to create a custom JSON response in Jbuilder. The scheme is pretty simple:</p>\n\n<pre><code>json.name = @locations.name\njson.description = @locations.description\n</code></pre>\n\n<p>However, I am getting a Missing Template error because I have namespaced my route and cannot use the current index.son.jbuilder. Currently, my route is setup as</p>\n\n<pre><code>Rails.application.routes.draw do\n  namespace :api, defaults: {format: 'json'} do\n   namespace :v1 do\n      resources :locations\n    end\n  end\n\n  root 'locations#index'\n  resources :locations\n...\n</code></pre>\n\n<p>And my controller is pretty simple:</p>\n\n<pre><code>module Api\n  module V1\n    class LocationsController &lt; ApplicationController\n      respond_to :json\n\n      def index\n        @locations = Location.all\n      end\n    end\n   end\nend\n</code></pre>\n\n<p>It does not currently use my index.son.jbuilder. I have attempted to create a new json file with matches the naming scheme <em>api.v1.index.json.jbuilder</em> but the error persists. What am I missing?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "concatenation"], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 3745296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e695d60e64aacea0adc278b51a46040?s=128&d=identicon&r=PG&f=1", "display_name": "user3745296", "link": "https://stackoverflow.com/users/3745296/user3745296"}, "edited": false, "score": 1, "creation_date": 1447283732, "post_id": 33661611, "comment_id": 55096931, "body": "Okay, thanks. I never knew that single quotes vs double quotes made a difference."}], "tags": [], "owner": {"reputation": 5419, "user_id": 887640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/w4OsI.png?s=128&g=1", "display_name": "Dmitry Sokurenko", "link": "https://stackoverflow.com/users/887640/dmitry-sokurenko"}, "is_accepted": true, "score": 3, "last_activity_date": 1447283739, "last_edit_date": 1447283739, "creation_date": 1447283573, "answer_id": 33661611, "question_id": 33661579, "link": "https://stackoverflow.com/questions/33661579/why-cant-i-concatenate-a-string-inside-of-a-link-in-rails/33661611#33661611", "title": "Why can&#39;t I concatenate a string inside of a link in Rails?", "body": "<p>Just use the <code>\"</code> double quotes instead of the <code>'</code> single quotes. Anything within single quotes is not interpolated.</p>\n\n<p>So:</p>\n\n<pre><code>@link = \"www.google.com\"\ns1 = 'http://#{@link}'\ns2 = \"http://#{@link}\"\n\nputs s1 # prints http://#{@link}\nputs s2 # prints http://www.google.com\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 3745296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e695d60e64aacea0adc278b51a46040?s=128&d=identicon&r=PG&f=1", "display_name": "user3745296", "link": "https://stackoverflow.com/users/3745296/user3745296"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1879, "favorite_count": 0, "closed_date": 1447285159, "accepted_answer_id": 33661611, "answer_count": 1, "score": 1, "last_activity_date": 1447283739, "creation_date": 1447283428, "question_id": 33661579, "link": "https://stackoverflow.com/questions/33661579/why-cant-i-concatenate-a-string-inside-of-a-link-in-rails", "closed_reason": "Duplicate", "title": "Why can&#39;t I concatenate a string inside of a link in Rails?", "body": "<p>Ruby: 2.2.3</p>\n\n<p>Rails: 4.2.4</p>\n\n<p>OS: OSX 10.11.2 Beta</p>\n\n<p>I'm learning Rails, and when I was making a <code>link_to</code> like this:</p>\n\n<pre><code>&lt;% link_to 'Visit Url', 'http://#{@link.url} %&gt;\n</code></pre>\n\n<p>It did not link to external sites if link.url was something like \"Google.com\".  Instead, it did not use the variable at all and created a static link that always created an anchor tag like this:</p>\n\n<pre><code>&lt;a href=\"http://#{@link.url}\"&gt;Visit Url&lt;/a&gt; \n</code></pre>\n\n<p>Separating the string from the variable like this did link properly to an external site:</p>\n\n<pre><code>&lt;% link_to 'Visit Url', 'http://' + @link.url %&gt;\n</code></pre>\n\n<p>So why does the first one not work?  If link.url is \"google.com\", shouldn't the first <code>link_to</code> properly concatenate to \"<a href=\"http://google.com\" rel=\"nofollow\">http://google.com</a>\"?</p>\n"}, {"tags": ["ruby", "unit-testing", "minitest"], "comments": [{"owner": {"reputation": 5868, "user_id": 1214289, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/12267beae3c0d1e532fae7e9cc539941?s=128&d=identicon&r=PG", "display_name": "Kocur4d", "link": "https://stackoverflow.com/users/1214289/kocur4d"}, "edited": false, "score": 1, "creation_date": 1447285455, "post_id": 33661300, "comment_id": 55097511, "body": "my advice - run this method of yours with a different data and write down results. Create simple temp expectation tests for that results and refactor the hell out of this behemoth to 10 separate method probably across 2 different classes and then start mocking and unit testing them.... <a href=\"https://robots.thoughtbot.com/sandi-metz-rules-for-developers\" rel=\"nofollow noreferrer\">robots.thoughtbot.com/sandi-metz-rules-for-developers</a>"}, {"owner": {"reputation": 704, "user_id": 1208108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/940bd70b3a317123fc85322151ee0c5f?s=128&d=identicon&r=PG", "display_name": "codebee", "link": "https://stackoverflow.com/users/1208108/codebee"}, "reply_to_user": {"reputation": 5868, "user_id": 1214289, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/12267beae3c0d1e532fae7e9cc539941?s=128&d=identicon&r=PG", "display_name": "Kocur4d", "link": "https://stackoverflow.com/users/1214289/kocur4d"}, "edited": false, "score": 0, "creation_date": 1447285854, "post_id": 33661300, "comment_id": 55097647, "body": "good advice, but it has a lot of conditions, if I refactor it, I&#39;ll end up with a lot of redundant code."}, {"owner": {"reputation": 5868, "user_id": 1214289, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/12267beae3c0d1e532fae7e9cc539941?s=128&d=identicon&r=PG", "display_name": "Kocur4d", "link": "https://stackoverflow.com/users/1214289/kocur4d"}, "edited": false, "score": 0, "creation_date": 1447286093, "post_id": 33661300, "comment_id": 55097718, "body": "at the moment the method is untestable(which is not the word:P) too many things happening in side of it. nested condition etc... it is not a method it is an object with few methods but it is up to you mate;)"}, {"owner": {"reputation": 704, "user_id": 1208108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/940bd70b3a317123fc85322151ee0c5f?s=128&d=identicon&r=PG", "display_name": "codebee", "link": "https://stackoverflow.com/users/1208108/codebee"}, "reply_to_user": {"reputation": 5868, "user_id": 1214289, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/12267beae3c0d1e532fae7e9cc539941?s=128&d=identicon&r=PG", "display_name": "Kocur4d", "link": "https://stackoverflow.com/users/1214289/kocur4d"}, "edited": false, "score": 0, "creation_date": 1447287074, "post_id": 33661300, "comment_id": 55097998, "body": "That sounds right, will try and implement -<a href=\"https://en.wikipedia.org/wiki/Strategy_pattern\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Strategy_pattern</a> OR in Ruby style- <a href=\"https://dockyard.com/blog/2013/07/25/design-patterns-strategy-pattern\" rel=\"nofollow noreferrer\">dockyard.com/blog/2013/07/25/design-patterns-strategy-patter&zwnj;&#8203;n</a>"}], "answers": [{"comments": [{"owner": {"reputation": 704, "user_id": 1208108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/940bd70b3a317123fc85322151ee0c5f?s=128&d=identicon&r=PG", "display_name": "codebee", "link": "https://stackoverflow.com/users/1208108/codebee"}, "edited": false, "score": 0, "creation_date": 1447283218, "post_id": 33661464, "comment_id": 55096710, "body": "thanks, I did just that, but getting an error for a method m2() that m1() is calling- NoMethodError: unmocked method m2()"}, {"owner": {"reputation": 5419, "user_id": 887640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/w4OsI.png?s=128&g=1", "display_name": "Dmitry Sokurenko", "link": "https://stackoverflow.com/users/887640/dmitry-sokurenko"}, "reply_to_user": {"reputation": 704, "user_id": 1208108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/940bd70b3a317123fc85322151ee0c5f?s=128&d=identicon&r=PG", "display_name": "codebee", "link": "https://stackoverflow.com/users/1208108/codebee"}, "edited": false, "score": 0, "creation_date": 1447283481, "post_id": 33661464, "comment_id": 55096823, "body": "I think you have an expectation for <code>m2</code> set somewhere, as otherwise it should work, update the question with the code if it doesn&#39;t. Or try to compare whatever you have with the code snippet in the answer."}, {"owner": {"reputation": 704, "user_id": 1208108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/940bd70b3a317123fc85322151ee0c5f?s=128&d=identicon&r=PG", "display_name": "codebee", "link": "https://stackoverflow.com/users/1208108/codebee"}, "edited": false, "score": 0, "creation_date": 1447283833, "post_id": 33661464, "comment_id": 55096970, "body": "Ok I posted the actual method and test method. I&#39;m not setting any expectation for m2()."}, {"owner": {"reputation": 5419, "user_id": 887640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/w4OsI.png?s=128&g=1", "display_name": "Dmitry Sokurenko", "link": "https://stackoverflow.com/users/887640/dmitry-sokurenko"}, "reply_to_user": {"reputation": 704, "user_id": 1208108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/940bd70b3a317123fc85322151ee0c5f?s=128&d=identicon&r=PG", "display_name": "codebee", "link": "https://stackoverflow.com/users/1208108/codebee"}, "edited": false, "score": 0, "creation_date": 1447283894, "post_id": 33661464, "comment_id": 55096998, "body": "Great, just use some formatting please, as it&#39;s not readable otherwise."}, {"owner": {"reputation": 5419, "user_id": 887640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/w4OsI.png?s=128&g=1", "display_name": "Dmitry Sokurenko", "link": "https://stackoverflow.com/users/887640/dmitry-sokurenko"}, "reply_to_user": {"reputation": 704, "user_id": 1208108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/940bd70b3a317123fc85322151ee0c5f?s=128&d=identicon&r=PG", "display_name": "codebee", "link": "https://stackoverflow.com/users/1208108/codebee"}, "edited": false, "score": 0, "creation_date": 1447284881, "post_id": 33661464, "comment_id": 55097333, "body": "Well, there is a bit too much irrelevant code, but you current error just says that you should just stub the <code>get_group_by_name</code> method on the <code>@grp_adapter</code> mock."}, {"owner": {"reputation": 704, "user_id": 1208108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/940bd70b3a317123fc85322151ee0c5f?s=128&d=identicon&r=PG", "display_name": "codebee", "link": "https://stackoverflow.com/users/1208108/codebee"}, "edited": false, "score": 0, "creation_date": 1447285051, "post_id": 33661464, "comment_id": 55097381, "body": "thanks yes, but that was the point of stubbing m1() or create_group_and_add_user(), I did not want to mock stub all methods it was calling. I mean what&#39;s the point of stubbing if it&#39;s still traversing through that method?"}, {"owner": {"reputation": 5419, "user_id": 887640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/w4OsI.png?s=128&g=1", "display_name": "Dmitry Sokurenko", "link": "https://stackoverflow.com/users/887640/dmitry-sokurenko"}, "reply_to_user": {"reputation": 704, "user_id": 1208108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/940bd70b3a317123fc85322151ee0c5f?s=128&d=identicon&r=PG", "display_name": "codebee", "link": "https://stackoverflow.com/users/1208108/codebee"}, "edited": false, "score": 0, "creation_date": 1447285350, "post_id": 33661464, "comment_id": 55097478, "body": "the original <code>create_group_and_add_user </code> should be never called, so check using the stack trace where the call happened, it couldn&#39;t be the mock."}, {"owner": {"reputation": 704, "user_id": 1208108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/940bd70b3a317123fc85322151ee0c5f?s=128&d=identicon&r=PG", "display_name": "codebee", "link": "https://stackoverflow.com/users/1208108/codebee"}, "edited": false, "score": 1, "creation_date": 1447285685, "post_id": 33661464, "comment_id": 55097598, "body": "cool, thanks pal, that was it. there was another method that had to be stubbed. but stub blocks are ugly if you&#39;re stubbing multiple methods with several &#39;do..end&#39; for each method stubbed. thanks again for your time."}], "tags": [], "owner": {"reputation": 5419, "user_id": 887640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/w4OsI.png?s=128&g=1", "display_name": "Dmitry Sokurenko", "link": "https://stackoverflow.com/users/887640/dmitry-sokurenko"}, "is_accepted": true, "score": 2, "last_activity_date": 1447283396, "last_edit_date": 1447283396, "creation_date": 1447282867, "answer_id": 33661464, "question_id": 33661300, "link": "https://stackoverflow.com/questions/33661300/how-to-mock-a-method-call-in-ruby/33661464#33661464", "title": "How to mock a method call in Ruby", "body": "<p>You can use MiniTest Object#stub method, it redefines the method result for the duration of the block.</p>\n\n<pre><code>require 'minitest/mock'\n\nclass A\n  def m1\n    m2\n    'the original result'\n  end\n\n  def m2\n    'm2 result'\n  end\nend\n\n@a = A.new\n@a.stub :m1, \"the stubbed result\" do\n\n  puts @a.m1  # will print 'the stubbed result'\n  puts @a.m2\n\nend\n</code></pre>\n\n<p>Read more: <a href=\"http://www.rubydoc.info/gems/minitest/4.2.0/Object:stub\" rel=\"nofollow\">http://www.rubydoc.info/gems/minitest/4.2.0/Object:stub</a></p>\n"}], "owner": {"reputation": 704, "user_id": 1208108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/940bd70b3a317123fc85322151ee0c5f?s=128&d=identicon&r=PG", "display_name": "codebee", "link": "https://stackoverflow.com/users/1208108/codebee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3057, "favorite_count": 0, "accepted_answer_id": 33661464, "answer_count": 1, "score": 1, "last_activity_date": 1447470253, "creation_date": 1447281991, "last_edit_date": 1447470253, "question_id": 33661300, "link": "https://stackoverflow.com/questions/33661300/how-to-mock-a-method-call-in-ruby", "title": "How to mock a method call in Ruby", "body": "<p>I'm writing a test method for Class A, method called m().</p>\n\n<p>m() calls f() on Class B through an instance of B called 'b', but I mock that method call using-</p>\n\n<pre><code>def test_m \n@a = A.new\nb_mock = MiniTest::Mock.new\nb_mock.expect(:f, 'expected_output')\ndef b_mock.f()\nreturn 'expected output'\nend\n@a.b = b_mock\nend\n</code></pre>\n\n<p>Now A has another method m1(), how can a mock a call to it and get a constant output, using the above or a better approach with Minitest?</p>\n\n<p>Error-</p>\n\n<pre><code>NoMethodError: unmocked method :get_group_by_name, expected one of [:]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1447279396, "post_id": 33660644, "comment_id": 55094948, "body": "Start by replacing all the calls to <code>.find_by_id</code> with <code>.find</code>. <code>.find</code> will always use the <code>id</code> column and does not have the overhead of the dynamic finder methods."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5552336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11610c31be39ead97cb1996af25035ed?s=128&d=identicon&r=PG&f=1", "display_name": "Jon", "link": "https://stackoverflow.com/users/5552336/jon"}, "edited": false, "score": 0, "creation_date": 1447334912, "post_id": 33663394, "comment_id": 55117769, "body": "all of the models work correctly in <code>rails console</code> and in the context of <code>rails server</code> just not in the worker context."}, {"owner": {"reputation": 1, "user_id": 5478586, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YzATz.jpg?s=128&g=1", "display_name": "totzyuta", "link": "https://stackoverflow.com/users/5478586/totzyuta"}, "reply_to_user": {"reputation": 1, "user_id": 5552336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11610c31be39ead97cb1996af25035ed?s=128&d=identicon&r=PG&f=1", "display_name": "Jon", "link": "https://stackoverflow.com/users/5552336/jon"}, "edited": false, "score": 0, "creation_date": 1447384045, "post_id": 33663394, "comment_id": 55143212, "body": "Maybe you can try to enqueue a job to KVS (you use redis?) by resque and check the jobs in redis in <code>rails console</code>. Or you can manage logs by using <code>Resque::Failure module</code>. See: <a href=\"https://github.com/resque/resque#failure\" rel=\"nofollow noreferrer\">github.com/resque/resque#failure</a>"}], "tags": [], "owner": {"reputation": 1, "user_id": 5478586, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YzATz.jpg?s=128&g=1", "display_name": "totzyuta", "link": "https://stackoverflow.com/users/5478586/totzyuta"}, "is_accepted": false, "score": 0, "last_activity_date": 1447295167, "creation_date": 1447295167, "answer_id": 33663394, "question_id": 33660644, "link": "https://stackoverflow.com/questions/33660644/nomethoderror-undefined-method-synchronize-for-activerecordattributemethods/33663394#33663394", "title": "NoMethodError: undefined method `synchronize&#39; for ActiveRecord::AttributeMethods::GeneratedAttributeMethods", "body": "<p>I guess I've encountered the issue once...</p>\n\n<p>The exception would be raised when Rails failed to find the method that was generated dynamically. So the case I can imagine is that Rails (ActiveRecord) did not define the methods dynamically.</p>\n\n<p>The matters which should be checked are...</p>\n\n<ol>\n<li>restarting resque and KVS. </li>\n<li>models' class names, parent classes (should be ActiveRecord::Base) and migration files if that follow Rails naming conventions correctly. See here: <a href=\"http://guides.rubyonrails.org/active_record_basics.html#naming-conventions\" rel=\"nofollow\">http://guides.rubyonrails.org/active_record_basics.html#naming-conventions</a></li>\n<li>reset and migrate again in all environments with the argument like <code>$ bin/rake db:migrate:reset RAILS_ENV=production</code></li>\n<li>stopping the Spring once by <code>$ bin/spring stop</code>. (It restarts automatically when the next <code>bin</code> command is called.)</li>\n</ol>\n\n<p>hmm...Can you use those methods in <code>rails console</code>?</p>\n\n<p>Hope it would help...!</p>\n"}, {"tags": [], "owner": {"reputation": 79, "user_id": 6390370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48445a3e819f39e27c00f842a3ff7721?s=128&d=identicon&r=PG&f=1", "display_name": "Jagan", "link": "https://stackoverflow.com/users/6390370/jagan"}, "is_accepted": false, "score": 0, "last_activity_date": 1516345692, "creation_date": 1516345692, "answer_id": 48335815, "question_id": 33660644, "link": "https://stackoverflow.com/questions/33660644/nomethoderror-undefined-method-synchronize-for-activerecordattributemethods/48335815#48335815", "title": "NoMethodError: undefined method `synchronize&#39; for ActiveRecord::AttributeMethods::GeneratedAttributeMethods", "body": "<p>`synchronize' error happens when the related gem is not up to date. I belive if you update your installed gems then the issue would be resolved.</p>\n"}], "owner": {"reputation": 1, "user_id": 5552336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11610c31be39ead97cb1996af25035ed?s=128&d=identicon&r=PG&f=1", "display_name": "Jon", "link": "https://stackoverflow.com/users/5552336/jon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 381, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1516345692, "creation_date": 1447279135, "question_id": 33660644, "link": "https://stackoverflow.com/questions/33660644/nomethoderror-undefined-method-synchronize-for-activerecordattributemethods", "title": "NoMethodError: undefined method `synchronize&#39; for ActiveRecord::AttributeMethods::GeneratedAttributeMethods", "body": "<p>I'm working on a project where we are migrating from an old ruby web api (not rails) that was pulling in activeSupport and activeRecord 4.1.8 and using resque 1.25.2 for jobs to a new rails 4.2.4 project using resque 1.25.2 for job processing as well. Everything has been going pretty smoothly until I started a resque work to process jobs and I got:</p>\n\n<p><code>NoMethodError: undefined method 'synchronize' for ActiveRecord::AttributeMethods::GeneratedAttributeMethods</code></p>\n\n<p>This error is only thrown when <code>User.find_by_id</code> or <code>User.new</code> is called within the context of a worker process. This same error is thrown when calling several other models as well but not all of them. <code>Company.new</code>, for example, doesn't throw the error and if I rename the <code>User</code> model to say <code>Companya</code> the error goes away... Running ruby 2.2.3 on the rails app. </p>\n\n<p>Any help would be greatly appreciated. </p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1447279432, "post_id": 33660556, "comment_id": 55094962, "body": "What&#39;s the specific issue? That&#39;s how you delete an item from an array."}, {"owner": {"reputation": 672, "user_id": 5504718, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/541cf9c5c47f4973ae823621e37ce337?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/5504718/chrism"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1447280331, "post_id": 33660556, "comment_id": 55095389, "body": "What about everything else? Would this function return the topic removed if it is removed and return null if its not in the list?"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1447282383, "post_id": 33660556, "comment_id": 55096391, "body": "<code>topic</code> isn&#39;t defined in the method, so it wouldn&#39;t even run (unless it&#39;s a method as well)."}, {"owner": {"reputation": 672, "user_id": 5504718, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/541cf9c5c47f4973ae823621e37ce337?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/5504718/chrism"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1447282767, "post_id": 33660556, "comment_id": 55096533, "body": "Sorry didnt include that part. So are we good to go with rspec testing now? The function seems like its ok?"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1447285692, "post_id": 33660556, "comment_id": 55097600, "body": "Probably should have been worrying the test first. But sure-if you&#39;re testing correctly you&#39;ll know if it&#39;s OK-that&#39;s kind of the point."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1447287514, "post_id": 33660556, "comment_id": 55098110, "body": "Welcome to Stack Overflow. Your question needs some work. Please take the time to use correct grammar and punctuation, and indent your code correctly. The time you spend asking your question and making it format correctly will pay off in the answers you get; Not spending the time reduces the effort others will pay your question."}], "answers": [{"comments": [{"owner": {"reputation": 672, "user_id": 5504718, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/541cf9c5c47f4973ae823621e37ce337?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/5504718/chrism"}, "edited": false, "score": 0, "creation_date": 1447279423, "post_id": 33660661, "comment_id": 55094955, "body": "Thanks can you explain what the results = line does?"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1447280092, "post_id": 33660661, "comment_id": 55095256, "body": "While true, this doesn&#39;t really address the original issue; using <code>delete</code> should work properly all other things being equal. Whether or not it&#39;s a good idea is a separate discussion!"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "reply_to_user": {"reputation": 672, "user_id": 5504718, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/541cf9c5c47f4973ae823621e37ce337?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/5504718/chrism"}, "edited": false, "score": 0, "creation_date": 1447280524, "post_id": 33660661, "comment_id": 55095489, "body": "@ChrisMaher, That assigns the return value of the method to the variable results."}, {"owner": {"reputation": 672, "user_id": 5504718, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/541cf9c5c47f4973ae823621e37ce337?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/5504718/chrism"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1447280679, "post_id": 33660661, "comment_id": 55095556, "body": "@Dave. Thanks @ 7Stud Strange hearing null doesnt exist. Im following a tutorial and this is the exercise at the end. Heres the instructions. <a href=\"http://pastebin.com/g49YWGnL\" rel=\"nofollow noreferrer\">pastebin.com/g49YWGnL</a>"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "reply_to_user": {"reputation": 672, "user_id": 5504718, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/541cf9c5c47f4973ae823621e37ce337?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/5504718/chrism"}, "edited": false, "score": 0, "creation_date": 1447282328, "post_id": 33660661, "comment_id": 55096371, "body": "@ChrisMaher It&#39;s sort of the same thing; Ruby&#39;s equivalent. One difference is that <code>nil</code> is a class in Ruby, <code>NilClass</code>, which is useful. Is this really a Ruby exercise? If so, it&#39;s too bad they didn&#39;t follow Ruby naming conventions (snake_case, not camelCase). I&#39;d recommend changing the names to more Ruby-like ones."}, {"owner": {"reputation": 672, "user_id": 5504718, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/541cf9c5c47f4973ae823621e37ce337?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/5504718/chrism"}, "edited": false, "score": 0, "creation_date": 1447282679, "post_id": 33660661, "comment_id": 55096500, "body": "Exercise was to write it in Java first and Junit test it. Then write in Ruby and Rspec test it. hence the naming problems. I want to be 100% certain im testing the right thing or im wrong before starting. So could i move to the testing now do you think?"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "reply_to_user": {"reputation": 672, "user_id": 5504718, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/541cf9c5c47f4973ae823621e37ce337?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/5504718/chrism"}, "edited": false, "score": 0, "creation_date": 1447319003, "post_id": 33660661, "comment_id": 55108332, "body": "@ChrisMaher, What you stated in your question is not what was asked for at that link.  See bottom of my answer for another solution."}], "tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": true, "score": 3, "last_activity_date": 1447311536, "last_edit_date": 1447311536, "creation_date": 1447279196, "answer_id": 33660661, "question_id": 33660556, "link": "https://stackoverflow.com/questions/33660556/ruby-delete-from-array-of-arrays-based-from-parameter/33660661#33660661", "title": "Ruby - Delete from array of arrays based from Parameter", "body": "<blockquote>\n  <p>a 3d array</p>\n</blockquote>\n\n<p>Your arrays are two dimensional.</p>\n\n<blockquote>\n  <p>return null if its not in the list.</p>\n</blockquote>\n\n<p><code>null</code> doesn't exist in ruby--there is <code>nil</code>, though.</p>\n\n<pre><code>def remove(target, array2D)\n\n  results = array2D.reject do |arr|\n    arr.last == target\n  end\n\n  results.size == array2D.size ? nil : results\nend\n\ntest_arrays = [\n  [[5,'Topic1'], [3,'Topic2'], [5,'Topic3']],\n  [[5,'Topic4'], [3,'Topic5'], [5,'Topic6']]\n]\n\ntest_arrays.each do |array2D|\n  p remove('Topic2', array2D)\nend\n\n--output:--\n[[5, \"Topic1\"], [5, \"Topic3\"]]\nnil\n</code></pre>\n\n<p>On the other hand, a solution for this question:</p>\n\n<blockquote>\n  <p>remove a topic from the list. Returns the topic removed; otherwise,\n  return null when topic is not currently in the list.</p>\n</blockquote>\n\n<p>is:</p>\n\n<pre><code>def remove(target, array2D)\n\n  array2D.each_with_index do |arr, index|\n    if arr.last == target\n      array2D.delete_at(index)\n      return arr\n    end\n  end\n\n  return nil\n\nend\n\ntest_arrays = [\n  [[5,'Topic1'], [3,'Topic2'], [5,'Topic3']],\n  [[5,'Topic4'], [3,'Topic5'], [5,'Topic6']]\n]\n\ntest_arrays.each do |array2D|\n  p remove('Topic2', array2D)\nend\n\n--output:--\n[3, \"Topic2\"]\nnil\n</code></pre>\n"}], "owner": {"reputation": 672, "user_id": 5504718, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/541cf9c5c47f4973ae823621e37ce337?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisM", "link": "https://stackoverflow.com/users/5504718/chrism"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 33660661, "answer_count": 1, "score": 0, "last_activity_date": 1447340237, "creation_date": 1447278875, "last_edit_date": 1447340237, "question_id": 33660556, "link": "https://stackoverflow.com/questions/33660556/ruby-delete-from-array-of-arrays-based-from-parameter", "title": "Ruby - Delete from array of arrays based from Parameter", "body": "<p>I'm trying to write a function that will remove an array from a 3d array where an array has a matching String name.</p>\n\n<pre><code>before(:each) do\n  @topic1 = Topic.new 4,'topic 1'\n  @topic2 = Topic.new 7,'topic 2'\n  @topic3 = Topic.new 5,'topic 3'\n  @subject = Subject.new 'Module 1',2,5\nend\n</code></pre>\n\n<p>parameters are No_of_Lectures and Name</p>\n\n<pre><code>@topics = [5,'Topic1'], [3,'Topic2'], [5,'Topic3']  \n</code></pre>\n\n<p>Basically I'd like to remove the array where Name = 'Topic1' or return null if it's not in the list.</p>\n\n<p>What I have so far is</p>\n\n<pre><code>def findTopic name\n  @topics.find {|topic| topic.name == name }\nend\n\n\ndef removeTopic name_in\n  if @topics.findTopic(name)\n    @topics.delete_if {|key, name| name == name_in } \n    topic\n  else\n    null\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1447277497, "post_id": 33660162, "comment_id": 55094001, "body": "<code>puts ARGV.inspect</code> =&gt; Or, if you would rather do less typing: <code>p ARGV</code>."}], "tags": [], "owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "is_accepted": false, "score": 0, "last_activity_date": 1447278201, "last_edit_date": 1447278201, "creation_date": 1447277148, "answer_id": 33660162, "question_id": 33660120, "link": "https://stackoverflow.com/questions/33660120/command-line-arguments-ruby/33660162#33660162", "title": "Command line arguments ruby?", "body": "<p>First of all, you are on the right track. <code>ARGV[0]</code> or <code>ARGV.first</code> is the right way to grab the first argument. I suspect that you are not sending/receiving the arguments properly. \nIn that case, doing <code>p ARGV</code> will help you figure that out.</p>\n\n<p>To see all the arguments you are receiving, do:</p>\n\n<pre><code>puts ARGV.inspect\n</code></pre>\n\n<p>or,</p>\n\n<pre><code>p ARGV\n</code></pre>\n\n<p>This will give you an array of arguments you pass. Like this:</p>\n\n<pre><code>\u279c ruby test.rb foo bar baz\n# =&gt; [\"foo\", \"bar\", \"baz\"]\n</code></pre>\n\n<p>Then, according to your need, do:</p>\n\n<pre><code>puts ARGV.first\nputs ARGV.last\n</code></pre>\n\n<p>and save the file_name like this:</p>\n\n<pre><code>filename = ARGV.first\n</code></pre>\n\n<p>or, </p>\n\n<pre><code>filename = ARGV[0]\n</code></pre>\n\n<p>Here is doc for <a href=\"http://ruby-doc.org/core-2.2.0/Object.html#ARGV\" rel=\"nofollow\">ARGV</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": false, "score": 1, "last_activity_date": 1447278017, "last_edit_date": 1447278017, "creation_date": 1447277685, "answer_id": 33660262, "question_id": 33660120, "link": "https://stackoverflow.com/questions/33660120/command-line-arguments-ruby/33660262#33660262", "title": "Command line arguments ruby?", "body": "<pre><code>#myprog.rb\np ARGV\n\nfname = ARGV[0]\nputs fname\n\nputs File.read(fname)\n\n--output:--\n$ cat data.txt\nJohn: a,123,b,456\nSally: c,789,b,0\n\n~/ruby_programs$ ruby myprog.rb data.txt 10 hello\n[\"data.txt\", \"10\", \"hello\"]\ndata.txt\nJohn: a,123,b,456\nSally: c,789,b,0\n</code></pre>\n"}], "owner": {"reputation": 879, "user_id": 2891052, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a1f8c59e87f64136351065dce4b53ce8?s=128&d=identicon&r=PG", "display_name": "dobbs", "link": "https://stackoverflow.com/users/2891052/dobbs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 455, "favorite_count": 0, "closed_date": 1447288056, "answer_count": 2, "score": -2, "last_activity_date": 1447279246, "creation_date": 1447276965, "last_edit_date": 1447279246, "question_id": 33660120, "link": "https://stackoverflow.com/questions/33660120/command-line-arguments-ruby", "closed_reason": "Duplicate", "title": "Command line arguments ruby?", "body": "<p>Hooray, its dumb question day! ;) </p>\n\n<p>I know enough ruby to be dangerous but dont know a lot of basic foundational things. Can anyone direct me to some documentation or help me out with how to get my ruby code to take the first argument i throw at it (a file name) and store the filename in a variable? I've tried <code>ARGV[0]</code> and <code>ARGV.first</code>. </p>\n\n<pre><code>require 'mysql'\nrequire 'nessus'\n\nbegin\n\n\nfilename = ARGV.first\nscanTime = Time.now.to_i\n\nNessus::Parse.new(filename, :version =&gt; 2) do |scan|\n....\n</code></pre>\n"}, {"tags": ["ruby", "function", "class", "gem"], "answers": [{"tags": [], "owner": {"reputation": 5419, "user_id": 887640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/w4OsI.png?s=128&g=1", "display_name": "Dmitry Sokurenko", "link": "https://stackoverflow.com/users/887640/dmitry-sokurenko"}, "is_accepted": true, "score": 1, "last_activity_date": 1447277246, "creation_date": 1447277246, "answer_id": 33660182, "question_id": 33660011, "link": "https://stackoverflow.com/questions/33660011/repercussion-of-loading-packages-within-a-function-instead-of-class/33660182#33660182", "title": "Repercussion of loading packages within a function instead of class", "body": "<p>That's the question of how often the <code>do_stuff</code> will be called. If just a few times, then use the <code>require</code> inside it, otherwise require just once.</p>\n\n<p>It easy to test it:</p>\n\n<pre><code>require 'benchmark'\nrequire 'json' # require any library, doesn't matter\n\nn = 1_000_000\n\ndef foo_with_require\n  require 'json'\n  2 + 2\nend\n\ndef foo_without_require\n  2 + 2\nend\n\nBenchmark.bm(20) do |benchmark|\n  benchmark.report('require each time', 20) do\n    n.times { foo_with_require }\n  end\n  benchmark.report('require once') do\n    n.times { foo_without_require }\n  end\nend\n</code></pre>\n\n<p>The results are the following:</p>\n\n<pre><code>                           user     system      total        real\nrequire each time      2.260000   0.010000   2.270000 (  2.273471)\nrequire once           0.080000   0.010000   0.090000 (  0.079403)\n</code></pre>\n\n<p>So requiring just once is about 30 times faster, when the function body is as simple as <code>2 + 2</code>, but if your function does anything more meaningful, the difference will be negligible.</p>\n"}, {"tags": [], "owner": {"reputation": 186, "user_id": 5546878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/369cd7101ef422446725a2c5525657b4?s=128&d=identicon&r=PG&f=1", "display_name": "CraigM", "link": "https://stackoverflow.com/users/5546878/craigm"}, "is_accepted": false, "score": 1, "last_activity_date": 1447423422, "last_edit_date": 1447423422, "creation_date": 1447337540, "answer_id": 33673441, "question_id": 33660011, "link": "https://stackoverflow.com/questions/33660011/repercussion-of-loading-packages-within-a-function-instead-of-class/33673441#33673441", "title": "Repercussion of loading packages within a function instead of class", "body": "<p>A couple of points:</p>\n\n<ol>\n<li>Putting <code>require 'toad'</code> within a method doesn't change the fact that it will load constants (e.g. modules) and globals into the (global) scope of the running program.</li>\n<li><code>require</code> does remember the files it has already loaded (see <code>$LOADED_FEATURES</code>) and will only load a unique file path once.</li>\n<li><p>To defer requiring a file until it's necessary to do so, you can use <code>autoload</code> (which was to be deprecated at one point because of thread-safety, but that's been addressed and it's still part of Kernel), as follows:</p>\n\n<pre><code>class MyClass\n  autoload :Toad, 'toad'\n  ...\nend\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 815, "user_id": 1497315, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ctrJi.jpg?s=128&g=1", "display_name": "Tristan Tao", "link": "https://stackoverflow.com/users/1497315/tristan-tao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 33660182, "answer_count": 2, "score": 1, "last_activity_date": 1447423422, "creation_date": 1447276574, "last_edit_date": 1447282099, "question_id": 33660011, "link": "https://stackoverflow.com/questions/33660011/repercussion-of-loading-packages-within-a-function-instead-of-class", "title": "Repercussion of loading packages within a function instead of class", "body": "<p>Let's say I want use a library called 'toad'.</p>\n\n<p>I can do (in Ruby pseudo-code):</p>\n\n<pre><code>require 'toad'\n\nClass MyClass\n def do_stuff\n   Toad.do_toad_stuff\n end\n...\nend\n</code></pre>\n\n<p>But I can also do</p>\n\n<pre><code>...\n def do_stuff\n   require 'toad'\n   Toad.do_toad_stuff\n end\n...\n</code></pre>\n\n<p>Let's say toad is a rather small library. Does it (really) matter where I do it? If it matters, let's say this function gets called a few times per user visit to my web application.</p>\n\n<p>I guess I'm ultimately curious if any optimization happens.</p>\n"}, {"tags": ["arrays", "ruby", "file"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 6, "creation_date": 1447275817, "post_id": 33659732, "comment_id": 55093137, "body": "There are numerous posts about reading a file line by line. For example, <a href=\"http://stackoverflow.com/questions/5545068/what-are-all-the-common-ways-to-read-a-file-in-ruby\">this one</a>. You can modify it slightly to load an array."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1447288768, "post_id": 33659732, "comment_id": 55098485, "body": "Your data file looks like no other I&#39;ve ever seen. What&#39;s generating it? Are you <i>sure</i> that&#39;s how it actually looks? <i>WHY</i> do you want to read a file into an array? Is the file guaranteed to <i>always</i> fit into memory? Please read <a href=\"http://stackoverflow.com/questions/25189262/\">stackoverflow.com/questions/25189262</a>."}], "answers": [{"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": false, "score": 3, "last_activity_date": 1447275944, "creation_date": 1447275944, "answer_id": 33659829, "question_id": 33659732, "link": "https://stackoverflow.com/questions/33659732/how-to-read-file-into-line-by-line-array-in-ruby/33659829#33659829", "title": "How to read file into line by line array in Ruby?", "body": "<p>Use <code>File.readlines</code> (<a href=\"http://ruby-doc.org/core-2.1.0/IO.html#method-c-readlines\" rel=\"nofollow\">inherited from IO</a>):</p>\n\n<pre><code>lines = File.readlines(filename)\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 4761362, "user_type": "registered", "profile_image": "https://graph.facebook.com/1036148259745849/picture?type=large", "display_name": "Chintan Vadgama", "link": "https://stackoverflow.com/users/4761362/chintan-vadgama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2114, "favorite_count": 0, "closed_date": 1447288920, "answer_count": 1, "score": -1, "last_activity_date": 1447275944, "creation_date": 1447275596, "question_id": 33659732, "link": "https://stackoverflow.com/questions/33659732/how-to-read-file-into-line-by-line-array-in-ruby", "closed_reason": "Duplicate", "title": "How to read file into line by line array in Ruby?", "body": "<p>I have a file data like this:</p>\n\n<pre><code>  productRankingOct12: [\n  value: \"LessPopularityEPC\"\n,\n  value: \"CtrEpcJob\"\n,\n  value: \"DeviceSpecificLPE\"\n]\nguidedSearch: [\n  value: false\n,\n  value: true\n]\n</code></pre>\n\n<p>I would like to read the lines into array &amp; store it like </p>\n\n<pre><code>array[0] = productRankingOct12: [\narray[1] = value: \"LessPopularityEPC\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "polymer-1.0", "sprockets"], "comments": [{"owner": {"reputation": 143, "user_id": 5347516, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-hQUQg-QfXvQ/AAAAAAAAAAI/AAAAAAAAADo/Khrz3j7rKFg/photo.jpg?sz=128", "display_name": "Alex cueto", "link": "https://stackoverflow.com/users/5347516/alex-cueto"}, "edited": false, "score": 0, "creation_date": 1447339309, "post_id": 33659486, "comment_id": 55120825, "body": "Someone can help me? please!!!!"}], "owner": {"reputation": 143, "user_id": 5347516, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-hQUQg-QfXvQ/AAAAAAAAAAI/AAAAAAAAADo/Khrz3j7rKFg/photo.jpg?sz=128", "display_name": "Alex cueto", "link": "https://stackoverflow.com/users/5347516/alex-cueto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 430, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1447275162, "creation_date": 1447274659, "question_id": 33659486, "link": "https://stackoverflow.com/questions/33659486/error-sprocketsfilenotfound-couldnt-find-file-with-type-text-html", "title": "Error: Sprockets::FileNotFound: couldn&#39;t find file &#39;&#39; with type &#39;text/html&#39;", "body": "<p>i have to used the Polymer-rails gem and when i'am deploying on Heroku said me this error: Sprockets::FileNotFound: couldn't find file '' with type 'text/html'</p>\n\n<p>here my output console:</p>\n\n<pre><code>    Agencias-iMac-2:coster agencia03$ git push heroku master\nCounting objects: 537, done.\nDelta compression using up to 2 threads.\nCompressing objects: 100% (469/469), done.\nWriting objects: 100% (509/509), 1.38 MiB | 103 KiB/s, done.\nTotal 509 (delta 97), reused 0 (delta 0)\nremote: Compressing source files... done.\nremote: Building source:\nremote: \nremote: -----&gt; Using set buildpack heroku/ruby\nremote: -----&gt; Ruby app detected\nremote: -----&gt; Compiling Ruby/Rails\nremote: -----&gt; Using Ruby version: ruby-2.0.0\nremote: -----&gt; Installing dependencies using bundler 1.9.7\nremote:        Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin -j4 --deployment\nremote:        Fetching gem metadata from https://rails-assets.org/..\nremote:        Fetching gem metadata from https://rubygems.org/...........\nremote:        Fetching version metadata from https://rails-assets.org/..\nremote:        Fetching version metadata from https://rubygems.org/...\nremote:        Fetching dependency metadata from https://rails-assets.org/..\nremote:        Fetching dependency metadata from https://rubygems.org/..\nremote:        Fetching gem metadata from https://rails-assets.org/..\nremote:        Fetching version metadata from https://rails-assets.org/..\nremote:        Rubygems 2.0.14 is not threadsafe, so your gems must be installed one at a time. Upgrade to Rubygems 2.1.0 or higher to enable parallel gem installation.\nremote:        Using rake 10.4.2\nremote:        Using i18n 0.7.0\nremote:        Using json 1.8.3\nremote:        Using minitest 5.8.2\nremote:        Using thread_safe 0.3.5\nremote:        Using tzinfo 1.2.2\nremote:        Using activesupport 4.2.3\nremote:        Using builder 3.2.2\nremote:        Using erubis 2.7.0\nremote:        Using mini_portile 0.6.2\nremote:        Using nokogiri 1.6.6.2\nremote:        Using rails-deprecated_sanitizer 1.0.3\nremote:        Using rails-dom-testing 1.0.7\nremote:        Using loofah 2.0.3\nremote:        Using rails-html-sanitizer 1.0.2\nremote:        Using actionview 4.2.3\nremote:        Using rack 1.6.4\nremote:        Using rack-test 0.6.3\nremote:        Using actionpack 4.2.3\nremote:        Using globalid 0.3.6\nremote:        Using activejob 4.2.3\nremote:        Using mime-types 2.6.2\nremote:        Using mail 2.6.3\nremote:        Using actionmailer 4.2.3\nremote:        Using activemodel 4.2.3\nremote:        Using arel 6.0.3\nremote:        Using activerecord 4.2.3\nremote:        Using coffee-script-source 1.9.1.1\nremote:        Using execjs 2.6.0\nremote:        Using coffee-script 2.4.1\nremote:        Using thor 0.19.1\nremote:        Using railties 4.2.3\nremote:        Using coffee-rails 4.1.0\nremote:        Using multi_json 1.11.2\nremote:        Using jbuilder 2.3.2\nremote:        Using jquery-rails 4.0.5\nremote:        Installing nokogumbo 1.4.5\nremote:        Using pg 0.18.3\nremote:        Using bundler 1.9.7\nremote:        Installing sprockets 3.0.3\nremote:        Using sprockets-rails 2.3.3\nremote:        Using rails 4.2.3\nremote:        Installing polymer-rails 1.1.5\nremote:        Installing rails-assets-jquery 2.1.4\nremote:        Installing rails-assets-bootstrap 3.3.5\nremote:        Using rails_serve_static_assets 0.0.4\nremote:        Using rails_stdout_logging 0.0.4\nremote:        Using rails_12factor 0.0.3\nremote:        Using rdoc 4.2.0\nremote:        Installing responders 2.1.0\nremote:        Using sass 3.4.19\nremote:        Using tilt 2.0.1\nremote:        Using sass-rails 5.0.4\nremote:        Using sdoc 0.4.1\nremote:        Using turbolinks 2.5.3\nremote:        Using uglifier 2.7.2\nremote:        Bundle complete! 16 Gemfile dependencies, 56 gems now installed.\nremote:        Gems in the groups development and test were not installed.\nremote:        Bundled gems are installed into ./vendor/bundle.\nremote:        Bundle completed (15.63s)\nremote:        Cleaning up the bundler cache.\nremote:        Removing sprockets (3.4.0)\nremote: -----&gt; Preparing app for Rails asset pipeline\nremote:        Running: rake assets:precompile\nremote:        rake aborted!\nremote:        Sprockets::FileNotFound: couldn't find file '' with type 'text/html'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/resolve.rb:64:in `resolve!'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/context.rb:88:in `resolve'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/legacy.rb:253:in `resolve_with_compat'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/context.rb:142:in `require_asset'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/polymer-rails-1.1.5/lib/polymer-rails/processors/component.rb:24:in `block in require_imports'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/nokogiri-1.6.6.2/lib/nokogiri/xml/node_set.rb:187:in `block in each'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/nokogiri-1.6.6.2/lib/nokogiri/xml/node_set.rb:186:in `upto'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/nokogiri-1.6.6.2/lib/nokogiri/xml/node_set.rb:186:in `each'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/polymer-rails-1.1.5/lib/polymer-rails/processors/component.rb:23:in `require_imports'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/polymer-rails-1.1.5/lib/polymer-rails/processors/component.rb:16:in `process'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/polymer-rails-1.1.5/lib/polymer-rails/processors/sprockets_v3_processor.rb:15:in `call'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/polymer-rails-1.1.5/lib/polymer-rails/processors/sprockets_v3_processor.rb:10:in `call'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/processor_utils.rb:75:in `call_processor'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/processor_utils.rb:57:in `block in call_processors'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/processor_utils.rb:56:in `reverse_each'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/processor_utils.rb:56:in `call_processors'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/loader.rb:87:in `load_asset_by_uri'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/loader.rb:45:in `block in load'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/loader.rb:157:in `fetch_asset_from_dependency_cache'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/loader.rb:38:in `load'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/cached_environment.rb:20:in `block in initialize'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/cached_environment.rb:47:in `yield'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/cached_environment.rb:47:in `load'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/bundle.rb:23:in `block in call'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/utils.rb:183:in `dfs'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/bundle.rb:24:in `call'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/processor_utils.rb:75:in `call_processor'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/processor_utils.rb:57:in `block in call_processors'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/processor_utils.rb:56:in `reverse_each'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/processor_utils.rb:56:in `call_processors'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/loader.rb:87:in `load_asset_by_uri'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/loader.rb:45:in `block in load'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/loader.rb:157:in `fetch_asset_from_dependency_cache'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/loader.rb:38:in `load'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/cached_environment.rb:20:in `block in initialize'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/cached_environment.rb:47:in `yield'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/cached_environment.rb:47:in `load'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/base.rb:63:in `find_asset'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/base.rb:70:in `find_all_linked_assets'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/manifest.rb:138:in `block in find'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/legacy.rb:114:in `block (2 levels) in logical_paths'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/path_utils.rb:223:in `block in stat_tree'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/path_utils.rb:207:in `block in stat_directory'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/path_utils.rb:204:in `each'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/path_utils.rb:204:in `stat_directory'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/path_utils.rb:222:in `stat_tree\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/legacy.rb:105:in `each'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/legacy.rb:105:in `block in logical_paths'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/legacy.rb:104:in `each'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/legacy.rb:104:in `logical_paths\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/manifest.rb:136:in `find'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/sprockets/manifest.rb:162:in `compile'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-rails-2.3.3/lib/sprockets/rails/task.rb:70:in `block (3 levels) in define'\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-3.0.3/lib/rake/sprocketstask.rb:147:in `with_logger\nremote:        /tmp/build_ddbd90019b1e1d286bbac64c0c08a2a1/vendor/bundle/ruby/2.0.0/gems/sprockets-rails-2.3.3/lib/sprockets/rails/task.rb:69:in `block (2 levels) in define'\nremote:        Tasks: TOP =&gt; assets:precompile\nremote:        (See full trace by running task with --trace)\nremote:  !\nremote:  !     Precompiling assets failed.\nremote:  !\nremote: \nremote:  !     Push rejected, failed to compile Ruby app\nremote: \nremote: Verifying deploy...\nremote: \nremote: !   Push rejected to coster.\nremote:\n</code></pre>\n\n<p>and here are my gem file:</p>\n\n<pre><code>    source 'https://rubygems.org'\n\nruby '2.0.0'\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '4.2.3'\n# Use postgresql as the database for Active Record\ngem 'pg'\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.1.0'\n# See https://github.com/rails/execjs#readme for more supported runtimes\n# gem 'therubyracer', platforms: :ruby\n\ngem 'responders', '~&gt; 2.0'\n\ngem 'polymer-rails'\n\nsource 'https://rails-assets.org' do\n gem 'rails-assets-bootstrap'\nend\n\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\n# Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinks\ngem 'turbolinks'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.0'\n# bundle exec rake doc:rails generates the API under doc/api.\ngem 'sdoc', '~&gt; 0.4.0', group: :doc\n\n# Use ActiveModel has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\n\n# Use Unicorn as the app server\n# gem 'unicorn'\n\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug'\n\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; in views\n  gem 'web-console', '~&gt; 2.0'\n\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring'\nend\n\ngroup :production do\n\n  gem 'rails_12factor'\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "json"], "comments": [{"owner": {"reputation": 5419, "user_id": 887640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/w4OsI.png?s=128&g=1", "display_name": "Dmitry Sokurenko", "link": "https://stackoverflow.com/users/887640/dmitry-sokurenko"}, "edited": false, "score": 2, "creation_date": 1447275514, "post_id": 33659390, "comment_id": 55092982, "body": "Try to parse that JSON as a string literal (it works fine for me). Then compare whatever you read from file with that literal, probably something is messed up on the reading step."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1447276430, "post_id": 33659390, "comment_id": 55093468, "body": "Run this:  <code>p File.read(&#39;your_json_file.json&#39;)</code> and post the part where the error is."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1447277136, "post_id": 33659390, "comment_id": 55093841, "body": "The only way I can get close to your error message is if I do: <code>JSON.parse &#39;tep5&#39;</code> =&gt; <code>JSON::ParserError: 757: unexpected token at &#39;tep5&#39;</code>  However, the quotes in your error are different.  Did you copy and paste the error?  Or, did you hand write the error message?"}, {"owner": {"reputation": 8159, "user_id": 1720985, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0c7a3d1f4d51d4fb5f776238714e6498?s=128&d=identicon&r=PG", "display_name": "scientiffic", "link": "https://stackoverflow.com/users/1720985/scientiffic"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1447287599, "post_id": 33659390, "comment_id": 55098130, "body": "@7stud I copy and pasted the error"}], "answers": [{"tags": [], "owner": {"reputation": 8159, "user_id": 1720985, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0c7a3d1f4d51d4fb5f776238714e6498?s=128&d=identicon&r=PG", "display_name": "scientiffic", "link": "https://stackoverflow.com/users/1720985/scientiffic"}, "is_accepted": false, "score": 0, "last_activity_date": 1447355769, "creation_date": 1447355769, "answer_id": 33679460, "question_id": 33659390, "link": "https://stackoverflow.com/questions/33659390/json-parseserror-757/33679460#33679460", "title": "JSON ParsesError 757", "body": "<p>I believe that the issue I was experiencing is specific to using AWS S3.  </p>\n\n<p>Previously, this is how I would try to parse the data:</p>\n\n<p>s3 = AWS::S3.new(:access_key_id => ENV['AWS_ACCESS_KEY_ID'], :secret_access_key => ENV['AWS_ACCESS_KEY'])\n    key = \"logs/\" + self.id.to_s + \".json\"\n    project_json = []</p>\n\n<pre><code>obj = s3.buckets[ENV['AWS_BUCKET']].objects[key]\nif obj.exists?\n  # get the current log file if it exists and append to it\n  obj.read do |data|\n    project_json = data\n  end\nend\n</code></pre>\n\n<p>I got rid of the error by removing the do code for obj.read:</p>\n\n<pre><code>if obj.exists?\n  # get the current log file if it exists and append to it\n  project_json = JSON.parse(obj.read)\nend\n</code></pre>\n"}], "owner": {"reputation": 8159, "user_id": 1720985, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0c7a3d1f4d51d4fb5f776238714e6498?s=128&d=identicon&r=PG", "display_name": "scientiffic", "link": "https://stackoverflow.com/users/1720985/scientiffic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447355769, "creation_date": 1447274291, "question_id": 33659390, "link": "https://stackoverflow.com/questions/33659390/json-parseserror-757", "title": "JSON ParsesError 757", "body": "<p>In my Rails app, I'm trying to run JSON.parse on the contents of a JSON file and am getting the error</p>\n\n<pre><code>JSON::ParserError: 757: unexpected token at 'tep 5\",\n          \"position\": 8,\n          \"ancestry\": \"2482/2483/2484/2485/2486/2487/2488/2489\"\n        }\n</code></pre>\n\n<p>When I look at my JSON, I see the following: </p>\n\n<pre><code> {\n          \"id\": 2490,\n          \"name\": \"Step 5\",\n          \"position\": 8,\n          \"ancestry\": \"2482/2483/2484/2485/2486/2487/2488/2489\"\n        }\n</code></pre>\n\n<p>Any ideas why it is incorrectly parsing the string \"Step 5\"?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-admin"], "comments": [{"owner": {"reputation": 3665, "user_id": 4330954, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/340ffba5552ac48227741a8695a255ff?s=128&d=identicon&r=PG", "display_name": "x6iae", "link": "https://stackoverflow.com/users/4330954/x6iae"}, "edited": false, "score": 1, "creation_date": 1447273543, "post_id": 33659159, "comment_id": 55091970, "body": "It is definitely possible. Could you give an example of what you are trying to do?"}, {"owner": {"reputation": 4731, "user_id": 2757483, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/7812459/picture?type=large", "display_name": "Jackson", "link": "https://stackoverflow.com/users/2757483/jackson"}, "reply_to_user": {"reputation": 3665, "user_id": 4330954, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/340ffba5552ac48227741a8695a255ff?s=128&d=identicon&r=PG", "display_name": "x6iae", "link": "https://stackoverflow.com/users/4330954/x6iae"}, "edited": false, "score": 0, "creation_date": 1447273596, "post_id": 33659159, "comment_id": 55091994, "body": "So I am currently creating new users via the Rails Admin tool. Right now that new view only shows fields for attributes of that model (fields on the table). I would like to add two additional fields to that view (the form). I then want to use those two fields to calculate a value for one of the actual attributes on the model. Does that make sense?"}], "answers": [{"tags": [], "owner": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "is_accepted": false, "score": -1, "last_activity_date": 1447283743, "last_edit_date": 1447283743, "creation_date": 1447281856, "answer_id": 33661264, "question_id": 33659159, "link": "https://stackoverflow.com/questions/33659159/add-fields-to-new-view-in-rails-admin/33661264#33661264", "title": "Add fields to &#39;new&#39; view in Rails Admin", "body": "<p>I'm not entirely familiar with Rails Admin, but you should be able to get what you want with Rails' virtual attributes mechanism.</p>\n\n<p>In your <code>user.rb</code> model file, you need to add an <code>attr_accessor</code> line, listing the symbols you want to assign to your non-model fields, like this:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n\n  attr_accessor :virtual_field_one, :virtual_field_two\n\n  # Remainder of your code\n\nend\n</code></pre>\n\n<p>You can add fields to the corresponding view that populate those values:</p>\n\n<pre><code>&lt;%= f.text_field :virtual_field_one %&gt;\n</code></pre>\n\n<p>Then you can add those attributes to the strong parameters method of your <code>users_controller.rb</code>, like this:</p>\n\n<pre><code>class ActivitiesController &lt; ApplicationController\n\n  # other code\n\n  def user_params\n    params.require(:activity).permit(:mode_field_one, :mode_field_two, :virtual_field_one, :virtual_field_two)\n  end\n\n  # other code\n\nend\n</code></pre>\n\n<p>Now you should be able to access <code>virtual_field_one</code> and <code>virtual_field_two</code> from the <code>params</code> hash like any other field in your <code>User</code> model:</p>\n\n<pre><code>virtual_field_one = params[:virtual_field_one]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1568, "user_id": 2480797, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2a04379ffec2649bc2a9f2c703cd6ba5?s=128&d=identicon&r=PG", "display_name": "rinold simon", "link": "https://stackoverflow.com/users/2480797/rinold-simon"}, "is_accepted": false, "score": 0, "last_activity_date": 1575367988, "creation_date": 1575367988, "answer_id": 59154688, "question_id": 33659159, "link": "https://stackoverflow.com/questions/33659159/add-fields-to-new-view-in-rails-admin/59154688#59154688", "title": "Add fields to &#39;new&#39; view in Rails Admin", "body": "<p>Add virtual field to your model in rails admin using,</p>\n\n<pre><code>config.model Address do\n  list do\n    # virtual field\n    configure :full_address do\n      # any configuration\n    end\n    fields :full_address, :street, :number #, ...\n  end\nend\n</code></pre>\n\n<p>Reference - <a href=\"https://github.com/sferik/rails_admin/wiki/Fields#virtual-fields\" rel=\"nofollow noreferrer\">https://github.com/sferik/rails_admin/wiki/Fields#virtual-fields</a></p>\n"}], "owner": {"reputation": 4731, "user_id": 2757483, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/7812459/picture?type=large", "display_name": "Jackson", "link": "https://stackoverflow.com/users/2757483/jackson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 714, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1575367988, "creation_date": 1447273421, "question_id": 33659159, "link": "https://stackoverflow.com/questions/33659159/add-fields-to-new-view-in-rails-admin", "title": "Add fields to &#39;new&#39; view in Rails Admin", "body": "<p>I would like to add additional fields to the Rails Admin 'new' view for a specific model object, 'User'. These fields would not be attributes on the model itself but instead just fields that I would like users to be able to submit information with in order to calculate another field. </p>\n\n<p>Is this possible?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "fixtures", "sequel"], "comments": [{"owner": {"reputation": 17880, "user_id": 2155313, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/fp9tO.jpg?s=128&g=1", "display_name": "errata", "link": "https://stackoverflow.com/users/2155313/errata"}, "edited": false, "score": 0, "creation_date": 1447273998, "post_id": 33659145, "comment_id": 55092216, "body": "Have you considered using Factories instead of Fixtures? Take a look at factory_girl gem."}, {"owner": {"reputation": 101, "user_id": 5095772, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ElkVYK9OmXA/AAAAAAAAAAI/AAAAAAAAADY/iGjk-9Czq20/photo.jpg?sz=128", "display_name": "Tyler Amos", "link": "https://stackoverflow.com/users/5095772/tyler-amos"}, "reply_to_user": {"reputation": 17880, "user_id": 2155313, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/fp9tO.jpg?s=128&g=1", "display_name": "errata", "link": "https://stackoverflow.com/users/2155313/errata"}, "edited": false, "score": 0, "creation_date": 1447274208, "post_id": 33659145, "comment_id": 55092324, "body": "I have but I would like to have both options available.  I&#39;d like to be able to start tests with a common set of test data in the database."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1447286143, "post_id": 33659145, "comment_id": 55097729, "body": "<i>Why?</i> By running your tests against a clean slate you will catch bugs that can be masked by having a bunch of fixtures hanging around. A very common bug is views or controllers that break when the table is empty."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1447286461, "post_id": 33659145, "comment_id": 55097823, "body": "A concrete example is when developer A decides that having a bunch of Foo&#39;s around in the test environment is convenient and developer B creates a feature and forgets to check <code>if Foo.any?</code>. The tests pass and it is pushed to production which crashes since there are no Foo&#39;s. Or when people check the count in a test after saving and it is 1 even though no record was created."}, {"owner": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 0, "creation_date": 1577748455, "post_id": 33659145, "comment_id": 105245821, "body": "@TylerAmos did you manage to get it working? I&#39;m stuck on the same problem: trying to get a simple hello world fixture running using sequel, rather than activerecord. on pointers would be much appreciated."}, {"owner": {"reputation": 101, "user_id": 5095772, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ElkVYK9OmXA/AAAAAAAAAAI/AAAAAAAAADY/iGjk-9Czq20/photo.jpg?sz=128", "display_name": "Tyler Amos", "link": "https://stackoverflow.com/users/5095772/tyler-amos"}, "reply_to_user": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 0, "creation_date": 1577980500, "post_id": 33659145, "comment_id": 105300368, "body": "@BKSpurgeon I&#39;m sorry.  I don&#39;t recall now if I got this working.  It was so long ago :("}], "owner": {"reputation": 101, "user_id": 5095772, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ElkVYK9OmXA/AAAAAAAAAAI/AAAAAAAAADY/iGjk-9Czq20/photo.jpg?sz=128", "display_name": "Tyler Amos", "link": "https://stackoverflow.com/users/5095772/tyler-amos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 233, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1447273389, "creation_date": 1447273389, "question_id": 33659145, "link": "https://stackoverflow.com/questions/33659145/using-fixtures-with-sequel-rails", "title": "Using fixtures with sequel-rails", "body": "<p>I'm working on an existing Rails 4.0 project that is using Sequel for the ORM rather than ActiveRecord via the <code>sequel-rails</code> gem.  There are no tests for this application currently.  I am trying to write some tests that load fixtures from YAML files similar to the Rails guides recommend (<a href=\"http://guides.rubyonrails.org/testing.html#the-low-down-on-fixtures\" rel=\"nofollow\">http://guides.rubyonrails.org/testing.html#the-low-down-on-fixtures</a>).  I've not been successful thus far trying to get fixtures loaded.  Are there any recommendations or guides for testing a Rails application using Sequel?</p>\n\n<p>I found a gem by Jeremy Evans, fixture_dependencies (<a href=\"https://github.com/jeremyevans/fixture_dependencies\" rel=\"nofollow\">https://github.com/jeremyevans/fixture_dependencies</a>), which seems promising.  It advertises that it works for Sequel and ActiveRecord but I get an error when calling the <code>fixtures</code> class method.</p>\n\n<p>Here's my setup:</p>\n\n<ol>\n<li><p>In <code>config/application.rb</code>, I've disabled ActiveRecord as the <code>sequel-rails</code> github page outlines:</p>\n\n<pre><code>#require 'rails/all'\nrequire 'action_controller/railtie'\n#require 'active_record/railtie'\nrequire 'action_mailer/railtie'\nrequire 'rails/test_unit/railtie'\nrequire 'sprockets/railtie'\n</code></pre></li>\n<li><p>In <code>test/test_helper.rb</code>, I've required <code>fixture_dependencies</code>:</p>\n\n<pre><code>ENV[\"RAILS_ENV\"] ||= \"test\"\nrequire File.expand_path('../../config/environment', __FILE__)\nrequire 'rails/test_help'\nrequire 'fixture_dependencies/test_unit/sequel'\n\nrequire 'minitest/focus'\nrequire 'minitest/reporters'\n\nMinitest::Reporters.use! Minitest::Reporters::DefaultReporter.new\n\nclass ActiveSupport::TestCase\n  # Disabling the following since we are not using ActiveRecord\n  #ActiveRecord::Migration.check_pending!\n\n  fixtures :all\n\nend\n</code></pre></li>\n</ol>\n\n<p>When I run my tests, I get the following error:</p>\n\n<pre><code>\u279c bundle exec rake\nrake aborted!\nundefined method `fixtures` for ActiveSupport::TestCase:Class\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-3.2"], "answers": [{"comments": [{"owner": {"reputation": 269, "user_id": 3170149, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/sa7zd.jpg?s=128&g=1", "display_name": "maikovich", "link": "https://stackoverflow.com/users/3170149/maikovich"}, "edited": false, "score": 0, "creation_date": 1447272521, "post_id": 33658931, "comment_id": 55091453, "body": "Next time I&#39;ll check the API more thoroughly! Thanks!"}], "tags": [], "owner": {"reputation": 858, "user_id": 4276488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a159aab6ee3d60cf758cfa563e51d73?s=128&d=identicon&r=PG&f=1", "display_name": "Bryan Oemar", "link": "https://stackoverflow.com/users/4276488/bryan-oemar"}, "is_accepted": false, "score": 1, "last_activity_date": 1447272397, "creation_date": 1447272397, "answer_id": 33658931, "question_id": 33658827, "link": "https://stackoverflow.com/questions/33658827/special-attributes-in-helper-input-field-tag-in-rails-view/33658931#33658931", "title": "Special attributes in helper input field tag in Rails view", "body": "<p>Use this:</p>\n\n<pre><code>&lt;%= radio_button_tag :name, \"Name\", false, aria: { label: 'Name' } %&gt;\n</code></pre>\n\n<p>You also need to specify the 'checked' parameter to match the method interface.</p>\n\n<p>Also for reference see the Rails API:\n<a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-radio_button_tag\" rel=\"nofollow\">http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-radio_button_tag</a></p>\n"}, {"tags": [], "owner": {"reputation": 269, "user_id": 3170149, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/sa7zd.jpg?s=128&g=1", "display_name": "maikovich", "link": "https://stackoverflow.com/users/3170149/maikovich"}, "is_accepted": false, "score": 0, "last_activity_date": 1447273052, "creation_date": 1447273052, "answer_id": 33659073, "question_id": 33658827, "link": "https://stackoverflow.com/questions/33658827/special-attributes-in-helper-input-field-tag-in-rails-view/33659073#33659073", "title": "Special attributes in helper input field tag in Rails view", "body": "<p>As suggested by Bryan Oemar, I checked the Rails API (<a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-radio_button_tag\" rel=\"nofollow\">http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-radio_button_tag</a>) and found this:</p>\n\n<pre><code>radio_button_tag(name, value, checked = false, options = {}) \n</code></pre>\n\n<p>I needed to specify the third parameter correctly. Here is the answer:</p>\n\n<pre><code>&lt;%= radio_button_tag :name, \"Name\", false, 'aria-label' =&gt; 'Name' %&gt;\n</code></pre>\n\n<p><strong>NB:</strong> <code>aria: { label: 'Name' }</code> in the tag will <strong>not</strong> work.</p>\n"}], "owner": {"reputation": 269, "user_id": 3170149, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/sa7zd.jpg?s=128&g=1", "display_name": "maikovich", "link": "https://stackoverflow.com/users/3170149/maikovich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 767, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1447273052, "creation_date": 1447271933, "question_id": 33658827, "link": "https://stackoverflow.com/questions/33658827/special-attributes-in-helper-input-field-tag-in-rails-view", "title": "Special attributes in helper input field tag in Rails view", "body": "<p>How to add special attributes (like <code>aria-label</code>) into an input field tag function in a Rails view?</p>\n\n<p>I tried these, but they did not work:</p>\n\n<pre><code>&lt;%= radio_button_tag :name, \"Name\", aria: { label: 'Name' } %&gt;\n&lt;%= radio_button_tag :name, \"Name\", 'aria-label' =&gt; 'Name' %&gt;\n</code></pre>\n\n<p>Thanks in advance. I am using Rails 3.2.22.</p>\n"}, {"tags": ["ruby", "mongodb", "memory-leaks", "parallel-processing"], "comments": [{"owner": {"reputation": 633, "user_id": 5107759, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/33e659c0770221780a6fd21960909b6d?s=128&d=identicon&r=PG", "display_name": "joanbm", "link": "https://stackoverflow.com/users/5107759/joanbm"}, "edited": false, "score": 0, "creation_date": 1447276722, "post_id": 33658542, "comment_id": 55093619, "body": "Without code shown it is not possible to say why it leaks. It is unlikely Ruby 2.1.5 leaks itself. If the code is complicated to post on SO, I&#39;d suggest some debugging tools like <a href=\"https://github.com/ko1/gc_tracer\" rel=\"nofollow noreferrer\"><code>gc_tracer</code></a> written by VM and GC&#39;s author himself."}, {"owner": {"reputation": 633, "user_id": 5107759, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/33e659c0770221780a6fd21960909b6d?s=128&d=identicon&r=PG", "display_name": "joanbm", "link": "https://stackoverflow.com/users/5107759/joanbm"}, "edited": false, "score": 0, "creation_date": 1447277107, "post_id": 33658542, "comment_id": 55093827, "body": "Btw. wrong use of <code>Timeout</code> module may lead to memory leaks. It is frequently ignored, timeout exception may arise anywhere even in ensure or rescue blocks, if not explicitly handled."}, {"owner": {"reputation": 9641, "user_id": 311901, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ae735b7993ad5c05647c98c509a2a765?s=128&d=identicon&r=PG", "display_name": "Jordan Feldstein", "link": "https://stackoverflow.com/users/311901/jordan-feldstein"}, "reply_to_user": {"reputation": 633, "user_id": 5107759, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/33e659c0770221780a6fd21960909b6d?s=128&d=identicon&r=PG", "display_name": "joanbm", "link": "https://stackoverflow.com/users/5107759/joanbm"}, "edited": false, "score": 0, "creation_date": 1447478618, "post_id": 33658542, "comment_id": 55182977, "body": "Yea, how ought I be using it?"}, {"owner": {"reputation": 4271, "user_id": 2416049, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ae3e41bd94866b970a7f2c5e8a16594c?s=128&d=identicon&r=PG", "display_name": "jtmarmon", "link": "https://stackoverflow.com/users/2416049/jtmarmon"}, "edited": false, "score": 0, "creation_date": 1447951390, "post_id": 33658542, "comment_id": 55384563, "body": "@JordanFeldstein - did you try reducing the number of threads as per my answer? did it work?"}, {"owner": {"reputation": 9641, "user_id": 311901, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ae735b7993ad5c05647c98c509a2a765?s=128&d=identicon&r=PG", "display_name": "Jordan Feldstein", "link": "https://stackoverflow.com/users/311901/jordan-feldstein"}, "reply_to_user": {"reputation": 4271, "user_id": 2416049, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ae3e41bd94866b970a7f2c5e8a16594c?s=128&d=identicon&r=PG", "display_name": "jtmarmon", "link": "https://stackoverflow.com/users/2416049/jtmarmon"}, "edited": false, "score": 0, "creation_date": 1447997129, "post_id": 33658542, "comment_id": 55404911, "body": "@jtmarmon It did not work :^("}], "answers": [{"comments": [{"owner": {"reputation": 9641, "user_id": 311901, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ae735b7993ad5c05647c98c509a2a765?s=128&d=identicon&r=PG", "display_name": "Jordan Feldstein", "link": "https://stackoverflow.com/users/311901/jordan-feldstein"}, "edited": false, "score": 0, "creation_date": 1447997171, "post_id": 33793567, "comment_id": 55404929, "body": "I&#39;ve run it in a single thread -- It still bloats. I think I&#39;m keeping reference to the results of each mongo query, or HTTP call ... but i can&#39;t determine where"}, {"owner": {"reputation": 405, "user_id": 1472621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc346c5eb97a9ef44347af50a81ad81f?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1472621/matt"}, "edited": false, "score": 2, "creation_date": 1448300294, "post_id": 33793567, "comment_id": 55518004, "body": "The issue might become clearer if you refactor script to be fully object-oriented. In the past, I&#39;ve been better able to pinpoint issues like this by having everything encapsulated in classes and methods. <a href=\"http://bugroll.com/rock-solid-rake-tasks.html\" rel=\"nofollow noreferrer\">bugroll.com/rock-solid-rake-tasks.html</a> might be of help; it&#39;s helped me."}], "tags": [], "owner": {"reputation": 4271, "user_id": 2416049, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ae3e41bd94866b970a7f2c5e8a16594c?s=128&d=identicon&r=PG", "display_name": "jtmarmon", "link": "https://stackoverflow.com/users/2416049/jtmarmon"}, "is_accepted": false, "score": 3, "last_activity_date": 1447895620, "creation_date": 1447895620, "answer_id": 33793567, "question_id": 33658542, "link": "https://stackoverflow.com/questions/33658542/1gb-memory-allocated-to-lib-ruby-2-1-0-timeout-rb/33793567#33793567", "title": "1GB memory allocated to &quot;lib/ruby/2.1.0/timeout.rb&quot;", "body": "<p>You're loading in a <em>ton</em> of data (depending on how many users you have) and then sleeping for 20 seconds <em>in parallel</em>. So basically if you have a hundred users, you're retrieving the twitter data for 100 users at once and then sleeping, doing that again and so on. This memory probably looks like it's being attributed to the timeout process because that's who's in charge of it during the 20 second sleep.</p>\n\n<p>Try reducing the number of threads you're using from <code>keys.length</code> to only a few (play with the number)</p>\n"}, {"comments": [{"owner": {"reputation": 9641, "user_id": 311901, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ae735b7993ad5c05647c98c509a2a765?s=128&d=identicon&r=PG", "display_name": "Jordan Feldstein", "link": "https://stackoverflow.com/users/311901/jordan-feldstein"}, "edited": false, "score": 0, "creation_date": 1448295783, "post_id": 33841465, "comment_id": 55515050, "body": "Thanks for the technical details -- I never knew this about Ruby! However, I&#39;m not sure how to implement your feedback. Would you link to examples in the source that might be responsible for storing too many strings? <a href=\"https://gist.github.com/jfeldstein/3769902a50ebef1fb536\" rel=\"nofollow noreferrer\">gist.github.com/jfeldstein/3769902a50ebef1fb536</a> It isn&#39;t obvious to me how to perform what I&#39;m doing without storing strings..."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 9641, "user_id": 311901, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ae735b7993ad5c05647c98c509a2a765?s=128&d=identicon&r=PG", "display_name": "Jordan Feldstein", "link": "https://stackoverflow.com/users/311901/jordan-feldstein"}, "edited": false, "score": 0, "creation_date": 1448347963, "post_id": 33841465, "comment_id": 55538085, "body": "I suspect lines like that one: <a href=\"https://gist.github.com/jfeldstein/3769902a50ebef1fb536#file-twitter_enrichment-rb-L157\" rel=\"nofollow noreferrer\">gist.github.com/jfeldstein/&hellip;</a> This <code>map</code> gorges 5000 slots (heaps) at once. Try to play with it (e.g. use <code>500</code> instead of <code>5000</code>,) but, honestly, I am not sure there is a simple way to significally improve memory consumption. Maybe it\u2019s a good time to give <a href=\"http://elixir-lang.org/\" rel=\"nofollow noreferrer\">Elixir</a> a try :)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 9641, "user_id": 311901, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ae735b7993ad5c05647c98c509a2a765?s=128&d=identicon&r=PG", "display_name": "Jordan Feldstein", "link": "https://stackoverflow.com/users/311901/jordan-feldstein"}, "edited": false, "score": 1, "creation_date": 1448348153, "post_id": 33841465, "comment_id": 55538176, "body": "BTW, the original question <i>\u201cHow is GC not cleaning this?\u201d</i> is more or less answered above."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 3, "last_activity_date": 1448095543, "creation_date": 1448095543, "answer_id": 33841465, "question_id": 33658542, "link": "https://stackoverflow.com/questions/33658542/1gb-memory-allocated-to-lib-ruby-2-1-0-timeout-rb/33841465#33841465", "title": "1GB memory allocated to &quot;lib/ruby/2.1.0/timeout.rb&quot;", "body": "<p>Ruby memory management is both elegant and cumbersome. It stores objects (named <code>RVALUE</code>s) in so-called heaps of size of approx 16KB. On a low level, <code>RVALUE</code> is a <code>c</code>-struct, containing a union of different standard ruby object representations.</p>\n\n<p>So, heaps store <code>RVALUE</code> objects, which size is not more than 40 bytes. For such objects as <code>String</code>, <code>Array</code>, <code>Hash</code> etc. this means that small objects can fit in the heap, but as soon as they reach a threshold, an extra memory outside of the Ruby heaps will be allocated.</p>\n\n<p><strong>This extra memory is flexible; is will be freed as soon as an object became GC\u2019ed. But the heaps themselves are not released to OS anymore.</strong></p>\n\n<p>That said, once you are loading many <em>short</em> strings into ruby memory simultaneously, heaps amount is increasing and this memory is never returned back to ruby. This might sound weird, but try please <em>not <strong>to store</strong> strings, shorter that 23 symbols</em>. That insane, sorry for the proposal :)</p>\n\n<p>That might help as well: <a href=\"http://www.sitepoint.com/ruby-uses-memory/\" rel=\"nofollow\">http://www.sitepoint.com/ruby-uses-memory/</a></p>\n"}], "owner": {"reputation": 9641, "user_id": 311901, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ae735b7993ad5c05647c98c509a2a765?s=128&d=identicon&r=PG", "display_name": "Jordan Feldstein", "link": "https://stackoverflow.com/users/311901/jordan-feldstein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 671, "favorite_count": 1, "accepted_answer_id": 33841465, "answer_count": 2, "score": 9, "last_activity_date": 1448095543, "creation_date": 1447270824, "last_edit_date": 1447706256, "question_id": 33658542, "link": "https://stackoverflow.com/questions/33658542/1gb-memory-allocated-to-lib-ruby-2-1-0-timeout-rb", "title": "1GB memory allocated to &quot;lib/ruby/2.1.0/timeout.rb&quot;", "body": "<p>I'm using Twitter, Mongo, and Parallel in a loop to retrieve and store data. </p>\n\n<p>Memory utilization hitting 1.5GB+</p>\n\n<p>How is GC not cleaning this? </p>\n\n<p><strong>UPDATE:</strong> <a href=\"https://gist.github.com/jfeldstein/3769902a50ebef1fb536\">Here is the script in question</a>.</p>\n\n<pre><code>allocated memory by location\n-----------------------------------\n 973409328  /Users/jordan/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/timeout.rb:82\n 359655091  /Users/jordan/.rvm/gems/ruby-2.1.5/gems/json-1.8.3/lib/json/common.rb:155\n  34706221  /Users/jordan/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/openssl/buffering.rb:182\n  31767589  /Users/jordan/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/net/http/response.rb:368\n  22055648  /Users/jordan/.rvm/gems/ruby-2.1.5/gems/parallel-1.6.1/lib/parallel.rb:183\n  12129637  /Users/jordan/.rvm/gems/ruby-2.1.5/gems/addressable-2.3.8/lib/addressable/uri.rb:525\n  11115133  /Users/jordan/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/net/protocol.rb:172\n  10609088  /Users/jordan/.rvm/gems/ruby-2.1.5/gems/addressable-2.3.8/lib/addressable/idna/pure.rb:177\n   8333448  /Users/jordan/.rvm/gems/ruby-2.1.5/gems/twitter-5.15.0/lib/twitter/base.rb:152\n   6041744  /Users/jordan/.rvm/gems/ruby-2.1.5/gems/thread_safe-0.3.5/lib/thread_safe/non_concurrent_cache_backend.rb:8\n   4857232  /Users/jordan/.rvm/gems/ruby-2.1.5/gems/addressable-2.3.8/lib/addressable/uri.rb:1477\n   4583920  /Users/jordan/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/monitor.rb:241\n   4524872  /Users/jordan/.rvm/gems/ruby-2.1.5/gems/memoizable-0.4.2/lib/memoizable/method_builder.rb:117\n   4282752  /Users/jordan/.rvm/gems/ruby-2.1.5/gems/twitter-5.15.0/lib/twitter/base.rb:151\n   4200641  /Users/jordan/.rvm/gems/ruby-2.1.5/gems/mongo-2.1.1/lib/mongo/monitoring/command_log_subscriber.rb:104\n   3283047  /Users/jordan/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/net/http/response.rb:61\n   3150696  /Users/jordan/.rvm/gems/ruby-2.1.5/gems/mongo-2.1.1/lib/mongo/server/monitor.rb:125\n\n\nallocated memory by gem\n-----------------------------------\n1084770550  ruby-2.1.5/lib\n 359655091  json-1.8.3\n  53016839  addressable-2.3.8\n  22069048  parallel-1.6.1\n  18422826  twitter-5.15.0\n  10829988  mongo-2.1.1\n   8908392  memoizable-0.4.2\n   6041744  thread_safe-0.3.5\n   4904294  faraday-0.9.2\n   3839455  other\n   3382080  naught-1.1.0\n   2429320  bson-3.2.6\n   1123917  rubygems\n    320962  rollbar-2.4.0\n    205097  activesupport-4.2.4\n     20005  multi_json-1.11.2\n</code></pre>\n"}, {"tags": ["ruby", "nokogiri", "pass-by-reference", "pass-by-value"], "comments": [{"owner": {"reputation": 957, "user_id": 1305875, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f65c15c6c9199623f71c6261ad957dfc?s=128&d=identicon&r=PG&f=1", "display_name": "ABC123", "link": "https://stackoverflow.com/users/1305875/abc123"}, "edited": false, "score": 0, "creation_date": 1476631685, "post_id": 33658473, "comment_id": 67417298, "body": "Did you find the CFRMergedXML.xsd to validate the cfrdoc?  Did you have to combine the xsd with an xjb?"}], "answers": [{"comments": [{"owner": {"reputation": 2245, "user_id": 2129574, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/6f6479cddb4e9ee2d9db0c22135efbb2?s=128&d=identicon&r=PG", "display_name": "Tim Morton", "link": "https://stackoverflow.com/users/2129574/tim-morton"}, "edited": false, "score": 0, "creation_date": 1447273677, "post_id": 33658971, "comment_id": 55092041, "body": "Thanks for the quick response.  Yes, <code>&#47;&#47;</code> is a &quot;global&quot; search, but frequently gov&#39;t XML fails to encapsulate things in a logical way. For my own sanity, I&#39;m wanting to extract a smaller chunk to work with.  Put another way, I&#39;m wanting to do a <code>&#47;&#47;</code> search on a smaller subset, because sometimes the content I&#39;m looking for is wrapped in another node, sometimes not-- so I gravitate towards using <code>&#47;&#47;</code>"}, {"owner": {"reputation": 2245, "user_id": 2129574, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/6f6479cddb4e9ee2d9db0c22135efbb2?s=128&d=identicon&r=PG", "display_name": "Tim Morton", "link": "https://stackoverflow.com/users/2129574/tim-morton"}, "edited": false, "score": 0, "creation_date": 1447275133, "post_id": 33658971, "comment_id": 55092794, "body": "Ah, you expanded on your answer while I was commenting.  That does look clean, and it looks a lot simpler to refer to specific nodes.  I&#39;ll have to consider that."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 2245, "user_id": 2129574, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/6f6479cddb4e9ee2d9db0c22135efbb2?s=128&d=identicon&r=PG", "display_name": "Tim Morton", "link": "https://stackoverflow.com/users/2129574/tim-morton"}, "edited": false, "score": 0, "creation_date": 1447279996, "post_id": 33658971, "comment_id": 55095202, "body": "You&#39;ll find that complete answers take a while to generate and often go through several updates before they&#39;re stable. (Many of us wait a while to see if we like the direction the answers are going before answering too; I don&#39;t need points, I just want to see sensible answers.) So, it&#39;s a good idea to wait a day before beginning to analyze and select an answer."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 2245, "user_id": 2129574, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/6f6479cddb4e9ee2d9db0c22135efbb2?s=128&d=identicon&r=PG", "display_name": "Tim Morton", "link": "https://stackoverflow.com/users/2129574/tim-morton"}, "edited": false, "score": 0, "creation_date": 1447280120, "post_id": 33658971, "comment_id": 55095273, "body": "Clean code is essential, both when writing the code, but even more so when returning to the code months or years later. I harp on maintainability and code we can grok quickly is much better at 3:00AM when the world is in flames."}, {"owner": {"reputation": 2245, "user_id": 2129574, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/6f6479cddb4e9ee2d9db0c22135efbb2?s=128&d=identicon&r=PG", "display_name": "Tim Morton", "link": "https://stackoverflow.com/users/2129574/tim-morton"}, "edited": false, "score": 0, "creation_date": 1447285159, "post_id": 33658971, "comment_id": 55097421, "body": "Noted and appreciated :) Hard to wait when you&#39;re stumped :/        I have a follow-up question on <code>doc.search()</code>:  When I was testing it, it only seems to work with <code>Nokogiri::HTML()</code> and not <code>Nokogiri::XML()</code>?  Not sure what&#39;s going on with that."}, {"owner": {"reputation": 2245, "user_id": 2129574, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/6f6479cddb4e9ee2d9db0c22135efbb2?s=128&d=identicon&r=PG", "display_name": "Tim Morton", "link": "https://stackoverflow.com/users/2129574/tim-morton"}, "edited": false, "score": 0, "creation_date": 1447285407, "post_id": 33658971, "comment_id": 55097501, "body": "Would it be good form to unselect the &quot;answered&quot; check in order to invite more conversation (and possible refining of answers), or would it just be insulting at this point?  Last thing I want to do is insult folks that are helping me understand."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 2245, "user_id": 2129574, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/6f6479cddb4e9ee2d9db0c22135efbb2?s=128&d=identicon&r=PG", "display_name": "Tim Morton", "link": "https://stackoverflow.com/users/2129574/tim-morton"}, "edited": false, "score": 0, "creation_date": 1447286231, "post_id": 33658971, "comment_id": 55097749, "body": "I don&#39;t think you can unselect it, but I&#39;ve never tried, and I&#39;ve asked very few questions so I&#39;m not a good resource there. :-) The consensus in the community is to wait a while before selecting answers for the reasons I said. You can &quot;reselect&quot; but that&#39;s not important to me, I&#39;d rather you find the answer that works correctly for you, the answer that is efficient and easy to understand, AKA &quot;elegant&quot;."}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 2, "last_activity_date": 1493058795, "last_edit_date": 1495542852, "creation_date": 1447272540, "answer_id": 33658971, "question_id": 33658473, "link": "https://stackoverflow.com/questions/33658473/how-to-grab-a-node-and-work-on-it-as-a-new-object/33658971#33658971", "title": "How to grab a node and work on it as a new object", "body": "<p><code>\"//part\"</code> means \"start at the top of the document and search to the bottom, finding all <code>&lt;part&gt;</code> nodes.</p>\n\n<p>That's not what you want. </p>\n\n<p>Instead you want:</p>\n\n<pre><code>\"./part\"\n</code></pre>\n\n<p>which means \"start at the current place and search inside it.</p>\n\n<p>It's easiest to think of XPath as if you're navigating a directory structure on a disk. If you wanted to find a file at the root of the drive you'd use:</p>\n\n<pre><code>/foo\n</code></pre>\n\n<p>and if you wanted to find a file in the current directory you'd use:</p>\n\n<pre><code>./foo\n</code></pre>\n\n<p>XPath uses <code>//</code> to say \"search from the top to the bottom\":</p>\n\n<pre><code>//foo\n</code></pre>\n\n<p>Instead of XPath, I recommend using CSS selectors unless I need the power of XPath. I find XPath to be visually noisy. So, instead, I'd use:</p>\n\n<pre><code>section = doc.search('section')\n</code></pre>\n\n<p>and</p>\n\n<pre><code>section.search('part')\n</code></pre>\n\n<p>Now, meditate on this:</p>\n\n<pre><code>require 'nokogiri'\n\nxml = &lt;&lt;XMLEND\n&lt;CFRDOC xsi:noNamespaceSchemaLocation=\"CFRMergedXML.xsd\"&gt;\n  &lt;TITLE&gt;\n    &lt;SUBTITLE&gt;\n      &lt;CHAPTER&gt;\n        &lt;PART&gt;&lt;/PART&gt;\n        &lt;PART&gt;\n          &lt;SECTION&gt;section1&lt;/SECTION&gt;\n          &lt;SECTION&gt;section2&lt;/SECTION&gt;\n          &lt;SECTION&gt;section3&lt;/SECTION&gt;\n          &lt;SECTION&gt;section4&lt;/SECTION&gt;\n        &lt;/PART&gt;\n      &lt;/CHAPTER&gt;\n    &lt;/SUBTITLE&gt;\n  &lt;/TITLE&gt;\n&lt;/CFRDOC&gt;\nXMLEND\n\ndoc = Nokogiri::XML(xml)\n</code></pre>\n\n<p>I reduced the XML for readability.</p>\n\n<pre><code>doc.search('SECTION').map(&amp;:text) # =&gt; [\"section1\", \"section2\", \"section3\", \"section4\"]\ndoc.search('PART').size # =&gt; 2\ndoc.search('PART[2]').text # =&gt; \"\\n          section1\\n          section2\\n          section3\\n          section4\\n        \"\ndoc.search('PART[2]').search('SECTION').map(&amp;:text) # =&gt; [\"section1\", \"section2\", \"section3\", \"section4\"]\ndoc.search('PART[2] SECTION').map(&amp;:text) # =&gt; [\"section1\", \"section2\", \"section3\", \"section4\"]\ndoc.search('PART SECTION').map(&amp;:text) # =&gt; [\"section1\", \"section2\", \"section3\", \"section4\"]\n</code></pre>\n\n<p>Using simple selectors it's easy to drill into a document. Sometimes it's impossible to write a simple selector, so we have to find way-points in the document and navigate from those, but based on the example XML it's pretty straightforward.</p>\n\n<p>See \"<a href=\"https://stackoverflow.com/questions/43594656/how-to-avoid-joining-all-text-from-nodes-when-scraping\">How to avoid joining all text from Nodes when scraping</a>\" also.</p>\n"}, {"comments": [{"owner": {"reputation": 2245, "user_id": 2129574, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/6f6479cddb4e9ee2d9db0c22135efbb2?s=128&d=identicon&r=PG", "display_name": "Tim Morton", "link": "https://stackoverflow.com/users/2129574/tim-morton"}, "edited": false, "score": 0, "creation_date": 1447275716, "post_id": 33659503, "comment_id": 55093087, "body": "Now that I see it, it&#39;s obvious...    There was some reason I was using <code>Nokogiri::HTML</code> instead of <code>Nokogiri::XML</code>. But for the life of me I don&#39;t remember what it was or if it was a <i>good</i> reason."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1447287096, "post_id": 33659503, "comment_id": 55098003, "body": "Parsing using <code>Nokogiri::XML</code> vs. the HTML variant results in tighter restrictions being applied for XML. See <a href=\"http://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri/XML/ParseOptions\" rel=\"nofollow noreferrer\">rubydoc.info/github/sparklemotion/nokogiri/Nokogiri/XML/&hellip;</a>, the <code>DEFAULT_XML</code> definition. HTML is &quot;freakin&#39; sloppy&quot; (my words for it) but that&#39;s what libXML needs to understand HTML. Using <code>to_s</code> works, but it&#39;d be more proper to use <code>to_xml</code>, <code>to_xhtml</code> or <code>to_html</code> than <code>to_s</code>."}], "tags": [], "owner": {"reputation": 10490, "user_id": 513951, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6cace4406e1ea825e78ec0134a5ea6fd?s=128&d=identicon&r=PG&f=1", "display_name": "user513951", "link": "https://stackoverflow.com/users/513951/user513951"}, "is_accepted": true, "score": 1, "last_activity_date": 1447287972, "last_edit_date": 1447287972, "creation_date": 1447274714, "answer_id": 33659503, "question_id": 33658473, "link": "https://stackoverflow.com/questions/33658473/how-to-grab-a-node-and-work-on-it-as-a-new-object/33659503#33659503", "title": "How to grab a node and work on it as a new object", "body": "<p>Use <code>to_xml</code> to turn <code>temp</code> back into an XML string, then use <code>Nokogiri::XML</code> again to get a new object.</p>\n\n<pre><code>my_section = Nokogiri::XML(temp.to_xml)\nmy_section.xpath('//part').size\n# =&gt; 0\n\nputs my_section\n# &lt;?xml version=\"1.0\"?&gt;\n# &lt;section&gt;&lt;section4&lt;/section&gt;\n</code></pre>\n\n<p>(I'm not sure why you're using <code>Nokogiri::HTML</code> to begin with, but you may substitute that back in here for <code>XML</code> if you think you need to.)</p>\n"}], "owner": {"reputation": 2245, "user_id": 2129574, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/6f6479cddb4e9ee2d9db0c22135efbb2?s=128&d=identicon&r=PG", "display_name": "Tim Morton", "link": "https://stackoverflow.com/users/2129574/tim-morton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 33659503, "answer_count": 2, "score": 0, "last_activity_date": 1493058795, "creation_date": 1447270573, "last_edit_date": 1447289042, "question_id": 33658473, "link": "https://stackoverflow.com/questions/33658473/how-to-grab-a-node-and-work-on-it-as-a-new-object", "title": "How to grab a node and work on it as a new object", "body": "<p>I need to pull a fragment out of a large XML file and work only with that fragment.</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>xml = &lt;&lt;XMLEND\n&lt;CFRDOC xsi:noNamespaceSchemaLocation=\"CFRMergedXML.xsd\"&gt;\n    &lt;TITLE&gt;\n        &lt;SUBTITLE&gt;\n            &lt;CHAPTER&gt;\n                &lt;TOC&gt;&lt;/TOC&gt;\n                &lt;PART&gt;&lt;/PART&gt;\n                &lt;PART&gt;&lt;/PART&gt;\n                &lt;PART&gt;\n                    &lt;EAR&gt;Pt. 1903&lt;/EAR&gt;\n                    &lt;HD SOURCE=\"HED\"&gt;PART 1903\u2014INSPECTIONS, CITATIONS AND PROPOSED PENALTIES&lt;/HD&gt;\n                    &lt;CONTENTS&gt;&lt;/CONTENTS&gt;\n                    &lt;AUTH&gt;&lt;/AUTH&gt;\n                    &lt;SOURCE&gt;&lt;/SOURCE&gt;\n                    &lt;SECTION&gt;section1&lt;/SECTION&gt;\n                    &lt;SECTION&gt;section2&lt;/SECTION&gt;\n                    &lt;SECTION&gt;section3&lt;/SECTION&gt;\n                    &lt;SECTION&gt;section4&lt;/SECTION&gt;\n                &lt;/PART&gt;\n            &lt;/CHAPTER&gt;\n        &lt;/SUBTITLE&gt;\n    &lt;/TITLE&gt;\n&lt;/CFRDOC&gt;\nXMLEND\n\ndoc = Nokogiri::HTML(xml)\n\nsection = doc.xpath(\"//section\")\n\n# I can grab a specific node...\nsection[3].text          \n=&gt; \"section4\"\n\n# copy it \ntemp = section[3].dup\n=&gt; #&lt;Nokogiri::XML::Element:0x261ce64 name=\"section\" children=[#&lt;Nokogiri::XML::Text:0x261c98c \"section4\"&gt;]&gt;\n\n# but the variable still refers to the whole...\ndoc.xpath(\"//part\").size\n=&gt; 3\nsection.xpath(\"//part\").size\n=&gt; 3\ntemp.xpath(\"//part\").size \n=&gt; 3\n</code></pre>\n\n<p>Coming from a PHP background, I'm having to rethink variables a bit.  I know variables are different in Ruby; they are pointers to an object. </p>\n\n<p>Therefore, when I run <code>temp.xpath</code>, I'm actually running it on <code>doc</code>.  But I'm wanting to grab a specific node and its children, and then work on it as a new object.  This would narrow down the haystack immensely and make the rest of my job so much easier!</p>\n\n<p>How do I create a new object using only the node I have selected? I want to turn <code>section[3]</code> into a new object that wouldn't see the other <code>&lt;part&gt;</code>'s and their associated <code>&lt;section&gt;</code> tags.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 5, "creation_date": 1447269753, "post_id": 33658219, "comment_id": 55089935, "body": "I think the third clause should have [true, nil].  Also, it is not clear what is your question"}, {"owner": {"reputation": 303, "user_id": 1880077, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d7c11bded37afa61a772c5fefb7dcf3b?s=128&d=identicon&r=PG", "display_name": "Scott", "link": "https://stackoverflow.com/users/1880077/scott"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1447273445, "post_id": 33658219, "comment_id": 55091923, "body": "I think you answered it with [true, nil] ;-)"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1447274706, "post_id": 33658219, "comment_id": 55092581, "body": "If all your conditions start with <code>true</code>, then don&#39;t include the test of <code>A</code>, instead only test for your <code>B</code> values. Otherwise you&#39;re needlessly slowing the tests. If they don&#39;t, then I think you&#39;ll end up with a long list of <code>when</code> statements that don&#39;t improve readability/maintainability or speed. At that point I&#39;d probably break it down into sections or figure out a more readable solution."}], "answers": [{"tags": [], "owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "is_accepted": false, "score": 1, "last_activity_date": 1447279278, "creation_date": 1447279278, "answer_id": 33660687, "question_id": 33658219, "link": "https://stackoverflow.com/questions/33658219/multi-parameter-case/33660687#33660687", "title": "Multi-parameter case", "body": "<p>In the comments is already the answer for your specific test for <code>nil</code>:</p>\n\n<pre><code>result = case [A, B]\n  when [true, 'a'] then \u2026\n  when [true, 'b'] then \u2026\n  when [true, nil] then \u2026\nend\n</code></pre>\n\n<p>But your question inspired me for a more extended question: What if the 2nd parameter could be anything? E.g. you have this decision table:</p>\n\n<pre><code>A   B   result\n------------------\na   b   true\na   _   halftrue\n_   b   halftrue\nelse    false   \n</code></pre>\n\n<p>where <code>_</code> is a indicator for <em>anything</em></p>\n\n<p>A possible solution would be a class, that is equal to everything:</p>\n\n<pre><code>class Anything\n  include Comparable\n  def &lt;=&gt;(x);0;end\nend\n\n[\n  %w{a b},\n  %w{a x},\n  %w{x b},\n  %w{x y},\n].each{|a,b|\n\n  result = case [a, b]\n    when ['a', 'b'] then true\n    when ['a', Anything.new] then :halftrue\n    when [Anything.new, 'b'] then :halftrue\n    else false\n  end\n\n  puts \"%s %s: %s\" % [a,b,result]\n}\n</code></pre>\n\n<p>The result:</p>\n\n<pre><code>a b: true\na x: halftrue\nx b: halftrue\nx y: false\n</code></pre>\n"}], "owner": {"reputation": 303, "user_id": 1880077, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d7c11bded37afa61a772c5fefb7dcf3b?s=128&d=identicon&r=PG", "display_name": "Scott", "link": "https://stackoverflow.com/users/1880077/scott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447279278, "creation_date": 1447269581, "last_edit_date": 1495540313, "question_id": 33658219, "link": "https://stackoverflow.com/questions/33658219/multi-parameter-case", "title": "Multi-parameter case", "body": "<p>I want to create a <code>case</code> checking multiple parameters.  </p>\n\n<p>\"<a href=\"https://stackoverflow.com/questions/5111106/ruby-conditional-matrix-case-with-multiple-conditions\">Ruby: conditional matrix? case with multiple conditions?</a>\" \nis basically it with one twist:  The second parameter can be one of three values, <code>a</code>, <code>b</code>, <code>nil</code>. </p>\n\n<p>I was hoping to just extend the <code>when</code> conditions to be something like:</p>\n\n<pre><code> result = case [A, B]\n  when [true, \u2018a\u2019] then \u2026\n  when [true, \u2018b\u2019] then \u2026\n  when [true, B.nil?] then \u2026\nend\n</code></pre>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["javascript", "css", "ruby-on-rails", "ruby", "git"], "comments": [{"owner": {"reputation": 969, "user_id": 126978, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/RPq8n.jpg?s=128&g=1", "display_name": "blackbird", "link": "https://stackoverflow.com/users/126978/blackbird"}, "edited": false, "score": 0, "creation_date": 1447275650, "post_id": 33658181, "comment_id": 55093053, "body": "You need to learn how to resolve merge conflicts properly and what those &quot;random&quot; &lt;&lt;&lt;&lt;&lt;HEAD actually mean. Are you working in a team ? Fetching regularly is good practice and avoids getting into this kind of problem"}, {"owner": {"reputation": 969, "user_id": 126978, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/RPq8n.jpg?s=128&g=1", "display_name": "blackbird", "link": "https://stackoverflow.com/users/126978/blackbird"}, "edited": false, "score": 0, "creation_date": 1447275779, "post_id": 33658181, "comment_id": 55093117, "body": "You can use git to go back to a point before your disastrous merge. The scss is never served, did you forget to compile the scss to css ?"}], "answers": [{"tags": [], "owner": {"reputation": 321, "user_id": 3880374, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fRf5K.jpg?s=128&g=1", "display_name": "ktravers", "link": "https://stackoverflow.com/users/3880374/ktravers"}, "is_accepted": true, "score": 1, "last_activity_date": 1447298522, "last_edit_date": 1495540742, "creation_date": 1447298178, "answer_id": 33663810, "question_id": 33658181, "link": "https://stackoverflow.com/questions/33658181/potential-git-rails-disaster-web-page-no-longer-loading/33663810#33663810", "title": "Potential Git/Rails Disaster: Web page no longer loading", "body": "<p>you'll want to try doing a <code>git reset --hard</code> to reset your local repo to the state it was at before you ran <code>git pull</code>. </p>\n\n<p>see this answer for reference:\n<a href=\"https://stackoverflow.com/a/1223385/3880374\">https://stackoverflow.com/a/1223385/3880374</a></p>\n\n<p>also, in case you're curious about those \"random\" <code>&lt;&lt;&lt;&lt;&lt;&lt;HEAD</code> strings throughout your files, those are actually added by Git. Per their <a href=\"https://git-scm.com/book/en/v2/Git-Branching-Basic-Branching-and-Merging\" rel=\"nofollow noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p>Git adds standard conflict-resolution markers to the files that have conflicts, so you can open them manually and resolve those conflicts</p>\n</blockquote>\n\n<p>Github also has a <a href=\"https://help.github.com/articles/resolving-a-merge-conflict-from-the-command-line/\" rel=\"nofollow noreferrer\">helpful guide</a> to resolving these conflicts via the command line.</p>\n"}], "owner": {"reputation": 4782, "user_id": 3914509, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/618920827/picture?type=large", "display_name": "Jeremy Thomas", "link": "https://stackoverflow.com/users/3914509/jeremy-thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 33663810, "answer_count": 1, "score": 0, "last_activity_date": 1447298522, "creation_date": 1447269452, "question_id": 33658181, "link": "https://stackoverflow.com/questions/33658181/potential-git-rails-disaster-web-page-no-longer-loading", "title": "Potential Git/Rails Disaster: Web page no longer loading", "body": "<p>I have spent a lot of time working on a webpage and have been very lazy about committing things to Git.  Today, I attempted to push everything up to my repo, but I think I may have caused a disaster.  I am very new to Git and basically just use it for its most basic functions.  </p>\n\n<p>I was unable to <code>push</code> anything and the console recommended using a <code>pull</code> request, after doing that and attempting to push again, I began to get a bunch of merge conflicts with my <code>gemfile</code> and <code>gemfile.lock</code>.  I tried fixing this issue as well but then I started seeing random <code>&lt;&lt;&lt;&lt;&lt;&lt;HEAD</code> throughout my files (including <code>routes</code> as well as my javascript).  </p>\n\n<p>Now when I try to load my localhost page, I seem to have all my content, but my css file will not load resulting in a very ugly page.  When I use chrome devtools and try to look at the sources, the <code>application.css.scss</code> is blank, when mine have 1000+ lines of code (and is viewable in the <code>app\\assets\\stylesheets</code> folder.</p>\n\n<p>Has anyone had something like this happen / know how to remedy the amount of damage I might've done in 15 min.  Anything will help as I do not know how to proceed.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "activerecord", "ruby-on-rails-3.2"], "answers": [{"comments": [{"owner": {"reputation": 269, "user_id": 3170149, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/sa7zd.jpg?s=128&g=1", "display_name": "maikovich", "link": "https://stackoverflow.com/users/3170149/maikovich"}, "edited": false, "score": 0, "creation_date": 1447290669, "post_id": 33661805, "comment_id": 55099040, "body": "Thanks for your answer, but the as the function is actually not a validator, it does unfortunately not answer my question. I am sorry for the misunderstanding! I thought I would just give this example so that it sketches the actual problem in a simplified way."}, {"owner": {"reputation": 2218, "user_id": 5129208, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wfsc3HumFMQ/AAAAAAAAAAI/AAAAAAAAAGw/2TW94iOeLhQ/photo.jpg?sz=128", "display_name": "yez", "link": "https://stackoverflow.com/users/5129208/yez"}, "reply_to_user": {"reputation": 269, "user_id": 3170149, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/sa7zd.jpg?s=128&g=1", "display_name": "maikovich", "link": "https://stackoverflow.com/users/3170149/maikovich"}, "edited": false, "score": 0, "creation_date": 1447291663, "post_id": 33661805, "comment_id": 55099298, "body": "It could be helpful for you to include the actual intended behaviour you want this code to result in. Maybe with that, it will become more clear to what you want this code for?"}, {"owner": {"reputation": 269, "user_id": 3170149, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/sa7zd.jpg?s=128&g=1", "display_name": "maikovich", "link": "https://stackoverflow.com/users/3170149/maikovich"}, "edited": false, "score": 0, "creation_date": 1447291913, "post_id": 33661805, "comment_id": 55099377, "body": "I can unfortunately not present the actual problem, as I am restricted to a contract. But the problem sketched here is near the reality."}, {"owner": {"reputation": 269, "user_id": 3170149, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/sa7zd.jpg?s=128&g=1", "display_name": "maikovich", "link": "https://stackoverflow.com/users/3170149/maikovich"}, "edited": false, "score": 0, "creation_date": 1447350388, "post_id": 33661805, "comment_id": 55128861, "body": "I made it more specific towards my project now :-)"}, {"owner": {"reputation": 2218, "user_id": 5129208, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wfsc3HumFMQ/AAAAAAAAAAI/AAAAAAAAAGw/2TW94iOeLhQ/photo.jpg?sz=128", "display_name": "yez", "link": "https://stackoverflow.com/users/5129208/yez"}, "reply_to_user": {"reputation": 269, "user_id": 3170149, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/sa7zd.jpg?s=128&g=1", "display_name": "maikovich", "link": "https://stackoverflow.com/users/3170149/maikovich"}, "edited": false, "score": 0, "creation_date": 1447352378, "post_id": 33661805, "comment_id": 55130079, "body": "I see. I still think the validator is the closest thing to what you want. Otherwise maybe a simpler module would do? One with a class and instance method that you include for your AR models. Either way it looks like a very specific problem, I hope you find a suitable answer."}, {"owner": {"reputation": 269, "user_id": 3170149, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/sa7zd.jpg?s=128&g=1", "display_name": "maikovich", "link": "https://stackoverflow.com/users/3170149/maikovich"}, "edited": false, "score": 0, "creation_date": 1447352859, "post_id": 33661805, "comment_id": 55130346, "body": "It might be quite close, but I don&#39;t want it to be colliding with the validator methods that are run upon save or others, since the action taken after finding out that the form input originates a bot is different. Your next suggestion is interesting, but I think the <code>robot?</code> instance method should not be callable when it the <code>robot_catch</code> is not called. I could make an exception error for that in <code>robot?</code>, but thought this solution was prettier."}], "tags": [], "owner": {"reputation": 2218, "user_id": 5129208, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wfsc3HumFMQ/AAAAAAAAAAI/AAAAAAAAAGw/2TW94iOeLhQ/photo.jpg?sz=128", "display_name": "yez", "link": "https://stackoverflow.com/users/5129208/yez"}, "is_accepted": false, "score": 0, "last_activity_date": 1447284532, "creation_date": 1447284532, "answer_id": 33661805, "question_id": 33657165, "link": "https://stackoverflow.com/questions/33657165/why-do-functions-from-my-rails-plugin-not-work-without-specifically-requiring/33661805#33661805", "title": "Why do functions from my Rails plugin not work without specifically requiring?", "body": "<p>First, I would suggest you make sure that <a href=\"http://guides.rubyonrails.org/active_record_validations.html\" rel=\"nofollow\">none of the many many built in Rails validators meet your needs</a>.</p>\n\n<p>Then if that's the case, what you actually want is a custom validator.</p>\n\n<p>Building a custom validator is not as simple as it might seem, the basic class you'll build will have this structure:</p>\n\n<pre><code>class SpecialValidator &lt; ActiveModel::EachValidator\n  def validate_each(record, attribute, value)\n    # Fill this with your validation logic\n    # Add to record.errors if validation fails\n  end\nend\n</code></pre>\n\n<p>Then in your model:</p>\n\n<pre><code>class Article &lt; ActiveRecord::Base\n  validates :title, :text, special: true \nend\n</code></pre>\n\n<p>I would <strong>strongly</strong> suggest making sure what you want is not already built, chances are it is. Then use <a href=\"http://www.perfectline.co/blog/2010/04/building-ruby-on-rails-3-custom-validators/\" rel=\"nofollow\">resources like this</a> or <a href=\"http://guides.rubyonrails.org/active_record_validations.html#custom-validators\" rel=\"nofollow\">ruby guides resources</a> to continue going down the custom validator route.</p>\n"}, {"tags": [], "owner": {"reputation": 269, "user_id": 3170149, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/sa7zd.jpg?s=128&g=1", "display_name": "maikovich", "link": "https://stackoverflow.com/users/3170149/maikovich"}, "is_accepted": true, "score": 0, "last_activity_date": 1447401488, "last_edit_date": 1592644375, "creation_date": 1447401488, "answer_id": 33688061, "question_id": 33657165, "link": "https://stackoverflow.com/questions/33657165/why-do-functions-from-my-rails-plugin-not-work-without-specifically-requiring/33688061#33688061", "title": "Why do functions from my Rails plugin not work without specifically requiring?", "body": "<h1>Answer</h1>\n<p>I found out the solution myself. Bundler will not autoload dependencies from a gemspec that my project uses, so I had to require all third party gems in an engine.rb file in the lib/ directory of my app in order to load the gems. Now everything is working as it should.</p>\n<p>Second: the <code>robot_catch</code> method is a class method.</p>\n"}], "owner": {"reputation": 269, "user_id": 3170149, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/sa7zd.jpg?s=128&g=1", "display_name": "maikovich", "link": "https://stackoverflow.com/users/3170149/maikovich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 33688061, "answer_count": 2, "score": 0, "last_activity_date": 1447401488, "creation_date": 1447265847, "last_edit_date": 1447360166, "question_id": 33657165, "link": "https://stackoverflow.com/questions/33657165/why-do-functions-from-my-rails-plugin-not-work-without-specifically-requiring", "title": "Why do functions from my Rails plugin not work without specifically requiring?", "body": "<p>I need some help with my plugin. I want to extend <code>ActiveRecord::Base</code> with a method that initializes another method that can be called in the controller.</p>\n\n<p>It will look like this:</p>\n\n<pre><code>class Article &lt; ActiveRecord::Base\n    robot_catch :title, :text\n    ...\nend\n</code></pre>\n\n<p>My attempt at extending the <code>ActiveRecord::Base</code> class with <code>robot_catch</code> method looks like following. The function will initialize the specified attributes (in this case <code>:title</code> and <code>:text</code>) in a variable and use <code>class_eval</code> to make the <code>robot?</code> function available for the user to call it in the controller:</p>\n\n<pre><code>module Plugin\n    module Base\n        extend ActiveSupport::Concern\n\n        module ClassMethods\n            def robot_catch(*attr)\n                @@robot_params = attr\n\n                self.class_eval do\n                    def robot?(params_hash)\n                        # Input is the params hash, and this function\n                        # will check if the some hashed attributes in this hash\n                        # correspond to the attribute values as expected,\n                        # and return true or false.\n                    end\n                end\n            end\n        end\n    end\nend\n\nActiveRecord::Base.send :include, Plugin::Base\n</code></pre>\n\n<p>So, in the controller, this could be done:</p>\n\n<pre><code>class ArticlesController &lt; ApplicationController\n    ...\n    def create\n        @article = Article.new(params[:article])\n\n        if @article.robot? params\n            # Do not save this in database, but render\n            # the page as if it would have succeeded\n            ...\n        end\n    end\nend\n</code></pre>\n\n<p>My question is whether if I am right that <code>robot_catch</code> is class method. This function is to be called inside a model, as shown above. I wonder if I am extending the <code>ActiveRecord::Base</code> the right way. The <code>robot?</code> function is an instance method without any doubt.</p>\n\n<p>I am using Rails 3.2.22 and I installed this plugin as a gem in another project where I want to use this functionality.</p>\n\n<p>Right now, it only works if I specifically <code>require</code> the gem in the model. However, I want it the functionality to be included as a part of <code>ActiveRecord::Base</code> without requiring it, otherwise I'd have to <code>require</code> it in every model I want to use it, not particularly <em>DRY</em>. Shouldn't the gem be automatically loaded into the project on Rails start-up?</p>\n\n<p><strong>EDIT:</strong> Maybe callbacks (<a href=\"http://api.rubyonrails.org/classes/ActiveSupport/Callbacks/ClassMethods.html\" rel=\"nofollow\">http://api.rubyonrails.org/classes/ActiveSupport/Callbacks/ClassMethods.html</a>) would be a solution to this problem, but I do not know how to use it. It seems a bit obscure.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "edited": false, "score": 0, "creation_date": 1447264003, "post_id": 33656564, "comment_id": 55086441, "body": "Show your controller action for <code>edit</code>? Perhaps, you want to use <code>@topic.posts.build</code> instead of <code>@topics.posts.build</code>."}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "edited": false, "score": 1, "creation_date": 1447264282, "post_id": 33656564, "comment_id": 55086602, "body": "That&#39;s why you are getting that error. You are using <code>@topics.posts.build</code> in your view, you have to define <code>@topics</code> in your <code>edit</code> action in the controller. Or, as you have <code>topic</code> defines, you should use that in your view."}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "edited": false, "score": 0, "creation_date": 1447264863, "post_id": 33656564, "comment_id": 55086954, "body": "Try my answer and let me know if that works."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4380892"}, "reply_to_user": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "edited": false, "score": 1, "creation_date": 1447265162, "post_id": 33656564, "comment_id": 55087137, "body": "work. big thx. wwwwwwwwwwwwwwwwwwww"}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "edited": false, "score": 0, "creation_date": 1447265465, "post_id": 33656564, "comment_id": 55087321, "body": "Awesome! You&#39;re most welcome :-)"}], "answers": [{"tags": [], "owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "is_accepted": true, "score": 1, "last_activity_date": 1447265348, "last_edit_date": 1447265348, "creation_date": 1447264334, "answer_id": 33656721, "question_id": 33656564, "link": "https://stackoverflow.com/questions/33656564/nested-def-edit-undefined-method-error/33656721#33656721", "title": "Nested def edit undefined method error", "body": "<p>The instance variable is defined as <code>@topic</code> but <strong>NOT</strong> <code>@topics</code> in your controller's <code>edit</code> action.\nThat's why you get the mentioned error when you call: <code>@topics.posts.build</code>.</p>\n\n<p>You should use <code>@topic</code> instead of <code>@topics</code> in your view:</p>\n\n<pre><code>= simple_form_for ([@forum, @topic, @topic.posts.build]) do |f|\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31092, "user_id": 1715121, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/6nEEr.jpg?s=128&g=1", "display_name": "Ele", "link": "https://stackoverflow.com/users/1715121/ele"}, "is_accepted": false, "score": 0, "last_activity_date": 1447266574, "last_edit_date": 1447266574, "creation_date": 1447264474, "answer_id": 33656765, "question_id": 33656564, "link": "https://stackoverflow.com/questions/33656564/nested-def-edit-undefined-method-error/33656765#33656765", "title": "Nested def edit undefined method error", "body": "<p><strong>You need to fix two places:</strong></p>\n\n<p>Replace @topics word for @topic</p>\n\n<pre><code>= simple_form_for ([@forum, @topic, @topic.posts.build]) do |f|\n  div.new_message\n    p \n        b \u041e\u0442\u0432\u0435\u0442 \u0432 \u0442\u0435\u043c\u0443  \n    = f.label '\u0422\u0435\u043a\u0441\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f:'\n    = f.text_area :content,rows: '15', cols: '82' \n    div.forum_button\n      = f.submit '\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c' \n</code></pre>\n\n<p><strong>Hope this helps!</strong></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4380892"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 33656721, "answer_count": 2, "score": 1, "last_activity_date": 1447266574, "creation_date": 1447263778, "last_edit_date": 1447265619, "question_id": 33656564, "link": "https://stackoverflow.com/questions/33656564/nested-def-edit-undefined-method-error", "title": "Nested def edit undefined method error", "body": "<p>I have three models with relationships: <code>Forum</code>, <code>Topic</code> and <code>Post</code>. I want to edit <code>Post</code>.</p>\n\n<p>This is Post_controller:</p>\n\n<pre><code>def update\n  @forum = Forum.find params[:forum_id]\n  @topic = Topic.find params[:topic_id]\n  @post = @topic.posts.find(params[:id])\n  if @post.update(post_params)\n    redirect_to forum_topic_path(@forum.id, @topic.id)\n  end\nend\n\ndef edit\n  @forum = Forum.find params[:forum_id]\n  @topic = Topic.find params[:topic_id]\n  @post = Post.find(params[:id])\nend\n</code></pre>\n\n<p>This is edit.html.slim:</p>\n\n<pre><code>= simple_form_for ([@forum, @topics, @topics.posts.build]) do |f|\n  div.new_message\n    p \n        b \u041e\u0442\u0432\u0435\u0442 \u0432 \u0442\u0435\u043c\u0443  \n    = f.label '\u0422\u0435\u043a\u0441\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f:'\n    = f.text_area :content,rows: '15', cols: '82' \n    div.forum_button\n      = f.submit '\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c' \n</code></pre>\n\n<p>This is the error:</p>\n\n<pre><code>NoMethodError in Posts#edit\n\nundefined method `posts' for nil:NilClass\n</code></pre>\n"}, {"tags": ["ruby", "regex", "string", "math"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1447265213, "post_id": 33656337, "comment_id": 55087170, "body": "Welcome to Stack Overflow. Are you asking us for opinions or answers? &quot;SQL injection&quot;-like situations are where a user inputs an expression and you blindly execute it. If your expressions are generated by your code or coming from known good sources then you&#39;re safe. Your regex won&#39;t work because spaces are significant in patterns. There&#39;s a flag to make them insignificant. You can figure out what it is."}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1447266207, "post_id": 33656337, "comment_id": 55087780, "body": "Checking syntax correctness of expressions are typically done by converting expressions to prefix or postfix form.  Not sure regex is the right tool.  If you don&#39;t want to re-invent the wheel, there seems to be a Ruby library to build parsers as well - <a href=\"https://github.com/nathansobo/treetop\" rel=\"nofollow noreferrer\">github.com/nathansobo/treetop</a>"}, {"owner": {"reputation": 446, "user_id": 5550319, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/55710ae649567f59235ad3f67397ed22?s=128&d=identicon&r=PG&f=1", "display_name": "Richasantos", "link": "https://stackoverflow.com/users/5550319/richasantos"}, "edited": false, "score": 0, "creation_date": 1448299152, "post_id": 33656337, "comment_id": 55517318, "body": "Hi there, Thank you all. I ended up doing something more simplistic."}], "answers": [{"tags": [], "owner": {"reputation": 51182, "user_id": 1468366, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2e313135581cf6ceaad355580af931f8?s=128&d=identicon&r=PG", "display_name": "MvG", "link": "https://stackoverflow.com/users/1468366/mvg"}, "is_accepted": true, "score": 2, "last_activity_date": 1447364771, "last_edit_date": 1495535231, "creation_date": 1447363724, "answer_id": 33681725, "question_id": 33656337, "link": "https://stackoverflow.com/questions/33656337/evaluate-a-math-expression-with-regex/33681725#33681725", "title": "Evaluate a math expression with regex", "body": "<p>You can't use a regular expression to identify correctly formed mathematical expressions.</p>\n\n<p>A regular expression can in theory be matched with a finite state automaton, and the finite number of states of such an automaton can't keep track of the unbounded number of opening parentheses it might encounter. The language of correctly matched parentheses is not a <a href=\"https://en.wikipedia.org/wiki/Regular_language\" rel=\"nofollow noreferrer\">regular language</a>.</p>\n\n<p>What you can do is tokenize the string using regular expressions and then parse the token stream.</p>\n\n<p>See also <a href=\"https://stackoverflow.com/q/5475804/1468366\">Regular expression for math operations with parentheses</a>.</p>\n"}], "owner": {"reputation": 446, "user_id": 5550319, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/55710ae649567f59235ad3f67397ed22?s=128&d=identicon&r=PG&f=1", "display_name": "Richasantos", "link": "https://stackoverflow.com/users/5550319/richasantos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1789, "favorite_count": 0, "accepted_answer_id": 33681725, "answer_count": 1, "score": -1, "last_activity_date": 1448299251, "creation_date": 1447263080, "last_edit_date": 1448299251, "question_id": 33656337, "link": "https://stackoverflow.com/questions/33656337/evaluate-a-math-expression-with-regex", "title": "Evaluate a math expression with regex", "body": "<p>I need to create a method that will receive a string containing a mathematical expression and has to:</p>\n\n<ul>\n<li>Validate it first.</li>\n<li>Return the problem/problems, if they exist (for example, something like this: <code>4+3+4/0</code> or <code>4+4+(((2-2*4)-</code>).</li>\n<li>If everything is ok, solve it and return the final value.</li>\n</ul>\n\n<p>What I've done so far was:</p>\n\n<ul>\n<li>I know that <code>eval</code> does exactly what I need, however it has the problem of SQL injection and so on.</li>\n<li>I discovered Regex.</li>\n</ul>\n\n<p>I really don't know the best way to design this method for it to be safe and work with parenthesis, operators and numbers. What I'm thinking is to use regex to check if the initial string is equal to the matched string. If it is, I was thinking on using <code>eval</code> to calculate the final value. In your opinion is this the correct way to do it?</p>\n\n<p>Not being sure what I should do, I wrote:</p>\n\n<pre><code>def math_eval(expression)\n   a = /\\(* \\s* \\d+ \\s* (( [-\\+\\*\\/] \\s* \\d+ \\)* \\s* ) | ( [-\\+\\*\\/] \\s* \\(* \\s* \\d+ \\s* ))+/\n   puts \"Let's Go\"\n   puts a.match(expression)\nend\n\nmath_eval(\"lets see if this works 1/ 2 * 3 hello world\")\n</code></pre>\n\n<p>This is returning:</p>\n\n<pre><code>Let's Go\nEmpty string\n</code></pre>\n\n<p>I've seen Stack Overflow posts that this</p>\n\n<pre><code>/\\(* \\s* \\d+ \\s* (( [-\\+\\*\\/] \\s* \\d+ \\)* \\s* ) | ( [-\\+\\*\\/] \\s* \\(* \\s* \\d+ \\s* ))+/\n</code></pre>\n\n<p>would be the correct regex filter to use.</p>\n\n<p>What am I doing wrong? Should I change my approach?</p>\n\n<p><strong>Edit:</strong> I followed a different approach. Do you think the following approach is safe?</p>\n\n<pre><code>class FormulaCalculator\n\n    def formula_validator(string_formula)\n        extracted_formula = string_formula.tr('\u24b6\u24d0\u249cAa\u1ea0\u1ea1\u00c5\u00e5\u00c4\u00e4\u1ea2\u1ea3\u1e00\u1e01\u1ea4\u1ea5\u1ea6\u1ea7\u1ea8\u1ea9\u0202\u0203\u1eaa\u1eab\u1eac\u1ead\u1eae\u1eaf\u1eb0\u1eb1\u1eb2\u1eb3\u1eb4\u1eb5\u1eb6\u1eb7\u0100\u0101\u0104\u0105\u0200\u0201\u01fa\u01fb\u0226\u0227\u00c1\u00e1\u01de\u01df\u01cd\u01ce\u00c0\u00e0\u00c3\u00e3\u01e0\u01e1\u00c2\u00e2\u023a\u2c65\u00c6\u00e6\u01e2\u01e3\u01fc\u01fd\u2c6f\ua732\ua733\ua738\ua739\ua73a\ua73b\u2c6d\u2100\u214d\u2101\u00aa\u24b7\u24d1\u249dBb\u1e02\u1e03\u1e04\u1e05\u1e06\u1e07\u0181\u0243\u0180\u0182\u0183\u0184\u0185\u212c\u24b8\u24d2\u249eCc\u1e08\u1e09\u0106\u0107\u0108\u0109\u010a\u010b\u010c\u010d\u00c7\u00e7\u0187\u0188\u023b\u023c\u2102\u2103\u0186\ua73e\ua73f\u212d\u2105\u2106\u2104\u24b9\u24d3\u249fDd\u1e0a\u1e0b\u1e0c\u1e0d\u1e0e\u1e0f\u1e10\u1e11\u1e12\u1e13\u010e\u010f\u018a\u018b\u018c\u0189\u0110\u0111\u0221\u01f1\u01f2\u01f3\u01c4\u01c5\u01c6\u0238\u2145\u2146\u24ba\u24d4\u24a0Ee\u1e14\u1e15\u1e16\u1e17\u1e18\u1e19\u1e1a\u1e1b\u1e1c\u1e1d\u1eb8\u1eb9\u1eba\u1ebb\u1ebe\u1ebf\u1ebc\u1ebd\u1ec0\u1ec1\u1ec2\u1ec3\u1ec4\u1ec5\u1ec6\u1ec7\u0112\u0113\u0114\u0115\u0116\u0117\u0118\u0119\u011a\u011b\u00c8\u00e8\u00c9\u00e9\u00ca\u00ea\u00cb\u00eb\u0204\u0205\u0228\u0229\u0206\u0207\u018e\u2c7b\u0246\u0247\u018f\u01dd\u2130\u2c78\u212f\u212e\u2107\u0190\u24bb\u24d5\u24a1Ff\u1e1e\u1e1f\u0191\u0192\ua730\u2132\u214e\ua7fb\u2131\u213b\u24bc\u24d6\u24a2Gg\u0193\u1e20\u1e21\u011c\u011d\u011e\u011f\u0120\u0121\u01e4\u01e5\u01e6\u01e7\u01f4\u210a\u2141\u01f5\u0122\u0123\u24bd\u24d7\u24a3Hh\u1e22\u1e23\u1e24\u1e25\u1e26\u1e27\u1e28\u1e29\u1e2a\u1e2b\u0124\u0125\u021e\u021f\u0126\u0127\u2c67\u2c68\ua726\u210d\u01f6\u1e96\u210f\u210e\u210b\u210c\ua727\u24be\u24d8\u24a4Ii\u1e2c\u1e2d\u1e2e\u1e2f\u0132\u0133\u00cd\u00ed\u00cc\u00ec\u00ce\u00ee\u00cf\u00ef\u0128\u0129\u012a\u012b\u012c\u012d\u012e\u012f\u01cf\u01d0\u0131\u019a\u1efa\u2148\u2149\u2139\u2111\u2110\u24bf\u24d9\u24a5Jj\u0134\u0135\u0248\u0249\u0237\u2c7c\u01f0\u24c0\u24da\u24a6Kk\u1e30\u1e31\u1e32\u1e33\u1e34\u1e35\u0136\u0137\u0198\u0199\ua740\ua741\ua742\ua743\ua744\ua745\u01e8\u01e9\u2c69\u2c6a\u0138\u24c1\u24db\u24a7Ll\u1e36\u1e37\u1e38\u1e39\u1e3a\u1e3b\u1e3c\u1e3d\u0139\u013a\u013b\u013c\u013d\u013e\u013f\u0140\u0141\u0142\u1ec8\u1ec9\u2c60\u2c61\u023d\ua749\ua748\u2c62\u01c7\u01c8\u01c9\u1eca\u0130\u1ecb\ua781\u2143\u2142\u0208\u0209\u020a\u020b\u2113\u2112\u24c2\u24dc\u24a8Mm\u1e3e\u1e3f\u1e40\u1e41\u1e42\u1e43\ua7ff\ua7fd\u2c6e\u019c\u2133\u24c3\u24dd\u24a9Nn\u1e44\u1e45\u1e46\u1e47\u1e48\u1e49\u1e4a\u1e4b\u0143\u0144\u0145\u0146\u0147\u0148\u01f8\u01f9\u00d1\u00f1\u0220\u019e\u014a\u014b\u019d\u0149\u01ca\u01cb\u01cc\u0235\u2115\u2116\u24c4\u24de\u24aaOo\u00d6\u00f6\u1e4e\u1e4f\u1e4c\u1e4d\u1e50\u1e51\u1e52\u1e53\u022a\u022b\u022c\u022d\u022e\u022f\u0230\u0231\u01ea\u01eb\u01ec\u01ed\u1ecc\u1ecd\u1ece\u1ecf\u1ed0\u1ed1\u1ed2\u1ed3\u1ed4\u1ed5\u1ed6\u1ed7\u1ed8\u1ed9\u1eda\u1edb\u1edc\u1edd\u1ede\u1edf\u1ee0\u1ee1\u1ee2\u1ee3\u01a0\u01a1\u014c\u014d\u014e\u014f\u0150\u0151\u00d2\u00f2\u00d3\u00f3\u00d4\u00f4\u00d5\u00f5\u01d1\u01d2\u020c\u020d\u020e\u020f\u0152\u0153\u00d8\u00f8\u01fe\u01ff\ua74a\ua74e\ua74f\u2365\u2364\u2134\u24c5\u24df\u24ab\u2117Pp\u1e54\u1e55\u1e56\u1e57\u01a4\u01a5\u2c63\u2119\u01f7\ua7fc\u2118\u24c6\u24e0\u24acQq\u024a\u024b\u211a\u213a\u0239\u24c7\u24e1\u24adRr\u0154\u0155\u0156\u0157\u0158\u0159\u1e58\u1e59\u1e5a\u1e5b\u1e5c\u1e5d\u1e5e\u1e5f\u0210\u0211\u0212\u0213\u024c\u024d\u01a6\ua75a\ua75b\u2c64\u211e\u211c\u211b\u211f\u211d\u24c8\u24e2\u24aeSs\u1e60\u1e61\u1e62\u1e63\u1e64\u1e65\u1e66\u1e67\u1e68\u1e69\u015a\u015b\u015c\u015d\u015e\u015f\u0160\u0161\u0218\u0219\u023f\ua731\u01a7\u01a8\u03e8\u03e9\u1e9e\u00df\u1e9b\u1e9c\u1e9d\u2120\u24c9\u24e3\u24afTt\u1e6a\u1e6b\u1e6c\u1e6d\u1e6e\u1e6f\u1e70\u1e71\u0162\u0163\u0164\u0165\u0166\u0167\u021a\u021b\u023e\u2c66\u01ac\u01ae\u01ab\u01ad\u1e97\u0236\u2121\u2122\u24ca\u24e4\u24b0Uu\u1e72\u1e73\u1e74\u1e75\u1e76\u1e77\u1e78\u1e79\u1e7a\u1e7b\u1ee6\u1ee7\u1ee4\u1ee5\u1ee8\u1ee9\u1eea\u1eeb\u1eec\u1eed\u1eee\u1eef\u1ef0\u1ef1\u0168\u0169\u016a\u016b\u016c\u016d\u016e\u016f\u0170\u0171\u01d9\u01da\u01d7\u01d8\u01db\u01dc\u0172\u0173\u01d3\u01d4\u0214\u0215\u00db\u00fb\u0216\u0217\u00d9\u00f9\u00da\u00fa\u00dc\u00fc\u01af\u01b0\u0244\u01b2\u01b1\u24cb\u24e5\u24b1Vv\u1e7c\u1e7d\u1e7e\u1e7f\u0245\u2123\u1efc\u2c71\u2c74\u2c7d\u24cc\u24e6\u24b2Ww\u1e80\u1e81\u1e82\u1e83\u1e84\u1e85\u1e86\u1e87\u1e88\u1e89\u0174\u0175\u2c72\u2c73\u03e2\u03e3\u1e98\u24cd\u24e7\u24b3Xx\u1e8a\u1e8b\u1e8c\u1e8d\u2135\u00d7\u24ce\u24e8\u24b4yY\u1e8e\u1e8f\u1efe\u1eff\u1ef2\u1ef3\u1ef4\u1ef5\u1ef6\u1ef7\u1ef8\u1ef9\u0176\u0177\u01b3\u01b4\u0178\u00ff\u00dd\u00fd\u024e\u024f\u0232\u0233\u0194\u1e99\u2144\u213d\u24cf\u24e9\u24b5Zz\u1e90\u1e91\u1e92\u1e93\u1e94\u1e95\u0179\u017a\u017b\u017c\u017d\u017e\u0224\u0225\u2c6b\u2c6c\u01b5\u01b6\u0240\u2128\u2124', '')\n     if string_formula = extracted_formula\n            return true\n        else\n            return false\n        end\n     end\n\n     def formula_evaluation(string_formula)\n        if formula_validator(string_formula) == true\n            return eval(string_formula)\n        end\n     rescue Exception =&gt; e\n        puts e\n     end\n end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "wysihtml5"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3567582, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000093391411/picture?type=large", "display_name": "user3567582", "link": "https://stackoverflow.com/users/3567582/user3567582"}, "is_accepted": false, "score": 0, "last_activity_date": 1452438681, "creation_date": 1452438681, "answer_id": 34706990, "question_id": 33656321, "link": "https://stackoverflow.com/questions/33656321/integrating-dante-ysiwyg-medium-style-editor-into-a-rails-form/34706990#34706990", "title": "Integrating &quot;Dante&quot; YSIWYG Medium-Style Editor into a Rails Form", "body": "<pre><code>&lt;%= simple_form_for @story do |f| %&gt;\n&lt;%= f.input :title %&gt;\n&lt;%= f.input :subtitle %&gt;\n&lt;%= f.input :content, :id =&gt; \"editor\" %&gt;\n&lt;%= f.button :submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Put the div inside of your form and make it hidden field\ninto like this</p>\n\n<pre><code>&lt;%= simple_form_for @story do |f| %&gt;\n&lt;%= f.hidden_field :title %&gt;\n&lt;%= f.hidden_field :subtitle %&gt;\n&lt;%= f.hidden_field :content, html: { id: \"content\"} %&gt; // Use 'id' in your content field and match it in your editor div. Use data field data-field-id=\"content\"\n\n&lt;div id=\"#editor\" data-field-id=\"content\"&gt;\n   &lt;%= @story.cotent.try (:html_safe) %&gt; \n   // @story is your instance variable and .content is db column from      story  \n&lt;/div&gt; \n&lt;%= f.button :submit %&gt;\n</code></pre>\n\n\n\n<p>then use jquery to bind the editor content in content field which is </p>\n\n\n\n<pre><code>$(document).ready(function(){\n    $(\"#editor\").bind(\"input properchange\", function(){\n    $(\"#story_\" + $(this).attr(\"data-field-id\")).val($(this).html())\n    });\n});\n</code></pre>\n\n<p>NOTE: It only save the text content not the image</p>\n"}], "owner": {"reputation": 293, "user_id": 1204218, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/0272ef575b474dbee68cc33d60c3846b?s=128&d=identicon&r=PG", "display_name": "piratebroadcast", "link": "https://stackoverflow.com/users/1204218/piratebroadcast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 386, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452438681, "creation_date": 1447263044, "last_edit_date": 1447265046, "question_id": 33656321, "link": "https://stackoverflow.com/questions/33656321/integrating-dante-ysiwyg-medium-style-editor-into-a-rails-form", "title": "Integrating &quot;Dante&quot; YSIWYG Medium-Style Editor into a Rails Form", "body": "<p>I'm attempting to integrate the \"Dante\" WYSIWYG text editor into my Rails project. I have it installed and displaying on the screen. See screenshot: <a href=\"https://i.imgur.com/lLnEc7n.png\" rel=\"nofollow\">https://i.imgur.com/lLnEc7n.png</a></p>\n\n<p>However, in my Rails app I have users that have_many stories. I'd like to use this editor to allow users to create these stories. I need to wire the editor and the form together basically, but I have no idea how to go about doing that, as I've never done something like this before. Would anyone mind giving me some tips please?</p>\n\n<p>Documentation for editor is here: <a href=\"https://github.com/michelson/Dante\" rel=\"nofollow\">https://github.com/michelson/Dante</a></p>\n\n<p>Current page:</p>\n\n<pre><code>&lt;%= simple_form_for @story do |f| %&gt;\n  &lt;%= f.input :title %&gt;\n  &lt;%= f.input :subtitle %&gt;\n  &lt;%= f.input :content, :id =&gt; \"editor\" %&gt;\n  &lt;%= f.button :submit %&gt;\n&lt;% end %&gt;\n&lt;hr&gt;\n&lt;div id=\"editor\"&gt;\n&lt;h1 id=\"dante-editor\"&gt;Click Me Once. Your Title Goes Here.&lt;/h1&gt;\n\n&lt;h2&gt;Tell us about your favorite backpacking adventure. This might also be a great place to add a picture.&lt;/h2&gt;\n\n&lt;p&gt;Simply replace and highlight any text here to add text. Press \"Enter\" to add more text or add images. Click on the image to add a caption. It's easy once you get the hang of it, just play around with it for a minute.&lt;/p&gt;\n&lt;/div&gt;\n&lt;hr&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n  editor = new Dante.Editor(\n    {\n      el: \"#editor\",\n      upload_url: \"/images.json\", //it expect an url string in response like /your/server/image.jpg or http://app.com/images/image.jpg\n      store_url: \"/save\" //post to save\n\n    }\n  );\n  editor.start()\n&lt;/script&gt;\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "nginx", "character-encoding", "puma"], "answers": [{"comments": [{"owner": {"reputation": 176, "user_id": 4271833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82137f086d0bbfea748a99975d4810d4?s=128&d=identicon&r=PG", "display_name": "Diego Senott", "link": "https://stackoverflow.com/users/4271833/diego-senott"}, "edited": false, "score": 0, "creation_date": 1447324694, "post_id": 33659516, "comment_id": 55111901, "body": "Hi Dmitry, thanks for taking your time to help me! The command file gives me this:      divulgue.html.erb: UTF-8 Unicode text The force_encoding didn&#39;t help me either. And when I return the code the_bad_string.encoding.name it also gives me UTF-8!!!"}, {"owner": {"reputation": 5419, "user_id": 887640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/w4OsI.png?s=128&g=1", "display_name": "Dmitry Sokurenko", "link": "https://stackoverflow.com/users/887640/dmitry-sokurenko"}, "reply_to_user": {"reputation": 176, "user_id": 4271833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82137f086d0bbfea748a99975d4810d4?s=128&d=identicon&r=PG", "display_name": "Diego Senott", "link": "https://stackoverflow.com/users/4271833/diego-senott"}, "edited": false, "score": 0, "creation_date": 1447330987, "post_id": 33659516, "comment_id": 55115367, "body": "If your string is originating from somewhere outside of the <code>divulgue.html.erb</code> then check the encoding of the source file too. E.g. I&#39;ve had such problems when I&#39;ve tried to use the strings defined in  <code>env.rb</code> in the view. Also check what the <code>the_bad_string.encoding</code> returns, is it UTF?."}, {"owner": {"reputation": 176, "user_id": 4271833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82137f086d0bbfea748a99975d4810d4?s=128&d=identicon&r=PG", "display_name": "Diego Senott", "link": "https://stackoverflow.com/users/4271833/diego-senott"}, "edited": false, "score": 0, "creation_date": 1447331569, "post_id": 33659516, "comment_id": 55115695, "body": "No, this is an static page with static content, but with characters like &#225; &#227; &#231;. If I remove those characters, the page is rendered fine.  I&#39;m using strings defined in a local_env.rb file to define the page title and amazingly they work, even with an &#250; character in it??!!!??? Yes, the string.encoding.name returns UTF-8."}, {"owner": {"reputation": 5419, "user_id": 887640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/w4OsI.png?s=128&g=1", "display_name": "Dmitry Sokurenko", "link": "https://stackoverflow.com/users/887640/dmitry-sokurenko"}, "reply_to_user": {"reputation": 176, "user_id": 4271833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82137f086d0bbfea748a99975d4810d4?s=128&d=identicon&r=PG", "display_name": "Diego Senott", "link": "https://stackoverflow.com/users/4271833/diego-senott"}, "edited": false, "score": 0, "creation_date": 1447332013, "post_id": 33659516, "comment_id": 55115946, "body": "Sounds weird. Try to remove all the offending characters from the file, ensure that this works, and then add just one Portuguese string, edit the file directly on the server, if it doesn&#39;t work, and <code>force_encoding(&quot;UTF-8&quot;)</code> doesn&#39;t work too, but Portuguese strings from external files work well \u2014 consider moving them all into rails i18n .yml files."}, {"owner": {"reputation": 176, "user_id": 4271833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82137f086d0bbfea748a99975d4810d4?s=128&d=identicon&r=PG", "display_name": "Diego Senott", "link": "https://stackoverflow.com/users/4271833/diego-senott"}, "edited": false, "score": 0, "creation_date": 1447423283, "post_id": 33659516, "comment_id": 55160191, "body": "I&#39;ve accessed my Puma server directly(rails s puma binding=IPADDRESS) and the same page that I&#39;m trying to access through NGINX worked fine! I&#39;m completely lost now!"}, {"owner": {"reputation": 5419, "user_id": 887640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/w4OsI.png?s=128&g=1", "display_name": "Dmitry Sokurenko", "link": "https://stackoverflow.com/users/887640/dmitry-sokurenko"}, "reply_to_user": {"reputation": 176, "user_id": 4271833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82137f086d0bbfea748a99975d4810d4?s=128&d=identicon&r=PG", "display_name": "Diego Senott", "link": "https://stackoverflow.com/users/4271833/diego-senott"}, "edited": false, "score": 0, "creation_date": 1447424395, "post_id": 33659516, "comment_id": 55160955, "body": "Looks unbelievable, check whether you launch your puma instances the same way when running behind the nginx and when running puma only . Check whether the issue persist when you have nginx and puma running at the same time with nginx talking to the same puma instance that work well."}], "tags": [], "owner": {"reputation": 5419, "user_id": 887640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/w4OsI.png?s=128&g=1", "display_name": "Dmitry Sokurenko", "link": "https://stackoverflow.com/users/887640/dmitry-sokurenko"}, "is_accepted": false, "score": 1, "last_activity_date": 1447274769, "creation_date": 1447274769, "answer_id": 33659516, "question_id": 33656047, "link": "https://stackoverflow.com/questions/33656047/actionviewtemplateerror-incompatible-character-encodings-ascii-8bit-and-ut/33659516#33659516", "title": "ActionView::Template::Error (incompatible character encodings: ASCII-8BIT and UTF-8) with portuguese brazilian characters", "body": "<p>Check that the offending source files actually use the UTF-8 encoding (for example, Textmate allows to save the file using various encodings). Check whether the file is actually recognized by the system as UTF, running <code>file /path/to/something</code> should return <code>UTF-8</code>.</p>\n\n<p>Also if you have just a few of those badly encoded strings you can try something like this:</p>\n\n<pre><code>the_bad_string.dup.force_encoding(\"UTF-8\")\n</code></pre>\n\n<p>This should convert whatever it was to UTF.</p>\n"}], "owner": {"reputation": 176, "user_id": 4271833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82137f086d0bbfea748a99975d4810d4?s=128&d=identicon&r=PG", "display_name": "Diego Senott", "link": "https://stackoverflow.com/users/4271833/diego-senott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1151, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447274769, "creation_date": 1447262145, "question_id": 33656047, "link": "https://stackoverflow.com/questions/33656047/actionviewtemplateerror-incompatible-character-encodings-ascii-8bit-and-ut", "title": "ActionView::Template::Error (incompatible character encodings: ASCII-8BIT and UTF-8) with portuguese brazilian characters", "body": "<p>I'm trying to deploy an application on an Ubuntu 14.02 server with NGINX and PUMA and when I try to access static pages on the server with characters in brazilian portuguese and WITHOUT access to the database, the page is not showed and the following error gets logged:</p>\n\n<p><strong>ActionView::Template::Error (incompatible character encodings: ASCII-8BIT and UTF-8)</strong></p>\n\n<p>I read a lot of posts/answers regarding this error and tried everything.</p>\n\n<p>Ruby version: ruby 2.1.3p242 (2014-09-19 revision 47630) [x86_64-linux]\nRails version: Rails 4.2.4</p>\n\n<p>The command locale in the server return the following:</p>\n\n<pre><code>LANG=en_US.UTF-8\nLANGUAGE=en_US.UTF-8\nLC_CTYPE=\"en_US.UTF-8\"\nLC_NUMERIC=\"en_US.UTF-8\"\nLC_TIME=\"en_US.UTF-8\"\nLC_COLLATE=\"en_US.UTF-8\"\nLC_MONETARY=\"en_US.UTF-8\"\nLC_MESSAGES=\"en_US.UTF-8\"\nLC_PAPER=\"en_US.UTF-8\"\nLC_NAME=\"en_US.UTF-8\"\nLC_ADDRESS=\"en_US.UTF-8\"\nLC_TELEPHONE=\"en_US.UTF-8\"\nLC_MEASUREMENT=\"en_US.UTF-8\"\nLC_IDENTIFICATION=\"en_US.UTF-8\"\nLC_ALL=en_US.UTF-8\n</code></pre>\n\n<p>My application.rb contains the line:</p>\n\n<pre><code>config.encoding = \"utf-8\"\n</code></pre>\n\n<p>My environment.rb contais the lines:</p>\n\n<pre><code>Encoding.default_external = Encoding::UTF_8\nEncoding.default_internal = Encoding::UTF_8\n</code></pre>\n\n<p>I already putted the # encoding: \"utf-8\" on top of my html.erb files without success.</p>\n"}, {"tags": ["ruby", "linux", "templates", "puppet", "erb"], "answers": [{"comments": [{"owner": {"reputation": 13599, "user_id": 1159538, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AmqfA.png?s=128&g=1", "display_name": "Satish", "link": "https://stackoverflow.com/users/1159538/satish"}, "edited": false, "score": 0, "creation_date": 1447272739, "post_id": 33656945, "comment_id": 55091567, "body": "I am trying following but it is not performing <code>awk</code> operation also why? <code>$hugepage=inline_template(&quot;&lt;%= ``grep Hugepagesize &#47;proc&#47;meminfo | awk &#39;{print $2}&#39;`` %&gt;&quot;)</code>"}, {"owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "reply_to_user": {"reputation": 13599, "user_id": 1159538, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AmqfA.png?s=128&g=1", "display_name": "Satish", "link": "https://stackoverflow.com/users/1159538/satish"}, "edited": false, "score": 0, "creation_date": 1447302659, "post_id": 33656945, "comment_id": 55102285, "body": "@Satish 1) You&#39;re asking a different question. 2) Why are you doubling the backticks? That is unlikely to do anything useful."}, {"owner": {"reputation": 13599, "user_id": 1159538, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AmqfA.png?s=128&g=1", "display_name": "Satish", "link": "https://stackoverflow.com/users/1159538/satish"}, "edited": false, "score": 0, "creation_date": 1447333252, "post_id": 33656945, "comment_id": 55116722, "body": "That is not double tick there, I was trying to formate my code in comment section. Just ignore double ticks."}], "tags": [], "owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "is_accepted": true, "score": 1, "last_activity_date": 1447265110, "creation_date": 1447265110, "answer_id": 33656945, "question_id": 33656018, "link": "https://stackoverflow.com/questions/33656018/why-does-my-puppet-template-return-true-instead-of-the-output-from-awk/33656945#33656945", "title": "Why does my Puppet template return true instead of the output from awk?", "body": "<p>You're misunderstanding what <a href=\"http://ruby-doc.org/core/Kernel.html#method-i-system\" rel=\"nofollow\">Kernel#system</a> does. The documentation is very clear about what it returns:</p>\n\n<blockquote>\n  <p>system returns true if the command gives zero exit status, false for non zero exit status. Returns nil if command execution fails.</p>\n</blockquote>\n\n<p>If you want to insert the <em>output</em> of your command rather than the system method's return value into your template, then you want to use backticks or %x instead. For example:</p>\n\n<pre><code>hugepage = &lt;%= `grep Hugepagesize /proc/meminfo | awk '{print $2}'` %&gt;\n</code></pre>\n"}], "owner": {"reputation": 13599, "user_id": 1159538, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AmqfA.png?s=128&g=1", "display_name": "Satish", "link": "https://stackoverflow.com/users/1159538/satish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 33656945, "answer_count": 1, "score": 0, "last_activity_date": 1447265392, "creation_date": 1447262045, "last_edit_date": 1447265392, "question_id": 33656018, "link": "https://stackoverflow.com/questions/33656018/why-does-my-puppet-template-return-true-instead-of-the-output-from-awk", "title": "Why does my Puppet template return true instead of the output from awk?", "body": "<p>I want to calculate memory on the fly to set sysctl values. My <code>db.erb</code> template contains:  </p>\n\n<pre><code>hugepage = &lt;%= system \"grep Hugepagesize /proc/meminfo|awk '{print $2}'\" %&gt;\n</code></pre>\n\n<p>but it's just printing <code>true</code> in the final output. If I run the following command in the <code>irb</code> shell it will work:</p>\n\n<pre><code>[root@localhost templates]# irb\nirb(main):001:0&gt; system \"grep Hugepagesize /proc/meminfo|awk '{print $2}'\"\n2048\n=&gt; true\n</code></pre>\n"}, {"tags": ["ruby", "linux"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1447261137, "post_id": 33655615, "comment_id": 55084737, "body": "1) Don&#39;t run it from the <code>bin</code> directory."}, {"owner": {"reputation": 683, "user_id": 4400810, "user_type": "registered", "accept_rate": 95, "profile_image": "https://lh3.googleusercontent.com/-zYK-gADw_VU/AAAAAAAAAAI/AAAAAAAAABQ/lk7Rf7bzAY4/photo.jpg?sz=128", "display_name": "MaryCoding", "link": "https://stackoverflow.com/users/4400810/marycoding"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1447261310, "post_id": 33655615, "comment_id": 55084826, "body": "@DaveNewton, followed your advice and got the following error: <code>ruby: No such file or directory -- youtube-multiple-dl (LoadError)</code>"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1447266271, "post_id": 33655615, "comment_id": 55087818, "body": "<code>ruby youtube-multiple-dl -h</code> doesn&#39;t sound like the right command to use. If your path is correct and it installed correctly you should be able to use <code>youtube-multiple-dl -h</code>."}, {"owner": {"reputation": 683, "user_id": 4400810, "user_type": "registered", "accept_rate": 95, "profile_image": "https://lh3.googleusercontent.com/-zYK-gADw_VU/AAAAAAAAAAI/AAAAAAAAABQ/lk7Rf7bzAY4/photo.jpg?sz=128", "display_name": "MaryCoding", "link": "https://stackoverflow.com/users/4400810/marycoding"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1447269158, "post_id": 33655615, "comment_id": 55089581, "body": "@theTinMan, You are right and I am currently facing issues with setting the path. I am running this on ubuntu 15.04. I have set another <a href=\"http://stackoverflow.com/questions/33656669/setting-path-variables-and-running-ruby-script\">question</a> to avoid diverting from the main topic here. Any thoughts?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1447272322, "post_id": 33655615, "comment_id": 55091344, "body": "Questions about managing the system really belong on <a href=\"https://superuser.com\">Super User</a>. Stack Overflow is more for code problems, and spreads into code-related problems. Your question is more about how to set up your environment and correctly install software, not use or program the particular program."}], "answers": [{"comments": [{"owner": {"reputation": 683, "user_id": 4400810, "user_type": "registered", "accept_rate": 95, "profile_image": "https://lh3.googleusercontent.com/-zYK-gADw_VU/AAAAAAAAAAI/AAAAAAAAABQ/lk7Rf7bzAY4/photo.jpg?sz=128", "display_name": "MaryCoding", "link": "https://stackoverflow.com/users/4400810/marycoding"}, "edited": false, "score": 0, "creation_date": 1447261621, "post_id": 33655822, "comment_id": 55084998, "body": "Ahh Thanks Dave! How would i call the script if I am not inside the project root?"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "reply_to_user": {"reputation": 683, "user_id": 4400810, "user_type": "registered", "accept_rate": 95, "profile_image": "https://lh3.googleusercontent.com/-zYK-gADw_VU/AAAAAAAAAAI/AAAAAAAAABQ/lk7Rf7bzAY4/photo.jpg?sz=128", "display_name": "MaryCoding", "link": "https://stackoverflow.com/users/4400810/marycoding"}, "edited": false, "score": 1, "creation_date": 1447261662, "post_id": 33655822, "comment_id": 55085022, "body": "@MaryCoding Don&#39;t know; you could the <code>bin</code> directory to your path."}], "tags": [], "owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "is_accepted": true, "score": 1, "last_activity_date": 1447266026, "last_edit_date": 1447266026, "creation_date": 1447261452, "answer_id": 33655822, "question_id": 33655615, "link": "https://stackoverflow.com/questions/33655615/installation-of-ruby-script-initialize-error/33655822#33655822", "title": "Installation of Ruby script - initialize error", "body": "<ol>\n<li><p>Run the DB migration task:</p>\n\n<pre><code>$ rake db:migrate\n</code></pre></li>\n<li><p>Don't run it from the bin directory, instead at the project root:</p>\n\n<pre><code>$ bin/youtube-multiple-dl\n</code></pre></li>\n</ol>\n\n<p>Example output:</p>\n\n<pre><code>\u279c  youtube-multiple-dl git:(master) bin/youtube-multiple-dl -l\nID   | URL                                                                                   | STATUS       | INFOS                                        |\n</code></pre>\n\n<p>(I have nothing in the queue.)</p>\n\n<pre><code>\u279c  youtube-multiple-dl git:(master) bin/youtube-multiple-dl -s\n[Worker(host:TD1000557.local pid:20020)] Starting job worker\nI, [2015-11-11T12:04:25.859733 #20020]  INFO -- : 2015-11-11T12:04:25-0500: [Worker(host:TD1000557.local pid:20020)] Starting job worker\n</code></pre>\n\n<p>Then you can add videos to download from a new term window in the same directory:</p>\n\n<pre><code>\u279c  youtube-multiple-dl git:(master) bin/youtube-multiple-dl -a https://www.youtube.com/watch\\?v\\=FRcb3CC7ayU\n</code></pre>\n\n<p>The terminal you started it in will show something like:</p>\n\n<pre><code>waiting for download to start...\n[Worker(host:TD1000557.local pid:20080)] Job YoutubeMultipleDL::Download#call_downloader_without_delay (id=1) FAILED (0 prior attempts) with RuntimeError: download failed\nE, [2015-11-11T12:05:55.796843 #20080] ERROR -- : 2015-11-11T12:05:55-0500: [Worker(host:TD1000557.local pid:20080)] Job YoutubeMultipleDL::Download#call_downloader_without_delay (id=1) FAILED (0 prior attempts) with RuntimeError: download failed\n</code></pre>\n\n<p>Don't know why it doesn't work, both <code>youtube-dl</code> and <code>youtube-multiple-dl</code> are new to me.</p>\n"}], "owner": {"reputation": 683, "user_id": 4400810, "user_type": "registered", "accept_rate": 95, "profile_image": "https://lh3.googleusercontent.com/-zYK-gADw_VU/AAAAAAAAAAI/AAAAAAAAABQ/lk7Rf7bzAY4/photo.jpg?sz=128", "display_name": "MaryCoding", "link": "https://stackoverflow.com/users/4400810/marycoding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 33655822, "answer_count": 1, "score": 1, "last_activity_date": 1447266026, "creation_date": 1447260774, "last_edit_date": 1447265809, "question_id": 33655615, "link": "https://stackoverflow.com/questions/33655615/installation-of-ruby-script-initialize-error", "title": "Installation of Ruby script - initialize error", "body": "<p>I have a problem with the basics of installing a Ruby script on my Ubuntu 15.04 linux box.</p>\n\n<p>The repository of the script can be found in <a href=\"https://github.com/vdaubry/youtube-multiple-dl\" rel=\"nofollow\">Github</a>. The installation guide is not very detailed at all.</p>\n\n<p>I have Ruby 2.2.3p173 and gem v2.4.5.1. I cloned the repo and did a <code>bundle install</code> but I get errors when executing the script.</p>\n\n<p>How can I get this script properly installed and be able to run it from anywhere? </p>\n\n<p>Errors:</p>\n\n<pre><code> root@box15990:/usr/local/bin/youtube-multiple-dl/bin# ruby youtube-multiple-dl -h\n/usr/local/bin/youtube-multiple-dl/db/database.rb:32:in `initialize': No such file or directory @ rb_sysopen - config/database.yml(Errno::ENOENT)\n        from /usr/local/bin/youtube-multiple-dl/db/database.rb:32:in `open'\n        from /usr/local/bin/youtube-multiple-dl/db/database.rb:32:in `config'\n        from /usr/local/bin/youtube-multiple-dl/db/database.rb:26:in `connect'\n        from youtube-multiple-dl:5:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "postgresql", "rails-activerecord"], "comments": [{"owner": {"reputation": 4978, "user_id": 3033649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d885e80c88f3969d451d513c6a73c802?s=128&d=identicon&r=PG", "display_name": "markets", "link": "https://stackoverflow.com/users/3033649/markets"}, "edited": false, "score": 0, "creation_date": 1447261116, "post_id": 33655420, "comment_id": 55084719, "body": "Did you try using the table_name: <code>Model.where(&quot;table_name.to &gt; ?&quot;, Time.now)</code>?"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1447261427, "post_id": 33655420, "comment_id": 55084897, "body": "If i was you i would just change the column name and save yourself a load of headaches."}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1447261935, "post_id": 33655420, "comment_id": 55085194, "body": "First, how is anything going to be greater than <code>Time.now</code>? Second, why not use <code>Model.where(to: Time.now..5.years.ago)</code> or whatever range you&#39;re actually trying to showcase?"}], "answers": [{"tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": false, "score": 1, "last_activity_date": 1447263356, "creation_date": 1447263356, "answer_id": 33656434, "question_id": 33655420, "link": "https://stackoverflow.com/questions/33655420/rails-compare-time-current-to-database-entry-postgres-vs-mysql/33656434#33656434", "title": "Rails compare Time.current to database entry, Postgres vs. MySQL", "body": "<p>This is a string literal in SQL:</p>\n\n<pre><code>'to'\n</code></pre>\n\n<p>This is a quoted identifier in (standard) SQL:</p>\n\n<pre><code>\"to\"\n</code></pre>\n\n<p>This is a quoted identifier in MySQL:</p>\n\n<pre><code>`to`\n</code></pre>\n\n<p>SQLite also supports the MySQL-specific syntax for compatibility reasons. And for completeness, this is a quoted identifier in SQL Server:</p>\n\n<pre><code>[to]\n</code></pre>\n\n<p>PostgreSQL follows the standard.</p>\n\n<p>So when you say this:</p>\n\n<pre><code>Model.where(\"'to' &gt; ?\", Time.now)\n</code></pre>\n\n<p>you're trying to compare a constant string with a timestamp that is formatted as a string. That would be like this in Ruby:</p>\n\n<pre><code>'to' &gt; '2015-11-11 09:27:11'\n</code></pre>\n\n<p>so of course it doesn't work as expected.</p>\n\n<p>You have various options:</p>\n\n<ol>\n<li>Rename the column so that you don't have to worry about quoting it.</li>\n<li>Use the same database in your development, test, and production environments so that you don't have to worry about identifier quoting differences. This is a really good idea anyway, there are many differences between databases that ActiveRecord won't help you with.</li>\n<li>Try to get ActiveRecord to write the SQL for you. This doesn't work that well for non-<code>=</code> comparisons unless you want to make a big confusing mess with AREL.</li>\n</ol>\n\n<p>I would start with <strong>2</strong> because, as I said, there are many differences between databases (identifier quoting, reserved words, case sensitivity, date/time manipulation functions, SQL functionality, column types, GROUP BY behavior, ...) that ActiveRecord cannot help you with. Developing and testing on top of one database but deploying on another is just asking for trouble.</p>\n"}], "owner": {"reputation": 49, "user_id": 4406747, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7b1052e39e99569d4dd97e096faa7ee6?s=128&d=identicon&r=PG&f=1", "display_name": "Owlet", "link": "https://stackoverflow.com/users/4406747/owlet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 330, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1447263367, "creation_date": 1447260152, "last_edit_date": 1447263367, "question_id": 33655420, "link": "https://stackoverflow.com/questions/33655420/rails-compare-time-current-to-database-entry-postgres-vs-mysql", "title": "Rails compare Time.current to database entry, Postgres vs. MySQL", "body": "<p>I've an issue with PostgreSQL using Rails. I have a table with datetime \"from\" and \"to\". In my controller I got the following:</p>\n\n<pre><code>@running = Model.where(\"'to' &gt; ?\", Time.now)\n@finished = Model.where(\"'to' &lt; ?\", Time.now)\n</code></pre>\n\n<p>I already learned that I have to escape the \"to\", because it's a SQL statement. The problem now is that with MySQL and SQLite I can escape it with ` , so in my development environment (sqlite), it's working with:</p>\n\n<pre><code>.where(\"`to` &gt; ?\", Time.now) \n</code></pre>\n\n<p>And it actually works correct in the app.</p>\n\n<p>But my production environment is Postgres, and Postgres doesn't support ``, and '' isn't working apparently because it doesn't matter what the entrys \"to\" is, it's always displaying the @running one even though it should be @finished.</p>\n\n<p>What's wrong?</p>\n\n<p>Thanks!!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 5186, "user_id": 1690765, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/59237bb43f984f251e904bd4904e4156?s=128&d=identicon&r=PG", "display_name": "Niels B.", "link": "https://stackoverflow.com/users/1690765/niels-b"}, "edited": false, "score": 0, "creation_date": 1447260050, "post_id": 33655330, "comment_id": 55084040, "body": "In your case, the app is telling you that your database does not contain a record in the plans table with the id of 1. It sounds like you need to go through the Rails guide for beginnners."}, {"owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "edited": false, "score": 0, "creation_date": 1447260329, "post_id": 33655330, "comment_id": 55084196, "body": "Do <code>rake schema:load</code> then <code>rake db:seed</code>"}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 5551138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0547cdb92e614e49dc1a06db577c7d1?s=128&d=identicon&r=PG", "display_name": "Tom H", "link": "https://stackoverflow.com/users/5551138/tom-h"}, "edited": false, "score": 0, "creation_date": 1447352693, "post_id": 33655418, "comment_id": 55130257, "body": "Ah okay I think I&#39;m starting to get it. Sorry, bit of a beginner =\\. So when I cloned the app I got the database &quot;set up&quot;, like the columns and rows of the database, but no data..In the case of the Plan table from the original app, there were two plans, which provide core functionality of the application. Is there a way to get the data from the database of the original app to the clone? If not - could I fix the original app to &quot;tell&quot; the database of a cloned app to start with certain data, being that it&#39;s critical to run the app. Again, new to all this - you guys are helping me learn!"}, {"owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "reply_to_user": {"reputation": 69, "user_id": 5551138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0547cdb92e614e49dc1a06db577c7d1?s=128&d=identicon&r=PG", "display_name": "Tom H", "link": "https://stackoverflow.com/users/5551138/tom-h"}, "edited": false, "score": 0, "creation_date": 1447363563, "post_id": 33655418, "comment_id": 55136356, "body": "If that data is not provided/publicly accessible - you cannot, think of it as of a truck loaded with something valuable: you can buy exactly the same model of truck, but it will not have the same load inside it"}], "tags": [], "owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "is_accepted": false, "score": 3, "last_activity_date": 1447260146, "creation_date": 1447260146, "answer_id": 33655418, "question_id": 33655330, "link": "https://stackoverflow.com/questions/33655330/running-a-ruby-on-rails-application-from-github/33655418#33655418", "title": "Running a Ruby on Rails Application from GitHub", "body": "<p>You have an empty database with no data in it, if seeds are provided - <code>rake db:seed</code> will help, otherwise you'll have to create initial data youself (in rails console, or may be directly in db)</p>\n"}], "owner": {"reputation": 69, "user_id": 5551138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0547cdb92e614e49dc1a06db577c7d1?s=128&d=identicon&r=PG", "display_name": "Tom H", "link": "https://stackoverflow.com/users/5551138/tom-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1447260718, "creation_date": 1447259877, "last_edit_date": 1447260718, "question_id": 33655330, "link": "https://stackoverflow.com/questions/33655330/running-a-ruby-on-rails-application-from-github", "title": "Running a Ruby on Rails Application from GitHub", "body": "<p>I'm cloning a RoR app from Github. After the clone I install my gems. Now at this point my question/problem arises. Some research I've done suggests I do a </p>\n\n<pre><code>rake db:create\n</code></pre>\n\n<p>followed by a </p>\n\n<pre><code>rake db:migrate\n</code></pre>\n\n<p>I've tried both of those steps but am still having trouble. </p>\n\n<p>When I run </p>\n\n<pre><code>rails console \n</code></pre>\n\n<p>and do something like Plan.first it returns nil. And when I try to visit my application I get an <code>ActiveRecord::RecordNotFound</code> in <code>PagesController#home</code> error alluding to the fact that it can't find the plan id of 1. </p>\n\n<p>Any help is much appreciated.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1447260220, "post_id": 33655278, "comment_id": 55084133, "body": "You could use an <code>after_save callback</code>: <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActiveRecord/Callbacks.html</a>"}, {"owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "reply_to_user": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1447263009, "post_id": 33655278, "comment_id": 55085836, "body": "<code>after_save</code> is too dirty ;)"}], "answers": [{"comments": [{"owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "edited": false, "score": 0, "creation_date": 1447309060, "post_id": 33656987, "comment_id": 55104107, "body": "I had the same idea. But you should understand that these parameters will assign via mass_assignment, so it will be better to overwrite <code>published_campaign_ids method</code> in my opinion"}, {"owner": {"reputation": 390, "user_id": 2714532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b237c0974800e4e365020f3786647444?s=128&d=identicon&r=PG&f=1", "display_name": "Fan Jin", "link": "https://stackoverflow.com/users/2714532/fan-jin"}, "reply_to_user": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "edited": false, "score": 0, "creation_date": 1447334639, "post_id": 33656987, "comment_id": 55117583, "body": "@asiniy In this case, your logic must go somewhere, you can first call mass assignment then the function above, it&#39;ll always be one more line which I believe is clean enough. If you want, you can also change this into callbacks which isn&#39;t dirty. Instead of overriding the method callback is much more logical."}], "tags": [], "owner": {"reputation": 390, "user_id": 2714532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b237c0974800e4e365020f3786647444?s=128&d=identicon&r=PG&f=1", "display_name": "Fan Jin", "link": "https://stackoverflow.com/users/2714532/fan-jin"}, "is_accepted": false, "score": 0, "last_activity_date": 1447265262, "creation_date": 1447265262, "answer_id": 33656987, "question_id": 33655278, "link": "https://stackoverflow.com/questions/33655278/rails-update-boolean-attribute-on-assigning-ids/33656987#33656987", "title": "Rails update boolean attribute on assigning ids", "body": "<p>You can use a method added to <code>Dealer</code> to handle this like the following:</p>\n\n<pre><code>def setCampaigns(published, ids)\n  if published\n    self.published_campaign_ids = ids\n    self.unpublished_campaign_ids = self.campaign_ids - ids\n  else\n    self.unpublished_campaign_ids = ids\n    self.published_campaign_ids = self.campaign_ids - ids\n  end\nend\n</code></pre>\n\n<p>To use, it's simple</p>\n\n<pre><code>dealer.setCampaigns(true, params[:published_campaign_ids]) # to publish campaigns\n</code></pre>\n\n<p>similarly,</p>\n\n<pre><code>dealer.setCampaigns(false, params[:unpublished_campaign_ids]) # to unpublish campaigns\n</code></pre>\n"}], "owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 237, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1447265262, "creation_date": 1447259706, "question_id": 33655278, "link": "https://stackoverflow.com/questions/33655278/rails-update-boolean-attribute-on-assigning-ids", "title": "Rails update boolean attribute on assigning ids", "body": "<p>I have a <code>has_many</code> association. I also have few <code>has_many</code> associations on the same model depends on boolean value. I also have a multiple select when I can choose ids of one type of association. I need to get a code: when I assign ids to association with boolean value == true then all another ids to it's association should become false.</p>\n\n<p>Please consider example below:</p>\n\n<pre><code>class Dealer &lt; AR::Base\n  has_many :campaigns\n  has_many :published_campaigns, class_name: 'Campaign', -&gt; { where(published: true) }\n  has_many :unpublished_campaigns, class_name: 'Campaign', -&gt; { where(published: false) }\nend\n\nclass Campaign\n  # attribute :published, :boolean\n  belongs_to :dealer\nend\n\n# code\ndealer = Dealer.find(params[:id])\ndealer.campaigns.pluck(:id) # =&gt; 1, 2, 3, 4\ndealer.published_campaigns.pluck(:id) # =&gt; 1, 2\ndealer.unpublished_campaigns.pluck(:id) # =&gt; 3, 4\nparams[:published_campaign_ids] = [2, 3]\ndealer.update_attributes(published_campaign_ids: params[:published_campaign_ids]) # =&gt; true\n\n# campaign no 2 still will be published, campaign will become published, campaign no 1 will become unpublished, and campaign no 4 still will be unpublished\ndealer.campaigns.pluck(:id) # =&gt; 1, 2, 3, 4\ndealer.published_campaigns.pluck(:id) # =&gt; 2, 3\ndealer.unpublished_campaigns.pluck(:id) # =&gt; 3, 4\n</code></pre>\n\n<p>How can I make it in a clean way?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "paperclip"], "comments": [{"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "edited": false, "score": 0, "creation_date": 1447268478, "post_id": 33654477, "comment_id": 55089226, "body": "The title is really confusing, are you trying to stop the images from uploading to AWS?"}, {"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "reply_to_user": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "edited": false, "score": 0, "creation_date": 1447337786, "post_id": 33654477, "comment_id": 55119689, "body": "@Mike apologies, for clarification i have changed the title, what i am trying to achieve is to save images locally when in test/dev and when in production then use my S3 bucket"}], "answers": [{"tags": [], "owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "is_accepted": false, "score": 1, "last_activity_date": 1447257884, "creation_date": 1447257884, "answer_id": 33654667, "question_id": 33654477, "link": "https://stackoverflow.com/questions/33654477/prevent-image-upload-to-aws-in-development-test-in-paperclip/33654667#33654667", "title": "Prevent image upload to AWS in development/test in Paperclip", "body": "<p>Paperclip can have different storage for each field, so look for how s3 storage is selected.\nProbably it's <code>has_attached_file :foo, storage: :s3, ...</code>, to save locally storage should be <code>:filesystem</code></p>\n"}, {"comments": [{"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1447411565, "post_id": 33678479, "comment_id": 55153640, "body": "Thanks, much prefer to put the paperclip config into an initializer as opposed to in the model class"}, {"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1447411850, "post_id": 33678479, "comment_id": 55153803, "body": "i get an error <code>Paperclip::Errors::StorageMethodNotFound: Cannot load storage module &#39;:filesystem&#39;</code>"}, {"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1447412711, "post_id": 33678479, "comment_id": 55154266, "body": "ah dont worry. think it&#39;s <code>filesystem</code>"}, {"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1447413120, "post_id": 33678479, "comment_id": 55154496, "body": "just to update i found that we need to pass &#39;filesystem&#39; and &#39;s3&#39; for this to work, thanks again for your help"}, {"owner": {"reputation": 1487, "user_id": 4314737, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--oKvmYGmbWo/AAAAAAAAAAI/AAAAAAAAACE/DViFEFiuDjo/photo.jpg?sz=128", "display_name": "Van Huy", "link": "https://stackoverflow.com/users/4314737/van-huy"}, "reply_to_user": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1447418373, "post_id": 33678479, "comment_id": 55157365, "body": "Actually <code>filesystem</code> is the default place to store attachments. I usually omit it"}], "tags": [], "owner": {"reputation": 1487, "user_id": 4314737, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--oKvmYGmbWo/AAAAAAAAAAI/AAAAAAAAACE/DViFEFiuDjo/photo.jpg?sz=128", "display_name": "Van Huy", "link": "https://stackoverflow.com/users/4314737/van-huy"}, "is_accepted": true, "score": 3, "last_activity_date": 1447429586, "last_edit_date": 1447429586, "creation_date": 1447352203, "answer_id": 33678479, "question_id": 33654477, "link": "https://stackoverflow.com/questions/33654477/prevent-image-upload-to-aws-in-development-test-in-paperclip/33678479#33678479", "title": "Prevent image upload to AWS in development/test in Paperclip", "body": "<p>You can create an initializer like this</p>\n\n<pre><code># config/initializers/paperclip.rb\nif Rails.env.development? || Rails.env.test? \n  Paperclip::Attachment.default_options[:storage] = 'filesystem'\nelse\n  Paperclip::Attachment.default_options[:storage] = 's3'\n  Paperclip::Attachment.default_options[:s3_credentials] = {\n    bucket: ENV['AWS_BUCKET'],\n    access_key_id: ENV['AWS_ACCESS_KEY_ID'],\n    secret_access_key: ENV['AWS_SECRET_ACCESS_KEY']\n  }\n  # other config...\nend\n</code></pre>\n\n<p>For more options about S3, see also <a href=\"http://www.rubydoc.info/gems/paperclip/Paperclip/Storage/S3\" rel=\"nofollow\">http://www.rubydoc.info/gems/paperclip/Paperclip/Storage/S3</a></p>\n\n<p>Just add those options to the <code>Paperclip::Attachment.default_options</code> hash :)</p>\n"}], "owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 784, "favorite_count": 1, "accepted_answer_id": 33678479, "answer_count": 2, "score": 3, "last_activity_date": 1527078619, "creation_date": 1447257267, "last_edit_date": 1527078619, "question_id": 33654477, "link": "https://stackoverflow.com/questions/33654477/prevent-image-upload-to-aws-in-development-test-in-paperclip", "title": "Prevent image upload to AWS in development/test in Paperclip", "body": "<p>I have inherited a project that uses Paperclip for image processing, which also uploads to a AWS bucket, normally I use Carrierwave and choose to save files locally when in Test or Development environments</p>\n\n<pre><code>CarrierWave.configure do |config|\n  if Rails.env.test?\n    config.storage = :file\n    config.enable_processing = false\n else\n    config.fog_credentials = {\n      :provider              =&gt; 'AWS',\n      :aws_access_key_id     =&gt; ENV['AWS_ACCESS_KEY_ID'],\n      :aws_secret_access_key =&gt; ENV['AWS_SECRET_ACCESS_KEY'],\n      :region =&gt; 'eu-west-1'\n   }\n\n    config.fog_directory =  ENV['AWS_BUCKET']\n    config.fog_public     = true\n    config.fog_attributes = {'Cache-Control'=&gt;'max-age=315576000'}\n end\nend\n</code></pre>\n\n<p>How can I achieve the same thing with paperclip? I have read that you can <a href=\"https://github.com/thoughtbot/paperclip#defaults\" rel=\"nofollow noreferrer\">Define Defaults </a> in a initializer file.</p>\n\n<p>But I am a bit unsure on what options to pass.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "macos", "freetds", "tiny-tds"], "answers": [{"comments": [{"owner": {"reputation": 144, "user_id": 1336321, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/c5f1a45c315011ef4c60f9e68e3f46dd?s=128&d=identicon&r=PG", "display_name": "user1336321", "link": "https://stackoverflow.com/users/1336321/user1336321"}, "edited": false, "score": 1, "creation_date": 1464754491, "post_id": 33669297, "comment_id": 62607006, "body": "awesome man! thanks a lot, I thought that it was not able to find freetds"}], "tags": [], "owner": {"reputation": 1373, "user_id": 4066032, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/2GCfo.png?s=128&g=1", "display_name": "gdgr", "link": "https://stackoverflow.com/users/4066032/gdgr"}, "is_accepted": true, "score": 4, "last_activity_date": 1543400507, "last_edit_date": 1543400507, "creation_date": 1447324121, "answer_id": 33669297, "question_id": 33654315, "link": "https://stackoverflow.com/questions/33654315/homebrew-freetds-tiny-tds-why-cant-i-install-tiny-tds-after-successfully-ins/33669297#33669297", "title": "Homebrew, FreeTDS, tiny_tds. Why can&#39;t I install tiny_tds after successfully installing FreeTDS?", "body": "<p><strong>Hallelujah!</strong></p>\n\n<p>After trying absolutely everything I could think of, including reading the mkmf.log file and a plethora of different installation parameters, I've arrived at a solution that worked for me.</p>\n\n<p>In the end, the solution was relatively straight-forward, though difficult to figure out. The issue was that it was trying to build with the wrong architecture in mind (32-bit). Using the flag <code>ARCHFLAGS</code> to explicitly specify 64-bit, the installation worked immediately, as follows:</p>\n\n<pre><code>sudo ARCHFLAGS=\"-arch x86_64\" gem install tiny_tds\n</code></pre>\n\n<p>I hope somebody finds this useful--I didn't find anything anywhere saying this was a solution.</p>\n"}], "owner": {"reputation": 1373, "user_id": 4066032, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/2GCfo.png?s=128&g=1", "display_name": "gdgr", "link": "https://stackoverflow.com/users/4066032/gdgr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 753, "favorite_count": 0, "accepted_answer_id": 33669297, "answer_count": 1, "score": 5, "last_activity_date": 1543400507, "creation_date": 1447256784, "last_edit_date": 1495540722, "question_id": 33654315, "link": "https://stackoverflow.com/questions/33654315/homebrew-freetds-tiny-tds-why-cant-i-install-tiny-tds-after-successfully-ins", "title": "Homebrew, FreeTDS, tiny_tds. Why can&#39;t I install tiny_tds after successfully installing FreeTDS?", "body": "<p>This issue led me to <a href=\"https://stackoverflow.com/questions/15004464/failing-to-bundle-install-tiny-tds-on-mac-os-x-10-8-with-homebrew-freetds\">this question</a>. </p>\n\n<p>I expected that to solve my issue, a couple of the answers there detail some config params that can help with the installation. The paths weren't quite right for me so I modified them and ended up with this:</p>\n\n<pre><code>gem install tiny_tds -- --with-freetds-include=/usr/local/Cellar/freetds/0.95.21/include   \n    --with-freetds-lib=/usr/local/Cellar/freetds/0.95.21/lib\n    --with-iconv-include=/usr/local/Cellar/libiconv/1.14/include\n    --with-iconv-lib=/usr/local/Cellar/libiconv/1.14/lib\n</code></pre>\n\n<p>However, running that has resulted in the same error I was getting earlier. As follows:</p>\n\n<p><a href=\"https://i.stack.imgur.com/RK5sE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RK5sE.png\" alt=\"Console error\"></a></p>\n\n<p>I previously installed libiconv and FreeTDS using <code>brew</code>. </p>\n\n<p>Has anyone encountered and solved this issue on OS X El Capitan?</p>\n\n<p>If you'd like any more information please just ask.</p>\n"}, {"tags": ["ruby", "class", "initialization"], "answers": [{"tags": [], "owner": {"reputation": 864, "user_id": 1285054, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/49090e67bce683fb15ee068b88beb0fa?s=128&d=identicon&r=PG", "display_name": "Aniket Schneider", "link": "https://stackoverflow.com/users/1285054/aniket-schneider"}, "is_accepted": false, "score": 2, "last_activity_date": 1447258060, "creation_date": 1447258060, "answer_id": 33654734, "question_id": 33654248, "link": "https://stackoverflow.com/questions/33654248/ruby-initialization-weird-argument-performance/33654734#33654734", "title": "Ruby initialization weird argument performance", "body": "<p>In your initializer, get rid of the trailing commas. That whole initializer is getting parsed as a single parallel assignment.</p>\n\n<p>A quick demo of what's going on:</p>\n\n<pre><code>foo = 1,2,3\nfoo\n=&gt; [1,2,3]\n\nfoo = 1,\n2,\n3\nfoo\n=&gt; [1,2,3]\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 4373616, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1149044128/picture?type=large", "display_name": "Gerard Morera", "link": "https://stackoverflow.com/users/4373616/gerard-morera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1447258060, "creation_date": 1447256614, "question_id": 33654248, "link": "https://stackoverflow.com/questions/33654248/ruby-initialization-weird-argument-performance", "title": "Ruby initialization weird argument performance", "body": "<p>I have a really weird problem.\nIf we run this class, the execution will be interrupted on the method call due to <code>binding.pry</code>.</p>\n\n<p>If we check the value of <code>receiver</code> method is <code>Ivo</code>, as expected. But the value of `sender is this object, basically the array of params.</p>\n\n<pre><code>[\"Gerard\",\n \"Ivo\",\n #&lt;Bank:0x007fb4339ac2b8\n  @accounts=\n   [#&lt;Account:0x007fb4339ac240 @bank=#&lt;Bank:0x007fb4339ac2b8 ...&gt;, @founds=0, @user=\"Gerard\"&gt;,\n    #&lt;Account:0x007fb4339ac1f0 @bank=#&lt;Bank:0x007fb4339ac2b8 ...&gt;, @founds=0, @user=\"Ivo\"&gt;]&gt;,\n #&lt;Bank:0x007fb4339ac2b8\n  @accounts=\n   [#&lt;Account:0x007fb4339ac240 @bank=#&lt;Bank:0x007fb4339ac2b8 ...&gt;, @founds=0, @user=\"Gerard\"&gt;,\n    #&lt;Account:0x007fb4339ac1f0 @bank=#&lt;Bank:0x007fb4339ac2b8 ...&gt;, @founds=0, @user=\"Ivo\"&gt;]&gt;,\n 1200]\n</code></pre>\n\n<p>This is the whole class. Any explanation?</p>\n\n<pre><code>require_relative './lib/bank'\n\nclass TransferAgent\n  def initialize(sender, receiver, sender_bank, receiver_bank, amount)\n    @sender        = sender,\n    @receiver      = receiver,\n    @sender_bank   = sender_bank,\n    @receiver_bank = receiver_bank,\n    @amount        = amount\n  end\n\n  def call\n    binding.pry\n    transfer_result = perform_transfer until transfer_result.succed?\n  end\n\n  private\n\n  attr_reader :sender, :receiver, :amount, :sender_bank, :receiver_bank\n\n  def perform_transfer\n    sender_account.transfer_money(receiver_account, amount)\n  end\n\n  def sender_account\n    @sender_account ||= sender_bank.account sender\n  end\n\n  def receiver_account\n    @receiver_account ||= receiver_bank.account receiver\n  end\nend\n\nbank_a = Bank.new\n\nbank_a.create_account(\"Gerard\")\nbank_a.create_account(\"Ivo\")\n\nTransferAgent.new(\"Gerard\", \"Ivo\", bank_a, bank_a, 1200).call\n</code></pre>\n"}, {"tags": ["ruby", "escaping", "typeerror", "freemarker", "expansion"], "answers": [{"comments": [{"owner": {"reputation": 1552, "user_id": 1288852, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/23ff06b6dd945158bff8e00f3ec25071?s=128&d=identicon&r=PG", "display_name": "nterry", "link": "https://stackoverflow.com/users/1288852/nterry"}, "edited": false, "score": 0, "creation_date": 1447263578, "post_id": 33656290, "comment_id": 55086191, "body": "That was my guess (It occurred to me once i posted this question) but i wanted to be sure"}], "tags": [], "owner": {"reputation": 25516, "user_id": 606679, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/82758750c35c4b4ca9972bac9562b36c?s=128&d=identicon&r=PG", "display_name": "ddekany", "link": "https://stackoverflow.com/users/606679/ddekany"}, "is_accepted": true, "score": 1, "last_activity_date": 1447262925, "creation_date": 1447262925, "answer_id": 33656290, "question_id": 33654206, "link": "https://stackoverflow.com/questions/33654206/freemarker-ruby-script-template-issue/33656290#33656290", "title": "Freemarker ruby script template issue", "body": "<p>This will work:</p>\n\n<pre><code>${r\"#{@awesome\"}}\n</code></pre>\n\n<p>Your attempt gives error because FreeMarker's <code>#{...}</code> only accepts numbers.</p>\n"}], "owner": {"reputation": 1552, "user_id": 1288852, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/23ff06b6dd945158bff8e00f3ec25071?s=128&d=identicon&r=PG", "display_name": "nterry", "link": "https://stackoverflow.com/users/1288852/nterry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 33656290, "answer_count": 1, "score": 0, "last_activity_date": 1447262925, "creation_date": 1447256510, "question_id": 33654206, "link": "https://stackoverflow.com/questions/33654206/freemarker-ruby-script-template-issue", "title": "Freemarker ruby script template issue", "body": "<p>So I am trying to run a ruby script and I have string expansion sections that are being mistaken for freemarker expressions, for example:</p>\n\n<pre><code>puts \"Foo bar baz quux #{@awesome}\"\n</code></pre>\n\n<p>In ruby the #{} is valid ruby, and I need Freemarker to ignore it. According to the <a href=\"https://freemarker.incubator.apache.org/docs/dgui_template_exp.html#dgui_template_exp_direct_string\" rel=\"nofollow\">documentation</a>, I can escape lie this:</p>\n\n<pre><code>#\\{@awesome}\n</code></pre>\n\n<p>But that leaves the backslash in the final output. I tried to do this:</p>\n\n<pre><code>#{r\"#{@awesome\"}}\n</code></pre>\n\n<p>But I get an exception saying that a number was expected... According to the docs, this should produce a literal '#{@awesome}'</p>\n\n<p>What gives? Am I doing something wrong?</p>\n"}, {"tags": ["ruby", "math"], "answers": [{"tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 1, "last_activity_date": 1447256488, "creation_date": 1447256488, "answer_id": 33654196, "question_id": 33654012, "link": "https://stackoverflow.com/questions/33654012/working-with-exponentiation-of-time/33654196#33654196", "title": "working with exponentiation of time", "body": "<p>You are adding where you should be multiplying</p>\n\n<pre><code>acc += segment.to_i * (60 ** i)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": true, "score": 2, "last_activity_date": 1447256515, "creation_date": 1447256515, "answer_id": 33654211, "question_id": 33654012, "link": "https://stackoverflow.com/questions/33654012/working-with-exponentiation-of-time/33654211#33654211", "title": "working with exponentiation of time", "body": "<p>Your algorithm is a little messy and error prone.\nThis will give you the right answer:</p>\n\n<pre><code>clock = '00:48:22'\nclock.split(':').map(&amp;:to_i).reduce(0) do |acc, segment|\n  acc * 60 + segment\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1447359079, "creation_date": 1447359079, "answer_id": 33680434, "question_id": 33654012, "link": "https://stackoverflow.com/questions/33654012/working-with-exponentiation-of-time/33680434#33680434", "title": "working with exponentiation of time", "body": "<pre><code>require 'date'\n\nd = Date.today\n(Time.new(d.year,d.month,d.day,*str.split(':').map(&amp;:to_i))-d.to_time).to_i\n  #=&gt; 2902 \n</code></pre>\n"}], "owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 33654211, "answer_count": 3, "score": 0, "last_activity_date": 1447359079, "creation_date": 1447255948, "question_id": 33654012, "link": "https://stackoverflow.com/questions/33654012/working-with-exponentiation-of-time", "title": "working with exponentiation of time", "body": "<p>I have a string as follows:</p>\n\n<pre><code>\"00:48:22\" \n</code></pre>\n\n<p>From right to left, I am working with a power of 60, because I want to get the total number of seconds from hours, minutes, seconds. </p>\n\n<p>This is what I have tried:</p>\n\n<pre><code>clock\n=&gt; \"00:48:22\" \ni = 0\nresult = clock.split(\":\").reverse.reduce(0) do |acc, segment|\n  acc += segment.to_i + (60 ** i)\n  i += 1\n  acc\nend\n =&gt; 3731 \n</code></pre>\n\n<p>The result is off. It should be 2902. Any idea what I am doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5251, "user_id": 903842, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cfe7b10dbda86c6cb930c1ae40abfc2c?s=128&d=identicon&r=PG", "display_name": "Nimir", "link": "https://stackoverflow.com/users/903842/nimir"}, "edited": false, "score": 1, "creation_date": 1447260074, "post_id": 33653689, "comment_id": 55084055, "body": "from your current <code>schema.rb</code> can you post ProgExit schema?"}, {"owner": {"reputation": 1336, "user_id": 3908551, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/oYCdi.png?s=128&g=1", "display_name": "stoebelj", "link": "https://stackoverflow.com/users/3908551/stoebelj"}, "reply_to_user": {"reputation": 5251, "user_id": 903842, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cfe7b10dbda86c6cb930c1ae40abfc2c?s=128&d=identicon&r=PG", "display_name": "Nimir", "link": "https://stackoverflow.com/users/903842/nimir"}, "edited": false, "score": 0, "creation_date": 1447271787, "post_id": 33653689, "comment_id": 55091061, "body": "relevant code from schema.rb added above."}, {"owner": {"reputation": 5251, "user_id": 903842, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cfe7b10dbda86c6cb930c1ae40abfc2c?s=128&d=identicon&r=PG", "display_name": "Nimir", "link": "https://stackoverflow.com/users/903842/nimir"}, "edited": false, "score": 0, "creation_date": 1447274954, "post_id": 33653689, "comment_id": 55092695, "body": "I&#39;ve tried to reproduce this on a rails &#39;4.2.3&#39; app with mysql with no luck! getting the correct attributes list without the <code>nil=&gt;nil</code> part!"}], "answers": [{"comments": [{"owner": {"reputation": 1336, "user_id": 3908551, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/oYCdi.png?s=128&g=1", "display_name": "stoebelj", "link": "https://stackoverflow.com/users/3908551/stoebelj"}, "edited": false, "score": 1, "creation_date": 1447334585, "post_id": 33664070, "comment_id": 55117550, "body": "I found this ruby gem to address my problem perfectly <a href=\"https://github.com/composite-primary-keys/composite_primary_keys\" rel=\"nofollow noreferrer\">github.com/composite-primary-keys/composite_primary_keys</a>."}], "tags": [], "owner": {"reputation": 321, "user_id": 3880374, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fRf5K.jpg?s=128&g=1", "display_name": "ktravers", "link": "https://stackoverflow.com/users/3880374/ktravers"}, "is_accepted": true, "score": 1, "last_activity_date": 1447300364, "last_edit_date": 1447300364, "creation_date": 1447299729, "answer_id": 33664070, "question_id": 33653689, "link": "https://stackoverflow.com/questions/33653689/unexpected-attributes-found-in-active-record-object/33664070#33664070", "title": "unexpected attributes found in Active Record object", "body": "<p>since you've overriden the default primary key for this table (by including the <code>id: false</code> option in the <code>create_table</code> statement), you need to explicitly define a primary key for this model. </p>\n\n<p>Per <a href=\"http://apidock.com/rails/ActiveRecord/ConnectionAdapters/SchemaStatements/create_table\" rel=\"nofollow\">Rails docs</a>, you can use <code>self.primary_key=</code> on the model to define the key explicitly.</p>\n\n<p>see related issue: <a href=\"https://stackoverflow.com/questions/18923477/activerecord-model-without-primary-key\">ActiveRecord model without primary key</a></p>\n"}], "owner": {"reputation": 1336, "user_id": 3908551, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/oYCdi.png?s=128&g=1", "display_name": "stoebelj", "link": "https://stackoverflow.com/users/3908551/stoebelj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 33664070, "answer_count": 1, "score": 0, "last_activity_date": 1447300364, "creation_date": 1447255135, "last_edit_date": 1447271751, "question_id": 33653689, "link": "https://stackoverflow.com/questions/33653689/unexpected-attributes-found-in-active-record-object", "title": "unexpected attributes found in Active Record object", "body": "<p>I am finding an unexpected attribute in an ActiveRecord object and I can't figure out where its coming from. Note the final attribute <code>nil =&gt; nil</code>.  </p>\n\n<pre><code>irb(main):001:0&gt; p = ProgExit.new\n=&gt; #&lt;ProgExit id: nil, Student_Bnum: nil, Program_ProgCode: nil, ExitCode_ExitCode: nil, ExitTerm: nil, ExitDate: nil, GPA: nil, GPA_last60: nil, RecommendDate: nil, Details: nil&gt;\nirb(main):002:0&gt; p.attributes\n=&gt; {\"id\"=&gt;nil, \"Student_Bnum\"=&gt;nil, \"Program_ProgCode\"=&gt;nil, \"ExitCode_ExitCode\"=&gt;nil, \"ExitTerm\"=&gt;nil, \"ExitDate\"=&gt;nil, \"GPA\"=&gt;nil, \"GPA_last60\"=&gt;nil, \"RecommendDate\"=&gt;nil, \"Details\"=&gt;nil, nil=&gt;nil}\n</code></pre>\n\n<p>Two other items of note: 1) this problem doesn't present for any other models. 2) this problem is the same for this model across development, test and production. 3) The model does not use attr_accessor anywhere.</p>\n\n<p>Any idea where this comes from? I am including the related model though it is thus far tiny (still working on it).</p>\n\n<pre><code>class ProgExit &lt; ActiveRecord::Base\n\n    belongs_to :student, foreign_key: \"Student_Bnum\"\n    belongs_to :program, foreign_key: \"Program_ProgCode\"\n    belongs_to :exit_code, foreign_key: \"ExitCode_ExitCode\"\nend\n</code></pre>\n\n<p>And here is the relevant code from my schema.rb</p>\n\n<pre><code>  create_table \"prog_exits\", id: false, force: true do |t|\n    t.integer  \"id\",                           null: false\n    t.string   \"Student_Bnum\",      limit: 9,  null: false\n    t.string   \"Program_ProgCode\",  limit: 45, null: false\n    t.string   \"ExitCode_ExitCode\", limit: 45, null: false\n    t.integer  \"ExitTerm\",                     null: false\n    t.datetime \"ExitDate\"\n    t.float    \"GPA\",               limit: 24\n    t.float    \"GPA_last60\",        limit: 24\n    t.datetime \"RecommendDate\"\n    t.text     \"Details\"\n  end\n\n  add_index \"prog_exits\", [\"ExitCode_ExitCode\"], name: \"fk_Exit_ExitCode1_idx\", using: :btree\n  add_index \"prog_exits\", [\"Program_ProgCode\"], name: \"fk_Exit__Program_idx\", using: :btree\n  add_index \"prog_exits\", [\"Student_Bnum\"], name: \"fk_Exit_Student1_idx\", using: :btree\n  add_index \"prog_exits\", [\"id\"], name: \"id\", using: :btree\n</code></pre>\n\n<p>I'm not sure what other code to include here but if there is something else that might be the culprit I can share that to.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "view", "controller"], "answers": [{"tags": [], "owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "is_accepted": true, "score": 1, "last_activity_date": 1447256317, "creation_date": 1447256317, "answer_id": 33654132, "question_id": 33653672, "link": "https://stackoverflow.com/questions/33653672/how-to-pass-params-from-view-to-custom-controller/33654132#33654132", "title": "How to pass params from view to custom controller", "body": "<ul>\n<li><p>For example pass additional params to link helper like</p>\n\n<p><code>link_to 'fav', addfavoriteteam_user_path(team_id:team.id)</code></p>\n\n<p>and they will be passed to <code>addfavoriteteam</code> action of users controller (provided you have routes set for it)</p></li>\n<li><p>More RESTful way is to have <code>favorite</code> action for teams.</p></li>\n<li><p>Or if you want to have a form with checkboxes, you can have it around teams#index, just set form action url to point to another controller</p>\n\n<p>You probably also want <code>accepts_nested_attributes_for</code> for your many-to-many relation model in this case</p></li>\n</ul>\n"}], "owner": {"reputation": 203, "user_id": 2408900, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d1e1a60601a4b5e29c784f34b326ff3e?s=128&d=identicon&r=PG", "display_name": "Dominik", "link": "https://stackoverflow.com/users/2408900/dominik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 33654132, "answer_count": 1, "score": -1, "last_activity_date": 1447256317, "creation_date": 1447255102, "question_id": 33653672, "link": "https://stackoverflow.com/questions/33653672/how-to-pass-params-from-view-to-custom-controller", "title": "How to pass params from view to custom controller", "body": "<p>Sorry for rookie question but I want to pass params to controller not related with that view.\nI got view with Teams and controller where user adds own favourites teams by marking in Team index.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1105, "user_id": 391122, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/63c655bc5282d3f343574aef29de460a?s=128&d=identicon&r=PG", "display_name": "Jared", "link": "https://stackoverflow.com/users/391122/jared"}, "edited": false, "score": 3, "creation_date": 1447255819, "post_id": 33653652, "comment_id": 55081080, "body": "you can do user.errors to get the validations that fail"}, {"owner": {"reputation": 239, "user_id": 5272615, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1ba3cfad8a0a2c507b84dcf633a5a974?s=128&d=identicon&r=PG&f=1", "display_name": "O\u011fuz Tanr\u0131kulu", "link": "https://stackoverflow.com/users/5272615/o%c4%9fuz-tanr%c4%b1kulu"}, "reply_to_user": {"reputation": 1105, "user_id": 391122, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/63c655bc5282d3f343574aef29de460a?s=128&d=identicon&r=PG", "display_name": "Jared", "link": "https://stackoverflow.com/users/391122/jared"}, "edited": false, "score": 0, "creation_date": 1447256425, "post_id": 33653652, "comment_id": 55081520, "body": "i think the issue is that after getting object from database doesnt have password and passsword_confirmation and email_confirmation"}, {"owner": {"reputation": 3773, "user_id": 991903, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J12Hi.jpg?s=128&g=1", "display_name": "Meier", "link": "https://stackoverflow.com/users/991903/meier"}, "edited": false, "score": 0, "creation_date": 1447260469, "post_id": 33653652, "comment_id": 55084291, "body": "You think, or you know? Have you checked @user.errors ?"}], "answers": [{"comments": [{"owner": {"reputation": 239, "user_id": 5272615, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1ba3cfad8a0a2c507b84dcf633a5a974?s=128&d=identicon&r=PG&f=1", "display_name": "O\u011fuz Tanr\u0131kulu", "link": "https://stackoverflow.com/users/5272615/o%c4%9fuz-tanr%c4%b1kulu"}, "edited": false, "score": 0, "creation_date": 1447256923, "post_id": 33654176, "comment_id": 55081865, "body": "But i need to check if user tries to update password or email otherwise not."}], "tags": [], "owner": {"reputation": 566, "user_id": 4820428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a66b5402023aba0bbc0cc151f9e9402?s=128&d=identicon&r=PG", "display_name": "Olivier Buffon", "link": "https://stackoverflow.com/users/4820428/olivier-buffon"}, "is_accepted": false, "score": 1, "last_activity_date": 1447256438, "creation_date": 1447256438, "answer_id": 33654176, "question_id": 33653652, "link": "https://stackoverflow.com/questions/33653652/ruby-on-rails-update/33654176#33654176", "title": "Ruby on rails Update", "body": "<p>I guess you need to add <code>on: :create</code> param for each validations that only need to be run on create. \nFor example when you're doing <code>@user.valid?</code> I gess you don't want to check if password_confirmation is present.\nSo in this case it should be: \n<code>validates :password_confirmation, :email_confirmation, :presence =&gt; true, :on =&gt; :create</code></p>\n\n<p>Hope it helps :)</p>\n"}, {"tags": [], "owner": {"reputation": 3773, "user_id": 991903, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J12Hi.jpg?s=128&g=1", "display_name": "Meier", "link": "https://stackoverflow.com/users/991903/meier"}, "is_accepted": false, "score": 0, "last_activity_date": 1447260298, "last_edit_date": 1447260298, "creation_date": 1447259438, "answer_id": 33655182, "question_id": 33653652, "link": "https://stackoverflow.com/questions/33653652/ruby-on-rails-update/33655182#33655182", "title": "Ruby on rails Update", "body": "<p>There is a special validation for this use case, that the user should provide a confirmation, but the confirmation is not stored in the database</p>\n\n<pre><code>validates :email, confirmation: true, :uniqueness =&gt; true\nvalidates :password, confirmation: true, ....\n</code></pre>\n\n<p>This substitutes the validation for <code>:password_confirmation</code> and <code>:email_confirmation</code>, so you need also to remove them.</p>\n\n<p>See the fine rails guides <a href=\"http://guides.rubyonrails.org/active_record_validations.html#confirmation\" rel=\"nofollow\">http://guides.rubyonrails.org/active_record_validations.html#confirmation</a></p>\n"}], "owner": {"reputation": 239, "user_id": 5272615, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1ba3cfad8a0a2c507b84dcf633a5a974?s=128&d=identicon&r=PG&f=1", "display_name": "O\u011fuz Tanr\u0131kulu", "link": "https://stackoverflow.com/users/5272615/o%c4%9fuz-tanr%c4%b1kulu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1447260298, "creation_date": 1447255048, "last_edit_date": 1447258200, "question_id": 33653652, "link": "https://stackoverflow.com/questions/33653652/ruby-on-rails-update", "title": "Ruby on rails Update", "body": "<p>I have User model, it has some validations and they work on create. But when i call any user from database as <code>@user=User.find(1) @user.valid?</code> it returns false. Could you help me? </p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n\n  validates :name, :surname, :username,  :phone, :role, :gender, :presence =&gt; true\n\n  validates :password_confirmation, :email_confirmation, :presence =&gt; true\n\n  validates :username, :email, :uniqueness =&gt; true\n\n  validates :verified, :bulletin, :inclusion =&gt; { :in =&gt; [true, false] }\n\n  validates :password,:email, :confirmation =&gt; true\n\n  ....\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "string", "if-statement"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1447256429, "post_id": 33653529, "comment_id": 55081523, "body": "what do you want the result of these new prefix&#39;s to be?"}, {"owner": {"reputation": 3773, "user_id": 991903, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J12Hi.jpg?s=128&g=1", "display_name": "Meier", "link": "https://stackoverflow.com/users/991903/meier"}, "edited": false, "score": 0, "creation_date": 1447258000, "post_id": 33653529, "comment_id": 55082614, "body": "For code reviews there is another site:  <a href=\"http://codereview.stackexchange.com\">codereview.stackexchange.com</a>"}, {"owner": {"reputation": 9, "user_id": 5197443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16346f7a970a239897020f03ac93099d?s=128&d=identicon&r=PG&f=1", "display_name": "valadzko", "link": "https://stackoverflow.com/users/5197443/valadzko"}, "reply_to_user": {"reputation": 3773, "user_id": 991903, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J12Hi.jpg?s=128&g=1", "display_name": "Meier", "link": "https://stackoverflow.com/users/991903/meier"}, "edited": false, "score": 0, "creation_date": 1447314304, "post_id": 33653529, "comment_id": 55106034, "body": "@Meier thank you, I have never seen this site before! Awesome :)"}], "answers": [{"tags": [], "owner": {"reputation": 5355, "user_id": 452079, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4fb85f91e35202c72ca16d54873b10c4?s=128&d=identicon&r=PG", "display_name": "rohit89", "link": "https://stackoverflow.com/users/452079/rohit89"}, "is_accepted": true, "score": 5, "last_activity_date": 1447256521, "last_edit_date": 1447256521, "creation_date": 1447254882, "answer_id": 33653593, "question_id": 33653529, "link": "https://stackoverflow.com/questions/33653529/review-for-ruby-if-statement/33653593#33653593", "title": "Review for ruby &quot;if&quot; statement", "body": "<p><code>start_with?</code> can take multiple strings as argument</p>\n\n<pre><code>@source = @path.start_with?(\"scp\", \"http\") ? \"url\" : \"local\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 0, "last_activity_date": 1447313989, "last_edit_date": 1447313989, "creation_date": 1447274264, "answer_id": 33659381, "question_id": 33653529, "link": "https://stackoverflow.com/questions/33653529/review-for-ruby-if-statement/33659381#33659381", "title": "Review for ruby &quot;if&quot; statement", "body": "<p>It might makes sense to extract the prefixes into an array first when the list gets longer:</p>\n\n<pre><code>URL_PREFIXES = %w[ scp http ]\n</code></pre>\n\n<p>I can think of serveral ways to use that <code>URL_PREFIXES</code> constant. For example I often prefer <code>if...else</code> blocks over one liner of readability reasons:</p>\n\n<pre><code>if URL_PREFIXES.any? { |p| @path.start_with?(p) }\n  @source = 'url'\nelse\n  @source = 'local'\nend\n</code></pre>\n\n<p>Or this:</p>\n\n<pre><code>@source = 'local'\n@source = 'url' if URL_PREFIXES.any? { |p| @path.start_with?(p) }\n</code></pre>\n\n<p>Or determine the prefix first:</p>\n\n<pre><code>prefix  = @path.split(':').first\n@source = URL_PREFIXES.include?(prefix) ? 'url' : 'local'\n</code></pre>\n\n<p>If you are working with Rails you might want to write this instead:</p>\n\n<pre><code>prefix  = @path.split(':').first\n@source = prefix.in?(URL_PREFIXES) ? 'url' : 'local'\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 5197443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16346f7a970a239897020f03ac93099d?s=128&d=identicon&r=PG&f=1", "display_name": "valadzko", "link": "https://stackoverflow.com/users/5197443/valadzko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 33653593, "answer_count": 2, "score": 1, "last_activity_date": 1447313989, "creation_date": 1447254708, "question_id": 33653529, "link": "https://stackoverflow.com/questions/33653529/review-for-ruby-if-statement", "title": "Review for ruby &quot;if&quot; statement", "body": "<p>do you have any suggestions for making this <code>if</code> condition shorter (more elegant) somehow?</p>\n\n<pre><code>if (@path.start_with? \"scp\" || @path.start_with? \"http\")\n  @source = \"url\"\nelse\n  @source = \"local\"\nend\n</code></pre>\n\n<p>What if I have few more prefix to check (let's  say ftp1, ftp2, and ftp3)?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "capybara", "capybara-webkit"], "answers": [{"comments": [{"owner": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "edited": false, "score": 2, "creation_date": 1447256427, "post_id": 33653629, "comment_id": 55081522, "body": "Hey! Thanks for the answer! As i told you, I have the spec_helper with my capybara config, but i&#39;d like to change it just for a SINGLE test"}, {"owner": {"reputation": 562, "user_id": 1112633, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a3a8118d83fd2bf1975c210bd1fa531d?s=128&d=identicon&r=PG", "display_name": "MC2DX", "link": "https://stackoverflow.com/users/1112633/mc2dx"}, "reply_to_user": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "edited": false, "score": 0, "creation_date": 1447256981, "post_id": 33653629, "comment_id": 55081907, "body": "Try to move capybara configs above <code>describe</code> section, frankly speaking, I had never tried this but it could help a little bit."}], "tags": [], "owner": {"reputation": 562, "user_id": 1112633, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a3a8118d83fd2bf1975c210bd1fa531d?s=128&d=identicon&r=PG", "display_name": "MC2DX", "link": "https://stackoverflow.com/users/1112633/mc2dx"}, "is_accepted": false, "score": 0, "last_activity_date": 1447255492, "last_edit_date": 1447255492, "creation_date": 1447254993, "answer_id": 33653629, "question_id": 33653021, "link": "https://stackoverflow.com/questions/33653021/capybara-config-for-a-single-test/33653629#33653629", "title": "Capybara config for a single test", "body": "<p>You should put it in <code>spec/spec_helper.rb</code>, you can use <code>rspec --init</code> to generate these files and then add capybara's configs here. Your approach is wrong, it is not a good idea to store this information in this spec file.</p>\n\n<p>Edit:</p>\n\n<p>Below is my <code>spec/spec_helper.rb</code></p>\n\n<pre><code>$ cat spec/spec_helper.rb\nrequire 'vcr'\n\nRSpec.configure do |config|\n  config.expect_with :rspec do |expectations|\n    expectations.include_chain_clauses_in_custom_matcher_descriptions = true\n  end\n\n  config.mock_with :rspec do |mocks|\n    mocks.verify_partial_doubles = true\n  end\nend\n\nVCR.configure do |config|\n  config.cassette_library_dir = \"spec/fixtures/vcr_cassettes\"\n  config.hook_into :webmock\n  config.ignore_localhost = true\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "edited": false, "score": 0, "creation_date": 1447262158, "post_id": 33655924, "comment_id": 55085338, "body": "Thanks for the answer! The test passes but I get this: &quot;[DEPRECATION] allow_unknown_urls is deprecated. Please use Capybara::Webkit.configure instead&quot;"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "edited": false, "score": 1, "creation_date": 1447262261, "post_id": 33655924, "comment_id": 55085400, "body": "Yes - I should have mentioned that - I don&#39;t think there really is an easy replacement yet - other than register a second driver instance with different options"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "edited": false, "score": 3, "creation_date": 1447263006, "post_id": 33655924, "comment_id": 55085834, "body": "@fabersky You can follow part of the discussion about why there is/is not an easy way to modify the options per test at <a href=\"https://github.com/thoughtbot/capybara-webkit/issues/814\" rel=\"nofollow noreferrer\">github.com/thoughtbot/capybara-webkit/issues/814</a> ."}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 3, "last_activity_date": 1447261802, "creation_date": 1447261802, "answer_id": 33655924, "question_id": 33653021, "link": "https://stackoverflow.com/questions/33653021/capybara-config-for-a-single-test/33655924#33655924", "title": "Capybara config for a single test", "body": "<p>for a single test you can just call allow_unknown_urls on the driver, and use the Capybara.using_wait_time to override the default wait time for the block</p>\n\n<pre><code>describe \"test\", :js =&gt; true do\n  it \"test\" do\n    page.driver.allow_unknown_urls\n    using_wait_time(3) do\n      my test\n    end\n end\n it \"test2\" do\n   ...\n end\nend\n</code></pre>\n"}], "owner": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1055, "favorite_count": 0, "accepted_answer_id": 33655924, "answer_count": 2, "score": 4, "last_activity_date": 1447261802, "creation_date": 1447253191, "last_edit_date": 1447256417, "question_id": 33653021, "link": "https://stackoverflow.com/questions/33653021/capybara-config-for-a-single-test", "title": "Capybara config for a single test", "body": "<p>I'm trying to</p>\n\n<pre><code>describe \"test\", :js =&gt; true do\n it \"test\" do\n\n  Capybara.default_max_wait_time = 3\n  Capybara::Webkit.configure do |config|\n   config.allow_unknown_urls\n  end\n\n  my test\n end\n it \"test2\" do\n  ...\n end\nend\n</code></pre>\n\n<p>to replace the capybara config that i have in spec_helper just for a single test, but i'm getting the error \"All configuration must take place before the driver starts\".</p>\n\n<p>This is my spec_helper</p>\n\n<pre><code>   Capybara.run_server = false\n   Capybara.default_max_wait_time = 1\n   Capybara.javascript_driver = :webkit_with_qt_plugin_messages_suppressed\n\n   Capybara::Webkit.configure do |config|\n    config.block_unknown_urls\n   end\n\n   RSpec.configure do |config|\n    config.include Capybara::DSL\n   end\n</code></pre>\n\n<p>Is there a way to do it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "each"], "answers": [{"comments": [{"owner": {"reputation": 3805, "user_id": 2075801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f845c96122bd745f0614185a840d850b?s=128&d=identicon&r=PG", "display_name": "Yury Lebedev", "link": "https://stackoverflow.com/users/2075801/yury-lebedev"}, "edited": false, "score": 0, "creation_date": 1447252936, "post_id": 33652801, "comment_id": 55079090, "body": "<code>compact</code> will also not modify the initial array, so i guess that would be the best solution here"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 4, "last_activity_date": 1447252521, "creation_date": 1447252521, "answer_id": 33652801, "question_id": 33652774, "link": "https://stackoverflow.com/questions/33652774/rails-each-discard-item-nil/33652801#33652801", "title": "Rails each discard item nil", "body": "<p>Just use <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-compact\" rel=\"nofollow\"><code>compact</code></a> to remove <code>nil</code> values:</p>\n\n<pre><code>[nil, nil, object, object, nil, object].compact\n#=&gt; [object, object, object]\n</code></pre>\n\n<p>In combination with <code>each</code>:</p>\n\n<pre><code>[nil, nil, object, object, nil, object].compact.each do |obj|\n  # ...\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 562, "user_id": 1112633, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a3a8118d83fd2bf1975c210bd1fa531d?s=128&d=identicon&r=PG", "display_name": "MC2DX", "link": "https://stackoverflow.com/users/1112633/mc2dx"}, "is_accepted": false, "score": 1, "last_activity_date": 1447255722, "creation_date": 1447255722, "answer_id": 33653921, "question_id": 33652774, "link": "https://stackoverflow.com/questions/33652774/rails-each-discard-item-nil/33653921#33653921", "title": "Rails each discard item nil", "body": "<p><code>reject</code> also is a good method to remove <code>nil</code> values from ex. array</p>\n\n<pre><code>&gt; [1,2,3,nil,nil,3,nil,3,nil].reject { |x| x.nil? }\n=&gt; [1, 2, 3, 3, 3]\n</code></pre>\n\n<p>in a block you can write more code to better operating on data.</p>\n"}], "owner": {"reputation": 29, "user_id": 5077857, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-M6RrquJTJMQ/AAAAAAAAAAI/AAAAAAAAARM/o09UhCmjSHk/photo.jpg?sz=128", "display_name": "Bosses", "link": "https://stackoverflow.com/users/5077857/bosses"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 1, "accepted_answer_id": 33652801, "answer_count": 2, "score": 2, "last_activity_date": 1447255722, "creation_date": 1447252439, "question_id": 33652774, "link": "https://stackoverflow.com/questions/33652774/rails-each-discard-item-nil", "title": "Rails each discard item nil", "body": "<p>I have the next array</p>\n\n<pre><code>[nil,nil,object,object,nil,object]\n</code></pre>\n\n<p>are there any way to do an each who omit the nil values?</p>\n"}, {"tags": ["ruby", "phantomjs", "cucumber", "capybara", "poltergeist"], "comments": [{"owner": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 1, "creation_date": 1447254287, "post_id": 33652478, "comment_id": 55080029, "body": "Why do not use binary phantomjs that is ready to use from there: <a href=\"http://phantomjs.org/download.html\" rel=\"nofollow noreferrer\">phantomjs.org/download.html</a> ?"}, {"owner": {"reputation": 255, "user_id": 592921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e732u.jpg?s=128&g=1", "display_name": "stew", "link": "https://stackoverflow.com/users/592921/stew"}, "reply_to_user": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 0, "creation_date": 1447255946, "post_id": 33652478, "comment_id": 55081176, "body": "Thanks, tried that still no luck with original problem"}], "owner": {"reputation": 255, "user_id": 592921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e732u.jpg?s=128&g=1", "display_name": "stew", "link": "https://stackoverflow.com/users/592921/stew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 307, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1447251479, "creation_date": 1447251479, "question_id": 33652478, "link": "https://stackoverflow.com/questions/33652478/how-to-debug-phantom-js-poltergeist-issues-after-upgrade-to-os-x-10-11", "title": "How to debug Phantom JS / Poltergeist Issues after upgrade to OS X 10.11", "body": "<p>Not sure if this is related to my upgrade to El Capitan but all of a sudden my Feature and Integration tests have started to fail.</p>\n\n<p>My cucumber tests are failing with:</p>\n\n<pre><code>Capybara::Driver::Base#evaluate_script (Capybara::NotSupportedByDriverError)\n</code></pre>\n\n<p>and my features fail with:</p>\n\n<pre><code>Capybara::Poltergeist::JavascriptError\n</code></pre>\n\n<p>I appreciate phantomjs is no longer supported with <code>homebrew</code> so I installed it with <code>npm install -g phantomjs</code>. I also tried installing phantomjs2 but that just hangs during the install.</p>\n\n<p>Is there an easy way to verify that my phantomjs is installed correctly for a start? Do I need to persist and get phantomjs2 installed?</p>\n\n<p>Capybara and poltergeist versions are:</p>\n\n<pre><code>   capybara (2.4.4)\n   capybara-mechanize (1.4.0)\n   capybara-screenshot (1.0.11)\n   poltergeist (1.7.0)\n</code></pre>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["ruby", "class", "methods"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1447252286, "post_id": 33652469, "comment_id": 55078689, "body": "You are not capturing these anywhere. Right now you are creating 10 Boos but they are not stored and will be quickly picked up by the GC. General rule Learn Ruby first then learn rails. this will be extremely beneficial to you and there are a ton of great resources."}, {"owner": {"reputation": 373, "user_id": 3665315, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6e3abc9250357084f2eb535eeb26ac82?s=128&d=identicon&r=PG&f=1", "display_name": "Syk", "link": "https://stackoverflow.com/users/3665315/syk"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1447252432, "post_id": 33652469, "comment_id": 55078759, "body": "I already wrote an <code>all</code> method that gives me back all the object in one array. Just not sure how to pick the right one now."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1447252512, "post_id": 33652469, "comment_id": 55078815, "body": "Your code shows none of this and is malformed as is. Please show us your actual code or at least fix what is here first."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1447252823, "post_id": 33652469, "comment_id": 55079014, "body": "I just read your update and you seem to misunderstand PORO vs ActiveRecord Objects. <code>Boo.find_by_xxx</code> will not do what you want because this relies on AR and SQL. What you have here the best way to implement would be an instance method of Foo."}, {"owner": {"reputation": 3773, "user_id": 991903, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J12Hi.jpg?s=128&g=1", "display_name": "Meier", "link": "https://stackoverflow.com/users/991903/meier"}, "edited": false, "score": 0, "creation_date": 1447254325, "post_id": 33652469, "comment_id": 55080051, "body": "Object oriented design is about responsibilities. Somebody need to be responsible to hold and maintain access to your Boos. Maybe Foo, maybe the Boo class, maybe some other class, maybe even a global variable. It depends on your problem. Just misusing ObjectSpace is the worst option."}], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1447252609, "post_id": 33652763, "comment_id": 55078871, "body": "This still does nothing as the instance of Foo creates 10 Boos but does not retain them. <code>each</code> will just discard these objects in <code>Foo::initialize</code>"}], "tags": [], "owner": {"reputation": 255, "user_id": 592921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e732u.jpg?s=128&g=1", "display_name": "stew", "link": "https://stackoverflow.com/users/592921/stew"}, "is_accepted": false, "score": 0, "last_activity_date": 1447252414, "creation_date": 1447252414, "answer_id": 33652763, "question_id": 33652469, "link": "https://stackoverflow.com/questions/33652469/find-certain-object-in-ruby/33652763#33652763", "title": "Find certain object in Ruby", "body": "<p>Not sure I 100% understand your question but using <code>attr_reader</code> in <code>Boo</code> will allow you to access <code>a</code> as if it were a function.</p>\n\n<pre><code>class Foo\n  def initialize(k)\n    (1..k).each do |b|\n       Boo.new(b)\n    end\n  end\nend\n\nclass Boo\n  attr_reader :a\n\n  def initialize(a)\n    @a = a\n  end\nend\n\nFoo.new(10)\n</code></pre>\n\n<p>As for the other part of your question, here is a good article explaining <a href=\"http://blog.hasmanythrough.com/2006/8/13/how-dynamic-finders-work\" rel=\"nofollow\">how dynamic finders work</a></p>\n"}, {"comments": [{"owner": {"reputation": 373, "user_id": 3665315, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6e3abc9250357084f2eb535eeb26ac82?s=128&d=identicon&r=PG&f=1", "display_name": "Syk", "link": "https://stackoverflow.com/users/3665315/syk"}, "edited": false, "score": 0, "creation_date": 1447253061, "post_id": 33652917, "comment_id": 55079178, "body": "Haha look at my update I got the smaller parts but your answer puts it together for me. Big thanks !! Small question. What if I already have the .all method as shown in my update."}, {"owner": {"reputation": 139, "user_id": 5546849, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-deVCyGFys1Q/AAAAAAAAAAI/AAAAAAAAAAA/l2_pzCIBU0I/photo.jpg?sz=128", "display_name": "Marcelo Xavier", "link": "https://stackoverflow.com/users/5546849/marcelo-xavier"}, "reply_to_user": {"reputation": 373, "user_id": 3665315, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6e3abc9250357084f2eb535eeb26ac82?s=128&d=identicon&r=PG&f=1", "display_name": "Syk", "link": "https://stackoverflow.com/users/3665315/syk"}, "edited": false, "score": 0, "creation_date": 1447253182, "post_id": 33652917, "comment_id": 55079257, "body": "Nice! I&#39;m  equally glad that you have found the answer by yourself and that my sample helped. =D"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1447253258, "post_id": 33652917, "comment_id": 55079300, "body": "Do not rely on <code>ObjectSpace</code> when the GC collects you will lose these objects because Ruby sees them as unneeded."}, {"owner": {"reputation": 139, "user_id": 5546849, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-deVCyGFys1Q/AAAAAAAAAAI/AAAAAAAAAAA/l2_pzCIBU0I/photo.jpg?sz=128", "display_name": "Marcelo Xavier", "link": "https://stackoverflow.com/users/5546849/marcelo-xavier"}, "edited": false, "score": 0, "creation_date": 1447253386, "post_id": 33652917, "comment_id": 55079389, "body": "Only if the objects are really not being used, right engineersmnky?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1447253501, "post_id": 33652917, "comment_id": 55079471, "body": "Try this for example <code>100.times { Boo.new }; ObjectSpace.each_object(Boo).count #=&gt; possibly 100 if GC hasn&#39;t started; GC.start; ObjectSpace.each_object(Boo).count  #=&gt; 0</code>. This is because the <code>Boo</code> Objects are seen as disposable and marked for GC then when GC runs it disposes of these objects. (BTW do not force GC to run in general this is just an example)"}, {"owner": {"reputation": 139, "user_id": 5546849, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-deVCyGFys1Q/AAAAAAAAAAI/AAAAAAAAAAA/l2_pzCIBU0I/photo.jpg?sz=128", "display_name": "Marcelo Xavier", "link": "https://stackoverflow.com/users/5546849/marcelo-xavier"}, "edited": false, "score": 0, "creation_date": 1447254668, "post_id": 33652917, "comment_id": 55080302, "body": "I agree with you, engineersmnky. What I meant is, if I have some unreferenced objects then I would probably want to avoid to find it. Anyway, if you need to keep even the unused objects then you should listen to engineersmnky and keep the instances control inside your code, in a set, for example, Syk."}], "tags": [], "owner": {"reputation": 139, "user_id": 5546849, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-deVCyGFys1Q/AAAAAAAAAAI/AAAAAAAAAAA/l2_pzCIBU0I/photo.jpg?sz=128", "display_name": "Marcelo Xavier", "link": "https://stackoverflow.com/users/5546849/marcelo-xavier"}, "is_accepted": false, "score": 1, "last_activity_date": 1447253075, "last_edit_date": 1447253075, "creation_date": 1447252887, "answer_id": 33652917, "question_id": 33652469, "link": "https://stackoverflow.com/questions/33652469/find-certain-object-in-ruby/33652917#33652917", "title": "Find certain object in Ruby", "body": "<p>If I did understand what you need then I think that you can use <strong>ObjectSpace</strong> to achieve this. This is the sample code that illustrates the use:</p>\n\n<pre><code>class Foo\n  def initialize(k)\n    (1..k).each do |b|\n       Boo.new(b)\n    end\n  end\nend\n\nclass Boo\n  attr_reader :a\n  def initialize(a)\n    @a = a\n  end\n\n def self.find(value)\n   ObjectSpace.each_object(Boo).select { |b| b.a == value }.first\n end\nend\nFoo.new(10)\nBoo.find(2).a\n</code></pre>\n\n<p>Let me know if this is the solution you were looking for.</p>\n"}, {"comments": [{"owner": {"reputation": 373, "user_id": 3665315, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6e3abc9250357084f2eb535eeb26ac82?s=128&d=identicon&r=PG&f=1", "display_name": "Syk", "link": "https://stackoverflow.com/users/3665315/syk"}, "edited": false, "score": 0, "creation_date": 1447260716, "post_id": 33653015, "comment_id": 55084459, "body": "I used this answer in the end and it worked very well. Thanks for this!"}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 3, "last_activity_date": 1447261412, "last_edit_date": 1447261412, "creation_date": 1447253174, "answer_id": 33653015, "question_id": 33652469, "link": "https://stackoverflow.com/questions/33652469/find-certain-object-in-ruby/33653015#33653015", "title": "Find certain object in Ruby", "body": "<p><strong>DO NOT RELY ON <code>ObjectSpace</code> for this functionality when the GC collects you will lose these objects because Ruby sees them as unneeded.</strong> </p>\n\n<p>This is the general concept of what you are intending to do </p>\n\n<pre><code>class Foo \n  attr_reader :boos\n  def initialize(k)\n    @boos = (1..k).map {|b| Boo.new(b) } \n  end\n  def find_boo_with(x)\n    @boos.find {|b| b.a == x }\n  end\nend\n\nclass Boo\n  attr_reader :a\n  def initialize(a)\n    @a = a\n  end\nend\n</code></pre>\n\n<p>Then you can do this </p>\n\n<pre><code>f = Foo.new(10)\nf.boos\n#=&gt; [#&lt;Boo:0x256f428 @a=1&gt;,\n     #&lt;Boo:0x256f3b0 @a=2&gt;,\n     #&lt;Boo:0x256f368 @a=3&gt;,\n     #&lt;Boo:0x256f338 @a=4&gt;,\n     #&lt;Boo:0x256f2f0 @a=5&gt;,\n     #&lt;Boo:0x256f2d8 @a=6&gt;,\n     #&lt;Boo:0x256f2a8 @a=7&gt;,\n     #&lt;Boo:0x256f290 @a=8&gt;,\n     #&lt;Boo:0x256f278 @a=9&gt;,\n     #&lt;Boo:0x256f260 @a=10&gt;]\nf.find_boo_with(9)\n#=&gt; #&lt;Boo:0x256f278 @a=9&gt;\n</code></pre>\n\n<p>I hope this helps but you really should look into something like RubyMonk, or TryRuby to get a better understanding of how PORO (Plain Old Ruby Objects) work.</p>\n\n<p>You could also do it this way if you really wanted your <code>find</code> methodology just know that no <code>Boo</code> in this case will ever be collected as they will all be stored in a class instance variable called <code>@all_boos</code> which could casue memory issues depending on what a <code>Boo</code> is and how many of them you are creating.</p>\n\n<pre><code>class Boo\n   class &lt;&lt; self\n      def all_boos\n        @all_boos ||= []\n      end\n      def find(x)\n        @all_boos.find {|boo| boo.a == x }\n      end\n      alias_method :all, :all_boos\n   end\n   attr_reader :a\n   def initialize(a)\n     @a = a\n     self.class.all_boos &lt;&lt; self\n   end\nend\n</code></pre>\n\n<p>Then you can do </p>\n\n<pre><code>10.times {|i| Boo.new(i) }\nBoo.all\n#=&gt; [#&lt;Boo:0x256f428 @a=1&gt;,\n     #&lt;Boo:0x256f3b0 @a=2&gt;,\n     #&lt;Boo:0x256f368 @a=3&gt;,\n     #&lt;Boo:0x256f338 @a=4&gt;,\n     #&lt;Boo:0x256f2f0 @a=5&gt;,\n     #&lt;Boo:0x256f2d8 @a=6&gt;,\n     #&lt;Boo:0x256f2a8 @a=7&gt;,\n     #&lt;Boo:0x256f290 @a=8&gt;,\n     #&lt;Boo:0x256f278 @a=9&gt;,\n     #&lt;Boo:0x256f260 @a=10&gt;] \nBoo.find(9)\n#=&gt;  #&lt;Boo:0x256f278 @a=9&gt;\n</code></pre>\n"}], "owner": {"reputation": 373, "user_id": 3665315, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6e3abc9250357084f2eb535eeb26ac82?s=128&d=identicon&r=PG&f=1", "display_name": "Syk", "link": "https://stackoverflow.com/users/3665315/syk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "accepted_answer_id": 33653015, "answer_count": 3, "score": 0, "last_activity_date": 1447261412, "creation_date": 1447251441, "last_edit_date": 1447253014, "question_id": 33652469, "link": "https://stackoverflow.com/questions/33652469/find-certain-object-in-ruby", "title": "Find certain object in Ruby", "body": "<p>Always working with Rails but now that I am coding completely without framework I am missing a lot of methods that I am not able to write myself. So I need a little hint here.</p>\n\n<p>So I've got this code</p>\n\n<pre><code>class Foo\n   initialize(k)\n    (1..k).each do |b|\n       Boo.new(b)\n    end\nend\n\nclass Boo\n  initialize(a)\n    @a = a\n  end\nend\n\nFoo.new(10)\n#and now I want to access one of the Boo's with a certain a (in Rails Boo.find_by_a(2) e.g.)\n</code></pre>\n\n<p>How do I write a method that uses a certain value \"a\" to get the specific Boo back with @a = a?</p>\n\n<p>Update:</p>\n\n<p>Okay I added this methot to Boo</p>\n\n<pre><code>  def self.all\n    ObjectSpace.each_object(self).to_a\n  end\n</code></pre>\n\n<p>And now I get the right object by:</p>\n\n<pre><code>boo = Boo.all.select{ |b| b.a == 2 }.first\n</code></pre>\n\n<p>But if I want this to be a method, where would i put it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "friendly-id"], "answers": [{"comments": [{"owner": {"reputation": 640, "user_id": 2326613, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5f0821b3c32c0537c027a657ec7e977b?s=128&d=identicon&r=PG", "display_name": "JosephK", "link": "https://stackoverflow.com/users/2326613/josephk"}, "edited": false, "score": 1, "creation_date": 1576572149, "post_id": 33652486, "comment_id": 104933669, "body": "This needs to be added here in BOLD:  <a href=\"https://norman.github.io/friendly_id/FriendlyId/History.html\" rel=\"nofollow noreferrer\">norman.github.io/friendly_id/FriendlyId/History.html</a> -  Thanks very much for this answer."}], "tags": [], "owner": {"reputation": 51, "user_id": 5550787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ace20b23e47675bff66ff9daf3e3cb7?s=128&d=identicon&r=PG", "display_name": "Keith O&#39;Malley", "link": "https://stackoverflow.com/users/5550787/keith-omalley"}, "is_accepted": true, "score": 3, "last_activity_date": 1447251520, "creation_date": 1447251520, "answer_id": 33652486, "question_id": 33652457, "link": "https://stackoverflow.com/questions/33652457/friendly-id-5-1-0-using-history-with-finders/33652486#33652486", "title": "friendly_id 5.1.0 using history with finders", "body": "<p>I've figured it out, history needs to be defined before finders in the Model</p>\n\n<pre><code>friendly_id :title, use: [:slugged, :history, :finders]\n</code></pre>\n\n<p>Everything's working now :)</p>\n"}], "owner": {"reputation": 51, "user_id": 5550787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ace20b23e47675bff66ff9daf3e3cb7?s=128&d=identicon&r=PG", "display_name": "Keith O&#39;Malley", "link": "https://stackoverflow.com/users/5550787/keith-omalley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 509, "favorite_count": 0, "accepted_answer_id": 33652486, "answer_count": 1, "score": 2, "last_activity_date": 1454456850, "creation_date": 1447251399, "last_edit_date": 1454456850, "question_id": 33652457, "link": "https://stackoverflow.com/questions/33652457/friendly-id-5-1-0-using-history-with-finders", "title": "friendly_id 5.1.0 using history with finders", "body": "<p>I'm using the <code>friendly_id</code> gem for the first time in a Rails 4.1.6 project, and trying to use <code>finders</code>, <code>history</code>, and <code>sluggable</code> together, but <code>history</code> doesn't seem to be working.</p>\n\n<p>I set it up following the railscast tutorial and added <code>finders</code> in to my Model's <code>friendly_id</code> definition:</p>\n\n<pre><code>extend FriendlyId\nfriendly_id :title, use: [:slugged, :finders, :history]\ndef should_generate_new_friendly_id?\n    slug.blank? || title_changed?\nend\n</code></pre>\n\n<p>As well as adding in the method from the <code>friendly_id.rb</code> initialiser to allow for making a new slug every time the title attribute changes</p>\n\n<p>I've added the slug to the database, migrated, ran <code>rails g friendly_id</code> and saved each of the model to create their slug and friendly_id_slug, just not sure why <code>history</code> won't work!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "regex"], "answers": [{"comments": [{"owner": {"reputation": 2231, "user_id": 1238868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b9884f1eabc8587f2c9dfd2b1ccf9a6?s=128&d=identicon&r=PG", "display_name": "Michael Chaney", "link": "https://stackoverflow.com/users/1238868/michael-chaney"}, "edited": false, "score": 0, "creation_date": 1447250659, "post_id": 33652217, "comment_id": 55077615, "body": "Exactly.  Note that <code>File.new</code> is extraneous, too.  Just substitute <code>File.join(dir, &#39;myfile.txt&#39;)</code> into &quot;path&quot; in the above code."}], "tags": [], "owner": {"reputation": 971, "user_id": 2597718, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/451afe490759d58b0f61b2dd5b47ff8a?s=128&d=identicon&r=PG", "display_name": "Shouichi", "link": "https://stackoverflow.com/users/2597718/shouichi"}, "is_accepted": true, "score": 1, "last_activity_date": 1447250595, "creation_date": 1447250595, "answer_id": 33652217, "question_id": 33652105, "link": "https://stackoverflow.com/questions/33652105/write-into-files-created-by-ruby/33652217#33652217", "title": "write into files created by ruby", "body": "<p><code>File#open</code> doesn't handle <code>*</code> like <code>Dir#[]</code> does. You need to pass the exact file path.</p>\n\n<pre><code>Dir['../../../../../TESTS/Test_*/*/'].each do |path|\n  File.open(path, 'w+') { |f| f.puts \"HELLO\" }\nend\n</code></pre>\n"}], "owner": {"reputation": 729, "user_id": 5135400, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/340af7d7f56355c39b56f926cae83c0d?s=128&d=identicon&r=PG&f=1", "display_name": "JohnDoe", "link": "https://stackoverflow.com/users/5135400/johndoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 33652217, "answer_count": 1, "score": 0, "last_activity_date": 1447250595, "creation_date": 1447250267, "last_edit_date": 1447250428, "question_id": 33652105, "link": "https://stackoverflow.com/questions/33652105/write-into-files-created-by-ruby", "title": "write into files created by ruby", "body": "<p>I have directory structure as follow:</p>\n\n<pre><code>../../../../../TESTS/Test_A/myTest_A/\n../../../../../TESTS/Test_B/myTest_B/\n../../../../../TESTS/Test_C/myTest_C/\n../../../../../TESTS/Test_D/myTest_D/\n</code></pre>\n\n<p>Into each of them I create a file \"myfile.txt\" using the following ruby code:</p>\n\n<pre><code>Dir['../../../../../TESTS/Test_*/*/'].each do |dir|\n  File.new File.join(dir, 'myfile.txt'), 'w+'\nend\n</code></pre>\n\n<p>so far it works. Now I would like also to write something into the files accordingly after creation, the code looks now:</p>\n\n<pre><code>Dir['../../../../../TESTS/Test_*/*/'].each do |dir|\n  File.new File.join(dir, 'myfile.txt'), 'w+'\n  File.open('../../../../../TESTS/Test_*/*/myfile.txt','w+') do |f| \n    f.puts \"HELLO\"\n  end\nend\n</code></pre>\n\n<p>The files are empty? Where is the problem?</p>\n"}, {"tags": ["sql", "ruby", "postgresql", "sequel"], "comments": [{"owner": {"reputation": 11986, "user_id": 812837, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2l9uC.jpg?s=128&g=1", "display_name": "Clockwork-Muse", "link": "https://stackoverflow.com/users/812837/clockwork-muse"}, "edited": false, "score": 0, "creation_date": 1447251000, "post_id": 33652074, "comment_id": 55077829, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/2594829/finding-duplicate-values-in-a-sql-table\">Finding duplicate values in a SQL table</a>"}, {"owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "reply_to_user": {"reputation": 11986, "user_id": 812837, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2l9uC.jpg?s=128&g=1", "display_name": "Clockwork-Muse", "link": "https://stackoverflow.com/users/812837/clockwork-muse"}, "edited": false, "score": 0, "creation_date": 1447251522, "post_id": 33652074, "comment_id": 55078180, "body": "My example is bit more advanced than in that topic that You linked and I have to use Sequel."}], "owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1447250163, "creation_date": 1447250163, "question_id": 33652074, "link": "https://stackoverflow.com/questions/33652074/check-uniqness-of-data-with-sequel", "title": "Check uniqness of data with Sequel", "body": "<p>I use the PostgreSQL database with Sequel. I have the following data in my table: <code>table.all</code> returns following data:</p>\n\n<pre><code>  [{:id=&gt;1,\n  :identifier=&gt;\"identifier\",\n  :first_name=&gt;\"First\",\n  :middle_name=&gt;\"M.\",\n  :last_name=&gt;\"Last 2\",\n  :email=&gt;\"some@email.com\"},\n {:id=&gt;2,\n  :identifier=&gt;\"identifier\",\n  :first_name=&gt;\"First 2\",\n  :middle_name=&gt;\"A.\",\n  :last_name=&gt;\"Last2 \",\n  :email=&gt;\"some@email2.com\"}]\n</code></pre>\n\n<p>Now I want to find ids of record which identifier belongs to more than one first_name - last_name combination. So in this example we have two records with the same identifier but different first and last names. Is there any way to do this in Sequel?</p>\n"}, {"tags": ["ruby", "command-line-interface", "config", "nconf"], "comments": [{"owner": {"reputation": 4978, "user_id": 3033649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d885e80c88f3969d451d513c6a73c802?s=128&d=identicon&r=PG", "display_name": "markets", "link": "https://stackoverflow.com/users/3033649/markets"}, "edited": false, "score": 1, "creation_date": 1447343951, "post_id": 33651553, "comment_id": 55124485, "body": "Yes, take a look here: <a href=\"http://awesome-ruby.com/#awesome-ruby-configuration\" rel=\"nofollow noreferrer\">awesome-ruby.com/#awesome-ruby-configuration</a>. If you&#39;re building a CLI tool, also check: <a href=\"http://awesome-ruby.com/#awesome-ruby-cli-builder\" rel=\"nofollow noreferrer\">awesome-ruby.com/#awesome-ruby-cli-builder</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3751, "user_id": 454615, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/454cea4c773e4e7ef6ceeb7ef0e18bd9?s=128&d=identicon&r=PG", "display_name": "airtonix", "link": "https://stackoverflow.com/users/454615/airtonix"}, "is_accepted": false, "score": 0, "last_activity_date": 1614298986, "last_edit_date": 1614298986, "creation_date": 1614221608, "answer_id": 66361718, "question_id": 33651553, "link": "https://stackoverflow.com/questions/33651553/nconf-js-like-gem-for-ruby-configuration/66361718#66361718", "title": "nconf.js like gem for ruby configuration", "body": "<p>The actual answer is this:</p>\n<p>updated: 2020-02-26</p>\n<p><a href=\"https://github.com/infochimps-labs/configliere\" rel=\"nofollow noreferrer\">https://github.com/infochimps-labs/configliere</a></p>\n<p>to quote the author:</p>\n<blockquote>\n<p>Be willing to sit down with the Five Families. Takes settings from (at your option):</p>\n<ul>\n<li>Pre-defined defaults from constants</li>\n<li>Simple config files</li>\n<li>Environment variables</li>\n<li>Commandline options and git-style command runners</li>\n<li>Ruby block (called when all other options are in place)</li>\n</ul>\n</blockquote>\n<p>put simply. just like nconf.</p>\n<pre class=\"lang-rb prettyprint-override\"><code>require 'configliere'\n\nSettings.use :commandline\nSettings({\n    :dest_time =&gt; '11-05-1955',\n    :fluxcapacitor =&gt; {\n        :speed =&gt; 88,\n    },\n    :delorean =&gt; {\n        :power_source =&gt; 'plutonium',\n        :roads_needed =&gt; true,\n    },\n    :username =&gt; 'marty',\n    :password =&gt; '',\n})\n\n#set a value to possibly also come from env\nSettings.define :dest_time,   :env_var =&gt; 'DEST_TIME'\n\nSettings.read &quot;#{__dir__}/config.yml&quot;\nSettings.read &quot;#{Dir.pwd()}/config.yml&quot;\nSettings.resolve!\n\n</code></pre>\n<p>old answer:</p>\n<p><a href=\"https://github.com/rubyconfig/config#working-with-environment-variables\" rel=\"nofollow noreferrer\">https://github.com/rubyconfig/config#working-with-environment-variables</a></p>\n<p>it doesn't do argv, but it lets you layer various yaml files and then override with ENV just like nconf lets you.</p>\n"}], "owner": {"reputation": 3522, "user_id": 1806019, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/D7C8W.jpg?s=128&g=1", "display_name": "AdrieanKhisbe", "link": "https://stackoverflow.com/users/1806019/adrieankhisbe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1614298986, "creation_date": 1447248449, "question_id": 33651553, "link": "https://stackoverflow.com/questions/33651553/nconf-js-like-gem-for-ruby-configuration", "title": "nconf.js like gem for ruby configuration", "body": "<p>I'm building a cli tool in ruby, and I need to take config from different sources: environment variable, dotfile, arguments or hardcoded values. (with a precedence system)</p>\n\n<p>In node.js I would have used <a href=\"https://github.com/indexzero/nconf\" rel=\"nofollow\">nconf.js</a>, to do this.</p>\n\n<p><em>Is there some configuration gem in ruby that enable to do such a thing?</em></p>\n"}, {"tags": ["ruby", "ternary-operator"], "comments": [{"owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "edited": false, "score": 0, "creation_date": 1447248359, "post_id": 33651445, "comment_id": 55076227, "body": "Maybe <code>key = x =~ &#47;^[aeiou]&#47; ? :vcv : :cvc; testhash[key] &lt;&lt; x</code>. What is <code>select</code> for?"}, {"owner": {"reputation": 105, "user_id": 5480169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rRO5G.png?s=128&g=1", "display_name": "question_asker", "link": "https://stackoverflow.com/users/5480169/question-asker"}, "edited": false, "score": 0, "creation_date": 1447248710, "post_id": 33651445, "comment_id": 55076445, "body": "n.b. for anyone reading this now - the code above is <i>not</i> the code I have (if you want to see it, it is visible in the original post - not functionally different than what&#39;s there now), it was changed by someone making an edit."}, {"owner": {"reputation": 29117, "user_id": 1587329, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/UWmiP.png?s=128&g=1", "display_name": "serv-inc", "link": "https://stackoverflow.com/users/1587329/serv-inc"}, "edited": false, "score": 0, "creation_date": 1447249490, "post_id": 33651445, "comment_id": 55076905, "body": "@question_asker: The edit might have helped some. If you do mind you can click <a href=\"http://stackoverflow.com/posts/33651445/revisions\">edited ... ago</a> and <a href=\"http://meta.stackexchange.com/questions/17038/what-is-a-rollback\">click on rollback to restore your original post</a>."}, {"owner": {"reputation": 105, "user_id": 5480169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rRO5G.png?s=128&g=1", "display_name": "question_asker", "link": "https://stackoverflow.com/users/5480169/question-asker"}, "reply_to_user": {"reputation": 29117, "user_id": 1587329, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/UWmiP.png?s=128&g=1", "display_name": "serv-inc", "link": "https://stackoverflow.com/users/1587329/serv-inc"}, "edited": false, "score": 1, "creation_date": 1447249939, "post_id": 33651445, "comment_id": 55077185, "body": "@user nah, it&#39;s fine - I just thought it was a little strange to make a syntax edit that doesn&#39;t affect functionality."}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 5480169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rRO5G.png?s=128&g=1", "display_name": "question_asker", "link": "https://stackoverflow.com/users/5480169/question-asker"}, "edited": false, "score": 2, "creation_date": 1447248554, "post_id": 33651535, "comment_id": 55076345, "body": "Incredible. I don&#39;t know why, but I didn&#39;t think putting the conditional inside the brackets would work."}, {"owner": {"reputation": 633, "user_id": 5107759, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/33e659c0770221780a6fd21960909b6d?s=128&d=identicon&r=PG", "display_name": "joanbm", "link": "https://stackoverflow.com/users/5107759/joanbm"}, "edited": false, "score": 2, "creation_date": 1447252968, "post_id": 33651535, "comment_id": 55079101, "body": "The inner parens at element reference are superfluous and can be simply written without."}], "tags": [], "owner": {"reputation": 42085, "user_id": 3444240, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/OjOru.jpg?s=128&g=1", "display_name": "potashin", "link": "https://stackoverflow.com/users/3444240/potashin"}, "is_accepted": true, "score": 5, "last_activity_date": 1447248381, "creation_date": 1447248381, "answer_id": 33651535, "question_id": 33651445, "link": "https://stackoverflow.com/questions/33651445/ternary-operator-with-append-operator-and-match/33651535#33651535", "title": "Ternary operator with append (&lt;&lt;) operator and match", "body": "<p>Something like this:</p>\n\n<pre><code>palinwords.each{ |x| testhash[(x =~ /^[aeiou]/ ? :vcv : :cvc)] &lt;&lt; x }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "is_accepted": false, "score": 8, "last_activity_date": 1447248637, "creation_date": 1447248637, "answer_id": 33651607, "question_id": 33651445, "link": "https://stackoverflow.com/questions/33651445/ternary-operator-with-append-operator-and-match/33651607#33651607", "title": "Ternary operator with append (&lt;&lt;) operator and match", "body": "<p>To split all palindroms you could use <code>group_by</code>.</p>\n\n<pre><code>palinwords.group_by { |x| x =~ /^[aeiou]/ ? :vcv : :cvc }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": false, "score": 1, "last_activity_date": 1447265003, "creation_date": 1447265003, "answer_id": 33656920, "question_id": 33651445, "link": "https://stackoverflow.com/questions/33651445/ternary-operator-with-append-operator-and-match/33656920#33656920", "title": "Ternary operator with append (&lt;&lt;) operator and match", "body": "<p>Here is one more way this can be done:</p>\n\n<pre><code>testhash[:vcv], testhash[:cvc] = palinwords.partition { |x| x =~ /^[aeiou]/ }\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 5480169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rRO5G.png?s=128&g=1", "display_name": "question_asker", "link": "https://stackoverflow.com/users/5480169/question-asker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 33651535, "answer_count": 3, "score": 0, "last_activity_date": 1447265003, "creation_date": 1447248153, "last_edit_date": 1447254448, "question_id": 33651445, "link": "https://stackoverflow.com/questions/33651445/ternary-operator-with-append-operator-and-match", "title": "Ternary operator with append (&lt;&lt;) operator and match", "body": "<p>So I have the following line of code:</p>\n\n<pre><code>palinwords.select do |x| \n  x =~ /^[aeiou]/ ? testhash[:vcv] &lt;&lt; x : testhash[:cvc] &lt;&lt; x\nend\n</code></pre>\n\n<p>I <em>feel like</em> there is a way to tighten this operation up such that the append isn't explicitly written on both sides of the colon. I'm finding it hard to describe what I mean, so here's an example involving <code>puts</code> instead of <code>&lt;&lt;</code>:</p>\n\n<p><em>What I have is akin to</em> <code>x == 5 ? puts y : puts z</code></p>\n\n<p><em>What I want is more like</em> <code>puts (x == 5) ? y : z</code></p>\n\n<p>It's entirely possible that I'm missing something or thinking about this entirely wrong, so if what I'm trying to do isn't possible, that's fine.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "simple-form"], "comments": [{"owner": {"reputation": 3805, "user_id": 2075801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f845c96122bd745f0614185a840d850b?s=128&d=identicon&r=PG", "display_name": "Yury Lebedev", "link": "https://stackoverflow.com/users/2075801/yury-lebedev"}, "edited": false, "score": 0, "creation_date": 1447247852, "post_id": 33650858, "comment_id": 55075986, "body": "have you restarted the rails server after running <code>bundle install</code>?"}, {"owner": {"reputation": 562, "user_id": 1112633, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a3a8118d83fd2bf1975c210bd1fa531d?s=128&d=identicon&r=PG", "display_name": "MC2DX", "link": "https://stackoverflow.com/users/1112633/mc2dx"}, "edited": false, "score": 0, "creation_date": 1447248255, "post_id": 33650858, "comment_id": 55076171, "body": "Or have you added this gem <a href=\"https://github.com/plataformatec/simple_form\" rel=\"nofollow noreferrer\">github.com/plataformatec/simple_form</a> to Gemfile and bundled it again?"}, {"owner": {"reputation": 333, "user_id": 4995200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/121841d50806c06ca5a53de524eb22f5?s=128&d=identicon&r=PG&f=1", "display_name": "Mordechai Dror", "link": "https://stackoverflow.com/users/4995200/mordechai-dror"}, "edited": false, "score": 0, "creation_date": 1447339601, "post_id": 33650858, "comment_id": 55121051, "body": "why do I need to restart server for it? I&#39;ve never restarted server after <code>bundle install</code> and it&#39;s never been a problem. And yes, I&#39;ve added this gem, of course, as it was described in question"}, {"owner": {"reputation": 6268, "user_id": 503831, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/992c174c48fa4dadacb03854dbf7ade8?s=128&d=identicon&r=PG", "display_name": "Arnold Roa", "link": "https://stackoverflow.com/users/503831/arnold-roa"}, "edited": false, "score": 0, "creation_date": 1466175679, "post_id": 33650858, "comment_id": 63224233, "body": "even when is valid that you should not restart rails, is possible that you need to restart spring. But I don&#39;t think that&#39;s your problem. Can you check if simple_form is BEFORE devise in Gemfile?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 4330173, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MZL4b.jpg?s=128&g=1", "display_name": "Matias Pan", "link": "https://stackoverflow.com/users/4330173/matias-pan"}, "is_accepted": false, "score": 0, "last_activity_date": 1447248425, "creation_date": 1447248425, "answer_id": 33651545, "question_id": 33650858, "link": "https://stackoverflow.com/questions/33650858/getting-error-simple-form-not-found-with-devise/33651545#33651545", "title": "Getting &quot;error simple_form [not found]&quot; with devise", "body": "<p>If you already added the <code>simple_form</code> gem to the Gemfile, try running <code>rails g simple_form:install</code> and then run again <code>rails g devise:views</code>.</p>\n"}], "owner": {"reputation": 333, "user_id": 4995200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/121841d50806c06ca5a53de524eb22f5?s=128&d=identicon&r=PG&f=1", "display_name": "Mordechai Dror", "link": "https://stackoverflow.com/users/4995200/mordechai-dror"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1447248425, "creation_date": 1447246048, "question_id": 33650858, "link": "https://stackoverflow.com/questions/33650858/getting-error-simple-form-not-found-with-devise", "title": "Getting &quot;error simple_form [not found]&quot; with devise", "body": "<p>I wanted to customize my devise views, so I used <code>rails g devise:views</code> command and got error (generator just skipped it and went further) <code>error  simple_form [not found]</code></p>\n\n<p>Ok, I went to Gemfile and added this gem called simple_form, ran <code>bundle install</code> and... got the same error while generating views</p>\n\n<p>What's wrong?</p>\n"}, {"tags": ["java", "ruby", "eclipse", "gem"], "comments": [{"owner": {"reputation": 562, "user_id": 1112633, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a3a8118d83fd2bf1975c210bd1fa531d?s=128&d=identicon&r=PG", "display_name": "MC2DX", "link": "https://stackoverflow.com/users/1112633/mc2dx"}, "edited": false, "score": 0, "creation_date": 1447248334, "post_id": 33650787, "comment_id": 55076214, "body": "Eclipse, seriously? Try to install the nokogiri first and then repeat your action. Also <code>gem list | grep &quot;nokogiri&quot;</code>."}, {"owner": {"reputation": 33, "user_id": 2520256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdeca89a7fd2d73f90551e3df6b78c85?s=128&d=identicon&r=PG", "display_name": "Antonio N&#243;brega", "link": "https://stackoverflow.com/users/2520256/antonio-n%c3%b3brega"}, "reply_to_user": {"reputation": 562, "user_id": 1112633, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a3a8118d83fd2bf1975c210bd1fa531d?s=128&d=identicon&r=PG", "display_name": "MC2DX", "link": "https://stackoverflow.com/users/1112633/mc2dx"}, "edited": false, "score": 0, "creation_date": 1447324262, "post_id": 33650787, "comment_id": 55111617, "body": "Whats the problem with Eclipse? Its been a while since I developed anything in Java, but back then Eclipse was a great tool. The output to what you asked is:     nokogiri (1.6.6.2)."}, {"owner": {"reputation": 562, "user_id": 1112633, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a3a8118d83fd2bf1975c210bd1fa531d?s=128&d=identicon&r=PG", "display_name": "MC2DX", "link": "https://stackoverflow.com/users/1112633/mc2dx"}, "edited": false, "score": 0, "creation_date": 1447326421, "post_id": 33650787, "comment_id": 55112919, "body": "Did you add <code>require &#39;nokogiri&#39;</code> inside your script? Can you add a piece of code where you used it?"}, {"owner": {"reputation": 33, "user_id": 2520256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdeca89a7fd2d73f90551e3df6b78c85?s=128&d=identicon&r=PG", "display_name": "Antonio N&#243;brega", "link": "https://stackoverflow.com/users/2520256/antonio-n%c3%b3brega"}, "reply_to_user": {"reputation": 562, "user_id": 1112633, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a3a8118d83fd2bf1975c210bd1fa531d?s=128&d=identicon&r=PG", "display_name": "MC2DX", "link": "https://stackoverflow.com/users/1112633/mc2dx"}, "edited": false, "score": 0, "creation_date": 1447327355, "post_id": 33650787, "comment_id": 55113459, "body": "I did yes, I added the java and a piece of the ruby code. I am probably missing something...since I am adding the jruby.jar to the project, is Eclipse (just tried on IntelliJ as well) using the jar for the jruby? If so, how do I fix this? How do I tell the IDE to use the JAR for the files and imports, but use my system installed ruby?"}], "answers": [{"tags": [], "owner": {"reputation": 419, "user_id": 2357809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acfc86d013ad0c0bfcc767275ad3644e?s=128&d=identicon&r=PG", "display_name": "IanB", "link": "https://stackoverflow.com/users/2357809/ianb"}, "is_accepted": false, "score": 0, "last_activity_date": 1455551275, "creation_date": 1455551275, "answer_id": 35413515, "question_id": 33650787, "link": "https://stackoverflow.com/questions/33650787/eclipse-cant-find-my-installed-ruby-gems-jruby/35413515#35413515", "title": "Eclipse can&#39;t find my installed Ruby gems (JRuby)", "body": "<p>Try setting the jruby home directory</p>\n\n<pre><code>ScriptingContainer ruby = new ScriptingContainer(LocalVariableBehavior.PERSISTENT);\nruby.setHomeDirectory(\"/jruby-9.0.5.0\");   \n</code></pre>\n\n<p>This solved the issue for me.</p>\n"}], "owner": {"reputation": 33, "user_id": 2520256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdeca89a7fd2d73f90551e3df6b78c85?s=128&d=identicon&r=PG", "display_name": "Antonio N&#243;brega", "link": "https://stackoverflow.com/users/2520256/antonio-n%c3%b3brega"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 447, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1455551275, "creation_date": 1447245765, "last_edit_date": 1447327220, "question_id": 33650787, "link": "https://stackoverflow.com/questions/33650787/eclipse-cant-find-my-installed-ruby-gems-jruby", "title": "Eclipse can&#39;t find my installed Ruby gems (JRuby)", "body": "<p>So, I am trying to use my ruby scripts inside my java code with the help of JRuby. But there is a problem, eclipse is not being able to use the gems I have installed. For testing purposes, I've been trying to run a piece of code that requires the \"nokogiri\" ruby gem, which I have installed. When I try to run the java code, here's what I get:</p>\n\n<pre><code>LoadError: no such file to load -- nokogiri\n  require at org/jruby/RubyKernel.java:939\n    &lt;top&gt; at /home/amng/workspace/scripts/xx/x/getMSPatches:4\nException in thread \"main\" org.jruby.embed.EvalFailedException: (LoadError) no such file to load -- nokogiri\nat org.jruby.embed.internal.EmbedEvalUnitImpl.run(EmbedEvalUnitImpl.java:131)\nat org.jruby.embed.ScriptingContainer.runUnit(ScriptingContainer.java:1307)\nat org.jruby.embed.ScriptingContainer.runScriptlet(ScriptingContainer.java:1352)\nat jobs.Teste.run(Teste.java:17)\nat jobs.Teste.main(Teste.java:11)\n</code></pre>\n\n<p>Caused by: org.jruby.exceptions.RaiseException: (LoadError) no such file to load -- nokogiri\n    at org.jruby.RubyKernel.require(org/jruby/RubyKernel.java:939)\n    at RUBY.(/home/amng/workspace/scripts/myPrecious/MSPatches/getMSPatches:4)</p>\n\n<p>I downloaded the jruby.jar from the website and added to the build path of the project. I also pointed the eclipse to the JRuby binary using the Dynamic Languages Toolkit (DLTK) plugin. What do I have to do to make sure that eclipse can use the gems I have installed?</p>\n\n<p>Edit: My java code:</p>\n\n<pre><code>import org.jruby.embed.ScriptingContainer;\nimport org.jruby.embed.LocalVariableBehavior;\nimport org.jruby.embed.PathType;\n\npublic class Main {\n\n    public static void main(String[] args) {\n        ScriptingContainer ruby = new ScriptingContainer(LocalVariableBehavior.PERSISTENT);\n        Object result = ruby.runScriptlet(PathType.ABSOLUTE, \"/home/amng/workspace/scripts/myPrecious/MSPatches/getMSPatches\");\n        System.out.println(result);\n}\n</code></pre>\n\n<p>}</p>\n\n<p>The first two lines of my (working) ruby code (getMSPatches) are:</p>\n\n<pre><code># encoding: UTF-8\nrequire 'nokogiri'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "xml", "ubuntu", "ubuntu-14.04"], "comments": [{"owner": {"reputation": 6584, "user_id": 1831520, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/QFRGt.jpg?s=128&g=1", "display_name": "sadaf2605", "link": "https://stackoverflow.com/users/1831520/sadaf2605"}, "edited": false, "score": 0, "creation_date": 1447243390, "post_id": 33649549, "comment_id": 55073701, "body": "please provide us the log, instead of screen shot"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1447245260, "post_id": 33649549, "comment_id": 55074644, "body": "<code>xmlparser</code> gem was not updated since 2012. Please consider to switch to <a href=\"http://www.nokogiri.org/\" rel=\"nofollow noreferrer\">Nokogiri</a>, that is a standard de facto in XML parsing in ruby nowadays."}, {"owner": {"reputation": 5067, "user_id": 993554, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/UV0L9.jpg?s=128&g=1", "display_name": "Victor Ferreira", "link": "https://stackoverflow.com/users/993554/victor-ferreira"}, "edited": false, "score": 0, "creation_date": 1447245632, "post_id": 33649549, "comment_id": 55074839, "body": "it&#39;s a dependency for other package. I need xmlparser. works in other pcs in my office"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1447245872, "post_id": 33649549, "comment_id": 55074965, "body": "Well, I have just checked on my Ubuntu: it was installed successfully. So I would suggest you to: <code>apt-get install libxml2-dev libxslt1-dev</code> and then retry with <code>xmlparser</code>."}, {"owner": {"reputation": 5067, "user_id": 993554, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/UV0L9.jpg?s=128&g=1", "display_name": "Victor Ferreira", "link": "https://stackoverflow.com/users/993554/victor-ferreira"}, "edited": false, "score": 0, "creation_date": 1447246365, "post_id": 33649549, "comment_id": 55075213, "body": "i&#39;m still getting the same error. Must be some conflict i don&#39;t know"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1447247579, "post_id": 33649549, "comment_id": 55075841, "body": "OK, finally I found the reason. <code>gcc</code> inherits build flags from those, ruby was build with. In your case, it is <code>-Werror=format-security</code>, that means \u201ctreat this as an error, rather than a warning.\u201d I believe <code>CFLAGS=-Wno-format-security gem install xmlparser</code> should finally succeed."}, {"owner": {"reputation": 1106, "user_id": 2402536, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9WF0w.jpg?s=128&g=1", "display_name": "Artur Ma\u0142ecki", "link": "https://stackoverflow.com/users/2402536/artur-ma%c5%82ecki"}, "edited": false, "score": 0, "creation_date": 1481880383, "post_id": 33649549, "comment_id": 69561938, "body": "I&#39;ve posted solution on another topic: <a href=\"http://stackoverflow.com/a/41181026/2402536\">stackoverflow.com/a/41181026/2402536</a>"}], "owner": {"reputation": 5067, "user_id": 993554, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/UV0L9.jpg?s=128&g=1", "display_name": "Victor Ferreira", "link": "https://stackoverflow.com/users/993554/victor-ferreira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 417, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1447243681, "creation_date": 1447241164, "last_edit_date": 1447243681, "question_id": 33649549, "link": "https://stackoverflow.com/questions/33649549/cant-install-ruby-gem-xmlparser", "title": "Can&#39;t install ruby gem xmlparser", "body": "<p>I am trying to install this gem <code>xmlparser</code> so that I can use the class XSD::QName to read from XML.</p>\n\n<p>It asked me to install <code>expat</code> and <code>xmlparse</code>, and then after several other packages and attempts I have this new problem:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ZYXy6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZYXy6.png\" alt=\"enter image description here\"></a></p>\n\n<p>\"Failed to build gem native extension</p>\n\n<p>Checking for ntohl() in -lsocket... no</p>\n\n<p>etc etc</p>\n\n<p>etc etc</p>\n\n<p>make failed, exit code 2\"</p>\n\n<p><strong>@edit</strong></p>\n\n<pre><code>Gem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n    /usr/bin/ruby2.1 extconf.rb\nchecking for expat.h... yes\nchecking for XML_ParserCreate() in -lexpat... yes\nchecking for XML_SetNotStandaloneHandler()... yes\nchecking for XML_SetParamEntityParsing()... yes\nchecking for XML_SetDoctypeDeclHandler()... yes\nchecking for XML_ParserReset()... yes\nchecking for XML_SetSkippedEntityHandler()... yes\nchecking for XML_GetFeatureList()... yes\nchecking for XML_UseForeignDTD()... yes\nchecking for XML_GetIdAttributeIndex()... yes\nchecking for ntohl() in -lsocket... no\ncreating Makefile\n\nmake \"DESTDIR=\" clean\n\nmake \"DESTDIR=\"\ncompiling xmlparser.c\nxmlparser.c: In function \u2018XMLParser_parse\u2019:\nxmlparser.c:1783:2: error: format not a string literal and no format arguments [-Werror=format-security]\n  rb_raise(eXMLParserError, (char*)errStr);\n  ^\nxmlparser.c:1832:5: error: format not a string literal and no format arguments [-Werror=format-security]\n     rb_raise(eXMLParserError, (char*)errStr);\n     ^\ncc1: some warnings being treated as errors\nMakefile:224: recipe for target 'xmlparser.o' failed\nmake: *** [xmlparser.o] Error 1\n\nmake failed, exit code 2\n\nGem files will remain installed in /tmp/bundler20151111-18724-f3sw3fxmlparser-0.7.2.1/gems/xmlparser-0.7.2.1 for inspection.\nResults logged to /tmp/bundler20151111-18724-f3sw3fxmlparser-0.7.2.1/extensions/x86-linux/2.1.0/xmlparser-0.7.2.1/gem_make.out\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "regex", "rake", "require"], "comments": [{"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 0, "creation_date": 1447240485, "post_id": 33649105, "comment_id": 55072132, "body": "In Ruby: Best practice is to use lower case word separated by underscores for method names and instance variables. So create the method with <code>def create_my_file</code> and use the instance variable <code>my_file</code>"}], "answers": [{"comments": [{"owner": {"reputation": 729, "user_id": 5135400, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/340af7d7f56355c39b56f926cae83c0d?s=128&d=identicon&r=PG&f=1", "display_name": "JohnDoe", "link": "https://stackoverflow.com/users/5135400/johndoe"}, "edited": false, "score": 0, "creation_date": 1447247322, "post_id": 33649314, "comment_id": 55075709, "body": "By the way, I would like also to write something into the created file, and I&#39;m trying to do it with open(&#39;myfile.txt&#39;, &#39;w&#39;) do |f| f.puts &quot;This is my string&quot;   (which is the next line after File.new File.join....) but it doesn&#39;t accept it?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 729, "user_id": 5135400, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/340af7d7f56355c39b56f926cae83c0d?s=128&d=identicon&r=PG&f=1", "display_name": "JohnDoe", "link": "https://stackoverflow.com/users/5135400/johndoe"}, "edited": false, "score": 0, "creation_date": 1447247445, "post_id": 33649314, "comment_id": 55075779, "body": "<code>File.open(&#39;&#47;tmp&#47;a.txt&#39;, &#39;w+&#39;) do |f| f.puts &quot;HELLO&quot; end</code> \u21d0 plus <code>&#39;w+&#39;</code> is required since the file is already existing and <code>File.open</code> should be used."}, {"owner": {"reputation": 729, "user_id": 5135400, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/340af7d7f56355c39b56f926cae83c0d?s=128&d=identicon&r=PG&f=1", "display_name": "JohnDoe", "link": "https://stackoverflow.com/users/5135400/johndoe"}, "edited": false, "score": 0, "creation_date": 1447248756, "post_id": 33649314, "comment_id": 55076469, "body": "have tried it, but still nothing is written into the file"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 729, "user_id": 5135400, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/340af7d7f56355c39b56f926cae83c0d?s=128&d=identicon&r=PG&f=1", "display_name": "JohnDoe", "link": "https://stackoverflow.com/users/5135400/johndoe"}, "edited": false, "score": 0, "creation_date": 1447249251, "post_id": 33649314, "comment_id": 55076763, "body": "@milexy86 Please do not edit answers, changing the original code. You should substitute file name with the real one, that is apparently <code>File.join(dir, &#39;myFile.txt&#39;)</code>. If you have any other questions, besides the above, that is already perfectly answered, please ask <i>another question</i>."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 0, "last_activity_date": 1447240220, "creation_date": 1447240220, "answer_id": 33649314, "question_id": 33649105, "link": "https://stackoverflow.com/questions/33649105/create-file-in-different-directories-with-ruby/33649314#33649314", "title": "create file in different directories with ruby", "body": "<p><code>Pathname</code> does not accept wildcards. <a href=\"http://ruby-doc.org/core-2.2.3/Dir.html#method-c-5B-5D\" rel=\"nofollow\"><code>Dir#[]</code></a> does:</p>\n\n<pre><code>Dir['../../../../../TESTS/Test_*/**'].each do |dir|\n  File.new File.join(dir, 'myFile.txt'), 'w+'\nend\n</code></pre>\n"}], "owner": {"reputation": 729, "user_id": 5135400, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/340af7d7f56355c39b56f926cae83c0d?s=128&d=identicon&r=PG&f=1", "display_name": "JohnDoe", "link": "https://stackoverflow.com/users/5135400/johndoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 33649314, "answer_count": 1, "score": 0, "last_activity_date": 1447240468, "creation_date": 1447239457, "question_id": 33649105, "link": "https://stackoverflow.com/questions/33649105/create-file-in-different-directories-with-ruby", "title": "create file in different directories with ruby", "body": "<p>I'm new to ruby. Actually I'm trying to create an empty file \"myfile.txt\" in each of the following directories:</p>\n\n<pre><code>../../../../../TESTS/Test_A/myTest_A/\n../../../../../TESTS/Test_B/myTest_B/\n../../../../../TESTS/Test_C/myTest_C/\n../../../../../TESTS/Test_D/myTest_D/\n</code></pre>\n\n<p>As you can see, the name of the Top directory is \"TEST\" and than after this, every directory have a different name but starts with \"Test_\", and than each \"Test_*\" directory contains only one directory and there my file should go in. I'm trying something like this:</p>\n\n<pre><code>require 'pathname'\n\ndef create_myFile\n  pn = Pathname.new('../../../../../TESTS/Test_*/**')\n  myFile = File.new(\"#{pn}/myFile.txt\", \"w+\")\nend\ncreate_myFile\n</code></pre>\n\n<p>It doesn't work. Any suggestions?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 3, "last_activity_date": 1447240254, "last_edit_date": 1447240254, "creation_date": 1447239012, "answer_id": 33648988, "question_id": 33648933, "link": "https://stackoverflow.com/questions/33648933/rails-seed-data-nested-array/33648988#33648988", "title": "Rails seed data nested array", "body": "<p>Second iterator is redundant:</p>\n\n<pre><code>vat_classes = [ \n  [\"empty\", \"1.1.2007\", 0.0],\n  [\"reduced\", \"1.1.2007\", 7.0],\n  [\"full\", \"1.1.2007\", 19.0]\n]\n\nvat_classes.each do |vat_class|\n  VatClass.where(name: vat_class[0]).first_or_create do |e|\n    # no create is needed anymore: it is already created\n    e.update_attributes!(valid_from: vat_class[1], vat_value: vat_class[2])\n  end\nend\n</code></pre>\n\n<p>Hope it helps.</p>\n"}], "owner": {"reputation": 3493, "user_id": 1323481, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4825c6c1cdfd05c2af6fb8db0d492f73?s=128&d=identicon&r=PG", "display_name": "StandardNerd", "link": "https://stackoverflow.com/users/1323481/standardnerd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 385, "favorite_count": 0, "accepted_answer_id": 33648988, "answer_count": 1, "score": 0, "last_activity_date": 1447240254, "creation_date": 1447238817, "question_id": 33648933, "link": "https://stackoverflow.com/questions/33648933/rails-seed-data-nested-array", "title": "Rails seed data nested array", "body": "<p>I'm struggling at making a seed data with nested arrays.\nI have a VatClass model with the attributes name, valid_from, value.</p>\n\n<pre><code>vat_classes = [ [\"empty\", \"1.1.2007\", 0.0], [\"reduced\", \"1.1.2007\", 7.0], [\"full\", \"1.1.2007\", 19.0]]\nvat_classes.each do |vat_class|\n  vat_class.each do |inner_element|\n    VatClass.where(name: inner_element[0]).first_or_create do |e| # pseudocode\n      VatClass.create(name: inner_element[0], valid_from: inner_element[1], vat_value: inner_element[2])\n    end\n  end\nend\n</code></pre>\n\n<p>If there aren't any previous records with the same name in the database then it should create one based on the vat_classes array. How can i achieve this?</p>\n"}, {"tags": ["ruby", "cron", "docker"], "comments": [{"owner": {"reputation": 72198, "user_id": 256618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbfec69b120650860f555af29ee8a974?s=128&d=identicon&r=PG", "display_name": "Mark O&#39;Connor", "link": "https://stackoverflow.com/users/256618/mark-oconnor"}, "edited": false, "score": 0, "creation_date": 1447309237, "post_id": 33648762, "comment_id": 55104158, "body": "<a href=\"http://stackoverflow.com/questions/24943982/docker-cronjob-is-not-working/24946792#24946792\" title=\"docker cronjob is not working\">stackoverflow.com/questions/24943982/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2049, "user_id": 348946, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/0f484f05403b79f4813c295819ffb6fb?s=128&d=identicon&r=PG", "display_name": "Ronni Egeriis Persson", "link": "https://stackoverflow.com/users/348946/ronni-egeriis-persson"}, "edited": false, "score": 0, "creation_date": 1448134288, "post_id": 33847142, "comment_id": 55459831, "body": "Thank you for your answer Kevin. I ended up using your <i>worst</i> option, since it&#39;s really a short term thing I&#39;m working on. Just need get it working."}], "tags": [], "owner": {"reputation": 1119, "user_id": 4634535, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6521f03e6002bacc2ad7033064aaeb7a?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Keane", "link": "https://stackoverflow.com/users/4634535/kevin-keane"}, "is_accepted": true, "score": 2, "last_activity_date": 1448131219, "creation_date": 1448131219, "answer_id": 33847142, "question_id": 33648762, "link": "https://stackoverflow.com/questions/33648762/how-to-run-cron-in-docker-container-from-ruby-image/33847142#33847142", "title": "How to run cron in Docker container from Ruby image", "body": "<p>Your analysis is correct, the cron jobs are not running. This happens because normally, and by best practices, the container only runs a single process, such as Apache, NGINX, etc. - it does not run any of the normal operating system daemons such as crond.</p>\n\n<p>No crond means, there is nothing that would read or execute your crontab.</p>\n\n<p>There are several possibilities to solve this, but no perfect solution that I know of.</p>\n\n<ul>\n<li><p>The worst one is to actually install crond, along with something like supervisord. It makes your container dramatically more complex.</p></li>\n<li><p>You can create a separate container that runs nothing but cron. Mount whatever you need from the other containers as volumes. This is generally the recommended option, but it has limitations. The cron container needs to know a lot about the internals of your other containers, and the cron jobs don't execute in the same context as the rest of the containers.</p></li>\n<li><p>You can create a cron job on the host, and have it execute scripts in the containers with docker exec. That works well, but creates a dependency between host and container. It may also not work at all if you don't have access to the host's operating system (for instance, in a hosted situation, or if a different team manages the host).</p></li>\n</ul>\n"}], "owner": {"reputation": 2049, "user_id": 348946, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/0f484f05403b79f4813c295819ffb6fb?s=128&d=identicon&r=PG", "display_name": "Ronni Egeriis Persson", "link": "https://stackoverflow.com/users/348946/ronni-egeriis-persson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1202, "favorite_count": 1, "accepted_answer_id": 33847142, "answer_count": 1, "score": 2, "last_activity_date": 1448131219, "creation_date": 1447238200, "question_id": 33648762, "link": "https://stackoverflow.com/questions/33648762/how-to-run-cron-in-docker-container-from-ruby-image", "title": "How to run cron in Docker container from Ruby image", "body": "<p>I've tried setting up cron to run in my Docker container, but without success thus far.</p>\n\n<p>This is the cron-related parts of the <code>Dockerfile</code>:</p>\n\n<pre><code>FROM ruby:2.2.2\n\n# Add crontab file in the cron directory\nRUN apt-get install -y rsyslog\nADD crontab /etc/cron.d/hello-cron\n\n# Give execution rights on the cron job\nRUN chmod +x /etc/cron.d/hello-cron\n\n# Create the log file to be able to run tail\nRUN touch /var/log/cron.log\n\n# Run the command on container startup\nRUN service cron start\n</code></pre>\n\n<p>When I log on to the container instance, cron appears to be running:</p>\n\n<pre><code>$ service cron status\ncron is running.\n</code></pre>\n\n<p>And <code>/etc/cron.d</code> has my job:</p>\n\n<pre><code>$ cat /etc/cron.d/hello-cron\n* * * * * root echo \"Hello world\" &gt;&gt; /var/log/cron.log 2&gt;&amp;1\n</code></pre>\n\n<p>But nothing is appended to <code>/var/log/cron.log</code>, so it doesn't appear to run.</p>\n\n<p>If I then, from within the container, runs <code>$ cron</code> it registers my <code>hello-cron</code> file and the log file will have \"Hello world\" appended every minute.</p>\n"}, {"tags": ["ruby", "api", "facebook-graph-api", "padrino"], "comments": [{"owner": {"reputation": 2307, "user_id": 219594, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/87b214a1096bea2042c331b63eb1fa22?s=128&d=identicon&r=PG", "display_name": "andrykonchin", "link": "https://stackoverflow.com/users/219594/andrykonchin"}, "edited": false, "score": 0, "creation_date": 1447354997, "post_id": 33648542, "comment_id": 55131648, "body": "Please clarify do you ask about managing of the user session and comunication between backend and mobile client (authentication, sign out etc) or about consuming FB API on behalf the fb application to e.g. fetching user friends etc?"}, {"owner": {"reputation": 16538, "user_id": 2602869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PkMYa.jpg?s=128&g=1", "display_name": "Jikku Jose", "link": "https://stackoverflow.com/users/2602869/jikku-jose"}, "reply_to_user": {"reputation": 2307, "user_id": 219594, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/87b214a1096bea2042c331b63eb1fa22?s=128&d=identicon&r=PG", "display_name": "andrykonchin", "link": "https://stackoverflow.com/users/219594/andrykonchin"}, "edited": false, "score": 0, "creation_date": 1447393931, "post_id": 33648542, "comment_id": 55145695, "body": "I am sorry that it isn&#39;t clear. I want to know how to manage user session and communication between backend and mobile client."}, {"owner": {"reputation": 2307, "user_id": 219594, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/87b214a1096bea2042c331b63eb1fa22?s=128&d=identicon&r=PG", "display_name": "andrykonchin", "link": "https://stackoverflow.com/users/219594/andrykonchin"}, "edited": false, "score": 0, "creation_date": 1447414669, "post_id": 33648542, "comment_id": 55155307, "body": "hmm, I have seen two approaches - generating of a session token and client passes it in each request as get parameter or HTTP header (e.g. Authorization header) and using simple cookies - backend puts encrypted/signed user information (id, email etc) into cookies and a client sends it in every request. There are a lot of manuals and articles about it."}, {"owner": {"reputation": 16538, "user_id": 2602869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PkMYa.jpg?s=128&g=1", "display_name": "Jikku Jose", "link": "https://stackoverflow.com/users/2602869/jikku-jose"}, "reply_to_user": {"reputation": 2307, "user_id": 219594, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/87b214a1096bea2042c331b63eb1fa22?s=128&d=identicon&r=PG", "display_name": "andrykonchin", "link": "https://stackoverflow.com/users/219594/andrykonchin"}, "edited": false, "score": 0, "creation_date": 1447469256, "post_id": 33648542, "comment_id": 55181411, "body": "Thanks, I am getting confused at most of the manuals. I wasn&#39;t perhaps assuming it to be this complicated that my brain keeps telling me such a straightforward requirement can&#39;t have these many steps. It should have been encapsulated by now."}], "owner": {"reputation": 16538, "user_id": 2602869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PkMYa.jpg?s=128&g=1", "display_name": "Jikku Jose", "link": "https://stackoverflow.com/users/2602869/jikku-jose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1447237440, "creation_date": 1447237440, "question_id": 33648542, "link": "https://stackoverflow.com/questions/33648542/id-info-for-referring-to-a-logged-in-user-via-fb-in-a-ruby-api", "title": "Id info for referring to a logged in user via FB in a Ruby API", "body": "<p>I am using Padrino to create an API for an app that I am working on and I am confused as to what I need to save in the DB to authenticate the user to the API.</p>\n\n<p>The API is consumed by an Android client which will login via Facebook. What do I need to save from the authentication process to identify and validate the user?</p>\n"}, {"tags": ["ruby", "scala", "traits"], "comments": [{"owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "edited": false, "score": 1, "creation_date": 1447236677, "post_id": 33648234, "comment_id": 55070013, "body": "This is called Mixin in Ruby. You create one with the <code>module</code> instead of <code>trait</code>. (Modules are also used for namespace so don&#39;t get confused)"}], "answers": [{"comments": [{"owner": {"reputation": 4370, "user_id": 2012130, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/683779172d64fbab92601fd6fbbb77e1?s=128&d=identicon&r=PG", "display_name": "Oliver Shaw", "link": "https://stackoverflow.com/users/2012130/oliver-shaw"}, "edited": false, "score": 0, "creation_date": 1447238370, "post_id": 33648422, "comment_id": 55070972, "body": "This is the same as creating an instance of a class that extends the mixin. I was hoping to start with a &#39;self&#39; method e.g <code>p Greeter.greet</code>."}, {"owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "reply_to_user": {"reputation": 4370, "user_id": 2012130, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/683779172d64fbab92601fd6fbbb77e1?s=128&d=identicon&r=PG", "display_name": "Oliver Shaw", "link": "https://stackoverflow.com/users/2012130/oliver-shaw"}, "edited": false, "score": 1, "creation_date": 1447244260, "post_id": 33648422, "comment_id": 55074128, "body": "@OliverShaw It depends on your needs. You can use the <code>module</code> as namespace and define the method with <code>def self.greet ... end</code>. Mocking is as equal as with objects, <code>Greeter.expect(:greet, &#39;Mock&#39;)</code>."}, {"owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "reply_to_user": {"reputation": 562, "user_id": 1112633, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a3a8118d83fd2bf1975c210bd1fa531d?s=128&d=identicon&r=PG", "display_name": "MC2DX", "link": "https://stackoverflow.com/users/1112633/mc2dx"}, "edited": false, "score": 1, "creation_date": 1447244344, "post_id": 33648422, "comment_id": 55074174, "body": "@MateuszCzerwi\u0144ski Where is the main object extended? The code extends one specific instance of <code>Object</code> class I hope."}, {"owner": {"reputation": 4370, "user_id": 2012130, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/683779172d64fbab92601fd6fbbb77e1?s=128&d=identicon&r=PG", "display_name": "Oliver Shaw", "link": "https://stackoverflow.com/users/2012130/oliver-shaw"}, "edited": false, "score": 0, "creation_date": 1447247080, "post_id": 33648422, "comment_id": 55075582, "body": "@sschmeck I think that&#39;s what I&#39;m after. Thanks"}], "tags": [], "owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "is_accepted": true, "score": 6, "last_activity_date": 1447243554, "last_edit_date": 1447243554, "creation_date": 1447236984, "answer_id": 33648422, "question_id": 33648234, "link": "https://stackoverflow.com/questions/33648234/objects-extending-scala-traits-ruby-equivalent/33648422#33648422", "title": "Objects Extending Scala traits. Ruby equivalent?", "body": "<p>It's called Mixin in Ruby and it is implemented by Modules.</p>\n\n<pre><code>module Greeter\n  def greet\n    'Hello'\n  end\nend\n\n# extending a specific object\no = Object.new.extend(Greeter)\np o.greet\n\n# creating a specific class\nMyGreeter = Class.new.extend(Greeter)\np MyGreeter.greet\n</code></pre>\n\n<p>But mocking is quite simple in Ruby. It doesn't depend on the way, your objects are constructed. Check the documentation of your favorite Ruby test framework.</p>\n\n<pre><code>o = Object.new\no.expect(:greet, 'Hi, I am a mock')\np o.greet\n</code></pre>\n"}], "owner": {"reputation": 4370, "user_id": 2012130, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/683779172d64fbab92601fd6fbbb77e1?s=128&d=identicon&r=PG", "display_name": "Oliver Shaw", "link": "https://stackoverflow.com/users/2012130/oliver-shaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 1, "accepted_answer_id": 33648422, "answer_count": 1, "score": 1, "last_activity_date": 1447243554, "creation_date": 1447236318, "question_id": 33648234, "link": "https://stackoverflow.com/questions/33648234/objects-extending-scala-traits-ruby-equivalent", "title": "Objects Extending Scala traits. Ruby equivalent?", "body": "<p>In Scala I can write a singleton Object that implements a trait. </p>\n\n<pre><code>trait Greeter {\n  def greet = \"Hello\"\n}\nobject MyGreeterObject extends Greeter\n</code></pre>\n\n<p>Then I can mock Greeter in my tests really easily</p>\n\n<pre><code>var mockGreeter = new Greeter { \n  override def greet = \"I'm a mock\"\n}\n</code></pre>\n\n<p>Is there an equivalent way of doing this in Ruby? Ultimately I want to be able to mock some methods that do not need state and are best served (in Scala anyway) by an object level method. And once I have this I want to be able to have a mock for my tests.</p>\n"}, {"tags": ["ruby", "jekyll"], "comments": [{"owner": {"reputation": 1000, "user_id": 900564, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/UoHjG.jpg?s=128&g=1", "display_name": "Micha\u0142 Szkudlarek", "link": "https://stackoverflow.com/users/900564/micha%c5%82-szkudlarek"}, "edited": false, "score": 0, "creation_date": 1447236222, "post_id": 33648136, "comment_id": 55069748, "body": "Welcome on SO. Please read <a href=\"http://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}], "answers": [{"tags": [], "owner": {"reputation": 39264, "user_id": 3905079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c54d4c111c4564b116ff1efca8c56788?s=128&d=identicon&r=PG", "display_name": "briantist", "link": "https://stackoverflow.com/users/3905079/briantist"}, "is_accepted": false, "score": 4, "last_activity_date": 1447262828, "creation_date": 1447262828, "answer_id": 33656264, "question_id": 33648136, "link": "https://stackoverflow.com/questions/33648136/jekyll-show-only-specific-tag-on-page/33656264#33656264", "title": "Jekyll show only specific tag on page", "body": "<p>You can do this by iterating through the site's tags and indexing into the array with the tag name, similar to the following:</p>\n\n<pre><code>{% for post in site.tags.Play %}\n&lt;h2&gt;{{ post.title }}&lt;/h2&gt;\n&lt;time&gt;{{ post.date }}&lt;/time&gt;\n{% endfor %}\n</code></pre>\n\n<p>It's a bit confusing because it seems like <code>site.tags</code> returns a collection of tags, but it actually contains the full posts, indexed by tag.</p>\n\n<p><a href=\"http://jekyllrb.com/docs/variables/\" rel=\"nofollow\">See <code>site.tags.TAG</code> in the Jekyll Variables page</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "is_accepted": false, "score": 2, "last_activity_date": 1447269504, "creation_date": 1447269504, "answer_id": 33658192, "question_id": 33648136, "link": "https://stackoverflow.com/questions/33648136/jekyll-show-only-specific-tag-on-page/33658192#33658192", "title": "Jekyll show only specific tag on page", "body": "<p><a href=\"https://stackoverflow.com/users/3905079/briantist\">@briantist</a> is right, you have to dig in the site.tags collection.</p>\n\n<p>In order get a more maintainable code, you can use <a href=\"http://jekyllrb.com/docs/templates/#includes\" rel=\"nofollow\">Jekyll includes</a>.</p>\n\n<p>A tag page (eg: ruby.html) is just calling an include passing it the ruby tagName :</p>\n\n<pre><code>---\nlayout: page\ntitle: Ruby\n---\n\n{% include tagPagesLoop.html tagName='ruby' %}\n</code></pre>\n\n<p><strong>_includes/tagPagesLoop.html</strong></p>\n\n<pre><code>&lt;h2&gt;All {{ include.tagName\u00a0}} posts&lt;/h2&gt;\n\n{% for post in site.tags[include.tagName] %}\n&lt;h3&gt;{{ post.title }}&lt;/h3&gt;\nother stuff here\n{% endfor %}\n</code></pre>\n\n<p>All changes made in this include is present in all pages that use it.</p>\n"}], "owner": {"reputation": 61, "user_id": 5549782, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153106168586935/picture?type=large", "display_name": "Zoey Cluff", "link": "https://stackoverflow.com/users/5549782/zoey-cluff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 851, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1447269504, "creation_date": 1447235964, "question_id": 33648136, "link": "https://stackoverflow.com/questions/33648136/jekyll-show-only-specific-tag-on-page", "title": "Jekyll show only specific tag on page", "body": "<p>I'm using jekyll, and I'm trying to have a page ( /play) show only posts tagged Play, and the same with Work (/work). How can I go about doing this?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "refactoring"], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 2, "last_activity_date": 1447236264, "creation_date": 1447236264, "answer_id": 33648222, "question_id": 33648015, "link": "https://stackoverflow.com/questions/33648015/ruby-return-a-method-from-another-method/33648222#33648222", "title": "Ruby &#39;return&#39; a method from another method?", "body": "<p>A method can't make its caller return, if it doesn't want to. So this new method will perform checks (while rendering something) and it will return result of the checks. Caller method analyzes the return value and decides what to do. Something along these lines:</p>\n\n<pre><code>class AnimalController\n  def all_in\n    if invalid_id\n      render_not_found\n      return false\n    end\n\n    if lag.nil?\n      invalid_id\n      return false\n    end\n\n    true\n  end\nend\n\nclass TigerController &lt; AnimalController\n  def running  # This is an Action\n    some_different_codes...\n\n    return unless all_in\n\n    some_different_codes...\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "is_accepted": false, "score": 0, "last_activity_date": 1447259944, "last_edit_date": 1495539874, "creation_date": 1447259944, "answer_id": 33655347, "question_id": 33648015, "link": "https://stackoverflow.com/questions/33648015/ruby-return-a-method-from-another-method/33655347#33655347", "title": "Ruby &#39;return&#39; a method from another method?", "body": "<p>Might be a good turn to look up about <a href=\"https://en.wikipedia.org/wiki/Callback_(computer_programming)\" rel=\"nofollow noreferrer\">callbacks</a> and <a href=\"https://stackoverflow.com/questions/10558504/can-someone-explain-the-class-superclass-class-superclass-paradox\">superclassing</a>:</p>\n\n<hr>\n\n<p><strong>Callbacks</strong> basically allow you to run login in code based on the response of another function. </p>\n\n<p>Since we have them all over Rails, not many people actually appreciate what they do. If you've ever implemented them in JS, you'll know all about them!</p>\n\n<p>-</p>\n\n<p><strong>Superclassing</strong> is where you inherit from an existing class - allowing you to use (&amp; extend) the functions the class has. This is where the <em>super</em> command comes from.</p>\n\n<hr>\n\n<p>I'd do this (looks like <code>Sergio</code>'s answer actually, which is reassuring):</p>\n\n<pre><code>#app/controllers/animals_controller.rb\nclass AnimalsController &lt; ApplicationController\n\n   private \n\n   def all_in?\n       if invalid_id\n          return false\n       end\n       if lag.nil?\n          invalid_id\n          return false\n       end\n       true #-&gt; ruby automatically returns the last line \n   end\nend\n</code></pre>\n\n<p>The above is what you'd call a <em>callback</em> -- you'll be able to call <code>all_in</code> (in an instance) and receive a <code>response</code> of either <code>true</code> or <code>false</code>. </p>\n\n<p>This will give you the ability to call that method (if you're <code>superclassing</code>, the method will be available down the chain:</p>\n\n<pre><code>#app/controllers/elephants_controller.rb\nclass ElephantController &lt; AnimalController\n  def walk     # This is an Action\n    some_different_codes...\n\n    if all_in?\n       some_different_codes...\n    end\n  end\nend\n</code></pre>\n\n<hr>\n\n<p>Now, there's something you must be aware of.</p>\n\n<p>This type of behavior should <em>not</em> be put in the <em>controller</em> of  your app - it should be in your <em>models</em>:</p>\n\n<pre><code>#app/models/animal.rb\nclass Animal &lt; ActiveRecord::Base\n   def walk\n   end\nend\n\n#app/models/animals/elephant.rb\nclass Elephant &lt; Animal\n   def walk\n      super ...\n   end\nend\n\n#app/models/animals/tiger.rb\nclass Tiger &lt; Animal\nend\n</code></pre>\n\n<p>The above is known as <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Inheritance.html\" rel=\"nofollow noreferrer\">STI (Single Table Inheritance)</a>. It's basically a way to subclass against a main model with other \"dependent\" models &amp; their methods.</p>\n\n<p>Since ruby is <a href=\"https://en.wikipedia.org/wiki/Object-oriented_programming\" rel=\"nofollow noreferrer\">object orientated</a>, you should be calling object-specific methods on the objects themselves;</p>\n\n<pre><code>#config/routes.rb\nresources :tigers, :elephants, controller: :animals\n\n#url.com/tigers/\n#url.com/elephants/\n\n#app/controllers/animals_controller.rb\nclass AnimalsController &lt; ApplicationController\n   def show\n     @tiger = Tiger.find params[:id]\n     @tiger.walk\n   end\nend\n</code></pre>\n\n<p>This is more or less epitomized with a <a href=\"https://github.com/pluginaweek/state_machine\" rel=\"nofollow noreferrer\"><code>state machine</code></a>:</p>\n\n<pre><code>class Vehicle\n  attr_accessor :seatbelt_on, :time_used, :auto_shop_busy\n\n  state_machine :state, :initial =&gt; :parked do\n    before_transition :parked =&gt; any - :parked, :do =&gt; :put_on_seatbelt\n\n    after_transition :on =&gt; :crash, :do =&gt; :tow\n    after_transition :on =&gt; :repair, :do =&gt; :fix\n    after_transition any =&gt; :parked do |vehicle, transition|\n      vehicle.seatbelt_on = false\n    end\n\n...\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 2971611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cecea2cceb0200a5d57af16cdda4284?s=128&d=identicon&r=PG&f=1", "display_name": "Although", "link": "https://stackoverflow.com/users/2971611/although"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1235, "favorite_count": 0, "accepted_answer_id": 33648222, "answer_count": 2, "score": 1, "last_activity_date": 1447293499, "creation_date": 1447235551, "last_edit_date": 1447293499, "question_id": 33648015, "link": "https://stackoverflow.com/questions/33648015/ruby-return-a-method-from-another-method", "title": "Ruby &#39;return&#39; a method from another method?", "body": "<p>In a Rails project because of some history reasons, a piece of codes in <code>Tiger</code> and <code>Elephant</code> are same.</p>\n\n<p>I don't like the repetition, but if I create a new method in <code>AnimalController</code> class and move these codes into it, I can't <code>return</code> the <code>walk</code> or <code>running</code> method from the new method.</p>\n\n<p>I think return from another method may not a good practice, but I really hate the duplications, can someone help me refactoring?</p>\n\n<pre><code>class AnimalController\n  # I want create a new method here\n  #def all_in\n  #end\nend\n\nclass TigerController &lt; AnimalController\n  def running  # This is an Action\n    some_different_codes...\n\n    if arm.blank?\n      render_not_found\n      return      # &lt;- how can I return `running` from the new method?\n    end\n    if lag.nil?\n      invalid_id\n      return      # &lt;- \n    end\n\n    some_different_codes...\n  end\nend\n\nclass ElephantController &lt; AnimalController\n  def walk     # This is an Action\n    some_different_codes...\n\n    if arm.blank?\n      render_not_found\n      return\n    end\n    if lag.nil?\n      invalid_id\n      return\n    end\n\n    some_different_codes...\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "is_accepted": true, "score": 6, "last_activity_date": 1447235586, "creation_date": 1447235586, "answer_id": 33648026, "question_id": 33647914, "link": "https://stackoverflow.com/questions/33647914/sequence-of-numbers-with-multiples-of-10/33648026#33648026", "title": "Sequence of numbers with multiples of 10", "body": "<p>Take a look at <a href=\"http://ruby-doc.org/core-2.0.0/Numeric.html#method-i-step\"><code>Numeric.step</code></a>.</p>\n\n<pre><code>0.step(70,10).to_a\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "is_accepted": false, "score": 2, "last_activity_date": 1447235789, "creation_date": 1447235789, "answer_id": 33648091, "question_id": 33647914, "link": "https://stackoverflow.com/questions/33647914/sequence-of-numbers-with-multiples-of-10/33648091#33648091", "title": "Sequence of numbers with multiples of 10", "body": "<p>In addition to <code>Numeric.step</code> </p>\n\n<pre><code>0.step(70,10).to_a \n</code></pre>\n\n<p>you can also use <code>Range#step</code>:</p>\n\n<pre><code>Range.new(0,70).step(10).to_a\n(0..70).step(10).to_a\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2612, "user_id": 2273578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/211dd1a8e9f61b248fba83b9924f4f13?s=128&d=identicon&r=PG", "display_name": "Mario P&#233;rez", "link": "https://stackoverflow.com/users/2273578/mario-p%c3%a9rez"}, "is_accepted": false, "score": 0, "last_activity_date": 1447235846, "creation_date": 1447235846, "answer_id": 33648103, "question_id": 33647914, "link": "https://stackoverflow.com/questions/33647914/sequence-of-numbers-with-multiples-of-10/33648103#33648103", "title": "Sequence of numbers with multiples of 10", "body": "<p>You could create a new Enumerator for this:</p>\n\n<pre><code>multiples_of_10 = Enumerator.new do |y|\n    x = 0\n    loop do\n        y &lt;&lt; x\n        x += 10\n    end\nend\n\nmultiples_of_10.take(8) # =&gt; [0, 10, 20, 30, 40, 50, 60, 70]\n</code></pre>\n"}], "owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 445, "favorite_count": 1, "accepted_answer_id": 33648026, "answer_count": 3, "score": 0, "last_activity_date": 1447235846, "creation_date": 1447235212, "question_id": 33647914, "link": "https://stackoverflow.com/questions/33647914/sequence-of-numbers-with-multiples-of-10", "title": "Sequence of numbers with multiples of 10", "body": "<p>I want show numbers in dropdown like 0,10,20,30,40,60,70</p>\n\n<p>For it I write </p>\n\n<pre><code>0..70\n</code></pre>\n\n<p>But it generate all numbers from 0 to 70 .I want only multiples of 10 </p>\n"}, {"tags": ["ruby", "html", "css", "postgresql", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 0, "creation_date": 1447249546, "post_id": 33647582, "comment_id": 55076938, "body": "Can you show the controller code that is handling the data submission from this form?"}, {"owner": {"reputation": 1180, "user_id": 4825744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10155467328840293/picture?type=large", "display_name": "Shawn Wilson", "link": "https://stackoverflow.com/users/4825744/shawn-wilson"}, "reply_to_user": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 0, "creation_date": 1447269488, "post_id": 33647582, "comment_id": 55089787, "body": "@ReggieB I will edit the post ASAP to include the controller, that may be the issue."}, {"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 0, "creation_date": 1447282644, "post_id": 33647582, "comment_id": 55096493, "body": "The controller looks OK. Could you also add the line where for form is declared?"}, {"owner": {"reputation": 1180, "user_id": 4825744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10155467328840293/picture?type=large", "display_name": "Shawn Wilson", "link": "https://stackoverflow.com/users/4825744/shawn-wilson"}, "reply_to_user": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 0, "creation_date": 1447283403, "post_id": 33647582, "comment_id": 55096791, "body": "here is the form_for: &lt;%= form_for(@call) do |f| %&gt;"}], "answers": [{"comments": [{"owner": {"reputation": 1180, "user_id": 4825744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10155467328840293/picture?type=large", "display_name": "Shawn Wilson", "link": "https://stackoverflow.com/users/4825744/shawn-wilson"}, "edited": false, "score": 0, "creation_date": 1447283113, "post_id": 33661413, "comment_id": 55096657, "body": "Ok, so when i add the collect select you provided above it is changing the user_id in the db (confirmed with Rails Console, however when i use  the following in my show page &lt;% @call.user.employee_ident %&gt; is still only pull, across the user_id in the first field.. do i need to adjust this as well some how? (i am knida new at this stuff.. but working to improve.. ill add my show page code above."}, {"owner": {"reputation": 1180, "user_id": 4825744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10155467328840293/picture?type=large", "display_name": "Shawn Wilson", "link": "https://stackoverflow.com/users/4825744/shawn-wilson"}, "edited": false, "score": 0, "creation_date": 1447298395, "post_id": 33661413, "comment_id": 55101161, "body": "The Answer works for adding the id to the model. ill award best answer to you. Thanks. i have started a new post to address how to access and display the info as it still only saves one of four user_id&#39;s NEW POST: <a href=\"http://stackoverflow.com/questions/33663703/saving-multiple-user-ids-in-a-rails-form-show-index\" title=\"saving multiple user ids in a rails form show index\">stackoverflow.com/questions/33663703/&hellip;</a>"}, {"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "reply_to_user": {"reputation": 1180, "user_id": 4825744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10155467328840293/picture?type=large", "display_name": "Shawn Wilson", "link": "https://stackoverflow.com/users/4825744/shawn-wilson"}, "edited": false, "score": 0, "creation_date": 1447317824, "post_id": 33661413, "comment_id": 55107712, "body": "@ShawnWilson you seem to have done most of the donkey work yourself, but I&#39;m glad my input was of some help."}], "tags": [], "owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "is_accepted": true, "score": 1, "last_activity_date": 1447282605, "creation_date": 1447282605, "answer_id": 33661413, "question_id": 33647582, "link": "https://stackoverflow.com/questions/33647582/how-to-use-several-collection-select-boxes-that-are-pulling-from-the-same-model/33661413#33661413", "title": "how to use several collection_select boxes that are pulling from the same model?", "body": "<p>The controller looks OK - so perhaps its the way the form is set up.</p>\n\n<p>What happens if you change from using the standalone <code>collection_select</code> to one called on the form object (f) So instead of:</p>\n\n<pre><code>&lt;%= collection_select(:call, :unit_1, User.all, :id, :employee_ident, {}, { :multiple =&gt; false } ) %&gt;\n</code></pre>\n\n<p>Try</p>\n\n<pre><code>&lt;%= f.collection_select(:unit_1, User.all, :id, :employee_ident, {}, { :multiple =&gt; false } ) %&gt;\n</code></pre>\n"}], "owner": {"reputation": 1180, "user_id": 4825744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10155467328840293/picture?type=large", "display_name": "Shawn Wilson", "link": "https://stackoverflow.com/users/4825744/shawn-wilson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 33661413, "answer_count": 1, "score": 1, "last_activity_date": 1447284244, "creation_date": 1447234002, "last_edit_date": 1447284244, "question_id": 33647582, "link": "https://stackoverflow.com/questions/33647582/how-to-use-several-collection-select-boxes-that-are-pulling-from-the-same-model", "title": "how to use several collection_select boxes that are pulling from the same model?", "body": "<p>I am building out a CAD app in Rails 4 and Ruby 2.2. </p>\n\n<p>The snag I have hit is as follows: </p>\n\n<p>I am attempting to use collection_select (Dynamic Select Boxes) to pull Users employee_ident numbers into several \"responding units\" lines. Some will be used some wont always be used. </p>\n\n<p>I have listed out in my index , form and edit pages 4 lines that are all relatively exact. they all refrence the user_id.. </p>\n\n<p>the problem I am finding is that when I select the unit for unit_1, then units 2 3 and 4 all pull over the user_id of the user I put in the first box.. </p>\n\n<p>here is the HTML and ERB for the entire panel in question: </p>\n\n<pre><code>&lt;div class=\"panel panel-success\" id=\"responding-box\"&gt;\n  &lt;div class=\"panel-heading\"&gt;&lt;center&gt;&lt;h4&gt;Units Responding&lt;/h4&gt;&lt;/center&gt;&lt;/div&gt;\n  &lt;table class=\"table\"&gt;\n    &lt;thead&gt;\n      &lt;tr&gt;\n        &lt;th&gt;&lt;center&gt;Unit #1&lt;/center&gt;&lt;/th&gt;\n        &lt;th&gt;&lt;center&gt;Time On Scene&lt;/center&gt;&lt;/th&gt;\n        &lt;th&gt;&lt;center&gt;Time Clear&lt;/center&gt;&lt;/th&gt;\n      &lt;/tr&gt;\n    &lt;/thead&gt;\n\n    &lt;tbody&gt;\n      &lt;tr&gt;\n        &lt;td&gt;&lt;center&gt;&lt;%= collection_select(:call, :unit_1, User.all, :id, :employee_ident, {}, { :multiple =&gt; false } ) %&gt;&lt;/center&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;center&gt;&lt;%= f.time_select :unit_on_scene %&gt;&lt;/center&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;center&gt;&lt;%= f.time_select :unit_clear %&gt;&lt;/center&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;/tbody&gt;\n  &lt;/table&gt;\n  &lt;br&gt;\n  &lt;table class=\"table\"&gt;\n    &lt;thead&gt;\n      &lt;tr&gt;\n        &lt;th&gt;&lt;center&gt;Unit #2&lt;/center&gt;&lt;/th&gt;\n        &lt;th&gt;&lt;center&gt;Time On Scene&lt;/center&gt;&lt;/th&gt;\n        &lt;th&gt;&lt;center&gt;Time Clear&lt;/center&gt;&lt;/th&gt;\n      &lt;/tr&gt;\n    &lt;/thead&gt;\n\n    &lt;tbody&gt;\n      &lt;tr&gt;\n        &lt;td&gt;&lt;center&gt;&lt;%= collection_select(:call, :unit_2, User.all, :id, :employee_ident, {}, { :multiple =&gt; false } ) %&gt;&lt;/center&gt;&lt;/td&gt; \n        &lt;td&gt;&lt;center&gt;&lt;%= f.time_select :unit2_os %&gt;&lt;/center&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;center&gt;&lt;%= f.time_select :unit2_cl %&gt;&lt;/center&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;/tbody&gt;\n  &lt;/table&gt;\n  &lt;br&gt;\n  &lt;table class=\"table\"&gt;\n    &lt;thead&gt;\n      &lt;tr&gt;\n        &lt;th&gt;&lt;center&gt;Unit #3&lt;/center&gt;&lt;/th&gt;\n        &lt;th&gt;&lt;center&gt;Time On Scene&lt;/center&gt;&lt;/th&gt;\n        &lt;th&gt;&lt;center&gt;Time Clear&lt;/center&gt;&lt;/th&gt;\n      &lt;/tr&gt;\n    &lt;/thead&gt;\n\n    &lt;tbody&gt;\n      &lt;tr&gt;\n        &lt;td&gt;&lt;center&gt;&lt;%= collection_select(:call, :unit_3, User.all, :id, :employee_ident, {}, { :multiple =&gt; false } ) %&gt;&lt;/center&gt;&lt;/td&gt; \n        &lt;td&gt;&lt;center&gt;&lt;%= f.time_select :unit3_os %&gt;&lt;/center&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;center&gt;&lt;%= f.time_select :unit3_cl %&gt;&lt;/center&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;/tbody&gt;\n  &lt;/table&gt;\n  &lt;br&gt;\n  &lt;table class=\"table\"&gt;\n    &lt;thead&gt;\n      &lt;tr&gt;\n        &lt;th&gt;&lt;center&gt;Unit #4&lt;/center&gt;&lt;/th&gt;\n        &lt;th&gt;&lt;center&gt;Time On Scene&lt;/center&gt;&lt;/th&gt;\n        &lt;th&gt;&lt;center&gt;Time Clear&lt;/center&gt;&lt;/th&gt;\n      &lt;/tr&gt;\n    &lt;/thead&gt;\n\n    &lt;tbody&gt;\n      &lt;tr&gt;\n      &lt;td&gt;&lt;center&gt;&lt;%= collection_select(:call, :unit_4, User.all, :id, :employee_ident, {}, { :multiple =&gt; false } ) %&gt;&lt;/center&gt;&lt;/td&gt; \n        &lt;td&gt;&lt;center&gt;&lt;%= f.time_select :unit4_os %&gt;&lt;/center&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;center&gt;&lt;%= f.time_select :unit4_cl %&gt;&lt;/center&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;/tbody&gt;\n  &lt;/table&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I put back the unit_1 through unit_4 so you can see what I am trying to do, but originally I had </p>\n\n<pre><code>&lt;td&gt;&lt;center&gt;&lt;%= collection_select(:call, :user_id, User.all, :id, :employee_ident, {}, { :multiple =&gt; false } ) %&gt;&lt;/center&gt;&lt;/td&gt;\n</code></pre>\n\n<p>but with unit_1 through 4 even if I set it an an integer it still doesn't pull when I try to connect it like this: </p>\n\n<pre><code>&lt;%= @call.user.employee_ident %&gt;\n</code></pre>\n\n<p><strong>My current Controller Looks Like:</strong> </p>\n\n<pre><code>class CallsController &lt; ApplicationController\n  before_action :set_call, only: [:show, :edit, :update, :destroy]\n\n  # GET /calls\n  # GET /calls.json\n  def index\n    @calls = Call.all\n    @active_calls = @calls.select{|x| x.status == 'ACTIVE'}\n    @pending_calls = @calls.select{|x| x.status == 'PENDING'}\n  end\n\n  # GET /calls/1\n  # GET /calls/1.json\n  def show\n  end\n\n  # GET /calls/new\n  def new\n    @call = Call.new\n  end\n\n  # GET /calls/1/edit\n  def edit\n    @call = Call.find(params[:id])\n  end\n\n  # POST /calls\n  # POST /calls.json\n  def create\n    @call = Call.new(call_params)\n\n    respond_to do |format|\n      if @call.save\n        format.html { redirect_to @call, notice: 'Call was successfully created.' }\n        format.json { render :show, status: :created, location: @call }\n      else\n        format.html { render :new }\n        format.json { render json: @call.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /calls/1\n  # PATCH/PUT /calls/1.json\n  def update\n    respond_to do |format|\n      if @call.update(call_params)\n        format.html { redirect_to @call, notice: 'Call was successfully updated.' }\n        format.json { render :show, status: :ok, location: @call }\n      else\n        format.html { render :edit }\n        format.json { render json: @call.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /calls/1\n  # DELETE /calls/1.json\n  def destroy\n    @call.destroy\n    respond_to do |format|\n      format.html { redirect_to calls_url, notice: 'Call was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_call\n      @call = Call.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def call_params\n      params.require(:call).permit(:call_time, :status, :primary_type, :secondary_type, :site, :address, :unit_1, :unit_2, :unit_3, :unit_4, :call_details, :unit_on_scene, :unit_clear, :call_num, :site_id, :user_id, :unit2_os, :unit2_cl, :unit3_os, :unit3_cl, :unit4_os, :unit4_cl)\n    end\nend\n</code></pre>\n\n<p><strong>Show Page Code:</strong> </p>\n\n<pre><code>  &lt;div class=\"panel panel-success\" id=\"responding-box\"&gt;\n      &lt;div class=\"panel-heading\"&gt;&lt;center&gt;&lt;h4&gt;Units Responding&lt;/h4&gt;&lt;/center&gt;&lt;/div&gt;\n      &lt;table class=\"table\"&gt;\n        &lt;thead&gt;\n          &lt;tr&gt;\n            &lt;th&gt;&lt;center&gt;Unit #1&lt;/center&gt;&lt;/th&gt;\n            &lt;th&gt;&lt;center&gt;Time On Scene&lt;/center&gt;&lt;/th&gt;\n            &lt;th&gt;&lt;center&gt;Time Clear&lt;/center&gt;&lt;/th&gt;\n          &lt;/tr&gt;\n        &lt;/thead&gt;\n\n        &lt;tbody&gt;\n          &lt;tr&gt;\n            &lt;td&gt;&lt;center&gt;&lt;%= @call.user.employee_ident %&gt;&lt;/center&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;center&gt;&lt;%= @call.unit_on_scene.strftime(\"%H:%m\") %&gt;&lt;/center&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;center&gt;&lt;%= @call.unit_clear.strftime(\"%H:%m\") %&gt;&lt;/center&gt;&lt;/td&gt;\n          &lt;/tr&gt;\n        &lt;/tbody&gt;\n      &lt;/table&gt;\n      &lt;br&gt;\n      &lt;table class=\"table\"&gt;\n        &lt;thead&gt;\n          &lt;tr&gt;\n            &lt;th&gt;&lt;center&gt;Unit #2&lt;/center&gt;&lt;/th&gt;\n            &lt;th&gt;&lt;center&gt;Time On Scene&lt;/center&gt;&lt;/th&gt;\n            &lt;th&gt;&lt;center&gt;Time Clear&lt;/center&gt;&lt;/th&gt;\n          &lt;/tr&gt;\n        &lt;/thead&gt;\n\n        &lt;tbody&gt;\n          &lt;tr&gt;\n            &lt;td&gt;&lt;center&gt;&lt;%= @call.user.employee_ident %&gt;&lt;/center&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;center&gt;&lt;%= @call.unit2_os.strftime(\"%H:%m\") %&gt;&lt;/center&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;center&gt;&lt;%= @call.unit2_cl.strftime(\"%H:%m\") %&gt;&lt;/center&gt;&lt;/td&gt;\n          &lt;/tr&gt;\n        &lt;/tbody&gt;\n      &lt;/table&gt;\n      &lt;br&gt;\n      &lt;table class=\"table\"&gt;\n        &lt;thead&gt;\n          &lt;tr&gt;\n            &lt;th&gt;&lt;center&gt;Unit #3&lt;/center&gt;&lt;/th&gt;\n            &lt;th&gt;&lt;center&gt;Time On Scene&lt;/center&gt;&lt;/th&gt;\n            &lt;th&gt;&lt;center&gt;Time Clear&lt;/center&gt;&lt;/th&gt;\n          &lt;/tr&gt;\n        &lt;/thead&gt;\n\n        &lt;tbody&gt;\n          &lt;tr&gt;\n            &lt;td&gt;&lt;center&gt;&lt;%= @call.user.employee_ident %&gt;&lt;/center&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;center&gt;&lt;%= @call.unit3_os.strftime(\"%H:%m\") %&gt;&lt;/center&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;center&gt;&lt;%= @call.unit3_cl.strftime(\"%H:%m\") %&gt;&lt;/center&gt;&lt;/td&gt;\n          &lt;/tr&gt;\n        &lt;/tbody&gt;\n      &lt;/table&gt;\n      &lt;br&gt;\n      &lt;table class=\"table\"&gt;\n        &lt;thead&gt;\n          &lt;tr&gt;\n            &lt;th&gt;&lt;center&gt;Unit #4&lt;/center&gt;&lt;/th&gt;\n            &lt;th&gt;&lt;center&gt;Time On Scene&lt;/center&gt;&lt;/th&gt;\n            &lt;th&gt;&lt;center&gt;Time Clear&lt;/center&gt;&lt;/th&gt;\n          &lt;/tr&gt;\n        &lt;/thead&gt;\n\n        &lt;tbody&gt;\n          &lt;tr&gt;\n            &lt;td&gt;&lt;center&gt;&lt;%= @call.user.employee_ident %&gt;&lt;/center&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;center&gt;&lt;%= @call.unit4_os.strftime(\"%H:%m\") %&gt;&lt;/center&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;center&gt;&lt;%= @call.unit4_cl.strftime(\"%H:%m\") %&gt;&lt;/center&gt;&lt;/td&gt;\n          &lt;/tr&gt;\n        &lt;/tbody&gt;\n      &lt;/table&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p>Rails Console Output: </p>\n\n<pre><code>2.2.0 :013 &gt; c = Call.last\n  Call Load (0.4ms)  SELECT  \"calls\".* FROM \"calls\"  ORDER BY \"calls\".\"id\" DESC LIMIT 1\n =&gt; #&lt;Call id: 3, call_time: \"2015-11-11 09:31:00\", status: \"ACTIVE\", primary_type: \"EXPLOSION\", secondary_type: \"N/A\", address: nil, unit_1: \"1\", unit_2: \"2\", unit_3: \"3\", unit_4: \"1\", call_details: \"Reports of explosion at location, proceed with cau...\", unit_on_scene: \"2000-01-01 09:31:00\", unit_clear: \"2000-01-01 09:31:00\", site_id: 2, created_at: \"2015-11-11 09:32:44\", updated_at: \"2015-11-11 23:08:42\", user_id: 1, unit2_os: \"2000-01-01 09:57:00\", unit2_cl: \"2000-01-01 09:57:00\", unit3_os: \"2000-01-01 09:57:00\", unit3_cl: \"2000-01-01 09:57:00\", unit4_os: \"2000-01-01 09:57:00\", unit4_cl: \"2000-01-01 09:57:00\", call_number: 1001&gt;\n</code></pre>\n\n<p><strong>As you can see it is adding the user_id of employee_idents 4114, 4112, 4113 in the unit_1, 2, 3, and 4 boxes, but all that is being out put is the data from the user_id column in the DB.. is there anyway i can store several user_id's in a single user_id record?</strong> </p>\n\n<p>which will give me the employee_ident of 4114 displaying clearly in the Show, Index pages ect.. </p>\n\n<p>Any help would be greatly appreciated, I'm stumped here.. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "prawn"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 5430122, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5fbb05c286c6bb5de71afb989e16c39f?s=128&d=identicon&r=PG&f=1", "display_name": "Raafat Hamzeh", "link": "https://stackoverflow.com/users/5430122/raafat-hamzeh"}, "edited": false, "score": 0, "creation_date": 1447233691, "post_id": 33647027, "comment_id": 55068357, "body": "Thank you so much, I think it worked, but now I have this error: no such file to load -- i18n/backend/fallbacks (MissingSourceFile), do you have any idea how to solve this?"}, {"owner": {"reputation": 562, "user_id": 1112633, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a3a8118d83fd2bf1975c210bd1fa531d?s=128&d=identicon&r=PG", "display_name": "MC2DX", "link": "https://stackoverflow.com/users/1112633/mc2dx"}, "reply_to_user": {"reputation": 25, "user_id": 5430122, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5fbb05c286c6bb5de71afb989e16c39f?s=128&d=identicon&r=PG&f=1", "display_name": "Raafat Hamzeh", "link": "https://stackoverflow.com/users/5430122/raafat-hamzeh"}, "edited": false, "score": 0, "creation_date": 1447236332, "post_id": 33647027, "comment_id": 55069814, "body": "I think it is the same problem, add this gem <a href=\"https://github.com/svenfuchs/i18n\" rel=\"nofollow noreferrer\">github.com/svenfuchs/i18n</a>. Better for you is using default gems generated by <code>$ rails new app_gen</code> in your console. It can help in near future."}], "tags": [], "owner": {"reputation": 562, "user_id": 1112633, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a3a8118d83fd2bf1975c210bd1fa531d?s=128&d=identicon&r=PG", "display_name": "MC2DX", "link": "https://stackoverflow.com/users/1112633/mc2dx"}, "is_accepted": false, "score": 1, "last_activity_date": 1447231921, "creation_date": 1447231921, "answer_id": 33647027, "question_id": 33645948, "link": "https://stackoverflow.com/questions/33645948/ruby-on-rails-application-couldnt-be-started-no-such-file-to-load-multi-json/33647027#33647027", "title": "Ruby on Rails application couldn&#39;t be started: no such file to load --multi_json (MissingSourceFile)", "body": "<p>Add to your Gemfile</p>\n\n<pre><code>gem 'multi_json', '~&gt; 1.11', '&gt;= 1.11.2'\n</code></pre>\n\n<p>and then execute <code>bundle install</code>. There could be a problem with dependencies and not enough gems in your Gemfile.</p>\n"}, {"tags": [], "owner": {"reputation": 702, "user_id": 3640056, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/eca89ea945abf236fc6a465e454729a2?s=128&d=identicon&r=PG&f=1", "display_name": "user3640056", "link": "https://stackoverflow.com/users/3640056/user3640056"}, "is_accepted": true, "score": 0, "last_activity_date": 1447482498, "creation_date": 1447482498, "answer_id": 33705788, "question_id": 33645948, "link": "https://stackoverflow.com/questions/33645948/ruby-on-rails-application-couldnt-be-started-no-such-file-to-load-multi-json/33705788#33705788", "title": "Ruby on Rails application couldn&#39;t be started: no such file to load --multi_json (MissingSourceFile)", "body": "<p>You have a lot of unnecessary gems, for fedena these are the gems you should have:</p>\n\n<pre><code>actionmailer (2.3.5)\nactionpack (2.3.5)\nactiverecord (2.3.5)\nactiveresource (2.3.5)\nactivesupport (2.3.5)\nAscii85 (1.0.2)\nbundler (1.10.6, 1.0.22)\ndaemon_controller (1.0.0)\ndeclarative_authorization (0.5.1)\nfaraday (0.9.1)\nfastercsv (1.5.5)\nfastthread (1.0.7)\ngit (1.2.9.1)\nhashery (2.1.1)\nhttpauth (0.2.1)\ni18n (0.4.2)\njson (1.6.5)\nmulti_json (1.11.2)\nmultipart-post (2.0.0)\nmysql (2.9.1)\nnokogiri (1.5.6)\noauth2 (0.6.1)\npassenger (3.0.11)\nrack (1.4.1, 1.0.1)\nrack-cache (1.1)\nrack-ssl (1.3.2)\nrack-test (0.6.1)\nrails (2.3.5)\nrake (0.8.7)\nrdoc (3.12)\nruby-progressbar (1.7.5)\nruby-rc4 (0.1.5)\nrush (0.6.8)\nsearchlogic (2.5.19)\nsession (3.2.0)\ntzinfo (0.3.31)\nvalidatable (1.6.7)\nvote_fu (0.0.11)\n</code></pre>\n\n<p>So uninstall other gems, and remove multi_json folder in addition to Gemfile and Gemfile.lock files, and try this command:</p>\n\n<pre><code>gem install prawn -v 0.6.3\n</code></pre>\n\n<p>Hope it works.</p>\n"}], "owner": {"reputation": 25, "user_id": 5430122, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5fbb05c286c6bb5de71afb989e16c39f?s=128&d=identicon&r=PG&f=1", "display_name": "Raafat Hamzeh", "link": "https://stackoverflow.com/users/5430122/raafat-hamzeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1124, "favorite_count": 0, "accepted_answer_id": 33705788, "answer_count": 2, "score": 0, "last_activity_date": 1544443450, "creation_date": 1447226854, "last_edit_date": 1544443450, "question_id": 33645948, "link": "https://stackoverflow.com/questions/33645948/ruby-on-rails-application-couldnt-be-started-no-such-file-to-load-multi-json", "title": "Ruby on Rails application couldn&#39;t be started: no such file to load --multi_json (MissingSourceFile)", "body": "<p>I'm new to ruby on rails, and I wanted to install Prawn Library. But running <code>gem install prawn</code> fails and I get <code>ttfunk requires ruby version 1.9.3</code> . So I had to add gem 'prawn', '0.12.0' to the Gemfile, and I noticed that there is no such file in our project, so I added it under:</p>\n\n<pre><code>source 'https://rubygems.org'\ngem 'rake', '0.8.7'\ngem 'rails', '2.3.5'\ngem 'prawn', '0.12.0'\n</code></pre>\n\n<p>This is the <code>gem list</code>:</p>\n\n<pre><code>actionmailer (2.3.5)\nactionpack (2.3.5)\nactivemodel (3.2.1)\nactiverecord (2.3.5)\nactiveresource (2.3.5)\nactivesupport (2.3.5)\nafm (0.2.2)\narel (3.0.1)\nAscii85 (1.0.2)\nbuilder (3.0.0)\nbundler (1.0.22)\ndaemon_controller (1.0.0)\ndeclarative_authorization (0.5.1)\nerubis (2.7.0)\nfaraday (0.9.1)\nfastercsv (1.5.5)\nfastthread (1.0.7)\ngit (1.2.9.1)\nhashery (2.1.1)\nhike (1.2.1)\nhttpauth (0.2.1)\ni18n (0.4.2)\njourney (1.0.2)\njson (1.6.5)\nmail (2.4.1)\nmime-types (1.17.2)\nmulti_json (1.8.2)\nmultipart-post (2.0.0)\nmysql (2.9.1)\nnokogiri (1.5.6)\noauth2 (0.6.1)\npassenger (3.0.11)\npdf-reader (1.3.3)\npolyglot (0.3.3)\nprawn (0.12.0)\nprawn-core (0.6.3)\nrack (1.4.1, 1.0.1)\nrack-cache (1.1)\nrack-ssl (1.3.2)\nrack-test (0.6.1)\nrails (2.3.5)\nrailties (3.2.1)\nrake (0.8.7)\nrdoc (3.12)\nruby-progressbar (1.7.5)\nruby-rc4 (0.1.5)\nrubygems-update (1.3.7)\nrush (0.6.8)\nsearchlogic (2.5.19)\nsession (3.2.0)\nsprockets (2.1.2)\nthor (0.14.6)\ntilt (1.3.3)\ntreetop (1.4.10)\nttfunk (1.0.3)\ntzinfo (0.3.31)\nvalidatable (1.6.7)\nvote_fu (0.0.11)\n</code></pre>\n\n<p>So you can notice that multi_json is installed as a gem. I tried uninstalling and re-installing it, I also checked its permissions, and tried to restart nginx server several times, but none of this worked. I'm not able to solve this problem, I opened the dependencies.rb file where the error points to and I found this:</p>\n\n<pre><code>def require(file, *extras) #:nodoc:\n    if Dependencies.load?\n      Dependencies.new_constants_in(Object) { super }\n    else\n</code></pre>\n\n<p>#line 58        <code>super</code></p>\n\n<pre><code> end\n  rescue Exception =&gt; exception  # errors from required file\n    exception.blame_file! file\n    raise\n  end\n</code></pre>\n\n<p>Please help me figure this out.</p>\n\n<p>UPDATE: Big thanks for Mateusz Czerwi\u0144ski I added <code>gem 'multi_json', '~&gt; 1.11', '&gt;= 1.11.2'</code> to my gemfile and run bundle install, and the first error is gone. but now I'm getting this error:</p>\n\n<pre><code>no such file to load -- i18n/backend/fallbacks (MissingSourceFile)\n</code></pre>\n\n<p>I checked the gem list and I have i18n (0.4.2) installed.I also checked if i18n/backend/fallbacks.rb file is there, and I found it under ruby/gems/1.8/gems/i18n-0.4.2/lib/i18n/backend, and I changed its permissions. But still it didn't work.</p>\n\n<p>I copied the gems required by multi_json from /usr/local/lib/ruby to /multi_json/ruby. This seems to fix the gems errors, but I'm having the following error now:</p>\n\n<pre><code>Error message:\n    uninitialized constant FedenaPlugin::Authorization\nException class:\n    NameError\n</code></pre>\n\n<p>I don't understand why all these errors are here, and why installing a gem caused my application to stop. And I don't understand what the last error indicate.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 1364, "user_id": 3802688, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5dd6d7ca4269119b95035d02a0bf48ef?s=128&d=identicon&r=PG", "display_name": "Beengie", "link": "https://stackoverflow.com/users/3802688/beengie"}, "edited": false, "score": 0, "creation_date": 1447224434, "post_id": 33645468, "comment_id": 55064434, "body": "sorry about the typo. I corrected it now... i messed up with all the spaces to make it turn into code. It is now correct code for what i have, but still broken with the same error."}], "tags": [], "owner": {"reputation": 8486, "user_id": 239816, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ecdb231117dda838340bfcbb8873d28e?s=128&d=identicon&r=PG", "display_name": "Paul Cantrell", "link": "https://stackoverflow.com/users/239816/paul-cantrell"}, "is_accepted": false, "score": 1, "last_activity_date": 1447224076, "creation_date": 1447224076, "answer_id": 33645468, "question_id": 33645405, "link": "https://stackoverflow.com/questions/33645405/rspec-undefined-local-variable-or-method-response/33645468#33645468", "title": "RSPEC undefined local variable or method `response&#39;", "body": "<p>You have an <code>expect</code> outside of your <code>it</code> block. That will cause all kinds of haywire.</p>\n\n<p>All assertions (and test setup code) should be nested within <code>it</code>, <code>before</code> and <code>after</code> blocks.</p>\n"}, {"comments": [{"owner": {"reputation": 1364, "user_id": 3802688, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5dd6d7ca4269119b95035d02a0bf48ef?s=128&d=identicon&r=PG", "display_name": "Beengie", "link": "https://stackoverflow.com/users/3802688/beengie"}, "edited": false, "score": 0, "creation_date": 1447225628, "post_id": 33645683, "comment_id": 55064831, "body": "Thank you. As you can see by my edit. I was starting to think down those same lines about whether or not response was even valid in a feature spec."}], "tags": [], "owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "is_accepted": true, "score": 10, "last_activity_date": 1447225434, "creation_date": 1447225434, "answer_id": 33645683, "question_id": 33645405, "link": "https://stackoverflow.com/questions/33645405/rspec-undefined-local-variable-or-method-response/33645683#33645683", "title": "RSPEC undefined local variable or method `response&#39;", "body": "<p>You're writing a <a href=\"https://www.relishapp.com/rspec/rspec-rails/v/3-3/docs/feature-specs/feature-spec\">feature spec</a>. With feature specs, there is no response object. By design, with a feature spec you don't test using low level concerns such as what template was rendered, but higher level ones such as expected content being on the page.</p>\n\n<p>You may be interested in <a href=\"https://www.relishapp.com/rspec/rspec-rails/v/3-3/docs/request-specs/request-spec\">request specs</a> which map onto rails' integration tests and thus allow specs that span multiple requests but do expose response methods. </p>\n\n<p>However you can't (or at least shouldn't) use capybara (<code>visit</code>, <code>click_button</code>, etc) inside request specs - many hours have been lost to problems that boiled down to mixing integration test language (<code>get</code>, <code>post</code>, <code>response</code>) and capybara. The two exist in completely separate worlds, for example a request triggered by capybara has no effect on <code>response</code> and a request triggered by <code>get</code> has no effect on <code>page</code>.</p>\n"}], "owner": {"reputation": 1364, "user_id": 3802688, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5dd6d7ca4269119b95035d02a0bf48ef?s=128&d=identicon&r=PG", "display_name": "Beengie", "link": "https://stackoverflow.com/users/3802688/beengie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2293, "favorite_count": 0, "accepted_answer_id": 33645683, "answer_count": 2, "score": 3, "last_activity_date": 1447225512, "creation_date": 1447223790, "last_edit_date": 1447225512, "question_id": 33645405, "link": "https://stackoverflow.com/questions/33645405/rspec-undefined-local-variable-or-method-response", "title": "RSPEC undefined local variable or method `response&#39;", "body": "<p>I am getting an error on the 'response' for...</p>\n\n<p>spec/features/test_name_spec.rb</p>\n\n<pre><code>require \"spec_helper\"\n\ndescribe \"the signin process\", :type =&gt; :feature do\n  it \"does not sign me in if I use the wrong password\" do\n    visit '/users/sign_in'\n    within(\"#new_user\") do\n      user = Fabricate(:user, email: 'user@example.com', password: 'password')\n      fill_in 'Email', :with =&gt; 'user@ example.com'\n      fill_in 'Password', :with =&gt; 'badone'\n    end\n    click_button 'Log in'\n    expect(response).to render_template(:new)\n  end\nend\n</code></pre>\n\n<p>the gemfile</p>\n\n<pre><code>group :test do\n  gem 'shoulda-matchers', '~&gt; 2.8', require: false # now loaded inside of spec/spec_helper.rb\n  gem 'capybara', '~&gt;2.4'\n  gem 'launchy'\n  gem 'capybara-email', github: \"dockyard/capybara-email\"\n  gem 'database_cleaner', '~&gt; 1.5', '&gt;= 1.5.1'\nend\n</code></pre>\n\n<p>I am confused since the test above this one succeeds using expect but with <code>page</code></p>\n\n<pre><code>expect(page).to have_content 'Signed in successfully.'\n</code></pre>\n\n<p>What could be going on here?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I have changed it to...</p>\n\n<pre><code>expect(page).to have_content 'Log in'\n</code></pre>\n\n<p>which is basically the same thing, but I would still like to know why the <code>response</code> is erring. Is it not available in Capybara, or is there another problem why that would not work? </p>\n"}, {"tags": ["ruby", "hash"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 3, "last_activity_date": 1447228438, "last_edit_date": 1447228438, "creation_date": 1447227653, "answer_id": 33646103, "question_id": 33645172, "link": "https://stackoverflow.com/questions/33645172/default-value-is-the-same-object-in-hash-data-type-in-ruby/33646103#33646103", "title": "&quot;Default value is the same object&quot; in hash data type in ruby", "body": "<p><code>hash = Hash.new(INITIAL_VALUE)</code> is a syntax for creating hash, that has a default value. Default value <em>is a \u201cproperty\u201d of the whole hash itself</em>, it is to be returned when a non-existent key is accessed. </p>\n\n<p>So, in your first example:</p>\n\n<pre><code>hash = Hash.new([]) # return a reference to an empty array for unknown keys\n</code></pre>\n\n<p>is the same as:</p>\n\n<pre><code>initial = []\nhash = Hash.new(initial)\n</code></pre>\n\n<p>hence, when you call:</p>\n\n<pre><code>hash[:one] &lt;&lt; \"uno\"\n</code></pre>\n\n<p>you in fact call <code>hash[:one]</code>, that returns <code>initial</code>, and then call <code>#&lt;&lt;</code> method on it. In other words, these subsequent calls are the same as:</p>\n\n<pre><code>initial &lt;&lt; \"uno\"\ninitial &lt;&lt; \"dos\"\n</code></pre>\n\n<p>I guess, it is now clear, why all of them are sharing the same value. And the hash itself is still empty (on any call above, the <code>initial</code> is being used.) Look:</p>\n\n<pre><code>hash.merge! { one: \"uno\", three: \"tres\" }\nhash[:one] # defined, since merge above\n#\u21d2 \"uno\"\nhash[:two] # undefined, initial will be returned\n#\u21d2 []\nhash[:two] &lt;&lt; 'dos'\nhash[:two] # defined, but defined as a reference to initial\n#\u21d2 [\"dos\"]\nhash[:two] = 'zwei' # redefined\n#\u21d2 \"zwei\"\nhash[:four] # undefined, initial\n#\u21d2 [\"dos\"]\n</code></pre>\n\n<p>Hope it helps.</p>\n"}, {"comments": [{"owner": {"reputation": 187, "user_id": 5298978, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/acf6a54c855a70a7bcb2505163ff65f2?s=128&d=identicon&r=PG&f=1", "display_name": "Sharvari Nagesh", "link": "https://stackoverflow.com/users/5298978/sharvari-nagesh"}, "edited": false, "score": 0, "creation_date": 1447283727, "post_id": 33646475, "comment_id": 55096929, "body": "Thank you. This answers my doubt"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 5, "last_activity_date": 1447286337, "last_edit_date": 1447286337, "creation_date": 1447229391, "answer_id": 33646475, "question_id": 33645172, "link": "https://stackoverflow.com/questions/33645172/default-value-is-the-same-object-in-hash-data-type-in-ruby/33646475#33646475", "title": "&quot;Default value is the same object&quot; in hash data type in ruby", "body": "<p><strong><code>hash = Hash.new([])</code></strong></p>\n\n<p>This statement creates an empty hash that has a default value of an empty array. If <code>hash</code> does not have a key <code>k</code>, <code>hash[k]</code> returns the default value, <code>[]</code>. This is important: simply returning the default value does <em>not</em> modify the hash.</p>\n\n<p>When you write:</p>\n\n<pre><code>hash[:one] &lt;&lt; \"uno\" #=&gt; [\"uno\"]\n</code></pre>\n\n<p>before <code>hash</code> has a key <code>:one</code>, <code>hash[:one]</code> is replaced by the default value, so we have:</p>\n\n<pre><code>[] &lt;&lt; \"uno\" #=&gt; [\"uno\"]\n</code></pre>\n\n<p>which explains why <code>hash</code> is not changed:</p>\n\n<pre><code>hash #=&gt; {}\n</code></pre>\n\n<p>Now write:</p>\n\n<pre><code>hash[:two] &lt;&lt; \"dos\" #=&gt; [\"uno\", \"dos\"]\nhash                #=&gt; {}\n</code></pre>\n\n<p>To see why we get this result, let's re-write the above as follows:</p>\n\n<pre><code>hash = Hash.new([])       #=&gt; {} \nhash.default              #=&gt; [] \nhash.default.object_id    #=&gt; 70209931469620 \na = (hash[:one] &lt;&lt; \"uno\") #=&gt; [\"uno\"] \na.object_id               #=&gt; 70209931469620 \nhash.default              #=&gt; [\"uno\"]  \nb = (hash[:two] &lt;&lt; \"dos\") #=&gt; [\"uno\", \"dos\"] \nb.object_id               #=&gt; 70209931469620 \nhash.default              #=&gt; [\"uno\", \"dos\"]  \n</code></pre>\n\n<p>So you see that the default array whose <code>object_id</code> is <code>70209931469620</code> is the single array to which \"uno\" and \"dos\" are appended.</p>\n\n<p>If we had instead written:</p>\n\n<pre><code>hash[:one] = hash[:one] &lt;&lt; \"uno\"\n  #=&gt; hash[:one] = [] &lt;&lt; \"uno\" =&gt; [\"uno\"]\nhash #=&gt; { :one=&gt;\"uno\" }\n</code></pre>\n\n<p>we get what we were hoping for, but not so fast:</p>\n\n<pre><code>hash[:two] = hash[:two] &lt;&lt; \"dos\"\n  #=&gt; [\"uno\", \"dos\"] \nhash\n  #=&gt; {:one=&gt;[\"uno\", \"dos\"], :two=&gt;[\"uno\", \"dos\"]} \n</code></pre>\n\n<p>which is still not what we want because both keys have values that are the same array.</p>\n\n<p><strong><code>hash = Hash.new {|hash, key| hash[key] = [] }</code></strong></p>\n\n<p>This statements causes the block to be executed when <code>hash</code> does not have a key <code>key</code>. This <em>does</em> change the hash, by adding a key value pair<sup>1</sup>.</p>\n\n<p>So now:</p>\n\n<pre><code>hash[:one] &lt;&lt; \"uno\"\n</code></pre>\n\n<p>causes the block:</p>\n\n<pre><code>{ |h,k| h[k] = [] }\n</code></pre>\n\n<p>to make the assignment:</p>\n\n<pre><code>hash[:one] = []\n</code></pre>\n\n<p>after which:</p>\n\n<pre><code>hash[:one] &lt;&lt; \"uno\"\n</code></pre>\n\n<p>appends <code>\"uno\"</code> to an empty array that is the value for the key <code>:one</code>, which we can verify:</p>\n\n<pre><code>hash #=&gt; { :one=&gt;\"uno\" }\n</code></pre>\n\n<p>This has the same effect as writing:</p>\n\n<pre><code>hash[:one] = (hash[:one] || []) &lt;&lt; \"uno\"\n</code></pre>\n\n<p>(the expanded version of <code>(hash[:one] ||= []) &lt;&lt; \"uno\"</code>) when there is no default value.</p>\n\n<p>Similarly,</p>\n\n<pre><code>hash[:two] &lt;&lt; \"dos\" #=&gt; [\"dos\"] \nhash #=&gt; {:one=&gt;[\"uno\"], :two=&gt;[\"dos\"]}\n</code></pre>\n\n<p>which is usually the result we want.</p>\n\n<p><sup>1 The block need not change the hash, however. The block can contain any code, including, for example, <code>{ puts \"Have a nice day\" }</code>.</sup></p>\n"}], "owner": {"reputation": 187, "user_id": 5298978, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/acf6a54c855a70a7bcb2505163ff65f2?s=128&d=identicon&r=PG&f=1", "display_name": "Sharvari Nagesh", "link": "https://stackoverflow.com/users/5298978/sharvari-nagesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 574, "favorite_count": 0, "closed_date": 1482848156, "accepted_answer_id": 33646475, "answer_count": 2, "score": 3, "last_activity_date": 1447286337, "creation_date": 1447222320, "last_edit_date": 1447226970, "question_id": 33645172, "link": "https://stackoverflow.com/questions/33645172/default-value-is-the-same-object-in-hash-data-type-in-ruby", "closed_reason": "Duplicate", "title": "&quot;Default value is the same object&quot; in hash data type in ruby", "body": "<p>I am new to Ruby and running Ruby Koans. In Ruby Koans, in about_hashes.rb file, there is an example of assigning default value to a hash. </p>\n\n<pre><code>hash = Hash.new([])\nhash[:one] &lt;&lt; \"uno\"\nhash[:two] &lt;&lt; \"dos\"\n\nputs hash[:one]  # this is  [\"uno\", \"dos\"]\n</code></pre>\n\n<p>here both <code>hash[:one]</code> &amp; <code>hash[:two]</code> or any key like <code>hash[:three]</code> (non existing key) all have the value [\"uno\", and \"dos\"] I did not understand how \"&lt;&lt;\" is used here. Also, when I tried extracting keys &amp; values of the hash, or print the keys/values, it is empty. </p>\n\n<pre><code>puts (hash.values.size)  # size is 0 here\nputs (hash.keys.size)    # size is 0 \nputs hash.values         # nothing gets printed\nputs hash.keys           #nothing gets printed.\n</code></pre>\n\n<p>So what is happening here? Where are the values getting stored, if they are not getting stored in the hash as keys or values.</p>\n\n<p>in the next example, when Hash is defined as </p>\n\n<pre><code>hash = Hash.new {|hash, key| hash[key] = [] }\nhash[:one] &lt;&lt; \"uno\"\nhash[:two] &lt;&lt; \"dos\"\nputs hash[:one]  #this is \"uno\"\nputs hash[:two] #this is \"dos\"\nputs hash[:three] # this is undefined.\n</code></pre>\n\n<p>I guess in the second example, hash is initializing all the keys with a blank array. So \"uno\" is getting appended to the empty array when \"&lt;&lt;\" this operator is used? I am confused about both the examples. I don't know what is happening in both of them. I couldn't find much information on this example in google as well. If somebody can help me explain these 2 examples it will be helpful. Thanks in advance </p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 312231, "user_id": 2225682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4958f4712d94ab82fe55fa471308e4b5?s=128&d=identicon&r=PG", "display_name": "falsetru", "link": "https://stackoverflow.com/users/2225682/falsetru"}, "is_accepted": true, "score": 9, "last_activity_date": 1447220454, "last_edit_date": 1447220454, "creation_date": 1447219549, "answer_id": 33644741, "question_id": 33644673, "link": "https://stackoverflow.com/questions/33644673/getting-file-name-in-ruby-where-method-was-called/33644741#33644741", "title": "Getting file name in ruby where method was called", "body": "<p>You can use <a href=\"http://ruby-doc.org/core/Kernel.html#method-i-caller\" rel=\"noreferrer\"><code>Kernel#caller</code></a> which returns the current execution stack \u2014 an array containing strings in the form <code>file:line</code> or <code>file:line: in 'method'</code>:</p>\n\n<pre><code>def foo\n  caller[0][/[^:]+/]  # OR  caller[0].split(':')[0]\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "is_accepted": false, "score": 7, "last_activity_date": 1447233744, "last_edit_date": 1447233744, "creation_date": 1447232337, "answer_id": 33647142, "question_id": 33644673, "link": "https://stackoverflow.com/questions/33644673/getting-file-name-in-ruby-where-method-was-called/33647142#33647142", "title": "Getting file name in ruby where method was called", "body": "<p>@falsetru's answer is correct, but I thought I'd add this bit of code to demonstrate the different outputs of the methods proposed.</p>\n\n<p>Two files.</p>\n\n<p><strong>hosting.rb</strong></p>\n\n<pre><code>class Hosting\n  def self.foo\n    puts \"__FILE__: #{__FILE__}\"\n    puts \"__method__: #{__method__}\"\n    puts \"caller: #{caller}\"\n    puts \"caller_locations.first.path: #{caller_locations.first.path}\"\n  end\nend\n</code></pre>\n\n<p><strong>calling.rb</strong></p>\n\n<pre><code>require_relative 'hosting'\nHosting.foo\n</code></pre>\n\n<p><strong>On:</strong> <code>ruby calling.rb</code> the output is:</p>\n\n<pre><code>__FILE__: /path/to/hosting.rb\n__method__: foo\ncaller: [\"calling.rb:2:in `&lt;main&gt;'\"]\ncaller_locations.first.path: calling.rb\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 0, "creation_date": 1447234023, "post_id": 33647354, "comment_id": 55068505, "body": "There is also an <code>absolute_path</code> method on <code>Thread::Backtrace::Location</code> if you want the full path to the file."}], "tags": [], "owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "is_accepted": false, "score": 10, "last_activity_date": 1447233217, "creation_date": 1447233217, "answer_id": 33647354, "question_id": 33644673, "link": "https://stackoverflow.com/questions/33644673/getting-file-name-in-ruby-where-method-was-called/33647354#33647354", "title": "Getting file name in ruby where method was called", "body": "<p>To avoid needing to deal with <code>caller</code> style strings, you can use <a href=\"http://ruby-doc.org/core-2.2.3/Kernel.html#method-i-caller_locations\" rel=\"noreferrer\"><code>Kernel#caller_locations</code></a>, instead. It returns you an array of <a href=\"http://ruby-doc.org/core-2.2.3/Thread/Backtrace/Location.html\" rel=\"noreferrer\"><code>Thread::Backtrace::Location</code></a> objects, which has some convenient methods available for you.</p>\n\n<p>To get the filename, in your case, you can use the <code>#path</code> method:</p>\n\n<pre><code>def foo\n  caller_locations.first.path\nend\n</code></pre>\n"}], "owner": {"reputation": 1049, "user_id": 4635750, "user_type": "registered", "accept_rate": 49, "profile_image": "https://graph.facebook.com/847597188612174/picture?type=large", "display_name": "Nodir Nasirov", "link": "https://stackoverflow.com/users/4635750/nodir-nasirov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2630, "favorite_count": 1, "accepted_answer_id": 33644741, "answer_count": 3, "score": 10, "last_activity_date": 1447233744, "creation_date": 1447219027, "last_edit_date": 1447219571, "question_id": 33644673, "link": "https://stackoverflow.com/questions/33644673/getting-file-name-in-ruby-where-method-was-called", "title": "Getting file name in ruby where method was called", "body": "<p>I have a method <code>foo</code> and it is called in a script <code>script001.rb</code>\nhow should I write the <code>foo</code> method so that it returns the file name of a script that called it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 23312, "user_id": 560215, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bb365e8477053edcc55b40c3d27781d8?s=128&d=identicon&r=PG", "display_name": "sevenseacat", "link": "https://stackoverflow.com/users/560215/sevenseacat"}, "edited": false, "score": 2, "creation_date": 1447216205, "post_id": 33644268, "comment_id": 55062346, "body": "we&#39;d need to see the code that is handling that date field, because that format is perfectly acceptable."}, {"owner": {"reputation": 2307, "user_id": 219594, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/87b214a1096bea2042c331b63eb1fa22?s=128&d=identicon&r=PG", "display_name": "andrykonchin", "link": "https://stackoverflow.com/users/219594/andrykonchin"}, "edited": false, "score": 1, "creation_date": 1447354496, "post_id": 33644268, "comment_id": 55131306, "body": "it seems backend expects to receive start date splitted by the pieces. Did you try to send data in this format? I mean following: <code>{&quot;product&quot;:{&quot;name&quot;: &quot;Foo&quot;, &quot;start_date(1i)&quot;: 2015, &quot;start_date(2i)&quot;: 11,&quot;start_date(3i)&quot;: 5, ...}}</code>"}, {"owner": {"reputation": 1704, "user_id": 3900606, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c302f96e748480965d4190fcff8e347b?s=128&d=identicon&r=PG&f=1", "display_name": "bnussey", "link": "https://stackoverflow.com/users/3900606/bnussey"}, "reply_to_user": {"reputation": 2307, "user_id": 219594, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/87b214a1096bea2042c331b63eb1fa22?s=128&d=identicon&r=PG", "display_name": "andrykonchin", "link": "https://stackoverflow.com/users/219594/andrykonchin"}, "edited": false, "score": 0, "creation_date": 1447730662, "post_id": 33644268, "comment_id": 55265299, "body": "Hey @andrykonchin this was exactly what I did as a workaround.. feel free to post this as an answer and I will accept it"}], "answers": [{"tags": [], "owner": {"reputation": 2307, "user_id": 219594, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/87b214a1096bea2042c331b63eb1fa22?s=128&d=identicon&r=PG", "display_name": "andrykonchin", "link": "https://stackoverflow.com/users/219594/andrykonchin"}, "is_accepted": true, "score": 1, "last_activity_date": 1447751501, "creation_date": 1447751501, "answer_id": 33752984, "question_id": 33644268, "link": "https://stackoverflow.com/questions/33644268/how-to-format-the-date-field-when-making-a-post-request-to-rails-api/33752984#33752984", "title": "How to format the date field when making a POST request to Rails API", "body": "<p>It seems the backend expects to receive start date splitted by the pieces.</p>\n\n<p>Please try to send data in following:</p>\n\n<pre><code>{\"product\":{\"name\": \"Foo\", \"start_date(1i)\": 2015, \"start_date(2i)\": 11,\"start_date(3i)\": 5, ...}}\n</code></pre>\n"}], "owner": {"reputation": 1704, "user_id": 3900606, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c302f96e748480965d4190fcff8e347b?s=128&d=identicon&r=PG&f=1", "display_name": "bnussey", "link": "https://stackoverflow.com/users/3900606/bnussey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 733, "favorite_count": 0, "accepted_answer_id": 33752984, "answer_count": 1, "score": 2, "last_activity_date": 1447751501, "creation_date": 1447215941, "last_edit_date": 1447216042, "question_id": 33644268, "link": "https://stackoverflow.com/questions/33644268/how-to-format-the-date-field-when-making-a-post-request-to-rails-api", "title": "How to format the date field when making a POST request to Rails API", "body": "<p>I am adding a series of data to my rails application through a POST request to the API.</p>\n\n<p>All is working well, however, whenever I try and add data to a date field, I get the following error:</p>\n\n<pre><code>&gt; undefined method `year' for nil:NilClass\n</code></pre>\n\n<p>Here is an example of my JSON payload:</p>\n\n<pre><code>{\n    \"product\": {\n        \"name\": \"Foo\",\n        \"start_date\": \"2015-11-05 22:32:03\"\n    }\n}\n</code></pre>\n\n<p>I know there is a potential bug with this relating to Ruby 2.2 .. however when I looked at the backend for how the params were stored on a normal create action through the frontend, they were stored a lot differently:</p>\n\n<pre><code>\"start_date(1i)\"=&gt;\"2020\", \"start_date(2i)\"=&gt;\"1\", \"start_date(3i)\"=&gt;\"1\", \"start_date(4i)\"=&gt;\"00\", \"start_date(5i)\"=&gt;\"01\"\n</code></pre>\n\n<p>How would I recreate this?</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "docker", "sequel"], "comments": [{"owner": {"reputation": 11331, "user_id": 132053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f183bcc4176b308c9edabe79299e448f?s=128&d=identicon&r=PG", "display_name": "Jeremy Evans", "link": "https://stackoverflow.com/users/132053/jeremy-evans"}, "edited": false, "score": 0, "creation_date": 1447344290, "post_id": 33644234, "comment_id": 55124734, "body": "The reason this doesn&#39;t work is that Sequel doesn&#39;t connect until it needs to run a query, and you aren&#39;t attempting to run a query inside the connect_to_db method."}], "answers": [{"tags": [], "owner": {"reputation": 17107, "user_id": 556006, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b0dce52fa056d59908345b2e1944fae0?s=128&d=identicon&r=PG", "display_name": "JVG", "link": "https://stackoverflow.com/users/556006/jvg"}, "is_accepted": false, "score": 0, "last_activity_date": 1447225457, "last_edit_date": 1495541037, "creation_date": 1447225457, "answer_id": 33645684, "question_id": 33644234, "link": "https://stackoverflow.com/questions/33644234/ruby-catching-sequeldatabaseconnectionerror/33645684#33645684", "title": "Ruby: Catching Sequel::DatabaseConnectionError", "body": "<p>Got it working with <a href=\"https://stackoverflow.com/questions/17287623/how-do-we-verify-if-sequel-connect-opened-our-sqlite3-database-in-rails\">db.test_connection</a>:</p>\n\n<pre><code>def connect_to_db_with_mysql_driver\n  begin\n    puts \"Trying to connect to Mysql\"\n    db = Sequel.connect(\n            // Connection stuff\n          )\n    if db.test_connection == true\n      Sequel::Model.db = db\n    else\n      raise \"Mysql connection failed.\"\n    end\n  rescue =&gt; ex\n    puts ex\n    puts \"Retrying...\"\n    retry\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 17107, "user_id": 556006, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b0dce52fa056d59908345b2e1944fae0?s=128&d=identicon&r=PG", "display_name": "JVG", "link": "https://stackoverflow.com/users/556006/jvg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1459, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1447225457, "creation_date": 1447215699, "last_edit_date": 1447216155, "question_id": 33644234, "link": "https://stackoverflow.com/questions/33644234/ruby-catching-sequeldatabaseconnectionerror", "title": "Ruby: Catching Sequel::DatabaseConnectionError", "body": "<p>I'm using Docker to run my Ruby app, with MySQL as a database. I need for my Ruby app to wait until MySQL has finished loading and a connection can be made.</p>\n\n<p>I'm using the following code:</p>\n\n<pre><code>def connect_to_db\n  begin\n    puts \"Trying to connect to Mysql\"\n    Sequel::Model.db = Sequel.connect( // Connection stuff in here )\n  rescue Sequel::Error =&gt; e\n    puts \"Mysql connection failed #{e.message}: Retrying.\"\n    retry\n  end\nend\n\nconnect_to_db()\n</code></pre>\n\n<p>This runs once, then I get an error - <code>Sequel::DatabaseConnectionError: Mysql2::Error: Unknown MySQL server host (25)</code> - It doesn't go into the <code>rescue</code> block and doesn't retry.</p>\n\n<p>I've tried <code>rescue Sequel::DatabaseConnectionError</code> but this gives the same result.</p>\n\n<p>What do I need to rescue here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-admin"], "answers": [{"tags": [], "owner": {"reputation": 1341, "user_id": 743975, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6b0899d70c3239ead231cebc7e8ce9af?s=128&d=identicon&r=PG", "display_name": "Dmitry Polyakovsky", "link": "https://stackoverflow.com/users/743975/dmitry-polyakovsky"}, "is_accepted": false, "score": 1, "last_activity_date": 1452822812, "last_edit_date": 1452822812, "creation_date": 1452818042, "answer_id": 34802407, "question_id": 33643574, "link": "https://stackoverflow.com/questions/33643574/edit-view-fields-in-rails-admin/34802407#34802407", "title": "Edit View Fields in Rails Admin", "body": "<p>Here is how I would do it:</p>\n\n<pre><code>class Player\n  include Mongoid::Document\n  field :name,              type: String\n  field :team,              type: String\n  field :percentage,    type: Float    \n  attr_accessor :shots, :goals\n\n  before_save do\n    self.percentage = shots.to_f / goals.to_f\n  end\n\n  rails_admin do\n    configure :percentage do\n      read_only true\n    end\n    edit do\n      include_all_fields\n      field :shots, :integer do\n        html_attributes min: 1, required: true\n        help 'number of shots'\n      end\n      field :goals, :integer do\n        html_attributes min: 1, required: true\n        help 'number of goals'\n      end\n    end\n  end\n\nend\n</code></pre>\n"}], "owner": {"reputation": 4731, "user_id": 2757483, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/7812459/picture?type=large", "display_name": "Jackson", "link": "https://stackoverflow.com/users/2757483/jackson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1827, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1452822812, "creation_date": 1447210927, "question_id": 33643574, "link": "https://stackoverflow.com/questions/33643574/edit-view-fields-in-rails-admin", "title": "Edit View Fields in Rails Admin", "body": "<p>I am using 'Rails Admin' in my application. In my initializer I have the following in 'rails_admin.rb': </p>\n\n<pre><code>config.model \"Player\" do \n  edit do\n    :name\n    :team\n    :shooting_percentage\n  end\nend\n</code></pre>\n\n<p>That gives me the following fields on the edit view in Rails Admin: name, team, and shooting percentage. </p>\n\n<p>I would like to add two fields to the edit form in Rails Admin for Player but I don't want to make them as attributes on that model (or any model for that matter). I want to add shots, and goals as just form fields.</p>\n\n<p>The reason I want to add those two form fields is so that I can use them to calculate the 'shooting_percentage' attribute value on Player. </p>\n\n<p>Is there a way in Rails Admin to have fields on a form that are not fields on the model? Furthermore, if that is possible is there a way to use the values entered into those form fields to calculate a value for an actual model field (shooting percentage)?</p>\n"}, {"tags": ["html", "css", "ruby", "postgresql", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 1180, "user_id": 4825744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10155467328840293/picture?type=large", "display_name": "Shawn Wilson", "link": "https://stackoverflow.com/users/4825744/shawn-wilson"}, "edited": false, "score": 0, "creation_date": 1447213217, "post_id": 33643880, "comment_id": 55061619, "body": "No i am asking how to make it appear in the box as the pre selected value when i go to update the form. Right now when i select an item it appears in the show page, when i go to update it re sets the values to to a blank value and if not re selected in the update, clears the values out of the DB"}, {"owner": {"reputation": 949, "user_id": 1118358, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b1ab17ba15065b9430f7dd09768e1e7b?s=128&d=identicon&r=PG&f=1", "display_name": "dewyze", "link": "https://stackoverflow.com/users/1118358/dewyze"}, "reply_to_user": {"reputation": 1180, "user_id": 4825744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10155467328840293/picture?type=large", "display_name": "Shawn Wilson", "link": "https://stackoverflow.com/users/4825744/shawn-wilson"}, "edited": false, "score": 0, "creation_date": 1447213279, "post_id": 33643880, "comment_id": 55061633, "body": "Can you clarify what the &quot;it&quot; is in that sentence?"}, {"owner": {"reputation": 1180, "user_id": 4825744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10155467328840293/picture?type=large", "display_name": "Shawn Wilson", "link": "https://stackoverflow.com/users/4825744/shawn-wilson"}, "edited": false, "score": 0, "creation_date": 1447213390, "post_id": 33643880, "comment_id": 55061656, "body": "so lets say i want to select &quot;RESIDENT - COMPLAINT&quot;, i select it and submit the form.. it saves that value to the DB. When i go to the edit page the select box appears as a blank value, and if i do not re-select &quot;RESIDENT - COMPLAINT&quot; it clears the value from the DB and clears it from the show page ect."}, {"owner": {"reputation": 1180, "user_id": 4825744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10155467328840293/picture?type=large", "display_name": "Shawn Wilson", "link": "https://stackoverflow.com/users/4825744/shawn-wilson"}, "edited": false, "score": 0, "creation_date": 1447213437, "post_id": 33643880, "comment_id": 55061665, "body": "could this be a result of having {include_blank: true} included in the select box?"}, {"owner": {"reputation": 1180, "user_id": 4825744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10155467328840293/picture?type=large", "display_name": "Shawn Wilson", "link": "https://stackoverflow.com/users/4825744/shawn-wilson"}, "edited": false, "score": 0, "creation_date": 1447214006, "post_id": 33643880, "comment_id": 55061804, "body": "It makes sense however when i try it i get the following error: undefined method `merge&#39; for &quot;PROPERTY DAMAGE&quot;:String could this be a result of using a scaffold generated form?"}, {"owner": {"reputation": 1180, "user_id": 4825744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10155467328840293/picture?type=large", "display_name": "Shawn Wilson", "link": "https://stackoverflow.com/users/4825744/shawn-wilson"}, "edited": false, "score": 0, "creation_date": 1447215911, "post_id": 33643880, "comment_id": 55062277, "body": "I found the fix see my answer. Thanks for your assistance."}], "tags": [], "owner": {"reputation": 949, "user_id": 1118358, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b1ab17ba15065b9430f7dd09768e1e7b?s=128&d=identicon&r=PG&f=1", "display_name": "dewyze", "link": "https://stackoverflow.com/users/1118358/dewyze"}, "is_accepted": false, "score": 0, "last_activity_date": 1447213472, "last_edit_date": 1447213472, "creation_date": 1447213151, "answer_id": 33643880, "question_id": 33643559, "link": "https://stackoverflow.com/questions/33643559/selected-data-static-select-box-not-appearing-when-in-edit-view/33643880#33643880", "title": "Selected Data (Static Select Box) Not appearing when in edit view", "body": "<p>If you are asking how to set the default you would follow the answer located in the <a href=\"http://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/options_for_select\" rel=\"nofollow\">rails api docs</a></p>\n\n<p>For example:</p>\n\n<pre><code>&lt;%= f.select(:primary_type,  options_for_select([[\"Text1\", \"value1\"],[\"Text2\",\"value2\"] \"value2\") %&gt;\n</code></pre>\n\n<p>Edit:</p>\n\n<p>On the edit page, you should have a variable set in your controller like <code>@call = Call.find(params[:id])</code></p>\n\n<p>Then in the view you can do:</p>\n\n<pre><code>&lt;%= f.select(:primary_type,  options_for_select([&lt;your_values&gt;], @call.primary_type ) %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1180, "user_id": 4825744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10155467328840293/picture?type=large", "display_name": "Shawn Wilson", "link": "https://stackoverflow.com/users/4825744/shawn-wilson"}, "is_accepted": true, "score": 0, "last_activity_date": 1447215272, "creation_date": 1447215272, "answer_id": 33644177, "question_id": 33643559, "link": "https://stackoverflow.com/questions/33643559/selected-data-static-select-box-not-appearing-when-in-edit-view/33644177#33644177", "title": "Selected Data (Static Select Box) Not appearing when in edit view", "body": "<p>Ok so after reading some other posts and diving a bit deeper into this I found the solution and it seems to be working just great. </p>\n\n<pre><code>&lt;%= f.select(:primary_type, options_for_select([['Opt 1', 'Opt 1'],['Opt 2', 'Opt 2']], **:selected =&gt; @call.primary_type** )) %&gt;\n</code></pre>\n\n<p>The call that retrieved and displays the Selected value is between the ** ** Do not add the asterisks to your code..  </p>\n"}], "owner": {"reputation": 1180, "user_id": 4825744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10155467328840293/picture?type=large", "display_name": "Shawn Wilson", "link": "https://stackoverflow.com/users/4825744/shawn-wilson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 33644177, "answer_count": 2, "score": 0, "last_activity_date": 1447215272, "creation_date": 1447210798, "last_edit_date": 1447213019, "question_id": 33643559, "link": "https://stackoverflow.com/questions/33643559/selected-data-static-select-box-not-appearing-when-in-edit-view", "title": "Selected Data (Static Select Box) Not appearing when in edit view", "body": "<p>Having a problem with a select box in my edit view in (Rails 4 Ruby 2.2) App. </p>\n\n<p><strong>the select box looks as follows:</strong></p>\n\n<pre><code> &lt;%= f.select(:primary_type, options_for_select([['RESIDENT - COMPLAINT', \n\n'RESIDENT - COMPLAINT'], ['THEFT', 'THEFT'], ['PROPERTY DAMAGE', 'PROPERTY \n\nDAMAGE'], ['DOORS / WINDOWS BROKEN', 'DOORS / WINDOWS BROKEN'], ['WATER LEAKING', \n\n'WATER LEAKING'], ['FLOODING', 'FLOODING'],['ACCIDENT - PERSONAL INJURY', \n\n'ACCIDENT - PERSONAL INJURY'], ['ACCIDENT - VEHICLE', 'ACCIDENT - VEHICLE'], \n\n['ACCIDENT - OTHER', 'ACCIDENT - OTHER'], ['FENCES / GATES BROKEN', 'FENCES / \n\nGATES BROKEN'], ['SUSPICIOUS ACTIVITY - PERSON', 'SUSPICIOUS ACTIVITY - PERSON'], \n\n['SUSPICIOUS ACTIVITY - VEHICLE', 'SUSPICIOUS ACTIVITY - VEHICLE'], ['VANDALISM - \n\nREPORTING', 'VANDALISM - REPORTING'], ['VANDALISM - IN PROGRESS', 'VANDALISM - IN \n\nPROGRESS'], ['HAZZARD REPORT - SAFETY', 'HAZZARD REPORT - SAFETY'], ['HAZZARD \n\nREPORT - FIRE', 'HAZZARD REPORT - FIRE'], ['FIRE - ACTIVE', 'FIRE - ACTIVE'], \n\n['PARKING COMPLAINT - RESIDENT', 'PARKING COMPLAINT - RESIDENT'], ['PARKING \n\nCOMPLAINT - VISITOR', 'PARKING COMPLAINT - VISITOR'], ['BREAK AND ENTER - \n\nATTEMPT', 'BREAK AND ENTER - ATTEMPT'], ['BREAK AND ENTER - CONFIRMED', 'BREAK AND \n\nENTER - CONFIRMED'], ['ALARM PANEL - PROBLEMS', ' ALARM PANEL - PROBLEMS'], ['GAS \n\nLEAK', 'GAS LEAK'], ['EXPLOSION', 'EXPLOSION'], ['DAMAGE - WEATHER RELATED', \n\n'DAMAGE - WEATHER RELATED']]), { include_blank: true }, class: 'input-group input-\n\ngroup-lg', id: 'primary-box')%&gt;\n</code></pre>\n\n<p>It saves to the DB when selected originally and have confirmed this with Rails Console but have no idea how to get this to display in the select box as the primary value when I go to the edit page. </p>\n\n<p><strong>my controller is as follows:</strong> </p>\n\n<pre><code>class CallsController &lt; ApplicationController\n  before_action :set_call, only: [:show, :edit, :update, :destroy]\n\n  # GET /calls\n  # GET /calls.json\n  def index\n    @calls = Call.all\n    @active_calls = @calls.select{|x| x.status == 'ACTIVE'}\n    @pending_calls = @calls.select{|x| x.status == 'PENDING'}\n  end\n\n  # GET /calls/1\n  # GET /calls/1.json\n  def show\n  end\n\n  # GET /calls/new\n  def new\n    @call = Call.new\n  end\n\n  # GET /calls/1/edit\n  def edit\n  end\n\n  # POST /calls\n  # POST /calls.json\n  def create\n    @call = Call.new(call_params)\n\n    respond_to do |format|\n      if @call.save\n        format.html { redirect_to @call, notice: 'Call was successfully created.' }\n        format.json { render :show, status: :created, location: @call }\n      else\n        format.html { render :new }\n        format.json { render json: @call.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /calls/1\n  # PATCH/PUT /calls/1.json\n  def update\n    respond_to do |format|\n      if @call.update(call_params)\n        format.html { redirect_to @call, notice: 'Call was successfully updated.' }\n        format.json { render :show, status: :ok, location: @call }\n      else\n        format.html { render :edit }\n        format.json { render json: @call.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /calls/1\n  # DELETE /calls/1.json\n  def destroy\n    @call.destroy\n    respond_to do |format|\n      format.html { redirect_to calls_url, notice: 'Call was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_call\n      @call = Call.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def call_params\n      params.require(:call).permit(:call_time, :status, :primary_type, :secondary_type, :site, :address, :unit_1, :unit_2, :unit_3, :unit_4, :call_details, :unit_on_scene, :unit_clear, :call_num, :site_id)\n    end\nend\n</code></pre>\n\n<p>Any help will be much appreciated! Thanks in advance!And if more info is required please let me know and ill put it up here. </p>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 2218, "user_id": 5129208, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wfsc3HumFMQ/AAAAAAAAAAI/AAAAAAAAAGw/2TW94iOeLhQ/photo.jpg?sz=128", "display_name": "yez", "link": "https://stackoverflow.com/users/5129208/yez"}, "edited": false, "score": 1, "creation_date": 1447206505, "post_id": 33642778, "comment_id": 55059980, "body": "Is this an assignment of some kind? It looks like the kind of thing done for educational purposes. I&#39;d wager that breaking the original code up into methods and testing those with RSpec be your best bet."}, {"owner": {"reputation": 3129, "user_id": 455826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/aPD2c.jpg?s=128&g=1", "display_name": "AmitA", "link": "https://stackoverflow.com/users/455826/amita"}, "edited": false, "score": 0, "creation_date": 1447206521, "post_id": 33642778, "comment_id": 55059986, "body": "The best approach would be to put the code inside a class and wrapped with methods. It would be much easier to test, especially if you want to have a &quot;white box&quot; approach and test the value of variables inside the code. But if you really cannot change the code, I would go with purely blackbox. Simply send several different STDIN inputs and check the STDOUT outputs. Here are pointers: STDOUT: <a href=\"http://stackoverflow.com/questions/16507067/testing-stdout-output-in-rspec\" title=\"testing stdout output in rspec\">stackoverflow.com/questions/16507067/&hellip;</a>  STDIN: <a href=\"http://stackoverflow.com/questions/23349863/testing-stdin-in-ruby\" title=\"testing stdin in ruby\">stackoverflow.com/questions/23349863/testing-stdin-in-ruby</a>"}, {"owner": {"reputation": 197, "user_id": 5041374, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f75d7543dd3871b23495ff755b995a6?s=128&d=identicon&r=PG", "display_name": "scobo", "link": "https://stackoverflow.com/users/5041374/scobo"}, "reply_to_user": {"reputation": 2218, "user_id": 5129208, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wfsc3HumFMQ/AAAAAAAAAAI/AAAAAAAAAGw/2TW94iOeLhQ/photo.jpg?sz=128", "display_name": "yez", "link": "https://stackoverflow.com/users/5129208/yez"}, "edited": false, "score": 0, "creation_date": 1447247259, "post_id": 33642778, "comment_id": 55075673, "body": "@yez Yes it is an assignment. I agree with you, that seems more in the spirit of RSpec and good code refactoring."}], "answers": [{"tags": [], "owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "is_accepted": true, "score": 1, "last_activity_date": 1447207306, "last_edit_date": 1495535230, "creation_date": 1447207306, "answer_id": 33643062, "question_id": 33642778, "link": "https://stackoverflow.com/questions/33642778/rspec-dealing-with-variables-outside-of-methods-classes/33643062#33643062", "title": "RSpec - Dealing with variables outside of methods/classes", "body": "<p>You're running into this problem because because your code is procedural. In this particular case the whole script that you posted seems to act as a single function, taking input from STDIN and outputting to STDOUT. </p>\n\n<p><em>You should be testing the output of the script</em>, not the variables. Ensuring the output is as expected indirectly tests the variables used to test that result any way.</p>\n\n<p>The first approach that comes to mind is to run the script in a sub shell, piping input into it, and verifying the output.</p>\n\n<p>The better solution would be to wrap your code in a method so you can just test that within the rspec script after requiring your script. Then, just test the output of calling the method.</p>\n\n<p>Here's an SO Q on testing procedural code: <a href=\"https://stackoverflow.com/questions/73078/how-does-one-unit-test-sections-of-code-that-are-procedural-or-event-based\">How does one unit test sections of code that are procedural or event-based</a></p>\n"}], "owner": {"reputation": 197, "user_id": 5041374, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f75d7543dd3871b23495ff755b995a6?s=128&d=identicon&r=PG", "display_name": "scobo", "link": "https://stackoverflow.com/users/5041374/scobo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "accepted_answer_id": 33643062, "answer_count": 1, "score": 1, "last_activity_date": 1447207306, "creation_date": 1447205197, "question_id": 33642778, "link": "https://stackoverflow.com/questions/33642778/rspec-dealing-with-variables-outside-of-methods-classes", "title": "RSpec - Dealing with variables outside of methods/classes", "body": "<p>I am tasked with applying RSpec to old code that I have written without changing/updating the code (which to me seems contrary to the point of TDD). </p>\n\n<p>Anyway, I am having trouble finding a way of allowing RSpec to access variables which are placed outside of classes and methods. </p>\n\n<p>My original code is a hacky Caesar Cipher:</p>\n\n<pre><code>puts 'Please enter your string to be coded'\n    string = gets.chomp.split(\"\")\n\nputs 'Please enter your number key'\n    key = gets.chomp.to_i\n\n    if (key &gt; 26) \n        key = key % 26\n    end\n\n    string.map! do |i|\n        i.ord\n    end\n\n    string.map! {|i| i = i + key}.map! {|i| \n        if (i &gt; 122)\n            then i = i - 26\n        elsif (90 &lt; i &amp;&amp; i &lt; 97)\n            then i = i - 26\n        elsif (i &gt; 96 &amp;&amp; (i - key) &lt; 91 &amp;&amp; (i - key) &gt; 64)\n            then i = i - 26\n        elsif (i &lt; 65 )\n            then i = 32\n        else\n            i\n        end\n    }\n\n    string.map! do |i|\n        i.chr \n    end\n\n    puts \"Your coded word is #{string.join(\"\")}\"\n</code></pre>\n\n<p>I'm trying to write my RSpec tests to access the <code>string</code>, and <code>key</code> variables in order to run tests on them. However, I'm having trouble finding a way to do so because they are not defined within a method. Nearly all of the RSpec examples I've seen seem show how to access variables within a method: </p>\n\n<pre><code>describe \"foo string\" do\n  it \"is equal to another string of the same value\" do\n    expect(\"foo string\").to eq(\"foo string\")\n  end\nend\n</code></pre>\n\n<p>Are there ways to use RSpec to test variables outside of methods/classes? Am I going about this entirely wrong? </p>\n"}, {"tags": ["ruby", "amazon-web-services", "amazon-s3", "aws-sdk"], "answers": [{"tags": [], "owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "is_accepted": true, "score": 1, "last_activity_date": 1447214728, "creation_date": 1447214728, "answer_id": 33644107, "question_id": 33642501, "link": "https://stackoverflow.com/questions/33642501/in-ruby-the-aws-sdk-gem-is-it-ok-to-pass-a-nil-value-for-a-parameter/33644107#33644107", "title": "In Ruby the aws-sdk gem, is it ok to pass a nil value for a parameter?", "body": "<p>Looking at the source for aws-sdk-v1 and doing a project search for <code>:marker</code> shows where they use this parameter key, it seems to be guarded by checks to see if its non falsy. So I'd assume it's safe to pass in nil in this case. More specifically, the definition for the <code>list_objects</code> method in <code>lib/aws/s3/client.rb</code>:</p>\n\n<pre><code># @overload list_objects(options = {})\n      #   @param [Hash] options\n      #   @option options [required,String] :bucket_name\n      #   @option options [String] :delimiter\n      #   @option options [String] :marker\n      #   @option options [String] :max_keys\n      #   @option options [String] :prefix\n      #   @return [Core::Response]\n      bucket_method(:list_objects, :get, XML::ListObjects) do\n        configure_request do |req, options|\n          super(req, options)\n          params = %w(delimiter marker max_keys prefix)\n          params.each do |param|\n            if options[param.to_sym]\n              req.add_param(param.gsub(/_/, '-'), options[param.to_sym])\n            end\n          end\n        end\n      end\n</code></pre>\n\n<p>Notice how every parameter is checked for falsiness before being added to the request <code>if options[param.to_sym]</code>. However, I didn't check to see if aws actually requires this param. </p>\n\n<p>So try it. Does it work without <code>:marker</code>? If so, and the results are as expected, then it's safe to use nil there. Indeed, it would be exactly the same as not passing it in at all, since, according to the above implementation, the <code>add_param</code> method is only called if it's non falsy.</p>\n"}], "owner": {"reputation": 70080, "user_id": 38765, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/01bbb59a1c3ef9960f25a97afe7e920f?s=128&d=identicon&r=PG", "display_name": "Andrew Grimm", "link": "https://stackoverflow.com/users/38765/andrew-grimm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 33644107, "answer_count": 1, "score": 0, "last_activity_date": 1447214728, "creation_date": 1447203410, "question_id": 33642501, "link": "https://stackoverflow.com/questions/33642501/in-ruby-the-aws-sdk-gem-is-it-ok-to-pass-a-nil-value-for-a-parameter", "title": "In Ruby the aws-sdk gem, is it ok to pass a nil value for a parameter?", "body": "<p>In the Ruby aws-sdk gem, is it ok to pass a nil value for a parameter, if the parameter is not required?</p>\n\n<p>I want to do</p>\n\n<pre><code>s3_client.list_objects(bucket: bucket_name,  prefix: path_to_files, marker: marker)\n</code></pre>\n\n<p>and I want to know if it's ok, for the first <code>list_objects</code> request, to have a <code>marker</code> value of <code>nil</code> (which is the same as <code>marker: nil</code>). Or do I have to do <code>s3_client.list_objects(bucket: bucket_name,  prefix: path_to_files)</code> without <code>marker: marker</code> if <code>marker</code> is nil?</p>\n\n<p>The documentation has</p>\n\n<blockquote>\n  <p><code>:marker</code> (<code>String</code>) \u2014 Specifies the key to start with when listing objects in a bucket.</p>\n</blockquote>\n\n<p>so I know that <code>:marker</code> is not required, but is passing in a <code>nil</code> value supported behaviour (after all, it's not a <code>String</code>), and is it guaranteed to give the same results as not passing in a value at all?</p>\n"}, {"tags": ["ruby", "chef-infra"], "answers": [{"comments": [{"owner": {"reputation": 1255, "user_id": 4430424, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/YRCsd.jpg?s=128&g=1", "display_name": "OK999", "link": "https://stackoverflow.com/users/4430424/ok999"}, "edited": false, "score": 0, "creation_date": 1447228726, "post_id": 33642531, "comment_id": 55066067, "body": "Could you please elaborate on this: <code>The initial :: says &quot;even though we might be lexically inside a class or module, define this new class from the top level namespace&quot;.</code>"}, {"owner": {"reputation": 1255, "user_id": 4430424, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/YRCsd.jpg?s=128&g=1", "display_name": "OK999", "link": "https://stackoverflow.com/users/4430424/ok999"}, "edited": false, "score": 0, "creation_date": 1447233055, "post_id": 33642531, "comment_id": 55068039, "body": "Came across this <a href=\"https://www.chef.io/blog/2013/09/04/demystifying-common-idioms-in-chef-recipes/\" rel=\"nofollow noreferrer\">chef.io/blog/2013/09/04/&hellip;</a>  . it says:  &quot;In some recipes, you may see ::File used to refer to the Ruby File class. Why isn\u2019t it just \u201cFile\u201d?  The reason is because Chef has its own classes named File. Specifically, there are resource and provider classes within Chef called File. To avoid ambiguity \u2014 ambiguity leads to errors \u2014 whenever we want to refer to Ruby\u2019s File class, we use ::File. &quot; Based on your answer and this blog, does ruby have another class call `chef&#39;?"}, {"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "reply_to_user": {"reputation": 1255, "user_id": 4430424, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/YRCsd.jpg?s=128&g=1", "display_name": "OK999", "link": "https://stackoverflow.com/users/4430424/ok999"}, "edited": false, "score": 0, "creation_date": 1447318219, "post_id": 33642531, "comment_id": 55107914, "body": "@OK9999 When writing a Chef recipe you&#39;re in an instance of <code>Chef::Recipe</code> for the DSL along pure ruby code. That&#39;s why you need to avoid ambiguity between DSL methods and pure Ruby methods"}], "tags": [], "owner": {"reputation": 2278, "user_id": 1772828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b7831a9963c2207377c46468f6e797a?s=128&d=identicon&r=PG", "display_name": "cliffordheath", "link": "https://stackoverflow.com/users/1772828/cliffordheath"}, "is_accepted": false, "score": 6, "last_activity_date": 1447326688, "last_edit_date": 1447326688, "creation_date": 1447203566, "answer_id": 33642531, "question_id": 33642471, "link": "https://stackoverflow.com/questions/33642471/syntax-of-a-ruby-class/33642531#33642531", "title": "Syntax of a Ruby class", "body": "<p>The initial :: says \"even though we might be lexically inside a class or module, define this new class from the top level namespace\". When you use it at the start of a constant name, even if you're inside another module or class scope, the constant you're referring to (or creating) is not inside that scope, but is at the top level (these constants can be listed by printing <strong>Object.constants</strong>)</p>\n\n<p>Note that the text which follows the \"&lt;\" (for the superclass) can be any expression which returns a Class object (evaluated at compile time). You can even use a function to return the superclass.</p>\n"}, {"comments": [{"owner": {"reputation": 1255, "user_id": 4430424, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/YRCsd.jpg?s=128&g=1", "display_name": "OK999", "link": "https://stackoverflow.com/users/4430424/ok999"}, "edited": false, "score": 0, "creation_date": 1509465824, "post_id": 33642689, "comment_id": 81026041, "body": "So the class <code>Baz</code> - is not inside the <code>Foo</code> modules namespace?"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 1255, "user_id": 4430424, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/YRCsd.jpg?s=128&g=1", "display_name": "OK999", "link": "https://stackoverflow.com/users/4430424/ok999"}, "edited": false, "score": 0, "creation_date": 1509493569, "post_id": 33642689, "comment_id": 81039554, "body": "Yes. And in your question, <code>OpsCode</code> is not inside <code>Recipe</code>."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 3, "last_activity_date": 1447204645, "creation_date": 1447204645, "answer_id": 33642689, "question_id": 33642471, "link": "https://stackoverflow.com/questions/33642471/syntax-of-a-ruby-class/33642689#33642689", "title": "Syntax of a Ruby class", "body": "<pre><code>module Foo\n  class Bar\n  end\n\n  class ::Baz\n  end\nend\n</code></pre>\n\n<p>defines <code>Foo::Bar</code> and <code>Baz</code> (not <code>Foo::Baz</code>).</p>\n\n<p>It is similar to how directories work: given existence of <code>/foo</code>, and current directory being <code>/</code>,</p>\n\n<pre><code>cd foo\nmkdir bar\nmkdir /baz\n</code></pre>\n\n<p>creates <code>/foo/bar</code> and <code>/baz</code> (not <code>/foo/baz</code>).</p>\n"}, {"comments": [{"owner": {"reputation": 1255, "user_id": 4430424, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/YRCsd.jpg?s=128&g=1", "display_name": "OK999", "link": "https://stackoverflow.com/users/4430424/ok999"}, "edited": false, "score": 0, "creation_date": 1447228582, "post_id": 33643654, "comment_id": 55066010, "body": "Can you instantiate a module? i have came across many docs saying a module cannot be instantiated. This is one such link: <a href=\"http://stackoverflow.com/questions/151505/difference-between-a-class-and-a-module\" title=\"difference between a class and a module\">stackoverflow.com/questions/151505/&hellip;</a>  Or, is it that, we can instantiate a class which exist inside a module like what you have done. ` X::Y.new.show`  ... I can use irb to test your example though"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1447231718, "post_id": 33643654, "comment_id": 55067356, "body": "You can&#39;t instantiate a module. You can use a module kind of like a singleton class (by directly calling methods it defines), or you can include a module into a class as a mixin (and than instantiate that class)."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1447231815, "post_id": 33643654, "comment_id": 55067403, "body": "OK999, <code>X::Y</code> is a class, which you can call new() on.  Modules can be used as <i>namespaces</i>, which is the case here.  Namespaces are used so that name clashes don&#39;t occur.   If some other developer implements a class named Y, he will define it inside his unique namespace name."}], "tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": false, "score": 1, "last_activity_date": 1447211440, "creation_date": 1447211440, "answer_id": 33643654, "question_id": 33642471, "link": "https://stackoverflow.com/questions/33642471/syntax-of-a-ruby-class/33643654#33643654", "title": "Syntax of a Ruby class", "body": "<p>And, here is an example of how constants are looked up:</p>\n\n<pre><code>A = 1\n\nmodule X\n  A = 'hello'\n\n  class Y\n    A = [1, 2, 3]\n\n    def show\n      p A\n      p ::A\n    end\n  end\n\nend\n\nX::Y.new.show\n\n--output:--\n[1, 2, 3]\n1\n</code></pre>\n"}], "owner": {"reputation": 1255, "user_id": 4430424, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/YRCsd.jpg?s=128&g=1", "display_name": "OK999", "link": "https://stackoverflow.com/users/4430424/ok999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "accepted_answer_id": 33642689, "answer_count": 3, "score": 0, "last_activity_date": 1447326688, "creation_date": 1447203210, "question_id": 33642471, "link": "https://stackoverflow.com/questions/33642471/syntax-of-a-ruby-class", "title": "Syntax of a Ruby class", "body": "<p>What is the format/syntax followed in the below declaration/definition of a Ruby class? I don't understand the colons (:) used in the class name. What does that indicate?</p>\n\n<pre><code>class ::Chef::Recipe\n  include ::Opscode::ChefClient::Helpers\nend\n</code></pre>\n\n<p>This is from <a href=\"https://github.com/chef-cookbooks/chef-client/blob/master/recipes/init_service.rb\" rel=\"nofollow\">here</a>:  </p>\n\n<p>I am familiar with the below way of defining a Ruby class:</p>\n\n<pre><code>class ClassName\n   CONSTANT = Z\n  ....methods...\n\nend\n</code></pre>\n\n<p>And i know that a constant is called like <code>ClassName::Z</code>, But the above way of declaration is new to me and where do i find docs on declaring a ruby class like so.    </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "node.js", "mongodb"], "comments": [{"owner": {"reputation": 1248, "user_id": 743338, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7c8cd705278f3c6f5b93fc8d421c1f9f?s=128&d=identicon&r=PG&f=1", "display_name": "Wasi", "link": "https://stackoverflow.com/users/743338/wasi"}, "edited": false, "score": 0, "creation_date": 1447208447, "post_id": 33642458, "comment_id": 55060443, "body": "How are you querying?"}, {"owner": {"reputation": 327, "user_id": 5369713, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/91fe4fcc54fd373ca891240b173a986a?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Burrus", "link": "https://stackoverflow.com/users/5369713/chris-burrus"}, "reply_to_user": {"reputation": 1248, "user_id": 743338, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7c8cd705278f3c6f5b93fc8d421c1f9f?s=128&d=identicon&r=PG&f=1", "display_name": "Wasi", "link": "https://stackoverflow.com/users/743338/wasi"}, "edited": false, "score": 0, "creation_date": 1447208634, "post_id": 33642458, "comment_id": 55060484, "body": "My query test was just <code>temp = analysis_server.database_names</code> (I&#39;ve tried other things too) - none of it actually returns anything, it just spams the &#39;key not found &quot;t&quot;&#39; error even faster if I try anything, like each attempt starts generating the error."}], "owner": {"reputation": 327, "user_id": 5369713, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/91fe4fcc54fd373ca891240b173a986a?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Burrus", "link": "https://stackoverflow.com/users/5369713/chris-burrus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 488, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1447203719, "creation_date": 1447203134, "last_edit_date": 1447203719, "question_id": 33642458, "link": "https://stackoverflow.com/questions/33642458/ruby-connecting-to-external-mongo-db", "title": "Ruby connecting to external Mongo DB", "body": "<p>We have a main portal site (running Rails 4 with a PostgreSQL database), and an external image server (running Node.js with Mongo database). I'm trying to establish a connection from Rails to the database - I installed the mongo gem - <a href=\"https://docs.mongodb.org/ecosystem/drivers/ruby/\" rel=\"nofollow\">https://docs.mongodb.org/ecosystem/drivers/ruby/</a> - and have been following the guide, but got stuck on an odd key error that I can't seem to find any information on.</p>\n\n<p>The image server itself is running fine with no problems (it has a GUI interface that is working fine).</p>\n\n<p>In my controller (I changed the names and left out the passwords):</p>\n\n<pre><code>image_server = Mongo::Client.new([ 'image.companyname.com:####' ], :database =&gt; 'db-name')\n</code></pre>\n\n<p>It seems to connect:</p>\n\n<pre><code>D, [2015-11-11T00:41:22.730360 #9410] DEBUG -- : MONGODB | Adding image.companyname.com:#### to the cluster.\n</code></pre>\n\n<p>But then just spams this message over and over (and queries don't do anything but return this error even faster).</p>\n\n<pre><code>D, [2015-11-11T00:41:22.991386 #9410] DEBUG -- : MONGODB | key not found: \"t\"\n</code></pre>\n\n<p>Eventually it returns one error message as well, but keeps spamming the key not found error as well:</p>\n\n<pre><code>Mongo::Error::NoServerAvailable (No server is available matching preference: #&lt;Mongo::ServerSelector::Primary:0x007f5a943f6ee8 @options={\"mode\"=&gt;:primary, \"database\"=&gt;\"db-name\"}, @tag_sets=[], @server_selection_timeout=30&gt;):\n</code></pre>\n\n<p>app/controllers/admin/model_controller.rb:9:in `index'</p>\n\n<p>EDIT\nI even tried connect directly to the UNIX socket, and got the same error:</p>\n\n<pre><code>image_server = Mongo::Client.new('mongodb://image.companyname.com:####/path/to/socket/socketname.sock')\n</code></pre>\n\n<p>END EDIT</p>\n\n<p>I'm unsure what the heck this 'key not found \"t\"' error is, or how to even begin to diagnose this. I've messed with every single connection option I can think of, and nothing changes. Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "angularjs", "angular-translate"], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 4163559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/060f62c85985f9ee2f952f9f427fad6f?s=128&d=identicon&r=PG&f=1", "display_name": "Angel Vargas", "link": "https://stackoverflow.com/users/4163559/angel-vargas"}, "is_accepted": true, "score": 1, "last_activity_date": 1447204570, "creation_date": 1447204570, "answer_id": 33642682, "question_id": 33642442, "link": "https://stackoverflow.com/questions/33642442/how-to-use-dynamic-variables-with-angular-translate-rails/33642682#33642682", "title": "How to use dynamic variables with Angular Translate Rails?", "body": "<p>To use variables in angular translate is this way</p>\n\n<pre><code>en:\n  home:\n    message: \"My variables are {{ myFirstVariable }} and {{ mySecondVariable }}\"\n</code></pre>\n\n<p>and for use it is like this</p>\n\n<pre><code>$translate('en.home.message', { myFirstVariable: 1, mySecondVariable: 2});\n</code></pre>\n"}], "owner": {"reputation": 574, "user_id": 3858831, "user_type": "registered", "profile_image": "https://graph.facebook.com/1003480893/picture?type=large", "display_name": "Kiko Castro", "link": "https://stackoverflow.com/users/3858831/kiko-castro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 299, "favorite_count": 0, "accepted_answer_id": 33642682, "answer_count": 1, "score": 2, "last_activity_date": 1447204570, "creation_date": 1447203059, "question_id": 33642442, "link": "https://stackoverflow.com/questions/33642442/how-to-use-dynamic-variables-with-angular-translate-rails", "title": "How to use dynamic variables with Angular Translate Rails?", "body": "<p>I'm using the gem angular-translate-rails and I'm trying to get the variables to passed to rails but it's not working. The backend is rails and the front end Angularjs. </p>\n\n<p>So far this is what I've tried:</p>\n\n<p>1.Within the controller:</p>\n\n<pre><code>$translate('analytics.show_review.directives.review_incomplete_message', {'number_of_not_empty_reviews': $scope.numberOfNotEmptyReviews,\n  'number_of_reviews': $scope.numberOfReviews }).then(function (message) {\n  $scope.reviewIncompleteMessage = message;\n});\n</code></pre>\n\n<p>2.Translation yml:</p>\n\n<pre><code>en:\n  home:\n    message: \"My variables are %{myFirstVariable} and %{ mySecondVariable }\"\n</code></pre>\n\n<p>And I get an empty string in return\nI tried  changing the combinations of camel case and snake case, but it didn't work as well.</p>\n"}, {"tags": ["ruby", "osx-yosemite"], "comments": [{"owner": {"reputation": 3930, "user_id": 1449569, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d58c523bfe1f2628000af0759654ee69?s=128&d=identicon&r=PG", "display_name": "Iron Savior", "link": "https://stackoverflow.com/users/1449569/iron-savior"}, "edited": false, "score": 1, "creation_date": 1447203391, "post_id": 33642408, "comment_id": 55059099, "body": "<code>require &#39;.&#47;contact_info.rb&#39;</code> -- giving a relative path to <code>require</code> will only search your include directories. A &quot;relative path&quot;, in this case, means one which does not being with <code>&#47;</code> or <code>.</code>."}, {"owner": {"reputation": 1, "user_id": 5548859, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153387143994965/picture?type=large", "display_name": "Ben Peterson", "link": "https://stackoverflow.com/users/5548859/ben-peterson"}, "reply_to_user": {"reputation": 3930, "user_id": 1449569, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d58c523bfe1f2628000af0759654ee69?s=128&d=identicon&r=PG", "display_name": "Iron Savior", "link": "https://stackoverflow.com/users/1449569/iron-savior"}, "edited": false, "score": 0, "creation_date": 1447204076, "post_id": 33642408, "comment_id": 55059293, "body": "Perfect, thank you. Both require &#39;./contact_info.rb&#39; and require_relative &#39;contact_info&#39; worked since I was in the directory."}], "answers": [{"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 0, "last_activity_date": 1447203215, "creation_date": 1447203215, "answer_id": 33642474, "question_id": 33642408, "link": "https://stackoverflow.com/questions/33642408/ruby-require-command-not-loading-correctly/33642474#33642474", "title": "ruby require command not loading correctly", "body": "<p>Assuming the file is in your current directory, type this in your command line:</p>\n\n<pre><code>irb -r './contact_info.rb'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2824, "user_id": 756704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddb3408f7a645f5edb0bfb4581f75ae5?s=128&d=identicon&r=PG", "display_name": "Fernando Almeida", "link": "https://stackoverflow.com/users/756704/fernando-almeida"}, "is_accepted": false, "score": 1, "last_activity_date": 1447203566, "creation_date": 1447203566, "answer_id": 33642530, "question_id": 33642408, "link": "https://stackoverflow.com/questions/33642408/ruby-require-command-not-loading-correctly/33642530#33642530", "title": "ruby require command not loading correctly", "body": "<p>you can use <code>require_relative 'contact_info'</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": false, "score": 0, "last_activity_date": 1447216115, "last_edit_date": 1447216115, "creation_date": 1447212546, "answer_id": 33643804, "question_id": 33642408, "link": "https://stackoverflow.com/questions/33642408/ruby-require-command-not-loading-correctly/33643804#33643804", "title": "ruby require command not loading correctly", "body": "<p>First, note that with any <code>require</code> statement, you omit the file extension:</p>\n\n<pre><code>require 'contact_info'\n</code></pre>\n\n<p>When you <code>require</code> a file, ruby only looks in certain directories on your computer for the file.  You can see which directories those are by running the following code:</p>\n\n<pre><code>p $LOAD_PATH\n</code></pre>\n\n<p><code>In ruby 1.8.7</code>, the <code>$LOAD_PATH</code> array included <code>\".\"</code>, or the current directory, which means your code would have worked. But, including the current directory in $LOAD_PATH was deemed a security risk, so now you have to do something different:</p>\n\n<p>1) One option is to use a <code>relative path</code> for the file you specify in the require statement:</p>\n\n<pre><code>require './contact_info'\n</code></pre>\n\n<p>The path is relative to the <code>current directory</code>.  That works fine if you have this structure:</p>\n\n<pre><code>/some/dir/\n    your_prog.rb\n    contact_info.rb\n</code></pre>\n\n<p><strong><em>And</em></strong> you switch directories to <code>/some/dir</code> and then run <code>your_prog.rb</code>:</p>\n\n<pre><code>~$ cd /some/dir\n/some/dir$ ruby my_prog.rb\n</code></pre>\n\n<p>The require statement works--no problems. However, what if you do this:</p>\n\n<pre><code>/some/dir$ cd ..\n/some$ ruby ./dir/your_prog.rb\n</code></pre>\n\n<p>Now, the current directory is <code>/some</code>, and <code>require './contact_info'</code> tells ruby to look in the <code>/some</code> directory for <code>contact_info.rb</code>--but it isn't there, so you will get the error:</p>\n\n<pre><code>`require': cannot load such file -- ./contact_info.rb (LoadError)\n</code></pre>\n\n<p>2) To cure that problem, ruby added <code>require_relative</code>.  Paths specified with <code>require_relative</code> are relative to the location of <strong><em>the file</em></strong> that contains the <code>require_relative</code> statement.  As a result, the statement:</p>\n\n<pre><code>#your_prog.rb:\nrequire_relative './contact_info'\n</code></pre>\n\n<p>...will look in the directory containing <code>your_prog.rb</code> for the file <code>contact_info.rb</code>. Now, doing this:</p>\n\n<pre><code>/some$ ruby ./dir/your_prog.rb\n</code></pre>\n\n<p>will work fine.  And in fact, in the <code>require_relative</code> you don't even have to write the <code>./</code> in the path:</p>\n\n<pre><code>#your_prog.rb:\nrequire_relative 'contact_info'  #Look for contact_info.rb in the same\n                                 #directory that contains this file\n\nrequire_relative '../contact_info'  #Look for contact_info.rb one directory\n                                    #above the directory that contains this file\n</code></pre>\n\n<blockquote>\n  <p>I am working through the lynda videos on Ruby and am just getting to\n  the part of requiring content from .rb files in irb.</p>\n</blockquote>\n\n<p>In my opinion, it's not a good idea to use irb for much of anything. A better option is to create a couple of files called 1.rb, 2.rb, 3.rb, and do your coding in those files.</p>\n"}], "owner": {"reputation": 1, "user_id": 5548859, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153387143994965/picture?type=large", "display_name": "Ben Peterson", "link": "https://stackoverflow.com/users/5548859/ben-peterson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 767, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1447216115, "creation_date": 1447202839, "last_edit_date": 1447204729, "question_id": 33642408, "link": "https://stackoverflow.com/questions/33642408/ruby-require-command-not-loading-correctly", "title": "ruby require command not loading correctly", "body": "<p>First post, \"Hello World\"</p>\n\n<p>I am working through the lynda videos on Ruby and am just getting to the part of requiring content from .rb files in irb. An example patch we made is named contact_info.rb and from irb I am trying to require that file. When executed it comes back with the attached below.</p>\n\n<p>Some light googling made it seem like this is maybe a yosemite issue (running 10.10.3.), but I'm not sure how to troubleshoot. </p>\n\n<p>Thanks all</p>\n\n<pre><code>irb(main):006:0&gt; require contact_info.rb\nLoadError: cannot load such file -- contact_info.rb\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:55:in 'require'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:55:in 'require'\n    from (irb):6\n    from /usr/bin/irb:12:in '&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["html", "css", "ruby", "postgresql", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 3129, "user_id": 455826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/aPD2c.jpg?s=128&g=1", "display_name": "AmitA", "link": "https://stackoverflow.com/users/455826/amita"}, "is_accepted": true, "score": 1, "last_activity_date": 1447205799, "last_edit_date": 1447205799, "creation_date": 1447204881, "answer_id": 33642735, "question_id": 33642387, "link": "https://stackoverflow.com/questions/33642387/how-to-display-total-records-in-postgresql-db-based-on-attribute/33642735#33642735", "title": "how to display total records in Postgresql DB based on attribute", "body": "<p>Depends on where (which controller action) you are looking to perform the counts.</p>\n\n<p><strong>If it's in <code>index</code>:</strong></p>\n\n<p>It seems like you already load the related records into memory with: </p>\n\n<pre><code>@active_calls = Call.where(status: 'active')\n@pending_calls = Call.where(status: 'pending')\n</code></pre>\n\n<p>So you don't need to issue a new query, you can simply call Ruby's <code>length</code> method like this:</p>\n\n<pre><code>@active_calls.length\n@pending_calls.length\n</code></pre>\n\n<p>By the way, I would probably avoid running three queries like you do at the moment and do something like this:</p>\n\n<pre><code>@calls = Call.all \n@active_calls = @calls.select{|x| x.status == 'active'}\n@pending_calls = @calls.select{|x| x.status == 'pending'}\n</code></pre>\n\n<p>And use the <code>@active_calls.length</code> and <code>@pending_calls.length</code> as before. The reason is that every trip to the database comes with an overhead. It might not seem much, but these latencies add up and make your controller action slower. So generally you want to reduce the number of trips to the database as much as you can. The code above uses Ruby's <code>select</code> method to go over the array and pick the elements for which the block is evaluated as true; this happens in memory and does not require a trip to the database.</p>\n\n<p><strong>If it's in a different controller action:</strong></p>\n\n<p>Assuming that in that other controller action you do not load an array of <code>Call</code> Active Record objects, you probably want to issue <code>COUNT(*)</code> queries. These are generally faster than loading all the records and performing the count in memory (e.g. with <code>length</code>), because the database server simply needs to return you a number instead of all the records data, and you also save the overhead of building Active Record objects. </p>\n\n<p>The way to do this with Active Record is simply: </p>\n\n<pre><code>Call.where(status: 'active').count\nCall.where(status: 'pending').count\n</code></pre>\n\n<p>If you want want to do one <code>COUNT</code> query with a <code>GROUP BY</code> instead of two separate queries (good idea, as it saves an extra trip to the database), you could do this:</p>\n\n<pre><code>Call.group(:status).count\n</code></pre>\n\n<p>This would result in a hash such as <code>{'active' =&gt; 150, 'pending' =&gt; 120}</code> which you can use in your view.</p>\n"}], "owner": {"reputation": 1180, "user_id": 4825744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10155467328840293/picture?type=large", "display_name": "Shawn Wilson", "link": "https://stackoverflow.com/users/4825744/shawn-wilson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21, "favorite_count": 0, "accepted_answer_id": 33642735, "answer_count": 1, "score": 0, "last_activity_date": 1447205799, "creation_date": 1447202730, "question_id": 33642387, "link": "https://stackoverflow.com/questions/33642387/how-to-display-total-records-in-postgresql-db-based-on-attribute", "title": "how to display total records in Postgresql DB based on attribute", "body": "<p>I am trying to display a numerical value for total number of Active and Pending calls. Currently i have these broken out into two panels and would like to include a visible number to show how many of each type are in que. </p>\n\n<p>I have searched this out but its all very convoluted and makes not much sense. </p>\n\n<p>the column name is \"status\" and in the call create page the have the option to select \"assigned\" and \"pending\"</p>\n\n<p>below is my controller for reference. </p>\n\n<p>Calls Controller: </p>\n\n<pre><code>class CallsController &lt; ApplicationController\n  before_action :set_call, only: [:show, :edit, :update, :destroy]\n\n  # GET /calls\n  # GET /calls.json\n  def index\n    @calls = Call.all\n    @active_calls = Call.where(status: 'active')\n    @pending_calls = Call.where(status: 'pending')\n  end\n\n  # GET /calls/1\n  # GET /calls/1.json\n  def show\n  end\n\n  # GET /calls/new\n  def new\n    @call = Call.new\n  end\n\n  # GET /calls/1/edit\n  def edit\n  end\n\n  # POST /calls\n  # POST /calls.json\n  def create\n    @call = Call.new(call_params)\n\n    respond_to do |format|\n      if @call.save\n        format.html { redirect_to @call, notice: 'Call was successfully created.' }\n        format.json { render :show, status: :created, location: @call }\n      else\n        format.html { render :new }\n        format.json { render json: @call.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /calls/1\n  # PATCH/PUT /calls/1.json\n  def update\n    respond_to do |format|\n      if @call.update(call_params)\n        format.html { redirect_to @call, notice: 'Call was successfully updated.' }\n        format.json { render :show, status: :ok, location: @call }\n      else\n        format.html { render :edit }\n        format.json { render json: @call.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /calls/1\n  # DELETE /calls/1.json\n  def destroy\n    @call.destroy\n    respond_to do |format|\n      format.html { redirect_to calls_url, notice: 'Call was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_call\n      @call = Call.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def call_params\n      params.require(:call).permit(:call_time, :status, :primary_type, :secondary_type, :site, :address, :unit_1, :unit_2, :unit_3, :unit_4, :call_details, :unit_on_scene, :unit_clear, :call_num, :site_id)\n    end\nend\n</code></pre>\n\n<p>the Postgresql side of things is my weakness and i am currently working to strengthen this.</p>\n\n<p>Thanks in advance for you assistance. </p>\n"}, {"tags": ["ruby", "amazon-web-services", "amazon-s3"], "answers": [{"tags": [], "owner": {"reputation": 138098, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "is_accepted": true, "score": 1, "last_activity_date": 1447209688, "creation_date": 1447209688, "answer_id": 33643405, "question_id": 33642141, "link": "https://stackoverflow.com/questions/33642141/when-marker-is-supplied-does-a-request-to-list-objects-start-with-that-key-or/33643405#33643405", "title": "When marker is supplied, does a request to list objects start with that key, or one after the key?", "body": "<p>Note that both the ruby and the API documentation begin with the same phrase:</p>\n\n<blockquote>\n  <p>Specifies the key to start with when listing objects in a bucket.</p>\n</blockquote>\n\n<p>However, this is where S3 starts its <em>search</em>, not it's listing.</p>\n\n<p>Results actually begin with the next object key after the marker.  </p>\n\n<p>(This is also true If the key designated by the marker doesn't actually exist -- results begin with the next key).</p>\n"}], "owner": {"reputation": 70080, "user_id": 38765, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/01bbb59a1c3ef9960f25a97afe7e920f?s=128&d=identicon&r=PG", "display_name": "Andrew Grimm", "link": "https://stackoverflow.com/users/38765/andrew-grimm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "accepted_answer_id": 33643405, "answer_count": 1, "score": 0, "last_activity_date": 1447209688, "creation_date": 1447201083, "question_id": 33642141, "link": "https://stackoverflow.com/questions/33642141/when-marker-is-supplied-does-a-request-to-list-objects-start-with-that-key-or", "title": "When marker is supplied, does a request to list objects start with that key, or one after the key?", "body": "<p>The documentation for AWS for Ruby has for <a href=\"http://docs.aws.amazon.com/sdkforruby/api/Aws/S3/Client.html#list_objects-instance_method\" rel=\"nofollow\">AWS::S3::Client#list_objects</a> has</p>\n\n<blockquote>\n  <p><code>:marker</code> (<code>String</code>) \u2014 Specifies the key to start with when listing objects in a bucket.</p>\n</blockquote>\n\n<p>which I assume would mean that if you passed in <code>marker: 'foo/bar.baz'</code>, then the object with a key of <code>'foo/bar.baz'</code> would be included in the results.</p>\n\n<p>However, the language-neutral documentation for listing objects <a href=\"http://docs.aws.amazon.com/AmazonS3/latest/API/RESTBucketGET.html\" rel=\"nofollow\">GET Bucket (List Objects)</a> says (emphasis added)</p>\n\n<blockquote>\n  <p>marker</p>\n  \n  <p>Specifies the key to start with when listing objects in a bucket. Amazon S3 returns object keys in alphabetical order, starting with key <strong>after the marker</strong> in order.</p>\n  \n  <p>Type: String</p>\n  \n  <p>Default: None</p>\n</blockquote>\n\n<p>Experimentation with actual Ruby code suggests the latter is correct, but what is the specified behaviour? Including, or excluding, the object with a key matching the value of <code>marker</code>?</p>\n"}, {"tags": ["ruby", "ruby-object-mapper"], "comments": [{"owner": {"reputation": 1317, "user_id": 1411115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/364d95a6338c96d6380a91426e1e0a52?s=128&d=identicon&r=PG", "display_name": "erapert", "link": "https://stackoverflow.com/users/1411115/erapert"}, "edited": false, "score": 0, "creation_date": 1447201250, "post_id": 33642130, "comment_id": 55058430, "body": "Is this for Ruby on Rails or just a stand-alone Ruby program?"}, {"owner": {"reputation": 1774, "user_id": 437273, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9d5c129ec73999ca3a5552f29f853198?s=128&d=identicon&r=PG", "display_name": "Yuri Gadow", "link": "https://stackoverflow.com/users/437273/yuri-gadow"}, "reply_to_user": {"reputation": 1317, "user_id": 1411115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/364d95a6338c96d6380a91426e1e0a52?s=128&d=identicon&r=PG", "display_name": "erapert", "link": "https://stackoverflow.com/users/1411115/erapert"}, "edited": false, "score": 0, "creation_date": 1447201581, "post_id": 33642130, "comment_id": 55058549, "body": "This is in Rails, though I can&#39;t say I&#39;ve seen much integration between ROM and Rails\u2014a good thing in my mind\u2014so I&#39;d be a little surprised if the pool of possible answers was impacted."}], "answers": [{"comments": [{"owner": {"reputation": 1774, "user_id": 437273, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9d5c129ec73999ca3a5552f29f853198?s=128&d=identicon&r=PG", "display_name": "Yuri Gadow", "link": "https://stackoverflow.com/users/437273/yuri-gadow"}, "edited": false, "score": 0, "creation_date": 1447265034, "post_id": 33656235, "comment_id": 55087052, "body": "Thanks for the alternative! Unfortunately I think we do need a mapper as the data needs to end up in custom objects that have some domain logic. For what little it&#39;s worth, I disagree removing one line from the join and then adding the lengthier code, complexity, and inscrutability of a repository-combine is simpler than the common idiom of query-and-map-the-graph."}, {"owner": {"reputation": 5563, "user_id": 282051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e864e5088627498df8f9b911a9bc3219?s=128&d=identicon&r=PG", "display_name": "solnic", "link": "https://stackoverflow.com/users/282051/solnic"}, "reply_to_user": {"reputation": 1774, "user_id": 437273, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9d5c129ec73999ca3a5552f29f853198?s=128&d=identicon&r=PG", "display_name": "Yuri Gadow", "link": "https://stackoverflow.com/users/437273/yuri-gadow"}, "edited": false, "score": 0, "creation_date": 1447267825, "post_id": 33656235, "comment_id": 55088822, "body": "Eager loading is actually much more simpler than building a big result set from multiple joins and mapping that into aggregates. I can show you an example of a custom mapper that would do this personally I don&#39;t agree this is simpler. Repository combines are pretty simple, and keeping relation views separate gives you much better flexibility and composability."}, {"owner": {"reputation": 5563, "user_id": 282051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e864e5088627498df8f9b911a9bc3219?s=128&d=identicon&r=PG", "display_name": "solnic", "link": "https://stackoverflow.com/users/282051/solnic"}, "reply_to_user": {"reputation": 1774, "user_id": 437273, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9d5c129ec73999ca3a5552f29f853198?s=128&d=identicon&r=PG", "display_name": "Yuri Gadow", "link": "https://stackoverflow.com/users/437273/yuri-gadow"}, "edited": false, "score": 0, "creation_date": 1447267855, "post_id": 33656235, "comment_id": 55088845, "body": "oh one more thing, next version of repo will have ability to map to your own objects via <code>users.as(MyUser)</code>. it&#39;s already in master"}, {"owner": {"reputation": 1774, "user_id": 437273, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9d5c129ec73999ca3a5552f29f853198?s=128&d=identicon&r=PG", "display_name": "Yuri Gadow", "link": "https://stackoverflow.com/users/437273/yuri-gadow"}, "edited": false, "score": 0, "creation_date": 1447269282, "post_id": 33656235, "comment_id": 55089655, "body": "I&#39;m sure you&#39;re right about the complexity under the hood, I was speaking only from the API user&#39;s perspective, and even there I&#39;m likely wrong\u2014hard to say until I can get something, dear god anything, to actually work. :) I will give repositories another go today and hope I can dodge the base name issue."}], "tags": [], "owner": {"reputation": 5563, "user_id": 282051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e864e5088627498df8f9b911a9bc3219?s=128&d=identicon&r=PG", "display_name": "solnic", "link": "https://stackoverflow.com/users/282051/solnic"}, "is_accepted": false, "score": 1, "last_activity_date": 1447262758, "creation_date": 1447262758, "answer_id": 33656235, "question_id": 33642130, "link": "https://stackoverflow.com/questions/33642130/how-to-map-a-many-to-many-join-in-ruby-object-mapper/33656235#33656235", "title": "How to Map A Many to Many Join in Ruby Object Mapper", "body": "<p>Building up complex joins like that is not recommended unless you have good reasons like performance. It's much simpler to use repositories to compose relations by defining relation views that you need for reusability and composing those in various way inside repos. Defining custom mappers should also be avoided unless you have some unique requirements.</p>\n\n<p>I made a gist that illustrates that right here: <a href=\"https://gist.github.com/solnic/9307e1b2e3428718dd12\" rel=\"nofollow\">https://gist.github.com/solnic/9307e1b2e3428718dd12</a></p>\n\n<p>We're working on a new set of docs that will properly explain those things.</p>\n"}], "owner": {"reputation": 1774, "user_id": 437273, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9d5c129ec73999ca3a5552f29f853198?s=128&d=identicon&r=PG", "display_name": "Yuri Gadow", "link": "https://stackoverflow.com/users/437273/yuri-gadow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 432, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447262758, "creation_date": 1447201040, "last_edit_date": 1447203079, "question_id": 33642130, "link": "https://stackoverflow.com/questions/33642130/how-to-map-a-many-to-many-join-in-ruby-object-mapper", "title": "How to Map A Many to Many Join in Ruby Object Mapper", "body": "<p>Given:</p>\n\n<pre><code>create_table(:foos) do\n  primary_key(:id)\n  String(:name)\nend\n\ncreate_table(:bars) do\n  primary_key(:id)\n  String(:name)\nend\n\ncreate_table(:foos_bars) do\n  primary_key(:id)\n  foreign_key(:foo_id, :foos)\n  foreign_key(:bar_id, :bars)\n  String(:name)\nend\n\nclass Foos &lt; ROM::Relation[:sql]\n  dataset :foos\n\n  def with_bars(id)\n    prefix('foos').qualified.select(\n      :foos__id, :foos__name\n    ).select_append(\n      :bars__id, :bars__name\n    ).left_join(\n      :foos_bars, foos_bars__bars_id: :foos__id\n    ).left_join(\n      :bars, bars__id: :foos_bars__bars_id\n    ).where(foos__id: id)\n  end\nend\n\nclass FoosModel\n  include Virtus.model\n\n  attribute :id\n  attribute :name\n  attribute :bars\nend\n\nclass BarsModel\n  include Virtus.model\n\n  attribute :id\n  attribute :name\n  attribute :foos\nend\n</code></pre>\n\n<p>I've tried many, many random variations on the keywords shown in (but not explained in) the ROM docs to no avail. Here's a literal interpretation of the docs into a mapper for Foos, which doesn't work:</p>\n\n<pre><code>class FoosMapper &lt; ROM::Mapper\n  relation :foos\n  register_as :foos\n  model Foo\n\n  prefix('foos')\n  attribute :id\n  attribute :name\n\n  group :bars do\n    model Bar\n    attribute :id, from: :bar\n    attribute :name, from: :bar\n  end\nend\n</code></pre>\n\n<p>How does one write a mapper (or rework the relation to work with the mapper) to get the simple result of a foo with a bars attribute having all the bars linked by the foos_bars table?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5548717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/565c4715b300745802469927b1d34ce3?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos", "link": "https://stackoverflow.com/users/5548717/carlos"}, "edited": false, "score": 0, "creation_date": 1447200557, "post_id": 33641940, "comment_id": 55058217, "body": "Thanks, its working!"}], "tags": [], "owner": {"reputation": 1539, "user_id": 320546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df48760ae51273ce62b3b72e188796d8?s=128&d=identicon&r=PG", "display_name": "Tom Parker-Shemilt", "link": "https://stackoverflow.com/users/320546/tom-parker-shemilt"}, "is_accepted": true, "score": 0, "last_activity_date": 1447199907, "creation_date": 1447199907, "answer_id": 33641940, "question_id": 33641863, "link": "https://stackoverflow.com/questions/33641863/ruby-on-rails-undefined-method-to-datetime/33641940#33641940", "title": "Ruby on Rails undefined method &#39;to_datetime&#39;", "body": "<p><code>to_datetime</code> is a method on strings, where as you appear to have some hashtables.</p>\n\n<p>Some other form of conversion is needed. Something like\n<code>DateTime.new(params[:start_date][\"year\"], params[:start_date][\"month\"], params[:start_date][\"day\"])</code> would probably work, although I'd advise making a separate function to convert a params hash into a DateTime (essentially wrapping that raw code in a cleaner function).</p>\n"}, {"tags": [], "owner": {"reputation": 1880, "user_id": 5508939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fCMtP.jpg?s=128&g=1", "display_name": "Yang", "link": "https://stackoverflow.com/users/5508939/yang"}, "is_accepted": false, "score": 0, "last_activity_date": 1447200377, "creation_date": 1447200377, "answer_id": 33642022, "question_id": 33641863, "link": "https://stackoverflow.com/questions/33641863/ruby-on-rails-undefined-method-to-datetime/33642022#33642022", "title": "Ruby on Rails undefined method &#39;to_datetime&#39;", "body": "<p>The parameter generated from your view is a hash with \"year\", \"month\", \"day\" in it. You need to convert it to a string like \"2015-11-07\" first and call <code>to_datetime</code> to get the datetime value. I changed a little of my codes in one of my project to fit your variables:</p>\n\n<pre><code>start_date = parames[:start_date][:year] + '-' + parames[:start_date][:month] + '-' + parames[:start_date][:day]\nstartt = start_date.to_datetime\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5548717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/565c4715b300745802469927b1d34ce3?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos", "link": "https://stackoverflow.com/users/5548717/carlos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2946, "favorite_count": 0, "closed_date": 1447200650, "accepted_answer_id": 33641940, "answer_count": 2, "score": 1, "last_activity_date": 1447200377, "creation_date": 1447199417, "question_id": 33641863, "link": "https://stackoverflow.com/questions/33641863/ruby-on-rails-undefined-method-to-datetime", "closed_reason": "Duplicate", "title": "Ruby on Rails undefined method &#39;to_datetime&#39;", "body": "<p>I tried to compare values from View with created_at from DB, but i have this problem <b>\"undefined method `to_datetime' for {\"year\"=>\"2015\", \"month\"=>\"11\", \"day\"=>\"7\"}:ActionController::Parameters\"</b>. I have no ideas.</p>\n\n<p>Controller:</p>\n\n<pre><code>def data_search\n    @SDB=[]\n    startt=params[:start_date].to_datetime\n    endt=params[:end_date].to_datetime\n    Offer.where(created_at: [startt..endt]).each do |f|\n        @SDB.push(f)\n    end\nend\n</code></pre>\n\n<p>Segment from search.html.erb:</p>\n\n\n\n<pre><code>        &lt;%= select_date Date.today, :prefix =&gt; :start_date %&gt; \n        &lt;%= select_date Date.today, :prefix =&gt; :end_date%&gt; \n</code></pre>\n\n<p>Without 'to_datetime' i have <b>bad value for range</b></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "arel"], "comments": [{"owner": {"reputation": 2508, "user_id": 2056593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c6361565de749323c14999412d23d2e?s=128&d=identicon&r=PG", "display_name": "muZk", "link": "https://stackoverflow.com/users/2056593/muzk"}, "edited": false, "score": 0, "creation_date": 1512603928, "post_id": 33641601, "comment_id": 82330430, "body": "I think that some queries could be written better (for example: second = Customer.joins(:import_logs).where(import_logs: { /* ImportLog conditions here */ }))... I don&#39;t get what you are trying to accomplish."}, {"owner": {"reputation": 81, "user_id": 218026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e98df0c467e7a900f3d6173f286a3700?s=128&d=identicon&r=PG", "display_name": "jjthrash", "link": "https://stackoverflow.com/users/218026/jjthrash"}, "edited": false, "score": 0, "creation_date": 1611754260, "post_id": 33641601, "comment_id": 116551705, "body": "I had the same problem. See the accepted answer to this post: <a href=\"https://stackoverflow.com/questions/57491185/obtain-union-all-result-in-activerecord\" title=\"obtain union all result in activerecord\">stackoverflow.com/questions/57491185/&hellip;</a>  Replacing <code>a.union(b)</code> with <code>Arel::Nodes::UnionAll.new(a, b)</code> fixed the binding issue for me."}], "answers": [{"tags": [], "owner": {"reputation": 1812, "user_id": 9104680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e2d06cc56c31f995950c00602a0e7d?s=128&d=identicon&r=PG", "display_name": "Derek Hopper", "link": "https://stackoverflow.com/users/9104680/derek-hopper"}, "is_accepted": false, "score": 1, "last_activity_date": 1514426564, "creation_date": 1514426564, "answer_id": 48000766, "question_id": 33641601, "link": "https://stackoverflow.com/questions/33641601/arel-rails-4-2-causing-problems-bindings-being-lost/48000766#48000766", "title": "Arel + Rails 4.2 causing problems (bindings being lost)", "body": "<p>I know this question is a bit old, but the error sounded familiar. I had some notes and our solution in a repository, so I thought I'd share.</p>\n\n<p>The error we were receiving was:</p>\n\n<blockquote>\n  <p>PG::ProtocolViolation: ERROR:  bind message supplies 0 parameters, but\n  prepared statement \"\" requires 1</p>\n</blockquote>\n\n<p>So as you can see, our situation is a bit different. We didn't have 8 bind values. However, our single bind value was still being clobbered. I changed the naming of things to keep it general.</p>\n\n<pre><code>first_level = Blog.all_comments\nsecond_level = Comment.where(comment_id: first_level.select(:id))\nthird_level = Comment.where(comment_id: second_level.select(:id))\n</code></pre>\n\n<p><code>Blog.all_comments</code> is where we have the single bind value. That's the piece we're losing.</p>\n\n<pre><code>union = first_level.union second_level\nunion2 = Comment.from(\n  Comment.arel_table.create_table_alias union, :comments\n).union third_level\n\nrelation = Comment.from(Comment.arel_table.create_table_alias union2, :comments)\n</code></pre>\n\n<p>We created a union much like you except that we needed to union three different queries.</p>\n\n<p>To get the lost bind values at this point, we did a simple assignment. In the end, this is a little simpler of a case than yours. However, it may be helpful.</p>\n\n<pre><code>relation.bind_values = first_level.bind_values\nrelation\n</code></pre>\n\n<p>By the way, here's the <a href=\"https://github.com/rails/rails/issues/12753\" rel=\"nofollow noreferrer\">GitHub issue</a> we found while working on this. It doesn't appear to have any updates since this question was posted though.</p>\n"}], "owner": {"reputation": 7995, "user_id": 673859, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/88cfe5a91b7abf8c9c2a0c1a7ab199b8?s=128&d=identicon&r=PG", "display_name": "Matthew Berman", "link": "https://stackoverflow.com/users/673859/matthew-berman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1222, "favorite_count": 3, "answer_count": 1, "score": 20, "last_activity_date": 1514426564, "creation_date": 1447197912, "last_edit_date": 1447199393, "question_id": 33641601, "link": "https://stackoverflow.com/questions/33641601/arel-rails-4-2-causing-problems-bindings-being-lost", "title": "Arel + Rails 4.2 causing problems (bindings being lost)", "body": "<p>We recently upgraded to Rails 4.2 from Rails 4.1 and are seeing problems with using Arel + Activerecord because we're getting this type of error:</p>\n\n<pre><code>ActiveRecord::StatementInvalid: PG::ProtocolViolation: ERROR:  bind message supplies 0 parameters, but prepared statement \"\" requires 8\n</code></pre>\n\n<p>Here's the code that is breaking:</p>\n\n<pre><code>customers = Customer.arel_table\n\n      ne_subquery = ImportLog.where(\n        importable_type: Customer.to_s,\n        importable_id: customers['id'],\n        remote_type: remote_type.to_s.singularize,\n        destination: 'hello'\n      ).exists.not\n\n      first  = Customer.where(ne_subquery).where(company_id: @company.id)\n      second = Customer.joins(:import_logs).merge(\n        ImportLog.where(\n          importable_type: Customer.to_s,\n          importable_id: customers['id'],\n          remote_type: remote_type.to_s.singularize,\n          status: 'pending',\n          destination: 'hello',\n          remote_id: nil\n        )\n      ).where(company_id: @company.id)\n\n      Customer.from(\n        customers.create_table_alias(\n          first.union(second),\n          Customer.table_name\n        )\n      )\n</code></pre>\n\n<p>We figured out how to solve the first part of the query (running into the same rails bug of not having bindings) by moving the exists.not to be within Customer.where like so:</p>\n\n<pre><code>ne_subquery = ImportLog.where(\n       importable_type: Customer.to_s,\n       importable_id: customers['id'],\n       destination: 'hello'\n     )\n\n     first  = Customer.where(\"NOT (EXISTS (#{ne_subquery.to_sql}))\").where(company_id: @company.id)\n</code></pre>\n\n<p>This seemed to work but we ran into the same issue with this line of code:</p>\n\n<pre><code>first.union(second)\n</code></pre>\n\n<p>whenever we run this part of the query, the bindings get lost. first and second are both active record objects but as soon as we \"union\" them, they lose the bindings are become arel objects.</p>\n\n<p>We tried cycling through the query and manually replacing the bindings but couldn't seem to get it working properly. What should we do instead?</p>\n\n<p>EDIT:</p>\n\n<p>We also tried extracting the bind values from first and second, and then manually replacing them in the arel object like so:</p>\n\n<pre><code>union.grep(Arel::Nodes::BindParam).each_with_index do |bp, i|\n  bv = bind_values[i]\n  bp.replace(Customer.connection.substitute_at(bv, i))\nend\n</code></pre>\n\n<p>However, it fails because:</p>\n\n<pre><code>NoMethodError: undefined method `replace' for #&lt;Arel::Nodes::BindParam:0x007f8aba6cc248&gt;\n</code></pre>\n\n<p>This was a solution suggested in the rails github repo.</p>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "edited": false, "score": 0, "creation_date": 1447202236, "post_id": 33641523, "comment_id": 55058750, "body": "This is not recursive."}, {"owner": {"reputation": 921, "user_id": 3601621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/548735107/picture?type=large", "display_name": "Adzz", "link": "https://stackoverflow.com/users/3601621/adzz"}, "edited": false, "score": 0, "creation_date": 1447239036, "post_id": 33641523, "comment_id": 55071341, "body": "would be good, but should have said trying specifically not to use sort."}], "tags": [], "owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "is_accepted": false, "score": 1, "last_activity_date": 1447197484, "creation_date": 1447197484, "answer_id": 33641523, "question_id": 33641425, "link": "https://stackoverflow.com/questions/33641425/ruby-poping-of-one-array-and-pushing-onto-another/33641523#33641523", "title": "Ruby: `pop`ing of one array and `push`ing onto another", "body": "<p>If I'm understanding you correctly, you could <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-sort\" rel=\"nofollow\"><code>sort</code></a> the initial array and then use the <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-shift\" rel=\"nofollow\"><code>shift</code></a> method to extract the first element.</p>\n\n<pre><code>a = [1,4,2,3,5,7,8,6].sort\nb = []\nb.push(a.shift) #=&gt; b = [1]\nb.push(a.shift) #=&gt; b = [1,2]\nb.push(a.shift) #=&gt; b = [1,2,3]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 128, "user_id": 4289365, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qpyJq.jpg?s=128&g=1", "display_name": "Tyler Brown", "link": "https://stackoverflow.com/users/4289365/tyler-brown"}, "is_accepted": false, "score": 1, "last_activity_date": 1447197631, "creation_date": 1447197631, "answer_id": 33641545, "question_id": 33641425, "link": "https://stackoverflow.com/questions/33641425/ruby-poping-of-one-array-and-pushing-onto-another/33641545#33641545", "title": "Ruby: `pop`ing of one array and `push`ing onto another", "body": "<p>If it's strictly numerical you're looking for (or alphabetical), you can always just use array.sort. </p>\n\n<p><code>a = a.sort</code> </p>\n\n<p>becomes </p>\n\n<p><code>a = [1,2,3,4,5,6,7,8]</code>. </p>\n\n<p>Then </p>\n\n<p><code>b.push(a.shift)</code></p>\n"}, {"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1447200787, "post_id": 33641714, "comment_id": 55058290, "body": "Should second line be <code>arr</code> instead of <code>a</code> and <code>n</code> instead of <code>3</code>?"}, {"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "edited": false, "score": 0, "creation_date": 1447203174, "post_id": 33641714, "comment_id": 55059029, "body": "The question asked for the element to be popped, but you said in your answer that <code>a</code> is unchanged. Popping it implies <code>a</code> should change."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1447224012, "post_id": 33641714, "comment_id": 55064278, "body": "Thanks, @sagarpandya82. I wrote this on a phone on which I could not run Ruby v2.2, so I couldn&#39;t test, which I almost always do. Still, it&#39;s a pretty bad oversight. I fixed that and also made some other changes."}, {"owner": {"reputation": 921, "user_id": 3601621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/548735107/picture?type=large", "display_name": "Adzz", "link": "https://stackoverflow.com/users/3601621/adzz"}, "edited": false, "score": 0, "creation_date": 1447239395, "post_id": 33641714, "comment_id": 55071528, "body": "@CarySwoveland If i had enough reps I would up vote this cause it really helped too, thanks!"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1447224123, "last_edit_date": 1447224123, "creation_date": 1447198615, "answer_id": 33641714, "question_id": 33641425, "link": "https://stackoverflow.com/questions/33641425/ruby-poping-of-one-array-and-pushing-onto-another/33641714#33641714", "title": "Ruby: `pop`ing of one array and `push`ing onto another", "body": "<p>With v.2.2+, you can use <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-min\" rel=\"nofollow\">Enumerable#min</a> with an argument:</p>\n\n<pre><code>def pop_n_push(arr, n)\n  arr.min(n).each { |e| arr.delete_at(arr.index(e)) }.to_a\nend\n\narr = [7,8,1,4,2,3,5,2,6]\nnew_arr = pop_n_push(arr, 4)\n  #=&gt; [1, 2, 2, 3] \narr\n  #=&gt; [7, 8, 4, 5, 6] \n</code></pre>\n\n<p><code>min</code> returns an enumerator containing the <code>n</code> smallest elements of <code>arr</code>. Each of those elements is located in and removed from <code>arr</code>. (Duplicate values are not a problem.) <a href=\"http://ruby-doc.org/core-2.1.5/Enumerator.html#method-i-each\" rel=\"nofollow\">Enumerator#each</a> returns its receiver, the enumerator, which is then converted to an array and returned by the method. One could instead write:</p>\n\n<pre><code>arr.min(n).to_a.each { |e| arr.delete_at(arr.index(e)) }\n</code></pre>\n\n<p>Note that this method preserves the order of the elements in <code>arr</code>. It should also be faster than sorting the array when <code>n</code> is substantially less than <code>arr.size</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1447214396, "post_id": 33642419, "comment_id": 55061904, "body": "Mike, you pointed out that the OP wants to remove values from the original array and I did not do that in my answer. I&#39;m sure you are right and thanks for pointing that out. I deleted my answer but may fix it and undelete"}, {"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1447220769, "post_id": 33642419, "comment_id": 55063418, "body": "@CarySwoveland that is understandable. The question is pretty poorly worded so it looks ambiguous."}, {"owner": {"reputation": 921, "user_id": 3601621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/548735107/picture?type=large", "display_name": "Adzz", "link": "https://stackoverflow.com/users/3601621/adzz"}, "edited": false, "score": 0, "creation_date": 1447236383, "post_id": 33642419, "comment_id": 55069837, "body": "@Mike Ha, is it? I thought it was pretty explicit. How could I improve it?"}, {"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "reply_to_user": {"reputation": 921, "user_id": 3601621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/548735107/picture?type=large", "display_name": "Adzz", "link": "https://stackoverflow.com/users/3601621/adzz"}, "edited": false, "score": 0, "creation_date": 1447262833, "post_id": 33642419, "comment_id": 55085724, "body": "@AdbA Even though the question mentioned recursive it sort of sounded like it was an extra word just thrown in, I wasn&#39;t totally sure if being recursive was a requirement at first. It would be more clear if you wrote the two requirements separately somehow. Such as: &quot;I&#39;m trying to accomplish two things. First, the element in the original array should be popped off when being added to the second array. Second, It should be done recursively.&quot;"}], "tags": [], "owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "is_accepted": true, "score": 3, "last_activity_date": 1447202921, "creation_date": 1447202921, "answer_id": 33642419, "question_id": 33641425, "link": "https://stackoverflow.com/questions/33641425/ruby-poping-of-one-array-and-pushing-onto-another/33642419#33642419", "title": "Ruby: `pop`ing of one array and `push`ing onto another", "body": "<p>The question requested a recursive method. None of the other answers are recursive.</p>\n\n<p>Here is a recursive solution:</p>\n\n<pre><code>class Array\n  def recursive_pop\n    any? ? [delete(min)] + recursive_pop : []\n  end\nend\n\nirb(main):082:0&gt; original_array = [1,2,3]\n  =&gt; [1, 2, 3]\nirb(main):083:0&gt; new_array = original_array.recursive_pop\n  =&gt; [1, 2, 3]\nirb(main):084:0&gt; new_array\n  =&gt; [1, 2, 3]\nirb(main):085:0&gt; original_array\n  =&gt; []\n</code></pre>\n\n<p>As requested, the method removes the minimum element in the original array one by one and adds the element to the new array.</p>\n"}], "owner": {"reputation": 921, "user_id": 3601621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/548735107/picture?type=large", "display_name": "Adzz", "link": "https://stackoverflow.com/users/3601621/adzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 618, "favorite_count": 0, "accepted_answer_id": 33642419, "answer_count": 4, "score": 2, "last_activity_date": 1566656464, "creation_date": 1447197011, "last_edit_date": 1566656464, "question_id": 33641425, "link": "https://stackoverflow.com/questions/33641425/ruby-poping-of-one-array-and-pushing-onto-another", "title": "Ruby: `pop`ing of one array and `push`ing onto another", "body": "<p>In Ruby, I want to <code>pop</code> an element (the smallest) off an array and <code>push</code> that <em>same</em> element on to a new array. I need it to be the same element that gets <code>push</code>'d, because I want to do it recursively without this happening:</p>\n\n<pre><code>a = [1,4,2,3,5,7,8,6]\nb = []\nb.push(a.min) #=&gt; b = [1]\nb.push(a.min) #=&gt; b = [1,1]\nb.push(a.min) #=&gt; b = [1,1,1]\n</code></pre>\n\n<p>Rather than</p>\n\n<pre><code>b.push(a.min) #=&gt; b = [1]\nb.push(a.min) #=&gt; b = [1,2]\nb.push(a.min) #=&gt; b = [1,2,3]\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>Should have mentioned, am trying not to use <code>sort</code>, thanks!</p>\n"}, {"tags": ["ruby", "http", "sinatra"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4542910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8865f5b3f059e4cb63c134cc6a74b844?s=128&d=identicon&r=PG&f=1", "display_name": "rish", "link": "https://stackoverflow.com/users/4542910/rish"}, "edited": false, "score": 0, "creation_date": 1447336876, "post_id": 33641739, "comment_id": 55119049, "body": "Thanks for your help! What are your views in checking to referer in the page I want to redirect to? I implemented a version that checked for status again in my model in the otherpage block and redirected if the status was invalid. Would using cookies be a more appropriate solution?"}], "tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": false, "score": 2, "last_activity_date": 1447198697, "creation_date": 1447198697, "answer_id": 33641739, "question_id": 33641303, "link": "https://stackoverflow.com/questions/33641303/how-do-i-prevent-the-user-from-accessing-the-url-directly-using-sinatra/33641739#33641739", "title": "How do I prevent the user from accessing the URL directly using Sinatra", "body": "<p>You can check the request's <code>Referer</code> header, but it's not very reliable since request headers can be spoofed:</p>\n\n<pre><code>get 'show' do\n  # Implement `allowed?` yourself\n  redirect 'otherpage' if allowed? env['HTTP_REFERER']\n  erb :show\nend\n</code></pre>\n\n<p>You can add a signature in cookie to prevent the <code>Referer</code> header being spoofed.</p>\n"}], "owner": {"reputation": 1, "user_id": 4542910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8865f5b3f059e4cb63c134cc6a74b844?s=128&d=identicon&r=PG&f=1", "display_name": "rish", "link": "https://stackoverflow.com/users/4542910/rish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1450114014, "creation_date": 1447196382, "last_edit_date": 1450114014, "question_id": 33641303, "link": "https://stackoverflow.com/questions/33641303/how-do-i-prevent-the-user-from-accessing-the-url-directly-using-sinatra", "title": "How do I prevent the user from accessing the URL directly using Sinatra", "body": "<p>I'm new to Ruby and Sinatra and I was wondering how one could accomplish this. Can the redirect to method be used to verify if the user has come from a valid webpage?</p>\n\n<p>For example:</p>\n\n<pre><code>get '/show' do\n  erb :show \n  redirect '/otherpage' \nend\n\n\n\nget '/otherpage' do\n  flash[:message] = \"How do I restrict access to this\"\n  erb :otherpage\nend\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1447196367, "post_id": 33641098, "comment_id": 55056585, "body": "That way, <code>last.txt</code> is opened and read numer-of-lines-in-<code>name.txt</code>-times, which is quite inefficient. Instead, reading the file contents into a variable and looping over it will be <i>much</i> more efficient, esp. when the files are going to become larger."}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "edited": false, "score": 0, "creation_date": 1447196484, "post_id": 33641098, "comment_id": 55056644, "body": "I agree. I did not go for the efficient code. I just updated his current code to  make that work, in this particular case, I just added <code>.each</code> and his own code worked with this little change :)"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1447196705, "post_id": 33641098, "comment_id": 55056735, "body": "<code>foreach</code> is cleaner than <code>open(&quot;last.txt&quot;, &quot;r&quot;).each</code>."}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1447209879, "post_id": 33641098, "comment_id": 55060785, "body": "@HolgerJust I have updated my answer. I was in a rush when I answered the question and did not have the time to work on the efficiency at that time. Thanks for your feedback :)"}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1447234111, "post_id": 33641098, "comment_id": 55068547, "body": "The inner two loops are not needed at all as <code>n</code> and <code>l</code> each contain a single-line string. The inner two loops are always just a single iteration long and are thus slow equivalents of <code>first = n</code> and <code>last = l</code>. In any case, the answer by @theTinMan is much more efficient that the nested loops in the first place."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1447259571, "post_id": 33641098, "comment_id": 55083715, "body": "This method will never be very efficient if either file is of a reasonable size. This is very likely a homework question as there&#39;s no practical use for the output in real life, however being able to do this with other types of data can be useful, but iterating over two lists, especially having to iterate over the inner list repeatedly, is slow and will grow extremely slow if the lists are hundreds of elements long. I smell a benchmark coming on."}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1447259854, "post_id": 33641098, "comment_id": 55083915, "body": "@theTinMan totally agree with you."}], "tags": [], "owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "is_accepted": true, "score": 2, "last_activity_date": 1447208778, "last_edit_date": 1495542597, "creation_date": 1447195554, "answer_id": 33641098, "question_id": 33640999, "link": "https://stackoverflow.com/questions/33640999/reading-two-files-and-output-results-in-ruby/33641098#33641098", "title": "Reading two files and output results in Ruby", "body": "<p>To get each lines of the text file, you have to use <code>each</code> like this:</p>\n\n<pre><code>File.open(\"name.txt\", \"r\").each do |n|\n . . . \n\nend\n</code></pre>\n\n<p>So, using <code>each</code> your code works:</p>\n\n<pre><code>File.open(\"name.txt\", \"r\").each do |n|\n File.open(\"last.txt\", \"r\").each do |l|\n    n.each_line do |first|\n       l.each_line do |last|\n          full_name = first.chomp + \" \" + last.chomp\n          puts full_name\n      end\n    end\n  end\nend\n</code></pre>\n\n<p><strong><em>Although</em></strong> this works and solves your problem, but it's not an efficient way of reading files.</p>\n\n<p>To make it efficient, you should use <a href=\"http://ruby-doc.org/core-2.2.3/IO.html#method-c-readlines\" rel=\"nofollow noreferrer\">readlines</a> to read the entire file content at a time and save that in an array. See <a href=\"https://stackoverflow.com/a/25189286/981183\">this answer</a> for more details on this.</p>\n\n<p>So, your code can be more efficient if written this way: </p>\n\n<pre><code>names = File.readlines('name.txt')\nlast_names = File.readlines('last.txt')\n\nnames.each do |n|\n last_names.each do |l|\n    n.each_line do |first|\n       l.each_line do |last|\n          full_name = first.chomp + \" \" + last.chomp\n          puts full_name\n      end\n    end\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 3, "last_activity_date": 1447263993, "last_edit_date": 1495542219, "creation_date": 1447196156, "answer_id": 33641242, "question_id": 33640999, "link": "https://stackoverflow.com/questions/33640999/reading-two-files-and-output-results-in-ruby/33641242#33641242", "title": "Reading two files and output results in Ruby", "body": "<p>Consider this:</p>\n\n<pre><code>first = %w[jane john]\nlast = %w[doe smith]\n\nfirst.product(last)\n# =&gt; [[\"jane\", \"doe\"], [\"jane\", \"smith\"], [\"john\", \"doe\"], [\"john\", \"smith\"]]\n</code></pre>\n\n<p>You can do something like this:</p>\n\n<pre><code>first = File.readlines('name.txt').map(&amp;:rstrip)\nlast = File.readlines('last.txt').map(&amp;:rstrip)\nfirst.product(last)\n</code></pre>\n\n<p><a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-product\" rel=\"nofollow noreferrer\"><code>product</code></a> is one of Array's methods. Also look at <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-permutation\" rel=\"nofollow noreferrer\"><code>permutation</code></a> and <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-combination\" rel=\"nofollow noreferrer\"><code>combination</code></a>.</p>\n\n<p>We can use <a href=\"http://ruby-doc.org/core-2.2.3/String.html#method-i-chomp\" rel=\"nofollow noreferrer\"><code>chomp</code></a> instead of <a href=\"http://ruby-doc.org/core-2.2.3/String.html#method-i-rstrip\" rel=\"nofollow noreferrer\"><code>rstrip</code></a> to remove a trailing new-line, which will be returned by <code>readlines</code>, however <code>chomp</code> only trims new-lines, whereas <code>rstrip</code> will remove trailing whitespace, cleaning up the names a bit if there is any trailing whitespace. (In my experience it's more likely we'll see whitespace after text than before it, because it's easier to see when it's leading.)</p>\n\n<hr>\n\n<p>Benchmarks:</p>\n\n<pre><code>require 'fruity'\n\nFIRST_NAME = [*'a'..'z']\nLAST_NAME  = [*'a'..'z']\n\nFIRST_NAME.size # =&gt; 26\nLAST_NAME.size  # =&gt; 26\n\ndef use_product\n  FIRST_NAME.product(LAST_NAME) \nend\n\ndef use_loops\n  output = []\n  FIRST_NAME.each do |fn|\n    LAST_NAME.each do |ln|\n      output &lt;&lt; [fn, ln]\n    end\n  end\n  output\nend\n\nresult = use_product\nresult.size  # =&gt; 676\nresult.first # =&gt; [\"a\", \"a\"]\nresult.last  # =&gt; [\"z\", \"z\"]\n\nresult = use_loops\nresult.size  # =&gt; 676\nresult.first # =&gt; [\"a\", \"a\"]\nresult.last  # =&gt; [\"z\", \"z\"]\n</code></pre>\n\n<p>Running it results in:</p>\n\n<pre><code>compare :use_product, :use_loops\n# &gt;&gt; Running each test 64 times. Test will take about 1 second.\n# &gt;&gt; use_product is faster than use_loops by 50.0% \u00b1 10.0%\n</code></pre>\n\n<p>If the source arrays increase in size:</p>\n\n<pre><code>require 'fruity'\n\nFIRST_NAME = [*'a1'..'z9']\nLAST_NAME  = [*'a1'..'z9']\n\nFIRST_NAME.size # =&gt; 259\nLAST_NAME.size  # =&gt; 259\n\ndef use_product\n  FIRST_NAME.product(LAST_NAME) \nend\n\ndef use_loops\n  output = []\n  FIRST_NAME.each do |fn|\n    LAST_NAME.each do |ln|\n      output &lt;&lt; [fn, ln]\n    end\n  end\n  output\nend\n\nresult = use_product\nresult.size  # =&gt; 67081\nresult.first # =&gt; [\"a1\", \"a1\"]\nresult.last  # =&gt; [\"z9\", \"z9\"]\n\nresult = use_loops\nresult.size  # =&gt; 67081\nresult.first # =&gt; [\"a1\", \"a1\"]\nresult.last  # =&gt; [\"z9\", \"z9\"]\n</code></pre>\n\n<p>Running that returns:</p>\n\n<pre><code>compare :use_product, :use_loops\n# &gt;&gt; Running each test once. Test will take about 1 second.\n# &gt;&gt; use_product is faster than use_loops by 60.00000000000001% \u00b1 10.0%\n</code></pre>\n\n<p>While we can write the algorithm without taking advantage of the built-in methods, the methods are written in C so take advantage of them to gain their added speed. </p>\n\n<p>There is a time I'd use iteration of separate arrays over the built-in <code>product</code>: If I had two huge lists, and pulling them into memory was prohibitive because of RAM constraints causing scalability issues, then the only way to deal with it would be nested loops. <a href=\"https://stackoverflow.com/questions/25189262/why-is-slurping-a-file-bad\">Ruby's <code>foreach</code> is extremely fast</a>, so writing code around it would be a good alternate:</p>\n\n<pre><code>File.foreach('name.txt') do |first|\n  File.foreach('last.txt') do |last|\n    full_name = first.chomp + \" \" + last.chomp\n    puts full_name\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 255, "user_id": 3610137, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/de66072482fa86fef2dabdb8eb8cb371?s=128&d=identicon&r=PG&f=1", "display_name": "user3610137", "link": "https://stackoverflow.com/users/3610137/user3610137"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 33641098, "answer_count": 2, "score": 1, "last_activity_date": 1447263993, "creation_date": 1447195110, "question_id": 33640999, "link": "https://stackoverflow.com/questions/33640999/reading-two-files-and-output-results-in-ruby", "title": "Reading two files and output results in Ruby", "body": "<p>I have a a name.txt file and last.txt file. I want to generate combination of all possible first and last names. For example:</p>\n\n<pre><code>$cat name.txt\nJack\nJamie\nJames\nJarred\nJosh\nJohn\nJane \n\n\n$cat last.txt\ndoe\nsmith\n</code></pre>\n\n<p>I tried doing this by:</p>\n\n<pre><code>File.open(\"name.txt\", \"r\") do |n|\n\n\n File.open(\"last.txt\", \"r\") do |l|\n    n.each_line do |first|\n       l.each_line do |last|\n          full_name = first.chomp + \" \" + last.chomp\n          puts full_name\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>The output is only showing that it only processes the first line of the name file:</p>\n\n<pre><code>Jack doe \nJack smith\n</code></pre>\n\n<p>How can I have it go through the entire first file providing full names for all the names in name.txt</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "database"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1447195758, "post_id": 33640912, "comment_id": 55056310, "body": "Rails builds the <code>schema.rb</code> as a snapshot of your database when you run migrations. But sometimes rails fails at keeping the test db schema up to date as you have noticed. Usually <code>rake db:test:load</code> fixes the problem."}, {"owner": {"reputation": 1933, "user_id": 1834523, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3efbc1ab8374ed89493755f32c0033c0?s=128&d=identicon&r=PG&f=1", "display_name": "Anthony To", "link": "https://stackoverflow.com/users/1834523/anthony-to"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1447197519, "post_id": 33640912, "comment_id": 55057079, "body": "Thanks for the input, <code>rake db:test:load</code> unfortunately did not solve the problem"}], "answers": [{"comments": [{"owner": {"reputation": 1933, "user_id": 1834523, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3efbc1ab8374ed89493755f32c0033c0?s=128&d=identicon&r=PG&f=1", "display_name": "Anthony To", "link": "https://stackoverflow.com/users/1834523/anthony-to"}, "edited": false, "score": 0, "creation_date": 1447363843, "post_id": 33659864, "comment_id": 55136478, "body": "I am absolutely certain that my dev database has a primary key on the default :id column"}, {"owner": {"reputation": 186, "user_id": 5546878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/369cd7101ef422446725a2c5525657b4?s=128&d=identicon&r=PG&f=1", "display_name": "CraigM", "link": "https://stackoverflow.com/users/5546878/craigm"}, "reply_to_user": {"reputation": 1933, "user_id": 1834523, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3efbc1ab8374ed89493755f32c0033c0?s=128&d=identicon&r=PG&f=1", "display_name": "Anthony To", "link": "https://stackoverflow.com/users/1834523/anthony-to"}, "edited": false, "score": 0, "creation_date": 1447385873, "post_id": 33659864, "comment_id": 55143641, "body": "Understood, but it seems AR doesn&#39;t agree for some reason and the test above will tell you what AR finds when it looks for a table&#39;s PK.  Perhaps there&#39;s a problem with the query that <code>connection.primary_key</code> is generating.  Hard to say"}, {"owner": {"reputation": 186, "user_id": 5546878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/369cd7101ef422446725a2c5525657b4?s=128&d=identicon&r=PG&f=1", "display_name": "CraigM", "link": "https://stackoverflow.com/users/5546878/craigm"}, "reply_to_user": {"reputation": 1933, "user_id": 1834523, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3efbc1ab8374ed89493755f32c0033c0?s=128&d=identicon&r=PG&f=1", "display_name": "Anthony To", "link": "https://stackoverflow.com/users/1834523/anthony-to"}, "edited": false, "score": 0, "creation_date": 1447425364, "post_id": 33659864, "comment_id": 55161661, "body": "To be sure you&#39;re dumping the development database (and not production), try: <code>RAILS_ENV=development rake db:schema:dump</code>"}], "tags": [], "owner": {"reputation": 186, "user_id": 5546878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/369cd7101ef422446725a2c5525657b4?s=128&d=identicon&r=PG&f=1", "display_name": "CraigM", "link": "https://stackoverflow.com/users/5546878/craigm"}, "is_accepted": false, "score": 0, "last_activity_date": 1447276039, "creation_date": 1447276039, "answer_id": 33659864, "question_id": 33640912, "link": "https://stackoverflow.com/questions/33640912/rails-test-database-missing-primary-key/33659864#33659864", "title": "Rails test database missing primary key", "body": "<p>The schema dumper uses an AR connection method to get a table's PK. It will <em>only</em> include the <code>:id =&gt; false</code> option when the table <em>does not</em> have a PK that corresponds to a table column.</p>\n\n<p>To confirm that the development database table has a PK you can try the following in the Rails development console (replacing <code>Task</code> / <code>tasks</code> with your model / table name):</p>\n\n<pre><code>irb(main):006:0&gt; Task.connection.primary_key('tasks') \n=&gt; \"id\"\n</code></pre>\n\n<p>See <code>activerecord/lib/active_record/schema_dumper.rb</code></p>\n"}], "owner": {"reputation": 1933, "user_id": 1834523, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3efbc1ab8374ed89493755f32c0033c0?s=128&d=identicon&r=PG&f=1", "display_name": "Anthony To", "link": "https://stackoverflow.com/users/1834523/anthony-to"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 327, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447276039, "creation_date": 1447194699, "last_edit_date": 1447198676, "question_id": 33640912, "link": "https://stackoverflow.com/questions/33640912/rails-test-database-missing-primary-key", "title": "Rails test database missing primary key", "body": "<p>I am attempting to run Capybara tests in Rails, but they are failing because my test database is missing a primary key on one of the tables. I ran a <code>rake db:schema:dump</code> and then <code>RAILS_ENV=test rake db:schema:load</code>, but the primary key is still missing. </p>\n\n<p>I have two questions now. Should the schema be capturing all the primary keys in my dev database? If so, how come my test db is not seeing that primary key? If not, what could possibly be causing the mismatch of the databases and what are some potential solutions? </p>\n\n<p>Thanks in advance. </p>\n\n<p>EDIT: </p>\n\n<p>Found more information. When I run <code>rake db:schema:dump</code>, in the resulting schema file I see:</p>\n\n<p><code>create_table \"model\", :id =&gt; false, :force =&gt; true do |t| ...</code></p>\n\n<p>Presumably, this is why the primary key is not being set when I run <code>RAILS_ENV=test rails db:schema:load</code>. The confusing part is that my development database does have a primary key on the id. What could be causing the <code>:id =&gt; false</code> option to be included in the schema?</p>\n"}, {"tags": ["ruby", "selenium", "selenium-webdriver", "capybara"], "comments": [{"owner": {"reputation": 487, "user_id": 2238785, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d4c4d93865aad4b5b0834249c0e319c5?s=128&d=identicon&r=PG", "display_name": "ashanbrown", "link": "https://stackoverflow.com/users/2238785/ashanbrown"}, "edited": false, "score": 0, "creation_date": 1447192989, "post_id": 33640415, "comment_id": 55054996, "body": "A similar question here was asked 3 years ago with no answer: <a href=\"http://stackoverflow.com/questions/12036698/webdriver-ruby-bindings-setting-capabilities#\" title=\"webdriver ruby bindings setting capabilities%23\">stackoverflow.com/questions/12036698/&hellip;</a>.  It looks like I shouldn&#39;t be using remote capabilities but no alternative was offered"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 1, "creation_date": 1447343530, "post_id": 33640415, "comment_id": 55124148, "body": "The way you are setting the elementScrollBehaviour does work. How are you verifying that the setting is not being set? There was a bug recently opened that the <a href=\"https://github.com/SeleniumHQ/selenium/issues/1200\" rel=\"nofollow noreferrer\">elementScrollBehaviour is only being used when calling the <code>location_once_scrolled_into_view</code> method</a> (in Selenium)."}, {"owner": {"reputation": 487, "user_id": 2238785, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d4c4d93865aad4b5b0834249c0e319c5?s=128&d=identicon&r=PG", "display_name": "ashanbrown", "link": "https://stackoverflow.com/users/2238785/ashanbrown"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1447995778, "post_id": 33640415, "comment_id": 55404418, "body": "@JustinKo thanks for the tip.  It doesn&#39;t seem to matter if I use selenium-webdriver 2.45.0 or 2.48.1.  I can watch firefox and it doesn&#39;t behavior differently when I change the value of &#39;elementScrollBehavior&#39;.  As background, my problem is that I have a fixed header on the page and I thought this setting might allow my specs to pass because capybara things the elements under the header are invisible (as they well are).  Currently I&#39;m just hiding the header when I run specific parts of my specs."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1448030743, "post_id": 33640415, "comment_id": 55423753, "body": "Any chance you can share a working page that shows the same problem?"}], "owner": {"reputation": 487, "user_id": 2238785, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d4c4d93865aad4b5b0834249c0e319c5?s=128&d=identicon&r=PG", "display_name": "ashanbrown", "link": "https://stackoverflow.com/users/2238785/ashanbrown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 592, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1447192647, "creation_date": 1447192647, "question_id": 33640415, "link": "https://stackoverflow.com/questions/33640415/how-do-i-set-elementscrollbehavior-to-1-using-the-ruby-bindings-for-seleniumweb", "title": "how do I set elementScrollBehavior to 1 using the ruby bindings for Selenium:WebDriver", "body": "<p>In the context of a capybara test, I'm trying to set elementScrollBehavior to 1 (instructing webdriver to scroll elements targeted for interaction to the bottom of the viewport).  I sort of expected this to work:</p>\n\n<p><code>Capybara.register_driver :selenium do |app|\n  capabilities = Selenium::WebDriver::Remote::Capabilities.firefox('elementScrollBehavior' =&gt; 1)\n  Capybara::Selenium::Driver.new(app, desired_capabilities: capabilities)\nend\n</code></p>\n\n<p>but it does not.</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "activerecord", "rails-activerecord"], "comments": [{"owner": {"reputation": 30101, "user_id": 783412, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/895a112c66d93cefcd06d2cf371219e6?s=128&d=identicon&r=PG", "display_name": "hd1", "link": "https://stackoverflow.com/users/783412/hd1"}, "edited": false, "score": 0, "creation_date": 1447192826, "post_id": 33640321, "comment_id": 55054908, "body": "What version of rails are you using?"}], "answers": [{"tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 1, "last_activity_date": 1447194763, "creation_date": 1447194763, "answer_id": 33640925, "question_id": 33640321, "link": "https://stackoverflow.com/questions/33640321/raills-get-sql-generated-by-delete-all/33640925#33640925", "title": "Raills: Get SQL generated by delete_all", "body": "<p>From the <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-delete_all\" rel=\"nofollow\">fine manual</a>:</p>\n\n<blockquote>\n  <p><strong>delete_all(conditions = nil)</strong></p>\n  \n  <p>Deletes the records matching <code>conditions</code> without instantiating the records first, and hence not calling the <code>destroy</code> method nor invoking callbacks. This is a single SQL DELETE statement that goes straight to the database, much more efficient than <code>destroy_all</code>.</p>\n</blockquote>\n\n<p>So a <code>Model.delete_all(conditions)</code> ends up as</p>\n\n<pre><code>delete from models where conditions\n</code></pre>\n\n<p>When you say <code>Model.where(...).delete_all</code>, the <code>conditions</code> for the <code>delete_all</code> come from the <code>where</code> calls so these are the same:</p>\n\n<pre><code>Model.delete_all(conditions)\nModel.where(conditions).delete_all\n</code></pre>\n\n<p>Applying that to your case:</p>\n\n<pre><code>Source.where(\"id not IN (#{Log.select('DISTINCT source_id').to_sql})\").delete_all\n</code></pre>\n\n<p>you should see that you're running:</p>\n\n<pre><code>delete from sources\nwhere id not in (\n    select distinct source_id\n    from logs\n)\n</code></pre>\n\n<p>If you run your code in a development console you should see the SQL in the console or the Rails logs but it will be as above.</p>\n\n<p>As far as optimization goes, my first step would be to drop the DISTINCT. DISTINCT usually isn't cheap and <code>IN</code> doesn't care about duplicates anyway so <code>not in (select distinct ...)</code> is probably pointless busy work. Then maybe an index on <code>source_id</code> would help, the query optimizer might be able to slurp the <code>source_id</code> list straight out of the index without having to do a table scan to find them. Of course, query optimization is a bit of a dark art so these simple steps may or may not work.</p>\n"}, {"tags": [], "owner": {"reputation": 30101, "user_id": 783412, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/895a112c66d93cefcd06d2cf371219e6?s=128&d=identicon&r=PG", "display_name": "hd1", "link": "https://stackoverflow.com/users/783412/hd1"}, "is_accepted": false, "score": 1, "last_activity_date": 1447194936, "creation_date": 1447194936, "answer_id": 33640967, "question_id": 33640321, "link": "https://stackoverflow.com/questions/33640321/raills-get-sql-generated-by-delete-all/33640967#33640967", "title": "Raills: Get SQL generated by delete_all", "body": "<p><code>ActiveRecord::Base.logger = Logger.new(STDOUT)</code> should show you all the SQL generated by rails on your console.</p>\n"}, {"comments": [{"owner": {"reputation": 3797, "user_id": 786948, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7a2bdd5e9a72a6dae9e0ec404b7d56ce?s=128&d=identicon&r=PG", "display_name": "Alexis", "link": "https://stackoverflow.com/users/786948/alexis"}, "edited": false, "score": 0, "creation_date": 1588718213, "post_id": 53598838, "comment_id": 109006233, "body": "I updated the ActiveRecord::Relation#delete_all link with a permalink to its current position. Also, it looks like the <code>relation.bound_attributes</code> argument is not needed."}], "tags": [], "owner": {"reputation": 361, "user_id": 351391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/938ccf980bd4c9268dfa906bbe6c41e2?s=128&d=identicon&r=PG", "display_name": "ncavig", "link": "https://stackoverflow.com/users/351391/ncavig"}, "is_accepted": false, "score": 2, "last_activity_date": 1588716641, "last_edit_date": 1588716641, "creation_date": 1543858108, "answer_id": 53598838, "question_id": 33640321, "link": "https://stackoverflow.com/questions/33640321/raills-get-sql-generated-by-delete-all/53598838#53598838", "title": "Raills: Get SQL generated by delete_all", "body": "<p>Another option is to use raw Arel syntax, similar to a simplified version of what <a href=\"https://github.com/rails/rails/blob/f4538aa5865da5f16b707d34aa733a5e2353f2fd/activerecord/lib/active_record/relation.rb#L577\" rel=\"nofollow noreferrer\">ActiveRecord::Relation#delete_all</a> does.</p>\n\n<pre><code>relation = Model.where(...)\narel = relation.arel\nstmt = Arel::DeleteManager.new\nstmt.from(arel.join_sources.empty? ? Model.arel_table : arel.source)\nstmt.wheres = arel.constraints\nsql = Model.connection.to_sql(stmt, relation.bound_attributes)\nprint sql\n</code></pre>\n\n<p>This will give you the generated delete sql. Here's an example using postgres as the sql adapter</p>\n\n<pre><code>relation = User.where('email ilike ?', '%@gmail.com')\narel = relation.arel\nstmt = Arel::DeleteManager.new\nstmt.from(arel.join_sources.empty? ? User.arel_table : arel.source)\nstmt.wheres = arel.constraints\nsql = User.connection.to_sql(stmt, relation.bound_attributes)    \n=&gt; DELETE FROM \"users\" WHERE (email ilike '%@gmail.com')\n</code></pre>\n"}], "owner": {"reputation": 2722, "user_id": 1259990, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/fba514d7862cf70beb2b3e5f8279d234?s=128&d=identicon&r=PG", "display_name": "blindsnowmobile", "link": "https://stackoverflow.com/users/1259990/blindsnowmobile"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 891, "favorite_count": 0, "accepted_answer_id": 33640925, "answer_count": 3, "score": 2, "last_activity_date": 1588716641, "creation_date": 1447192300, "last_edit_date": 1447194777, "question_id": 33640321, "link": "https://stackoverflow.com/questions/33640321/raills-get-sql-generated-by-delete-all", "title": "Raills: Get SQL generated by delete_all", "body": "<p>I'm not particularly familiar with Ruby on Rails, but I'm troubleshooting an issue we're experiencing with a rake job that is supposed to be cleaning database tables.  The tables grow very large very quickly, and the query generated by ActiveRecord doesn't seem to be efficient enough to handle it.</p>\n\n<p>The Ruby calls looks like this:</p>\n\n<pre><code>Source.where(\"id not IN (#{Log.select('DISTINCT source_id').to_sql})\").delete_all\n</code></pre>\n\n<p>and this:</p>\n\n<pre><code>Log.joins(:report).where(:report_id =&gt; Report.where(cond)).delete_all\n</code></pre>\n\n<p>I'm trying to get at the SQL, so we can have our DBA's attempt to optimize it better.  I've noticed if I drop the \".delete_all\" I can add a \".to_sql\" which gives me the SELECT statement of the query, prior to the call to \".delete_all\".  I'd like to see what SQL is being generated by that delete_all method though.</p>\n\n<p>Is there a way to do that?</p>\n"}, {"tags": ["ruby", "postgresql", "sequel"], "comments": [{"owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "edited": false, "score": 1, "creation_date": 1447194836, "post_id": 33640237, "comment_id": 55055915, "body": "Might be more than you want, but can be useful: <a href=\"https://github.com/ankane/pghero\" rel=\"nofollow noreferrer\">github.com/ankane/pghero</a>"}, {"owner": {"reputation": 2192, "user_id": 215044, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bbee182f380067c8428dd32f3ead7825?s=128&d=identicon&r=PG", "display_name": "rcrogers", "link": "https://stackoverflow.com/users/215044/rcrogers"}, "reply_to_user": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "edited": false, "score": 0, "creation_date": 1447196085, "post_id": 33640237, "comment_id": 55056453, "body": "To clarify, I&#39;m trying to get the time programatically so I can record it elsewhere.  Eyeballing the execution time isn&#39;t a problem."}], "answers": [{"comments": [{"owner": {"reputation": 11331, "user_id": 132053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f183bcc4176b308c9edabe79299e448f?s=128&d=identicon&r=PG", "display_name": "Jeremy Evans", "link": "https://stackoverflow.com/users/132053/jeremy-evans"}, "edited": false, "score": 1, "creation_date": 1524766519, "post_id": 50032175, "comment_id": 87115214, "body": "You can also override Database#log_duration if you want to get the timing information without having to parse it out of the log output. You do have to have a logger setup though, even if it doesn&#39;t do anything, otherwise Sequel doesn&#39;t calculate the timing."}], "tags": [], "owner": {"reputation": 1510, "user_id": 1845602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d271e8f7cf3322dc3b404ffb9deb4f?s=128&d=identicon&r=PG", "display_name": "Edgar Ortega", "link": "https://stackoverflow.com/users/1845602/edgar-ortega"}, "is_accepted": false, "score": 0, "last_activity_date": 1524695092, "creation_date": 1524695092, "answer_id": 50032175, "question_id": 33640237, "link": "https://stackoverflow.com/questions/33640237/getting-execution-time-of-a-sequel-query/50032175#50032175", "title": "getting execution time of a Sequel query", "body": "<p>You can pass a <code>logger</code> option to the initializer and it will print the query and the time spent</p>\n\n<pre><code>DB = Sequel.connect(database_uri, logger: Logger.new(STDOUT))\nDB[:table].where(id: 1..1000)\n</code></pre>\n\n<p>It will print something like</p>\n\n<pre><code>I, [2018-04-25T22:20:52.692312 #2685]  INFO -- : (0.398486s) SELECT * FROM \"table\" WHERE ((\"id\" &gt;= 1) AND (\"id\" &lt;= 1000))\n</code></pre>\n"}], "owner": {"reputation": 2192, "user_id": 215044, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bbee182f380067c8428dd32f3ead7825?s=128&d=identicon&r=PG", "display_name": "rcrogers", "link": "https://stackoverflow.com/users/215044/rcrogers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 306, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524695092, "creation_date": 1447192050, "question_id": 33640237, "link": "https://stackoverflow.com/questions/33640237/getting-execution-time-of-a-sequel-query", "title": "getting execution time of a Sequel query", "body": "<p>It's easy to measure the time difference on the client, but to get the actual execution time on the database server, it looks like I might have to dig deep into the Postgres adapter.  Is there a better and more adapter-agnostic way to extract this information?</p>\n"}, {"tags": ["ruby", "loops", "recursion"], "comments": [{"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "edited": false, "score": 0, "creation_date": 1447191896, "post_id": 33640150, "comment_id": 55054422, "body": "Are you trying to use Ruby as if it was assembly code?"}, {"owner": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "edited": false, "score": 0, "creation_date": 1447192076, "post_id": 33640150, "comment_id": 55054508, "body": "What is the question?"}, {"owner": {"reputation": 61, "user_id": 5509174, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1060793333960995/picture?type=large", "display_name": "Jacob Wanner", "link": "https://stackoverflow.com/users/5509174/jacob-wanner"}, "edited": false, "score": 0, "creation_date": 1447192321, "post_id": 33640150, "comment_id": 55054638, "body": "my question is how to execute a piece of code that would create a loop that goes back to these functions"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1447196899, "post_id": 33640150, "comment_id": 55056820, "body": "It&#39;s not being used as if it&#39;s assembly code, it&#39;s being used as if it has a <code>goto</code>-type statement. Many languages have that, not just assembly."}], "answers": [{"tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 0, "last_activity_date": 1447192452, "creation_date": 1447192452, "answer_id": 33640355, "question_id": 33640150, "link": "https://stackoverflow.com/questions/33640150/use-ruby-to-go-back-to-early-lines-and-functions/33640355#33640355", "title": "Use ruby to go back to early lines and functions", "body": "<p>Functions are how you run some code somewhere else and return back to where you started.  Loops are how you run the same code again and again until some condition is met.</p>\n\n<p>Here is some incomplete code to demonstrate.</p>\n\n<pre><code>def some_function(x)\n    puts \"x is #{x} some function\"\nend\n\ndef another_function(x)\n    puts \"x is #{x} in another function\"\nend\n\ndef something_else(x)\n    puts \"x is #{x} in something else\"\nend\n\n# I've left are_we_done undefined, it's the condition for\n# stopping the loop.  I've also left get_x undefined.\nwhile !are_we_done\n    x = get_x\n\n    if x &gt; 5\n        some_function(x)\n    elsif x &lt; 5\n        another_function(x)\n    else # x is 5\n        something_else(x)\nend\n</code></pre>\n\n<p>Teaching these fundamentals is beyond a Stack Overflow answer. I would suggest going through a tutorial like <a href=\"http://learnrubythehardway.org/book/\" rel=\"nofollow\">Learn Ruby The Hard Way</a> to learn the fundamentals of loops and functions.</p>\n"}], "owner": {"reputation": 61, "user_id": 5509174, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1060793333960995/picture?type=large", "display_name": "Jacob Wanner", "link": "https://stackoverflow.com/users/5509174/jacob-wanner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 33640355, "answer_count": 1, "score": 0, "last_activity_date": 1447192452, "creation_date": 1447191765, "question_id": 33640150, "link": "https://stackoverflow.com/questions/33640150/use-ruby-to-go-back-to-early-lines-and-functions", "title": "Use ruby to go back to early lines and functions", "body": "<p>I am making a basic hangman game that will need to keep retracing until the game is over.  I'm trying to figure out the correct ruby way to go back to these lines. Here is a rough pseudocode example:</p>\n\n<pre><code>some_function\n\nend\n\nanother_function\n\nend \nif x &gt; 5 go back to some_function\nif x &lt; 5 go back to another_function\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "factory-bot"], "comments": [{"owner": {"reputation": 3647, "user_id": 353178, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/28b6612d548d24ff57361dac58ac3fee?s=128&d=identicon&r=PG", "display_name": "mkirk", "link": "https://stackoverflow.com/users/353178/mkirk"}, "edited": false, "score": 0, "creation_date": 1447192677, "post_id": 33640078, "comment_id": 55054830, "body": "Is the 30 seconds a one time tax or is it 30 seconds per spec?  Is there anything in your seeds or database setup hooks that take a long time?"}, {"owner": {"reputation": 1580, "user_id": 2539548, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/128121c202394df3192495e58d6497a6?s=128&d=identicon&r=PG", "display_name": "denodster", "link": "https://stackoverflow.com/users/2539548/denodster"}, "reply_to_user": {"reputation": 3647, "user_id": 353178, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/28b6612d548d24ff57361dac58ac3fee?s=128&d=identicon&r=PG", "display_name": "mkirk", "link": "https://stackoverflow.com/users/353178/mkirk"}, "edited": false, "score": 0, "creation_date": 1447213383, "post_id": 33640078, "comment_id": 55061652, "body": "its 30 seconds per db call. so if I created 4 instances of a model in the same spec it would take 2 minutes to run that specific spec. Rinse and repeat in the next spec. (I&#39;ll edit the above spec with comments)"}, {"owner": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "edited": false, "score": 0, "creation_date": 1447231848, "post_id": 33640078, "comment_id": 55067415, "body": "Are your FactoryGirl factories defining all realtions by default? Could be that there&#39;s a lot of queries going on in the back. Did you try running FactoryGirl.create(:course) from Rails Console? don&#39;t forget to <code>rails c -s</code>."}, {"owner": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "edited": false, "score": 0, "creation_date": 1447231994, "post_id": 33640078, "comment_id": 55067507, "body": "p.s. I had a problem with slow FactoryGirl factories as well, that was caused by a lot of factories also called a picture factory which uploaded and cropped an image each time (which was taking most of the time)."}, {"owner": {"reputation": 1580, "user_id": 2539548, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/128121c202394df3192495e58d6497a6?s=128&d=identicon&r=PG", "display_name": "denodster", "link": "https://stackoverflow.com/users/2539548/denodster"}, "edited": false, "score": 0, "creation_date": 1447260078, "post_id": 33640078, "comment_id": 55084058, "body": "I ran FactoryGirl.create(:course) as well as FactoryGirl.create(:course_assignment) in the console (rails c -s) and they both ran in less than a second. If I use the same lines in my spec they take over 30 seconds each."}, {"owner": {"reputation": 3647, "user_id": 353178, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/28b6612d548d24ff57361dac58ac3fee?s=128&d=identicon&r=PG", "display_name": "mkirk", "link": "https://stackoverflow.com/users/353178/mkirk"}, "edited": false, "score": 0, "creation_date": 1447262771, "post_id": 33640078, "comment_id": 55085681, "body": "Can you include your database.yml? (X out your credentials)"}, {"owner": {"reputation": 3647, "user_id": 353178, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/28b6612d548d24ff57361dac58ac3fee?s=128&d=identicon&r=PG", "display_name": "mkirk", "link": "https://stackoverflow.com/users/353178/mkirk"}, "edited": false, "score": 0, "creation_date": 1447263158, "post_id": 33640078, "comment_id": 55085942, "body": "Also curious about your carrier wave setup - is it identical across test and develop?"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1447341627, "post_id": 33640078, "comment_id": 55122653, "body": "Without a machine in front of me to examine it&#39;s hard to help. Something is <i>definitely</i> wrong, looks like with your machine and/or database. What DB are you using? Is it local?"}, {"owner": {"reputation": 1580, "user_id": 2539548, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/128121c202394df3192495e58d6497a6?s=128&d=identicon&r=PG", "display_name": "denodster", "link": "https://stackoverflow.com/users/2539548/denodster"}, "edited": false, "score": 0, "creation_date": 1447344281, "post_id": 33640078, "comment_id": 55124726, "body": "I&#39;m running MySQL locally, I&#39;ve included my database.yml above."}], "answers": [{"comments": [{"owner": {"reputation": 1580, "user_id": 2539548, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/128121c202394df3192495e58d6497a6?s=128&d=identicon&r=PG", "display_name": "denodster", "link": "https://stackoverflow.com/users/2539548/denodster"}, "edited": false, "score": 0, "creation_date": 1447191836, "post_id": 33640137, "comment_id": 55054383, "body": "but 30 seconds longer? is there anything I can do to reduce overhead here?"}, {"owner": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "reply_to_user": {"reputation": 1580, "user_id": 2539548, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/128121c202394df3192495e58d6497a6?s=128&d=identicon&r=PG", "display_name": "denodster", "link": "https://stackoverflow.com/users/2539548/denodster"}, "edited": false, "score": 0, "creation_date": 1447192029, "post_id": 33640137, "comment_id": 55054491, "body": "30 seconds does seem excessive, but it all depends on how your tests are structured really (e.g. they may be clean-slating the DB many times)."}, {"owner": {"reputation": 1580, "user_id": 2539548, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/128121c202394df3192495e58d6497a6?s=128&d=identicon&r=PG", "display_name": "denodster", "link": "https://stackoverflow.com/users/2539548/denodster"}, "edited": false, "score": 0, "creation_date": 1447192253, "post_id": 33640137, "comment_id": 55054599, "body": "I&#39;ve added one of the test files for one of my simpler models, what does the structure say to you?"}], "tags": [], "owner": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "is_accepted": false, "score": 2, "last_activity_date": 1447191864, "last_edit_date": 1447191864, "creation_date": 1447191697, "answer_id": 33640137, "question_id": 33640078, "link": "https://stackoverflow.com/questions/33640078/rspec-test-considerably-slower-than-rails-console/33640137#33640137", "title": "rspec test considerably slower than rails console", "body": "<p>When you execute <code>rails c</code>, note that it takes some time to load since it is starting up the DB and loading Rails classes which will be available \"instantly\". </p>\n\n<p>Each test spec recreates a clean DB slate each time, so it should take more time than running the same command in the console (because the DB is already set up). You can mitigate this by correctly using <code>before(:all)</code> and setting up tests in such a way that the the same instance is used as much as possible without needing a clean slate.</p>\n"}], "owner": {"reputation": 1580, "user_id": 2539548, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/128121c202394df3192495e58d6497a6?s=128&d=identicon&r=PG", "display_name": "denodster", "link": "https://stackoverflow.com/users/2539548/denodster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 396, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1447353218, "creation_date": 1447191416, "last_edit_date": 1447353218, "question_id": 33640078, "link": "https://stackoverflow.com/questions/33640078/rspec-test-considerably-slower-than-rails-console", "title": "rspec test considerably slower than rails console", "body": "<p>I've been spending all day trying to figure out why my rspec-rails test suite takes a really long time to complete (it wasn't always this way) I've used the --profile to determine which tests are taking a long time, and it seems that every test hits the Database takes 30 seconds per query.</p>\n\n<p>Take the following example line:</p>\n\n<pre><code>MyModel.create(args)\n</code></pre>\n\n<p>If I run this line in the rails console it completes instantaneously, but if I include it in an rspec test, it adds 30 seconds to that test's completion time. Also, this line is only an example, if I use Factory girl or create a relation using &lt;&lt; the same 30 second tax seems to apply.</p>\n\n<p>Surely something must be configured wrong.</p>\n\n<p>Heres my spec_helper.rb file:</p>\n\n<pre><code>require 'simplecov'\nrequire 'metric_fu/metrics/rcov/simplecov_formatter'\nSimpleCov.formatter = SimpleCov::Formatter::MetricFu\nSimpleCov.start 'rails'\n\n# This file is copied to spec/ when you run 'rails generate rspec:install'\nENV[\"RAILS_ENV\"] ||= 'test'\nrequire File.expand_path(\"../../config/environment\", __FILE__)\nrequire 'rspec/rails'\nrequire 'database_cleaner'\nrequire 'carrierwave'\n\nDir[Rails.root.join(\"spec/support/**/*.rb\")].each {|f| require f}\n\nActiveRecord::Migration.maintain_test_schema!\n\nRSpec.configure do |config|\n  config.fixture_path = \"#{::Rails.root}/spec/fixtures\"\n  config.use_transactional_fixtures = true\n  config.infer_base_class_for_anonymous_controllers = false\n  config.order = \"random\"\n  config.mock_with :rspec\n  config.include JsonSpec::Helpers\n  config.include FactoryGirl::Syntax::Methods\n  config.include Devise::TestHelpers, type: :controller\n\n  # config.raise_errors_for_deprecations!\n  config.infer_spec_type_from_file_location!\n\n  config.expect_with :rspec do |c|\n    c.syntax = [:should, :expect]\n  end\n\n  config.before(:suite) do\n    begin\n      EphemeralResponse.activate\n      DatabaseCleaner.strategy = :truncation\n      DatabaseCleaner.clean_with(:truncation)\n      DatabaseCleaner.start\n      # FactoryGirl.lint\n    ensure\n      DatabaseCleaner.clean\n    end\n  end\n\n  config.before(:each) do\n    Bullet.start_request if Bullet.enable?\n  end\n\n  config.after(:each) do\n    if Bullet.enable? #&amp;&amp; Bullet.notification?\n      # Bullet.perform_out_of_channel_notifications\n      # Bullet.end_request\n    end\n    DatabaseCleaner.clean\n  end\n\n  config.after(:suite) do\n    EphemeralResponse.deactivate\n  end\nend\n</code></pre>\n\n<p>I don't really understand a whole lot about rspec, and I didn't write a good portion of this test suite, so maybe this is really obvious to someone, but I've been beating my head against it all day.</p>\n\n<p>Edit: I'm going to add one of my model tests: This one takes over 5 minutes to run...</p>\n\n<pre><code>require 'spec_helper'\ndescribe CourseAssignment do\n\n    let(:instructor) { create(:instructor) }\n    let(:student) { create(:student, id: 2) }\n    let(:bundle) { create(:bundle) }\n    let(:course) { create(:course) }\n    let(:assignment) { create(:course_assignment, course: course) }\n\n    it { should belong_to(:course) }\n    it { should belong_to(:user) }\n\n    describe 'CourseAssignment deletion' do\n        it 'should not delete the Course or the Student' do\n      instructor.courses &lt;&lt; course # 30 seconds\n      instructor.courses.last.students &lt;&lt; student # 30 seconds\n      CourseAssignment.create(course_id: course.id, user_id: student.id) # 30 seconds\n      expect{CourseAssignment.last.destroy}.to change(CourseAssignment, :count).by(-1)\n      expect(Student.count).to eq(1)\n      expect(Course.count).to eq(1)\n      expect(instructor.courses).to include(course)\n        end\n    end\n\n    describe 'Student deletion' do\n        it 'should delete the CourseAssignment &amp; Student, but not the  Course' do\n      instructor.courses &lt;&lt; course # 30 seconds\n      instructor.courses.last.students &lt;&lt; student # 30 seconds\n      CourseAssignment.create(course_id: course.id, user_id: student.id) # 30 seconds\n      expect(student.course_assignments.count).to eq(2)\n\n      expect{student.destroy}.to change(CourseAssignment, :count).by(-2)\n      expect(Course.last.students).to be_empty\n      expect(Course.count).to eq(1)\n      expect(instructor.courses).to include(course)\n        end\n    end\n\n    describe 'Course deletion' do\n        it 'should delete the CourseAssignment' do\n      instructor.courses &lt;&lt; course # 30 seconds\n      instructor.courses.last.students &lt;&lt; student # 30 seconds\n      CourseAssignment.create(course_id: course.id, user_id: student.id)\n\n      expect{course.destroy}.to change(Course, :count).by(-1)\n      expect(CourseAssignment.count).to be(0)\n      instructor.reload\n      expect(instructor.courses).to be_empty\n        end\n    end\n\n    it 'should require a course_id' do\n        no_course_id_assignment = CourseAssignment.create(course_id: '', user_id: 2) # 30 seconds\n        no_course_id_assignment.should_not be_valid\n    end\n\n    it 'should require a user_id' do\n        no_student_id_assignment = CourseAssignment.create(course_id: 2, user_id: '') # 30 seconds\n        no_student_id_assignment.should_not be_valid\n    end\n\nend\n</code></pre>\n\n<p>EDIT 2: I figured out that this has something to do with my computer (Mac os x 10.10.5). When I run our test suite on circle ci it the whole suite runs in less than 5 minutes.</p>\n\n<p>Edit 3: Heres my database.yml</p>\n\n<pre><code># MySQL.  Versions 4.1 and 5.0 are recommended.\n#\n# Install the MySQL driver:\n#   gem install mysql2\n#\n# And be sure to use new-style password hashing:\n#   http://dev.mysql.com/doc/refman/5.0/en/old-client.html\ndevelopment:\n  adapter: mysql2\n  encoding: utf8\n  database: xxxx\n  username: xxxx\n  password: xxxx\n  host: localhost\n\n# Warning: The database defined as \"test\" will be erased and\n# re-generated from your development database when you run \"rake\".\n# Do not set this db to the same as development or production.\ntest:\n  adapter: mysql2\n  encoding: utf8\n  database: xxxx_test\n  username: xxxx\n  password: xxxx\n  host: localhost\n\nproduction:\n  adapter: mysql2\n  encoding: utf8\n  host: localhost\n  database: xxxx\n  username: xxxx\n  password: xxxx\n  port: 3306\n</code></pre>\n\n<p>Edit 4: Just figured out that changing my wifi network fixes the issue. The problem seems to be related to an outage associated with the first network where mixpanel.com is unreachable.</p>\n"}, {"tags": ["ruby", "html", "css", "postgresql", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 1180, "user_id": 4825744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10155467328840293/picture?type=large", "display_name": "Shawn Wilson", "link": "https://stackoverflow.com/users/4825744/shawn-wilson"}, "edited": false, "score": 0, "creation_date": 1447192318, "post_id": 33640291, "comment_id": 55054635, "body": "So i should then change the column to an integer value? or just use a select field and set the values to 1 and 0 when sending to the DB?"}, {"owner": {"reputation": 1880, "user_id": 5508939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fCMtP.jpg?s=128&g=1", "display_name": "Yang", "link": "https://stackoverflow.com/users/5508939/yang"}, "reply_to_user": {"reputation": 1180, "user_id": 4825744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10155467328840293/picture?type=large", "display_name": "Shawn Wilson", "link": "https://stackoverflow.com/users/4825744/shawn-wilson"}, "edited": false, "score": 0, "creation_date": 1447192725, "post_id": 33640291, "comment_id": 55054851, "body": "No, you don&#39;t need to change the column in DB. If your column is string, it is okay as well. Just give the value there. For example, if your values are &quot;active&quot; and &quot;inactive&quot;, just change it to @active_calls = Call.where(status: &quot;active&quot;)"}, {"owner": {"reputation": 1180, "user_id": 4825744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10155467328840293/picture?type=large", "display_name": "Shawn Wilson", "link": "https://stackoverflow.com/users/4825744/shawn-wilson"}, "edited": false, "score": 0, "creation_date": 1447193153, "post_id": 33640291, "comment_id": 55055069, "body": "Thanks so much for the quick response works great!!! Really appreciate the assistance!"}], "tags": [], "owner": {"reputation": 1880, "user_id": 5508939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fCMtP.jpg?s=128&g=1", "display_name": "Yang", "link": "https://stackoverflow.com/users/5508939/yang"}, "is_accepted": true, "score": 2, "last_activity_date": 1447192209, "creation_date": 1447192209, "answer_id": 33640291, "question_id": 33640064, "link": "https://stackoverflow.com/questions/33640064/rails-scaffold-index-filtering/33640291#33640291", "title": "Rails Scaffold Index Filtering", "body": "<p>Assume you have two values 1 and 0 in the field status of model Call. In your controller action:</p>\n\n<pre><code>def index\n    @active_calls = Call.where(status: 1)\n    @inactive_calls = Call.where(status: 0)\nend\n</code></pre>\n\n<p>Then you can access two arrays @active_calls and @inactive_calls in your view, just replaces</p>\n\n<pre><code>&lt;% @calls.each do |call| %&gt;\n</code></pre>\n\n<p>to </p>\n\n<pre><code>&lt;% @active_calls.each do |call| %&gt;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>&lt;% @inactive_calls.each do |call| %&gt;\n</code></pre>\n\n<p>based on where you would like to display them.</p>\n"}], "owner": {"reputation": 1180, "user_id": 4825744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10155467328840293/picture?type=large", "display_name": "Shawn Wilson", "link": "https://stackoverflow.com/users/4825744/shawn-wilson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 33640291, "answer_count": 1, "score": 0, "last_activity_date": 1447192209, "creation_date": 1447191366, "question_id": 33640064, "link": "https://stackoverflow.com/questions/33640064/rails-scaffold-index-filtering", "title": "Rails Scaffold Index Filtering", "body": "<p>I am working on a CAD app (Rails 4, Ruby 2.2). On the Calls index Page I have 2 panels side by side. </p>\n\n<p>My goal is to sort the panels into Active and Unassigned based on a DB attribute, which is currently names Status and is a \"string\" </p>\n\n<p>I'm just not sure how to do this at all I've tried to search it out with not much luck. I am using Postgresql as my DB and below is the code for the index page I have not modified my controller but i will add the code for reference. </p>\n\n<p><strong>Index.html.erb code:</strong></p>\n\n<pre><code>  &lt;div class=\"panel panel-success\" id=\"active-pnl\"&gt;\n    &lt;div class=\"panel-heading\"&gt;&lt;center&gt;&lt;h4&gt;Assigned Calls: &lt;/h4&gt;&lt;/center&gt;&lt;/div&gt;\n    &lt;table class=\"table\" id=\"assign-table\"&gt;\n      &lt;thead&gt;\n        &lt;tr&gt;\n          &lt;th&gt;&lt;center&gt;Call Number&lt;/center&gt;&lt;/th&gt;\n          &lt;th&gt;&lt;center&gt;Address&lt;/center&gt;&lt;/th&gt;\n          &lt;th&gt;&lt;center&gt;Responding&lt;/center&gt;&lt;/th&gt;\n          &lt;th&gt;&lt;center&gt;Call Type&lt;/center&gt;&lt;/th&gt;\n          &lt;th&gt;&lt;/th&gt;\n          &lt;th&gt;&lt;/th&gt;\n          &lt;th&gt;&lt;/th&gt;\n        &lt;/tr&gt;\n      &lt;/thead&gt;\n\n      &lt;tbody&gt;\n        &lt;% @calls.each do |call| %&gt;\n        &lt;tr&gt;\n          &lt;td&gt;&lt;center&gt;&lt;%= call.call_num %&gt;&lt;/center&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;center&gt;&lt;%= call.address %&gt;&lt;/center&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;center&gt;&lt;strong&gt;&lt;%= call.unit_1 %&gt;&lt;/strong&gt; | &lt;%= call.unit_2 %&gt; | &lt;%= call.unit_3 %&gt; | &lt;%= call.unit_4 %&gt;&lt;/center&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;center&gt;&lt;%= call.primary_type %&gt; | &lt;%= call.secondary_type %&gt;&lt;/center&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;center&gt;&lt;%= link_to 'View', call, class: 'btn btn-success btn-sm', id: 'view-btn' %&gt;&lt;/center&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;center&gt;&lt;%= link_to 'Update', edit_call_path(call), class: 'btn btn-primary btn-sm', id: 'update-btn' %&gt;&lt;/center&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;center&gt;&lt;%= link_to 'Cancel', call, class: 'btn btn-danger btn-sm', id: 'cancel-btn', method: :delete, data: { confirm: 'Are you sure?' } %&gt;&lt;/center&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n\n        &lt;/tr&gt;\n        &lt;% end %&gt;\n      &lt;/tbody&gt;\n    &lt;/table&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"panel panel-danger\" id=\"unactive-pnl\"&gt;\n  &lt;div class=\"panel-heading\"&gt;&lt;center&gt;&lt;h4&gt;Unassigned Calls:&lt;/h4&gt;&lt;/center&gt;&lt;/div&gt;\n    &lt;table class=\"table\" id=\"nonassign-table\"&gt;\n      &lt;thead&gt;\n        &lt;tr&gt;\n          &lt;th&gt;&lt;center&gt;Call Number&lt;/center&gt;&lt;/th&gt;\n          &lt;th&gt;&lt;center&gt;Address&lt;/center&gt;&lt;/th&gt;\n          &lt;th&gt;&lt;center&gt;Status&lt;/center&gt;&lt;/th&gt;\n          &lt;th&gt;&lt;center&gt;Call Type&lt;/center&gt;&lt;/th&gt;\n          &lt;th&gt;&lt;/th&gt;\n          &lt;th&gt;&lt;/th&gt;\n          &lt;th&gt;&lt;/th&gt;\n        &lt;/tr&gt;\n      &lt;/thead&gt;\n\n      &lt;tbody&gt;\n        &lt;% @calls.each do |call| %&gt;\n        &lt;tr&gt;\n          &lt;td&gt;&lt;center&gt;&lt;%= call.call_num %&gt;&lt;/center&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;center&gt;&lt;%= call.address %&gt;&lt;/center&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;center&gt;&lt;%= call.status %&gt;&lt;/center&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;center&gt;&lt;%= call.primary_type %&gt; | &lt;%= call.secondary_type %&gt;&lt;/center&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;center&gt;&lt;%= link_to 'View', call, class: 'btn btn-success btn-sm', id: 'view-btn' %&gt;&lt;/center&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;center&gt;&lt;%= link_to 'Update', edit_call_path(call), class: 'btn btn-primary btn-sm', id: 'update-btn' %&gt;&lt;/center&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;center&gt;&lt;%= link_to 'Cancel', call, class: 'btn btn-danger btn-sm', id: 'cancel-btn', method: :delete, data: { confirm: 'Are you sure?' } %&gt;&lt;/center&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;% end %&gt;\n      &lt;/tbody&gt;\n    &lt;/table&gt;\n  &lt;/div&gt;\n\n\n\n&lt;br&gt;\n&lt;center&gt;\n  &lt;%= link_to new_call_path, class: \"btn btn-success btn-lg\", id: 'newcall-btn' do %&gt;\n    &lt;i class=\"glyphicon glyphicon-plus\"&gt; NewCall&lt;/i&gt;\n  &lt;% end %&gt;\n&lt;/center&gt;\n</code></pre>\n\n<p><strong>Calls Controller:</strong> </p>\n\n<pre><code>class CallsController &lt; ApplicationController\n  before_action :set_call, only: [:show, :edit, :update, :destroy]\n\n  # GET /calls\n  # GET /calls.json\n  def index\n    @calls = Call.all\n  end\n\n  # GET /calls/1\n  # GET /calls/1.json\n  def show\n  end\n\n  # GET /calls/new\n  def new\n    @call = Call.new\n  end\n\n  # GET /calls/1/edit\n  def edit\n  end\n\n  # POST /calls\n  # POST /calls.json\n  def create\n    @call = Call.new(call_params)\n\n    respond_to do |format|\n      if @call.save\n        format.html { redirect_to @call, notice: 'Call was successfully created.' }\n        format.json { render :show, status: :created, location: @call }\n      else\n        format.html { render :new }\n        format.json { render json: @call.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /calls/1\n  # PATCH/PUT /calls/1.json\n  def update\n    respond_to do |format|\n      if @call.update(call_params)\n        format.html { redirect_to @call, notice: 'Call was successfully updated.' }\n        format.json { render :show, status: :ok, location: @call }\n      else\n        format.html { render :edit }\n        format.json { render json: @call.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /calls/1\n  # DELETE /calls/1.json\n  def destroy\n    @call.destroy\n    respond_to do |format|\n      format.html { redirect_to calls_url, notice: 'Call was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_call\n      @call = Call.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def call_params\n      params.require(:call).permit(:call_time, :status, :primary_type, :secondary_type, :site, :address, :unit_1, :unit_2, :unit_3, :unit_4, :call_details, :unit_on_scene, :unit_clear, :call_num, :site_id)\n    end\nend\n</code></pre>\n\n<p>So to recap: I am looking for something that will sort the calls into either of the tables based on its current status. If ACTIVE i would like it in the Active calls Table if Unassigned i would like it in the unassigned table. Any help here would be greatly appreciated. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 895, "user_id": 5117502, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/3af1c137fcafdd6975f358e1fb43ca4c?s=128&d=identicon&r=PG&f=1", "display_name": "Jay266", "link": "https://stackoverflow.com/users/5117502/jay266"}, "edited": false, "score": 0, "creation_date": 1447192330, "post_id": 33640208, "comment_id": 55054644, "body": "This is running 500 of my tests and not the last 200. How can I get it to run the entire command as I stated above? I tried alias rr= &quot;bundle exec rspec spec lib/crucible_kit/spec&quot; but that didn&#39;t work"}, {"owner": {"reputation": 889, "user_id": 1511639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rvSA7.jpg?s=128&g=1", "display_name": "Jones Agyemang", "link": "https://stackoverflow.com/users/1511639/jones-agyemang"}, "reply_to_user": {"reputation": 895, "user_id": 5117502, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/3af1c137fcafdd6975f358e1fb43ca4c?s=128&d=identicon&r=PG&f=1", "display_name": "Jay266", "link": "https://stackoverflow.com/users/5117502/jay266"}, "edited": false, "score": 0, "creation_date": 1447192665, "post_id": 33640208, "comment_id": 55054824, "body": "You will have to to define a new alias rather than using &#39;rr&#39;. Try what you&#39;ve described in your comment again with a new alias"}, {"owner": {"reputation": 895, "user_id": 5117502, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/3af1c137fcafdd6975f358e1fb43ca4c?s=128&d=identicon&r=PG&f=1", "display_name": "Jay266", "link": "https://stackoverflow.com/users/5117502/jay266"}, "edited": false, "score": 0, "creation_date": 1447192843, "post_id": 33640208, "comment_id": 55054916, "body": "Thanks! Is there any way I can push this to git?"}, {"owner": {"reputation": 889, "user_id": 1511639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rvSA7.jpg?s=128&g=1", "display_name": "Jones Agyemang", "link": "https://stackoverflow.com/users/1511639/jones-agyemang"}, "reply_to_user": {"reputation": 895, "user_id": 5117502, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/3af1c137fcafdd6975f358e1fb43ca4c?s=128&d=identicon&r=PG&f=1", "display_name": "Jay266", "link": "https://stackoverflow.com/users/5117502/jay266"}, "edited": false, "score": 0, "creation_date": 1447457230, "post_id": 33640208, "comment_id": 55178910, "body": "Yes! You can save it to GitHub. For my &quot;dotfile&quot; and add your ~/.bashrc file. <a href=\"https://github.com/Tr4pSt3R/dotfiles-1\" rel=\"nofollow noreferrer\">github.com/Tr4pSt3R/dotfiles-1</a>"}], "tags": [], "owner": {"reputation": 889, "user_id": 1511639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rvSA7.jpg?s=128&g=1", "display_name": "Jones Agyemang", "link": "https://stackoverflow.com/users/1511639/jones-agyemang"}, "is_accepted": true, "score": 2, "last_activity_date": 1447191915, "creation_date": 1447191915, "answer_id": 33640208, "question_id": 33640015, "link": "https://stackoverflow.com/questions/33640015/shortcut-to-run-all-rails-tests/33640208#33640208", "title": "Shortcut to run all rails tests?", "body": "<p>Enter the code below in your command-line.</p>\n\n<pre><code>alias rr=\"bundle exec rspec\"\n</code></pre>\n\n<p>It will be appended to this file <code>~/.bash_rc</code></p>\n"}], "owner": {"reputation": 895, "user_id": 5117502, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/3af1c137fcafdd6975f358e1fb43ca4c?s=128&d=identicon&r=PG&f=1", "display_name": "Jay266", "link": "https://stackoverflow.com/users/5117502/jay266"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 33640208, "answer_count": 1, "score": 0, "last_activity_date": 1447191915, "creation_date": 1447191189, "question_id": 33640015, "link": "https://stackoverflow.com/questions/33640015/shortcut-to-run-all-rails-tests", "title": "Shortcut to run all rails tests?", "body": "<p>I have to type</p>\n\n<pre><code>bundle exec rspec spec lib/crucible_kit/spec\n</code></pre>\n\n<p>every time I want to run all 700 of my rspec tests for my rails application. Is there anyway I could shorten down this to just typing \"<code>rr</code>\" to run all tests?\nIf so, where would I put this file in my rails application? And would I be able to push it to git branch so my teammates can use it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "squeel", "select-n-plus-1"], "comments": [{"owner": {"reputation": 14140, "user_id": 1188035, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/da4b6c80f86359463b47f42cfe307356?s=128&d=identicon&r=PG", "display_name": "sjagr", "link": "https://stackoverflow.com/users/1188035/sjagr"}, "edited": false, "score": 0, "creation_date": 1447191661, "post_id": 33639987, "comment_id": 55054294, "body": "I&#39;ve never seen <code>includes</code> used in that format. Did you try <code>includes(availability: { facility: :venue })</code>"}, {"owner": {"reputation": 3995, "user_id": 1297248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/TiaMw.jpg?s=128&g=1", "display_name": "Batman", "link": "https://stackoverflow.com/users/1297248/batman"}, "reply_to_user": {"reputation": 14140, "user_id": 1188035, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/da4b6c80f86359463b47f42cfe307356?s=128&d=identicon&r=PG", "display_name": "sjagr", "link": "https://stackoverflow.com/users/1188035/sjagr"}, "edited": false, "score": 0, "creation_date": 1447192276, "post_id": 33639987, "comment_id": 55054609, "body": "It&#39;s the syntax that Squeel gem uses for joins. They amount to the same thing"}, {"owner": {"reputation": 562, "user_id": 1112633, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a3a8118d83fd2bf1975c210bd1fa531d?s=128&d=identicon&r=PG", "display_name": "MC2DX", "link": "https://stackoverflow.com/users/1112633/mc2dx"}, "edited": false, "score": 2, "creation_date": 1447193372, "post_id": 33639987, "comment_id": 55055184, "body": "What about <code>@bookings = Booking.includes(:availability, :facility, :venue).where(venue: @venue)</code> ?"}, {"owner": {"reputation": 14140, "user_id": 1188035, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/da4b6c80f86359463b47f42cfe307356?s=128&d=identicon&r=PG", "display_name": "sjagr", "link": "https://stackoverflow.com/users/1188035/sjagr"}, "edited": false, "score": 1, "creation_date": 1447194330, "post_id": 33639987, "comment_id": 55055680, "body": "@Batman You should mention that in your question."}, {"owner": {"reputation": 3995, "user_id": 1297248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/TiaMw.jpg?s=128&g=1", "display_name": "Batman", "link": "https://stackoverflow.com/users/1297248/batman"}, "reply_to_user": {"reputation": 562, "user_id": 1112633, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a3a8118d83fd2bf1975c210bd1fa531d?s=128&d=identicon&r=PG", "display_name": "MC2DX", "link": "https://stackoverflow.com/users/1112633/mc2dx"}, "edited": false, "score": 0, "creation_date": 1447195921, "post_id": 33639987, "comment_id": 55056379, "body": "@MateuszCzerwi\u0144ski that seemed to have worked. Now the majority returned from the cache and bullet isn&#39;t reporting an N1 issue."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1447196439, "post_id": 33639987, "comment_id": 55056622, "body": "You can use <code>&lt;%= render @bookings %&gt;</code>  to render the collection in the partial instead - rails will use convention over configuration and figure out the partial all by itself. <a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html#rendering-collections\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>"}, {"owner": {"reputation": 562, "user_id": 1112633, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a3a8118d83fd2bf1975c210bd1fa531d?s=128&d=identicon&r=PG", "display_name": "MC2DX", "link": "https://stackoverflow.com/users/1112633/mc2dx"}, "edited": false, "score": 0, "creation_date": 1447223529, "post_id": 33639987, "comment_id": 55064115, "body": "<code>Rails.cache.clear</code>?"}, {"owner": {"reputation": 3995, "user_id": 1297248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/TiaMw.jpg?s=128&g=1", "display_name": "Batman", "link": "https://stackoverflow.com/users/1297248/batman"}, "reply_to_user": {"reputation": 562, "user_id": 1112633, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a3a8118d83fd2bf1975c210bd1fa531d?s=128&d=identicon&r=PG", "display_name": "MC2DX", "link": "https://stackoverflow.com/users/1112633/mc2dx"}, "edited": false, "score": 0, "creation_date": 1447264448, "post_id": 33639987, "comment_id": 55086714, "body": "@MateuszCzerwi\u0144ski why do I need to clear the cache? It seems to be working as intended, I think. Isn&#39;t it a good thing it&#39;s returning everything from the cache?"}, {"owner": {"reputation": 562, "user_id": 1112633, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a3a8118d83fd2bf1975c210bd1fa531d?s=128&d=identicon&r=PG", "display_name": "MC2DX", "link": "https://stackoverflow.com/users/1112633/mc2dx"}, "edited": false, "score": 0, "creation_date": 1447265377, "post_id": 33639987, "comment_id": 55087261, "body": "If data doesn&#39;t change, it can faster loading data but sometimes it helps a lot and fix errors."}, {"owner": {"reputation": 3995, "user_id": 1297248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/TiaMw.jpg?s=128&g=1", "display_name": "Batman", "link": "https://stackoverflow.com/users/1297248/batman"}, "edited": false, "score": 0, "creation_date": 1447268926, "post_id": 33639987, "comment_id": 55089447, "body": "Awesome, I&#39;ll keep it in mind.  Thanks for the help, everything seems to be working fine now."}], "owner": {"reputation": 3995, "user_id": 1297248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/TiaMw.jpg?s=128&g=1", "display_name": "Batman", "link": "https://stackoverflow.com/users/1297248/batman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 239, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1447195556, "creation_date": 1447191096, "last_edit_date": 1447195556, "question_id": 33639987, "link": "https://stackoverflow.com/questions/33639987/n1-issue-with-rails-partial", "title": "N+1 issue with rails partial", "body": "<p>I have a <code>Booking</code> model , associated with <code>Availability</code> &gt; <code>Facility</code> &gt; <code>Venue</code></p>\n\n<p>I have a page in my view which renders all <code>bookings</code> for a given <code>venue</code> and it's causing a huge N+1 query. </p>\n\n<p>Controller Action:</p>\n\n<pre><code>  def summary\n    @venue = Venue.find params[:venue_id]\n    @bookings = Booking.includes{availability.facility.venue}.for_venue(@venue).references(:all).sort_recent\n  end \n</code></pre>\n\n<p>View: </p>\n\n<pre><code>&lt;table id=\"booking-history\" class=\"table table-condensed table-hover\"&gt;\n    &lt;thead&gt;\n        &lt;th&gt;Date&lt;/th&gt;\n        &lt;th&gt;Time&lt;/th&gt;\n        &lt;th&gt;Facility&lt;/th&gt;\n        &lt;th&gt;Purchase Time&lt;/th&gt;\n        &lt;th&gt;User&lt;/th&gt;\n        &lt;th&gt;Price&lt;/th&gt;\n        &lt;th&gt;Receipt&lt;/th&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n        &lt;!-- venue_bookings is a method in venues helper --&gt;\n        &lt;%= render :partial =&gt; \"bookings/booking\", collection: bookings, as: :booking %&gt;\n\n    &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>Partial: </p>\n\n<pre><code>    &lt;tr&gt;\n  &lt;!-- avail date --&gt;\n  &lt;td&gt;&lt;%= booking.availability.start_time.strftime(\"%a, %b %d %Y\")%&gt;&lt;/td&gt;\n  &lt;!-- avail time --&gt;\n  &lt;td&gt;&lt;%= booking.availability.start_time.strftime(\"%I:%M\")%&gt; - &lt;%= booking.availability.end_time.strftime(\"%I:%M  %p\")%&gt;&lt;/td&gt;\n  &lt;td&gt;&lt;%= booking.facility.name %&gt;&lt;/td&gt;\n  &lt;td&gt;&lt;%= booking.created_at.to_formatted_s(:short) %&gt;&lt;/td&gt;\n  &lt;td&gt;&lt;%= User.find(booking.user_id).name %&gt;&lt;/td&gt;\n  &lt;td&gt;&lt;%= number_to_currency booking.total_price%&gt;&lt;/td&gt;\n  &lt;!-- Receipt Link --&gt;\n  &lt;td&gt; &lt;%= link_to(\"Receipt\", charge_path(booking) ) %&gt;&lt;/td&gt;\n&lt;/tr&gt;\n</code></pre>\n\n<p>Bullet Log: </p>\n\n<pre><code>user: vagrant\nN+1 Query detected\n  Booking =&amp;gt; [:facility]\n  Add to your finder: :includes =&amp;gt; [:facility]\nN+1 Query method call stack\n  /vagrant/playtoday/app/views/bookings/_booking.html.erb:6:in `_app_views_bookings__booking_html_erb___965508066735177428_69970894883840'\n  /vagrant/playtoday/app/views/bookings/_bookingHistory.html.erb:21:in `_app_views_bookings__booking_istory_html_erb___724060916350777358_69971212148620'\n</code></pre>\n\n<p>I already have includes in the class variable, I'm not sure where else I should be doing it. </p>\n"}, {"tags": ["ruby", "null", "each"], "answers": [{"tags": [], "owner": {"reputation": 213, "user_id": 4755886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be64cadffae76ae1de653b62db0d4fc1?s=128&d=identicon&r=PG&f=1", "display_name": "Julio Lago", "link": "https://stackoverflow.com/users/4755886/julio-lago"}, "is_accepted": false, "score": 0, "last_activity_date": 1447191218, "creation_date": 1447191218, "answer_id": 33640022, "question_id": 33639887, "link": "https://stackoverflow.com/questions/33639887/ruby-unidentified-method-for-nil-no-method-error/33640022#33640022", "title": "Ruby Unidentified Method for nil No Method Error", "body": "<p>I guess you first have to ask if line.match gets something, before calling an element of the desired array.</p>\n\n<pre><code>line.match(/.*\\/(.*)\"/)[1]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1447191232, "creation_date": 1447191232, "answer_id": 33640028, "question_id": 33639887, "link": "https://stackoverflow.com/questions/33639887/ruby-unidentified-method-for-nil-no-method-error/33640028#33640028", "title": "Ruby Unidentified Method for nil No Method Error", "body": "<p>When you call <code>line.match(/.*\\/(.*)\"/)</code> the result is <code>nil</code>. Then you attempt to access <code>nil</code> as an <code>Array</code>. That is when you get <code>undefined method []' for nil:NilClass</code>. </p>\n\n<p>And as for this part of your question </p>\n\n<blockquote>\n  <p>but if that error is coming from the each loop, why am I able to print out the file?</p>\n</blockquote>\n\n<p>The each loop is causing your code to fail and halt when the error occurs. Since you are attempting to print <code>file</code> <strong>after</strong> the errors, you are actually not printing out <code>file</code> on that iteration of the loop.</p>\n\n<p>Be aware that <code>line</code> might not be <code>nil</code>. Your regular expression is probably just not covering all the cases you think it is, so one of the <code>match</code> calls is failing and returning <code>nil</code>.</p>\n"}], "owner": {"reputation": 347, "user_id": 2821077, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/100000381784218/picture?type=large", "display_name": "Christian Baker", "link": "https://stackoverflow.com/users/2821077/christian-baker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1447191232, "creation_date": 1447190602, "question_id": 33639887, "link": "https://stackoverflow.com/questions/33639887/ruby-unidentified-method-for-nil-no-method-error", "title": "Ruby Unidentified Method for nil No Method Error", "body": "<p>I'm attempting to run this code:</p>\n\n<pre><code>def get_linedict(filename,source)\n`dwarfdump -l #{source} &gt; dwarfline.txt`\nlinefile = File.new(\"dwarfline.txt\",\"r\")\n\nmatch = false\n\nlinefile.readlines.each do |line|\n    puts line\n    if /uri:/ =~ line\n        file = line.match(/.*\\/(.*)\"/)[1]\n        if file == filename\n            match = true\n        end\n        puts file\n        puts match\n    end\nend\n</code></pre>\n\n<p>And when I do I get the following error:</p>\n\n<pre><code>assn4.rb:12:in `block in get_linedict': undefined method `[]' for nil:NilClass (NoMethodError)\nfrom assn4.rb:9:in `each'\nfrom assn4.rb:9:in `get_linedict'\nfrom assn4.rb:126:in `block in &lt;main&gt;'\nfrom assn4.rb:80:in `each'\nfrom assn4.rb:80:in `&lt;main&gt;'\n</code></pre>\n\n<p>If I change my each loop to only print the lines it's reading, it works fine.  As I understand it, the error I'm getting comes from something being nil which shouldn't be, but if that error is coming from the each loop, why am I able to print out the file?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "has-many"], "comments": [{"owner": {"reputation": 2718, "user_id": 1490262, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/afc8915df9cbb5c119ea0057d17fabd2?s=128&d=identicon&r=PG", "display_name": "Peter P.", "link": "https://stackoverflow.com/users/1490262/peter-p"}, "edited": false, "score": 0, "creation_date": 1447189970, "post_id": 33639489, "comment_id": 55053400, "body": "what database are you using? mysql? postgres?"}, {"owner": {"reputation": 3773, "user_id": 991903, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J12Hi.jpg?s=128&g=1", "display_name": "Meier", "link": "https://stackoverflow.com/users/991903/meier"}, "edited": false, "score": 0, "creation_date": 1447196260, "post_id": 33639489, "comment_id": 55056541, "body": "Never, ever do something like &quot;...#{varname}&quot; in a SQL fragment. Maybe you are safe this time, but some day you get a SQL injection. You should learn how to use parameters in the SQL statement."}, {"owner": {"reputation": 2718, "user_id": 1490262, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/afc8915df9cbb5c119ea0057d17fabd2?s=128&d=identicon&r=PG", "display_name": "Peter P.", "link": "https://stackoverflow.com/users/1490262/peter-p"}, "edited": false, "score": 0, "creation_date": 1447221692, "post_id": 33639489, "comment_id": 55063630, "body": "In this case, #{current_user.id} is safe as its probably not user input, however, yes, good practice to use parameters as I&#39;ve rewritten the queries below."}], "answers": [{"comments": [{"owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "edited": false, "score": 0, "creation_date": 1447189703, "post_id": 33639568, "comment_id": 55053263, "body": "Thank you, <code>Peter</code>, for your answer. However, how is this query different from the one in the OP? Anyway, the issue is that the output is an empty array. If I have 10 listings in the DB table and I decide that I don&#39;t want to make the first one visible for a user, the rest 9 should be displayed there."}, {"owner": {"reputation": 2718, "user_id": 1490262, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/afc8915df9cbb5c119ea0057d17fabd2?s=128&d=identicon&r=PG", "display_name": "Peter P.", "link": "https://stackoverflow.com/users/1490262/peter-p"}, "reply_to_user": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "edited": false, "score": 0, "creation_date": 1447189770, "post_id": 33639568, "comment_id": 55053291, "body": "The key is &#39;&lt;&gt;&#39; and not &#39;!=&#39;. This is how you do NOT in sql."}, {"owner": {"reputation": 2718, "user_id": 1490262, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/afc8915df9cbb5c119ea0057d17fabd2?s=128&d=identicon&r=PG", "display_name": "Peter P.", "link": "https://stackoverflow.com/users/1490262/peter-p"}, "reply_to_user": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "edited": false, "score": 0, "creation_date": 1447190498, "post_id": 33639568, "comment_id": 55053681, "body": "I&#39;m pretty sure the problem is the type of join you are doing. By doing an inner join you will exclude rows that are not in the exclusion table which is the opposite of what you want! See my edit above to use OUTER JOIN."}, {"owner": {"reputation": 3773, "user_id": 991903, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J12Hi.jpg?s=128&g=1", "display_name": "Meier", "link": "https://stackoverflow.com/users/991903/meier"}, "edited": false, "score": 0, "creation_date": 1447197211, "post_id": 33639568, "comment_id": 55056960, "body": "Yes, the inner join is wrong. Outer join is not enough, as a Listing may have been excluded by two users, one of it is the current user. the outer join then still returns it, because there is another user that is not the current user. Not conditions are not so easy in the SQL logic."}, {"owner": {"reputation": 2718, "user_id": 1490262, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/afc8915df9cbb5c119ea0057d17fabd2?s=128&d=identicon&r=PG", "display_name": "Peter P.", "link": "https://stackoverflow.com/users/1490262/peter-p"}, "reply_to_user": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "edited": false, "score": 0, "creation_date": 1447221763, "post_id": 33639568, "comment_id": 55063648, "body": "the OP did not mention needing to check multiple users, @user984621 - can you clarify if your question requires multiple users to be included in the exclusion query? If so, please update the question above."}], "tags": [], "owner": {"reputation": 2718, "user_id": 1490262, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/afc8915df9cbb5c119ea0057d17fabd2?s=128&d=identicon&r=PG", "display_name": "Peter P.", "link": "https://stackoverflow.com/users/1490262/peter-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1447222360, "last_edit_date": 1447222360, "creation_date": 1447189367, "answer_id": 33639568, "question_id": 33639489, "link": "https://stackoverflow.com/questions/33639489/rails-4-activerecord-how-to-exclude-some-records-from-the-search/33639568#33639568", "title": "Rails 4 + ActiveRecord: How to exclude some records from the search?", "body": "<p>This can easily be done in two queries. If you need one query, you may need a subquery.</p>\n\n<p>2 queries:</p>\n\n<pre><code>user_ids_to_exclude = ListingExcludedUser.where.not(user_id: current_user.id).pluck(:user_id)\n@listings = Listing.where.not(user_id: user_ids_to_exclude)\n</code></pre>\n\n<p>Subquery</p>\n\n<pre><code>@listings = Listing.where.not(user_id: ListingExcludedUser.where.not(user_id: current_user.id).select(:user_id))\n</code></pre>\n\n<p>NOTE: where.not is a Rails 4 idiom.</p>\n"}], "owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2237, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447222360, "creation_date": 1447189100, "last_edit_date": 1447189975, "question_id": 33639489, "link": "https://stackoverflow.com/questions/33639489/rails-4-activerecord-how-to-exclude-some-records-from-the-search", "title": "Rails 4 + ActiveRecord: How to exclude some records from the search?", "body": "<p>I have these tables:</p>\n\n<ol>\n<li><code>users</code> - a classic Devise table</li>\n<li><code>listings</code> - users create listings</li>\n<li><code>listings_exclude_users</code> - 2 columns: <code>user_id</code> and <code>listing_id</code></li>\n</ol>\n\n<p>user.rb</p>\n\n<pre><code>class User \n  has_many :listings\nend \n</code></pre>\n\n<p>listing.rb</p>\n\n<pre><code>class Listing\n  belongs_to :user\n  has_many :listing_excluded_users\nend\n</code></pre>\n\n<p>listing_excluded_user.rb</p>\n\n<pre><code>class ListingExcludedUser\n  belongs_to :user\n  belongs_to :listing\nend\n</code></pre>\n\n<p>I label some users for which shouldn't be the respective listing visible and this information is saved in <code>listings_exclude_users</code>.</p>\n\n<p>Now I'd like to run a query that would fetch all the listings, but if is signed in the user who is in the table <code>listings_exclude_users</code> for the specific listing, then don't fetch this listing.</p>\n\n<p>I can do it in the view, but I'd prefer the ActiveRecord way.\nI tried</p>\n\n<pre><code>@listings = Listing.joins(:listing_excluded_users).where(\"listings.status='0' AND (listing_excluded_users.user_id != '#{current_user.id}')\")\n</code></pre>\n\n<p>But this query doesn't return anything (empty <code>@listings</code>).</p>\n\n<p>Thank you in advance for advice.</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "ubuntu-14.04"], "answers": [{"comments": [{"owner": {"reputation": 1396, "user_id": 521347, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e25f20cac27e4f5ddc38e86081f8524d?s=128&d=identicon&r=PG", "display_name": "Sumit Desai", "link": "https://stackoverflow.com/users/521347/sumit-desai"}, "edited": false, "score": 0, "creation_date": 1497356915, "post_id": 33639903, "comment_id": 76034752, "body": "When I ran this command, it uninstalled already installed mysql 5.6 and installed mysql 5.7. I do not want to install new version of mysql. Any workarounds?"}, {"owner": {"reputation": 406, "user_id": 2181217, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3ea8736e85ccd5fc64a5273a89a87af2?s=128&d=identicon&r=PG", "display_name": "Stephen Mariano Cabrera", "link": "https://stackoverflow.com/users/2181217/stephen-mariano-cabrera"}, "reply_to_user": {"reputation": 1396, "user_id": 521347, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e25f20cac27e4f5ddc38e86081f8524d?s=128&d=identicon&r=PG", "display_name": "Sumit Desai", "link": "https://stackoverflow.com/users/521347/sumit-desai"}, "edited": false, "score": 0, "creation_date": 1497504474, "post_id": 33639903, "comment_id": 76107958, "body": "I suspect you can specify the version that you want? Typically package managers will just install the latest version by default but then let you specify a specific version if you need it. I&#39;d look into that."}], "tags": [], "owner": {"reputation": 406, "user_id": 2181217, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3ea8736e85ccd5fc64a5273a89a87af2?s=128&d=identicon&r=PG", "display_name": "Stephen Mariano Cabrera", "link": "https://stackoverflow.com/users/2181217/stephen-mariano-cabrera"}, "is_accepted": true, "score": 7, "last_activity_date": 1447190665, "creation_date": 1447190665, "answer_id": 33639903, "question_id": 33639260, "link": "https://stackoverflow.com/questions/33639260/mysql2-gem-hangs-during-installation/33639903#33639903", "title": "mysql2 gem hangs during installation", "body": "<p>It looks like I had the wrong version of mysql installed. Uninstalling all versions of mysql and then running</p>\n\n<pre><code>sudo apt-get install mysql-client libmysqlclient-dev\n</code></pre>\n\n<p>worked for me.</p>\n"}], "owner": {"reputation": 406, "user_id": 2181217, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3ea8736e85ccd5fc64a5273a89a87af2?s=128&d=identicon&r=PG", "display_name": "Stephen Mariano Cabrera", "link": "https://stackoverflow.com/users/2181217/stephen-mariano-cabrera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 670, "favorite_count": 0, "accepted_answer_id": 33639903, "answer_count": 1, "score": 0, "last_activity_date": 1447190665, "creation_date": 1447188287, "question_id": 33639260, "link": "https://stackoverflow.com/questions/33639260/mysql2-gem-hangs-during-installation", "title": "mysql2 gem hangs during installation", "body": "<p>I'm using mysql as the database for a rails app and trying to bundle install the <code>mysql2</code> gem. During the step</p>\n\n<pre><code>Installing mysql2 0.3.19 with native extensions\n</code></pre>\n\n<p>rather than failing and giving me an error message, it simply hangs and never gives any output at all. </p>\n\n<p>For background I'm installing on a fresh digital ocean droplet that comes with rails installed on Ubuntu 14.04, using ruby 2.0.0 and without specifying a version for the <code>mysql2</code> gem.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "minitest"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1447188436, "post_id": 33639247, "comment_id": 55052554, "body": "Mocking is covered in <a href=\"https://github.com/seattlerb/minitest\" rel=\"nofollow noreferrer\">the documentation</a>. What have you tried, why didn&#39;t it work? <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}], "answers": [{"comments": [{"owner": {"reputation": 26124, "user_id": 972789, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/4Y8VM.jpg?s=128&g=1", "display_name": "Nick Ginanto", "link": "https://stackoverflow.com/users/972789/nick-ginanto"}, "edited": false, "score": 0, "creation_date": 1447221733, "post_id": 33644911, "comment_id": 55063644, "body": "thanks, I think it will just do what you said and compare tests text files instead of mocking"}, {"owner": {"reputation": 1029, "user_id": 655028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ca98e75ecd686304f9a4aae2b25ac09?s=128&d=identicon&r=PG", "display_name": "Chris Kottom", "link": "https://stackoverflow.com/users/655028/chris-kottom"}, "reply_to_user": {"reputation": 26124, "user_id": 972789, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/4Y8VM.jpg?s=128&g=1", "display_name": "Nick Ginanto", "link": "https://stackoverflow.com/users/972789/nick-ginanto"}, "edited": false, "score": 0, "creation_date": 1447243928, "post_id": 33644911, "comment_id": 55073962, "body": "If you like it, put a check on it.  :)"}], "tags": [], "owner": {"reputation": 1029, "user_id": 655028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ca98e75ecd686304f9a4aae2b25ac09?s=128&d=identicon&r=PG", "display_name": "Chris Kottom", "link": "https://stackoverflow.com/users/655028/chris-kottom"}, "is_accepted": true, "score": 0, "last_activity_date": 1447220757, "creation_date": 1447220757, "answer_id": 33644911, "question_id": 33639247, "link": "https://stackoverflow.com/questions/33639247/using-minitest-to-test-file-write/33644911#33644911", "title": "Using Minitest to Test File Write", "body": "<p>If I were going to do what you're suggesting, I would stub <code>File.open</code> to return a mock like:</p>\n\n<pre><code>def test_something_that_reads_a_file\n  file_mock = Minitest::Mock.new\n  file_mock.expect(:readline, \"It was the best of times...\")\n  File.stub(:open, file_mock) do\n    # your test logic here\n  end\n  file_mock.verify\nend\n</code></pre>\n\n<p>You still have the problem of returning <code>EOF</code> at some point, but whether that's an issue for you depends on context that I don't have given what you've written.</p>\n\n<p>But there are a couple of reasons why I would probably never approach the problem like this.</p>\n\n<ol>\n<li>Don't mock what you don't own.  Yes, the semantics of <code>File#readline</code> are probably not going to change tomorrow, but making assumptions about an interface that's outside your control is a bad practice.</li>\n<li>To me, this reads like a non-public method.  If I'm right about that, then I wouldn't test it at all.  Private methods are implementation details that don't need their own tests.  If you're dead set on not doing any I/O here, I'd rather stub the result of the method rather than what I've done above.</li>\n</ol>\n\n<p>The approach I would take would be to include a small test file and actually read from it.  Your tests will be easier to understand as a result.</p>\n"}], "owner": {"reputation": 26124, "user_id": 972789, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/4Y8VM.jpg?s=128&g=1", "display_name": "Nick Ginanto", "link": "https://stackoverflow.com/users/972789/nick-ginanto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1486, "favorite_count": 1, "accepted_answer_id": 33644911, "answer_count": 1, "score": 2, "last_activity_date": 1447220757, "creation_date": 1447188232, "last_edit_date": 1447219813, "question_id": 33639247, "link": "https://stackoverflow.com/questions/33639247/using-minitest-to-test-file-write", "title": "Using Minitest to Test File Write", "body": "<p>Is there a way to use minitest to mock/stub file reads and writes (text files) without actually having them existing?</p>\n\n<p>the actual code is something like</p>\n\n<pre><code>def write_to_file(filename)\n\n f = File.open(filename,\"w\")\n\n f.puts \"hello world\"\n\n f.close\nend\n</code></pre>\n\n<p>I really don't know how to try something since I couldn't find any examples for mocking File IO, only comparing variables</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "is_accepted": true, "score": 12, "last_activity_date": 1447209503, "last_edit_date": 1447209503, "creation_date": 1447187018, "answer_id": 33638889, "question_id": 33638803, "link": "https://stackoverflow.com/questions/33638803/how-is-something-like-30-seconds-ago-implemented/33638889#33638889", "title": "How is something like 30.seconds.ago implemented?", "body": "<p><a href=\"https://github.com/rails/rails/blob/7f18ea14c893cb5c9f04d4fda9661126758332b5/activesupport/lib/active_support/core_ext/numeric/time.rb#L19-L24\" rel=\"noreferrer\">Here</a> is the implementation of the <code>seconds</code>:</p>\n\n<pre><code>  def seconds\n    ActiveSupport::Duration.new(self, [[:seconds, self]])\n  end\n</code></pre>\n\n<p>And, <a href=\"https://github.com/rails/rails/blob/7f18ea14c893cb5c9f04d4fda9661126758332b5/activesupport/lib/active_support/duration.rb#L110-L115\" rel=\"noreferrer\">here</a> is the implementation of the <code>ago</code>:</p>\n\n<pre><code># Calculates a new Time or Date that is as far in the past\n# as this Duration represents.\ndef ago(time = ::Time.current)\n  sum(-1, time)\nend\n</code></pre>\n\n<p>And, <a href=\"https://github.com/rails/rails/blob/7f18ea14c893cb5c9f04d4fda9661126758332b5/activesupport/lib/active_support/duration.rb#L137-L149\" rel=\"noreferrer\">here</a> is the implementation of the <code>sum</code> method that's used inside the <code>ago</code>:</p>\n\n<pre><code>  def sum(sign, time = ::Time.current) #:nodoc:\n    parts.inject(time) do |t,(type,number)|\n      if t.acts_like?(:time) || t.acts_like?(:date)\n        if type == :seconds\n          t.since(sign * number)\n        else\n          t.advance(type =&gt; sign * number)\n        end\n      else\n        raise ::ArgumentError, \"expected a time or date, got #{time.inspect}\"\n      end\n    end\n  end\n</code></pre>\n\n<p>To understand it fully, you should follow the method calls and look for their implementations in the Rails source code like I showed you just now.</p>\n\n<p>One easy way to find a method definition inside Rails code base is to use <code>source_location</code> in your Rails console:</p>\n\n<pre><code>&gt; 30.method(:seconds).source_location\n# =&gt; [\"/Users/rislam/.rvm/gems/ruby-2.2.2/gems/activesupport-4.2.3/lib/active_support/core_ext/numeric/time.rb\", 19]\n&gt; 30.seconds.method(:ago).source_location\n# =&gt; [\"/Users/rislam/.rvm/gems/ruby-2.2.2/gems/activesupport-4.2.3/lib/active_support/duration.rb\", 108]\n</code></pre>\n"}], "owner": {"reputation": 1219, "user_id": 2061688, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/53074d21ffa183b9175a69e7bb3c7316?s=128&d=identicon&r=PG", "display_name": "psharma", "link": "https://stackoverflow.com/users/2061688/psharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1071, "favorite_count": 0, "accepted_answer_id": 33638889, "answer_count": 1, "score": 7, "last_activity_date": 1502040786, "creation_date": 1447186700, "last_edit_date": 1502040786, "question_id": 33638803, "link": "https://stackoverflow.com/questions/33638803/how-is-something-like-30-seconds-ago-implemented", "title": "How is something like 30.seconds.ago implemented?", "body": "<p>I found this question <a href=\"https://github.com/afeld/rails_interview_questions\" rel=\"nofollow\">here</a>.</p>\n\n<p>And really curious to know the technical explanation of how something like <code>30.seconds.ago</code> is implemented in Rails.</p>\n\n<p>Method chaining? <code>Numeric</code> usage as per:\n<a href=\"http://api.rubyonrails.org/classes/Numeric.html#method-i-seconds\" rel=\"nofollow\">http://api.rubyonrails.org/classes/Numeric.html#method-i-seconds</a> . </p>\n\n<p>What else?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1447190344, "post_id": 33638665, "comment_id": 55053585, "body": "I think this falls into the general consensus of not inheriting from core classes. <a href=\"http://words.steveklabnik.com/beware-subclassing-ruby-core-classes\" rel=\"nofollow noreferrer\">Nice Article</a>"}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1447194346, "post_id": 33638665, "comment_id": 55055692, "body": "Aren&#39;t the first two questions answered by the comments on the linked Ruby bug? 1. Yes., 2. Because the previous behavior was wrong. See its counterpart <code>Hash#select</code> which always returns an instance of <code>Hash</code> - even in 1.9.3 and previous versions."}, {"owner": {"reputation": 3930, "user_id": 1449569, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d58c523bfe1f2628000af0759654ee69?s=128&d=identicon&r=PG", "display_name": "Iron Savior", "link": "https://stackoverflow.com/users/1449569/iron-savior"}, "edited": false, "score": 0, "creation_date": 1447200282, "post_id": 33638665, "comment_id": 55058121, "body": "Make no mistake, this is NOT a specialization of <code>Hash</code>. You can tell this is the case because the derived class merely uses the underlying <code>Hash</code> instance and has no other relationship to it. I think the fundamental problem here is that your subclass of <code>Hash</code> does not REALLY have an &quot;is-a&quot; relationship to <code>Hash</code>. It&#39;s merely implemented in terms of a <code>Hash</code> and it&#39;s clear that you want it to have a similar interface to that of <code>Hash</code>, but that alone is not a good enough reason to use inheritance. This is clearly a &quot;has-a&quot; relationship."}, {"owner": {"reputation": 4771, "user_id": 2217557, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/07525ada9b659895821f3ca61320f4d2?s=128&d=identicon&r=PG", "display_name": "David Elner", "link": "https://stackoverflow.com/users/2217557/david-elner"}, "edited": false, "score": 0, "creation_date": 1447360561, "post_id": 33638665, "comment_id": 55134710, "body": "I agree how I&#39;m using <code>Hash</code> in the above test case maybe not be the quintessential example of how to use inheritance. However, if one wants a class that can store values like a <code>Hash</code>, with additional custom &#39;helper&#39; functions, how would one accomplish that? Even if composition is desirable, it escapes me on how you could leverage it here without inheriting from <code>Hash</code>."}], "answers": [{"tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 2, "last_activity_date": 1447202409, "creation_date": 1447202409, "answer_id": 33642329, "question_id": 33638665, "link": "https://stackoverflow.com/questions/33638665/ruby-2-2-hashreject-returning-hash-for-inheriting-classes/33642329#33642329", "title": "Ruby 2.2 Hash#reject returning Hash for inheriting classes?", "body": "<p><strong><em>CAVEAT!</em></strong> I am not a \"better informed Ruby dev\" and this is the first I've looked at this problem.</p>\n\n<p>Looking at the commit history, this was a deliberate change.</p>\n\n<pre><code>commit 740535f843d65be45732e45b9fc07eadc4d63ba7\nAuthor: nobu &lt;nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e&gt;\nDate:   Wed Dec 11 07:01:29 2013 +0000\n\n    hash.c: reject should return a plain hash\n\n    * hash.c (rb_hash_reject): return a plain hash, without copying\n      the class, default value, instance variables, and taintedness.\n      they had been copied just by accident.\n      [ruby-core:59045] [Bug #9223]\n</code></pre>\n\n<p><a href=\"https://bugs.ruby-lang.org/issues/9223\" rel=\"nofollow\">Bug #9223</a> has <a href=\"https://bugs.ruby-lang.org/issues/9223#note-6\" rel=\"nofollow\">Matz accepting the change of <code>Hash#reject</code></a>.</p>\n\n<blockquote>\n  <p>I accept this behavior change. #reject should not copy instance variables etc. just like #select.</p>\n</blockquote>\n\n<p>It seems it was intended for 2.2, but scrubbing it from 2.1 was flubbed.</p>\n\n<p>It seems copying the class and the rest was an accident.  The change was made to make Hash methods more consistent with each other.</p>\n\n<hr>\n\n<blockquote>\n  <p><strong><em>How are developers expected to accommodate for this change in behavior? (Are we all expected to do exactly as the Rails team did?)</em></strong></p>\n</blockquote>\n\n<p>The simple answer is to switch to <code>hash.dup.delete_if</code> to retain the same behavior across all versions.</p>\n\n<p>Alternatively you could override <code>Hash#reject</code> in your sub-classes to retain the old behavior, but then your hash sub-classes would be breaking the new <code>Hash#reject</code> interface.</p>\n\n<hr>\n\n<p>IMO the devs made a mistake.  The behavior of <code>Hash#reject</code> was desirable.  Methods should not make method calls on their own hard coded class name.  Methods should strive to retain the class of their invocant.  Otherwise you have the situation where sub-classes have to write wrappers around everything to avoid accidentally returning a parent object to the unsuspecting user.</p>\n\n<p>It doesn't matter if it's an isa or a hasa relationship.  That is an internal implementation issue which should be invisible to the external user of your objects.</p>\n\n<p>If consistency was desired, the behavior of <code>Hash#select</code> should have been changed to match.</p>\n"}], "owner": {"reputation": 4771, "user_id": 2217557, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/07525ada9b659895821f3ca61320f4d2?s=128&d=identicon&r=PG", "display_name": "David Elner", "link": "https://stackoverflow.com/users/2217557/david-elner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 33642329, "answer_count": 1, "score": 0, "last_activity_date": 1447202409, "creation_date": 1447186279, "last_edit_date": 1447186639, "question_id": 33638665, "link": "https://stackoverflow.com/questions/33638665/ruby-2-2-hashreject-returning-hash-for-inheriting-classes", "title": "Ruby 2.2 Hash#reject returning Hash for inheriting classes?", "body": "<p>In the process of upgrading from Ruby 1.9.3 to Ruby 2.2.3 (MRI), I've found an issue that affects any class that inherits from <code>Hash</code>. If you call <code>#reject</code> on the instance of a class that inherits from <code>Hash</code>, it will always return a <code>Hash</code> instead of an instance of the class that invoked it.</p>\n\n<p>For example, given the following code:</p>\n\n<pre><code>class CustomHash &lt; Hash\n  def count_in_english\n    \"There are #{self.count} items in this hash.\"\n  end\nend\n</code></pre>\n\n<p>For Ruby 1.9.3, the following succeeds:</p>\n\n<pre><code>1.9.3-p547 :060 &gt; hash = CustomHash.new\n =&gt; {} \n1.9.3-p547 :061 &gt; hash[1] = 'a'\n =&gt; \"a\" \n1.9.3-p547 :062 &gt; hash[2] = 'b'\n =&gt; \"b\" \n1.9.3-p547 :063 &gt; hash[3] = 'c'\n =&gt; \"c\" \n1.9.3-p547 :064 &gt; odds_only_hash = hash.reject { |k,v| k % 2 == 0 }\n =&gt; {1=&gt;\"a\", 3=&gt;\"c\"} \n1.9.3-p547 :065 &gt; odds_only_hash.count_in_english\n =&gt; \"There are 2 items in this hash.\"\n1.9.3-p547 :066 &gt; odds_only_hash.class\n =&gt; CustomHash\n</code></pre>\n\n<p>But in Ruby 2.2.3:</p>\n\n<pre><code>2.2.3 :019 &gt; hash = CustomHash.new\n =&gt; {} \n2.2.3 :020 &gt; hash[1] = 'a'\n =&gt; \"a\" \n2.2.3 :021 &gt; hash[2] = 'b'\n =&gt; \"b\" \n2.2.3 :022 &gt; hash[3] = 'c'\n =&gt; \"c\" \n2.2.3 :023 &gt; odds_only_hash = hash.reject { |k,v| k % 2 == 0 }\n =&gt; {1=&gt;\"a\", 3=&gt;\"c\"} \n2.2.3 :024 &gt; odds_only_hash.count_in_english\nNoMethodError: undefined method `count_in_english' for {1=&gt;\"a\", 3=&gt;\"c\"}:Hash\n    from (irb):24\n    from /Users/davidelner/.rvm/rubies/ruby-2.2.3/bin/irb:15:in `&lt;main&gt;'\n2.2.3 :025 &gt; odds_only_hash.class\n =&gt; Hash\n</code></pre>\n\n<p>After doing a little searching, it looks like <a href=\"https://www.ruby-lang.org/en/news/2014/03/10/regression-of-hash-reject-in-ruby-2-1-1/\" rel=\"nofollow\">this is known by the Ruby devs</a>, was <a href=\"https://bugs.ruby-lang.org/issues/9223\" rel=\"nofollow\">discussed a little bit</a>, and detailed in <a href=\"http://blog.sorah.jp/2014/03/10/hash-reject-regression-in-ruby211\" rel=\"nofollow\">this blog post</a>. This change has also broken Rails' <code>HashWithIndifferentAccess</code> as per <a href=\"https://github.com/rails/rails/issues/14188\" rel=\"nofollow\">this issue</a>, for which they issued <a href=\"https://github.com/rails/rails/pull/14198\" rel=\"nofollow\">a pull request for Rails 4</a> (yet remains broken in Rails 3.2.22?)</p>\n\n<p>Clearly this behavior caught a lot of people off guard, and the change sounds ludicrous considering how it breaks the known Ruby gem universe (including Rails, Hashie, etc) that depend on this fundamental idea that objects shouldn't unexpectedly change type.</p>\n\n<p>My question, for some of the better informed Ruby devs, is:</p>\n\n<ul>\n<li>Is Ruby committed to the idea that in Ruby 2.2.3, and all future versions, <code>Hash#reject</code> will always return a <code>Hash</code>? (As opposed to an instance of the class that invoked this function? e.g. 1.9.3 C source <code>return rb_hash_delete_if(rb_obj_dup(hash));</code>)</li>\n<li>If so, why is this default behavior now? Isn't this effectively 'sealing' <code>#reject</code>, and breaking reasonable expectations that using these <code>Enumerable</code> functions will still return you an object of the same type?</li>\n<li>Also, if so, how are developers expected to accommodate for this change in behavior? (Are we all expected to do exactly as the Rails team did?)</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby", "api", "ssl", "osx-elcapitan"], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 5183339, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/efcc985506e7368a75cc4d81de82501b?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/5183339/andy"}, "edited": false, "score": 0, "creation_date": 1447738402, "post_id": 33741160, "comment_id": 55267632, "body": "Thanks a lot! that worked for me :)"}, {"owner": {"reputation": 126, "user_id": 3445654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/446f71c9a05348d9a1d7a9476299b652?s=128&d=identicon&r=PG&f=1", "display_name": "Ankush", "link": "https://stackoverflow.com/users/3445654/ankush"}, "reply_to_user": {"reputation": 37, "user_id": 5183339, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/efcc985506e7368a75cc4d81de82501b?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/5183339/andy"}, "edited": false, "score": 0, "creation_date": 1447828707, "post_id": 33741160, "comment_id": 55313599, "body": "Could you please accept the answer so that others  would come to know that this solution works."}, {"owner": {"reputation": 524, "user_id": 1227293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4f80e42794094c98a40bfebef4ec292?s=128&d=identicon&r=PG", "display_name": "Alex Sharp", "link": "https://stackoverflow.com/users/1227293/alex-sharp"}, "edited": false, "score": 0, "creation_date": 1448480225, "post_id": 33741160, "comment_id": 55610996, "body": "Disabling SSL is a dangerous option -- you&#39;re basically opening yourself up to man in the middle attacks. These problems are likely related to an OSX upgrade, see here for more: <a href=\"http://stackoverflow.com/questions/4528101/ssl-connect-returned-1-errno-0-state-sslv3-read-server-certificate-b-certificat\" title=\"ssl connect returned 1 errno 0 state sslv3 read server certificate b certificat\">stackoverflow.com/questions/4528101/&hellip;</a>"}], "tags": [], "owner": {"reputation": 126, "user_id": 3445654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/446f71c9a05348d9a1d7a9476299b652?s=128&d=identicon&r=PG&f=1", "display_name": "Ankush", "link": "https://stackoverflow.com/users/3445654/ankush"}, "is_accepted": false, "score": -1, "last_activity_date": 1447694803, "creation_date": 1447694803, "answer_id": 33741160, "question_id": 33638307, "link": "https://stackoverflow.com/questions/33638307/api-call-throwing-ssl-connect-error/33741160#33741160", "title": "API call throwing SSL_connect error", "body": "<p>You will have to basically bypass the SSL ceritificate validation while connecting to a webservice running on SSL. You can do so by using the following snippet of code</p>\n\n<pre><code> uri = URI.parse(url)\n http = Net::HTTP.new(uri.host, uri.port)\n http.use_ssl = (uri.scheme == 'https')\n http.verify_mode = OpenSSL::SSL::VERIFY_NONE\n request = Net::HTTP::Post.new(uri.request_uri)\n response = http.request(request)\n dashboard = JSON.parse(resp.body)\n</code></pre>\n\n<p>So basically <code>http.verify_mode = OpenSSL::SSL::VERIFY_NONE</code> is the line of code that bypasses the certificate validation.\nI hope it helps</p>\n"}], "owner": {"reputation": 37, "user_id": 5183339, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/efcc985506e7368a75cc4d81de82501b?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/5183339/andy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 383, "favorite_count": 0, "closed_date": 1447967259, "answer_count": 1, "score": 1, "last_activity_date": 1447694803, "creation_date": 1447184898, "last_edit_date": 1447189411, "question_id": 33638307, "link": "https://stackoverflow.com/questions/33638307/api-call-throwing-ssl-connect-error", "closed_reason": "Duplicate", "title": "API call throwing SSL_connect error", "body": "<p>I'm getting this error:</p>\n\n<pre><code>Not a duplicated SSL_connect returned=1 errno=0 state=error: certificate verify failed OS El Capitan\n</code></pre>\n\n<p>While using this code to make API calls:</p>\n\n<pre><code>require 'json'\nrequire 'net/http'\nurl = 'https://touch-rate.com/o/analytics/dashboard?api_key='+ENV[\"API_KEY\"]+'&amp;app_id='+ENV[\"APP_ID\"]%&gt;\nresp = Net::HTTP.get_response(URI.parse(url))\ndashboard = JSON.parse(resp.body)\n</code></pre>\n\n<p>My server was recently changed to a secure server and since then it has been throwing the above error. </p>\n\n<p>I've have tried every multiple options on Stackoverflow, but nothing seems to work, can somebody help me with why I'm getting this error?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1447182772, "post_id": 33637552, "comment_id": 55049411, "body": "The actions <code>insert</code>, <code>update</code>, <code>delete</code> and <code>replace</code> are each wrapped in a <code>commit</code> by Rails. This being said, most of your <code>commit</code> SQL actions probably are <code>insert</code>, <code>update</code> and stuff like that (to be confirmed!)"}, {"owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "edited": false, "score": 0, "creation_date": 1447183036, "post_id": 33637552, "comment_id": 55049542, "body": "I have no idea what you are asking or what you are trying to do. To save something to the database requires a commit at some point, one way or another."}, {"owner": {"reputation": 31092, "user_id": 1715121, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/6nEEr.jpg?s=128&g=1", "display_name": "Ele", "link": "https://stackoverflow.com/users/1715121/ele"}, "edited": false, "score": 0, "creation_date": 1447183154, "post_id": 33637552, "comment_id": 55049608, "body": "Probably he wants a trasaction and execute commit after updates, inserts, etc."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 4215601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tp3J5.jpg?s=128&g=1", "display_name": "Aaron Careaga", "link": "https://stackoverflow.com/users/4215601/aaron-careaga"}, "is_accepted": false, "score": 0, "last_activity_date": 1447183966, "creation_date": 1447183966, "answer_id": 33638078, "question_id": 33637552, "link": "https://stackoverflow.com/questions/33637552/save-activerecord-object-without-commit-rails-4/33638078#33638078", "title": "Save ActiveRecord object without commit rails 4", "body": "<p>I'm a little confused on your question, but have you tried using 'rails c' from the command line? You could get into the console to add a record to your database. For example:</p>\n\n<p>user = User.new(username: \"johndoe\", first_name: \"John\", last_name: \"Doe\")</p>\n\n<ul>\n<li><p>'.new' creates but does not save to the database</p></li>\n<li><p>user.save will then in turn commit record to database</p></li>\n<li><p>'.create' creates and saves the record to the database</p></li>\n</ul>\n"}], "owner": {"reputation": 21, "user_id": 5432820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8aa2b764028614da4cd9a845c7d4dda?s=128&d=identicon&r=PG&f=1", "display_name": "Evren Baykan", "link": "https://stackoverflow.com/users/5432820/evren-baykan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 338, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447183966, "creation_date": 1447182143, "last_edit_date": 1447182321, "question_id": 33637552, "link": "https://stackoverflow.com/questions/33637552/save-activerecord-object-without-commit-rails-4", "title": "Save ActiveRecord object without commit rails 4", "body": "<p>while I was investigating my mysql performance on my rails project, i noticed half of my querys are based on commit. IS there any way to create without commit ? </p>\n\n<p><a href=\"https://i.stack.imgur.com/6DRDM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6DRDM.png\" alt=\"source of the problem\"></a></p>\n\n<p>Thanks</p>\n\n<p>ruby 2.1.2\nrails 4.1.4</p>\n"}, {"tags": ["mysql", "sql", "ruby", "csv", "file-io"], "comments": [{"owner": {"reputation": 24080, "user_id": 1816093, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZImpg.jpg?s=128&g=1", "display_name": "Drew", "link": "https://stackoverflow.com/users/1816093/drew"}, "edited": false, "score": 0, "creation_date": 1447182341, "post_id": 33637512, "comment_id": 55049158, "body": "<a href=\"http://stackoverflow.com/q/2774808\">stackoverflow.com/q/2774808</a>"}, {"owner": {"reputation": 79, "user_id": 4322654, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/17504667/picture?type=large", "display_name": "ChrisD", "link": "https://stackoverflow.com/users/4322654/chrisd"}, "reply_to_user": {"reputation": 24080, "user_id": 1816093, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZImpg.jpg?s=128&g=1", "display_name": "Drew", "link": "https://stackoverflow.com/users/1816093/drew"}, "edited": false, "score": 0, "creation_date": 1447182482, "post_id": 33637512, "comment_id": 55049240, "body": "I&#39;ve tried a bunch of slash, none work. I&#39;m pretty sure it should be &#39;\\\\\\\\&#39;, but I&#39;ve tried up to 8 slashes, no go..."}, {"owner": {"reputation": 24080, "user_id": 1816093, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZImpg.jpg?s=128&g=1", "display_name": "Drew", "link": "https://stackoverflow.com/users/1816093/drew"}, "edited": false, "score": 0, "creation_date": 1447182619, "post_id": 33637512, "comment_id": 55049310, "body": "how about going the other bizarro way as seen <a href=\"http://stackoverflow.com/q/7173000\">stackoverflow.com/q/7173000</a>"}, {"owner": {"reputation": 79, "user_id": 4322654, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/17504667/picture?type=large", "display_name": "ChrisD", "link": "https://stackoverflow.com/users/4322654/chrisd"}, "reply_to_user": {"reputation": 24080, "user_id": 1816093, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZImpg.jpg?s=128&g=1", "display_name": "Drew", "link": "https://stackoverflow.com/users/1816093/drew"}, "edited": false, "score": 0, "creation_date": 1447183015, "post_id": 33637512, "comment_id": 55049528, "body": "good thought, but no go unfortunately."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1447185706, "post_id": 33637512, "comment_id": 55051105, "body": "I think your sql statement should be <code>INTO OUTFILE &#39;C:\\temp\\temp.csv&#39;</code>.  And as others pointed out, you shouldn&#39;t use forward slashes in paths on any OS anyway, so you should write:  <code>INTO OUTFILE &#39;C:&#47;temp&#47;temp.csv&#39;</code>--and then it doesn&#39;t matter if you use single quotes or double quotes because there are no escape sequences in the string."}, {"owner": {"reputation": 79, "user_id": 4322654, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/17504667/picture?type=large", "display_name": "ChrisD", "link": "https://stackoverflow.com/users/4322654/chrisd"}, "edited": false, "score": 0, "creation_date": 1447186440, "post_id": 33637512, "comment_id": 55051476, "body": "I&#39;ve tried this as well with no success."}, {"owner": {"reputation": 1078, "user_id": 4071171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d83da5d07e25227a9e448769bc86ca33?s=128&d=identicon&r=PG", "display_name": "Renaud Kern", "link": "https://stackoverflow.com/users/4071171/renaud-kern"}, "edited": false, "score": 0, "creation_date": 1447232404, "post_id": 33637512, "comment_id": 55067718, "body": "How do you connect to MySQL with ruby ?"}], "answers": [{"tags": [], "owner": {"reputation": 366, "user_id": 4885544, "user_type": "registered", "accept_rate": 36, "profile_image": "https://lh5.googleusercontent.com/-H0p6asvUOZI/AAAAAAAAAAI/AAAAAAAAAM4/FJqaX7xIMtQ/photo.jpg?sz=128", "display_name": "sclem72", "link": "https://stackoverflow.com/users/4885544/sclem72"}, "is_accepted": false, "score": 0, "last_activity_date": 1447188193, "creation_date": 1447188193, "answer_id": 33639234, "question_id": 33637512, "link": "https://stackoverflow.com/questions/33637512/using-ruby-to-create-csv-file-from-mysql-db-not-creating-file/33639234#33639234", "title": "Using Ruby to create CSV file from MySQL DB not creating file", "body": "<p>I have only taken a quick glance at this, but may switch out <code>File.exists?</code> for <code>Dir.exists?</code> since you are trying to create a directory and are checking if a FILE exists. I would map it out a little more clearer to something similar to this:</p>\n\n<pre><code>def temp_file\n  temp_directory = 'C:\\temp'\n  Dir.mkdir(temp_directory) unless Dir.exists?(temp_directory)\n  file = \"#{temp_directory}/temporary_csv.csv\"\nend\nFile.open(temp_file, 'w') &lt;&lt; SQL\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3773, "user_id": 991903, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J12Hi.jpg?s=128&g=1", "display_name": "Meier", "link": "https://stackoverflow.com/users/991903/meier"}, "is_accepted": true, "score": 0, "last_activity_date": 1447231940, "creation_date": 1447231940, "answer_id": 33647030, "question_id": 33637512, "link": "https://stackoverflow.com/questions/33637512/using-ruby-to-create-csv-file-from-mysql-db-not-creating-file/33647030#33647030", "title": "Using Ruby to create CSV file from MySQL DB not creating file", "body": "<p>You are not executing the SQL.</p>\n\n<p>the construct</p>\n\n<pre><code>&lt;&lt;-SQL\n  ...\nSQL\n</code></pre>\n\n<p>is just constructing a string with \"SQL\" as end marker</p>\n"}], "owner": {"reputation": 79, "user_id": 4322654, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/17504667/picture?type=large", "display_name": "ChrisD", "link": "https://stackoverflow.com/users/4322654/chrisd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 33647030, "answer_count": 2, "score": 0, "last_activity_date": 1447231940, "creation_date": 1447182013, "last_edit_date": 1447183637, "question_id": 33637512, "link": "https://stackoverflow.com/questions/33637512/using-ruby-to-create-csv-file-from-mysql-db-not-creating-file", "title": "Using Ruby to create CSV file from MySQL DB not creating file", "body": "<p>When I try to create a CSV file from a MySQL DB using ruby no file is created and no error is returned. This is on a Windows 10 machine.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>def dump_csv\n    Dir.mkdir 'C:\\temp'  unless File.exists? 'C:\\temp'\n    &lt;&lt;-SQL\n        SELECT *\n        FROM #{@table}\n        GROUP BY a, b, c, d\n        HAVING COUNT(*) &lt; 40\n        INTO OUTFILE 'C:\\\\\\\\temp\\\\\\\\temp.csv'\n        FIELDS TERMINATED BY ','\n    SQL\nend\n</code></pre>\n\n<p>I know it's not a permission error, because if I input that statement into MySQL directly it works just fine. Any ideas? Or another way of going about it?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "mongodb", "curl", "terminal"], "answers": [{"tags": [], "owner": {"reputation": 75, "user_id": 4154928, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000799419570/picture?type=large", "display_name": "Adam Hoffman", "link": "https://stackoverflow.com/users/4154928/adam-hoffman"}, "is_accepted": true, "score": 0, "last_activity_date": 1447187601, "creation_date": 1447187601, "answer_id": 33639059, "question_id": 33637202, "link": "https://stackoverflow.com/questions/33637202/mongodb-with-ruby-driver-how-to-create-fields-with-curl/33639059#33639059", "title": "MongoDB with Ruby driver how to create fields with curl?", "body": "<p>Figured it out! This creates the correct fields and their values.</p>\n\n<pre><code>curl -d 'name=adam&amp;last=hoffman' http://localhost:4567/new_document/?\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 4154928, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000799419570/picture?type=large", "display_name": "Adam Hoffman", "link": "https://stackoverflow.com/users/4154928/adam-hoffman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 33639059, "answer_count": 1, "score": 0, "last_activity_date": 1447187601, "creation_date": 1447180924, "question_id": 33637202, "link": "https://stackoverflow.com/questions/33637202/mongodb-with-ruby-driver-how-to-create-fields-with-curl", "title": "MongoDB with Ruby driver how to create fields with curl?", "body": "<p>I am sending the following curl request to my Ruby Driver</p>\n\n<pre><code>curl -i -X POST -H \"Content-Type:application/json\" -d '{  \"firstName\" : \"Frodo\",  \"lastName\" : \"Baggins\" }' http://localhost:4567/new_document/?\n</code></pre>\n\n<p>This is the code for the POST operation in ruby.</p>\n\n<pre><code>post '/new_document/?' do\n  content_type :json\n  db = settings.mongo_db\n  result = db.insert_one params\n  db.find(:_id =&gt; result.inserted_id).to_a.first.to_json\nend\n</code></pre>\n\n<p>I get the following response in the console.</p>\n\n<pre><code>HTTP/1.1 200 OK \nContent-Type: application/json\nContent-Length: 43\nX-Content-Type-Options: nosniff\nServer: WEBrick/1.3.1 (Ruby/2.0.0/2013-11-22)\nDate: Tue, 10 Nov 2015 18:38:59 GMT\nConnection: Keep-Alive\n\n{\"_id\":{\"$oid\":\"564239c3e89bde194d000007\"}}\n</code></pre>\n\n<p>As you can see the fields first and last name never get created. What am I doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2007, "user_id": 716039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76b302eed6a8add5db6b3f2e1c7c9942?s=128&d=identicon&r=PG", "display_name": "dinjas", "link": "https://stackoverflow.com/users/716039/dinjas"}, "edited": false, "score": 0, "creation_date": 1447180891, "post_id": 33637068, "comment_id": 55048379, "body": "<a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Migration.html\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActiveRecord/Migration.html</a> will explain migrations to you. I&#39;d recommend learning about the basics of both Rails and Ruby before trying to make sense of a bunch of code you don&#39;t understand. (e.g. learn about flow control, blocks, procs, lambdas, typing, etc)"}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 2, "creation_date": 1447180923, "post_id": 33637068, "comment_id": 55048401, "body": "This seems like more of a rant than a question, could you clarify your requirements?"}, {"owner": {"reputation": 1428, "user_id": 2730725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1a694df4d71660fc4d84ccbb92469e38?s=128&d=identicon&r=PG&f=1", "display_name": "user273072545345", "link": "https://stackoverflow.com/users/2730725/user273072545345"}, "edited": false, "score": 0, "creation_date": 1447181011, "post_id": 33637068, "comment_id": 55048455, "body": "@fergusq, I&#39;d recommend reading Black&#39;s Grounded Rubyist book. It&#39;s an awesome book, and very well-written. It&#39;ll help you."}, {"owner": {"reputation": 601, "user_id": 2740463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8c65f1c874968a28278a6b77707757d?s=128&d=identicon&r=PG", "display_name": "Karim Tarek", "link": "https://stackoverflow.com/users/2740463/karim-tarek"}, "edited": false, "score": 0, "creation_date": 1447181147, "post_id": 33637068, "comment_id": 55048528, "body": "<code>string</code>, <code>integer</code> and <code>date</code>, those are the types for your table columns that you or someone else on the project specified, you don&#39;t really need to reverse engineer Rails you just need to start there <a href=\"http://guides.rubyonrails.org/\" rel=\"nofollow noreferrer\">Ruby on Rails Guides</a>"}, {"owner": {"reputation": 179, "user_id": 4194997, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XtD0W.png?s=128&g=1", "display_name": "fergusq", "link": "https://stackoverflow.com/users/4194997/fergusq"}, "reply_to_user": {"reputation": 2007, "user_id": 716039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76b302eed6a8add5db6b3f2e1c7c9942?s=128&d=identicon&r=PG", "display_name": "dinjas", "link": "https://stackoverflow.com/users/716039/dinjas"}, "edited": false, "score": 0, "creation_date": 1447182090, "post_id": 33637068, "comment_id": 55049028, "body": "@dinjas, I know about migrations and ruby flow control. Thing is that I&#39;m unsure how to use the methods I don&#39;t know about. I know that they are column types. They are different for different databases (such as postresql and sqlite). How do I know which column types in which specific forms I must use?"}], "answers": [{"comments": [{"owner": {"reputation": 179, "user_id": 4194997, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XtD0W.png?s=128&g=1", "display_name": "fergusq", "link": "https://stackoverflow.com/users/4194997/fergusq"}, "edited": false, "score": 0, "creation_date": 1447181695, "post_id": 33637188, "comment_id": 55048816, "body": "The dock page for <code>create_table</code> is fine, but for example <code>respond_to</code>-page gives no information about types. And I really don&#39;t want to read much Rails&#39; source code to be able to use it."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 179, "user_id": 4194997, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XtD0W.png?s=128&g=1", "display_name": "fergusq", "link": "https://stackoverflow.com/users/4194997/fergusq"}, "edited": false, "score": 0, "creation_date": 1447185841, "post_id": 33637188, "comment_id": 55051170, "body": "@fergusq: &quot;And I really don&#39;t want to read much Rails&#39; source code&quot; - you don&#39;t need to. Just grab a good rails book and you should be good to go. I seldom find myself going to read the code itself, documentation is usually enough."}], "tags": [], "owner": {"reputation": 9, "user_id": 3558786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1025c40a0f8e37300eeb34949f8d30d?s=128&d=identicon&r=PG&f=1", "display_name": "kwngo", "link": "https://stackoverflow.com/users/3558786/kwngo"}, "is_accepted": false, "score": 0, "last_activity_date": 1447180877, "creation_date": 1447180877, "answer_id": 33637188, "question_id": 33637068, "link": "https://stackoverflow.com/questions/33637068/how-am-i-supposed-to-find-information-about-ror/33637188#33637188", "title": "How am I supposed to find information about RoR?", "body": "<p>Check out the API docks for Rails. You can find the source code and definition of the api. </p>\n\n<p>For the specific case of the \"create_table\" method. take a look at <a href=\"http://apidock.com/rails/ActiveRecord/ConnectionAdapters/SchemaStatements/create_table\" rel=\"nofollow\">http://apidock.com/rails/ActiveRecord/ConnectionAdapters/SchemaStatements/create_table</a>. It'll explain that this method takes a block, returning SQL.</p>\n"}, {"tags": [], "owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "is_accepted": true, "score": 1, "last_activity_date": 1447183675, "creation_date": 1447183675, "answer_id": 33637994, "question_id": 33637068, "link": "https://stackoverflow.com/questions/33637068/how-am-i-supposed-to-find-information-about-ror/33637994#33637994", "title": "How am I supposed to find information about RoR?", "body": "<p><code>create_table</code> is just a method. You'd find documentation for it in any of the locations for automatically generated method-level documentation for Rails. Such as:</p>\n\n<p><a href=\"http://apidock.com/rails/ActiveRecord/ConnectionAdapters/SchemaStatements/create_table\" rel=\"nofollow\">http://apidock.com/rails/ActiveRecord/ConnectionAdapters/SchemaStatements/create_table</a></p>\n\n<p>The <code>|t|</code> is a block parameter, in a block you are passing to the <code>create_table</code> method, that the <code>create_table</code> method will then call with one parameter. If you don't understand how blocks work in ruby, you will definitely have an easier time if you read up on that. It's not specific to Rails, it's part of the ruby language. </p>\n\n<p>So what type of object will <code>create_method</code> pass to the block argument?  The place you'd find this documented is in the <code>create_method</code> documentation, but indeed it does not seem to tell you. Other methods that take blocks may be more likely to be documented to tell you exactly what they'll pass (if it's not obvious), but it is a little bit annoying that it's not documented here. </p>\n\n<p>With <em>this particular</em> method, it's kind of an implementation detail what class the <code>|t|</code> is -- what matters is what you can do with it. Which is actually a key to the ruby philosophy of \"duck typing\" in general, what matters is what you can do with an object, not what class it is. But I agree that knowing what class it is -- even if it's basically an internal class that you'll never instantiate yourself, as it is in this case --  makes it a lot easier to find documentation explaining exactly what you can do with it.  If I were writing the documentation for <code>create_method</code>, I would have documented that. But I wasn't. </p>\n\n<p>I'm sorry in an SO answer we can only answer your questions, and not change Rails documentation or the nature or the ruby language or the ruby community's common practices to be more like you or I might prefer. </p>\n\n<p>In this case, people figure out what you can do with the <code>|t|</code> from the documentation above for <code>create_method</code>, or from the <a href=\"http://guides.rubyonrails.org/active_record_migrations.html\" rel=\"nofollow\">Rails migration guide</a>.  The Rails Guides are pretty good for getting an overall picture of how various components of Rails work.  But they do assume an audience that already knows ruby as a language, and is familiar with the web and programming in general. </p>\n\n<p>As it happens though, we're in luck, the Rails Migration Guide <em>does</em> tell us what that object is...</p>\n\n<blockquote>\n  <p>For more details and examples of individual methods, check the API documentation. In particular the documentation for ActiveRecord::ConnectionAdapters::SchemaStatements (which provides the methods available in the change, up and down methods), ActiveRecord::ConnectionAdapters::TableDefinition (which provides the methods available on the object yielded by create_table) and ActiveRecord::ConnectionAdapters::Table (which provides the methods available on the object yielded by change_table).</p>\n</blockquote>\n\n<p>So that's what the <code>|t|</code> is, an ActiveRecord::ConnectionAdapters::TableDefinition. (And perhaps you want to submit a pull request to Rails to add this bit of info to the method-level documentation of <code>create_table</code> etc themselves)</p>\n\n<p><code>ActiveRecord::ConnectionAdapters::TableDefinition</code> has got a tiny bit of automatically generated documentation here: <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/TableDefinition.html\" rel=\"nofollow\">http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/TableDefinition.html</a>  . Additionally, I'd guess that every individual database type (mysql vs postgres etc) has different concrete implementations of <code>ActiveRecord::ConnectionAdapters::TableDefinition</code></p>\n\n<p>But there isn't actually much there. As I said, in practice most developers don't really need to know more than what you can do with it as documented elsewhere. But I do understand your desire to know exactly what it is and what it does. Diving into the source is what most Rails developers would do at this point (or have done before to figure out exactly what class the object is, perhaps using a debugger).\nMost automatically generated ruby documentation, like the ones we've been looking at, include a link on every method to view source for that method, right inline with the documentation. I use it a lot, sometimes the source easily answers whatever question I had the English-written documentation didn't (and sometimes it doesn't). </p>\n\n<p>I understand you don't like that situation, I'm sorry I can't change reality for you in an SO answer! </p>\n"}], "owner": {"reputation": 179, "user_id": 4194997, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XtD0W.png?s=128&g=1", "display_name": "fergusq", "link": "https://stackoverflow.com/users/4194997/fergusq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 1, "closed_date": 1447230162, "accepted_answer_id": 33637994, "answer_count": 2, "score": -1, "last_activity_date": 1447185251, "creation_date": 1447180424, "last_edit_date": 1447185251, "question_id": 33637068, "link": "https://stackoverflow.com/questions/33637068/how-am-i-supposed-to-find-information-about-ror", "closed_reason": "Not suitable for this site", "title": "How am I supposed to find information about RoR?", "body": "<p>I have been recently asked to take part in a web service project. They use Ruby on Rails, and I have found it extremely hard to learn.</p>\n\n<p>The problem is that Ruby is a dynamic programming language with type information hided. I understand that this is a one way to program. What I don't understand, however, is why this type-hiding extends to the documentation.</p>\n\n<p>I haven't been able to find any information about method return types or parameter types in <a href=\"http://api.rubyonrails.org/\" rel=\"nofollow\">the rails api documentation</a>.</p>\n\n<p>An example. When doing migrations, we use <code>create_table</code> method.</p>\n\n<pre><code>create_table :post do |t|\n  t.integer :user_id\n  t.string :title\n  t.string :text\n  t.string :image\n  t.integer :category_id\n  t.date :date_available\n\n  t.timestamps\nend\n</code></pre>\n\n<p>There is that <code>t</code>. I don't want you to tell me what <code>t</code> is. I want to know where I can find out what it is. I want to know all about what methods it has, where these <code>string</code>, <code>integer</code> and <code>date</code> come from.</p>\n\n<p>Now I have to spend my time reverse-engineering rails code and finding ambiguous tutorials on the Internet. Is there a single place to find the return types and the parameter types of all rails classes. And the constants. And everything.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "email"], "comments": [{"owner": {"reputation": 562, "user_id": 1112633, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a3a8118d83fd2bf1975c210bd1fa531d?s=128&d=identicon&r=PG", "display_name": "MC2DX", "link": "https://stackoverflow.com/users/1112633/mc2dx"}, "edited": false, "score": 0, "creation_date": 1447180505, "post_id": 33636962, "comment_id": 55048173, "body": "Check it: <a href=\"http://www.hubspot.com/\" rel=\"nofollow noreferrer\">hubspot.com</a>."}, {"owner": {"reputation": 1, "user_id": 5547794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e965bd2e24bd6da65c39b701b16c0c7?s=128&d=identicon&r=PG&f=1", "display_name": "Sandeep Vasani", "link": "https://stackoverflow.com/users/5547794/sandeep-vasani"}, "reply_to_user": {"reputation": 562, "user_id": 1112633, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a3a8118d83fd2bf1975c210bd1fa531d?s=128&d=identicon&r=PG", "display_name": "MC2DX", "link": "https://stackoverflow.com/users/1112633/mc2dx"}, "edited": false, "score": 0, "creation_date": 1447181473, "post_id": 33636962, "comment_id": 55048699, "body": "What exactly should I check?"}, {"owner": {"reputation": 562, "user_id": 1112633, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a3a8118d83fd2bf1975c210bd1fa531d?s=128&d=identicon&r=PG", "display_name": "MC2DX", "link": "https://stackoverflow.com/users/1112633/mc2dx"}, "edited": false, "score": 0, "creation_date": 1447181528, "post_id": 33636962, "comment_id": 55048729, "body": "Hubspot is a service which allows you to track messages and behaviour of yours on pages etc."}, {"owner": {"reputation": 1, "user_id": 5547794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e965bd2e24bd6da65c39b701b16c0c7?s=128&d=identicon&r=PG&f=1", "display_name": "Sandeep Vasani", "link": "https://stackoverflow.com/users/5547794/sandeep-vasani"}, "reply_to_user": {"reputation": 562, "user_id": 1112633, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a3a8118d83fd2bf1975c210bd1fa531d?s=128&d=identicon&r=PG", "display_name": "MC2DX", "link": "https://stackoverflow.com/users/1112633/mc2dx"}, "edited": false, "score": 0, "creation_date": 1447181639, "post_id": 33636962, "comment_id": 55048787, "body": "Ah yes. Just saw their email offering. Using 3rd party software is an option but it&#39;s the last resort. The preference is to look for a Ruby gem that I can directly use in my current code base."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5547794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e965bd2e24bd6da65c39b701b16c0c7?s=128&d=identicon&r=PG&f=1", "display_name": "Sandeep Vasani", "link": "https://stackoverflow.com/users/5547794/sandeep-vasani"}, "edited": false, "score": 0, "creation_date": 1447224387, "post_id": 33637533, "comment_id": 55064411, "body": "Yup. I did check out this gem before posting the question. The invisible pixel lets you track the email opening event but not the email attachment opening event, which is what I&#39;m after."}, {"owner": {"reputation": 562, "user_id": 1112633, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a3a8118d83fd2bf1975c210bd1fa531d?s=128&d=identicon&r=PG", "display_name": "MC2DX", "link": "https://stackoverflow.com/users/1112633/mc2dx"}, "reply_to_user": {"reputation": 1, "user_id": 5547794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e965bd2e24bd6da65c39b701b16c0c7?s=128&d=identicon&r=PG&f=1", "display_name": "Sandeep Vasani", "link": "https://stackoverflow.com/users/5547794/sandeep-vasani"}, "edited": false, "score": 0, "creation_date": 1447239519, "post_id": 33637533, "comment_id": 55071591, "body": "You can always write this functionality and open PR, also have an influence on the community and pay technical debt."}], "tags": [], "owner": {"reputation": 562, "user_id": 1112633, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a3a8118d83fd2bf1975c210bd1fa531d?s=128&d=identicon&r=PG", "display_name": "MC2DX", "link": "https://stackoverflow.com/users/1112633/mc2dx"}, "is_accepted": false, "score": 1, "last_activity_date": 1447182065, "creation_date": 1447182065, "answer_id": 33637533, "question_id": 33636962, "link": "https://stackoverflow.com/questions/33636962/ruby-gem-to-track-email/33637533#33637533", "title": "Ruby gem to track email", "body": "<p><a href=\"https://github.com/ankane/ahoy_email\" rel=\"nofollow\">ahoy_email</a> is a gem which allows you to track emails and it adds invisible pixel to each email you send.</p>\n"}], "owner": {"reputation": 1, "user_id": 5547794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e965bd2e24bd6da65c39b701b16c0c7?s=128&d=identicon&r=PG&f=1", "display_name": "Sandeep Vasani", "link": "https://stackoverflow.com/users/5547794/sandeep-vasani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 1, "closed_date": 1447806194, "answer_count": 1, "score": -1, "last_activity_date": 1447182065, "creation_date": 1447179950, "last_edit_date": 1447181515, "question_id": 33636962, "link": "https://stackoverflow.com/questions/33636962/ruby-gem-to-track-email", "closed_reason": "Not suitable for this site", "title": "Ruby gem to track email", "body": "<p>I'm trying to find a Ruby gem to track opening of email attachments. I've found many that let you track the email opening event and tracking links within emails. But I have a specific requirement of tracking attachment opening events. Has anyone come across a Ruby gem that does this?</p>\n\n<p>Also, I've read about methods to implement this using custom code using 1x1 pixel image. But I'm interested in an already existing implementation in the form of a Ruby gem.</p>\n"}]