[{"tags": ["arrays", "ruby", "amazon-web-services"], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 1, "last_activity_date": 1499299298, "creation_date": 1499299298, "answer_id": 44937776, "question_id": 44937668, "link": "https://stackoverflow.com/questions/44937668/how-to-incorporate-an-array-in-an-cli-command-in-ruby/44937776#44937776", "title": "how to incorporate an array in an CLI command in ruby", "body": "<p>If you want to interpolate you'll need to request interpolation:</p>\n\n<pre><code>j = `aws ... arn:aws:iam::#{accnt[0]}:policy...`\n</code></pre>\n\n<p>Strings are only interpolated if you use the <code>#{...}</code> notation to indicate you want that part to be expanded. In your acase <code>accnt[0]</code> is just plain text that's part of the string.</p>\n\n<p>You'll probably want to expand your code to be more like this:</p>\n\n<pre><code>accnt.each do |id|\n  j = `aws ... arn:aws:iam::#{id}:policy...`\n  # ...Other code relating to parsing/printing for this round\nend\n</code></pre>\n\n<p>Don't forget that the AWS Ruby library can do everything the command-line <code>aws</code> tool can do and more, so engaging the shell here is probably not necessary. The <a href=\"http://docs.aws.amazon.com/sdkforruby/api/Aws/IAM/Policy.html\" rel=\"nofollow noreferrer\">Aws::IAM::Policy</a> class should be able to get what you need.</p>\n"}], "owner": {"reputation": 25, "user_id": 8196724, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/307f53fe026f6d37acc49573df5b4b0b?s=128&d=identicon&r=PG&f=1", "display_name": "koushiskool", "link": "https://stackoverflow.com/users/8196724/koushiskool"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 44937776, "answer_count": 1, "score": 0, "last_activity_date": 1499299298, "creation_date": 1499298468, "question_id": 44937668, "link": "https://stackoverflow.com/questions/44937668/how-to-incorporate-an-array-in-an-cli-command-in-ruby", "title": "how to incorporate an array in an CLI command in ruby", "body": "<p>I am having an hard time, implementing an array in an AWS cli command in ruby. \nI have a set of accounts, I want to get the policy version details of a specific policy from an specific account number. I want to loop through the account numbers and get the specific policy details for the account numbers. </p>\n\n<p>HERE IS MY CURRENT CODE, it works when I hard code the account number</p>\n\n<pre><code>require 'aws-sdk'\nrequire 'json'\nrequire 'rest-client'\n\nputs \"Here is the current version of the CloudHealth Policy\"\n\naccnt  = [899163431116, 2382308203823, 8989089089080]\nputs \"here is the zero index\" \nputs accnt [0]\nj = `aws iam get-policy-version --policy-arn arn:aws:iam::899163431116:policy/cloudhealth-access-policy --version-id v2 --profile jo`\nmy_hash = JSON.parse(j)\nputs JSON.pretty_generate my_hash[\"PolicyVersion\"]\n</code></pre>\n\n<p>I WANT TO INCORPORATE THE ARRAY accnt, SO I CAN LOOP Through the accnt numbers with an hard coding in the cli command</p>\n\n<pre><code> require 'aws-sdk'\nrequire 'json'\nrequire 'rest-client'\n\nputs \"Here is the current version of the CloudHealth Policy\"\n\naccnt = [899163431116, 2382308203823, 8989089089080]\nputs \"here is the zero index\" \nputs accnt[0]\nj = `aws iam get-policy-version --policy-arn arn:aws:iam::accnt[0]:policy/cloudhealth-access-policy --version-id v2 --profile jo`\nmy_hash = JSON.parse(j)\nputs JSON.pretty_generate my_hash[\"PolicyVersion\"]\n</code></pre>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 1142, "user_id": 3562561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5455f5135299cdb6b4640148fa176f9f?s=128&d=identicon&r=PG", "display_name": "treiff", "link": "https://stackoverflow.com/users/3562561/treiff"}, "edited": false, "score": 2, "creation_date": 1499299019, "post_id": 44937664, "comment_id": 76851810, "body": "You need a <code>do</code> to complete your block. <code>it &quot;called&quot; do</code>"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 2, "creation_date": 1499299111, "post_id": 44937664, "comment_id": 76851831, "body": "Likewise for <code>describe C do</code>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1499308900, "post_id": 44937664, "comment_id": 76854143, "body": "What is your question?"}], "answers": [{"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 0, "last_activity_date": 1499299502, "creation_date": 1499299502, "answer_id": 44937802, "question_id": 44937664, "link": "https://stackoverflow.com/questions/44937664/rspec-test-if-a-method-is-called-from-a-method/44937802#44937802", "title": "rspec: test if a method is called from a method", "body": "<p>Here is a fixed version of your code:</p>\n\n<pre><code>class C \n  def foo1\n    puts \"called\"\n  end \n\n  def foo\n    puts foo1\n  end \nend\n\n\n\ndescribe C do\n  it \"called\" do\n    c = C.new\n    expect(c).to receive(:foo1)\n    c.foo\n  end\nend\n</code></pre>\n\n<ul>\n<li>The <code>describe</code> and <code>it</code> blocks need complete <code>do ... end</code> syntax in order to be valid language.</li>\n<li>Fixed your expectation. Reading the code is fairly self-explanatory, but basically you need to define your expectation against the correct object.</li>\n<li>(<a href=\"https://github.com/bbatsov/ruby-style-guide\" rel=\"nofollow noreferrer\">Style-guide compliance</a>) Use two spaces per indentation level (aka soft tabs). No hard tabs.</li>\n</ul>\n"}], "owner": {"reputation": 1840, "user_id": 4619179, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-16inNBUDudM/AAAAAAAAAAI/AAAAAAAAAFY/QCrPyUVp4_Q/photo.jpg?sz=128", "display_name": "ojas", "link": "https://stackoverflow.com/users/4619179/ojas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 387, "favorite_count": 0, "accepted_answer_id": 44937802, "answer_count": 1, "score": -1, "last_activity_date": 1499299502, "creation_date": 1499298444, "question_id": 44937664, "link": "https://stackoverflow.com/questions/44937664/rspec-test-if-a-method-is-called-from-a-method", "title": "rspec: test if a method is called from a method", "body": "<p>I want to test if the method foo1 is called from foo. Here is my code</p>\n\n<pre><code>class C \n\n    def foo1\n        puts \"called\"\n    end \n\n    def foo\n        puts foo1\n    end \n\nend\n\n\n\n\ndescribe C\n    it \"called\"\n            expect(C.new.foo).to receive(:foo1)\n    end\nend\n</code></pre>\n\n<p>But i am getting below error on line <code>expect(foo_).to receive(:foo1)</code>:  </p>\n\n<pre><code>syntax error, unexpected keyword_end, expecting end-of-input\n</code></pre>\n"}, {"tags": ["ruby", "jenkins", "ascii"], "owner": {"reputation": 555, "user_id": 2067143, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e9e68f691681a79bdbd0b6ae32f20dbd?s=128&d=identicon&r=PG&f=1", "display_name": "danksim", "link": "https://stackoverflow.com/users/2067143/danksim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 605, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1527574477, "creation_date": 1499297834, "last_edit_date": 1499298369, "question_id": 44937586, "link": "https://stackoverflow.com/questions/44937586/invalid-byte-sequence-in-us-ascii-only-in-jenkins", "title": "invalid byte sequence in US-ASCII only in Jenkins", "body": "<p>I keep getting this in Jenkins when running capybara/rspec integration tests:</p>\n\n<pre><code>/root/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/rspec-core-3.4.4/lib/rspec/core/source.rb:23:in `split': invalid byte sequence in US-ASCII (ArgumentError)\n</code></pre>\n\n<p>Runs fine locally and on Sauce Labs but fails during the nightly Jenkins jobs using Sauce Labs</p>\n\n<p>Configure -> Build -> Execute Shell:</p>\n\n<pre><code>export LANG=en_US.UTF-8\nexport LANGUAGE=en_US.UTF-8\nexport LC_ALL=en_US.UTF-8\nexport LC_CTYPE=en_US.UTF-8\nbundle\nrspec ./test\n</code></pre>\n\n<p>This doesn't allow me to set <code>LC_ALL</code> but sets the rest to <code>US.UTF-8</code>:</p>\n\n<pre><code>+ export LANG=en_US.UTF-8\n+ LANG=en_US.UTF-8\n+ export LANGUAGE=en_US.UTF-8\n+ LANGUAGE=en_US.UTF-8\n+ export LC_ALL=en_US.UTF-8\n+ LC_ALL=en_US.UTF-8\n/tmp/hudson4925070278170448562.sh: line 4: warning: setlocale: LC_ALL: cannot change locale (en_US.UTF-8)\n+ export LC_CTYPE=en_US.UTF-8\n+ LC_CTYPE=en_US.UTF-8\n+ bundle\n</code></pre>\n\n<p>Am I missing something?</p>\n\n<p>Also, is adding double quotes crucial?</p>\n\n<pre><code>export LANG=\"en_US.UTF-8\"\nexport LANGUAGE=\"en_US.UTF-8\"\nexport LC_ALL=\"en_US.UTF-8\"\nexport LC_CTYPE=\"en_US.UTF-8\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "pdf", "amazon-s3", "carrierwave"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1499297908, "post_id": 44937452, "comment_id": 76851555, "body": "There&#39;s a lot of (irrelevant) stuff going on in your code, which makes it hard to see what the actual problem is ... Can you try to produce a <i>minimal</i> example that demonstrates the issue? See: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 0, "creation_date": 1499300798, "post_id": 44937452, "comment_id": 76852200, "body": "Looks like you&#39;re double looping. try this: <a href=\"https://gist.github.com/BKSpurgeon/4d7b6ac8a5c3d6eef45b77cdd5c4556f\" rel=\"nofollow noreferrer\">gist.github.com/BKSpurgeon/4d7b6ac8a5c3d6eef45b77cdd5c4556f</a>"}], "owner": {"reputation": 696, "user_id": 7314004, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/95806024183ca05eed5c8a100c610ce8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter H&#248;jlund Andersen", "link": "https://stackoverflow.com/users/7314004/peter-h%c3%b8jlund-andersen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1499296855, "creation_date": 1499296855, "question_id": 44937452, "link": "https://stackoverflow.com/questions/44937452/carrierwave-pdf-local-upload-duplicates-on-fog-not-doing-it-on-file", "title": "Carrierwave pdf local upload duplicates on :fog. Not doing it on :file", "body": "<p>I have a very strange bug i been fighting with for a day now. </p>\n\n<p>I'm trying to make an automatic uploader for uploading hundreds of PDF-files and putting them into categories from my local computer to my remote Amazon s3 server using Carrierwave. </p>\n\n<p>When i run it with :file in my pdf_uploader everything is working as it should be, but when i run it with fog trying to save them on the Amazon s3 server everything is duplicated. And not like 1,1,2,2,3,3 but 1,2,3,1,2,3 </p>\n\n<p><em>(i already have two image_uploaders and i tried uploading from a local directory earlier on with images, so the server and connection should be set up right)</em></p>\n\n<p>Here are my files:</p>\n\n<pre><code>#routes.rb \nget \"upload_pdfs/now\" =&gt; \"pdf_categories#upload_pdfs\", as: \"upload_pdfs\"\n</code></pre>\n\n<hr>\n\n<pre><code>#pdf_categories_controller.rb\ndef upload_pdfs\n\n    path = \"/Users/bruger/Desktop/DENHER\"\n\n    Dir.foreach(path) do |category_path|\n\n        next if folder_or_file_excluded? category_path\n        pdf_category = PdfCategory.create!(title: category_path)\n\n        Dir.foreach(\"#{path}/#{category_path}\") do |file_path|  \n\n            next if folder_or_file_excluded? file_path\n\n            pdf_file_without_file_ending = remove_last_obj_in_arr file_path.split(\".\")\n\n\n                new_pdf = Pdf.new(\n                            title: pdf_file_without_ending,\n                            pdf_category_id: pdf_category.id,\n                            )\n\n                #### SOMETHING IS HAPPENING HERE! ###\n                File.open(path + \"/\" + category_path + \"/\" + file_path) do |file_from_path|\n                    new_pdf.file = file_from_path\n                    new_pdf.save!\n                end\n                #### SOMETHING IS HAPPENING HERE! ###\n\n        end # file_path\n\n    end # category_path\n    redirect_to root_path\nend\n\ndef is_integer? thing\n    thing.to_i.to_s == thing\nend \n\ndef remove_last_obj_in_arr array\n    new_array = array.first array.size - 1\n    new_array.join(\".\")\nend\n\ndef folder_or_file_excluded? folder_file\n    list = %w(Fravalgt Fravalg Valgt fra fravalg fravalgt JPEG . .git DS_Store .. .DS_Store image_upload.rb)\n    list.include? folder_file   \nend\n</code></pre>\n\n<hr>\n\n<pre><code>#pdf_uploader.rb\nclass PdfUploader &lt; CarrierWave::Uploader::Base\n\n      storage :fog\n\n      def store_dir\n        \"pdf/#{mounted_as}/#{model.id}\"\n      end\n\n      def extension_whitelist\n        %w(pdf PDF)\n      end\n\n    end\n</code></pre>\n\n<p>Have you experienced anything like this or do you have a clue? </p>\n\n<p>Please. Any help will be appreciated!</p>\n"}, {"tags": ["ruby", "string"], "comments": [{"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 1, "creation_date": 1499297484, "post_id": 44937379, "comment_id": 76851438, "body": "string[0] is not string(0)"}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 8191894, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uv4ZBZPCf4A/AAAAAAAAAAI/AAAAAAAAAEM/_lFzez0TWlk/photo.jpg?sz=128", "display_name": "Arthur Brophy", "link": "https://stackoverflow.com/users/8191894/arthur-brophy"}, "is_accepted": false, "score": 1, "last_activity_date": 1499298641, "creation_date": 1499298641, "answer_id": 44937697, "question_id": 44937379, "link": "https://stackoverflow.com/questions/44937379/i-need-to-do-the-piglatin-exercise-in-ruby/44937697#44937697", "title": "I need to do the piglatin exercise in ruby", "body": "<p>An elegant solution would be to to concatenate slices of the string, using same syntax as you would with an array, with 'ay' in a neat one liner:</p>\n\n<pre><code>string[1..-1] + string[0] + 'ay'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1499300553, "post_id": 44937884, "comment_id": 76852139, "body": "rubydoc says <a href=\"http://www.rubydoc.info/github/rubyworks/facets/String%3Arotate\" rel=\"nofollow noreferrer\"><code>String#rotate</code></a>, but running in Ruby 2.4.1 I got <code>undefined method &#39;rotate&#39; for string:String</code>."}, {"owner": {"reputation": 13, "user_id": 8261799, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QGtQd.jpg?s=128&g=1", "display_name": "willievantonder", "link": "https://stackoverflow.com/users/8261799/willievantonder"}, "edited": false, "score": 0, "creation_date": 1499301888, "post_id": 44937884, "comment_id": 76852442, "body": "Thank you. Yes I just needed to test for a single, lowercase consonant first. Thanks for your help."}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 1, "last_activity_date": 1499301800, "last_edit_date": 1499301800, "creation_date": 1499300155, "answer_id": 44937884, "question_id": 44937379, "link": "https://stackoverflow.com/questions/44937379/i-need-to-do-the-piglatin-exercise-in-ruby/44937884#44937884", "title": "I need to do the piglatin exercise in ruby", "body": "<p>I guess what you want to do with <code>string(0)</code> is to get the first character in the string, in such case you'd need to do it with square brackets <code>string[0]</code>.</p>\n\n<p>When you do <code>string - string[0]</code> to take out the first character from the string, and assign this to a variable called <code>new_word</code> then you get an <code>undefined method</code>-'<code>error, that's because you can't use</code>-` for such operation, you could take a certain number of characters from the string when there's no the first one and assign it to that variable like:</p>\n\n<pre><code>p 'the'[1..-1]\n#\u00a0=&gt; \"he\"\n</code></pre>\n\n<p>So that gives you the characters from the string in a range from 1 up to the last element (<code>-1</code>).</p>\n\n<p>I could say when you do <code>pig_latin_word = new_word &lt;&lt; consonant &lt;&lt; \"ay\"</code>, it'd be easier if you just <code>return</code> the last evaluated expression, this way and as you're not using the <code>pig_latin_word</code> variable, you can interpolate your variables with the <code>\"ay\"</code> ending and this will be what the methods return in the case the the first character of the string isn't a lowercase vowel, so, something like this would make your code work:</p>\n\n<pre><code>vowels = [\"a\", \"e\", \"i\", \"o\", \"u\"]\nif vowels.include? (string[0])\n  string +'ay'\nelse\n  consonant = string[0]\n  new_word = string[1..-1]\n  \"#{new_word}#{consonant}ay\"\nend\n</code></pre>\n\n<p>But still I'm not sure, do you have to validate for every word within a sentence being passed?. In such case that would add \"ay\" just to the last word of the string, if a single word is passed then it works, but with a sentence like <code>'the quick brown fox'</code> then it'd return <code>\"he quick brown foxtay\"</code>.</p>\n\n<p>And/or in the case you check if the first character of the string is a vowel, you check just for lowercase vowel, in the case it'd be an uppercase vowel, that would make it look like:</p>\n\n<pre><code>p translate('apple')\n# =&gt; \"appleay\"\np translate('Apple')\n# =&gt; \"ppleAay\"\n</code></pre>\n\n<p>It moves your <code>A</code> first character to the end of the string and the adds <code>ay</code>.</p>\n\n<p>What you could do is to <code>split</code> your string being passed as argument - this way if it's a sentence, you get every word, and if is a single word, then it'd work too - and check if every of the first character of them match with a vowel, uppercase and lowercase, and if so then you return just the <code>word</code> plus <code>\"ay\"</code>, and if it's not, then you get every character from the word, make from this an array, and rotate them one character, this way if the string being passed is <code>'the quick brown fox'</code> you get <code>\"het uickq rownb oxf\"</code>, then as it's an array, you join them and add the <code>ay</code> ending, and then over your \"mapped\" string, you use join to join each word with a whitespace, something like:</p>\n\n<pre><code>def translate(string)\n  string.split.map do |word|\n    if /\\A[aeiou]/i.match(word)\n      \"#{word}ay\"\n    else\n      \"#{word.chars.rotate(1).join}ay\"\n    end\n  end.join(' ')\nend\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8261799, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QGtQd.jpg?s=128&g=1", "display_name": "willievantonder", "link": "https://stackoverflow.com/users/8261799/willievantonder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 44937884, "answer_count": 2, "score": 1, "last_activity_date": 1499301800, "creation_date": 1499296311, "question_id": 44937379, "link": "https://stackoverflow.com/questions/44937379/i-need-to-do-the-piglatin-exercise-in-ruby", "title": "I need to do the piglatin exercise in ruby", "body": "<p>I need to check if a word starts with a vowel or consonant. For words starting with a vowel I need to ad \"ay\" to the end of the word. This part was easy. I managed it like this:  </p>\n\n<pre><code>def translate string\n  vowels = [\"a\", \"e\", \"i\", \"o\", \"u\"]\n   if vowels.include? (string[0])\n   string +'ay'\n  else\n   *the consonant part goes here*\n  end\nend\n</code></pre>\n\n<p>I need help with the syntax for the consonant part. If a word begins with a consonant sound, move it to the end of the word, and then add an \"ay\" sound to the end of the word.\nHere's what I'm trying to do in the else part of my if statement:  </p>\n\n<pre><code>consonant = string(0)\nnew_word = string - string(0)\npig_latin_word = new_word &lt;&lt; consonant &lt;&lt; \"ay\"\n</code></pre>\n\n<p>Thank you.</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "pusher"], "answers": [{"comments": [{"owner": {"reputation": 4667, "user_id": 268673, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/33abb5182937ebcc3765f224aa74c16d?s=128&d=identicon&r=PG", "display_name": "AndreDurao", "link": "https://stackoverflow.com/users/268673/andredurao"}, "edited": false, "score": 0, "creation_date": 1499349633, "post_id": 44940950, "comment_id": 76877228, "body": "leesio If I do that I&#39;ll broadcast an event to everyone that is subscribed to that channel. What I want is to trigger an event directly to a single channel and ensure that only authenticated users should receive the event."}, {"owner": {"reputation": 691, "user_id": 4457241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f54c5d492ac81e8b425bd2fefcc9eb1?s=128&d=identicon&r=PG&f=1", "display_name": "leesio", "link": "https://stackoverflow.com/users/4457241/leesio"}, "reply_to_user": {"reputation": 4667, "user_id": 268673, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/33abb5182937ebcc3765f224aa74c16d?s=128&d=identicon&r=PG", "display_name": "AndreDurao", "link": "https://stackoverflow.com/users/268673/andredurao"}, "edited": false, "score": 2, "creation_date": 1499350312, "post_id": 44940950, "comment_id": 76877824, "body": "@AndreDurao In your example, you&#39;ll be broadcasting your event to all subscribers <i>except</i> the socket you specify! Since your channel is private only authenticated users are able to subscribe anyway. I&#39;m afraid there is no way to broadcast an event to an individual socket. If you want to broadcast events to individual clients, one way to do it is by assigning each client their own private channel."}], "tags": [], "owner": {"reputation": 691, "user_id": 4457241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f54c5d492ac81e8b425bd2fefcc9eb1?s=128&d=identicon&r=PG&f=1", "display_name": "leesio", "link": "https://stackoverflow.com/users/4457241/leesio"}, "is_accepted": false, "score": 4, "last_activity_date": 1499321168, "creation_date": 1499321168, "answer_id": 44940950, "question_id": 44937225, "link": "https://stackoverflow.com/questions/44937225/sending-pusher-events-on-private-channels/44940950#44940950", "title": "Sending Pusher events on private channels", "body": "<p>It looks like you're excluding your subscriber from the broadcast as described <a href=\"https://pusher.com/docs/server_api_guide/server_excluding_recipients\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Try removing the fourth argument from your trigger call:</p>\n\n<pre><code>Pusher.trigger('private-channel_test', 'greet', {greet: 'hello world'})\n</code></pre>\n"}], "owner": {"reputation": 4667, "user_id": 268673, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/33abb5182937ebcc3765f224aa74c16d?s=128&d=identicon&r=PG", "display_name": "AndreDurao", "link": "https://stackoverflow.com/users/268673/andredurao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1886, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1499321168, "creation_date": 1499295159, "question_id": 44937225, "link": "https://stackoverflow.com/questions/44937225/sending-pusher-events-on-private-channels", "title": "Sending Pusher events on private channels", "body": "<p>I'm doing some tests on Pusher and I've created an authentication method for private channels following the docs and the auth is working like expected.</p>\n\n<p>(docs: <a href=\"https://pusher.com/docs/authenticating_users#implementing_endpoints\" rel=\"nofollow noreferrer\">https://pusher.com/docs/authenticating_users#implementing_endpoints</a>)</p>\n\n<p>This is the script that I'm using for subscribing into channels using JSONP:</p>\n\n<pre><code>&lt;script&gt;\n  Pusher.logToConsole = true;\n  var pusher = new Pusher('&lt;%= ENV['PUSHER_KEY'] %&gt;', {\n    cluster: 'us2',\n    encrypted: true,\n    authTransport: 'jsonp',\n    authEndpoint: '/pusher_jsonp_auth',\n  });\n\n  var channel = pusher.subscribe(\"private-channel_test\");\n  channel.bind('pusher:subscription_succeeded', function() {\n    console.log(\"PVT channel\");\n  });\n  channel.bind('greet', function(data) {\n    console.log(data);\n  });\n&lt;/script&gt;\n</code></pre>\n\n<p>The channel was correctly subscribed, OK!\nThe messages I've got on browser's console:</p>\n\n<pre><code>Pusher : State changed : connecting -&gt; connected with new socket ID 163.232688\npusher.min.js:8 Pusher : Event sent : {\"event\":\"pusher:subscribe\",\"data\":{\"auth\":\"1e38f997c10796c55093:4e9e160585dc7c49da68da98e281860c1461ddf7c1b37688aa2fde581b482093\",\"channel\":\"private-channel_test\"}}\npusher.min.js:8 Pusher : Event recd : {\"event\":\"pusher_internal:subscription_succeeded\",\"data\":{},\"channel\":\"private-channel_test\"}\nhome:35 PVT channel\n</code></pre>\n\n<p>On the backend I've triggered an event to that channel using the socket_id:\nUsing the ruby pusher gem, I've sent messages like this:</p>\n\n<pre><code>Pusher.trigger('private-channel_test', 'greet', {greet: 'hello world'}, {socket_id: \"163.232688\"})\n</code></pre>\n\n<p>The events are sent OK to Pusher, as seen on Debug Console:</p>\n\n<p><a href=\"https://i.stack.imgur.com/aYJUI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aYJUI.png\" alt=\"Pusher Debug console\"></a></p>\n\n<p>But the events are not received on the frontend, and the bind function never runs when using <code>socket_id</code> and Pusher treats these events as <code>API Messages</code></p>\n\n<p>Anybody knows what am I doing wrong?</p>\n\n<p>Is this code related or is my understanding of so called <code>Private Channels</code> is wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "e-commerce", "shopping-cart"], "answers": [{"tags": [], "owner": {"reputation": 320, "user_id": 6501234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e980b8b7894381f8d85eb060b7b0cbf?s=128&d=identicon&r=PG", "display_name": "Corey Gibson", "link": "https://stackoverflow.com/users/6501234/corey-gibson"}, "is_accepted": false, "score": 0, "last_activity_date": 1499311877, "creation_date": 1499311877, "answer_id": 44939337, "question_id": 44936975, "link": "https://stackoverflow.com/questions/44936975/change-quantity-in-rails-shopping-cart/44939337#44939337", "title": "Change quantity in Rails shopping cart", "body": "<p>There are a number of different ways that this could be accomplished. I guess the easiest way would be to create a method in your cart controller</p>\n\n<p>say...   </p>\n\n<pre><code>def update_quantity\n  @line_item.update_attribute(:quantity)\nend\n</code></pre>\n\n<p>Then in your view, you can build out a from selector</p>\n\n<pre><code>&lt;%= form_for line_item do |f| %&gt;\n  &lt;%= f.select_tag :quantity, 'options_for_quantity' %&gt;\n  &lt;%= f.submit, method: :patch %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>That should handle most of what you are looking for. </p>\n"}], "owner": {"reputation": 79, "user_id": 6642140, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b8b510cacc3d1adc8b132654f56fc420?s=128&d=identicon&r=PG&f=1", "display_name": "matt", "link": "https://stackoverflow.com/users/6642140/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 868, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1499311877, "creation_date": 1499293704, "last_edit_date": 1499294182, "question_id": 44936975, "link": "https://stackoverflow.com/questions/44936975/change-quantity-in-rails-shopping-cart", "title": "Change quantity in Rails shopping cart", "body": "<p>I am new to Ruby on Rails. I have built a shopping cart for a sample online store, and I have a shopping cart that I can add items to. If I want to increase the quantity, I have to go back to the product page and add it again. The only way I have to remove a product is to click the Empty Cart button to remove everything.</p>\n\n<p>I am trying to find a way to have the quantity displayed in a number selector of some sort, with the current quantity set as the default value. If the quantity is changed within the cart, then the page will likely need to be refreshed so that the total price can be updated as well. If the quantity is set to 0, then the line item would ideally be removed from the cart.</p>\n\n<p>I am lost when it comes to how to actually implement these features though. Any help would be greatly appreciated.</p>\n\n<p>Here is my /carts/show.html.erb file:</p>\n\n<pre><code>&lt;p id=\"notice\"&gt;&lt;%= notice %&gt;&lt;/p&gt;\n\n&lt;h2&gt;My Cart&lt;/h2&gt;\n&lt;table class=\"table table-responsive table-striped\"&gt;\n    &lt;thead&gt;\n        &lt;tr&gt;\n            &lt;th&gt;Item&lt;/th&gt;\n            &lt;th&gt;Quantity&lt;/th&gt;\n            &lt;th&gt;Total Price&lt;/th&gt;\n        &lt;/tr&gt;\n        &lt;tbody&gt;\n            &lt;%= render(@cart.line_items) %&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Total&lt;/td&gt;\n                &lt;td&gt;&lt;%= number_to_currency(@cart.total_price) %&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/tbody&gt;\n    &lt;/thead&gt;\n&lt;/table&gt;\n\n\n&lt;%= button_to 'Empty Cart', @cart, method: :delete, data: {confirm: 'Are you sure you want to empty your cart?'}, :class =&gt; 'btn btn-danger' %&gt; \n&lt;br&gt;\n&lt;%= button_to \"Checkout\", new_order_path, method: :get, :class =&gt; 'btn btn-success' %&gt;\n&lt;br&gt;\n&lt;%= link_to 'Back', products_path, :class =&gt; 'btn btn-primary' %&gt;\n</code></pre>\n\n<p>Here is my /line_items/_line_item.html.erb file:</p>\n\n<pre><code>&lt;tr&gt;\n    &lt;td&gt;&lt;%= link_to line_item.product.product_name, line_item.product %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= line_item.quantity %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= number_to_currency(line_item.total_price) %&gt;&lt;/td&gt;\n&lt;/tr&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": false, "score": 0, "last_activity_date": 1499292241, "creation_date": 1499292241, "answer_id": 44936717, "question_id": 44936409, "link": "https://stackoverflow.com/questions/44936409/destroy-action-in-rspec-test-not-returning-success/44936717#44936717", "title": "Destroy action in RSpec test not returning success", "body": "<p>Read up on the basics of <a href=\"https://en.wikipedia.org/wiki/List_of_HTTP_status_codes\" rel=\"nofollow noreferrer\">HTTP codes</a> - in particular:</p>\n\n<ul>\n<li><code>2xx</code> responses are \"success\" status codes.</li>\n<li><code>3xx</code> responses are \"redirection\" status codes.</li>\n</ul>\n\n<p>In your controller, you have chosen to perform a <strong>redirect</strong> if the <code>Csstest</code> record is deleted: <code>redirect_to csstests_path</code>.</p>\n\n<p>If this is truly the desired behaviour, then you could update your <code>rspec</code> test to expect this:</p>\n\n<pre><code>expect(response).to redirect_to(csstests_path)\n# This second assertion is probably not really necessary\n# But I'll leave it here for completion...\nexpect(response).to return_http_status(302)\n</code></pre>\n\n<p>It is also possible to explicitly return <code>301</code> or <code>303</code> status codes for the redirect (see <a href=\"http://api.rubyonrails.org/classes/ActionController/Redirecting.html#method-i-redirect_to\" rel=\"nofollow noreferrer\">the documentation</a>). But again, these will not be considered \"success\" codes.</p>\n"}], "owner": {"reputation": 1740, "user_id": 6749371, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/1fb6335a13491c2ead854c6c24a81771?s=128&d=identicon&r=PG&f=1", "display_name": "J Seabolt", "link": "https://stackoverflow.com/users/6749371/j-seabolt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 549, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499292241, "creation_date": 1499290698, "question_id": 44936409, "link": "https://stackoverflow.com/questions/44936409/destroy-action-in-rspec-test-not-returning-success", "title": "Destroy action in RSpec test not returning success", "body": "<p>I have a Rails 5 application that creates and destroys \"csstests.\" I am attempting to write a test for the controllers destroy action. Here is the action: </p>\n\n<pre><code>def destroy \n    @test = Csstest.find(params[:id])\n    if @test.destroy\n        flash.now[:success] = \"Your test was removed\"\n        redirect_to csstests_path \n    end \nend \n</code></pre>\n\n<p>Here is the RSpec test: </p>\n\n<pre><code>describe 'DELETE #destroy' do \n\n    before do \n        test1, test2 = Csstest.create, Csstest.create\n        delete :destroy, params: { id: test1.id }\n    end\n\n    it 'returns HTTP success' do \n        expect(response).to be_success\n        expect(response).to return_http_status(200)\n    end\n\nend \n</code></pre>\n\n<p>This is the message I get from the failure: </p>\n\n<pre><code>1) CsstestsController DELETE #destroy returns HTTP success\n Failure/Error: expect(response).to be_success\n   expected `#&lt;ActionDispatch::TestResponse:0x007fb1362beb68 @mon_owner=nil, @mon_count=0, @mon_mutex=#&lt;Thread::Mu...spatch::Http::Headers:0x007fb1362de4b8 @req=#&lt;ActionController::TestRequest:0x007fb1362becf8 ...&gt;&gt;&gt;&gt;.success?` to return true, got false\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1499288534, "post_id": 44935879, "comment_id": 76848072, "body": "the #full_messages turns the errors into an array, but before that they are in a hash-like object (see the section on <code>errors[]</code> <a href=\"http://guides.rubyonrails.org/active_record_validations.html#validations-overview-errors\" rel=\"nofollow noreferrer\">here</a>). So you could use <code>errors.values_at(:name, :surname).flatten</code> to get the errors in the same order as the keys given."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1499290283, "post_id": 44935879, "comment_id": 76848882, "body": "Note that this is the really old Rails 3.x style of validation. Rails 4+ uses <code>validates :pledgor_surname, presence: true</code> as per the <a href=\"http://guides.rubyonrails.org/active_record_validations.html\" rel=\"nofollow noreferrer\">documentation</a>."}], "answers": [{"comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 2, "creation_date": 1499288960, "post_id": 44935991, "comment_id": 76848256, "body": "you can extract the values of a hash in a specific order. What exactly are you proposing that @Arepo &quot;overrides&quot;?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1499363870, "post_id": 44935991, "comment_id": 76887331, "body": "Additionally <code>Hash</code> is reliably ordered since 1.9.3"}, {"owner": {"reputation": 39, "user_id": 8240168, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YJwFn.jpg?s=128&g=1", "display_name": "broken_historian", "link": "https://stackoverflow.com/users/8240168/broken-historian"}, "edited": false, "score": 0, "creation_date": 1499375422, "post_id": 44935991, "comment_id": 76893178, "body": "Did not know that, thanks for the information, I had just recently been working with Go where it is intentionally shuffled to prevent anyone confusing it for being ordered. I will update my answer or remove it if possible."}], "tags": [], "owner": {"reputation": 39, "user_id": 8240168, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YJwFn.jpg?s=128&g=1", "display_name": "broken_historian", "link": "https://stackoverflow.com/users/8240168/broken-historian"}, "is_accepted": false, "score": 0, "last_activity_date": 1499375471, "last_edit_date": 1499375471, "creation_date": 1499288812, "answer_id": 44935991, "question_id": 44935879, "link": "https://stackoverflow.com/questions/44935879/can-i-determine-the-order-of-validation-error-messages-in-rails/44935991#44935991", "title": "Can I determine the order of validation error messages in Rails?", "body": "<p>No, they are returned in a hash and hashes do not provide reliable ordering. This could be overridden, which is typically done by adding files to the lib folder and specifying your overrides in the rails config. </p>\n\n<p><strong>Edit</strong> According to the comment below since Ruby 1.9.3, hashes are actually ordered, so ignore what I said. </p>\n"}], "owner": {"reputation": 607, "user_id": 3210927, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/9c32b2beefffc67829ebf32bba7c7ea4?s=128&d=identicon&r=PG", "display_name": "Arepo", "link": "https://stackoverflow.com/users/3210927/arepo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499375471, "creation_date": 1499288349, "question_id": 44935879, "link": "https://stackoverflow.com/questions/44935879/can-i-determine-the-order-of-validation-error-messages-in-rails", "title": "Can I determine the order of validation error messages in Rails?", "body": "<p>I want to get the order of validation messages to go in the same order as they do on our form.</p>\n\n<p>We have three classes:</p>\n\n<pre><code>class User\n  accepts_nested_attributes_for :pledges\nend\n\nclass Pledge\n  accepts_nested_attributes_for :companies\n  validates_presence_of :pledgor_surname\nend\n\nclass Company\n  validates_presence_of :name\nend\n</code></pre>\n\n<p>In one form, we potentially have to take attributes for all three, so we get params like the following:</p>\n\n<pre><code>{\"pledges_attributes\"=&gt;\n  {\"0\"=&gt;\n    {\"pledgor_surname\"=&gt;\"\",\n     \"id\"=&gt;\"230\",\n     \"companies_attributes\"=&gt;\n      {\"0\"=&gt;\n        {\"id\"=&gt;\"125\", \n         \"name\"=&gt;\"\"\n        }\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>When I call <code>@user.update(params)</code>, it fails validation as I'd expect. But the <code>errors#full_messages</code> list looks like this:</p>\n\n<pre><code>[\"Company name can't be blank\", \"Pledgor surname can't be blank\"]`\n</code></pre>\n\n<p>And the errors appear on the page in the same order.</p>\n\n<p>Short of hacking the messages object, is there a way to tell Rails which order to place the messages in, or at least which of pledgor errors and company errors should go first?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1499287356, "post_id": 44935505, "comment_id": 76847465, "body": "Your best bet would be to use a library built for auditing changes like <a href=\"https://github.com/collectiveidea/audited\" rel=\"nofollow noreferrer\"><code>audited</code></a> or <a href=\"https://github.com/airblade/paper_trail\" rel=\"nofollow noreferrer\"><code>paper_trail</code></a> for example"}], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1499287550, "post_id": 44935641, "comment_id": 76847569, "body": "Maybe also touch on the fact that the OP has <code>#copy_budget</code> defined in <code>Budget</code> model. Where <code>params</code> is not accessible and <code>@budget</code> could just be <code>self</code>. Also the fact that <code>duping</code> the current object does not indicate the <code>#changes</code> so the dup will have no <code>id</code> or timestamps but will reflect the changed object (I believe)."}, {"owner": {"reputation": 3, "user_id": 6161902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/704e84991d7e4b034e2754fcaa9817ad?s=128&d=identicon&r=PG&f=1", "display_name": "C.Johnson", "link": "https://stackoverflow.com/users/6161902/c-johnson"}, "edited": false, "score": 0, "creation_date": 1499353357, "post_id": 44935641, "comment_id": 76880306, "body": "Simple Lime, I tried changing the copy_budget method to match your suggestions, there still is nothing getting duplicated in my model. The existing record has the changes applied, but no copy is created."}, {"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1499371437, "post_id": 44935641, "comment_id": 76891231, "body": "What version of rails are you in and how are you checking if it worked? Just created a test app in rails 5.1.2 and it&#39;s creating a new Budget for me every time, no matter how I update the record. Though as mentioned in my answer, both the records are identical except for the id, because you&#39;re copying a record with changes already made to it, so you&#39;d need to update your code to copy the old version (<a href=\"http://api.rubyonrails.org/classes/ActiveModel/Dirty.html#method-i-changes\" rel=\"nofollow noreferrer\">changes</a> may help you there. I still recommend checking out some gems that have already done this though"}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 1, "last_activity_date": 1499287908, "last_edit_date": 1499287908, "creation_date": 1499287301, "answer_id": 44935641, "question_id": 44935505, "link": "https://stackoverflow.com/questions/44935505/rails-how-to-save-existing-record-and-apply-update-to-a-copy/44935641#44935641", "title": "Rails - how to save existing record and apply update to a copy?", "body": "<p>the <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Core.html#method-i-dup\" rel=\"nofollow noreferrer\"><em>dup</em></a> method returns the new object without an id, it doesn't update it in place. Since your <code>copy_budget</code> method is already an instance method on <code>Budget</code>, you also would not need to (and you wouldn't even be able to, since <code>params</code> aren't accessible in models) look up the budget by id and instead could just use the current instance (self). So the following changed would fix the <code>copy_budget</code> method for you, but you are still copying an already modified object, just before it gets saved to the database</p>\n\n<pre><code>def copy_budget\n  copy_of_budget = self.dup\n  copy_of_budget.save\nend\n</code></pre>\n\n<p>it would work the way you're expecting it to work. However, you aren't linking the copy in anyway to the current version of the Budget (no way to tell Budget id = 1 is an older version of Budget id = 2). I'd recommend taking a look at a gem such as <a href=\"https://github.com/airblade/paper_trail\" rel=\"nofollow noreferrer\">PaperTrail</a> (I'm sure there are lots of others if that one doesn't suit your needs) which has already thought through a lot of the problems and features with keeping a history of record changed.</p>\n"}], "owner": {"reputation": 3, "user_id": 6161902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/704e84991d7e4b034e2754fcaa9817ad?s=128&d=identicon&r=PG&f=1", "display_name": "C.Johnson", "link": "https://stackoverflow.com/users/6161902/c-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1243, "favorite_count": 0, "accepted_answer_id": 44935641, "answer_count": 1, "score": 0, "last_activity_date": 1499311535, "creation_date": 1499286759, "last_edit_date": 1499311535, "question_id": 44935505, "link": "https://stackoverflow.com/questions/44935505/rails-how-to-save-existing-record-and-apply-update-to-a-copy", "title": "Rails - how to save existing record and apply update to a copy?", "body": "<p>I have a webpage that tracks budgets containing a LOT of variables, stored in 40+ columns. Over time, adjustments are made to these budgets, but I need to be able to track changes over time and year to year. I tried adding a private method to my model that should create a duplicate of the existing record triggered by a <strong>:before_update</strong> callback. However, it's not working. The update changes the existing record, and the original is not preserved at all. </p>\n\n<p><strong>Model:</strong></p>\n\n<pre><code>class Budget &lt; ActiveRecord::Base\n\n  before_update :copy_budget\n\n  private\n\n  def copy_budget\n    @budget = Budget.find(params[:id])\n    @budget.dup\n    @budget.save\n  end\nend\n</code></pre>\n\n<p>I'm still learning rails, (this is in Rails 4) and I think this would have been the best way to do this. If not, is there a better way to set the form to ALWAYS post a new record instead of routing to update if a record already exists?</p>\n\n<p>Currently the form_for line looks like this:</p>\n\n<p><code>&lt;%= form_for(@budget) do |f| %&gt;</code></p>\n\n<p>Everything works as it should, with the exception of the duplication not happening. What am I missing? Is it possible the .dup function is also duplicating the :id? This is assigned by auto-increment in the MySQL db I an using, so if .dup is copying EVERYTHING, is there a way to copy all of the data except the :id into a new record?</p>\n\n<p>Thanks in advance for any suggestions.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "braintree"], "comments": [{"owner": {"reputation": 369, "user_id": 4104237, "user_type": "registered", "profile_image": "https://graph.facebook.com/1546038308/picture?type=large", "display_name": "Eric", "link": "https://stackoverflow.com/users/4104237/eric"}, "edited": false, "score": 1, "creation_date": 1499284987, "post_id": 44934943, "comment_id": 76846174, "body": "Is price a class method?  It seems like you are calling an instance method on a class..."}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "reply_to_user": {"reputation": 369, "user_id": 4104237, "user_type": "registered", "profile_image": "https://graph.facebook.com/1546038308/picture?type=large", "display_name": "Eric", "link": "https://stackoverflow.com/users/4104237/eric"}, "edited": false, "score": 0, "creation_date": 1499285595, "post_id": 44934943, "comment_id": 76846516, "body": "Thanks for the reply @Eric!!! No it&#39;s not a class method."}, {"owner": {"reputation": 369, "user_id": 4104237, "user_type": "registered", "profile_image": "https://graph.facebook.com/1546038308/picture?type=large", "display_name": "Eric", "link": "https://stackoverflow.com/users/4104237/eric"}, "edited": false, "score": 0, "creation_date": 1499285661, "post_id": 44934943, "comment_id": 76846557, "body": "You are calling an instance method on a class there... try calling it on an object... ex. <code>Braintree::Plan.last.price</code>"}], "answers": [{"comments": [{"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1499286135, "post_id": 44935225, "comment_id": 76846844, "body": "Thanks for the info @K M Rakibul Islam... I&#39;m trying to show the price inside the Braintree drop-in ui. Thus the subscription has not been created yet."}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1499286254, "post_id": 44935225, "comment_id": 76846912, "body": "How many plans do you have right now? If you have just one plan, or if you wanna show the price of the latest created plan, then you can do: <code>Braintree::Plan.last.price</code>"}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1499286322, "post_id": 44935225, "comment_id": 76846947, "body": "Right now I only have 2. if I try <code>Braintree::Plan.last.price it returns  undefined method last&#39; for Braintree::Plan:Class</code>"}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1499286402, "post_id": 44935225, "comment_id": 76846989, "body": "Also, not sure if would work, try this: <code>Braintree::Plan.find(&#39;plan_id&#39;)price</code>"}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1499286610, "post_id": 44935225, "comment_id": 76847081, "body": "Tried Braintree::Plan.find(&#39;plan_id&#39;)price and..... the <code>syntax error, unexpected tIDENTIFIER, expecting tSTRING_DEND ree::Plan.find(&#39;plan_id&#39;)price}$&quot;, class: &quot;button mt1&quot; );@ou ^</code>"}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1499286669, "post_id": 44935225, "comment_id": 76847115, "body": "there is a dor missing: <code>Braintree::Plan.find(&#39;plan_id&#39;).price</code>"}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1499286681, "post_id": 44935225, "comment_id": 76847123, "body": "Most probably its not gonna work. Seems like the API does not have that option to find a plan by its id."}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1499286735, "post_id": 44935225, "comment_id": 76847151, "body": "yeap... <code>undefined method find&#39; for Braintree::Plan:Class</code>"}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1499286812, "post_id": 44935225, "comment_id": 76847187, "body": "yeah, so for now, you have to go with one the options that I mentioned in my answer until we find a better way."}], "tags": [], "owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "is_accepted": false, "score": 0, "last_activity_date": 1499286618, "last_edit_date": 1499286618, "creation_date": 1499285776, "answer_id": 44935225, "question_id": 44934943, "link": "https://stackoverflow.com/questions/44934943/braintree-for-rails/44935225#44935225", "title": "Braintree for rails", "body": "<p>One way would be to find the <code>Braintree::Subscription</code> by the <code>subscription_id</code> (if you have one) and then get price from there.</p>\n\n<pre><code>Braintree::Subscription.find(\"a_subscription_id\").price\n</code></pre>\n\n<p>Or, you can search for <code>Braintree::Subscription</code> by a <code>plan_id</code> and then get the price.</p>\n\n<pre><code>Braintree::Subscription.search do |search|\n  search.plan_id.is \"the_plan_id\"\nend.first.price\n</code></pre>\n\n<p>Both of these examples are taken from <a href=\"https://developers.braintreepayments.com/reference/request/subscription/cancel/ruby\" rel=\"nofollow noreferrer\">Braintree API Documentation for Subscription</a></p>\n\n<p>It would be nice to retrieve a plan using something like: <code>Braintree::Plan.retrieve(plan_id)</code> and then get the price of the plan directly from there. But, unfortunately, I don't see that option in their <a href=\"https://developers.braintreepayments.com/reference/request/plan/all/ruby\" rel=\"nofollow noreferrer\">API Documentation for Plan</a>.</p>\n\n<p>To get the price of the latest plan:</p>\n\n<pre><code>Braintree::Plan.last.price\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "is_accepted": true, "score": 0, "last_activity_date": 1499337337, "creation_date": 1499337337, "answer_id": 44946551, "question_id": 44934943, "link": "https://stackoverflow.com/questions/44934943/braintree-for-rails/44946551#44946551", "title": "Braintree for rails", "body": "<p>I got it... just had to put params[\"price\"] into the submit tag!!</p>\n\n<p><code>&lt;%=submit_tag \"Pay #{params[\"price\"]}$\", class: \"button mt1\" %&gt;</code></p>\n"}], "owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 44946551, "answer_count": 2, "score": -1, "last_activity_date": 1499337337, "creation_date": 1499284679, "question_id": 44934943, "link": "https://stackoverflow.com/questions/44934943/braintree-for-rails", "title": "Braintree for rails", "body": "<p>I want to show the price of a plan I created in Braintree. I'm trying to retrieve the details via the the Braintree api by using this: <code>Braintree::Plan.price</code></p>\n\n<pre><code>&lt;%= form_tag transactions_path do%&gt;\n  &lt;div id=\"dropin\"&gt;&lt;/div&gt;\n  &lt;%=submit_tag \"Pay #{Braintree::Plan.price}$\", class: \"button mt1\" %&gt;\n</code></pre>\n\n   \n\n<p>But I'm getting this error:\n<code>undefined method price' for Braintree::Plan:Class</code></p>\n\n<p>Does someone know how to implement this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "file-upload", "carrierwave", "vagrant-windows"], "comments": [{"owner": {"reputation": 2090, "user_id": 5113690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cbKBX.png?s=128&g=1", "display_name": "m3characters", "link": "https://stackoverflow.com/users/5113690/m3characters"}, "edited": false, "score": 0, "creation_date": 1499285200, "post_id": 44934865, "comment_id": 76846307, "body": "I haven&#39;t used windows in a long time, and the same for vagrant. It seems though that the original error is specifically related with the filesystem inside vagrant in windows, and probably it tries to write on an open file. Could you try setting config.cache_dir to /blabla/caching - instead of /uploads . If I&#39;m not mistaken carrierwave defaults to /uploads for the final files and that might be an issue? I haven&#39;t got the slightest idea if this could be the reason though"}, {"owner": {"reputation": 31, "user_id": 8035833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a021e0000a67752cd8f94572f53de1fc?s=128&d=identicon&r=PG&f=1", "display_name": "Claire D", "link": "https://stackoverflow.com/users/8035833/claire-d"}, "reply_to_user": {"reputation": 2090, "user_id": 5113690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cbKBX.png?s=128&g=1", "display_name": "m3characters", "link": "https://stackoverflow.com/users/5113690/m3characters"}, "edited": false, "score": 0, "creation_date": 1499337385, "post_id": 44934865, "comment_id": 76868007, "body": "Hi Michael, thank you for the help. I had not tried following the home/vagrant/uploads_tmp/tmp/uploads path to the images files, and now I found something else that may lead to some answer (not there yet). In short, the issue seems to be with accessing the uploaded files, not the uploading itself. Will update If I get to an answer!"}, {"owner": {"reputation": 2090, "user_id": 5113690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cbKBX.png?s=128&g=1", "display_name": "m3characters", "link": "https://stackoverflow.com/users/5113690/m3characters"}, "edited": false, "score": 0, "creation_date": 1499342096, "post_id": 44934865, "comment_id": 76871268, "body": "Can you post your uploader and the stack trace that leads to the error?"}, {"owner": {"reputation": 2090, "user_id": 5113690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cbKBX.png?s=128&g=1", "display_name": "m3characters", "link": "https://stackoverflow.com/users/5113690/m3characters"}, "edited": false, "score": 0, "creation_date": 1499424466, "post_id": 44934865, "comment_id": 76912443, "body": "<a href=\"https://stackoverflow.com/questions/27359778/errnoetxtbsy-text-file-busy-unlink-internal\" title=\"errnoetxtbsy text file busy unlink internal\">stackoverflow.com/questions/27359778/&hellip;</a> this might solve your issue? otherwise it&#39;s beyond my knowledge"}], "owner": {"reputation": 31, "user_id": 8035833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a021e0000a67752cd8f94572f53de1fc?s=128&d=identicon&r=PG&f=1", "display_name": "Claire D", "link": "https://stackoverflow.com/users/8035833/claire-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1499984288, "creation_date": 1499284338, "last_edit_date": 1499984288, "question_id": 44934865, "link": "https://stackoverflow.com/questions/44934865/image-resizing-not-working-in-development-with-carrierwave-aws", "title": "Image resizing not working in development with carrierwave-aws", "body": "<p>Image files are meant to be resized as they are uploaded. </p>\n\n<p>The code <code>' process resize_to_fill: [800, 350]'</code> in the uploader file works in production, but not in my development environment. (I use Vagrant)</p>\n\n<p>My file <code>config/initializers/carrierwave.rb</code> was modified with the following code: </p>\n\n<pre><code>CarrierWave.configure do |config|\n  if Rails.env.development?\n    config.cache_dir = '/home/vagrant/uploads_tmp/tmp/uploads'\n    config.root = '/home/vagrant/uploads_tmp/tmp'\n  end\nend\n</code></pre>\n\n<p>Because without this code I get the following error (due to using Windows):</p>\n\n<pre><code>Errno::ETXTBSY in Instructor::CoursesController#create\n</code></pre>\n\n<p>and can't upload at all in development.</p>\n\n<p>My controller action is as follows:</p>\n\n<pre><code>def create\n  @course = current_user.courses.create(course_params)\n  if @course.valid?\n    redirect_to instructor_course_path(@course)\n  else     \n    render :new, status: :unprocessable_entity\n  end\nend\n</code></pre>\n\n<p>With the error being thrown on the instance variable assignment line.</p>\n\n<p>Since adding the initializer code, some image files get saved in their original size while others get saved as a mostly blank space (with a small stripe from the image showing at the top). I can not seem to identify anything special about the images in either class! Interestingly, this does not appear to happen when the app is deployed to heroku.</p>\n\n<p>Could someone explain:</p>\n\n<p>1) What is causing the original error, and why does the initializer code fix it.</p>\n\n<p>2) What is going wrong with the image uploads?</p>\n\n<h1><strong>EDIT</strong></h1>\n\n<p>Since posting my question I found that the files do upload without the code fix in the initializer; in that case the issue would be with accessing the file. I omitted the second line of the error message in my original question, which actually must be key to the issue: <code>Text file busy @ unlink_internal - /vagrant/src/flixter/public/uploads/tmp/1499336954-11657-000\u200c\u200b1-9160/ecriture.jpg</code>\nHere is the full stack trace (original error without the initializer code fix):    </p>\n\n<p><code>Errno::ETXTBSY (Text file busy @ unlink_internal - /vagrant/src/flixter/public/uploads/tmp/1499420789-13682-000\u200c\u200b1-6708/ben-white-148\u200c\u200b430.jpg): app/controllers/instructor/courses_controller.rb:10:in 'create' Rendering /home/vagrant/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems\u200c\u200b/actionpack-5.0.3/li\u200c\u200bb/ action_dispatch/middleware/templates/rescues/diagnostics.htm\u200c\u200bl.erb within rescues/layout Rendering /home/vagrant/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems\u200c\u200b/actionpack-5.0.3/li\u200c\u200bb/ action_dispatch/middleware/templates/rescues/_source.html.er\u200c\u200bb\nRendered /home/vagrant/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems\u200c\u200b/actionpack-5.0.3/li\u200c\u200bb/action_dispatch/middleware/templates/rescues/_source.html.erb (5.3ms)\nRendering /home/vagrant/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems\u200c\u200b/actionpack-5.0.3/li\u200c\u200bb/ action_dispatch/middleware/templates/rescues/_trace.html.erb Rendered /home/vagrant/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems\u200c\u200b/actionpack-5.0.3/li\u200c\u200bb/a ction_dispatch/middleware/templates/rescues/_trace.html.erb (2.3ms)\nRendering /home/vagrant/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems\u200c\u200b/actionpack-5.0.3/li\u200c\u200bb/ action_dispatch/middleware/templates/rescues/_request_and_re\u200c\u200bsponse.html.erb Rendered /home/vagrant/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems\u200c\u200b/actionpack-5.0.3/li\u200c\u200bb/a ction_dispatch/middleware/templates/rescues/_request_and_res\u200c\u200bponse.html.erb (2.0ms) Rendered /home/vagrant/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems\u200c\u200b/actionpack-5.0.3/li\u200c\u200bb/a ction_dispatch/middleware/templates/rescues/diagnostics.html\u200c\u200b.erb within rescues/layout (26.1ms)</code></p>\n\n<p>I still don't know why the initializer code partially fixes the bug!</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1499284386, "post_id": 44934722, "comment_id": 76845817, "body": "Could you try checking if the <code>user_id</code> in the Bien object isn&#39;t <code>nil</code>? <code>Bien.where.not(user_id: nil)</code>"}, {"owner": {"reputation": 49, "user_id": 7701988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b5b92d1c26e432e91cb1a8eaca210669?s=128&d=identicon&r=PG&f=1", "display_name": "Wako", "link": "https://stackoverflow.com/users/7701988/wako"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1499285305, "post_id": 44934722, "comment_id": 76846353, "body": "Thanks It works but its give me Biens where user is not nill but if i display users it will be all users but i want only users who have biens near of ..."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1499290691, "post_id": 44935110, "comment_id": 76849050, "body": "Alternate form: <code>where(biens: { room_type: params[:room_type] })</code>"}, {"owner": {"reputation": 49, "user_id": 7701988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b5b92d1c26e432e91cb1a8eaca210669?s=128&d=identicon&r=PG&f=1", "display_name": "Wako", "link": "https://stackoverflow.com/users/7701988/wako"}, "edited": false, "score": 0, "creation_date": 1499327779, "post_id": 44935110, "comment_id": 76861474, "body": "Thanks for your help i will search in SQL docs, when i try the first form  users.size = biens.size even if only 2 users have these biens i will try the alternate form"}], "tags": [], "owner": {"reputation": 369, "user_id": 4104237, "user_type": "registered", "profile_image": "https://graph.facebook.com/1546038308/picture?type=large", "display_name": "Eric", "link": "https://stackoverflow.com/users/4104237/eric"}, "is_accepted": true, "score": 2, "last_activity_date": 1499286629, "last_edit_date": 1499286629, "creation_date": 1499285287, "answer_id": 44935110, "question_id": 44934722, "link": "https://stackoverflow.com/questions/44934722/select-users-in-relation-with-theire-other-table-on-rails/44935110#44935110", "title": "Select users in relation with theire other table on rails", "body": "<p>You can join the User table to the bien table with something like this.\nThis will give you an inner join which will only show you the intersecting records... </p>\n\n<p>If the user has many biens...</p>\n\n<pre><code>User.joins(:biens).where(...)\n</code></pre>\n\n<p>If the user has one bien...</p>\n\n<pre><code>User.joins(:bien).where(...)\n</code></pre>\n\n<p>This will give you a list of users who have biens...</p>\n\n<p>You could then query further on the biens table to your liking:</p>\n\n<pre><code>User.joins(:biens).where('biens.room_type = ?', params[:room_type])\n</code></pre>\n\n<p>etc.</p>\n"}], "owner": {"reputation": 49, "user_id": 7701988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b5b92d1c26e432e91cb1a8eaca210669?s=128&d=identicon&r=PG&f=1", "display_name": "Wako", "link": "https://stackoverflow.com/users/7701988/wako"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 44935110, "answer_count": 1, "score": -1, "last_activity_date": 1499286629, "creation_date": 1499283798, "question_id": 44934722, "link": "https://stackoverflow.com/questions/44934722/select-users-in-relation-with-theire-other-table-on-rails", "title": "Select users in relation with theire other table on rails", "body": "<p>My users have one to many relation with my table \"Bien\" i want select only users who have biens in my result page</p>\n\n<p>My controller is like this</p>\n\n<pre><code>def search\n    @users = User.all\n    @biens = Bien.near(params[:location], 3, units: :km).where(room_type: params[:room_type], nb_piece: params[:nb_piece])\n    @hash = Gmaps4rails.build_markers(@bien) do |bien, marker|\n      marker.lat @bien.latitude\n      marker.lng @bien.longitude\n    end\n  end\n</code></pre>\n\n<p>I want select only users who have biens.near(....)\nI try many solutions but i want know the good solution to get it</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "savon"], "answers": [{"comments": [{"owner": {"reputation": 4312, "user_id": 166034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/311eb5cf1152752fafbed2a2c85aff5d?s=128&d=identicon&r=PG", "display_name": "Kerby82", "link": "https://stackoverflow.com/users/166034/kerby82"}, "edited": false, "score": 0, "creation_date": 1499286900, "post_id": 44935277, "comment_id": 76847231, "body": "Yes the namespace was the problem. I had to add also this in the savon client configuration: env_namespace: :soapenv,                       namespace_identifier: :ns1)"}], "tags": [], "owner": {"reputation": 3271, "user_id": 387177, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce58186c9663c82e5fef7fcca045fa57?s=128&d=identicon&r=PG", "display_name": "Steffen Roller", "link": "https://stackoverflow.com/users/387177/steffen-roller"}, "is_accepted": true, "score": 0, "last_activity_date": 1499285923, "creation_date": 1499285923, "answer_id": 44935277, "question_id": 44934614, "link": "https://stackoverflow.com/questions/44934614/savon-using-built-in-request-builder-instead-of-raw-xml/44935277#44935277", "title": "Savon using built in request builder instead of raw xml", "body": "<p>I usually do just this (untested). It's not pretty but it works.</p>\n\n<pre><code>credentials = { 'ns1:username' =&gt; 'user',\n                'ns1:password' =&gt; 'pwd!!',\n                'ns1:cultureInfo' =&gt; \"it\" }\nresponse = client.call(:authenticate, message: credentials)\n</code></pre>\n\n<p>You might want to adapt the use of <code>ns1</code> to the actually used namespace in your case.</p>\n"}], "owner": {"reputation": 4312, "user_id": 166034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/311eb5cf1152752fafbed2a2c85aff5d?s=128&d=identicon&r=PG", "display_name": "Kerby82", "link": "https://stackoverflow.com/users/166034/kerby82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 44935277, "answer_count": 1, "score": -1, "last_activity_date": 1499285923, "creation_date": 1499283392, "last_edit_date": 1499285821, "question_id": 44934614, "link": "https://stackoverflow.com/questions/44934614/savon-using-built-in-request-builder-instead-of-raw-xml", "title": "Savon using built in request builder instead of raw xml", "body": "<p>If i use savon with raw xml everything works fine, this is the raw xml example:</p>\n\n<pre><code>request = client.call(:authenticate, xml:'&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;SOAP-ENV:Envelope xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:ns1=\"xxxx/\"&gt;\n  &lt;SOAP-ENV:Body&gt;\n    &lt;ns1:authenticate&gt;\n      &lt;ns1:username&gt;user&lt;/ns1:username&gt;\n      &lt;ns1:password&gt;pwd&lt;/ns1:password&gt;\n      &lt;ns1:cultureInfo&gt;it&lt;/ns1:cultureInfo&gt;\n    &lt;/ns1:authenticate&gt;\n  &lt;/SOAP-ENV:Body&gt;\n&lt;/SOAP-ENV:Envelope&gt;')\n</code></pre>\n\n<p>If I use the builtin method to call the method I got an error, this is the code:</p>\n\n<pre><code>credentials={ username: 'user', password: 'pwd!!', cultureInfo: \"it\" }\nresponse     = client.call(:authenticate, message: credentials)\n</code></pre>\n\n<p>This is the xml produced by the above code:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n  &lt;env:Envelope xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" \n                xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n                xmlns:wsdl=\"http://tempuri.org/\"\n                xmlns:env=\"http://schemas.xmlsoap.org/soap/envelope/\"&gt;\n  &lt;env:Body&gt;\n    &lt;wsdl:authenticate&gt;\n      &lt;username&gt;user&lt;/username&gt;\n      &lt;password&gt;pwd&lt;/password&gt;\n      &lt;cultureInfo&gt;it&lt;/cultureInfo&gt;\n    &lt;/wsdl:authenticate&gt;\n  &lt;/env:Body&gt;\n&lt;/env:Envelope&gt;\n</code></pre>\n\n<p>Any Idea?</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby"], "comments": [{"owner": {"reputation": 156, "user_id": 7906894, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ccf016e59a6412ebf38d83915676f863?s=128&d=identicon&r=PG&f=1", "display_name": "code4fun", "link": "https://stackoverflow.com/users/7906894/code4fun"}, "edited": false, "score": 0, "creation_date": 1499290135, "post_id": 44934433, "comment_id": 76848815, "body": "What are you using for your application server?"}, {"owner": {"reputation": 2538, "user_id": 6847234, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/9e6c83419733b2645e9e9c66aaf5e959?s=128&d=identicon&r=PG&f=1", "display_name": "dev_054", "link": "https://stackoverflow.com/users/6847234/dev-054"}, "reply_to_user": {"reputation": 156, "user_id": 7906894, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ccf016e59a6412ebf38d83915676f863?s=128&d=identicon&r=PG&f=1", "display_name": "code4fun", "link": "https://stackoverflow.com/users/7906894/code4fun"}, "edited": false, "score": 0, "creation_date": 1499306641, "post_id": 44934433, "comment_id": 76853618, "body": "@code4fun I&#39;m using capistrano to deploy... in application server I&#39;m using Apache and Passenger."}], "owner": {"reputation": 2538, "user_id": 6847234, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/9e6c83419733b2645e9e9c66aaf5e959?s=128&d=identicon&r=PG&f=1", "display_name": "dev_054", "link": "https://stackoverflow.com/users/6847234/dev-054"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 202, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1499282641, "creation_date": 1499282641, "question_id": 44934433, "link": "https://stackoverflow.com/questions/44934433/rack-cors-failing-on-production-build", "title": "rack-cors failing on production build", "body": "<p>I have an Rails 5 API project and I'm using <a href=\"https://github.com/cyu/rack-cors\" rel=\"nofollow noreferrer\"><strong><code>rack-cors</code></strong></a>.</p>\n\n<p><strong>Situation</strong>:</p>\n\n<p>I have some static JSON files in <code>public/files</code> folder, like this:</p>\n\n<pre><code>{\n  \"example\": \"123456\"\n   ...\n}\n</code></pre>\n\n<p>I can access them perfectly (from Angular client) in <strong>development</strong>, but it doesn't work in <strong>production</strong>.</p>\n\n<p>In <strong>production</strong>, I'm getting the common error:</p>\n\n<blockquote>\n  <p>XMLHttpRequest cannot load\n  <a href=\"https://myhost.com/files/my_file.json\" rel=\"nofollow noreferrer\">https://myhost.com/files/my_file.json</a>. No\n  'Access-Control-Allow-Origin' header is present on the requested\n  resource.</p>\n</blockquote>\n\n<p>The most stranger thing is that I can access the url (<code>https://myhost.com/files/my_file.json</code>) manually in browser without any problems.</p>\n\n<p><strong>Actual configuration</strong>:</p>\n\n<p><em>config/initializers/cors.rb:</em></p>\n\n<pre><code>Rails.application.config.middleware.insert_before 0, Rack::Cors do\n  allow do\n    origins my_origins\n    resource '*',\n      expose: ['awesome_token'],\n      headers: :any,\n      methods: %i[delete get head options patch post put]\n  end\nend\n</code></pre>\n\n<p><strong>Possible configuration</strong>:</p>\n\n<p>So after some research, I found the following:</p>\n\n<p><em>environments/production.rb</em>:</p>\n\n<pre><code># Added the following\nconfig.public_file_server.enabled = true \n</code></pre>\n\n<p><em>cors.rb</em>:</p>\n\n<pre><code>Rails.application.config.middleware.insert_before 0, Rack::Cors do\n  allow do\n    origins my_origins\n    resource '*',\n      expose: ['awesome_token'],\n      headers: :any,\n      methods: %i[delete get head options patch post put]\n  end\nend\n\n# Added the following\nRails.application.config.middleware.insert_before ActionDispatch::Static, Rack::Cors do\n  allow do\n    origins '*'\n    resource '*',\n      headers: :any,\n      methods: %i[delete get head options patch post put]\n  end\nend\n</code></pre>\n\n<p>But it make absolutely no difference.</p>\n\n<p>So, my question is: Is there something that I'm missing? What's wrong?</p>\n\n<p><strong>PS:</strong> Every request is working fine, the problem is with this static JSON files in <code>public/files</code> folder (in <strong>production</strong> build).</p>\n"}, {"tags": ["ruby", "asynchronous", "celluloid"], "answers": [{"tags": [], "owner": {"reputation": 1653, "user_id": 1318874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c89dbf404d7c6ac72954595c974e3d9?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Cherevkov", "link": "https://stackoverflow.com/users/1318874/ilya-cherevkov"}, "is_accepted": true, "score": 0, "last_activity_date": 1499286035, "creation_date": 1499286035, "answer_id": 44935306, "question_id": 44934110, "link": "https://stackoverflow.com/questions/44934110/celluloid-resize-pool/44935306#44935306", "title": "Celluloid resize pool", "body": "<p>Setting pool.size explicitly did the trick it seems</p>\n\n<pre><code>client = Client.new\npool = client.pool(size: 1)\n\nloop do\n   params = client.get_params\n   pool.size = params.size\n\n   futures = params.map do |p|\n      pool.future(:perform_work, p)\n   end\n\n   futures.map(&amp;:value)\n   sleep 1\nend\n</code></pre>\n"}], "owner": {"reputation": 1653, "user_id": 1318874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c89dbf404d7c6ac72954595c974e3d9?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Cherevkov", "link": "https://stackoverflow.com/users/1318874/ilya-cherevkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 44935306, "answer_count": 1, "score": 0, "last_activity_date": 1499286035, "creation_date": 1499281395, "last_edit_date": 1499282104, "question_id": 44934110, "link": "https://stackoverflow.com/questions/44934110/celluloid-resize-pool", "title": "Celluloid resize pool", "body": "<p>I have the following program structure. </p>\n\n<pre><code>client = Client.new\nparams = client.get_params\npool = client.pool(size: params.size)\n\nfutures = params.map do |p|\n    pool.future(:perform_work, p)\nend\n\nfutures.map(&amp;:value)\n</code></pre>\n\n<p>Client is Celluloid-enabled class using <code>include Celluloid</code>. This works great until I try to execute the program in a loop. I need to dynamically resize pool of workers based on number of parameters I receive from external data-feed.</p>\n\n<pre><code>client = Client.new\npool = client.pool(size: 1)\n\nloop do\n   params = client.get_params\n\n   ....\n   **? pool.resize(size: params.size) ?**\n   ....\n\n   futures = params.map do |p|\n      pool.future(:perform_work, p)\n   end\n\n   futures.map(&amp;:value)\n   sleep 1\nend\n</code></pre>\n\n<p>I tried include pool creation into the loop with subsequent <code>pool.terminate</code> but it's spamming threads and leads to actor crash.</p>\n"}, {"tags": ["ruby", "rest", "video-streaming", "http-live-streaming", "rest-client"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1499281890, "post_id": 44934067, "comment_id": 76844315, "body": "Can you add an example of the response you get?"}, {"owner": {"reputation": 11, "user_id": 3713375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36dd88223db8b3858d277c1b751f3b10?s=128&d=identicon&r=PG", "display_name": "adomyaty", "link": "https://stackoverflow.com/users/3713375/adomyaty"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1499282276, "post_id": 44934067, "comment_id": 76844559, "body": "@Sebasti&#225;nPalma Edited main question to include response."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1499282446, "post_id": 44934067, "comment_id": 76844668, "body": "Are you receiving a JSON response?"}, {"owner": {"reputation": 11, "user_id": 3713375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36dd88223db8b3858d277c1b751f3b10?s=128&d=identicon&r=PG", "display_name": "adomyaty", "link": "https://stackoverflow.com/users/3713375/adomyaty"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1499283119, "post_id": 44934067, "comment_id": 76845071, "body": "@Sebasti&#225;nPalma seems like it&#39;s just a RAW response. Can&#39;t tell... but the request header is:                                                                       Access-Control-Allow-Credentials: true Access-Control-Allow-Headers: Content-Type, X-Requested-With Access-Control-Allow-Methods: GET,OPTIONS Access-Control-Allow-Origin: http://........... Access-Control-Max-Age: 1728000 Connection: keep-alive Content-Length: 1674 Content-Type: application/x-mpegurl; charset=utf-8 Date: Wed, 05 Jul 2017 19:29:59 GMT Etag: W/&quot;68a-yP3L6LkpAW7J30ubTAOYow&quot; X-Powered-By: Express"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1499284858, "post_id": 44934067, "comment_id": 76846078, "body": "Sorry if I bother you, what do you get in a terminal if you run your script? I&#39;m not sure if the IDE is formatting your output."}, {"owner": {"reputation": 11, "user_id": 3713375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36dd88223db8b3858d277c1b751f3b10?s=128&d=identicon&r=PG", "display_name": "adomyaty", "link": "https://stackoverflow.com/users/3713375/adomyaty"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1499286944, "post_id": 44934067, "comment_id": 76847252, "body": "@Sebasti&#225;nPalma when I curl the url through terminal comes same way. I&#39;ll reedit main question with response from terminal"}, {"owner": {"reputation": 11, "user_id": 3713375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36dd88223db8b3858d277c1b751f3b10?s=128&d=identicon&r=PG", "display_name": "adomyaty", "link": "https://stackoverflow.com/users/3713375/adomyaty"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1499287174, "post_id": 44934067, "comment_id": 76847370, "body": "@Sebasti&#225;nPalma It&#39;s an HLS response <a href=\"https://smoothscaling.com/load-testing-hls-with-ruby-jmeter-85b9b1e6db72\" rel=\"nofollow noreferrer\">smoothscaling.com/&hellip;</a>  go down to the HLS section and you&#39;ll get an idea. This is the specs <a href=\"https://tools.ietf.org/html/draft-pantos-http-live-streaming-13\" rel=\"nofollow noreferrer\">tools.ietf.org/html/draft-pantos-http-live-streaming-13</a>"}], "owner": {"reputation": 11, "user_id": 3713375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36dd88223db8b3858d277c1b751f3b10?s=128&d=identicon&r=PG", "display_name": "adomyaty", "link": "https://stackoverflow.com/users/3713375/adomyaty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1499339330, "creation_date": 1499281223, "last_edit_date": 1592644375, "question_id": 44934067, "link": "https://stackoverflow.com/questions/44934067/rest-client-ruby-hls-api-library-how-to-extract-a-url-from-and-hls-stream-respo", "title": "Rest-client Ruby HLS API library: How to extract a url from and HLS stream response and use a specific url as variable for future request", "body": "<pre><code>require 'rest-client'\n\nresponse = RestClient.get 'http://......',\n                      params:\n                          { deviceType: '..',\n                            deviceMake: '..',\n                            deviceVersion: '..',\n                            deviceId: '..',\n                            appVersion: '..',\n                            deviceDNT: '..',\n                            deviceModel: '..',\n                            sid: '..' }\n\nprint response.body\n</code></pre>\n<p>So when I print this I see the response in my IDE (or curl from terminal) which lists 4 urls. I need to grab 1 of those URL's and use it for a new future request. How do I go about extrapolating data and use it for future request</p>\n<p>not that it matters but using Rubymine IDE.</p>\n<p>RESPONSE of the body when I print it from IDE Run:</p>\n<h1>EXTM3U</h1>\n<h1>EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=997452</h1>\n<p>http://.....</p>\n<h1>EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=1539795</h1>\n<p>http://.....</p>\n<h1>EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=2142297</h1>\n<p>http://......</p>\n<h1>EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=3063648</h1>\n<p>http://......</p>\n<h1>EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=572723</h1>\n<p>http://......</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "edited": false, "score": 1, "creation_date": 1499280629, "post_id": 44933878, "comment_id": 76843600, "body": "Do you see this issue in a later version of ruby (e.g 2.4.1)? Also what is the behavior you see? Is it an exception or the code path just doesn&#39;t get executed?"}, {"owner": {"reputation": 5698, "user_id": 292780, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8fff275bb5296084767b9e39cffe2409?s=128&d=identicon&r=PG", "display_name": "bioffe", "link": "https://stackoverflow.com/users/292780/bioffe"}, "reply_to_user": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "edited": false, "score": 0, "creation_date": 1499280843, "post_id": 44933878, "comment_id": 76843715, "body": "I added the stacktrace. If one would short the param in half, it works fine. Can&#39;t install newer ruby at work."}], "answers": [{"comments": [{"owner": {"reputation": 5698, "user_id": 292780, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8fff275bb5296084767b9e39cffe2409?s=128&d=identicon&r=PG", "display_name": "bioffe", "link": "https://stackoverflow.com/users/292780/bioffe"}, "edited": false, "score": 0, "creation_date": 1499281310, "post_id": 44934027, "comment_id": 76843994, "body": "But how do you explain that full path always works regardless of the size?"}, {"owner": {"reputation": 1371, "user_id": 623316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa2761ad1bad1ee4f56dd5c3514dd765?s=128&d=identicon&r=PG", "display_name": "Jon Wolski", "link": "https://stackoverflow.com/users/623316/jon-wolski"}, "reply_to_user": {"reputation": 5698, "user_id": 292780, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8fff275bb5296084767b9e39cffe2409?s=128&d=identicon&r=PG", "display_name": "bioffe", "link": "https://stackoverflow.com/users/292780/bioffe"}, "edited": false, "score": 0, "creation_date": 1499357566, "post_id": 44934027, "comment_id": 76883380, "body": "@bioffe Perhaps the path string is computed by Ruby before calling any WinAPI. The path without the filename is only 215 &#39;characters,&#39; while the full  file path itself is 258 &#39;characters&#39;. (Technically, it is not just a 260-character limit. I think the path after the drive specification [<code>C:</code>] has to be 255 or fewer characters)"}], "tags": [], "owner": {"reputation": 1371, "user_id": 623316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa2761ad1bad1ee4f56dd5c3514dd765?s=128&d=identicon&r=PG", "display_name": "Jon Wolski", "link": "https://stackoverflow.com/users/623316/jon-wolski"}, "is_accepted": false, "score": 1, "last_activity_date": 1499281096, "creation_date": 1499281096, "answer_id": 44934027, "question_id": 44933878, "link": "https://stackoverflow.com/questions/44933878/file-open-fails-to-open-relative-path-if-path-is-bigger-than-certain-size/44934027#44934027", "title": "File.open fails to open relative path if path is bigger than certain size", "body": "<p>See <a href=\"https://stackoverflow.com/questions/1880321/why-does-the-260-character-path-length-limit-exist-in-windows\">Why does the 260 character path length limit exist in Windows?</a> and <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85).aspx</a></p>\n\n<p>Certain Windows APIs have a file path string-length limit of 260 'characters.' (I assume that refers to a Windows CP-1252 character.)</p>\n\n<p>I suspect that JRuby navigates file paths through the JVM, which works around this limitation.  See <a href=\"https://stackoverflow.com/questions/10094365/how-does-java-circumvent-the-windows-max-path-winapi-limitation\">How does Java circumvent the windows MAX_PATH WinAPI limitation</a>. </p>\n"}], "owner": {"reputation": 5698, "user_id": 292780, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8fff275bb5296084767b9e39cffe2409?s=128&d=identicon&r=PG", "display_name": "bioffe", "link": "https://stackoverflow.com/users/292780/bioffe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499281096, "creation_date": 1499280535, "last_edit_date": 1499281032, "question_id": 44933878, "link": "https://stackoverflow.com/questions/44933878/file-open-fails-to-open-relative-path-if-path-is-bigger-than-certain-size", "title": "File.open fails to open relative path if path is bigger than certain size", "body": "<pre><code>require 'FileUtils'\npath = '../tmp/brpm_storage/FGRKKSSUI/lentkriskeditor/1.2.5/20170705121128/lentkriskeditor-1.2.5-dist/lentkriskeditor-1.2.5/jre/jre1.8.0_131/lib/desktop/icons/HighContrast/48x48/mimetypes/gnome-mime-application-x-java-jnlp-file.png'\n\nFileUtils.mkdir_p(File.dirname(path))\n\nFile.open(path, 'wb') {|file|\n# File.open(File.expand_path(path), 'wb') {|file|  # Full path always works\n    file.write('Hello') \n}\n</code></pre>\n\n<p>fails</p>\n\n<pre><code>tmp.rb:6:in `initialize': No such file or directory - ../tmp/brpm_storage/FGRKKSSUI/lentkriskeditor/1.2.5/20170705121128/lentkriskeditor-1.2.5-dist/lentkriskeditor-1.2.5/jre/jre1.8.0_131/lib/desktop/icons/HighContrast/48x48/mimetypes/gnome-mime-application-x-java-jnlp-file.png (Errno::ENOENT)\n\"C:/src3/branches/PSENG-5315/BMC/utils/tmp/brpm_storage/FGRKKSSUI/lentkriskeditor/1.2.5/20170705121128/lentkriskeditor-1.2.5-dist/lentkriskeditor-1.2.5/jre/jre1.8.0_131/lib/desktop/icons/HighContrast/48x48/mimetypes/gnome-mime-application-x-java-jnlp-file.png\"\n    from C:/src3/branches/PSENG-5315/BMC/utils/yatra_logic/tmp.rb:6:in `open'\n    from C:/src3/branches/PSENG-5315/BMC/utils/yatra_logic/tmp.rb:6:in `&lt;top (required)&gt;'\n    from -e:1:in `load'\n    from -e:1:in `&lt;main&gt;'\n</code></pre>\n\n<p>I noticed this phenomena in ruby 1.9.3 v551 and 2.0.0. With JRuby everything works as expected. I wonder what is the culprit? </p>\n\n<pre><code>c:\\Ruby200\\bin\\ruby.exe -v\nruby 2.0.0p0 (2013-02-24) [i386-mingw32]\n</code></pre>\n"}, {"tags": ["ruby", "activerecord"], "comments": [{"owner": {"reputation": 10159, "user_id": 4907630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b96aeab7486cd88da186e9c52eb7d7c7?s=128&d=identicon&r=PG&f=1", "display_name": "eugenioy", "link": "https://stackoverflow.com/users/4907630/eugenioy"}, "edited": false, "score": 2, "creation_date": 1499280378, "post_id": 44933597, "comment_id": 76843458, "body": "see this thread: <a href=\"https://stackoverflow.com/questions/24352603/model-named-type-in-rails\" title=\"model named type in rails\">stackoverflow.com/questions/24352603/model-named-type-in-rai&zwnj;&#8203;ls</a>"}, {"owner": {"reputation": 2738, "user_id": 1989695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bcb82e68ea3505d32dbfd63e5fd7225e?s=128&d=identicon&r=PG", "display_name": "noscreenname", "link": "https://stackoverflow.com/users/1989695/noscreenname"}, "reply_to_user": {"reputation": 10159, "user_id": 4907630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b96aeab7486cd88da186e9c52eb7d7c7?s=128&d=identicon&r=PG&f=1", "display_name": "eugenioy", "link": "https://stackoverflow.com/users/4907630/eugenioy"}, "edited": false, "score": 0, "creation_date": 1499285375, "post_id": 44933597, "comment_id": 76846398, "body": "@eugenioy So you just can&#39;t have a class named <code>Type</code> in rails?"}, {"owner": {"reputation": 10159, "user_id": 4907630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b96aeab7486cd88da186e9c52eb7d7c7?s=128&d=identicon&r=PG&f=1", "display_name": "eugenioy", "link": "https://stackoverflow.com/users/4907630/eugenioy"}, "edited": false, "score": 0, "creation_date": 1499285939, "post_id": 44933597, "comment_id": 76846723, "body": "Seems it would not be advisable to use that name, though the related answer suggests some workarounds if you really can&#39;t use a different name. I would call it AppType and forget about the issue :)"}], "owner": {"reputation": 2738, "user_id": 1989695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bcb82e68ea3505d32dbfd63e5fd7225e?s=128&d=identicon&r=PG", "display_name": "noscreenname", "link": "https://stackoverflow.com/users/1989695/noscreenname"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1499283472, "creation_date": 1499279625, "question_id": 44933597, "link": "https://stackoverflow.com/questions/44933597/class-loading-error-in-rails", "title": "Class loading error in rails", "body": "<p>I have a class <code>App</code> located in <code>app/models/administration/app.rb</code></p>\n\n<pre><code>class App &lt; ActiveRecord::Base\n    #...\nend\n</code></pre>\n\n<p>And a class <code>App::Type</code> located in <code>app/models/administration/app/type.rb</code></p>\n\n<pre><code>class App\n    class Type\n        attr_reader :sym, :name\n        ALL = [:type1, :type2]\n        #...   \n    end\nend\n</code></pre>\n\n<p>My application is configured to autoload from <code>app/models/administration</code> directory </p>\n\n<pre><code>config.autoload_paths += %W(#...\n                            #{config.root}/app/models/administration)\n</code></pre>\n\n<p>When I try to access <code>App::Type::ALL</code> from rails console, I get the following error </p>\n\n<pre><code>pry(main)&gt; App::Type::ALL\n</code></pre>\n\n<blockquote>\n  <p>NameError: uninitialized constant ActiveRecord::Type::ALL</p>\n</blockquote>\n\n<p>Why is there a confusion between <code>App::Type::ALL</code> and <code>ActiveRecord::Type::ALL</code> and how can I fix it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1499287900, "post_id": 44933512, "comment_id": 76847746, "body": "The issue with &quot;naked rescues&quot; like this is that it can be hard to separate the expected errors, and the non-expected ones. What is your use-case for this? Why would it not suffice to use the built in validation functionality of ActiveRecord?"}], "answers": [{"comments": [{"owner": {"reputation": 2765, "user_id": 5864985, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/UlhbW.jpg?s=128&g=1", "display_name": "Ronan Lopes", "link": "https://stackoverflow.com/users/5864985/ronan-lopes"}, "edited": false, "score": 0, "creation_date": 1499280037, "post_id": 44933676, "comment_id": 76843277, "body": "Thanks, that&#39;s exactly what I was looking for. Yeah, I know that sillent rescue is not good, but it&#39;s for an app, and in case the return is false, I have some default message error. Anyway, I&#39;m gonna call that in some of my models, so where should I put that &quot;with_transaction&quot; function?"}, {"owner": {"reputation": 580, "user_id": 3251097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb5cd4aa3846aae5da34794a52971405?s=128&d=identicon&r=PG", "display_name": "user81269", "link": "https://stackoverflow.com/users/3251097/user81269"}, "reply_to_user": {"reputation": 2765, "user_id": 5864985, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/UlhbW.jpg?s=128&g=1", "display_name": "Ronan Lopes", "link": "https://stackoverflow.com/users/5864985/ronan-lopes"}, "edited": false, "score": 0, "creation_date": 1499280292, "post_id": 44933676, "comment_id": 76843410, "body": "You could: A.) create a concern and included it in the models you&#39;re using. B.) dynamically augment <code>ActiveRecord::Base</code>. C.) add it to <code>ApplicationRecord</code> (rails 5). Or create a an abstract model, from which all your models inherit."}, {"owner": {"reputation": 2765, "user_id": 5864985, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/UlhbW.jpg?s=128&g=1", "display_name": "Ronan Lopes", "link": "https://stackoverflow.com/users/5864985/ronan-lopes"}, "edited": false, "score": 0, "creation_date": 1499280471, "post_id": 44933676, "comment_id": 76843508, "body": "Add it to ApplicationRecord seems a good option. Thank you so much!"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1499291866, "post_id": 44933676, "comment_id": 76849548, "body": "Using a blind <code>rescue</code> (&quot;Pok&#233;mon exception handling&quot;, catch them all!) is a really bad idea. Do try and rescue <i>only</i> those things related to transaction issues, let the rest flutter up. Paving over problems with a boolean is how severe problems fester in your code without anyone knowing anything is wrong."}, {"owner": {"reputation": 2765, "user_id": 5864985, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/UlhbW.jpg?s=128&g=1", "display_name": "Ronan Lopes", "link": "https://stackoverflow.com/users/5864985/ronan-lopes"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1499354171, "post_id": 44933676, "comment_id": 76880907, "body": "Hahaha nice joke. Thanks @tadman, I&#39;m really gonna do something about that!"}], "tags": [], "owner": {"reputation": 580, "user_id": 3251097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb5cd4aa3846aae5da34794a52971405?s=128&d=identicon&r=PG", "display_name": "user81269", "link": "https://stackoverflow.com/users/3251097/user81269"}, "is_accepted": true, "score": 3, "last_activity_date": 1499279872, "creation_date": 1499279872, "answer_id": 44933676, "question_id": 44933512, "link": "https://stackoverflow.com/questions/44933512/ruby-rails-dry-function-pattern/44933676#44933676", "title": "Ruby (Rails) DRY - Function pattern", "body": "<p>You could create a method like this:</p>\n\n<pre><code>def with_transaction\n  ActiveRecord::Base.transaction do\n    yield\n  end\n  return true\nrescue \n  return false\nend\n</code></pre>\n\n<p>And then use it like:</p>\n\n<pre><code>with_transaction do \n  # some db manipulation\nend\n</code></pre>\n\n<p>But generally I would advise against silencing errors like that.</p>\n"}], "owner": {"reputation": 2765, "user_id": 5864985, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/UlhbW.jpg?s=128&g=1", "display_name": "Ronan Lopes", "link": "https://stackoverflow.com/users/5864985/ronan-lopes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 44933676, "answer_count": 1, "score": 0, "last_activity_date": 1499279872, "creation_date": 1499279281, "question_id": 44933512, "link": "https://stackoverflow.com/questions/44933512/ruby-rails-dry-function-pattern", "title": "Ruby (Rails) DRY - Function pattern", "body": "<p>I'm using ruby on rails for a project and noticed I'm using some pattern on my functions that goes like this:</p>\n\n<pre><code>begin\n    ActiveRecord::Base.transaction do\n        #some database manipulation\n    end\n    return true\nrescue\n    return false\nend\n</code></pre>\n\n<p>So I would like to DRY my code, in a way that only that #some database manipulation is gonna change. Any ideas of how I could do that? Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "nested-attributes"], "comments": [{"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "edited": false, "score": 1, "creation_date": 1499279569, "post_id": 44933456, "comment_id": 76843013, "body": "Can you show us the server log when you submit the form?"}, {"owner": {"reputation": 111, "user_id": 7948567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de3cab0757ae92ece565621311322846?s=128&d=identicon&r=PG&f=1", "display_name": "cotut", "link": "https://stackoverflow.com/users/7948567/cotut"}, "reply_to_user": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "edited": false, "score": 0, "creation_date": 1499281658, "post_id": 44933456, "comment_id": 76844184, "body": "I edited question. I dont understand why there is no rollback. I am using rails 5.02"}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "edited": false, "score": 0, "creation_date": 1499281997, "post_id": 44933456, "comment_id": 76844379, "body": "It looks correct. Do you have any validation in your Page model? Could you post the full code of both models?"}, {"owner": {"reputation": 111, "user_id": 7948567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de3cab0757ae92ece565621311322846?s=128&d=identicon&r=PG&f=1", "display_name": "cotut", "link": "https://stackoverflow.com/users/7948567/cotut"}, "reply_to_user": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "edited": false, "score": 0, "creation_date": 1499283101, "post_id": 44933456, "comment_id": 76845065, "body": "in pages <code>belongs_to book</code>.   in book model <code>has_many :pages, belongs_to :booklist, accepts_nested_attributes_for :pages</code>"}, {"owner": {"reputation": 696, "user_id": 7314004, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/95806024183ca05eed5c8a100c610ce8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter H&#248;jlund Andersen", "link": "https://stackoverflow.com/users/7314004/peter-h%c3%b8jlund-andersen"}, "edited": false, "score": 0, "creation_date": 1499285717, "post_id": 44933456, "comment_id": 76846594, "body": "are they on the same line? separated by &quot;,&quot; in your model or is it just for showing?"}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 7948567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de3cab0757ae92ece565621311322846?s=128&d=identicon&r=PG&f=1", "display_name": "cotut", "link": "https://stackoverflow.com/users/7948567/cotut"}, "edited": false, "score": 0, "creation_date": 1499319834, "post_id": 44938727, "comment_id": 76857043, "body": "thanks it didnt work but this worked &lt;%=f.fields_for :pages, @book.pages.each do |builder| %&gt;"}], "tags": [], "owner": {"reputation": 1051, "user_id": 5451285, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/KnO3v.jpg?s=128&g=1", "display_name": "PrimeTimeTran", "link": "https://stackoverflow.com/users/5451285/primetimetran"}, "is_accepted": true, "score": 3, "last_activity_date": 1499307058, "creation_date": 1499307058, "answer_id": 44938727, "question_id": 44933456, "link": "https://stackoverflow.com/questions/44933456/rails-5-nested-attributes-not-saving-update/44938727#44938727", "title": "Rails 5 nested attributes not saving update", "body": "<p>Could you try <code>f.fields_for :pages, @book.pages.build do |builder|</code>?\nI'm not 100% sure this will work but I had the same problem with fields for a while back and this is how I fixed it. </p>\n"}], "owner": {"reputation": 111, "user_id": 7948567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de3cab0757ae92ece565621311322846?s=128&d=identicon&r=PG&f=1", "display_name": "cotut", "link": "https://stackoverflow.com/users/7948567/cotut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1997, "favorite_count": 0, "accepted_answer_id": 44938727, "answer_count": 1, "score": 4, "last_activity_date": 1499307058, "creation_date": 1499279100, "last_edit_date": 1499282789, "question_id": 44933456, "link": "https://stackoverflow.com/questions/44933456/rails-5-nested-attributes-not-saving-update", "title": "Rails 5 nested attributes not saving update", "body": "<p>I have two models with nested attributes. My form can update book :title, but not nested attributes. After I submit i see paramaters is going in terminal but there is no rollback just <code>(0.2ms)begintransaction (0.2ms)commit transaction.</code></p>\n\n<p>I spent whole day to solve that, i tried <code>inverse_of</code>, <code>optional: true</code>, <code>autosave: true</code> in models. But still not able save update. Also there is no unpermitted paramater error. There is another problem.</p>\n\n<p>Model:</p>\n\n<pre><code>has_many :pages\naccepts_nested_attributes_for :pages\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>def update\n  if @book.update_attributes(book_params)\n    redirect_to @book\n  else\n    render 'edit'\n  end\nend\n\ndef book_params\n  params.require(:book).permit(:title, pages_attributes: [:id, :state])\nend\n</code></pre>\n\n<p>My form:</p>\n\n<pre><code>&lt;%= form_for(@book) do |f| %&gt;\n  &lt;%= f.label :title %&gt;\n  &lt;%= f.text_field :title, :autofocus =&gt; true, class: 'form-control' %&gt;\n\n  &lt;%= f.fields_for :pages do |builder| %&gt;\n    &lt;%= builder.select(:state, options_for_select({ \"close\" =&gt; 0, \"open\" =&gt; 1, })) %&gt; \n  &lt;% end %&gt; \n  &lt;%= f.submit 'Submit',  %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Example console result:</p>\n\n<pre><code>book = Book.first\nbook.update(title:\"test\", pages_attributes: [id: 124142 , book_id: 1, state: 1 ])\n   (0.2ms)  begin transaction\n   (0.2ms)  commit transaction\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>Server log:</p>\n\n<pre><code>Started PATCH \"/book/firstbook\" for 127.0.0.1 at 2017-07-05 21:57:37 +0300\nProcessing by booksController#update as HTML\n  Parameters: {\n    \"utf8\"=&gt;\"\u2713\",\n    \"authenticity_token\"=&gt;\"pElKKQq+M/5GuEG6nJ6Ac1vkEHyIknA2vPiDC9ND+50tq34nDtCRRX9k6TxaMZCInufp68m6BnO8jt4BsJ1bFg==\",\n    \"book\"=&gt;{\n      \"title\"=&gt;\"firstbook\", \n      \"pages_attributes\"=&gt;{\n        \"0\"=&gt;{\"state\"=&gt;\"0\", \"id\"=&gt;\"1\"}, \n        \"1\"=&gt;{\"state\"=&gt;\"0\", \"id\"=&gt;\"2\"}, \n        \"2\"=&gt;{\"state\"=&gt;\"0\", \"id\"=&gt;\"3\"}, \n        \"3\"=&gt;{\"state\"=&gt;\"0\", \"id\"=&gt;\"4\"}, \n        \"4\"=&gt;{\"state\"=&gt;\"0\", \"id\"=&gt;\"5\"}, \n        \"5\"=&gt;{\"state\"=&gt;\"0\", \"id\"=&gt;\"6\"}, \n        \"6\"=&gt;{\"state\"=&gt;\"0\", \"id\"=&gt;\"7\"}, \n        \"7\"=&gt;{\"state\"=&gt;\"0\", \"id\"=&gt;\"8\"}, \n        \"8\"=&gt;{\"state\"=&gt;\"0\", \"id\"=&gt;\"9\"}, \n        \"9\"=&gt;{\"state\"=&gt;\"0\", \"id\"=&gt;\"10\"},\n      }\n    }, \n    \"commit\"=&gt;\"submit\", \"id\"=&gt;\"firstbook\"\n  }\n  book Load (0.2ms)  SELECT  \"books\".* FROM \"books\" WHERE \"books\".\"slug\" = ? ORDER BY \"books\".\"id\" ASC LIMIT ?  [[\"slug\", \"firstbook\"], [\"LIMIT\", 1]]\n   (0.1ms)  begin transaction\n   (0.1ms)  commit transaction\nRedirected to http://localhost:3000/book/firstbook\nCompleted 302 Found in 48ms (ActiveRecord: 0.5ms)\n</code></pre>\n"}, {"tags": ["ruby", "libgosu"], "comments": [{"owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "edited": false, "score": 0, "creation_date": 1499307756, "post_id": 44933180, "comment_id": 76853884, "body": "Whats the actual line number/code you get the error on?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8260854, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PNL6k0NAIIU/AAAAAAAAAAI/AAAAAAAAAG4/hmBGOI0wlZE/photo.jpg?sz=128", "display_name": "Rucksack Gamer", "link": "https://stackoverflow.com/users/8260854/rucksack-gamer"}, "edited": false, "score": 0, "creation_date": 1499279958, "post_id": 44933623, "comment_id": 76843227, "body": "Ugh... That didn&#39;t fix the problem... I just love the File I/O in Ruby..."}, {"owner": {"reputation": 13, "user_id": 8260854, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PNL6k0NAIIU/AAAAAAAAAAI/AAAAAAAAAG4/hmBGOI0wlZE/photo.jpg?sz=128", "display_name": "Rucksack Gamer", "link": "https://stackoverflow.com/users/8260854/rucksack-gamer"}, "edited": false, "score": 0, "creation_date": 1499280272, "post_id": 44933623, "comment_id": 76843397, "body": "The same one, &quot;No such file or directory @ rb_sysopen - settings.set (Errno::ENOENT)&quot;"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 13, "user_id": 8260854, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PNL6k0NAIIU/AAAAAAAAAAI/AAAAAAAAAG4/hmBGOI0wlZE/photo.jpg?sz=128", "display_name": "Rucksack Gamer", "link": "https://stackoverflow.com/users/8260854/rucksack-gamer"}, "edited": false, "score": 0, "creation_date": 1499280771, "post_id": 44933623, "comment_id": 76843687, "body": "@RucksackGamer Are you passing the <code>&quot;w&quot;</code> option?"}, {"owner": {"reputation": 13, "user_id": 8260854, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PNL6k0NAIIU/AAAAAAAAAAI/AAAAAAAAAG4/hmBGOI0wlZE/photo.jpg?sz=128", "display_name": "Rucksack Gamer", "link": "https://stackoverflow.com/users/8260854/rucksack-gamer"}, "edited": false, "score": 0, "creation_date": 1499280946, "post_id": 44933623, "comment_id": 76843790, "body": "I just did. It said that &quot;w&quot; wasn&#39;t a recognized as a variable. This is how I set it up if that matters (if File.file?(&quot;settings.set&quot;,w))..."}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 13, "user_id": 8260854, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PNL6k0NAIIU/AAAAAAAAAAI/AAAAAAAAAG4/hmBGOI0wlZE/photo.jpg?sz=128", "display_name": "Rucksack Gamer", "link": "https://stackoverflow.com/users/8260854/rucksack-gamer"}, "edited": false, "score": 0, "creation_date": 1499281011, "post_id": 44933623, "comment_id": 76843832, "body": "@RucksackGamer You must use quotes or double quotes since <code>w</code> is a string; like this: <code>(&quot;settings.set&quot;, &quot;w&quot;)</code>"}, {"owner": {"reputation": 13, "user_id": 8260854, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PNL6k0NAIIU/AAAAAAAAAAI/AAAAAAAAAG4/hmBGOI0wlZE/photo.jpg?sz=128", "display_name": "Rucksack Gamer", "link": "https://stackoverflow.com/users/8260854/rucksack-gamer"}, "edited": false, "score": 0, "creation_date": 1499281327, "post_id": 44933623, "comment_id": 76844007, "body": "Oh geeze, I forgot that... Thank you, I got the file somewhat working. Now I just need to figure out which access mode is what I need for it to work right. Again thank you, I&#39;ve been stumped on that for about 3 days now."}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 13, "user_id": 8260854, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PNL6k0NAIIU/AAAAAAAAAAI/AAAAAAAAAG4/hmBGOI0wlZE/photo.jpg?sz=128", "display_name": "Rucksack Gamer", "link": "https://stackoverflow.com/users/8260854/rucksack-gamer"}, "edited": false, "score": 0, "creation_date": 1499281537, "post_id": 44933623, "comment_id": 76844116, "body": "@RucksackGamer Glad to help. Also check updated answer for a side note regarding how you set <code>settings</code> value. And don&#39;t forget to accept the answer (by clicking the tick on the left) if my answer helped solve your issue. :)"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 13, "user_id": 8260854, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PNL6k0NAIIU/AAAAAAAAAAI/AAAAAAAAAG4/hmBGOI0wlZE/photo.jpg?sz=128", "display_name": "Rucksack Gamer", "link": "https://stackoverflow.com/users/8260854/rucksack-gamer"}, "edited": false, "score": 0, "creation_date": 1499281686, "post_id": 44933623, "comment_id": 76844197, "body": "@RucksackGamer <a href=\"http://ruby-doc.org/core-2.4.1/IO.html#method-c-new-label-IO+Open+Mode\" rel=\"nofollow noreferrer\">Check here</a> for available access modes."}, {"owner": {"reputation": 13, "user_id": 8260854, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PNL6k0NAIIU/AAAAAAAAAAI/AAAAAAAAAG4/hmBGOI0wlZE/photo.jpg?sz=128", "display_name": "Rucksack Gamer", "link": "https://stackoverflow.com/users/8260854/rucksack-gamer"}, "edited": false, "score": 0, "creation_date": 1499281713, "post_id": 44933623, "comment_id": 76844216, "body": "It definitely did."}], "tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": true, "score": 1, "last_activity_date": 1499281737, "last_edit_date": 1499281737, "creation_date": 1499279717, "answer_id": 44933623, "question_id": 44933180, "link": "https://stackoverflow.com/questions/44933180/ruby-i-o-existence-issues/44933623#44933623", "title": "Ruby I/O Existence Issues", "body": "<p>You could try this:</p>\n\n<pre><code>settings = []\n\nif File.file?(\"settings.set\")\n  settings = File.read(\"settings.set\").split(\"\\n\")\nelse\n  File.open(\"settings.set\", \"w\") do |file|\n    file.write \"800\\n600\"\n  end\nend\n</code></pre>\n\n<hr>\n\n<p>As a side note, consider that the above code will set <code>settings</code> only if <em>settings.set</em> file exits, otherwise it will remain in an empty array (i.e. <code>[]</code>).</p>\n\n<p>If you wish to avoid that, just define settings with the default values, for example:</p>\n\n<pre><code>settings = [800, 600]\n</code></pre>\n\n<p>Now if <em>settings.set</em> file doesn't exist, then <code>settings</code> will be <code>[800, 600]</code>, otherwise it will be overwritten with the values from <em>settings.set</em>.</p>\n\n<p>To avoid writing <code>800</code> and <code>600</code> twice, you could use <code>settings</code> variable to get the values to be written in the new file, for example:</p>\n\n<pre><code>file.write(settings.join(\"\\n\"))\n</code></pre>\n\n<p>Putting it all together, your code would look like this:</p>\n\n<pre><code>settings = [800, 600]\n\nif File.file?(\"settings.set\")\n  settings = File.read(\"settings.set\").split(\"\\n\")\nelse\n  File.open(\"settings.set\", \"w\") do |file|\n    file.write(settings.join(\"\\n\"))\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8260854, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PNL6k0NAIIU/AAAAAAAAAAI/AAAAAAAAAG4/hmBGOI0wlZE/photo.jpg?sz=128", "display_name": "Rucksack Gamer", "link": "https://stackoverflow.com/users/8260854/rucksack-gamer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 44933623, "answer_count": 1, "score": 1, "last_activity_date": 1500371493, "creation_date": 1499278082, "last_edit_date": 1500371493, "question_id": 44933180, "link": "https://stackoverflow.com/questions/44933180/ruby-i-o-existence-issues", "title": "Ruby I/O Existence Issues", "body": "<p>I have a decent amount of knowledge about Ruby code, but I do have an issue with my current project. I use Gosu to make 2D games (and once I figure out how, simple 3D games), so I need a resolution. </p>\n\n<p>And this is where my question comes in, why does Ruby keep giving me an error when seeing if the settings file exists? I've been trying to get it working with the file not existing, which keeps giving me the error, \"'initialize': No such file or directory @ rb_sysopen - ./settings.set (Errno::ENOENT)\" which has been annoying me for the last few days. The file gives no issues and actually works as intended when I leave the file created, but I want it to be where if the file gets deleted off of someone's computer, it rebuilds the file and creates a new one using default values. </p>\n\n<p>Here's the area that it keeps crashing at:</p>\n\n<pre><code>settings = []\n\nsettings_file_existance = File.file?(\"settings.set\")\n\nif settings_file_existance == true\n\n  File.open(\"settings.set\").readlines.each do |line|\n    settings.push line\n  end\n\nelse\n\n  settings_file = File.open(\"settings.set\")\n  settings_file.write \"800\"\n  settings_file.write \"\\n\" \n  settings_file.write \"600\"\n  settings_file.close\n\nend\n</code></pre>\n\n<p>I have tried looking for fixes on this site, along with many others, but no one so far has been able to help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "render", "partial"], "answers": [{"comments": [{"owner": {"reputation": 116, "user_id": 7959508, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f709b5c45dfa576ac1908802d8c7e817?s=128&d=identicon&r=PG&f=1", "display_name": "Elis Bresciani", "link": "https://stackoverflow.com/users/7959508/elis-bresciani"}, "edited": false, "score": 0, "creation_date": 1499277142, "post_id": 44932814, "comment_id": 76841689, "body": "What would this f:f ? Can you please use an example by passing a :body?"}, {"owner": {"reputation": 369, "user_id": 4104237, "user_type": "registered", "profile_image": "https://graph.facebook.com/1546038308/picture?type=large", "display_name": "Eric", "link": "https://stackoverflow.com/users/4104237/eric"}, "reply_to_user": {"reputation": 116, "user_id": 7959508, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f709b5c45dfa576ac1908802d8c7e817?s=128&d=identicon&r=PG&f=1", "display_name": "Elis Bresciani", "link": "https://stackoverflow.com/users/7959508/elis-bresciani"}, "edited": false, "score": 0, "creation_date": 1499277681, "post_id": 44932814, "comment_id": 76841990, "body": "I will modify my answer"}], "tags": [], "owner": {"reputation": 369, "user_id": 4104237, "user_type": "registered", "profile_image": "https://graph.facebook.com/1546038308/picture?type=large", "display_name": "Eric", "link": "https://stackoverflow.com/users/4104237/eric"}, "is_accepted": false, "score": 0, "last_activity_date": 1499278038, "last_edit_date": 1499278038, "creation_date": 1499276647, "answer_id": 44932814, "question_id": 44932574, "link": "https://stackoverflow.com/questions/44932574/breaking-a-form-with-a-partial/44932814#44932814", "title": "Breaking a form with a partial", "body": "<p>You probably have to pass <code>f</code> into the partial...</p>\n\n<p><code>&lt;%= render partial 'fields', locals: { f: f } %&gt;</code></p>\n\n<p>You could possibly iterate over a list of attributes you want to render your fields partial for and pass the current iteration into the partial:</p>\n\n<pre><code>&lt;% %w(objective settings related_documents).each do |field| %&gt;\n    &lt;%= render partial 'fields', locals: { f: f, field: field } %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>partial</p>\n\n<pre><code>&lt;div class=\"field\"&gt;\n    &lt;%= f.label field.to_sym %&gt;&lt;br&gt;\n    &lt;%= f.cktext_area field.to_sym %&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56, "user_id": 2523117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a35891868f0350f418adf082d16f1409?s=128&d=identicon&r=PG", "display_name": "Akshay Chhikara", "link": "https://stackoverflow.com/users/2523117/akshay-chhikara"}, "is_accepted": false, "score": 0, "last_activity_date": 1499278005, "creation_date": 1499278005, "answer_id": 44933160, "question_id": 44932574, "link": "https://stackoverflow.com/questions/44932574/breaking-a-form-with-a-partial/44933160#44933160", "title": "Breaking a form with a partial", "body": "<p>You can pass various arguments when calling a partial. You can do something like this :-</p>\n\n<p><code>&lt;%= render partial 'fields', locals: { f: f, field_name: :body } %&gt;</code></p>\n\n<p>Here f is the form object and :body will be the field_name you want to pass when calling the partial.</p>\n\n<p>You can even pass multiple fields in an array and iterate over them in the partial.</p>\n\n<p><code>&lt;%= render partial 'fields', locals: { f: f, field_names: [:body, :bio] } %&gt;</code></p>\n\n<p>Your partial code will look something like this - </p>\n\n<pre><code>&lt;% field_names.each do |field_name| %&gt;\n    &lt;div class=\"field\"&gt;\n        &lt;%= f.label field_name%&gt;&lt;br&gt;\n        &lt;%= f.text_area :field_name %&gt;\n    &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>You can do the same in your main file too instead of calling so many partails. As it is not considered a good practise. </p>\n"}, {"tags": [], "owner": {"reputation": 696, "user_id": 7314004, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/95806024183ca05eed5c8a100c610ce8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter H&#248;jlund Andersen", "link": "https://stackoverflow.com/users/7314004/peter-h%c3%b8jlund-andersen"}, "is_accepted": true, "score": 0, "last_activity_date": 1499282095, "last_edit_date": 1499282095, "creation_date": 1499278072, "answer_id": 44933179, "question_id": 44932574, "link": "https://stackoverflow.com/questions/44932574/breaking-a-form-with-a-partial/44933179#44933179", "title": "Breaking a form with a partial", "body": "<p>I would make a partial call with locals (f) and a collection (field_name symbols). </p>\n\n<p>So i would create an array in my controller in the corresponding action like this.</p>\n\n<p><strong>Edit</strong> <em>Actually you could create a before action: <code>before_action :field_names, only: [:new, :edit]</code></em></p>\n\n<pre><code>def field_names\n  # %i creates an array of symbols\n  @field_names = %i(objectives settings related_objects ...) \nend\n</code></pre>\n\n<p>And then in your form you can call:</p>\n\n<p><em>With the \"as:\" you can now access an instance of the @fields_names \ncalled \"field_name\" in each partial</em></p>\n\n<pre><code> &lt;%= render partial: \"fields\", collection: @field_names, as: :field_name, \n locals: {f: f} %&gt; \n</code></pre>\n\n<p>And then you can inset field_name and f in your <code>_fields.html.erb</code> </p>\n\n<pre><code>&lt;div class=\"field\"&gt;\n &lt;%= f.label field_name %&gt;&lt;br&gt;\n &lt;%= f.cktext_area field_name %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>The smart thing about <code>collection</code> is that it will automatically render the same number of times as there are values in the array.</p>\n\n<p>Look for more in the section Local variables in <a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html\" rel=\"nofollow noreferrer\">the guide</a></p>\n\n<p>Good luck! :)</p>\n"}, {"tags": [], "owner": {"reputation": 2408, "user_id": 3100462, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/1566955386/picture?type=large", "display_name": "Ramon Marques", "link": "https://stackoverflow.com/users/3100462/ramon-marques"}, "is_accepted": false, "score": 0, "last_activity_date": 1499283106, "creation_date": 1499283106, "answer_id": 44934555, "question_id": 44932574, "link": "https://stackoverflow.com/questions/44932574/breaking-a-form-with-a-partial/44934555#44934555", "title": "Breaking a form with a partial", "body": "<p>A better approach to this in my humble opinion is to customize a form helper and do something like this:</p>\n\n<pre><code>&lt;%= f.cktext_with_label :objective %&gt;\n&lt;%= f.cktext_with_label :settings %&gt;\n&lt;%= f.cktext_with_label :related_documents %&gt;\n&lt;%= f.cktext_with_label :responsability %&gt;\n...\n</code></pre>\n\n<p>You create a new form helper called \"cktext_with_label\" then that create the fields like you want, even the div container for example. </p>\n\n<p>You can check this answer <a href=\"https://stackoverflow.com/questions/2623250/custom-form-helpers\">Custom form helpers</a></p>\n"}], "owner": {"reputation": 116, "user_id": 7959508, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f709b5c45dfa576ac1908802d8c7e817?s=128&d=identicon&r=PG&f=1", "display_name": "Elis Bresciani", "link": "https://stackoverflow.com/users/7959508/elis-bresciani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "accepted_answer_id": 44933179, "answer_count": 4, "score": 0, "last_activity_date": 1499283106, "creation_date": 1499275739, "question_id": 44932574, "link": "https://stackoverflow.com/questions/44932574/breaking-a-form-with-a-partial", "title": "Breaking a form with a partial", "body": "<p>I have this form made by rails scaffold:</p>\n\n<pre><code>&lt;%= form_for(@archive) do |f| %&gt;\n  &lt;% if @archive.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;&lt;%= pluralize(@archive.errors.count, \"error\") %&gt; prohibited this archive from being saved:&lt;/h2&gt;\n\n      &lt;ul&gt;\n      &lt;% @archive.errors.full_messages.each do |message| %&gt;\n        &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :objective %&gt;&lt;br&gt;\n    &lt;%= f.cktext_area :objective %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :settings %&gt;&lt;br&gt;\n    &lt;%= f.cktext_area :settings %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :related_documents %&gt;&lt;br&gt;\n    &lt;%= f.cktext_area :related_documents %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :responsability %&gt;&lt;br&gt;\n    &lt;%= f.cktext_area :responsability %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :material_needed %&gt;&lt;br&gt;\n    &lt;%= f.cktext_area :material_needed %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :description %&gt;&lt;br&gt;\n    &lt;%= f.cktext_area :description %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :preventive_measures %&gt;&lt;br&gt;\n    &lt;%= f.cktext_area :preventive_measures %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :corrective_actions %&gt;&lt;br&gt;\n    &lt;%= f.cktext_area :corrective_actions %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :execution %&gt;&lt;br&gt;\n    &lt;%= f.cktext_area :execution %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>And I wanted to separate the fields, I wanted to use partials because it keeps repeating, what changes is the name of the field, I wanted to render the partial form of a field and pass the field name. Because of the fact that I'm going to use the custom ckeditor, and I'll keep repeating on the form, it may give the error chance. Am I right to think that? Is my idea correct? If so, how can I do to pass the field? Will this influence something in the database?\nI wanted to do something like this.</p>\n\n<p>form:</p>\n\n<pre><code>&lt;%= form_for(@archive) do |f| %&gt;\n  &lt;% if @archive.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;&lt;%= pluralize(@archive.errors.count, \"error\") %&gt; prohibited this archive from being saved:&lt;/h2&gt;\n\n      &lt;ul&gt;\n      &lt;% @archive.errors.full_messages.each do |message| %&gt;\n        &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n&lt;%= render partial 'fields', 'field_name' %&gt;\n\n &lt;!-- Call many times and pass the field name --&gt;\n\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>partial:</p>\n\n<pre><code>  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :field_name%&gt;&lt;br&gt;\n    &lt;%= f.cktext_area :field_name %&gt;\n  &lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "infinite-scroll", "will-paginate"], "comments": [{"owner": {"reputation": 1022, "user_id": 8088139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12c57f53526db57b9982402c7f4a353f?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Gorman", "link": "https://stackoverflow.com/users/8088139/michael-gorman"}, "edited": false, "score": 0, "creation_date": 1499272574, "post_id": 44931345, "comment_id": 76839152, "body": "this question is a little unclear,  are you saying that when you delete an element from your page, that the next load page is incorrect?"}], "answers": [{"tags": [], "owner": {"reputation": 1477, "user_id": 3401124, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f16bfeaf3bc98416db9d226c8ffbdc9?s=128&d=identicon&r=PG&f=1", "display_name": "ddgd", "link": "https://stackoverflow.com/users/3401124/ddgd"}, "is_accepted": false, "score": 2, "last_activity_date": 1499272837, "creation_date": 1499272837, "answer_id": 44931761, "question_id": 44931345, "link": "https://stackoverflow.com/questions/44931345/infinite-scrolling-with-will-paginate-issue-removing-element/44931761#44931761", "title": "Infinite scrolling with will_paginate. Issue removing element", "body": "<p>Pagination gems don't work very well in your use case. </p>\n\n<p>The easiest way to solve this is: if you have a list of elements ordered by e.g. id, on your next page request send the id of the last element on the current page, and use it to offset the next page. </p>\n"}, {"tags": [], "owner": {"reputation": 1022, "user_id": 8088139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12c57f53526db57b9982402c7f4a353f?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Gorman", "link": "https://stackoverflow.com/users/8088139/michael-gorman"}, "is_accepted": false, "score": 1, "last_activity_date": 1499273362, "creation_date": 1499273362, "answer_id": 44931911, "question_id": 44931345, "link": "https://stackoverflow.com/questions/44931345/infinite-scrolling-with-will-paginate-issue-removing-element/44931911#44931911", "title": "Infinite scrolling with will_paginate. Issue removing element", "body": "<p>What is happening is that pagination isn't eager loading the next set, but instead is doing an offset count</p>\n\n<pre><code>initial index + page_length * (page number - 1)\nlimit page_length\n</code></pre>\n\n<p>When you delete an element it forward shifts the index of every element after it in the database for this query. Which leaves your front end element indexes at a different state than the backend has.</p>\n\n<p>You will need to re-load every \"page\" starting with the one containing the deleted element and work to the latest loaded \"page\" to get the front end to have the same element indexes that the back end has.</p>\n"}], "owner": {"reputation": 21, "user_id": 873442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8e80e2f188ff063c76df65bcf6ddebe?s=128&d=identicon&r=PG", "display_name": "migueldiganchi", "link": "https://stackoverflow.com/users/873442/migueldiganchi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 536, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1499273362, "creation_date": 1499271367, "question_id": 44931345, "link": "https://stackoverflow.com/questions/44931345/infinite-scrolling-with-will-paginate-issue-removing-element", "title": "Infinite scrolling with will_paginate. Issue removing element", "body": "<p>I'm implementing infinite scroll with will_paginate and ajax. Whenever I press the 'load more' elements, it brings me the next 4 elements in the collection. At the moment, everything is ok. But when I remove some element of some page, the next page has been already established in the 'load more' button; because of this, the next time I press the 'load more' button, one element is skipped. Does anybody know how can I solve this? (Sorry about my english)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "controller", "routes", "associations"], "comments": [{"owner": {"reputation": 1596, "user_id": 1087841, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ca433142386fe814075e37027dccde0a?s=128&d=identicon&r=PG", "display_name": "Saad", "link": "https://stackoverflow.com/users/1087841/saad"}, "edited": false, "score": 0, "creation_date": 1499268893, "post_id": 44930432, "comment_id": 76836724, "body": "And what do you expect your drop down menu to be"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1499269648, "post_id": 44930432, "comment_id": 76837277, "body": "It looks to me like all you <i>really</i> need is a route like: <code>&#47;platforms&#47;:id</code>; but instead you&#39;d like to &quot;alias&quot; this route as <code>&#47;:game_name&#47;:console_name</code>. This is <a href=\"http://guides.rubyonrails.org/routing.html#route-globbing-and-wildcard-segments\" rel=\"nofollow noreferrer\">possible</a>, but can be difficult to get right. What if you used a route that&#39;s easier to match against - e.g. <code>&#47;platform?game_name=&lt;...&gt;&amp;console_name=&lt;...&gt;</code>? This is still against rails conventions, but would be easier to build."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1499269726, "post_id": 44930432, "comment_id": 76837343, "body": "PS4 is a console and Forza is a Game. What will be a name for platform?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1499269914, "post_id": 44930432, "comment_id": 76837477, "body": "@Pavan I can see the purpose of the model, but the naming is confusing. Perhaps something like <code>GameRelease</code> is better? The <code>name</code> could be <code>&quot;Forza for PS4&quot;</code>."}, {"owner": {"reputation": 1281, "user_id": 2308531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DV29D.jpg?s=128&g=1", "display_name": "Maxim Fedotov", "link": "https://stackoverflow.com/users/2308531/maxim-fedotov"}, "edited": false, "score": 0, "creation_date": 1499270189, "post_id": 44930432, "comment_id": 76837648, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/44906304/nested-urls-controllers-and-views-in-ruby-on-rails\">Nested URLs, controllers and views in Ruby on Rails</a>"}, {"owner": {"reputation": 13, "user_id": 6257950, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fpZMC.jpg?s=128&g=1", "display_name": "Alec ", "link": "https://stackoverflow.com/users/6257950/alec"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1499270210, "post_id": 44930432, "comment_id": 76837666, "body": "@TomLord Lord, Yes I see what you mean! I definitely don&#39;t want to make it too complicated.. All im trying to get is a final show page that brings in the selection that one makes on the site (ie. game and console)"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1499270382, "post_id": 44930432, "comment_id": 76837776, "body": "@TomLord I was referring to OP. I&#39;m confused between console and platform :)"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1499270565, "post_id": 44930432, "comment_id": 76837907, "body": "What is the difference of each game between consoles? Do you have different records in your db for each game and console? For example, <code>Forza</code> is unique in <code>Game</code> model or you have multiple <code>Forza</code> (i.e. one for each <code>Console</code>) records?"}, {"owner": {"reputation": 13, "user_id": 6257950, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fpZMC.jpg?s=128&g=1", "display_name": "Alec ", "link": "https://stackoverflow.com/users/6257950/alec"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1499270571, "post_id": 44930432, "comment_id": 76837911, "body": "Sorry @Pavan, yes &quot;Platform&quot; is confusing haha As one said, it could be GameRelease or MarketPlace for selling items directly for the Game on that Console."}], "answers": [{"comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1499272864, "post_id": 44931569, "comment_id": 76839357, "body": "Also note: As I eluded to in the comments above, this routing approach is &quot;error prone&quot; because, if you&#39;re not careful, you could get conflicts. There&#39;s a good reason why rails provides RESTful routes, like <code>&#47;platorms&#47;:id</code>, instead of this... For example, what happens if you have two &quot;platforms&quot;/&quot;game releases&quot; for the same game name and console -- e.g. a &quot;limited edition&quot; release? This route will conflict."}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1499273239, "post_id": 44931569, "comment_id": 76839570, "body": "@TomLord You are right, this approach must be used carefully. Regarding the possible conflict with <i>two &quot;platforms&quot;/&quot;game releases&quot;</i>, it shouldn&#39;t be an issue since this answer considers only <code>Game</code> and <code>Console</code> models (because of OP&#39;s last edit). So, as long as <code>Game</code> and <code>Console</code> have unique names, this should work."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1499289872, "post_id": 44931569, "comment_id": 76848686, "body": "Yes, agreed... But (1) <i>is</i> the game name unique? (The original post never clarified this.) And (2) are there any <i>other</i> non-RESTful routes like this, that could cause conflicts? (The original post never showed the full <code>routes.rb</code>.) You could even get a route conflict if there is a game called <code>foo</code> and a model called <code>Foo</code>!"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1499295305, "post_id": 44931569, "comment_id": 76850847, "body": "@TomLord Haven&#39;t thought about the edge case where a model could be named as a game, that would be a problem (about <i>1</i> and <i>2</i> i <i>assumed</i> unique names and no other routes like this). Thanks for your comments, i&#39;ll add some notes to clarify when this could work."}, {"owner": {"reputation": 13, "user_id": 6257950, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fpZMC.jpg?s=128&g=1", "display_name": "Alec ", "link": "https://stackoverflow.com/users/6257950/alec"}, "edited": false, "score": 0, "creation_date": 1499323846, "post_id": 44931569, "comment_id": 76859057, "body": "Thanks guys! This is exactly what I need, as there will be only a few &quot;games&quot; and they will all be different in name (No special editions either!) :) I do have one final question, in the games controller under Show, the :name shows me an error &quot;undefined method &#39;name&#39; &quot;, but if I put id: and change the url it works fine.. Could this be a problem with using uppercase in my ActiveRecords and so in the url when I call in lowercase it would not work? Or is it something different? Sorry for bothering you guys!"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 13, "user_id": 6257950, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fpZMC.jpg?s=128&g=1", "display_name": "Alec ", "link": "https://stackoverflow.com/users/6257950/alec"}, "edited": false, "score": 0, "creation_date": 1499346794, "post_id": 44931569, "comment_id": 76874883, "body": "@Alec If the db column is written with uppercase (i.e. <code>NAME</code>) you will need to use <code>Game.find_by(NAME: params[:game]</code> instead. The url (route) doesn&#39;t matter as <code>:game</code> and <code>:console</code> are only the names of the parameters, you can use any name tou want. If it is up to you, i will recommend naming all columns with <i>snake_case</i>."}, {"owner": {"reputation": 13, "user_id": 6257950, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fpZMC.jpg?s=128&g=1", "display_name": "Alec ", "link": "https://stackoverflow.com/users/6257950/alec"}, "edited": false, "score": 0, "creation_date": 1499347724, "post_id": 44931569, "comment_id": 76875622, "body": "@Gerry Thanks, yes all columns are in lowercase which is why Im a little confused.. Im sure ill figure out the problem though."}], "tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": true, "score": 0, "last_activity_date": 1499296935, "last_edit_date": 1499296935, "creation_date": 1499272152, "answer_id": 44931569, "question_id": 44930432, "link": "https://stackoverflow.com/questions/44930432/correct-routing-for-has-many-through/44931569#44931569", "title": "Correct Routing for :has_many :through", "body": "<p>You could achieve the exact route you want (e.g. <code>www.mysite.com/forza/ps4</code>) using a custom route, like this:</p>\n\n<pre><code>get \"/:game/:console\", to: \"games#show\"\n</code></pre>\n\n<p>In <code>GamesController</code> you could retrieve both parameters and search for the <code>Game</code> you want to display, something like this:</p>\n\n<pre><code>def show\n  @console = Console.find_by(name: params[:console])\n  @game    = Game.find_by(name: params[:game])\n  # ...\nend\n</code></pre>\n\n<p>Keep in mind that this will work consistently only if all of the following conditions are met:</p>\n\n<ul>\n<li><p><code>Game</code> model contains <strong>unique</strong> names (or whatever column you chose to use as <em>slug</em>).</p></li>\n<li><p>You have no other routes with the same pattern (e.g. <em>/:other/:route</em>).</p></li>\n<li><p><code>Game</code> names are <strong>different</strong> from any model name (unless that model has custom routes to handle the conflict, or not routes at all).</p></li>\n<li><p>The route is defined <strong>at the end</strong> of your routes so it won't interfere with other routes.</p></li>\n</ul>\n"}], "owner": {"reputation": 13, "user_id": 6257950, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fpZMC.jpg?s=128&g=1", "display_name": "Alec ", "link": "https://stackoverflow.com/users/6257950/alec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 44931569, "answer_count": 1, "score": -1, "last_activity_date": 1499296935, "creation_date": 1499268588, "last_edit_date": 1499271035, "question_id": 44930432, "link": "https://stackoverflow.com/questions/44930432/correct-routing-for-has-many-through", "title": "Correct Routing for :has_many :through", "body": "<p>Ok so.. I have a site with several dropdown menus in my navbar. It goes a little like this:</p>\n\n<p>Gran Turismo (First title drops down to: )</p>\n\n<ul>\n<li>PS4</li>\n<li>PS3 etc.</li>\n</ul>\n\n<p>Forza (Second title drops down to: )</p>\n\n<ul>\n<li>PS4</li>\n<li>PS3 etc..</li>\n</ul>\n\n<blockquote>\n  <p>My goal is when I click on one of the drop downs it will display a Show page using the routes:</p>\n</blockquote>\n\n<pre><code>www.mysite.com/forza/ps4\n</code></pre>\n\n<p>Everyone tells me that I should use a <code>has_many :through</code> to a third model which I have called Platform.</p>\n\n<p>My models are therefore this:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>class Game &lt; ApplicationRecord\n  has_many :platforms\n  has_many :consoles, through: :platforms\nend\n\nclass Console &lt; ApplicationRecord\n  has_many :platforms\n  has_many :games, through: :platforms\nend\n\nclass Platform &lt; ApplicationRecord\n  belongs_to :game\n  belongs_to :console\nend\n</code></pre>\n\n\n\n<p>And my routes are this:</p>\n\n<pre><code>  resources :platforms, only: [:show] do\n    resources :games do\n      resources :consoles\n    end\n  end\n</code></pre>\n\n<p>Ideally, on the final show.html.erb which im guessing would be the platforms show, I would like to display the product I am selling specifically for the game Forza on the platform PS4 which I chose my selecting the dropdown menu of my choosing..</p>\n\n<p>However my routes are coming up like this instead:</p>\n\n<pre><code>/platforms/:platform_id/games/:game_id/consoles/:id(.:format)   \n</code></pre>\n\n<p>Any ideas where I'm going wrong? And if there's a much easier way around this?</p>\n\n<p>Many thanks!</p>\n\n<p><strong>Update:</strong></p>\n\n<p>\"Platform\" could be slightly confusing. Perhaps \"MarketPlace\" would be better suited. Although reading it through now, maybe I shouldn't have a third model and just end it at Console. </p>\n\n<p>I just want the final show page to be slightly different if a different Game is selected.</p>\n"}, {"tags": ["ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 7054283, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ewjm_J2lS6w/AAAAAAAAAAI/AAAAAAAAAHc/qZWskNs7qEg/photo.jpg?sz=128", "display_name": "Cirus Polis", "link": "https://stackoverflow.com/users/7054283/cirus-polis"}, "edited": false, "score": 0, "creation_date": 1499269100, "post_id": 44930564, "comment_id": 76836875, "body": "Thanks for replying. But I&#39;d like to have a method such as <code>current_metadata_description</code> in order to fetch the current metadata description from inside an example."}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1499274657, "post_id": 44930564, "comment_id": 76840313, "body": "The link looks like it provides ideas on doing what you&#39;re asking."}], "tags": [], "owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "is_accepted": false, "score": 0, "last_activity_date": 1499270427, "last_edit_date": 1499270427, "creation_date": 1499268917, "answer_id": 44930564, "question_id": 44930364, "link": "https://stackoverflow.com/questions/44930364/show-the-complete-description-of-an-example/44930564#44930564", "title": "Show the complete description of an example", "body": "<p>Try to run rspec with <a href=\"https://relishapp.com/rspec/rspec-core/v/3-6/docs/command-line/format-option\" rel=\"nofollow noreferrer\"><code>--format</code> option</a>:</p>\n\n<pre><code>bundle exec rspec --format documentation\n</code></pre>\n\n<p><strong>Update</strong>:</p>\n\n<p>I don't know any rspec method that would do that for you. One way I can think of is, write the spec description to a file while running the tests and then read the description from it in your custom <code>current_metadata_description</code> method. Here is a tutorial on <a href=\"http://blog.carbonfive.com/2011/04/21/generating-documentation-from-specs/\" rel=\"nofollow noreferrer\">Generating documentation from specs.</a> Hope that helps!</p>\n"}, {"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 1, "last_activity_date": 1499280296, "last_edit_date": 1499280296, "creation_date": 1499278336, "answer_id": 44933255, "question_id": 44930364, "link": "https://stackoverflow.com/questions/44930364/show-the-complete-description-of-an-example/44933255#44933255", "title": "Show the complete description of an example", "body": "<p>While I am unsure what your overall intentions are for doing this. </p>\n\n<p><code>Rspec::Core::ExampleGroup.it</code> yields a <code>RSpec::Core::Example</code> to the block. As with all yielding methods one can capture the yielded <code>Object</code> in a block local variable. <code>RSpec::Core::Example</code> has a <code>full_description</code> method which appears to be what you are looking for. <a href=\"https://github.com/rspec/rspec-core/blob/master/lib/rspec/core/example.rb#L17\" rel=\"nofollow noreferrer\">RSpec Source</a>. </p>\n\n<p>For Example (no pun intended): </p>\n\n<pre><code>describe String do \n  context 'Down' do \n    context 'Deeper' do \n      it 'can describe itself' do |ex|\n        # ex is the specific RSpec::Core::Example for this it block\n        expect(ex.full_description).to eq('String Down Deeper can describe itself')\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>running this will return </p>\n\n<pre><code>.\nFinished in 0.003 seconds (files took 0.21998 seconds to load)\n1 example, 0 failures\n</code></pre>\n\n<p>It is imperative that you capture the yielded value if you want the desired output as the block itself is executed in the context of an instance of <code>RSpec::Core::ExampleGroup</code> so calling <code>self.class.metadata[:full_description]</code> will contain the description of the <code>RSpec::Core::ExampleGroup</code> but not the <code>RSpec::Core::Example</code> itself (e.g. \"String Down Deeper\")</p>\n\n<p>As described in the docs if this is for logging purposes (or something similar where you would like this information for each example) you can access the <code>RSpec::Core::Example</code> in <code>Hooks</code> excerpt: </p>\n\n<pre><code># Useful for configuring logging and/or taking some action based\n# on the state of an example's metadata.\n#\n#     RSpec.configure do |config|\n#       config.before do |example|\n#         log example.description\n#       end\n#\n#       config.after do |example|\n#         log example.description\n#       end\n#\n#       config.around do |example|\n#         log example.description\n#         example.run\n#       end\n#     end\n</code></pre>\n\n<p>If you really wanted to patch this in (and I am not endorsing it) You could do the following </p>\n\n<pre><code>class RSpec::Core::ExampleGroup \n  def instance_exec(*args,&amp;blk)\n    if args.first.is_a?(RSpec::Core::Example)\n      self.define_singleton_method(:current_metadata_description) do\n        args.first.full_description\n      end\n    end\n    super(*args,&amp;blk)\n  end\nend\n</code></pre>\n\n<p>Then your test would be exactly as you stated. </p>\n"}], "owner": {"reputation": 35, "user_id": 7054283, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ewjm_J2lS6w/AAAAAAAAAAI/AAAAAAAAAHc/qZWskNs7qEg/photo.jpg?sz=128", "display_name": "Cirus Polis", "link": "https://stackoverflow.com/users/7054283/cirus-polis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 44933255, "answer_count": 2, "score": 0, "last_activity_date": 1499280296, "creation_date": 1499268427, "last_edit_date": 1499269202, "question_id": 44930364, "link": "https://stackoverflow.com/questions/44930364/show-the-complete-description-of-an-example", "title": "Show the complete description of an example", "body": "<p>In RSpec, how can we generate a string from an example, representing the current meta description of the current example?</p>\n\n<p>Example:</p>\n\n<pre><code>RSpec.describe Api::V1::Public::Signin::ByEmailController, type: :controller do\n  describe 'POST #create' do\n    context 'when the provider is \"email\"' do\n      context 'when there is a saved email' do\n        context 'when the password is good' do\n          it 'signs in' do\n            expect(current_metadata_description).to eq 'Api::V1::Public::Signin::ByEmailController POST #create when the provider is \"email\" when there is a saved email when the password is good signs in'\n          end\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>As we can see, the current meta description of the given example is:</p>\n\n<blockquote>\n  <p>Api::V1::Public::Signin::ByEmailController POST #create when the provider is \"email\" when there is a saved email when the password is good signs in</p>\n</blockquote>\n\n<p>Thanks.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>The <code>current_metadata_description</code> is not provided by RSpec. I just invented it to give an example of what I would like to have.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "google-drive-api"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1499273963, "post_id": 44930060, "comment_id": 76839970, "body": "Please explain what part of the documentation didn&#39;t make sense; We can help clarify it. What does &quot;renaming doesn&#39;t work&quot; mean? Do you get an error when renaming the file? Does it silently fail? Does the code run without complaining but the file isn&#39;t renamed? Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; and the linked pages."}, {"owner": {"reputation": 18863, "user_id": 1000753, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/23634e7a38e353cca12bb72a4205615b?s=128&d=identicon&r=PG", "display_name": "pinoyyid", "link": "https://stackoverflow.com/users/1000753/pinoyyid"}, "edited": false, "score": 0, "creation_date": 1499298807, "post_id": 44930060, "comment_id": 76851770, "body": "make sure you aren&#39;t mixing v2 and v3. Your code references Google::Apis::DriveV2 but the quickstart you point to uses v3."}, {"owner": {"reputation": 573, "user_id": 1429727, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/53f497be4cfbe80608795625106e9737?s=128&d=identicon&r=PG", "display_name": "Nello", "link": "https://stackoverflow.com/users/1429727/nello"}, "edited": false, "score": 1, "creation_date": 1505973369, "post_id": 44930060, "comment_id": 79632554, "body": "Can only agree. Renaming a file doesn&#39;t work in v3. I&#39;ve also tried project_slide.update!(name: &#39;New_name&#39;) and that doesn&#39;t work either."}, {"owner": {"reputation": 320, "user_id": 5335319, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-U9fp3QBq450/AAAAAAAAAAI/AAAAAAAAB30/LF1pqAG9JpI/photo.jpg?sz=128", "display_name": "Denis Bolomier", "link": "https://stackoverflow.com/users/5335319/denis-bolomier"}, "reply_to_user": {"reputation": 573, "user_id": 1429727, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/53f497be4cfbe80608795625106e9737?s=128&d=identicon&r=PG", "display_name": "Nello", "link": "https://stackoverflow.com/users/1429727/nello"}, "edited": false, "score": 0, "creation_date": 1506063391, "post_id": 44930060, "comment_id": 79676830, "body": "@Nello. I finally create a webservice with google script API, ...and its work.   <code>var model_file = DriveApp.getFileById(documentId);   var fichier_Document = model_file.makeCopy(documentNewName);</code>"}], "owner": {"reputation": 320, "user_id": 5335319, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-U9fp3QBq450/AAAAAAAAAAI/AAAAAAAAB30/LF1pqAG9JpI/photo.jpg?sz=128", "display_name": "Denis Bolomier", "link": "https://stackoverflow.com/users/5335319/denis-bolomier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 614, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1499332245, "creation_date": 1499267560, "last_edit_date": 1499332245, "question_id": 44930060, "link": "https://stackoverflow.com/questions/44930060/how-to-rename-files-using-the-google-drive-api", "title": "How to rename files using the Google drive API", "body": "<p>Using Rails 5 with Google::Apis::DriveV2, I'm trying to rename a file:</p>\n\n<p>In the gem file, I had google-api-client and Devise</p>\n\n<pre><code>gem 'google-api-client'\ngem 'devise\n</code></pre>\n\n<p>I configure Drive service like that (inside a initializer file):</p>\n\n<pre><code>Drive = Google::Apis::DriveV2::DriveService.new\n</code></pre>\n\n<p>Inside my controler , I do</p>\n\n<pre><code>file = Drive.copy_file(\"id_of_the_template\")\n\n# first try to rename\nDrive.patch_file(file.id,\"body\"=&gt;{\"title\"=&gt;\"New_Name\"})\n\n# second try to rename\nproject_slide.title = \"New_Name\"\nproject_slide.update!\n</code></pre>\n\n<p>The file is perfectly duplicated but the first and the second try doesn't rename the file.</p>\n\n<p>Previously I try:</p>\n\n<pre><code>Drive.patch_file(file.id,\"body\"=&gt;{\"title\"=&gt;\"New_Name\"})\n</code></pre>\n\n<p>I got this error </p>\n\n<pre><code>NoMethodError (undefined method `rename' for #&lt;Google::Apis::DriveV2::File:0x007f9e06809fe8&gt;):\n</code></pre>\n\n<p>I spent hours looking to find a working method but didn't find it and am quite lost in the Google documentation. \nHere the documentation that I have read:</p>\n\n<ul>\n<li><p><a href=\"https://developers.google.com/drive/v2/web/quickstart/ruby\" rel=\"nofollow noreferrer\">https://developers.google.com/drive/v2/web/quickstart/ruby</a></p></li>\n<li><p><a href=\"http://www.rubydoc.info/github/gimite/google-drive-ruby/GoogleDrive%2FFile%3Arename\" rel=\"nofollow noreferrer\">http://www.rubydoc.info/github/gimite/google-drive-ruby/GoogleDrive%2FFile%3Arename</a></p></li>\n<li><p><a href=\"http://www.rubydoc.info/github/google/google-api-ruby-client/Google/Apis/DriveV2/File#update!-instance_method\" rel=\"nofollow noreferrer\">http://www.rubydoc.info/github/google/google-api-ruby-client/Google/Apis/DriveV2/File#update!-instance_method</a></p></li>\n<li><p><a href=\"http://www.rubydoc.info/github/google/google-api-ruby-client/Google%2FApis%2FDriveV2%2FDriveService%3Apatch_file\" rel=\"nofollow noreferrer\">http://www.rubydoc.info/github/google/google-api-ruby-client/Google%2FApis%2FDriveV2%2FDriveService%3Apatch_file</a></p></li>\n<li><p><a href=\"https://developers.google.com/drive/v2/reference/files/patch\" rel=\"nofollow noreferrer\">https://developers.google.com/drive/v2/reference/files/patch</a></p></li>\n</ul>\n"}, {"tags": ["ruby", "frontend", "ruby-on-rails-5", "backend", "rails-api"], "owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 615, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1531053997, "creation_date": 1499266209, "last_edit_date": 1531053997, "question_id": 44929571, "link": "https://stackoverflow.com/questions/44929571/rails-api-with-frontend-routing-email-links-to-backend-or-frontend-application", "title": "Rails API with frontend - routing email links to backend or frontend application", "body": "<p>I have a Rails API backend and a ReactJS frontend. My backend sends custom emails that often have confirmation-like links (like email confirmation)</p>\n\n<p><strong>Should the confirmation links point to my backend directly, or should they rather load the frontend first and then make an API call to the backend?</strong></p>\n\n<p>The two alternatives I'm thinking of are:</p>\n\n<p><strong>1 - The email confirmation link hits directly</strong></p>\n\n<p><code>backend.example.com/email_confirmations/:confirmation_token</code>, which then redirects to a specific success (error) page <code>frontend.example.com/email_confirmation/success</code>(<code>/failure</code>) on my frontend.</p>\n\n<p>On the backend I would only need a <code>Metal</code> controller with minimum modules to perform redirection to the frontend app, the controller is always responding with redirects). If further actions need to be taken from the frontend, they'll hit a different API Endpoint</p>\n\n<p><strong>2 - The email confirmation links opens up my frontend at</strong></p>\n\n<p><code>frontend.example.com/email_confirmations/:confirmation_token</code> that triggers an API request to <code>backend.example.com/email_confirmations/:confirmation_token</code>.</p>\n\n<p>Then my (Json:api) backend makes a jsonapi-compliant response with a Rails <code>APIController</code>.</p>\n\n<p><strong>What are you doing in practice?</strong></p>\n\n<p>I decided to opt in for the first scenario but maybe systematically calling/loading the frontend first makes more sense?</p>\n\n<p><strong>How do you wire backend/frontend in those scenarios?</strong></p>\n\n<p>I have currently implemented a very simple (<code>Metal</code>) Controller that would just process the incoming parameters perform redirections only to the frontend. I was hoping to define \"url helpers\" that would point to my frontend like so:</p>\n\n<pre><code>namespace :email_redirection do \n    # Controller that gets hit by email confirmation links in scenario #1\n    resources :confirmations\nend\n\nnamespace :frontend do\n    frontend_root = Rails.configuration.frontend_host_with_http_and_port\n\n    scope frontend_root do\n      # Generation of URL Helpers for the frontend app\n      resources :confirmations, only: [] do\n        get 'successful'\n        get 'unsuccessful'\n      end\n    end\nend\n</code></pre>\n\n<p>And my confirmation controller would be like</p>\n\n<pre><code>class EmailRedirection::ConfirmationsController\n  def index\n    svc = MyConfirmationService.new(token: params[:confirmation_token])\n    if svc.confirm\n      redirect_to(\n        frontend_successful_confirmation_url,\n        email: svc.confirmable.email\n      )\n      else\n        redirect_to(frontend_unsuccessful_confirmation_url)\n      end\n    end\n  end\n</code></pre>\n\n<p>I'm getting several error and I believe maybe the url helpers are not useable with different host/port... (or I have to pass them explicitely to each call)</p>\n\n<p>How can I handle that ? And if 1. is a good choice, what would be the redirection codes you'd send on success/failure (since they can only be 3xx) ?</p>\n\n<p>Both solutions involve quite some wiring between the backend/frontend and I'm not sure how to best wire things up.</p>\n\n<p><em>Note : my models use devise but because devise isn't so great with APIs/etc. I'm using my own ConfirmationService that also handles some side-effects. I don't consider Devise to be relevant here</em></p>\n\n<p><a href=\"https://stackoverflow.com/questions/3622706/creating-a-rails-route-to-an-external-url\">Creating a rails route to an external URL</a></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1105, "user_id": 391122, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/63c655bc5282d3f343574aef29de460a?s=128&d=identicon&r=PG", "display_name": "Jared", "link": "https://stackoverflow.com/users/391122/jared"}, "edited": false, "score": 0, "creation_date": 1499265141, "post_id": 44929085, "comment_id": 76833775, "body": "What context does this semicolon have to work in?  It works fine if it&#39;s within a string argument"}, {"owner": {"reputation": 3283, "user_id": 1392008, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d74db815529648603473edb6319dcf6c?s=128&d=identicon&r=PG", "display_name": "Andrea", "link": "https://stackoverflow.com/users/1392008/andrea"}, "reply_to_user": {"reputation": 1105, "user_id": 391122, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/63c655bc5282d3f343574aef29de460a?s=128&d=identicon&r=PG", "display_name": "Jared", "link": "https://stackoverflow.com/users/391122/jared"}, "edited": false, "score": 0, "creation_date": 1499265203, "post_id": 44929085, "comment_id": 76833830, "body": "It is a variable loaded from a <code>YAML</code>. It is inside a variable, I create my command concatenating multiple strings like <code>var1+var2+semicolon_var+var3</code>"}, {"owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "edited": false, "score": 0, "creation_date": 1499265218, "post_id": 44929085, "comment_id": 76833841, "body": "We can&#39;t help you unless you show us the exact code you&#39;re trying to figure out."}, {"owner": {"reputation": 3283, "user_id": 1392008, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d74db815529648603473edb6319dcf6c?s=128&d=identicon&r=PG", "display_name": "Andrea", "link": "https://stackoverflow.com/users/1392008/andrea"}, "edited": false, "score": 0, "creation_date": 1499265268, "post_id": 44929085, "comment_id": 76833886, "body": "The code is quite huge, I try to create a toy-problem"}, {"owner": {"reputation": 1174, "user_id": 1936398, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Cw3MU.jpg?s=128&g=1", "display_name": "Adam Kewley", "link": "https://stackoverflow.com/users/1936398/adam-kewley"}, "reply_to_user": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "edited": false, "score": 0, "creation_date": 1499265386, "post_id": 44929085, "comment_id": 76833982, "body": "I believe what @DiegoSalazar is getting at is that there&#39;s a difference between using semicolons in the context of a sub (bash) shell and using a semicolon as an argument to an application. A correct answer needs that information."}], "answers": [{"comments": [{"owner": {"reputation": 3283, "user_id": 1392008, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d74db815529648603473edb6319dcf6c?s=128&d=identicon&r=PG", "display_name": "Andrea", "link": "https://stackoverflow.com/users/1392008/andrea"}, "edited": false, "score": 1, "creation_date": 1499265598, "post_id": 44929201, "comment_id": 76834148, "body": "Thank you sir! I didn&#39;t thought about the quote before and after <code>&#39;</code>. Usually I don&#39;t work with ruby, today I learned something new. As soon as I can I&#39;m going to accept the answer"}, {"owner": {"reputation": 40466, "user_id": 33226, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8f75007bcbcb8ba4daa408592e1c65ec?s=128&d=identicon&r=PG", "display_name": "Gavin Miller", "link": "https://stackoverflow.com/users/33226/gavin-miller"}, "reply_to_user": {"reputation": 3283, "user_id": 1392008, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d74db815529648603473edb6319dcf6c?s=128&d=identicon&r=PG", "display_name": "Andrea", "link": "https://stackoverflow.com/users/1392008/andrea"}, "edited": false, "score": 1, "creation_date": 1499265737, "post_id": 44929201, "comment_id": 76834248, "body": "@AndreaRomagnoli glad I could help :)"}, {"owner": {"reputation": 3283, "user_id": 1392008, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d74db815529648603473edb6319dcf6c?s=128&d=identicon&r=PG", "display_name": "Andrea", "link": "https://stackoverflow.com/users/1392008/andrea"}, "edited": false, "score": 1, "creation_date": 1499265779, "post_id": 44929201, "comment_id": 76834279, "body": "Interesting the <code>open3</code> module, I think I&#39;m going to check it! Thanks again :)"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1499290371, "post_id": 44929201, "comment_id": 76848919, "body": "<code>open3</code> is really great and a must-have if you&#39;re interested in processing the output of commands."}], "tags": [], "owner": {"reputation": 40466, "user_id": 33226, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8f75007bcbcb8ba4daa408592e1c65ec?s=128&d=identicon&r=PG", "display_name": "Gavin Miller", "link": "https://stackoverflow.com/users/33226/gavin-miller"}, "is_accepted": true, "score": 1, "last_activity_date": 1499265711, "last_edit_date": 1499265711, "creation_date": 1499265293, "answer_id": 44929201, "question_id": 44929085, "link": "https://stackoverflow.com/questions/44929085/exec-system-command-containing-a-semicolon-in-ruby/44929201#44929201", "title": "Exec system command containing a semicolon in Ruby", "body": "<p>You should have no problem placing a semicolon within a shell command as long as you quote it properly:</p>\n\n<pre><code>system('cat file | grep \";\"')\n# =&gt; someline with a ; in it\n\nsystem(\"cat #{a_variable} | grep ';'\")\n# =&gt; this will work as well for finding ;\n</code></pre>\n\n<p>I also find that <a href=\"https://ruby-doc.org/stdlib-1.9.3/libdoc/open3/rdoc/Open3.html\" rel=\"nofollow noreferrer\"><code>Open3</code></a> module to be a bit easier to use for odder system calls / quoting issues (but it can be a bit difficult to get it working too -- trade offs):</p>\n\n<pre><code>require 'open3'\ncmds = %w(grep ';' a_file)\nstdout, status = Open3.capture2(*cmds)\n</code></pre>\n"}], "owner": {"reputation": 3283, "user_id": 1392008, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d74db815529648603473edb6319dcf6c?s=128&d=identicon&r=PG", "display_name": "Andrea", "link": "https://stackoverflow.com/users/1392008/andrea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 44929201, "answer_count": 1, "score": 0, "last_activity_date": 1499265711, "creation_date": 1499264998, "question_id": 44929085, "link": "https://stackoverflow.com/questions/44929085/exec-system-command-containing-a-semicolon-in-ruby", "title": "Exec system command containing a semicolon in Ruby", "body": "<p>Seems a silly question, but I'm struggling to find the answer.</p>\n\n<p>I need to execute a really long command directly from <code>ruby</code> code to the <code>shell</code>, and this command has to contain a <code>;</code> character.</p>\n\n<p>If I try to escape it with <code>\\;</code> doesn't work, if I try to substitute it with <code>\\%3b</code> it executes but it doesn't substitute <code>%3b</code> with <code>;</code>, so it doesn't work too.</p>\n\n<p>I tried with <code>exec</code>, <code>system</code>, ` <code>#{str}</code> `, and I can't make it work. It always splits in two my command.</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "rspec", "packer"], "comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1499265475, "post_id": 44928721, "comment_id": 76834053, "body": "what does not work with the example you posted?"}], "answers": [{"tags": [], "owner": {"reputation": 1163, "user_id": 243424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b052f4656430fdd1efca5d543b629905?s=128&d=identicon&r=PG", "display_name": "Alex Fortuna", "link": "https://stackoverflow.com/users/243424/alex-fortuna"}, "is_accepted": true, "score": 1, "last_activity_date": 1499265905, "creation_date": 1499265905, "answer_id": 44929468, "question_id": 44928721, "link": "https://stackoverflow.com/questions/44928721/testing-values-of-a-json-file-with-rspec/44929468#44929468", "title": "Testing values of a JSON file with Rspec", "body": "<p>I test such things by parsing JSON and then using the mighty <code>include</code> against resulting hashes. E.g. try this <code>packed_json_spec.rb</code>:</p>\n\n<pre><code>require \"json\"\n\ndescribe \"packed JSON data\" do\n  let(:input) {'{\"version\" : \"0.1.0\", \"region\" : \"eu-west-1\"}'}\n  it \"is valid\" do\n    h = JSON.parse(input)\n    expect(h).to include(\"version\" =&gt; match(/^\\d+\\.\\d+\\.\\d+$/))\n    expect(h).to include(\"region\" =&gt; match(/^eu-\\w+-\\d+$/))\n  end\nend\n</code></pre>\n\n<p>Notes:</p>\n\n<ol>\n<li>Don't forget that RSpec is still Ruby.</li>\n<li>JSON means structure. So validity tests should cover structure as well as individual values.</li>\n</ol>\n\n<p>Hope that was helpful. Cheers!</p>\n"}], "owner": {"reputation": 53, "user_id": 7494489, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2093aafe00fa2f80741c896bb6410b1d?s=128&d=identicon&r=PG&f=1", "display_name": "DevLuke", "link": "https://stackoverflow.com/users/7494489/devluke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 727, "favorite_count": 0, "accepted_answer_id": 44929468, "answer_count": 1, "score": 1, "last_activity_date": 1499265905, "creation_date": 1499264110, "question_id": 44928721, "link": "https://stackoverflow.com/questions/44928721/testing-values-of-a-json-file-with-rspec", "title": "Testing values of a JSON file with Rspec", "body": "<p>I'm using Packer to create AMIs with baked in services. I know I can test the end product using serverspec, but I have a number of naming and tagging standards I'd like to enforce before the AMI is created. Such as version, OS, name etc. These values are held in a JSON file which is fed into packer during image creation.</p>\n\n<p>My question is, is there a way to test/ pass in these values to Rspec and then use regex matcher to validate them. For example if I had in my variables.json </p>\n\n<pre><code>{\"version: \"0.1.0\", \"region\": \"eu-west-1\"}\n</code></pre>\n\n<p>How could I check it using Rspecs regex matcher like</p>\n\n<pre><code>expect(region).to match(/^[a-z]{2}-[a-z]+-[0-9]$/)\n</code></pre>\n"}, {"tags": ["ruby", "rubygems", "bundler"], "comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1499265556, "post_id": 44928595, "comment_id": 76834114, "body": "I&#39;d suggest nuking the cache and trying again, something like <code>rm -r &#47;usr&#47;lib&#47;ruby&#47;gems&#47;2.4.0&#47;cache</code>."}, {"owner": {"reputation": 753, "user_id": 1826109, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/LsWmX.png?s=128&g=1", "display_name": "chingis", "link": "https://stackoverflow.com/users/1826109/chingis"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1499272684, "post_id": 44928595, "comment_id": 76839224, "body": "ok, so it seems I just understand the update command wrong, it assumes that the gems already installed"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1499274696, "post_id": 44928595, "comment_id": 76840335, "body": "@chingis yes <code>bundle install</code> then <code>bundle update</code> if needed. Maybe answer your own question at some point in case another user stumbles across this question"}], "answers": [{"comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1499338310, "post_id": 44944532, "comment_id": 76868632, "body": "e.g. <code>chmod  -R 775 &#47;usr&#47;lib&#47;ruby&#47;gems&#47;2.4.0&#47;</code>"}, {"owner": {"reputation": 753, "user_id": 1826109, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/LsWmX.png?s=128&g=1", "display_name": "chingis", "link": "https://stackoverflow.com/users/1826109/chingis"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1499404354, "post_id": 44944532, "comment_id": 76900928, "body": "775 might be not enough, in my case the directory owned by root. I just changed the ownership of this dir to my user."}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1499420521, "post_id": 44944532, "comment_id": 76909973, "body": "yes, true, I&#39;m used to using chruby where rubies are installed to my user account."}], "tags": [], "owner": {"reputation": 753, "user_id": 1826109, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/LsWmX.png?s=128&g=1", "display_name": "chingis", "link": "https://stackoverflow.com/users/1826109/chingis"}, "is_accepted": true, "score": 0, "last_activity_date": 1499332228, "creation_date": 1499332228, "answer_id": 44944532, "question_id": 44928595, "link": "https://stackoverflow.com/questions/44928595/updating-gemfile-lock-fails/44944532#44944532", "title": "Updating Gemfile.lock fails", "body": "<p>Turned out that setting write permissions on <code>cache</code> directory (<code>/usr/lib/ruby/gems/2.4.0/cache/</code>) is not enough. You have to set write permissions for the parent directory (<code>/usr/lib/ruby/gems/2.4.0/</code>). For some reason, <code>bundle update</code> doesn't write to <code>cache</code> unless you do that even though it doesn't write anything to any other directories on the same level as <code>cache</code>.</p>\n"}], "owner": {"reputation": 753, "user_id": 1826109, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/LsWmX.png?s=128&g=1", "display_name": "chingis", "link": "https://stackoverflow.com/users/1826109/chingis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 0, "accepted_answer_id": 44944532, "answer_count": 1, "score": 0, "last_activity_date": 1499332228, "creation_date": 1499263775, "question_id": 44928595, "link": "https://stackoverflow.com/questions/44928595/updating-gemfile-lock-fails", "title": "Updating Gemfile.lock fails", "body": "<p>I've updated a gem version in my <code>Gemfile</code>, so I'm trying to update <code>Gemfile.lock</code>. I run:</p>\n\n<pre><code>$ bundle update\nFetching gem metadata from https://rubygems.org/......\nFetching version metadata from https://rubygems.org/..\nFetching dependency metadata from https://rubygems.org/.\nResolving dependencies.......\nFetching rake 10.5.0\nFetching i18n 0.8.1\nFetching minitest 5.7.0\nFetching thread_safe 0.3.6\n....\n</code></pre>\n\n<p>And get the following error despite it seems to be fetched already (see output above):</p>\n\n<pre><code>Bundler::GemspecError: Could not read gem at /usr/lib/ruby/gems/2.4.0/cache/rake-10.5.0.gem. It may be corrupted.\nAn error occurred while installing rake (10.5.0), and Bundler cannot continue.\nMake sure that `gem install rake -v '10.5.0'` succeeds before bundling.\n</code></pre>\n\n<p>There's no such file under <code>/usr/lib/ruby/gems/2.4.0/cache/</code>. The cache directory is writable (777).</p>\n\n<p>If I run <code>gem install rake -v '10.5.0'</code> it works fine. But do I really need to install gems manually (error repeats for other packages)? I don't get such errors if just run <code>bundle install</code> without updating gems.</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "is_accepted": false, "score": 0, "last_activity_date": 1499264986, "creation_date": 1499264986, "answer_id": 44929076, "question_id": 44928564, "link": "https://stackoverflow.com/questions/44928564/where-in-rails-app-should-i-be-creating-a-json-object/44929076#44929076", "title": "Where in Rails App should I be creating a JSON object", "body": "<p>if you want to output the result to a PDF, you don't need JSON data being passed, you can use prawn pdf <a href=\"https://github.com/prawnpdf/prawn\" rel=\"nofollow noreferrer\">prawnpdf gem</a>, and you can use same method from your statement \"The table is populated in the view by iterating through the options passed\", you just need to split the output with  <strong>respond_to</strong> format </p>\n\n<pre><code>@your_data_tables = YourOptionModel....\nrespond_to do |format|\n  format.html\n  format.pdf do\n    pdf = ReportPdf.new(@your_data_tables) \n    send_data pdf.render, filename: \"your_data_table.pdf\",type: \"application/pdf\", disposition: \"inline\"\n  end\nend\n</code></pre>\n\n<p>here is sample to split output between html and pdf using respond_to</p>\n"}], "owner": {"reputation": 1, "user_id": 3857357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/spAPb.png?s=128&g=1", "display_name": "GW_Gary", "link": "https://stackoverflow.com/users/3857357/gw-gary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 20, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1499264986, "creation_date": 1499263700, "question_id": 44928564, "link": "https://stackoverflow.com/questions/44928564/where-in-rails-app-should-i-be-creating-a-json-object", "title": "Where in Rails App should I be creating a JSON object", "body": "<p>I have a rails app with two steps:</p>\n\n<p>1) form where user selects options </p>\n\n<p>2) result table where user sees output based on options in 1</p>\n\n<p>Right now, the result table is built with datatables.  The table is populated in the view by iterating through the options passed in from step 1 with the model being called for each row in tr's and td's.  I suspect there is a better way to do this.  </p>\n\n<p>I want to format the table to output to PDF with nice formatting, and most of the examples I see online involve JSON data being passed in.  Should I have my model or controller create this JSON object?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "middleman", "contentful"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 4186199, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/uAvF8.jpg?s=128&g=1", "display_name": "lukebm", "link": "https://stackoverflow.com/users/4186199/lukebm"}, "edited": false, "score": 0, "creation_date": 1499343770, "post_id": 44928838, "comment_id": 76872490, "body": "This works as explained and is exactly what I was looking for - thank you."}, {"owner": {"reputation": 334, "user_id": 5439158, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1iztlFARX3s/AAAAAAAAAAI/AAAAAAAABLM/iVNkWGjfUno/photo.jpg?sz=128", "display_name": "David Litvak", "link": "https://stackoverflow.com/users/5439158/david-litvak"}, "reply_to_user": {"reputation": 69, "user_id": 4186199, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/uAvF8.jpg?s=128&g=1", "display_name": "lukebm", "link": "https://stackoverflow.com/users/4186199/lukebm"}, "edited": false, "score": 0, "creation_date": 1499432114, "post_id": 44928838, "comment_id": 76917246, "body": "Glad it was what you were looking for! Cheers"}, {"owner": {"reputation": 2125, "user_id": 796803, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Jq55f.jpg?s=128&g=1", "display_name": "Andre Zimpel", "link": "https://stackoverflow.com/users/796803/andre-zimpel"}, "edited": false, "score": 0, "creation_date": 1505044982, "post_id": 44928838, "comment_id": 79242623, "body": "@DavidLitvak so you&#39;re setting the space and token id&#39; in the .htaccess?"}, {"owner": {"reputation": 334, "user_id": 5439158, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1iztlFARX3s/AAAAAAAAAAI/AAAAAAAABLM/iVNkWGjfUno/photo.jpg?sz=128", "display_name": "David Litvak", "link": "https://stackoverflow.com/users/5439158/david-litvak"}, "reply_to_user": {"reputation": 2125, "user_id": 796803, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Jq55f.jpg?s=128&g=1", "display_name": "Andre Zimpel", "link": "https://stackoverflow.com/users/796803/andre-zimpel"}, "edited": false, "score": 0, "creation_date": 1505140461, "post_id": 44928838, "comment_id": 79278379, "body": "@AndreZimpel Those are environment variables on your development/production build environment. This are not required once built to be served. If you use something like CircleCI or Netlify to do your builds, these are things that can be easily configured on their settings. If you&#39;re using your own machine, then you can take a look on how to set up environment variables here: <a href=\"https://www.cyberciti.biz/faq/set-environment-variable-unix/\" rel=\"nofollow noreferrer\">cyberciti.biz/faq/set-environment-variable-unix</a>"}], "tags": [], "owner": {"reputation": 334, "user_id": 5439158, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1iztlFARX3s/AAAAAAAAAAI/AAAAAAAABLM/iVNkWGjfUno/photo.jpg?sz=128", "display_name": "David Litvak", "link": "https://stackoverflow.com/users/5439158/david-litvak"}, "is_accepted": true, "score": 4, "last_activity_date": 1499264391, "creation_date": 1499264391, "answer_id": 44928838, "question_id": 44928162, "link": "https://stackoverflow.com/questions/44928162/how-do-you-use-the-contentful-middleman-preview-api-in-different-build-environme/44928838#44928838", "title": "How do you use the Contentful Middleman preview API in different build environment?", "body": "<p>You can use environment variables to switch on that.</p>\n\n<pre><code># Build command\nCONTENTFUL_ENV=&lt;env&gt; bundle exec middleman contentful &amp;&amp; bundle exec middleman build -e &lt;env&gt;\n\n\n# config.rb\naccess_token = nil\nuse_preview = false\ncase ENV['CONTENTFUL_ENV']\nwhen 'prod'\n  access_token = ENV['CONTENTFUL_PROD_TOKEN']\nwhen 'testSite'\n  access_token = ENV['CONTENTFUL_TEST_TOKEN']\n  use_preview = true\nend\n\nactivate :contentful do |f|\n  f.space = {space_alias: ENV['CONTENTFUL_SPACE']}\n  f.use_preview_api = use_preview\n  f.access_token = access_token\n  # ...\nend\n</code></pre>\n\n<p>This way you can have multiple environments working together</p>\n"}], "owner": {"reputation": 69, "user_id": 4186199, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/uAvF8.jpg?s=128&g=1", "display_name": "lukebm", "link": "https://stackoverflow.com/users/4186199/lukebm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "accepted_answer_id": 44928838, "answer_count": 1, "score": 1, "last_activity_date": 1499264391, "creation_date": 1499262626, "question_id": 44928162, "link": "https://stackoverflow.com/questions/44928162/how-do-you-use-the-contentful-middleman-preview-api-in-different-build-environme", "title": "How do you use the Contentful Middleman preview API in different build environment?", "body": "<p>Here's what I'm trying to achieve in principle, which obviously doesn't work since the contentful data needs to be retrieved before the build:</p>\n\n<pre><code># Build command\nbundle exec middleman contentful &amp;&amp; bundle exec middleman build -e &lt;ENV&gt;\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code># config.rb\n\nconfigure :prod do\n  set :build_dir, 'build/prod'\n  set :ENV, 'prod'\n\n  activate :contentful do |f|\n    f.space         = { hs: 'SPACE' }\n    f.access_token  = 'TOKEN'\n    f.cda_query     = { include: 2 }\n    f.all_entries   = true\n    f.content_types = { #... }\n  end\nend\n\nconfigure :testSite do\n  set :build_dir, 'build/test-site'\n  set :ENV, 'test'\n\n  activate :contentful do |f|\n    use_preview_api = true\n    #...\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "api", "time-format"], "answers": [{"tags": [], "owner": {"reputation": 1371, "user_id": 623316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa2761ad1bad1ee4f56dd5c3514dd765?s=128&d=identicon&r=PG", "display_name": "Jon Wolski", "link": "https://stackoverflow.com/users/623316/jon-wolski"}, "is_accepted": true, "score": 1, "last_activity_date": 1499264493, "creation_date": 1499264493, "answer_id": 44928886, "question_id": 44927983, "link": "https://stackoverflow.com/questions/44927983/ruby-api-how-to-change-time-format-to-hhmm-using-activemodelserializer/44928886#44928886", "title": "Ruby Api How to change time format to (HH:mm) using Active:model:Serializer?", "body": "<p>If I recall correctly, it works like this:</p>\n\n<pre><code>class AtencionSerializer &lt; ActiveModel::Serializer\n  belongs_to :medico\n  belongs_to :paciente_planobrasocial\n  attributes :fecha, :importe\n  attribute :hora { object.hora.strftime \"%H:%M\" }\nend\n</code></pre>\n\n<p>see <a href=\"https://github.com/rails-api/active_model_serializers/blob/0-10-stable/docs/general/serializers.md#overriding-attribute-methods\" rel=\"nofollow noreferrer\">https://github.com/rails-api/active_model_serializers/blob/0-10-stable/docs/general/serializers.md#overriding-attribute-methods</a></p>\n"}], "owner": {"reputation": 537, "user_id": 6665356, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/4c86625b9dd9d7d9505758a743d871ea?s=128&d=identicon&r=PG&f=1", "display_name": "matQ", "link": "https://stackoverflow.com/users/6665356/matq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 539, "favorite_count": 0, "accepted_answer_id": 44928886, "answer_count": 1, "score": 1, "last_activity_date": 1499264493, "creation_date": 1499262176, "last_edit_date": 1499263556, "question_id": 44927983, "link": "https://stackoverflow.com/questions/44927983/ruby-api-how-to-change-time-format-to-hhmm-using-activemodelserializer", "title": "Ruby Api How to change time format to (HH:mm) using Active:model:Serializer?", "body": "<p>my db table column name is hora (translation:hour): type time. (Postgres).\nI\u1e3f using Ruby 5.1 to develop my API i have installed gem active model serializer. my problem is that it shows me the field in this format: \"hora\":\"2000-01-01T11:40:00Z\", but i need only the hour with its minutes just like this: 11:40.\nthis is my actual output json\n{\"fecha\":\"2016-08-02\",\"hora\":\"2000-01-01T11:40:00Z\",\"importe\":\"86.0\",\"medico\":....}.</p>\n\n<p>i need this:\n{\"fecha\":\"2016-08-02\",\"hora\":\"11:40\",\"importe\":\"86.0\",\"medico\":...}</p>\n\n<pre><code>my table\n|hora                  |\n|time withotu time zone|\n| 09:30:00             |\n| 11:40:00             |\n| 10:10:00             |\n\nmycontroller#show\n # GET /atencions/1\n  def show\n    render json: @atencion\n  end\n\n\nmy model\nclass Atencion &lt; ApplicationRecord\n    self.table_name = \"atencion\"\n    belongs_to :medico\n    belongs_to :paciente_planobrasocial\nend\n\nmy model serializer\nclass AtencionSerializer &lt; ActiveModel::Serializer\n  belongs_to :medico\n  belongs_to :paciente_planobrasocial\n  attributes :fecha, :hora, :importe\n\nend\n</code></pre>\n\n<p>is possible? how and where i can change the format of the time...\nthanks in advance...</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "social"], "comments": [{"owner": {"reputation": 6250, "user_id": 2359643, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/05ea83110037dc15d8d22e722fd184f4?s=128&d=identicon&r=PG", "display_name": "JNYRanger", "link": "https://stackoverflow.com/users/2359643/jnyranger"}, "edited": false, "score": 0, "creation_date": 1499274978, "post_id": 44927890, "comment_id": 76840478, "body": "Removed &quot;Thanks&quot; and fixed formatting"}, {"owner": {"reputation": 3119, "user_id": 3106816, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/LDdbB.jpg?s=128&g=1", "display_name": "Jigar Bhatt", "link": "https://stackoverflow.com/users/3106816/jigar-bhatt"}, "reply_to_user": {"reputation": 6250, "user_id": 2359643, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/05ea83110037dc15d8d22e722fd184f4?s=128&d=identicon&r=PG", "display_name": "JNYRanger", "link": "https://stackoverflow.com/users/2359643/jnyranger"}, "edited": false, "score": 0, "creation_date": 1499325037, "post_id": 44927890, "comment_id": 76859770, "body": "@JNYRanger What you want to say?"}, {"owner": {"reputation": 6250, "user_id": 2359643, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/05ea83110037dc15d8d22e722fd184f4?s=128&d=identicon&r=PG", "display_name": "JNYRanger", "link": "https://stackoverflow.com/users/2359643/jnyranger"}, "edited": false, "score": 0, "creation_date": 1499363714, "post_id": 44927890, "comment_id": 76887227, "body": "That&#39;s an auto comment from the review queue for editing your post.  Typically on SO you should not include superfluous comments in your question, which was my &quot;editor comment&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 1047, "user_id": 2936733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eaecbfee79e2b901ccfc23d4d77ac50e?s=128&d=identicon&r=PG&f=1", "display_name": "\u5b59\u609f\u7a7a", "link": "https://stackoverflow.com/users/2936733/%e5%ad%99%e6%82%9f%e7%a9%ba"}, "is_accepted": false, "score": 0, "last_activity_date": 1499343309, "last_edit_date": 1499343309, "creation_date": 1499332217, "answer_id": 44944527, "question_id": 44927890, "link": "https://stackoverflow.com/questions/44927890/social-share-button-gem-with-html-safe-not-working-in-rails-5/44944527#44944527", "title": "social-share-button gem with html_safe not working in rails 5", "body": "<p>Before answering your question, you can find that <code>raw</code> is just a wrap version for <code>html_safe</code>. Normally, you don't need to call the both at sametime. see <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/OutputSafetyHelper.html#method-i-raw\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>I saw the code <a href=\"https://github.com/huacnlee/social-share-button/blob/master/lib/social_share_button/helper.rb#L26\" rel=\"nofollow noreferrer\">here</a>, there is already a <code>raw</code> in the end of function <code>social_share_button_tag</code>. So I can just remove your <code>raw</code> and <code>html_safe</code> :</p>\n\n<pre><code>&lt;%= social_share_button_tag(\"&lt;b&gt;#{job.title}&lt;/b&gt;\", :url =&gt; \"google.com\" ) %&gt;\n</code></pre>\n\n<p>I guess you want blod your <code>job.title</code> with html <code>&lt;b&gt;</code>. You can make it in CSS. like that:</p>\n\n<pre><code>.social-share-button {\n  .ssb-icon {\n    font-weight: bold;\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 3119, "user_id": 3106816, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/LDdbB.jpg?s=128&g=1", "display_name": "Jigar Bhatt", "link": "https://stackoverflow.com/users/3106816/jigar-bhatt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 452, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1499343309, "creation_date": 1499261908, "last_edit_date": 1499274978, "question_id": 44927890, "link": "https://stackoverflow.com/questions/44927890/social-share-button-gem-with-html-safe-not-working-in-rails-5", "title": "social-share-button gem with html_safe not working in rails 5", "body": "<p>I used the social-share-button, Gem.</p>\n\n<p>I want to share my website content to social site with some decoration, but it is not using html.  It prints the  and  tags instead of\nmaking the text bold and italic.</p>\n\n<pre><code>&lt;%= social_share_button_tag(raw(\"&lt;b&gt;#{job.title}&lt;/b&gt;\").html_safe, :url =&gt; \"google.com\" ) %&gt;\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "circular-permutations"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1499262303, "post_id": 44927735, "comment_id": 76831540, "body": "<a href=\"https://ruby-doc.org/core/Array.html#method-i-repeated_permutation\" rel=\"nofollow noreferrer\"><code>Array#repeated_permutation</code></a>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1499273989, "post_id": 44927735, "comment_id": 76839981, "body": "Are the numbers necessarily non-negative?"}], "answers": [{"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1499268269, "post_id": 44928117, "comment_id": 76836289, "body": "You can avoid using <code>map(&amp;:sort)</code> and <code>uniq</code> by using <code>repeated_combination</code> instead."}, {"owner": {"reputation": 135, "user_id": 3464753, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f0882324e555b6cb3e4eacbab7a66b09?s=128&d=identicon&r=PG&f=1", "display_name": "thenapking", "link": "https://stackoverflow.com/users/3464753/thenapking"}, "edited": false, "score": 0, "creation_date": 1499268455, "post_id": 44928117, "comment_id": 76836423, "body": "<code>repeated_permutation</code> and <code>repeated_combination</code> are just the ticket! Thanks guys"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1499268707, "post_id": 44928117, "comment_id": 76836601, "body": "@ice\u30c4 indeed. Updated an answer."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1499272988, "post_id": 44928117, "comment_id": 76839422, "body": "On second thoughts... The OP is clearly interested in permutations (where position matters i.e. <code>[8,3,5]</code> and <code>[8,5,3]</code> are valid) but your answer converts to combinations i.e. <code>[8,3,5]</code> and <code>[8,5,3]</code> are considered the same. So it may be best to leave your original answer except remove the <code>map</code> and <code>uniq</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1499284158, "post_id": 44928117, "comment_id": 76845675, "body": "With <code>d = [2,3,4,5]; number_of_divisions = [3]</code> and the desired sum <code>12</code> (rather than <code>16</code>), both snippets return <code>[[2, 5, 5], [3, 4, 5], [4, 4, 4]]</code>, which is missing <code>[3,5,4]</code>. In #1 the problem is that <code>sort</code> followed by <code>uniq</code> removes too much, and in #2, <code>repeated_combination</code> will return arrays <code>a</code> such that if <code>i &lt; j</code>, <code>d[i]</code> will always precede <code>d[j]</code> in the elements returned by <code>repeated_combination</code> that contain both of those elements of <code>d</code>. If, for example, <code>d</code> is sorted, all of the combinations will be sorted."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 5, "last_activity_date": 1499318033, "last_edit_date": 1499318033, "creation_date": 1499262524, "answer_id": 44928117, "question_id": 44927735, "link": "https://stackoverflow.com/questions/44927735/finding-all-permutations-of-numbers-plucked-from-an-array-which-sum-to-16/44928117#44928117", "title": "Finding all permutations of numbers plucked from an array which sum to 16", "body": "<p>For <em>all</em> permutations, including duplicates, one might use <a href=\"https://ruby-doc.org/core/Array.html#method-i-repeated_permutation\" rel=\"nofollow noreferrer\"><code>Array#repeated_permutation</code></a>:</p>\n\n<pre><code>d = [2,3,4,5,6,7,8]\nnumber_of_divisions = [3,4,5]\nnumber_of_divisions.flat_map do |n|\n  d.repeated_permutation(n).reject do |p| # no need `to_a`\n    p.inject(:+) != 16\n  end\nend\n</code></pre>\n\n<p>or, even better with <a href=\"https://ruby-doc.org/core/Array.html#method-i-repeated_combination\" rel=\"nofollow noreferrer\"><code>Array#repeated_combination</code></a>:</p>\n\n<pre><code>number_of_divisions.flat_map do |n|\n  d.repeated_combination(n).reject do |p| # no need `to_a`\n    p.inject(:+) != 16\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 135, "user_id": 3464753, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f0882324e555b6cb3e4eacbab7a66b09?s=128&d=identicon&r=PG&f=1", "display_name": "thenapking", "link": "https://stackoverflow.com/users/3464753/thenapking"}, "edited": false, "score": 0, "creation_date": 1499369657, "post_id": 44933802, "comment_id": 76890378, "body": "This is very interesting.  I had wondered if the previous solutions were including too few results but couldn&#39;t spot one that was missing."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1499286074, "last_edit_date": 1499286074, "creation_date": 1499280270, "answer_id": 44933802, "question_id": 44927735, "link": "https://stackoverflow.com/questions/44927735/finding-all-permutations-of-numbers-plucked-from-an-array-which-sum-to-16/44933802#44933802", "title": "Finding all permutations of numbers plucked from an array which sum to 16", "body": "<p>There are far fewer repeated combinations than repeated permutations, so let's find the repeated combinations that sum to the given value, then permute each of those. Moreover, by applying <code>uniq</code> at each of several steps of the calculation we can significantly reduce the number of repeated combinations and permutations considered.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>require 'set'\n\ndef rep_perms_for_all(arr, n_arr, tot)\n  n_arr.flat_map { |n| rep_perms_for_1(arr, n, tot) }\nend\n\ndef rep_perms_for_1(arr, n, tot)\n   rep_combs_to_rep_perms(rep_combs_for_1(arr, n, tot)).uniq\nend\n\ndef rep_combs_for_1(arr, n, tot)\n  arr.repeated_combination(n).uniq.select { |c| c.sum == tot }\nend\n\ndef rep_combs_to_rep_perms(combs)\n  combs.flat_map { |c| comb_to_perms(c) }.uniq\nend\n\ndef comb_to_perms(comb)\n  comb.permutation(comb.size).uniq.uniq do |p| \n    p.size.times.with_object(Set.new) { |i,s| s &lt;&lt; p.rotate(i) } \n  end\nend\n</code></pre>\n\n<p><strong>Examples</strong></p>\n\n<pre><code>rep_perms_for_all([2,3,4,5], [3], 12)\n  #=&gt; [[2, 5, 5], [3, 4, 5], [3, 5, 4], [4, 4, 4]]\nrep_perms_for_all([2,3,4,5,6,7,8], [3,4,5], 16).size\n  #=&gt; 93\nrep_perms_for_all([2,3,4,5,6,7,8], [3,4,5], 16)\n  #=&gt; [[2, 6, 8], [2, 8, 6], [2, 7, 7], [3, 5, 8], [3, 8, 5], [3, 6, 7],\n  #    [3, 7, 6], [4, 4, 8], [4, 5, 7], [4, 7, 5], [4, 6, 6], [5, 5, 6],\n  #    [2, 2, 4, 8], [2, 2, 8, 4], [2, 4, 2, 8], [2, 2, 5, 7], [2, 2, 7, 5],\n  #    [2, 5, 2, 7], [2, 2, 6, 6], [2, 6, 2, 6], [2, 3, 3, 8], [2, 3, 8, 3], \n  #    ...\n  #    [3, 3, 3, 7], [3, 3, 4, 6], [3, 3, 6, 4], [3, 4, 3, 6], [3, 3, 5, 5], \n  #    [3, 5, 3, 5], [3, 4, 4, 5], [3, 4, 5, 4], [3, 5, 4, 4], [4, 4, 4, 4],\n  #    ...\n  #    [2, 2, 4, 5, 3], [2, 2, 5, 3, 4], [2, 2, 5, 4, 3], [2, 3, 2, 4, 5],\n  #    [2, 3, 2, 5, 4], [2, 3, 4, 2, 5], [2, 3, 5, 2, 4], [2, 4, 2, 5, 3],\n  #    ...\n  #    [2, 5, 3, 3, 3], [2, 3, 3, 4, 4], [2, 3, 4, 3, 4], [2, 3, 4, 4, 3],\n  #    [2, 4, 3, 3, 4], [2, 4, 3, 4, 3], [2, 4, 4, 3, 3], [3, 3, 3, 3, 4]]\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p><code>rep_combs_for_1</code> uses the method <a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-sum\" rel=\"nofollow noreferrer\">Enumerable#sum</a>, which made its debut in Ruby v2.4. For earlier versions, use <code>c.reduce(:0) == tot</code>. </p>\n\n<p>In <code>comb_to_perms</code>, the first <code>uniq</code> simply removes duplicates. The second <code>uniq</code>, with a block, removes all but one of the <code>p.size</code> elements (arrays) that can be obtained by rotating any of the other <code>p-1</code> elements. For example,</p>\n\n<pre><code>p = [1,2,3]\np.size.times.with_object(Set.new) { |i,s| s &lt;&lt; p.rotate(i) }\n  #=&gt; #&lt;Set: {[1, 2, 3], [2, 3, 1], [3, 1, 2]}&gt; \n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 3464753, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f0882324e555b6cb3e4eacbab7a66b09?s=128&d=identicon&r=PG&f=1", "display_name": "thenapking", "link": "https://stackoverflow.com/users/3464753/thenapking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 351, "favorite_count": 0, "accepted_answer_id": 44928117, "answer_count": 2, "score": 2, "last_activity_date": 1499318033, "creation_date": 1499261509, "last_edit_date": 1499261572, "question_id": 44927735, "link": "https://stackoverflow.com/questions/44927735/finding-all-permutations-of-numbers-plucked-from-an-array-which-sum-to-16", "title": "Finding all permutations of numbers plucked from an array which sum to 16", "body": "<p>I would like to find all the permutations of plucking 3, 4 or 5 numbers from [2,3,4,5,6,7,8], repeats allowed, such that their sum is 16. So [8,5,3], [8,3,5] and [4,3,3,3,3] are valid permutations. Also circular permutations should be removed so [3,3,3,3,4] wouldn't also be added to the answer. \nI can do this in Ruby without allowing repeats like this:</p>\n\n<pre><code>d = [2,3,4,5,6,7,8]\nnumber_of_divisions = [3,4,5]\nnumber_of_divisions.collect do |n|\n  d.permutation(n).to_a.reject do |p|\n    p[0..n].inject(0) { |sum,x| sum + x } != 16\n  end\nend\n</code></pre>\n\n<p>How could I allow repeats so that [3,3,3,3,4] was included?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1499261551, "post_id": 44927554, "comment_id": 76830952, "body": "<code>grep &quot;^ruby &quot; Gemfile</code>??"}, {"owner": {"reputation": 6132, "user_id": 894209, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/37aeb9f5242f93cec35e98e464ed7424?s=128&d=identicon&r=PG", "display_name": "Itay Grudev", "link": "https://stackoverflow.com/users/894209/itay-grudev"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1499270041, "post_id": 44927554, "comment_id": 76837557, "body": "Parsing the <code>Gemfile</code> did occur to me, but it doesn&#39;t qualify as efficient. I am pretty sure the version is cached somewhere and I only need to retrieve it."}], "answers": [{"tags": [], "owner": {"reputation": 3758, "user_id": 4530440, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y6kMf.png?s=128&g=1", "display_name": "Kruup&#246;s", "link": "https://stackoverflow.com/users/4530440/kruup%c3%b6s"}, "is_accepted": true, "score": 3, "last_activity_date": 1499262260, "creation_date": 1499262260, "answer_id": 44928018, "question_id": 44927554, "link": "https://stackoverflow.com/questions/44927554/programatic-way-to-retrieve-the-ruby-version-specified-in-the-gemfile/44928018#44928018", "title": "Programatic way to retrieve the Ruby version specified in the Gemfile?", "body": "<p>You can use <a href=\"http://www.rubydoc.info/github/rubygems/rubygems/Gem.ruby_version\" rel=\"nofollow noreferrer\"><code>Gem.ruby_version</code></a></p>\n\n<pre><code>Gem.ruby_version.to_s\n=&gt; \"2.2.5.319\"\n</code></pre>\n"}], "owner": {"reputation": 6132, "user_id": 894209, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/37aeb9f5242f93cec35e98e464ed7424?s=128&d=identicon&r=PG", "display_name": "Itay Grudev", "link": "https://stackoverflow.com/users/894209/itay-grudev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 1, "accepted_answer_id": 44928018, "answer_count": 1, "score": 2, "last_activity_date": 1499262260, "creation_date": 1499261073, "question_id": 44927554, "link": "https://stackoverflow.com/questions/44927554/programatic-way-to-retrieve-the-ruby-version-specified-in-the-gemfile", "title": "Programatic way to retrieve the Ruby version specified in the Gemfile?", "body": "<p>I am looking for an efficient a programatic way to retrieve the Ruby version specified in a Rails app Gemfile.</p>\n\n<pre><code># Gemfile\nruby '2.3.4'\n</code></pre>\n"}, {"tags": ["ruby", "rubygems", "version", "bundler"], "answers": [{"comments": [{"owner": {"reputation": 3889, "user_id": 414075, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9bd2fa005d80986390510518f00476e8?s=128&d=identicon&r=PG", "display_name": "white_gecko", "link": "https://stackoverflow.com/users/414075/white-gecko"}, "edited": false, "score": 0, "creation_date": 1499262931, "post_id": 44927630, "comment_id": 76832003, "body": "I guess this would also include the latest future stable versions, with a different major number, than the specified pre-release. (I&#39;ve added an example to the original question.)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 3889, "user_id": 414075, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9bd2fa005d80986390510518f00476e8?s=128&d=identicon&r=PG", "display_name": "white_gecko", "link": "https://stackoverflow.com/users/414075/white-gecko"}, "edited": false, "score": 0, "creation_date": 1499263063, "post_id": 44927630, "comment_id": 76832109, "body": "Could you please restate the question? I explicitly put stable <code>2.1.0</code> version there to show where it is placed in sorted list."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1499261242, "creation_date": 1499261242, "answer_id": 44927630, "question_id": 44927531, "link": "https://stackoverflow.com/questions/44927531/set-version-to-latest-version-including-prereleases-in-gemfile/44927630#44927630", "title": "Set version to latest version including prereleases in Gemfile", "body": "<p>This is a very bad idea in a nutshell, but it\u2019s very easy to check:</p>\n\n<pre><code>%w|2.1.0.alpha.pre.171\n   2.1.0\n   2.2.0.alpha.pre.1\n   3.0.0.alpha.pre.1|.map(&amp;Gem::Version.method(:new)).sort\n#\u21d2 [\n#   [0] #&lt;Gem::Version \"2.1.0.alpha.pre.171\"&gt;,\n#   [1] #&lt;Gem::Version \"2.1.0\"&gt;,\n#   [2] #&lt;Gem::Version \"2.2.0.alpha.pre.1\"&gt;,\n#   [3] #&lt;Gem::Version \"3.0.0.alpha.pre.1\"&gt;\n# ]\n</code></pre>\n\n<p>So, yes, <code>&gt;=</code> will work for any new release, including <code>2.1.0</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 556, "user_id": 3025507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66e8ce55da6fbc42bbf48ed56a824e6b?s=128&d=identicon&r=PG", "display_name": "greysteil", "link": "https://stackoverflow.com/users/3025507/greysteil"}, "is_accepted": false, "score": 1, "last_activity_date": 1499464010, "creation_date": 1499464010, "answer_id": 44980106, "question_id": 44927531, "link": "https://stackoverflow.com/questions/44927531/set-version-to-latest-version-including-prereleases-in-gemfile/44980106#44980106", "title": "Set version to latest version including prereleases in Gemfile", "body": "<p>You'll want to do two things:</p>\n\n<ol>\n<li><p>Specify <code>&gt;= 2.1.0.alpha.pre.171</code> in your Gemfile. The important thing here is that the specified constraint is itself a pre-release, which is the only way to make Bundler will pick up that you want pre-releases<sup>1</sup>. All future releases, including pre-releases and major releases, will then be included when Bundler looks for updates.</p></li>\n<li><p>Use an automated tool to regularly update the Gemfile.lock. Any of <a href=\"https://dependabot.com\" rel=\"nofollow noreferrer\">Dependabot</a>, <a href=\"https://depfu.io\" rel=\"nofollow noreferrer\">Depfu</a> or <a href=\"https://deppbot.com\" rel=\"nofollow noreferrer\">Deppbot</a> would work. (<em>Disclosure:</em> I wrote Dependabot.)</p></li>\n</ol>\n\n<p>Surprisingly, as of Bundler 1.15.1, there's no option that can be passed to <code>bundle update</code> that replicates the behaviour created by (1).</p>\n\n<hr>\n\n<ol>\n<li><a href=\"https://github.com/bundler/bundler/blob/v1.15.1/lib/bundler/index.rb#L194-L200\" rel=\"nofollow noreferrer\">https://github.com/bundler/bundler/blob/v1.15.1/lib/bundler/index.rb#L194-L200</a></li>\n</ol>\n"}], "owner": {"reputation": 3889, "user_id": 414075, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9bd2fa005d80986390510518f00476e8?s=128&d=identicon&r=PG", "display_name": "white_gecko", "link": "https://stackoverflow.com/users/414075/white-gecko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 44927630, "answer_count": 2, "score": 0, "last_activity_date": 1499464010, "creation_date": 1499261018, "last_edit_date": 1499263095, "question_id": 44927531, "link": "https://stackoverflow.com/questions/44927531/set-version-to-latest-version-including-prereleases-in-gemfile", "title": "Set version to latest version including prereleases in Gemfile", "body": "<p>How do I specify a version constraint in a Gemfile, such that it always take the latest release including pre-releases of a gem.</p>\n\n<p>Currently the library I work with has the latest stable release <code>2.0.0</code>, and the latest pre-release <code>2.1.0.alpha.pre.171</code>.</p>\n\n<p>I could set the version constraint to <code>&gt;=2.1.0.alpha.pre.171</code> or just <code>&gt;=2.1.0.a</code>, as I understand it. But would that also include future pre releases such as <code>&gt;=2.2.0.alpha.pre.1</code> or even <code>&gt;=3.0.0.alpha.pre.1</code> as well as future stable versions such as <code>3.0.0</code>? And would that always resolve to the latest version?</p>\n\n<p><em>Disclaimer</em>:\nTo not be misunderstood, this is not for any productive dependency management. The idea is to have a demo up an running, which should always include the latest features and as well should crash if the latest pre-release is broken.</p>\n"}, {"tags": ["ruby", "chef-infra", "nokogiri", "chef-solo"], "comments": [{"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1499266060, "post_id": 44927451, "comment_id": 76834517, "body": "add a <code>chef_gem &#39;nokogiri&#39;</code> resource before your ruby_block, so the nokogiri gem will be available to require."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1499273600, "post_id": 44927451, "comment_id": 76839766, "body": "&quot;is there anything I can do to parse my xml file?&quot; The correct question at this point is, &quot;How do I install Nokogiri?&quot;. Once you&#39;re past that then parsing the XML is the next question."}], "answers": [{"comments": [{"owner": {"reputation": 8205, "user_id": 373784, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2f107ff9d44f2d9968e425689724383f?s=128&d=identicon&r=PG", "display_name": "Mark Estrada", "link": "https://stackoverflow.com/users/373784/mark-estrada"}, "edited": false, "score": 0, "creation_date": 1502854224, "post_id": 44936192, "comment_id": 78367456, "body": "Then is there any other way to do the parsing of xml without adding additional gems?  I am afraid that I cannot load anything in my environment due to some constraint."}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 8205, "user_id": 373784, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2f107ff9d44f2d9968e425689724383f?s=128&d=identicon&r=PG", "display_name": "Mark Estrada", "link": "https://stackoverflow.com/users/373784/mark-estrada"}, "edited": false, "score": 0, "creation_date": 1502854889, "post_id": 44936192, "comment_id": 78367580, "body": "REXML is included with Ruby."}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 0, "last_activity_date": 1499289651, "creation_date": 1499289651, "answer_id": 44936192, "question_id": 44927451, "link": "https://stackoverflow.com/questions/44927451/how-to-install-nokogiri-using-chef/44936192#44936192", "title": "How to install Nokogiri using Chef", "body": "<p>Unfortunately we didn't start including Nokogiri in the installers until Chef 12.7.</p>\n"}], "owner": {"reputation": 8205, "user_id": 373784, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2f107ff9d44f2d9968e425689724383f?s=128&d=identicon&r=PG", "display_name": "Mark Estrada", "link": "https://stackoverflow.com/users/373784/mark-estrada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 265, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499289651, "creation_date": 1499260807, "last_edit_date": 1499273663, "question_id": 44927451, "link": "https://stackoverflow.com/questions/44927451/how-to-install-nokogiri-using-chef", "title": "How to install Nokogiri using Chef", "body": "<p>I have chef-solo version 12.6</p>\n\n<p>In my recipe I have this code:</p>\n\n<pre><code>ruby_block \"Parse the XML File \" do\n    block do\n        require 'nokogiri'\n    end\nend\n</code></pre>\n\n<p>But I am getting this exception:</p>\n\n<pre><code>LoadError\n---------\ncannot load such file -- nokogiri\n</code></pre>\n\n<p>I used the omnibus chef installer and I cannot upgrade to the latest chef-solo.</p>\n\n<p>How do I get Nokogiri to load?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routes", "nested"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 7283800, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10157837963530655/picture?type=large", "display_name": "Rodolphe Geant", "link": "https://stackoverflow.com/users/7283800/rodolphe-geant"}, "edited": false, "score": 0, "creation_date": 1499624434, "post_id": 44927677, "comment_id": 76973116, "body": "Pavan, Thanks for answering my question. This completely makes sense now and working fine. Your help is much appreciated!"}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": true, "score": 1, "last_activity_date": 1499263313, "last_edit_date": 1499263313, "creation_date": 1499261358, "answer_id": 44927677, "question_id": 44927257, "link": "https://stackoverflow.com/questions/44927257/unable-to-route-to-child-resource-nested-routes/44927677#44927677", "title": "Unable to route to child resource - Nested routes", "body": "<p>In your <code>services#show</code> method you are fetching the <code>vehicle</code> and <code>service</code> with <strong>wrong params</strong>. Also <code>Vehicle.services</code> is wrong, it should be <code>@vehicle.services</code></p>\n\n<pre><code>def show\n  @vehicle = Vehicle.find(params[:vehicle_id])\n  @service = @vehicle.services.find(params[:id])\nend\n</code></pre>\n\n<p><strong><em>Update:</em></strong></p>\n\n<p>You should remove <code>member</code> in the routes, else it will produce the routes like</p>\n\n<pre><code>service GET  /vehicles/:id/services/:id(.:format)  services#show\n</code></pre>\n\n<p>which are <strong>irrelevant</strong></p>\n\n<pre><code>resources :vehicles do\n  resources :services  \nend\n</code></pre>\n\n<p>So now you will have routes like </p>\n\n<pre><code>service GET  /vehicles/:vehicle_id/services/:id(.:format)  services#show\n</code></pre>\n\n<p>which are relevant and you can fetch the vehicle with <code>params[:vehicle_id]</code> and service with <code>params[:id]</code></p>\n\n<p>Don't forget to change the <em>route helpers</em>. For instance <code>service_path</code> will become <code>vehicle_service_path</code></p>\n\n<pre><code>&lt;%= link_to \"Details\", vehicle_service_path(@vehicle,s) %&gt;\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 7283800, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10157837963530655/picture?type=large", "display_name": "Rodolphe Geant", "link": "https://stackoverflow.com/users/7283800/rodolphe-geant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 44927677, "answer_count": 1, "score": 0, "last_activity_date": 1499263313, "creation_date": 1499260248, "question_id": 44927257, "link": "https://stackoverflow.com/questions/44927257/unable-to-route-to-child-resource-nested-routes", "title": "Unable to route to child resource - Nested routes", "body": "<p>I've been banging my head against this one for few days now ......</p>\n\n<p>my routes.rb file looks like this:</p>\n\n<pre><code>resources :vehicles do\n member do\n   resources :services  \n end\nend\n</code></pre>\n\n<p>my service.rb file shows:</p>\n\n<pre><code>class Service &lt; ActiveRecord::Base\n  belongs_to :vehicle\nend\n</code></pre>\n\n<p>my vehicle.rb file shows:</p>\n\n<pre><code>class Vehicle &lt; ActiveRecord::Base\n  has_many :services, :dependent =&gt; :destroy\nend\n</code></pre>\n\n<p>Here is services_controller.rb</p>\n\n<pre><code>class ServicesController &lt; ApplicationController\n\n  def index\n    @vehicle = Vehicle.find(params[:id])\n    @services = @vehicle.services.order('created_at DESC')\n  end\n\n  def show\n    @vehicle = Vehicle.find(params[:id])\n    @service = Vehicle.services.find(params[:service_id])\n  end\n\n  def new\n    @vehicle = Vehicle.find(params[:id])\n    @service = @vehicle.services.new\n  end \n\n  def create\n    @vehicle = Vehicle.find(params[:id])\n    @service = @vehicle.services.build(service_params)\n    if @service.save\n      redirect_to @vehicle\n    else\n      render :new\n    end\n  end\n\n\n  private\n    def service_params\n       params.require(:service).permit(:service_option, :odometer, \n   :current_service, :price, :comments, :next_service)\n  end\n\nend\n</code></pre>\n\n<p>And here is the services#index </p>\n\n<pre><code>&lt;h1&gt;Services&lt;/h1&gt;\n\n\n&lt;% @services.each do |s| %&gt;\n  &lt;%= link_to \"Details\", service_path(s) %&gt;\n  &lt;%= s.created_at %&gt;\n  &lt;%= s.service_option %&gt;\n  &lt;%= s.odometer %&gt;&lt;br&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Clicking on the \"Details\" link or manually entering the URL </p>\n\n<blockquote>\n  <p><a href=\"http://localhost:3000/vehicles/2/services/7\" rel=\"nofollow noreferrer\">http://localhost:3000/vehicles/2/services/7</a></p>\n</blockquote>\n\n<p>gives my systematically the same routing error: </p>\n\n<blockquote>\n  <p>ActiveRecord::RecordNotFound in ServicesController#show\n    Couldn't find Vehicle with 'id'=7</p>\n</blockquote>\n\n<pre><code>Extracted source (around line #10):\n\ndef show\n   @vehicle = Vehicle.find(params[:id])\n   @service = Vehicle.services.find(params[:service_id])\nend\n</code></pre>\n\n<p>It passes a SERVICE ID to a vehicle objet / variable and I don't know why!</p>\n\n<p>Thanks a million!</p>\n"}, {"tags": ["arrays", "ruby", "add", "sub-array"], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1499260686, "post_id": 44927043, "comment_id": 76830305, "body": "And even if they are arrays, <code>flatten</code> accepts a <code>level</code> parameter :) <code>[[1,[2]],[3,[4]]].flatten(1) #\u21d2 [1, [2], 3, [4]]</code>."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1499262504, "post_id": 44927043, "comment_id": 76831680, "body": "@mudasobwa: True, but I should have just closed the question instead of answering it."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 0, "last_activity_date": 1499259681, "creation_date": 1499259681, "answer_id": 44927043, "question_id": 44926936, "link": "https://stackoverflow.com/questions/44926936/how-to-add-subarrays-to-itself-ruby/44927043#44927043", "title": "How to add subarrays to itself? Ruby", "body": "<p>Do you just want to <a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-flatten\" rel=\"nofollow noreferrer\">flatten</a> the array?</p>\n\n<pre><code>arr.flatten\n</code></pre>\n\n<p>It concatenates every sub-array into one big array, recursively if needed.</p>\n\n<pre><code>[[1,2], [3,4]].flatten\n# =&gt; [1, 2, 3, 4]\n</code></pre>\n\n<p>If you want to modify the array in place, you can use :</p>\n\n<pre><code>arr.flatten!\n</code></pre>\n\n<p>It doesn't matter what the inner-elements look like (integers, strings, hashes), as long as they're not arrays, they won't be touched by <code>flatten</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 19325, "user_id": 67505, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/094c0ec476b95ed7619d6a4cb918da78?s=128&d=identicon&r=PG", "display_name": "Chen Kinnrot", "link": "https://stackoverflow.com/users/67505/chen-kinnrot"}, "is_accepted": false, "score": 0, "last_activity_date": 1499259683, "creation_date": 1499259683, "answer_id": 44927044, "question_id": 44926936, "link": "https://stackoverflow.com/questions/44926936/how-to-add-subarrays-to-itself-ruby/44927044#44927044", "title": "How to add subarrays to itself? Ruby", "body": "<p>Ruby have a built in method try use <a href=\"https://apidock.com/ruby/Array/flatten\" rel=\"nofollow noreferrer\">Array.flatten</a></p>\n"}, {"tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": false, "score": 0, "last_activity_date": 1499259689, "creation_date": 1499259689, "answer_id": 44927046, "question_id": 44926936, "link": "https://stackoverflow.com/questions/44926936/how-to-add-subarrays-to-itself-ruby/44927046#44927046", "title": "How to add subarrays to itself? Ruby", "body": "<p>You can use <a href=\"https://ruby-doc.org/core-2.4.0/Array.html#method-i-flatten-21\" rel=\"nofollow noreferrer\"><code>flatten!</code></a>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>arr.flatten!\n\n#=&gt; [{\"big\"=&gt;\"2055\", \"small\"=&gt;\"-10\", \"thin\"=&gt;\"i\"},\n     {\"big\"=&gt;\"2785\", \"small\"=&gt;\"0\", \"thin\"=&gt;\"l\"},\n     {\"big\"=&gt;\"7890\", \"small\"=&gt;\"3\", \"thin\"=&gt;\"t\"},\n     {\"big\"=&gt;\"2669\", \"small\"=&gt;\"0,5\", \"thin\"=&gt;\"f\"},\n     {\"big\"=&gt;\"9000\", \"small\"=&gt;\"2\", \"fat\"=&gt;\"O\"}]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 140, "user_id": 5206498, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ClgEHFDzy9Q/AAAAAAAAAAI/AAAAAAAAABI/lxGRo4JTIQE/photo.jpg?sz=128", "display_name": "Son Nguyen", "link": "https://stackoverflow.com/users/5206498/son-nguyen"}, "is_accepted": false, "score": 0, "last_activity_date": 1499259702, "creation_date": 1499259702, "answer_id": 44927053, "question_id": 44926936, "link": "https://stackoverflow.com/questions/44926936/how-to-add-subarrays-to-itself-ruby/44927053#44927053", "title": "How to add subarrays to itself? Ruby", "body": "<p>You can try this </p>\n\n<pre><code>arr = arr.flatten\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 8099086, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7e2e84e24550ed4fb8b09296f8d934f5?s=128&d=identicon&r=PG&f=1", "display_name": "mia102aim", "link": "https://stackoverflow.com/users/8099086/mia102aim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "closed_date": 1499262626, "answer_count": 4, "score": 2, "last_activity_date": 1499260570, "creation_date": 1499259405, "last_edit_date": 1499260570, "question_id": 44926936, "link": "https://stackoverflow.com/questions/44926936/how-to-add-subarrays-to-itself-ruby", "closed_reason": "Duplicate", "title": "How to add subarrays to itself? Ruby", "body": "<p>I have an array containing of subarrays like this:</p>\n\n<pre><code>arr = [[{\"big\" =&gt; \"2055\", \"small\" =&gt; -\"-10\", \"thin\" =&gt; \"i\"},\n        {\"big\" =&gt; \"2785\", \"small\" =&gt; \"0\", \"thin\" =&gt; \"l\"}], \n       [{\"big\" =&gt; \"7890\", \"small\" =&gt; \"3\", \"thin\" =&gt; \"t\"},\n        {\"big\" =&gt; \"2669\", \"small\" =&gt; \"0,5\", \"thin\" =&gt; \"f\"},\n        {\"big\" =&gt; \"9000\", \"small\" =&gt; \"2\", \"fat\" =&gt; \"O\"}]]\n</code></pre>\n\n<p>I want to add subarrays to itself to get an array like this:</p>\n\n<pre><code>arr = [{\"big\" =&gt; \"2055\", \"small\" =&gt; \"-10\", \"thin\" =&gt; \"i\"},\n       {\"big\" =&gt; \"2785\", \"small\" =&gt; \"0\", \"thin\" =&gt; \"l\"},\n       {\"big\" =&gt; \"7890\", \"small\" =&gt; \"3\", \"thin\" =&gt; \"t\"},\n       {\"big\" =&gt; \"2669\", \"small\" =&gt; \"0,5\", \"thin\" =&gt; \"f\"},\n       {\"big\" =&gt; \"9000\", \"small\" =&gt; \"2\", \"fat\" =&gt; \"O\"}]\n</code></pre>\n\n<p>Doing like this:</p>\n\n<pre><code>arr.map! {|x| x+x}\n</code></pre>\n\n<p>I get added subarrays but every hash appears twice. How to do it right?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "shopify", "shopify-app"], "comments": [{"owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "edited": false, "score": 0, "creation_date": 1499264302, "post_id": 44926866, "comment_id": 76833107, "body": "<code>&lt;%= button_to &quot;Button Text&quot;, some_path %&gt;</code>"}, {"owner": {"reputation": 802, "user_id": 5079670, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-VDBJqHD6Q1g/AAAAAAAAAAI/AAAAAAAAABE/OVIZgInpR9I/photo.jpg?sz=128", "display_name": "Pasupathi Thangavel", "link": "https://stackoverflow.com/users/5079670/pasupathi-thangavel"}, "reply_to_user": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "edited": false, "score": 0, "creation_date": 1499317725, "post_id": 44926866, "comment_id": 76856284, "body": "I am not asking about rails button tag.I need to inject one button in shopify site frontend.Installing my shopify app needs to be trigger the above action."}], "answers": [{"tags": [], "owner": {"reputation": 329, "user_id": 8159914, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XApNb.jpg?s=128&g=1", "display_name": "Sowmiya Sangaiah", "link": "https://stackoverflow.com/users/8159914/sowmiya-sangaiah"}, "is_accepted": true, "score": 1, "last_activity_date": 1499339704, "last_edit_date": 1499339704, "creation_date": 1499339301, "answer_id": 44947233, "question_id": 44926866, "link": "https://stackoverflow.com/questions/44926866/add-one-button-in-shopify-site-header-using-shopify-app-in-ror/44947233#44947233", "title": "add one button in shopify site header using shopify app in ROR", "body": "<p>Hopefully you should replace/overwrite your snippets/header.liquid file in your store's theme with the help of Shopify API as below:</p>\n\n<p>In your app, try the below in your root function as:</p>\n\n<pre><code>header = ShopifyAPI::Asset.find(\"sections/header.liquid\")\nheader.value # returns the contents of the header.liquid\n</code></pre>\n\n<p>update your <code>header.value</code> using rails sub! as:</p>\n\n<pre><code>#this will add the button at appropriate place instead `{% endif %}`\nheader.value.sub!(\"{% endif %}\", \"&lt;button type='button'&gt;Click Button&lt;/button&gt; {% endif %}\") \n\n#do save    \nheader.save\n</code></pre>\n\n<p>Hope this will help you!!</p>\n"}], "owner": {"reputation": 802, "user_id": 5079670, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-VDBJqHD6Q1g/AAAAAAAAAAI/AAAAAAAAABE/OVIZgInpR9I/photo.jpg?sz=128", "display_name": "Pasupathi Thangavel", "link": "https://stackoverflow.com/users/5079670/pasupathi-thangavel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 471, "favorite_count": 0, "accepted_answer_id": 44947233, "answer_count": 1, "score": 0, "last_activity_date": 1499339704, "creation_date": 1499259215, "question_id": 44926866, "link": "https://stackoverflow.com/questions/44926866/add-one-button-in-shopify-site-header-using-shopify-app-in-ror", "title": "add one button in shopify site header using shopify app in ROR", "body": "<p>I need to insert one <strong>button</strong> after search icon in shopify sites throgh the shopify app.Give me some suggestions.</p>\n\n<p><a href=\"https://i.stack.imgur.com/betHy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/betHy.png\" alt=\"Like this image\"></a></p>\n\n<p>Thanks in Advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1499259394, "post_id": 44926786, "comment_id": 76829308, "body": "Please show the source code of <code>Scorable</code> module, specifically the <code>pct</code> method."}, {"owner": {"reputation": 19325, "user_id": 67505, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/094c0ec476b95ed7619d6a4cb918da78?s=128&d=identicon&r=PG", "display_name": "Chen Kinnrot", "link": "https://stackoverflow.com/users/67505/chen-kinnrot"}, "edited": false, "score": 1, "creation_date": 1499259435, "post_id": 44926786, "comment_id": 76829348, "body": "Rubymine is not perfect ..."}, {"owner": {"reputation": 77, "user_id": 7701479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/305626a43e9ecafb74220fb72c99bcd3?s=128&d=identicon&r=PG&f=1", "display_name": "Zoopy", "link": "https://stackoverflow.com/users/7701479/zoopy"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1499259536, "post_id": 44926786, "comment_id": 76829429, "body": "@mudasobwa Have updated the question with that method definition."}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 7701479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/305626a43e9ecafb74220fb72c99bcd3?s=128&d=identicon&r=PG&f=1", "display_name": "Zoopy", "link": "https://stackoverflow.com/users/7701479/zoopy"}, "edited": false, "score": 0, "creation_date": 1499260722, "post_id": 44927087, "comment_id": 76830322, "body": "Ah, thank you! I can&#39;t believe it was that simple. I&#39;ll definitely remember the module_function thing. Module and instance methods still regularly trip me up in Rails.   Regarding the return statement, it&#39;s a very bad habit I&#39;m struggling to shed. I come from a C# background and started Rails 1 1/2 months ago and my instincts still regularly rebel against many Rails conventions."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1499259800, "creation_date": 1499259800, "answer_id": 44927087, "question_id": 44926786, "link": "https://stackoverflow.com/questions/44926786/rails-rspec-nomethoderror-undefined-method/44927087#44927087", "title": "Rails - RSpec NoMethodError: undefined method", "body": "<p>To make the module method callable with <code>Module.method</code> notation is should be declared in module scope.</p>\n\n<pre><code>module Scorable\n  def self.pct(num,den)\n    return 0 if num == 0 or num.nil?\n    return (100.0 * num / den).round\n  end\nend\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>module Scorable\n  class &lt;&lt; self\n    def pct(num,den)\n      return 0 if num == 0 or num.nil?\n      return (100.0 * num / den).round\n    end\n  end\nend\n</code></pre>\n\n<p>or with <a href=\"https://ruby-doc.org/core/Module.html#method-i-module_function\" rel=\"nofollow noreferrer\"><code>Module#module_function</code></a>:</p>\n\n<pre><code>module Scorable\n  module_function\n  def pct(num,den)\n    return 0 if num == 0 or num.nil?\n    return (100.0 * num / den).round\n  end\nend\n</code></pre>\n\n<p>Note, that the latter declares <em>both</em> module method and normal instance method within this module.</p>\n\n<hr>\n\n<p><em>Sidenote:</em> using <code>return</code> in the very last line of the method is considered a code smell and should be avoided:</p>\n\n<pre><code>module Scorable\n  def self.pct(num,den)\n    return 0 if num == 0 or num.nil?\n    (100.0 * num / den).round\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 7701479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/305626a43e9ecafb74220fb72c99bcd3?s=128&d=identicon&r=PG&f=1", "display_name": "Zoopy", "link": "https://stackoverflow.com/users/7701479/zoopy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4295, "favorite_count": 0, "accepted_answer_id": 44927087, "answer_count": 1, "score": 0, "last_activity_date": 1499259800, "creation_date": 1499259016, "last_edit_date": 1499259503, "question_id": 44926786, "link": "https://stackoverflow.com/questions/44926786/rails-rspec-nomethoderror-undefined-method", "title": "Rails - RSpec NoMethodError: undefined method", "body": "<p>I'm trying to test a very simple method that takes in 2 numbers and uses them to work out a percentage. However, when I try and run the tests it fails with the following error:</p>\n\n<pre><code>NoMethodError: undefined method `pct' for Scorable:Module\n./spec/models/concerns/scorable_spec.rb:328:in `block (2 levels) in \n&lt;top (required)&gt;'\n./spec/rails_helper.rb:97:in `block (3 levels) in &lt;top (required)&gt;'\n./spec/rails_helper.rb:96:in `block (2 levels) in &lt;top (required)&gt;'\n-e:1:in `&lt;main&gt;'\n</code></pre>\n\n<p>Here's my spec file for the module:</p>\n\n<pre><code>require 'rails_helper'\nRSpec.describe Scorable, :type =&gt; :concern do\n\n  it \"pct should return 0 if den is 0 or nil\" do\n    expect(Scorable.pct(nil, 15)).to eq(0)\n    expect(Scorable.pct(0, 15)).to eq(0)\n  end\n\nend\n</code></pre>\n\n<p>Here is the pct method located in Scorable.rb:</p>\n\n<pre><code>def pct(num,den)\n  return 0 if num == 0 or num.nil?\n  return (100.0 * num / den).round\nend\n</code></pre>\n\n<p>And here's my rspec_helper:</p>\n\n<pre><code> if ENV['ENABLE_COVERAGE']\n   require 'simplecov'\n   SimpleCov.start do\n   add_filter \"/spec/\"\n   add_filter \"/config/\"\n   add_filter '/vendor/'\n\n   add_group 'Controllers', 'app/controllers'\n   add_group 'Models', 'app/models'\n   add_group 'Helpers', 'app/helpers'\n   add_group 'Mailers', 'app/mailers'\n   add_group 'Views', 'app/views'\n end\nend\n\nRSpec.configure do |config|\n  config.expect_with :rspec do |expectations|\n  expectations.include_chain_clauses_in_custom_matcher_descriptions = \n  true\nend\nconfig.raise_errors_for_deprecations!\n\n config.mock_with :rspec do |mocks|\n   mocks.verify_partial_doubles = true\n end\nend\n</code></pre>\n\n<p>I'm very new to RSpec and have been puzzling over this one for more than a day. It's definitely pointing to an existing method, as when I use Go To Declaration in RubyMine it opens the method declaration. Can anyone maybe shed some light for me on this one? I'm sure I'm overlooking something incredibly simple.</p>\n"}, {"tags": ["ruby", "regex", "perl", "latex"], "comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1499260695, "post_id": 44926686, "comment_id": 76830314, "body": "what you need in output"}, {"owner": {"reputation": 5139, "user_id": 3293148, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a5b0a16cfd67f7e3944d886fd1bebde5?s=128&d=identicon&r=PG", "display_name": "Jasmine Lognnes", "link": "https://stackoverflow.com/users/3293148/jasmine-lognnes"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1499261039, "post_id": 44926686, "comment_id": 76830540, "body": "Replace <code>#</code> with <code>\\#</code> if it is in a caption."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1499261148, "post_id": 44926686, "comment_id": 76830633, "body": "check the answer"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1499285928, "post_id": 44926686, "comment_id": 76846716, "body": "Count braces, for instance.  Check for <code>\\caption</code> and once found set a flag.  While the flag is &quot;on&quot;, as you read the file: concatenate lines (that&#39;s your buffer), and add counts for left and right braces to their totals (for the buffer). Once you get to have an extra <code>}</code> you found the closing brace for <code>\\caption</code>. Run substitution (for <code>\\#</code>) on that buffer, reset flags/counters.  This uses the fact that you cannot have multiple <code>\\caption</code> on a line, makes other assumtpions, and likely leaves out details. Try (or make up your own parser of course), and if there is a problem post the code."}], "answers": [{"tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": false, "score": 1, "last_activity_date": 1499261026, "creation_date": 1499261026, "answer_id": 44927533, "question_id": 44926686, "link": "https://stackoverflow.com/questions/44926686/how-can-i-make-substitutions-only-within-the-scope-of-certain-latex-command-argu/44927533#44927533", "title": "How can I make substitutions only within the scope of certain LaTeX command arguments?", "body": "<blockquote>\n  <p>Just Try this:</p>\n</blockquote>\n\n<pre><code>my $str = '\\caption{\\small{Et elliptisk omr\u00e5de i planen er afgr\u00e6nset af en ellipse som er niveaukurven $\\mathcal{K\n}_{0}(f)$ for andengradspolynomiet $f(x,y) = 2\\cdot x^{2} + 2\\cdot y^{2} + 2\\cdot x\\cdot y -8\\cdot x -10 \n\\cdot y + 13$. Se opgave \\ref{exercEllipseLevel}  og  eksempel \\href{./20-Keglesnit.pdf#evncount.20.1}{\n20.1} i eNote \\ref{tn20}.}} \\label{figEllipseLevel}';\n</code></pre>\n\n<blockquote>\n  <p><em>You can modify this regex (This is what I am using in my live)</em></p>\n</blockquote>\n\n<pre><code>my $reg = qw/((?:[^{}]*(?:{(?:[^{}]*(?:{(?:[^{}]*(?:{[^{}]*})*[^{}]*)*})*[^{}]*)*})*[^{}]*)*)/;\n\n$str=~s/$reg/$1=~s{\\#}{\\\\#}gr; /seg;\n\nprint $str;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code> \\caption{\\small{Et elliptisk omr\u03c3de i planen er afgr\u00b5nset af en ellipse som er niveaukurven $\\mathcal{K  \n }_{0}(f)$ for andengradspolynomiet $f(x,y) = 2\\cdot x^{2} + 2\\cdot y^{2} + 2\\cdot x\\cdot y -8\\cdot x -10  \n \\cdot y + 13$. Se opgave \\ref{exercEllipseLevel}  og  eksempel \\href{./20-Keglesnit.pdf\\#evncount.20.1}{  \n 20.1} i eNote \\ref{tn20}.}} \\label{figEllipseLevel}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 563, "user_id": 314813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1217becc9db6667a21f7ee839e6f3767?s=128&d=identicon&r=PG", "display_name": "d2xdt2", "link": "https://stackoverflow.com/users/314813/d2xdt2"}, "is_accepted": true, "score": 2, "last_activity_date": 1499324948, "creation_date": 1499324948, "answer_id": 44942010, "question_id": 44926686, "link": "https://stackoverflow.com/questions/44926686/how-can-i-make-substitutions-only-within-the-scope-of-certain-latex-command-argu/44942010#44942010", "title": "How can I make substitutions only within the scope of certain LaTeX command arguments?", "body": "<p>Here is a brute force solution in Ruby, now that you have added the Ruby tag. It is not efficient, but safe and simple.</p>\n\n<pre><code>x.split('\\caption').each_with_index.map { |str, i|\n  next str if i == 0\n  indent = 0\n  end_caption = str.length\n  str.split('').each_with_index do |c, ci|\n    if c == '{'\n      indent = indent + 1\n    elsif c == '}'\n      indent = indent - 1\n      if (indent == 0)\n        end_caption = ci\n        break\n      end\n    end\n  end\n  str[0..(end_caption)].gsub(/([^\\\\])#/,'\\1\\\\#')+ str[(end_caption+1)..-1]\n}.join(\u2018\\caption')\n</code></pre>\n\n<p>or if you are looking for a one-liner, then</p>\n\n<pre><code>x.gsub(/\\\\caption\\{((?:[^{}]+|\\{\\g&lt;1&gt;\\})+)\\}/m)  { |xx| Regexp.last_match[0].gsub(/([^\\\\])#/,\u2019\\1\\\\#\u2019) }\n</code></pre>\n\n<p>All of these of course requires that your Latex file can compile.</p>\n\n<p>For Perl you could consider <a href=\"http://search.cpan.org/~shay/Text-Balanced-2.03/lib/Text/Balanced.pm\" rel=\"nofollow noreferrer\"><code>Text::Balanced</code></a></p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1499529116, "creation_date": 1499529116, "answer_id": 44988006, "question_id": 44926686, "link": "https://stackoverflow.com/questions/44926686/how-can-i-make-substitutions-only-within-the-scope-of-certain-latex-command-argu/44988006#44988006", "title": "How can I make substitutions only within the scope of certain LaTeX command arguments?", "body": "<p>This can be done in Perl using two substitutions: the first to find the <code>\\caption</code> elements, end the second to replace all hash symbols <code>#</code> within the elements found</p>\n\n<p>It is convenient to use <a href=\"https://metacpan.org/pod/Regexp::Common::balanced\" rel=\"nofollow noreferrer\"><code>Regexp::Common::balanced</code></a> to match the required balanced sequence of braces</p>\n\n<p>The output of this program shows the string before and after editing. It's not the best test data as there is only a single instance of a hash symbol, and none outside the <code>\\caption</code> element, but it does show that it works with the example data</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nuse Regexp::Common 'balanced';\n\nmy $latex = &lt;&lt;'END';\n\\caption{\\small{Et elliptisk omr\u00e5de i planen er afgr\u00e6nset af en ellipse som er niveaukurven $\\mathcal{K }_{0}(f)$ for andengradspolynomiet $f(x,y) = 2\\cdot x^{2} + 2\\cdot y^{2} + 2\\cdot x\\cdot y -8\\cdot x -10 \\cdot y + 13$. Se opgave \\ref{exercEllipseLevel}  og  eksempel \\href{./20-Keglesnit.pdf#evncount.20.1}{ 20.1} i eNote \\ref{tn20}.}} \\label{figEllipseLevel}\nEND\n\nsay $latex;\n\n$latex =~ s{ ( \\\\caption $RE{balanced}{-parens=&gt;'{}'} ) }{\n    $1 =~ s/#/\\\\#/gr;\n}xeg;\n\nsay $latex;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>\\caption{\\small{Et elliptisk omr\u00e5de i planen er afgr\u00e6nset af en ellipse som er niveaukurven $\\mathcal{K }_{0}(f)$ for andengradspolynomiet $f(x,y) = 2\\cdot x^{2} + 2\\cdot y^{2} + 2\\cdot x\\cdot y -8\\cdot x -10 \\cdot y + 13$. Se opgave \\ref{exercEllipseLevel}  og  eksempel \\href{./20-Keglesnit.pdf#evncount.20.1}{ 20.1} i eNote \\ref{tn20}.}} \\label{figEllipseLevel}\n\n\\caption{\\small{Et elliptisk omr\u00e5de i planen er afgr\u00e6nset af en ellipse som er niveaukurven $\\mathcal{K }_{0}(f)$ for andengradspolynomiet $f(x,y) = 2\\cdot x^{2} + 2\\cdot y^{2} + 2\\cdot x\\cdot y -8\\cdot x -10 \\cdot y + 13$. Se opgave \\ref{exercEllipseLevel}  og  eksempel \\href{./20-Keglesnit.pdf\\#evncount.20.1}{ 20.1} i eNote \\ref{tn20}.}} \\label{figEllipseLevel}\n</code></pre>\n"}], "owner": {"reputation": 5139, "user_id": 3293148, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a5b0a16cfd67f7e3944d886fd1bebde5?s=128&d=identicon&r=PG", "display_name": "Jasmine Lognnes", "link": "https://stackoverflow.com/users/3293148/jasmine-lognnes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 1, "accepted_answer_id": 44942010, "answer_count": 3, "score": 1, "last_activity_date": 1499529116, "creation_date": 1499258752, "last_edit_date": 1499324689, "question_id": 44926686, "link": "https://stackoverflow.com/questions/44926686/how-can-i-make-substitutions-only-within-the-scope-of-certain-latex-command-argu", "title": "How can I make substitutions only within the scope of certain LaTeX command arguments?", "body": "<p>The below Latex is written in one line, but it could have been over several.</p>\n\n<p>The problem is <code>#</code> in caption commands have to be escaped, so the question is how to do this only within captions?</p>\n\n<p>Or does there exist a Perl/Ruby module that can find the closing <code>}</code> in such a complicated case?</p>\n\n<blockquote>\n  <p><code>\\caption{\\small{Et elliptisk omr\u00e5de i planen er afgr\u00e6nset af en ellipse som er niveaukurven $\\mathcal{K }_{0}(f)$ for andengradspolynomiet $f(x,y) = 2\\cdot x^{2} + 2\\cdot y^{2} + 2\\cdot x\\cdot y -8\\cdot x -10 \\cdot y + 13$. Se opgave \\ref{exercEllipseLevel}  og  eksempel \\href{./20-Keglesnit.pdf#evncount.20.1}{ 20.1} i eNote \\ref{tn20}.}} \\label{figEllipseLevel}</code></p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "cron"], "comments": [{"owner": {"reputation": 3004, "user_id": 5830036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/B2b06.png?s=128&g=1", "display_name": "Mayur Shah", "link": "https://stackoverflow.com/users/5830036/mayur-shah"}, "edited": false, "score": 1, "creation_date": 1499258142, "post_id": 44926327, "comment_id": 76828251, "body": "For count you should need to stored in the database"}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1499258871, "post_id": 44926566, "comment_id": 76828856, "body": "\u2764 this is a perfect example of an X/Y problem."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 2, "last_activity_date": 1499259159, "last_edit_date": 1499259159, "creation_date": 1499258454, "answer_id": 44926566, "question_id": 44926327, "link": "https://stackoverflow.com/questions/44926327/run-background-job-every-hour-for-n-number-of-timesruby-on-rails/44926566#44926566", "title": "Run background-job every hour for n number of times(ruby on rails)", "body": "<p>Scheduling syntax is for <em>recurring</em> jobs. Those that happen over and over again, until the end of times.</p>\n\n<p>For single-shot jobs, you enqueue them, with an optional delay (which is what you need here). So you can just enqueue the whole batch of your jobs all at once, with 1 hour increments:</p>\n\n<pre><code>1.upto(50).each do |x|\n  Resque.enqueue_in(x.hours, SomeJob)\nend \n</code></pre>\n"}], "owner": {"reputation": 304, "user_id": 5267326, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh3.googleusercontent.com/-kX8fLJ8aJlE/AAAAAAAAAAI/AAAAAAAAAIs/G5kueTFNIwY/photo.jpg?sz=128", "display_name": "vidal", "link": "https://stackoverflow.com/users/5267326/vidal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 443, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499259159, "creation_date": 1499257753, "last_edit_date": 1499258105, "question_id": 44926327, "link": "https://stackoverflow.com/questions/44926327/run-background-job-every-hour-for-n-number-of-timesruby-on-rails", "title": "Run background-job every hour for n number of times(ruby on rails)", "body": "<p>I am using resque for job scheduling. I want to run a job every 1 hour and for N times only. \nI also want to pass count in the job as argument</p>\n\n<p>for example: </p>\n\n<pre><code>i=0\n50.times do \n   every 1.hour, roles: [:whenever_cron] do\n     runner \"Resque.enqueue(SomeJob, i+1)\"\n   end \nend\n</code></pre>\n\n<p>How can I do this?</p>\n\n<p><strong>Note : -</strong> I don't want to run 50 jobs every hour. I want to run 1 job 50 times</p>\n"}, {"tags": ["ruby", "refactoring", "reek"], "comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1499259297, "post_id": 44925046, "comment_id": 76829225, "body": "Code quality tools should always be taken with a grain of salt. When performance is not the issue, readability is important. But use your judgement to decide which way it&#39;s better. The tools just show you where to look at."}, {"owner": {"reputation": 1281, "user_id": 2308531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DV29D.jpg?s=128&g=1", "display_name": "Maxim Fedotov", "link": "https://stackoverflow.com/users/2308531/maxim-fedotov"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1499259520, "post_id": 44925046, "comment_id": 76829420, "body": "Yeah totally agree with it @ndn, but I didn&#39;t know how much it&#39;ll improve performance, that&#39;s why I am asking this here"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1499259774, "post_id": 44925046, "comment_id": 76829640, "body": "&quot;I didn&#39;t know how much it&#39;ll improve performance&quot; - you can always <i>measure</i> that."}], "answers": [{"comments": [{"owner": {"reputation": 1281, "user_id": 2308531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DV29D.jpg?s=128&g=1", "display_name": "Maxim Fedotov", "link": "https://stackoverflow.com/users/2308531/maxim-fedotov"}, "edited": false, "score": 0, "creation_date": 1499259607, "post_id": 44925742, "comment_id": 76829486, "body": "Of course, I didn&#39;t imply it&#39;s the only reason. But when readability doesn&#39;t suffer, but rather just increases the line count, I was wondering if it&#39;s still worth it"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 1281, "user_id": 2308531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DV29D.jpg?s=128&g=1", "display_name": "Maxim Fedotov", "link": "https://stackoverflow.com/users/2308531/maxim-fedotov"}, "edited": false, "score": 0, "creation_date": 1499259649, "post_id": 44925742, "comment_id": 76829531, "body": "@MaximFedotov: well, that&#39;s a judgement call. One shouldn&#39;t blindly trust the tools. They don&#39;t know what makes good code. :)"}, {"owner": {"reputation": 1281, "user_id": 2308531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DV29D.jpg?s=128&g=1", "display_name": "Maxim Fedotov", "link": "https://stackoverflow.com/users/2308531/maxim-fedotov"}, "edited": false, "score": 0, "creation_date": 1499260019, "post_id": 44925742, "comment_id": 76829810, "body": "Yup, I understand that, but that&#39;s exactly why I posted the question, to see what more experienced developers would consider acceptable. Now that it looks like it doesn&#39;t quite affect performance, I&#39;ll probably just ignore array/hashes unless it&#39;s very frequently called. Will have to think of a best way to update my config"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 1281, "user_id": 2308531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DV29D.jpg?s=128&g=1", "display_name": "Maxim Fedotov", "link": "https://stackoverflow.com/users/2308531/maxim-fedotov"}, "edited": false, "score": 1, "creation_date": 1499260196, "post_id": 44925742, "comment_id": 76829939, "body": "@MaximFedotov: ah, I see that you posted an example. In your case, I&#39;d probably still extract that. It&#39;d make the code more DRY, if nothing else."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 2, "last_activity_date": 1499256199, "creation_date": 1499256199, "answer_id": 44925742, "question_id": 44925046, "link": "https://stackoverflow.com/questions/44925046/should-multiple-array-hash-lookups-be-stored-in-a-variable/44925742#44925742", "title": "Should multiple array/hash lookups be stored in a variable", "body": "<blockquote>\n  <p>So I was wondering if multiple array or hash lookups are so expensive</p>\n</blockquote>\n\n<p>Expensive calls are not the only reason for not doing the call multiple times. It also clutters the code without real need. Consider this not-so-contrived example:</p>\n\n<pre><code>Order.new(\n  name:       params[:order][:name],\n  total:      params[:order][:total],\n  line_items: [\n    {\n      product_name: params[:order][:line_item][:product],\n      price:        params[:order][:line_item][:price],\n    }\n  ]\n)\n</code></pre>\n\n<p>Even though those hash accesses are super-cheap, it still makes sense to extract them, for readability reasons.</p>\n\n<pre><code>order_params     = params[:order]\nline_item_params = order_params[:line_item]\n\nOrder.new(\n  name:       order_params[:name],\n  total:      order_params[:total],\n  line_items: [\n    {\n      product_name: line_item_params[:product],\n      price:        line_item_params[:price],\n    }\n  ]\n)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 418, "user_id": 83549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c39ead2d025bde14f3f39b20ff7d113?s=128&d=identicon&r=PG", "display_name": "kevinrutherford", "link": "https://stackoverflow.com/users/83549/kevinrutherford"}, "is_accepted": false, "score": 0, "last_activity_date": 1499327183, "creation_date": 1499327183, "answer_id": 44942759, "question_id": 44925046, "link": "https://stackoverflow.com/questions/44925046/should-multiple-array-hash-lookups-be-stored-in-a-variable/44942759#44942759", "title": "Should multiple array/hash lookups be stored in a variable", "body": "<p>The duplicate hash lookup represents coupling between those two lines of code. This can increase the time taken to understand the code, and can be a source of friction when changing it. Of course, within a small method like this the cost is relatively low; but if the two lines of code were further apart -- in different classes, for example -- the effects of the coupling would be much more costly.</p>\n\n<p>Here's a version of your method that doesn't have the duplication:</p>\n\n<pre><code>def sort_params\n  reference_letters = params[:reference_letter_section] || []\n  reference_letters.map.with_index(1) do |id, index|\n    { id: id, position: index }\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1281, "user_id": 2308531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DV29D.jpg?s=128&g=1", "display_name": "Maxim Fedotov", "link": "https://stackoverflow.com/users/2308531/maxim-fedotov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 44925742, "answer_count": 2, "score": 0, "last_activity_date": 1499327183, "creation_date": 1499254267, "last_edit_date": 1499259803, "question_id": 44925046, "link": "https://stackoverflow.com/questions/44925046/should-multiple-array-hash-lookups-be-stored-in-a-variable", "title": "Should multiple array/hash lookups be stored in a variable", "body": "<p>I've been using <a href=\"https://github.com/troessner/reek\" rel=\"nofollow noreferrer\">Reek</a> lately to refactor my code and one of the smells, <strong>DuplicateMethodCall</strong>, is being called on array and hash lookups, such as <code>array[1]</code> or <code>hash[:key]</code> when called multiple times.</p>\n\n<p>So I was wondering if multiple array or hash lookups are so expensive, that we should be storing them in a variable rather than calling them directly, which is what everyone does from my experience.</p>\n\n<p>I would not hesitate to store multiple object method calls (especially if it's a DB call) in a variable, but doing that for array and hash lookups feel like an overkill.</p>\n\n<p>For example, I'll get a warning for this piece of code:</p>\n\n<pre><code>  def sort_params\n    return [] if params[:reference_letter_section].nil?\n\n    params[:reference_letter_section].map.with_index(1) do |id, index|\n      { id: id, position: index }\n    end\n  end\n</code></pre>\n\n<p>but I feel like storing <code>params[:reference_letter_section]</code> in its own variable is too much</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "radio-button"], "comments": [{"owner": {"reputation": 463, "user_id": 3527552, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001213035230/picture?type=large", "display_name": "Tushar Pal", "link": "https://stackoverflow.com/users/3527552/tushar-pal"}, "edited": false, "score": 0, "creation_date": 1499253076, "post_id": 44924570, "comment_id": 76824562, "body": "that should be the type boolean"}, {"owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "reply_to_user": {"reputation": 463, "user_id": 3527552, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001213035230/picture?type=large", "display_name": "Tushar Pal", "link": "https://stackoverflow.com/users/3527552/tushar-pal"}, "edited": false, "score": 0, "creation_date": 1499253170, "post_id": 44924570, "comment_id": 76824625, "body": "ok... is there a way to change it?"}, {"owner": {"reputation": 463, "user_id": 3527552, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001213035230/picture?type=large", "display_name": "Tushar Pal", "link": "https://stackoverflow.com/users/3527552/tushar-pal"}, "edited": false, "score": 0, "creation_date": 1499253371, "post_id": 44924570, "comment_id": 76824728, "body": "you need to run another migration and update the datatype of field"}, {"owner": {"reputation": 463, "user_id": 3527552, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001213035230/picture?type=large", "display_name": "Tushar Pal", "link": "https://stackoverflow.com/users/3527552/tushar-pal"}, "edited": false, "score": 0, "creation_date": 1499253670, "post_id": 44924570, "comment_id": 76824925, "body": "if you want then i can give you the solutions"}, {"owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "reply_to_user": {"reputation": 463, "user_id": 3527552, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001213035230/picture?type=large", "display_name": "Tushar Pal", "link": "https://stackoverflow.com/users/3527552/tushar-pal"}, "edited": false, "score": 0, "creation_date": 1499253747, "post_id": 44924570, "comment_id": 76824984, "body": "Thank you, that would be very nice of you"}], "answers": [{"comments": [{"owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 0, "creation_date": 1499256265, "post_id": 44924961, "comment_id": 76826760, "body": "I get this error messages when I do <code>rake db:migrate</code>    <code>PG::DatatypeMismatch: ERROR:  column &quot;pick_up&quot; cannot be cast automatically to type boolean HINT:  You might need to specify &quot;USING pick_up::boolean&quot;. : ALTER TABLE &quot;orders&quot; ALTER COLUMN &quot;pick_up&quot; TYPE boolean </code>"}, {"owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 0, "creation_date": 1499256673, "post_id": 44924961, "comment_id": 76827095, "body": "fixed it by doing = <code>def change   \tchange_column :orders, :pick_up, &#39;boolean USING CAST(pick_up AS boolean)&#39;   end</code>"}, {"owner": {"reputation": 463, "user_id": 3527552, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001213035230/picture?type=large", "display_name": "Tushar Pal", "link": "https://stackoverflow.com/users/3527552/tushar-pal"}, "reply_to_user": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 0, "creation_date": 1499258212, "post_id": 44924961, "comment_id": 76828303, "body": "updated the answer yes you can do it by using it,is it working now?"}], "tags": [], "owner": {"reputation": 463, "user_id": 3527552, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001213035230/picture?type=large", "display_name": "Tushar Pal", "link": "https://stackoverflow.com/users/3527552/tushar-pal"}, "is_accepted": true, "score": 1, "last_activity_date": 1499258187, "last_edit_date": 1499258187, "creation_date": 1499254013, "answer_id": 44924961, "question_id": 44924570, "link": "https://stackoverflow.com/questions/44924570/saving-values-from-radio-buttons-to-database-rails-app/44924961#44924961", "title": "saving values from radio buttons to database. rails app", "body": "<p>Just run:</p>\n\n<pre><code>rails generate migration changeStringToBooleanOfPickup\n</code></pre>\n\n<p>then modified the generated migration file to:</p>\n\n<pre><code>change_column :orders, :pick_up, 'boolean USING CAST(pick_up AS boolean)'\n</code></pre>\n\n<p>then execute \n              rake db:migrate</p>\n"}, {"comments": [{"owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 0, "creation_date": 1499258055, "post_id": 44925047, "comment_id": 76828181, "body": "thak you for that but, how would I turn this to have the <code>&#39;have the order delivered?&#39;</code> default checked?"}, {"owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 0, "creation_date": 1499259562, "post_id": 44925047, "comment_id": 76829449, "body": "this might sound stupid, but were should the <code>value &quot;1&quot;</code>be inserted to the code?  I&#39;ve tried to inserted but always get an error"}, {"owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "reply_to_user": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 0, "creation_date": 1499259756, "post_id": 44925047, "comment_id": 76829626, "body": "try this: <code>&lt;%= f.radio_button :pick_up, &quot;1&quot;, checked: @order.pick_up?, data: { question: &#39;have the order delivered?&#39; } %&gt; &lt;%= f.label :pick_up, &quot;No&quot; %&gt;</code>"}, {"owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "reply_to_user": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 0, "creation_date": 1499260437, "post_id": 44925047, "comment_id": 76830117, "body": "try <code>&lt;%= f.radio_button :pick_up, &quot;1&quot;, checked: true, data: { question: &#39;have the order delivered?&#39; } %&gt; &lt;%= f.label :pick_up, &quot;No&quot; %&gt;</code>"}], "tags": [], "owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "is_accepted": false, "score": 1, "last_activity_date": 1499254569, "last_edit_date": 1499254569, "creation_date": 1499254268, "answer_id": 44925047, "question_id": 44924570, "link": "https://stackoverflow.com/questions/44924570/saving-values-from-radio-buttons-to-database-rails-app/44925047#44925047", "title": "saving values from radio buttons to database. rails app", "body": "<p>Datatype of <code>pickup</code> column should be boolean to save true/false value.</p>\n\n<pre><code>&lt;%= f.radio_button :pick_up, \"1\", checked: @order.pick_up?, data: { question: 'Pick up order in store' } %&gt; &lt;%= f.label :pick_up, \"Yes\" %&gt;\n&lt;%= f.radio_button :pick_up, \"0\", checked: @order.pick_up?, data: { question: 'have the order delivered?' } %&gt; &lt;%= f.label :pick_up, \"No\" %&gt;\n</code></pre>\n"}], "owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 697, "favorite_count": 0, "accepted_answer_id": 44924961, "answer_count": 2, "score": 0, "last_activity_date": 1499258187, "creation_date": 1499252902, "question_id": 44924570, "link": "https://stackoverflow.com/questions/44924570/saving-values-from-radio-buttons-to-database-rails-app", "title": "saving values from radio buttons to database. rails app", "body": "<p>I'm adding radio buttons to my page.\nI want the user to be able to pick whether the order gets sent or they pick it up.</p>\n\n<p>I'm having troubles to save the values to the database.</p>\n\n<p>can someone advise me?</p>\n\n<pre><code>    &lt;div class=\"col-md-5 pick-up-buttons\" id=\"country_div\"&gt;\n\n    &lt;li&gt;&lt;%= f.radio_button :pick_up, true %&gt;&lt;/li&gt;\n    &lt;li&gt;&lt;%= f.label :pick_up, \"Pick up order in store\", :value =&gt; \"false\"  %&gt;&lt;/li&gt;\n\n\n    &lt;li&gt;&lt;%= f.radio_button :pick_up, false, :checked =&gt; true %&gt;&lt;/li&gt;\n    &lt;li&gt;&lt;%= f.label :pick_up, \"have the order delivered\", :value =&gt; \"true\" %&gt;&lt;/li&gt;\n\n  &lt;/div&gt;    \n</code></pre>\n\n<p>here is the schema_file</p>\n\n<pre><code>  create_table \"orders\", force: :cascade do |t|\n    t.string   \"name\"\n    t.string   \"email\"\n    t.text     \"address\"\n    t.string   \"city\"\n    t.string   \"country\"\n    t.datetime \"created_at\",                 null: false\n    t.datetime \"updated_at\",                 null: false\n    t.boolean  \"shipped\",    default: false\n    t.string   \"pick_up\"\n\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 1275, "user_id": 2903313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce1623b00b100930ac65e69a8069cd28?s=128&d=identicon&r=PG", "display_name": "Roc Khalil", "link": "https://stackoverflow.com/users/2903313/roc-khalil"}, "edited": false, "score": 0, "creation_date": 1499252922, "post_id": 44924547, "comment_id": 76824467, "body": "Check this answer: <a href=\"https://stackoverflow.com/questions/4870961/validate-uniqueness-of-multiple-columns\" title=\"validate uniqueness of multiple columns\">stackoverflow.com/questions/4870961/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1066, "user_id": 6204421, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/0yeJN.jpg?s=128&g=1", "display_name": "Santosh Aryal", "link": "https://stackoverflow.com/users/6204421/santosh-aryal"}, "edited": false, "score": 0, "creation_date": 1499258312, "post_id": 44924620, "comment_id": 76828394, "body": "Thanks, its saved my day."}, {"owner": {"reputation": 463, "user_id": 3527552, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001213035230/picture?type=large", "display_name": "Tushar Pal", "link": "https://stackoverflow.com/users/3527552/tushar-pal"}, "reply_to_user": {"reputation": 1066, "user_id": 6204421, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/0yeJN.jpg?s=128&g=1", "display_name": "Santosh Aryal", "link": "https://stackoverflow.com/users/6204421/santosh-aryal"}, "edited": false, "score": 0, "creation_date": 1499258354, "post_id": 44924620, "comment_id": 76828434, "body": "your welcome man"}], "tags": [], "owner": {"reputation": 463, "user_id": 3527552, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001213035230/picture?type=large", "display_name": "Tushar Pal", "link": "https://stackoverflow.com/users/3527552/tushar-pal"}, "is_accepted": true, "score": 1, "last_activity_date": 1499253028, "creation_date": 1499253028, "answer_id": 44924620, "question_id": 44924547, "link": "https://stackoverflow.com/questions/44924547/rails-multiple-validation/44924620#44924620", "title": "Rails Multiple Validation", "body": "<p>Here you can do just like that </p>\n\n<pre><code>validates :name, uniqueness: { scope: :size,\nmessage: \"should be unique\" }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": false, "score": 2, "last_activity_date": 1499258318, "creation_date": 1499258318, "answer_id": 44926527, "question_id": 44924547, "link": "https://stackoverflow.com/questions/44924547/rails-multiple-validation/44926527#44926527", "title": "Rails Multiple Validation", "body": "<p>if you want to scope with single column then:</p>\n\n<pre><code>validates_uniqueness_of :name, :scope =&gt; :size, message: \"should be unique\"\n</code></pre>\n\n<p>for multiple columns:</p>\n\n<pre><code>validates :name, uniqueness: {scope: [:size, :attr1, :attr2]}\n</code></pre>\n"}], "owner": {"reputation": 1066, "user_id": 6204421, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/0yeJN.jpg?s=128&g=1", "display_name": "Santosh Aryal", "link": "https://stackoverflow.com/users/6204421/santosh-aryal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 705, "favorite_count": 0, "closed_date": 1499258371, "accepted_answer_id": 44924620, "answer_count": 2, "score": 0, "last_activity_date": 1499258318, "creation_date": 1499252816, "last_edit_date": 1499255910, "question_id": 44924547, "link": "https://stackoverflow.com/questions/44924547/rails-multiple-validation", "closed_reason": "Duplicate", "title": "Rails Multiple Validation", "body": "<p>I have a model with two columns 'name' and 'size'. I am trying to validate the uniqueness of size only if name and size together doesn't exist in database. </p>\n\n<p>For example.</p>\n\n<p>Name = Shirt and Size = L are in database then Name = Shirt and Size = L shouldn't pass the unique validation rather Name = Pant and Size = L should pass the uniqueness.</p>\n"}, {"tags": ["ruby", "vagrant"], "answers": [{"comments": [{"owner": {"reputation": 1384, "user_id": 7175708, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/QJYJM.png?s=128&g=1", "display_name": "Lechucico", "link": "https://stackoverflow.com/users/7175708/lechucico"}, "edited": false, "score": 0, "creation_date": 1499255308, "post_id": 44925120, "comment_id": 76826072, "body": "I&#39;ve got the following error: *  Unknown configuration section &#39;trigger&#39;."}, {"owner": {"reputation": 44774, "user_id": 4296747, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-muYS9LV5AoA/AAAAAAAAAAI/AAAAAAAACG4/KcTmlFyGWRI/photo.jpg?sz=128", "display_name": "Frederic Henri", "link": "https://stackoverflow.com/users/4296747/frederic-henri"}, "reply_to_user": {"reputation": 1384, "user_id": 7175708, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/QJYJM.png?s=128&g=1", "display_name": "Lechucico", "link": "https://stackoverflow.com/users/7175708/lechucico"}, "edited": false, "score": 0, "creation_date": 1499255403, "post_id": 44925120, "comment_id": 76826160, "body": "did you install the plugin ?"}, {"owner": {"reputation": 1384, "user_id": 7175708, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/QJYJM.png?s=128&g=1", "display_name": "Lechucico", "link": "https://stackoverflow.com/users/7175708/lechucico"}, "edited": false, "score": 0, "creation_date": 1499255683, "post_id": 44925120, "comment_id": 76826378, "body": "I forgot it. The problem now is how to call the function: OnDestroyMiddleware.new.call?? What about the two parameters?"}, {"owner": {"reputation": 44774, "user_id": 4296747, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-muYS9LV5AoA/AAAAAAAAAAI/AAAAAAAACG4/KcTmlFyGWRI/photo.jpg?sz=128", "display_name": "Frederic Henri", "link": "https://stackoverflow.com/users/4296747/frederic-henri"}, "reply_to_user": {"reputation": 1384, "user_id": 7175708, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/QJYJM.png?s=128&g=1", "display_name": "Lechucico", "link": "https://stackoverflow.com/users/7175708/lechucico"}, "edited": false, "score": 0, "creation_date": 1499255959, "post_id": 44925120, "comment_id": 76826568, "body": "either you convert your code like it is shown, if you want to use your class, you need to call it <code>action = OnDestroyMiddleware.new(config.vm)</code> seems config.vm is only what you need"}, {"owner": {"reputation": 1384, "user_id": 7175708, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/QJYJM.png?s=128&g=1", "display_name": "Lechucico", "link": "https://stackoverflow.com/users/7175708/lechucico"}, "edited": false, "score": 0, "creation_date": 1499257163, "post_id": 44925120, "comment_id": 76827480, "body": "<code>action = OnDestroyMiddleware.new(config.vm).call(config.vm)</code> : undefined method `call&#39; for nil:NilClass (NoMethodError)"}], "tags": [], "owner": {"reputation": 44774, "user_id": 4296747, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-muYS9LV5AoA/AAAAAAAAAAI/AAAAAAAACG4/KcTmlFyGWRI/photo.jpg?sz=128", "display_name": "Frederic Henri", "link": "https://stackoverflow.com/users/4296747/frederic-henri"}, "is_accepted": true, "score": 2, "last_activity_date": 1499255438, "last_edit_date": 1499255438, "creation_date": 1499254455, "answer_id": 44925120, "question_id": 44924428, "link": "https://stackoverflow.com/questions/44924428/vagrant-destroy-execute-ruby/44925120#44925120", "title": "Vagrant destroy execute ruby", "body": "<p>You can look at the <a href=\"https://github.com/emyl/vagrant-triggers\" rel=\"nofollow noreferrer\">vagrant trigger plugin</a>. It allows you to run code after a specific vagrant command.</p>\n\n<p>First you need to install the plugin</p>\n\n<pre><code>$ vagrant plugin install vagrant-triggers\n</code></pre>\n\n<p>You'll add the code directly in your Vagrantfile, like</p>\n\n<pre><code>Vagrant.configure(\"2\") do |config|\n  # Your existing Vagrant configuration\n  ...\n\n  # run some script before the guest is destroyed\n  config.trigger.after :destroy do\n    info \"Attempting to remove client...\"\n    run \"knife client show ..\"\n  end\n</code></pre>\n"}], "owner": {"reputation": 1384, "user_id": 7175708, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/QJYJM.png?s=128&g=1", "display_name": "Lechucico", "link": "https://stackoverflow.com/users/7175708/lechucico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 44925120, "answer_count": 1, "score": 1, "last_activity_date": 1499255438, "creation_date": 1499252478, "question_id": 44924428, "link": "https://stackoverflow.com/questions/44924428/vagrant-destroy-execute-ruby", "title": "Vagrant destroy execute ruby", "body": "<p>I would like to execute a custom ruby code after doing vagrant destroy.</p>\n\n<p>That's the code:</p>\n\n<pre><code>class OnDestroyMiddleware\n\n  def initialize(app, env)\n    @app = app\n  end\n\n  def call(env)\n    env[\"config\"].vm.provisioners.each do |provisioner|\n      env.ui.info \"Attempting to remove client #{provisioner.config.node_name}\"\n      `knife client show #{provisioner.config.node_name}`\n      if $?.to_i == 0\n        env.ui.info \"Removing client #{provisioner.config.node_name}\"\n        `knife client delete #{provisioner.config.node_name} -y`\n      end\n      env.ui.info \"Attempting to remove node #{provisioner.config.node_name}\"\n      `knife node show #{provisioner.config.node_name}`\n      if $?.to_i == 0\n        env.ui.info \"Removing node #{provisioner.config.node_name}\"\n        `knife node delete #{provisioner.config.node_name} -y`\n      end\n    end\n    @app.call(env)\n  end\nend\n</code></pre>\n\n<p>I'm trying this but isn't working: </p>\n\n<pre><code>Vagrant::Action[:destroy].use(OnDestroyMiddleware)\n</code></pre>\n\n<p>All of this code is from <a href=\"https://gist.github.com/skippy/1010660\" rel=\"nofollow noreferrer\">https://gist.github.com/skippy/1010660</a></p>\n\n<p>I've got this error on Vagrant::Action[:destroy]</p>\n\n<blockquote>\n  <p>Message: NoMethodError: undefined method `[]' for Vagrant::Action:Module</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "authentication", "pundit"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1499252301, "post_id": 44922664, "comment_id": 76824030, "body": "<a href=\"https://github.com/elabs/pundit/issues/351#issuecomment-310665553\" rel=\"nofollow noreferrer\">This</a> is another possible workaround, possibly in conjunction with <a href=\"https://github.com/elabs/pundit/pull/391\" rel=\"nofollow noreferrer\">this pending fix</a> for name-spaced policy scopes?"}, {"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "edited": false, "score": 0, "creation_date": 1499257761, "post_id": 44922664, "comment_id": 76827949, "body": "you are showing the posts#index page when they clicked on the link regardless if the current_user is a friend of users/:id or not right? Then I think you&#39;d want a 200 then but then maybe not use the term &quot;authorize&quot; but more like I guess think of the posts as being &quot;filtered&quot;? But if you really don&#39;t show these posts#index page if not a friend (i.e. you dont show the links if not a friend) then I think 403 response is better."}, {"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "edited": false, "score": 0, "creation_date": 1499258080, "post_id": 44922664, "comment_id": 76828204, "body": "I would also do something like what you said <code>authorize(user, :index_posts?)</code> but except that I&#39;d name it as <code>authorize(user, :posts?)</code>, because technically speaking /users/:id/posts, the &quot;posts&quot; there is part of the resources of /users/:id which means posts#index is technically a resource of a member of users, though I agree that this does not seem to be RESTful-like. However, this approach works also for other nested resources. i.e. if you&#39;ll have in the future something like /categories/1/posts, then it is flexible enough to also implement a category_policy#posts? method in the same way."}, {"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "edited": false, "score": 0, "creation_date": 1499258637, "post_id": 44922664, "comment_id": 76828669, "body": "On a side note, I am not really familiar with pundit, but we&#39;ve been using <a href=\"https://github.com/CanCanCommunity/cancancan\" rel=\"nofollow noreferrer\">cancancan</a> to a great success. It handles <a href=\"https://github.com/ryanb/cancan/wiki/Nested-Resources\" rel=\"nofollow noreferrer\">nested resources</a> pretty well, although in my experience cancancan can get very confusing at the start of learning."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "edited": false, "score": 0, "creation_date": 1499258684, "post_id": 44922664, "comment_id": 76828702, "body": "@Jay-ArPolidario This is a rails API project (i.e. all responses are in JSON; the Front-End is a separate JavaScript project). So the <code>403</code> response is particularly valuable in terms of providing a coherent API definition. I do prefer your naming of <code>UserPolicy#posts?</code> over my initial <code>index_posts?</code> though -- this seems more logical."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "edited": false, "score": 0, "creation_date": 1499258908, "post_id": 44922664, "comment_id": 76828885, "body": "@Jay-ArPolidario I have no intention of migrating to <code>CanCanCan</code>, however... This is a very large project, so the migration time alone makes this infeasible. It&#39;s also, in my opinion, a far more difficult/problematic library to work with than Pundit. (Building all your <code>abilities</code> in a one big class is a bad idea when your application is big ... )"}, {"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "edited": false, "score": 0, "creation_date": 1499259113, "post_id": 44922664, "comment_id": 76829057, "body": "ohh yeah this is an API! :) I think 403 is better just because the client-side will know from this response code that the current user is not a friend as opposed to returning a 200 empty response, which can be misleading (as either the current user is not a friend OR it just happened that the target user&#39;s posts is just empty). It also makes..."}, {"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "edited": false, "score": 0, "creation_date": 1499259120, "post_id": 44922664, "comment_id": 76829064, "body": "...sense that the client side cannot view (forbidden) to view this posts#index resource if not a friend. I think it is the client-side&#39;s duty to handle a 403 like this, and that the client-side should not render the links to this resource in the first place because it will be forbidden as the current user is not a friend."}, {"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "edited": false, "score": 0, "creation_date": 1499259243, "post_id": 44922664, "comment_id": 76829178, "body": "yeah it does get so biiiiig! haha. We resorted to segregating the ability.rb file by including a Module per resource."}], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 538, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1499248035, "creation_date": 1499248035, "question_id": 44922664, "link": "https://stackoverflow.com/questions/44922664/how-to-respond-with-403-forbidden-for-index-action-on-nested-resource", "title": "How to respond with 403 (forbidden) for index action on nested resource?", "body": "<p>Suppose we have the following setup in a ruby-on-rails (API) application:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :posts\n  has_many :friends, class_name: User # Via a joins table....\nend\n\nclass Post\n  belongs_to :user\nend\n</code></pre>\n\n<p>When visiting <code>/users/:id/posts</code>, I want the logged-in user to only be able to view this data, if they are friends.</p>\n\n<p>The standard implementation for this in Pundit is to use a <a href=\"https://github.com/elabs/pundit#scopes\" rel=\"nofollow noreferrer\">policy scope</a>:</p>\n\n<pre><code>class PostsController &lt; ApplicationController\n  before_action :authenticate\n  def index\n    posts = policy_scope(Post.where(user_id: params[:user_id]))\n    render posts\n  end\nend\n\nclass PostsPolicy &lt; ApplicationPolicy\n  class Scope &lt; ApplicationPolicy::Scope\n    def resolve\n      scope.where(user: user.friends)\n    end\n  end\nend\n</code></pre>\n\n<p>This <em>will</em> prevent a user from seeing non-friends' posts. However, <strong>it produces an API response of <code>200 Success</code></strong> (with an empty response body), not <code>403 Forbidden</code> - which would be preferable for the FrontEnd to receive, and display an appropriate error message.</p>\n\n<hr>\n\n<p>Here's one solution that does <strong>not</strong> work:</p>\n\n<pre><code>class PostsController &lt; ApplicationController\n  before_action :authenticate\n  def index\n    posts = policy_scope(Post.where(user_id: params[:user_id]))\n    authorize posts # &lt;- !!!!\n    render posts\n  end\nend\n\nclass PostsPolicy\n  def index?\n    record.all? { |post| user.friends_with?(post.user) }\n  end\nend\n</code></pre>\n\n<p>Not only is this very inefficient, but if the user <em>doesn't have any posts</em>, then you'll always get a <code>200 Success</code> response - which is still not ideal.</p>\n\n<p>Similarly, it's not ideal to \"return <code>403</code> if the response is empty\" - because then you'd get error messages when viewing friends' posts, if they don't have any!</p>\n\n<hr>\n\n<p>Here's a possible solution, but it feels <em>wrong</em>...</p>\n\n<pre><code>class PostsController &lt; ApplicationController\n  before_action :authenticate\n  def index\n    user = user.find(params[:user_id])\n    authorize(user, :index_posts?) # &lt;-- !!!!\n\n    posts = policy_scope(Post.where(user: user))\n    render posts\n  end\nend\n\nclass UsersPolicy\n  def index_posts?\n    user.friends_with?(record)\n  end\nend\n</code></pre>\n\n<p>(You could also use a more generic method name like <code>UserPolicy#friends?</code>, to the same affect.)</p>\n\n<p>This works, but it feels like a mis-use of Pundit to be applying a <code>UserPolicy</code> method when authorising a <code>Post</code> resource!</p>\n\n<hr>\n\n<p>Pundit does not allow <a href=\"https://github.com/elabs/pundit/blob/master/README.md#additional-context\" rel=\"nofollow noreferrer\">passing additional arguments to policies</a>. This has been a <a href=\"https://github.com/elabs/pundit/issues/372\" rel=\"nofollow noreferrer\">highly requested</a> feature over the years. In particular, see <a href=\"https://github.com/elabs/pundit/pull/50#issuecomment-56638288\" rel=\"nofollow noreferrer\">this highly-relevant PR/discussion</a>. In other words, what I'd <em>like</em> to be able to do is this:</p>\n\n<pre><code>class PostsController &lt; ApplicationController\n  before_action :authenticate\n  def index\n    user = User.find(params[:user_id])\n    posts = policy_scope(Post.where(user: user))\n    authorize(posts, user) # &lt;- !!!! (not valid in Pundit)\n    render posts\n  end\nend\n\nclass PostsPolicy\n  def index?(other_user) # &lt;- !!!! (not valid in Pundit)\n    user.friends_with?(other_user)\n  end\nend\n</code></pre>\n\n<p>However, the feature was eventually conclusively rejected by the project maintainer in favour of using \"name-spaced policies\" and \"form objects\".</p>\n\n<hr>\n\n<p>Hopefully this question is not too \"opinionated\", but what would you suggest? Is there a clean way to use the Pundit library whilst responding with appropriate <code>200</code> vs <code>403</code> appropriately?</p>\n\n<p>Or, is there a good patch/fork/alternative I could use (preferably easy to migrate to, for a large project) that will better support my desired behaviour?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "chef-infra", "chef-recipe"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8090069, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1315243681864013/picture?type=large", "display_name": "Kushal Warke", "link": "https://stackoverflow.com/users/8090069/kushal-warke"}, "edited": false, "score": 0, "creation_date": 1499251616, "post_id": 44922187, "comment_id": 76823549, "body": "Tried using that. Problem is the variable my_id is in JSON and I need to convert it to ruby hash before doing any operation. How to convert it? JSON.parse isn&#39;t working because my_id is not a string"}, {"owner": {"reputation": 2156, "user_id": 976880, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/bcade31197a5623384d853c3c5fac28a?s=128&d=identicon&r=PG", "display_name": "aBadAssCowboy", "link": "https://stackoverflow.com/users/976880/abadasscowboy"}, "reply_to_user": {"reputation": 11, "user_id": 8090069, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1315243681864013/picture?type=large", "display_name": "Kushal Warke", "link": "https://stackoverflow.com/users/8090069/kushal-warke"}, "edited": false, "score": 0, "creation_date": 1499254868, "post_id": 44922187, "comment_id": 76825775, "body": "You say its in JSON. If its in JSON, <code>JSON.parse</code> should work. Can you post your JSON?"}], "tags": [], "owner": {"reputation": 2156, "user_id": 976880, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/bcade31197a5623384d853c3c5fac28a?s=128&d=identicon&r=PG", "display_name": "aBadAssCowboy", "link": "https://stackoverflow.com/users/976880/abadasscowboy"}, "is_accepted": false, "score": 0, "last_activity_date": 1499246786, "creation_date": 1499246786, "answer_id": 44922187, "question_id": 44922020, "link": "https://stackoverflow.com/questions/44922020/ruby-operations-on-template-variables-chef/44922187#44922187", "title": "Ruby operations on template variables - Chef", "body": "<p>Don't know much about Chef Cookbooks but you can write some ruby within an ERB template. It is not the cleanest solution I believe though. </p>\n\n<p>See <a href=\"https://stackoverflow.com/a/3099980/976880\">here</a> on how to embed code in your ERB</p>\n"}, {"tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 0, "last_activity_date": 1499283592, "creation_date": 1499283592, "answer_id": 44934670, "question_id": 44922020, "link": "https://stackoverflow.com/questions/44922020/ruby-operations-on-template-variables-chef/44934670#44934670", "title": "Ruby operations on template variables - Chef", "body": "<p>The thing you pasted from (hopefully you were summarizing since you missed a bunch of quotes in there) was only a quick tip. To get JSON data you want to use <code>Chef::HTTP::SimpleJSON</code>, the will do the parsing for you and whatnot.</p>\n\n<pre><code>variables data: Chef::HTTP::SimpleJSON.new('https://whatever.com/').get('/foo')\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8090069, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1315243681864013/picture?type=large", "display_name": "Kushal Warke", "link": "https://stackoverflow.com/users/8090069/kushal-warke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1499283592, "creation_date": 1499246406, "question_id": 44922020, "link": "https://stackoverflow.com/questions/44922020/ruby-operations-on-template-variables-chef", "title": "Ruby operations on template variables - Chef", "body": "<p>I have written following template in my chef cookbook recipe</p>\n\n<pre><code>template '/etc/app.conf' do\n   variables({\n   my_id: Chef::HTTP.new(https://example.com).get('/',{header})\n})\nend\n</code></pre>\n\n<p>And my erb file is</p>\n\n<pre><code>Output is : &lt;%= @my_id %&gt;\n</code></pre>\n\n<p>I actually want to perform some ruby operations(mainly filter out and count the components of my_id) and then pass those values(count of each component) back to the template and use it further. What should be erb configuration or anything thats need to be added in template block?</p>\n\n<p>(Here, my_id actually has the subnets and I want to get those the count of those subnets and its values so that I can use it further to perform another http request and get the nodes in each of the subnet).</p>\n"}, {"tags": ["ruby", "loops"], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 1, "last_activity_date": 1499242916, "creation_date": 1499242916, "answer_id": 44920707, "question_id": 44920635, "link": "https://stackoverflow.com/questions/44920635/do-in-while-loop-in-ruby/44920707#44920707", "title": "Do in While loop in Ruby", "body": "<p>They are identical. From the <a href=\"http://ruby-doc.org/core-2.4.1/doc/syntax/control_expressions_rdoc.html#label-while+Loop\" rel=\"nofollow noreferrer\">documentation for <code>while</code></a>:</p>\n\n<blockquote>\n  <p>The <em>do</em> keyword is optional.</p>\n</blockquote>\n\n<p>Same for <code>until</code> and <code>for</code>.</p>\n"}], "owner": {"reputation": 9, "user_id": 8257750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7c760b415e81a09ab3cfdc5294d3d24?s=128&d=identicon&r=PG&f=1", "display_name": "Spasitel", "link": "https://stackoverflow.com/users/8257750/spasitel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "closed_date": 1499243076, "answer_count": 1, "score": 0, "last_activity_date": 1499242949, "creation_date": 1499242677, "last_edit_date": 1499242949, "question_id": 44920635, "link": "https://stackoverflow.com/questions/44920635/do-in-while-loop-in-ruby", "closed_reason": "Duplicate", "title": "Do in While loop in Ruby", "body": "<p>I\u00b4m all new to programming and I\u00b4m learning some basics of Ruby.</p>\n\n<p>Could someone please tell me the difference between these loops.</p>\n\n<pre><code>while i &lt; 51\n  # ...\nend\n</code></pre>\n\n<p>and</p>\n\n<pre><code>while i &lt; 51 do\n  # ...\nend\n</code></pre>\n\n<p>Both of them works fine for me.</p>\n"}, {"tags": ["ruby", "selenium-webdriver", "capybara"], "answers": [{"comments": [{"owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "edited": false, "score": 0, "creation_date": 1499248649, "post_id": 44920694, "comment_id": 76821381, "body": "I went to the documentation but using page wouldn&#39;t work for me. Whether because I was within an iframe, I&#39;m not sure.  Instead I use my_element as a visible element within that iframe and got it to work that way"}], "tags": [], "owner": {"reputation": 2156, "user_id": 976880, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/bcade31197a5623384d853c3c5fac28a?s=128&d=identicon&r=PG", "display_name": "aBadAssCowboy", "link": "https://stackoverflow.com/users/976880/abadasscowboy"}, "is_accepted": true, "score": 3, "last_activity_date": 1499245098, "last_edit_date": 1499245098, "creation_date": 1499242873, "answer_id": 44920694, "question_id": 44920593, "link": "https://stackoverflow.com/questions/44920593/how-to-simulate-modifier-key-combination-alt-shift-p-in-capybara-selenium/44920694#44920694", "title": "How to simulate modifier key combination (Alt-Shift-P) in Capybara / Selenium?", "body": "<p>You could use <code>send_keys</code> method on an element.</p>\n\n<pre><code>my_element.send_keys [:alt, :shift, \"p\"] \n</code></pre>\n\n<p>or, if you want it on the page:</p>\n\n<pre><code>page.send_keys [:alt, :shift, \"p\"]\n</code></pre>\n\n<p>See: <a href=\"http://www.rubydoc.info/github/jnicklas/capybara/Capybara%2FNode%2FElement%3Asend_keys\" rel=\"nofollow noreferrer\"><code>Capybara::Node::Element#send_keys</code></a></p>\n"}], "owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 44920694, "answer_count": 1, "score": 1, "last_activity_date": 1499245098, "creation_date": 1499242543, "last_edit_date": 1499245039, "question_id": 44920593, "link": "https://stackoverflow.com/questions/44920593/how-to-simulate-modifier-key-combination-alt-shift-p-in-capybara-selenium", "title": "How to simulate modifier key combination (Alt-Shift-P) in Capybara / Selenium?", "body": "<p>I'm using Selenium-webdriver within Capybara.</p>\n\n<p>Is there a way to simulate pressing <kbd>alt</kbd><kbd>shift</kbd><kbd>p</kbd> together?</p>\n"}, {"tags": ["php", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1499241848, "post_id": 44920309, "comment_id": 76816453, "body": "Define &quot;combine&quot;"}, {"owner": {"reputation": 2156, "user_id": 976880, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/bcade31197a5623384d853c3c5fac28a?s=128&d=identicon&r=PG", "display_name": "aBadAssCowboy", "link": "https://stackoverflow.com/users/976880/abadasscowboy"}, "edited": false, "score": 0, "creation_date": 1499241896, "post_id": 44920309, "comment_id": 76816487, "body": "very vague, you might wanna update your question with more details"}], "answers": [{"tags": [], "owner": {"reputation": 3022, "user_id": 336392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c144b7e260029f00b1efb08fb29bb023?s=128&d=identicon&r=PG", "display_name": "Thomas R. Koll", "link": "https://stackoverflow.com/users/336392/thomas-r-koll"}, "is_accepted": false, "score": 2, "last_activity_date": 1499245944, "creation_date": 1499245944, "answer_id": 44921829, "question_id": 44920309, "link": "https://stackoverflow.com/questions/44920309/can-we-combine-php-server-pages-in-a-rails-application/44921829#44921829", "title": "can we combine php server pages in a rails application?", "body": "<p>You can run them on the same webserver if you use apache. They are able to share the same database. One thing you won't be able to do is sharing data directly amongst them, for that an API to communicate between the apps will be required.</p>\n"}], "owner": {"reputation": 53, "user_id": 7821087, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1230844830298447/picture?type=large", "display_name": "Keshav Maheshwari", "link": "https://stackoverflow.com/users/7821087/keshav-maheshwari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1499245944, "creation_date": 1499241688, "last_edit_date": 1499241772, "question_id": 44920309, "link": "https://stackoverflow.com/questions/44920309/can-we-combine-php-server-pages-in-a-rails-application", "title": "can we combine php server pages in a rails application?", "body": "<p>Is there any way so that we can combine PHP pages in ruby on rails application?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "actionmailer"], "comments": [{"owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1499240464, "post_id": 44919843, "comment_id": 76815520, "body": "Did you check the spam folder of your gmail account... :D"}, {"owner": {"reputation": 645, "user_id": 6285605, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d21129320196972e88809eefe996bdc2?s=128&d=identicon&r=PG&f=1", "display_name": "Suganya Selvarajan", "link": "https://stackoverflow.com/users/6285605/suganya-selvarajan"}, "reply_to_user": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1499240714, "post_id": 44919843, "comment_id": 76815681, "body": "Yes. It is not there too"}, {"owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1499241166, "post_id": 44919843, "comment_id": 76815989, "body": "Can you try this instead <code>config.action_mailer.smtp_settings = { address: &quot;127.0.0.1&quot;, port: 1025 }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 645, "user_id": 6285605, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d21129320196972e88809eefe996bdc2?s=128&d=identicon&r=PG&f=1", "display_name": "Suganya Selvarajan", "link": "https://stackoverflow.com/users/6285605/suganya-selvarajan"}, "edited": false, "score": 0, "creation_date": 1499240813, "post_id": 44919973, "comment_id": 76815738, "body": "I was looking into <a href=\"http://localhost:1080\" rel=\"nofollow noreferrer\">localhost:1080</a> and the mailcatcher is empty. It does not have the intended emails."}, {"owner": {"reputation": 2156, "user_id": 976880, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/bcade31197a5623384d853c3c5fac28a?s=128&d=identicon&r=PG", "display_name": "aBadAssCowboy", "link": "https://stackoverflow.com/users/976880/abadasscowboy"}, "reply_to_user": {"reputation": 645, "user_id": 6285605, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d21129320196972e88809eefe996bdc2?s=128&d=identicon&r=PG&f=1", "display_name": "Suganya Selvarajan", "link": "https://stackoverflow.com/users/6285605/suganya-selvarajan"}, "edited": false, "score": 1, "creation_date": 1499241004, "post_id": 44919973, "comment_id": 76815870, "body": "If you have done <code>.deliver_now</code> on the email object and didn&#39;t see any error, it should be there in the Mailcatcher. If not, I would suggest double checking your setup."}, {"owner": {"reputation": 645, "user_id": 6285605, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d21129320196972e88809eefe996bdc2?s=128&d=identicon&r=PG&f=1", "display_name": "Suganya Selvarajan", "link": "https://stackoverflow.com/users/6285605/suganya-selvarajan"}, "edited": false, "score": 0, "creation_date": 1499241165, "post_id": 44919973, "comment_id": 76815988, "body": "Opps! I have not added .deliver_now while invoking the Mailer. Thanks for bringing it to notice."}], "tags": [], "owner": {"reputation": 2156, "user_id": 976880, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/bcade31197a5623384d853c3c5fac28a?s=128&d=identicon&r=PG", "display_name": "aBadAssCowboy", "link": "https://stackoverflow.com/users/976880/abadasscowboy"}, "is_accepted": true, "score": 1, "last_activity_date": 1499240670, "creation_date": 1499240670, "answer_id": 44919973, "question_id": 44919843, "link": "https://stackoverflow.com/questions/44919843/action-mailer-not-delivering-emails-mailcatcher-and-sendmail/44919973#44919973", "title": "Action Mailer Not delivering Emails - MailCatcher and sendmail", "body": "<p>You seem to be using Mailcatcher. Mailcatcher doesn't deliver messages, its to prevent messages from delivering to the actual <code>To</code> email addresses but lets you check of the message is framed correctly. Developers use Mailcatcher in development enviroments to see if the emails are rendered as they expect them to look like without spamming the <code>To</code> email holder.</p>\n\n<p>All the emails that are sent to Mailcatcher can be viewed in a web interface. Visit <a href=\"http://localhost:1080\" rel=\"nofollow noreferrer\"><code>http://localhost:1080</code></a> on your computer, you should be able to see all the emails you send so far from the development environment.</p>\n"}, {"tags": [], "owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "is_accepted": false, "score": 0, "last_activity_date": 1499241422, "last_edit_date": 1592644375, "creation_date": 1499241422, "answer_id": 44920226, "question_id": 44919843, "link": "https://stackoverflow.com/questions/44919843/action-mailer-not-delivering-emails-mailcatcher-and-sendmail/44920226#44920226", "title": "Action Mailer Not delivering Emails - MailCatcher and sendmail", "body": "<p>Following is the configuration for send mail to gmail:</p>\n<h1>config/environments/development.rb</h1>\n<pre><code>config.action_mailer.default_url_options = { :host =&gt; 'localhost:3000' }\nconfig.action_mailer.delivery_method = :smtp\n\nconfig.action_mailer.smtp_settings = {\n      :address =&gt; &quot;smtp.gmail.com&quot;,\n      :port =&gt; 587,\n      :domain =&gt; &quot;gmail.com&quot;,\n      :user_name =&gt; &quot;user@gmail.com&quot;, #your gmail id\n      :password =&gt; &quot;password&quot;, #your gmail password\n      :authentication =&gt; &quot;plain&quot;,\n      :enable_starttls_auto =&gt; true\n}\n</code></pre>\n"}], "owner": {"reputation": 645, "user_id": 6285605, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d21129320196972e88809eefe996bdc2?s=128&d=identicon&r=PG&f=1", "display_name": "Suganya Selvarajan", "link": "https://stackoverflow.com/users/6285605/suganya-selvarajan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 794, "favorite_count": 0, "accepted_answer_id": 44919973, "answer_count": 2, "score": 0, "last_activity_date": 1499241422, "creation_date": 1499240294, "question_id": 44919843, "link": "https://stackoverflow.com/questions/44919843/action-mailer-not-delivering-emails-mailcatcher-and-sendmail", "title": "Action Mailer Not delivering Emails - MailCatcher and sendmail", "body": "<p>I am using Rails 5. I have the following configurations in my config/environments/development.rb and config/environments/staging.rb.</p>\n\n<p>config/environments/development.rb</p>\n\n<pre><code>config.action_mailer.perform_deliveries = true\nconfig.action_mailer.raise_delivery_errors = true\nconfig.action_mailer.delivery_method = :smtp\nconfig.action_mailer.smtp_settings = { address: \"localhost\", port: 1025 }\n</code></pre>\n\n<p>When I call the method that sends email, I get the following output.</p>\n\n<pre><code>Rendering mailer/consolidated_s3_storage_report.html.erb\nRendered mailer/consolidated_s3_storage_report.html.erb (0.4ms)\nMailer#consolidated_s3_storage_report: processed outbound mail in 17668.1ms\n =&gt; #&lt;Mail::Message:86763960, Multipart: true, Headers: &lt;From: mcds@sheridan.com&gt;, &lt;To: mcds.support@sheridan.com&gt;, &lt;Subject: 2017 July - S3 Storage Report&gt;, &lt;Mime-Version: 1.0&gt;, &lt;Content-Type: multipart/mixed; boundary=\"--==_mimepart_595c962cc36fb_1be1b2198436941\"; charset=UTF-8&gt;&gt;\n</code></pre>\n\n<p>But email is not delivered to my gmail. The 'from' address is 'default from' from which all other emails are sent. Please clarify why my emails are not delivered. </p>\n"}, {"tags": ["java", "ruby", "testing", "cucumber"], "answers": [{"tags": [], "owner": {"reputation": 8275, "user_id": 4512398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yjm4v.jpg?s=128&g=1", "display_name": "Grasshopper", "link": "https://stackoverflow.com/users/4512398/grasshopper"}, "is_accepted": true, "score": 5, "last_activity_date": 1499243963, "creation_date": 1499243963, "answer_id": 44921078, "question_id": 44919810, "link": "https://stackoverflow.com/questions/44919810/hook-up-in-cucumber-check-for-scenario-failure-in-java/44921078#44921078", "title": "Hook up in cucumber check for scenario failure in java", "body": "<p>You can pass the Scenario as a parameter to the After hook, the framework will inject the current scenario object to the method.</p>\n\n<pre><code>@After\npublic void afterMethod(Scenario scenario) {\n    if(scenario.isFailed()) {\n\n\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 475, "user_id": 8096299, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1571303072894045/picture?type=large", "display_name": "Kaushik Vijayakumar", "link": "https://stackoverflow.com/users/8096299/kaushik-vijayakumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1207, "favorite_count": 1, "accepted_answer_id": 44921078, "answer_count": 1, "score": 2, "last_activity_date": 1499262225, "creation_date": 1499240193, "last_edit_date": 1499262225, "question_id": 44919810, "link": "https://stackoverflow.com/questions/44919810/hook-up-in-cucumber-check-for-scenario-failure-in-java", "title": "Hook up in cucumber check for scenario failure in java", "body": "<p>While I was reading how to add a cleanup for a cucumber scenario on failure I got this piece of code in the internet.</p>\n\n<pre><code>After do |s|\n  if s.failed?\n    #If you are on an iOS Device\n        $driver.quit\n         sleep(time_for_driver_ready)\n    #else\n         reset  \n  end\nend\n</code></pre>\n\n<p>This is in ruby. I am working in java and is there any way to implement <code>s.failed?</code> in java, because in java the after method declaration does not include a scenario variable.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "terminal", "macos-sierra"], "comments": [{"owner": {"reputation": 2343, "user_id": 6270554, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PqRWJ.jpg?s=128&g=1", "display_name": "Hardik Upadhyay", "link": "https://stackoverflow.com/users/6270554/hardik-upadhyay"}, "edited": false, "score": 0, "creation_date": 1499239189, "post_id": 44919304, "comment_id": 76814632, "body": "try this <a href=\"https://stackoverflow.com/questions/10922777/debugging-malloc-errors-in-ruby-on-mac-os-x\" title=\"debugging malloc errors in ruby on mac os x\">stackoverflow.com/questions/10922777/&hellip;</a>"}, {"owner": {"reputation": 151, "user_id": 7671805, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10155171308765555/picture?type=large", "display_name": "Brian Law", "link": "https://stackoverflow.com/users/7671805/brian-law"}, "reply_to_user": {"reputation": 2343, "user_id": 6270554, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PqRWJ.jpg?s=128&g=1", "display_name": "Hardik Upadhyay", "link": "https://stackoverflow.com/users/6270554/hardik-upadhyay"}, "edited": false, "score": 0, "creation_date": 1499240170, "post_id": 44919304, "comment_id": 76815300, "body": "thanks man, but since i have no <code>Repair Disk Permissions</code> in Disk Utility, I ran First Aid which i tried before in Recovery Mode, but still it does not work. is that a random problem?"}, {"owner": {"reputation": 151, "user_id": 7671805, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10155171308765555/picture?type=large", "display_name": "Brian Law", "link": "https://stackoverflow.com/users/7671805/brian-law"}, "reply_to_user": {"reputation": 2343, "user_id": 6270554, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PqRWJ.jpg?s=128&g=1", "display_name": "Hardik Upadhyay", "link": "https://stackoverflow.com/users/6270554/hardik-upadhyay"}, "edited": false, "score": 0, "creation_date": 1499244596, "post_id": 44919304, "comment_id": 76818274, "body": "even reinstall the macOS(without deleting files) does not work for me, gonna try formatting the whole thing in the weekend if I can&#39;t fix it."}, {"owner": {"reputation": 2343, "user_id": 6270554, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PqRWJ.jpg?s=128&g=1", "display_name": "Hardik Upadhyay", "link": "https://stackoverflow.com/users/6270554/hardik-upadhyay"}, "edited": false, "score": 0, "creation_date": 1499245430, "post_id": 44919304, "comment_id": 76818839, "body": "i think this will help you <a href=\"https://stackoverflow.com/questions/26478906/ruby-errors-with-os-x-yosemite\" title=\"ruby errors with os x yosemite\">stackoverflow.com/questions/26478906/&hellip;</a>"}, {"owner": {"reputation": 151, "user_id": 7671805, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10155171308765555/picture?type=large", "display_name": "Brian Law", "link": "https://stackoverflow.com/users/7671805/brian-law"}, "reply_to_user": {"reputation": 2343, "user_id": 6270554, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PqRWJ.jpg?s=128&g=1", "display_name": "Hardik Upadhyay", "link": "https://stackoverflow.com/users/6270554/hardik-upadhyay"}, "edited": false, "score": 0, "creation_date": 1499662720, "post_id": 44919304, "comment_id": 76981893, "body": "just tried to do it in my free time, but still it is not working :("}], "answers": [{"tags": [], "owner": {"reputation": 151, "user_id": 7671805, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10155171308765555/picture?type=large", "display_name": "Brian Law", "link": "https://stackoverflow.com/users/7671805/brian-law"}, "is_accepted": false, "score": 0, "last_activity_date": 1499854881, "creation_date": 1499854881, "answer_id": 45054973, "question_id": 44919304, "link": "https://stackoverflow.com/questions/44919304/macos-error-for-object-0x7f8b8d004c40-pointer-being-freed-was-not-allocated/45054973#45054973", "title": "MacOS error for object 0x7f8b8d004c40: pointer being freed was not allocated", "body": "<p>After I tried clean reinstall MacOS, the error still exist, so the error must be in my code.</p>\n\n<p>But since malloc is a C thing, I took a closer look at the gems I am currently using, and found one of the gem is a C extension.</p>\n\n<p>I removed that gem, and everything is fine, just I have to find a alternative to that gem.</p>\n"}], "owner": {"reputation": 151, "user_id": 7671805, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10155171308765555/picture?type=large", "display_name": "Brian Law", "link": "https://stackoverflow.com/users/7671805/brian-law"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 693, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1499854881, "creation_date": 1499238720, "last_edit_date": 1499244458, "question_id": 44919304, "link": "https://stackoverflow.com/questions/44919304/macos-error-for-object-0x7f8b8d004c40-pointer-being-freed-was-not-allocated", "title": "MacOS error for object 0x7f8b8d004c40: pointer being freed was not allocated", "body": "<p>I have a problem when I run rails s or rails routes,\nmost of the time I will get the following error message: </p>\n\n<pre><code>ruby(2177,0x7fff96a0b3c0) malloc: *** error for object 0x7f8b8d004c40: pointer being freed was not allocated\n*** set a breakpoint in malloc_error_break to debug\n</code></pre>\n\n<p>I have tried all solutions\n<a href=\"https://stackoverflow.com/questions/22329005/mac-terminal-pointer-being-freed-was-not-allocated-error-when-opening-termin\">here</a>\nbut it doesn't help, any ideas?</p>\n"}, {"tags": ["ruby", "ruby-1.9", "rhomobile", "rhodes"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1499241461, "post_id": 44919066, "comment_id": 76816203, "body": "&quot;doesn&#39;t passes&quot; is not a precise enough error description for us to help you. (In fact, I don&#39;t even know what that means.) <i>What</i> doesn&#39;t work? <i>How</i> doesn&#39;t it work? What trouble do you have with your code? Do you get an error message? What is the error message? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ? Is the behavior you are observing not the desired behavior? What is the desired behavior and why, what is the observed behavior, and in what way do they differ?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1499241501, "post_id": 44919066, "comment_id": 76816229, "body": "Please, provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> (With focus on the <i>Minimal</i>), and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 1, "user_id": 6936721, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yQRe5waOJSU/AAAAAAAAAAI/AAAAAAAAANA/Jtmk5Ymhl8E/photo.jpg?sz=128", "display_name": "Sufiyan Siddique", "link": "https://stackoverflow.com/users/6936721/sufiyan-siddique"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1499245931, "post_id": 44919066, "comment_id": 76819219, "body": "I&#39;ve edited the post. Is that enough to understand?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6936721, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yQRe5waOJSU/AAAAAAAAAAI/AAAAAAAAANA/Jtmk5Ymhl8E/photo.jpg?sz=128", "display_name": "Sufiyan Siddique", "link": "https://stackoverflow.com/users/6936721/sufiyan-siddique"}, "edited": false, "score": 0, "creation_date": 1499240522, "post_id": 44919589, "comment_id": 76815557, "body": "I&#39;ve tried class level variable by changing to @@vpinerr but it gives error &quot;variable not initialize&quot; . and when I initialize with empty string @@vpinerr = &quot;&quot;, then the value of this variable becomes empty in edit method."}, {"owner": {"reputation": 2156, "user_id": 976880, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/bcade31197a5623384d853c3c5fac28a?s=128&d=identicon&r=PG", "display_name": "aBadAssCowboy", "link": "https://stackoverflow.com/users/976880/abadasscowboy"}, "reply_to_user": {"reputation": 1, "user_id": 6936721, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yQRe5waOJSU/AAAAAAAAAAI/AAAAAAAAANA/Jtmk5Ymhl8E/photo.jpg?sz=128", "display_name": "Sufiyan Siddique", "link": "https://stackoverflow.com/users/6936721/sufiyan-siddique"}, "edited": false, "score": 0, "creation_date": 1499240802, "post_id": 44919589, "comment_id": 76815730, "body": "Did you also change it to <code>@@vpinerr</code> in the line <code>@vpinerr = &quot;Pincode is invalid&quot;</code> too? You should change there too."}], "tags": [], "owner": {"reputation": 2156, "user_id": 976880, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/bcade31197a5623384d853c3c5fac28a?s=128&d=identicon&r=PG", "display_name": "aBadAssCowboy", "link": "https://stackoverflow.com/users/976880/abadasscowboy"}, "is_accepted": false, "score": 0, "last_activity_date": 1499240039, "last_edit_date": 1499240039, "creation_date": 1499239561, "answer_id": 44919589, "question_id": 44919066, "link": "https://stackoverflow.com/questions/44919066/how-to-use-a-variable-from-one-method-to-other-in-a-same-class-in-ruby/44919589#44919589", "title": "How to use a variable from one method to other in a same class in Ruby?", "body": "<p>Variables with a prepending <code>@</code> are considered as instance variables and are available in a class's instance. Your controller is a class and with every request, Rails instantiates a new controller instance. In that sense, when you make a request to the create action, a new instance is created and <code>@vpinerr</code> is set in the instance. When you redirect the user to the edit action, its a new request and a new controller instance is instantiated. Since the instances from create action and edit actions are different, you won't have the value of <code>@vpinerr</code> in the edit action.</p>\n\n<p>You have alternatives.</p>\n\n<ol>\n<li>Class-level variables.</li>\n</ol>\n\n<p>Class-level variables are set on the class and are available in all instances. Any variable prepended with <code>@@</code> are class variables. Change to <code>@@vpinerr</code> everywhere instead of <code>@vpinerr</code>. </p>\n\n<p>This would be wrong to use in your case because, you could want it to be different for each user but using class variable will keep the value for other users too until its changed. Read about class variables:  <a href=\"http://www.railstips.org/blog/archives/2006/11/18/class-and-instance-variables-in-ruby\" rel=\"nofollow noreferrer\">http://www.railstips.org/blog/archives/2006/11/18/class-and-instance-variables-in-ruby</a></p>\n\n<ol start=\"2\">\n<li>Session variables.</li>\n</ol>\n\n<p>Session variables are used to save variables within a session. They can be shared between controllers too. To set a session variable <code>session[:vpinerr] = \"Some error\"</code> and to use it, you can simple call <code>session[:vpinerr]</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 6936721, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yQRe5waOJSU/AAAAAAAAAAI/AAAAAAAAANA/Jtmk5Ymhl8E/photo.jpg?sz=128", "display_name": "Sufiyan Siddique", "link": "https://stackoverflow.com/users/6936721/sufiyan-siddique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1499246329, "creation_date": 1499237990, "last_edit_date": 1499246329, "question_id": 44919066, "link": "https://stackoverflow.com/questions/44919066/how-to-use-a-variable-from-one-method-to-other-in-a-same-class-in-ruby", "title": "How to use a variable from one method to other in a same class in Ruby?", "body": "<p>I am new to Ruby. I have a below code in my controller. \n<strong>Desired Behaviour :-</strong>\nI want to display validation error string to my views on edit page. So I am putting those errors in a variable. When validation fails then I want to use that variable in my edit method, so that I can display that on my edit page view.</p>\n\n<p><strong>Observed behaviour :-</strong>\n There is a variable <strong>@vpinerr</strong> in <strong>create</strong> method. I wan to use that variable in <strong>edit</strong> method. I have tried to use the class variable (@@vpinerr) and initialized it with an empty string (@@vpinerr = \"\") then the value of this variable becomes empty in edit method.</p>\n\n<pre><code>require 'rho/rhocontroller'\n    require 'helpers/browser_helper'\n\n    class LeadController &lt; Rho::RhoController\n      include BrowserHelper\n\n      # GET /Lead\n      def index\n        @leads = Lead.find(:all)\n        render :back =&gt; '/app'\n      end\n\n    # GET /Lead/new\n      def new\n        @lead = Lead.new\n        render :action =&gt; :new, :back =&gt; url_for(:action =&gt; :index)\n      end\n\n\n      def create\n        # Update\n        if Lead.find(@params['id'])\n            @lead = Lead.find(@params['id'])\n            # array of objects\n            @leadadd = LeadAddress.find(:all,\n                                        :conditions =&gt; {:parentKey =&gt; @lead.object}\n                                    )\n            @leadcon = LeadContact.find(:all,\n                                        :conditions =&gt; {:parentKey =&gt; @lead.object}\n                                        )\n\n\n            #hash of hashes\n            leadaddressArray = @params['leadaddress']\n\n\n            arr1 = @leadadd.count - 1\n\n            for i in 0..arr1\n              j=i.to_s\n              @leadaddHash = @leadadd[i]\n              leadaddressHash = leadaddressArray[j]\n\n\n              if leadaddressHash['removed'] == \"1\"\n                singleadd = LeadAddress.find(:first,\n                                        :conditions =&gt; {:object =&gt; leadaddressHash['object']}\n                                    )\n                singleadd.destroy if singleadd\n              else\n                #validation\n                vpin = leadaddressHash['pincode']\n                #validation check\n                if vpin =~ /^[[:digit:]]+$/\n                  @leadaddHash.update_attributes(leadaddressHash) if @leadaddHash\n                else\n                  err = 1\n                  @vpinerr = \"Pincode is invalid\"\n                end           \n              end\n            end\n\n\n            leadconArray = @params['leadcontact']\n            arr2 = @leadcon.count - 1  \n            for k in 0..arr2\n              z=k.to_s\n              @leadconHash = @leadcon[k]\n              leadContact = leadconArray[z]\n              if leadContact['removed'] == \"1\"\n                singlecon = LeadContact.find(:first,\n                                        :conditions =&gt; {:object =&gt; leadContact['object']}\n                                    )\n                singlecon.destroy if singlecon\n              else\n                @leadconHash.update_attributes(leadContact) if @leadconHash\n              end\n\n            end\n\n\n            @lead.update_attributes(@params['lead']) if @lead\n            if err == 0\n              redirect :action =&gt; :index\n            else\n              redirect :action =&gt; :edit, :id =&gt; @lead.object, :vpin =&gt;@vpinerr\n            end \n\n        else\n        # Create\n            err = 0\n\n            # validation\n            vlead = @params['lead']\n            vfirstname = vlead['firstname']\n            vlastname = vlead['lastname']\n            vage = vlead['age']\n\n\n            #validation check\n            if (vfirstname =~ /^[[:alpha:][:blank:]]+$/) and (vlastname =~ /^[[:alpha:][:blank:]]+$/) and (vage =~ /^[[:digit:]]+$/) \n              @lead = Lead.create(@params['lead'])\n              @key = @lead.object\n            else\n              err = 1\n              @basicerr = \"Basic Details are invalid\"\n            end\n\n            if @params['leadaddress']\n              leadaddressArray = @params['leadaddress']\n              arrcount = leadaddressArray.count\n              for i in 1..arrcount\n                j=(i-1).to_s\n                leadaddressHash = leadaddressArray[j]\n                #validation\n                vpin = leadaddressHash['pincode']\n                #validation check\n                if vpin =~ /^[[:digit:]]+$/\n                  @leadAdd = LeadAddress.create(leadaddressHash)\n                  @leadAdd.parentKey = @key\n                  @leadAdd.save()\n                else\n                  err = 1\n                  @vpinerr = \"Pincode is invalid\"\n                end\n              end\n            end\n\n            if @params['leadcontact']\n              leadconArray = @params['leadcontact']\n              arrcount2 = leadconArray.count \n              for k in 1..arrcount2\n                h=(k-1).to_s\n                leadconHash = leadconArray[h]\n                #validation\n                vhome = leadconHash['home']\n                vmobile = leadconHash['mobile']\n                vemail = leadconHash['email']\n                #validation check\n                if (vhome =~ /^[[:digit:]]+$/) and (vmobile =~ /^[[:digit:]]+$/) and (vemail =~ /\\A([\\w+\\-]\\.?)+@[a-z\\d\\-]+(\\.[a-z]+)*\\.[a-z]+\\z/i)\n                  @leadcontact = LeadContact.create(leadconHash)     \n                  @leadcontact.parentKey = @key\n                  @leadcontact.save()\n                else\n                  err = 1\n                  @contacterr = \"Contact Details are invalid\"    \n                end           \n              end\n            end\n\n            if err == 0\n              redirect :action =&gt; :index\n            else\n              redirect :action =&gt; :edit, :id =&gt; @lead.object\n            end      \n        end\n      end\n\n\n    # GET /Lead/{1}\n      def show\n        @lead = Lead.find(@params['id'])\n        @leadadd = LeadAddress.find(:all,\n                                        :conditions =&gt; {:parentKey =&gt; @lead.object}\n                                    )\n        @leadcontact = LeadContact.find(:all,\n                                        :conditions =&gt; {:parentKey =&gt; @lead.object}\n                                        )\n\n        if @lead\n          render :action =&gt; :show, :back =&gt; url_for(:action =&gt; :index)\n        else\n          redirect :action =&gt; :index\n        end\n      end\n\n\n      # GET /Lead/{1}/edit\n      def edit\n        @lead = Lead.find(@params['id'])\n        @leadaddress = LeadAddress.find(:all,\n                                        :conditions =&gt; {:parentKey =&gt; @lead.object}\n                                    )\n        @leadcontact = LeadContact.find(:all,\n                                        :conditions =&gt; {:parentKey =&gt; @lead.object}\n                                       )\n        @vpinerr2 = @vpinerr\n\n\n        if @lead\n          render :action =&gt; :new, :back =&gt; url_for(:action =&gt; :index)\n        else\n          redirect :action =&gt; :index\n        end\n      end\n\n\n    end\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "spree", "aramex"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1499238681, "post_id": 44918963, "comment_id": 76814330, "body": "Where does <code>AramexAddressValidator</code> come from? Do you have any module?"}, {"owner": {"reputation": 849, "user_id": 2739770, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e563039c73c1cf486c99260caf4694c8?s=128&d=identicon&r=PG&f=1", "display_name": "Dinshaw Raje", "link": "https://stackoverflow.com/users/2739770/dinshaw-raje"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1499239833, "post_id": 44918963, "comment_id": 76815080, "body": "Yup I had module for &#39;AramexAddressValidator&#39; in my lib folder"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1499239870, "post_id": 44918963, "comment_id": 76815108, "body": "Please post it in the question"}, {"owner": {"reputation": 1990, "user_id": 1542202, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4e190f3471ef5849b6c858193be8ba66?s=128&d=identicon&r=PG", "display_name": "Sivan", "link": "https://stackoverflow.com/users/1542202/sivan"}, "edited": false, "score": 0, "creation_date": 1499249430, "post_id": 44918963, "comment_id": 76821967, "body": "The &quot;include&quot; in controller is searching AramexAddressValidator module in AramexAddressController .  Try by giving exact file path in &quot;include&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 321, "user_id": 2826913, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/c20a27829d1ef1cccd3f878bf597a6c4?s=128&d=identicon&r=PG&f=1", "display_name": "wendy0402", "link": "https://stackoverflow.com/users/2826913/wendy0402"}, "is_accepted": false, "score": 0, "last_activity_date": 1499255328, "creation_date": 1499255328, "answer_id": 44925396, "question_id": 44918963, "link": "https://stackoverflow.com/questions/44918963/uninitialized-constant-spreeapiaramexaddresscontrolleraramexaddressvalidat/44925396#44925396", "title": "Uninitialized constant Spree::Api::AramexAddressController::AramexAddressValidator", "body": "<p>maybe you can try this:</p>\n\n<p><code>\nnamespace :spree do\n  namespace :api do\n    resources :aramex_address, only: [] do\n      get :validate_address_with_aramex\n      get :fetch_cities_from_aramex_address\n    end\n  end\nend\n</code></p>\n\n<p>words of advice I think it's better if you rename the <code>fetch_cities_from_aramex_address</code> with <code>show</code> method, so it still follow rails convenience</p>\n"}, {"tags": [], "owner": {"reputation": 2735, "user_id": 7006199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kFqCJ.jpg?s=128&g=1", "display_name": "Nimish Gupta", "link": "https://stackoverflow.com/users/7006199/nimish-gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1499541713, "creation_date": 1499541713, "answer_id": 44989957, "question_id": 44918963, "link": "https://stackoverflow.com/questions/44918963/uninitialized-constant-spreeapiaramexaddresscontrolleraramexaddressvalidat/44989957#44989957", "title": "Uninitialized constant Spree::Api::AramexAddressController::AramexAddressValidator", "body": "<p>well here is the issue of constant lookup. Your constant that is <code>AramexAddressValidator</code> is missing because of the way you wrote <code>class Spree::Api::AramexAddressController &lt; ApplicationController</code></p>\n\n<p>So if your module <code>AramexAddressValidator</code> is inside some scope use that scope also while including this module\nFor Ex. if its inside spree/aramex_address_validator use\n<code>include Spree::AramexAddressValidator</code></p>\n"}], "owner": {"reputation": 849, "user_id": 2739770, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e563039c73c1cf486c99260caf4694c8?s=128&d=identicon&r=PG&f=1", "display_name": "Dinshaw Raje", "link": "https://stackoverflow.com/users/2739770/dinshaw-raje"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 175, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1502989176, "creation_date": 1499237684, "last_edit_date": 1502989176, "question_id": 44918963, "link": "https://stackoverflow.com/questions/44918963/uninitialized-constant-spreeapiaramexaddresscontrolleraramexaddressvalidat", "title": "Uninitialized constant Spree::Api::AramexAddressController::AramexAddressValidator", "body": "<p>I am facing the following issue:</p>\n\n<blockquote>\n  <p>ActionController::RoutingError (uninitialized constant Spree::Api::AramexAddressController::AramexAddressValidator):<br>\n  app/controllers/spree/api/aramex_address_controller.rb:2:in <code>&lt;class:AramexAddressController&gt;</code><br>\n  app/controllers/spree/api/aramex_address_controller.rb:1:in <code>&lt;top (required)&gt;</code></p>\n</blockquote>\n\n<p>I included the following in my <em>controllers/spree/api/aramex_address_controller.rb</em>:</p>\n\n<pre><code>class Spree::Api::AramexAddressController &lt; ApplicationController\n  include AramexAddressValidator\n\n  # fetch cities from aramex api\n  def fetch_cities_from_aramex_address\n    response = []\n    zones = Spree::ShippingMethod.where(['LOWER(admin_name) like ?', '%aramex%']).map(&amp;:zones).flatten\n    if zones.map(&amp;:countries).flatten.map(&amp;:iso).include?(params['country_code'])\n      response = JSON.parse(fetch_cities(params['country_code']))['Cities']\n    end\n    respond_to do |format|\n      format.json { render :json =&gt; response, :status =&gt; 200 }\n    end\n  end\n\n  # Validate address for aramex shipping\n  def validate_address_with_aramex\n    begin\n      zones = Spree::ShippingMethod.where(['LOWER(admin_name) like ?', '%aramex%']).map(&amp;:zones).flatten\n      final_response = {}\n      if zones.map(&amp;:countries).flatten.map(&amp;:iso).include?(params[:b_country])\n        final_response[:b_errors] = confirm_address_validity(params[:b_city], params[:b_zipcode], params[:b_country])\n      end\n      if zones.map(&amp;:countries).flatten.map(&amp;:iso).include?(params[:s_country]) &amp;&amp; params[:use_bill_address] == \"false\"\n        final_response[:s_errors] = confirm_address_validity(params[:s_city], params[:s_zipcode], params[:s_country])\n      end\n    rescue\n      return true\n    end\n    respond_to do |format|\n      format.json { render :json =&gt; final_response, :status =&gt; 200 }\n    end\n  end\n\n  # Confirm address validity with Aramex address validatio API\n  def confirm_address_validity(city, zipcode, country)\n    response = JSON.parse(validate_address(city, zipcode, country))\n    if response['HasErrors'] == true\n      if response['SuggestedAddresses'].present?\n        response['Notifications'].map{|data| data['Message']}.join(', ') + ', Suggested city name is - ' + response['SuggestedAddresses'].map{|data| data['City']}.join(', ')\n      else\n        if response['Notifications'].first['Code'] == 'ERR06'\n          response['Notifications'].map{|data| data['Message']}.join(', ')\n        else\n          cities_response = JSON.parse(fetch_cities(country, city[0..2]))\n          cities_response['Notifications'].map{|data| data['Message']}.join(', ') + ', Suggested city name is - ' + cities_response['Cities'].join(' ,')\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>In my route file I mentioned:</p>\n\n<pre><code>get 'validate_address_with_aramex', to: 'aramex_address#validate_address_with_aramex'\nget 'fetch_cities_from_aramex_address', to: 'aramex_address#fetch_cities_from_aramex_address'\n</code></pre>\n\n<p>I included the following JS call for the submitted Aramex Ajax validation in <em>assets/javascripts/spree/frontend/checkout/address.js</em>:</p>\n\n<pre><code>Spree.ready(function($) {\n    Spree.onAddress = function() {\n        var call_aramex = true;\n        $(\"#checkout_form_address\").on('submit', function(e) {\n            if ($('#checkout_form_address').valid()) {\n                var s_country = $(\"#order_ship_address_attributes_country_id\").find('option:selected').attr('iso_code');\n                var s_zipcode = $(\"#order_ship_address_attributes_zipcode\").val();\n                var s_city = $(\"#order_ship_address_attributes_city\").val();\n                var b_country = $(\"#order_bill_address_attributes_country_id\").find('option:selected').attr('iso_code');\n                var b_zipcode = $(\"#order_bill_address_attributes_zipcode\").val();\n                var b_city = $(\"#order_bill_address_attributes_city\").val();\n                if (call_aramex == true &amp;&amp; (typeof aramex_countries !== 'undefined') &amp;&amp; (aramex_countries.includes(b_country) || aramex_countries.includes(s_country))) {\n                    e.preventDefault();\n                    var error_id = $('#errorExplanation').is(':visible') ? '#errorExplanation' : '#manual_error'\n                    $(error_id).html(\"\").hide()\n                    $.blockUI({\n                        message: '&lt;img src=\"/assets/ajax-loader.gif\" /&gt;'\n                    });\n                    $.ajax({\n                        url: \"/api/validate_address_with_aramex\",\n                        type: 'GET',\n                        dataType: \"json\",\n                        data: {\n                            s_country: s_country,\n                            s_zipcode: s_zipcode,\n                            s_city: s_city,\n                            b_country: b_country,\n                            b_zipcode: b_zipcode,\n                            b_city: b_city,\n                            use_bill_address: ($(\"#order_use_billing\").is(\":checked\"))\n                        },\n                        success: function(result) {\n                            $.unblockUI()\n                            if (result.b_errors || result.s_errors) {\n                                if (result.b_errors) {\n                                    $(error_id).append('&lt;div&gt;Billing Address ' + result.b_errors + ' &lt;/div&gt;')\n                                }\n                                if (result.s_errors) {\n                                    $(error_id).append('&lt;div&gt;Shipping Address ' + result.s_errors + ' &lt;/div&gt;')\n                                }\n                                if ((result.b_errors &amp;&amp; !result.s_errors) &amp;&amp; ($(\"#order_use_billing\").is(\":unchecked\"))) {\n                                    $(\".js-summary-edit\").trigger(\"click\")\n                                }\n                                $(error_id).show();\n                                $('html, body').animate({\n                                    scrollTop: '0px'\n                                }, 300);\n                            } else {\n                                call_aramex = false;\n                                $('#checkout_form_address').submit()\n                            }\n                        },\n                        error: function(xhr, status, error) {\n                            $(error_id).append('Oops Something Went Wrong but you can process order')\n                            $(error_id).show();\n                            $.unblockUI()\n                            $('html, body').animate({\n                                scrollTop: '0px'\n                            }, 300);\n                            $('#checkout_form_address').submit()\n                        }\n                    });\n                }\n            }\n        })\n\n        var getCountryId, order_use_billing, update_shipping_form_state;\n        if (($('#checkout_form_address')).is('*')) {\n            ($('#checkout_form_address')).validate({\n                rules: {\n                    \"order[bill_address_attributes][city]\": {\n                        required: true,\n                        maxlength: function(element) {\n                            return maxCharLimit($(\"#order_bill_address_attributes_country_id\").val(), 22)\n                        }\n                    },\n                    \"order[bill_address_attributes][firstname]\": {\n                        required: true,\n                        maxlength: function(element) {\n                            return maxCharLimit($(\"#order_bill_address_attributes_country_id\").val(), 15)\n                        }\n                    },\n                    \"order[bill_address_attributes][lastname]\": {\n                        required: true,\n                        maxlength: function(element) {\n                            return maxCharLimit($(\"#order_bill_address_attributes_country_id\").val(), 17)\n                        }\n                    },\n                    \"order[bill_address_attributes][address1]\": {\n                        required: true,\n                        maxlength: function(element) {\n                            return maxCharLimit($(\"#order_bill_address_attributes_country_id\").val(), 32)\n                        }\n                    },\n                    \"order[bill_address_attributes][address2]\": {\n                        maxlength: function(element) {\n                            return maxCharLimit($(\"#order_bill_address_attributes_country_id\").val(), 32)\n                        }\n                    },\n                    \"order[bill_address_attributes][zipcode]\": {\n                        maxlength: function(element) {\n                            return maxCharLimit($(\"#order_bill_address_attributes_country_id\").val(), 10)\n                        }\n                    },\n                    \"order[ship_address_attributes][city]\": {\n                        required: true,\n                        maxlength: function(element) {\n                            return maxCharLimit($(\"#order_ship_address_attributes_country_id\").val(), 22)\n                        }\n                    },\n                    \"order[ship_address_attributes][firstname]\": {\n                        required: true,\n                        maxlength: function(element) {\n                            return maxCharLimit($(\"#order_ship_address_attributes_country_id\").val(), 15)\n                        }\n                    },\n                    \"order[ship_address_attributes][lastname]\": {\n                        required: true,\n                        maxlength: function(element) {\n                            return maxCharLimit($(\"#order_ship_address_attributes_country_id\").val(), 17)\n                        }\n                    },\n                    \"order[ship_address_attributes][address1]\": {\n                        required: true,\n                        maxlength: function(element) {\n                            return maxCharLimit($(\"#order_ship_address_attributes_country_id\").val(), 32)\n                        }\n                    },\n                    \"order[ship_address_attributes][address2]\": {\n                        maxlength: function(element) {\n                            return maxCharLimit($(\"#order_ship_address_attributes_country_id\").val(), 32)\n                        }\n                    },\n                    \"order[ship_address_attributes][zipcode]\": {\n                        maxlength: function(element) {\n                            return maxCharLimit($(\"#order_ship_address_attributes_country_id\").val(), 10)\n                        }\n                    }\n                }\n            });\n            getCountryId = function(region) {\n                return $('#' + region + 'country select').val();\n            };\n\n            isCountryUsOrCa = function(country_id) {\n                return [\"38\", \"232\"].includes(country_id)\n            }\n\n            maxCharLimit = function(country_id, limit) {\n                if ([\"38\", \"232\"].includes(country_id)) {\n                    return limit;\n                } else {\n                    return 255;\n                }\n            };\n\n            Spree.updateState = function(region) {\n                var countryId;\n                var cityId\n                countryId = getCountryId(region);\n                if (countryId != null) {\n                    if (region == 'b') {\n                        cityId = '#order_bill_address_attributes_city'\n                        countryInputId = \"#order_bill_address_attributes_country_id\"\n                    } else {\n                        cityId = '#order_ship_address_attributes_city'\n                        countryInputId = \"#order_ship_address_attributes_country_id\"\n                    }\n                    fill_cities($(countryInputId).find('option:selected').attr('iso_code'), cityId)\n                    if (Spree.Checkout[countryId] == null) {\n                        return $.get(Spree.routes.states_search, {\n                            country_id: countryId\n                        }, function(data) {\n                            Spree.Checkout[countryId] = {\n                                states: data.states,\n                                states_required: data.states_required\n                            };\n                            return Spree.fillStates(Spree.Checkout[countryId], region);\n                        });\n                    } else {\n                        return Spree.fillStates(Spree.Checkout[countryId], region);\n                    }\n                }\n            };\n\n            fill_cities = function(country_code, cityId) {\n                $.ajax({\n                    url: \"/api/fetch_cities_from_aramex_address\",\n                    type: 'GET',\n                    dataType: \"json\",\n                    data: {\n                        country_code: country_code\n                    },\n                    success: function(data) {\n                        $(cityId).autocomplete({\n                            source: data,\n                        });\n                    },\n                    error: function() {}\n                });\n            }\n\n            Spree.fillStates = function(data, region) {\n                var selected, stateInput, statePara, stateSelect, stateSpanRequired, states, statesRequired, statesWithBlank;\n                statesRequired = data.states_required;\n                states = data.states;\n                statePara = $('#' + region + 'state');\n                stateSelect = statePara.find('select');\n                stateInput = statePara.find('input');\n                stateSpanRequired = statePara.find('[id$=\"state-required\"]');\n                if (states.length &gt; 0) {\n                    selected = parseInt(stateSelect.val());\n                    stateSelect.html('');\n                    statesWithBlank = [{\n                        name: '',\n                        id: ''\n                    }].concat(states);\n                    $.each(statesWithBlank, function(idx, state) {\n                        var opt;\n                        opt = ($(document.createElement('option'))).attr('value', state.id).html(state.name);\n                        if (selected === state.id) {\n                            opt.prop('selected', true);\n                        }\n                        return stateSelect.append(opt);\n                    });\n                    stateSelect.prop('disabled', false).show();\n                    stateInput.hide().prop('disabled', true);\n                    statePara.show();\n                    stateSpanRequired.show();\n                    if (statesRequired) {\n                        stateSelect.addClass('required');\n                    }\n                    stateSelect.removeClass('hidden');\n                    return stateInput.removeClass('required');\n                } else {\n                    stateSelect.hide().prop('disabled', true);\n                    stateInput.show();\n                    if (statesRequired) {\n                        stateSpanRequired.show();\n                        stateInput.addClass('required');\n                    } else {\n                        stateInput.val('');\n                        stateSpanRequired.hide();\n                        stateInput.removeClass('required');\n                    }\n                    statePara.toggle(!!statesRequired);\n                    stateInput.prop('disabled', !statesRequired);\n                    stateInput.removeClass('hidden');\n                    return stateSelect.removeClass('required');\n                }\n            };\n            ($('#bcountry select')).change(function() {\n                $('label.error').hide()\n                if (isCountryUsOrCa($(\"#order_bill_address_attributes_country_id\").val())) {\n                    $('#checkout_form_address').valid();\n                }\n                return Spree.updateState('b');\n            });\n            ($('#scountry select')).change(function() {\n                $('label.error').hide()\n                if (isCountryUsOrCa($(\"#order_bill_address_attributes_country_id\").val())) {\n                    $('#checkout_form_address').valid();\n                }\n                return Spree.updateState('s');\n            });\n            Spree.updateState('b');\n            order_use_billing = $('input#order_use_billing');\n            order_use_billing.change(function() {\n                return update_shipping_form_state(order_use_billing);\n            });\n            update_shipping_form_state = function(order_use_billing) {\n                if (order_use_billing.is(':checked')) {\n                    ($('#shipping .inner')).hide();\n                    return ($('#shipping .inner input, #shipping .inner select')).prop('disabled', true);\n                } else {\n                    ($('#shipping .inner')).show();\n                    ($('#shipping .inner input, #shipping .inner select')).prop('disabled', false);\n                    return Spree.updateState('s');\n                }\n            };\n            return update_shipping_form_state(order_use_billing);\n        }\n    };\n    return Spree.onAddress();\n});\n</code></pre>\n\n<p>Why am I am facing the issue mentioned at the top?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3004, "user_id": 5830036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/B2b06.png?s=128&g=1", "display_name": "Mayur Shah", "link": "https://stackoverflow.com/users/5830036/mayur-shah"}, "edited": false, "score": 1, "creation_date": 1499237164, "post_id": 44918750, "comment_id": 76813466, "body": "Because you are passing the whole object as a parameters when parameters comes to controller, controller get id form parameter and give a particular record."}], "answers": [{"comments": [{"owner": {"reputation": 301, "user_id": 8198298, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e17b424da9ca0e645643724a07426b5d?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/8198298/robert"}, "edited": false, "score": 0, "creation_date": 1499237555, "post_id": 44918816, "comment_id": 76813669, "body": "Is article preferred over article.id? The latter seems more intuitive to me but was wondering which one is the more conventional way.  In the case of article.id, does the object between the pipes have to be article.id as well?"}, {"owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "reply_to_user": {"reputation": 301, "user_id": 8198298, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e17b424da9ca0e645643724a07426b5d?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/8198298/robert"}, "edited": false, "score": 0, "creation_date": 1499237635, "post_id": 44918816, "comment_id": 76813710, "body": "@Robert you can pass anything but <code>article</code> is best because you pass whole object and controller fetch id from object."}], "tags": [], "owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "is_accepted": false, "score": 1, "last_activity_date": 1499237230, "creation_date": 1499237230, "answer_id": 44918816, "question_id": 44918750, "link": "https://stackoverflow.com/questions/44918750/what-value-can-a-rails-route-helper-have-as-a-parameter/44918816#44918816", "title": "What value can a Rails route helper have as a parameter?", "body": "<p>In below route:</p>\n\n<pre><code>article_path(article)\n</code></pre>\n\n<p>you can pass <code>article</code> as whole object or <code>article.id</code> both are valid.</p>\n"}, {"comments": [{"owner": {"reputation": 301, "user_id": 8198298, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e17b424da9ca0e645643724a07426b5d?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/8198298/robert"}, "edited": false, "score": 0, "creation_date": 1499239288, "post_id": 44918879, "comment_id": 76814702, "body": "So you recommend using (article.id) as the parameter...in that case, what should the value be between the pipes? It seems like the parameter being article.id and the value between the pipes to be article works."}, {"owner": {"reputation": 3004, "user_id": 5830036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/B2b06.png?s=128&g=1", "display_name": "Mayur Shah", "link": "https://stackoverflow.com/users/5830036/mayur-shah"}, "reply_to_user": {"reputation": 301, "user_id": 8198298, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e17b424da9ca0e645643724a07426b5d?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/8198298/robert"}, "edited": false, "score": 0, "creation_date": 1499239651, "post_id": 44918879, "comment_id": 76814966, "body": "pipes? when you pass like this <code>article_path(article.id)</code> than params only have id, not extra value."}, {"owner": {"reputation": 301, "user_id": 8198298, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e17b424da9ca0e645643724a07426b5d?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/8198298/robert"}, "edited": false, "score": 0, "creation_date": 1499240076, "post_id": 44918879, "comment_id": 76815242, "body": "I am referring to the value within |article| in the line &lt;% @articles.each do |article| %&gt;. Should it be |article.id| ? Or should it stay as |article| ?"}, {"owner": {"reputation": 3004, "user_id": 5830036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/B2b06.png?s=128&g=1", "display_name": "Mayur Shah", "link": "https://stackoverflow.com/users/5830036/mayur-shah"}, "reply_to_user": {"reputation": 301, "user_id": 8198298, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e17b424da9ca0e645643724a07426b5d?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/8198298/robert"}, "edited": false, "score": 0, "creation_date": 1499240166, "post_id": 44918879, "comment_id": 76815299, "body": "you should do like this <code>&lt;% @articles.each do |article| %&gt;         &lt;li&gt;             &lt;%= link_to article.title, article_path(article.id) %&gt;         &lt;&#47;li&gt;     &lt;% end %&gt;</code>"}], "tags": [], "owner": {"reputation": 3004, "user_id": 5830036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/B2b06.png?s=128&g=1", "display_name": "Mayur Shah", "link": "https://stackoverflow.com/users/5830036/mayur-shah"}, "is_accepted": true, "score": 2, "last_activity_date": 1499237895, "last_edit_date": 1499237895, "creation_date": 1499237457, "answer_id": 44918879, "question_id": 44918750, "link": "https://stackoverflow.com/questions/44918750/what-value-can-a-rails-route-helper-have-as-a-parameter/44918879#44918879", "title": "What value can a Rails route helper have as a parameter?", "body": "<pre><code>article_path(article)\n</code></pre>\n\n<p><strong>Is valid</strong> Because you are passing the whole object as a parameter when parameters come to the controller, controller get the id from parameter and give a particular record.</p>\n\n<p>I suggest you follow the standard way using <code>article_path(article.id)</code> because if you have number of fields in article model (table) then all filed are pass in the parameter. </p>\n"}], "owner": {"reputation": 301, "user_id": 8198298, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e17b424da9ca0e645643724a07426b5d?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/8198298/robert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 44918879, "answer_count": 2, "score": 0, "last_activity_date": 1499237895, "creation_date": 1499236983, "question_id": 44918750, "link": "https://stackoverflow.com/questions/44918750/what-value-can-a-rails-route-helper-have-as-a-parameter", "title": "What value can a Rails route helper have as a parameter?", "body": "<p>I'm working on a Rails tutorial and I don't understand the value a route helper can have as parameter.</p>\n\n<p>Why is it correct for the \"article_path\" to have \"article\" as its parameter?</p>\n\n<pre><code>&lt;ul id=\u201carticles\u201d&gt;\n    &lt;% @articles.each do |article| %&gt;\n        &lt;li&gt;\n            &lt;%= link_to article.title, article_path(article) %&gt;\n        &lt;/li&gt;\n    &lt;% end %&gt;\n&lt;/ul&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "routes"], "comments": [{"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 1, "creation_date": 1499236391, "post_id": 44918532, "comment_id": 76812994, "body": "What does <code>rake routes</code> returns you?"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1499236431, "post_id": 44918532, "comment_id": 76813014, "body": "You can always check what routes are generated by running <code>rake routes</code>"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1499236492, "post_id": 44918532, "comment_id": 76813051, "body": "How are you navigating to <code>&#47;places&#47;new</code>? with a link? please post the code"}, {"owner": {"reputation": 3004, "user_id": 5830036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/B2b06.png?s=128&g=1", "display_name": "Mayur Shah", "link": "https://stackoverflow.com/users/5830036/mayur-shah"}, "edited": false, "score": 0, "creation_date": 1499236874, "post_id": 44918532, "comment_id": 76813301, "body": "what do mean <i>everything works fine on my local machine</i>?"}], "answers": [{"comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 2, "creation_date": 1499237642, "post_id": 44918723, "comment_id": 76813717, "body": "Thats the mistake. But this not the solution to the problem!"}, {"owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1499237761, "post_id": 44918723, "comment_id": 76813786, "body": "@Pavan Its the first problem..if first is fixed then it might be possible that all other solutions be fixed."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1499237919, "post_id": 44918723, "comment_id": 76813882, "body": "That is not the problem for the issue which he is getting currently."}, {"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1499238062, "post_id": 44918723, "comment_id": 76813974, "body": "While not listed in the generators, numeric seems to work just fine as a type and is listed in <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/SchemaStatements.html#method-i-add_column\" rel=\"nofollow noreferrer\">add_column</a>....just ran <code>rails generate scaffold Place name:string lat:numeric lng:numeric</code> locally and everything seems to be working just fine with it in the console"}, {"owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "edited": false, "score": 0, "creation_date": 1499238231, "post_id": 44918723, "comment_id": 76814081, "body": "I tried the same and it getting error <code>undefined method </code>numeric&#39; for #&lt;ActiveRecord::ConnectionAdapters`"}, {"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1499238665, "post_id": 44918723, "comment_id": 76814317, "body": "Looks like it&#39;s <a href=\"https://github.com/rails/rails/blob/5-0-4/activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb\" rel=\"nofollow noreferrer\">here</a> in the 5.0 branches but is absent <a href=\"https://github.com/rails/rails/blob/4-2-stable/activerecord/lib/active_record/connection_adapters/abstract/schema_definitions.rb\" rel=\"nofollow noreferrer\">here</a> in the 4.2 stable branch, so must be a rails 5 feature; they haven&#39;t specified which version of rails they&#39;re on, but since they pasted that a command ran with numeric, I&#39;m going to assume they&#39;re on rails 5"}, {"owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "edited": false, "score": 0, "creation_date": 1499238835, "post_id": 44918723, "comment_id": 76814434, "body": "I am using rails 4.1.7 with pg database"}], "tags": [], "owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "is_accepted": false, "score": 0, "last_activity_date": 1499236887, "creation_date": 1499236887, "answer_id": 44918723, "question_id": 44918532, "link": "https://stackoverflow.com/questions/44918532/no-route-matches-get-place-new/44918723#44918723", "title": "No route matches [GET] &quot;/place/new&quot;", "body": "<p><code>numeric</code> is not a datatype. You have to use <code>float</code> or <code>integer</code> for lat/long instead of <code>numeric</code>.</p>\n\n<p>Corrected command:</p>\n\n<pre><code>rails generate scaffold Place name:string lat:integer lng:integer\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 655, "user_id": 2494631, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DCC31.jpg?s=128&g=1", "display_name": "vijoc", "link": "https://stackoverflow.com/users/2494631/vijoc"}, "is_accepted": false, "score": 1, "last_activity_date": 1499246653, "creation_date": 1499246653, "answer_id": 44922126, "question_id": 44918532, "link": "https://stackoverflow.com/questions/44918532/no-route-matches-get-place-new/44922126#44922126", "title": "No route matches [GET] &quot;/place/new&quot;", "body": "<p>You're saying you're navigating to <code>places/new</code>, but the log entry you've included shows that you're actually trying to navigate to <code>place/new</code>, which is not a valid route in this case. Use the plural for the resource.</p>\n"}], "owner": {"reputation": 53, "user_id": 1385169, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/AUFeZ.jpg?s=128&g=1", "display_name": "Valentin", "link": "https://stackoverflow.com/users/1385169/valentin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1499246653, "creation_date": 1499236226, "question_id": 44918532, "link": "https://stackoverflow.com/questions/44918532/no-route-matches-get-place-new", "title": "No route matches [GET] &quot;/place/new&quot;", "body": "<p>I can't catch where a problem is.</p>\n\n<p>I run on server</p>\n\n<pre><code>rails generate scaffold Place name:string lat:numeric lng:numeric\n</code></pre>\n\n<p>Next, I run</p>\n\n<pre><code>rake db:migrate\n</code></pre>\n\n<p>So, I try to create new Place on web browser and go to</p>\n\n<pre><code>/places/new\n</code></pre>\n\n<p>But receive:</p>\n\n<pre><code>ActionController::RoutingError (No route matches [GET] \"/place/new\"):\n</code></pre>\n\n<p>I confused because everything works fine on my local machine. What's wrong with me?</p>\n\n<p>btw, routes.rb looks like:</p>\n\n<pre><code>Rails.application.routes.draw do \n    resources :places\nend\n</code></pre>\n"}, {"tags": ["ruby", "date"], "answers": [{"tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": true, "score": 1, "last_activity_date": 1499238238, "creation_date": 1499238238, "answer_id": 44919140, "question_id": 44918531, "link": "https://stackoverflow.com/questions/44918531/date-parse05-11-19-parses-in-yy-mm-dd/44919140#44919140", "title": "&#39;Date.parse(&quot;05/11/19&quot;)&#39; parses in YY/MM/DD?", "body": "<p>You can pass a format String when parsing:</p>\n\n<pre><code>require 'date'\n\ndatestring = '05/11/19' # 05 Nov 2019\ndate = Date.strptime(datestring, '%d/%m/%y')\nputs date.strftime('%d %b %Y') # =&gt; 05 Nov 2019\n</code></pre>\n"}], "owner": {"reputation": 663, "user_id": 4509992, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1e8f5afb59f77ca7f56df81e7563695e?s=128&d=identicon&r=PG&f=1", "display_name": "Karias Bolster", "link": "https://stackoverflow.com/users/4509992/karias-bolster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 44919140, "answer_count": 1, "score": 0, "last_activity_date": 1499246393, "creation_date": 1499236221, "last_edit_date": 1499246393, "question_id": 44918531, "link": "https://stackoverflow.com/questions/44918531/date-parse05-11-19-parses-in-yy-mm-dd", "title": "&#39;Date.parse(&quot;05/11/19&quot;)&#39; parses in YY/MM/DD?", "body": "<p>I have a date in string format <code>\"05/11/19\"</code> I used <code>Date.parse</code>, but when I use <code>strftime(\"%d %b %Y\")</code>, it parsed the date as 19 Nov 2005. Is there another way to parse my string to date without messing up the day and year fields?</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "postgresql", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1499237243, "post_id": 44918477, "comment_id": 76813509, "body": "does this work? <code>left_outer_joins(:doctor_clinics).where( &#39;doctor_clinics.id = ? OR doctor_clinics.active = ?&#39;, nil, false )</code> in scope as <code>Doctor.unassociated</code>"}, {"owner": {"reputation": 1962, "user_id": 2945616, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/TL0yY.jpg?s=128&g=1", "display_name": "Atul Khanduri", "link": "https://stackoverflow.com/users/2945616/atul-khanduri"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1499238620, "post_id": 44918477, "comment_id": 76814296, "body": "Nope. It fails when there are two <code>clinics</code>, one is active and other is inactive.  In this case, doctor should not be selected. I&#39;ve just added more information  in the question."}, {"owner": {"reputation": 1962, "user_id": 2945616, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/TL0yY.jpg?s=128&g=1", "display_name": "Atul Khanduri", "link": "https://stackoverflow.com/users/2945616/atul-khanduri"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1499238694, "post_id": 44918477, "comment_id": 76814336, "body": "@Md.FarhanMemon, Also, <code>left_outer_joins</code> doesn&#39;t work (atleast in Rails 3) and <code>includes</code> is equivalent to <code>left_outer_join</code>. So, I updated that scope to <code>{includes(:clinics).where( &#39;doctor_clinics.id = ? OR doctor_clinics.active = ?&#39;, nil, false ) }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "reply_to_user": {"reputation": 1962, "user_id": 2945616, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/TL0yY.jpg?s=128&g=1", "display_name": "Atul Khanduri", "link": "https://stackoverflow.com/users/2945616/atul-khanduri"}, "edited": false, "score": 0, "creation_date": 1499239576, "post_id": 44919262, "comment_id": 76814904, "body": "Thanks for the feedback."}], "tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": true, "score": 1, "last_activity_date": 1499238951, "last_edit_date": 1499238951, "creation_date": 1499238594, "answer_id": 44919262, "question_id": 44918477, "link": "https://stackoverflow.com/questions/44918477/get-parent-objects-without-active-childs/44919262#44919262", "title": "Get parent objects without active childs", "body": "<p>Something like this should do the trick in pure SQL</p>\n\n<pre><code>SELECT * \nFROM doctors\nWHERE NOT EXISTS (\n  SELECT 1\n  FROM doctor_clinics\n  WHERE \n    doctor_clinics.doctor_id = doctors.id \n    AND doctor_clinics.active = true \n)\n</code></pre>\n\n<p>You should be able to use it with <code>find_by_sql</code>:</p>\n\n<pre><code>Doctor.find_by_sql(SQL)\n</code></pre>\n\n<p>Have no Rails 3 project to actually test it;-)</p>\n"}], "owner": {"reputation": 1962, "user_id": 2945616, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/TL0yY.jpg?s=128&g=1", "display_name": "Atul Khanduri", "link": "https://stackoverflow.com/users/2945616/atul-khanduri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 44919262, "answer_count": 1, "score": 0, "last_activity_date": 1499238951, "creation_date": 1499236011, "last_edit_date": 1499238499, "question_id": 44918477, "link": "https://stackoverflow.com/questions/44918477/get-parent-objects-without-active-childs", "title": "Get parent objects without active childs", "body": "<p>I've two models, <code>Doctor</code> and <code>DoctorClinic</code> where a <code>doctor</code> <code>has_many</code> <code>clinics</code>.</p>\n\n<p><strong><code>doctor.rb:</code></strong></p>\n\n<pre><code>has_many :clinics, class_name: 'DoctorClinic', dependent: :destroy\n</code></pre>\n\n<p><strong><code>doctor_clinic.rb</code></strong></p>\n\n<pre><code>belongs_to :doctor\n</code></pre>\n\n<p><code>DoctorClinic</code> have <code>doctor_id</code> and a boolean <code>active</code> field.</p>\n\n<p><strong>What I want:</strong></p>\n\n<p>I want to get all <code>doctors</code> which does not have any active (<code>active</code> field is <code>true</code>) clinics. If a doctor have two clinics, out of which one is active and other is inactive then doctor should not be selected.</p>\n\n<p>Doctor record will be selected if,</p>\n\n<ul>\n<li>there's no clinics at all</li>\n<li>if there's any clinic but all are inactive, i.e. all have <code>active</code> <code>false</code>.</li>\n</ul>\n\n<p>Doctor will not be selected if, </p>\n\n<ul>\n<li>there's any active clinics.</li>\n</ul>\n\n<p><strong>What I've tried so far:</strong></p>\n\n<p><strong>Try 1:</strong></p>\n\n<pre><code>scope :incomplete_doctors, -&gt; { includes(:clinics)\n                                .where(\"( doctor_clinics.id IS NULL ) OR\n                                        ( doctor_clinics.id IS NOT NULL AND\n                                            doctor_clinics.active=?)\", false )\n                              }\n</code></pre>\n\n<p><strong>Try 2:</strong></p>\n\n<pre><code>scope :incomplete_doctors, -&gt; { where(\"id NOT IN (?)\", self.includes(:clinics)\n                            .where(\"( doctor_clinics.doctor_id IS NULL ) OR\n                                      ( doctor_clinics.doctor_id IS NOT NULL AND\n                                          doctor_clinics.active=?)\", false )\n                            .select(:id))\n                            }\n</code></pre>\n\n<p><strong>Try 3:</strong></p>\n\n<pre><code>SELECT \"doctors\".* FROM \"doctors\"\n  LEFT OUTER JOIN \"doctor_clinics\" ON \"doctor_clinics\".\"doctor_id\" = \"doctors\".\"id\"\n  WHERE ( ( doctor_clinics.id IS NULL ) OR\n          ( doctor_clinics.id IS NOT NULL AND\n              doctor_clinics.active='f'))\n  GROUP BY doctors.id\n    HAVING 'true' &lt;&gt; ANY(array_agg(DISTINCT doctor_clinics.active::TEXT));\n</code></pre>\n\n<p><strong>Success:</strong></p>\n\n<p>I'm able to achieve desired output using following method, but I want to achieve this using a SQL query.</p>\n\n<pre><code>def active_clinics\n  clinics.active_clinics # active_clinics is a scope in Clinic model while give all active clinics\nend\n\ndef self.incomplete_doctors\n  (Doctor.all.map { |d| d unless d.active_clinics.present? }).compact\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 48, "user_id": 8041491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xAa7d.jpg?s=128&g=1", "display_name": "Nick Beaujean", "link": "https://stackoverflow.com/users/8041491/nick-beaujean"}, "edited": false, "score": 0, "creation_date": 1499235999, "post_id": 44918327, "comment_id": 76812802, "body": "For the record, I understand why my code produces syntax errors.  &amp;:to_s is shorthand for &amp;:to_s.to_proc and the .to_proc method works on a Symbol representing the method, not on a method call."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 4, "creation_date": 1499236136, "post_id": 44918327, "comment_id": 76812874, "body": "The <code>:</code> belongs to the symbol, not to the operator, i.e. it&#39;s <code>&amp;</code> and <code>:to_s</code>, not <code>&amp;:</code> and <code>to_s</code>."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1499237678, "post_id": 44918327, "comment_id": 76813734, "body": "I think this is more a duplicate of <a href=\"https://stackoverflow.com/questions/23695653/can-you-supply-arguments-to-the-mapmethod-syntax-in-ruby\">can-you-supply-arguments-to-the-mapmethod-syntax-in-ruby</a>. It&#39;s possible to patch <code>Symbol#call</code> to allow such a thing, which you can see was rejected from ruby core <a href=\"https://bugs.ruby-lang.org/issues/12115\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 48, "user_id": 8041491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xAa7d.jpg?s=128&g=1", "display_name": "Nick Beaujean", "link": "https://stackoverflow.com/users/8041491/nick-beaujean"}, "edited": false, "score": 0, "creation_date": 1499237758, "post_id": 44918327, "comment_id": 76813785, "body": "Thanks Max, I added a note to that effect at the bottom. I have no way to contact the guy who marked the question as a dupe. Just hope he comes back and sees this, I guess"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1499237923, "post_id": 44918327, "comment_id": 76813884, "body": "@NickBeaujean: done! Thanks, Max."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1499238563, "post_id": 44918327, "comment_id": 76814259, "body": "@CarySwoveland: two of them, even. :) But now that the answer is deleted, maybe no more action will be taken. I don&#39;t know if the mods issue formal warnings or just delete offending posts."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1499238917, "post_id": 44918327, "comment_id": 76814485, "body": "@Sergio, I rarely downvote, but I&#39;m very much old-school: cheaters should be kicked out of SO, period."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1499239169, "post_id": 44918327, "comment_id": 76814620, "body": "@CarySwoveland: btw, I was looking for a cool project idea to do on weekends (which is also outside my normal expertise), and this situation gave me a hint: data project for ranking posts on their similarity (plagiarism detection, yes). Would you be interested in joining me in this? :)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1499319932, "post_id": 44918327, "comment_id": 76857083, "body": "@Sergio, my apologies for not replying earlier--it slipped my mind. When I was younger I would have immediately said &quot;Sure!&quot;, and then find myself burning the candles at both ends, sometimes wishing I hadn&#39;t been so hasty. With age comes wisdom. Knowing what&#39;s on my plate, I&#39;ll have to thank you for the offer, but respectfully decline (but keep the  invites coming)."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1499320006, "post_id": 44918327, "comment_id": 76857110, "body": "@CarySwoveland: sure! :)"}], "owner": {"reputation": 48, "user_id": 8041491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xAa7d.jpg?s=128&g=1", "display_name": "Nick Beaujean", "link": "https://stackoverflow.com/users/8041491/nick-beaujean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 1, "closed_date": 1499236866, "answer_count": 0, "score": 0, "last_activity_date": 1499237961, "creation_date": 1499235509, "last_edit_date": 1499237961, "question_id": 44918327, "link": "https://stackoverflow.com/questions/44918327/can-the-ruby-operator-take-arguments", "closed_reason": "Duplicate", "title": "Can the Ruby &amp;: operator take arguments?", "body": "<p>Being able to call a Proc/method on multiple elements using the &amp;: shorthand is great:</p>\n\n<pre><code>[0,4,7].map(&amp;:to_s)            # =&gt; [\"0\",\"4\", \"7\"]\n[0,4,7].select(&amp;:zero?)        # =&gt; [0]\n[0,4,7].reduce(&amp;:+)            # =&gt; 11\n[0,4,7].count(&amp;:nil?)          # =&gt; 0\n</code></pre>\n\n<p>Simply passing parameters or logical operators to the Proc doesn't work:</p>\n\n<pre><code>[0,4,7].map(&amp;:to_s(2))         # Syntax error\n[0,4,7].select(&amp;:!zero?)       # Syntax error\n[0,4,7].select(&amp;:&lt;5)           # Syntax error\n[0,4,7].count(!&amp;:nil?)         # Syntax error\n</code></pre>\n\n<p>Instead, I need to use the long-form:</p>\n\n<pre><code>[0,4,7].map { |e| e.to_s(2)}   # =&gt; [\"0\", \"100\", \"111\"]\n[0,4,7].select { |e| !e.zero?} # =&gt; [4,7]\n[0,4,7].select { |e| e &lt; 5 }   # =&gt; [0,4]\n[0,4,7].count { |e| !e.nil? }  # =&gt; 3\n</code></pre>\n\n<p>What other options do I have? Which ways can I modify the Proc or method I'm calling? Is there any way to pass parameters, or to use logical operators like negation (!)?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 8257082, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOqmS.jpg?s=128&g=1", "display_name": "Twistedben", "link": "https://stackoverflow.com/users/8257082/twistedben"}, "edited": false, "score": 0, "creation_date": 1499235297, "post_id": 44918066, "comment_id": 76812427, "body": "So the * operator splits the array at the end and assigns it the last indexed value? And by that, I mean why does *a take the first 3 indexed values and b the last, 4?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 111, "user_id": 8257082, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOqmS.jpg?s=128&g=1", "display_name": "Twistedben", "link": "https://stackoverflow.com/users/8257082/twistedben"}, "edited": false, "score": 1, "creation_date": 1499235440, "post_id": 44918066, "comment_id": 76812502, "body": "Nope, the splat operator assigns the array on the right to the operand, comma is what decomposes (splits) the original array."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 111, "user_id": 8257082, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOqmS.jpg?s=128&g=1", "display_name": "Twistedben", "link": "https://stackoverflow.com/users/8257082/twistedben"}, "edited": false, "score": 0, "creation_date": 1499235516, "post_id": 44918066, "comment_id": 76812552, "body": "<a href=\"https://stackoverflow.com/questions/18289152/what-does-a-double-splat-operator-do#18289216\">This answer</a> is the great source to demistify the splat [and double splat] operator."}, {"owner": {"reputation": 111, "user_id": 8257082, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOqmS.jpg?s=128&g=1", "display_name": "Twistedben", "link": "https://stackoverflow.com/users/8257082/twistedben"}, "edited": false, "score": 0, "creation_date": 1499235610, "post_id": 44918066, "comment_id": 76812608, "body": "Ah! I get it! Thank you so much, @mudasobwa"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1499234475, "creation_date": 1499234475, "answer_id": 44918066, "question_id": 44917959, "link": "https://stackoverflow.com/questions/44917959/array-equation-explanation/44918066#44918066", "title": "Array equation explanation", "body": "<p>To break anything down line by line one could use REPL:</p>\n\n<pre><code>*a, b = [1, 2, 3, 4]\n#\u21d2 [1, 2, 3, 4]\n\na\n#\u21d2\u00a0[1, 2, 3]\n\nb\n#\u21d2\u00a04\n</code></pre>\n\n<p>Using splat operator, we have decomposed the original array to new array and the single value. Now everything is crystal clear: <code>a[b-2]</code> which is <code>a[2]</code>, which is in turn <code>3</code> (check <code>a</code> array.) and b is still <code>4</code>. </p>\n\n<pre><code>3 + 4\n#\u21d2\u00a07\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 111, "user_id": 8257082, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOqmS.jpg?s=128&g=1", "display_name": "Twistedben", "link": "https://stackoverflow.com/users/8257082/twistedben"}, "edited": false, "score": 0, "creation_date": 1499235649, "post_id": 44918070, "comment_id": 76812630, "body": "Thank you, Vivek. I understand it now!"}], "tags": [], "owner": {"reputation": 693, "user_id": 6608034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tuD0f.jpg?s=128&g=1", "display_name": "Vivek", "link": "https://stackoverflow.com/users/6608034/vivek"}, "is_accepted": false, "score": 2, "last_activity_date": 1511438806, "last_edit_date": 1511438806, "creation_date": 1499234487, "answer_id": 44918070, "question_id": 44917959, "link": "https://stackoverflow.com/questions/44917959/array-equation-explanation/44918070#44918070", "title": "Array equation explanation", "body": "<p><code>*a, b = [1, 2, 3, 4]</code> it means  <code>a = [1,2,3]</code> and <code>b = 4</code> when you do <code>a[b-2] + b</code> it will be</p>\n\n<pre><code>                +-----------------------+\na[b-2]   + b    |        a[2]           |\na[4-2]   + 4    |          |            |\na[2]     + 4    |  a[1, 2, 3]           |\n3        + 4    |    0  1  2 -&gt; index   |\n= 7             +-----------------------+\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 111, "user_id": 8257082, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOqmS.jpg?s=128&g=1", "display_name": "Twistedben", "link": "https://stackoverflow.com/users/8257082/twistedben"}, "edited": false, "score": 0, "creation_date": 1499235775, "post_id": 44918078, "comment_id": 76812699, "body": "Thank you, Hardik."}], "tags": [], "owner": {"reputation": 2343, "user_id": 6270554, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PqRWJ.jpg?s=128&g=1", "display_name": "Hardik Upadhyay", "link": "https://stackoverflow.com/users/6270554/hardik-upadhyay"}, "is_accepted": false, "score": 2, "last_activity_date": 1499234515, "creation_date": 1499234515, "answer_id": 44918078, "question_id": 44917959, "link": "https://stackoverflow.com/questions/44917959/array-equation-explanation/44918078#44918078", "title": "Array equation explanation", "body": "<p>when you assign array like this,</p>\n\n<pre><code>*a, b = [1, 2, 3, 4]\n</code></pre>\n\n<p>then it will assign </p>\n\n<pre><code>a = [1,2,3]\n</code></pre>\n\n<p>and <code>b = 4</code></p>\n\n<p>Now when you tried to print <code>a[b-2] + b</code></p>\n\n<pre><code>a[b - 2] = 3\nb = 4\n3 + 4 = 7\n</code></pre>\n\n<p>for more understanding use rails console and run line by line.</p>\n"}, {"comments": [{"owner": {"reputation": 111, "user_id": 8257082, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOqmS.jpg?s=128&g=1", "display_name": "Twistedben", "link": "https://stackoverflow.com/users/8257082/twistedben"}, "edited": false, "score": 0, "creation_date": 1499235814, "post_id": 44918177, "comment_id": 76812724, "body": "Thank you, Mayur!"}], "tags": [], "owner": {"reputation": 3004, "user_id": 5830036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/B2b06.png?s=128&g=1", "display_name": "Mayur Shah", "link": "https://stackoverflow.com/users/5830036/mayur-shah"}, "is_accepted": false, "score": 2, "last_activity_date": 1499235457, "last_edit_date": 1499235457, "creation_date": 1499234876, "answer_id": 44918177, "question_id": 44917959, "link": "https://stackoverflow.com/questions/44917959/array-equation-explanation/44918177#44918177", "title": "Array equation explanation", "body": "<pre><code>*a, b = [1, 2, 3, 4]\n\na\n =&gt; [1, 2, 3] \n\nb\n =&gt; 4 \n\na[b-2] // b-2 = 2 find value at index of 2 in a, like a[2] is 3\n =&gt; 3 \n\na[b-2]+b\n =&gt; 7 \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 6799439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e12bceea84655ff3751988b3a915af42?s=128&d=identicon&r=PG", "display_name": "VeronikaS", "link": "https://stackoverflow.com/users/6799439/veronikas"}, "is_accepted": false, "score": 1, "last_activity_date": 1585739590, "last_edit_date": 1585739590, "creation_date": 1585731979, "answer_id": 60967263, "question_id": 44917959, "link": "https://stackoverflow.com/questions/44917959/array-equation-explanation/60967263#60967263", "title": "Array equation explanation", "body": "<p>By using the splat operator on <strong>a</strong> we are basically letting <strong>a</strong> to scoop up all the other numbers that <strong>b</strong> does not need. So <strong>b</strong> takes one number from the array and <strong>a</strong> takes everything that is left. </p>\n\n<pre><code>b = 4 \n\na = [1,2,3]\n</code></pre>\n\n<p>Now when we do this:</p>\n\n<pre><code>a[b-2] + b\n</code></pre>\n\n<p>It translates into: </p>\n\n<pre><code>a[4-2] + 4 \n\na[2] + 4\n</code></pre>\n\n<p>Now we check what number is in position 2 in array <strong>a</strong>. </p>\n\n<pre><code>3 + 4 = 7\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 8257082, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOqmS.jpg?s=128&g=1", "display_name": "Twistedben", "link": "https://stackoverflow.com/users/8257082/twistedben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 3, "accepted_answer_id": 44918066, "answer_count": 5, "score": 4, "last_activity_date": 1585739590, "creation_date": 1499234063, "last_edit_date": 1499247172, "question_id": 44917959, "link": "https://stackoverflow.com/questions/44917959/array-equation-explanation", "title": "Array equation explanation", "body": "<p>I would appreciate if someone could explain why the output of this code:</p>\n\n<pre><code>*a, b = [1, 2, 3, 4]\na[b-2] + b\n</code></pre>\n\n<p>is <code>7</code>. Could anyone please break it down line by line so I understand what's going on here? How does this become <code>7</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "utf-8", "seeding"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1499233830, "post_id": 44917605, "comment_id": 76811745, "body": "What version of Ruby do you use? Did you ensure that your editor saves the files in UTF-8? How does you seeds file for that model look like?"}, {"owner": {"reputation": 103, "user_id": 7847886, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8b5cea411639565dd7b2488e93b69079?s=128&d=identicon&r=PG", "display_name": "Bluespheal", "link": "https://stackoverflow.com/users/7847886/bluespheal"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1499234294, "post_id": 44917605, "comment_id": 76811946, "body": "added the seed to the question, I&#39;m using ruby 2.3.0, how do I ensure my editor saves in UTF-8? I always took this for granted until now."}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 7847886, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8b5cea411639565dd7b2488e93b69079?s=128&d=identicon&r=PG", "display_name": "Bluespheal", "link": "https://stackoverflow.com/users/7847886/bluespheal"}, "edited": false, "score": 0, "creation_date": 1499233683, "post_id": 44917724, "comment_id": 76811681, "body": "somehow none of them worked, still get the same error. this is really weird."}, {"owner": {"reputation": 3004, "user_id": 5830036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/B2b06.png?s=128&g=1", "display_name": "Mayur Shah", "link": "https://stackoverflow.com/users/5830036/mayur-shah"}, "reply_to_user": {"reputation": 103, "user_id": 7847886, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8b5cea411639565dd7b2488e93b69079?s=128&d=identicon&r=PG", "display_name": "Bluespheal", "link": "https://stackoverflow.com/users/7847886/bluespheal"}, "edited": false, "score": 0, "creation_date": 1499233934, "post_id": 44917724, "comment_id": 76811784, "body": "Add the following line to your config/application.rb:  <code>config.middleware.use &#39;Utf8Sanitizer&#39;</code>"}, {"owner": {"reputation": 103, "user_id": 7847886, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8b5cea411639565dd7b2488e93b69079?s=128&d=identicon&r=PG", "display_name": "Bluespheal", "link": "https://stackoverflow.com/users/7847886/bluespheal"}, "edited": false, "score": 0, "creation_date": 1499234496, "post_id": 44917724, "comment_id": 76812043, "body": "I get <code>NameError: undefined local variable or method &#39;config&#39; for main:Object</code> even after intalling the gem"}, {"owner": {"reputation": 3004, "user_id": 5830036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/B2b06.png?s=128&g=1", "display_name": "Mayur Shah", "link": "https://stackoverflow.com/users/5830036/mayur-shah"}, "reply_to_user": {"reputation": 103, "user_id": 7847886, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8b5cea411639565dd7b2488e93b69079?s=128&d=identicon&r=PG", "display_name": "Bluespheal", "link": "https://stackoverflow.com/users/7847886/bluespheal"}, "edited": false, "score": 0, "creation_date": 1499235300, "post_id": 44917724, "comment_id": 76812428, "body": "Add the utf8_sanitizer.rb to your Rails 3.2 project in app/middleware go through this link  <a href=\"https://gist.github.com/joost/ca4eda8f31655cf6095a\" rel=\"nofollow noreferrer\">gist.github.com/joost/ca4eda8f31655cf6095a</a>"}, {"owner": {"reputation": 103, "user_id": 7847886, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8b5cea411639565dd7b2488e93b69079?s=128&d=identicon&r=PG", "display_name": "Bluespheal", "link": "https://stackoverflow.com/users/7847886/bluespheal"}, "edited": false, "score": 0, "creation_date": 1499268940, "post_id": 44917724, "comment_id": 76836766, "body": "I&#39;ve returned to previous commits and now I get the error on those too, and apparently rails should always deal with this automatically unless I&#39;m using a version prior to 2.0, right now I&#39;m using 5.0, any idea why this is happening?"}], "tags": [], "owner": {"reputation": 3004, "user_id": 5830036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/B2b06.png?s=128&g=1", "display_name": "Mayur Shah", "link": "https://stackoverflow.com/users/5830036/mayur-shah"}, "is_accepted": false, "score": 0, "last_activity_date": 1499232966, "creation_date": 1499232966, "answer_id": 44917724, "question_id": 44917605, "link": "https://stackoverflow.com/questions/44917605/sudden-argumenterror-invalid-byte-sequence-in-utf-8-while-seeding/44917724#44917724", "title": "Sudden ArgumentError: invalid byte sequence in UTF-8 while seeding", "body": "<p>Not sure, It\u2019s just an invalid byte sequence in your request URL, try this one:</p>\n\n<p>add into your gemfile <code>gem 'rack-utf8_sanitizer'</code> or <code>gem 'handle_invalid_percent_encoding_requests'</code> or <code>gem 'utf8-cleaner'</code> after that run <code>bundle install</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 103, "user_id": 7847886, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8b5cea411639565dd7b2488e93b69079?s=128&d=identicon&r=PG", "display_name": "Bluespheal", "link": "https://stackoverflow.com/users/7847886/bluespheal"}, "is_accepted": false, "score": 3, "last_activity_date": 1499276705, "creation_date": 1499276705, "answer_id": 44932825, "question_id": 44917605, "link": "https://stackoverflow.com/questions/44917605/sudden-argumenterror-invalid-byte-sequence-in-utf-8-while-seeding/44932825#44932825", "title": "Sudden ArgumentError: invalid byte sequence in UTF-8 while seeding", "body": "<p>I found the cause of the problem, I was using <code>mount_uploaders</code> for a singular upload, making the upload an array and thus creating the error. changing it to <code>mount_uploader</code> was the solution, you really have to pay attention to these details, well, lesson learned. I'd advise to close this question unless it's somewhat useful for newcomers.</p>\n"}, {"tags": [], "owner": {"reputation": 351, "user_id": 2009652, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ab04284dee660708ce5c727fdf1f6958?s=128&d=identicon&r=PG", "display_name": "calyxofheld", "link": "https://stackoverflow.com/users/2009652/calyxofheld"}, "is_accepted": false, "score": 0, "last_activity_date": 1553455459, "creation_date": 1553455459, "answer_id": 55327629, "question_id": 44917605, "link": "https://stackoverflow.com/questions/44917605/sudden-argumenterror-invalid-byte-sequence-in-utf-8-while-seeding/55327629#55327629", "title": "Sudden ArgumentError: invalid byte sequence in UTF-8 while seeding", "body": "<p><code>mount_uploaders</code> expects an array, and so your seed.rb file should be set up to accept an array.</p>\n\n<p>It should look like this: <code>Model.create(images: [image1.jpg])</code></p>\n\n<p>Not like this: <code>Model.create(images: image1.jpg)</code></p>\n"}], "owner": {"reputation": 103, "user_id": 7847886, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8b5cea411639565dd7b2488e93b69079?s=128&d=identicon&r=PG", "display_name": "Bluespheal", "link": "https://stackoverflow.com/users/7847886/bluespheal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 775, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1553455459, "creation_date": 1499232332, "last_edit_date": 1499269394, "question_id": 44917605, "link": "https://stackoverflow.com/questions/44917605/sudden-argumenterror-invalid-byte-sequence-in-utf-8-while-seeding", "title": "Sudden ArgumentError: invalid byte sequence in UTF-8 while seeding", "body": "<p>While working on my Rails app I was experimenting with some way to crop images, I went from <a href=\"http://railscasts.com/episodes/182-cropping-images\" rel=\"nofollow noreferrer\">Rails Casts #182 </a>, back to what I previously had and then to this <a href=\"https://rubyplus.com/articles/3951-Cropping-Images-using-jCrop-jQuery-plugin-in-Rails-5\" rel=\"nofollow noreferrer\">blog post</a>, after finishing setting all up, I decided to restart my database and seed it, however I got <code>ArgumentError: invalid byte sequence in UTF-8</code> when I tried to seed my db.</p>\n\n<p>I've never encountered this error before and after some small research I found this is due to some characters not being able to be read by ruby, however, after skimming my code I've found no difference between what I had before I started with cropping images and after further examining I've yet to find the cause.</p>\n\n<p>It also doesn't help that I've yet to learn how to read and trace rails/rake bugs, here is what I get:</p>\n\n<pre><code>rails aborted!\nArgumentError: invalid byte sequence in UTF-8\n/usr/local/rvm/gems/ruby-2.3.0/gems/activesupport-5.0.1/lib/active_support/core_ext/object/blank.rb:118:in `==='\n/usr/local/rvm/gems/ruby-2.3.0/gems/activesupport-5.0.1/lib/active_support/core_ext/object/blank.rb:118:in `blank?'\n/usr/local/rvm/gems/ruby-2.3.0/gems/carrierwave-1.1.0/lib/carrierwave/sanitized_file.rb:131:in `is_path?'\n/usr/local/rvm/gems/ruby-2.3.0/gems/carrierwave-1.1.0/lib/carrierwave/sanitized_file.rb:97:in `size'\n/usr/local/rvm/gems/ruby-2.3.0/gems/carrierwave-1.1.0/lib/carrierwave/sanitized_file.rb:140:in `empty?'\n/usr/local/rvm/gems/ruby-2.3.0/gems/carrierwave-1.1.0/lib/carrierwave/uploader/cache.rb:120:in `cache!'\n/usr/local/rvm/gems/ruby-2.3.0/gems/carrierwave-1.1.0/lib/carrierwave/mounter.rb:44:in `block in cache'\n/usr/local/rvm/gems/ruby-2.3.0/gems/carrierwave-1.1.0/lib/carrierwave/mounter.rb:42:in `each'\n/usr/local/rvm/gems/ruby-2.3.0/gems/carrierwave-1.1.0/lib/carrierwave/mounter.rb:42:in `map'\n/usr/local/rvm/gems/ruby-2.3.0/gems/carrierwave-1.1.0/lib/carrierwave/mounter.rb:42:in `cache'\n/usr/local/rvm/gems/ruby-2.3.0/gems/carrierwave-1.1.0/lib/carrierwave/mount.rb:300:in `main_image='\n/usr/local/rvm/gems/ruby-2.3.0/gems/carrierwave-1.1.0/lib/carrierwave/orm/activerecord.rb:70:in `main_image='\n/usr/local/rvm/gems/ruby-2.3.0/gems/activemodel-5.0.1/lib/active_model/attribute_assignment.rb:46:in `public_send'\n/usr/local/rvm/gems/ruby-2.3.0/gems/activemodel-5.0.1/lib/active_model/attribute_assignment.rb:46:in `_assign_attribute'\n/usr/local/rvm/gems/ruby-2.3.0/gems/activemodel-5.0.1/lib/active_model/attribute_assignment.rb:40:in `block in _assign_attributes'\n/usr/local/rvm/gems/ruby-2.3.0/gems/activemodel-5.0.1/lib/active_model/attribute_assignment.rb:39:in `each'\n/usr/local/rvm/gems/ruby-2.3.0/gems/activemodel-5.0.1/lib/active_model/attribute_assignment.rb:39:in `_assign_attributes'\n/usr/local/rvm/gems/ruby-2.3.0/gems/activerecord-5.0.1/lib/active_record/attribute_assignment.rb:26:in `_assign_attributes'\n/usr/local/rvm/gems/ruby-2.3.0/gems/activemodel-5.0.1/lib/active_model/attribute_assignment.rb:33:in `assign_attributes'\n/usr/local/rvm/gems/ruby-2.3.0/gems/activerecord-5.0.1/lib/active_record/core.rb:319:in `initialize'\n/usr/local/rvm/gems/ruby-2.3.0/gems/activerecord-5.0.1/lib/active_record/inheritance.rb:65:in `new'\n/usr/local/rvm/gems/ruby-2.3.0/gems/activerecord-5.0.1/lib/active_record/inheritance.rb:65:in `new'\n/usr/local/rvm/gems/ruby-2.3.0/gems/activerecord-5.0.1/lib/active_record/persistence.rb:50:in `create!'\n/home/ubuntu/workspace/db/seeds.rb:60:in `&lt;top (required)&gt;'\n/usr/local/rvm/gems/ruby-2.3.0/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:287:in `load'\n/usr/local/rvm/gems/ruby-2.3.0/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:287:in `block in load'\n/usr/local/rvm/gems/ruby-2.3.0/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:259:in `load_dependency'\n/usr/local/rvm/gems/ruby-2.3.0/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:287:in `load'\n/usr/local/rvm/gems/ruby-2.3.0/gems/railties-5.0.1/lib/rails/engine.rb:549:in `load_seed'\n/usr/local/rvm/gems/ruby-2.3.0/gems/activerecord-5.0.1/lib/active_record/tasks/database_tasks.rb:268:in `load_seed'\n/usr/local/rvm/gems/ruby-2.3.0/gems/activerecord-5.0.1/lib/active_record/railties/databases.rake:196:in `block (2 levels) in &lt;top (required)&gt;'\n/usr/local/rvm/gems/ruby-2.3.0/gems/railties-5.0.1/lib/rails/commands/rake_proxy.rb:14:in `block in run_rake_task'\n/usr/local/rvm/gems/ruby-2.3.0/gems/railties-5.0.1/lib/rails/commands/rake_proxy.rb:11:in `run_rake_task'\n/usr/local/rvm/gems/ruby-2.3.0/gems/railties-5.0.1/lib/rails/commands/commands_tasks.rb:51:in `run_command!'\n/usr/local/rvm/gems/ruby-2.3.0/gems/railties-5.0.1/lib/rails/commands.rb:18:in `&lt;top (required)&gt;'\n/home/ubuntu/workspace/bin/rails:9:in `require'\n/home/ubuntu/workspace/bin/rails:9:in `&lt;top (required)&gt;'\n/usr/local/rvm/gems/ruby-2.3.0/gems/spring-1.7.2/lib/spring/client/rails.rb:28:in `load'\n/usr/local/rvm/gems/ruby-2.3.0/gems/spring-1.7.2/lib/spring/client/rails.rb:28:in `call'\n/usr/local/rvm/gems/ruby-2.3.0/gems/spring-1.7.2/lib/spring/client/command.rb:7:in `call'\n/usr/local/rvm/gems/ruby-2.3.0/gems/spring-1.7.2/lib/spring/client.rb:30:in `run'\n/usr/local/rvm/gems/ruby-2.3.0/gems/spring-1.7.2/bin/spring:49:in `&lt;top (required)&gt;'\n/usr/local/rvm/gems/ruby-2.3.0/gems/spring-1.7.2/lib/spring/binstub.rb:11:in `load'\n/usr/local/rvm/gems/ruby-2.3.0/gems/spring-1.7.2/lib/spring/binstub.rb:11:in `&lt;top (required)&gt;'\n/home/ubuntu/workspace/bin/spring:15:in `require'\n/home/ubuntu/workspace/bin/spring:15:in `&lt;top (required)&gt;'\nbin/rails:3:in `load'\nbin/rails:3:in `&lt;main&gt;'\nTasks: TOP =&gt; db:seed\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>My main question is where exactly could this error be happening? so far I've learned through experience that it could be either the <code>seeds.rb</code> or the model( in this case <code>event.rb</code>) however I don't see anything different and I had them both working before, I was even able to upload images and seed them no problem until I implemented and removed the code from the Rails Cast and implemented the code in the blog post, any direction into the solution will be of great help.</p>\n\n<p>Here is the seed from the model, it was working fine beforehand.</p>\n\n<pre><code>Event.create!(\n    name: \"  1\", \n    spanish_description: \"El mejor programa para este s\u00e1bado con los peques ! #kids #gratis #petfriendly. En Kuchitril. De 6 a 10 pm. #localmarket #tendencias #buenavibra. #corranlavoz!\",\n    english_description: \"El mejor programa para este s\u00e1bado con los peques ! #kids #gratis #petfriendly. En Kuchitril. De 6 a 10 pm. #localmarket #tendencias #buenavibra. #corranlavoz!\",\n    place_name: \"mamita's\",\n    place_type: \"beach club\",\n    address: \"Calle 28 Norte Mza 10, Lote 8, Centro\", \n    county: 'meh',\n    city: \"Playa del Carmen\",\n    state: \"Quintana Roo\",\n    postal_code: 77710,\n\n    user_id: 1,\n    main_image: File.open(File.join(Rails.root, 'test.jpg')),\n    sub_images: [File.open(File.join(Rails.root, 'chinchi.jpg'))],\n\n\n    eventdates_attributes:[{ \n      start_date: Time.now.in_time_zone(\"Eastern Time (US &amp; Canada)\"),\n      finish_date: Time.now.in_time_zone(\"Eastern Time (US &amp; Canada)\"),\n      start_hour: \"08:00am\",\n      finish_hour: \"11:00am\",\n    }],\n\n    tickets_attributes:[{ \n      ticket_type: \"Solo una vez\",\n      price: 100,\n      currency: \"mxn\",\n      quantity: 150,\n      description: \"Un boleto muy divertido!\"\n    }, { \n      ticket_type: \"Otra vez\",\n      price: 150,\n      currency: \"mxn\",\n      quantity: 150,\n      description: \"Un boleto muy divertido!\"\n    }]\n)\n</code></pre>\n\n<p><strong>IMPORTANT EDIT:</strong> So I decided to just return to previous commits just to not deal with this problem anymore, and for some reason the error keeps popping up, which leads me to believe there is a problem with the platform I'm using, which is Cloud9, I've also read this isn't a problem that should be happening on Rails 5.0</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "spree"], "answers": [{"comments": [{"owner": {"reputation": 512, "user_id": 6952495, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/oEQEL.jpg?s=128&g=1", "display_name": "RyanQuey", "link": "https://stackoverflow.com/users/6952495/ryanquey"}, "edited": false, "score": 0, "creation_date": 1562409836, "post_id": 44945509, "comment_id": 100369798, "body": "Is this still working as of 3.7.3 (the latest version)? I&#39;m not having success when I put this in my config file, and furthermore when I search the spree repository the only time that <code>allow_guest_checkout</code> seems to come up is in the setting definition file and in markdown files...which seems to mean spree sets the default for this setting but never uses it (?)"}], "tags": [], "owner": {"reputation": 329, "user_id": 8159914, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XApNb.jpg?s=128&g=1", "display_name": "Sowmiya Sangaiah", "link": "https://stackoverflow.com/users/8159914/sowmiya-sangaiah"}, "is_accepted": true, "score": 3, "last_activity_date": 1499334652, "creation_date": 1499334652, "answer_id": 44945509, "question_id": 44916852, "link": "https://stackoverflow.com/questions/44916852/disable-guest-checkout-spree/44945509#44945509", "title": "Disable guest checkout spree", "body": "<p>Use the <code>allow_guest_checkout</code> preference to change the default setting with checkout.</p>\n\n<p>You can set this preference false to disable guest checkout in spree.\nHope this helps.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 10497484, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4o88WTz1a_c/AAAAAAAAAAI/AAAAAAAAABQ/H2l6naEcyAc/photo.jpg?sz=128", "display_name": "ife brand", "link": "https://stackoverflow.com/users/10497484/ife-brand"}, "is_accepted": false, "score": 0, "last_activity_date": 1601212435, "creation_date": 1601212435, "answer_id": 64088853, "question_id": 44916852, "link": "https://stackoverflow.com/questions/44916852/disable-guest-checkout-spree/64088853#64088853", "title": "Disable guest checkout spree", "body": "<p>You can easily change this functionality by setting <code>allow_guest_checkout</code> to <code>false</code>.\nGo to config/initializers/spree.rb,\nthen insert</p>\n<blockquote>\n<p>config.allow_guest_checkout = false</p>\n</blockquote>\n<p>see <a href=\"https://github.com/spree/spree-guides/blob/master/content/developer/core/preferences.md\" rel=\"nofollow noreferrer\">https://github.com/spree/spree-guides/blob/master/content/developer/core/preferences.md</a></p>\n"}], "owner": {"reputation": 3502, "user_id": 2558108, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DUiG3.jpg?s=128&g=1", "display_name": "Qwertie", "link": "https://stackoverflow.com/users/2558108/qwertie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 493, "favorite_count": 0, "accepted_answer_id": 44945509, "answer_count": 2, "score": 1, "last_activity_date": 1601212435, "creation_date": 1499227709, "question_id": 44916852, "link": "https://stackoverflow.com/questions/44916852/disable-guest-checkout-spree", "title": "Disable guest checkout spree", "body": "<p>Is there any way to disable the functionality which allows guests to make orders in spree? I searched around but couldn't seem to see anything, also no settings in the admin panel.</p>\n\n<p>Is there any proper way to do this or will I have to go through the code and rip stuff out?</p>\n"}, {"tags": ["ruby", "google-api", "google-drive-api", "google-oauth", "google-api-ruby-client"], "comments": [{"owner": {"reputation": 341, "user_id": 3125926, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t473y.jpg?s=128&g=1", "display_name": "Shailendra", "link": "https://stackoverflow.com/users/3125926/shailendra"}, "edited": false, "score": 0, "creation_date": 1499498515, "post_id": 44916826, "comment_id": 76942091, "body": "What is wrong in my code?"}], "answers": [{"comments": [{"owner": {"reputation": 341, "user_id": 3125926, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t473y.jpg?s=128&g=1", "display_name": "Shailendra", "link": "https://stackoverflow.com/users/3125926/shailendra"}, "edited": false, "score": 0, "creation_date": 1499245242, "post_id": 44920062, "comment_id": 76818715, "body": "Thanks for reply.I have shared my complete code , can you suggest what I should change in code?"}], "tags": [], "owner": {"reputation": 70965, "user_id": 1841839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZyKjr.png?s=128&g=1", "display_name": "DaImTo", "link": "https://stackoverflow.com/users/1841839/daimto"}, "is_accepted": false, "score": 1, "last_activity_date": 1499240947, "creation_date": 1499240947, "answer_id": 44920062, "question_id": 44916826, "link": "https://stackoverflow.com/questions/44916826/unable-to-upload-and-image-in-googledrive-using-goolge-ruby-api/44920062#44920062", "title": "Unable to upload and image in googledrive using goolge ruby API", "body": "<blockquote>\n  <p>\"missing authorization code\"</p>\n</blockquote>\n\n<p>Means that you have not properly authenticated your code.</p>\n\n<p>You should check the <a href=\"https://developers.google.com/api-client-library/ruby/guide/aaa_oauth\" rel=\"nofollow noreferrer\">Ouath2</a> documentation for the client library.  Get one of the samples there working then you should be able to alter it for Drive without to much trouble.</p>\n\n<pre><code># AdSense Management API command-line sample.\nrequire 'google/apis/adsense_v1_4'\nrequire 'google/api_client/client_secrets'\nrequire 'google/api_client/auth/installed_app'\nrequire 'google/api_client/auth/storage'\nrequire 'google/api_client/auth/storages/file_store'\nrequire 'logger'\nrequire 'json'\n\nCREDENTIAL_STORE_FILE = \"#{$0}-oauth2.json\"\n\n# Handles authentication and loading of the API.\ndef setup\n  log_file = File.open('adsense.log', 'a+')\n  log_file.sync = true\n  logger = Logger.new(log_file)\n  logger.level = Logger::DEBUG\n\n  adsense = Google::Apis::AdsenseV1_4::AdSenseService.new\n\n  # Stores auth credentials in a file, so they survive multiple runs\n  # of the application. This avoids prompting the user for authorization every\n  # time the access token expires, by remembering the refresh token.\n  # Note: FileStorage is not suitable for multi-user applications.\n  storage = Google::APIClient::Storage.new(\n    Google::APIClient::FileStore.new(CREDENTIAL_STORE_FILE))\n  adsense.authorization = storage.authorize\n  if storage.authorization.nil?\n    client_secrets = Google::APIClient::ClientSecrets.load\n    # The InstalledAppFlow is a helper class to handle the OAuth 2.0 installed\n    # application flow, which ties in with Stroage to store credentials\n    # between runs.\n    flow = Google::APIClient::InstalledAppFlow.new(\n      :client_id =&gt; client_secrets.client_id,\n      :client_secret =&gt; client_secrets.client_secret,\n      :scope =&gt; ['https://www.googleapis.com/auth/adsense.readonly']\n    )\n    adsense.authorization = flow.authorize(storage)\n  end\n  return adsense\nend\n\n# Generates a report for the default account.\ndef generate_report(adsense)\n  report = adsense.generate_report(start_date: '2011-01-01', end_date: '2011-08-31',\n                                   metric: %w(PAGE_VIEWS AD_REQUESTS AD_REQUESTS_COVERAGE\n                                              CLICKS AD_REQUESTS_CTR COST_PER_CLICK\n                                              AD_REQUESTS_RPM EARNINGS),\n                                   dimension: %w(DATE),\n                                   sort: %w(+DATE))\n\n  # Display headers.\n  report.headers.each do |header|\n    print '%25s' % header.name\n  end\n  puts\n\n  # Display results.\n  report.rows.each do |row|\n    row.each do |column|\n      print '%25s' % column\n    end\n    puts\n  end\nend\n\n\nif __FILE__ == $0\n  adsense = setup()\n  generate_report(adsense)\nend\n</code></pre>\n"}], "owner": {"reputation": 341, "user_id": 3125926, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t473y.jpg?s=128&g=1", "display_name": "Shailendra", "link": "https://stackoverflow.com/users/3125926/shailendra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1499240977, "creation_date": 1499227527, "last_edit_date": 1499240977, "question_id": 44916826, "link": "https://stackoverflow.com/questions/44916826/unable-to-upload-and-image-in-googledrive-using-goolge-ruby-api", "title": "Unable to upload and image in googledrive using goolge ruby API", "body": "<p>I am first time using Google APIs. I am unable to upload any file in Google Drive. I tried below complete code.</p>\n\n<pre><code>require 'google/apis/drive_v2'\nrequire 'google/api_client/client_secrets'\n\n# I downloaded 'client_secrets.json' file from 'https://console.developers.google.com/projectselector/apis/library' and put in lib folder\n\nCLIENT_SECRETS_FILE = \"client_secrets.json\"\nclient_secrets_filepath = File.expand_path(CLIENT_SECRETS_FILE ,\"#{File.dirname(__FILE__)}/../../lib/\")\n\n CLIENT_SECRETS = Google::APIClient::ClientSecrets.load(client_secrets_filepath)\n authorization = CLIENT_SECRETS.to_authorization\n\n Drive = Google::Apis::DriveV2\n @drive = Drive::DriveService.new\n @drive.authorization = authorization\n\nfile_path = File.expand_path(@ScreenShot_dir)+'/'+\"imageName\" +'.png'\n\nmetadata = Drive::File.new(title: 'My document')\nmetadata = @drive.insert_file(metadata, upload_source: file_path, content_type: 'image/png')\n</code></pre>\n\n<p>It is not uploading the file in drive but giving an error like \"missing authorization code\". </p>\n\n<p>my client_secrets.json look like below:</p>\n\n<pre><code>{\"installed\":{\n\"client_id\":\"&lt;some digits&gt;.apps.googleusercontent.com\",\n\"project_id\":\"&lt;projectname&gt;\",\"auth_uri\":\"https://accounts.google.com/o/oauth2/auth\",\n\"token_uri\":\"https://accounts.google.com/o/oauth2/token\",\n\"auth_provider_x509_cert_url\":\"https://www.googleapis.com/oauth2/v1/certs\",\n\"client_secret\":\"&lt;secret key&gt;\",\n\"redirect_uris\":[\"urn:ietf:wg:oauth:2.0:oob\",\"http://localhost\"]}}\n</code></pre>\n\n<p>I am not sure what I am missing in it. Appreciate any help on this issue.  </p>\n"}, {"tags": ["ruby", "regex", "chef-infra", "chef-solo"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1499225331, "post_id": 44916569, "comment_id": 76809183, "body": "With <code>=</code> you&#39;re assigning, try changing it to <code>==</code> to compare the left value with the right one."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1499225397, "post_id": 44916569, "comment_id": 76809195, "body": "And where does <code>match</code> come from?"}, {"owner": {"reputation": 8205, "user_id": 373784, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2f107ff9d44f2d9968e425689724383f?s=128&d=identicon&r=PG", "display_name": "Mark Estrada", "link": "https://stackoverflow.com/users/373784/mark-estrada"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1499229623, "post_id": 44916569, "comment_id": 76810232, "body": "I have edited the codeline...sorry I made a mistake, removing code clutter... But still cannot match it."}], "answers": [{"comments": [{"owner": {"reputation": 8205, "user_id": 373784, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2f107ff9d44f2d9968e425689724383f?s=128&d=identicon&r=PG", "display_name": "Mark Estrada", "link": "https://stackoverflow.com/users/373784/mark-estrada"}, "edited": false, "score": 0, "creation_date": 1499230522, "post_id": 44916841, "comment_id": 76810495, "body": "I have tried adding this in my Chef Ruby block &quot;require &#39;nokogiri&#39;&quot; but it says cannot load file &#39;nokogiri&#39;.  I used chef-solo 12, just dont know why and how to do it properly."}, {"owner": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "reply_to_user": {"reputation": 8205, "user_id": 373784, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2f107ff9d44f2d9968e425689724383f?s=128&d=identicon&r=PG", "display_name": "Mark Estrada", "link": "https://stackoverflow.com/users/373784/mark-estrada"}, "edited": false, "score": 0, "creation_date": 1499231818, "post_id": 44916841, "comment_id": 76810930, "body": "Add <code>chef_gem &quot;nokogiri&quot;</code> before. Not sure if chef ships with any other XML parser already."}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1499237468, "post_id": 44916841, "comment_id": 76813624, "body": "We ship nokogiri in most of the Chef installer packages because it is hell to install. You really don&#39;t want to try and use <code>chef_gem</code>, it will either be slow or broken or both."}, {"owner": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "edited": false, "score": 0, "creation_date": 1499238238, "post_id": 44916841, "comment_id": 76814083, "body": "So a <code>require &#39;nokogiri&#39;</code> should have worked, right?"}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1499239177, "post_id": 44916841, "comment_id": 76814624, "body": "Assuming an omnibus installer, yes, depending on the version of Chef and OS."}, {"owner": {"reputation": 8205, "user_id": 373784, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2f107ff9d44f2d9968e425689724383f?s=128&d=identicon&r=PG", "display_name": "Mark Estrada", "link": "https://stackoverflow.com/users/373784/mark-estrada"}, "edited": false, "score": 0, "creation_date": 1499241575, "post_id": 44916841, "comment_id": 76816283, "body": "Unfortunately not.. I have this version Chef-Solo: 12.6.0. In a ruby block where I add require &#39;nokogiri&#39;, I am encountering the error cannot load file."}], "tags": [], "owner": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "is_accepted": false, "score": 2, "last_activity_date": 1499227656, "creation_date": 1499227656, "answer_id": 44916841, "question_id": 44916569, "link": "https://stackoverflow.com/questions/44916569/chef-read-file-pattern-matching/44916841#44916841", "title": "Chef Read File Pattern Matching", "body": "<p>Parsing XML using Regex is usually a bad idea. You might want to use a Ruby XML parser, like <a href=\"http://www.rubydoc.info/github/sparklemotion/nokogiri\" rel=\"nofollow noreferrer\">Nokogiri</a>. </p>\n"}], "owner": {"reputation": 8205, "user_id": 373784, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2f107ff9d44f2d9968e425689724383f?s=128&d=identicon&r=PG", "display_name": "Mark Estrada", "link": "https://stackoverflow.com/users/373784/mark-estrada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 611, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1499229573, "creation_date": 1499225222, "last_edit_date": 1499229573, "question_id": 44916569, "link": "https://stackoverflow.com/questions/44916569/chef-read-file-pattern-matching", "title": "Chef Read File Pattern Matching", "body": "<p>I have a text/xml file that contains the following data</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?&gt;\n&lt;GovernmentPolicy&gt;\n    &lt;name&gt;Sample Policy&lt;/name&gt;\n    &lt;description&gt;Policy set during enrollment&lt;/description&gt;\n    &lt;Resources&gt;\n        &lt;ResourceID&gt;7619f915-420d-4220-993e-1d3f1bee0ba4&lt;/ResourceID&gt;\n    &lt;/Resources&gt;\n&lt;GovernmentPolicy&gt;\n</code></pre>\n\n<p>I wanted to read the following in my chef recipe so I have this. I wanted to get the value \"7619f915-420d-4220-993e-1d3f1bee0ba4\"\nso I ran it thru my regexp. I am just not sure why I cannot match this.</p>\n\n<pre><code>ruby_block \"Read GovernmentPolicy\" do\n  block do\n    resourceID = \"\"\n    governmentpolicies = \"/temp/governmentpolicies.xml\"\n    if File.exists?(\"#{governmentpolicies}\")\n      f = File.open(\"#{governmentpolicies}\", 'r')\n      pattern = /^\\&lt;ResourceID\\&gt;/\n      f.each {|line|    \n        if pattern.match(line)\n            puts(\"***************MATCH FOUND*******************\")\n            puts line\n\n        end\n      }\n      f.close\n      end\n  end\nend\n</code></pre>\n\n<p>Any hints?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "google-cloud-pubsub"], "comments": [{"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 1, "creation_date": 1499221381, "post_id": 44915944, "comment_id": 76808424, "body": "Google&#39;s pub/sub seems to use a REST API for everything (push, pull, publish). It doesn&#39;t seem to use Websockets and can be implemented without ActionCable. Google has a <a href=\"https://googlecloudplatform.github.io/google-cloud-ruby/#/docs/google-cloud-pubsub/v0.25.0/google/cloud/pubsub\" rel=\"nofollow noreferrer\">Ruby client</a> to help you."}, {"owner": {"reputation": 911, "user_id": 1965402, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/133c6877c81d2c27d8a94fea01fea00e?s=128&d=identicon&r=PG", "display_name": "Francis Malloch", "link": "https://stackoverflow.com/users/1965402/francis-malloch"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1499222168, "post_id": 44915944, "comment_id": 76808582, "body": "@Myst I believe you can subscribe to it without polling?"}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1499222338, "post_id": 44915944, "comment_id": 76808617, "body": "Yes, you can. If you subscribe for Push notifications, the Google pub/sub service will send an HTTP request to your application. You just need to implement the route. I think Google has that in their docs somewhere, but you&#39;ll need to search for it. No Websockets are involved."}, {"owner": {"reputation": 911, "user_id": 1965402, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/133c6877c81d2c27d8a94fea01fea00e?s=128&d=identicon&r=PG", "display_name": "Francis Malloch", "link": "https://stackoverflow.com/users/1965402/francis-malloch"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1499283713, "post_id": 44915944, "comment_id": 76845383, "body": "@Myst Okay, I understand, do you think its possible to create a module which interfaces with ActionCable? For example, make it so I don&#39;t need to specify routes but just specify the settings for ActionCable?"}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1499288630, "post_id": 44915944, "comment_id": 76848113, "body": "I don&#39;t think so... although maybe someone wrote a gem for that. I didn&#39;t search. Since these are two separate pub/sub systems, with slightly different semantics (i.e., no <code>subchannel</code>), you will need to write a bridge between them. It seems quite simple to write, for every message received from google, parse the channel and publish to ActiveCable. For every message you want to push, format the channel and push it using the google service (I think it will come back through the route google uses for pushing messages). Each Ruby process should probably subscribe as a google client."}], "owner": {"reputation": 911, "user_id": 1965402, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/133c6877c81d2c27d8a94fea01fea00e?s=128&d=identicon&r=PG", "display_name": "Francis Malloch", "link": "https://stackoverflow.com/users/1965402/francis-malloch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 552, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1499219525, "creation_date": 1499219525, "question_id": 44915944, "link": "https://stackoverflow.com/questions/44915944/actioncable-google-pub-sub", "title": "ActionCable + Google Pub/Sub", "body": "<p>I am deploying my Ruby on Rails web app to Google cloud and I would like to know if it could be possible to create a module that allows ActionCable to use Googles Pub/Sub(<a href=\"https://cloud.google.com/pubsub/docs/overview\" rel=\"nofollow noreferrer\" title=\"Link\">Link</a>) instead of Redis or Postgres? ActionCable would publish and subscribe to events within Google Pub/Sub.</p>\n\n<p>If you think it could be possible, could you point me in the right direction of a few resources on how I could develop such an extension for Ruby on Rails?</p>\n"}, {"tags": ["ruby", "amazon-web-services", "amazon-ec2", "sdk", "elastic-ip"], "comments": [{"owner": {"reputation": 379, "user_id": 7328096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ahAFE.png?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/7328096/ali"}, "edited": false, "score": 0, "creation_date": 1499218495, "post_id": 44915762, "comment_id": 76807884, "body": "The change in v2 ruby sdk was the way you construct client like  <code>ec2=Aws::EC2::Client.new(      access_key_id: creds[&#39;access_key_id&#39;],      secret_access_key: creds[&#39;secret_access_key&#39;]   )</code>"}, {"owner": {"reputation": 3514, "user_id": 1794802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9404788dd9ecd74e3070ec684adbf439?s=128&d=identicon&r=PG", "display_name": "strongjz", "link": "https://stackoverflow.com/users/1794802/strongjz"}, "edited": false, "score": 0, "creation_date": 1499343529, "post_id": 44915762, "comment_id": 76872308, "body": "What is the issue you are having when you use that method? Did you allocated the elastic ip as well?"}], "answers": [{"tags": [], "owner": {"reputation": 127, "user_id": 4559663, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NB6G_b8nD3s/AAAAAAAAAAI/AAAAAAAAAVI/JP0eQUa6kXY/photo.jpg?sz=128", "display_name": "Raushan", "link": "https://stackoverflow.com/users/4559663/raushan"}, "is_accepted": false, "score": 0, "last_activity_date": 1581318428, "last_edit_date": 1581318428, "creation_date": 1581317567, "answer_id": 60145384, "question_id": 44915762, "link": "https://stackoverflow.com/questions/44915762/how-to-assign-an-ip-address-to-an-ec2-instance-using-the-v2-ruby-sdk/60145384#60145384", "title": "how to assign an ip address to an ec2 instance using the v2 ruby sdk", "body": "<p>This is the code in Ruby with aws Ruby SDK v1. I am fetching allocation id of the Elastic IP and passing it to associate_elastic_ip method of instance object.</p>\n\n<pre><code>require 'aws-sdk-v1'\nrequire 'json'\n\ntemp_ec2 = AWS::EC2.new\ninstance = temp_ec2.instances[\"i-8392ld62828f0c97\"]\nelasticIp = AWS::EC2::ElasticIp.new(\"49.234.122.12\")\nif elasticIp.exists?\n           begin\n                  instance.associate_elastic_ip(elasticIp.allocation_id)\n              puts \"[Success]EIP has been associated successfully....\"\n           rescue Exception =&gt; e\n                  puts \"There is an exception in allocating elastic ip and the exception is..#{e}\"\n           end\nelse\n           puts \"[Failed]EIP doesn't exist in the account.\"\nend\n</code></pre>\n"}], "owner": {"reputation": 4855, "user_id": 3618156, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b3e1907a7f15ed006abc8ad406cf40fe?s=128&d=identicon&r=PG&f=1", "display_name": "american-ninja-warrior", "link": "https://stackoverflow.com/users/3618156/american-ninja-warrior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 147, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1581318428, "creation_date": 1499217602, "question_id": 44915762, "link": "https://stackoverflow.com/questions/44915762/how-to-assign-an-ip-address-to-an-ec2-instance-using-the-v2-ruby-sdk", "title": "how to assign an ip address to an ec2 instance using the v2 ruby sdk", "body": "<p>how to assign an ip address to an ec2 instance using the v2 ruby sdk\nafter the instance has been created.</p>\n\n<p>I tried the</p>\n\n<pre><code>ec2.associate_address()\n</code></pre>\n\n<p>method (mentioned in <a href=\"http://docs.aws.amazon.com/sdk-for-ruby/v2/developer-guide/ec2-using-elastic-ip-addresses.html\" rel=\"nofollow noreferrer\">http://docs.aws.amazon.com/sdk-for-ruby/v2/developer-guide/ec2-using-elastic-ip-addresses.html</a>) but that seems to be a v1 method</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "phantomjs", "capybara"], "comments": [{"owner": {"reputation": 47165, "user_id": 5053002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a9edfd2614014563162586c1b0697?s=128&d=identicon&r=PG", "display_name": "Jaromanda X", "link": "https://stackoverflow.com/users/5053002/jaromanda-x"}, "edited": false, "score": 0, "creation_date": 1499216852, "post_id": 44915507, "comment_id": 76807621, "body": "no, <code>forEach</code> does and should return undefined - not all implementations of <code>NodeList</code> (what querySelectorAll returns) have a <code>forEach</code> method though - see <a href=\"https://developer.mozilla.org/en/docs/Web/API/NodeList#Browser_compatibility\" rel=\"nofollow noreferrer\">developer.mozilla.org/en/docs/Web/API/&hellip;</a>"}, {"owner": {"reputation": 13, "user_id": 1006153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dbea9e60ecd5ce0f93b33a97bb8bccd?s=128&d=identicon&r=PG", "display_name": "user1006153", "link": "https://stackoverflow.com/users/1006153/user1006153"}, "reply_to_user": {"reputation": 47165, "user_id": 5053002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a9edfd2614014563162586c1b0697?s=128&d=identicon&r=PG", "display_name": "Jaromanda X", "link": "https://stackoverflow.com/users/5053002/jaromanda-x"}, "edited": false, "score": 0, "creation_date": 1499219316, "post_id": 44915507, "comment_id": 76808014, "body": "I thought PhantomJS is almost same as Chrome. But I&#39;ve got it&#39;s not correct.Thank you!"}, {"owner": {"reputation": 47165, "user_id": 5053002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a9edfd2614014563162586c1b0697?s=128&d=identicon&r=PG", "display_name": "Jaromanda X", "link": "https://stackoverflow.com/users/5053002/jaromanda-x"}, "edited": false, "score": 0, "creation_date": 1499220188, "post_id": 44915507, "comment_id": 76808186, "body": "something like <code>[].forEach.call(form.querySelectorAll(&#39;input&#39;), function(e){ e.disabled = false });</code>"}, {"owner": {"reputation": 13, "user_id": 1006153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dbea9e60ecd5ce0f93b33a97bb8bccd?s=128&d=identicon&r=PG", "display_name": "user1006153", "link": "https://stackoverflow.com/users/1006153/user1006153"}, "reply_to_user": {"reputation": 47165, "user_id": 5053002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a9edfd2614014563162586c1b0697?s=128&d=identicon&r=PG", "display_name": "Jaromanda X", "link": "https://stackoverflow.com/users/5053002/jaromanda-x"}, "edited": false, "score": 0, "creation_date": 1499227638, "post_id": 44915507, "comment_id": 76809696, "body": "Thanks. I will try it!"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 1006153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dbea9e60ecd5ce0f93b33a97bb8bccd?s=128&d=identicon&r=PG", "display_name": "user1006153", "link": "https://stackoverflow.com/users/1006153/user1006153"}, "edited": false, "score": 0, "creation_date": 1499218996, "post_id": 44915713, "comment_id": 76807970, "body": "I got it! I will try it another way or use polyfill. Thanks!"}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 3, "last_activity_date": 1499217019, "creation_date": 1499217019, "answer_id": 44915713, "question_id": 44915507, "link": "https://stackoverflow.com/questions/44915507/typeerror-undefined-is-not-a-constructor-with-capybara-phantomjs/44915713#44915713", "title": "&quot;TypeError: undefined is not a constructor&quot; with Capybara (PhantomJS)", "body": "<p><code>forEach</code> is an ES 5.1/6 method, but the current version of PhantomJS only supports up to ES 5.  You will need to either polyfill forEach or rewrite your code using ES 5 compatible methods.</p>\n"}], "owner": {"reputation": 13, "user_id": 1006153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dbea9e60ecd5ce0f93b33a97bb8bccd?s=128&d=identicon&r=PG", "display_name": "user1006153", "link": "https://stackoverflow.com/users/1006153/user1006153"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 944, "favorite_count": 0, "accepted_answer_id": 44915713, "answer_count": 1, "score": 1, "last_activity_date": 1499239103, "creation_date": 1499214503, "last_edit_date": 1499239103, "question_id": 44915507, "link": "https://stackoverflow.com/questions/44915507/typeerror-undefined-is-not-a-constructor-with-capybara-phantomjs", "title": "&quot;TypeError: undefined is not a constructor&quot; with Capybara (PhantomJS)", "body": "<p>I have a JavaScript error with Capybara feature test.\nBut the error is not occurring with normal chrome browser.\nThe JavaScript code is below.</p>\n\n<pre><code>document.addEventListener('DOMContentLoaded', function(){\n  var enable = function(){\n    document.querySelectorAll('input').forEach(function(e){ e.disabled = false });\n  }\n  /* do something ..*/\n  enable();\n}\n</code></pre>\n\n<p>The error message is <code>TypeError: undefined is not a constructor (evaluating 'form.querySelectorAll('input').forEach(function(e){ e.disabled = false })')</code>.\nI think it is related to <code>forEach</code> returns undefined.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 8256239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3091db16430c0c10e256dfe2460a608?s=128&d=identicon&r=PG&f=1", "display_name": "user8256239", "link": "https://stackoverflow.com/users/8256239/user8256239"}, "edited": false, "score": 0, "creation_date": 1499216507, "post_id": 44915583, "comment_id": 76807560, "body": "thank you. almost there. you&#39;right just left to know how to associate the has_model model on belonged model create view"}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 1, "last_activity_date": 1499215477, "creation_date": 1499215477, "answer_id": 44915583, "question_id": 44915436, "link": "https://stackoverflow.com/questions/44915436/how-make-association-on-rails-4-and-up/44915583#44915583", "title": "How make association on Rails 4 and Up?", "body": "<p>In your Location you define a <code>has_many :users</code> and then you <code>accepts_nested_attributes_for :user, allow_destroy: true</code> (:users vs :user) so it's looking for a different association than the you created.</p>\n\n<p>It also seems like you're creating a user form which will go through the User model to try and create locations but your models are set up such that you create users through a location (so your model doesn't match your view).</p>\n\n<p>I believe what you're wanting to do would be to change your models to</p>\n\n<h2>User Controller</h2>\n\n<pre><code>def user_params\n  ...location_attributes:[:id, :country, :state])\nend\n</code></pre>\n\n<h2>User Model</h2>\n\n<pre><code>belongs_to :location\n\naccepts_nested_attributes_for :location, allow_destroy: true\n</code></pre>\n\n<h2>Location Model</h2>\n\n<pre><code>has_many :users\n</code></pre>\n\n<p>and that <em>should</em> work. (I haven't done nested forms in years, but looking at the wiki for <a href=\"https://github.com/plataformatec/simple_form/wiki/Nested-Models\" rel=\"nofollow noreferrer\">Simple Form</a> which you appear to be using, this should do it). If that doesn't work, it should at least be a step in the right direction.</p>\n"}], "owner": {"reputation": 25, "user_id": 8256239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3091db16430c0c10e256dfe2460a608?s=128&d=identicon&r=PG&f=1", "display_name": "user8256239", "link": "https://stackoverflow.com/users/8256239/user8256239"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 44915583, "answer_count": 1, "score": 1, "last_activity_date": 1499215477, "creation_date": 1499213865, "question_id": 44915436, "link": "https://stackoverflow.com/questions/44915436/how-make-association-on-rails-4-and-up", "title": "How make association on Rails 4 and Up?", "body": "<p>After created the association on user new view and after created the user</p>\n\n<p>the Location did not associated with the user, and in Console show</p>\n\n<blockquote>\n  <p>irb(main):001:0> Location.last ArgumentError: No association found for\n  name `user'. Has it been defined yet?</p>\n</blockquote>\n\n<p>I'm new on Rails 4 and instead of use attr_accessible  i placed the location_attributes on strong params\nto see if solve, but did not solved.</p>\n\n<p>someone have a hint to spare?</p>\n\n<pre><code> def user_params\n      params.require(:user).permit(:name, :email,:location_id, :password, :password_confirmation, :slug, \n                                   location_attributes:[:id, :location_id])\n    end\n</code></pre>\n\n<p><strong>User Model</strong></p>\n\n<pre><code>belongs_to :location\n</code></pre>\n\n<p><strong>Location Model</strong></p>\n\n<pre><code>  has_many :users\n\n  accepts_nested_attributes_for :user, allow_destroy: true\n</code></pre>\n\n<p><strong>User new view</strong></p>\n\n<pre><code>&lt;%= simple_form_for @user do |f| %&gt;\n\n  &lt;%= f.input :name, label: 'Your Name please', error: 'Name is mandatory' %&gt;\n  &lt;%= f.input :email, placeholder: 'user@domain.com' %&gt;\n    &lt;%= f.input :password, hint: 'No special characters.' %&gt;\n\n    &lt;%= f.input :password_confirmation, inline_label: 'Yes, remember me' %&gt;\n\n\n\n&lt;%= f.simple_fields_for :location do |l| %&gt;\n\n      &lt;%= l.input :country, label: \"Country\", collection: CountryStateSelect.countries_collection %&gt;\n&lt;%= l.input :state, CountryStateSelect.state_options(label: \"State / Province\", form: f, field_names: { :country =&gt; :country, :state =&gt; :state } ) %&gt;\n\n\n      &lt;% end %&gt;\n    &lt;%= f.button :submit %&gt;\n&lt;% end \n</code></pre>\n\n<p>%></p>\n"}, {"tags": ["ruby", "amazon-web-services", "amazon-ec2", "sdk"], "answers": [{"tags": [], "owner": {"reputation": 66, "user_id": 8022010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uXRzu.jpg?s=128&g=1", "display_name": "Corey Quinn", "link": "https://stackoverflow.com/users/8022010/corey-quinn"}, "is_accepted": true, "score": 0, "last_activity_date": 1499216406, "creation_date": 1499216406, "answer_id": 44915662, "question_id": 44915376, "link": "https://stackoverflow.com/questions/44915376/was-ruby-sdk-how-to-find-instances-without-missing-name-tag/44915662#44915662", "title": "was ruby sdk: how to find instances without missing name tag", "body": "<p>Try iterating over all instances the API returns, with an <code>unless</code> to catch instances that don't have the tag you're seeking. Operate within that conditional. </p>\n"}], "owner": {"reputation": 4855, "user_id": 3618156, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b3e1907a7f15ed006abc8ad406cf40fe?s=128&d=identicon&r=PG&f=1", "display_name": "american-ninja-warrior", "link": "https://stackoverflow.com/users/3618156/american-ninja-warrior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 44915662, "answer_count": 1, "score": 0, "last_activity_date": 1499216406, "creation_date": 1499213084, "question_id": 44915376, "link": "https://stackoverflow.com/questions/44915376/was-ruby-sdk-how-to-find-instances-without-missing-name-tag", "title": "was ruby sdk: how to find instances without missing name tag", "body": "<p>To list ec2 instances without a name tag, I tried</p>\n\n<pre><code># resource interface\nec2 = Aws::EC2::Resource.new\nec2.instances(filters:[{name:'tag:Name', values:[]}]).each do |instance|\n   # ...\nend\n</code></pre>\n\n<p>Any idea how to do this?</p>\n\n<p>[1] <a href=\"https://forums.aws.amazon.com/thread.jspa?messageID=740190\" rel=\"nofollow noreferrer\">https://forums.aws.amazon.com/thread.jspa?messageID=740190</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1499211411, "post_id": 44915210, "comment_id": 76806630, "body": "What if the user is not found?"}], "answers": [{"tags": [], "owner": {"reputation": 2090, "user_id": 5113690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cbKBX.png?s=128&g=1", "display_name": "m3characters", "link": "https://stackoverflow.com/users/5113690/m3characters"}, "is_accepted": false, "score": 0, "last_activity_date": 1499211800, "creation_date": 1499211800, "answer_id": 44915259, "question_id": 44915210, "link": "https://stackoverflow.com/questions/44915210/how-can-i-access-an-objects-property-in-ruby/44915259#44915259", "title": "How can I access an object&#39;s property in Ruby", "body": "<p>you need to add a check to see if you found an user</p>\n\n<pre><code>if user.is_a?(User) &amp;&amp; user.is_mentor\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 425, "user_id": 5208786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/814ca785c7fbfd50618c6af8fa514697?s=128&d=identicon&r=PG&f=1", "display_name": "Saketram Durbha", "link": "https://stackoverflow.com/users/5208786/saketram-durbha"}, "reply_to_user": {"reputation": 3502, "user_id": 2558108, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DUiG3.jpg?s=128&g=1", "display_name": "Qwertie", "link": "https://stackoverflow.com/users/2558108/qwertie"}, "edited": false, "score": 0, "creation_date": 1499444765, "post_id": 44915302, "comment_id": 76926376, "body": "Yup! That is a shorthand way to write the if statement I wrote. The <code>&amp;.</code> is called the safe navigation operator in Ruby, and it was introduced in ruby 2.3.0."}], "tags": [], "owner": {"reputation": 425, "user_id": 5208786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/814ca785c7fbfd50618c6af8fa514697?s=128&d=identicon&r=PG&f=1", "display_name": "Saketram Durbha", "link": "https://stackoverflow.com/users/5208786/saketram-durbha"}, "is_accepted": true, "score": 2, "last_activity_date": 1499212253, "creation_date": 1499212253, "answer_id": 44915302, "question_id": 44915210, "link": "https://stackoverflow.com/questions/44915210/how-can-i-access-an-objects-property-in-ruby/44915302#44915302", "title": "How can I access an object&#39;s property in Ruby", "body": "<p>You need to check to see if there was actually a user that was found with the email <code>params['email']</code>:</p>\n\n<pre><code>user = User.find_by_email params['email']\n\nif user.present? &amp;&amp; user.is_mentor?\n    # do something\nend\n</code></pre>\n\n<p>Here, <code>user.present?</code> checks to see if <code>user</code> is not equal to nil, which is what it would be if no user was found.</p>\n\n<p>Also, the <code>?</code> at the end of a method call indicates that the method is returning a boolean value. You should include the question mark in the method call as well if the method is user defined:</p>\n\n<pre><code>def is_mentor?\n    # do something\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4457, "user_id": 5281693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5fN4R.jpg?s=128&g=1", "display_name": "Alexander Luna", "link": "https://stackoverflow.com/users/5281693/alexander-luna"}, "is_accepted": false, "score": 0, "last_activity_date": 1499212511, "creation_date": 1499212511, "answer_id": 44915326, "question_id": 44915210, "link": "https://stackoverflow.com/questions/44915210/how-can-i-access-an-objects-property-in-ruby/44915326#44915326", "title": "How can I access an object&#39;s property in Ruby", "body": "<p>You just have to check that the user exists first:</p>\n\n<pre><code>if user &amp;&amp; user.is_mentor?\n    # do something\nend\n</code></pre>\n\n<p>user will be nil and false if Rails didn't find the user.</p>\n"}], "owner": {"reputation": 975, "user_id": 638321, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/eqM3c.png?s=128&g=1", "display_name": "smulholland2", "link": "https://stackoverflow.com/users/638321/smulholland2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 44915302, "answer_count": 3, "score": 0, "last_activity_date": 1499212511, "creation_date": 1499211301, "question_id": 44915210, "link": "https://stackoverflow.com/questions/44915210/how-can-i-access-an-objects-property-in-ruby", "title": "How can I access an object&#39;s property in Ruby", "body": "<p>My user object has a boolean property that I want to check as a user logs in.</p>\n\n<p>This is what I'm trying to do, but I am getting a 500 error:</p>\n\n<pre><code>user = User.find_by_email(params['email'])\nif user.is_mentor\n    #do something\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2090, "user_id": 5113690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cbKBX.png?s=128&g=1", "display_name": "m3characters", "link": "https://stackoverflow.com/users/5113690/m3characters"}, "edited": false, "score": 1, "creation_date": 1499211039, "post_id": 44914981, "comment_id": 76806547, "body": "on routes.rb post &#39;/tasks/update_status&#39; =&gt; &#39;tasks#update_status&#39;"}, {"owner": {"reputation": 862, "user_id": 4743002, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/a41927b26864adce423e600575110c24?s=128&d=identicon&r=PG&f=1", "display_name": "Yakalent", "link": "https://stackoverflow.com/users/4743002/yakalent"}, "reply_to_user": {"reputation": 2090, "user_id": 5113690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cbKBX.png?s=128&g=1", "display_name": "m3characters", "link": "https://stackoverflow.com/users/5113690/m3characters"}, "edited": false, "score": 0, "creation_date": 1499211480, "post_id": 44914981, "comment_id": 76806645, "body": "Thanx it worked!"}], "answers": [{"comments": [{"owner": {"reputation": 862, "user_id": 4743002, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/a41927b26864adce423e600575110c24?s=128&d=identicon&r=PG&f=1", "display_name": "Yakalent", "link": "https://stackoverflow.com/users/4743002/yakalent"}, "edited": false, "score": 0, "creation_date": 1499214867, "post_id": 44915313, "comment_id": 76807296, "body": "thanx for the answer, how can i make it possible when /tasks/update_status fire it go to the index?"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 862, "user_id": 4743002, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/a41927b26864adce423e600575110c24?s=128&d=identicon&r=PG&f=1", "display_name": "Yakalent", "link": "https://stackoverflow.com/users/4743002/yakalent"}, "edited": false, "score": 0, "creation_date": 1499215752, "post_id": 44915313, "comment_id": 76807421, "body": "@Yakalent It depends how you make the request, for example, if you want just to redirect when <code>&#47;tasks&#47;update_status</code> is typed in the browser, then add a route with <code>get</code>, like this: <code>get &#39;&#47;tasks&#47;update_status&#39;  =&gt; &#39;tasks#index&#39;</code>. But if it will be requested from a <code>form</code> using post, then do: <code>post &#39;&#47;tasks&#47;update_status&#39;  =&gt; &#39;tasks#index&#39;</code>. What is the exact behavior you are looking for?"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 862, "user_id": 4743002, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/a41927b26864adce423e600575110c24?s=128&d=identicon&r=PG&f=1", "display_name": "Yakalent", "link": "https://stackoverflow.com/users/4743002/yakalent"}, "edited": false, "score": 0, "creation_date": 1499215841, "post_id": 44915313, "comment_id": 76807436, "body": "@Yakalent Or what you want is to redirect to <code>index</code> after the code in <code>update_status</code> has being executed?"}, {"owner": {"reputation": 862, "user_id": 4743002, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/a41927b26864adce423e600575110c24?s=128&d=identicon&r=PG&f=1", "display_name": "Yakalent", "link": "https://stackoverflow.com/users/4743002/yakalent"}, "edited": false, "score": 0, "creation_date": 1499216154, "post_id": 44915313, "comment_id": 76807497, "body": "Yes thats is what i want"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 862, "user_id": 4743002, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/a41927b26864adce423e600575110c24?s=128&d=identicon&r=PG&f=1", "display_name": "Yakalent", "link": "https://stackoverflow.com/users/4743002/yakalent"}, "edited": false, "score": 0, "creation_date": 1499216302, "post_id": 44915313, "comment_id": 76807526, "body": "@Yakalent You will need to do that using <i>javascript</i> since your action is only responding to <code>js</code>, and the form that requests to <code>update_status</code> uses <i>ajax</i> (i.e. <code>remote: true</code>). Or, remove <code>remote: true</code> in your <code>form</code> and replace <code>format.js</code> in your controller to <code>redirect_to :index</code>."}], "tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": true, "score": 1, "last_activity_date": 1499212376, "creation_date": 1499212376, "answer_id": 44915313, "question_id": 44914981, "link": "https://stackoverflow.com/questions/44914981/rails-5-0-4-no-route-matches-action-update-status-controller-tasks/44915313#44915313", "title": "Rails 5.0.4 No route matches {:action=&gt;&quot;update_status&quot;, :controller=&gt;&quot;tasks&quot;}", "body": "<p>The error is because your are not routing correctly, both your routes go to <code>index</code>, none to <code>update_status</code>.</p>\n\n<p>Change this:</p>\n\n<pre><code>put '/tasks/update_status'  =&gt; 'tasks#index'\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>post '/tasks/update_status'  =&gt; 'tasks#update_status'\n</code></pre>\n"}], "owner": {"reputation": 862, "user_id": 4743002, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/a41927b26864adce423e600575110c24?s=128&d=identicon&r=PG&f=1", "display_name": "Yakalent", "link": "https://stackoverflow.com/users/4743002/yakalent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "accepted_answer_id": 44915313, "answer_count": 1, "score": -1, "last_activity_date": 1499212533, "creation_date": 1499209504, "last_edit_date": 1499212533, "question_id": 44914981, "link": "https://stackoverflow.com/questions/44914981/rails-5-0-4-no-route-matches-action-update-status-controller-tasks", "title": "Rails 5.0.4 No route matches {:action=&gt;&quot;update_status&quot;, :controller=&gt;&quot;tasks&quot;}", "body": "<p>I've got the followed code:</p>\n\n<p>tasks_controller.rb</p>\n\n<pre><code>class TasksController &lt; ApplicationController\n before_action :set_task, only: [:show, :edit, :update, :destroy]\n\n def index\n end\n\n def show\n end\n\n def new\n  @task = Task.new\n end\n\n def edit\n end\n\n def create\n  @task = Task.new(task_params)\nend\n\n def update\n end\n\n def destroy\n  @task.destroy\n end\n\n def update_status\n  @task = Task.find(params[:id])\n  @task.status = \"Progres\"\n  format.js\nend \n\nprivate\ndef set_task\n  @task = Task.find(params[:id])\nend\n\ndef task_params\n  params.require(:task).permit(:title, :content, :datetime, :status)\nend\nend\n</code></pre>\n\n<p>_task.html.erb:</p>\n\n<pre><code>&lt;%= form_tag({:action=&gt;'update_status', :controller=&gt;'tasks'},:method=&gt;:post,:id=&gt;\"update_status\",:name=&gt;'taskstatus_form',:remote=&gt;true) do %&gt;\n    &lt;div class=\"btn btn-info\"&gt;&lt;%= submit_tag 'Progres' %&gt;&lt;/div&gt;\n&lt;%end%&gt;\n</code></pre>\n\n<p>and the config/routes.rb</p>\n\n<pre><code>Rails.application.routes.draw do\n\n  root \"tasks#index\"\n  put '/tasks/update_status'  =&gt; 'tasks#index'\n\n  resources :tasks\nend\n</code></pre>\n\n<p>This error appears:</p>\n\n<blockquote>\n  <p>No route matches {:action=>\"update_status\", :controller=>\"tasks\"}</p>\n</blockquote>\n\n<p>See anyone the problem? Thanx for help</p>\n"}, {"tags": ["ruby", "methods"], "comments": [{"owner": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 0, "creation_date": 1499207348, "post_id": 44914632, "comment_id": 76805761, "body": "This method <a href=\"https://ruby-doc.org/core-2.2.0/String.html#method-i-center\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.2.0/String.html#method-i-center</a> ?"}, {"owner": {"reputation": 93, "user_id": 8067836, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JIY38.jpg?s=128&g=1", "display_name": "Andrea Baz&#225;n", "link": "https://stackoverflow.com/users/8067836/andrea-baz%c3%a1n"}, "reply_to_user": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 0, "creation_date": 1499209379, "post_id": 44914632, "comment_id": 76806219, "body": "yes, I wonder if there&#39;s another way to do it?"}], "answers": [{"tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 0, "last_activity_date": 1499210182, "creation_date": 1499210182, "answer_id": 44915058, "question_id": 44914632, "link": "https://stackoverflow.com/questions/44914632/method-to-print-a-credit-card-table/44915058#44915058", "title": "method to print a Credit Card Table", "body": "<p>Not sure what part specifically is confusing, so apologies if this comes across as a little condescending. Let's step through this line by line:</p>\n\n<pre><code>print \"Name\".center(20),\" Number\".center(25),\" Expiration\".center(20),\" Cvc\".center(22),\" Status\".center(25),\"\\n\"\n</code></pre>\n\n<p>this first line calls <a href=\"https://ruby-doc.org/core-2.4.1/Kernel.html#method-i-print\" rel=\"nofollow noreferrer\">print</a> passing it a variable number of string arguments to print out, one after another. These string arguments are all be <a href=\"https://ruby-doc.org/core-2.2.0/String.html#method-i-center\" rel=\"nofollow noreferrer\">center</a>ed as column headers. After all the headers are output, a line break is printed beginning a new line in the output.</p>\n\n<pre><code>puts \"___________________________________________________________________________________________________________________\"\n</code></pre>\n\n<p>This line is just for formatting, outputting a divider between the table header and contents. Since they use <a href=\"https://ruby-doc.org/core-2.4.1/Kernel.html#method-i-puts\" rel=\"nofollow noreferrer\">puts</a> instead of print here, a new line is automatically output after the string.</p>\n\n<pre><code>card_array.each do |x|\n...\nend\n</code></pre>\n\n<p>This block is a for each construct, so for each credit card in the <code>card_array</code> we will assign the card to the local variable <code>x</code> and then execute the code inside this block.</p>\n\n<pre><code> x.each do |card|\n ...\n end\n</code></pre>\n\n<p>Again, this is a foreach construct where <code>x</code> is the credit card as an array of strings (see the <code>information</code> method). We assign each string, one at a time to <code>card</code> and then execute the block within.</p>\n\n<pre><code>print \"|\",card.center(20),\"|\"\n</code></pre>\n\n<p>Here's another print call, where we use the variable length arguments to pass 3 parameters, the current string in <code>card</code> and what I assume to be table cell borders.</p>\n\n<pre><code>print \"\\n\"\n</code></pre>\n\n<p>Then we just have 2 more calls to print, at the end of each of the blocks, printing out new lines so that each credit card is on it's own row.</p>\n\n<p>Having explained the block in question, I feel a source of confusion for this code possibly comes from the <code>information</code> method, where, it might not be immediately obvious that</p>\n\n<pre><code>card_information = \"#{@name}\", \"#{@number}\", \"#{@expiration}\", \"#{@cvc}\", \"#{@status}\"\n</code></pre>\n\n<p>is actually creating an array of strings that are then being added to the <code>card_array</code> so <code>card_array</code> is an array of arrays that would end up looking something like</p>\n\n<pre><code>[ [\"card holder name\", \"card number\", ...], [\"second card hold name\", \"second card number\", ...], ...]\n</code></pre>\n\n<p>It took me a second reading to catch that they were doing that, so figure this might be what got skipped over to make the block in question unclear (if you were thinking it was an array of <code>CreditCard</code> objects instead of an array of strings.)</p>\n"}], "owner": {"reputation": 93, "user_id": 8067836, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JIY38.jpg?s=128&g=1", "display_name": "Andrea Baz&#225;n", "link": "https://stackoverflow.com/users/8067836/andrea-baz%c3%a1n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "closed_date": 1499237908, "accepted_answer_id": 44915058, "answer_count": 1, "score": 0, "last_activity_date": 1499210182, "creation_date": 1499206695, "last_edit_date": 1499206861, "question_id": 44914632, "link": "https://stackoverflow.com/questions/44914632/method-to-print-a-credit-card-table", "closed_reason": "Needs more focus", "title": "method to print a Credit Card Table", "body": "<p>Can someone explain to me how works this method, I know it print a table and works well but I don't understand how it works :(\nhelp! </p>\n\n<pre><code>class CreditCard\n  attr_reader :name, :number, :expiration, :cvc\n  attr_accessor :status\n\n    def initialize(name,number,expiration,cvc,status)\n      @name = name \n      @number = number\n      @expiration = expiration\n      @cvc = cvc\n      @status = status\n    end\n\n    def information\n      card_information = \"#{@name}\", \"#{@number}\", \"#{@expiration}\", \"#{@cvc}\", \"#{@status}\"  \n    end  \n\nend\n\ncard_array = []\ncredit_card.each do |x|\n  card_array &lt;&lt; x.information\nend  \n</code></pre>\n\n<h1>THIS METHOD!!!</h1>\n\n<pre><code>print \"Name\".center(20),\" Number\".center(25),\" Expiration\".center(20),\" Cvc\".center(22),\" Status\".center(25),\"\\n\"\nputs \"___________________________________________________________________________________________________________________\"\ncard_array.each do |x|\n  x.each do |card|\n    print \"|\",card.center(20),\"|\"\n  end\n   print \"\\n\"\nend\nprint \"\\n\"\n</code></pre>\n"}, {"tags": ["ruby", "runtime", "sleep"], "answers": [{"tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 0, "last_activity_date": 1499207347, "creation_date": 1499207347, "answer_id": 44914711, "question_id": 44914560, "link": "https://stackoverflow.com/questions/44914560/find-the-run-time-of-select-ruby-code/44914711#44914711", "title": "Find the Run Time of Select Ruby Code", "body": "<p>Ruby has the <a href=\"http://ruby-doc.org/stdlib-2.2.0/libdoc/benchmark/rdoc/Benchmark.html\" rel=\"nofollow noreferrer\">Benchmark</a> module for timing how long things take. I've never used this outside of seeing if a method is taking too long to run, etc. in development, not sure if this is 'recommended' for production code or for keeping things above a minimum runtime (as it sounds like you might be doing), but take a look and see how it feels for your use case.</p>\n\n<p>It also sounds like you might be interested in the <a href=\"https://ruby-doc.org/stdlib-2.1.1/libdoc/timeout/rdoc/Timeout.html\" rel=\"nofollow noreferrer\">Timeout</a> module as well (for making sure things don't take longer than a set amount of time).</p>\n\n<p>If you really have a use case for making sure something takes a <em>minimum</em> amount of time, timing the code (either using a Benchmark method or just Time or another solution) and then <code>sleep</code> the difference  is the only thing that comes to mind.</p>\n"}, {"tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 0, "last_activity_date": 1499208981, "creation_date": 1499208981, "answer_id": 44914923, "question_id": 44914560, "link": "https://stackoverflow.com/questions/44914560/find-the-run-time-of-select-ruby-code/44914923#44914923", "title": "Find the Run Time of Select Ruby Code", "body": "<p>It is simple. Look at your watch (<code>Time.now</code>) and remember the time, run the code, look at your watch again, subtract.</p>\n\n<pre><code>t0 = Time.now\n# your block of code\nputs Time.now - t0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 83, "user_id": 6397191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5snGy.jpg?s=128&g=1", "display_name": "A.lakkantha", "link": "https://stackoverflow.com/users/6397191/a-lakkantha"}, "is_accepted": false, "score": 0, "last_activity_date": 1499249006, "last_edit_date": 1499249006, "creation_date": 1499248652, "answer_id": 44922914, "question_id": 44914560, "link": "https://stackoverflow.com/questions/44914560/find-the-run-time-of-select-ruby-code/44922914#44922914", "title": "Find the Run Time of Select Ruby Code", "body": "<p>[<a href=\"http://ruby-doc.org/core-1.9.3/Time.html\" rel=\"nofollow noreferrer\">http://ruby-doc.org/core-1.9.3/Time.html</a> \nYou want to to use the Time object. (Time Docs)</p>\n\n<p>For example,</p>\n\n<pre><code>  start = Time.now\n # code to time\n finish = Time.now\n\n diff = finish - start\n</code></pre>\n\n<p>diff would be in seconds, as a floating point number.</p>\n\n<p>EDIT: end is reserved.\nor you can use\n    require 'benchmark'</p>\n\n<pre><code> def foo\n  time = Benchmark.measure {\n   code to test\n   }\n</code></pre>\n\n<p>puts time.real #or save it to logs\nend\nSample output:</p>\n\n<pre><code>   2.2.3 :001 &gt; foo\n   5.230000   0.020000   5.250000 (  5.274806)\n</code></pre>\n\n<p>Values are CPU time, system time, total and real elapsed time.\n[<a href=\"http://ruby-doc.org/stdlib-2.0.0/libdoc/benchmark/rdoc/Benchmark.html#method-c-bm\" rel=\"nofollow noreferrer\">http://ruby-doc.org/stdlib-2.0.0/libdoc/benchmark/rdoc/Benchmark.html#method-c-bm</a>\nSource: Ruby docs.</p>\n"}], "owner": {"reputation": 788, "user_id": 8156202, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/oo1Ep.png?s=128&g=1", "display_name": "CyanCoding", "link": "https://stackoverflow.com/users/8156202/cyancoding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "accepted_answer_id": 44914711, "answer_count": 3, "score": 0, "last_activity_date": 1499249006, "creation_date": 1499206240, "question_id": 44914560, "link": "https://stackoverflow.com/questions/44914560/find-the-run-time-of-select-ruby-code", "title": "Find the Run Time of Select Ruby Code", "body": "<h2>Problem</h2>\n\n<p>Howdy guys, so I want to find the run time of a block of code in Ruby, but I am not entirely sure as to how I could do it. I want to run some code, and then output how long it took to run that code because I have a super huge program and the run time changes a lot. I want to make sure it always has a consistent run time (I could do it by sleeping it for a fraction of a second) but that isn't my problem. I want to find out how long the run time actually is so the program can know if it needs to slow things down or speed things up.</p>\n\n<h2>My Thoughts</h2>\n\n<p>So, I have an idea as to how it could work. I have never used <code>Time</code> in ruby but I have an idea as to how I could use that. I could have a <code>variable</code> equal to the time (in milliseconds) and then another <code>variable</code> that I make at the end of the code block that does it again, and then I just subtract them, but I have (1) never used <code>Time</code> and (2) I don't actually know if that is the best way.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 2, "creation_date": 1499206277, "post_id": 44914527, "comment_id": 76805508, "body": "<code>arr.max_by(n) {|i| #condition }</code> in certain cases will work."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1499206615, "post_id": 44914527, "comment_id": 76805587, "body": "If you want to collect the first <code>n</code> objects that satisfy a condition then maybe use <code>each_with_object</code> or <code>with_object</code> with an array object and build it up until you collect <code>n</code> objects."}, {"owner": {"reputation": 16234, "user_id": 2202702, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lTGWe.jpg?s=128&g=1", "display_name": "Arslan Ali", "link": "https://stackoverflow.com/users/2202702/arslan-ali"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1499216826, "post_id": 44914527, "comment_id": 76807615, "body": "The thing: I want elements that are highest among all the other elements, not the ones that meet a specific condition. Would you please provide an example of how to accomplish it using <code>each_with_object</code> or <code>with_object</code>?"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1499223975, "post_id": 44914527, "comment_id": 76808906, "body": "Then I would not recommend <code>each_with_object</code> or <code>with_object</code>. On another note be aware of behaviour when using <code>max_by</code> with duplicate elements i.e. <code>[9,9,8].max_by(2, &amp;:itself) #=&gt; [9, 9]</code>. And also note there is the corresponding <code>min_by</code> method too."}], "answers": [{"comments": [{"owner": {"reputation": 16234, "user_id": 2202702, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lTGWe.jpg?s=128&g=1", "display_name": "Arslan Ali", "link": "https://stackoverflow.com/users/2202702/arslan-ali"}, "edited": false, "score": 0, "creation_date": 1499206205, "post_id": 44914539, "comment_id": 76805487, "body": "My bad. I have re-phrased my question."}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 2, "creation_date": 1499207024, "post_id": 44914539, "comment_id": 76805701, "body": "<code>max_by(3, &amp;:length)</code> :)"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 3, "last_activity_date": 1499207106, "last_edit_date": 1499207106, "creation_date": 1499206072, "answer_id": 44914539, "question_id": 44914527, "link": "https://stackoverflow.com/questions/44914527/selecting-multiple-elements-from-an-array-in-ruby/44914539#44914539", "title": "Selecting multiple elements from an array in Ruby", "body": "<pre><code>%w(one two three four five size seven eight).max_by(3, &amp;:length)\n=&gt; [\"seven\", \"eight\", \"three\"]\n</code></pre>\n"}], "owner": {"reputation": 16234, "user_id": 2202702, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lTGWe.jpg?s=128&g=1", "display_name": "Arslan Ali", "link": "https://stackoverflow.com/users/2202702/arslan-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "accepted_answer_id": 44914539, "answer_count": 1, "score": 0, "last_activity_date": 1499230712, "creation_date": 1499205969, "last_edit_date": 1499230712, "question_id": 44914527, "link": "https://stackoverflow.com/questions/44914527/selecting-multiple-elements-from-an-array-in-ruby", "title": "Selecting multiple elements from an array in Ruby", "body": "<p>I would like to select from an array the four highest elements in descending order in terms of length.</p>\n\n<p>I sorted the array in descending order, and picked the elements.</p>\n\n<p>Is there a more elegant way to do this?</p>\n"}, {"tags": ["ruby", "docker", "cron", "whenever"], "comments": [{"owner": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 1, "creation_date": 1499200578, "post_id": 44913452, "comment_id": 76803792, "body": "I think you are using wrong user name for scheduling job in crontab."}, {"owner": {"reputation": 19477, "user_id": 684908, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/18c7c8d0b7809e307991bfacc16470d0?s=128&d=identicon&r=PG", "display_name": "Andy Shinn", "link": "https://stackoverflow.com/users/684908/andy-shinn"}, "edited": false, "score": 1, "creation_date": 1499201200, "post_id": 44913452, "comment_id": 76804008, "body": "How can we reproduce? You didn&#39;t give any information about your host, Docker version, <code>Dockerfile</code>, or the <code>docker run</code> command. Please give us enough information to reproduce it if possible."}, {"owner": {"reputation": 1431, "user_id": 729535, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5593abb6ec21bc7a9c2070a82a27e4e3?s=128&d=identicon&r=PG", "display_name": "Luiz Carvalho", "link": "https://stackoverflow.com/users/729535/luiz-carvalho"}, "reply_to_user": {"reputation": 19477, "user_id": 684908, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/18c7c8d0b7809e307991bfacc16470d0?s=128&d=identicon&r=PG", "display_name": "Andy Shinn", "link": "https://stackoverflow.com/users/684908/andy-shinn"}, "edited": false, "score": 0, "creation_date": 1499255329, "post_id": 44913452, "comment_id": 76826090, "body": "@AndyShinn sorry, I update my answer!"}, {"owner": {"reputation": 1431, "user_id": 729535, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5593abb6ec21bc7a9c2070a82a27e4e3?s=128&d=identicon&r=PG", "display_name": "Luiz Carvalho", "link": "https://stackoverflow.com/users/729535/luiz-carvalho"}, "reply_to_user": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 0, "creation_date": 1499255362, "post_id": 44913452, "comment_id": 76826119, "body": "@YevgeniyAnfilofyev how I can test this?"}, {"owner": {"reputation": 1431, "user_id": 729535, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5593abb6ec21bc7a9c2070a82a27e4e3?s=128&d=identicon&r=PG", "display_name": "Luiz Carvalho", "link": "https://stackoverflow.com/users/729535/luiz-carvalho"}, "edited": false, "score": 0, "creation_date": 1499256870, "post_id": 44913452, "comment_id": 76827265, "body": "You are right. I&#39;m using wrong user."}], "answers": [{"tags": [], "owner": {"reputation": 1431, "user_id": 729535, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5593abb6ec21bc7a9c2070a82a27e4e3?s=128&d=identicon&r=PG", "display_name": "Luiz Carvalho", "link": "https://stackoverflow.com/users/729535/luiz-carvalho"}, "is_accepted": true, "score": 0, "last_activity_date": 1499256962, "creation_date": 1499256962, "answer_id": 44926037, "question_id": 44913452, "link": "https://stackoverflow.com/questions/44913452/how-can-i-solve-crontab-your-uid-isnt-in-the-passwd-file-bailing-out/44926037#44926037", "title": "How can I solve &quot;crontab: your UID isn&#39;t in the passwd file. bailing out.&quot;?", "body": "<p>To fix I use same user in Dockerfile and docker-compose</p>\n\n<p><strong>Dockerfile</strong></p>\n\n<pre><code>RUN chown -R nobody:nogroup /app\nUSER nobody\n</code></pre>\n\n<p><strong>Docker Compose</strong></p>\n\n<pre><code>  chatbot_web:\n    user: \"nobody:nogroup\"\n</code></pre>\n"}], "owner": {"reputation": 1431, "user_id": 729535, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5593abb6ec21bc7a9c2070a82a27e4e3?s=128&d=identicon&r=PG", "display_name": "Luiz Carvalho", "link": "https://stackoverflow.com/users/729535/luiz-carvalho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1540, "favorite_count": 0, "accepted_answer_id": 44926037, "answer_count": 1, "score": 0, "last_activity_date": 1499256962, "creation_date": 1499199171, "last_edit_date": 1499256093, "question_id": 44913452, "link": "https://stackoverflow.com/questions/44913452/how-can-i-solve-crontab-your-uid-isnt-in-the-passwd-file-bailing-out", "title": "How can I solve &quot;crontab: your UID isn&#39;t in the passwd file. bailing out.&quot;?", "body": "<p>Hi I'm using <code>Docker</code> and <a href=\"https://github.com/javan/whenever\" rel=\"nofollow noreferrer\">whenever</a> to write cron schedule rules, but when I run <code>whenever --update-crontab</code> in my docker container this errors is showing to me.</p>\n\n<pre><code>crontab: your UID isn't in the passwd file.\nbailing out.\n[fail] Couldn't write crontab; try running `whenever' with no options to ensure your schedule file is valid.\n</code></pre>\n\n<p><strong>Dockerfile</strong></p>\n\n<pre><code>FROM ruby:2.4.1-slim\nRUN apt-get update &amp;&amp; apt-get -y install cron\nENV RAILS_ENV production\n\nENV INSTALL_PATH /app\n\nRUN mkdir -p $INSTALL_PATH\nWORKDIR $INSTALL_PATH\n\n\nCOPY Gemfile Gemfile.lock ./\nRUN bundle install --binstubs --jobs 20 --retry 5\n\nCOPY . .\nRUN chown -R nobody:nogroup /app\nUSER nobody\n\n# use docker run -it --entrypoint=\"\" demo \"ls -la\" to skip\nEXPOSE 3000\n\nCMD puma -C config/puma.rb\n</code></pre>\n\n<p>Docker Version: <code>Docker version 17.05.0-ce, build 89658be</code></p>\n\n<p><strong>My Docker compose file</strong></p>\n\n<pre><code>  chatbot_web:\n    container_name: chatbot_web\n    depends_on:\n      - postgres\n      - chatbot_redis\n      - chatbot_lita\n    user: \"1000:1000\"\n    build: .\n    image: dpe/chatbot\n    ports:\n      - '3000:3000'\n    volumes:\n      - '.:/app'\n    restart: always\n</code></pre>\n\n<p>How can I solve this?</p>\n\n<p><strong>EDIT:</strong>\nWhen I use:</p>\n\n<pre><code>host$ docker run -it dpe/chatbot bash\ncontainer $ whenever --update-cron\n[write] crontab file updated\n</code></pre>\n\n<p>Works, but when I use:</p>\n\n<pre><code>host$ docker exec -it chatbot_web bash                                                                                                                                                                                               \nI have no name!@352c6a7500d2:/app$ whenever --update-cron\ncrontab: your UID isn't in the passwd file.\nbailing out.\n[fail] Couldn't write crontab; try running `whenever' with no options to ensure your schedule file is valid.\n</code></pre>\n\n<p>Don't Work =(</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 2981, "user_id": 1238143, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7b51fc4e07afc1a305cd701f4bb71f7d?s=128&d=identicon&r=PG", "display_name": "Lesha Pipiev", "link": "https://stackoverflow.com/users/1238143/lesha-pipiev"}, "edited": false, "score": 0, "creation_date": 1499200280, "post_id": 44913461, "comment_id": 76803673, "body": "This behavior is one I bumped into accidentally. So I was expecting that boo method became instance method in Foo class."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 2981, "user_id": 1238143, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7b51fc4e07afc1a305cd701f4bb71f7d?s=128&d=identicon&r=PG", "display_name": "Lesha Pipiev", "link": "https://stackoverflow.com/users/1238143/lesha-pipiev"}, "edited": false, "score": 0, "creation_date": 1499200596, "post_id": 44913461, "comment_id": 76803800, "body": "If you want to patch Object, which is usually a bad idea, you&#39;ll have to patch Class, too."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1499199207, "creation_date": 1499199207, "answer_id": 44913461, "question_id": 44913433, "link": "https://stackoverflow.com/questions/44913433/methods-defined-in-class-object-are-instance-and-class-one-at-the-same-time/44913461#44913461", "title": "Methods defined in class Object are instance and class one at the same time", "body": "<p>If you really want to do this, keep in mind that the class context and the instance context are entirely different so instance variables are not equivalent.</p>\n\n<pre><code>module FooMethods\n  def boo\n    'boo'\n  end\nend\n\nclass Foo\n  extend FooMethods\n  include FooMethods\nend\n</code></pre>\n\n<p>This deliberately imports the mixin at both the class level via <code>extend</code> and instance level via <code>include</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 2981, "user_id": 1238143, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7b51fc4e07afc1a305cd701f4bb71f7d?s=128&d=identicon&r=PG", "display_name": "Lesha Pipiev", "link": "https://stackoverflow.com/users/1238143/lesha-pipiev"}, "edited": false, "score": 0, "creation_date": 1499200154, "post_id": 44913542, "comment_id": 76803633, "body": "The behavior described in my original question is in place without a patching Object with Forwardable. So I&#39;m curious how to describe it rather than achieve :)"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1499200312, "last_edit_date": 1499200312, "creation_date": 1499199600, "answer_id": 44913542, "question_id": 44913433, "link": "https://stackoverflow.com/questions/44913433/methods-defined-in-class-object-are-instance-and-class-one-at-the-same-time/44913542#44913542", "title": "Methods defined in class Object are instance and class one at the same time", "body": "<p>Perhaps forwarding the method to <code>self</code> is an option?</p>\n\n<pre><code>require 'forwardable'\n\nclass Foo\n  extend Forwardable\n\n  def self.boo\n    'boo method'\n  end\n\n  def_delegator self, :boo\nend\n\nFoo.boo\n#=&gt; \"boo method\"\n\nFoo.new.boo\n#=&gt; \"boo method\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 1, "last_activity_date": 1499210691, "creation_date": 1499210691, "answer_id": 44915133, "question_id": 44913433, "link": "https://stackoverflow.com/questions/44913433/methods-defined-in-class-object-are-instance-and-class-one-at-the-same-time/44915133#44915133", "title": "Methods defined in class Object are instance and class one at the same time", "body": "<p>Every object is an instance of <code>Object</code>. Thus, every object will respond to <code>boo</code>.</p>\n\n<p><code>Foo</code> is an object (classes are objects, too), ergo, <code>Foo</code> is an instance of <code>Object</code> (it is an instance of <code>Class</code>, which is a subclass of <code>Module</code>, which is a subclass of <code>Object</code>).</p>\n\n<p><code>Foo.new</code> is an object (it is an instance of <code>Foo</code>, which is a subclass of <code>Object</code>).</p>\n\n<p>Since both <code>Foo</code> and <code>Foo.new</code> are instances of <code>Object</code>, both respond to <code>boo</code>.</p>\n\n<p>[Note: I am ignoring the existence of <code>BasicObject</code>.]</p>\n"}], "owner": {"reputation": 2981, "user_id": 1238143, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7b51fc4e07afc1a305cd701f4bb71f7d?s=128&d=identicon&r=PG", "display_name": "Lesha Pipiev", "link": "https://stackoverflow.com/users/1238143/lesha-pipiev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 44915133, "answer_count": 3, "score": 0, "last_activity_date": 1499210691, "creation_date": 1499199095, "question_id": 44913433, "link": "https://stackoverflow.com/questions/44913433/methods-defined-in-class-object-are-instance-and-class-one-at-the-same-time", "title": "Methods defined in class Object are instance and class one at the same time", "body": "<p>How can be described that a method <strong>boo</strong> defined in Object class becomes instance and class one at the same time in class <strong>Foo</strong>?</p>\n\n<pre><code>class Foo; end\n\nclass Object\n  def boo\n    'boo method'\n  end\nend\n\np Foo.boo # =&gt; boo method\np Foo.new.boo # =&gt; boo method\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1499198893, "post_id": 44913133, "comment_id": 76803161, "body": "MySQL generally can&#39;t deal with encrypted data in columns, it&#39;s opaque, so it can&#39;t be queried, indexed, or otherwise referenced between tables. You may want to look at encryption-at-rest instead using an encrypted drive volume to store your MySQL database."}, {"owner": {"reputation": 8993, "user_id": 1354537, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/24aaaba3c6140eaef24f9ed711644033?s=128&d=identicon&r=PG", "display_name": "Marged", "link": "https://stackoverflow.com/users/1354537/marged"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1499199079, "post_id": 44913133, "comment_id": 76803246, "body": "@tadman I only need to encrypt the data on the network, not the database or rows"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1499199226, "post_id": 44913133, "comment_id": 76803300, "body": "Then you need to set up SSL/TLS on your server and use that."}, {"owner": {"reputation": 8993, "user_id": 1354537, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/24aaaba3c6140eaef24f9ed711644033?s=128&d=identicon&r=PG", "display_name": "Marged", "link": "https://stackoverflow.com/users/1354537/marged"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1499199330, "post_id": 44913133, "comment_id": 76803339, "body": "@tadman I know how to do this in Java, but found no setup for RoR. To me it seems this is not supported."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1499199405, "post_id": 44913133, "comment_id": 76803371, "body": "It&#39;s <a href=\"http://api.rubyonrails.org/v4.2.6/classes/ActiveRecord/ConnectionAdapters/MysqlAdapter.html\" rel=\"nofollow noreferrer\">in the docs</a> so it appears to be supported."}, {"owner": {"reputation": 8993, "user_id": 1354537, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/24aaaba3c6140eaef24f9ed711644033?s=128&d=identicon&r=PG", "display_name": "Marged", "link": "https://stackoverflow.com/users/1354537/marged"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1499199600, "post_id": 44913133, "comment_id": 76803446, "body": "Thanks @tadman, I obviously failed in finding the correct docs. Would you like to turn this in to an answer ? Otherwise I think I will just remove this redundant question ..."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1499199657, "post_id": 44913133, "comment_id": 76803464, "body": "That&#39;s just a hint as to how it works. I&#39;m not sure how this shakes out in terms of YML configuration, nor the implications of having to set up a certificate, but if you can get it working and describe it, I think a self-answer is warranted here."}, {"owner": {"reputation": 8993, "user_id": 1354537, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/24aaaba3c6140eaef24f9ed711644033?s=128&d=identicon&r=PG", "display_name": "Marged", "link": "https://stackoverflow.com/users/1354537/marged"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1499199822, "post_id": 44913133, "comment_id": 76803521, "body": "@tadman I will not be able to provide this answer myself because I am no RoR developer. I just did some security research to find out what I can dem and from others ;-)"}], "owner": {"reputation": 8993, "user_id": 1354537, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/24aaaba3c6140eaef24f9ed711644033?s=128&d=identicon&r=PG", "display_name": "Marged", "link": "https://stackoverflow.com/users/1354537/marged"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1499233536, "creation_date": 1499197259, "last_edit_date": 1499233536, "question_id": 44913133, "link": "https://stackoverflow.com/questions/44913133/configuring-encrypted-transmission-in-database-yml", "title": "Configuring encrypted transmission in database.yml", "body": "<p>I found ways to configure symmetric encryption for the database user but no way to configure keys or something similar to encrypt the data sent to the database.</p>\n\n<p>Is there any database supported by Ruby in Rails that allows specifying such encryption ? MariaDB / MySql is preferred.</p>\n\n<p>With the help of tadman I found an adaptor which is able to set several SSL related parameters like sslkey but I still don't know how this works with database.yml: <a href=\"http://api.rubyonrails.org/v4.2.6/classes/ActiveRecord/ConnectionAdapters/MysqlAdapter.html\" rel=\"nofollow noreferrer\">http://api.rubyonrails.org/v4.2.6/classes/ActiveRecord/ConnectionAdapters/MysqlAdapter.html</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 8255597, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f00079fc1de2083ee50f75cd2ae6ea1d?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/8255597/boris"}, "edited": false, "score": 0, "creation_date": 1499220591, "post_id": 44913289, "comment_id": 76808262, "body": "No. My file .env:      export RECAPTCHA_PUBLIC_KEY = &#39;********************************&#39; export RECAPTCHA_PRIVATE_KEY = &#39;****************************&#39;"}, {"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "reply_to_user": {"reputation": 65, "user_id": 8255597, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f00079fc1de2083ee50f75cd2ae6ea1d?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/8255597/boris"}, "edited": false, "score": 1, "creation_date": 1499220936, "post_id": 44913289, "comment_id": 76808332, "body": "yeah, in your .env you have RECAPTCHA_PUBLIC_KEY and RECAPTCHA_PRIVATE_KEY but assuming you&#39;re using the gem I linked and not a different one, you need to be using RECAPTCHA_SITE_KEY and  RECAPTCHA_SECRET_KEY, so changing PUBLIC to SITE and PRIVATE with SECRET should fix your problem."}, {"owner": {"reputation": 3380, "user_id": 3757435, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/m8r2q.png?s=128&g=1", "display_name": "Mugur &#39;Bud&#39; Chirica", "link": "https://stackoverflow.com/users/3757435/mugur-bud-chirica"}, "edited": false, "score": 0, "creation_date": 1499727663, "post_id": 44913289, "comment_id": 77020118, "body": "You should click on accept answer if that solved your issue."}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": false, "score": 11, "last_activity_date": 1499198215, "creation_date": 1499198215, "answer_id": 44913289, "question_id": 44913128, "link": "https://stackoverflow.com/questions/44913128/recaptcharecaptchaerror-in-articlesshow-no-site-key-specified/44913289#44913289", "title": "Recaptcha::RecaptchaError in Articles#show No site key specified", "body": "<p>It looks like your using <a href=\"https://github.com/ambethia/recaptcha\" rel=\"noreferrer\">this gem</a>, which specifies that you need:</p>\n\n<blockquote>\n  <p>export RECAPTCHA_<strong>SITE</strong>_KEY  = '6Lc6BAAAAAAAAChqRbQZcn_yyyyyyyyyyyyyyyyy'</p>\n  \n  <p>export RECAPTCHA_<strong>SECRET</strong>_KEY = '6Lc6BAAAAAAAAKN3DRm6VA_xxxxxxxxxxxxxxxxx'</p>\n</blockquote>\n\n<p>when I follow your link, you have</p>\n\n<blockquote>\n  <p>export RECAPTCHA_<strong>PUBLIC</strong>_KEY = \\'*******************************\\'</p>\n  \n  <p>export RECAPTCHA_<strong>PRIVATE</strong>_KEY = \\'*******************************\\'</p>\n</blockquote>\n"}], "owner": {"reputation": 65, "user_id": 8255597, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f00079fc1de2083ee50f75cd2ae6ea1d?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/8255597/boris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2629, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1499582115, "creation_date": 1499197215, "last_edit_date": 1499582115, "question_id": 44913128, "link": "https://stackoverflow.com/questions/44913128/recaptcharecaptchaerror-in-articlesshow-no-site-key-specified", "title": "Recaptcha::RecaptchaError in Articles#show No site key specified", "body": "<p>I get:</p>\n\n<blockquote>\n  <p>\"Recaptcha::RecaptchaError in Articles#show No site key specified.\"</p>\n</blockquote>\n\n<p>And I do not understand where is my mistake.</p>\n\n<p>Gemfile:</p>\n\n<pre><code>gem 'dotenv-rails', :require =&gt; 'dotenv/rails-now'\ngem \"recaptcha\", require: \"recaptcha/rails\"\n</code></pre>\n\n<p>.env</p>\n\n<pre><code>export RECAPTCHA_PUBLIC_KEY = '*******************************'\nexport RECAPTCHA_PRIVATE_KEY = '*******************************'\n</code></pre>\n\n<p>comments_controller.rb</p>\n\n<pre><code>class CommentsController &lt; ApplicationController\n\n    http_basic_authenticate_with name: \"admin\", password: \"**************\", only: :destroy\n\n  def create\n    @article = Article.find(params[:article_id])\n    @comment = @article.comments.create(comment_params)\n    redirect_to article_path(@article)\n  end\n\n  def destroy\n    @article = Article.find(params[:article_id])\n    @comment = @article.comments.find(params[:id])\n    @comment.destroy\n    redirect_to article_path(@article)\n  end\n\n  private\n    def comment_params\n      params.require(:comment).permit(:commenter, :body)\n    end\nend\n</code></pre>\n\n<p>articles_controller.rb</p>\n\n<pre><code>class ArticlesController &lt; ApplicationController\n\n    http_basic_authenticate_with name: \"admin\", password: \"**********\", except: [:index, :show]\n\n  def index\n    @articles = Article.all\n  end\n\n  def show\n    @article = Article.find(params[:id])\n  end\n\n  def new\n    @article = Article.new\n  end\n\n  def edit\n    @article = Article.find(params[:id])\n  end\n\n  def create\n    @article = Article.new(article_params)\n\n    if @article.save\n      redirect_to @article\n    else\n      render 'new'\n    end\n  end\n\n  def update\n    @article = Article.find(params[:id])\n\n    if @article.update(article_params)\n      redirect_to @article\n    else\n      render 'edit'\n    end\n  end\n\n  def destroy\n    @article = Article.find(params[:id])\n    @article.destroy\n\n    redirect_to articles_path\n  end\n\n  private\n    def article_params\n      params.require(:article).permit(:title, :text)\n    end\nend\n</code></pre>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "ruby-on-rails-5", "mysql2"], "answers": [{"comments": [{"owner": {"reputation": 2566, "user_id": 1578898, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13d8e2260005e30e823d507385019735?s=128&d=identicon&r=PG", "display_name": "vidur punj", "link": "https://stackoverflow.com/users/1578898/vidur-punj"}, "edited": false, "score": 0, "creation_date": 1513629178, "post_id": 44955547, "comment_id": 82717366, "body": "Thanks a lot. How you did you came to know about this version of the mysql2 gem will work? please share"}, {"owner": {"reputation": 3048, "user_id": 2374626, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/Z78U0.jpg?s=128&g=1", "display_name": "Satishakumar Awati", "link": "https://stackoverflow.com/users/2374626/satishakumar-awati"}, "reply_to_user": {"reputation": 2566, "user_id": 1578898, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13d8e2260005e30e823d507385019735?s=128&d=identicon&r=PG", "display_name": "vidur punj", "link": "https://stackoverflow.com/users/1578898/vidur-punj"}, "edited": false, "score": 0, "creation_date": 1513662362, "post_id": 44955547, "comment_id": 82727203, "body": "Actually In my system I had one application running in Rails 4 and mysql2 gem version 0.3.21, which was working fine. Same machine I had another app with rails 5 and mysql2 version 0.4.7, this one was giving issue. So I was very sure its not related to MYSQL installation. So I downgraded mysql2 version 0.3.21 as in Rails 4 app and luckily it did work for me. Before trying this I did uninstall and install of mysql and even OS :) almost 2-3 times, my bad I did not got to know this trick earlier."}, {"owner": {"reputation": 2566, "user_id": 1578898, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13d8e2260005e30e823d507385019735?s=128&d=identicon&r=PG", "display_name": "vidur punj", "link": "https://stackoverflow.com/users/1578898/vidur-punj"}, "edited": false, "score": 1, "creation_date": 1513668265, "post_id": 44955547, "comment_id": 82729439, "body": "Thanks, I came across the same error after installing rails 2.2 for windows from <a href=\"http://railsinstaller.org/en\" rel=\"nofollow noreferrer\">railsinstaller.org/en</a>, and follow you trick it worked."}], "tags": [], "owner": {"reputation": 3048, "user_id": 2374626, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/Z78U0.jpg?s=128&g=1", "display_name": "Satishakumar Awati", "link": "https://stackoverflow.com/users/2374626/satishakumar-awati"}, "is_accepted": true, "score": 5, "last_activity_date": 1499362359, "creation_date": 1499362359, "answer_id": 44955547, "question_id": 44912535, "link": "https://stackoverflow.com/questions/44912535/rails-5-and-ruby-2-3-3-failed-to-load-libmysql-dll/44955547#44955547", "title": "Rails 5 and Ruby 2.3.3 Failed to load libmysql.dll", "body": "<p>Downgrading mysql2 rubygem from version 0.4.7 to 0.3.21 solved my issue.</p>\n\n<p>Below steps I followed</p>\n\n<pre><code>rails new blog -d mysql # created application with mysql as database\ngem uninstall mysql2 #uninstalled mysql2-0.4.7\nGemfile :\n    gem 'mysql2', '0.3.21' #Gemfile changed mysql2 version to 0.3.21\nbundle update mysql2 #installed mysql2-0.3.21 version\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1476, "user_id": 1572286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tjzxc.png?s=128&g=1", "display_name": "Youness", "link": "https://stackoverflow.com/users/1572286/youness"}, "is_accepted": false, "score": 2, "last_activity_date": 1524842983, "last_edit_date": 1524842983, "creation_date": 1524796572, "answer_id": 50054394, "question_id": 44912535, "link": "https://stackoverflow.com/questions/44912535/rails-5-and-ruby-2-3-3-failed-to-load-libmysql-dll/50054394#50054394", "title": "Rails 5 and Ruby 2.3.3 Failed to load libmysql.dll", "body": "<p>Just as an update to this thread, specifying the platform of the gem did the job for me;</p>\n\n<pre><code>gem uninstall mysql2\ngem install mysql2 --platform=ruby\n</code></pre>\n\n<p>And here is my version details:</p>\n\n<pre><code>Windows OS\nRuby 2.5.0p0 (2017-12-25 revision 61468) [i386-mingw32]\nRails 5.1.6\nGemfile:\n  gem 'mysql2', '0.5.1'\n</code></pre>\n"}], "owner": {"reputation": 3048, "user_id": 2374626, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/Z78U0.jpg?s=128&g=1", "display_name": "Satishakumar Awati", "link": "https://stackoverflow.com/users/2374626/satishakumar-awati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6455, "favorite_count": 1, "accepted_answer_id": 44955547, "answer_count": 2, "score": 2, "last_activity_date": 1524842983, "creation_date": 1499194501, "last_edit_date": 1499244639, "question_id": 44912535, "link": "https://stackoverflow.com/questions/44912535/rails-5-and-ruby-2-3-3-failed-to-load-libmysql-dll", "title": "Rails 5 and Ruby 2.3.3 Failed to load libmysql.dll", "body": "<p>Getting below error message logged in the console while starting the server for an application created with mysql database.</p>\n\n<pre><code>Failed to load libmysql.dll from C:\\RailsInstaller\\Ruby2.3.0\\lib\\ruby\\gems\\2.3.0\\gems\\mysql2-0.4.7-x86-mingw32\\vendor\\libmysql.dll\n</code></pre>\n\n<p>Environment Details : </p>\n\n<pre><code>Window 7 64 bit\nRails 5.0.4\nruby 2.3.3p222 (2016-11-21 revision 56859) [i386-mingw32]\nmysqld  Ver 5.7.18 for Win64 on x86_64 (MySQL Community Server (GPL))\n</code></pre>\n\n<p>Post install message from mysql2 ruby gem received below message on the console.</p>\n\n<pre><code>You've installed the binary version of mysql2.\nIt was built using MySQL Connector/C version 6.1.10.\nIt's recommended to use the exact same version to avoid potential issues.\n\nAt the time of building this gem, the necessary DLL files were retrieved from:\nhttp://cdn.mysql.com/Downloads/Connector-C/mysql-connector-c-6.1.10-win32.zip\n\nThis gem *includes* vendor/libmysql.dll with redistribution notice in vendor/README.\n</code></pre>\n\n<p>I have tried the solution from <a href=\"https://stackoverflow.com/questions/29368332/failed-to-load-libmysql-dll-file-using-ruby-on-rails-3\">here</a> but did not work.</p>\n\n<p>Any help appreciated, thanks in advance.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1499193174, "post_id": 44912077, "comment_id": 76800872, "body": "Note that in Ruby including &quot;get&quot; in an accessor method is strongly discouraged. Why not do <code>@temperatures.max</code> using <a href=\"https://ruby-doc.org/core-2.4.1/Enumerable.html#method-i-max\" rel=\"nofollow noreferrer\"><code>max</code></a>? This avoids having to keep these fields up to date."}], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 2, "last_activity_date": 1499194905, "last_edit_date": 1499194905, "creation_date": 1499194292, "answer_id": 44912492, "question_id": 44912077, "link": "https://stackoverflow.com/questions/44912077/should-calculations-be-done-within-the-insert-method-or-the-getter-method-within/44912492#44912492", "title": "Should calculations be done within the insert method or the getter method within Ruby Class?", "body": "<p>Insert is a state-changing operation. It makes sense to reflect all the changes right there on the spot. Get, on the other hand, does not change state, it simply reads it.</p>\n\n<p>Imagine that you do one insert and a hundred reads. It is not very efficient to repeat calculations on each get, as the result can't possibly change since the last time. Waste of resources, but can make for somewhat cleaner code.</p>\n\n<hr>\n\n<p><em>I just noticed that I assumed a read-heavy workload. In a write-heavy workload, where you write more than you read, it's the other way around. Efficiency dictates that you put calculations in the getter. There's no one true answer, it's always a tradeoff, is what I'm trying to say.</em></p>\n"}], "owner": {"reputation": 111, "user_id": 7071657, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/2db130e1e31ec25830e701b0ee7a4aea?s=128&d=identicon&r=PG&f=1", "display_name": "David Sawatske", "link": "https://stackoverflow.com/users/7071657/david-sawatske"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499194905, "creation_date": 1499192282, "last_edit_date": 1499194128, "question_id": 44912077, "link": "https://stackoverflow.com/questions/44912077/should-calculations-be-done-within-the-insert-method-or-the-getter-method-within", "title": "Should calculations be done within the insert method or the getter method within Ruby Class?", "body": "<p>I am going through an Interview Cake question and they have the calculations done upon insertion of a new value. My instinct was to put that logic in the getter method and I was hoping for some insight on best practices. </p>\n\n<p>Their Solution:</p>\n\n<pre><code># Write a class TempTracker with these methods:\n#\n# insert()\u2014records a new temperature\n# getMax()\u2014returns the highest temp we've seen so far\n# getMin()\u2014returns the lowest temp we've seen so far\n# getMean()\u2014returns the mean of all temps we've seen so far\n# getMode()\u2014returns a mode of all temps we've seen so far\n\nclass TempTracker\n  def initialize\n    # for mode\n    @occurrences = [0] * 111 # array of 0s at indices 0..110\n    @max_occurrences = 0\n    @mode = nil\n\n    # for mean\n    @total_numbers = 0\n    @total_sum = 0.0 # mean should be float\n    @mean = nil\n\n    # for min and max\n    @min_temp = nil\n    @max_temp = nil\n  end\n\n  def insert(temperature)\n    # for mode\n    @occurrences[temperature] += 1\n    if @occurrences[temperature] &gt; @max_occurrences\n      @mode = temperature\n      @max_occurrences = @occurrences[temperature]\n    end\n\n    # for mean\n    @total_numbers += 1\n    @total_sum += temperature\n    @mean = @total_sum / @total_numbers\n\n    # for min and max\n    @max_temp = temperature if @max_temp.nil? || temperature &gt; @max_temp\n    @min_temp = temperature if @min_temp.nil? || temperature &lt; @min_temp\n  end\n\n  def get_max\n    @max_temp\n  end\n\n  def get_min\n    @min_temp\n  end\n\n  def get_mean\n    @mean\n  end\n\n  def get_mode\n    @mode\n  end\nend\n</code></pre>\n\n<p>Insert and getter methods that I wrote initially:</p>\n\n<pre><code>// ... \n\n  def insert(temp)\n    @max = temp if @max.nil? || @max &lt; temp\n    @min = temp if @min.nil? || @min &gt; temp\n\n    @total_sum += temp\n    @total_numbers += 1\n\n    @occurrences[temp] += 1\n  end\n\n// ...\n\n  def get_mean\n    @total_sum / @total_numbers\n  end\n\n  def get_mode\n    @occurrences.each_with_index.max[1]\n  end\nend\n</code></pre>\n\n<p>Any help understanding if/ why having the calculation logic in the insert method would be hugely helpful!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1499193434, "post_id": 44912010, "comment_id": 76800979, "body": "So, you want a simple <code>select</code>? If so, what is the problem? Or please show your current attempt."}, {"owner": {"reputation": 123, "user_id": 3735223, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Jcn2o.jpg?s=128&g=1", "display_name": "AlexQuezada", "link": "https://stackoverflow.com/users/3735223/alexquezada"}, "reply_to_user": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1499194583, "post_id": 44912010, "comment_id": 76801455, "body": "well yeah its a simple select inside a form, but the model collection i want to use is not related to the actual model im using, lets say I want to create a new city, so I need to have the country select on view! Ive updated the post"}, {"owner": {"reputation": 1281, "user_id": 2308531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DV29D.jpg?s=128&g=1", "display_name": "Maxim Fedotov", "link": "https://stackoverflow.com/users/2308531/maxim-fedotov"}, "edited": false, "score": 0, "creation_date": 1499197174, "post_id": 44912010, "comment_id": 76802477, "body": "If you&#39;ve solved it, just add it as an answer, instead of inside the question"}], "answers": [{"tags": [], "owner": {"reputation": 123, "user_id": 3735223, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Jcn2o.jpg?s=128&g=1", "display_name": "AlexQuezada", "link": "https://stackoverflow.com/users/3735223/alexquezada"}, "is_accepted": false, "score": 0, "last_activity_date": 1499205814, "creation_date": 1499205814, "answer_id": 44914508, "question_id": 44912010, "link": "https://stackoverflow.com/questions/44912010/set-select-rails-with-no-related-model-collection/44914508#44914508", "title": "Set select rails with no related model collection", "body": "<p>Solved it!</p>\n\n<pre><code>        &lt;% \n          concat f.select :idubicacion, Mtopabellon.all.collect {|p| [ \n          p.nombre, p.codpabellon ] }, {prompt: 'Seleccione una \n          pabellon'}, :class=&gt;'form-control', :id =&gt; 'cmbPab'\n        %&gt;\n</code></pre>\n\n<p>Just setup the collection I needed even using a different :idubicacion and it works!</p>\n"}], "owner": {"reputation": 123, "user_id": 3735223, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Jcn2o.jpg?s=128&g=1", "display_name": "AlexQuezada", "link": "https://stackoverflow.com/users/3735223/alexquezada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499205814, "creation_date": 1499191997, "last_edit_date": 1499205789, "question_id": 44912010, "link": "https://stackoverflow.com/questions/44912010/set-select-rails-with-no-related-model-collection", "title": "Set select rails with no related model collection", "body": "<p>Im trying to setup a combobox with a no related model collection, it will be displayed in my Stand model new view, but they are not related directly. </p>\n\n<p>It is like show the classic country -> state -> city relation form where country and city are not directly related, so what I want to do is just show a \"country\" combo when I am creating a new city to display just related states! PLS HELP! IM DYING DOING THIS!</p>\n\n<p>I want to do something like this:</p>\n\n<pre><code>      &lt;div class=\"form-group\"&gt;\n        &lt;% \n          concat f.cr_ubicacion.select :codpabellon, \n          Mtopabellon.order(:nombre), :codpabellon, :nombre, {}, \n          {class: \"store-select\"}\n        %&gt;\n      &lt;/div&gt;\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "numbers"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1499190009, "post_id": 44911549, "comment_id": 76799629, "body": "The Ruby convention is to use <a href=\"https://en.wikipedia.org/wiki/Snake_case\" rel=\"nofollow noreferrer\">snake-case</a> for names of variables and methods (e.g., <code>favorite_numbers</code>). You are under no obligation to adhere to that convention but you&#39;ll find that 99+% of Rubiests do. Also, <code>.split</code> without an argument is often used, as it is equivalent to <code>split(&#47;\\s+)</code>; that is, split on one or more whitespace characters."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 2, "creation_date": 1499190444, "post_id": 44911549, "comment_id": 76799787, "body": "<code>arr.size</code> or <code>arr.length</code>, self-explanatory I hope. It would probably be worth following a tutorial where these sorts of things are covered."}], "answers": [{"tags": [], "owner": {"reputation": 3664, "user_id": 1745064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1f603a6e11897c650fffcb77c265c444?s=128&d=identicon&r=PG", "display_name": "thiagowfx", "link": "https://stackoverflow.com/users/1745064/thiagowfx"}, "is_accepted": true, "score": 1, "last_activity_date": 1499190043, "creation_date": 1499190043, "answer_id": 44911609, "question_id": 44911549, "link": "https://stackoverflow.com/questions/44911549/find-amount-of-values-in-an-array/44911609#44911609", "title": "Find Amount of Values in an Array", "body": "<pre><code>favoriteNumbers.count\n</code></pre>\n\n<p>is the method you are looking for!</p>\n"}], "owner": {"reputation": 788, "user_id": 8156202, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/oo1Ep.png?s=128&g=1", "display_name": "CyanCoding", "link": "https://stackoverflow.com/users/8156202/cyancoding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 44911609, "answer_count": 1, "score": 0, "last_activity_date": 1535210723, "creation_date": 1499189742, "last_edit_date": 1535210723, "question_id": 44911549, "link": "https://stackoverflow.com/questions/44911549/find-amount-of-values-in-an-array", "title": "Find Amount of Values in an Array", "body": "<h2>Problem</h2>\n\n<p>So, this is pretty straight forward; I am making a program that asks for some information (favorite numbers), and you separate the numbers by spaces, and that is sent to an <code>array</code>. Then, I need to find how many <code>value</code>s are in the <code>array</code>.</p>\n\n<h2>Example</h2>\n\n<pre><code>print \"What is your favorite number? (if you have more than one, seperate by spaces)\"\nfavoriteNumbersUnformat = gets.chomp\nfavoriteNumbers = favoriteNumbersUnformat.split(' ').map(&amp;:to_i)\n</code></pre>\n\n<h2>Explanation &amp; End</h2>\n\n<p>So, that block of code above will take some numbers, and send them to an <code>array</code> with it adding a new <code>value</code> for each space e.g <code>2 8 21</code> \u2192 <code>[2, 8, 21]</code>. That works just dandy but I want some way to have the program find how many <code>value</code>s are in the array. That way, I could find out how many favorite numbers they have (for example).</p>\n\n<p>I imagine this is a pretty simple problem and I thought something like this would have been asked before on Stackoverflow but I put in my title and I found nothing, over and over again. Even when I altered it a dozen times, it still didn't come up with what I want.</p>\n\n<p>Any ideas? Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "html", "file", "coffeescript"], "comments": [{"owner": {"reputation": 1594, "user_id": 2681997, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qgKiM.jpg?s=128&g=1", "display_name": "Ajay Barot", "link": "https://stackoverflow.com/users/2681997/ajay-barot"}, "edited": false, "score": 0, "creation_date": 1499188026, "post_id": 44911048, "comment_id": 76798829, "body": "Please take reference from this links for image validation (front side validation). 1. <a href=\"https://jsfiddle.net/RokoCB/7jc9v2gL/\" rel=\"nofollow noreferrer\">jsfiddle.net/RokoCB/7jc9v2gL</a>  2. <a href=\"https://stackoverflow.com/questions/1310378/determining-image-file-size-dimensions-via-javascript\" title=\"determining image file size dimensions via javascript\">stackoverflow.com/questions/1310378/&hellip;</a>"}, {"owner": {"reputation": 3004, "user_id": 5830036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/B2b06.png?s=128&g=1", "display_name": "Mayur Shah", "link": "https://stackoverflow.com/users/5830036/mayur-shah"}, "edited": false, "score": 0, "creation_date": 1499228513, "post_id": 44911048, "comment_id": 76809905, "body": "Please go through <a href=\"https://stackoverflow.com/a/44276469/5830036\">stackoverflow.com/a/44276469/5830036</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1122, "user_id": 3283795, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/satrn.jpg?s=128&g=1", "display_name": "kajal ojha", "link": "https://stackoverflow.com/users/3283795/kajal-ojha"}, "is_accepted": true, "score": 0, "last_activity_date": 1499219135, "creation_date": 1499219135, "answer_id": 44915909, "question_id": 44911048, "link": "https://stackoverflow.com/questions/44911048/validate-file-upload-in-rails/44915909#44915909", "title": "Validate file upload in rails", "body": "<pre><code>$(document).ready(function(){\n var width = $('#file').width();\n var height = $('#file').height();\n if(width &gt; 400 || height &gt; 200){\n alert('please try a small image');\n}\n});\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 7502107, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ehPY2.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/7502107/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 364, "favorite_count": 0, "accepted_answer_id": 44915909, "answer_count": 1, "score": 0, "last_activity_date": 1499219135, "creation_date": 1499187523, "question_id": 44911048, "link": "https://stackoverflow.com/questions/44911048/validate-file-upload-in-rails", "title": "Validate file upload in rails", "body": "<p>I need to control the weight and size in pixels of an image, this is my code:</p>\n\n<pre><code>&lt;div class=\"control-group row\"&gt;\n            &lt;%= f.fields_for :activity_documents, @activity.activity_documents do |builder| %&gt;\n\n            &lt;div class=\"span6\"&gt;\n                &lt;%= builder.label \"Nombre de la imagen\"  %&gt;\n                &lt;%= builder.text_field :name, class:'imagen_file',:required =&gt; true, data:{required:true}, :placeholder=&gt;'Nombre de la imagen' %&gt;\n            &lt;/div&gt;\n\n            &lt;div class=\"span5\"&gt;\n                &lt;%= builder.label \"Imagen\"  %&gt;\n                &lt;% if builder.object.document_file_name? %&gt;\n\n                &lt;%= image_tag builder.object.document.url, :id=&gt;\"file\" %&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;\n\n\n            &lt;% else %&gt;\n                &lt;%= builder.file_field :document, class:'form-control',data:{required:true}, style:'background-color:#e9e9e9; width:200px;', :id =&gt; 'file' %&gt;\n\n\n                &lt;% end %&gt;\n                &lt;%= builder.link_to_remove class:'btn btn-danger' do %&gt;\n                &lt;i class=\"fa fa-minus\"&gt;&lt;/i&gt;\n                &lt;% end %&gt;\n            &lt;/div&gt;\n            &lt;% end %&gt;\n        &lt;/div&gt;\n</code></pre>\n\n<p>I need when I select an image check the resolution and weigh</p>\n"}, {"tags": ["ruby", "rest", "testing", "rest-client", "http-accept-header"], "answers": [{"tags": [], "owner": {"reputation": 35, "user_id": 4606308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d01c458130e5560464b42f6a2bfc5dc?s=128&d=identicon&r=PG&f=1", "display_name": "Suley Mahmoud", "link": "https://stackoverflow.com/users/4606308/suley-mahmoud"}, "is_accepted": true, "score": 0, "last_activity_date": 1499626500, "creation_date": 1499626500, "answer_id": 44999895, "question_id": 44910964, "link": "https://stackoverflow.com/questions/44910964/accept-header-in-ruby-rest-client-i-believe-causes-return-of-an-error-code-404/44999895#44999895", "title": "Accept header in ruby rest-client I believe causes return of an error code 404", "body": "<p>The problem wasn't the request, it was the API didn't recognise the user-agent from the ruby request. It also returned a 404 when I sent a curl request.</p>\n\n<p>When passing a </p>\n\n<pre><code> User-Agent: \n</code></pre>\n\n<p>with a browser/mobile device, the API responded as expected.</p>\n"}], "owner": {"reputation": 35, "user_id": 4606308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d01c458130e5560464b42f6a2bfc5dc?s=128&d=identicon&r=PG&f=1", "display_name": "Suley Mahmoud", "link": "https://stackoverflow.com/users/4606308/suley-mahmoud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 0, "accepted_answer_id": 44999895, "answer_count": 1, "score": 0, "last_activity_date": 1499626500, "creation_date": 1499187149, "last_edit_date": 1499245642, "question_id": 44910964, "link": "https://stackoverflow.com/questions/44910964/accept-header-in-ruby-rest-client-i-believe-causes-return-of-an-error-code-404", "title": "Accept header in ruby rest-client I believe causes return of an error code 404", "body": "<p>I am passing the following request to ruby rest-client gem;</p>\n\n<pre><code>RestClient::Request.execute(method: :get,\n                            url: Config['site_url'] + path,\n                            verify_ssl: OpenSSL::SSL::VERIFY_NONE,\n                            headers: { organisation: 'WEB',\n                                       accept: 'application/vnd.xyz.v2+json' })\n</code></pre>\n\n<p>Gem Versions\nruby version 2.3.3\nrest-client 2.0.2</p>\n\n<p>I have passed the same request to Postman and I get the response I expected.</p>\n\n<p>I also have a v1 of the API that accepts just \":json\" and this also responds as expected so my feeling is that it is something around the </p>\n\n<pre><code>accept: 'application/vnd.xyz.v2+json'\n</code></pre>\n\n<p>That is causing the problem but I'm not sure what exactly. As my feeling is if there was something wrong with the response then postman would also complain.</p>\n\n<p>The documentation here <a href=\"https://github.com/rest-client/rest-client\" rel=\"nofollow noreferrer\">https://github.com/rest-client/rest-client</a>\ndefault request headers: rest-client sets </p>\n\n<pre><code>accept:*/*\n</code></pre>\n\n<p>Just in case I passed <em>/</em> (although I am assuming * means enter what you need) but this returned the v1 response.</p>\n\n<p>The method, url and verify_ssl are working in multiple other requests. So I don't think there is any issue there either.</p>\n\n<p>Anyone, have any suggestions? Thx</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 10255, "user_id": 1155142, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c680db41999d478ca34d1a77a470e30d?s=128&d=identicon&r=PG", "display_name": "gabrielhilal", "link": "https://stackoverflow.com/users/1155142/gabrielhilal"}, "edited": false, "score": 0, "creation_date": 1499188570, "post_id": 44910853, "comment_id": 76799043, "body": "I think you should add the error to the <code>base</code> or <code>person_id</code> instead of <code>person</code> association: <code>errors.add(:person_id, &quot;child can not be parent&quot;) if person_id == child_id</code>"}], "answers": [{"comments": [{"owner": {"reputation": 158, "user_id": 1336205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/359f6c8f97d71a9195c5320369f70a1c?s=128&d=identicon&r=PG", "display_name": "Steve Cockram", "link": "https://stackoverflow.com/users/1336205/steve-cockram"}, "edited": false, "score": 0, "creation_date": 1499187802, "post_id": 44911032, "comment_id": 76798742, "body": "My issue isn&#39;t that only one error is shown. But that I see my 500 error page. Deleting all error display code or changing it doesn&#39;t fix the issue."}, {"owner": {"reputation": 158, "user_id": 1336205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/359f6c8f97d71a9195c5320369f70a1c?s=128&d=identicon&r=PG", "display_name": "Steve Cockram", "link": "https://stackoverflow.com/users/1336205/steve-cockram"}, "edited": false, "score": 0, "creation_date": 1499245418, "post_id": 44911032, "comment_id": 76818827, "body": "Hello @pavan - Thanks for the update, I found adding the error to <code>:base</code> <code>:parent</code> or <code>:parent_id</code> doesn&#39;t resolve the issue. Including all permutations of <code>validates_associated</code> combined with <code>:children, :parenthoods, :childhoods, :parents</code>. Cheers"}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": false, "score": 1, "last_activity_date": 1499189263, "last_edit_date": 1499189263, "creation_date": 1499187439, "answer_id": 44911032, "question_id": 44910853, "link": "https://stackoverflow.com/questions/44910853/displaying-errors-for-rails-has-many-through-associations/44911032#44911032", "title": "Displaying errors for rails has_many through associations", "body": "<blockquote>\n  <p>Try to make somebody their own child: Instead of showing the\n  validation error on the form it, I instead get the 500 error page with\n  this error:</p>\n  \n  <p>ActiveRecord::RecordInvalid in PeopleController#update Validation\n  failed: Person child can not be parent</p>\n</blockquote>\n\n<p>You have <code>= @person.errors.full_messages.first</code> which means <em>it always shows only <strong>first</strong> error message</em>. You should instead loop through it to show <em>all error messages on the form</em></p>\n\n<pre><code>- @person.errors.full_messages.each do |msg|\n  = msg\n</code></pre>\n\n<p><strong><em>Update:</em></strong></p>\n\n<blockquote>\n  <p>add(attribute, message = :invalid, options = {}) public</p>\n</blockquote>\n\n<p>As <strong>@gabrielhilal</strong> mentioned in the comments, the first parameter of the <a href=\"https://apidock.com/rails/ActiveModel/Errors/add\" rel=\"nofollow noreferrer\"><em><code>add</code></em></a> should be an <code>attribute</code>. So change <code>:person</code> to <code>:person_id</code></p>\n\n<pre><code>def parent_can_not_be_child\n  errors.add(:person_id, \"child can not be parent\") if person_id == child_id\nend\n</code></pre>\n\n<p>And add <code>validates_associated :parenthoods</code> to <code>Person</code> model to show up that validation error in the list of <code>@person.errors</code></p>\n"}, {"tags": [], "owner": {"reputation": 158, "user_id": 1336205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/359f6c8f97d71a9195c5320369f70a1c?s=128&d=identicon&r=PG", "display_name": "Steve Cockram", "link": "https://stackoverflow.com/users/1336205/steve-cockram"}, "is_accepted": false, "score": 0, "last_activity_date": 1499245726, "creation_date": 1499245726, "answer_id": 44921743, "question_id": 44910853, "link": "https://stackoverflow.com/questions/44910853/displaying-errors-for-rails-has-many-through-associations/44921743#44921743", "title": "Displaying errors for rails has_many through associations", "body": "<p>Thank you very much to @Pavan for pointing me in the correct direction! The fix is to write this as the validation method:</p>\n\n<pre><code>def parent_can_not_be_child\n  person.errors.add(:base, \"child can not be parent\") if person_id == child_id\nend\n</code></pre>\n\n<p>And then include the validates associated validator on the person object:</p>\n\n<pre><code>validates_associated :parenthoods\n</code></pre>\n\n<p>The key is that adding the error to <em>person</em> not to the <em>parenthood</em> means the error is displayed in @person.errors later.</p>\n"}], "owner": {"reputation": 158, "user_id": 1336205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/359f6c8f97d71a9195c5320369f70a1c?s=128&d=identicon&r=PG", "display_name": "Steve Cockram", "link": "https://stackoverflow.com/users/1336205/steve-cockram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2208, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1499245726, "creation_date": 1499186627, "last_edit_date": 1499194538, "question_id": 44910853, "link": "https://stackoverflow.com/questions/44910853/displaying-errors-for-rails-has-many-through-associations", "title": "Displaying errors for rails has_many through associations", "body": "<p>I have the following class:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Person &lt; ApplicationRecord\n  validates :name, presence: true\n\n  has_many :parenthoods\n  has_many :children, through: :parenthoods, index_errors: true\n\n  has_many :childhoods, class_name: 'Parenthood', foreign_key: 'child_id'\n  has_many :parents, through: :childhoods, source: :person\nend\n</code></pre>\n\n<p>With an explicit join-table model:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Parenthood &lt; ApplicationRecord\n  belongs_to :person\n  belongs_to :child, class_name: 'Person'\n  validate :parent_can_not_be_child\n  private\n    def parent_can_not_be_child\n      errors.add(:person, \"child can not be parent\") if person_id == child_id\n    end\nend\n</code></pre>\n\n<p>I would prefer to keep working with a <code>has_many :through</code> as opposed to a habtm if possible. And it seemed to the most reasonable way to create the association. The update action in the controller is pretty straight forward:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def update\n  @person = current_user.people.find(params[:id])\n  if @person.update_attributes(person_params)\n    redirect_to @person\n  else\n    render action: 'edit'\n  end\nend\n</code></pre>\n\n<p>And in the view I have (HAML, but it seems pretty clear in its intent)</p>\n\n<pre><code>-if @person.errors.any?\n  = @person.errors.full_messages.first\n</code></pre>\n\n<p>The update action has the following behaviours:</p>\n\n<ul>\n<li>Input is all OK: Works as intended \u2714\ufe0f</li>\n<li>Name validation fails: Shows a validation error in the form template as you would expect \u2714\ufe0f</li>\n<li>Try to make somebody their own child: Instead of showing the validation error on the form it, I instead get the 500 error page with this error:</li>\n</ul>\n\n<blockquote>\n  <p>ActiveRecord::RecordInvalid in PeopleController#update  </p>\n  \n  <p>Validation failed: Person child can not be parent</p>\n</blockquote>\n\n<p>I'm sure there is an easy way to handle this in rails but I just seem to be going around in circles at the moment, any help appreciated lots!</p>\n"}, {"tags": ["arrays", "ruby", "string"], "comments": [{"owner": {"reputation": 2549, "user_id": 3284936, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TDrZU.jpg?s=128&g=1", "display_name": "dimitry_n", "link": "https://stackoverflow.com/users/3284936/dimitry-n"}, "edited": false, "score": 2, "creation_date": 1499185896, "post_id": 44910624, "comment_id": 76797890, "body": "the argument passed in <code>.split(&#39;&#39;)</code> is actually a delimiter for array elements, so you if you <code>split(&#39;,&#39;)</code>, the input will be split by comma, thus turning every entered sequence of characters separated by commas into a member or an array. To turn the input into integers you can simply <code>.map(&amp;:to_i)</code> your array."}], "answers": [{"comments": [{"owner": {"reputation": 788, "user_id": 8156202, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/oo1Ep.png?s=128&g=1", "display_name": "CyanCoding", "link": "https://stackoverflow.com/users/8156202/cyancoding"}, "edited": false, "score": 0, "creation_date": 1499187041, "post_id": 44910887, "comment_id": 76798392, "body": "In this example, what does <code>.map()</code> do? I know what <code>to_i</code> does but why are you using <code>.map()</code>?"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 788, "user_id": 8156202, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/oo1Ep.png?s=128&g=1", "display_name": "CyanCoding", "link": "https://stackoverflow.com/users/8156202/cyancoding"}, "edited": false, "score": 0, "creation_date": 1499187297, "post_id": 44910887, "comment_id": 76798522, "body": "@CyanCoding: What is the object I&#39;m calling <code>map</code> on? Where is the corresponding documentation? Why wouldn&#39;t <code>&quot;15 17 21 46&quot;.split.to_i</code> work? Those are the questions you should ask yourself anytime you don&#39;t know that a method does."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1499192644, "post_id": 44910887, "comment_id": 76800644, "body": "Readers unfamiliar with <code>split</code>: <code>split</code> without an argument is equivalent to <code>split(&#47;\\s+&#47;)</code>, <code>\\s</code> representing a whitespace character (mainly spaces, tabs (<code>\\t</code>) and newlines (<code>\\n</code>), but also carriage returns (<code>\\r</code>) and form-feeds (<code>\\f</code>)), so, <code>&quot;1\u00a0\u00a0\u00a0\u00a0 2, 3&quot;.split #=&gt; [1,2,3]</code>."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 6, "last_activity_date": 1499186738, "creation_date": 1499186738, "answer_id": 44910887, "question_id": 44910624, "link": "https://stackoverflow.com/questions/44910624/split-string-by-spaces-into-an-array/44910887#44910887", "title": "Split string by spaces into an array", "body": "<p><a href=\"https://ruby-doc.org/core-2.2.0/String.html#method-i-split\" rel=\"noreferrer\"><code>String#split</code></a> doesn't actually need an argument if you want to split around whitespaces :</p>\n\n<pre><code>\"15 17 21 46\".split\n#=&gt; [\"15\", \"17\", \"21\", \"46\"]\n</code></pre>\n\n<p>If you want to specify an argument, you need to use a space, not an empty string :</p>\n\n<pre><code>\"15 17 21 46\".split(' ')\n#=&gt; [\"15\", \"17\", \"21\", \"46\"]\n</code></pre>\n\n<p>And if you want to convert those strings to integers :</p>\n\n<pre><code>\"15 17 21 46\".split(' ').map(&amp;:to_i)\n#=&gt; [15, 17, 21, 46]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": false, "score": 1, "last_activity_date": 1499191554, "creation_date": 1499191554, "answer_id": 44911925, "question_id": 44910624, "link": "https://stackoverflow.com/questions/44910624/split-string-by-spaces-into-an-array/44911925#44911925", "title": "Split string by spaces into an array", "body": "<p>Eric Duminil's <a href=\"https://stackoverflow.com/a/44910887/298607\">answer</a> shows how to split the string on what the contents is not -- spaces. Perfectly valid if you know that your string contains only digits of interest and spaces.</p>\n\n<p>You can also gather the elements based on what you want -- digits vs what you don't want -- the spaces between the digits.</p>\n\n<p>To do that in Ruby, use a regex with <code>.scan</code>:</p>\n\n<pre><code>&gt; \"15 17 21 46\".scan(/\\d+/)\n=&gt; [\"15\", \"17\", \"21\", \"46\"]\n</code></pre>\n\n<p>Or, if you have numbers embedded in strings that you do not want:</p>\n\n<pre><code>&gt; \"15 17 21 46 123abc 34\".scan(/\\b\\d+\\b/)\n=&gt; [\"15\", \"17\", \"21\", \"46\", \"34\"]\n</code></pre>\n\n<p>Note that <code>123</code> is not included since it is part of the string <code>123abc</code> as opposed to:</p>\n\n<pre><code>&gt; \"15 17 21 46 123abc 34\".scan(/\\d+/)\n=&gt; [\"15\", \"17\", \"21\", \"46\", \"123\", \"34\"]\n</code></pre>\n\n<p>This includes <code>123</code> since the word break <code>\\b</code> was not part of the regex. </p>\n\n<p>If you just split on spaces:</p>\n\n<pre><code>&gt; \"15 17 21 46 123abc 34\".split\n=&gt; [\"15\", \"17\", \"21\", \"46\", \"123abc\", \"34\"]\n</code></pre>\n\n<p>What the 'right answer' is is based on your goal and your data. </p>\n\n<p>Then you can convert those values to integers:</p>\n\n<pre><code>\"15 17 21 46 123abc 34\".scan(/\\b\\d+\\b/).map {|s| Integer(s) }\n=&gt; [15, 17, 21, 46, 34]\n</code></pre>\n\n<p>Note that I am calling <code>Integer</code> vs the more permissive <code>.to_i</code>. <code>Integer</code> will raise an exception for strings that are not completely converted to an integer vs <code>to_i</code> that will convert the first few and silently ignore anything else:</p>\n\n<pre><code>&gt; '1.5E+06'.to_i\n=&gt; 1\n&gt; Integer('1.5E+06')\nArgumentError: invalid value for Integer(): \"1.5E+06\"\n    from (irb):19:in `Integer'\n    from (irb):19\n    from /usr/local/bin/irb:11:in `&lt;main&gt;'\n</code></pre>\n\n<p>Again, it depends on the strings and your goal to know which is 'right.'</p>\n"}], "owner": {"reputation": 788, "user_id": 8156202, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/oo1Ep.png?s=128&g=1", "display_name": "CyanCoding", "link": "https://stackoverflow.com/users/8156202/cyancoding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8559, "favorite_count": 0, "accepted_answer_id": 44910887, "answer_count": 2, "score": 8, "last_activity_date": 1499247605, "creation_date": 1499185661, "last_edit_date": 1499247605, "question_id": 44910624, "link": "https://stackoverflow.com/questions/44910624/split-string-by-spaces-into-an-array", "title": "Split string by spaces into an array", "body": "<p>I want to have a user type some words, and get them converted to an array. I want to split by word. Here is an example:</p>\n\n<p><code>\"15 17 21 46\"</code> \u2192 <code>[15, 17, 21, 46]</code></p>\n\n<p>Stuff like <code>split(\"\")</code> and <code>scan</code> make an array out of every single letter.</p>\n\n<p>I would prefer doing it without using YAML. Also, take note in the example that it doesn't include the spaces but it uses those as breaks between values.</p>\n\n<p>Is it possible to do what I did in the example above where I have a bunch of numbers with spaces and those get converted directly to integers? I feel like the spaces might interrupt it in case I do something like <code>to_i</code>.</p>\n\n<p>This question is similar to <a href=\"https://stackoverflow.com/questions/16699717/string-to-array-in-ruby\">String to Array in Ruby</a>, but it does not have an answer.</p>\n"}, {"tags": ["ruby", "docker", "environment-variables"], "answers": [{"comments": [{"owner": {"reputation": 1247, "user_id": 2109121, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/zwxKQ.jpg?s=128&g=1", "display_name": "vovan", "link": "https://stackoverflow.com/users/2109121/vovan"}, "edited": false, "score": 0, "creation_date": 1499189303, "post_id": 44911052, "comment_id": 76799339, "body": "thanks. Really, the value of KEY should not be enclosed in quotes"}, {"owner": {"reputation": 24981, "user_id": 1094246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dda38b3b4f0bd9b57759601a3652e520?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1094246/robert"}, "reply_to_user": {"reputation": 1247, "user_id": 2109121, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/zwxKQ.jpg?s=128&g=1", "display_name": "vovan", "link": "https://stackoverflow.com/users/2109121/vovan"}, "edited": false, "score": 0, "creation_date": 1499189995, "post_id": 44911052, "comment_id": 76799624, "body": "That&#39;s correct. See your own example: <code>=&gt; &quot;\\&quot;---</code>, see the <code>\\&quot;</code>"}], "tags": [], "owner": {"reputation": 24981, "user_id": 1094246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dda38b3b4f0bd9b57759601a3652e520?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1094246/robert"}, "is_accepted": false, "score": 1, "last_activity_date": 1499187531, "creation_date": 1499187531, "answer_id": 44911052, "question_id": 44910515, "link": "https://stackoverflow.com/questions/44910515/how-to-prevent-escaping-of-an-env-variable-passed-into-ruby-application-in-docke/44911052#44911052", "title": "How to prevent escaping of an ENV variable passed into ruby application in docker container", "body": "<p>You've hit a known issue of docker:</p>\n\n<p><a href=\"https://github.com/moby/moby/issues/11443\" rel=\"nofollow noreferrer\">https://github.com/moby/moby/issues/11443</a></p>\n\n<blockquote>\n  <p>Sorry for the inconvenience but I would rather go the conservative route on this one :(\n  The problem can be solved with echo -e like you mentioned and I think the benefit of keeping env-file simple is higher.\n  I'm going to close this issue, but feel free to continue the discussion and speak up if you disagree. </p>\n</blockquote>\n\n<p>The equivalent in ruby of that <code>echo -e</code> is replacing literal '\\n' with a real newline:</p>\n\n<pre><code>ENV['KEY'].gsub('\\n', \"\\n\")\n</code></pre>\n\n<p><strong>And</strong> remove the double quotes, leave it as this:</p>\n\n<pre><code>KEY=-----BEGIN PRIVATE KEY-----\\nBADANBgkqhki......xjiWsX7Qjoh8XH8nAECgYEAkCNIy1eICdUUt6HgV\\nnEGKpwDETJTIJdmW5MlOzsURI/RSnE2Qas/k758isGLaA4m9dZJoxuP/pCfwcvLj\\nwmjVBPdTTNF6ADgor6ZVIp6os5wIIurZH7f8yXaggTEyk5r8K6qxz9t/D\\n4FaPDsZ2icg0N5i2y/2Sa0w=\\n-----END PRIVATE KEY-----\\n\n</code></pre>\n\n<p><strong>But</strong> I recommend to just mount a file:</p>\n\n<pre><code>version: '2'\n\nservices:\n  testenv:\n    image: ruby:2.4-slim  \n    volumes:\n      - ./keys.pem:/root/keys.pem\n</code></pre>\n\n<p>Then do a simple file read from ruby.</p>\n"}], "owner": {"reputation": 1247, "user_id": 2109121, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/zwxKQ.jpg?s=128&g=1", "display_name": "vovan", "link": "https://stackoverflow.com/users/2109121/vovan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 954, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1499187531, "creation_date": 1499185177, "question_id": 44910515, "link": "https://stackoverflow.com/questions/44910515/how-to-prevent-escaping-of-an-env-variable-passed-into-ruby-application-in-docke", "title": "How to prevent escaping of an ENV variable passed into ruby application in docker container", "body": "<p>keys.env contains private key:</p>\n\n<pre><code>KEY=\"-----BEGIN PRIVATE KEY-----\\nBADANBgkqhki......xjiWsX7Qjoh8XH8nAECgYEAkCNIy1eICdUUt6HgV\\nnEGKpwDETJTIJdmW5MlOzsURI/RSnE2Qas/k758isGLaA4m9dZJoxuP/pCfwcvLj\\nwmjVBPdTTNF6ADgor6ZVIp6os5wIIurZH7f8yXaggTEyk5r8K6qxz9t/D\\n4FaPDsZ2icg0N5i2y/2Sa0w=\\n-----END PRIVATE KEY-----\\n\"\n</code></pre>\n\n<p>(The value of KEY should be enclosed in quotes because it contains \\n)</p>\n\n<p><em>docker-compose.yml</em> contains <em>env_file</em> parameter:</p>\n\n<pre><code>version: '2'\n\nservices:\n  testenv:\n    image: ruby:2.4-slim  \n    env_file:\n      - ./keys.env\n</code></pre>\n\n<p>I run the container with ruby app:</p>\n\n<pre><code>docker-compose run testenv\n</code></pre>\n\n<p>and try to use ENV['KEY'] variable:</p>\n\n<pre><code>irb(main):001:0&gt; ENV['KEY']\n=&gt; \"\\\"-----BEGIN PRIVATE KEY-----\\\\nBADANBgkqhki......xjiWsX7Qjoh8XH8nAECgYEAkCNIy1eICdUUt6HgV\\\\nnEGKpwDETJTIJdmW5MlOzsURI/RSnE2Qas/k758isGLaA4m9dZJoxuP/pCfwcvLj\\\\nwmjVBPdTTNF6ADgor6ZVIp6os5wIIurZH7f8yXaggTEyk5r8K6qxz9t/D\\\\n4FaPDsZ2icg0N5i2y/2Sa0w=\\\\n-----END PRIVATE KEY-----\\\\n\\\"\"\n</code></pre>\n\n<p>The variable is escaped, but I need clean private_key.</p>\n\n<p>I have not found the answer in the Docker documentations.</p>\n\n<p>I see two working solutions, but none seems to me right.</p>\n\n<ol>\n<li>Store private_key in the .env file encoded and without quotes. A\nmodule in the app will decode this value.</li>\n<li>Unescape value in the app (like this\n<a href=\"https://stackoverflow.com/questions/8639642/best-way-to-escape-and-unescape-strings-in-ruby\">Best way to escape and unescape strings in Ruby?</a>)</li>\n</ol>\n\n<p>Is there a way to solve this problem with built-in capabilities of Docker?</p>\n"}, {"tags": ["ruby", "ubuntu", "libsndfile"], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 11, "last_activity_date": 1499195815, "creation_date": 1499195815, "answer_id": 44912841, "question_id": 44910504, "link": "https://stackoverflow.com/questions/44910504/trying-to-install-libsndfile-on-ubuntu-16/44912841#44912841", "title": "Trying to install libsndfile on Ubuntu 16", "body": "<p>When you want to compile something against a library you'll need not only the library itself, which is usually one or more <code>.so</code> type files, but the header files that describe how the library works. These are often omitted unless you install the <code>-dev</code> version of the package:</p>\n\n<pre><code>apt-get install libsndfile-dev\n</code></pre>\n\n<p>This should give the Ruby <code>extconf.rb</code> enough information to compile and link against that library.</p>\n"}], "owner": {"reputation": 17448, "user_id": 327934, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d6cacf73c62b29dbb1b79d151cc7d1c0?s=128&d=identicon&r=PG", "display_name": "Alex V", "link": "https://stackoverflow.com/users/327934/alex-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11494, "favorite_count": 2, "accepted_answer_id": 44912841, "answer_count": 1, "score": 4, "last_activity_date": 1499195815, "creation_date": 1499185106, "last_edit_date": 1499195672, "question_id": 44910504, "link": "https://stackoverflow.com/questions/44910504/trying-to-install-libsndfile-on-ubuntu-16", "title": "Trying to install libsndfile on Ubuntu 16", "body": "<p>I've tried running</p>\n\n<pre><code>sudo apt-get install libsndfile\n&gt; E: Unable to locate package libsndfile\n</code></pre>\n\n<p>So then I try</p>\n\n<pre><code>sudo apt-get install libsndfile1\n</code></pre>\n\n<p>It installs, but where, how?</p>\n\n<pre><code>find /usr/ -name libsndfile*\n&gt; /usr/lib/x86_64-linux-gnu/libsndfile.so.1\n&gt; /usr/lib/x86_64-linux-gnu/libsndfile.so.1.0.25\n</code></pre>\n\n<p>At the end of the day my goal is to get the lib to work for ruby, with either:</p>\n\n<pre><code>gem install sndfile\ngem install ruby-audio\n</code></pre>\n\n<p>When I try installing ruby-audio, I get:</p>\n\n<pre><code>extconf.rb:21:in `&lt;main&gt;':   Can't find libsndfile (http://www.mega-nerd.com/libsndfile/) (RuntimeError)\n</code></pre>\n\n<p>So for some reason the library doesn't install properly.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "flash", "hyperlink", "flash-message"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 1, "creation_date": 1499186978, "post_id": 44910401, "comment_id": 76798359, "body": "Are you sure it is not generating <code>id</code>? Putting <code>%Q[Click following &lt;a href=&quot;#&quot; class=&quot;flash_link&quot; id=&quot;flash_link&quot; &gt;&lt;strong&gt;link&lt;&#47;strong&gt;&lt;&#47;a&gt; to proceed]</code> in the console gave me this <code>&quot;Click following &lt;a href=\\&quot;#\\&quot; class=\\&quot;flash_link\\&quot; id=\\&quot;flash_link\\&quot; &gt;&lt;strong&gt;link&lt;&#47;strong&gt;&lt;&#47;a&gt; to proceed&quot;</code>"}, {"owner": {"reputation": 323, "user_id": 1934168, "user_type": "registered", "accept_rate": 16, "profile_image": "https://www.gravatar.com/avatar/a8e85918d3db651edd04097020cbf5f1?s=128&d=identicon&r=PG", "display_name": "Hilmi Yamc\u0131", "link": "https://stackoverflow.com/users/1934168/hilmi-yamc%c4%b1"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1499187274, "post_id": 44910401, "comment_id": 76798508, "body": "I have tried several times. I&#39;m using rails 5, which rails version are you using now ?"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1499188536, "post_id": 44910401, "comment_id": 76799031, "body": "I;m using Rails 5 too"}], "answers": [{"tags": [], "owner": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "is_accepted": false, "score": 0, "last_activity_date": 1499188472, "creation_date": 1499188472, "answer_id": 44911279, "question_id": 44910401, "link": "https://stackoverflow.com/questions/44910401/link-in-a-flash-message-ruby-on-rails/44911279#44911279", "title": "Link in a flash message, ruby on rails", "body": "<p>I think you problem is not from %Q, I curious with your question, I checked from rails console (as Pavan said it get the result), I also tested with HTML view that rendered by rails with html_safe, I also get the id rendered (probably you can start <strong>to trace how you show \"flash message\"</strong></p>\n\n<pre><code>&lt;%= (%Q[Click following &lt;a href=\"#\" class=\"flash_link\" id=\"flash_link\" &gt;&lt;strong&gt;link&lt;/strong&gt;&lt;/a&gt; to proceed]).html_safe\n</code></pre>\n\n<p>it rendered </p>\n\n<pre><code>&lt;a href=\"#\" class=\"flash_link\" id=\"flash_link\"&gt;&lt;strong&gt;link&lt;/strong&gt;&lt;/a&gt;\n</code></pre>\n\n<p>I'm using rails 5.0.2</p>\n"}], "owner": {"reputation": 323, "user_id": 1934168, "user_type": "registered", "accept_rate": 16, "profile_image": "https://www.gravatar.com/avatar/a8e85918d3db651edd04097020cbf5f1?s=128&d=identicon&r=PG", "display_name": "Hilmi Yamc\u0131", "link": "https://stackoverflow.com/users/1934168/hilmi-yamc%c4%b1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 381, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1499188472, "creation_date": 1499184672, "last_edit_date": 1499185985, "question_id": 44910401, "link": "https://stackoverflow.com/questions/44910401/link-in-a-flash-message-ruby-on-rails", "title": "Link in a flash message, ruby on rails", "body": "<p>I have the following line in my application which shows flash message with a hyperlink.</p>\n\n<pre><code>flash[:danger] = %Q[Click following &lt;a href=\"#\" class=\"flash_link\" id=\"flash_link\" &gt;&lt;strong&gt;link&lt;/strong&gt;&lt;/a&gt; to proceed]\n</code></pre>\n\n<p>Bu rails engine generates following html.</p>\n\n<pre><code>&lt;a href=\"#\" class=\"flash_link\"&gt;&lt;strong&gt;link&lt;/strong&gt;&lt;/a&gt;\n</code></pre>\n\n<p>Why didn't it generate <code>id=\"flash_link\"</code> ?</p>\n\n<p>Any suggestions,</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 1337, "user_id": 5422365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52e31b390fd694c2ef039dc1baf59888?s=128&d=identicon&r=PG&f=1", "display_name": "Aschen", "link": "https://stackoverflow.com/users/5422365/aschen"}, "edited": false, "score": 3, "creation_date": 1499182453, "post_id": 44909543, "comment_id": 76796103, "body": "Why don&#39;t you just update your column like this : <code>company.column_name = []; company.save</code> ?"}, {"owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1499237445, "post_id": 44909543, "comment_id": 76813615, "body": "@Stefan Sorry for the typo. I corrected it. It&#39;s <code>delete</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1499238972, "post_id": 44909543, "comment_id": 76814518, "body": "Could you show your controller&#39;s actual <code>remove</code> method? It doesn&#39;t make much sense that some code works in <code>rails console</code> but not in your controller."}, {"owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1499240883, "post_id": 44909543, "comment_id": 76815791, "body": "@Stefan I have added the controller code without <code>dup</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1499242829, "post_id": 44909543, "comment_id": 76817089, "body": "How does the code behave when trying to remove the last item? Does it render &quot;... was removed&quot; without actually removing it?"}, {"owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1499243541, "post_id": 44909543, "comment_id": 76817568, "body": "@Stefan Yes, it renders without deleting it, as I don&#39;t check if it was really removed. And uopn page refresh I again see the <code>num</code> in UI."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1499243640, "post_id": 44909543, "comment_id": 76817626, "body": "How does the corresponding database query look like in you logs?"}, {"owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "edited": false, "score": 0, "creation_date": 1499243866, "post_id": 44909543, "comment_id": 76817766, "body": "When it&#39;s from controller, it only loads the company(SELECT company*...), but, there is no update query"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1499244783, "post_id": 44909543, "comment_id": 76818415, "body": "I&#39;ve just set up a test application with Rails 4.2 and your code works just fine for me. Must be something else."}, {"owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "edited": false, "score": 0, "creation_date": 1499247600, "post_id": 44909543, "comment_id": 76820562, "body": "Ok. Thanks for trying out"}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1499183527, "post_id": 44909920, "comment_id": 76796732, "body": "This is probably related to ActiveRecord&#39;s &quot;dirty&quot; tracking. Doing in-place modifications on strings, arrays, or other data structures often leaves ActiveRecord thinking that nothing has changed, no object references were swapped out. Whenever possible do straight reassignment."}, {"owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1499183788, "post_id": 44909920, "comment_id": 76796880, "body": "Unfortunately that doesn&#39;t work for me. <code>c = Company.last</code> <code>existing = c.column_name.del(1)</code> <code>c.column_name = existing</code> <code>c.save!</code>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1499184060, "post_id": 44909920, "comment_id": 76797022, "body": "That&#39;s the same object: <code>existing.object_id</code> does not change. You need to introduce a new object. Your <code>dup</code> solution does that, but <code>c.column_name = [ ]</code> is the better way to do it if you&#39;re intending that value to be cleared. It makes it much more obvious to someone reading the code that&#39;s your intent."}, {"owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1499237052, "post_id": 44909920, "comment_id": 76813388, "body": "@tadman I get it what you are saying, and that&#39;s correct!! But, the only thing that was stopping me was to have a generic code. What I mean is, the logic worked if there were more elements, but only for last element I didn&#39;t wanted to go with separate condition check like: <code>if existing.present? ? existing : []</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1499242745, "post_id": 44909920, "comment_id": 76817034, "body": "@tadman if dirty tracking <i>was</i> broken, it wouldn&#39;t work in any case, i.e. neither when removing the second to last item, nor in rails console."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1499284316, "post_id": 44909920, "comment_id": 76845773, "body": "@Stefan It&#39;s not broken so much as unable to track differences when you do in-place modifications. The old value and the new value are the same object, so they&#39;re always identical. Assigning a new object means they can differ."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1499323917, "post_id": 44909920, "comment_id": 76859093, "body": "@tadman my point is that if ActiveModel::Dirty couldn&#39;t track in-place modification (in can), the OP&#39;s code wouldn&#39;t work at all. It wouldn&#39;t work for deleting <code>2</code> from <code>[1,2]</code> and it wouldn&#39;t work in rails console."}], "tags": [], "owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "is_accepted": true, "score": 1, "last_activity_date": 1499237414, "last_edit_date": 1499237414, "creation_date": 1499182886, "answer_id": 44909920, "question_id": 44909543, "link": "https://stackoverflow.com/questions/44909543/how-to-make-a-serialized-column-empty/44909920#44909920", "title": "How to make a serialized column empty?", "body": "<p>I got the fix, we need to use <code>dup</code> to get a independent variable <code>existing</code>, which otherwise was referencing <code>Company.last.column_name</code></p>\n\n<pre><code>existing = Company.last.column_name.dup # THIS WORKS!!!\nexisting.delete(1)\nCompany.last.update_attributes!(column_name: existing)\n</code></pre>\n\n<p>This updates the column to <code>[]</code>, as I need.</p>\n"}], "owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 1, "accepted_answer_id": 44909920, "answer_count": 1, "score": 1, "last_activity_date": 1499240860, "creation_date": 1499181545, "last_edit_date": 1499240860, "question_id": 44909543, "link": "https://stackoverflow.com/questions/44909543/how-to-make-a-serialized-column-empty", "title": "How to make a serialized column empty?", "body": "<p>I have a column in Company, that is serialized as Array:</p>\n\n<pre><code>class Company\n  serialize :column_name, Array\nend\n</code></pre>\n\n<p>In <strong>rails console</strong>, when I try the following:</p>\n\n<pre><code>existing = Company.last.column_name\n# it gives a array with single element, say [1]\nexisting.delete(1)\n# now existing is []\nCompany.last.update_attributes!(column_name: existing)\n# It empties the array, so:\nCompany.last.column_name #gives []\n</code></pre>\n\n<p>But, when I try the same code in <code>remove</code> method of some controller, it never removes the last element. It always returns [1].</p>\n\n<p><strong>How can I empty the serialized column?</strong></p>\n\n<p><strong>NOTE:-</strong> This logic works when I have multiple elements, but doesn't work for the last element alone.</p>\n\n<p><strong>CONTROLLER CODE</strong></p>\n\n<pre><code>def remove_restricted_num\n  company = Company.where(id: params[:id]).first\n  restricted_numbers = company.restricted_numbers\n  num = params[:num].to_i\n\n  if restricted_numbers.include?(num)\n    restricted_numbers.delete(num)\n    company.update_attributes!(restricted_numbers: restricted_numbers)\n\n    render js: \"alert('#{num} was removed')\"\n  else\n    render js: \"alert('Number not found in the list')\"\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "nested-attributes"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1499181682, "post_id": 44909500, "comment_id": 76795639, "body": "<i>Address input information isn&#39;t even showing</i> Do you mean you are unable to see addresses attributes in the form?"}, {"owner": {"reputation": 3305, "user_id": 342978, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/ee06ba399c5eaf3f5a337a96207c2768?s=128&d=identicon&r=PG", "display_name": "Syl", "link": "https://stackoverflow.com/users/342978/syl"}, "edited": false, "score": 0, "creation_date": 1499181742, "post_id": 44909500, "comment_id": 76795666, "body": "Are you saying that when you show an organisme, you do not see the address part of the form?"}, {"owner": {"reputation": 2785, "user_id": 7503064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-T2C-ikRb0Ew/AAAAAAAAAAI/AAAAAAAAADM/Y7xlspIiYvg/photo.jpg?sz=128", "display_name": "I.B", "link": "https://stackoverflow.com/users/7503064/i-b"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1499181758, "post_id": 44909500, "comment_id": 76795679, "body": "@Pavan Ya in my view I can&#39;t see the labels and the text_fields."}, {"owner": {"reputation": 2785, "user_id": 7503064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-T2C-ikRb0Ew/AAAAAAAAAAI/AAAAAAAAADM/Y7xlspIiYvg/photo.jpg?sz=128", "display_name": "I.B", "link": "https://stackoverflow.com/users/7503064/i-b"}, "reply_to_user": {"reputation": 3305, "user_id": 342978, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/ee06ba399c5eaf3f5a337a96207c2768?s=128&d=identicon&r=PG", "display_name": "Syl", "link": "https://stackoverflow.com/users/342978/syl"}, "edited": false, "score": 0, "creation_date": 1499181823, "post_id": 44909500, "comment_id": 76795716, "body": "@Syl Yes everything in the <code>&lt;%= f.fields_for :addresses do |address_attributes| %&gt;</code> does not appear in the view."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1499181833, "post_id": 44909500, "comment_id": 76795724, "body": "Please post your models code"}, {"owner": {"reputation": 2785, "user_id": 7503064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-T2C-ikRb0Ew/AAAAAAAAAAI/AAAAAAAAADM/Y7xlspIiYvg/photo.jpg?sz=128", "display_name": "I.B", "link": "https://stackoverflow.com/users/7503064/i-b"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1499181976, "post_id": 44909500, "comment_id": 76795808, "body": "@Pavan I added the models."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1499182313, "post_id": 44909500, "comment_id": 76796019, "body": "Try changing <code>&lt;%= f.fields_for :addresses do |address_attributes| %&gt;</code> to <code>&lt;%= f.fields_for :addresses, @organisme.addresses.build do |address_attributes| %&gt;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2785, "user_id": 7503064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-T2C-ikRb0Ew/AAAAAAAAAAI/AAAAAAAAADM/Y7xlspIiYvg/photo.jpg?sz=128", "display_name": "I.B", "link": "https://stackoverflow.com/users/7503064/i-b"}, "edited": false, "score": 0, "creation_date": 1499182237, "post_id": 44909701, "comment_id": 76795965, "body": "Ya I kinda figured that out but I can&#39;t find a way of building the addresses."}], "tags": [], "owner": {"reputation": 3305, "user_id": 342978, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/ee06ba399c5eaf3f5a337a96207c2768?s=128&d=identicon&r=PG", "display_name": "Syl", "link": "https://stackoverflow.com/users/342978/syl"}, "is_accepted": false, "score": 0, "last_activity_date": 1499182076, "creation_date": 1499182076, "answer_id": 44909701, "question_id": 44909500, "link": "https://stackoverflow.com/questions/44909500/triple-nested-model-not-building-correctly/44909701#44909701", "title": "Triple nested model not building correctly", "body": "<p>In the form you build a servicepoint, so an empty serviceform is shown as an empty form. No adress are shown because there is no address to iterate on. You need to build addresses too.</p>\n\n<p>Be aware that your form will never allow you to edit servicepoint(s), because of the build in the form itself. And to allow the form to show more than one servicepoint, you need to iterate servicepoints somewhere.</p>\n"}, {"comments": [{"owner": {"reputation": 3305, "user_id": 342978, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/ee06ba399c5eaf3f5a337a96207c2768?s=128&d=identicon&r=PG", "display_name": "Syl", "link": "https://stackoverflow.com/users/342978/syl"}, "edited": false, "score": 0, "creation_date": 1499182517, "post_id": 44909750, "comment_id": 76796140, "body": "This is the most direct way of solving your problem, if you want a form for creation purposes only, and without possibilities to create more than one address. It is totally useful if this is used as a create servicepoint that the user is able to edit later from another form to add more addresses."}, {"owner": {"reputation": 2785, "user_id": 7503064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-T2C-ikRb0Ew/AAAAAAAAAAI/AAAAAAAAADM/Y7xlspIiYvg/photo.jpg?sz=128", "display_name": "I.B", "link": "https://stackoverflow.com/users/7503064/i-b"}, "reply_to_user": {"reputation": 3305, "user_id": 342978, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/ee06ba399c5eaf3f5a337a96207c2768?s=128&d=identicon&r=PG", "display_name": "Syl", "link": "https://stackoverflow.com/users/342978/syl"}, "edited": false, "score": 0, "creation_date": 1499182859, "post_id": 44909750, "comment_id": 76796342, "body": "@Syl Thanks for the information. And yes I wanted to only allow them to add only one Address when they create a new service point."}], "tags": [], "owner": {"reputation": 10255, "user_id": 1155142, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c680db41999d478ca34d1a77a470e30d?s=128&d=identicon&r=PG", "display_name": "gabrielhilal", "link": "https://stackoverflow.com/users/1155142/gabrielhilal"}, "is_accepted": true, "score": 1, "last_activity_date": 1499182259, "creation_date": 1499182259, "answer_id": 44909750, "question_id": 44909500, "link": "https://stackoverflow.com/questions/44909500/triple-nested-model-not-building-correctly/44909750#44909750", "title": "Triple nested model not building correctly", "body": "<p>I would build everything in the controller action:</p>\n\n<pre><code>&lt;%= form_for([@organisme, @servicepoint]) do |f| %&gt;\n...\n\n\ndef show\n  @organisme = Organisme.find(params[:organisme_id])\n  @servicepoint = @organisme.servicepoints.build\n  @servicepoint.addressess.build\nend\n</code></pre>\n"}], "owner": {"reputation": 2785, "user_id": 7503064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-T2C-ikRb0Ew/AAAAAAAAAAI/AAAAAAAAADM/Y7xlspIiYvg/photo.jpg?sz=128", "display_name": "I.B", "link": "https://stackoverflow.com/users/7503064/i-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 44909750, "answer_count": 2, "score": 0, "last_activity_date": 1499182259, "creation_date": 1499181414, "last_edit_date": 1499181961, "question_id": 44909500, "link": "https://stackoverflow.com/questions/44909500/triple-nested-model-not-building-correctly", "title": "Triple nested model not building correctly", "body": "<p>I have an <code>Organisme</code> that has many <code>Servicepoints</code> and each <code>Servicepoint</code> has many <code>Addresses</code>. The <code>Servicepoint</code> is set to <code>accepts_nested_attributes_for :addresses</code> so that I can create a service point and at the same time create an Address with it.</p>\n\n<p>My problem is that that, I can't figure out how to create the address that will be linked to the <code>Servicepoint</code> and that <code>Servicepoint</code> be linked to the <code>Organisme</code>. I am creating the <code>Servicepoint</code> inside the <code>show</code> view of an <code>Organisme</code>.</p>\n\n<p>View:</p>\n\n<pre><code>&lt;%= form_for([@organisme, @organisme.servicepoints.build]) do |f| %&gt;\n  &lt;p&gt;\n    &lt;%= f.label :nom %&gt;&lt;br&gt;\n    &lt;%= f.text_field :nom %&gt;\n  &lt;/p&gt;\n  &lt;p&gt;\n    &lt;%= f.label :fax %&gt;&lt;br&gt;\n    &lt;%= f.text_field :fax %&gt;\n  &lt;/p&gt;\n  &lt;p&gt;\n    &lt;%= f.label :courriel %&gt;&lt;br&gt;\n    &lt;%= f.email_field :courriel %&gt;\n  &lt;/p&gt;\n  &lt;p&gt;\n    &lt;%= f.label :telephone %&gt;&lt;br&gt;\n    &lt;%= f.text_field :telephone %&gt;\n  &lt;/p&gt;\n  &lt;%= f.fields_for :addresses do |address_attributes| %&gt;\n    &lt;p&gt;\n      &lt;%= address_attributes.label :no_civique %&gt;&lt;br&gt;\n      &lt;%= address_attributes.text_field :no_civique %&gt;&lt;br&gt;\n\n      &lt;%= address_attributes.label :rue %&gt;&lt;br&gt;\n      &lt;%= address_attributes.text_field :rue %&gt;&lt;br&gt;\n\n      &lt;%= address_attributes.label :ville %&gt;&lt;br&gt;\n      &lt;%= address_attributes.text_field :ville %&gt;&lt;br&gt;\n\n      &lt;%= address_attributes.label :province %&gt;&lt;br&gt;\n      &lt;%= address_attributes.text_field :province %&gt;&lt;br&gt;\n\n      &lt;%= address_attributes.label :etat %&gt;&lt;br&gt;\n      &lt;%= address_attributes.text_field :etat %&gt;&lt;br&gt;\n\n      &lt;%= address_attributes.label :code_postal %&gt;&lt;br&gt;\n      &lt;%= address_attributes.text_field :code_postal %&gt;&lt;br&gt;\n    &lt;/p&gt;\n&lt;% end %&gt;\n  &lt;p&gt;\n    &lt;%= f.submit :Ajouter, class: 'btn btn-info' %&gt;\n  &lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Controller:</p>\n\n<p>organisme/show</p>\n\n<pre><code>def show\n @organisme = Organisme.find(params[:id])\nend\n</code></pre>\n\n<p>servicepoint/create</p>\n\n<pre><code>def create\n\n  @organisme = Organisme.find(params[:organisme_id])\n\n  @servicepoint = @organisme.servicepoints.create(servicepoint_params)\n\n  redirect_to organisme_path(@organisme)  \n\nend\n\nprivate\n  def servicepoint_params\n    params.require(:servicepoint).permit(:nom, :fax, :courriel, :telephone, addresses_attributes: [:id, :no_civique, :rue, :ville, :province, :etat, :code_postal])\nend\n</code></pre>\n\n<p>Routes:</p>\n\n<pre><code>resources :organismes do\n  member { patch :activate }\n  member { patch :deactivate }\n  resources :addresses\n  resources :servicepoints do\n    resources :addresses\n  end\nend\n</code></pre>\n\n<p>My problem right now is that the <code>Address</code> input information isn't even showing. I tried having a <code>@servicepoint</code> variable and then creating everything with that but the problem with that was that I could not link it to the <code>Organisme</code>.</p>\n\n<p>If you need any more information I'll be happy to add anything. </p>\n\n<p>Models:</p>\n\n<pre><code>class Organisme &lt; ApplicationRecord\n   has_many :addresses\n   accepts_nested_attributes_for :addresses\n   has_many :servicepoints\nend\n\nclass Servicepoint &lt; ApplicationRecord\n   has_many :addresses\n   accepts_nested_attributes_for :addresses\n   belongs_to :organisme\nend\n\nclass Address &lt; ApplicationRecord\n  belongs_to :organismereferent, optional: true\n  belongs_to :organisme, optional: true\n  belongs_to :servicepoint, optional: true\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "logout", "nameerror"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 8210921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abe926994ec79da35de5e40124744fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Myth", "link": "https://stackoverflow.com/users/8210921/myth"}, "edited": false, "score": 1, "creation_date": 1499227237, "post_id": 44909446, "comment_id": 76809606, "body": "Thank you for noticing my silly mistake and educating me again, Pavan! You&#39;re the best !"}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": true, "score": 0, "last_activity_date": 1499182789, "last_edit_date": 1499182789, "creation_date": 1499181221, "answer_id": 44909446, "question_id": 44909180, "link": "https://stackoverflow.com/questions/44909180/nameerror-undefined-local-variable-or-method-log-out-did-you-mean-logout-url/44909446#44909446", "title": "nameerror undefined local variable or method `log_out&#39; Did you mean? logout_url ruby on rails", "body": "<blockquote>\n  <p>NameError in SessionsController#destroy\"undefined local variable or\n  method \"log_out\" for SessionsController:0x0000000275f290 Did you\n  mean? logout_url</p>\n</blockquote>\n\n<p>In the <em>tutorial(refer to 8.3)</em>, the <em>method name</em> in the <code>sessions_helper</code> is <code>log_out</code>, whereas you named it as <code>destroy</code>, but calling it as <code>log_out</code> in the <code>sessions_controller</code>. You should change it to <code>log_out</code></p>\n\n<pre><code>def log_out\n  session.delete(:user_id)\n  @current_user = nil\nend\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 8210921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abe926994ec79da35de5e40124744fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Myth", "link": "https://stackoverflow.com/users/8210921/myth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 787, "favorite_count": 1, "accepted_answer_id": 44909446, "answer_count": 1, "score": 0, "last_activity_date": 1499182789, "creation_date": 1499180349, "question_id": 44909180, "link": "https://stackoverflow.com/questions/44909180/nameerror-undefined-local-variable-or-method-log-out-did-you-mean-logout-url", "title": "nameerror undefined local variable or method `log_out&#39; Did you mean? logout_url ruby on rails", "body": "<p>So I am following the <a href=\"https://www.railstutorial.org/book/basic_login\" rel=\"nofollow noreferrer\">tutorial</a> by Michael Hartl, and when I am trying to logout, I get this \n<code>\"NameError in SessionsController#destroy\"undefined local variable or method \"log_out\" for #&lt;SessionsController:0x0000000275f290&gt; Did you mean? logout_url</code></p>\n\n<p>My tests and this Error only popped up after I added the last bit in my test, however, my logout function on the website did not work either. </p>\n\n<p>This is my session_helper.rb:</p>\n\n<pre><code>module SessionsHelper\n\n    # Logs in the given user.\n  def log_in(user)\n    session[:user_id] = user.id\n  end\n\n   # Returns the current logged-in user (if any).\n  def current_user\n    @current_user ||= User.find_by(id: session[:user_id])\n  end\n\n   # Returns true if the user is logged in, false otherwise.\n  def logged_in?\n    !current_user.nil?\n  end\n\n# Logs out the current user.\n  def destroy\n    session.delete(:user_id)\n    @current_user = nil\n  end\nend\n</code></pre>\n\n<p>This is my session_controller:</p>\n\n<pre><code>class SessionsController &lt; ApplicationController\n  def new\n  end\n\n  def create\n    #Gets user from database in lowercase &amp; determines if user is valid\n    user = User.find_by(email: params[:session][:email].downcase)\n    if user &amp;&amp; user.authenticate(params[:session][:password])\n      # Log the user in and redirect to the user's show page.\n      log_in user\n      redirect_to user\n    else\n      # Create an error message.\n      flash.now[:danger] = 'Invalid email/password combination' \n      render 'new'\n    end\n  end\n\n  # Logs out the current user.\n  def destroy\n    log_out # undefined variable Name error\n    redirect_to root_url\n  end\nend\n</code></pre>\n\n<p>My application_controller:</p>\n\n<pre><code>  class ApplicationController &lt; ActionController::Base\n    protect_from_forgery with: :exception\n    include SessionsHelper #temporary session cookie, expires automatically upon browser close\n  end\n</code></pre>\n\n<p>My view/layouts/_header.html.erb (used for the navbar where the logout link is):</p>\n\n<pre><code>&lt;header class=\"navbar navbar-fixed-top navbar-inverse\"&gt;\n  &lt;div class=\"container\"&gt;\n    &lt;%= link_to image_tag(\"logo2.png\", alt: \"CourseBuddies logo\"), root_path, id: \"logo\" %&gt;\n    &lt;%- # link_to \"sample app\", '#', id: \"logo\" %&gt;\n    &lt;nav&gt;\n      &lt;ul class=\"nav navbar-nav navbar-right\"&gt;\n        &lt;li&gt;&lt;%= link_to \"Home\", root_path   %&gt;&lt;/li&gt;\n        &lt;li&gt;&lt;%= link_to \"Reviews\",   '#' %&gt;&lt;/li&gt;\n        &lt;li&gt;&lt;%= link_to \"About us\",   about_path %&gt;&lt;/li&gt;\n\n         &lt;%- # LOGIN &amp; SCROLL DOWN BAR %&gt;\n        &lt;% if logged_in? %&gt;\n          **&lt;li&gt;&lt;%= link_to \"Users\", users_path %&gt;&lt;/li&gt;\n          &lt;li class=\"dropdown\"&gt;**\n            &lt;a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\"&gt;\n              Account &lt;b class=\"caret\"&gt;&lt;/b&gt;\n            &lt;/a&gt;\n            &lt;ul class=\"dropdown-menu\"&gt;\n              **&lt;li&gt;&lt;%= link_to \"Profile\", current_user %&gt;&lt;/li&gt;\n              &lt;li&gt;&lt;%= link_to \"Settings\", '#' %&gt;&lt;/li&gt;**\n              &lt;li class=\"divider\"&gt;&lt;/li&gt;\n              &lt;li&gt;\n                **&lt;%= link_to \"Log out\", logout_path, method: :delete %&gt;**\n              &lt;/li&gt;\n            &lt;/ul&gt;\n          &lt;/li&gt;\n        **&lt;% else %&gt;\n          &lt;li&gt;&lt;%= link_to \"Log in\", login_path %&gt;&lt;/li&gt;\n        &lt;% end %&gt;**\n      &lt;/ul&gt;\n    &lt;/nav&gt;\n  &lt;/div&gt;\n&lt;/header&gt;\n</code></pre>\n\n<p>My user model:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n    #before saving, make sure the email is in downcase\n    before_save { self.email = email.downcase }\n\n    validates :name,  presence: true, length: { maximum: 50 }\n    VALID_EMAIL_REGEX = /\\A[\\w+\\-.]+@[a-z\\d\\-.]+\\.[a-z]+\\z/i\n    validates :email, presence: true, length: { maximum: 255 },\n                    format: { with: VALID_EMAIL_REGEX },\n                    uniqueness: {case_sensitive: false}\n\n\n    # Let's you safely store a hashed password_digest to DB,\n    # gives you password &amp; password_confirmation attributes, \n    # an authenticate method that returns the user when pw is correct,\n    # otherwise false. \n    has_secure_password(validations:false)\n    validates :password, presence:true, length: { minimum: 6 }\n\n     # Returns the hash digest of the given string.\n    def User.digest(string)\n        cost = ActiveModel::SecurePassword.min_cost ? BCrypt::Engine::MIN_COST :\n                                                  BCrypt::Engine.cost\n        BCrypt::Password.create(string, cost: cost)\n    end\nend\n</code></pre>\n\n<p>My create-method in my Users controller:\n  def create\n    @user = User.new(user_params) #params[:user])#user_params)</p>\n\n<pre><code>if @user.save\n  log_in @user\n  flash[:success] = \"Welcome to CourseBuddies!\"\n  redirect_to @user\n\nelse\n  render 'new'\nend\n</code></pre>\n\n<p>end</p>\n\n<p>My test/test_helper:</p>\n\n<pre><code>ENV['RAILS_ENV'] ||= 'test'\nrequire File.expand_path('../../config/environment', __FILE__)\nrequire 'rails/test_help'\nrequire \"minitest/reporters\"\nMinitest::Reporters.use!\n\nclass ActiveSupport::TestCase\n  # Setup all fixtures in test/fixtures/*.yml for all tests in alphabetical order.\n  fixtures :all\n\n  # Returns true if a test user is logged in.\n  def is_logged_in?\n    !session[:user_id].nil?\n  end\nend\n</code></pre>\n\n<p>And my user_login_test:</p>\n\n<pre><code>require 'test_helper'\n\nclass UsersLoginTest &lt; ActionDispatch::IntegrationTest\n\n  def setup\n    @user = users(:michael)\n  end\n\n   # Visit the login path.\n# Verify that the new sessions form renders properly.\n# Post to the sessions path with an invalid params hash.\n# Verify that the new sessions form gets re-rendered and that a flash message appears.\n# Visit another page (such as the Home page).\n# Verify that the flash message doesn\u2019t appear on the new page.  \n  test \"login with valid information followed by logout\" do\n    get login_path\n    post login_path, params: { session: { email:    @user.email,\n                                      password: 'password' } }\n    assert is_logged_in?\n    assert_redirected_to @user\n    follow_redirect!\n    assert_template 'users/show'\n    assert_select \"a[href=?]\", login_path, count: 0\n    assert_select \"a[href=?]\", logout_path\n    assert_select \"a[href=?]\", user_path(@user)\n\n    #AFTER ADDING THIS MY TEST FAILED\n\n    #after logging in, we use delete to issue a DELETE request to the logout path\n    #(Table 8.1) and verify that the user is logged out and redirected to the root URL\n    delete logout_path\n    assert_not is_logged_in?\n    assert_redirected_to root_url\n    follow_redirect!\n    assert_select \"a[href=?]\", login_path\n    assert_select \"a[href=?]\", logout_path,      count: 0\n    assert_select \"a[href=?]\", user_path(@user), count: 0\n  end\nend\n</code></pre>\n\n<p>And at last my routes: </p>\n\n<pre><code>Rails.application.routes.draw do\n\n  get 'sessions/new'\n\n  #ROOT, first page to show\n  root 'pages#home'\n\n  # maps requests for the URL/pages/home to the about us action in the Pages controller.\n  # By using GET we arrange for the route to respond to a GET request.\n  # With this we generate a about us action inside the Pages controller, automatically\n  # get a page at the address /pages/about us\n  get '/about', to: 'pages#about'\n  get '/signup', to: 'users#new'\n  post '/signup',  to: 'users#create' #signup route that responds to POST requests.\n  get    '/login',   to: 'sessions#new'\n  post   '/login',   to: 'sessions#create'\n  delete '/logout',  to: 'sessions#destroy'\n\n  #resources :sessions\n  resources :users\n  # For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html              \n\nend\n</code></pre>\n\n<p>I'm sorry there is a lot of code! On the tutorial it says the test users_login_test is supposed to turn green after adding the new code, but it fails. Also, the logout does not work and gives me this error:\n<a href=\"https://i.stack.imgur.com/brzVZ.png\" rel=\"nofollow noreferrer\">image of error</a></p>\n\n<p>I will be grateful for any help! </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2782, "user_id": 4458445, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bIIZcxNxAuA/AAAAAAAAAAI/AAAAAAAAOGs/6SNi2yJnzKA/photo.jpg?sz=128", "display_name": "RToyo", "link": "https://stackoverflow.com/users/4458445/rtoyo"}, "edited": false, "score": 1, "creation_date": 1499178052, "post_id": 44908308, "comment_id": 76793397, "body": "Any time that <code>temp_sum == @sum</code>, you&#39;ll get stuck in a loop, because neither pointer_one nor pointer_two will change any further. Thus, pointer_one will always be less than pointer_two, and it will always find that temp_sum == @sum."}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 2, "last_activity_date": 1499184001, "creation_date": 1499184001, "answer_id": 44910211, "question_id": 44908308, "link": "https://stackoverflow.com/questions/44908308/ruby-code-looping-infinitely/44910211#44910211", "title": "Ruby code looping infinitely", "body": "<p>Usually a tangle of code like this is a sign something's not right, and in this case the source of the problem is not knowing about the <a href=\"https://ruby-doc.org/core-2.4.0/Array.html#method-i-combination\" rel=\"nofollow noreferrer\"><code>combination</code></a> method. Here's a functionally equivalent solution:</p>\n\n<pre><code>def triplet(list, target)\n  list.combination(3).find do |a,b,c|\n    a + b + c == target\n  end\nend\n</code></pre>\n\n<p>For example:</p>\n\n<pre><code>arr = [ 1, 2, 3, 4, 5, 6, 7, 8 ]\n\np triplet(arr, 6)\n# =&gt; [1, 2, 3]\n\np triplet(arr, 4)\n# =&gt; nil\n\np triplet(arr, 10)\n# =&gt; [1, 2, 7]\n</code></pre>\n\n<p>The algorithm used in your code looks problematic, or at least implemented incorrectly, and is also strictly limited to triplets. This code is far more generic and uses a proven, tested algorithm, so it's probably better suited to solving your particular problem.</p>\n"}], "owner": {"reputation": 118, "user_id": 6080990, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ded713da57161f76d1ed079264c47112?s=128&d=identicon&r=PG&f=1", "display_name": "rohan kharvi", "link": "https://stackoverflow.com/users/6080990/rohan-kharvi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 44910211, "answer_count": 1, "score": 0, "last_activity_date": 1499184001, "creation_date": 1499177743, "question_id": 44908308, "link": "https://stackoverflow.com/questions/44908308/ruby-code-looping-infinitely", "title": "Ruby code looping infinitely", "body": "<pre><code>class Triplet\n    def initialize(array,sum)\n        @array = array.sort()\n        @array_size = array.size()\n        @sum = sum\n        @result = []\n    end\n\n    def get_triplet\n      @array[0..-3].each_with_index do |arr, ind|\n        pointer_one = ind + 1\n        pointer_two = @array_size - 1\n        while (pointer_one &lt; pointer_two)\n          temp_sum = @array[pointer_one] + @array[pointer_two] + arr\n          if(temp_sum == @sum)\n            @result.push([@array[pointer_one], @array[pointer_two], arr])\n          elsif temp_sum &lt; @sum\n            pointer_one = pointer_one +1\n          else\n            pointer_two = pointer_two -1\n          end\n        end\n      end\n    end\n\n    def get_result\n      @result.each do |res|\n        puts res\n      end\n    end\nend\n\nputs \"Enter the array of numbers\"\narray = gets.chomp\narray = array.split(' ')\narray_integer = array.map{|a| a.to_i}\nputs array_integer\nputs \"Enter the sum\"\nsum = gets.chomp\nputs sum\nt1 = Triplet.new(array_integer,sum.to_i)\nt1.get_triplet\nt1.get_result\n</code></pre>\n\n<p>Can anyone suggest me the fix so that it doesn't loop infinitly. It is program to find triplet in array whose sum is @sum. Its  looping in get_triplet method. Initialize method sets the array,array size. get_triplet method should store all three number whose sum is @sum in result array. </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "edited": false, "score": 3, "creation_date": 1499176493, "post_id": 44907724, "comment_id": 76792465, "body": "if you using rbenv, then you can set the local folder with rbenv local x.x.x (replace x.x.x with the version that you want to use, then rbenv rehash, gem install bundler  and finally bundle install / update"}, {"owner": {"reputation": 1337, "user_id": 5422365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52e31b390fd694c2ef039dc1baf59888?s=128&d=identicon&r=PG&f=1", "display_name": "Aschen", "link": "https://stackoverflow.com/users/5422365/aschen"}, "edited": false, "score": 0, "creation_date": 1499179580, "post_id": 44907724, "comment_id": 76794327, "body": "Are you using some ruby virtual env like rbenv or RVM ?"}, {"owner": {"reputation": 12818, "user_id": 350080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8dbcaa49802612c858ebf97742639a4b?s=128&d=identicon&r=PG", "display_name": "Himmators", "link": "https://stackoverflow.com/users/350080/himmators"}, "edited": false, "score": 0, "creation_date": 1499181991, "post_id": 44907724, "comment_id": 76795823, "body": "how can I check that??"}, {"owner": {"reputation": 1171, "user_id": 4466467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fa3cb584327391e71cfa7d6f7f652b1?s=128&d=identicon&r=PG&f=1", "display_name": "Sujan Adiga", "link": "https://stackoverflow.com/users/4466467/sujan-adiga"}, "edited": false, "score": 0, "creation_date": 1499189722, "post_id": 44907724, "comment_id": 76799526, "body": "Add the output of <code>gem env</code> to the question"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1499190648, "post_id": 44907724, "comment_id": 76799853, "body": "Your <code>bundler</code> might be linked to a different version of Ruby. <code>which bundler</code> can help find out which one you&#39;re actually running."}], "answers": [{"tags": [], "owner": {"reputation": 696, "user_id": 7314004, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/95806024183ca05eed5c8a100c610ce8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter H&#248;jlund Andersen", "link": "https://stackoverflow.com/users/7314004/peter-h%c3%b8jlund-andersen"}, "is_accepted": false, "score": 1, "last_activity_date": 1499208455, "last_edit_date": 1499208455, "creation_date": 1499208140, "answer_id": 44914823, "question_id": 44907724, "link": "https://stackoverflow.com/questions/44907724/cant-bundle-update-due-to-multiple-ruby-versions/44914823#44914823", "title": "Can&#39;t bundle update due to multiple ruby versions", "body": "<p>What version is used when you run <code>bundle env</code>?</p>\n\n<p>You could try reinstalling bundler with: <code>gem install bundler</code></p>\n\n<p>But first you can read a little more about it <a href=\"https://github.com/bundler/bundler/issues/4260\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 12818, "user_id": 350080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8dbcaa49802612c858ebf97742639a4b?s=128&d=identicon&r=PG", "display_name": "Himmators", "link": "https://stackoverflow.com/users/350080/himmators"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 336, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499208455, "creation_date": 1499176071, "question_id": 44907724, "link": "https://stackoverflow.com/questions/44907724/cant-bundle-update-due-to-multiple-ruby-versions", "title": "Can&#39;t bundle update due to multiple ruby versions", "body": "<p>I try to update with bundle:</p>\n\n<pre><code>bundle update\nWarning: the running version of Bundler (1.13.6) is older than the version that created the lockfile (1.13.7). We suggest you upgrade to the latest version of Bundler by running `gem install bundler`.\nIgnoring ffi-1.9.10 because its extensions are not built.  Try: gem pristine ffi --version 1.9.10\nIgnoring json-1.8.3 because its extensions are not built.  Try: gem pristine json --version 1.8.3\nFetching gem metadata from https://rubygems.org/...........\nFetching version metadata from https://rubygems.org/..\nFetching dependency metadata from https://rubygems.org/.\nResolving dependencies...\nliquid-4.0.0 requires ruby version &gt;= 2.1.0, which is incompatible with the\ncurrent version, ruby 2.0.0p648\n</code></pre>\n\n<p>So I try </p>\n\n<pre><code>ruby --version\nruby 2.4.1p111 (2017-03-22 revision 58053) [x86_64-darwin16]\n</code></pre>\n\n<p>It seems like bundle is using a different instance of ruby?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "capybara"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1499176044, "post_id": 44907674, "comment_id": 76792186, "body": "What fails? What&#39;s the error message?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 2, "creation_date": 1499176096, "post_id": 44907674, "comment_id": 76792215, "body": "Also, is <code>expect(page).to body have_tag(&#39;pre&#39;)</code> correct? That looks like a typo to me; shouldn&#39;t that be <code>expect(page.body).to have_tag(&#39;pre&#39;)</code>?"}, {"owner": {"reputation": 577, "user_id": 5980838, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/379487909da520c969e287be23db9542?s=128&d=identicon&r=PG", "display_name": "OmarAguinaga", "link": "https://stackoverflow.com/users/5980838/omaraguinaga"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1499178557, "post_id": 44907674, "comment_id": 76793702, "body": "@TomLord yes sorry, it should be like <code>expect(page).to have_tag(&#39;pre&#39;)</code>, small typo I&#39;ll edit the question. Still, that was not the problem. And no error message, just <code>17 examples, 1 failure</code>"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1499178725, "post_id": 44907674, "comment_id": 76793786, "body": "So if the failure is in the <code>expect(page)......</code> line, then that <i>is</i> the value of <code>page</code>?"}, {"owner": {"reputation": 577, "user_id": 5980838, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/379487909da520c969e287be23db9542?s=128&d=identicon&r=PG", "display_name": "OmarAguinaga", "link": "https://stackoverflow.com/users/5980838/omaraguinaga"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1499179168, "post_id": 44907674, "comment_id": 76794065, "body": "just edited the question @TomLord"}], "answers": [{"comments": [{"owner": {"reputation": 577, "user_id": 5980838, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/379487909da520c969e287be23db9542?s=128&d=identicon&r=PG", "display_name": "OmarAguinaga", "link": "https://stackoverflow.com/users/5980838/omaraguinaga"}, "edited": false, "score": 0, "creation_date": 1499257200, "post_id": 44914056, "comment_id": 76827501, "body": "Thanks! that was awesome, also thank you for correcting my path error, I have it everywhere, I&#39;ll change it now."}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 1, "last_activity_date": 1499203375, "last_edit_date": 1499203375, "creation_date": 1499202781, "answer_id": 44914056, "question_id": 44907674, "link": "https://stackoverflow.com/questions/44907674/spec-looking-for-specific-html-tag-does-not-work/44914056#44914056", "title": "Spec looking for specific HTML tag does not work", "body": "<p><code>have_tag</code> is not Capybara provided and isn't what you should be using with Capybara.  This is because the <code>have_tag</code> matcher provided by rspec-html-matchers, grabs the page source as a string at time of call, parses it with nokogiri, and then queries against it.  That neuters the waiting/retrying behavior Capybara provides and will lead to unstable/non-working tests, not to mention the extra overhead that produces for every query.  What you want is <code>have_css</code>/<code>have_xpath</code>/<code>have_selector</code></p>\n\n<pre><code>expect(page).to have_css('pre')\n</code></pre>\n\n<p>A second issue in your test code is that you shouldn't be using <code>current_path</code> with the <code>eq</code> matcher, rather you should be using the <code>have_current_path</code> matcher which utilizes Capybaras waiting/retrying behavior</p>\n\n<pre><code>expect(page).to have_current_path(topic_wiki_path(@wiki.topic, @wiki.id))\n</code></pre>\n"}], "owner": {"reputation": 577, "user_id": 5980838, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/379487909da520c969e287be23db9542?s=128&d=identicon&r=PG", "display_name": "OmarAguinaga", "link": "https://stackoverflow.com/users/5980838/omaraguinaga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 44914056, "answer_count": 1, "score": 0, "last_activity_date": 1499203375, "creation_date": 1499175886, "last_edit_date": 1499179147, "question_id": 44907674, "link": "https://stackoverflow.com/questions/44907674/spec-looking-for-specific-html-tag-does-not-work", "title": "Spec looking for specific HTML tag does not work", "body": "<p>I'm working on a rails application and want to test using capybara, so far I had no problem but now that I'm implementing a markdown parsing feature I cant make my test pass. </p>\n\n<p>I added this test</p>\n\n<pre><code>it \"Shows makdown as HTML\" do\n  visit_wiki\n  expect(page).to have_tag('pre')  //**EDITED** becauseof typo\nend\n</code></pre>\n\n<p>And I can't make it work, <code>visit_wiki</code> is just a method to well... visit the wiki.</p>\n\n<pre><code>def visit_wiki\n  visit topics_path\n  click_link topic.name\n  click_link sentence\n  expect(current_path).to eq topic_wiki_path(@wiki.topic, @wiki.id)\nend\n</code></pre>\n\n<p>I know that works because I've been using that in other parts of this project. </p>\n\n<p>Here is also my Factory where I make sure to always have one <code>pre</code> HTML tag.</p>\n\n<pre><code>require 'random_data'\nFactoryGirl.define do\n  factory :wiki do\n    title Faker::Lorem.sentence\n    body  RandomData.random_md\n    private false\n    topic\n    user\n  end\nend\n\n//where random_md is\n\nmodule RandomData\n    def self.random_md\n        md = []\n        md &lt;&lt; Faker::Markdown.headers\n        md &lt;&lt; Faker::Markdown.block_code\n        rand(4..10).times do\n            md &lt;&lt; Faker::Markdown.random\n        end\n        md.join(\"\\n\")\n    end\nend\n</code></pre>\n\n<p>From that factory I'm able to seed data and display it correctly on my site.\nI even tried this from <a href=\"http://www.rubydoc.info/github/kucaahbe/rspec-html-matchers/RSpec%2FHtmlMatchers%3Ahave_tag\" rel=\"nofollow noreferrer\">this</a> website:</p>\n\n<pre><code>expect(\"&lt;html&gt;\n  &lt;body&gt;\n    &lt;h1&gt;some html document&lt;/h1&gt;\n  &lt;/body&gt;\n &lt;/html&gt;\").to have_tag('body')\n</code></pre>\n\n<p>still, fails...</p>\n\n<p>I guess I must be doing something wrom but don't know what, I would really appreciate any help. Thanks in advance!</p>\n\n<p><strong>EDIT</strong>\nThis is how body looks: \n    \n    </p>\n\n<pre><code>&lt;body&gt;\n  &lt;div class=\"row\"&gt;\n    &lt;div class=\"col-md-8\"&gt;\n      &lt;h2&gt;Labore&lt;/h2&gt;\n      .\n      .\n      .\n      &lt;div class=\"highlight\"&gt;\n        &lt;pre&gt;\n            &lt;span class=\"no\"&gt;Quo&lt;/span&gt; \n            &lt;span class=\"n\"&gt;voluptates&lt;/span&gt;\n            &lt;span class=\"n\"&gt;et&lt;/span&gt; \n            &lt;span class=\"n\"&gt;et&lt;/span&gt; \n            &lt;span class=\"n\"&gt;excepturi&lt;/span&gt; \n            &lt;span class=\"n\"&gt;sit&lt;/span&gt;\n            &lt;span class=\"o\"&gt;.&lt;/span&gt;\n         &lt;/pre&gt;\n      &lt;/div&gt;\n      .\n      .\n      .\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"}]