[{"tags": ["ruby-on-rails", "ruby", "chart.js", "chartkick"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1522886222, "post_id": 49661882, "comment_id": 86334237, "body": "just a guess but try <code>{fontSize: 90}</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9250616"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1522888932, "post_id": 49661882, "comment_id": 86334986, "body": "Thank for your reply, I believed it, but unfortunately it is not that. :("}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1522889215, "post_id": 49661882, "comment_id": 86335062, "body": "what does the chart look like in the web app before PDF ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9250616"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1522933350, "post_id": 49661882, "comment_id": 86356595, "body": "My statistics are not supposed to appear outside the PDF but I created a chart on a page to test the options without having to reload the PDF each time. Here it is readable but none of the options in the library works : <a href=\"https://i.gyazo.com/cca844fa7264c2e3c81c1bcc9f410add.png\" rel=\"nofollow noreferrer\">i.gyazo.com/cca844fa7264c2e3c81c1bcc9f410add.png</a>          But in my PDF, either the graphics do not appear, or they are tiny. I managed to enlarge them but only the size of the graph changes, not the font it contains ..."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9250616"}, "edited": false, "score": 0, "creation_date": 1522888902, "post_id": 49662167, "comment_id": 86334977, "body": "I believed it, but unfortunately it is not that. :("}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1522936979, "post_id": 49662167, "comment_id": 86359389, "body": "updated answer, did you try maybe with <code>px</code> in font size?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9250616"}, "edited": false, "score": 0, "creation_date": 1522969280, "post_id": 49662167, "comment_id": 86377203, "body": "Yes I tried but nothing change... Maybe I&#39;ll have to use chart.js directly, if I find how to put the data in DB"}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1522889931, "last_edit_date": 1522889931, "creation_date": 1522886355, "answer_id": 49662167, "question_id": 49661882, "link": "https://stackoverflow.com/questions/49661882/change-the-font-size-of-chart-js-with-chartkick/49662167#49662167", "title": "Change the font size of chart.js with chartkick", "body": "<p>I think you're passing the attribute with wrong case.  Should probably be <code>snakeCase</code> and also try using a pixel size like so:</p>\n\n<pre><code>&lt;%= pie_chart Infosheet.group(:gender).count, library: {fontSize: \"50px\"} %&gt;\n\n\n&lt;script type=\"text/javascript\"&gt;\n   new Chartkick.PieChart(\"chart-1\", {\"man\":4}, {\"library\":{\"fontSize\":\"50px\"}});\n&lt;/script&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6295942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfd9f3c507a8200c54ae7a88207c2d69?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6295942/mohit"}, "is_accepted": false, "score": 0, "last_activity_date": 1522926142, "creation_date": 1522926142, "answer_id": 49670769, "question_id": 49661882, "link": "https://stackoverflow.com/questions/49661882/change-the-font-size-of-chart-js-with-chartkick/49670769#49670769", "title": "Change the font size of chart.js with chartkick", "body": "<p>Use this code</p>\n\n<pre><code>&lt;%= pie_chart Infosheet.group(:gender).count, library: {fontSize: 90} %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 7520578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a38f85eea1c84954df1a3b68ee7736?s=128&d=identicon&r=PG&f=1", "display_name": "Valiantsin Mikhaliuk", "link": "https://stackoverflow.com/users/7520578/valiantsin-mikhaliuk"}, "is_accepted": false, "score": 2, "last_activity_date": 1547673957, "creation_date": 1547673957, "answer_id": 54225625, "question_id": 49661882, "link": "https://stackoverflow.com/questions/49661882/change-the-font-size-of-chart-js-with-chartkick/54225625#54225625", "title": "Change the font size of chart.js with chartkick", "body": "<p>There you are</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>  &lt;%= pie_chart counters, library: { legend: { position: \"left\", labels: { fontSize: 26 } } } %&gt;\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9250616"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 993, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1547673957, "creation_date": 1522884205, "last_edit_date": 1524155971, "question_id": 49661882, "link": "https://stackoverflow.com/questions/49661882/change-the-font-size-of-chart-js-with-chartkick", "title": "Change the font size of chart.js with chartkick", "body": "<p>first of all, please excuse my english.</p>\n\n<p>I'm a junior developer on Ruby on Rails and I developed an user management application, among other things. I'm working on the last feature that is generating statistics in a PDF using Chartkick and WickedPDF.</p>\n\n<p>But, I have a problem because the generated JS has a very tiny font size. I tried everything, but nothing to do, I can not enlarge this font.</p>\n\n<p>Here is the line that generates one of my graphs :</p>\n\n<pre><code>    &lt;%= pie_chart Infosheet.group(:gender).count, library: {FontSize: 90} %&gt;\n</code></pre>\n\n<p>This generate this code :</p>\n\n<pre><code>    &lt;script type=\"text/javascript\"&gt;\n       new Chartkick.PieChart(\"chart-1\", {\"man\":4}, {\"library\":{\"FontSize\":90}});\n    &lt;/script&gt;\n</code></pre>\n\n<p>But nothing change. I tried lots of other things that I do not have in mind anymore... In my PDF, the graph has a gigantic margin and a tiny font. :/</p>\n\n<p>I despair because I have to return the project next week.</p>\n\n<p>Can someone help me?</p>\n\n<p>thank you very much</p>\n\n<p><strong>EDIT :</strong> </p>\n\n<p>This is my statistics in my PDF :</p>\n\n<p><a href=\"https://i.gyazo.com/c86a39b2a9e529b7551f8654bee838b4.mp4\" rel=\"nofollow noreferrer\">https://i.gyazo.com/c86a39b2a9e529b7551f8654bee838b4.mp4</a></p>\n\n<p>The font is... really tiny. my statistics have a size of 5000px x 5000px.\nAlso, nothing changes if I increase the dpi of PDF</p>\n\n<p><strong>RESOLVED :</strong></p>\n\n<p>Finally, I forked chartkick to change the font-size directly into it, as no option was passed.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "ruby-on-rails-5", "actionmailer"], "comments": [{"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1522889550, "post_id": 49661675, "comment_id": 86335141, "body": "Did you try port 587 (as per your first link: <a href=\"https://stackoverflow.com/questions/22138699/sending-email-ruby-on-rails-dev-environment-smtp-cpanel\" title=\"sending email ruby on rails dev environment smtp cpanel\">stackoverflow.com/questions/22138699/&hellip;</a>) ? (Just double-checking as you haven&#39;t said you tried that)"}, {"owner": {"reputation": 14111, "user_id": 5783745, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Z5VSF.jpg?s=128&g=1", "display_name": "stevec", "link": "https://stackoverflow.com/users/5783745/stevec"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 1, "creation_date": 1522903408, "post_id": 49661675, "comment_id": 86338322, "body": "Thanks for spotting - yes I tried 587 (have adjusted question to reflect this)"}], "owner": {"reputation": 14111, "user_id": 5783745, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Z5VSF.jpg?s=128&g=1", "display_name": "stevec", "link": "https://stackoverflow.com/users/5783745/stevec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1522903389, "creation_date": 1522882645, "last_edit_date": 1522903389, "question_id": 49661675, "link": "https://stackoverflow.com/questions/49661675/appropriate-settings-for-rails-actionmailer-to-send-through-cpanel-smtp", "title": "Appropriate settings for rails actionmailer to send through cPanel smtp", "body": "<p>I have looked <a href=\"https://stackoverflow.com/questions/22138699/sending-email-ruby-on-rails-dev-environment-smtp-cpanel\">here</a> and <a href=\"http://guides.rubyonrails.org/action_mailer_basics.html\" rel=\"nofollow noreferrer\">here</a>, but there is not a lot else to help me specifically configure actionmailer settings to work with cPanel hosting. Ultimately, all I want to do is have an email sent to users when they sign up. I have been able to get an email to send when running the app in development using localhost and a gmail account, and in production using a gmail account, but not in production using my actual domain's email account (i.e. info@mydomain.com). </p>\n\n<p>I have checked that info@mydomain.com can send and receive mail by doing so manually.</p>\n\n<p>I have tried all sorts of permutations of the following, with no luck:</p>\n\n<ul>\n<li><p>address: mail.mydomain.com (as per cPanel instructions for outgoing\nserver)</p></li>\n<li><p>port: 465 as per cPanel instructions for outgoing server, but also 25 and 587\nfor good measure</p></li>\n<li><p>authentication: plain, login</p></li>\n<li><p>with and without openssl_verify_mode: 'none'</p></li>\n</ul>\n\n<p>The rest of my settings look like this:</p>\n\n<pre><code>config.action_mailer.smtp_settings = {  \n   address: \"mail.mydomain.com\",\n   port: 465, \n   domain: \"myapp.herokuapp.com\",\n   authentication: \"plain\",\n   enable_starttls_auto: true,\n   user_name: \"info@mydomain.com\",\n   password: \"password\", \n   openssl_verify_mode: 'none' \n }\n</code></pre>\n\n<p>I have spent 6 hours simply trying permutation after permutation and searching settings in heroku, the hosting and in my code for possible problems, but so far cannot work out why I cannot get an email to send</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1522881703, "post_id": 49661500, "comment_id": 86332841, "body": "How&#39;re you storing the words in the <code>words</code> hash?"}, {"owner": {"reputation": 1, "user_id": 9593940, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GC2ZCqzvGWI/AAAAAAAAAAI/AAAAAAAAAAg/5SPAdiLiIk4/photo.jpg?sz=128", "display_name": "Dion12345", "link": "https://stackoverflow.com/users/9593940/dion12345"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1522882065, "post_id": 49661500, "comment_id": 86332978, "body": "I forgot it when i translate my code. @SebastianPalma"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1522882493, "post_id": 49661500, "comment_id": 86333136, "body": "why your key is time and not the word?"}, {"owner": {"reputation": 1, "user_id": 9593940, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GC2ZCqzvGWI/AAAAAAAAAAI/AAAAAAAAAAg/5SPAdiLiIk4/photo.jpg?sz=128", "display_name": "Dion12345", "link": "https://stackoverflow.com/users/9593940/dion12345"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1522882792, "post_id": 49661500, "comment_id": 86333250, "body": "@SergioTulentsev because the program request time too thats why."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1522882839, "post_id": 49661500, "comment_id": 86333270, "body": "@Dion12345: no, your hash. Why is it <code>time =&gt; word</code> and not <code>word =&gt; time</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 1434, "user_id": 5010370, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5ef5c21eb66b79ab4fa94df6b40be5b4?s=128&d=identicon&r=PG&f=1", "display_name": "Lasse Sviland", "link": "https://stackoverflow.com/users/5010370/lasse-sviland"}, "is_accepted": true, "score": 0, "last_activity_date": 1524245713, "last_edit_date": 1524245713, "creation_date": 1522884280, "answer_id": 49661893, "question_id": 49661500, "link": "https://stackoverflow.com/questions/49661500/how-can-i-check-if-a-value-already-exists-in-a-hash/49661893#49661893", "title": "How can I check if a value already exists in a hash?", "body": "<p>To test if there is a key with a given value, you can use the <code>key</code> method on the hash:</p>\n\n<pre><code>words.key(wordsvariable)\n</code></pre>\n\n<p>If that returns a value, <code>wordsvariable</code> is in the hash.</p>\n\n<hr>\n\n<p>You are storing the words in a hash with the time as a key like this:</p>\n\n<pre><code>{\n  2018-04-05 01:15:32 +0200=&gt;\"foo\", \n  2018-04-05 01:15:32 +0200=&gt;\"bar\"\n}\n</code></pre>\n\n<p>A more natural way of storing the words and time might be to have the key and value opposite of how you have it now. </p>\n\n<p>Instead of using: <code>words[Time.now] = wordsvariable</code>, you can use <code>words[wordsvariable] = Time.now</code></p>\n\n<p>And then use:</p>\n\n<pre><code>words[wordsvariable]\n</code></pre>\n\n<p>to test if there is a value there.</p>\n"}], "owner": {"reputation": 1, "user_id": 9593940, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GC2ZCqzvGWI/AAAAAAAAAAI/AAAAAAAAAAg/5SPAdiLiIk4/photo.jpg?sz=128", "display_name": "Dion12345", "link": "https://stackoverflow.com/users/9593940/dion12345"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 49661893, "answer_count": 1, "score": -1, "last_activity_date": 1524245713, "creation_date": 1522881458, "last_edit_date": 1522914148, "question_id": 49661500, "link": "https://stackoverflow.com/questions/49661500/how-can-i-check-if-a-value-already-exists-in-a-hash", "title": "How can I check if a value already exists in a hash?", "body": "<p>Is there any method to check if hash contains a particular value? I've tried like this: </p>\n\n<pre><code>words = {}\nputs \"Which word do you want to learn to Baby?\"\nwordsvariable = gets.chomp\nif action == \"1\" &amp;&amp; words.include?(wordsvariable)\n  puts \"This word is already learned by the Baby, try again.\"\nelsif action == \"1\" &amp;&amp; !words.include?(wordsvariable)\nwords[Time.now] = wordsvariable\n  puts \"Congrats you have learn word: #{wordsvariable} to Baby.\"\nend\n</code></pre>\n\n<p>If the word is already learned by the baby (i.e., the word is in the hash already), I don't want to allow the baby to learn it. Otherwise, I let the baby learn it.</p>\n\n<p>Can anybody help me?</p>\n"}, {"tags": ["ruby", "openssl", "cryptography", "signature"], "comments": [{"owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 2, "creation_date": 1522886735, "post_id": 49661142, "comment_id": 86334395, "body": "This is not specific to Ruby, maybe you can find your answer <a href=\"https://crypto.stackexchange.com/q/15997/1172\">here</a> on the crypto site. I created this Q/A mainly because many questions like these on StackOverflow."}, {"owner": {"reputation": 299, "user_id": 8897013, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f57438fb7d0ee1c49f779a3b7e7102e4?s=128&d=identicon&r=PG&f=1", "display_name": "user8897013", "link": "https://stackoverflow.com/users/8897013/user8897013"}, "reply_to_user": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1522887886, "post_id": 49661142, "comment_id": 86334718, "body": "@MaartenBodewes I think it does answer it. Do you also? Please confirm, and I will delete this question. Thanks. That was actually the question I was going to ask and couldn&#39;t find (I don&#39;t know why)."}, {"owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1522934494, "post_id": 49661142, "comment_id": 86357468, "body": "Yes, I do think that."}, {"owner": {"reputation": 299, "user_id": 8897013, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f57438fb7d0ee1c49f779a3b7e7102e4?s=128&d=identicon&r=PG&f=1", "display_name": "user8897013", "link": "https://stackoverflow.com/users/8897013/user8897013"}, "reply_to_user": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1522968271, "post_id": 49661142, "comment_id": 86376946, "body": "I had a hard time finding this information incidently. I think it may be good to have here. I would like you give you the opportunity to offer an answer based on your other question, or I will create my own when I have a chance."}], "owner": {"reputation": 299, "user_id": 8897013, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f57438fb7d0ee1c49f779a3b7e7102e4?s=128&d=identicon&r=PG&f=1", "display_name": "user8897013", "link": "https://stackoverflow.com/users/8897013/user8897013"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1522879496, "creation_date": 1522879496, "question_id": 49661142, "link": "https://stackoverflow.com/questions/49661142/why-does-openssl-not-return-the-same-values-using-public-key-verify-and-private", "title": "Why does OpenSSL not return the same values using public_key.verify and private_key.private_encrypt(digest)", "body": "<p>As far as I understand, signing data with an asymmetric key pair is essentially the same as using the private key to encrypt that same data. It says as much here: <a href=\"http://ruby-doc.org/stdlib-2.0.0/libdoc/openssl/rdoc/OpenSSL.html\" rel=\"nofollow noreferrer\">http://ruby-doc.org/stdlib-2.0.0/libdoc/openssl/rdoc/OpenSSL.html</a>. Ruby openssl seems to use an approach of hashing the data first then signing it. So I am confused why the value of signature is not equivalent at the end of both operations:</p>\n\n<p>1.</p>\n\n<pre><code>data = 'Sign me!'\ndigest = OpenSSL::Digest::SHA256.new\npkey = OpenSSL::PKey::RSA.new(2048)\nsignature = pkey.sign(digest, data)\nputs signature\n</code></pre>\n\n<p>2.</p>\n\n<pre><code>data = 'Sign me!'\ndata_hash = OpenSSL::Digest::digest(\"SHA256\", data)\nsignature = pkey.private_encrypt(data_hash.to_s)\nputs signature\n</code></pre>\n\n<p>(or if the digest is not working as I thought)</p>\n\n<p>3.</p>\n\n<pre><code>data = 'Sign me!'\nsignature = pkey.private_encrypt(data)\nputs signature\n</code></pre>\n\n<p>I am guessing that there are formatting things going on in the background. Now, this is for academic understanding, I will use verify for actual signature verification.</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "forms"], "comments": [{"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 1, "creation_date": 1522879847, "post_id": 49660671, "comment_id": 86332179, "body": "Could you implement collection_check_boxes in someway? <a href=\"https://apidock.com/rails/v4.0.2/ActionView/Helpers/FormOptionsHelper/collection_check_boxes\" rel=\"nofollow noreferrer\">apidock.com/rails/v4.0.2/ActionView/Helpers/FormOptionsHelpe&zwnj;&#8203;r/&hellip;</a>"}, {"owner": {"reputation": 241, "user_id": 2998535, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/gFBj3.jpg?s=128&g=1", "display_name": "Gary Wallen", "link": "https://stackoverflow.com/users/2998535/gary-wallen"}, "reply_to_user": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1522880402, "post_id": 49660671, "comment_id": 86332359, "body": "I believe collection_check_boxes work best with associations. Where as categories doesn&#39;t have associations (at least in the way the edit is being performed)"}, {"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1522884985, "post_id": 49660671, "comment_id": 86333881, "body": "Could you explicitly pass <code>true</code>/<code>false</code> as the value for the checkboxes?"}, {"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 1, "creation_date": 1522885245, "post_id": 49660671, "comment_id": 86333950, "body": "I guess I&#39;m unclear, is the <code>is_active</code> column a boolean?"}], "answers": [{"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1522888970, "creation_date": 1522888970, "answer_id": 49662482, "question_id": 49660671, "link": "https://stackoverflow.com/questions/49660671/rails-form-for-editing-a-collection/49662482#49662482", "title": "Rails form for editing a collection", "body": "<p>Let's consider what's going on here:</p>\n\n<pre><code>  def enable\n    Category.update(params[:category_ids], params[:category_ids].map{ |e| {is_active: true} })\n    redirect_to categories_path\n  end\n</code></pre>\n\n<p>Can you post what <code>params[:category_ids]</code> looks like here?  the <code>map</code> here doesn't quite make sense.  Also, what is the data type of <code>is_active</code> in the database?</p>\n"}, {"comments": [{"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1522903460, "post_id": 49664246, "comment_id": 86338341, "body": "I use a solution like this because I don&#39;t need a form and I can put them anywhere. If you are using something like Bootstrap it&#39;s easy to style the buttons using a <code>class: &quot;btn ...&quot;</code> at the end of the <code>link_to</code>."}], "tags": [], "owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "is_accepted": true, "score": 1, "last_activity_date": 1522943143, "last_edit_date": 1522943143, "creation_date": 1522903042, "answer_id": 49664246, "question_id": 49660671, "link": "https://stackoverflow.com/questions/49660671/rails-form-for-editing-a-collection/49664246#49664246", "title": "Rails form for editing a collection", "body": "<p>When I've run into situations like this in Rails I usually end up using AJAX rather than mass assignment. It's actually rather easy. At least easier for me than learning the inner workings of the <code>check_boxes</code> and <code>collection_check_boxes</code>, LOL</p>\n\n<p>A simple Categories table:</p>\n\n<pre><code>    &lt;table&gt;\n  &lt;thead&gt;\n    &lt;tr&gt;\n      &lt;th&gt;Category&lt;/th&gt;\n      &lt;th&gt;Status&lt;/th&gt;\n    &lt;/tr&gt;\n  &lt;/thead&gt;\n\n  &lt;tbody&gt;\n    &lt;% @categories.each do |category| %&gt;\n      &lt;tr&gt;\n        &lt;td&gt;&lt;%= category.category_name %&gt;&lt;/td&gt;\n        &lt;% status = category.is_active? ? 'Active' : 'Inactive' %&gt;\n        &lt;td id=\"&lt;%= category.id %&gt;\" &gt;&lt;button class=\"button_&lt;%= status %&gt;\"&gt;&lt;%= link_to status, toggle_active_path(:id =&gt; category.id), :method =&gt; :post, :remote =&gt; true %&gt;&lt;/button&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;% end %&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>The lines to note are the embedded ruby setting the <code>status</code> variable. This is used to set the value of the class for the button. In the CSS file the button class <code>button_Active</code> sets the color to green and <code>button_Inactive</code> makes it red. It also uses this variable to set the text of the button. </p>\n\n<p><a href=\"https://i.stack.imgur.com/KDPRc.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KDPRc.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Create a method in the controller that toggles the status:</p>\n\n<pre><code>def toggle_is_active\n@category.toggle!(:is_active) #flips the boolean on is_active\nrespond_to do |format|\n  format.html { redirect_to(@category) }\n  format.js\nend\n</code></pre>\n\n<p>Be aware that <code>.toggle!</code> will bypass model validations and save. If you need to ensure validations run you can use <code>@category.toggle(:is_active).save</code></p>\n\n<p>This will respond to format.js and call a very small file called toggle_is_active.js.erb:</p>\n\n<pre><code>$('#&lt;%= @category.id %&gt;').html('&lt;%= escape_javascript(render :partial =&gt; 'toggle_active') %&gt;');\n</code></pre>\n\n<p>This targets the id of the html element that we set to the <code>id</code> of the category in the table row. </p>\n\n<p>This calls a partial called <code>_toggle_active.html.erb</code> and updates the appropriate <code>&lt;td&gt;</code> with the new html:</p>\n\n<pre><code>&lt;% status = @category.is_active? ? 'Active' : 'Inactive' %&gt;\n&lt;button class=\"button_&lt;%= status %&gt;\"&gt;&lt;%= link_to status, toggle_active_path(:id =&gt; @category.id), :method =&gt; :post, :remote =&gt; true %&gt;&lt;/button&gt;\n</code></pre>\n\n<p>Now all you need is a route to access the AJAX link:</p>\n\n<p>routes.rb:</p>\n\n<pre><code>post 'toggle_active' =&gt; 'categories#toggle_is_active'\n</code></pre>\n\n<p>Here is a working example you can clone on github. It has the stylesheets to get the look above. I think you can extrapolate this for almost any situation:</p>\n\n<p><a href=\"https://github.com/Beartech/category_boxes\" rel=\"nofollow noreferrer\">https://github.com/Beartech/category_boxes</a></p>\n"}], "owner": {"reputation": 241, "user_id": 2998535, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/gFBj3.jpg?s=128&g=1", "display_name": "Gary Wallen", "link": "https://stackoverflow.com/users/2998535/gary-wallen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "accepted_answer_id": 49664246, "answer_count": 2, "score": 0, "last_activity_date": 1522943143, "creation_date": 1522876946, "last_edit_date": 1522879583, "question_id": 49660671, "link": "https://stackoverflow.com/questions/49660671/rails-form-for-editing-a-collection", "title": "Rails form for editing a collection", "body": "<p>What I am trying to accomplish is a simple \"toggle\" checkbox for On/Off for a view which contains records from a model. </p>\n\n<p>I have attempted to look into a \"hidden\" value, but it doesn't appear to work as intended.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/20379311/how-to-get-blank-checkboxes-to-pass-as-false-to-params\">How to get blank checkboxes to pass as false to params</a></p>\n\n<p>When I've added: <code>&lt;%= hidden_field_tag \"category_ids[]\", '' %&gt;</code></p>\n\n<p>I receive <code>Couldn't find Category with 'category_name'=</code> when unchecking.</p>\n\n<p>Essentially, the table is a <code>Model.all</code>, but I want to be able to modify the key value on an <code>is_active</code> column to <code>true</code> or <code>false</code>, depending on if the box is checked, or not. Currently, I can accomplish this for \"checking\" the box. But, not unchecking (passes <code>null</code>). I am trying accomplish this is one swoop rather than making all my checkes, and another pass for my unchecked. And, also bypassing the show/edit process. The table size is rather small, so I am not concerned with latency.</p>\n\n<p>I have attempted to search as much as I could, but am at a loss. With what I've found I can do one or the other, but not both unfortunately, and I would greatly appreciate any guidance.</p>\n\n<p><strong>My view:</strong></p>\n\n<pre><code>&lt;h4&gt;Categories&lt;/h4&gt;\n&lt;%= form_tag enable_categories_path, method: :put do |f| %&gt;\n&lt;table id=\"myTable\" class=\"table table-bordered table-striped\"&gt;\n  &lt;tr&gt;\n    &lt;th&gt;Enable&lt;/th&gt;\n    &lt;th&gt;Category Name&lt;/th&gt;\n    &lt;th&gt;Active&lt;/th&gt;\n  &lt;/tr&gt;\n\n  &lt;tbody&gt;\n  &lt;% @categories.each do |category| %&gt;\n    &lt;tr&gt;\n      &lt;td&gt;\n        &lt;%= check_box_tag \"category_ids[]\", category.id, category.is_active == 1 ? 'checked' : nil %&gt;\n      &lt;/td&gt;\n      &lt;td&gt;&lt;%= link_to category.category_name, category %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= category.is_active == 1 ? 'Yes' : 'No' %&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;% end %&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n&lt;%= render 'settings/button' %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Here, the checkboxes are grabbing their state from the model itself for the corresponding record, so if no action is taken on the checkbox it remains the same (or passes state back)</p>\n\n<p><strong>My controller:</strong></p>\n\n<pre><code>class CategoriesController &lt; ApplicationController\n  before_action :set_category, only: [:show, :edit, :update]\n\n  def index\n    @categories = Category.all.order(:category_sort)\n  end\n\n  def show\n    @category = Category.find(params[:id])\n  end\n\n  def edit\n  end\n\n  def update\n    if @category.update(category_params)\n      redirect_to categories_path\n    else\n      render :edit\n    end\n  end\n\n  def enable\n    Category.update(params[:category_ids], params[:category_ids].map{ |e| {is_active: true} })\n    redirect_to categories_path\n  end\n\n  private\n\n  def set_category\n    @category = Category.find(params[:id])\n  end\n\n  def category_params\n    params[:category].permit(:id, :category_name, :is_active)\n  end\n\nend\n</code></pre>\n\n<p>Currently, I'm only passing is_active: true, until I can figure a way to pass ALL checkbox states.</p>\n\n<p><strong>My model:</strong></p>\n\n<pre><code>class Category &lt; ActiveRecord::Base\n  self.table_name  = 'categories'\n\n  has_many   :metrics\nend\n</code></pre>\n\n<p><strong>My route:</strong></p>\n\n<pre><code>resources :categories do\n    collection do\n      put :toggle\n    end\n  end\n</code></pre>\n\n<p>Everything appears to pass correctly for checked boxes. But, nothing appears in the logs for when something is unchecked.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "installation"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 4922847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UMJmA.jpg?s=128&g=1", "display_name": "tposs", "link": "https://stackoverflow.com/users/4922847/tposs"}, "edited": false, "score": 0, "creation_date": 1522878492, "post_id": 49660648, "comment_id": 86331596, "body": "I went through the steps, I was able to get <code>rbenv</code> installed, and I ran the command to install a version. When I run <code>rbenv global 2.4.0</code> though it does not update my global version. <code>ruby -v</code> remains <code>2.0.0</code>. Also, I tried again <code>gem install bundler</code> and it gave me the same error I mentioned above. I&#39;m not a rails developer, and I&#39;m out of ideas. Let me know if you have any more!"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 53, "user_id": 4922847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UMJmA.jpg?s=128&g=1", "display_name": "tposs", "link": "https://stackoverflow.com/users/4922847/tposs"}, "edited": false, "score": 1, "creation_date": 1522879348, "post_id": 49660648, "comment_id": 86331978, "body": "See <a href=\"https://stackoverflow.com/a/12150580/580346\">this answer</a>, maybe it&#39;ll help you"}, {"owner": {"reputation": 53, "user_id": 4922847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UMJmA.jpg?s=128&g=1", "display_name": "tposs", "link": "https://stackoverflow.com/users/4922847/tposs"}, "edited": false, "score": 0, "creation_date": 1522880149, "post_id": 49660648, "comment_id": 86332283, "body": "I added the solution stated in the first answer to your link, and it worked! I think i came across that article, but didn&#39;t work last time I tried. Thank you so much for your help!"}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 1, "last_activity_date": 1522877243, "last_edit_date": 1522877243, "creation_date": 1522876812, "answer_id": 49660648, "question_id": 49660538, "link": "https://stackoverflow.com/questions/49660538/installing-ruby-on-rails-and-other-gems-without-admin-password/49660648#49660648", "title": "Installing Ruby on Rails and other gems without admin password.", "body": "<p>You can use <a href=\"https://rvm.io/\" rel=\"nofollow noreferrer\">RVM</a> or <a href=\"https://github.com/rbenv/rbenv\" rel=\"nofollow noreferrer\">rbenv</a>. Those are tools that manage your ruby environment (interpreter version, gems) and let you keep all the gems in user directories.</p>\n\n<p>In short: install rvm or rbenv, then install ruby using one of them and then - you can install your gems without admin rights. You'll get an ability to upgrade ruby to the newest version for free :).</p>\n\n<p>It looks you're using mac, so see <a href=\"https://www.codementor.io/akabiru/3-steps-set-up-ruby-environment-macos-6mavm7jrl\" rel=\"nofollow noreferrer\">this guide</a>. </p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 4922847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UMJmA.jpg?s=128&g=1", "display_name": "tposs", "link": "https://stackoverflow.com/users/4922847/tposs"}, "edited": false, "score": 1, "creation_date": 1522878121, "post_id": 49660755, "comment_id": 86331452, "body": "I&#39;m in the process of going through the admin hoops to get IT to allow something like this to happen. My team, apparently, have been trying to get these permissions for over a year. Bureaucracy. :("}], "tags": [], "owner": {"reputation": 1399, "user_id": 311555, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/93a446dca6cd40094f6fd21e499717c5?s=128&d=identicon&r=PG", "display_name": "dr.", "link": "https://stackoverflow.com/users/311555/dr"}, "is_accepted": false, "score": 0, "last_activity_date": 1522877914, "last_edit_date": 1522877914, "creation_date": 1522877393, "answer_id": 49660755, "question_id": 49660538, "link": "https://stackoverflow.com/questions/49660538/installing-ruby-on-rails-and-other-gems-without-admin-password/49660755#49660755", "title": "Installing Ruby on Rails and other gems without admin password.", "body": "<p>I would have someone from IT sit with you as you setup your box via <a href=\"https://gorails.com/setup/osx/10.13-high-sierra\" rel=\"nofollow noreferrer\">this</a> GoRails guide. Homebrew will detail the permissions and folders you need to chmod. This is why you need the IT person. Once you get the permissions set appropriately, you will be able to install any version of Ruby and Gems without sudo.</p>\n\n<p>Honestly this is just a band-aid to a bigger issue. </p>\n"}], "owner": {"reputation": 53, "user_id": 4922847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UMJmA.jpg?s=128&g=1", "display_name": "tposs", "link": "https://stackoverflow.com/users/4922847/tposs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1289, "favorite_count": 1, "accepted_answer_id": 49660648, "answer_count": 2, "score": 1, "last_activity_date": 1522877914, "creation_date": 1522876435, "question_id": 49660538, "link": "https://stackoverflow.com/questions/49660538/installing-ruby-on-rails-and-other-gems-without-admin-password", "title": "Installing Ruby on Rails and other gems without admin password.", "body": "<p>I'm trying to get Ruby on Rails running on my work computer, however there are admin privileges that are not allowing me to install it. When I try to install it I get <code>You don't have write permissions for the /Library/Ruby/Gems/2.0.0 directory</code>. I was able to circumvent the admin issue to install Node.js, NPM, and Homebrew on my computer, but I'm having a hard time with Rails. Is there a way to install Rails and gems into a customized folder that I'm able to write to and access the commands in terminal? (or any other solution you can think of)</p>\n\n<p>My ruby version is 2.0.0, don't believe I have permission to upgrade this (unless I can install it in a different directory).</p>\n\n<p>You may be wondering why I have to go through this, my company hired me as a web developer but I'm not under the IT department so they are resistant to me installing random languages and frameworks. </p>\n\n<p>Thank you!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 4966, "user_id": 3605497, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mV6Nc.jpg?s=128&g=1", "display_name": "Tripp Kinetics", "link": "https://stackoverflow.com/users/3605497/tripp-kinetics"}, "edited": false, "score": 1, "creation_date": 1522875991, "post_id": 49660392, "comment_id": 86330424, "body": "You are trying to validate a column called <code>date</code>, when there is no column named <code>date</code> in <code>appointments</code>."}, {"owner": {"reputation": 2285, "user_id": 2039726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fc7ff9bf8f9489ab7715282a9b7e9c?s=128&d=identicon&r=PG", "display_name": "MrShemek", "link": "https://stackoverflow.com/users/2039726/mrshemek"}, "edited": false, "score": 0, "creation_date": 1522876165, "post_id": 49660392, "comment_id": 86330509, "body": "The same applies to <code>hour</code>"}, {"owner": {"reputation": 19, "user_id": 7692795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f998bbfcacc2e0d26bb1045d19e45ba8?s=128&d=identicon&r=PG&f=1", "display_name": "Razz", "link": "https://stackoverflow.com/users/7692795/razz"}, "edited": false, "score": 0, "creation_date": 1522876273, "post_id": 49660392, "comment_id": 86330557, "body": "So I&#39;ve got to basically add &quot;date&quot; and &quot;hour&quot; to my &quot;appointments&quot; table?"}, {"owner": {"reputation": 2285, "user_id": 2039726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fc7ff9bf8f9489ab7715282a9b7e9c?s=128&d=identicon&r=PG", "display_name": "MrShemek", "link": "https://stackoverflow.com/users/2039726/mrshemek"}, "edited": false, "score": 0, "creation_date": 1522876555, "post_id": 49660392, "comment_id": 86330691, "body": "Depends on what you are trying to achieve.  I would say that you have to validate uniqueness of <code>appointment_time</code> plus when adding a new appointment, you have to make sure that there is no appointment at that time (including the appointment duration)"}, {"owner": {"reputation": 19, "user_id": 7692795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f998bbfcacc2e0d26bb1045d19e45ba8?s=128&d=identicon&r=PG&f=1", "display_name": "Razz", "link": "https://stackoverflow.com/users/7692795/razz"}, "edited": false, "score": 0, "creation_date": 1522934897, "post_id": 49660392, "comment_id": 86357807, "body": "I&#39;ve added &quot;hour&quot; and &quot;date&quot; to my model and seems to work :)"}], "owner": {"reputation": 19, "user_id": 7692795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f998bbfcacc2e0d26bb1045d19e45ba8?s=128&d=identicon&r=PG&f=1", "display_name": "Razz", "link": "https://stackoverflow.com/users/7692795/razz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1522875784, "creation_date": 1522875784, "question_id": 49660392, "link": "https://stackoverflow.com/questions/49660392/sqlite3sqlexception-no-such-column-ruby-on-rails", "title": "SQLite3::SQLException: no such column (Ruby on Rails)", "body": "<p>So I'm trying to use <strong>appointments gem</strong> (<a href=\"http://www.rubydoc.info/gems/appointments/1.3.3\" rel=\"nofollow noreferrer\">http://www.rubydoc.info/gems/appointments/1.3.3</a>). I've done exactly as that document says and I keep getting the following error:</p>\n\n<pre><code>ActiveRecord::StatementInvalid in AppointmentsController#index\n\nSQLite3::SQLException: no such column: appointments.date: SELECT \"appointments\".* FROM \"appointments\" WHERE \"appointments\".\"date\" IS NULL\n\napp/controllers/appointments_controller.rb:6:in `index'\n</code></pre>\n\n<p><strong>schema.rb</strong></p>\n\n<pre><code>ActiveRecord::Schema.define(version: 20180402162908) do\n\n  create_table \"appointments\", force: :cascade do |t|\n    t.datetime \"appointment_time\"\n    t.integer  \"duration\"\n    t.float    \"price\"\n    t.integer  \"user_id\"\n    t.integer  \"client_id\"\n    t.datetime \"created_at\",       null: false\n    t.datetime \"updated_at\",       null: false\n  end\n\n  add_index \"appointments\", [\"client_id\"], name: \"index_appointments_on_client_id\"\n  add_index \"appointments\", [\"user_id\"], name: \"index_appointments_on_user_id\"\n\n  create_table \"clients\", force: :cascade do |t|\n    t.string   \"name\"\n    t.string   \"phone_number\"\n    t.string   \"email\"\n    t.string   \"address\"\n    t.integer  \"user_id\"\n    t.datetime \"created_at\",   null: false\n    t.datetime \"updated_at\",   null: false\n  end\n\n  add_index \"clients\", [\"user_id\"], name: \"index_clients_on_user_id\"\n\n  create_table \"services\", force: :cascade do |t|\n    t.string   \"name\"\n    t.string   \"description\"\n    t.float    \"price\"\n    t.integer  \"duration\"\n    t.datetime \"created_at\",  null: false\n    t.datetime \"updated_at\",  null: false\n  end\n\n  create_table \"users\", force: :cascade do |t|\n    t.string   \"email\",                  default: \"\", null: false\n    t.string   \"encrypted_password\",     default: \"\", null: false\n    t.string   \"reset_password_token\"\n    t.datetime \"reset_password_sent_at\"\n    t.datetime \"remember_created_at\"\n    t.integer  \"sign_in_count\",          default: 0,  null: false\n    t.datetime \"current_sign_in_at\"\n    t.datetime \"last_sign_in_at\"\n    t.string   \"current_sign_in_ip\"\n    t.string   \"last_sign_in_ip\"\n    t.datetime \"created_at\",                          null: false\n    t.datetime \"updated_at\",                          null: false\n  end\n\n  add_index \"users\", [\"email\"], name: \"index_users_on_email\", unique: true\n  add_index \"users\", [\"reset_password_token\"], name: \"index_users_on_reset_password_token\", unique: true\n\nend\n</code></pre>\n\n<p><strong>appointments_controller.rb</strong></p>\n\n<pre><code>class AppointmentsController &lt; ApplicationController\n\n  def index\n    date_from_ajax = params[:matched_date]\n    reduce = Appointment.where(:date =&gt; date_from_ajax)\n    hour_on_date = reduce.collect {|x| x.hour}\n    @new_dates = hour_on_date\n    render :layout =&gt; false\n  end\n\n  def new\n    @appointments = Appointment.create\n      respond_to do |format|\n        format.html\n        format.js\n        end\n     end\n\n\n  def create\n     @appointment = Appointment.create(params[:appointments])\n      if @appointment.save\n        redirect_to new_appointment_path\n      else\n        err = ''\n        @appointment.errors.full_messages.each do |m|\n        err &lt;&lt; m\n      end\n\n        redirect_to new_appointment_path, :flash =&gt; { :alert =&gt; \"#{err}, please try again\" }\n      end\n    end\n\n  private\n\n    def appointment_params\n      params.require(:appointment).permit(:date, :hour, :done)\n    end\nend\n</code></pre>\n\n<p><strong>appointments.rb</strong></p>\n\n<pre><code>class Appointment &lt; ActiveRecord::Base\n\nvalidates :date,  :presence =&gt; true\nvalidates :hour,  :presence =&gt; true,\n                  :uniqueness =&gt; {:scope =&gt; :date}\nend\n</code></pre>\n\n<p>Is there any chance someone could help me with this.</p>\n\n<p>Thanks in advance :)</p>\n\n<p>(Rails version: 4.2.6)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "bundler"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 1, "creation_date": 1522876247, "post_id": 49659976, "comment_id": 86330549, "body": "I was a little surprised to find this comment from 2014: <a href=\"https://github.com/bundler/bundler/issues/2965#issuecomment-39469017\" rel=\"nofollow noreferrer\">github.com/bundler/bundler/issues/2965#issuecomment-39469017</a>"}, {"owner": {"reputation": 17747, "user_id": 241142, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/dc690e6057d0756358e2d80409a945b1?s=128&d=identicon&r=PG", "display_name": "iconoclast", "link": "https://stackoverflow.com/users/241142/iconoclast"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1522952674, "post_id": 49659976, "comment_id": 86369654, "body": "\ud83d\ude31wow, that <i>is</i> surprising, especially the claim that it&#39;s not a bug for bundler to build a dependency graph that fails, because it has never paid attention to Ruby versions in the past. I guess this is a good example of <b><i>how different people can have radically different ideas of what a bug is</i></b>.  In my mind, the fact that <i>it has always failed to handle a certain use case in performing its one job</i> does not change the fact that it&#39;s failing to do its one job.  But then... I guess he and I have a different definition of its job..."}], "answers": [{"comments": [{"owner": {"reputation": 17747, "user_id": 241142, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/dc690e6057d0756358e2d80409a945b1?s=128&d=identicon&r=PG", "display_name": "iconoclast", "link": "https://stackoverflow.com/users/241142/iconoclast"}, "edited": false, "score": 0, "creation_date": 1522952878, "post_id": 49664101, "comment_id": 86369775, "body": "&quot;This is why it is good practice to specify exact versions for all your gems&quot;\u2014if I have to figure out the exact versions of every Gem, then I have to do Bundler&#39;s job before I let Bundler do it&#39;s job. Why would I do that?"}, {"owner": {"reputation": 17747, "user_id": 241142, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/dc690e6057d0756358e2d80409a945b1?s=128&d=identicon&r=PG", "display_name": "iconoclast", "link": "https://stackoverflow.com/users/241142/iconoclast"}, "edited": false, "score": 0, "creation_date": 1522953045, "post_id": 49664101, "comment_id": 86369885, "body": "&quot;so that if an update comes out for a gem in the repo you are getting the gem from- your project does not break.&quot;\u2014that&#39;s what Gemfile.lock is for.  It tracks exact versions.  If a new version breaks my code, I then have new information that did not exist before it came out, and I can then specify in Gemfile not to use that version."}, {"owner": {"reputation": 17747, "user_id": 241142, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/dc690e6057d0756358e2d80409a945b1?s=128&d=identicon&r=PG", "display_name": "iconoclast", "link": "https://stackoverflow.com/users/241142/iconoclast"}, "edited": false, "score": 0, "creation_date": 1522953170, "post_id": 49664101, "comment_id": 86369972, "body": "&quot;Bundler is not ignoring the ruby version.&quot; I&#39;m not sure what you mean by this.  It seems pretty clear to me from the GitHub issue linked to in the question&#39;s first comment that <b><i>Bundler is not taking into account Ruby versions in building the dependency graph</i></b>.   So, at least at that point in its operation, it is doing nothing with the information I gave it, which I consider to be ignoring that information."}, {"owner": {"reputation": 4693, "user_id": 5501536, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/50b9ab14ab8699a3862c14ee48126abe?s=128&d=identicon&r=PG&f=1", "display_name": "chevybow", "link": "https://stackoverflow.com/users/5501536/chevybow"}, "reply_to_user": {"reputation": 17747, "user_id": 241142, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/dc690e6057d0756358e2d80409a945b1?s=128&d=identicon&r=PG", "display_name": "iconoclast", "link": "https://stackoverflow.com/users/241142/iconoclast"}, "edited": false, "score": 0, "creation_date": 1522954595, "post_id": 49664101, "comment_id": 86370782, "body": "I don&#39;t disagree with you. Overall bundler is not ignoring the ruby version- but it does not take into account versions when dealing with dependency issues. This is what I mentioned in my answer. The dependency issues are clearly outputted to the console so they should be easy to resolve by specifying version numbers.    This is just the behavior of bundler and gemfiles."}], "tags": [], "owner": {"reputation": 4693, "user_id": 5501536, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/50b9ab14ab8699a3862c14ee48126abe?s=128&d=identicon&r=PG&f=1", "display_name": "chevybow", "link": "https://stackoverflow.com/users/5501536/chevybow"}, "is_accepted": false, "score": 0, "last_activity_date": 1522901898, "creation_date": 1522901898, "answer_id": 49664101, "question_id": 49659976, "link": "https://stackoverflow.com/questions/49659976/why-is-bundler-repeatedly-choosing-gems-that-require-a-newer-version-of-ruby/49664101#49664101", "title": "Why is Bundler repeatedly choosing gems that require a newer version of Ruby", "body": "<p>Bundler is not ignoring the ruby version. When it installs gems it does not look at each gem and do a smart pick of which one to choose to get rid of any dependency issues (including the ruby version dependency). </p>\n\n<p>In your gemfile, by not specifying the gem version, bundler will try to install the highest version it can. This is why it is good practice to specify exact versions for all your gems- so that if an update comes out for a gem in the repo you are getting the gem from- your project does not break. </p>\n\n<p>Specifying the ruby version in the gem file is just like specifying the gem version for particular gem- it installs that version but does not affect the installation of any other gems. </p>\n"}], "owner": {"reputation": 17747, "user_id": 241142, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/dc690e6057d0756358e2d80409a945b1?s=128&d=identicon&r=PG", "display_name": "iconoclast", "link": "https://stackoverflow.com/users/241142/iconoclast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1522901898, "creation_date": 1522874134, "question_id": 49659976, "link": "https://stackoverflow.com/questions/49659976/why-is-bundler-repeatedly-choosing-gems-that-require-a-newer-version-of-ruby", "title": "Why is Bundler repeatedly choosing gems that require a newer version of Ruby", "body": "<p>I've just started working on a very old legacy app for a client, which is running on Ruby 1.9.3, Rails 3.2, and using JRuby on the production server.  (Obstacles in upgrading the server has been a contributor to remaining on 1.9.3.)  </p>\n\n<p>Adding a gem to the Gemfile, even though the gem is compatible with 1.9.3, and even though I've added </p>\n\n<pre><code>ruby '1.9.3', :patchlevel =&gt; '551'\n</code></pre>\n\n<p>to the top of the Gemfile, Bundler continually chooses versions of other gems that require Ruby 2.0, and so updating fails.  How can I get around this, without having to manually specify <em>every</em> single gem version that it fails on.</p>\n\n<p>For example:</p>\n\n<pre><code>...\nUsing quiet_assets 1.1.0\nUsing rails 3.2.22\nUsing ref 2.0.0\nUsing rspec-rails 2.14.2\nFetching rspec_junit_formatter 0.3.0 (was 0.2.3)\nInstalling rspec_junit_formatter 0.3.0 (was 0.2.3)\nGem::InstallError: rspec_junit_formatter requires Ruby version &gt;= 2.0.0.\nAn error occurred while installing rspec_junit_formatter (0.3.0), and Bundler cannot continue.\nMake sure that `gem install rspec_junit_formatter -v '0.3.0'` succeeds before bundling.\n</code></pre>\n\n<p>I had to specify <code>gem 'rspec_junit_formatter', '0.2.3'</code>, <strong><em>as well as all of the previous failures</em></strong>, in order to get this working.  But that seems to defeat the purpose of Bundler.  Why is Bundler ignoring Ruby versions when it builds its dependency graph, even though I've explicitly told it what version of Ruby to use?</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "database"], "comments": [{"owner": {"reputation": 3346, "user_id": 832780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uOmJB.jpg?s=128&g=1", "display_name": "hallucinations", "link": "https://stackoverflow.com/users/832780/hallucinations"}, "edited": false, "score": 0, "creation_date": 1522874391, "post_id": 49659902, "comment_id": 86329567, "body": "Give us an example of what the content of blahusers1.json is (because   the script that you&#39;ve given produces <code>{&quot;error&quot;:&quot;Couldn&#39;t authenticate you&quot;}</code> ?   And the backtrace of the error too?"}, {"owner": {"reputation": 41, "user_id": 3835982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785e66c1537c65d5ea26f5b1795d4461?s=128&d=identicon&r=PG", "display_name": "sunkencity999", "link": "https://stackoverflow.com/users/3835982/sunkencity999"}, "reply_to_user": {"reputation": 3346, "user_id": 832780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uOmJB.jpg?s=128&g=1", "display_name": "hallucinations", "link": "https://stackoverflow.com/users/832780/hallucinations"}, "edited": false, "score": 0, "creation_date": 1522875807, "post_id": 49659902, "comment_id": 86330337, "body": "Example provided in Edit!"}, {"owner": {"reputation": 3346, "user_id": 832780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uOmJB.jpg?s=128&g=1", "display_name": "hallucinations", "link": "https://stackoverflow.com/users/832780/hallucinations"}, "edited": false, "score": 0, "creation_date": 1522876013, "post_id": 49659902, "comment_id": 86330441, "body": "See whether my answer helps you solve/understand the problem."}, {"owner": {"reputation": 41, "user_id": 3835982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785e66c1537c65d5ea26f5b1795d4461?s=128&d=identicon&r=PG", "display_name": "sunkencity999", "link": "https://stackoverflow.com/users/3835982/sunkencity999"}, "reply_to_user": {"reputation": 3346, "user_id": 832780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uOmJB.jpg?s=128&g=1", "display_name": "hallucinations", "link": "https://stackoverflow.com/users/832780/hallucinations"}, "edited": false, "score": 1, "creation_date": 1522876746, "post_id": 49659902, "comment_id": 86330785, "body": "That solved it, thank you so much!"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 3835982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785e66c1537c65d5ea26f5b1795d4461?s=128&d=identicon&r=PG", "display_name": "sunkencity999", "link": "https://stackoverflow.com/users/3835982/sunkencity999"}, "edited": false, "score": 1, "creation_date": 1522876726, "post_id": 49660239, "comment_id": 86330776, "body": "Thank you hallucinations! That was the issue and it worked. I upvoted, but as I have less than fifteen rep it won&#39;t display on the post."}, {"owner": {"reputation": 3346, "user_id": 832780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uOmJB.jpg?s=128&g=1", "display_name": "hallucinations", "link": "https://stackoverflow.com/users/832780/hallucinations"}, "reply_to_user": {"reputation": 41, "user_id": 3835982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785e66c1537c65d5ea26f5b1795d4461?s=128&d=identicon&r=PG", "display_name": "sunkencity999", "link": "https://stackoverflow.com/users/3835982/sunkencity999"}, "edited": false, "score": 0, "creation_date": 1522881668, "post_id": 49660239, "comment_id": 86332832, "body": "No worries! However, when you have enough reputation, I would appreciate if you could please upvote my answer since it helped you."}, {"owner": {"reputation": 41, "user_id": 3835982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785e66c1537c65d5ea26f5b1795d4461?s=128&d=identicon&r=PG", "display_name": "sunkencity999", "link": "https://stackoverflow.com/users/3835982/sunkencity999"}, "edited": false, "score": 0, "creation_date": 1522944853, "post_id": 49660239, "comment_id": 86365160, "body": "I definitely will do."}], "tags": [], "owner": {"reputation": 3346, "user_id": 832780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uOmJB.jpg?s=128&g=1", "display_name": "hallucinations", "link": "https://stackoverflow.com/users/832780/hallucinations"}, "is_accepted": true, "score": 2, "last_activity_date": 1522875915, "last_edit_date": 1522875915, "creation_date": 1522875174, "answer_id": 49660239, "question_id": 49659902, "link": "https://stackoverflow.com/questions/49659902/seeding-data-from-json-api-to-ruby-on-rails-app/49660239#49660239", "title": "Seeding Data from JSON API to Ruby on Rails APP", "body": "<p>The example data you posted has a root object <code>users</code> that contains the array of user objects. So when you loop users using <code>users.each</code>, <code>a</code> is actually an <code>Array</code> and not a user <code>Hash</code> like you expected.</p>\n\n<p>When you try to access an element of an <code>Array</code> using a 'String' index, it gives you the exception \u2013 <code>no implicit conversion of String into Integer</code></p>\n\n<p>So, try changing</p>\n\n<pre><code>users = JSON.load(file)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>users = JSON.load(file)['users']\n</code></pre>\n\n<p>to get it working like how you'd expect.</p>\n"}], "owner": {"reputation": 41, "user_id": 3835982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785e66c1537c65d5ea26f5b1795d4461?s=128&d=identicon&r=PG", "display_name": "sunkencity999", "link": "https://stackoverflow.com/users/3835982/sunkencity999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 917, "favorite_count": 0, "accepted_answer_id": 49660239, "answer_count": 1, "score": 1, "last_activity_date": 1522875915, "creation_date": 1522873859, "last_edit_date": 1522874678, "question_id": 49659902, "link": "https://stackoverflow.com/questions/49659902/seeding-data-from-json-api-to-ruby-on-rails-app", "title": "Seeding Data from JSON API to Ruby on Rails APP", "body": "<p>I'm getting a <code>no implicit conversion of String into Integer</code> error that has me stumped, and unable to import user records and seed my database with them. </p>\n\n<p>So far I have no problem accessing the data, but receive an error referencing the '[]' on the line with <code>User.find...</code> on it</p>\n\n<p>The code I'm using is as follows: </p>\n\n<pre><code>require 'net/http'\nrequire 'uri'\nrequire 'json'\nrequire 'faker'\n\n#this script imports APR user data from the zendesk api and populates \nthe database with it. \n\n\nuri = URI.parse(\"https://blahsupport.zendesk.com/api/v2/users.json\")\nrequest = Net::HTTP::Get.new(uri)\nrequest.content_type = \"application/json\"\nrequest.basic_auth(\"blah@blah.com\", \"blahpass\")\n\nreq_options = {\n  use_ssl: uri.scheme == \"https\",\n}\n\n@response = Net::HTTP.start(uri.hostname, uri.port, req_options) do |http|\n  http.request(request)\nend\nputs @response.body\nputs @response.message\nputs @response.code\n\ninfo = @response.body \n\ninfo.force_encoding(\"utf-8\")\n\nFile.write('blahusers1.json', info)\n\n\nputs \"File Created Successfully!\"\n\nfile = File.read('blahusers1.json')\n\nusers = JSON.load(file)\n\nusers.each do |a|\n    User.find_or_create_by_zendesk_id(:zendesk_id =&gt; a['id'], :url =&gt; a['url'], :name =&gt; a['name'], :email =&gt; a['email'])\nend\n</code></pre>\n\n<p>Any ideas on how I've gotten this error? Thank you for any help! </p>\n\n<p>**Edit </p>\n\n<p>Below is an example of the data being returned. </p>\n\n<pre><code>{\"users\":[{\"id\":333653859,\"url\":\"https://blahblah.zendesk.com/api/v2/users/333653859.json\",\"name\":\"Randy Blah\",\"email\":\"randy@blah.com\",\"created_at\":\"2014-08-06T14:31:24Z\",\"updated_at\":\"2018-04-04T14:22:06Z\",\"time_zone\":\"Pacific Time (US &amp; Canada)\",\"phone\":null,\"shared_phone_number\":null,\"photo\":{\"url\":\"https://aprtechsupport.zendesk.com/api/v2/attachments/68955389.json\",\"id\":68955389,\"file_name\":\"Work.jpg\",\"content_url\":\"https://aprtechsupport.zendesk.com/system/photos/6895/5389/Work.jpg\",\"mapped_content_url\":\"https://blahblah.zendesk.com/system/photos/6895/5389/Work.jpg\",\"content_type\":\"image/jpeg\",\"size\":2528,\"width\":80,\"height\":80,\"inline\":false,\"thumbnails\":[{\"url\":\"https://blahblah.zendesk.com/api/v2/attachments/68955399.json\",\"id\":68955399,\"file_name\":\"Work_thumb.jpg\",\"content_url\":\"https://blahblah.zendesk.com/system/photos/6895/5389/Work_thumb.jpg\",\"mapped_content_url\":\"https://blahblah.zendesk.com/system/photos/6895/5389/Work_thumb.jpg\",\"content_type\":\"image/jpeg\",\"size\":2522,\"width\":32,\"height\":32,\"inline\":false}]},\"locale_id\":1,\"locale\":\"en-US\",\"organization_id\":null,\"role\":\"admin\",\"verified\":true,\"external_id\":null,\"tags\":[],\"alias\":\"\",\"active\":true,\"shared\":false,\"shared_agent\":false,\"last_login_at\":\"2018-04-04T14:21:44Z\",\"two_factor_auth_enabled\":null,\"signature\":\"Thanks for contacting the helpdesk!\\n-Randy\",\"details\":\"\",\"notes\":\"\",\"role_type\":null,\"custom_role_id\":null,\"moderator\":true,\"ticket_restriction\":null,\"only_private_comments\":false,\"restricted_agent\":false,\"suspended\":false,\"chat_only\":false,\"default_group_id\":21692179,\"user_fields\":{}}\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 433, "user_id": 7313789, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a4a8392e031b7a7a12a70e0efc42c9df?s=128&d=identicon&r=PG&f=1", "display_name": "Luple", "link": "https://stackoverflow.com/users/7313789/luple"}, "edited": false, "score": 0, "creation_date": 1522871826, "post_id": 49659339, "comment_id": 86328203, "body": "I am no ruby developer, but there are a few things to consider. First of all, is age being considered a number or a string? It is possible that it is handling the age variable as a string and not a number. Another option is that  &quot;+age/2 +...&quot; is adding age to the string and then dividing the string by 2 (doing weird order of operations stuff due to the nature of string concatenation)."}, {"owner": {"reputation": 736, "user_id": 695186, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5e8a7008005c6b3cc5e3164b76630517?s=128&d=identicon&r=PG", "display_name": "Ryan Clark", "link": "https://stackoverflow.com/users/695186/ryan-clark"}, "edited": false, "score": 1, "creation_date": 1522872472, "post_id": 49659339, "comment_id": 86328600, "body": "You should add the error you&#39;re getting. Assuming you want a number and not a string but it&#39;s hard to be certain without an error message."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1522914471, "post_id": 49659339, "comment_id": 86343558, "body": "What is your question?"}], "answers": [{"comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 1, "creation_date": 1522873300, "post_id": 49659388, "comment_id": 86329026, "body": "Keep in mind that because both numerator and denominator are integers, the code described in this answer will always show half the age as an integer. So if your age is 31, for example, it will report that half your age is 15. If you want to show partial years, change it to &quot;Half of your age is #{age / 2.0}. That is good to know.&quot;"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1522873564, "post_id": 49659388, "comment_id": 86329144, "body": "Yep, you&#39;re definitely right. My answer just aimed to make the user aware why its code doesn&#39;t work"}, {"owner": {"reputation": 39, "user_id": 7286815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a104985b27e2c37986cde74ddd4f473?s=128&d=identicon&r=PG&f=1", "display_name": "J1N1", "link": "https://stackoverflow.com/users/7286815/j1n1"}, "edited": false, "score": 0, "creation_date": 1522929241, "post_id": 49659388, "comment_id": 86353673, "body": "Thank you all for the assistance"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 4, "last_activity_date": 1522913833, "last_edit_date": 1522913833, "creation_date": 1522871810, "answer_id": 49659388, "question_id": 49659339, "link": "https://stackoverflow.com/questions/49659339/ruby-wont-divide-string/49659388#49659388", "title": "Ruby won&#39;t divide string", "body": "<p>Your <code>age</code> is a string</p>\n\n<pre><code>age = gets.to_i\n</code></pre>\n\n<p>Now it's a number. But you can't concatenate a string and a number. Two options: </p>\n\n<p>interpolation</p>\n\n<pre><code>puts \"the half  of your age is #{age/2} that is good to know\"\n</code></pre>\n\n<p>or</p>\n\n<pre><code>puts \"the half  of your age is \" + (age/2).to_s + \" that is good to know\"\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 7286815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a104985b27e2c37986cde74ddd4f473?s=128&d=identicon&r=PG&f=1", "display_name": "J1N1", "link": "https://stackoverflow.com/users/7286815/j1n1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 49659388, "answer_count": 1, "score": -2, "last_activity_date": 1522914453, "creation_date": 1522871587, "last_edit_date": 1522914453, "question_id": 49659339, "link": "https://stackoverflow.com/questions/49659339/ruby-wont-divide-string", "title": "Ruby won&#39;t divide string", "body": "<p>I am trying to divide a user-input age by 2. My code is below:</p>\n\n<pre><code>puts \"what is your name?\"\nname = gets.chomp\n\nputs \"when were you born please enter your birthdate\"\nbirthdate = gets.chomp\n\nputs \"how old are you \"\nage = gets.chomp\n\nputs \"hello\"  + name + \" wow that is a good day to be born\" + \"thats a great age\"\nputs \"the half  of your age is\" + age/2 + \" that is good to know\"\n</code></pre>\n\n<p>It does not work.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "inheritance"], "comments": [{"owner": {"reputation": 629, "user_id": 7116039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh6.googleusercontent.com/-W1XRU2i8SxQ/AAAAAAAAAAI/AAAAAAAAAHs/ceXJf5aD9w4/photo.jpg?sz=128", "display_name": "olegario", "link": "https://stackoverflow.com/users/7116039/olegario"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1522861867, "post_id": 49656585, "comment_id": 86322466, "body": "@SergioTulentsev already fixed! Thanks."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1522861903, "post_id": 49656585, "comment_id": 86322487, "body": "are you sure it&#39;s going through the correct methods? you can put breapoints in there to ensure they&#39;re being called"}, {"owner": {"reputation": 629, "user_id": 7116039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh6.googleusercontent.com/-W1XRU2i8SxQ/AAAAAAAAAAI/AAAAAAAAAHs/ceXJf5aD9w4/photo.jpg?sz=128", "display_name": "olegario", "link": "https://stackoverflow.com/users/7116039/olegario"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1522862041, "post_id": 49656585, "comment_id": 86322576, "body": "@maxpleaner I edited the question again."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1522862100, "post_id": 49656585, "comment_id": 86322599, "body": "@olegario: so you&#39;re saying it doesn&#39;t enter <code>authenticate_member_from_token!</code>? How do you know? Does it enter <code>parse_request</code>?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1522862190, "post_id": 49656585, "comment_id": 86322657, "body": "If <code>authenticate_member_from_token!</code> isn&#39;t being called, then there&#39;s something crucial missing from your code above. I see no reason why it wouldn&#39;t be called."}, {"owner": {"reputation": 629, "user_id": 7116039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh6.googleusercontent.com/-W1XRU2i8SxQ/AAAAAAAAAAI/AAAAAAAAAHs/ceXJf5aD9w4/photo.jpg?sz=128", "display_name": "olegario", "link": "https://stackoverflow.com/users/7116039/olegario"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1522862473, "post_id": 49656585, "comment_id": 86322782, "body": "@TomLord, it is being called, but I&#39;m sending a fake token (not valid), and the method accepts."}, {"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1522862613, "post_id": 49656585, "comment_id": 86322850, "body": "@olegario Does <code>parse_request</code> before action work in <code>Api::CategoryController#index</code>?"}, {"owner": {"reputation": 629, "user_id": 7116039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh6.googleusercontent.com/-W1XRU2i8SxQ/AAAAAAAAAAI/AAAAAAAAAHs/ceXJf5aD9w4/photo.jpg?sz=128", "display_name": "olegario", "link": "https://stackoverflow.com/users/7116039/olegario"}, "reply_to_user": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1522862722, "post_id": 49656585, "comment_id": 86322918, "body": "@MartinZinovsky, yes, it is."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1522862743, "post_id": 49656585, "comment_id": 86322927, "body": "@olegario OK, but that&#39;s exactly what your code was saying to do... I&#39;ll write an answer if what I <i>think</i> you want it to do below..."}, {"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1522862823, "post_id": 49656585, "comment_id": 86322983, "body": "@olegario And <code>authenticate_member_from_token!</code> works if you explicitly add it to <code>Api::CategoryController</code>?"}, {"owner": {"reputation": 629, "user_id": 7116039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh6.googleusercontent.com/-W1XRU2i8SxQ/AAAAAAAAAAI/AAAAAAAAAHs/ceXJf5aD9w4/photo.jpg?sz=128", "display_name": "olegario", "link": "https://stackoverflow.com/users/7116039/olegario"}, "reply_to_user": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1522863198, "post_id": 49656585, "comment_id": 86323186, "body": "@MartinZinovsky, it is wokring normally by now, but now I sending a header with a fake token and the method is respoondig with 400 status code:  <code>request.headers[&#39;escambo_token&#39;] = &quot;#{@member.tokens.last.token}&quot;</code>"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1522863383, "post_id": 49656585, "comment_id": 86323276, "body": "@olegario: <code>:escambo_token != &#39;escambo_token&#39;</code>, generally. Not sure how <code>headers</code> handles this."}, {"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1522863927, "post_id": 49656585, "comment_id": 86323619, "body": "@olegario try approach suggested in <a href=\"https://stackoverflow.com/questions/19972313/accessing-custom-header-variables-in-ruby-on-rails\">this SO question</a>. <code>request.headers[&#39;HTTP_ESCAMBO_TOKEN&#39;]</code> or <code>request.headers[&#39;escambo-token&#39;]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1522863198, "post_id": 49657058, "comment_id": 86323187, "body": "No double-rendering here. If before_action renders (or redirects), action is not performed."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1522863267, "post_id": 49657058, "comment_id": 86323214, "body": "Ah, fair enough. The quirks of rails..... Still, it&#39;s common practice to raise an exception so custom handling can be given as desired."}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 1, "last_activity_date": 1522863071, "creation_date": 1522863071, "answer_id": 49657058, "question_id": 49656585, "link": "https://stackoverflow.com/questions/49656585/ror-why-inheritance-not-working-for-controller/49657058#49657058", "title": "RoR: Why inheritance not working for controller?", "body": "<p>Your code needs to render <code>:unauthorized</code> if the token is missing, OR invalid. In other words, you need the code to be along the lines of:</p>\n\n<pre><code>def authenticate_member_from_token!\n  unless Member.find_by_valid_token(:activate, request.headers['escambo_token'])\n    render nothing: true, status: :unauthorized\n  end\nend\n</code></pre>\n\n<p>However, with this code you may find yourself double-rendering in the controller. A cleaner approach could be to instead raise an exception, then rescue from it and render appropriately - e.g.</p>\n\n<pre><code>EscamboTokenInvalid = Class.new(StandardError)\nrescue_from EscamboTokenInvalid, with: :escambo_unauthorized\n\ndef authenticate_member_from_token!\n  unless Member.find_by_valid_token(:activate, request.headers['escambo_token'])\n    raise EscamboTokenInvalid\n  end\nend\n\ndef escambo_unauthorized\n  render nothing: true, status: :unauthorized\nend\n</code></pre>\n"}], "owner": {"reputation": 629, "user_id": 7116039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh6.googleusercontent.com/-W1XRU2i8SxQ/AAAAAAAAAAI/AAAAAAAAAHs/ceXJf5aD9w4/photo.jpg?sz=128", "display_name": "olegario", "link": "https://stackoverflow.com/users/7116039/olegario"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 49657058, "answer_count": 1, "score": 0, "last_activity_date": 1522863071, "creation_date": 1522861349, "last_edit_date": 1522862391, "question_id": 49656585, "link": "https://stackoverflow.com/questions/49656585/ror-why-inheritance-not-working-for-controller", "title": "RoR: Why inheritance not working for controller?", "body": "<p>I have this following controller for my application:</p>\n\n<pre><code>class Api::BaseApiController&lt; ApplicationController\n  before_action :parse_request, :authenticate_member_from_token!\n\n  def index\n    render nothing: true, status: 200\n  end\n\n  protected\n    def authenticate_member_from_token!\n      if !request.headers[:escambo_token]\n        @member = Member.find_by_valid_token(:activate, request.headers['escambo_token'])\n        if !@member\n          render nothing: true, status: :unauthorized\n        end\n      end\n    end\n</code></pre>\n\n<p>Then, I have another controller that inherits from that Controller:</p>\n\n<pre><code>class Api::CategoryController &lt; Api::BaseApiController\n  before_action :find_category, except: [:index]\n\n  def index\n    @category = Category.all\n    puts(@category)\n    render json: @category\n  end\n</code></pre>\n\n<p>But the controller is allowing requests without the token. </p>\n\n<p><strong>EDIT 1</strong>: for some reason the <code>index</code> action started to working normally. But still not doing the validation for the token.</p>\n\n<p><strong>EDIT 2</strong>: fixing method from <code>private</code> to <code>protected</code></p>\n"}, {"tags": ["ruby", "floating-point", "rounding", "floor", "ceil"], "answers": [{"tags": [], "owner": {"reputation": 1092, "user_id": 2456552, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7ce9d1d147fe6f4e4488f470bf634791?s=128&d=identicon&r=PG", "display_name": "jsmartt", "link": "https://stackoverflow.com/users/2456552/jsmartt"}, "is_accepted": true, "score": 5, "last_activity_date": 1522861728, "last_edit_date": 1522861728, "creation_date": 1522861004, "answer_id": 49656495, "question_id": 49656493, "link": "https://stackoverflow.com/questions/49656493/ruby-round-float-up-or-down-to-specific-decimal-significant-figure/49656495#49656495", "title": "Ruby round Float up or down to specific decimal significant figure", "body": "<p>In <a href=\"https://ruby-doc.org/core-2.4.0/Float.html#method-i-floor\" rel=\"noreferrer\">Ruby 2.4+</a>, the <code>Float#float</code> &amp; <code>Float#ceil</code> methods take a <code>ndigits</code> argument:</p>\n\n<pre><code>1.33333333.ceil(2) -&gt; 1.34\n1.33333333.floor(3) -&gt; 1.333\n</code></pre>\n\n<p><strong>However</strong>, check out this behavior with those STD lib methods:</p>\n\n<pre><code># In Ruby 2.4.2:\n0.07.ceil(2) -&gt; 0.08\n1.1.ceil(2) -&gt; 1.11\n</code></pre>\n\n<p>Not OK in my book.</p>\n\n<p>For older Ruby versions or if you want to get better results than the STB lib gives, you will need to write your own methods. There are a few different blog posts out there, and I'll explain why they're not consistently correct later, but here are some methods that should work correctly every time:</p>\n\n<pre><code>require 'bigdecimal'\n\nclass Float\n  def ceil2(exp = 0)\n    BigDecimal(self.to_s).ceil(exp).to_f\n  end\n\n  def floor2(exp = 0)\n    BigDecimal(self.to_s).floor(exp).to_f\n  end\nend\n</code></pre>\n\n<hr>\n\n<p>Now for more on why <strong>the following are incorrect</strong>:</p>\n\n<pre><code>def ceil_to(x)\n  (self * 10**x).ceil.to_f / 10**x\nend\n\ndef floor_to(x)\n  (self * 10**x).floor.to_f / 10**x\nend\n\n# These methods also produce bad results for the examples shown above\n0.07.ceil(2) -&gt; 0.08\n1.1.ceil(2) -&gt; 1.11\n</code></pre>\n\n<p>I won't go into the details about what is happening (you can find that \n<a href=\"https://stackoverflow.com/questions/588004/is-floating-point-math-broken?rq=1\">here</a> or <a href=\"https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"noreferrer\">here</a>), but floating point arithmetic can be messy and rounding errors do occur.</p>\n"}], "owner": {"reputation": 1092, "user_id": 2456552, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7ce9d1d147fe6f4e4488f470bf634791?s=128&d=identicon&r=PG", "display_name": "jsmartt", "link": "https://stackoverflow.com/users/2456552/jsmartt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1875, "favorite_count": 0, "accepted_answer_id": 49656495, "answer_count": 1, "score": 3, "last_activity_date": 1522861728, "creation_date": 1522861004, "question_id": 49656493, "link": "https://stackoverflow.com/questions/49656493/ruby-round-float-up-or-down-to-specific-decimal-significant-figure", "title": "Ruby round Float up or down to specific decimal significant figure", "body": "<p>I'm using Ruby 2.3.1, and here's what I <em>want</em> to be able to do:</p>\n\n<pre><code>1.33333333.ceil(2) -&gt; 1.34\n1.33333333.floor(3) -&gt; 1.333\n</code></pre>\n\n<p>The <code>Float#round</code> method allows me to <em>round</em>, but I need to be able to specify if I want to round up or down, similar to the <code>#ceil</code> and <code>#floor</code> methods, but with a parameter to specify how many decimal places to keep.</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 531, "user_id": 1642675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9ca89fcc62a6de1cc741d3ffd196169?s=128&d=identicon&r=PG&f=1", "display_name": "\u0411\u0443\u044f\u043d\u0431\u0430\u0442 \u0427\u043e\u0439\u0436\u0438\u043b\u0441\u04af\u0440\u044d\u043d", "link": "https://stackoverflow.com/users/1642675/%d0%91%d1%83%d1%8f%d0%bd%d0%b1%d0%b0%d1%82-%d0%a7%d0%be%d0%b9%d0%b6%d0%b8%d0%bb%d1%81%d2%af%d1%80%d1%8d%d0%bd"}, "edited": false, "score": 0, "creation_date": 1522861620, "post_id": 49656390, "comment_id": 86322336, "body": "Do you have a program with <code>id=2879</code> in your database?"}, {"owner": {"reputation": 23, "user_id": 9378145, "user_type": "registered", "profile_image": "https://graph.facebook.com/2009504122400822/picture?type=large", "display_name": "Juan David Porras Palencia", "link": "https://stackoverflow.com/users/9378145/juan-david-porras-palencia"}, "reply_to_user": {"reputation": 531, "user_id": 1642675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9ca89fcc62a6de1cc741d3ffd196169?s=128&d=identicon&r=PG&f=1", "display_name": "\u0411\u0443\u044f\u043d\u0431\u0430\u0442 \u0427\u043e\u0439\u0436\u0438\u043b\u0441\u04af\u0440\u044d\u043d", "link": "https://stackoverflow.com/users/1642675/%d0%91%d1%83%d1%8f%d0%bd%d0%b1%d0%b0%d1%82-%d0%a7%d0%be%d0%b9%d0%b6%d0%b8%d0%bb%d1%81%d2%af%d1%80%d1%8d%d0%bd"}, "edited": false, "score": 0, "creation_date": 1522861769, "post_id": 49656390, "comment_id": 86322412, "body": "Yes, that is the key assigned explicitly that I mentioned earlier, knowing beforehand that it exists."}], "answers": [{"tags": [], "owner": {"reputation": 531, "user_id": 1642675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9ca89fcc62a6de1cc741d3ffd196169?s=128&d=identicon&r=PG&f=1", "display_name": "\u0411\u0443\u044f\u043d\u0431\u0430\u0442 \u0427\u043e\u0439\u0436\u0438\u043b\u0441\u04af\u0440\u044d\u043d", "link": "https://stackoverflow.com/users/1642675/%d0%91%d1%83%d1%8f%d0%bd%d0%b1%d0%b0%d1%82-%d0%a7%d0%be%d0%b9%d0%b6%d0%b8%d0%bb%d1%81%d2%af%d1%80%d1%8d%d0%bd"}, "is_accepted": true, "score": 0, "last_activity_date": 1522862371, "creation_date": 1522862371, "answer_id": 49656865, "question_id": 49656390, "link": "https://stackoverflow.com/questions/49656390/error-when-trying-to-assign-a-value-to-a-foreign-key/49656865#49656865", "title": "Error when trying to assign a value to a foreign key", "body": "<p>Maybe there is 2 different approach you should try:</p>\n\n<p>First, try cast to integer before assign: </p>\n\n<pre><code> information.program_id = information.system_plan.to_i\n</code></pre>\n\n<p>Second, try assign object</p>\n\n<pre><code>information.program = Program.find(information.system_plan.to_i)\n</code></pre>\n\n<p>Besides these 2, I could not see other wrong doings in your code. </p>\n"}], "owner": {"reputation": 23, "user_id": 9378145, "user_type": "registered", "profile_image": "https://graph.facebook.com/2009504122400822/picture?type=large", "display_name": "Juan David Porras Palencia", "link": "https://stackoverflow.com/users/9378145/juan-david-porras-palencia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 49656865, "answer_count": 1, "score": 0, "last_activity_date": 1522862371, "creation_date": 1522860641, "question_id": 49656390, "link": "https://stackoverflow.com/questions/49656390/error-when-trying-to-assign-a-value-to-a-foreign-key", "title": "Error when trying to assign a value to a foreign key", "body": "<p>I'm working on a Ruby on Rails project and I get the following error when assigning a value to a foreign key:</p>\n\n<pre><code>ActiveRecord::InvalidForeignKey in InformationController#import\n\nMysql2::Error: Cannot add or update a child row: a foreign key \nconstraint fails (`sobrecupos_development`.`information`, CONSTRAINT \n`fk_rails_21c7b6e26c` FOREIGN KEY (`program_id`) REFERENCES `programs` \n(`id`)): UPDATE `information` SET `system_plan` = '2879.0', \n`program_id` = 2879, `updated_at` = '2018-04-03 15:32:07' WHERE \n`information`.`id` = 11\n</code></pre>\n\n<p>This key is supposed to be assigned from an external file but when I try to do so I get the error mentioned above. I tried to assign a key explicitly to check if it has to do with a possible nonexisiting value, but I still get this error.</p>\n\n<p>Here is my schema.rb file</p>\n\n<pre><code>ActiveRecord::Schema.define(version: 20180402215605) do\n\n  create_table \"coordinators\", force: :cascade, options: \"ENGINE=InnoDB DEFAULT CHARSET=utf8\" do |t|\n    t.string   \"name\"\n    t.string   \"lastname\"\n    t.integer  \"department_id\"\n    t.datetime \"created_at\",                       null: false\n    t.datetime \"updated_at\",                       null: false\n    t.string   \"email\",               default: \"\", null: false\n    t.datetime \"remember_created_at\"\n    t.integer  \"sign_in_count\",       default: 0,  null: false\n    t.datetime \"current_sign_in_at\"\n    t.datetime \"last_sign_in_at\"\n    t.string   \"current_sign_in_ip\"\n    t.string   \"last_sign_in_ip\"\n    t.string   \"username\"\n    t.index [\"department_id\"], name: \"index_coordinators_on_department_id\", using: :btree\n    t.index [\"email\"], name: \"index_coordinators_on_email\", unique: true, using: :btree\n    t.index [\"username\"], name: \"index_coordinators_on_username\", unique: true, using: :btree\n  end\n\n  create_table \"departments\", force: :cascade, options: \"ENGINE=InnoDB DEFAULT CHARSET=utf8\" do |t|\n    t.string   \"name\"\n    t.datetime \"created_at\",   null: false\n    t.datetime \"updated_at\",   null: false\n    t.string   \"code\"\n    t.string   \"abbreviation\"\n    t.index [\"code\"], name: \"index_departments_on_code\", unique: true, using: :btree\n  end\n\n  create_table \"groups\", force: :cascade, options: \"ENGINE=InnoDB DEFAULT CHARSET=utf8\" do |t|\n    t.integer  \"subject_id\"\n    t.integer  \"professor_id\"\n    t.integer  \"available_spots\"\n    t.integer  \"total_spots\"\n    t.datetime \"created_at\",      null: false\n    t.datetime \"updated_at\",      null: false\n    t.index [\"professor_id\"], name: \"index_groups_on_professor_id\", using: :btree\n    t.index [\"subject_id\"], name: \"index_groups_on_subject_id\", using: :btree\n  end\n\n  create_table \"information\", force: :cascade, options: \"ENGINE=InnoDB DEFAULT CHARSET=utf8\" do |t|\n    t.string   \"level\"\n    t.integer  \"program_id\"\n    t.string   \"request_type\"\n    t.string   \"act_resolution\"\n    t.date     \"resolution_date\"\n    t.string   \"dependency\"\n    t.decimal  \"PAPA\",                  precision: 10, scale: 1\n    t.integer  \"registered_credits\"\n    t.integer  \"outstanding_credits\"\n    t.decimal  \"completion_percentage\", precision: 10\n    t.integer  \"tuition_amount\"\n    t.string   \"academic_history_id\"\n    t.datetime \"created_at\",                                     null: false\n    t.datetime \"updated_at\",                                     null: false\n    t.integer  \"student_id\"\n    t.boolean  \"was_saved\"\n    t.string   \"system_plan\"\n    t.string   \"academic_period\"\n    t.string   \"document\"\n    t.index [\"program_id\"], name: \"index_information_on_program_id\", using: :btree\n    t.index [\"student_id\"], name: \"index_information_on_student_id\", using: :btree\n  end\n\n  create_table \"professors\", force: :cascade, options: \"ENGINE=InnoDB DEFAULT CHARSET=utf8\" do |t|\n    t.string   \"name\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\n  create_table \"programs\", force: :cascade, options: \"ENGINE=InnoDB DEFAULT CHARSET=utf8\" do |t|\n    t.string   \"name\"\n    t.integer  \"department_id\"\n    t.datetime \"created_at\",    null: false\n    t.datetime \"updated_at\",    null: false\n    t.string   \"code\"\n    t.string   \"program_type\"\n    t.index [\"code\"], name: \"index_programs_on_code\", unique: true, using: :btree\n    t.index [\"department_id\"], name: \"index_programs_on_department_id\", using: :btree\n  end\n\n  create_table \"students\", force: :cascade, options: \"ENGINE=InnoDB DEFAULT CHARSET=utf8\" do |t|\n    t.string   \"name\"\n    t.string   \"lastname\"\n    t.string   \"username\"\n    t.datetime \"created_at\",                       null: false\n    t.datetime \"updated_at\",                       null: false\n    t.string   \"email\",               default: \"\", null: false\n    t.datetime \"remember_created_at\"\n    t.integer  \"sign_in_count\",       default: 0,  null: false\n    t.datetime \"current_sign_in_at\"\n    t.datetime \"last_sign_in_at\"\n    t.string   \"current_sign_in_ip\"\n    t.string   \"last_sign_in_ip\"\n    t.string   \"document\"\n    t.index [\"email\"], name: \"index_students_on_email\", unique: true, using: :btree\n    t.index [\"username\"], name: \"index_students_on_username\", unique: true, using: :btree\n  end\n\n  create_table \"subject_requests\", force: :cascade, options: \"ENGINE=InnoDB DEFAULT CHARSET=utf8\" do |t|\n    t.integer  \"group_id\"\n    t.integer  \"information_id\"\n    t.boolean  \"was_canceled\"\n    t.string   \"approbation_state\"\n    t.string   \"inscription_state\"\n    t.string   \"replace_to\"\n    t.datetime \"created_at\",         null: false\n    t.datetime \"updated_at\",         null: false\n    t.boolean  \"accept_other_group\"\n    t.string   \"subject_code\"\n    t.string   \"group_code\"\n    t.string   \"typology\"\n    t.string   \"subject_plan\"\n    t.index [\"group_id\"], name: \"index_subject_requests_on_group_id\", using: :btree\n    t.index [\"information_id\"], name: \"index_subject_requests_on_information_id\", using: :btree\n  end\n\n  create_table \"subjects\", force: :cascade, options: \"ENGINE=InnoDB DEFAULT CHARSET=utf8\" do |t|\n    t.string   \"name\"\n    t.integer  \"department_id\"\n    t.datetime \"created_at\",    null: false\n    t.datetime \"updated_at\",    null: false\n    t.string   \"code\"\n    t.integer  \"credits\"\n    t.index [\"code\"], name: \"index_subjects_on_code\", unique: true, using: :btree\n    t.index [\"department_id\"], name: \"index_subjects_on_department_id\", using: :btree\n  end\n\n  add_foreign_key \"coordinators\", \"departments\"\n  add_foreign_key \"groups\", \"professors\"\n  add_foreign_key \"groups\", \"subjects\"\n  add_foreign_key \"information\", \"programs\"\n  add_foreign_key \"information\", \"students\"\n  add_foreign_key \"programs\", \"departments\"\n  add_foreign_key \"subject_requests\", \"groups\"\n  add_foreign_key \"subject_requests\", \"information\", on_delete: :cascade\n  add_foreign_key \"subjects\", \"departments\"\nend\n</code></pre>\n\n<p>And here the line of code where I'm trying to assign a value to the foreign key</p>\n\n<pre><code>information.program_id = information.system_plan\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "ruby-on-rails-5", "rails-migrations"], "comments": [{"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1522857750, "post_id": 49655565, "comment_id": 86320121, "body": "It looks that you don&#39;t have <code>authie_sessions</code> table, can you check <code>schema.rb</code> if it contains such table?"}, {"owner": {"reputation": 187, "user_id": 9129624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e16834aa4400776c8805844dc0a497fc?s=128&d=identicon&r=PG", "display_name": "L11", "link": "https://stackoverflow.com/users/9129624/l11"}, "reply_to_user": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1522858051, "post_id": 49655565, "comment_id": 86320296, "body": "Actually, it exists in <code>schema.rb</code>.    <code>create_table &quot;authie_sessions&quot;, force: :cascade, options: &quot;ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci&quot; do |t|     t.string &quot;token&quot;     t.string &quot;browser_id&quot; end</code>  left of some columns due to character length restrictions"}, {"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1522860252, "post_id": 49655565, "comment_id": 86321549, "body": "@L11 Check database if there is a table <code>authie_sessions</code>"}, {"owner": {"reputation": 187, "user_id": 9129624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e16834aa4400776c8805844dc0a497fc?s=128&d=identicon&r=PG", "display_name": "L11", "link": "https://stackoverflow.com/users/9129624/l11"}, "reply_to_user": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1522860870, "post_id": 49655565, "comment_id": 86321949, "body": "@MartinZinovsky how can I check that?"}, {"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1522861930, "post_id": 49655565, "comment_id": 86322497, "body": "via <a href=\"https://www.postgresql.org/docs/9.1/static/app-psql.html\" rel=\"nofollow noreferrer\">psql</a> or any db client like <a href=\"https://dbeaver.jkiss.org/\" rel=\"nofollow noreferrer\">dbeaver</a>"}], "answers": [{"tags": [], "owner": {"reputation": 531, "user_id": 1642675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9ca89fcc62a6de1cc741d3ffd196169?s=128&d=identicon&r=PG&f=1", "display_name": "\u0411\u0443\u044f\u043d\u0431\u0430\u0442 \u0427\u043e\u0439\u0436\u0438\u043b\u0441\u04af\u0440\u044d\u043d", "link": "https://stackoverflow.com/users/1642675/%d0%91%d1%83%d1%8f%d0%bd%d0%b1%d0%b0%d1%82-%d0%a7%d0%be%d0%b9%d0%b6%d0%b8%d0%bb%d1%81%d2%af%d1%80%d1%8d%d0%bd"}, "is_accepted": true, "score": 1, "last_activity_date": 1522862972, "creation_date": 1522862972, "answer_id": 49657027, "question_id": 49655565, "link": "https://stackoverflow.com/questions/49655565/error-in-migration/49657027#49657027", "title": "Error in migration", "body": "<p>Check <code>authie_sessions</code> table exists in both databases <code>staytus</code> and <code>staytus_test</code>.</p>\n"}], "owner": {"reputation": 187, "user_id": 9129624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e16834aa4400776c8805844dc0a497fc?s=128&d=identicon&r=PG", "display_name": "L11", "link": "https://stackoverflow.com/users/9129624/l11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 49657027, "answer_count": 1, "score": 1, "last_activity_date": 1522862972, "creation_date": 1522857643, "last_edit_date": 1522861031, "question_id": 49655565, "link": "https://stackoverflow.com/questions/49655565/error-in-migration", "title": "Error in migration", "body": "<p>I tried to run db migration and I got the following error</p>\n\n<blockquote>\n<pre><code>PG::UndefinedTable: ERROR:  relation \"authie_sessions\" does not exist\n</code></pre>\n  \n  <p>: ALTER TABLE \"authie_sessions\" ADD \"two_factored_at\" timestamp/home/levi/.rvm/gems/ruby-2.4.1/gems/activerecord-5.1.5/lib/active_record/connection_adapters/postgresql/database_statements.rb:73:in `async_exec'</p>\n</blockquote>\n\n<p>My migration file is </p>\n\n<pre><code>class AddTwoFactorAuthFieldsToAuthie &lt; ActiveRecord::Migration[4.2]\n  def change\n    add_column :authie_sessions, :two_factored_at, :datetime\n    add_column :authie_sessions, :two_factored_ip, :string\n    add_column :authie_sessions, :requests, :integer, :default =&gt; 0\n    add_column :authie_sessions, :password_seen_at, :datetime\n  end\nend\n</code></pre>\n\n<p>My database.yml is</p>\n\n<pre><code>default: &amp;default\n  adapter: postgresql\n  encoding: utf8\n  pool: 5\n  username: postgres\n  password: postgres\n  database: staytus\n  host: 127.0.0.1\n\nproduction:\n  &lt;&lt;: *default\n\ndevelopment:\n  &lt;&lt;: *default\n\ntest:\n  &lt;&lt;: *default\n  database: staytus_test\n</code></pre>\n\n<p>I am using postgresql</p>\n"}, {"tags": ["ruby", "rubygems", "office365api"], "answers": [{"tags": [], "owner": {"reputation": 529, "user_id": 1983833, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d136699dcb659b96e2d9fb635cfae009?s=128&d=identicon&r=PG", "display_name": "MikeMarsian", "link": "https://stackoverflow.com/users/1983833/mikemarsian"}, "is_accepted": false, "score": 1, "last_activity_date": 1523062273, "creation_date": 1523062273, "answer_id": 49702762, "question_id": 49655369, "link": "https://stackoverflow.com/questions/49655369/how-to-create-meeting-using-rubyoutlook-gem/49702762#49702762", "title": "How to create meeting using RubyOutlook gem?", "body": "<p>The gem's <a href=\"https://github.com/jasonjoh/ruby_outlook\" rel=\"nofollow noreferrer\">readme</a> is scarce, so you have to look in the <a href=\"https://github.com/jasonjoh/ruby_outlook/blob/master/lib/ruby_outlook.rb\" rel=\"nofollow noreferrer\">source code</a>. \nAfter creating an oauth token, as described in the readme, you need to call <code>create_event</code> with the token, event json payload, calendar folder (nil for default calendar) and the email of the user who would be the owner of the event:</p>\n\n<pre><code>require 'ruby_outlook'\noutlook_client = RubyOutlook::Client.new\n# ...\n# create oauth token, as described in the readme\n# ...\nevent_payload = \n{\n  \"Subject\": \"Discuss the Calendar REST API\",\n  \"Body\": {\n    \"ContentType\": \"HTML\",\n    \"Content\": \"I think it will meet our requirements!\"\n  },\n  \"Start\": {\n      \"DateTime\": \"2014-02-02T18:00:00\",\n      \"TimeZone\": \"Pacific Standard Time\"\n  },\n  \"End\": {\n      \"DateTime\": \"2014-02-02T19:00:00\",\n      \"TimeZone\": \"Pacific Standard Time\"\n  },\n  \"Attendees\": [\n    {\n      \"EmailAddress\": {\n        \"Address\": \"john@example.com\",\n        \"Name\": \"John Doe\"\n      },\n      \"Type\": \"Required\"\n    }\n  ]\n}\noutlook_client.create_event(token, event_payload, nil, 'john@example.com')\n</code></pre>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/office/office365/api/calendar-rest-operations#CreateAnEvent\" rel=\"nofollow noreferrer\">Here's the relevant Outlook API documentation</a> for creating events. This is where I took the event payload.</p>\n"}], "owner": {"reputation": 223, "user_id": 5310502, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b6f92af37160cf2310ac2ccadcd9b758?s=128&d=identicon&r=PG&f=1", "display_name": "testerBDD", "link": "https://stackoverflow.com/users/5310502/testerbdd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1582067205, "creation_date": 1522856963, "last_edit_date": 1582067205, "question_id": 49655369, "link": "https://stackoverflow.com/questions/49655369/how-to-create-meeting-using-rubyoutlook-gem", "title": "How to create meeting using RubyOutlook gem?", "body": "<p>I am new here using ruby and outlook and found the gem RubyOutlook which is wrapper around office365 and ruby</p>\n\n<p>How do i create a meeting request using RubyOutlook gem and do we have any help file for doing it</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sqlite", "activerecord", "migration"], "comments": [{"owner": {"reputation": 1607, "user_id": 7804093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pFFFH.jpg?s=128&g=1", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/7804093/ganesh"}, "edited": false, "score": 0, "creation_date": 1522856112, "post_id": 49654977, "comment_id": 86318964, "body": "please share code present in <code>Stock</code> model."}, {"owner": {"reputation": 39, "user_id": 8874137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7ffd28a6328ef4ea49a395bf9147120?s=128&d=identicon&r=PG&f=1", "display_name": "Kim K", "link": "https://stackoverflow.com/users/8874137/kim-k"}, "reply_to_user": {"reputation": 1607, "user_id": 7804093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pFFFH.jpg?s=128&g=1", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/7804093/ganesh"}, "edited": false, "score": 0, "creation_date": 1522856582, "post_id": 49654977, "comment_id": 86319320, "body": "ok, I shared code"}], "answers": [{"tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": false, "score": 3, "last_activity_date": 1522856468, "creation_date": 1522856468, "answer_id": 49655213, "question_id": 49654977, "link": "https://stackoverflow.com/questions/49654977/cant-rollback-migration/49655213#49655213", "title": "Can&#39;t rollback migration", "body": "<p>SQLite doesn't support removing existing columns, so it's probably implemented by creating a new table with all the existing columns but the one being removed. The the old table is dropped and this causes the error. </p>\n\n<p>I'd suggest to use some other database (I recommend postgres), SQLite is not suitable to use on production anyway.</p>\n\n<p>See also:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/q/44894376/580346\">rails + sqlite - Can&#39;t remove columns from database due to foreign key issue</a></li>\n<li><a href=\"http://www.sqlite.org/lang_altertable.html\" rel=\"nofollow noreferrer\">http://www.sqlite.org/lang_altertable.html</a></li>\n</ul>\n"}], "owner": {"reputation": 39, "user_id": 8874137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7ffd28a6328ef4ea49a395bf9147120?s=128&d=identicon&r=PG&f=1", "display_name": "Kim K", "link": "https://stackoverflow.com/users/8874137/kim-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 435, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1566467405, "creation_date": 1522855788, "last_edit_date": 1566467405, "question_id": 49654977, "link": "https://stackoverflow.com/questions/49654977/cant-rollback-migration", "title": "Can&#39;t rollback migration", "body": "<p>I created migration:</p>\n\n<pre><code>class AddVisibleToStocks &lt; ActiveRecord::Migration[5.2]\n  def change\n    add_column :stocks, :visible, :boolean\n  end\nend\n</code></pre>\n\n<p>I migrated it. Everything was ok, but when I needed to rollback it I seen error:</p>\n\n<pre><code>rake db:rollback\n\n== 20180404150630 AddVisibleToStocks: reverting ===============================\n-- remove_column(:stocks, :visible, :boolean)\nrake aborted!\nStandardError: An error has occurred, this and all later migrations canceled:\n\nSQLite3::ConstraintException: FOREIGN KEY constraint failed: DROP TABLE \"stocks\"\n</code></pre>\n\n<p>My Stock model:</p>\n\n<pre><code>class Stock &lt; ApplicationRecord\n  belongs_to :category\n  has_and_belongs_to_many :providers\nend\n</code></pre>\n\n<p>Then I made another migration and immediately rolled it back - the result is the same.</p>\n\n<p>What's wrong?</p>\n"}, {"tags": ["ruby", "jekyll", "github-pages", "jekyll-theme"], "comments": [{"owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "edited": false, "score": 1, "creation_date": 1522864635, "post_id": 49654536, "comment_id": 86324029, "body": "Can we see your Gemfile ?"}, {"owner": {"reputation": 567, "user_id": 4257449, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b333ca3a0726ce4eb76f7f12845041e0?s=128&d=identicon&r=PG&f=1", "display_name": "coolDude", "link": "https://stackoverflow.com/users/4257449/cooldude"}, "reply_to_user": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "edited": false, "score": 0, "creation_date": 1522866826, "post_id": 49654536, "comment_id": 86325271, "body": "Absolutely! I&#39;ll include it in the original question in a few hours (once I&#39;m out of work :D )"}, {"owner": {"reputation": 567, "user_id": 4257449, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b333ca3a0726ce4eb76f7f12845041e0?s=128&d=identicon&r=PG&f=1", "display_name": "coolDude", "link": "https://stackoverflow.com/users/4257449/cooldude"}, "reply_to_user": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "edited": false, "score": 0, "creation_date": 1522879217, "post_id": 49654536, "comment_id": 86331915, "body": "@DavidJacquel I&#39;ve gone ahead and uploaded my Gemfile. Let me know what your thoughts are on this. Looks like a pretty simple Gemfile overall..."}], "answers": [{"comments": [{"owner": {"reputation": 567, "user_id": 4257449, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b333ca3a0726ce4eb76f7f12845041e0?s=128&d=identicon&r=PG&f=1", "display_name": "coolDude", "link": "https://stackoverflow.com/users/4257449/cooldude"}, "edited": false, "score": 0, "creation_date": 1522855913, "post_id": 49654670, "comment_id": 86318816, "body": "Thanks so much for your input on this. All of that makes sense. However, why isn&#39;t the newer version of the <code>public_suffix</code> gem backwards compatible with the older one?"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 567, "user_id": 4257449, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b333ca3a0726ce4eb76f7f12845041e0?s=128&d=identicon&r=PG&f=1", "display_name": "coolDude", "link": "https://stackoverflow.com/users/4257449/cooldude"}, "edited": false, "score": 1, "creation_date": 1522856673, "post_id": 49654670, "comment_id": 86319389, "body": "I don&#39;t know that :). Note that there is a major version number difference (3,0.2 vs 2.0.5) so there can be breaking changes. Btw bundler does not care about backwards compatibility - it only check  <a href=\"http://guides.rubygems.org/patterns/#pessimistic-version-constraint\" rel=\"nofollow noreferrer\">version specifications</a>"}, {"owner": {"reputation": 567, "user_id": 4257449, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b333ca3a0726ce4eb76f7f12845041e0?s=128&d=identicon&r=PG&f=1", "display_name": "coolDude", "link": "https://stackoverflow.com/users/4257449/cooldude"}, "edited": false, "score": 0, "creation_date": 1522879661, "post_id": 49654670, "comment_id": 86332106, "body": "That makes a lot more sense. Thank you for the insight on this :)"}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 1, "last_activity_date": 1522854973, "creation_date": 1522854973, "answer_id": 49654670, "question_id": 49654536, "link": "https://stackoverflow.com/questions/49654536/bundler-issues-unresolved-specs/49654670#49654670", "title": "Bundler Issues - Unresolved Specs", "body": "<p><code>bundle exec</code> assures that a ruby program that will be run inside it will use gems specified by <code>Gemfile</code> for the project you're in. It helps when you have multiple version of gems installed - chooses proper versions instead of the default/newest ones.</p>\n\n<p>In your case the error message says <code>You have already activated public_suffix 3.0.2, but your Gemfile requires public_suffix 2.0.5.</code> You have a newer version of a gem installed, but you need an older one. That's why <code>jekyll serve</code> cannot start without prepending with <code>bundle exec</code>.</p>\n\n<p>You can separate your gems using <a href=\"https://rvm.io/gemsets\" rel=\"nofollow noreferrer\">gemsets</a> to avoid this issue. As you just need to use jekyll, I'd recommend though to use an alias though. It's easier and I think there is no need to do anything fancy here.</p>\n"}], "owner": {"reputation": 567, "user_id": 4257449, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b333ca3a0726ce4eb76f7f12845041e0?s=128&d=identicon&r=PG&f=1", "display_name": "coolDude", "link": "https://stackoverflow.com/users/4257449/cooldude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 514, "favorite_count": 0, "accepted_answer_id": 49654670, "answer_count": 1, "score": 0, "last_activity_date": 1522879035, "creation_date": 1522854556, "last_edit_date": 1522879035, "question_id": 49654536, "link": "https://stackoverflow.com/questions/49654536/bundler-issues-unresolved-specs", "title": "Bundler Issues - Unresolved Specs", "body": "<p>I've just started using Jekyll with GitHub Pages and I've been running into some issues. I've been hoping to be able to use <a href=\"https://github.com/alexcarpenter/material-jekyll-theme\" rel=\"nofollow noreferrer\">this theme</a>, although it is quite outdated. I've cloned the repo onto my PC and ran <code>bundle install</code> to get things started.</p>\n\n<p>Just to be clear, I don't have a web development background. I'm actually an Android developer hoping to create my own blog about Android dev (plus anything else that comes to mind). Therefore, I'm not totally clear on what a lot of these commands do, such as <code>bundle install</code> or why it's necessary to run it in this case.</p>\n\n<p>With that in mind, I went ahead and tried to <code>jekyll serve</code>and was shown the following message:</p>\n\n<pre><code>WARN: Unresolved specs during Gem::Specification.reset:\n      rouge (&lt; 4, &gt;= 1.7)\nWARN: Clearing out unresolved specs.\nPlease report a bug if this causes problems.\n/home/mike/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.1/lib/bundler/runtime.rb:313:in `check_for_activated_spec!': You have already activated public_suffix 3.0.2, but your Gemfile requires public_suffix 2.0.5. Prepending `bundle exec` to your command may solve this. (Gem::LoadError)\n    from /home/mike/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.1/lib/bundler/runtime.rb:31:in `block in setup'\n    from /home/mike/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.1/lib/bundler/runtime.rb:26:in `map'\n    from /home/mike/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.1/lib/bundler/runtime.rb:26:in `setup'\n    from /home/mike/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.1/lib/bundler.rb:107:in `setup'\n    from /home/mike/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/jekyll-3.7.3/lib/jekyll/plugin_manager.rb:50:in `require_from_bundler'\n    from /home/mike/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/jekyll-3.7.3/exe/jekyll:11:in `&lt;top (required)&gt;'\n    from /home/mike/.rbenv/versions/2.3.1/bin/jekyll:23:in `load'\n    from /home/mike/.rbenv/versions/2.3.1/bin/jekyll:23:in `&lt;main&gt;\n</code></pre>\n\n<p>If I use <code>bundle exec jekyll serve</code>, I have my local server and can preview the theme just fine. However, why do I need to prepend 'bundle exec' in order to get things to work? Is there any concern of being shown these messages? And is there any way that I can correct them?</p>\n\n<p>In addition, is there any way that I can make corrections so that all I need to do is <code>jekyll serve</code>, other than creating an alias? Any clarification and support on this is greatly appreciated!</p>\n\n<p>If it helps at all, here is what the Gemfile looks like:</p>\n\n<pre><code>source \"https://rubygems.org\"\nruby RUBY_VERSION\n\n# Hello! This is where you manage which Jekyll version is used to run.\n# When you want to use a different version, change it below, save the\n# file and run `bundle install`. Run Jekyll with `bundle exec`, like so:\n#\n#     bundle exec jekyll serve\n#\n# This will help ensure the proper Jekyll version is running.\n# Happy Jekylling!\n# gem \"jekyll\", \"3.7.3\"\n\n# This is the default theme for new Jekyll sites. You may change this to anything you like.\n# gem \"minima\"\n\n# If you want to use GitHub Pages, remove the \"gem \"jekyll\"\" above and\n# uncomment the line below. To upgrade, run `bundle update github-pages`.\ngem \"github-pages\", group: :jekyll_plugins\n\n# If you have any plugins, put them here!\n# group :jekyll_plugins do\n#   gem \"jekyll-github-metadata\", \"~&gt; 1.0\"\n# end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1522851308, "post_id": 49653306, "comment_id": 86315157, "body": "Short answer: Not in vanilla ruby, but <code>exclude?</code> exists in ActiveSupport - which is mainly used by Rails applications."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1522852984, "post_id": 49653306, "comment_id": 86316606, "body": "<code>!include?</code> are actually <i>two</i> methods: <a href=\"http://ruby-doc.org/core-2.5.0/BasicObject.html#method-i-21\" rel=\"nofollow noreferrer\"><code>!</code></a> and <code>include?</code> You therefore have to write <code>!variable.include?</code> instead of <code>variable.!include?</code>"}], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 6, "last_activity_date": 1522851289, "creation_date": 1522851289, "answer_id": 49653372, "question_id": 49653306, "link": "https://stackoverflow.com/questions/49653306/is-there-any-opposite-of-include-method-in-ruby/49653372#49653372", "title": "Is there any opposite of include? method in Ruby?", "body": "<pre><code>if !variable.include?(\"something\")\n</code></pre>\n\n<p>in plain Ruby</p>\n\n<pre><code>if variable.exclude?(\"something\")\n</code></pre>\n\n<p>in Rails</p>\n"}], "owner": {"reputation": 19, "user_id": 9597197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4704f642ba4ff1abe1160d45a9328950?s=128&d=identicon&r=PG&f=1", "display_name": "user9597197", "link": "https://stackoverflow.com/users/9597197/user9597197"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1958, "favorite_count": 0, "closed_date": 1522854717, "answer_count": 1, "score": 1, "last_activity_date": 1522861145, "creation_date": 1522851126, "last_edit_date": 1522861145, "question_id": 49653306, "link": "https://stackoverflow.com/questions/49653306/is-there-any-opposite-of-include-method-in-ruby", "closed_reason": "Duplicate", "title": "Is there any opposite of include? method in Ruby?", "body": "<p>I have a question: Is there any opposite method of <code>.include?</code> I know with <code>unless</code>, but I want to do it with <code>if</code>, can I? I tried with <code>unless</code>:</p>\n\n<pre><code>unless variable.include?(\"something\")\n#..\nend\n</code></pre>\n\n<p>I want to do it with <code>if</code>, can I? I know <code>.!include?</code> but it didn't work(i don't really know if this method exists, but I saw it in this forum).</p>\n"}, {"tags": ["ruby", "xlsx"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1522848154, "post_id": 49652121, "comment_id": 86312596, "body": "Why is this tagged [csv]?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1522848199, "post_id": 49652121, "comment_id": 86312632, "body": "Yes, there is a way. Find a xlsx parser and look in its readme for sample code."}, {"owner": {"reputation": 83, "user_id": 9419102, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3b0a94b437e39bbb234559d4300691ef?s=128&d=identicon&r=PG&f=1", "display_name": "Fatna", "link": "https://stackoverflow.com/users/9419102/fatna"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1522848483, "post_id": 49652121, "comment_id": 86312871, "body": "I found for rows, but could not find any to extract a column."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1522848788, "post_id": 49652121, "comment_id": 86313104, "body": "Well, just iterate rows and take a value of that one column from each row. Similar to how you would process an array of arrays."}, {"owner": {"reputation": 83, "user_id": 9419102, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3b0a94b437e39bbb234559d4300691ef?s=128&d=identicon&r=PG&f=1", "display_name": "Fatna", "link": "https://stackoverflow.com/users/9419102/fatna"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1522850219, "post_id": 49652121, "comment_id": 86314307, "body": "I added an update in my question."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 2, "creation_date": 1522852612, "post_id": 49652121, "comment_id": 86316278, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/5969514/using-ruby-csv-to-extract-one-column\">Using Ruby CSV to extract one column</a>, if you already have the rows. A similar approach should work"}, {"owner": {"reputation": 83, "user_id": 9419102, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3b0a94b437e39bbb234559d4300691ef?s=128&d=identicon&r=PG&f=1", "display_name": "Fatna", "link": "https://stackoverflow.com/users/9419102/fatna"}, "edited": false, "score": 0, "creation_date": 1522864306, "post_id": 49652121, "comment_id": 86323833, "body": "the duplicate solution works with CSV files not excel spreadsheet."}], "answers": [{"tags": [], "owner": {"reputation": 83, "user_id": 9419102, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3b0a94b437e39bbb234559d4300691ef?s=128&d=identicon&r=PG&f=1", "display_name": "Fatna", "link": "https://stackoverflow.com/users/9419102/fatna"}, "is_accepted": false, "score": 0, "last_activity_date": 1522866286, "creation_date": 1522866286, "answer_id": 49657929, "question_id": 49652121, "link": "https://stackoverflow.com/questions/49652121/ruby-extract-a-spreadsheet-column-and-put-it-in-an-array/49657929#49657929", "title": "ruby, extract a spreadsheet column and put it in an array", "body": "<p>to deal with excel files use the gem spreadsheet and add require 'spreadsheet'</p>\n\n<p>Thanks.</p>\n"}], "owner": {"reputation": 83, "user_id": 9419102, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3b0a94b437e39bbb234559d4300691ef?s=128&d=identicon&r=PG&f=1", "display_name": "Fatna", "link": "https://stackoverflow.com/users/9419102/fatna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 250, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1522866286, "creation_date": 1522847987, "last_edit_date": 1522859738, "question_id": 49652121, "link": "https://stackoverflow.com/questions/49652121/ruby-extract-a-spreadsheet-column-and-put-it-in-an-array", "title": "ruby, extract a spreadsheet column and put it in an array", "body": "<p>I have an xlsx spreadsheet that has database information, like table names and other info,  is there any way how to extract the whole column called Table_Names and put it in array of strings ?</p>\n\n<p>UPDATE,</p>\n\n<p>I could get only rows, my question how to get a special column :</p>\n\n<pre><code>require 'spreadsheet'    \nSpreadsheet.open('MyTestSheet.xls') do |book|\n  book.worksheet('Sheet1').each do |row|\n    break if row[0].nil?\n    puts row.join(',')\n  end\nend\n</code></pre>\n\n<p>Thanks,</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 598, "user_id": 2797929, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/4RoPV.jpg?s=128&g=1", "display_name": "Rohit", "link": "https://stackoverflow.com/users/2797929/rohit"}, "edited": false, "score": 0, "creation_date": 1522845500, "post_id": 49651224, "comment_id": 86310554, "body": "what contains the variable &quot;fjalet&quot;?"}, {"owner": {"reputation": 3, "user_id": 9596736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/148f15535daa706b75191797a6decc62?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Bajramaj", "link": "https://stackoverflow.com/users/9596736/denis-bajramaj"}, "reply_to_user": {"reputation": 598, "user_id": 2797929, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/4RoPV.jpg?s=128&g=1", "display_name": "Rohit", "link": "https://stackoverflow.com/users/2797929/rohit"}, "edited": false, "score": 0, "creation_date": 1522845545, "post_id": 49651224, "comment_id": 86310598, "body": "@Rohit Fjalet is an array."}, {"owner": {"reputation": 3, "user_id": 9596736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/148f15535daa706b75191797a6decc62?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Bajramaj", "link": "https://stackoverflow.com/users/9596736/denis-bajramaj"}, "reply_to_user": {"reputation": 598, "user_id": 2797929, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/4RoPV.jpg?s=128&g=1", "display_name": "Rohit", "link": "https://stackoverflow.com/users/2797929/rohit"}, "edited": false, "score": 0, "creation_date": 1522845573, "post_id": 49651224, "comment_id": 86310616, "body": "Fjalet is in albanian, so in english mean words."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1522845597, "post_id": 49651224, "comment_id": 86310639, "body": "yeah, you should rename the variables to english, at least. Also elaborate on the question. Currently, it&#39;s very unclear."}, {"owner": {"reputation": 3, "user_id": 9596736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/148f15535daa706b75191797a6decc62?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Bajramaj", "link": "https://stackoverflow.com/users/9596736/denis-bajramaj"}, "edited": false, "score": 0, "creation_date": 1522845726, "post_id": 49651224, "comment_id": 86310736, "body": "Now i have translate the code, check it :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1522845751, "post_id": 49651224, "comment_id": 86310755, "body": "Better, but still I have no idea what the question is about."}, {"owner": {"reputation": 3, "user_id": 9596736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/148f15535daa706b75191797a6decc62?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Bajramaj", "link": "https://stackoverflow.com/users/9596736/denis-bajramaj"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1522845816, "post_id": 49651224, "comment_id": 86310811, "body": "@SergioTulentsev The program is about a Baby."}, {"owner": {"reputation": 3, "user_id": 9596736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/148f15535daa706b75191797a6decc62?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Bajramaj", "link": "https://stackoverflow.com/users/9596736/denis-bajramaj"}, "edited": false, "score": 0, "creation_date": 1522845867, "post_id": 49651224, "comment_id": 86310843, "body": "First Baby can&#39;t talk but i must learn words to Baby, and when i ask baby for example: Show me time that i have learn you the whole words."}, {"owner": {"reputation": 3, "user_id": 9596736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/148f15535daa706b75191797a6decc62?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Bajramaj", "link": "https://stackoverflow.com/users/9596736/denis-bajramaj"}, "edited": false, "score": 0, "creation_date": 1522845890, "post_id": 49651224, "comment_id": 86310859, "body": "It&#39;s a work for school, that&#39;s why i need help."}, {"owner": {"reputation": 3, "user_id": 9596736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/148f15535daa706b75191797a6decc62?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Bajramaj", "link": "https://stackoverflow.com/users/9596736/denis-bajramaj"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1522845907, "post_id": 49651224, "comment_id": 86310877, "body": "@SergioTulentsev"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1522846093, "post_id": 49651224, "comment_id": 86311039, "body": "You should memorize the time at the moment baby <i>learns</i> the word (the action that we don&#39;t see)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1522846278, "post_id": 49651224, "comment_id": 86311163, "body": "How do you save the words you have entered? You can probably save the corresponding time in a similar way."}, {"owner": {"reputation": 3, "user_id": 9596736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/148f15535daa706b75191797a6decc62?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Bajramaj", "link": "https://stackoverflow.com/users/9596736/denis-bajramaj"}, "edited": false, "score": 0, "creation_date": 1522846491, "post_id": 49651224, "comment_id": 86311321, "body": "Now it;s ok, better translate etc. Check it."}, {"owner": {"reputation": 3, "user_id": 9596736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/148f15535daa706b75191797a6decc62?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Bajramaj", "link": "https://stackoverflow.com/users/9596736/denis-bajramaj"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1522846620, "post_id": 49651224, "comment_id": 86311410, "body": "@SergioTulentsev"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1522847878, "post_id": 49651224, "comment_id": 86312372, "body": "BTW, Ruby does allow method and variable names to contain UTF-8 characters, so you could actually call your variable <code>fjal&#235;t</code>. But since Ruby&#39;s built-in methods have English names, this results in a weird language mix, e.g. <code>fjal&#235;t.each do</code>. Consider using English method and variable names."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9596736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/148f15535daa706b75191797a6decc62?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Bajramaj", "link": "https://stackoverflow.com/users/9596736/denis-bajramaj"}, "edited": false, "score": 0, "creation_date": 1522847098, "post_id": 49651765, "comment_id": 86311757, "body": "Thank you so much, i tried with .each and it works(with the day only) You saved me, thank you."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 0, "last_activity_date": 1522847230, "last_edit_date": 1522847230, "creation_date": 1522846919, "answer_id": 49651765, "question_id": 49651224, "link": "https://stackoverflow.com/questions/49651224/how-to-save-time-when-userfor-example-write-in-ruby/49651765#49651765", "title": "How to save time when user(for example) write in ruby?", "body": "<p>You currently save just the entered word via:</p>\n\n<pre><code>fjalet.push(learnedwords)\n</code></pre>\n\n<p>in order to also save the corresponding time, you could add word-time pairs to your array:</p>\n\n<pre><code>fjalet.push([learnedwords, Time.now])\n</code></pre>\n\n<p>and later on:</p>\n\n<pre><code>fjalet.each do |word, time|\n  puts \"#{word}[#{time.strftime('%-d %B, %Y, %-I:%M%p')}]\"\nend\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9596736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/148f15535daa706b75191797a6decc62?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Bajramaj", "link": "https://stackoverflow.com/users/9596736/denis-bajramaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 49651765, "answer_count": 1, "score": 0, "last_activity_date": 1522847230, "creation_date": 1522845433, "last_edit_date": 1522846458, "question_id": 49651224, "link": "https://stackoverflow.com/questions/49651224/how-to-save-time-when-userfor-example-write-in-ruby", "title": "How to save time when user(for example) write in ruby?", "body": "<p>i am making a program for a baby and the logic of the program is like this:\nWhat do you want to do?\n1) Learn a word to Baby.\n2)Show how many words Baby have learn.\n3)Show the time when Baby has learn words.</p>\n\n<p>If i click 3, then it will run like this:\nWords that you have learn to me are:</p>\n\n<pre><code>Hey[4 April, 2018, 2:35PM]\nGo[4 April, 2018, 2:35PM]\n</code></pre>\n\n<p>I tried with this(i don't really know what i did), but didn't work:</p>\n\n<pre><code>if action == \"5\"\ntime = Time.now\ntime.strftime(\"%d %B %Y %H\")\nputs \"Words that i have learn till now(with time) are:\" \nputs words + time\nend \n</code></pre>\n\n<p>Words it's an array.</p>\n\n<p>The code when baby learns word:</p>\n\n<p><code>if action == \"1\" &amp;&amp; learnedwords.length &lt;= 6 &amp;&amp; learnedwords.scan(/\\d+/).empty? &amp;&amp; learnedwords.scan(/[!@#%^&amp;*()_+{}[]:;'\"\\/\\\\?&gt;&lt;.,]/).empty? \nfjalet.push(learnedwords)\nputs \"System:Word Fjala \\\"#{learnedwords}\\\" is now in baby's memory.\"</code> ` </p>\n"}, {"tags": ["arrays", "json", "ruby", "hash"], "comments": [{"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 1, "creation_date": 1522845516, "post_id": 49651125, "comment_id": 86310571, "body": "The interpreter tells the truth. The <a href=\"http://ruby-doc.org/core-2.5.0/index.html#methods\" rel=\"nofollow noreferrer\"><code>&lt;&lt;</code> method</a> is defined only for the classes <a href=\"http://ruby-doc.org/core-2.5.0/Array.html\" rel=\"nofollow noreferrer\"><code>Array</code></a>, <a href=\"http://ruby-doc.org/core-2.5.0/IO.html\" rel=\"nofollow noreferrer\"><code>IO</code></a>, <a href=\"http://ruby-doc.org/core-2.5.0/Integer.html\" rel=\"nofollow noreferrer\"><code>Integer</code></a>, <a href=\"http://ruby-doc.org/core-2.5.0/Queue.html\" rel=\"nofollow noreferrer\"><code>Queue</code></a>, <a href=\"http://ruby-doc.org/core-2.5.0/SizedQueue.html\" rel=\"nofollow noreferrer\"><code>SizedQueue</code></a> and <a href=\"http://ruby-doc.org/core-2.5.0/String.html\" rel=\"nofollow noreferrer\"><code>String</code></a>. And <a href=\"http://ruby-doc.org/core-2.5.0/Hash.html\" rel=\"nofollow noreferrer\"><code>Hash</code></a> doesn&#39;t extend any of them."}, {"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "reply_to_user": {"reputation": 7044, "user_id": 7670262, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3zdDY.jpg?s=128&g=1", "display_name": "Azeem", "link": "https://stackoverflow.com/users/7670262/azeem"}, "edited": false, "score": 0, "creation_date": 1522845607, "post_id": 49651125, "comment_id": 86310647, "body": "@Azeem How does your suggestion help the method <code>&lt;&lt;</code> not being undefined in class <a href=\"http://ruby-doc.org/core-2.5.0/Hash.html\" rel=\"nofollow noreferrer\"><code>Hash</code></a> any more?"}, {"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1522845712, "post_id": 49651125, "comment_id": 86310726, "body": "The method you are looking for is <a href=\"http://ruby-doc.org/core-2.5.0/Hash.html#method-i-merge-21\" rel=\"nofollow noreferrer\"><code>Hash#merge!</code></a>."}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 9588539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e8703f91e59d8936ee3ea65ed7714b4?s=128&d=identicon&r=PG&f=1", "display_name": "EllieBubbles", "link": "https://stackoverflow.com/users/9588539/elliebubbles"}, "edited": false, "score": 0, "creation_date": 1522846009, "post_id": 49651359, "comment_id": 86310966, "body": "what does the ! mark mean in this instance? and once i merged the two hashes how do i update the file? Sorry im relatively new to ruby"}, {"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "reply_to_user": {"reputation": 113, "user_id": 9588539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e8703f91e59d8936ee3ea65ed7714b4?s=128&d=identicon&r=PG&f=1", "display_name": "EllieBubbles", "link": "https://stackoverflow.com/users/9588539/elliebubbles"}, "edited": false, "score": 0, "creation_date": 1522846552, "post_id": 49651359, "comment_id": 86311355, "body": "<code>!</code> on method means that this method gonna mutate initial object/data. Its a convention in ruby. On the other hand methods without <code>!</code> like <a href=\"https://ruby-doc.org/core-2.2.0/Hash.html#method-i-merge\" rel=\"nofollow noreferrer\">Hash#merge</a> will return you new object with changes applied to it and initial one will stay intact."}, {"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "reply_to_user": {"reputation": 113, "user_id": 9588539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e8703f91e59d8936ee3ea65ed7714b4?s=128&d=identicon&r=PG&f=1", "display_name": "EllieBubbles", "link": "https://stackoverflow.com/users/9588539/elliebubbles"}, "edited": false, "score": 0, "creation_date": 1522846655, "post_id": 49651359, "comment_id": 86311445, "body": "Overall its a good practise to avoid mutations like that in your code"}, {"owner": {"reputation": 113, "user_id": 9588539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e8703f91e59d8936ee3ea65ed7714b4?s=128&d=identicon&r=PG&f=1", "display_name": "EllieBubbles", "link": "https://stackoverflow.com/users/9588539/elliebubbles"}, "edited": false, "score": 0, "creation_date": 1522846741, "post_id": 49651359, "comment_id": 86311493, "body": "ah okay cool, so now the hash is updated why do i not see it in the file? Once i get it working I can mark the answer correct thanks so much"}, {"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "reply_to_user": {"reputation": 113, "user_id": 9588539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e8703f91e59d8936ee3ea65ed7714b4?s=128&d=identicon&r=PG&f=1", "display_name": "EllieBubbles", "link": "https://stackoverflow.com/users/9588539/elliebubbles"}, "edited": false, "score": 0, "creation_date": 1522846831, "post_id": 49651359, "comment_id": 86311558, "body": "because you should write to a file a new json?"}, {"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "reply_to_user": {"reputation": 113, "user_id": 9588539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e8703f91e59d8936ee3ea65ed7714b4?s=128&d=identicon&r=PG&f=1", "display_name": "EllieBubbles", "link": "https://stackoverflow.com/users/9588539/elliebubbles"}, "edited": false, "score": 0, "creation_date": 1522846899, "post_id": 49651359, "comment_id": 86311603, "body": "<code>File.write(File.join( File.dirname(__FILE__),&quot;configs&#47;#{enviroment}.json&quot;), rb_hash.to_json)</code>"}, {"owner": {"reputation": 113, "user_id": 9588539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e8703f91e59d8936ee3ea65ed7714b4?s=128&d=identicon&r=PG&f=1", "display_name": "EllieBubbles", "link": "https://stackoverflow.com/users/9588539/elliebubbles"}, "edited": false, "score": 0, "creation_date": 1522847271, "post_id": 49651359, "comment_id": 86311877, "body": "I tried that already it didnt work, the new Object was not added and also it adds =&gt; instead of colons making the json file invalid"}, {"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "reply_to_user": {"reputation": 113, "user_id": 9588539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e8703f91e59d8936ee3ea65ed7714b4?s=128&d=identicon&r=PG&f=1", "display_name": "EllieBubbles", "link": "https://stackoverflow.com/users/9588539/elliebubbles"}, "edited": false, "score": 0, "creation_date": 1522847431, "post_id": 49651359, "comment_id": 86311978, "body": "did you forgot to call <code>.to_json</code> on <code>rb_hash</code>? Look at my code above. If not update your question with the code that is not working"}, {"owner": {"reputation": 113, "user_id": 9588539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e8703f91e59d8936ee3ea65ed7714b4?s=128&d=identicon&r=PG&f=1", "display_name": "EllieBubbles", "link": "https://stackoverflow.com/users/9588539/elliebubbles"}, "edited": false, "score": 0, "creation_date": 1522847625, "post_id": 49651359, "comment_id": 86312149, "body": "heres my code on pastebin <a href=\"https://pastebin.com/zmR0Hbxb\" rel=\"nofollow noreferrer\">pastebin.com/zmR0Hbxb</a> . the object John is not added anywhere to my json"}, {"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "reply_to_user": {"reputation": 113, "user_id": 9588539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e8703f91e59d8936ee3ea65ed7714b4?s=128&d=identicon&r=PG&f=1", "display_name": "EllieBubbles", "link": "https://stackoverflow.com/users/9588539/elliebubbles"}, "edited": false, "score": 0, "creation_date": 1522847830, "post_id": 49651359, "comment_id": 86312322, "body": "As I said Hash#merge does not mutate initial object. In your case its <code>rb_hash[&quot;searchExamples&quot;]</code>"}, {"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "reply_to_user": {"reputation": 113, "user_id": 9588539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e8703f91e59d8936ee3ea65ed7714b4?s=128&d=identicon&r=PG&f=1", "display_name": "EllieBubbles", "link": "https://stackoverflow.com/users/9588539/elliebubbles"}, "edited": false, "score": 0, "creation_date": 1522848118, "post_id": 49651359, "comment_id": 86312566, "body": "Also you might want to use pretty generate gems like <a href=\"https://github.com/Phrogz/NeatJSON\" rel=\"nofollow noreferrer\">NeatJSON</a> or <a href=\"https://ruby-doc.org/stdlib-2.0.0/libdoc/json/rdoc/JSON.html#method-i-pretty_generate\" rel=\"nofollow noreferrer\">JSON#pretty_generate</a> for better json output in your file"}, {"owner": {"reputation": 113, "user_id": 9588539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e8703f91e59d8936ee3ea65ed7714b4?s=128&d=identicon&r=PG&f=1", "display_name": "EllieBubbles", "link": "https://stackoverflow.com/users/9588539/elliebubbles"}, "edited": false, "score": 0, "creation_date": 1522848237, "post_id": 49651359, "comment_id": 86312667, "body": "Okay ill do that, I just realised actually that the oriiginal JSON file gets deleted and the new JSON file is just searchExamples, my goal was to append to the existing jSON file searchExample object"}, {"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "reply_to_user": {"reputation": 113, "user_id": 9588539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e8703f91e59d8936ee3ea65ed7714b4?s=128&d=identicon&r=PG&f=1", "display_name": "EllieBubbles", "link": "https://stackoverflow.com/users/9588539/elliebubbles"}, "edited": false, "score": 0, "creation_date": 1522853317, "post_id": 49651359, "comment_id": 86316867, "body": "Remove <code>.to_json</code> call if you are using <code>JSON.pretty_generate</code>. Like that <code>JSON.pretty_generate(rb_hash)</code>"}], "tags": [], "owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "is_accepted": true, "score": 0, "last_activity_date": 1522847952, "last_edit_date": 1522847952, "creation_date": 1522845835, "answer_id": 49651359, "question_id": 49651125, "link": "https://stackoverflow.com/questions/49651125/ruby-cant-append-to-json-file/49651359#49651359", "title": "Ruby cant append to JSON file", "body": "<p><code>rb_hash[\"searchExamples\"]</code> is a hash and as @axiac said there is no <code>&lt;&lt;</code> method on Hash class in ruby. Use <a href=\"https://ruby-doc.org/core-2.2.0/Hash.html#method-i-merge\" rel=\"nofollow noreferrer\">Hash#merge</a> to concatenate two hashes:</p>\n\n<pre><code>json = File.read(File.join( File.dirname(__FILE__),\"configs/#{enviroment}.json\"))\n\nrb_hash = JSON.parse(json);\nrb_hash[\"searchExamples\"] = rb_hash[\"searchExamples\"].merge({ name: \"John\", long: 20, lat: 45 })\n# or rb_hash[\"searchExamples\"].merge!({ name: \"John\", long: 20, lat: 45 })\n\nFile.write(File.join( File.dirname(__FILE__),\"configs/#{enviroment}.json\"), rb_hash.to_json)\n</code></pre>\n\n<p>Also you might want to use pretty generate gems like <a href=\"https://github.com/Phrogz/NeatJSON\" rel=\"nofollow noreferrer\">NeatJSON</a> or <a href=\"https://ruby-doc.org/stdlib-2.0.0/libdoc/json/rdoc/JSON.html#method-i-pretty_generate\" rel=\"nofollow noreferrer\">JSON#pretty_generate</a> for better json output in your file</p>\n"}], "owner": {"reputation": 113, "user_id": 9588539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e8703f91e59d8936ee3ea65ed7714b4?s=128&d=identicon&r=PG&f=1", "display_name": "EllieBubbles", "link": "https://stackoverflow.com/users/9588539/elliebubbles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 49651359, "answer_count": 1, "score": 0, "last_activity_date": 1522847952, "creation_date": 1522845154, "question_id": 49651125, "link": "https://stackoverflow.com/questions/49651125/ruby-cant-append-to-json-file", "title": "Ruby cant append to JSON file", "body": "<p>I am trying to append a JSON object to an existing JSON file. I used StackOverflow and Google but i cant find my answer. Here is my code:</p>\n\n<pre><code>json = File.read(File.join( File.dirname(__FILE__),\"configs/#{enviroment}.json\"))\n\nrb_hash = JSON.parse(json);\n\nrb_hash[\"searchExamples\"] &lt;&lt; { name: \"John\", long: 20, lat: 45 }\n\nrb_hash.to_json\n</code></pre>\n\n<p>but i get the error:</p>\n\n<pre><code>undefined method `&lt;&lt;' for #&lt;Hash:0x007ffa93124bd0&gt; (NoMethodError)\nDid you mean?  &lt;\n</code></pre>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "sequel"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7538827"}, "edited": false, "score": 0, "creation_date": 1522847108, "post_id": 49650728, "comment_id": 86311763, "body": "you can also post the ruby \u200b\u200bcode"}], "answers": [{"tags": [], "owner": {"reputation": 11331, "user_id": 132053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f183bcc4176b308c9edabe79299e448f?s=128&d=identicon&r=PG", "display_name": "Jeremy Evans", "link": "https://stackoverflow.com/users/132053/jeremy-evans"}, "is_accepted": true, "score": 3, "last_activity_date": 1522851305, "creation_date": 1522851305, "answer_id": 49653378, "question_id": 49650728, "link": "https://stackoverflow.com/questions/49650728/ruby-sequel-subquery-happening-before-main-query/49653378#49653378", "title": "Ruby Sequel Subquery Happening Before Main Query", "body": "<p>You are calling <code>Dataset#count</code> on the dataset you are passing to the select_append call, and <code>Dataset#count</code> runs a query.  You probably want <code>.select{count(sales_leads[:id])}</code> instead of <code>.count</code>.</p>\n"}], "owner": {"reputation": 130, "user_id": 9596049, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OECYS.png?s=128&g=1", "display_name": "harpocrates", "link": "https://stackoverflow.com/users/9596049/harpocrates"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 518, "favorite_count": 0, "accepted_answer_id": 49653378, "answer_count": 1, "score": 2, "last_activity_date": 1522859431, "creation_date": 1522843964, "last_edit_date": 1522859431, "question_id": 49650728, "link": "https://stackoverflow.com/questions/49650728/ruby-sequel-subquery-happening-before-main-query", "title": "Ruby Sequel Subquery Happening Before Main Query", "body": "<p>Can someone help me out with this?</p>\n\n<p>I need the following sql code translated to sequel:</p>\n\n<pre><code>SELECT DISTINCT sales_leads.employee_person_id,\n    (SELECT full_name from persons \n        WHERE sales_leads.employee_person_id=persons.id),\n    (SELECT COUNT (sales_leads.id) from sales_leads \n        WHERE sales_leads.employee_person_id=employees.person_id \n        AND sales_leads.status='open') AS open_leads_count,\n    (SELECT COUNT (sales_leads.id) from sales_leads \n        WHERE sales_leads.employee_person_id=employees.person_id \n        AND sales_leads.status='lost' OR sales_leads.status='won') AS closed_leads_count\nFROM sales_leads\nJOIN employees ON sales_leads.employee_person_id=employees.person_id\nORDER BY sales_leads.employee_person_id;\n</code></pre>\n\n<p>This is what I have so far:</p>\n\n<pre><code>DB[:sales_leads]\n  .inner_join(:persons, id: :employee_person_id)\n  .select(:full_name)\n  .select_append(\n    DB[:sales_leads]\n      .select(:id)\n      .where(Sequel[:sales_leads][:employee_person_id]=&gt;Sequel[:persons][:id])\n      .count\n  ).all\n</code></pre>\n\n<p>But I am getting an error:</p>\n\n<blockquote>\n  <p>PG::UndefinedTable: ERROR:  missing FROM-clause entry for table\n  \"persons\" LINE 1: ...eads\" WHERE (\"sales_leads\".\"employee_person_id\" =\n  \"persons\"....\n                                                               ^: SELECT count(*) AS \"count\" FROM \"sales_leads\" WHERE\n  (\"sales_leads\".\"employee_person_id\" = \"persons\".\"id\") LIMIT 1\n  Sequel::DatabaseError: PG::UndefinedTable: ERROR:  missing FROM-clause\n  entry for table \"persons\" LINE 1: ...eads\" WHERE\n  (\"sales_leads\".\"employee_person_id\" = \"persons\"....\n                                                               ^ from /home/john/.rbenv/versions/2.5.0/lib/ruby/gems/2.5.0/gems/sequel-5.5.0/lib/sequel/adapters/postgres.rb:145:in\n  `async_exec'</p>\n</blockquote>\n"}, {"tags": ["ruby", "self"], "comments": [{"owner": {"reputation": 139976, "user_id": 1542290, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/k3Yly.jpg?s=128&g=1", "display_name": "Mr. Alien", "link": "https://stackoverflow.com/users/1542290/mr-alien"}, "edited": false, "score": 1, "creation_date": 1522840197, "post_id": 49649468, "comment_id": 86306923, "body": "<a href=\"https://stackoverflow.com/questions/3802540/difference-between-class-variables-and-class-instance-variables\" title=\"difference between class variables and class instance variables\">stackoverflow.com/questions/3802540/&hellip;</a> ?"}, {"owner": {"reputation": 594, "user_id": 6782134, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VsycA.jpg?s=128&g=1", "display_name": "Dolev", "link": "https://stackoverflow.com/users/6782134/dolev"}, "reply_to_user": {"reputation": 139976, "user_id": 1542290, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/k3Yly.jpg?s=128&g=1", "display_name": "Mr. Alien", "link": "https://stackoverflow.com/users/1542290/mr-alien"}, "edited": false, "score": 0, "creation_date": 1522840403, "post_id": 49649468, "comment_id": 86307072, "body": "@Mr.Alien Good related read. But it doesn&#39;t cover the question"}, {"owner": {"reputation": 3352, "user_id": 5152338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QbPE.png?s=128&g=1", "display_name": "jdno", "link": "https://stackoverflow.com/users/5152338/jdno"}, "edited": false, "score": 0, "creation_date": 1522840699, "post_id": 49649468, "comment_id": 86307242, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/3802540/difference-between-class-variables-and-class-instance-variables\">Difference between class variables and class instance variables?</a>"}, {"owner": {"reputation": 3352, "user_id": 5152338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QbPE.png?s=128&g=1", "display_name": "jdno", "link": "https://stackoverflow.com/users/5152338/jdno"}, "reply_to_user": {"reputation": 139976, "user_id": 1542290, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/k3Yly.jpg?s=128&g=1", "display_name": "Mr. Alien", "link": "https://stackoverflow.com/users/1542290/mr-alien"}, "edited": false, "score": 2, "creation_date": 1522841150, "post_id": 49649468, "comment_id": 86307509, "body": "Can you provide a bit more context in your question then, and also explain why the one linked by @Mr.Alien doesn&#39;t answer it?"}, {"owner": {"reputation": 594, "user_id": 6782134, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VsycA.jpg?s=128&g=1", "display_name": "Dolev", "link": "https://stackoverflow.com/users/6782134/dolev"}, "reply_to_user": {"reputation": 3352, "user_id": 5152338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QbPE.png?s=128&g=1", "display_name": "jdno", "link": "https://stackoverflow.com/users/5152338/jdno"}, "edited": false, "score": 0, "creation_date": 1522841413, "post_id": 49649468, "comment_id": 86307678, "body": "@jdno Does that change provide more context?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 4, "creation_date": 1522841886, "post_id": 49649468, "comment_id": 86308010, "body": "For the given code, each <code>self.variable =</code> results in a <code>NoMethodError</code>."}], "answers": [{"tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": false, "score": 4, "last_activity_date": 1522853575, "creation_date": 1522853575, "answer_id": 49654167, "question_id": 49649468, "link": "https://stackoverflow.com/questions/49649468/ruby-variable-vs-self-variable/49654167#49654167", "title": "Ruby @@variable vs self.variable", "body": "<pre><code>self.variable = 'data'\n</code></pre>\n\n<p>This is a method call at toplevel. The <code>self.</code> just distinguishes it as a method call versus a local variable definition. Assuming you have <code>def variable= x</code> somewhere, it will call that method. Otherwise it's a <code>NoMethodError</code></p>\n\n<pre><code>@@variable = 'data'\n</code></pre>\n\n<p>This generates a warning: \"class variable access from toplevel\". Class variables are shared among all objects of that class <em>and</em> subclasses. Toplevel's class is just Object, so effectively this is a <em>global</em> class variable <code>[].instance_eval { @@variable } # 'data'</code> because everything ultimately derives from Object.</p>\n\n<pre><code>def class A\n  self.variable = 'data'\n  @@variable = 'data'\n</code></pre>\n\n<p>Same deal as above, but now the receiver is <code>A</code> so it will call <code>A.variable=('data')</code> and set <code>@@variable</code> on <code>A</code>.</p>\n\n<pre><code>  def method()\n    self.variable = 'data'\n    @@variable = 'data'\n</code></pre>\n\n<p>And now the receiver is some instance of <code>A</code>, let's say <code>a = A.new</code>. So it's <code>a.variable=('data')</code>. <code>@@variable</code> is set for <code>A</code> as before since all instances of a class (and its subclasses) share the one variable.</p>\n\n<p>The <strong>only</strong> case in which you can assume that <code>self.variable = 'data'</code> means anything in particular is if you see <code>attr_accessor :variable</code> or <code>attr_writer :variable</code> in the class's context. In those cases it's a particular method call that sets <code>@variable</code>. Otherwise it could do literally anything and you need to read the method definition.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 4506534, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jRLDA.jpg?s=128&g=1", "display_name": "taylorcoreyd", "link": "https://stackoverflow.com/users/4506534/taylorcoreyd"}, "is_accepted": false, "score": 1, "last_activity_date": 1523789948, "last_edit_date": 1523789948, "creation_date": 1523789544, "answer_id": 49841102, "question_id": 49649468, "link": "https://stackoverflow.com/questions/49649468/ruby-variable-vs-self-variable/49841102#49841102", "title": "Ruby @@variable vs self.variable", "body": "<ol>\n<li>Difference between <code>@@variable</code> and <code>self.variable</code> in scope of <code>main</code>.</li>\n</ol>\n\n<p>As we probably know, <code>@@variable</code> is a class variable.</p>\n\n<p><code>@@variable</code> will attach itself to the class of <code>self.class</code>. The class of main is <code>Object</code>.</p>\n\n<p>To demonstrate:</p>\n\n<pre><code>self # =&gt; main\nself.class # =&gt; Object\n@@variable = \"variable\"\nself.class.class_variables # =&gt; [:@@variable]\nobject.class_variables # =&gt; [:@@variable]\n</code></pre>\n\n<p>Be aware, this means <em>every</em> object will have access to <code>@@variable</code>.</p>\n\n<pre><code>String.class_variables # =&gt; [:@@variable]\n</code></pre>\n\n<p>and modifying that variable at the top level will also change its value for all objects.</p>\n\n<p><code>self.variable</code> will give a <code>NoMethodError</code>, as there are no getters or setters for it. If you were to define a getter and setter, however ...</p>\n\n<pre><code>class Object\n  class &lt;&lt; self\n    attr_accessor :variable\n  end\nend\nself.variable = \"variable\" # =&gt; \"variable\"\n</code></pre>\n\n<ol start=\"2\">\n<li>Difference between <code>@@variable</code> and <code>self.variable</code> in scope of a class.</li>\n</ol>\n\n<p><code>@@variable</code> will be have the same way as above, except now instead of class <code>Object</code>, we're applying it to whatever class we're currently in.</p>\n\n<p>But now, <code>self.variable</code> will apply to a <em>Class Instance Variable</em>. This is the sort of variable that's most commonly referred to as Class Variables or Static Variables in other languages (ie. it is only accessible to that class, and not its children). It is the same as having a <code>@variable</code> at the class's top level.</p>\n\n<pre><code>class T\n  @some = \"some\"\n  class &lt;&lt; self\n    attr_accessor :variable\n  end\n  self.variable = \"variable\"\nend\nT.instance_variables # =&gt; [:@some, :@variable]\n</code></pre>\n\n<ol start=\"3\">\n<li>Difference between <code>@@variable</code> and <code>self.variable</code> in scope of a method.</li>\n</ol>\n\n<p><code>@@variable</code> behaves exactly as above -- it's still referring to the class we are defining the method of.</p>\n\n<p>But now <code>self.variable</code> refers to an <em>instance</em> variable, not the Class's instance.</p>\n\n<pre><code>class T\n  attr_accessor :variable\n  def initialize\n    self.variable = \"variable\"\n  end\nend\ninstance = T.new\ninstance.instance_variables\ninstance.variable # =&gt; \"variable\"\n</code></pre>\n\n<ol start=\"4\">\n<li>\"How many variables are there? And under what scope?\"</li>\n</ol>\n\n<p>In your example, there are 5 variables (assuming proper getters/setters have been created):</p>\n\n<ol>\n<li>Class variable <code>@@variable</code> belonging to <code>Object</code></li>\n<li>Instance variable <code>main.variable</code> belonging to the instance <code>main</code> of class <code>Object</code></li>\n<li>Class variable <code>@@variable</code> belonging to <code>A</code></li>\n<li>Class Instance variable <code>A.variable</code> belonging to class <code>A</code></li>\n<li>Instance variable <code>@variable</code> belonging to any instances of <code>A</code>.</li>\n</ol>\n"}], "owner": {"reputation": 594, "user_id": 6782134, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VsycA.jpg?s=128&g=1", "display_name": "Dolev", "link": "https://stackoverflow.com/users/6782134/dolev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 403, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1523789948, "creation_date": 1522840120, "last_edit_date": 1522858130, "question_id": 49649468, "link": "https://stackoverflow.com/questions/49649468/ruby-variable-vs-self-variable", "title": "Ruby @@variable vs self.variable", "body": "<p>In Ruby, What is the difference between <code>@@variable</code> to <code>self.variable</code></p>\n\n<ol>\n<li><p>In the scope of main.</p></li>\n<li><p>In the scope of the class</p></li>\n<li><p>In the scope of a method</p></li>\n</ol>\n\n<p>For example my file looks like: </p>\n\n<pre><code>self.variable = 'data'\n@@variable = 'data'\n\ndef class A\n  self.variable = 'data'\n  @@variable = 'data'\n\n  def method()\n    self.variable = 'data'\n    @@variable = 'data'\n  end\nend\n</code></pre>\n\n<p>How many variables are there? And under what scope?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "authentication", "devise", "activeadmin"], "comments": [{"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 1, "creation_date": 1522839490, "post_id": 49649202, "comment_id": 86306453, "body": "could you post the parts of <code>routes.rb</code> that contains devise and active admin config?"}, {"owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "reply_to_user": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1522839639, "post_id": 49649202, "comment_id": 86306544, "body": "@mrzasa I added the routes.rb"}], "answers": [{"tags": [], "owner": {"reputation": 318, "user_id": 189435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7510de17cb244bbc695119d37924e3c?s=128&d=identicon&r=PG", "display_name": "Mike Doyle", "link": "https://stackoverflow.com/users/189435/mike-doyle"}, "is_accepted": false, "score": 0, "last_activity_date": 1522850564, "creation_date": 1522850564, "answer_id": 49653081, "question_id": 49649202, "link": "https://stackoverflow.com/questions/49649202/redirect-issue-with-admin-login-using-activeadmin-in-rails-app/49653081#49653081", "title": "Redirect issue with admin login using ActiveAdmin in rails app", "body": "<p>In the initializer active_admin.rb - try this </p>\n\n<pre><code>config.authentication_method = false\n</code></pre>\n"}], "owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 160, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1522850564, "creation_date": 1522839296, "last_edit_date": 1522839613, "question_id": 49649202, "link": "https://stackoverflow.com/questions/49649202/redirect-issue-with-admin-login-using-activeadmin-in-rails-app", "title": "Redirect issue with admin login using ActiveAdmin in rails app", "body": "<p>I'm using <code>devise</code> and <code>activeadmin</code>.</p>\n\n<p>When I log in to my app as an Admin (<code>http://localhost:3000/users/admin</code>) the app redirects me to to the <code>http://localhost:3000/users/sign_in</code> page.</p>\n\n<p>So basically I have to login at some user to be able to log in as Admin. Which is really inconvenient.</p>\n\n<p>this is my <code>application_controller.rb</code></p>\n\n<pre><code> class ApplicationController &lt; ActionController::Base\n       protect_from_forgery prepend: true, with: :exception\n\n       before_action :authenticate_user!, except: [:index]\n\n      def after_sign_in_path_for(resource)\n        user_path(resource)\n      end\n\n      def after_sign_up_path_for(resource)\n        user_path(resource)\n      end\n\n\n  before_action :configure_permitted_parameters, if: :devise_controller?\n\n    protected\n\n    def configure_permitted_parameters\n     devise_parameter_sanitizer.permit(:sign_up, keys: [:username, :email, :password, :password_confirmation])\n     devise_parameter_sanitizer.permit(:sign_in, keys: [:login, :password, :password_confirmation])\n     devise_parameter_sanitizer.permit(:account_update, keys: [:username, :email, :password, :password_confirmation, :current_password])\n    end\n\n\nend\n</code></pre>\n\n<p>I have added this chunk of code to the controller with out any luck.</p>\n\n<pre><code>before_action :whois, if: :devise_controller?\n\n\ndef whois\n if user.admin?\n   def after_sign_in_path_for(resource)\n     admin_dashboard_path\n   end\n else\n   def after_sign_in_path_for(resource)\n     user_path(resource)\n   end\n\n   def after_sign_up_path_for(resource)\n     user_path(resource)\n   end\n end\nend  \n</code></pre>\n\n<p>Here my routes</p>\n\n<pre><code>  devise_for :users\n  devise_for :admin_users, ActiveAdmin::Devise.config\n  ActiveAdmin.routes(self)\n\n\n\n  resources :overviews\n  resources :users\n\n  root 'overviews#index'\n</code></pre>\n\n<p>Can anyone help me with this, please?</p>\n"}, {"tags": ["ruby", "rspec", "capybara", "selenium-chromedriver", "homebrew"], "comments": [{"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1522836662, "post_id": 49648356, "comment_id": 86304644, "body": "Is it getting timeout after 60 seconds?"}, {"owner": {"reputation": 265, "user_id": 2804233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6d2ab2048ca3865acab9cd881a4f42d0?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/2804233/sam"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1522837081, "post_id": 49648356, "comment_id": 86304912, "body": "I&#39;ve set timeout to 180 seconds. So timeout happens after 180 seconds"}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1522839383, "post_id": 49648356, "comment_id": 86306382, "body": "Then what&#39;s the problem? Increase the timeout! By the way how did you set the timeout? <code>@driver.manage.timeouts.page_load = 180</code> ?"}, {"owner": {"reputation": 265, "user_id": 2804233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6d2ab2048ca3865acab9cd881a4f42d0?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/2804233/sam"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1522839565, "post_id": 49648356, "comment_id": 86306502, "body": "Yes setting timeout in the same way. The timeout ideally shouldn&#39;t be happening. It was loading quicker before a day. Now since the page loading is delayed, it shows timeout. But the actual site is loading fine."}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1522841212, "post_id": 49648356, "comment_id": 86307552, "body": "If page loading is delayed, then it has to wait, it would not timeout. Can you please check the timeout once again? I suspect it&#39;s getting timeout at 60 even thought you set it to be 180"}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1522890057, "post_id": 49648356, "comment_id": 86335251, "body": "chromedriver v37 is most recent: <a href=\"https://chromedriver.storage.googleapis.com/index.html?path=2.37/\" rel=\"nofollow noreferrer\">chromedriver.storage.googleapis.com/index.html?path=2.37</a>  And FWIW--if you are jacking up timeouts to 180 seconds--that&#39;s not good..."}, {"owner": {"reputation": 265, "user_id": 2804233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6d2ab2048ca3865acab9cd881a4f42d0?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/2804233/sam"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1523001187, "post_id": 49648356, "comment_id": 86387044, "body": "@Rajagopalan timeout is happening only after 180 seconds."}, {"owner": {"reputation": 265, "user_id": 2804233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6d2ab2048ca3865acab9cd881a4f42d0?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/2804233/sam"}, "edited": false, "score": 0, "creation_date": 1523001297, "post_id": 49648356, "comment_id": 86387115, "body": "The issue got resolved all of a sudden. It existed for a day. And disappeared the next day when tried running spec. The behaviour occurs on and off."}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1523006292, "post_id": 49648356, "comment_id": 86390196, "body": "@Sam I wonder how it happens, because in ruby binding it&#39;s not setting the timeout in the required variable, For me it happens after 60 seconds, so I go to prototype file and hard the seconds which I required."}, {"owner": {"reputation": 265, "user_id": 2804233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6d2ab2048ca3865acab9cd881a4f42d0?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/2804233/sam"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1523006607, "post_id": 49648356, "comment_id": 86390419, "body": "@Rajagopalan Currently I&#39;m hardcoding the seconds for timeout  <code>client = Selenium::WebDriver::Remote::Http::Default.new,   client.read_timeout = 180</code>"}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1523007164, "post_id": 49648356, "comment_id": 86390779, "body": "@Sam So this code makes you to for 180 seconds <code>after a click</code> ?"}, {"owner": {"reputation": 265, "user_id": 2804233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6d2ab2048ca3865acab9cd881a4f42d0?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/2804233/sam"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1523007369, "post_id": 49648356, "comment_id": 86390927, "body": "@Rajagopalan yes."}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1523007853, "post_id": 49648356, "comment_id": 86391256, "body": "Okay, so you are not using page_load timeout?"}, {"owner": {"reputation": 265, "user_id": 2804233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6d2ab2048ca3865acab9cd881a4f42d0?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/2804233/sam"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1523013967, "post_id": 49648356, "comment_id": 86395203, "body": "@Rajagopalan No"}], "owner": {"reputation": 265, "user_id": 2804233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6d2ab2048ca3865acab9cd881a4f42d0?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/2804233/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 197, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1522836539, "creation_date": 1522836539, "question_id": 49648356, "link": "https://stackoverflow.com/questions/49648356/selenium-chromedriver-launch-but-takes-long-time-for-page-load", "title": "selenium chromedriver launch but takes long time for page load", "body": "<p>I am using the chromedriver version 2.36 from brew package manager. It was working fine. But suddenly I'm facing problem loading pages. The driver launches the browser, but page loading takes forever and timeout happens eventually.<br/><br/>\n I tried setting proxy to null for the driver but in vain.<br/>\n Also tried <code>brew uninstall chromedriver</code> and reinstalling again.</p>\n\n<p>The browser launches with the below message and shows timeout</p>\n\n<pre><code>Randomized with seed 58972..\n\nNet::ReadTimeout\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "capybara"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1522836825, "post_id": 49648164, "comment_id": 86304760, "body": "Do you use spring? Restart it."}, {"owner": {"reputation": 1, "user_id": 9595963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/788808c6d095c911d72b9500aa6b9da1?s=128&d=identicon&r=PG&f=1", "display_name": "LCPGM", "link": "https://stackoverflow.com/users/9595963/lcpgm"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1522841327, "post_id": 49648164, "comment_id": 86307630, "body": "Actually restarting spring doesn&#39;t make any changes, but I think sping can be a cause. Do you know any other methods how to reconfigure spring to work properly with RSpec?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1522841995, "post_id": 49648164, "comment_id": 86308081, "body": "spring <i>should</i> just work with rspec. Except when it hangs. Try forcefully killing all remaining springs: <code>killall -m spring -9</code>"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1522842730, "post_id": 49648164, "comment_id": 86308591, "body": "Could you have done something strange, like clone multiple versions of the repository into different folders? Or are you using <code>zeus</code>? Or are you <code>ssh</code>ed onto a different machine? ......."}, {"owner": {"reputation": 1, "user_id": 9595963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/788808c6d095c911d72b9500aa6b9da1?s=128&d=identicon&r=PG&f=1", "display_name": "LCPGM", "link": "https://stackoverflow.com/users/9595963/lcpgm"}, "edited": false, "score": 0, "creation_date": 1522842991, "post_id": 49648164, "comment_id": 86308769, "body": "It doesn&#39;t helped me (no process found). I don&#39;t even need spring in my app now. It was installed by someone else in previous commits. I tried to remove it (remove from gemfile, bundle, remove bin/spring, pkill on spring) but my app still don&#39;t work.  Of course &quot;spring status&quot; outputs &quot;Spring is not running.&quot;."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1522857076, "post_id": 49648164, "comment_id": 86319676, "body": "Assuming you&#39;re running the dev server and tests on the same machine have you tried just rebooting your machine to see if the problem goes away.  That would confirm whether it&#39;s a caching issue with <code>spring</code>, etc."}], "owner": {"reputation": 1, "user_id": 9595963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/788808c6d095c911d72b9500aa6b9da1?s=128&d=identicon&r=PG&f=1", "display_name": "LCPGM", "link": "https://stackoverflow.com/users/9595963/lcpgm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 152, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1522836743, "creation_date": 1522836033, "last_edit_date": 1522836743, "question_id": 49648164, "link": "https://stackoverflow.com/questions/49648164/rspec-tests-uses-some-different-presumably-old-files", "title": "Rspec tests uses some different (presumably old) files", "body": "<p>I'm dealing with the huge problem during RSpec and capybara testing. In development mode, everything works as intended, but when it comes to tests, RSpec uses some different (presumably old) files.</p>\n\n<p>I noticed the difference between test and development output in the same scenario while testing. I've made some research and found that RSpec doesn't use the same files as rails server in development mode. I've come to this by changing render page to render \"hello\". On rails development server it printed out \"hello\" on the page, but on tests, the page was the same as before making changes in rendering.</p>\n\n<p>First I thought that's the problem with cache and temporary files, so I deleted it all, but I don't work. Do you have any ideas why my test RSpec is using other(old) instead of my application files? I've also tried to run RSpec tests in the development environment, but it still doesn't use correct files.</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1522836111, "post_id": 49648026, "comment_id": 86304246, "body": "The documentation contains this one: <code>a.fill { |i| i*i }</code> \u2013 how would you fill <code>a</code> with square numbers without using the block form?"}], "answers": [{"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 7, "last_activity_date": 1522836855, "creation_date": 1522836855, "answer_id": 49648463, "question_id": 49648026, "link": "https://stackoverflow.com/questions/49648026/practical-advantage-of-providing-a-block-to-arrayfill/49648463#49648463", "title": "Practical advantage of providing a block to &#39;Array#fill&#39;", "body": "<p>There are two reasons. The first, as shown in the documentation you linked, is when you need to fill the array with <em>different values</em>:</p>\n\n<pre><code>a = [ \"a\", \"b\", \"c\", \"d\" ]\na.fill { |i| i*i }  #=&gt; [0, 1, 4, 9]\n</code></pre>\n\n<p>The other, less obvious, reason is when you need to fill the array with <em>different objects</em> (even of the same value). Consider the following:</p>\n\n<pre><code>a = [ \"a\", \"b\", \"c\", \"d\" ]\na.fill(\"x\")  #=&gt; [\"x\", \"x\", \"x\", \"x\"]\n\n# BUT, these are actually the same object in memory:\na.map(&amp;:object_id)\n# =&gt; [70193065904260, 70193065904260, 70193065904260, 70193065904260]\n\n# This means mutating one element will mutate all elements:\nb = a.first\nb &lt;&lt; \" CHANGED\"\na  #=&gt; [\"x CHANGED\", \"x CHANGED\", \"x CHANGED\", \"x CHANGED\"]\n</code></pre>\n\n<p>By contrast, using the block form will allow you to create new objects each time:</p>\n\n<pre><code>a = [ \"a\", \"b\", \"c\", \"d\" ]\na.fill{ \"x\" }  #=&gt; [\"x\", \"x\", \"x\", \"x\"]\n\n# These are now DIFFERENT objects in memory:\na.map(&amp;:object_id)\n# =&gt; [70193070608480, 70193070608460, 70193070608400, 70193070608340]\n\n# This means mutating one element will not affect the others:\nb = a.first\nb &lt;&lt; \" CHANGED\"\na  #=&gt; [\"x CHANGED\", \"x\", \"x\", \"x\"]\n</code></pre>\n\n<p>This principle is a <a href=\"http://ruby-doc.org/core/Array.html#method-c-new-label-Common+gotchas\" rel=\"noreferrer\">common gotcha</a> when dealing with Arrays in ruby, although it applies more often to constructing new arrays rather than filling existing ones.</p>\n"}], "owner": {"reputation": 1137, "user_id": 3657027, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9055a18fa1995864d1ce9f718b1a2418?s=128&d=identicon&r=PG&f=1", "display_name": "DreamWalker", "link": "https://stackoverflow.com/users/3657027/dreamwalker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 49648463, "answer_count": 1, "score": 1, "last_activity_date": 1522914707, "creation_date": 1522835647, "last_edit_date": 1522914707, "question_id": 49648026, "link": "https://stackoverflow.com/questions/49648026/practical-advantage-of-providing-a-block-to-arrayfill", "title": "Practical advantage of providing a block to &#39;Array#fill&#39;", "body": "<p>The <a href=\"http://ruby-doc.org/core-2.5.0/Array.html#method-i-fill\" rel=\"nofollow noreferrer\"><code>Array#fill</code></a> method is capable with both objects and blocks. Why was it designed to work with blocks as well, where the absolute index is passed? What is the benefit from practical perspective?</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 2, "creation_date": 1522834993, "post_id": 49647692, "comment_id": 86303442, "body": "Use <code>value[&#47;\\((.*?)\\)&#47;, 1]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 11757, "user_id": 930640, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BMK6D.jpg?s=128&g=1", "display_name": "Magnus W", "link": "https://stackoverflow.com/users/930640/magnus-w"}, "is_accepted": false, "score": 0, "last_activity_date": 1522835111, "creation_date": 1522835111, "answer_id": 49647802, "question_id": 49647692, "link": "https://stackoverflow.com/questions/49647692/regular-expression-to-get-value-in-between-parentheses/49647802#49647802", "title": "Regular expression to get value in between parentheses", "body": "<p>Try using this regular expression</p>\n\n<pre><code>/\\((.*?)\\)/\n</code></pre>\n\n<ul>\n<li><code>\\(</code> will match your opening parenthesis in the string</li>\n<li><code>(.*?)</code> creates a <a href=\"https://www.regular-expressions.info/refcapture.html\" rel=\"nofollow noreferrer\">capturing group</a></li>\n<li><code>\\)</code> will match your closing parenthesis</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 5, "last_activity_date": 1522835478, "last_edit_date": 1522835478, "creation_date": 1522835116, "answer_id": 49647805, "question_id": 49647692, "link": "https://stackoverflow.com/questions/49647692/regular-expression-to-get-value-in-between-parentheses/49647805#49647805", "title": "Regular expression to get value in between parentheses", "body": "<p>You may do that using </p>\n\n<pre><code>value[/\\((.*?)\\)/, 1]\n</code></pre>\n\n<p>or</p>\n\n<pre><code>value[/\\(([^()]*)\\)/, 1]\n</code></pre>\n\n<p>Use a <a href=\"https://www.regular-expressions.info/brackets.html\" rel=\"nofollow noreferrer\"><strong>capturing group</strong></a> and a second argument to extract just the group value.</p>\n\n<p>Note that <code>\\((.*?)\\)</code> will also match a substring that contains <code>(</code> char in it, and the second option will only match a substring between parentheses that does not contain <code>(</code> nor <code>)</code> since <code>[^()]</code> is a <a href=\"https://www.regular-expressions.info/charclass.html#negated\" rel=\"nofollow noreferrer\"><strong>negated character class</strong></a> that matches any char but <code>(</code> and <code>)</code>.</p>\n\n<p>See the <a href=\"http://rextester.com/RAQ29139\" rel=\"nofollow noreferrer\">Ruby demo online</a>.</p>\n\n<p>From the <a href=\"https://ruby-doc.org/core-2.4.0/String.html#method-i-5B-5D\" rel=\"nofollow noreferrer\">Ruby docs</a>:</p>\n\n<blockquote>\n  <p><code>str[regexp, capture] \u2192 new_str or nil</code><br/>\n  If a <code>Regexp</code> is supplied, the matching portion of the string is returned. If a capture follows the regular expression, which may be a <strong>capture group index or name, follows the regular expression that component of the <code>MatchData</code> is returned instead</strong>.</p>\n</blockquote>\n\n<p>In case you need to extract multiple occurrences, use <code>String#scan</code>:</p>\n\n<pre><code>value = \"John sinu.s(14) and Jack(156)\"\nputs value.scan(/\\(([^()]*)\\)/)\n# =&gt; [ 14, 156 ]\n</code></pre>\n\n<p>See <a href=\"http://rextester.com/RNWR37636\" rel=\"nofollow noreferrer\">another Ruby demo</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1522837715, "post_id": 49647967, "comment_id": 86305300, "body": "Alternatively you can leave out the look ahead and change the capturing mechanism instead: <code>&#47;(?&lt;=[(])[^)]*&#47;</code>."}], "tags": [], "owner": {"reputation": 3428, "user_id": 1029351, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7A3Yw.jpg?s=128&g=1", "display_name": "Moti Korets", "link": "https://stackoverflow.com/users/1029351/moti-korets"}, "is_accepted": false, "score": 4, "last_activity_date": 1522835978, "last_edit_date": 1522835978, "creation_date": 1522835518, "answer_id": 49647967, "question_id": 49647692, "link": "https://stackoverflow.com/questions/49647692/regular-expression-to-get-value-in-between-parentheses/49647967#49647967", "title": "Regular expression to get value in between parentheses", "body": "<p>Another option is to use non-capturing look arounds like this</p>\n\n<pre><code>value[/(?&lt;=\\().*(?=\\))/]\n</code></pre>\n\n<p><code>(?&lt;=\\()</code> - positive look behind make sure there is <code>(</code> but don't capture it<br>\n<code>(?=\\))</code>  -  positive look ahead make sure the regex ends with <code>)</code> but don't capture it</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1522859908, "post_id": 49648499, "comment_id": 86321330, "body": "That&#39;s a positive lookbehind, which is what you want."}], "tags": [], "owner": {"reputation": 490, "user_id": 8240510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3d09259a12a30042981f4d6e0d1f79f?s=128&d=identicon&r=PG&f=1", "display_name": "Elbek", "link": "https://stackoverflow.com/users/8240510/elbek"}, "is_accepted": false, "score": 1, "last_activity_date": 1615050680, "last_edit_date": 1615050680, "creation_date": 1522836967, "answer_id": 49648499, "question_id": 49647692, "link": "https://stackoverflow.com/questions/49647692/regular-expression-to-get-value-in-between-parentheses/49648499#49648499", "title": "Regular expression to get value in between parentheses", "body": "<p>You can use</p>\n<pre><code>/(?&lt;=\\\\()[^\\\\)]+/g\n</code></pre>\n<p>which selects string inside brackets without brackets</p>\n<blockquote>\n<p>Only thing you need is &quot;positive lookahead&quot; feature</p>\n</blockquote>\n<p>Follow <a href=\"https://www.regular-expressions.info/refadv.html\" rel=\"nofollow noreferrer\">this link</a> for more info about <code>positive lookahead</code> in special groups.\nI don't know if it is supported in ruby</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1522860714, "creation_date": 1522860714, "answer_id": 49656413, "question_id": 49647692, "link": "https://stackoverflow.com/questions/49647692/regular-expression-to-get-value-in-between-parentheses/49656413#49656413", "title": "Regular expression to get value in between parentheses", "body": "<p>Do you wish to extract the string between the parentheses or do that using a regular expression? You specify the latter in the question but it's conceivable your question is really the former and you are assuming that a regular expression must be used.</p>\n\n<p>If you just want the value, without any restriction on the method used to obtain it, you could do that quite simply using <a href=\"http://ruby-doc.org/core-2.4.0/String.html#method-i-index\" rel=\"nofollow noreferrer\">String#index</a> and <a href=\"http://ruby-doc.org/core-2.4.0/String.html#method-i-rindex\" rel=\"nofollow noreferrer\">String#rindex</a>.</p>\n\n<pre><code>s = \"John sinu.s(14)\"\n\ns[s.index('(')+1 .. s.rindex(')')-1]\n  #=&gt; \"14\"\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 8441272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e365b6d8215ac90926fcc8b7dcb056f?s=128&d=identicon&r=PG&f=1", "display_name": "ruby.r", "link": "https://stackoverflow.com/users/8441272/ruby-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5465, "favorite_count": 0, "accepted_answer_id": 49647805, "answer_count": 5, "score": 3, "last_activity_date": 1615050680, "creation_date": 1522834844, "last_edit_date": 1522914915, "question_id": 49647692, "link": "https://stackoverflow.com/questions/49647692/regular-expression-to-get-value-in-between-parentheses", "title": "Regular expression to get value in between parentheses", "body": "<p>I am trying to write a regular expression to get the value in between parentheses. I expect a value without parentheses. For example, given:</p>\n\n<pre><code>value = \"John sinu.s(14)\" \n</code></pre>\n\n<p>I expected to get <code>14</code>.</p>\n\n<p>I tried the following:</p>\n\n<pre><code>value[/\\(.*?\\)/]\n</code></pre>\n\n<p>but it gives the result <code>(14)</code>. Please help me.</p>\n"}, {"tags": ["arrays", "ruby", "set", "combinatorics"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1522832845, "post_id": 49646267, "comment_id": 86301966, "body": "Can the array contain duplicate elements?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1522832975, "post_id": 49646267, "comment_id": 86302045, "body": "Should <code>[:e, :c, :b]</code> match even though it is out of order, i.e. not a combination?"}, {"owner": {"reputation": 9567, "user_id": 1900722, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nGsJr.jpg?s=128&g=1", "display_name": "anquegi", "link": "https://stackoverflow.com/users/1900722/anquegi"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1522837128, "post_id": 49646267, "comment_id": 86304938, "body": "Well it is the same set, not the same list, maybe it is not well explained"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1522837394, "post_id": 49646267, "comment_id": 86305109, "body": "So you want to check if it is a <code>permutation</code>, not <code>combination</code>?"}, {"owner": {"reputation": 9567, "user_id": 1900722, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nGsJr.jpg?s=128&g=1", "display_name": "anquegi", "link": "https://stackoverflow.com/users/1900722/anquegi"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1522837646, "post_id": 49646267, "comment_id": 86305266, "body": "In my case, the order is not important, the only things is that the elements are the same, so is a combination of elements the result is a set so two sets with the same elements are the same combination. I&#39;m working with sets"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1522837937, "post_id": 49646267, "comment_id": 86305448, "body": "<i>&quot;I&#39;m working with sets&quot;</i> \u2013 but your example contains <code>[:e, :c, :e]</code>, i.e. an array with duplicate elements."}, {"owner": {"reputation": 9567, "user_id": 1900722, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nGsJr.jpg?s=128&g=1", "display_name": "anquegi", "link": "https://stackoverflow.com/users/1900722/anquegi"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1522838131, "post_id": 49646267, "comment_id": 86305571, "body": "Yes, so it is not valid, and then it returns false, because is a combination using repited elements"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1522860236, "post_id": 49646267, "comment_id": 86321544, "body": "Side note (since the answer is the best solution) the <code>to_a</code> is not necessary in any event since <code>any?</code> is an <code>Enumerable</code> method"}], "answers": [{"tags": [], "owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "is_accepted": true, "score": 4, "last_activity_date": 1522834125, "last_edit_date": 1522834125, "creation_date": 1522832973, "answer_id": 49647038, "question_id": 49646267, "link": "https://stackoverflow.com/questions/49646267/find-if-an-array-is-a-combination-without-repetition/49647038#49647038", "title": "Find if an array is a combination without repetition", "body": "<p>If I understand your problem correctly, this method basically checks both source and sub array have common elements and those size of common elements should be equal to the sub array. You can do the check with array intersection.</p>\n\n<pre><code>source = [:a, :b, :c, :d, :e]\na1 = [:e, :c, :b]\na2 = [:e, :c, :e]\na3 = [:e, :b, :k]\n\n(source &amp; a1).size == a1.size\n =&gt; true \n (source &amp; a2).size == a2.size\n =&gt; false \n (source &amp; a3).size == a3.size\n =&gt; false\n</code></pre>\n"}], "owner": {"reputation": 9567, "user_id": 1900722, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nGsJr.jpg?s=128&g=1", "display_name": "anquegi", "link": "https://stackoverflow.com/users/1900722/anquegi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 49647038, "answer_count": 1, "score": -1, "last_activity_date": 1522915181, "creation_date": 1522830700, "last_edit_date": 1522915181, "question_id": 49646267, "link": "https://stackoverflow.com/questions/49646267/find-if-an-array-is-a-combination-without-repetition", "title": "Find if an array is a combination without repetition", "body": "<p>I have an array of five elements:</p>\n\n<pre><code>source = [:a, :b, :c, :d, :e]\n</code></pre>\n\n<p>I can get the combinations of one element, two elements, up to those with five elements.</p>\n\n<pre><code>source.combination(1)\n#=&gt; #&lt;Enumerator: ...&gt;\nsource.combination(1).to_a\n#=&gt; [[:a], [:b], [:c], [:d], [:e]]\nsource.combination(2).to_a\n#=&gt; [[:a, :b],\n# [:a, :c],\n# [:a, :d],\n# [:a, :e],\n# [:b, :c],\n# [:b, :d],\n# [:b, :e],\n# [:c, :d],\n# [:c, :e],\n# [:d, :e]]\nsource.combination(5).to_a\n#=&gt; [[:a, :b, :c, :d, :e]]\n</code></pre>\n\n<p>I have these arrays:</p>\n\n<pre><code>a1 = [:e, :c, :b]\na2 = [:e, :c, :e]\na3 = [:e, :b, :k]\n</code></pre>\n\n<p>The first is a combination of three elements, the second one is not valid since it has repeated elements, and the third one has one element that is not valid. For getting them, I can do something like this:</p>\n\n<pre><code>source.combination(a1.length).to_a.any? {|c| (c - a1).empty?}\n#=&gt; true\nsource.combination(a1.length).to_a.any? {|c| (c - a2).empty?}\n#=&gt; false\nsource.combination(a2.length).to_a.any? {|c| (c - a3).empty?}\n#=&gt; false\n</code></pre>\n\n<p>But I want to know if it is possible to calculate this without calculating all the combinations with the <code>to_a</code> method applied to the enumerator.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "bundler"], "comments": [{"owner": {"reputation": 1772, "user_id": 3733369, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tKoY4.jpg?s=128&g=1", "display_name": "Rcordoval", "link": "https://stackoverflow.com/users/3733369/rcordoval"}, "edited": false, "score": 1, "creation_date": 1522830336, "post_id": 49645957, "comment_id": 86300328, "body": "Please paste you gemfile. Btw are you using private RubyGems?"}, {"owner": {"reputation": 948, "user_id": 1637850, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ozB1o.jpg?s=128&g=1", "display_name": "jmknoll", "link": "https://stackoverflow.com/users/1637850/jmknoll"}, "reply_to_user": {"reputation": 1772, "user_id": 3733369, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tKoY4.jpg?s=128&g=1", "display_name": "Rcordoval", "link": "https://stackoverflow.com/users/3733369/rcordoval"}, "edited": false, "score": 0, "creation_date": 1522830585, "post_id": 49645957, "comment_id": 86300473, "body": "Just added. No private rubygems, just the standard source"}, {"owner": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 1, "creation_date": 1522831903, "post_id": 49645957, "comment_id": 86301305, "body": "Do you have in the beginning of Gemfile the line <code>source &#39;https:&#47;&#47;rubygems.org&#39;</code>?"}, {"owner": {"reputation": 1772, "user_id": 3733369, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tKoY4.jpg?s=128&g=1", "display_name": "Rcordoval", "link": "https://stackoverflow.com/users/3733369/rcordoval"}, "edited": false, "score": 0, "creation_date": 1522832532, "post_id": 49645957, "comment_id": 86301754, "body": "Please attach your Gemfile.lock also."}, {"owner": {"reputation": 948, "user_id": 1637850, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ozB1o.jpg?s=128&g=1", "display_name": "jmknoll", "link": "https://stackoverflow.com/users/1637850/jmknoll"}, "reply_to_user": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 0, "creation_date": 1522834641, "post_id": 49645957, "comment_id": 86303211, "body": "@YevgeniyAnfilofyev I had that before. Same error with and without."}, {"owner": {"reputation": 948, "user_id": 1637850, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ozB1o.jpg?s=128&g=1", "display_name": "jmknoll", "link": "https://stackoverflow.com/users/1637850/jmknoll"}, "reply_to_user": {"reputation": 1772, "user_id": 3733369, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tKoY4.jpg?s=128&g=1", "display_name": "Rcordoval", "link": "https://stackoverflow.com/users/3733369/rcordoval"}, "edited": false, "score": 0, "creation_date": 1522834649, "post_id": 49645957, "comment_id": 86303213, "body": "@Thrasher attached"}, {"owner": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 0, "creation_date": 1522836905, "post_id": 49645957, "comment_id": 86304798, "body": "Do you have in the directory of your project something that should be pushed to github?"}, {"owner": {"reputation": 948, "user_id": 1637850, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ozB1o.jpg?s=128&g=1", "display_name": "jmknoll", "link": "https://stackoverflow.com/users/1637850/jmknoll"}, "reply_to_user": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 0, "creation_date": 1522837125, "post_id": 49645957, "comment_id": 86304935, "body": "@YevgeniyAnfilofyev Yes. I can push the whole project to github, if that&#39;s what you mean"}, {"owner": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 0, "creation_date": 1522840452, "post_id": 49645957, "comment_id": 86307099, "body": "Well, in mine <code>~&#47;.bundle&#47;config</code> file I have two lines <code>---</code> and <code>BUNDLE_GITHUB__HTTPS: &quot;tru&quot;</code>. Tried yours <code>Gemfile</code> and it&#39;s worked for me without any error."}, {"owner": {"reputation": 948, "user_id": 1637850, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ozB1o.jpg?s=128&g=1", "display_name": "jmknoll", "link": "https://stackoverflow.com/users/1637850/jmknoll"}, "reply_to_user": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 0, "creation_date": 1522893735, "post_id": 49645957, "comment_id": 86336022, "body": "@YevgeniyAnfilofyev That doesn&#39;t seem to fix the issue for me, but I think its on the right track. This feels like an issue with https credentials. Can you paste the output of  your <code>bundle config</code>"}, {"owner": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 0, "creation_date": 1522906732, "post_id": 49645957, "comment_id": 86339401, "body": "@jmknoll As I mentioned above there&#39;re two lines: first is <code>---</code> and second <code>BUNDLE_GITHUB__HTTPS: &quot;tru&quot;</code>. Try it"}, {"owner": {"reputation": 1772, "user_id": 3733369, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tKoY4.jpg?s=128&g=1", "display_name": "Rcordoval", "link": "https://stackoverflow.com/users/3733369/rcordoval"}, "edited": false, "score": 0, "creation_date": 1523869301, "post_id": 49645957, "comment_id": 86721102, "body": "@jmknoll Did you solved ur problem? i&#39;m intrigued. You could try deleting suspicous gems one by one, and try to bundle"}, {"owner": {"reputation": 948, "user_id": 1637850, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ozB1o.jpg?s=128&g=1", "display_name": "jmknoll", "link": "https://stackoverflow.com/users/1637850/jmknoll"}, "reply_to_user": {"reputation": 1772, "user_id": 3733369, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tKoY4.jpg?s=128&g=1", "display_name": "Rcordoval", "link": "https://stackoverflow.com/users/3733369/rcordoval"}, "edited": false, "score": 1, "creation_date": 1524108764, "post_id": 49645957, "comment_id": 86840194, "body": "@Thrasher The problem ended up being with my bundle config. The <code>source</code> key was set incorrectly which caused bundler to return this remarkably unhelpful error."}, {"owner": {"reputation": 1772, "user_id": 3733369, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tKoY4.jpg?s=128&g=1", "display_name": "Rcordoval", "link": "https://stackoverflow.com/users/3733369/rcordoval"}, "edited": false, "score": 0, "creation_date": 1524110001, "post_id": 49645957, "comment_id": 86840506, "body": "Oh okay. I&#39;ll have it in mind ... Im glad u fixed the problem"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 10159920, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KN6APR0WjV0/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pig1xTJuvGEtPPXGJFdN7RPJLo-A/mo/photo.jpg?sz=128", "display_name": "sunil singh", "link": "https://stackoverflow.com/users/10159920/sunil-singh"}, "is_accepted": false, "score": 2, "last_activity_date": 1533032403, "creation_date": 1533032403, "answer_id": 51611074, "question_id": 49645957, "link": "https://stackoverflow.com/questions/49645957/ruby-bundler-authentication-error/51611074#51611074", "title": "Ruby Bundler Authentication Error", "body": "<p>check the output of </p>\n\n<pre><code>bundle config\n</code></pre>\n\n<p>if the output is something similar to below</p>\n\n<pre><code>Set for the current user (C:/Users/xxxxxx/.bundle/config): &lt;user-name&gt;:&lt;password&gt;\n</code></pre>\n\n<p>Probably the <code>&lt;password&gt;</code> is the culprit.\ncheck if it is CGI escaped.</p>\n"}, {"tags": [], "owner": {"reputation": 847, "user_id": 4107076, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh5.googleusercontent.com/-S9vSO9TMZqo/AAAAAAAAAAI/AAAAAAAAAFo/OZyx4KJJNIk/photo.jpg?sz=128", "display_name": "Mr. Rene", "link": "https://stackoverflow.com/users/4107076/mr-rene"}, "is_accepted": false, "score": 3, "last_activity_date": 1560267957, "creation_date": 1560267957, "answer_id": 56547392, "question_id": 49645957, "link": "https://stackoverflow.com/questions/49645957/ruby-bundler-authentication-error/56547392#56547392", "title": "Ruby Bundler Authentication Error", "body": "<p>When I ran into this error, I had to edit my <code>.bundle/config</code> file </p>\n\n<ul>\n<li>Ran: <code>nano .bundle/config</code></li>\n</ul>\n\n<p>Adjusted it to <a href=\"https://stackoverflow.com/questions/2824126/whats-the-difference-between-uri-escape-and-cgi-escape\">CGI escape</a>. </p>\n\n<p>I know this post is old, but hopefully it helps someone.</p>\n"}, {"comments": [{"owner": {"reputation": 502, "user_id": 10408262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79974424c03e018eab36a5dbaaf23787?s=128&d=identicon&r=PG&f=1", "display_name": "Ri1a", "link": "https://stackoverflow.com/users/10408262/ri1a"}, "edited": false, "score": 0, "creation_date": 1608296889, "post_id": 58082318, "comment_id": 115546772, "body": "This is just partly true. The error also occurs if the password contains special characters."}], "tags": [], "owner": {"reputation": 21389, "user_id": 12484, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/08f53f1d60bb079c102eb9738f24888d?s=128&d=identicon&r=PG", "display_name": "Jon Schneider", "link": "https://stackoverflow.com/users/12484/jon-schneider"}, "is_accepted": false, "score": -1, "last_activity_date": 1569334551, "creation_date": 1569334551, "answer_id": 58082318, "question_id": 49645957, "link": "https://stackoverflow.com/questions/49645957/ruby-bundler-authentication-error/58082318#58082318", "title": "Ruby Bundler Authentication Error", "body": "<p>This can happen when the line with the credentials in your ~/.bundle/config file has a trailing space.</p>\n\n<p>You can tell this the case when the output of running <code>bundle config</code> includes a line like:</p>\n\n<pre><code>Set for the current user (/Users/jon/.bundle/config): \"my_username:FAKEPASSWORDcFs6tdMp3SqGRYte8 \"\n</code></pre>\n\n<p>Note the trailing space before the closing <code>\"</code>.</p>\n\n<p>Fix this by editing your <code>~/.bundle/config</code> and removing any trailing spaces on the line with the credentials.</p>\n"}], "owner": {"reputation": 948, "user_id": 1637850, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ozB1o.jpg?s=128&g=1", "display_name": "jmknoll", "link": "https://stackoverflow.com/users/1637850/jmknoll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5816, "favorite_count": 1, "answer_count": 3, "score": 11, "last_activity_date": 1569334551, "creation_date": 1522829724, "last_edit_date": 1522834563, "question_id": 49645957, "link": "https://stackoverflow.com/questions/49645957/ruby-bundler-authentication-error", "title": "Ruby Bundler Authentication Error", "body": "<p>I'm getting a strange error from bundler that I haven't seen before. On <code>bundle install</code> I get:</p>\n\n<p><code>Please CGI escape your usernames and passwords before setting them for authentication</code></p>\n\n<p>This only happens on one repo, and I suspect it has something to do with gem sources from github for a couple of gems in that gemfile. Worth noting, these gets are being pulling from <code>git://github.com/</code>, rather than SSH. Not sure if this might be what is causing the problem.</p>\n\n<p>Couldn't find any information on this in Bundlers docs, so any insight or direction would be much appreciated.</p>\n\n<p>Edit (Adding Gemfile):</p>\n\n<pre><code>ruby '2.2.2'\n\n\n    # Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\n    gem 'rails', '&gt;= 5.0.0.rc1', '&lt; 5.1'\n    # Use postgresql as the database for Active Record\n    gem 'pg', '~&gt; 0.18'\n    # Use Puma as the app server\n    gem 'puma', '~&gt; 3.0'\n    # Use SCSS for stylesheets\n    gem 'sass-rails', '~&gt; 5.0'\n    gem 'bootstrap', '~&gt; 4.0.0.alpha3'\n    gem 'font-awesome-rails'\n    # Use Uglifier as compressor for JavaScript assets\n    gem 'uglifier', '&gt;= 1.3.0'\n    # Use CoffeeScript for .coffee assets and views\n    gem 'coffee-rails', '~&gt; 4.1.0'\n    gem 'sprockets', '~&gt; 3.0'\n    # See https://github.com/rails/execjs#readme for more supported runtimes\n    # gem 'therubyracer', platforms: :ruby\n\n    # Use jquery as the JavaScript library\n    gem 'jquery-rails'\n    # Turbolinks makes navigating your web application faster. Read more: https://github.com/turbolinks/turbolinks\n    gem 'turbolinks', '~&gt; 5.x'\n    # Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\n    gem 'jbuilder', '~&gt; 2.0'\n    # Use Redis adapter to run Action Cable in production\n    # gem 'redis', '~&gt; 3.0'\n    # Use ActiveModel has_secure_password\n    # gem 'bcrypt', '~&gt; 3.1.7'\n    gem 'haml-rails'\n    gem 'newrelic_rpm'\n    gem 'httparty'\n    gem 'gibbon'\n    gem 'rollbar'\n\n    gem 'rack-cors', :require =&gt; 'rack/cors'\n\n    gem 'devise'\n    gem 'trix'\n    gem 'bootsy'\n    gem 'paperclip'\n    gem 'aws-sdk', '~&gt; 2.3'\n    gem 'figaro'\n    gem 'simple_token_authentication'\n    gem 'cancan'\n    gem 'rolify'\n    gem 'kaminari'\n    gem 'twilio-ruby'\n\n    gem 'rails_admin', github: 'sferik/rails_admin'\n    gem 'rack-pjax', github: 'afcapel/rack-pjax', branch: 'master'\n    #gem 'rails_admin'\n    #gem 'rack-pjax'\n    #gem 'remotipart', github: 'mshibuya/remotipart', ref: '3a6acb3'\n    gem 'remotipart', '~&gt; 1.3'\n    gem 'active_model_serializers'\n\n    group :development, :test do\n      # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n      gem 'byebug', platform: :mri\n      gem 'rubocop'\n      gem 'annotate'\n      gem 'letter_opener'\n      gem 'pry'\n      gem 'rspec-rails'\n      gem 'shoulda-matchers'\n    end\n\n    group :development do\n      # Access an IRB console on exception pages or by using &lt;%= console %&gt; anywhere in the code.\n      gem 'web-console'\n      gem 'listen', '~&gt; 3.0.5'\n      # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n      gem 'spring'\n      gem 'spring-watcher-listen', '~&gt; 2.0.0'\n      gem 'html2haml'\n    end\n</code></pre>\n\n<p>The only value I have in <code>bundle config</code> is:</p>\n\n<pre><code>https://rubygems.org/ Set for the current user (/Users/jamesonknoll/.bundle/config): \"https://rubygems.org/\"\n</code></pre>\n\n<p>Adding gemfile.lock</p>\n\n<pre><code>GIT\n  remote: git://github.com/afcapel/rack-pjax.git\n  revision: c776a9a9eaa0641636e9ece5cfe88fc739339072\n  branch: master\n  specs:\n    rack-pjax (0.8.0)\n      nokogiri (&gt;= 1.5)\n      rack (&gt;= 1.1)\n\nGIT\n  remote: git://github.com/sferik/rails_admin.git\n  revision: cc8d5e64ee4c41387e422fec29afb3e579f5afab\n  specs:\n    rails_admin (1.1.0)\n      builder (~&gt; 3.1)\n      coffee-rails (~&gt; 4.0)\n      font-awesome-rails (&gt;= 3.0, &lt; 5)\n      haml (~&gt; 4.0)\n      jquery-rails (&gt;= 3.0, &lt; 5)\n      jquery-ui-rails (~&gt; 5.0)\n      kaminari (~&gt; 0.14)\n      nested_form (~&gt; 0.3)\n      rack-pjax (&gt;= 0.7)\n      rails (&gt;= 4.0, &lt; 6)\n      remotipart (~&gt; 1.3)\n      sass-rails (&gt;= 4.0, &lt; 6)\n\nGEM\n  remote: https://rubygems.org/\n  specs:\n    actioncable (5.0.0)\n      actionpack (= 5.0.0)\n      nio4r (~&gt; 1.2)\n      websocket-driver (~&gt; 0.6.1)\n    actionmailer (5.0.0)\n      actionpack (= 5.0.0)\n      actionview (= 5.0.0)\n      activejob (= 5.0.0)\n      mail (~&gt; 2.5, &gt;= 2.5.4)\n      rails-dom-testing (~&gt; 2.0)\n    actionpack (5.0.0)\n      actionview (= 5.0.0)\n      activesupport (= 5.0.0)\n      rack (~&gt; 2.0)\n      rack-test (~&gt; 0.6.3)\n      rails-dom-testing (~&gt; 2.0)\n      rails-html-sanitizer (~&gt; 1.0, &gt;= 1.0.2)\n    actionview (5.0.0)\n      activesupport (= 5.0.0)\n      builder (~&gt; 3.1)\n      erubis (~&gt; 2.7.0)\n      rails-dom-testing (~&gt; 2.0)\n      rails-html-sanitizer (~&gt; 1.0, &gt;= 1.0.2)\n    active_model_serializers (0.10.4)\n      actionpack (&gt;= 4.1, &lt; 6)\n      activemodel (&gt;= 4.1, &lt; 6)\n      case_transform (&gt;= 0.2)\n      jsonapi (= 0.1.1.beta6)\n    activejob (5.0.0)\n      activesupport (= 5.0.0)\n      globalid (&gt;= 0.3.6)\n    activemodel (5.0.0)\n      activesupport (= 5.0.0)\n    activerecord (5.0.0)\n      activemodel (= 5.0.0)\n      activesupport (= 5.0.0)\n      arel (~&gt; 7.0)\n    activesupport (5.0.0)\n      concurrent-ruby (~&gt; 1.0, &gt;= 1.0.2)\n      i18n (~&gt; 0.7)\n      minitest (~&gt; 5.1)\n      tzinfo (~&gt; 1.1)\n    addressable (2.4.0)\n    annotate (2.7.1)\n      activerecord (&gt;= 3.2, &lt; 6.0)\n      rake (&gt;= 10.4, &lt; 12.0)\n    arel (7.0.0)\n    ast (2.3.0)\n    autoprefixer-rails (6.3.7)\n      execjs\n    aws-sdk (2.3.21)\n      aws-sdk-resources (= 2.3.21)\n    aws-sdk-core (2.3.21)\n      jmespath (~&gt; 1.0)\n    aws-sdk-resources (2.3.21)\n      aws-sdk-core (= 2.3.21)\n    bcrypt (3.1.11)\n    bootstrap (4.0.0.alpha3)\n      autoprefixer-rails (&gt;= 6.0.3)\n      sass (&gt;= 3.4.19)\n    bootsy (2.3.0)\n      carrierwave (~&gt; 0.11)\n      mini_magick (~&gt; 4.5)\n    builder (3.2.2)\n    byebug (9.0.5)\n    cancan (1.6.10)\n    carrierwave (0.11.2)\n      activemodel (&gt;= 3.2.0)\n      activesupport (&gt;= 3.2.0)\n      json (&gt;= 1.7)\n      mime-types (&gt;= 1.16)\n      mimemagic (&gt;= 0.3.0)\n    case_transform (0.2)\n      activesupport\n    climate_control (0.0.3)\n      activesupport (&gt;= 3.0)\n    cocaine (0.5.8)\n      climate_control (&gt;= 0.0.3, &lt; 1.0)\n    coderay (1.1.1)\n    coffee-rails (4.1.1)\n      coffee-script (&gt;= 2.2.0)\n      railties (&gt;= 4.0.0, &lt; 5.1.x)\n    coffee-script (2.4.1)\n      coffee-script-source\n      execjs\n    coffee-script-source (1.10.0)\n    concurrent-ruby (1.0.2)\n    debug_inspector (0.0.2)\n    devise (4.2.0)\n      bcrypt (~&gt; 3.0)\n      orm_adapter (~&gt; 0.1)\n      railties (&gt;= 4.1.0, &lt; 5.1)\n      responders\n      warden (~&gt; 1.2.3)\n    diff-lcs (1.3)\n    erubis (2.7.0)\n    execjs (2.7.0)\n    faraday (0.12.1)\n      multipart-post (&gt;= 1.2, &lt; 3)\n    ffi (1.9.13)\n    figaro (1.1.1)\n      thor (~&gt; 0.14)\n    font-awesome-rails (4.6.3.1)\n      railties (&gt;= 3.2, &lt; 5.1)\n    gibbon (3.0.2)\n      faraday (&gt;= 0.9.1)\n      multi_json (&gt;= 1.11.0)\n    globalid (0.3.6)\n      activesupport (&gt;= 4.1.0)\n    haml (4.0.7)\n      tilt\n    haml-rails (0.9.0)\n      actionpack (&gt;= 4.0.1)\n      activesupport (&gt;= 4.0.1)\n      haml (&gt;= 4.0.6, &lt; 5.0)\n      html2haml (&gt;= 1.0.1)\n      railties (&gt;= 4.0.1)\n    html2haml (2.0.0)\n      erubis (~&gt; 2.7.0)\n      haml (~&gt; 4.0.0)\n      nokogiri (~&gt; 1.6.0)\n      ruby_parser (~&gt; 3.5)\n    httparty (0.14.0)\n      multi_xml (&gt;= 0.5.2)\n    i18n (0.7.0)\n    jbuilder (2.5.0)\n      activesupport (&gt;= 3.0.0, &lt; 5.1)\n      multi_json (~&gt; 1.2)\n    jmespath (1.3.0)\n    jquery-rails (4.1.1)\n      rails-dom-testing (&gt;= 1, &lt; 3)\n      railties (&gt;= 4.2.0)\n      thor (&gt;= 0.14, &lt; 2.0)\n    jquery-ui-rails (5.0.5)\n      railties (&gt;= 3.2.16)\n    json (2.0.1)\n    jsonapi (0.1.1.beta6)\n      jsonapi-parser (= 0.1.1.beta3)\n      jsonapi-renderer (= 0.1.1.beta1)\n    jsonapi-parser (0.1.1.beta3)\n    jsonapi-renderer (0.1.1.beta1)\n    jwt (1.5.6)\n    kaminari (0.17.0)\n      actionpack (&gt;= 3.0.0)\n      activesupport (&gt;= 3.0.0)\n    launchy (2.4.3)\n      addressable (~&gt; 2.3)\n    letter_opener (1.4.1)\n      launchy (~&gt; 2.2)\n    libxml-ruby (3.0.0)\n    listen (3.0.8)\n      rb-fsevent (~&gt; 0.9, &gt;= 0.9.4)\n      rb-inotify (~&gt; 0.9, &gt;= 0.9.7)\n    loofah (2.0.3)\n      nokogiri (&gt;= 1.5.9)\n    mail (2.6.4)\n      mime-types (&gt;= 1.16, &lt; 4)\n    method_source (0.8.2)\n    mime-types (3.1)\n      mime-types-data (~&gt; 3.2015)\n    mime-types-data (3.2016.0521)\n    mimemagic (0.3.1)\n    mini_magick (4.5.1)\n    mini_portile2 (2.1.0)\n    minitest (5.9.0)\n    multi_json (1.12.1)\n    multi_xml (0.6.0)\n    multipart-post (2.0.0)\n    nested_form (0.3.2)\n    newrelic_rpm (4.1.0.333)\n    nio4r (1.2.1)\n    nokogiri (1.6.8)\n      mini_portile2 (~&gt; 2.1.0)\n      pkg-config (~&gt; 1.1.7)\n    orm_adapter (0.5.0)\n    paperclip (5.0.0)\n      activemodel (&gt;= 4.2.0)\n      activesupport (&gt;= 4.2.0)\n      cocaine (~&gt; 0.5.5)\n      mime-types\n      mimemagic (~&gt; 0.3.0)\n    parser (2.3.1.2)\n      ast (~&gt; 2.2)\n    pg (0.18.4)\n    pkg-config (1.1.7)\n    powerpack (0.1.1)\n    pry (0.10.4)\n      coderay (~&gt; 1.1.0)\n      method_source (~&gt; 0.8.1)\n      slop (~&gt; 3.4)\n    puma (3.4.0)\n    rack (2.0.1)\n    rack-cors (0.4.0)\n    rack-test (0.6.3)\n      rack (&gt;= 1.0)\n    rails (5.0.0)\n      actioncable (= 5.0.0)\n      actionmailer (= 5.0.0)\n      actionpack (= 5.0.0)\n      actionview (= 5.0.0)\n      activejob (= 5.0.0)\n      activemodel (= 5.0.0)\n      activerecord (= 5.0.0)\n      activesupport (= 5.0.0)\n      bundler (&gt;= 1.3.0, &lt; 2.0)\n      railties (= 5.0.0)\n      sprockets-rails (&gt;= 2.0.0)\n    rails-dom-testing (2.0.1)\n      activesupport (&gt;= 4.2.0, &lt; 6.0)\n      nokogiri (~&gt; 1.6.0)\n    rails-html-sanitizer (1.0.3)\n      loofah (~&gt; 2.0)\n    railties (5.0.0)\n      actionpack (= 5.0.0)\n      activesupport (= 5.0.0)\n      method_source\n      rake (&gt;= 0.8.7)\n      thor (&gt;= 0.18.1, &lt; 2.0)\n    rainbow (2.1.0)\n    rake (11.2.2)\n    rb-fsevent (0.9.7)\n    rb-inotify (0.9.7)\n      ffi (&gt;= 0.5.0)\n    remotipart (1.3.1)\n    responders (2.2.0)\n      railties (&gt;= 4.2.0, &lt; 5.1)\n    rolify (5.1.0)\n    rollbar (2.15.1)\n      multi_json\n    rspec-core (3.5.4)\n      rspec-support (~&gt; 3.5.0)\n    rspec-expectations (3.5.0)\n      diff-lcs (&gt;= 1.2.0, &lt; 2.0)\n      rspec-support (~&gt; 3.5.0)\n    rspec-mocks (3.5.0)\n      diff-lcs (&gt;= 1.2.0, &lt; 2.0)\n      rspec-support (~&gt; 3.5.0)\n    rspec-rails (3.5.1)\n      actionpack (&gt;= 3.0)\n      activesupport (&gt;= 3.0)\n      railties (&gt;= 3.0)\n      rspec-core (~&gt; 3.5.0)\n      rspec-expectations (~&gt; 3.5.0)\n      rspec-mocks (~&gt; 3.5.0)\n      rspec-support (~&gt; 3.5.0)\n    rspec-support (3.5.0)\n    rubocop (0.41.2)\n      parser (&gt;= 2.3.1.1, &lt; 3.0)\n      powerpack (~&gt; 0.1)\n      rainbow (&gt;= 1.99.1, &lt; 3.0)\n      ruby-progressbar (~&gt; 1.7)\n      unicode-display_width (~&gt; 1.0, &gt;= 1.0.1)\n    ruby-progressbar (1.8.1)\n    ruby_parser (3.8.2)\n      sexp_processor (~&gt; 4.1)\n    sass (3.4.22)\n    sass-rails (5.0.5)\n      railties (&gt;= 4.0.0, &lt; 6)\n      sass (~&gt; 3.1)\n      sprockets (&gt;= 2.8, &lt; 4.0)\n      sprockets-rails (&gt;= 2.0, &lt; 4.0)\n      tilt (&gt;= 1.1, &lt; 3)\n    sexp_processor (4.7.0)\n    shoulda-matchers (3.1.1)\n      activesupport (&gt;= 4.0.0)\n    simple_token_authentication (1.14.0)\n      actionmailer (&gt;= 3.2.6, &lt; 6)\n      actionpack (&gt;= 3.2.6, &lt; 6)\n      devise (&gt;= 3.2, &lt; 6)\n    slop (3.6.0)\n    spring (1.7.2)\n    spring-watcher-listen (2.0.0)\n      listen (&gt;= 2.7, &lt; 4.0)\n      spring (~&gt; 1.2)\n    sprockets (3.6.3)\n      concurrent-ruby (~&gt; 1.0)\n      rack (&gt; 1, &lt; 3)\n    sprockets-rails (3.1.1)\n      actionpack (&gt;= 4.0)\n      activesupport (&gt;= 4.0)\n      sprockets (&gt;= 3.0.0)\n    thor (0.19.1)\n    thread_safe (0.3.5)\n    tilt (2.0.5)\n    trix (0.9.7)\n      rails\n    turbolinks (5.0.0)\n      turbolinks-source (~&gt; 5)\n    turbolinks-source (5.0.0)\n    twilio-ruby (5.2.0)\n      faraday (~&gt; 0.9)\n      jwt (~&gt; 1.5)\n      libxml-ruby (&gt;= 2.0, &lt; 4.0)\n    tzinfo (1.2.2)\n      thread_safe (~&gt; 0.1)\n    uglifier (3.0.0)\n      execjs (&gt;= 0.3.0, &lt; 3)\n    unicode-display_width (1.1.0)\n    warden (1.2.6)\n      rack (&gt;= 1.0)\n    web-console (3.3.1)\n      actionview (&gt;= 5.0)\n      activemodel (&gt;= 5.0)\n      debug_inspector\n      railties (&gt;= 5.0)\n    websocket-driver (0.6.4)\n      websocket-extensions (&gt;= 0.1.0)\n    websocket-extensions (0.1.2)\n\nPLATFORMS\n  ruby\n\nDEPENDENCIES\n  active_model_serializers\n  annotate\n  aws-sdk (~&gt; 2.3)\n  bootstrap (~&gt; 4.0.0.alpha3)\n  bootsy\n  byebug\n  cancan\n  coffee-rails (~&gt; 4.1.0)\n  devise\n  figaro\n  font-awesome-rails\n  gibbon\n  haml-rails\n  html2haml\n  httparty\n  jbuilder (~&gt; 2.0)\n  jquery-rails\n  kaminari\n  letter_opener\n  listen (~&gt; 3.0.5)\n  newrelic_rpm\n  paperclip\n  pg (~&gt; 0.18)\n  pry\n  puma (~&gt; 3.0)\n  rack-cors\n  rack-pjax!\n  rails (&gt;= 5.0.0.rc1, &lt; 5.1)\n  rails_admin!\n  remotipart (~&gt; 1.3)\n  rolify\n  rollbar\n  rspec-rails\n  rubocop\n  sass-rails (~&gt; 5.0)\n  shoulda-matchers\n  simple_token_authentication\n  spring\n  spring-watcher-listen (~&gt; 2.0.0)\n  sprockets (~&gt; 3.0)\n  trix\n  turbolinks (~&gt; 5.x)\n  twilio-ruby\n  tzinfo-data\n  uglifier (&gt;= 1.3.0)\n  web-console\n\nRUBY VERSION\n   ruby 2.2.2p95\n\nBUNDLED WITH\n   1.15.2\n</code></pre>\n\n<p>Current bundle --version is 1.16.1\nMaybe that is causing the issue? But not sure why that would cause an auth error.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "ruby-on-rails-4", "spree"], "comments": [{"owner": {"reputation": 1078, "user_id": 4071171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d83da5d07e25227a9e448769bc86ca33?s=128&d=identicon&r=PG", "display_name": "Renaud Kern", "link": "https://stackoverflow.com/users/4071171/renaud-kern"}, "edited": false, "score": 0, "creation_date": 1522830669, "post_id": 49645948, "comment_id": 86300535, "body": "How do you call this function from the view ? You may not need to reload the full page, but just the html fragment that concerne the quantity."}, {"owner": {"reputation": 201, "user_id": 7666165, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/SakmP.jpg?s=128&g=1", "display_name": "Cliff_Cleet", "link": "https://stackoverflow.com/users/7666165/cliff-cleet"}, "reply_to_user": {"reputation": 1078, "user_id": 4071171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d83da5d07e25227a9e448769bc86ca33?s=128&d=identicon&r=PG", "display_name": "Renaud Kern", "link": "https://stackoverflow.com/users/4071171/renaud-kern"}, "edited": false, "score": 0, "creation_date": 1522833020, "post_id": 49645948, "comment_id": 86302079, "body": "@RenaudKern , In item.html.haml file ,                                                     `     .quantity_changer       = link_to decrease_order_path(line_item.id), method: :post,           remote: true, class: &#39;cart-item-change minus&#39; do          %i.fa.fa-minus  `"}, {"owner": {"reputation": 201, "user_id": 7666165, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/SakmP.jpg?s=128&g=1", "display_name": "Cliff_Cleet", "link": "https://stackoverflow.com/users/7666165/cliff-cleet"}, "reply_to_user": {"reputation": 1078, "user_id": 4071171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d83da5d07e25227a9e448769bc86ca33?s=128&d=identicon&r=PG", "display_name": "Renaud Kern", "link": "https://stackoverflow.com/users/4071171/renaud-kern"}, "edited": false, "score": 0, "creation_date": 1522833166, "post_id": 49645948, "comment_id": 86302171, "body": "@RenaudKern , I have updated my question with the view file"}, {"owner": {"reputation": 1078, "user_id": 4071171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d83da5d07e25227a9e448769bc86ca33?s=128&d=identicon&r=PG", "display_name": "Renaud Kern", "link": "https://stackoverflow.com/users/4071171/renaud-kern"}, "edited": false, "score": 0, "creation_date": 1522841001, "post_id": 49645948, "comment_id": 86307427, "body": "As the controller render json, the browser will not reload the page. What you try to do is Ajax. You can follow this tutorial to get inspired: <a href=\"https://coderwall.com/p/kqb3xq/rails-4-how-to-partials-ajax-dead-easy\" rel=\"nofollow noreferrer\">coderwall.com/p/kqb3xq/rails-4-how-to-partials-ajax-dead-eas&zwnj;&#8203;y</a>"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1522860373, "post_id": 49645948, "comment_id": 86321636, "body": "IF you just want the page to reload then this shouldn&#39;t be a remote call and you can just re-render the the page just like every other page render works"}], "answers": [{"comments": [{"owner": {"reputation": 201, "user_id": 7666165, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/SakmP.jpg?s=128&g=1", "display_name": "Cliff_Cleet", "link": "https://stackoverflow.com/users/7666165/cliff-cleet"}, "edited": false, "score": 0, "creation_date": 1522833919, "post_id": 49646353, "comment_id": 86302685, "body": "I have tried the following method , but didn&#39;t work ... , Since the values are rendered as jSON , it is creating an internal server error.."}], "tags": [], "owner": {"reputation": 909, "user_id": 9534861, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HEqJQasw6sM/AAAAAAAAAAI/AAAAAAAABHA/HiEIzDPH-l0/photo.jpg?sz=128", "display_name": "Saqib Shahzad", "link": "https://stackoverflow.com/users/9534861/saqib-shahzad"}, "is_accepted": false, "score": 0, "last_activity_date": 1522830948, "creation_date": 1522830948, "answer_id": 49646353, "question_id": 49645948, "link": "https://stackoverflow.com/questions/49645948/page-reload-in-ruby-controller-function/49646353#49646353", "title": "Page reload in ruby controller function", "body": "<p>If you are using rails 5 there is a redirect method just for this purpose.\n <code>redirect_back(fallback_location: root_path,notice: \"your notice here\")</code></p>\n"}], "owner": {"reputation": 201, "user_id": 7666165, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/SakmP.jpg?s=128&g=1", "display_name": "Cliff_Cleet", "link": "https://stackoverflow.com/users/7666165/cliff-cleet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522833139, "creation_date": 1522829697, "last_edit_date": 1592644375, "question_id": 49645948, "link": "https://stackoverflow.com/questions/49645948/page-reload-in-ruby-controller-function", "title": "Page reload in ruby controller function", "body": "<p>In my ruby application, i have a controller function to decrease the count of the product quantity in the cart.</p>\n<h1>order_controller_decorator.rb:</h1>\n<pre><code>def decrease\n  quantity = change_quantity(-1)\n  render json: { quantity: quantity, total:current_order.display_item_total }\nend \n</code></pre>\n<p>In view file, the decrease button is called as below:</p>\n<h1>_line.html.haml</h1>\n<pre><code> .quantity_changer\n      = link_to decrease_order_path(line_item.id), method: :post, remote: true, class: 'cart-item-change minus' do\n        %i.fa.fa-minus\n</code></pre>\n<p>Here,how can i make my page to reload after the decrease action.</p>\n<p>I have tried adding</p>\n<pre><code>redirect_to :back\n</code></pre>\n<p>But it didn't work.</p>\n<p>Please help me to solve this issue..</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "join"], "comments": [{"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1522827952, "post_id": 49645444, "comment_id": 86298958, "body": "Please, paste the error."}, {"owner": {"reputation": 1772, "user_id": 3733369, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tKoY4.jpg?s=128&g=1", "display_name": "Rcordoval", "link": "https://stackoverflow.com/users/3733369/rcordoval"}, "edited": false, "score": 0, "creation_date": 1522827963, "post_id": 49645444, "comment_id": 86298965, "body": "Could you share the error with us please?"}, {"owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "edited": false, "score": 0, "creation_date": 1522828278, "post_id": 49645444, "comment_id": 86299164, "body": "update ....please check"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1522829339, "post_id": 49645444, "comment_id": 86299772, "body": "do you find a solution ?"}, {"owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "edited": false, "score": 0, "creation_date": 1522829358, "post_id": 49645444, "comment_id": 86299784, "body": "No Sir........."}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1522829431, "post_id": 49645444, "comment_id": 86299821, "body": "try this <code>AutoCompany.joins(:auto_company_branches).where(&quot;auto_compan&zwnj;&#8203;y_branches.country_i&zwnj;&#8203;d  = ? and auto_companies.id = ?&#39;,country_id,id)</code>"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1522829445, "post_id": 49645444, "comment_id": 86299832, "body": "do you have multiple country id or id ?"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1522829504, "post_id": 49645444, "comment_id": 86299858, "body": "try this one also <code>AutoCompany.includes(:auto_company_branches).where(id: id, auto_company_branches: {country_id: country_id} )</code>"}, {"owner": {"reputation": 1607, "user_id": 7804093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pFFFH.jpg?s=128&g=1", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/7804093/ganesh"}, "edited": false, "score": 0, "creation_date": 1522829583, "post_id": 49645444, "comment_id": 86299901, "body": "please share your database schema for <code>AutoCompany</code> and <code>AutoCompanyBranches</code>"}, {"owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "edited": false, "score": 1, "creation_date": 1522829667, "post_id": 49645444, "comment_id": 86299948, "body": "You have a TYPO :) for opening you used <code>&quot;</code> and for closing the <code>where</code> you used single quote <code>&#39;</code>"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1522830156, "post_id": 49645444, "comment_id": 86300216, "body": "@HaseebAhmad updated my answer please check it"}], "answers": [{"comments": [{"owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "edited": false, "score": 0, "creation_date": 1522828311, "post_id": 49645490, "comment_id": 86299189, "body": "what the difference between my and your query"}, {"owner": {"reputation": 1607, "user_id": 7804093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pFFFH.jpg?s=128&g=1", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/7804093/ganesh"}, "edited": false, "score": 0, "creation_date": 1522828477, "post_id": 49645490, "comment_id": 86299294, "body": "@use you were not used <code>joins</code> in your query"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "reply_to_user": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "edited": false, "score": 0, "creation_date": 1522829377, "post_id": 49645490, "comment_id": 86299792, "body": "@HaseebAhmad what is your mysql version ?"}, {"owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "edited": false, "score": 0, "creation_date": 1522830377, "post_id": 49645490, "comment_id": 86300351, "body": "thats not an issue"}, {"owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "edited": false, "score": 0, "creation_date": 1522830526, "post_id": 49645490, "comment_id": 86300435, "body": "AutoCompany.joins(:auto_company_branches).where(&quot;auto_compan&zwnj;&#8203;y_branches.country_i&zwnj;&#8203;d =? and auto_company.id=?&quot;,1,3216)"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "reply_to_user": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "edited": false, "score": 0, "creation_date": 1522830712, "post_id": 49645490, "comment_id": 86300561, "body": "@HaseebAhmad do you have multiple country id and id  ?"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "reply_to_user": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "edited": false, "score": 0, "creation_date": 1522830878, "post_id": 49645490, "comment_id": 86300671, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/168192/discussion-between-vishal-and-haseeb-ahmad\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "is_accepted": false, "score": 0, "last_activity_date": 1522830132, "last_edit_date": 1522830132, "creation_date": 1522828020, "answer_id": 49645490, "question_id": 49645444, "link": "https://stackoverflow.com/questions/49645444/rails-joins-where-query-on-association-model-and-parent-model/49645490#49645490", "title": "Rails joins where query on association model and parent model", "body": "<p>Try below query</p>\n\n<pre><code>AutoCompany.joins(:auto_company_branches).where(\"auto_company_branches.country_id =? and id=?\",country_id,id)\n</code></pre>\n\n<p>In your query, you missed to used joins, so used <code>joins(:auto_company_branches)</code> instead of <code>where(:auto_company_branches)</code></p>\n"}], "owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1522830368, "creation_date": 1522827883, "last_edit_date": 1522830368, "question_id": 49645444, "link": "https://stackoverflow.com/questions/49645444/rails-joins-where-query-on-association-model-and-parent-model", "title": "Rails joins where query on association model and parent model", "body": "<p>I have models <code>AutoCompany</code> and <code>AutoCompanyBranches</code>.</p>\n\n<p>I want to fetch auto companies with specific <code>ID</code> and specific branches countries. My query</p>\n\n<pre><code>AutoCompany.joins(:auto_company_branches).where(\"auto_company_branches.country_id =? and id=?\",country_id,id)\n</code></pre>\n\n<p>It gives an error</p>\n\n<pre><code>ActiveRecord::StatementInvalid: Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'auto_company_branches WHERE (`auto_companies`.deleted_at IS NULL) AND (auto_comp' at line 1: SELECT `auto_companies`.`id` AS t0_r0, `auto_companies`.`name` AS t0_r1, `auto_companies`.`phone` AS t0_r2, `auto_companies`.`country_id` AS t0_r3, `auto_companies`.`city_id` AS t0_r4, `auto_companies`.`physical_address` AS t0_r5, `auto_companies`.`email` AS t0_r6, `auto_companies`.`website` AS t0_r7, `auto_companies`.`lat` AS t0_r8, `auto_companies`.`lng` AS t0_r9, `auto_companies`.`slug` AS t0_r10, `auto_companies`.`delta` AS t0_r11, `auto_companies`.`average_rating` AS t0_r12, `auto_companies`.`rating_count` AS t0_r13, `auto_companies`.`rating_sum` AS t0_r14, `auto_companies`.`locale` AS t0_r15, `auto_companies`.`visible` AS t0_r16, `auto_companies`.`created_at` AS t0_r17, `auto_companies`.`updated_at` AS t0_r18, `auto_companies`.`details` AS t0_r19, `auto_companies`.`logo` AS t0_r20, `auto_companies`.`cars_url` AS t0_r21, `auto_companies`.`other_lang_key` AS t0_r22, `auto_companies`.`is_featured` AS t0_r23, `auto_companies`.`enhance_page` AS t0_r24, `auto_companies`.`conversion_id` AS t0_r25, `auto_companies`.`phone_conversion_label` AS t0_r26, `auto_companies`.`email_conversion_label` AS t0_r27, `auto_companies`.`is_verified` AS t0_r28, `auto_companies`.`admin_user_id` AS t0_r29, `auto_companies`.`deleted_at` AS t0_r30, `auto_company_translations`.`id` AS t1_r0, `auto_company_translations`.`auto_company_id` AS t1_r1, `auto_company_translations`.`name` AS t1_r2, `auto_company_translations`.`locale` AS t1_r3, `auto_company_translations`.`physical_address` AS t1_r4, `auto_company_translations`.`details` AS t1_r5, `auto_company_translations`.`created_at` AS t1_r6, `auto_company_translations`.`updated_at` AS t1_r7 FROM `auto_companies` LEFT OUTER JOIN `auto_company_translations` ON `auto_company_translations`.`auto_company_id` = `auto_companies`.`id` auto_company_branches WHERE (`auto_companies`.deleted_at IS NULL) AND (auto_company_branches.country_id =1 and  id=3242)\n</code></pre>\n"}, {"tags": ["ruby", "regex", "nginx", "fluentd"], "comments": [{"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1522827853, "post_id": 49645316, "comment_id": 86298894, "body": "What do  the tests check?"}, {"owner": {"reputation": 4957, "user_id": 3833773, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/554650175/picture?type=large", "display_name": "Yaron Idan", "link": "https://stackoverflow.com/users/3833773/yaron-idan"}, "reply_to_user": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1522830178, "post_id": 49645316, "comment_id": 86300231, "body": "The tests can be viewed here - <a href=\"https://github.com/fluent/fluentd/blob/master/test/plugin/test_parser_nginx.rb\" rel=\"nofollow noreferrer\">github.com/fluent/fluentd/blob/master/test/plugin/&hellip;</a>. They basically try to parse a log entry, and I&#39;m gonna add a new one that parses an entry with the new field."}], "answers": [{"tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 2, "last_activity_date": 1522827849, "creation_date": 1522827849, "answer_id": 49645435, "question_id": 49645316, "link": "https://stackoverflow.com/questions/49645316/optional-named-group-in-ruby-regexp/49645435#49645435", "title": "Optional named group in Ruby RegExp", "body": "<p>You need to add <code>(?:\\s+(?&lt;http_x_forwarded_for&gt;\\S+))?</code> optional non-capturing group after the last field pattern. That means the named capturing group should be inside an optional non-capturing one, and <code>\\s+</code> should be placed before it to take into account any 1+ whitespace chars before the field.</p>\n\n<p>Use</p>\n\n<pre><code>^(?&lt;remote&gt;\\S*) (?&lt;host&gt;\\S*) (?&lt;user&gt;\\S*) \\[(?&lt;time&gt;[^\\]]*)\\] \"(?&lt;method&gt;\\S+)(?: +(?&lt;path&gt;[^\"]*?)(?:\\s+\\S*)?)?\" (?&lt;code&gt;\\S*) (?&lt;size&gt;\\S*)(?: \"(?&lt;referer&gt;[^\"]*)\" \"(?&lt;agent&gt;[^\"]*)\"(?:\\s+(?&lt;http_x_forwarded_for&gt;\\S+))?)?$\n</code></pre>\n\n<p>See the <a href=\"https://regex101.com/r/4b2kDh/2\" rel=\"nofollow noreferrer\">regex demo</a>.</p>\n\n<p>Note I replaced <code>[^ ]</code> with <code>\\S</code> that is more natural to match chars other than whitespace chars with regex.</p>\n"}], "owner": {"reputation": 4957, "user_id": 3833773, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/554650175/picture?type=large", "display_name": "Yaron Idan", "link": "https://stackoverflow.com/users/3833773/yaron-idan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 0, "accepted_answer_id": 49645435, "answer_count": 1, "score": 2, "last_activity_date": 1522827849, "creation_date": 1522827453, "question_id": 49645316, "link": "https://stackoverflow.com/questions/49645316/optional-named-group-in-ruby-regexp", "title": "Optional named group in Ruby RegExp", "body": "<p>I'm using a plugin for parsing nginx log entries sent to fluentd, and trying to change it so it would optionally support another field.\nThis is the current REGEXP used for parsing the nginx log entry <code>config_set_default :expression, %q{/^(?&lt;remote&gt;[^ ]*) (?&lt;host&gt;[^ ]*) (?&lt;user&gt;[^ ]*) \\[(?&lt;time&gt;[^\\]]*)\\] \"(?&lt;method&gt;\\S+)(?: +(?&lt;path&gt;[^\\\"]*?)(?: +\\S*)?)?\" (?&lt;code&gt;[^ ]*) (?&lt;size&gt;[^ ]*)(?: \"(?&lt;referer&gt;[^\\\"]*)\" \"(?&lt;agent&gt;[^\\\"]*)\")?$/}</code></p>\n\n<p>I tried adding the new field to the REGEXP like so - \n<code>config_set_default :expression, %q{/^(?&lt;remote&gt;[^ ]*) (?&lt;host&gt;[^ ]*) (?&lt;user&gt;[^ ]*) \\[(?&lt;time&gt;[^\\]]*)\\] \"(?&lt;method&gt;\\S+)(?: +(?&lt;path&gt;[^\\\"]*?)(?: +\\S*)?)?\" (?&lt;code&gt;[^ ]*) (?&lt;size&gt;[^ ]*)(?: \"(?&lt;referer&gt;[^\\\"]*)\" \"(?&lt;agent&gt;[^\\\"]*)\"(?&lt;http_x_forwarded_for&gt;[^ ]*)?)?$/}</code></p>\n\n<p>This REGEXP can parse the log entry whether it has the new field or not, but still creates a named group for the new field, which makes the existing tests ran against the plugin break.</p>\n\n<p>I would like to know if there is some way to instruct the REGEXP it should add the named group if a value for that group exists, and omit the group if otherwise.</p>\n\n<p>Here's 2 examples of log entries, with and without the new field (respectively) -<br>\n<code>127.0.0.1 192.168.0.1 - [28/Feb/2013:12:00:00 +0900] \"GET / HTTP/1.1\" 200 777 \"-\" \"Opera/12.0\"</code><br>\n<code>127.0.0.1 192.168.0.1 - [28/Feb/2013:12:00:00 +0900] \"GET / HTTP/1.1\" 200 777 \"-\" \"Opera/12.0\" -</code></p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "inheritance"], "answers": [{"comments": [{"owner": {"reputation": 2229, "user_id": 2163881, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/HFWcM.jpg?s=128&g=1", "display_name": "Ashwini", "link": "https://stackoverflow.com/users/2163881/ashwini"}, "edited": false, "score": 0, "creation_date": 1522831907, "post_id": 49645780, "comment_id": 86301308, "body": "Hey thank you, Yes, this is one of the option, but what if i dont want remember that I have to include this module. Fix at base class then who ever adds new controller this would be there."}, {"owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "reply_to_user": {"reputation": 2229, "user_id": 2163881, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/HFWcM.jpg?s=128&g=1", "display_name": "Ashwini", "link": "https://stackoverflow.com/users/2163881/ashwini"}, "edited": false, "score": 0, "creation_date": 1522832275, "post_id": 49645780, "comment_id": 86301567, "body": "Just add the <code>include</code> line in the base class only, whichever new controllers inheriting from base class will have this functionality. Here in this case, whichever controller inheriting from either <code>ApplicationController </code> or  <code>BaseResourceController </code> will have this method available."}], "tags": [], "owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "is_accepted": false, "score": 1, "last_activity_date": 1522829043, "creation_date": 1522829043, "answer_id": 49645780, "question_id": 49645013, "link": "https://stackoverflow.com/questions/49645013/before-action-at-common-place-in-rails-controller/49645780#49645780", "title": "Before action at common place in rails controller", "body": "<p>One option would be like to wrap the permission check logic to a module and include that module in the respective controllers. The permission check implementation resides in a single file</p>\n\n<pre><code># app/controllers/concerns/permission_check.rb\nmodule PermissionCheck\n  extend ActiveSupport::Concern\n\n  included do\n    before_action :check_permissions\n  end\n\n  def check_permissions\n    current_user.permissions\n  end\nend\n</code></pre>\n\n<p>Now include this in the controllers wherever it required.</p>\n\n<pre><code>class BaseResourceController &lt; JSONAPI::ResourceController\n  include  PermissionCheck   \nend\n\nclass ApplicationController &lt; ActionController::API\n   include  PermissionCheck   \nend\n</code></pre>\n"}], "owner": {"reputation": 2229, "user_id": 2163881, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/HFWcM.jpg?s=128&g=1", "display_name": "Ashwini", "link": "https://stackoverflow.com/users/2163881/ashwini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 459, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522829043, "creation_date": 1522826366, "question_id": 49645013, "link": "https://stackoverflow.com/questions/49645013/before-action-at-common-place-in-rails-controller", "title": "Before action at common place in rails controller", "body": "<p>I have two base controller classes, one for JSON resource API and other is Application controller API class. I have to add before action for permission check which is applicable for both base classes.</p>\n\n<p>I dont want to repeat the before action code, so wanted to add at common place.\nIf I check there ancestors then I dont see any rails default common classes between them. </p>\n\n<p>Any suggestions? I also want current user in context. What will be good solution to fix this problem?</p>\n\n<pre><code> class BaseResourceController &lt; JSONAPI::ResourceController\n    before_action :check_permissions\n\n    def check_permissions\n      current_user.permissions\n    end\n end\n\nclass ApplicationController &lt; ActionController::API\n   before_action :check_permissions\n\n   def check_permissions\n     current_user.permissions\n   end\nend\n</code></pre>\n\n<blockquote>\n  <p>ActionController::API.ancestors =></p>\n  \n  <p>[ActionController::API, Devise::Controllers::UrlHelpers, Devise::Controllers::Helpers, Devise::Controllers::StoreLocation, Devise::Controllers::SignInOut, ActiveRecord::Railties::ControllerRuntime, ActionDispatch::Routing::RouteSet::MountedHelpers, ActionController::RespondWith, ActionController::ParamsWrapper, ActionController::Instrumentation, ActionController::Rescue, ActionController::DataStreaming, ActionController::ForceSSL, AbstractController::Callbacks, ActiveSupport::Callbacks, ActionController::StrongParameters, ActiveSupport::Rescuable, ActionController::BasicImplicitRender, ActionController::ConditionalGet, ActionController::Head, ActionController::Renderers::All, ActionController::Renderers, ActionController::Rendering, ActionController::ApiRendering, ActionController::Redirecting, ActiveSupport::Benchmarkable, AbstractController::Logger, ActionController::UrlFor, AbstractController::UrlFor, ActionDispatch::Routing::UrlFor, ActionDispatch::Routing::PolymorphicRoutes, AbstractController::Rendering, ActionView::ViewPaths, ActionController::Metal, AbstractController::Base, ActiveSupport::Configurable, ActiveSupport::ToJsonWithActiveSupportEncoder, Object, PP::ObjectMixin, ActiveSupport::Dependencies::Loadable, JSON::Ext::Generator::GeneratorMethods::Object, ActiveSupport::Tryable, Kernel, BasicObject]</p>\n</blockquote>\n\n<hr>\n\n<blockquote>\n  <p>JSONAPI::ResourceController.ancestors =></p>\n  \n  <p>[JSONAPI::ResourceController, JSONAPI::Callbacks, JSONAPI::ActsAsResourceController, ActionController::Base, Devise::Controllers::UrlHelpers, Devise::Controllers::Helpers, Devise::Controllers::StoreLocation, Devise::Controllers::SignInOut, ActiveRecord::Railties::ControllerRuntime, ActionDispatch::Routing::RouteSet::MountedHelpers, ActionController::RespondWith, ActionController::ParamsWrapper, ActionController::Instrumentation, ActionController::Rescue, ActionController::HttpAuthentication::Token::ControllerMethods, ActionController::HttpAuthentication::Digest::ControllerMethods, ActionController::HttpAuthentication::Basic::ControllerMethods, ActionController::DataStreaming, ActionController::Streaming, ActionController::ForceSSL, ActionController::RequestForgeryProtection, AbstractController::Callbacks, ActiveSupport::Callbacks, ActionController::FormBuilder, ActionController::Flash, ActionController::Cookies, ActionController::ParameterEncoding, ActionController::StrongParameters, ActiveSupport::Rescuable, ActionController::ImplicitRender, ActionController::BasicImplicitRender, ActionController::MimeResponds, AbstractController::Caching, AbstractController::Caching::ConfigMethods, AbstractController::Caching::Fragments, ActionController::Caching, ActionController::EtagWithFlash, ActionController::EtagWithTemplateDigest, ActionController::ConditionalGet, ActionController::Head, ActionController::Renderers::All, ActionController::Renderers, ActionController::Rendering, ActionView::Layouts, ActionView::Rendering, ActionController::Redirecting, ActiveSupport::Benchmarkable, AbstractController::Logger, ActionController::UrlFor, AbstractController::UrlFor, ActionDispatch::Routing::UrlFor, ActionDispatch::Routing::PolymorphicRoutes, ActionController::Helpers, AbstractController::Helpers, AbstractController::AssetPaths, AbstractController::Translation, AbstractController::Rendering, ActionView::ViewPaths, ActionController::Metal, AbstractController::Base, ActiveSupport::Configurable, ActiveSupport::ToJsonWithActiveSupportEncoder, Object, PP::ObjectMixin, ActiveSupport::Dependencies::Loadable, JSON::Ext::Generator::GeneratorMethods::Object, ActiveSupport::Tryable, Kernel, BasicObject]</p>\n</blockquote>\n"}, {"tags": ["ruby", "attr-accessor"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1522825988, "post_id": 49644809, "comment_id": 86297672, "body": "Define what you mean by &quot;proper&quot;."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1522826352, "post_id": 49644809, "comment_id": 86297873, "body": "<i>&quot;When I call @myattr inside some_mth [...]&quot;</i> \u2013 please show the corresponding code. In your example, <code>some_mth</code> is empty and also never called. <i>&quot;[...] my variable is nil&quot;</i> \u2013 that&#39;s the default value for instance variables. Why do you expect another value?"}, {"owner": {"reputation": 21, "user_id": 9595121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b34ca54e5425f3a75523197f6b1ea9f?s=128&d=identicon&r=PG&f=1", "display_name": "alfi", "link": "https://stackoverflow.com/users/9595121/alfi"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1522826823, "post_id": 49644809, "comment_id": 86298168, "body": "@sawa updated quiz"}, {"owner": {"reputation": 21, "user_id": 9595121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b34ca54e5425f3a75523197f6b1ea9f?s=128&d=identicon&r=PG&f=1", "display_name": "alfi", "link": "https://stackoverflow.com/users/9595121/alfi"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1522826838, "post_id": 49644809, "comment_id": 86298176, "body": "@Stefan updated quiz"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1522829512, "post_id": 49644809, "comment_id": 86299863, "body": "@alfi when is <code>some_pvt_mth</code> supposed to be called?"}, {"owner": {"reputation": 21, "user_id": 9595121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b34ca54e5425f3a75523197f6b1ea9f?s=128&d=identicon&r=PG&f=1", "display_name": "alfi", "link": "https://stackoverflow.com/users/9595121/alfi"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1522830478, "post_id": 49644809, "comment_id": 86300408, "body": "@Stefan only once but not in <code>some_mth?(num)</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1522830659, "post_id": 49644809, "comment_id": 86300528, "body": "@alfi that&#39;s what <code>initialize</code> is for, see <a href=\"https://stackoverflow.com/a/49645050/477037\">Rcordova&#39;s anwer</a>"}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1522830740, "post_id": 49645050, "comment_id": 86300580, "body": "Might be obvious but instead of setting <code>@myattr</code> you could also call <code>some_pvt_mth</code> from within <code>initialize</code>"}, {"owner": {"reputation": 21, "user_id": 9595121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b34ca54e5425f3a75523197f6b1ea9f?s=128&d=identicon&r=PG&f=1", "display_name": "alfi", "link": "https://stackoverflow.com/users/9595121/alfi"}, "edited": false, "score": 0, "creation_date": 1522830777, "post_id": 49645050, "comment_id": 86300602, "body": "ye, but array should be generated in  <code>private  some_pvt_mth</code>"}, {"owner": {"reputation": 21, "user_id": 9595121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b34ca54e5425f3a75523197f6b1ea9f?s=128&d=identicon&r=PG&f=1", "display_name": "alfi", "link": "https://stackoverflow.com/users/9595121/alfi"}, "edited": false, "score": 0, "creation_date": 1522830851, "post_id": 49645050, "comment_id": 86300646, "body": "also some_pvt_mth(arg) takes some arguments"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 21, "user_id": 9595121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b34ca54e5425f3a75523197f6b1ea9f?s=128&d=identicon&r=PG&f=1", "display_name": "alfi", "link": "https://stackoverflow.com/users/9595121/alfi"}, "edited": false, "score": 0, "creation_date": 1522830919, "post_id": 49645050, "comment_id": 86300692, "body": "@alfi did you see my <a href=\"https://stackoverflow.com/questions/49644809/how-to-use-attr-accesor#comment86300580_49645050\">comment</a> above? \u2013 <i>&quot;[...] you could also call some_pvt_mth from within initialize&quot;</i>"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9595038"}, "is_accepted": false, "score": 1, "last_activity_date": 1522830652, "last_edit_date": 1522830652, "creation_date": 1522826491, "answer_id": 49645050, "question_id": 49644809, "link": "https://stackoverflow.com/questions/49644809/how-to-use-attr-accesor/49645050#49645050", "title": "How to use &#39;attr_accesor&#39;", "body": "<p>You have to define the instance variable value first:</p>\n\n<pre><code>class MyClass\n  attr_accessor :my_attr\n\n  def initialize\n    @myattr = [1, 2, 3, 4]\n  end\n\n  def some_mth?(num)\n    @myattr.include?(num)\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2322, "user_id": 3088748, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/544821277/picture?type=large", "display_name": "AJFaraday", "link": "https://stackoverflow.com/users/3088748/ajfaraday"}, "is_accepted": false, "score": 2, "last_activity_date": 1522831053, "creation_date": 1522831053, "answer_id": 49646385, "question_id": 49644809, "link": "https://stackoverflow.com/questions/49644809/how-to-use-attr-accesor/49646385#49646385", "title": "How to use &#39;attr_accesor&#39;", "body": "<p>You do not need to define <code>attr_accessor</code> in order to use an instance variable within the defined class. It's purpose is to create a 'getter' and a 'setter' method, but those are only needed for other classes to access the data.</p>\n\n<p>This is a class:</p>\n\n<pre><code>class Foo\n  def initialize\n    @my_attr = [1,2,3,4]\n  end\n\n  def attr_includes?(x)\n    @my_attr.include?(x)\n  end\nend\n</code></pre>\n\n<p>There's no attr accessor, but this will work.</p>\n\n<p>The attr accessor essentially includes this code in your class...</p>\n\n<pre><code>class Foo\n  def my_attr\n    @my_attr\n  end\n\n  def my_attr=(x)\n    @my_attr = x\n  end\nend\n</code></pre>\n\n<p>But if you don't want that, you can just leave it out, and access the variable via other methods (such as your include example).</p>\n"}], "owner": {"reputation": 21, "user_id": 9595121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b34ca54e5425f3a75523197f6b1ea9f?s=128&d=identicon&r=PG&f=1", "display_name": "alfi", "link": "https://stackoverflow.com/users/9595121/alfi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1522831053, "creation_date": 1522825579, "last_edit_date": 1522826803, "question_id": 49644809, "link": "https://stackoverflow.com/questions/49644809/how-to-use-attr-accesor", "title": "How to use &#39;attr_accesor&#39;", "body": "<p>I have a class with a private method:</p>\n\n<pre><code>class MyClass\n  attr_accessor :my_attr\n\n  def some_mth?(num)\n    # I want to use my_attr as a variale @myattr here\n    #and here i want to check if arr include num\n   @myattr.include?(num)\n  end\n\n  private\n\n  def some_pvt_mth\n    @myattr = [1,2,3,4]\n    for example generation array here\n  end\nend\n</code></pre>\n\n<p>When I call <code>@myattr</code> inside <code>some_mth</code>, my variable  <code>@myattr</code> is <code>nil</code></p>\n\n<p>How to use variable @myatt inside class, in every method is it possible?</p>\n\n<p>How do I do it properly?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "amazon-ec2", "https", "faye"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 1439789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/949206a0fe140d474161e3dfd308ed6e?s=128&d=identicon&r=PG", "display_name": "salvianoo", "link": "https://stackoverflow.com/users/1439789/salvianoo"}, "is_accepted": false, "score": 2, "last_activity_date": 1523965767, "creation_date": 1523965767, "answer_id": 49877313, "question_id": 49644613, "link": "https://stackoverflow.com/questions/49644613/faye-not-working-while-using-https-rails-app-and-http-faye-app/49877313#49877313", "title": "Faye not working while using https rails app and http faye app", "body": "<p>Yes, you should serve your assets, faye.js in this case, through HTTPS. Take a look at this answer - <a href=\"https://stackoverflow.com/questions/38354473/heroku-error-page-was-loaded-over-https-but-requested-an-insecure-script-angu/38354599#38354599\">Heroku error: page was loaded over HTTPS, but requested an insecure script &#39;angular-route.js&#39;</a></p>\n"}], "owner": {"reputation": 159, "user_id": 4656754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbb3ff7a8f0bf8fe3ea820b1af7cc048?s=128&d=identicon&r=PG&f=1", "display_name": "anil", "link": "https://stackoverflow.com/users/4656754/anil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1523965767, "creation_date": 1522824900, "question_id": 49644613, "link": "https://stackoverflow.com/questions/49644613/faye-not-working-while-using-https-rails-app-and-http-faye-app", "title": "Faye not working while using https rails app and http faye app", "body": "<p>I am having rails app and deployed in AWS EC2 with apache and unicorn. In this application I have used faye for messaging module.It is working fine with http application but Faye is not working while using https(ssl) for web application and http for Faye app.</p>\n\n<p>In this situation are we really required https for both apps(web app and faye app)?\nPlease let me know.\nError:\nThe page at <a href=\"https://xxxx.xxxx\" rel=\"noreferrer\">https://xxxx.xxxx</a> was loaded over HTTPS, but requested an insecure script '<a href=\"http://xxxxxx:9292/faye.js\" rel=\"noreferrer\">http://xxxxxx:9292/faye.js</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "macos", "ruby-on-rails-4", "rubygems"], "comments": [{"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "edited": false, "score": 0, "creation_date": 1522824492, "post_id": 49644377, "comment_id": 86296707, "body": "this should not be asked at stack overflow."}, {"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 2, "creation_date": 1522824946, "post_id": 49644377, "comment_id": 86297011, "body": "just deleting the folder should be fine, if you installed any gems and would like to get rid of them, you need to uninstall them manually"}], "answers": [{"tags": [], "owner": {"reputation": 192, "user_id": 2797137, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6c6262d27878fd8184d1a0fc83ffa174?s=128&d=identicon&r=PG&f=1", "display_name": "DTavaszi", "link": "https://stackoverflow.com/users/2797137/dtavaszi"}, "is_accepted": true, "score": 3, "last_activity_date": 1522829682, "creation_date": 1522829682, "answer_id": 49645941, "question_id": 49644377, "link": "https://stackoverflow.com/questions/49644377/is-it-ok-if-i-just-delete-a-rails-app-directory-will-it-leave-any-traces-behind/49645941#49645941", "title": "Is it ok if I just delete a rails app directory? Will it leave any traces behind on the system?", "body": "<p>Besides the <strong>local files</strong>, you may have created a <strong>database</strong> and installed some <strong>gems</strong>. </p>\n\n<p>To remove unused gems, run <code>gem cleanup</code>.</p>\n\n<p>To purge the database, use <code>rake db:drop</code> in the project folder.</p>\n\n<p>Files generated using <code>rails new</code> are local, and will be fully removed when you delete the folder. Running the command shows you which files were created.</p>\n\n<pre><code>$ rails new commandsapp\n     create\n     create  README.md\n     create  Rakefile\n     create  config.ru\n     create  .gitignore\n     create  Gemfile\n     create  app\n     ...\n     create  tmp/cache\n     ...\n        run  bundle install\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 2924562, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9CbKx.jpg?s=128&g=1", "display_name": "Am33d", "link": "https://stackoverflow.com/users/2924562/am33d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 49645941, "answer_count": 1, "score": 1, "last_activity_date": 1522829682, "creation_date": 1522823994, "question_id": 49644377, "link": "https://stackoverflow.com/questions/49644377/is-it-ok-if-i-just-delete-a-rails-app-directory-will-it-leave-any-traces-behind", "title": "Is it ok if I just delete a rails app directory? Will it leave any traces behind on the system?", "body": "<p>I just created some sample apps by running    </p>\n\n<pre><code>rails new \n</code></pre>\n\n<p>command and then deleted the directory in which I created them after my work was done. Do I have to run some other command(s) to delete all the traces which rails could have left behind?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "postgresql"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1522825460, "post_id": 49644182, "comment_id": 86297334, "body": "You could do it <a href=\"https://stackoverflow.com/q/1743439/479863\">inside the database</a> in <a href=\"https://dba.stackexchange.com/a/110581/5359\">various ways</a> and then handle the exception in Rails. A bit of <a href=\"https://www.google.ca/search?q=postgresql+constraint+number+of+rows\" rel=\"nofollow noreferrer\">googling on constraints</a> might be useful."}], "owner": {"reputation": 444, "user_id": 1103090, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/49abd075ec7640ab12660a8d97027364?s=128&d=identicon&r=PG", "display_name": "Edward", "link": "https://stackoverflow.com/users/1103090/edward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1522824129, "creation_date": 1522823189, "question_id": 49644182, "link": "https://stackoverflow.com/questions/49644182/rails-5-limiting-has-many-children", "title": "rails 5 limiting has_many children", "body": "<p>How can I limit the amount of child records that a parent record can have?</p>\n\n<p>A lot of the existing answers (for example: <a href=\"https://stackoverflow.com/questions/2263267/limit-number-of-objects-in-has-many-association\">Limit number of objects in has_many association</a>) seem to not consider potential race conditions (such as hurikhan77's answer) and try to implement the check in application-level code via a validation.</p>\n\n<p>Would a table-level lock (EXCLUSIVE) be the correct solution or am I overlooking something?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "rails-activerecord"], "comments": [{"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1522820187, "post_id": 49643489, "comment_id": 86294570, "body": "If you are building filter or search functionality, please go with my this answer <a href=\"https://stackoverflow.com/a/44816633/5117953\">stackoverflow.com/a/44816633/5117953</a>"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1522820842, "post_id": 49643489, "comment_id": 86294834, "body": "@SimpleLime is right: <code>q = M.where(a, b)</code>, <code>q = M.where(a).where(b)</code>, and <code>q = M.where(a); q = q.where(b)</code> are equivalent for queries like yours. And <code>q</code> won&#39;t hit the database until you try to read rows from it."}, {"owner": {"reputation": 1308, "user_id": 3759158, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/70BLw.jpg?s=128&g=1", "display_name": "Manishh", "link": "https://stackoverflow.com/users/3759158/manishh"}, "edited": false, "score": 0, "creation_date": 1522820925, "post_id": 49643489, "comment_id": 86294865, "body": "sorry I know this doesn&#39;t relate but still asking what if user provide nothing? are you willing to give any data?"}, {"owner": {"reputation": 3351, "user_id": 2731253, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf88a5179da66f2e54012dd30b6f31cb?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/2731253/james"}, "reply_to_user": {"reputation": 1308, "user_id": 3759158, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/70BLw.jpg?s=128&g=1", "display_name": "Manishh", "link": "https://stackoverflow.com/users/3759158/manishh"}, "edited": false, "score": 0, "creation_date": 1522820999, "post_id": 49643489, "comment_id": 86294906, "body": "@Manishh oh there&#39;s validation before this that says the user must provide one of the two. but i suppose to further the example, I would like a world where if no params were provided, no data comes back"}], "answers": [{"comments": [{"owner": {"reputation": 3351, "user_id": 2731253, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf88a5179da66f2e54012dd30b6f31cb?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/2731253/james"}, "edited": false, "score": 0, "creation_date": 1522821719, "post_id": 49643715, "comment_id": 86295256, "body": "how would you change this to meet the hypothetical situation where if no params are passed nothing is returned? or is that possible?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 3351, "user_id": 2731253, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf88a5179da66f2e54012dd30b6f31cb?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/2731253/james"}, "edited": false, "score": 0, "creation_date": 1522822049, "post_id": 49643715, "comment_id": 86295392, "body": "@james in that case you&#39;d use <code>@products = Product.none</code>. And instead of <code>Product.where(nil)</code> you can also use <code>Product.all</code> to get a blank scope."}, {"owner": {"reputation": 1308, "user_id": 3759158, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/70BLw.jpg?s=128&g=1", "display_name": "Manishh", "link": "https://stackoverflow.com/users/3759158/manishh"}, "reply_to_user": {"reputation": 3351, "user_id": 2731253, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf88a5179da66f2e54012dd30b6f31cb?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/2731253/james"}, "edited": false, "score": 0, "creation_date": 1522827531, "post_id": 49643715, "comment_id": 86298662, "body": "@james I think this is business call you should confirm once what need to be done in that case. Whatever is the requirement you need to do accordingly."}, {"owner": {"reputation": 3351, "user_id": 2731253, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf88a5179da66f2e54012dd30b6f31cb?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/2731253/james"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1522859467, "post_id": 49643715, "comment_id": 86321092, "body": "@Stefan it looks like if you use <code>Product.all</code>, same thing as <code>Product.where(nil)</code>, where <code>@products</code> will always contain all the products, so if no params were passed, I&#39;m still stuck with all products. On the other hand using <code>Product.none</code> does provide 0 products, but now even if params are passed, I can&#39;t build anything else going forward, because a query on nothing returns nothing. Guess there&#39;s no way to do this?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 3351, "user_id": 2731253, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf88a5179da66f2e54012dd30b6f31cb?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/2731253/james"}, "edited": false, "score": 0, "creation_date": 1522875884, "post_id": 49643715, "comment_id": 86330374, "body": "@james use an <code>if-else</code> construct. Check whether <code>params</code> contains <code>:created_at</code> or <code>:status_id</code>. If it does, use <code>@items = Item.all</code> and refine the query via <code>@items = @items.where(...)</code>. Otherwise, use <code>@items = Item.none</code>"}, {"owner": {"reputation": 3351, "user_id": 2731253, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf88a5179da66f2e54012dd30b6f31cb?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/2731253/james"}, "edited": false, "score": 0, "creation_date": 1522881636, "post_id": 49643715, "comment_id": 86332821, "body": "i&#39;ll just keep my validation, thnks!"}], "tags": [], "owner": {"reputation": 1308, "user_id": 3759158, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/70BLw.jpg?s=128&g=1", "display_name": "Manishh", "link": "https://stackoverflow.com/users/3759158/manishh"}, "is_accepted": true, "score": 0, "last_activity_date": 1522821101, "creation_date": 1522821101, "answer_id": 49643715, "question_id": 49643489, "link": "https://stackoverflow.com/questions/49643489/activerecord-how-to-use-where-only-if-the-parameter-youre-querying-has-been-pas/49643715#49643715", "title": "ActiveRecord how to use Where only if the parameter you&#39;re querying has been passed?", "body": "<pre><code>def index\n  @products = Product.where(nil) # creates an anonymous scope\n  @products = @products.status(params[:status]) if params[:status].present?\n  @products = @products.location(params[:location]) if params[:location].present?\n  @products = @products.starts_with(params[:starts_with]) if params[:starts_with].present?\nend\n</code></pre>\n\n<p>You can do something like this. Rails is smart in order to identify when it need to build query ;)</p>\n\n<p>You might be interested in checking <a href=\"https://www.justinweiss.com/articles/search-and-filter-rails-models-without-bloating-your-controller/\" rel=\"nofollow noreferrer\">this blog</a> It was very useful for me and can also be for you. </p>\n"}, {"comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1522822667, "post_id": 49644010, "comment_id": 86295668, "body": "String interpolation without any attempt at quoting? What&#39;s wrong with <code>{ status: params[:status] } unless...</code> and <code>[&#39;created_at &gt;= ?&#39;, Time.parse(...)]</code> unless...`?"}], "tags": [], "owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "is_accepted": false, "score": 0, "last_activity_date": 1522823135, "last_edit_date": 1522823135, "creation_date": 1522822404, "answer_id": 49644010, "question_id": 49643489, "link": "https://stackoverflow.com/questions/49643489/activerecord-how-to-use-where-only-if-the-parameter-youre-querying-has-been-pas/49644010#49644010", "title": "ActiveRecord how to use Where only if the parameter you&#39;re querying has been passed?", "body": "<p>If you read <a href=\"https://apidock.com/rails/ActiveRecord/QueryMethods/where\" rel=\"nofollow noreferrer\">#where</a> documentation, you can see option to pass <code>nil</code> to where clause.</p>\n\n<blockquote>\n  <p>blank condition : \n  If the condition is any blank-ish object, then #where is a no-op and returns the current relation.</p>\n</blockquote>\n\n<p>This gives us option to pass conditions if valid or just return nil will produce previous relation itself.</p>\n\n<pre><code>@items = Item.where(status_condition).where(created_at_condition)\n\nprivate\n\ndef status_condition\n  ['status = ?', params[:status]] unless params[:status].blank?\nend\n\ndef created_at_condition\n  ['created_at &gt;= ?', Time.parse(params[:created_at])] unless params[:created_at].blank?\nend\n</code></pre>\n\n<p>This would be another option to achieve the desired result. Hope this helps !</p>\n"}], "owner": {"reputation": 3351, "user_id": 2731253, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf88a5179da66f2e54012dd30b6f31cb?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/2731253/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 49643715, "answer_count": 2, "score": 0, "last_activity_date": 1522823135, "creation_date": 1522820036, "question_id": 49643489, "link": "https://stackoverflow.com/questions/49643489/activerecord-how-to-use-where-only-if-the-parameter-youre-querying-has-been-pas", "title": "ActiveRecord how to use Where only if the parameter you&#39;re querying has been passed?", "body": "<p>I'm running a query like the below:</p>\n\n<pre><code>Item.where(\"created_at &gt;=?\", Time.parse(params[:created_at])).where(status_id: params[:status_id])\n</code></pre>\n\n<p>...where the user can decide to NOT provide a parameter, in which case it should be excluded from the query entirely. For example, if the user decides to not pass a <code>created_at</code> and not submit it, I want to run the following:</p>\n\n<pre><code>Item.where(status_id: params[:status_id])\n</code></pre>\n\n<p>I was thinking even if you had a <code>try</code> statement like <code>Time.try(:parse, params[:created_at])</code>, if <code>params[created_at]</code> were empty, then the query would be <code>.where(created_at &gt;= ?\", nil)</code> which would NOT be the intent at all. Same thing with <code>params[:status_id]</code>, if the user just didn't pass it, you'd have a query that's <code>.where(status_id:nil)</code> which is again not appropriate, because that's a valid query in itself!</p>\n\n<p>I suppose you can write code like this:</p>\n\n<pre><code>if params[:created_at].present?\n  @items = Item.where(\"created_at &gt;= ?\", Time.parse(params[:created_at])\nend\nif params[:status_id].present?\n  @items = @items.where(status_id: params[:status_id])\nend\n</code></pre>\n\n<p>However, this is less efficient with multiple db calls, and I'm trying to be more efficient. Just wondering if possible. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "spree"], "comments": [{"owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "edited": false, "score": 0, "creation_date": 1522819651, "post_id": 49643344, "comment_id": 86294364, "body": "<code>update_cart_path </code> is not a function in any controller. It is the path rails construct based on your <code>routes</code> configuration. Do run <code>rake routes</code> to get full list of controller path and respective controller with actions."}, {"owner": {"reputation": 201, "user_id": 7666165, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/SakmP.jpg?s=128&g=1", "display_name": "Cliff_Cleet", "link": "https://stackoverflow.com/users/7666165/cliff-cleet"}, "reply_to_user": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "edited": false, "score": 0, "creation_date": 1522820451, "post_id": 49643344, "comment_id": 86294670, "body": "@AshikSalman, I have updated my question with routes.rb file.."}], "answers": [{"comments": [{"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "reply_to_user": {"reputation": 201, "user_id": 7666165, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/SakmP.jpg?s=128&g=1", "display_name": "Cliff_Cleet", "link": "https://stackoverflow.com/users/7666165/cliff-cleet"}, "edited": false, "score": 0, "creation_date": 1522820667, "post_id": 49643416, "comment_id": 86294758, "body": "@Cliffs incase if you are using spree gem you need to clone spree code and there you will see this action and controller and incase you want to this action and controller in your project then you will need to create a decorator of that controller and action."}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "reply_to_user": {"reputation": 201, "user_id": 7666165, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/SakmP.jpg?s=128&g=1", "display_name": "Cliff_Cleet", "link": "https://stackoverflow.com/users/7666165/cliff-cleet"}, "edited": false, "score": 0, "creation_date": 1522820728, "post_id": 49643416, "comment_id": 86294788, "body": "@Cliffs just clone it <code>git@github.com:spree&#47;spree.git</code> you will see here."}, {"owner": {"reputation": 201, "user_id": 7666165, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/SakmP.jpg?s=128&g=1", "display_name": "Cliff_Cleet", "link": "https://stackoverflow.com/users/7666165/cliff-cleet"}, "edited": false, "score": 0, "creation_date": 1522821237, "post_id": 49643416, "comment_id": 86295016, "body": "It has been already cloned with the spree code and have a order_controller_decorator.rb file as , <a href=\"https://github.com/spree/spree/blob/master/frontend/app/controllers/spree/orders_controller.rb\" rel=\"nofollow noreferrer\">github.com/spree/spree/blob/master/frontend/app/controllers/&zwnj;&#8203;&hellip;</a>"}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "reply_to_user": {"reputation": 201, "user_id": 7666165, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/SakmP.jpg?s=128&g=1", "display_name": "Cliff_Cleet", "link": "https://stackoverflow.com/users/7666165/cliff-cleet"}, "edited": false, "score": 0, "creation_date": 1522822207, "post_id": 49643416, "comment_id": 86295460, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/168175/discussion-between-gabbar-and-cliffs\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "is_accepted": false, "score": 1, "last_activity_date": 1522819658, "creation_date": 1522819658, "answer_id": 49643416, "question_id": 49643344, "link": "https://stackoverflow.com/questions/49643344/form-url-in-ruby-on-rails/49643416#49643416", "title": "Form url in Ruby on rails", "body": "<p>Go to your console and run</p>\n\n<pre><code>rake routes\n</code></pre>\n\n<p>you will see all routes like this: </p>\n\n<pre><code>prefix      verb  URL        crontroller#action\nupdate_cart patch /your/url  carts#update\n            put   /your/url  carts#update\n</code></pre>\n\n<p>in this way you will get to know what is this url for and for which action and which controller. alternatively you can also check your <code>config/routes.rb</code>.</p>\n\n<p>hope this will help you.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9595038"}, "is_accepted": false, "score": 0, "last_activity_date": 1522827831, "creation_date": 1522827831, "answer_id": 49645429, "question_id": 49643344, "link": "https://stackoverflow.com/questions/49643344/form-url-in-ruby-on-rails/49645429#49645429", "title": "Form url in Ruby on rails", "body": "<p>If you want to customize spree behavior you have two options:</p>\n\n<p><strong>1)</strong> For example, if we have a controller file named:</p>\n\n<pre><code>test_controller.rb\n</code></pre>\n\n<p>then decorator file name would be:</p>\n\n<pre><code>test_controller_decorator.rb\n</code></pre>\n\n<p>So, if we have following controller from Spree:</p>\n\n<pre><code>\\app\\controllers\\spree\\products_controller.rb\n</code></pre>\n\n<p>we can create following decorator in our project:</p>\n\n<pre><code>\\app\\controllers\\spree\\products_controller_decorator.rb\n</code></pre>\n\n<p>Now, we add following code:</p>\n\n<pre><code>module Spree\n  Spree::ProductsController.class_eval do\n\n     # copy and paste existing actions here and customize\n\n  end\nend\n</code></pre>\n\n<p><strong>2)</strong> Create the same file in the same directory and copy/paste from the source code and customize.</p>\n\n<p>The file you are looking for is here: <a href=\"http://%20spree/frontend/config/routes.rb\" rel=\"nofollow noreferrer\">https://github.com/spree/spree/blob/master/frontend/config/routes.rb</a></p>\n"}], "owner": {"reputation": 201, "user_id": 7666165, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/SakmP.jpg?s=128&g=1", "display_name": "Cliff_Cleet", "link": "https://stackoverflow.com/users/7666165/cliff-cleet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1522827831, "creation_date": 1522819294, "last_edit_date": 1592644375, "question_id": 49643344, "link": "https://stackoverflow.com/questions/49643344/form-url-in-ruby-on-rails", "title": "Form url in Ruby on rails", "body": "<p>In my ruby application there is a form in the cart page for checkout .</p>\n<pre><code>= form_for @order, url: update_cart_path, html: { id: 'update-cart', class: 'edit-cart'} do |order_form|\n\n\n    %div{ data: { hook: 'inside_cart_form'}}\n    %div{ data: { hook: 'cart_items' }, style: 'margin-bottom: 20px' }\n    = render :partial =&gt; 'form', :locals =&gt; { :order_form =&gt; order_form }\n    ----------\n    ----------\n    ----------\n    .row\n    .col-sm-4\n    = button_tag class: 'btn btn-primary btn-block', id: 'checkout-link', name: 'checkout' do\n    = Spree.t(:checkout)\n</code></pre>\n<p>Here, the form url is given as 'update_cart_path', But i cannot found a function named like this in the controller ...</p>\n<p>I am newbie in ruby..</p>\n<p>Please help me to solve this issue ...</p>\n<h1>config/routes.rb</h1>\n<pre><code>xxxxx::Application.routes.draw do\n  # We ask that you don't use the :as option here, as Spree relies on it being the default of &quot;spree&quot;\n  mount Spree::Core::Engine, at: '/'\n  mount MailPreview, at: 'mail_view' if Rails.env.development?\n\n  Spree::Core::Engine.routes.draw do\n    get  'measure' =&gt; 'home#measure'\n    get  'about' =&gt; 'home#about'\n    get  'sizes' =&gt; 'orders#sizes'\n    get  'paypal' =&gt; 'paypal#express', as: :express_paypal\n    get '/products/:id/:variant_name' =&gt; 'products#show', as: :product_variant_detail\n\n    resources :variants, only: [] do\n      get :carousel\n      get :description\n    end\n\n    resources :orders do\n      member do\n        post 'increase', defaults: { format: 'json' }\n        post 'decrease', defaults: { format: 'json' }\n      end\n      collection do\n        put 'add_coupon_code'\n      end\n    end\n\n    namespace :admin do\n      resources :blog_entries, only: [] do\n        resources :blog_entry_images, except: [:index, :show]\n      end\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["c#", "ruby-on-rails", "ruby", "c#-4.0"], "comments": [{"owner": {"reputation": 105321, "user_id": 14357, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/SfY0b.png?s=128&g=1", "display_name": "spender", "link": "https://stackoverflow.com/users/14357/spender"}, "edited": false, "score": 0, "creation_date": 1522814566, "post_id": 49642440, "comment_id": 86292629, "body": "<b><i>&quot;after uncommenting the file operation&quot;</i></b>? Which file operation? Where, specifically, in your code? <b><i>&quot;it fails&quot;</i></b>? How? What error messages etc.? Which line?"}, {"owner": {"reputation": 921, "user_id": 1667568, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6e5109458dedf2ea656ab9caf3e2a130?s=128&d=identicon&r=PG", "display_name": "Giri", "link": "https://stackoverflow.com/users/1667568/giri"}, "reply_to_user": {"reputation": 105321, "user_id": 14357, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/SfY0b.png?s=128&g=1", "display_name": "spender", "link": "https://stackoverflow.com/users/14357/spender"}, "edited": false, "score": 0, "creation_date": 1522815276, "post_id": 49642440, "comment_id": 86292853, "body": "I have updated the post"}], "answers": [{"comments": [{"owner": {"reputation": 921, "user_id": 1667568, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6e5109458dedf2ea656ab9caf3e2a130?s=128&d=identicon&r=PG", "display_name": "Giri", "link": "https://stackoverflow.com/users/1667568/giri"}, "edited": false, "score": 0, "creation_date": 1522824736, "post_id": 49643490, "comment_id": 86296873, "body": "No.. it did not work... I have also tried &quot;C:/Users/xxxxx/Downloads/ACN_Demo/sa.rb&quot;"}], "tags": [], "owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "is_accepted": false, "score": 0, "last_activity_date": 1522826247, "last_edit_date": 1522826247, "creation_date": 1522820038, "answer_id": 49643490, "question_id": 49642440, "link": "https://stackoverflow.com/questions/49642440/issue-running-exe-rb-using-c/49643490#49643490", "title": "Issue running .exe/.rb using C#", "body": "<p>Try changing the argument to match Ruby's style of paths.</p>\n\n<pre><code>rubyProc.Arguments = \"C:/Users/xxxxx/Downloads/ACN_Demo/sa.exe\"\n</code></pre>\n"}], "owner": {"reputation": 921, "user_id": 1667568, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6e5109458dedf2ea656ab9caf3e2a130?s=128&d=identicon&r=PG", "display_name": "Giri", "link": "https://stackoverflow.com/users/1667568/giri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522912626, "creation_date": 1522813691, "last_edit_date": 1522912626, "question_id": 49642440, "link": "https://stackoverflow.com/questions/49642440/issue-running-exe-rb-using-c", "title": "Issue running .exe/.rb using C#", "body": "<p>I am using below C# code to execute .exe/.rb and it works(Result: C# code initiate the .rb file and then the rb initiate the browser and launches into google).</p>\n\n<pre><code>using (Process p = new Process()) { \n                ProcessStartInfo rubyProc = new ProcessStartInfo(\"ruby\"); \n                rubyProc.Arguments = \"C:\\\\Users\\\\xxxx\\\\Downloads\\\\ACN_Demo\\\\sa.exe\"; \n                // set args \n                rubyProc.RedirectStandardInput = true; \n                rubyProc.RedirectStandardOutput = true; \n                rubyProc.UseShellExecute = false; \n                p.StartInfo = rubyProc; \n                p.Start(); \n                // process output \n                string output = p.StandardOutput.ReadToEnd(); \n                p.WaitForExit();\n                p.Close(); \n                //p.Kill(); \n            }\n</code></pre>\n\n<p>and here is the .rb file content,</p>\n\n<pre><code>puts \"0\"\nbegin\nrequire 'watir'\nrescue Exception =&gt; e\nputs \"Exception: #{e}\\n\"\nputs e.backtrace.join(\"\\n\\t\")\nend\n\nbegin\n\nputs \"1\"\n#fout = \"result.txt\"\nputs \"2\"\n#File.open(fout, 'w') do |f|\n\nputs \"3\"\nbegin\nbr = Watir::Browser.new :ie\nputs \"4\"\nbr.goto \"https://google.com/\"\nbr.wait\nputs \"5\"\n#  f.write \"Loaded the initial page. Terminating the program now...\"\nputs \"6\"\nsleep 3\nbr.close\nrescue Exception =&gt; e\n# f.write \"Exception: #{e}\\n\"\n# f.write e.backtrace.join(\"\\n\\t\")\nend\n\n# f.write \"EOF\\n\"\n#end\nrescue Exception =&gt; e\nputs \"Exception: #{e}\\n\"\nputs e.backtrace.join(\"\\n\\t\")\nend\nputs \"EOF\"\ngets\n</code></pre>\n\n<p>But when I try to use the same C# code to execute the below rb code it fails(Result: C# code initiate the .rb file and then the rb did not do anything, output file is not created neither the browser launch to google).. </p>\n\n<p>Basically in the below rb code I have added logic to write the output to the .txt file. Directly executing the rb works but not through C#.</p>\n\n<pre><code>puts \"0\"\nbegin\nrequire 'watir'\nrescue Exception =&gt; e\nputs \"Exception: #{e}\\n\"\nputs e.backtrace.join(\"\\n\\t\")\nend\n\nbegin\n\nputs \"1\"\nfout = \"result.txt\"\nputs \"2\"\nFile.open(fout, 'w') do |f|\n\nputs \"3\"\nbegin\nbr = Watir::Browser.new :ie\nputs \"4\"\nbr.goto \"https://google.com/\"\nbr.wait\nputs \"5\"\nf.write \"Loaded the initial page. Terminating the program now...\"\nputs \"6\"\nsleep 3\nbr.close\nrescue Exception =&gt; e\nf.write \"Exception: #{e}\\n\"\nf.write e.backtrace.join(\"\\n\\t\")\nend\n\nf.write \"EOF\\n\"\nend\nrescue Exception =&gt; e\nputs \"Exception: #{e}\\n\"\nputs e.backtrace.join(\"\\n\\t\")\nend\nputs \"EOF\"\ngets\n</code></pre>\n\n<p>Am I missing something? Please help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 271, "user_id": 6929856, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b914dd226ff7b648e0820d82dcd6a02e?s=128&d=identicon&r=PG&f=1", "display_name": "ankur", "link": "https://stackoverflow.com/users/6929856/ankur"}, "reply_to_user": {"reputation": 26589, "user_id": 1032785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/30816b3d787c2bd9d6f036318304f225?s=128&d=identicon&r=PG", "display_name": "jordanm", "link": "https://stackoverflow.com/users/1032785/jordanm"}, "edited": false, "score": 0, "creation_date": 1522813931, "post_id": 49642433, "comment_id": 86292453, "body": "You didn&#39;t read my question properly. The link which you have provided in that it will return me true or false only. It won&#39;t return me the specific key which is missing inside my hash"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1522814677, "post_id": 49642433, "comment_id": 86292668, "body": "If <code>h</code> is your hash, is &#39;[&#39;from&#39;, &#39;subject&#39;, &#39;to&#39;, &#39;body&#39;] - h.keys` what you want?"}, {"owner": {"reputation": 271, "user_id": 6929856, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b914dd226ff7b648e0820d82dcd6a02e?s=128&d=identicon&r=PG&f=1", "display_name": "ankur", "link": "https://stackoverflow.com/users/6929856/ankur"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1522825475, "post_id": 49642433, "comment_id": 86297345, "body": "@CarySwoveland - Sorry My bad I didn&#39;t check the 2nd example It is working thanks"}], "answers": [{"tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": true, "score": 3, "last_activity_date": 1522817927, "last_edit_date": 1522817927, "creation_date": 1522814493, "answer_id": 49642551, "question_id": 49642433, "link": "https://stackoverflow.com/questions/49642433/find-missing-key-in-hash/49642551#49642551", "title": "Find missing key in hash", "body": "<p>You can make use of the <a href=\"https://ruby-doc.org/core/Hash.html#method-i-keys\" rel=\"nofollow noreferrer\"><code>Hash#keys</code></a> method</p>\n\n<pre><code>REQUIRED_KEYS = %w(from subject to body)\nhash = {\n  \"from\"=&gt;\"abc@gmail.com\", \n  \"to\"=&gt;\"def@gmail.com:ijk@gmail.com:lmn@gmail.com\", \n  \"subject\"=&gt;\"hi\", \n  \"body\"=&gt;\"there\", \n  \"cc\" =&gt; \"def@gmail.com:ijk@gmail.com\", \n  \"bcc\" =&gt; \"def@gmail.com:ijk@gmail.com\"\n}\n\nREQUIRED_KEYS - hash.keys\n#=&gt; []\n\nhash.delete('to')\n#=&gt; \"def@gmail.com:ijk@gmail.com:lmn@gmail.com\"\n\nREQUIRED_KEYS - hash.keys\n#=&gt; [\"to\"]\n</code></pre>\n"}], "owner": {"reputation": 271, "user_id": 6929856, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b914dd226ff7b648e0820d82dcd6a02e?s=128&d=identicon&r=PG&f=1", "display_name": "ankur", "link": "https://stackoverflow.com/users/6929856/ankur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 535, "favorite_count": 0, "closed_date": 1522817970, "accepted_answer_id": 49642551, "answer_count": 1, "score": 0, "last_activity_date": 1522817927, "creation_date": 1522813635, "last_edit_date": 1522814063, "question_id": 49642433, "link": "https://stackoverflow.com/questions/49642433/find-missing-key-in-hash", "closed_reason": "Duplicate", "title": "Find missing key in hash", "body": "<p>I am stuck in a situation where I need to find missing key in the hash. But the problem is key is not certain it can be any key out of certain keys.</p>\n\n<p>For example</p>\n\n<pre><code> {\"from\"=&gt;\"abc@gmail.com\", \"to\"=&gt;\"def@gmail.com:ijk@gmail.com:lmn@gmail.com\", \"subject\"=&gt;\"hi\", \"body\"=&gt;\"there\", \"cc\" =&gt; \"def@gmail.com:ijk@gmail.com\", \"bcc\" =&gt; \"def@gmail.com:ijk@gmail.com\"}\n</code></pre>\n\n<p>Missing keys can be from, subject, to, body but not cc and bcc. So I need to find out which of the keys are missing in a hash in order to return the specific key to the user. I cannot do this at the model level\n<a href=\"https://stackoverflow.com/questions/11552490/check-if-a-hashs-keys-include-all-of-a-set-of-keys\">This solution</a> provided in this link is not helpful because it is just returning me true or false. Instead of that, I need the missing keys which are not present in my hash</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "serialization"], "answers": [{"tags": [], "owner": {"reputation": 26589, "user_id": 1032785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/30816b3d787c2bd9d6f036318304f225?s=128&d=identicon&r=PG", "display_name": "jordanm", "link": "https://stackoverflow.com/users/1032785/jordanm"}, "is_accepted": true, "score": 2, "last_activity_date": 1522814023, "creation_date": 1522814023, "answer_id": 49642479, "question_id": 49642257, "link": "https://stackoverflow.com/questions/49642257/serializer-nested-associations-include-only-certain-attributes/49642479#49642479", "title": "Serializer nested associations include only certain attributes", "body": "<p>You can accomplish this by also specifying a serializer for student. Here is an example:</p>\n\n<pre><code>class RegistrationSerializer &lt; ActiveModel::Serializer\n attributes :id, :status\n has_one :student, serializer: StudentSerializerFirstNameOnly\n has_one :professor\n has_one :course\nend\n\nclass StudentSerializerFirstNameOnly &lt; ActiveModel::Serializer\n attributes :first_name\nend\n</code></pre>\n\n<p>An alternative would be to flatten the data and have the student first name as a top level attribute:</p>\n\n<pre><code>class RegistrationSerializer &lt; ActiveModel::Serializer\n attributes :id, :status, :student_first_name\n has_one :professor\n has_one :course\n\n def student_first_name\n   object.student.first_name\n end\nend\n</code></pre>\n"}], "owner": {"reputation": 150, "user_id": 9094578, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oEJ6n.jpg?s=128&g=1", "display_name": "Cory Baker", "link": "https://stackoverflow.com/users/9094578/cory-baker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 49642479, "answer_count": 1, "score": 1, "last_activity_date": 1522814023, "creation_date": 1522812294, "question_id": 49642257, "link": "https://stackoverflow.com/questions/49642257/serializer-nested-associations-include-only-certain-attributes", "title": "Serializer nested associations include only certain attributes", "body": "<p>My serializer looks like this:</p>\n\n<pre><code>class RegistrationSerializer &lt; ActiveModel::Serializer\n attributes :id, :status\n has_one :student\n has_one :professor\n has_one :course\nend\n</code></pre>\n\n<p>Instead of returning all of the student data, I would like to do something like this:</p>\n\n<pre><code>class RegistrationSerializer &lt; ActiveModel::Serializer\n attributes :id, :status\n has_one :student [//only include :first_name]\n has_one :professor\n has_one :course\nend\n</code></pre>\n\n<p>I dont want to edit student serializer directly because in other cases I will need all of the data.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "permissions", "roles", "rolify"], "answers": [{"tags": [], "owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "is_accepted": false, "score": 1, "last_activity_date": 1522819116, "creation_date": 1522819116, "answer_id": 49643315, "question_id": 49642160, "link": "https://stackoverflow.com/questions/49642160/is-there-a-way-to-use-the-rolify-gem-in-a-multi-tenant-setup/49643315#49643315", "title": "Is there a way to use the Rolify gem in a multi-tenant setup?", "body": "<p>You can add a role to a particular instance as follows:</p>\n\n<pre><code>note = Notes.where(account_id: params[:account_id].first\nuser.add_role(:moderator, note)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1011, "user_id": 973852, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bbfb8bf7d670ce307ecaf2ba65bd263f?s=128&d=identicon&r=PG", "display_name": "cseelus", "link": "https://stackoverflow.com/users/973852/cseelus"}, "is_accepted": false, "score": 0, "last_activity_date": 1575401951, "creation_date": 1575401951, "answer_id": 59164237, "question_id": 49642160, "link": "https://stackoverflow.com/questions/49642160/is-there-a-way-to-use-the-rolify-gem-in-a-multi-tenant-setup/59164237#59164237", "title": "Is there a way to use the Rolify gem in a multi-tenant setup?", "body": "<p>We have a multi-tenant Rails app in production that uses Acts As Tenant and Rolify for a use case like you described. There are <code>User</code> accounts, which are independent from any tenant, each user can have multiple <code>Membership</code>s, thus be a member of multiple tenants. </p>\n\n<p>Each users memberships can have individual roles. For the lower ranking roles, we needed to allow access to only certain instances that more privileged members can assign to them.</p>\n\n<p>A good multi-tenant gem should take care of scoping all Rails models that you want to only one specific organization and prevent any member from organization A to access data from organization B. So there really should be no need to use something like <code>params[:account_id]</code> manually, when you want define a role scoped to a resource instance.</p>\n"}], "owner": {"reputation": 2902, "user_id": 523051, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/497825ebbcb0e06c2451d3ff91d644b2?s=128&d=identicon&r=PG", "display_name": "chrickso", "link": "https://stackoverflow.com/users/523051/chrickso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1575401951, "creation_date": 1522811747, "question_id": 49642160, "link": "https://stackoverflow.com/questions/49642160/is-there-a-way-to-use-the-rolify-gem-in-a-multi-tenant-setup", "title": "Is there a way to use the Rolify gem in a multi-tenant setup?", "body": "<p>I like the Rolify (<a href=\"https://github.com/RolifyCommunity/rolify\" rel=\"nofollow noreferrer\">https://github.com/RolifyCommunity/rolify</a>) API and would like to use it in my app but am having an issue finding anything in it's docs or tutorials that would allow me to define a role scoped to both a params[:account_id] &amp;&amp; a resource instance. Has anyone used Rolify in such a way and could offer an advise on how to set this up?</p>\n\n<p>Ideally this would look something like</p>\n\n<pre><code>user.add_role :moderator, Notes.where(account_id: params[:account_id])\n</code></pre>\n"}, {"tags": ["ruby", "caesar-cipher"], "comments": [{"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 1, "creation_date": 1522809462, "post_id": 49641536, "comment_id": 86291331, "body": "Which like is causing the error? Really, with so few lines that can&#39;t be hard to determine. It&#39;s called debugging, a very important skill."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1522823881, "post_id": 49641536, "comment_id": 86296346, "body": "Please, construct a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. I am pretty sure that you don&#39;t require 22 lines to demonstrate your problem. For example, I am willing to bet that <code>puts</code> is irrelevant to your question. Also, please give a better description of your problem than &quot;word not changing&quot;. What is it that you expect to happen? Why do you expect that to happen? What happens instead? What is the difference? Why is that difference important?"}], "answers": [{"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 0, "last_activity_date": 1522810378, "creation_date": 1522810378, "answer_id": 49641990, "question_id": 49641536, "link": "https://stackoverflow.com/questions/49641536/ruby-caesar-cipher-not-changing-the-word/49641990#49641990", "title": "Ruby Caesar Cipher not changing the word", "body": "<p>Your <code>ALPHABET</code> array only contains uppercase letters, thus your corresponding method only accounts for uppercase letters. You need to update <code>ALPHABET</code> to contain lowercase letters and then your code will work as expected.</p>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 8565234, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-SjylLIZ6P40/AAAAAAAAAAI/AAAAAAAAE5s/CpdHJkt3mFE/photo.jpg?sz=128", "display_name": "Austin Larson", "link": "https://stackoverflow.com/users/8565234/austin-larson"}, "edited": false, "score": 0, "creation_date": 1522861813, "post_id": 49642244, "comment_id": 86322441, "body": "Thanks so much! I didn&#39;t realize it was case sensitive like that"}], "tags": [], "owner": {"reputation": 61, "user_id": 8835315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dba835872a831f07c2b4c67e90aa92d7?s=128&d=identicon&r=PG&f=1", "display_name": "David E.", "link": "https://stackoverflow.com/users/8835315/david-e"}, "is_accepted": true, "score": 3, "last_activity_date": 1522812238, "creation_date": 1522812238, "answer_id": 49642244, "question_id": 49641536, "link": "https://stackoverflow.com/questions/49641536/ruby-caesar-cipher-not-changing-the-word/49642244#49642244", "title": "Ruby Caesar Cipher not changing the word", "body": "<p>You don't necessarily need to declare a constant <code>ALPHABET</code> but you can if you want. The <code>tr</code> method copies a String object and then it will replace characters in the String with specified characters. As mentioned, you're only saying to check for capital letters and replace those but you're taking a word and making it downcase:</p>\n\n<pre><code>word = gets.chomp.to_s.downcase\n</code></pre>\n\n<p>You can modify your method like this:</p>\n\n<pre><code>class String\n\ndef caeser_cipher(num)\n    self.tr('a-z',(\"a\"..\"z\").to_a.rotate(num).join)\nend\n</code></pre>\n\n<p>Now, you get the encrypted string (which you can always convert to upcase if you want):</p>\n\n<pre><code>\"hello\".caeser_cipher(8)\n=&gt; \"pmttw\"\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 8565234, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-SjylLIZ6P40/AAAAAAAAAAI/AAAAAAAAE5s/CpdHJkt3mFE/photo.jpg?sz=128", "display_name": "Austin Larson", "link": "https://stackoverflow.com/users/8565234/austin-larson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 49642244, "answer_count": 2, "score": -2, "last_activity_date": 1522861994, "creation_date": 1522806703, "last_edit_date": 1522861994, "question_id": 49641536, "link": "https://stackoverflow.com/questions/49641536/ruby-caesar-cipher-not-changing-the-word", "title": "Ruby Caesar Cipher not changing the word", "body": "<p>I'm creating a caesar cipher in Ruby based on the code from <a href=\"https://rosettacode.org/wiki/Caesar_cipher#Ruby\" rel=\"nofollow noreferrer\">Rosetta Code</a>, but my code only prints the original word, rather than the modified word.</p>\n\n<p>Here's my code:</p>\n\n<pre><code>class String\n  ALPHABET = (\"A\"..\"Z\").to_a\n\n  def caesar_cipher(num)\n    self.tr(ALPHABET.join, ALPHABET.rotate(num).join)\n  end\n\nend\n\nword = gets.chomp.to_s\n\nencypted  = \"#{word}\".caesar_cipher(8)\ndecrypted = \"#{word}\".caesar_cipher(-8)\n\nputs \"Encrypt or Decrypt?\"\n\nchoice = gets.chomp.to_s.downcase\n\nif choice == \"encrypt\"\n  puts encypted\nelsif choice == \"decrypt\"\n  puts decrypted\nelse\n  puts \"Invalid option\"\nend\n</code></pre>\n\n<p>Any help would be greatly appreciated!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "resque"], "owner": {"reputation": 2383, "user_id": 3397, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/00719a23ac50c2cbb605e4a75ffe2edb?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Evjan", "link": "https://stackoverflow.com/users/3397/peter-evjan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 306, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1522803968, "creation_date": 1522803287, "last_edit_date": 1522803968, "question_id": 49641116, "link": "https://stackoverflow.com/questions/49641116/resque-calling-perform-later-from-inside-another-job-doesnt-trigger-those-oth", "title": "Resque: calling #perform_later from inside another job doesn&#39;t trigger those other jobs", "body": "<p>I have an issue which is likely me doing something weird but I can't for the life of me figure it out:</p>\n\n<p>I have a parent job that is supposed to kick off a bunch of child jobs, but those child jobs never execute.</p>\n\n<p>Here's the parent job:</p>\n\n<pre><code>class TriggerJob &lt; ApplicationJob\n  def perform\n    start_events\n  end\n\n  around_perform do |_, block|\n    p 'TriggerJob before_perform'\n    block.call\n    p 'TriggerJob after_perform'\n  end\n\n  private\n\n  def start_events\n    events = Events.all\n\n    events.each do |event|\n      event.connectors.each do |connector|\n        p \"Stopping connector #{connector.id} for event #{event.id}\"\n\n        StopConnectorJob.perform_later(connector.id)\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>And here's the child job:</p>\n\n<pre><code>class StopConnectorJob &lt; ApplicationJob\n  @queue = :default\n\n  class StopConnectorFailed &lt; StandardError; end\n\n  rescue_from(StandardError) do |exception|\n    p \"ERROR! #{exception.message}\"\n    raise(StopConnectorFailed, exception.message)\n  end\n\n  def perform(connector_id)\n    p 'STOPPING CHARGE'\n    connector = Connector.find(connector_id)\n    do_stuff_with_the_connector(connector)\n  end\n\n  around_enqueue do |job, block|\n    p \"StopConnectorJob before_enqueue: #{Resque.count_all_scheduled_jobs}\"\n    p job.arguments\n    block.call\n    p \"StopConnectorJob after_enqueue: #{Resque.count_all_scheduled_jobs}\"\n  end\n\n  around_perform do |job, block|\n    p 'StopConnectorJob before_perform'\n    p job.arguments\n    block.call\n    p 'StopConnectorJob after_perform'\n  end\n\n  private\n\n\n  def do_stuff_with_the_connector(connector)\n    # ...\n  end\nend\n</code></pre>\n\n<p>When I run the base job, this is what gets output:</p>\n\n<pre><code>\"TriggerJob before_perform\"\n\"Stopping connector 4 for event 8\"\n\"StopConnectorJob before_enqueue: 0\"\n[3]\n\"StopConnectorJob after_enqueue: 0\"\n\"TriggerJob after_perform\"\n</code></pre>\n\n<p>Then nothing. No jobs queued when I look at the jobs web interface. No record of redis persisting it when monitoring with redis-cli monitor.</p>\n\n<p>If I change from #perform_later to #perform_now it works. But I want this to not be blocking.</p>\n\n<p>Any idea why my jobs aren't being run even though it seems like they should have been enqueued but I can't see that they are?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms"], "comments": [{"owner": {"reputation": 7206, "user_id": 1121817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc9ecd48633523063a05146bf6044c95?s=128&d=identicon&r=PG", "display_name": "Nathan", "link": "https://stackoverflow.com/users/1121817/nathan"}, "edited": false, "score": 0, "creation_date": 1522801851, "post_id": 49640926, "comment_id": 86289619, "body": "Post the code you&#39;re trying that gives you an error, and also post the error."}, {"owner": {"reputation": 977, "user_id": 4142552, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Puiw1rqSrjE/AAAAAAAAAAI/AAAAAAAAASA/2u6qPeqLeYY/photo.jpg?sz=128", "display_name": "court3nay", "link": "https://stackoverflow.com/users/4142552/court3nay"}, "edited": false, "score": 0, "creation_date": 1522802292, "post_id": 49640926, "comment_id": 86289711, "body": "also: hidden_field can be easily hacked/modified, so you should do anything you need with current_user.id in the controller, instead of passing the value with the form."}, {"owner": {"reputation": 977, "user_id": 4142552, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Puiw1rqSrjE/AAAAAAAAAAI/AAAAAAAAASA/2u6qPeqLeYY/photo.jpg?sz=128", "display_name": "court3nay", "link": "https://stackoverflow.com/users/4142552/court3nay"}, "edited": false, "score": 0, "creation_date": 1522802362, "post_id": 49640926, "comment_id": 86289727, "body": "finally; you don&#39;t need the <code>:url =&gt; waterbootle_path</code> either, just <code>form_for @waterbottle do |f|</code> - again, rails magic."}, {"owner": {"reputation": 7206, "user_id": 1121817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc9ecd48633523063a05146bf6044c95?s=128&d=identicon&r=PG", "display_name": "Nathan", "link": "https://stackoverflow.com/users/1121817/nathan"}, "edited": false, "score": 0, "creation_date": 1522803179, "post_id": 49640926, "comment_id": 86289868, "body": "I took the liberty of editing your post to make it more clear what you&#39;re asking."}], "answers": [{"comments": [{"owner": {"reputation": 7206, "user_id": 1121817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc9ecd48633523063a05146bf6044c95?s=128&d=identicon&r=PG", "display_name": "Nathan", "link": "https://stackoverflow.com/users/1121817/nathan"}, "edited": false, "score": 0, "creation_date": 1522802970, "post_id": 49641021, "comment_id": 86289833, "body": "I believe you misunderstood the OP&#39;s intent."}], "tags": [], "owner": {"reputation": 977, "user_id": 4142552, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Puiw1rqSrjE/AAAAAAAAAAI/AAAAAAAAASA/2u6qPeqLeYY/photo.jpg?sz=128", "display_name": "court3nay", "link": "https://stackoverflow.com/users/4142552/court3nay"}, "is_accepted": false, "score": 1, "last_activity_date": 1522802459, "creation_date": 1522802459, "answer_id": 49641021, "question_id": 49640926, "link": "https://stackoverflow.com/questions/49640926/can-i-add-to-an-existing-value-in-a-rails-db-instead-of-replacing-it/49641021#49641021", "title": "Can I add to an existing value in a Rails DB, instead of replacing it?", "body": "<p>you can easily do math or other functions inline in the value part:</p>\n\n<pre><code>&lt;%= f.text_field :refills, :value =&gt; (@waterbottle.refills + 1) %&gt;\n</code></pre>\n\n<p>Bear in mind, generally you don't need to specify the value if you're not changing it.\n(I made a few other stylistic and security comments, above, about your other rails code. good luck!)</p>\n"}, {"tags": [], "owner": {"reputation": 531, "user_id": 1642675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9ca89fcc62a6de1cc741d3ffd196169?s=128&d=identicon&r=PG&f=1", "display_name": "\u0411\u0443\u044f\u043d\u0431\u0430\u0442 \u0427\u043e\u0439\u0436\u0438\u043b\u0441\u04af\u0440\u044d\u043d", "link": "https://stackoverflow.com/users/1642675/%d0%91%d1%83%d1%8f%d0%bd%d0%b1%d0%b0%d1%82-%d0%a7%d0%be%d0%b9%d0%b6%d0%b8%d0%bb%d1%81%d2%af%d1%80%d1%8d%d0%bd"}, "is_accepted": true, "score": 1, "last_activity_date": 1522806088, "creation_date": 1522806088, "answer_id": 49641461, "question_id": 49640926, "link": "https://stackoverflow.com/questions/49640926/can-i-add-to-an-existing-value-in-a-rails-db-instead-of-replacing-it/49641461#49641461", "title": "Can I add to an existing value in a Rails DB, instead of replacing it?", "body": "<p>Offering you to use <code>before_update</code> callback in your model. And you can get old values by <code>refills_was</code> method.</p>\n\n<pre><code>class Waterbottle &lt; ApplicationRecord\n  before_update :increase_fills\n\n  def increase_fills\n    if self.refills_changed?\n      self.refills = self.refills + self.refills_was\n    end \n  end\nend\n</code></pre>\n\n<p>Hope this will help you to solve problem.</p>\n"}], "owner": {"reputation": 25, "user_id": 9458889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1848d8613681d39b9dd6944349348c85?s=128&d=identicon&r=PG&f=1", "display_name": "AChic", "link": "https://stackoverflow.com/users/9458889/achic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 49641461, "answer_count": 2, "score": 0, "last_activity_date": 1522806088, "creation_date": 1522801507, "last_edit_date": 1522803128, "question_id": 49640926, "link": "https://stackoverflow.com/questions/49640926/can-i-add-to-an-existing-value-in-a-rails-db-instead-of-replacing-it", "title": "Can I add to an existing value in a Rails DB, instead of replacing it?", "body": "<p>I've been trying to add to a value in my DB, rather than replace it.</p>\n\n<p>If you were to input 5 as the value in the update/edit form, I want the DB to be 5 plus whatever is already in the DB. So, if the DB already has 1 refill, entering 5 in the form would result in 6 in the DB.</p>\n\n<p>When putting different :values into the update form I have been breaking the form, and a rails error comes up. Not sure if/how to pass a function in the input of a ruby form. This project is mainly written in Ruby(2.4.1p111) on Rails (5.1.5). Below is the Controller</p>\n\n<pre><code>def update\n    @waterbottle = Waterbottle.find(params[:id])\n    if @waterbottle.update(waterbottle_params)\n        redirect_to \"/users/#{current_user.id}\"\n    end\nend\n</code></pre>\n\n<p>Schema</p>\n\n<pre><code>create_table \"waterbottles\", force: :cascade do |t|\n  t.integer \"volume\"\n  t.integer \"user_id\"\n  t.integer \"refills\"\n  t.datetime \"created_at\", null: false\n  t.datetime \"updated_at\", null: false\nend\n</code></pre>\n\n<p>And the update form is.</p>\n\n<pre><code>&lt;%= form_for @waterbottle, :url =&gt; waterbottle_path(@waterbottle.id) do |f| %&gt;\n  &lt;p&gt; How many times did you refill your bottle today? &lt;/p&gt;\n  &lt;%= f.text_field :refills, :value =&gt; @waterbottle.refills %&gt;\n  &lt;%= f.hidden_field :user_id, :value =&gt; current_user.id %&gt;&lt;/br&gt;\n  &lt;%= f.hidden_field :volume, :value =&gt; @waterbottle.volume %&gt;&lt;/br&gt;\n  &lt;%= f.submit \"Refill Waterbottle\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Any help is greatly appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "carrierwave"], "answers": [{"comments": [{"owner": {"reputation": 234, "user_id": 5696554, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10203997152048831/picture?type=large", "display_name": "mychemicalro", "link": "https://stackoverflow.com/users/5696554/mychemicalro"}, "edited": false, "score": 1, "creation_date": 1522821293, "post_id": 49643072, "comment_id": 86295040, "body": "I get no more that error, and I am redirected again to the new page. in the terminal the transaction is rollback, no further info are given. Still if I get the :image from podcast_params, the podcast is created, but without the image."}, {"owner": {"reputation": 234, "user_id": 5696554, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10203997152048831/picture?type=large", "display_name": "mychemicalro", "link": "https://stackoverflow.com/users/5696554/mychemicalro"}, "edited": false, "score": 1, "creation_date": 1522821384, "post_id": 49643072, "comment_id": 86295082, "body": "the reason is: unpermitted parameter: image"}], "tags": [], "owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1522817760, "creation_date": 1522817760, "answer_id": 49643072, "question_id": 49640426, "link": "https://stackoverflow.com/questions/49640426/rails-carrierwave-permit-parameters/49643072#49643072", "title": "Rails carrierWave permit parameters", "body": "<p>The error <code>Missing template podcasts/create, application/create ...</code> you are seeing is because you haven't handled the <strong>failure</strong> scenario in your <code>create</code> action. If <code>@podcast.save</code> returns <code>false</code> then it will, by rails convention, look for the template with <strong>same name</strong> as the action to render.</p>\n\n<p>You can modify your action as below to <em>redirect/render</em> on failure. Most people prefer rendering the same form with errors displayed.</p>\n\n<pre><code>def create\n  @podcast = current_user.podcasts.create(podcast_params)\n  if @podcast.save\n    redirect_to podcast_path(@podcast)\n  else\n    render :new     # Change this according to your will.\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 234, "user_id": 5696554, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10203997152048831/picture?type=large", "display_name": "mychemicalro", "link": "https://stackoverflow.com/users/5696554/mychemicalro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 275, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1523005547, "creation_date": 1522797421, "last_edit_date": 1523005547, "question_id": 49640426, "link": "https://stackoverflow.com/questions/49640426/rails-carrierwave-permit-parameters", "title": "Rails carrierWave permit parameters", "body": "<p>I am having a problem in uploading an image in Rails 4.2.6 with ruby 2.3.0 and CarrierWave. </p>\n\n<p>I have a podcast model, and when I am trying to create a new model from the form, providing name, description and a .jpg image, I get the following error: <code>Missing template podcasts/create, application/create with {:locale=&gt;[:en], :formats=&gt;[:html], :variants=&gt;[], :handlers=&gt;[:erb, :builder, :raw, :ruby, :coffee, :jbuilder]}. Searched in: * \"/Users/mychro94/Desktop/Prova/app/views\" * \"/Users/mychro94/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/devise-i18n-1.6.1/app/views\" * \"/Users/mychro94/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/devise-4.4.3/app/views\"</code></p>\n\n<p>If I remove the :image field in</p>\n\n<pre><code>def podcast_params\n    params.require(:podcast).permit(:name, :description, :image)  \nend\n</code></pre>\n\n<p>I don't get that error anymore, but the image is not added to the object created.</p>\n\n<p>The podcast create method is: </p>\n\n<pre><code>def create\n   @podcast = current_user.podcasts.create(podcast_params)\n   if @podcast.save\n      redirect_to podcast_path(@podcast)\n   end\nend\n</code></pre>\n\n<p>and the new.html.erb file is</p>\n\n<pre><code>   &lt;%= form_for(@podcast, html: { :multipart =&gt; true, id: \"input-      container\", class: \"cf wrapper\"}) do |f| %&gt;\n   &lt;div id=\"image-upload\"&gt;\n   &lt;%= f.file_field :image, :required =&gt; true %&gt;\n   &lt;!--&lt;label for=\"image\" class=\"inputfile-label\"&gt;Choose a file&lt;/label&gt;--&gt;\n   &lt;/div&gt;\n  &lt;div id=\"title\"&gt;\n    &lt;%= f.text_field :name,:required =&gt; true , placeholder: \"Insert Podcast title\", class: \"border-animation\" %&gt;\n  &lt;/div&gt;\n\n   &lt;div id=\"description\" &gt;\n   &lt;%= f.text_area :description, :required =&gt; true , placeholder: \"Insert Podcast description\", class: \"border-animation\"%&gt;\n   &lt;/div&gt;\n\n  &lt;div class=\"btn-bar\"&gt;\n\n   &lt;div class=\"right\"&gt;\n    &lt;%= f.submit \"Create my podcast\",class: \"button button-highlight\" %&gt;\n\n   &lt;/div&gt;\n   &lt;/div&gt;\n   &lt;% end %&gt;\n</code></pre>\n\n<p>this is what I get in the terminal when creating the podcast</p>\n\n<pre><code>Started POST \"/podcasts\" for ::1 at 2018-04-04 09:24:00 +0200\nProcessing by PodcastsController#create as HTML\nParameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"wE57eKfcn/74znzOaQ4SBdYf5PSxPFBOZou9EOrhLNHmBzDNBa/nuw7+PJhIa5Lzqb3g55uIjqdhYmrSko+Wew==\", \"podcast\"=&gt;{\"image\"=&gt;{\"image\"=&gt;#&lt;ActionDispatch::Http::UploadedFile:0x007fc9043f4fd8 @tempfile=#&lt;Tempfile:/var/folders/7y/kh7t8w9j2tzf54_vh32st63r0000gn/T/RackMultipart20180404-50589-qd7z9c.jpg&gt;, @original_filename=\"pod.jpg\", @content_type=\"image/jpeg\", @headers=\"Content-Disposition: form-data; name=\\\"podcast[image][image]\\\"; filename=\\\"pod.jpg\\\"\\r\\nContent-Type: image/jpeg\\r\\n\"&gt;}, \"name\"=&gt;\"asdas\", \"description\"=&gt;\"asdasd\"}, \"commit\"=&gt;\"Create my podcast\"}\n  User Load (0.3ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = ?  ORDER BY \"users\".\"id\" ASC LIMIT 1  [[\"id\", 1]]\n Unpermitted parameter: image\n  (0.1ms)  begin transaction\n SQL (0.4ms)  INSERT INTO \"podcasts\" (\"name\", \"description\", \"artist_id\", \"created_at\", \"updated_at\") VALUES (?, ?, ?, ?, ?)  [[\"name\", \"asdas\"], [\"description\", \"asdasd\"], [\"artist_id\", 1], [\"created_at\", \"2018-04-04 07:24:00.672689\"], [\"updated_at\", \"2018-04-04 07:24:00.672689\"]]\n  (0.9ms)  commit transaction\n  (0.1ms)  begin transaction\n  (0.0ms)  commit transaction\n  Redirected to http://localhost:3000/podcasts/28\n  Completed 302 Found in 11ms (ActiveRecord: 1.8ms)\n</code></pre>\n\n<p>For sure there is something wrong with this</p>\n\n<pre><code>\"podcast\"=&gt;{\"image\"=&gt;{\"image\"=&gt;#&lt;ActionDispatch::Http::UploadedFile:0x007fc9043f4fd8\n</code></pre>\n\n<p>What can I do? </p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 1251, "user_id": 1198224, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/26e95d4a1d91bab4d79881e6ee53b84c?s=128&d=identicon&r=PG", "display_name": "KZcoding", "link": "https://stackoverflow.com/users/1198224/kzcoding"}, "edited": false, "score": 0, "creation_date": 1522807756, "post_id": 49640150, "comment_id": 86290898, "body": "I see. Is there a way to name the unnamed block within the method?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 1251, "user_id": 1198224, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/26e95d4a1d91bab4d79881e6ee53b84c?s=128&d=identicon&r=PG", "display_name": "KZcoding", "link": "https://stackoverflow.com/users/1198224/kzcoding"}, "edited": false, "score": 1, "creation_date": 1522816805, "post_id": 49640150, "comment_id": 86293318, "body": "@KZcoding you name the block by using a named block argument. Why do you want to avoid that?"}, {"owner": {"reputation": 1251, "user_id": 1198224, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/26e95d4a1d91bab4d79881e6ee53b84c?s=128&d=identicon&r=PG", "display_name": "KZcoding", "link": "https://stackoverflow.com/users/1198224/kzcoding"}, "edited": false, "score": 0, "creation_date": 1522852378, "post_id": 49640150, "comment_id": 86316076, "body": "no reason. I am trying to understand that internal details behind these objects and the motivations for using them."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 4, "last_activity_date": 1522795443, "creation_date": 1522795443, "answer_id": 49640150, "question_id": 49640073, "link": "https://stackoverflow.com/questions/49640073/ruby-how-can-i-properly-use-yield-to-pass-unnamed-code-block-to-integertimes/49640150#49640150", "title": "Ruby: How can I properly use `yield` to pass unnamed code block to Integer#times method?", "body": "<blockquote>\n  <p>I want to pass the <code>yield</code> object to the <code>Integer#times</code> method so that the <code>yield</code> code block is called a number of times</p>\n</blockquote>\n\n<p><code>yield</code> is not an object, nor is it a block. It's not even a method call. It's a keyword that <em>yields</em> control to a passed block. If you want to do anything else with the block (save it for later, pass it around, etc.), you must name it.</p>\n"}, {"comments": [{"owner": {"reputation": 1251, "user_id": 1198224, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/26e95d4a1d91bab4d79881e6ee53b84c?s=128&d=identicon&r=PG", "display_name": "KZcoding", "link": "https://stackoverflow.com/users/1198224/kzcoding"}, "edited": false, "score": 0, "creation_date": 1522807721, "post_id": 49640836, "comment_id": 86290884, "body": "So this is pretty much what I was looking for. Although, I don&#39;t understand why this works. Does the &#39;times&#39; method internally also call &#39;yield&#39;?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 1251, "user_id": 1198224, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/26e95d4a1d91bab4d79881e6ee53b84c?s=128&d=identicon&r=PG", "display_name": "KZcoding", "link": "https://stackoverflow.com/users/1198224/kzcoding"}, "edited": false, "score": 0, "creation_date": 1522815885, "post_id": 49640836, "comment_id": 86293030, "body": "@KZcoding yes, it does call <code>yield</code> \u2013 that&#39;s the usual way to call a passed block."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1522816424, "post_id": 49640836, "comment_id": 86293187, "body": "<i>&quot;wrap yield in a new block and thereby pass it around&quot;</i> \u2013 you don&#39;t pass the block around. You pass another block and that one calls the outer block."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1522825485, "post_id": 49640836, "comment_id": 86297351, "body": "@Stefan: if we ignore OP&#39;s &quot;I want to pass yield block&quot; (which doesn&#39;t make sense) and instead answer the &quot;I want to do it only with yield&quot;, then this is a good answer. Does the same thing, side-effect-wise. But no blocks are passed on here, of course. I would probably amend the wording to make that extra-clear."}, {"owner": {"reputation": 1251, "user_id": 1198224, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/26e95d4a1d91bab4d79881e6ee53b84c?s=128&d=identicon&r=PG", "display_name": "KZcoding", "link": "https://stackoverflow.com/users/1198224/kzcoding"}, "edited": false, "score": 0, "creation_date": 1522852301, "post_id": 49640836, "comment_id": 86316001, "body": "related question, what does <code>&amp;yield</code> mean?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 1251, "user_id": 1198224, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/26e95d4a1d91bab4d79881e6ee53b84c?s=128&d=identicon&r=PG", "display_name": "KZcoding", "link": "https://stackoverflow.com/users/1198224/kzcoding"}, "edited": false, "score": 0, "creation_date": 1522852540, "post_id": 49640836, "comment_id": 86316229, "body": "@KZcoding: nothing special. It&#39;s operator <code>&amp;</code> applied to whatever <code>yield</code> returns. In this case, it&#39;s the same as <code>&amp;nil</code>"}, {"owner": {"reputation": 7206, "user_id": 1121817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc9ecd48633523063a05146bf6044c95?s=128&d=identicon&r=PG", "display_name": "Nathan", "link": "https://stackoverflow.com/users/1121817/nathan"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1522857634, "post_id": 49640836, "comment_id": 86320045, "body": "@stefan I have reworded my answer. Please feel free to suggest different wording if it still needs clarification."}], "tags": [], "owner": {"reputation": 7206, "user_id": 1121817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc9ecd48633523063a05146bf6044c95?s=128&d=identicon&r=PG", "display_name": "Nathan", "link": "https://stackoverflow.com/users/1121817/nathan"}, "is_accepted": false, "score": 3, "last_activity_date": 1522857563, "last_edit_date": 1522857563, "creation_date": 1522800713, "answer_id": 49640836, "question_id": 49640073, "link": "https://stackoverflow.com/questions/49640073/ruby-how-can-i-properly-use-yield-to-pass-unnamed-code-block-to-integertimes/49640836#49640836", "title": "Ruby: How can I properly use `yield` to pass unnamed code block to Integer#times method?", "body": "<p>@sergio-tulentsev's answer is good. But, I wanted to point out that you can wrap <code>yield</code> in a new block and thereby pass along the ability to yield to the original block:</p>\n\n<pre><code>def withYield\n  3.times { yield }\nend\nwithYield {print \"Go \"}\n</code></pre>\n\n<p>To be clear, <code>{ yield }</code> is a new block, and it is passed to <code>times</code>. When the new block is executed, it yields to the <em>original</em> <code>{ print \"Go\" }</code> block that was given to  <code>withYield</code>. The original block isn't actually passed to <code>times</code>, but the ability to yield to the original block is passed, <em>effectively</em> letting you call the original block.</p>\n"}, {"comments": [{"owner": {"reputation": 7206, "user_id": 1121817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc9ecd48633523063a05146bf6044c95?s=128&d=identicon&r=PG", "display_name": "Nathan", "link": "https://stackoverflow.com/users/1121817/nathan"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1522863010, "post_id": 49655646, "comment_id": 86323083, "body": "@SergioTulentsev Yeah I first learned about it from this talk from AaronPatterson: <a href=\"https://www.youtube.com/watch?v=I8m6rY4JI1U&amp;feature=youtu.be&amp;t=1830\" rel=\"nofollow noreferrer\">youtube.com/watch?v=I8m6rY4JI1U&amp;feature=youtu.be&amp;t=1830</a> or maybe a blog post based off of this talk."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1522876119, "post_id": 49655646, "comment_id": 86330491, "body": "I remember this blog post: <a href=\"https://mudge.name/2011/01/26/passing-blocks-in-ruby-without-block.html\" rel=\"nofollow noreferrer\">mudge.name/2011/01/26/passing-blocks-in-ruby-without-block.h&zwnj;&#8203;tml</a>"}, {"owner": {"reputation": 1251, "user_id": 1198224, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/26e95d4a1d91bab4d79881e6ee53b84c?s=128&d=identicon&r=PG", "display_name": "KZcoding", "link": "https://stackoverflow.com/users/1198224/kzcoding"}, "edited": false, "score": 0, "creation_date": 1523030308, "post_id": 49655646, "comment_id": 86406294, "body": "wow! This is a great article. Answers the question I didn&#39;t know how to ask ;)"}], "tags": [], "owner": {"reputation": 7206, "user_id": 1121817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc9ecd48633523063a05146bf6044c95?s=128&d=identicon&r=PG", "display_name": "Nathan", "link": "https://stackoverflow.com/users/1121817/nathan"}, "is_accepted": true, "score": 3, "last_activity_date": 1522857905, "creation_date": 1522857905, "answer_id": 49655646, "question_id": 49640073, "link": "https://stackoverflow.com/questions/49640073/ruby-how-can-i-properly-use-yield-to-pass-unnamed-code-block-to-integertimes/49655646#49655646", "title": "Ruby: How can I properly use `yield` to pass unnamed code block to Integer#times method?", "body": "<p>For sake of completeness on this topic, I wanted to demonstrate another technique to call the original block:</p>\n\n<pre><code>def withProc\n  p = Proc.new\n  3.times(&amp;p)\nend\nwithProc { print \"Go\" }\n</code></pre>\n\n<p>When <code>Proc.new</code> is not given a block, it uses the block that was given to <code>withProc</code> instead. Now you can call <code>p</code>, and it will call the original block.  You can also pass <code>p</code> to other methods like <code>times</code> either as a regular argument or as a block argument.</p>\n\n<p>See <a href=\"https://medium.com/@amliving/proc-new-trick-c1df16185599\" rel=\"nofollow noreferrer\">https://medium.com/@amliving/proc-new-trick-c1df16185599</a> for more discussion</p>\n"}], "owner": {"reputation": 1251, "user_id": 1198224, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/26e95d4a1d91bab4d79881e6ee53b84c?s=128&d=identicon&r=PG", "display_name": "KZcoding", "link": "https://stackoverflow.com/users/1198224/kzcoding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 49655646, "answer_count": 3, "score": 1, "last_activity_date": 1522857905, "creation_date": 1522795007, "last_edit_date": 1522852266, "question_id": 49640073, "link": "https://stackoverflow.com/questions/49640073/ruby-how-can-i-properly-use-yield-to-pass-unnamed-code-block-to-integertimes", "title": "Ruby: How can I properly use `yield` to pass unnamed code block to Integer#times method?", "body": "<p>I am learning Ruby, and for no particular reason, I want to pass the <code>yield</code> object to the Integer#times method so that the <code>yield</code> code block is called a number of times. Here is how I can do it with a named code block:</p>\n\n<pre><code>def withNamedCodeBlock &amp;b\n  3.times(&amp;b)\nend\nwithNamedCodeBlock {print \"Go \"}\n#returns Go Go Go\n</code></pre>\n\n<p>Now, I want to do the same, but without named code blocks; I want to do it with by using the <code>yield</code> keyword. Here is how I tried and failed:</p>\n\n<pre><code>def withYield\n  3.times(&amp;yield)\nend\nwithYield {print \"Go \"}\n#returns Go =&gt; #&lt;Enumerator: 3:times&gt;\n#I expect it to return Go Go Go \n</code></pre>\n\n<p>I am still wrapping my head around the various ways to pass code blocks to methods, so additional information regarding that is appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "internationalization", "actioncable"], "comments": [{"owner": {"reputation": 1648, "user_id": 1610548, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a1572f89ae593aefced85b8494479098?s=128&d=identicon&r=PG", "display_name": "rept", "link": "https://stackoverflow.com/users/1610548/rept"}, "edited": false, "score": 0, "creation_date": 1584145008, "post_id": 49639751, "comment_id": 107356026, "body": "Great question, I had the exact same problem in mind and was wondering if this approach was considered good practice."}], "answers": [{"comments": [{"owner": {"reputation": 664, "user_id": 3069661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fcc54fdb5134fab9470af2207da99270?s=128&d=identicon&r=PG", "display_name": "Yoko", "link": "https://stackoverflow.com/users/3069661/yoko"}, "edited": false, "score": 0, "creation_date": 1522840561, "post_id": 49643159, "comment_id": 86307149, "body": "Well that&#39;s the problem, if I do this, all users seeing this partial will see it in 1 language..."}], "tags": [], "owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1522818192, "creation_date": 1522818192, "answer_id": 49643159, "question_id": 49639751, "link": "https://stackoverflow.com/questions/49639751/combine-actioncable-and-i18n/49643159#49643159", "title": "Combine ActionCable and I18n", "body": "<p>When you do this:</p>\n\n<pre><code>I18n.available_locales.each do |l|\n  I18n.with_locale(l) do\n    ActionCable.server.broadcast \"user_last_seen_at_refresh_#{l}\", {\n      user_partial: Admin::UsersController.render(partial:\"user\", locals: { u:u }),\n      user_id:u.id\n    }\n  end\nend\n</code></pre>\n\n<p>You are actually making the same broadcast call for the user in ALL of the available locales.</p>\n\n<p>What i think you want is to send the broadcast to users in their favourite locale. Right? To do so, (<em>assuming</em> you have some field/method to access the locale of a user), change it as below:</p>\n\n<pre><code>I18n.with_locale(u.locale) do\n  ActionCable.server.broadcast \"user_last_seen_at_refresh\", {\n    user_partial: Admin::UsersController.render(partial:\"user\", locals: { u:u }),\n    user_id:u.id\n  }\nend\n</code></pre>\n"}], "owner": {"reputation": 664, "user_id": 3069661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fcc54fdb5134fab9470af2207da99270?s=128&d=identicon&r=PG", "display_name": "Yoko", "link": "https://stackoverflow.com/users/3069661/yoko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 148, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1522818192, "creation_date": 1522792749, "question_id": 49639751, "link": "https://stackoverflow.com/questions/49639751/combine-actioncable-and-i18n", "title": "Combine ActionCable and I18n", "body": "<p>I've started using Rails ActionCable to deliver messages to my users without them needing to reload the page. My websites are all translated in multiple languages and I'm having trouble finding a solution to the following problem:</p>\n\n<pre><code>ActionCable.server.broadcast 'user_last_seen_at_refresh', {\n  user_partial: Admin::UsersController.render(partial:\"user\", locals: { u:u }),\n  user_id:u.id\n}\n</code></pre>\n\n<p>When I'm broadcasting a message to some of my users, they need to see a partial that is translated. This is not. The partial is translated to English, which is the default locale. A 'solution' I can think of is doing the following:</p>\n\n<pre><code>I18n.available_locales.each do |l|\n  I18n.with_locale(l) do\n    ActionCable.server.broadcast \"user_last_seen_at_refresh_#{l}\", {\n      user_partial: Admin::UsersController.render(partial:\"user\", locals: { u:u }),\n      user_id:u.id\n    }\n  end\nend\n</code></pre>\n\n<p>and subscribing my users according to their language, but that just doesn't feel like the Rails way to go.</p>\n\n<p>Has anybody got a better idea than this?\nThx!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "impressionist"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1523080353, "post_id": 49639053, "comment_id": 86421927, "body": "What did you try so far? Please share your code. What was the issue?"}, {"owner": {"reputation": 387, "user_id": 8152465, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/17b78615d8f648d8b9745b530b880422?s=128&d=identicon&r=PG&f=1", "display_name": "rod", "link": "https://stackoverflow.com/users/8152465/rod"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1523137279, "post_id": 49639053, "comment_id": 86438009, "body": "Hello spickermann, thank you very much for your answer. I paginate a result like this: posts = Post.all.paginate(:page =&gt; params[:page]) and then I try to use impressionist gem on posts with the method: impressionist(posts) but I get this error: WillPaginate::Collection is not impressionable! How can I use impressionst gem with a WillPaginate:Collection? Thank you for you help."}], "answers": [{"tags": [], "owner": {"reputation": 3922, "user_id": 3399504, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rRGvW.png?s=128&g=1", "display_name": "ErvalhouS", "link": "https://stackoverflow.com/users/3399504/ervalhous"}, "is_accepted": false, "score": 2, "last_activity_date": 1523147902, "creation_date": 1523147902, "answer_id": 49713316, "question_id": 49639053, "link": "https://stackoverflow.com/questions/49639053/rails-impressionist-gem-willpaginatecollection-is-not-impressionable/49713316#49713316", "title": "Rails Impressionist Gem - WillPaginate::Collection is not impressionable", "body": "<p>The collection generated by <code>will_paginate</code> is not impressionable means exactly you are reading, it's class doesn't have any calls to <code>is_impressionable</code>, as your model should have. If it doesn't, add it like this:</p>\n\n<pre><code>class Post &lt; ActiveRecord::Base\n    # ...other stuff\n    is_impressionable\nend\n</code></pre>\n\n<p>Then, if you can't call it in the collection, why not call it in each record instead? Try like this:</p>\n\n<pre><code>posts = Post.all.paginate(:page =&gt; params[:page])\nposts.each{|post| impressionist(post) }\n</code></pre>\n\n<p>Maybe it's not the most elegant solution, but it will get the work done. As of doing this in your view, I wouldn't advise it. Impressionist creates a database record, which would slow your view rendering. It will be better to do it in the model or controller layers.</p>\n"}], "owner": {"reputation": 387, "user_id": 8152465, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/17b78615d8f648d8b9745b530b880422?s=128&d=identicon&r=PG&f=1", "display_name": "rod", "link": "https://stackoverflow.com/users/8152465/rod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "answer_count": 1, "score": 9, "last_activity_date": 1523148018, "creation_date": 1522789088, "last_edit_date": 1523148018, "question_id": 49639053, "link": "https://stackoverflow.com/questions/49639053/rails-impressionist-gem-willpaginatecollection-is-not-impressionable", "title": "Rails Impressionist Gem - WillPaginate::Collection is not impressionable", "body": "<p>There is any way to use impressionist gem with will paginate? I try to use impressionist to a <code>will_paginate</code> collection like this:</p>\n\n<pre><code>posts = Post.all.paginate(:page =&gt; params[:page]) \nimpressionist(posts) \n</code></pre>\n\n<p>But It raises this error: </p>\n\n<pre><code>WillPaginate::Collection is not impressionable!\n</code></pre>\n\n<p>There is any way to use impressionist method directly on view?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "docker", "docker-compose"], "answers": [{"comments": [{"owner": {"reputation": 379, "user_id": 4454498, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/b2b339daa2a73cb8c0ee537b3e6de80d?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Condron", "link": "https://stackoverflow.com/users/4454498/ryan-condron"}, "edited": false, "score": 0, "creation_date": 1522851688, "post_id": 49646680, "comment_id": 86315486, "body": "Thank you for the response, this unfortunately did resolve the issue. It also is never the same container, it runs the same code but not the same specific instance."}], "tags": [], "owner": {"reputation": 476, "user_id": 2645167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IEnRe.jpg?s=128&g=1", "display_name": "andriy-baran", "link": "https://stackoverflow.com/users/2645167/andriy-baran"}, "is_accepted": false, "score": 2, "last_activity_date": 1522831927, "creation_date": 1522831927, "answer_id": 49646680, "question_id": 49638699, "link": "https://stackoverflow.com/questions/49638699/docker-compose-restart-connection-pool-full/49646680#49646680", "title": "docker-compose restart connection pool full", "body": "<p>You can try reset network pool before deploy</p>\n\n<pre><code>$ docker network prune\n</code></pre>\n\n<p>Docks here: <a href=\"https://docs.docker.com/engine/reference/commandline/network_prune/\" rel=\"nofollow noreferrer\">https://docs.docker.com/engine/reference/commandline/network_prune/</a></p>\n"}, {"comments": [{"owner": {"reputation": 116828, "user_id": 55075, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/8bbc94977312d285045b2412257b6cb8?s=128&d=identicon&r=PG", "display_name": "kenorb", "link": "https://stackoverflow.com/users/55075/kenorb"}, "edited": false, "score": 0, "creation_date": 1553548536, "post_id": 55253192, "comment_id": 97417791, "body": "Related: <a href=\"https://stackoverflow.com/q/18466079/55075\">Can I change the connection pool size for Python&#39;s \u201crequests\u201d module?</a>"}, {"owner": {"reputation": 175, "user_id": 3277339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s3yLh.jpg?s=128&g=1", "display_name": "gaber84", "link": "https://stackoverflow.com/users/3277339/gaber84"}, "edited": false, "score": 0, "creation_date": 1579703593, "post_id": 55253192, "comment_id": 105855384, "body": "So it is a docker issue, do you know if it has been addressed in most recent versions or if there is an issue open for this, I could not find anything about"}], "tags": [], "owner": {"reputation": 4970, "user_id": 334826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/730b8f636dd59defe9670386a1b041c4?s=128&d=identicon&r=PG", "display_name": "Squirrelsama", "link": "https://stackoverflow.com/users/334826/squirrelsama"}, "is_accepted": false, "score": 13, "last_activity_date": 1553052985, "creation_date": 1553052985, "answer_id": 55253192, "question_id": 49638699, "link": "https://stackoverflow.com/questions/49638699/docker-compose-restart-connection-pool-full/55253192#55253192", "title": "docker-compose restart connection pool full", "body": "<p>I have been struggling with this error message as well with my development environment that uses more than ten containers executed through <code>docker-compose</code>.</p>\n\n<pre><code>WARNING: Connection pool is full, discarding connection: localhost\n</code></pre>\n\n<p>I think I've discovered the root cause of this issue. The python library <code>requests</code> maintains a pool of HTTP connections that the <code>docker</code> library uses to talk to the docker API and, presumably, the containers themselves. It's my hypothesis that only those of us that use docker-compose with more than 10 containers will ever see this. The problem is twofold.</p>\n\n<ul>\n<li><code>requests</code> defaults its connection pool size to 10, and </li>\n<li>there doesn't appear to be any way to inject a bigger pool size from the <code>docker-compose</code> or <code>docker</code> libraries</li>\n</ul>\n\n<p>I hacked together a solution. My libraries for <code>requests</code> were located in <code>~/.local/lib/python2.7/site-packages</code>. I found <code>requests/adapters.py</code> and changed <code>DEFAULT_POOLSIZE</code> from 10 to 1000.</p>\n\n<p>This is not a production solution, is pretty obscure, and will not survive a package upgrade. </p>\n"}, {"tags": [], "owner": {"reputation": 311, "user_id": 3173076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1f1408342971feb1cdf048eb4c58ecd?s=128&d=identicon&r=PG", "display_name": "Jimmy Engelbrecht", "link": "https://stackoverflow.com/users/3173076/jimmy-engelbrecht"}, "is_accepted": false, "score": 1, "last_activity_date": 1588083726, "creation_date": 1588083726, "answer_id": 61482516, "question_id": 49638699, "link": "https://stackoverflow.com/questions/49638699/docker-compose-restart-connection-pool-full/61482516#61482516", "title": "docker-compose restart connection pool full", "body": "<p>I got the same issue with my Django Application. Running about 70 containers in docker-compose. This post heled me since it seems that prune is needed after setting COMPOSE_PARALLEL_LIMIT</p>\n\n<p>I did:</p>\n\n<pre><code>docker-compose down\nexport COMPOSE_PARALLEL_LIMIT=1000\ndocker network prune\ndocker-compose up -d\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3754, "user_id": 3379058, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/G4sYE.png?s=128&g=1", "display_name": "Tal Joffe", "link": "https://stackoverflow.com/users/3379058/tal-joffe"}, "is_accepted": false, "score": 1, "last_activity_date": 1588834282, "creation_date": 1588834282, "answer_id": 61651564, "question_id": 49638699, "link": "https://stackoverflow.com/questions/49638699/docker-compose-restart-connection-pool-full/61651564#61651564", "title": "docker-compose restart connection pool full", "body": "<p>For future readers. A small addition to the answer by @andriy-baran\nYou need to stop all containers, delete them and them run network prune (because the prune command removes unused networks only)</p>\n\n<p>So something like this:</p>\n\n<pre><code>docker kill $(docker ps -q)\ndocker rm $(docker ps -a -q)\ndocker network prune\n</code></pre>\n"}], "owner": {"reputation": 379, "user_id": 4454498, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/b2b339daa2a73cb8c0ee537b3e6de80d?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Condron", "link": "https://stackoverflow.com/users/4454498/ryan-condron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13530, "favorite_count": 2, "answer_count": 4, "score": 11, "last_activity_date": 1588834282, "creation_date": 1522787534, "question_id": 49638699, "link": "https://stackoverflow.com/questions/49638699/docker-compose-restart-connection-pool-full", "title": "docker-compose restart connection pool full", "body": "<p>My team and I are converting some of our infrastructure to docker using docker-compose. Everything appears to be working great the only issue I have is doing a restart it gives me a connection pool is full error. I am trying to figure out what is causing this. If I remove 2 containers or (1 complete setup) it works fine.</p>\n\n<p>A little background on what I am trying to do. This is a Ruby on Rails application that is being ran with multiple different configurations for different teams within an organization. In total the server is running 14 different containers. The host server OS is CentOS, and the compose command is being ran from a MacBook Pro on the same network. I have also tried this with a boot2docker VM with the same result.</p>\n\n<p>Here is the verbose output from the command (using the boot2docker vm)\n<a href=\"https://gist.github.com/rebelweb/5e6dfe34ec3e8dbb8f02c0755991ef11\" rel=\"noreferrer\">https://gist.github.com/rebelweb/5e6dfe34ec3e8dbb8f02c0755991ef11</a></p>\n\n<p>Any help or pointers is appreciated.</p>\n"}, {"tags": ["ruby", "testing", "rspec", "pageobjects", "code-statistics"], "comments": [{"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 0, "creation_date": 1522787655, "post_id": 49638391, "comment_id": 86285055, "body": "Hi there! Welcome to Stack Overflow. Questions asking for recommendations for libraries, utilities etc. are off-topic, however the first couple of results for <a href=\"https://www.google.com/search?q=ruby+find+unused+code\" rel=\"nofollow noreferrer\">google.com/search?q=ruby+find+unused+code</a> are all worth looking into."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1522787834, "post_id": 49638391, "comment_id": 86285146, "body": "Have you googled &quot;ruby code coverage&quot;? What have you tried? There are a plethora of tools available for precisely this."}, {"owner": {"reputation": 51, "user_id": 6481275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bab6d37857811b72fba11c63f81042ce?s=128&d=identicon&r=PG&f=1", "display_name": "Denamix", "link": "https://stackoverflow.com/users/6481275/denamix"}, "edited": false, "score": 0, "creation_date": 1522878639, "post_id": 49638391, "comment_id": 86331663, "body": "I&#39;ve tried so far: joshuaclayton/unused -which fails to install either by brew or stack; gem zombie_scout - which errors out as well; debride - works but only shows unused methods and not stats for the usage."}], "owner": {"reputation": 51, "user_id": 6481275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bab6d37857811b72fba11c63f81042ce?s=128&d=identicon&r=PG&f=1", "display_name": "Denamix", "link": "https://stackoverflow.com/users/6481275/denamix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1531837429, "creation_date": 1522786321, "last_edit_date": 1522878913, "question_id": 49638391, "link": "https://stackoverflow.com/questions/49638391/collect-stats-on-method-usage-in-non-rails-ruby-project", "title": "collect stats on method usage in non-rails ruby project", "body": "<p>I have a project where we keep our acceptance test code. It has about 1100 methods that I use for dealing with various aspects of the UI the project is quite old so I suspect that some methods are stale and never get used. Tests are run as Rspec tests. I would like to somehow create statistics method usage to delete stale ones and create a list of top 20 or 30 which are in active use. \nAny ideas how I can collect that data?</p>\n\n<p>To give more detail: I have all of the supporting page-object methods in lib directory. I run about 100 spec tests which call methods from these page objects. I want to collect stats on how often these methods from lib/ directory get used.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-generate", "rails-generators"], "comments": [{"owner": {"reputation": 1169, "user_id": 2980650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/245ca292e170237592a28dcac223a196?s=128&d=identicon&r=PG&f=1", "display_name": "Mezbah", "link": "https://stackoverflow.com/users/2980650/mezbah"}, "edited": false, "score": 0, "creation_date": 1522777461, "post_id": 49636041, "comment_id": 86279822, "body": "install devise and run migration then install petergate ."}, {"owner": {"reputation": 245, "user_id": 992104, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/349db56856a2c7d282918884e706ebda?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/992104/joe"}, "reply_to_user": {"reputation": 1169, "user_id": 2980650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/245ca292e170237592a28dcac223a196?s=128&d=identicon&r=PG&f=1", "display_name": "Mezbah", "link": "https://stackoverflow.com/users/2980650/mezbah"}, "edited": false, "score": 0, "creation_date": 1522777594, "post_id": 49636041, "comment_id": 86279904, "body": "@Mezbah Yes, that works on a fresh app. However, devise is already installed and migrated (the user model was generated by devise). I&#39;ve spent too much time on this app to delete everything and start over."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1522782145, "post_id": 49636041, "comment_id": 86282409, "body": "<code>bundle exec rails g petergate:install</code>?"}, {"owner": {"reputation": 245, "user_id": 992104, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/349db56856a2c7d282918884e706ebda?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/992104/joe"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1522798833, "post_id": 49636041, "comment_id": 86288877, "body": "@TomLord Tried that too, and <code>bundle exec rails generate petergate:install</code> unfortunately. However, I think I&#39;ve now found a solution, which I posted below. Thanks very much for the help though, I&#39;ve given you an upvote!"}], "answers": [{"comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1522834593, "post_id": 49640638, "comment_id": 86303179, "body": "What was the &quot;bit of text&quot;?"}], "tags": [], "owner": {"reputation": 245, "user_id": 992104, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/349db56856a2c7d282918884e706ebda?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/992104/joe"}, "is_accepted": true, "score": 0, "last_activity_date": 1522799155, "creation_date": 1522799155, "answer_id": 49640638, "question_id": 49636041, "link": "https://stackoverflow.com/questions/49636041/installing-petergate-returns-error-could-not-find-generator-petergateinstall/49640638#49640638", "title": "Installing petergate returns error `Could not find generator &#39;petergate:install&#39;`", "body": "<p>Okay, so I sort of ended up solving this, here's how. It's a very very hacky solution, but when all else fails...</p>\n\n<p>Since it was working on a fresh, new app, I made a commit to this new app before running petergate:install and after. I then pushed up to github and compared the two.</p>\n\n<p>The changes are actually very simple - a small migration, a bit of text added to your <code>User.rb</code> model. So I did the same things. And hey presto, it's now working, and interactions with the gem are too, so I'm not sure what the problem was. </p>\n\n<p>On a more complicated gem where you're likely to need other command-line functionality in the future, or where install makes a ton of changes, this is more likely to be an issue, but on a simple gem like this, it's seemed to work okay. </p>\n\n<p>Hope this helps anyone having the same (or a similar) problem.</p>\n"}], "owner": {"reputation": 245, "user_id": 992104, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/349db56856a2c7d282918884e706ebda?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/992104/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 49640638, "answer_count": 1, "score": 0, "last_activity_date": 1522799155, "creation_date": 1522776825, "question_id": 49636041, "link": "https://stackoverflow.com/questions/49636041/installing-petergate-returns-error-could-not-find-generator-petergateinstall", "title": "Installing petergate returns error `Could not find generator &#39;petergate:install&#39;`", "body": "<p>I keep getting this error. The full text is as follows:</p>\n\n<pre><code>$ rails g petergate:install\nRunning via Spring preloader in process 96515\nCould not find generator 'petergate:install'. Maybe you meant 'devise:install', 'responders:install' or 'integration_test'\nRun `rails generate --help` for more options.\n</code></pre>\n\n<p>I've already run <code>bundle install</code>. The gem is installed and within my gem directory. I know it shouldn't make a difference, but Devise is installed and my user model is called <code>user.rb</code>.</p>\n\n<p>Oddly enough, when I try and replicate the problem, by creating a new app and installing devise then petergate, the generation works.</p>\n\n<p>I've tried uninstalling petergate, taking it out of my bundle and putting it back in again, every combination of <code>bundle</code>/<code>bundle install</code>/<code>bundle update</code>, moving it to the top of the gemfile, trying <code>rails generate</code> rather than <code>rails g</code> , rebooting my computer, but nothing seems to be working.</p>\n\n<p>My <code>Gemfile</code> is as follows:</p>\n\n<pre><code>source 'https://rubygems.org'\ngit_source(:github) do |repo_name|\n  repo_name = \"#{repo_name}/#{repo_name}\" unless repo_name.include?(\"/\")\n  \"https://github.com/#{repo_name}.git\"\nend\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '~&gt; 5.1.5'\ngem 'petergate', '~&gt; 1.8', '&gt;= 1.8.1'\n# Use postgresql as the database for Active Record\ngem 'pg', '&gt;= 0.18', '&lt; 2.0'\n# Use Puma as the app server\ngem 'puma', '~&gt; 3.7'\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# See https://github.com/rails/execjs#readme for more supported runtimes\n# gem 'therubyracer', platforms: :ruby\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.2'\n# Turbolinks makes navigating your web application faster. Read more: https://github.com/turbolinks/turbolinks\ngem 'turbolinks', '~&gt; 5'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.5'\n# Use Redis adapter to run Action Cable in production\n# gem 'redis', '~&gt; 4.0'\n# Use ActiveModel has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug', platforms: [:mri, :mingw, :x64_mingw]\n  gem 'pry-byebug'\nend\ngroup :development do\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; anywhere in the code.\n  gem 'web-console', '&gt;= 3.3.0'\n  gem 'listen', '&gt;= 3.0.5', '&lt; 3.2'\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring'\n  gem 'spring-watcher-listen', '~&gt; 2.0.0'\nend\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\ngem 'friendly_id', '~&gt; 5.1.0'\ngem 'devise', '~&gt; 4.4', '&gt;= 4.4.2'\ngem 'bootstrap', '~&gt; 4.0.0'\n</code></pre>\n\n<p><code>Gemfile.lock</code>:</p>\n\n<pre><code>GEM\n  remote: https://rubygems.org/\n  specs:\n    actioncable (5.1.6)\n      actionpack (= 5.1.6)\n      nio4r (~&gt; 2.0)\n      websocket-driver (~&gt; 0.6.1)\n    actionmailer (5.1.6)\n      actionpack (= 5.1.6)\n      actionview (= 5.1.6)\n      activejob (= 5.1.6)\n      mail (~&gt; 2.5, &gt;= 2.5.4)\n      rails-dom-testing (~&gt; 2.0)\n    actionpack (5.1.6)\n      actionview (= 5.1.6)\n      activesupport (= 5.1.6)\n      rack (~&gt; 2.0)\n      rack-test (&gt;= 0.6.3)\n      rails-dom-testing (~&gt; 2.0)\n      rails-html-sanitizer (~&gt; 1.0, &gt;= 1.0.2)\n    actionview (5.1.6)\n      activesupport (= 5.1.6)\n      builder (~&gt; 3.1)\n      erubi (~&gt; 1.4)\n      rails-dom-testing (~&gt; 2.0)\n      rails-html-sanitizer (~&gt; 1.0, &gt;= 1.0.3)\n    activejob (5.1.6)\n      activesupport (= 5.1.6)\n      globalid (&gt;= 0.3.6)\n    activemodel (5.1.6)\n      activesupport (= 5.1.6)\n    activerecord (5.1.6)\n      activemodel (= 5.1.6)\n      activesupport (= 5.1.6)\n      arel (~&gt; 8.0)\n    activesupport (5.1.6)\n      concurrent-ruby (~&gt; 1.0, &gt;= 1.0.2)\n      i18n (&gt;= 0.7, &lt; 2)\n      minitest (~&gt; 5.1)\n      tzinfo (~&gt; 1.1)\n    arel (8.0.0)\n    autoprefixer-rails (8.2.0)\n      execjs\n    bcrypt (3.1.11)\n    bindex (0.5.0)\n    bootstrap (4.0.0)\n      autoprefixer-rails (&gt;= 6.0.3)\n      popper_js (&gt;= 1.12.9, &lt; 2)\n      sass (&gt;= 3.5.2)\n    builder (3.2.3)\n    byebug (10.0.2)\n    coderay (1.1.2)\n    coffee-rails (4.2.2)\n      coffee-script (&gt;= 2.2.0)\n      railties (&gt;= 4.0.0)\n    coffee-script (2.4.1)\n      coffee-script-source\n      execjs\n    coffee-script-source (1.12.2)\n    concurrent-ruby (1.0.5)\n    crass (1.0.3)\n    devise (4.4.3)\n      bcrypt (~&gt; 3.0)\n      orm_adapter (~&gt; 0.1)\n      railties (&gt;= 4.1.0, &lt; 6.0)\n      responders\n      warden (~&gt; 1.2.3)\n    erubi (1.7.1)\n    execjs (2.7.0)\n    ffi (1.9.23)\n    friendly_id (5.1.0)\n      activerecord (&gt;= 4.0.0)\n    globalid (0.4.1)\n      activesupport (&gt;= 4.2.0)\n    i18n (1.0.0)\n      concurrent-ruby (~&gt; 1.0)\n    jbuilder (2.7.0)\n      activesupport (&gt;= 4.2.0)\n      multi_json (&gt;= 1.2)\n    jquery-rails (4.3.1)\n      rails-dom-testing (&gt;= 1, &lt; 3)\n      railties (&gt;= 4.2.0)\n      thor (&gt;= 0.14, &lt; 2.0)\n    listen (3.1.5)\n      rb-fsevent (~&gt; 0.9, &gt;= 0.9.4)\n      rb-inotify (~&gt; 0.9, &gt;= 0.9.7)\n      ruby_dep (~&gt; 1.2)\n    loofah (2.2.2)\n      crass (~&gt; 1.0.2)\n      nokogiri (&gt;= 1.5.9)\n    mail (2.7.0)\n      mini_mime (&gt;= 0.1.1)\n    method_source (0.9.0)\n    mini_mime (1.0.0)\n    mini_portile2 (2.3.0)\n    minitest (5.11.3)\n    multi_json (1.13.1)\n    nio4r (2.3.0)\n    nokogiri (1.8.2)\n      mini_portile2 (~&gt; 2.3.0)\n    orm_adapter (0.5.0)\n    petergate (1.8.1)\n      activerecord (&gt; 4.0.0)\n    pg (1.0.0)\n    popper_js (1.12.9)\n    pry (0.11.3)\n      coderay (~&gt; 1.1.0)\n      method_source (~&gt; 0.9.0)\n    pry-byebug (3.6.0)\n      byebug (~&gt; 10.0)\n      pry (~&gt; 0.10)\n    puma (3.11.3)\n    rack (2.0.4)\n    rack-test (1.0.0)\n      rack (&gt;= 1.0, &lt; 3)\n    rails (5.1.6)\n      actioncable (= 5.1.6)\n      actionmailer (= 5.1.6)\n      actionpack (= 5.1.6)\n      actionview (= 5.1.6)\n      activejob (= 5.1.6)\n      activemodel (= 5.1.6)\n      activerecord (= 5.1.6)\n      activesupport (= 5.1.6)\n      bundler (&gt;= 1.3.0)\n      railties (= 5.1.6)\n      sprockets-rails (&gt;= 2.0.0)\n    rails-dom-testing (2.0.3)\n      activesupport (&gt;= 4.2.0)\n      nokogiri (&gt;= 1.6)\n    rails-html-sanitizer (1.0.4)\n      loofah (~&gt; 2.2, &gt;= 2.2.2)\n    railties (5.1.6)\n      actionpack (= 5.1.6)\n      activesupport (= 5.1.6)\n      method_source\n      rake (&gt;= 0.8.7)\n      thor (&gt;= 0.18.1, &lt; 2.0)\n    rake (12.3.1)\n    rb-fsevent (0.10.3)\n    rb-inotify (0.9.10)\n      ffi (&gt;= 0.5.0, &lt; 2)\n    responders (2.4.0)\n      actionpack (&gt;= 4.2.0, &lt; 5.3)\n      railties (&gt;= 4.2.0, &lt; 5.3)\n    ruby_dep (1.5.0)\n    sass (3.5.6)\n      sass-listen (~&gt; 4.0.0)\n    sass-listen (4.0.0)\n      rb-fsevent (~&gt; 0.9, &gt;= 0.9.4)\n      rb-inotify (~&gt; 0.9, &gt;= 0.9.7)\n    sass-rails (5.0.7)\n      railties (&gt;= 4.0.0, &lt; 6)\n      sass (~&gt; 3.1)\n      sprockets (&gt;= 2.8, &lt; 4.0)\n      sprockets-rails (&gt;= 2.0, &lt; 4.0)\n      tilt (&gt;= 1.1, &lt; 3)\n    spring (2.0.2)\n      activesupport (&gt;= 4.2)\n    spring-watcher-listen (2.0.1)\n      listen (&gt;= 2.7, &lt; 4.0)\n      spring (&gt;= 1.2, &lt; 3.0)\n    sprockets (3.7.1)\n      concurrent-ruby (~&gt; 1.0)\n      rack (&gt; 1, &lt; 3)\n    sprockets-rails (3.2.1)\n      actionpack (&gt;= 4.0)\n      activesupport (&gt;= 4.0)\n      sprockets (&gt;= 3.0.0)\n    thor (0.20.0)\n    thread_safe (0.3.6)\n    tilt (2.0.8)\n    turbolinks (5.1.0)\n      turbolinks-source (~&gt; 5.1)\n    turbolinks-source (5.1.0)\n    tzinfo (1.2.5)\n      thread_safe (~&gt; 0.1)\n    uglifier (4.1.8)\n      execjs (&gt;= 0.3.0, &lt; 3)\n    warden (1.2.7)\n      rack (&gt;= 1.0)\n    web-console (3.5.1)\n      actionview (&gt;= 5.0)\n      activemodel (&gt;= 5.0)\n      bindex (&gt;= 0.4.0)\n      railties (&gt;= 5.0)\n    websocket-driver (0.6.5)\n      websocket-extensions (&gt;= 0.1.0)\n    websocket-extensions (0.1.3)\n\nPLATFORMS\n  ruby\n\nDEPENDENCIES\n  bootstrap (~&gt; 4.0.0)\n  byebug\n  coffee-rails (~&gt; 4.2)\n  devise (~&gt; 4.4, &gt;= 4.4.2)\n  friendly_id (~&gt; 5.1.0)\n  jbuilder (~&gt; 2.5)\n  jquery-rails\n  listen (&gt;= 3.0.5, &lt; 3.2)\n  petergate (~&gt; 1.8, &gt;= 1.8.1)\n  pg (&gt;= 0.18, &lt; 2.0)\n  pry-byebug\n  puma (~&gt; 3.7)\n  rails (~&gt; 5.1.5)\n  sass-rails (~&gt; 5.0)\n  spring\n  spring-watcher-listen (~&gt; 2.0.0)\n  turbolinks (~&gt; 5)\n  tzinfo-data\n  uglifier (&gt;= 1.3.0)\n  web-console (&gt;= 3.3.0)\n\nBUNDLED WITH\n   1.16.1\n</code></pre>\n\n<p>Does anyone have any ideas on what this could be? I'm tearing my hair out.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "date", "simple-form"], "comments": [{"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 1, "creation_date": 1522774349, "post_id": 49634574, "comment_id": 86278008, "body": "can you paste the stacktrace for the error you mention?"}, {"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1522779737, "post_id": 49634574, "comment_id": 86281098, "body": "Why can&#39;t you use an HTML5 <code>&lt;input type=&quot;date&quot;&gt;</code> field?"}, {"owner": {"reputation": 1501, "user_id": 452684, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/75830be2998f0ae905c0b5daf4e1214b?s=128&d=identicon&r=PG", "display_name": "Pezholio", "link": "https://stackoverflow.com/users/452684/pezholio"}, "edited": false, "score": 0, "creation_date": 1522780990, "post_id": 49634574, "comment_id": 86281786, "body": "<code>&lt;input type=&quot;date&quot;&gt;</code> is OK for things like appointment bookings, but for memorable dates like dates of birth, it&#39;s easier for users to enter them manually"}], "answers": [{"comments": [{"owner": {"reputation": 1501, "user_id": 452684, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/75830be2998f0ae905c0b5daf4e1214b?s=128&d=identicon&r=PG", "display_name": "Pezholio", "link": "https://stackoverflow.com/users/452684/pezholio"}, "edited": false, "score": 0, "creation_date": 1522918450, "post_id": 49646921, "comment_id": 86346100, "body": "That&#39;s not a bad shout, but I&#39;ve got quite a few dates that I&#39;m using in my model, so would like to keep things as neat and repeatable as possible"}], "tags": [], "owner": {"reputation": 476, "user_id": 2645167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IEnRe.jpg?s=128&g=1", "display_name": "andriy-baran", "link": "https://stackoverflow.com/users/2645167/andriy-baran"}, "is_accepted": false, "score": 0, "last_activity_date": 1522832642, "creation_date": 1522832642, "answer_id": 49646921, "question_id": 49634574, "link": "https://stackoverflow.com/questions/49634574/ruby-on-rails-handling-invalid-dates-with-multiparameter-dates/49646921#49646921", "title": "Ruby on Rails: Handling invalid dates with multiparameter dates", "body": "<p>You can parse date in <code>before_filter</code> callback or introduce params object which will replace invalid date with date that can trigger AR validation. </p>\n"}, {"tags": [], "owner": {"reputation": 1501, "user_id": 452684, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/75830be2998f0ae905c0b5daf4e1214b?s=128&d=identicon&r=PG", "display_name": "Pezholio", "link": "https://stackoverflow.com/users/452684/pezholio"}, "is_accepted": true, "score": 0, "last_activity_date": 1522924333, "creation_date": 1522924333, "answer_id": 49670169, "question_id": 49634574, "link": "https://stackoverflow.com/questions/49634574/ruby-on-rails-handling-invalid-dates-with-multiparameter-dates/49670169#49670169", "title": "Ruby on Rails: Handling invalid dates with multiparameter dates", "body": "<p>I decided to have a stab at this myself and added the following to my base model class (I'm using Rails 5):</p>\n\n<pre><code>class ApplicationRecord &lt; ActiveRecord::Base\n  self.abstract_class = true\n\n  def update_attributes(attrs = {})\n    super parse_dates(attrs)\n  end\n\n  def parse_dates(attrs)\n    # First fetch any nested attributes\n    attrs.clone.each do |k, v|\n      next unless v.is_a?(Hash)\n      # If this is a hash, it's a nested attribute, so check for dates\n      attrs = parse_nested_dates(k, attrs)\n    end\n    # Now marshal the rest of the dates\n    marshal_dates(self.class, attrs)\n  end\n\n  def parse_nested_dates(key, attrs)\n    klass = Object.const_get key.split('_attributes').first.classify\n    attrs[key] = marshal_dates(klass, attrs[key])\n    attrs\n  end\n\n  def marshal_dates(klass, attrs)\n    # Get all the columns in the class that have a date type\n    date_columns = klass.columns_hash.select { |_k, value| value.type == :date }.keys\n    date_columns.each { |c| attrs = parse_date(attrs, c) }\n    attrs\n  end\n\n  def parse_date(attrs, property)\n    # Gather up all the date parts\n    keys = attrs.keys.select { |k| k =~ /#{property}/ }.sort\n    return attrs if keys.empty?\n    values = []\n    keys.each do |k|\n      values &lt;&lt; attrs[k]\n      attrs.delete(k)\n    end\n    # Set the date as a standard ISO8601 date\n    attrs[property] = values.join('-')\n    attrs\n  end\nend\n</code></pre>\n\n<p>This seems to work perfectly for both standard attributes and nested attributes, and means it automatically works for all date columns without me having to do anything.</p>\n"}], "owner": {"reputation": 1501, "user_id": 452684, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/75830be2998f0ae905c0b5daf4e1214b?s=128&d=identicon&r=PG", "display_name": "Pezholio", "link": "https://stackoverflow.com/users/452684/pezholio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 49670169, "answer_count": 2, "score": 0, "last_activity_date": 1522924333, "creation_date": 1522771666, "question_id": 49634574, "link": "https://stackoverflow.com/questions/49634574/ruby-on-rails-handling-invalid-dates-with-multiparameter-dates", "title": "Ruby on Rails: Handling invalid dates with multiparameter dates", "body": "<p>I've added a form to my rails app which asks for a date. Rather than use the (IMO) clunky <code>date_select</code> helper, or a date popup solution, I'd like to use seperate input fields for date, month and year (as specified in the <a href=\"https://www.gov.uk/service-manual/design/dates\" rel=\"nofollow noreferrer\">GDS service manual</a>). I've written a custom input for simple_form here:</p>\n\n<pre><code>class TextDateInput &lt; SimpleForm::Inputs::Base\n  def input(wrapper_options)\n    input_html_options[:pattern] = '[0-9]*'\n    @value = @builder.object.send(attribute_name)\n    @merged_input_options = merge_wrapper_options(input_html_options, wrapper_options)\n    \"#{date_field} #{month_field} #{year_field}\".html_safe\n  end\n\n  def date_field\n    @builder.label(attribute_name, class: 'grouped-date date') do\n      output = template.content_tag(:span, 'Date')\n      output += @builder.text_field(attribute_name,\n                                    @merged_input_options.merge(\n                                      name: \"#{@builder.object_name}[#{attribute_name}(3i)]\",\n                                      maxlength: 2,\n                                      value: @value&amp;.day\n                                    ))\n      output\n    end\n  end\n\n  def month_field\n    @builder.label(attribute_name, class: 'grouped-date month') do\n      output = template.content_tag(:span, 'Month')\n      output += @builder.text_field(attribute_name,\n                                    @merged_input_options.merge(\n                                      name: \"#{@builder.object_name}[#{attribute_name}(2i)]\",\n                                      maxlength: 2,\n                                      value: @value&amp;.month\n                                    ))\n      output\n    end\n  end\n\n  def year_field\n    @builder.label(attribute_name, class: 'grouped-date year') do\n      output = template.content_tag(:span, 'Year')\n      output += @builder.text_field(attribute_name,\n                                    @merged_input_options.merge(\n                                      name: \"#{@builder.object_name}[#{attribute_name}(1i)]\",\n                                      maxlength: 4,\n                                      value: @value&amp;.year\n                                    ))\n      output\n    end\n  end\nend\n</code></pre>\n\n<p>And it works perfectly in the frontend, however, if the user enters an invalid date (for example <code>99/99/9999</code>), Rails raises an <code>ActiveRecord::MultiparameterAssignmentErrors</code> error. Is there a clean way to handle this so rather than raising an error I can apply a validation error to the database object and show an invalid date error to the user?</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1522771679, "post_id": 49634548, "comment_id": 86276547, "body": "Define &quot;quotes&quot;. Is it possible these get escaped like <code>&#39;...\\&#39;...&#39;</code>?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1522771832, "post_id": 49634548, "comment_id": 86276627, "body": "What if there are more or less than two <code>&#39;</code>, e.g. what would <code>&quot;12&#39;34&#39;56&#39;78&quot;</code> return and what about <code>&quot;1234&#39;5678&quot;</code>?"}, {"owner": {"reputation": 1835, "user_id": 764601, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/386571a6fd12fc72ff39593da1af15c3?s=128&d=identicon&r=PG", "display_name": "maasha", "link": "https://stackoverflow.com/users/764601/maasha"}, "edited": false, "score": 0, "creation_date": 1522772315, "post_id": 49634548, "comment_id": 86276880, "body": "Use the rubular regex expression tester: <a href=\"http://rubular.com/\" rel=\"nofollow noreferrer\">rubular.com</a>"}, {"owner": {"reputation": 47, "user_id": 9090602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c45da1661939260978ef0dc4bf917ad?s=128&d=identicon&r=PG&f=1", "display_name": "Kev", "link": "https://stackoverflow.com/users/9090602/kev"}, "edited": false, "score": 0, "creation_date": 1522772992, "post_id": 49634548, "comment_id": 86277229, "body": "Sorry about the ambiguities in my post. I know the string I have will always have 2 single quotes (&#39;) , so Im not to concerned about cases with more or less than 2. But if it has only one it would fail and &quot;12&#39;34&#39;56&#39;78&quot; would return 34. Quotes will not be escaped"}], "answers": [{"tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 2, "last_activity_date": 1522772120, "creation_date": 1522772120, "answer_id": 49634716, "question_id": 49634548, "link": "https://stackoverflow.com/questions/49634548/ruby-grab-numbers-only-within-quotes/49634716#49634716", "title": "ruby: Grab numbers only within quotes", "body": "<p>You can find the quoted part first with <code>scan</code> and then remove non-digits:</p>\n\n<pre><code>&gt; results = \"bar9-9 '11001100 11110000 A'A\\n\".scan(/'[^']*'/).map{|m| m.gsub(/\\D/, '')}\n# =&gt; [\"1100110011110000\"]\n&gt; results[0]\n# =&gt; \"1100110011110000\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1522773134, "post_id": 49634882, "comment_id": 86277326, "body": "it does not work for strings with 0 or 1 outside the quotes or for other digits inside the quotes, e.g. &quot;01 &#39;2345&#39; 10&quot;."}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1522773968, "post_id": 49634882, "comment_id": 86277802, "body": "I&#39;d rather use <code>&#47;&#39;[^&#39;]*&#39;&#47;</code> ub <code>slice</code> to get predictable behaviour for multiple quotes, e.g. <code>&quot;bar9-9 &#39;11001100 11110000 A&#39; 121231&#39; A\\n&quot;</code>"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1522775417, "post_id": 49634882, "comment_id": 86278638, "body": "@mrzasa Okay, I&#39;ve updated the regex to be non-greedy. Also OP states <i>I know the string I have will always have 2 single quotes (&#39;)</i> So my answer is good either way."}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 0, "last_activity_date": 1522775287, "last_edit_date": 1522775287, "creation_date": 1522772752, "answer_id": 49634882, "question_id": 49634548, "link": "https://stackoverflow.com/questions/49634548/ruby-grab-numbers-only-within-quotes/49634882#49634882", "title": "ruby: Grab numbers only within quotes", "body": "<pre><code>foo.slice(/'.*?'/).scan(/\\d+/).join\n #=&gt; \"1100110011110000\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1522873235, "last_edit_date": 1522873235, "creation_date": 1522782444, "answer_id": 49637460, "question_id": 49634548, "link": "https://stackoverflow.com/questions/49634548/ruby-grab-numbers-only-within-quotes/49637460#49637460", "title": "ruby: Grab numbers only within quotes", "body": "<p>The zeros and ones within the quoted string can be extracted using <a href=\"http://ruby-doc.org/core-2.4.0/String.html#method-i-gsub\" rel=\"nofollow noreferrer\">String#gsub</a> with a regular expression, as opposed to methods that convert the string to an array of strings, modify the array and converted it back to a string. Here are three ways of doing that.</p>\n\n<pre><code>str =\"bar9-9 '11001100 11110000 A'A\\n\"\n</code></pre>\n\n<p><strong>#1: Extract the substring of interest and then remove characters other than zero and one</strong></p>\n\n<pre><code>def extract(str)\n  str[str.index(\"'\")+1, str.rindex(\"'\")-1].gsub(/[^01]/,'')\nend\n\nextract str\n  #=&gt; \"1100110011110000\"\n</code></pre>\n\n<p><strong>#2 Use a flag to indicate when zeroes and ones are to be kept</strong></p>\n\n<pre><code>def extract(str)\n  found = false\n  str.gsub(/./m) do |c|\n    found = !found if c == \"'\" \n    (found &amp;&amp; (c =~ /[01]/)) ? c : ''\n  end\nend\n\nextract str\n  #=&gt; \"1100110011110000\"\n</code></pre>\n\n<p>Here the regular expression requires the <code>m</code> modifier (to enable <em>multiline mode</em>) in order to convert the newline character to an empty string. (One could alternatively write <code>str.chomp.gsub(/./)...</code>.)</p>\n\n<p>Notice that this second method works when there are multiple single-quoted substrings.</p>\n\n<pre><code>extract \"bar9-9 '11001100 11110000 A'A'10x1y'\\n\"\n  #=&gt; \"1100110011110000101\"\n</code></pre>\n\n<p><strong>#3 Use the <a href=\"http://nithinbekal.com/posts/ruby-flip-flop/\" rel=\"nofollow noreferrer\">flip-flop</a> operator (variant of #2)</strong> </p>\n\n<pre><code>def extract(str)\n  str.gsub(/./m) do |c|\n    next '' if (c==\"'\") .. (c==\"'\")\n    c =~ /[01]/ ? c : ''\n  end\nend\n\nextract str\n  #=&gt; \"1100110011110000\"\nextract \"bar9-9 '11001100 11110000 A'A'10x1y'\\n\"\n  #=&gt; \"1100110011110000101\"\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 9090602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c45da1661939260978ef0dc4bf917ad?s=128&d=identicon&r=PG&f=1", "display_name": "Kev", "link": "https://stackoverflow.com/users/9090602/kev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 49634716, "answer_count": 3, "score": 2, "last_activity_date": 1522873235, "creation_date": 1522771576, "last_edit_date": 1522772271, "question_id": 49634548, "link": "https://stackoverflow.com/questions/49634548/ruby-grab-numbers-only-within-quotes", "title": "ruby: Grab numbers only within quotes", "body": "<p>I would like the following sub-string </p>\n\n<pre><code>1100110011110000\n</code></pre>\n\n<p>from</p>\n\n<pre><code>foo = \"bar9-9 '11001100 11110000 A'A\\n\"\n</code></pre>\n\n<p>I have so far used the below, which yields</p>\n\n<pre><code>puts foo.split(',').map!(&amp;:strip)[0].gsub(/\\D/, '')\n&gt;&gt; 991100110011110000\n</code></pre>\n\n<p>Getting rid of the 2 leading 9's is not too difficult in this scenario, but I would like a general solution which grabs numbers only within the <code>' '</code>  single quotes</p>\n"}, {"tags": ["javascript", "jquery", "html", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 199, "user_id": 6670519, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t7r9T.jpg?s=128&g=1", "display_name": "Dapeng114", "link": "https://stackoverflow.com/users/6670519/dapeng114"}, "edited": false, "score": 0, "creation_date": 1522812297, "post_id": 49633998, "comment_id": 86292063, "body": "you can use <code>@user_partial1.each do |partial| .....</code> in your file <code>view&#47;users&#47;show.js.erb</code>."}], "answers": [{"tags": [], "owner": {"reputation": 151, "user_id": 8544663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d5bd127ee648e485f57eebb637198e1?s=128&d=identicon&r=PG", "display_name": "Kumar Abhinav", "link": "https://stackoverflow.com/users/8544663/kumar-abhinav"}, "is_accepted": false, "score": 0, "last_activity_date": 1522820378, "creation_date": 1522820378, "answer_id": 49643563, "question_id": 49633998, "link": "https://stackoverflow.com/questions/49633998/rendering-multiple-partials-in-div-on-link-click-in-rails-app/49643563#49643563", "title": "rendering multiple partials in div on link click in rails app", "body": "<p>You can pass a parameter along with your <code>link_ to</code></p>\n\n<pre><code> &lt;li&gt;\n    &lt;%= link_to user_path(current_user,partial: '1'), :remote =&gt; true do %&gt;\n       &lt;i class=\"glyphicon glyphicon-home\"&gt;&lt;/i&gt; Partial1\n    &lt;% end %&gt;\n</code></pre>\n\n<p></li></p>\n\n<pre><code>    &lt;li&gt;\n    &lt;%= link_to user_path(current_user,partial: '2'), :remote =&gt; true do %&gt;\n       &lt;i class=\"glyphicon glyphicon-flash\"&gt;&lt;/i&gt; Partial2                \n    &lt;% end %&gt;\n&lt;/li&gt;  \n</code></pre>\n\n<p>In your controller you can get the value of partial to render:</p>\n\n<pre><code>@partial_to_render = params[:partial]\n</code></pre>\n\n<p>And in <code>view/users/show.js.erb</code></p>\n\n<pre><code>$(\"#usercontent\").html(\"&lt;%=escape_javascript(render :partial=&gt;\"shared/partial\" + @partial_to_render)%&gt;\");\n</code></pre>\n\n<p>If you need to append the content to the existing html in <code>#usercontent</code> div use Jquery <a href=\"http://api.jquery.com/append/\" rel=\"nofollow noreferrer\" title=\"append\">append</a> instead of $(\"#usercontent\").html(). </p>\n"}], "owner": {"reputation": 491, "user_id": 8404695, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/W3DQM.jpg?s=128&g=1", "display_name": "codegirl", "link": "https://stackoverflow.com/users/8404695/codegirl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 547, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522820378, "creation_date": 1522769861, "question_id": 49633998, "link": "https://stackoverflow.com/questions/49633998/rendering-multiple-partials-in-div-on-link-click-in-rails-app", "title": "rendering multiple partials in div on link click in rails app", "body": "<p>I'm very new to coding. \nI'm trying to find a solution on how I can render multiple partials in the same DIV on separate link click.</p>\n\n<p>So far I can render one partial in the div(partial 1), but I'm stuck on how to render other partials when other links are clicked.</p>\n\n<p>This is my code so far</p>\n\n<p>in <code>views/layouts/_sidebar.html.erb</code>I have</p>\n\n<pre><code>   &lt;li&gt;\n        &lt;%= link_to user_path(current_user), :remote =&gt; true do %&gt;\n           &lt;i class=\"glyphicon glyphicon-home\"&gt;&lt;/i&gt; Partial1\n        &lt;% end %&gt;\n\n   &lt;/li&gt;\n    &lt;li&gt;\n        &lt;%= link_to user_path(current_user), :remote =&gt; true do %&gt;\n           &lt;i class=\"glyphicon glyphicon-flash\"&gt;&lt;/i&gt; Partial2                \n        &lt;% end %&gt;\n    &lt;/li&gt;  \n</code></pre>\n\n<p>In the <code>users_controller.rb</code>I have</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  before_action :authenticate_user!\n\n   def show\n      @user = User.find(params[:id])\n\n      @user_partial1 = @user.1partials\n      @user_partial2 = @user.2partials\n\n       respond_to do |format|\n        format.html { @user_partial1 }\n        format.js { render :show }\n       end\n    end   \nend\n</code></pre>\n\n<p>In the <code>users/show.html.erb</code>I have</p>\n\n<p><code>&lt;div id=\"usercontent\"&gt;&lt;/div&gt;</code> were the partials should render.</p>\n\n<p>in the  <code>view/users/show.js.erb</code> there is this code </p>\n\n<p><code>$(\"#usercontent\").html(\"&lt;%=escape_javascript(render :partial=&gt;\"shared/partial1\")%&gt;\");</code></p>\n\n<p>This code works fine to render only one partial in one div but I can't figure out how to render the other partials in the <code>#usercontent</code>div when associated link is clicked. </p>\n\n<p>Can someone please help me?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "linux", "memory-management", "unicorn"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1522769415, "post_id": 49633767, "comment_id": 86275081, "body": "Are you using <a href=\"https://bogomips.org/unicorn/\" rel=\"nofollow noreferrer\">&quot;Unicorn&quot;</a> or <a href=\"http://tfwiki.net/wiki/Unicron\" rel=\"nofollow noreferrer\">&quot;Unicron&quot;</a>? You&#39;re randomly flipping between the two spellings."}, {"owner": {"reputation": 35, "user_id": 4551655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Vcos.jpg?s=128&g=1", "display_name": "ssuummit", "link": "https://stackoverflow.com/users/4551655/ssuummit"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1522769634, "post_id": 49633767, "comment_id": 86275223, "body": "Sorry for typo, its Unicorn. I have updated question."}, {"owner": {"reputation": 7605, "user_id": 584552, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dc70f4a04726fada8b9db8a18ff40412?s=128&d=identicon&r=PG", "display_name": "mdesantis", "link": "https://stackoverflow.com/users/584552/mdesantis"}, "edited": false, "score": 3, "creation_date": 1522770164, "post_id": 49633767, "comment_id": 86275566, "body": "If you can&#39;t circumscribe your issue to some source code I can hardly find out how someone could help you. Anyway, it&#39;s very likely that you have a memory leak in your application code or in a dependency."}, {"owner": {"reputation": 688, "user_id": 202613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89806d4eddb1df26f1d75240011afa9d?s=128&d=identicon&r=PG", "display_name": "Mereghost", "link": "https://stackoverflow.com/users/202613/mereghost"}, "edited": false, "score": 1, "creation_date": 1522787261, "post_id": 49633767, "comment_id": 86284870, "body": "You seem to have some kind of memory leak on your libraries. That being said, you should test each of your dependencies for memory leaks."}, {"owner": {"reputation": 35, "user_id": 4551655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Vcos.jpg?s=128&g=1", "display_name": "ssuummit", "link": "https://stackoverflow.com/users/4551655/ssuummit"}, "edited": false, "score": 0, "creation_date": 1522822796, "post_id": 49633767, "comment_id": 86295743, "body": "Thanks all for your response. I agree that there can be a memory leak in my app. But it should impact only child workers processes, not master process. I am not able to understand why my master process memory is increasing."}, {"owner": {"reputation": 35, "user_id": 4551655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Vcos.jpg?s=128&g=1", "display_name": "ssuummit", "link": "https://stackoverflow.com/users/4551655/ssuummit"}, "reply_to_user": {"reputation": 7605, "user_id": 584552, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dc70f4a04726fada8b9db8a18ff40412?s=128&d=identicon&r=PG", "display_name": "mdesantis", "link": "https://stackoverflow.com/users/584552/mdesantis"}, "edited": false, "score": 0, "creation_date": 1523292804, "post_id": 49633767, "comment_id": 86490078, "body": "@mdesantis: I tried to collect GC stat and Objectspace size for unicorn master process. Here below are links for log dump:  <b>Objectspace size:</b>     <a href=\"https://drive.google.com/open?id=1HYgitNhW1PDECfnRpxnqyRt_rblov2Xp\" rel=\"nofollow noreferrer\">drive.google.com/open?id=1HYgitNhW1PDECfnRpxnqyRt_rblov2Xp</a>    <b>GC stat:</b>     <a href=\"https://drive.google.com/open?id=1YVuCG6Mh8UJOYa72n8F4cEadi0QnGvTw\" rel=\"nofollow noreferrer\">drive.google.com/open?id=1YVuCG6Mh8UJOYa72n8F4cEadi0QnGvTw</a>"}, {"owner": {"reputation": 35, "user_id": 4551655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Vcos.jpg?s=128&g=1", "display_name": "ssuummit", "link": "https://stackoverflow.com/users/4551655/ssuummit"}, "edited": false, "score": 0, "creation_date": 1523292902, "post_id": 49633767, "comment_id": 86490132, "body": "From dump, I can deduce that Object space size is continuously increasing, which is indicating a memory leak in my Ruby app. But I am not able to understand why Major GC count is always fix. Does it mean major GC is not running? Any reason for the same?"}], "owner": {"reputation": 35, "user_id": 4551655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Vcos.jpg?s=128&g=1", "display_name": "ssuummit", "link": "https://stackoverflow.com/users/4551655/ssuummit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 247, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1522769559, "creation_date": 1522769135, "last_edit_date": 1522769559, "question_id": 49633767, "link": "https://stackoverflow.com/questions/49633767/unicorn-master-memory-increasing", "title": "Unicorn master memory increasing", "body": "<p>I have a ruby service running with unicorn which spawns 20 child worker. When I start my service, unicorn master starts with approx 520 MB of memory and then master spawn 20 child worker. My service runs perfectly for 7-8 day, but gradually unicorn master memory is kept increasing and goes up to 1.3 GB, which apparently is causing OOM error when unicorn master trying to fork a new child (which now need 1.3 GB of memory to fork new child)and due to increased memory footprint, memory was not available. </p>\n\n<p><strong>So my concern here is,</strong></p>\n\n<ul>\n<li>As per my understanding, Unicorn master doesn't serve any request, its\nsole purpose is to spawn missing child then why master process memory is increasing?</li>\n<li>I have unicorn-worker-killer configured with my app which is working absolutely\nfine. If there is any memory leak in my Ruby app then unicorn-worker-killer should already be handling it. Is this assumption wrong? Can there be any memory leak in master process due to my Ruby app?</li>\n<li>After killing the child worker, the unicorn is creating new child worker process with memory approx same as master process. Is it true that all child worker which Unicorn master will create over the time will start with the same memory as Unicorn master process?</li>\n</ul>\n\n<p>Here below is my service and machine configuration.</p>\n\n<p><strong>Ruby</strong>: 2.1.2</p>\n\n<p><strong>Unicorn</strong>: 4.6.3</p>\n\n<p><strong>Unicorn worker count</strong>: 20</p>\n\n<p><strong>OS</strong>: Debian GNU/Linux 8, Jessie</p>\n\n<p><strong>RAM</strong>: 24 GB</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1522772106, "post_id": 49633740, "comment_id": 86276766, "body": "Have you tried <code>pipe(&#39;BINARY:BINARY&#39;)</code>?"}, {"owner": {"reputation": 3381, "user_id": 220679, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a5c165ffc801b46ddff8851d5b49bf3e?s=128&d=identicon&r=PG", "display_name": "Ginty", "link": "https://stackoverflow.com/users/220679/ginty"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1522775389, "post_id": 49633740, "comment_id": 86278629, "body": "I hadn&#39;t tried that, but I just did and it makes no difference. It&#39;s as if passing the encoding to the <code>pipe</code> method doesn&#39;t do anything, I get exactly the same error message as above. Thanks though."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1522775470, "post_id": 49633740, "comment_id": 86278666, "body": "Are you sure that exception is being generated by the pipe you&#39;ve created and not some other filehandle?"}, {"owner": {"reputation": 3381, "user_id": 220679, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a5c165ffc801b46ddff8851d5b49bf3e?s=128&d=identicon&r=PG", "display_name": "Ginty", "link": "https://stackoverflow.com/users/220679/ginty"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1522776084, "post_id": 49633740, "comment_id": 86279028, "body": "Yes, I&#39;m 100% sure. I did have to actually change the code slightly to see the error as originally the code as written in the question was swallowing it and Marshal.dump was just hanging. I now have <code>str = Marshal.dump(generated_data); write.write(str)  # =&gt; Encoding error</code>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1522776155, "post_id": 49633740, "comment_id": 86279068, "body": "It&#39;s worth verifying that the <code>external_encoding</code> and <code>internal_encoding</code> of that pipe are set correctly because it sounds like something&#39;s gone awry."}, {"owner": {"reputation": 3381, "user_id": 220679, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a5c165ffc801b46ddff8851d5b49bf3e?s=128&d=identicon&r=PG", "display_name": "Ginty", "link": "https://stackoverflow.com/users/220679/ginty"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1522915378, "post_id": 49633740, "comment_id": 86344085, "body": "Thanks for your help man. It turns out that it wasn&#39;t actually related to the encoding, see my answer."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1522950498, "post_id": 49667131, "comment_id": 86368450, "body": "It could be that flooding the pipe causes lost data. Where that&#39;s an issue you may need to use <a href=\"https://ruby-doc.org/core-2.5.0/Kernel.html#method-i-select\" rel=\"nofollow noreferrer\"><code>select</code></a> to check if the pipe is ready to write before jamming data into it."}], "tags": [], "owner": {"reputation": 3381, "user_id": 220679, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a5c165ffc801b46ddff8851d5b49bf3e?s=128&d=identicon&r=PG", "display_name": "Ginty", "link": "https://stackoverflow.com/users/220679/ginty"}, "is_accepted": true, "score": 1, "last_activity_date": 1523003549, "last_edit_date": 1523003549, "creation_date": 1522915322, "answer_id": 49667131, "question_id": 49633740, "link": "https://stackoverflow.com/questions/49633740/how-to-handle-encoding-when-sending-marshaled-data-over-a-pipe-from-a-forked-pro/49667131#49667131", "title": "How to handle encoding when sending Marshaled data over a pipe from a forked process?", "body": "<p>I found that this problem only occurred on data strings longer than a certain length, in my case 64KB, and this corresponds to the size of the IO pipe buffer - which as far as I can tell is governed by the sytem you are running on and you cannot change it.</p>\n\n<p>I suspect that this encoding error occurs because the string gets chopped at a non-natural boundary at somewhere in the process.</p>\n\n<p>Changing my code to read a defined number of bytes fixed the problem:</p>\n\n<pre><code>reader, writer = IO.pipe\nreader.binmode\nwriter.binmode\n\npid = fork do\n\n  # Generate some data in the child process\n\n  str = Marshal.dump(generated_data)\n  writer.puts(str.bytesize)\n  writer.write(str)\n  writer.close\n  exit!(0)\nend\n\n# Get the size of the return string, this will block until the fork has the data ready \nsize_in_bytes = reader.gets.strip.to_i\nstr = reader.read(size_in_bytes)\nreader.close\n\nreturn_data = Marshal.load(str)\n</code></pre>\n\n<p><em>EDIT: Actually putting the pipe into binary mode is important too, the above solution is now robust in my application for transferring significant amounts of Marshaled data between the child and parent processes</em></p>\n"}], "owner": {"reputation": 3381, "user_id": 220679, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a5c165ffc801b46ddff8851d5b49bf3e?s=128&d=identicon&r=PG", "display_name": "Ginty", "link": "https://stackoverflow.com/users/220679/ginty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 49667131, "answer_count": 1, "score": 0, "last_activity_date": 1523003549, "creation_date": 1522769058, "question_id": 49633740, "link": "https://stackoverflow.com/questions/49633740/how-to-handle-encoding-when-sending-marshaled-data-over-a-pipe-from-a-forked-pro", "title": "How to handle encoding when sending Marshaled data over a pipe from a forked process?", "body": "<p>I am trying to get data back from a forked child process to the master process like this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>read, write = IO.pipe\n\npid = fork do\n\n  # Generate some data in the child process\n\n  Marshal.dump(generated_data, write)\n  exit!(0)\nend\n\nProcess.wait(pid)\nwrite.close\ndata = Marshal.load(read.read)\nread.close\n</code></pre>\n\n<p>This works perfectly for my initial test cases, however when the data generated within the child process gets more complicated, I start running into encoding errors like this when calling <code>Marshal.dump(generated_data, write)</code>:</p>\n\n<pre><code>*** Encoding::UndefinedConversionError Exception: \"\\xC3\" from ASCII-8BIT to UTF-8\n</code></pre>\n\n<p>I guess this is because the pipe is setup to handle UTF-8 data instead of ASCII-8BIT as being generated by Marshal, but so far I have been enable to work out how to configure the pipe correctly.</p>\n\n<p>e.g. This doesn't fix it:</p>\n\n<pre><code>read,write = IO.pipe('ASCII-8BIT')\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1522766010, "post_id": 49632572, "comment_id": 86272552, "body": "what is <code>c</code>? But yes, interesting..."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1522766353, "post_id": 49632572, "comment_id": 86272841, "body": "<code>module_function</code> creates a <i>private</i> instance method and <code>respond_to?</code> doesn&#39;t include private methods by default."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1522769309, "post_id": 49632572, "comment_id": 86275014, "body": "@Stefan: damn, this got me again :)"}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1522771189, "post_id": 49633793, "comment_id": 86276244, "body": "either that or <code>respond_to?(:url_standardizers, true)</code>"}], "tags": [], "owner": {"reputation": 14757, "user_id": 461347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba0965512a62083413b8056d674f83a0?s=128&d=identicon&r=PG", "display_name": "Rob Davis", "link": "https://stackoverflow.com/users/461347/rob-davis"}, "is_accepted": true, "score": 2, "last_activity_date": 1522774800, "last_edit_date": 1522774800, "creation_date": 1522769204, "answer_id": 49633793, "question_id": 49632572, "link": "https://stackoverflow.com/questions/49632572/respond-to-returns-false-when-self-can-call-the-method-and-super-seems-to-igno/49633793#49633793", "title": "respond_to? returns false when self can call the method, and super seems to ignore changes to inputs", "body": "<p>Since <code>module_function</code> creates a private instance method (according to <a href=\"https://apidock.com/ruby/Module/module_function\" rel=\"nofollow noreferrer\">the documentation</a>), consider using <code>private_method_defined?</code> instead:</p>\n\n<pre><code>(byebug) self.respond_to? :url_standardizers\nfalse\n\n(byebug) self.class.private_method_defined? :url_standardizers\ntrue\n</code></pre>\n\n<p>As Stefan mentions in the comments, <code>respond_to?</code> takes an <a href=\"https://apidock.com/ruby/Object/respond_to%3F\" rel=\"nofollow noreferrer\">optional second argument</a> that you can use to get private methods as well:</p>\n\n<pre><code>(byebug) self.respond_to?(:url_standardizers, true)\ntrue\n</code></pre>\n"}], "owner": {"reputation": 1819, "user_id": 2167965, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bd1a888b7db86f5141dad6e164ffaab8?s=128&d=identicon&r=PG", "display_name": "MCB", "link": "https://stackoverflow.com/users/2167965/mcb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 49633793, "answer_count": 1, "score": 1, "last_activity_date": 1522774800, "creation_date": 1522765656, "question_id": 49632572, "link": "https://stackoverflow.com/questions/49632572/respond-to-returns-false-when-self-can-call-the-method-and-super-seems-to-igno", "title": "respond_to? returns false when self can call the method, and super seems to ignore changes to inputs", "body": "<p>I'm confused by the results of my debugger outputs. <code>url_standardizers</code> does what I think it will. But then I don't get why <code>self</code> wont respond to the method added by the module or why the attribute <code>path</code> isn't saving with the added trailing slash,</p>\n\n<pre><code>module Standardizers\n\n  def url_standardizers(url_fragment)\n    url_fragment = url_fragment.strip\n    url_fragment &lt;&lt; \"/\" if url_fragment !~ /\\/\\z/\n    url_fragment.downcase\n  end\n\n  module_function :url_standardizers\n  ...\nend\n\nclass Article &lt; ApplicationRecord\n  include Standardizers\n\n   17:   def path=(pathname)\n   18:     byebug\n=&gt; 19:     super(url_standardizers(pathname))\n   20:   end\n   21: \n\n(byebug) url_standardizers(pathname)\n\"fewew/\"\n(byebug) self.respond_to? :url_standardizers\nfalse\n(byebug) c\n=&gt; \"fewew\"\n</code></pre>\n"}, {"tags": ["ruby", "sass", "dart", "deprecated"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1522771159, "post_id": 49632318, "comment_id": 86276217, "body": "didn&#39;t know about this before, but it looks like there&#39;s a little guide <a href=\"http://sass.logdown.com/posts/7081811\" rel=\"nofollow noreferrer\">in their blog post</a> ... have you tried that?"}], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 5456898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73dda0db7c7a7ca3da307e7ae8ba696?s=128&d=identicon&r=PG&f=1", "display_name": "Kim Annika", "link": "https://stackoverflow.com/users/5456898/kim-annika"}, "is_accepted": false, "score": 0, "last_activity_date": 1525599871, "creation_date": 1525599871, "answer_id": 50198318, "question_id": 49632318, "link": "https://stackoverflow.com/questions/49632318/ruby-sass-deprecation-how-do-i-see-if-my-version-is-being-deprecated/50198318#50198318", "title": "Ruby Sass Deprecation - How Do I see If my Version is Being Deprecated", "body": "<p>You've got the Ruby version. Dart version should be numbered (at least at time of writing): </p>\n\n<pre><code>1.3.x\ne.g.,\n1.3.2\n</code></pre>\n\n<p>How to install the dart version depends on which operating system you have and the link already provided gives these instructions. I use MacOS Sierra and ran in to a couple of problems. For anyone using Mac the things listed below may be helpful: </p>\n\n<ol>\n<li>Before installation change permissions on /usr/local:\n\n<ul>\n<li>sudo chown -R $USER /usr/local <br /><br />\nNOTE: don't forget to change permissions back when done:</li>\n<li>sudo chown root:wheel /usr/local</li>\n</ul></li>\n<li>Makes sure homebrew is healthy and updated before installing anything new:\n\n<ul>\n<li>brew update</li>\n<li>brew cleanup</li>\n<li>brew doctor</li>\n</ul></li>\n</ol>\n"}], "owner": {"reputation": 1661, "user_id": 6951159, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ca045af854ddb1025be551f2b044cf94?s=128&d=identicon&r=PG&f=1", "display_name": "The Chewy", "link": "https://stackoverflow.com/users/6951159/the-chewy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 321, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1525599871, "creation_date": 1522764857, "question_id": 49632318, "link": "https://stackoverflow.com/questions/49632318/ruby-sass-deprecation-how-do-i-see-if-my-version-is-being-deprecated", "title": "Ruby Sass Deprecation - How Do I see If my Version is Being Deprecated", "body": "<p>I've seen on a few blogs and Twitter recently that Ruby Sass is being deprecated.  When you look on the Sass docs, the installation method they use is the one I've always used on the command line i.e. <code>gem install sass</code> -- is this being made redundant? And if it is how do i install the new Dart Sass I've seen mentioned?</p>\n\n<p>When I do <code>sass --version</code> it shows <code>sass 3.5.5 (Bleeding Edge)</code> which doesn't sound like something that is about to be deprecated?</p>\n\n<p>V confused.</p>\n"}, {"tags": ["ruby", "docker", "logging", "fluentd"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 9587813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pcOKv.jpg?s=128&g=1", "display_name": "Rh1303", "link": "https://stackoverflow.com/users/9587813/rh1303"}, "edited": false, "score": 0, "creation_date": 1522775468, "post_id": 49633015, "comment_id": 86278665, "body": "I was thinking that was specifically for the Fluentd logs and not necessarily for container logs that it gets as input and outputs to files. I could definitely be wrong about that though. Thanks"}, {"owner": {"reputation": 41, "user_id": 9587813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pcOKv.jpg?s=128&g=1", "display_name": "Rh1303", "link": "https://stackoverflow.com/users/9587813/rh1303"}, "edited": false, "score": 1, "creation_date": 1522783309, "post_id": 49633015, "comment_id": 86282997, "body": "--log-rotate-age and --log-rotate-size did not do anything. It seems that fluentd ignores that. I&#39;m using the fluent/fluentd:latest docker image and using my own fluent.conf file to configure Fluentd. There isn&#39;t anything fancy in that"}, {"owner": {"reputation": 41, "user_id": 9587813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pcOKv.jpg?s=128&g=1", "display_name": "Rh1303", "link": "https://stackoverflow.com/users/9587813/rh1303"}, "edited": false, "score": 1, "creation_date": 1522848882, "post_id": 49633015, "comment_id": 86313182, "body": "That is one way of doing it...I guess. Essentially I would be copying the json log files and saving them in my own destination as raw log files? It seems a little redundant to have 2 sets of log files in different places, but I guess that&#39;s what I have to do. My goal was for fluentd to handle all of the logs but be able to rotate the individual log files it outputs in the &quot;match&quot; sections...if that makes sense."}], "tags": [], "owner": {"reputation": 634, "user_id": 4895148, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/57346680a3ce73584b9537b6945d5acc?s=128&d=identicon&r=PG&f=1", "display_name": "hichamx", "link": "https://stackoverflow.com/users/4895148/hichamx"}, "is_accepted": false, "score": 3, "last_activity_date": 1522826524, "last_edit_date": 1522826524, "creation_date": 1522766904, "answer_id": 49633015, "question_id": 49632142, "link": "https://stackoverflow.com/questions/49632142/does-fluentd-support-log-rotation-for-file-output/49633015#49633015", "title": "Does Fluentd support log rotation for file output?", "body": "<p>When you are using fluentd logging driver for docker then there is no container log files, there are only fluentd logs, and to rotate them you can use <a href=\"https://docs.fluentd.org/v1.0/articles/logging#log-rotation-setting\" rel=\"nofollow noreferrer\">this link.</a>\nIf you want docker to keep logs and to rotate them, then you have to change your stackfile from: </p>\n\n<pre><code>    logging:\n      driver: \"fluentd\"\n      options:\n        tag: container1  \n</code></pre>\n\n<p>to </p>\n\n<pre><code>  logging:\n   driver: \"json-file\"\n   options:\n      max-size: \"5m\" #max size of log file\n      max-file: \"2\" #how many files should docker keep\n</code></pre>\n\n<p>in fluentd you have to use the in_tail plugin instead of forward (fluentd should have access to log files in <code>/var/lib/docker/containers/*/*-json.log</code> )</p>\n\n<pre><code>&lt;source&gt;\n  type tail\n  read_from_head true\n  pos_file fluentd-docker.pos\n  path /var/lib/docker/containers/*/*-json.log\n  tag docker.*\n  format json\n&lt;/source&gt;\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 9587813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pcOKv.jpg?s=128&g=1", "display_name": "Rh1303", "link": "https://stackoverflow.com/users/9587813/rh1303"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6207, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1522826524, "creation_date": 1522764307, "question_id": 49632142, "link": "https://stackoverflow.com/questions/49632142/does-fluentd-support-log-rotation-for-file-output", "title": "Does Fluentd support log rotation for file output?", "body": "<p>The current setup I am working with is a Docker compose stack with multiple containers. These containers send their logging information to a logging container (inside the compose stack) running the Fluentd daemon. The configuration for Fluentd consists of one <code>in_forward</code> source that collects the logs and writes them to separate files, depending on the container. My Fluentd configuration file looks similar to this:</p>\n\n<pre><code>&lt;source&gt;\n  @type forward\n  port 24224\n  bind 0.0.0.0\n&lt;/source&gt;\n\n&lt;match container1&gt;\n   @type copy\n   &lt;store&gt;\n     @type file\n     path /fluentd/log/container1.*.log\n     format single_value\n     message_key \"log\"\n   &lt;/store&gt;\n&lt;/match&gt;\n\n...\n</code></pre>\n\n<p>My docker-compose.yml file looks something like this:</p>\n\n<pre><code>version: '3'\n\nservices:\n\n  container1:\n    build: ./container1\n    container_name: \"container1\" \n    depends_on:\n     - \"logger\" \n    logging:\n      driver: \"fluentd\"\n      options:\n        tag: container1  \n    networks:\n      static-net:\n        ipv4_address: 172.28.0.4  \n\n\n  ...\n\n\n  logger:\n    build: ./logger\n    container_name: \"logger\"\n    ports:\n     - \"24224:24224\"\n     - \"24224:24224/udp\"\n    volumes:\n     - ./logger/logs:/fluentd/log\n    networks:\n      static-net:\n        ipv4_address: 172.28.0.5          \n\nnetworks:\n  static-net:\n    ipam:\n      driver: default\n      config:\n       - subnet: 172.28.0.0/16\n</code></pre>\n\n<p>Everything works as expected, but I would ideally like to set Fluentd to keep a certain number of log files. I can change the size of the log files by configuring the <code>chunk_limit_size</code> parameter in a buffer section. However, even though I want this option, I still do not want Fluentd writing an endless amount of files. The <code>buffer_queue_limit</code> and <code>overflow_action</code> in the buffer configuration do not seem to affect anything. This application will be running continuously once deployed, so log rotation is a necessity. Several questions I have:</p>\n\n<ol>\n<li>Does Fluentd support log rotation for writing logs to files? If so, what parameters do I set in the Fluentd configuration file?</li>\n<li>If not, can I configure Docker in such a way that I can utilize its log rotation of the json logging driver for Fluentd?</li>\n<li>And if that is not possible, is there a way to add log rotation into Fluentd via a plugin or perhaps in the Fluentd docker container itself (or a sidecar container)?</li>\n</ol>\n"}, {"tags": ["ruby", "firefox", "selenium-webdriver", "capybara", "geckodriver"], "comments": [{"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1522779798, "post_id": 49632133, "comment_id": 86281130, "body": "Each version of geckodriver only supports a few versions of Firefox. Since Firefox 52 was released Mar 7, 2017 - and geckodriver 0.15 was released Mar 8, 2017 - I would expect those two to be compatible, but 0.17 may be too new.  Note that geckodriver back that early in 2017 had a number of bugs and missing features so trying to test with it may not be worth your time."}], "owner": {"reputation": 81, "user_id": 4536325, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/60e3796c1f958f223a1e01f632f1d8eb?s=128&d=identicon&r=PG&f=1", "display_name": "Jakub Smolar", "link": "https://stackoverflow.com/users/4536325/jakub-smolar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 499, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1522764274, "creation_date": 1522764274, "question_id": 49632133, "link": "https://stackoverflow.com/questions/49632133/capybara-run-with-firefox-52-unable-to-connect-to-mozilla-geckodriver", "title": "Capybara run with Firefox 52 - unable to connect to Mozilla geckodriver", "body": "<p>When running Ruby UI tests with Capybara I am getting Error:</p>\n\n<pre><code>Selenium::WebDriver::Error::WebDriverError: unable to connect to Mozilla geckodriver 127.0.0.1:4444\n        /home/hudson/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.4.0/lib/selenium/webdriver/common/service.rb:130:in `connect_until_stable'\n        /home/hudson/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.4.0/lib/selenium/webdriver/common/service.rb:74:in `block in start'\n        /home/hudson/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.4.0/lib/selenium/webdriver/common/socket_lock.rb:41:in `locked'\n        /home/hudson/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.4.0/lib/selenium/webdriver/common/service.rb:71:in `start'\n        /home/hudson/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.4.0/lib/selenium/webdriver/firefox/w3c_bridge.rb:41:in `initialize'\n        /home/hudson/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.4.0/lib/selenium/webdriver/common/driver.rb:52:in `new'\n        /home/hudson/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.4.0/lib/selenium/webdriver/common/driver.rb:52:in `for'\n        /home/hudson/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.4.0/lib/selenium/webdriver.rb:88:in `for'\n        /home/hudson/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/capybara-2.18.0/lib/capybara/selenium/driver.rb:23:in `browser'\n        /home/hudson/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/capybara-2.18.0/lib/capybara/selenium/driver.rb:49:in `visit'\n        /home/hudson/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/capybara-2.18.0/lib/capybara/session.rb:274:in `visit'\n        /home/hudson/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/capybara-2.18.0/lib/capybara/dsl.rb:50:in `block (2 levels) in &lt;module:DSL&gt;'\n        /home/hudson/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/site_prism-2.11/lib/site_prism/page.rb:36:in `load'\n</code></pre>\n\n<p>Version that I am using:</p>\n\n<pre><code>Ruby: 2.4.0\nFirefox: 52.6.0(This is required for my tests)\nGeckodriver: v0.17.0\ncapybara: 2.18.0\nselenium-webdriver: 3.4.0\n</code></pre>\n\n<p>Driver is set by this code:</p>\n\n<pre><code>Capybara.register_driver :selenium do |app|\n  Capybara::Selenium::Driver.new(app, :browser =&gt; :firefox)\nend\n</code></pre>\n\n<p>When I run the same tests on Chrome or latest Firefox(with Geckodriver v0.20.0) everything works great. But I need to run these tests of Firefox 52. I have tried different combinations between Geckodriver and Selenium-webdriver but unsuccessfully so far.<br>\nI have used <a href=\"https://github.com/mozilla/geckodriver/tree/v0.17.0\" rel=\"nofollow noreferrer\">https://github.com/mozilla/geckodriver/tree/v0.17.0</a> documentation.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1522767011, "post_id": 49631723, "comment_id": 86273309, "body": "FYI: you can use <code>Time.current</code> instead of <code>Time.zone.now</code>"}], "answers": [{"tags": [], "owner": {"reputation": 2285, "user_id": 2039726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fc7ff9bf8f9489ab7715282a9b7e9c?s=128&d=identicon&r=PG", "display_name": "MrShemek", "link": "https://stackoverflow.com/users/2039726/mrshemek"}, "is_accepted": false, "score": 3, "last_activity_date": 1522763696, "last_edit_date": 1522763696, "creation_date": 1522763329, "answer_id": 49631787, "question_id": 49631723, "link": "https://stackoverflow.com/questions/49631723/how-do-i-change-the-date-on-a-time-object/49631787#49631787", "title": "How do I change the date on a time object?", "body": "<p>You can do something like this:</p>\n\n<pre><code>time = Time.zone.now.change(year: 2018, month: 4, day: 13)\n</code></pre>\n\n<p>Here is the <a href=\"http://api.rubyonrails.org/classes/Time.html#method-i-change\" rel=\"nofollow noreferrer\">documentation</a></p>\n"}, {"tags": [], "owner": {"reputation": 74697, "user_id": 25068, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/152c39ec9f2570aef287d40f9824c5f2?s=128&d=identicon&r=PG", "display_name": "Tom Lehman", "link": "https://stackoverflow.com/users/25068/tom-lehman"}, "is_accepted": false, "score": 0, "last_activity_date": 1522787498, "creation_date": 1522787498, "answer_id": 49638689, "question_id": 49631723, "link": "https://stackoverflow.com/questions/49631723/how-do-i-change-the-date-on-a-time-object/49638689#49638689", "title": "How do I change the date on a time object?", "body": "<p>Jumping off of <a href=\"https://stackoverflow.com/users/2039726/mrshemek\">MrShemek</a>'s answer I monkeypatched <code>Time</code>:</p>\n\n<pre><code>class Time\n  def set_date_to(date_or_date_string)\n    date = date_or_date_string.is_a?(Date) ? date_or_date_string : Date.parse(date_or_date_string)\n    change(year: date.year, month: date.month, day: date.day)\n  end\nend\n</code></pre>\n\n<p>Which seems to work</p>\n"}, {"tags": [], "owner": {"reputation": 688, "user_id": 202613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89806d4eddb1df26f1d75240011afa9d?s=128&d=identicon&r=PG", "display_name": "Mereghost", "link": "https://stackoverflow.com/users/202613/mereghost"}, "is_accepted": false, "score": 0, "last_activity_date": 1522788589, "creation_date": 1522788589, "answer_id": 49638954, "question_id": 49631723, "link": "https://stackoverflow.com/questions/49631723/how-do-i-change-the-date-on-a-time-object/49638954#49638954", "title": "How do I change the date on a time object?", "body": "<p>If you're not working with a Rails project (or does not wish to load <code>active_support</code>), you can use Ruby's <code>Date</code> library.</p>\n\n<p>With it you can perform basic time math, like so:</p>\n\n<pre><code>require 'date'\n\nd = Time.now.utc.to_datetime # Datetime preserves time and date information\nd.next_day(10)               # same as d + 10\nd.prev_day                   # same as d - 1\nd.prev_month(2)              # same as d &lt;&lt; 2\nd.next_month                 # same as d &gt;&gt; 1\nd.to_time                    # You can convert back to a Time object if needed. \n</code></pre>\n\n<p><code>DateTime</code> can deal with leap seconds/years but not with timezones.</p>\n"}], "owner": {"reputation": 74697, "user_id": 25068, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/152c39ec9f2570aef287d40f9824c5f2?s=128&d=identicon&r=PG", "display_name": "Tom Lehman", "link": "https://stackoverflow.com/users/25068/tom-lehman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1522788589, "creation_date": 1522763138, "question_id": 49631723, "link": "https://stackoverflow.com/questions/49631723/how-do-i-change-the-date-on-a-time-object", "title": "How do I change the date on a time object?", "body": "<p>Suppose I have</p>\n\n<pre><code>&gt; time = Time.zone.now\n=&gt; Tue, 03 Apr 2018 09:44:14 EDT -04:00\n</code></pre>\n\n<p>I want something like</p>\n\n<pre><code>&gt; time.set_date_to(Date.parse(\"2018-04-13\"))\n&gt; time\n=&gt; Tue, 13 Apr 2018 09:44:14 EDT -04:00\n</code></pre>\n\n<p>Does this exist?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "ruby-on-rails-5.1"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 2, "creation_date": 1522758046, "post_id": 49629107, "comment_id": 86266637, "body": "A database index cannot improve the performance of <code>ILIKE</code> queries. Did you consider using a full-text index?"}, {"owner": {"reputation": 403, "user_id": 6227057, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1e899d21cb72710b518e844a244e410a?s=128&d=identicon&r=PG", "display_name": "Ernesto G", "link": "https://stackoverflow.com/users/6227057/ernesto-g"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1522766007, "post_id": 49629107, "comment_id": 86272549, "body": "That&#39;s exactly what I just realized a moment ago by reading a little bit about trigram indexes, which are supposed to help with ILIKE %% type of conditions."}], "answers": [{"comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1522758168, "post_id": 49629507, "comment_id": 86266716, "body": "Why do you think this can improve the performance significantly?"}], "tags": [], "owner": {"reputation": 412, "user_id": 4779465, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/rxj3q.png?s=128&g=1", "display_name": "Prasanth_Rubyist", "link": "https://stackoverflow.com/users/4779465/prasanth-rubyist"}, "is_accepted": false, "score": 0, "last_activity_date": 1522756619, "creation_date": 1522756619, "answer_id": 49629507, "question_id": 49629107, "link": "https://stackoverflow.com/questions/49629107/rails-improve-performance-of-simple-searching-method/49629507#49629507", "title": "Rails: Improve performance of simple searching method", "body": "<p>Suggestions to improve the AR query speed use a direct Postgresql query in your model </p>\n\n<p><strong>Example for in you keywords loop</strong></p>\n\n<pre><code>query = \"SELECT * FROM part_masters WHERE......\"\n\nPartMaster.connection.execute(query, :skip_logging)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 403, "user_id": 6227057, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1e899d21cb72710b518e844a244e410a?s=128&d=identicon&r=PG", "display_name": "Ernesto G", "link": "https://stackoverflow.com/users/6227057/ernesto-g"}, "edited": false, "score": 0, "creation_date": 1522766313, "post_id": 49632143, "comment_id": 86272811, "body": "Would you please specify a little bit more on how I could implement it. The problem I find is that I would have to place this combining-fields column in the  partvariants table, and I need to retrieve the rows from part_masters that are found. So I would had to save the ids for the rows found in part_variants, and then find all the rows of part_masters that mathces with these id&#39;s."}], "tags": [], "owner": {"reputation": 1379, "user_id": 2101252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXPjA.jpg?s=128&g=1", "display_name": "s1mpl3", "link": "https://stackoverflow.com/users/2101252/s1mpl3"}, "is_accepted": false, "score": 0, "last_activity_date": 1522764308, "creation_date": 1522764308, "answer_id": 49632143, "question_id": 49629107, "link": "https://stackoverflow.com/questions/49629107/rails-improve-performance-of-simple-searching-method/49632143#49632143", "title": "Rails: Improve performance of simple searching method", "body": "<p>I agree with spikermann. Also the multiple ORs in a loop is not helping neither.</p>\n\n<p>If you only want to work on a vanilla solution vs adding SOLR or any other engine, you could have one separate field to hold copies of the strings that you would like to search. (ex. name, description, ...). The search this field only. You will need some method to keep the field updated when the name, description or other values change.</p>\n"}], "owner": {"reputation": 403, "user_id": 6227057, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1e899d21cb72710b518e844a244e410a?s=128&d=identicon&r=PG", "display_name": "Ernesto G", "link": "https://stackoverflow.com/users/6227057/ernesto-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 272, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1522860620, "creation_date": 1522755457, "last_edit_date": 1522860620, "question_id": 49629107, "link": "https://stackoverflow.com/questions/49629107/rails-improve-performance-of-simple-searching-method", "title": "Rails: Improve performance of simple searching method", "body": "<p>I have been building an app these days. The functionality is nothing fancy at all, I have to connect to a client's SOAP webservice, fetch some data, save it into my pg database and build a search functionality based on this data.</p>\n\n<p>The search has to be performed on two tables,  both combined are like 80K rows. It needs to look for every word in the input text in several fields from these two tables, which have a classical assocation one to many. </p>\n\n<p>Previous to get my hands dirty I was looking at the choices I had to get the functionality done (ransack, searchkick, scoped_search etc), but I ended up trying first just vanilla Active Record and I was very surprised to find that I could achieve the functionality way easier than I thought and with an acceptable response time, about to 400ms active record time for the most expensive  queries in local.</p>\n\n<p>So the problem is, the performance of this app in Heroku is way worse than in local (I'm developing using  a vagrant box btw). On average, queries take 2-3 times longer than in local, so the user experience goes from acceptable to poor. I was wondering If someone could help to improve my query. I'm also worried about how the background job that fetchs the data is also way les performant than in local and about some issues with the memory, but that's a different story though.</p>\n\n<p>The relevant snippets are these:</p>\n\n<p><code>part_master.rb</code> where the search method is implemented:</p>\n\n<pre><code>class PartMaster &lt; ApplicationRecord\nhas_many :part_variants, foreign_key: 'sap_cod', primary_key: 'sap_cod'\nhas_many :locations, foreign_key: 'sap_cod', primary_key: 'sap_cod'\n\nscope :con_stock, -&gt; { where(\"stock &gt; 0\") }\nscope :planta, -&gt; (planta) { where planta_cod: planta}\n\ndef self.search(params)\n  recordset = PartMaster.joins(:part_variants).all\n  recordset = recordset.con_stock if params[:stock].present?\n  recordset = recordset.planta(params[:planta]) if params[:planta].present?\n  recordset = search_keywords(params[:search], recordset)\n  recordset\nend\n\nprivate \n\ndef self.search_keywords(query, recordset)\n  keywords = query.to_s.strip.split\n  if query\n    keywords.each do |keyword|\n      recordset = recordset.where('part_masters.sap_cod ILIKE :q OR \n                          unaccent(descripcion_maestro) ILIKE unaccent(:q)\n                          OR fabricante ILIKE :q OR ref_fabricante ILIKE :q \n                          OR fabricante_prov ILIKE :q OR ref_prov ILIKE :q', \n                          q: \"%#{keyword}%\")\n    end\n    recordset.distinct.order(:sap_cod)\n   end\n end\nend\n</code></pre>\n\n<p>And this is the call to the method from the controller:</p>\n\n<pre><code>  def index\n   parts = params[:search].present? ? PartMaster.search(params) : \n           PartMaster.none\n   @parts = parts.page(params[:page]).per(50)\n  end\n</code></pre>\n\n<p>I have an index in every searchable field.</p>\n\n<p>EDIT: Finally I have tried a mix of the proposal in the answers. I have created one field in each table that is a concatenation of the relevant fields for the search, having so 2 OR statements instead of 5, and I also have put trigram GIN indexes in both new fields. I haven't seen any improvement though, the times corresponding to ActiveRecord are very similar, perhaps marginally better. </p>\n\n<p>The thing is, the output for the query using EXPLAIN dones't show any info about the indexes being used.</p>\n\n<pre><code>Hash Join  (cost=2243.29..6067.41 rows=2697 width=132)\nHash Cond: ((part_variants.sap_cod)::text = (part_masters.sap_cod)::text)\nJoin Filter: ((part_masters.combinada_maestro ~~* '%rodamiento%'::text)         OR (part_variants.combinada_info ~~* '%rodamiento%'::text))\n-&gt;  Seq Scan on part_variants  (cost=0.00..1264.96 rows=54896 width=18)\n-&gt;  Hash  (cost=1128.13..1128.13 rows=34813 width=132)\n     -&gt;  Seq Scan on part_masters  (cost=0.00..1128.13 rows=34813             width=132)\n(6 rows)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "ransack"], "comments": [{"owner": {"reputation": 2298, "user_id": 5883753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b32d66e6c723279fdfc2a90b269a070c?s=128&d=identicon&r=PG&f=1", "display_name": "fongfan999", "link": "https://stackoverflow.com/users/5883753/fongfan999"}, "edited": false, "score": 0, "creation_date": 1522755798, "post_id": 49628916, "comment_id": 86265102, "body": "Hi @Brian, Could you show the value of <code>params[:q][: female_founder_eq]</code> ?"}, {"owner": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "edited": false, "score": 2, "creation_date": 1522756845, "post_id": 49628916, "comment_id": 86265763, "body": "Just a general question, why do you use an enum if you can use a boolean attribute directly?"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 7973321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--NtSue9MXgs/AAAAAAAAAAI/AAAAAAAAAGo/90n6aQGfAsc/photo.jpg?sz=128", "display_name": "Brian O Halloran", "link": "https://stackoverflow.com/users/7973321/brian-o-halloran"}, "edited": false, "score": 0, "creation_date": 1522832927, "post_id": 49638615, "comment_id": 86302014, "body": "Thanks for your answer. I&#39;ve tried the solution you&#39;ve suggested above but still no look. The display in the drop-down still reverts back to &#39;Any&#39; after the search is done."}, {"owner": {"reputation": 71, "user_id": 3349138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81c553bef5b6fcaaf53f363c69dc6f8d?s=128&d=identicon&r=PG", "display_name": "Muskworker", "link": "https://stackoverflow.com/users/3349138/muskworker"}, "reply_to_user": {"reputation": 57, "user_id": 7973321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--NtSue9MXgs/AAAAAAAAAAI/AAAAAAAAAGo/90n6aQGfAsc/photo.jpg?sz=128", "display_name": "Brian O Halloran", "link": "https://stackoverflow.com/users/7973321/brian-o-halloran"}, "edited": false, "score": 0, "creation_date": 1522846177, "post_id": 49638615, "comment_id": 86311090, "body": "@BrianOHalloran I&#39;ve looked into it a bit more and it looks like for ransack specifically the thing you&#39;d use for <code>:selected</code> is <code>@q.base[:female_founder_eq].try(:value)</code> (where <code>@q</code> is whatever your query is) and I&#39;ve updated my answer - can you try again?"}, {"owner": {"reputation": 57, "user_id": 7973321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--NtSue9MXgs/AAAAAAAAAAI/AAAAAAAAAGo/90n6aQGfAsc/photo.jpg?sz=128", "display_name": "Brian O Halloran", "link": "https://stackoverflow.com/users/7973321/brian-o-halloran"}, "edited": false, "score": 0, "creation_date": 1522917382, "post_id": 49638615, "comment_id": 86345329, "body": "you are amazing! Works perfectly. Thanks so much for your help!"}], "tags": [], "owner": {"reputation": 71, "user_id": 3349138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81c553bef5b6fcaaf53f363c69dc6f8d?s=128&d=identicon&r=PG", "display_name": "Muskworker", "link": "https://stackoverflow.com/users/3349138/muskworker"}, "is_accepted": true, "score": 1, "last_activity_date": 1522845963, "last_edit_date": 1522845963, "creation_date": 1522787246, "answer_id": 49638615, "question_id": 49628916, "link": "https://stackoverflow.com/questions/49628916/boolean-value-not-saving-in-display/49638615#49638615", "title": "Boolean value not saving in display", "body": "<p>Here's where Rails determines whether to add the prompt, in rails/actionview/lib/action_view/helpers/tags/base.rb: </p>\n\n<pre><code>      def add_options(option_tags, options, value = nil)\n        if options[:include_blank]\n          option_tags = tag_builder.content_tag_string(\"option\", options[:include_blank].kind_of?(String) ? options[:include_blank] : nil, value: \"\") + \"\\n\" + option_tags\n        end\n        if value.blank? &amp;&amp; options[:prompt]\n          option_tags = tag_builder.content_tag_string(\"option\", prompt_text(options[:prompt]), value: \"\") + \"\\n\" + option_tags\n        end\n        option_tags\n      end\n</code></pre>\n\n<p>When Rails is building its select tag, it's determining whether to include a prompt by using <code>blank?</code>, which can't distinguish whether it's <code>nil</code> or <code>false</code>; because <code>@company.female_founder</code> is <code>false</code>, and <code>false</code> is <code>blank?</code>, it will assume no value was given and add the prompt.  (This may or may not be intentional on their part.)</p>\n\n<p>Now, the <code>value</code> here is the tag's selected value, which can be overriden if the <code>:selected</code> option is defined, so if <code>:selected</code> is manually set to your No value of <code>0</code>, then it should suppress the prompt as expected (because <code>0</code> is not <code>blank?</code>).  Here's a kludge that appears to work for me for a regular form:</p>\n\n<pre><code># 1 if true - show 'Yes', 0 if false - show 'No', nil if nil - show 'Any'\n&lt;%= f.select :female_founder, Company.female_founders.to_a, { prompt: \"Any\", selected: { true =&gt; 1, false =&gt; 0 }[@company.female_founder] } %&gt;\n</code></pre>\n\n<p>For ransack it'll need to look something like this:</p>\n\n<pre><code>&lt;%= f.select :female_founder_eq, Company.female_founders.to_a, {prompt: \"Any\", selected: { true =&gt; 1, false =&gt; 0 }[@q.base[:female_founder_eq].try(:value)] } %&gt;\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 7973321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--NtSue9MXgs/AAAAAAAAAAI/AAAAAAAAAGo/90n6aQGfAsc/photo.jpg?sz=128", "display_name": "Brian O Halloran", "link": "https://stackoverflow.com/users/7973321/brian-o-halloran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "accepted_answer_id": 49638615, "answer_count": 1, "score": 0, "last_activity_date": 1522845963, "creation_date": 1522754827, "question_id": 49628916, "link": "https://stackoverflow.com/questions/49628916/boolean-value-not-saving-in-display", "title": "Boolean value not saving in display", "body": "<p>I have a Class Company with a boolean attribute of female_founder.\nThe company either has a female_founder (true) or not (false). </p>\n\n<p>I have created a search filter using the ransack gem to query whether a company is female-founded or not. When I query 'true' searches, the enum value saves and displays fine, but when I search for the 'false' value, the display resets to the prompt value I have given it. </p>\n\n<p>Why is this? And how can I fix it? I want the display to show whichever value I have selected. </p>\n\n<h3>Schema</h3>\n\n<pre><code>create_table \"companies\", force: :cascade do |t|\n ...\n t.boolean  \"female_founder\"\n ...\nend \n</code></pre>\n\n<h3>Company.rb</h3>\n\n<pre><code>class Company &lt; ApplicationRecord\n enum female_founders: {\n  'Yes' =&gt; 1,\n  'No' =&gt; 0\n }\nend\n</code></pre>\n\n<h3>Search.html.erb</h3>\n\n<pre><code>&lt;%= f.label :female_founder_eq, 'Female Founder' %&gt;\n&lt;%= f.select :female_founder_eq, Company.female_founders.to_a, {prompt: \"Any\"} %&gt;\n</code></pre>\n\n<p>Search 'Yes' for female_founder returns correct display</p>\n\n<p><a href=\"https://i.stack.imgur.com/oGrWp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oGrWp.png\" alt=\"Search &#39;Yes&#39; for female_founder\"></a></p>\n\n<p>Search 'No' for female_founder resets search display to prompt value. \nThe search queries correctly, it is just the display that is incorrect. \n<a href=\"https://i.stack.imgur.com/7DLiE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7DLiE.png\" alt=\"Search &#39;No&#39; for female_founder\"></a></p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 193, "user_id": 5077888, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cc4cee6732757f8cebd112275d377569?s=128&d=identicon&r=PG", "display_name": "priorww1", "link": "https://stackoverflow.com/users/5077888/priorww1"}, "edited": false, "score": 1, "creation_date": 1522768789, "post_id": 49628811, "comment_id": 86274641, "body": "The general principle applied here, if you&#39;re interested, is called the &quot;Law of Demeter&quot; - aka &quot;only talk to your neighbours&quot;. The reason your original code felt so complicated was because of the long method chains; reaching deep into a nested object model. By contrast, my refactored code is only going &quot;1 layer deeper&quot; at each stage."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 193, "user_id": 5077888, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cc4cee6732757f8cebd112275d377569?s=128&d=identicon&r=PG", "display_name": "priorww1", "link": "https://stackoverflow.com/users/5077888/priorww1"}, "edited": false, "score": 1, "creation_date": 1522769026, "post_id": 49628811, "comment_id": 86274813, "body": "(1) Did the result fail? Yes, if any scenario failed. (2) Did the scenario fail? Yes, if any assertion failed. (3) Did the assertion fail? Yes, if it has an error message. -- You can check for failure at any level in the hierarchy; the question just gets delegated down each layer."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 193, "user_id": 5077888, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cc4cee6732757f8cebd112275d377569?s=128&d=identicon&r=PG", "display_name": "priorww1", "link": "https://stackoverflow.com/users/5077888/priorww1"}, "edited": false, "score": 1, "creation_date": 1522769126, "post_id": 49628811, "comment_id": 86274878, "body": "To make this really complete, you <i>could</i> also define something like: <code>Class Newman::Assertion; def failed?; !exception_message.nil?; end; end</code>"}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 1, "last_activity_date": 1522754999, "last_edit_date": 1522754999, "creation_date": 1522754483, "answer_id": 49628811, "question_id": 49628628, "link": "https://stackoverflow.com/questions/49628628/search-for-nested-ruby-object/49628811#49628811", "title": "Search for nested Ruby object", "body": "<p>Here's a more concise way of writing your above logic:</p>\n\n<pre><code>results.scenarios.any? do |scenario|\n  scenario.assertions.any?(&amp;:exception_message)\nend\n</code></pre>\n\n<p>However, that's still quite a complex block of logic to put in one place. You could break this down further by doing something like:</p>\n\n<pre><code>results.scenarios.any?(&amp;:failed?)\n\nclass Newman::Scenario\n  def failed?\n    assertions.any?(&amp;:exception_message)\n  end\nend\n</code></pre>\n\n<p>Or even, to take it a step further:</p>\n\n<pre><code>results.scenario_failed?\n\nclass Newman::Results\n  def scenario_failed?\n    scenarios.any?(&amp;:failed?)\n  end\nend\n\nclass Newman::Scenario\n  def failed?\n    assertions.any?(&amp;:exception_message)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 193, "user_id": 5077888, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cc4cee6732757f8cebd112275d377569?s=128&d=identicon&r=PG", "display_name": "priorww1", "link": "https://stackoverflow.com/users/5077888/priorww1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 49628811, "answer_count": 1, "score": 0, "last_activity_date": 1522754999, "creation_date": 1522753898, "question_id": 49628628, "link": "https://stackoverflow.com/questions/49628628/search-for-nested-ruby-object", "title": "Search for nested Ruby object", "body": "<p>So I have a question I want to ask my Ruby object: </p>\n\n<blockquote>\n  <p>Are there any failed scenarios in my testing results?</p>\n</blockquote>\n\n<p>The object that I am inquiring looks like this:</p>\n\n<pre><code>=&gt; #&lt;Newman::Results:0x007fdcc2b48b28 @environment=\"dev\", @build_name=\"customers\", @build_id=\"119f3875-3793-4ae7-9155-78f0ce8c7047\", @scenarios=[#&lt;Newman::Scenario:0x007fdcc2b489c0 @name=\"POST /customers/zuora/create\", @assertions=[#&lt;Newman::Assertion:0x007fdcc2b48970 @test=\"Status code is 200\"&gt;]&gt;, #&lt;Newman::Scenario:0x007fdcc2b48948 @name=\"GET ssoauthentication/../Authentication/token\", @assertions=[#&lt;Newman::Assertion:0x007fdcc2b488f8 @test=\"Status code is 200\"&gt;]&gt;, #&lt;Newman::Scenario:0x007fdcc2b488d0 @name=\"GET /users?CustomerId={customerId}\", @assertions=[#&lt;Newman::Assertion:0x007fdcc2b48880 @test=\"Status code is 200\"&gt;]&gt;, #&lt;Newman::Scenario:0x007fdcc2b48858 @name=\"GET /locations?CustomerId={customerId}\", @assertions=[#&lt;Newman::Assertion:0x007fdcc2b48808 @test=\"Status code is 200\"&gt;]&gt;, #&lt;Newman::Scenario:0x007fdcc2b487e0 @name=\"PUT/users/{userId}/avatar\", @assertions=[#&lt;Newman::Assertion:0x007fdcc2b48790 @test=\"Status code is 200\"&gt;]&gt;, #&lt;Newman::Scenario:0x007fdcc2b48768 @name=\"PUT /customers/{customerId}/logo\", @assertions=[#&lt;Newman::Assertion:0x007fdcc2b48718 @test=\"Status code is 200\"&gt;]&gt;, #&lt;Newman::Scenario:0x007fdcc2b486f0 @name=\"POST /customers/{customerId}/positions\", @assertions=[#&lt;Newman::Assertion:0x007fdcc2b486a0 @test=\"Successful POST request\", @exception_message=\"expected 200 to be one of [ 201, 202 ]\", @exception_source=\"AssertionError: expected 200 to be one of [ 201, 202 ]\\n   at Object.eval sandbox-script.js:1:7)\"&gt;]&gt;, #&lt;Newman::Scenario:0x007fdcc2b48678 @name=\"POST /users\", @assertions=[#&lt;Newman::Assertion:0x007fdcc2b48628 @test=\"Status code is 200\"&gt;]&gt;, #&lt;Newman::Scenario:0x007fdcc2b48600 @name=\"POST /users/{userId}/invitation\", @assertions=[#&lt;Newman::Assertion:0x007fdcc2b485b0 @test=\"Status code is 200\"&gt;]&gt;, #&lt;Newman::Scenario:0x007fdcc2b48588 @name=\"POST /registration\", @assertions=[#&lt;Newman::Assertion:0x007fdcc2b48538 @test=\"Status code is 200\"&gt;]&gt;, #&lt;Newman::Scenario:0x007fdcc2b48510 @name=\"PUT /users/{userId}/avatar\", @assertions=[#&lt;Newman::Assertion:0x007fdcc2b484c0 @test=\"Status code is 200\"&gt;]&gt;, #&lt;Newman::Scenario:0x007fdcc2b48498 @name=\"post to slack\", @assertions=[#&lt;Newman::Assertion:0x007fdcc2b48448 @test=\"Status Code is correct\"&gt;]&gt;]&gt;\n</code></pre>\n\n<p>...but the gist is that there's a Results object, which has a <code>Scenarios</code> array filled with 1 or more <code>Scenario</code> objects. Each <code>Scenario</code> object has an <code>Assertions</code> array filled with 1 or more <code>Assertion</code> objects, and each <code>Assertion</code> object contains an <code>@exception_message</code> attribute. This <code>@exception_message</code> attribute will be <code>nil</code> unless the assertion fails, in which case it will be <code>true</code>.</p>\n\n<p>So, going back to the question (\"Are there any failed scenarios in my testing results?\"): what is the best way to ask this in Ruby (not Rails)?</p>\n\n<p>My best attempt, where <code>results</code> is my parsed results file and true or false is my desired answer:</p>\n\n<pre><code>results.scenarios.to_a.find { |scenario| scenario.assertions.to_a.find { |assertion| assertion.exception_message != nil }}\n</code></pre>\n\n<p>This seems to work but there <em>must</em> be a more efficient way.</p>\n"}, {"tags": ["ruby", "docker", "docker-machine", "busybox", "dinghy"], "comments": [{"owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "edited": false, "score": 0, "creation_date": 1522753534, "post_id": 49627507, "comment_id": 86263766, "body": "<code>docker@dinghy:~$ dig @10.0.2.3 MX stackoverflow.com</code> ?"}, {"owner": {"reputation": 12290, "user_id": 228370, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a3f87affc7032e0af7cc4ce2ddb08ce9?s=128&d=identicon&r=PG", "display_name": "23tux", "link": "https://stackoverflow.com/users/228370/23tux"}, "reply_to_user": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "edited": false, "score": 0, "creation_date": 1522758223, "post_id": 49627507, "comment_id": 86266747, "body": "<code>docker@dinghy:~$ dig @10.0.2.3 MX stackoverflow.com -sh: dig: not found</code> unfortunately, the package doesn&#39;t ship with busybox, and <code>nslookup</code> doesn&#39;t implement the <code>-q</code> option"}, {"owner": {"reputation": 12290, "user_id": 228370, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a3f87affc7032e0af7cc4ce2ddb08ce9?s=128&d=identicon&r=PG", "display_name": "23tux", "link": "https://stackoverflow.com/users/228370/23tux"}, "reply_to_user": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "edited": false, "score": 0, "creation_date": 1522758604, "post_id": 49627507, "comment_id": 86267005, "body": "But it is available in my container (I&#39;ve updated my answer, the code is bad formatted here in the comments)"}, {"owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "edited": false, "score": 0, "creation_date": 1522758984, "post_id": 49627507, "comment_id": 86267273, "body": "Please run <code>dig @1.1.1.1 MX stackoverflow.com</code> (or &quot;@ 8.8.8.8&quot;) and watch the difference. Conclusion: DNS at 10.0.2.3 works wrong"}, {"owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "edited": false, "score": 0, "creation_date": 1522759054, "post_id": 49627507, "comment_id": 86267321, "body": "So, Ruby is fine: it does request to 10.0.2.3 and get nothing about stackoverflow.com MX records."}, {"owner": {"reputation": 12290, "user_id": 228370, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a3f87affc7032e0af7cc4ce2ddb08ce9?s=128&d=identicon&r=PG", "display_name": "23tux", "link": "https://stackoverflow.com/users/228370/23tux"}, "reply_to_user": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "edited": false, "score": 0, "creation_date": 1522760180, "post_id": 49627507, "comment_id": 86268154, "body": "ah ok, it looks like my docker dns is configured wrong. Any idea how to solve this? Just using 8.8.8.8 doesn&#39;t seem to help."}, {"owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "reply_to_user": {"reputation": 12290, "user_id": 228370, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a3f87affc7032e0af7cc4ce2ddb08ce9?s=128&d=identicon&r=PG", "display_name": "23tux", "link": "https://stackoverflow.com/users/228370/23tux"}, "edited": false, "score": 0, "creation_date": 1522763779, "post_id": 49627507, "comment_id": 86270843, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/168126/discussion-between-pavel-mikhailyuk-and-23tux\">continue this discussion in chat</a>."}], "owner": {"reputation": 12290, "user_id": 228370, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a3f87affc7032e0af7cc4ce2ddb08ce9?s=128&d=identicon&r=PG", "display_name": "23tux", "link": "https://stackoverflow.com/users/228370/23tux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1522758703, "creation_date": 1522750389, "last_edit_date": 1522758703, "question_id": 49627507, "link": "https://stackoverflow.com/questions/49627507/resolvdns-with-mx-fails-in-docker-machine", "title": "Resolv::DNS with MX fails in docker-machine", "body": "<p>I have a problem when trying to resolve MX records using <code>Resolv::DNS</code>. When I execute the following lines directly on my Mac in <code>irb</code>, everything works:</p>\n\n<pre><code>&gt; require \"resolv\"\n&gt; Resolv::DNS.new.getresource(\"stackoverflow.com\", Resolv::DNS::Resource::IN::MX)\n=&gt; #&lt;Resolv::DNS::Resource::IN::MX:0x00007fba42812ff0 @preference=10, @exchange=#&lt;Resolv::DNS::Name: alt4.aspmx.l.google.com.&gt;, @ttl=243&gt;\n</code></pre>\n\n<p>The same line executed inside a docker container returns an error:</p>\n\n<pre><code>&gt; require \"resolv\"\n&gt; Resolv::DNS.new.getresource(\"stackoverflow.com\", Resolv::DNS::Resource::IN::MX)\nResolv::ResolvError: DNS result has no information for stackoverflow.com\nfrom /usr/local/lib/ruby/2.4.0/resolv.rb:492:in `getresource'\n</code></pre>\n\n<p>I think the problem is <code>docker-machine</code>. I'm running <code>docker-machine</code> configured by dinghy 4.6.3 (see <a href=\"https://github.com/codekitchen/dinghy\" rel=\"nofollow noreferrer\">https://github.com/codekitchen/dinghy</a>) with the following configuration:</p>\n\n<pre><code>Boot2Docker version 18.01.0-ce, build HEAD : 0bb7bbd - Thu Jan 11 16:32:39 UTC 2018\nDocker version 18.01.0-ce, build 03596f5\n\ndocker@dinghy:~$ busybox | head -1\nBusyBox v1.27.2 (2017-10-30 14:58:40 UTC) multi-call binary.\n</code></pre>\n\n<p>And my docker container is based on <code>ruby:2.4.3-stretch</code>.</p>\n\n<p>I'm not sure if it is simple an issue with the <code>resolv.conf</code></p>\n\n<pre><code>docker@dinghy:~$ cat /etc/resolv.conf \nnameserver 10.0.2.3\n</code></pre>\n\n<p>Is the config enough for mx lookups?</p>\n\n<p><strong>Update:</strong></p>\n\n<p>This is the <code>dig</code> response from within a container (not from the docker-machine itself, unfortunately the dig package doesn't ship with busybox):</p>\n\n<pre><code>root@3ef2090b7864:/usr/src/app# dig @10.0.2.3 MX stackoverflow.com\n\n; &lt;&lt;&gt;&gt; DiG 9.10.3-P4-Debian &lt;&lt;&gt;&gt; @10.0.2.3 MX stackoverflow.com\n; (1 server found)\n;; global options: +cmd\n;; Got answer:\n;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOTIMP, id: 32375\n;; flags: qr rd ra; QUERY: 1, ANSWER: 0, AUTHORITY: 0, ADDITIONAL: 1\n\n;; OPT PSEUDOSECTION:\n; EDNS: version: 0, flags:; udp: 4096\n;; QUESTION SECTION:\n;stackoverflow.com.     IN  MX\n\n;; Query time: 0 msec\n;; SERVER: 10.0.2.3#53(10.0.2.3)\n;; WHEN: Tue Apr 03 14:29:30 CEST 2018\n;; MSG SIZE  rcvd: 46\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "sorting", "hash"], "answers": [{"tags": [], "owner": {"reputation": 199, "user_id": 6670519, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t7r9T.jpg?s=128&g=1", "display_name": "Dapeng114", "link": "https://stackoverflow.com/users/6670519/dapeng114"}, "is_accepted": false, "score": 4, "last_activity_date": 1522751062, "last_edit_date": 1522751062, "creation_date": 1522748241, "answer_id": 49626805, "question_id": 49626713, "link": "https://stackoverflow.com/questions/49626713/sort-array-of-hashes-by-value-from-high-to-low/49626805#49626805", "title": "Sort Array of Hashes by value from high to low", "body": "<p>it should be </p>\n\n<pre><code>images_found[\"results\"] = images_found[\"results\"].sort_by(&amp;:values).reverse\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 455, "user_id": 649868, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/DdtyE.jpg?s=128&g=1", "display_name": "Puneet Pandey", "link": "https://stackoverflow.com/users/649868/puneet-pandey"}, "edited": false, "score": 0, "creation_date": 1522749841, "post_id": 49626995, "comment_id": 86261509, "body": "this <code>images_found[&quot;results&quot;].sort_by! { |x| - x.values.first }</code> worked like a charm!"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1522773034, "post_id": 49626995, "comment_id": 86277255, "body": "<code>!</code> is not an operator."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1522776688, "post_id": 49626995, "comment_id": 86279383, "body": "Your statement (unfortunately using the term <i>symbol</i> which has other uses in Ruby) still implies <code>!</code> is an operator that has an effect on <code>sort_by</code>, this is incorrect. <code>sort_by!</code> is a different method entirely to <code>sort_by</code>. The <code>!</code> is a character and part of the method name. Take a look at the documentation. +1 for your second approach though."}, {"owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "edited": false, "score": 0, "creation_date": 1522802987, "post_id": 49626995, "comment_id": 86289836, "body": "I was just thought of indicating the difference between 2 methods for easy recognition by <code>!</code>. If it makes confusion again I will change it."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1522869840, "post_id": 49626995, "comment_id": 86327058, "body": "Your first result is incorrect. The correct value is returned but <code>image_found[&quot;results&quot;</code>] is sorted by increasing values of the lone hash value. The problem is that <code>reverse</code> does not change the hash in place. You need <code>reverse!</code>."}, {"owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1522911732, "post_id": 49626995, "comment_id": 86341839, "body": "Nice catch @CarySwoveland"}], "tags": [], "owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "is_accepted": false, "score": 4, "last_activity_date": 1522911743, "last_edit_date": 1522911743, "creation_date": 1522748766, "answer_id": 49626995, "question_id": 49626713, "link": "https://stackoverflow.com/questions/49626713/sort-array-of-hashes-by-value-from-high-to-low/49626995#49626995", "title": "Sort Array of Hashes by value from high to low", "body": "<p>There are multiple ways to get the desired results:</p>\n\n<pre><code>images_found[\"results\"].sort_by! { |x| x.values.first }.reverse!\n</code></pre>\n\n<p>Note that method with <code>!</code> changes the original hash. If you do not want to change the original hash, remove <code>!</code>.</p>\n\n<p>Another option would be to use <code>-</code> sign for sorting condition:</p>\n\n<pre><code>images_found[\"results\"].sort_by! { |x| - x.values.first }\n</code></pre>\n"}], "owner": {"reputation": 455, "user_id": 649868, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/DdtyE.jpg?s=128&g=1", "display_name": "Puneet Pandey", "link": "https://stackoverflow.com/users/649868/puneet-pandey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1522911743, "creation_date": 1522747987, "last_edit_date": 1522760159, "question_id": 49626713, "link": "https://stackoverflow.com/questions/49626713/sort-array-of-hashes-by-value-from-high-to-low", "title": "Sort Array of Hashes by value from high to low", "body": "<p>I am having a Hash in this format:</p>\n\n<pre><code>images_found = {\n  \"results\" =&gt; [\n    {\"img_1\"=&gt;1.923076923076923},\n    {\"img_2\"=&gt;0.8241758241758242},\n    {\"img_3\"=&gt;0.6868131868131868},\n    {\"img_4\"=&gt;0.5494505494505495},\n    {\"img_5\"=&gt;0.4120879120879121},\n    {\"img_6\"=&gt;0.3434065934065934},\n    {\"img_7\"=&gt;0.2747252747252747},\n    {\"img_8\"=&gt;0.2060439560439561},\n    {\"img_9\"=&gt;0.1373626373626374},\n    {\"img_10\"=&gt;0.06868131868131869},\n    {\"img_11\"=&gt;0.5494505494505495},\n    {\"img_12\"=&gt;0.3434065934065934},\n    {\"img_13\"=&gt;0.2747252747252747},\n    {\"img_14\"=&gt;0.2060439560439561},\n    {\"img_15\"=&gt;0.1373626373626374},\n    {\"img_16\"=&gt;0.06868131868131869}\n  ],\n  \"type\" =&gt; \"SEARCH_RESULTS\"\n}\n</code></pre>\n\n<p>I would like to sort <code>images_found[\"results\"]</code> by value from highest to lowest, such that the result would be:</p>\n\n<pre><code>images_found = {\n  \"results\"=&gt; [\n    {\"img_1\"=&gt;1.923076923076923},\n    {\"img_2\"=&gt;0.8241758241758242},\n    {\"img_3\"=&gt;0.6868131868131868},\n    {\"img_4\"=&gt;0.5494505494505495},\n    {\"img_11\"=&gt;0.5494505494505495},\n    {\"img_5\"=&gt;0.4120879120879121},\n    {\"img_6\"=&gt;0.3434065934065934},\n    {\"img_12\"=&gt;0.3434065934065934},\n    {\"img_7\"=&gt;0.2747252747252747},\n    {\"img_13\"=&gt;0.2747252747252747},\n    {\"img_8\"=&gt;0.2060439560439561},\n    {\"img_14\"=&gt;0.2060439560439561},\n    {\"img_9\"=&gt;0.1373626373626374},\n    {\"img_15\"=&gt;0.1373626373626374},\n    {\"img_10\"=&gt;0.06868131868131869},\n    {\"img_16\"=&gt;0.06868131868131869}\n  ],\n  \"type\" =&gt; \"SEARCH_RESULTS\"\n}\n</code></pre>\n\n<p>The solution I tried is <code>images_found[\"results\"].sort_by! {|_key, value| value}</code> but it is not working.</p>\n\n<p>When I tried to debug <code>value</code> it is printing <code>nil</code></p>\n\n<p>I looked around for solutions but didn't find anything that matches with this problem statement.</p>\n\n<p>Please suggest!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "haml"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1522747062, "post_id": 49626284, "comment_id": 86259688, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. What is the route and controller action? How are you calling it? What is being rendered? Your code snippet does not provide enough information for anyone to help."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1522747209, "post_id": 49626284, "comment_id": 86259779, "body": "Nothing in your above code indicates that <code>@plans</code> would be <code>nil</code>. It should always be a (potentially empty) array. So there must be <i>something</i> wrong with how you&#39;re calling the controller action/setting the variable, but I don&#39;t know what."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 9795, "user_id": 1566187, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/00cb2ecc49f0f05736dc7c14bbccfeaa?s=128&d=identicon&r=PG", "display_name": "Ely", "link": "https://stackoverflow.com/users/1566187/ely"}, "edited": false, "score": 1, "creation_date": 1522747264, "post_id": 49626284, "comment_id": 86259809, "body": "@Elyasin That won&#39;t make a difference. <code>nil</code> is the singleton instance of <code>NilClass</code>; checking <code>#nil?</code> is exactly the same thing as checking <code>== nil</code>."}, {"owner": {"reputation": 1289, "user_id": 6583381, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoEUj.jpg?s=128&g=1", "display_name": "oj5th", "link": "https://stackoverflow.com/users/6583381/oj5th"}, "edited": false, "score": 0, "creation_date": 1522748694, "post_id": 49626284, "comment_id": 86260713, "body": "@F. LK, I don&#39;t think it will be effective evaluating using <code>nil</code>, see my answer below explained how."}], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1522752209, "post_id": 49626830, "comment_id": 86262936, "body": "I would say <code>any?</code> or <code>none?</code> reads much better.  <code>.present?</code> is really for checking if the value/key is set and is not a blank value."}], "tags": [], "owner": {"reputation": 1289, "user_id": 6583381, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoEUj.jpg?s=128&g=1", "display_name": "oj5th", "link": "https://stackoverflow.com/users/6583381/oj5th"}, "is_accepted": false, "score": 0, "last_activity_date": 1522810310, "last_edit_date": 1522810310, "creation_date": 1522748310, "answer_id": 49626830, "question_id": 49626284, "link": "https://stackoverflow.com/questions/49626284/why-is-ruby-on-rails-controller-variable-null/49626830#49626830", "title": "Why is Ruby on Rails controller variable null?", "body": "<p>You should use <code>present?</code>, <code>any?</code> or <code>none?</code> instead of <code>nil?</code>.</p>\n\n<p>If you evaluate with <code>nil?</code>, it will always return <code>false</code> because it always return empty array <code>[]</code> if the object does not have any record.</p>\n\n<p>For example: </p>\n\n<p>Your <code>Order</code> table doesn't have any record.</p>\n\n<pre><code>=&gt; @plans = Order.all\n=&gt; @plans.nil?\n=&gt; false\n\n=&gt; @plans\n=&gt; []\n</code></pre>\n\n<p>And if it has any record?</p>\n\n<pre><code>=&gt; @plans = Order.all\n=&gt; @plans.nil?\n=&gt; false\n\n=&gt; @plans\n=&gt; [#&lt;Order:0x007fa2832c0308\n id: 1,\n your_field: 'value'&gt;]\n</code></pre>\n\n<blockquote>\n  <p>Suggestion #1</p>\n</blockquote>\n\n<p>View (schedule.html.haml):</p>\n\n<pre><code>- if @plans.present?\n  %p display this if plans is not null\n- else\n  %p= action_name\n</code></pre>\n\n<blockquote>\n  <p>Suggestion #2</p>\n</blockquote>\n\n<p>View (schedule.html.haml):</p>\n\n<pre><code>- if @plans.any?\n  %p display this if plans is not null\n- else\n  %p= action_name\n</code></pre>\n\n<blockquote>\n  <p>Suggestion #3</p>\n</blockquote>\n\n<p>View (schedule.html.haml):</p>\n\n<pre><code>- if @plans.none?\n  %p= action_name\n- else\n  %p display this if plans is not null\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 1, "last_activity_date": 1522922949, "last_edit_date": 1522922949, "creation_date": 1522751964, "answer_id": 49628001, "question_id": 49626284, "link": "https://stackoverflow.com/questions/49626284/why-is-ruby-on-rails-controller-variable-null/49628001#49628001", "title": "Why is Ruby on Rails controller variable null?", "body": "<p>Ruby has a stricter and more sane type coercion scheme than other popular dynamic languages:</p>\n\n<pre><code>irb(main):001:0&gt; !!nil\n=&gt; false\nirb(main):002:0&gt; !![]\n=&gt; true\nirb(main):003:0&gt; !!\"\"\n(irb):3: warning: string literal in condition\n=&gt; true\nirb(main):004:0&gt; !!0\n=&gt; true\n</code></pre>\n\n<p>Everything except <code>nil</code> and <code>false</code> evaluate to true. <code>nil</code> is only equal to <code>nil</code>.</p>\n\n<p><code>Order.all</code> will never return nil, if no records are found it returns an empty <code>ActiveRecord::Collection</code> object. It's an array like result object telling you there was nothing in the database.</p>\n\n<p>So when dealing with collections you need to use the appropriate methods such as <code>.any?</code>, <code>.none?</code> etc:</p>\n\n<pre><code>- if @plans.any?\n   %p display this if there are any plans.\n- else\n   %p= action_name\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 6470351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f841948f784e39870cdaf7ff1ac531bc?s=128&d=identicon&r=PG&f=1", "display_name": "F. LK", "link": "https://stackoverflow.com/users/6470351/f-lk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 685, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1522922949, "creation_date": 1522746755, "last_edit_date": 1522752226, "question_id": 49626284, "link": "https://stackoverflow.com/questions/49626284/why-is-ruby-on-rails-controller-variable-null", "title": "Why is Ruby on Rails controller variable null?", "body": "<p>My goal is to fill an html table in a view (schedule.html.haml):</p>\n\n<pre><code> - if @plans != nil\n   %p display this if plans is not null\n - if @plans == nil\n   %p= action_name\n</code></pre>\n\n<p>with the data from <code>@plans</code> in a controller:</p>\n\n<pre><code>def schedule\n @plans = Order.all\nend\n</code></pre>\n\n<p>I am sure <code>Order.all</code> returns data. Route file is:</p>\n\n<p><code>get 'schedule', to: 'order_articles#schedule'</code> </p>\n\n<p>When I try to do this plans is null. The output is:</p>\n\n<pre><code>schedule\n</code></pre>\n\n<p>I tried to check if <code>plans</code> is <code>null</code> with the code in the view. What did I do wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "edited": false, "score": 1, "creation_date": 1522746209, "post_id": 49626082, "comment_id": 86259188, "body": "What have you tried so far ? What errors are you getting for it ?"}, {"owner": {"reputation": 1169, "user_id": 2980650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/245ca292e170237592a28dcac223a196?s=128&d=identicon&r=PG&f=1", "display_name": "Mezbah", "link": "https://stackoverflow.com/users/2980650/mezbah"}, "edited": false, "score": 1, "creation_date": 1522746707, "post_id": 49626082, "comment_id": 86259459, "body": "<code>case</code> is a reserved word. Try another name"}, {"owner": {"reputation": 89, "user_id": 9489349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/311f6f5bab6da02e18d5819a55a77bbd?s=128&d=identicon&r=PG&f=1", "display_name": "Harini", "link": "https://stackoverflow.com/users/9489349/harini"}, "edited": false, "score": 0, "creation_date": 1522746773, "post_id": 49626082, "comment_id": 86259501, "body": "the button doesnt work when its clicked. when its in checkbox format it works when changed to button it doesnt work"}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "edited": false, "score": 0, "creation_date": 1522746901, "post_id": 49626082, "comment_id": 86259592, "body": "@SuseeHarini what do you mean by <code>f.active_field</code> is there any view helper named like <code>active_field</code> ?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 1169, "user_id": 2980650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/245ca292e170237592a28dcac223a196?s=128&d=identicon&r=PG&f=1", "display_name": "Mezbah", "link": "https://stackoverflow.com/users/2980650/mezbah"}, "edited": false, "score": 0, "creation_date": 1522750653, "post_id": 49626082, "comment_id": 86262011, "body": "<code>case</code> is a reserved word as mentioned by @Mezbah. While its technically possible to use it it not a good idea at all since you end up creating syntax errors and very confusing code."}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "edited": false, "score": 0, "creation_date": 1522759240, "post_id": 49626082, "comment_id": 86267445, "body": "@SuseeHarini feel free to accept/upvote answer if it helped you."}], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1522749953, "post_id": 49626582, "comment_id": 86261580, "body": "This should be a <code>PATCH</code> or <code>PUT</code> request - not <code>POST</code>."}], "tags": [], "owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "is_accepted": true, "score": 0, "last_activity_date": 1522750168, "last_edit_date": 1522750168, "creation_date": 1522747618, "answer_id": 49626582, "question_id": 49626082, "link": "https://stackoverflow.com/questions/49626082/i-am-trying-create-a-button-in-which-boolean-function-should-be-performed-below/49626582#49626582", "title": "I am trying create a button in which boolean function should be performed. below is my view code. Can anyone help me", "body": "<p>Basically <a href=\"https://apidock.com/rails/ActionView/Helpers/UrlHelper/button_to\" rel=\"nofollow noreferrer\">button_to</a> tag in rails converts in to form itself into html.\nso you can use this: -</p>\n\n<p>note: - provide correct path and data that should be send with this button at controller</p>\n\n<pre><code>&lt;% if case.active? %&gt;    \n  &lt;%= button_to case_path(value: false), data: {confirm: 'Are you sure?'}, method: :patch, class: 'btn btn-default btn-danger' do %&gt;\n  Unblock\n  &lt;% end %&gt;\n&lt;%else%&gt;\n  &lt;%= button_to case_path(value: true), data: {confirm: 'Are you sure?'}, method: :patch, class: 'btn btn-default btn-danger' do %&gt;\n  block\n  &lt;% end %&gt;\n&lt;%end%&gt;\n</code></pre>\n\n<p>and at controller: -</p>\n\n<pre><code>def your_action\n  case = Case.find(params[:id])\n  case.update(active: params[:value])\nend\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 9489349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/311f6f5bab6da02e18d5819a55a77bbd?s=128&d=identicon&r=PG&f=1", "display_name": "Harini", "link": "https://stackoverflow.com/users/9489349/harini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 49626582, "answer_count": 1, "score": 1, "last_activity_date": 1522750168, "creation_date": 1522746116, "last_edit_date": 1522746639, "question_id": 49626082, "link": "https://stackoverflow.com/questions/49626082/i-am-trying-create-a-button-in-which-boolean-function-should-be-performed-below", "title": "I am trying create a button in which boolean function should be performed. below is my view code. Can anyone help me", "body": "<pre><code>&lt;% if case.active? %&gt;\n  &lt;%= form_for case do |f| %&gt;\n    &lt;%= f.active_field :active, value: false %&gt;\n    &lt;%= f.submit 'Unblock' %&gt;\n  &lt;% end %&gt;\n&lt;% else %&gt;\n  &lt;%= form_for case do |f| %&gt;\n    &lt;%= f.active_field :active, value: true %&gt;\n    &lt;%= f.submit 'block' %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;`\n</code></pre>\n\n<p>Active is a field which is set a default to true and when I click block button it needs to change to unblock and the default boolean should be changed to false. Can you help me in getting the controller and view code? Thanks in advance </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "undo-redo"], "comments": [{"owner": {"reputation": 183, "user_id": 5506197, "user_type": "registered", "profile_image": "https://graph.facebook.com/1065312320169114/picture?type=large", "display_name": "\u738b\u4fe1\u51f1", "link": "https://stackoverflow.com/users/5506197/%e7%8e%8b%e4%bf%a1%e5%87%b1"}, "edited": false, "score": 0, "creation_date": 1522748161, "post_id": 49625120, "comment_id": 86260372, "body": "why do you want to call undo method in view? why not in controller?"}, {"owner": {"reputation": 33, "user_id": 9515129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c0ad2c0501ac8a436adfde8b1ba74a4?s=128&d=identicon&r=PG&f=1", "display_name": "Puty", "link": "https://stackoverflow.com/users/9515129/puty"}, "reply_to_user": {"reputation": 183, "user_id": 5506197, "user_type": "registered", "profile_image": "https://graph.facebook.com/1065312320169114/picture?type=large", "display_name": "\u738b\u4fe1\u51f1", "link": "https://stackoverflow.com/users/5506197/%e7%8e%8b%e4%bf%a1%e5%87%b1"}, "edited": false, "score": 0, "creation_date": 1522749573, "post_id": 49625120, "comment_id": 86261337, "body": "because when I update I want a link to undo in view. The logic is in lib/audited/audit.rb. Maybe next logic can I add on controller. Can you give me an example?"}], "answers": [{"comments": [{"owner": {"reputation": 183, "user_id": 5506197, "user_type": "registered", "profile_image": "https://graph.facebook.com/1065312320169114/picture?type=large", "display_name": "\u738b\u4fe1\u51f1", "link": "https://stackoverflow.com/users/5506197/%e7%8e%8b%e4%bf%a1%e5%87%b1"}, "edited": false, "score": 0, "creation_date": 1522751350, "post_id": 49627770, "comment_id": 86262440, "body": "post method is better than get, but if you want a &lt;a&gt; link, using get method."}], "tags": [], "owner": {"reputation": 183, "user_id": 5506197, "user_type": "registered", "profile_image": "https://graph.facebook.com/1065312320169114/picture?type=large", "display_name": "\u738b\u4fe1\u51f1", "link": "https://stackoverflow.com/users/5506197/%e7%8e%8b%e4%bf%a1%e5%87%b1"}, "is_accepted": false, "score": 0, "last_activity_date": 1522751275, "creation_date": 1522751275, "answer_id": 49627770, "question_id": 49625120, "link": "https://stackoverflow.com/questions/49625120/rails-undo-link-in-view-for-changes-in-audited/49627770#49627770", "title": "Rails Undo link in view for changes in Audited", "body": "<p>1.create a url/route for undo link action</p>\n\n<p>routes.rb</p>\n\n<pre><code>get 'undo', to: 'audit#undo'\n</code></pre>\n\n<p>2.create its controller/action</p>\n\n<p>audit_controller.rb</p>\n\n<pre><code>def undo\n  current_user.audits.last.undo\nend\n</code></pre>\n\n<p>3.add the undo link in view</p>\n\n<p>your_view.html.erb</p>\n\n<pre><code>&lt;a href=\"/undo\"&gt;&lt;/a&gt;\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 9515129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c0ad2c0501ac8a436adfde8b1ba74a4?s=128&d=identicon&r=PG&f=1", "display_name": "Puty", "link": "https://stackoverflow.com/users/9515129/puty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 354, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1522751275, "creation_date": 1522742638, "question_id": 49625120, "link": "https://stackoverflow.com/questions/49625120/rails-undo-link-in-view-for-changes-in-audited", "title": "Rails Undo link in view for changes in Audited", "body": "<p>when I added the following code to the lib</p>\n\n<p><a href=\"https://github.com/collectiveidea/audited/pull/381/files\" rel=\"nofollow noreferrer\">https://github.com/collectiveidea/audited/pull/381/files</a></p>\n\n<p>I do not know how to call in view. Can you advise me how to call this method?</p>\n\n<p>I was thinking about <a href=\"http://github.com/airblade/paper_trail\" rel=\"nofollow noreferrer\">http://github.com/airblade/paper_trail</a>, but I do not want to have many gems.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "proxy", "smtp", "smtpproxy"], "comments": [{"owner": {"reputation": 1213, "user_id": 809942, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5a0bbeac5c1b1fb597d58a63cc458bc3?s=128&d=identicon&r=PG", "display_name": "Amitkumar Jha", "link": "https://stackoverflow.com/users/809942/amitkumar-jha"}, "edited": false, "score": 0, "creation_date": 1545217067, "post_id": 49624658, "comment_id": 94546997, "body": "Did anyone find the solution for this?"}], "owner": {"reputation": 206, "user_id": 4384401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02df440328950c2ca558543c61d346a0?s=128&d=identicon&r=PG&f=1", "display_name": "Sudarshan Dhokale", "link": "https://stackoverflow.com/users/4384401/sudarshan-dhokale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1522740902, "creation_date": 1522740902, "question_id": 49624658, "link": "https://stackoverflow.com/questions/49624658/actionmailer-does-not-work-when-used-with-proxy-server", "title": "Actionmailer does not work when used with proxy server", "body": "<p>Below are my smtp settings:</p>\n\n<pre><code>ActionMailer::Base.smtp_settings = {\n  :enable_starttls_auto =&gt; true,\n  :address        =&gt; 'smtp.gmail.com',\n  :port           =&gt; 587,\n  :authentication =&gt; :login,\n  :user_name      =&gt; 'username@gmail.com',\n  :password       =&gt; 'password',\n  :domain         =&gt; 'gmail.com'\n}\n\nActionMailer::Base.mail(\n  :from =&gt; 'username@gmail.com', \n  :to =&gt; 'username@gmail.com', \n  :subject =&gt; \"Test Mail\", \n  :body =&gt; \"This is a test email\"\n).deliver\n</code></pre>\n\n<p>It works on my system(i.e. without proxy).\nBut this same smtp settings does not work on proxy server. I have set http_proxy and https_proxy on proxy server.\nBut It throws below error at the time of sending mail-</p>\n\n<blockquote>\n  <p>Net::OpenTimeout: execution expired</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1522739625, "post_id": 49623890, "comment_id": 86255462, "body": "I&#39;m not sure if a solution for something like this already exists, but I believe it could get real messy if you have associations around models"}, {"owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "edited": false, "score": 0, "creation_date": 1522746048, "post_id": 49623890, "comment_id": 86259090, "body": "Why do you want to make ID sequential ? If you provide the context, we can help you out on that."}, {"owner": {"reputation": 10727, "user_id": 479167, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0ddf90fe12087db9cfae84c52ae0147c?s=128&d=identicon&r=PG", "display_name": "rubish", "link": "https://stackoverflow.com/users/479167/rubish"}, "edited": false, "score": 0, "creation_date": 1522763939, "post_id": 49623890, "comment_id": 86270972, "body": "Instead of changing ids(which is very bad practise), you can use something similar to row_number from your underlying database. Ref: <a href=\"https://stackoverflow.com/questions/11952245/select-row-number-in-postgres\" title=\"select row number in postgres\">stackoverflow.com/questions/11952245/&hellip;</a>, <a href=\"https://www.postgresql.org/docs/current/static/functions-window.html\" rel=\"nofollow noreferrer\">postgresql.org/docs/current/static/functions-window.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 405, "user_id": 1472621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc346c5eb97a9ef44347af50a81ad81f?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1472621/matt"}, "edited": false, "score": 0, "creation_date": 1522767189, "post_id": 49624441, "comment_id": 86273449, "body": "Another option along these lines is <a href=\"https://github.com/mixonic/ranked-model\" rel=\"nofollow noreferrer\">ranked-model</a>"}], "tags": [], "owner": {"reputation": 1607, "user_id": 7804093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pFFFH.jpg?s=128&g=1", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/7804093/ganesh"}, "is_accepted": false, "score": 0, "last_activity_date": 1522740120, "creation_date": 1522740120, "answer_id": 49624441, "question_id": 49623890, "link": "https://stackoverflow.com/questions/49623890/keep-id-of-the-object-in-table-organized-sequentially-in-ruby-on-rails/49624441#49624441", "title": "Keep ID of the object in table organized sequentially in Ruby on Rails", "body": "<p>I will suggest you, to use gem <a href=\"https://github.com/swanandp/acts_as_list\" rel=\"nofollow noreferrer\">act_as_list</a></p>\n\n<p>This will provide the capabilities for sorting and reordering a number of objects in a list</p>\n"}, {"comments": [{"owner": {"reputation": 405, "user_id": 1472621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc346c5eb97a9ef44347af50a81ad81f?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1472621/matt"}, "edited": false, "score": 0, "creation_date": 1522767058, "post_id": 49626267, "comment_id": 86273343, "body": "Would be a good idea to only update the records after the one that was just deleted, if possible. You might also want to move this code into a background job (so you&#39;re not waiting for literally every record to process before pageload, assuming you can destroy records through a view)."}, {"owner": {"reputation": 151, "user_id": 6102736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9343b2bfa0898aceecc46bcdee517c8e?s=128&d=identicon&r=PG&f=1", "display_name": "Kishan Ku. Patel", "link": "https://stackoverflow.com/users/6102736/kishan-ku-patel"}, "reply_to_user": {"reputation": 405, "user_id": 1472621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc346c5eb97a9ef44347af50a81ad81f?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1472621/matt"}, "edited": false, "score": 0, "creation_date": 1522826386, "post_id": 49626267, "comment_id": 86297894, "body": "Agree with you Matt, we can delete a record through ajax and can call a another ajax with in the success method to update the sequence."}], "tags": [], "owner": {"reputation": 151, "user_id": 6102736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9343b2bfa0898aceecc46bcdee517c8e?s=128&d=identicon&r=PG&f=1", "display_name": "Kishan Ku. Patel", "link": "https://stackoverflow.com/users/6102736/kishan-ku-patel"}, "is_accepted": false, "score": 1, "last_activity_date": 1522775462, "last_edit_date": 1522775462, "creation_date": 1522746691, "answer_id": 49626267, "question_id": 49623890, "link": "https://stackoverflow.com/questions/49623890/keep-id-of-the-object-in-table-organized-sequentially-in-ruby-on-rails/49626267#49626267", "title": "Keep ID of the object in table organized sequentially in Ruby on Rails", "body": "<p>If you will update the id it may effect on other associated table. So, I will suggest you to add a sequence_id (or any) to the table. then sort the table by id &amp; update the sequence_id column of each record. Then you can get order 1, 2, 3, 4 from sequence_id.</p>\n\n<p>You can do this like (here User is a model of users table):</p>\n\n<pre><code>after_destroy :update_sequence\n\ndef update_sequence\n  User.order(\"id\").find_each.with_index do |user ,i|\n    user.update_attribute :sequence_id, i + 1\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "is_accepted": false, "score": 1, "last_activity_date": 1522751897, "creation_date": 1522751897, "answer_id": 49627977, "question_id": 49623890, "link": "https://stackoverflow.com/questions/49623890/keep-id-of-the-object-in-table-organized-sequentially-in-ruby-on-rails/49627977#49627977", "title": "Keep ID of the object in table organized sequentially in Ruby on Rails", "body": "<p>I would definitely not use the id to do this, as changing the primary key value is going to be very problematic.</p>\n\n<p>You could add an additional column, but whether it is worth doing so depends on what problem you are trying to solve here. </p>\n\n<p>You would definitely have some difficult edge cases to deal with, in which a destroy action has to temporarily prevent any other destroy or insert actions from happening until it has renumbered all of the following values.</p>\n\n<p>You should also consider what happens then you delete row \"3\" and you have a subsequent 2 million rows to renumber.</p>\n"}], "owner": {"reputation": 83, "user_id": 7062892, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-t2kP4nfM2ok/AAAAAAAAAAI/AAAAAAAAAsI/nu8pirSwNjg/photo.jpg?sz=128", "display_name": "Fauzi Rachman", "link": "https://stackoverflow.com/users/7062892/fauzi-rachman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1522775462, "creation_date": 1522738162, "last_edit_date": 1522739036, "question_id": 49623890, "link": "https://stackoverflow.com/questions/49623890/keep-id-of-the-object-in-table-organized-sequentially-in-ruby-on-rails", "title": "Keep ID of the object in table organized sequentially in Ruby on Rails", "body": "<p>I have a lot of data in the activerecord model and I want it's ID to keep organized sequentially even if I delete one record.</p>\n\n<p>For example the ID in the table were <code>1, 2, 3, 4</code> and when I delete ID <code>2</code> it will be <code>1, 3, 4</code>\nI want it to automatically fill the deleted number <code>(2)</code>, anyone know how to do that?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "daterangepicker", "bootstrap-daterangepicker"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1522735844, "post_id": 49623272, "comment_id": 86253633, "body": "What if you fetch it back from database? What does it show, 06:53 OR 11:53?"}, {"owner": {"reputation": 81, "user_id": 6593766, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-kEREOEvoVtE/AAAAAAAAAAI/AAAAAAAAAE8/Nr6NjqlGSjw/photo.jpg?sz=128", "display_name": "manish gupta", "link": "https://stackoverflow.com/users/6593766/manish-gupta"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1522736622, "post_id": 49623272, "comment_id": 86253993, "body": "@JagdeepSingh When I fetched from database data is show as i have set like 06:53"}], "answers": [{"comments": [{"owner": {"reputation": 329, "user_id": 8159914, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XApNb.jpg?s=128&g=1", "display_name": "Sowmiya Sangaiah", "link": "https://stackoverflow.com/users/8159914/sowmiya-sangaiah"}, "reply_to_user": {"reputation": 81, "user_id": 6593766, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-kEREOEvoVtE/AAAAAAAAAAI/AAAAAAAAAE8/Nr6NjqlGSjw/photo.jpg?sz=128", "display_name": "manish gupta", "link": "https://stackoverflow.com/users/6593766/manish-gupta"}, "edited": false, "score": 0, "creation_date": 1522740400, "post_id": 49624072, "comment_id": 86255889, "body": "I believe, it is from the contents of /etc/timezone file in your server.   To match your rails time with server time you can use it as follows:  config.time_zone = File.read(&quot;/etc/timezone&quot;).chomp"}, {"owner": {"reputation": 81, "user_id": 6593766, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-kEREOEvoVtE/AAAAAAAAAAI/AAAAAAAAAE8/Nr6NjqlGSjw/photo.jpg?sz=128", "display_name": "manish gupta", "link": "https://stackoverflow.com/users/6593766/manish-gupta"}, "edited": false, "score": 0, "creation_date": 1522743716, "post_id": 49624072, "comment_id": 86257707, "body": "@sawmiya Getting Same result"}], "tags": [], "owner": {"reputation": 329, "user_id": 8159914, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XApNb.jpg?s=128&g=1", "display_name": "Sowmiya Sangaiah", "link": "https://stackoverflow.com/users/8159914/sowmiya-sangaiah"}, "is_accepted": false, "score": 0, "last_activity_date": 1522738841, "creation_date": 1522738841, "answer_id": 49624072, "question_id": 49623272, "link": "https://stackoverflow.com/questions/49623272/i-am-adding-datetime-using-daterangepicker-in-my-rails-application-but-not-updat/49624072#49624072", "title": "I am adding datetime using daterangepicker in my rails application but not updated as parameter datetime", "body": "<p>To fix the time in database, such that it will always dealt with UTC, you can set the following.</p>\n\n<p>config.active_record.default_timezone = :utc</p>\n\n<p>config.active_record.default_timezone determines whether to use Time.local (if set to :local) or Time.utc (if set to :utc) when pulling dates and times from the database. The default is :utc.</p>\n"}], "owner": {"reputation": 81, "user_id": 6593766, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-kEREOEvoVtE/AAAAAAAAAAI/AAAAAAAAAE8/Nr6NjqlGSjw/photo.jpg?sz=128", "display_name": "manish gupta", "link": "https://stackoverflow.com/users/6593766/manish-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1522741131, "creation_date": 1522735477, "last_edit_date": 1522741131, "question_id": 49623272, "link": "https://stackoverflow.com/questions/49623272/i-am-adding-datetime-using-daterangepicker-in-my-rails-application-but-not-updat", "title": "I am adding datetime using daterangepicker in my rails application but not updated as parameter datetime", "body": "<p>I am adding date-time using date-range-picker in my rails application, But when we create or update date-time is updated on server but +6 hour extra.</p>\n\n<p>Added in my configuration file: <code>config.time_zone = \"Mexico City\"</code></p>\n\n<p>for select daterange:</p>\n\n<pre><code>    $('#ordenes_servicio_OS_FECHAASIGNACION, \\\n    #ordenes_servicio_OS_FECHALLEGADA, \\\n    #ordenes_servicio_OS_FECHAINCIO, \\\n    #ordenes_servicio_OS_FECHAFIN, \\\n    #ordenes_servicio_OS_FECHATERMINO').daterangepicker({\n             \"singleDatePicker\": true,\n             \"timePicker\": true,\n             \"timePickerSeconds\": true,\n             \"autoApply\": true,\n             \"locale\": {\n                 \"format\": \"DD/MM/YYYY h:mm:ss A\",\n                 \"separator\": \" - \",\n                 \"fromLabel\": \"From\",\n                 \"toLabel\": \"To\",\n                 \"customRangeLabel\": \"Custom\",\n                 \"weekLabel\": \"W\",\n                 \"daysOfWeek\": [ \"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\" ],\n                 \"monthNames\": [\n                     \"January\",\n                     \"February\",\n                     \"March\",\n                     \"April\",\n                     \"May\",\n                     \"June\",\n                     \"July\",\n                     \"August\",\n                     \"September\",\n                     \"October\",\n                     \"November\",\n                     \"December\"\n                 ],\n                 \"firstDay\": 1\n             },\n             \"showCustomRangeLabel\": false,\n\n             \"opens\": \"center\"\n           });\n</code></pre>\n\n<p>Parameter from params = </p>\n\n<pre><code>\"OS_FECHAASIGNACION\"=&gt;\"20/04/2018 6:53:08 AM\"\n</code></pre>\n\n<p>Update query: </p>\n\n<pre><code>UPDATE `ordenes_servicios` SET `OS_FECHAASIGNACION` = '2018-04-20 11:53:08', `updated_at` = '2018-04-03 05:57:30' WHERE `ordenes_servicios`.`ID` = 5\n</code></pre>\n\n<p>Please Give me exact answer, How can we update datetime as utc-6 to server? As we set from parameter.</p>\n"}, {"tags": ["ruby", "instance-eval"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1522741088, "post_id": 49622879, "comment_id": 86256233, "body": "Please edit to change <code>Class Book</code> to <code>class Book</code>."}], "answers": [{"comments": [{"owner": {"reputation": 118, "user_id": 6080990, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ded713da57161f76d1ed079264c47112?s=128&d=identicon&r=PG&f=1", "display_name": "rohan kharvi", "link": "https://stackoverflow.com/users/6080990/rohan-kharvi"}, "edited": false, "score": 0, "creation_date": 1522734299, "post_id": 49622931, "comment_id": 86252968, "body": "Is that the only reason we use instance_eval"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1522734573, "post_id": 49622931, "comment_id": 86253078, "body": "This is already mentioned in question. &quot;The method(book_name) created using instance_eval will be accessible only by object b in above case&quot;"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1522749533, "post_id": 49622931, "comment_id": 86261310, "body": "@JagdeepSingh : I see that the question has been edited in the meantime."}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "reply_to_user": {"reputation": 118, "user_id": 6080990, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ded713da57161f76d1ed079264c47112?s=128&d=identicon&r=PG&f=1", "display_name": "rohan kharvi", "link": "https://stackoverflow.com/users/6080990/rohan-kharvi"}, "edited": false, "score": 0, "creation_date": 1522749663, "post_id": 49622931, "comment_id": 86261406, "body": "@rohankharvi : No, there are several other uses for <code>instance_eval</code>, for example to access a instance variable of an object from the outside. Also, adding methods to an object can also be achieved in different ways."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1522778712, "post_id": 49622931, "comment_id": 86280531, "body": "@JagdeepSingh in this case, <code>define_singleton_method</code> would be a more idiomatic way to achieve the same result"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1522824166, "post_id": 49622931, "comment_id": 86296515, "body": "@Max: Since there is nothing dynamic about the method, neither the name nor the body, I would argue that the <i>only</i> idiomatic way would be <code>def</code>."}], "tags": [], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "is_accepted": false, "score": 0, "last_activity_date": 1522733751, "creation_date": 1522733751, "answer_id": 49622931, "question_id": 49622879, "link": "https://stackoverflow.com/questions/49622879/why-use-instance-eval-instead-of-creating-a-method/49622931#49622931", "title": "Why use &#39;instance_eval&#39; instead of creating a method?", "body": "<p>The author of this codes wanted <code>book_name</code> to be a method which belongs only to <code>b</code>. If he had created inside the class definition, it would belong to every object of class <code>Book</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 688, "user_id": 202613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89806d4eddb1df26f1d75240011afa9d?s=128&d=identicon&r=PG", "display_name": "Mereghost", "link": "https://stackoverflow.com/users/202613/mereghost"}, "is_accepted": true, "score": 3, "last_activity_date": 1522789016, "creation_date": 1522789016, "answer_id": 49639034, "question_id": 49622879, "link": "https://stackoverflow.com/questions/49622879/why-use-instance-eval-instead-of-creating-a-method/49639034#49639034", "title": "Why use &#39;instance_eval&#39; instead of creating a method?", "body": "<p><code>instance_eval</code> is very useful when some kind of metaprogramming is needed, like when defining methods during instance initialization or inside frameworks.</p>\n\n<p>Why use it? It's usually faster than calling <code>define_method</code> in these cases and, if adding a bunch of methods at the same time, invalidates the method cache just once.</p>\n\n<p>On your specific example the method is being created only on the <code>b</code> instance, making it what is called a <code>singleton method</code>, meaning it only exists for this particular instance. The author could have used <code>eval</code> but since it evaluate code on a more global scope, it's considered unsafe. </p>\n\n<p>Edit: </p>\n\n<p>The same effect would be produced if you defined the method using <code>b</code> as the receiver</p>\n\n<pre><code>def b.book_name\nend\n</code></pre>\n"}], "owner": {"reputation": 118, "user_id": 6080990, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ded713da57161f76d1ed079264c47112?s=128&d=identicon&r=PG&f=1", "display_name": "rohan kharvi", "link": "https://stackoverflow.com/users/6080990/rohan-kharvi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 49639034, "answer_count": 2, "score": 0, "last_activity_date": 1522789016, "creation_date": 1522733522, "last_edit_date": 1522752828, "question_id": 49622879, "link": "https://stackoverflow.com/questions/49622879/why-use-instance-eval-instead-of-creating-a-method", "title": "Why use &#39;instance_eval&#39; instead of creating a method?", "body": "<p>Here's a code sample:</p>\n\n<pre><code>class Book\n  def initialize\n    @v = \"abc\"\n  end\nend\n\nb = Book.new\nb.instance_eval do\n  def book_name\n  end\nend\n</code></pre>\n\n<p>Why do we use <code>instance_eval</code> to create a method (<code>book_name</code>) instead of adding <code>book_name</code> method inside class <code>Book</code>? The method (<code>book_name</code>) created using <code>instance_eval</code> will be accessible only by object <code>b</code> in the case above. Is there any particular use case?</p>\n"}, {"tags": ["ruby", "list", "rubygems"], "comments": [{"owner": {"reputation": 36, "user_id": 841629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d3fd4d9bf9fb514f2d4b9ceb7956fde?s=128&d=identicon&r=PG", "display_name": "Thomas L. Lucero", "link": "https://stackoverflow.com/users/841629/thomas-l-lucero"}, "edited": false, "score": 0, "creation_date": 1522796932, "post_id": 49622127, "comment_id": 86288333, "body": "can&#39;t install any gems. Example:       gem install rubyfann-1.2.6 ERROR:  Could not find a valid gem &#39;rubyfann-1.2.6&#39; (&gt;= 0), here is why: Unable to download data from <a href=\"https://rubygems.org/\" rel=\"nofollow noreferrer\">rubygems.org</a> - timed out (<a href=\"https://api.rubygems.org/specs.4.8.gz\" rel=\"nofollow noreferrer\">api.rubygems.org/specs.4.8.gz</a>)      changed my .gemrc  --- :backtrace: false :bulk_threshold: 1000 :sources: - <a href=\"https://rubygems.org/\" rel=\"nofollow noreferrer\">rubygems.org</a> :update_sources: true :verbose: true benchmark: false gem: &quot;--no-rdoc --no-ri&quot;      gem list -r ^rails still empty  uninstalled ruby. Reinstalled with ruby 2.5.1 - same problem"}], "answers": [{"comments": [{"owner": {"reputation": 36, "user_id": 841629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d3fd4d9bf9fb514f2d4b9ceb7956fde?s=128&d=identicon&r=PG", "display_name": "Thomas L. Lucero", "link": "https://stackoverflow.com/users/841629/thomas-l-lucero"}, "edited": false, "score": 0, "creation_date": 1522795895, "post_id": 49622291, "comment_id": 86288087, "body": "--- :backtrace: false :bulk_threshold: 1000 :sources: - <a href=\"https://rubygems.org/\" rel=\"nofollow noreferrer\">rubygems.org</a> :update_sources: true :verbose: true benchmark: false gem: &quot;--no-rdoc --no-ri&quot;"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 36, "user_id": 841629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d3fd4d9bf9fb514f2d4b9ceb7956fde?s=128&d=identicon&r=PG", "display_name": "Thomas L. Lucero", "link": "https://stackoverflow.com/users/841629/thomas-l-lucero"}, "edited": false, "score": 0, "creation_date": 1522803657, "post_id": 49622291, "comment_id": 86289974, "body": "please modify ~/.gemrc to match <code>- https:&#47;&#47;rubygems.org&#47;</code> after sources. What you have also fails for me when I try what you have."}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1522763934, "last_edit_date": 1522763934, "creation_date": 1522729829, "answer_id": 49622291, "question_id": 49622127, "link": "https://stackoverflow.com/questions/49622127/gem-list-r-finds-nothing/49622291#49622291", "title": "gem list -r finds nothing", "body": "<p>well looks like you have no sources. see in gem env <code>\"gem\" =&gt; \"--no-document\"</code></p>\n\n<p>try running this:</p>\n\n<pre><code>gem sources -a https://rubygems.org/\n</code></pre>\n\n<p>my env differs by:</p>\n\n<pre><code>- GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n     - :sources =&gt; [\"https://rubygems.org/\"]\n     - \"benchmark\" =&gt; false\n     - \"gem\" =&gt; \"--no-rdoc --no-ri\"\n</code></pre>\n\n<p>can you paste output of <code>~/.gemrc</code> to make sure?  Mine looks like:</p>\n\n<pre><code>---\n:backtrace: false\n:bulk_threshold: 1000\n:sources:\n- https://rubygems.org/\n:update_sources: true\n:verbose: true\nbenchmark: false\ngem: \"--no-rdoc --no-ri\"\n</code></pre>\n\n<p>If this doesn't work, perhaps try installing ruby using rvm <a href=\"https://rvm.io/rvm/install\" rel=\"nofollow noreferrer\">https://rvm.io/rvm/install</a></p>\n"}], "owner": {"reputation": 36, "user_id": 841629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d3fd4d9bf9fb514f2d4b9ceb7956fde?s=128&d=identicon&r=PG", "display_name": "Thomas L. Lucero", "link": "https://stackoverflow.com/users/841629/thomas-l-lucero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 392, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522763934, "creation_date": 1522728622, "question_id": 49622127, "link": "https://stackoverflow.com/questions/49622127/gem-list-r-finds-nothing", "title": "gem list -r finds nothing", "body": "<pre><code>gem list -r ra \n</code></pre>\n\n<p>=> <strong>* REMOTE GEMS *</strong>\nbut no gems appear</p>\n\n<pre><code>gem list \n</code></pre>\n\n<p>=> (my installed gems)</p>\n\n<pre><code>ruby -v \n</code></pre>\n\n<p>=> ruby 2.5.0p0 (2017-12-25 revision 61468) [x86_64-linux]</p>\n\n<pre><code>gem -v \n</code></pre>\n\n<p>=> 2.7.3</p>\n\n<pre><code>gem environment\n</code></pre>\n\n<p>RubyGems Environment:</p>\n\n<ul>\n<li>RUBYGEMS VERSION: 2.7.3</li>\n<li>RUBY VERSION: 2.5.0 (2017-12-25 patchlevel 0) [x86_64-linux]</li>\n<li>INSTALLATION DIRECTORY: /home/xxx/.gem/ruby/2.5.0</li>\n<li>USER INSTALLATION DIRECTORY: /home/xxx/.gem/ruby/2.5.0</li>\n<li>RUBY EXECUTABLE: /usr/local/rubies/2.5.0/bin/ruby</li>\n<li>EXECUTABLE DIRECTORY: /home/xxx/.gem/ruby/2.5.0/bin</li>\n<li>SPEC CACHE DIRECTORY: /home/xxx/.gem/specs</li>\n<li>SYSTEM CONFIGURATION DIRECTORY: /usr/local/rubies/2.5.0/etc</li>\n<li>RUBYGEMS PLATFORMS:\n\n<ul>\n<li>ruby</li>\n<li>x86_64-linux</li>\n</ul></li>\n<li><p>GEM PATHS:</p>\n\n<ul>\n<li>/home/xxx/.gem/ruby/2.5.0</li>\n<li>/usr/local/rubies/2.5.0/lib/ruby/gems/2.5.0</li>\n</ul></li>\n<li><p>GEM CONFIGURATION:</p>\n\n<ul>\n<li>:update_sources => true</li>\n<li>:verbose => true</li>\n<li>:backtrace => false</li>\n<li>:bulk_threshold => 1000</li>\n<li>\"gem\" => \"--no-document\"</li>\n</ul></li>\n<li><p>REMOTE SOURCES:</p>\n\n<ul>\n<li><a href=\"https://rubygems.org/\" rel=\"nofollow noreferrer\">https://rubygems.org/</a></li>\n</ul></li>\n<li><p>SHELL PATH:</p>\n\n<ul>\n<li>/home/xxx/.gem/ruby/2.5.0/bin</li>\n<li>/usr/local/rubies/2.5.0/lib/ruby/gems/2.5.0/bin</li>\n<li>/usr/local/rubies/2.5.0/bin</li>\n<li>/home/xxx/.nvm/versions/node/v8.8.1/bin</li>\n<li>/usr/local/heroku/bin</li>\n<li>/home/xxx/commands</li>\n<li>/home/xxx/bin</li>\n<li>/usr/local/sbin</li>\n<li>/usr/local/bin</li>\n<li>/usr/sbin</li>\n<li>/usr/bin</li>\n<li>/sbin</li>\n<li>/bin</li>\n<li>/usr/games</li>\n<li>/usr/local/games</li>\n<li>/snap/bin</li>\n</ul></li>\n</ul>\n\n<p>I haven't changed anything (that I'm aware of) in my ruby since when it did work. Any suggestions on where to look?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubymine", "ruby-on-rails-5.1", "ruby-2.3"], "comments": [{"owner": {"reputation": 13101, "user_id": 6059896, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiTP.gif?s=128&g=1", "display_name": "tukan", "link": "https://stackoverflow.com/users/6059896/tukan"}, "edited": false, "score": 1, "creation_date": 1522741726, "post_id": 49621057, "comment_id": 86256578, "body": "The stacktrace is not enough.  Please add your data which you are sending.  Just a wild guess: are your all files encoded the same way?  Second guess are you using dates in your code - is there a data locals involved?"}], "owner": {"reputation": 11, "user_id": 9519314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/424422af9fc804731cfe46b6864a63b7?s=128&d=identicon&r=PG&f=1", "display_name": "kylereese", "link": "https://stackoverflow.com/users/9519314/kylereese"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 553, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1522744574, "creation_date": 1522720094, "last_edit_date": 1522744574, "question_id": 49621057, "link": "https://stackoverflow.com/questions/49621057/source-sequence-is-illegal-malformed-utf-8-when-including-gon-gem", "title": "source sequence is illegal/malformed utf-8 when including GON gem?", "body": "<p>I am working with Ruby 2.3.3, Rails 5.1.5 and using the RubyMine (JetBrains) IDE and I am working the gon gem to send data to javascript. In my <code>application.html.erb</code> I am setting the <code>&lt;%= include_gon %&gt;</code> in the head (as specified by the gon documentation) and I am getting the illegal/malformed utf-8 exception. I ran this same code on C9 with Ruby 2.4.1 and Rails 5.1.4 with no error.</p>\n\n<p>Here is the full stack trace:</p>\n\n<pre><code>activesupport (5.1.6) lib/active_support/core_ext/object/json.rb:36:in `to_json'\nactivesupport (5.1.6) lib/active_support/core_ext/object/json.rb:36:in `to_json'\nactivesupport (5.1.6) lib/active_support/json/encoding.rb:55:in `to_json'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/2.3.0/json/common.rb:224:in `generate'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/2.3.0/json/common.rb:224:in `generate'\nactivesupport (5.1.6) lib/active_support/json/encoding.rb:100:in `stringify'\nactivesupport (5.1.6) lib/active_support/json/encoding.rb:33:in `encode'\nactivesupport (5.1.6) lib/active_support/json/encoding.rb:20:in `encode'\nactivesupport (5.1.6) lib/active_support/core_ext/object/json.rb:39:in `to_json'\nmulti_json (1.13.1) lib/multi_json/adapters/json_common.rb:19:in `dump'\nmulti_json (1.13.1) lib/multi_json/adapter.rb:25:in `dump'\nmulti_json (1.13.1) lib/multi_json.rb:139:in `dump'\ngon (6.2.0) lib/gon/json_dumper.rb:4:in `dump'\ngon (6.2.0) lib/gon/base.rb:93:in `to_json'\ngon (6.2.0) lib/gon/base.rb:77:in `render_variable'\ngon (6.2.0) lib/gon/base.rb:51:in `block in formatted_data'\ngon (6.2.0) lib/gon/base.rb:51:in `each'\ngon (6.2.0) lib/gon/base.rb:51:in `map'\ngon (6.2.0) lib/gon/base.rb:51:in `formatted_data'\ngon (6.2.0) lib/gon/base.rb:24:in `render_data'\ngon (6.2.0) lib/gon/helpers.rb:5:in `include_gon'\napp/views/layouts/application.html.erb:5:in `_app_views_layouts_application_html_erb__726524811_120260856'\nactionview (5.1.6) lib/action_view/template.rb:157:in `block in render'\nactivesupport (5.1.6) lib/active_support/notifications.rb:168:in `instrument'\nactionview (5.1.6) lib/action_view/template.rb:352:in `instrument_render_template'\nactionview (5.1.6) lib/action_view/template.rb:155:in `render'\nactionview (5.1.6) lib/action_view/renderer/template_renderer.rb:64:in `render_with_layout'\nactionview (5.1.6) lib/action_view/renderer/template_renderer.rb:50:in `render_template'\nactionview (5.1.6) lib/action_view/renderer/template_renderer.rb:14:in `render'\nactionview (5.1.6) lib/action_view/renderer/renderer.rb:42:in `render_template'\nactionview (5.1.6) lib/action_view/renderer/renderer.rb:23:in `render'\nactionview (5.1.6) lib/action_view/rendering.rb:103:in `_render_template'\nactionpack (5.1.6) lib/action_controller/metal/streaming.rb:217:in `_render_template'\nactionview (5.1.6) lib/action_view/rendering.rb:83:in `render_to_body'\nactionpack (5.1.6) lib/action_controller/metal/rendering.rb:52:in `render_to_body'\nactionpack (5.1.6) lib/action_controller/metal/renderers.rb:141:in `render_to_body'\nactionpack (5.1.6) lib/abstract_controller/rendering.rb:24:in `render'\nactionpack (5.1.6) lib/action_controller/metal/rendering.rb:36:in `render'\nactionpack (5.1.6) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'\nactivesupport (5.1.6) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'\nactivesupport (5.1.6) lib/active_support/core_ext/benchmark.rb:12:in `ms'\nactionpack (5.1.6) lib/action_controller/metal/instrumentation.rb:44:in `block in render'\nactionpack (5.1.6) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'\nactiverecord (5.1.6) lib/active_record/railties/controller_runtime.rb:34:in `cleanup_view_runtime'\nactionpack (5.1.6) lib/action_controller/metal/instrumentation.rb:43:in `render'\nactionpack (5.1.6) lib/action_controller/metal/implicit_render.rb:33:in `default_render'\nactionpack (5.1.6) lib/action_controller/metal/basic_implicit_render.rb:4:in `block in send_action'\nactionpack (5.1.6) lib/action_controller/metal/basic_implicit_render.rb:4:in `tap'\nactionpack (5.1.6) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'\nactionpack (5.1.6) lib/abstract_controller/base.rb:186:in `process_action'\nactionpack (5.1.6) lib/action_controller/metal/rendering.rb:30:in `process_action'\nactionpack (5.1.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'\nactivesupport (5.1.6) lib/active_support/callbacks.rb:131:in `run_callbacks'\nactionpack (5.1.6) lib/abstract_controller/callbacks.rb:19:in `process_action'\nactionpack (5.1.6) lib/action_controller/metal/rescue.rb:20:in `process_action'\nactionpack (5.1.6) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'\nactivesupport (5.1.6) lib/active_support/notifications.rb:166:in `block in instrument'\nactivesupport (5.1.6) lib/active_support/notifications/instrumenter.rb:21:in `instrument'\nactivesupport (5.1.6) lib/active_support/notifications.rb:166:in `instrument'\nactionpack (5.1.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'\nactionpack (5.1.6) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'\nactiverecord (5.1.6) lib/active_record/railties/controller_runtime.rb:22:in `process_action'\nactionpack (5.1.6) lib/abstract_controller/base.rb:124:in `process'\nactionview (5.1.6) lib/action_view/rendering.rb:30:in `process'\nactionpack (5.1.6) lib/action_controller/metal.rb:189:in `dispatch'\nactionpack (5.1.6) lib/action_controller/metal.rb:253:in `dispatch'\nactionpack (5.1.6) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'\nactionpack (5.1.6) lib/action_dispatch/routing/route_set.rb:31:in `serve'\nactionpack (5.1.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'\nactionpack (5.1.6) lib/action_dispatch/journey/router.rb:33:in `each'\nactionpack (5.1.6) lib/action_dispatch/journey/router.rb:33:in `serve'\nactionpack (5.1.6) lib/action_dispatch/routing/route_set.rb:844:in `call'\nrack (2.0.4) lib/rack/etag.rb:25:in `call'\nrack (2.0.4) lib/rack/conditional_get.rb:25:in `call'\nrack (2.0.4) lib/rack/head.rb:12:in `call'\nrack (2.0.4) lib/rack/session/abstract/id.rb:232:in `context'\nrack (2.0.4) lib/rack/session/abstract/id.rb:226:in `call'\nactionpack (5.1.6) lib/action_dispatch/middleware/cookies.rb:613:in `call'\nactiverecord (5.1.6) lib/active_record/migration.rb:556:in `call'\nactionpack (5.1.6) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'\nactivesupport (5.1.6) lib/active_support/callbacks.rb:97:in `run_callbacks'\nactionpack (5.1.6) lib/action_dispatch/middleware/callbacks.rb:24:in `call'\nactionpack (5.1.6) lib/action_dispatch/middleware/executor.rb:12:in `call'\nactionpack (5.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'\nweb-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'\nweb-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'\nweb-console (3.5.1) lib/web_console/middleware.rb:18:in `catch'\nweb-console (3.5.1) lib/web_console/middleware.rb:18:in `call'\nactionpack (5.1.6) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'\nrailties (5.1.6) lib/rails/rack/logger.rb:36:in `call_app'\nrailties (5.1.6) lib/rails/rack/logger.rb:24:in `block in call'\nactivesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `block in tagged'\nactivesupport (5.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'\nactivesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `tagged'\nrailties (5.1.6) lib/rails/rack/logger.rb:24:in `call'\nsprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'\nactionpack (5.1.6) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'\nrequest_store (1.4.1) lib/request_store/middleware.rb:19:in `call'\nactionpack (5.1.6) lib/action_dispatch/middleware/request_id.rb:25:in `call'\nrack (2.0.4) lib/rack/method_override.rb:22:in `call'\nrack (2.0.4) lib/rack/runtime.rb:22:in `call'\nactivesupport (5.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'\nactionpack (5.1.6) lib/action_dispatch/middleware/executor.rb:12:in `call'\nactionpack (5.1.6) lib/action_dispatch/middleware/static.rb:125:in `call'\nrack (2.0.4) lib/rack/sendfile.rb:111:in `call'\nrailties (5.1.6) lib/rails/engine.rb:522:in `call'\npuma (3.11.3) lib/puma/configuration.rb:225:in `call'\npuma (3.11.3) lib/puma/server.rb:624:in `handle_request'\npuma (3.11.3) lib/puma/server.rb:438:in `process_client'\npuma (3.11.3) lib/puma/server.rb:302:in `block in run'\npuma (3.11.3) lib/puma/thread_pool.rb:120:in `block in spawn_thread'\n</code></pre>\n\n<p>I have been searching all over the internet for a solution but this dilemma seems to be localized to me. Also, the GemFile does have the gem 'gon' line and I performed a bundle install and update. I have also tried to run this locally on <code>Ruby 2.4.3</code> and the same error persists. Please help.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 9494, "user_id": 1244455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2d100b37ea641d0189a946f05b08ce84?s=128&d=identicon&r=PG", "display_name": "Sean Mackesey", "link": "https://stackoverflow.com/users/1244455/sean-mackesey"}, "edited": false, "score": 0, "creation_date": 1522718512, "post_id": 49620736, "comment_id": 86248691, "body": "Thanks for your response. As can be seen from the Ruby 2.5 docs, the <code>Tempfile#create</code> <code>basename</code> argument is optional. Also, I tried your solution and it does not work on my machine-- without <code>f.rewind</code> I get no output at all from <code>f.read</code> (which is what I would expect, since the <code>Tempfile</code> <code>pos</code> is past the point of the <code>STARTING_TEXT</code>). I&#39;m not sure how you&#39;re getting this to work without rewind -- maybe it has something to do with OS differences? I&#39;m on a Mac running High Sierra."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 9494, "user_id": 1244455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2d100b37ea641d0189a946f05b08ce84?s=128&d=identicon&r=PG", "display_name": "Sean Mackesey", "link": "https://stackoverflow.com/users/1244455/sean-mackesey"}, "edited": false, "score": 0, "creation_date": 1522721750, "post_id": 49620736, "comment_id": 86249406, "body": "I&#39;m on MacOS 10.11.6 because I don&#39;t wanna &quot;you must be f**kin&#39; high Sierra&quot; lol. Forced 2fac auth? no thanks. I tested this on 2.3.6 but let me test others and get back to you."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 9494, "user_id": 1244455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2d100b37ea641d0189a946f05b08ce84?s=128&d=identicon&r=PG", "display_name": "Sean Mackesey", "link": "https://stackoverflow.com/users/1244455/sean-mackesey"}, "edited": false, "score": 0, "creation_date": 1522722241, "post_id": 49620736, "comment_id": 86249529, "body": "@SeanMackesey see my updated answer.  I even tried this doing <code>:q!</code> in vim and still got the output I typed in vim. As a 2nd test I tested this on a dockerized linux with ruby 2.3.6 and it also worked fine."}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1522723799, "last_edit_date": 1522723799, "creation_date": 1522717010, "answer_id": 49620736, "question_id": 49620591, "link": "https://stackoverflow.com/questions/49620591/modifying-an-opened-temporary-file-from-another-process-in-ruby/49620736#49620736", "title": "Modifying an opened temporary file from another process in Ruby", "body": "<p>I was able to get it to work with:</p>\n\n<pre><code>Tempfile.create('.') do |f|\n  f.write STARTING_TEXT\n  f.flush\n  system( \"vim #{f.path}\" )\n  puts f.read\nend\n</code></pre>\n\n<p>Looks like <code>f.rewind</code> is your problem.  BTW parenthesis on ruby method calls are optional. Surely not needed if you're not passing any arguments.</p>\n\n<p>I ran this in MacOS 10.11.6 with rvm ruby-2.4.1 see my terminal output:</p>\n\n<pre><code>sandbox % ruby junk.rb\nBlah blah bla\nblah balh blah\n\nThese blahs ^^ where here already.\nI typed this line in vim and then did :wq\nsandbox %\n</code></pre>\n\n<p>Maybe try this to see if everything looks as you'd expect:</p>\n\n<pre><code>require 'tempfile'\n\nSTARTING_TEXT = &lt;&lt;~STR\nBlah blah blah\nblah balh blah\nSTR\n\ndef puts_info(f)\n  puts f.path\n  puts f.stat.to_s\nend\n\nTempfile.create do |f|\n  f.write(STARTING_TEXT)\n  puts_info(f)\n  f.flush\n  f.rewind\n  system( \"vim #{f.path}\" )\n  puts f.read\n  puts_info(f)\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1522732648, "creation_date": 1522732648, "answer_id": 49622710, "question_id": 49620591, "link": "https://stackoverflow.com/questions/49620591/modifying-an-opened-temporary-file-from-another-process-in-ruby/49622710#49622710", "title": "Modifying an opened temporary file from another process in Ruby", "body": "<p>I believe one should <code>f.rewind</code> <em>after</em> the file was actually modified and <em>immediately before</em> <code>f.read</code>. The following works perfectly for me:</p>\n\n<pre><code>Tempfile.create(?.) do |f|\n  f.write \"Blah\"\n  f.flush\n  system( \"vim #{f.path}\" )  # typing YAY\n  f.rewind                   # \u21d0 HERE!\n  puts f.read\nend    \n#\u21d2\u00a0Blah\n#  YAY\n</code></pre>\n\n<p><em>Sidenote:</em> consider trying <code>$EDITOR</code> before <code>vim</code> hardcoded; the tastes of your users might differ :)</p>\n"}], "owner": {"reputation": 9494, "user_id": 1244455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2d100b37ea641d0189a946f05b08ce84?s=128&d=identicon&r=PG", "display_name": "Sean Mackesey", "link": "https://stackoverflow.com/users/1244455/sean-mackesey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1522732648, "creation_date": 1522715527, "last_edit_date": 1522716811, "question_id": 49620591, "link": "https://stackoverflow.com/questions/49620591/modifying-an-opened-temporary-file-from-another-process-in-ruby", "title": "Modifying an opened temporary file from another process in Ruby", "body": "<p>I am trying to launch an editor from a Ruby script to edit an existing string and then retrieve the modified contents when the editor exits:</p>\n\n<pre><code>require 'tempfile'\n\nSTARTING_TEXT = &lt;&lt;~STR\nBlah blah blah\nblah balh blah\nSTR\n\nTempfile.create do |f|\n  f.write(STARTING_TEXT)\n  f.flush()\n  f.rewind()\n  system( \"vim #{f.path}\" )\n  puts f.read\nend\n</code></pre>\n\n<p>The problem is that, regardless of what I put in the temp file in the editor, <code>f.read</code> always and only returns the <code>STARTING_TEXT</code>. I know that I am successfully writing the file from the editor because, if I pause execution after the <code>system()</code> call with a breakpoint, I can <code>cat</code> the tempfile and see the modified contents.</p>\n\n<p>It seems like some kind of buffering, either Ruby or OS-based, is preventing me from getting the modified text file contents. What's going on?</p>\n"}, {"tags": ["ruby", "automated-tests"], "comments": [{"owner": {"reputation": 2048, "user_id": 1268652, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/CO9Tz.jpg?s=128&g=1", "display_name": "Pascal Raszyk", "link": "https://stackoverflow.com/users/1268652/pascal-raszyk"}, "edited": false, "score": 3, "creation_date": 1522711866, "post_id": 49620157, "comment_id": 86247250, "body": "You can&#39;t <code>.new</code> modules. Try adding a class inside your module and try initializing it like: <code>myGemName::MyClass.new()</code>"}, {"owner": {"reputation": 8135, "user_id": 1721969, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2365a301f0bc9a71c7a08f5001084c16?s=128&d=identicon&r=PG", "display_name": "user101289", "link": "https://stackoverflow.com/users/1721969/user101289"}, "reply_to_user": {"reputation": 2048, "user_id": 1268652, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/CO9Tz.jpg?s=128&g=1", "display_name": "Pascal Raszyk", "link": "https://stackoverflow.com/users/1268652/pascal-raszyk"}, "edited": false, "score": 0, "creation_date": 1522809478, "post_id": 49620157, "comment_id": 86291338, "body": "@PascalRaszyk-- thanks, add this as an answer and I&#39;ll accept it"}], "answers": [{"tags": [], "owner": {"reputation": 8135, "user_id": 1721969, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2365a301f0bc9a71c7a08f5001084c16?s=128&d=identicon&r=PG", "display_name": "user101289", "link": "https://stackoverflow.com/users/1721969/user101289"}, "is_accepted": true, "score": 0, "last_activity_date": 1523310373, "creation_date": 1523310373, "answer_id": 49742153, "question_id": 49620157, "link": "https://stackoverflow.com/questions/49620157/ruby-gem-test-fails/49742153#49742153", "title": "ruby gem test fails", "body": "<p>Thanks to @PascalRaszyk answer in the comments, the correct solution is that you can't use <code>.new</code> against a module. So I needed to create a class inside the module, then use <code>myGemName::MyClass.new()</code> in the test to use the <code>initialize</code> method.</p>\n"}], "owner": {"reputation": 8135, "user_id": 1721969, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2365a301f0bc9a71c7a08f5001084c16?s=128&d=identicon&r=PG", "display_name": "user101289", "link": "https://stackoverflow.com/users/1721969/user101289"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 49742153, "answer_count": 1, "score": 0, "last_activity_date": 1523310373, "creation_date": 1522711774, "question_id": 49620157, "link": "https://stackoverflow.com/questions/49620157/ruby-gem-test-fails", "title": "ruby gem test fails", "body": "<p>I'm trying to write my first Ruby gem, and so far I think it's all good-- however, my test fails to run with the error:</p>\n\n<p><code>NoMethodError: undefined method 'new' for myGemName:Module</code></p>\n\n<p>I have defined an initialize function in the main class:</p>\n\n<pre><code>def initialize(my_variable = false)\n    if (my_variable) \n      self.set_variable = my_variable\n    end\nend\n</code></pre>\n\n<p>I get the same error when running from <code>irb</code>: <code>t = myGemName.new</code> </p>\n"}, {"tags": ["ruby", "algorithm", "recursion", "backtracking"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1522710738, "post_id": 49619530, "comment_id": 86247008, "body": "That&#39;s a whole lot of code for what boils down to simple substring manipulation. <code>unseen[i,1] = &quot;&quot;</code> will delete <code>1</code> character at position <code>i</code>. For other occasions prefer <code>unseen.chars</code> to <code>unseen.split(&#39;&#39;)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 106013, "user_id": 633183, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RHeN9.png?s=128&g=1", "display_name": "Thank you", "link": "https://stackoverflow.com/users/633183/thank-you"}, "edited": false, "score": 0, "creation_date": 1522769336, "post_id": 49620217, "comment_id": 86275030, "body": "very nice encoding, Cary"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 8, "last_activity_date": 1537227801, "last_edit_date": 1537227801, "creation_date": 1522712260, "answer_id": 49620217, "question_id": 49619530, "link": "https://stackoverflow.com/questions/49619530/algorithm-backtracking-how-to-do-recursion-without-storing-state/49620217#49620217", "title": "Algorithm Backtracking: How to do recursion without storing state", "body": "<p>The permutations of the string <code>\"cd\"</code> is <code>[\"cd\", \"dc\"]</code>. If we now wish to obtain the permutations of the string <code>\"bcd\"</code> we simply replace each element of this array with three strings, each having <code>\"b\"</code> at a different position. <code>\"cd\"</code> becomes <code>\"bcd\"</code>, <code>\"cbd\"</code> and <code>\"cdb\"</code> and <code>\"dc\"</code> becomes  <code>\"bdc\"</code>,  <code>\"dbc\"</code> and  <code>\"dba\"</code>. The permutations of <code>\"bcd\"</code> are therefore</p>\n\n<pre><code>[\"bcd\", \"cbd\", \"cdb\", \"bdc\", \"dbc\", \"dba\"]\n</code></pre>\n\n<p>If we now wish to obtain the permutations of <code>\"abcd\"</code>, we replace each element of the above six-element array with four strings, each with <code>\"a\"</code> in a different position. For example, <code>\"bcd\"</code> becomes <code>\"abcd\"</code>, <code>\"bacd\"</code>, <code>\"bcad\"</code> and <code>\"bcda\"</code>. The structure of the recursion should now be obvious.</p>\n\n<pre><code>def permute(str)\n  case str.length\n  when 0, 1\n    str\n  when 2\n    [str, str.reverse]\n  else\n    first = str[0]\n    sz = str.size-1\n    permute(str[1..-1]).flat_map { |s| (0..sz).map { |i| s.dup.insert(i,first) } }\n  end\nend\n\npermute('')\n  #=&gt; \"\"\npermute('a')\n  #=&gt; \"a\"\npermute('ab')\n  #=&gt; [\"ab\", \"ba\"]\npermute('abc')\n  #=&gt; [\"abc\", \"bac\", \"bca\", \"acb\", \"cab\", \"cba\"]    \npermute('abcd')\n  #=&gt; [\"abcd\", \"bacd\", \"bcad\", \"bcda\", \"acbd\", \"cabd\", \"cbad\", \"cbda\",\n  #    \"acdb\", \"cadb\", \"cdab\", \"cdba\", \"abdc\", \"badc\", \"bdac\", \"bdca\",\n  #    \"adbc\", \"dabc\", \"dbac\", \"dbca\", \"adcb\", \"dacb\", \"dcab\", \"dcba\"]\n</code></pre>\n\n<p><code>str</code> is of course the \"unseen\" variable.</p>\n"}, {"tags": [], "owner": {"reputation": 106013, "user_id": 633183, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RHeN9.png?s=128&g=1", "display_name": "Thank you", "link": "https://stackoverflow.com/users/633183/thank-you"}, "is_accepted": false, "score": 2, "last_activity_date": 1522769241, "creation_date": 1522769241, "answer_id": 49633804, "question_id": 49619530, "link": "https://stackoverflow.com/questions/49619530/algorithm-backtracking-how-to-do-recursion-without-storing-state/49633804#49633804", "title": "Algorithm Backtracking: How to do recursion without storing state", "body": "<p>@CarySwoveland's answer an explanation is awesome, per usual. For those looking to permute an <em>array</em>, consider this functional approach. While this uses an auxiliary lambda <code>all_pos</code>, no extra state parameter is used to accumulate the result.</p>\n\n<pre><code>def permute ((x, *xs))\n\n  all_pos = lambda do |(y,*ys)|\n    if y.nil?\n      [[ x ]]\n    else\n      [[ x, y, *ys ]] + (all_pos.call ys) .map { |rest| [ y, *rest ] }\n    end\n  end\n\n  if x.nil? or xs.empty?\n    [[x]]\n  else\n    (permute xs) .flat_map &amp;all_pos\n  end\n\nend\n\npermute [1,2,3,4]\n\n# [ [1, 2, 3, 4]\n# , [2, 1, 3, 4]\n# , [2, 3, 1, 4]\n# , [2, 3, 4, 1]\n# , [1, 3, 2, 4]\n# , [3, 1, 2, 4]\n# , [3, 2, 1, 4]\n# , [3, 2, 4, 1]\n# , [1, 3, 4, 2]\n# , [3, 1, 4, 2]\n# , [3, 4, 1, 2]\n# , [3, 4, 2, 1]\n# , [1, 2, 4, 3]\n# , [2, 1, 4, 3]\n# , [2, 4, 1, 3]\n# , [2, 4, 3, 1]\n# , [1, 4, 2, 3]\n# , [4, 1, 2, 3]\n# , [4, 2, 1, 3]\n# , [4, 2, 3, 1]\n# , [1, 4, 3, 2]\n# , [4, 1, 3, 2]\n# , [4, 3, 1, 2]\n# , [4, 3, 2, 1]\n# ]\n</code></pre>\n"}], "owner": {"reputation": 877, "user_id": 4586117, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/921578031200237/picture?type=large", "display_name": "Saurav Prakash", "link": "https://stackoverflow.com/users/4586117/saurav-prakash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 358, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1537227801, "creation_date": 1522707311, "question_id": 49619530, "link": "https://stackoverflow.com/questions/49619530/algorithm-backtracking-how-to-do-recursion-without-storing-state", "title": "Algorithm Backtracking: How to do recursion without storing state", "body": "<p>Normally in backtracking, we take a helper function which takes in an initial state and each recursive call takes care of its own computation and pass the result to the next recursion call. Theoretically, we denote this through unseen and seen variable.</p>\n\n<p>For example, in permutation for a string we will use this program:</p>\n\n<pre><code>def permute(str)\n  return str if str.length &lt; 2 \n  permute_helper(str, \"\")\nend \n\ndef permute_helper(unseen, seen)\n  #base case\n  if unseen.length &lt;= 0\n    p seen\n    return\n  else \n    (0..unseen.length-1).each do |i|\n      buffer = unseen \n      buffer = buffer.split('')\n      buffer.delete_at(i)\n      buffer = buffer.join('')\n      permute_helper(buffer, seen+unseen[i])\n    end \n  end\nend \n\npermute('abc')\n</code></pre>\n\n<p>Thie will print out the required results. </p>\n\n<p>I was asked to do this without using two variables in a recent interview. without storing state in the seen variable. I couldn't think through the whole at that time but I would like to ask how to do backtracking without storing states ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "associations", "activesupport-concern"], "answers": [{"comments": [{"owner": {"reputation": 830, "user_id": 5136200, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gBAqD.jpg?s=128&g=1", "display_name": "Archer", "link": "https://stackoverflow.com/users/5136200/archer"}, "edited": false, "score": 1, "creation_date": 1522706782, "post_id": 49619425, "comment_id": 86245915, "body": "Oh... yes you&#39;re right. Now I understand whats going wrong. Thank you very much."}], "tags": [], "owner": {"reputation": 38790, "user_id": 665240, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/32fc08ee80cf129f6b1e8593eccb9a03?s=128&d=identicon&r=PG", "display_name": "Carl Zulauf", "link": "https://stackoverflow.com/users/665240/carl-zulauf"}, "is_accepted": true, "score": 1, "last_activity_date": 1522706612, "creation_date": 1522706612, "answer_id": 49619425, "question_id": 49619027, "link": "https://stackoverflow.com/questions/49619027/dynaimc-class-name-in-ruby-association/49619425#49619425", "title": "Dynaimc class_name in ruby-association", "body": "<p>In your <code>included</code> block <code>self</code> is the class being included into. <code>self.class_name</code> is probably what you want. <code>self.class.class_name</code> is what you have and is asking for the class of a model class, which is <code>Class</code>.</p>\n\n<p>The only time you really should use <code>self.class</code> is when you are in the scope of an instance of a class and need to access the class of that instance object. In your included block you are already in the class context so <code>.class</code> is asking for the class of a class.</p>\n\n<p>Meta-programming can get kind of confusing. Hope that makes sense.</p>\n"}], "owner": {"reputation": 830, "user_id": 5136200, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gBAqD.jpg?s=128&g=1", "display_name": "Archer", "link": "https://stackoverflow.com/users/5136200/archer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 0, "accepted_answer_id": 49619425, "answer_count": 1, "score": 0, "last_activity_date": 1522706749, "creation_date": 1522704254, "last_edit_date": 1522706749, "question_id": 49619027, "link": "https://stackoverflow.com/questions/49619027/dynaimc-class-name-in-ruby-association", "title": "Dynaimc class_name in ruby-association", "body": "<p><strong>Problem</strong><br>\nThere are some models which should be copied as a template.<br>\nFor example: There is a News entry and I want to copy it to several groups.<br>\nSo the copied elements should have the association to the template. And the template should have an association to it's elements.</p>\n\n<p><strong>Current State</strong><br>\nBecause there are several models with the same methods as a copyable element, I've created a concern. I've tried a dynamic association name to link to itself's class but when I create an element, there is a Missmatch Error.</p>\n\n\n\n<pre class=\"lang-rb prettyprint-override\"><code>item = self.class.find_or_create_by(group: group, group_template: self)\nActiveRecord::AssociationTypeMismatch: Class(#18118120) expected, got News(#140451780)\n</code></pre>\n\n<p>The association in the concern</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>included do\n  belongs_to :business_group\n  belongs_to :group_template, class_name: self.class.name, foreign_key: :template_id\n  has_many :group_elements, class_name: self.class.name, foreign_key: :template_id\nend\n</code></pre>\n\n<p>Is there a dynamic solution or should I remove it from the concern and copy it to all models?</p>\n"}, {"tags": ["ruby", "multithreading", "mutex"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1522710296, "post_id": 49618549, "comment_id": 86246903, "body": "Actually I <i>wouldn&#39;t</i> expect that to print multiple times. <a href=\"https://ruby-doc.org/core-2.5.0/Kernel.html#method-i-exit\" rel=\"nofollow noreferrer\"><code>exit</code></a> should tank the process."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1522773189, "post_id": 49618549, "comment_id": 86277362, "body": "@tadman multiple threads can hit the <code>puts</code> before one of them hits <code>exit</code>. It depends on how they&#39;re scheduled, but I usually get 2 or 3."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1522773608, "post_id": 49618549, "comment_id": 86277584, "body": "Is that with Jruby or MRI or some other Ruby?"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1522773636, "post_id": 49618549, "comment_id": 86277606, "body": "Good point, MRI."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1522773717, "post_id": 49618549, "comment_id": 86277653, "body": "Are you looking to prevent <code>exit</code> from being called more than once, or for <code>exit</code> to force-kill all other threads before exiting?"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1522777848, "post_id": 49618549, "comment_id": 86280042, "body": "I guess the former? I expect that if you lock a mutex and never unlock it, the code inside should only run once."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1522778664, "post_id": 49618549, "comment_id": 86280511, "body": "<code>lock</code> can fail and raise, so you may need to watch out for that."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1522779041, "post_id": 49618549, "comment_id": 86280721, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/168143/discussion-between-max-and-tadman\">continue this discussion in chat</a>."}], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1522773654, "creation_date": 1522701981, "last_edit_date": 1522773654, "question_id": 49618549, "link": "https://stackoverflow.com/questions/49618549/lock-a-mutex-around-an-exit-in-ruby", "title": "Lock a mutex around an exit in Ruby", "body": "<p>This code can print \"Exiting\" multiple times, as you might expect:</p>\n\n<pre><code>def print_and_exit\n  puts \"Exiting\"\n  exit\nend\n\nArray.new(100) { Thread.new { sleep 1; print_and_exit } }.each(&amp;:join)\n</code></pre>\n\n<p>But the behavior is the same even when you protect it with a mutex:</p>\n\n<pre><code>def print_and_exit\n  puts \"Exiting\"\n  exit\nend\n\nmutex = Mutex.new\n\nArray.new(100) { Thread.new { sleep 1; mutex.lock; print_and_exit } }.each(&amp;:join)\n</code></pre>\n\n<p>So it seems that <em>after</em> <code>exit</code> is called (and the mutex cleaned up), but <em>before</em> the process is actually exited, other threads continue to run. How can this be prevented?</p>\n\n<h3>Note</h3>\n\n<ul>\n<li>This isn't due to <code>exit</code>'s receiver. The same behavior occurs with <code>Thread.main.exit</code></li>\n<li>Doesn't make a difference if you use <code>mutex.synchronize</code></li>\n<li>This is with MRI 2.5.0p0</li>\n</ul>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1522826656, "post_id": 49617424, "comment_id": 86298064, "body": "What is that you want to do? We can only what the correct way to achieve what you want is, if you tell what it is that you want to achieve."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 9369607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8380dfba9fe5e3cbae91a120e2812742?s=128&d=identicon&r=PG&f=1", "display_name": "E. Tahiraj", "link": "https://stackoverflow.com/users/9369607/e-tahiraj"}, "edited": false, "score": 0, "creation_date": 1522742284, "post_id": 49617447, "comment_id": 86256915, "body": "Thank you very much"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 21, "user_id": 9369607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8380dfba9fe5e3cbae91a120e2812742?s=128&d=identicon&r=PG&f=1", "display_name": "E. Tahiraj", "link": "https://stackoverflow.com/users/9369607/e-tahiraj"}, "edited": false, "score": 0, "creation_date": 1522759140, "post_id": 49617447, "comment_id": 86267371, "body": "If this solves your problem don&#39;t forget to mark the answer as accepted. This helps steer others in the same situation towards a solution."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 5, "last_activity_date": 1522696930, "creation_date": 1522696930, "answer_id": 49617447, "question_id": 49617424, "link": "https://stackoverflow.com/questions/49617424/hash-mathemetical-operations/49617447#49617447", "title": "Hash mathemetical operations", "body": "<p>If you're trying to subtract one from a value in a hash:</p>\n\n<pre><code>hash[\"Num\"] -= 1\n</code></pre>\n\n<p>When you put <code>hash[\"Num\"-1]</code> that tries to evaluate <code>\"Num\"-1</code> which isn't valid, you can't subtract a number from a string.</p>\n"}], "owner": {"reputation": 21, "user_id": 9369607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8380dfba9fe5e3cbae91a120e2812742?s=128&d=identicon&r=PG&f=1", "display_name": "E. Tahiraj", "link": "https://stackoverflow.com/users/9369607/e-tahiraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 49617447, "answer_count": 1, "score": -2, "last_activity_date": 1522696930, "creation_date": 1522696819, "question_id": 49617424, "link": "https://stackoverflow.com/questions/49617424/hash-mathemetical-operations", "title": "Hash mathemetical operations", "body": "<p>I want to do a mathematical operation with this hash value for example:;</p>\n\n<pre><code>hash = {\"Num\"=&gt;4}\nhash[\"Num\"] = hash[\"Num\"-1]\n</code></pre>\n\n<p>P.S \nI know that that would result to an error so please tell what is the correct way.</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "time"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1542141965, "post_id": 49616614, "comment_id": 93460271, "body": "You should consider selecting the one and only answer if you found it helpful."}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1522694606, "post_id": 49616615, "comment_id": 86240650, "body": "Another reason to never ever use Rails/ActiveSupport. Applying a regex to everything in the input just because the developer is lazy enough to convert datetimes manually is insane, ugly and should be avoided by everybody."}], "tags": [], "owner": {"reputation": 865, "user_id": 369669, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c9c2fdea45b2615a5892c39756a65740?s=128&d=identicon&r=PG", "display_name": "Sean Moubry", "link": "https://stackoverflow.com/users/369669/sean-moubry"}, "is_accepted": false, "score": 6, "last_activity_date": 1522695367, "last_edit_date": 1522695367, "creation_date": 1522693470, "answer_id": 49616615, "question_id": 49616614, "link": "https://stackoverflow.com/questions/49616614/how-to-automatically-convert-json-time-strings-into-time-objects-with-ruby/49616615#49616615", "title": "How to automatically convert JSON time strings into Time objects with Ruby?", "body": "<p>Active Support can automatically convert ISO 8601 formatted times into <code>ActiveSupport::TimeWithZone</code> objects when you set <code>ActiveSupport.parse_json_times = true</code>.</p>\n\n<p><a href=\"http://api.rubyonrails.org/classes/ActiveSupport/JSON.html\" rel=\"nofollow noreferrer\">http://api.rubyonrails.org/classes/ActiveSupport/JSON.html</a></p>\n\n<pre><code>#!/usr/bin/env ruby\n\nrequire 'active_support/json'\nrequire 'active_support/time'\n\nTime.zone = 'UTC'\nActiveSupport.parse_json_times = true\n\nputs payload1 = JSON.generate({ now: Time.now })\nputs payload2 = ActiveSupport::JSON.encode({ now: Time.now })\n\nputs ActiveSupport::JSON.decode(payload1)['now'].class\nputs ActiveSupport::JSON.decode(payload2)['now'].class\n</code></pre>\n\n<p>Which will output:</p>\n\n<pre><code>{\"now\":\"2018-04-02 13:19:40 -0500\"}\n{\"now\":\"2018-04-02T13:19:40.291-05:00\"}\nString\nActiveSupport::TimeWithZone\n</code></pre>\n\n<p>Notice how Ruby stdlib\u2019s default time is not parseable by Active Support. Only the ISO 8601 formatted time gets successfully converted. Active Support <a href=\"https://github.com/rails/rails/blob/master/activesupport/lib/active_support/json/decoding.rb#L14\" rel=\"nofollow noreferrer\">uses a regex to detect times</a>. You can <a href=\"https://github.com/rails/rails/blob/master/activesupport/test/json/decoding_test.rb\" rel=\"nofollow noreferrer\">read the tests</a> to get a good idea of the time formats that it supports. Looks like it supports ISO 8601, but does <em>not</em> support Unix/POSIX/Epoch timestamps.</p>\n\n<p>I was informed of this feature in Active Support when I created <a href=\"https://github.com/rails/rails/issues/32424\" rel=\"nofollow noreferrer\">this issue against Rails</a>.</p>\n\n<p>Some history: Time parsing used to be the default behavior in Rails, but then <code>ActiveSupport.parse_json_times</code> was added for people who wanted to turn it off, and then it became turned off by default, so now you have to opt into it.</p>\n"}], "owner": {"reputation": 865, "user_id": 369669, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c9c2fdea45b2615a5892c39756a65740?s=128&d=identicon&r=PG", "display_name": "Sean Moubry", "link": "https://stackoverflow.com/users/369669/sean-moubry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1241, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1522695367, "creation_date": 1522693470, "last_edit_date": 1522694265, "question_id": 49616614, "link": "https://stackoverflow.com/questions/49616614/how-to-automatically-convert-json-time-strings-into-time-objects-with-ruby", "title": "How to automatically convert JSON time strings into Time objects with Ruby?", "body": "<p>When I\u2019m using Ruby to consume a web service API that returns time strings in JSON, I want them automatically converted into <code>Time</code> objects (or <code>DateTime</code> objects) so that I don\u2019t have do it manually myself.</p>\n\n<p>For example, I want this to output <code>Time</code> instead of <code>String</code>:</p>\n\n<pre><code>irb(main):001:0&gt; require 'json'\n=&gt; true\nirb(main):002:0&gt; payload = JSON.generate({ now: Time.now })\n=&gt; \"{\\\"now\\\":\\\"2018-04-02 13:15:56 -0500\\\"}\"\nirb(main):003:0&gt; JSON.parse(payload)['now'].class\n=&gt; String\n</code></pre>\n\n<p>I understand that times are not part of the JSON spec. I\u2019m just wondering if there\u2019s a way to configure Ruby\u2019s stdlib JSON parser to automatically parse dates, or if there\u2019s a library that does this for you.</p>\n"}, {"tags": ["ruby", "cucumber", "selenium-chromedriver"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1522699246, "post_id": 49616093, "comment_id": 86242930, "body": "What version of chrome are you running?  If you have chrome v64-66, you&#39;ll want chromedriver 2.37."}], "answers": [{"tags": [], "owner": {"reputation": 16, "user_id": 2262308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59c98feaace98f4a7a684cf9137b7823?s=128&d=identicon&r=PG", "display_name": "dmurphy10", "link": "https://stackoverflow.com/users/2262308/dmurphy10"}, "is_accepted": true, "score": 0, "last_activity_date": 1522796759, "last_edit_date": 1522796759, "creation_date": 1522794288, "answer_id": 49639984, "question_id": 49616093, "link": "https://stackoverflow.com/questions/49616093/ruby-cucumber-chrome-driver-failed-to-start/49639984#49639984", "title": "Ruby Cucumber: Chrome Driver failed to start", "body": "<p>This is an error when using an older version of the chrome driver such as your version 23 and the latest version of chrome browser. </p>\n\n<p>Upgrade and replace the driver, that your automation path is using for it, to the latest version 27 and this will fix this error.</p>\n\n<p><a href=\"https://sites.google.com/a/chromium.org/chromedriver/downloads\" rel=\"nofollow noreferrer\">https://sites.google.com/a/chromium.org/chromedriver/downloads</a></p>\n\n<p>Cheers.</p>\n"}], "owner": {"reputation": 99, "user_id": 9151398, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh4.googleusercontent.com/-no8DL4aF74w/AAAAAAAAAAI/AAAAAAAADIY/VOcckYLoLgA/photo.jpg?sz=128", "display_name": "Abdul Mukheem Shaik", "link": "https://stackoverflow.com/users/9151398/abdul-mukheem-shaik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 655, "favorite_count": 0, "accepted_answer_id": 49639984, "answer_count": 1, "score": 0, "last_activity_date": 1522796759, "creation_date": 1522691258, "question_id": 49616093, "link": "https://stackoverflow.com/questions/49616093/ruby-cucumber-chrome-driver-failed-to-start", "title": "Ruby Cucumber: Chrome Driver failed to start", "body": "<p>I am trying to Launch chrome browser from Ruby Cucumber framework. But i see it is throwing me an error.</p>\n\n<p>I followed the solutions from stack overflow i.e., to re install chrome application but i see it apparently not working for me.</p>\n\n<p>Here is the code from <code>env.rb</code> file.</p>\n\n<pre><code>require 'selenium-webdriver'\nBefore do\n  Selenium::WebDriver::Chrome.driver_path=\"E:/chromedriver.exe\"\n      $driver=Selenium::WebDriver.for(:chrome)\n\nend\n</code></pre>\n\n<p>Error is see is as follows.</p>\n\n<pre><code>E:\\Eclipse\\LoginMercury&gt;cucumber\n*** WARNING: You must use ANSICON 1.31 or higher (https://github.com/adoxa/ansic\non/) to get coloured output on Windows\nFeature: Registration and Login to Mercury Portal\n\n  Scenario: Registrating new user in Portal      # features/Login.feature:3\n  unknown error: chrome failed to start\n    (Driver info: chromedriver=2.3,platform=Windows NT 6.1 x86) (Selenium::WebDr\niver::Error::UnknownError)\n  ./features/support/env.rb:4:in `Before'\n    Given Load Home page                         # features/step_definitions/Log\ninStep.rb:1\n    When User need provide Username and password # features/step_definitions/Log\ninStep.rb:6\n    Then Login to Portal                         # features/step_definitions/Log\ninStep.rb:10\n\nFailing Scenarios:\ncucumber features/Login.feature:3 # Scenario: Registrating new user in Portal\n\n1 scenario (1 failed)\n3 steps (3 skipped)\n0m1.180s\n</code></pre>\n\n<p>As I am using Windows 7, I've tried with older versions of chrome driver even.(V2.3). Yet i failed.\nCan someone help me in moving further.</p>\n\n<p>Thanks...!!!!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "activeadmin"], "answers": [{"tags": [], "owner": {"reputation": 3638, "user_id": 1977104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fe5f45f44332caa3a105c05382c8e7b?s=128&d=identicon&r=PG", "display_name": "Wasif Hossain", "link": "https://stackoverflow.com/users/1977104/wasif-hossain"}, "is_accepted": false, "score": 1, "last_activity_date": 1522700747, "creation_date": 1522700747, "answer_id": 49618310, "question_id": 49615845, "link": "https://stackoverflow.com/questions/49615845/nomethoderror-in-activeadmindevisesessionsnew-when-logging-in-as-admin/49618310#49618310", "title": "NoMethodError in ActiveAdmin::Devise::Sessions#new when logging in as Admin", "body": "<p>Assuming that you are using multiple models with Devise (<code>AdminUser</code> and <code>User</code>), if you change the <code>authentication_keys</code> in devise initializer config, it will impose the rule for both the models. As <code>username</code> attribute is clearly missing from <code>AdminUser</code>, this method won't work for you.</p>\n\n<p>If you want to authenticate <strong>admin_users with email</strong> and <strong>users with username</strong>, then you need to <strong>add <code>authentication_keys</code> along with other devise options in the respective models instead of the initializer</strong> like so:</p>\n\n<pre><code># AdminUser\nclass AdminUser &lt; ApplicationRecord\n  ...\n  devise :database_authenticatable,..., authentication_keys: [:email]\n  ...\nend\n\n# User\nclass User &lt; ApplicationRecord\n  ...\n  devise :database_authenticatable,..., authentication_keys: [:username]\n  ...\nend\n</code></pre>\n\n<p>You may <a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-sign_in-using-their-username-or-email-address\" rel=\"nofollow noreferrer\">follow this link</a> if you want to allow <strong>any of email/username</strong> for both type of users</p>\n"}], "owner": {"reputation": 1019, "user_id": 5587988, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207118714582472/picture?type=large", "display_name": "DaudiHell", "link": "https://stackoverflow.com/users/5587988/daudihell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 454, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522700747, "creation_date": 1522690333, "last_edit_date": 1522691909, "question_id": 49615845, "link": "https://stackoverflow.com/questions/49615845/nomethoderror-in-activeadmindevisesessionsnew-when-logging-in-as-admin", "title": "NoMethodError in ActiveAdmin::Devise::Sessions#new when logging in as Admin", "body": "<p>I'm using <code>ActvieAdmin</code> for the backend of my app.</p>\n\n<p>I did following changes to let my users use their <code>username</code> to sign up to their account.</p>\n\n<p>in <code>config/initializers/devise.rb</code> I changed <code>config.authentication_keys = [:username]</code></p>\n\n<p>then I added the following lines to the <code>user.rb</code> model</p>\n\n<pre><code>validates :email,uniqueness: true \nvalidates :username,uniqueness: true\n</code></pre>\n\n<p>Then I created a migration <code>rails generate migration add_username_to_users username:string:uniq</code> and then <code>rake db:migrate</code></p>\n\n<p>then in the end I modified the devise views to show <code>:username</code></p>\n\n<p>I can now log in as a user with username</p>\n\n<p>But I can't log in to ActiveAdmin anymore. I get this error messages</p>\n\n<pre><code>NoMethodError in ActiveAdmin::Devise::Sessions#new\n\nShowing /Users/dadi/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activeadmin-1.2.1/app/views/active_admin/devise/sessions/new.html.erb where line #8 raised:\n\nundefined method `username' for #&lt;AdminUser id: nil, email: \"\", created_at: nil, updated_at: nil&gt;\n</code></pre>\n\n<p>I'm not sure How I can make ActiveAdmin log_in work again.\nCan anyone help me with this? </p>\n"}, {"tags": ["ruby", "csv", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 724, "user_id": 5494897, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cd2f409e842eb3572bc8ca0f33b68f3?s=128&d=identicon&r=PG", "display_name": "Bradley", "link": "https://stackoverflow.com/users/5494897/bradley"}, "edited": false, "score": 0, "creation_date": 1522746155, "post_id": 49615920, "comment_id": 86259155, "body": "Thanks a million Dan. That did the trick alright and thanks for the explanation. mudasobwa&#39;s answer above would have led me the right way too but because you were first in and it solves my problem i&#39;ve added this as the answer. Any idea on how to pull in all the columns. Right now I just get the booking headers but would like to add the booking.user headers too. Thanks."}], "tags": [], "owner": {"reputation": 78, "user_id": 6621001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29b29d46fb79f37ee47e869d86e272ea?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/6621001/dan"}, "is_accepted": true, "score": 1, "last_activity_date": 1522690635, "creation_date": 1522690635, "answer_id": 49615920, "question_id": 49615777, "link": "https://stackoverflow.com/questions/49615777/rails-5-csv-merge-export/49615920#49615920", "title": "Rails 5 CSV merge export", "body": "<p>I believe your problem is that you are mismatching the booking's attributes (a hash) with the booking's user's attributes' values (an array)</p>\n\n<p>Thus as the error message shows, there is no way for the computer to know which values belong to which keys.</p>\n\n<p>My guess is that you intended to write:</p>\n\n<p><code>booking.attributes.merge(booking.user.attributes).values</code> </p>\n\n<p>You <em>did</em> write:</p>\n\n<p><code>booking.attributes.merge(booking.user.attributes.values).values</code> </p>\n\n<p>Whatever the case, the thing you are merging needs keys!</p>\n"}, {"comments": [{"owner": {"reputation": 724, "user_id": 5494897, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cd2f409e842eb3572bc8ca0f33b68f3?s=128&d=identicon&r=PG", "display_name": "Bradley", "link": "https://stackoverflow.com/users/5494897/bradley"}, "edited": false, "score": 0, "creation_date": 1522746237, "post_id": 49616433, "comment_id": 86259208, "body": "Thanks a million mudasobwa, Your explanation helped me understand what was going on here but Dan&#39;s got in their first and did solve the problem I had. I think you are both right. Not sure procedure on who should get the marking for it."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 724, "user_id": 5494897, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cd2f409e842eb3572bc8ca0f33b68f3?s=128&d=identicon&r=PG", "display_name": "Bradley", "link": "https://stackoverflow.com/users/5494897/bradley"}, "edited": false, "score": 0, "creation_date": 1522746589, "post_id": 49616433, "comment_id": 86259389, "body": "@Bradley once again: if both <code>booking</code> and <code>user</code> have attribute key clash (e.g. both have an attribute named \u201cname,\u201d) merging <i>hashes</i> upfront would discard the former attribute. Adding arrays would save both attributes."}, {"owner": {"reputation": 724, "user_id": 5494897, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cd2f409e842eb3572bc8ca0f33b68f3?s=128&d=identicon&r=PG", "display_name": "Bradley", "link": "https://stackoverflow.com/users/5494897/bradley"}, "edited": false, "score": 0, "creation_date": 1522746826, "post_id": 49616433, "comment_id": 86259553, "body": "So by making them arrays and adding them together like so   csv &lt;&lt; (booking.user.attributes.values + booking.attributes.values)  Should bring in the header values even if any conflicting header names? This doesn&#39;t seem to work."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 724, "user_id": 5494897, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cd2f409e842eb3572bc8ca0f33b68f3?s=128&d=identicon&r=PG", "display_name": "Bradley", "link": "https://stackoverflow.com/users/5494897/bradley"}, "edited": false, "score": 0, "creation_date": 1522747056, "post_id": 49616433, "comment_id": 86259683, "body": "Sure it works. Try to produce <code>csv</code> in console with simple hashes like: <code>{foo: :bar}</code> and <code>{foo: 42}</code>."}, {"owner": {"reputation": 724, "user_id": 5494897, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cd2f409e842eb3572bc8ca0f33b68f3?s=128&d=identicon&r=PG", "display_name": "Bradley", "link": "https://stackoverflow.com/users/5494897/bradley"}, "edited": false, "score": 0, "creation_date": 1522750741, "post_id": 49616433, "comment_id": 86262065, "body": "No idea, so i&#39;ve done csv_string = {foo: :bar}, {foo: 42} and got result of &quot;{:foo=&gt;:bar},{:foo=&gt;42}\\n&quot; when entering: csv_string.to_csv   I suppose this proves your point it spits out the :foo on both but I still cannot get the csv file in my app to print out anymore headers than just the booking headers and not actually booking.schedule or booking.user headers.   Sorry it just confuses the *** out of me."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1522692668, "creation_date": 1522692668, "answer_id": 49616433, "question_id": 49615777, "link": "https://stackoverflow.com/questions/49615777/rails-5-csv-merge-export/49616433#49616433", "title": "Rails 5 CSV merge export", "body": "<p>CSV expects an array as a row, while you are messing with hashes:</p>\n\n<pre><code>#      \u21d3      hash      \u21d3       \u21d3         hash        \u21d3 array \u21d3 array \u21d3\ncsv &lt;&lt; booking.attributes.merge(booking.user.attributes.values).values \n</code></pre>\n\n<p>Merging hashes is dangerous, because if <code>user</code> have the same keys as <code>booking</code>, the latter will be discarded. What you want is probably just to add up two arrays of values:</p>\n\n<pre><code>csv &lt;&lt; (booking.attributes.values + booking.user.attributes.values)\n</code></pre>\n\n<p>or, if the user\u2019s fields are to go first:</p>\n\n<pre><code>csv &lt;&lt; (booking.user.attributes.values + booking.attributes.values)\n</code></pre>\n"}], "owner": {"reputation": 724, "user_id": 5494897, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cd2f409e842eb3572bc8ca0f33b68f3?s=128&d=identicon&r=PG", "display_name": "Bradley", "link": "https://stackoverflow.com/users/5494897/bradley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 0, "accepted_answer_id": 49615920, "answer_count": 2, "score": 0, "last_activity_date": 1522692668, "creation_date": 1522690015, "question_id": 49615777, "link": "https://stackoverflow.com/questions/49615777/rails-5-csv-merge-export", "title": "Rails 5 CSV merge export", "body": "<p>I'm trying to export CSV file from a table in my rails app. I can export booking.attributes.values and I can export booking.user.attributes.values separately however when I try merge these two I receive an error. </p>\n\n<p>\"no implicit conversion of Array into Hash\"</p>\n\n<p>Here is my code I am working with including some commented code. The csv file does only pull in the header for booking.attributes though. This is something extra I need to figure out. </p>\n\n<p>Booking model</p>\n\n<pre><code>    def self.to_csv(options = {})\n#       desired_columns = [\"fname\",\"lname\",\"email\",\"nationality\",\"date_of_birth\",\"phone_number\"]\n        CSV.generate(options) do |csv|\n            csv &lt;&lt; column_names\n            all.each do |booking|\n#               csv &lt;&lt; booking.user.attributes.merge(booking.course.attributes).values_at(*desired_columns)\n#               csv &lt;&lt; booking.user.attributes.values\n#               csv &lt;&lt; booking.attributes.values\n                csv &lt;&lt; booking.attributes.merge(booking.user.attributes.values).values\n            end\n        end\nend\n</code></pre>\n\n<p>Booking Controller</p>\n\n<pre><code>   def index\n        @bookings = Booking.all.paginate(page: params[:page], per_page: 20)\n\n        # respond to look for html but also csv data and xls\n        respond_to do |format|\n        format.html\n        format.csv { send_data @bookings.to_csv }\n        format.xls \n        end\n    end\n</code></pre>\n\n<p>Here is the table view I am trying to recreate in CSV format. This works as intended. </p>\n\n<pre><code>    &lt;table class=\"table\"&gt;\n  &lt;thead class=\"thead-dark\"&gt;\n    &lt;tr&gt;\n      &lt;th scope=\"col\"&gt;Name&lt;/th&gt;\n      &lt;th scope=\"col\"&gt;Email&lt;/th&gt;\n      &lt;th scope=\"col\"&gt;Nationality&lt;/th&gt;\n      &lt;th scope=\"col\"&gt;D.O.B&lt;/th&gt;\n      &lt;th scope=\"col\"&gt;Phone Number&lt;/th&gt;\n      &lt;th scope=\"col\"&gt;Course Name&lt;/th&gt;\n      &lt;th scope=\"col\"&gt;Course Start&lt;/th&gt;\n      &lt;th colspan=\"3\"&gt;&lt;/th&gt;\n    &lt;/tr&gt;\n  &lt;/thead&gt;\n\n  &lt;tbody id=\"bookingTable\"&gt;\n    &lt;% @bookings.each do | booking | %&gt;\n      &lt;tr&gt;\n       &lt;td scope=\"row\"&gt;&lt;%= booking.user.fname %&gt; &lt;%= booking.user.lname %&gt;&lt;/td&gt;\n        &lt;td scope=\"row\"&gt;&lt;%= booking.user.email %&gt;&lt;/td&gt;\n        &lt;td scope=\"row\"&gt;&lt;%= booking.user.nationality %&gt;&lt;/td&gt;\n        &lt;td scope=\"row\"&gt;&lt;%= booking.user.date_of_birth&amp;.strftime(\"%d/%m/%Y\") %&gt;&lt;/td&gt;\n        &lt;td scope=\"row\"&gt;&lt;%= booking.user.phone_number %&gt;&lt;/td&gt;\n        &lt;td scope=\"row\"&gt;&lt;%= booking.course.title %&gt;&lt;/td&gt;\n        &lt;td scope=\"row\"&gt;&lt;%= booking.schedule.start_date&amp;.strftime(\"%d %B %Y\") %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= link_to 'View User', user_path(booking.user), class: \"btn btn-info\" %&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;% end %&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>Any direction would be appreciated. Thank you.</p>\n"}, {"tags": ["ruby", "email", "outlook", "ole"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1522691761, "post_id": 49615086, "comment_id": 86239195, "body": "As a note, it&#39;s probably a lot easier to send email from Ruby to your SMTP server directly than through Outlook."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1522693868, "post_id": 49615086, "comment_id": 86240277, "body": "see my updated answer below"}], "answers": [{"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1522693690, "last_edit_date": 1522693690, "creation_date": 1522688111, "answer_id": 49615325, "question_id": 49615086, "link": "https://stackoverflow.com/questions/49615086/cannot-send-email-via-outlook-in-ruby/49615325#49615325", "title": "cannot send email via outlook in ruby", "body": "<p>Make sure you have a valid email address, use the same one you used in your IRB test case.  It looks like perhaps this line should be moved before your loop:</p>\n\n<pre><code>outlook = WIN32OLE.new('Outlook.Application')\n</code></pre>\n\n<p>So try:</p>\n\n<pre><code>require 'win32ole'\n\ndef sendemail(outlook, foldernumber, templatename,nameplaceholder,actualname,emailid)\n  mapi = outlook.GetNameSpace('MAPI')\n  drafts = mapi.GetDefaultFolder(foldernumber)\n  outlook = WIN32OLE.new('Outlook.Application')\n\n  # Iterate over messages in a folder:\n\n  drafts.Items.each do |message|\n\n    # Your code here...\n    if message.Subject =~ /test email/i\n      message1 = outlook.CreateItem(0)\n      message1.Subject=message.Subject\n      message1.Body=message.Body\n      message1.Body=message1.Body.gsub(nameplaceholder,actualname)\n      message1.To=emailid\n      message1.Save\n      message1.Send\n    end\n  end  \nend\n\nsendemail(outlook, 16, \"test email\",\"&lt;TBD&gt;\",\"Junkee\",\"junkone2@dd.com\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1173, "user_id": 384936, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5044d0567cc7ae2e52cbd511958e2c15?s=128&d=identicon&r=PG", "display_name": "junkone", "link": "https://stackoverflow.com/users/384936/junkone"}, "is_accepted": false, "score": 1, "last_activity_date": 1522689503, "creation_date": 1522689503, "answer_id": 49615646, "question_id": 49615086, "link": "https://stackoverflow.com/questions/49615086/cannot-send-email-via-outlook-in-ruby/49615646#49615646", "title": "cannot send email via outlook in ruby", "body": "<p>I did not use a proper email address and I fixed it.it now works.</p>\n"}], "owner": {"reputation": 1173, "user_id": 384936, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5044d0567cc7ae2e52cbd511958e2c15?s=128&d=identicon&r=PG", "display_name": "junkone", "link": "https://stackoverflow.com/users/384936/junkone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1522693690, "creation_date": 1522687049, "last_edit_date": 1522691766, "question_id": 49615086, "link": "https://stackoverflow.com/questions/49615086/cannot-send-email-via-outlook-in-ruby", "title": "cannot send email via outlook in ruby", "body": "<p>I have a script where the syntax works using irb but not via the ruby program.\nThe script fails at the message1.Send line. However this syntax works when I execute it under irb.</p>\n\n<pre><code>**P:/RubyAutoEmail.rb:23:in `method_missing': (in OLE method `Send': ) (WIN32OLERuntimeError)**\n    OLE error code:4096 in Microsoft Outlook\n      Outlook does not recognize one or more names.\n    HRESULT error code:0x80020009\n      Exception occurred.\n        from P:/RubyAutoEmail.rb:23:in `block in sendemail'\n        from P:/RubyAutoEmail.rb:12:in `each'\n        from P:/RubyAutoEmail.rb:12:in `sendemail'\n        from P:/RubyAutoEmail.rb:35:in `&lt;main&gt;'\n</code></pre>\n\n<p>For example. here you can see that the message1.Send works</p>\n\n<pre><code>    irb(main):002:0&gt; require 'win32ole'\n=&gt; true\nirb(main):003:0&gt; outlook = WIN32OLE.new('Outlook.Application')\n=&gt; #&lt;WIN32OLE:0x0000000327a8c8&gt;\nirb(main):004:0&gt; mapi = outlook.GetNameSpace('MAPI')\n=&gt; #&lt;WIN32OLE:0x000000030e53a0&gt;\nirb(main):005:0&gt; drafts = mapi.GetDefaultFolder(16)\n=&gt; #&lt;WIN32OLE:0x000000032a8778&gt;\nirb(main):006:0&gt;  drafts.Items.each do |message|\nirb(main):007:1*  if message.Subject =~ /test email/i\nirb(main):008:2&gt; message1 = outlook.CreateItem(0)\nirb(main):009:2&gt; message1.Subject\nirb(main):010:2&gt; message1.To='junkone2@dd.com'\nirb(main):011:2&gt; message1.Send\nirb(main):012:2&gt; end\nirb(main):013:1&gt; end\n=&gt; nil\n</code></pre>\n\n<p>However, when I write it using a script, it fails. </p>\n\n<pre><code>    require 'win32ole'\n\n    def sendemail(outlook, foldernumber, templatename,nameplaceholder,actualname,emailid)\n    mapi = outlook.GetNameSpace('MAPI')\n drafts = mapi.GetDefaultFolder(foldernumber)\n\n # Iterate over messages in a folder:\n\n drafts.Items.each do |message|\n\n    # Your code here...\n if message.Subject =~ /test email/i\n# if message.Subject.downcase.include?(templatename.downcase)\nmessage1 = outlook.CreateItem(0)\nmessage1.Subject=message.Subject\nmessage1.Body=message.Body\nmessage1.Body=message1.Body.gsub(nameplaceholder,actualname)\nmessage1.To=emailid\nmessage1.Save\nmessage1.Send\n\n  end\n    end  \n    end\n\n    outlook = WIN32OLE.new('Outlook.Application')\n\n\n# constant numbers\n#https://msdn.microsoft.com/en-us/library/office/aa219371(v=office.11).aspx\n\n sendemail(outlook,16, \"test email\",\"&lt;TBD&gt;\",\"Junkee\",\"junkone97@gmail\")\n\n #https://stackoverflow.com/questions/12593166/whats-the-easiest-way-to-send-a-message-through-outlook-with-ruby\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "ruby-on-rails-5", "stripe-payments"], "comments": [{"owner": {"reputation": 4320, "user_id": 5108826, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dulBj.png?s=128&g=1", "display_name": "duck", "link": "https://stackoverflow.com/users/5108826/duck"}, "edited": false, "score": 0, "creation_date": 1522689819, "post_id": 49615035, "comment_id": 86238110, "body": "At first glance the code looks okay --- In your controller can you log <code>params[:stripeToken]</code> --- in your front-end  JS can you add some <code>console.log</code> statements around token creation --- does token creation happen as you expect, does a token make it to your backend. If you review your API logs in your Stripe Dashboard what do you see --- a lack of the token when creating a source on a customer?"}], "answers": [{"tags": [], "owner": {"reputation": 156, "user_id": 5413717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bfee6606a5d28858e1d9d0882492661?s=128&d=identicon&r=PG&f=1", "display_name": "debasish117", "link": "https://stackoverflow.com/users/5413717/debasish117"}, "is_accepted": false, "score": 0, "last_activity_date": 1526277756, "creation_date": 1526277756, "answer_id": 50323885, "question_id": 49615035, "link": "https://stackoverflow.com/questions/49615035/updating-existing-customers-card-information-with-stripe-rails/50323885#50323885", "title": "Updating existing customer&#39;s card information with Stripe, Rails", "body": "<p>You can try using card instead of source in the update_source action</p>\n\n<pre><code># create and update source\ncard = customer.sources.create(card: stripe_token)\ncard.save\ncustomer.default_card = card.id\ncustomer.save\n</code></pre>\n"}], "owner": {"reputation": 345, "user_id": 4038912, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-ESIQ431ki5k/AAAAAAAAAAI/AAAAAAAAAQA/LPTEQDTDNRE/photo.jpg?sz=128", "display_name": "Alex Heil", "link": "https://stackoverflow.com/users/4038912/alex-heil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 443, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1526277756, "creation_date": 1522686833, "question_id": 49615035, "link": "https://stackoverflow.com/questions/49615035/updating-existing-customers-card-information-with-stripe-rails", "title": "Updating existing customer&#39;s card information with Stripe, Rails", "body": "<p>I have existing customers in Stripe and I want them to be able to attach a payment source (card) to their accounts if they so choose. I went through the Stripe docs, so this is what I have right now:</p>\n\n<p><strong>stripe_controller.rb</strong></p>\n\n<pre><code>def update_source\n  @user = current_user\n\n  Stripe.api_key = \"sk_test_\"\n\n  # find customer\n  customer = Stripe::Customer.retrieve(@user.customer_id)\n\n  # get token from stripe\n  token = params[:stripeToken]\n\n  # create and update source\n  customer.sources.create({source: token})\n  customer.default_source = token\n  customer.save\n\n  if customer.save\n    redirect_to @user\n  end\nend\n</code></pre>\n\n<p><strong>_stripe.html.erb</strong></p>\n\n<pre><code>&lt;script type=\"text/javascript\" src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"https://js.stripe.com/v2/\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\"&gt;\n\n  // Create a Stripe client.\nvar stripe = Stripe('pk_test_');\n\n// Handle form submission.\nvar form = document.getElementById('payment-form');\nform.addEventListener('submit', function(event) {\n  event.preventDefault();\n\n  stripe.createToken(card).then(function(result) {\n    if (result.error) {\n      // Inform the user if there was an error.\n      var errorElement = document.getElementById('card-errors');\n      errorElement.textContent = result.error.message;\n    } else {\n      // Send the token to your server.\n      stripeTokenHandler(result.token);\n    }\n  });\n});\n\nfunction stripeTokenHandler(token) {\n  // Insert the token ID into the form so it gets submitted to the server\n  var form = document.getElementById('payment-form');\n  var hiddenInput = document.createElement('input');\n  hiddenInput.setAttribute('type', 'hidden');\n  hiddenInput.setAttribute('name', 'stripeToken');\n  hiddenInput.setAttribute('value', token.id);\n  form.appendChild(hiddenInput);\n\n  // Submit the form\n  form.submit();\n}\n&lt;/script&gt;\n</code></pre>\n\n<p><strong>edit_source.html.erb</strong></p>\n\n<pre><code>&lt;%= form_for(@user, url: update_source_path(@user), :html =&gt; {:id =&gt; \"payment-form\"}) do |f| %&gt;\n  &lt;div class=\"field\"&gt;\n    Card number\n    &lt;input class=\"text-field\" type=\"text\" size=\"20\" data-stripe=\"number\"/&gt;\n  &lt;/div&gt;\n  ...\n  ...\n  ...\n&lt;% end %&gt;\n</code></pre>\n\n<p>I'm getting an error <code>Stripe::InvalidRequestError (Missing required param: source.)</code> I don't think it's creating a <code>source</code> or even grabbing the <code>token</code> from Stripe. Not sure where I'm going wrong here.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "datetime"], "comments": [{"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1522686834, "post_id": 49614952, "comment_id": 86236558, "body": "Have you set ActiveRecord&#39;s time zone as well? This might help you: <a href=\"https://stackoverflow.com/questions/6118779/how-to-change-default-timezone-for-active-record-in-rails\" title=\"how to change default timezone for active record in rails\">stackoverflow.com/questions/6118779/&hellip;</a>"}, {"owner": {"reputation": 938, "user_id": 3389866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100001760573877/picture?type=large", "display_name": "fcastillo", "link": "https://stackoverflow.com/users/3389866/fcastillo"}, "reply_to_user": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1522687102, "post_id": 49614952, "comment_id": 86236675, "body": "@Gerry, Yes, I have <code>config.active_record.default_timezone = :local</code> in my <code>application.rb</code> too."}, {"owner": {"reputation": 43225, "user_id": 297087, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/17b3a5816f0647e9b0f7c49d60f93e7b?s=128&d=identicon&r=PG", "display_name": "Salil", "link": "https://stackoverflow.com/users/297087/salil"}, "edited": false, "score": 0, "creation_date": 1522688980, "post_id": 49614952, "comment_id": 86237678, "body": "Have you restart your rails application after changing the application.rb?"}, {"owner": {"reputation": 938, "user_id": 3389866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100001760573877/picture?type=large", "display_name": "fcastillo", "link": "https://stackoverflow.com/users/3389866/fcastillo"}, "reply_to_user": {"reputation": 43225, "user_id": 297087, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/17b3a5816f0647e9b0f7c49d60f93e7b?s=128&d=identicon&r=PG", "display_name": "Salil", "link": "https://stackoverflow.com/users/297087/salil"}, "edited": false, "score": 0, "creation_date": 1522689649, "post_id": 49614952, "comment_id": 86238026, "body": "@Salil, No because I haven&#39;t changed the <code>application.rb</code>"}, {"owner": {"reputation": 43225, "user_id": 297087, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/17b3a5816f0647e9b0f7c49d60f93e7b?s=128&d=identicon&r=PG", "display_name": "Salil", "link": "https://stackoverflow.com/users/297087/salil"}, "edited": false, "score": 0, "creation_date": 1522691463, "post_id": 49614952, "comment_id": 86239015, "body": "What is the o/p of <code>Time.strptime(&#39;16&#47;04&#47;2018 12:00&#39;, &#39;%d&#47;%m&#47;%Y %H:%M&#39;)</code> &amp; <code>Time.strptime(&#39;16&#47;04&#47;2018 12:00&#39;, &#39;%d&#47;%m&#47;%Y %H:%M&#39;).zone</code>"}, {"owner": {"reputation": 470, "user_id": 1249891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df65c5095bee4d8e1177fb87c4d81249?s=128&d=identicon&r=PG", "display_name": "Jacob Vanus", "link": "https://stackoverflow.com/users/1249891/jacob-vanus"}, "edited": false, "score": 0, "creation_date": 1522693344, "post_id": 49614952, "comment_id": 86240042, "body": "Also, <code>config.time_zone</code> does not change the <code>:local</code> timezone. That will be based on system time. Be sure <code>date</code> returns London time. [update: date the unix command, not ruby]"}, {"owner": {"reputation": 938, "user_id": 3389866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100001760573877/picture?type=large", "display_name": "fcastillo", "link": "https://stackoverflow.com/users/3389866/fcastillo"}, "reply_to_user": {"reputation": 43225, "user_id": 297087, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/17b3a5816f0647e9b0f7c49d60f93e7b?s=128&d=identicon&r=PG", "display_name": "Salil", "link": "https://stackoverflow.com/users/297087/salil"}, "edited": false, "score": 0, "creation_date": 1522745262, "post_id": 49614952, "comment_id": 86258607, "body": "@Salil, <code>&#39;2018-04-16 12:00:00 +0200&#39;</code> &amp; <code>&#39;CEST&#39;</code>"}, {"owner": {"reputation": 938, "user_id": 3389866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100001760573877/picture?type=large", "display_name": "fcastillo", "link": "https://stackoverflow.com/users/3389866/fcastillo"}, "reply_to_user": {"reputation": 470, "user_id": 1249891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df65c5095bee4d8e1177fb87c4d81249?s=128&d=identicon&r=PG", "display_name": "Jacob Vanus", "link": "https://stackoverflow.com/users/1249891/jacob-vanus"}, "edited": false, "score": 0, "creation_date": 1522745490, "post_id": 49614952, "comment_id": 86258728, "body": "@JacobVanus, my date unix command (I&#39;m in local) returns spanish date but in production returns UTC+0 and the result in views is the same."}, {"owner": {"reputation": 938, "user_id": 3389866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100001760573877/picture?type=large", "display_name": "fcastillo", "link": "https://stackoverflow.com/users/3389866/fcastillo"}, "edited": false, "score": 1, "creation_date": 1522750822, "post_id": 49614952, "comment_id": 86262120, "body": "Now it works! I added <code>zone</code> method to <code>Time</code> before save the field. <code>Element.create(start_hour: Time.zone.strptime(&#39;16&#47;04&#47;2018 12:00&#39;, &#39;%d&#47;%m&#47;%Y %H:%M&#39;))</code> then the time to save is transformed to <code>11:00</code> before save."}, {"owner": {"reputation": 405, "user_id": 1472621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc346c5eb97a9ef44347af50a81ad81f?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1472621/matt"}, "edited": false, "score": 0, "creation_date": 1522766691, "post_id": 49614952, "comment_id": 86273092, "body": "I&#39;d recommend following Thoughtbot&#39;s recommendations for more control over how time zones get saved and display. If you keep the default at UTC, you can do more with controllers/views to reliably ensure you&#39;re getting the right output. <a href=\"https://robots.thoughtbot.com/its-about-time-zones\" rel=\"nofollow noreferrer\">robots.thoughtbot.com/its-about-time-zones</a>"}], "owner": {"reputation": 938, "user_id": 3389866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100001760573877/picture?type=large", "display_name": "fcastillo", "link": "https://stackoverflow.com/users/3389866/fcastillo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1522689704, "creation_date": 1522686494, "last_edit_date": 1522689704, "question_id": 49614952, "link": "https://stackoverflow.com/questions/49614952/rails-time-zone-on-save", "title": "Rails Time Zone on save", "body": "<p>I have a problem with my <code>time_zone</code> in Rails APP.</p>\n\n<p>I have it configured to London in my <code>application.rb</code>:</p>\n\n<pre><code>config.time_zone = 'London'\nconfig.active_record.default_timezone = :local\n</code></pre>\n\n<p>Then, in my controller I have something like this:</p>\n\n<pre><code>Element.create(start_hour: Time.strptime('16/04/2018 12:00', '%d/%m/%Y %H:%M'))\n</code></pre>\n\n<p>What can I do to save this date and when I print the time in the view it returns me the London time?</p>\n\n<p>For example, in the previous example, now in my view: <code>element.start_hour.strftime('%H:%M')</code> prints <code>13:00</code> but I want that it prints <code>12:00</code></p>\n"}, {"tags": ["ruby", "chef-infra"], "answers": [{"tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 0, "last_activity_date": 1522693544, "creation_date": 1522693544, "answer_id": 49616637, "question_id": 49614404, "link": "https://stackoverflow.com/questions/49614404/chef-run-failed-due-to-unable-to-determine-node-name/49616637#49616637", "title": "Chef run failed due to Unable to determine node name", "body": "<p>You've clearly got a mismatch in what you are running. Your CLI says Chef 12, but the stack trace says Chef 11. I'm guessing you installed one via our Omnibus packages and the other via Rubygems? No matter the cause, fix that conflict and you'll probably be happier.</p>\n"}], "owner": {"reputation": 461, "user_id": 7647297, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-IkUGmoG0Wxw/AAAAAAAAAAI/AAAAAAAAABw/Wk5yAPARLxM/photo.jpg?sz=128", "display_name": "Rohit Kumar", "link": "https://stackoverflow.com/users/7647297/rohit-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 199, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522693544, "creation_date": 1522684343, "question_id": 49614404, "link": "https://stackoverflow.com/questions/49614404/chef-run-failed-due-to-unable-to-determine-node-name", "title": "Chef run failed due to Unable to determine node name", "body": "<p>When a machine gets rebooted. it fails on chef-client run(run from rc.local) but if i run it manually it gets success and same error return on next auto chef-run.when i restart the chef-client the error stop coming .\n    in fact when chef-client was failing on auto run ,ohai was giving the correct output.</p>\n\n<pre><code>root@something:~# ohai | grep 'fqdn'\n \"fqdn\": \"something.someone\",  \nroot@something:~# chef-client -v \nChef: 12.20.3 \nroot@something:~# ohai -v\nOhai: 8.23.0 \nroot@something:~# hostname -f\nsomething.someone\n</code></pre>\n\n<p>Output of stacktrace</p>\n\n<blockquote>\n  <p>root@something:~# cat /var/chef/cache/chef-stacktrace.out Generated at\n  2018-04-02 15:36:30 +0000 Chef::Exceptions::CannotDetermineNodeName:\n  Unable to determine node name: configure node_name or configure the\n  system's hostname and fqdn\n  /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-11.14.2/lib/chef/client.rb:299:in\n  <code>node_name'\n  /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-11.14.2/lib/chef/client.rb:313:in\n  </code>register'\n  /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-11.14.2/lib/chef/client.rb:416:in\n  <code>do_run'\n  /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-11.14.2/lib/chef/client.rb:213:in\n  </code>block in run'\n  /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-11.14.2/lib/chef/client.rb:207:in\n  <code>fork'\n  /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-11.14.2/lib/chef/client.rb:207:in\n  </code>run'\n  /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-11.14.2/lib/chef/application.rb:237:in\n  <code>run_chef_client'\n  /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-11.14.2/lib/chef/application/client.rb:338:in\n  </code>block in run_application'\n  /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-11.14.2/lib/chef/application/client.rb:327:in\n  <code>loop'\n  /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-11.14.2/lib/chef/application/client.rb:327:in\n  </code>run_application'\n  /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-11.14.2/lib/chef/application.rb:55:in\n  <code>run'\n  /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-11.14.2/bin/chef-client:26:in\n  </code>' /usr/bin/chef-client:23:in <code>load'\n  /usr/bin/chef-client:23:in</code>'root@web1.cst.webpod1-cph3:~#</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "loops", "iteration"], "answers": [{"comments": [{"owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 1, "creation_date": 1522685337, "post_id": 49614405, "comment_id": 86235807, "body": "Thank you very much, this is great and works perfectly, you saved my day :)"}, {"owner": {"reputation": 5415, "user_id": 2292448, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02a28db6886d578f75a820b50f2dd334?s=128&d=identicon&r=PG", "display_name": "Lazarus Lazaridis", "link": "https://stackoverflow.com/users/2292448/lazarus-lazaridis"}, "reply_to_user": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 0, "creation_date": 1522685407, "post_id": 49614405, "comment_id": 86235841, "body": "Glad I helped :)"}], "tags": [], "owner": {"reputation": 5415, "user_id": 2292448, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02a28db6886d578f75a820b50f2dd334?s=128&d=identicon&r=PG", "display_name": "Lazarus Lazaridis", "link": "https://stackoverflow.com/users/2292448/lazarus-lazaridis"}, "is_accepted": true, "score": 1, "last_activity_date": 1522684671, "last_edit_date": 1522684671, "creation_date": 1522684348, "answer_id": 49614405, "question_id": 49614239, "link": "https://stackoverflow.com/questions/49614239/4-graphs-for-each-user-need-to-show-the-fourth-graph-in-different-layout/49614405#49614405", "title": "4 graphs for each user, need to show the fourth graph in different layout", "body": "<p>First of all (unless I'm missing something), the <code>row</code> div should be the child of the <code>container</code> div.</p>\n\n<p>Given that the overviews will always be of fixed sized 4, try using the <code>each_with_index</code> method as shown below:</p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n    &lt;div class=\"row\"&gt;\n        &lt;% @user_overviews.each_with_index do |overview, index| %&gt;\n            &lt;div class=\"col-md-&lt;%= index == 3 ? '12' : '4' %&gt; text-center\"&gt;\n                &lt;h4&gt;&lt;%= overview.title %&gt;&lt;/h4&gt;\n                &lt;%= raw overview.graph%&gt;\n            &lt;/div&gt;\n        &lt;% end %&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 309, "user_id": 6793362, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4589bf211e8db9fafd983832c308f9a0?s=128&d=identicon&r=PG", "display_name": "Nikolay D", "link": "https://stackoverflow.com/users/6793362/nikolay-d"}, "is_accepted": false, "score": 1, "last_activity_date": 1528723361, "last_edit_date": 1528723361, "creation_date": 1522684437, "answer_id": 49614436, "question_id": 49614239, "link": "https://stackoverflow.com/questions/49614239/4-graphs-for-each-user-need-to-show-the-fourth-graph-in-different-layout/49614436#49614436", "title": "4 graphs for each user, need to show the fourth graph in different layout", "body": "<p>If each user has exactly 4 overviews, probably a simple solution is to iterate over all except the last one and then put another row for the last overview. You will need another row anyway if you want to have <code>col-md-12</code>.</p>\n\n<p>Also, I think the container div has to wrap everything else.</p>\n\n<p>Something like this maybe:</p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n    &lt;div class=\"row\"&gt;\n        &lt;% @user_overviews[0...-1].each do |overview| %&gt;\n            &lt;div class=\"col-md-4 text-center\"&gt;\n                &lt;h4&gt;&lt;%= overview.title %&gt;&lt;/h4&gt;\n                &lt;%= raw overview.graph %&gt;\n            &lt;/div&gt;\n        &lt;% end %&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"row\"&gt;\n        &lt;div class=\"col-md-12 text-center\"&gt;\n            &lt;h4&gt;&lt;%= @user_overviews.last.title %&gt;&lt;/h4&gt;\n            &lt;%= raw overview.graph %&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Edit: Lazarus' solution is more DRY, so I think it's better.</p>\n"}], "owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19, "favorite_count": 0, "accepted_answer_id": 49614405, "answer_count": 2, "score": 1, "last_activity_date": 1528723361, "creation_date": 1522683733, "question_id": 49614239, "link": "https://stackoverflow.com/questions/49614239/4-graphs-for-each-user-need-to-show-the-fourth-graph-in-different-layout", "title": "4 graphs for each user, need to show the fourth graph in different layout", "body": "<p>In my app each user has 4X graphs to display.</p>\n\n<p>I'm displaying 3X <code>col-md-4</code> graphs for each user through the  <code>each loop</code> below.</p>\n\n<p>This code is in my view.</p>\n\n<pre><code>&lt;div class=\"row\"&gt;\n&lt;div class=\"container\"&gt;\n    &lt;% @user_overviews.each do |overview| %&gt;\n\n        &lt;div class=\"col-md-4 text-center\"&gt;\n            &lt;h4&gt;&lt;%= overview.title %&gt;&lt;/h4&gt;\n        &lt;%= raw overview.graph%&gt;\n        &lt;/div&gt;\n\n\n    &lt;% end %&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>the problem is that I need to be able to show a fourth graph below the other three graphs in a <code>col-md-12</code>.</p>\n\n<p>I'm using active admin to upload the graphs, so the four graphs for user 1 have ID 1,2,3,4  and the next four graphs for user 2 have ID 5, 6, 7, 8  and so on.</p>\n\n<p>So in graph 4 and 8 are the once that should be displayed in the <code>col-md-12</code></p>\n\n<p>I find it hard to get around how I can display graph 4 and 8 in a <code>col-md-12</code></p>\n\n<p>can someone advise me on how I would do that?</p>\n"}, {"tags": ["ruby", "aws-sdk"], "answers": [{"comments": [{"owner": {"reputation": 25774, "user_id": 1048479, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/a9b214fab73f4c18ded501d976a2294c?s=128&d=identicon&r=PG", "display_name": "Nick Tomlin", "link": "https://stackoverflow.com/users/1048479/nick-tomlin"}, "edited": false, "score": 0, "creation_date": 1523321348, "post_id": 49614812, "comment_id": 86502146, "body": "I think you are right about the syntax (i&#39;ll update my question) but that still does not affect the result from the client"}], "tags": [], "owner": {"reputation": 5415, "user_id": 2292448, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02a28db6886d578f75a820b50f2dd334?s=128&d=identicon&r=PG", "display_name": "Lazarus Lazaridis", "link": "https://stackoverflow.com/users/2292448/lazarus-lazaridis"}, "is_accepted": false, "score": 0, "last_activity_date": 1522685905, "creation_date": 1522685905, "answer_id": 49614812, "question_id": 49613839, "link": "https://stackoverflow.com/questions/49613839/stubbing-s3-presigned-url-in-aws-sdk-v2/49614812#49614812", "title": "Stubbing S3 presigned_url in AWS SDK v2", "body": "<p>I think you are not stubbing the response correctly.</p>\n\n<p>Try this way:</p>\n\n<pre><code>test_client.stub_responses(:get_object, 'NotFound')\n</code></pre>\n\n<p>From the documentation, I see that the <code>stub_responses</code> method accepts an array of arguments, not a hash.</p>\n"}], "owner": {"reputation": 25774, "user_id": 1048479, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/a9b214fab73f4c18ded501d976a2294c?s=128&d=identicon&r=PG", "display_name": "Nick Tomlin", "link": "https://stackoverflow.com/users/1048479/nick-tomlin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 391, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523321367, "creation_date": 1522682114, "last_edit_date": 1523321367, "question_id": 49613839, "link": "https://stackoverflow.com/questions/49613839/stubbing-s3-presigned-url-in-aws-sdk-v2", "title": "Stubbing S3 presigned_url in AWS SDK v2", "body": "<p>I'm attempting to use the AWS Ruby SDK <a href=\"https://docs.aws.amazon.com/sdkforruby/api/Aws/ClientStubs.html#stub_responses-instance_method\" rel=\"nofollow noreferrer\">response stubs</a> to test some error handling in my interactions with S3.</p>\n\n<p>I've been able to stub a simplistic <code>put_object</code> case, but for some reason I cannot stub <a href=\"https://docs.aws.amazon.com/sdkforruby/api/Aws/S3/Object.html#presigned_url-instance_method\" rel=\"nofollow noreferrer\"><code>presigned_url</code></a>. It's important to note that I am using an older version of the SDK.</p>\n\n<pre><code># Gemfile\ngem 'aws-sdk', '2.3.22'\n</code></pre>\n\n        \n\n<pre><code>describe 'Stubbing AWS' do\n  module S3Helper\n    def self.presigned_url(object_key:, client:)\n      resource = ::Aws::S3::Resource.new(:client =&gt; client)\n      bucket = resource.bucket('my-great-bucket')\n      bucket\n        .object(object_key)\n        .presigned_url(:get)\n    end\n  end\n\n  it 'should allow me to stub signed_url' do\n    test_client = Aws::S3::Client.new(\n      :access_key_id =&gt; ENV['SECRET_ACCESS_KEY_ID'],\n      :secret_access_key =&gt; ENV['SECRET_ACCESS_KEY'],\n      :region =&gt; ENV['AWS_REGION']\n    )\n\n    test_client.stub_responses(:get_object 'NotFound')\n\n    expect do\n      S3Helper.presigned_url(\n        object_key: 'my-key',\n        client: client\n      )\n    end.to raise(/NotFound/)\n  end\nend\n</code></pre>\n\n<p>The test fails because the response does not trigger the <code>NotFound</code> error, even though I can clearly see that a <code>get_object</code> request was made (and a fake response was returned) in the application logs. </p>\n\n<p>I'm currently solving around this by passing a mock client to my service, and stubbing out the <code>object</code> and <code>presigned_url</code> methods, but I'd prefer to have the SDK do the mocking for me. What am I missing?</p>\n"}, {"tags": ["ruby", "button", "twitter", "rubygems", "watir"], "answers": [{"comments": [{"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 1, "creation_date": 1522685795, "post_id": 49613858, "comment_id": 86236060, "body": "You should use an Array if you are trying to locate an element using multiple classes."}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "reply_to_user": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1522780448, "post_id": 49613858, "comment_id": 86281486, "body": "@titusfortner okay."}], "tags": [], "owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "is_accepted": true, "score": 0, "last_activity_date": 1522682817, "last_edit_date": 1522682817, "creation_date": 1522682172, "answer_id": 49613858, "question_id": 49613759, "link": "https://stackoverflow.com/questions/49613759/how-to-locate-twitter-login-button-using-watir-and-ruby/49613858#49613858", "title": "How to locate twitter login button using Watir and Ruby?", "body": "<p>You can locate using text, write the following code,</p>\n\n<pre><code>browser.button(text: 'Log in').click\n</code></pre>\n\n<p>If you still want to use class locator then </p>\n\n<pre><code>b.button(class: 'submit EdgeButton EdgeButton--primary EdgeButtom--medium').click\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "is_accepted": false, "score": 2, "last_activity_date": 1522685716, "creation_date": 1522685716, "answer_id": 49614756, "question_id": 49613759, "link": "https://stackoverflow.com/questions/49613759/how-to-locate-twitter-login-button-using-watir-and-ruby/49614756#49614756", "title": "How to locate twitter login button using Watir and Ruby?", "body": "<p>You have the classes in an array, but do not have commas separating the Strings. The code perceives it to be an array with one long string unless you have the commas. </p>\n\n<pre><code>b.button(class: ['submit', 'EdgeButton', 'EdgeButton--primary', 'EdgeButtom--medium']).click\n</code></pre>\n"}], "owner": {"reputation": 267, "user_id": 6048848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7df4af323020ca496e6f814adbd40170?s=128&d=identicon&r=PG&f=1", "display_name": "Seio. E.", "link": "https://stackoverflow.com/users/6048848/seio-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 49613858, "answer_count": 2, "score": 0, "last_activity_date": 1522685716, "creation_date": 1522681687, "question_id": 49613759, "link": "https://stackoverflow.com/questions/49613759/how-to-locate-twitter-login-button-using-watir-and-ruby", "title": "How to locate twitter login button using Watir and Ruby?", "body": "<p>I'm trying to locate the twitter login button using a gem called Watir.</p>\n\n<p>This is the button markup:</p>\n\n<pre><code>&lt;button type=\"submit\" class=\"submit EdgeButton EdgeButton--primary EdgeButtom--medium\"&gt;Log in&lt;/button&gt;\n</code></pre>\n\n<p>This is my code:</p>\n\n<pre><code># Click Login Button\nbrowser.button(:class =&gt; ['submit' 'EdgeButton' 'EdgeButton--primary' 'EdgeButtom--medium'],:tag_name=&gt;\"button\").click\n</code></pre>\n\n<p>I receive this error:</p>\n\n<blockquote>\n  <p>Watir::Exception::UnknownObjectException: timed out after 30 seconds, > waiting for Watir::Button: located: false; > {:class=>[\"submitEdgeButtonEdgeButton--primaryEdgeButtom--medium\"], > :tag_name=>\"button\"}> to be located; Maybe look in an iframe?> > C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/watir-6.10.3/lib/watir/elements/element.rb:664:in > <code>rescue in element_call' &gt; C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/watir-6.10.3/lib/watir/elements/element.rb:680:in &gt;</code>element_call' > C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/watir-6.10.3/lib/watir/elements/element.rb:125:in > <code>click' C:/Users/bnbih/Desktop/ig_bot/auto_follow_tw.rb:34:in</code>start' > C:/Users/bnbih/Desktop/ig_bot/auto_follow_tw.rb:77:in <code>&lt;top &gt; (required)&gt;' &gt; C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/ocra-1.3.10/bin/ocra:1211:in &gt;</code>load' > C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/ocra-1.3.10/bin/ocra:1211:in > <code>&lt;top (required)&gt;' C:/Ruby24-x64/bin/ocra:23:in</code>load' > C:/Ruby24-x64/bin/ocra:23:in `'</p>\n</blockquote>\n"}, {"tags": ["ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 7206, "user_id": 1121817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc9ecd48633523063a05146bf6044c95?s=128&d=identicon&r=PG", "display_name": "Nathan", "link": "https://stackoverflow.com/users/1121817/nathan"}, "edited": false, "score": 0, "creation_date": 1522682515, "post_id": 49613665, "comment_id": 86234360, "body": "Possibly <code>@job_running</code> is <i>truthy</i> but not actually <code>true</code>.  Try changing to <code>if @job_running</code> instead of <code>@job_running == true</code>. Also, post relevant controller code where you are setting the value of <code>@job_running</code>"}, {"owner": {"reputation": 99, "user_id": 5499383, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/de6a14b5b7ca748d731bdddbd65e2b85?s=128&d=identicon&r=PG&f=1", "display_name": "Padu", "link": "https://stackoverflow.com/users/5499383/padu"}, "reply_to_user": {"reputation": 7206, "user_id": 1121817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc9ecd48633523063a05146bf6044c95?s=128&d=identicon&r=PG", "display_name": "Nathan", "link": "https://stackoverflow.com/users/1121817/nathan"}, "edited": false, "score": 0, "creation_date": 1522682863, "post_id": 49613665, "comment_id": 86234543, "body": "I only have <code>@job_running == true because</code>  because <code>if @job_running</code> is not working either. As for the where i set the boolean its just at the beginning of the file after the <code>require</code> section so i don&#39;t think its worth to post the entire controller. Its just <code>@job_running = true</code>."}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 2, "creation_date": 1522683287, "post_id": 49613665, "comment_id": 86234760, "body": "Well, it seems that the variable <code>@job_running</code> is set in the wrong place, thus in the view it has <code>nil</code> value. Set the variable within the action that renders the view."}, {"owner": {"reputation": 7206, "user_id": 1121817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc9ecd48633523063a05146bf6044c95?s=128&d=identicon&r=PG", "display_name": "Nathan", "link": "https://stackoverflow.com/users/1121817/nathan"}, "edited": false, "score": 0, "creation_date": 1522683289, "post_id": 49613665, "comment_id": 86234761, "body": "<i>Where</i> you put your assignment is important. If you&#39;re assigning to an instance variable outside of a method, you&#39;re actually setting a &quot;class instance variable&quot; instead of an instance variable. Try moving your assignment to the beginning of the <code>new</code> method, or use a <code>before_action</code> to set it."}, {"owner": {"reputation": 99, "user_id": 5499383, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/de6a14b5b7ca748d731bdddbd65e2b85?s=128&d=identicon&r=PG&f=1", "display_name": "Padu", "link": "https://stackoverflow.com/users/5499383/padu"}, "edited": false, "score": 0, "creation_date": 1522683960, "post_id": 49613665, "comment_id": 86235131, "body": "I have move it to a method I call and the submit button is still there after I refresh. I have updated my question"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1522684313, "post_id": 49613665, "comment_id": 86235332, "body": "What is this method <code>schedule</code>, where is it defined? And show the controller action for that view."}, {"owner": {"reputation": 99, "user_id": 5499383, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/de6a14b5b7ca748d731bdddbd65e2b85?s=128&d=identicon&r=PG&f=1", "display_name": "Padu", "link": "https://stackoverflow.com/users/5499383/padu"}, "edited": false, "score": 0, "creation_date": 1522684649, "post_id": 49613665, "comment_id": 86235478, "body": "I have posted my entire controller and my form is in my index.htm.erb"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 3, "creation_date": 1522685166, "post_id": 49613665, "comment_id": 86235716, "body": "@Padu: so, at the time you render this form, from action <code>index</code>, variable <code>@job_running</code> is not yet set and has default value <code>nil</code>. Which is why you always get into the else clause."}, {"owner": {"reputation": 99, "user_id": 5499383, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/de6a14b5b7ca748d731bdddbd65e2b85?s=128&d=identicon&r=PG&f=1", "display_name": "Padu", "link": "https://stackoverflow.com/users/5499383/padu"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1522685295, "post_id": 49613665, "comment_id": 86235787, "body": "What would be the best fix for this ? @SergioTulentsev"}, {"owner": {"reputation": 7206, "user_id": 1121817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc9ecd48633523063a05146bf6044c95?s=128&d=identicon&r=PG", "display_name": "Nathan", "link": "https://stackoverflow.com/users/1121817/nathan"}, "edited": false, "score": 1, "creation_date": 1522685404, "post_id": 49613665, "comment_id": 86235839, "body": "You need to set the instance variable in the action that is called when you <i>display</i> your form, not in the action that is called when you <i>submit</i> your form. It sounds like you need to set it in your <code>index</code> method."}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1522685567, "post_id": 49614696, "comment_id": 86235925, "body": "But what if the job <i>isn&#39;t</i> actually running?"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1522685762, "post_id": 49614696, "comment_id": 86236041, "body": "@SergioTulentsev Using <code>@job_running = true </code> is only for the OP to test (as stated in the question), but it should be replaced with the appropriate logic."}], "tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": true, "score": 2, "last_activity_date": 1522685436, "creation_date": 1522685436, "answer_id": 49614696, "question_id": 49613665, "link": "https://stackoverflow.com/questions/49613665/boolean-if-else-statement-not-working-in-view/49614696#49614696", "title": "Boolean if else statement not working in view", "body": "<p>You must set the <code>@job_running</code> variable inside the action that renders the view; for instance, if the action is <code>index</code>, it will look like this:</p>\n\n<pre><code>def index\n  @job_running = true \n  @savedHTML = ScrapedPage.all\nend\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 5499383, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/de6a14b5b7ca748d731bdddbd65e2b85?s=128&d=identicon&r=PG&f=1", "display_name": "Padu", "link": "https://stackoverflow.com/users/5499383/padu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 49614696, "answer_count": 1, "score": 0, "last_activity_date": 1522685608, "creation_date": 1522681285, "last_edit_date": 1522685608, "question_id": 49613665, "link": "https://stackoverflow.com/questions/49613665/boolean-if-else-statement-not-working-in-view", "title": "Boolean if else statement not working in view", "body": "<p>I want a submit button for a form to not appear in a view if a boolean is true. <code>@job_running</code> is set to true in my controller by default for testing reasons and my submit button is always visible.</p>\n\n<p>Edit: I have changed my code and now I set the boolean in a method I call but the issues still persists.</p>\n\n<p>Here is my form from my view:</p>\n\n<pre><code>  &lt;%= form_for @when, :url =&gt; {:controller =&gt; \"page_scraper\", :action =&gt; \"set_schedule\"} do |f| %&gt;\n      &lt;span&gt;Every:&lt;/span&gt;\n      &lt;%= select_tag 'hour', options_for_select(0..50) %&gt;\n      &lt;%= select_tag 'date', options_for_select([\"s\",\"m\",\"h\",\"d\",\"w\",\"mo\",\"y\"] ) %&gt;\n      &lt;% if @job_running == true %&gt;\n        &lt;%= @test%&gt;\n      &lt;% else %&gt;\n        &lt;%=f.submit \"Schedule\" %&gt;\n      &lt;% end %&gt;  \n  &lt;% end %&gt;\n  &lt;%= button_tag(id: 'delete_schedule', type: 'button') do %&gt;\n      &lt;%= content_tag(:div, 'Delete Schedule') %&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<p>Metheod where I set the variable in my controller:</p>\n\n<pre><code>class PageScraperController &lt; ApplicationController\n  require 'nokogiri'\n  require 'open-uri'\n  require 'diffy'\n  require 'htmlentities'\n  require 'uri'\n  require 'sidekiq-scheduler'\n\n  def scrape\n    @url = watched_link_params[:url].to_s\n    puts \"LOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOG #{@url}\"\n    @page = Nokogiri::HTML(open(@url))\n    coder = HTMLEntities.new\n    @encodedHTML = coder.encode(@page)\n    create(@url,@encodedHTML)\n  end\n\n  def index     \n    @savedHTML = ScrapedPage.all\n  end\n\n  def show\n    @savedHTML = ScrapedPage.find(params[:id])\n  end\n\n  def new\n    @savedHTML = ScrapedPage.new\n  end\n\n  def create(url, scraped_html)\n    saved_html = ScrapedPage.create(domain: url, html: scraped_html, css: '', javascript: '')\n\n    if saved_html.save\n      puts \"ADDED TO THE DATABASE\"\n      redirect_to(root_path)\n    else\n      puts \"FAILED TO ADD TO THE DATABASE\"\n    end\n  end\n\n  def edit\n  end\n\n  def upadate\n  end\n\n  def delete\n    @savedHTML = ScrapedPage.find(params[:id])\n  end\n\n  def destroy\n    @savedHTML = ScrapedPage.find(params[:id])\n    @savedHTML.destroy\n    redirect_to(root_path)\n  end\n\n  def compare\n    coder = HTMLEntities.new\n\n    @domain  = params[:domain].to_s\n    puts \"DOMAIN------------------------------------#{@domain}\"\n    puts \"Param1------------------------------------#{params[:version_one]}\"\n    puts \"Param2------------------------------------#{params[:version_two]}\"\n    puts \"Param3------------------------------------#{params[:change_type]}\"\n\n    version_one = ScrapedPage.select(\"html\").find_by(domain: @domain, created_at: params[:version_one]).html\n    version_two = ScrapedPage.select(\"html\").find_by(domain: @domain ,created_at: params[:version_two]).html\n\n    test1 =  Nokogiri::HTML(coder.decode(version_one))\n    test2 =  Nokogiri::HTML(coder.decode(version_two))\n\n    if params[:change_type] == \"business\"\n      compared_code = Diffy::Diff.new(test1.xpath(\"//div\"), test2.xpath(\"//div\")).to_s(:html).html_safe\n      #concatenate multiple changes here for a change type\n    elsif params[:change_type] == \"developers\"\n      @script_changes = Diffy::Diff.new(test1.xpath(\"//script\"), test2.xpath(\"//script\")).to_s(:html).html_safe \n      @meta_changes = Diffy::Diff.new(test1.xpath(\"//meta\"), test2.xpath(\"//meta\")).to_s(:html).html_safe\n      @changes = Diffy::Diff.new(test1.xpath(\"//meta\"), test2.xpath(\"//meta\")).to_s(:html).html_safe  \n    end\n  end\n\n  def watched_link_params\n    params.require(:default).permit(:url)\n  end\n\n  def compare_params\n    params.require(:domain).permit(:domain)\n  end\n\n  def set_schedule\n    puts @scrape_schedule = \"#{params[:hour]}#{params[:date]}\"\n    schedule(\"in\", @scrape_schedule, \"cunt\")\n  end\n\n  require 'rufus-scheduler'\n  @job_id = nil\n\n  @test = \"NO!\"\n  SCHEDULER = Rufus::Scheduler.new\n\n  def schedule(cmd, tim, msg)\n    @job_running = true\n    SCHEDULER.send(cmd, tim) do |job|\n      now = Time.now\n      now = \"#{now.strftime('%Y-%m-%d %H:%M:%S')}.#{sprintf('%06d', now.usec)}\"\n      puts(\"#{now} : #{msg.inspect} : (#{job.id})\")\n      @job_id = job.id\n    end \n  end\n\n  def unschedule(_, job_id, _)\n    if (@job_runing)\n      SCHEDULER.unschedule(job_id)\n      @job_id = nil\n    end\n  end\nend\n</code></pre>\n\n<p>I know the code is messy I am just trying to see if works then I will clean it up</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "stripe-payments"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 9586536, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BKjcqZgUc3k/AAAAAAAAAAI/AAAAAAAAABY/XxrawA6XggQ/photo.jpg?sz=128", "display_name": "albin persson", "link": "https://stackoverflow.com/users/9586536/albin-persson"}, "edited": false, "score": 0, "creation_date": 1522685084, "post_id": 49614033, "comment_id": 86235678, "body": "the first codeblock above is from config/initializers/stripe.rb"}], "tags": [], "owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "is_accepted": false, "score": 0, "last_activity_date": 1522682923, "creation_date": 1522682923, "answer_id": 49614033, "question_id": 49613647, "link": "https://stackoverflow.com/questions/49613647/ruby-on-rails-stripe-no-api-key-provided/49614033#49614033", "title": "Ruby on Rails - Stripe - No API key provided", "body": "<p>Why don't you just put the API key in an initializer? Better yet, store it as an environment variable and reference that. Create <code>config/initializers/stripe.rb</code> with the following content\n<code>\nStripe.api_key = ENV['STRIPE_SECRET']\nSTRIPE_PUBLIC_KEY = ENV['STRIPE_PUBLIC_KEY']\n</code></p>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 9586536, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BKjcqZgUc3k/AAAAAAAAAAI/AAAAAAAAABY/XxrawA6XggQ/photo.jpg?sz=128", "display_name": "albin persson", "link": "https://stackoverflow.com/users/9586536/albin-persson"}, "edited": false, "score": 0, "creation_date": 1522688616, "post_id": 49614836, "comment_id": 86237490, "body": "So now instead I get this: <a href=\"https://imgur.com/a/0VR21\" rel=\"nofollow noreferrer\">link</a>  Dont know if I understood you right but here is what I changed  Rails.configuration.stripe = {     :publishable_key =&gt; ENV[&#39;pk_test_RFAInQ536Y3Iy8KhryKoIThc&#39;],     :secret_key =&gt; ENV[&#39;sk_test_AKgW9WEjOcWlfBb2PAP98Gr8&#39;] } Stripe.api_key = Rails.configuration.stripe[:secret_key]"}, {"owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "reply_to_user": {"reputation": 51, "user_id": 9586536, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BKjcqZgUc3k/AAAAAAAAAAI/AAAAAAAAABY/XxrawA6XggQ/photo.jpg?sz=128", "display_name": "albin persson", "link": "https://stackoverflow.com/users/9586536/albin-persson"}, "edited": false, "score": 0, "creation_date": 1522689341, "post_id": 49614836, "comment_id": 86237868, "body": "Ohh! look if you use directly keys which you have tried then it will look like this <code>publishable_key =&gt; &#39;pk_test_RFAInQ536Y3Iy8KhryKoIThc&#39;</code> and the secret key is the same &amp; you don&#39;t need <code>ENV[]</code>, it will work but that&#39;s not secured"}, {"owner": {"reputation": 51, "user_id": 9586536, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BKjcqZgUc3k/AAAAAAAAAAI/AAAAAAAAABY/XxrawA6XggQ/photo.jpg?sz=128", "display_name": "albin persson", "link": "https://stackoverflow.com/users/9586536/albin-persson"}, "edited": false, "score": 0, "creation_date": 1522691140, "post_id": 49614836, "comment_id": 86238835, "body": "Yeah but I&#39;m still getting the same error as before"}, {"owner": {"reputation": 51, "user_id": 9586536, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BKjcqZgUc3k/AAAAAAAAAAI/AAAAAAAAABY/XxrawA6XggQ/photo.jpg?sz=128", "display_name": "albin persson", "link": "https://stackoverflow.com/users/9586536/albin-persson"}, "edited": false, "score": 0, "creation_date": 1522697840, "post_id": 49614836, "comment_id": 86242288, "body": "I mean the original problem with an error occuring when trying to retrieve <b>Stripe.api_key</b> in the <b>charges#create</b> getting the error <b>No API key provided. Set your API key using &quot;Stripe.api_key = &quot;.</b>"}, {"owner": {"reputation": 51, "user_id": 9586536, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BKjcqZgUc3k/AAAAAAAAAAI/AAAAAAAAABY/XxrawA6XggQ/photo.jpg?sz=128", "display_name": "albin persson", "link": "https://stackoverflow.com/users/9586536/albin-persson"}, "edited": false, "score": 0, "creation_date": 1522716060, "post_id": 49614836, "comment_id": 86248136, "body": "Tested the other one you suggested with Figaro and it works just like I wanted it, thanks"}], "tags": [], "owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "is_accepted": true, "score": 2, "last_activity_date": 1522686003, "creation_date": 1522686003, "answer_id": 49614836, "question_id": 49613647, "link": "https://stackoverflow.com/questions/49613647/ruby-on-rails-stripe-no-api-key-provided/49614836#49614836", "title": "Ruby on Rails - Stripe - No API key provided", "body": "<p>Try to the following in <code>stripe.rb</code></p>\n\n<pre><code>Rails.configuration.stripe = {\n    :publishable_key =&gt; ENV['stripe_publishable_key'],\n    :secret_key =&gt; ENV['stripe_api_key']\n}\nStripe.api_key = Rails.configuration.stripe[:secret_key]\n</code></pre>\n\n<p><strong>Additional Which I Have Used</strong></p>\n\n<p>Look you need to set stripe <a href=\"https://stripe.com/docs/checkout/rails#testing-the-integration\" rel=\"nofollow noreferrer\"><code>STRIPE_PUBLISHABLE_KEY</code> &amp; <code>STRIPE_SECRET_KEY</code></a> for setting these keys securely you can use <a href=\"https://github.com/laserlemon/figaro\" rel=\"nofollow noreferrer\"><code>figaro gem</code></a> after installing Figaro gem then a file will create inside <code>config</code> directory which name <code>application.yml</code> you can set your keys like this </p>\n\n<pre><code>STRIPE_PUBLISHABLE_KEY: pk_xxxxxxxxxxxxxxxxxxxx\nSTRIPE_SECRET_KEY: sk_xxxxxxxxxxxxxxxxxxxxxxx\n</code></pre>\n\n<p>Then update your <code>stripe.rb</code> inside <code>config/initializers/</code></p>\n\n<pre><code>Rails.configuration.stripe = {\n    :publishable_key =&gt; ENV['STRIPE_PUBLISHABLE_KEY'],\n    :secret_key =&gt; ENV['STRIPE_SECRET_KEY']\n}\nStripe.api_key = Rails.configuration.stripe[:secret_key]\n</code></pre>\n\n<p>That's it, you have done this.</p>\n"}], "owner": {"reputation": 51, "user_id": 9586536, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BKjcqZgUc3k/AAAAAAAAAAI/AAAAAAAAABY/XxrawA6XggQ/photo.jpg?sz=128", "display_name": "albin persson", "link": "https://stackoverflow.com/users/9586536/albin-persson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 668, "favorite_count": 1, "accepted_answer_id": 49614836, "answer_count": 2, "score": 4, "last_activity_date": 1522700358, "creation_date": 1522681214, "last_edit_date": 1522700358, "question_id": 49613647, "link": "https://stackoverflow.com/questions/49613647/ruby-on-rails-stripe-no-api-key-provided", "title": "Ruby on Rails - Stripe - No API key provided", "body": "<p>I'm trying out this Stripe quick checkout for my webshop, form appears fine but when redirected and run the <strong>charges#create</strong> I get an error saying <strong>No API key provided. Set your API key using \"Stripe.api_key = \".</strong> as far as I've learned I have set it up in the <strong>stripe.rb</strong> </p>\n\n<pre><code>  Rails.configuration.stripe = {\n    :publishable_key =&gt; Rails.application.secrets.stripe_publishable_key,\n    :secret_key      =&gt; Rails.application.secrets.stripe_secret_key\n  }\n\n  Stripe.api_key = Rails.application.secrets.stripe_secret_key\n</code></pre>\n\n<p>The error comes in <strong>charges_controller.rb</strong></p>\n\n<pre><code>class ChargesController &lt; ApplicationController\n  require 'stripe'\n\n  def index\n    render :new\n  end\n\n  def new\n  end\n\n  def create\n    # Amount in cents\n    @amount = 500\n\n    customer = Stripe::Customer.create(\n      :email =&gt; params[:stripeEmail],\n      :source  =&gt; params[:stripeToken]\n    )\n\n    charge = Stripe::Charge.create(\n      :customer    =&gt; customer.id,\n      :amount      =&gt; @amount,\n      :description =&gt; 'Rails Stripe customer',\n      :currency    =&gt; 'usd'\n    )\n\n  rescue Stripe::CardError =&gt; e\n    flash[:error] = e.message\n    redirect_to new_charge_path\n  end\n\nend\n</code></pre>\n\n<p>Here is also how I setup my <strong>secrets.yml</strong></p>\n\n<pre><code> shared:\n   stripe_api_key: sk_test_####################\n   stripe_publishable_key: pk_test_###############\n   secret_key_base: ##############################\n</code></pre>\n\n<p>Here is a gif showing what happens when I click pay in the stripe payment session: <a href=\"https://imgur.com/yBxXkuM\" rel=\"nofollow noreferrer\">imgur gif</a></p>\n"}, {"tags": ["ruby", "geocoding", "rails-geocoder", "sinatra-activerecord"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 1, "creation_date": 1522680160, "post_id": 49612976, "comment_id": 86233204, "body": "I&#39;m confused what&#39;s not working here.  Are you saying some instances of <code>Delivery</code> have nil in the database?  Do you have an example address that produced this?"}, {"owner": {"reputation": 513, "user_id": 2605956, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/38af5914d81c546657d0b7c744060e19?s=128&d=identicon&r=PG", "display_name": "froy001", "link": "https://stackoverflow.com/users/2605956/froy001"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1522682559, "post_id": 49612976, "comment_id": 86234386, "body": "@Anthony, the thing that is not working is the geocode. i.e. an instance of Delivery has an #address that returns a value which works when using Geocoder.search delivery.address. However, attributes :latitude and :longitude are both nil."}, {"owner": {"reputation": 513, "user_id": 2605956, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/38af5914d81c546657d0b7c744060e19?s=128&d=identicon&r=PG", "display_name": "froy001", "link": "https://stackoverflow.com/users/2605956/froy001"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1522682899, "post_id": 49612976, "comment_id": 86234563, "body": "As for an example, none of the addresses I tried populated lat\\lon fields."}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 1, "creation_date": 1522684997, "post_id": 49612976, "comment_id": 86235638, "body": "Can you show us in a console -&gt; <code>d = Delivery.find(some_id)</code>; <code>d.address</code>, <code>d.update(updated_at: Time.now)</code> and show us the logs and result of <code>d</code>?"}, {"owner": {"reputation": 513, "user_id": 2605956, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/38af5914d81c546657d0b7c744060e19?s=128&d=identicon&r=PG", "display_name": "froy001", "link": "https://stackoverflow.com/users/2605956/froy001"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1522686575, "post_id": 49612976, "comment_id": 86236421, "body": "d = Delivery.find(42) =&gt;  #&lt;Delivery id: 42, fulfillment_service_id: &quot;8&quot;, shop_id: &quot;9&quot;, order_id: &quot;461102186599&quot;, created_at: &quot;2018-04-02 13:02:35&quot;, updated_at: &quot;2018-04-02 13:02:58&quot;, request_params: &quot;{\\&quot;id\\&quot;:426686742631,\\&quot;order_id\\&quot;:461102186599,\\&quot;status...&quot;&zwnj;&#8203;, latitude: nil, longitude: nil, address1: &quot;23 haneviem st&quot;, province: nil, country: &quot;Israel&quot;, city: &quot;Jerusalem&quot;&gt;"}, {"owner": {"reputation": 513, "user_id": 2605956, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/38af5914d81c546657d0b7c744060e19?s=128&d=identicon&r=PG", "display_name": "froy001", "link": "https://stackoverflow.com/users/2605956/froy001"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1522686603, "post_id": 49612976, "comment_id": 86236431, "body": "d.address  =&gt; &quot;23 haneviem st,Jerusalem,,Israel&quot;"}, {"owner": {"reputation": 513, "user_id": 2605956, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/38af5914d81c546657d0b7c744060e19?s=128&d=identicon&r=PG", "display_name": "froy001", "link": "https://stackoverflow.com/users/2605956/froy001"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1522686673, "post_id": 49612976, "comment_id": 86236474, "body": "after update =&gt;  d  =&gt; #&lt;Delivery id: 42, fulfillment_service_id: &quot;8&quot;, shop_id: &quot;9&quot;, order_id: &quot;461102186599&quot;, created_at: &quot;2018-04-02 13:02:35&quot;, updated_at: &quot;2018-04-02 16:30:37&quot;, request_params: &quot;{\\&quot;id\\&quot;:426686742631,\\&quot;order_id\\&quot;:461102186599,\\&quot;status...&quot;&zwnj;&#8203;, latitude: nil, longitude: nil, address1: &quot;23 haneviem st&quot;, province: nil, country: &quot;Israel&quot;, city: &quot;Jerusalem&quot;&gt;"}, {"owner": {"reputation": 5415, "user_id": 2292448, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02a28db6886d578f75a820b50f2dd334?s=128&d=identicon&r=PG", "display_name": "Lazarus Lazaridis", "link": "https://stackoverflow.com/users/2292448/lazarus-lazaridis"}, "edited": false, "score": 1, "creation_date": 1522686761, "post_id": 49612976, "comment_id": 86236516, "body": "From what I see, the geocode will execute after validation. In the previous comment, after loading the <code>Delivery</code> can you please execute <code>d.valid?</code> and then inspect the object to see if the fields are populated? Is there any case that you have saved the <code>Delivery</code> objects before adding the <code>geocode</code> functionality?"}, {"owner": {"reputation": 513, "user_id": 2605956, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/38af5914d81c546657d0b7c744060e19?s=128&d=identicon&r=PG", "display_name": "froy001", "link": "https://stackoverflow.com/users/2605956/froy001"}, "reply_to_user": {"reputation": 5415, "user_id": 2292448, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02a28db6886d578f75a820b50f2dd334?s=128&d=identicon&r=PG", "display_name": "Lazarus Lazaridis", "link": "https://stackoverflow.com/users/2292448/lazarus-lazaridis"}, "edited": false, "score": 0, "creation_date": 1522687845, "post_id": 49612976, "comment_id": 86237075, "body": "@LazarusLazaridis d.valid? =&gt; true.  And inspecting d. still has lat\\lon nil. While having Delivery objects saved before adding geocoder, I tried  12 different addresses after. The example above is one of the 12."}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 1, "creation_date": 1522691908, "post_id": 49612976, "comment_id": 86239278, "body": "Something else is going on with your code - I&#39;m able to get it to work with what you provided: <code>#&lt;Delivery:0x0000000349f8d8 latitude: 31.7839134, longitude: 35.2235753, address1: &quot;23 haneviem st&quot;, province: nil, country: &quot;Israel&quot;, city: &quot;Jerusalem&quot;&gt;</code>"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1522692246, "post_id": 49612976, "comment_id": 86239469, "body": "Here&#39;s the code: <a href=\"https://gist.github.com/allcentury/2b557701a2b3625534a9e44118e90f9b\" rel=\"nofollow noreferrer\">gist.github.com/allcentury/2b557701a2b3625534a9e44118e90f9b</a>"}, {"owner": {"reputation": 513, "user_id": 2605956, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/38af5914d81c546657d0b7c744060e19?s=128&d=identicon&r=PG", "display_name": "froy001", "link": "https://stackoverflow.com/users/2605956/froy001"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1522696030, "post_id": 49612976, "comment_id": 86241370, "body": "@Anthony thanks. I will look into it tomorrow. Could it be an issue with using first_or_create! to create an instance? Or not passing any value to lat\\lon fields on creation( I saw you were passing nil explicitly when initializing a Delivery instance)."}], "owner": {"reputation": 513, "user_id": 2605956, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/38af5914d81c546657d0b7c744060e19?s=128&d=identicon&r=PG", "display_name": "froy001", "link": "https://stackoverflow.com/users/2605956/froy001"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 331, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1522678599, "creation_date": 1522678599, "question_id": 49612976, "link": "https://stackoverflow.com/questions/49612976/geocoder-doesnt-get-lat-lon-on-model", "title": "Geocoder doesn&#39;t get lat lon on model", "body": "<p>I am using the Sinatra ruby framework.I have a delivery model(see below). I am using the geocoder gem with ActiveRecord.</p>\n\n<p>I have the fields <strong>latitude</strong> and <strong>longitude</strong> in my schema. </p>\n\n<p>When I use the console to get the Geocode:</p>\n\n<pre><code>Geocoder.search delivery.address\n</code></pre>\n\n<p>I get the response from the google API. </p>\n\n<p>But it doesn't populate the lat\\lon fields. I can't imagine why.</p>\n\n<p>I am using an API key in app.rb like so:</p>\n\n<pre><code>  Geocoder.configure(\n    api_key: ENV['GEOCODER_API_KEY']\n  )\n</code></pre>\n\n<p>And I know the key works since I am getting responses for relatively high number of API calls per second.(Without the api key it's a call every 10 sec or so, or it returns an quota error)</p>\n\n<p>This seems like a simple issue, but I can't figure it out. Would appreciate the help.</p>\n\n<p><strong>Delivery.rb</strong></p>\n\n<pre><code>require 'sinatra/shopify-sinatra-app'\nrequire 'geocoder'\n# This is the delivery model. It holds all of the data\n# associated with the delivery such as the orrder and  shop it belongs to .\n\nclass Delivery &lt; ActiveRecord::Base\n  extend Geocoder::Model::ActiveRecord\n  has_many :delivery_states, dependent: :destroy\n  belongs_to :shop\n  belongs_to :fulfillment_service\n  validates :order_id, uniqueness: true, presence: true\n  has_one :courier, through: :fulfillment_service\n  #after_create :add_delivery_state\n  attr_accessor :latitude, :longitude\n  #geocoder setup\n  geocoded_by :address\n  after_validation :geocode#, :if =&gt; lambda{ |obj| obj.address1_changed? || obj.city_changed? || obj.province_changed? || obj.country_changed? }\n\n  def address\n    #check address1 is not a variation of POB\n    addr = address1 unless address1.match(/(?:P(?:ost(?:al)?)?[\\.\\-\\s]*(?:(?:O(?:ffice)?[\\.\\-\\s]*)?B(?:ox|in|\\b|\\d)|o(?:ffice|\\b)(?:[-\\s]*\\d)|code)|box[-\\s\\b]*\\d)/i)\n    [addr, city, province, country].join(',')\n  end\n\n  def add_delivery_state(status=0,ref_number=nil)\n    if self.delivery_states.count&gt;0\n      ref_number = self.delivery_states.last.courier_reference unless ref_number\n    else\n      ref_number = 0 unless ref_number\n    end\n    self.delivery_states&lt;&lt;DeliveryState.new(delivery_status:status,courier_reference:ref_number)\n  end\n  def delivery_state\n    self.delivery_states.last.delivery_status\n  end\n  def courier_reference\n  self.delivery_states.count&gt;0 ? self.delivery_states.last.courier_reference : \"0\"\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-s3", "google-cloud-platform", "google-cloud-storage"], "comments": [{"owner": {"reputation": 1679, "user_id": 1180092, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2b9eecfea2466228e3e3f51d86d1d2a3?s=128&d=identicon&r=PG", "display_name": "Raoot", "link": "https://stackoverflow.com/users/1180092/raoot"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1522678903, "post_id": 49612703, "comment_id": 86232547, "body": "Ah, sorry should have been clearer, I mean more memory efficient. If I have a 3GB file and limited available memory for example."}, {"owner": {"reputation": 4782, "user_id": 360594, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/aaa610ec09347c6d499412352a7c0bac?s=128&d=identicon&r=PG", "display_name": "Cemo", "link": "https://stackoverflow.com/users/360594/cemo"}, "edited": false, "score": 0, "creation_date": 1615153313, "post_id": 49612703, "comment_id": 117597241, "body": "How did you manage to solve this problem?"}, {"owner": {"reputation": 1679, "user_id": 1180092, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2b9eecfea2466228e3e3f51d86d1d2a3?s=128&d=identicon&r=PG", "display_name": "Raoot", "link": "https://stackoverflow.com/users/1180092/raoot"}, "reply_to_user": {"reputation": 4782, "user_id": 360594, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/aaa610ec09347c6d499412352a7c0bac?s=128&d=identicon&r=PG", "display_name": "Cemo", "link": "https://stackoverflow.com/users/360594/cemo"}, "edited": false, "score": 1, "creation_date": 1615195223, "post_id": 49612703, "comment_id": 117606425, "body": "Hi @Cemo, I can&#39;t 100% remember, but I think I may have used / written a Google Cloud Function (GCF) to pull the files from S3, rather than them going via an intermediary Ruby app. Since writing this question, i&#39;ve been using Python and GCFs to solve the majority of problems in my work; moving files and data around."}], "answers": [{"comments": [{"owner": {"reputation": 1679, "user_id": 1180092, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2b9eecfea2466228e3e3f51d86d1d2a3?s=128&d=identicon&r=PG", "display_name": "Raoot", "link": "https://stackoverflow.com/users/1180092/raoot"}, "edited": false, "score": 0, "creation_date": 1522678948, "post_id": 49612972, "comment_id": 86232570, "body": "direct transfer is what I am essentially after"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1522680005, "post_id": 49612972, "comment_id": 86233137, "body": "The Rest API documentation asks for the S3 keys so I assume the bucket can be private and it will still work."}, {"owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1522682751, "post_id": 49612972, "comment_id": 86234481, "body": "@Anthony when providing the keys with the request already, this enables the API to authenticate server-side; not an issue then (useless comment removed)."}], "tags": [], "owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "is_accepted": false, "score": 3, "last_activity_date": 1522683881, "last_edit_date": 1522683881, "creation_date": 1522678580, "answer_id": 49612972, "question_id": 49612703, "link": "https://stackoverflow.com/questions/49612703/memory-efficient-transfer-of-large-file-from-s3-to-google-cloud-storage/49612972#49612972", "title": "Memory efficient transfer of large file from S3 to Google Cloud Storage", "body": "<p>you can either use <code>gsutil</code> (which supports <a href=\"https://cloud.google.com/storage/docs/gsutil/commands/rsync\" rel=\"nofollow noreferrer\">rsync</a>) <strong>or</strong> create the transfers on the <a href=\"https://cloud.google.com/storage/transfer/create-manage-transfer-program\" rel=\"nofollow noreferrer\">REST API</a> (in case you insist on using Ruby and efficient in the same sentence). downloading and re-uploading might take ages, direct transfer is what I'd rather consider as efficient.</p>\n\n<p>guess the equivalent in Ruby is the <a href=\"http://www.rubydoc.info/gems/google-api-client/0.8.2/Google/APIClient/Request\" rel=\"nofollow noreferrer\">APIClient/Request</a> - in order to create the requests, which are otherwise not explicitly supported by that Ruby API client.</p>\n\n<p>while <code>gsutil rsync</code> can mirror whole buckets. always double and triple check it's parameters and their order, because when mirroring an empty directory/bucket, this can lead to sudden blackouts. would suggest to try with two merely empty buckets, at first - and then replace source &amp; destination.</p>\n\n<pre><code>gsutil rsync -d -r s3://my-s3-bucket gs://my-gs-bucket\n</code></pre>\n"}], "owner": {"reputation": 1679, "user_id": 1180092, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2b9eecfea2466228e3e3f51d86d1d2a3?s=128&d=identicon&r=PG", "display_name": "Raoot", "link": "https://stackoverflow.com/users/1180092/raoot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1522683881, "creation_date": 1522677502, "last_edit_date": 1522678992, "question_id": 49612703, "link": "https://stackoverflow.com/questions/49612703/memory-efficient-transfer-of-large-file-from-s3-to-google-cloud-storage", "title": "Memory efficient transfer of large file from S3 to Google Cloud Storage", "body": "<p>I have some working code below to transfer a file from S3 to Google Cloud Storage (GCS). From my understanding, this downloads the file into memory before uploading to GCS. I would like to find a more efficient way of doing this (in code). I realise Google has a transfer service and there are CLI options, but those aren't suitable for what I am doing.</p>\n\n<p>Inside my app, the code below resides in small methods, but I've posted it in long procedural form to make it simpler to see the steps on here in one go.</p>\n\n<pre><code># AWS S3: Connect and get object\ns3 = Aws::S3::Client.new(region: 'us-east-1', access_key_id: 'my_access_key', secret_access_key: 'my_secret')\nresponse = s3.get_object(bucket:'my_s3_bucket', key:'my_object_key')\n\n# Google Cloud Storage: Connect, Authorize and upload S3 object\nclient = Google::APIClient.new( :application_name =&gt; APP_NAME, :application_version =&gt; APP_VERSION )\nkey = Google::APIClient::KeyUtils.load_from_pkcs12(P12_KEY, 'notasecret')\n\nclient.authorization = Signet::OAuth2::Client.new(\n  :token_credential_uri =&gt; 'token_credential_uri',\n  :audience =&gt; 'audience',\n  :scope =&gt; 'scope',\n  :issuer =&gt; 'issuer',\n  :signing_key =&gt; key)\nclient.authorization.fetch_access_token!\n\nstorage = client.discovered_api('storage', 'v1')\n\nmedia = Google::APIClient::UploadIO.new(response['response'], 'text/csv', 'my_filename.txt')\n\nresumable_result = client.execute(\n  api_method: storage.objects.insert,\n  media: media,\n  parameters: {\n    uploadType: 'resumable',\n    bucket: 'my_gcs_bucket',\n    name: filename.to_s\n  },\n  body_object: {contentType: 'text/csv'},\n  connection: conn\n)\n</code></pre>\n\n<p>I have seen ways to stream the object directly to a file on disk which avoids loading the entire object into memory, but how would I go about doing the same with GCS as the final target?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1522677675, "post_id": 49612685, "comment_id": 86231969, "body": "show the stacktrace. And value of <code>url</code> and <code>uri.query</code>. Also, that exception handler is weird. Not sure what you were hoping to accomplish with that."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1522678388, "post_id": 49612685, "comment_id": 86232290, "body": "hm, the first line of the stacktrace is not in CGI.parse or deeper? Interesting. Anyhow, the problems seems to be with bad data in <code>@region.youtube_url</code>. What values does it have?"}, {"owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "edited": false, "score": 0, "creation_date": 1522680571, "post_id": 49612685, "comment_id": 86233416, "body": "This isn&#39;t really a Ruby question. It&#39;s a question of figuring out what you want to happen when the URL is missing."}], "answers": [{"comments": [{"owner": {"reputation": 1050, "user_id": 8671889, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8eb4eb4560635c6319ccb29a8d7f5be4?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/8671889/jake"}, "edited": false, "score": 0, "creation_date": 1522678258, "post_id": 49612831, "comment_id": 86232212, "body": "Same response actually."}, {"owner": {"reputation": 1050, "user_id": 8671889, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8eb4eb4560635c6319ccb29a8d7f5be4?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/8671889/jake"}, "edited": false, "score": 1, "creation_date": 1522678378, "post_id": 49612831, "comment_id": 86232284, "body": "Was literally about to try something like that."}, {"owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "edited": false, "score": 0, "creation_date": 1522680491, "post_id": 49612831, "comment_id": 86233381, "body": "Since OP clearly doesn&#39;t know how to handle <code>nil</code>, returning <code>nil</code> from here is just going to push the problem further away from the root cause."}], "tags": [], "owner": {"reputation": 5415, "user_id": 2292448, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02a28db6886d578f75a820b50f2dd334?s=128&d=identicon&r=PG", "display_name": "Lazarus Lazaridis", "link": "https://stackoverflow.com/users/2292448/lazarus-lazaridis"}, "is_accepted": true, "score": 1, "last_activity_date": 1522678263, "last_edit_date": 1522678263, "creation_date": 1522678019, "answer_id": 49612831, "question_id": 49612685, "link": "https://stackoverflow.com/questions/49612685/undefined-method-split-for-nilnilclass-within-rails/49612831#49612831", "title": "undefined method `split&#39; for nil:NilClass within Rails", "body": "<p>The problem is here:</p>\n\n<pre><code>CGI.parse(uri.query)\n</code></pre>\n\n<p>The <code>uri.query</code> is <code>nil</code> and the <code>parse</code> method tries to split it.</p>\n\n<p>If you want to return <code>nil</code> when the value is not present, replace the line with:</p>\n\n<pre><code>CGI.parse(uri.query).try(:[], 'v') if uri.query\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1050, "user_id": 8671889, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8eb4eb4560635c6319ccb29a8d7f5be4?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/8671889/jake"}, "is_accepted": false, "score": 0, "last_activity_date": 1522678527, "creation_date": 1522678527, "answer_id": 49612956, "question_id": 49612685, "link": "https://stackoverflow.com/questions/49612685/undefined-method-split-for-nilnilclass-within-rails/49612956#49612956", "title": "undefined method `split&#39; for nil:NilClass within Rails", "body": "<p>Full code updated with answer. </p>\n\n<pre><code>module VideosHelper\n def youtube_embed(url, **kwargs)\n   uri = URI('//www.youtube.com/embed/')\n   uri.path += find_youtube_id(url).join(\"','\") if uri.query\n   options = {\n     src: uri.to_s,\n     width: '100%',\n     height: '350px',\n     frameborder: 0,\n     allowfullscreen: true\n   }\n   content_tag(:iframe, nil, options.merge(kwargs), false)\n end\n\n def find_youtube_id(url)\n   uri = URI(url)\n   CGI.parse(uri.query).try(:[], 'v') if uri.query\n rescue URI::InvalidURIError\n   nil\n end\nend\n</code></pre>\n\n<p>When applying if uri.query to the end of CGI.parse it resolves the split issue but presented an issue on uri.path so duplicated the answer. </p>\n"}], "owner": {"reputation": 1050, "user_id": 8671889, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8eb4eb4560635c6319ccb29a8d7f5be4?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/8671889/jake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 997, "favorite_count": 0, "accepted_answer_id": 49612831, "answer_count": 2, "score": 0, "last_activity_date": 1522678527, "creation_date": 1522677450, "last_edit_date": 1522678046, "question_id": 49612685, "link": "https://stackoverflow.com/questions/49612685/undefined-method-split-for-nilnilclass-within-rails", "title": "undefined method `split&#39; for nil:NilClass within Rails", "body": "<p>I keep getting the error message <code>undefined method 'split' for nil:NilClass</code> whenever this section of code is being run and the value is not present:</p>\n\n<pre><code>module VideosHelper\n def youtube_embed(url, **kwargs)\n  uri = URI('//www.youtube.com/embed/')\n  uri.path += find_youtube_id(url).join(\"','\")\n  options = {\n    src: uri.to_s,\n    width: '100%',\n    height: '350px',\n    frameborder: 0,\n    allowfullscreen: true\n  }\n  content_tag(:iframe, nil, options.merge(kwargs), false)\nend\n\ndef find_youtube_id(url)\n  uri = URI(url)\n  CGI.parse(uri.query).try(:[], 'v')\nrescue URI::InvalidURIError\n  nil\nend\nend\n</code></pre>\n\n<p>It's specifically the line with parse. I thought .try would resolve it. I've even used .fetch instead of .try and the same issue persists.</p>\n\n<p>EDIT: Included in this the full code for the helper file. Originally in the find_youtube_id method I actually had only nil after rescue and was messing with it. </p>\n\n<p>Here is what's present in my terminal</p>\n\n<pre><code>.container.video-section\n .row.video-group\n  .col-md-8\n    - unless @region.youtube_url.nil?\n     = youtube_embed(@region.youtube_url)\n  .col-md-3.offset-md-1.sales-group.text-center\n    .manager-single\n      = image_tag @region.staff_photo.url, class: 'img-fluid'\napp/helpers/videos_helper.rb:17:in `find_youtube_id'\napp/helpers/videos_helper.rb:4:in `youtube_embed'\napp/views/regions/show.html.slim:74:in `block in _ \napp_views_regions_show_html_slim__295776519867909611_70169935841560'\napp/views/regions/show.html.slim:5:in `_ \napp_views_regions_show_html_slim__295776519867909611_70169935841560'\napp/controllers/regions_controller.rb:14:in `show'\n</code></pre>\n"}]