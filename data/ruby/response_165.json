[{"tags": ["ruby-on-rails", "ruby", "twitter-bootstrap", "simple-form"], "comments": [{"owner": {"reputation": 504, "user_id": 7024293, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh3.googleusercontent.com/-_iHS8SMGqHA/AAAAAAAAAAI/AAAAAAAAAbE/HudebqQ1IF4/photo.jpg?sz=128", "display_name": "stevensonmt", "link": "https://stackoverflow.com/users/7024293/stevensonmt"}, "edited": false, "score": 0, "creation_date": 1520466327, "post_id": 49163083, "comment_id": 85331886, "body": "what is your model like and how are you handling the submitted values now?"}, {"owner": {"reputation": 504, "user_id": 7024293, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh3.googleusercontent.com/-_iHS8SMGqHA/AAAAAAAAAAI/AAAAAAAAAbE/HudebqQ1IF4/photo.jpg?sz=128", "display_name": "stevensonmt", "link": "https://stackoverflow.com/users/7024293/stevensonmt"}, "edited": false, "score": 0, "creation_date": 1520466677, "post_id": 49163083, "comment_id": 85331970, "body": "Also take a look at this (possible duplicate) question: <a href=\"https://stackoverflow.com/questions/11871827/adding-a-default-value-to-text-input-in-simple-form\" title=\"adding a default value to text input in simple form\">stackoverflow.com/questions/11871827/&hellip;</a> And this blog post: <a href=\"https://www.flipflops.org/2013/02/12/default-form-values-in-rails/\" rel=\"nofollow noreferrer\">flipflops.org/2013/02/12/default-form-values-in-rails</a>"}, {"owner": {"reputation": 1, "user_id": 9459454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CCQTz.jpg?s=128&g=1", "display_name": "Jesse Johnson", "link": "https://stackoverflow.com/users/9459454/jesse-johnson"}, "reply_to_user": {"reputation": 504, "user_id": 7024293, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh3.googleusercontent.com/-_iHS8SMGqHA/AAAAAAAAAAI/AAAAAAAAAbE/HudebqQ1IF4/photo.jpg?sz=128", "display_name": "stevensonmt", "link": "https://stackoverflow.com/users/7024293/stevensonmt"}, "edited": false, "score": 0, "creation_date": 1520466727, "post_id": 49163083, "comment_id": 85331983, "body": "Yea, I was able to get that link content working, but it creates a default value before submitting, not after.    Currently &#39;&lt;%= f.input :survey_year %&gt;&#39; is the field format. I then call these in a table grid to be displayed.  I need the &quot;N/A&quot; value so when they&#39;re called, they don&#39;t just appear blank."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9459454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CCQTz.jpg?s=128&g=1", "display_name": "Jesse Johnson", "link": "https://stackoverflow.com/users/9459454/jesse-johnson"}, "edited": false, "score": 0, "creation_date": 1520467625, "post_id": 49163238, "comment_id": 85332252, "body": "Unfortunately that pre-populates the field with &quot;N/A&quot;, doesn&#39;t it change it to &quot;N/A&quot; after its submitted, like I need.  That will definitely come in handy for some other situations though, so I appreciate the response!"}, {"owner": {"reputation": 504, "user_id": 7024293, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh3.googleusercontent.com/-_iHS8SMGqHA/AAAAAAAAAAI/AAAAAAAAAbE/HudebqQ1IF4/photo.jpg?sz=128", "display_name": "stevensonmt", "link": "https://stackoverflow.com/users/7024293/stevensonmt"}, "reply_to_user": {"reputation": 1, "user_id": 9459454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CCQTz.jpg?s=128&g=1", "display_name": "Jesse Johnson", "link": "https://stackoverflow.com/users/9459454/jesse-johnson"}, "edited": false, "score": 0, "creation_date": 1520467880, "post_id": 49163238, "comment_id": 85332314, "body": "What does your model look like?  You should be able to set a default value in the model that has nothing to do with the view but that gets overwritten on submit of the form.  You could also deal with this on the view of the table grid (a very confusing phrase as tables and grids are distinct concepts in layout) by something like &lt;%= if myField.nil? then &quot;N/A&quot; else myField %&gt;."}, {"owner": {"reputation": 1, "user_id": 9459454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CCQTz.jpg?s=128&g=1", "display_name": "Jesse Johnson", "link": "https://stackoverflow.com/users/9459454/jesse-johnson"}, "edited": false, "score": 0, "creation_date": 1520468291, "post_id": 49163238, "comment_id": 85332410, "body": "Right, currently the fields look like this: &lt;%= @ship.hull.try(:name) || &quot;N/A&quot; %&gt;, and do exactly what you&#39;re describing, but I was advised to try and set a default value on submission, rather than when they&#39;re called.  Any advice on how to set a default value in the model?  That sounds like my best case solution.  Thanks!"}, {"owner": {"reputation": 504, "user_id": 7024293, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh3.googleusercontent.com/-_iHS8SMGqHA/AAAAAAAAAAI/AAAAAAAAAbE/HudebqQ1IF4/photo.jpg?sz=128", "display_name": "stevensonmt", "link": "https://stackoverflow.com/users/7024293/stevensonmt"}, "reply_to_user": {"reputation": 1, "user_id": 9459454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CCQTz.jpg?s=128&g=1", "display_name": "Jesse Johnson", "link": "https://stackoverflow.com/users/9459454/jesse-johnson"}, "edited": false, "score": 0, "creation_date": 1520468448, "post_id": 49163238, "comment_id": 85332450, "body": "See the first method described in the flipflops link: <a href=\"https://www.flipflops.org/2013/02/12/default-form-values-in-rails/\" rel=\"nofollow noreferrer\">flipflops.org/2013/02/12/default-form-values-in-rails</a>"}], "tags": [], "owner": {"reputation": 504, "user_id": 7024293, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh3.googleusercontent.com/-_iHS8SMGqHA/AAAAAAAAAAI/AAAAAAAAAbE/HudebqQ1IF4/photo.jpg?sz=128", "display_name": "stevensonmt", "link": "https://stackoverflow.com/users/7024293/stevensonmt"}, "is_accepted": false, "score": 1, "last_activity_date": 1520467042, "creation_date": 1520467042, "answer_id": 49163238, "question_id": 49163083, "link": "https://stackoverflow.com/questions/49163083/rails-simple-form-default-value-if-submitted-nil/49163238#49163238", "title": "Rails Simple Form Default Value if Submitted Nil", "body": "<pre><code>&lt;%= f.input :survey_year, :input_html =&gt; { :value =&gt; 'N/A'} %&gt;\n</code></pre>\n\n<p>Should do the trick.  See the flipflops.org link in my comment above for alternative approaches.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 9459454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CCQTz.jpg?s=128&g=1", "display_name": "Jesse Johnson", "link": "https://stackoverflow.com/users/9459454/jesse-johnson"}, "edited": false, "score": 0, "creation_date": 1520515378, "post_id": 49166360, "comment_id": 85353204, "body": "Thanks! Where would I put this? If it isn&#39;t obvious already, I&#39;m still getting my head around rails."}, {"owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "reply_to_user": {"reputation": 1, "user_id": 9459454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CCQTz.jpg?s=128&g=1", "display_name": "Jesse Johnson", "link": "https://stackoverflow.com/users/9459454/jesse-johnson"}, "edited": false, "score": 0, "creation_date": 1520515533, "post_id": 49166360, "comment_id": 85353310, "body": "To your model which you used for <code>name</code> purpose"}, {"owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "reply_to_user": {"reputation": 1, "user_id": 9459454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CCQTz.jpg?s=128&g=1", "display_name": "Jesse Johnson", "link": "https://stackoverflow.com/users/9459454/jesse-johnson"}, "edited": false, "score": 0, "creation_date": 1520521429, "post_id": 49166360, "comment_id": 85357621, "body": "If your model is <code>User </code> then use this inside <code>User </code> class"}], "tags": [], "owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "is_accepted": false, "score": 0, "last_activity_date": 1520488579, "creation_date": 1520488579, "answer_id": 49166360, "question_id": 49163083, "link": "https://stackoverflow.com/questions/49163083/rails-simple-form-default-value-if-submitted-nil/49166360#49166360", "title": "Rails Simple Form Default Value if Submitted Nil", "body": "<p>Try to the following</p>\n\n<pre><code>before_save :default_values\n\ndef default_values\n    self.name ||= 'N/A' #=&gt; note self.name = 'N/A' if self.name.nil?\nend\n</code></pre>\n\n<p>When a user submits a form with <code>blank/nil</code> name then it will submit to <code>\"N/A\"</code> otherwise none</p>\n"}], "owner": {"reputation": 1, "user_id": 9459454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CCQTz.jpg?s=128&g=1", "display_name": "Jesse Johnson", "link": "https://stackoverflow.com/users/9459454/jesse-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1111, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1520488579, "creation_date": 1520466088, "question_id": 49163083, "link": "https://stackoverflow.com/questions/49163083/rails-simple-form-default-value-if-submitted-nil", "title": "Rails Simple Form Default Value if Submitted Nil", "body": "<p>I need to overwrite any blank field submissions in my simple form with the text value \"N/A\".  I've found how to set a default value beforehand, but I would like the field left blank for users to fill out and submit, and only changed if they leave it blank.  Is this possible?  Thanks!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 2, "creation_date": 1520482332, "post_id": 49162975, "comment_id": 85335848, "body": "An input is always a string. The result of <code>to_i</code> is always an integer."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1520534103, "post_id": 49162975, "comment_id": 85365802, "body": "You convert to an integer, then ask whether it is an integer. What result did you expect? Of course, it is an integer, you just converted it!"}], "answers": [{"tags": [], "owner": {"reputation": 7975, "user_id": 5660517, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1iIxK.jpg?s=128&g=1", "display_name": "Ronan Boiteau", "link": "https://stackoverflow.com/users/5660517/ronan-boiteau"}, "is_accepted": true, "score": 6, "last_activity_date": 1566334644, "last_edit_date": 1566334644, "creation_date": 1520465566, "answer_id": 49163014, "question_id": 49162975, "link": "https://stackoverflow.com/questions/49162975/checking-if-number-is-an-integer-in-ruby-using-gets-chomp-to-i/49163014#49163014", "title": "Checking if number is an integer in ruby using gets.chomp.to_i", "body": "<h2>Your problem</h2>\n\n<p>Since you're using <code>.to_i</code> to convert your input to an integer, <code>x.is_a?(Integer)</code> is always <code>true</code>, even when you have a string that does not contain any digit. See <a href=\"https://stackoverflow.com/a/10093533/5660517\">this answer</a> for more information about <code>.to_i</code>'s behavior.</p>\n\n<h2>Solution</h2>\n\n<p><strong>Convert your input with <code>Integer()</code> instead of <code>.to_i</code>.</strong></p>\n\n<p><code>Integer()</code> throws an exception when it cannot convert your input to an integer, so you can do the following:</p>\n\n<pre><code>input = gets.chomp\nx = Integer(input) rescue false\nif x\n    puts \"It's an integer\"\nelse\n    puts \"It's a string\"\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 193, "user_id": 5405582, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a648bfb0ead56e99080fa674d2879e4f?s=128&d=identicon&r=PG&f=1", "display_name": "Punya", "link": "https://stackoverflow.com/users/5405582/punya"}, "edited": false, "score": 0, "creation_date": 1520466112, "post_id": 49163059, "comment_id": 85331816, "body": "can you pls explain me how does this === things work basically this code work thanks"}, {"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "reply_to_user": {"reputation": 193, "user_id": 5405582, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a648bfb0ead56e99080fa674d2879e4f?s=128&d=identicon&r=PG&f=1", "display_name": "Punya", "link": "https://stackoverflow.com/users/5405582/punya"}, "edited": false, "score": 0, "creation_date": 1520466677, "post_id": 49163059, "comment_id": 85331971, "body": "In this case it just means it makes sure the class of <code>x</code> is the same as class of <code>x.to_i</code> so if x is string, <code>to_i</code> changes it to integer and it doesn&#39;t match but a <code>to_i</code> on integer still results in integer so it passes"}], "tags": [], "owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "is_accepted": false, "score": 0, "last_activity_date": 1520466319, "last_edit_date": 1520466319, "creation_date": 1520465912, "answer_id": 49163059, "question_id": 49162975, "link": "https://stackoverflow.com/questions/49162975/checking-if-number-is-an-integer-in-ruby-using-gets-chomp-to-i/49163059#49163059", "title": "Checking if number is an integer in ruby using gets.chomp.to_i", "body": "<p>Another approach could be:</p>\n\n<pre><code>x = gets.chomp\nx === x.to_i ? \"It's an integer\" : \"It'a a string\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 2, "last_activity_date": 1520493107, "last_edit_date": 1520493107, "creation_date": 1520467965, "answer_id": 49163366, "question_id": 49162975, "link": "https://stackoverflow.com/questions/49162975/checking-if-number-is-an-integer-in-ruby-using-gets-chomp-to-i/49163366#49163366", "title": "Checking if number is an integer in ruby using gets.chomp.to_i", "body": "<p>You can use a regex:</p>\n\n<pre><code>boolean = gets.match?(/\\A\\d+\\n\\z/)\n</code></pre>\n"}], "owner": {"reputation": 193, "user_id": 5405582, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a648bfb0ead56e99080fa674d2879e4f?s=128&d=identicon&r=PG&f=1", "display_name": "Punya", "link": "https://stackoverflow.com/users/5405582/punya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1523, "favorite_count": 0, "accepted_answer_id": 49163014, "answer_count": 3, "score": 0, "last_activity_date": 1566334644, "creation_date": 1520465263, "last_edit_date": 1520482307, "question_id": 49162975, "link": "https://stackoverflow.com/questions/49162975/checking-if-number-is-an-integer-in-ruby-using-gets-chomp-to-i", "title": "Checking if number is an integer in ruby using gets.chomp.to_i", "body": "<p>I am planning to check if a given input is an integer. <code>gets.chomp</code> gets input as a string, and I convert it into an integer using <code>to_i</code>. If I input <code>abcd</code> and check using <code>class</code> or <code>is_a(Integer)</code>, it always says it's an integer.</p>\n\n<pre><code>x = gets.chomp.to_i\nif x.is_a?(Integer)\n    puts \"It's an integer\"\nelse\n    puts \"It's a string\"\nend\n</code></pre>\n\n<p>How can I check whether the input is an integer or a string?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "controller"], "comments": [{"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1520461163, "post_id": 49162113, "comment_id": 85329990, "body": "can you post your respective views, it seems like you only have the code to show the alert in one page"}], "answers": [{"tags": [], "owner": {"reputation": 2072, "user_id": 3389795, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiAJt.jpg?s=128&g=1", "display_name": "Shiko", "link": "https://stackoverflow.com/users/3389795/shiko"}, "is_accepted": false, "score": 0, "last_activity_date": 1520461197, "creation_date": 1520461197, "answer_id": 49162149, "question_id": 49162113, "link": "https://stackoverflow.com/questions/49162113/close-button-in-respond-to-in-rails/49162149#49162149", "title": "Close button in respond_to in rails", "body": "<p>If you are using <strong>HTML only</strong> as response, make sure that ERB files where you want to show the <strong>notice</strong> has the below HTML tag at the top of your page, as it seems you don't have this tag in other pages:  </p>\n\n<pre><code>&lt;p id=\"notice\"&gt;&lt;%= notice %&gt;&lt;/p&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1597, "user_id": 717626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/303d9f5c2135f14f277775052bcb131b?s=128&d=identicon&r=PG", "display_name": "Aaron Breckenridge", "link": "https://stackoverflow.com/users/717626/aaron-breckenridge"}, "is_accepted": false, "score": 0, "last_activity_date": 1520479114, "creation_date": 1520479114, "answer_id": 49164805, "question_id": 49162113, "link": "https://stackoverflow.com/questions/49162113/close-button-in-respond-to-in-rails/49164805#49164805", "title": "Close button in respond_to in rails", "body": "<p>In your example</p>\n\n<pre><code>format.html { redirect_to @department, notice: 'Departamento criado com sucesso.' }\n</code></pre>\n\n<p><code>notice:</code> uses <code>flash</code> under the covers. <code>flash</code> messages are stored in the session but go away after they're rendered. If you want these messages to persist, you'll have to avoid using flash. Storing them in the session may be an option, but space in the session is very limited. Here's an example of messages that would persist until the session is reset, which would probably be whenever the user logged out.</p>\n\n<pre><code># in controller action\nsession[:messages] ||= []\nsession[:messages] &lt;&lt; 'Departamento criado com sucesso.'\n\n# in view\n&lt;%= session[:messages] %&gt;\n</code></pre>\n\n<p>It sounds like you want to be able to dismiss (close?) these messages one-by-one. That would imply creating a controller action to handle that behavior:</p>\n\n<pre><code># in config/routes.rb\nresources :messages, only: :delete\n\n# in app/controller/messages_controller.rb\nclass MessagesController\n  def destroy\n    session[:messages]&amp;.delete_at(params[:id])\n    redirect_to :back\n  end\nend\n\n# In your layout i.e. app/views/layouts/application.html.erb\n&lt;%= session[:messages]&amp;.each_with_index do |message, i| %&gt;\n  &lt;%= message %&gt;\n  &lt;%= link_to 'X', message_path(i), method: :delete %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8686071"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1520479114, "creation_date": 1520461039, "question_id": 49162113, "link": "https://stackoverflow.com/questions/49162113/close-button-in-respond-to-in-rails", "title": "Close button in respond_to in rails", "body": "<p>Whenever I enter, update or delete something in a view, a message will appear informing me that this operation has been successful, but it only exits when I go to a new page. I would like to know how to insert a button so that this message adds up. I am currently sending the department_controller.rb:</p>\n\n<pre><code>  def edit\n  end\n\n  # POST /departments\n  # POST /departments.json\n  def create\n    @department = Department.new(department_params)\n\n    respond_to do |format|\n      if @department.save\n        format.html { redirect_to @department, notice: 'Departamento criado com sucesso.' }\n        format.json { render :show, status: :created, location: @department }\n      else\n        format.html { render :new }\n        format.json { render json: @department.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /departments/1\n  # PATCH/PUT /departments/1.json\n  def update\n    respond_to do |format|\n      if @department.update(department_params)\n        format.html { redirect_to @department, notice: 'Departamento atualizado com sucesso.' }\n        format.json { render :show, status: :ok, location: @department }\n      else\n        format.html { render :edit }\n        format.json { render json: @department.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1432, "user_id": 1184912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5f9407e5093fbd916ea4d80c7a499f?s=128&d=identicon&r=PG", "display_name": "eyevan", "link": "https://stackoverflow.com/users/1184912/eyevan"}, "edited": false, "score": 0, "creation_date": 1520466485, "post_id": 49161324, "comment_id": 85331929, "body": "What is your question, though?"}, {"owner": {"reputation": 507, "user_id": 2670462, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/100000725110072/picture?type=large", "display_name": "peeyush singla", "link": "https://stackoverflow.com/users/2670462/peeyush-singla"}, "reply_to_user": {"reputation": 1777, "user_id": 3353157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6168a2c2f5e3582addf6d9d70ce13749?s=128&d=identicon&r=PG", "display_name": "Peter Camilleri", "link": "https://stackoverflow.com/users/3353157/peter-camilleri"}, "edited": false, "score": 0, "creation_date": 1520501779, "post_id": 49161324, "comment_id": 85344667, "body": "@PeterCamilleri please check the question, I think I missed adding complete details."}, {"owner": {"reputation": 1777, "user_id": 3353157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6168a2c2f5e3582addf6d9d70ce13749?s=128&d=identicon&r=PG", "display_name": "Peter Camilleri", "link": "https://stackoverflow.com/users/3353157/peter-camilleri"}, "edited": false, "score": 0, "creation_date": 1520524415, "post_id": 49161324, "comment_id": 85359715, "body": "Very good. I did not see the update."}], "answers": [{"tags": [], "owner": {"reputation": 1597, "user_id": 717626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/303d9f5c2135f14f277775052bcb131b?s=128&d=identicon&r=PG", "display_name": "Aaron Breckenridge", "link": "https://stackoverflow.com/users/717626/aaron-breckenridge"}, "is_accepted": true, "score": 2, "last_activity_date": 1520517927, "last_edit_date": 1520517927, "creation_date": 1520475612, "answer_id": 49164328, "question_id": 49161324, "link": "https://stackoverflow.com/questions/49161324/rubys-dup-and-clone-method-for-class-methods/49164328#49164328", "title": "Ruby&#39;s dup and clone method for Class methods", "body": "<p><a href=\"https://github.com/ruby/ruby/blob/3527c05a8f4e189772cdac17f166bd9626c24661/spec/ruby/core/module/initialize_copy_spec.rb\" rel=\"nofollow noreferrer\">By design</a>, singleton methods <em>are</em> retained when <code>dup</code> is called on a Class or Module, which is what you're doing in your example. When you <code>dup</code> an instance, singleton methods are not retained:</p>\n\n<pre><code>user = User.new\n\n# This is a singleton method on an Object\ndef user.active\n  'all active users'\nend\n\ncloned_user = user.clone\ncloned_user.active # =&gt; 'all active users'\n\nduped_user = user.dup\nduped_user.active # =&gt; undefined method `active' for #&lt;User:0x00007fee1f89ae30&gt; (NoMethodError)\n</code></pre>\n\n<h1>Notes</h1>\n\n<ul>\n<li><code>def object.method</code> behaves the same as <code>object.extend(module)</code>. Methods from <code>module</code> are not <code>dup</code>ed (with the same caveat for calling <code>dup</code> on Classes or Modules).</li>\n<li><code>dup</code> and <code>clone</code> internally call <code>initialize_copy</code>, so that's a starting point for finding how a Class overrides <code>dup</code> or <code>clone</code>.</li>\n<li>Later versions of ruby added <code>initialize_clone</code> and <code>initialize_dup</code> to fine tune overrides of <code>clone</code> and <code>dup</code>.</li>\n</ul>\n"}], "owner": {"reputation": 507, "user_id": 2670462, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/100000725110072/picture?type=large", "display_name": "peeyush singla", "link": "https://stackoverflow.com/users/2670462/peeyush-singla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "accepted_answer_id": 49164328, "answer_count": 1, "score": 0, "last_activity_date": 1520517927, "creation_date": 1520457361, "last_edit_date": 1520501705, "question_id": 49161324, "link": "https://stackoverflow.com/questions/49161324/rubys-dup-and-clone-method-for-class-methods", "title": "Ruby&#39;s dup and clone method for Class methods", "body": "<p>I have read a couple of questions about Ruby dup and clone method <a href=\"https://stackoverflow.com/questions/10183370/whats-the-difference-between-rubys-dup-and-clone-methods\">Ruby dup and clone</a>. I understand that <code>dup</code> doesn't copy the <code>singleton</code> methods and clone does for any object.</p>\n\n<p>I am trying to check w.r.t class methods but found it bit confusing:-</p>\n\n<pre><code>class User\n  def self.active\n   'all active users'\n  end\nend\n\nDupUser = User.dup\nDupUser.active #=&gt; all active users'\n\nCloneUser = User.clone\nCloneUser.active #=&gt; all active users'\n</code></pre>\n\n<p>As far as I know, class methods are just singleton methods too, then why does <code>User.dup</code> copied the <code>active</code> method i.e actually a singleton method of <code>User</code>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1520457260, "post_id": 49161271, "comment_id": 85328216, "body": "Why the bang on permit? why the attributes within an array?"}, {"owner": {"reputation": 4429, "user_id": 102133, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/561a3a55352fe6a5343e541a6894b541?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/102133/ben"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1520457449, "post_id": 49161271, "comment_id": 85328297, "body": "the bang was a bad mistake, sorry about that. the array is okay, extraneous indeed"}, {"owner": {"reputation": 23, "user_id": 9458984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc7b9e5b80f93540f1fe2d7526126fda?s=128&d=identicon&r=PG&f=1", "display_name": "Peter-Jan van Broekhuizen", "link": "https://stackoverflow.com/users/9458984/peter-jan-van-broekhuizen"}, "edited": false, "score": 0, "creation_date": 1520457523, "post_id": 49161271, "comment_id": 85328340, "body": "Hi ben, when i put the code in i get a new error wrong number of arguments (given 1, expected 0)"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1520457532, "post_id": 49161271, "comment_id": 85328348, "body": "It&#39;s okay, but maybe superfluous, take a look to the <a href=\"https://github.com/rails/rails/blob/c1014e435d26db867b2c15b74c9ef47ccff38edb/actionpack/lib/action_controller/metal/strong_parameters.rb#L522\" rel=\"nofollow noreferrer\">method definition</a>."}, {"owner": {"reputation": 4429, "user_id": 102133, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/561a3a55352fe6a5343e541a6894b541?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/102133/ben"}, "reply_to_user": {"reputation": 23, "user_id": 9458984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc7b9e5b80f93540f1fe2d7526126fda?s=128&d=identicon&r=PG&f=1", "display_name": "Peter-Jan van Broekhuizen", "link": "https://stackoverflow.com/users/9458984/peter-jan-van-broekhuizen"}, "edited": false, "score": 0, "creation_date": 1520457619, "post_id": 49161271, "comment_id": 85328385, "body": "@Peter-Jan van Broekhuizen which is ? See the edits Sebastian rightly advised"}, {"owner": {"reputation": 23, "user_id": 9458984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc7b9e5b80f93540f1fe2d7526126fda?s=128&d=identicon&r=PG&f=1", "display_name": "Peter-Jan van Broekhuizen", "link": "https://stackoverflow.com/users/9458984/peter-jan-van-broekhuizen"}, "edited": false, "score": 0, "creation_date": 1520458104, "post_id": 49161271, "comment_id": 85328638, "body": "@Ben what should the code look like? i can figure it out"}, {"owner": {"reputation": 4429, "user_id": 102133, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/561a3a55352fe6a5343e541a6894b541?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/102133/ben"}, "edited": false, "score": 0, "creation_date": 1520458848, "post_id": 49161271, "comment_id": 85328998, "body": "it should look exactly as it&#39;s shown; otherwise i would not have answered it, and sebastian would not have corrected it"}], "tags": [], "owner": {"reputation": 4429, "user_id": 102133, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/561a3a55352fe6a5343e541a6894b541?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/102133/ben"}, "is_accepted": true, "score": 0, "last_activity_date": 1520457581, "last_edit_date": 1520457581, "creation_date": 1520457133, "answer_id": 49161271, "question_id": 49161227, "link": "https://stackoverflow.com/questions/49161227/ruby-on-rails-form-param-is-missing-or-the-value-is-empty-but-value-is-set/49161271#49161271", "title": "Ruby on Rails form param is missing or the value is empty. But value is set", "body": "<p>Your attributes are within the <code>test</code>label, so here you should go :</p>\n\n<pre><code>def allow_params\n  params.require(:test).permit(:first_name, :last_name)\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 852, "user_id": 2250752, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6d266631c8305c27364e9dd312f900df?s=128&d=identicon&r=PG", "display_name": "jonnyjava.net", "link": "https://stackoverflow.com/users/2250752/jonnyjava-net"}, "edited": false, "score": 0, "creation_date": 1520459271, "post_id": 49161754, "comment_id": 85329197, "body": "And as I can see in your live example `\tparams.require(:test).permit!(test: [:first_name, :last_name])` is wrong too because this <code>test: [</code> does not exists"}], "tags": [], "owner": {"reputation": 852, "user_id": 2250752, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6d266631c8305c27364e9dd312f900df?s=128&d=identicon&r=PG", "display_name": "jonnyjava.net", "link": "https://stackoverflow.com/users/2250752/jonnyjava-net"}, "is_accepted": false, "score": 0, "last_activity_date": 1520459204, "creation_date": 1520459204, "answer_id": 49161754, "question_id": 49161227, "link": "https://stackoverflow.com/questions/49161227/ruby-on-rails-form-param-is-missing-or-the-value-is-empty-but-value-is-set/49161754#49161754", "title": "Ruby on Rails form param is missing or the value is empty. But value is set", "body": "<p>Look, this is what you form posts when you click submit:</p>\n\n<pre><code> {\"utf8\"=&gt;\"\u2713\",\"authenticity_token\"=&gt;\"...\", \"test\"=&gt;\"first_name\"=&gt;\"poldo\", \"last_name\"=&gt;\"de poldis\"},\"commit\"=&gt;\"Create\"}\n</code></pre>\n\n<p>As you can see <code>first_name</code> and <code>last_name</code> are inside an hash as value of a key called <code>test</code>. Indeed your function <code>allow_params</code> expects something like this </p>\n\n<pre><code>last_name: {first_name: 'poldo'}\n</code></pre>\n\n<p>as you can see the param (<code>last_name</code>) is missing, because is inside <code>test</code>!\nThe right way is as Ben answered:</p>\n\n<pre><code>  params.require(:test).permit(:first_name, :last_name)\n</code></pre>\n\n<p>To understand better how strong parameters works I suggest to you to check this page <a href=\"http://api.rubyonrails.org/classes/ActionController/StrongParameters.html\" rel=\"nofollow noreferrer\">Api doc</a> or even better <a href=\"http://edgeguides.rubyonrails.org/action_controller_overview.html\" rel=\"nofollow noreferrer\">The latest version ofthe official manual</a></p>\n"}], "owner": {"reputation": 23, "user_id": 9458984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc7b9e5b80f93540f1fe2d7526126fda?s=128&d=identicon&r=PG&f=1", "display_name": "Peter-Jan van Broekhuizen", "link": "https://stackoverflow.com/users/9458984/peter-jan-van-broekhuizen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 49161271, "answer_count": 2, "score": 2, "last_activity_date": 1521281818, "creation_date": 1520456906, "last_edit_date": 1521281818, "question_id": 49161227, "link": "https://stackoverflow.com/questions/49161227/ruby-on-rails-form-param-is-missing-or-the-value-is-empty-but-value-is-set", "title": "Ruby on Rails form param is missing or the value is empty. But value is set", "body": "<p>I'm trying to submit a form in ruby on rails that i made, but keep getting de next error.\nRuby on Rails form: param is missing or the value is empty</p>\n\n<p>my form</p>\n\n<pre><code>&lt;%= form_for @test do |f| %&gt;     \n  &lt;div class=\"field\"&gt; \n    &lt;%= f.text_field :first_name %&gt;&lt;br&gt; \n    &lt;%= f.text_field :last_name %&gt;&lt;br&gt;\n  &lt;/div&gt;\n  &lt;div class=\"actions\"&gt; \n    &lt;%= f.submit \"Create\" %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>my controller</p>\n\n<pre><code>  def new\n    @test = Test.new\n  end\n\n  def create\n    @test = Test.new(allow_params)\n    if @test.save\n      redirect_to 'test/index'\n    else\n      render 'test/new'\n    end\n  end\n\n  private\n\n  def allow_params\n    params.require(:last_name).permit(:first_name) \n  end\n</code></pre>\n\n<p>my routes</p>\n\n<pre><code>resources :test\n  get 'test/index'\n  get 'test/new'\n  get 'test/create'\n  post '/tests' =&gt; 'test#create'\n</code></pre>\n"}, {"tags": ["ruby", "watir", "scrape"], "comments": [{"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1520457805, "post_id": 49161118, "comment_id": 85328493, "body": "What are you trying to get or do with the table?"}, {"owner": {"reputation": 57, "user_id": 4064028, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/587204768/picture?type=large", "display_name": "Miguel Abdon Hollstein", "link": "https://stackoverflow.com/users/4064028/miguel-abdon-hollstein"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1520458259, "post_id": 49161118, "comment_id": 85328723, "body": "Hi, thanks for answering. I want to get the data, the table goes down, it&#39;s long. The problem is that the code I use only takes me to the first row.  Greetings."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1520458639, "post_id": 49161118, "comment_id": 85328892, "body": "Do you want all the text in the table or are you specifically targeting links?"}, {"owner": {"reputation": 57, "user_id": 4064028, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/587204768/picture?type=large", "display_name": "Miguel Abdon Hollstein", "link": "https://stackoverflow.com/users/4064028/miguel-abdon-hollstein"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1520458948, "post_id": 49161118, "comment_id": 85329047, "body": "I wish I could have them all sorted, just as there are columns without data, then I want to add those &quot;without data&quot;."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 1, "creation_date": 1520461993, "post_id": 49161118, "comment_id": 85330349, "body": "Maybe try <code>browser.table.as.map(&amp;:text)</code>? Sorry, I&#39;m still having a hard time knowing exactly what you need. Giving the specific out you except for the sample table might help."}], "owner": {"reputation": 57, "user_id": 4064028, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/587204768/picture?type=large", "display_name": "Miguel Abdon Hollstein", "link": "https://stackoverflow.com/users/4064028/miguel-abdon-hollstein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520456450, "creation_date": 1520456450, "question_id": 49161118, "link": "https://stackoverflow.com/questions/49161118/scrape-table-with-watir-without-classes-or-ids", "title": "Scrape Table With Watir without classes or ids", "body": "<p>I did not want to bother you, but I could not solve the problem :/</p>\n\n<p>I'm making a scrap to a web page and this page does not have many classes or ids in its structure.</p>\n\n<p>I leave an extract of the html:</p>\n\n<pre><code>                &lt;tr&gt;\n                    &lt;td style=\"border-left:2px solid white;\"&gt;\n                        &lt;ul  class=\"listCarro\" &gt;\n                            &lt;li class=\"all\"&gt;\n                                &lt;a href=\"javascript:searchMarcaAutosModeloDetalle('0','Todos','')\"&gt;\n                                    Todos\n                                &lt;/a&gt;\n                            &lt;/li&gt;\n                        &lt;/ul&gt;\n                    &lt;/td&gt;\n                    &lt;td align=\"center\"&gt;\n                        &lt;a href=\"javascript:searchMarcaAutosModeloDetalle('0','Todos','')\"&gt;\n\n                        &lt;/a&gt;\n                    &lt;/td&gt;\n                    &lt;td align=\"center\" style=\"border-right:2px solid white;\"&gt;\n                        &lt;a href=\"javascript:searchMarcaAutosModeloDetalle('0','Todos','')\"&gt;\n\n                        &lt;/a&gt;\n                    &lt;/td&gt;               \n                &lt;/tr&gt;\n\n                &lt;tr&gt;\n                    &lt;td style=\"border-left:2px solid white;\"&gt;\n                        &lt;ul  class=\"listCarro\" &gt;\n                            &lt;li class=\"\"&gt;\n                                &lt;a href=\"javascript:searchMarcaAutosModeloDetalle('854','MAZDA 6 2.0 DOHC','(2002   - 2010  )')\"&gt;\n                                    MAZDA 6 2.0 DOHC\n                                &lt;/a&gt;\n                            &lt;/li&gt;\n                        &lt;/ul&gt;\n                    &lt;/td&gt;\n                    &lt;td align=\"center\"&gt;\n                        &lt;a href=\"javascript:searchMarcaAutosModeloDetalle('854','MAZDA 6 2.0 DOHC','(2002   - 2010  )')\"&gt;\n                            LFDE\n                        &lt;/a&gt;\n                    &lt;/td&gt;\n                    &lt;td align=\"center\" style=\"border-right:2px solid white;\"&gt;\n                        &lt;a href=\"javascript:searchMarcaAutosModeloDetalle('854','MAZDA 6 2.0 DOHC','(2002   - 2010  )')\"&gt;\n                            (2002   - 2010  )\n                        &lt;/a&gt;\n                    &lt;/td&gt;               \n                &lt;/tr&gt;\n</code></pre>\n\n<p>When i use: </p>\n\n<pre><code> browser.tr.as do |b|\n         puts b.text.strip\n end\n</code></pre>\n\n<p>Only show me \"Todos\" and the following does not show them. It is difficult for me to do it since it does not contain so many classes.</p>\n\n<p>Any ideas? Thank you and sorry for the inconvenience.</p>\n\n<p>Regards.</p>\n"}, {"tags": ["ruby", "rubygems", "bundle", "bundler"], "comments": [{"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1520461817, "post_id": 49160977, "comment_id": 85330271, "body": "<a href=\"https://stackoverflow.com/questions/15537191/why-does-installing-ruby-on-rails-generate-error-size-of-array-ruby-check-size\" title=\"why does installing ruby on rails generate error size of array ruby check size\">stackoverflow.com/questions/15537191/&hellip;</a> implies you likely have the wrong devkit.  Check the comments - make sure you have correct 32/64 bitness, and may need to re-run a script if you installed several versions of the devkit"}, {"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1520461829, "post_id": 49160977, "comment_id": 85330274, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/15537191/why-does-installing-ruby-on-rails-generate-error-size-of-array-ruby-check-size\">Why does installing Ruby on Rails generate error &quot;size of array &#39;ruby_check_sizeof_voidp&#39; is negative&quot;?</a>"}], "owner": {"reputation": 11, "user_id": 9458930, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215960146826598/picture?type=large", "display_name": "Thiago Lipovscek", "link": "https://stackoverflow.com/users/9458930/thiago-lipovscek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 555, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1520455891, "creation_date": 1520455891, "question_id": 49160977, "link": "https://stackoverflow.com/questions/49160977/failed-to-build-gem-native-extension-ruby-in-windows", "title": "Failed to build gem native extension - Ruby in Windows", "body": "<p>I'm facing some problems at Windows 10 to install native extensions. This happened with many native gems.</p>\n\n<pre><code>C:\\Ruby23x64\\bin&gt;gem install websocket-driver\nBuilding native extensions. This could take a while...\nERROR:  Error installing websocket-driver:\n        ERROR: Failed to build gem native extension.\n\n    current directory: C:/Ruby23x64/lib/ruby/gems/2.3.0/gems/websocket-driver-0.7.0/ext/websocket-driver\nC:/Ruby23x64/bin/ruby.exe -r ./siteconf20180307-13760-qpoxcg.rb extconf.rb\ncreating Makefile\n\ncurrent directory: C:/Ruby23x64/lib/ruby/gems/2.3.0/gems/websocket-driver-0.7.0/ext/websocket-driver\nmake \"DESTDIR=\" clean\n\ncurrent directory: C:/Ruby23x64/lib/ruby/gems/2.3.0/gems/websocket-driver-0.7.0/ext/websocket-driver\nmake \"DESTDIR=\"\ngenerating websocket_mask-i386-mingw32.def\ncompiling websocket_mask.c\nIn file included from c:/Ruby23x64/include/ruby-2.3.0/ruby.h:33:0,\n                 from websocket_mask.c:1:\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:131:14: error: size of array 'ruby_check_sizeof_voidp' is negative\nIn file included from c:/Ruby23x64/include/ruby-2.3.0/ruby.h:33:0,\n                 from websocket_mask.c:1:\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h: In function 'rb_obj_freeze_inline':\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:1360:9: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:1361:2: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:1362:6: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:1362:27: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h: In function 'rb_data_object_get':\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:1400:13: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h: In function 'rb_data_object_make':\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:1414:5: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h: In function 'rb_data_typed_object_make':\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:1421:5: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h: In function 'rb_num2char_inline':\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:1587:9: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:1587:9: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:1587:9: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:1587:41: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:1587:41: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:1587:41: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:1588:9: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:1588:9: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:1588:9: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h: In function 'rb_class_of':\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:1949:12: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h: In function 'rb_type':\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:1966:12: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nIn file included from c:/Ruby23x64/include/ruby-2.3.0/ruby.h:33:0,\n                 from websocket_mask.c:1:\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h: In function 'rb_clone_setup':\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:1997:56: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:1998:33: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:1999:9: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:1999:9: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h: In function 'rb_dup_setup':\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:2005:42: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:2006:9: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:2006:9: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h: In function 'rb_array_len':\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:2012:13: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:2013:2: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:2013:24: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h: In function 'rb_array_const_ptr':\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:2027:12: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:2027:12: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:2027:12: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h: In function 'rb_struct_len':\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:2034:13: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:2035:2: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:2035:26: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h: In function 'rb_struct_const_ptr':\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:2041:12: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:2041:12: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nc:/Ruby23x64/include/ruby-2.3.0/ruby/ruby.h:2041:12: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nwebsocket_mask.c: In function 'method_websocket_mask':\nwebsocket_mask.c:26:23: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nwebsocket_mask.c:26:23: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nwebsocket_mask.c:26:23: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nwebsocket_mask.c:30:15: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nwebsocket_mask.c:30:15: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nwebsocket_mask.c:30:15: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nwebsocket_mask.c:31:15: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nwebsocket_mask.c:31:15: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nwebsocket_mask.c:31:15: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nwebsocket_mask.c:32:15: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nwebsocket_mask.c:32:15: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nwebsocket_mask.c:32:15: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nwebsocket_mask.c:35:16: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nwebsocket_mask.c:35:16: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nwebsocket_mask.c:35:16: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\nmake: *** [websocket_mask.o] Error 1\n\nmake failed, exit code 2\n\nGem files will remain installed in C:/Ruby23x64/lib/ruby/gems/2.3.0/gems/websocket-driver-0.7.0 for inspection.\nResults logged to C:/Ruby23x64/lib/ruby/gems/2.3.0/extensions/x86-mingw32/2.3.0/websocket-driver-0.7.0/gem_make.out\n</code></pre>\n\n<p>What i've already tried:</p>\n\n<ul>\n<li>My rb version is 2.3.3. My devkit is compatible with this version</li>\n<li>Execute devkitvars.bat to set my vars</li>\n<li>Install GCC</li>\n<li>Try to install dependencies with <code>bundle install</code> and with <code>gem install &lt;gem name&gt;</code></li>\n</ul>\n\n<p>Can somebody help me out with this, please?</p>\n"}, {"tags": ["ruby", "rvm", "rbenv"], "answers": [{"tags": [], "owner": {"reputation": 1531, "user_id": 1677069, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d169336c1d2c08a2d9d8022115c2c9a0?s=128&d=identicon&r=PG", "display_name": "Andres Ehrenpreis", "link": "https://stackoverflow.com/users/1677069/andres-ehrenpreis"}, "is_accepted": false, "score": 0, "last_activity_date": 1520455787, "creation_date": 1520455787, "answer_id": 49160955, "question_id": 49160345, "link": "https://stackoverflow.com/questions/49160345/system-ruby-is-not-controlled-by-rvm-but-you-can-use-it-with-rvm-automount/49160955#49160955", "title": "System ruby is not controlled by RVM, but you can use it with &#39;rvm automount&#39;", "body": "<p>The problem was that .rvmrc file was made by hand and included a command like <code>rvm gemset use 2.3.3@myproject</code> which is obviously wrong. Probably messed up some instructions :)  </p>\n\n<p>Removing .rvmrc and doing </p>\n\n<pre><code>rvm --create use 2.3.3@myproject --rvmrc\n</code></pre>\n\n<p>fixed the problem.</p>\n"}], "owner": {"reputation": 1531, "user_id": 1677069, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d169336c1d2c08a2d9d8022115c2c9a0?s=128&d=identicon&r=PG", "display_name": "Andres Ehrenpreis", "link": "https://stackoverflow.com/users/1677069/andres-ehrenpreis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 591, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520455787, "creation_date": 1520453103, "question_id": 49160345, "link": "https://stackoverflow.com/questions/49160345/system-ruby-is-not-controlled-by-rvm-but-you-can-use-it-with-rvm-automount", "title": "System ruby is not controlled by RVM, but you can use it with &#39;rvm automount&#39;", "body": "<p>I mistakenly had two ruby version managers installed in my laptop parallelly: <strong>rbenv</strong> and <strong>rvm</strong>. When I added .rvmrc file to my project with a command to use specific ruby version and gemset name then every time when I <code>cd</code> into my project's folder, I get:</p>\n\n<blockquote>\n  <p>System ruby is not controlled by RVM, but you can use it with 'rvm automount', read more: 'rvm help mount'.</p>\n</blockquote>\n\n<p>I thought removing rbenv fixes the problem, so I did</p>\n\n<pre><code>sudo apt-get purge rbenv\n</code></pre>\n\n<p>But nothing better. </p>\n\n<p>I then checked for hidden dirs in my home folder and discovered <code>.rbenv</code> directory from there. I removed it but no effect. </p>\n\n<p>Then I thought reinstalling the ruby version with rvm will help, but still no effect.</p>\n\n<p>I then tried doing the <code>rvm automount</code> as suggested. This gave me following output:</p>\n\n<pre><code>me@dell:~/apps/myproject$ rvm automount\n  Warning! PATH is not properly set up, $GEM_HOME is not set.\n  Usually this is caused by shell initialization files. Search for 'PATH=...' entries.\n  You can also re-add RVM to your profile by running: 'rvm get stable --auto-dotfiles'.\n  To fix it temporarily in this shell session run: 'rvm use ruby-2.5.0'.\n  To ignore this error add rvm_silence_path_mismatch_check_flag=1 to your ~/.rvmrc file.\n  Found 'ruby 2.3.3p222 (2016-11-21) [x86_64-linux-gnu]' in '/usr'\n\n  # Please enter name [ruby-2.3.3-p222]: \n\n  Mounting 'ext-ruby-2.3.3-p222' from '/usr' with 'bin/ruby'\n  ext-ruby-2.3.3-p222 - #gemset created /home/me/.rvm/gems/ext-ruby-2.3.3-p222@global\n  ext-ruby-2.3.3-p222 - #importing gemset /home/me/.rvm/gemsets/global.gems......................there was an error \n  installing gem rubygems-bundler\n  ................\n  ext-ruby-2.3.3-p222 - #generating global wrappers........\n  ext-ruby-2.3.3-p222 - #gemset created /home/me/.rvm/gems/ext-ruby-2.3.3-p222\n  ext-ruby-2.3.3-p222 - #importing gemsetfile /home/me/.rvm/gemsets/default.gems evaluated to empty gem list\n  ext-ruby-2.3.3-p222 - #generating default wrappers........\n</code></pre>\n\n<p>The part where it asked for name was confusing. I also read <code>rvm help mount</code> page but didn't see anything I could use from there. The result was a new rvm gemset with ugly name <code>ext-ruby-2.3.3-p222 [ x86_64 ]</code> which still didn't fix the part where I got the initial error.</p>\n\n<p>I'm using Ubuntu 17.10</p>\n"}, {"tags": ["ruby", "sinatra"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1520452007, "post_id": 49160024, "comment_id": 85325482, "body": "What is that <code>time</code>? Did you mean <code>Time.now</code>?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1520452487, "post_id": 49160024, "comment_id": 85325742, "body": "<code>&quot;#{time}&quot;</code> is the same as <code>time.to_s</code> which is generally the same as <code>time</code> for any given string variable. Where does this value come from?"}, {"owner": {"reputation": 47, "user_id": 9458696, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160157475535302/picture?type=large", "display_name": "Nick Saltarelli", "link": "https://stackoverflow.com/users/9458696/nick-saltarelli"}, "edited": false, "score": 0, "creation_date": 1520452875, "post_id": 49160024, "comment_id": 85325940, "body": "sorry guys I had forgot to add in my time variable. I have updated the code."}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 9458696, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160157475535302/picture?type=large", "display_name": "Nick Saltarelli", "link": "https://stackoverflow.com/users/9458696/nick-saltarelli"}, "edited": false, "score": 0, "creation_date": 1520455327, "post_id": 49160384, "comment_id": 85327218, "body": "yes. that was the issue. I was loading my variable outside of the get request. I&#39;ve re tailored all my code to be inside my get request and things are now updating when I hit the refresh."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 47, "user_id": 9458696, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160157475535302/picture?type=large", "display_name": "Nick Saltarelli", "link": "https://stackoverflow.com/users/9458696/nick-saltarelli"}, "edited": false, "score": 0, "creation_date": 1520455379, "post_id": 49160384, "comment_id": 85327241, "body": "@NickSaltarelli JFYI, here on stackoverflow you thank people by upvoting/accepting their answers :)"}, {"owner": {"reputation": 47, "user_id": 9458696, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160157475535302/picture?type=large", "display_name": "Nick Saltarelli", "link": "https://stackoverflow.com/users/9458696/nick-saltarelli"}, "edited": false, "score": 0, "creation_date": 1520460434, "post_id": 49160384, "comment_id": 85329687, "body": "I did but because Im new it hasn&#39;t reflected in the public upvote score. I need my reputation to get to 15 first. :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 47, "user_id": 9458696, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160157475535302/picture?type=large", "display_name": "Nick Saltarelli", "link": "https://stackoverflow.com/users/9458696/nick-saltarelli"}, "edited": false, "score": 0, "creation_date": 1520495036, "post_id": 49160384, "comment_id": 85340735, "body": "@NickSaltarelli: ah, right. Well, you accept anyway, so that others know this answer helped you."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 3, "last_activity_date": 1520453239, "creation_date": 1520453239, "answer_id": 49160384, "question_id": 49160024, "link": "https://stackoverflow.com/questions/49160024/getting-time-to-update-on-every-page-reload-in-sinatra/49160384#49160384", "title": "Getting &quot;#{Time}&quot; to update on every page reload in Sinatra", "body": "<p>This value is indeed \"cached\". It is evaluated once, when your server starts, and then it doesn't have a chance to change. To refresh it, you either need to restart server before each page reload. Or not cache it.</p>\n\n<pre><code>require 'sinatra'\n\nget '/' do\n  Time.now.to_s\nend\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 9458696, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160157475535302/picture?type=large", "display_name": "Nick Saltarelli", "link": "https://stackoverflow.com/users/9458696/nick-saltarelli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520453239, "creation_date": 1520451778, "last_edit_date": 1520452946, "question_id": 49160024, "link": "https://stackoverflow.com/questions/49160024/getting-time-to-update-on-every-page-reload-in-sinatra", "title": "Getting &quot;#{Time}&quot; to update on every page reload in Sinatra", "body": "<p>I've searched high and low for what I think should be a simple answer and cant seem to find a solution that works.</p>\n\n<p>This simple app is deployed to heroku: <a href=\"https://inventorylez.herokuapp.com\" rel=\"nofollow noreferrer\">https://inventorylez.herokuapp.com</a></p>\n\n<pre><code>require 'sinatra'\n\ntime = Time.now\n\nget '/' do\n  \"#{time}\"\nend\n</code></pre>\n\n<p>Sinatra seems to be caching because every time I reload my page the time is not changing. I would like to enable it so that every time I load the page the time will change (avoiding a cache).</p>\n\n<p>thanks in advance</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1520445922, "post_id": 49158527, "comment_id": 85321924, "body": "You&#39;re going to need to trim this down a lot more before we can help you. This isn&#39;t a technical problem so much as a dump of code."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1520445981, "post_id": 49158527, "comment_id": 85321960, "body": "To avoid confusing yourself, please pay very careful attention to indentation and try to avoid one-lining things for no reason. Ruby allows a lot of short-hand that&#39;s technically valid but hard to read. <code>if ... then ... end</code> on one line is one such example. Spread that out so the branching is clear."}, {"owner": {"reputation": 7, "user_id": 9206873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1OMTI.jpg?s=128&g=1", "display_name": "Mholmes85", "link": "https://stackoverflow.com/users/9206873/mholmes85"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1520446130, "post_id": 49158527, "comment_id": 85322054, "body": "Thanks guys for your quick responses.  Trimming down the code for starters now..."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1520446262, "post_id": 49158527, "comment_id": 85322136, "body": "This code is pretty confused, though I&#39;ll say that&#39;s normal for someone just getting started. What you&#39;ll want to do is try and create methods with a singular, express purpose, and give those methods names that communicate their intent and function. <code>get_computer_play</code> doesn&#39;t take any input, it just uses state information that happens to be kicking around, and it does so in a way that&#39;s far from clear. A better approach is <code>computer_play_for(move)</code> where that&#39;s self-contained."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1520446327, "post_id": 49158527, "comment_id": 85322182, "body": "i don&#39;t know tic tac toe in that much detail, is it even possible for the computer to win under <i>every circumstance</i> as you request?"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1520446542, "post_id": 49158527, "comment_id": 85322293, "body": "@maxpleaner This is rock-paper-scissors, not tic-tac-toe. (And for the record, it&#39;s possible to at least force a draw in any game of tic-tac-toe.)"}, {"owner": {"reputation": 7, "user_id": 9206873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1OMTI.jpg?s=128&g=1", "display_name": "Mholmes85", "link": "https://stackoverflow.com/users/9206873/mholmes85"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1520446602, "post_id": 49158527, "comment_id": 85322324, "body": "@tadman Thank you.  This is my first attempt at a Ruby program, your suggestion makes sense. Will work at that now."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1520446730, "post_id": 49158527, "comment_id": 85322386, "body": "Another thing to note is <code>@player_play != :R || :P || :S</code> does not do what you think it does, it&#39;s equivalent to <code>(@player_play != :R) || :P || :S</code>. The <code>||=</code> gets evaluated first, and <code>:P || :S</code> never evaluated because that&#39;s the first non logically false value has been found. You probably mean <code>![:R, :P, :S].include?(@player_play)</code> where that array should end up a constant if you use it frequently. This is because of <a href=\"https://ruby-doc.org/core/doc/syntax/precedence_rdoc.html\" rel=\"nofollow noreferrer\">operator precedence</a>."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1520446783, "post_id": 49158527, "comment_id": 85322419, "body": "Is this possible without the computer cheating?"}, {"owner": {"reputation": 7, "user_id": 9206873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1OMTI.jpg?s=128&g=1", "display_name": "Mholmes85", "link": "https://stackoverflow.com/users/9206873/mholmes85"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1520446911, "post_id": 49158527, "comment_id": 85322509, "body": "@SagarPandya That is my goal :) I want one version of the game... normal where the computer chooses turns at random.  That I did, and it works!   The second version the goal is to make the computer cheat based on the users input."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1520471741, "post_id": 49158527, "comment_id": 85333335, "body": "I understand that you don&#39;t want answers that show how your code can be fixed. Do you want answers that are complete solutions but take a different approach (@SagarPandya&#39;s answer, for example)? I think it would be to your advantage to see more Ruby-like ways to approach the problem. In any event, please edit to clarify that point."}, {"owner": {"reputation": 7, "user_id": 9206873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1OMTI.jpg?s=128&g=1", "display_name": "Mholmes85", "link": "https://stackoverflow.com/users/9206873/mholmes85"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1520473168, "post_id": 49158527, "comment_id": 85333654, "body": "@caryswoveland. Thanks for your message.  I will edit the message within a few hours when I get back from our health appointment for new family member in the works!    Yes I would appreciate another approach....   I just got a book in the mail-  object oriented ruby and I am going over that as well."}], "answers": [{"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 0, "last_activity_date": 1520448478, "creation_date": 1520448478, "answer_id": 49159211, "question_id": 49158527, "link": "https://stackoverflow.com/questions/49158527/ruby-trying-to-create-an-unbeatable-game/49159211#49159211", "title": "Ruby - Trying to create an unbeatable game", "body": "<p>To create a rigged game, use a <a href=\"http://ruby-doc.org/core-2.5.0/doc/syntax/control_expressions_rdoc.html#label-case+Expression\" rel=\"nofollow noreferrer\">case-expression</a> along the lines of:</p>\n\n<pre><code>puts \"Rock, paper or scissors?\"\nans = gets.downcase.chomp\n\ncase ans\nwhen \"rock\"\n  puts \"You lose, computer chose paper\"\nwhen \"paper\"\n  #insert code here\nwhen \"scissors\"\n  #insert code here\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 0, "last_activity_date": 1520479112, "last_edit_date": 1520479112, "creation_date": 1520463599, "answer_id": 49162653, "question_id": 49158527, "link": "https://stackoverflow.com/questions/49158527/ruby-trying-to-create-an-unbeatable-game/49162653#49162653", "title": "Ruby - Trying to create an unbeatable game", "body": "<p>Here is a different, more Ruby-like, approach.</p>\n\n<pre><code>WINNERS = { \"rock\"=&gt;\"paper\", \"scissors\"=&gt;\"rock\", \"paper\"=&gt;\"scissors\" }\n\ndef cheat\n  loop do\n    puts \"rock, paper or scissors?\"\n    computer = WINNERS[gets.downcase.chomp]\n    if computer\n      puts \"You lose, computer chose #{computer}.\"\n      break\n    end\n    puts \"That entry is invalid. Try again.\"\n  end\nend\n\ncheat #=&gt; (enter \"rock\")     \"You lose, computer chooses paper.\"\ncheat #=&gt; (enter \"papter\")   \"That entry is invalid. Try again.\"\ncheat #=&gt; (enter \"paper\")    \"You lose, computer chooses scissors.\"\ncheat #=&gt; (enter \"scissors\") \"You lose, computer chooses rock.\"\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 9206873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1OMTI.jpg?s=128&g=1", "display_name": "Mholmes85", "link": "https://stackoverflow.com/users/9206873/mholmes85"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 49162653, "answer_count": 2, "score": 0, "last_activity_date": 1520481891, "creation_date": 1520445836, "last_edit_date": 1520481891, "question_id": 49158527, "link": "https://stackoverflow.com/questions/49158527/ruby-trying-to-create-an-unbeatable-game", "title": "Ruby - Trying to create an unbeatable game", "body": "<p>I am trying to create a version of the game I created where the program(computer) always wins. Game is Rock Paper Scissors. </p>\n\n<p>I am a beginner in Ruby, I have successfully created the \"normal\" version of the game where the coputer chooses its results at random.  I have been searching for awhile and stuck for about a day on this simple problem.   </p>\n\n<p>If anyone can point me in the write direction, as I do not really want the solution solved for me as I am really trying to learn this.  But I feel I am missing something important.  I had the idea of using the Minimax algorithm so I just started reading into that as well.  </p>\n\n<p>I am very open to different solutions to this problem.</p>\n\n<p>Below is my current \"Normal\" version of the game. And also the part I believe the change needs to take place... where the computer makes it selection based on the users input. Then I will show the section I was trying to make in the same game, but having the computer always win. </p>\n\n<p>Question: How do I have the computer makes its selection correctly based on user input?  I know many options exit in Ruby, I am open to different solutions or types of solution that I can incorporate into my program.</p>\n\n<p>Thank you for any/all responses in advance. </p>\n\n<pre><code> def get_player_play\n   prompt \n   @player_play = gets.chomp.upcase.to_sym \n   @winner = :invalid if  @player_play != :R || :P || :S  \n   @winner = :score if @player_play == :X\n   @winner = \"\" if @player_play == :Q\n end\n\n def get_computer_play\n   @computer_play = WINS.keys.sample\n end\n\n def get_winner\n  if @player_play == @computer_play then @winner = nil\n  else\n  @winner = :player   if WINS[@player_play] == @computer_play \n  @winner = :computer if WINS[@computer_play] == @player_play  \n  end\n end\n</code></pre>\n\n<p>Here is what I have tried (plus many variations of the same type of if/else statements).</p>\n\n<pre><code> #this makes it a tie\n    def get_computer_play \n        if NAME[@player_play] == ( NAME[:R] )\n         return @computer_play = WIN[:P]\n       elsif NAME[@player_play] == ( NAME[:P] )\n         return @computer_play = WIN[:S]\n       else \n         NAME[@player_play] == ( NAME[:S] )\n         return @computer_play = WIN[:R]\n       end\n    end \n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-3"], "answers": [{"comments": [{"owner": {"reputation": 1197, "user_id": 400743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a0d5c51291898c92154ba4ac1c56cd6?s=128&d=identicon&r=PG", "display_name": "Bartosz Pietraszko", "link": "https://stackoverflow.com/users/400743/bartosz-pietraszko"}, "edited": false, "score": 0, "creation_date": 1520448003, "post_id": 49158847, "comment_id": 85323171, "body": "Good idea, but you forgot about <code>NorthCarolina</code>, <code>NewMexico</code> and few others. Simple <code>state.capitalize</code> might not work for compound names if they are CamelCased. I suppose it would be better to hardcode those instead."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 1197, "user_id": 400743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a0d5c51291898c92154ba4ac1c56cd6?s=128&d=identicon&r=PG", "display_name": "Bartosz Pietraszko", "link": "https://stackoverflow.com/users/400743/bartosz-pietraszko"}, "edited": false, "score": 0, "creation_date": 1520449623, "post_id": 49158847, "comment_id": 85324100, "body": "@BartoszPietraszko yes you&#39;re right, good catch. I changed it to <code>camelize</code> which will handle <code>north_carolina</code> too"}, {"owner": {"reputation": 313, "user_id": 3763682, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f78eec0fd68366d8b40faacff41433fc?s=128&d=identicon&r=PG&f=1", "display_name": "user3763682", "link": "https://stackoverflow.com/users/3763682/user3763682"}, "edited": false, "score": 0, "creation_date": 1520450232, "post_id": 49158847, "comment_id": 85324482, "body": "Thank you for responding.  When I add the code to the users_controller, I get this error <code>undefined method each_with_object for &quot;illinois&quot; &quot;wisconsin&quot; &quot;arkansas&quot;:String</code>  (I changed single quotes around the state names to &quot; so they&#39;d print nice.)  So, I changed the syntax of the <code>def state_classes</code> line <code>states.each ...</code> to <code>%w(states).each ...</code> per the <code>each_with_object</code> documentation&#39;s example [<a href=\"https://apidock.com/rails/Enumerable/each_with_object]\" rel=\"nofollow noreferrer\">apidock.com/rails/Enumerable/each_with_object]</a> and now get the error <code>uninitialized constant States</code> for the line beginning <code>memo[state]</code>"}, {"owner": {"reputation": 313, "user_id": 3763682, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f78eec0fd68366d8b40faacff41433fc?s=128&d=identicon&r=PG&f=1", "display_name": "user3763682", "link": "https://stackoverflow.com/users/3763682/user3763682"}, "edited": false, "score": 0, "creation_date": 1520451313, "post_id": 49158847, "comment_id": 85325085, "body": "I tried adding <code>belongs_to :state</code> in model user.rb and <code>has_many :users</code> in model Illinois.rb however that did not help."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1520452912, "post_id": 49158847, "comment_id": 85325950, "body": "if you don&#39;t have <code>each_with_object</code> available for whatever reasonn (older version of ruby, maybe), you can use <code>reduce</code> instead, see the question edit. Also, from the sounds of it, you are introducing more bugs as you try to debug ...  for example nowhere in my code did I mention <code>States</code> with a capital <code>S</code> ... the capitalization makes it a constant, it&#39;s different than saying <code>states</code> which calls the method. Also <code>%w(states)</code> is wrong, that&#39;s the same thing as saying <code>[&quot;states&quot;].each</code> and you don&#39;t want to process the literal strinng <code>&quot;states&quot;</code>"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1520453509, "post_id": 49158847, "comment_id": 85326270, "body": "Conntinuing my previous comment, the reason you are saying <code>undefined method States</code> is because you are passing &quot;states&quot; as the name of a state ..."}, {"owner": {"reputation": 313, "user_id": 3763682, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f78eec0fd68366d8b40faacff41433fc?s=128&d=identicon&r=PG&f=1", "display_name": "user3763682", "link": "https://stackoverflow.com/users/3763682/user3763682"}, "edited": false, "score": 0, "creation_date": 1520532813, "post_id": 49158847, "comment_id": 85365019, "body": "Here&#39;s what worked for me: 1.  In the <code>users_controller.rb</code>, I created <code>def state_class</code> with <code>@user = current_user</code> and <code>state_class = @user.state.camelize.constantize</code> This works because <code>state</code> is a user attribute saved to the db.  2. In the <code>def user_cpe_dashboard</code> method I added <code>@user_state = state_class.new(current_user)</code> replacing <code>@illinois = Illinois.new(current_user) if (@user.state == &#39;illinois&#39;)</code> and 3. In the view (a state-specific partial), I changed <code>@illinois.illinois_hours</code> to <code>user_state.illinois_hours</code>"}, {"owner": {"reputation": 313, "user_id": 3763682, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f78eec0fd68366d8b40faacff41433fc?s=128&d=identicon&r=PG&f=1", "display_name": "user3763682", "link": "https://stackoverflow.com/users/3763682/user3763682"}, "edited": false, "score": 0, "creation_date": 1520532955, "post_id": 49158847, "comment_id": 85365103, "body": "@maxpleaner  Thank you for pointing me in the right direction.  If my changes make sense to you, and you wish to, please edit your answer.  I&#39;ll accept it after you give me the go ahead."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 313, "user_id": 3763682, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f78eec0fd68366d8b40faacff41433fc?s=128&d=identicon&r=PG&f=1", "display_name": "user3763682", "link": "https://stackoverflow.com/users/3763682/user3763682"}, "edited": false, "score": 0, "creation_date": 1520535604, "post_id": 49158847, "comment_id": 85366653, "body": "@user3763682 you are free to edit my answer, however I&#39;m still not really sure why you think my code doesn&#39;t work (other than the reduce vs each_with_object thing). Note that there <i>is</i> a difference between your approach and mine, and that&#39;s the fact that I whitelist user states before calling constantize. Like I mentioned, it&#39;s good practice not to pass user input to <code>constantize</code> without validating it first."}, {"owner": {"reputation": 313, "user_id": 3763682, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f78eec0fd68366d8b40faacff41433fc?s=128&d=identicon&r=PG&f=1", "display_name": "user3763682", "link": "https://stackoverflow.com/users/3763682/user3763682"}, "edited": false, "score": 0, "creation_date": 1520554754, "post_id": 49158847, "comment_id": 85375130, "body": "@maxpleaner I&#39;m accepting your answer; hopefully, the thread will help someone else.  I validate a user&#39;s state before it&#39;s saved to the db.  Thanks again!"}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 0, "last_activity_date": 1520452857, "last_edit_date": 1520452857, "creation_date": 1520447015, "answer_id": 49158847, "question_id": 49158408, "link": "https://stackoverflow.com/questions/49158408/rails-string-substitution-or-similar-solution-in-controller/49158847#49158847", "title": "rails string substitution or similar solution in controller", "body": "<p>I would avoid dynamically defining instance variables if you can help it. It can be done with <code>instance_variable_set</code> but it's unnecessary. There's no reason you need to define the variable as <code>@illinois</code> instead of just <code>@user_state</code> or something like that. Here is one way to do it.</p>\n\n<p>First make a static list of states:</p>\n\n<pre><code>def states\n  %{wisconsin arkansas new_york etc}\nend\n</code></pre>\n\n<p>then make a dictionary which maps those states to their classes:</p>\n\n<pre><code>def state_classes\n  states.reduce({}) do |memo, state|\n    memo[state] = state.camelize.constantize\n    memo\n  end\nend\n# = { 'illinois' =&gt; Illinois, 'wisconsin' =&gt; Wisconsin, 'new_york' =&gt; NewYork, etc }\n</code></pre>\n\n<p>It's important that you hard-code a list of state identifiers somewhere, because it's not a good practice to pass arbitrary values to <code>contantize</code>. </p>\n\n<p>Then instantiating the correct class is a breeze:</p>\n\n<pre><code>@user_state = state_classes[@user.state].new(current_user)\n</code></pre>\n\n<p>there are definitely other ways to do this (for example, it could be added on the model layer instead)</p>\n"}], "owner": {"reputation": 313, "user_id": 3763682, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f78eec0fd68366d8b40faacff41433fc?s=128&d=identicon&r=PG&f=1", "display_name": "user3763682", "link": "https://stackoverflow.com/users/3763682/user3763682"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 49158847, "answer_count": 1, "score": 0, "last_activity_date": 1520452857, "creation_date": 1520445368, "question_id": 49158408, "link": "https://stackoverflow.com/questions/49158408/rails-string-substitution-or-similar-solution-in-controller", "title": "rails string substitution or similar solution in controller", "body": "<p>I'm building a site with users in all 50 states.  We need to display information for each user that is specific to their situation, e.g., the number of events they completed in that state.  Each state's view (a partial) displays state-specific information and, therefore, relies upon state-specific calculations in a state-specific model.  We'd like to do something similar to this:</p>\n\n<p>@#{user.state} = #{user.state.capitalize}.new(current_user)</p>\n\n<p>in the users_controller instead of </p>\n\n<pre><code>@illinois = Illinois.new(current_user) if (@user.state == 'illinois')\n.... [and the remaining 49 states]\n@wisconsin = Wisconsin.new(current_user) if (@user.state == 'wisconsin')\n</code></pre>\n\n<p>to trigger the Illinois.rb model and, in turn, drive the view defined in the users_controller by </p>\n\n<pre><code>def user_state_view\n  @user = current_user\n  @events = Event.all\n  @illinois = Illinois.new(current_user) if (@user.state == 'illinois')\nend\n</code></pre>\n\n<p>I'm struggling to find a better way to do this / refactor it.  Thanks! </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "activerecord"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1520443930, "post_id": 49157715, "comment_id": 85320763, "body": "<code>Customer.eager_load(:conditions).find(1)</code>.  This will load the joined tables in the same query. Unlike <code>.joins</code> this uses a left outer join so rows with no matches are also returned. <a href=\"https://blog.bigbinary.com/2013/07/01/preload-vs-eager-load-vs-joins-vs-includes.html\" rel=\"nofollow noreferrer\">blog.bigbinary.com/2013/07/01/&hellip;</a>"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 2, "creation_date": 1520444149, "post_id": 49157715, "comment_id": 85320877, "body": "You should also be aware that the associated records are not included in the output from <code>.inspect</code>. You will get <code>#&lt;Customer id: 1, first_name: &quot;John&quot;, last_name: &quot;Doe&quot;&gt;</code> no matter if the association is loaded or not. Instead you need to call <code>Customer.eager_load(:conditions).find(1).conditions.inspect</code> if you want to debug it."}, {"owner": {"reputation": 45, "user_id": 7254459, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8f8d2da91cb7bdf2b89ca3793734888d?s=128&d=identicon&r=PG&f=1", "display_name": "John Marsh", "link": "https://stackoverflow.com/users/7254459/john-marsh"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1520445620, "post_id": 49157715, "comment_id": 85321766, "body": "Thanks, but in my controller I do: <code>cust = Customer.eager_load(:conditions).find(params[:id])</code> and then <code>render json: cust and return</code>. Still no medical conditions in the result .. as verified by my postman tool"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1520446376, "post_id": 49157715, "comment_id": 85322209, "body": "@JohnMarsh you rennder the <code>cust</code> as json ... but where to you call <code>.conditions</code>?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1520446540, "post_id": 49157715, "comment_id": 85322292, "body": "<code>as_json</code> does not include associations by default. You have to explicitly tell it to include the association. <code>render json: cust, include: [:conditions]</code>"}, {"owner": {"reputation": 45, "user_id": 7254459, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8f8d2da91cb7bdf2b89ca3793734888d?s=128&d=identicon&r=PG&f=1", "display_name": "John Marsh", "link": "https://stackoverflow.com/users/7254459/john-marsh"}, "edited": false, "score": 0, "creation_date": 1520446879, "post_id": 49157715, "comment_id": 85322490, "body": "Ahh that&#39;s where the magic happens. Thanks!!"}], "answers": [{"tags": [], "owner": {"reputation": 4429, "user_id": 102133, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/561a3a55352fe6a5343e541a6894b541?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/102133/ben"}, "is_accepted": false, "score": 0, "last_activity_date": 1520450359, "creation_date": 1520450359, "answer_id": 49159692, "question_id": 49157715, "link": "https://stackoverflow.com/questions/49157715/loading-relations/49159692#49159692", "title": "Loading Relations", "body": "<p>Not really possible via active record, as json offers some cool possibilities : </p>\n\n<pre><code>render json: customers,\n       include: {\n         conditions: {\n           only: [:attr1, :attr2], # filter returned fields\n           methods: [:meth1, :meth2] # if you need model methods\n         },\n         another_joined_model: {\n             except: [:password] # to exclude specific fields\n         }\n       }\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 7254459, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8f8d2da91cb7bdf2b89ca3793734888d?s=128&d=identicon&r=PG&f=1", "display_name": "John Marsh", "link": "https://stackoverflow.com/users/7254459/john-marsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520450359, "creation_date": 1520443040, "question_id": 49157715, "link": "https://stackoverflow.com/questions/49157715/loading-relations", "title": "Loading Relations", "body": "<p><strong>Goal</strong>: I would like to include all of a customers medical conditions as an array in the result of a customer.</p>\n\n<p>for:</p>\n\n<pre><code>cust = Customer.includes(:conditions).find(1)\n</code></pre>\n\n<p>expected result:</p>\n\n<pre><code>#&lt;Customer id: 1, first_name: \"John\", last_name: \"Doe\", conditions [...]&gt;\n</code></pre>\n\n<p>actual result:</p>\n\n<pre><code>#&lt;Customer id: 1, first_name: \"John\", last_name: \"Doe\"&gt;\n</code></pre>\n\n<p><strong>code</strong>:</p>\n\n<p>I have 2 classes and a 3rd join class (ConditionsCustomer). </p>\n\n<pre><code>class Customer &lt; ApplicationRecord\n    has_many :conditions_customers\n    has_many :conditions, through: :conditions_customers\nend\n\n#join table. Contains 2 foreign_keys (customer_id, condition_id)\nclass ConditionsCustomer &lt; ApplicationRecord\n  belongs_to :customer\n  belongs_to :condition\nend\n\nclass Condition &lt; ApplicationRecord\n  has_many :conditions_customers\n  has_many :customers, through: :conditions_customers\nend\n</code></pre>\n\n<p>What's interesting is that I see 3 select queries getting fired (customer, join table and medical conditions table) so I know the includes is somewhat working but unfortunately customer returns without the medical conditions.</p>\n\n<p>I've also tried using a join but I get an array of same customer over and over again.</p>\n\n<p>Is there an easy way to do this with ActiveRecord? I would prefer not having to merge the record manually.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "ruby-on-rails-5", "money-rails"], "comments": [{"owner": {"reputation": 165, "user_id": 9164069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3a76cf933419cf5da005cdc3cc771d5?s=128&d=identicon&r=PG&f=1", "display_name": "neznidalibor", "link": "https://stackoverflow.com/users/9164069/neznidalibor"}, "edited": false, "score": 0, "creation_date": 1520451562, "post_id": 49156927, "comment_id": 85325232, "body": "Shouldn&#39;t the ammount be 100 times greater if you want to do the logic in dollars? It&#39;s even in the name associated to the value <code>transaction_price_cent</code>."}, {"owner": {"reputation": 98, "user_id": 2308172, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Akqyt.jpg?s=128&g=1", "display_name": "naqib83", "link": "https://stackoverflow.com/users/2308172/naqib83"}, "reply_to_user": {"reputation": 165, "user_id": 9164069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3a76cf933419cf5da005cdc3cc771d5?s=128&d=identicon&r=PG&f=1", "display_name": "neznidalibor", "link": "https://stackoverflow.com/users/9164069/neznidalibor"}, "edited": false, "score": 0, "creation_date": 1520452192, "post_id": 49156927, "comment_id": 85325573, "body": "I din get exactly.  Did you mean I have to multiply the price with 100 (I mean make it cents) before sending it to database? I thought the Gem will do that for me."}], "answers": [{"comments": [{"owner": {"reputation": 98, "user_id": 2308172, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Akqyt.jpg?s=128&g=1", "display_name": "naqib83", "link": "https://stackoverflow.com/users/2308172/naqib83"}, "edited": false, "score": 0, "creation_date": 1520458015, "post_id": 49161287, "comment_id": 85328590, "body": "so, when I am sending price, I should be sending in cents?  like if I have $345.23 then I have to send it like 43523? is that what you meant?"}, {"owner": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "reply_to_user": {"reputation": 98, "user_id": 2308172, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Akqyt.jpg?s=128&g=1", "display_name": "naqib83", "link": "https://stackoverflow.com/users/2308172/naqib83"}, "edited": false, "score": 0, "creation_date": 1520458510, "post_id": 49161287, "comment_id": 85328840, "body": "Yes, you also have to save the price in cents. you can do this in a before_save action"}, {"owner": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "reply_to_user": {"reputation": 98, "user_id": 2308172, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Akqyt.jpg?s=128&g=1", "display_name": "naqib83", "link": "https://stackoverflow.com/users/2308172/naqib83"}, "edited": false, "score": 0, "creation_date": 1520458759, "post_id": 49161287, "comment_id": 85328943, "body": "You should also check your migration. In the docs they say something about &quot;*_cents&quot; in the attribute name..."}, {"owner": {"reputation": 98, "user_id": 2308172, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Akqyt.jpg?s=128&g=1", "display_name": "naqib83", "link": "https://stackoverflow.com/users/2308172/naqib83"}, "edited": false, "score": 0, "creation_date": 1520464189, "post_id": 49161287, "comment_id": 85331214, "body": "Hi, I have tried this  <code>before_save :convert_transaction_price def convert_transaction_price    self.transaction_price = (self.transaction_price * 100).to_i end</code> But it still showing me wrong value. Now, it shows me 23400 instead of 23423. am I missing anything?"}, {"owner": {"reputation": 98, "user_id": 2308172, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Akqyt.jpg?s=128&g=1", "display_name": "naqib83", "link": "https://stackoverflow.com/users/2308172/naqib83"}, "edited": false, "score": 0, "creation_date": 1520475461, "post_id": 49161287, "comment_id": 85334171, "body": "Actually I am having exactly this problem: <a href=\"https://github.com/RubyMoney/money-rails/issues/396\" rel=\"nofollow noreferrer\">github.com/RubyMoney/money-rails/issues/396</a> Do you have any solution for that?"}, {"owner": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "reply_to_user": {"reputation": 98, "user_id": 2308172, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Akqyt.jpg?s=128&g=1", "display_name": "naqib83", "link": "https://stackoverflow.com/users/2308172/naqib83"}, "edited": false, "score": 0, "creation_date": 1520476810, "post_id": 49161287, "comment_id": 85334515, "body": "Ok remove the before_save . Are you getting the correct value in cents?"}, {"owner": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "reply_to_user": {"reputation": 98, "user_id": 2308172, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Akqyt.jpg?s=128&g=1", "display_name": "naqib83", "link": "https://stackoverflow.com/users/2308172/naqib83"}, "edited": false, "score": 0, "creation_date": 1520476828, "post_id": 49161287, "comment_id": 85334521, "body": "Let&#39;s hope the authors of the plugin will help"}, {"owner": {"reputation": 98, "user_id": 2308172, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Akqyt.jpg?s=128&g=1", "display_name": "naqib83", "link": "https://stackoverflow.com/users/2308172/naqib83"}, "edited": false, "score": 0, "creation_date": 1520521940, "post_id": 49161287, "comment_id": 85358008, "body": "It doesn&#39;t matter even if I remove the before_save ."}], "tags": [], "owner": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "is_accepted": false, "score": 1, "last_activity_date": 1520458719, "last_edit_date": 1520458719, "creation_date": 1520457193, "answer_id": 49161287, "question_id": 49156927, "link": "https://stackoverflow.com/questions/49156927/money-rails-is-discarding-price-amount-after-decimal-point/49161287#49161287", "title": "Money-Rails is discarding price amount after decimal point", "body": "<p>Your price in cents! And that's ok!</p>\n\n<p>Handling money in cents is a common pattern. It will also save your life when it comes to rounding errors with taxes or currency exchange. Like in their docs mentioned you should use a helper to output the price in a human readable form:</p>\n\n<pre><code>humanized_money @money_object                       # =&gt; 6.50\nhumanized_money_with_symbol @money_object           # =&gt; $6.50\nmoney_without_cents_and_with_symbol @money_object   # =&gt; $6\n</code></pre>\n\n<p>If you accessing the data via an API you could add a human_readable field in your api</p>\n\n<pre><code>def transaction_price_human_readable\n  return humanized_money_with_symbol(@money_object) # or self or...\nend\n</code></pre>\n\n<hr>\n\n<p>Save/Create model: If you get a floating number you could change the floating point into cents before_save</p>\n\n<pre><code>before_save :convert_transaction_price\ndef convert_transaction_price\n   self.transaction_price = (self.transaction_price * 100).to_i\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 147, "user_id": 2172086, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4fiTs.png?s=128&g=1", "display_name": "xpnimi", "link": "https://stackoverflow.com/users/2172086/xpnimi"}, "is_accepted": false, "score": 0, "last_activity_date": 1610654844, "last_edit_date": 1610654844, "creation_date": 1610630165, "answer_id": 65719710, "question_id": 49156927, "link": "https://stackoverflow.com/questions/49156927/money-rails-is-discarding-price-amount-after-decimal-point/65719710#65719710", "title": "Money-Rails is discarding price amount after decimal point", "body": "<p>I had the same problem.<br />\n<strong>(EDITED NEW AND CORRECT ANSWER):</strong></p>\n<p>All I had to do was to use the provided attribute from the money-rails gem. In my case I had an <code>amount_cents</code> attribute, and I had to use the provided <code>:amount</code> attribute in the form.</p>\n<pre><code>&lt;%= f.label :amount %&gt;\n&lt;%= f.text_field :amount %&gt;\n\n</code></pre>\n<p><strong>NOTE:</strong> I converted the value of <code>:amount_cents</code> to a float string in the <code>edit.html.erb</code> as followed:</p>\n<pre><code>&lt;%= f.label :amount %&gt;\n&lt;%= f.text_field :amount, value: number_with_precision(f.object.amount_cents / 100, precision: 2).gsub(/\\./, ',') %&gt;\n</code></pre>\n<p>(<strong>also note</strong> that I had configured money-rails to use EUROs which use &quot;,&quot; as delimiter, thats why i have to use <code>.gsbu(/\\./, ',')</code>)</p>\n<p>And here ist the <strong>IMPORTANT PART</strong>, I had to update my <strong>strong_parameters</strong> in the controller to permit <code>:amount</code>, and not <code>:amount_cents</code></p>\n<pre><code>    private\n\n        def invoice_params\n            params.require(:invoice).permit(\u2026, :amount, \u2026)\n        end     \n</code></pre>\n<p>--</p>\n<p><strong>(OLD ANSWER):</strong><br />\nI came to the conclusion that it is best to change the input value directly in the Frontend to cents. And then send the cents to the backend.</p>\n<p>Here is a nice Stimulus Controller which does exactly that: <a href=\"https://gist.github.com/psergi/72f99b792a967525ffe2e319cf746101\" rel=\"nofollow noreferrer\">https://gist.github.com/psergi/72f99b792a967525ffe2e319cf746101</a><br />\n(You may need to update that gist to your liking, and also it expects that you use Stimulus in your rails project)</p>\n<p>(I leave the old answer in here, because I think it is a good practice to send _cents  from the frontend to the backend, but in the moment it is not necessary [for me]. If you want to support more than one currency, you probably want to do it like that and use a .js framework to handle the input conversion -&gt; s.th. like <a href=\"http://autonumeric.org/\" rel=\"nofollow noreferrer\">http://autonumeric.org/</a>)</p>\n"}], "owner": {"reputation": 98, "user_id": 2308172, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Akqyt.jpg?s=128&g=1", "display_name": "naqib83", "link": "https://stackoverflow.com/users/2308172/naqib83"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 985, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1610654844, "creation_date": 1520440443, "last_edit_date": 1520451331, "question_id": 49156927, "link": "https://stackoverflow.com/questions/49156927/money-rails-is-discarding-price-amount-after-decimal-point", "title": "Money-Rails is discarding price amount after decimal point", "body": "<p>I am building and Rails 5 API where I am trying to send money amount and store it in PostgresQL database. I am sending amount 2.4 but I see in database only 2 is stored. what I am doing wrong? </p>\n\n<p>my migration: </p>\n\n<pre><code>class CreateTransactions &lt; ActiveRecord::Migration[5.1]\n  def change\n  create_table :transactions do |t|\n   t.monetize :transaction_price, amount: { null: true, default: nil }\n   t.timestamps\n  end\n end\nend\n</code></pre>\n\n<p>my model is: </p>\n\n<pre><code>class Transaction &lt; ApplicationRecord\n  monetize :transaction_price_cents\nend\n</code></pre>\n\n<p>my controller: </p>\n\n<pre><code>class TransactionsController &lt; ApiController\n      def create\n        transaction = Transaction.new(transaction_param)\n        if transaction.save\n          render json: { status: 'SUCCESS', data:transaction }, status: :ok\n        end\n      end\n\n      private\n      def transaction_param\n        params.require(:transaction).permit(:transaction_price_cents)\n      end\nend\n</code></pre>\n\n<p>I am sending this json with postman: </p>\n\n<pre><code>{\n    \"transaction_price_cents\": 345.23\n}\n</code></pre>\n\n<p>What I am getting in response: </p>\n\n<pre><code>{\n    \"status\": \"SUCCESS\",\n    \"data\": {\n        \"id\": 1,\n        \"transaction_price_cents\": 345,\n        \"transaction_price_currency\": \"USD\",\n    }\n}\n</code></pre>\n\n<p>I either want 345.23 or 34523 but its giving me only 345!</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "factory-bot", "rspec-rails"], "comments": [{"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1520437001, "post_id": 49155533, "comment_id": 85316074, "body": "<code>@company</code> is AR or FB object?"}, {"owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "edited": false, "score": 0, "creation_date": 1520437361, "post_id": 49155533, "comment_id": 85316328, "body": "use Sequences (<a href=\"https://github.com/thoughtbot/factory_bot/blob/master/GETTING_STARTED.md#sequences\" rel=\"nofollow noreferrer\">github.com/thoughtbot/factory_bot/blob/master/&hellip;</a>)  instead of random numbers with fingers crossed hoping you&#39;ll be lucky and it&#39;s really unique"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8532257, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LGHuQx40AbY/AAAAAAAAAAI/AAAAAAAAAAk/DL3SgwQZ2Fo/photo.jpg?sz=128", "display_name": "Dmitry Gusev", "link": "https://stackoverflow.com/users/8532257/dmitry-gusev"}, "edited": false, "score": 0, "creation_date": 1520440786, "post_id": 49155952, "comment_id": 85318751, "body": "I need sent company to billing_batch, not to customer"}, {"owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "reply_to_user": {"reputation": 11, "user_id": 8532257, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LGHuQx40AbY/AAAAAAAAAAI/AAAAAAAAAAk/DL3SgwQZ2Fo/photo.jpg?sz=128", "display_name": "Dmitry Gusev", "link": "https://stackoverflow.com/users/8532257/dmitry-gusev"}, "edited": false, "score": 0, "creation_date": 1520440916, "post_id": 49155952, "comment_id": 85318841, "body": "ah, Did you try <code>association :company</code> ?"}], "tags": [], "owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "is_accepted": false, "score": 0, "last_activity_date": 1520437526, "creation_date": 1520437526, "answer_id": 49155952, "question_id": 49155533, "link": "https://stackoverflow.com/questions/49155533/factorygirl-assign-attribute-to-aliase/49155952#49155952", "title": "FactoryGirl assign attribute to aliase", "body": "<p>I would try this: </p>\n\n<pre><code>factory :customer do\n    name { \"Name-#{rand(9999)}#{rand(9999)}#{rand(9999)}#{rand(9999)}\" }\n    billing_batch\n    company { billing_batch.company || build(:company) }\n    end\nend\n</code></pre>\n\n<p>I'm afk and can't test, but something like this should work. </p>\n"}], "owner": {"reputation": 11, "user_id": 8532257, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LGHuQx40AbY/AAAAAAAAAAI/AAAAAAAAAAk/DL3SgwQZ2Fo/photo.jpg?sz=128", "display_name": "Dmitry Gusev", "link": "https://stackoverflow.com/users/8532257/dmitry-gusev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520437526, "creation_date": 1520436330, "last_edit_date": 1520436460, "question_id": 49155533, "link": "https://stackoverflow.com/questions/49155533/factorygirl-assign-attribute-to-aliase", "title": "FactoryGirl assign attribute to aliase", "body": "<p>I write rspecs for Rails4 app and faced with issue in factory aliases</p>\n\n<p>I have that factory:</p>\n\n<pre><code>factory :customer do\n    name { \"Name-#{rand(9999)}#{rand(9999)}#{rand(9999)}#{rand(9999)}\" }\n    billing_batch\n    company\n    end\nend\n\n\nfactory :billing_batch do\n    batch { \"Default-#{rand(9999)}#{rand(9999)}#{rand(9999)}#{rand(9999)}\" }\n    company\nend\n</code></pre>\n\n<p>If I create customer for particular company\n<code>create(:customer, company: @company)</code> if will create billing_batch and assign it to customer (that part is correct), but also it create an extra company.</p>\n\n<p>How can I specify in customer factory billing batch aliase company?</p>\n"}, {"tags": ["ruby", "rspec", "argument-matcher"], "answers": [{"tags": [], "owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "is_accepted": false, "score": 0, "last_activity_date": 1520436099, "creation_date": 1520436099, "answer_id": 49155451, "question_id": 49154632, "link": "https://stackoverflow.com/questions/49154632/rspec-matcher-for-any-one-of/49155451#49155451", "title": "Rspec Matcher for &quot;any_one_of&quot;?", "body": "<p>I would go with a custom matcher as it looks very unusual. </p>\n\n<p>The <code>piped||arguments||approach</code> obviously doesn't work, because it returns first non-false element. In your case whichever of the doubles is first in the pipe <code>||</code> order.</p>\n\n<p>Also, it makes me wonder why you need something like this, don't you have full control over your specs? Why would BarGetter.fetch_bar be called with not deterministically (randomly?) chosen object?</p>\n\n<p>Maybe one of the other matchers from here <a href=\"https://relishapp.com/rspec/rspec-mocks/v/3-7/docs/setting-constraints/matching-arguments\" rel=\"nofollow noreferrer\">https://relishapp.com/rspec/rspec-mocks/v/3-7/docs/setting-constraints/matching-arguments</a>\ni.e</p>\n\n<pre><code>expect(BarGetter).to receive(:fetch_bar).with(instance_of(Foo))\n</code></pre>\n\n<p>would fit your specs better?</p>\n"}, {"tags": [], "owner": {"reputation": 24667, "user_id": 797303, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DahZJ.jpg?s=128&g=1", "display_name": "Maxim Krizhanovsky", "link": "https://stackoverflow.com/users/797303/maxim-krizhanovsky"}, "is_accepted": false, "score": 0, "last_activity_date": 1520850956, "creation_date": 1520850956, "answer_id": 49233103, "question_id": 49154632, "link": "https://stackoverflow.com/questions/49154632/rspec-matcher-for-any-one-of/49233103#49233103", "title": "Rspec Matcher for &quot;any_one_of&quot;?", "body": "<p>When the existing matchers do not cover your requirements, you can pass a block to the expectation and run expect on the arguments</p>\n\n<pre><code>expect(BarGetter).to receive(:fetch_bar) do |arg|\n  expect([condition1, condition2, condition3]).to include(arg)\nend\n</code></pre>\n"}], "owner": {"reputation": 17178, "user_id": 61592, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/55ff1426273f950b43135f619d025476?s=128&d=identicon&r=PG", "display_name": "Todd R", "link": "https://stackoverflow.com/users/61592/todd-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 352, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1520850956, "creation_date": 1520433900, "question_id": 49154632, "link": "https://stackoverflow.com/questions/49154632/rspec-matcher-for-any-one-of", "title": "Rspec Matcher for &quot;any_one_of&quot;?", "body": "<p>A Ruby spec defines 3 instance_doubles:</p>\n\n<pre><code>let(:doub1) { instance_double(Foo) }\nlet(:doub2) { instance_double(Foo) }\nlet(:doub3) { instance_double(Foo) }\n</code></pre>\n\n<p>A shared_example seeks to ensure a collaborator is used with any of the instance_doubles:</p>\n\n<pre><code>shared_examples :a_consumer_of_bars do\n  it \"passes a Foo to the BarGetter\" do\n    expect(BarGetter).to receive(:fetch_bar)\n      .with((condition1 || condition2 || condition3)).at_least(:once)\n    subject\n  end\nend\n</code></pre>\n\n<p>The (piped||arguments||approach) does not work. Is there an existing rspec matcher for checking whether an argument matches an element of an array? Or is writing a custom matcher the way to go?</p>\n"}, {"tags": ["ruby", "popen"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1520433711, "post_id": 49154475, "comment_id": 85313553, "body": "<a href=\"http://ruby-doc.org/core/IO.html#method-i-gets\" rel=\"nofollow noreferrer\"><code>IO.gets</code></a> returns <code>nil</code> when called on the end of file. I have no idea how <code>Open3.popen2</code> handles the stream, but it looks like it thinks that <code>node</code> has flushed the output."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1520434041, "post_id": 49154475, "comment_id": 85313786, "body": "It&#39;d help tremendously if we could reproduce this. Can you cook up a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1520440217, "post_id": 49154475, "comment_id": 85318374, "body": "Why not just <code>res = o.read</code>?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1520447026, "post_id": 49154475, "comment_id": 85322580, "body": "Note that <code>res &lt;&lt; line</code> is more efficient than <code>res = res + line</code> because it appends to an existing string instead of making a whole new one."}], "owner": {"reputation": 2159, "user_id": 4898937, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/iwgDT.jpg?s=128&g=1", "display_name": "ciaoben", "link": "https://stackoverflow.com/users/4898937/ciaoben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1520433380, "creation_date": 1520433380, "question_id": 49154475, "link": "https://stackoverflow.com/questions/49154475/why-long-output-gets-truncated-when-using-popen-in-ruby", "title": "Why long output gets truncated when using popen in ruby?", "body": "<p>I run a script that returns a long JSON on stdout, but apparently it is truncated:</p>\n\n<pre><code>res = ''\nOpen3.popen2('node script.js') {|i,o,t|\n  while line = o.gets\n    res = res + line\n  end\n}\nputs res # it is truncated\n</code></pre>\n\n<p>Why? How can I avoid it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1520441761, "post_id": 49154956, "comment_id": 85319387, "body": "You might consider adding the delegation that allows for <code>receipt_ingredient.name</code> to your answer so it&#39;s clear to the OP."}], "tags": [], "owner": {"reputation": 667, "user_id": 6141597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d52107448cce3dc1010f66ceb534270?s=128&d=identicon&r=PG&f=1", "display_name": "abax", "link": "https://stackoverflow.com/users/6141597/abax"}, "is_accepted": false, "score": 0, "last_activity_date": 1520443096, "last_edit_date": 1520443096, "creation_date": 1520434789, "answer_id": 49154956, "question_id": 49154368, "link": "https://stackoverflow.com/questions/49154368/updating-a-form-updates-all-records-of-a-particular-instance/49154956#49154956", "title": "Updating a form, updates all records of a particular instance", "body": "<p>It looks like this is the problem area:</p>\n\n<pre><code>class Ingredient &lt; ApplicationRecord\n\ndef quantity\n  recipe_ingredient = RecipeIngredient.find_by(recipe_id: \n  self.recipes.first.id, ingredient_id: self.id)\n  recipe_ingredient.quantity\nend\n</code></pre>\n\n<p><code>&lt;%=ingredient.quantity%&gt;</code> will return the quantity of the first recipe to use the ingredient no matter the recipe. I think you should be accessing the <code>recipe_ingerdient.quantity</code> instead.</p>\n\n<pre><code>&lt;% @recipe.recipe_ingredients.each do |recipe_ingredient|%&gt;\n  &lt;li&gt;&lt;%=recipe_ingredient.name %&gt; - &lt;%=recipe_ingredient.quantity%&gt;&lt;/li&gt;\n&lt;%end%&gt;\n</code></pre>\n\n<p>as it looks like the quantity for each recipe is saved in the <code>recipe_ingredient</code> join table.</p>\n\n<p>Edit: This approach would require adding <code>delegate :name, to: :ingredient</code> to <code>class RecipeIngredient</code></p>\n"}, {"comments": [{"owner": {"reputation": 667, "user_id": 6141597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d52107448cce3dc1010f66ceb534270?s=128&d=identicon&r=PG&f=1", "display_name": "abax", "link": "https://stackoverflow.com/users/6141597/abax"}, "edited": false, "score": 0, "creation_date": 1520438934, "post_id": 49155855, "comment_id": 85317506, "body": "Perhaps my idea of the schema is off. Can you explain your thought process behind the use of <code>Ingredient#quantity_for</code> instead of reading directly from the <code>recipe_ingredients</code> table which holds the quantity value for that particular recipe? I guess you have to access both models at some point, one for the name and the other for the quantity so maybe it&#39;s splitting hairs. Just wondering."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 667, "user_id": 6141597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d52107448cce3dc1010f66ceb534270?s=128&d=identicon&r=PG&f=1", "display_name": "abax", "link": "https://stackoverflow.com/users/6141597/abax"}, "edited": false, "score": 0, "creation_date": 1520440439, "post_id": 49155855, "comment_id": 85318514, "body": "IMO, you want your view to know as little about your models as possible. Your view, for instance, shouldn&#39;t need to know there is a thing called <code>receipt_ingredient</code> and that <code>recipe_ingredient</code> contains <code>quantity</code>. Also, I believe that <code>recipe_ingredient</code> doesn&#39;t hold the value <code>name</code>. So, you can&#39;t do <code>recipe_ingredient.name</code> as in your solution. You would have to do <code>recipe_ingredient.ingredient.name</code>. And now your view needs to know <b>A LOT</b> about how your models are organized. By doing <code>ingredient.quantity_for(@recipe)</code>, your view needs to know less about how your models are organized."}, {"owner": {"reputation": 667, "user_id": 6141597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d52107448cce3dc1010f66ceb534270?s=128&d=identicon&r=PG&f=1", "display_name": "abax", "link": "https://stackoverflow.com/users/6141597/abax"}, "edited": false, "score": 0, "creation_date": 1520441231, "post_id": 49155855, "comment_id": 85319053, "body": "I agree with you on the view becoming too complex. I still like the <code>recipe_ingredient</code> idea in general and I think I&#39;d address the view concern by sticking with <code>recipe_ingredient.name</code> and <code>delegate :name, to: :ingredient</code>"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 667, "user_id": 6141597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d52107448cce3dc1010f66ceb534270?s=128&d=identicon&r=PG&f=1", "display_name": "abax", "link": "https://stackoverflow.com/users/6141597/abax"}, "edited": false, "score": 0, "creation_date": 1520441705, "post_id": 49155855, "comment_id": 85319348, "body": "I hear you. And, I do think there is a fair bit of preference involved here. What happens if you later decide to change <code>ingredient.name</code> to <code>ingredient.long_name</code> (and add <code>ingredient.short_name</code>)? In that case, you would have to remember to make changes to your <code>delegate</code> directive in <code>recipe_ingredient</code>. Personally, I try to go for as little coupling as possible. But, again, I feel that is a matter of personal preference. Your solution works great."}, {"owner": {"reputation": 667, "user_id": 6141597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d52107448cce3dc1010f66ceb534270?s=128&d=identicon&r=PG&f=1", "display_name": "abax", "link": "https://stackoverflow.com/users/6141597/abax"}, "edited": false, "score": 1, "creation_date": 1520441961, "post_id": 49155855, "comment_id": 85319548, "body": "Great point. I&#39;m definitely still learning when it comes to having a maintenance perspective. Thanks for circling back, I&#39;ve appreciated the exchange."}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 0, "last_activity_date": 1520441260, "last_edit_date": 1520441260, "creation_date": 1520437259, "answer_id": 49155855, "question_id": 49154368, "link": "https://stackoverflow.com/questions/49154368/updating-a-form-updates-all-records-of-a-particular-instance/49155855#49155855", "title": "Updating a form, updates all records of a particular instance", "body": "<p>Just to riff on abax's answer a bit. I think I would do something like: </p>\n\n<pre><code>class Ingredient &lt; ApplicationRecord\n  has_many :recipe_ingredients\n  has_many :recipes, through: :recipe_ingredients\n\n  def self.alphabetize\n    self.order(name: :asc)\n  end\n\n  def quantity_for(recipe)\n    recipe_ingredients.where(recipe: recipe).first.quantity\n  end\n\nend\n</code></pre>\n\n<p>Which you would use something like:</p>\n\n<pre><code>&lt;% @recipe.ingredients.each do |ingredient|%&gt;\n  &lt;li&gt;\n    &lt;%= ingredient.name %&gt; - &lt;%= ingredient.quantity_for(@recipe) %&gt;\n  &lt;/li&gt;\n&lt;%end%&gt;\n</code></pre>\n\n<p>IMO, <code>ingredient.quantity_for(@recipe)</code> indicates very clearly what's going on: the <code>ingredient</code> is returning the <code>quantity_for</code> a particular <code>@recipe</code>. </p>\n\n<p>BTW, this: </p>\n\n<pre><code>def quantity\n  recipe_ingredient = RecipeIngredient.find_by(\n    recipe_id: self.recipes.first.id, \n    ingredient_id: self.id\n  )\n  recipe_ingredient.quantity\nend\n</code></pre>\n\n<p>Is all sorts of wrong. In addition to the problem identified by abax, you don't need to do </p>\n\n<pre><code>RecipeIngredient.find_by(ingredient_id: self.id)\n</code></pre>\n\n<p>That's why you did <code>has_many recipe_ingredients</code>! So that you can simply do: </p>\n\n<pre><code>recipe_ingredients.where(recipe: recipe)\n</code></pre>\n\n<p>And, note that when you do associations, you don't have to say <code>recipe_id: recipe.id</code>. Rails allows you to simply do <code>recipe: recipe</code>. Less typing. Fewer typos.</p>\n\n<p>Finally, this assignment: </p>\n\n<pre><code>recipe_ingredient = RecipeIngredient.find_by(...)\n</code></pre>\n\n<p>Isn't necessary. You could just do:</p>\n\n<pre><code>RecipeIngredient.find_by(\n  recipe:     recipe,\n  ingredient: self\n).quantity\n</code></pre>\n\n<p>Which, of course, you would never do. Because, as above, it's much nicer to do:</p>\n\n<pre><code>recipe_ingredients.where(recipe: recipe).first.quantity\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1520446355, "creation_date": 1520446355, "answer_id": 49158664, "question_id": 49154368, "link": "https://stackoverflow.com/questions/49154368/updating-a-form-updates-all-records-of-a-particular-instance/49158664#49158664", "title": "Updating a form, updates all records of a particular instance", "body": "<p>I would start with a more modest goal to start with - just to let users create nested RecipeIngedients:</p>\n\n<pre><code>&lt;%= form_for(@recipe) do |f| %&gt;\n  &lt;%= fields_for(:recipe_ingredients) do |ri| %&gt;\n    &lt;%= ri.collection_select(:ingredient_id, Ingredient.all, :id, :name) %&gt;\n    &lt;%= ri.text_field(:quantity) %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt; \n</code></pre>\n\n<hr>\n\n<pre><code>class Recipe &lt; ApplicationRecord\n  # ...\n  accepts_nested_attributes_for :recipe_ingredients\nend\n</code></pre>\n\n<hr>\n\n<pre><code>def recipe_attributes\n  params.require(:recipe).permit(:foo, :bar, recipe_ingredient_attributes: [:ingredient_id, :quantity])\nend\n</code></pre>\n\n<p>You can then expand this by using an additional level of nested attributes:</p>\n\n<pre><code>&lt;%= form_for(@recipe) do |f| %&gt;\n  &lt;%= f.fields_for(:recipe_ingredients) do |ri| %&gt;\n    &lt;div class=\"recipe-ingredient\"&gt;\n      &lt;%= ri.collection_select(:ingredient_id, Ingredient.all, :id, :name) %&gt;\n      &lt;%= ri.fields_for(:ingredient) |ingredient| %&gt;\n        &lt;%= ingredient.text_field :name %&gt;\n      &lt;% end %&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<hr>\n\n<pre><code>class RecipeIngredient &lt; ApplicationRecord\n  # ...\n  accepts_nested_attributes_for :ingredient, reject_if: [:ingredient_exists?, \n\n  private\n\n  def ingredient_exists?(attributes)\n    Ingredient.exists?(name: attributes[:name])\n  end\n\n  def ingredient_set?(attributes)\n    self.ingredient.nil?\n  end\nend\n</code></pre>\n\n<hr>\n\n<pre><code>def recipe_attributes\n  params.require(:recipe)\n        .permit(:foo, :bar, \n          recipe_ingredients_attributes: [:ingredient_id, :quantity, { ingredient_attributes: [:name] }]\n        )\nend\n</code></pre>\n\n<p>But using nested attributes more than one level down usually turns into a real mess since you\u00b4re stuffing so much functionality down into a single controller. A better alternative both from the the programming and UX perspective might be to use ajax to setup an autocomplete and create the records on the fly by POST'ing to <code>/ingredients</code>.</p>\n"}], "owner": {"reputation": 19, "user_id": 9383539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d15f52f7099caf72a83991f6a7929eb0?s=128&d=identicon&r=PG", "display_name": "user9383539", "link": "https://stackoverflow.com/users/9383539/user9383539"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1520446355, "creation_date": 1520433081, "question_id": 49154368, "link": "https://stackoverflow.com/questions/49154368/updating-a-form-updates-all-records-of-a-particular-instance", "title": "Updating a form, updates all records of a particular instance", "body": "<p>So I am working on a recipe book rails application. A user can create a recipe, view the recipe, and update the recipe. However, when I update a particular ingredient's quantity (i.e. Pasta \"2 Cups\" ) it changes all the other recipes that contain pasta to that new quantity (\"2 Cups\"). I can see in my rails console and server that it recognizes the change and updates, but when I display the view it looks as if it displays the first instance of the ingredient and not the one that I just updated. I have a strong feeling that it is an error with my quantity method in ingredients, but i'm not sure how to fix it. </p>\n\n<p>Recipe Model</p>\n\n<pre><code>class Recipe &lt; ApplicationRecord\n    belongs_to :user, required: false\n    has_many :recipe_ingredients\n    has_many :ingredients, through: :recipe_ingredients\n\n    validates :name, presence: true\n    validates :instructions, presence: true\n    validates :cooktime, presence: true\n\n    def self.alphabetize\n     self.order(name: :asc)\n    end\n\n    def ingredients_attributes=(ingredients_attributes)\n      self.ingredients = []\n      ingredients_attributes.values.each do |ingredients_attribute|\n      if !ingredients_attribute[:name].empty?\n          new_ingredient = Ingredient.find_or_create_by(name: \n           ingredients_attribute[:name])\n          self.recipe_ingredients.build(ingredient_id: new_ingredient.id, \n          quantity: ingredients_attribute[:quantity])\n          end\n       end\n     end\n    end\n</code></pre>\n\n<p>Ingredients Model </p>\n\n<pre><code>   class Ingredient &lt; ApplicationRecord\n      has_many :recipe_ingredients\n      has_many :recipes, through: :recipe_ingredients\n\n      def self.alphabetize\n        self.order(name: :asc)\n      end\n\n      def quantity\n        recipe_ingredient = RecipeIngredient.find_by(recipe_id: \n         self.recipes.first.id, ingredient_id: self.id)\n        recipe_ingredient.quantity\n      end\n     end\n</code></pre>\n\n<p>Recipe Show, Edit and Update Actions:</p>\n\n<pre><code>  def show\n    @recipe = Recipe.find(params[:id])\n    @ingredients = @recipe.ingredients.alphabetize\n  end\n\n  def edit\n    @recipe = Recipe.find(params[:id])\n  end\n\n  def update\n     @recipe = Recipe.find(params[:id])\n     if @recipe.user = current_user\n       if @recipe.update(recipe_params)\n        redirect_to @recipe\n       else\n         render :edit\n       end\n    end\n  end\n</code></pre>\n\n<p>views/recipes/show (ingredients - quantity) listing:</p>\n\n<pre><code>  &lt;% @recipe.ingredients.each do |ingredient|%&gt;\n    &lt;li&gt;&lt;%=ingredient.name %&gt; - &lt;%=ingredient.quantity%&gt;&lt;/li&gt;\n  &lt;%end%&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1520433113, "post_id": 49154109, "comment_id": 85313129, "body": "Your routes are messed up if it&#39;s using the &quot;show&quot; action on the profiles/new url.  Post your routes please"}, {"owner": {"reputation": 1, "user_id": 6875214, "user_type": "registered", "profile_image": "https://graph.facebook.com/1377976142230108/picture?type=large", "display_name": "Mark Billes", "link": "https://stackoverflow.com/users/6875214/mark-billes"}, "reply_to_user": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1520433973, "post_id": 49154109, "comment_id": 85313733, "body": "Rails.application.routes.draw do      devise_for :users   root &#39;jobs#index&#39;    resources :jobs   resources :profiles   end"}, {"owner": {"reputation": 446, "user_id": 6298150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cac2b85cf603248a2fd6fd7ac4c6fdd9?s=128&d=identicon&r=PG&f=1", "display_name": "Yechiel K", "link": "https://stackoverflow.com/users/6298150/yechiel-k"}, "edited": false, "score": 0, "creation_date": 1520434580, "post_id": 49154109, "comment_id": 85314140, "body": "What&#39;s the output when you run <code>rake routes</code> in the terminal?"}, {"owner": {"reputation": 1, "user_id": 6875214, "user_type": "registered", "profile_image": "https://graph.facebook.com/1377976142230108/picture?type=large", "display_name": "Mark Billes", "link": "https://stackoverflow.com/users/6875214/mark-billes"}, "edited": false, "score": 0, "creation_date": 1520434903, "post_id": 49154109, "comment_id": 85314397, "body": "new_profile GET    /profiles/new(.:format)        profiles#new"}, {"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1520434944, "post_id": 49154109, "comment_id": 85314434, "body": "<code>profile_path(current_user.profile)</code> &lt;- What is <code>current_user.profile</code>? Is this an id or a string? I&#39;ve seen this error before when you use something like <code>profile&#47;mark</code> instead of <code>profile&#47;1</code>. If you have something like friendly_id gem, it assumes the string is an id, and you need to update your routes."}, {"owner": {"reputation": 1, "user_id": 6875214, "user_type": "registered", "profile_image": "https://graph.facebook.com/1377976142230108/picture?type=large", "display_name": "Mark Billes", "link": "https://stackoverflow.com/users/6875214/mark-billes"}, "edited": false, "score": 0, "creation_date": 1520435060, "post_id": 49154109, "comment_id": 85314516, "body": "I dont use friendly_id. I assume it&#39;s an id?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1520435452, "post_id": 49154109, "comment_id": 85314839, "body": "run <code>rake routes</code> and add the output to the question itself. Although the routes posted look fine there is a ordering error in the routes if <code>&#47;profiles&#47;new</code> is being matched to the show action."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1520435585, "post_id": 49154109, "comment_id": 85314947, "body": "Also don&#39;t use blank here - its for testing user input strings. You want to use <code>if current_user.profile</code> and flip the order of the if and else."}, {"owner": {"reputation": 1, "user_id": 6875214, "user_type": "registered", "profile_image": "https://graph.facebook.com/1377976142230108/picture?type=large", "display_name": "Mark Billes", "link": "https://stackoverflow.com/users/6875214/mark-billes"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1520435655, "post_id": 49154109, "comment_id": 85315008, "body": "I tried it, still not working @max"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1520436831, "post_id": 49154109, "comment_id": 85315958, "body": "Thats puzzling. It looks completely fine. I would try isolating the problem. If getting <code>&#47;profiles&#47;new</code> in a browser gives you this issue you can remove the view from the equation completely. <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}], "owner": {"reputation": 1, "user_id": 6875214, "user_type": "registered", "profile_image": "https://graph.facebook.com/1377976142230108/picture?type=large", "display_name": "Mark Billes", "link": "https://stackoverflow.com/users/6875214/mark-billes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 193, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520435629, "creation_date": 1520432350, "last_edit_date": 1520435629, "question_id": 49154109, "link": "https://stackoverflow.com/questions/49154109/missing-required-keys-id", "title": "missing required keys: [:id]", "body": "<p>I try to link to a Users profile within my navigation partial.</p>\n\n<pre><code>&lt;% if user_signed_in?  %&gt;\n      concat &lt;li&gt;&lt;%= link_to 'Neues Jobangebot einstellen', new_job_path %&gt;\n      &lt;/li&gt;\n      &lt;% if current_user.profile.blank? %&gt;\n        &lt;li&gt;&lt;%= link_to 'New Profile' , new_profile_path %&gt;&lt;/li&gt;\n        &lt;% else %&gt;\n        &lt;li&gt;&lt;%= link_to 'My Profile', profile_path(current_user.profile) %&gt;\n      &lt;/li&gt;\n      &lt;% end %&gt;\n\n        &lt;li&gt;&lt;%= link_to 'Logout', destroy_user_session_path, method: :delete \n      %&gt;&lt;/li&gt;\n      &lt;% else %&gt;\n        &lt;li&gt;&lt;%= link_to 'Login', new_user_session_path %&gt;\n        &lt;li&gt;&lt;%= link_to 'Register', new_user_registration_path %&gt;\n      &lt;% end %&gt;\n</code></pre>\n\n<p>For example, when I try to navigate to <strong>profiles/new</strong>\nIt gives me the error: <strong>No route matches {:action=>\"show\", :controller=>\"profiles\", :id=>nil} missing required keys: [:id]</strong> .</p>\n\n<p>But in my conditional it should't even run the code when the User has no profile yet.\nIs something wrong with the conditional itself? What am I missing?</p>\n\n<p><strong>Profiles Controller</strong></p>\n\n<pre><code>class ProfilesController &lt; ApplicationController\nbefore_action :set_profile, only: [:show, :edit, :update, :destroy]\naccess all: [:show, :index], user: :all, site_admin: :all\n\n\ndef index\n    @profiles = Profile.all.page(params[:page]).per(10)\nend\n\ndef new\n  if current_user.profile.blank?\n    @profile = current_user.build_profile\n  else\n    redirect_to root_path\n    flash[:notice] = \"Du besitzt bereits ein Profil\"\n  end\nend\n\ndef create\n    @profile = current_user.build_profile(profile_params)\n    if @profile.save\n        redirect_to @profile\n    else\n        flash[:notice] = \"Das Profil konnte nicht erstellt werden, bitte \n        f\u00fclle alle Felder aus!\"\n        render 'new'\n    end\nend\n\ndef show\nend\n\ndef edit\nend\n\ndef update\n  respond_to do |format|\n    if @profile.update(profile_params)\n      format.html { redirect_to @profile, notice: 'Profile was successfully \n      updated.' }\n      format.json { render :show, status: :ok, location: @profile }\n    else\n      format.html { render :edit }\n      format.json { render json: @profile.errors, status: \n      :unprocessable_entity }\n    end\n  end\nend\n\ndef destroy\n@profile.destroy\n  respond_to do |format|\n    format.html { redirect_to profiles_url, notice: 'Profile was \n    successfully destroyed.' }\n    format.json { head :no_content }\n  end\nend\n\nprivate\n\ndef profile_params\n    params.require(:profile).permit(:Titel, :Beschreibung, :Name, \n:profileavatar)\nend\n\ndef set_profile\n    @profile = Profile.find(params[:id])\nend\n</code></pre>\n\n<p>end</p>\n\n<pre><code>My routes are **default resources** \n\nRails.application.routes.draw do\n\n  devise_for :users\n  root 'jobs#index'\n\n  resources :jobs\n  resources :profiles\n\n\nend\n</code></pre>\n\n<p><strong>raked routes</strong></p>\n\n<pre><code>                root GET    /                              jobs#index\n                jobs GET    /jobs(.:format)                jobs#index\n                     POST   /jobs(.:format)                jobs#create\n             new_job GET    /jobs/new(.:format)            jobs#new\n            edit_job GET    /jobs/:id/edit(.:format)       jobs#edit\n                 job GET    /jobs/:id(.:format)            jobs#show\n                     PATCH  /jobs/:id(.:format)            jobs#update\n                     PUT    /jobs/:id(.:format)            jobs#update\n                     DELETE /jobs/:id(.:format)            jobs#destroy\n            profiles GET    /profiles(.:format)            profiles#index\n                     POST   /profiles(.:format)            profiles#create\n         new_profile GET    /profiles/new(.:format)        profiles#new\n        edit_profile GET    /profiles/:id/edit(.:format)   profiles#edit\n             profile GET    /profiles/:id(.:format)        profiles#show\n                     PATCH  /profiles/:id(.:format)        profiles#update\n                     PUT    /profiles/:id(.:format)        profiles#update\n                     DELETE /profiles/:id(.:format)        profiles#destroy\n</code></pre>\n\n<p>Haven't found a working solution, thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 0, "creation_date": 1520436206, "post_id": 49155419, "comment_id": 85315452, "body": "Can you please explain what this does? Like what fields are being indexed? I know the primary key is already indexed but does this just index the foreign key <code>user_id</code> in the orders table?"}, {"owner": {"reputation": 580, "user_id": 5041876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/942018cf0f020de80bef0fbdf4a882f8?s=128&d=identicon&r=PG&f=1", "display_name": "NiftyAsp", "link": "https://stackoverflow.com/users/5041876/niftyasp"}, "reply_to_user": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 0, "creation_date": 1520437347, "post_id": 49155419, "comment_id": 85316319, "body": "<a href=\"http://www.rakeroutes.com/blog/increase-rails-performance-with-database-indexes/\" rel=\"nofollow noreferrer\">rakeroutes.com/blog/&hellip;</a> check out this, it has a pretty good explanation of indexing"}, {"owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 0, "creation_date": 1520438007, "post_id": 49155419, "comment_id": 85316793, "body": "I&#39;ve seen this article before, I&#39;m just curious exactly what happens when you specify two table names rather than a table name + attribute name. All he discusses here is the latter."}, {"owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "edited": false, "score": 0, "creation_date": 1520530563, "post_id": 49155419, "comment_id": 85363734, "body": "This will results error. Have you tried this in your local before posting this ?"}], "tags": [], "owner": {"reputation": 580, "user_id": 5041876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/942018cf0f020de80bef0fbdf4a882f8?s=128&d=identicon&r=PG&f=1", "display_name": "NiftyAsp", "link": "https://stackoverflow.com/users/5041876/niftyasp"}, "is_accepted": false, "score": 0, "last_activity_date": 1520436039, "creation_date": 1520436039, "answer_id": 49155419, "question_id": 49154037, "link": "https://stackoverflow.com/questions/49154037/add-index-ruby-on-rails-joins/49155419#49155419", "title": "add_index Ruby on Rails Joins", "body": "<p>You add your index in a migration: </p>\n\n<pre><code>def change\n  add_index :users, :orders\nend\n</code></pre>\n\n<p>And that's it, Rails will handle the rest</p>\n"}, {"comments": [{"owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 0, "creation_date": 1520526533, "post_id": 49163999, "comment_id": 85361245, "body": "This makes me think the other answer is just redundant, right?"}, {"owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "reply_to_user": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 1, "creation_date": 1520530498, "post_id": 49163999, "comment_id": 85363701, "body": "The other one results in an error (<code>PG::UndefinedColumn: ERROR</code>) since users table don&#39;t have any reference to order."}], "tags": [], "owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "is_accepted": true, "score": 1, "last_activity_date": 1520472908, "creation_date": 1520472908, "answer_id": 49163999, "question_id": 49154037, "link": "https://stackoverflow.com/questions/49154037/add-index-ruby-on-rails-joins/49163999#49163999", "title": "add_index Ruby on Rails Joins", "body": "<p>When you add table references to migrations, rails will be automatically add index for the foreign key. Here in this case, <code>user_id</code> would have been indexed if you look at <code>schema.rb</code> file.</p>\n\n<p>Now to make the query faster, you will have to add index for <code>order_status</code> in the orders table.</p>\n\n<pre><code>rails g migration AddOrderStatusIndexToOrders\n\ndef change\n  add_index :orders, :order_status\nend\n</code></pre>\n\n<p>If you want to remove the index later, can be done like</p>\n\n<pre><code>def change\n  remove_index :orders, :order_status\nend\n</code></pre>\n"}], "owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 49163999, "answer_count": 2, "score": 0, "last_activity_date": 1520472908, "creation_date": 1520432136, "question_id": 49154037, "link": "https://stackoverflow.com/questions/49154037/add-index-ruby-on-rails-joins", "title": "add_index Ruby on Rails Joins", "body": "<p>I've got a couple of models like so:</p>\n\n<pre><code>User has_many :orders\nOrder belongs_to :user\n</code></pre>\n\n<p>I've been reading that an index can speed up larger queries and it all makes sense, but I don't understand how I should setup an index on a <code>joins</code> or <code>includes</code>. </p>\n\n<p>So if I have the query <code>Order.joins(:user).where(order_status: \"Cancelled\")</code> how would I use <code>add_index</code> to optimize this query? I assume the same logic would apply to <code>Order.includes(:user).where(order_status: \"Cancelled\")</code>. Thanks in advance. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "memory", "memory-leaks"], "comments": [{"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1520431716, "post_id": 49153526, "comment_id": 85312208, "body": "The error is telling you that tabletotal is a Hash, and when you call tabletotal.write, you&#39;re calling write on a hash, which throws an error. What are you supposed to call &#39;write&#39; on?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1520431768, "post_id": 49153526, "comment_id": 85312237, "body": "Start by making your code less sh*tty. You don&#39;t need all those instance variables - just compose a hash straight off and map the input values to the output. Also you should change the signature of the method to take input as an argument so that you can test it in a reasonable manor."}, {"owner": {"reputation": 15, "user_id": 9407668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/349ef683ab5c045a4bbd9691be2b0e89?s=128&d=identicon&r=PG&f=1", "display_name": "Armando Quiroga", "link": "https://stackoverflow.com/users/9407668/armando-quiroga"}, "edited": false, "score": 0, "creation_date": 1520431919, "post_id": 49153526, "comment_id": 85312348, "body": "I found a solution to a problem similar to mine and I wanted to apply it. <a href=\"https://stackoverflow.com/questions/23520758/failed-to-allocate-memory-no-memoryerror-in-ruby\" title=\"failed to allocate memory no memoryerror in ruby\">stackoverflow.com/questions/23520758/&hellip;</a>"}, {"owner": {"reputation": 15, "user_id": 9407668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/349ef683ab5c045a4bbd9691be2b0e89?s=128&d=identicon&r=PG&f=1", "display_name": "Armando Quiroga", "link": "https://stackoverflow.com/users/9407668/armando-quiroga"}, "edited": false, "score": 0, "creation_date": 1520432039, "post_id": 49153526, "comment_id": 85312424, "body": "I need all those variables because I use them in a html in table format."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1520432451, "post_id": 49153526, "comment_id": 85312706, "body": "But its not even going to work since each iteration will overwrite the instance variables - you need to iterate through an array or hash in the table. For now just concentrate on input/output."}, {"owner": {"reputation": 15, "user_id": 9407668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/349ef683ab5c045a4bbd9691be2b0e89?s=128&d=identicon&r=PG&f=1", "display_name": "Armando Quiroga", "link": "https://stackoverflow.com/users/9407668/armando-quiroga"}, "edited": false, "score": 0, "creation_date": 1520432976, "post_id": 49153526, "comment_id": 85313037, "body": "I have the same code but with other variables and it does work. The drawback in this is to call an XML variable because it is very heavy."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1520433780, "post_id": 49153526, "comment_id": 85313605, "body": "You should use Nokogiri to parse the XML document and traverse it instead of turning the whole document into a hash. But refactoring won&#39;t hurt here especially since this code will not behave as you intended."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 9407668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/349ef683ab5c045a4bbd9691be2b0e89?s=128&d=identicon&r=PG&f=1", "display_name": "Armando Quiroga", "link": "https://stackoverflow.com/users/9407668/armando-quiroga"}, "edited": false, "score": 0, "creation_date": 1520542431, "post_id": 49154560, "comment_id": 85370170, "body": "Hello, I have this error <code>SyntaxError: (irb):29: syntax error, unexpected tIDENTIFIER, expecting &#39;}&#39;     servicetotal: input[&quot;monitoredObjectPointer&quot;]</code>"}, {"owner": {"reputation": 15, "user_id": 9407668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/349ef683ab5c045a4bbd9691be2b0e89?s=128&d=identicon&r=PG&f=1", "display_name": "Armando Quiroga", "link": "https://stackoverflow.com/users/9407668/armando-quiroga"}, "edited": false, "score": 0, "creation_date": 1520547788, "post_id": 49154560, "comment_id": 85372805, "body": "Hello, I have this error: <code>=&gt; :extract_data irb(main):037:0&gt; data_stats.map(&amp;:extract_data) NoMethodError: private method </code>extract_data&#39; called for #&lt;Hash:0x007f2510c03b40&gt;         from (irb):37:in <code>map&#39;         from (irb):37</code>"}, {"owner": {"reputation": 15, "user_id": 9407668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/349ef683ab5c045a4bbd9691be2b0e89?s=128&d=identicon&r=PG&f=1", "display_name": "Armando Quiroga", "link": "https://stackoverflow.com/users/9407668/armando-quiroga"}, "edited": false, "score": 0, "creation_date": 1532776548, "post_id": 49154560, "comment_id": 90107672, "body": "Where and how use i this comand \u2018data_stats.map(&amp;:extract_data)\u2018"}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1520542968, "last_edit_date": 1520542968, "creation_date": 1520433666, "answer_id": 49154560, "question_id": 49153526, "link": "https://stackoverflow.com/questions/49153526/nomemoryerror-failed-to-allocate-memory-ruby-on-rails/49154560#49154560", "title": "NoMemoryError: failed to allocate memory - Ruby on Rails", "body": "<p>Start by making it less cr*p:</p>\n\n<pre><code>def extract_data(input)\n  {\n    devicetotal: input[\"monitoredObjectSiteName\"],\n    servicetotal: input[\"monitoredObjectPointer\"],\n    porttotal: input[\"displayedName\"],\n    queueIdtotal: input[\"queueId\"],\n    discardinproftotal:  input[\"droppedInProfOctets\"].to_i,\n    discardoutproftotal: input[\"droppedOutProfOctets\"].to_i,\n    time_unixtotal: input[\"timeCaptured\"].to_i/1000\n  }.tap do |h|\n    h[:timeCapturedtotal] = Time.at(h[:time_unixtotal]).strftime(\"%B %e, %Y at %I:%M %p\"),\n    h[:discardtotal] = h[:discardinproftotal] + h[:discardoutproftotal]\n    h[:device_int_stats_total] =(h[:devicetotal]+h[:porttotal]+h[:queueIdtotal]).to_s\n  end\nend\n</code></pre>\n\n<p>This method is really easy to test since you just insert input and write assertions about the output.</p>\n\n<p>If you want to map and apply this to the input array you would do:</p>\n\n<pre><code>data_stats.map(&amp;:extract_data)\n</code></pre>\n\n<p>Your code tries to output a hash but uses the shovel operator like on a array. You need to decide if the appropiate output is an array or a hash. </p>\n\n<blockquote>\n  <p>I need all those variables because I use them in a html in table\n  format.</p>\n</blockquote>\n\n<p>This won't work - the instance variables will only contain the values from the last element as they get overwritten in each iteration.</p>\n\n<p>You instead need to iterate over an array of hashes or objects in the view:</p>\n\n<pre><code>&lt;% @stats.each do |s| %&gt;\n  &lt;tr&gt;\n    &lt;td&gt;&lt;%= s[:devicetotal] %&gt;&lt;/td&gt;\n    # ...\n  &lt;/tr&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>If you really want to use instance varibles you need to create a object instance for each element:</p>\n\n<pre><code>class DataStat\n  include ActiveModel::AttributeAssignment\n  attr_accessor :devicetotal, :servicetotal # ...\n\n  def self.from_import(input)\n    self.new(\n      devicetotal: input[\"monitoredObjectSiteName\"],\n      servicetotal: input[\"monitoredObjectPointer\"],\n      # ...\n    )\n  end  \nend\n\n@stats = data_stats.map { |ds| DataStat.from_import(ds) }\n</code></pre>\n\n<p>You also need to deal with the issue that you\u00b4re running out of memory since you are just slop converting the whole XML document into a Ruby hash. You need  to <a href=\"http://www.nokogiri.org/tutorials/parsing_an_html_xml_document.html\" rel=\"nofollow noreferrer\">parse it with Nokogiri</a> instead and extract what you actually need. </p>\n"}], "owner": {"reputation": 15, "user_id": 9407668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/349ef683ab5c045a4bbd9691be2b0e89?s=128&d=identicon&r=PG&f=1", "display_name": "Armando Quiroga", "link": "https://stackoverflow.com/users/9407668/armando-quiroga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1249, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1520542968, "creation_date": 1520430578, "last_edit_date": 1520431284, "question_id": 49153526, "link": "https://stackoverflow.com/questions/49153526/nomemoryerror-failed-to-allocate-memory-ruby-on-rails", "title": "NoMemoryError: failed to allocate memory - Ruby on Rails", "body": "<p>I generated a simple script that on other occasions has worked for me, but this is because the amount of information in the loop generates a NoMemoryError error.</p>\n\n<p>I have 16 GB of memory and also a lot of virtual memory available. When I perform the test, the RAM memory is completely filled.</p>\n\n<p>The script is:</p>\n\n<pre><code>  require 'rest-client'\n  require 'json'\n  require 'open-uri'\n  require 'csv'\n\n  def self.qos7705egressdiscard_summary\n   xml = File.read(\"#{Rails.root}/public/Discard_qos7705egress.xml\")\n   data = RestClient.post(\"http://10.140.255.1:8080/xmlapi/invoke\", xml,{:\"Content-Type\" =&gt; 'application/soap+xml'})\n   data_parsed = Hash.from_xml(data)\n   return data_parsed\n  end\n\n  def self.samqos7705egressdiscardtotal_table\n   tabletotal = Hash.new\n   data_stats = qos7705egressdiscard_summary['Envelope']['Body']['findResponse']['result']['service.SapEgrQosQueueStatsLogRecord']\n\n   data_stats.map do |qosdiscard_device|\n    @devicetotal = qosdiscard_device[\"monitoredObjectSiteName\"]\n    @servicetotal = qosdiscard_device[\"monitoredObjectPointer\"]\n    @porttotal = qosdiscard_device[\"displayedName\"]\n    @queueIdtotal = qosdiscard_device[\"queueId\"]\n    @discardinproftotal = qosdiscard_device[\"droppedInProfOctets\"].to_i\n    @discardoutproftotal = qosdiscard_device[\"droppedOutProfOctets\"].to_i\n    time_unixtotal = (qosdiscard_device[\"timeCaptured\"]).to_i/1000\n    @timeCapturedtotal = Time.at(time_unixtotal).strftime(\"%B %e, %Y at %I:%M %p\")\n    @discardtotal = @discardinproftotal + @discardoutproftotal\n    @device_int_stats_total = (@devicetotal+@porttotal+@queueIdtotal).to_s\n     hash = Hash[devicetotal: @devicetotal, servicetotal: @servicetotal, porttotal: @porttotal, queueIdtotal: @queueIdtotal, discardtotal: @discardtotal, device_int_stats_total: @device_int_stats_total, timeCapturedtotal: @timeCapturedtotal, time_unixtotal: time_unixtotal]\n     tabletotal &lt;&lt; hash\n     #tabletotal.write(hash)\n   end\n  end\n</code></pre>\n\n<p>The exact error is:</p>\n\n<pre><code>NoMemoryError: failed to allocate memory\n        from /usr/local/lib/ruby/2.2.0/irb/inspector.rb:108:in `inspect'\n        from /usr/local/lib/ruby/2.2.0/irb/inspector.rb:108:in `block in &lt;module:IRB&gt;'\n        from /usr/local/lib/ruby/2.2.0/irb/inspector.rb:101:in `call'\n        from /usr/local/lib/ruby/2.2.0/irb/inspector.rb:101:in `inspect_value'\n        from /usr/local/lib/ruby/2.2.0/irb/context.rb:383:in `inspect_last_value'\n        from /usr/local/lib/ruby/2.2.0/irb.rb:661:in `output_value'\n        from /usr/local/lib/ruby/2.2.0/irb.rb:490:in `block (2 levels) in eval_input'\n        from /usr/local/lib/ruby/2.2.0/irb.rb:623:in `signal_status'\n        from /usr/local/lib/ruby/2.2.0/irb.rb:486:in `block in eval_input'\n        from /usr/local/lib/ruby/2.2.0/irb/ruby-lex.rb:245:in `block (2 levels) in each_top_level_statement'\n        from /usr/local/lib/ruby/2.2.0/irb/ruby-lex.rb:231:in `loop'\n        from /usr/local/lib/ruby/2.2.0/irb/ruby-lex.rb:231:in `block in each_top_level_statement'\n        from /usr/local/lib/ruby/2.2.0/irb/ruby-lex.rb:230:in `catch'\n        from /usr/local/lib/ruby/2.2.0/irb/ruby-lex.rb:230:in `each_top_level_statement'\n        from /usr/local/lib/ruby/2.2.0/irb.rb:485:in `eval_input'\n        from /usr/local/lib/ruby/2.2.0/irb.rb:395:in `block in start'\n        from /usr/local/lib/ruby/2.2.0/irb.rb:394:in `catch'\n        from /usr/local/lib/ruby/2.2.0/irb.rb:394:in `start'\n        from /usr/local/lib/ruby/gems/2.2.0/gems/railties-4.2.0/lib/rails/commands/console.rb:110:in `start'\n        from /usr/local/lib/ruby/gems/2.2.0/gems/railties-4.2.0/lib/rails/commands/console.rb:9:in `start'\n        from /usr/local/lib/ruby/gems/2.2.0/gems/railties-4.2.0/lib/rails/commands/commands_tasks.rb:68:in `console'\n        from /usr/local/lib/ruby/gems/2.2.0/gems/railties-4.2.0/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n        from /usr/local/lib/ruby/gems/2.2.0/gems/railties-4.2.0/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n        from bin/rails:4:in `require'\n        from bin/rails:4:in `&lt;main&gt;'Maybe IRB bug!\n</code></pre>\n\n<p>On line 25 I added this <code>tabletotal.write (hash)</code> to be able to write it on disk and not in memory but I got the following error:</p>\n\n<pre><code>NoMethodError: undefined method `write' for {}:Hash\n</code></pre>\n\n<p>What is the problem here? Also how can I fix it?</p>\n"}, {"tags": ["mysql", "sql", "ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 141, "user_id": 8731239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6406cb32c55193f324eab9d7b17bfaa4?s=128&d=identicon&r=PG&f=1", "display_name": "Yassine", "link": "https://stackoverflow.com/users/8731239/yassine"}, "edited": false, "score": 2, "creation_date": 1520427959, "post_id": 49152638, "comment_id": 85309630, "body": "People doing <code>-1</code> are all but useful. At least leave a comment. With power comes responsibility."}], "answers": [{"tags": [], "owner": {"reputation": 2342, "user_id": 5871602, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Rx2Kt.png?s=128&g=1", "display_name": "Daniel E.", "link": "https://stackoverflow.com/users/5871602/daniel-e"}, "is_accepted": false, "score": 0, "last_activity_date": 1520428145, "creation_date": 1520428145, "answer_id": 49152764, "question_id": 49152638, "link": "https://stackoverflow.com/questions/49152638/sql-ids-containing-specific-arrays-in-a-specific-way/49152764#49152764", "title": "SQL : ids containing specific arrays in a specific way", "body": "<p>If I understand well your question you want to get a group who gets all id in entry, in sql it will be :</p>\n\n<pre><code>SELECT [...] WHERE taxonomies.id = 11 \n   AND taxonomies.id = 12 \n   AND taxonomies.id = 13\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 8536435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3705018eae9b865c3956afc4be167066?s=128&d=identicon&r=PG&f=1", "display_name": "monostabil", "link": "https://stackoverflow.com/users/8536435/monostabil"}, "is_accepted": false, "score": 1, "last_activity_date": 1520430808, "creation_date": 1520430808, "answer_id": 49153604, "question_id": 49152638, "link": "https://stackoverflow.com/questions/49152638/sql-ids-containing-specific-arrays-in-a-specific-way/49153604#49153604", "title": "SQL : ids containing specific arrays in a specific way", "body": "<p>I have unterstood it a bit differently. He/she wants to find all items that have exactly 11, 12 and 13 as taxonomy id.</p>\n\n<pre><code>select item from joinedTable \nwhere taxonomy_id in (11,12,13)\ngroup by item\nhaving count(distinct taxonomy_id) = 3\n</code></pre>\n\n<p>But really I am a bit confused about the request.</p>\n"}, {"tags": [], "owner": {"reputation": 3982, "user_id": 5695953, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b50e1603f447a4a31cded4a14edfeff9?s=128&d=identicon&r=PG&f=1", "display_name": "Md. Suman Kabir", "link": "https://stackoverflow.com/users/5695953/md-suman-kabir"}, "is_accepted": true, "score": 1, "last_activity_date": 1520432167, "creation_date": 1520432167, "answer_id": 49154050, "question_id": 49152638, "link": "https://stackoverflow.com/questions/49152638/sql-ids-containing-specific-arrays-in-a-specific-way/49154050#49154050", "title": "SQL : ids containing specific arrays in a specific way", "body": "<p>You can get your desired output using this query :</p>\n\n<pre><code>select item from (\n    select item, count(distinct taxonomy_id) as count from items  \n    join taxonomies on items.item_id = taxonomies.item_id\n    where taxonomies.taxonomy_id in (11,12,13)\n    group by item\n) as T where count = 3\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 8731239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6406cb32c55193f324eab9d7b17bfaa4?s=128&d=identicon&r=PG&f=1", "display_name": "Yassine", "link": "https://stackoverflow.com/users/8731239/yassine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 49154050, "answer_count": 3, "score": 0, "last_activity_date": 1520432167, "creation_date": 1520427707, "question_id": 49152638, "link": "https://stackoverflow.com/questions/49152638/sql-ids-containing-specific-arrays-in-a-specific-way", "title": "SQL : ids containing specific arrays in a specific way", "body": "<p>An item <code>table: items</code> has many taxonomies <code>table: taxonomies</code> using a join table <code>item_taxonomies (item_id, taxonomy_id)</code>.</p>\n\n<p>A search for items is made using taxonomies groups.</p>\n\n<p>Example:</p>\n\n<pre><code>taxo_group_1 = [1, 2, 3]\ntaxo_group_2 = [4, 5]\n</code></pre>\n\n<p>The sql should find all <code>items</code> having <code>taxonomies</code> included in both arrays this way:</p>\n\n<p>If I have these elements:</p>\n\n<pre><code>item_1 id=1\n   taxo_1 id=11\n   taxo_2 id=12\n   taxo_3 id=13\n\nitem_2 id=2\n   taxo_3 id=13\n   taxo_4 id=14\n</code></pre>\n\n<p>Searching with <code>[11, 12]</code> and <code>[13]</code> will return <code>item_1</code> and not <code>item_2</code>, because <code>item_1</code> has taxonomies <code>in [11, 12] AND in [13]</code>.</p>\n\n<p><code>item_2</code> won't be returned because it has not taxonomies in <code>[11, 12]</code></p>\n\n<p>So far:</p>\n\n<pre><code>\"taxonomies\".\"id\" IN (11, 12, 13) AND \"taxonomies\".\"id\" IN (13)\n</code></pre>\n\n<p>Won't work of course.</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby"], "comments": [{"owner": {"reputation": 171, "user_id": 1592591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b2d32ac48d24c7313d703b09b9d6ea7?s=128&d=identicon&r=PG", "display_name": "Sujay Gavhane", "link": "https://stackoverflow.com/users/1592591/sujay-gavhane"}, "edited": false, "score": 0, "creation_date": 1520427436, "post_id": 49152377, "comment_id": 85309264, "body": "Did you tried <code>MyModel.first.to_json(only: [:alpha2, :translations, :names])</code> ? This should give you expected result."}, {"owner": {"reputation": 4050, "user_id": 977017, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8c269927ef5eb1b0400bc6fb2e1a1e2e?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/977017/jan"}, "reply_to_user": {"reputation": 171, "user_id": 1592591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b2d32ac48d24c7313d703b09b9d6ea7?s=128&d=identicon&r=PG", "display_name": "Sujay Gavhane", "link": "https://stackoverflow.com/users/1592591/sujay-gavhane"}, "edited": false, "score": 0, "creation_date": 1520427510, "post_id": 49152377, "comment_id": 85309331, "body": "it&#39;s empty. Please mention that :country is an method on myModel"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1520429798, "post_id": 49152377, "comment_id": 85310903, "body": "What is the desired result? Please add what you want the JSON output to look like in the question itself."}, {"owner": {"reputation": 4050, "user_id": 977017, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8c269927ef5eb1b0400bc6fb2e1a1e2e?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/977017/jan"}, "edited": false, "score": 0, "creation_date": 1520430795, "post_id": 49152377, "comment_id": 85311566, "body": "added expected output example"}, {"owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "edited": false, "score": 0, "creation_date": 1520473954, "post_id": 49152377, "comment_id": 85333837, "body": "Expected output example include names instead of translations as specified in the question."}], "answers": [{"tags": [], "owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "is_accepted": true, "score": 0, "last_activity_date": 1520475853, "creation_date": 1520475853, "answer_id": 49164374, "question_id": 49152377, "link": "https://stackoverflow.com/questions/49152377/exclude-data-from-as-json-method/49164374#49164374", "title": "Exclude data from as_json method", "body": "<p>You can override <code>as_json</code> method for your Model to get the desired result.</p>\n\n<pre><code>class MyModel\n  def as_json(options = {})\n    super(only: [:name]).merge(\n      country: country.data.slice(\"alpha2\", \"unofficial_names\", \"translations\")\n    )\n  end\nend\n</code></pre>\n\n<p>Now you can get the data by calling <code>as_json</code> on Model</p>\n\n<pre><code>MyModel.first.as_json\n</code></pre>\n\n<p>Hope it helps !</p>\n"}], "owner": {"reputation": 4050, "user_id": 977017, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8c269927ef5eb1b0400bc6fb2e1a1e2e?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/977017/jan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 392, "favorite_count": 0, "accepted_answer_id": 49164374, "answer_count": 1, "score": 0, "last_activity_date": 1520475853, "creation_date": 1520426944, "last_edit_date": 1520430780, "question_id": 49152377, "link": "https://stackoverflow.com/questions/49152377/exclude-data-from-as-json-method", "title": "Exclude data from as_json method", "body": "<p>My Model includes some country informations</p>\n\n<pre><code>class MyModel \n  include Mongoid::Document\n  field :name, type: String\n  field :country, as: :country, type: Country\nend\n\nMyModel.first.country\n\n#&lt;Country:0x007fc6a5d5f278 @data={\"continent\"=&gt;\"Asia\", \n        \"alpha2\"=&gt;\"TH\",\n        \"alpha3\"=&gt;\"THA\",\n        \"country_code\"=&gt;\"66\",\n        \"currency\"=&gt;\"THB\",\n        \"international_prefix\"=&gt;\"001\",\n        \"ioc\"=&gt;\"THA\", \"latitude\"=&gt;\"15 00 N\",\n        \"longitude\"=&gt;\"100 00 E\", \"name\"=&gt;\"Thailand\",\n        \"names\"=&gt;[\"Thailand\", \"Tha\u00eflande\", \"Tailandia\", \"\u30bf\u30a4\"],\n        \"translations\"=&gt;{\"en\"=&gt;\"Thailand\",\n                         \"it\"=&gt;\"Tailandia\",\n                         \"de\"=&gt;\"Thailand\",  \n                         \"fr\"=&gt;\"Tha\u00eflande\",\n                         \"es\"=&gt;\"Tailandia\",\n                         \"ja\"=&gt;\"\u30bf\u30a4\",\n                         \"nl\"=&gt;\"Thailand\",  \n                         \"ru\"=&gt;\"\u0422\u0430\u0438\u043b\u0430\u043d\u0434\"},\n        \"national_destination_code_lengths\"=&gt;[2],\n        \"national_number_lengths\"=&gt;[9, 10],\n        \"national_prefix\"=&gt;\"0\", \"number\"=&gt;\"764\",\n        \"region\"=&gt;\"Asia\", \"subregion\"=&gt;\"South-Eastern Asia\",\n        \"un_locode\"=&gt;\"TH\", \"languages\"=&gt;[\"th\"], \"nationality\"=&gt;\"Thai\"}&gt;\n</code></pre>\n\n<p>Calling <code>MyModel.first.to_json(only: [:name, :country])</code> should only return <code>alpha2</code>, <code>translations</code> and <code>names</code></p>\n\n<p><strong>How can I achieve that?</strong>\nI try to avoid to write an extra method for that. </p>\n\n<p>EDIT: </p>\n\n<p>Expected Output something like this:</p>\n\n<p>MyModel.first</p>\n\n<pre><code>{\"name\": \"ModelName\",\n \"country\": {\"alpha2\"=&gt; \"TH\", \n             \"name\" =&gt; \"Thailand\",\n             \"names\"=&gt; [\"Thailand\", \"Tha\u00eflande\", \"Tailandia\", \"\u30bf\u30a4\"]\n }\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "automation", "cucumber", "rubymine"], "comments": [{"owner": {"reputation": 2164, "user_id": 7121619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e413a729d8325c52d4861a97a928959?s=128&d=identicon&r=PG&f=1", "display_name": "Marit", "link": "https://stackoverflow.com/users/7121619/marit"}, "edited": false, "score": 0, "creation_date": 1521128946, "post_id": 49152077, "comment_id": 85609670, "body": "Does RubyMine have the option to set &quot;Run Configurations&quot;, like IntelliJ?"}, {"owner": {"reputation": 371, "user_id": 7573223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIuXz.jpg?s=128&g=1", "display_name": "SMAG", "link": "https://stackoverflow.com/users/7573223/smag"}, "edited": false, "score": 0, "creation_date": 1531884482, "post_id": 49152077, "comment_id": 89757989, "body": "have you tried: rails s in the project root / folder from another terminal before running the command in the ruby mine console?  Have you tried using pry to get breakpoints even when running from the command line?"}], "owner": {"reputation": 290, "user_id": 5630536, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/aa8b05352d99138a1001a5ec186497c4?s=128&d=identicon&r=PG&f=1", "display_name": "Speedychuck", "link": "https://stackoverflow.com/users/5630536/speedychuck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 259, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520425984, "creation_date": 1520425984, "question_id": 49152077, "link": "https://stackoverflow.com/questions/49152077/running-cucumber-from-command-line-but-need-to-run-from-ide", "title": "Running cucumber from command line but need to run from IDE?", "body": "<p>I have currently joined a project which is executing the cucumber tests from the command line using this command: </p>\n\n<pre><code>bundle exec cucumber file.feature type='browser' browser='chrome' \n</code></pre>\n\n<p>I want to be able to run this in rubymine, however, When I try to run it fails and I believe its due to it needs to know which file to run, which browser to start etc. I want to get it running in rubymine for the built in debugging breakpoints etc. How would I go about this? Its something I haven't done before? </p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb", "mongoid", "activeadmin"], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 1575044, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/15a528e8dc4b2a3219de57893c77b318?s=128&d=identicon&r=PG", "display_name": "user1575044", "link": "https://stackoverflow.com/users/1575044/user1575044"}, "edited": false, "score": 0, "creation_date": 1520437375, "post_id": 49153493, "comment_id": 85316335, "body": "after doing this how do I reference these locations in the filter that I mentioned?  The User model doesn&#39;t provide any option to refer to locations."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 91, "user_id": 1575044, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/15a528e8dc4b2a3219de57893c77b318?s=128&d=identicon&r=PG", "display_name": "user1575044", "link": "https://stackoverflow.com/users/1575044/user1575044"}, "edited": false, "score": 0, "creation_date": 1520437539, "post_id": 49153493, "comment_id": 85316463, "body": "<a href=\"https://stackoverflow.com/questions/18148166/find-document-with-array-that-contains-a-specific-value\" title=\"find document with array that contains a specific value\">stackoverflow.com/questions/18148166/&hellip;</a>"}, {"owner": {"reputation": 91, "user_id": 1575044, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/15a528e8dc4b2a3219de57893c77b318?s=128&d=identicon&r=PG", "display_name": "user1575044", "link": "https://stackoverflow.com/users/1575044/user1575044"}, "edited": false, "score": 0, "creation_date": 1520498630, "post_id": 49153493, "comment_id": 85342651, "body": "<a href=\"https://stackoverflow.com/questions/22473391/custom-search-with-ransacker\" title=\"custom search with ransacker\">stackoverflow.com/questions/22473391/&hellip;</a>  <a href=\"http://nikhgupta.com/code/activeadmin/custom-filters-using-ransacker-in-activeadmin-interfaces/\" rel=\"nofollow noreferrer\">nikhgupta.com/code/activeadmin/&hellip;</a>  The above 2 links helped"}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1520430494, "last_edit_date": 1592644375, "creation_date": 1520430494, "answer_id": 49153493, "question_id": 49151955, "link": "https://stackoverflow.com/questions/49151955/how-to-make-a-ruby-model-with-fields-that-could-refer-to-an-array-of-objects-in/49153493#49153493", "title": "How to make a ruby model with fields that could refer to an array of objects in mongodb?", "body": "<p>There are several ways to do this:</p>\n<h2>1. Use an array type</h2>\n<pre><code>class User\n  include Mongoid::Document\n  store_in collection: &quot;user&quot;\n\n  field :name, type: String\n  field :number, type: String\n  field :locations, type: Array\nend\n</code></pre>\n<h2>2. Use embedded documents</h2>\n<pre><code>class User\n  include Mongoid::Document\n  store_in collection: &quot;user&quot;\n\n  field :name, type: String\n  field :number, type: String\n  embeds_many :locations\nend\n\nclass Location\n  include Mongoid::Document\n  field :state, type: String\n  field :district, type: String\n  embedded_in :user  \nend\n</code></pre>\n<p>The key advantage here is that you can place the appropriate business logic on the <code>Location</code> model instead of swelling your <code>User</code> model.</p>\n<h2>3. Use referenced documents</h2>\n<pre><code>class User\n  include Mongoid::Document\n  store_in collection: &quot;user&quot;\n\n  field :name, type: String\n  field :number, type: String\n  has_and_belongs_to_many :locations\nend\n\nclass Location\n  include Mongoid::Document\n  field :state, type: String\n  field :district, type: String\n  has_and_belongs_to_many :users\nend\n</code></pre>\n<p>This is somewhat like #2 but lets you use normalized documents for location instead of duplicating them for each user. This was a bit of a performance problem in earlier versions of Mongoid (and MongoDB) since there was no join support.</p>\n"}], "owner": {"reputation": 91, "user_id": 1575044, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/15a528e8dc4b2a3219de57893c77b318?s=128&d=identicon&r=PG", "display_name": "user1575044", "link": "https://stackoverflow.com/users/1575044/user1575044"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520430494, "creation_date": 1520425637, "question_id": 49151955, "link": "https://stackoverflow.com/questions/49151955/how-to-make-a-ruby-model-with-fields-that-could-refer-to-an-array-of-objects-in", "title": "How to make a ruby model with fields that could refer to an array of objects in mongodb?", "body": "<p>I am making a model in ruby like the one I have shared below. The problem is that I need to reference the key-value pairs in locations for my filters. So how should I go about in doing that?</p>\n\n<pre><code>class User\n include Mongoid::Document\n store_in collection: \"user\"\n\n field :name, type: String\n field :number, type: String\n field :locations #is an array of locations with key-value pairs\nend\n</code></pre>\n\n<p>for example, the user object is like</p>\n\n<pre><code>db.user.findOne()\n{\n \"name\" : \"ABC\",\n \"number\" : \"1234567890\",\n \"locations\" : [\n    {\n        \"state\" : \"X\",\n        \"district\" : \"AY\",\n    },\n    {\n        \"state\" : \"V\",\n        \"district\" : \"BZ\",\n   }\n ],\n}\n</code></pre>\n\n<p>Using filters I need to find all users who are in say state = \"X\". Mongo query will use locations.state but how to define a field that can help in querying such states. For querying in filters I am using Active Admin like below:</p>\n\n<pre><code>filter :locations, label: 'Locations', as: :select,\n     collection: {\n         'x': 'X',\n         'v': 'V',\n     }\n</code></pre>\n\n<p>So, I need a way to query states in locations rather than locations. Any help in how to approach this problem will be really helpful.</p>\n\n<p>Let me know if any other details are needed.</p>\n\n<p>Thanks in Advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb"], "comments": [{"owner": {"reputation": 63390, "user_id": 2683814, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/16a4c2fb341c51388d5cdfcf0e956f6c?s=128&d=identicon&r=PG&f=1", "display_name": "s7vr", "link": "https://stackoverflow.com/users/2683814/s7vr"}, "edited": false, "score": 1, "creation_date": 1520425443, "post_id": 49151721, "comment_id": 85307895, "body": "Try <a href=\"https://docs.mongodb.com/manual/reference/operator/query/all/#use-all-with-elemmatch\" rel=\"nofollow noreferrer\">$all with $elemMatch</a>"}, {"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "reply_to_user": {"reputation": 63390, "user_id": 2683814, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/16a4c2fb341c51388d5cdfcf0e956f6c?s=128&d=identicon&r=PG&f=1", "display_name": "s7vr", "link": "https://stackoverflow.com/users/2683814/s7vr"}, "edited": false, "score": 0, "creation_date": 1520427007, "post_id": 49151721, "comment_id": 85308953, "body": "@Veeram you are right. I posted the code below so that you could include it in your answer. I will accept your answer. Thanks a lot"}], "answers": [{"comments": [{"owner": {"reputation": 63390, "user_id": 2683814, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/16a4c2fb341c51388d5cdfcf0e956f6c?s=128&d=identicon&r=PG&f=1", "display_name": "s7vr", "link": "https://stackoverflow.com/users/2683814/s7vr"}, "edited": false, "score": 0, "creation_date": 1520442485, "post_id": 49152384, "comment_id": 85319888, "body": "Its okay. Its just referring you to documentation and you did the hard work. You should accept your answer."}, {"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "reply_to_user": {"reputation": 63390, "user_id": 2683814, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/16a4c2fb341c51388d5cdfcf0e956f6c?s=128&d=identicon&r=PG&f=1", "display_name": "s7vr", "link": "https://stackoverflow.com/users/2683814/s7vr"}, "edited": false, "score": 0, "creation_date": 1520581378, "post_id": 49152384, "comment_id": 85382801, "body": "@Veeram I am grateful to have received help from <b>top 1% Mongodb</b> and <b>top 0.07%</b> expert on StackOverflow"}], "tags": [], "owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "is_accepted": true, "score": 0, "last_activity_date": 1520426963, "creation_date": 1520426963, "answer_id": 49152384, "question_id": 49151721, "link": "https://stackoverflow.com/questions/49151721/mongodb-elemmatch-with-multiple-values/49152384#49152384", "title": "mongodb $elemMatch with multiple values", "body": "<p><strong>You found the solution</strong> <a href=\"https://stackoverflow.com/users/2683814/veeram\">@Veeram</a>, please copy this answer and edit to your wish. I will accept it and I'll be thankful to you for sharing your expertise with us</p>\n\n<pre><code>Movie.where({'tags' =&gt; { '$all' =&gt; [\n                        {'$elemMatch' =&gt; {'type' =&gt; \"Genre\", \"tags\" =&gt; \"Comedy\"}},\n                        {'$elemMatch' =&gt; {'type' =&gt; \"score\", \"tags\" =&gt; \"Excellent\"}}\n                        ]}\n            })\n</code></pre>\n\n<p>Thanks a lot\nBest Regards\nFabrizio</p>\n"}], "owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 49152384, "answer_count": 1, "score": 0, "last_activity_date": 1520426963, "creation_date": 1520424897, "question_id": 49151721, "link": "https://stackoverflow.com/questions/49151721/mongodb-elemmatch-with-multiple-values", "title": "mongodb $elemMatch with multiple values", "body": "<p>I want to query the following <code>Movie</code> object based on his <code>tags</code> array with <code>Mongodb</code></p>\n\n<pre><code>Movie.last.tags\n =&gt; [{\"type\"=&gt;\"Genre\", \"tags\"=&gt;[\"Comedy\"]}, {\"type\"=&gt;\"score\", \"tags\" =&gt; [\"Excellent\"]}] \n</code></pre>\n\n<p>by using <a href=\"https://docs.mongodb.com/manual/reference/operator/projection/elemMatch/\" rel=\"nofollow noreferrer\"><code>$elemMatch</code></a> </p>\n\n<pre><code>Movie.where({'tags' =&gt; {'$elemMatch' =&gt; {'type' =&gt; \"Genre\", \"tags\" =&gt; \"Comedy\"}}})\n</code></pre>\n\n<p>I can query all entries with the <code>Comedy</code> tag, but I need to restrict the search to those that have in their <code>tags</code> array also <code>{\"type\"=&gt;\"score\", \"tags\" =&gt; [\"Excellent\"]}</code></p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1520421796, "post_id": 49150665, "comment_id": 85305570, "body": "Add <code>|| -1</code> if you want them at the start or <code>|| sorter.size</code> if you want them at the end."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1520421848, "post_id": 49150665, "comment_id": 85305601, "body": "Or better add <code>|| -Float::INFINITY</code>."}, {"owner": {"reputation": 4429, "user_id": 102133, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/561a3a55352fe6a5343e541a6894b541?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/102133/ben"}, "edited": false, "score": 0, "creation_date": 1520421905, "post_id": 49150665, "comment_id": 85305634, "body": "what does || -Float::INFINITY would do compared to the two others ? adds it at the beginning ?"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1520421958, "post_id": 49150665, "comment_id": 85305663, "body": "<code>-Float::INFINITY</code> will do the same as <code>-1</code>. You can put it as an alternative to the index. Aka <code>sorter.index(h[:id]) || -Float::INFINITY</code>."}, {"owner": {"reputation": 4429, "user_id": 102133, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/561a3a55352fe6a5343e541a6894b541?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/102133/ben"}, "edited": false, "score": 0, "creation_date": 1520422050, "post_id": 49150665, "comment_id": 85305706, "body": "ok thx a lot guys"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1520422062, "post_id": 49150665, "comment_id": 85305714, "body": "Yes, to the beginning. To add to the end use <code>+Float::INFINITY</code>. It\u2019s not so complicated to check it yourself: <code>[1,2,nil].sort_by { |e| e || -Float::INFINITY }</code> \u21d2 <code>[nil, 1, 2]</code>."}, {"owner": {"reputation": 4429, "user_id": 102133, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/561a3a55352fe6a5343e541a6894b541?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/102133/ben"}, "edited": false, "score": 0, "creation_date": 1520422110, "post_id": 49150665, "comment_id": 85305749, "body": "i&#39;m on it yep; thx again"}], "answers": [{"tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": true, "score": 1, "last_activity_date": 1520424008, "creation_date": 1520424008, "answer_id": 49151427, "question_id": 49150665, "link": "https://stackoverflow.com/questions/49150665/ruby-avoid-errors-when-nil-in-sort-by/49151427#49151427", "title": "Ruby / avoid errors when nil in sort_by", "body": "<pre><code>input.sort_by { |h| [sorter.index(h[:id]) ? 1 : 0, sorter.index(h[:id])] }\n</code></pre>\n\n<p>This will take all values, sort them by whether they have a sorter.index(h[:id]) available initially, and then sort those with that value by that value</p>\n"}], "owner": {"reputation": 4429, "user_id": 102133, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/561a3a55352fe6a5343e541a6894b541?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/102133/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 49151427, "answer_count": 1, "score": 1, "last_activity_date": 1520424008, "creation_date": 1520421665, "question_id": 49150665, "link": "https://stackoverflow.com/questions/49150665/ruby-avoid-errors-when-nil-in-sort-by", "title": "Ruby / avoid errors when nil in sort_by", "body": "<p><a href=\"https://stackoverflow.com/a/49028373/102133\">From this question</a> (@mudasobwa);</p>\n\n<pre><code>input.sort_by { |h| sorter.index(h[:id]) }\n</code></pre>\n\n<p>In some unfortunate cases; <code>sorter.index(h[:id])</code> returns nil, it then returns an error</p>\n\n<p>How would one cleanly avoid such error to happen, while having the rest of the array sorted ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "amazon-s3"], "comments": [{"owner": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "edited": false, "score": 0, "creation_date": 1520422088, "post_id": 49150426, "comment_id": 85305733, "body": "Which version do you use ? is find_all making valid request ?"}], "answers": [{"tags": [], "owner": {"reputation": 4429, "user_id": 102133, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/561a3a55352fe6a5343e541a6894b541?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/102133/ben"}, "is_accepted": true, "score": 2, "last_activity_date": 1520422851, "last_edit_date": 1520422851, "creation_date": 1520422511, "answer_id": 49150924, "question_id": 49150426, "link": "https://stackoverflow.com/questions/49150426/how-to-get-objects-keys-in-amazon-s3-in-rails/49150924#49150924", "title": "How to get objects&#39; keys in amazon s3 in Rails?", "body": "<p><a href=\"https://docs.aws.amazon.com/AWSRubySDK/latest/AWS/S3/S3Object.html\" rel=\"nofollow noreferrer\">From the docs</a>  :</p>\n\n<pre><code>bucket.objects.each do |obj|\n  puts obj.key\nend\n</code></pre>\n\n<p>Untested, but if you just just want the matching keys in your output :</p>\n\n<pre><code>def matching_s3_keys\n  s3 = Aws::S3::Resource.new(\n    access_key_id: 'askdlkasdmkmakml',\n    secret_access_key: 'aklsdmkmasldkmasmdlmasdl',\n    region: 'ap-southeast-1'\n  )\n  images = s3.bucket('my-pics').objects.select do |object| \n    # This looks a bit weird has i'm unsure if you really\n    # want to match a s3key with another value in your app/db.\n    # Just showing here a way to filter your results\n    #\n    object.key == self.barcode_number\n  end\n  images.map(&amp;:key)\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "is_accepted": false, "score": 1, "last_activity_date": 1520422573, "creation_date": 1520422573, "answer_id": 49150936, "question_id": 49150426, "link": "https://stackoverflow.com/questions/49150426/how-to-get-objects-keys-in-amazon-s3-in-rails/49150936#49150936", "title": "How to get objects&#39; keys in amazon s3 in Rails?", "body": "<p>Try this to retrieve the object keys</p>\n\n<pre><code>s3 = AWS::S3.new\n\ns3.buckets['bucket-name'].objects.each do |o|\n   puts o.key\nend\n</code></pre>\n\n<p><a href=\"https://docs.aws.amazon.com/AWSRubySDK/latest/AWS/S3/S3Object.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/AWSRubySDK/latest/AWS/S3/S3Object.html</a></p>\n\n<hr>\n\n<p>In your case</p>\n\n<pre><code>images = []\ns3.buckets['my-pics'].objects.each do |object| \n    images &lt;&lt; object.key if object.key.include?(self.barcode_number})\nend\n</code></pre>\n"}], "owner": {"reputation": 1413, "user_id": 5414062, "user_type": "registered", "accept_rate": 97, "profile_image": "https://lh5.googleusercontent.com/-YIcmHiJEskE/AAAAAAAAAAI/AAAAAAAAABM/VIg52tKWtOk/photo.jpg?sz=128", "display_name": "Mohammad Eliass Alhusain", "link": "https://stackoverflow.com/users/5414062/mohammad-eliass-alhusain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1316, "favorite_count": 0, "accepted_answer_id": 49150924, "answer_count": 2, "score": 0, "last_activity_date": 1520422851, "creation_date": 1520420897, "question_id": 49150426, "link": "https://stackoverflow.com/questions/49150426/how-to-get-objects-keys-in-amazon-s3-in-rails", "title": "How to get objects&#39; keys in amazon s3 in Rails?", "body": "<p>I use <code>S3</code> to store some photos to send their path through <code>rails</code> to mobile clients, but when I started to send the data for a specific item in show method I used this code with <code>aws-sdk</code> gem to check where is the photos and get their path</p>\n\n<pre><code>s3 = Aws::S3::Resource.new(\n      access_key_id: 'askdlkasdmkmakml',\n      secret_access_key: 'aklsdmkmasldkmasmdlmasdl',\n      region: 'ap-southeast-1'\n    )\n\n    images = []\n    s3.bucket('my-pics').objects.find_all do |object| \n        images &lt;&lt; object.key if object.key.include?(self.barcode_number})\n    end\n</code></pre>\n\n<blockquote>\n  <p>this code I tested it with ruby not rails and I get this as result:</p>\n</blockquote>\n\n<p><code>photos/9000101044393/1.jpg</code>\n<code>photos/9000101044393/2.jpg</code></p>\n\n<p>but when I use this code inside <code>rails</code> I got all these stuff</p>\n\n<pre><code>[#&lt;Aws::S3::ObjectSummary:0x007fe348713170 @bucket_name=\"my-pics\",     \n@key=\"photos/9000101044393/1.jpg\", @data=#&lt;struct     \nAws::S3::Types::Object key=\"photos/9000101044393/1.jpg\",     \nlast_modified=2018-03-01 05:14:57 UTC,     \netag=\"\\\"ee4540acc2a5bfc948507e0927e9dd1b\\\"\", size=140119,     \nstorage_class=\"STANDARD\", owner=#&lt;struct Aws::S3::Types::Owner \ndisplay_name=\"mohammed.eliass\",     \nid=\"06bf2e3c37f83d96de16b13fc00efc20a097988edd1d4\"&gt;&gt;, @client=#    \n&lt;Aws::S3::Client&gt;&gt;, #&lt;Aws::S3::ObjectSummary:0x007fe348713008     \n@bucket_name=\"my-pics\", @key=\"photos/9000101044393/2.jpg\", @data=#   \n&lt;struct Aws::S3::Types::Object key=\"photos/9000101044393/2.jpg\",    \nlast_modified=2018-03-01 05:14:57 UTC,    \netag=\"\\\"b13dc7b1a516fee5ed15bccc57e\\\"\", size=33132,    \nstorage_class=\"STANDARD\", owner=#&lt;struct Aws::S3::Types::Owner    \ndisplay_name=\"mohammed.eliass\",  id=\"06bf2e3c37f83d96de16b13fc0adasdaddskfl88edd1d449d85b7157d95bdf334\"&gt;&gt;,\n\n@client=#&lt;Aws::S3::Client&gt;&gt;, #&lt;Aws::S3::ObjectSummary:0x007fe348712ef0     \n@bucket_name=\"my-pics\", @key=\"photos/9000101044430/1.jpg\", @data=#    \n&lt;struct Aws::S3::Types::Object key=\"photos/9000101044430/1.jpg\",     \nlast_modified=2018-03-01 05:14:59 UTC,     \netag=\"\\\"308ab75c98257b821469b4b93e9ca8f8\\\"\", size=141066,    \nstorage_class=\"STANDARD\", owner=#&lt;struct Aws::S3::Types::Owner    \ndisplay_name=\"mohammed.eliass\"]\n</code></pre>\n\n<p>So any ideas how should I get rid of all this and get only the keys?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1520420341, "post_id": 49150165, "comment_id": 85304671, "body": "Whether they are hex or decimal, numbers are numbers. There is no distinction. Do you mean you have strings representing numbers in hex?"}], "answers": [{"comments": [{"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 3, "creation_date": 1520440496, "post_id": 49150195, "comment_id": 85318558, "body": "Important difference: <code>&quot;g&quot;.to_i(16)</code> is 0, <code>Integer(&quot;g&quot;,16)</code> is an ArgumentError."}, {"owner": {"reputation": 143, "user_id": 2909180, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b679bf3d6512c5e95106931a34f81afb?s=128&d=identicon&r=PG&f=1", "display_name": "user2909180", "link": "https://stackoverflow.com/users/2909180/user2909180"}, "edited": false, "score": 0, "creation_date": 1520498414, "post_id": 49150195, "comment_id": 85342524, "body": "Thanks, perfect solution."}, {"owner": {"reputation": 9435, "user_id": 2626000, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/j8GY0.jpg?s=128&g=1", "display_name": "Aaron Christiansen", "link": "https://stackoverflow.com/users/2626000/aaron-christiansen"}, "reply_to_user": {"reputation": 143, "user_id": 2909180, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b679bf3d6512c5e95106931a34f81afb?s=128&d=identicon&r=PG&f=1", "display_name": "user2909180", "link": "https://stackoverflow.com/users/2909180/user2909180"}, "edited": false, "score": 1, "creation_date": 1520498668, "post_id": 49150195, "comment_id": 85342677, "body": "@user2909180 No problem. Please accept this answer by clicking the green checkmark beside it to make the question appear as solved."}, {"owner": {"reputation": 977, "user_id": 96729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34326f2b063313a5dbc8a507dc10bd2c?s=128&d=identicon&r=PG", "display_name": "Arnaud Meuret", "link": "https://stackoverflow.com/users/96729/arnaud-meuret"}, "reply_to_user": {"reputation": 143, "user_id": 2909180, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b679bf3d6512c5e95106931a34f81afb?s=128&d=identicon&r=PG&f=1", "display_name": "user2909180", "link": "https://stackoverflow.com/users/2909180/user2909180"}, "edited": false, "score": 0, "creation_date": 1575455049, "post_id": 49150195, "comment_id": 104569589, "body": "@user2909180 You&#39;re supposed to <i>accept</i> this answer."}], "tags": [], "owner": {"reputation": 9435, "user_id": 2626000, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/j8GY0.jpg?s=128&g=1", "display_name": "Aaron Christiansen", "link": "https://stackoverflow.com/users/2626000/aaron-christiansen"}, "is_accepted": false, "score": 23, "last_activity_date": 1520420178, "creation_date": 1520420178, "answer_id": 49150195, "question_id": 49150165, "link": "https://stackoverflow.com/questions/49150165/convert-hex-to-decimal-in-ruby/49150195#49150195", "title": "Convert hex to decimal in Ruby", "body": "<p><code>String#to_i</code> accepts an extra argument, which is the number base to use. Hexadecimal is base 16, so the following will work for you:</p>\n\n<pre><code>\"01\".to_i(16)\n</code></pre>\n\n<p>Calling the <code>Integer</code> function on it will also work, so long as the number has an <code>0x</code> prefix:</p>\n\n<pre><code>Integer(\"0x01\")\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 2909180, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b679bf3d6512c5e95106931a34f81afb?s=128&d=identicon&r=PG&f=1", "display_name": "user2909180", "link": "https://stackoverflow.com/users/2909180/user2909180"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5632, "favorite_count": 0, "answer_count": 1, "score": 9, "last_activity_date": 1520420469, "creation_date": 1520420105, "last_edit_date": 1520420469, "question_id": 49150165, "link": "https://stackoverflow.com/questions/49150165/convert-hex-to-decimal-in-ruby", "title": "Convert hex to decimal in Ruby", "body": "<p>I have hex numbers, and I want to convert them into decimal numbers. For example, 01 -> 1,  09 -> 9, 12 -> 18.</p>\n\n<p>I tried: </p>\n\n<pre><code>01.unpack(\"n\")\n</code></pre>\n\n<p>but that failed.</p>\n\n<pre><code>\"01\".unpack(\"n\") # =&gt; [12337]\n</code></pre>\n\n<p>That is not what I want.</p>\n\n<p>Do you know the correct answer?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "unit-testing", "tdd"], "comments": [{"owner": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "edited": false, "score": 0, "creation_date": 1520423122, "post_id": 49150002, "comment_id": 85306385, "body": "Is this a rails project ? Why dont you use built in test <a href=\"http://guides.rubyonrails.org/testing.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/testing.html</a> or rspec ? <a href=\"https://github.com/rspec/rspec-rails\" rel=\"nofollow noreferrer\">github.com/rspec/rspec-rails</a>"}, {"owner": {"reputation": 1437, "user_id": 434616, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0ee9e73378cc090755664dffb2ea70f8?s=128&d=identicon&r=PG", "display_name": "thevikas", "link": "https://stackoverflow.com/users/434616/thevikas"}, "reply_to_user": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "edited": false, "score": 0, "creation_date": 1520509616, "post_id": 49150002, "comment_id": 85349531, "body": "testting doc is not explaining how to run multiple files together. i guess im not using rspec. using <code>ActionController::TestCase</code>"}, {"owner": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "edited": false, "score": 0, "creation_date": 1520509726, "post_id": 49150002, "comment_id": 85349585, "body": "First thing I noticed: You name one test <code>abc.rb</code>, but the test suite will only load tests with that ending <code>*_test.rb</code>. So your file should be <code>abc_test.rb</code>"}, {"owner": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "edited": false, "score": 0, "creation_date": 1520509776, "post_id": 49150002, "comment_id": 85349613, "body": "From the docs: &quot;We can run all of our tests at once by using the <code>bin&#47;rails test</code> command.&quot;"}, {"owner": {"reputation": 1437, "user_id": 434616, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0ee9e73378cc090755664dffb2ea70f8?s=128&d=identicon&r=PG", "display_name": "thevikas", "link": "https://stackoverflow.com/users/434616/thevikas"}, "reply_to_user": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "edited": false, "score": 0, "creation_date": 1520509891, "post_id": 49150002, "comment_id": 85349683, "body": "can u share how the command line should be?"}, {"owner": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "edited": false, "score": 0, "creation_date": 1520509929, "post_id": 49150002, "comment_id": 85349698, "body": "<code>$ rails test</code> or <code>$ bin&#47;rails test</code> don&#39;t work ?"}, {"owner": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "edited": false, "score": 0, "creation_date": 1520509944, "post_id": 49150002, "comment_id": 85349716, "body": "You have to be in the project root"}, {"owner": {"reputation": 1437, "user_id": 434616, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0ee9e73378cc090755664dffb2ea70f8?s=128&d=identicon&r=PG", "display_name": "thevikas", "link": "https://stackoverflow.com/users/434616/thevikas"}, "reply_to_user": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "edited": false, "score": 0, "creation_date": 1520509969, "post_id": 49150002, "comment_id": 85349731, "body": "my bin/rails command does not work."}, {"owner": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "edited": false, "score": 0, "creation_date": 1520510065, "post_id": 49150002, "comment_id": 85349781, "body": "Rails installed globally ? <code>gem install rails</code>"}, {"owner": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "edited": false, "score": 0, "creation_date": 1520510189, "post_id": 49150002, "comment_id": 85349860, "body": "Sorry, it&#39;s rails 3. Let me search for the command"}, {"owner": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "edited": false, "score": 0, "creation_date": 1520510405, "post_id": 49150002, "comment_id": 85349997, "body": "Checkout my answer"}], "answers": [{"comments": [{"owner": {"reputation": 1437, "user_id": 434616, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0ee9e73378cc090755664dffb2ea70f8?s=128&d=identicon&r=PG", "display_name": "thevikas", "link": "https://stackoverflow.com/users/434616/thevikas"}, "edited": false, "score": 0, "creation_date": 1520521661, "post_id": 49172536, "comment_id": 85357798, "body": "tried that too. gives: <code>~&#47;.bundle&#47;ruby&#47;1.9.1&#47;gems&#47;rake-10.4.2&#47;lib&#47;rake&#47;trace_output.&zwnj;&#8203;rb:16:in block in trace_on: invalid byte sequence in US-ASCII (ArgumentError)</code>"}, {"owner": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "reply_to_user": {"reputation": 1437, "user_id": 434616, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0ee9e73378cc090755664dffb2ea70f8?s=128&d=identicon&r=PG", "display_name": "thevikas", "link": "https://stackoverflow.com/users/434616/thevikas"}, "edited": false, "score": 0, "creation_date": 1520522495, "post_id": 49172536, "comment_id": 85358375, "body": "OK, this error has nothing todo with the actual question. This can happen, if you have gems in your gemset which are not defined in UTF-8 . It can be really hard to find out which gems causes this. THe best approach is to deinstall them step by step and find the one"}, {"owner": {"reputation": 1437, "user_id": 434616, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0ee9e73378cc090755664dffb2ea70f8?s=128&d=identicon&r=PG", "display_name": "thevikas", "link": "https://stackoverflow.com/users/434616/thevikas"}, "edited": false, "score": 0, "creation_date": 1520781767, "post_id": 49172536, "comment_id": 85446701, "body": "did not. still using find and xargs to do full tests."}], "tags": [], "owner": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "is_accepted": true, "score": 1, "last_activity_date": 1520511352, "last_edit_date": 1520511352, "creation_date": 1520510300, "answer_id": 49172536, "question_id": 49150002, "link": "https://stackoverflow.com/questions/49150002/how-to-rails-test-all-cases-together-like-a-test-suite/49172536#49172536", "title": "how to rails test all cases together like a test suite", "body": "<ol>\n<li><p>Make sure you name the test files with that ending: *_test.rb</p></li>\n<li><p>In Rails 3 you can run the whole testsuite like the following:</p></li>\n</ol>\n\n<p>-</p>\n\n<pre><code>$ rake test\n</code></pre>\n\n<p>or</p>\n\n<pre><code>$ bundle exec rake test\n</code></pre>\n\n<p>Read more: <a href=\"http://guides.rubyonrails.org/v3.2/testing.html#rake-tasks-for-running-your-tests\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/v3.2/testing.html#rake-tasks-for-running-your-tests</a></p>\n"}], "owner": {"reputation": 1437, "user_id": 434616, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0ee9e73378cc090755664dffb2ea70f8?s=128&d=identicon&r=PG", "display_name": "thevikas", "link": "https://stackoverflow.com/users/434616/thevikas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "accepted_answer_id": 49172536, "answer_count": 1, "score": 0, "last_activity_date": 1520511352, "creation_date": 1520419587, "question_id": 49150002, "link": "https://stackoverflow.com/questions/49150002/how-to-rails-test-all-cases-together-like-a-test-suite", "title": "how to rails test all cases together like a test suite", "body": "<p>I have few test case files in test/functional and they all need to be executed seperately.</p>\n\n<pre><code>ruby -Itest test/functional/abc.rb\n</code></pre>\n\n<p>It takes 30 secs just for rails to load and 5 secs to do tests. \nIs there a way to just load rails once and run all the case files in that session?</p>\n\n<p>This is a very bad working solution as it is loading rails 5 times.</p>\n\n<pre><code>find test/functional -name '*.rb'|xargs -L 1 ruby -Itest\n</code></pre>\n\n<p>I need a solution for old rails 3.2 with ruby 1.9.</p>\n\n<p>Just to try I had written all.rb but I guess constructors need args so it did not work.</p>\n\n<pre><code>require 'test_helper'\nrequire 'functional/api_controller_test.rb'\n\nApiControllerTest.new()\n</code></pre>\n"}, {"tags": ["python", "ruby", "chef-infra", "chef-recipe", "aws-opsworks"], "answers": [{"comments": [{"owner": {"reputation": 1701, "user_id": 2083053, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/a6135955b254b33d6d2f6b08dec65480?s=128&d=identicon&r=PG", "display_name": "Sudhanshu Mishra", "link": "https://stackoverflow.com/users/2083053/sudhanshu-mishra"}, "edited": false, "score": 0, "creation_date": 1520504396, "post_id": 49158482, "comment_id": 85346373, "body": "Thanks a lot! This was the issue sudo apt-get update W: GPG error: <a href=\"http://ppa.launchpad.net\" rel=\"nofollow noreferrer\">ppa.launchpad.net</a> trusty InRelease: The following signatures couldn&#39;t be verified because the public key is not available: NO_PUBKEY 5BB92C09DB82666C + sudo apt-get -yq install python3.5 E: There are problems and -y was used without --force-yes"}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 1701, "user_id": 2083053, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/a6135955b254b33d6d2f6b08dec65480?s=128&d=identicon&r=PG", "display_name": "Sudhanshu Mishra", "link": "https://stackoverflow.com/users/2083053/sudhanshu-mishra"}, "edited": false, "score": 0, "creation_date": 1520530586, "post_id": 49158482, "comment_id": 85363744, "body": "You can use apt_repository resource to set up the repo, which understands how to import a repo key."}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": true, "score": 3, "last_activity_date": 1520445641, "creation_date": 1520445641, "answer_id": 49158482, "question_id": 49149750, "link": "https://stackoverflow.com/questions/49149750/opsworks-log-shows-a-bash-block-ran-successfully-but-it-did-not/49158482#49158482", "title": "Opsworks log shows a bash block ran successfully but it did not", "body": "<p>Add <code>set -e</code> to the top of your shell script and you would probably see it fail on one of the intermediary commands. Why are you running as a non-root user and then trying to use <code>sudo</code> though? Overall this seems like a very odd shell script. Might want to add <code>set -x</code> to help with debugging too.</p>\n"}], "owner": {"reputation": 1701, "user_id": 2083053, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/a6135955b254b33d6d2f6b08dec65480?s=128&d=identicon&r=PG", "display_name": "Sudhanshu Mishra", "link": "https://stackoverflow.com/users/2083053/sudhanshu-mishra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 49158482, "answer_count": 1, "score": 0, "last_activity_date": 1520445641, "creation_date": 1520418886, "last_edit_date": 1520427995, "question_id": 49149750, "link": "https://stackoverflow.com/questions/49149750/opsworks-log-shows-a-bash-block-ran-successfully-but-it-did-not", "title": "Opsworks log shows a bash block ran successfully but it did not", "body": "<p>I've this block in one of the recipes which is being included in other recipe.</p>\n\n<pre><code>bash 'setup' do\n    cwd \"#{node[:'python-virtualenv'][:home]}\"\n    user 'ubuntu'\n    environment \"HOME\" =&gt; \"#{node[:'python-virtualenv'][:home]}\"\n    code &lt;&lt;-EOH\n    sudo add-apt-repository -y ppa:fkrull/deadsnakes\n    sudo apt-get update\n    sudo apt-get -yq install python3.5\n    curl -s https://bootstrap.pypa.io/get-pip.py | sudo python3.5\n    sudo pip3.5 install virtualenv virtualenvwrapper\n    echo \"export WORKON_HOME=#{node[:'python-virtualenv'][:home]}.virtualenvs/\" &gt; #{node[:'python-virtualenv'][:home]}.bash_profile\n    echo \"export VIRTUALENVWRAPPER_PYTHON=$(which python3.5)\" &gt; #{node[:'python-virtualenv'][:home]}.bash_profile\n    echo \"source /usr/local/bin/virtualenvwrapper.sh\" &gt;&gt; #{node[:'python-virtualenv'][:home]}.bash_profile\n    EOH\nend\n</code></pre>\n\n<p>The logs say that this block got executed but when I ssh into the instance, it did not get installed.</p>\n\n<p>Here's the relevant part of the log</p>\n\n<pre><code>[2018-03-07T09:59:33+00:00] INFO: Processing bash[setup] action run (app::default line 12)\n[2018-03-07T09:59:40+00:00] INFO: bash[setup] ran successfully\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "soap", "wash-out"], "comments": [{"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1520418880, "post_id": 49149518, "comment_id": 85303692, "body": "Do you have any wrapper on UniqueId?"}, {"owner": {"reputation": 192, "user_id": 6078174, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh3.googleusercontent.com/-mSfmR5-qURA/AAAAAAAAAAI/AAAAAAAAAOU/4wPjvIHS-BQ/photo.jpg?sz=128", "display_name": "Raman Preet Singh", "link": "https://stackoverflow.com/users/6078174/raman-preet-singh"}, "reply_to_user": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1520418954, "post_id": 49149518, "comment_id": 85303736, "body": "No, it&#39;s a stand alone XML element."}], "owner": {"reputation": 192, "user_id": 6078174, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh3.googleusercontent.com/-mSfmR5-qURA/AAAAAAAAAAI/AAAAAAAAAOU/4wPjvIHS-BQ/photo.jpg?sz=128", "display_name": "Raman Preet Singh", "link": "https://stackoverflow.com/users/6078174/raman-preet-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 148, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520418268, "creation_date": 1520418268, "question_id": 49149518, "link": "https://stackoverflow.com/questions/49149518/duplicate-elements-in-soap-request-using-wash-out-gem-in-ruby", "title": "Duplicate elements in soap request using wash_out gem in Ruby", "body": "<p>I'm developing a SOAP service using wash_out gem in Ruby. I have a soap request where I'll be getting duplicate elements (Unique ID in the request given below) in soap request. But I can't find a way to define these elements in the args parameter.</p>\n\n<p>The SOAP request is :</p>\n\n<pre><code>&lt;OTA_CancelRQ Version=\"2.1\" EchoToken=\"201403211421\"\n xmlns=\"http://www.opentravel.org/OTA/2003/05\"\n xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"&gt;\n\n &lt;UniqueID ID=\"859623\" Type=\"501\"/&gt;\n\n &lt;UniqueID ID=\"ABCDEF\" Type=\"502\"/&gt;\n\n &lt;UniqueID ID=\"123456\" Type=\"10\"/&gt;\n\n &lt;Reasons&gt;\n &lt;Reason&gt;business plan changed&lt;/Reason&gt;\n &lt;/Reasons&gt;\n&lt;/OTA_CancelRQ&gt;\n</code></pre>\n\n<p>Here is the code in my wash out controller :</p>\n\n<pre><code>soap_service namespace: 'urn:WashOut'\n\n    soap_action \"OTA_CancelRQ\",\n                  :args =&gt; {\n                    :OTA_CancelRQ =&gt;{\n\n                      :UniqueID =&gt; {\n                        :@ID =&gt; :integer,\n                        :@Type =&gt; :integer\n                      },\n                      :Reasons =&gt; [{:Reason =&gt; :string }]\n                    }},\n                  :return =&gt; :string,\n                  :to =&gt; :cancel_booking\n</code></pre>\n\n<p>These args generate a WSDL with with only one UniqueId element. I have tried defining the UniqueId multiple times in the args but it is generating only one UniqueId element.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1520418191, "post_id": 49149289, "comment_id": 85303216, "body": "huh? It&#39;s as simple as trying to fetch by <code>&quot;error&quot;</code> first. If a value with such key exists, then you don&#39;t try to fetch the rate."}], "answers": [{"comments": [{"owner": {"reputation": 1521, "user_id": 7177640, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/21ab719e4dfae3533a20da4f52e5c9e7?s=128&d=identicon&r=PG", "display_name": "nattfodd", "link": "https://stackoverflow.com/users/7177640/nattfodd"}, "edited": false, "score": 0, "creation_date": 1520418650, "post_id": 49149581, "comment_id": 85303537, "body": "<code>dig</code> is a nice method, indeed. To mention, it works only in ruby 2.3 and above."}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "reply_to_user": {"reputation": 1521, "user_id": 7177640, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/21ab719e4dfae3533a20da4f52e5c9e7?s=128&d=identicon&r=PG", "display_name": "nattfodd", "link": "https://stackoverflow.com/users/7177640/nattfodd"}, "edited": false, "score": 0, "creation_date": 1520418916, "post_id": 49149581, "comment_id": 85303714, "body": "@nattfodd yes, in fact I think it would be nice if <code>nil</code> responded to <code>dig</code> as well... that way you wouldn&#39;t even need to worry about whether <code>statistics1</code> was a hash. I&#39;ve done that monkey patch in some of my projects."}, {"owner": {"reputation": 51, "user_id": 7434218, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/98164866ce30c032de54d4e51625d86c?s=128&d=identicon&r=PG&f=1", "display_name": "frodo", "link": "https://stackoverflow.com/users/7434218/frodo"}, "edited": false, "score": 0, "creation_date": 1520419034, "post_id": 49149581, "comment_id": 85303781, "body": "@SteveTurczyn  dig works like charm, then i&#39;ll filter data i need. thanks steve."}], "tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": false, "score": 1, "last_activity_date": 1520418459, "creation_date": 1520418459, "answer_id": 49149581, "question_id": 49149289, "link": "https://stackoverflow.com/questions/49149289/data-fetching-ruby/49149581#49149581", "title": "Data fetching Ruby", "body": "<p>You can use the default option in <code>#fetch</code> to return an empty hash if the key isn't present.</p>\n\n<pre><code>statistics1.fetch(\"message_stats\", ()).fetch(\"publish_in_details\", {}).fetch(\"rate\", nil)\n</code></pre>\n\n<p>Even simper would be the <code>#dig</code> method</p>\n\n<pre><code>statistics1.dig(\"message_stats\", \"publish_in_details\", \"rate\")\n</code></pre>\n\n<p>If any keys are missing, <code>nil</code> is gracefully returned.</p>\n"}, {"tags": [], "owner": {"reputation": 1521, "user_id": 7177640, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/21ab719e4dfae3533a20da4f52e5c9e7?s=128&d=identicon&r=PG", "display_name": "nattfodd", "link": "https://stackoverflow.com/users/7177640/nattfodd"}, "is_accepted": true, "score": 1, "last_activity_date": 1520419119, "last_edit_date": 1520419119, "creation_date": 1520418475, "answer_id": 49149588, "question_id": 49149289, "link": "https://stackoverflow.com/questions/49149289/data-fetching-ruby/49149588#49149588", "title": "Data fetching Ruby", "body": "<p>If I got your question right, there're several way to do that:</p>\n\n<p>In Ruby 2.3 and above (thanks to <strong>@Steve Turczyn</strong>)</p>\n\n<pre><code>statistics1.dig('message_stats', 'publish_in_details', 'rate')\n</code></pre>\n\n<p>Almost like yours, second parameter of <code>fetch</code> sets default value if the key wasn't found:</p>\n\n<pre><code>statistics1.fetch(\"message_stats\", {}).fetch(\"publish_in_details\", {}).fetch(\"rate\", nil)\n</code></pre>\n\n<p>Or you can do something like that:</p>\n\n<pre><code>message_stats = statistics1['message_stats']\nnext unless message_stats\n\npublish_in_details = message_stats['publish_in_details']\nnext unless publish_in_details\n\npublish_in_details['rate']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7032, "user_id": 1743174, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9f871161f754442df697dce1cede77a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dipak Gupta", "link": "https://stackoverflow.com/users/1743174/dipak-gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1520418793, "creation_date": 1520418793, "answer_id": 49149726, "question_id": 49149289, "link": "https://stackoverflow.com/questions/49149289/data-fetching-ruby/49149726#49149726", "title": "Data fetching Ruby", "body": "<p>Other two also provide solution for your question, Below is description for same.</p>\n\n<pre><code>fetch(key_name) # get the value if the key exists, raise a KeyError if it doesn't\nfetch(key_name, default_value) # get the value if the key exists, return default_value otherwise\n</code></pre>\n\n<p>So use below will solve your issue.</p>\n\n<pre><code>statistics1.fetch(\"message_stats\", ()).fetch(\"publish_in_details\", {}).fetch(\"rate\", nil)\n</code></pre>\n\n<p>also you can check if error present or not, and then handle case accordingly.</p>\n\n<pre><code>if fetch(\"message_stats\", false)\n  statistics1.fetch(\"message_stats\").fetch(\"publish_in_details\").fetch(\"rate\")\nend\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 7434218, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/98164866ce30c032de54d4e51625d86c?s=128&d=identicon&r=PG&f=1", "display_name": "frodo", "link": "https://stackoverflow.com/users/7434218/frodo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "accepted_answer_id": 49149588, "answer_count": 3, "score": 1, "last_activity_date": 1520421925, "creation_date": 1520417597, "last_edit_date": 1520421925, "question_id": 49149289, "link": "https://stackoverflow.com/questions/49149289/data-fetching-ruby", "title": "Data fetching Ruby", "body": "<p>I'm running this following API call and getting list to vhosts and passing to another API and getting some values, those works fine. </p>\n\n<pre><code>response = conn.get(\"/api/vhosts\")\nstatistics = JSON.parse(response.body)\n\nstatistics.each do |vhosts|\n  response1 = conn.get(\"/api/exchanges/#{vhosts[\"name\"]}/direct_queue_exchange\")\n  statistics1 = JSON.parse(response1.body)\n  statistics1.fetch(\"message_stats\").fetch(\"publish_in_details\").fetch(\"rate\")    \nend\n</code></pre>\n\n<p>sample output: </p>\n\n<pre><code>output -1 - {\"error\"=&gt;\"Object Not Found\", \"reason\"=&gt;\"Not Found\"}\n\noutput -2 - {\"message_stats\"=&gt;{\"publish_in_details\"=&gt;{\"rate\"=&gt;0.0}, \"publish_in\"=&gt;91, \"publish_out_details\"=&gt;{\"rate\"=&gt;0.0}, \"publish_out\"=&gt;91}, \"outgoing\"=&gt;[], \"incoming\"=&gt;[], \"user_who_performed_action\"=&gt;\"user_122f5b58\", \"arguments\"=&gt;{}, \"internal\"=&gt;false, \"auto_delete\"=&gt;false, \"durable\"=&gt;true, \"type\"=&gt;\"direct\", \"vhost\"=&gt;\"vhost_2388ce36\", \"name\"=&gt;\"direct_queue_exchange\"}\n    {\"outgoing\"=&gt;[], \"incoming\"=&gt;[], \"user_who_performed_action\"=&gt;\"user_d6b8f477\", \"arguments\"=&gt;{}, \"internal\"=&gt;false, \"auto_delete\"=&gt;false, \"durable\"=&gt;true, \"type\"=&gt;\"direct\", \"vhost\"=&gt;\"vhost_37892b86\", \"name\"=&gt;\"direct_queue_exchange\"}\n</code></pre>\n\n<p>I have ran into problem fetching values I want. For example in my code I'm fetching these values like \"rate\" and I'm getting this error: <code>key not found: \"message_stats\"</code> because some outputs doesn't contains keys that I'm looking</p>\n\n<p>How can I ignore outputs like this <code>{\"error\"=&gt;\"Object Not Found\", \"reason\"=&gt;\"Not Found\"}</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ssl", "certificate", "savon"], "comments": [{"owner": {"reputation": 1432, "user_id": 1184912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5f9407e5093fbd916ea4d80c7a499f?s=128&d=identicon&r=PG", "display_name": "eyevan", "link": "https://stackoverflow.com/users/1184912/eyevan"}, "edited": false, "score": 0, "creation_date": 1520419333, "post_id": 49149117, "comment_id": 85303996, "body": "I would suggest that you examine the server certificate with OpenSSL CLI tools like so: <code>openssl s_client -connect example.com:443</code>  The certificate of the host you are connecting to might actually be invalid (i.e., expired)."}], "answers": [{"comments": [{"owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "edited": false, "score": 0, "creation_date": 1520540371, "post_id": 49157463, "comment_id": 85369118, "body": "Thanks for your reply. How did you know that the problem is in <code>geocoder</code>? Did you see that in logs (I don&#39;t see anything there)?"}, {"owner": {"reputation": 6929, "user_id": 4909076, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/73808a90d5413f6f9dfd6e4090c02bda?s=128&d=identicon&r=PG&f=1", "display_name": "tim_xyz", "link": "https://stackoverflow.com/users/4909076/tim-xyz"}, "reply_to_user": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "edited": false, "score": 0, "creation_date": 1520545953, "post_id": 49157463, "comment_id": 85371970, "body": "Added reply to my answer."}], "tags": [], "owner": {"reputation": 6929, "user_id": 4909076, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/73808a90d5413f6f9dfd6e4090c02bda?s=128&d=identicon&r=PG&f=1", "display_name": "tim_xyz", "link": "https://stackoverflow.com/users/4909076/tim-xyz"}, "is_accepted": false, "score": 0, "last_activity_date": 1520545933, "last_edit_date": 1520545933, "creation_date": 1520442135, "answer_id": 49157463, "question_id": 49149117, "link": "https://stackoverflow.com/questions/49149117/rails-ubuntu-sslv3-read-server-certificate-b-certificate-verify-failed/49157463#49157463", "title": "Rails/Ubuntu: SSLv3 read server certificate B: certificate verify failed", "body": "<p>I also started getting this error a few days ago.</p>\n\n<p>Removing <code>geocoder</code> fixed the issue.</p>\n\n<p>Per Heroku support, sometimes these errors occur when an external provider changes their SSL configuration.</p>\n\n<p><strong>Reply to comment:</strong></p>\n\n<p>Nothing in logs specifically saying geocoder, but I saw in my error reports (via exception notifier gem) that the app crashed, with this error, on lines making a request to geocoder. </p>\n\n<p>I also had a callback on the users model, and noticed the app crashed anytime a user was saved/updated.</p>\n\n<p>Lucky guess I suppose.</p>\n"}, {"comments": [{"owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "edited": false, "score": 0, "creation_date": 1520541884, "post_id": 49161855, "comment_id": 85369902, "body": "Thanks - I ran the command and it doesn&#39;t show me any certificates - this the output: <code>gethostbyname failure connect:errno=0</code>"}, {"owner": {"reputation": 1432, "user_id": 1184912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5f9407e5093fbd916ea4d80c7a499f?s=128&d=identicon&r=PG", "display_name": "eyevan", "link": "https://stackoverflow.com/users/1184912/eyevan"}, "reply_to_user": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "edited": false, "score": 0, "creation_date": 1520543597, "post_id": 49161855, "comment_id": 85370726, "body": "@user984621 seems like a network issue and not an SSL issue. Are you sure you are using the correct hostname in the command?"}], "tags": [], "owner": {"reputation": 1432, "user_id": 1184912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5f9407e5093fbd916ea4d80c7a499f?s=128&d=identicon&r=PG", "display_name": "eyevan", "link": "https://stackoverflow.com/users/1184912/eyevan"}, "is_accepted": false, "score": 0, "last_activity_date": 1520459657, "creation_date": 1520459657, "answer_id": 49161855, "question_id": 49149117, "link": "https://stackoverflow.com/questions/49149117/rails-ubuntu-sslv3-read-server-certificate-b-certificate-verify-failed/49161855#49161855", "title": "Rails/Ubuntu: SSLv3 read server certificate B: certificate verify failed", "body": "<p>Run <code>openssl s_client -showcerts -connect  server_you_are_connecting_to.com:443</code> and examine the certificate. After this you should find yourself in one of the following situations:</p>\n\n<ol>\n<li><p>The certificate is valid (has valid expiry date and common name), but it is signed by the certificate authority (CA) that isn't trusted by your system. If that's the case, you would need to add the CA's certificate to the trusted store or update the ca-bundle package on your system.</p></li>\n<li><p>The certificate is invalid (is expired or has the wrong common name). If disabling peer SSL certificate verification isn't an option for you, then you can implement your own certificate verification callback, for example as described <a href=\"https://stackoverflow.com/questions/22093042/implementing-https-certificate-pubkey-pinning-with-ruby\">here</a> -- in this case the code wouldn't be relying on system's trusted store, but rather check that the peer server uses a specific certificate.</p></li>\n</ol>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 562, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1520545933, "creation_date": 1520417167, "last_edit_date": 1520423972, "question_id": 49149117, "link": "https://stackoverflow.com/questions/49149117/rails-ubuntu-sslv3-read-server-certificate-b-certificate-verify-failed", "title": "Rails/Ubuntu: SSLv3 read server certificate B: certificate verify failed", "body": "<p>Two days ago, I started seeing this error on the production server of my app (on staging everything works fine). I found a lot of topics here on SO, but none of them solved this issue for me.</p>\n\n<p>Here's the piece of code that's causing this error message:</p>\n\n<pre><code>  @client = Savon.client(wsdl: wsdl_url)\n  #@client = Savon.client(wsdl: wsdl_url, ssl_verify_mode: :none) # this sovles the problem, but I don't want to skip the verification \n</code></pre>\n\n<p>On SO, I also found that a possible solution might be to create an initializer file and put there the following:</p>\n\n<pre><code>require 'open-uri'\nrequire 'net/https'\n\nmodule Net\n  class HTTP\n    alias_method :original_use_ssl=, :use_ssl=\n\n    def use_ssl=(flag)\n      #self.ca_path = Rails.root.join('lib/ca-bundle.crt').to_s\n      self.ssl_version = :TLSv1_2 # added\n      self.ca_file = '/etc/ssl/certs/ca-certificates.crt' # the file exists\n      self.verify_mode = OpenSSL::SSL::VERIFY_PEER\n      self.original_use_ssl = flag\n    end\n  end\nend\n</code></pre>\n\n<p>But this, unfortunately, didn't solve the error. I also tried to reinstall the certificate on the production Ubuntu (14.04) server</p>\n\n<pre><code>sudo apt-get install openssl ca-certificates\n</code></pre>\n\n<p>The package has been upgraded, but the error is unfortunately still here.</p>\n\n<p>Any tips what could I do yet and get rid of the error?</p>\n\n<p><strong>EDIT:</strong> How or where should I start debugging?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "wizard"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 3204458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15cd2b5566dbdd5300a4c70e37cfd94c?s=128&d=identicon&r=PG&f=1", "display_name": "Simen", "link": "https://stackoverflow.com/users/3204458/simen"}, "edited": false, "score": 0, "creation_date": 1520455012, "post_id": 49148760, "comment_id": 85327067, "body": "Thanks a lot for spotting the mistake!"}], "tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": true, "score": 0, "last_activity_date": 1520416146, "creation_date": 1520416146, "answer_id": 49148760, "question_id": 49148311, "link": "https://stackoverflow.com/questions/49148311/data-not-persisted-between-steps-in-wizard/49148760#49148760", "title": "Data not persisted between steps in wizard", "body": "<p>Over here you're passing the <code>goal_attributes</code> to <code>initialize</code>, but you're never using them.</p>\n\n<pre><code>  def initialize(goal_attributes)\n    @goal = ::Goal.new(goal)\n  end\n</code></pre>\n\n<p>If you look at Nicolas Blanco's code he doesn't make that mistake.</p>\n"}], "owner": {"reputation": 61, "user_id": 3204458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15cd2b5566dbdd5300a4c70e37cfd94c?s=128&d=identicon&r=PG&f=1", "display_name": "Simen", "link": "https://stackoverflow.com/users/3204458/simen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 49148760, "answer_count": 1, "score": 0, "last_activity_date": 1520416146, "creation_date": 1520414796, "question_id": 49148311, "link": "https://stackoverflow.com/questions/49148311/data-not-persisted-between-steps-in-wizard", "title": "Data not persisted between steps in wizard", "body": "<p>I have followed <a href=\"https://medium.com/@nicolasblanco/developing-a-wizard-or-multi-steps-forms-in-rails-d2f3b7c692ce\" rel=\"nofollow noreferrer\">Nicolas Blanco's tutorial</a> to make a \"goal\" wizard for my app.</p>\n\n<p>There are two steps in the wizard. The first consisting of the form fields \"name\", \"description\" and \"plan\", the second has \"deadline\", which is a datetimepicker, \"reporting frequency\" and \"days missed tolerance\".</p>\n\n<p>It seems to work when I click continue in the first step, but on clicking finish in the second step, the object @goal_wizard doesn't seem to include the parameters from the first step.</p>\n\n<p>My goal.rb:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>module Wizard\n  module Goal\n    STEPS = %w(step1 step2).freeze\n\n    class Base\n      include ActiveModel::Model\n      attr_accessor :goal\n\n      delegate *::Goal.attribute_names.map { |attr| [attr, \"#{attr}=\"] }.flatten, to: :goal\n\n      def initialize(goal_attributes)\n        @goal = ::Goal.new(goal)\n      end\n    end\n\n    class Step1 &lt; Base\n      validates :name, presence: true, length: { maximum: 50 }\n      validates :description, presence: true, length: { maximum: 300 }\n      validates :plan, presence: true, length: { maximum: 1000 }\n    end\n\n    class Step2 &lt; Step1\n      validates :reporting_frequency, presence: true, \n                                  numericality: { greater_than_or_equal_to: 0 } \n      validates :days_missed_tolerance, presence: true, \n                                    numericality: { greater_than_or_equal_to: 0}\n      validates :deadline, presence: true\n    end\n  end\nend\n</code></pre>\n\n<p>wizards_controller.rb:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class WizardsController &lt; ApplicationController\n  before_action :load_goal_wizard, except: :validate_step\n\n  def validate_step\n    current_step = params[:current_step]\n\n    @goal_wizard = wizard_goal_for_step(current_step)\n    @goal_wizard.goal.attributes = goal_wizard_params\n    session[:goal_attributes] = @goal_wizard.goal.attributes\n\n\n    if @goal_wizard.valid?\n      next_step = wizard_goal_next_step(current_step)\n      create and return unless next_step\n\n      redirect_to action: next_step\n    else\n      render current_step\n    end\n  end\n\n  def create\n    # @user = current_user\n    # @goal = @user.goals.new(@goal_wizard.goal)\n    if @goal_wizard.goal.save\n      session[:goal_attributes] = nil\n      redirect_to root_path, notice: 'Goal succesfully created!'\n    else\n      redirect_to({ action: Wizard::Goal::STEPS.first }, alert: 'There were a problem creating the goal.')\n    end\n  end\n\n  private\n\n  def load_goal_wizard\n    @goal_wizard = wizard_goal_for_step(action_name)\n  end\n\n  def wizard_goal_next_step(step)\n    Wizard::Goal::STEPS[Wizard::Goal::STEPS.index(step) + 1]\n  end\n\n  def wizard_goal_for_step(step)\n    raise InvalidStep unless step.in?(Wizard::Goal::STEPS)\n\n    \"Wizard::Goal::#{step.camelize}\".constantize.new(session[:goal_attributes])\n  end\n\n  def goal_wizard_params\n    params.require(:goal_wizard).permit(:name, :description, :plan, :deadline, :reporting_frequency, :days_missed_tolerance)\n  end\n\n  class InvalidStep &lt; StandardError; end\nend\n</code></pre>\n\n<p>step1.html.erb:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;ol class=\"breadcrumb\"&gt;\r\n  &lt;li class='active'&gt;Step 1&lt;/li&gt;\r\n  &lt;li&gt;Step 2&lt;/li&gt;\r\n&lt;/ol&gt;\r\n\r\n&lt;%= form_for @goal_wizard, as: :goal_wizard, url: validate_step_wizard_path do |f| %&gt;\r\n  &lt;%= render \"error_messages\" %&gt;\r\n\r\n  &lt;%= hidden_field_tag :current_step, 'step1' %&gt;\r\n  &lt;%= f.label :name %&gt;\r\n  &lt;%= f.text_field :name, class: \"form_control\" %&gt;\r\n  \r\n  &lt;%= f.label :description %&gt;\r\n  &lt;%= f.text_field :description, class: \"form_control\" %&gt;\r\n  \r\n  &lt;%= f.label :plan %&gt;\r\n  &lt;%= f.text_field :plan, class: \"form_control\" %&gt;\r\n\r\n  &lt;%= f.submit 'Continue', class: \"btn btn-primary\" %&gt;\r\n&lt;% end %&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>step2.html.erb:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;ol class=\"breadcrumb\"&gt;\r\n  &lt;li&gt;&lt;%= link_to \"Step 1\", step1_wizard_path %&gt;&lt;/li&gt;\r\n  &lt;li class=\"active\"&gt;Step 2&lt;/li&gt;\r\n&lt;/ol&gt;\r\n\r\n&lt;%= form_for @goal_wizard, as: :goal_wizard, url: validate_step_wizard_path do |f| %&gt;\r\n  &lt;%= render \"error_messages\" %&gt;\r\n\r\n  &lt;%= hidden_field_tag :current_step, 'step2' %&gt;\r\n   &lt;%= f.label :deadline %&gt;\r\n    &lt;div class='input-group date' id='datetimepicker1'&gt;\r\n      &lt;%= f.text_field :deadline, class: \"form-control\" %&gt;\r\n      &lt;span class=\"input-group-addon\"&gt;\r\n        &lt;span class=\"glyphicon glyphicon-calendar\"&gt;&lt;/span&gt;\r\n      &lt;/span&gt;\r\n    &lt;/div&gt;\r\n        \r\n  &lt;%= f.label \"How often do I want to report? (1 = every day)\" %&gt;\r\n  &lt;%= f.number_field :reporting_frequency, class: \"form_control\" %&gt;\r\n  \r\n  &lt;%= f.label \"How many times can I miss my report?\" %&gt;\r\n  &lt;%= f.number_field :days_missed_tolerance, class: \"form_control\" %&gt;\r\n  \r\n  \r\n  &lt;script type=\"text/javascript\"&gt;\r\n      $(function () {\r\n          $('#datetimepicker1').datetimepicker({\r\n             minDate:new Date()\r\n          });\r\n      });\r\n  &lt;/script&gt;\r\n\r\n  &lt;%= f.submit \"Finish\", class: \"btn btn-primary\" %&gt;\r\n&lt;% end %&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "capybara"], "comments": [{"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1520441778, "post_id": 49148017, "comment_id": 85319399, "body": "With which driver and browser"}, {"owner": {"reputation": 181, "user_id": 9212691, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Dd8An.gif?s=128&g=1", "display_name": "gilbertlc", "link": "https://stackoverflow.com/users/9212691/gilbertlc"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1520499378, "post_id": 49148017, "comment_id": 85343116, "body": "I use selenium and chrome"}], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 9212691, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Dd8An.gif?s=128&g=1", "display_name": "gilbertlc", "link": "https://stackoverflow.com/users/9212691/gilbertlc"}, "edited": false, "score": 0, "creation_date": 1520499967, "post_id": 49154162, "comment_id": 85343527, "body": "Your solution might work, I&#39;ll try it later. But I want to use <code>Datetime.current</code> for its value, I think it&#39;s more cleaner? I tried this <code>DateTime.current.to_json</code>, but when I run the specs, it says it is an invalid format."}], "tags": [], "owner": {"reputation": 1141, "user_id": 1404905, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/IYSNE.jpg?s=128&g=1", "display_name": "beniutek", "link": "https://stackoverflow.com/users/1404905/beniutek"}, "is_accepted": false, "score": 0, "last_activity_date": 1520432509, "creation_date": 1520432509, "answer_id": 49154162, "question_id": 49148017, "link": "https://stackoverflow.com/questions/49148017/how-to-fill-in-a-datetime-field-with-capybara/49154162#49154162", "title": "How to fill in a datetime field with capybara?", "body": "<p>from what I understand, you need to fill in a <strong>string</strong> representation of the datetime format</p>\n\n<p>examples of such dates are</p>\n\n<p>1990-12-31T23:59:60Z</p>\n\n<p>or</p>\n\n<p>1996-12-19T16:39:57-08:00</p>\n\n<p>so something like</p>\n\n<pre><code>fill_in datetimeinput, with: \"1990-12-31T23:59:60Z\"\n</code></pre>\n\n<p>should work (hope so!)</p>\n"}, {"comments": [{"owner": {"reputation": 181, "user_id": 9212691, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Dd8An.gif?s=128&g=1", "display_name": "gilbertlc", "link": "https://stackoverflow.com/users/9212691/gilbertlc"}, "edited": false, "score": 0, "creation_date": 1520581815, "post_id": 49181000, "comment_id": 85383042, "body": "Thanks your solution works! I just want to know why does capybara do not allow <code>to_json</code> format? I use this format in my javascript codes"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 181, "user_id": 9212691, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Dd8An.gif?s=128&g=1", "display_name": "gilbertlc", "link": "https://stackoverflow.com/users/9212691/gilbertlc"}, "edited": false, "score": 1, "creation_date": 1520593752, "post_id": 49181000, "comment_id": 85389640, "body": "@gilbertlcsndle It&#39;s not that capybara doesn&#39;t allow it - it&#39;s that Chrome doesn&#39;t expect the keys in that order. <code>to_json</code> produces a string like &quot;\\&quot;2018-03-09T11:04:59.243+00:00\\&quot;&quot; - if you manually click into the datetime-local input and start typing those keys you&#39;ll see that Chrome  doesn&#39;t accept them."}, {"owner": {"reputation": 181, "user_id": 9212691, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Dd8An.gif?s=128&g=1", "display_name": "gilbertlc", "link": "https://stackoverflow.com/users/9212691/gilbertlc"}, "edited": false, "score": 1, "creation_date": 1520596234, "post_id": 49181000, "comment_id": 85390942, "body": "It would be nice if capybara has a method for filling in datetime fields."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 181, "user_id": 9212691, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Dd8An.gif?s=128&g=1", "display_name": "gilbertlc", "link": "https://stackoverflow.com/users/9212691/gilbertlc"}, "edited": false, "score": 0, "creation_date": 1520597613, "post_id": 49181000, "comment_id": 85391665, "body": "@gilbertlcsndle Very few people actually use plain datetime fields on their sites - most use  some JS widget to allow consistent styling and behavior across different browsers which means any such method wouldn&#39;t be used very often, however PRs to the Capybara project are always considered"}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 3, "last_activity_date": 1520537240, "creation_date": 1520537240, "answer_id": 49181000, "question_id": 49148017, "link": "https://stackoverflow.com/questions/49148017/how-to-fill-in-a-datetime-field-with-capybara/49181000#49181000", "title": "How to fill in a datetime field with capybara?", "body": "<p>The keys different browsers accept for setting a datetime input field are diffrent, however if you're using selenium with chrome and you are actually attempting to fill in a visible <code>&lt;input type=\"datetime-local\"&gt;</code> element, as your question states, then the answer in the question your linked to should work -  Here is a gist that shows it working - <a href=\"https://gist.github.com/twalpole/a541746b354afde8e82fa89a35a9b2da\" rel=\"nofollow noreferrer\">https://gist.github.com/twalpole/a541746b354afde8e82fa89a35a9b2da</a></p>\n\n<p>The important part in that answer is the format of the string you send since it needs to match the keys the browser is expecting for setting that input (<code>to_json</code> doesn't match that format)</p>\n\n<p>Therefore, in your case of wanting to set <code>DateTime.current</code> it should be something along the lines of</p>\n\n<pre><code>fill_in 'id/name/label of input', with: DateTime.current.strftime(\"%m%d%Y\\t%I%M%P\")\n</code></pre>\n\n<p>If that doesn't work for you then most likely you're not actually attempting to fill a visible <code>&lt;input type=\"datetime-local\"&gt;</code> field (maybe you're using some kind of JS widget that replaces/hides the input???) and you'll need to specify the exact HTML you are trying to fill in your question.</p>\n"}], "owner": {"reputation": 181, "user_id": 9212691, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Dd8An.gif?s=128&g=1", "display_name": "gilbertlc", "link": "https://stackoverflow.com/users/9212691/gilbertlc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2220, "favorite_count": 0, "accepted_answer_id": 49181000, "answer_count": 2, "score": 3, "last_activity_date": 1520537240, "creation_date": 1520413946, "question_id": 49148017, "link": "https://stackoverflow.com/questions/49148017/how-to-fill-in-a-datetime-field-with-capybara", "title": "How to fill in a datetime field with capybara?", "body": "<p>I found this similar question <a href=\"https://stackoverflow.com/questions/40304521/how-to-fill-in-a-datetime-local-field-with-capybara?rq=1\">How to fill in a datetime-local field with capybara?</a>, and the only answer in this thread is not working. So I decided to open this question. It seems like there's no documentation or tutorial about this. Have any solution? It will be a great help!</p>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 3020722, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/uLSO9.jpg?s=128&g=1", "display_name": "jotshin", "link": "https://stackoverflow.com/users/3020722/jotshin"}, "edited": false, "score": 0, "creation_date": 1520416863, "post_id": 49147593, "comment_id": 85302390, "body": "Thanks so much for this quick and thoughtful answer. I just solved it."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 1, "last_activity_date": 1520412932, "last_edit_date": 1592644375, "creation_date": 1520412620, "answer_id": 49147593, "question_id": 49147524, "link": "https://stackoverflow.com/questions/49147524/cant-resize-my-array-to-a-smaller-size/49147593#49147593", "title": "Can&#39;t resize my array to a smaller size", "body": "<blockquote>\n<p>... I can just make it becomes bigger size array but not smaller one...</p>\n<p>... I knew Ruby's array is natively sizeable ...</p>\n</blockquote>\n<p>That is the root of your problem. You iterate the old, bigger array and the new copy resizes to accomodate all of its elements. To fix this, <em>take</em> no more than <code>size</code> elements from the old array.</p>\n<p><sup>Since this is a challenge you imposed upon yourself, I'm not giving you the actual code. This hint should be enough, I hope.</sup></p>\n"}], "owner": {"reputation": 45, "user_id": 3020722, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/uLSO9.jpg?s=128&g=1", "display_name": "jotshin", "link": "https://stackoverflow.com/users/3020722/jotshin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 49147593, "answer_count": 1, "score": 1, "last_activity_date": 1520412932, "creation_date": 1520412360, "last_edit_date": 1520412865, "question_id": 49147524, "link": "https://stackoverflow.com/questions/49147524/cant-resize-my-array-to-a-smaller-size", "title": "Can&#39;t resize my array to a smaller size", "body": "<p>I defined this <code>StackOfStringsArray</code> class that contains one array instance <code>@stringArray</code> and an array index variable, and as below I defined a <code>resize</code> method in it to make @stringArray resizable. I knew Ruby's array is natively sizeable, but I want to implement mine. </p>\n\n<p>In addition, when I did the experiment in irb I could do it successfully (new a sized array and assign it to the <code>StackOfStringsArray</code> object's @stringArray, and I could see the @stringArray did have same size as the new array), but by using this <code>resize</code> method I can just make it becomes bigger size array but not smaller one, even though I'm sure it does go into this <code>resize</code> method.</p>\n\n<p>Could some Ruby ninja help out? Thanks so much.</p>\n\n<pre><code>class StackOfStringsArray\n\n  attr_accessor :stringArray, :index\n\n  def initialize(size)\n    @stringArray = Array.new(size)\n    @index = 0\n  end\n\n  def resize(size)\n    copy = Array.new(size)\n    @stringArray.each_with_index do |element, index|\n      copy[index] = element\n    end \n    @stringArray = copy\n  end \n\nend\n</code></pre>\n"}, {"tags": ["ruby", "asciidoctor"], "answers": [{"tags": [], "owner": {"reputation": 176, "user_id": 3600979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1266499c8f6c9ff4d34cfe5927f50d?s=128&d=identicon&r=PG", "display_name": "Mogztter", "link": "https://stackoverflow.com/users/3600979/mogztter"}, "is_accepted": false, "score": 0, "last_activity_date": 1593452395, "creation_date": 1593452395, "answer_id": 62643774, "question_id": 49147415, "link": "https://stackoverflow.com/questions/49147415/find-inline-images-with-asciidoctor-api/62643774#62643774", "title": "Find inline images with Asciidoctor API", "body": "<p>Asciidoctor parses inline content during rendering. As a consequence the inline images are not available on the AST (see: <a href=\"https://github.com/asciidoctor/asciidoctor/issues/61\" rel=\"nofollow noreferrer\">https://github.com/asciidoctor/asciidoctor/issues/61</a>)</p>\n<p>I believe that this issue will be addressed during the specification process: <a href=\"https://projects.eclipse.org/proposals/asciidoc-language\" rel=\"nofollow noreferrer\">https://projects.eclipse.org/proposals/asciidoc-language</a></p>\n"}], "owner": {"reputation": 3439, "user_id": 640650, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/52033010f0d68daf062ecfe801d98693?s=128&d=identicon&r=PG", "display_name": "Yasushi Shoji", "link": "https://stackoverflow.com/users/640650/yasushi-shoji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1593452395, "creation_date": 1520411945, "question_id": 49147415, "link": "https://stackoverflow.com/questions/49147415/find-inline-images-with-asciidoctor-api", "title": "Find inline images with Asciidoctor API", "body": "<p>How can I find all referenced images in an asciidoc file with Asciidoctor API?</p>\n\n<p>I can find block images with <code>image::file_name[]</code> however I can't find inline images.</p>\n\n<p>Here is the code I came up with:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'asciidoctor'\n\ninput = &lt;&lt;-EOS\n= Title\n\n== Chapter 1\n\nimage::foo.png[]\n\n=== Section 1.1\n\nimage::bar.png[]\n\nThis is a paragraph with inline image image:baz.png[].\nEOS\n\ndoc = Asciidoctor.load input\n\ndoc.find_by(context: :image).each do |e|\n  pp e.attributes[\"target\"]\nend\n</code></pre>\n\n<p>Running this code yields:</p>\n\n<pre><code>\"foo.png\"\n\"bar.png\"\n</code></pre>\n\n<p>But the last inline image<code>baz.png</code> is not found.  What / where can I change to find <code>baz.png</code>?</p>\n"}, {"tags": ["python", "ruby-on-rails", "ruby", "utf-8", "character-encoding"], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 2, "last_activity_date": 1520493049, "last_edit_date": 1520493049, "creation_date": 1520415709, "answer_id": 49148628, "question_id": 49145161, "link": "https://stackoverflow.com/questions/49145161/get-a-unicode-from-pythons-str-byte-sequence/49148628#49148628", "title": "Get a unicode from python&#39;s str byte sequence", "body": "<p>I can't solve your problem but I can explain that byte sequence. What you have is UTF-8 encoded UTF-16.</p>\n\n<p>Both, <code>237, 160, 189</code> and <code>237, 180, 165</code> are 3-byte UTF-8 sequences:</p>\n\n<ul>\n<li><code>1110xxxx 10xxxxxx 10xxxxxx</code> (the <code>x</code>'s are the relevant bits)</li>\n</ul>\n\n<p>... which translate to codepoints <code>55357</code> and <code>56613</code> respectively: (or <code>0xD83D</code> and <code>0xDD25</code> in hex)</p>\n\n<pre><code>[237, 160, 189, 237, 180, 165].map { |b| b.to_s(2) }\n#=&gt; [\"11101101\", \"10100000\", \"10111101\", \"11101101\", \"10110100\", \"10100101\"]\n#         ^^^^      ^^^^^^      ^^^^^^        ^^^^      ^^^^^^      ^^^^^^\n\n[0b1101_100000_111101, 0b1101_110100_100101]\n#=&gt; [55357, 56613]\n</code></pre>\n\n<p>Unfortunately, these codepoints are <em>invalid</em> in UTF-8. That's because they are actually UTF-16 bytes:</p>\n\n<pre><code>[55357, 56613].pack('S&gt;2').encode('utf-8', 'utf-16be')\n#=&gt; \"\ud83d\udd25\"\n</code></pre>\n"}], "owner": {"reputation": 66, "user_id": 1704053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06d085aeff13b2e94fcef4eca0d01020?s=128&d=identicon&r=PG", "display_name": "majkel", "link": "https://stackoverflow.com/users/1704053/majkel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1520493049, "creation_date": 1520402605, "question_id": 49145161, "link": "https://stackoverflow.com/questions/49145161/get-a-unicode-from-pythons-str-byte-sequence", "title": "Get a unicode from python&#39;s str byte sequence", "body": "<p>I have an old django app which was saving UTF-8 strings in the database in a way that made some look like invalid utf8 when I try to fetch them in Ruby.</p>\n\n<p>Strings before saving were of type <code>str</code> in python, but when fetched from the database django was giving me a proper <code>unicode</code> string. When I fetch same record in rails I get a byte sequence that is identical to python's <code>str</code> string and ruby complains that it's an invalid byte sequence.</p>\n\n<p>Example: tested string was a single emoji: \ud83d\udd25</p>\n\n<ul>\n<li><p>before save in Django - <code>str</code> type, sequence: <code>[237, 160, 189, 237, 180, 165]</code></p></li>\n<li><p>fetched from db in Django - <code>unicode</code> type, sequence <code>[55357, 56613]</code></p></li>\n<li><p>fetched from db in Rails - sequence <code>[237, 160, 189, 237, 180, 165]</code></p></li>\n</ul>\n\n<p>Is there a way to convert that byte sequence in Ruby to a proper utf8 string?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 96, "user_id": 1560621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26a185177c180c3f7226d29f436997d7?s=128&d=identicon&r=PG", "display_name": "Rustik", "link": "https://stackoverflow.com/users/1560621/rustik"}, "edited": false, "score": 0, "creation_date": 1520408083, "post_id": 49144918, "comment_id": 85297513, "body": "What have you tried so far? I&#39;d suggest to add <code>order</code> to your <code>has_many :business_groups</code> relation"}], "answers": [{"comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 4, "creation_date": 1520408645, "post_id": 49145443, "comment_id": 85297718, "body": "you should do <code>self.business_groups.includes(:actor)</code>, it avoids the n+1 query"}], "tags": [], "owner": {"reputation": 3048, "user_id": 2374626, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/Z78U0.jpg?s=128&g=1", "display_name": "Satishakumar Awati", "link": "https://stackoverflow.com/users/2374626/satishakumar-awati"}, "is_accepted": true, "score": 2, "last_activity_date": 1520408696, "last_edit_date": 1520408696, "creation_date": 1520403791, "answer_id": 49145443, "question_id": 49144918, "link": "https://stackoverflow.com/questions/49144918/ordering-on-a-lambda-in-rails/49145443#49145443", "title": "Ordering on a lambda in rails", "body": "<ul>\n<li>First iterate over each <strong>businesses</strong> and create array of hashes. </li>\n<li>Then sort the array of hash with particular key value i.e. <strong>name</strong> key. </li>\n<li>Then convert sorted array of hash into json. </li>\n</ul>\n\n<p>The final code would look like this</p>\n\n<pre><code>def get_business_with_details\n    businesses = self.business_groups.includes(:actor)\n    businesses = businesses.collect do |business|\n        {\n        'name' =&gt; business.actor.name,\n        'id' =&gt; business.access_key,\n        'is_business_admin' =&gt; business.is_admin_user(self.id)\n        }\n    end\n    businesses = businesses.sort_by { |hsh| hsh['name'] }\n    businesses.to_json #final return value i.e. json converted and sorted by name\nend\n</code></pre>\n\n<p>I hope this helps!</p>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1520410412, "creation_date": 1520410412, "answer_id": 49147020, "question_id": 49144918, "link": "https://stackoverflow.com/questions/49144918/ordering-on-a-lambda-in-rails/49147020#49147020", "title": "Ordering on a lambda in rails", "body": "<pre><code>def get_business_with_details\n  self.business_groups.\n       joins(:actor).\n       order('actor.name').\n       map do |business|\n    %w[name id is_business_admin].zip(\n      business.actor.name, business.access_key, business.is_admin_user(self.id)\n    ).to_h\n  end.to_json\nend\n</code></pre>\n"}], "owner": {"reputation": 663, "user_id": 5110480, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/210fea696d0260204d18a7a7d54bf2dd?s=128&d=identicon&r=PG&f=1", "display_name": "Mahesh Mesta", "link": "https://stackoverflow.com/users/5110480/mahesh-mesta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 49145443, "answer_count": 2, "score": 0, "last_activity_date": 1520410412, "creation_date": 1520401412, "last_edit_date": 1520401884, "question_id": 49144918, "link": "https://stackoverflow.com/questions/49144918/ordering-on-a-lambda-in-rails", "title": "Ordering on a lambda in rails", "body": "<p>I have a scenario where I fetch  business groups through a lambda and collect data to be sent as a json.</p>\n\n<p>The code is here:</p>\n\n<pre><code> def get_business_with_details\n  businesses = self.business_groups\n  binding.pry\n  businesses.collect do |business|\n    {\n      name: business.actor.name,\n      id: business.access_key,\n      is_business_admin: business.is_admin_user(self.id)\n    }\n  end\nend\n</code></pre>\n\n<p>The lambda code for business groups is here:</p>\n\n<pre><code> class User\n  has_many :business_groups, lambda { |user| where [\"(groups.group_type \n  = 7 )\"] }, through: :group_members, source: :group\n end\n</code></pre>\n\n<p>I need to order the data on the name of business actor i.e <code>business.actor.name</code></p>\n"}, {"tags": ["ruby", "export-to-csv"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9442259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/913b60c654bfd7cc37e83b3faf54f04d?s=128&d=identicon&r=PG&f=1", "display_name": "surabhi8960", "link": "https://stackoverflow.com/users/9442259/surabhi8960"}, "edited": false, "score": 0, "creation_date": 1520398849, "post_id": 49144305, "comment_id": 85294053, "body": "What if I want to fetch only second row .with &quot;row&quot; it is fetching all the rows at a time."}, {"owner": {"reputation": 1930, "user_id": 6015889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2359a5839ab1afea717f15dc0536449e?s=128&d=identicon&r=PG&f=1", "display_name": "Anthony L ", "link": "https://stackoverflow.com/users/6015889/anthony-l"}, "reply_to_user": {"reputation": 1, "user_id": 9442259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/913b60c654bfd7cc37e83b3faf54f04d?s=128&d=identicon&r=PG&f=1", "display_name": "surabhi8960", "link": "https://stackoverflow.com/users/9442259/surabhi8960"}, "edited": false, "score": 0, "creation_date": 1520399779, "post_id": 49144305, "comment_id": 85294319, "body": "Hi @surabhi8960 - I&#39;ve updated the answer to give you an idea of how to grab just the second row."}, {"owner": {"reputation": 1, "user_id": 9442259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/913b60c654bfd7cc37e83b3faf54f04d?s=128&d=identicon&r=PG&f=1", "display_name": "surabhi8960", "link": "https://stackoverflow.com/users/9442259/surabhi8960"}, "edited": false, "score": 0, "creation_date": 1520400845, "post_id": 49144305, "comment_id": 85294602, "body": "Thank you so much Anthony L"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1520408851, "post_id": 49144305, "comment_id": 85297816, "body": "@AnthonyL : I think you should add a <code>break</code> after storing the row, as the OP said that he doesn&#39;t want to process the whole file."}], "tags": [], "owner": {"reputation": 1930, "user_id": 6015889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2359a5839ab1afea717f15dc0536449e?s=128&d=identicon&r=PG&f=1", "display_name": "Anthony L ", "link": "https://stackoverflow.com/users/6015889/anthony-l"}, "is_accepted": false, "score": 1, "last_activity_date": 1520399752, "last_edit_date": 1520399752, "creation_date": 1520397923, "answer_id": 49144305, "question_id": 49144203, "link": "https://stackoverflow.com/questions/49144203/fetching-second-row-from-csv-file-in-ruby/49144305#49144305", "title": "Fetching second row from csv file in Ruby", "body": "<p>If you'd like the entire row, you should change </p>\n\n<p><code>row[1]</code></p>\n\n<p>to just </p>\n\n<p><code>row</code></p>\n\n<p>row[1] is grabbing the second column's value of the entire row.  Each column value is stored sequentially in the row variable.  You can see this directly in your console if you print</p>\n\n<p><code>puts row.inspect</code></p>\n\n<p>If you want just the second row, you can try something like this:</p>\n\n<pre><code>actual_row = File.open(file_name[0], 'r')\nfirst_row_data = []\nCSV.foreach(actual_row) do |row| \n  if $. == 1\n    first_row_data &lt;&lt; row\n  end\nend \nputs first_row_data\n</code></pre>\n\n<p>You can learn more about <code>$.</code> and similar variables here: <a href=\"https://docs.ruby-lang.org/en/2.4.0/globals_rdoc.html\" rel=\"nofollow noreferrer\">https://docs.ruby-lang.org/en/2.4.0/globals_rdoc.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1520409105, "post_id": 49145146, "comment_id": 85297944, "body": "Great idea!!!! In this case, <code>second_row=CSV.foreach(&#39;test.csv&#39;).lazy.take(2).last</code> should work as well, isn&#39;t it?"}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": false, "score": 3, "last_activity_date": 1520402550, "creation_date": 1520402550, "answer_id": 49145146, "question_id": 49144203, "link": "https://stackoverflow.com/questions/49144203/fetching-second-row-from-csv-file-in-ruby/49145146#49145146", "title": "Fetching second row from csv file in Ruby", "body": "<p>The <code>foreach</code> method returns an enumerator if no block is given, which allows you to use methods such as <a href=\"https://ruby-doc.org/core/Enumerable.html#method-i-drop\" rel=\"nofollow noreferrer\"><code>drop</code></a> from <code>Enumerable</code>:</p>\n\n<pre><code># outputs all rows after the first\nCSV.foreach('test.csv').drop(1).each { |row| puts row.inspect }\n</code></pre>\n\n<p>To limit to just one row, we can then <a href=\"https://ruby-doc.org/core/Enumerable.html#method-i-take\" rel=\"nofollow noreferrer\"><code>take</code></a>:</p>\n\n<pre><code># outputs only the second row\nCSV.foreach('test.csv').drop(1).take(1).each { |row| puts row.inspect }\n</code></pre>\n\n<p>But, we're still parsing the entire file and just discarding most of it. Luckily, we can add <a href=\"https://ruby-doc.org/core/Enumerable.html#method-i-lazy\" rel=\"nofollow noreferrer\"><code>lazy</code></a> into the mix:</p>\n\n<pre><code># outputs only the second row, parsing only the first 2 rows of the file\nCSV.foreach('test.csv').lazy.drop(1).take(1).each { |row| puts row.inspect }\n</code></pre>\n\n<p>But, if the first row is a header row, don't forgot you can tell CSV about it:</p>\n\n<pre><code># outputs only the second row, as a CSV::Row, only parses 2 rows\nCSV.foreach('test.csv', headers: true).take(1).each { |row| puts row.inspect }\n</code></pre>\n\n<hr>\n\n<p>As an aside (in case I did this wrong), it looks like the <code>shift</code> method is what CSV is using for parsing the rows, so I just added:</p>\n\n<pre><code>class CSV\n  alias :orig_shift :shift\n\n  def shift\n    $stdout.puts \"shifting row\"\n\n    orig_shift\n  end\nend\n</code></pre>\n\n<p>and ran with a sample csv to see how many times \"shifting row\" was output for each of the examples.</p>\n"}], "owner": {"reputation": 1, "user_id": 9442259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/913b60c654bfd7cc37e83b3faf54f04d?s=128&d=identicon&r=PG&f=1", "display_name": "surabhi8960", "link": "https://stackoverflow.com/users/9442259/surabhi8960"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1144, "favorite_count": 0, "closed_date": 1520451953, "answer_count": 2, "score": 0, "last_activity_date": 1520404404, "creation_date": 1520397303, "last_edit_date": 1520404404, "question_id": 49144203, "link": "https://stackoverflow.com/questions/49144203/fetching-second-row-from-csv-file-in-ruby", "closed_reason": "Duplicate", "title": "Fetching second row from csv file in Ruby", "body": "<pre><code>actual_row = File.open(file_name[0], 'r')\n first_row_data = []\n CSV.foreach(actual_row) do |row| \nfirst_row_data &lt;&lt; row[1]\n end \nputs first_row_data\n</code></pre>\n\n<p>With this I am trying to fetch the second row of CSV but it is printing the second column instead.</p>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1520396701, "post_id": 49143717, "comment_id": 85293434, "body": "You can use <code>Gem.find_files(&quot;rest_client&quot;)</code> to see the path."}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1520416731, "post_id": 49148873, "comment_id": 85302304, "body": "Isn&#39;t rubygems always active in modern rubies? And so we never actually call the core version?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1520419087, "post_id": 49148873, "comment_id": 85303820, "body": "Most implementations support <code>--disable-rubygems</code>."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 0, "last_activity_date": 1520416483, "creation_date": 1520416483, "answer_id": 49148873, "question_id": 49143717, "link": "https://stackoverflow.com/questions/49143717/where-is-the-folder-to-load-ruby-gems/49148873#49148873", "title": "Where is the folder to load Ruby gems", "body": "<p>RubyGems monkeypatches <code>Kernel#require</code>, so that it will try to find a gem which contains that file in the gem path and then \"activates\" that gem, which basically means to add that gem's library directory to the load path.</p>\n\n<p>In other words, when you call <code>require</code>, you will not call the <code>require</code> from the core library, you will instead call the <code>require</code> from RubyGems which overwrites the one from the core library. And the <code>require</code> from RubyGems knows how to search through gems.</p>\n"}], "owner": {"reputation": 29, "user_id": 3530349, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1529409245/picture?type=large", "display_name": "styling", "link": "https://stackoverflow.com/users/3530349/styling"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520416483, "creation_date": 1520393952, "question_id": 49143717, "link": "https://stackoverflow.com/questions/49143717/where-is-the-folder-to-load-ruby-gems", "title": "Where is the folder to load Ruby gems", "body": "<p>in ruby code, the require statement, such as</p>\n\n<pre>\nrequire 'rest-client' \n</pre>\n\n<p>should load the ruby gems from the ruby load path. However , when searching thru the ruby load path, i do not see any rest-client gem? So how the ruby code knows where the ruby gems are located?</p>\n\n<p>irb(main):001:0> $LOAD_PATH</p>\n\n<p>=> [\"/home/abc/.rbenv/rbenv.d/exec/gem-rehash\", ......]</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 1, "creation_date": 1520392252, "post_id": 49143476, "comment_id": 85292313, "body": "Empty string is still a string. What happens if those are <code>nil</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 1347, "user_id": 8052052, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/LeaWG.png?s=128&g=1", "display_name": "Taichi", "link": "https://stackoverflow.com/users/8052052/taichi"}, "is_accepted": false, "score": 0, "last_activity_date": 1520393465, "creation_date": 1520393465, "answer_id": 49143648, "question_id": 49143476, "link": "https://stackoverflow.com/questions/49143476/when-csv-generate-generate-empty-field-without/49143648#49143648", "title": "When CSV.generate, generate empty field without &quot;&quot;", "body": "<p>I resolved by myself!</p>\n\n<p>in somethings_controller.rb</p>\n\n<pre><code>send_data render_to_string.gsub(\"\\\"\\\"\",\"\"), type: :csv\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1347, "user_id": 8052052, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/LeaWG.png?s=128&g=1", "display_name": "Taichi", "link": "https://stackoverflow.com/users/8052052/taichi"}, "edited": false, "score": 0, "creation_date": 1520411268, "post_id": 49144706, "comment_id": 85299021, "body": "Thank you. This approach is great!"}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": false, "score": 1, "last_activity_date": 1520400378, "creation_date": 1520400378, "answer_id": 49144706, "question_id": 49143476, "link": "https://stackoverflow.com/questions/49143476/when-csv-generate-generate-empty-field-without/49144706#49144706", "title": "When CSV.generate, generate empty field without &quot;&quot;", "body": "<p>In order to get CSV to output an empty column, you need to tell it that nothing is in the column. An empty string, in ruby, is still something, you'll need to replace those empty strings with <code>nil</code> in order to get the output you want:</p>\n\n<pre><code>csv_str = CSV.generate do |csv|\n  csv &lt;&lt; [1,260,37335,'','','','','',''].map do |col|\n    col.respond_to?(:empty?) &amp;&amp; col.empty? ? nil : col\n  end\nend\n# =&gt; 1,260,37335,,,,,,\n</code></pre>\n\n<p>In rails you can clean that up by making use of <a href=\"http://api.rubyonrails.org/classes/Object.html#method-i-presence\" rel=\"nofollow noreferrer\"><code>presence</code></a>, though this will blank out <code>false</code> as well:</p>\n\n<pre><code>csv_str = CSV.generate do |csv|\n  csv &lt;&lt; [1,260,37335,'',false, nil,'','',''].map(&amp;:presence)\nend\n# =&gt; 1,260,37335,,,,,,\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 136, "user_id": 269679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c041589a01d05a04d27088449ec19253?s=128&d=identicon&r=PG", "display_name": "emancu", "link": "https://stackoverflow.com/users/269679/emancu"}, "is_accepted": false, "score": 1, "last_activity_date": 1587399874, "creation_date": 1587399874, "answer_id": 61327287, "question_id": 49143476, "link": "https://stackoverflow.com/questions/49143476/when-csv-generate-generate-empty-field-without/61327287#61327287", "title": "When CSV.generate, generate empty field without &quot;&quot;", "body": "<p>The <a href=\"https://ruby-doc.org/stdlib-2.6.1/libdoc/csv/rdoc/CSV.html\" rel=\"nofollow noreferrer\">CSV documentation</a> shows an option that you can use for this case. There are not examples but you can guess what it does.</p>\n\n<p>The only consideration is, you need to send an array of Strings, otherwise, you will get a <code>NoMethodError</code></p>\n\n<pre><code>csv_str = CSV.generate(write_empty_value: nil) do |csv|\n  csv &lt;&lt; [1,260,37335,'','','','','','', false, ' ', nil].map(&amp;:to_s)\nend\n=&gt; \"1,260,37335,,,,,,,false, ,\\n\"\n</code></pre>\n\n<p>The benefit of this solution is, you preserve the <code>false</code>.</p>\n"}], "owner": {"reputation": 1347, "user_id": 8052052, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/LeaWG.png?s=128&g=1", "display_name": "Taichi", "link": "https://stackoverflow.com/users/8052052/taichi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 375, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1587399874, "creation_date": 1520392156, "question_id": 49143476, "link": "https://stackoverflow.com/questions/49143476/when-csv-generate-generate-empty-field-without", "title": "When CSV.generate, generate empty field without &quot;&quot;", "body": "<p>Ruby 2.2, Ruby on Rails 4.2</p>\n\n<p>I'm genarating some CSV data in Ruby on Rails, and want empty fields to be empty, like <code>,,</code> not like <code>,\"\",</code> .\nI wrote codes like below:</p>\n\n<p>somethings_cotroller.rb</p>\n\n<pre><code>def get_data\n  respond_to do |format|\n    format.html\n    format.csv do\n      @data = SheetRepository.accounts_data\n      send_data render_to_string, type: :csv\n    end\n  end\nend\n</code></pre>\n\n<p>somethings/get_data.csv.ruby</p>\n\n<pre><code>require 'csv'\ncsv_str = CSV.generate do |csv|\n  csv &lt;&lt; [1,260,37335,'','','','','','']\n  ...\nend\n</code></pre>\n\n<p>And this generates CSV file like this.</p>\n\n<p>get_data.csv</p>\n\n<pre><code>1,260,37335,\"\",\"\",\"\",\"\",\"\",\"\"\n</code></pre>\n\n<p>I want CSV data like below.</p>\n\n<pre><code>1,260,37335,,,,,,\n</code></pre>\n\n<p>It seems like Ruby adds \"\" automatically.</p>\n\n<p>How can I do this??</p>\n"}, {"tags": ["ruby", "hanami", "hanami-model"], "comments": [{"owner": {"reputation": 1070, "user_id": 1401773, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/kxDMC.jpg?s=128&g=1", "display_name": "Rodrigo Vasconcelos", "link": "https://stackoverflow.com/users/1401773/rodrigo-vasconcelos"}, "edited": false, "score": 0, "creation_date": 1525342883, "post_id": 49142802, "comment_id": 87322850, "body": "Any specific reason why you can&#39;t upgrade to v0.7.0? This way you could use update with the id and data to be updated."}, {"owner": {"reputation": 43, "user_id": 1925735, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mFW1a.jpg?s=128&g=1", "display_name": "Luiz A.", "link": "https://stackoverflow.com/users/1925735/luiz-a"}, "reply_to_user": {"reputation": 1070, "user_id": 1401773, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/kxDMC.jpg?s=128&g=1", "display_name": "Rodrigo Vasconcelos", "link": "https://stackoverflow.com/users/1401773/rodrigo-vasconcelos"}, "edited": false, "score": 0, "creation_date": 1526660653, "post_id": 49142802, "comment_id": 87846869, "body": "The software is big monolith and it is not so easy to upgrade it, given that this upgrade requires handling with some new concepts, such as immutable entities. We are working on it, but I would like to know if there was an alternative for this problem. The solution is to upgrade."}], "answers": [{"tags": [], "owner": {"reputation": 287, "user_id": 3171006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7dfc74cd6e3194a22ef6fac2c51f0ae?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/3171006/anton"}, "is_accepted": true, "score": 7, "last_activity_date": 1525356288, "creation_date": 1525356288, "answer_id": 50157021, "question_id": 49142802, "link": "https://stackoverflow.com/questions/49142802/how-to-update-only-changed-attributes-in-hanami-model/50157021#50157021", "title": "How to update only changed attributes in Hanami Model?", "body": "<p>hanami entity is an immutable data structure. That's why you can't change data with setters:</p>\n\n<pre><code>&gt;&gt; account = AccountRepository.new.first\n=&gt; #&lt;Account:0x00007ffbf3918010 @attributes={ name: 'Anton', ...}&gt;\n\n&gt;&gt; account.name\n=&gt; \"Anton\"\n\n&gt;&gt; account.name = \"Other\"\n        1: from /Users/anton/.rvm/gems/ruby-2.5.0/gems/hanami-model-1.2.0/lib/hanami/entity.rb:144:in `method_missing'\nNoMethodError (undefined method `name=' for #&lt;Account:0x00007ffbf3918010&gt;)\n</code></pre>\n\n<p>Instead, you can create a new one entity, for example:</p>\n\n<pre><code># will return a new account entity with updated attributes\n&gt;&gt; Account.new(**account, name: 'A new one')\n</code></pre>\n\n<p>And also, you can use <code>#update</code> with old entity object:</p>\n\n<pre><code>&gt;&gt; AccountRepository.new.update(account.id, **account, name: 'A new name')\n=&gt; #&lt;Account:0x00007ffbf3918010 @attributes={ name: 'Anton', ...}&gt;\n\n&gt;&gt; account = AccountRepository.new.first\n=&gt; #&lt;Account:0x00007ffbf3918010 @attributes={ name: 'Anton', ...}&gt;\n\n&gt;&gt; account.name\n=&gt; \"A new name\"\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 1925735, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mFW1a.jpg?s=128&g=1", "display_name": "Luiz A.", "link": "https://stackoverflow.com/users/1925735/luiz-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "accepted_answer_id": 50157021, "answer_count": 1, "score": 4, "last_activity_date": 1525356288, "creation_date": 1520386877, "question_id": 49142802, "link": "https://stackoverflow.com/questions/49142802/how-to-update-only-changed-attributes-in-hanami-model", "title": "How to update only changed attributes in Hanami Model?", "body": "<p>Given I am using Hanami Model version 0.6.1, I would like the repository update only the changed attributes of an entity.</p>\n\n<p>For example:</p>\n\n<pre><code>user_instance1 = UserRepository.find(1)\nuser_instance1.name = 'John'\n\nuser_instance2 = UserRepository.find(1)\nuser_instance2.email = 'john@email.com'\n\nUserRepository.update(user_instance1)\n#expected: UPDATE USER SET NAME = 'John' WHERE ID = 1\n\nUserRepository.update(user_instance2)\n#expected: UPDATE USER SET EMAIL = 'john@email.com' WHERE ID = 1\n</code></pre>\n\n<p>But what it happens is that the second command overrides all fields, including those which were not changed.</p>\n\n<p>I know I can use the <code>Hanami::Entity::DirtyTracking</code> to get all changed attributes, but I do not know how to update an entity partially with these attributes.</p>\n\n<p>Is there a way to do this?</p>\n"}, {"tags": ["ruby", "linux"], "answers": [{"comments": [{"owner": {"reputation": 30697, "user_id": 31667, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/082b069c287878a1bd5731f44c8f10e7?s=128&d=identicon&r=PG", "display_name": "viraptor", "link": "https://stackoverflow.com/users/31667/viraptor"}, "edited": false, "score": 0, "creation_date": 1520392731, "post_id": 49143424, "comment_id": 85292409, "body": "That&#39;s the reason I mentioned modern linux. While POSIX <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/open.html\" rel=\"nofollow noreferrer\">doesn&#39;t guarantee</a> anything, Linux is <a href=\"http://man7.org/linux/man-pages/man2/open.2.html\" rel=\"nofollow noreferrer\">more strict</a>: &quot;The modification of the file offset and the write operation are performed as a single atomic step.&quot;"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "reply_to_user": {"reputation": 30697, "user_id": 31667, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/082b069c287878a1bd5731f44c8f10e7?s=128&d=identicon&r=PG", "display_name": "viraptor", "link": "https://stackoverflow.com/users/31667/viraptor"}, "edited": false, "score": 0, "creation_date": 1520441095, "post_id": 49143424, "comment_id": 85318957, "body": "@viraptor YARV literally calls plain old <a href=\"https://github.com/ruby/ruby/blob/96db72ce38b27799dd8e80ca00696e41234db6ba/io.c#L951\" rel=\"nofollow noreferrer\">write</a>. If you want to be super sure of this behavior, you can compile Ruby yourself on the system you need this behavior on."}], "tags": [], "owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "is_accepted": false, "score": 1, "last_activity_date": 1520391720, "creation_date": 1520391720, "answer_id": 49143424, "question_id": 49142491, "link": "https://stackoverflow.com/questions/49142491/can-i-guarantee-an-atomic-append-in-ruby/49143424#49143424", "title": "Can I guarantee an atomic append in Ruby?", "body": "<p>I would not assume that. <code>syswrite</code> calls the <code>write</code> POSIX function, which make no claims about atomicity when dealing with files. </p>\n\n<p>See: <a href=\"https://stackoverflow.com/questions/14417806/are-posix-read-and-write-system-calls-atomic\">Are POSIX&#39; read() and write() system calls atomic?</a></p>\n\n<p>And <a href=\"https://stackoverflow.com/questions/12942915/understanding-concurrent-file-writes-from-multiple-processes\">Understanding concurrent file writes from multiple processes</a></p>\n\n<p>Tl;dr- you should implement some concurrency control in your app to synchronize this access. </p>\n"}, {"tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": false, "score": 2, "last_activity_date": 1520460717, "last_edit_date": 1520460717, "creation_date": 1520419898, "answer_id": 49150098, "question_id": 49142491, "link": "https://stackoverflow.com/questions/49142491/can-i-guarantee-an-atomic-append-in-ruby/49150098#49150098", "title": "Can I guarantee an atomic append in Ruby?", "body": "<p>I recently researched this very topic in order to implement the <a href=\"https://github.com/meineerde/rackstash/blob/21e0c5a228d83fd23d7863f5c625bc11c5a83523/lib/rackstash/adapter/file.rb\" rel=\"nofollow noreferrer\">File appender</a> in <a href=\"https://github.com/meineerde/rackstash\" rel=\"nofollow noreferrer\">Rackstash</a>.</p>\n\n<p>You can find tests for this in the <a href=\"https://github.com/meineerde/rackstash/blob/21e0c5a228d83fd23d7863f5c625bc11c5a83523/spec/rackstash/adapter/file_spec.rb#L164-L235\" rel=\"nofollow noreferrer\">specs</a> which I originally adapted from a <a href=\"https://www.notthewizard.com/2014/06/17/are-files-appends-really-atomic/\" rel=\"nofollow noreferrer\">blog post</a> on this topic, whose code unfortunately is non-conclusive unfortunately since the author does not write to the file directly but through a pipe. Please read the comments there.</p>\n\n<p>With (1) modern operating systems and (2) their usual local filesystems, the OS guarantees that concurrent appends from multiple processes do write interleave data.</p>\n\n<p>The main points here are:</p>\n\n<ul>\n<li>You need a reasonably modern operating system. Very old (or exotic) systems had lesser guarantees. Here, you might have to lock the file explicitly with e.g. <a href=\"http://ruby-doc.org/core/File.html#method-i-flock\" rel=\"nofollow noreferrer\">File#flock</a>.</li>\n<li>You need to use a compatible filesystem. Most local filesystems like HFS, APFS, NTFS, and the usual Linux filesystems like ext3, ext4, btrfs, ... should be safe. SMB is one of the few network filesystems that also guarantees this. NFS and most FUSE filesystems are not safe in this regard.</li>\n</ul>\n\n<p>Note that this mechanism does not guarantee that concurrent readers always read full writes. While the writes themselves are never interleaved, readers might read the partial results of in-progress writes.</p>\n\n<p>As far as my understanding (and my tests) goes, the atomically writable size isn't even restricted to <code>PIPE_SIZE</code>. This limit only applies when writing to a pipe like a socket or e.g. STDOUT instead of a real file.</p>\n\n<p>Unfortunately, authoritative information on this topic is rather sparse. Most articles (and SO answers) on this topic conflate strict appending with random writes. When not strictly appending (by opening the file in append-only mode), the guarantees are null and void.</p>\n\n<p>Thus, to answer your specific question: Yes, your code from your question should be safe when writing to a local filesystem on modern operating systems. I <em>think</em> <code>syswrite</code> bypasses the file buffer already. To be sure, you should also set <code>f.sync = true</code> before writing to it to completely disable any buffering.</p>\n\n<p>Note that you should still use a Mutex (or similar) if you plan to write to the single opened file from multiple threads in your process (since the append-guarantees of the OS are only valid for concurrent writes to different file-descriptors; it can not discern overlapping writes by the same process to the same file descriptor).</p>\n"}], "owner": {"reputation": 30697, "user_id": 31667, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/082b069c287878a1bd5731f44c8f10e7?s=128&d=identicon&r=PG", "display_name": "viraptor", "link": "https://stackoverflow.com/users/31667/viraptor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1520460717, "creation_date": 1520384350, "last_edit_date": 1520392533, "question_id": 49142491, "link": "https://stackoverflow.com/questions/49142491/can-i-guarantee-an-atomic-append-in-ruby", "title": "Can I guarantee an atomic append in Ruby?", "body": "<p>Based on <a href=\"https://stackoverflow.com/questions/1154446/is-file-append-atomic-in-unix\">Is file append atomic in UNIX?</a> and other sources, it looks like on modern Linux, I can open a file in append mode and write small chunks (&lt; <code>PIPE_BUF</code>) to it from multiple processes without worrying about tearing.</p>\n\n<p>Are those limits extended to Ruby with <code>syswrite</code>? Specifically for this code:</p>\n\n<pre><code>f = File.new('...', 'a')\nf.syswrite(\"short string\\n\")\n</code></pre>\n\n<p>Can I expect the write to not interleave with other process writing the same way? Or is there some buffering / potential splitting I'm not aware of yet?</p>\n\n<p>Assuming ruby >= 2.3</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1520379273, "post_id": 49141738, "comment_id": 85288997, "body": "Do you have functions which can encode and decode the polyline as a plain data object? If so, you can override the getter/setter methods to use JSON serialization."}, {"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 1, "creation_date": 1520380138, "post_id": 49141738, "comment_id": 85289281, "body": "<code>before_save</code> and <code>after_initialize</code> are probably what you&#39;re looking for."}, {"owner": {"reputation": 18601, "user_id": 599184, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/tjsXC.jpg?s=128&g=1", "display_name": "Leo Jiang", "link": "https://stackoverflow.com/users/599184/leo-jiang"}, "reply_to_user": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1520380385, "post_id": 49141738, "comment_id": 85289358, "body": "@JoshBrody apparently, <code>before_save</code> would make the property dirty? Do you know if this would be an issue?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1520385370, "post_id": 49141738, "comment_id": 85290785, "body": "&quot;I don&#39;t want to change all the code because I&#39;ll probably break something.&quot; When working with legacy code you really need to start by adding tests that verify that existing features work and that you&#39;re not causing regressions. The hard part is just getting your boss / client to understand that adding features to a legacy app is often more work."}], "owner": {"reputation": 18601, "user_id": 599184, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/tjsXC.jpg?s=128&g=1", "display_name": "Leo Jiang", "link": "https://stackoverflow.com/users/599184/leo-jiang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520379058, "creation_date": 1520379058, "question_id": 49141738, "link": "https://stackoverflow.com/questions/49141738/rails-encode-field-before-saving-and-decode-after-retrieving", "title": "Rails: encode field before saving and decode after retrieving?", "body": "<p>I'm new to Rails and I'm working with legacy code. There are models with properties that aren't encoded in the most efficient format for storage. I want to encode the properties before saving to the database and decode them when I retrieve them. Since lots of code expects the properties to be in the inefficient format, I can't just change the model to the more efficient format.</p>\n\n<p>Specifically, the model stores polygons on a map as an array of objects: <code>[{lat: 0, lng: 0}, ...]</code>. A lot of the code expects this format, I don't want to change all the code because I'll probably break something. In the database, the polygons should be stored as encoded polylines (<a href=\"https://developers.google.com/maps/documentation/utilities/polylinealgorithm\" rel=\"nofollow noreferrer\">https://developers.google.com/maps/documentation/utilities/polylinealgorithm</a>). How can I store the data in the database as encoded polylines, but make the code see the model's properties as arrays of objects?</p>\n"}, {"tags": ["arrays", "ruby", "string", "split"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1520377766, "post_id": 49141515, "comment_id": 85288448, "body": "name_parts.join(&quot; &quot;)` at the end of your method should work."}, {"owner": {"reputation": 3, "user_id": 9453847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e19da759d5c9448ec4cf83c2d3cec42b?s=128&d=identicon&r=PG&f=1", "display_name": "Rome-oh", "link": "https://stackoverflow.com/users/9453847/rome-oh"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1520378074, "post_id": 49141515, "comment_id": 85288555, "body": "Done - this solves the latter problem, but the names are no longer in reverse order?"}, {"owner": {"reputation": 29582, "user_id": 1427098, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Bvdm0.jpg?s=128&g=1", "display_name": "Darshan Rivka Whittle", "link": "https://stackoverflow.com/users/1427098/darshan-rivka-whittle"}, "edited": false, "score": 0, "creation_date": 1520378160, "post_id": 49141515, "comment_id": 85288581, "body": "That&#39;s because <code>name_parts</code> is still in the same order; you only split it on <code>&quot; &quot;</code>, so if you join it on <code>&quot; &quot;</code> again, you&#39;ll get the original string (with any consecutive spaces collapsed into one)."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1520378574, "post_id": 49141515, "comment_id": 85288749, "body": "Ah, well maybe <code>name_parts.reverse.join(&#39; &#39;)</code> will do."}], "answers": [{"tags": [], "owner": {"reputation": 29582, "user_id": 1427098, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Bvdm0.jpg?s=128&g=1", "display_name": "Darshan Rivka Whittle", "link": "https://stackoverflow.com/users/1427098/darshan-rivka-whittle"}, "is_accepted": true, "score": 1, "last_activity_date": 1520378023, "creation_date": 1520378023, "answer_id": 49141570, "question_id": 49141515, "link": "https://stackoverflow.com/questions/49141515/splitting-strings-and-re-ordering-in-ruby/49141570#49141570", "title": "Splitting strings and re-ordering in ruby", "body": "<p>You could just join the two parts:</p>\n\n<pre><code>def name_shuffler(str)\n    name_parts = str.split(\" \")\n    [name_parts[1], name_parts[0]].join(\" \")\nend\n\nname_shuffler \"one two\" # =&gt; \"two one\"\n</code></pre>\n\n<p>Although you're going to want to think about handling input with no spaces, or more name parts than two.</p>\n"}, {"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 0, "last_activity_date": 1520381975, "last_edit_date": 1520381975, "creation_date": 1520378688, "answer_id": 49141673, "question_id": 49141515, "link": "https://stackoverflow.com/questions/49141515/splitting-strings-and-re-ordering-in-ruby/49141673#49141673", "title": "Splitting strings and re-ordering in ruby", "body": "<p>A regex way.</p>\n\n<pre><code>\"John Smith\".gsub(/(\\w+) (\\w+)/,'\\2 \\1') #=&gt; \"Smith John\"\n</code></pre>\n\n<p>A rotating way.</p>\n\n<pre><code>\"John Smith\".split(' ').rotate.join(' ') #=&gt; \"Smith John\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4719, "user_id": 6060774, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d51934aeeed54c14084d35942eb0b85e?s=128&d=identicon&r=PG&f=1", "display_name": "alexi2", "link": "https://stackoverflow.com/users/6060774/alexi2"}, "edited": false, "score": 0, "creation_date": 1520459753, "post_id": 49160363, "comment_id": 85329403, "body": "You should provide some explanation of your answer."}], "tags": [], "owner": {"reputation": 31, "user_id": 3760848, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000800691106/picture?type=large", "display_name": "laurentzziu", "link": "https://stackoverflow.com/users/3760848/laurentzziu"}, "is_accepted": false, "score": 1, "last_activity_date": 1520453146, "creation_date": 1520453146, "answer_id": 49160363, "question_id": 49141515, "link": "https://stackoverflow.com/questions/49141515/splitting-strings-and-re-ordering-in-ruby/49160363#49160363", "title": "Splitting strings and re-ordering in ruby", "body": "<pre><code>def name_shuffler(str)\n  str.split(\" \").reverse.join(\" \")\nend\n\nname_shuffler(\"John Doe\") #=&gt; \"Doe John\"\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9453847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e19da759d5c9448ec4cf83c2d3cec42b?s=128&d=identicon&r=PG&f=1", "display_name": "Rome-oh", "link": "https://stackoverflow.com/users/9453847/rome-oh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 49141570, "answer_count": 3, "score": 0, "last_activity_date": 1520453146, "creation_date": 1520377689, "question_id": 49141515, "link": "https://stackoverflow.com/questions/49141515/splitting-strings-and-re-ordering-in-ruby", "title": "Splitting strings and re-ordering in ruby", "body": "<p>I'm trying to rearrange a string that contains a full name so that the second name is displayed before the first name. </p>\n\n<p>I've managed to split the string using the code below, however when I build it seems to be returning in array format [\"second name\", \"first name\"] rather than a string \"second name, \"first name\". </p>\n\n<p>Any help appreciated! </p>\n\n<pre><code>def name_shuffler(str)\n   name_parts = str.split(\" \")\n   first_name, last_name = name_parts[1], name_parts[0]\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "forms", "virtual-attribute"], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 7939056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31668dc8d4e85b8106f87db8b2055cfe?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/7939056/brian"}, "edited": false, "score": 0, "creation_date": 1520461725, "post_id": 49141540, "comment_id": 85330230, "body": "This is much better design, thanks! I ended up implementing this in my code. Although, it is not actually the reason the above code would not function."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 7, "user_id": 7939056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31668dc8d4e85b8106f87db8b2055cfe?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/7939056/brian"}, "edited": false, "score": 0, "creation_date": 1520462308, "post_id": 49141540, "comment_id": 85330489, "body": "No - I think you missed actually setting a instance variable. But an answer does not necessarily have to salvage the original code."}, {"owner": {"reputation": 7, "user_id": 7939056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31668dc8d4e85b8106f87db8b2055cfe?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/7939056/brian"}, "edited": false, "score": 0, "creation_date": 1520462558, "post_id": 49141540, "comment_id": 85330589, "body": "can you elaborate further on this? I&#39;m sure other problems could have existed, after switching to your code and it still didn&#39;t work I fixed the problem in the controller however."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 7, "user_id": 7939056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31668dc8d4e85b8106f87db8b2055cfe?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/7939056/brian"}, "edited": false, "score": 0, "creation_date": 1520463519, "post_id": 49141540, "comment_id": 85330953, "body": "Your setter is not actually setting a <code>@guardian_email</code> instance variable. And the getter is not using it. So if the user writes in an invalid email address what they entered is just tossed away."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 0, "last_activity_date": 1520462499, "last_edit_date": 1520462499, "creation_date": 1520377877, "answer_id": 49141540, "question_id": 49141129, "link": "https://stackoverflow.com/questions/49141129/rails-virtual-attribute-in-form-not-updating-db-from-form-or-console/49141540#49141540", "title": "Rails virtual attribute in form not updating db from form or console", "body": "<p>Thats a very convoluted approach to a simple task.</p>\n\n<pre><code>class User  &lt; ApplicationRecord\n  belongs_to :guardian,\n    class_name: 'User',\n    optional: true\n\n  def guardian_email=(email)\n    self.guardian ||= User.find_by_email(email)\n    @guardian_email = email\n  end\n\n  def guardian_email\n    @guardian_email || guardian.try(:email)\n  end\nend\n\nclass CreateUsers &lt; ActiveRecord::Migration[5.0]\n  def change\n    create_table :users do |t|\n      t.string :email\n      # ...\n      t.belongs_to :guardian, foreign_key: { to_table: :users }\n      t.timestamps\n    end\n    add_index :users, :email, unique: true\n  end\nend\n</code></pre>\n\n<p>You'll also want a custom validation which kicks in if <code>guardian_email</code> is not blank which checks if the email actually belongs to a user.</p>\n\n<pre><code>class User  &lt; ApplicationRecord\n  # ...\n  validate :guardian_exists, unless: -&gt;{ self.guardian_email.blank? }\n\n  # ...\n\n  private\n\n  def guardian_exists\n    errors.add(:guardian_email) unless guardian || User.find_by_email(guardian_email)\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1520463629, "post_id": 49162410, "comment_id": 85331003, "body": "This is not really correct. The whitelisted attributes are what you pass to your model in the controller. There is no difference here between &quot;virtual attributes&quot; and database backed attributes where the setter and getter are created by ActiveRecord from the database schema."}, {"owner": {"reputation": 7, "user_id": 7939056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31668dc8d4e85b8106f87db8b2055cfe?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/7939056/brian"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1520464254, "post_id": 49162410, "comment_id": 85331251, "body": "Thanks max, I edited hopefully back down to the scope that I think is accurate. forgive me I&#39;m pretty new at this. Any idea why the updated code still does not work when called from the console?"}], "tags": [], "owner": {"reputation": 7, "user_id": 7939056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31668dc8d4e85b8106f87db8b2055cfe?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/7939056/brian"}, "is_accepted": false, "score": 0, "last_activity_date": 1520464158, "last_edit_date": 1520464158, "creation_date": 1520462384, "answer_id": 49162410, "question_id": 49141129, "link": "https://stackoverflow.com/questions/49141129/rails-virtual-attribute-in-form-not-updating-db-from-form-or-console/49162410#49162410", "title": "Rails virtual attribute in form not updating db from form or console", "body": "<p>The reason no change was being made is because in the user controller I was including guardian_id as opposed to guardian_email as a permitted param.  When attempting to update a model using virtual attributes, in the controller one should permit the virtual attribute(s) contained in your form.</p>\n"}], "owner": {"reputation": 7, "user_id": 7939056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31668dc8d4e85b8106f87db8b2055cfe?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/7939056/brian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 49141540, "answer_count": 2, "score": 0, "last_activity_date": 1520464683, "creation_date": 1520375587, "last_edit_date": 1520464683, "question_id": 49141129, "link": "https://stackoverflow.com/questions/49141129/rails-virtual-attribute-in-form-not-updating-db-from-form-or-console", "title": "Rails virtual attribute in form not updating db from form or console", "body": "<p>So in my Rails web application I have a section of code that prompts underage users to input a parent/guardian email when creating an account. In my database I would like to store this as the corresponding ID but naturally the user will want to enter an email.</p>\n\n<p>this part of my form looks like this:</p>\n\n<pre><code>&lt;%= f.label :guardian_email, \"Guardian Email\" %&gt;\n&lt;%= f.text_field :guardian_email, class: 'form-control' %&gt;\n</code></pre>\n\n<p>The corresponding code in my model looks like this:</p>\n\n<pre><code>def guardian_email\n    User.find_by_id(guardian_id).email if guardian_id\nend\n\ndef guardian_email=(g_email)\n    guardian = User.find_by_email(g_email)\n    print guardian.id\n    self.guardian_id = guardian.id\n    print self.guardian_id\nend\n</code></pre>\n\n<p>(the print lines I've added while debugging) However, submitting the form does not update the desired attribute. I then tried from the console and typed:</p>\n\n<pre><code>User.find_by_email(\"example-5@site.org\").guardian_email=(\"example-7@site.org\")\n</code></pre>\n\n<p>I get the output:</p>\n\n<pre><code>User Load (0.5ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"email\" = ? LIMIT ?  [[\"email\", \"example-5@site.org\"], [\"LIMIT\", 1]]\nUser Load (0.3ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"email\" = ? LIMIT ?  [[\"email\", \"example-7@site.org\"], [\"LIMIT\", 1]]\n88 =&gt; \"example-7@mtb.org\" \n</code></pre>\n\n<p>but when I load the user afterwards the attribute guardian_id is still nil. what is odd is that both of the print statements return the proper value (in this case 8) but the assignment has never occured, despite the fact the second 8 that is printed out is the value \"self.guardian_id\". </p>\n\n<p>I've followed railscasts #16 - virtual attributes to arrive at the code I have now, Thanks.</p>\n\n<p>EDIT:</p>\n\n<p>The reason the above code would not function is because I was permitting the actual attribute in the controller as opposed to the virtual one. Although as max pointed out several other bad practices are also present in this code.</p>\n\n<p>Something I still do not understand though is that calling the guardian_email=() method in the console still does not update the attribute, but it works fine on the site.</p>\n"}, {"tags": ["html", "css", "ruby", "background", "sinatra"], "comments": [{"owner": {"reputation": 504, "user_id": 7024293, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh3.googleusercontent.com/-_iHS8SMGqHA/AAAAAAAAAAI/AAAAAAAAAbE/HudebqQ1IF4/photo.jpg?sz=128", "display_name": "stevensonmt", "link": "https://stackoverflow.com/users/7024293/stevensonmt"}, "edited": false, "score": 0, "creation_date": 1520375891, "post_id": 49140925, "comment_id": 85287762, "body": "Did you try <code>background-image: url(&quot;public&#47;images&#47;map.jpg&quot;);</code>?"}, {"owner": {"reputation": 121, "user_id": 9453669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f94d0a2af58508b71a8da23e9e203961?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/9453669/tom"}, "reply_to_user": {"reputation": 504, "user_id": 7024293, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh3.googleusercontent.com/-_iHS8SMGqHA/AAAAAAAAAAI/AAAAAAAAAbE/HudebqQ1IF4/photo.jpg?sz=128", "display_name": "stevensonmt", "link": "https://stackoverflow.com/users/7024293/stevensonmt"}, "edited": false, "score": 0, "creation_date": 1520376099, "post_id": 49140925, "comment_id": 85287853, "body": "No effect, same 404 error raised."}, {"owner": {"reputation": 504, "user_id": 7024293, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh3.googleusercontent.com/-_iHS8SMGqHA/AAAAAAAAAAI/AAAAAAAAAbE/HudebqQ1IF4/photo.jpg?sz=128", "display_name": "stevensonmt", "link": "https://stackoverflow.com/users/7024293/stevensonmt"}, "edited": false, "score": 0, "creation_date": 1520378260, "post_id": 49140925, "comment_id": 85288627, "body": "hmm, <a href=\"https://stackoverflow.com/a/28180988/7024293\">stackoverflow.com/a/28180988/7024293</a> suggests that path should be correct."}, {"owner": {"reputation": 121, "user_id": 9453669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f94d0a2af58508b71a8da23e9e203961?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/9453669/tom"}, "reply_to_user": {"reputation": 504, "user_id": 7024293, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh3.googleusercontent.com/-_iHS8SMGqHA/AAAAAAAAAAI/AAAAAAAAAbE/HudebqQ1IF4/photo.jpg?sz=128", "display_name": "stevensonmt", "link": "https://stackoverflow.com/users/7024293/stevensonmt"}, "edited": false, "score": 1, "creation_date": 1520379266, "post_id": 49140925, "comment_id": 85288993, "body": "Managed to get it working. I moved the public (dir) and its contents up to the root directory and adjusted the url to be (&quot;/images/map.jpg&quot;). Thanks for pointing me toward that SO article. As per the Sinatra README &quot;Static files are served from the ./public directory.&quot; and &quot;Note that the public directory name is not included in the URL.&quot; Not sure how I missed that. Thanks for your help."}], "answers": [{"tags": [], "owner": {"reputation": 121, "user_id": 9453669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f94d0a2af58508b71a8da23e9e203961?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/9453669/tom"}, "is_accepted": true, "score": 1, "last_activity_date": 1520379890, "creation_date": 1520379890, "answer_id": 49141882, "question_id": 49140925, "link": "https://stackoverflow.com/questions/49140925/erb-file-raising-404-when-trying-to-find-locally-held-background-image/49141882#49141882", "title": "ERB file raising 404 when trying to find locally held background image", "body": "<p>As per <a href=\"http://sinatrarb.com/intro.html\" rel=\"nofollow noreferrer\">http://sinatrarb.com/intro.html</a> there were two key issues with my file structure and code.</p>\n\n<p>1.) Static files are served from the ./public directory.  </p>\n\n<p>I adjusted my file structure to this:</p>\n\n<p><strong>Root Directory</strong><br>\nlib (dir), <em>public(dir)</em> </p>\n\n<p><strong>lib(dir)</strong><br>\nmy_app.rb, views(dir)</p>\n\n<p><strong>views(dir)</strong><br>\nindex.erb, <em>play.erb</em>, public(dir)</p>\n\n<p>Public(dir) still holds the images(dir) and images(dir) still holds map.jpg.</p>\n\n<p>2.) Note that the public directory name is not included in the URL.</p>\n\n<p>I also adjusted the URL to this: </p>\n\n<p>background-image: url(\"/images/map.jpg\");</p>\n\n<p>This solved the problem.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5415191, "user_type": "registered", "profile_image": "https://graph.facebook.com/976565312399901/picture?type=large", "display_name": "VinyLimaZ", "link": "https://stackoverflow.com/users/5415191/vinylimaz"}, "is_accepted": false, "score": 0, "last_activity_date": 1528310762, "last_edit_date": 1528310762, "creation_date": 1520380283, "answer_id": 49141931, "question_id": 49140925, "link": "https://stackoverflow.com/questions/49140925/erb-file-raising-404-when-trying-to-find-locally-held-background-image/49141931#49141931", "title": "ERB file raising 404 when trying to find locally held background image", "body": "<p>EDIT: Sorry, I didn't see the Sinatra tag on you post... I will leave this only for information, but sorry there I can't help you...</p>\n\n<p>Only for rails:\nThe problem on your code is that asset-pipeline create a fingerprint after the file name to inform the browser when you update somenthing, you can't have access of folders inside the public folder (You can confirm trying to access the path on the browser: localhost/images/somenthing.*), only the root of it...\nYou can use the AssetsHelper for do the job for you!</p>\n\n<pre><code>&lt;style&gt;\n  ...\n  .bg {\n  /* The image used */\n  background-image: url(&lt;%= image_path('map.jpg');\n  ...\n&lt;/style&gt;\n</code></pre>\n\n<p>If you try to do this on a *.css or *.scss file, rails will give you a error.\nThe solution for this case is:</p>\n\n<pre><code>*.css - *.scss\n.bg {\n  /* The image used */\n  background-image: url(asset_path('map.jpg'));\n</code></pre>\n\n<p>Hope this answers your question :)</p>\n"}], "owner": {"reputation": 121, "user_id": 9453669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f94d0a2af58508b71a8da23e9e203961?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/9453669/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 49141882, "answer_count": 2, "score": 0, "last_activity_date": 1528310762, "creation_date": 1520374703, "last_edit_date": 1520375590, "question_id": 49140925, "link": "https://stackoverflow.com/questions/49140925/erb-file-raising-404-when-trying-to-find-locally-held-background-image", "title": "ERB file raising 404 when trying to find locally held background image", "body": "<p>I am trying to change the background for my play.erb page but I'm struggling to get the image (that is held locally) to show. The page works when using a placeholder image provided online. The error message I am getting is this.</p>\n\n<p><code>127.0.0.1 - - [06/Mar/2018:21:55:49 +0000] \"GET /images/map.jpg HTTP/1.1\" 404 515 0.0137</code></p>\n\n<p>As I understand the 404 reflects the fact that the image can't be found.</p>\n\n<p>I have looked at other SO responses and have tried moving the jpg into the same directory, adding and removing quotation marks and adding the 'public' and 'image' directories, all to no avail.</p>\n\n<p>Can anyone see where I am going wrong? I have added the code and my directory structure below.</p>\n\n<p>Thanks for your time.</p>\n\n<pre><code>#play.erb\n\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"&gt;\n\n&lt;style&gt;\nbody, html {\nheight: 100%;\nmargin: 0;\n}\n\n.bg {\n/* The image used */\nbackground-image: url(\"/public/images/map.jpg\");\n\n/* Full height */\nheight: 100%;\n\n/* Center and scale the image nicely */\nbackground-position: center;\nbackground-repeat: no-repeat;\nbackground-size: cover;\n}\n&lt;/style&gt; \n\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div class=\"bg\"&gt;&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>File structure</p>\n\n<p><strong>Root Directory</strong><br>\nlib (dir)   </p>\n\n<p><strong>lib(dir)</strong><br>\nmy_app.rb, views(dir) </p>\n\n<p><strong>views (dir)</strong><br>\nindex.erb, <em>play.erb</em>, public(dir) </p>\n\n<p><strong>public(dir)</strong><br>\nimages(dir)  </p>\n\n<p><strong>images(dir)</strong><br>\n<em>map.jpg</em></p>\n"}, {"tags": ["ruby", "merge", "hashmap"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1520374681, "post_id": 49140847, "comment_id": 85287245, "body": "<code>a.merge(c){ |key, oldval, newval| oldval | newval }</code> works for your second case and similarly with <code>b</code> for your first."}, {"owner": {"reputation": 734, "user_id": 3991700, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7ab9adeb5710c025096aaf28b7d16432?s=128&d=identicon&r=PG&f=1", "display_name": "Schylar", "link": "https://stackoverflow.com/users/3991700/schylar"}, "edited": false, "score": 0, "creation_date": 1520375929, "post_id": 49140847, "comment_id": 85287774, "body": "Your solution works for me on 2.2.4p230 i386-mingw32."}, {"owner": {"reputation": 958, "user_id": 5666052, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100002574636751/picture?type=large", "display_name": "Pedro Gabriel Lima", "link": "https://stackoverflow.com/users/5666052/pedro-gabriel-lima"}, "edited": false, "score": 0, "creation_date": 1520378918, "post_id": 49140847, "comment_id": 85288862, "body": "Thanks for the help guys.. I will re-check again tomorrow."}, {"owner": {"reputation": 958, "user_id": 5666052, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100002574636751/picture?type=large", "display_name": "Pedro Gabriel Lima", "link": "https://stackoverflow.com/users/5666052/pedro-gabriel-lima"}, "edited": false, "score": 0, "creation_date": 1520423638, "post_id": 49140847, "comment_id": 85306722, "body": "It&#39;s working. My mistake. I wasn&#39;t attributing the output to a new variable (as I thought the caller of merge would receive the output)."}], "owner": {"reputation": 958, "user_id": 5666052, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100002574636751/picture?type=large", "display_name": "Pedro Gabriel Lima", "link": "https://stackoverflow.com/users/5666052/pedro-gabriel-lima"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520374252, "creation_date": 1520374252, "question_id": 49140847, "link": "https://stackoverflow.com/questions/49140847/how-to-merge-two-hashes-of-string-arrays", "title": "How to merge two hashes of string arrays", "body": "<p>How can I merge two hashes in the following conditions: </p>\n\n<pre><code># 1\u00ba case\n  a = {}\n  b = { \"1\"=&gt;[\"c1\", \"c2\"], \"2\"=&gt;[\"c2\",\"c3\"] }\n  # merging a and b\n# a = { \"1\"=&gt;[\"c1\", \"c2\"], \"2\"=&gt;[\"c2\",\"c3\"] } \n\n# 2\u00ba case\n  a = { \"1\"=&gt;[\"c1\", \"c2\"], \"2\"=&gt;[\"c2\",\"c3\"] } \n  c = { \"1\"=&gt;[\"c1\", \"c3\"], \"3\"=&gt;[\"c5\"] }\n  # merging a and c   \n# a = { \"1\"=&gt;[\"c1\", \"c2\", \"c3\"], \"2\"=&gt;[\"c2\",\"c3\"], \"3\"=&gt;[\"c5\"] }\n</code></pre>\n\n<p>What I got until now:</p>\n\n<p>For arrays I know it is possible to merge with the operator \"|\"</p>\n\n<pre><code>a = [\"c0\", \"c1\"], b = [\"c1\", \"c2\"]\na = a | b\n# a = [\"c0\", \"c1\", \"c2\"]\n</code></pre>\n\n<p>But with the hashes is not working:</p>\n\n<pre><code>a.merge(b){ |key, oldval, newval| oldval | newval }\n# returns whatever was in the first place for the Hash a\n</code></pre>\n\n<p>There are answers in the S.O (actually one of them use the same example above), but I haven't been able to make it work (I also already try to merge with a non-empty hash). I know I could open then in a looping and etc... but I'm looking for the \"rubish\" way.  </p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1520373348, "post_id": 49140545, "comment_id": 85286579, "body": "What part of this are you asking about? The HEREDOC style <code>&lt;&lt;</code> or the use of <code>class_eval</code> in general?"}, {"owner": {"reputation": 3133, "user_id": 1883793, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/33ed6dd2dcb89dab186d5b9dfe8ae9b2?s=128&d=identicon&r=PG", "display_name": "user1883793", "link": "https://stackoverflow.com/users/1883793/user1883793"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1520376296, "post_id": 49140545, "comment_id": 85287939, "body": "Hi @tadman do block vs &lt;&lt;-READER and  &lt;&lt;-M"}, {"owner": {"reputation": 96, "user_id": 1560621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26a185177c180c3f7226d29f436997d7?s=128&d=identicon&r=PG", "display_name": "Rustik", "link": "https://stackoverflow.com/users/1560621/rustik"}, "edited": false, "score": 1, "creation_date": 1520407467, "post_id": 49140545, "comment_id": 85297202, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2496102/what-does-class-eval-end-eval-file-line-mean-in-ruby\">What does class_eval &lt;&lt;-&quot;end_eval&quot;, __FILE__, __LINE__ mean in Ruby?</a>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1520442295, "post_id": 49140545, "comment_id": 85319781, "body": "<code>eval</code> takes either a string or a block of code via <code>do ... end</code> or <code>{ ... }</code>. The string version can be specified any way a string can, including HEREDOC."}], "owner": {"reputation": 3133, "user_id": 1883793, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/33ed6dd2dcb89dab186d5b9dfe8ae9b2?s=128&d=identicon&r=PG", "display_name": "user1883793", "link": "https://stackoverflow.com/users/1883793/user1883793"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520376250, "creation_date": 1520372945, "last_edit_date": 1520376250, "question_id": 49140545, "link": "https://stackoverflow.com/questions/49140545/ruby-class-eval-do-vs-m-or-reader", "title": "Ruby class_eval do vs &lt;&lt;-M or &lt;&lt;-READER", "body": "<p>I normally use class_eval do with the block but also saw examples like follows, Im trying to understand in what scenario I should use them, specifically &lt;&lt;-READER and &lt;&lt;-M</p>\n\n<pre><code>class_eval &lt;&lt;-READER, __FILE__ , __LINE__ + 1\n  def #{sym}\n    @#{sym}\n  end\nREADER\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>class_eval &lt;&lt;-M, __FILE__ , __LINE__ + 1\n  def m\n  end\nM\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 3, "last_activity_date": 1520374976, "creation_date": 1520374976, "answer_id": 49140986, "question_id": 49140525, "link": "https://stackoverflow.com/questions/49140525/how-to-disable-past-years-in-datetime-select-in-rails/49140986#49140986", "title": "How to Disable past years in datetime_select in rails", "body": "<pre><code>datetime_select(\"article\", \"written_on\", start_year: Time.now.year)\n</code></pre>\n\n<p><a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-datetime_select\" rel=\"nofollow noreferrer\">http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-datetime_select</a></p>\n"}], "owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 49140986, "answer_count": 1, "score": -2, "last_activity_date": 1520375284, "creation_date": 1520372861, "last_edit_date": 1520375284, "question_id": 49140525, "link": "https://stackoverflow.com/questions/49140525/how-to-disable-past-years-in-datetime-select-in-rails", "title": "How to Disable past years in datetime_select in rails", "body": "<p>I want disable all past years in datetime_select, but cannot find any way to do that.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 5037363, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ec3350f52b6021f2bf9d31045f78a763?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Garcia", "link": "https://stackoverflow.com/users/5037363/javier-garcia"}, "edited": false, "score": 0, "creation_date": 1520373534, "post_id": 49140556, "comment_id": 85286675, "body": "Thanks, the file was in the project root directory"}, {"owner": {"reputation": 713, "user_id": 9424742, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "JR ibkr", "link": "https://stackoverflow.com/users/9424742/jr-ibkr"}, "reply_to_user": {"reputation": 41, "user_id": 5037363, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ec3350f52b6021f2bf9d31045f78a763?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Garcia", "link": "https://stackoverflow.com/users/5037363/javier-garcia"}, "edited": false, "score": 0, "creation_date": 1520373756, "post_id": 49140556, "comment_id": 85286783, "body": "I would recommend reading about SQL lite. Because, if you take some time to understand how it works, you would find it much easier to work with it."}, {"owner": {"reputation": 5513, "user_id": 2718801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d4b144cdafa73e1d470362ed8d7c3a9?s=128&d=identicon&r=PG", "display_name": "jhpratt", "link": "https://stackoverflow.com/users/2718801/jhpratt"}, "edited": false, "score": 0, "creation_date": 1520402412, "post_id": 49140556, "comment_id": 85295125, "body": "Please include the relevant info here, rather than just linking to it."}], "tags": [], "owner": {"reputation": 713, "user_id": 9424742, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "JR ibkr", "link": "https://stackoverflow.com/users/9424742/jr-ibkr"}, "is_accepted": false, "score": 0, "last_activity_date": 1520373001, "creation_date": 1520373001, "answer_id": 49140556, "question_id": 49140504, "link": "https://stackoverflow.com/questions/49140504/where-is-the-database-file-created-in-this-code/49140556#49140556", "title": "Where is the database file created in this code?", "body": "<p>Look for file.db. SQL lite is a truly light database. To view the tables and records read following:\n<a href=\"https://www.tutorialspoint.com/sqlite/sqlite_create_database.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/sqlite/sqlite_create_database.htm</a></p>\n"}], "owner": {"reputation": 41, "user_id": 5037363, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ec3350f52b6021f2bf9d31045f78a763?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Garcia", "link": "https://stackoverflow.com/users/5037363/javier-garcia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520401359, "creation_date": 1520372770, "last_edit_date": 1520401359, "question_id": 49140504, "link": "https://stackoverflow.com/questions/49140504/where-is-the-database-file-created-in-this-code", "title": "Where is the database file created in this code?", "body": "<p>I have this code embedded in a .html.erb file:</p>\n\n<pre><code>require 'sqlite3'\n\n# Open a SQLite 3 database file\ndb = SQLite3::Database.new 'file.db'\n\n# Create a table\nresult = db.execute &lt;&lt;-SQL\n  CREATE TABLE numbers (\n    name VARCHAR(30),\n    val INT\n  );\nSQL\n\n# Insert some data into it\n{ 'one' =&gt; 1, 'two' =&gt; 2 }.each do |pair|\n  db.execute 'insert into numbers values (?, ?)', pair\nend\n\n# Find some records\ndb.execute 'SELECT * FROM numbers' do |row|\n  p row\nend\n</code></pre>\n\n<p>As you can see the code is creating a database, then create a table, etc..\n<strong>My problem</strong>: I don't know where the file \"file.db\" is created. I have searched for it on the whole Windows, but I cannot find it.</p>\n\n<p><strong>NOTE 1:</strong> it seems the file and the table are being created, because if I request for the same .html.erb, I get <code>Error: the table 'numbers' already exists.</code></p>\n\n<p><strong>NOTE 2:</strong> I know this is not the best place to add the ruby code related to a database. I know I should write it on the controller.</p>\n\n<p>Here it is the full code:</p>\n\n<pre><code>&lt;%\n\nrequire 'sqlite3'\n\n# Open a SQLite 3 database file\ndb = SQLite3::Database.new 'development.sqlite3'\n\n# Create a table\nresult = db.execute &lt;&lt;-SQL\n  CREATE TABLE numbers (\n    name VARCHAR(30),\n    val INT\n  );\nSQL\n\n# Insert some data into it\n{ 'one' =&gt; 1, 'two' =&gt; 2 }.each do |pair|\n  db.execute 'insert into numbers values (?, ?)', pair\nend\n\n# Find some records\ndb.execute 'SELECT * FROM numbers' do |row|\n  p row\nend\n\n%&gt;\n\n&lt;h1&gt;Welcome#index&lt;/h1&gt;\n&lt;p&gt;Find me in app/views/welcome/index.html.erb&lt;/p&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1520368985, "post_id": 49139529, "comment_id": 85284497, "body": "Have you tried looking at <a href=\"https://www.google.com/search?q=rails+roles+gem\" rel=\"nofollow noreferrer\">this</a>? The first bit may be helpful."}], "answers": [{"comments": [{"owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 0, "creation_date": 1520370410, "post_id": 49139652, "comment_id": 85285185, "body": "This is great! I do have one question regarding security. Couldn&#39;t a user technically alter their session variable to include a right they didn&#39;t originally have and gain access to an unauthorized portion of the site? The only way I could think to get around that would be to actually make the query for each request. I guess if you encrypt the session then that wouldn&#39;t be an issue."}, {"owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "reply_to_user": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 1, "creation_date": 1520370821, "post_id": 49139652, "comment_id": 85285369, "body": "No, a user session is not editable by a user because it&#39;s signed. There are cases where the session data WILL be visible to the user (unless you also choose to encrypt the session), but in no cases (at least with a default rails install) will the user be able to hand-edit a session variable."}, {"owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "reply_to_user": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 1, "creation_date": 1520370860, "post_id": 49139652, "comment_id": 85285393, "body": "<a href=\"https://stackoverflow.com/questions/41467012/what-is-the-difference-between-signed-and-encrypted-cookies-in-rails\" title=\"what is the difference between signed and encrypted cookies in rails\">stackoverflow.com/questions/41467012/&hellip;</a>"}, {"owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "reply_to_user": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 1, "creation_date": 1520370921, "post_id": 49139652, "comment_id": 85285426, "body": "Im 90% sure that Rails 5 both signs and encrypts cookies by default (it used to only sign)"}, {"owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 0, "creation_date": 1520376216, "post_id": 49139652, "comment_id": 85287898, "body": "One last question. Why are you using <code>add_index</code> on the tables? I thought this was to only be used on columns that had many identical values."}, {"owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "reply_to_user": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 1, "creation_date": 1520377047, "post_id": 49139652, "comment_id": 85288236, "body": "no, it&#39;s adding an index AND a constraint. The index is used because you might want to find a specific role. To do that, it means <code>name</code> is going to be in the <code>WHERE</code> clause, so it should be indexed. The second, and more important thing, is that it&#39;s adding a unique index so that you cant have duplicate values. That could be bad, because say you add an <code>edit_posts</code> right... and want to go modify it later. You dont want to accidentially edit one and not realize you have that right duplicated. It should be 1 role, 1 right, and a many to many relationship linking them all"}, {"owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "reply_to_user": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 0, "creation_date": 1520377062, "post_id": 49139652, "comment_id": 85288244, "body": "(so a right can be shared by multiple roles, you wouldnt have a duplicate right for each role)"}], "tags": [], "owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "is_accepted": true, "score": 4, "last_activity_date": 1520434413, "last_edit_date": 1520434413, "creation_date": 1520369216, "answer_id": 49139652, "question_id": 49139529, "link": "https://stackoverflow.com/questions/49139529/user-roles-in-ruby-on-rails/49139652#49139652", "title": "User Roles in Ruby on Rails", "body": "<p>This is how I do user roles and rights.</p>\n\n<p>I create the following models:</p>\n\n<pre><code>class Role &lt; ApplicationRecord\n  has_and_belongs_to_many :users\n  has_and_belongs_to_many :rights\n  validates :name, presence: true\nend\n\nclass Right &lt; ApplicationRecord\n  has_and_belongs_to_many :roles\n  validates :name, presence: true\nend\n</code></pre>\n\n<p>Make sure you have proper constraints and indexes set in your database:</p>\n\n<pre><code>add_index :roles, :name, unique: true\nadd_index :rights, :name, unique: true\n</code></pre>\n\n<p>From there, you will need join tables for <code>roles_users</code> as well as <code>rights_roles</code> (because it's a many to many)</p>\n\n<p>Then in seeds I create a few roles and rights:</p>\n\n<pre><code>role_admin = Role.create!(name: 'admin')               \nrole_admin.rights.create!(name: 'full_access')         \n\nrole_cm = Role.create!(name: 'company_manager')     \nrole_cm.rights.create!(name: 'edit_company')        \nrole_cm.rights.create!(name: 'edit_all_invoices')      \nrole_cm.rights.create!(name: 'edit_all_users') \n</code></pre>\n\n<p>Then you need to assign one or more roles to your user</p>\n\n<pre><code>current_user.roles &lt;&lt; Role.find_by(name: 'company_manager') \n</code></pre>\n\n<p>Now, I simply check the roles/rights on login, and store it in a session along with the <code>user_id</code></p>\n\n<pre><code>def session_login(user)\n  session[:user_id] = user.id\n  session[:rights] = user.list_rights\nend\n</code></pre>\n\n<p>And you can access roles/rights with several <code>JOIN</code> sql statements efficiently. You want to store it in a session on login so you dont need to make this query for every request. It does mean however if you change roles/rights in the middle of your users session they will need to log back out and in again to see the updated changes</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  def list_roles\n    roles.map(&amp;:name)\n  end\n\n  def list_rights\n    Right.joins(roles: :roles_users).where('roles_users.user_id = ?', id).map(&amp;:name)\n  end\nend\n</code></pre>\n\n<p><strong>Final notes</strong></p>\n\n<p>Now, when you do your 'checking', make sure you verify based on RIGHTS (dont check a users' role)</p>\n\n<p>You can make this helper method</p>\n\n<pre><code>def current_user_has_right?(right)\n  return false unless session[:rights]\n  session[:rights].include? right\nend\n</code></pre>\n\n<p>You can authorize! an entire controller for instance in this way:</p>\n\n<pre><code>def authorize!\n  not_found unless current_user_has_right?('full_access')\nend\n</code></pre>\n"}], "owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 987, "favorite_count": 2, "accepted_answer_id": 49139652, "answer_count": 1, "score": 1, "last_activity_date": 1565349805, "creation_date": 1520368567, "last_edit_date": 1565349805, "question_id": 49139529, "link": "https://stackoverflow.com/questions/49139529/user-roles-in-ruby-on-rails", "title": "User Roles in Ruby on Rails", "body": "<p>This may be more of a conceptual question. I've got a user table and I need to provide roles for each of the users. For example I would like for some users to create customers and some to only view customers. I figure that I could create an association like this: </p>\n\n<pre><code>User has_one :role\nRole belongs_to :user\n</code></pre>\n\n<p>With this structure, I could create <code>boolean</code> fields on the <code>Role</code> model such as <code>can_create_customer</code>. If I did, then I could use the following code to check for permissions based on every user:</p>\n\n<pre><code>if role.can_create_customer?\n    Customer.create(name: \"Test\")\nend\n</code></pre>\n\n<p>Is there a better way of accomplishing the same thing? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "call", "conflicting-libraries"], "comments": [{"owner": {"reputation": 165, "user_id": 9164069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3a76cf933419cf5da005cdc3cc771d5?s=128&d=identicon&r=PG&f=1", "display_name": "neznidalibor", "link": "https://stackoverflow.com/users/9164069/neznidalibor"}, "edited": false, "score": 1, "creation_date": 1520368503, "post_id": 49139186, "comment_id": 85284272, "body": "What about a <code>system</code> call?"}, {"owner": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "edited": false, "score": 1, "creation_date": 1520379182, "post_id": 49139186, "comment_id": 85288965, "body": "Do you know <code>rails runner</code> or rake tasks ?"}, {"owner": {"reputation": 137, "user_id": 4333030, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3ebCe.jpg?s=128&g=1", "display_name": "jonango", "link": "https://stackoverflow.com/users/4333030/jonango"}, "edited": false, "score": 0, "creation_date": 1521147361, "post_id": 49139186, "comment_id": 85620249, "body": "With system <code>system</code> Can I receive the returned data?"}, {"owner": {"reputation": 137, "user_id": 4333030, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3ebCe.jpg?s=128&g=1", "display_name": "jonango", "link": "https://stackoverflow.com/users/4333030/jonango"}, "edited": false, "score": 0, "creation_date": 1521147421, "post_id": 49139186, "comment_id": 85620278, "body": "Rails runner uses the same context, I think that my gem conflict would persist."}], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 4333030, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3ebCe.jpg?s=128&g=1", "display_name": "jonango", "link": "https://stackoverflow.com/users/4333030/jonango"}, "edited": false, "score": 0, "creation_date": 1521147216, "post_id": 49139971, "comment_id": 85620167, "body": "That&#39;s my gem conflict, another gem uses 1.0.0. For that reason I&#39;m trying to do it from an external script."}, {"owner": {"reputation": 304, "user_id": 2453676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98a23e6c35758bca5b5364c76ffefbfe?s=128&d=identicon&r=PG", "display_name": "user2453676", "link": "https://stackoverflow.com/users/2453676/user2453676"}, "reply_to_user": {"reputation": 137, "user_id": 4333030, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3ebCe.jpg?s=128&g=1", "display_name": "jonango", "link": "https://stackoverflow.com/users/4333030/jonango"}, "edited": false, "score": 0, "creation_date": 1521148567, "post_id": 49139971, "comment_id": 85620825, "body": "Which gem uses 1.0.0? Could you ask the gem maintainer to upgrade the dependency?"}], "tags": [], "owner": {"reputation": 304, "user_id": 2453676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98a23e6c35758bca5b5364c76ffefbfe?s=128&d=identicon&r=PG", "display_name": "user2453676", "link": "https://stackoverflow.com/users/2453676/user2453676"}, "is_accepted": true, "score": 1, "last_activity_date": 1520370550, "creation_date": 1520370550, "answer_id": 49139971, "question_id": 49139186, "link": "https://stackoverflow.com/questions/49139186/call-ruby-script-with-other-gems-rails/49139971#49139971", "title": "Call ruby script with other gems rails", "body": "<p>Could you upgrade your Rails project to use rubyzip >= 1.1.6?</p>\n\n<p>If you wanted to use the same version of rubyzip, you could do <code>%x(bundle exec ruby loader.rb)</code>. This will make sure that it uses the same version of rubyzip as your rails project.</p>\n"}], "owner": {"reputation": 137, "user_id": 4333030, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3ebCe.jpg?s=128&g=1", "display_name": "jonango", "link": "https://stackoverflow.com/users/4333030/jonango"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 49139971, "answer_count": 1, "score": 0, "last_activity_date": 1520370550, "creation_date": 1520367004, "question_id": 49139186, "link": "https://stackoverflow.com/questions/49139186/call-ruby-script-with-other-gems-rails", "title": "Call ruby script with other gems rails", "body": "<p>I'm trying to perform something like this:</p>\n\n<p><code>serialized = %x(ruby loader.rb)</code></p>\n\n<p>from a Controller but I have gem conflicts because loader.rb uses rubyXL (depends on rubyzip >= 1.1.6) and my Rails project uses `rubyzip -> 1.0.0. There are any way to handle this?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "webpack"], "answers": [{"comments": [{"owner": {"reputation": 421, "user_id": 9434120, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7ca3b1f5217c4b06b142ef05c0758fb0?s=128&d=identicon&r=PG&f=1", "display_name": "Balance", "link": "https://stackoverflow.com/users/9434120/balance"}, "edited": false, "score": 0, "creation_date": 1520404767, "post_id": 49140415, "comment_id": 85296036, "body": "Thanks. That&#39;s helps me so much!"}], "tags": [], "owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "is_accepted": true, "score": 1, "last_activity_date": 1520372351, "creation_date": 1520372351, "answer_id": 49140415, "question_id": 49138589, "link": "https://stackoverflow.com/questions/49138589/import-js-file-to-webpack-application-js/49140415#49140415", "title": "Import js file to webpack application js", "body": "<p>Is <code>application.js</code> inside <code>/app/javascripts/packs</code>? If so you should be able to write:</p>\n\n<pre><code>import { HelloWorld } from 'generated/welcome'\n</code></pre>\n\n<p>at the top of <code>application.js</code>, then you can include it in your layout with:</p>\n\n<pre><code>&lt;%= javascript_pack_tag 'application' %&gt;\n</code></pre>\n\n<p>I use this syntax in my JS classes:</p>\n\n<pre><code>export class HelloWorld { var HelloWorld = /** @class */ (function () { ...} }\n</code></pre>\n\n<p>Although you might want different class/function names.</p>\n"}], "owner": {"reputation": 421, "user_id": 9434120, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7ca3b1f5217c4b06b142ef05c0758fb0?s=128&d=identicon&r=PG&f=1", "display_name": "Balance", "link": "https://stackoverflow.com/users/9434120/balance"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1194, "favorite_count": 0, "accepted_answer_id": 49140415, "answer_count": 1, "score": 0, "last_activity_date": 1520372351, "creation_date": 1520364622, "last_edit_date": 1520365776, "question_id": 49138589, "link": "https://stackoverflow.com/questions/49138589/import-js-file-to-webpack-application-js", "title": "Import js file to webpack application js", "body": "<p>I have ruby project where I add typescript and webpacker</p>\n\n<p>I have wrote typescript and make <code>rake assets:tsc</code>. So it compiles ts code to js.</p>\n\n<p>Now I have welcome.js at folder `app/assets/javascripts/generated/welcome.js</p>\n\n<p>Here is code of welcome.js</p>\n\n<pre><code> var HelloWorld = /** @class */ (function () {\n    function HelloWorld(name) {\n        this.name = name;\n    }\n    HelloWorld.prototype.print = function () {\n        alert(\"Hello World, \" + this.name + \"!\");\n    };\n    return HelloWorld;\n}());\nnew HelloWorld('John Doe').print();\n//# sourceMappingURL=welcome.js.map\n</code></pre>\n\n<p>I need to import it to webpacker <code>application.js</code> for example. I cannot find any tutorial how to do this on ruby on rails.</p>\n\n<p>how I can solve this?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I tried to wrote in <code>welcome.js</code></p>\n\n<pre><code>export default HelloWorld;\n</code></pre>\n\n<p>And in <code>application.js</code> wrote <code>import HelloWorld from 'generated'</code></p>\n\n<p>And get this in console</p>\n\n<blockquote>\n  <p>Uncaught Error: Cannot find module \"generated\"\n      at Object. (application.js:1)\n      at <strong>webpack_require</strong> (bootstrap 24a076357adc3b41e79b:19)\n      at Object.defineProperty.value (bootstrap 24a076357adc3b41e79b:62)\n      at bootstrap 24a076357adc3b41e79b:62</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "nested"], "comments": [{"owner": {"reputation": 2885, "user_id": 3372172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q3RaO.png?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3372172/pablo"}, "edited": false, "score": 0, "creation_date": 1520366214, "post_id": 49138063, "comment_id": 85283043, "body": "Why do you ask \u201cif user_signed_in\u201d inside \u201cif user_signed_in\u201d inside \u201cif user_signed_in\u201d?"}], "answers": [{"comments": [{"owner": {"reputation": 409, "user_id": 8890613, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10213235756562695/picture?type=large", "display_name": "Jason Harder", "link": "https://stackoverflow.com/users/8890613/jason-harder"}, "edited": false, "score": 0, "creation_date": 1520363674, "post_id": 49138299, "comment_id": 85281715, "body": "so add :_delete in the controller ?   <code>private     def event_params       params.require(:event).permit(:title, :url, :body, event_picture_attributes:         [:id, :url, :name, :_delete]) - assuming this is correct      end end </code>"}, {"owner": {"reputation": 123, "user_id": 3205777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zi6Bd.jpg?s=128&g=1", "display_name": "Ravi Prakash", "link": "https://stackoverflow.com/users/3205777/ravi-prakash"}, "reply_to_user": {"reputation": 409, "user_id": 8890613, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10213235756562695/picture?type=large", "display_name": "Jason Harder", "link": "https://stackoverflow.com/users/8890613/jason-harder"}, "edited": false, "score": 0, "creation_date": 1520364068, "post_id": 49138299, "comment_id": 85281936, "body": "yes, and do follow the above tutorials to define the routes correctly and build a nested form correctly."}, {"owner": {"reputation": 409, "user_id": 8890613, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10213235756562695/picture?type=large", "display_name": "Jason Harder", "link": "https://stackoverflow.com/users/8890613/jason-harder"}, "edited": false, "score": 0, "creation_date": 1520364330, "post_id": 49138299, "comment_id": 85282053, "body": "Okay, I will edit and update as I go and when I&#39;m stuck I will add another comment - my nested form is actually showing the pictures (It&#39;s just the index.html that is) but I will look through that resource more."}, {"owner": {"reputation": 409, "user_id": 8890613, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10213235756562695/picture?type=large", "display_name": "Jason Harder", "link": "https://stackoverflow.com/users/8890613/jason-harder"}, "edited": false, "score": 0, "creation_date": 1520365648, "post_id": 49138299, "comment_id": 85282719, "body": "Okay so I have an event model and an event pictures model. event has one event picture. and event picture belongs to event."}], "tags": [], "owner": {"reputation": 123, "user_id": 3205777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zi6Bd.jpg?s=128&g=1", "display_name": "Ravi Prakash", "link": "https://stackoverflow.com/users/3205777/ravi-prakash"}, "is_accepted": false, "score": 0, "last_activity_date": 1520363441, "last_edit_date": 1592644375, "creation_date": 1520363441, "answer_id": 49138299, "question_id": 49138063, "link": "https://stackoverflow.com/questions/49138063/rails-nested-models-in-views/49138299#49138299", "title": "Rails Nested models in views", "body": "<p>First of all if you want the nested resources to be destroyed as well when you destroy the event object, add <code>:_delete</code> to the <code>event_picture_attributes</code> .</p>\n<p>For nested resources to work properly, Please declare the routes and create the forms using rails form builder.</p>\n<p>Follow these tutorials and tell me if you face any problem.</p>\n<blockquote>\n<p><a href=\"http://guides.rubyonrails.org/routing.html#nested-resources\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/routing.html#nested-resources</a></p>\n<p><a href=\"http://guides.rubyonrails.org/form_helpers.html#nested-forms\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/form_helpers.html#nested-forms</a></p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 409, "user_id": 8890613, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10213235756562695/picture?type=large", "display_name": "Jason Harder", "link": "https://stackoverflow.com/users/8890613/jason-harder"}, "edited": false, "score": 0, "creation_date": 1520367168, "post_id": 49139098, "comment_id": 85283573, "body": "&lt;%= image_tag event.event_picture.url %&gt; - in proper ruby tags then ?"}, {"owner": {"reputation": 409, "user_id": 8890613, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10213235756562695/picture?type=large", "display_name": "Jason Harder", "link": "https://stackoverflow.com/users/8890613/jason-harder"}, "edited": false, "score": 0, "creation_date": 1520367373, "post_id": 49139098, "comment_id": 85283676, "body": "My linked pictures now display just fine ! thank you !"}, {"owner": {"reputation": 2885, "user_id": 3372172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q3RaO.png?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3372172/pablo"}, "reply_to_user": {"reputation": 409, "user_id": 8890613, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10213235756562695/picture?type=large", "display_name": "Jason Harder", "link": "https://stackoverflow.com/users/8890613/jason-harder"}, "edited": false, "score": 0, "creation_date": 1520370627, "post_id": 49139098, "comment_id": 85285281, "body": "Yes. I wrote in my phone and forgot the %. Added"}, {"owner": {"reputation": 409, "user_id": 8890613, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10213235756562695/picture?type=large", "display_name": "Jason Harder", "link": "https://stackoverflow.com/users/8890613/jason-harder"}, "edited": false, "score": 0, "creation_date": 1520372983, "post_id": 49139098, "comment_id": 85286375, "body": "I didn&#39;t mean to sound silly or anything about it! Thanks for the answer!. I&#39;m wondering how to make them work with bootstrap now, but I think some googling around / docs should do it."}, {"owner": {"reputation": 2885, "user_id": 3372172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q3RaO.png?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3372172/pablo"}, "reply_to_user": {"reputation": 409, "user_id": 8890613, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10213235756562695/picture?type=large", "display_name": "Jason Harder", "link": "https://stackoverflow.com/users/8890613/jason-harder"}, "edited": false, "score": 0, "creation_date": 1520374384, "post_id": 49139098, "comment_id": 85287105, "body": "You can add bootstrap classes such as \u201cimg-responsive\u201d, \u201ccol-xs-12\u201d etc."}, {"owner": {"reputation": 409, "user_id": 8890613, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10213235756562695/picture?type=large", "display_name": "Jason Harder", "link": "https://stackoverflow.com/users/8890613/jason-harder"}, "edited": false, "score": 0, "creation_date": 1520448426, "post_id": 49139098, "comment_id": 85323398, "body": "` &lt;%= image_tag (event.event_picture.url, class: &#39;image-overlap&#39;) %&gt;`"}], "tags": [], "owner": {"reputation": 2885, "user_id": 3372172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q3RaO.png?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3372172/pablo"}, "is_accepted": true, "score": 0, "last_activity_date": 1520370570, "last_edit_date": 1520370570, "creation_date": 1520366646, "answer_id": 49139098, "question_id": 49138063, "link": "https://stackoverflow.com/questions/49138063/rails-nested-models-in-views/49139098#49139098", "title": "Rails Nested models in views", "body": "<p>To display the picture for an event:</p>\n\n<pre><code>&lt;%= image_tag event.event_picture.url ... %&gt;\n</code></pre>\n\n<p>To destroy pictures, in Event model:</p>\n\n<pre><code>has_one :event_picture, :dependent =&gt; :destroy\n</code></pre>\n"}], "owner": {"reputation": 409, "user_id": 8890613, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10213235756562695/picture?type=large", "display_name": "Jason Harder", "link": "https://stackoverflow.com/users/8890613/jason-harder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 49139098, "answer_count": 2, "score": 0, "last_activity_date": 1520370570, "creation_date": 1520362506, "last_edit_date": 1520363909, "question_id": 49138063, "link": "https://stackoverflow.com/questions/49138063/rails-nested-models-in-views", "title": "Rails Nested models in views", "body": "<p>How do I properly nest the event pictures in the event index so that way when event_pictures are posted they can be viewed?</p>\n\n<p>Here is my model</p>\n\n<pre><code>class EventPicture &lt; ApplicationRecord\nbelongs_to :event\nend\n</code></pre>\n\n<p>I am using fields for in my form</p>\n\n<pre><code> &lt;%= f.fields_for :event_picture, @event.event_picture do |ff| %&gt;\n\n  &lt;p&gt;\n    &lt;%= ff.label :name  %&gt;&lt;br&gt;\n    &lt;%= ff.text_field :name %&gt;\n  &lt;/p&gt;\n\n  &lt;p&gt;\n    &lt;%=ff.label :url %&gt;\n    &lt;%=ff.text_field :url %&gt;\n  &lt;/p&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<p>Here is my event view (index): </p>\n\n<pre><code>&lt;% if user_signed_in? %&gt;\n  &lt;div class = \"admincreate\"&gt;\n    &lt;% if user_signed_in? %&gt;\n      &lt;p&gt; &lt;button type=\"button\" class=\"btn btn-primary\"&gt;&lt;%= link_to 'New event' , new_event_path(@events)%&gt; &lt;/button&gt; &lt;/p&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n\n\n    &lt;% @events.each do |event| %&gt;\n      &lt;% if user_signed_in? %&gt;\n        &lt;div class =\".btn-group-xs\"&gt;\n      &lt;tr&gt;\n        &lt;td&gt; &lt;button type=\"button\" class=\"btn btn-primary\"&gt;&lt;%= link_to 'Show', event_path(event) %&gt; &lt;/button&gt;  &lt;/td&gt;\n        &lt;td&gt; &lt;button type=\"button\" class=\"btn btn-primary\"&gt;&lt;%= link_to 'Edit', edit_event_path(event) %&gt; &lt;/button&gt; &lt;/td&gt;\n        &lt;td&gt; &lt;button type=\"button\" class=\"btn btn-primary\"&gt;&lt;%= link_to 'Delete',event_path(event),\n                      method: :delete,\n                      data: { confirm: 'Are you sure?'} %&gt; &lt;/button&gt;&lt;/td&gt;\n        &lt;/div&gt;\n      &lt;/tr&gt;\n      &lt;% end %&gt;\n    &lt;% end %&gt;\n&lt;/table&gt;\n&lt;% end %&gt;\n\n&lt;table&gt;\n&lt;% @events.each do |event| %&gt;\n&lt;tr&gt;\n        &lt;td class = \"content-overlap-right\"&gt;\n        &lt;h1 class = \"eventtitle\"&gt; &lt;h1&gt;&lt;%= event.title%&gt; &lt;/h1&gt;\n        &lt;p class = \"eventlink\"&gt;&lt;b&gt; &lt;%= event.url %&gt;&lt;/b&gt;&lt;/p&gt;\n        &lt;p class = \"eventbody\"&gt;&lt;%= event.body%&gt; &lt;/p&gt;\n        &lt;/td&gt;\n&lt;/tr&gt;\n&lt;%end%&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>here is my controller</p>\n\n<pre><code>def event_params\n      params.require(:event).permit(:title, :url, :body, event_picture_attributes:\n        [:id, :url, :name])\n    end\n</code></pre>\n\n<p>I've tried 1) event_pictures.URL (in my <code>@events.each do</code>) &amp; I've tried event pictures each do. </p>\n\n<p>Maybe I missed a small detail or have been way off , but I am a little confused about displaying nested attributes in general.</p>\n\n<p>Thanks for any help! </p>\n\n<p>edit: My final intention is that the associated event_picture will delete when events are deleted - as well as having the event picture show up with each posted event. I assume there is a <code>@event_picture.each do</code> involved but it is not very straightforward seeming (since of course, it has to be the associated event picture already).</p>\n\n<p>if anyone does answer I'll do my best to make the answer clear to others as well.</p>\n\n<p>edit:<br>\nHere are my routes.rb </p>\n\n<p><code>resources :events do\n    resources :event_pictures, shallow: true\n  end</code></p>\n"}, {"tags": ["ruby", "net-http"], "comments": [{"owner": {"reputation": 1136, "user_id": 5215927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w06Fv.jpg?s=128&g=1", "display_name": "mr_sudaca", "link": "https://stackoverflow.com/users/5215927/mr-sudaca"}, "edited": false, "score": 0, "creation_date": 1520364870, "post_id": 49138060, "comment_id": 85282337, "body": "that depends on whether how you installed ruby. In my case I have it located here <code>&#47;Users&#47;mr_sudaca&#47;.rvm&#47;rubies&#47;ruby-2.3.1&#47;lib&#47;ruby&#47;2.3.0&#47;net&#47;h&zwnj;&#8203;ttp.rb</code> since I&#39;ve installed via rvm"}, {"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 1, "creation_date": 1520365939, "post_id": 49138060, "comment_id": 85282902, "body": "Looks like from an old project called <code>http-access</code> which I can&#39;t find trace of.  There&#39;s a comment in some other repos that talk about <code>http-access&#47;0.0.4</code> published by Maebashi-san but I can&#39;t find that project in current-day github..."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1520369811, "post_id": 49138060, "comment_id": 85284917, "body": "Considering Ruby is over 23 years old there&#39;s a very high probability this file is long gone. People add comments like this when intending to credit an original author who may have created some prototype library."}], "answers": [{"comments": [{"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1520392141, "post_id": 49141845, "comment_id": 85292296, "body": "Nice find on this"}], "tags": [], "owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "is_accepted": true, "score": 2, "last_activity_date": 1520379639, "creation_date": 1520379639, "answer_id": 49141845, "question_id": 49138060, "link": "https://stackoverflow.com/questions/49138060/where-is-the-http-access-rb-file/49141845#49141845", "title": "Where is the http-access.rb file?", "body": "<p>The mailing-list thread actually contains the answer: <a href=\"http://blade.nagaokaut.ac.jp/cgi-bin/vframe.rb/ruby/ruby-list/20777?20625-21747+split-mode-vertical\" rel=\"nofollow noreferrer\">here's a mail</a> linking to a RAA project. The Ruby Application Archive (RAA) was a very basic precursor to RubyGems (simplified explanation) created by none other than Yukihiro \u201cmatz\u201d Matsumoto himself. <a href=\"https://www.ruby-lang.org/en/news/2013/08/08/rip-raa/\" rel=\"nofollow noreferrer\">It's defunct since 2013</a> but thankfully  the Internet Archive has archived <a href=\"https://web.archive.org/web/20011114205720/http://www.ruby-lang.org/en/raa-list.rhtml?name=http-access\" rel=\"nofollow noreferrer\">the <code>http-access</code> project page</a>.</p>\n\n<p>Direct links to releases: <a href=\"https://web.archive.org/web/20000523102813/http://www.jin.gr.jp:80/~nahi/Ruby/http-access/http-access-0.0.4p2.tar.gz\" rel=\"nofollow noreferrer\">0.0.4p2</a> and <a href=\"https://web.archive.org/web/20000928213343/http://www.jin.gr.jp:80/~nahi/Ruby/http-access/http-access-0.0.4p3.tar.gz\" rel=\"nofollow noreferrer\">0.0.4p3</a> (note: <a href=\"https://svn.ruby-lang.org/cgi-bin/viewvc.cgi?view=revision&amp;revision=588\" rel=\"nofollow noreferrer\">the earliest version of <code>net/http</code></a> predates both)</p>\n"}], "owner": {"reputation": 6391, "user_id": 2909897, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LMSiW.jpg?s=128&g=1", "display_name": "mbigras", "link": "https://stackoverflow.com/users/2909897/mbigras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 49141845, "answer_count": 1, "score": 2, "last_activity_date": 1521789575, "creation_date": 1520362494, "last_edit_date": 1521789575, "question_id": 49138060, "link": "https://stackoverflow.com/questions/49138060/where-is-the-http-access-rb-file", "title": "Where is the http-access.rb file?", "body": "<p>In the ruby standard library there is a file called <code>net/http.rb</code>.</p>\n\n<p>Towards the top of the page there is a comment:</p>\n\n<pre><code># Copyright (c) 1999-2007 Yukihiro Matsumoto\n# Copyright (c) 1999-2007 Minero Aoki\n# Copyright (c) 2001 GOTOU Yuuzou\n#\n# Written and maintained by Minero Aoki &lt;aamine@loveruby.net&gt;.\n# HTTPS support added by GOTOU Yuuzou &lt;gotoyuzo@notwork.org&gt;.\n#\n# This file is derived from \"http-access.rb\".\n</code></pre>\n\n<p>Where is the <code>http-access.rb</code> file?</p>\n\n<p>I found a similar question on a <a href=\"http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-list/21735\" rel=\"nofollow noreferrer\">Japanese mailing list</a> but it doesn't seem like the question was actually answered.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>Recovered files at <a href=\"https://github.com/mbigras/http-access\" rel=\"nofollow noreferrer\">mbigras/http-access</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1520361828, "post_id": 49137857, "comment_id": 85280804, "body": "<code>redirect_to  @user</code>... needs a <code>show</code> otherwise how would it show anything?"}, {"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 1, "creation_date": 1520361829, "post_id": 49137857, "comment_id": 85280805, "body": "There is no show method in your users controller."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1520364542, "post_id": 49137857, "comment_id": 85282165, "body": "&quot;I wish you could tell me another way to redirect&quot; - where do you want to redirect to?"}], "answers": [{"tags": [], "owner": {"reputation": 123, "user_id": 3205777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zi6Bd.jpg?s=128&g=1", "display_name": "Ravi Prakash", "link": "https://stackoverflow.com/users/3205777/ravi-prakash"}, "is_accepted": false, "score": 2, "last_activity_date": 1520364263, "creation_date": 1520364263, "answer_id": 49138498, "question_id": 49137857, "link": "https://stackoverflow.com/questions/49137857/why-do-i-keep-getting-the-action-show-could-not-be-found-for-userscontroller/49138498#49138498", "title": "Why do I keep getting &quot;The action &#39;show&#39; could not be found for UsersController&quot; after sending data to controller? -Ruby on Rails", "body": "<p>add a show method in the controller</p>\n\n<pre><code> def show;end\n</code></pre>\n\n<p>and make sure you have show.html.erb in the view/users folder.</p>\n"}], "owner": {"reputation": 45, "user_id": 8977705, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V3h1H.jpg?s=128&g=1", "display_name": "Aramis Delgado", "link": "https://stackoverflow.com/users/8977705/aramis-delgado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 452, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1520364263, "creation_date": 1520361662, "last_edit_date": 1520362446, "question_id": 49137857, "link": "https://stackoverflow.com/questions/49137857/why-do-i-keep-getting-the-action-show-could-not-be-found-for-userscontroller", "title": "Why do I keep getting &quot;The action &#39;show&#39; could not be found for UsersController&quot; after sending data to controller? -Ruby on Rails", "body": "<p>Im working with froms and db in Ruby on rails, these are all the documents in my model:</p>\n\n<p>user.rb:</p>\n\n<pre><code>class User &lt; ApplicationRecord\nhas_one :other\nend\n</code></pre>\n\n<p>users_controller.rb:</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  def new\n      @user = User.new\n  end\n\n  def create\n      @user= User.new(user_params)\n\n      if @user.save\n           redirect_to  @user\n      else \n           redirect_to 'new'\n      end\n  end\n\n private\n      def user_params   \n       params.require(:user).permit(:nombre_usuario,:contrasena,:email)\n      end\nend\n</code></pre>\n\n<p>I can't make work the <code>redirect_to</code> line</p>\n\n<p>users/new.html.rb:</p>\n\n<pre><code>&lt;h1&gt;Registro de Usuario&lt;/h1&gt;\n&lt;%= form_for @user do |f| %&gt;\n\n\n&lt;div class=\"field\"&gt;\n    &lt;p&gt;Nombre de Usuario&lt;/p&gt;\n    &lt;% f.label :nombre_usuario %&gt;&lt;br&gt;\n    &lt;%= f.text_field :nombre_usuario%&gt;\n&lt;/div&gt;\n\n&lt;div class=\"field\"&gt;\n    &lt;p&gt;e-mail&lt;/p&gt;\n    &lt;% f.label :email %&gt;&lt;br&gt;\n    &lt;%= f.text_field :email%&gt;\n&lt;/div&gt;\n\n&lt;div class=\"field\"&gt;\n    &lt;p&gt;Contrase\u00f1a&lt;/p&gt;\n    &lt;% f.label :contrasena %&gt;&lt;br&gt;\n    &lt;%= f.text_field :contrasena%&gt;\n&lt;/div&gt;\n\n&lt;a class=\"waves-effect waves-light btn\" &gt;&lt;%= f.submit 'Registrar' %&gt;&lt;/a&gt;\n&lt;a class=\"waves-effect waves-light btn\" href=\"/people/new.html\"&gt; 'Continuar'&lt;/a&gt;\n&lt;br&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Everytime I click submit it sends me to another page that says \"The action 'show' could not be found for UsersController\"</p>\n\n<p>I wish you could tell me another way to redirect, I tried a lot of ways and still can't make it work</p>\n"}, {"tags": ["ruby", "logging", "terminal", "scripting"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1520360139, "post_id": 49137332, "comment_id": 85279950, "body": "Saves it to where?"}, {"owner": {"reputation": 40, "user_id": 3405085, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/bP4xA.png?s=128&g=1", "display_name": "L00n3y", "link": "https://stackoverflow.com/users/3405085/l00n3y"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1520360389, "post_id": 49137332, "comment_id": 85280064, "body": "sorry that i didn&#39;t answer that, i want to save it to a text file or csv file. i want to log my actions from the terminal with the time and date into a nice csv file with columns like time, data, command, result"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1520360557, "post_id": 49137332, "comment_id": 85280153, "body": "Okay. Please update your question with this information."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1520360565, "post_id": 49137332, "comment_id": 85280155, "body": "Ruby has lots of logging packages, but until you can better define what you&#39;re looking for this is way too open-ended."}, {"owner": {"reputation": 40, "user_id": 3405085, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/bP4xA.png?s=128&g=1", "display_name": "L00n3y", "link": "https://stackoverflow.com/users/3405085/l00n3y"}, "edited": false, "score": 0, "creation_date": 1520360958, "post_id": 49137332, "comment_id": 85280382, "body": "I have edit my post, i hope it is more clear now, Sorry for the misunderstanding"}], "owner": {"reputation": 40, "user_id": 3405085, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/bP4xA.png?s=128&g=1", "display_name": "L00n3y", "link": "https://stackoverflow.com/users/3405085/l00n3y"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520889900, "creation_date": 1520359628, "last_edit_date": 1520889900, "question_id": 49137332, "link": "https://stackoverflow.com/questions/49137332/create-a-script-that-logs-terminal-inputs-with-ruby-language", "title": "Create a script that logs terminal inputs with ruby language", "body": "<p>I want to build a ruby on rails application that saves the input from the terminal and the exact time and date, like a logging. </p>\n\n<p>I have searched on the internet but can not find some examples or libraries. Anyone can help me with this one ? </p>\n\n<p>With saving i mean saves to a csv file, like for example you are doing some things on your command like change directory and then use pwd to print working directory. I want to save those commands and the exact time and date that i have done that, to a csv file. If it is possible with columns like command, date, time, result.</p>\n\n<p>Anybody any idea? </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 2, "creation_date": 1520359345, "post_id": 49137206, "comment_id": 85279498, "body": "I&#39;d suspect it doesn&#39;t exist because no one but you thinks it&#39;s a good idea or sees a need for it."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 2, "creation_date": 1520359562, "post_id": 49137206, "comment_id": 85279631, "body": "Because &quot;variable variables&quot; are generally a really bad idea, especially in a language like Ruby where you can just use a hash."}, {"owner": {"reputation": 5513, "user_id": 2718801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d4b144cdafa73e1d470362ed8d7c3a9?s=128&d=identicon&r=PG", "display_name": "jhpratt", "link": "https://stackoverflow.com/users/2718801/jhpratt"}, "edited": false, "score": 0, "creation_date": 1520359593, "post_id": 49137206, "comment_id": 85279651, "body": "Whoever makes the class could implement behavior like this. If it&#39;s an array, split it into it&#39;s individual indices."}, {"owner": {"reputation": 418, "user_id": 9452722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/177fcf093772475128ae3c2a89f41e62?s=128&d=identicon&r=PG", "display_name": "\u4e45\u4fdd\u572d\u53f8", "link": "https://stackoverflow.com/users/9452722/%e4%b9%85%e4%bf%9d%e5%9c%ad%e5%8f%b8"}, "edited": false, "score": 0, "creation_date": 1520359740, "post_id": 49137206, "comment_id": 85279719, "body": "Thanks. I understood. It&#39;s simply becase useless. Not for technical reason."}, {"owner": {"reputation": 1007, "user_id": 3769412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6aef035a16cb34b932d01c38edd223c1?s=128&d=identicon&r=PG&f=1", "display_name": "Daemedeor", "link": "https://stackoverflow.com/users/3769412/daemedeor"}, "edited": false, "score": 0, "creation_date": 1520362352, "post_id": 49137206, "comment_id": 85281068, "body": "@programmerk I would like to point out that sometimes just because you can, doesn&#39;t mean you should"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1520370516, "post_id": 49137206, "comment_id": 85285233, "body": "It is unclear to me what you are actually asking. Are you asking why no language does this? If that is your question, then your premise is wrong: there are plenty of languages in which local variables are just instance variables of a lexical scope object (e.g. Self) or where local variables are just getters and setters on a lexical scope object (e.g. Newspeak) or local variable accesses translate into subroutine calls, or there <i>are no local variables at all</i>. For example, in Ioke <code>a = b</code> is just syntactic sugar for <code>=(a, b)</code>, i.e. calling the method <code>=</code>, passing the unevaluated message chain"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1520370581, "post_id": 49137206, "comment_id": 85285259, "body": "<code>a, b</code> as an argument. Or are you asking why Ruby isn&#39;t one of those languages? In that case, you&#39;ll have to ask the designers of Ruby, we can&#39;t tell you that."}], "answers": [{"comments": [{"owner": {"reputation": 418, "user_id": 9452722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/177fcf093772475128ae3c2a89f41e62?s=128&d=identicon&r=PG", "display_name": "\u4e45\u4fdd\u572d\u53f8", "link": "https://stackoverflow.com/users/9452722/%e4%b9%85%e4%bf%9d%e5%9c%ad%e5%8f%b8"}, "edited": false, "score": 0, "creation_date": 1520518596, "post_id": 49137707, "comment_id": 85355469, "body": "Thank you for your answering. I understood that what I intended to do can be done by another way. And I understood what variable is for, what instance variable is for,  and what hash is for.Thanks."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 0, "last_activity_date": 1520361118, "creation_date": 1520361118, "answer_id": 49137707, "question_id": 49137206, "link": "https://stackoverflow.com/questions/49137206/why-isnt-there-method-that-assign-value-to-a-variable-in-programming-language/49137707#49137707", "title": "Why isn&#39;t there method that assign value to a variable in programming language", "body": "<p>When writing code, but <em>especially</em> when using a dynamic language like Ruby, think in terms of <em>data structures</em> and not in terms of variables.</p>\n\n<p>What you're looking for is actually this:</p>\n\n<pre><code>students = [ \"taro\", \"ziro\", \"tarao\" ].map do |name|\n  Student.new(name)\nend\n</code></pre>\n\n<p>Where that creates an array of students. These can be referenced as <code>students[0]</code> and so on.</p>\n\n<p>If you wanted them indexed by name:</p>\n\n<pre><code>students = [ \"taro\", \"ziro\", \"tarao\" ].map do |name|\n  [ name, Student.new(name) ]\nend.to_h\n</code></pre>\n\n<p>Where then you can call <code>students['taro']</code> and get that student. You'll often find that the Ruby solution that's the most minimal is often the most Ruby-like.</p>\n\n<p>Using regular data structures like this helps when you're passing this data from one location in your code to another. Consider how easy this is:</p>\n\n<pre><code>best_student(students)\n</code></pre>\n\n<p>Versus this approach:</p>\n\n<pre><code>best_student(taro, ziro, tarao, ...)\n</code></pre>\n\n<p>Where each time you add a new student you need to go and change <em>all</em> of your code. That's counter-productive.</p>\n\n<p>The version that does roughly what you want is really ugly by comparison, and intentionally so as you're not supposed to do this casually, it shouldn't be easy:</p>\n\n<pre><code>[ \"taro\", \"ziro\", \"tarao\" ].map do |name|\n  instance_variable_set(:\"@#{name}\", Student.new(name))\nend\n</code></pre>\n\n<p>Where that creates instance variables like <code>@taro</code> but is also a giant mess compared to the simple version.</p>\n"}], "owner": {"reputation": 418, "user_id": 9452722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/177fcf093772475128ae3c2a89f41e62?s=128&d=identicon&r=PG", "display_name": "\u4e45\u4fdd\u572d\u53f8", "link": "https://stackoverflow.com/users/9452722/%e4%b9%85%e4%bf%9d%e5%9c%ad%e5%8f%b8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 49137707, "answer_count": 1, "score": -4, "last_activity_date": 1520518569, "creation_date": 1520359217, "last_edit_date": 1520518569, "question_id": 49137206, "link": "https://stackoverflow.com/questions/49137206/why-isnt-there-method-that-assign-value-to-a-variable-in-programming-language", "title": "Why isn&#39;t there method that assign value to a variable in programming language", "body": "<p>Why there is't method that assign value to a variable</p>\n\n<p>I sometimes want to assign value to variable dynamically.</p>\n\n<p>For example, when I wrote like these, </p>\n\n<pre><code>taro = Student.new \"taro\"\nziro = Student.new \"ziro\"\ntarao = Student.new \"tarao\"\n</code></pre>\n\n<p>I really want to write like these.</p>\n\n<pre><code>[\"taro\", \"ziro\", \"tarao\"].each do |name|\n varname = Student.new name  \nend\n</code></pre>\n\n<p>Why is't there a method like this?</p>\n\n<pre><code>asign(varname, value, scope)\n</code></pre>\n\n<p>And Why I can't code like this?</p>\n\n<pre><code>[\"taro\", \"ziro\", \"tarao\"].each do |name|\n  asign(name, Student.new name, GLOBAL)\nend\n</code></pre>\n\n<p>This is not a question about how to assign dynamically, but \na question 'why' isn't there any schema to solve this problem.</p>\n\n<p>I want to know the reason. Can anyone explain?</p>\n"}, {"tags": ["ruby", "encoding", "openssl", "cryptography"], "answers": [{"comments": [{"owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 1, "creation_date": 1520605714, "post_id": 49148543, "comment_id": 85396636, "body": "As for the last doubt: use an authenticated cipher such as GCM or a separate MAC such as HMAC (in the last case, don&#39;t forget to MAC the IV!)."}, {"owner": {"reputation": 1235, "user_id": 533510, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/266cd5923db54ae0e7e49c7a48575c14?s=128&d=identicon&r=PG", "display_name": "ribamar", "link": "https://stackoverflow.com/users/533510/ribamar"}, "reply_to_user": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1520847282, "post_id": 49148543, "comment_id": 85467196, "body": "@MaartenBodewes: I was thinking about add something <code>&lt;length&gt;L&lt;&#47;length&gt;</code> to the begin of the stream. Then I could use <code>padding = 0</code>, and, when deciphering I could discard the chars exceeding <code>L</code>. Don&#39;t you think I can just patch my procedure instead? Do you see any danger on that?"}], "tags": [], "owner": {"reputation": 1235, "user_id": 533510, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/266cd5923db54ae0e7e49c7a48575c14?s=128&d=identicon&r=PG", "display_name": "ribamar", "link": "https://stackoverflow.com/users/533510/ribamar"}, "is_accepted": false, "score": 0, "last_activity_date": 1520415459, "creation_date": 1520415459, "answer_id": 49148543, "question_id": 49135732, "link": "https://stackoverflow.com/questions/49135732/ruby-openssl-decipher-final-throwsopensslcipherciphererror-padding-0-won/49148543#49148543", "title": "Ruby/OpenSSL: decipher final throwsOpenSSL::Cipher::CipherError, padding = 0 won&#39;t solve it", "body": "<p>The mistake is that any <code>key</code> will decipher a cipher, but only the correct <code>key</code> will decipher to something (similar) to the original stream. </p>\n\n<p>In my case I was using a bad <code>password</code>  which had invisible characters. The <code>password</code> had been previously deciphered by the same procedure. Without <code>padding = 0</code>  the password used to be correctly generated. After adding <code>padding = 0</code>, some padding was added to the output.  Note that <code>puts</code> won't print the \"invisible\" chars, but <code>p</code> will.</p>\n\n<p>It still remains a doubt on how to ensure that the deciphered text was the original ciphered text. however, the question itself is answered.</p>\n"}], "owner": {"reputation": 1235, "user_id": 533510, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/266cd5923db54ae0e7e49c7a48575c14?s=128&d=identicon&r=PG", "display_name": "ribamar", "link": "https://stackoverflow.com/users/533510/ribamar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 804, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1574147670, "creation_date": 1520353955, "last_edit_date": 1574147670, "question_id": 49135732, "link": "https://stackoverflow.com/questions/49135732/ruby-openssl-decipher-final-throwsopensslcipherciphererror-padding-0-won", "title": "Ruby/OpenSSL: decipher final throwsOpenSSL::Cipher::CipherError, padding = 0 won&#39;t solve it", "body": "<p>I ciphered <code>data</code> strings with:</p>\n\n<pre><code>cipher = OpenSSL::Cipher.new('aes-128-cbc')\ncipher.encrypt\nkey = cipher.key = Digest::SHA256.hexdigest password\niv = cipher.random_iv\nencrypted = cipher.update(data) + cipher.final\n\nbase64_iv = Base64.encode64 iv\nbase64_encrypted = Base64.encode64  encrypted\n\nputs base64_iv\nputs base64_encrypted\nFile.write  enc_iv_base64_filename, base64_iv\nFile.write  encrypted_base64_filename, base64_encrypted\n</code></pre>\n\n<p>And I normally decipher with this procedure:</p>\n\n<pre><code>decipher = OpenSSL::Cipher.new('aes-128-cbc')\ndecipher.decrypt\n# decipher.padding = 0\ndecipher.key = Digest::SHA256.hexdigest password\ndecipher.iv = Base64.decode64 (File.read base64_iv)\nplain = decipher.update(Base64.decode64(File.read base64_encrypted)) + decipher.final\n</code></pre>\n\n<p>It has always worked for all the  values I tried with <code>data</code> containing small strings.</p>\n\n<p>Now I am trying it with a string having the contents of ~500MB file, mostly composed of \"readable\" chars (A curious fact is that, having 1100MB of free memory wasn't enough, but after adding 2G swap did the work; not important for this question =) ). The file was decrypted, uploaded to a server, and downloaded again. By trying to decrypt it, it's throwing this exception:</p>\n\n<pre><code>:in `final': wrong final block length (OpenSSL::Cipher::CipherError)\n</code></pre>\n\n<p>I, then, commented out:</p>\n\n<pre><code>decipher.padding = 0\n</code></pre>\n\n<p>The decryption goes to the end -- which shows that the decryption parameters, like <code>iv</code>, <code>key</code> and so on are correct -- however, the data is completely unreadable -- suggesting that I am having a problem with encoding. Could the padding have changed the way the <code>data</code> string will be decoded? Can anyone affirm that the file could  only be corrupted during transmission? What's the answer to the puzzle?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1520353507, "post_id": 49135538, "comment_id": 85275824, "body": "Where&#39;s the slowdown? I mean, you&#39;re doing a <code>like</code> on text values--is it indexed? What DB? What do you have in place for text searches?"}, {"owner": {"reputation": 71, "user_id": 9452289, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Sam Roberts", "link": "https://stackoverflow.com/users/9452289/sam-roberts"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1520353731, "post_id": 49135538, "comment_id": 85275973, "body": "I&#39;m not 100% sure where the slowdown is, I believe its indexed, its postgres and  not 100% sure what you mean on the text searches :/"}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1520353746, "post_id": 49135538, "comment_id": 85275981, "body": "And is row.id always the same in <code>tm.update(event_id: row.id)</code> (update_all)? Do you need callbacks? Validations?"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1520353946, "post_id": 49135538, "comment_id": 85276119, "body": "If you don&#39;t need callbacks/validations: <code>TM.where(your_where_clauses).update_all(event_id: row.id)</code>"}, {"owner": {"reputation": 71, "user_id": 9452289, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Sam Roberts", "link": "https://stackoverflow.com/users/9452289/sam-roberts"}, "edited": false, "score": 0, "creation_date": 1520353991, "post_id": 49135538, "comment_id": 85276141, "body": "row.id changes , should have included the rest of the rake task, ITs doign an <code>Tablename.all.each do |row|</code> The row.id changes . accordingly"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1520354082, "post_id": 49135538, "comment_id": 85276206, "body": "If you can&#39;t do the above (because you need callbacks/validations of your Rails app), I would suggest to use <code>find_each</code> and remove the <code>select(:id)</code> part. <code>find_each</code> does batch find (size of 1000 by default) so Rails does not load too much stuff in the memory (you are saying that Rails is loading 30k records at once, meaning it has to instanciate 30k times the same <code>TM</code> class to make 30k ruby objects -- that&#39;s a lot of wasted memory)."}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1520354133, "post_id": 49135538, "comment_id": 85276243, "body": "@SamRoberts it might change but does it change between each <code>TM</code> record found or is it the same for a bunch of <code>TM</code> records? ---- Actually, can you show us the whole code including the <code>Tablename.all.each</code> part?"}, {"owner": {"reputation": 71, "user_id": 9452289, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Sam Roberts", "link": "https://stackoverflow.com/users/9452289/sam-roberts"}, "edited": false, "score": 0, "creation_date": 1520354232, "post_id": 49135538, "comment_id": 85276320, "body": "The problem seems to be i&#39;m only hitting around 15-20 querys per second in postgres. was looking for a way to speed this up?"}, {"owner": {"reputation": 71, "user_id": 9452289, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Sam Roberts", "link": "https://stackoverflow.com/users/9452289/sam-roberts"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1520354287, "post_id": 49135538, "comment_id": 85276348, "body": "@MrYoshiji There will be multiple tm records that assign to one row yes"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1520354298, "post_id": 49135538, "comment_id": 85276362, "body": "@SamRoberts maybe too much RAM usage so PostgreSQL is slowed down? try removing the <code>select(:id)</code> part and use <code>tmarray.find_each</code> instead. give it a try"}, {"owner": {"reputation": 71, "user_id": 9452289, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Sam Roberts", "link": "https://stackoverflow.com/users/9452289/sam-roberts"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1520354510, "post_id": 49135538, "comment_id": 85276522, "body": "@MrYoshiji I&#39;d move this to chat but i can&#39;t due to rep, Could you give an example? I don&#39;t understand where you would put find_each?"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1520355033, "post_id": 49135538, "comment_id": 85276905, "body": "Is the column <code>valid_from</code> of type <code>string</code> or is it a date?"}, {"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1520355810, "post_id": 49135538, "comment_id": 85277429, "body": "Someone needs to add the PostgreSQL equivalent of EXPLAIN in here. The OP could be missing indices for the SQL to use."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 9452289, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Sam Roberts", "link": "https://stackoverflow.com/users/9452289/sam-roberts"}, "edited": false, "score": 0, "creation_date": 1520355272, "post_id": 49136018, "comment_id": 85277068, "body": "That made a huge difference, it dropeed it down to 7 seconds per 100 rows, Would be nicer if it was even faster but that helped alot more :)"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1520355666, "post_id": 49136018, "comment_id": 85277325, "body": "Using <code>update_all</code> to update the records in a single query if possible is going to be an order of magnitude faster than doing thousands of update queries."}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "reply_to_user": {"reputation": 71, "user_id": 9452289, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Sam Roberts", "link": "https://stackoverflow.com/users/9452289/sam-roberts"}, "edited": false, "score": 0, "creation_date": 1520361235, "post_id": 49136018, "comment_id": 85280532, "body": "@SamRoberts see my updated answer. Like max suggested, use <code>update_all</code> and you will be able to execute this in few seconds only (the remaining choke point would be <code>Event.find_each</code>)"}], "tags": [], "owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "is_accepted": true, "score": 2, "last_activity_date": 1520361108, "last_edit_date": 1520361108, "creation_date": 1520354892, "answer_id": 49136018, "question_id": 49135538, "link": "https://stackoverflow.com/questions/49135538/speed-up-ruby-select-id-query/49136018#49136018", "title": "Speed up ruby select id query", "body": "<p>You can reduce the amount of records to load at once by Rails in memory by using <code>find_each</code> (<a href=\"https://apidock.com/rails/ActiveRecord/Batches/find_each\" rel=\"nofollow noreferrer\">https://apidock.com/rails/ActiveRecord/Batches/find_each</a>).</p>\n\n<p>In your case, it would be:</p>\n\n<pre><code>tm_array = TM.where('product_name ILIKE ? AND valid_from = ? AND promotional_text ILIKE ?', \"#{eventname}%\", \"#{row.date.strftime('%Y-%m-%d')}\", \"#{row.eventvenuename}\")\ntm_array.find_each do |tm|\n  tm.update(event_id: row.id)\nend\n</code></pre>\n\n<hr>\n\n<p><strong>Edit</strong> after your question update: Your whole task could become:</p>\n\n<pre><code>task populate: :environment do\n  begin\n    Event.find_each do |event| # &lt;&lt; this changed from .all.each to .find_each\n      eventname = event.eventname.gsub('UnderGround Presents ', '')\n      eventname = eventname.gsub('&amp;', 'and')\n      tms = TM.where('product_name ILIKE ? AND valid_from = ? AND promotional_text ILIKE ?', \"#{eventname}%\", \"#{event.date.strftime('%Y-%m-%d')}\", \"#{event.eventvenuename}\")\n\n      # Option 1\n      tms.find_each do |tm|\n        tm.update(event_id: event.id)\n      end\n      # Option 2 (if you do not need to run validations/callbacks on the TM records)\n      tms.update_all(event_id: event.id)\n    end\n  rescue Faraday::TimeoutError\n    puts 'Connection failed'\n    next\n  end\nend\n</code></pre>\n\n<p>Suggested improvements:</p>\n\n<ul>\n<li>use <code>tms.update_all(event_id: event.id)</code> if you can (again, this won't run callbacks/validations so make sure it is not needed in your case) (it won't update the <code>updated_at</code> column also, but you can simply do <code>tms.update_all(event_id: event.id, updated_at: DateTime.now)</code>)</li>\n<li>make <code>valid_from</code> column of the TM model's table be a <code>date</code> type in the Database and use directly <code>event.date</code> without converting it to a specific formatted string</li>\n<li>create indexes on <code>product_name</code>, <code>valid_from</code> and <code>promotional_text</code> (see <a href=\"https://niallburkley.com/blog/index-columns-for-like-in-postgres/\" rel=\"nofollow noreferrer\"><code>pg_trm</code> extension</a> and enable the usage of <code>ILIKE</code> on indexed columns)</li>\n<li>replace <code>promotional_text ILIKE ?</code> with <code>promotional_text = ?</code> because the ILIKE is not needed (you search for the exact same name).</li>\n</ul>\n"}], "owner": {"reputation": 71, "user_id": 9452289, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Sam Roberts", "link": "https://stackoverflow.com/users/9452289/sam-roberts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 49136018, "answer_count": 1, "score": 1, "last_activity_date": 1520361334, "creation_date": 1520353375, "last_edit_date": 1520361334, "question_id": 49135538, "link": "https://stackoverflow.com/questions/49135538/speed-up-ruby-select-id-query", "title": "Speed up ruby select id query", "body": "<p>having a bit of a headache with this one, i currently have code that looks like this:</p>\n\n<pre><code>  tmarray = TM.select(:id).where('product_name ILIKE ? AND valid_from = ? AND promotional_text ILIKE ?', \"#{eventname}%\", \"#{row.date.strftime('%Y-%m-%d')}\", \"#{row.eventvenuename}\")\n  if tmarray\n    tmarray.each do |tm|\n      tm.update(event_id: row.id)\n    end\n  end\n</code></pre>\n\n<p>This is currently taking over 3 hours to run on 30,000 rows.</p>\n\n<p>What would be the more speed efficient way to do this?</p>\n\n<p>I have been looking at ActiveRecord import but not 100% sure how I would go about making it work for an update?</p>\n\n<p>Thanks</p>\n\n<p><strong>Edit</strong></p>\n\n<p>Heres the full code:</p>\n\n<pre><code>task populate: :environment do\n  begin\n    Event.all.each do |row|\n      eventname = row.eventname\n      if eventname.include? \"UnderGround Presents \"\n        eventname = eventname.gsub('UnderGround Presents ', '')\n      end\n      if eventname.include? \"&amp;\"\n        eventname = eventname.gsub('&amp;', 'and')\n      end\n      tm_array = TM.where('product_name ILIKE ? AND valid_from = ? AND promotional_text ILIKE ?', \"#{eventname}%\", \"#{row.date.strftime('%Y-%m-%d')}\", \"#{row.eventvenuename}\")\n      tm_array.find_each do |tm|\n        tm.update(event_id: row.id)\n      end\n\n    end\n  rescue Faraday::TimeoutError\n    puts \"Connection failed\"\n    next\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "algorithm"], "comments": [{"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 0, "creation_date": 1520353222, "post_id": 49135247, "comment_id": 85275642, "body": "Not sure if you&#39;d like a solution, or just a hint to point you in the right direction? As a hint, the list is correctly sorted when you make a pass through the list and there are no more swaps to make. So in the inner <code>while</code> loop try keeping track of if you&#39;ve made any swaps and use this to decide whether to set <code>sorted</code> to true."}, {"owner": {"reputation": 31, "user_id": 9302575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e141640306c8ce15ea7b9b12662f5060?s=128&d=identicon&r=PG&f=1", "display_name": "James Stuckey", "link": "https://stackoverflow.com/users/9302575/james-stuckey"}, "reply_to_user": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 0, "creation_date": 1520353544, "post_id": 49135247, "comment_id": 85275851, "body": "I don&#39;t know. Does the algorithm look mostly correct? Is it a small change I need or is my algorithm fundamentally wrong? If it&#39;s just a small change, what could I use to keep track of a swap? Like a <code>swap = 0</code> counter and then increment?"}, {"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 1, "creation_date": 1520354435, "post_id": 49135247, "comment_id": 85276469, "body": "It&#39;s pretty close and just needs a couple of small changes. You&#39;re <i>always</i> setting <code>sorted</code> to true after the first time round the second loop. So the loop only runs once. You&#39;ve correctly worked out that you want the second loop to repeat until the list has all the 5&#39;s at the end. Hint is that the list is sorted when you go all the way through the second loop with nothing needing swapping. Notice that if <code>array[idx]</code> is a 5 and <code>array[idx+1]</code> is also 5 you aren&#39;t really swapping anything. Also, be careful not not to access array[idx+1] when idx is at the end of the array. Does that help?"}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 1, "creation_date": 1520354475, "post_id": 49135247, "comment_id": 85276497, "body": "Don&#39;t those rules forbid you using <code>array.length</code>?"}, {"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1520354526, "post_id": 49135247, "comment_id": 85276536, "body": "Good spot @StefanPochmann - I hadn&#39;t picked up on that."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1520355093, "post_id": 49135247, "comment_id": 85276943, "body": "Consider what happens when <code>idx</code> points to the last element in the array, and that element is a <code>5</code>. You swap it with the next element, but what&#39;s the next element?"}, {"owner": {"reputation": 31, "user_id": 9302575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e141640306c8ce15ea7b9b12662f5060?s=128&d=identicon&r=PG&f=1", "display_name": "James Stuckey", "link": "https://stackoverflow.com/users/9302575/james-stuckey"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1520368460, "post_id": 49135247, "comment_id": 85284253, "body": "Oh yeah youre right @StefanPochmann. I totally missed that!"}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1520362409, "post_id": 49136213, "comment_id": 85281098, "body": "<code>length</code> is a method of <code>Array</code> that is neither <code>[]</code> nor <code>[]=</code>."}], "tags": [], "owner": {"reputation": 21, "user_id": 5937001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9b38f13614b53f84e837a5c012c4761?s=128&d=identicon&r=PG&f=1", "display_name": "Roddo", "link": "https://stackoverflow.com/users/5937001/roddo"}, "is_accepted": false, "score": 0, "last_activity_date": 1520355544, "creation_date": 1520355544, "answer_id": 49136213, "question_id": 49135247, "link": "https://stackoverflow.com/questions/49135247/ruby-array-five-sort-algorithm/49136213#49136213", "title": "Ruby array five_sort algorithm", "body": "<p>Your array is becoming longer at each loop:</p>\n\n<pre><code>array = [1,2]\narray[1], array[2] = array[2], array[1]\nputs array.length\n</code></pre>\n\n<p>Outputs 3.</p>\n\n<p>What you need is to not swap if <code>idx = array.length - 1</code></p>\n\n<pre><code>if (array[idx] == 5)\n  array[idx], array[idx+1] = array[idx+1], array[idx] if idx != array.length - 1\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 9302575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e141640306c8ce15ea7b9b12662f5060?s=128&d=identicon&r=PG&f=1", "display_name": "James Stuckey", "link": "https://stackoverflow.com/users/9302575/james-stuckey"}, "edited": false, "score": 1, "creation_date": 1520374359, "post_id": 49139252, "comment_id": 85287094, "body": "Thank you! I get so used to using the <code>length</code> method that I&#39;ve neglected to think about how else I could stop at the end of an array. So not being able to use any methods on the array severely limited my problem solving.  It&#39;s an easy problem without the limitations placed on the solution. But I know the point of the problem is to get me thinking about logic rather than just manipulating objects."}], "tags": [], "owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "is_accepted": false, "score": 1, "last_activity_date": 1520415276, "last_edit_date": 1520415276, "creation_date": 1520367259, "answer_id": 49139252, "question_id": 49135247, "link": "https://stackoverflow.com/questions/49135247/ruby-array-five-sort-algorithm/49139252#49139252", "title": "Ruby array five_sort algorithm", "body": "<p>While a couple of people have posted alternative approaches, which are all good, I wanted to post something based on your own code to reassure you that you had got pretty close to a solution.</p>\n\n<p>I've added comments to explain the changes I've made:</p>\n\n<pre><code>def five_sort(array)\n  sorted = false\n  while sorted == false\n    idx = 0\n    # use did_swap to keep track of if we've needed to swap any numbers\n    did_swap = false\n\n    # check if next element is nil as alternative to using Array#length\n    while array[idx + 1] != nil\n      # it's only really a swap if the other entry is not also a 5\n      if array[idx] == 5 and array[idx + 1] != 5\n        array[idx], array[idx + 1] = array[idx + 1], array[idx]\n        did_swap = true\n      end\n      idx += 1\n    end\n\n    # if we've been through the array without needing to make any swaps\n    # then the list is sorted\n    if !did_swap\n      sorted = true\n    end\n  end\n  array\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 9302575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e141640306c8ce15ea7b9b12662f5060?s=128&d=identicon&r=PG&f=1", "display_name": "James Stuckey", "link": "https://stackoverflow.com/users/9302575/james-stuckey"}, "edited": false, "score": 0, "creation_date": 1520374086, "post_id": 49139778, "comment_id": 85286960, "body": "I like this solution which I would have done, but I forgot to mention that the problem also forbids new arrays from being created."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 31, "user_id": 9302575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e141640306c8ce15ea7b9b12662f5060?s=128&d=identicon&r=PG&f=1", "display_name": "James Stuckey", "link": "https://stackoverflow.com/users/9302575/james-stuckey"}, "edited": false, "score": 0, "creation_date": 1520394915, "post_id": 49139778, "comment_id": 85292940, "body": "I revised my answer to avoid the use of additional arrays."}, {"owner": {"reputation": 2026, "user_id": 3789665, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/38983281a7926f50843153d9e0788cdf?s=128&d=identicon&r=PG&f=1", "display_name": "greybeard", "link": "https://stackoverflow.com/users/3789665/greybeard"}, "edited": false, "score": 0, "creation_date": 1520411740, "post_id": 49139778, "comment_id": 85299284, "body": "(Read the question only after seeing you suggest <code>&amp;&amp; arr[i+1]</code>\u2026)"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1520403502, "last_edit_date": 1520403502, "creation_date": 1520369672, "answer_id": 49139778, "question_id": 49135247, "link": "https://stackoverflow.com/questions/49135247/ruby-array-five-sort-algorithm/49139778#49139778", "title": "Ruby array five_sort algorithm", "body": "<pre><code>def five_sort(arr)\n  i = 0\n  cnt = 0\n  while arr[i]\n    if arr[i] == 5 &amp;&amp; arr[i+1]         \n      arr[i..i] = []\n      cnt += 1                  \n    else\n      i += 1                    \n    end\n  end\n  cnt.times { arr[-1,2] = [arr[-1],5] }\n  arr \nend\n\narr = [1,5,3,5,6] \nfive_sort arr\n  #=&gt; [1, 3, 6, 5, 5]\narr\n  #=&gt; [1, 3, 6, 5, 5] # confirms arr is mutated\n\nfive_sort [5,5,5,3,6]\n  #=&gt; [3, 6, 5, 5, 5]\nfive_sort [5,5,5,5,5]\n  #=&gt; [5, 5, 5, 5, 5]\nfive_sort [1,2,3,4,6]\n  #=&gt; [1, 2, 3, 4, 6]\nfive_sort []\n  #=&gt; []\n</code></pre>\n\n<p>Notes:</p>\n\n<ul>\n<li>As required by the spec, the only methods invoked on <code>arr</code> are <code>[]</code> and <code>[]=</code> and no other arrays are created.</li>\n<li>if <code>i</code> indexes the last element of the array, <code>arr[i+1]</code> equals <code>nil</code>.</li>\n<li><code>arr[i..i] = []</code> removes the element<code>arr[i]</code> from <code>arr</code>.</li>\n<li><code>arr[-1,2] = [arr[-1],5]</code> appends a <code>5</code> to <code>arr</code>.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1520402305, "post_id": 49139963, "comment_id": 85295089, "body": "RW-indices, of course! Very elegant, thank you. When I see code like this I always wonder what am I indeed using instead of brains for my whole life? :)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1520404165, "post_id": 49139963, "comment_id": 85295797, "body": "Nice one, Stefan!"}], "tags": [], "owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "is_accepted": false, "score": 3, "last_activity_date": 1520372082, "last_edit_date": 1520372082, "creation_date": 1520370515, "answer_id": 49139963, "question_id": 49135247, "link": "https://stackoverflow.com/questions/49135247/ruby-array-five-sort-algorithm/49139963#49139963", "title": "Ruby array five_sort algorithm", "body": "<p>Just a simple O(n) time and O(1) space solution, using a write-index and a read-index.</p>\n\n<pre><code>  w = r = 0\n  while array[w]\n    r += 1 while array[r] == 5\n    array[w] = array[r] || 5\n    w += 1\n    r += 1\n  end\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 9302575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e141640306c8ce15ea7b9b12662f5060?s=128&d=identicon&r=PG&f=1", "display_name": "James Stuckey", "link": "https://stackoverflow.com/users/9302575/james-stuckey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 1, "answer_count": 4, "score": 3, "last_activity_date": 1526424903, "creation_date": 1520352391, "question_id": 49135247, "link": "https://stackoverflow.com/questions/49135247/ruby-array-five-sort-algorithm", "title": "Ruby array five_sort algorithm", "body": "<p>I'm trying to solve a problem called five_sort that accepts an array of integers as the argument and places all the fives at the end of the array and leaves all of the other numbers unsorted. For example, <code>[1,2,5,3,2,5,5,7]</code> would be sorted as <code>[1,2,3,2,7,5,5,5]</code>.The rules for the problem state that only a while loops can be used and no other methods can be called on the array except <code>[]</code> and <code>[]=</code>. Here is my current code:</p>\n\n<pre><code>def five_sort(array)\n    sorted = false\n    while sorted == false\n    idx = 0\n\n      while idx &lt; array.length\n        if array[idx] == 5\n            array[idx], array[idx + 1] = array[idx + 1], array[idx]\n        end\n        idx += 1\n      end\n    sorted = true\n    end\narray\nend\n</code></pre>\n\n<p>When running it, it is just in a continuous loop but I can't find out how to fix it. I know that if I just run the second while loop without the <code>while sorted</code> loop, the array would only run once and the fives would only switch places once and the loop would be over. But I don't know how to run the second while loop and stop it once all the fives are at the end. </p>\n\n<p>Can anyone help me figure this one out?</p>\n"}, {"tags": ["javascript", "ruby", "regex"], "comments": [{"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 1, "creation_date": 1520352367, "post_id": 49135167, "comment_id": 85275040, "body": "No, there is not. Even inline modifiers are not supported (Chrome only). You may want to have a look at <a href=\"http://xregexp.com\" rel=\"nofollow noreferrer\">xregexp</a> lib."}, {"owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "edited": false, "score": 0, "creation_date": 1520352801, "post_id": 49135167, "comment_id": 85275352, "body": "Are you able to <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/normalize\" rel=\"nofollow noreferrer\"><code>normalize()</code></a> the string? What exactly are you trying to accomplish?"}, {"owner": {"reputation": 117, "user_id": 2731970, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbc6c538d4c80602b9ac40e3e79e71dc?s=128&d=identicon&r=PG&f=1", "display_name": "Dawid PR", "link": "https://stackoverflow.com/users/2731970/dawid-pr"}, "edited": false, "score": 0, "creation_date": 1520357515, "post_id": 49135167, "comment_id": 85278414, "body": "I think i will go with normalize input string and compare always with normalized string in database. I&#39;m trying to achieve search if you search for T&#228;glichen then i want to find in database Taglichen (in database i have without special character). Easiest solution will compare always normalized strings."}], "answers": [{"tags": [], "owner": {"reputation": 1289, "user_id": 9145079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dc5c3f09b1b1cb7418fcc214e7b849b?s=128&d=identicon&r=PG", "display_name": "Fred", "link": "https://stackoverflow.com/users/9145079/fred"}, "is_accepted": false, "score": 0, "last_activity_date": 1520352561, "creation_date": 1520352561, "answer_id": 49135300, "question_id": 49135167, "link": "https://stackoverflow.com/questions/49135167/change-non-latin-character-to-latin-character-in-string/49135300#49135300", "title": "Change non-latin character to latin character in string", "body": "<p>One thing you can do is slugify your strings before matching (<a href=\"https://www.npmjs.com/package/slugify\" rel=\"nofollow noreferrer\">https://www.npmjs.com/package/slugify</a>)</p>\n\n<pre><code>Input: \"Ich hei\u00dfe Fred\"\nOutput: \"ich-heisse-fred\"\n</code></pre>\n\n<p>If you don't like the <code>-</code> characters as separators you can change that, as stated by the docs</p>\n"}, {"comments": [{"owner": {"reputation": 117, "user_id": 2731970, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbc6c538d4c80602b9ac40e3e79e71dc?s=128&d=identicon&r=PG&f=1", "display_name": "Dawid PR", "link": "https://stackoverflow.com/users/2731970/dawid-pr"}, "edited": false, "score": 0, "creation_date": 1520357648, "post_id": 49136781, "comment_id": 85278487, "body": "thx, i know how to normalize string, i was thinking is it possible to ask for Taglichen by t&#228;glichen without normalization with some regex."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 117, "user_id": 2731970, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbc6c538d4c80602b9ac40e3e79e71dc?s=128&d=identicon&r=PG&f=1", "display_name": "Dawid PR", "link": "https://stackoverflow.com/users/2731970/dawid-pr"}, "edited": false, "score": 0, "creation_date": 1520357842, "post_id": 49136781, "comment_id": 85278598, "body": "You have to either normalize it upfront or to match both <code>228</code> <i>and</i> <code>[97, 776]</code>. I enter umlauts in every day (pun intented) but I don\u2019t have it on keyboard and I believe you still want to match combined diacritics as well."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1520357761, "last_edit_date": 1520357761, "creation_date": 1520357528, "answer_id": 49136781, "question_id": 49135167, "link": "https://stackoverflow.com/questions/49135167/change-non-latin-character-to-latin-character-in-string/49136781#49136781", "title": "Change non-latin character to latin character in string", "body": "<p>There is a legit solution for modern ruby, using <a href=\"http://ruby-doc.org/core/String.html#method-i-unicode_normalize\" rel=\"nofollow noreferrer\"><code>String#unicode_normalize</code></a></p>\n\n<pre><code>\"t\u00e4glichen\".unicode_normalize(:nfd).\n            codepoints.\n            reject(&amp;128.method(:&lt;)).\n            pack('U*')\n#\u21d2 \"taglichen\"\n</code></pre>\n\n<p>To match:</p>\n\n<pre><code>\"t\u00e4glichen\".unicode_normalize(:nfc) =~ /t[a\u00e4]glichen/i\n#\u21d2\u00a00\n</code></pre>\n\n<p>The normalization is needed because umlaut might be either a single codepoint <code>228</code> or a combined diacritics <code>[97, 776]</code>. Check this (try to copy-paste into your REPL):</p>\n\n<pre><code>\"a\u0308\" == \"\u00e4\"\n#\u21d2 false\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 2731970, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbc6c538d4c80602b9ac40e3e79e71dc?s=128&d=identicon&r=PG&f=1", "display_name": "Dawid PR", "link": "https://stackoverflow.com/users/2731970/dawid-pr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "accepted_answer_id": 49136781, "answer_count": 2, "score": 0, "last_activity_date": 1520357761, "creation_date": 1520352117, "last_edit_date": 1520353170, "question_id": 49135167, "link": "https://stackoverflow.com/questions/49135167/change-non-latin-character-to-latin-character-in-string", "title": "Change non-latin character to latin character in string", "body": "<p>I'm trying to match by regex in Ruby or in Javascript a string that contains non english characters.</p>\n\n<p>So is there a way to replace the string \"t\u00e4glichen\" with the string \"taglichen\" ?\nI know that i can replace non english characters by options like:</p>\n\n<pre><code>/(?i)t[a\u00e4]glichen/\n</code></pre>\n\n<p>But for this i need dictionary of possible characters and set all of them in searched word. Maybe there is a more efficient way to do this ?</p>\n"}, {"tags": ["ruby", "installation", "rubygems", "chef-infra"], "answers": [{"tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": true, "score": 2, "last_activity_date": 1520359173, "creation_date": 1520359173, "answer_id": 49137193, "question_id": 49135035, "link": "https://stackoverflow.com/questions/49135035/why-does-chefdk-contains-hpp-and-h-files/49137193#49137193", "title": "why does chefDK contains *.hpp and *.h files", "body": "<p>Mostly because we compile everything from source and the package is like 100mb so 10k of text files below our notice. Also some of them are needed afterwards if you want to <code>chef gem install</code> something with a c extension. Xcode is not needed, we have already compiled everything you need for you.</p>\n"}], "owner": {"reputation": 2173, "user_id": 2293666, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ffbd0ed6bbf3b01e8ff53f81e905fd0f?s=128&d=identicon&r=PG", "display_name": "osexp2003", "link": "https://stackoverflow.com/users/2293666/osexp2003"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "accepted_answer_id": 49137193, "answer_count": 1, "score": 1, "last_activity_date": 1520359173, "creation_date": 1520351749, "question_id": 49135035, "link": "https://stackoverflow.com/questions/49135035/why-does-chefdk-contains-hpp-and-h-files", "title": "why does chefDK contains *.hpp and *.h files", "body": "<p>I noticied that when install chefDK, it will install a lot of *.hpp *.h files, why?</p>\n\n<p><code>\n/opt/chefdk/embedded/lib/ruby/gems/2.4.0/gems/ffi-1.9.18/ext/ffi_c/AbstractMemory.h\n...\n/opt/chefdk/embedded/lib/ruby/gems/2.4.0/gems/dep-selector-libgecode-1.3.1/lib/dep-selector-libgecode/vendored-gecode/include/gecode/int/unary/subsumption.hpp\n</code></p>\n\n<p>And it also need Xcode in mac, why?</p>\n"}, {"tags": ["ruby", "shell", "exploit"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 9452143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4afe255e12b8686b44155d792f8b3e25?s=128&d=identicon&r=PG&f=1", "display_name": "blazers_99", "link": "https://stackoverflow.com/users/9452143/blazers-99"}, "is_accepted": false, "score": 0, "last_activity_date": 1520363881, "creation_date": 1520363881, "answer_id": 49138401, "question_id": 49135022, "link": "https://stackoverflow.com/questions/49135022/ruby-convert-memory-address-string-format-to-bytes-for-shellcode/49138401#49138401", "title": "Ruby: Convert memory address string format to bytes for shellcode", "body": "<p>It was easy...</p>\n\n<p>buf += [string.to_i(16)].pack('Q')</p>\n"}], "owner": {"reputation": 11, "user_id": 9452143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4afe255e12b8686b44155d792f8b3e25?s=128&d=identicon&r=PG&f=1", "display_name": "blazers_99", "link": "https://stackoverflow.com/users/9452143/blazers-99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1520363881, "creation_date": 1520351718, "question_id": 49135022, "link": "https://stackoverflow.com/questions/49135022/ruby-convert-memory-address-string-format-to-bytes-for-shellcode", "title": "Ruby: Convert memory address string format to bytes for shellcode", "body": "<p>I have found a program that leaks the address of it's buffer. I can capture that by sending a socket.get_once but it's in a string format. So when I go to pass it to pack it doesn't want a string value. How can I convert a memory address in string format to an address that I can put in shellcode?</p>\n\n<p>Example Address captured: 0x7fffffffdfc0</p>\n\n<p>Using string.pack('Q') it throws an error that it's not an integer. So I tried using a loop to break up the sections into pairs like so:</p>\n\n<p>string.scan(/../).reverse_each { |x| buf += [x.to_i].pack('S')}</p>\n\n<p>I know this is probably a simple solution but for some reason I can't wrap my head around it.</p>\n"}, {"tags": ["ruby", "image", "webpack", "middleman"], "comments": [{"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 0, "creation_date": 1520386076, "post_id": 49134968, "comment_id": 85290957, "body": "A quick reminder that question titles comprised of a list of tags are not particularly readable, <a href=\"https://meta.stackoverflow.com/q/253028\">the reference discussion is here</a>. If you wish to refer to some technologies in a normal usual sentence that&#39;s fine, but otherwise, just use the tag system."}, {"owner": {"reputation": 3498, "user_id": 161869, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0dHDQ.png?s=128&g=1", "display_name": "Chris Hough", "link": "https://stackoverflow.com/users/161869/chris-hough"}, "reply_to_user": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 0, "creation_date": 1520435986, "post_id": 49134968, "comment_id": 85315287, "body": "I partially disagree @halfer and I rolled parts of your changes back. You changed the semantic english meaning of what I asked and therefor impacted my question negatively.  I agree about remove the terms, but search titles are used too. I updated it to meet you half way."}, {"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 0, "creation_date": 1520436088, "post_id": 49134968, "comment_id": 85315368, "body": "I appreciate the dialogue, Chris. After a question is edited, a question author is very welcome to carry on editing - it is a key part of the collaborative approach on the site. Your new title does not seem to be particularly taggy to me - I just fixed up the case subsequently. Much more readable than rev 1! (Case helps a lot with readability, I find, and it&#39;s worth noting all questions are edited to help their future audience)."}, {"owner": {"reputation": 3498, "user_id": 161869, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0dHDQ.png?s=128&g=1", "display_name": "Chris Hough", "link": "https://stackoverflow.com/users/161869/chris-hough"}, "reply_to_user": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 1, "creation_date": 1520442029, "post_id": 49134968, "comment_id": 85319598, "body": "I agree and love collaboration @halfer - I appreciate the insight too, and will adjust that going forward regarding the titles."}], "answers": [{"tags": [], "owner": {"reputation": 3498, "user_id": 161869, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0dHDQ.png?s=128&g=1", "display_name": "Chris Hough", "link": "https://stackoverflow.com/users/161869/chris-hough"}, "is_accepted": true, "score": 0, "last_activity_date": 1520745071, "creation_date": 1520745071, "answer_id": 49216858, "question_id": 49134968, "link": "https://stackoverflow.com/questions/49134968/middleman-image-assets-in-slim-files-not-working-when-using-webpack-to-build-web/49216858#49216858", "title": "Middleman image assets in Slim files not working when using webpack to build website", "body": "<p>In case anyone else is looking for a solution for this issue, here is how I solved it. </p>\n\n<p>First, I made sure that <code>activate :asset_hash</code> was turned on and <code>set :images_dir, 'assets/images/middleman'</code> was configured for my template assets.  Next, I broke up the assets used by webpack and middleman as shown below.  This allowed me to use code like this <code>link rel='shortcut icon' href=(image_path('favicons/favicon.ico'))</code> in my slim templates and have routable assets with hashes to break browser caching.</p>\n\n<p>This looks something like this...\n<a href=\"https://i.stack.imgur.com/Xns0x.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Xns0x.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 3498, "user_id": 161869, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0dHDQ.png?s=128&g=1", "display_name": "Chris Hough", "link": "https://stackoverflow.com/users/161869/chris-hough"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 385, "favorite_count": 0, "accepted_answer_id": 49216858, "answer_count": 1, "score": 1, "last_activity_date": 1520745071, "creation_date": 1520351567, "last_edit_date": 1520435945, "question_id": 49134968, "link": "https://stackoverflow.com/questions/49134968/middleman-image-assets-in-slim-files-not-working-when-using-webpack-to-build-web", "title": "Middleman image assets in Slim files not working when using webpack to build website", "body": "<p>What is the correct format for my image links so they are compiled via webpack with the correct asset hash stamp? Right now, this is working correctly in my sass files, but not slim-lang html templates.</p>\n\n<p><strong>Example HTML:</strong></p>\n\n<pre><code>p\n  = image_tag 'favicons/testme.png'\n  = tag :img, src: '/images/favicons/testme.png'\n</code></pre>\n\n<p><strong>Folder Structure:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/GNRHt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GNRHt.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>My Webpack configuration:</strong></p>\n\n<pre><code>\"use strict\";\n\nconst path = require(\"path\");\nconst webpack = require(\"webpack\");\nconst ExtractTextPlugin = require(\"extract-text-webpack-plugin\");\nconst CleanWebpackPlugin = require(\"clean-webpack-plugin\");\nconst ManifestPlugin = require(\"webpack-manifest-plugin\");\nconst outputPath = path.join(__dirname, \"build/assets\");\n\nmodule.exports = {\n  entry: {\n    site: [\n      path.join(__dirname, \"/source/assets/stylesheets/site.scss\"),\n      path.join(__dirname, \"/source/assets/javascripts/site.js\")\n    ]\n  },\n\n  output: {\n    path: outputPath,\n    filename: '[name]-[hash].js',\n    publicPath: '/assets/'\n  },\n\n  resolve: {\n    modules: [\n      'node_modules'\n    ]\n  },\n\n  module: {\n    rules: [\n      {\n        test: /\\.(woff|woff2|eot|ttf|svg|ico|jpg|jpeg|png)$/,\n        use: [\n          {\n            loader: 'url-loader',\n            options: {\n              limit: 5000,\n              name: \"[name]-[hash].[ext]\",\n              publicPath: '/assets/'\n            }\n          }\n        ]\n      },\n      {\n        test: /\\.js$/,\n        exclude: /(node_modules|bower_components)/,\n        use: [\n          {\n            loader: 'babel-loader',\n            options: {\n              presets: ['es2015']\n            }\n          }\n        ]\n      },\n      {\n        test: /\\.(css|scss)$/,\n        use: [\n          {\n            loader: 'file-loader',\n            options: {\n              name: '[name]-[hash].css',\n              publicPath: '/assets/'\n            }\n          },\n          {\n            loader: 'extract-loader'\n          },\n          {\n            loader: 'css-loader'\n          },\n          {\n            loader: 'resolve-url-loader'\n          },\n          {\n            loader: 'sass-loader',\n            options: {\n              includePaths: [\n                path.resolve(__dirname, 'node_modules/bootstrap/scss'),\n              ],\n              sourceMap: true\n            }\n          }\n        ]\n      }\n    ]\n  },\n\n  plugins: [\n    new ManifestPlugin({\n      fileName: 'rev-manifest.json'\n    }),\n    new CleanWebpackPlugin([outputPath], {\n      root: __dirname\n    })\n  ]\n};\n</code></pre>\n\n<p><strong>My Package Json File...</strong></p>\n\n<pre><code>{\n  \"scripts\": {\n    \"start\": \"NODE_ENV=development webpack --watch -d --progress --color\",\n    \"build\": \"NODE_ENV=production webpack --bail -p\"\n  },\n  \"dependencies\": {\n    \"@fortawesome/fontawesome\": \"^1.1.3\",\n    \"@fortawesome/fontawesome-free-brands\": \"^5.0.6\",\n    \"@fortawesome/fontawesome-free-regular\": \"^5.0.6\",\n    \"@fortawesome/fontawesome-free-solid\": \"^5.0.6\",\n    \"bootstrap\": \"^4.0.0\",\n    \"jquery\": \"^3.3.1\",\n    \"normalize-scss\": \"^7.0.1\"\n  },\n  \"devDependencies\": {\n    \"babel\": \"^6.23.0\",\n    \"babel-core\": \"^6.26.0\",\n    \"babel-loader\": \"^7.1.2\",\n    \"babel-preset-es2015\": \"^6.24.1\",\n    \"babel-preset-stage-0\": \"^6.24.1\",\n    \"clean-webpack-plugin\": \"^0.1.18\",\n    \"css-loader\": \"^0.28.9\",\n    \"extract-loader\": \"^1.0.2\",\n    \"extract-text-webpack-plugin\": \"^3.0.2\",\n    \"file-loader\": \"^1.1.6\",\n    \"node-sass\": \"^4.7.2\",\n    \"postcss-loader\": \"^2.1.0\",\n    \"precss\": \"^3.1.0\",\n    \"resolve-url-loader\": \"^2.2.1\",\n    \"sass-loader\": \"^6.0.6\",\n    \"script-loader\": \"^0.7.2\",\n    \"style-loader\": \"^0.20.1\",\n    \"url-loader\": \"^0.6.2\",\n    \"webpack\": \"^3.11.0\",\n    \"webpack-manifest-plugin\": \"^1.3.2\"\n  }\n}\n</code></pre>\n"}, {"tags": ["ruby", "sinatra", "homebrew", "macos-high-sierra"], "owner": {"reputation": 368, "user_id": 1906858, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/afd82cb1bb168bf70f10d0262f115737?s=128&d=identicon&r=PG", "display_name": "user_pruser", "link": "https://stackoverflow.com/users/1906858/user-pruser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 584, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1520519587, "creation_date": 1520351394, "last_edit_date": 1520519587, "question_id": 49134901, "link": "https://stackoverflow.com/questions/49134901/brew-update-too-many-open-files", "title": "brew update - too many open files", "body": "<p>This question has been asked about hundredths of times and I am trying to resolve using google and SO but actually none of the solutions actually helps.</p>\n\n<p>for example, like these one:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/10095796/os-x-terminal-ssh-and-too-many-open-files#10097735\">Os x terminal, ssh , and too many open files</a></p>\n\n<p>my output (-n was 256)</p>\n\n<pre><code>ulimit -a\ncore file size          (blocks, -c) 0\ndata seg size           (kbytes, -d) unlimited\nfile size               (blocks, -f) unlimited\nmax locked memory       (kbytes, -l) unlimited\nmax memory size         (kbytes, -m) unlimited\nopen files                      (-n) 7168\npipe size            (512 bytes, -p) 1\nstack size              (kbytes, -s) 8192\ncpu time               (seconds, -t) unlimited\nmax user processes              (-u) 709\nvirtual memory          (kbytes, -v) unlimited\n</code></pre>\n\n<p>and the error is the same.</p>\n\n<p>I also tryied to kill all the processess which took much open files from these post: <a href=\"https://superuser.com/questions/433746/is-there-a-fix-for-the-too-many-open-files-in-system-error-on-os-x-10-7-1\">https://superuser.com/questions/433746/is-there-a-fix-for-the-too-many-open-files-in-system-error-on-os-x-10-7-1</a></p>\n\n<p>but this didn't help.</p>\n\n<p>I also try to turn my computer off and on again. That didn't help either.\nI have no idea what i need to do.</p>\n\n<p><strong>origin:</strong></p>\n\n<p>I had a ruby script with rufus_scheduler gem and ibm_db which downloads data at specified time - worked ok until I got an interpreter error which claimed to be a bug (on the same code which was ok). (i have no record, rerun it.) So I was thinking about reinstalling ruby(2.3.0, 2.4.0) but it failed with error:</p>\n\n<pre><code>blah blah make sure brew update is working blah blah\n</code></pre>\n\n<p>so I ended up trying brew update and obviously, it didn't work.</p>\n\n<p>any help apprieciated. thank you very much.</p>\n\n<p><strong>specs:</strong> os x 10.13.3 - high sierra</p>\n\n<p><strong>ruby:</strong> tried on 2.3.0, 2.4.0</p>\n\n<p><strong>gemfile:</strong></p>\n\n<pre><code>source 'https://rubygems.org'\nruby \"2.4.0\"\ngem 'sinatra', '~&gt; 2.0.0'\ngem 'json'\ngem 'couchrest_model'\ngem 'sinatra-config-file'\ngem 'rufus-scheduler'\ngem 'ibm_db'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 5644, "user_id": 9908141, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/seDql.jpg?s=128&g=1", "display_name": "Imran Ahmad", "link": "https://stackoverflow.com/users/9908141/imran-ahmad"}, "edited": false, "score": 0, "creation_date": 1523613258, "post_id": 49134539, "comment_id": 86642565, "body": "I am also facing the same. Did find any workaround?"}], "answers": [{"tags": [], "owner": {"reputation": 5644, "user_id": 9908141, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/seDql.jpg?s=128&g=1", "display_name": "Imran Ahmad", "link": "https://stackoverflow.com/users/9908141/imran-ahmad"}, "is_accepted": false, "score": 1, "last_activity_date": 1523615779, "creation_date": 1523615779, "answer_id": 49815037, "question_id": 49134539, "link": "https://stackoverflow.com/questions/49134539/issue-to-install-charlock-holmes-bundle-icu-v-0-6-9-2/49815037#49815037", "title": "Issue to install charlock_holmes_bundle_icu -v &#39;0.6.9.2&#39;", "body": "<p>Uninstalling and reinstalling solved the issue for me.</p>\n\n<pre><code>gem uninstall charlock_holmes\ngem install charlock_holmes  --  --with-icu-dir=/usr/local/Custom/icu\n</code></pre>\n\n<p>You can use <code>sudo</code> for <code>su</code> permissions.</p>\n"}], "owner": {"reputation": 21, "user_id": 9149864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b145595c9f0e04dd4a8d6fab89112cde?s=128&d=identicon&r=PG&f=1", "display_name": "Ag18", "link": "https://stackoverflow.com/users/9149864/ag18"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1523615779, "creation_date": 1520350426, "last_edit_date": 1592644375, "question_id": 49134539, "link": "https://stackoverflow.com/questions/49134539/issue-to-install-charlock-holmes-bundle-icu-v-0-6-9-2", "title": "Issue to install charlock_holmes_bundle_icu -v &#39;0.6.9.2&#39;", "body": "<p>I try to install the gem <code>charlock_holmes_bundle_icu -v '0.6.9.2'</code>\nbut I receive this error:</p>\n<blockquote>\n<p>Building native extensions.  This could take a while...</p>\n<p>ERROR:  Error installing charlock_holmes_bundle_icu:</p>\n<p>ERROR: Failed to build gem native extension.</p>\n</blockquote>\n<pre><code>    current directory: /Users/agatheloubert/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/charlock_holmes_bundle_icu-0.6.9.2/ext/charlock_holmes\n/Users/agatheloubert/.rbenv/versions/2.4.1/bin/ruby -r ./siteconf20180306-35008-vbolm2.rb extconf.rb\n  -- tar zxvf icu4c-49_1_2-src.tgz\n  -- LDFLAGS= CXXFLAGS=&quot;-O2 -fPIC&quot; CFLAGS=&quot;-O2 -fPIC&quot; ./configure --prefix=/Users/agatheloubert/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/charlock_holmes_bundle_icu-0.6.9.2/ext/charlock_holmes/dst/ --disable-tests --disable-samples --disable-icuio --disable-extras --disable-layout --enable-static --disable-shared\n  -- make install\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n    --with-opt-dir\n    --without-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n    --ruby=/Users/agatheloubert/.rbenv/versions/2.4.1/bin/$(RUBY_BASE_NAME)\nextconf.rb:7:in `sys': make install failed, please report issue on http://github.com/brianmario/charlock_holmes (RuntimeError)\n    from extconf.rb:33:in `block (2 levels) in &lt;main&gt;'\n    from extconf.rb:31:in `chdir'\n    from extconf.rb:31:in `block in &lt;main&gt;'\n    from extconf.rb:27:in `chdir'\n    from extconf.rb:27:in `&lt;main&gt;'\n\nextconf failed, exit code 1\n\nGem files will remain installed in /Users/agatheloubert/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/charlock_holmes_bundle_icu-0.6.9.2 for inspection.\nResults logged to /Users/agatheloubert/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/extensions/x86_64-darwin-17/2.4.0-static/charlock_holmes_bundle_icu-0.6.9.2/gem_make.out\n</code></pre>\n<p>Do you know how to do it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 580, "user_id": 5041876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/942018cf0f020de80bef0fbdf4a882f8?s=128&d=identicon&r=PG&f=1", "display_name": "NiftyAsp", "link": "https://stackoverflow.com/users/5041876/niftyasp"}, "edited": false, "score": 0, "creation_date": 1520350212, "post_id": 49134072, "comment_id": 85273440, "body": "Can you put a debugger in your controller to see what the params are when coming in? From your second error it sounds like you&#39;re not actually getting the vin"}, {"owner": {"reputation": 193, "user_id": 5296937, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wS9au.jpg?s=128&g=1", "display_name": "Blake", "link": "https://stackoverflow.com/users/5296937/blake"}, "reply_to_user": {"reputation": 580, "user_id": 5041876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/942018cf0f020de80bef0fbdf4a882f8?s=128&d=identicon&r=PG&f=1", "display_name": "NiftyAsp", "link": "https://stackoverflow.com/users/5041876/niftyasp"}, "edited": false, "score": 0, "creation_date": 1520350831, "post_id": 49134072, "comment_id": 85273909, "body": "I can print out params[:vehicle][:vincheck] and verify that it does have the value I want before I try to call the model. Is that what you were asking?"}, {"owner": {"reputation": 118, "user_id": 3835528, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9575aba55a9a2b99116b50737f8f1dd7?s=128&d=identicon&r=PG&f=1", "display_name": "JohnsWort", "link": "https://stackoverflow.com/users/3835528/johnswort"}, "edited": false, "score": 0, "creation_date": 1520356837, "post_id": 49134072, "comment_id": 85278008, "body": "Where in the Vehicles Controller are the Vehicle.create! and .myvin! methods being called? Can you post the entire controller? Also, you should instantiate a new vehicle in the new action not in the create action which is a POST action by default. You do not need to create an initialize method in the model, Rails will do that for you."}, {"owner": {"reputation": 193, "user_id": 5296937, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wS9au.jpg?s=128&g=1", "display_name": "Blake", "link": "https://stackoverflow.com/users/5296937/blake"}, "edited": false, "score": 0, "creation_date": 1520359045, "post_id": 49134072, "comment_id": 85279322, "body": "All of my code was in the create method above since that is what is fired when I hit submit on the page. I did try a &quot;new&quot; but that didn&#39;t seem to work either. Thanks for the info on initialize. If I do the Vehicle.new(params[:vehicle][:vincheck]) from the controller... how do I then access that from the Model (since I am not creating initialize)?  Thanks!"}, {"owner": {"reputation": 118, "user_id": 3835528, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9575aba55a9a2b99116b50737f8f1dd7?s=128&d=identicon&r=PG&f=1", "display_name": "JohnsWort", "link": "https://stackoverflow.com/users/3835528/johnswort"}, "edited": false, "score": 0, "creation_date": 1520547661, "post_id": 49134072, "comment_id": 85372748, "body": "You have to tell the initializer what attribute you&#39;re passing in. If you just pass in a value it won&#39;t know which attribute it&#39;s for. If the attribute on that table is vincheck then it should look like this: @ vehicle = Vehicle.new(vincheck: params[:vehicle][:vincheck]) That will instantiate an object but it will not be saved until you call save on it in the create action. @ vehicle.save, then you can access that attribute from the object @ vehicle.vincheck"}], "owner": {"reputation": 193, "user_id": 5296937, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wS9au.jpg?s=128&g=1", "display_name": "Blake", "link": "https://stackoverflow.com/users/5296937/blake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1520349602, "creation_date": 1520349084, "last_edit_date": 1520349602, "question_id": 49134072, "link": "https://stackoverflow.com/questions/49134072/get-variable-from-controller-to-model", "title": "Get variable from Controller to Model", "body": "<p>I'm trying to get a variable from the controller over to the model. Its the value of a checkbox passed up from the View. I cant see it in the controller (0 or 1) and just need to get it to the model. I have seen tons of examples on here but none of them seem to work for me. Maybe its something about the Ruby environment we have setup? Its a Rails 5 environment.\nHere is what I have tried so far and the errors it gives in the logs:</p>\n\n<p>Controller:</p>\n\n<pre><code> @vin = Vehicle.create!\n @results = @vin.myvin!(params[:vehicle][:vincheck])\n</code></pre>\n\n<p>Model:</p>\n\n<pre><code> def myvin!(localvin)\n    logger.info \"MADE IT INTO VIN\"\n end\n</code></pre>\n\n<p>Error in development.log:</p>\n\n<pre><code> AbstractController::DoubleRenderError (Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action.\n</code></pre>\n\n<p>I'm not calling render or redirect!! Just trying to call the method in the model.</p>\n\n<p>I have also tried a variation like:</p>\n\n<p>Controller:</p>\n\n<pre><code> Vehicle.myvin(params[:vehicle][:vincheck])\n</code></pre>\n\n<p>Model:</p>\n\n<pre><code> def self.myvin(localvin)\n    logger.info \"MADE IT INTO VIN\"\n end\n</code></pre>\n\n<p>But regardless... I always get that render error in the logs!</p>\n\n<p>I have tried instantiating a new object:</p>\n\n<p>Controller:</p>\n\n<pre><code> Vehicle.new(params[:vehicle][:vincheck])\n</code></pre>\n\n<p>Model:</p>\n\n<pre><code> attr_reader :localvin\n\n def initialize(localvin)\n    logger.info \"MADE IT INTO VIN\"\n end\n</code></pre>\n\n<p>When I do that I get: </p>\n\n<pre><code> 500wrong number of arguments (given 0, expected 1)\n Short Stack\n\n app/models/vehicle.rb:25:in 'initialize'\n app/controllers/vehicles_controller.rb:84:in 'new'\n</code></pre>\n\n<p>Anyone have any thoughts on how I can get this data over? Maybe it has something to do with the Vehicle Model itself? In the controller it gets instantiated at different places. \nFor example:</p>\n\n<pre><code> def index\n    @vehicles = Vehicle.active\n end\n\n def create  \n     #this is where I am putting all my code\n     #not really sure how this is getting created since there was no\n     #initialize in the code before I added one\n     @vehicle = Vehicle.new(vehicle_params.merge(\n        created_by_id: current_user.id,\n        created_by_name: current_user.name,\n        deleted: false))\n\n  end\n</code></pre>\n\n<p>thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "metaprogramming"], "answers": [{"tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 3, "last_activity_date": 1520351560, "last_edit_date": 1520351560, "creation_date": 1520350003, "answer_id": 49134380, "question_id": 49133911, "link": "https://stackoverflow.com/questions/49133911/dynamically-defining-a-objectinitialize-for-a-ruby-class/49134380#49134380", "title": "Dynamically defining a Object#initialize for a Ruby class", "body": "<p>You could use this as body for <code>#initialize</code>:</p>\n\n<pre><code>#{args}.each { |arg| instance_variable_set(\"@\\#{arg}\", arg) }\n</code></pre>\n\n<hr>\n\n<p>However, I wouldn't string eval it. It usually leads to evil things. That said, here is an implementation which gives an incorrect <code>Foo.method(:perform).arity</code>, but still behaves as you would expect:</p>\n\n<pre><code>module Commandable\n  def inputs(*arguments)\n    define_method(:initialize) do |*parameters|\n      unless arguments.size == parameters.size\n        raise ArgumentError, \"wrong number of arguments (given #{parameters.size}, expected #{arguments.size})\"\n      end\n\n      arguments.zip(parameters).each do |argument, parameter|\n        instance_variable_set(\"@#{argument}\", parameter)\n      end\n    end\n\n    define_singleton_method(:perform) do |*parameters|\n      unless arguments.size == parameters.size\n        raise ArgumentError, \"wrong number of arguments (given #{parameters.size}, expected #{arguments.size})\"\n      end\n\n      new(*parameters).perform\n    end\n  end\nend\n\nclass Foo\n  extend Commandable\n  inputs :foo, :bar\n\n  def perform\n    [@foo, @bar]\n  end\nend\n\nFoo.perform 1, 2 # =&gt; [1, 2]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2031, "user_id": 2337830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a378c6d6daf4fb5ec84b9079db4d5d60?s=128&d=identicon&r=PG", "display_name": "tombeynon", "link": "https://stackoverflow.com/users/2337830/tombeynon"}, "is_accepted": true, "score": 0, "last_activity_date": 1520352585, "creation_date": 1520352585, "answer_id": 49135306, "question_id": 49133911, "link": "https://stackoverflow.com/questions/49133911/dynamically-defining-a-objectinitialize-for-a-ruby-class/49135306#49135306", "title": "Dynamically defining a Object#initialize for a Ruby class", "body": "<p>You were so close! <code>instance_variable_set</code> takes two arguments, first is the instance variable and second is the value you want to set it to. You also need to get the value of the variable, which you can do using <code>send</code>.</p>\n\n<pre><code>instance_variable_set(@#{arg.to_s}, send(arg.to_s))\n</code></pre>\n"}], "owner": {"reputation": 7468, "user_id": 303675, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/87dff789ba8bd4c43d82360c9a23b514?s=128&d=identicon&r=PG", "display_name": "TheDelChop", "link": "https://stackoverflow.com/users/303675/thedelchop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 591, "favorite_count": 0, "accepted_answer_id": 49135306, "answer_count": 2, "score": 2, "last_activity_date": 1520352585, "creation_date": 1520348599, "question_id": 49133911, "link": "https://stackoverflow.com/questions/49133911/dynamically-defining-a-objectinitialize-for-a-ruby-class", "title": "Dynamically defining a Object#initialize for a Ruby class", "body": "<p>In my code base, I have a bunch of objects that all adhere to the same interface, which consists of something like this:</p>\n\n<pre><code>class MyTestClass\n  def self.perform(foo, bar)\n    new(foo, bar).perform\n  end\n\n  def initialize(foo, bar)\n    @foo = foo\n    @bar = bar\n  end\n\n  def perform\n    # DO SOMETHING AND CHANGE THE WORLD\n  end\nend\n</code></pre>\n\n<p>The differentiating factor between the classes is the <em>arity</em> of the <code>self.perform</code> and <code>initialize</code>, plus the body of the <code>#perform</code> class.</p>\n\n<p>So, I'd like to be able to create an <code>ActiveSupport::Concern</code> (or just a regular <code>Module</code> if that would work better) which allowed me to do something like this:</p>\n\n<pre><code>class MyTestClass\n  inputs :foo, :bar\nend\n</code></pre>\n\n<p>which would then use some meta-programming to define <code>self.perform</code> and <code>initialize</code> of the above methods whose airty would depend on the airty specified by the <code>self.inputs</code> method.</p>\n\n<p>Here is what I have so far:</p>\n\n<pre><code>module Commandable\n  extend ActiveSupport::Concern\n\n  class_methods do\n    def inputs(*args)\n      @inputs = args\n      class_eval %(\n        class &lt;&lt; self\n          def perform(#{args.join(',')})\n            new(#{args.join(',')}).perform\n          end\n        end\n\n        def initialize(#{args.join(',')})\n          args.each do |arg|\n            instance_variable_set(@#{arg.to_s}) = arg.to_s\n          end\n        end\n      )\n\n      @inputs\n    end\n  end\nend\n</code></pre>\n\n<p>This seems to get the <em>arity</em> of the methods correct, but I'm having a tough time figuring out how to handle the body of the <code>#initialize</code> methods.  </p>\n\n<p>Can anybody help me figure out a way that I can successfully meta-program the body of <code>#initialize</code> so it behaves like the example I provided? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "has-many", "scaffold"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1520356317, "post_id": 49133736, "comment_id": 85277714, "body": "can you show the controller action where you add the player to the game."}, {"owner": {"reputation": 11, "user_id": 9368804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c418e1960fc0ad2cab2885e5a6b52da5?s=128&d=identicon&r=PG&f=1", "display_name": "BoYouLi", "link": "https://stackoverflow.com/users/9368804/boyouli"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1520360338, "post_id": 49133736, "comment_id": 85280038, "body": "Hi there, thanks for asking. I have just untouched scaffold controller for games."}, {"owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 0, "creation_date": 1520361658, "post_id": 49133736, "comment_id": 85280728, "body": "Can you show us what is in your parameters in the controller?"}, {"owner": {"reputation": 11, "user_id": 9368804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c418e1960fc0ad2cab2885e5a6b52da5?s=128&d=identicon&r=PG&f=1", "display_name": "BoYouLi", "link": "https://stackoverflow.com/users/9368804/boyouli"}, "edited": false, "score": 0, "creation_date": 1520367280, "post_id": 49133736, "comment_id": 85283633, "body": "Updated original post with Controller."}, {"owner": {"reputation": 2885, "user_id": 3372172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q3RaO.png?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3372172/pablo"}, "edited": false, "score": 0, "creation_date": 1520388389, "post_id": 49133736, "comment_id": 85291494, "body": "You should add the game and player models. Anyway, your game_params accepts only one player_id. You won&#39;t be able to set many players this way,"}, {"owner": {"reputation": 2885, "user_id": 3372172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q3RaO.png?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3372172/pablo"}, "edited": false, "score": 0, "creation_date": 1520388521, "post_id": 49133736, "comment_id": 85291527, "body": "Also. If it is a many to many relation, you need a join table"}, {"owner": {"reputation": 11, "user_id": 9368804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c418e1960fc0ad2cab2885e5a6b52da5?s=128&d=identicon&r=PG&f=1", "display_name": "BoYouLi", "link": "https://stackoverflow.com/users/9368804/boyouli"}, "edited": false, "score": 0, "creation_date": 1520414430, "post_id": 49133736, "comment_id": 85300803, "body": "Hola Pablo, thanks for advice. How can i change game_params to allow multiple player_id&#39;s. With join table-, i will defenitelly create one, but I am afraid it won&#39;t solve my issue with multiple players. Thanks"}], "owner": {"reputation": 11, "user_id": 9368804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c418e1960fc0ad2cab2885e5a6b52da5?s=128&d=identicon&r=PG&f=1", "display_name": "BoYouLi", "link": "https://stackoverflow.com/users/9368804/boyouli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1520401846, "creation_date": 1520348130, "last_edit_date": 1520401846, "question_id": 49133736, "link": "https://stackoverflow.com/questions/49133736/how-to-add-more-players-to-a-game-in-rails-model-relationship", "title": "How to add more players to a game in Rails / Model relationship", "body": "<p>I am being super new to Rails, so, please keep it in mind reading my post.</p>\n\n<p>I am trying to develop a very simple app where I can create a game and assign players to this game. </p>\n\n<p>So far I have a scaffolded game and player resources. I have set has_many :players and has_many: games relationship, for both, - game and player models. </p>\n\n<p>I added form.select in view form (new): </p>\n\n<pre><code>&lt;%= form.label :player_id %&gt;\n\n&lt;%= form.select :player_id, Player.all.collect{|x| [x.name]} %&gt;\n</code></pre>\n\n<p><strong>What I am trying to achieve is, - I want to be able to add multiple players to the single game. If I paste the same form.select field again it will overwrite first selection and eventually save only one (last) player.</strong></p>\n\n<p>I can, however, replicate this functonality in rails console. with: </p>\n\n<pre><code>g = Game.last\ng.players &lt;&lt; Player.find(1)\ng.players &lt;&lt; Player.find(2)\n</code></pre>\n\n<p>And it works. </p>\n\n<p>Can you advise me on how to do same at FronEnd level? I understand if my approach is completely wrong, then let me know what will be a better one.      </p>\n\n<p>Many thanks in advance. </p>\n\n<p>Update 1. </p>\n\n<p>I have very default scaffold controller: </p>\n\n<pre><code>class GamesController &lt; ApplicationController\n  before_action :set_game, only: [:show, :edit, :update, :destroy]\n\n\n  def index\n    @games = Game.all\n  end\n\n\n  def show\n  end\n\n  def new\n    @game = Game.new\n  end\n\n  def edit\n  end\n\n  def create\n    @game = Game.new(game_params)\n\n    respond_to do |format|\n      if @game.save\n        format.html { redirect_to @game, notice: 'Game was successfully created.' }\n        format.json { render :show, status: :created, location: @game }\n      else\n        format.html { render :new }\n        format.json { render json: @game.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  def update\n    respond_to do |format|\n      if @game.update(game_params)\n        format.html { redirect_to @game, notice: 'Game was successfully updated.' }\n        format.json { render :show, status: :ok, location: @game }\n      else\n        format.html { render :edit }\n        format.json { render json: @game.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  def destroy\n    @game.destroy\n    respond_to do |format|\n      format.html { redirect_to games_url, notice: 'Game was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    def set_game\n      @game = Game.find(params[:id])\n    end\n\n    def game_params\n      params.require(:game).permit(:name, :date, :player_id)\n    end\n</code></pre>\n\n<p>end</p>\n\n<p>and my db tables look like this:</p>\n\n<pre><code>class CreatePlayers &lt; ActiveRecord::Migration[5.1]\n  def change\n    create_table :players do |t|\n      t.string :name\n      t.string :role\n      t.integer :game_id\n\n      t.timestamps\n    end\n  end\nend\n\nclass CreateGames &lt; ActiveRecord::Migration[5.1]\n\n      def change\n        create_table :games do |t|\n          t.string :name\n          t.date :date\n          t.integer :player_id\n\n          t.timestamps\n        end\n      end\n    end \n</code></pre>\n\n<p>Do i need to have action in game controller for it ? </p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2031, "user_id": 2337830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a378c6d6daf4fb5ec84b9079db4d5d60?s=128&d=identicon&r=PG", "display_name": "tombeynon", "link": "https://stackoverflow.com/users/2337830/tombeynon"}, "edited": false, "score": 1, "creation_date": 1520347665, "post_id": 49133254, "comment_id": 85271719, "body": "I can&#39;t see any reason your original code wouldn&#39;t work. Are you aware that <code>uniq</code> returns a new array, and doesn&#39;t modify the original array? Use <code>uniq!</code> if you want to modify the original."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 1, "creation_date": 1520348022, "post_id": 49133254, "comment_id": 85272005, "body": "There&#39;s no <code>uniq</code> method for ActiveRecord::QueryMethods in Rails 5. <a href=\"https://github.com/rails/rails/commit/adfab2dcf4003ca564d78d4425566dd2d9cd8b4f\" rel=\"nofollow noreferrer\">Deprecated in favor of distinct</a>."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1520348537, "post_id": 49133254, "comment_id": 85272373, "body": "Given that <code>created_at</code> by default is a timestamp, are you sure this is really what you need? It is highly unlikely that you created two records in exactly the same millisecond."}, {"owner": {"reputation": 567, "user_id": 7679136, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-R1vVv35MaFc/AAAAAAAAAAI/AAAAAAAAACY/-2WDlsZ_H-M/photo.jpg?sz=128", "display_name": "Sox -", "link": "https://stackoverflow.com/users/7679136/sox"}, "edited": false, "score": 1, "creation_date": 1520350104, "post_id": 49133254, "comment_id": 85273376, "body": "Yes, that array is what i got when i submit my form.  And i need to make sure the number of people that answered my form is different of the number of response for that question..."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1520350499, "post_id": 49133254, "comment_id": 85273659, "body": "@Sox-, what does that have to do with uniqueness by <code>created_at</code>?"}, {"owner": {"reputation": 567, "user_id": 7679136, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-R1vVv35MaFc/AAAAAAAAAAI/AAAAAAAAACY/-2WDlsZ_H-M/photo.jpg?sz=128", "display_name": "Sox -", "link": "https://stackoverflow.com/users/7679136/sox"}, "edited": false, "score": 0, "creation_date": 1520350760, "post_id": 49133254, "comment_id": 85273854, "body": "Well, to differentiate the 2 things i talked about it I chose to do it using created_at because when that person will submit the form no-one else will"}], "answers": [{"comments": [{"owner": {"reputation": 4429, "user_id": 102133, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/561a3a55352fe6a5343e541a6894b541?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/102133/ben"}, "reply_to_user": {"reputation": 567, "user_id": 7679136, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-R1vVv35MaFc/AAAAAAAAAAI/AAAAAAAAACY/-2WDlsZ_H-M/photo.jpg?sz=128", "display_name": "Sox -", "link": "https://stackoverflow.com/users/7679136/sox"}, "edited": false, "score": 0, "creation_date": 1520378343, "post_id": 49133307, "comment_id": 85288661, "body": "It does for sure; i would not have answered otherwise"}], "tags": [], "owner": {"reputation": 4429, "user_id": 102133, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/561a3a55352fe6a5343e541a6894b541?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/102133/ben"}, "is_accepted": false, "score": 0, "last_activity_date": 1520346899, "creation_date": 1520346899, "answer_id": 49133307, "question_id": 49133254, "link": "https://stackoverflow.com/questions/49133254/get-only-a-unique-value-on-dates-of-an-array/49133307#49133307", "title": "Get only a unique value on dates of an array", "body": "<p>Probably slower; but should work :</p>\n\n<p><code>MyTab.uniq { |x| Time.parse(x.created_at).to_i }</code></p>\n"}, {"comments": [{"owner": {"reputation": 567, "user_id": 7679136, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-R1vVv35MaFc/AAAAAAAAAAI/AAAAAAAAACY/-2WDlsZ_H-M/photo.jpg?sz=128", "display_name": "Sox -", "link": "https://stackoverflow.com/users/7679136/sox"}, "edited": false, "score": 0, "creation_date": 1520378131, "post_id": 49133696, "comment_id": 85288570, "body": "I&#39;ll give a try if I can&#39;t do it in any other way."}], "tags": [], "owner": {"reputation": 85, "user_id": 848206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/738000557501dfa480e678292f7bac9c?s=128&d=identicon&r=PG", "display_name": "jcamejo", "link": "https://stackoverflow.com/users/848206/jcamejo"}, "is_accepted": false, "score": 0, "last_activity_date": 1520348015, "creation_date": 1520348015, "answer_id": 49133696, "question_id": 49133254, "link": "https://stackoverflow.com/questions/49133254/get-only-a-unique-value-on-dates-of-an-array/49133696#49133696", "title": "Get only a unique value on dates of an array", "body": "<p>If you can rewrite your query directly from the model i would suggest to do the logic directly in it.</p>\n\n<pre><code>Poll.select(:created_at).where(\"#{query_conditions}\").distinct\n</code></pre>\n\n<p>If not I suggest @ben's answer.</p>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 1898553, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D36w8.jpg?s=128&g=1", "display_name": "user1898553", "link": "https://stackoverflow.com/users/1898553/user1898553"}, "is_accepted": false, "score": 0, "last_activity_date": 1520382777, "creation_date": 1520382777, "answer_id": 49142252, "question_id": 49133254, "link": "https://stackoverflow.com/questions/49133254/get-only-a-unique-value-on-dates-of-an-array/49142252#49142252", "title": "Get only a unique value on dates of an array", "body": "<p>find_by_sql [\"SELECT DISTINCT created_at,  FROM your_table_name \"]\nor \nMyTab.flatten!\nNote- this will orerwrite MyTab array with unique values</p>\n"}, {"tags": [], "owner": {"reputation": 567, "user_id": 7679136, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-R1vVv35MaFc/AAAAAAAAAAI/AAAAAAAAACY/-2WDlsZ_H-M/photo.jpg?sz=128", "display_name": "Sox -", "link": "https://stackoverflow.com/users/7679136/sox"}, "is_accepted": true, "score": 2, "last_activity_date": 1535554513, "creation_date": 1535554513, "answer_id": 52080521, "question_id": 49133254, "link": "https://stackoverflow.com/questions/49133254/get-only-a-unique-value-on-dates-of-an-array/52080521#52080521", "title": "Get only a unique value on dates of an array", "body": "<p>Edit : Ok i think i get why it 's not working if i try with</p>\n\n<p>a = [[\"first\"], [\"second\"], [\"first\"]].uniq\nIt is working, so i ll change to have my array this way.</p>\n"}], "owner": {"reputation": 567, "user_id": 7679136, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-R1vVv35MaFc/AAAAAAAAAAI/AAAAAAAAACY/-2WDlsZ_H-M/photo.jpg?sz=128", "display_name": "Sox -", "link": "https://stackoverflow.com/users/7679136/sox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 266, "favorite_count": 0, "accepted_answer_id": 52080521, "answer_count": 4, "score": 4, "last_activity_date": 1535554536, "creation_date": 1520346763, "last_edit_date": 1535554536, "question_id": 49133254, "link": "https://stackoverflow.com/questions/49133254/get-only-a-unique-value-on-dates-of-an-array", "title": "Get only a unique value on dates of an array", "body": "<p>I have trouble for what I thought will be a simple task...\nI need to remove the duplicate value of my array for example there are 3 times 2018-02-20 13:48:44 and I only want 1 of those value.</p>\n\n<pre><code>MyTab = [#&lt;Poll id: nil, created_at: \"2018-02-20 13:47:15\"&gt;, #&lt;Poll id: nil, created_at: \"2018-02-20 13:48:44\"&gt;, #&lt;Poll id: nil, created_at: \"2018-02-20 13:48:44\"&gt;, #&lt;Poll id: nil, created_at: \"2018-02-20 13:48:44\"&gt;, #&lt;Poll id: nil, created_at: \"2018-02-20 14:25:14\"&gt;, #&lt;Poll id: nil, created_at: \"2018-02-20 14:25:14\"&gt;, #&lt;Poll id: nil, created_at: \"2018-02-20 14:25:14\"&gt;, #&lt;Poll id: nil, created_at: \"2018-02-20 14:32:38\"&gt;, #&lt;Poll id: nil, created_at: \"2018-02-20 14:36:42\"&gt;, #&lt;Poll id: nil, created_at: \"2018-02-20 14:36:42\"&gt;, #&lt;Poll id: nil, created_at: \"2018-02-20 14:40:16\"&gt;, #&lt;Poll id: nil, created_at: \"2018-02-20 15:30:15\"&gt;, #&lt;Poll id: nil, created_at: \"2018-02-20 15:30:15\"&gt;, #&lt;Poll id: nil, created_at: \"2018-03-06 10:24:25\"&gt;, #&lt;Poll id: nil, created_at: \"2018-03-06 10:24:25\"&gt;] \n</code></pre>\n\n<p>I already tried this but it does not work : </p>\n\n<pre><code>MyTab.uniq{|x| x.created_at}\n</code></pre>\n\n<p>Thanks for answers :).</p>\n\n<p>Z.</p>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1849, "user_id": 3437721, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3e6fac72d7b35f2177b6f56eab43db28?s=128&d=identicon&r=PG&f=1", "display_name": "user3437721", "link": "https://stackoverflow.com/users/3437721/user3437721"}, "edited": false, "score": 0, "creation_date": 1520344977, "post_id": 49132596, "comment_id": 85269950, "body": "Thanks for this. I may have been overthinking it"}, {"owner": {"reputation": 2031, "user_id": 2337830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a378c6d6daf4fb5ec84b9079db4d5d60?s=128&d=identicon&r=PG", "display_name": "tombeynon", "link": "https://stackoverflow.com/users/2337830/tombeynon"}, "reply_to_user": {"reputation": 1849, "user_id": 3437721, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3e6fac72d7b35f2177b6f56eab43db28?s=128&d=identicon&r=PG&f=1", "display_name": "user3437721", "link": "https://stackoverflow.com/users/3437721/user3437721"}, "edited": false, "score": 0, "creation_date": 1520345181, "post_id": 49132596, "comment_id": 85270090, "body": "We&#39;ve all been there!"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1520350898, "post_id": 49132596, "comment_id": 85273965, "body": "You can use <code>arr.unshift(element)</code> instead of <code>arr.insert(0, element)</code>"}, {"owner": {"reputation": 2031, "user_id": 2337830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a378c6d6daf4fb5ec84b9079db4d5d60?s=128&d=identicon&r=PG", "display_name": "tombeynon", "link": "https://stackoverflow.com/users/2337830/tombeynon"}, "edited": false, "score": 1, "creation_date": 1520352951, "post_id": 49132596, "comment_id": 85275453, "body": "You can and that would be better if moving it to the start of the array is required. The OP asked about moving it in general though so I thought I&#39;d show that as it was more flexible."}], "tags": [], "owner": {"reputation": 2031, "user_id": 2337830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a378c6d6daf4fb5ec84b9079db4d5d60?s=128&d=identicon&r=PG", "display_name": "tombeynon", "link": "https://stackoverflow.com/users/2337830/tombeynon"}, "is_accepted": true, "score": 2, "last_activity_date": 1520344739, "creation_date": 1520344739, "answer_id": 49132596, "question_id": 49132424, "link": "https://stackoverflow.com/questions/49132424/ruby-multi-dimensional-array-move-element/49132596#49132596", "title": "ruby multi-dimensional array, move element", "body": "<p>You certainly can. Easiest way is to find the match first, and if it exists move it to the desired position.</p>\n\n<pre><code>index = arr.index{|i| i[2] == '4' }\narr.insert(0, arr.delete_at(index)) if index\n</code></pre>\n\n<p>Remember the indices in an array are 0 based, so you're looking at index 2 if you want to check the third element in the array.</p>\n"}, {"comments": [{"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1520346008, "post_id": 49132744, "comment_id": 85270595, "body": "The second way has the indexes still in the result. And how about <code>sort_by</code>? That even allows adding indexes as an afterthought that doesn&#39;t appear in the result: <code>arr.sort_by.with_index { |e, i| [criteria[e] ? 0 : 1, i] }</code>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1520346096, "post_id": 49132744, "comment_id": 85270655, "body": "@StefanPochmann indeed, thanks, updated, the original version was indeed a complete crap."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1520346073, "last_edit_date": 1520346073, "creation_date": 1520345189, "answer_id": 49132744, "question_id": 49132424, "link": "https://stackoverflow.com/questions/49132424/ruby-multi-dimensional-array-move-element/49132744#49132744", "title": "ruby multi-dimensional array, move element", "body": "<p>Most generic way would be probably using <a href=\"http://ruby-doc.org/core/Array.html#method-i-sort\" rel=\"nofollow noreferrer\"><code>Array#sort</code></a>:</p>\n\n<pre><code>\u25b6 criteria = -&gt;(arr) { arr[2] == \"4\" }\n#\u21d2 #&lt;Proc:0x005570424c2568@(pry):8 (lambda)&gt;\n\u25b6 arr.sort do |e1, e2|\n\u25b7   criteria.(e1) ? -1 : criteria.(e2) ? 1 : e1 &lt;=&gt; e2\n\u25b7 end\n#\u21d2 [[\"Foo4\", \"Bar4\", \"4\", \"Z\"],\n#   [\"Foo1\", \"Bar1\", \"1\", \"W\"],\n#   [\"Foo2\", \"Bar2\", \"2\", \"X\"],\n#   [\"Foo3\", \"Bar3\", \"3\", \"Y\"],\n#   [\"Foo5\", \"Bar5\", \"5\", \"A\"]]\n</code></pre>\n\n<p>That way you might update <code>criteria</code> as you want and everything will still work.</p>\n\n<hr>\n\n<p>Or, more explicitly preserving the original order (credits to @StefanPochmann):</p>\n\n<pre><code>arr.sort_by.with_index { |e, i| [criteria[e] ? 0 : 1, i] }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "is_accepted": false, "score": 0, "last_activity_date": 1520346338, "creation_date": 1520346338, "answer_id": 49133109, "question_id": 49132424, "link": "https://stackoverflow.com/questions/49132424/ruby-multi-dimensional-array-move-element/49133109#49133109", "title": "ruby multi-dimensional array, move element", "body": "<p>Just another way, also works if there's more than one inner array to be moved:</p>\n\n<pre><code>arr.partition { |e| e[2] == '4' }.sum([])\n</code></pre>\n"}], "owner": {"reputation": 1849, "user_id": 3437721, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3e6fac72d7b35f2177b6f56eab43db28?s=128&d=identicon&r=PG&f=1", "display_name": "user3437721", "link": "https://stackoverflow.com/users/3437721/user3437721"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 49132596, "answer_count": 3, "score": 1, "last_activity_date": 1520346338, "creation_date": 1520344256, "question_id": 49132424, "link": "https://stackoverflow.com/questions/49132424/ruby-multi-dimensional-array-move-element", "title": "ruby multi-dimensional array, move element", "body": "<p>Assuming I have an array or arrays:</p>\n\n<pre><code>arr = [[\"Foo1\", \"Bar1\", \"1\", \"W\"],\n       [\"Foo2\", \"Bar2\", \"2\", \"X\"],\n       [\"Foo3\", \"Bar3\", \"3\", \"Y\"],\n       [\"Foo4\", \"Bar4\", \"4\", \"Z\"],\n       [\"Foo5\", \"Bar5\", \"5\", \"A\"]]\n</code></pre>\n\n<p>Is there a way I can move an individual array in the 2d array based on some criteria?</p>\n\n<p>For example, if element 3 of the inner array is \"4\", then move it to the top?</p>\n\n<p>So the above <code>arr</code> would then look like:</p>\n\n<pre><code>  [[\"Foo4\", \"Bar4\", \"4\", \"Z\"],\n   [\"Foo1\", \"Bar1\", \"1\", \"W\"],\n   [\"Foo2\", \"Bar2\", \"2\", \"X\"],\n   [\"Foo3\", \"Bar3\", \"3\", \"Y\"],\n   [\"Foo5\", \"Bar5\", \"5\", \"A\"]]\n</code></pre>\n\n<p>I have tried things like to try and select the inner array:</p>\n\n<pre><code>arr.map {|row| row.select {|i| i[3] == \"4\"} }\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1520341556, "post_id": 49131539, "comment_id": 85267701, "body": "<code>raw_response</code> in never defined in the code provided."}, {"owner": {"reputation": 7004, "user_id": 1103606, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d93cc650b93939ea91066fcb5aefae0?s=128&d=identicon&r=PG", "display_name": "Peter Penzov", "link": "https://stackoverflow.com/users/1103606/peter-penzov"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1520341676, "post_id": 49131539, "comment_id": 85267778, "body": "@mudasobwa it&#39;s defined as attr_reader :raw_response"}], "answers": [{"tags": [], "owner": {"reputation": 2031, "user_id": 2337830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a378c6d6daf4fb5ec84b9079db4d5d60?s=128&d=identicon&r=PG", "display_name": "tombeynon", "link": "https://stackoverflow.com/users/2337830/tombeynon"}, "is_accepted": false, "score": 0, "last_activity_date": 1520344394, "creation_date": 1520344394, "answer_id": 49132475, "question_id": 49131539, "link": "https://stackoverflow.com/questions/49131539/undefined-method-strip-for-httpmessage/49132475#49132475", "title": "undefined method strip for HTTP::Message", "body": "<p>It looks like Nori is expecting a string not an HTTP::Message object. Should you pass it <code>raw_response.body</code> instead of the <code>raw_response</code> object directly?</p>\n\n<pre><code>Nori.new(parser: :nokogiri, advanced_typecasting: false, :convert_tags_to =&gt; lambda { |tag| tag.snakecase.to_sym }).parse(raw_response.body)\n</code></pre>\n"}], "owner": {"reputation": 7004, "user_id": 1103606, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d93cc650b93939ea91066fcb5aefae0?s=128&d=identicon&r=PG", "display_name": "Peter Penzov", "link": "https://stackoverflow.com/users/1103606/peter-penzov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1520344394, "creation_date": 1520341316, "question_id": 49131539, "link": "https://stackoverflow.com/questions/49131539/undefined-method-strip-for-httpmessage", "title": "undefined method strip for HTTP::Message", "body": "<p>I want to rewrite this code using http client:</p>\n\n<pre><code>http = Net::HTTP.new(url.host, url.port)\n    http.use_ssl = true\n    http.verify_mode = OpenSSL::SSL::VERIFY_NONE\n\n    request = Net::HTTP::Post.new(url)\n    request.basic_auth(user, pass)\n    request['content-type'] = 'application/xml'\n    request['cache-control'] = 'no-cache'\n    request.body = request_body\n\n    response = http.request(request).body\n    response = Response.new(response)\n    check_for_approved_response(response)\n</code></pre>\n\n<p>Into this code:</p>\n\n<pre><code>request = HTTPClient.new()\nrequest.set_auth(url, user, pass)\n\nresponse = request.post(url, request_body)\nresponse = Response.new(response)\ncheck_for_approved_response(response)\n</code></pre>\n\n<p>But I get this result when I run the code:</p>\n\n<pre><code>undefined method `strip' for #&lt;HTTP::Message:0x007fdbbf3cfdc8&gt;\n/Users/user/.rvm/gems/ruby-2.2.2/gems/nori-2.6.0/lib/nori.rb:43:in `parse'\n</code></pre>\n\n<p>at this line:</p>\n\n<pre><code>Nori.new(parser: :nokogiri, advanced_typecasting: false, :convert_tags_to =&gt; lambda { |tag| tag.snakecase.to_sym }).parse(raw_response)\n</code></pre>\n\n<p>I tried to require:</p>\n\n<pre><code>require 'httpclient'\nrequire 'active_support/all'\nrequire 'active_support/core_ext'\nrequire 'active_support/core_ext/object'\n</code></pre>\n\n<p>But I still get this error. Do you know how I can fix this issue?</p>\n"}, {"tags": ["ruby", "google-chrome", "selenium-webdriver", "google-chrome-extension", "watir"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 6676562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-pCI9lQj1zX0/AAAAAAAAAAI/AAAAAAAAAMU/ETqkAO90k64/photo.jpg?sz=128", "display_name": "Apzal Bahin", "link": "https://stackoverflow.com/users/6676562/apzal-bahin"}, "edited": false, "score": 0, "creation_date": 1520487318, "post_id": 49153913, "comment_id": 85337496, "body": "I used the code you provided but I am getting the below pop up everytime the scrip open the browser.How I can avoid showing this pop up.&quot;Failed to load extension from :C:\\users\\&lt;username&gt;\\AppData\\Local\\Temp\\scoped_dir14148_503\\&zwnj;&#8203;internal.Loading of unpacked extensions is disabled by the administrator&quot;."}, {"owner": {"reputation": 61, "user_id": 6676562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-pCI9lQj1zX0/AAAAAAAAAAI/AAAAAAAAAMU/ETqkAO90k64/photo.jpg?sz=128", "display_name": "Apzal Bahin", "link": "https://stackoverflow.com/users/6676562/apzal-bahin"}, "edited": false, "score": 0, "creation_date": 1520496795, "post_id": 49153913, "comment_id": 85341619, "body": "settings = {}                                                                                                          args = [&#39;--no-sandbox&#39;, &#39;--disable-notifications&#39;, &#39;--disable-infobars&#39;,&#39;--disable-extensions&#39;,&#39;--disable-popup&zwnj;&#8203;-blocking&#39;]                                                                                     settings[:options] = {args: args}                                                                                 Watir::Browser.new :chrome, settings"}, {"owner": {"reputation": 61, "user_id": 6676562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-pCI9lQj1zX0/AAAAAAAAAAI/AAAAAAAAAMU/ETqkAO90k64/photo.jpg?sz=128", "display_name": "Apzal Bahin", "link": "https://stackoverflow.com/users/6676562/apzal-bahin"}, "edited": false, "score": 0, "creation_date": 1520531034, "post_id": 49153913, "comment_id": 85364018, "body": "is there any solution?"}, {"owner": {"reputation": 1106, "user_id": 782713, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/20b309cdcea1aa280b617c318af99274?s=128&d=identicon&r=PG", "display_name": "Gijs Paulides", "link": "https://stackoverflow.com/users/782713/gijs-paulides"}, "reply_to_user": {"reputation": 61, "user_id": 6676562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-pCI9lQj1zX0/AAAAAAAAAAI/AAAAAAAAAMU/ETqkAO90k64/photo.jpg?sz=128", "display_name": "Apzal Bahin", "link": "https://stackoverflow.com/users/6676562/apzal-bahin"}, "edited": false, "score": 0, "creation_date": 1520548746, "post_id": 49153913, "comment_id": 85373218, "body": "This article goes into that problem: <a href=\"https://stackoverflow.com/questions/43571119/loading-of-unpacked-extensions-is-disabled-by-the-administrator?rq=1\" title=\"loading of unpacked extensions is disabled by the administrator\">stackoverflow.com/questions/43571119/&hellip;</a> To me it seems that your laptop is moderated by somenoe else, causing you not to be allowed to start the browser with these capabilities."}, {"owner": {"reputation": 61, "user_id": 6676562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-pCI9lQj1zX0/AAAAAAAAAAI/AAAAAAAAAMU/ETqkAO90k64/photo.jpg?sz=128", "display_name": "Apzal Bahin", "link": "https://stackoverflow.com/users/6676562/apzal-bahin"}, "edited": false, "score": 0, "creation_date": 1520589816, "post_id": 49153913, "comment_id": 85387273, "body": "Thank You.I have tried all possibility.I can only ask the IT team to lookinto the installation of chrome."}], "tags": [], "owner": {"reputation": 1106, "user_id": 782713, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/20b309cdcea1aa280b617c318af99274?s=128&d=identicon&r=PG", "display_name": "Gijs Paulides", "link": "https://stackoverflow.com/users/782713/gijs-paulides"}, "is_accepted": false, "score": 1, "last_activity_date": 1520432220, "last_edit_date": 1520432220, "creation_date": 1520431728, "answer_id": 49153913, "question_id": 49131024, "link": "https://stackoverflow.com/questions/49131024/what-is-replica-of-this-java-code-setexperimentaloption-in-ruby-to-open-chrome/49153913#49153913", "title": "What is replica of this java code &quot;setExperimentalOption&quot; in ruby to open chrome browser with &#39;useAutomationExtension&#39; as false", "body": "<p>You should be able to pass them along with <code>args:</code> See the update of <code>Watir 6.6</code>: <a href=\"http://watir.com/watir-6-6/\" rel=\"nofollow noreferrer\">http://watir.com/watir-6-6/</a>\nIn short:</p>\n\n<pre><code>Watir::Browser.new :chrome, options: {args: %w[--disable-popup-blocking  --disable-extensions --disable-infobars]}\n</code></pre>\n\n<p>This is how I like to start the browser keeping all options variable.</p>\n\n<pre><code>browser_name = ENV['BROWSER'] || 'chrome'\nsettings = {}\nif ENV['DEVICE'] == 'remote'\n  settings[:url] = 'http://selenium__standalone-chrome:4444/wd/hub/'\nend\n\nif browser_name == 'chrome'\n  args = ['--ignore-certificate-errors', '--disable-popup-blocking', '--disable-translate', '--use-fake-device-for-media-stream', '--use-fake-ui-for-media-stream']\n  settings[:options] = {args: args}\nend\n\nWatir::Browser.new browser_name.to_sym, settings\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 6676562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-pCI9lQj1zX0/AAAAAAAAAAI/AAAAAAAAAMU/ETqkAO90k64/photo.jpg?sz=128", "display_name": "Apzal Bahin", "link": "https://stackoverflow.com/users/6676562/apzal-bahin"}, "is_accepted": false, "score": 0, "last_activity_date": 1520596930, "creation_date": 1520596930, "answer_id": 49193385, "question_id": 49131024, "link": "https://stackoverflow.com/questions/49131024/what-is-replica-of-this-java-code-setexperimentaloption-in-ruby-to-open-chrome/49193385#49193385", "title": "What is replica of this java code &quot;setExperimentalOption&quot; in ruby to open chrome browser with &#39;useAutomationExtension&#39; as false", "body": "<p>I found the root cause which is not allowing the script to run.</p>\n\n<p>I navigated to below path in \"regedit\" and deleted the \"ExtensionInstallBlacklist\" folder but this is a temporary solution the registry will be auto created in some time.</p>\n\n<p>Path:\n\u201cHKEY_CURRENT_USER\\Software\\Policies\\Google\\Chrome\\ExtensionInstallBlacklist\u201d</p>\n"}, {"tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": true, "score": 1, "last_activity_date": 1520607305, "creation_date": 1520607305, "answer_id": 49196385, "question_id": 49131024, "link": "https://stackoverflow.com/questions/49131024/what-is-replica-of-this-java-code-setexperimentaloption-in-ruby-to-open-chrome/49196385#49196385", "title": "What is replica of this java code &quot;setExperimentalOption&quot; in ruby to open chrome browser with &#39;useAutomationExtension&#39; as false", "body": "<p>Maybe try passing it as a raw option:</p>\n\n<pre><code>b = Watir::Browser.new :chrome, options: {options: {'useAutomationExtension' =&gt; false}}\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 6676562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-pCI9lQj1zX0/AAAAAAAAAAI/AAAAAAAAAMU/ETqkAO90k64/photo.jpg?sz=128", "display_name": "Apzal Bahin", "link": "https://stackoverflow.com/users/6676562/apzal-bahin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 704, "favorite_count": 0, "accepted_answer_id": 49196385, "answer_count": 3, "score": 1, "last_activity_date": 1520607305, "creation_date": 1520339808, "last_edit_date": 1520401818, "question_id": 49131024, "link": "https://stackoverflow.com/questions/49131024/what-is-replica-of-this-java-code-setexperimentaloption-in-ruby-to-open-chrome", "title": "What is replica of this java code &quot;setExperimentalOption&quot; in ruby to open chrome browser with &#39;useAutomationExtension&#39; as false", "body": "<p>The below java code works fine in my machine to disable automation extension.\nHow I can write a replica of this code in ruby</p>\n\n<p>Java </p>\n\n<pre><code>   ChromeOptions options = new ChromeOptions();\n   options.setExperimentalOption(\"useAutomationExtension\", false);\n</code></pre>\n\n<p>In Watir Ruby\nthis code doesn't work </p>\n\n<pre><code>Watir::Browser.new(:chrome, :switches =&gt; %w[--disable-popup-blocking  --disable-extensions --disable-infobars] )\n</code></pre>\n"}, {"tags": ["ruby", "factory-bot"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 9193062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5ed53c9d9c738d605cde256fcf85e8?s=128&d=identicon&r=PG&f=1", "display_name": "Elena", "link": "https://stackoverflow.com/users/9193062/elena"}, "edited": false, "score": 0, "creation_date": 1520341193, "post_id": 49131021, "comment_id": 85267467, "body": "Thanks for your answer and for editing my question, sorry so much, I am pretty lost still...When I remove the factory &quot;@user = FactoryBot.create(:user)&quot; from the users_controller_spec.rb and use the fixture &quot;let (:user) { User.create!(email:&quot;achochaocierva@gmail.com&quot;, password: &quot;Ratadecierva2&quot;)}&quot; I get no failure neither errors. Any clue?Thanks a lot for your help"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 23, "user_id": 9193062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5ed53c9d9c738d605cde256fcf85e8?s=128&d=identicon&r=PG&f=1", "display_name": "Elena", "link": "https://stackoverflow.com/users/9193062/elena"}, "edited": false, "score": 0, "creation_date": 1520342031, "post_id": 49131021, "comment_id": 85268020, "body": "@Elena: this user has different email and, apparently, doesn&#39;t cause uniqueness constraint violation."}, {"owner": {"reputation": 23, "user_id": 9193062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5ed53c9d9c738d605cde256fcf85e8?s=128&d=identicon&r=PG&f=1", "display_name": "Elena", "link": "https://stackoverflow.com/users/9193062/elena"}, "edited": false, "score": 0, "creation_date": 1520342429, "post_id": 49131021, "comment_id": 85268275, "body": "But I already added the sequence in user_factory.rb and keep on having failures when I use the factory &quot;@user = FactoryBot.create(:user)&quot;"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 23, "user_id": 9193062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5ed53c9d9c738d605cde256fcf85e8?s=128&d=identicon&r=PG&f=1", "display_name": "Elena", "link": "https://stackoverflow.com/users/9193062/elena"}, "edited": false, "score": 0, "creation_date": 1520342491, "post_id": 49131021, "comment_id": 85268310, "body": "@Elena: I don&#39;t think so. Sequences just work. Have you deleted the hardcoded email in the factory? Have you restarted spring?"}, {"owner": {"reputation": 23, "user_id": 9193062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5ed53c9d9c738d605cde256fcf85e8?s=128&d=identicon&r=PG&f=1", "display_name": "Elena", "link": "https://stackoverflow.com/users/9193062/elena"}, "edited": false, "score": 0, "creation_date": 1520343097, "post_id": 49131021, "comment_id": 85268742, "body": "I have removed the email, but I don&#39;t know what spring means, sorry. Anyway I think that maybe is anything else involved in the errors, anytime I use the factory and not the fixture there are  no examples tracked"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 23, "user_id": 9193062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5ed53c9d9c738d605cde256fcf85e8?s=128&d=identicon&r=PG&f=1", "display_name": "Elena", "link": "https://stackoverflow.com/users/9193062/elena"}, "edited": false, "score": 0, "creation_date": 1520343201, "post_id": 49131021, "comment_id": 85268803, "body": "@Elena: JFYI, use the factory just as you use <code>User.create</code>, inside of <code>let</code>. You really are not supposed to have them in-between examples like that."}, {"owner": {"reputation": 23, "user_id": 9193062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5ed53c9d9c738d605cde256fcf85e8?s=128&d=identicon&r=PG&f=1", "display_name": "Elena", "link": "https://stackoverflow.com/users/9193062/elena"}, "edited": false, "score": 0, "creation_date": 1520344006, "post_id": 49131021, "comment_id": 85269320, "body": "Not working either, keep on identifying same errors related to the fixture. When the factory is used it does not identify the specs created for the let (:user)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 23, "user_id": 9193062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5ed53c9d9c738d605cde256fcf85e8?s=128&d=identicon&r=PG&f=1", "display_name": "Elena", "link": "https://stackoverflow.com/users/9193062/elena"}, "edited": false, "score": 0, "creation_date": 1520344088, "post_id": 49131021, "comment_id": 85269382, "body": "@Elena: I&#39;m not sure what that means, but I guess you&#39;re not having duplicate emails error anymore? Which is good news."}, {"owner": {"reputation": 23, "user_id": 9193062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5ed53c9d9c738d605cde256fcf85e8?s=128&d=identicon&r=PG&f=1", "display_name": "Elena", "link": "https://stackoverflow.com/users/9193062/elena"}, "edited": false, "score": 0, "creation_date": 1520344286, "post_id": 49131021, "comment_id": 85269507, "body": "Still there, when I use the factory instead of the fixture same error occurs and no examples are found when I run rspec"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 23, "user_id": 9193062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5ed53c9d9c738d605cde256fcf85e8?s=128&d=identicon&r=PG&f=1", "display_name": "Elena", "link": "https://stackoverflow.com/users/9193062/elena"}, "edited": false, "score": 0, "creation_date": 1520344687, "post_id": 49131021, "comment_id": 85269773, "body": "@Elena: hard to say. It should work. If you make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, I&#39;ll take a look."}, {"owner": {"reputation": 23, "user_id": 9193062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5ed53c9d9c738d605cde256fcf85e8?s=128&d=identicon&r=PG&f=1", "display_name": "Elena", "link": "https://stackoverflow.com/users/9193062/elena"}, "edited": false, "score": 0, "creation_date": 1520345080, "post_id": 49131021, "comment_id": 85270031, "body": "I really appreciate your help and will but for sure I will write a lot of info and you guys will kick me out of here. It is basically what I posted in first place. When I run rspec commenting out the fixture I get the error, when I comment out the factory and run the rspec using the fixture everything goes well, 6 exaples detected and 0 failures. Even uising the sequence."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 23, "user_id": 9193062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5ed53c9d9c738d605cde256fcf85e8?s=128&d=identicon&r=PG&f=1", "display_name": "Elena", "link": "https://stackoverflow.com/users/9193062/elena"}, "edited": false, "score": 0, "creation_date": 1520346088, "post_id": 49131021, "comment_id": 85270651, "body": "@Elena: I can&#39;t run that :)"}, {"owner": {"reputation": 23, "user_id": 9193062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5ed53c9d9c738d605cde256fcf85e8?s=128&d=identicon&r=PG&f=1", "display_name": "Elena", "link": "https://stackoverflow.com/users/9193062/elena"}, "edited": false, "score": 0, "creation_date": 1520348598, "post_id": 49131021, "comment_id": 85272410, "body": "Thank you though :)"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 1, "last_activity_date": 1520342766, "last_edit_date": 1520342766, "creation_date": 1520339805, "answer_id": 49131021, "question_id": 49130999, "link": "https://stackoverflow.com/questions/49130999/an-error-occurred-while-loading-spec-controllers-users-controller-spec-rb/49131021#49131021", "title": "An error occurred while loading ./spec/controllers/users_controller_spec.rb", "body": "<blockquote>\n  <p>What would be the errors meaning? What am I doing wrong?</p>\n</blockquote>\n\n<p>Your factory tries to create a user with the same email as one of the existing users (no wonder, seeing that the email is hardcoded in the factory). Your DB's uniqueness constraint complains.</p>\n\n<p>You should use sequences for user emails</p>\n\n<pre><code># email \"peter@example.com\"\nsequence(:email) { |n|   \"factory_#{n}@example.com\" }\n</code></pre>\n\n<p>First user from this factory will have email \"factory_1@example.com\", second - \"factory_2@example.com\", and so on.</p>\n"}], "owner": {"reputation": 23, "user_id": 9193062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5ed53c9d9c738d605cde256fcf85e8?s=128&d=identicon&r=PG&f=1", "display_name": "Elena", "link": "https://stackoverflow.com/users/9193062/elena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3067, "favorite_count": 0, "accepted_answer_id": 49131021, "answer_count": 1, "score": 2, "last_activity_date": 1520342766, "creation_date": 1520339713, "last_edit_date": 1520339913, "question_id": 49130999, "link": "https://stackoverflow.com/questions/49130999/an-error-occurred-while-loading-spec-controllers-users-controller-spec-rb", "title": "An error occurred while loading ./spec/controllers/users_controller_spec.rb", "body": "<p>I am creating factories to replace my fixtures and to generate Test Data. I've installed FactoryBot but I am getting an error when running \"rspec\". This is the outcome log I get:</p>\n\n<pre><code>An error occurred while loading ./spec/controllers/users_controller_spec.rb.\nFailure/Error: @user = FactoryBot.create(:user)\n\nActiveRecord::RecordInvalid:\n  Validation failed: Email has already been taken\n# ./spec/controllers/users_controller_spec.rb:5:in `block in &lt;top (required)&gt;'\n# ./spec/controllers/users_controller_spec.rb:3:in `&lt;top (required)&gt;'\n\n\nFinished in 0.00041 seconds (files took 38.38 seconds to load)\n0 examples, 0 failures, 1 error occurred outside of examples\n</code></pre>\n\n<p>This is my spec/factories/user_factory.rb</p>\n\n<pre><code>FactoryBot.define do\n  factory :user do\n    email \"peter@example.com\"\n    password \"0123456\"\n    first_name \"Peter\"\n    last_name \"Example\"\n    admin false\n  end\nend\n</code></pre>\n\n<p>This is my spec/controllers/users_controller_spec.rb</p>\n\n<pre><code>require 'rails_helper'\n\ndescribe UsersController, type: :controller do\n\n  @user = FactoryBot.create(:user)\n\n  # let (:user) { User.create!(email:\"achochaocierva@gmail.com\", password: \"Ratadecierva2\")}\n\n  describe 'GET #show' do\n      context 'when a user is logged in' do\n        before do\n          sign_in user\n        end\n        it 'loads correct user details' do\n             get :show, params: { id: user.id }\n             expect(response).to be_ok\n             expect(assigns(:user)).to eq user\n          end\n        end\n\n      context 'when a user is not logged in' do\n        it 'redirects to login' do\n          get :show, params: { id: user.id }\n          expect(response).to redirect_to(new_user_session_path)\n       end\n    end\n  end\nend\n</code></pre>\n\n<p>What would be the errors meaning? What am I doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1520338894, "post_id": 49130695, "comment_id": 85265873, "body": "Your <code>@coaches</code> is a hash. It obviously can&#39;t use your <code>Page.to_csv</code>."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1520339728, "post_id": 49130695, "comment_id": 85266456, "body": "I&#39;m not even sure how <code>Page.to_csv</code> is relevant here."}, {"owner": {"reputation": 283, "user_id": 4746788, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/90b80eeffa55eb3c779f5d0fca813aa1?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/4746788/andy"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1520340119, "post_id": 49130695, "comment_id": 85266735, "body": "Please enlighten me @SergioTulentsev? What would I do to make it work?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1520340156, "post_id": 49130695, "comment_id": 85266761, "body": "Please see the linked answers. Plenty of examples there. In short, there appears to be no <code>Hash#to_csv</code>, so you&#39;ll have to write a helper to serialize your hash. Not as simple as <code>@coaches.to_csv</code>. More like <code>coaches_to_csv(@coaches)</code>, where <code>coaches_to_csv</code> you will have to write."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1520340324, "post_id": 49130695, "comment_id": 85266881, "body": "Also: <a href=\"https://github.com/am-kantox/see_as_vee\" rel=\"nofollow noreferrer\">github.com/am-kantox/see_as_vee</a>"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1520340401, "post_id": 49130695, "comment_id": 85266930, "body": "@mudasobwa: you use a separate profile for work?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1520340510, "post_id": 49130695, "comment_id": 85267012, "body": "@SergioTulentsev yes, to distinguish what was indeed sponsored by my employer and what was done during polar sleepless nights :)"}, {"owner": {"reputation": 283, "user_id": 4746788, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/90b80eeffa55eb3c779f5d0fca813aa1?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/4746788/andy"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1520341119, "post_id": 49130695, "comment_id": 85267410, "body": "@SergioTulentsev Not sure I&#39;m following. I&#39;ll create a method in my pages controller that has the logic from your example links and then call that?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1520341286, "post_id": 49130695, "comment_id": 85267541, "body": "@Andy: yes, this is the simplest thing that could work. Of course, controller is not the place for this csv serialization logic and it has to be moved elsewhere. But this is unrelated to the problem."}, {"owner": {"reputation": 283, "user_id": 4746788, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/90b80eeffa55eb3c779f5d0fca813aa1?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/4746788/andy"}, "edited": false, "score": 0, "creation_date": 1520341782, "post_id": 49130695, "comment_id": 85267852, "body": "Okay, so I added the link to hit the method: = link_to &#39;Download CSV&#39;, coaches_to_csv_path(@coaches), and I added the controller action:   def coaches_to_csv     coaches = params     CSV.open(&#39;data.csv&#39;, &#39;wb&#39;) { |csv| coaches.to_a.each { |coach| csv &lt;&lt; coach } }   end"}, {"owner": {"reputation": 283, "user_id": 4746788, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/90b80eeffa55eb3c779f5d0fca813aa1?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/4746788/andy"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1520341837, "post_id": 49130695, "comment_id": 85267891, "body": "@SergioTulentsev getting the following error: undefined method `to_a&#39;. What I find hard to understand is when the hash is nested, which it is here."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1520342227, "post_id": 49130695, "comment_id": 85268138, "body": "@Andy: what I do in such cases is stare at the code for a minute, try to determine which variables hold what data at what  step, and then use <b>lots</b> of debug-printing to confirm or reject my hypotheses."}, {"owner": {"reputation": 283, "user_id": 4746788, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/90b80eeffa55eb3c779f5d0fca813aa1?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/4746788/andy"}, "edited": false, "score": 0, "creation_date": 1520342401, "post_id": 49130695, "comment_id": 85268260, "body": "Cheers mate, I&#39;ll try."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1520343812, "post_id": 49130695, "comment_id": 85269199, "body": "@Andy: yep, it isn&#39;t too complicated. With a bit of pen-and-paper you should be able to do this. But if you get stuck/overwhelmed, hit me up on codementor, I&#39;ll guide you through. :)"}, {"owner": {"reputation": 283, "user_id": 4746788, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/90b80eeffa55eb3c779f5d0fca813aa1?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/4746788/andy"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1520347694, "post_id": 49130695, "comment_id": 85271742, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/166331/discussion-between-andy-and-sergio-tulentsev\">continue this discussion in chat</a>."}], "owner": {"reputation": 283, "user_id": 4746788, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/90b80eeffa55eb3c779f5d0fca813aa1?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/4746788/andy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "closed_date": 1520339673, "answer_count": 0, "score": 0, "last_activity_date": 1520338902, "creation_date": 1520338794, "question_id": 49130695, "link": "https://stackoverflow.com/questions/49130695/export-ruby-hash-to-csv", "closed_reason": "Duplicate", "title": "Export Ruby Hash to CSV", "body": "<p><strong>Goal</strong>: I would like to export a ruby hash to CSV</p>\n\n<p><strong>Challenge</strong>: I keep getting the error: 'undefined method `to_csv' for # Did you mean? to_s'. </p>\n\n<p><strong>Approach</strong>: I'm making a call to Stripe, receive JSON back, sort the data and end up with a hash like this:</p>\n\n<pre><code>{\"33\"=&gt;{:name=&gt;\"John Doe\", :currency=&gt;\"eur\", :total=&gt;18748}, \"31\"=&gt;{:name=&gt;\"Jane Doe\", :currency=&gt;\"eur\", :total=&gt;7222}}\n</code></pre>\n\n<p>Ideally, I would like to export that hash to CSV so it can be imported to Excel or Google Sheets. </p>\n\n<p>Recurring_revenue.html.slim:</p>\n\n<pre><code>= link_to 'Download CSV', recurring_revenue_path(format: 'csv'), class: 'btn btn-success'\n</code></pre>\n\n<p>Pages controller:</p>\n\n<pre><code>@invoices = Stripe::Invoice.list(\n  paid: true,\n  expand: ['data.subscription'],\n  limit: 100,\n  date: {\n    gte: params[:start_date],\n    lte: params[:end_date]\n  }\n)\n\n@coaches = {}\n\n@invoices.auto_paging_each do |invoice|\n\n  @coaches[invoice.subscription.metadata.coach_id] ||= {\n    name: invoice.subscription.metadata.coach,\n    currency: invoice.subscription.plan.currency,\n    total: 0\n  }\n\n  @coaches[invoice.subscription.metadata.coach_id][:total] ||= 0\n  @coaches[invoice.subscription.metadata.coach_id][:total] += invoice.total\nend\n\nrespond_to do |format|\n  format.html\n  format.csv { send_data(@coaches.to_csv) }  \nend\n</code></pre>\n\n<p>Page.rb</p>\n\n<pre><code>class Page &lt; ApplicationRecord\n  def self.to_csv\n    attributes = %w{id email name}\n\n    CSV.generate(headers: true) do |csv|\n      csv &lt;&lt; attributes\n\n      all.each do |user|\n        csv &lt;&lt; attributes.map{ |attr| user.send(attr) }\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>I have added <code>include \"csv\"</code> in application.rb. Can anybody have a look and let me know what I'm doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 995, "user_id": 2091534, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vAtS3.jpg?s=128&g=1", "display_name": "viniciusjssouza", "link": "https://stackoverflow.com/users/2091534/viniciusjssouza"}, "edited": false, "score": 0, "creation_date": 1520338276, "post_id": 49130105, "comment_id": 85265460, "body": "Do you want to eliminate the duplicates?"}, {"owner": {"reputation": 7685, "user_id": 517868, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/771951f55ed37335f238e1a80dfda9cd?s=128&d=identicon&r=PG", "display_name": "Juanito Fatas", "link": "https://stackoverflow.com/users/517868/juanito-fatas"}, "edited": false, "score": 1, "creation_date": 1520338449, "post_id": 49130105, "comment_id": 85265566, "body": "Suggest types the code from the image in your question."}], "answers": [{"tags": [], "owner": {"reputation": 7685, "user_id": 517868, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/771951f55ed37335f238e1a80dfda9cd?s=128&d=identicon&r=PG", "display_name": "Juanito Fatas", "link": "https://stackoverflow.com/users/517868/juanito-fatas"}, "is_accepted": false, "score": 0, "last_activity_date": 1520338375, "creation_date": 1520338375, "answer_id": 49130568, "question_id": 49130105, "link": "https://stackoverflow.com/questions/49130105/delete-records-in-activerecord-relation-when-duplicate-rails/49130568#49130568", "title": "Delete records in ActiveRecord_Relation when duplicate rails", "body": "<p>(1) You can use Ruby's <code>uniq</code> to remove the duplicate records from your relation</p>\n\n<p>(2) If you don't want duplicate data in database, use a unique constraint</p>\n\n<p>(3) If you want a faster solution than (1), look into \"SELECT DISTINCT by column\"</p>\n\n<p>Hope this helps.</p>\n"}, {"tags": [], "owner": {"reputation": 145, "user_id": 8229753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22660980995e03dfd59812c9acf93db8?s=128&d=identicon&r=PG&f=1", "display_name": "Ketan Mangukiya", "link": "https://stackoverflow.com/users/8229753/ketan-mangukiya"}, "is_accepted": true, "score": 0, "last_activity_date": 1520345383, "last_edit_date": 1520345383, "creation_date": 1520345071, "answer_id": 49132700, "question_id": 49130105, "link": "https://stackoverflow.com/questions/49130105/delete-records-in-activerecord-relation-when-duplicate-rails/49132700#49132700", "title": "Delete records in ActiveRecord_Relation when duplicate rails", "body": "<p><strong>You can use</strong></p>\n\n<pre><code>validates_uniqueness_of \n</code></pre>\n\n<p>default validation of <strong>ruby</strong> model and restrict from saving duplicate data.</p>\n\n<p>This validation apply on <strong>More than 1 column</strong></p>\n\n<p><strong><em>Answer</em></strong></p>\n\n<pre><code>validates_uniqueness_of :id, :template, uniqueness: true, scope: [:template,:id]\n</code></pre>\n\n<p>Even you don't need to Add custom messages for that, ruby and rails give it automatically when the validation is fired.</p>\n\n<p><a href=\"https://apidock.com/rails/ActiveRecord/Validations/ClassMethods/validates_uniqueness_of\" rel=\"nofollow noreferrer\">Click Here</a> for more inforamtion</p>\n"}], "owner": {"reputation": 23, "user_id": 9450945, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-J0LpT_m0OQE/AAAAAAAAAAI/AAAAAAAAAmQ/VJBUUM5Yp1I/photo.jpg?sz=128", "display_name": "AnCo ngCo Danh Bun", "link": "https://stackoverflow.com/users/9450945/anco-ngco-danh-bun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 49132700, "answer_count": 2, "score": 0, "last_activity_date": 1521723676, "creation_date": 1520336840, "last_edit_date": 1521723676, "question_id": 49130105, "link": "https://stackoverflow.com/questions/49130105/delete-records-in-activerecord-relation-when-duplicate-rails", "title": "Delete records in ActiveRecord_Relation when duplicate rails", "body": "<p>I have ActiveRecord_Relation </p>\n\n<p><a href=\"https://i.stack.imgur.com/DsPNW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DsPNW.png\" alt=\"enter image description here\"></a></p>\n\n<p>I want result</p>\n\n<p><a href=\"https://i.stack.imgur.com/k7KTQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/k7KTQ.png\" alt=\"enter image description here\"></a></p>\n\n<p>help me!!!\nThanks so much</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 1035, "user_id": 1562489, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/ApdKz.jpg?s=128&g=1", "display_name": "David Sigley", "link": "https://stackoverflow.com/users/1562489/david-sigley"}, "edited": false, "score": 0, "creation_date": 1520524657, "post_id": 49127993, "comment_id": 85359891, "body": "Hey Ben, not really the solution I was looking for. Instead I am overriding the getters and setters."}, {"owner": {"reputation": 4429, "user_id": 102133, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/561a3a55352fe6a5343e541a6894b541?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/102133/ben"}, "reply_to_user": {"reputation": 1035, "user_id": 1562489, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/ApdKz.jpg?s=128&g=1", "display_name": "David Sigley", "link": "https://stackoverflow.com/users/1562489/david-sigley"}, "edited": false, "score": 0, "creation_date": 1520524875, "post_id": 49127993, "comment_id": 85360054, "body": "sorry i might have misunderstood; I based my answer on this &#39;Is it possible to set up a polymorphic association that handles different primary key types&#39; / could you maybe expose quickly your workaround ?"}, {"owner": {"reputation": 1035, "user_id": 1562489, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/ApdKz.jpg?s=128&g=1", "display_name": "David Sigley", "link": "https://stackoverflow.com/users/1562489/david-sigley"}, "edited": false, "score": 1, "creation_date": 1520525215, "post_id": 49127993, "comment_id": 85360321, "body": "I&#39;ve just added it. What I was looking for is to use the polymorphic association as I normally would. Your solution is nice, but I don&#39;t really want a table for enabling an <code>int id</code> to reference a <code>UUID</code>. I don&#39;t think you misunderstood. You solution would also work, I just chose what I feel is a nicer solution (personal preference)"}, {"owner": {"reputation": 1035, "user_id": 1562489, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/ApdKz.jpg?s=128&g=1", "display_name": "David Sigley", "link": "https://stackoverflow.com/users/1562489/david-sigley"}, "edited": false, "score": 1, "creation_date": 1520850715, "post_id": 49127993, "comment_id": 85469298, "body": "Ahh ok, I see the confusion. No, I didn&#39;t have any joining table (But I guess my question wasn&#39;t as clear as it should&#39;ve been)."}], "tags": [], "owner": {"reputation": 4429, "user_id": 102133, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/561a3a55352fe6a5343e541a6894b541?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/102133/ben"}, "is_accepted": false, "score": 0, "last_activity_date": 1520330574, "last_edit_date": 1520330574, "creation_date": 1520330224, "answer_id": 49127993, "question_id": 49127962, "link": "https://stackoverflow.com/questions/49127962/setting-up-a-polymorphic-association-where-associated-tables-have-different-prim/49127993#49127993", "title": "Setting up a polymorphic association where associated tables have different primary key types (UUID and Integer)", "body": "<p>I don't have your tables name, but here is an example for a join table</p>\n\n<pre><code>class CreateJoins &lt; ActiveRecord::Migration\n  def change\n    create_table :joins do |t|\n      t.belongs_to :uuid_id_model, type: :uuid # you specify the type\n      t.belongs_to :integer_id_model # you don't need anything\n      t.index %i[uuid_id_model integer_id_model], unique: true\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>I other words, specify on the columns that they are of type <code>uuid</code></p>\n\n<p>If you need to change a column type of your join tables, you can do like so :</p>\n\n<pre><code>class ChangeColumnType &lt; ActiveRecord::Migration\n  def change\n    change_column :some_join_table, :some_join_column, :uuid\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1035, "user_id": 1562489, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/ApdKz.jpg?s=128&g=1", "display_name": "David Sigley", "link": "https://stackoverflow.com/users/1562489/david-sigley"}, "is_accepted": true, "score": 0, "last_activity_date": 1520525072, "creation_date": 1520525072, "answer_id": 49177477, "question_id": 49127962, "link": "https://stackoverflow.com/questions/49127962/setting-up-a-polymorphic-association-where-associated-tables-have-different-prim/49177477#49177477", "title": "Setting up a polymorphic association where associated tables have different primary key types (UUID and Integer)", "body": "<p>The solution I ended up with is adding a <code>likeable_id_string</code> which stores any <code>uuid</code> primary key. I then override the getters and setters to do the following: </p>\n\n<pre><code># Overriding getters and setters to handle multiple primary key types on\n  # this polymorphic association ( String and Integer )\n\n  # Setters\n  def likeable=(value)\n    if !value.nil? &amp;&amp; value.id.is_a?(String)\n      self[:likeable_id] = nil\n      self[:likeable_id_string] = value.id\n      self[:likeable_type] = value.class.name\n    else\n      self[:likeable_id_string] = nil\n      super(value)\n    end\n  end\n\n  # in case likeable_type and likeable_id are updated seperately. I believe\n  # this is done in FE (rather than passing an object to .likeable)\n  def likeable_id=(value)\n    if !value.nil? &amp;&amp; value.is_a?(String)\n      self[:likeable_id] = nil\n      self[:likeable_id_string] = value\n    else\n      self[:likeable_id_string] = nil\n      super(value)\n    end\n  end\n\n  # Getters\n  def likeable\n    if self.likeable_id\n      return super\n    elsif !self.likeable_type.nil?\n      return self.likeable_type.constantize.find(likeable_id_string)\n    else\n      return nil\n    end\n  end\n</code></pre>\n\n<p>You would think that the <code>likeable=</code> setter isn't needed once I've overridden the <code>likeable_id=</code> .. but seems like it is. If anyone knows why I need both please let me know as it would seem logical that <code>likeable</code> delegates to <code>likeable_id</code> and <code>likeable_type</code></p>\n\n<p>I feel like there's a use case for this to be a Gem. Something I might do soon. Please get in touch if you would like to see this as a gem (or if you think that's a terrible idea)</p>\n"}], "owner": {"reputation": 1035, "user_id": 1562489, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/ApdKz.jpg?s=128&g=1", "display_name": "David Sigley", "link": "https://stackoverflow.com/users/1562489/david-sigley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "accepted_answer_id": 49177477, "answer_count": 2, "score": 1, "last_activity_date": 1520525072, "creation_date": 1520330147, "question_id": 49127962, "link": "https://stackoverflow.com/questions/49127962/setting-up-a-polymorphic-association-where-associated-tables-have-different-prim", "title": "Setting up a polymorphic association where associated tables have different primary key types (UUID and Integer)", "body": "<p>I have 5 tables which are all <code>likeable</code> by a <code>user</code>, and a <code>likes</code> table which records this. </p>\n\n<p>The problem is one of the 5 tables uses <code>uuid</code> and not integer for their primary key. So I can't have a typical <code>likeable_id</code> &amp; <code>likeable_type</code></p>\n\n<p>Is it possible to set up a polymorphic association that handles different primary key types?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1521, "user_id": 7177640, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/21ab719e4dfae3533a20da4f52e5c9e7?s=128&d=identicon&r=PG", "display_name": "nattfodd", "link": "https://stackoverflow.com/users/7177640/nattfodd"}, "edited": false, "score": 0, "creation_date": 1520330026, "post_id": 49127824, "comment_id": 85260302, "body": "isn&#39;t it faster to check it manually rather that posting the question?"}, {"owner": {"reputation": 140, "user_id": 3425542, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/8JQSA.png?s=128&g=1", "display_name": "p0kero", "link": "https://stackoverflow.com/users/3425542/p0kero"}, "reply_to_user": {"reputation": 1521, "user_id": 7177640, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/21ab719e4dfae3533a20da4f52e5c9e7?s=128&d=identicon&r=PG", "display_name": "nattfodd", "link": "https://stackoverflow.com/users/7177640/nattfodd"}, "edited": false, "score": 0, "creation_date": 1520330054, "post_id": 49127824, "comment_id": 85260321, "body": "as I have said, I can&#39;t test it now"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1520330340, "post_id": 49127824, "comment_id": 85260520, "body": "I think it will likely be <code>nil</code>, but I can see how some drivers/adapters, with certain configuration, could return empty strings."}], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1520330532, "post_id": 49128067, "comment_id": 85260627, "body": "That does not really prove anything since the id column obviously is not NULL."}, {"owner": {"reputation": 140, "user_id": 3425542, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/8JQSA.png?s=128&g=1", "display_name": "p0kero", "link": "https://stackoverflow.com/users/3425542/p0kero"}, "edited": false, "score": 0, "creation_date": 1520331115, "post_id": 49128067, "comment_id": 85261027, "body": "The database is MySQL"}], "tags": [], "owner": {"reputation": 171, "user_id": 5987744, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-D5Dyr2T43bM/AAAAAAAAAAI/AAAAAAAAHeM/1IU1uhzhfBM/photo.jpg?sz=128", "display_name": "Dhruv Joshi", "link": "https://stackoverflow.com/users/5987744/dhruv-joshi"}, "is_accepted": false, "score": 0, "last_activity_date": 1520330462, "creation_date": 1520330462, "answer_id": 49128067, "question_id": 49127824, "link": "https://stackoverflow.com/questions/49127824/what-value-does-activerecords-return-when-a-column-is-null/49128067#49128067", "title": "What value does ActiveRecords return when a column is NULL?", "body": "<p>With ActiveRecord its most likely to depend on the database you have. I did try your query and with Postgres database it shows <code>[]</code>empty array or <code>[2,3]</code> if the return has id of 2 and 3. Please feel free to share database type.</p>\n"}, {"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 3, "last_activity_date": 1520332257, "last_edit_date": 1520332257, "creation_date": 1520330470, "answer_id": 49128072, "question_id": 49127824, "link": "https://stackoverflow.com/questions/49127824/what-value-does-activerecords-return-when-a-column-is-null/49128072#49128072", "title": "What value does ActiveRecords return when a column is NULL?", "body": "<p>Ruby only has one value for nothing which is <code>nil</code>. This is one thing that Matz got absolutely right compared to other languages.</p>\n\n<p>A NULL value in SQL is mapped to <code>nil</code> by the adapter in most cases.</p>\n\n<p>If you have a column default which is not nil (say \"\" or 0 for example) the result will not be nil since nothing is equatable to nil in Ruby (unlike some very popular but poorly designed languages).</p>\n\n<pre><code>irb(main):003:0&gt; nil == \"\"\n=&gt; false\nirb(main):004:0&gt; nil == 0\n=&gt; false\nirb(main):005:0&gt; nil == false\n=&gt; false\nirb(main):006:0&gt; !!nil\n=&gt; false\n</code></pre>\n"}], "owner": {"reputation": 140, "user_id": 3425542, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/8JQSA.png?s=128&g=1", "display_name": "p0kero", "link": "https://stackoverflow.com/users/3425542/p0kero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 49128072, "answer_count": 2, "score": 1, "last_activity_date": 1520332257, "creation_date": 1520329761, "last_edit_date": 1520330099, "question_id": 49127824, "link": "https://stackoverflow.com/questions/49127824/what-value-does-activerecords-return-when-a-column-is-null", "title": "What value does ActiveRecords return when a column is NULL?", "body": "<p>I'm in a environment where I can't test it, and I don't find information or any example on internet.</p>\n\n<p>Let's say I have a statement like this:</p>\n\n<pre><code>ActiveRecord::Base.connection.select_values(\"select a from table_b where id = 'x'\")\n</code></pre>\n\n<p>(I know that it's not recommended and it's better to use other ways to deal with the database)</p>\n\n<p>If some rows have the column 'a' as NULL, what do I have in ruby? \"NULL\", Nil or another thing?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1520326900, "post_id": 49126623, "comment_id": 85258369, "body": "What is your question?"}], "answers": [{"tags": [], "owner": {"reputation": 977, "user_id": 4142552, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Puiw1rqSrjE/AAAAAAAAAAI/AAAAAAAAASA/2u6qPeqLeYY/photo.jpg?sz=128", "display_name": "court3nay", "link": "https://stackoverflow.com/users/4142552/court3nay"}, "is_accepted": false, "score": 0, "last_activity_date": 1520326845, "creation_date": 1520326845, "answer_id": 49126918, "question_id": 49126623, "link": "https://stackoverflow.com/questions/49126623/unsupported-proxy-in-httpclient/49126918#49126918", "title": "unsupported proxy in HTTPClient", "body": "<p>make sure ruby can see and read /etc/resolv.conf and that you don't have HTTP_PROXY env variable set. Also check that your ssl isn't using a non-standard ssl port.</p>\n"}, {"tags": [], "owner": {"reputation": 910, "user_id": 1883278, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/4297e42fb78f909af5da151f61aefa5a?s=128&d=identicon&r=PG", "display_name": "Sankalp", "link": "https://stackoverflow.com/users/1883278/sankalp"}, "is_accepted": false, "score": 0, "last_activity_date": 1522885899, "creation_date": 1522885899, "answer_id": 49662105, "question_id": 49126623, "link": "https://stackoverflow.com/questions/49126623/unsupported-proxy-in-httpclient/49662105#49662105", "title": "unsupported proxy in HTTPClient", "body": "<p>Run echo $HTTP_PROXY on your terminal. If you see any value, its not good. You'll have to unset that variable. </p>\n\n<p>See - <a href=\"https://github.com/savonrb/savon/issues/123#issuecomment-620825\" rel=\"nofollow noreferrer\">https://github.com/savonrb/savon/issues/123#issuecomment-620825</a></p>\n"}, {"tags": [], "owner": {"reputation": 240, "user_id": 1338031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/885297a97800279b1518f519497ee77d?s=128&d=identicon&r=PG", "display_name": "theme", "link": "https://stackoverflow.com/users/1338031/theme"}, "is_accepted": false, "score": 0, "last_activity_date": 1536197344, "last_edit_date": 1592644375, "creation_date": 1536197344, "answer_id": 52195262, "question_id": 49126623, "link": "https://stackoverflow.com/questions/49126623/unsupported-proxy-in-httpclient/52195262#52195262", "title": "unsupported proxy in HTTPClient", "body": "<blockquote>\n<p><a href=\"https://www.rubydoc.info/gems/httpclient/2.1.5.2/HTTPClient\" rel=\"nofollow noreferrer\">https://www.rubydoc.info/gems/httpclient/2.1.5.2/HTTPClient</a></p>\n<p>Accessing resources through HTTP proxy. You can use environment variable 'http_proxy' or 'HTTP_PROXY' instead.</p>\n<p><code>clnt = HTTPClient.new('http://myproxy:8080')</code></p>\n</blockquote>\n<p>So in your code <code>request = HTTPClient.new(url)</code> is putting target url as proxy of HTTPClient.  (It is indeed a little confusing when you come from net/http)</p>\n"}], "owner": {"reputation": 7004, "user_id": 1103606, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d93cc650b93939ea91066fcb5aefae0?s=128&d=identicon&r=PG", "display_name": "Peter Penzov", "link": "https://stackoverflow.com/users/1103606/peter-penzov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 546, "favorite_count": 1, "answer_count": 3, "score": -1, "last_activity_date": 1536197344, "creation_date": 1520325919, "last_edit_date": 1520326932, "question_id": 49126623, "link": "https://stackoverflow.com/questions/49126623/unsupported-proxy-in-httpclient", "title": "unsupported proxy in HTTPClient", "body": "<p>I want to use Ruby httpclient to make requests. I tried to implement this code:</p>\n\n<pre><code>def submit!\n    http = Net::HTTP.new(url.host, url.port)\n    http.use_ssl = true\n    http.verify_mode = OpenSSL::SSL::VERIFY_NONE\n\n    request = HTTPClient.new(url)\n    request.basic_auth('username', 'pass')\n    request['content-type'] = 'application/xml'\n    request['cache-control'] = 'no-cache'\n    request.body = request_body\n\n    response = http.request(request).body\n    response = Response.new(response)\n    check_for_approved_response(response)\n\n    response\n  end\n</code></pre>\n\n<p>But I get error:</p>\n\n<pre><code>unsupported proxy https://staging.gate.some_address.net/process/3ab20f2ddbe78ab8be9f5a9645c1010330dc868f\n</code></pre>\n\n<p>Can you recommend some solution how to fix it?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 4, "creation_date": 1520325441, "post_id": 49126431, "comment_id": 85257589, "body": "The Ruby parser interprets your hash as a block, just like <code>each { ... }</code>"}, {"owner": {"reputation": 47, "user_id": 3775410, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001686400686/picture?type=large", "display_name": "user3775410", "link": "https://stackoverflow.com/users/3775410/user3775410"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1520325769, "post_id": 49126431, "comment_id": 85257748, "body": "oh.... thank you @Stefan, i perfectly understand after reading your answer"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1520327062, "post_id": 49126431, "comment_id": 85258453, "body": "BTW, yet another way to call the method is <code>func1 **{somekey: &quot;somevalue&quot;}</code> \u2013 the <code>**</code> operator converts the hash to keyword arguments."}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1520329984, "post_id": 49126431, "comment_id": 85260280, "body": "@Stefan You can just pass a plain old Hash to methods expecting keyword arguments. No need to splat it again."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1520331481, "post_id": 49126431, "comment_id": 85261254, "body": "@HolgerJust yes, if you do provide parentheses. I just wanted to show a way to pass a hash literal without them."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1520328367, "post_id": 49127163, "comment_id": 85259263, "body": "<i>&quot;it&#39;s syntactical sugar for using do..end&quot;</i> \u2013 not quite, <code>{ ... }</code> has higher precedence."}], "tags": [], "owner": {"reputation": 5952, "user_id": 2923108, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/21c18155bcd49e1e461a0eed925af039?s=128&d=identicon&r=PG&f=1", "display_name": "Marco Prins", "link": "https://stackoverflow.com/users/2923108/marco-prins"}, "is_accepted": false, "score": 1, "last_activity_date": 1520329885, "last_edit_date": 1520329885, "creation_date": 1520327586, "answer_id": 49127163, "question_id": 49126431, "link": "https://stackoverflow.com/questions/49126431/call-a-function-with-hash-parameter/49127163#49127163", "title": "Call a function with hash parameter", "body": "<p>Using curly braces <code>{}</code> seperated by a space is how you declare a block in ruby, so there is a conflict here in the parsing step. Ruby thinks you're passing the method a block.</p>\n\n<p>For example, this is a block being passed to the <code>select</code> method:</p>\n\n<pre><code>[1, 2, 3].select { |x| x &gt;= 2 } # =&gt; [2, 3]\n</code></pre>\n\n<p>You can call it an \"inline\" block and it's an alternative to using <code>do..end</code> (with slight differences).\nIt's better in my opinion to stick to using the parenthesis here <code>()</code></p>\n\n<pre><code>func1({somekey: \"somevalue\"})\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 3775410, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001686400686/picture?type=large", "display_name": "user3775410", "link": "https://stackoverflow.com/users/3775410/user3775410"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1520329885, "creation_date": 1520325240, "last_edit_date": 1520327613, "question_id": 49126431, "link": "https://stackoverflow.com/questions/49126431/call-a-function-with-hash-parameter", "title": "Call a function with hash parameter", "body": "<p>I defined some functions like this:</p>\n\n<pre><code>def func1(hash)\n    hash.each do |key, value|\n       puts \"#{key}, #{value}\"\n    end\nend\n</code></pre>\n\n<p>I can call the function like this:</p>\n\n<ol>\n<li><code>func1({somekey: \"somevalue\"})</code> </li>\n<li><code>func1(somekey: \"somevalue\")</code></li>\n<li><code>func1 somekey: \"somevalue\"</code></li>\n</ol>\n\n<p>but this format does not work:</p>\n\n<ul>\n<li><code>func1 {somekey: \"somevalue\"}</code></li>\n</ul>\n\n<p>Please explain this.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1520323511, "post_id": 49125949, "comment_id": 85256646, "body": "No way; the above is perfectly loaded. The issue should be somewhere else. You might try to copy-paste the above into a separated file and try to <code>ruby file.rb</code> it."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1520324020, "post_id": 49125949, "comment_id": 85256904, "body": "This means that you opened the same <code>Group</code> class twice, but used a different superclass (<code>&lt; Superclass</code>)."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1520324783, "post_id": 49125949, "comment_id": 85257257, "body": "Try <code>class ::Group</code> for the second class. Is the result same?"}, {"owner": {"reputation": 2031, "user_id": 2337830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a378c6d6daf4fb5ec84b9079db4d5d60?s=128&d=identicon&r=PG", "display_name": "tombeynon", "link": "https://stackoverflow.com/users/2337830/tombeynon"}, "edited": false, "score": 0, "creation_date": 1520328707, "post_id": 49125949, "comment_id": 85259468, "body": "Alternatively loading the group.rb class before command/group.rb should stop the parser from trying to be clever and reopen an existing class."}, {"owner": {"reputation": 23, "user_id": 3693739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8c71c814d21605a166626b89cd5725?s=128&d=identicon&r=PG&f=1", "display_name": "rizkyduut", "link": "https://stackoverflow.com/users/3693739/rizkyduut"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1520330379, "post_id": 49125949, "comment_id": 85260549, "body": "@sawa doesn&#39;t work, it&#39;s still error."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1520337990, "post_id": 49125949, "comment_id": 85265287, "body": "@rizkyduut try to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> \u2013 your current example code doesn&#39;t raise any errors."}, {"owner": {"reputation": 23, "user_id": 3693739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8c71c814d21605a166626b89cd5725?s=128&d=identicon&r=PG&f=1", "display_name": "rizkyduut", "link": "https://stackoverflow.com/users/3693739/rizkyduut"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1520344036, "post_id": 49125949, "comment_id": 85269348, "body": "@Stefan aw thanks, I didn&#39;t try the code before. I&#39;ve edited it."}], "answers": [{"tags": [], "owner": {"reputation": 2031, "user_id": 2337830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a378c6d6daf4fb5ec84b9079db4d5d60?s=128&d=identicon&r=PG", "display_name": "tombeynon", "link": "https://stackoverflow.com/users/2337830/tombeynon"}, "is_accepted": false, "score": 2, "last_activity_date": 1520345139, "creation_date": 1520345139, "answer_id": 49132723, "question_id": 49125949, "link": "https://stackoverflow.com/questions/49125949/superclass-mismatch-for-class-in-ruby/49132723#49132723", "title": "Superclass mismatch for class in Ruby", "body": "<p>Thanks for providing further code. It's now clear that there is an error here. You define <code>Command::Group</code> twice, but only one of them inherits from <code>Command</code></p>\n\n<p>lib/command/group.rb</p>\n\n<pre><code>class Command\n  class Group &lt; Command\n  end\nend\n</code></pre>\n\n<p>lib/command/group/add.rb</p>\n\n<pre><code>class Command\n  class Group # missing inheritance\n    class Add &lt; Group\n      # do something\n    end\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1520345968, "post_id": 49132727, "comment_id": 85270577, "body": "I wasn&#39;t aware that Ruby allows to reopen a class without specifying its superclass. Is that considered a feature?"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1520346096, "post_id": 49132727, "comment_id": 85270656, "body": "@Stefan yep. This is the only difference between no explicit inheritance and <code>&lt; Object</code> AFAIK."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1520347803, "post_id": 49132727, "comment_id": 85271843, "body": "Attempting to reopen it via <code>module</code> on the other hand fails with a <code>TypeError</code>."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1520347983, "post_id": 49132727, "comment_id": 85271971, "body": "@Stefan, yep. That was the actual issue raised in Euruko, not the inheritance one. But as is, it kind of makes sense. Using <code>class</code> in one place and <code>module</code> in another is a direct contradiction (you say the constant is two different things). Reopening a class isn&#39;t though - you aren&#39;t saying that it now inherits from <code>Object</code>. It&#39;s just that if it wasn&#39;t defined before <code>Object</code> is the default."}, {"owner": {"reputation": 23, "user_id": 3693739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8c71c814d21605a166626b89cd5725?s=128&d=identicon&r=PG&f=1", "display_name": "rizkyduut", "link": "https://stackoverflow.com/users/3693739/rizkyduut"}, "edited": false, "score": 0, "creation_date": 1520413267, "post_id": 49132727, "comment_id": 85300146, "body": "@ndn If I want to keep the inheritance like above <code>Command &lt; Group &lt; Add</code> how should I design it then? Is there any reference for it?"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 23, "user_id": 3693739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8c71c814d21605a166626b89cd5725?s=128&d=identicon&r=PG&f=1", "display_name": "rizkyduut", "link": "https://stackoverflow.com/users/3693739/rizkyduut"}, "edited": false, "score": 0, "creation_date": 1520413606, "post_id": 49132727, "comment_id": 85300334, "body": "@rizkyduut just put them all in a <code>Commands</code> module. Aka all of them will just be nested in <code>Commands</code> and everything there can inherit from whatever you want. Don&#39;t nest <code>Group</code> under <code>Command</code> and <code>Add</code> under <code>Group</code>."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 2, "last_activity_date": 1520345455, "last_edit_date": 1520345455, "creation_date": 1520345150, "answer_id": 49132727, "question_id": 49125949, "link": "https://stackoverflow.com/questions/49125949/superclass-mismatch-for-class-in-ruby/49132727#49132727", "title": "Superclass mismatch for class in Ruby", "body": "<p><code>lib/command/group/add.rb</code> may get loaded before <code>lib/command/group.rb</code>. Hence in the latter, it appears as if you try to change which class <code>Group</code> inherits from.</p>\n\n<p>The band aid solution would be to point to the same subclass in all files. Aka in <code>lib/command/group/add.rb</code>, you should add <code>&lt; Command</code>.</p>\n\n<p>The real solution should be to never use a class/module for namespacing and attach functionality to it.</p>\n\n<hr>\n\n<p><sup>This issue was raised in Euruko 2016 and Matz said they might consider a special keyword for it. [Citation needed]</sup></p>\n"}], "owner": {"reputation": 23, "user_id": 3693739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8c71c814d21605a166626b89cd5725?s=128&d=identicon&r=PG&f=1", "display_name": "rizkyduut", "link": "https://stackoverflow.com/users/3693739/rizkyduut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3300, "favorite_count": 0, "accepted_answer_id": 49132727, "answer_count": 2, "score": 1, "last_activity_date": 1520345455, "creation_date": 1520323173, "last_edit_date": 1520343946, "question_id": 49125949, "link": "https://stackoverflow.com/questions/49125949/superclass-mismatch-for-class-in-ruby", "title": "Superclass mismatch for class in Ruby", "body": "<p>I'm working on project that requires different classes to have the same name like this:</p>\n\n<p>lib/command.rb</p>\n\n<pre><code>class Command\nend\n</code></pre>\n\n<p>lib/command/group.rb</p>\n\n<pre><code>class Command\n  class Group &lt; Command\n  end\nend\n</code></pre>\n\n<p>lib/command/group/add.rb</p>\n\n<pre><code>class Command\n  class Group\n    class Add &lt; Group\n      # do something\n    end\n  end\nend\n</code></pre>\n\n<p>and lib/group.rb</p>\n\n<pre><code>class Group\n  # do something\nend\n</code></pre>\n\n<p>Rakefile</p>\n\n<pre><code>task :reload do\n  Dir[File.dirname(__FILE__) + '/lib/**/*.rb'].each{ |file| load file }\nend\n\ntask default: 'reload'\n</code></pre>\n\n<p>The first three classes behaves like a helper, and last class is the model.</p>\n\n<p>When I run <code>Rakefile</code> to load all classes, it will raise the <code>TypeError: superclass mismatch for class Group</code> indeed.</p>\n\n<p>How should I solve it without renaming one of the <code>Group</code> classes? Is it possible?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3"], "answers": [{"tags": [], "owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "is_accepted": true, "score": 1, "last_activity_date": 1520319127, "creation_date": 1520319127, "answer_id": 49124951, "question_id": 49124886, "link": "https://stackoverflow.com/questions/49124886/starter-stuck-on-this-point-generated-rails-project-missing-the-config-rout/49124951#49124951", "title": "(Starter. Stuck on this point) generated Rails project : missing the config/routes.rb file", "body": "<p>(Try not to post screenshots. And learning Ubuntu is easier than trying to code Rails on Windows, by a mile...)</p>\n\n<p>You are in <code>assets/config</code>. Look in <code>Blog\\config</code>.</p>\n"}], "owner": {"reputation": 1093, "user_id": 7291498, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5860e15171a268c496d94f9259052138?s=128&d=identicon&r=PG&f=1", "display_name": "Rifat", "link": "https://stackoverflow.com/users/7291498/rifat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 49124951, "answer_count": 1, "score": 1, "last_activity_date": 1520319127, "creation_date": 1520318849, "question_id": 49124886, "link": "https://stackoverflow.com/questions/49124886/starter-stuck-on-this-point-generated-rails-project-missing-the-config-rout", "title": "(Starter. Stuck on this point) generated Rails project : missing the config/routes.rb file", "body": "<p>Following <a href=\"http://guides.rubyonrails.org/getting_started.html\" rel=\"nofollow noreferrer\">this article</a> everything works but I'm stuck on routing welcome index page as this mentioned file is missing. <a href=\"https://i.stack.imgur.com/G2m3B.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/G2m3B.png\" alt=\"enter image description here\"></a></p>\n\n<p>please mention workaround or if I'm missing anything.</p>\n"}, {"tags": ["ruby", "web-applications", "sinatra", "simplesamlphp"], "comments": [{"owner": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "edited": false, "score": 0, "creation_date": 1520318920, "post_id": 49123413, "comment_id": 85254553, "body": "More than likely, as SimpleSAMLphp supports OAuth. Check out <a href=\"https://github.com/omniauth/omniauth-saml\" rel=\"nofollow noreferrer\">github.com/omniauth/omniauth-saml</a>"}], "owner": {"reputation": 1187, "user_id": 4557537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/098c314fbc6fd463195db73b4da43b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Fadi", "link": "https://stackoverflow.com/users/4557537/fadi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1520310647, "creation_date": 1520310647, "question_id": 49123413, "link": "https://stackoverflow.com/questions/49123413/ruby-login-page-that-uses-simplesamlphp-as-authentication", "title": "Ruby login page that uses SimpleSAMLphp as authentication", "body": "<p>I've been searching for a while for a solution to my needs. Here's what's needed:</p>\n\n<ul>\n<li>Ruby webapp (not Ruby on Rails).</li>\n<li>Sinatra</li>\n<li>Login page which uses <a href=\"https://simplesamlphp.org/\" rel=\"nofollow noreferrer\">SimpleSAMLphp</a> for authentication (redirect to our SimpleSAMLphp, authenticate, then go back to our app to do an action).</li>\n</ul>\n\n<p>Is this possible? If not, if someone can point me to the right direction I'd  be grateful!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "cucumber"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1520308127, "post_id": 49122703, "comment_id": 85251449, "body": "I&#39;m figuring that at some point in your test suite, you register or log in with a user. At that point you need to get the user id somehow, and store it in a variable."}], "answers": [{"comments": [{"owner": {"reputation": 1166, "user_id": 2217750, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cKXxI.jpg?s=128&g=1", "display_name": "Darkisa", "link": "https://stackoverflow.com/users/2217750/darkisa"}, "edited": false, "score": 0, "creation_date": 1520532817, "post_id": 49129359, "comment_id": 85365021, "body": "I have separate tests that do exactly as you have it. However, if a user doesn&#39;t exist then at some point (e.g. when a user checks out) the app automatically logs a user in as a Guest User. When this happens, the guest user&#39;s id can be any random id and the user would have no name, password, email etc, but would have an id. In my app, I can access the id of the guest user by using the current_user method. After some digging, I figured out that I wasn&#39;t testing the most optimal way and I shouldn&#39;t need to access the current_user method. Thanks for the response!"}], "tags": [], "owner": {"reputation": 1136, "user_id": 5215927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w06Fv.jpg?s=128&g=1", "display_name": "mr_sudaca", "link": "https://stackoverflow.com/users/5215927/mr-sudaca"}, "is_accepted": false, "score": 1, "last_activity_date": 1520334488, "creation_date": 1520334488, "answer_id": 49129359, "question_id": 49122703, "link": "https://stackoverflow.com/questions/49122703/rails-cucumber-and-application-controller-methods/49129359#49129359", "title": "Rails: Cucumber and Application Controller Methods", "body": "<p>do you have a step to login? if so, you can change it a little so you can control which user logs in:</p>\n\n<pre><code>Given \"john_doe\" logs in to the app\n</code></pre>\n\n<p>Then you can search by username and do the login in your step. You can do the same on this step:</p>\n\n<pre><code>Then /^the redis database should have \"(.+)\" item ids/ do |count|\n</code></pre>\n\n<p>something like</p>\n\n<pre><code>Then /^the redis database should have \"(.+)\" item ids for user \"(.*)\"/ do |count, user_name|\n  user = User.find_by(username: user_name)\n  expect($redis.smembers(\"cart#{user.id}\").count).to eq count.to_i\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1166, "user_id": 2217750, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cKXxI.jpg?s=128&g=1", "display_name": "Darkisa", "link": "https://stackoverflow.com/users/2217750/darkisa"}, "edited": false, "score": 0, "creation_date": 1520532408, "post_id": 49177926, "comment_id": 85364773, "body": "Thank you! This was really helpful. I am still wrapping my head around types of tests, what they are used for, what tools to use for each test, etc. I&#39;m getting there :). Thanks again."}], "tags": [], "owner": {"reputation": 3257, "user_id": 4341733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b1793f226cb3189da8bc9c6264d72b7?s=128&d=identicon&r=PG", "display_name": "diabolist", "link": "https://stackoverflow.com/users/4341733/diabolist"}, "is_accepted": true, "score": 1, "last_activity_date": 1520526461, "creation_date": 1520526461, "answer_id": 49177926, "question_id": 49122703, "link": "https://stackoverflow.com/questions/49122703/rails-cucumber-and-application-controller-methods/49177926#49177926", "title": "Rails: Cucumber and Application Controller Methods", "body": "<p>Your not really using Cucumber as intended here. What you are doing is testing how your application currently works, but really Cukes is best used to specify what your application does and why its important.</p>\n\n<p>Applying more appropriate usage to your current problem leads to the following questions</p>\n\n<p>What is the reason for storing the ids in Redis?\nWhat benefit does the customer get by having these id's stored?</p>\n\n<p>Taking a wild guess you might be saving a basket so that if the user logs out, their basket would still be populated when they come back. Then your scenario would be something like</p>\n\n<pre><code>Scenario: Remember products in basket\n  Given I am registered\n  And I am logged in\n  When I put some products in my basket\n  And I log out\n  And I log in again\n  Then my basket should still have some products in it\n</code></pre>\n\n<p>Notice how the scenario is all about WHAT you are doing and WHY its important but reveals nothing about HOW this is going to be done. This is a really good way to critique scenarios. Scenarios that contain HOW stuff are going to be harder to write and much harder to maintain. Anyhow enough of that :)</p>\n\n<p>Now you can use standard cucumber stuff like assigned the user to a variable in one step e.g. <code>@i = create_registered_user</code> and then using that user in the other steps e.g. <code>login as: @i</code></p>\n\n<p>Note that we don't look at the database, only at what the user sees, and we don't reveal anything about HOW this functionality works in the scenario.</p>\n\n<p>If you want to write tests (rather than scenarios) that do reveal how functionality works and do look at databases for results then I'd suggest that rspec would be better suited for this.</p>\n"}], "owner": {"reputation": 1166, "user_id": 2217750, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cKXxI.jpg?s=128&g=1", "display_name": "Darkisa", "link": "https://stackoverflow.com/users/2217750/darkisa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 1, "accepted_answer_id": 49177926, "answer_count": 2, "score": 1, "last_activity_date": 1520526461, "creation_date": 1520304976, "question_id": 49122703, "link": "https://stackoverflow.com/questions/49122703/rails-cucumber-and-application-controller-methods", "title": "Rails: Cucumber and Application Controller Methods", "body": "<p>I am doing integration testing using Cucumber. In my <code>ApplicationController</code>, I have a method called <code>current_user</code> that provides the current user object. I use this object to add items to a redis database:</p>\n\n<pre><code>$redis.sadd(\"cart#current_user.id}\", [1,5,2])\n</code></pre>\n\n<p>In my Cucumber steps I test this functionality:</p>\n\n<pre><code>Then /^the redis database should have \"(.+)\" item ids/ do |count|\n  expect($redis.smembers(\"cart#{current_user.id}\").count).to eq count.to_i\nend\n</code></pre>\n\n<p>However, it is my understanding that Cucumber does not have access to controller methods, even if they are under <code>ApplicationController</code>, and therefore I cannot user the <code>current_user</code> method the way I would in my controllers. </p>\n\n<p>What I am doing now is since I am testing features, there is only one user in the database so the current_user.id will always be 1, but if I start adding more users this may not work nicely. </p>\n\n<p>Is there a workaround for this? </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 9448751, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rory O&#39;Connor", "link": "https://stackoverflow.com/users/9448751/rory-oconnor"}, "edited": false, "score": 0, "creation_date": 1520309990, "post_id": 49122549, "comment_id": 85251895, "body": "Thank you for responding! That actually would have fixed the immediate problem, but the overall issue was more structural and needed a deeper  fix."}], "tags": [], "owner": {"reputation": 545, "user_id": 7146589, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0f3b4cadf837952a1fbc16191d22c2bf?s=128&d=identicon&r=PG&f=1", "display_name": "iceveda06", "link": "https://stackoverflow.com/users/7146589/iceveda06"}, "is_accepted": false, "score": 0, "last_activity_date": 1520303754, "creation_date": 1520303754, "answer_id": 49122549, "question_id": 49122348, "link": "https://stackoverflow.com/questions/49122348/actioncontrollerparametermissing-with-delete-action/49122549#49122549", "title": "ActionController::ParameterMissing with Delete Action", "body": "<p>Rory,\nShouldn't your Delete action be like this?</p>\n\n<pre><code>def destroy\n  @article = Task.find(params[:id])\n  @article.destroy\n\n  redirect_to tasks_path\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 9448751, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rory O&#39;Connor", "link": "https://stackoverflow.com/users/9448751/rory-oconnor"}, "edited": false, "score": 0, "creation_date": 1520308579, "post_id": 49122574, "comment_id": 85251555, "body": "Thank you for all this info! Huge help and the scaffold part was awesome. Created a new Tasks_Controller.rb and added the params I needed to update after params.fetch(:task) and it worked!"}, {"owner": {"reputation": 3091, "user_id": 1290457, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/121ff7202cde3e23e2c73ff3078b5a15?s=128&d=identicon&r=PG", "display_name": "sandre89", "link": "https://stackoverflow.com/users/1290457/sandre89"}, "reply_to_user": {"reputation": 37, "user_id": 9448751, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rory O&#39;Connor", "link": "https://stackoverflow.com/users/9448751/rory-oconnor"}, "edited": false, "score": 0, "creation_date": 1520311636, "post_id": 49122574, "comment_id": 85252239, "body": "@RoryO&#39;Connor It&#39;s worth searching about the rails scaffold. I suggested <code>scaffold_controller</code> because you already have a model, but you can scaffold the model and the controller in one go. Like the joke goes, you&#39;ll have to write some code eventually (lol), but scaffolds are a nice way to learn &quot;The Rails Way&quot; and even with a 5+ year in production humongous monolith app we still use scaffold for starting out new features and it serves us very well. It also will help you to think RESTfully."}, {"owner": {"reputation": 3091, "user_id": 1290457, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/121ff7202cde3e23e2c73ff3078b5a15?s=128&d=identicon&r=PG", "display_name": "sandre89", "link": "https://stackoverflow.com/users/1290457/sandre89"}, "reply_to_user": {"reputation": 37, "user_id": 9448751, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rory O&#39;Connor", "link": "https://stackoverflow.com/users/9448751/rory-oconnor"}, "edited": false, "score": 0, "creation_date": 1520311726, "post_id": 49122574, "comment_id": 85252263, "body": "Also worth pointing out something that can confuse you: in your view, the <code>link_to</code> helper will use <code>method: :delete</code>, but it will actually (per convention) route the request to the <code>destroy</code> action in your controller :)"}], "tags": [], "owner": {"reputation": 3091, "user_id": 1290457, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/121ff7202cde3e23e2c73ff3078b5a15?s=128&d=identicon&r=PG", "display_name": "sandre89", "link": "https://stackoverflow.com/users/1290457/sandre89"}, "is_accepted": true, "score": 2, "last_activity_date": 1520303909, "creation_date": 1520303909, "answer_id": 49122574, "question_id": 49122348, "link": "https://stackoverflow.com/questions/49122348/actioncontrollerparametermissing-with-delete-action/49122574#49122574", "title": "ActionController::ParameterMissing with Delete Action", "body": "<p>It's nice that you're trying to write your controllers from scratch, but I think Rails is all about convention over configuration, and you should embrace that.</p>\n\n<p>This means that a good starting point for your controllers is checking how the scaffolded controllers look, since they follow Rails convention (I don't know if you knew that, but you can have rails generate the controller code automatically for you by using <code>rails g scaffold_controller NameOfYourModel</code>). </p>\n\n<p>If you look at the generated code (it will be very easy for you to understand given how for you've gotten), you'll see that we don't use strong parameters for the :destroy action (you're naming it wrong, per convention it should be <code>def destroy</code> instead of <code>def delete</code>). </p>\n\n<p>Inside that action, you'll simply find the model with <code>@task = Task.find(params[:id])</code>, so you don't use <code>task_params</code> there.</p>\n\n<p><code>task_params</code>'s goal is to ensure you have a safe, sanitized params before using it for mass assignment (like in <code>Task.create(task_params)</code>), but in the destroy action we don't need that, we just need to find the record and destroy it. </p>\n\n<p>Some extra tips: </p>\n\n<ul>\n<li><p>Open <code>http://localhost:3000/rails/info/routes</code>, it will help you a lot in the long run. It will give you the routes your <code>routes.rb</code> is generating, and it's named helper, which you can use to create links, and also tell you what params the link helpers expect and what params your controller will recieve when using that route. </p></li>\n<li><p>Read the <a href=\"http://guides.rubyonrails.org/routing.html\" rel=\"nofollow noreferrer\">Rails routing guide</a>. It's very valuable. For the code you posted above, you have a very standard CRUD (create, read, update, destroy), so the rails scaffold is perfect to get you started. In your routes file, instead of manually declaring each route, you'll just declare <code>resource :tasks</code>, and it will create all the reoutes for you (index, show, create, update, destroy). </p></li>\n</ul>\n\n<p>Rails is huge, and it will take a long time to master, but trust me, I've been coding on it for the last 6 years and it's awesome, worth every minute invested on it, and it compounds over time :) </p>\n"}], "owner": {"reputation": 37, "user_id": 9448751, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rory O&#39;Connor", "link": "https://stackoverflow.com/users/9448751/rory-oconnor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 400, "favorite_count": 0, "accepted_answer_id": 49122574, "answer_count": 2, "score": 1, "last_activity_date": 1520303909, "creation_date": 1520301972, "question_id": 49122348, "link": "https://stackoverflow.com/questions/49122348/actioncontrollerparametermissing-with-delete-action", "title": "ActionController::ParameterMissing with Delete Action", "body": "<p>I am fairly new to Rails and working on building my first app outside of courses like CodeAcademy. I am running into issues with Parameters + building a delete function. I can display all tasks on an index when I make the private tasks_params record look like this:</p>\n\n<pre><code>    private \n    def task_params \n        params.require(:task).permit(:name, :description, :due_date)\n    end\n</code></pre>\n\n<p>Clicking on the delete function and confirming it throws this: </p>\n\n<p><code>param is missing or the value is empty: task</code></p>\n\n<p>When I no longer \"require\" the :task param and instead \"permit\" it, like so:</p>\n\n<pre><code>private \ndef task_params \n    params.permit(:task, :name, :description, :due_date)\nend\n</code></pre>\n\n<p>My app returns:</p>\n\n<p><code>Couldn't find Task with 'id'=</code></p>\n\n<p>Below are the routes.rb file, Tasks_Controller.rb file, and index.html.erb files. Any help will be much appreciated.</p>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code> get 'signup' =&gt; 'users#new'\n  resources :users\n  get 'login' =&gt; 'sessions#new'\n  post 'login' =&gt; 'sessions#create'\n  delete 'logout' =&gt; 'sessions#destroy'\n  get 'tasks' =&gt; 'tasks#index'\n  get 'tasks/new' =&gt; 'tasks#new'\n  post 'tasks' =&gt; 'tasks#create'\n  delete 'tasks/:id' =&gt; 'tasks#delete'\n  get 'tasks/:id/edit' =&gt; 'tasks#edit' \n  put 'tasks/:id' =&gt; 'tasks#update'\nend\n</code></pre>\n\n<p><strong>Task_Controller.rb</strong>\nclass TasksController &lt; ApplicationController\n    def index\n        @task = Task.last(100)\n    end</p>\n\n<pre><code>def new\n    @task = Task.new\nend \n\ndef create\n    @task = Task.new(task_params) \n    if @task.save\n        redirect_to '/tasks' \n    else \n        render 'new' \n    end \nend\n\ndef edit\n    @task = Task.find(task_params[:id])\nend\n\ndef update\n    @task = Task.find(task_params[:id])\n    @task.update_attributes(task_params[:description])\n\n    redirect_to '/tasks'\n\nend\n\ndef delete\n    @task = Task.find(task_params[:id])\n    @task.delete\n\n    redirect_to tasks_path\nend\n\nprivate \ndef task_params \n    params.permit(:task, :name, :description, :due_date)\nend\n</code></pre>\n\n<p>end</p>\n\n<p><strong>index.html.erb</strong></p>\n\n<pre><code>&lt;h2&gt;Your Tasks&lt;/h2&gt;\n&lt;div class=\"tasks\"&gt;\n    &lt;div class=\"container\"&gt;\n        &lt;% @task.each do |task| %&gt; \n            &lt;div class=\"task\"&gt; \n                &lt;p&gt;Title: &lt;%= task.name %&gt;&lt;/p&gt; \n                &lt;p&gt;Description: &lt;%= task.description %&gt;&lt;/p&gt;\n                &lt;p&gt;Due Date: &lt;%= task.due_date %&gt;&lt;/p&gt;\n                &lt;%= link_to 'delete', task_path(task), \n                         method: :delete, \n                         data: { confirm: 'Are you sure?' } %&gt;  \n            &lt;/div&gt;\n        &lt;% end %&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby", "vagrant", "chef-infra", "databags"], "comments": [{"owner": {"reputation": 7851, "user_id": 1449206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/apmgM.png?s=128&g=1", "display_name": "Belogix", "link": "https://stackoverflow.com/users/1449206/belogix"}, "edited": false, "score": 0, "creation_date": 1520333410, "post_id": 49121476, "comment_id": 85262412, "body": "How are you testing this? With Test Kitchen?"}, {"owner": {"reputation": 9, "user_id": 4678090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09a3d3d9c95ebf799e203b5a1a13492e?s=128&d=identicon&r=PG&f=1", "display_name": "RayMontez", "link": "https://stackoverflow.com/users/4678090/raymontez"}, "reply_to_user": {"reputation": 7851, "user_id": 1449206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/apmgM.png?s=128&g=1", "display_name": "Belogix", "link": "https://stackoverflow.com/users/1449206/belogix"}, "edited": false, "score": 0, "creation_date": 1520351545, "post_id": 49121476, "comment_id": 85274460, "body": "Wi/ Vagrant.  Created a test VM wi/ Vagrant &amp; added the recipe to it&#39;s run list."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 4678090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09a3d3d9c95ebf799e203b5a1a13492e?s=128&d=identicon&r=PG&f=1", "display_name": "RayMontez", "link": "https://stackoverflow.com/users/4678090/raymontez"}, "edited": false, "score": 0, "creation_date": 1520438987, "post_id": 49152178, "comment_id": 85317537, "body": "I didn&#39;t use knife to create the databag, but rather just create a new &#39;data_bags&#39; directory &amp; created the JSON file inside the directory since I&#39;m using Vagrant to run it.  Is that wrong what I did?  Or can I still use knife to see if I can get the credentials?"}, {"owner": {"reputation": 15, "user_id": 6367413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff63f92af679583e914c7ea9eebd76a4?s=128&d=identicon&r=PG&f=1", "display_name": "ywainberg", "link": "https://stackoverflow.com/users/6367413/ywainberg"}, "reply_to_user": {"reputation": 9, "user_id": 4678090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09a3d3d9c95ebf799e203b5a1a13492e?s=128&d=identicon&r=PG&f=1", "display_name": "RayMontez", "link": "https://stackoverflow.com/users/4678090/raymontez"}, "edited": false, "score": 0, "creation_date": 1520764887, "post_id": 49152178, "comment_id": 85441834, "body": "chef need to recognize the databag ,can you see the databag in chef manage?"}, {"owner": {"reputation": 9, "user_id": 4678090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09a3d3d9c95ebf799e203b5a1a13492e?s=128&d=identicon&r=PG&f=1", "display_name": "RayMontez", "link": "https://stackoverflow.com/users/4678090/raymontez"}, "edited": false, "score": 0, "creation_date": 1520866937, "post_id": 49152178, "comment_id": 85480036, "body": "I&#39;m not using the Chef Manager as I&#39;m only running it on a Vagrant VM."}], "tags": [], "owner": {"reputation": 15, "user_id": 6367413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff63f92af679583e914c7ea9eebd76a4?s=128&d=identicon&r=PG&f=1", "display_name": "ywainberg", "link": "https://stackoverflow.com/users/6367413/ywainberg"}, "is_accepted": false, "score": 0, "last_activity_date": 1520426307, "creation_date": 1520426307, "answer_id": 49152178, "question_id": 49121476, "link": "https://stackoverflow.com/questions/49121476/error-new-to-chef/49152178#49152178", "title": "ERROR new to chef", "body": "<p>How did you set the databag?</p>\n\n<p>are you able to get the credential out using : </p>\n\n<pre><code>$ knife vault show nameOfVault nameOfItem\n</code></pre>\n\n<p>or </p>\n\n<pre><code>$ knife data bag show nameOfVault nameOfItem_keys\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9, "user_id": 4678090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09a3d3d9c95ebf799e203b5a1a13492e?s=128&d=identicon&r=PG&f=1", "display_name": "RayMontez", "link": "https://stackoverflow.com/users/4678090/raymontez"}, "edited": false, "score": 0, "creation_date": 1520460401, "post_id": 49161482, "comment_id": 85329674, "body": "Thank you.  Can&#39;t believe I missed that.  However, I think I may have spoken too soon on the data bag correctly loading.  When I use snmp3usercreds = data_bag(&#39;snmp3_user_creds&#39;), it loads, but I don&#39;t think this is correct as I should be using:  snmp3usercreds = data_bag(&#39;snmp3_user_creds&#39;, &#39;credentials&#39;).  When I do that, it&#39;s still not loading.  Any ideas?"}, {"owner": {"reputation": 9, "user_id": 4678090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09a3d3d9c95ebf799e203b5a1a13492e?s=128&d=identicon&r=PG&f=1", "display_name": "RayMontez", "link": "https://stackoverflow.com/users/4678090/raymontez"}, "edited": false, "score": 0, "creation_date": 1520461594, "post_id": 49161482, "comment_id": 85330181, "body": "I meant to say I should be using data_bag_item(&#39;snmp3_user_creds&#39;, &#39;credentials&#39;)."}], "tags": [], "owner": {"reputation": 7851, "user_id": 1449206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/apmgM.png?s=128&g=1", "display_name": "Belogix", "link": "https://stackoverflow.com/users/1449206/belogix"}, "is_accepted": false, "score": 0, "last_activity_date": 1520457963, "creation_date": 1520457963, "answer_id": 49161482, "question_id": 49121476, "link": "https://stackoverflow.com/questions/49121476/error-new-to-chef/49161482#49161482", "title": "ERROR new to chef", "body": "<p>Glad you have your data bag loading and indeed, with Test Kitchen you do not need to use knife to upload to Chef Server, as Test Kitchen uses Chef Zero / Solo.</p>\n\n<p>The issue you have here is that you have not correctly formatted reading from the data bag object once you have read. You need to do this instead:</p>\n\n<pre><code>ruby_block \"insert_line\" do\n  block do\n    file = Chef::Util::FileEdit.new('/var/lib/net-snmp/snmpd.conf')\n    file.insert_line_if_no_match(\"/www.example.com/\", \"createUser \n       #{snmp3usercreds['user']} \n       SHA #{snmp3usercreds['auth_pssword']} \n       AES #{snmp3usercreds['enc_password']} \")\n    file.write_file\n  end\nend\n</code></pre>\n\n<p>So, you will see I have changed <code>snmp3usercreds[user]</code> to <code>snmp3usercreds['user']</code> with quotes around the <code>user</code> to show it is a string (rather than a variable as is the case with your code).</p>\n"}], "owner": {"reputation": 9, "user_id": 4678090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09a3d3d9c95ebf799e203b5a1a13492e?s=128&d=identicon&r=PG&f=1", "display_name": "RayMontez", "link": "https://stackoverflow.com/users/4678090/raymontez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1520885011, "creation_date": 1520295008, "last_edit_date": 1520885011, "question_id": 49121476, "link": "https://stackoverflow.com/questions/49121476/error-new-to-chef", "title": "ERROR new to chef", "body": "<p>New to Chef, bare wi/ me.  Building my cookbook.</p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "ajax", "fullcalendar"], "comments": [{"owner": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "edited": false, "score": 0, "creation_date": 1520297431, "post_id": 49121270, "comment_id": 85249047, "body": "first thing: you include <code>require fullcalendar</code> but your filname is full_calendar.js ?"}, {"owner": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "edited": false, "score": 0, "creation_date": 1520297602, "post_id": 49121270, "comment_id": 85249081, "body": "You should check the response of the ajax call. What is the return of /events/new . The error <code>Uncaught SyntaxError: Unexpected token : at DOMEval</code> I see often, when the parsing of JSON fails. Please tell us what the network tab of your inspector says."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7585834"}, "reply_to_user": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "edited": false, "score": 0, "creation_date": 1520300434, "post_id": 49121270, "comment_id": 85249815, "body": "So, &#39;full_calender.js&#39; is the file i&#39;m using that writes the above javascript. &#39;fullcalender.js&#39; is the file that was imported with the FullCalendar gem. After tinkering with it for a while I did get rid of that error, and now i&#39;m getting &#39;VM874:1 Uncaught SyntaxError: Unexpected token &lt;&#39; lol"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7585834"}, "reply_to_user": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "edited": false, "score": 0, "creation_date": 1520304297, "post_id": 49121270, "comment_id": 85250629, "body": "I edited this question to be more descriptive."}], "owner": {"user_type": "does_not_exist", "display_name": "user7585834"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 401, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1520304242, "creation_date": 1520293412, "last_edit_date": 1520304242, "question_id": 49121270, "link": "https://stackoverflow.com/questions/49121270/rails-fullcalendar-jquery-uncaught-syntaxerror-unexpected-token", "title": "Rails/FullCalendar/JQuery Uncaught SyntaxError: Unexpected token :", "body": "<p>I'm working on trying to integrate a calendar into my RoR web application using FullCalendar. </p>\n\n<p>I've imported jQuery, Moment, and FullCalendar. Basically, what i'm trying to do is make a pop up appear that lets the user add an event to the calendar whenever they click on a date. </p>\n\n<p>I followed this video:</p>\n\n<p><a href=\"https://www.youtube.com/watch?v=NiTLuPqvt58&amp;t=349s\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=NiTLuPqvt58&amp;t=349s</a></p>\n\n<p>Here are the errors i'm getting:</p>\n\n<p><a href=\"https://i.stack.imgur.com/j8BFO.png\" rel=\"nofollow noreferrer\">Errors</a></p>\n\n<p>Using 'puts' and 'console.log' i've followed my route down to the Events controller new method. I'm not sure what i'm supposed to be rendering here. Also, date_range_picker could be a jQuery function or something from FullCalendar not sure.</p>\n\n<p>Here's code:</p>\n\n<p><strong>full_calendar.js</strong></p>\n\n<pre><code>    var intialize_calendar;\ninitialize_calendar = function() {\n  $('.calendar').each(function() {\n    var calendar = $(this);\n    calendar.fullCalendar({\n    header: {\n      left: 'prev,next,today',\n      center: 'title',\n      right: 'month, agendaWeek, agendaDay'\n    },\n    selectable: true,\n    selectHelper: true,\n    editable: true,\n    eventLimit: true,\n\n    select: function(start, end) {\n      $.getScript(\"/events/new\", function() {\n\n        $(\"#event_date_range\").val(moment(start).format(\"MM/DD/YYYY HH:mm\") + ' - ' + moment(end).format(\"MM/DD/YYYY HH:mm\"));\n        date_range_picker();\n        $(\".start_hidden\").val(moment(start).format(\"YYYY-MM-DD HH:mm\"));\n        $(\".end_hidden\").val(moment(start).format(\"YYYY-MM-DD HH:mm\"));\n\n      })\n      calendar.fullCalendar(\"unselect\");\n    }\n  });\n});\n}\n\n$(document).on('turbolinks:load', initialize_calendar)\n</code></pre>\n\n<p><strong>events_controller.rb</strong></p>\n\n<pre><code>class EventsController &lt; ApplicationController\n  def new\n    @event.Event.new\n  end\nend\n</code></pre>\n\n<p><strong>new.js.erb</strong></p>\n\n<pre><code>$('#remote_container').html('&lt;%= j render (\"new\") %&gt;');\n$('#new_event').modal('show');\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1520293356, "post_id": 49121241, "comment_id": 85247956, "body": "It is behaving as expected, you need to specify it to render the output in js format"}, {"owner": {"reputation": 91, "user_id": 3246623, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/af3b74b6e68554facb164ce883277068?s=128&d=identicon&r=PG&f=1", "display_name": "rado", "link": "https://stackoverflow.com/users/3246623/rado"}, "reply_to_user": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1520293566, "post_id": 49121241, "comment_id": 85248027, "body": "but if I put same render into action itself, js format is being rendered. Why? I don&#39;t see any info about this in docs"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1520293724, "post_id": 49121241, "comment_id": 85248065, "body": "Because you need to wrap it in a <code>respond_to</code> block or the default format will be rendered. Its not really that mysterious."}, {"owner": {"reputation": 91, "user_id": 3246623, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/af3b74b6e68554facb164ce883277068?s=128&d=identicon&r=PG&f=1", "display_name": "rado", "link": "https://stackoverflow.com/users/3246623/rado"}, "edited": false, "score": 0, "creation_date": 1520294181, "post_id": 49121241, "comment_id": 85248185, "body": "but request format is set to js, why it should be default?"}, {"owner": {"reputation": 91, "user_id": 3246623, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/af3b74b6e68554facb164ce883277068?s=128&d=identicon&r=PG&f=1", "display_name": "rado", "link": "https://stackoverflow.com/users/3246623/rado"}, "edited": false, "score": 0, "creation_date": 1520295331, "post_id": 49121241, "comment_id": 85248500, "body": "I want template format based on request format <a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html#the-formats-option\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 3246623, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/af3b74b6e68554facb164ce883277068?s=128&d=identicon&r=PG&f=1", "display_name": "rado", "link": "https://stackoverflow.com/users/3246623/rado"}, "edited": false, "score": 0, "creation_date": 1520295397, "post_id": 49121463, "comment_id": 85248524, "body": "I need render html and js both. And I have both templates with same name: joxi.net/ZrJ8Meu9KwjD2j"}, {"owner": {"reputation": 4429, "user_id": 102133, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/561a3a55352fe6a5343e541a6894b541?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/102133/ben"}, "reply_to_user": {"reputation": 91, "user_id": 3246623, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/af3b74b6e68554facb164ce883277068?s=128&d=identicon&r=PG&f=1", "display_name": "rado", "link": "https://stackoverflow.com/users/3246623/rado"}, "edited": false, "score": 0, "creation_date": 1520296599, "post_id": 49121463, "comment_id": 85248881, "body": "I&#39;ve edited my answer. I believe that you don&#39;t want to render partial from a controller, so if you want to respond to both html and js reponse, you need alert.(js.erb + html.slim) templates, and you share your partial between both"}], "tags": [], "owner": {"reputation": 4429, "user_id": 102133, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/561a3a55352fe6a5343e541a6894b541?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/102133/ben"}, "is_accepted": false, "score": 0, "last_activity_date": 1520328349, "last_edit_date": 1520328349, "creation_date": 1520294897, "answer_id": 49121463, "question_id": 49121241, "link": "https://stackoverflow.com/questions/49121241/rails-render-within-before-action-incorrect-format/49121463#49121463", "title": "Rails render within before_action incorrect format", "body": "<p>I won't bet you can render a partial from a controller, think about sharing what you want to display between your two responses types.</p>\n\n<p>You'd need :</p>\n\n<ul>\n<li><code>_alert.html.slim</code> (contains the content you want to display)</li>\n<li><code>alert.html.slim</code> (only contains a call to your partial, is used for html responses)</li>\n<li><code>alert.js.rb</code> (contains a call to your partial that you can manipulate via jq/js, is used on js responses)</li>\n</ul>\n\n<p>In js.erb :</p>\n\n<pre><code>$(\"your_selector\").html(\"&lt;%= j(render partial: \"/layouts/alert\", locals: {\u2026}) %&gt;\");\n</code></pre>\n\n<p><sub><sup>(Wrap your render with <code>j(\u2026)</code>, short for <code>escape_javascript</code>, needed</sub></sup></p>\n\n<p>In html.slim :</p>\n\n<pre><code>&lt;%= render partial: \"/layouts/alert\", locals: {\u2026} %&gt;\n</code></pre>\n\n<p>You'll set your controller as below :</p>\n\n<pre><code>respond_to do |format|\n  format.html { render template: 'layouts/alert' } # will pick alert.html.slim template\n  format.js { render template: 'layouts/alert' } # will pick alert.js.erb template\nend\n</code></pre>\n\n<p>Template based should work too with this setup, using the following :</p>\n\n<pre><code>render formats: [:html, :js]\n</code></pre>\n\n<p>This pattern got quite obsolete, but this how you can do it with rails via a controller</p>\n"}], "owner": {"reputation": 91, "user_id": 3246623, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/af3b74b6e68554facb164ce883277068?s=128&d=identicon&r=PG&f=1", "display_name": "rado", "link": "https://stackoverflow.com/users/3246623/rado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 255, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1520328349, "creation_date": 1520293210, "question_id": 49121241, "link": "https://stackoverflow.com/questions/49121241/rails-render-within-before-action-incorrect-format", "title": "Rails render within before_action incorrect format", "body": "<p>I'm trying to render template within <code>before_action</code> and it's being rendered with html format. Request is in :js format.</p>\n\n<pre><code>def check_destroy\n  p request.format\n  render partial: 'layouts/alert', locals: {type: 'info', message: 'my message from check destroy', title: 'my title'}\nend\n</code></pre>\n\n<p>Log output:</p>\n\n<pre><code>:js\nRendered layouts/_alert.html.slim (5.3ms)\n</code></pre>\n\n<p>If I set <code>respond_to :js</code> before render everything works well.</p>\n\n<pre><code>Rendered layouts/_alert.js.erb (0.7ms)\n</code></pre>\n\n<p>Any ideas what can be wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "bundler", "ruby-on-rails-5.1"], "comments": [{"owner": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "edited": false, "score": 0, "creation_date": 1520298072, "post_id": 49121176, "comment_id": 85249214, "body": "Especially in the beginning you should avoid forking and changing working gems."}, {"owner": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "edited": false, "score": 0, "creation_date": 1520298091, "post_id": 49121176, "comment_id": 85249216, "body": "Restarted server ?"}, {"owner": {"reputation": 133, "user_id": 2577813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29d66c731fdebe31e2678db25f52661c?s=128&d=identicon&r=PG", "display_name": "mepatterson", "link": "https://stackoverflow.com/users/2577813/mepatterson"}, "reply_to_user": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "edited": false, "score": 1, "creation_date": 1520365383, "post_id": 49121176, "comment_id": 85282577, "body": "To be clear, the point of the question was a strange behavior I&#39;m seeing in a local Rails app using a local gem via the <code>path</code> parameter in the Gemfile. When building a new gem to work against a Rails app&#39;s API endpoints (that I also built), it&#39;s helpful to be able to hook the gem up via the app&#39;s Gemfile using <code>path</code> instead of constantly having to push it to a remote server. And that&#39;s when I discovered that my app-side configuration wasn&#39;t taking, but would work fine if not using the <code>path</code> in Gemfile. That&#39;s what is confusing me... tried restarting server, tried killing Spring, etc..."}, {"owner": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "edited": false, "score": 0, "creation_date": 1520377606, "post_id": 49121176, "comment_id": 85288404, "body": "ok thats weird. Can you show your development.rb and Gemfile ?"}], "owner": {"reputation": 133, "user_id": 2577813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29d66c731fdebe31e2678db25f52661c?s=128&d=identicon&r=PG", "display_name": "mepatterson", "link": "https://stackoverflow.com/users/2577813/mepatterson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1520292731, "creation_date": 1520292731, "question_id": 49121176, "link": "https://stackoverflow.com/questions/49121176/configuration-blocks-in-a-rails-initializer-dont-work-with-local-path-gems", "title": "Configuration blocks in a Rails initializer don&#39;t work with local-path gems (?)", "body": "<p>In my Rails app Gemfile, I have <code>gem 'myfancygem', path: '/Users/matt/myfancygem'</code></p>\n\n<p>This works as you'd expect.</p>\n\n<p>I then added a configuration block feature to the gem, a la <a href=\"https://robots.thoughtbot.com/mygem-configure-block\" rel=\"nofollow noreferrer\">https://robots.thoughtbot.com/mygem-configure-block</a> (and many others out there that are slight variants on this)</p>\n\n<p>I created an initializer myfancygem.rb in my Rails app with the standard:\n<code>\nMyfancygem.configure do |config|\n  config.favorite_color = 'red'\nend\n</code></p>\n\n<p>When running my local app (either in rails console, or rails server), that favorite_color does NOT get set. It remains at the default specified inside the gem (<code>nil</code>)</p>\n\n<p>But if I push that gem to rubygems and load it normally (i.e. without the <code>path</code> bit in the Gemfile), the initializer config works as expected.</p>\n\n<p>Just in case I was doing something nutty in my gem, I git cloned the latest copy of the ReactOnRails gem, which does pretty much the same configuration approach. Then I pointed my Gemfile at the local ReactOnRails via <code>path</code>. Guess what? SAME PROBLEM. The initializer I setup for my Rails app for ReactOnRails seems to be ignored. I even sprinkled <code>puts</code> statements into the initializers to prove they were getting executed and the configuration was being set, but then it would reset back to defaults right after <code>Rails.application.initialize!</code> in <code>environment.rb</code></p>\n\n<p>Ummm... what the heck?</p>\n\n<p>Is this a known bug in Rails? Or Bundler? or something? Or is there some gotcha I'm missing? Or something I could have done wrong that I'm not realizing? </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1520317672, "post_id": 49120794, "comment_id": 85254083, "body": "Issue not clear. If you had <code>dog = cat = Animal.new(&quot;Woof Woof&quot;)</code>, then how would you expect the output to be? <code>dog does ...</code>, <code>cat does ...</code>, <code>dog cat does ...</code>, <code>cat dog does ...</code>, <code>dogcat does ...</code>, or, something else?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1520326120, "post_id": 49120794, "comment_id": 85257927, "body": "Only classes and modules store the <a href=\"http://ruby-doc.org/core-2.5.0/Module.html#method-i-name\" rel=\"nofollow noreferrer\"><code>name</code></a> of the (first) constant they were assigned to. Other objects are not aware of the variable(s) or constant(s) they were (possibly) assigned to."}], "answers": [{"tags": [], "owner": {"reputation": 3351, "user_id": 2731253, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf88a5179da66f2e54012dd30b6f31cb?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/2731253/james"}, "is_accepted": false, "score": 1, "last_activity_date": 1520290656, "creation_date": 1520290656, "answer_id": 49120862, "question_id": 49120794, "link": "https://stackoverflow.com/questions/49120794/getting-object-name-in-ruby/49120862#49120862", "title": "Getting object name in ruby", "body": "<p>This is a code misunderstanding, no big deal. <code>Animal</code> IS the object, that's why it will always print <code>Animal does Woof Woof</code>. You know that <code>Animal</code> is the object because you've declared it: <code>class Animal</code>, a class is an object.</p>\n\n<p><code>dog</code> is an instance of that <code>Animal</code> class. If you want to print the instance name, then you need to actually create an attribute, just like you've done with <code>@noise</code>. So, one example might be:</p>\n\n<pre><code>def initialize(noise, name) \n  @noise = noise\n  @name = name\nend\n\ndog = Animal.new(\"Woof Woof\", \"dog\")\n</code></pre>\n\n<p>Note you'll probably want to not pass <code>params</code> individually but in a <code>params</code> hash, so it becomes clearer to read.</p>\n"}, {"tags": [], "owner": {"reputation": 1777, "user_id": 3353157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6168a2c2f5e3582addf6d9d70ce13749?s=128&d=identicon&r=PG", "display_name": "Peter Camilleri", "link": "https://stackoverflow.com/users/3353157/peter-camilleri"}, "is_accepted": true, "score": 4, "last_activity_date": 1520294756, "creation_date": 1520294756, "answer_id": 49121443, "question_id": 49120794, "link": "https://stackoverflow.com/questions/49120794/getting-object-name-in-ruby/49121443#49121443", "title": "Getting object name in ruby", "body": "<p>To be clear, Animal is the name of the class you have created. That is why when you </p>\n\n<pre><code>puts \" #{self.class} etc... \"\n</code></pre>\n\n<p>the text Animal appears.</p>\n\n<p>Now in your example, cat and dog are the names of variables. These are nothing more than references to the objects you create in the lines:</p>\n\n<pre><code>dog = Animal.new(\"Woof Woof\")\ncat = Animal.new(\"Meow Meow\")\n</code></pre>\n\n<p>The variable may be called dog or cat, but the class remains Animal. To my knowledge, there is no good way to get name of a variable, short of some really convoluted introspection tools.</p>\n\n<p>On the other hand: If you simply want your animals to have names, consider adding a name attribute.</p>\n\n<pre><code>class Animal\n  def initialize(name, noise)\n    @name = name\n    @noise = noise\n  end\n\n  def say\n    puts \"#{@name} does #{@noise}\"\n  end\nend\n\ndog = Animal.new(\"Dog\", \"Woof Woof\")\ncat = Animal.new(\"Cat\", \"Meow Meow\")\n\ndog.say\ncat.say\n</code></pre>\n"}], "owner": {"reputation": 193, "user_id": 5405582, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a648bfb0ead56e99080fa674d2879e4f?s=128&d=identicon&r=PG&f=1", "display_name": "Punya", "link": "https://stackoverflow.com/users/5405582/punya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 305, "favorite_count": 0, "accepted_answer_id": 49121443, "answer_count": 2, "score": 1, "last_activity_date": 1520294756, "creation_date": 1520290239, "last_edit_date": 1520290411, "question_id": 49120794, "link": "https://stackoverflow.com/questions/49120794/getting-object-name-in-ruby", "title": "Getting object name in ruby", "body": "<pre><code>class Animal\n\n    def initialize(noise)\n        @noise = noise\n    end\n\n    def say\n        puts \"#{self.class} does #{@noise}\"\n    end\n\nend\n\ndog = Animal.new(\"Woof Woof\")\ncat = Animal.new(\"Meow Meow\")\n\ndog.say\ncat.say\n</code></pre>\n\n<p>How can I print <code>dog does woof woof</code> instead of <code>Animal does Woof Woof</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb"], "comments": [{"owner": {"reputation": 2202, "user_id": 3607039, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8Bj3I.jpg?s=128&g=1", "display_name": "Bustikiller", "link": "https://stackoverflow.com/users/3607039/bustikiller"}, "edited": false, "score": 0, "creation_date": 1520290006, "post_id": 49120643, "comment_id": 85246905, "body": "Are you sure you are using the same gemset where you installed the gem?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 2202, "user_id": 3607039, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8Bj3I.jpg?s=128&g=1", "display_name": "Bustikiller", "link": "https://stackoverflow.com/users/3607039/bustikiller"}, "edited": false, "score": 0, "creation_date": 1520290219, "post_id": 49120643, "comment_id": 85246982, "body": "@Bustikiller I&#39;m using rbenv not gemsets. but it&#39;s been solved."}], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 0, "last_activity_date": 1520290089, "creation_date": 1520290089, "answer_id": 49120768, "question_id": 49120643, "link": "https://stackoverflow.com/questions/49120643/cannot-require-mongo-gem/49120768#49120768", "title": "Cannot require mongo gem", "body": "<p>Fixed by running <code>spring stop</code>. </p>\n"}], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 49120768, "answer_count": 1, "score": 1, "last_activity_date": 1520290089, "creation_date": 1520289407, "last_edit_date": 1520289723, "question_id": 49120643, "link": "https://stackoverflow.com/questions/49120643/cannot-require-mongo-gem", "title": "Cannot require mongo gem", "body": "<p>I am having a really wierd situation. I want to install the <a href=\"https://github.com/mongodb/mongo-ruby-driver\" rel=\"nofollow noreferrer\">mongo</a> gem. So I follow the instructionns, adding this to my Gemfile.</p>\n\n<blockquote>\n  <p>gem 'mongo', '~> 2.4'</p>\n</blockquote>\n\n<p>This is the typical approach and has worked in all other cases. When I try <code>require 'mongo'</code> from rails console, though, I get an error:</p>\n\n<blockquote>\n  <p>LoadError: cannot load such file -- mongo</p>\n</blockquote>\n\n<p>I did run <code>bundle install</code>. I have no idea what's differennt between this gem and my other gems that's causing it not to work. We are using Rails 4. Any advice is appreciated. </p>\n"}, {"tags": ["python", "ruby", "sockets", "unix-socket"], "answers": [{"tags": [], "owner": {"reputation": 6920, "user_id": 9447571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61737e0b179eb5d8e6078b6e72ccb776?s=128&d=identicon&r=PG", "display_name": "filbranden", "link": "https://stackoverflow.com/users/9447571/filbranden"}, "is_accepted": true, "score": 2, "last_activity_date": 1520289123, "creation_date": 1520289123, "answer_id": 49120591, "question_id": 49120374, "link": "https://stackoverflow.com/questions/49120374/python-unix-socket-server-recieves-same-data-from-client-multiple-times/49120591#49120591", "title": "Python unix socket server recieves same data from client multiple times", "body": "<p>The problem is with the <code>while True:</code> at the start of your <code>listenToClient</code> method. (If you just remove that line, it should work as you expect it to.)</p>\n\n<p>You get a datagram already in <code>listen</code>, so your <code>listenToClient</code> only needs to handle it and return data to the other end. (In that way, it should probably be called <code>handleClientRequest</code> or <code>respondToClient</code> or similar, that might be more appropriate.)</p>\n\n<p>With the <code>while True:</code> in place, it's going back to the start of that loop, where <code>datagram</code> is still set to the same value, so it's trying to reply to the other side once again. (Those threads probably get stuck there, since the other side stopped receiving.)</p>\n\n<p>I hope that helps!</p>\n"}], "owner": {"reputation": 77, "user_id": 5050194, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/660ade07d79fdb25acf47c2bf44a0244?s=128&d=identicon&r=PG&f=1", "display_name": "jealrockone", "link": "https://stackoverflow.com/users/5050194/jealrockone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 49120591, "answer_count": 1, "score": 1, "last_activity_date": 1520289123, "creation_date": 1520287968, "last_edit_date": 1520288440, "question_id": 49120374, "link": "https://stackoverflow.com/questions/49120374/python-unix-socket-server-recieves-same-data-from-client-multiple-times", "title": "Python unix socket server recieves same data from client multiple times", "body": "<p>I am trying to communicate between ruby and python through unix sockets, and i need multithreaded python server to respond to many ruby clients. All work fine except 1 thing, that i send message from client only once, but the server recieves it 2 times somehow. </p>\n\n<p>What maybe the problem?</p>\n\n<p>Here's my python server code:</p>\n\n<pre><code>import socket\nimport os\nimport threading\nimport time\nimport logging\n\nlogger = logging.getLogger(__name__)\nlogger.setLevel(logging.DEBUG)\n\n# create a file handler\nhandler = logging.FileHandler('python_server.log')\nhandler.setLevel(logging.DEBUG)\n\n# create a logging format\nformatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')\nhandler.setFormatter(formatter)\n\n# add the handlers to the logger\nlogger.addHandler(handler)\n\nclass ThreadedServer(object):\n\n    def __init__(self, socket_path):\n        if os.path.exists(socket_path):\n            os.remove(socket_path)\n\n        logger.info(\"Opening socket...\")\n        self.server = socket.socket(socket.AF_UNIX, socket.SOCK_DGRAM)\n        self.server.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)\n        self.server.bind(socket_path)\n\n    def listen(self):\n        size = 1024\n        logger.info(\"Listening...\")\n        try:\n            while True:\n                datagram, address = self.server.recvfrom(1024)\n                threading.Thread(target = self.listenToClient,args = (self.server, datagram, address, logger)).start()\n        finally:\n            logger.info(\"Shutting down...\")\n            self.server.close()\n            os.remove(\"/tmp/python_socket_server\")\n            logger.info(\"Done\")\n\n    def listenToClient(self, server, datagram, address, logger_obj):\n        while True:\n            try:\n                if datagram:\n                    logger_obj.info('Recieved message from client %s', address)\n                    time.sleep(5)\n                    server.sendto(bytes(\"I hear you buddy\", 'UTF-8'), address)\n                    logger_obj.info('Responded to client %s', address)\n                else:\n                    raise ValueError('Client disconnected')\n            except:\n                return False\n\nif __name__ == \"__main__\":\n    socket_path = \"/tmp/python_socket_server\"\n    ThreadedServer(socket_path).listen()\n</code></pre>\n\n<p>My ruby client:</p>\n\n<pre><code>require \"socket\"\n\nSERVER_SOCKET = \"/tmp/python_socket_server\"\n\nthreads = []\n\n5.times do \n    threads &lt;&lt; Thread.new do \n        socket = Socket.new :UNIX, :DGRAM\n        socket.bind Socket.pack_sockaddr_un(\"\")\n\n        socket.send(\"Hello server, can you hear me?\\n\", 0, Socket.pack_sockaddr_un(SERVER_SOCKET))\n        puts socket.recvfrom(1024)\n\n        socket.close\n    end\nend\n\nthreads.each { |thr| thr.join }\n</code></pre>\n\n<p>And the log looks like this:</p>\n\n<pre><code>2018-03-05 22:08:43,566 - __main__ - INFO - Opening socket...\n2018-03-05 22:08:43,567 - __main__ - INFO - Listening...\n2018-03-05 22:08:45,572 - __main__ - INFO - Recieved message from client b'\\x00025c0'\n2018-03-05 22:08:45,573 - __main__ - INFO - Recieved message from client b'\\x00025c1'\n2018-03-05 22:08:45,573 - __main__ - INFO - Recieved message from client b'\\x00025c2'\n2018-03-05 22:08:45,574 - __main__ - INFO - Recieved message from client b'\\x00025c3'\n2018-03-05 22:08:45,574 - __main__ - INFO - Recieved message from client b'\\x00025c4'\n2018-03-05 22:08:50,574 - __main__ - INFO - Responded to client b'\\x00025c3'\n2018-03-05 22:08:50,575 - __main__ - INFO - Recieved message from client b'\\x00025c3'\n2018-03-05 22:08:50,577 - __main__ - INFO - Responded to client b'\\x00025c1'\n2018-03-05 22:08:50,577 - __main__ - INFO - Recieved message from client b'\\x00025c1'\n2018-03-05 22:08:50,577 - __main__ - INFO - Responded to client b'\\x00025c2'\n2018-03-05 22:08:50,577 - __main__ - INFO - Recieved message from client b'\\x00025c2'\n2018-03-05 22:08:50,578 - __main__ - INFO - Responded to client b'\\x00025c0'\n2018-03-05 22:08:50,578 - __main__ - INFO - Recieved message from client b'\\x00025c0'\n2018-03-05 22:08:50,579 - __main__ - INFO - Responded to client b'\\x00025c4'\n2018-03-05 22:08:50,579 - __main__ - INFO - Recieved message from client b'\\x00025c4'\n2018-03-05 22:08:56,437 - __main__ - INFO - Shutting down...\n2018-03-05 22:08:56,438 - __main__ - INFO - Done\n</code></pre>\n"}, {"tags": ["ruby", "intellij-idea"], "comments": [{"owner": {"reputation": 2886, "user_id": 2960034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2155e960e7c2119d24d00cffcfa03368?s=128&d=identicon&r=PG&f=1", "display_name": "y.bedrov", "link": "https://stackoverflow.com/users/2960034/y-bedrov"}, "edited": false, "score": 1, "creation_date": 1520318465, "post_id": 49119886, "comment_id": 85254370, "body": "<a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/360000140644-cached-file-types-for-file-names\" rel=\"nofollow noreferrer\">intellij-support.jetbrains.com/hc/en-us/community/posts/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1447, "user_id": 6020034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/20fc6f63f649759b7b7c10ca5e7adef0?s=128&d=identicon&r=PG&f=1", "display_name": "mdo123", "link": "https://stackoverflow.com/users/6020034/mdo123"}, "is_accepted": true, "score": 1, "last_activity_date": 1520361006, "creation_date": 1520361006, "answer_id": 49137680, "question_id": 49119886, "link": "https://stackoverflow.com/questions/49119886/how-to-delete-a-cached-file-template-in-intellij/49137680#49137680", "title": "How to delete a cached file template in Intellij", "body": "<p>For those not able to access the link to the solution posted as a comment by @y.bedrov</p>\n\n<p>The provided solution was to check the following</p>\n\n<blockquote>\n  <p>In Settings(Preferences) | Editor | <a href=\"https://www.jetbrains.com/help/idea/file-types.html\" rel=\"nofollow noreferrer\">File Types</a> check all the\n  registered patterns for Files Opened in Associated Applications:</p>\n</blockquote>\n\n<p>As I accessed this screen and scrolled to the bottom I found my file.  I removed the file from the list and now my issue is solved. I  can now create this file and have it open in Intellij!</p>\n\n<p><a href=\"https://i.stack.imgur.com/Q0JIk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Q0JIk.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1447, "user_id": 6020034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/20fc6f63f649759b7b7c10ca5e7adef0?s=128&d=identicon&r=PG&f=1", "display_name": "mdo123", "link": "https://stackoverflow.com/users/6020034/mdo123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 49137680, "answer_count": 1, "score": 1, "last_activity_date": 1520361006, "creation_date": 1520285853, "last_edit_date": 1520291452, "question_id": 49119886, "link": "https://stackoverflow.com/questions/49119886/how-to-delete-a-cached-file-template-in-intellij", "title": "How to delete a cached file template in Intellij", "body": "<p>I'm trying to work on a Ruby project in Intellij.  I tried creating a new file using the <code>Ruby Class Template</code> file type.  However, for some reason when I open the file it opens the file with the application that is associated with the <strong>.rb</strong> extension in my OS config, instead of opening it in Intellij.</p>\n\n<p><strong>EDIT</strong>:</p>\n\n<blockquote>\n  <p>Although I still have the issue described below I figured it was worth mentioning that I was able to get <code>Ruby Class Template</code> types working by creating a new empty Ruby project first then importing\n  my Ruby project as a new module in the Project Settings. See <em>Importing a\n  module and configuring a separate SDK for it</em> ~\n  <a href=\"https://www.jetbrains.com/help/idea/opening-a-rails-project-in-intellij-idea.html\" rel=\"nofollow noreferrer\">source</a></p>\n</blockquote>\n\n<p><strong>END OF EDIT</strong></p>\n\n<p>I figured out that if I just create a file using the basic <code>File</code> type in Intellij and name it with the <strong>.rb</strong> extension then I can open it in Intellij.</p>\n\n<p>So after I figured this out I tried deleting the original file I created with the <code>Ruby Class Template</code> type.  This time I created it as a plain <code>File</code> type and gave it the .rb extension.  But, Intellij still doesn't associate this as a Ruby file (it still has a ? mark symbol next to the file).  I tried creating  multiple variations of <strong>*.rb</strong> file names and they all work, which confirms the issue is only with this one particular file name.  </p>\n\n<p>So I can only think that Intellij has some cached reference of the file name and it's template file type.</p>\n\n<p>I tried searching by <code>%project_name%</code> and deleting any results under</p>\n\n<p><a href=\"https://intellij-support.jetbrains.com/hc/en-us/articles/206544519-Directories-used-by-the-IDE-to-store-settings-caches-plugins-and-logs\" rel=\"nofollow noreferrer\">source</a>   <code>SYSTEM DRIVE&gt;\\Users\\&lt;USER ACCOUNT NAME&gt;\\.&lt;PRODUCT&gt;&lt;VERSION&gt;</code></p>\n\n<p>But that didn't work.  I also renamed the cache folder and restarted Intellij, to no avail.</p>\n\n<p>Aside from a complete reinstall does anyone have any advice on if I'm going in the right direction, and if so, where I might find this hidden cache reference?</p>\n"}, {"tags": ["ruby", "hashmap", "graph-theory"], "answers": [{"comments": [{"owner": {"reputation": 415, "user_id": 6795280, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/10208351077107122/picture?type=large", "display_name": "Wolf_Tru", "link": "https://stackoverflow.com/users/6795280/wolf-tru"}, "edited": false, "score": 0, "creation_date": 1520355175, "post_id": 49120049, "comment_id": 85277003, "body": "Thank you so much, you&#39;ve saved me from another headache. I was told that ruby code doesn&#39;t work the way I wanted and that i should go back and rethink my design. but this little modification you offered makes everything run smoothly.   if you have some time could you elaborate on this part and how <code>#&lt;#{self.class}:0x%x #{self.name}&gt;&quot; % object_id</code> changes inspect&#39;s recursive nature?"}, {"owner": {"reputation": 415, "user_id": 6795280, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/10208351077107122/picture?type=large", "display_name": "Wolf_Tru", "link": "https://stackoverflow.com/users/6795280/wolf-tru"}, "edited": false, "score": 0, "creation_date": 1520355671, "post_id": 49120049, "comment_id": 85277329, "body": "mainly the <code>:0x%x </code> confuses me.   also i tried <code>&quot;string: % object_id</code> and it just returned string; this too confuses me."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "reply_to_user": {"reputation": 415, "user_id": 6795280, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/10208351077107122/picture?type=large", "display_name": "Wolf_Tru", "link": "https://stackoverflow.com/users/6795280/wolf-tru"}, "edited": false, "score": 0, "creation_date": 1520356099, "post_id": 49120049, "comment_id": 85277594, "body": "@WolfgangTruong <code>&quot;%x&quot; % y</code> formats y as a hexadecimal string. I chose this format arbitrarily because it kinda matches up with the default  <code>inspect</code> implementation. But you can define the string any way you want as long as it doesn&#39;t end up <code>inspect</code>ing <code>self.film_actor_hash</code>"}], "tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": true, "score": 1, "last_activity_date": 1520286522, "creation_date": 1520286522, "answer_id": 49120049, "question_id": 49119539, "link": "https://stackoverflow.com/questions/49119539/how-to-set-references-to-nodes-in-this-example/49120049#49120049", "title": "how to set references to nodes in this example", "body": "<p>Your code is actually working correctly. In Ruby, \"the node itself\" <em>is</em> its reference. There's no way to access the underlying object directly, so your code is just passing around pointers.</p>\n\n<p>The problem is here:</p>\n\n<blockquote>\n  <p>I should add if you just copy and paste my code into irb or pry you\u2019ll see what i mean.</p>\n</blockquote>\n\n<p>When you evaluate an expression in irb/pry, Ruby calls <code>inspect</code> on the result and prints it to console. The problem is that <code>inspect</code> is recursive i.e. when you inspect a custom class or hash, it also <code>inspect</code>s the contents of the class/hash. Since all of your objects reference each other through their instance variables, you end up in an infinite recursive loop. I'm guessing <code>inspect</code> eventually hits a stack limit and gives up.</p>\n\n<p>Observe the difference:</p>\n\n<pre><code>sixteen.film_actor_hash.size # 2 elements in the hash\nsixteen.film_actor_hash.inspect.size # 18743520 characters in its string representation!\n</code></pre>\n\n<p>Technically there's nothing you need to fix as long you don't need to <code>inspect</code> your objects. But for sanity you can just redefine <code>inspect</code> to not be recursive:</p>\n\n<pre><code>class Node\n  def inspect\n    \"#&lt;#{self.class}:0x%x #{self.name}&gt;\" % object_id\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 415, "user_id": 6795280, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/10208351077107122/picture?type=large", "display_name": "Wolf_Tru", "link": "https://stackoverflow.com/users/6795280/wolf-tru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 49120049, "answer_count": 1, "score": 1, "last_activity_date": 1520286522, "creation_date": 1520284281, "last_edit_date": 1520285631, "question_id": 49119539, "link": "https://stackoverflow.com/questions/49119539/how-to-set-references-to-nodes-in-this-example", "title": "how to set references to nodes in this example", "body": "<p>when I try and setup my graph it creates a near infinite loop in which every node holds the relation of every other node. But I just want `nodes.film_actor_hash\u2019 to have a node name and a reference to the node. how do I get just a reference and not the node itself?</p>\n\n<p>I should add if you just copy and paste my code into irb or pry you\u2019ll see what i mean.</p>\n\n<pre><code>class Node\n  attr_accessor :name\n  attr_accessor :film_actor_hash\n\n  def initialize(name)\n    self.name = name\n    self.film_actor_hash = {}\n  end\nend\n\nrequire_relative 'nodes'\nclass Graph\n  attr_accessor :actors\n  attr_accessor :films\n  def initialize\n    @actors = []\n    @films = []\n  end\nend\n\ngraph = Graph.new()\n\na= Node.new(\"a\")\nb= Node.new(\"b\")\nc= Node.new(\"c\")\nd= Node.new(\"d\")\ne= Node.new(\"e\")\nf= Node.new(\"f\")\ng= Node.new(\"g\")\nh= Node.new(\"h\")\ni= Node.new(\"i\")\nj= Node.new(\"j\")\nkevin_bacon= Node.new(\"kevin_bacon\")\nl= Node.new(\"l\")\nm= Node.new(\"m\")\nn= Node.new(\"n\")\no= Node.new(\"o\")\np= Node.new(\"p\")\nq= Node.new(\"q\")\nr= Node.new(\"r\")\ns= Node.new(\"s\")\n\none = Node.new(\"one\")\ntwo = Node.new(\"two\")\nthree = Node.new(\"three\")\nfour = Node.new(\"four\")\nfive = Node.new(\"five\")\nsix = Node.new(\"six\")\nseven = Node.new(\"seven\")\neight = Node.new(\"eight\")\nnine = Node.new(\"nine\")\nten = Node.new(\"ten\")\neleven = Node.new(\"eleven\")\ntwelve = Node.new(\"twelve\")\nthirteen = Node.new(\"thirteen\")\nfourteen = Node.new(\"fourteen\")\nfifteen = Node.new(\"fifteen\")\nsixteen = Node.new(\"sixteen\")\nseventeen = Node.new(\"seventeen\")\neighteen = Node.new(\"eighteen\")\nnineteen = Node.new(\"nineteen\")\n\na.film_actor_hash['sixteen'] = sixteen\na.film_actor_hash['one'] = one\nb.film_actor_hash['one'] = one\nb.film_actor_hash['two'] = two\nc.film_actor_hash['two'] = two\nc.film_actor_hash['three'] = three\nd.film_actor_hash['three'] = three\nd.film_actor_hash['four'] = four\ne.film_actor_hash['four'] = four\ne.film_actor_hash['five'] = five\nf.film_actor_hash['five'] = five\nf.film_actor_hash['six'] = six\ng.film_actor_hash['six'] = six\ng.film_actor_hash['seven'] = seven\nh.film_actor_hash['seven'] = seven\nh.film_actor_hash['eight'] = eight\ni.film_actor_hash['eight'] = eight\ni.film_actor_hash['nine'] = nine\nj.film_actor_hash['nine'] = nine\nj.film_actor_hash['ten'] = ten\nl.film_actor_hash['ten'] = ten\nl.film_actor_hash['eleven'] = eleven\nm.film_actor_hash['eleven'] = eleven\nm.film_actor_hash['twelve'] = twelve\nn.film_actor_hash['twelve'] = twelve\nn.film_actor_hash['thirteen'] = thirteen\no.film_actor_hash['thirteen'] = thirteen\no.film_actor_hash['fourteen'] = fourteen\np.film_actor_hash['fourteen'] = fourteen\np.film_actor_hash['fifteen'] = fifteen\nkevin_bacon.film_actor_hash['fifteen'] = fifteen\nkevin_bacon.film_actor_hash['sixteen'] = sixteen\n\none.film_actor_hash['kevin_bacon'] = kevin_bacon\none.film_actor_hash['a'] = a\ntwo.film_actor_hash['a'] = a\ntwo.film_actor_hash['b'] = b\nthree.film_actor_hash['b'] = b\nthree.film_actor_hash['c'] = c\nfour.film_actor_hash['c'] = c\nfour.film_actor_hash['d'] = d\nfive.film_actor_hash['d'] = d\nfive.film_actor_hash['e'] = e\nsix.film_actor_hash['e'] = e\nsix.film_actor_hash['f'] = f\nseven.film_actor_hash['f'] = f\nseven.film_actor_hash['g'] = g\neight.film_actor_hash['g'] = g\neight.film_actor_hash['h'] = h\nnine.film_actor_hash['h'] = h\nnine.film_actor_hash['i'] = i\nten.film_actor_hash['i'] = i\nten.film_actor_hash['j'] = j\neleven.film_actor_hash['j'] = j\neleven.film_actor_hash['l'] = l\ntwelve.film_actor_hash['l'] = l\ntwelve.film_actor_hash['m'] = m\nthirteen.film_actor_hash['m'] = m\nthirteen.film_actor_hash['n'] = n\nfourteen.film_actor_hash['n'] = n\nfourteen.film_actor_hash['o'] = o\nfifteen.film_actor_hash['o'] = o\nfifteen.film_actor_hash['p'] = p\nsixteen.film_actor_hash['p'] = p\nsixteen.film_actor_hash['kevin_bacon'] = kevin_bacon\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "compare", "matching"], "comments": [{"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 3, "creation_date": 1520281760, "post_id": 49118825, "comment_id": 85243226, "body": "What&#39;s wrong with <code>array1 == array2</code>? I suspect it does the pairwise compare you seek."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1520281865, "post_id": 49118825, "comment_id": 85243284, "body": "JFYI, you have <code>array1</code> twice."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1520289316, "post_id": 49118825, "comment_id": 85246683, "body": "<a href=\"http://ruby-doc.org/core-2.5.0/Array.html#method-i-3D-3D\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.5.0/Array.html#method-i-3D-3D</a>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "anon"}, "edited": false, "score": 0, "creation_date": 1520282315, "post_id": 49118912, "comment_id": 85243535, "body": "haha wow I was definitely overthinking this. Thank you so much for such a quick and concise reply!"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 131, "user_id": 8496955, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/130af836e960f2242a04e7fa5cbef5a8?s=128&d=identicon&r=PG&f=1", "display_name": "lumos", "link": "https://stackoverflow.com/users/8496955/lumos"}, "edited": false, "score": 0, "creation_date": 1520282494, "post_id": 49118912, "comment_id": 85243639, "body": "@lumos: my pleasure. For the future, post actually valid runnable ruby (properly formatted too). What you have there won&#39;t even parse. It&#39;s miracle how you didn&#39;t get any downvotes."}, {"owner": {"user_type": "does_not_exist", "display_name": "anon"}, "edited": false, "score": 0, "creation_date": 1520285597, "post_id": 49118912, "comment_id": 85245150, "body": "This was copied as is from Sublime Text (I just renamed the arrays), and it runs fine both in Terminal and within the Sublime console...can I ask what exactly is incorrect, or not parsing?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1520312483, "post_id": 49118912, "comment_id": 85252463, "body": "@SergioTulentsev or c) you are mudasobwa"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1520312578, "post_id": 49118912, "comment_id": 85252486, "body": "I am thinking about providing a PR to Rails team to monkey-patch <code>Array</code> to provide <code>map_map</code> method doing that intermediate mapping for nested arrays :-P"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 131, "user_id": 8496955, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/130af836e960f2242a04e7fa5cbef5a8?s=128&d=identicon&r=PG&f=1", "display_name": "lumos", "link": "https://stackoverflow.com/users/8496955/lumos"}, "edited": false, "score": 0, "creation_date": 1520316634, "post_id": 49118912, "comment_id": 85253732, "body": "@lumos: actually, I was wrong. it&#39;s parseable, but still it will fail: <code>undefined local variable or method &#39;file1&#39;</code>"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1520316985, "post_id": 49118912, "comment_id": 85253846, "body": "@mudasobwa: &quot;or c) you are mudasobwa&quot; - you mean that a) and b) don&#39;t apply to you? :trollface:"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1520317210, "post_id": 49118912, "comment_id": 85253917, "body": "Sure a) and b) don\u2019t apply, I am confused you asking."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 5, "last_activity_date": 1520283127, "last_edit_date": 1520283127, "creation_date": 1520281774, "answer_id": 49118912, "question_id": 49118825, "link": "https://stackoverflow.com/questions/49118825/compare-two-arrays-in-order/49118912#49118912", "title": "compare two arrays in order", "body": "<p>You don't need to do anything of the sort. Default array equality operator compares arrays with order</p>\n\n<pre><code>array1 = %w[file1.html file2.html file3.html file4.html]\narray2 = %w[file1.html file2.html file4.html file3.html]\narray3 = %w[file1.html file2.html file3.html file4.html]\n\narray1 == array2 # =&gt; false\narray1 == array3 # =&gt; true\n</code></pre>\n\n<p>Example with comparing mapped values (if you have full paths in your arrays)</p>\n\n<pre><code>array1.map{|a| File.basename(a)} == array2.map{|a| File.basename(a) }\n# or, as @mudasobwa would suggest\n[array1, array2].map{|a| a.map(&amp;File.method(:basename)) }.reduce(:==)\n</code></pre>\n\n<p><sup>Use the last one if and only if a) you understand it completely and b)\n you think it's a good idea.</sup></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "anon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1184, "favorite_count": 1, "accepted_answer_id": 49118912, "answer_count": 1, "score": -2, "last_activity_date": 1520362682, "creation_date": 1520281395, "last_edit_date": 1520362682, "question_id": 49118825, "link": "https://stackoverflow.com/questions/49118825/compare-two-arrays-in-order", "title": "compare two arrays in order", "body": "<p>I thought this would be pretty simple, but I seem to be getting things mixed up, and I haven't found anything on stackoverflow that quite matches my question.</p>\n\n<p>I'm trying to write a function that can compare two arrays of file names to make sure their values match. They need to actually match in their position as well, so the order is crucial. In other words:</p>\n\n<pre><code>array1 = [\"file1.html\", \"file2.html\", \"file3.html\", \"file4.html\"]\narray2 = [\"file1.html\", \"file2.html\", \"file4.html\", \"file3.html\"]\n</code></pre>\n\n<p>I would want a comparison between these two arrays to return as false, because of the difference in order (even though both arrays actually include the same values). I tried something like this:</p>\n\n<pre><code>matching = true\nnames1 = array1.map { |x| File.basename(x)}\nnames2 = array2.map { |x| File.basename(x)}\n    names1.each_with_index { |file,index|\n        if file != names2[index]\n            matching = false\n        end\n    }\nreturn matching\n</code></pre>\n\n<p>This works, but I'm wondering if there's a cleaner, more foolproof way of comparing arrays in this way? Thanks!</p>\n"}, {"tags": ["ruby", "rubocop", "yardoc"], "comments": [{"owner": {"reputation": 598, "user_id": 5866447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GMv8H.jpg?s=128&g=1", "display_name": "sxm1972", "link": "https://stackoverflow.com/users/5866447/sxm1972"}, "edited": false, "score": 0, "creation_date": 1520341593, "post_id": 49118755, "comment_id": 85267728, "body": "If I understand it right, you want to disable these metrics only for certain methods. you can try to pull out those methods into a separate module/file and then ignore that file through the .rubocop.yml file. That way you don&#39;t need to have the # rubocop:disable comment in the code."}, {"owner": {"reputation": 966, "user_id": 607730, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fde6d4570c6079da6cb6d129f1638364?s=128&d=identicon&r=PG", "display_name": "HMCFletch", "link": "https://stackoverflow.com/users/607730/hmcfletch"}, "reply_to_user": {"reputation": 598, "user_id": 5866447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GMv8H.jpg?s=128&g=1", "display_name": "sxm1972", "link": "https://stackoverflow.com/users/5866447/sxm1972"}, "edited": false, "score": 0, "creation_date": 1520364466, "post_id": 49118755, "comment_id": 85282123, "body": "The methods should probably remain where they are. I think it would weird to pull out a single method just to satisfy rubocop."}, {"owner": {"reputation": 598, "user_id": 5866447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GMv8H.jpg?s=128&g=1", "display_name": "sxm1972", "link": "https://stackoverflow.com/users/5866447/sxm1972"}, "edited": false, "score": 0, "creation_date": 1520489011, "post_id": 49118755, "comment_id": 85338104, "body": "Assuming you are putting the # rubocop:disable before documentation comments of a method, can you try inserting an extra newline after this line? does that fix your issue?"}, {"owner": {"reputation": 966, "user_id": 607730, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fde6d4570c6079da6cb6d129f1638364?s=128&d=identicon&r=PG", "display_name": "HMCFletch", "link": "https://stackoverflow.com/users/607730/hmcfletch"}, "reply_to_user": {"reputation": 598, "user_id": 5866447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GMv8H.jpg?s=128&g=1", "display_name": "sxm1972", "link": "https://stackoverflow.com/users/5866447/sxm1972"}, "edited": false, "score": 0, "creation_date": 1520609727, "post_id": 49118755, "comment_id": 85399160, "body": "@sxm1972 That did the trick! Thanks!"}, {"owner": {"reputation": 598, "user_id": 5866447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GMv8H.jpg?s=128&g=1", "display_name": "sxm1972", "link": "https://stackoverflow.com/users/5866447/sxm1972"}, "edited": false, "score": 0, "creation_date": 1520827374, "post_id": 49118755, "comment_id": 85459468, "body": "Great. Please mark my answer as the correct answer in that case. It would help to close out this question as well as help others with a documented answer."}], "answers": [{"tags": [], "owner": {"reputation": 598, "user_id": 5866447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GMv8H.jpg?s=128&g=1", "display_name": "sxm1972", "link": "https://stackoverflow.com/users/5866447/sxm1972"}, "is_accepted": true, "score": 4, "last_activity_date": 1520827317, "creation_date": 1520827317, "answer_id": 49227995, "question_id": 49118755, "link": "https://stackoverflow.com/questions/49118755/remove-rubocop-comments-from-yardoc-documentation/49227995#49227995", "title": "Remove rubocop comments from Yardoc documentation", "body": "<p>To disable rubocop directives in the code from appearing in YARDOC documentation insert a newline after the comment. e.g.</p>\n\n<pre><code># rubocop:disable Metrics/AbcSize\n\n# Converts the object into textual markup given a specific format.\n#\n# @param format [Symbol] the format type, `:text` or `:html`\n# @return [String] the object converted into the expected format.\ndef to_format(format = :html)\n  # format the object\nend\n</code></pre>\n"}], "owner": {"reputation": 966, "user_id": 607730, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fde6d4570c6079da6cb6d129f1638364?s=128&d=identicon&r=PG", "display_name": "HMCFletch", "link": "https://stackoverflow.com/users/607730/hmcfletch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 1, "accepted_answer_id": 49227995, "answer_count": 1, "score": 5, "last_activity_date": 1520827317, "creation_date": 1520281094, "last_edit_date": 1520303631, "question_id": 49118755, "link": "https://stackoverflow.com/questions/49118755/remove-rubocop-comments-from-yardoc-documentation", "title": "Remove rubocop comments from Yardoc documentation", "body": "<p>We are using Yardoc to create the HTML documentation for a number of gems and my company's apps. We are also using Rubocop to for style guide compliance. </p>\n\n<p>The issue I am running into is that we have to enable/disable some of the method metrics and those comments (<code># rubocop:disable Metrics/AbcSize</code>, etc...) showing up in our documentation. Is there a plugin that removes these or some guide I can follow on creating my own?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "sqlite", "sequel"], "comments": [{"owner": {"reputation": 2202, "user_id": 3607039, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8Bj3I.jpg?s=128&g=1", "display_name": "Bustikiller", "link": "https://stackoverflow.com/users/3607039/bustikiller"}, "edited": false, "score": 0, "creation_date": 1520290855, "post_id": 49118469, "comment_id": 85247208, "body": "Are you sure the target schema is empty when you execute the migration? It seems it is trying to re-create the tables"}, {"owner": {"reputation": 391, "user_id": 9118625, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/24c0b4ff94e144c7c384b51e1e632cce?s=128&d=identicon&r=PG&f=1", "display_name": "Hakeem Baba", "link": "https://stackoverflow.com/users/9118625/hakeem-baba"}, "reply_to_user": {"reputation": 2202, "user_id": 3607039, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8Bj3I.jpg?s=128&g=1", "display_name": "Bustikiller", "link": "https://stackoverflow.com/users/3607039/bustikiller"}, "edited": false, "score": 0, "creation_date": 1520346446, "post_id": 49118469, "comment_id": 85270885, "body": "the tables do exist. But there is no data. I have run rails db:migrate and rails db:seed. But the data did not move from sqlite3 to postgres"}], "owner": {"reputation": 391, "user_id": 9118625, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/24c0b4ff94e144c7c384b51e1e632cce?s=128&d=identicon&r=PG&f=1", "display_name": "Hakeem Baba", "link": "https://stackoverflow.com/users/9118625/hakeem-baba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1520279961, "creation_date": 1520279961, "last_edit_date": 1592644375, "question_id": 49118469, "link": "https://stackoverflow.com/questions/49118469/migrating-data-from-sqlite3-to-postgresql", "title": "Migrating data from SQLite3 to Postgresql", "body": "<p>I am working on a rails app and need to migrate my data from SQLite3 to Postgres. I tried using the sequel gem by following this <a href=\"http://www.chrisrolle.com/en/blog/migration-to-postgresql-on-rails\" rel=\"nofollow noreferrer\">tutorial</a></p>\n<p>But when i run <code>sequel -C sqlite://db/development.sqlite3 postgres://keemtaker:password@localhost/tuma_development        </code> I get this error</p>\n<blockquote>\n<p>Databases connections successful</p>\n<p>Migrations dumped successfully</p>\n<p>Error: Sequel::DatabaseError: PG::DuplicateTable: ERROR:  relation &quot;applicants&quot; already exists</p>\n</blockquote>\n<p>The error seem to point to one of the tables in schema but have no clue how to solve this. This is my db:schema</p>\n<pre><code>    ActiveRecord::Schema.define(version: 20180220173537) do\n\n  # These are extensions that must be enabled in order to support this database\n  enable_extension &quot;plpgsql&quot;\n\n  create_table &quot;applicants&quot;, force: :cascade do |t|\n    t.bigint &quot;job_id&quot;\n    t.datetime &quot;created_at&quot;, null: false\n    t.datetime &quot;updated_at&quot;, null: false\n    t.string &quot;full_name&quot;\n    t.string &quot;email&quot;\n    t.string &quot;mobile_number&quot;\n    t.text &quot;cover_letter&quot;\n    t.string &quot;resume&quot;\n    t.index [&quot;job_id&quot;], name: &quot;index_applicants_on_job_id&quot;\n  end\n\n  create_table &quot;companies&quot;, force: :cascade do |t|\n    t.string &quot;name&quot;\n    t.text &quot;description&quot;\n    t.string &quot;website&quot;\n    t.string &quot;location&quot;\n    t.string &quot;address&quot;\n    t.datetime &quot;created_at&quot;, null: false\n    t.datetime &quot;updated_at&quot;, null: false\n    t.bigint &quot;user_id&quot;\n    t.string &quot;photo&quot;\n    t.string &quot;logo&quot;\n    t.index [&quot;user_id&quot;], name: &quot;index_companies_on_user_id&quot;\n  end\n\n  create_table &quot;company_industries&quot;, force: :cascade do |t|\n    t.bigint &quot;company_id&quot;\n    t.bigint &quot;industry_id&quot;\n    t.datetime &quot;created_at&quot;, null: false\n    t.datetime &quot;updated_at&quot;, null: false\n    t.index [&quot;company_id&quot;], name: &quot;index_company_industries_on_company_id&quot;\n    t.index [&quot;industry_id&quot;], name: &quot;index_company_industries_on_industry_id&quot;\n  end\n\n  create_table &quot;company_perks&quot;, force: :cascade do |t|\n    t.bigint &quot;company_id&quot;\n    t.bigint &quot;perk_id&quot;\n    t.datetime &quot;created_at&quot;, null: false\n    t.datetime &quot;updated_at&quot;, null: false\n    t.index [&quot;company_id&quot;], name: &quot;index_company_perks_on_company_id&quot;\n    t.index [&quot;perk_id&quot;], name: &quot;index_company_perks_on_perk_id&quot;\n  end\n\n  create_table &quot;industries&quot;, force: :cascade do |t|\n    t.string &quot;name&quot;\n    t.datetime &quot;created_at&quot;, null: false\n    t.datetime &quot;updated_at&quot;, null: false\n  end\n\n  create_table &quot;jobs&quot;, force: :cascade do |t|\n    t.string &quot;title&quot;\n    t.string &quot;role&quot;\n    t.text &quot;description&quot;\n    t.string &quot;requirements&quot;\n    t.string &quot;duties&quot;\n    t.bigint &quot;company_id&quot;\n    t.datetime &quot;created_at&quot;, null: false\n    t.datetime &quot;updated_at&quot;, null: false\n    t.string &quot;job_type&quot;\n    t.string &quot;keywords&quot;\n    t.string &quot;salary&quot;\n    t.string &quot;equity&quot;\n    t.text &quot;pitch&quot;\n    t.string &quot;email&quot;\n    t.string &quot;location&quot;\n    t.index [&quot;company_id&quot;], name: &quot;index_jobs_on_company_id&quot;\n  end\n</code></pre>\n<p>This is my database.yml</p>\n<pre><code> development:\n  adapter: postgresql\n  encoding: unicode\n  database: tuma_development\n  pool: 5\n  timeout: 5000\n  username: keemtaker\n  password: 'password'\n\ntest:\n  adapter: postgresql\n  encoding: unicode\n  database: tuma_test\n  pool: 5\n  timeout: 5000\n  username: keemtaker\n  password: 'password'\n\n\nproduction:\n  adapter: postgresql\n  database: tuma_production\n  timeout: 5000\n  pool: 5\n</code></pre>\n"}]