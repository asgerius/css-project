[{"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 2, "creation_date": 1577308489, "post_id": 59481894, "comment_id": 105140227, "body": "It&#39;s <code>Rails.root.join(&#39;public&#39;, &#39;files&#39;)</code>."}, {"owner": {"reputation": 548, "user_id": 12438293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVweC.png?s=128&g=1", "display_name": "norioumata", "link": "https://stackoverflow.com/users/12438293/norioumata"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1577308569, "post_id": 59481894, "comment_id": 105140241, "body": "Yes, you are right. Thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 3, "last_activity_date": 1577308790, "creation_date": 1577308790, "answer_id": 59481927, "question_id": 59481894, "link": "https://stackoverflow.com/questions/59481894/rails-root-showing-correct-path-but-rails-root-join-is-not-showing-correct-path/59481927#59481927", "title": "Rails.root showing correct path but Rails.root.join is not showing correct path", "body": "<p>The problem is that with the first slash in <code>public</code> you're making a reference to the folder <code>public</code> located in <code>/</code>, not in the relative path where your project is.</p>\n\n<p>Removing that first slash might give you the expected output:</p>\n\n<pre><code>Rails.root.join('public/files')\n</code></pre>\n"}], "owner": {"reputation": 548, "user_id": 12438293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVweC.png?s=128&g=1", "display_name": "norioumata", "link": "https://stackoverflow.com/users/12438293/norioumata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 1, "accepted_answer_id": 59481927, "answer_count": 1, "score": 1, "last_activity_date": 1577308790, "creation_date": 1577308380, "question_id": 59481894, "link": "https://stackoverflow.com/questions/59481894/rails-root-showing-correct-path-but-rails-root-join-is-not-showing-correct-path", "title": "Rails.root showing correct path but Rails.root.join is not showing correct path", "body": "<p><code>Rails.root</code> work but <code>Rails.root.join</code> is not working as expected.</p>\n\n<pre><code>puts Rails.root # /work/project\n\nsrc_dir = \"/public/files\" \nputs Rails.root.join(src_dir) \n# expected: /work/project/public/files\n# showing: /public/files\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 2504, "user_id": 3729369, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FYV4M.png?s=128&g=1", "display_name": "simonwo", "link": "https://stackoverflow.com/users/3729369/simonwo"}, "edited": false, "score": 0, "creation_date": 1577353269, "post_id": 59481617, "comment_id": 105148064, "body": "Are you really sure you need a specific version of Rails? If so, try <code>gem install bundler -v 1.17.3</code>. If not, remove the <code>= 4.1.0</code> from your Gemfile and try again."}, {"owner": {"reputation": 59, "user_id": 1202862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfaa3f3f3378f015f3208e274991a742?s=128&d=identicon&r=PG", "display_name": "Pipevel", "link": "https://stackoverflow.com/users/1202862/pipevel"}, "reply_to_user": {"reputation": 2504, "user_id": 3729369, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FYV4M.png?s=128&g=1", "display_name": "simonwo", "link": "https://stackoverflow.com/users/3729369/simonwo"}, "edited": false, "score": 0, "creation_date": 1578058735, "post_id": 59481617, "comment_id": 105325352, "body": "Thanks for comment, i tried with both recomendations. Installed the bundler -v 1.17.3 and i removed the version of rails, so my gemfile right now is the next:"}], "owner": {"reputation": 59, "user_id": 1202862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfaa3f3f3378f015f3208e274991a742?s=128&d=identicon&r=PG", "display_name": "Pipevel", "link": "https://stackoverflow.com/users/1202862/pipevel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577305480, "creation_date": 1577305480, "question_id": 59481617, "link": "https://stackoverflow.com/questions/59481617/run-my-app-ruby-on-local-bash-ubuntu-on-windows", "title": "Run my app ruby on local bash ubuntu on windows", "body": "<p>I have this answer after try to run my app in ruby on mi bash ubuntu on windows 10</p>\n\n<p>Bundler could not find compatible versions for gem \"bundler\":\n  In Gemfile:\n    rails (= 4.1.0) was resolved to 4.1.0, which depends on\n      bundler (&lt; 2.0, >= 1.3.0)</p>\n\n<p>Current Bundler version:\n    bundler (2.1.2)\nThis Gemfile requires a different version of Bundler.\nPerhaps you need to update Bundler by running <code>gem install bundler</code>?</p>\n\n<p>Could not find gem 'bundler (&lt; 2.0, >= 1.3.0)', which is required by gem 'rails (= 4.1.0)', in any of\nthe sources.</p>\n\n<p>Bundler could not find compatible versions for gem \"coffee-rails\":\n  In Gemfile:\n    coffee-rails (~> 4.0.0)</p>\n\n<pre><code>social-share-button (~&gt; 0.1.6) was resolved to 0.1.10, which depends on\n  coffee-rails\n</code></pre>\n\n<p>\u00bfWhat do you recommend me?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pundit"], "comments": [{"owner": {"reputation": 959, "user_id": 3934687, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/bqWk9.png?s=128&g=1", "display_name": "gwnp", "link": "https://stackoverflow.com/users/3934687/gwnp"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1577305312, "post_id": 59481372, "comment_id": 105139703, "body": "Unfortunately I tried that and it didn&#39;t work :("}], "answers": [{"comments": [{"owner": {"reputation": 959, "user_id": 3934687, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/bqWk9.png?s=128&g=1", "display_name": "gwnp", "link": "https://stackoverflow.com/users/3934687/gwnp"}, "edited": false, "score": 0, "creation_date": 1577385820, "post_id": 59490934, "comment_id": 105158769, "body": "Oh I didn&#39;t realize that since the URL in my routes file doesn&#39;t have the ? as part of the path."}], "tags": [], "owner": {"reputation": 5437, "user_id": 1257094, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Ob6MH.jpg?s=128&g=1", "display_name": "milgner", "link": "https://stackoverflow.com/users/1257094/milgner"}, "is_accepted": true, "score": 2, "last_activity_date": 1577377416, "creation_date": 1577377416, "answer_id": 59490934, "question_id": 59481372, "link": "https://stackoverflow.com/questions/59481372/method-with-in-name-throws-no-method-errors-in-pundit-policy/59490934#59490934", "title": "Method with ? in name throws no method errors in pundit policy", "body": "<p>The policy method is determined by appending a <code>?</code> to the end of your controller action name. Your controller action name should <em>not</em> end in a <code>?</code> as this wouldn't constitute a proper URI path.</p>\n\n<p>Although your post did not show any controller code, the test in question should say <code>get :is_logged_in</code>.</p>\n"}], "owner": {"reputation": 959, "user_id": 3934687, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/bqWk9.png?s=128&g=1", "display_name": "gwnp", "link": "https://stackoverflow.com/users/3934687/gwnp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 59490934, "answer_count": 1, "score": -1, "last_activity_date": 1577377416, "creation_date": 1577302953, "last_edit_date": 1577371450, "question_id": 59481372, "link": "https://stackoverflow.com/questions/59481372/method-with-in-name-throws-no-method-errors-in-pundit-policy", "title": "Method with ? in name throws no method errors in pundit policy", "body": "<p>I am using Pundit but cannot find how to set a method in my policy that ends with a question mark.</p>\n\n<p>I have a method in my sessions controller called is_logged_in? and in the sessions policy I have the same method with the correct security logic associated with it. However, when I try to access the method, I get these errors because the policy cannot find the method:</p>\n\n<pre><code>Minitest::UnexpectedError: NoMethodError: undefined method is_logged_in?? for #&lt;SessionPolicy:0x007f9530200bd0&gt;\n</code></pre>\n\n<p>Of course rails methods cannot have multiple question marks so how do I tell my policy that this is the method?</p>\n\n<p>I am using</p>\n\n<ul>\n<li>Ruby 2.3.3</li>\n<li>Rails 4.2.7.1</li>\n<li>Pundit 2.1.0</li>\n</ul>\n\n<p>Policy:</p>\n\n<pre><code>class SessionPolicy &lt; ApplicationPolicy\n  def create?\n    true\n  end\n\n  def new?\n    true\n  end\n\n  def destroy?\n    true\n  end\n\n  def is_logged_in?\n    true\n  end\nend\n</code></pre>\n\n<p>Testing it with (Minitest):</p>\n\n<pre><code> test \"is_logged_in? should return false when NOT logged in\" do\n    sign_out get_user\n    get :is_logged_in?\n    assert_response :ok\n    response = response_to_json\n    assert !response[:logged_in]\n    assert !response[:is_business]\n  end\n</code></pre>\n\n<p>API:</p>\n\n<pre><code>def is_logged_in?\n    payload = {\n      logged_in: !current_user.nil?,\n      is_business: current_user.try(:is_business?)\n    }\n    render json: payload, status: :ok\n  end\n</code></pre>\n\n<p>Other than this unit test and before using Pundit for the Authorization, I was able to hit this end-point from my front end application.</p>\n"}, {"tags": ["ruby", "multidimensional-array"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 12596769, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bVqq5Z3lXGI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdcdT4PmvsupAKEqiXGI93Ac_uk2w/photo.jpg?sz=128", "display_name": "konkoj", "link": "https://stackoverflow.com/users/12596769/konkoj"}, "edited": false, "score": 0, "creation_date": 1577299584, "post_id": 59480989, "comment_id": 105138759, "body": "Sorry about being foolish but if I call arr.first.last it finds 11 but if I want to delete it, it won&#39;t.   Probably I will need a step by step tutorial what the program does when I type in <code>arr.delete arr.first.last</code>"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 13, "user_id": 12596769, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bVqq5Z3lXGI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdcdT4PmvsupAKEqiXGI93Ac_uk2w/photo.jpg?sz=128", "display_name": "konkoj", "link": "https://stackoverflow.com/users/12596769/konkoj"}, "edited": false, "score": 0, "creation_date": 1577299826, "post_id": 59480989, "comment_id": 105138804, "body": "@konkoj <code>arr.first.last</code> is a number, but the elements in <code>arr</code> are <i>arrays</i>."}, {"owner": {"reputation": 3982, "user_id": 7017466, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PZM5FgO8kcI/AAAAAAAAAAI/AAAAAAAABBc/kZTISfjStgY/photo.jpg?sz=128", "display_name": "LeoMurillo", "link": "https://stackoverflow.com/users/7017466/leomurillo"}, "reply_to_user": {"reputation": 13, "user_id": 12596769, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bVqq5Z3lXGI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdcdT4PmvsupAKEqiXGI93Ac_uk2w/photo.jpg?sz=128", "display_name": "konkoj", "link": "https://stackoverflow.com/users/12596769/konkoj"}, "edited": false, "score": 0, "creation_date": 1577301035, "post_id": 59480989, "comment_id": 105139033, "body": "@konkoj <code>arr.first.last</code> is a member of <code>arr.first</code>, not a member of <code>arr</code>. Hence, to delete <code>arr.first.last</code>, you need to delete it from <code>arr.first</code>. Try <code>arr.first.delete(arr.first.last)</code>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 3982, "user_id": 7017466, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PZM5FgO8kcI/AAAAAAAAAAI/AAAAAAAABBc/kZTISfjStgY/photo.jpg?sz=128", "display_name": "LeoMurillo", "link": "https://stackoverflow.com/users/7017466/leomurillo"}, "edited": false, "score": 0, "creation_date": 1577302386, "post_id": 59480989, "comment_id": 105139244, "body": "@LeoMurillo this is exactly what is written above in the answer."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1577298973, "creation_date": 1577298973, "answer_id": 59480989, "question_id": 59480962, "link": "https://stackoverflow.com/questions/59480962/i-am-trying-to-delete-from-a-multidimensional-array-using-first-last-but-it-retu/59480989#59480989", "title": "I am trying to delete from a multidimensional array using first.last but it returns nil. (ruby)", "body": "<blockquote>\n  <p><code>arr.delete(arr.first.last)</code></p>\n</blockquote>\n\n<p>Array <code>arr</code> has two elements: <code>[10, 11]</code> <em>and</em> <code>[12, 13]</code>.</p>\n\n<p>You are trying to delete element <code>11</code> from it, but it does not contain such an element. Hence nothing gets deleted and <code>nil</code> is returned.</p>\n\n<p>You might do delete from the <code>arr.first</code> array:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>arr.first.delete arr.first.last\n#\u21d2\u00a011\narr\n#\u21d2\u00a0[ [10], [12, 13] ]\n</code></pre>\n\n<p>The original array <code>arr</code> is happily mutated.</p>\n"}], "owner": {"reputation": 13, "user_id": 12596769, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bVqq5Z3lXGI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdcdT4PmvsupAKEqiXGI93Ac_uk2w/photo.jpg?sz=128", "display_name": "konkoj", "link": "https://stackoverflow.com/users/12596769/konkoj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 59480989, "answer_count": 1, "score": 1, "last_activity_date": 1577298973, "creation_date": 1577298719, "last_edit_date": 1577298874, "question_id": 59480962, "link": "https://stackoverflow.com/questions/59480962/i-am-trying-to-delete-from-a-multidimensional-array-using-first-last-but-it-retu", "title": "I am trying to delete from a multidimensional array using first.last but it returns nil. (ruby)", "body": "<pre class=\"lang-rb prettyprint-override\"><code>arr = [ [10, 11], [12, 13] ]\narr.first.last\n# =&gt; 11\n\narr.delete(arr.first.last)\n# =&gt; nil\n\narr.delete(arr.first)\n# =&gt; [10, 11]\n</code></pre>\n\n<p>Can someone explain to me this behavior? </p>\n\n<p>If I call <code>arr.first.last</code> it returns <code>11</code>. If I try to delete <code>arr.first.last</code> it returns nil not <code>11</code>.</p>\n\n<p>If I call <code>arr.first</code> it returns <code>[10, 11]</code>. If I try to delete <code>arr.first</code> it returns <code>[10, 11]</code>.</p>\n"}, {"tags": ["ruby", "file", "temporary-files"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1577298318, "post_id": 59480868, "comment_id": 105138503, "body": "Why do you want to have a <i>temporary</i> file to have a specific extension? Why do you care?"}, {"owner": {"reputation": 519, "user_id": 5701640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/J7ybb.jpg?s=128&g=1", "display_name": "Ahmed Salah", "link": "https://stackoverflow.com/users/5701640/ahmed-salah"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1577298700, "post_id": 59480868, "comment_id": 105138593, "body": "I will save it as paperclip file."}], "answers": [{"comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1577301418, "post_id": 59481032, "comment_id": 105139092, "body": "Perhaps add a note that the OP has now to delete the file by themself because it is not a temp file anymore?"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1577306090, "last_edit_date": 1577306090, "creation_date": 1577299348, "answer_id": 59481032, "question_id": 59480868, "link": "https://stackoverflow.com/questions/59480868/how-to-add-extension-to-ruby-tempfile-object/59481032#59481032", "title": "How to add extension to ruby Tempfile object?", "body": "<p>Use <code>FileUtils#mv</code> to physically move the file over the filesystem.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>image_path = \"https://api.tinify.com/output/g85retpckb5fz2x8zpjrvtj0jcv1txm0\"\nimage = open(image_path)\nimage.path # \"/tmp/open-uri20191225-21585-oo95rb\"\n\nimage_path_jpg = \"#{image.path}.jpg\"\nFileUtils.mv(image.path, image_path_jpg)\nimage = open(image_path_jpg)\nimage.path # \"/tmp/open-uri20191225-21585-oo95rb.jpg\"\n</code></pre>\n\n<p>Please note that you are responsible for file deletion now, since the file is not a temp file anymore.</p>\n"}], "owner": {"reputation": 519, "user_id": 5701640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/J7ybb.jpg?s=128&g=1", "display_name": "Ahmed Salah", "link": "https://stackoverflow.com/users/5701640/ahmed-salah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 524, "favorite_count": 0, "accepted_answer_id": 59481032, "answer_count": 1, "score": 1, "last_activity_date": 1577306090, "creation_date": 1577297809, "question_id": 59480868, "link": "https://stackoverflow.com/questions/59480868/how-to-add-extension-to-ruby-tempfile-object", "title": "How to add extension to ruby Tempfile object?", "body": "<p>How to add extension for <code>Tempfile</code> object?</p>\n\n<pre><code>image_path = \"https://api.tinify.com/output/g85retpckb5fz2x8zpjrvtj0jcv1txm0\"\nimage = open(image_path)\nimage.path # \"/tmp/open-uri20191225-21585-oo95rb\"\n</code></pre>\n\n<p>Now I want to make this file has <em>jpg</em> extension how can I do that?</p>\n\n<p>I have also tried to convert it to <code>File</code> class but couldn't change extension too.</p>\n\n<pre><code>new_image = File.new(image)\nnew_image.path # \"/tmp/open-uri20191225-21585-oo95rb\"\n</code></pre>\n"}, {"tags": ["ruby", "amazon-web-services"], "answers": [{"tags": [], "owner": {"reputation": 84135, "user_id": 631619, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b6f3159af5195eddff62a2dd4f9ad969?s=128&d=identicon&r=PG", "display_name": "Michael Durrant", "link": "https://stackoverflow.com/users/631619/michael-durrant"}, "is_accepted": false, "score": 0, "last_activity_date": 1577296971, "creation_date": 1577296971, "answer_id": 59480787, "question_id": 59480585, "link": "https://stackoverflow.com/questions/59480585/aws-how-to-list-availability-zones-for-all-regions/59480787#59480787", "title": "aws - how to list availability zones for all regions?", "body": "<p>As a temporary workaround I recreate the ec2 client every time, as in</p>\n\n<pre><code>    ec2 = Aws::EC2::Client.new(region: region.region_name)\n</code></pre>\n\n<p>within the <code>region</code> iterator</p>\n\n<p>This is obviously not ideal but does produce the desired output:</p>\n\n<pre><code>Amazon EC2 regions:                                                                                                              \n\nRegion: eu-north-1                                                                                                               \n\"eu-north-1 eu-north-1a\"                                                                                                         \n\"eu-north-1 eu-north-1b\"                                                                                                         \n\"eu-north-1 eu-north-1c\"                                                                                                         \nRegion: ap-south-1                                                                                                               \n\"ap-south-1 ap-south-1a\"\n\"ap-south-1 ap-south-1b\"\n\"ap-south-1 ap-south-1c\"\nRegion: eu-west-3\n\"eu-west-3 eu-west-3a\"\n\"eu-west-3 eu-west-3b\"\n\"eu-west-3 eu-west-3c\"\n</code></pre>\n"}], "owner": {"reputation": 84135, "user_id": 631619, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b6f3159af5195eddff62a2dd4f9ad969?s=128&d=identicon&r=PG", "display_name": "Michael Durrant", "link": "https://stackoverflow.com/users/631619/michael-durrant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 206, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1577296971, "creation_date": 1577295089, "last_edit_date": 1577295491, "question_id": 59480585, "link": "https://stackoverflow.com/questions/59480585/aws-how-to-list-availability-zones-for-all-regions", "title": "aws - how to list availability zones for all regions?", "body": "<p>I want ot go through regions and list all the availability zones for each one.</p>\n\n<p>I have (ruby)</p>\n\n<pre><code>  result='Zones:&lt;br/&gt;'\n  ec2 = Aws::EC2::Client.new(region: 'us-east-1')\n\n  puts \"Amazon EC2 regions:\\n\\n\"\n  describe_regions_result = ec2.describe_regions()\n  describe_regions_result.regions.each do |region|\n    puts \"Region: #{region.region_name}\"\n\n    Aws.config.update({region: region.region_name})\n    azs = ec2.describe_availability_zones #  (region_name: region.region_name)\n    azs.availability_zones.each do |zone|\n      result+=\"#{zone.region_name} - #{zone.zone_name}&lt;br/&gt;\"\n      p zone.region_name + ' ' + zone.zone_name\n    end \n  end \n</code></pre>\n\n<p>but my output keeps showing the individual AZs all being in region us-east-2 and repeating as the same values, as in  </p>\n\n<pre><code>Region: us-east-1\n\"us-east-2 us-east-2a\"\n\"us-east-2 us-east-2b\"\n\"us-east-2 us-east-2c\"\nRegion: us-east-2\n\"us-east-2 us-east-2a\"\n\"us-east-2 us-east-2b\"\n\"us-east-2 us-east-2c\"\nRegion: us-west-1\n\"us-east-2 us-east-2a\"\n\"us-east-2 us-east-2b\"\n\"us-east-2 us-east-2c\"\n    ...\n</code></pre>\n\n<p>How to fix to show the az's within each region ?</p>\n\n<p>I tried adding on <code>(region_name: region.region_name)</code> to the line</p>\n\n<pre><code>azs = ec2.describe_availability_zones(region_name: region.region_name)\n</code></pre>\n\n<p>but that gave an error</p>\n\n<pre><code>ArgumentError at /bucket_counts\nunexpected value at params[:region_name]\n</code></pre>\n\n<p>and also, as shown, I tried</p>\n\n<pre><code>Aws.config.update({region: region.region_name})\n</code></pre>\n\n<p>but that didn't help. Of course I don't want to use config change if possible just to listr the az's for the regions.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1577297449, "post_id": 59480641, "comment_id": 105138317, "body": "Or <code>Commands.singleton_methods(false)</code> or <code>Commands.methods(false)</code> depending on what they&#39;re after."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1577303352, "post_id": 59480641, "comment_id": 105139376, "body": "@muistooshort, they can differ?"}], "tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": false, "score": 2, "last_activity_date": 1577295998, "last_edit_date": 1577295998, "creation_date": 1577295655, "answer_id": 59480641, "question_id": 59480583, "link": "https://stackoverflow.com/questions/59480583/ruby-get-a-list-of-static-methods/59480641#59480641", "title": "Ruby: get a list of static methods", "body": "<p>You can use <code>Commands.singleton_methods</code> in this case.</p>\n\n<p>It will return array of method names.</p>\n"}, {"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 1, "last_activity_date": 1577319886, "creation_date": 1577319886, "answer_id": 59482777, "question_id": 59480583, "link": "https://stackoverflow.com/questions/59480583/ruby-get-a-list-of-static-methods/59482777#59482777", "title": "Ruby: get a list of static methods", "body": "<p>When you define methods within a module or class definition using this syntax</p>\n\n<pre><code>def self.foo\n  'foo'\nend\n</code></pre>\n\n<p>you are defining a class method, not an instance method.  So calling <code>Commands.instance_methods</code> will return empty array unless any have been defined.</p>\n\n<p>To get methods defined on the class but exclude inherited methods, use:</p>\n\n<pre><code>Commands.methods(fasle)\n</code></pre>\n\n<p>If you don't pass <code>false</code> or <code>nil</code> you will get all instance methods including those which have been inherited.</p>\n\n<p>Now if you want to get all 3 types in one shot, you could do something like:</p>\n\n<pre><code>[:methods, :instance_methods, :singleton_methods].map{|m| Commands.send(m, false)}\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 12551535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9061c203e8864db919b3eb3c44cb323?s=128&d=identicon&r=PG&f=1", "display_name": "selamba", "link": "https://stackoverflow.com/users/12551535/selamba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1577319886, "creation_date": 1577295082, "last_edit_date": 1577295744, "question_id": 59480583, "link": "https://stackoverflow.com/questions/59480583/ruby-get-a-list-of-static-methods", "title": "Ruby: get a list of static methods", "body": "<p>I have a module <code>Commands</code> with several static methods defined (<code>self.method</code>).\nI want to get a list of methods in <code>Commands</code>, but <code>instance_methods</code> and similar methods seem to recognize only non-static methods, since the return of <code>Commands.instance_methods</code> is empty.</p>\n\n<p>The code is as follows:</p>\n\n<pre><code>module Commands\n  def self.method_1\n  end\n\n  def self.method_N\n  end\nend\n</code></pre>\n\n<p><code>Commands.instance_methods</code> is empty ( <code>[]</code> ).</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1577296832, "post_id": 59480486, "comment_id": 105138182, "body": "Why do you convert it to a query?"}, {"owner": {"reputation": 649, "user_id": 6262799, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fdcfbe1750c5845f84869ae9f741b27b?s=128&d=identicon&r=PG&f=1", "display_name": "Prometheus", "link": "https://stackoverflow.com/users/6262799/prometheus"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1577297148, "post_id": 59480486, "comment_id": 105138247, "body": "I don&#39;t. I just want to render the data. Removing to_query results in the same problem."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1577297284, "post_id": 59480486, "comment_id": 105138279, "body": "You call \u201cto_query\u201d. Did you inspect the returned data?"}, {"owner": {"reputation": 649, "user_id": 6262799, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fdcfbe1750c5845f84869ae9f741b27b?s=128&d=identicon&r=PG&f=1", "display_name": "Prometheus", "link": "https://stackoverflow.com/users/6262799/prometheus"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1577297334, "post_id": 59480486, "comment_id": 105138296, "body": "I&#39;ve updated the post and added the byebug log. Maybe this might help?"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1577297404, "post_id": 59480486, "comment_id": 105138308, "body": "So it\u2019s in \u201cparsed_response\u201d then?"}, {"owner": {"reputation": 649, "user_id": 6262799, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fdcfbe1750c5845f84869ae9f741b27b?s=128&d=identicon&r=PG&f=1", "display_name": "Prometheus", "link": "https://stackoverflow.com/users/6262799/prometheus"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1577298095, "post_id": 59480486, "comment_id": 105138457, "body": "Answer below works! Thanks for your input &amp; taking your time!"}], "answers": [{"comments": [{"owner": {"reputation": 649, "user_id": 6262799, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fdcfbe1750c5845f84869ae9f741b27b?s=128&d=identicon&r=PG&f=1", "display_name": "Prometheus", "link": "https://stackoverflow.com/users/6262799/prometheus"}, "edited": false, "score": 0, "creation_date": 1577297294, "post_id": 59480779, "comment_id": 105138283, "body": "Hey! Thanks for your comment! I&#39;ve tried this out already, but this just returns nil. I&#39;ve updated the OP and added the byebug response. If you have any more ideas what could cause this i would appreciate it!"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 649, "user_id": 6262799, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fdcfbe1750c5845f84869ae9f741b27b?s=128&d=identicon&r=PG&f=1", "display_name": "Prometheus", "link": "https://stackoverflow.com/users/6262799/prometheus"}, "edited": false, "score": 1, "creation_date": 1577297758, "post_id": 59480779, "comment_id": 105138385, "body": "It returns a hash with stringified keys. My fault, I updated my answer. Please try again."}, {"owner": {"reputation": 649, "user_id": 6262799, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fdcfbe1750c5845f84869ae9f741b27b?s=128&d=identicon&r=PG&f=1", "display_name": "Prometheus", "link": "https://stackoverflow.com/users/6262799/prometheus"}, "edited": false, "score": 0, "creation_date": 1577298067, "post_id": 59480779, "comment_id": 105138451, "body": "More like mine, should have had added the byebug log in the first place. Thank you! It finally works! Thanks for taking your time!"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 1, "last_activity_date": 1577297694, "last_edit_date": 1577297694, "creation_date": 1577296902, "answer_id": 59480779, "question_id": 59480486, "link": "https://stackoverflow.com/questions/59480486/rails-httparty-how-to-access-params/59480779#59480779", "title": "Rails - HTTParty How to access params?", "body": "<p>I would expect HTTParty to return a hash. Therefore IMO this should work:</p>\n\n<pre><code>&lt;% @hotels.each do |game| %&gt;\n    &lt;p&gt;game name is: &lt;%= game['name'] %&gt; &lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 649, "user_id": 6262799, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fdcfbe1750c5845f84869ae9f741b27b?s=128&d=identicon&r=PG&f=1", "display_name": "Prometheus", "link": "https://stackoverflow.com/users/6262799/prometheus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 59480779, "answer_count": 1, "score": 0, "last_activity_date": 1577297694, "creation_date": 1577294305, "last_edit_date": 1577297363, "question_id": 59480486, "link": "https://stackoverflow.com/questions/59480486/rails-httparty-how-to-access-params", "title": "Rails - HTTParty How to access params?", "body": "<p>So i'm using a pretty standard setup to test HTTParty out:</p>\n\n<pre><code>  def index\n\n     @hotels = HTTParty.get('https://api-v3.igdb.com/games/',\n        :headers =&gt;{\"Content-Type\" =&gt; \"application/json\", \"user-key\" =&gt; \"super_secret_key\"},\n        :query =&gt; {:fields =&gt; \"name\",  :limit =&gt;  \"20\"})\n  end\n</code></pre>\n\n<p>this works. I get 20 items back. </p>\n\n<p>I iterate through them in the view like so:</p>\n\n<pre><code>&lt;% @hotels.each do |game| %&gt;\n    &lt;p&gt;game name is:&lt;%= game.to_query %&gt; &lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>which results on the html file inside the browser to the following: \n(just 1 example taken)</p>\n\n<blockquote>\n  <p>game name is:id=69359&amp;name=Sunken+Secrets</p>\n</blockquote>\n\n<p>Obviously, i would like to render the name and the id like normal params, just like normally in Rails: &lt;=% game.name %> for example</p>\n\n<p>//Update:</p>\n\n<p>When i run byebug, i get the following result back for @hotels</p>\n\n<pre><code>&gt;     &lt;HTTParty::Response:0x7ff207cd0270 parsed_response=[{\"id\"=&gt;69359, \"name\"=&gt;\"Sunken Secrets\"}, {\"id\"=&gt;69530, \"name\"=&gt;\"Dai Senryaku VII:\n&gt; Modern Military Tactics\"}, {\"id\"=&gt;81332, \"name\"=&gt;\"Stick Fighter II\"},\n&gt; {\"id\"=&gt;50649, \"name\"=&gt;\"Who Wants to be a Millionaire: 1st Edition\"},\n&gt; {\"id\"=&gt;22618, \"name\"=&gt;\"Battleground 7: Bull Run\"}, {\"id\"=&gt;104945,\n&gt; \"name\"=&gt;\"Woodpunk\"}, {\"id\"=&gt;91579, \"name\"=&gt;\"Racing Live\"},\n&gt; {\"id\"=&gt;22636, \"name\"=&gt;\"Call of Duty: Black Ops - Annihilation\"},\n&gt; {\"id\"=&gt;88041, \"name\"=&gt;\"Highway Wars\"}, {\"id\"=&gt;31258,\n&gt; \"name\"=&gt;\"Slymes\"}, {\"id\"=&gt;90512, \"name\"=&gt;\"Asian Riddles 4\"},\n&gt; {\"id\"=&gt;105842, \"name\"=&gt;\"Robots Vs Zombies: Transform To Race And\n&gt; Fight\"}, {\"id\"=&gt;85450, \"name\"=&gt;\"Transformers Prime: The Game\"},\n&gt; {\"id\"=&gt;104748, \"name\"=&gt;\"Space station - build your own ISS\"},\n&gt; {\"id\"=&gt;111593, \"name\"=&gt;\"Oppai Puzzle\"}, {\"id\"=&gt;42610,\n&gt; \"name\"=&gt;\"Hebereke's Popoon\"}, {\"id\"=&gt;105254, \"name\"=&gt;\"Codenames\"},\n&gt; {\"id\"=&gt;91756, \"name\"=&gt;\"Aban Hawkins &amp; the 1000 SPIKES\"}, {\"id\"=&gt;2057,\n&gt; \"name\"=&gt;\"Out Run 2019\"}, {\"id\"=&gt;93987, \"name\"=&gt;\"Pi Story\"}],\n&gt; @response=#&lt;Net::HTTPOK 200 OK readbody=true&gt;,\n&gt; @headers={\"date\"=&gt;[\"Wed, 25 Dec 2019 18:04:48 GMT\"],\n&gt; \"content-type\"=&gt;[\"application/json;charset=utf-8\"],\n&gt; \"content-length\"=&gt;[\"1259\"], \"connection\"=&gt;[\"close\"],\n&gt; \"set-cookie\"=&gt;[\"__cfduid=de604d7fc295fb415e047830a8ce304281577297088;\n&gt; expires=Fri, 24-Jan-20 18:04:48 GMT; path=/; domain=.igdb.com;\n&gt; HttpOnly; SameSite=Lax\"], \"x-count\"=&gt;[\"124726\"], \"via\"=&gt;[\"1.1 vegur\"],\n&gt; \"cf-cache-status\"=&gt;[\"DYNAMIC\"],\n&gt; \"strict-transport-security\"=&gt;[\"max-age=15552000; preload\"],\n&gt; \"x-content-type-options\"=&gt;[\"nosniff\"], \"expect-ct\"=&gt;[\"max-age=604800,\n&gt; report-uri=\\\"https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct\\\"\"], \"server\"=&gt;[\"cloudflare\"], \"cf-ray\"=&gt;[\"54acbd52ae077cb2-MUC\"]}&gt;\n</code></pre>\n\n<p>Any ideas if there is way to do this?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "macos", "rubygems", "rvm"], "comments": [{"owner": {"reputation": 173, "user_id": 5922155, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z8Zdm.png?s=128&g=1", "display_name": "Asmita", "link": "https://stackoverflow.com/users/5922155/asmita"}, "edited": false, "score": 0, "creation_date": 1577292177, "post_id": 59479802, "comment_id": 105137237, "body": "Hey, Have you able to installed msgpack in your local machine successfully?"}, {"owner": {"reputation": 31, "user_id": 12596187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd4581ce744d658ef1f89eaf2f844a8d?s=128&d=identicon&r=PG&f=1", "display_name": "Miles", "link": "https://stackoverflow.com/users/12596187/miles"}, "reply_to_user": {"reputation": 173, "user_id": 5922155, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z8Zdm.png?s=128&g=1", "display_name": "Asmita", "link": "https://stackoverflow.com/users/5922155/asmita"}, "edited": false, "score": 0, "creation_date": 1577372494, "post_id": 59479802, "comment_id": 105154462, "body": "Hi @Asmita I have not. Do you know you how I would do so?"}, {"owner": {"reputation": 31, "user_id": 12596187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd4581ce744d658ef1f89eaf2f844a8d?s=128&d=identicon&r=PG&f=1", "display_name": "Miles", "link": "https://stackoverflow.com/users/12596187/miles"}, "edited": false, "score": 0, "creation_date": 1577372523, "post_id": 59479802, "comment_id": 105154471, "body": "@TalaatMagdy would you possibly be able to elaborate? Thanks for the help so far though!"}, {"owner": {"reputation": 31, "user_id": 12596187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd4581ce744d658ef1f89eaf2f844a8d?s=128&d=identicon&r=PG&f=1", "display_name": "Miles", "link": "https://stackoverflow.com/users/12596187/miles"}, "edited": false, "score": 0, "creation_date": 1577372764, "post_id": 59479802, "comment_id": 105154562, "body": "Okay -- so now I have installed msgpack. The only error I get now is:  <code>&#47;Users&#47;miles&#47;.rvm&#47;gems&#47;ruby-2.6.3&#47;gems&#47;bootsnap-1.4.5&#47;lib&#47;bo&zwnj;&#8203;otsnap&#47;load_path_cac&zwnj;&#8203;he&#47;core_ext&#47;kernel_r&zwnj;&#8203;equire.rb:22:in `require&#39;: incompatible library version - &#47;Users&#47;miles&#47;.rvm&#47;gems&#47;ruby-2.6.3&#47;gems&#47;bootsnap-1.4.5&#47;lib&#47;bo&zwnj;&#8203;otsnap&#47;bootsnap.bund&zwnj;&#8203;le (LoadError)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 9012, "user_id": 122201, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/BTtUU.jpg?s=128&g=1", "display_name": "rainkinz", "link": "https://stackoverflow.com/users/122201/rainkinz"}, "is_accepted": false, "score": 1, "last_activity_date": 1591195014, "last_edit_date": 1591195014, "creation_date": 1591110129, "answer_id": 62155000, "question_id": 59479802, "link": "https://stackoverflow.com/questions/59479802/unable-to-create-a-rails-app-due-to-incompatible-library-version-load-error/62155000#62155000", "title": "Unable to create a Rails app due to incompatible library version - load error", "body": "<p>I had the same issue. You need to completely clean out the <code>msgpack</code> gem using:</p>\n\n<pre><code>gem uninstall msgpack\n</code></pre>\n\n<p>Then reinstall it, so that the libraries are built against the version of ruby you're now using.</p>\n\n<p>You could also try:</p>\n\n<pre><code>bundle install --redownload\n</code></pre>\n\n<p>which should reinstall the gems and rebuild the linked libraries with the version of ruby you're now using.</p>\n"}, {"tags": [], "owner": {"reputation": 3090, "user_id": 4454732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-8OrTJkCtkn4/AAAAAAAAAAI/AAAAAAAAA4s/7jp2lrThK2k/photo.jpg?sz=128", "display_name": "David Hempy", "link": "https://stackoverflow.com/users/4454732/david-hempy"}, "is_accepted": false, "score": 0, "last_activity_date": 1591739763, "creation_date": 1591739763, "answer_id": 62292525, "question_id": 59479802, "link": "https://stackoverflow.com/questions/59479802/unable-to-create-a-rails-app-due-to-incompatible-library-version-load-error/62292525#62292525", "title": "Unable to create a Rails app due to incompatible library version - load error", "body": "<p>FWIW, I just spend several hours on a very similar error, after upgrading a Ruby app from ruby 2.4 to 2.6. I'm using rbenv and bundler on MacOS Mojave.</p>\n\n<p>I can't pinpoint how I fixed it, but after trying lots of updates/rehash/install approaches with little success, I uninstalled about a dozen old versions of ruby and started clean. This got me past the exact error in the question.</p>\n\n<p>This may be overkill, but it worked for me:</p>\n\n<p>List all installed ruby versions:</p>\n\n<pre><code>rbenv versions\n</code></pre>\n\n<p>Uninstall all versions of Ruby.</p>\n\n<pre><code>rbenv uninstall 2.1\nrbenv uninstall 2.1.9\netc.\n</code></pre>\n\n<p>Install needed version(s) of Ruby</p>\n\n<pre><code>rbenv install\n\nbundle install\n</code></pre>\n\n<p>Note - gem pristine --all took like a half hour. I tried running my app after <code>bundle install</code> and got dozens of warnings like these:</p>\n\n<pre><code>Ignoring binding_of_caller-0.8.0 because its extensions are not built.  Try: gem pristine binding_of_caller --version 0.8.0\nIgnoring binding_of_caller-0.7.2 because its extensions are not built.  Try: gem pristine binding_of_caller --version 0.7.2\nIgnoring bootsnap-1.4.6 because its extensions are not built.  Try: gem pristine bootsnap --version 1.4.6\nIgnoring bootsnap-1.4.5 because its extensions are not built.  Try: gem pristine bootsnap --version 1.4.5\n</code></pre>\n\n<p>At that time, I could not run <code>bundle exec rake</code></p>\n\n<pre><code>% bundle exec rake\nbundler: command not found: rake\nInstall missing gem executables with `bundle install`\n</code></pre>\n\n<p>Running <code>bundle</code> appeared successful, but did not update Gemfile.lock, and did not fix the problem.</p>\n\n<p>Finally, restoring all the gems to pristine solved the problem:</p>\n\n<pre><code>gem pristine --all\n</code></pre>\n\n<p>Note - gem pristine --all took like a half hour. I'm confused on how these gems got to be in other-than-pristine condition. But...it's working now. I can run the app, rake, etc. </p>\n"}], "owner": {"reputation": 31, "user_id": 12596187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd4581ce744d658ef1f89eaf2f844a8d?s=128&d=identicon&r=PG&f=1", "display_name": "Miles", "link": "https://stackoverflow.com/users/12596187/miles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 918, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1591739763, "creation_date": 1577288337, "last_edit_date": 1591110020, "question_id": 59479802, "link": "https://stackoverflow.com/questions/59479802/unable-to-create-a-rails-app-due-to-incompatible-library-version-load-error", "title": "Unable to create a Rails app due to incompatible library version - load error", "body": "<p>First-time post here! I am trying to build a rails app but I am having a ton of difficulty getting started. I have installed Rails, and Ruby but every time I go to make the app (Miless-MBP:railstest miles$ rails new tester2) I get a multitude of errors. The full log is below, but I have listed the 4 here. </p>\n\n<p>Thank you all so much!</p>\n\n<pre><code>/Users/miles/.rvm/gems/ruby-2.6.3/gems/msgpack-1.3.1/lib/msgpack.rb:9:in `require': cannot load such file -- msgpack/2.6/msgpack (LoadError)\n\n/Users/miles/.rvm/gems/ruby-2.6.3/gems/msgpack-1.3.1/lib/msgpack.rb:11:in `require': incompatible library version - /Users/miles/.rvm/gems/ruby-2.6.3/gems/msgpack-1.3.1/lib/msgpack/msgpack.bundle (LoadError)\n\n/Users/miles/.rvm/gems/ruby-2.6.3/gems/msgpack-1.3.1/lib/msgpack.rb:9:in `require': cannot load such file -- msgpack/2.6/msgpack (LoadError)\n\n/Users/miles/.rvm/gems/ruby-2.6.3/gems/msgpack-1.3.1/lib/msgpack.rb:11:in `require': incompatible library version - /Users/miles/.rvm/gems/ruby-2.6.3/gems/msgpack-1.3.1/lib/msgpack/msgpack.bundle (LoadError)\n</code></pre>\n\n<pre><code>    26: from bin/rails:3:in `&lt;main&gt;'\n    25: from bin/rails:3:in `load'\n    24: from /Users/miles/railstest/tester2/bin/spring:15:in `&lt;top (required)&gt;'\n    23: from /Users/miles/railstest/tester2/bin/spring:15:in `require'\n    22: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/binstub.rb:11:in `&lt;top (required)&gt;'\n    21: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/binstub.rb:11:in `load'\n    20: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/bin/spring:49:in `&lt;top (required)&gt;'\n    19: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/client.rb:30:in `run'\n    18: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/client/command.rb:7:in `call'\n    17: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/client/rails.rb:28:in `call'\n    16: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/client/rails.rb:28:in `load'\n    15: from /Users/miles/railstest/tester2/bin/rails:8:in `&lt;top (required)&gt;'\n    14: from /Users/miles/railstest/tester2/bin/rails:8:in `require_relative'\n    13: from /Users/miles/railstest/tester2/config/boot.rb:4:in `&lt;top (required)&gt;'\n    12: from /Users/miles/railstest/tester2/config/boot.rb:4:in `require'\n    11: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/setup.rb:1:in `&lt;top (required)&gt;'\n    10: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/setup.rb:1:in `require_relative'\n     9: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap.rb:3:in `&lt;top (required)&gt;'\n     8: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap.rb:3:in `require_relative'\n     7: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache.rb:74:in `&lt;top (required)&gt;'\n     6: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache.rb:74:in `require_relative'\n     5: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/store.rb:3:in `&lt;top (required)&gt;'\n     4: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/explicit_require.rb:40:in `with_gems'\n     3: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/store.rb:3:in `block in &lt;top (required)&gt;'\n     2: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/store.rb:3:in `require'\n     1: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/msgpack-1.3.1/lib/msgpack.rb:9:in `&lt;top (required)&gt;'\n/Users/miles/.rvm/gems/ruby-2.6.3/gems/msgpack-1.3.1/lib/msgpack.rb:9:in `require': cannot load such file -- msgpack/2.6/msgpack (LoadError)\n    27: from bin/rails:3:in `&lt;main&gt;'\n    26: from bin/rails:3:in `load'\n    25: from /Users/miles/railstest/tester2/bin/spring:15:in `&lt;top (required)&gt;'\n    24: from /Users/miles/railstest/tester2/bin/spring:15:in `require'\n    23: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/binstub.rb:11:in `&lt;top (required)&gt;'\n    22: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/binstub.rb:11:in `load'\n    21: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/bin/spring:49:in `&lt;top (required)&gt;'\n    20: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/client.rb:30:in `run'\n    19: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/client/command.rb:7:in `call'\n    18: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/client/rails.rb:28:in `call'\n    17: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/client/rails.rb:28:in `load'\n    16: from /Users/miles/railstest/tester2/bin/rails:8:in `&lt;top (required)&gt;'\n    15: from /Users/miles/railstest/tester2/bin/rails:8:in `require_relative'\n    14: from /Users/miles/railstest/tester2/config/boot.rb:4:in `&lt;top (required)&gt;'\n    13: from /Users/miles/railstest/tester2/config/boot.rb:4:in `require'\n    12: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/setup.rb:1:in `&lt;top (required)&gt;'\n    11: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/setup.rb:1:in `require_relative'\n    10: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap.rb:3:in `&lt;top (required)&gt;'\n     9: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap.rb:3:in `require_relative'\n     8: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache.rb:74:in `&lt;top (required)&gt;'\n     7: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache.rb:74:in `require_relative'\n     6: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/store.rb:3:in `&lt;top (required)&gt;'\n     5: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/explicit_require.rb:40:in `with_gems'\n     4: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/store.rb:3:in `block in &lt;top (required)&gt;'\n     3: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/store.rb:3:in `require'\n     2: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/msgpack-1.3.1/lib/msgpack.rb:8:in `&lt;top (required)&gt;'\n     1: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/msgpack-1.3.1/lib/msgpack.rb:11:in `rescue in &lt;top (required)&gt;'\n/Users/miles/.rvm/gems/ruby-2.6.3/gems/msgpack-1.3.1/lib/msgpack.rb:11:in `require': incompatible library version - /Users/miles/.rvm/gems/ruby-2.6.3/gems/msgpack-1.3.1/lib/msgpack/msgpack.bundle (LoadError)\n    27: from bin/rails:3:in `&lt;main&gt;'\n    26: from bin/rails:3:in `load'\n    25: from /Users/miles/railstest/tester2/bin/spring:15:in `&lt;top (required)&gt;'\n    24: from /Users/miles/railstest/tester2/bin/spring:15:in `require'\n    23: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/binstub.rb:11:in `&lt;top (required)&gt;'\n    22: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/binstub.rb:11:in `load'\n    21: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/bin/spring:49:in `&lt;top (required)&gt;'\n    20: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/client.rb:30:in `run'\n    19: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/client/command.rb:7:in `call'\n    18: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/client/rails.rb:28:in `call'\n    17: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/client/rails.rb:28:in `load'\n    16: from /Users/miles/railstest/tester2/bin/rails:8:in `&lt;top (required)&gt;'\n    15: from /Users/miles/railstest/tester2/bin/rails:8:in `require_relative'\n    14: from /Users/miles/railstest/tester2/config/boot.rb:4:in `&lt;top (required)&gt;'\n    13: from /Users/miles/railstest/tester2/config/boot.rb:4:in `require'\n    12: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/setup.rb:1:in `&lt;top (required)&gt;'\n    11: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/setup.rb:1:in `require_relative'\n    10: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap.rb:3:in `&lt;top (required)&gt;'\n     9: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap.rb:3:in `require_relative'\n     8: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache.rb:74:in `&lt;top (required)&gt;'\n     7: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache.rb:74:in `require_relative'\n     6: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/store.rb:3:in `&lt;top (required)&gt;'\n     5: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/explicit_require.rb:39:in `with_gems'\n     4: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/explicit_require.rb:43:in `rescue in with_gems'\n     3: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/store.rb:3:in `block in &lt;top (required)&gt;'\n     2: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/store.rb:3:in `require'\n     1: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/msgpack-1.3.1/lib/msgpack.rb:9:in `&lt;top (required)&gt;'\n/Users/miles/.rvm/gems/ruby-2.6.3/gems/msgpack-1.3.1/lib/msgpack.rb:9:in `require': cannot load such file -- msgpack/2.6/msgpack (LoadError)\n    28: from bin/rails:3:in `&lt;main&gt;'\n    27: from bin/rails:3:in `load'\n    26: from /Users/miles/railstest/tester2/bin/spring:15:in `&lt;top (required)&gt;'\n    25: from /Users/miles/railstest/tester2/bin/spring:15:in `require'\n    24: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/binstub.rb:11:in `&lt;top (required)&gt;'\n    23: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/binstub.rb:11:in `load'\n    22: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/bin/spring:49:in `&lt;top (required)&gt;'\n    21: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/client.rb:30:in `run'\n    20: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/client/command.rb:7:in `call'\n    19: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/client/rails.rb:28:in `call'\n    18: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/client/rails.rb:28:in `load'\n    17: from /Users/miles/railstest/tester2/bin/rails:8:in `&lt;top (required)&gt;'\n    16: from /Users/miles/railstest/tester2/bin/rails:8:in `require_relative'\n    15: from /Users/miles/railstest/tester2/config/boot.rb:4:in `&lt;top (required)&gt;'\n    14: from /Users/miles/railstest/tester2/config/boot.rb:4:in `require'\n    13: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/setup.rb:1:in `&lt;top (required)&gt;'\n    12: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/setup.rb:1:in `require_relative'\n    11: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap.rb:3:in `&lt;top (required)&gt;'\n    10: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap.rb:3:in `require_relative'\n     9: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache.rb:74:in `&lt;top (required)&gt;'\n     8: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache.rb:74:in `require_relative'\n     7: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/store.rb:3:in `&lt;top (required)&gt;'\n     6: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/explicit_require.rb:39:in `with_gems'\n     5: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/explicit_require.rb:43:in `rescue in with_gems'\n     4: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/store.rb:3:in `block in &lt;top (required)&gt;'\n     3: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/store.rb:3:in `require'\n     2: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/msgpack-1.3.1/lib/msgpack.rb:8:in `&lt;top (required)&gt;'\n     1: from /Users/miles/.rvm/gems/ruby-2.6.3/gems/msgpack-1.3.1/lib/msgpack.rb:11:in `rescue in &lt;top (required)&gt;'\n/Users/miles/.rvm/gems/ruby-2.6.3/gems/msgpack-1.3.1/lib/msgpack.rb:11:in `require': incompatible library version - /Users/miles/.rvm/gems/ruby-2.6.3/gems/msgpack-1.3.1/lib/msgpack/msgpack.bundle (LoadError)```\n\n</code></pre>\n"}, {"tags": ["ruby", "selenium", "rubygems", "cucumber", "capybara"], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 12069807, "user_type": "registered", "profile_image": "https://graph.facebook.com/167912891029515/picture?type=large", "display_name": "Wilfredo Casas", "link": "https://stackoverflow.com/users/12069807/wilfredo-casas"}, "edited": false, "score": 0, "creation_date": 1577386329, "post_id": 59479935, "comment_id": 105158932, "body": "Thanks Thomas. When I ran <b>gem install capybara</b>, I got this error thought - <b>ERROR:  While executing gem ... (ArgumentError)     wrong number of arguments (given 1, expected 0)</b>"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 139, "user_id": 12069807, "user_type": "registered", "profile_image": "https://graph.facebook.com/167912891029515/picture?type=large", "display_name": "Wilfredo Casas", "link": "https://stackoverflow.com/users/12069807/wilfredo-casas"}, "edited": false, "score": 0, "creation_date": 1577388315, "post_id": 59479935, "comment_id": 105159464, "body": "@WilfredoCasas If you can&#39;t run <code>gem install capybara</code> you have a bigger problem - that&#39;s a pretty basic ruby thing.  I&#39;d say start by making sure you&#39;re running at least ruby 2.5 and make sure you&#39;re version of <code>gem</code> is up to date as well (<code>gem update --system</code>). Also if using rbenv you may need to run <code>rbenv rehash</code>"}, {"owner": {"reputation": 139, "user_id": 12069807, "user_type": "registered", "profile_image": "https://graph.facebook.com/167912891029515/picture?type=large", "display_name": "Wilfredo Casas", "link": "https://stackoverflow.com/users/12069807/wilfredo-casas"}, "edited": false, "score": 0, "creation_date": 1577393226, "post_id": 59479935, "comment_id": 105160705, "body": "I created a new ticket for this - <a href=\"https://stackoverflow.com/questions/59492452/cant-install-or-uninstall-anything-in-ubuntu-processing-was-halted-because-th\" title=\"cant install or uninstall anything in ubuntu processing was halted because th\">stackoverflow.com/questions/59492452/&hellip;</a>"}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": false, "score": 0, "last_activity_date": 1577289892, "last_edit_date": 1577289892, "creation_date": 1577289475, "answer_id": 59479935, "question_id": 59479799, "link": "https://stackoverflow.com/questions/59479799/cant-run-ruby-automation-file-with-cucumber-cannot-load-such-file-capybara/59479935#59479935", "title": "Can&#39;t run ruby automation file with cucumber - cannot load such file -- capybara (LoadError)", "body": "<p>You don\u2019t want or need Poltergeist anymore, it\u2019s obsolete. Instead add capybara to your Gemfile, or if not using a Gemfile run <code>gem install capybara</code>. Also you should be doing <code>require \u2018capybara/dsl</code>\u2018 instead of \u2018require \u2018capybara\u2019`</p>\n\n<p>See : <a href=\"https://github.com/teamcapybara/capybara/blob/master/README.md#setup\" rel=\"nofollow noreferrer\">https://github.com/teamcapybara/capybara/blob/master/README.md#setup</a></p>\n"}], "owner": {"reputation": 139, "user_id": 12069807, "user_type": "registered", "profile_image": "https://graph.facebook.com/167912891029515/picture?type=large", "display_name": "Wilfredo Casas", "link": "https://stackoverflow.com/users/12069807/wilfredo-casas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1577289892, "creation_date": 1577288313, "question_id": 59479799, "link": "https://stackoverflow.com/questions/59479799/cant-run-ruby-automation-file-with-cucumber-cannot-load-such-file-capybara", "title": "Can&#39;t run ruby automation file with cucumber - cannot load such file -- capybara (LoadError)", "body": "<p>When I run <strong>cucumber</strong>, I get this error</p>\n\n<blockquote>\n  <p><strong>cannot load such file -- capybara (LoadError)</strong></p>\n</blockquote>\n\n<p>According to <a href=\"https://stackoverflow.com/questions/29657046/loaderror-cannot-load-such-file-capybara-stand-alone-code\">this answer</a> that's because i don't have poltergeist installed.</p>\n\n<p>And if I run <strong>gem install poltergeist</strong>, I get</p>\n\n<blockquote>\n  <p>ERROR:  While executing gem ... (ArgumentError)\n      wrong number of arguments (given 1, expected 0)</p>\n</blockquote>\n\n<p>If I run <strong>gem list capybara</strong>, I just get </p>\n\n<blockquote>\n  <p><strong>* LOCAL GEMS *</strong></p>\n</blockquote>\n\n<p>For last, this is what part of my env.rb file looks like</p>\n\n<pre><code>Learn more or give us feedback\nrequire 'selenium-webdriver'\nrequire 'capybara'\nrequire 'capybara/poltergeist'\nrequire 'capybara/cucumber'\n\n$browser = ENV['browser'] ||:chrome\n$browser = $browser.to_sym\n\n$driver = ENV['driver'] || :selenium\n$driver = $driver.to_sym\n\nputs \"Driver: #{$driver}\"\nputs \"Browser: #{$browser}\"\n\n# For browser Firefox, geckodriver is required: https://github.com/mozilla/geckodriver/releases\n# echo $PATH\n# cd into geckodriver directory (probably Downloads) and extract from zip/tar\n# mv geckodriver /usr/local/bin/ (or whatever your $PATH is)\n# Run Firefox with:\n# cucumber /dir/some.feature driver=selenium browser=firefox\n\nCapybara.default_driver = $driver\n\nCapybara.register_driver :selenium do |app|\n    Capybara::Selenium::Driver.new(app, :browser =&gt; $browser,)\nend\n\nCapybara.register_driver :poltergeist do |app|\n    Capybara::Poltergeist::Driver.new(app, {js_errors: false, phantomjs_options: ['--ssl-protocol=auto']})\n    $platform = 'poltergeist'\nend\n</code></pre>\n\n<p>Any help will be appreciated</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 173, "user_id": 5922155, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z8Zdm.png?s=128&g=1", "display_name": "Asmita", "link": "https://stackoverflow.com/users/5922155/asmita"}, "edited": false, "score": 0, "creation_date": 1577292512, "post_id": 59479126, "comment_id": 105137306, "body": "If received_by_admin is a method which is returning a boolean value than you should write it like this: if (order.payment_status == &#39;Paid&#39; &amp;&amp; order.received_by_admin == false)"}], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 2, "last_activity_date": 1577283309, "creation_date": 1577283309, "answer_id": 59479222, "question_id": 59479126, "link": "https://stackoverflow.com/questions/59479126/if-condition-not-working-properly-with-operator/59479222#59479222", "title": "if condition not working properly with &amp;&amp; operator", "body": "<p>probably because <code>received_by_admin</code> is a boolean? So</p>\n\n<pre><code>order.payment_status == 'Paid' &amp;&amp; order.received_by_admin != true\n</code></pre>\n\n<p>or simpler</p>\n\n<pre><code>order.payment_status == 'Paid' &amp;&amp; !order.received_by_admin\n</code></pre>\n\n<p>the point here is that <code>true != 'true'</code></p>\n"}], "owner": {"reputation": 21, "user_id": 12504742, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wlk9T9Bd_Rw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfrxEYALJ9tCYAccDWfvmvgQge0Sg/photo.jpg?sz=128", "display_name": "Bilal Ahmad", "link": "https://stackoverflow.com/users/12504742/bilal-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 59479222, "answer_count": 1, "score": -1, "last_activity_date": 1577283309, "creation_date": 1577282602, "question_id": 59479126, "link": "https://stackoverflow.com/questions/59479126/if-condition-not-working-properly-with-operator", "title": "if condition not working properly with &amp;&amp; operator", "body": "<p>it also shows the link for order where received_by_admin is True.</p>\n\n<pre><code>if order.payment_status == 'Paid' &amp;&amp; order.received_by_admin != 'true'\n   link_to \"Payment Received\", \"orders/#{order.id}/?payment_status=Paid\", class: \"member_link\", method: :put\nend\n</code></pre>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user11544535"}, "edited": false, "score": 0, "creation_date": 1577293555, "post_id": 59478926, "comment_id": 105137538, "body": "explain more what you want? you need have different gemlist and can use different gemlist?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11544535"}, "edited": false, "score": 0, "creation_date": 1577293755, "post_id": 59478926, "comment_id": 105137576, "body": "or downgrading from 3.x.x to 2.x.x?"}], "owner": {"reputation": 2181, "user_id": 5598574, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aUJPQ.jpg?s=128&g=1", "display_name": "Hairi", "link": "https://stackoverflow.com/users/5598574/hairi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577302461, "creation_date": 1577281145, "last_edit_date": 1577302461, "question_id": 59478926, "link": "https://stackoverflow.com/questions/59478926/how-to-change-the-gem-package-manager-version-not-particular-gem-module-package", "title": "How to change the GEM package manager version, not particular gem/module/package", "body": "<p>Yes I read <a href=\"https://stackoverflow.com/questions/32432595/how-to-change-gem-package-managers-version\">this</a> question but, no answer was given. So is there such option?\nIn order to provide more information in the body I will repeat the title: How to change the version of GEM? Not gem as module or a package, the program gem that is installed along with ruby.</p>\n"}, {"tags": ["ruby", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 0, "last_activity_date": 1577320567, "creation_date": 1577320567, "answer_id": 59482827, "question_id": 59478025, "link": "https://stackoverflow.com/questions/59478025/why-gem-is-not-loaded-require-gems-gives-error-no-such-file/59482827#59482827", "title": "Why gem is not loaded: require gems gives error no such file", "body": "<blockquote>\n  <p>I installed gem 'ssh-net'.</p>\n</blockquote>\n\n<p>No, you didn't. You installed the gem <a href=\"https://rubygems.org/gems/net-ssh/\" rel=\"nofollow noreferrer\"><code>net-ssh</code></a>, as you can clearly see in the output of <code>bundle info</code> that you posted:</p>\n\n<blockquote>\n  <pre class=\"lang-none prettyprint-override\"><code>csrhub@csrhub:~/git/csrhub-api$ bundle info 'net-ssh'\n * net-ssh (5.2.0)\n       Summary: Net::SSH: a pure-Ruby implementation of the SSH2 client \n</code></pre>\n</blockquote>\n\n<p>Here you can see that the name of the gem is <code>net-ssh</code> and not <code>ssh-net</code> and that the name of the primary class is <code>Net::SSH</code>.</p>\n\n<blockquote>\n  <p>From the console I tried to <code>require</code> the gem like this:</p>\n  \n  <pre class=\"lang-rb prettyprint-override\"><code>irb(main):009:0* require 'ssh-net'\nLoadError: cannot load such file -- ssh-net\n</code></pre>\n</blockquote>\n\n<p>The primary class in this gem is called <a href=\"https://net-ssh.github.io/net-ssh/\" rel=\"nofollow noreferrer\"><code>Net::SSH</code></a>. (It integrates in the <code>Net</code> namespace of the Ruby standard library, which has libraries like <a href=\"https://ruby-doc.org/stdlib/libdoc/net/ftp/rdoc/\" rel=\"nofollow noreferrer\"><code>Net::FTP</code></a>, <a href=\"https://ruby-doc.org/stdlib/libdoc/net/http/rdoc/\" rel=\"nofollow noreferrer\"><code>Net::HTTP</code></a>, <a href=\"https://ruby-doc.org/stdlib/libdoc/net/imap/rdoc/\" rel=\"nofollow noreferrer\"><code>Net::IMAP</code></a>, <a href=\"https://ruby-doc.org/stdlib/libdoc/net/pop/rdoc/\" rel=\"nofollow noreferrer\"><code>Net::POP</code></a>, <a href=\"https://ruby-doc.org/stdlib/libdoc/net/smtp/rdoc/\" rel=\"nofollow noreferrer\"><code>Net::SMTP</code></a>, and <a href=\"https://ruby-doc.org/stdlib/libdoc/net/telnet/rdoc/\" rel=\"nofollow noreferrer\"><code>Net::Telnet</code></a>.)</p>\n\n<p>According to standard Ruby naming conventions, a class named <code>Net::SSH</code> should be located in a file named <code>lib/ssh.rb</code>. This is the file you need to <code>require</code>.</p>\n\n<p>This is also shown in <a href=\"https://net-ssh.github.io/net-ssh/#label-SYNOPSIS-3A\" rel=\"nofollow noreferrer\">the very first line of the very first code sample of the very first page of the documentation</a>:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'net/ssh'\n</code></pre>\n\n<blockquote>\n  <p>I see that both gems are placed in the same directory. Why <code>memcache</code> is invokable and the <code>ssh-net</code> is not? What am I missing?</p>\n</blockquote>\n\n<p>In 99.9% of all cases where a computer tells you it cannot find something, it is because that thing you told it to find is indeed not there. Computers are very, very good at finding things.</p>\n\n<p>The same thing is the case here: you told Ruby</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'ssh-net'\n</code></pre>\n\n<p>which means \"go through each directory in the <code>$LOAD_PATH</code> and look for a file named <code>ssh-net.rb</code>\". Such a file simply does not exist, ergo, you get a <code>LoadError</code> exception.</p>\n"}], "owner": {"reputation": 2181, "user_id": 5598574, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aUJPQ.jpg?s=128&g=1", "display_name": "Hairi", "link": "https://stackoverflow.com/users/5598574/hairi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577320567, "creation_date": 1577273683, "question_id": 59478025, "link": "https://stackoverflow.com/questions/59478025/why-gem-is-not-loaded-require-gems-gives-error-no-such-file", "title": "Why gem is not loaded: require gems gives error no such file", "body": "<p>I installed gem 'ssh-net'. From the console I tried to <code>require</code> the gem like this:</p>\n\n<pre><code>irb(main):009:0* require 'ssh-net'\nLoadError: cannot load such file -- ssh-net\n        from /var/lib/gems/2.3.0/gems/activesupport-4.2.10/lib/active_support/dependencies.rb:274:in `require'\n        from /var/lib/gems/2.3.0/gems/activesupport-4.2.10/lib/active_support/dependencies.rb:274:in `block in require'\n        from /var/lib/gems/2.3.0/gems/activesupport-4.2.10/lib/active_support/dependencies.rb:240:in `load_dependency'\n        from /var/lib/gems/2.3.0/gems/activesupport-4.2.10/lib/active_support/dependencies.rb:274:in `require'\n        from (irb):9\n        from /home/csrhub/git/csrhub-api/bin/console:150:in `&lt;top (required)&gt;'\n        from /var/lib/gems/2.3.0/gems/bundler-2.1.1/lib/bundler/cli/exec.rb:63:in `load'\n        from /var/lib/gems/2.3.0/gems/bundler-2.1.1/lib/bundler/cli/exec.rb:63:in `kernel_load'\n        from /var/lib/gems/2.3.0/gems/bundler-2.1.1/lib/bundler/cli/exec.rb:28:in `run'\n        from /var/lib/gems/2.3.0/gems/bundler-2.1.1/lib/bundler/cli.rb:476:in `exec'\n        from /var/lib/gems/2.3.0/gems/bundler-2.1.1/lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run'\n        from /var/lib/gems/2.3.0/gems/bundler-2.1.1/lib/bundler/vendor/thor/lib/thor/invocation.rb:127:in `invoke_command'\n        from /var/lib/gems/2.3.0/gems/bundler-2.1.1/lib/bundler/vendor/thor/lib/thor.rb:399:in `dispatch'\n        from /var/lib/gems/2.3.0/gems/bundler-2.1.1/lib/bundler/cli.rb:30:in `dispatch'\n        from /var/lib/gems/2.3.0/gems/bundler-2.1.1/lib/bundler/vendor/thor/lib/thor/base.rb:476:in `start'\n        from /var/lib/gems/2.3.0/gems/bundler-2.1.1/lib/bundler/cli.rb:24:in `start'\n        from /var/lib/gems/2.3.0/gems/bundler-2.1.1/exe/bundle:46:in `block in &lt;top (required)&gt;'\n        from /var/lib/gems/2.3.0/gems/bundler-2.1.1/lib/bundler/friendly_errors.rb:123:in `with_friendly_errors'\n        from /var/lib/gems/2.3.0/gems/bundler-2.1.1/exe/bundle:34:in `&lt;top (required)&gt;'\n        from /usr/local/bin/bundle:23:in `load'\n        from /usr/local/bin/bundle:23:in `&lt;main&gt;'\n</code></pre>\n\n<p>Then I tried with a gem that works:</p>\n\n<pre><code>irb(main):023:0* require 'memcache'\n=&gt; false\n</code></pre>\n\n<p>I printed the gems locations:</p>\n\n<pre><code>csrhub@csrhub:~/git/csrhub-api$ bundle info 'net-ssh'\n  * net-ssh (5.2.0)\n        Summary: Net::SSH: a pure-Ruby implementation of the SSH2 client protocol.\n        Homepage: https://github.com/net-ssh/net-ssh\n        Path: /var/lib/gems/2.3.0/gems/net-ssh-5.2.0\n\n\ncsrhub@csrhub:~/git/csrhub-api$ bundle info 'memcache'\n  * memcache-client (1.8.5)\n        Summary: A Ruby library for accessing memcached.\n        Homepage: http://github.com/mperham/memcache-client\n        Path: /var/lib/gems/2.3.0/gems/memcache-client-1.8.5\ncsrhub@csrhub:~/git/csrhub-api$ \n</code></pre>\n\n<p>I see that both gems are placed in the same directory. Why <code>memcache</code> is invokable and the <code>ssh-net</code> is not? What am I missing?</p>\n\n<p>May be it has something to do with <a href=\"https://stackoverflow.com/questions/59477399/warning-the-lockfile-is-being-updated-to-bundler-2-after-which-you-will-be-una\">this</a> ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 2, "creation_date": 1577294164, "post_id": 59477682, "comment_id": 105137683, "body": "Refactoring advice typically belongs on the code review stack exchange."}, {"owner": {"reputation": 11990, "user_id": 492767, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/446bc7fb73e79a187d60c977a7092527?s=128&d=identicon&r=PG", "display_name": "Victor", "link": "https://stackoverflow.com/users/492767/victor"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1577294946, "post_id": 59477682, "comment_id": 105137820, "body": "I did request in Code Review, but got no reply."}, {"owner": {"reputation": 1513, "user_id": 2044866, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b767d0f7110b85046df4be3333d281f?s=128&d=identicon&r=PG", "display_name": "Peilonrayz", "link": "https://stackoverflow.com/users/2044866/peilonrayz"}, "edited": false, "score": 0, "creation_date": 1577295075, "post_id": 59477682, "comment_id": 105137842, "body": "@Victor Wow, 8 views in 2 days. The ruby tag looks, err, abandoned."}], "answers": [{"comments": [{"owner": {"reputation": 11990, "user_id": 492767, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/446bc7fb73e79a187d60c977a7092527?s=128&d=identicon&r=PG", "display_name": "Victor", "link": "https://stackoverflow.com/users/492767/victor"}, "edited": false, "score": 1, "creation_date": 1577287853, "post_id": 59479720, "comment_id": 105136312, "body": "Thanks. It&#39;s generally to keep the HTML code in the view as much as we can though. Makes it easier for front-end developer."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 1, "creation_date": 1577348000, "post_id": 59479720, "comment_id": 105146406, "body": "You don&#39;t need the <code>to_a</code> on the range. Also, you could replace the if-elsif conditional with a couple of guard clauses using <code>next(value)</code>."}], "tags": [], "owner": {"reputation": 741, "user_id": 6894749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gbstY.jpg?s=128&g=1", "display_name": "Thang", "link": "https://stackoverflow.com/users/6894749/thang"}, "is_accepted": false, "score": 1, "last_activity_date": 1577428588, "last_edit_date": 1577428588, "creation_date": 1577287652, "answer_id": 59479720, "question_id": 59477682, "link": "https://stackoverflow.com/questions/59477682/rails-helper-to-display-rating-in-stars/59479720#59479720", "title": "Rails Helper to display rating in stars", "body": "<p>The way I would implement <code>show_star_rating</code>:</p>\n\n<pre><code>def show_star_rating(rating)\n  zero_star_icon_name = \"star\"\n  full_star_icon_name = \"star_fill\"\n  half_star_icon_name = \"star_lefthalf_fill\"\n  rating_round_point5 = (rating * 2).round / 2.0\n\n  (1..5).map do |i|\n    next(full_star_icon_name) if i &lt;= rating_round_point5\n    next(half_star_icon_name) if rating_round_point5 + 0.5 == i\n    zero_star_icon_name\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11990, "user_id": 492767, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/446bc7fb73e79a187d60c977a7092527?s=128&d=identicon&r=PG", "display_name": "Victor", "link": "https://stackoverflow.com/users/492767/victor"}, "edited": false, "score": 0, "creation_date": 1577367013, "post_id": 59480841, "comment_id": 105152646, "body": "Thanks. I&#39;d move the <code>full_and_half_star_count</code> private too."}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 2, "last_activity_date": 1577297543, "creation_date": 1577297543, "answer_id": 59480841, "question_id": 59477682, "link": "https://stackoverflow.com/questions/59477682/rails-helper-to-display-rating-in-stars/59480841#59480841", "title": "Rails Helper to display rating in stars", "body": "<p>You can make use of the <a href=\"https://ruby-doc.org/core/Array.html#method-c-new\" rel=\"nofollow noreferrer\"><code>Array.new</code></a>, passing in the maximum number of stars you want to show, and defaulting all the stars to empty. Then, you can <a href=\"https://ruby-doc.org/core/Array.html#method-i-fill\" rel=\"nofollow noreferrer\"><code>fill</code></a> in the number of full stars you need. Then, finally, thanks to <code>Numeric</code>'s <a href=\"https://ruby-doc.org/core/Numeric.html#method-i-divmod\" rel=\"nofollow noreferrer\"><code>divmod</code></a> returning either <code>0</code> or <code>1</code> for the number of half stars you need, you make one more pass and <code>fill</code> in the number of half stars you need:</p>\n\n<pre><code>module StarHelper\n  EMPTY_STAR_ICON = 'star'.freeze\n  FULL_STAR_ICON = 'star_fill'.freeze\n  HALF_STAR_ICON = 'star_lefthalf_fill'.freeze\n\n  def full_and_half_star_count(rating)\n    (rating * 2).round.divmod(2)\n  end\n\n  def stars(rating, max_stars: 5)\n    full_stars, half_stars = full_and_half_star_count(rating)\n\n    Array.new(max_stars, EMPTY_STAR_ICON).\n      fill(FULL_STAR_ICON, 0, full_stars).\n      fill(HALF_STAR_ICON, full_stars, half_stars)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 11990, "user_id": 492767, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/446bc7fb73e79a187d60c977a7092527?s=128&d=identicon&r=PG", "display_name": "Victor", "link": "https://stackoverflow.com/users/492767/victor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 59480841, "answer_count": 2, "score": 0, "last_activity_date": 1577428588, "creation_date": 1577271503, "question_id": 59477682, "link": "https://stackoverflow.com/questions/59477682/rails-helper-to-display-rating-in-stars", "title": "Rails Helper to display rating in stars", "body": "<p>Using Rails 6. Here's a piece that I wrote just to display number of stars. Obviously I am disgusted by my own code. How would you refactor?</p>\n\n<pre><code># application_helper.rb\nmodule ApplicationHelper\n  def show_star_rating(rating)\n    zero_star_icon_name = \"star\"\n    full_star_icon_name = \"star_fill\"\n    half_star_icon_name = \"star_lefthalf_fill\"\n    total_stars = []\n    round_by_half = (rating * 2).round / 2.0\n    (round_by_half.to_i).times { total_stars &lt;&lt; full_star_icon_name }\n\n    if round_by_half - round_by_half.to_i == 0.5\n      total_stars &lt;&lt; half_star_icon_name\n    end\n\n    if total_stars.size != 5\n      (5 - total_stars.size).times { total_stars &lt;&lt; zero_star_icon_name }\n    end\n\n    total_stars\n  end\nend\n\n# show.html.erb\n&lt;% show_star_rating(agent_review.rating).each do |star| %&gt;\n  &lt;i class=\"f7-icons\"&gt;&lt;%= star %&gt;&lt;/i&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "rubygems", "bundler"], "answers": [{"tags": [], "owner": {"reputation": 2504, "user_id": 3729369, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FYV4M.png?s=128&g=1", "display_name": "simonwo", "link": "https://stackoverflow.com/users/3729369/simonwo"}, "is_accepted": false, "score": 0, "last_activity_date": 1577354123, "creation_date": 1577354123, "answer_id": 59486698, "question_id": 59477399, "link": "https://stackoverflow.com/questions/59477399/warning-the-lockfile-is-being-updated-to-bundler-2-after-which-you-will-be-una/59486698#59486698", "title": "Warning: the lockfile is being updated to Bundler 2, after which you will be unable to return to Bundler 1", "body": "<p>It\u2019s not something to worry about unless you need to use the project with Bundler v1 anywhere. The only non-compatibility will be for developers or environments who can only have Bundler v1 installed.</p>\n\n<p>From <a href=\"https://bundler.io/guides/bundler_2_upgrade.html\" rel=\"nofollow noreferrer\">the documentation</a>:</p>\n\n<blockquote>\n  <p><strong>What happens if my application needs Bundler 2, but I only have\n  Bundler 1 installed?</strong></p>\n  \n  <p>If you try to use Bundler 1 on an application\n  that requires Bundler 2, you\u2019ll see an error message explaining that\n  you need to install Bundler 2. Go ahead and run <code>gem install bundler</code>,\n  and then it should work.</p>\n</blockquote>\n\n<p>This is an irreversible change, so you can\u2019t go backwards.</p>\n\n<blockquote>\n  <p><strong>Can I downgrade my application from Bundler 2 to Bundler 1?</strong> </p>\n  \n  <p>Bundler 2 does not provide a way to downgrade a Gemfile back to Bundler 1.\n  Instead, we recommend checking in your <code>Gemfile</code> and <code>Gemfile.lock</code> before\n  you upgrade your application. That way, if something goes wrong, you\n  can revert to the previous commit and go back to using Bundler 1.</p>\n</blockquote>\n\n<p>If it updated automatically and you didn\u2019t specify the <code>--bundle</code> switch, that might be because one of the gems you updated had a dependency on Bundler itself at a more recent version. Check your <code>Gemfile.lock</code> and see if any gems have Bundler as a dependency.</p>\n"}], "owner": {"reputation": 2181, "user_id": 5598574, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aUJPQ.jpg?s=128&g=1", "display_name": "Hairi", "link": "https://stackoverflow.com/users/5598574/hairi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 794, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1577354123, "creation_date": 1577269289, "question_id": 59477399, "link": "https://stackoverflow.com/questions/59477399/warning-the-lockfile-is-being-updated-to-bundler-2-after-which-you-will-be-una", "title": "Warning: the lockfile is being updated to Bundler 2, after which you will be unable to return to Bundler 1", "body": "<p>I put some new gems in my Gemfile and ran <code>bundle install</code>.\nThe installation went successfully, but at the end I got this warning:</p>\n\n<blockquote>\n  <p>Warning: the lockfile is being updated to Bundler 2, after which you will be unable to return to Bundler 1.</p>\n</blockquote>\n\n<p>What does this mean - I mean it obviously states that the lockfile is being updated to Bundler2 and I wont be able to return to Bundler 1, and yet, should I be concerned about this? Is there any danger of non-compatibility after this? Why is it updated automatically?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "is_accepted": false, "score": 0, "last_activity_date": 1577269279, "last_edit_date": 1577269279, "creation_date": 1577267728, "answer_id": 59477203, "question_id": 59477098, "link": "https://stackoverflow.com/questions/59477098/please-write-out-in-simple-english-without-too-many-key-shortcuts-like-pop-or/59477203#59477203", "title": "Please write out in simple English without too many key shortcuts like .pop or .include, etc., but I am completely lost as to how to do this", "body": "<pre><code>a = \n  strange_words[\n    \"taco\", \"eggs\", \"excellent\", \"exponential\",\n    \"artistic\", \"cat\", \"eat\"\n  ] \n</code></pre>\n\n<p>Code</p>\n\n<pre><code>puts a.select { |x| x.begin_with?'e' or x.length &lt; 6 }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1577269381, "creation_date": 1577269381, "answer_id": 59477417, "question_id": 59477098, "link": "https://stackoverflow.com/questions/59477098/please-write-out-in-simple-english-without-too-many-key-shortcuts-like-pop-or/59477417#59477417", "title": "Please write out in simple English without too many key shortcuts like .pop or .include, etc., but I am completely lost as to how to do this", "body": "<p>Another way round would be to use regular expression.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>strange_words = [\n  \"taco\", \"eggs\", \"excellent\", \"exponential\",\n  \"artistic\", \"cat\", \"eat\"\n]\n\nstrange_words.select { |w| w[/\\A[^e].{5,}/i] }\n#\u21d2 [\"artistic\"]\n\nstrange_words.reject { |w| w[/\\A[^e].{5,}/i] }\n#\u21d2 all but `\"artistic\"`\n\n</code></pre>\n\n<p>The regular expression literally means \u201cstarts with anything but <code>\"e\"</code> followed by at least five characters (summing up to six+.)</p>\n"}], "owner": {"reputation": 1, "user_id": 12594994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f812343f448003d1a20d0ecd6060d56a?s=128&d=identicon&r=PG&f=1", "display_name": "Rooh", "link": "https://stackoverflow.com/users/12594994/rooh"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "closed_date": 1577319207, "answer_count": 2, "score": -4, "last_activity_date": 1577269381, "creation_date": 1577266962, "last_edit_date": 1577269211, "question_id": 59477098, "link": "https://stackoverflow.com/questions/59477098/please-write-out-in-simple-english-without-too-many-key-shortcuts-like-pop-or", "closed_reason": "Needs more focus", "title": "Please write out in simple English without too many key shortcuts like .pop or .include, etc., but I am completely lost as to how to do this", "body": "<p>Write a method <code>strange_words</code> that accept an array of strings The method should return an array containing all strings that are either shorter than 6 characters or begin with <code>\"e\"</code>.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>puts strange_words[\n  \"taco\", \"eggs\", \"excellent\", \"exponential\",\n  \"artistic\", \"cat\", \"eat\"\n]\nputs strange_words[\n  \"elegant\", \"ellen\", \"monsterous\"\n]\n</code></pre>\n"}, {"tags": ["c", "ruby", "assembly", "gdb", "sigfpe"], "comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1577250761, "post_id": 59475312, "comment_id": 105128793, "body": "Note that <code>INT_MIN&#47;-1</code> on signed integers will also SIGFPE on 2&#39;s complement machines that raise an arithmetic exception on divide overflow (e.g. x86).  But it looks like you&#39;re using some wide typedef <code>OnigDistance</code> and this is faulting inside a GCC helper function; possible its simply buggy for large inputs on this obscure ISA?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1577250768, "post_id": 59475312, "comment_id": 105128794, "body": "At least in the debug case there is a <code>ONIG_INFINITE_DISTANCE &#47; m</code> before the zero check."}, {"owner": {"reputation": 4043, "user_id": 6949852, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uebCh.png?s=128&g=1", "display_name": "\u9673 \u529b", "link": "https://stackoverflow.com/users/6949852/%e9%99%b3-%e5%8a%9b"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1577252103, "post_id": 59475312, "comment_id": 105128959, "body": "I have edit the question and add missed definition/typedef @PeterCordes"}, {"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 1, "creation_date": 1577257341, "post_id": 59475312, "comment_id": 105129679, "body": "I&#39;d start by disassembling __divlu to see what instruction its faulting on. You&#39;ll probably find that it&#39;s either dividing by 0 or has a divide overflow and needs to be fixed like Peter Cordes said. Given the Sunway instruction set is undocumented you&#39;re probably on your own after that."}], "owner": {"reputation": 4043, "user_id": 6949852, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uebCh.png?s=128&g=1", "display_name": "\u9673 \u529b", "link": "https://stackoverflow.com/users/6949852/%e9%99%b3-%e5%8a%9b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1577316476, "creation_date": 1577249237, "last_edit_date": 1577316476, "question_id": 59475312, "link": "https://stackoverflow.com/questions/59475312/how-to-debug-sigfpe-when-divide-by-zero-doesnt-occur", "title": "How to debug sigfpe when divide-by-zero doesn&#39;t occur", "body": "<p>I'm trying to compile ruby with <code>O0 -ggdb3</code> on <a href=\"https://en.wikipedia.org/wiki/Sunway_(processor)\" rel=\"nofollow noreferrer\">sw64</a>---- a <a href=\"https://en.wikipedia.org/wiki/DEC_Alpha\" rel=\"nofollow noreferrer\">alpha</a>-like arch and met a weird SIGFPE error: </p>\n\n<pre><code>(gdb) bt \n#0  0x000002000544463c in __divlu ()\n   from /lib/libc.so.6.1\n#1  0x0000020001fe6808 in distance_multiply (\n    d=18446744073709551615, m=1) at regcomp.c:109\n#2  0x0000020001ff5a44 in optimize_node_left (\n    node=0x121f43be0, opt=0x2000db31480,\n    env=0x2000db31678) at regcomp.c:5247\n#3  0x0000020001ff4b6c in optimize_node_left (\n    node=0x122387f60, opt=0x2000db317c0,\n    env=0x2000db319b8) at regcomp.c:4982\n#4  0x0000020001ff62c4 in set_optimize_info_from_tree (node=0x122387f60, reg=0x12216df60,\n    scan_env=0x2000db31a20) at regcomp.c:5417\n#5  0x0000020001ff6d64 in onig_compile_ruby (\n    reg=0x12216df60,\n    pattern=0x121c021e0 \"\\\\A([^:\\\\s]*)(?:::([^:\\\\s]*))?\\\\s*=(.*)\\\\z\", pattern_end=0x121c02205 \"\",\n    einfo=0x2000db31bc0,\n    sourcefile=0x12109eea0 \"-\", sourceline=90)\n    at regcomp.c:5854\n#6  0x0000020001fd9ef4 in onig_new_with_source (\n    reg=0x2000db31bd8,\n    pattern=0x121c021e0 \"\\\\A([^:\\\\s]*)(?:::([^:\\\\s]*))?\\\\s*=(.*)\\\\z\", pattern_end=0x121c02205 \"\",\n    option=0, enc=0x12108c840,\n    syntax=0x2000213fef8 &lt;OnigSyntaxRuby&gt;,\n    einfo=0x2000db31bc0,\n    sourcefile=0x12109eea0 \"-\", sourceline=90)\n    at re.c:842\n#7  0x0000020001fd9fe8 in make_regexp (\n    s=0x121c021e0 \"\\\\A([^:\\\\s]*)(?:::([^:\\\\s]*))?\\\\s*=(.*)\\\\z\", len=37, enc=0x12108c840, flags=0,\n    err=0x2000db31d20 \"\",\n&lt;tinue, or q &lt;return&gt; to quit---\n</code></pre>\n\n<p>IIUC, the backtrace from gdb tells me that the frame 1 <code>distance_multiply</code> is the root cause of sigfpe. </p>\n\n<p>Below is the definition of <code>distance_multiply</code></p>\n\n<pre class=\"lang-c prettyprint-override\"><code>static OnigDistance\ndistance_multiply(OnigDistance d, int m)\n{\n  if (m == 0) return 0;\n\n  if (d &lt; ONIG_INFINITE_DISTANCE / m)\n    return d * m;\n  else\n    return ONIG_INFINITE_DISTANCE;\n}\n</code></pre>\n\n<p>As you can see, if m is zero, it will return directly, so <code>devided-by-zero</code> sigfpe will never occur. I have also tried to dump the value of <code>d</code> and <code>m</code> with the help of <code>printf</code>: </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>static OnigDistance\ndistance_multiply(OnigDistance d, int m)\n{\n    fprintf(stderr, \"\\n\\nd = %zu, m = %d, ONIG_INFINITE_DISTANCE = %d    \", d, m, ONIG_INFINITE_DISTA\\\nNCE );\n  if (m == 0)\n  {\n    fprintf(stderr, \"m == 0, should return\\n\");\n          return 0;\n  }\n\n  if (d &lt; ONIG_INFINITE_DISTANCE / m)\n  {\n\n    fprintf(stderr, \"d &lt; ONIG_INFINITE_DISTANCE / m\\n\");\n    return d * m;\n  }\n  else\n  {\n    fprintf(stderr, \"else\\n\");\n    return ONIG_INFINITE_DISTANCE;\n  }\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>#+BEGIN_SRC\nd = 1, m = 0, ONIG_INFINITE_DISTANCE = -1    m == 0, should return\n\n\nd = 1, m = 1, ONIG_INFINITE_DISTANCE = -1    d &lt; ONIG_INFINITE_DISTANCE / m\n 22% [198/871]  ext/psych/lib/psych.rb\n\nd = 1, m = 1, ONIG_INFINITE_DISTANCE = -1\nThread 1 \"ruby2.5\" received signal SIGFPE, Arithmetic exception.\n0x000002000209263c in __divlu () from /lib/libc.so.6.1\n#+END_SRC\n\n#+BEGIN_SRC\nd = 1, m = 0, ONIG_INFINITE_DISTANCE = -1    m == 0, should return\n\n\nd = 1, m = 2, ONIG_INFINITE_DISTANCE = -1    d &lt; ONIG_INFINITE_DISTANCE / m\n 43% [378/871]  lib/net/http.rb\n\nd = 1, m = 1, ONIG_INFINITE_DISTANCE = -1\nThread 1 \"ruby2.5\" received signal SIGFPE, Arithmetic exception.\n0x0000020004bbc63c in __divlu () from /lib/libc.so.6.1\n#+END_SRC\n\n#+BEGIN_SRC\nd = 1, m = 0, ONIG_INFINITE_DISTANCE = -1    m == 0, should return\n\n\nd = 1, m = 1, ONIG_INFINITE_DISTANCE = -1    d &lt; ONIG_INFINITE_DISTANCE / m\n 22% [198/871]  ext/psych/lib/psych.rb\n\nd = 1, m = 1, ONIG_INFINITE_DISTANCE = -1\nThread 1 \"ruby2.5\" received signal SIGFPE, Arithmetic exception.\n0x000002000d9f063c in __divlu () from /lib/libc.so.6.1\n#+END_SRC\n\n#+BEGIN_SRC\nd = 1, m = 0, ONIG_INFINITE_DISTANCE = -1    m == 0, should return\n\n\nd = 1, m = 1, ONIG_INFINITE_DISTANCE = -1    d &lt; ONIG_INFINITE_DISTANCE / m\n 22% [198/871]  ext/psych/lib/psych.rb\n\nd = 1, m = 1, ONIG_INFINITE_DISTANCE = -1\nThread 1 \"ruby2.5\" received signal SIGFPE, Arithmetic exception.\n0x0000020001abc63c in __divlu () from /lib/libc.so.6.1\n#+END_SRC\n\n#+BEGIN_SRC\nd = 1, m = 0, ONIG_INFINITE_DISTANCE = -1    m == 0, should return\n\n\nd = 1, m = 1, ONIG_INFINITE_DISTANCE = -1    d &lt; ONIG_INFINITE_DISTANCE / m\n 22% [198/871]  ext/psych/lib/psych.rb\n\nd = 1, m = 1, ONIG_INFINITE_DISTANCE = -1\nThread 1 \"ruby2.5\" received signal SIGFPE, Arithmetic exception.\n0x0000020005ce263c in __divlu () from /lib/libc.so.6.1\n#+END_SRC\n\n#+BEGIN_SRC\nd = 23, m = 1, ONIG_INFINITE_DISTANCE = -1    d &lt; ONIG_INFINITE_DISTANCE / m\n\n\nd = 24, m = 1, ONIG_INFINITE_DISTANCE = -1    d &lt; ONIG_INFINITE_DISTANCE / m\n\n\nd = 1, m = 0, ONIG_INFINITE_DISTANCE = -1    m == 0, should return\n 37% [329/871]  lib/getoptlong.rb\n\nd = 1, m = 1, ONIG_INFINITE_DISTANCE = -1\nThread 1 \"ruby2.5\" received signal SIGFPE, Arithmetic exception.\n0x0000020000ba863c in __divlu () from /lib/libc.so.6.1\n(gdb)\n#+END_SRC\n\n</code></pre>\n\n<p>From the log, we can see that the last log is always:</p>\n\n<blockquote>\n  <p>d = 1, m = 1, ONIG_INFINITE_DISTANCE = -1</p>\n</blockquote>\n\n<p>and <code>d &lt; ONIG_INFINITE_DISTANCE / m</code> part is not printed because it has trapped into sigfpe already. What's strange is that some previous logs also printed <code>d = 1, m = 1, ONIG_INFINITE_DISTANCE = -1</code>, which means when <code>d = 1</code> and <code>m = 1</code>, sigfpe doesn't occur in those cases. </p>\n\n<p>What may happend? I have no ideas any more. Can disassembly help here?</p>\n\n<h2>EDIT:</h2>\n\n<p>Sorry for the lack of macro definitions:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#define ONIG_INFINITE_DISTANCE  ~((OnigDistance )0)\ntypedef size_t         OnigDistance;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1578549668, "last_edit_date": 1578549668, "creation_date": 1577252284, "answer_id": 59475516, "question_id": 59474718, "link": "https://stackoverflow.com/questions/59474718/grouping-by-into-a-list-with-activerecord-in-rails/59475516#59475516", "title": "Grouping by into a list with activerecord in rails", "body": "<p><code>Roles.where(id: 2)</code> already returns the single record. You might instead start with <code>users</code> and join <code>roles</code> table doing something like this.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>User.\n  joins(user_roles: :roles).\n  where('roles.id = 2').\n  select(\"user_roles.role, GROUP_CONCAT(DISTINCT roles.group_id SEPARATOR ',') \").\n  group(:role)\n</code></pre>\n\n<p>Or, if you have the model for <code>user_roles</code>, start with it since you nevertheless do not query anything from <code>users</code>.</p>\n"}], "owner": {"reputation": 1487, "user_id": 3575018, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/iHBDs.jpg?s=128&g=1", "display_name": "thebenman", "link": "https://stackoverflow.com/users/3575018/thebenman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 59475516, "answer_count": 1, "score": 0, "last_activity_date": 1578549668, "creation_date": 1577240358, "question_id": 59474718, "link": "https://stackoverflow.com/questions/59474718/grouping-by-into-a-list-with-activerecord-in-rails", "title": "Grouping by into a list with activerecord in rails", "body": "<p>I need to achieve something exactly similar to <a href=\"https://stackoverflow.com/questions/491566/how-to-get-list-of-values-in-group-by-clause\">How to get list of values in GROUP_BY clause?</a> but I need to use active record query interface in rails 4.2.1.</p>\n\n<p>I have only gotten so far. </p>\n\n<pre><code>Roles.where(id: 2)\n        .select(\"user_roles.id, user_roles.role, GROUP_CONCAT(DISTINCT roles.group_id SEPARATOR ',') \")\n        .group(:role)\n</code></pre>\n\n<p>But this just returns an <code>ActiveRecord::Relation</code>object with a single entry that has <code>id</code> and <code>role</code>. </p>\n\n<p>How do I achieve that same with active record without having to pull in all the relationships and manually building such an object?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "reactjs"], "answers": [{"tags": [], "owner": {"reputation": 3, "user_id": 3871657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1534ffe89641b1e58b80a3d399b80b45?s=128&d=identicon&r=PG&f=1", "display_name": "AMANi", "link": "https://stackoverflow.com/users/3871657/amani"}, "is_accepted": false, "score": 0, "last_activity_date": 1578676463, "creation_date": 1578676463, "answer_id": 59686185, "question_id": 59474518, "link": "https://stackoverflow.com/questions/59474518/react-rails-rails-sessionuser-id-not-persisting/59686185#59686185", "title": "React - Rails. Rails session[:user_id] not persisting", "body": "<p>you need to add the following <code>config.middleware.use ActionDispatch::Cookies\nconfig.middleware.use ActionDispatch::Session::CookieStore</code> to config/application.rb </p>\n"}], "owner": {"reputation": 893, "user_id": 10349152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d8dc4776f1d68d822fba0406d9510af?s=128&d=identicon&r=PG&f=1", "display_name": "kevin", "link": "https://stackoverflow.com/users/10349152/kevin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 237, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1608290183, "creation_date": 1577236846, "last_edit_date": 1592644375, "question_id": 59474518, "link": "https://stackoverflow.com/questions/59474518/react-rails-rails-sessionuser-id-not-persisting", "title": "React - Rails. Rails session[:user_id] not persisting", "body": "<p>I am building a React - Rails API application. Following a tutorial, I <em>intentionally</em> did not instantiate Rails as an API, rather it's the full framework. So, according to the the tutorial giver, I should have access to session and not have to download any gems.</p>\n<p><strong>Problem:</strong> When I refresh the page the session should keep the user logged in. It is not. Instead of returning with: <code>{ logged_in: true, user: {...} }</code>, it is returning with <code>{ logged_in: false }</code> (the else conditional in session's logged_in method). The <code>@current_user</code> from the concern file is returning as <code>nil</code>, more specifically, its <code>session[:user_id]</code> is returning nil, so the conditional is failing.</p>\n<p>I'm out of ideas, I've been messing with this for over an hour and still no luck. If anything else is needed please let me know.</p>\n<h3>Rails: Sessions Controller</h3>\n<pre><code>class SessionsController &lt; ApplicationController\n  include CurrentUserConcern\n\n  def create\n    user = User.find_by(email: params[&quot;user&quot;][&quot;email&quot;])\n               .try(:authenticate, params[&quot;user&quot;][&quot;password&quot;])\n\n    if user\n      session[:user_id] = user.id\n      // binding.pry shows session[:user_id] = 4 (or whatever the id is)\n      render json: {\n        status: :created,\n        logged_in: true,\n        user: user\n      }\n    else\n      render json: { status: 401 }\n    end\n  end\n\n  // Method in question:\n  def logged_in\n    // @current_user == nil\n    if @current_user\n      render json: {\n        logged_in: true,\n        user: @current_user\n      }\n    else\n      render json: {\n        logged_in: false\n      }\n    end\n  end\n\n  def logout\n    reset_session\n    render json: { status: 200, logged_out: true }\n  end\nend\n</code></pre>\n<h3>Rails: controllers/concerns/current_user_concern.rb</h3>\n<pre><code>module CurrentUserConcern\n  extend ActiveSupport::Concern\n\n  included do\n    before_action :set_current_user\n  end\n\n  def set_current_user\n    if session[:user_id]\n    // binding.pry shows session[:user_id] = nil\n      @current_user = User.find_by(id: session[:user_id])\n    end\n  end\nend\n</code></pre>\n<h3>React: App.js</h3>\n<pre><code>// Method that is interacting with Rails\ncheckLoginStatus = () =&gt; {\n    axios\n       .get('http://localhost:3001/logged_in', { withCredentials: true })\n          .then((response) =&gt; {\n            // Does not enter the conditions RESPONSE = data.logged_in: false\n            if (response.data.logged_in &amp;&amp; this.state.loggedInStatus === 'NOT_LOGGED_IN') {\n                this.setState({ loggedInStatus: 'LOGGED_IN', user: response.data.user });\n            } else if (!response.data.logged_in &amp;&amp; this.state.loggedInStatus === 'LOGGED_IN') {\n                this.setState({ loggedInStatus: 'NOT_LOGGED_IN', user: {} });\n            }\n        })\n        .catch((error) =&gt; console.log('hello error.', error));\n    };\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "nokogiri"], "comments": [{"owner": {"reputation": 1330, "user_id": 887947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ace01b4b1b5759067b48b6b074902e65?s=128&d=identicon&r=PG", "display_name": "Ben Trewern", "link": "https://stackoverflow.com/users/887947/ben-trewern"}, "edited": false, "score": 1, "creation_date": 1577219316, "post_id": 59473015, "comment_id": 105124725, "body": "I&#39;ve had problems with a ruby-2.6.3 installed with rvm and installing some gems.  It might be worth installing the latest version of rvm with &quot;rvm get stable&quot; and then removing and reinstalling ruby-2.6.3. (Or install a newer version of ruby)."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 2, "creation_date": 1577220102, "post_id": 59473015, "comment_id": 105124875, "body": "can you update your question to include the output of <code>gem env</code> ?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1577222059, "post_id": 59473015, "comment_id": 105125281, "body": "We need to see the output of <code>gem env</code>."}, {"owner": {"reputation": 1, "user_id": 12592759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31a7867871df8c6999df6540263784c0?s=128&d=identicon&r=PG&f=1", "display_name": "jarvi", "link": "https://stackoverflow.com/users/12592759/jarvi"}, "reply_to_user": {"reputation": 1330, "user_id": 887947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ace01b4b1b5759067b48b6b074902e65?s=128&d=identicon&r=PG", "display_name": "Ben Trewern", "link": "https://stackoverflow.com/users/887947/ben-trewern"}, "edited": false, "score": 0, "creation_date": 1577224089, "post_id": 59473015, "comment_id": 105125626, "body": "@BenTrewern I think I have the latest version of RVM"}, {"owner": {"reputation": 1, "user_id": 12592759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31a7867871df8c6999df6540263784c0?s=128&d=identicon&r=PG&f=1", "display_name": "jarvi", "link": "https://stackoverflow.com/users/12592759/jarvi"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1577224213, "post_id": 59473015, "comment_id": 105125645, "body": "@lacostenycoder Sorry for the delay. tried to reinstall a bunch of things. I have added the GEM ENV output."}, {"owner": {"reputation": 1, "user_id": 12592759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31a7867871df8c6999df6540263784c0?s=128&d=identicon&r=PG&f=1", "display_name": "jarvi", "link": "https://stackoverflow.com/users/12592759/jarvi"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1577224302, "post_id": 59473015, "comment_id": 105125668, "body": "@theTinMan I have edited my question to show the gem env output."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1577226006, "post_id": 59473015, "comment_id": 105125949, "body": "How did you install RVM? Was it following &quot;<a href=\"https://rvm.io/rvm/install\" rel=\"nofollow noreferrer\">rvm.io/rvm/install</a>&quot;? What does <code>rvm list rubies</code> output? It looks like you have two Rubies, but we can&#39;t tell which you&#39;re using as your default. RVM&#39;s documentation is very thorough and I highly recommend reading at least <a href=\"https://rvm.io/workflow/examples\" rel=\"nofollow noreferrer\">rvm.io/workflow/examples</a>."}, {"owner": {"reputation": 1, "user_id": 12592759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31a7867871df8c6999df6540263784c0?s=128&d=identicon&r=PG&f=1", "display_name": "jarvi", "link": "https://stackoverflow.com/users/12592759/jarvi"}, "edited": false, "score": 0, "creation_date": 1577226353, "post_id": 59473015, "comment_id": 105126006, "body": "I followed this tutorial. Step 3 <code>curl -sSL https:&#47;&#47;get.rvm.io | bash -s stable --ruby</code> is what I used to get rvm <a href=\"https://vitux.com/how-to-install-latest-ruby-on-rails-on-ubuntu/\" rel=\"nofollow noreferrer\">latest-ruby-on-rails-on-ubuntu</a>                           <code>=* ruby-2.6.3 [ x86_64 ]  # =&gt; - current # =* - current &amp;&amp; default #  * - default </code>"}, {"owner": {"reputation": 2504, "user_id": 3729369, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FYV4M.png?s=128&g=1", "display_name": "simonwo", "link": "https://stackoverflow.com/users/3729369/simonwo"}, "edited": false, "score": 0, "creation_date": 1577354597, "post_id": 59473015, "comment_id": 105148504, "body": "What version of Ubuntu? Are you using a very old gcc?"}, {"owner": {"reputation": 1, "user_id": 12592759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31a7867871df8c6999df6540263784c0?s=128&d=identicon&r=PG&f=1", "display_name": "jarvi", "link": "https://stackoverflow.com/users/12592759/jarvi"}, "reply_to_user": {"reputation": 2504, "user_id": 3729369, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FYV4M.png?s=128&g=1", "display_name": "simonwo", "link": "https://stackoverflow.com/users/3729369/simonwo"}, "edited": false, "score": 0, "creation_date": 1577434232, "post_id": 59473015, "comment_id": 105168636, "body": "@simonwo ubuntu version 18.04, gc version, gcc (Homebrew GCC 5.5.0_5) 5.5.0"}, {"owner": {"reputation": 2504, "user_id": 3729369, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FYV4M.png?s=128&g=1", "display_name": "simonwo", "link": "https://stackoverflow.com/users/3729369/simonwo"}, "edited": false, "score": 1, "creation_date": 1577440696, "post_id": 59473015, "comment_id": 105170715, "body": "At least one of those warnings <code>-Wduplicated-cond</code> is only available in GCC 6.0. Can you update your gcc version?"}, {"owner": {"reputation": 1, "user_id": 12592759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31a7867871df8c6999df6540263784c0?s=128&d=identicon&r=PG&f=1", "display_name": "jarvi", "link": "https://stackoverflow.com/users/12592759/jarvi"}, "reply_to_user": {"reputation": 2504, "user_id": 3729369, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FYV4M.png?s=128&g=1", "display_name": "simonwo", "link": "https://stackoverflow.com/users/3729369/simonwo"}, "edited": false, "score": 0, "creation_date": 1577478878, "post_id": 59473015, "comment_id": 105184066, "body": "@simonwo I tired updating it using this <a href=\"https://tuxamito.com/wiki/index.php/Installing_newer_GCC_versions_in_Ubuntu\" rel=\"nofollow noreferrer\">method</a> but I get an error. Currently looking at how to fix it"}], "owner": {"reputation": 1, "user_id": 12592759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31a7867871df8c6999df6540263784c0?s=128&d=identicon&r=PG&f=1", "display_name": "jarvi", "link": "https://stackoverflow.com/users/12592759/jarvi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 447, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577583282, "creation_date": 1577217777, "last_edit_date": 1577583282, "question_id": 59473015, "link": "https://stackoverflow.com/questions/59473015/how-to-installi-nokogiri-after-failed-to-build-gem-native-extension", "title": "How to installi Nokogiri after failed to build gem native extension", "body": "<p>I tried to resolve the issues with some of the suggestions provided by other people having the same/similar issue, however none of them seem to have worked.  I  also followed Nokogiri's website to install it separately.\nI am running Ubuntu 18.04.</p>\n\n<pre><code>sudo apt-get install build-essential patch ruby-dev zlib1g-dev liblzma-dev\nsudo apt-get install libgmp-dev\ngem install nokogiri\n</code></pre>\n\n<p>I also tried:</p>\n\n<pre><code>gem install nokogiri -- --use-system-libraries\n</code></pre>\n\n<p>I also updated the system using:</p>\n\n<pre><code>gem update --system\n</code></pre>\n\n<p>with no luck</p>\n\n<p>Error in terminal:</p>\n\n<pre><code>Building native extensions. This could take a while...\nERROR:  Error installing nokogiri:\n  ERROR: Failed to build gem native extension.\n\n    current directory: /home/johnarvi/.rvm/gems/ruby-2.6.3/gems/nokogiri-1.10.7/ext/nokogiri\n/usr/share/rvm/rubies/ruby-2.6.3/bin/ruby -I /usr/share/rvm/rubies/ruby-2.6.3/lib/ruby/site_ruby/2.6.0 -r ./siteconf20191224-8577-xanoms.rb extconf.rb\nchecking if the C compiler accepts ... *** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\n\nProvided configuration options:\n  --with-opt-dir\n  --without-opt-dir\n  --with-opt-include\n  --without-opt-include=${opt-dir}/include\n  --with-opt-lib\n  --without-opt-lib=${opt-dir}/lib\n  --with-make-prog\n  --without-make-prog\n  --srcdir=.\n  --curdir\n  --ruby=/usr/share/rvm/rubies/ruby-2.6.3/bin/$(RUBY_BASE_NAME)\n  --help\n  --clean\n/usr/share/rvm/rubies/ruby-2.6.3/lib/ruby/2.6.0/mkmf.rb:467:in `try_do': The compiler failed to generate an executable file. (RuntimeError)\nYou have to install development tools first.\n  from /usr/share/rvm/rubies/ruby-2.6.3/lib/ruby/2.6.0/mkmf.rb:585:in `block in try_compile'\n  from /usr/share/rvm/rubies/ruby-2.6.3/lib/ruby/2.6.0/mkmf.rb:532:in `with_werror'\n  from /usr/share/rvm/rubies/ruby-2.6.3/lib/ruby/2.6.0/mkmf.rb:585:in `try_compile'\n  from extconf.rb:138:in `nokogiri_try_compile'\n  from extconf.rb:162:in `block in add_cflags'\n  from /usr/share/rvm/rubies/ruby-2.6.3/lib/ruby/2.6.0/mkmf.rb:643:in `with_cflags'\n  from extconf.rb:161:in `add_cflags'\n  from extconf.rb:416:in `&lt;main&gt;'\n\nTo see why this extension failed to compile, please check the mkmf.log which can be found here:\n\n  /home/johnarvi/.rvm/gems/ruby-2.6.3/extensions/x86_64-linux/2.6.0/nokogiri-1.10.7/mkmf.log\n</code></pre>\n\n<p>mkmf.log file:</p>\n\n<pre><code>\"gcc -o conftest -I/usr/share/rvm/rubies/ruby-2.6.3/include/ruby-2.6.0/x86_64-linux -I/usr/share/rvm/rubies/ruby-2.6.3/include/ruby-2.6.0/ruby/backward -I/usr/share/rvm/rubies/ruby-2.6.3/include/ruby-2.6.0 -I.    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC  conftest.c  -L. -L/usr/share/rvm/rubies/ruby-2.6.3/lib -Wl,-rpath,/usr/share/rvm/rubies/ruby-2.6.3/lib -L. -fstack-protector-strong -rdynamic -Wl,-export-dynamic     -Wl,-rpath,'/../lib' -Wl,-rpath,'/../lib' -lruby  -lm   -lc \"\ngcc: error: unrecognized command line option '-Wduplicated-cond'\ngcc: error: unrecognized command line option '-Wmisleading-indentation'\ngcc: error: unrecognized command line option '-Wrestrict'\ngcc: error: unrecognized command line option '-Wimplicit-fallthrough=0'\nchecked program was:\n/* begin */\n1: #include \"ruby.h\"\n2: \n3: int main(int argc, char **argv)\n4: {\n5:   return 0;\n6: }\n/* end */\n</code></pre>\n\n<p><code>gem env</code> output:</p>\n\n<pre><code>RubyGems Environment:\n  - RUBYGEMS VERSION: 3.1.2\n  - RUBY VERSION: 2.6.3 (2019-04-16 patchlevel 62) [x86_64-linux]\n  - INSTALLATION DIRECTORY: /home/johnarvi/.rvm/gems/ruby-2.6.3\n  - USER INSTALLATION DIRECTORY: /home/johnarvi/.gem/ruby/2.6.0\n  - RUBY EXECUTABLE: /usr/share/rvm/rubies/ruby-2.6.3/bin/ruby\n  - GIT EXECUTABLE: /usr/bin/git\n  - EXECUTABLE DIRECTORY: /home/johnarvi/.rvm/gems/ruby-2.6.3/bin\n  - SPEC CACHE DIRECTORY: /home/johnarvi/.gem/specs\n  - SYSTEM CONFIGURATION DIRECTORY: /etc\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - x86_64-linux\n  - GEM PATHS:\n     - /home/johnarvi/.rvm/gems/ruby-2.6.3\n     - /usr/share/rvm/rubies/ruby-2.6.3/lib/ruby/gems/2.6.0\n  - GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n  - REMOTE SOURCES:\n     - https://rubygems.org/\n  - SHELL PATH:\n     - /home/johnarvi/.rvm/gems/ruby-2.6.3/bin\n     - /home/johnarvi/.rvm/gems/ruby-2.6.3@global/bin\n     - /usr/share/rvm/rubies/ruby-2.6.3/bin\n     - /usr/share/rvm/bin\n     - /home/linuxbrew/.linuxbrew/bin\n     - /home/linuxbrew/.linuxbrew/sbin\n     - /home/johnarvi/.nvm/versions/node/v10.16.1/bin\n     - /home/linuxbrew/.linuxbrew/bin\n     - /home/linuxbrew/.linuxbrew/sbin\n     - /usr/local/sbin\n     - /usr/local/bin\n     - /usr/sbin\n     - /usr/bin\n     - /sbin\n     - /bin\n     - /usr/games\n     - /usr/local/games\n     - /snap/bin\n</code></pre>\n\n<p>I'm not sure how to proceed.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "google-cloud-platform"], "comments": [{"owner": {"reputation": 43265, "user_id": 8016720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXsod.png?s=128&g=1", "display_name": "John Hanley", "link": "https://stackoverflow.com/users/8016720/john-hanley"}, "edited": false, "score": 0, "creation_date": 1577214148, "post_id": 59472499, "comment_id": 105123648, "body": "What is the value for the environment variable <code>GOOGLE_APPLICATION_CREDENTIALS</code>? Add a debug line in your code and verify the value."}, {"owner": {"reputation": 273, "user_id": 4938382, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/597e66f531d159b9c835de11fb6c7d21?s=128&d=identicon&r=PG&f=1", "display_name": "Webbie", "link": "https://stackoverflow.com/users/4938382/webbie"}, "reply_to_user": {"reputation": 43265, "user_id": 8016720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXsod.png?s=128&g=1", "display_name": "John Hanley", "link": "https://stackoverflow.com/users/8016720/john-hanley"}, "edited": false, "score": 0, "creation_date": 1577215118, "post_id": 59472499, "comment_id": 105123893, "body": "It is nil but is set in the application.yml"}, {"owner": {"reputation": 43265, "user_id": 8016720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXsod.png?s=128&g=1", "display_name": "John Hanley", "link": "https://stackoverflow.com/users/8016720/john-hanley"}, "edited": false, "score": 0, "creation_date": 1577219061, "post_id": 59472499, "comment_id": 105124688, "body": "What is the value when you check from inside your code? The error message indicates that you did not set the value correctly."}, {"owner": {"reputation": 273, "user_id": 4938382, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/597e66f531d159b9c835de11fb6c7d21?s=128&d=identicon&r=PG&f=1", "display_name": "Webbie", "link": "https://stackoverflow.com/users/4938382/webbie"}, "reply_to_user": {"reputation": 43265, "user_id": 8016720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXsod.png?s=128&g=1", "display_name": "John Hanley", "link": "https://stackoverflow.com/users/8016720/john-hanley"}, "edited": false, "score": 0, "creation_date": 1577226434, "post_id": 59472499, "comment_id": 105126019, "body": "This post solved my issue <a href=\"https://medium.com/@pjbelo/setting-up-rails-5-2-active-storage-using-google-cloud-storage-and-heroku-23df91e830f8\" rel=\"nofollow noreferrer\">medium.com/@pjbelo/&hellip;</a>"}, {"owner": {"reputation": 2524, "user_id": 12163240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434d7a72dcc252ef7b46e8b5efd2a792?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Ocando", "link": "https://stackoverflow.com/users/12163240/daniel-ocando"}, "edited": false, "score": 0, "creation_date": 1577361463, "post_id": 59472499, "comment_id": 105150820, "body": "Could you add the comment as an answer?"}], "answers": [{"comments": [{"owner": {"reputation": 4433, "user_id": 3390279, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/679111419/picture?type=large", "display_name": "karns", "link": "https://stackoverflow.com/users/3390279/karns"}, "edited": false, "score": 0, "creation_date": 1603221455, "post_id": 59545263, "comment_id": 113967153, "body": "In addition, please add the solution to your answer."}], "tags": [], "owner": {"reputation": 1514, "user_id": 12415339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85de3f73b6e84dc630e925520171d19?s=128&d=identicon&r=PG&f=1", "display_name": "Happy-Monad", "link": "https://stackoverflow.com/users/12415339/happy-monad"}, "is_accepted": false, "score": 0, "last_activity_date": 1577802147, "creation_date": 1577802147, "answer_id": 59545263, "question_id": 59472499, "link": "https://stackoverflow.com/questions/59472499/how-to-set-google-application-credentials-in-rails/59545263#59545263", "title": "How to set Google application credentials in Rails", "body": "<p>@webbie solved the issue himself as can be seen in the question comments.\nAdding the comment as Community Wiki answer to improve the visibility of the solution:</p>\n\n<p>\"This post solved the issue <a href=\"https://medium.com/@pjbelo/setting-up-rails-5-2-active-storage-using-google-cloud-storage-and-heroku-23df91e830f8\" rel=\"nofollow noreferrer\">https://medium.com/@pjbelo/setting-up-rails-5-2-active-storage-using-google-cloud-storage-and-heroku-23df91e830f8</a> \"</p>\n"}], "owner": {"reputation": 273, "user_id": 4938382, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/597e66f531d159b9c835de11fb6c7d21?s=128&d=identicon&r=PG&f=1", "display_name": "Webbie", "link": "https://stackoverflow.com/users/4938382/webbie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 424, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577802147, "creation_date": 1577213282, "last_edit_date": 1577217860, "question_id": 59472499, "link": "https://stackoverflow.com/questions/59472499/how-to-set-google-application-credentials-in-rails", "title": "How to set Google application credentials in Rails", "body": "<p>I'm following Google's \"<a href=\"https://cloud.google.com/storage/docs/reference/libraries?authuser=1#client-libraries-usage-ruby\" rel=\"nofollow noreferrer\">Using the client library</a>\" and am trying to use the Google Cloud platform to upload images to a bucket I created on Google. I also created a service and dowloaded the JSON file localy to my project.</p>\n\n<p>The JSON is located directly in my <code>config/</code> folder.</p>\n\n<p>I also added the required gem for Google and am using the Figaro gem to handle enviroment variables.</p>\n\n<p>I don't understand how to set the value of the environment variable to point to my JSON file which holds my service credentials.</p>\n\n<p>This is my code in my POST action for my controller:</p>\n\n<pre><code>storage = Google::Cloud::Storage.new project_id: '******'\nbucket  = storage.bucket '******'\nbucket.create_file allowed_params[\"image\"], storage_file_path\n</code></pre>\n\n<p>This is how I am trying to set <code>GOOGLE_APPLICATION_CREDENTIALS</code> in my application.yml file:</p>\n\n<pre><code>GOOGLE_APPLICATION_CREDENTIALS: *********-3d373986410c6.json\n</code></pre>\n\n<p>The file <code>application.yml</code> and my <code>*********-3d373986410c6.json</code> is located in the same folder/path.</p>\n\n<p>The error I get is:</p>\n\n<pre><code>Could not load the default credentials. Browse to https://developers.google.com/accounts/docs/application-default-credentials for more information\n</code></pre>\n\n<p>What am I missing?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1577215556, "post_id": 59472362, "comment_id": 105123980, "body": "Are you using PostgreSQL or Sqlite3, right?"}, {"owner": {"reputation": 548, "user_id": 12438293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVweC.png?s=128&g=1", "display_name": "norioumata", "link": "https://stackoverflow.com/users/12438293/norioumata"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1577215813, "post_id": 59472362, "comment_id": 105124045, "body": "I am using PostgreSQL."}], "answers": [{"tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 5, "last_activity_date": 1577215713, "creation_date": 1577215713, "answer_id": 59472795, "question_id": 59472362, "link": "https://stackoverflow.com/questions/59472362/rails-upsert-no-unique-index-found/59472795#59472795", "title": "Rails - upsert no unique index found", "body": "<p>From the docs:</p>\n\n<blockquote>\n  <p>Unique indexes can be identified by columns or name:</p>\n  \n  <p>unique_by: :isbn <br>\n  unique_by: %i[ author_id name ] <br>\n  unique_by: :index_books_on_isbn <br></p>\n</blockquote>\n\n<p>I see you're passing a hash to the <code>unique_by</code> option, try using just the array <code>[:book_id, :book_detail_id]</code>:</p>\n\n<pre><code>BookOwners.upsert({\n  book_id: 123,\n  book_detail_id: 234,\n  ...\n}, unique_by: [:book_id, :book_detail_id])\n</code></pre>\n"}], "owner": {"reputation": 548, "user_id": 12438293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVweC.png?s=128&g=1", "display_name": "norioumata", "link": "https://stackoverflow.com/users/12438293/norioumata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 957, "favorite_count": 1, "accepted_answer_id": 59472795, "answer_count": 1, "score": 1, "last_activity_date": 1577215713, "creation_date": 1577212391, "last_edit_date": 1577212860, "question_id": 59472362, "link": "https://stackoverflow.com/questions/59472362/rails-upsert-no-unique-index-found", "title": "Rails - upsert no unique index found", "body": "<p>This is my migration file.</p>\n\n<pre><code>  def change\n    add_index :book_owners, [:book_id, :book_detail_id], unique: true, where: 'book_id IS NOT NULL and book_detail_id IS NOT NULL'\n  end\n</code></pre>\n\n<p>This is my code.</p>\n\n<pre><code>BookOwners.upsert({\n  book_id: 123,\n  book_detail_id: 234,\n  ...\n}, unique_by: { columns: [:book_id, :book_detail_id] })\n</code></pre>\n\n<p>But I am getting this error.</p>\n\n<pre><code>No unique index found for {:columns=&gt;[:book_id, :book_detail_id]}\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "math"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1577209634, "post_id": 59471817, "comment_id": 105122450, "body": "When I try <code>mult([12, 2])</code> I get 24 .... I&#39;m not seeing the problem"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1577209959, "post_id": 59471817, "comment_id": 105122535, "body": "Are you sure that the problem is <code>mult</code> rather than whatever is building <code>mult_array</code>?"}, {"owner": {"reputation": 9, "user_id": 5075337, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-IQcPElfq3AQ/AAAAAAAAAAI/AAAAAAAACT4/8yNRWGUJ8D8/photo.jpg?sz=128", "display_name": "Nathan Tibbitts", "link": "https://stackoverflow.com/users/5075337/nathan-tibbitts"}, "edited": false, "score": 0, "creation_date": 1577225296, "post_id": 59471817, "comment_id": 105125837, "body": "Hmm. It could be a problem in the control scheme, when I try to access mult from self.init."}, {"owner": {"reputation": 9, "user_id": 5075337, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-IQcPElfq3AQ/AAAAAAAAAAI/AAAAAAAACT4/8yNRWGUJ8D8/photo.jpg?sz=128", "display_name": "Nathan Tibbitts", "link": "https://stackoverflow.com/users/5075337/nathan-tibbitts"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1577390737, "post_id": 59471817, "comment_id": 105160107, "body": "I I checked, and it turns out @maxpleaner is right. Mu is right as well. What could be the problem?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1577393785, "post_id": 59471817, "comment_id": 105160847, "body": "@NathanTibbitts I think the issue is <code>.split(&quot;&quot;)</code>. Should probably be <code>split(&quot; &quot;)</code> right? Otherwise, if you enter say <code>12 2</code> as input, you will get <code>[&quot;12&quot;, &quot; &quot;, &quot;2&quot;]</code> - mapped to integer that&#39;s <code>[12, 0, 2]</code>. Maybe the zero is causing the problem."}, {"owner": {"reputation": 9, "user_id": 5075337, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-IQcPElfq3AQ/AAAAAAAAAAI/AAAAAAAACT4/8yNRWGUJ8D8/photo.jpg?sz=128", "display_name": "Nathan Tibbitts", "link": "https://stackoverflow.com/users/5075337/nathan-tibbitts"}, "edited": false, "score": 0, "creation_date": 1577395568, "post_id": 59471817, "comment_id": 105161241, "body": "Oh my gosh thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 210, "user_id": 2120436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yZn1B.jpg?s=128&g=1", "display_name": "prettycoder", "link": "https://stackoverflow.com/users/2120436/prettycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1578354831, "creation_date": 1578354831, "answer_id": 59620478, "question_id": 59471817, "link": "https://stackoverflow.com/questions/59471817/certain-mathematical-equations-run-on-arrays-in-ruby-return-single-digits-when-d/59620478#59620478", "title": "Certain mathematical equations run on arrays in Ruby return single digits when double digits expected", "body": "<pre><code>irb&gt; '12 2'.split(\"\")\n=&gt; [\"1\", \"2\", \" \", \"2\"]\n</code></pre>\n\n<p>max pleanar pointed in the right direction. \nIt should be <code>.split(\" \")</code></p>\n\n<p>otherwise you end up working with single digits (and zeros for \" \")</p>\n"}], "owner": {"reputation": 9, "user_id": 5075337, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-IQcPElfq3AQ/AAAAAAAAAAI/AAAAAAAACT4/8yNRWGUJ8D8/photo.jpg?sz=128", "display_name": "Nathan Tibbitts", "link": "https://stackoverflow.com/users/5075337/nathan-tibbitts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1578354831, "creation_date": 1577208294, "last_edit_date": 1577392754, "question_id": 59471817, "link": "https://stackoverflow.com/questions/59471817/certain-mathematical-equations-run-on-arrays-in-ruby-return-single-digits-when-d", "title": "Certain mathematical equations run on arrays in Ruby return single digits when double digits expected", "body": "<p>My calculator correctly subtracts and divides, but cannot correctly add or multiply correctly when there is a number that is multi-digit. Whenever I use such a number, it cuts off the last digit of the multi-digit number. For example, 12*2 becomes 2, 10*10 becomes 1, and so on.\nUpdated to include init method</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Sci_Calc\n    def self.init\n        puts \"Which function of this calculator would you like to use? \"\n        calc_fun = gets.chomp\n        case calc_fun\n        when \"sub\"\n            self.sub\n        when \"add\"\n            self.add(gets.chomp.split(\"\").map(&amp;:to_i))\n        when \"mult\"\n            self.mult(gets.chomp.split(\"\").map(&amp;:to_i))\n        when div\n            self.div\n        end\n    end\n    def self.sub()\n        puts \"Please put the number you would like to sub from first. \"\n        num1 = gets.chomp.to_i\n        puts \"Second number: \"\n        num2 = gets.chomp.to_i\n        num3 = num1 - num2\n        puts num3\n        self.init\n    end\n    #For now, it can only add 1 digit numbers\n    def self.add(num_array)\n        sum=0;\n        sum=num_array.sum\n        puts sum\n        self.init\n    end\n    #code taken from https://stackoverflow.com/questions/7050869/ruby-multiply-all-elements-of-an-array\n    def self.mult(mult_array)\n        #Take each element in the array, and add it together.\n        result = 1\n        mult_array.each do |i|\n            #Ignores zeroes in array.\n            if i!=0\n                result = result*i\n            else\n                result\n            end\n        end\n        puts result\n    end\n    def self.div\n        puts \"Pick the number you would like to divide from first: \"\n        div1 = gets.chomp.to_i\n        puts \"Second number, please: \"\n        div2 = gets.chomp.to_i\n        puts \"Result is: \"\n        div3 = div1/div2\n        puts div3\n    end\nend\nSci_Calc.init\n</code></pre>\n\n<p>I will gladly put the rest of the code into a pastebin if needed to answer this question.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-6"], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1577201510, "post_id": 59470630, "comment_id": 105120297, "body": "Also factory can be a good choice here. <code>def Calculator.produce(super_obj); Calculator.new(...).tap { |calc| calc.user = ...... } end</code>."}], "tags": [], "owner": {"reputation": 221, "user_id": 5477532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e99d00860a85f785257b8c2f6c85a8f9?s=128&d=identicon&r=PG", "display_name": "Dylan Andrews", "link": "https://stackoverflow.com/users/5477532/dylan-andrews"}, "is_accepted": true, "score": 2, "last_activity_date": 1577200194, "creation_date": 1577200194, "answer_id": 59470630, "question_id": 59469701, "link": "https://stackoverflow.com/questions/59469701/wrong-number-of-arguments-given-4-expected-0-1-after-upgrading-to-rails-6/59470630#59470630", "title": "wrong number of arguments (given 4, expected 0..1) after upgrading to Rails 6", "body": "<p>This is happening because you are redefining <code>initialize</code> for a class that inherits from <code>ApplicationRecord</code>. It throws an error <a href=\"https://github.com/rails/rails/blob/1421ad5c81910026ae54477fe244a40ed666122d/activerecord/lib/active_record/inheritance.rb#L50\" rel=\"nofollow noreferrer\">here</a>. If you were to do the following it would work.</p>\n\n<pre><code>class Calculator\n  def initialize(obj, user_id, calc_type, will_id = nil)\n    @obj = obj\n    @user_id = user_id\n    @calc_type = calc_type\n    @will_id = will_id\n  end\nend\n</code></pre>\n\n<p>Note that redefining <code>initialize</code> in this way is not recommended (see docs <a href=\"https://guides.rubyonrails.org/v4.2/active_record_callbacks.html\" rel=\"nofollow noreferrer\">here</a>), so if you can I would look into callbacks and see if you can accomplish your goal with that. </p>\n\n<p>Hope that helps.</p>\n"}], "owner": {"reputation": 663, "user_id": 497245, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/G9atq.png?s=128&g=1", "display_name": "FDI", "link": "https://stackoverflow.com/users/497245/fdi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 59470630, "answer_count": 1, "score": 1, "last_activity_date": 1577200194, "creation_date": 1577194923, "question_id": 59469701, "link": "https://stackoverflow.com/questions/59469701/wrong-number-of-arguments-given-4-expected-0-1-after-upgrading-to-rails-6", "title": "wrong number of arguments (given 4, expected 0..1) after upgrading to Rails 6", "body": "<p>I just upgraded from Rails 5.2 to Rails 6 and I'm facing an issue in one class.</p>\n\n<pre><code>class Calculator &lt; ApplicationRecord\n  def initialize(obj, user_id, calc_type, will_id = nil )\n    @inheritors = obj\n    super_obj = obj.clone.merge!(user_id: user_id, type: calc_type, will_id: will_id)\n    super(super_obj)\n    @shares = {}\n    @remains = RationalWithArgumentStore(0)\n    @stop_residual_shares = false\n    @special_case_apply = false\n    @rules = {}\n    @authorities = {}\n  end\nend\n</code></pre>\n\n<p>and I'm creating new instance of the class like the following</p>\n\n<pre><code>calc = Calculator.new(obj, user_id, calc_type, nil)\n</code></pre>\n\n<p>It through an error saying:</p>\n\n<pre><code>wrong number of arguments (given 4, expected 0..1)\n</code></pre>\n\n<p>I spent two days searching and trying to fix the issue without any luck.\nYour help is highly appreciated</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "show", "react-rails"], "answers": [{"tags": [], "owner": {"reputation": 16, "user_id": 8624689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645eac5bbee4964d19938116a57362d5?s=128&d=identicon&r=PG&f=1", "display_name": "seoulstice", "link": "https://stackoverflow.com/users/8624689/seoulstice"}, "is_accepted": true, "score": 0, "last_activity_date": 1577231554, "creation_date": 1577231554, "answer_id": 59474217, "question_id": 59469674, "link": "https://stackoverflow.com/questions/59469674/ruby-on-rails-i-try-to-create-a-form-using-the-application-but-when-i-get-to-t/59474217#59474217", "title": "Ruby on Rails, I try to create a form using the application, but when I get to the show page..everything is empty", "body": "<p>On your form page(todo#new) you need to have an object for those attributes(:task, :description) to be saved to in the database.  </p>\n"}], "owner": {"reputation": 43, "user_id": 12575351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7464aba02f2fe4b3b07bb36863b25b7c?s=128&d=identicon&r=PG&f=1", "display_name": "Heinrich", "link": "https://stackoverflow.com/users/12575351/heinrich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 59474217, "answer_count": 1, "score": 0, "last_activity_date": 1577231554, "creation_date": 1577194794, "question_id": 59469674, "link": "https://stackoverflow.com/questions/59469674/ruby-on-rails-i-try-to-create-a-form-using-the-application-but-when-i-get-to-t", "title": "Ruby on Rails, I try to create a form using the application, but when I get to the show page..everything is empty", "body": "<p>I am new to Ruby on Rails and I am having an issue when I am about to submit my form. Everything when well when I was about to create the form(as shown in 1st picture), but as soon as I get to the show path I show nothing of what I input to the form (as shown on 2nd picture).Can somebody eluded where I was wrong?\n<a href=\"https://i.stack.imgur.com/CUW0D.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CUW0D.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/VonQR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VonQR.png\" alt=\"enter image description here\"></a>\nin my todos_controller.rb :</p>\n\n<pre><code>class TodosController &lt; ApplicationController\ndef index\n    @todos= Todo.all\nend\n\ndef new\nend\n\ndef show\n    @todo = Todo.find(params[:id])\nend\n\ndef create\n    @todo= Todo.new(todo_params)\n\n    @todo.save\n    redirect_to @todo\nend\n\nprivate\n    def todo_params\n        params.require(:todo).permit(:task, :description)\n    end\nend\n</code></pre>\n\n<p>In my show.html.erb:</p>\n\n<pre><code>&lt;p&gt;\n    &lt;strong&gt;Task:&lt;/strong&gt;\n    &lt;%= @todo.task %&gt;\n    &lt;/p&gt;\n\n&lt;p&gt;\n     &lt;strong&gt;Description:&lt;/strong&gt;\n     &lt;%= @todo.description %&gt;\n     &lt;/p&gt;\n</code></pre>\n\n<p>in my routes.rb:</p>\n\n<pre><code>Rails.application.routes.draw do\nget 'welcome/index'\n\nresources :todos\n\nroot 'welcome#index'\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 2503, "user_id": 1348593, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/abaf929fee8bb15c2d096c0be90e75e6?s=128&d=identicon&r=PG&f=1", "display_name": "Nicolas Maloeuvre", "link": "https://stackoverflow.com/users/1348593/nicolas-maloeuvre"}, "is_accepted": true, "score": 2, "last_activity_date": 1577193660, "creation_date": 1577193660, "answer_id": 59469453, "question_id": 59469405, "link": "https://stackoverflow.com/questions/59469405/how-to-create-rails-app-without-comments-in-files-like-gemfile-and-etc/59469453#59469453", "title": "How to create Rails app without comments in files like Gemfile and etc?", "body": "<p>There is no way to create the rails app without comments</p>\n\n<p>Actually it is a good practice to have the comments, and then you can delete them one by one if you want</p>\n"}, {"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1577726439, "last_edit_date": 1577726439, "creation_date": 1577725997, "answer_id": 59534453, "question_id": 59469405, "link": "https://stackoverflow.com/questions/59469405/how-to-create-rails-app-without-comments-in-files-like-gemfile-and-etc/59534453#59534453", "title": "How to create Rails app without comments in files like Gemfile and etc?", "body": "<p>The Rails app generator does not have an option to remove comments. The comments themselves are part of the <a href=\"https://github.com/rails/rails/tree/b2eb1d1c55a59fee1e6c4cba7030d8ceb524267c/railties/lib/rails/generators/rails/app/templates\" rel=\"nofollow noreferrer\">code templates</a> which the generator uses to generate the files like <code>config/application.rb</code>.</p>\n\n<p>Rails does let you setup your own <a href=\"https://guides.rubyonrails.org/generators.html#application-templates\" rel=\"nofollow noreferrer\">application templates</a> <a href=\"https://guides.rubyonrails.org/generators.html#creating-your-first-generator\" rel=\"nofollow noreferrer\">and generators</a> which could be used to this end but its a large and not very worthwhile endeavour. Comments are actually very helpful when you introduce new members to a team or just forget what a configuration option does.</p>\n\n<blockquote>\n  <p>Or maybe there is some other way to delete all those comments automatically?</p>\n</blockquote>\n\n<p>That leaves options like <a href=\"https://linux.die.net/man/1/grep\" rel=\"nofollow noreferrer\">grep</a> which could be used to search and delete lines starting with <code>#</code>. But again the comments are actually helpful and there are better things to spend your time on.</p>\n"}], "owner": {"reputation": 63, "user_id": 10722528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/069ed0f6c4af600d79085b3ecb71bb87?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel", "link": "https://stackoverflow.com/users/10722528/samuel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 59469453, "answer_count": 2, "score": 1, "last_activity_date": 1577726439, "creation_date": 1577193356, "question_id": 59469405, "link": "https://stackoverflow.com/questions/59469405/how-to-create-rails-app-without-comments-in-files-like-gemfile-and-etc", "title": "How to create Rails app without comments in files like Gemfile and etc?", "body": "<p>Are there any parameters to pass to <code>rails new &lt;app_name&gt;</code> so new app will not have a lot of comments in generated files? Or maybe there is some other way to delete all those comments automatically?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1577186220, "post_id": 59467930, "comment_id": 105115308, "body": "<code>{a: 1, b: 2, c: 3}.map{ |x| x.first == :b ? [x,x] : [x] }.flatten(1)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 9794081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65d20607ef5e19f4fea4388fbaa398e0?s=128&d=identicon&r=PG&f=1", "display_name": "Databaas7894", "link": "https://stackoverflow.com/users/9794081/databaas7894"}, "edited": false, "score": 1, "creation_date": 1577186400, "post_id": 59468015, "comment_id": 105115372, "body": "Oh, so simple xD. I knew I was close. Thank you"}], "tags": [], "owner": {"reputation": 717, "user_id": 5470573, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-thC11VQAKcw/AAAAAAAAAAI/AAAAAAAAHZQ/XgUXx7rYWuY/photo.jpg?sz=128", "display_name": "Abishek Aditya", "link": "https://stackoverflow.com/users/5470573/abishek-aditya"}, "is_accepted": true, "score": 1, "last_activity_date": 1577186290, "creation_date": 1577186290, "answer_id": 59468015, "question_id": 59467930, "link": "https://stackoverflow.com/questions/59467930/how-to-return-a-row-twice-inside-map-method/59468015#59468015", "title": "How to return a row twice inside map method", "body": "<p>You can just write it in a single line \n<code>{a: 1, b: 2, c: 3}.map{ |x| x.first == :b ? [x,x] : [x] }.flatten(1)</code></p>\n"}, {"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 0, "last_activity_date": 1577186455, "creation_date": 1577186455, "answer_id": 59468051, "question_id": 59467930, "link": "https://stackoverflow.com/questions/59467930/how-to-return-a-row-twice-inside-map-method/59468051#59468051", "title": "How to return a row twice inside map method", "body": "<pre><code>{a: 1, b: 2, c: 3}.map{ |x| x.first == :b ? [x,x] : [x] }.flatten(1)\n</code></pre>\n\n<p>or </p>\n\n<pre><code>{a: 1, b: 2, c: 3}.reduce([]){ |memo, x| x.first == :b ? memo &lt;&lt; x &lt;&lt; x : memo &lt;&lt; x }\n</code></pre>\n\n<p>or maybe a couple dozen other ways :)</p>\n"}], "owner": {"reputation": 61, "user_id": 9794081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65d20607ef5e19f4fea4388fbaa398e0?s=128&d=identicon&r=PG&f=1", "display_name": "Databaas7894", "link": "https://stackoverflow.com/users/9794081/databaas7894"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 59468015, "answer_count": 2, "score": 0, "last_activity_date": 1577905898, "creation_date": 1577185878, "last_edit_date": 1577905898, "question_id": 59467930, "link": "https://stackoverflow.com/questions/59467930/how-to-return-a-row-twice-inside-map-method", "title": "How to return a row twice inside map method", "body": "<p>I would like to return a value twice inside a map method, only if (for example) the <code>key == :b</code></p>\n\n<p>I have something like this: </p>\n\n<pre><code>{a: 1, b: 2, c: 3}.map{ |x| x }\n# =&gt; [[:a, 1], [:b, 2], [:c, 3]]\n</code></pre>\n\n<p>I would like to create this:</p>\n\n<pre><code># =&gt; [[:a, 1], [:b, 2], [:b, 2], [:c, 3]]\n</code></pre>\n\n<p>I tried:</p>\n\n<pre><code>output = {a: 1, b: 2, c: 3}.map{ |x| x.first == :b ? [x,x] : x }\n# =&gt; [[:a, 1], [[:b, 2], [:b, 2]], [:c, 3]]\n\noutput.flatten\n# =&gt; [:a, 1, :b, 2, :b, 2, :c, 3]\noutput.flatten(1)\n# =&gt; [:a, 1, [:b, 2], [:b, 2], :c, 3]\n</code></pre>\n\n<p>Any thoughts?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 548, "user_id": 12438293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVweC.png?s=128&g=1", "display_name": "norioumata", "link": "https://stackoverflow.com/users/12438293/norioumata"}, "edited": false, "score": 0, "creation_date": 1577188382, "post_id": 59467524, "comment_id": 105116038, "body": "How can I use unscope(:order) on Books.order(:name).find_each(batch_size: 50)?"}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "reply_to_user": {"reputation": 548, "user_id": 12438293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVweC.png?s=128&g=1", "display_name": "norioumata", "link": "https://stackoverflow.com/users/12438293/norioumata"}, "edited": false, "score": 0, "creation_date": 1577190795, "post_id": 59467524, "comment_id": 105116891, "body": "Yes, @yu-coder is right... &quot;Scoped order is ignored, it&#39;s forced to batch order.&quot;"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1577191567, "post_id": 59467524, "comment_id": 105117163, "body": "Yup, sorry for that."}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": false, "score": 3, "last_activity_date": 1577191456, "last_edit_date": 1577191456, "creation_date": 1577184021, "answer_id": 59467524, "question_id": 59467428, "link": "https://stackoverflow.com/questions/59467428/is-there-any-way-to-order-by-specific-column-when-using-find-each/59467524#59467524", "title": "Is there any way to order by specific column when using find_each?", "body": "<p>From the <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/Batches.html#method-i-find_each\" rel=\"nofollow noreferrer\"><code>find_each</code></a> docs:</p>\n\n<blockquote>\n  <p>It's not possible to set the order. That is automatically set to\n  ascending on the primary key (\u201cid ASC\u201d) to make the batch ordering\n  work. This also means that this method only works when the primary key\n  is orderable (e.g. an integer or string).</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": true, "score": 2, "last_activity_date": 1577193524, "creation_date": 1577193524, "answer_id": 59469433, "question_id": 59467428, "link": "https://stackoverflow.com/questions/59467428/is-there-any-way-to-order-by-specific-column-when-using-find-each/59469433#59469433", "title": "Is there any way to order by specific column when using find_each?", "body": "<p>I suppose you could add a pagination gem (you may already have one in your Gemfile, <code>will_paginate</code> or <code>kaminari</code>)</p>\n\n<p>That would let you do...</p>\n\n<pre><code>total_batches = (Book.all.count / 50.0).ceil\n(1..total_batches).each do |batch|\n  Book.order(:name).paginate(page: batch, per_page: 50).each do |book|\n    # do stuff\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 548, "user_id": 12438293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVweC.png?s=128&g=1", "display_name": "norioumata", "link": "https://stackoverflow.com/users/12438293/norioumata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 1, "accepted_answer_id": 59469433, "answer_count": 2, "score": 0, "last_activity_date": 1577193524, "creation_date": 1577183536, "last_edit_date": 1577188227, "question_id": 59467428, "link": "https://stackoverflow.com/questions/59467428/is-there-any-way-to-order-by-specific-column-when-using-find-each", "title": "Is there any way to order by specific column when using find_each?", "body": "<p>I am going to sort <strong>books</strong> by <strong>name</strong>.</p>\n\n<pre><code>Books.order(:name).find_each(batch_size: 50) do |book|\nend\n</code></pre>\n\n<p>But this doesn't work.</p>\n\n<pre><code>[1m[36mBook Load (411.7ms)[0m  [1m[34mSELECT \"books\".* FROM \"books\" ORDER BY \"books\".\"id\" ASC LIMIT $1[0m  [[\"LIMIT\", 50]]\n</code></pre>\n\n<p>Is there any way to <code>order by specific column</code> when using <code>find_each</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "migration"], "answers": [{"tags": [], "owner": {"reputation": 186, "user_id": 6050166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d1cee73ddcf9282c24c6c73089c6711?s=128&d=identicon&r=PG&f=1", "display_name": "Tejas", "link": "https://stackoverflow.com/users/6050166/tejas"}, "is_accepted": false, "score": 1, "last_activity_date": 1577182944, "creation_date": 1577182944, "answer_id": 59467305, "question_id": 59467060, "link": "https://stackoverflow.com/questions/59467060/difference-between-rails-dbmigratereset-and-rails-dbreset/59467305#59467305", "title": "Difference between rails db:migrate:reset and rails db:reset", "body": "<p><strong>db:migrate:reset</strong> Resets your database using your migrations for the current environment.</p>\n\n<p><strong>db:reset</strong> Drops and recreates the database from db/schema.rb for the current environment and loads the seeds.</p>\n\n<p>For further information please have a look at <a href=\"https://github.com/rails/rails/blob/6-0-stable/activerecord/lib/active_record/railties/databases.rake\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/blob/6-0-stable/activerecord/lib/active_record/railties/databases.rake</a></p>\n"}, {"tags": [], "owner": {"reputation": 1692, "user_id": 9288619, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6IK38.jpg?s=128&g=1", "display_name": "code_aks", "link": "https://stackoverflow.com/users/9288619/code-aks"}, "is_accepted": false, "score": 2, "last_activity_date": 1577184214, "creation_date": 1577184214, "answer_id": 59467561, "question_id": 59467060, "link": "https://stackoverflow.com/questions/59467060/difference-between-rails-dbmigratereset-and-rails-dbreset/59467561#59467561", "title": "Difference between rails db:migrate:reset and rails db:reset", "body": "<p><strong>db:reset</strong> It will drop your database (same as undoing all migrations) and reset to the last schema. In short If you wanna drop the database, reload the schema from schema.rb, and reseed the database use this command.</p>\n\n<p><strong>db:migrate:reset</strong>: A more correct approach will be using rake db:migrate:reset. That will drop the database, create it again and run all the migrations, instead of resetting to the latest schema. </p>\n\n<p>For further information please have a look at :-<a href=\"https://github.com/rails/rails/blob/v3.2.12/activerecord/lib/active_record/railties/databases.rake\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/blob/v3.2.12/activerecord/lib/active_record/railties/databases.rake</a> (for Rails 3.2.x) and<br>\n<a href=\"https://github.com/rails/rails/blob/v4.0.5/activerecord/lib/active_record/railties/databases.rake\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/blob/v4.0.5/activerecord/lib/active_record/railties/databases.rake</a> (for Rails 4.0.x)</p>\n"}, {"comments": [{"owner": {"reputation": 778, "user_id": 4229641, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/VxtFd.jpg?s=128&g=1", "display_name": "vishnuprasanth", "link": "https://stackoverflow.com/users/4229641/vishnuprasanth"}, "edited": false, "score": 1, "creation_date": 1577194357, "post_id": 59469143, "comment_id": 105118068, "body": "Couldn&#39;t find this in the official documentation"}], "tags": [], "owner": {"reputation": 1301, "user_id": 1537791, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1fVeq.jpg?s=128&g=1", "display_name": "Jayaprakash", "link": "https://stackoverflow.com/users/1537791/jayaprakash"}, "is_accepted": true, "score": 1, "last_activity_date": 1577192057, "creation_date": 1577192057, "answer_id": 59469143, "question_id": 59467060, "link": "https://stackoverflow.com/questions/59467060/difference-between-rails-dbmigratereset-and-rails-dbreset/59469143#59469143", "title": "Difference between rails db:migrate:reset and rails db:reset", "body": "<p><strong>db:migrate:reset</strong> runs db:drop db:create db:migrate</p>\n\n<p><strong>rails db:reset</strong> runs db:drop db:setup</p>\n\n<p>References: </p>\n\n<p><a href=\"https://stackoverflow.com/questions/10301794/difference-between-rake-dbmigrate-dbreset-and-dbschemaload\">Difference between rake db:migrate db:reset and db:schema:load</a>\n<a href=\"https://jacopretorius.net/2014/02/all-rails-db-rake-tasks-and-what-they-do.html\" rel=\"nofollow noreferrer\">https://jacopretorius.net/2014/02/all-rails-db-rake-tasks-and-what-they-do.html</a></p>\n"}], "owner": {"reputation": 778, "user_id": 4229641, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/VxtFd.jpg?s=128&g=1", "display_name": "vishnuprasanth", "link": "https://stackoverflow.com/users/4229641/vishnuprasanth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 337, "favorite_count": 0, "accepted_answer_id": 59469143, "answer_count": 3, "score": 0, "last_activity_date": 1577192057, "creation_date": 1577181802, "question_id": 59467060, "link": "https://stackoverflow.com/questions/59467060/difference-between-rails-dbmigratereset-and-rails-dbreset", "title": "Difference between rails db:migrate:reset and rails db:reset", "body": "<p>This is what I got when I ran both commands</p>\n\n<p><code>rails db:migrate:reset</code></p>\n\n<pre><code>$ rails db:migrate:reset\nDropped database 'db/development.sqlite3'\nDropped database 'db/test.sqlite3'\nCreated database 'db/development.sqlite3'\nCreated database 'db/test.sqlite3'\n== 20190824101540 CreateUsers: migrating ======================================\n-- create_table(:users)\n   -&gt; 0.0005s\n== 20190824101540 CreateUsers: migrated (0.0005s) =============================\n\n== 20190825083402 AddIndexToUsersEmail: migrating =============================\n-- add_index(:users, :email, {:unique=&gt;true})\n   -&gt; 0.0005s\n== 20190825083402 AddIndexToUsersEmail: migrated (0.0006s) ====================\n\n== 20190825085927 AddPasswordDigestToUsers: migrating =========================\n-- add_column(:users, :password_digest, :string)\n   -&gt; 0.0006s\n== 20190825085927 AddPasswordDigestToUsers: migrated (0.0006s) ================\n</code></pre>\n\n<p><code>rails db:reset</code></p>\n\n<pre><code>$ rails db:reset\nDropped database 'db/development.sqlite3'\nDropped database 'db/test.sqlite3'\nCreated database 'db/development.sqlite3'\nCreated database 'db/test.sqlite3'\n-- create_table(\"users\", {:force=&gt;:cascade})\n   -&gt; 0.2180s\n-- create_table(\"users\", {:force=&gt;:cascade})\n   -&gt; 0.1696s\n</code></pre>\n\n<p>Looks like <code>rake db:migrate:reset</code> and <code>rake db:reset</code> does the same things except the fact that rake <code>db:migrate:reset</code> also displays the migration log.</p>\n\n<p>Is there any difference between the two? Or is one just an alias for the other?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1577182199, "post_id": 59464922, "comment_id": 105113787, "body": "Can you show your associations? A project-site belongs-to manager-remark? Only one? From your initial line it is the other way round? A manager-remark belongs_to project? And please clearly specify the intention: should there be only one manager-remark for a project-site? (because I would assume there could be mulitple remarks --and thus multiple decisions?)"}], "answers": [{"comments": [{"owner": {"reputation": 444, "user_id": 1578078, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d094748f7c0eee8eb20bbe311a434763?s=128&d=identicon&r=PG", "display_name": "Micah Gideon Modell", "link": "https://stackoverflow.com/users/1578078/micah-gideon-modell"}, "reply_to_user": {"reputation": 3, "user_id": 12556644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72c533416489bc346a6385ed0a6cbf8?s=128&d=identicon&r=PG&f=1", "display_name": "rat007", "link": "https://stackoverflow.com/users/12556644/rat007"}, "edited": false, "score": 0, "creation_date": 1577193833, "post_id": 59465072, "comment_id": 105117885, "body": "Does this solve your problem or is there more that I missed? Is this the correct answer for your situation? If so, you probably want to mark it as such so that others can easily find it."}], "tags": [], "owner": {"reputation": 444, "user_id": 1578078, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d094748f7c0eee8eb20bbe311a434763?s=128&d=identicon&r=PG", "display_name": "Micah Gideon Modell", "link": "https://stackoverflow.com/users/1578078/micah-gideon-modell"}, "is_accepted": true, "score": 0, "last_activity_date": 1577171063, "creation_date": 1577171063, "answer_id": 59465072, "question_id": 59464922, "link": "https://stackoverflow.com/questions/59464922/how-can-i-get-project-id-by-remarks-in-ruby-on-rails/59465072#59465072", "title": "how can i get project_id by remarks in ruby on rails", "body": "<p>If I understand correctly, you have a <code>ProjectSite</code> that contains a <code>ManagerRemark</code> with a decision, right? If that's the case, the simple answer is:</p>\n\n<pre><code>&lt;%= project_site.ManagerRemark.decision %&gt;\n</code></pre>\n\n<p>If you are saying that each <code>ProjectSite</code> has many <code>ManagerRemark</code>s, you'll want to place the above inside a loop, like so:</p>\n\n<pre><code>&lt;% project_site.manager_remarks.each do |manager_remark| %&gt;\n&lt;%= manager_remark.decision %&gt;&lt;br/&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>This assumes that your models are correctly configured to recognize these relationships. The above may also be optimized by adding an <code>include</code> clause to your fetch inside the controller and there's no need to fetch the ManagerRemark objects separately. Therefore, you'd probably want something like:</p>\n\n<pre><code>def index\n    @project_sites = ProjectSite.all.includes( :manager_remark ).order(\"created_at DESC\")\nend\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12556644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72c533416489bc346a6385ed0a6cbf8?s=128&d=identicon&r=PG&f=1", "display_name": "rat007", "link": "https://stackoverflow.com/users/12556644/rat007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 59465072, "answer_count": 1, "score": 0, "last_activity_date": 1577205435, "creation_date": 1577170156, "last_edit_date": 1577205435, "question_id": 59464922, "link": "https://stackoverflow.com/questions/59464922/how-can-i-get-project-id-by-remarks-in-ruby-on-rails", "title": "how can i get project_id by remarks in ruby on rails", "body": "<p>I have manager remark model that takes input as a remark and decision value and saves it with the project site ID. I have a project site model that takes input as name, date, and file and stores it. Many remarks have a many to one relation with project site ID, and the project site belongs to the manager remark. I want to access the decision attribute boolean value in project site index form, but I am unable to access that boolean value in the index page of the project site. Here is my code of project site and manager remarks model, view and controller-</p>\n\n<p>project site index.html.erb</p>\n\n<pre><code>    &lt;table&gt;\n    &lt;thead&gt;\n      &lt;tr&gt;\n        &lt;th&gt;Name&lt;/th&gt;\n        &lt;th&gt;Date&lt;/th&gt;\n        &lt;th&gt;Attendance&lt;/th&gt;\n        &lt;th&gt;Status&lt;/th&gt;\n        &lt;th colspan=\"3\"&gt;&lt;/th&gt;\n      &lt;/tr&gt;\n    &lt;/thead&gt;\n\n    &lt;tbody&gt;\n      &lt;% @project_sites.each do |project_site| %&gt;\n        &lt;tr&gt;\n          &lt;td&gt;&lt;%= project_site.name.titleize %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= project_site.date %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= link_to ' View attendance', project_site.file, :class =&gt; \"fi-page-export-csv\" %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= \"here i want to access manager remark decision value\" %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= link_to 'Remark ', project_site %&gt;&lt;span&gt;(&lt;%= project_site.manager_remarks.size %&gt;)&lt;/span&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= link_to 'Edit', edit_project_site_path(project_site) %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= link_to 'Destroy', project_site, method: :delete, data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n      &lt;% end %&gt;\n    &lt;/tbody&gt;\n\n</code></pre>\n\n<p>project site controller </p>\n\n<pre><code>    def index\n    @project_sites = ProjectSite.all.order(\"created_at DESC\")\n    @manager_remark = ManagerRemark.joins(:project_site).where(:project_sites =&gt; { :user_id =&gt; @user.id })\n  end\n\n  # GET /project_sites/1\n  # GET /project_sites/1.json\n  def show\n    @manager_remark = ManagerRemark.new\n    @manager_remark.project_site_id = @project_site.id\n\n  end\n\n  # GET /project_sites/new\n  def new\n    @project_site = ProjectSite.new\n  end\n  def project_site_params\n      params.require(:project_site).permit(:name, :date, :file)\n    end\n</code></pre>\n\n<p>manager_remark controller</p>\n\n<pre><code>    class ManagerRemarksController &lt; ApplicationController\n\n  def create\n    @manager_remark = ManagerRemark.new(remark_params)\n    @manager_remark.project_site_id = params[:project_site_id]\n    @manager_remark.save\n\n    redirect_to project_site_path(@manager_remark.project_site)\n  end\n\n  def remark_params\n    params.require(:manager_remark).permit(:remark, :decision)\n  end\n\nend\n\n</code></pre>\n\n<p>manager_remark view form</p>\n\n<pre><code>\n&lt;%= form_for [ @project_site, @manager_remark ] do |f| %&gt;\n  &lt;div class=\"row\"&gt;\n    &lt;div class=\"medium-6 columns\"&gt;\n      &lt;%= f.radio_button :decision, true  %&gt;\n      &lt;%= f.label :approve %&gt;\n      &lt;%= f.radio_button :decision, false  %&gt;\n      &lt;%= f.label :reject %&gt;\n    &lt;/div&gt;\n    &lt;br&gt;\n    &lt;br&gt;\n    &lt;div class=\"medium-6 cloumns\"&gt;\n      &lt;%= f.label :remark %&gt;&lt;br/&gt;\n      &lt;%= f.text_area :remark %&gt;\n    &lt;/div&gt;\n\n      &lt;/div&gt;\n    &lt;div&gt;\n      &lt;%= f.submit 'Submit', :class =&gt; 'button primary' %&gt;\n    &lt;/div&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p>routes.rb</p>\n\n<pre><code>    Rails.application.routes.draw do\n  root to: 'home#index'\n  devise_for :users\n  resources :project_sites do\n    resources :manager_remarks\n\n  end\n\n  get '/project_manager_level_two' =&gt; 'project_manager_level_two#index'\n  get '/project_managers' =&gt; 'project_managers#index'\n\n  # For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html\nend\n\n</code></pre>\n"}, {"tags": ["ruby", "parsing", "functional-programming"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1577159572, "post_id": 59463610, "comment_id": 105107798, "body": "Although there&#39;s certainly a way to do it, I have to ask <i>why</i> you have a string like this, and not something easily parsable like JSON?"}, {"owner": {"reputation": 750, "user_id": 1796041, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/233b6d0e4a63ef12775bee73cf1c228b?s=128&d=identicon&r=PG", "display_name": "Dylan Richards", "link": "https://stackoverflow.com/users/1796041/dylan-richards"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1577160824, "post_id": 59463610, "comment_id": 105107965, "body": "It&#39;s a TMUX buffer of some errors that were thrown when running a script. It comes back weirdly formatted and I figured the best way to deal with it would just be to wrap the whole thing in a string and parse out the hashes."}], "answers": [{"comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 1, "creation_date": 1577161711, "post_id": 59463727, "comment_id": 105108121, "body": "Be aware that this will fail if a value contains a word followed by a colon: e.g. <code>{name: &quot;Punctuation: Colon and Semicolon&quot; }</code>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 1, "creation_date": 1577165757, "post_id": 59463727, "comment_id": 105108852, "body": "@Amadan yes, it\u2019d be safer to <code>&#47;(\\p{Alnum})+:(?=\\s*&quot;[^&quot;]+&quot;)&#47;</code>."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1577162420, "last_edit_date": 1577162420, "creation_date": 1577160636, "answer_id": 59463727, "question_id": 59463610, "link": "https://stackoverflow.com/questions/59463610/find-hashes-in-a-ruby-string/59463727#59463727", "title": "Find hashes in a Ruby string", "body": "<pre><code>require 'json'\n\nJSON.parse(greetings.gsub(/(\\p{Alnum})+:/, '\"\\1\":')).\n     map { |h| h.transform_keys(&amp;:to_sym) }\n  #=&gt; [{:a=&gt;\"hello\", :b=&gt;\"goodbye\"},\n  #    {:a=&gt;\"guten tag\", :b=&gt;\"auf wiedersehen\"}] \n</code></pre>\n\n<p>The steps are as follows:</p>\n\n<pre><code>str = greetings.gsub(/(\\p{Alnum})+:/, '\"\\1\":')\n  #=&gt; \"[{\\\"a\\\": \\\"hello\\\", \\\"b\\\": \\\"goodbye\\\"}, {\\\"a\\\": \\\"guten tag\\\", \\\"b\\\": \\\"auf wiedersehen\\\"}]\\n\"\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>arr = JSON.parse(str)\n  #=&gt; [{\"a\"=&gt;\"hello\", \"b\"=&gt;\"goodbye\"},\n  #    {\"a\"=&gt;\"guten tag\", \"b\"=&gt;\"auf wiedersehen\"}] \narr.map { |h| h.transform_keys(&amp;:to_sym) } \n  #=&gt; [{:a=&gt;\"hello\", :b=&gt;\"goodbye\"},\n  #    {:a=&gt;\"guten tag\", :b=&gt;\"auf wiedersehen\"}] \n</code></pre>\n\n<p>The regular expression reads, \"match one or more alphanumeric characters in capture group 1 followed by a colon\". The <code>\\1</code> in <code>gsub</code>'s replacement string is replaced with the contents of capture group 1.</p>\n\n<p>See <a href=\"https://ruby-doc.org/stdlib-2.6.3/libdoc/json/rdoc/JSON.html#method-i-parse\" rel=\"nofollow noreferrer\">JSON::parse</a>, <a href=\"https://ruby-doc.org/core-2.6.3/String.html#method-i-gsub\" rel=\"nofollow noreferrer\">String#gsub</a> and <a href=\"https://ruby-doc.org/core-2.6.3/Hash.html#method-i-transform_keys\" rel=\"nofollow noreferrer\">Hash#transform_keys</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1577162576, "post_id": 59463808, "comment_id": 105108254, "body": "Watch out for the eval patrol, with their pitchforks and torches... Curiously, I&#39;ve found that nobody complains if I use <code>instance_eval</code> instead of <code>eval</code>."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1577162700, "post_id": 59463808, "comment_id": 105108276, "body": "@CarySwoveland <code>instance_eval</code> with a string argument is the same as <code>eval</code>, as far as the danger is concerned. <code>instance_eval</code> with a block is safe."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1577162890, "post_id": 59463808, "comment_id": 105108308, "body": "My point: <code>instance_eval(greetings)</code> doesn&#39;t provoke the same dire warnings that <code>eval(greetings)</code> does."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1577163029, "post_id": 59463808, "comment_id": 105108349, "body": "@CarySwoveland: My point: if I see you instance_evalling a string, your ass is grass. :P"}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 2, "last_activity_date": 1577161743, "last_edit_date": 1577161743, "creation_date": 1577161515, "answer_id": 59463808, "question_id": 59463610, "link": "https://stackoverflow.com/questions/59463610/find-hashes-in-a-ruby-string/59463808#59463808", "title": "Find hashes in a Ruby string", "body": "<p>If you trust the source (and <em>only</em> if you trust the source, which is probably not true):</p>\n\n<pre><code>data = eval(str)\n</code></pre>\n\n<p>If you do not (which should be close to 100% of cases), then you can use the <a href=\"https://github.com/byroot/parsr/\" rel=\"nofollow noreferrer\"><code>parsr</code> gem</a></p>\n\n<pre><code>data = Parsr.literal_eval(str)\n</code></pre>\n\n<p>You could also write your own grammar, but... why? :)</p>\n"}], "owner": {"reputation": 750, "user_id": 1796041, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/233b6d0e4a63ef12775bee73cf1c228b?s=128&d=identicon&r=PG", "display_name": "Dylan Richards", "link": "https://stackoverflow.com/users/1796041/dylan-richards"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1577162420, "creation_date": 1577159337, "question_id": 59463610, "link": "https://stackoverflow.com/questions/59463610/find-hashes-in-a-ruby-string", "title": "Find hashes in a Ruby string", "body": "<p>I have a string that looks like this:</p>\n\n<pre><code>greetings = &lt;&lt;-GREETINGS\n[{a: \"hello\", b: \"goodbye\"}, {a: \"guten tag\", b: \"auf wiedersehen\"}]\nGREETINGS\n</code></pre>\n\n<p>How can I split this string, so as to return an Array of the Hashes?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "scope", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 10553382, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156409336731273/picture?type=large", "display_name": "Daniel Thomas", "link": "https://stackoverflow.com/users/10553382/daniel-thomas"}, "edited": false, "score": 0, "creation_date": 1577162963, "post_id": 59463207, "comment_id": 105108325, "body": "Went with your suggestion of using a range and it worked perfectly, thanks so much!"}], "tags": [], "owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "is_accepted": true, "score": 2, "last_activity_date": 1577154924, "creation_date": 1577154924, "answer_id": 59463207, "question_id": 59463142, "link": "https://stackoverflow.com/questions/59463142/adding-a-way-to-view-assignments-due-within-the-next-seven-days-in-my-rails-app/59463207#59463207", "title": "Adding a way to view assignments due within the next seven days in my Rails app", "body": "<p>The issue you are having here is related to your usage of <code>where</code>:</p>\n\n<blockquote>\n  <p>Assignment.where(Date.current + 7.days >= :due_date)</p>\n</blockquote>\n\n<p>Is not valid for ActiveRecord's <code>where</code> method.</p>\n\n<p>What you need is to either use ActiveRecord's lib to generate SQL (1), or write the SQL yourself (2):</p>\n\n<pre><code># (1) Use ActiveRecord combined with a Ruby Range\nAssignment.where(due_date: Date.current..7.days.from_now)\n\n# (2) Assignment.where('due_date between ? and ?', Date.current, 7.days.from_now)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1043, "user_id": 5659594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c90ec27dffb2d716ee0c796cd73078c?s=128&d=identicon&r=PG&f=1", "display_name": "Fernand", "link": "https://stackoverflow.com/users/5659594/fernand"}, "is_accepted": false, "score": 0, "last_activity_date": 1577155331, "creation_date": 1577155331, "answer_id": 59463232, "question_id": 59463142, "link": "https://stackoverflow.com/questions/59463142/adding-a-way-to-view-assignments-due-within-the-next-seven-days-in-my-rails-app/59463232#59463232", "title": "Adding a way to view assignments due within the next seven days in my Rails app", "body": "<p>You have a syntax error there.\n<br>One way is...</p>\n\n<pre><code>scope :due_soon, -&gt; { where('due_date =&lt; ?', Date.current + 7.days) }\n</code></pre>\n\n<p><a href=\"https://apidock.com/rails/ActiveRecord/NamedScope/ClassMethods/scope\" rel=\"nofollow noreferrer\">https://apidock.com/rails/ActiveRecord/NamedScope/ClassMethods/scope</a></p>\n"}], "owner": {"reputation": 43, "user_id": 10553382, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156409336731273/picture?type=large", "display_name": "Daniel Thomas", "link": "https://stackoverflow.com/users/10553382/daniel-thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 59463207, "answer_count": 2, "score": 1, "last_activity_date": 1577155331, "creation_date": 1577154038, "question_id": 59463142, "link": "https://stackoverflow.com/questions/59463142/adding-a-way-to-view-assignments-due-within-the-next-seven-days-in-my-rails-app", "title": "Adding a way to view assignments due within the next seven days in my Rails app", "body": "<p>I am building a basic student planner application using Ruby on Rails and I am trying to implement a way for a student to see which assignments are due within the next seven days. I would like to use a scope method, something like due_soon that can be called within a view.</p>\n\n<p>Currently when I run my code I'm getting an ArgumentError in Assignments#index and it's telling me that the comparison of Date with :due_date failed</p>\n\n<p>My Assignments model:</p>\n\n<pre><code>class Assignment &lt; ActiveRecord::Base\n  belongs_to :course\n  belongs_to :student\n  # accepts_nested_attributes_for :course\n\n  validates :course_id, :student_id, :due_date, :title, presence: true\n  scope :due_soon, -&gt; { where(Date.current + 7.days &gt;= :due_date) }\n\n  def course_attributes=(attributes)\n    binding.pry\n    if attributes[:course_name].blank?\n      self.course = Course.find_by(id: params[:course_id])\n    else\n      self.course = Course.find_or_create_by(attributes)\n      self.course\n    end\n  end\nend\n</code></pre>\n\n<p>In my view:</p>\n\n<pre><code>&lt;h3&gt;Due Soon&lt;/h3&gt;\n    &lt;% Assignment.due_soon.each do |assignment| %&gt;\n      &lt;% if assignment.course %&gt;\n        &lt;tr&gt;\n          &lt;td&gt;&lt;%= assignment.title %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= assignment.course.course_name %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= assignment.due_date %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= link_to \"View/Edit Assignment\", student_assignment_path(@student, assignment) %&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n      &lt;% end %&gt;\n    &lt;% end %&gt;\n</code></pre>\n\n<p>Any pointers would be much appreciated as I try and continue to familiarize myself with rails! Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 4, "last_activity_date": 1577164134, "creation_date": 1577164134, "answer_id": 59464076, "question_id": 59463030, "link": "https://stackoverflow.com/questions/59463030/why-is-rails-authentication-controller-route-duplicating-auth-params/59464076#59464076", "title": "Why is Rails authentication controller route duplicating auth params?", "body": "<p>Yes, Ruby on Rails automatically <a href=\"https://edgeapi.rubyonrails.org/classes/ActionController/ParamsWrapper.html\" rel=\"nofollow noreferrer\">wraps parameters</a> with the current controller name when the JSON sent to the server does not specify any root element.</p>\n\n<p>You can re-configure this behavior in <a href=\"https://github.com/joelhoelting/who_said_it_v2_backend/blob/master/config/initializers/wrap_parameters.rb\" rel=\"nofollow noreferrer\"><code>config/initializers/wrap_parameters.rb</code></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 302, "user_id": 12336104, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dRc1b5iireA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re5SEVTDW1GD14ZQuGn5AEmfSJ4iA/photo.jpg?sz=128", "display_name": "Thuy Nguyen", "link": "https://stackoverflow.com/users/12336104/thuy-nguyen"}, "is_accepted": false, "score": 2, "last_activity_date": 1577171459, "creation_date": 1577171459, "answer_id": 59465144, "question_id": 59463030, "link": "https://stackoverflow.com/questions/59463030/why-is-rails-authentication-controller-route-duplicating-auth-params/59465144#59465144", "title": "Why is Rails authentication controller route duplicating auth params?", "body": "<blockquote>\n  <p>Is rails automatically adding that param and, if so, why?</p>\n</blockquote>\n\n<p>Yes</p>\n\n<p>When I throw a <code>binding.pry</code> in <code>signin</code> action. Then type <code>Thread.current.backtrace</code></p>\n\n<p>I saw <code>process_action</code> method in <code>action_controller/metal/params_wrapper.rb</code> is called. This is <a href=\"https://github.com/rails/rails/blob/bc7ed042c4/actionpack/lib/action_controller/metal/params_wrapper.rb#L243\" rel=\"nofollow noreferrer\">source code</a>.</p>\n\n<p>According that, Ruby on Rails automatically wraps parameters with the current controller name when <a href=\"https://github.com/joelhoelting/who_said_it_v2_backend/blob/master/config/initializers/wrap_parameters.rb\" rel=\"nofollow noreferrer\">wrap parameters format</a> include content-type of request. Like @spickermann said.</p>\n"}], "owner": {"reputation": 1393, "user_id": 6347891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ifyt4.jpg?s=128&g=1", "display_name": "Joel Hoelting", "link": "https://stackoverflow.com/users/6347891/joel-hoelting"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 59464076, "answer_count": 2, "score": 1, "last_activity_date": 1577171459, "creation_date": 1577152564, "question_id": 59463030, "link": "https://stackoverflow.com/questions/59463030/why-is-rails-authentication-controller-route-duplicating-auth-params", "title": "Why is Rails authentication controller route duplicating auth params?", "body": "<p>I have <code>signup</code> and <code>signin</code> POST routes in a rails controller. <code>signup</code> requires an <code>email</code>, <code>password</code> and <code>password_confirmation</code>. <code>signin</code> requires an <code>email</code> and <code>password</code>.</p>\n\n<p>Here is what the routes look like:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>class Api::V1::AuthController &lt; ApplicationController\r\n\r\n  def signup\r\n    binding.pry &lt;-- inspect the params here\r\n    @user = User.create(user_credential_params)\r\n    if @user.valid?\r\n      @token = encode_token(:user_id =&gt; @user.id)\r\n      render json: { :user =&gt; @user, :jwt =&gt; @token }, :status =&gt; :created\r\n    else\r\n      render json: { :error =&gt; 'Failed to create user' }, :status =&gt; :not_acceptable\r\n    end\r\n  end\r\n\r\n  def signin\r\n    @user = User.find_by(:email =&gt; user_credential_params[:email])\r\n    # authenticate method comes from bcrypt\r\n    if @user &amp;&amp; @user.authenticate(user_credential_params[:password])\r\n      @token = encode_token({ :user_id =&gt; @user.id })\r\n      render json: { :user =&gt; @user, :jwt =&gt; @token }, :status =&gt; :accepted\r\n    else\r\n      render json: { :error =&gt; 'Invalid credentials' }, :status =&gt; :unauthorized\r\n    end\r\n  end\r\n\r\n  private\r\n\r\n  def user_credential_params\r\n    params.permit(:email, :password, :password_confirmation)\r\n  end\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>And <code>routes.rb</code>:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>Rails.application.routes.draw do\r\n  namespace :api do\r\n    namespace :v1 do\r\n      post '/signup', to: 'auth#signup'\r\n      post '/signin', to: 'auth#signin'\r\n    end\r\n  end\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>If I throw a <code>binding.pry</code> in either controller action to inspect the params (in this example I am inspecting <code>signup</code>), I see the following params (via Postman and using AXIOS in the browser):</p>\n\n<p><code>[1] pry(#&lt;Api::V1::AuthController&gt;)&gt; params</code></p>\n\n<p><code>=&gt; &lt;ActionController::Parameters {\"email\"=&gt;\"joelhoelting@aol.com\", \"password\"=&gt;\"password123\", \"password_confirmation\"=&gt;\"password123\", \"controller\"=&gt;\"api/v1/auth\", \"action\"=&gt;\"signup\", \"auth\"=&gt;{\"email\"=&gt;\"joelhoelting@aol.com\", \"password\"=&gt;\"password123\", \"password_confirmation\"=&gt;\"password123\"}} permitted: false&gt;</code></p>\n\n<p>You can see that the above params are returning duplicates of <code>email</code>, <code>password</code> and <code>password_confirmation</code> within another <code>[:auth]</code> param hash. However, I am not supplying a param called <code>[:auth]</code> in either postman or browser. </p>\n\n<p>Where is the <code>[:auth]</code> param coming from? Is rails automatically adding that param and, if so, why?</p>\n\n<p>In case the context is still unclear here is the Github Repo:\n<a href=\"https://github.com/joelhoelting/who_said_it_v2_backend\" rel=\"nofollow noreferrer\">Link To Repo</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "answers": [{"tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": true, "score": 0, "last_activity_date": 1577142840, "creation_date": 1577142840, "answer_id": 59462207, "question_id": 59461818, "link": "https://stackoverflow.com/questions/59461818/ror-api-trying-to-create-a-zip-code-search/59462207#59462207", "title": "ROR API Trying to create a zip code search", "body": "<p>Why don't you use <code>LIKE</code>?</p>\n\n<pre><code>scope :by_postal, -&gt;(postal) { where('postal_code LIKE ?', \"#{postal}%\") }\n</code></pre>\n\n<p>If your <code>postal</code> is 5-digit it returns 5-digit and 9-digit variants. If 9-digit -- 9-digit only.</p>\n"}, {"comments": [{"owner": {"reputation": 1113, "user_id": 188574, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/3ab1d9940a0827332af4a07dc2c45838?s=128&d=identicon&r=PG", "display_name": "Tun", "link": "https://stackoverflow.com/users/188574/tun"}, "edited": false, "score": 0, "creation_date": 1577153178, "post_id": 59463073, "comment_id": 105106882, "body": "I am not sure <code>LEN</code> function is portable across different sql servers"}], "tags": [], "owner": {"reputation": 1113, "user_id": 188574, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/3ab1d9940a0827332af4a07dc2c45838?s=128&d=identicon&r=PG", "display_name": "Tun", "link": "https://stackoverflow.com/users/188574/tun"}, "is_accepted": false, "score": 0, "last_activity_date": 1577153109, "creation_date": 1577153109, "answer_id": 59463073, "question_id": 59461818, "link": "https://stackoverflow.com/questions/59461818/ror-api-trying-to-create-a-zip-code-search/59463073#59463073", "title": "ROR API Trying to create a zip code search", "body": "<p>I would use separate scopes </p>\n\n<pre><code>by_postal, -&gt;(postal_code) { where('postal_code LIKE ?', \"%#{}%\") }\nby_length, -&gt;(length) { where('LEN(postal_code) = ?', length) }\n</code></pre>\n\n<ul>\n<li>for +5 <code>by_postal('211').by_length(5)</code></li>\n<li>for +9 <code>by_postal('211').by_length(9)</code></li>\n<li>for both <code>by_postal('211')</code></li>\n</ul>\n"}], "owner": {"reputation": 15, "user_id": 12265059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73564ac6b680809b39439e1d0ed7562f?s=128&d=identicon&r=PG&f=1", "display_name": "the137", "link": "https://stackoverflow.com/users/12265059/the137"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 59462207, "answer_count": 2, "score": 0, "last_activity_date": 1577153109, "creation_date": 1577139332, "question_id": 59461818, "link": "https://stackoverflow.com/questions/59461818/ror-api-trying-to-create-a-zip-code-search", "title": "ROR API Trying to create a zip code search", "body": "<p>So far I have separate zip+5 and zip+9 searches running. I want to create a search that returns results as specific as the input, and more specific when possible (user inputs a +5, they get results containing +5 and +9, user inputs a +9 gets back only matching +9's) </p>\n\n<p>Here's what I have so far </p>\n\n<pre><code>scope :by_postal9, -&gt;(postal_code) { where('postal_code = ?', (postal_code)) } #9 digit\nscope :by_postal5, -&gt;(postal_code) { where('postal_code = ?', (postal_code[0..4])) } #5 digit\nscope :by_postal, -&gt;(postal_code) { where('postal_code = ?', (postal_code[0..4])) or where('postal_code = ?', (postal_code)) } #all lengths\n</code></pre>\n\n<p>Working with a dataset of </p>\n\n<pre><code>ID \\ postal_code\n1  \\ 92110-4441\n2  \\ 92110\n3  \\ 92110-4441 \n</code></pre>\n\n<p>My 9 digit search seems to be the best one, it has no problems returning matching results for either +5 or +9 searches, but ONLY returns exact matches (searching postal9 with 92110 yields 1 result, searching with 92110-4441 yields 2 results, non-overlapping) </p>\n\n<p>The 5 digit search operates as you might expect, and upon input of a 9 digit zip, returns matches for 5 digit results, but ONLY 5 digit results (search postal5 with 92110-4441 returns 1 result, ID 2)</p>\n\n<p>The last example is probably just trash, but was my final effort in getting combined results. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activestorage"], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 12031309, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-U_xwmpJpbz8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcJC2RqlgF3TZkETrltz_nladHItg/photo.jpg?sz=128", "display_name": "Unusualslim", "link": "https://stackoverflow.com/users/12031309/unusualslim"}, "edited": false, "score": 0, "creation_date": 1577141973, "post_id": 59461804, "comment_id": 105105197, "body": "My show action image_tag needs to look like this <code>&lt;%= image_tag((@board.image.variant(resize: @board.resolution) if @board.image.attached?),  :class =&gt; &quot;img-fluid&quot;) %&gt;</code> vs the index action <code>&lt;%= image_tag((board.image.variant(resize: &quot;300x300&quot;) if board.image.attached?),  :class =&gt; &quot;card-img-top&quot;) %&gt;</code> so you answer is only half of the solution."}, {"owner": {"reputation": 1330, "user_id": 887947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ace01b4b1b5759067b48b6b074902e65?s=128&d=identicon&r=PG", "display_name": "Ben Trewern", "link": "https://stackoverflow.com/users/887947/ben-trewern"}, "reply_to_user": {"reputation": 29, "user_id": 12031309, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-U_xwmpJpbz8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcJC2RqlgF3TZkETrltz_nladHItg/photo.jpg?sz=128", "display_name": "Unusualslim", "link": "https://stackoverflow.com/users/12031309/unusualslim"}, "edited": false, "score": 0, "creation_date": 1577142951, "post_id": 59461804, "comment_id": 105105385, "body": "Just pass the action_name to the helper and do the logic in your case statement."}, {"owner": {"reputation": 1330, "user_id": 887947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ace01b4b1b5759067b48b6b074902e65?s=128&d=identicon&r=PG", "display_name": "Ben Trewern", "link": "https://stackoverflow.com/users/887947/ben-trewern"}, "reply_to_user": {"reputation": 29, "user_id": 12031309, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-U_xwmpJpbz8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcJC2RqlgF3TZkETrltz_nladHItg/photo.jpg?sz=128", "display_name": "Unusualslim", "link": "https://stackoverflow.com/users/12031309/unusualslim"}, "edited": false, "score": 0, "creation_date": 1577207006, "post_id": 59461804, "comment_id": 105121799, "body": "To simplify things slightly you don&#39;t have to pass action_name as a parameter as it is already available in the helper."}, {"owner": {"reputation": 29, "user_id": 12031309, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-U_xwmpJpbz8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcJC2RqlgF3TZkETrltz_nladHItg/photo.jpg?sz=128", "display_name": "Unusualslim", "link": "https://stackoverflow.com/users/12031309/unusualslim"}, "edited": false, "score": 0, "creation_date": 1579199535, "post_id": 59461804, "comment_id": 105695520, "body": "I ended up simplifying my case statement to use string literals /image*/ and /application*/. Considering it&#39;s only for show and index action. I was overthinking the DRY, but it was good practice."}], "tags": [], "owner": {"reputation": 1330, "user_id": 887947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ace01b4b1b5759067b48b6b074902e65?s=128&d=identicon&r=PG", "display_name": "Ben Trewern", "link": "https://stackoverflow.com/users/887947/ben-trewern"}, "is_accepted": true, "score": 0, "last_activity_date": 1577143227, "last_edit_date": 1577143227, "creation_date": 1577139243, "answer_id": 59461804, "question_id": 59461053, "link": "https://stackoverflow.com/questions/59461053/how-do-i-create-a-module-helper-to-auto-select-the-correct-ruby-image-or-video-t/59461804#59461804", "title": "How do I create a module/helper to auto select the correct ruby image or video tag?", "body": "<p>Why would you not just pass the board into your helper?</p>\n\n<pre><code>module BoardsHelper\n  def tag_selector(board, action_name)\n    size = action_name == 'index' ? '300x300' : board.resolution\n    case board.image.content_type\n    when \"image/png\", \"image/jpeg\", \"image/gif\"\n      image_tag((board.image.variant(resize: size) if board.image.attached?),  class: \"img-fluid\")\n      ....\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 12031309, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-U_xwmpJpbz8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcJC2RqlgF3TZkETrltz_nladHItg/photo.jpg?sz=128", "display_name": "Unusualslim", "link": "https://stackoverflow.com/users/12031309/unusualslim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 59461804, "answer_count": 1, "score": 0, "last_activity_date": 1577143227, "creation_date": 1577133303, "question_id": 59461053, "link": "https://stackoverflow.com/questions/59461053/how-do-i-create-a-module-helper-to-auto-select-the-correct-ruby-image-or-video-t", "title": "How do I create a module/helper to auto select the correct ruby image or video tag?", "body": "<p>I'm using Active Storage to upload files. I would like to not have to guess which tag to use to select the active storage object based on content_type. I've created a case statement to auto select in a view that workds, but in order to practice DRY I would like to break it out into a helper or method.</p>\n\n<p>Original View Code:</p>\n\n<pre><code>&lt;% case @board.image.content_type\n  when \"image/png\" %&gt;\n    &lt;%= image_tag((@board.image.variant(resize: @board.resolution) if @board.image.attached?),  :class =&gt; \"img-fluid\") %&gt;\n  &lt;% when \"image/jpeg\" %&gt;\n    &lt;%= image_tag((@board.image.variant(resize: @board.resolution) if @board.image.attached?),  :class =&gt; \"img-fluid\") %&gt;\n  &lt;% when \"image/gif\" %&gt;\n    &lt;%= image_tag((@board.image.variant(resize: @board.resolution) if @board.image.attached?),  :class =&gt; \"img-fluid\") %&gt;\n  &lt;% when \"video/mp4\" %&gt;\n    &lt;%= video_tag(url_for(@board.image),controls: false, autoplay: true, muted: true, loop: true, class:\"vid-fluid\")  %&gt;\n  &lt;% when \"application/pdf\" %&gt;\n    &lt;%= image_tag @board.image.blob.preview(resize: \"1920x1080\"), :class =&gt; \"img-fluid\" %&gt;\n  &lt;% when \"application/msword\" %&gt;\n    &lt;%= image_tag @board.image.blob.preview(resize: @board.resolution), :class =&gt; \"img-fluid\" %&gt;\n  &lt;% when \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\" %&gt;\n    &lt;%= image_tag @board.image.blob.preview(resize: @board.resolution), :class =&gt; \"img-fluid\" %&gt;\n  &lt;% when \"application/vnd.ms-excel\" %&gt;\n    &lt;%= image_tag @board.image.blob.preview(resize: @board.resolution), :class =&gt; \"img-fluid\" %&gt;\n  &lt;% when \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\" %&gt;\n    &lt;%= image_tag @board.image.blob.preview(resize: @board.resolution), :class =&gt; \"img-fluid\" %&gt;\n  &lt;% when \"application/vnd.ms-powerpoint\" %&gt;\n    &lt;%= image_tag @board.image.blob.preview(resize: @board.resolution), :class =&gt; \"img-fluid\" %&gt;\n  &lt;% when \"application/vnd.openxmlformats-officedocument.presentationml.presentation\" %&gt;\n    &lt;%= image_tag @board.image.blob.preview(resize: @board.resolution), :class =&gt; \"img-fluid\" %&gt;\n  &lt;% else %&gt;\n    &lt;%= link_to 'Back', boards_path %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Here is my attempt at creating a helper, but I have no idea how I would be able to pass the other arguments I need for the tags.</p>\n\n<pre><code>module BoardsHelper\n  def tag_selector(content_type)\n\n    &lt;% case content_type\n      when \"image/png\" %&gt;\n        &lt;%= image_tag %&gt;\n      &lt;% when \"image/jpeg\" %&gt;\n        &lt;%= image_tag %&gt;\n      &lt;% when \"image/gif\" %&gt;\n        &lt;%= image_tag %&gt;\n      &lt;% when \"video/mp4\" %&gt;\n        &lt;%= video_tag %&gt;\n      &lt;% when \"application/pdf\" %&gt;\n        &lt;%= image_tag %&gt;\n      &lt;% when \"application/msword\" %&gt;\n        &lt;%= image_tag %&gt;\n      &lt;% when \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\" %&gt;\n        &lt;%= image_tag %&gt;\n      &lt;% when \"application/vnd.ms-excel\" %&gt;\n        &lt;%= image_tag %&gt;\n      &lt;% when \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\" %&gt;\n        &lt;%= image_tag %&gt;\n      &lt;% when \"application/vnd.ms-powerpoint\" %&gt;\n        &lt;%= image_tag %&gt;\n      &lt;% when \"application/vnd.openxmlformats-officedocument.presentationml.presentation\" %&gt;\n        &lt;%= image_tag %&gt;\n      &lt;% else %&gt;\n        &lt;%= image_tag %&gt;\n    &lt;% end %&gt;\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "activerecord", "rails-activerecord"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1577128096, "post_id": 59459351, "comment_id": 105101649, "body": "please update question to include full backtrace errors, but also, what do you mean by &quot; it is not possible to access the connection class&quot; ?"}, {"owner": {"reputation": 11, "user_id": 12586322, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PyTTC.jpg?s=128&g=1", "display_name": "D&#233;bora Viana", "link": "https://stackoverflow.com/users/12586322/d%c3%a9bora-viana"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1577130359, "post_id": 59459351, "comment_id": 105102310, "body": "The error presented on the console is just this. Which makes it even harder for me. I don&#39;t know if the code does not agree with language conventions.  When I say that it is not possible to access the connection class is as follows. In the class I want to use the &#39;exec&#39; method of the connection class. The daughter class cannot see the exec method."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1577214640, "post_id": 59459351, "comment_id": 105123770, "body": "what do you mean by &quot;daughter class&quot;  is there another class which inherits from this?  If so, you should include it in your question."}], "owner": {"reputation": 11, "user_id": 12586322, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PyTTC.jpg?s=128&g=1", "display_name": "D&#233;bora Viana", "link": "https://stackoverflow.com/users/12586322/d%c3%a9bora-viana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1577123251, "creation_date": 1577123251, "question_id": 59459351, "link": "https://stackoverflow.com/questions/59459351/how-to-create-class-to-establish-database-connection-using-establish-connection", "title": "How to create class to establish database connection using establish_connection - RUBY", "body": "<p>I don't know much about Ruby language. I am trying to create a class to establish an oracle database connection. This class will receive the connection to be reused in other classes. I am working on an automation project and need to establish this connection in order to prepare the mass of data for automated testing. Below I will make my code available so that someone can guide me how I should create this class. In this case it is not possible to access the connection class.</p>\n\n<pre><code>require \"rubygems\"\nrequire \"active_record\"\n\nclass Connection\n    attr_accessor :connection\n\n  ActiveRecord::Base.establish_connection(\n    :adapter =&gt; \"oracle_enhanced\",\n    :database =&gt; \"dboraclehomolog.com.br:1521/homolog\",\n    :username =&gt; \"USER\",\n    :password =&gt; \"password\",\n  )\n\n  def initialize\n    connection = ActiveRecord::Base.connection\n  end\n\n  def execute_select(sql)\n    results = ActiveRecord::Base.connection.execute(sql)\n\n    if results.nil?\n      return results\n    else\n      return false\n    end\n  end\n\n  def exec(sql)\n    begin\n      ActiveRecord::Base.connection.execute(sql)\n    rescue =&gt; e\n      puts e.message\n    end\n  end\nend\n</code></pre>\n\n<p>ERROR: uninitialized constant Repactuar::Conexao (NameError)</p>\n"}, {"tags": ["css", "ruby-on-rails", "ruby", "sass"], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 12209868, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-C8mfZmKItDA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reU_1-VY_MGGcodDclRAXdqNpl6IQ/photo.jpg?sz=128", "display_name": "Franck Robin", "link": "https://stackoverflow.com/users/12209868/franck-robin"}, "edited": false, "score": 0, "creation_date": 1577128185, "post_id": 59459751, "comment_id": 105101679, "body": "I just did it, but now i have <code>500 Internal Server Error</code> How can i check the logs ?"}, {"owner": {"reputation": 1330, "user_id": 887947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ace01b4b1b5759067b48b6b074902e65?s=128&d=identicon&r=PG", "display_name": "Ben Trewern", "link": "https://stackoverflow.com/users/887947/ben-trewern"}, "edited": false, "score": 0, "creation_date": 1577210316, "post_id": 59459751, "comment_id": 105122621, "body": "In the file log/development.log"}], "tags": [], "owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "is_accepted": false, "score": 1, "last_activity_date": 1577125611, "creation_date": 1577125611, "answer_id": 59459751, "question_id": 59459324, "link": "https://stackoverflow.com/questions/59459324/how-to-use-variables-using-scss-partials-on-ruby-on-rails/59459751#59459751", "title": "How to use variables using scss partials on ruby on rails", "body": "<p>If you're using SCSS imports you don't want to use the <code>require_tree</code> and <code>require_self</code> syntax. This is fine alone:</p>\n\n<pre><code> @import \"variables\";\n @import \"call-to-action\";\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 12209868, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-C8mfZmKItDA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reU_1-VY_MGGcodDclRAXdqNpl6IQ/photo.jpg?sz=128", "display_name": "Franck Robin", "link": "https://stackoverflow.com/users/12209868/franck-robin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1577272135, "creation_date": 1577123091, "last_edit_date": 1577272135, "question_id": 59459324, "link": "https://stackoverflow.com/questions/59459324/how-to-use-variables-using-scss-partials-on-ruby-on-rails", "title": "How to use variables using scss partials on ruby on rails", "body": "<p>I created a new rails app. I am using Ubuntu 18.04, and Rails 6.0.2.1.</p>\n\n<p>I downloaded a bootstrap template on startbootstrap.com and trying to use it for my landing page. So i copied the css &amp; scss files inside <em>app/assets/stylesheets</em>, and i copied the HTML.</p>\n\n<p>I have the following partials in <em>app/assets/stylesheets</em> : _variables.scss and _call-to-action.scss.</p>\n\n<p>In the same directory, i also have the file <strong>application.scss</strong> with the following code :</p>\n\n<pre><code>/*\n *= require_tree .\n *= require_self\n */\n@import \"variables\";\n@import \"call-to-action\";\n</code></pre>\n\n<p>I have the following code in the partial <strong>_call-to-action.scss</strong> :</p>\n\n<pre><code>.call-to-action {\n  background-color: $gray-800;\n  background: url('../images/bg-masthead.jpg');\n}\n</code></pre>\n\n<p>I have the following code in the partial <strong>_variables.scss</strong> :</p>\n\n<pre><code>$white: #fff !default;\n$gray-800: #343a40 !default;\n$black: #000 !default;\n</code></pre>\n\n<p>And when i go to my landing page, i have the following error :</p>\n\n<pre><code>SassC::SyntaxError in Pages#home\nShowing /home/user/code/myusername/rails-project/app/views/layouts/application.html.erb where line #8 raised:\n\nError: Undefined variable: \"$gray-800\".\n        on line 4:21 of app/assets/stylesheets/_call-to-action.scss\n&gt;&gt;   background-color: $gray-800;\n</code></pre>\n\n<p>As my partials files are imported on <em>application.scss</em>, i don't understand how to solve this issue. Did i do something wrong ?</p>\n\n<hr>\n\n<p>EDIT : i removed require_tree and require_self syntax but now i get 500 internal server error. I have this when i check the development.log :</p>\n\n<pre><code>&gt; tail -f log/development.log\n\nrack (2.0.8) lib/rack/sendfile.rb:111:in `call'\nactionpack (6.0.2.1) lib/action_dispatch/middleware/host_authorization.rb:83:in `call'\nwebpacker (4.2.2) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'\nrack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'\nrailties (6.0.2.1) lib/rails/engine.rb:526:in `call'\npuma (4.3.1) lib/puma/configuration.rb:228:in `call'\npuma (4.3.1) lib/puma/server.rb:681:in `handle_request'\npuma (4.3.1) lib/puma/server.rb:472:in `process_client'\npuma (4.3.1) lib/puma/server.rb:328:in `block in run'\npuma (4.3.1) lib/puma/thread_pool.rb:134:in `block in spawn_thread'\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 47, "user_id": 9179682, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QXQLsNVlO1c/AAAAAAAAAAI/AAAAAAAAACo/1A_TsZljKL8/photo.jpg?sz=128", "display_name": "Bashir Hud", "link": "https://stackoverflow.com/users/9179682/bashir-hud"}, "is_accepted": true, "score": 0, "last_activity_date": 1577130372, "creation_date": 1577130372, "answer_id": 59460583, "question_id": 59459029, "link": "https://stackoverflow.com/questions/59459029/automatically-scrolls-up-after-loading-more-items-endless-scrolling/59460583#59460583", "title": "Automatically scrolls up after loading more items (Endless scrolling)", "body": "<p>This function did the trick in place of: <code>$(window).scroll()</code>\nI put </p>\n\n<pre><code>  $('html, body').animate({ scrollTop: $(document).height() - \n$(window).height() }, 1000, function() {\n    $(this).animate({ scrollBottom: 0 }, 1000);\n  });\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 9179682, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QXQLsNVlO1c/AAAAAAAAAAI/AAAAAAAAACo/1A_TsZljKL8/photo.jpg?sz=128", "display_name": "Bashir Hud", "link": "https://stackoverflow.com/users/9179682/bashir-hud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22, "favorite_count": 0, "accepted_answer_id": 59460583, "answer_count": 1, "score": 0, "last_activity_date": 1577130372, "creation_date": 1577121295, "question_id": 59459029, "link": "https://stackoverflow.com/questions/59459029/automatically-scrolls-up-after-loading-more-items-endless-scrolling", "title": "Automatically scrolls up after loading more items (Endless scrolling)", "body": "<p>I'm trying to implement an endless scrolling in RoR but after it loads more items, automatically scrolls to the top of the page. I want to keep the same position. What could be happening? </p>\n\n<p>Controller:</p>\n\n<pre><code>def index\n  @works = Work.paginate(page: params[:page], per_page: 15).order('created_at DESC')\n  respond_to do |format|\n    format.html\n    format.js\n  end\nend\n</code></pre>\n\n<p>View index.js.erb:</p>\n\n<pre><code>$(\"#works\").append('&lt;%= j render(\"work_page_header\") %&gt;');\n$(\"#works\").append('&lt;%= j render(@works) %&gt;');\n\n&lt;% if @works.next_page %&gt;\n  $('.pagination').replaceWith('&lt;%= j will_paginate(@works) %&gt;');\n&lt;% else %&gt;\n  $('.pagination').remove();\n&lt;% end %&gt;\n</code></pre>\n\n<p>endless_scrolling.js:</p>\n\n<pre><code>$(document).on('turbolinks:load', function() { \n  if( $('.pagination').length &amp;&amp; $('#works-list').length)\n\n  $(window).on('scroll', function(e){\n    var url = $('.pagination .page-link[rel=\"next\"]').attr('href');\n\n    if(url &amp;&amp; $(window).scrollTop() &gt; ($(document).height() - $(window).height() - 50)) {\n      $('.pagination').text('Loading works...');\n      $.getScript(url);\n      console.log('paginate...', url);\n      $(window).scroll();\n    }\n  });\n});\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2184, "user_id": 8352929, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a74f883702be71738a2e3d6f59e466ed?s=128&d=identicon&r=PG&f=1", "display_name": "adesurirey", "link": "https://stackoverflow.com/users/8352929/adesurirey"}, "edited": false, "score": 0, "creation_date": 1577122250, "post_id": 59458700, "comment_id": 105099622, "body": "There&#39;s a typo in the path of your form <code>facturacion_historys_path</code> instead of  <code>facturacion_history_path</code> (s)"}], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 6858117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b1d36386d0f7bfb6ecb605ecfd2fce2?s=128&d=identicon&r=PG", "display_name": "Israel", "link": "https://stackoverflow.com/users/6858117/israel"}, "is_accepted": true, "score": 0, "last_activity_date": 1577126390, "creation_date": 1577126390, "answer_id": 59459883, "question_id": 59458700, "link": "https://stackoverflow.com/questions/59458700/it-does-not-redirect-to-the-show-method/59459883#59459883", "title": "It does not redirect to the show method", "body": "<p>In your form in index.html, you need the correct path <code>/facturacion/historys/:id</code> i.e. <strong>facturacion_history_path(:id)</strong> there is a typo in the path.</p>\n\n<p><strong>Note</strong>: You need add the id of the record as well.</p>\n"}], "owner": {"reputation": 3, "user_id": 12586019, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAMPxv8SQ4QBdBFuBbgx1qCNZBM0OEUeo8Nbfn_WQ=k-s128", "display_name": "Thearze55", "link": "https://stackoverflow.com/users/12586019/thearze55"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 59459883, "answer_count": 1, "score": 0, "last_activity_date": 1577126390, "creation_date": 1577119553, "question_id": 59458700, "link": "https://stackoverflow.com/questions/59458700/it-does-not-redirect-to-the-show-method", "title": "It does not redirect to the show method", "body": "<p><strong>historys_controller.rb</strong></p>\n\n<pre><code>class Facturacion::HistorysController &lt; Facturacion::AuthorizeController\n#before_filter :student, :only =&gt; :show,:index\nskip_load_and_authorize_resource \nauthorize_resource  :only =&gt; [:index, :show]\nlayout 'facturacion/dashboard_layout'\n\ndef index \n  #  id=params[:filter][:student]\n\nend \n\ndef show \n    puts \"im here\"\n\n\n    ids=params[:student].to_i\n    print ids\n   # puts ids\n    @user =Academico::Student.find(params[:id])\nend \n\n\n\nprivate\ndef historys_params\n   params.require(:facturacion_history).permit(:student=&gt;[:id])\nend\n</code></pre>\n\n<p>end</p>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>   resources :statements\n   resources :historys\n</code></pre>\n\n<p><strong>index.html.erb</strong></p>\n\n<pre><code>&lt;div class=\"right_col\" role=\"main\"&gt;\n&lt;div class=\"\"&gt;\n\n    &lt;div class=\"clearfix\"&gt;&lt;/div&gt;\n\n    &lt;div class=\"row\"&gt;\n\n        &lt;div class=\"clearfix\"&gt;&lt;/div&gt;\n\n        &lt;div class=\"col-md-12 col-sm-12 col-xs-12\"&gt;\n            &lt;div class=\"x_panel\"&gt;\n                &lt;div class=\"x_title\"&gt;\n                    &lt;h2&gt;Historial Transacciones&lt;/h2&gt;\n                    &lt;div class=\"clearfix\"&gt;&lt;/div&gt;\n                &lt;/div&gt;\n\n                &lt;div class=\"x_content\"&gt;\n                    &lt;% if notice.present?%&gt;\n                    &lt;div class=\"alert alert-success\"&gt;\n                        &lt;a href=\"#\" class=\"close\" data-dismiss=\"alert\" aria-label=\"close\" title=\"close\"&gt;\u00d7&lt;/a&gt;\n                        &lt;%= notice %&gt;\n                    &lt;/div&gt;\n                    &lt;% end %&gt;\n                    &lt;div class=\"table-responsive\"&gt;\n                        &lt;div class=\"item form-group\"&gt;\n                            &lt;%= form_tag  facturacion_historys_path, :method =&gt; 'get',:class=&gt;\"form-horizontal form-label-left\" do %&gt;\n\n                             &lt;%= label_tag \"Estudiante\", nil, :class=&gt;\"control-label col-md-3 col-sm-3 col-xs-12\" %&gt;\n                                &lt;div class=\"col-md-6 col-sm-6 col-xs-12\"&gt;\n                                   &lt;%= collection_select(:student,:id, Academico::Student.all, :id,:full_name, {:include_blank =&gt; true, :required=&gt;\"required\"},{:class=&gt;\"select2_single form-control\",:required=&gt;\"required\"}) %&gt;\n                               &lt;/div&gt;\n                        &lt;/div&gt;\n                        &lt;div class=\"clearfix\"&gt;&lt;/div&gt;\n                        &lt;br&gt;\n\n\n                        &lt;div class=\"clearfix\"&gt;&lt;br&gt;&lt;/div&gt;\n                        &lt;div class=\"form-group\"&gt;\n\n                            &lt;div class=\"row\"&gt;\n                                &lt;div class=\"col-md-3\" style=\"margin-left:100px;\"&gt;\n                                &lt;/div&gt;\n\n                                &lt;div class=\"col-md-3\" style=\"margin-left:100px;\"&gt;\n                                    &lt;button id=\"send\" type=\"submit\" class=\"btn btn-success\"&gt;Generar&lt;/button&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                        &lt;% end %&gt;\n                    &lt;/div&gt;\n\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p></p>\n\n<p>the form does not redirect me to the show view, after I choose an option, it returns the same index\nhe looked for information about it and found no solution my rake routes are as follows</p>\n\n<p><strong>Rake routes</strong></p>\n\n<pre><code>facturacion/historys#index\n                                                             POST   /facturacion/historys(.:format)                                                        facturacion/historys#create\n                                     new_facturacion_history GET    /facturacion/historys/new(.:format)                                                    facturacion/historys#new\n                                    edit_facturacion_history GET    /facturacion/historys/:id/edit(.:format)                                               facturacion/historys#edit\n                                         facturacion_history GET    /facturacion/historys/:id(.:format)                                                    facturacion/historys#show\n                                                             PATCH  /facturacion/historys/:id(.:format)                                                    facturacion/historys#update\n                                                             PUT    /facturacion/historys/:id(.:format)                                                    facturacion/historys#update\n                                                             DELETE /facturacion/historys/:id(.:format)                                                    facturacion/historys#destroy\n</code></pre>\n\n<p>I do not know what I am doing wrong or if I am or mitigating some step, I would be grateful for the help, thank you very much</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "string"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1577119626, "post_id": 59458436, "comment_id": 105098638, "body": "@engineersmnky <code>Regexp.union(Model.distinct.pluck(:title))</code> \ud83d\ude1f I am not sure <code>Regexp</code> length capacities are infinite."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1577119858, "post_id": 59458436, "comment_id": 105098738, "body": "@engineersmnky I understand it is a solution (unless <code>Regexp#union</code> gets confused by the number of distinct titles.)"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1577123285, "post_id": 59458436, "comment_id": 105100009, "body": "Why not <code>M.where(&quot;? like &#39;%&#39; || column || &#39;%&#39;&quot;, given_string)</code>? Won&#39;t be the quickest but it might be fast enough and if not, at least a starting point."}, {"owner": {"reputation": 23, "user_id": 12585947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a2339ca858154bd93930e83949d509d?s=128&d=identicon&r=PG&f=1", "display_name": "Dima Tarasenko", "link": "https://stackoverflow.com/users/12585947/dima-tarasenko"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1577125362, "post_id": 59458436, "comment_id": 105100749, "body": "@muistooshort brilliant, thank you - that is perfect! Speed shouldn&#39;t be an issue, this model is fixed to 100 or so records"}], "answers": [{"tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 1, "last_activity_date": 1577125495, "creation_date": 1577125495, "answer_id": 59459726, "question_id": 59458436, "link": "https://stackoverflow.com/questions/59458436/match-string-to-an-activerecord-object-with-a-substring-attribute/59459726#59459726", "title": "Match string to an ActiveRecord Object with a substring attribute", "body": "<p>SQL's LIKE operator has strings on both sides so you can turn it around and say \"is this string literal like this pattern built from a column\":</p>\n\n<pre><code>M.where(\":string like '%' || column || '%'\", string: given_string)\n</code></pre>\n\n<p>Again, this won't be super fast but it should be fast enough for small tables.</p>\n"}], "owner": {"reputation": 23, "user_id": 12585947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a2339ca858154bd93930e83949d509d?s=128&d=identicon&r=PG&f=1", "display_name": "Dima Tarasenko", "link": "https://stackoverflow.com/users/12585947/dima-tarasenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 59459726, "answer_count": 1, "score": 1, "last_activity_date": 1577125495, "creation_date": 1577118231, "last_edit_date": 1577118615, "question_id": 59458436, "link": "https://stackoverflow.com/questions/59458436/match-string-to-an-activerecord-object-with-a-substring-attribute", "title": "Match string to an ActiveRecord Object with a substring attribute", "body": "<p>I have an ActiveRecord Model with a column 'title'. The title might be \"coding challenge\". The function is presented with a string such as \"this new coding challenge is really difficult\".</p>\n\n<p>I am looking for a way to query the db and match the string to the model. I've thought of using LIKE SQL, but the given string is always larger than the substring in the model. </p>\n\n<p>So what I am looking for is something like - given_string.include? Model.titles that returns the record or nil if no match</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "wicked-gem"], "answers": [{"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 1, "last_activity_date": 1577115892, "creation_date": 1577115892, "answer_id": 59457944, "question_id": 59457758, "link": "https://stackoverflow.com/questions/59457758/making-field-validate-only-if-user-specified-a-certain-value-otherwise-optional/59457944#59457944", "title": "Making field validate only if user specified a certain value, otherwise optional", "body": "<p>Unfortunately, you cannot (currently) provide a lambda to <code>optional</code> - see the <a href=\"https://github.com/rails/rails/blob/master/activerecord/lib/active_record/associations/builder/belongs_to.rb#L144\" rel=\"nofollow noreferrer\">source code</a>:</p>\n\n<pre><code>required = !reflection.options[:optional]\n</code></pre>\n\n<p>If required, Rails just adds a presence validation like this:</p>\n\n<pre><code>model.validates_presence_of reflection.name, message: :required\n</code></pre>\n\n<p>Therefore as a workaround, you could do this in two parts: First specify the association as <code>optional</code>; then explicitly make it required for your condition:</p>\n\n<pre><code>belongs_to :state, :class_name =&gt; \"ProvinceState\", :foreign_key =&gt; :state_id, optional: true\nvalidates :state_id, presence: true, if: -&gt;{ %w[CA US].include?(country) }\n</code></pre>\n\n<p>If the logic gets significantly more complicated, you may wish to move this into a separate method/class instead of an inline lambda. See: <a href=\"https://guides.rubyonrails.org/active_record_validations.html#custom-validators\" rel=\"nofollow noreferrer\">Performing Custom Validations</a></p>\n"}, {"tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": false, "score": 0, "last_activity_date": 1577115906, "creation_date": 1577115906, "answer_id": 59457950, "question_id": 59457758, "link": "https://stackoverflow.com/questions/59457758/making-field-validate-only-if-user-specified-a-certain-value-otherwise-optional/59457950#59457950", "title": "Making field validate only if user specified a certain value, otherwise optional", "body": "<p>You can make validation with lambda condition like this:</p>\n\n<pre><code>validates :state, presence: true, if: -&gt; { %w[US CA].include?(country) }\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 10723638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bae4d4acdc561ff872e420dafeab7de5?s=128&d=identicon&r=PG&f=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/10723638/victor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 59457944, "answer_count": 2, "score": 0, "last_activity_date": 1577116827, "creation_date": 1577115054, "last_edit_date": 1577116827, "question_id": 59457758, "link": "https://stackoverflow.com/questions/59457758/making-field-validate-only-if-user-specified-a-certain-value-otherwise-optional", "title": "Making field validate only if user specified a certain value, otherwise optional", "body": "<p>There is a form that a user submits which then gets validated by the model. I only want the field \"Province / State\" to validate if the \"Country\" is either \"CA\" (Canada) or \"US\" (USA)</p>\n\n<p>The form is set up a little differently because we are doing a multiple step from process. </p>\n\n<p>Here is the controller.</p>\n\n<pre><code>    def update\n        case step\n        when :step1\n          wizard_params = profile_params()\n          wizard_params[:wizard] = 'step1'\n\n          @profile = current_user.profile\n          @profile.update(wizard_params)\n\n          render_wizard @profile\nend\n\n    private\n        def profile_params\n          # There are more params although I stripped them for the simplicity of this example\n          params.require(:profile).permit(:state_id, :country)\n        end\n</code></pre>\n\n<p>Profile.rb</p>\n\n<pre><code>  belongs_to :state, :class_name =&gt; \"ProvinceState\", :foreign_key =&gt; :state_id, optional: true\n</code></pre>\n\n<p>I hard coded <code>optional: true</code> but I only want optional:true if the user selected CA/US OR the field saved is CA/US.</p>\n\n<p>I took a look at lambda and it could be something I need.</p>\n\n<p>For Example:</p>\n\n<pre><code>belongs_to :state, :class_name =&gt; \"ProvinceState\", :foreign_key =&gt; :state_id, optional: lambda | obj | self.country == CA || self.country == US ? true : false \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "multithreading", "process", "puma"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1577128851, "post_id": 59457677, "comment_id": 105101866, "body": "Did you investigate why exactly your application is slow in development? Is it slow in other environments too? What causes it to be slow? The number of API requests? Slow database queries? Not enough memory on your development machine?"}, {"owner": {"reputation": 221, "user_id": 5477532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e99d00860a85f785257b8c2f6c85a8f9?s=128&d=identicon&r=PG", "display_name": "Dylan Andrews", "link": "https://stackoverflow.com/users/5477532/dylan-andrews"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1577134177, "post_id": 59457677, "comment_id": 105103343, "body": "Good questions. It is not slow in other environments. I don&#39;t think it&#39;s an issue with my machine, as I have 32BG of ram. We&#39;ve been good about optimizing our queries so things are looking good in that area. it could be the number of api requests happening at once, as there are quite a few when a user enters the app, but I&#39;m not sure we should change that since it runs well in other environments. Are you thinking tweaking the puma config is probably the wrong way to address the issue?"}], "owner": {"reputation": 221, "user_id": 5477532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e99d00860a85f785257b8c2f6c85a8f9?s=128&d=identicon&r=PG", "display_name": "Dylan Andrews", "link": "https://stackoverflow.com/users/5477532/dylan-andrews"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 433, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1577118279, "creation_date": 1577114642, "last_edit_date": 1577118279, "question_id": 59457677, "link": "https://stackoverflow.com/questions/59457677/best-puma-config-for-local-development", "title": "Best puma config for local development", "body": "<h3>Question</h3>\n\n<p>What is the ideal puma config in development mode for optimizing performance?</p>\n\n<h3>Background</h3>\n\n<p>Our rails app runs annoyingly slow in development mode; the server will frequently freeze up and have to be manually terminated using <code>kill -9 [process number]</code>, and refreshing the app in the browser on code change can take a long time. We are a json api on rails 6 using puma, and our puma config is as follows. We also use <a href=\"https://github.com/activeadmin/activeadmin\" rel=\"nofollow noreferrer\">active_admin</a>, which I mention because it is the only part of our app that really uses the asset pipeline and is the slowest part of our app to do development on (refreshing admin app after code change takes the longest).</p>\n\n<pre><code>threads_count = ENV.fetch('RAILS_MAX_THREADS') { 5 }\nthreads threads_count, threads_count\n\n# Specifies the `port` that Puma will listen on to receive requests; default is 3000.\n#\nport        ENV.fetch('PORT') { 3000 }\n\n# Specifies the `environment` that Puma will run in.\n#\nenvironment ENV.fetch('RAILS_ENV') { 'development' }\n</code></pre>\n\n<p>We have done <code>puma -w 5</code> to increase the number of workers, which in theory should increase throughput and the potential number of db connections (correct me if this is wrong), but it hasn't had a noticeable impact on performance of the app. From what I've read doing <code>puma -w 5</code> is also not a great idea during development because it means every time you change some code each worker has to reload the entire app, which would mean it is better to just run one worker locally so the app only has to reload one time on code change. It's possible that this slowness does not have to do with our puma config and that it is perhaps another issue, but regardless I would love to hear thoughts on how to best configure puma to run optimally in development mode.</p>\n\n<p>Thanks in advance for the help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "minitest"], "answers": [{"comments": [{"owner": {"reputation": 336, "user_id": 8431259, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/c9u5J.jpg?s=128&g=1", "display_name": "Karol Karol", "link": "https://stackoverflow.com/users/8431259/karol-karol"}, "edited": false, "score": 0, "creation_date": 1577193867, "post_id": 59460057, "comment_id": 105117903, "body": "That makes a lot of sense. I just end up using the famous <code>def self.call(args); new(*args).send(:call); end</code> to invoke call by another <code>call</code> class method. Sadly I&#39;m using mintiest :(, anyway appreciated for the Spec example."}], "tags": [], "owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "is_accepted": true, "score": 1, "last_activity_date": 1577207250, "last_edit_date": 1577207250, "creation_date": 1577127264, "answer_id": 59460057, "question_id": 59457187, "link": "https://stackoverflow.com/questions/59457187/how-to-test-a-method-is-invoked-after-other-in-an-object/59460057#59460057", "title": "How to test a method is invoked after other in an object?", "body": "<p>You're running into a peculiarity of Minitest here: when <code>call</code> is defined on a method, it appears that something in the minitest stack attempts to call it when an object is defined.</p>\n\n<p>Given this test setup:</p>\n\n<pre><code>require 'minitest/autorun'\n\nclass Foo\n  def call\n  end\nend\n\nclass Bar\n  def test\n    Foo.new.call\n  end\nend\n\ndescribe \"Bar\" do\n  it \"invokes foo.call\" do\n    mock = Minitest::Mock.new(Foo)\n    mock.expect(:call, nil)\n\n    Foo.stub :new, mock do |args|\n      Bar.new.test\n      mock.verify\n    end\n  end\nend\n</code></pre>\n\n<p>It fails as described. But if you rename <code>call</code> to <code>my_call</code>, it passes:</p>\n\n<pre><code>require 'minitest/autorun'\n\nclass Foo\n  def my_call\n  end\nend\n\nclass Bar\n  def test\n    Foo.new.my_call\n  end\nend\n\ndescribe \"Bar\" do\n  it \"invokes foo.my_call\" do\n    mock = Minitest::Mock.new(Foo)\n    mock.expect(:my_call, nil)\n\n    Foo.stub :new, mock do |args|\n      Bar.new.test\n      mock.verify\n    end\n  end\nend\n</code></pre>\n\n<p>The same test passes under RSpec:</p>\n\n<pre><code>class Foo\n  def call\n  end\nend\n\nclass Bar\n  def test\n    Foo.new.call\n  end\nend\n\ndescribe \"Bar\" do\n  it \"invokes foo.call\" do\n    mock = double\n    expect(mock).to receive(:call)\n    expect(Foo).to receive(:new).and_return(mock)\n    Bar.new.test\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 336, "user_id": 8431259, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/c9u5J.jpg?s=128&g=1", "display_name": "Karol Karol", "link": "https://stackoverflow.com/users/8431259/karol-karol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 59460057, "answer_count": 1, "score": 1, "last_activity_date": 1577207250, "creation_date": 1577112462, "question_id": 59457187, "link": "https://stackoverflow.com/questions/59457187/how-to-test-a-method-is-invoked-after-other-in-an-object", "title": "How to test a method is invoked after other in an object?", "body": "<p>I have the following class:</p>\n\n<pre><code>class Foo\n  def initialize(foobar:)\n    @foobar = foobar\n  end\n\n  def call\n    return if foobar.blank?\n    do_something_here\n  end\nend\n</code></pre>\n\n<p>Which is being invoked in an after_commit callback from a model:</p>\n\n<pre><code>included { after_commit :invoke_method_in_poro, on: %I[create update] }\n\nprivate\n\ndef invoke_method_in_poro\n  Foo.new(foobar: to_json).call\nend\n</code></pre>\n\n<p>Now when I try to test if <code>call</code> is being invoked, I need to first stub the new method, because I'm getting this error:</p>\n\n<pre><code>NameError: undefined method `call' for class `Foo'\nDid you mean?  caller\n</code></pre>\n\n<p>With this code:</p>\n\n<pre><code>foo = Foo\nnew_mock = Minitest::Mock.new\nnew_mock.expect :call, nil\nfoo.stub(:call, new_mock) do\n  create(:model)\nend\nmock.verify\n</code></pre>\n\n<p>My question is, how finally can I test that <code>call</code> is being invoked?</p>\n"}, {"tags": ["ruby", "docker", "bundler"], "comments": [{"owner": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "edited": false, "score": 0, "creation_date": 1577104296, "post_id": 59455367, "comment_id": 105091949, "body": "Possible duplicate <a href=\"https://stackoverflow.com/questions/53231667/bundler-you-must-use-bundler-2-or-greater-with-this-lockfile\">Bundler: You must use Bundler 2 or greater with this lockfile</a>"}, {"owner": {"reputation": 64542, "user_id": 10008173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ea5d6d5d63e054acb8cfa95a39240d?s=128&d=identicon&r=PG&f=1", "display_name": "David Maze", "link": "https://stackoverflow.com/users/10008173/david-maze"}, "edited": false, "score": 0, "creation_date": 1577104335, "post_id": 59455367, "comment_id": 105091962, "body": "What&#39;s the version number in your <code>Gemfile.lock</code>; is it exactly 2.1.2?  Can you edit your question to include the relevant <code>COPY</code> and <code>RUN</code> Dockerfile instructions that reproduce this?"}, {"owner": {"reputation": 3375, "user_id": 3676469, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/100003443544248/picture?type=large", "display_name": "Hirurg103", "link": "https://stackoverflow.com/users/3676469/hirurg103"}, "reply_to_user": {"reputation": 64542, "user_id": 10008173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ea5d6d5d63e054acb8cfa95a39240d?s=128&d=identicon&r=PG&f=1", "display_name": "David Maze", "link": "https://stackoverflow.com/users/10008173/david-maze"}, "edited": false, "score": 0, "creation_date": 1577104994, "post_id": 59455367, "comment_id": 105092245, "body": "@DavidMaze Gemfile.lock has <code>BUNDLED WITH 2.1.1</code>. I guess that any bundler version greater than <code>2.0.0</code> would be OK. I use docker image from the question to run builds with Gitlab CI, and there are no RUN and COPY commands that reproduce the issue. These commands are located in <code>.gitlab-ci.yml</code>. I will update my question, thank you"}, {"owner": {"reputation": 64542, "user_id": 10008173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ea5d6d5d63e054acb8cfa95a39240d?s=128&d=identicon&r=PG&f=1", "display_name": "David Maze", "link": "https://stackoverflow.com/users/10008173/david-maze"}, "edited": false, "score": 0, "creation_date": 1577105350, "post_id": 59455367, "comment_id": 105092422, "body": "Bundler 2.1 has <a href=\"https://github.com/bundler/bundler/issues/7489\" rel=\"nofollow noreferrer\">a pretty significant bug</a> that you must have <i>exactly</i> the bundler version named in the <code>Gemfile.lock</code> version installed.  The symptom isn&#39;t quite what you describe here, but semantic-version constraints don&#39;t work any more.  Does <code>gem install bundler -v 2.1.1</code> make a difference?"}, {"owner": {"reputation": 2504, "user_id": 3729369, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FYV4M.png?s=128&g=1", "display_name": "simonwo", "link": "https://stackoverflow.com/users/3729369/simonwo"}, "edited": false, "score": 0, "creation_date": 1577358086, "post_id": 59455367, "comment_id": 105149682, "body": "Can you remove v1.15.4 with gem uninstall?"}, {"owner": {"reputation": 3375, "user_id": 3676469, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/100003443544248/picture?type=large", "display_name": "Hirurg103", "link": "https://stackoverflow.com/users/3676469/hirurg103"}, "reply_to_user": {"reputation": 2504, "user_id": 3729369, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FYV4M.png?s=128&g=1", "display_name": "simonwo", "link": "https://stackoverflow.com/users/3729369/simonwo"}, "edited": false, "score": 0, "creation_date": 1578940564, "post_id": 59455367, "comment_id": 105595084, "body": "@simonwo possibly removing the old bundler version will work - I haven&#39;t tried it yet. I&#39;ve already found <a href=\"https://stackoverflow.com/a/59722212/3676469\">solution</a> that is working for me"}, {"owner": {"reputation": 3375, "user_id": 3676469, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/100003443544248/picture?type=large", "display_name": "Hirurg103", "link": "https://stackoverflow.com/users/3676469/hirurg103"}, "reply_to_user": {"reputation": 64542, "user_id": 10008173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ea5d6d5d63e054acb8cfa95a39240d?s=128&d=identicon&r=PG&f=1", "display_name": "David Maze", "link": "https://stackoverflow.com/users/10008173/david-maze"}, "edited": false, "score": 0, "creation_date": 1578941968, "post_id": 59455367, "comment_id": 105595683, "body": "@DavidMaze in the issue you mentioned rubygems are complaining that the older bundler version that the previous release was deployed with is missing. At the other hand in this issue bundler is complaining that the new version of bundler is expected"}, {"owner": {"reputation": 3375, "user_id": 3676469, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/100003443544248/picture?type=large", "display_name": "Hirurg103", "link": "https://stackoverflow.com/users/3676469/hirurg103"}, "reply_to_user": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "edited": false, "score": 0, "creation_date": 1578942468, "post_id": 59455367, "comment_id": 105595877, "body": "@TamerShlash <a href=\"https://stackoverflow.com/questions/53231667/bundler-you-must-use-bundler-2-or-greater-with-this-lockfile#comment98008635_53231667\">the first comment</a> to the question you mentioned as a possible duplicate helped me to answer my question. Not sure if my question is a duplicate because I got this error in a Docker container although the OQ relates to Heroku environment"}], "answers": [{"tags": [], "owner": {"reputation": 3375, "user_id": 3676469, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/100003443544248/picture?type=large", "display_name": "Hirurg103", "link": "https://stackoverflow.com/users/3676469/hirurg103"}, "is_accepted": true, "score": 6, "last_activity_date": 1578940295, "creation_date": 1578940295, "answer_id": 59722212, "question_id": 59455367, "link": "https://stackoverflow.com/questions/59455367/docker-you-must-use-bundler-2-or-greater-with-this-lockfile/59722212#59722212", "title": "Docker: You must use Bundler 2 or greater with this lockfile", "body": "<p>I was able to switch to bundler version 2.1 in my docker image using the following commands:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code># Dockerfile\nRUN \\\n  gem update --system --quiet &amp;&amp; \\\n  gem install  bundler -v '~&gt; 2.1'\nENV BUNDLER_VERSION 2.1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5441823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dba575d542739b2f5513e7cc888677c?s=128&d=identicon&r=PG&f=1", "display_name": "Vivek V C", "link": "https://stackoverflow.com/users/5441823/vivek-v-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1597169252, "creation_date": 1597169252, "answer_id": 63363991, "question_id": 59455367, "link": "https://stackoverflow.com/questions/59455367/docker-you-must-use-bundler-2-or-greater-with-this-lockfile/63363991#63363991", "title": "Docker: You must use Bundler 2 or greater with this lockfile", "body": "<p>For using previous version, try this fix. Looks like issue with Gemfile.lock. Try <strong>removing</strong> BUNDLED WITH from gemfile.lock.</p>\n<p>Remove something like and build again</p>\n<pre><code>BUNDLED WITH\n   2.1.4\n</code></pre>\n"}], "owner": {"reputation": 3375, "user_id": 3676469, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/100003443544248/picture?type=large", "display_name": "Hirurg103", "link": "https://stackoverflow.com/users/3676469/hirurg103"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 866, "favorite_count": 0, "accepted_answer_id": 59722212, "answer_count": 2, "score": 2, "last_activity_date": 1597169252, "creation_date": 1577103977, "last_edit_date": 1578940357, "question_id": 59455367, "link": "https://stackoverflow.com/questions/59455367/docker-you-must-use-bundler-2-or-greater-with-this-lockfile", "title": "Docker: You must use Bundler 2 or greater with this lockfile", "body": "<p>I am trying to install bundler version <code>2.1</code> in a docker image that is built from <code>ruby:2.4.1</code>. My Docker file looks the following way:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>FROM ruby:2.4.1\n\nRUN \\\n  gem update --system --quiet &amp;&amp; \\\n  gem install  bundler -v '~&gt; 2.1'\n\n# Other commands\n</code></pre>\n\n<p>But when I try to run <code>bundle install</code> it fails with </p>\n\n<pre><code>You must use Bundler 2 or greater with this lockfile.\n</code></pre>\n\n<p>When I run inside a container <code>gem info bundler</code> it outputs:</p>\n\n<pre><code>bundler (2.1.2, 1.15.4)\n    Authors: Andr\u00e9 Arko, Samuel Giddins, Colby Swandale, Hiroshi\n    Shibata, David Rodr\u00edguez, Grey Baker, Stephanie Morillo, Chris\n    Morris, James Wen, Tim Moore, Andr\u00e9 Medeiros, Jessica Lynn Suttles,\n    Terence Lee, Carl Lerche, Yehuda Katz\n    Homepage: https://bundler.io\n    License: MIT\n    Installed at (2.1.2): /usr/local/bundle\n                 (1.15.4): /usr/local/lib/ruby/gems/2.4.0\n</code></pre>\n\n<p>I tried the following fixes:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code># Set bundler 2.1.2 as default\nbundler config default 2.1.2\n\n# Update bundler\ngem update bundler\n</code></pre>\n\n<p>But they didn't work. The system continues to use bundler <code>v1.15.4</code></p>\n\n<p>How can I make bundler <code>v2.1.2</code> as default inside a ruby docker image?</p>\n"}, {"tags": ["ruby", "proc"], "answers": [{"tags": [], "owner": {"reputation": 95, "user_id": 1116869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f5e6be7cc2e1e16775ecf1662671749?s=128&d=identicon&r=PG", "display_name": "yogo1212", "link": "https://stackoverflow.com/users/1116869/yogo1212"}, "is_accepted": true, "score": 1, "last_activity_date": 1577104219, "creation_date": 1577104219, "answer_id": 59455419, "question_id": 59455252, "link": "https://stackoverflow.com/questions/59455252/access-key-parameter-in-nested-block/59455419#59455419", "title": "access key parameter in nested block", "body": "<p>The mistake i made was 'not interpreting the error correctly':\n<code>undefined method `read_transform'</code></p>\n\n<p><code>read_transform</code> is defined - just not as a method but as a proc.</p>\n\n<p>Changing the line in question from</p>\n\n<pre><code>read_transform(query(:GET, path).body)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>read_transform.call(query(:GET, path).body)\n</code></pre>\n\n<p>fixes the error and results in the expected behaviour.</p>\n"}], "owner": {"reputation": 95, "user_id": 1116869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f5e6be7cc2e1e16775ecf1662671749?s=128&d=identicon&r=PG", "display_name": "yogo1212", "link": "https://stackoverflow.com/users/1116869/yogo1212"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 59455419, "answer_count": 1, "score": 1, "last_activity_date": 1577109629, "creation_date": 1577103514, "last_edit_date": 1577109629, "question_id": 59455252, "link": "https://stackoverflow.com/questions/59455252/access-key-parameter-in-nested-block", "title": "access key parameter in nested block", "body": "<p>I'm facing difficulties accessing a parameter in a block created from a <code>Proc</code> that... See for yourselves:</p>\n\n<pre><code>#&lt;NoMethodError: undefined method `read_transform' for #&lt;API::Portal:0x0000556037915cc0&gt;&gt;\n[\"api.rb:23:in `block (2 levels) in access'\", ...]\n</code></pre>\n\n<pre><code>module API\n  def self.access(s, delete: false, read_transform: proc(&amp;:itself))\n    proc {\n      path = \"/#{s}\"\n      define_method(s) {\n        read_transform(query(:GET, path).body) # this is line 23\n      }\n\n      define_method(\"#{s}=\") { |v|\n        query(API::_method(v, delete), path).body\n      }\n    }\n  end\nend\n</code></pre>\n\n<p>The block was used to extend a class like this: <code>class_eval &amp;API::access(:name)</code>\nThe call triggering the exception is <code>api.name</code>.</p>\n\n<p><code>s</code> appears to work inside the block to build <code>path</code>. Why isn't <code>read_transform</code> accessible in the inner blocks?\nAm I doing scopes wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bundle"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1577102224, "post_id": 59454830, "comment_id": 105091075, "body": "Check if you can manually (i.e. by <code>mysql</code> connect to your DB server, as it seems to be connectivity problem)."}, {"owner": {"reputation": 23, "user_id": 9214839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cf5d3a020662f54a8f703bea41f2301?s=128&d=identicon&r=PG", "display_name": "Hb_1993", "link": "https://stackoverflow.com/users/9214839/hb-1993"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1577170349, "post_id": 59454830, "comment_id": 105109934, "body": "Yes, issue is solved. In aws there were insufficient permissions for db"}], "owner": {"reputation": 23, "user_id": 9214839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cf5d3a020662f54a8f703bea41f2301?s=128&d=identicon&r=PG", "display_name": "Hb_1993", "link": "https://stackoverflow.com/users/9214839/hb-1993"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 246, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577105015, "creation_date": 1577101656, "last_edit_date": 1577105015, "question_id": 59454830, "link": "https://stackoverflow.com/questions/59454830/rails-console-not-working-bundle-exec-rails-c-on-kubernetes", "title": "rails console not working &#39;bundle exec rails c&#39; on kubernetes", "body": "<p>I am trying to run rails console using <code>bundle exec rails c</code> command. But console is not opening. I have not installed ruby or rails using apt, instead using rvm and gems respectively.\nBut when i <code>ctr + c</code> to terminate command i get some error as below</p>\n\n<blockquote>\n  <p>/mypath/vendor/bundle/ruby/2.6.0/gems/mysql2-0.5.2/lib/mysql2/client.rb:90:in\n  connect: Interrupt</p>\n</blockquote>\n\n<p>I am not able to understand exact error.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "macos", "rubygems", "bundler"], "comments": [{"owner": {"reputation": 558, "user_id": 7820436, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PKC7Uo8Wv2Q/AAAAAAAAAAI/AAAAAAAAG1E/liX1WQbbwZU/photo.jpg?sz=128", "display_name": "Thomas Koppensteiner", "link": "https://stackoverflow.com/users/7820436/thomas-koppensteiner"}, "edited": false, "score": 0, "creation_date": 1577099981, "post_id": 59454101, "comment_id": 105090275, "body": "Which version of <code>bundler</code> do you use?"}, {"owner": {"reputation": 558, "user_id": 7820436, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PKC7Uo8Wv2Q/AAAAAAAAAAI/AAAAAAAAG1E/liX1WQbbwZU/photo.jpg?sz=128", "display_name": "Thomas Koppensteiner", "link": "https://stackoverflow.com/users/7820436/thomas-koppensteiner"}, "edited": false, "score": 0, "creation_date": 1577100019, "post_id": 59454101, "comment_id": 105090286, "body": "Can you please provide the complete error message from <code>bundler</code>"}, {"owner": {"reputation": 558, "user_id": 7820436, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PKC7Uo8Wv2Q/AAAAAAAAAAI/AAAAAAAAG1E/liX1WQbbwZU/photo.jpg?sz=128", "display_name": "Thomas Koppensteiner", "link": "https://stackoverflow.com/users/7820436/thomas-koppensteiner"}, "edited": false, "score": 0, "creation_date": 1577100128, "post_id": 59454101, "comment_id": 105090327, "body": "Does <code>gem install capybara-webkit -v &#39;1.15.1&#39;</code> work or does it also fail?"}, {"owner": {"reputation": 13, "user_id": 10971022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cebbbf63c06c729ea3b3109daa880af4?s=128&d=identicon&r=PG&f=1", "display_name": "Aravind Aytha", "link": "https://stackoverflow.com/users/10971022/aravind-aytha"}, "reply_to_user": {"reputation": 558, "user_id": 7820436, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PKC7Uo8Wv2Q/AAAAAAAAAAI/AAAAAAAAG1E/liX1WQbbwZU/photo.jpg?sz=128", "display_name": "Thomas Koppensteiner", "link": "https://stackoverflow.com/users/7820436/thomas-koppensteiner"}, "edited": false, "score": 1, "creation_date": 1577100204, "post_id": 59454101, "comment_id": 105090354, "body": "<code>gem list bundler  *** LOCAL GEMS ***  bundler (default: 1.17.3) bundler-unload (1.0.2) rubygems-bundler (1.4.5)</code>  .... <code>bundler --version Bundler version 1.17.2</code>"}, {"owner": {"reputation": 558, "user_id": 7820436, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PKC7Uo8Wv2Q/AAAAAAAAAAI/AAAAAAAAG1E/liX1WQbbwZU/photo.jpg?sz=128", "display_name": "Thomas Koppensteiner", "link": "https://stackoverflow.com/users/7820436/thomas-koppensteiner"}, "edited": false, "score": 0, "creation_date": 1577100225, "post_id": 59454101, "comment_id": 105090360, "body": "Did you add <code>qt</code> to our <code>PATH</code> as suggested?"}, {"owner": {"reputation": 13, "user_id": 10971022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cebbbf63c06c729ea3b3109daa880af4?s=128&d=identicon&r=PG&f=1", "display_name": "Aravind Aytha", "link": "https://stackoverflow.com/users/10971022/aravind-aytha"}, "reply_to_user": {"reputation": 558, "user_id": 7820436, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PKC7Uo8Wv2Q/AAAAAAAAAAI/AAAAAAAAG1E/liX1WQbbwZU/photo.jpg?sz=128", "display_name": "Thomas Koppensteiner", "link": "https://stackoverflow.com/users/7820436/thomas-koppensteiner"}, "edited": false, "score": 1, "creation_date": 1577100978, "post_id": 59454101, "comment_id": 105090637, "body": "@ThomasKoppensteiner Yes I have Added Qt path in shell files(bashrc and zshrc files) as well as mentioned in the previous discussions    <code>export PATH=&quot;$(brew --prefix qt@5.5)&#47;bin:$PATH&quot;</code>"}, {"owner": {"reputation": 558, "user_id": 7820436, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PKC7Uo8Wv2Q/AAAAAAAAAAI/AAAAAAAAG1E/liX1WQbbwZU/photo.jpg?sz=128", "display_name": "Thomas Koppensteiner", "link": "https://stackoverflow.com/users/7820436/thomas-koppensteiner"}, "edited": false, "score": 0, "creation_date": 1577104354, "post_id": 59454101, "comment_id": 105091973, "body": "The error log states, that  <code>xcode</code> is not installed properly. Please have a look at: <a href=\"https://stackoverflow.com/questions/9329243/how-to-install-xcode-command-line-tools\" title=\"how to install xcode command line tools\">stackoverflow.com/questions/9329243/&hellip;</a>"}, {"owner": {"reputation": 13, "user_id": 10971022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cebbbf63c06c729ea3b3109daa880af4?s=128&d=identicon&r=PG&f=1", "display_name": "Aravind Aytha", "link": "https://stackoverflow.com/users/10971022/aravind-aytha"}, "reply_to_user": {"reputation": 558, "user_id": 7820436, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PKC7Uo8Wv2Q/AAAAAAAAAAI/AAAAAAAAG1E/liX1WQbbwZU/photo.jpg?sz=128", "display_name": "Thomas Koppensteiner", "link": "https://stackoverflow.com/users/7820436/thomas-koppensteiner"}, "edited": false, "score": 0, "creation_date": 1577106154, "post_id": 59454101, "comment_id": 105092754, "body": "Do we definitely need to install XCode, as in the official downloads, I have not installed it, as it showing as 7GB  I have installed Qt and gcc compiler"}], "owner": {"reputation": 13, "user_id": 10971022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cebbbf63c06c729ea3b3109daa880af4?s=128&d=identicon&r=PG&f=1", "display_name": "Aravind Aytha", "link": "https://stackoverflow.com/users/10971022/aravind-aytha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 395, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577100715, "creation_date": 1577098512, "last_edit_date": 1577100715, "question_id": 59454101, "link": "https://stackoverflow.com/questions/59454101/how-to-resolve-capybara-webkit-gem-installation-error-in-mac", "title": "How to resolve capybara-webkit gem installation error in mac", "body": "<p><strong>An error occurred while installing <code>capybara-webkit (1.15.1)</code>, and Bundler\ncannot continue</strong></p>\n\n<p>In my Ruby on Rails Project, trying to do bundle install, which is failing due to this <code>capybara-webkit gem</code></p>\n\n<pre><code>My Complete Version Details:\n\nMac version                  macOS Catalina Version 10.15.1\nrvm -v                       rvm 1.29.9\nruby -v                      2.1.4p265\nRequired capybara-webkit     1.15.1\nRequired rails version       4.1.4\nQt Version                   5.5.1\nbundler --version            1.17.2\n\nqmake -v \nQMake version 3.0 Using Qt version 5.5.1 in /usr/local/Cellar/qt@5.5/5.5.1_1/lib\n\ngcc --version \nConfigured with: --prefix=/Library/Developer/CommandLineTools/usr --with-gxx-include-dir=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/4.2.1 Apple clang version 11.0.0 (clang-1100.0.33.16) Target: x86_64-apple-darwin19.0.0 Thread model: posix InstalledDir: /Library/Developer/CommandLineTools/usr/bin\n\ng++ --version \nConfigured with: --prefix=/Library/Developer/CommandLineTools/usr --with-gxx-include-dir=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/4.2.1 Apple clang version 11.0.0 (clang-1100.0.33.16) Target: x86_64-apple-darwin19.0.0 Thread model: posix InstalledDir: /Library/Developer/CommandLineTools/usr/bin\n\n</code></pre>\n\n<p>Here are few links that I followed</p>\n\n<p>1) <a href=\"https://stackoverflow.com/questions/52661109/mac-os-10-14-mojave-qt5-5-gem-capybara-webkit\">Mac OS 10.14 Mojave + qt5.5 + gem capybara-webkit</a></p>\n\n<p>2) <a href=\"https://github.com/thoughtbot/capybara-webkit/wiki/Installing-Qt-and-compiling-capybara-webkit#macOS-catalina-1015\" rel=\"nofollow noreferrer\">https://github.com/thoughtbot/capybara-webkit/wiki/Installing-Qt-and-compiling-capybara-webkit#macOS-catalina-1015</a></p>\n\n<p>3) <a href=\"https://wilsonmar.github.io/xcode/\" rel=\"nofollow noreferrer\">https://wilsonmar.github.io/xcode/</a></p>\n\n<p>Here is the attached image\n<a href=\"https://i.stack.imgur.com/JNu1O.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JNu1O.jpg\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/czS6s.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/czS6s.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby", "macos", "rubygems"], "comments": [{"owner": {"reputation": 558, "user_id": 7820436, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PKC7Uo8Wv2Q/AAAAAAAAAAI/AAAAAAAAG1E/liX1WQbbwZU/photo.jpg?sz=128", "display_name": "Thomas Koppensteiner", "link": "https://stackoverflow.com/users/7820436/thomas-koppensteiner"}, "edited": false, "score": 0, "creation_date": 1577099828, "post_id": 59452719, "comment_id": 105090212, "body": "&quot;I have read to not use rvm and rbenv and only brew version&quot; Why? Can you provide a link? <code>rbenv</code> usually works fine for me."}, {"owner": {"reputation": 995, "user_id": 1285959, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/vWIwN.jpg?s=128&g=1", "display_name": "Pawe\u0142 Madej", "link": "https://stackoverflow.com/users/1285959/pawe%c5%82-madej"}, "reply_to_user": {"reputation": 558, "user_id": 7820436, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PKC7Uo8Wv2Q/AAAAAAAAAAI/AAAAAAAAG1E/liX1WQbbwZU/photo.jpg?sz=128", "display_name": "Thomas Koppensteiner", "link": "https://stackoverflow.com/users/7820436/thomas-koppensteiner"}, "edited": false, "score": 0, "creation_date": 1577112834, "post_id": 59452719, "comment_id": 105095717, "body": "I had issues with using rbenv and rvm on unpriviledged user. Gems unaccessible or unable to install them because of lack of write permissions."}, {"owner": {"reputation": 2927, "user_id": 379556, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b40b9119576eac427c3624e174ea0ec4?s=128&d=identicon&r=PG", "display_name": "Rui Marques", "link": "https://stackoverflow.com/users/379556/rui-marques"}, "edited": false, "score": 0, "creation_date": 1577982490, "post_id": 59452719, "comment_id": 105301240, "body": "My recommendation for OSX, and my experience, is that <a href=\"https://rvm.io/\" rel=\"nofollow noreferrer\">RVM</a> will give us the better experience by far. You won&#39;t have any gems install issues as it all happens on your <code>$HOME</code> context. For example: <i>/Users/&lt;user&gt;/.rvm/gems/ruby-2.5.3/gems/statsd-ruby-1.4.0/li&zwnj;&#8203;b/statsd-ruby.rb</i> location is perfectly safe and it works trouble free."}, {"owner": {"reputation": 995, "user_id": 1285959, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/vWIwN.jpg?s=128&g=1", "display_name": "Pawe\u0142 Madej", "link": "https://stackoverflow.com/users/1285959/pawe%c5%82-madej"}, "reply_to_user": {"reputation": 2927, "user_id": 379556, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b40b9119576eac427c3624e174ea0ec4?s=128&d=identicon&r=PG", "display_name": "Rui Marques", "link": "https://stackoverflow.com/users/379556/rui-marques"}, "edited": false, "score": 0, "creation_date": 1578052514, "post_id": 59452719, "comment_id": 105322583, "body": "so I will need $HOME duplicates for my user and for Jenkins user? @RuiMarques"}, {"owner": {"reputation": 2927, "user_id": 379556, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b40b9119576eac427c3624e174ea0ec4?s=128&d=identicon&r=PG", "display_name": "Rui Marques", "link": "https://stackoverflow.com/users/379556/rui-marques"}, "edited": false, "score": 0, "creation_date": 1578065602, "post_id": 59452719, "comment_id": 105328620, "body": "@Pawe\u0142Madej you can install global gems or user level gems but I recommend to use simply RVM or rbenv, I favour the fist. Installing RVM is so easy to use.  See <a href=\"https://stackoverflow.com/questions/2119064/sudo-gem-install-or-gem-install-and-gem-locations\" title=\"sudo gem install or gem install and gem locations\">stackoverflow.com/questions/2119064/&hellip;</a>. I&#39;m not agains using <code>sudo</code> but is something I would avoid.  If you need the Jenkins user on your OSX I would reconsider the way you&#39;re trying to use Jenkins and run it via Docker instead. I need to better understand what you&#39;re trying todo."}, {"owner": {"reputation": 995, "user_id": 1285959, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/vWIwN.jpg?s=128&g=1", "display_name": "Pawe\u0142 Madej", "link": "https://stackoverflow.com/users/1285959/pawe%c5%82-madej"}, "edited": false, "score": 0, "creation_date": 1578092332, "post_id": 59452719, "comment_id": 105339020, "body": "I use Jenkins as my local CI for testing iOS apps I develop, so I need macOS specific packages like xcodebuild etc so I installed Jenkins on bare macOS and it created for itself Jenkins user. I will try to use RVM on this user and write if it works"}], "owner": {"reputation": 995, "user_id": 1285959, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/vWIwN.jpg?s=128&g=1", "display_name": "Pawe\u0142 Madej", "link": "https://stackoverflow.com/users/1285959/pawe%c5%82-madej"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 206, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577092535, "creation_date": 1577092535, "question_id": 59452719, "link": "https://stackoverflow.com/questions/59452719/unable-to-run-gems-using-custom-ruby-version-on-macos-mojave", "title": "unable to run gems using custom Ruby version on macOS Mojave", "body": "<p>I get error when trying to run any gem installed using ruby from <code>brew install ruby</code></p>\n\n<p>Here is slather example but this is same for any gem I tried (Jekyll, CocoaPods, Nokogiri etc.)</p>\n\n<pre><code>/Library/Ruby/Site/2.3.0/rubygems.rb:275:in `find_spec_for_exe': can't find gem slather (&gt;= 0.a) with executable slather (Gem::GemNotFoundException)\n    from /Library/Ruby/Site/2.3.0/rubygems.rb:252:in `bin_path'\n    from /usr/local/bin/slather:22:in `&lt;main&gt;'\n</code></pre>\n\n<p>gem is installed properly but for unknown reason ruby tries to use paths for system version.</p>\n\n<p>I have read to not use <code>rvm</code> and <code>rbenv</code> and only brew version but this also do not work as above</p>\n\n<p>ruby -v: <code>ruby 2.6.5p114 (2019-10-01 revision 67812) [x86_64-darwin18]</code>\ngem env: </p>\n\n<pre><code>RubyGems Environment:\n  - RUBYGEMS VERSION: 3.1.2\n  - RUBY VERSION: 2.6.5 (2019-10-01 patchlevel 114) [x86_64-darwin18]\n  - INSTALLATION DIRECTORY: /usr/local/lib/ruby/gems/2.6.0\n  - USER INSTALLATION DIRECTORY: /Users/[user]/.gem/ruby/2.6.0\n  - RUBY EXECUTABLE: /usr/local/opt/ruby/bin/ruby\n  - GIT EXECUTABLE: /usr/bin/git\n  - EXECUTABLE DIRECTORY: /usr/local/lib/ruby/gems/2.6.0/bin\n  - SPEC CACHE DIRECTORY: /Users/[user]/.gem/specs\n  - SYSTEM CONFIGURATION DIRECTORY: /usr/local/Cellar/ruby/2.6.5/etc\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - x86_64-darwin-18\n  - GEM PATHS:\n     - /usr/local/lib/ruby/gems/2.6.0\n     - /Users/[user]/.gem/ruby/2.6.0\n     - /usr/local/Cellar/ruby/2.6.5/lib/ruby/gems/2.6.0\n  - GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n  - REMOTE SOURCES:\n     - https://rubygems.org/\n  - SHELL PATH:\n     - /usr/local/opt/ruby/bin\n     - /Users/[user]/.fastlane/bin\n     - /Users/[user]/.fastlane/bin\n     - /usr/local/bin\n     - /usr/bin\n     - /bin\n     - /usr/sbin\n     - /sbin\n     - /opt/X11/bin\n</code></pre>\n\n<p>any help appreciated</p>\n"}, {"tags": ["ruby", "aws-lambda", "amazon-kinesis"], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 12488822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf7941f96815ec669fa47e01d57568a6?s=128&d=identicon&r=PG&f=1", "display_name": "sabmeua", "link": "https://stackoverflow.com/users/12488822/sabmeua"}, "is_accepted": true, "score": 0, "last_activity_date": 1577436530, "creation_date": 1577436530, "answer_id": 59498175, "question_id": 59450296, "link": "https://stackoverflow.com/questions/59450296/why-isnt-the-kinesis-record-processing-delay-shown-in-the-getrecords-iteratora/59498175#59498175", "title": "Why isn&#39;t the Kinesis record processing delay shown in the &quot;GetRecords.IteratorAgeMilliseconds&quot; metric when using Lambda handler", "body": "<p>This question was self resolved.</p>\n\n<p><a href=\"https://youtu.be/xmacMfbrG28\" rel=\"nofollow noreferrer\">https://youtu.be/xmacMfbrG28</a></p>\n\n<p>This video provided a detailed explanation of the internal structure of stream source processiung ofLambda.</p>\n\n<p>\"Poller\" subscribes to shards and fetch the records from shard iterator by GetRecords, then \"Poller\" invokes frontend function and pass its records.\nSo there was no delay in GetRecords even if Lambda function is delayed.</p>\n"}], "owner": {"reputation": 43, "user_id": 12488822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf7941f96815ec669fa47e01d57568a6?s=128&d=identicon&r=PG&f=1", "display_name": "sabmeua", "link": "https://stackoverflow.com/users/12488822/sabmeua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "accepted_answer_id": 59498175, "answer_count": 1, "score": 1, "last_activity_date": 1577436530, "creation_date": 1577076736, "question_id": 59450296, "link": "https://stackoverflow.com/questions/59450296/why-isnt-the-kinesis-record-processing-delay-shown-in-the-getrecords-iteratora", "title": "Why isn&#39;t the Kinesis record processing delay shown in the &quot;GetRecords.IteratorAgeMilliseconds&quot; metric when using Lambda handler", "body": "<p>I am experimentiing with Kinesis and Lambda.</p>\n\n<p>I can't see the delay in \"GetRecords.IteratorAge\" metric of Kinesis even though it is obviously delaying.</p>\n\n<p>The environment of experiment is following.</p>\n\n<ul>\n<li>Kinesis data streams : 1 stream consisting of 1 shard without enhanced fanout.</li>\n<li>Producer : It runs the following <code>producer.rb</code> at local PC. It puts a record each second.</li>\n<li>Consumer : The following <code>lambda_handler.rb</code> executes in Lambda. It simply put the records with timestamp to DynamoDB table, and sleep 3 seconds at each record.</li>\n<li>Trigger setting:\n\n<ul>\n<li>Batch size: 50</li>\n<li>Batch window: None</li>\n<li>Concurrent batches per shard: 1</li>\n<li>Last processing result: No records processed</li>\n<li>Maximum age of record: 604800</li>\n<li>Retry attempts: 10000</li>\n<li>Split batch on error: No</li>\n</ul></li>\n</ul>\n\n<p><strong>producer.rb</strong></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'aws-sdk'\n\nkinesis = Aws::Kinesis::Client.new(region: 'ap-northeast-1')\n\nCOUNT = 300\nSTREAM_NAME = 'test_stream'\nPKEY = 'client-001'\n\nCOUNT.times do |i|\n  kinesis.put_record(\n    stream_name: STREAM_NAME,\n    data: (i+1).to_s,\n    partition_key: PKEY\n  )\n  sleep 1\nend\n</code></pre>\n\n<p><strong>lambda_handler.rb</strong></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'json'\nrequire 'aws-sdk'\nrequire 'base64'\n\ndef lambda_handler(event:, context:)\n  dynamoDB = Aws::DynamoDB::Resource.new(region: 'ap-northeast-1')\n  table = dynamoDB.table(ENV['DYNAMODB_TABLE'])\n  item = {\n    'aws_request_id' =&gt; context.aws_request_id,\n    'start' =&gt; Time.now.to_s\n  }\n  event['Records'].each do { sleep 3 }\n  item['end'] = Time.now.to_s\n  table.put_item({item: item})\n  { statusCode: 200 }\nend\n</code></pre>\n\n<p>The result was look like this in DynamoDB and the metrics in Cloudwatch was look like this:</p>\n\n<p>It processed records between 04:09:03 and 04:24:04.\nWhy \"GetRecords.IteratorAge\" doesn't increase even if the record processing doesn't progress?</p>\n\n<p><a href=\"https://i.stack.imgur.com/mThBl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mThBl.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/S1KhL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/S1KhL.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby", "oop", "instance-variables"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1577053048, "post_id": 59448348, "comment_id": 105079488, "body": "Shouldn&#39;t <code>player1</code> and <code>player2</code> be in <code>Main</code>? A player is a <code>Player</code> but shouldn&#39;t contain the two players."}, {"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 1, "creation_date": 1577057282, "post_id": 59448348, "comment_id": 105080204, "body": "If a <code>Player</code> object has 2 player attributes, then those players have each 2 players, too, and those another 2. In other words you need an infinite number of players to create a single player. You should re think your structure a bit. What you probably want is a <code>Game</code> object/class that has 2 players. The <code>Main</code> class name is too generic imo"}, {"owner": {"reputation": 25, "user_id": 12127899, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1IOq7U77Q0Q/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcUmWPorTVjMY_EYD7tpjjCc4Pnkg/photo.jpg?sz=128", "display_name": "nimpa", "link": "https://stackoverflow.com/users/12127899/nimpa"}, "edited": false, "score": 0, "creation_date": 1577063333, "post_id": 59448348, "comment_id": 105081164, "body": "I am sorry but I don&#39;t understand why my class <code>Player</code> shouldn&#39;t contain the two players. What would I put in the player class then?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1577065271, "post_id": 59448348, "comment_id": 105081434, "body": "The <code>Player</code> class should hold attributes of a single player only - in this case, just <code>name</code>. You can track the list of players (<code>@player1</code>, <code>@player2</code>, etc) from the <code>Main</code> class"}, {"owner": {"reputation": 25, "user_id": 12127899, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1IOq7U77Q0Q/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcUmWPorTVjMY_EYD7tpjjCc4Pnkg/photo.jpg?sz=128", "display_name": "nimpa", "link": "https://stackoverflow.com/users/12127899/nimpa"}, "edited": false, "score": 0, "creation_date": 1577066160, "post_id": 59448348, "comment_id": 105081542, "body": "okay I understand that now. Thanks for clearing that up. I made changes to the code  to make it work now. i&#39;ll edit above. But i do have another question, instead of putting the variable <code>name1</code> and <code>name2</code> in my <code>greetings</code> in <code>Game</code> would there have been a way for me to put that variable in my method <code>start</code> without throwing an <code>undefined local variable or method method for name1</code> error?"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1577087233, "post_id": 59448348, "comment_id": 105085548, "body": "@nimpa : Your problem is not related to instance variable access, but to the existence of methods, since <code>name</code> is a method, not a variable. To answer your question: The error message means that either <code>player1</code> or <code>player2</code> is <b>not</b> of class <code>Player</code> and hence does not have a method called <code>name</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1043, "user_id": 5659594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c90ec27dffb2d716ee0c796cd73078c?s=128&d=identicon&r=PG&f=1", "display_name": "Fernand", "link": "https://stackoverflow.com/users/5659594/fernand"}, "is_accepted": false, "score": 0, "last_activity_date": 1577074500, "creation_date": 1577074500, "answer_id": 59450104, "question_id": 59448348, "link": "https://stackoverflow.com/questions/59448348/how-to-access-instance-variables-from-one-class-to-another/59450104#59450104", "title": "How to access instance variables from one class to another", "body": "<p>you can do something like this.</p>\n\n<pre><code>def greeting\n  ...\n  return name1, name2\nend\n\ndef start\n    game = Game.new\n    name1,name2=game.greeting\n    game.instruct\nend\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 12127899, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1IOq7U77Q0Q/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcUmWPorTVjMY_EYD7tpjjCc4Pnkg/photo.jpg?sz=128", "display_name": "nimpa", "link": "https://stackoverflow.com/users/12127899/nimpa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577074500, "creation_date": 1577052216, "last_edit_date": 1577066223, "question_id": 59448348, "link": "https://stackoverflow.com/questions/59448348/how-to-access-instance-variables-from-one-class-to-another", "title": "How to access instance variables from one class to another", "body": "<p>I am in the process of creating a simple Rock, Paper, Scissor OOP game in ruby to gain a better understanding of how everything works for Ruby OOP. But I am running into a problem.</p>\n\n<p>I want to access an instance variable from another class but I am receiving this error when running the program </p>\n\n<pre><code>Traceback (most recent call last):\n    2: from rps.rb:44:in `&lt;main&gt;'\n    1: from rps.rb:40:in `start'\nrps.rb:17:in `greeting': undefined method `name' for nil:NilClass (NoMethodError)\n</code></pre>\n\n<p>Line 17 is </p>\n\n<pre><code>puts \"Welcome #{@player1.name} and #{@player2.name}\"\n</code></pre>\n\n<p>This is my all of my code thus far</p>\n\n<pre><code>class Player\n  attr_accessor :name, :player1, :player2,\n\n  def initialize(name)\n    @name = name\n    @player1 = Player.new(name1)\n    @player2 = Player.new(name2)\n  end\nend\n\nclass Main\n\n  def greeting\n    puts \"Welcome to Rock-Paper-Scissor\"\n    sleep(0.5)\n    puts \"Welcome #{@player1.name} and #{@player2.name}\"\n\n  end \n\n  def instruct\n    puts \"The rules of the game are simple\\n\"\n    puts \"Choose Rock, Paper or Scissor each turn\\n \"\n    puts \"Paper beats Rock, Scissor beats paper and Rock beats Scissor\\n\"\n    puts \"Ready....?\"\n  end\n\nend\n\ndef start\n  puts \"Hi, please enter your name player 1: \"\n  name1 = gets.chomp\n  puts \"Hi, please enter your name player 2: \"\n  name2 = gets.chomp\n\n  game = Main.new\n  game.greeting\n  game.instruct\nend\n\nstart\n</code></pre>\n\n<p>*****New changes made to code for it to run properly*******</p>\n\n<pre><code>class Player\n    attr_accessor :name\n\n    def initialize(name)\n        @name = name\n    end\n\nend\n\nclass Game\n    def greeting\n        puts \"Hi, please enter your name player 1: \"\n        name1 = gets.chomp\n        @player1 = Player.new(name1)\n        puts \"Hi, please enter your name player 2: \"\n        name2 = gets.chomp\n        @player2 = Player.new(name2)\n        puts \"Welcome to Rock-Paper-Scissor\"\n        sleep(0.5)\n        puts \"Welcome #{@player1.name} and #{@player2.name}\"\n\n    end \n\n    def instruct\n        puts \"The rules of the game are simple\\n\"\n        puts \"Choose Rock, Paper or Scissor each turn\\n \"\n        puts \"Paper beats Rock, Scissor beats paper and Rock beats Scissor\\n\"\n        puts \"Ready....?\"\n    end\n\n\nend\n\ndef start\n    game = Game.new\n    game.greeting\n    game.instruct\n\nend \nstart\n</code></pre>\n"}, {"tags": ["ruby", "string"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1577050461, "post_id": 59448086, "comment_id": 105078946, "body": "It&#39;s probably a lot easier to use a gem or the standard lib for HTTP requests. See <a href=\"https://jhawthorn.github.io/curl-to-ruby/\" rel=\"nofollow noreferrer\">jhawthorn.github.io/curl-to-ruby</a> - it&#39;s a converter from CURL to ruby code. There are also many gems for this such as <a href=\"https://github.com/rest-client/rest-client\" rel=\"nofollow noreferrer\">rest-client</a> and <a href=\"https://github.com/taf2/curb\" rel=\"nofollow noreferrer\">curb</a>"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1577087802, "post_id": 59448086, "comment_id": 105085697, "body": "@ShanthaDodmane : If you run an external command using backquotes, the result will <b>always</b> be of type <code>String</code>, and hold the standard output of the command. If you want to access parts of this string, you have to parse it."}], "answers": [{"tags": [], "owner": {"reputation": 8462, "user_id": 405865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e29f04f339715955060858e0e65e1311?s=128&d=identicon&r=PG", "display_name": "fphilipe", "link": "https://stackoverflow.com/users/405865/fphilipe"}, "is_accepted": true, "score": 1, "last_activity_date": 1577094949, "last_edit_date": 1577094949, "creation_date": 1577051368, "answer_id": 59448280, "question_id": 59448086, "link": "https://stackoverflow.com/questions/59448086/how-to-get-the-data-from-line-number-n-to-last-line-from-a-multi-line-string-in/59448280#59448280", "title": "How to get the data from line number n to last line from a multi-line string in ruby?", "body": "<p>There's better ways to do HTTP requests in Ruby, e.g. using the standard library's <a href=\"https://ruby-doc.org/stdlib-2.6.5/libdoc/net/http/rdoc/Net/HTTP.html\" rel=\"nofollow noreferrer\"><code>Net::HTTP</code></a>.</p>\n\n<p>Having said that, I'll answer your question.</p>\n\n<p>The HTTP standard <a href=\"https://tools.ietf.org/html/rfc7230#section-3\" rel=\"nofollow noreferrer\">specifies</a> that the header and the body are separated by an empty line containing just a CRLF (<code>\\r\\n</code>). Each line of the header also ends with a CRLF. Thus, we can simply split the response at the first occurrence of two CRLF, i.e. at the string <code>\"\\r\\n\\r\\n\"</code>.</p>\n\n<p>Since this sequence might also appear in the body, we need to specify that we want our split to have at most 2 elements.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>header, body = response.split(\"\\r\\n\\r\\n\", 2)\n</code></pre>\n\n<p>Note though that with this the last header line will not end in <code>\"\\r\\n\"</code>, but that shouldn't be a problem. The technically more correct version would be to split at <code>\"\\r\\n\"</code> followed by a <code>\"\\r\\n\"</code>. That way we don't strip the trailing <code>\"\\r\\n\"</code> when splitting. This can be done with a regular expression using a look-behind:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>header, body = response.split(/(?&lt;=\\r\\n)\\r\\n/, 2)\n</code></pre>\n\n<hr>\n\n<p>The answer to your question in the title is a bit different though:</p>\n\n<blockquote>\n  <p>How to get the data from line number n to last line from a multi-line string in ruby?</p>\n</blockquote>\n\n<pre class=\"lang-rb prettyprint-override\"><code>response.lines[n..].join\n</code></pre>\n\n<p>(Before Ruby 2.6 the range needs to be specified as <code>n..-1</code>.)</p>\n"}], "owner": {"reputation": 171, "user_id": 3890904, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/8U3EL.png?s=128&g=1", "display_name": "owgitt", "link": "https://stackoverflow.com/users/3890904/owgitt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 59448280, "answer_count": 1, "score": 1, "last_activity_date": 1577094949, "creation_date": 1577049360, "question_id": 59448086, "link": "https://stackoverflow.com/questions/59448086/how-to-get-the-data-from-line-number-n-to-last-line-from-a-multi-line-string-in", "title": "How to get the data from line number n to last line from a multi-line string in ruby?", "body": "<p>I am executing the following curl request in ruby:</p>\n\n<pre><code>cmd=\"curl --silent --insecure -i -X GET -u \\\"local\\username:password\\\" \\\"https://example.com/Console/Changes\\\"\"\nresponse = `cmd`\n</code></pre>\n\n<p>It is resulting in the following output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/C4SIv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/C4SIv.png\" alt=\"enter image description here\"></a></p>\n\n<p>From the above output it seems to be the response variable contains a multi-line string value. Just to confirm, I am trying to print the type of 'response' variable here:</p>\n\n<p><code>puts response.class</code></p>\n\n<p>Output here is:</p>\n\n<blockquote>\n  <p>String</p>\n</blockquote>\n\n<p>How to extract header info and the json body separately from the above response?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-2.0", "ruby-2.1"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1577048180, "post_id": 59445783, "comment_id": 105078544, "body": "Why Ruby 2.0? That&#39;s woefully obsolete and risky to use. You should be on 2.5 or 2.6. There&#39;s some issues with &gt;2.4 if you&#39;re using a really old code-base, but for anything new it should be fine."}, {"owner": {"reputation": 15, "user_id": 12564187, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yrWM2Hhe1xM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re3_2aojOlbxJfrEjBs3qfTRmtmjA/photo.jpg?sz=128", "display_name": "Sharon Kriegman", "link": "https://stackoverflow.com/users/12564187/sharon-kriegman"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1577110519, "post_id": 59445783, "comment_id": 105094695, "body": "Defiantly Ruby 2 is not the best option, yet to update the system @tadman"}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1577048210, "post_id": 59446301, "comment_id": 105078551, "body": "<code>where</code> is the way to go."}, {"owner": {"reputation": 15, "user_id": 12564187, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yrWM2Hhe1xM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re3_2aojOlbxJfrEjBs3qfTRmtmjA/photo.jpg?sz=128", "display_name": "Sharon Kriegman", "link": "https://stackoverflow.com/users/12564187/sharon-kriegman"}, "edited": false, "score": 0, "creation_date": 1577110447, "post_id": 59446301, "comment_id": 105094664, "body": "Thank you @max-pleaner Any idea why this would occur (although not working with Ruby 4, and in Ruby 2 should not be deprecated)?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1577110836, "post_id": 59446301, "comment_id": 105094847, "body": "<code>TaskRun.select(:x_id).uniq.where(y_id: @y.Y_ID).map(&amp;:x_id)</code> while this line may work; if there are a significant number of x_ids then you can run into query length issues not to mention performance issues. One would be better off with <code>x_ids = TaskRun.select(:x_id).where(y_id: @y.Y_ID).distinct</code> this will return an ActiveRecord::Relation and when used later <code>S.where(x_id: x_ids)</code> will result in a subquery rather than a very large IN statement"}, {"owner": {"reputation": 15, "user_id": 12564187, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yrWM2Hhe1xM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re3_2aojOlbxJfrEjBs3qfTRmtmjA/photo.jpg?sz=128", "display_name": "Sharon Kriegman", "link": "https://stackoverflow.com/users/12564187/sharon-kriegman"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1577138440, "post_id": 59446301, "comment_id": 105104382, "body": "Thank you much! @engineersmnky"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1577142113, "post_id": 59446301, "comment_id": 105105223, "body": "I didn&#39;t realize that either @engineersmnky interesting info, thanks"}, {"owner": {"reputation": 15, "user_id": 12564187, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yrWM2Hhe1xM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re3_2aojOlbxJfrEjBs3qfTRmtmjA/photo.jpg?sz=128", "display_name": "Sharon Kriegman", "link": "https://stackoverflow.com/users/12564187/sharon-kriegman"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1577178948, "post_id": 59446301, "comment_id": 105112572, "body": "maxpleaner @engineersmnky Does any of you have an idea why this &#39;find_all_by_X_ID&#39; would not be found? although working in Ruby 2 where it should be recognized"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 15, "user_id": 12564187, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yrWM2Hhe1xM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re3_2aojOlbxJfrEjBs3qfTRmtmjA/photo.jpg?sz=128", "display_name": "Sharon Kriegman", "link": "https://stackoverflow.com/users/12564187/sharon-kriegman"}, "edited": false, "score": 0, "creation_date": 1577209260, "post_id": 59446301, "comment_id": 105122367, "body": "@SharonCohen it has nothing to do with your ruby version, it&#39;s the rails version that matters rails 4 deprecated <code>find_all_by_...</code> and rails 5 removed them entirely so if you are using rails 5 that method will not exist and should be replaced by <code>where</code> <a href=\"https://guides.rubyonrails.org/4_0_release_notes.html#active-record-deprecations\" rel=\"nofollow noreferrer\">Rails 4 depreciations</a>"}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 3, "last_activity_date": 1577034754, "last_edit_date": 1577034754, "creation_date": 1577034262, "answer_id": 59446301, "question_id": 59445783, "link": "https://stackoverflow.com/questions/59445783/undefined-method-find-all-by-x/59446301#59446301", "title": "undefined method `find_all_by_X&#39;", "body": "<p>It seems that <code>find_all_by</code> was deprecated in Rails 4 ...</p>\n\n<p>Internally Rails implemented methods like <code>find_all_by_x_id</code> using <a href=\"https://apidock.com/ruby/BasicObject/method_missing\" rel=\"nofollow noreferrer\">method_missing</a> (the method is actually defined dynamically through metaprogramming) ... but you don't have to worry about that for your use-case.</p>\n\n<p>In terms of your code, if we extract the x_ids list into a variable:</p>\n\n<pre><code>x_ids = TaskRun.select(:x_id).uniq.where(y_id: @y.Y_ID).map(&amp;:x_id)\n</code></pre>\n\n<p>Then you have this line that you need to rewrite:</p>\n\n<pre><code>S.find_all_by_X_ID(x_ids)\n</code></pre>\n\n<p>You can rewrite this as:</p>\n\n<pre><code>S.where(x_id: x_ids)\n</code></pre>\n\n<p>See <a href=\"https://stackoverflow.com/a/23921890/2981429\">https://stackoverflow.com/a/23921890/2981429</a></p>\n"}], "owner": {"reputation": 15, "user_id": 12564187, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yrWM2Hhe1xM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re3_2aojOlbxJfrEjBs3qfTRmtmjA/photo.jpg?sz=128", "display_name": "Sharon Kriegman", "link": "https://stackoverflow.com/users/12564187/sharon-kriegman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 59446301, "answer_count": 1, "score": 1, "last_activity_date": 1577034754, "creation_date": 1577030333, "last_edit_date": 1577032375, "question_id": 59445783, "link": "https://stackoverflow.com/questions/59445783/undefined-method-find-all-by-x", "title": "undefined method `find_all_by_X&#39;", "body": "<p>Currently maintaining some old Ruby server and got the following error in Log:</p>\n\n<pre><code>NoMethodError (undefined method `find_all_by_X_ID' for #&lt;Class:0x00000005555555&gt;):\n  app/controllers/some_controller.rb:10:in `buggy_function'\n</code></pre>\n\n<p>When viewed the faulty line in code of the buggy function is looks like this:</p>\n\n<pre><code>Hash[S.find_all_by_X_ID(TaskRun.select(:x_id).uniq.where(y_id: @y.Y_ID).map(&amp;:x_id)).map { |s| [s.S_IDENTIFIER, s.X_ID] }]\n</code></pre>\n\n<p>To be frank, I'm new to Ruby, and wondering how implementing this <code>find_all_by_X</code> query would be the best, and why it appears as it should be automatic (as it has to do with the model component).</p>\n\n<p>We're working on Ruby version 2.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "github", "rubygems", "bundler"], "comments": [{"owner": {"reputation": 973, "user_id": 10473393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89a640df85b84e87172df633f941f921?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Santos", "link": "https://stackoverflow.com/users/10473393/alexander-santos"}, "edited": false, "score": 0, "creation_date": 1577025277, "post_id": 59445120, "comment_id": 105072913, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/2577346/how-to-install-gem-from-github-source\">How to install gem from GitHub source?</a> or <a href=\"https://stackoverflow.com/questions/6119946/how-to-get-a-specific-commit-of-a-gem-from-github\">this</a>"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1577025412, "post_id": 59445120, "comment_id": 105072946, "body": "why do you need that particular commit if it was merged into master branch as seen in (the pull request)(<a href=\"https://github.com/rebelidealist/stripe-ruby-mock/pull/623\" rel=\"nofollow noreferrer\">github.com/rebelidealist/stripe-ruby-mock/pull/623</a>) ?"}, {"owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "reply_to_user": {"reputation": 973, "user_id": 10473393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89a640df85b84e87172df633f941f921?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Santos", "link": "https://stackoverflow.com/users/10473393/alexander-santos"}, "edited": false, "score": 0, "creation_date": 1577025499, "post_id": 59445120, "comment_id": 105072966, "body": "@AlexanderSantos I&#39;m not really sure. I have a project with tests. Using exactly this commit of the gem tests pass. When I use another revision - tests fail. That&#39;s why \ud83e\udd37\u200d\u2642\ufe0f I just can&#39;t get what I miss using this revision. I have this revision cached on my computer and all works fine but when I run <code>bundle</code> on another computer Bundler can&#39;t fetch the gem according Gemfile"}, {"owner": {"reputation": 5610, "user_id": 413924, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a5fae9bf6a8e05a023c96ba434a1dfd5?s=128&d=identicon&r=PG", "display_name": "DannyB", "link": "https://stackoverflow.com/users/413924/dannyb"}, "edited": false, "score": 0, "creation_date": 1577025883, "post_id": 59445120, "comment_id": 105073050, "body": "Tag it, and get it by tag instead of commit"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1577025891, "post_id": 59445120, "comment_id": 105073053, "body": "but that commit has been merged in to the main repo so did you try with just using <code>https:&#47;&#47;github.com&#47;rebelidealist&#47;stripe-ruby-mock</code>  without branch or commit?  In fact try to comment out everything and just use the core gem? It&#39;s bad practice to use forks of a gem if you can get the main repo to work. I"}], "answers": [{"comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1577026063, "post_id": 59445218, "comment_id": 105073107, "body": "You&#39;ve provided an answer which addresses the problem, but doesn&#39;t offer a solution."}], "tags": [], "owner": {"reputation": 8462, "user_id": 405865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e29f04f339715955060858e0e65e1311?s=128&d=identicon&r=PG", "display_name": "fphilipe", "link": "https://stackoverflow.com/users/405865/fphilipe"}, "is_accepted": false, "score": 1, "last_activity_date": 1577025888, "creation_date": 1577025888, "answer_id": 59445218, "question_id": 59445120, "link": "https://stackoverflow.com/questions/59445120/installing-a-gem-using-a-commits-hash/59445218#59445218", "title": "Installing a gem using a commit&#39;s hash", "body": "<p>That commit is not reachable from any branch or tag. For that reason, when you clone the repo from GitHub (which Bundler does under the hood), your local copy will not have that commit.</p>\n\n<p>Thus, you can't use it.</p>\n\n<p>On GitHub, you can see that this commit is not reachable as it doesn't list any branch or tag that contains it:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Gl8f2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Gl8f2.png\" alt=\"enter image description here\"></a></p>\n\n<p>Compare that to the parent commit, which lists as being reachable from master:</p>\n\n<p><a href=\"https://i.stack.imgur.com/wyneW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wyneW.png\" alt=\"enter image description here\"></a></p>\n\n<p>Note that orphaned commits would get garbage collected by Git eventually. GitHub though doesn't do that as there might be references to particular commits.</p>\n"}, {"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": -1, "last_activity_date": 1577026161, "creation_date": 1577026161, "answer_id": 59445258, "question_id": 59445120, "link": "https://stackoverflow.com/questions/59445120/installing-a-gem-using-a-commits-hash/59445258#59445258", "title": "Installing a gem using a commit&#39;s hash", "body": "<p>Try not to use forked gem if possible.  But if you need to lock a forked version, make sure you own the fork.  Fork the forked branch, merge it to your own repo's main branch, and then just use that repo in your gemfile.</p>\n"}], "owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1577026161, "creation_date": 1577025110, "question_id": 59445120, "link": "https://stackoverflow.com/questions/59445120/installing-a-gem-using-a-commits-hash", "title": "Installing a gem using a commit&#39;s hash", "body": "<p>I have really simple <code>Gemfile</code>:</p>\n\n<pre><code>source 'https://rubygems.org'                                                                                                                                                                                                                                                                                                                                                                                                   \ngem 'stripe-ruby-mock', \n  github: 'mnin/stripe-ruby-mock', \n  require: 'stripe_mock', \n  ref: 'b6446fb5ae2b14b6703554cbea4ebd466e4f3c47'\n</code></pre>\n\n<p>When I run <code>bundle</code> command to install this gem I get this error:</p>\n\n<pre><code>root@6bcff6bf3997:/app# bundle\nThe git source `git://github.com/mnin/stripe-ruby-mock.git` uses the `git` protocol, which transmits data without encryption. Disable this warning with `bundle config git.allow_insecure true`, or switch to the `https` protocol to keep your data secure.\nFetching git://github.com/mnin/stripe-ruby-mock.git\nfatal: Could not parse object 'b6446fb5ae2b14b6703554cbea4ebd466e4f3c47'.\nRevision b6446fb5ae2b14b6703554cbea4ebd466e4f3c47 does not exist in the repository git://github.com/mnin/stripe-ruby-mock.git. Maybe you misspelled it?\n</code></pre>\n\n<p>But I can visit the commit's page on Github using this link <a href=\"https://github.com/mnin/stripe-ruby-mock/commit/b6446fb5ae2b14b6703554cbea4ebd466e4f3c47\" rel=\"nofollow noreferrer\">https://github.com/mnin/stripe-ruby-mock/commit/b6446fb5ae2b14b6703554cbea4ebd466e4f3c47</a>.</p>\n\n<p>So how can I the gem using this commit's hash? </p>\n"}, {"tags": ["arrays", "ruby", "loops", "parsing", "hash"], "answers": [{"comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1577024380, "post_id": 59444930, "comment_id": 105072750, "body": "You probably should do <code>@item = Item.find_or_create_by(</code> to avoid creating duplicate items in the database. <a href=\"https://guides.rubyonrails.org/active_record_querying.html#find-or-create-by\" rel=\"nofollow noreferrer\">See  documentation</a>.  You might also dry up this code with <code>[2, 1, 4, 6, 8, 10].each do |i| </code> etc."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1577031621, "post_id": 59444930, "comment_id": 105074586, "body": "Database? What database? The question is not even tagged with <a href=\"https://stackoverflow.com/questions/tagged/ruby-on-rails\">ruby-on-rails</a>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1577031657, "post_id": 59444930, "comment_id": 105074593, "body": "@lacostenycoder there is no <code>#find_or_create_by</code> method in <a href=\"https://stackoverflow.com/questions/tagged/ruby\">ruby</a>."}, {"owner": {"reputation": 11, "user_id": 6419716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b321279dd95e1e8685731eee8389298?s=128&d=identicon&r=PG&f=1", "display_name": "THS", "link": "https://stackoverflow.com/users/6419716/ths"}, "edited": false, "score": 0, "creation_date": 1577041482, "post_id": 59444930, "comment_id": 105077085, "body": "Actually, everybody was helpful here.  Aleksei Matiushkin is right that I&#39;m just trying to build this application in Ruby, not with Rails.  However, once I had it working I was going to bolt on a database so the data was preserved.  I may just use the Rails framework for that.  Likely there is a better way, but I&#39;m trying to make it work before I make it last."}], "tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": false, "score": -1, "last_activity_date": 1577024227, "last_edit_date": 1577024227, "creation_date": 1577023755, "answer_id": 59444930, "question_id": 59444799, "link": "https://stackoverflow.com/questions/59444799/ruby-object-factory-loop-seems-to-overwrite-some-instances-not-all/59444930#59444930", "title": "Ruby object factory loop seems to overwrite some instances, not all", "body": "<p>Your issue is you're only initializing a new Item object with certain attributes, you're not saving it to the database. Every time you do <code>@item = Item.new</code> , you're overwriting the previous version of <code>@item</code>. Changing <code>new</code> to <code>create</code> should solve your issue, assuming your <code>Item</code> passes validation:</p>\n\n<pre><code>def factory \n  @item_cards.each do |x|  \n    s = x.text\n    arry = {\n      :char2 =&gt; s.split(%'\\')[2].strip,\n      :char1 =&gt; s.split(%'\\')[1].strip,\n      :char4 =&gt; s.split(%'\\')[4].strip,\n      :char6 =&gt; s.split(%'\\')[6].strip,\n      :char8 =&gt; s.split(%'\\')[8].strip,\n      :char10 =&gt; s.split(%'\\')[10].strip,\n    }   \n\n    @item = Item.create(                         # &lt;-- Change this bit here\n      char2: arry[:char2],\n      char1: arry[:char1],\n      char4: arry[:char4],\n      char6: arry[:char6],\n      sqft: char8[:char8],\n      char10: arry[:char10]\n    )\n\n    puts \"** here is the new Item CLASS object #{@item.inspect}\" \n    puts \"*** there are #{Item.count} Item Objects now\"\n    puts \"*** Against this many @item_cards #{@item_cards.count}\"\n  end\n\n  puts \"********** OUT OF THE LOOP NOW **********\" \n  puts \"There are this many Item objects: #{Item.all.count}\"\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 6419716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b321279dd95e1e8685731eee8389298?s=128&d=identicon&r=PG&f=1", "display_name": "THS", "link": "https://stackoverflow.com/users/6419716/ths"}, "edited": false, "score": 0, "creation_date": 1577046890, "post_id": 59445989, "comment_id": 105078267, "body": "This worked, though not until I did at the end @item &lt;&lt; Item.new(...).  THANKS"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1577031855, "creation_date": 1577031855, "answer_id": 59445989, "question_id": 59444799, "link": "https://stackoverflow.com/questions/59444799/ruby-object-factory-loop-seems-to-overwrite-some-instances-not-all/59445989#59445989", "title": "Ruby object factory loop seems to overwrite some instances, not all", "body": "<p><code>Array#each</code> just iterates the collection. You, on contrary, need to <em>map</em> the input to some data, returned by your parsing. That said, something like the below would work.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def factory \n  @items = # an array of items!\n    @item_cards.map do |x|  \n      ...\n      Item.new(...) # should be the last line in a loop\n    end\n  # @items contains the array of `Item` objects now\nend\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6419716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b321279dd95e1e8685731eee8389298?s=128&d=identicon&r=PG&f=1", "display_name": "THS", "link": "https://stackoverflow.com/users/6419716/ths"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1577031855, "creation_date": 1577022908, "last_edit_date": 1577023249, "question_id": 59444799, "link": "https://stackoverflow.com/questions/59444799/ruby-object-factory-loop-seems-to-overwrite-some-instances-not-all", "title": "Ruby object factory loop seems to overwrite some instances, not all", "body": "<p>I'm struggling with a ruby loop.  I have a set of 102 items pulled from a website captured in strings.  In those strings are listed characteristics about that item.  I want to parse the string and put some of the item characteristics into a hash.  Each hash is meant to be an instance of my Item Class.  The code below <em>kinda</em> works (meaning it doesn't), in that it does create SOME Item class objects in the manner expected.  But it doesn't capture all 102.  Instead it seems to capture only a subset.  I think it is overwriting some earlier iterations.  I'm stumped.  I'm a novice and this is the hardest project I've taken on, so all advice welcome and appreciated!</p>\n\n<p>Here's my class definition, kept in a separate file pulled in by require_relative:</p>\n\n<pre><code>class Item\n    attr_accessor :char1, :char2, :char4, :char6, :char8, :char10, :char11 \n    def initialize(args)\n        @char2  = args[:char2]\n        @char1  = args[:char1]\n        @char4  = args[:char4]\n        @char6  = args[:char6] || 4\n        @char8  = args[:char8]\n        @char10 = args[:char10]\nend\n</code></pre>\n\n<p>Running my script file in IRB, I get:</p>\n\n<pre><code>2.6.3 :028 &gt; @item_cards.count\n =&gt; 102\n2.6.3 :030 &gt; @item_cards.first.text\n =&gt; \"42\\Characteristic1\\Characteristic2\\Characteristic3\\Characteristic4\\Characteristic1\\Characteristic5\\Characteristic6\\Characteristic7\\Characteristic8\\Characteristic9\\Characteristic10\\\"\n</code></pre>\n\n<p>Then I parse that string for the characteristics I care about, put them into an array, and then try use that array to build an object in my Item class.</p>\n\n<pre><code>def factory \n     @item_cards.each do |x|  \n            s = x.text\n            arry = {\n            :char2 =&gt; s.split(%'\\')[2].strip,\n            :char1 =&gt; s.split(%'\\')[1].strip,\n            :char4 =&gt; s.split(%'\\')[4].strip,\n            :char6 =&gt; s.split(%'\\')[6].strip,\n            :char8 =&gt; s.split(%'\\')[8].strip,\n            :char10 =&gt; s.split(%'\\')[10].strip,\n                }   \n\n     @item = Item.new(char2: arry[:char2], char1: arry[:char1], char4: \n     arry[:char4], char6: arry[:char6], sqft: char8[:char8], char10: \n     arry[:char10])\n\n            puts \"** here is the new Item CLASS object #{@item.inspect}\" \n            puts \"*** there are #{Item.count} Item Objects now\"\n            puts \"*** Against this many @item_cards #{@item_cards.count}\"\n            puts \"*** end of this iteration of loop ***\"\n     end\n\n    puts \"********** OUT OF THE LOOP NOW **********\" \n    puts \"There are this many Item objects: #{Item.all.count}\"\n\nend\n\n</code></pre>\n\n<p>During each iteration of the loop, it looks to me that (1) the text is parsing correctly, and (2) that data is properly captured in the @item variable.  However, sometimes the #{Item.count} ticker doesn't increase.  E.g., it will create the third Item object with the characteristics of the that item, but then seems to overwrite the third Item object with the fourth.  Yet other Item objects are created correctly.  The final result is a smaller number of Item objects than would be suggested by the number of @item_cards originally captured (i.e, less than 102).  </p>\n\n<p>When I run the factory command in IRB, this is what I get at the end, having skipped or overwritten 30 items by the time it gets to the end:</p>\n\n<pre><code> here is the initial array {#parsing correctly for item 71}\n*** And here is the New Item CLASS object #&lt;Item:0x00007f96c25162c8 @char2=\"Item 71's Char2\", @char1=\"Item 71's Char1\", \"#and so on...\"&gt;\n*** there are 71 Item Objects now\n*** Against this many @item_cards 102\n*** end of this iteration of loop ***\nReturn value is: nil\n here is the initial array {#parsing correctly for item 72}\n*** And here is the New Item CLASS object #&lt;Item:0x00007f96c454a6c0 @char2=\"Item 72's Char 2\", @char1=\"Item 72's Char 1\", #and so on...&gt;\n*** there are 71 Item Objects now\n*** Against this many @item_cards 102\n*** end of this iteration of loop ***\nReturn value is: nil\n\n#then process repeats, working correctly to create new Item object.\n\n*** there are 72 Item Objects now\n*** Against this many @item_cards 102\n*** end of this iteration of loop ***\nReturn value is: nil\n\n********** OUT OF THE LOOP NOW **********\n\nThere are this many Item objects: 72\nReturn value is: nil\n</code></pre>\n\n<p>I hope that is clear, if not concise.  Very much a novice so all input/correction is welcome.  </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1577022310, "post_id": 59443914, "comment_id": 105072237, "body": "Are you hosting the javascript assets yourself?  Do you have a link to the api documentation for the wistia javascripts use and installation?"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 12579299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58fcd60a637d81a0e4c5bc7f92f6540b?s=128&d=identicon&r=PG&f=1", "display_name": "anhbuiask", "link": "https://stackoverflow.com/users/12579299/anhbuiask"}, "edited": false, "score": 0, "creation_date": 1577068689, "post_id": 59444581, "comment_id": 105081847, "body": "thank you for your comment. You are right. By trying to code your comment, I could upload my video and changed it. Thank you very much."}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1577070146, "last_edit_date": 1577070146, "creation_date": 1577021266, "answer_id": 59444581, "question_id": 59443914, "link": "https://stackoverflow.com/questions/59443914/making-an-upload-video-button-in-rails-but-still-do-not-run/59444581#59444581", "title": "Making an upload video button in rails but still do not run", "body": "<p>If you are trying to load javascript from an external site you need to include the http protocol.  However without implementation instructions from your vendor, this probably won't do anything.  How does this javascript know where to insert video into your dom?  Look at the documentation here in their example <a href=\"https://wistia.com/support/embed-and-share/video-on-your-website\" rel=\"nofollow noreferrer\">https://wistia.com/support/embed-and-share/video-on-your-website</a></p>\n\n<p>So in your html, load the javascript first then assign the div like this:</p>\n\n<pre><code>  &lt;script src=\"http://fast.wistia.com/embed/medias/j38ihh83m5.jsonp\" async&gt;&lt;/script&gt;\n  &lt;script src=\"http://fast.wistia.com/assets/external/E-v1.js\" async&gt;&lt;/script&gt;\n  &lt;div class=\"wistia_embed wistia_async_j38ihh83m5\" style=\"height:349px;width:620px\"&gt;&amp;nbsp;&lt;/div&gt;\n</code></pre>\n\n<p>So if we assume your data object has a string with the id of the video, something like this should work:</p>\n\n<pre><code>&lt;script src=\"http://fast.wistia.com/embed/medias/&lt;%= @course.video %&gt;.jsonp\" async&gt;&lt;/script&gt;\n&lt;script src=\"http://fast.wistia.com/assets/external/E-v1.js\" async&gt;&lt;/script&gt;\n&lt;div class=\"wistia_embed wistia_async_&lt;%= @course.video %&gt;\" style=\"height:349px;width:620px\"&gt;&amp;nbsp;&lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 12579299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58fcd60a637d81a0e4c5bc7f92f6540b?s=128&d=identicon&r=PG&f=1", "display_name": "anhbuiask", "link": "https://stackoverflow.com/users/12579299/anhbuiask"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1577070146, "creation_date": 1577015178, "last_edit_date": 1577029356, "question_id": 59443914, "link": "https://stackoverflow.com/questions/59443914/making-an-upload-video-button-in-rails-but-still-do-not-run", "title": "Making an upload video button in rails but still do not run", "body": "<p>I am trying to make a very simple rails program to upload video. And here is my code</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;div class=\"row\"&gt;\n  &lt;div class=\"col s12 m6\"&gt;\n    &lt;div class=\"card blue-grey darken-1\"&gt; \n      &lt;div class=\"card-image\"&gt; \n        &lt;script src=\"//fast.wistia.com/embed/medias/&lt;%= @course.video %&gt;\" async&gt;&lt;/script&gt; \n        &lt;script src=\"//fast.wistia.com/assets/external/E-v1.js\" async&gt;&lt;/script&gt;\n      &lt;/div&gt;\n</code></pre>\n\n<p>My problem is, when I copy and paste the code from <code>wistia.com</code> to the box video, and try to upload it, the video still can not upload, I mean the video still does not change.</p>\n\n<p>Could you please give me some ideas in this problem? I am a newbie and very confuse with this problem. Thank you very much.</p>\n"}, {"tags": ["ruby", "api", "rubygems", "command-line-interface"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1577013183, "post_id": 59443046, "comment_id": 105070384, "body": "&quot;can&#39;t seem to get it to work completely&quot; is not a precise enough error description for us to help you. <i>What</i> doesn&#39;t work? <i>How</i> doesn&#39;t it work? What trouble do you have with your code? Do you get an error message? What is the error message? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ? Is the behavior you are observing not the desired behavior? What is the desired behavior and why, what is the observed behavior, and in what way do they differ?"}], "answers": [{"tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": false, "score": 1, "last_activity_date": 1577009486, "creation_date": 1577009486, "answer_id": 59443289, "question_id": 59443046, "link": "https://stackoverflow.com/questions/59443046/putting-out-the-title-of-every-movie/59443289#59443289", "title": "Putting out the title of every movie,", "body": "<p>Your issue is with this bit:</p>\n\n<pre><code>Movie.all.each.with_index do |title|\n  puts \"#{movie.title}\"\nend\n</code></pre>\n\n<p>You're iterating through each <code>Movie</code> record, and using <code>title</code> as a placeholder, but then trying to refer to <code>#{movie.title}</code>. Whatever you use as the placeholder is what you'll be referring to each record as, so you can do:</p>\n\n<pre><code>Movie.all.each.with_index do |title|\n  puts \"#{title.title}\"\nend\n</code></pre>\n\n<p>Or you probably want:</p>\n\n<pre><code>Movie.all.each.with_index do |movie|\n  puts \"#{movie.title}\"\nend\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 12579048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc5026156483adc32920ee7e54bf81a6?s=128&d=identicon&r=PG&f=1", "display_name": "lynchrFI", "link": "https://stackoverflow.com/users/12579048/lynchrfi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "closed_date": 1577081595, "answer_count": 1, "score": 0, "last_activity_date": 1577009612, "creation_date": 1577007014, "last_edit_date": 1577009612, "question_id": 59443046, "link": "https://stackoverflow.com/questions/59443046/putting-out-the-title-of-every-movie", "closed_reason": "Not suitable for this site", "title": "Putting out the title of every movie,", "body": "<p>Recently I built a CLI Data Gem that listed and described all Star Wars movies, when I did my review with my cohort lead she asked me to build a method that puts out the title of every movie instance. </p>\n\n<pre><code>def say_titles\n  Movie.all.each.with_index do |title|\n    puts \"#{movie.title}\"\n  end\nend\n</code></pre>\n\n<p>this is what I currently have but can't seem to get it to work completely. Any ideas?</p>\n\n<pre><code>class Movie\n\nattr_reader :title, :episode_id, :opening_crawl, :director, :producer, :release_date\n  @@all = []\n\n  def initialize(title, episode_id, opening_crawl, director, producer, release_date)\n    @title = title\n    @episode_id = episode_id\n    @opening_crawl = opening_crawl\n    @director = director\n    @producer = producer\n    @release_date = release_date\n    @@all &lt;&lt; self\n  end\n\n  def self.all\n    @@all\n  end\n\nend\n</code></pre>\n\n<p>If needed, this is my whole Movie class...</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1577002184, "post_id": 59442503, "comment_id": 105068436, "body": "When Ruby complains that there is a <code>SyntaxError</code> then Ruby is very likely right. Please copy and paste that file into your question."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 5, "creation_date": 1577002689, "post_id": 59442503, "comment_id": 105068505, "body": "Paste the content of <code>&#47;Users&#47;admin&#47;code&#47;cookieMonster42&#47;Present-list&#47;config&#47;initia&zwnj;&#8203;lizers&#47;simple_form_b&zwnj;&#8203;ootstrap.rb</code> file around line <code>62</code> (&#177;5 lines around.)"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1577111173, "post_id": 59442503, "comment_id": 105094985, "body": "If you have &quot;never touched this file&quot; and the default settings are fine with you. You can always just copy and paste the original over whatever happened to yours <a href=\"https://github.com/plataformatec/simple_form/blob/master/lib/generators/simple_form/templates/config/initializers/simple_form_bootstrap.rb\" rel=\"nofollow noreferrer\">Simple Form Bootstrap Config</a>"}, {"owner": {"reputation": 103, "user_id": 12564571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b82c20b79c117ce50c4d852265e7985?s=128&d=identicon&r=PG&f=1", "display_name": "AMMA", "link": "https://stackoverflow.com/users/12564571/amma"}, "edited": false, "score": 0, "creation_date": 1578582133, "post_id": 59442503, "comment_id": 105492397, "body": "thanks that was the right spot thank you"}], "owner": {"reputation": 103, "user_id": 12564571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b82c20b79c117ce50c4d852265e7985?s=128&d=identicon&r=PG&f=1", "display_name": "AMMA", "link": "https://stackoverflow.com/users/12564571/amma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1577001110, "creation_date": 1577001110, "question_id": 59442503, "link": "https://stackoverflow.com/questions/59442503/rails-s-exiting-unexpected-and-i-can-not-figure-out-why", "title": "rails s exiting unexpected and I can not figure out why", "body": "<pre><code>=&gt; Booting Puma\n=&gt; Rails 5.2.3 application starting in development \n=&gt; Run `rails server -h` for more startup options\nExiting\nTraceback (most recent call last):\n    84: from ./bin/rails:3:in `&lt;main&gt;'\n    83: from ./bin/rails:3:in `load'\n    82: from /Users/admin/code/cookieMonster42/Present-list/bin/spring:15:in `&lt;top (required)&gt;'\n    81: from /Users/admin/.rbenv/versions/2.6.3/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    80: from /Users/admin/.rbenv/versions/2.6.3/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    79: from /Users/admin/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/spring-2.1.0/lib/spring/binstub.rb:11:in `&lt;top (required)&gt;'\n    78: from /Users/admin/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/spring-2.1.0/lib/spring/binstub.rb:11:in `load'\n    77: from /Users/admin/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/spring-2.1.0/bin/spring:49:in `&lt;top (required)&gt;'\n    1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:54:in `load': /Users/admin/code/cookieMonster42/Present-list/config/initializers/simple_form_bootstrap.rb:62: syntax error, unexpected tSYMBEG, expecting end (SyntaxError)\n    b.use :full_error, wrap_with: { tag:...\n          ^\n/Users/admin/code/cookieMonster42/Present-list/config/initializers/simple_form_bootstrap.rb:64: syntax error, unexpected end, expecting end-of-input\n  end\n  ^~~\n</code></pre>\n\n<p>Tried to fix and <code>end</code> in the code but I could not find it and there should not be a problem though I never touched the file before.\nSorry can anyone tell me what this is about??\nI can't figure it out.\nThanks ahead.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2282, "user_id": 10853463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kg5ZZ.jpg?s=128&g=1", "display_name": "red_menace", "link": "https://stackoverflow.com/users/10853463/red-menace"}, "edited": false, "score": 1, "creation_date": 1576975915, "post_id": 59440748, "comment_id": 105065597, "body": "The @ sigil is used for instance variables; your example is using a local variable that hasn&#39;t been assigned a value."}, {"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 2, "creation_date": 1576976368, "post_id": 59440748, "comment_id": 105065667, "body": "As soon as you do <code>name =</code> something, Ruby creates a new variable <code>name</code> with the value <code>nil</code>, then it gets assigned the value on the right side, after the equals sign. Since at that point <code>name</code> is already a variable with the value <code>nil</code> it will just stays as <code>nil</code>."}, {"owner": {"reputation": 57, "user_id": 557531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c8e377abc4294c356304d1622f0ac87?s=128&d=identicon&r=PG", "display_name": "Rolando Murillo", "link": "https://stackoverflow.com/users/557531/rolando-murillo"}, "reply_to_user": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 0, "creation_date": 1576976457, "post_id": 59440748, "comment_id": 105065681, "body": "@Viktor, right yeah that&#39;s what I thought. Because otherwise calling <code>name</code> (the method) directly without defining <code>name</code> (the variable) would indeed give me <code>hello</code>"}], "owner": {"reputation": 57, "user_id": 557531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c8e377abc4294c356304d1622f0ac87?s=128&d=identicon&r=PG", "display_name": "Rolando Murillo", "link": "https://stackoverflow.com/users/557531/rolando-murillo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "closed_date": 1576990275, "answer_count": 0, "score": 2, "last_activity_date": 1576973167, "creation_date": 1576973167, "question_id": 59440748, "link": "https://stackoverflow.com/questions/59440748/what-happens-when-a-variable-has-the-same-name-as-the-setter-method", "closed_reason": "Duplicate", "title": "What happens when a variable has the same name as the setter method?", "body": "<p>I recently encountered this situation in Ruby that I don't seem to quite understand. Let's take a look at this code:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Something\n  attr_accessor :name\n\n  def initialize(name)\n    @name = name\n  end\n\n  def some_method\n    name = name\n    name\n  end\nend\n</code></pre>\n\n<p>So, if I instantiate Something like so: </p>\n\n<p><code>sth = Something.new('hello')</code></p>\n\n<p>I would expect <code>sth.some_method</code> to return <code>hello</code> but instead I get <code>nil</code></p>\n\n<p>Why is this?</p>\n\n<p>The only thing I can think of is I'm essentially redefining what <code>name</code> means in the context of <code>#some_method</code> so when <code>name</code> is assigned to itself then it basically doesn't know what <code>name</code> is anymore, would that make sense?</p>\n\n<p>Edit:</p>\n\n<p>I could instead do <code>@name = name</code> or <code>self.name = name</code> and that would be fine, I was just curious about this particular scenario.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "rspec"], "comments": [{"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1576986994, "post_id": 59440053, "comment_id": 105066692, "body": "You can check if the http status is <code>:bad_request</code>."}], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1577001348, "creation_date": 1577001348, "answer_id": 59442531, "question_id": 59440053, "link": "https://stackoverflow.com/questions/59440053/how-do-you-handle-bad-requests-with-rspec-tests-in-rails/59442531#59442531", "title": "How do you handle bad requests with RSpec tests in Rails?", "body": "<p>In a controller test, you can spec that the controller raises an <code>ActiveRecord::RecordNotFound</code> when the <code>id</code> doesn't exist.</p>\n\n<pre><code>describe \"GET #show\" do\n  context \"with a valid id\" do\n    before do\n      get :show, params: { id: 1 }\n    end\n\n    it \"returns HTTP Success\" do\n      expect(response).to have_http_status(:success)\n    end\n\n    it \"JSON body response contains expected review attributes\" do\n      json_response = JSON.parse(response.body)\n      json_response[\"status\"].should == \"SUCCESS\"\n    end\n  end\n\n  context \"with an invalid id\" do\n    it \"raises an error\" do\n      expect { \n        get :show, params: { id: \"invalid-identifier\" }\n      }.to raise_error ActiveRecord::RecordNotFound\n    end\n  end\nend\n</code></pre>\n\n<p>Note that when a controller raises an <code>ActiveRecord::RecordNotFound</code> in <code>production</code> environment then Ruby on Rails will return a <code>404 (not found)</code> \u2013 if the default was not changed. Read more about this behavior in the <a href=\"https://guides.rubyonrails.org/action_controller_overview.html#rescue\" rel=\"nofollow noreferrer\">Rails Guides</a>.</p>\n"}], "owner": {"reputation": 9, "user_id": 8328341, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/6VOsk.png?s=128&g=1", "display_name": "bitdon", "link": "https://stackoverflow.com/users/8328341/bitdon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577001348, "creation_date": 1576964691, "question_id": 59440053, "link": "https://stackoverflow.com/questions/59440053/how-do-you-handle-bad-requests-with-rspec-tests-in-rails", "title": "How do you handle bad requests with RSpec tests in Rails?", "body": "<p>In my test database, I have reviews that i am making API calls to in my API-only Rails 5 app. </p>\n\n<p>So far i have written tests for my index and show actions for the ReviewsController. </p>\n\n<p>How do i handle error/bad request handling? For instance, if someone tries to go to a route that doesn't exist or if someone tries to navigate to a show route without an existing id, how is that done in RSpec?</p>\n\n<pre><code># spec/controllers/api/v1/reviews_controller_spec.rb\nrequire 'rails_helper'\n\nRSpec.describe Api::V1::ReviewsController do\n  describe \"GET #index\" do\n    before do\n      get :index\n    end\n\n    it \"returns HTTP Success\" do\n      expect(response).to have_http_status(:success)\n    end\n\n    it \"JSON body response contains expected review attributes\" do\n      json_response = JSON.parse(response.body)\n      json_response[\"status\"].should == \"SUCCESS\"\n    end\n  end\n\n  describe \"GET #show\" do\n    before do\n      get :show, params: { id: 1 }\n    end\n\n    it \"returns HTTP Success\" do\n      expect(response).to have_http_status(:success)\n    end\n\n    it \"JSON body response contains expected review attributes\" do\n      json_response = JSON.parse(response.body)\n      json_response[\"status\"].should == \"SUCCESS\"\n    end\n  end\nend\n</code></pre>\n\n<p>ReviewsController:</p>\n\n<pre><code># spec/controllers/api/v1/reviews_controller.rb\nmodule Api\n  module V1\n    class ReviewsController &lt; ApplicationController\n      def index\n        @reviews = Review.order(created_at: :desc)\n        render json: { status: 'SUCCESS', message: 'loaded reviews', data: @reviews }\n      end\n\n      def show\n        @review = Review.find(params[:id])\n        render json: { status: 'SUCCESS', message: 'loaded the review', data: @review }\n      end\n\n      private\n\n      def review_params\n        params.require(:review).permit(:title, :star, :content, :name, :date)\n      end\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1576987182, "post_id": 59439772, "comment_id": 105066708, "body": "Show the errors on the console and on the browser."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 12577727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96156beb2e4b2fad89f629806733a09b?s=128&d=identicon&r=PG&f=1", "display_name": "Mohsin Jamshaid", "link": "https://stackoverflow.com/users/12577727/mohsin-jamshaid"}, "is_accepted": false, "score": 0, "last_activity_date": 1576975514, "creation_date": 1576975514, "answer_id": 59440895, "question_id": 59439772, "link": "https://stackoverflow.com/questions/59439772/how-to-fix-index-is-missing-a-template-for-request-formats-text-html/59440895#59440895", "title": "How to fix index is missing a template for request formats: text/html", "body": "<p>Remove this line get 'welcome/index' \nOR simply change it to\nget 'welcome/index', to: 'welcome#index'\nHopefully this would resolve your issue.</p>\n"}, {"tags": [], "owner": {"reputation": 782, "user_id": 4084201, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/762204178/picture?type=large", "display_name": "Zhorian", "link": "https://stackoverflow.com/users/4084201/zhorian"}, "is_accepted": false, "score": 0, "last_activity_date": 1577002770, "creation_date": 1577002770, "answer_id": 59442648, "question_id": 59439772, "link": "https://stackoverflow.com/questions/59439772/how-to-fix-index-is-missing-a-template-for-request-formats-text-html/59442648#59442648", "title": "How to fix index is missing a template for request formats: text/html", "body": "<p>I worked out what the issue was. My mounted drive was called \"HDD (Mint)\" changing it to \"HDD-Mint\" and now it's working perfectly!</p>\n"}], "owner": {"reputation": 782, "user_id": 4084201, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/762204178/picture?type=large", "display_name": "Zhorian", "link": "https://stackoverflow.com/users/4084201/zhorian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 314, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1577002770, "creation_date": 1576961722, "last_edit_date": 1576964358, "question_id": 59439772, "link": "https://stackoverflow.com/questions/59439772/how-to-fix-index-is-missing-a-template-for-request-formats-text-html", "title": "How to fix index is missing a template for request formats: text/html", "body": "<p>I'm following a udemy course with Rails and I've also tried following the guidance in \"<a href=\"https://guides.rubyonrails.org/getting_started.html\" rel=\"nofollow noreferrer\">Getting Started with Rails</a>\",\nbut no matter what my application can't locate my template files.</p>\n\n<p>app/controllers/welcome_controller.rb:</p>\n\n<pre><code># frozen_string_literal: true\n\n# The welcome controller.\nclass WelcomeController &lt; ApplicationController\n  def index; end\nend\n</code></pre>\n\n<p>app/views/welcome/index.html.erb:</p>\n\n<pre><code>&lt;h1&gt;Hello, Rails!&lt;/h1&gt;\n</code></pre>\n\n<p>config/routes.rb:</p>\n\n<pre><code># frozen_string_literal: true\n\nRails.application.routes.draw do\n  get 'welcome/index'\n  root 'welcome#index'\n  # For details on the DSL available within this file, see https://guides.rubyonrails.org/routing.html\nend\n</code></pre>\n"}, {"tags": ["ruby", "rubygems", "bundle", "bundler"], "answers": [{"comments": [{"owner": {"reputation": 191, "user_id": 1620799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15ea78d62b2269a1220b3d3dbca24db?s=128&d=identicon&r=PG", "display_name": "Rodion V", "link": "https://stackoverflow.com/users/1620799/rodion-v"}, "edited": false, "score": 0, "creation_date": 1616581172, "post_id": 59436993, "comment_id": 118044987, "body": "thank you for sharing solution"}], "tags": [], "owner": {"reputation": 5765, "user_id": 7619808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gHvtS.png?s=128&g=1", "display_name": "logankilpatrick", "link": "https://stackoverflow.com/users/7619808/logankilpatrick"}, "is_accepted": true, "score": 1, "last_activity_date": 1576938510, "creation_date": 1576938510, "answer_id": 59436993, "question_id": 59436769, "link": "https://stackoverflow.com/questions/59436769/errors-running-bundle-install-path-vendor-binstubs-on-macos-command-lind/59436993#59436993", "title": "Errors running `bundle install --path vendor --binstubs on MacOs` command Lind", "body": "<p>Looks like all I needed to do was <code>cd</code> into the root of the repo I was trying to build and run <code>bundle config set path 'vendor'</code> then <code>bundle install</code>.</p>\n"}], "owner": {"reputation": 5765, "user_id": 7619808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gHvtS.png?s=128&g=1", "display_name": "logankilpatrick", "link": "https://stackoverflow.com/users/7619808/logankilpatrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1215, "favorite_count": 0, "accepted_answer_id": 59436993, "answer_count": 1, "score": 0, "last_activity_date": 1576938510, "creation_date": 1576936674, "question_id": 59436769, "link": "https://stackoverflow.com/questions/59436769/errors-running-bundle-install-path-vendor-binstubs-on-macos-command-lind", "title": "Errors running `bundle install --path vendor --binstubs on MacOs` command Lind", "body": "<p>I am following some install instructions so I can locally test a website. </p>\n\n<p>The instructions say to do: </p>\n\n<pre><code>gem install bundler # Works fine\nbundle install --path vendor --binstubs # Gives me deprecation errors and such\n</code></pre>\n\n<p>What is the correct way to do what was being done in this line: <code>bundle install --path vendor --binstubs</code>? </p>\n\n<p>Full error: </p>\n\n<pre><code>[DEPRECATED] The `--path` flag is deprecated because it relies on being remembered across bundler invocations, which bundler will no longer do in future versions. Instead please use `bundle config set path 'vendor'`, and stop using this flag\n[DEPRECATED] The --binstubs option will be removed in favor of `bundle binstubs`\nCould not locate Gemfile\n</code></pre>\n\n<p>Thanks!!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1576936214, "post_id": 59436654, "comment_id": 105057749, "body": "Not sure what you&#39;re asking. What is the expected output you are looking for?  <code>prev_occorring</code> take a weekday argument <a href=\"https://github.com/rails/rails/blob/master/activesupport/lib/active_support/core_ext/date_and_time/calculations.rb#L329\" rel=\"nofollow noreferrer\">see method definition</a>"}, {"owner": {"reputation": 7275, "user_id": 255240, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/56c449f1a408dba893793094599f7fb5?s=128&d=identicon&r=PG", "display_name": "denisjacquemin", "link": "https://stackoverflow.com/users/255240/denisjacquemin"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1576936987, "post_id": 59436654, "comment_id": 105057922, "body": "Using the same name as the already existing prev_occuring method maybe mislead you. This new method should takes a month and a day as argument and return a full date like in my example, this date should be the latest occurence of a date with the given month and day."}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1576938705, "post_id": 59436654, "comment_id": 105058280, "body": "have you tried anything? personally I wouldn&#39;t money patch the Date class to add the method. This should be really simple: just create a date object with that month and day and use the year from your current date, if it&#39;s &gt; than the current date then substract 1 to the year."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1576950399, "post_id": 59436654, "comment_id": 105060920, "body": "&quot;latest&quot; is vague. Do you mean the &quot;last&quot; occurrence of a date having the given month and day (i.e, the latest previous date having the given month and day)? Moreover, do you want a <code>Date</code> object returned? In any even, when clarifying a question please edit the question rather than doing it in comments (which may not be noticed by some readers)."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1577056672, "post_id": 59436654, "comment_id": 105080120, "body": "If you clarify your question with an edit it can be reopened."}], "answers": [{"comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1576958048, "post_id": 59437025, "comment_id": 105062531, "body": "This method seems to work without <code>.then</code> in older ruby versions i.e. 2.4.1..  While version 2.6+ supports <code>.then</code> which is alias of <code>yield_self</code>   add in version 2.5, how does <code>Date.parse</code> magically allow the yield block without using either, which might be good for backward compatibility?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1577092685, "post_id": 59437025, "comment_id": 105087287, "body": "@lacostenycoder This method does not work without <code>then</code>. <code>Date.parse</code> does not yield a block; writing this without <code>then</code> is equivalent to just writing e.g. <code>Date.parse(&#39;28 dec&#39;)</code> and completely ignoring the &quot;maybe go back a year&quot; part of the logic, which was fundamental to the question."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1577092802, "post_id": 59437025, "comment_id": 105087338, "body": "If you want to make this code backwards compatible (or even, just compatible with older ruby versions), then you could write it as two lines rather than one: <code>date = Date.parse(&#39;28 dec&#39;); date.advance(years: (date &gt; Date.today ? -1 : 0))</code>. I was just taking advantage of the newish ruby method to fit it more concisely into a single line. (However, there was also no mention in the original question about needing a solution which ran on an old ruby version.)"}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 3, "last_activity_date": 1576939514, "last_edit_date": 1576939514, "creation_date": 1576938827, "answer_id": 59437025, "question_id": 59436654, "link": "https://stackoverflow.com/questions/59436654/latest-date-occurence-for-a-given-month-and-day/59437025#59437025", "title": "Latest date occurence for a given month and day", "body": "<p>There is more than one way to do it, of course.</p>\n\n<p>But here's one approach:</p>\n\n<pre><code>$&gt; Date.parse('28 dec').then { |date| date.advance(years: (date &gt; Date.today ? -1 : 0)) }\n=&gt; Fri, 28 Dec 2018\n$&gt; Date.parse('3 feb').then { |date| date.advance(years: (date &gt; Date.today ? -1 : 0)) }\n=&gt; Sun, 03 Feb 2019\n</code></pre>\n\n<p>Alternatively, you could opt to be more explicit (i.e. not rely on <code>Date.parse</code> magic)...</p>\n\n<p>You could use <code>Date::MONTHNAMES</code> to fetch the month number, and then write a little conditional to check whether the given date falls after the current date, in a calendar year.</p>\n\n<p>It would then probably be easiest to just use <code>Date.new</code> with the year/month/day values, rather than <code>Date#advance</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1577060078, "post_id": 59438645, "comment_id": 105080674, "body": "29 February is a bit of a nuisance."}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1577060081, "post_id": 59438645, "comment_id": 105080677, "body": "29 February is a bit of a nuisance."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1576952879, "last_edit_date": 1576952879, "creation_date": 1576951761, "answer_id": 59438645, "question_id": 59436654, "link": "https://stackoverflow.com/questions/59436654/latest-date-occurence-for-a-given-month-and-day/59438645#59438645", "title": "Latest date occurence for a given month and day", "body": "<p>I understand that, given a month expressed as a symbol and a day of that month, the requirement is to return a date object that represents the last date that has the given month and day that is no later than the current date. Here is a pure-Ruby solution.</p>\n\n<pre><code>require 'date'\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>def last_date(month, day)\n  date_this_year = Date.strptime(\"%s%s\" % [month.to_s.capitalize, day], '%B%d')\n  date_this_year &lt;= Date.today ? date_this_year : date_this_year &lt;&lt; 12\nend\n</code></pre>\n\n<p>See <a href=\"https://ruby-doc.org/stdlib-2.6.3/libdoc/date/rdoc/DateTime.html#method-c-strptime\" rel=\"nofollow noreferrer\">Date::strptime</a> and <a href=\"https://ruby-doc.org/stdlib-2.6.3/libdoc/date/rdoc/Date.html#method-i-3C-3C\" rel=\"nofollow noreferrer\">Date#&lt;&lt;</a>.</p>\n\n<pre><code>last_date(:june, 1)\n  #=&gt; #&lt;Date: 2019-06-01 ((2458636j,0s,0n),+0s,2299161j)&gt; \nlast_date(:december, 23)\n  #=&gt; #&lt;Date: 2018-12-23 ((2458476j,0s,0n),+0s,2299161j)&gt; \n</code></pre>\n\n<p>One could alternatively write:</p>\n\n<pre><code>def last_date(month, day)\n  today = Date.today\n  date_this_year = Date.new(today.year,\n    Date::MONTHNAMES.index(month.to_s.capitalize), day)\n  date_this_year &lt;= today ? date_this_year : date_this_year &lt;&lt; 12\nend\n</code></pre>\n\n<p>See <a href=\"https://ruby-doc.org/stdlib-2.6.3/libdoc/date/rdoc/Date.html#method-c-new\" rel=\"nofollow noreferrer\">Date::new</a>.</p>\n"}], "owner": {"reputation": 7275, "user_id": 255240, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/56c449f1a408dba893793094599f7fb5?s=128&d=identicon&r=PG", "display_name": "denisjacquemin", "link": "https://stackoverflow.com/users/255240/denisjacquemin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "closed_date": 1577013277, "accepted_answer_id": 59437025, "answer_count": 2, "score": -2, "last_activity_date": 1577099185, "creation_date": 1576935643, "last_edit_date": 1577099185, "question_id": 59436654, "link": "https://stackoverflow.com/questions/59436654/latest-date-occurence-for-a-given-month-and-day", "closed_reason": "Needs details or clarity", "title": "Latest date occurence for a given month and day", "body": "<p>What's the best way to get the last occurrence of a date having the given month and day with Ruby/Rails. The Returned value should be a Date object.</p>\n\n<p>i.e.:</p>\n\n<p>prev_occuring(month, day) </p>\n\n<pre><code>today = Date.today               # =&gt; Thu, 14 Dec 2019\ntoday.prev_occurring(:june, 1)   # =&gt; Sat, 1 Jun 2019\n\nor \n\ntoday = Date.today               # =&gt; Thu, 9 Jan 2020\ntoday.prev_occurring(:june, 1)   # =&gt; Sat, 1 Jun 2019\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1576931376, "post_id": 59436105, "comment_id": 105056794, "body": "The code you&#39;ve provided doesn&#39;t include a &quot;form&quot;, but rather just a table.  What is the output you&#39;re getting or do you get errors?  If so, please updated your question to include backtrace errors."}, {"owner": {"reputation": 103, "user_id": 2129796, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/MrPTg.jpg?s=128&g=1", "display_name": "MajQel", "link": "https://stackoverflow.com/users/2129796/majqel"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1576932145, "post_id": 59436105, "comment_id": 105056942, "body": "Sorry ... I meant table... you are right ... EDITED"}, {"owner": {"reputation": 103, "user_id": 2129796, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/MrPTg.jpg?s=128&g=1", "display_name": "MajQel", "link": "https://stackoverflow.com/users/2129796/majqel"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1576932236, "post_id": 59436105, "comment_id": 105056962, "body": "the table above works properly .... but it only prints referenct (:unit_id) instead of unit_name. I have no idea how to print unit name"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1576935826, "post_id": 59436105, "comment_id": 105057641, "body": "can you update your question to list the data attributes from schema.rb fo your 2 models?"}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 2129796, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/MrPTg.jpg?s=128&g=1", "display_name": "MajQel", "link": "https://stackoverflow.com/users/2129796/majqel"}, "edited": false, "score": 0, "creation_date": 1576942281, "post_id": 59437060, "comment_id": 105059095, "body": "Thanks for your answer ... I will let you know tommorrow if it works as I don&#39;t have access to code right now"}, {"owner": {"reputation": 103, "user_id": 2129796, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/MrPTg.jpg?s=128&g=1", "display_name": "MajQel", "link": "https://stackoverflow.com/users/2129796/majqel"}, "edited": false, "score": 0, "creation_date": 1577097784, "post_id": 59437060, "comment_id": 105089382, "body": "Work as charm. Altough I had to change has_one to belongs_to as I picked wrong association :) thank dude"}], "tags": [], "owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "is_accepted": true, "score": 2, "last_activity_date": 1576939099, "creation_date": 1576939099, "answer_id": 59437060, "question_id": 59436105, "link": "https://stackoverflow.com/questions/59436105/access-nested-model-attributes/59437060#59437060", "title": "Access nested model attributes", "body": "<p>First, don't use <code>:units</code> as the association name, it \"has one unit\" no \"units\", Rails convention over configuration expects the association to be singular.</p>\n\n<p>Then you should be able to do <code>some_emp.unit.name</code>.</p>\n\n<p>Or you can use method delegation:</p>\n\n<pre><code>class Emp &lt; ApplicationRecord\n  has_one :unit\n\n  delegate :name, to: :unit\nend\n</code></pre>\n\n<p>And now you can do <code>some_emp.name</code>.</p>\n"}], "owner": {"reputation": 103, "user_id": 2129796, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/MrPTg.jpg?s=128&g=1", "display_name": "MajQel", "link": "https://stackoverflow.com/users/2129796/majqel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 59437060, "answer_count": 1, "score": 0, "last_activity_date": 1576939099, "creation_date": 1576930591, "last_edit_date": 1576932167, "question_id": 59436105, "link": "https://stackoverflow.com/questions/59436105/access-nested-model-attributes", "title": "Access nested model attributes", "body": "<p>I have following setup:</p>\n\n<pre><code>class EmpsController &lt; ApplicationController\n  def new\n    @emp = Emp.new\n    @unit_options = Unit.all.collect{|unit| [unit.name, unit.id] }\n  end\n\n  def create\n    @emp = Emp.new(emp_params)\n    @emp.save!\n    redirect_to :action =&gt; :list\n  end\n\n  def destroy\n    @emp = Emp.find([:id])\n    @emp.destroy\n    redirect_to :action =&gt; :list\n  end\n\n  def list\n    @emps = Emp.all\n  end\n\n  def emp_params\n    params.require(:emp).permit(:name, :unit_id)\n  end\n\n end\n</code></pre>\n\n<p>Model:</p>\n\n<pre><code>class Emp &lt; ApplicationRecord\n    has_one :units\n    accepts_nested_attributes_for :units\nend\n</code></pre>\n\n<p>Form:</p>\n\n<pre><code>&lt;p&gt; List of Employees: &lt;/p&gt;\n&lt;table&gt;\n&lt;% @emps.each do |u| %&gt;\n\n    &lt;tr&gt;\n&lt;td&gt;&lt;%= u.id %&gt;&lt;/td&gt; &lt;td&gt;&lt;%= u.name %&gt;&lt;/td&gt;  &lt;td&gt;&lt;%= u.unit_id %&gt;&lt;/td&gt;   &lt;td&gt;&lt;%= link_to \"Delete\", u, :method =&gt; :delete %&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;% end %&gt; \n&lt;/table&gt;\n</code></pre>\n\n<p>All I want to do is to print (in table above) unit attribute called :name related with Emp printed Emp object.</p>\n\n<p>Found various related solution but they do not apply to my case.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "discourse", "actionpack"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1576919633, "post_id": 59434847, "comment_id": 105054708, "body": "Depends on your <code>action_on_unpermitted_parameters</code> configuration."}], "answers": [{"tags": [], "owner": {"reputation": 8462, "user_id": 405865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e29f04f339715955060858e0e65e1311?s=128&d=identicon&r=PG", "display_name": "fphilipe", "link": "https://stackoverflow.com/users/405865/fphilipe"}, "is_accepted": true, "score": 6, "last_activity_date": 1576924847, "last_edit_date": 1576924847, "creation_date": 1576921162, "answer_id": 59435094, "question_id": 59434847, "link": "https://stackoverflow.com/questions/59434847/rails-what-does-calling-actioncontrollerparameterspermit-achieve-when-not/59435094#59435094", "title": "Rails: What does calling ActionController::Parameters#permit() achieve when not using the object returned by it?", "body": "<p>This does look confusing, I agree.</p>\n\n<p>Judging from the implementation of <a href=\"https://github.com/rails/rails/blob/f33d52c95217212cbacc8d5e44b5a8e3cdc6f5b3/actionpack/lib/action_controller/metal/strong_parameters.rb#L543-L558\" rel=\"noreferrer\"><code>#permit</code></a> and the documentation of <a href=\"https://api.rubyonrails.org/classes/ActionController/Parameters.html\" rel=\"noreferrer\"><code>ActionController::Params</code></a>, this can behave differently depending on the config <code>action_on_unpermitted_parameters</code>, which accepts <code>:log</code> and <code>:raise</code> as values and is <code>nil</code> by default.</p>\n\n<p><strong>When <code>action_on_unpermitted_parameters = nil</code>:</strong></p>\n\n<p>Calling <code>params.permit(:foo)</code> will return a new <code>ActionController::Parameters</code> instance marked as permitted with just that key.</p>\n\n<p>If you're not using the return value, this call makes little sense as there's no side effect. The receiver is not mutated.</p>\n\n<p><strong>When <code>action_on_unpermitted_parameters = :log</code>:</strong></p>\n\n<p>This behaves the same as above, but has the side effect of logging all not permitted keys:</p>\n\n<pre><code>irb&gt; ActionController::Parameters.action_on_unpermitted_parameters = :log\n=&gt; :log\nirb&gt; params = ActionController::Parameters.new(username: 'john', offset: 5, bogus: 'foo')\n=&gt; &lt;ActionController::Parameters {\"username\"=&gt;\"john\", \"offset\"=&gt;5, \"bogus\"=&gt;\"foo\"} permitted: false&gt;\nirb&gt; params.require(:username)\n=&gt; \"john\"\nirb&gt; params.permit(:offset)\nUnpermitted parameters: :username, :bogus\n=&gt; &lt;ActionController::Parameters {\"offset\"=&gt;5} permitted: true&gt;\nirb&gt; params.permit(:limit)\nUnpermitted parameters: :username, :offset, :bogus\n=&gt; &lt;ActionController::Parameters {} permitted: true&gt;\n</code></pre>\n\n<p>As you can see, for each <code>permit</code> call, you'd get different logs. Thus, this would only make sense if the code in that controller would include all permitted (and required) parameters:</p>\n\n<pre><code>irb&gt; params.permit(:username, :offset, :limit)\nUnpermitted parameter: :bogus\n=&gt; &lt;ActionController::Parameters {\"username\"=&gt;\"john\", \"offset\"=&gt;5} permitted: true&gt;\n</code></pre>\n\n<p><strong>When <code>action_on_unpermitted_parameters = :raise</code>:</strong></p>\n\n<p>The effect here is that it raises when the params contain keys that are not allowed. Similar to <code>:log</code>, this also only would make sense when all permitted (and required) keys are specified:</p>\n\n<pre><code>irb&gt; ActionController::Parameters.action_on_unpermitted_parameters = :raise\n=&gt; :raise\nirb&gt; params = ActionController::Parameters.new(username: 'john', offset: 5, bogus: 'foo')\n=&gt; &lt;ActionController::Parameters {\"username\"=&gt;\"john\", \"offset\"=&gt;5, \"bogus\"=&gt;\"foo\"} permitted: false&gt;\nirb&gt; params.require(:username)\n=&gt; \"john\"\nirb&gt; params.permit(:offset)\nTraceback (most recent call last):\n        1: from (irb):19\nActionController::UnpermittedParameters (found unpermitted parameters: :username, :bogus)\nirb&gt; params.permit(:limit)\nTraceback (most recent call last):\n        2: from (irb):20\n        1: from (irb):20:in `rescue in irb_binding'\nActionController::UnpermittedParameters (found unpermitted parameters: :username, :offset, :bogus)\n</code></pre>\n\n<p>Contrast that to including all keys:</p>\n\n<pre><code>irb&gt; params.permit(:username, :offset, :limit)\nTraceback (most recent call last):\n        2: from (irb):21\n        1: from (irb):21:in `rescue in irb_binding'\nActionController::UnpermittedParameters (found unpermitted parameter: :bogus)\n</code></pre>\n\n<hr>\n\n<p>Having said that, I couldn't find any occurrence of <code>action_on_unpermitted_parameters</code> in Discourse's codebase. Thus, the value is <code>nil</code> and therefore I conclude that <code>#permit</code> in that controller action has no effect in terms of functionality.</p>\n\n<p>It could be there as a <strong>convention serving as documentation</strong> where first all required parameters are listed and then all optional ones.</p>\n\n<p>Digging deeper, these <code>#permit</code> calls were introduced in this <a href=\"https://github.com/discourse/discourse/commit/661ddbb15821a6cbb6b0fd30b31d76ed728b60c0\" rel=\"noreferrer\">commit</a> when it was still a separate gem called <em>strong_parameters</em>. The behavior of <code>#permit</code> in that gem was the same as today. This makes me think that the author of that commit misunderstood the API of <em>strong_parameters</em>.</p>\n"}], "owner": {"reputation": 21669, "user_id": 362006, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JlgWv.jpg?s=128&g=1", "display_name": "Salman von Abbas", "link": "https://stackoverflow.com/users/362006/salman-von-abbas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "accepted_answer_id": 59435094, "answer_count": 1, "score": 3, "last_activity_date": 1576924847, "creation_date": 1576918603, "last_edit_date": 1576919302, "question_id": 59434847, "link": "https://stackoverflow.com/questions/59434847/rails-what-does-calling-actioncontrollerparameterspermit-achieve-when-not", "title": "Rails: What does calling ActionController::Parameters#permit() achieve when not using the object returned by it?", "body": "<p><a href=\"https://api.rubyonrails.org/classes/ActionController/Parameters.html#method-i-permit\" rel=\"nofollow noreferrer\">I understand</a> that calling <code>params.permit(:foo)</code> creates a new <code>ActionController::Parameters</code> instance with <code>:foo</code> whitelisted so that you can instantiate a model with it. But why does the following code in the Discourse CMS call it without using its return value?</p>\n\n<p><code>discourse/app/controllers/drafts_controller.rb</code>: <a href=\"https://github.com/discourse/discourse/blob/master/app/controllers/drafts_controller.rb#L10\" rel=\"nofollow noreferrer\">Github</a></p>\n\n<pre><code>class DraftsController &lt; ApplicationController\n  # [...]\n\n  def index\n    # [...]\n    params.permit(:offset)\n    params.permit(:limit)\n\n    # [...]\n\n    opts = {\n        # [...]\n        offset: params[:offset],\n        limit: params[:limit]\n    }\n\n    stream = Draft.stream(opts)\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1576944672, "post_id": 59432566, "comment_id": 105059602, "body": "If you just want to wait a little longer for the element to appear, you can pass <code>wait</code>, e.g. <code>find(selector_type, selector, wait: 15)</code>. It waits for up to 15 seconds."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1576944943, "post_id": 59432566, "comment_id": 105059658, "body": "And regarding your question: instead of calling the method recursively, you could also re-run a failing <code>begin-rescue-end</code> block via <code>retry</code>. This would also allow to handle the <code>wait</code> variable entirely within the method, thus hiding it from the caller."}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 3, "last_activity_date": 1576905145, "creation_date": 1576905145, "answer_id": 59433652, "question_id": 59432566, "link": "https://stackoverflow.com/questions/59432566/ruby-recursive-method-with-block/59433652#59433652", "title": "Ruby recursive method with block", "body": "<p>Capture the block and pass it to the subsequent calls directly.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def find_or_wait_for(*args, &amp;cb)\n  yield if block_given?\n  # do something\nrescue Capybara::ElementNotFound\n  find_or_wait_for(*args, &amp;cb)\n  raise\nend\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 6069658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f84aa4457ebfe871a6b2f6a40b3d1f9b?s=128&d=identicon&r=PG&f=1", "display_name": "tksask", "link": "https://stackoverflow.com/users/6069658/tksask"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1576905145, "creation_date": 1576887049, "question_id": 59432566, "link": "https://stackoverflow.com/questions/59432566/ruby-recursive-method-with-block", "title": "Ruby recursive method with block", "body": "<p>Any ideas why this doesn't work?</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def find_or_wait_for(selector_type, selector, wait = 0)\n  sleep(wait) if wait.positive?\n  yield if block_given?\n  find(selector_type, selector)\nrescue Capybara::ElementNotFound\n  find_or_wait_for(selector_type, selector, wait + 1) { yield if block_given? } if wait &lt; 5\n\n  raise\nend\n</code></pre>\n\n<p>Expected result: same initial block being executed every time the method is called.</p>\n\n<p>Actual result: it executes the block only the first time, it seems like the block is 'lost' inside de rescue.</p>\n"}, {"tags": ["ruby", "directory", "working-directory"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 1, "creation_date": 1576884627, "post_id": 59431901, "comment_id": 105050448, "body": "Are you sure you&#39;re not making a typo? What if you go into the command prompt and type <code>cd C:\\Users\\jane\\Developer\\C</code>? <code>Dir.chdir</code> should work just like <code>cd</code> in your command prompt."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 1, "creation_date": 1576962237, "post_id": 59431901, "comment_id": 105063329, "body": "As mentioned by @Casper, it shouldn&#39;t be a problem if the folder exists <i>and</i> you&#39;re allowed to access it as <code>john</code>. You could try it step by step : <code>ruby -e &quot;p Dir[&#39;C:&#47;*&#39;]&quot;</code>, then <code>ruby -e &quot;p Dir[&#39;C:&#47;Users&#47;*&#39;]&quot;</code> and so on. My guess is that <code>ruby -e &quot;p Dir[&#39;C:&#47;Users&#47;jane&#47;*&#39;]&quot;</code> will return an empty list because you&#39;re not allowed to access anything inside."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1576965820, "post_id": 59431901, "comment_id": 105063936, "body": "It looks like you&#39;re misunderstanding Dir and <code>chdir</code>&#39;s purpose: Dir is a way to get the files and directories in the path you tell it; It won&#39;t execute, it just returns paths to those resources. <code>chdir</code> changes the directory and with a block lets you run code in the block in the new working directory. It&#39;s always your job to figure out what your current working directory is, and how to reference a running script elsewhere. Ruby&#39;s <a href=\"https://ruby-doc.org/core-2.6.5/File.html\" rel=\"nofollow noreferrer\">File</a> class has &quot;<code>*path</code>&quot; methods to help you do figure out full paths and makes this stuff easier."}], "owner": {"reputation": 1, "user_id": 7886151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b69ac98e3cc82d36d1879141cd47755?s=128&d=identicon&r=PG&f=1", "display_name": "user7886151", "link": "https://stackoverflow.com/users/7886151/user7886151"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1576965238, "creation_date": 1576880192, "last_edit_date": 1576965238, "question_id": 59431901, "link": "https://stackoverflow.com/questions/59431901/how-to-use-dir-to-reference-directories-outside-the-working-directory", "title": "How to use `Dir` to reference directories outside the working directory", "body": "<p>The closest issue I could find on Stack Overflow was \"<a href=\"https://stackoverflow.com/questions/25818446/path-outside-of-project-ruby-dir\">Path outside of project, Ruby Dir</a>\", but the user appears to have been in the wrong development environment.  </p>\n\n<p>My issue is that the <code>Dir</code> class only gives information relative to the working directory.  For instance, if I'm in <code>C:/Users/john/Developer</code> and this directory only has two subdirectories <code>A</code> and <code>B</code> then</p>\n\n<pre><code>$ ruby -e \"p Dir['*']\"\n</code></pre>\n\n<p>will return <code>[\"A\", \"B\"]</code>.  This seems intended, but what if there is a directory <code>C:/Users/jane/Developer/C</code> that I need to run a command in using a script in <code>C:/Users/john/Developer</code>?</p>\n\n<p>Running</p>\n\n<pre><code>Dir.chdir('C:/Users/jane/Developer/C') { %x[lerna clean] }\n</code></pre>\n\n<p>returns the error:</p>\n\n<pre><code>-e:1:in `chdir': No such file or directory @ dir_s_chdir - C:/Users/jane/Developer/C (Errno::ENOENT)\n        from -e:1:in `&lt;main&gt;'\n</code></pre>\n\n<p>Is there a way to access directories outside of the working directory using the <code>Dir</code> class?  It seems absurd to have to require scripts to be written at a root level.</p>\n\n<p>Note, using <code>%x[]</code> to run the command in <code>C:/Users/jane/Developer/C</code> also doesn't seem to work.  </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1576875111, "post_id": 59431162, "comment_id": 105048341, "body": "Why not patch the object? It&#39;s how this type of instrumentation is usually done. This, or decorators (but decorating an object will generate a new object, which may not be what you want)."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1576875165, "post_id": 59431162, "comment_id": 105048360, "body": "Calling <code>watch(lionel)</code> actually calls the method, you may want: <code>watch(:lionel, ...)</code> which will direct it to manipulate that method by redefining it and aliasing it."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1576875574, "post_id": 59431162, "comment_id": 105048466, "body": "@tadman: <code>lionel</code> is a local var, though."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1576875676, "post_id": 59431162, "comment_id": 105048494, "body": "@SergioTulentsev Oh, in that case this really isn&#39;t practical. You can&#39;t wrap on a reference to a variable without some dark magic."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1576875745, "post_id": 59431162, "comment_id": 105048518, "body": "@tadman: I&#39;d use some MP magic, yes. But Mike has devised a tracepoint-based solution, patchless. With its own drawbacks."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1576875986, "post_id": 59431162, "comment_id": 105048588, "body": "Instinctively I&#39;d think something like <code>lionel = watch(lionel, ...)</code> is preferable to this more <i>magical</i> approach. When the variable falls out of scope, so will the watcher and there&#39;s no GC issues."}, {"owner": {"reputation": 71, "user_id": 4913984, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-CLTC233ZRxI/AAAAAAAAAAI/AAAAAAAAFPA/PkEMa48uX8o/photo.jpg?sz=128", "display_name": "Mike O&#39;Sullivan", "link": "https://stackoverflow.com/users/4913984/mike-osullivan"}, "edited": false, "score": 0, "creation_date": 1576876711, "post_id": 59431162, "comment_id": 105048756, "body": "Without getting into too much detail right now, I&#39;m developing a new object oriented paradigm called XT classes. The idea is that you can add properties, methods, and events to any object without modifying the object itself. You can even do that to core objects like strings and integers. The objects retain their XT classes even when the variables that hold them go out of scope. But for my concept to work, people need to be clear that their objects themselves are not changing at all."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1576931141, "post_id": 59431162, "comment_id": 105056752, "body": "I see what appears to be working code, and interesting comments. Is this a question on how to refactor or improve your code?  Can anyone giving comments provide actual answer examples if you have any?"}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 4913984, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-CLTC233ZRxI/AAAAAAAAAAI/AAAAAAAAFPA/PkEMa48uX8o/photo.jpg?sz=128", "display_name": "Mike O&#39;Sullivan", "link": "https://stackoverflow.com/users/4913984/mike-osullivan"}, "edited": false, "score": 0, "creation_date": 1577717052, "post_id": 59457155, "comment_id": 105234762, "body": "Very interesting! It&#39;s not quite what I wanted but it&#39;s very close. It would probably work for now. Thanks!"}], "tags": [], "owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "is_accepted": false, "score": 0, "last_activity_date": 1577112280, "creation_date": 1577112280, "answer_id": 59457155, "question_id": 59431162, "link": "https://stackoverflow.com/questions/59431162/before-and-after-event-handlers-in-ruby/59457155#59457155", "title": "Before and after event handlers in Ruby", "body": "<p>Here is a solution making use of the singleton class for the object you want to watch.  I am not sure it's <em>good</em> solution, but it might be at least <em>interesting</em>.</p>\n\n<p>The watch method takes, and object, a method name, and an order parameter along with a block.  The order parameter specifies when you want to run the block, ie before, after or around the watched method.</p>\n\n<p>The watch method saves the original instance method, then defines a singleton method with the same name as the original method on the object. The singleton method calls the passed block at the time or times specified by the order parameter. The singleton method also calls with the original instance method bound to the object at the appropriate time.</p>\n\n<p>Perhaps there is a better way to call an instance method from with in a singleton method, but I have not found one.  I am also not sure how this would work with various argument types, ie keyword args, etc.</p>\n\n<p>Here is the watch method.</p>\n\n<pre><code>def watch(obj,method_name,order,&amp;block)\n    inst_method = obj.class.instance_method(method_name)\n    obj.define_singleton_method(method_name) do |*args|\n        block.call if [:before,:around].include?(order)\n        inst_method.bind(self).call(*args) \n        block.call if [:after,:around].include?(order)\n    end    \nend\n</code></pre>\n\n<p>Usage examples:</p>\n\n<pre><code>class Foo \n    def initialize(type)\n        @type = type\n    end\n\n    def i_method(arg)\n        puts \"#{@type} instance method called with arg = #{arg}\"\n    end\nend\n\nwatched_inst = Foo.new(\"watched\")\nunwatched_inst = Foo.new(\"unwatched\") \n\nwatch(watched_inst,:i_method,:before) do \n   puts \"do before\"\nend\n\nwatched_inst.i_method(\"foo\")\nunwatched_inst.i_method(\"bar\")\nwatched_inst.i_method(\"foo_bar\")\n\nwatch(watched_inst,:i_method,:after) do \n   puts \"do after\"\nend\n\nwatched_inst.i_method(\"hello\")\n\nwatch(watched_inst,:i_method,:around) do \n   puts \"do around\"\nend\n\nwatched_inst.i_method(\"hello\")\n\nunwatched_inst.i_method(\"foo\")\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>do before\nwatched instance method called with arg = foo\nunwatched instance method called with arg = bar\ndo before\nwatched instance method called with arg = foo_bar\nwatched instance method called with arg = hello\ndo after\ndo around\nwatched instance method called with arg = hello\ndo around\nunwatched instance method called with arg = foo\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 4913984, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-CLTC233ZRxI/AAAAAAAAAAI/AAAAAAAAFPA/PkEMa48uX8o/photo.jpg?sz=128", "display_name": "Mike O&#39;Sullivan", "link": "https://stackoverflow.com/users/4913984/mike-osullivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577112280, "creation_date": 1576874795, "question_id": 59431162, "link": "https://stackoverflow.com/questions/59431162/before-and-after-event-handlers-in-ruby", "title": "Before and after event handlers in Ruby", "body": "<p>Is there a way to watch objects so that a block or lamba is run before and/or after calls on specific methods for that object? For example, something like this:</p>\n\n<pre><code>watch(lionel, :say_you, :before) do\n    puts '[before say_you]'\nend\n\nlionel.say_you()\n# outputs [before say_you]\n</code></pre>\n\n<p>An important part of my requirement is that I don't want to monkey patch the object at all. There should be no changes to the object. I just want to watch it, not change it (Heisenberg would be proud).</p>\n\n<p>I've written a module that sort of does what I describe. Unfortunately, it has some bad side-effects: it slows down the system and never cleans up its hash of object ids. So I wouldn't use it in production, but it shows the concept of watching an object without monkey patching it.</p>\n\n<pre><code># watcher module\n# (Adrian is one of The Watchmen)\nmodule Adrian\n   @registry = {}\n   EVENT_IDS = {:before =&gt; :call, :after =&gt; :return}\n\n   # watch\n   def self.watch(obj, method, event_id, &amp;handler)\n      # get event type\n      event = EVENT_IDS[event_id]\n      event or raise 'unknown-event: unknown event param'\n\n      # get object id\n      obj_id = obj.object_id\n\n      # store handler\n      @registry[obj_id] ||= {}\n      @registry[obj_id][method] ||= {}\n      @registry[obj_id][method][event] ||= []\n      @registry[obj_id][method][event].push(handler)\n   end\n\n   # trace\n   TracePoint.trace(:call, :return) do |tp|\n      # get watched object or return\n      if handlers = @registry[tp.binding.receiver.object_id]\n         handle tp, handlers\n      end\n   end\n\n   # handle\n   def self.handle(tp, handlers)\n      # $tm.hrm\n\n      # if this method is watched\n      callee = handlers[tp.callee_id]\n      callee or return\n\n      # get blocks\n      blocks = callee[tp.event]\n      blocks or return\n\n      # loop through series\n      blocks.each do |block|\n         block.call\n      end\n   end\nend\n\n# Lionel class\nclass Lionel\n   def say_you\n      puts 'you'\n   end\n\n   def say_me\n      puts 'me'\n   end\nend\n\n# instance\nlionel = Lionel.new()\n\n# before\nAdrian.watch(lionel, :say_you, :before) do\n   puts '[before say_you]'\nend\n\n# after\nAdrian.watch(lionel, :say_me, :after) do\n   puts '[after say_me]'\nend\n\n# call method\nlionel.say_you\nlionel.say_me\n</code></pre>\n\n<p>That outputs:</p>\n\n<pre><code>[before say_you]\nyou\nme\n[after say_me]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "selenium", "automated-tests", "bdd"], "answers": [{"tags": [], "owner": {"reputation": 4422, "user_id": 1202525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccc5db30edf02524aa2a0fb17d154bf8?s=128&d=identicon&r=PG", "display_name": "TomDunning", "link": "https://stackoverflow.com/users/1202525/tomdunning"}, "is_accepted": false, "score": 0, "last_activity_date": 1576924080, "creation_date": 1576924080, "answer_id": 59435377, "question_id": 59430877, "link": "https://stackoverflow.com/questions/59430877/take-a-scenario-failure-screenshot/59435377#59435377", "title": "Take a scenario failure screenshot", "body": "<p>This should create a screenshot at the point of failure for you.      </p>\n\n<pre><code>  config.after(:each) do |example|\n    if example.exception\n      screenshot = \"log / screenshots / # {scenario.name} .png\"\n</code></pre>\n\n<p>page.save_screenshot (screenshot)\nembed (screenshot, 'image / png', 'Screen_Evidence')\n        end\n      end</p>\n\n<p>You will probably want to limit this just to feature tests and optionally you could try refactoring your existing screenshot code into this same function.</p>\n"}, {"tags": [], "owner": {"reputation": 55, "user_id": 9423417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e91f589ac8f9bb53c1f06d4d6c8bae97?s=128&d=identicon&r=PG&f=1", "display_name": "Kiran Reddy", "link": "https://stackoverflow.com/users/9423417/kiran-reddy"}, "is_accepted": false, "score": 0, "last_activity_date": 1579871965, "creation_date": 1579871965, "answer_id": 59897266, "question_id": 59430877, "link": "https://stackoverflow.com/questions/59430877/take-a-scenario-failure-screenshot/59897266#59897266", "title": "Take a scenario failure screenshot", "body": "<p>Try this way. </p>\n\n<pre><code>After do |scenario|\nif scenario.failed?\n    timestamp = \"#{Time.zone.now.strftime('%Y-%m-%d-%H:%M:%S')}\"\n    screenshot_name = \"screenshot-#{scenario.name}-#{timestamp}.png\"\n    screenshot_path = \"#{Rails.root.join(provide path to save screenshots)}/#{screenshot_name}\"\n    Capybara.page.save_screenshot(screenshot_path, full: true)\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 8358200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92f8ff434f46b74584c3595632c490e5?s=128&d=identicon&r=PG&f=1", "display_name": "Bueno", "link": "https://stackoverflow.com/users/8358200/bueno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1579873310, "creation_date": 1576872868, "last_edit_date": 1579873310, "question_id": 59430877, "link": "https://stackoverflow.com/questions/59430877/take-a-scenario-failure-screenshot", "title": "Take a scenario failure screenshot", "body": "<p>In my automated tests using Ruby / Capybara / Cucumber / Selenium, it is necessary that when some step of my test fails, the following steps will be performed:</p>\n\n<ul>\n<li>Take a browser screenshot</li>\n<li>Image of Stacktrace Taking Out</li>\n<li>Perform the next scenario.</li>\n</ul>\n\n<p>Know how to help me with this question?</p>\n\n<p>Today the system takes a screenshot as evidence of the success of the scenario, but now I would like to take a failure screenshot without disturbing the execution of all my tests, following the execution of the next step or scenario.</p>\n\n<p>Example code currently used as a hook for take screenshot:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>After do | scenario |\n  screenshot = \"log / screenshots / # {scenario.name} .png\"\n  page.save_screenshot (screenshot)\n  embed (screenshot, 'image / png', 'Screen_Evidence')\nend\n</code></pre>\n"}, {"tags": ["ruby", "oop"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1576966121, "post_id": 59430772, "comment_id": 105063991, "body": "Code, like a picture, is worth 10,000 words. &quot;<a href=\"https://meta.stackoverflow.com/questions/260648/stack-overflow-question-checklist\">Stack Overflow question checklist</a>&quot; is your friend. Show us the minimal code that demonstrates your question."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1576877015, "post_id": 59431148, "comment_id": 105048821, "body": "Since there is but one board you might speak to the option of having only class methods and class instance variables, and no instances of the class."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1576877277, "post_id": 59431148, "comment_id": 105048885, "body": "@CarySwoveland There&#39;s nothing wrong with only ever declaring one instance of a class. Having an instance gives you modularity and the <i>potential</i> to create more than one board, e.g. for testing."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1576880440, "post_id": 59431148, "comment_id": 105049646, "body": "btw, there is much truth to your, &quot;A modernized version of Takuan Soho&#39;s teachings&quot;. I recall experiencing that when I was learning real analysis. It was only when earlier concepts became embedded in my subconscious that I could make progress. One day the clouds parted, seemingly in an instant. Thereafter my brain seemed to automatically ran the embedding process whenever I learned new results. It was weird, but wonderful. I&#39;ve spoken to others who have had a similar experience."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 2, "last_activity_date": 1576959388, "last_edit_date": 1576959388, "creation_date": 1576874686, "answer_id": 59431148, "question_id": 59430772, "link": "https://stackoverflow.com/questions/59430772/when-and-when-not-to-use-the-initialize-method-in-ruby/59431148#59431148", "title": "When and when not to use the initialize method in ruby", "body": "<p>The <code>initialize</code> method is necessary for objects which require something to be done during the object's initialization, that's all. Some objects do not require initialization, for example:</p>\n\n<pre><code>class Dog\n  def woof\n    :arf\n  end\nend\n</code></pre>\n\n<p>However if you wanted to be able to customize how this dog could bark, you could give it an initializer:</p>\n\n<pre><code>class Dog\n  WOOF_DEFAULT = :arf\n\n  attr_reader :woof\n\n  def initialize(woof)\n    @woof = woof || WOOF_DEFAULT\n  end\nend\n</code></pre>\n\n<p>Now you can configure it during the initialization:</p>\n\n<pre><code>dog = Dog.new(:bork)\ndog.woof\n# =&gt; :bork\n</code></pre>\n\n<p>You don't always need <code>initialize</code>, but it is a useful tool for when you do.</p>\n\n<p>In the context of a board, presumably you need to create the board:</p>\n\n<pre><code>class Board\n  def initialize\n    # Create 9 cells, each of which is nil by default\n    @cells = Array.new(9, nil)\n  end\n\n  def move(x, y, side)\n    # Make a move in a cell if the cell is not occupied (||=)\n    @cells[x + y * 3] ||= side\n  end\n\n  def to_s\n    # Produces a string representation of the board state\n    @cells.map do |cell|\n      cell || ' '\n    end.each_slice(3).map do |row|\n      row.join(' | ')\n    end.join(\"\\n---------\\n\")\n  end\nend\n</code></pre>\n\n<p>Where now you have a board which you can use like this:</p>\n\n<pre><code>b = Board.new\n\nputs b\n#   |   |  \n# ---------\n#   |   |  \n# ---------\n#   |   |  \n\nputs\n\nb.move(0,1, 'X')\nb.move(1,0, 'O')\n\nputs b\n#   | O |  \n# ---------\n# X |   |  \n# ---------\n#   |   |  \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1576912409, "last_edit_date": 1576912409, "creation_date": 1576901327, "answer_id": 59433415, "question_id": 59430772, "link": "https://stackoverflow.com/questions/59430772/when-and-when-not-to-use-the-initialize-method-in-ruby/59433415#59433415", "title": "When and when not to use the initialize method in ruby", "body": "<p>You might consider creating two classes, <code>Board</code> and <code>Player</code>. Taking the later first, there will be two instances of <code>Player</code>, one the player marking <code>'X'</code>'s and the other the player marking <code>'O'</code>'s. The <code>Player</code> class has an <code>initialize</code> method whose function is to save the mark (<code>'X'</code> or <code>'O'</code>) the player (instance) will make. </p>\n\n<p>As there is only one board, we could create a single instance of <code>Board</code>, as @tadman has done. Another option--the one I've elected--is to construct the class <code>Board</code> with three class methods and one <em>class</em> instance variable (<code>@cells</code>), with no intention of creating a sole instance of the class.</p>\n\n<p>I don't think either approach to the class <code>Board</code> is preferred; I just want to make the point that when a class represents a single object that object can be the class itself as opposed to an instance of the class.</p>\n\n<p>You could construct these two classes as follows.</p>\n\n<pre><code>WINNERS = 3.times.with_object([]) do |i,a|\n   a &lt;&lt; [[i,0], [i,1], [i,2]] &lt;&lt; [[0,i], [1,i], [2,i]]\nend &lt;&lt; [[0,0], [1,1], [2,2]] &lt;&lt; [[0,2], [1,1],  c[2,0]]\n  #=&gt; [[[0, 0], [0, 1], [0, 2]], [[0, 0], [1, 0], [2, 0]],\n  #    [[1, 0], [1, 1], [1, 2]], [[0, 1], [1, 1], [2, 1]],\n  #    [[2, 0], [2, 1], [2, 2]], [[0, 2], [1, 2], [2, 2]],\n  #    [[0, 0], [1, 1], [2, 2]], [[0, 2], [1, 1], [2, 0]]] \n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>class Board\n  @cells = Array.new(3) { Array.new(3, ' ') }\n\n  def self.record_move(r,c,side)\n    @cells[r][c] = side\n  end\n\n  def self.win?(side)\n    WINNERS.any? { |a| a.all? { |r,c| @cells[r][c] == side } }\n  end\n\n  def self.show\n    3.times do |i|\n      puts \"%s|%s|%s\" % @cells[i]\n      puts \"_____\" unless i == 2\n    end\n  end                 \nend\n</code></pre>\n\n<p>See <a href=\"https://ruby-doc.org/core-2.6.3/Array.html#method-c-new\" rel=\"nofollow noreferrer\">Array::new</a>, <a href=\"https://ruby-doc.org/core-2.6.3/Enumerable.html#method-i-any-3F\" rel=\"nofollow noreferrer\">Enumerable#any?</a> and <a href=\"https://ruby-doc.org/core-2.6.3/Enumerable.html#method-i-all-3F\" rel=\"nofollow noreferrer\">Enumerable#all?</a>.</p>\n\n<pre><code>class Player\n  def initialize(side)\n    @side = side\n  end\n\n  def move(r,c)\n    Board.record_move(r,c,@side)\n  end\n\n  def win?\n    Board.win?(@side)\n  end\nend\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>x = Player.new('X')\n  #=&gt; #&lt;Player:0x000057c0e95c4430 @side=\"X\"&gt; \no = Player.new('O')\n  #=&gt; #&lt;Player:0x000057c0e95e3100 @side=\"O\"&gt; \n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>Board.show\n | | \n_____\n | | \n_____\n | | \n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>x.move 0,2\nBoard.show\n | |X\n_____\n | | \n_____\n | |\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>o.move 0,0\nBoard.show\nO| |X\n_____\n | | \n_____\n | | \n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>x.move 2,0\nBoard.show\nO| |X\n_____\n | | \n_____\nX| | \nx.win? #=&gt; false \n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>o.move 2,2\nBoard.show\nO| |X\n_____\n | | \n_____\nX| |O\no.win? #=&gt; false \n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>x.move 1,1\nBoard.show\nO| |X\n_____\n |X| \n_____\nX| |O\nx.win? #=&gt; true \n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 12127899, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1IOq7U77Q0Q/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcUmWPorTVjMY_EYD7tpjjCc4Pnkg/photo.jpg?sz=128", "display_name": "nimpa", "link": "https://stackoverflow.com/users/12127899/nimpa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 59431148, "answer_count": 2, "score": 1, "last_activity_date": 1576959388, "creation_date": 1576872254, "question_id": 59430772, "link": "https://stackoverflow.com/questions/59430772/when-and-when-not-to-use-the-initialize-method-in-ruby", "title": "When and when not to use the initialize method in ruby", "body": "<p>I am confused on the initialize method in ruby. I am learning OOP and trying to make a tic-tac-toe game in ruby using OOP. I want to know when to use the initialize method and when not to.</p>\n\n<p>Is it only when i want to make a new object? for example in tic-tac-toe to make the board i would have to do board.new for that i would have to initialize board.</p>\n\n<p>But, lets say i put the method to win would that method need to be initialized even if i do not need to make any objects?</p>\n\n<p>Or is it that I have to initlaize for every new class i make like class board or class player or class win</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 4422, "user_id": 1202525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccc5db30edf02524aa2a0fb17d154bf8?s=128&d=identicon&r=PG", "display_name": "TomDunning", "link": "https://stackoverflow.com/users/1202525/tomdunning"}, "edited": false, "score": 0, "creation_date": 1576924228, "post_id": 59430388, "comment_id": 105055471, "body": "What do you mean by ComboBox? You\u2019ve defined that EMP belongs to one Unit so why not just use a select box?"}, {"owner": {"reputation": 103, "user_id": 2129796, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/MrPTg.jpg?s=128&g=1", "display_name": "MajQel", "link": "https://stackoverflow.com/users/2129796/majqel"}, "reply_to_user": {"reputation": 4422, "user_id": 1202525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccc5db30edf02524aa2a0fb17d154bf8?s=128&d=identicon&r=PG", "display_name": "TomDunning", "link": "https://stackoverflow.com/users/1202525/tomdunning"}, "edited": false, "score": 0, "creation_date": 1576924576, "post_id": 59430388, "comment_id": 105055544, "body": "&lt;select&gt;   &lt;option value=&quot;volvo&quot;&gt;Volvo&lt;/option&gt;   &lt;option value=&quot;saab&quot;&gt;Saab&lt;/option&gt;   &lt;option value=&quot;vw&quot;&gt;VW&lt;/option&gt;   &lt;option value=&quot;audi&quot; selected&gt;Audi&lt;/option&gt; &lt;/select&gt;"}, {"owner": {"reputation": 103, "user_id": 2129796, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/MrPTg.jpg?s=128&g=1", "display_name": "MajQel", "link": "https://stackoverflow.com/users/2129796/majqel"}, "reply_to_user": {"reputation": 4422, "user_id": 1202525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccc5db30edf02524aa2a0fb17d154bf8?s=128&d=identicon&r=PG", "display_name": "TomDunning", "link": "https://stackoverflow.com/users/1202525/tomdunning"}, "edited": false, "score": 0, "creation_date": 1576924609, "post_id": 59430388, "comment_id": 105055551, "body": "I was previously programming in C# so there it was called combobox"}, {"owner": {"reputation": 4422, "user_id": 1202525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccc5db30edf02524aa2a0fb17d154bf8?s=128&d=identicon&r=PG", "display_name": "TomDunning", "link": "https://stackoverflow.com/users/1202525/tomdunning"}, "edited": false, "score": 0, "creation_date": 1576924715, "post_id": 59430388, "comment_id": 105055567, "body": "Gotcha, answer coming up"}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 2129796, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/MrPTg.jpg?s=128&g=1", "display_name": "MajQel", "link": "https://stackoverflow.com/users/2129796/majqel"}, "edited": false, "score": 0, "creation_date": 1576926909, "post_id": 59435527, "comment_id": 105055938, "body": "Indeed that kinda did the trick. Thanks. Altough now I am experiencing some different issue it doesn&#39;t seem to save in DB. altough there is no error."}, {"owner": {"reputation": 103, "user_id": 2129796, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/MrPTg.jpg?s=128&g=1", "display_name": "MajQel", "link": "https://stackoverflow.com/users/2129796/majqel"}, "edited": false, "score": 0, "creation_date": 1576927383, "post_id": 59435527, "comment_id": 105056010, "body": "Could you please take a look? I provided full controller definition"}, {"owner": {"reputation": 103, "user_id": 2129796, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/MrPTg.jpg?s=128&g=1", "display_name": "MajQel", "link": "https://stackoverflow.com/users/2129796/majqel"}, "edited": false, "score": 0, "creation_date": 1576927994, "post_id": 59435527, "comment_id": 105056114, "body": "Nevermind ... It was wrong association (had to use has_one) Big thanks for solution and merry christmass ;)"}], "tags": [], "owner": {"reputation": 4422, "user_id": 1202525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccc5db30edf02524aa2a0fb17d154bf8?s=128&d=identicon&r=PG", "display_name": "TomDunning", "link": "https://stackoverflow.com/users/1202525/tomdunning"}, "is_accepted": true, "score": 1, "last_activity_date": 1576925507, "creation_date": 1576925507, "answer_id": 59435527, "question_id": 59430388, "link": "https://stackoverflow.com/questions/59430388/option-select-with-reference/59435527#59435527", "title": "Option select with reference", "body": "<p>You want to use a <a href=\"https://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/select\" rel=\"nofollow noreferrer\">select tag</a>. </p>\n\n<p>In your controller:</p>\n\n<pre><code>@unit_options = Unit.all.collect{|unit| [unit.name, unit.id] }\n</code></pre>\n\n<p>This creates a list of names and IDs, the order of each is name then value for the select option. You can of course scope or filter the results as needed.</p>\n\n<p>In your view:</p>\n\n<pre><code>&lt;%= form_with model: @emp do |f| %&gt;\n  &lt;div&gt;\n    &lt;%= f.label :name %&gt;\n    &lt;%= f.text_field :name %&gt;\n  &lt;/div&gt;\n  &lt;div&gt;\n    &lt;%= f.label :unit_id, 'Unit' %&gt;\n    &lt;%= f.select :unit_id, @unit_options, {include_blank: true} %&gt;\n  &lt;/div&gt;\n  &lt;%= f.submit \"Create\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>When used to edit the model, rails will select the option for the current value.</p>\n"}], "owner": {"reputation": 103, "user_id": 2129796, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/MrPTg.jpg?s=128&g=1", "display_name": "MajQel", "link": "https://stackoverflow.com/users/2129796/majqel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 59435527, "answer_count": 1, "score": 0, "last_activity_date": 1576927348, "creation_date": 1576869829, "last_edit_date": 1576927348, "question_id": 59430388, "link": "https://stackoverflow.com/questions/59430388/option-select-with-reference", "title": "Option select with reference", "body": "<p>I have 2 Models: Unit and Emp\nAlso I have 2 controllers: Units and Emps</p>\n\n<pre><code>class CreateEmps &lt; ActiveRecord::Migration[6.0]\n  def change\n    create_table :emps do |t|\n      t.string :name\n      t.references :unit\n\n      t.timestamps\n    end\n  end\nend\n\nclass CreateUnits &lt; ActiveRecord::Migration[6.0]\n  def change\n    create_table :units do |t|\n      t.string :name\n\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>Looks simple.... but I guess too simple. I haven't found example how to do the following:</p>\n\n<p>I need to have form for Emp creation.</p>\n\n<p>So my question is .... how should it look like?</p>\n\n<p>I want to have ComboBox with list of all objects in Units.</p>\n\n<pre><code>&lt;%= form_with model: @emp do |f| %&gt;\n&lt;p&gt;&lt;%= f.label :name %&gt;\n    &lt;%= f.text_field :name %&gt; &lt;/p&gt;\n&lt;!-- What should go here? to ComboBox (option-&gt;select) --&gt;\n    &lt;%= f.submit \"Create\" %&gt;\n    &lt;% end %&gt;\n</code></pre>\n\n<p>I am also confused how should it look like regargding emp_params for permiting.</p>\n\n<p>EDIT:</p>\n\n<pre><code>class EmpsController &lt; ApplicationController\n  def new\n    @emp = Emp.new\n    @unit_options = Unit.all.collect{|unit| [unit.name, unit.id] }\n  end\n\n  def create\n    @emp = Emp.new(emp_params)\n    @emp.save\n    redirect_to :action =&gt; :list\n  end\n\n  def destroy\n    @emp = Emp.find([:id])\n    @emp.destroy\n    redirect_to :action =&gt; :list\n  end\n\n  def list\n    @emps = Emp.all\n  end\n\n  def emp_params\n    params.require(:emp).permit(:name, :unit_id)\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 12274081, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0Sb30wxuTys/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc-hHDKdk2bthA8tdaQ1vGtEA5RrQ/photo.jpg?sz=128", "display_name": "SsPay", "link": "https://stackoverflow.com/users/12274081/sspay"}, "edited": false, "score": 0, "creation_date": 1576868861, "post_id": 59430122, "comment_id": 105046283, "body": "And what should I change in my form so that method create also works? :)"}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 1, "last_activity_date": 1576869224, "last_edit_date": 1576869224, "creation_date": 1576868160, "answer_id": 59430122, "question_id": 59430074, "link": "https://stackoverflow.com/questions/59430074/undefined-method-for-backoffice-controller/59430122#59430122", "title": "Undefined method for backoffice controller", "body": "<p>If you look at the generated HTML, you will find that:</p>\n\n<pre><code>&lt;%= link_to (fa_icon \"trash\"), product,  method: :delete, data: { confirm: 'Are you sure?' }, class: \"pull-right btn btn-outline-danger\" %&gt;\n</code></pre>\n\n<p>...resolves to the <code>ProductsController</code> (something like <code>products/1</code>), not the <code>Backoffice::ProductsController</code> (something like <code>backoffice/products/1</code>). You'll probably want to do something more like: </p>\n\n<pre><code>&lt;%= link_to (fa_icon \"trash\"), admin_product_path(product),  method: :delete, data: { confirm: 'Are you sure?' }, class: \"pull-right btn btn-outline-danger\" %&gt;\n</code></pre>\n\n<p>In your form, you'll want to do something like: </p>\n\n<pre><code>&lt;%= form_with(model: product, local: true, url: admin_products_path) do |form| %&gt;\n</code></pre>\n\n<p>You may or may not need to fiddle with that <code>url</code> bit. See <a href=\"https://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_with\" rel=\"nofollow noreferrer\">the docs</a>.</p>\n"}], "owner": {"reputation": 93, "user_id": 12274081, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0Sb30wxuTys/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc-hHDKdk2bthA8tdaQ1vGtEA5RrQ/photo.jpg?sz=128", "display_name": "SsPay", "link": "https://stackoverflow.com/users/12274081/sspay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 59430122, "answer_count": 1, "score": 0, "last_activity_date": 1576869224, "creation_date": 1576867885, "last_edit_date": 1576868876, "question_id": 59430074, "link": "https://stackoverflow.com/questions/59430074/undefined-method-for-backoffice-controller", "title": "Undefined method for backoffice controller", "body": "<p>I have products and 2 controllers associated with them.\nIn one (products_controller.rb) there are only index and show methods.\nThe other (backoffice / products_controller.rb) has all the CRUD methods.\nAnd when I want to use the create or destroy methods in backoffice / products_controller.rb I get an error that these methods are not available in products_controller.rb.\nMethods index and show work correctly.</p>\n\n<p>For example, how I use the Destroy method in backoffice/products_controller</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>  def destroy\n    @post.destroy\n    respond_to do |format|\n      format.js { render 'destroy', status: :destroy, location: @product }\n      format.html { redirect_to admin_products_path, notice: 'Product was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n</code></pre>\n\n<p>And how i call this method (views/backoffice/product):</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>&lt;%= link_to (fa_icon \"trash\"), product,  method: :delete, data: { confirm: 'Are you sure?' }, class: \"pull-right btn btn-outline-danger\" %&gt;\n</code></pre>\n\n<p>error - <code>The action 'destroy' could not be found for ProductsController</code></p>\n\n<p>routes:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>  scope '/admin' do\n    resources :categories, controller: 'backoffice/categories', as: \"admin_categories\"\n    resources :products, controller: 'backoffice/products', as: \"admin_products\"\n  end\n</code></pre>\n\n<p><strong>UPD</strong>\nform:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>&lt;div class=\"container main\"&gt;\n\n  &lt;%= form_with(model: product, local: true) do |form| %&gt;\n\n  &lt;div class=\"field\"&gt;\n  &lt;%= form.collection_select(:category_id, Category.all, :id, :title, class:'form-control' ) %&gt;\n&lt;/div&gt;\n\n  &lt;div class=\"field\"&gt;\n      &lt;%= form.label :title %&gt;\n      &lt;%= form.text_field :title, class: \"form-control\"%&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= form.label :description %&gt;\n    &lt;%= form.text_area :description, class: \"form-control\"%&gt;\n  &lt;/div&gt;\n  &lt;br&gt;\n  &lt;div class=\"text-center actions\"&gt;\n    &lt;%= form.submit 'Submit', class: \"btn btn-dark\" %&gt;\n  &lt;/div&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 592, "user_id": 1278383, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/693a87bdb834c2948559bc7871046f03?s=128&d=identicon&r=PG", "display_name": "Vecchia Spugna", "link": "https://stackoverflow.com/users/1278383/vecchia-spugna"}, "edited": false, "score": 0, "creation_date": 1576924601, "post_id": 59429639, "comment_id": 105055548, "body": "It happened to me in the past with Docker, and I solved by removing the volume I was storing the gems in. So I suggest trying to empty out the gems folder so they will be freshly re-installed. To know where they are located run <code>gem env</code>"}, {"owner": {"reputation": 112, "user_id": 3151023, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ttDtF.jpg?s=128&g=1", "display_name": "Romanch Sharma", "link": "https://stackoverflow.com/users/3151023/romanch-sharma"}, "edited": false, "score": 0, "creation_date": 1576995637, "post_id": 59429639, "comment_id": 105067576, "body": "Try creating a separate gemset for this project and reinstall all gems. See if it gives any errors then."}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 12209868, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-C8mfZmKItDA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reU_1-VY_MGGcodDclRAXdqNpl6IQ/photo.jpg?sz=128", "display_name": "Franck Robin", "link": "https://stackoverflow.com/users/12209868/franck-robin"}, "edited": false, "score": 0, "creation_date": 1576926566, "post_id": 59430421, "comment_id": 105055880, "body": "i am on Ubuntu so i tried : <code>sudo apt update</code> and <code>sudo apt install postgresql</code> but i already had postgresql installed and it didn&#39;t fix my problem. I can&#39;t <code>bundle install</code> as i am not in an app repertory (no gemfile) as i am trying to create it"}], "tags": [], "owner": {"reputation": 112, "user_id": 3151023, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ttDtF.jpg?s=128&g=1", "display_name": "Romanch Sharma", "link": "https://stackoverflow.com/users/3151023/romanch-sharma"}, "is_accepted": false, "score": 1, "last_activity_date": 1576870050, "creation_date": 1576870050, "answer_id": 59430421, "question_id": 59429639, "link": "https://stackoverflow.com/questions/59429639/i-cant-create-a-new-rails-app-issue-with-webpacker/59430421#59430421", "title": "I can&#39;t create a new rails app, issue with webpacker", "body": "<p>You need to install extensions first</p>\n\n<p><code>brew install postgresql</code></p>\n\n<p>then do </p>\n\n<p><code>bundle install</code></p>\n"}], "owner": {"reputation": 75, "user_id": 12209868, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-C8mfZmKItDA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reU_1-VY_MGGcodDclRAXdqNpl6IQ/photo.jpg?sz=128", "display_name": "Franck Robin", "link": "https://stackoverflow.com/users/12209868/franck-robin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 550, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1577035442, "creation_date": 1576865198, "last_edit_date": 1577035442, "question_id": 59429639, "link": "https://stackoverflow.com/questions/59429639/i-cant-create-a-new-rails-app-issue-with-webpacker", "title": "I can&#39;t create a new rails app, issue with webpacker", "body": "<p>It was working fine before, i don't know why now it's not working. I am on Ubuntu 18.04.</p>\n\n<p>Here is what i get when i run the following commands :</p>\n\n<pre><code>&gt; ruby -v\n\nruby 2.6.3p62 (2019-04-16 revision 67580) [x86_64-linux]\n\n\n&gt; rails -v \n\nRails 6.0.2.1\n</code></pre>\n\n<p>And the problem occurs when i use this basic command to create a new rails app :</p>\n\n<pre><code>&gt; rails new MY-APP-TEST\n\ncreate  \n      create  README.md\n      create  Rakefile\n      create  .ruby-version\n      create  config.ru\n      create  .gitignore\n      create  Gemfile\n         run  git init from \".\"\nInitialized empty Git repository in /home/franck/code/BTC1M/MY-APP-TEST/.git/\n      create  package.json\n      create  app\n      create  app/assets/config/manifest.js\n      create  app/assets/stylesheets/application.css\n      create  app/channels/application_cable/channel.rb\n      create  app/channels/application_cable/connection.rb\n      create  app/controllers/application_controller.rb\n      create  app/helpers/application_helper.rb\n      create  app/javascript/channels/consumer.js\n      create  app/javascript/channels/index.js\n      create  app/javascript/packs/application.js\n      create  app/jobs/application_job.rb\n      create  app/mailers/application_mailer.rb\n      create  app/models/application_record.rb\n      create  app/views/layouts/application.html.erb\n      create  app/views/layouts/mailer.html.erb\n      create  app/views/layouts/mailer.text.erb\n      create  app/assets/images/.keep\n      create  app/controllers/concerns/.keep\n      create  app/models/concerns/.keep\n      create  bin\n      create  bin/rails\n      create  bin/rake\n      create  bin/setup\n      create  bin/yarn\n      create  config\n      create  config/routes.rb\n      create  config/application.rb\n      create  config/environment.rb\n      create  config/cable.yml\n      create  config/puma.rb\n      create  config/spring.rb\n      create  config/storage.yml\n      create  config/environments\n      create  config/environments/development.rb\n      create  config/environments/production.rb\n      create  config/environments/test.rb\n      create  config/initializers\n      create  config/initializers/application_controller_renderer.rb\n      create  config/initializers/assets.rb\n      create  config/initializers/backtrace_silencers.rb\n      create  config/initializers/content_security_policy.rb\n      create  config/initializers/cookies_serializer.rb\n      create  config/initializers/cors.rb\n      create  config/initializers/filter_parameter_logging.rb\n      create  config/initializers/inflections.rb\n      create  config/initializers/mime_types.rb\n      create  config/initializers/new_framework_defaults_6_0.rb\n      create  config/initializers/wrap_parameters.rb\n      create  config/locales\n      create  config/locales/en.yml\n      create  config/master.key\n      append  .gitignore\n      create  config/boot.rb\n      create  config/database.yml\n      create  db\n      create  db/seeds.rb\n      create  lib\n      create  lib/tasks\n      create  lib/tasks/.keep\n      create  lib/assets\n      create  lib/assets/.keep\n      create  log\n      create  log/.keep\n      create  public\n      create  public/404.html\n      create  public/422.html\n      create  public/500.html\n      create  public/apple-touch-icon-precomposed.png\n      create  public/apple-touch-icon.png\n      create  public/favicon.ico\n      create  public/robots.txt\n      create  tmp\n      create  tmp/.keep\n      create  tmp/pids\n      create  tmp/pids/.keep\n      create  tmp/cache\n      create  tmp/cache/assets\n      create  vendor\n      create  vendor/.keep\n      create  test/fixtures\n      create  test/fixtures/.keep\n      create  test/fixtures/files\n      create  test/fixtures/files/.keep\n      create  test/controllers\n      create  test/controllers/.keep\n      create  test/mailers\n      create  test/mailers/.keep\n      create  test/models\n      create  test/models/.keep\n      create  test/helpers\n      create  test/helpers/.keep\n      create  test/integration\n      create  test/integration/.keep\n      create  test/channels/application_cable/connection_test.rb\n      create  test/test_helper.rb\n      create  test/system\n      create  test/system/.keep\n      create  test/application_system_test_case.rb\n      create  storage\n      create  storage/.keep\n      create  tmp/storage\n      create  tmp/storage/.keep\n      remove  config/initializers/cors.rb\n      remove  config/initializers/new_framework_defaults_6_0.rb\n         run  bundle install\nThe dependency tzinfo-data (&gt;= 0) will be unused by any of the platforms Bundler is installing for. Bundler is installing for ruby but the dependency is only for x86-mingw32, x86-mswin32, x64-mingw32, java. To add those platforms to the bundle, run `bundle lock --add-platform x86-mingw32 x86-mswin32 x64-mingw32 java`.\nFetching gem metadata from https://rubygems.org/............\nFetching gem metadata from https://rubygems.org/.\nResolving dependencies....\nUsing rake 13.0.1\nUsing concurrent-ruby 1.1.5\nUsing i18n 1.7.0\nUsing minitest 5.13.0\nUsing thread_safe 0.3.6\nUsing tzinfo 1.2.5\nUsing zeitwerk 2.2.2\nUsing activesupport 6.0.2.1\nUsing builder 3.2.4\nUsing erubi 1.9.0\nUsing mini_portile2 2.4.0\nUsing nokogiri 1.10.7\nUsing rails-dom-testing 2.0.3\nUsing crass 1.0.5\nUsing loofah 2.4.0\nUsing rails-html-sanitizer 1.3.0\nUsing actionview 6.0.2.1\nUsing rack 2.0.8\nUsing rack-test 1.1.0\nUsing actionpack 6.0.2.1\nUsing nio4r 2.5.2\nUsing websocket-extensions 0.1.4\nUsing websocket-driver 0.7.1\nUsing actioncable 6.0.2.1\nUsing globalid 0.4.2\nUsing activejob 6.0.2.1\nUsing activemodel 6.0.2.1\nUsing activerecord 6.0.2.1\nUsing mimemagic 0.3.3\nUsing marcel 0.3.3\nUsing activestorage 6.0.2.1\nUsing mini_mime 1.0.2\nUsing mail 2.7.1\nUsing actionmailbox 6.0.2.1\nUsing actionmailer 6.0.2.1\nUsing actiontext 6.0.2.1\nUsing public_suffix 4.0.1\nUsing addressable 2.7.0\nUsing bindex 0.8.1\nUsing msgpack 1.3.1\nUsing bootsnap 1.4.5\nUsing bundler 1.17.3\nUsing byebug 11.0.1\nUsing regexp_parser 1.6.0\nUsing xpath 3.2.0\nUsing capybara 3.29.0\nUsing childprocess 3.0.0\nUsing ffi 1.11.3\nUsing jbuilder 2.9.1\nUsing rb-fsevent 0.10.3\nUsing rb-inotify 0.10.0\nUsing ruby_dep 1.5.0\nUsing listen 3.1.5\nUsing method_source 0.9.2\nUsing puma 4.3.1\nUsing rack-proxy 0.6.5\nUsing thor 1.0.1\nUsing railties 6.0.2.1\nUsing sprockets 4.0.0\nUsing sprockets-rails 3.2.1\nUsing rails 6.0.2.1\nUsing rubyzip 2.0.0\nUsing sassc 2.2.1\nUsing tilt 2.0.10\nUsing sassc-rails 2.1.2\nUsing sass-rails 6.0.0\nUsing selenium-webdriver 3.142.6\nUsing spring 2.1.0\nUsing spring-watcher-listen 2.0.1\nUsing sqlite3 1.4.2\nUsing turbolinks-source 5.2.0\nUsing turbolinks 5.2.1\nUsing web-console 4.0.1\nUsing webdrivers 4.1.3\nUsing webpacker 4.2.2\nBundle complete! 17 Gemfile dependencies, 75 gems now installed.\nUse `bundle info [gemname]` to see where a bundled gem is installed.\n         run  bundle binstubs bundler\nThe dependency tzinfo-data (&gt;= 0) will be unused by any of the platforms Bundler is installing for. Bundler is installing for ruby but the dependency is only for x86-mingw32, x86-mswin32, x64-mingw32, java. To add those platforms to the bundle, run `bundle lock --add-platform x86-mingw32 x86-mswin32 x64-mingw32 java`.\n         run  bundle exec spring binstub --all\n* bin/rake: Spring inserted\n* bin/rails: Spring inserted\n       rails  webpacker:install\nrails aborted!\nLoadError: incompatible library version - /home/franck/.rvm/gems/ruby-2.6.3/gems/ffi-1.11.3/lib/ffi_c.so\n/home/franck/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `require'\n/home/franck/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `block in require_with_bootsnap_lfi'\n/home/franck/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/loaded_features_index.rb:92:in `register'\n\n[...]\n\n/home/franck/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require'\n/home/franck/.rvm/gems/ruby-2.6.3/gems/activesupport-6.0.2.1/lib/active_support/dependencies.rb:325:in `block in require'\n/home/franck/.rvm/gems/ruby-2.6.3/gems/activesupport-6.0.2.1/lib/active_support/dependencies.rb:291:in `load_dependency'\n/home/franck/.rvm/gems/ruby-2.6.3/gems/activesupport-6.0.2.1/lib/active_support/dependencies.rb:325:in `require'\n/home/franck/code/BTC1M/MY-APP-TEST/bin/rails:9:in `&lt;top (required)&gt;'\n/home/franck/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/client/rails.rb:28:in `load'\n/home/franck/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/client/rails.rb:28:in `call'\n/home/franck/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/client/command.rb:7:in `call'\n/home/franck/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/client.rb:30:in `run'\n/home/franck/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/bin/spring:49:in `&lt;top (required)&gt;'\n/home/franck/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/binstub.rb:11:in `load'\n/home/franck/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/binstub.rb:11:in `&lt;top (required)&gt;'\n/home/franck/code/BTC1M/MY-APP-TEST/bin/spring:15:in `&lt;top (required)&gt;'\nbin/rails:3:in `load'\nbin/rails:3:in `&lt;main&gt;'\n\nCaused by:\nLoadError: cannot load such file -- 2.6/ffi_c\n/home/franck/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `require'\n[...]\n/home/franck/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require'\n/home/franck/.rvm/gems/ruby-2.6.3/gems/activesupport-6.0.2.1/lib/active_support/dependencies.rb:325:in `block in require'\n/home/franck/.rvm/gems/ruby-2.6.3/gems/activesupport-6.0.2.1/lib/active_support/dependencies.rb:291:in `load_dependency'\n/home/franck/.rvm/gems/ruby-2.6.3/gems/activesupport-6.0.2.1/lib/active_support/dependencies.rb:325:in `require'\n/home/franck/code/BTC1M/MY-APP-TEST/bin/rails:9:in `&lt;top (required)&gt;'\n/home/franck/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/client/rails.rb:28:in `load'\n/home/franck/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/client/rails.rb:28:in `call'\n/home/franck/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/client/command.rb:7:in `call'\n/home/franck/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/client.rb:30:in `run'\n/home/franck/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/bin/spring:49:in `&lt;top (required)&gt;'\n/home/franck/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/binstub.rb:11:in `load'\n/home/franck/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/binstub.rb:11:in `&lt;top (required)&gt;'\n/home/franck/code/BTC1M/MY-APP-TEST/bin/spring:15:in `&lt;top (required)&gt;'\nbin/rails:3:in `load'\nbin/rails:3:in `&lt;main&gt;'\n\nCaused by:\nBootsnap::LoadPathCache::FallbackScan: \n\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>I absolutely don't know how to fix this issue. Does someone have any idea ?</p>\n\n<hr>\n\n<p>EDIT : </p>\n\n<p>I uninstalled RVM, reinstalled bundler and rails, and run <code>gem pristine --all</code>, it has fixed the problem. I can now create a new rails app without any issue. </p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 1121, "user_id": 4451733, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9c64bf16791f14a6f7f2b880b938978d?s=128&d=identicon&r=PG&f=1", "display_name": "Crashtor", "link": "https://stackoverflow.com/users/4451733/crashtor"}, "is_accepted": false, "score": 0, "last_activity_date": 1576878995, "creation_date": 1576878995, "answer_id": 59431753, "question_id": 59429606, "link": "https://stackoverflow.com/questions/59429606/render-js-file-in-js-erb/59431753#59431753", "title": "Render js file in js.erb", "body": "<p>You can put the JS code directly inside the js.erb file and it'll only be executed when that partial is rendered.</p>\n\n<p>See more:\n<a href=\"https://guides.rubyonrails.org/working_with_javascript_in_rails.html\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/working_with_javascript_in_rails.html</a></p>\n"}], "owner": {"reputation": 1, "user_id": 12520269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9eb5c2c503e4837a9f0b0f2f8b9f1dd7?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Etz", "link": "https://stackoverflow.com/users/12520269/jordan-etz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 214, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576878995, "creation_date": 1576864973, "question_id": 59429606, "link": "https://stackoverflow.com/questions/59429606/render-js-file-in-js-erb", "title": "Render js file in js.erb", "body": "<p>Is it possible to render a javascript file inside a js.erb file? I have a modal that's being render in my new.js.haml file. However I have some javascript code that needs to run only when that modal gets called.</p>\n\n<p>new.js.haml</p>\n\n<pre><code>$('.modal-content').html(\"#{ j(render partial: 'new') }\");\n</code></pre>\n\n<p>I want to be able to call this file or render this file when new.js.haml is called upload.js</p>\n\n<pre><code>$ -&gt;\n    files = [];\n\n    $(\"#upload_button\").click -&gt;\n        $(\"#file_input\").trigger \"click\";\n\n    $(\"#file_input\").change (event) -&gt; \n        file = event.target.files[0];\n        files.push(file);\n        uploadfile files.length - 1, file;\n\n    uploadfile = (index, file) -&gt;\n        formData = new FormData();\n        formData.append \"file\", file;\n        fileitem = \"\n            &lt;li class='file-item success'&gt;\n                &lt;div class='active'&gt;\n                    &lt;span class='remove'&gt;\u00d7&lt;/span&gt;\n                    &lt;span&gt;#{file.name}&lt;/span&gt;\n                &lt;/div&gt;\n                &lt;div class='lds-ellipsis'&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;\n            &lt;/li&gt;\n        \";\n        $('#filelist').append fileitem;\n        setRemove();\n\n    setRemove = -&gt;\n        $(\".remove\").unbind();\n        $(\".remove\").click -&gt;\n           index = $(@).parent().parent().index();\n           files.splice index, 1;\n           $('.file-item').eq(index).remove();\n</code></pre>\n\n<p>Here is my form file that gets rendered but the upload.js file doesn't get called because it's already loaded on the main page. When the the new form button gets clicked it renders this form in a modal.</p>\n\n<pre><code>- @ticket.errors.full_messages.each do |message|\n  .error= message\n= render 'layouts/standard_flash'\n%ZenTicketForm{ title: 'Submit Help Request', :multipart =&gt; true, data: { remote: true } }\n  .col-xs-12.col-sm-12.col-md-12.col-lg-12{style: 'padding:0;'}\n    .col-xs-12.col-sm-12.col-md-12.col-lg-6\n      %dl.dl-horizontal\n        %dt Type\n        %dd.show-more-container\n          %ZenSelect#ticket_type{options: ['Questions', 'Incidents', 'Problems', 'Tasks'],\n            class: 'select2',\n            placeholder: t('activerecord.placeholders.zen_support/ticket.ticket_type') }\n    .col-xs-12.col-sm-12.col-md-12.col-lg-12\n      %dl.dl-horizontal\n        %dt Subject\n        %dd.show-more-container\n          %input.form-control{ type: 'text',\n            name: 'zen_support_ticket[subject]',\n            placeholder: t('activerecord.placeholders.zen_support/ticket.subject') }\n    .col-xs-12.col-sm-12.col-md-12.col-lg-6\n      %dl.dl-horizontal\n        %dt Priority\n        %dd.show-more-container\n          %ZenSelect#priority{ options: ['Low', 'Normal', 'High', 'Urgent'],\n            data: { placeholder: \"activerecord.placeholders.zen_support/ticket.priority\" },\n            class: 'select2' }\n    .col-xs-12.col-sm-12.col-md-12.col-lg-12\n      %dl.dl-horizontal\n        %dt Comment\n        %dd.show-more-container\n          %ZenTextArea#comment{ placeholder: t('activerecord.placeholders.zen_support/ticket.comment'),\n            error: @zendesk_ticket.errors&amp;.dig(:comment) }\n      %dl.dl-horizontal\n        .new-show-less\n          %button.fileUpload.btn.btn-default#upload_button{type: \"button\"}\n            Attach File\n            %input.upload#file_input{:name =&gt; \"attachments[]\",  multiple: true, :type =&gt; \"file\"}\n          %ul#filelist\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "sorting", "hash"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1576864188, "post_id": 59429405, "comment_id": 105044778, "body": "in this Hash <code>{&#39;three&#39;: 3, &#39;two&#39;: 2, &#39;one&#39;: 1}</code> are symbols e.g. <code>{three: 3, two: 2, one: 1}</code> so your sort just needs to change to <code>sort_me.sort_by { |k, _| elements.index k.to_s }.to_h</code> or your <code>Array</code> needs to be <code>[:one,:two,:three]</code>"}, {"owner": {"reputation": 868, "user_id": 3865171, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Ora6D.jpg?s=128&g=1", "display_name": "katericata", "link": "https://stackoverflow.com/users/3865171/katericata"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1576864367, "post_id": 59429405, "comment_id": 105044833, "body": "Absolutely correct!"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1576875200, "post_id": 59429405, "comment_id": 105048367, "body": "@engineersmnky&#39;s code has a computational complexity of O((n^2)log(n)), nlog(n) for the sort, n for finding the index. You can reduce that to O(n) with <code>arr = elements.map(&amp;:to_sym); arr.zip(sort_me.values_at(*arr)).to_h #=&gt; {:one=&gt;1, :two=&gt;2, :three=&gt;3}</code>. See <a href=\"https://ruby-doc.org/core-2.6.3/Array.html#method-i-zip\" rel=\"nofollow noreferrer\">Array#zip</a> and <a href=\"https://ruby-doc.org/core-2.6.3/Hash.html#method-i-values_at\" rel=\"nofollow noreferrer\">Hash#values_at</a>. For some reason the latter method seems to be greatly underutilised."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1576878414, "post_id": 59429405, "comment_id": 105049150, "body": "@CarySwoveland yes I had already determined that appears to be the fastest mechanism. Just figured that explaining the issue made more sense than going through a process that no longer looks like sort. P.S. in &gt;= 2.6 you can do <code>elements.map(&amp;:to_sym).then {|arr| arr.zip(sort_me.values_at(*arr)).to_h }</code> in one pretty line :)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 2, "creation_date": 1576878585, "post_id": 59429405, "comment_id": 105049205, "body": "@engineersmnky, a very pretty line... katericata, whenever you need to do something like this think of the word &quot;rearrange&quot; rather than &quot;sort&quot;, as the latter tends to bring to mind sorting methods, which are often not the best solution."}], "answers": [{"tags": [], "owner": {"reputation": 868, "user_id": 3865171, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Ora6D.jpg?s=128&g=1", "display_name": "katericata", "link": "https://stackoverflow.com/users/3865171/katericata"}, "is_accepted": false, "score": 1, "last_activity_date": 1576864170, "creation_date": 1576864170, "answer_id": 59429455, "question_id": 59429405, "link": "https://stackoverflow.com/questions/59429405/how-to-sort-a-hash-by-the-values-of-another-array-in-ruby/59429455#59429455", "title": "How to sort a hash by the values of another array in Ruby?", "body": "<p>Oh Gosh.. I am creating a hash of symbol keys and I want to sort it with an array of strings. Looks like my Python background tricked me here.</p>\n\n<p><code>sort_me = {'three': 3, 'two': 2, 'one': 1}</code> results to \n<code>=&gt; {:three=&gt;3, :two=&gt;2, :one=&gt;1}</code></p>\n\n<p>Let's convert the hash key into string to get the sorting work:</p>\n\n<p><code>sort_me.sort_by { |k,_| elements.index k.to_s }.to_h</code></p>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 1, "last_activity_date": 1576933731, "creation_date": 1576933731, "answer_id": 59436460, "question_id": 59429405, "link": "https://stackoverflow.com/questions/59429405/how-to-sort-a-hash-by-the-values-of-another-array-in-ruby/59436460#59436460", "title": "How to sort a hash by the values of another array in Ruby?", "body": "<p>You don't need to sort anything, and you also don't need to create a lookup table. Your array is already sorted the way you want and your <code>sort_me</code> hash is already a lookup table:</p>\n\n<pre><code>elements = ['one', 'two', 'three']\n# =&gt; [\"one\", \"two\", \"three\"]\nsort_me = {'three' =&gt; 3, 'two' =&gt; 2, 'one' =&gt; 1}\n# =&gt; {\"three\"=&gt;3, \"two\"=&gt;2, \"one\"=&gt;1}\nelements.map{|key| [key, sort_me[key] ] }.to_h\n# =&gt; {\"one\"=&gt;1, \"two\"=&gt;2, \"three\"=&gt;3}\n</code></pre>\n\n<p>If you want to use symbols and strings:</p>\n\n<pre><code>elements = ['one', 'two', 'three']\n# =&gt; [\"one\", \"two\", \"three\"]\nsort_me = {three: 3, two: 2, one: 1}\n# =&gt; {:three=&gt;3, :two=&gt;2, :one=&gt;1}\nelements.map{|key| [key.to_sym, sort_me[key.to_sym] ] }.to_h\n# =&gt; {:one=&gt;1, :two=&gt;2, :three=&gt;3}\n</code></pre>\n\n<p>Finally, if some <code>elements</code> are not used in the hash, you could simply remove pairs with <code>nil</code> values:</p>\n\n<pre><code>elements = ['one', 'two', 'two_and_a_half', 'three']\n# =&gt; [\"one\", \"two\", \"two_and_a_half\", \"three\"]\nelements.map{|key| [key.to_sym, sort_me[key.to_sym] ] }.to_h\n# =&gt; {:one=&gt;1, :two=&gt;2, :two_and_a_half=&gt;nil, :three=&gt;3}\nelements.map{|key| [key.to_sym, sort_me[key.to_sym] ] }.reject{|k, v| v.nil? }.to_h\n# =&gt; {:one=&gt;1, :two=&gt;2, :three=&gt;3} \n</code></pre>\n"}], "owner": {"reputation": 868, "user_id": 3865171, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Ora6D.jpg?s=128&g=1", "display_name": "katericata", "link": "https://stackoverflow.com/users/3865171/katericata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "accepted_answer_id": 59436460, "answer_count": 2, "score": 2, "last_activity_date": 1576933731, "creation_date": 1576863898, "question_id": 59429405, "link": "https://stackoverflow.com/questions/59429405/how-to-sort-a-hash-by-the-values-of-another-array-in-ruby", "title": "How to sort a hash by the values of another array in Ruby?", "body": "<p>Looks like a piece of cake, but can't solve it..</p>\n\n<pre><code>elements = ['one', 'two', 'three']\n\nsort_me = {'three': 3, 'two': 2, 'one': 1}\n</code></pre>\n\n<p><code>sort_me.sort_by { |k, _| elements.index k }.to_h</code> does not sort it the way it should. The hash stays the same.</p>\n\n<p>The desired output is <code>{:one=&gt;1, :two=&gt;2, :three=&gt;3}</code>.</p>\n"}, {"tags": ["arrays", "ruby-on-rails", "ruby", "api", "hash"], "comments": [{"owner": {"reputation": 553, "user_id": 4742218, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-0wBoIjPuArI/AAAAAAAAAAI/AAAAAAAAAF8/gmwCNq5bAX8/photo.jpg?sz=128", "display_name": "noname", "link": "https://stackoverflow.com/users/4742218/noname"}, "edited": false, "score": 0, "creation_date": 1576859904, "post_id": 59428592, "comment_id": 105043187, "body": "@account is empty?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 6, "creation_date": 1576859957, "post_id": 59428592, "comment_id": 105043211, "body": "Looks like a typo in the template: <code>@account</code> \u2192 <code>@accounts</code>."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1576862687, "post_id": 59428592, "comment_id": 105044264, "body": "^ aka <code>@account</code> will always be <code>nil</code>, thus jumping always to the <code>else</code>."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 1, "creation_date": 1576863108, "post_id": 59428592, "comment_id": 105044410, "body": "Also, there is no <code>contact[:email]</code>. There is <code>contact[:emails]</code>."}, {"owner": {"reputation": 11, "user_id": 12457272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a02eca4483baedb56897969f427fb2bb?s=128&d=identicon&r=PG&f=1", "display_name": "perkoei", "link": "https://stackoverflow.com/users/12457272/perkoei"}, "edited": false, "score": 0, "creation_date": 1577434734, "post_id": 59428592, "comment_id": 105168770, "body": "Thanks for the response guys, but the variable @account is not nil. I made a typo in my explenation not in my code."}], "owner": {"reputation": 11, "user_id": 12457272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a02eca4483baedb56897969f427fb2bb?s=128&d=identicon&r=PG&f=1", "display_name": "perkoei", "link": "https://stackoverflow.com/users/12457272/perkoei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1576859861, "creation_date": 1576859691, "last_edit_date": 1576859861, "question_id": 59428592, "link": "https://stackoverflow.com/questions/59428592/iterate-over-api-response-ruby-on-rails-array-with-hashes", "title": "Iterate over api response Ruby on Rails - Array with Hashes", "body": "<p>I'm trying to display some data from an api response in my view (Ruby on Rails) and I can't figure it out. </p>\n\n<p>My <code>html.erb</code> file looks as follows:</p>\n\n<pre><code>&lt;div class=\"column is-half\"&gt;\n&lt;div class=\"card\"&gt;\n    &lt;header class=\"card-header\"&gt;\n        &lt;p class=\"card-header-title\"&gt;Contact Personen&lt;/p&gt;\n    &lt;/header&gt;\n    &lt;div class=\"card-content\" style=\"flex: 1;\"&gt;\n        &lt;table class=\"table\"&gt;\n            &lt;thead&gt;\n                &lt;th&gt;Full Name&lt;/th&gt;\n                &lt;th&gt;Email&lt;/th&gt;\n            &lt;/thead&gt;\n            &lt;% if @account %&gt;   \n                &lt;% @account[:data][0][:contacts].each do |contact| %&gt;\n                        &lt;tr&gt;\n                            &lt;td&gt;&lt;%= contact[:full_name] || \"NVT\" %&gt;&lt;/td&gt;\n                            &lt;td&gt;&lt;%= contact[:email] || \"NVT\" %&gt;&lt;/td&gt;\n                        &lt;/tr&gt;\n                &lt;% end %&gt;\n            &lt;% else %&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;&lt;/td&gt;\n                    &lt;td&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n            &lt;% end %&gt;\n        &lt;/table&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p></p>\n\n<p><code>@accounts[:data][0][:contacts]</code> has the following value:</p>\n\n<pre><code>    [{:full_name=&gt;\"Kelly example\", :emails=&gt;[]},  \n    {:full_name=&gt;\"Tanja example\", :emails=&gt;[{:email=&gt;\"tanja@example.nl\"}]},  \n    {:full_name=&gt;\"Mirjam example\", :emails=&gt;[{:email=&gt;\"mirjam@example.nl\"}]},  \n    {:full_name=&gt;\"Isabelle  example\", :emails=&gt;[]},  \n    {:full_name=&gt;\"Floor  example\", :emails=&gt;[]},  \n    {:full_name=&gt;\"Zosia  example\", :emails=&gt;[]},  \n    {:full_name=&gt;\"Karen example\", :emails=&gt;[]},  \n    {:full_name=&gt;\"Freek  example\", :emails=&gt;[]}]  \n</code></pre>\n\n<p>It doesn't give any error, but it also doesn't display anything.</p>\n\n<p>Anyone know what I'm doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "hash", "key"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1576858237, "post_id": 59428236, "comment_id": 105042484, "body": "Why do you expect one object to be silently converted into another \u201cunder the hood\u201d? The question sounds to me like \u201cshould not <code>42</code> to be turned into <code>[:foo, :bar]</code> under the hood?\u201d."}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1576858556, "post_id": 59428236, "comment_id": 105042620, "body": "Maybe I should have put, what is happening under the hood?  Is the key &quot;:b&quot; treated as an immutable string, &quot;b&quot;?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1576858647, "post_id": 59428236, "comment_id": 105042645, "body": "Basically, <code>&quot;b&quot;</code> and <code>:b</code> have nothing in common. I mean, <i>nothing</i>."}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1576858647, "post_id": 59428236, "comment_id": 105042646, "body": "@Dave no, it&#39;s not, <code>:b</code> is treated like <code>:b</code>."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 1, "creation_date": 1576858658, "post_id": 59428236, "comment_id": 105042652, "body": "Maybe you have a different point of view since the use of Rails and its <code>with_indifferent_access</code> method? But no, I think there&#39;s no case where <code>&quot;b&quot;</code> is equal to <code>:b</code>. They&#39;re pretty much different objects."}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1576859430, "post_id": 59428236, "comment_id": 105043001, "body": "BTW &#39;string keys are mutable&#39; - not always, you can easily make your strings immutable by <code>freeze</code> method. There&#39;s even magic comment - <code># frozen_string_literal: true</code>, that causes implicit immutability of any string literal put in the same file."}], "answers": [{"comments": [{"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1576858491, "post_id": 59428257, "comment_id": 105042589, "body": "Thank you.  I know it&#39;s different due to the results I put in my question.  My question is why is it different?  What&#39;s happening under the hood with the hash keys that are causing different hash values?"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1576858565, "post_id": 59428257, "comment_id": 105042623, "body": "Why shouldn&#39;t it be different?"}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1576858697, "post_id": 59428257, "comment_id": 105042666, "body": "Because I read the key &quot;:b&quot; is treated as an immutable string &quot;b&quot; under the hood.  Is that what is happening?"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1576858869, "post_id": 59428257, "comment_id": 105042756, "body": "@Dave no, not really. It&#39;s more like &#39;scalar value object used as identifiers, mapping immutable string to fixed internal value&#39;, not &#39;immutable string&#39; itself."}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1576859043, "post_id": 59428257, "comment_id": 105042832, "body": "Oh!  Ok, I&#39;ll have to read up on scalar value objects but that explains it.  Thx!"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 1, "creation_date": 1576863206, "post_id": 59428257, "comment_id": 105044457, "body": "@Dave If you want the behaviour as defined in your question you have to use <a href=\"https://api.rubyonrails.org/classes/ActiveSupport/HashWithIndifferentAccess.html\" rel=\"nofollow noreferrer\"><code>HashWithIndifferentAccess</code></a> which can be achieved through <code>ActiveSupport::HashWithIndifferentAccess.new({a: 1, b: 2})</code> or <code>{a: 1, b: 2}.with_indifferent_access</code>."}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 2, "last_activity_date": 1576858541, "last_edit_date": 1576858541, "creation_date": 1576858222, "answer_id": 59428257, "question_id": 59428236, "link": "https://stackoverflow.com/questions/59428236/why-does-hash-a-not-return-the-same-result-for-ab-vs-ab/59428257#59428257", "title": "Why does hash a not return the same result for a[:b] vs a[&quot;b&quot;]?", "body": "<p>No, it shouldn't, <code>:b</code> is a different object than <code>'b'</code>, so unless <code>a</code> is a hash with indifferent access, <code>a[:b]</code> will most likely return different result than <code>a['b']</code>. </p>\n\n<p>BTW althouth Ruby is in fact dynamically typed, it's also quite strongly typed - implicit type conversion occurs rather rarely here. </p>\n"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 59428257, "answer_count": 1, "score": 0, "last_activity_date": 1576859375, "creation_date": 1576858116, "last_edit_date": 1576858169, "question_id": 59428236, "link": "https://stackoverflow.com/questions/59428236/why-does-hash-a-not-return-the-same-result-for-ab-vs-ab", "title": "Why does hash a not return the same result for a[:b] vs a[&quot;b&quot;]?", "body": "<p>I realize symbol keys in a hash are immutable whereas string keys are mutable, but I still don't understand why that would cause these results ...</p>\n\n<pre><code>[5] pry(main)&gt; a[:b] = \"c\"\n=&gt; \"c\"\n[6] pry(main)&gt; a[\"b\"]\n=&gt; nil\n[7] pry(main)&gt; a[:b]\n=&gt; \"c\"\n</code></pre>\n\n<p>Shouldn't <code>\"a[:b]\"</code> get turned into <code>a[\"b\"]</code> under the hood?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 3, "creation_date": 1576856674, "post_id": 59427891, "comment_id": 105041791, "body": "There&#39;s no reason for this not to work, are you sure you saved your file?"}, {"owner": {"reputation": 93, "user_id": 12274081, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0Sb30wxuTys/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc-hHDKdk2bthA8tdaQ1vGtEA5RrQ/photo.jpg?sz=128", "display_name": "SsPay", "link": "https://stackoverflow.com/users/12274081/sspay"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1576856852, "post_id": 59427891, "comment_id": 105041876, "body": "of course i&#39;m sure :)"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1576857051, "post_id": 59427891, "comment_id": 105041973, "body": "What&#39;s full backtrace?"}, {"owner": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "edited": false, "score": 0, "creation_date": 1576857180, "post_id": 59427891, "comment_id": 105042027, "body": "What do you see in params? And also paste your complete controller code"}, {"owner": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "edited": false, "score": 0, "creation_date": 1576857923, "post_id": 59427891, "comment_id": 105042368, "body": "Instead of using <code>product_params</code>, use the params and see if you can create a <code>product</code>? What I mean is <code>@product = Product.new(title: params[:product][:title])</code> &amp;&amp; <code>@product.save</code>"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1576858401, "post_id": 59427891, "comment_id": 105042550, "body": "Another question: Are you sure you closed <code>created</code> method with <code>end</code> properly?"}, {"owner": {"reputation": 93, "user_id": 12274081, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0Sb30wxuTys/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc-hHDKdk2bthA8tdaQ1vGtEA5RrQ/photo.jpg?sz=128", "display_name": "SsPay", "link": "https://stackoverflow.com/users/12274081/sspay"}, "reply_to_user": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "edited": false, "score": 0, "creation_date": 1576858562, "post_id": 59427891, "comment_id": 105042621, "body": "@Kedarnag also fails: <code>\u21b3 app&#47;controllers&#47;products_controller.rb:19:in `block in create&#39;    (0.4ms)  ROLLBACK   \u21b3 app&#47;controllers&#47;products_controller.rb:19:in `block in create&#39; </code>"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1576858600, "post_id": 59427891, "comment_id": 105042633, "body": "My money is on there being a missing <code>end</code> statement, after the <code>if</code> condition. I don&#39;t think the code in your StackOverflow post is the same as the code on your machine. I think you&#39;ve edited it. Besides, it&#39;s not even valid -- there&#39;s an <i>extra</i> <code>end</code> statement on the last line."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1576858626, "post_id": 59427891, "comment_id": 105042640, "body": "If you <b>indent your code properly</b>, then issues like this become far more apparent."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1576966301, "post_id": 59427891, "comment_id": 105064023, "body": "When you update your question please do <i>not</i> use &quot;edited&quot; or &quot;updated&quot; tags to mark the changes. Instead, simply incorporate the new information into the question as if it&#39;d been there all along. We can tell when and where the question changed because SO tracks all that."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1576966594, "post_id": 59427891, "comment_id": 105064071, "body": "Learn to use your editor&#39;s ability to (re)indent code, and to bounce from the start and end of blocks. Knowing those things make it easy to debug this sort of problem."}], "answers": [{"tags": [], "owner": {"reputation": 161, "user_id": 8540513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd3b5d1158d748231ab839342b68a4c8?s=128&d=identicon&r=PG&f=1", "display_name": "Austin Adams", "link": "https://stackoverflow.com/users/8540513/austin-adams"}, "is_accepted": true, "score": 3, "last_activity_date": 1576858728, "creation_date": 1576858728, "answer_id": 59428389, "question_id": 59427891, "link": "https://stackoverflow.com/questions/59427891/how-to-pass-params-to-method-create/59428389#59428389", "title": "How to pass params to method create", "body": "<p>The problem is that you have the end for the <code>respond_to</code> block indented to look like the end of your <code>create</code> function, when in reality all of your private functions are within your create function.  Change your code to look like this:</p>\n\n<pre><code>class ProductsController &lt; ApplicationController\n  before_action :set_product, only: %i[show]\n\n  def new\n    @product = Product.new\n  end\n\n  def create\n    @product = Product.new(product_params)\n    respond_to do |format|\n      if @product.save\n        format.html { redirect_to @product, notice: 'Product was successfully created.' }\n        format.json { render :show, status: :created, location: @product }\n      else\n        format.html { render :new }\n        format.json { render json: @product.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  private\n  def set_product\n    @product = Product.find(params[:id])\n  end\n\n  def product_params\n    params.require(:product).permit(:title, :description)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 12274081, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0Sb30wxuTys/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc-hHDKdk2bthA8tdaQ1vGtEA5RrQ/photo.jpg?sz=128", "display_name": "SsPay", "link": "https://stackoverflow.com/users/12274081/sspay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "closed_date": 1577013306, "accepted_answer_id": 59428389, "answer_count": 1, "score": -3, "last_activity_date": 1576966431, "creation_date": 1576856560, "last_edit_date": 1576966431, "question_id": 59427891, "link": "https://stackoverflow.com/questions/59427891/how-to-pass-params-to-method-create", "closed_reason": "Not suitable for this site", "title": "How to pass params to method create", "body": "<p>I'm trying to create a method but I get an error:</p>\n\n<pre><code>undefined local variable or method 'product_params'\n</code></pre>\n\n<p>I do not understand what the problem is.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class ProductsController &lt; ApplicationController\n  before_action :set_product, only: %i[show]\n\n\n  def new\n    @product = Product.new\n  end\n\n  def create\n    @product = Product.new(product_params)\n    respond_to do |format|\n    if @product.save\n        format.html { redirect_to @product, notice: 'Product was successfully created.' }\n        format.json { render :show, status: :created, location: @product }\n      else\n        format.html { render :new }\n        format.json { render json: @product.errors, status: :unprocessable_entity }\n      end\n  end\n\n  private\n  def set_product\n    @product = Product.find(params[:id])\n  end\n\n  def product_params\n    params.require(:product).permit(:title, :description)\n  end\nend\nend\n</code></pre>\n\n<p>My parameters are:</p>\n\n<pre><code>Parameters: {\"authenticity_token\"=&gt;\"eupRBo6LO4xQbJfBSDJOC6SOesNJ0GMeBMZRHijgvXvx4pn6Lw2jeIVCQ+XjqaDl8g6Dck1WsOYMiSMa8s4UMQ==\", \"product\"=&gt;{\"title\"=&gt;\"test_title\", \"description\"=&gt;\"test_description\"}, \"commit\"=&gt;\"Submit\"}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "stub"], "comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 3, "creation_date": 1576852891, "post_id": 59427007, "comment_id": 105040137, "body": "Can you elaborate <i>&quot;doesn&#39;t work as I expect&quot;</i>? What do you expect? What is the current output?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1576853270, "post_id": 59427007, "comment_id": 105040312, "body": "Why do you expect <code>MyModel</code> to receive <code>:all</code> twice wheb you <b>explicitly cache</b> the returned value? It would obviously receive it once."}, {"owner": {"reputation": 3, "user_id": 12571330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ffa11446b7235177e6c090b9978f87e?s=128&d=identicon&r=PG&f=1", "display_name": "mightydingo", "link": "https://stackoverflow.com/users/12571330/mightydingo"}, "edited": false, "score": 0, "creation_date": 1576853554, "post_id": 59427007, "comment_id": 105040438, "body": "Sorry, I wasn&#39;t clear enough. The problem lies in the fact that despite me expecting <code>MyModel.all</code> to be called, it isn&#39;t. It seems that the <code>MyModel</code> I call within the spec is a different one than the one within the class."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1576853611, "post_id": 59427007, "comment_id": 105040467, "body": "Once again: it is called. But it is called once. Hence the test fails."}, {"owner": {"reputation": 3, "user_id": 12571330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ffa11446b7235177e6c090b9978f87e?s=128&d=identicon&r=PG&f=1", "display_name": "mightydingo", "link": "https://stackoverflow.com/users/12571330/mightydingo"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1576853651, "post_id": 59427007, "comment_id": 105040497, "body": "I fixed my code @AlekseiMatiushkin. I expect it to be called once indeed, but it&#39;s called none."}], "answers": [{"tags": [], "owner": {"reputation": 3, "user_id": 12571330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ffa11446b7235177e6c090b9978f87e?s=128&d=identicon&r=PG&f=1", "display_name": "mightydingo", "link": "https://stackoverflow.com/users/12571330/mightydingo"}, "is_accepted": false, "score": 0, "last_activity_date": 1576854649, "creation_date": 1576854649, "answer_id": 59427470, "question_id": 59427007, "link": "https://stackoverflow.com/questions/59427007/test-if-method-is-being-call-on-alien-class/59427470#59427470", "title": "Test if method is being call on alien class", "body": "<p>Apparently I found the answer by tweaking the expectation.</p>\n\n<p><code>expect(MyModel).to receive(:all).once.and_call_original</code></p>\n\n<p>Why do I need to specify to call the original method ?</p>\n"}], "owner": {"reputation": 3, "user_id": 12571330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ffa11446b7235177e6c090b9978f87e?s=128&d=identicon&r=PG&f=1", "display_name": "mightydingo", "link": "https://stackoverflow.com/users/12571330/mightydingo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1576854649, "creation_date": 1576852666, "last_edit_date": 1576853618, "question_id": 59427007, "link": "https://stackoverflow.com/questions/59427007/test-if-method-is-being-call-on-alien-class", "title": "Test if method is being call on alien class", "body": "<p>How can I test if <code>MyModel.all</code> is called ? </p>\n\n<p>The following code doesn't work as I expect it:</p>\n\n<pre><code>class MyClass\n  def call\n    cached_records\n  end\n\n  private\n\n  def cached_records\n    Rails.cache.fetch(self.class.name.underscore) do\n      MyModel.all\n    end\n  end \nend\n\n</code></pre>\n\n<pre><code>RSpec.describe MyClass do\n  subject { MyClass.new }\n\n  describe '#call' do\n    it 'only queries the database the first time' do\n      expect(MyModel).to receive(:all).once\n\n      MyClass.call\n      MyClass.call\n    end\n  end\n\nend\n\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord"], "comments": [{"owner": {"reputation": 455, "user_id": 4334331, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rOXO4.jpg?s=128&g=1", "display_name": "Sanjay Prajapati", "link": "https://stackoverflow.com/users/4334331/sanjay-prajapati"}, "edited": false, "score": 1, "creation_date": 1576865317, "post_id": 59426451, "comment_id": 105045135, "body": "Your last line which says <b>ordered by name and products with finish date less than the current date stay always on final of the result.</b> is quite confusing. Can you give example with some product and price record ?"}], "answers": [{"tags": [], "owner": {"reputation": 92, "user_id": 7627835, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7x5kV4pca_8/AAAAAAAAAAI/AAAAAAAAAA4/7mMibtSK2C4/photo.jpg?sz=128", "display_name": "Rosel Sosa Gonzalez", "link": "https://stackoverflow.com/users/7627835/rosel-sosa-gonzalez"}, "is_accepted": false, "score": 0, "last_activity_date": 1576869858, "creation_date": 1576869858, "answer_id": 59430392, "question_id": 59426451, "link": "https://stackoverflow.com/questions/59426451/order-by-conditions-on-rails-4/59430392#59430392", "title": "Order by conditions on rails 4", "body": "<p>Try with</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Products.joins(:prices).where('prices.start_date &lt;= ?', Time.current).order(:name).order('prices.finish_date DESC')\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 9266697, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6f02d961f38ffa3966a462a1c2c5448?s=128&d=identicon&r=PG&f=1", "display_name": "denispolicarpocampos", "link": "https://stackoverflow.com/users/9266697/denispolicarpocampos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576869858, "creation_date": 1576850268, "last_edit_date": 1576850768, "question_id": 59426451, "link": "https://stackoverflow.com/questions/59426451/order-by-conditions-on-rails-4", "title": "Order by conditions on rails 4", "body": "<p>I have products that have prices with a determinate start date and a finish date. I want to make a query on Active Record to capture all products with a start date less than the current date but I want to order them to the products with finish date less than the current date stay on the final of my result.</p>\n\n<p>In other words, I want that this query bellow returns all products with start_date less than the current date, but I want the result to be ordered by name and products with finish date less than the current date stay always on final of the result.</p>\n\n<p><code>Products.joins(:prices).where('prices.start_date &lt;= ?', Time.current).order(:name)</code></p>\n\n<p>I use rails 4 here.</p>\n\n<p>Someone can help?</p>\n"}, {"tags": ["ruby", "hash", "dsl"], "comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1576849239, "post_id": 59425986, "comment_id": 105038459, "body": "What is your current output/error? The first codeblock says <code>&quot;value1&quot;</code>, but I&#39;m guessing that&#39;s the expected output, not the actual output, since you wouldn&#39;t be here if the output was correct."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11086399"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1576849556, "post_id": 59425986, "comment_id": 105038599, "body": "I have production environment ok.  Than i have key1 with &quot;value1&quot; ok.  When i want to output it i want to do this with that command:  p config.key1  What i want to have in output:  &quot;value1&quot;  What i get:  Traceback (most recent call last): init.rb:35:in <code>&lt;main&gt;&#39;: undefined method </code>key1&#39; for #&lt;Hash:0x0000564804424f08&gt; (NoMethodError)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11086399"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1576849690, "post_id": 59425986, "comment_id": 105038653, "body": "All i want is output value of key by config.key_name method I just can&#39;t write my problem in other way :/ I have key1 &quot;value1&quot;, and key1 is NOT method, that is key in HASH But i want to output value of key by method, named like key_name"}], "answers": [{"comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 1, "creation_date": 1576852142, "post_id": 59426803, "comment_id": 105039798, "body": "<b>note:</b> Normally when defining <code>method_missing</code> you also want to define <code>respond_to_missing?</code>, but I&#39;m not going into depth, since that&#39;s a topic on its own. Checkout <a href=\"http://blog.marc-andre.ca/2010/11/15/methodmissing-politely/\" rel=\"nofollow noreferrer\">blog.marc-andre.ca/2010/11/15/methodmissing-politely</a> for more info."}], "tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": true, "score": 0, "last_activity_date": 1576852532, "last_edit_date": 1576852532, "creation_date": 1576851811, "answer_id": 59426803, "question_id": 59425986, "link": "https://stackoverflow.com/questions/59425986/output-value-of-keys-in-hash-by-method-in-ruby/59426803#59426803", "title": "Output value of keys in hash by method in ruby", "body": "<p>The issue is that you return a normal hash from your <code>Configus.config</code> method. Instead you should return your special <code>InHash</code> instance which you're able to customize behaviour.</p>\n\n<p>The current issue lies here:</p>\n\n<pre><code>def self.config(environment, parent = nil, &amp;block)\n  in_hash = InHash.new\n  in_hash.instance_eval &amp;block\n  keys = in_hash.inner_hash.keys\n  index = keys.find_index(environment)\n  if parent &amp;&amp; environment\n    parent_hash = in_hash.inner_hash[parent]\n    adopted_hash = in_hash.inner_hash[environment]\n    merged_hash = parent_hash.deeper_merge!(adopted_hash, { :overwrite_arrays =&gt; \"TRUE\" })\n    # ^ the above line returns a normal hash from the method\n    in_hash # &lt;= add this to return your in_hash object\n  elsif environment == keys[index]\n    \"#{environment.capitalize} hash: \" + in_hash.inner_hash[environment]\n  end\nend\n</code></pre>\n\n<p>The problem is not entirely solved with the above, since this now returns your <code>InHash</code> instance, but your <code>InHash</code> has no way of fetching keys, you can only set them. So you want to add a way to fetch values:</p>\n\n<pre><code>def method_missing(name, *args, &amp;block)\n  if block_given?\n    context = InHash.new\n    context.instance_eval &amp;block\n    @inner_hash[name] = context # set to the nested InHash instance\n  elsif args.empty?\n    @inner_hash[name] # without arguments given read the value\n  else\n    @inner_hash[name] = args # set to the arguments provided\n  end\nend\n</code></pre>\n\n<p>The following code:</p>\n\n<pre><code>config = Configus.config :staging, :production do\n  # ...\nend\n</code></pre>\n\n<p>Should now set <code>config</code> to an <code>InHash</code> instance, that has your custom behaviour defined. The <code>args.empty?</code> check in <code>method_missing</code> will return a value if no further arguments are given. Meaning that:</p>\n\n<pre><code>config.key1\n</code></pre>\n\n<p>Should now return your <code>[\"value1\"]</code> value. <code>@inner_hash[name] = args</code> will always set the value to an array. If you don't want this you might want to change it to:</p>\n\n<pre><code>@inner_hash[name] = args.size &gt; 1 ? args : args.first\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11086399"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 59426803, "answer_count": 1, "score": 0, "last_activity_date": 1576852532, "creation_date": 1576848300, "last_edit_date": 1576848886, "question_id": 59425986, "link": "https://stackoverflow.com/questions/59425986/output-value-of-keys-in-hash-by-method-in-ruby", "title": "Output value of keys in hash by method in ruby", "body": "<p>I wrote weird, little and simple DSL on ruby, and I stuck on output values of keys.\nI need to output values of concrete key of hash by that command:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>p config.key1\n#&gt; Output down below:\n#&gt; \"value1\"\n# here's key1 is key of hash, i want to output value of key that i wrote in method call.\n# p config.key_name for example\n</code></pre>\n\n<p>There's my configus realisation:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require \"deep_merge/rails_compat\"\n\nclass Configus\n  class InHash\n    attr_reader :inner_hash\n\n    def initialize\n      @inner_hash = {}\n    end\n\n    def method_missing(name, *args, &amp;block)\n      if block_given?\n        context = InHash.new\n        context.instance_eval &amp;block\n        result = context.inner_hash\n      else\n        result = args\n      end\n\n      @inner_hash[name] = result\n    end\n  end\n\n  def self.config(environment, parent = nil, &amp;block)\n    in_hash = InHash.new\n    in_hash.instance_eval &amp;block\n    keys = in_hash.inner_hash.keys\n    index = keys.find_index(environment)\n    if parent &amp;&amp; environment\n      parent_hash = in_hash.inner_hash[parent]\n      adopted_hash = in_hash.inner_hash[environment]\n      merged_hash = parent_hash.deeper_merge!(adopted_hash, { :overwrite_arrays =&gt; \"TRUE\" })\n    elsif environment == keys[index]\n      \"#{environment.capitalize} hash: \" + in_hash.inner_hash[environment]\n    end\n  end\nend\n\n\n</code></pre>\n\n<p>Here's my init.rb:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require \"./configus\"\nrequire \"pry\"\n\nconfig = Configus.config :staging, :production do\n  production do\n    key1 \"value1\"\n    key2 \"value2\"\n    group1 do\n      key3 \"value3\"\n      key4 \"value4\"\n    end\n  end\n\n  staging do\n    key2 \"new value2\"\n    group1 do\n      key4 \"new value4\"\n    end\n  end\n\n  development do\n    key1 \"new value1\"\n    key2 \"value2\"\n    group1 do\n      key3 \"new value3\"\n      key4 \"value4\"\n    end\n  end\n\n  productionisgsgsd do\n    key10 \"value10\"\n  end\nend\n\nputs config.key1\n#&gt; I wrote output down below:\nTraceback (most recent call last):\ninit.rb:35:in `&lt;main&gt;': undefined method `key1' for #&lt;Hash:0x000056261379cdb0&gt; (NoMethodError)\nDid you mean?  key\n               key?\n               keys\n</code></pre>\n\n<p>I just want to output value of concrete key of hash with concrete command:\np config.key_name\nBut i don't know how to do that and because of my stupid problem i want to ask you guys.</p>\n\n<p>P.S Sorry for my english skill and that weird realisation of dsl \u00af\\_(\u30c4)_/\u00af</p>\n"}, {"tags": ["json", "ruby"], "comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1576848424, "post_id": 59425938, "comment_id": 105038070, "body": "How does the string come into existence? Can&#39;t you change the output so that a proper JSON string is exported?"}, {"owner": {"reputation": 1306, "user_id": 8008340, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/15JhO.jpg?s=128&g=1", "display_name": "Konstantin Strukov", "link": "https://stackoverflow.com/users/8008340/konstantin-strukov"}, "edited": false, "score": 1, "creation_date": 1576851478, "post_id": 59425938, "comment_id": 105039494, "body": "What about <code>JSON.parse(arr.gsub(&quot;=&gt;&quot;, &quot;:&quot;))</code>? (within begin/rescue block for reasonable fallback)"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1576854936, "post_id": 59425938, "comment_id": 105041034, "body": "^ assuming that <code>=&gt;</code> will not be in the key itself, and the key is a string. Since it&#39;s currently plain Ruby <code>{1=&gt;&quot;value&quot;}</code> would also be allowed. Here the <code>1</code> should be quoted first since JSON allows only string keys. The same with symbols or other types of keys."}, {"owner": {"reputation": 1306, "user_id": 8008340, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/15JhO.jpg?s=128&g=1", "display_name": "Konstantin Strukov", "link": "https://stackoverflow.com/users/8008340/konstantin-strukov"}, "edited": false, "score": 0, "creation_date": 1576859691, "post_id": 59425938, "comment_id": 105043105, "body": "Sure, you&#39;re right. Because of that, this is not an answer but a comment :) Obviously, you cannot parse as json something that is not a json. So there are two options: you either convert it to a valid json somehow, or deserialize in some other way. Obviously, there is no easy way to convert <i>arbitrary</i> Ruby data structure, serialized to string, into a valid json. But in the cases when some a priori assumptions can be made in advance, it might make sense (with the reasonable fallback)."}], "owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 387, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1576848307, "creation_date": 1576848082, "last_edit_date": 1576848307, "question_id": 59425938, "link": "https://stackoverflow.com/questions/59425938/fixing-jsonparsererror-416-unexpected-token-at-without-using-eval", "title": "Fixing JSON::ParserError: 416: unexpected token at &#39;{&#39; without using EVAL", "body": "<p>I'm trying to parse a <code>Hash</code> that is represented as a <code>String</code>, take this example:</p>\n\n<pre><code>arr = \"[{\\\"key\\\"=&gt;\\\"VALUE\\\"}, {\\\"key\\\"=&gt;\\\"VAlUE\\\"}]\"\n\nJSON.parse arr\n\n=&gt; JSON::ParserError: 416: unexpected token at '{\"key\"=&gt;\"VALUE\"}, {\"key\"=&gt;\"VALUE\"}]'\n\n</code></pre>\n\n<p>Ok, that's unfortunate and I realize that it's not JSON I'm trying to parse. But I can do this:</p>\n\n<pre><code>arr = \"[{\\\"key\\\"=&gt;\\\"VALUE\\\"}, {\\\"key\\\"=&gt;\\\"VALUE\\\"}]\"\n\neval(arr)\n\n=&gt; [{\"key\"=&gt;\"VALUE\"}, {\"key\"=&gt;\"VALUE\"}]\n</code></pre>\n\n<p>That's cool but I don't want to use EVAL due to the security risk.</p>\n\n<p>How can I achieve the same result that EVAL gets me but without using it?</p>\n"}, {"tags": ["ruby", "rubygems", "rvm"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1576850066, "post_id": 59425729, "comment_id": 105038818, "body": "Please update your question to include output of <code>gem env</code> .  Sounds like you have problems with your <code>PATH</code> variable"}], "answers": [{"comments": [{"owner": {"reputation": 2103, "user_id": 3162553, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/5a4b9cec47f016074898f79d29293d9b?s=128&d=identicon&r=PG&f=1", "display_name": "user3162553", "link": "https://stackoverflow.com/users/3162553/user3162553"}, "edited": false, "score": 0, "creation_date": 1576849368, "post_id": 59426028, "comment_id": 105038509, "body": "Thanks. Now I get a different error though on terminal start: <code>bash: &#47;usr&#47;local&#47;bin&#47;bundle: &#47;usr&#47;local&#47;opt&#47;ruby&#47;bin&#47;ruby: bad interpreter: No such file or directory env: ruby: Argument list too long</code>"}, {"owner": {"reputation": 2103, "user_id": 3162553, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/5a4b9cec47f016074898f79d29293d9b?s=128&d=identicon&r=PG&f=1", "display_name": "user3162553", "link": "https://stackoverflow.com/users/3162553/user3162553"}, "edited": false, "score": 0, "creation_date": 1576851114, "post_id": 59426028, "comment_id": 105039321, "body": "Ok I&#39;ll check the link out."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 2103, "user_id": 3162553, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/5a4b9cec47f016074898f79d29293d9b?s=128&d=identicon&r=PG&f=1", "display_name": "user3162553", "link": "https://stackoverflow.com/users/3162553/user3162553"}, "edited": false, "score": 0, "creation_date": 1576852531, "post_id": 59426028, "comment_id": 105039966, "body": "see updated, added 2nd link to one more option to try"}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": true, "score": 2, "last_activity_date": 1576853561, "last_edit_date": 1576853561, "creation_date": 1576848484, "answer_id": 59426028, "question_id": 59425729, "link": "https://stackoverflow.com/questions/59425729/broken-gem-path-on-terminal-start-mac-os-x/59426028#59426028", "title": "Broken Gem Path on Terminal Start Mac OS X", "body": "<p>It looks like you may have installed ruby with Homebrew but you're trying to use RVM which may be causing problems.  If this is the case you probably should start over.</p>\n\n<p>First uninstall RVM</p>\n\n<pre><code>rvm implode\n</code></pre>\n\n<p>Then uninstall ruby</p>\n\n<pre><code>brew uninstall ruby\n</code></pre>\n\n<p>Then reinstall RVM see <a href=\"https://rvm.io/rvm/install\" rel=\"nofollow noreferrer\">https://rvm.io/rvm/install</a></p>\n\n<p>UPDATE based on your <code>gem env</code> your <code>PATH</code> variable is clearly messed up.  You could try to fix it by looking at answers to <a href=\"https://askubuntu.com/questions/113419/how-can-i-reset-path-to-its-default-value-in-ubuntu\">this question</a> also you can <a href=\"https://unix.stackexchange.com/questions/813/how-to-determine-where-an-environment-variable-came-from\">try this solution</a>. But it might be easier to just set up a new user account and start with a fresh shell setup, and rerun the above steps.</p>\n"}], "owner": {"reputation": 2103, "user_id": 3162553, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/5a4b9cec47f016074898f79d29293d9b?s=128&d=identicon&r=PG&f=1", "display_name": "user3162553", "link": "https://stackoverflow.com/users/3162553/user3162553"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 895, "favorite_count": 0, "accepted_answer_id": 59426028, "answer_count": 1, "score": 1, "last_activity_date": 1576853561, "creation_date": 1576846944, "last_edit_date": 1576850190, "question_id": 59425729, "link": "https://stackoverflow.com/questions/59425729/broken-gem-path-on-terminal-start-mac-os-x", "title": "Broken Gem Path on Terminal Start Mac OS X", "body": "<p>When opening a new terminal I get: </p>\n\n<pre><code>Traceback (most recent call last):\n        3: from /usr/local/bin/bundle:22:in `&lt;main&gt;'\n        2: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_gem.rb:65:in `gem'\n        1: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/dependency.rb:323:in `to_spec'\n/usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/dependency.rb:311:in `to_specs': Could not find 'bundler' (&gt;= 0) among 7 total gem(s) (Gem::MissingSpecError)\nChecked in 'GEM_PATH=/Users/tkellogg/.gem/ruby/2.6.0:/usr/local/lib/ruby/gems/2.6.0:/usr/local/Cellar/ruby/2.6.5/lib/ruby/gems/2.6.0', execute `gem env` for more information\n</code></pre>\n\n<p>Bash Profile looks like:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>. ~/.bashrc\n\n# Add RVM to PATH for scripting. Make sure this is the last PATH variable change.\nexport PATH=\"$PATH:$HOME/.rvm/bin\"\n\n[[ -s \"$HOME/.rvm/scripts/rvm\" ]] &amp;&amp; source \"$HOME/.rvm/scripts/rvm\" # Load RVM into a shell session *as a function*\n</code></pre>\n\n<p>bashrc looks like;</p>\n\n<pre><code># Add RVM to PATH for scripting. Make sure this is the last PATH variable change.\nexport PATH=\"$PATH:$HOME/.rvm/bin\"\n</code></pre>\n\n<p>I've set the default system ruby to be 2.6.5 and I've upgraded homebrew. </p>\n\n<p>Any ideas?</p>\n\n<p>Running <code>bundle update --bundler</code> gives <code>env: ruby: Argument list too long</code></p>\n\n<p>This is the result of <code>gem env</code>:</p>\n\n<pre><code>Ignoring gem-wrappers-1.4.0 because its extensions are not built. Try: gem pristine gem-wrappers --version 1.4.0\nError loading RubyGems plugin \"/Users/me/.rvm/rubies/ruby-2.6.5/lib/ruby/gems/2.6.0/gems/gem-wrappers-1.4.0/lib/rubygems_plugin.rb\": cannot load such file -- gem-wrappers (LoadError)\nRubyGems Environment:\n  - RUBYGEMS VERSION: 3.1.2\n  - RUBY VERSION: 2.3.7 (2018-03-28 patchlevel 456) [universal.x86_64-darwin18]\n  - INSTALLATION DIRECTORY: /Users/me/.gem\n  - USER INSTALLATION DIRECTORY: /Users/me/.gem/ruby/2.3.0\n  - RUBY EXECUTABLE: /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/bin/ruby\n  - GIT EXECUTABLE: /usr/local/bin/git\n  - EXECUTABLE DIRECTORY: /Users/me/.gem/bin\n  - SPEC CACHE DIRECTORY: /Users/me/.gem/specs\n  - SYSTEM CONFIGURATION DIRECTORY: /Library/Ruby/Site\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - universal-darwin-18\n  - GEM PATHS:\n     - /Users/me/.gem\n     - /Users/me/.rvm/gems/ruby-2.6.5\n     - /Users/me/.rvm/rubies/ruby-2.6.5/lib/ruby/gems/2.6.0\n  - GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n  - REMOTE SOURCES:\n     - https://rubygems.org/\n  - SHELL PATH:\n     - /usr/local/bin\n     - /usr/local/sbin\n     - /Users/me/anaconda3/bin\n     - /Users/me/.node/bin\n     - /Users/me/.yarn/bin\n     - /Users/me/.nvm/versions/node/v10.14.1/bin\n     - /Users/me/bin\n     - /usr/bin\n     - /usr/local/heroku/bin\n     - /Users/me/.gvm/pkgsets/go1.8.3/global/bin\n     - /Users/me/.gvm/gos/go1.8.3/bin\n     - /Users/me/.gvm/pkgsets/go1.8.3/global/overlay/bin\n     - /Users/me/.gvm/bin\n     - /Users/me/.gvm/bin\n     - /Users/me/go\n     - /Users/me/go/bin\n     - /Library/Frameworks/Python.framework/Versions/3.6/bin\n     - ~/npm-global/bin\n     - /Users/me/.yarn/bin\n     - /Users/me/bin\n     - /usr/bin\n     - /usr/local/heroku/bin\n     - /Users/me/.gvm/pkgsets/go1.8.3/global/bin\n     - /Users/me/.gvm/gos/go1.8.3/bin\n     - /Users/me/.gvm/pkgsets/go1.8.3/global/overlay/bin\n     - /Users/me/.gvm/bin\n     - /Users/me/.gvm/bin\n     - /Users/me/go\n     - /Users/me/go/bin\n     - /Users/me/.yarn/bin\n     - /Users/me/bin\n     - /usr/bin\n     - /usr/local/heroku/bin\n     - /Users/me/.rvm/gems/ruby-2.6.5/bin\n     - /Users/me/.rvm/gems/ruby-2.6.5@global/bin\n     - /Users/me/.rvm/rubies/ruby-2.6.5/bin\n     - /Users/me/.rvm/bin\n     - /Users/me/.yarn/bin\n     - /Users/me/bin\n     - /usr/bin\n     - /usr/local/heroku/bin\n     - /Users/me/.gvm/pkgsets/go1.8.3/global/bin\n     - /Users/me/.gvm/gos/go1.8.3/bin\n     - /Users/me/.gvm/pkgsets/go1.8.3/global/overlay/bin\n     - /Users/me/.gvm/bin\n     - /Users/me/.gvm/bin\n     - /Users/me/.gvm/pkgsets/go1.8.3/global\n     - /Users/me/.gvm/pkgsets/go1.8.3/global/bin\n     - ~/bin\n     - /usr/local/bin\n     - /usr/bin\n     - /bin\n     - /usr/sbin\n     - /sbin\n     - /usr/local/go/bin\n     - /Users/me/anaconda3/bin\n     - /Users/me/.node/bin\n     - /Users/me/.gvm/pkgsets/go1.8.3/global/bin\n     - /Users/me/.gvm/gos/go1.8.3/bin\n     - /Users/me/.gvm/pkgsets/go1.8.3/global/overlay/bin\n     - /Users/me/.gvm/bin\n     - /Users/me/go\n     - /Users/me/go/bin\n     - /Library/Frameworks/Python.framework/Versions/3.6/bin\n     - ~/npm-global/bin\n     - /Users/me/.yarn/bin\n     - /Users/me/bin\n     - /usr/local/heroku/bin\n     - /usr/local/mysql/bin\n     - /usr/local/mysql/bin\n     - /Users/me/.rvm/bin\n     - /Users/me/.rvm/bin\n     - /Users/me/.rvm/bin\n     - /Users/me/.rvm/bin\n</code></pre>\n"}, {"tags": ["excel", "ruby", "encoding", "utf-8", "ascii"], "comments": [{"owner": {"reputation": 5450, "user_id": 2758823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Nxaq.jpg?s=128&g=1", "display_name": "Giacomo Catenazzi", "link": "https://stackoverflow.com/users/2758823/giacomo-catenazzi"}, "edited": false, "score": 1, "creation_date": 1576846255, "post_id": 59425264, "comment_id": 105037093, "body": "<code>&#163;</code> is not <code>US-ASCII</code> as you see in the link you send. Check <a href=\"https://stackoverflow.com/questions/7047944/ruby-read-csv-file-as-utf-8-and-or-convert-ascii-8bit-encoding-to-utf-8\" title=\"ruby read csv file as utf 8 and or convert ascii 8bit encoding to utf 8\">stackoverflow.com/questions/7047944/&hellip;</a>"}, {"owner": {"reputation": 4020, "user_id": 1455176, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/384bde12832c12deef6e9a75b08bafc4?s=128&d=identicon&r=PG", "display_name": "mottalrd", "link": "https://stackoverflow.com/users/1455176/mottalrd"}, "reply_to_user": {"reputation": 5450, "user_id": 2758823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Nxaq.jpg?s=128&g=1", "display_name": "Giacomo Catenazzi", "link": "https://stackoverflow.com/users/2758823/giacomo-catenazzi"}, "edited": false, "score": 0, "creation_date": 1576847518, "post_id": 59425264, "comment_id": 105037644, "body": "Thank you Giacomo. But if that&#39;s the case what symbol and encoding is Excel using when reading it back?"}, {"owner": {"reputation": 5450, "user_id": 2758823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Nxaq.jpg?s=128&g=1", "display_name": "Giacomo Catenazzi", "link": "https://stackoverflow.com/users/2758823/giacomo-catenazzi"}, "edited": false, "score": 1, "creation_date": 1576848318, "post_id": 59425264, "comment_id": 105038026, "body": "The point I wanted to make: use <code>ISO8859-1</code> as encoding. Reading and writing has much symmetry. From one you learn about the other."}, {"owner": {"reputation": 4020, "user_id": 1455176, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/384bde12832c12deef6e9a75b08bafc4?s=128&d=identicon&r=PG", "display_name": "mottalrd", "link": "https://stackoverflow.com/users/1455176/mottalrd"}, "reply_to_user": {"reputation": 5450, "user_id": 2758823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Nxaq.jpg?s=128&g=1", "display_name": "Giacomo Catenazzi", "link": "https://stackoverflow.com/users/2758823/giacomo-catenazzi"}, "edited": false, "score": 0, "creation_date": 1576852828, "post_id": 59425264, "comment_id": 105040104, "body": "Thank you Giacomo, I&#39;ll give it a try!"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1576853589, "post_id": 59425264, "comment_id": 105040458, "body": "IIRC, Excel prefixes UTF-8 CSV files with a <a href=\"https://en.wikipedia.org/wiki/Byte_order_mark\" rel=\"nofollow noreferrer\">BOM</a>. You might give it a try and see if it makes importing easier."}, {"owner": {"reputation": 4020, "user_id": 1455176, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/384bde12832c12deef6e9a75b08bafc4?s=128&d=identicon&r=PG", "display_name": "mottalrd", "link": "https://stackoverflow.com/users/1455176/mottalrd"}, "edited": false, "score": 0, "creation_date": 1577171212, "post_id": 59425264, "comment_id": 105110202, "body": "I wrote in ISO as Giacomo suggested, and it worked!"}], "answers": [{"comments": [{"owner": {"reputation": 4020, "user_id": 1455176, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/384bde12832c12deef6e9a75b08bafc4?s=128&d=identicon&r=PG", "display_name": "mottalrd", "link": "https://stackoverflow.com/users/1455176/mottalrd"}, "edited": false, "score": 0, "creation_date": 1576847714, "post_id": 59425565, "comment_id": 105037746, "body": "Thank you. Is there any way to inform Excel of which encoding to use without requiring the user intervention?"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "reply_to_user": {"reputation": 4020, "user_id": 1455176, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/384bde12832c12deef6e9a75b08bafc4?s=128&d=identicon&r=PG", "display_name": "mottalrd", "link": "https://stackoverflow.com/users/1455176/mottalrd"}, "edited": false, "score": 0, "creation_date": 1577084975, "post_id": 59425565, "comment_id": 105084876, "body": "@mottalrd : How is the user using Excel to  read the file? If he starts Excel and then imports the CSV, this <b>is</b> already user intervention. Or do you want to strart Excel from the command line, with the file actually being opened automatically?"}, {"owner": {"reputation": 4020, "user_id": 1455176, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/384bde12832c12deef6e9a75b08bafc4?s=128&d=identicon&r=PG", "display_name": "mottalrd", "link": "https://stackoverflow.com/users/1455176/mottalrd"}, "edited": false, "score": 0, "creation_date": 1577171180, "post_id": 59425565, "comment_id": 105110190, "body": "Thank you for checking. The user is just double clicking on the Excel in my case, they are not explicitly importing it. I solved by writing the file in ISO format for now. Thanks!"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "reply_to_user": {"reputation": 4020, "user_id": 1455176, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/384bde12832c12deef6e9a75b08bafc4?s=128&d=identicon&r=PG", "display_name": "mottalrd", "link": "https://stackoverflow.com/users/1455176/mottalrd"}, "edited": false, "score": 0, "creation_date": 1577270237, "post_id": 59425565, "comment_id": 105132253, "body": "You mean: Double-click on an Icon representing a Link to the Excel application? How then can he select, which CSV-file to read?"}], "tags": [], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "is_accepted": false, "score": 2, "last_activity_date": 1576846235, "creation_date": 1576846235, "answer_id": 59425565, "question_id": 59425264, "link": "https://stackoverflow.com/questions/59425264/how-do-i-write-the-%c2%a3-gbp-sign-in-a-csv-file-from-ruby-and-read-it-back-correct/59425565#59425565", "title": "How do I write the &#163; (GBP) sign in a CSV file from Ruby and read it back correctly in Excel?", "body": "<p>For sure, Excel is not bound to use ASCII. For instance, I can easily input japanese characters into an Excel cell, and these are certainly not representable by ASCII. </p>\n\n<p>While Ruby, by default, uses Unicode in its internal representation, every String object incorporates its own encoding, so you could in theory mix strings with different encodings, if you want to. In your case, you want to force a certain encoding when writing a file. This can be done either by using the <code>w:</code> output option, as you did, or by using <code>external_encoding: Encoding::US-ASCII</code>. See <a href=\"https://docs.ruby-lang.org/en/2.1.0/Encoding.html\" rel=\"nofollow noreferrer\">here</a> for the names of the constants in <code>Encoding</code>.</p>\n\n<p>I don't think US-ASCII is a good choice for the encoding, simply because there is no pound symbol in the <a href=\"http://www.asciitable.com/\" rel=\"nofollow noreferrer\">ASCII chart</a>. I would have expected that you get a warning message on stderr, when trying to write a pound symbol. If you need an 8-bit-encoding, <code>ISO-8859-1</code> should do the job, but my recommendation would be to write UTF-8 and <a href=\"https://www.itg.ias.edu/content/how-import-csv-file-uses-utf-8-character-encoding-0\" rel=\"nofollow noreferrer\">tell Excel to use this encoding when reading the CSV file</a>. The possibility to import UTF exists at least since Excel 2007.</p>\n"}], "owner": {"reputation": 4020, "user_id": 1455176, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/384bde12832c12deef6e9a75b08bafc4?s=128&d=identicon&r=PG", "display_name": "mottalrd", "link": "https://stackoverflow.com/users/1455176/mottalrd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576846235, "creation_date": 1576844868, "question_id": 59425264, "link": "https://stackoverflow.com/questions/59425264/how-do-i-write-the-%c2%a3-gbp-sign-in-a-csv-file-from-ruby-and-read-it-back-correct", "title": "How do I write the &#163; (GBP) sign in a CSV file from Ruby and read it back correctly in Excel?", "body": "<p>When I write a CSV file using Ruby containing the <code>\u00a3</code> sign and I open it using Excel I see this symbol instead <code>\u00ac\u00a3</code>.</p>\n\n<p>My understanding is that Ruby uses UTF-8, but Excel interprets this file using a different encoding (<a href=\"https://social.msdn.microsoft.com/Forums/vstudio/en-US/fd68c88b-13a8-4c51-9aee-ff890be74b25/excel-prefixing-my-csv-currency-values-with-?forum=vbgeneral\" rel=\"nofollow noreferrer\">ASCII</a>).</p>\n\n<p>I tried to write a US-ASCII encoded CSV file <a href=\"https://stackoverflow.com/questions/24675040/correct-ascii-value-of-pound-sign\">and guessed the \u00a3 encoding in ASCII</a> like this:</p>\n\n<pre><code>csv = CSV.open(filename, 'w:US-ASCII')\ncsv &lt;&lt; \"\\xA3\"\ncsv.close\n</code></pre>\n\n<p>but it fails with <code>invalid byte sequence in UTF-8</code> somewhere deep into the CSV library.</p>\n\n<p>What am I doing wrong?<br>\nThank you</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 1, "creation_date": 1576847760, "post_id": 59424411, "comment_id": 105037775, "body": "You have to reinstall the pg gem, after some update (brew?) probably also the version of openssl was changed."}, {"owner": {"reputation": 591, "user_id": 4446392, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_Kho4T3gWxo/AAAAAAAAAAI/AAAAAAAAA0A/V0G_Q80LxkM/photo.jpg?sz=128", "display_name": "Chathura Jayanath", "link": "https://stackoverflow.com/users/4446392/chathura-jayanath"}, "reply_to_user": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 1, "creation_date": 1576944641, "post_id": 59424411, "comment_id": 105059599, "body": "I have tried that way. No good. But fixed it after removing and re installing postgres. PG gem looks ok. Thank you.. you made me look something i never thought."}], "answers": [{"tags": [], "owner": {"reputation": 5935, "user_id": 365860, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/PPe6C.jpg?s=128&g=1", "display_name": "Nezir", "link": "https://stackoverflow.com/users/365860/nezir"}, "is_accepted": false, "score": 0, "last_activity_date": 1576948183, "creation_date": 1576948183, "answer_id": 59438200, "question_id": 59424411, "link": "https://stackoverflow.com/questions/59424411/rails-start-server-give-error-on-image-not-found-how-do-i-fix-this-error/59438200#59438200", "title": "Rails start server give error on image not found. How do I fix this error?", "body": "<p>Can you try this steps first:</p>\n\n<pre><code>gem install pg\ngem pristine --all\n</code></pre>\n\n<p>If this doesn't work then can you please try this solution here:\n<a href=\"https://stackoverflow.com/questions/11127486/rails-postgres-error-reason-incompatible-library-version-libpq-5-dylib-requ\">Incompatible library version</a> </p>\n"}], "owner": {"reputation": 591, "user_id": 4446392, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_Kho4T3gWxo/AAAAAAAAAAI/AAAAAAAAA0A/V0G_Q80LxkM/photo.jpg?sz=128", "display_name": "Chathura Jayanath", "link": "https://stackoverflow.com/users/4446392/chathura-jayanath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 517, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576948183, "creation_date": 1576840610, "question_id": 59424411, "link": "https://stackoverflow.com/questions/59424411/rails-start-server-give-error-on-image-not-found-how-do-i-fix-this-error", "title": "Rails start server give error on image not found. How do I fix this error?", "body": "<p><code>rails s</code> gives following error. I have set the default ruby version as 2.6.3, Gemfile also contains the same. I also try to create a new app and it's working fine. Any advice to fix this issue? My current os is Mac Catalina. I have already tried to uninstall OpenSSL and reinstall it. But no luck.</p>\n\n<pre><code>    58: from /Users/Choota/Documents/Chathura/Personal/LurnRoR/bin/rails:3:in `&lt;main&gt;'\n    57: from /Users/Choota/Documents/Chathura/Personal/LurnRoR/bin/rails:3:in `load'\n    56: from /Users/Choota/Documents/Chathura/Personal/LurnRoR/bin/spring:15:in `&lt;top (required)&gt;'\n    55: from /Users/Choota/.rvm/rubies/ruby-2.6.3/lib/ruby/site_ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    54: from /Users/Choota/.rvm/rubies/ruby-2.6.3/lib/ruby/site_ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    53: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/binstub.rb:11:in `&lt;top (required)&gt;'\n    52: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/binstub.rb:11:in `load'\n    51: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/bin/spring:49:in `&lt;top (required)&gt;'\n    50: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/client.rb:30:in `run'\n    49: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/client/command.rb:7:in `call'\n    48: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/client/rails.rb:28:in `call'\n    47: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/spring-2.1.0/lib/spring/client/rails.rb:28:in `load'\n    46: from /Users/Choota/Documents/Chathura/Personal/LurnRoR/bin/rails:9:in `&lt;top (required)&gt;'\n    45: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:291:in `require'\n    44: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:257:in `load_dependency'\n    43: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:291:in `block in require'\n    42: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require'\n    41: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require_with_bootsnap_lfi'\n    40: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/loaded_features_index.rb:92:in `register'\n    39: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `block in require_with_bootsnap_lfi'\n    38: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `require'\n    37: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/commands.rb:18:in `&lt;main&gt;'\n    36: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/command.rb:46:in `invoke'\n    35: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/command/base.rb:65:in `perform'\n    34: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/thor-0.20.3/lib/thor.rb:387:in `dispatch'\n    33: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/thor-0.20.3/lib/thor/invocation.rb:126:in `invoke_command'\n    32: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/thor-0.20.3/lib/thor/command.rb:27:in `run'\n    31: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/commands/server/server_command.rb:142:in `perform'\n    30: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/commands/server/server_command.rb:142:in `tap'\n    29: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/railties-5.2.3/lib/rails/commands/server/server_command.rb:145:in `block in perform'\n    28: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:291:in `require'\n    27: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:257:in `load_dependency'\n    26: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:291:in `block in require'\n    25: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require'\n    24: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require_with_bootsnap_lfi'\n    23: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/loaded_features_index.rb:92:in `register'\n    22: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `block in require_with_bootsnap_lfi'\n    21: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `require'\n    20: from /Users/Choota/Documents/Chathura/Personal/LurnRoR/config/application.rb:18:in `&lt;main&gt;'\n    19: from /Users/Choota/.rvm/rubies/ruby-2.6.3/lib/ruby/site_ruby/2.6.0/bundler.rb:114:in `require'\n    18: from /Users/Choota/.rvm/rubies/ruby-2.6.3/lib/ruby/site_ruby/2.6.0/bundler/runtime.rb:65:in `require'\n    17: from /Users/Choota/.rvm/rubies/ruby-2.6.3/lib/ruby/site_ruby/2.6.0/bundler/runtime.rb:65:in `each'\n    16: from /Users/Choota/.rvm/rubies/ruby-2.6.3/lib/ruby/site_ruby/2.6.0/bundler/runtime.rb:76:in `block in require'\n    15: from /Users/Choota/.rvm/rubies/ruby-2.6.3/lib/ruby/site_ruby/2.6.0/bundler/runtime.rb:76:in `each'\n    14: from /Users/Choota/.rvm/rubies/ruby-2.6.3/lib/ruby/site_ruby/2.6.0/bundler/runtime.rb:81:in `block (2 levels) in require'\n    13: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require'\n    12: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require_with_bootsnap_lfi'\n    11: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/loaded_features_index.rb:92:in `register'\n    10: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `block in require_with_bootsnap_lfi'\n     9: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `require'\n     8: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/pg-1.1.4/lib/pg.rb:4:in `&lt;main&gt;'\n     7: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:291:in `require'\n     6: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:257:in `load_dependency'\n     5: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:291:in `block in require'\n     4: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require'\n     3: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require_with_bootsnap_lfi'\n     2: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/loaded_features_index.rb:92:in `register'\n     1: from /Users/Choota/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `block in require_with_bootsnap_lfi'\n/Users/Choota/.rvm/gems/ruby-2.6.3/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `require': dlopen(/Users/Choota/.rvm/gems/ruby-2.6.3/gems/pg-1.1.4/lib/pg_ext.bundle, 9): Library not loaded: /usr/local/opt/openssl/lib/libssl.1.0.0.dylib (LoadError)\n  Referenced from: /usr/local/opt/postgresql/lib/libpq.5.dylib\n  Reason: image not found - /Users/Choota/.rvm/gems/ruby-2.6.3/gems/pg-1.1.4/lib/pg_ext.bundle\n</code></pre>\n\n<p>As it gives the reason, image not found, I have tried many way but still cannot run my older projects.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "mongoid", "config"], "comments": [{"owner": {"reputation": 1306, "user_id": 8008340, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/15JhO.jpg?s=128&g=1", "display_name": "Konstantin Strukov", "link": "https://stackoverflow.com/users/8008340/konstantin-strukov"}, "edited": false, "score": 1, "creation_date": 1576844379, "post_id": 59423317, "comment_id": 105036354, "body": "What about Mongoid versions for both projects?"}, {"owner": {"reputation": 2181, "user_id": 5598574, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aUJPQ.jpg?s=128&g=1", "display_name": "Hairi", "link": "https://stackoverflow.com/users/5598574/hairi"}, "reply_to_user": {"reputation": 1306, "user_id": 8008340, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/15JhO.jpg?s=128&g=1", "display_name": "Konstantin Strukov", "link": "https://stackoverflow.com/users/8008340/konstantin-strukov"}, "edited": false, "score": 0, "creation_date": 1577097129, "post_id": 59423317, "comment_id": 105089130, "body": "Please see the edit section of my post"}], "answers": [{"tags": [], "owner": {"reputation": 9592, "user_id": 9540925, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YhOpI.png?s=128&g=1", "display_name": "D. SM", "link": "https://stackoverflow.com/users/9540925/d-sm"}, "is_accepted": false, "score": 0, "last_activity_date": 1577132545, "creation_date": 1577132545, "answer_id": 59460945, "question_id": 59423317, "link": "https://stackoverflow.com/questions/59423317/mongoid-configuration-sessions-vs-clients/59460945#59460945", "title": "Mongoid configuration - sessions vs clients", "body": "<p>Mongoid 4 and 7 are significantly different. They also have different configuration.</p>\n\n<p>Mongoid 4 documentation: <a href=\"http://mongoid.github.io/old/en/mongoid/index.html\" rel=\"nofollow noreferrer\">http://mongoid.github.io/old/en/mongoid/index.html</a></p>\n\n<p>Mongoid 7 documentation: <a href=\"https://docs.mongodb.com/mongoid/7.0/\" rel=\"nofollow noreferrer\">https://docs.mongodb.com/mongoid/7.0/</a></p>\n\n<p>Mongoid 4 is no longer supported, and projects using it should upgrade to Mongoid 7.</p>\n"}], "owner": {"reputation": 2181, "user_id": 5598574, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aUJPQ.jpg?s=128&g=1", "display_name": "Hairi", "link": "https://stackoverflow.com/users/5598574/hairi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577132545, "creation_date": 1576836143, "last_edit_date": 1577096909, "question_id": 59423317, "link": "https://stackoverflow.com/questions/59423317/mongoid-configuration-sessions-vs-clients", "title": "Mongoid configuration - sessions vs clients", "body": "<p>I am new to Rails and I inherited a project that uses MongoDb. The adapter is Mongoid.</p>\n\n<p>We have two applications - Site and API. The Site and the API utilize the same mongo server and database.</p>\n\n<p>But the <strong>Site</strong> configuration is slightly different from the <strong>API</strong> configuration:</p>\n\n<p><strong>Site</strong> <em>mongiid.yml</em>:</p>\n\n<pre><code>production:\n  clients:\n    default:\n      hosts:\n      - mongodb-db2:27017\n      database: db\n      username: user_blah\n      password: pass_blah\n  options:\n    raise_not_found_error: false\n</code></pre>\n\n<p><strong>API</strong> <em>mongoid.yml</em></p>\n\n<pre><code>production:\n  sessions:\n    default:\n      hosts:\n      - mongodb-db2:27017\n      database: db\n      username: user_blah\n      password: pass_blah\n  options:\n    raise_not_found_error: false\n</code></pre>\n\n<p>Please note the difference <code>sessions</code> cs <code>clients</code>.</p>\n\n<p>I searched in the Internet to find what is the difference and came across to this <a href=\"https://www.rubydoc.info/github/mongoid/mongoid/Mongoid%2FConfig:clients\" rel=\"nofollow noreferrer\">https://www.rubydoc.info/github/mongoid/mongoid/Mongoid%2FConfig:clients</a> , \nbut didn't find what is the difference (<strong>if any</strong>)</p>\n\n<p>The question is: Is there a difference between these two configurations? I yes - some link with explanation or reference? I do not dare to make these files identical.</p>\n\n<p><strong>============ EDIT ============</strong></p>\n\n<p>Mongoid gem versions:</p>\n\n<p>API: <code>mongoid (4.0.2)</code></p>\n\n<p>Site: <code>mongo (2.6.2)\nmongoid (7.0.1)</code></p>\n"}, {"tags": ["ruby", "microsoft-graph-api"], "answers": [{"tags": [], "owner": {"reputation": 794, "user_id": 4666621, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hnEI47BsDok/AAAAAAAAAAI/AAAAAAAAAFw/nXSYVdYpWo0/photo.jpg?sz=128", "display_name": "Paul van Roosendaal", "link": "https://stackoverflow.com/users/4666621/paul-van-roosendaal"}, "is_accepted": false, "score": 1, "last_activity_date": 1577180187, "creation_date": 1577180187, "answer_id": 59466699, "question_id": 59422071, "link": "https://stackoverflow.com/questions/59422071/uploadstate-returns-commitfilefailed/59466699#59466699", "title": "uploadState returns commitFileFailed", "body": "<p>I found out what I was doing wrong. I used the PowerShell sample from Github as a base to write my own Ruby version, but I overlooked one thing.</p>\n\n<p><a href=\"https://github.com/microsoftgraph/powershell-intune-samples/tree/master/LOB_Application\" rel=\"nofollow noreferrer\">https://github.com/microsoftgraph/powershell-intune-samples/tree/master/LOB_Application</a></p>\n\n<p>I was uploading my apk file at once to the azureStorageUri, but I needed to upload it in chunks. After doing that the uploadState got updated to commitFileSuccess.</p>\n\n<p>I will share my Ruby script once I've cleaned it up!</p>\n"}], "owner": {"reputation": 794, "user_id": 4666621, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hnEI47BsDok/AAAAAAAAAAI/AAAAAAAAAFw/nXSYVdYpWo0/photo.jpg?sz=128", "display_name": "Paul van Roosendaal", "link": "https://stackoverflow.com/users/4666621/paul-van-roosendaal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577180187, "creation_date": 1576830678, "question_id": 59422071, "link": "https://stackoverflow.com/questions/59422071/uploadstate-returns-commitfilefailed", "title": "uploadState returns commitFileFailed", "body": "<p>I'm trying to create an app in InTune using the Microsoft Graph REST API. I'm able to create the app, the contentversion, upload a file to Azure Storage, and call the commit action. After that, I'm waiting for uploadState 'commitFileSuccess', but it returns 'commitFileFailed'.</p>\n\n<p>I saw a similar question, but that's assuming the file encryption is wrong:\n<a href=\"https://stackoverflow.com/questions/51919573/commitfilefailed-during-mobileappcontentfile-commit\">commitFileFailed during mobileAppContentFile Commit</a></p>\n\n<p>However, I have no clue where the error lies. Is there anybody with experience on this particular subject?\nIf you need more info, please let me know.</p>\n"}, {"tags": ["ruby", "pipe", "stdout", "jq"], "comments": [{"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 4, "creation_date": 1576828079, "post_id": 59421549, "comment_id": 105029593, "body": "<code>tail</code> shows you only the last N lines of the input. If input is not finished, tail cannot decide what to show."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 3, "creation_date": 1576829012, "post_id": 59421549, "comment_id": 105029903, "body": "<i>&quot;$stdout.sync is set to true by default (see IO#sync)&quot;</i> \u2013 where does the documentation say so?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 3, "creation_date": 1576829230, "post_id": 59421549, "comment_id": 105029999, "body": "BTW, setting <code>STDOUT.sync = true</code> explicitly works just fine for me. By default, the output is flushed automatically if the output device is a TTY, and buffered otherwise. You can check for <code>STDOUT.tty?</code> \u2013 it&#39;s <code>true</code> when writing directly to the terminal and <code>false</code> when being piped / redirected."}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 4, "creation_date": 1576829274, "post_id": 59421549, "comment_id": 105030013, "body": "^ \u2013 you might have guessed that from IRB, where <code>$stdout.sync</code> seems to be true by default, but <code>ruby -e &#39;puts $stdout.sync&#39;</code> will show what applies to your script."}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1576829438, "post_id": 59421549, "comment_id": 105030069, "body": "@AlekseiMatiushkin Does that even make sense on a pipe? (One that doesn\u2019t stay open after EOF, anyway.)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 1, "creation_date": 1576829708, "post_id": 59421549, "comment_id": 105030171, "body": "@Ry- turns out no, <code>yes | tail -f</code> hangs despite <code>man</code> uses \u201cdescriptor\u201d as the input name."}, {"owner": {"reputation": 1976, "user_id": 1177200, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/99ddd63eb79f04e76156db21c172c7f1?s=128&d=identicon&r=PG", "display_name": "taylorthurlow", "link": "https://stackoverflow.com/users/1177200/taylorthurlow"}, "reply_to_user": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1576862836, "post_id": 59421549, "comment_id": 105044302, "body": "@mrzasa You&#39;re right - I should have clarified I was using <code>tail -f</code>. My understanding of the <code>-f</code> flag is that it will not stop reading when reaching an EOF - and I&#39;m not sure that&#39;s exactly what I&#39;m looking for."}, {"owner": {"reputation": 1976, "user_id": 1177200, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/99ddd63eb79f04e76156db21c172c7f1?s=128&d=identicon&r=PG", "display_name": "taylorthurlow", "link": "https://stackoverflow.com/users/1177200/taylorthurlow"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1576863049, "post_id": 59421549, "comment_id": 105044391, "body": "@stefan As you @Ry pointed out, I falsely convinced myself that <code>$stdout.sync</code> was enabled by default because I tested the value in IRB rather than in the context of the script. Feel free to leave an answer so I can accept it."}, {"owner": {"reputation": 1976, "user_id": 1177200, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/99ddd63eb79f04e76156db21c172c7f1?s=128&d=identicon&r=PG", "display_name": "taylorthurlow", "link": "https://stackoverflow.com/users/1177200/taylorthurlow"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1576863110, "post_id": 59421549, "comment_id": 105044413, "body": "@AlekseiMatiushkin I don&#39;t quite follow - is <code>tail -f</code> hanging in this way unexpected? What can be done to prevent the hanging, if anything?"}], "answers": [{"tags": [], "owner": {"reputation": 2504, "user_id": 3729369, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FYV4M.png?s=128&g=1", "display_name": "simonwo", "link": "https://stackoverflow.com/users/3729369/simonwo"}, "is_accepted": true, "score": 1, "last_activity_date": 1577358392, "creation_date": 1577358392, "answer_id": 59487533, "question_id": 59421549, "link": "https://stackoverflow.com/questions/59421549/why-is-ruby-stdout-buffering-when-i-dont-expect-it-to/59487533#59487533", "title": "Why is Ruby STDOUT buffering when I don&#39;t expect it to?", "body": "<p>As @Ry points out <a href=\"https://stackoverflow.com/questions/59421549/why-is-ruby-stdout-buffering-when-i-dont-expect-it-to#comment105030013_59421549\">in the comments</a>, <code>$stdout.sync</code> is <code>true</code> by default in IRB, but this is not necessarily the same for scripts.</p>\n\n<p>So you should set <code>$stdout.sync = true</code> to be sure to prevent buffering.</p>\n"}], "owner": {"reputation": 1976, "user_id": 1177200, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/99ddd63eb79f04e76156db21c172c7f1?s=128&d=identicon&r=PG", "display_name": "taylorthurlow", "link": "https://stackoverflow.com/users/1177200/taylorthurlow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "accepted_answer_id": 59487533, "answer_count": 1, "score": 4, "last_activity_date": 1577358392, "creation_date": 1576827858, "question_id": 59421549, "link": "https://stackoverflow.com/questions/59421549/why-is-ruby-stdout-buffering-when-i-dont-expect-it-to", "title": "Why is Ruby STDOUT buffering when I don&#39;t expect it to?", "body": "<p>The following code is a simplification of my current situation. I have a JSON log source which I continuously fetch and write to stdout with <code>puts</code>.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>#!/usr/bin/env ruby\n\nrequire \"json\"\n\nloop do\n  puts({ value: \"foobar\" }.to_json)\n  sleep 1\nend\n</code></pre>\n\n<p>I want to be able to pipe the output of this script into <code>jq</code> for further processing, but in a 'stream'-friendly way, using unix pipes. Running the above code like so:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>./my_script | jq\n</code></pre>\n\n<p>Results in an empty output. However, if I place an <code>exit</code> statement after the <code>sleep</code> call, the output is sent through the pipe to <code>jq</code> as expected. I was able to solve this problem by calling <code>$stdout.flush</code> following the <code>puts</code> call. While it's working now, I'm not sure why. <code>$stdout.sync</code> is set to <code>true</code> by default (see <a href=\"https://ruby-doc.org/core-2.6.5/IO.html#method-i-sync\" rel=\"nofollow noreferrer\"><code>IO#sync</code></a>). It seems to me that if sync was enabled, then Ruby should be doing no output buffering, and calling <code>$stdout.flush</code> should not be required - yet it is.</p>\n\n<p>My follow-up question is about using <code>tail</code> instead of <code>jq</code>. It seems to me that I should be able to pipe a text stream into <code>tail</code> the same way I pipe it into <code>jq</code>, but neither method (with the <code>$stdout.flush</code> call or without it) works - the output is just empty.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "group-by"], "answers": [{"tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": false, "score": 3, "last_activity_date": 1576827639, "creation_date": 1576827639, "answer_id": 59421502, "question_id": 59421316, "link": "https://stackoverflow.com/questions/59421316/rails-group-by-column-and-select-column/59421502#59421502", "title": "Rails group by column and select column", "body": "<p>You can keep the query and the grouping, but append <code>as_json</code> to the operation:</p>\n\n<pre><code>DinnerItem.select(:item_id, :item_quantity).group_by(&amp;:item_id).as_json\n# {\"1\"=&gt;[{\"id\"=&gt;nil, \"item_id\"=&gt;1, \"item_quantity\"=&gt;1}, {\"id\"=&gt;nil, \"item_id\"=&gt;1, \"item_quantity\"=&gt;2}],\n#  \"2\"=&gt;[{\"id\"=&gt;nil, \"item_id\"=&gt;2, \"item_quantity\"=&gt;1}, {\"id\"=&gt;nil, \"item_id\"=&gt;2, \"item_quantity\"=&gt;2}]}\n</code></pre>\n\n<p>Notice as_json will add the id of each row which will have a nil value.</p>\n"}, {"tags": [], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "is_accepted": false, "score": 1, "last_activity_date": 1576835773, "creation_date": 1576835773, "answer_id": 59423233, "question_id": 59421316, "link": "https://stackoverflow.com/questions/59421316/rails-group-by-column-and-select-column/59423233#59423233", "title": "Rails group by column and select column", "body": "<p>I don't know that this is possible without transforming the value returned from the db. If you are able to transform this, the following should work to give you the desired format:</p>\n\n<pre><code>OfferServiceModels::DinnerItem.all.select('item_id, item_quantity').group_by(&amp;:item_id)\n                              .transform_values { |vals| vals.map(&amp;:item_quantity) }\n# =&gt; {\"1\"=&gt;[nil,{\"50\"=&gt;30, \"100\"=&gt;10}],\"4\"=&gt;...}\n\n#\u00a0or\n\nOfferServiceModels::DinnerItem.all.select('item_id, item_quantity').group_by(&amp;:item_id)\n                              .transform_values { |vals| vals.map { |val| val.slice(:item_quantity) }\n # =&gt; {\"1\"=&gt;[{:item_quantity=&gt;nil},:item_quantity=&gt;{\"50\"=&gt;30, \"100\"=&gt;10}}],\"4\"=&gt;...}\n</code></pre>\n\n<p>I'd argue there's nothing wrong with the output you're receiving straight from the db though. The data is there, so output the relevant field when needed: either through a transformation like above or when iterating through the data.</p>\n\n<p>Hope this helps in some way, let me know :)</p>\n"}, {"tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": true, "score": 6, "last_activity_date": 1618152905, "last_edit_date": 1618152905, "creation_date": 1576836998, "answer_id": 59423536, "question_id": 59421316, "link": "https://stackoverflow.com/questions/59421316/rails-group-by-column-and-select-column/59423536#59423536", "title": "Rails group by column and select column", "body": "<p>Something like this should do the job:</p>\n<pre class=\"lang-rb prettyprint-override\"><code>result = OfferServiceModels::DinnerItem\n  .pluck(:item_id, :item_quantity)\n  .group_by(&amp;:shift)\n  .transform_values(&amp;:flatten)\n#=&gt; {1 =&gt; [10, 20], 2 =&gt; [30, 40]}\n#    ^ item id            ^^  ^^ item quantity\n</code></pre>\n<p>A step by step explanation:</p>\n<pre class=\"lang-rb prettyprint-override\"><code># retrieve the item_id and item_quantity for each record\nresult = OfferServiceModels::DinnerItem.pluck(:item_id, :item_quantity)\n#=&gt; [[1, 10] [1, 20], [2, 30], [2, 40]]\n#     ^ item id           ^^ item quantity\n\n# group the records by item id, removing the item id from the array\nresult = result.group_by(&amp;:shift)\n#=&gt; {1 =&gt; [[10], [20]], 2 =&gt; [[30], [40]]}\n#    ^ item id                 ^^    ^^ item quantity\n\n# flatten the groups since we don't want double nested arrays\nresult = result.transform_values(&amp;:flatten)\n#=&gt; {1 =&gt; [10, 20], 2 =&gt; [30, 40]}\n#    ^ item id            ^^  ^^ item quantity\n</code></pre>\n<p><strong>references:</strong></p>\n<ul>\n<li><a href=\"https://api.rubyonrails.org/classes/ActiveRecord/Calculations.html#method-i-pluck\" rel=\"nofollow noreferrer\"><code>pluck</code></a></li>\n<li><a href=\"https://ruby-doc.org/core-2.6.5/Enumerable.html#method-i-group_by\" rel=\"nofollow noreferrer\"><code>group_by</code></a></li>\n<li><a href=\"https://ruby-doc.org/core-2.6.5/Array.html#method-i-shift\" rel=\"nofollow noreferrer\"><code>shift</code></a></li>\n<li><a href=\"https://ruby-doc.org/core-2.6.5/Hash.html#method-i-transform_values\" rel=\"nofollow noreferrer\"><code>transform_values</code></a></li>\n<li><a href=\"https://ruby-doc.org/core-2.6.5/Array.html#method-i-flatten\" rel=\"nofollow noreferrer\"><code>flatten</code></a></li>\n</ul>\n"}], "owner": {"reputation": 645, "user_id": 6285605, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d21129320196972e88809eefe996bdc2?s=128&d=identicon&r=PG&f=1", "display_name": "Suganya Selvarajan", "link": "https://stackoverflow.com/users/6285605/suganya-selvarajan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2909, "favorite_count": 1, "accepted_answer_id": 59423536, "answer_count": 3, "score": 4, "last_activity_date": 1618152905, "creation_date": 1576826476, "question_id": 59421316, "link": "https://stackoverflow.com/questions/59421316/rails-group-by-column-and-select-column", "title": "Rails group by column and select column", "body": "<p>I have a table DinnerItem with columns id, name, project_id, client_id, item_id and item_quantity.</p>\n\n<p>I want to fetch data group_by item_id column and the value should only have the item_quantity column value in the format </p>\n\n<pre><code>{ item_id1 =&gt; [ {item_quantity from row1}, {item_quantity from row2}],\n  item_id2 =&gt; [ {item_quantity from row3}, {item_quantity from row4} ]\n}\n</code></pre>\n\n<p>How can I achieve it in one single query?</p>\n\n<pre><code>OfferServiceModels::DinnerItem.all.select('item_id, item_quantity').group_by(&amp;:item_id)\n</code></pre>\n\n<p>But this has the format</p>\n\n<pre><code> {1=&gt;[#&lt;DinnerItem id: nil, item_id: 1, item_quantity: nil&gt;, #&lt;DinnerItem id: nil, item_id: 1, item_quantity: {\"50\"=&gt;30, \"100\"=&gt;10}&gt;], 4=&gt;[#&lt;DinnerItem id: nil, item_id: 4, item_quantity: {\"100\"=&gt;5, \"1000\"=&gt;2}&gt;}\n</code></pre>\n"}, {"tags": ["ruby", "multithreading"], "comments": [{"owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "edited": false, "score": 2, "creation_date": 1576826621, "post_id": 59421234, "comment_id": 105029090, "body": "&quot;The standard Ruby logger rescues Exception, so if it&#39;s re-raised in the main thread, just as it&#39;s logging, the Logger will catch it and ignore it...&quot; where did you get this assumption from? Just instantiating a Logger (as you&#39;re doing in your examples) would not catch any exceptions."}, {"owner": {"reputation": 2709, "user_id": 650711, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6276db3f126cef8682f9374f75734acc?s=128&d=identicon&r=PG", "display_name": "Linus", "link": "https://stackoverflow.com/users/650711/linus"}, "reply_to_user": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "edited": false, "score": 0, "creation_date": 1576831163, "post_id": 59421234, "comment_id": 105030717, "body": "I&#39;m not only instantiating it. I&#39;m also calling <code>.info(&quot;FOO&quot;)</code> which actually logs. It rescues here: <a href=\"https://github.com/ruby/ruby/blob/ruby_2_6/lib/logger.rb#L700-L701\" rel=\"nofollow noreferrer\">github.com/ruby/ruby/blob/ruby_2_6/lib/logger.rb#L700-L701</a>"}], "owner": {"reputation": 2709, "user_id": 650711, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6276db3f126cef8682f9374f75734acc?s=128&d=identicon&r=PG", "display_name": "Linus", "link": "https://stackoverflow.com/users/650711/linus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1576831189, "creation_date": 1576826118, "last_edit_date": 1576831189, "question_id": 59421234, "link": "https://stackoverflow.com/questions/59421234/thread-abort-on-exception-raises-anywhere", "title": "Thread.abort_on_exception raises anywhere?", "body": "<p>When using <code>Thread.abort_on_exception = true</code> any unhandled exception in a thread will be re-reaised in the main thread.</p>\n\n<p>Now, it looks like it can be raised at any time which causes some issues making it really really hard to use.</p>\n\n<p>Example:</p>\n\n<pre><code># frozen_string_literal: true\n\nrequire(\"logger\")\n\nThread.abort_on_exception = true\n\nThread.new do\n  raise(Exception)\nend\n\nLogger.new(STDOUT).info(\"FOO\")\n\nsleep\n</code></pre>\n\n<p>Running this code will sometimes print:</p>\n\n<pre><code>\u276f ruby ruby_fail.rb\nI, [2019-12-20T08:08:12.308942 #41552]  INFO -- : FOO\n#&lt;Thread:0x00007f90f21dd0c8@ruby_fail.rb:7 run&gt; terminated with exception (report_on_exception is true):\nTraceback (most recent call last):\nruby_fail.rb:8:in `block in &lt;main&gt;': Exception (Exception)\nlog writing failed. Exception\n</code></pre>\n\n<p>And the process keeps running.\nHowever, sometimes it prints:</p>\n\n<pre><code>\u276f ruby ruby_fail.rb\nI, [2019-12-20T08:08:19.861318 #41971]  INFO -- : FOO\n#&lt;Thread:0x00007feb5012d048@ruby_fail.rb:7 run&gt; terminated with exception (report_on_exception is true):\nTraceback (most recent call last):\nruby_fail.rb:8:in `block in &lt;main&gt;': Exception (Exception)\nTraceback (most recent call last):\nruby_fail.rb:8:in `block in &lt;main&gt;': Exception (Exception)\n</code></pre>\n\n<p>And the process dies.</p>\n\n<p>This seems to be a timing issue. The standard Ruby logger <a href=\"https://github.com/ruby/ruby/blob/ruby_2_6/lib/logger.rb#L700-L701\" rel=\"nofollow noreferrer\">rescues <code>Exception</code></a>, so if it's re-raised in the main thread, just as it's logging, the Logger will catch it and ignore it...</p>\n\n<p>Is this a ruby bug? If not...using <code>Thread.abort_on_exception</code> seems pretty useless as it won't ever be predictable.</p>\n\n<p>Using Ruby 2.6.5</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ruby-on-rails-5", "actioncable"], "comments": [{"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "edited": false, "score": 0, "creation_date": 1576811665, "post_id": 59418755, "comment_id": 105025907, "body": "Does the <code>html_message</code> contain the full chat partial view?  (including the contacts on the left and the messages on the right; basically are you rerendering the whole thing?) or does it only contain the &quot;new&quot; message, and then you have a JS that adds/inserts this message to the right pane?"}, {"owner": {"reputation": 1, "user_id": 12317523, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xdOKcgNSF1I/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfkO5lnkBek5r6o23TfTdUIUfgp2A/photo.jpg?sz=128", "display_name": "Nathan NT", "link": "https://stackoverflow.com/users/12317523/nathan-nt"}, "reply_to_user": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "edited": false, "score": 0, "creation_date": 1576815288, "post_id": 59418755, "comment_id": 105026511, "body": "No html_message is just a partial of my message <code>&lt;li class=&quot;replies&quot;&gt;&lt;p&gt;&lt;%= message %&gt;&lt;&#47;p&gt;&lt;&#47;li&gt;</code> and for the sender partial i just change class to &quot;sent&quot;"}, {"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "edited": false, "score": 0, "creation_date": 1576850293, "post_id": 59418755, "comment_id": 105038939, "body": "Since you are rendering the views through ActionCable, I think I&#39;ll do the same thing as you did like <code>all_users_except_sender ... ActionCable.server.broadcast</code> because the &quot;rendering of the views&quot; is handled by the backend-side and not the js-client-side. I don&#39;t think there&#39;s a way to exclude the sender (magically), because the sender is agnostic of the &quot;pub-sub&quot;; that is if a client is subscribed to <code>&quot;chat_19&quot;</code>, then it normally receives all data broadcasted to <code>&quot;chat_19&quot;</code> regardless if it&#39;s the same user or not. You&#39;ll need to do something like what you have above."}], "owner": {"reputation": 1, "user_id": 12317523, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xdOKcgNSF1I/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfkO5lnkBek5r6o23TfTdUIUfgp2A/photo.jpg?sz=128", "display_name": "Nathan NT", "link": "https://stackoverflow.com/users/12317523/nathan-nt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1576804235, "creation_date": 1576804235, "question_id": 59418755, "link": "https://stackoverflow.com/questions/59418755/differentiate-a-send-and-a-receiver-with-actioncable", "title": "Differentiate a send and a receiver with actioncable", "body": "<p>I currently use actioncable, but I am facing a problem, I would like to create an messenger app I would like to put the recipient on one side and the senders of the other.\nFor exemple :\n<a href=\"https://i.stack.imgur.com/rhsHI.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>So the objective is to make a comparison between the sender and the connected user but the problem is that the views used by actioncable only know the variables that we sent him. so the view can only take the sender user instance.</p>\n\n<p>Anybody have a method to exclude sender to receive broadcast ?</p>\n\n<p>I can also do that</p>\n\n<pre><code>    all_users_except_sender.each do |user|\n    ActionCable.server.broadcast(\"chat_#{user.id}\", message: html_message)\nend\nActionCable.server.broadcast(\"chat_#{current_user.id}\", message: html_message_for_sender)\n</code></pre>\n\n<p>or put sender as html attribut and detect message from other user with erb javascript\nbut i don't think it's good practice</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-6", "wice-grid"], "comments": [{"owner": {"reputation": 2599, "user_id": 12201472, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PcsKV9F65CQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3repCiEtFeVMa1z1D-JpXuqg5wlw6w/photo.jpg?sz=128", "display_name": "Marian13", "link": "https://stackoverflow.com/users/12201472/marian13"}, "edited": false, "score": 1, "creation_date": 1576802865, "post_id": 59418527, "comment_id": 105024514, "body": "Probably, this answer will help to understand what was the cause of your problem. <a href=\"https://stackoverflow.com/a/23251853/12201472\">stackoverflow.com/a/23251853/12201472</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5272, "user_id": 1745902, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/a629f4656cabd0433729ab0c6523cedd?s=128&d=identicon&r=PG", "display_name": "Askar", "link": "https://stackoverflow.com/users/1745902/askar"}, "is_accepted": false, "score": 1, "last_activity_date": 1576802482, "creation_date": 1576802482, "answer_id": 59418597, "question_id": 59418527, "link": "https://stackoverflow.com/questions/59418527/could-not-find-generator-wice-gridinstall/59418597#59418597", "title": "Could not find generator &#39;wice_grid:install&#39;", "body": "<h1>Just found a solution:</h1>\n\n<ol>\n<li>spring stop</li>\n<li>rails g wice_grid:install</li>\n</ol>\n\n<h1>Result</h1>\n\n<pre><code>$ rails g wice_grid:install\nRunning via Spring preloader in process 32550\ncreate  config/initializers/wice_grid_config.rb\n</code></pre>\n\n<h1>Reference</h1>\n\n<p><a href=\"https://qiita.com/NaokiIshimura/items/e01cb95d71ffa5811f63\" rel=\"nofollow noreferrer\">https://qiita.com/NaokiIshimura/items/e01cb95d71ffa5811f63</a></p>\n"}], "owner": {"reputation": 5272, "user_id": 1745902, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/a629f4656cabd0433729ab0c6523cedd?s=128&d=identicon&r=PG", "display_name": "Askar", "link": "https://stackoverflow.com/users/1745902/askar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576802482, "creation_date": 1576801717, "question_id": 59418527, "link": "https://stackoverflow.com/questions/59418527/could-not-find-generator-wice-gridinstall", "title": "Could not find generator &#39;wice_grid:install&#39;", "body": "<h1>Environment</h1>\n\n<ul>\n<li>Ubuntu 18.04</li>\n<li>ruby 2.6.5p114 (2019-10-01 revision 67812) [x86_64-linux]</li>\n<li>Rails 6.0.2.1</li>\n</ul>\n\n<h1>Gemfile.lock</h1>\n\n<pre><code>GEM\n  remote: https://rubygems.org/\n  specs:\n    actioncable (6.0.2.1)\n      actionpack (= 6.0.2.1)\n      nio4r (~&gt; 2.0)\n      websocket-driver (&gt;= 0.6.1)\n    actionmailbox (6.0.2.1)\n      actionpack (= 6.0.2.1)\n      activejob (= 6.0.2.1)\n      activerecord (= 6.0.2.1)\n      activestorage (= 6.0.2.1)\n      activesupport (= 6.0.2.1)\n      mail (&gt;= 2.7.1)\n    actionmailer (6.0.2.1)\n      actionpack (= 6.0.2.1)\n      actionview (= 6.0.2.1)\n      activejob (= 6.0.2.1)\n      mail (~&gt; 2.5, &gt;= 2.5.4)\n      rails-dom-testing (~&gt; 2.0)\n    actionpack (6.0.2.1)\n      actionview (= 6.0.2.1)\n      activesupport (= 6.0.2.1)\n      rack (~&gt; 2.0, &gt;= 2.0.8)\n      rack-test (&gt;= 0.6.3)\n      rails-dom-testing (~&gt; 2.0)\n      rails-html-sanitizer (~&gt; 1.0, &gt;= 1.2.0)\n    actiontext (6.0.2.1)\n      actionpack (= 6.0.2.1)\n      activerecord (= 6.0.2.1)\n      activestorage (= 6.0.2.1)\n      activesupport (= 6.0.2.1)\n      nokogiri (&gt;= 1.8.5)\n    actionview (6.0.2.1)\n      activesupport (= 6.0.2.1)\n      builder (~&gt; 3.1)\n      erubi (~&gt; 1.4)\n      rails-dom-testing (~&gt; 2.0)\n      rails-html-sanitizer (~&gt; 1.1, &gt;= 1.2.0)\n    activejob (6.0.2.1)\n      activesupport (= 6.0.2.1)\n      globalid (&gt;= 0.3.6)\n    activemodel (6.0.2.1)\n      activesupport (= 6.0.2.1)\n    activerecord (6.0.2.1)\n      activemodel (= 6.0.2.1)\n      activesupport (= 6.0.2.1)\n    activestorage (6.0.2.1)\n      actionpack (= 6.0.2.1)\n      activejob (= 6.0.2.1)\n      activerecord (= 6.0.2.1)\n      marcel (~&gt; 0.3.1)\n    activesupport (6.0.2.1)\n      concurrent-ruby (~&gt; 1.0, &gt;= 1.0.2)\n      i18n (&gt;= 0.7, &lt; 2)\n      minitest (~&gt; 5.1)\n      tzinfo (~&gt; 1.1)\n      zeitwerk (~&gt; 2.2)\n    addressable (2.7.0)\n      public_suffix (&gt;= 2.0.2, &lt; 5.0)\n    bindex (0.8.1)\n    bootsnap (1.4.5)\n      msgpack (~&gt; 1.0)\n    builder (3.2.4)\n    byebug (11.0.1)\n    capybara (3.29.0)\n      addressable\n      mini_mime (&gt;= 0.1.3)\n      nokogiri (~&gt; 1.8)\n      rack (&gt;= 1.6.0)\n      rack-test (&gt;= 0.6.3)\n      regexp_parser (~&gt; 1.5)\n      xpath (~&gt; 3.2)\n    childprocess (3.0.0)\n    coffee-rails (5.0.0)\n      coffee-script (&gt;= 2.2.0)\n      railties (&gt;= 5.2.0)\n    coffee-script (2.4.1)\n      coffee-script-source\n      execjs\n    coffee-script-source (1.12.2)\n    concurrent-ruby (1.1.5)\n    crass (1.0.5)\n    erubi (1.9.0)\n    execjs (2.7.0)\n    ffi (1.11.3)\n    font-awesome-sass (4.7.0)\n      sass (&gt;= 3.2)\n    globalid (0.4.2)\n      activesupport (&gt;= 4.2.0)\n    i18n (1.7.0)\n      concurrent-ruby (~&gt; 1.0)\n    jbuilder (2.9.1)\n      activesupport (&gt;= 4.2.0)\n    kaminari (0.17.0)\n      actionpack (&gt;= 3.0.0)\n      activesupport (&gt;= 3.0.0)\n    listen (3.1.5)\n      rb-fsevent (~&gt; 0.9, &gt;= 0.9.4)\n      rb-inotify (~&gt; 0.9, &gt;= 0.9.7)\n      ruby_dep (~&gt; 1.2)\n    loofah (2.4.0)\n      crass (~&gt; 1.0.2)\n      nokogiri (&gt;= 1.5.9)\n    mail (2.7.1)\n      mini_mime (&gt;= 0.1.1)\n    marcel (0.3.3)\n      mimemagic (~&gt; 0.3.2)\n    method_source (0.9.2)\n    mimemagic (0.3.3)\n    mini_mime (1.0.2)\n    mini_portile2 (2.4.0)\n    minitest (5.13.0)\n    msgpack (1.3.1)\n    mysql2 (0.5.3)\n    nio4r (2.5.2)\n    nokogiri (1.10.7)\n      mini_portile2 (~&gt; 2.4.0)\n    public_suffix (4.0.1)\n    puma (4.3.1)\n      nio4r (~&gt; 2.0)\n    rack (2.0.8)\n    rack-proxy (0.6.5)\n      rack\n    rack-test (1.1.0)\n      rack (&gt;= 1.0, &lt; 3)\n    rails (6.0.2.1)\n      actioncable (= 6.0.2.1)\n      actionmailbox (= 6.0.2.1)\n      actionmailer (= 6.0.2.1)\n      actionpack (= 6.0.2.1)\n      actiontext (= 6.0.2.1)\n      actionview (= 6.0.2.1)\n      activejob (= 6.0.2.1)\n      activemodel (= 6.0.2.1)\n      activerecord (= 6.0.2.1)\n      activestorage (= 6.0.2.1)\n      activesupport (= 6.0.2.1)\n      bundler (&gt;= 1.3.0)\n      railties (= 6.0.2.1)\n      sprockets-rails (&gt;= 2.0.0)\n    rails-dom-testing (2.0.3)\n      activesupport (&gt;= 4.2.0)\n      nokogiri (&gt;= 1.6)\n    rails-html-sanitizer (1.3.0)\n      loofah (~&gt; 2.3)\n    railties (6.0.2.1)\n      actionpack (= 6.0.2.1)\n      activesupport (= 6.0.2.1)\n      method_source\n      rake (&gt;= 0.8.7)\n      thor (&gt;= 0.20.3, &lt; 2.0)\n    rake (13.0.1)\n    rb-fsevent (0.10.3)\n    rb-inotify (0.10.0)\n      ffi (~&gt; 1.0)\n    regexp_parser (1.6.0)\n    ruby_dep (1.5.0)\n    rubyzip (2.0.0)\n    sass (3.7.4)\n      sass-listen (~&gt; 4.0.0)\n    sass-listen (4.0.0)\n      rb-fsevent (~&gt; 0.9, &gt;= 0.9.4)\n      rb-inotify (~&gt; 0.9, &gt;= 0.9.7)\n    sass-rails (6.0.0)\n      sassc-rails (~&gt; 2.1, &gt;= 2.1.1)\n    sassc (2.2.1)\n      ffi (~&gt; 1.9)\n    sassc-rails (2.1.2)\n      railties (&gt;= 4.0.0)\n      sassc (&gt;= 2.0)\n      sprockets (&gt; 3.0)\n      sprockets-rails\n      tilt\n    selenium-webdriver (3.142.6)\n      childprocess (&gt;= 0.5, &lt; 4.0)\n      rubyzip (&gt;= 1.2.2)\n    spring (2.1.0)\n    spring-watcher-listen (2.0.1)\n      listen (&gt;= 2.7, &lt; 4.0)\n      spring (&gt;= 1.2, &lt; 3.0)\n    sprockets (4.0.0)\n      concurrent-ruby (~&gt; 1.0)\n      rack (&gt; 1, &lt; 3)\n    sprockets-rails (3.2.1)\n      actionpack (&gt;= 4.0)\n      activesupport (&gt;= 4.0)\n      sprockets (&gt;= 3.0.0)\n    thor (1.0.1)\n    thread_safe (0.3.6)\n    tilt (2.0.10)\n    tiny_tds (2.1.2)\n    turbolinks (5.2.1)\n      turbolinks-source (~&gt; 5.2)\n    turbolinks-source (5.2.0)\n    tzinfo (1.2.5)\n      thread_safe (~&gt; 0.1)\n    web-console (4.0.1)\n      actionview (&gt;= 6.0.0)\n      activemodel (&gt;= 6.0.0)\n      bindex (&gt;= 0.4.0)\n      railties (&gt;= 6.0.0)\n    webdrivers (4.1.3)\n      nokogiri (~&gt; 1.6)\n      rubyzip (&gt;= 1.3.0)\n      selenium-webdriver (&gt;= 3.0, &lt; 4.0)\n    webpacker (4.2.2)\n      activesupport (&gt;= 4.2)\n      rack-proxy (&gt;= 0.6.1)\n      railties (&gt;= 4.2)\n    websocket-driver (0.7.1)\n      websocket-extensions (&gt;= 0.1.0)\n    websocket-extensions (0.1.4)\n    wice_grid (3.6.2)\n      activerecord (&gt; 3.2)\n      coffee-rails (&gt; 3.2)\n      kaminari (~&gt; 0.16)\n    xpath (3.2.0)\n      nokogiri (~&gt; 1.8)\n    zeitwerk (2.2.2)\n\nPLATFORMS\n  ruby\n\nDEPENDENCIES\n  bootsnap (&gt;= 1.4.2)\n  byebug\n  capybara (&gt;= 2.15)\n  font-awesome-sass (~&gt; 4.3)\n  jbuilder (~&gt; 2.7)\n  listen (&gt;= 3.0.5, &lt; 3.2)\n  mysql2 (&gt;= 0.4.4)\n  puma (~&gt; 4.1)\n  rails (~&gt; 6.0.1)\n  sass-rails (&gt;= 6)\n  selenium-webdriver\n  spring\n  spring-watcher-listen (~&gt; 2.0.0)\n  tiny_tds\n  turbolinks (~&gt; 5)\n  tzinfo-data\n  web-console (&gt;= 3.3.0)\n  webdrivers\n  webpacker (~&gt; 4.0)\n  wice_grid\n\nRUBY VERSION\n   ruby 2.6.5p114\n\nBUNDLED WITH\n   2.0.2\n</code></pre>\n\n<h1>Results</h1>\n\n<pre><code>$ rails g wice_grid:install\nRunning via Spring preloader in process 32123\nCould not find generator 'wice_grid:install'.\n</code></pre>\n\n<h1>Expected</h1>\n\n<p>Should generate <code>config/initializers/wice_grid_config.rb</code></p>\n"}, {"tags": ["node.js", "ruby", "development-environment"], "comments": [{"owner": {"reputation": 79, "user_id": 6008037, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/953712087998288/picture?type=large", "display_name": "CCR", "link": "https://stackoverflow.com/users/6008037/ccr"}, "edited": false, "score": 0, "creation_date": 1576836089, "post_id": 59418350, "comment_id": 105032844, "body": "It clearly says ur node is not installed. On the tutorial link of gorails, there is a command to installed node.  curl -sL <a href=\"https://deb.nodesource.com/setup_8.x\" rel=\"nofollow noreferrer\">deb.nodesource.com/setup_8.x</a> | sudo -E bash - sudo apt-get install -y nodejs  Have you done this?"}, {"owner": {"reputation": 9, "user_id": 12567915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31d2189470cbbfa9e43c9767c10095df?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Olin", "link": "https://stackoverflow.com/users/12567915/brandon-olin"}, "reply_to_user": {"reputation": 79, "user_id": 6008037, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/953712087998288/picture?type=large", "display_name": "CCR", "link": "https://stackoverflow.com/users/6008037/ccr"}, "edited": false, "score": 0, "creation_date": 1577073228, "post_id": 59418350, "comment_id": 105082462, "body": "Yes, I went back through the instructions once more time and I&#39;m no longer receiving the area about have nodejs installed, so that part&#39;s sorted.  Unfortunately I&#39;m still receiving the error about being unable to connect to the server/database."}, {"owner": {"reputation": 79, "user_id": 6008037, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/953712087998288/picture?type=large", "display_name": "CCR", "link": "https://stackoverflow.com/users/6008037/ccr"}, "edited": false, "score": 0, "creation_date": 1577076148, "post_id": 59418350, "comment_id": 105082837, "body": "make sure the username and password passed on database.yml file are correct."}], "owner": {"reputation": 9, "user_id": 12567915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31d2189470cbbfa9e43c9767c10095df?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Olin", "link": "https://stackoverflow.com/users/12567915/brandon-olin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 197, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1576799885, "creation_date": 1576799885, "question_id": 59418350, "link": "https://stackoverflow.com/questions/59418350/errors-setting-up-ruby-development-environment-nodejs-not-found-could-not-conn", "title": "Errors setting up Ruby development environment: nodejs not found, could not connect to server", "body": "<p>I'm a new developer-in-training attempting to set up my Ruby development environment on a Windows machine using Ubuntu. I'm following the instructions here:</p>\n\n<p><a href=\"https://gorails.com/setup/windows/10\" rel=\"nofollow noreferrer\">https://gorails.com/setup/windows/10</a></p>\n\n<p>I've made it to the last few steps of the process, which is where I'm started to get errors:</p>\n\n<pre><code># Navigate to the C: drive on Windows. Do this every time you open the Linux console.\ncd /mnt/c\n\n# Create a code directory at C:\\code for your Rails apps to live (You only need to do this once)\nmkdir -p code\n\n#### If you want to use Postgres\n# Note that this will expect a postgres user with the same username\n# as your app, you may need to edit config/database.yml to match the\n# user you created earlier\nrails new myapp -d postgresql\n\n#### or if you want to use SQLite (not recommended)\n# rails new myapp\n\n#### Or if you want to use MySQL\n# rails new myapp -d mysql\n\n# Then, move into the application directory\ncd myapp\n\n# If you setup MySQL or Postgres with a username/password, modify the\n# config/database.yml file to contain the username/password that you specified\n\n# Create the database\nrake db:create\n\nrails server\n</code></pre>\n\n<p>On the step to set up Postgres:</p>\n\n<pre><code> rails new myapp -d postgresql\n</code></pre>\n\n<p>I receive this error about setting up nodejs:</p>\n\n<pre><code>/home/event/.rbenv/versions/2.6.5/lib/ruby/gems/2.6.0/gems/railties-6.0.1/lib/rails/app_loader.rb:53: warning: Insecure world writable dir /home/event/.rbenv/versions/2.6.5 in PATH, mode 040777\nsh: 1: node: not found\nsh: 1: nodejs: not found\nNode.js not installed. Please download and install Node.js https://nodejs.org/en/download/\n</code></pre>\n\n<p>Even after I go to the URL provided and install NodeJS, that error still shows up when I attempt to repeat the process. Is this just a matter of it not existing in the correct path and I need to relocate it?</p>\n\n<p>Also, I've attempted to proceed with the other steps despite that error. When I enter this command, the second last one in the article referenced above:</p>\n\n<pre><code>rake db:create\n</code></pre>\n\n<p>I receive this error:</p>\n\n<pre><code>could not connect to server: No such file or directory\n        Is the server running locally and accepting\n        connections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\nCouldn't create 'myapp_development' database. Please check your configuration.\nrake aborted!\nActiveRecord::NoDatabaseError: could not connect to server: No such file or directory\n        Is the server running locally and accepting\n        connections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n\n\nCaused by:\nPG::ConnectionBad: could not connect to server: No such file or directory\n        Is the server running locally and accepting\n        connections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n\nTasks: TOP =&gt; db:create\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>I've searched around about this with little success, and attempted to decipher what the error messages mean; but at my current level of knowledge it just seems beyond me. Appreciate any insight anyone has to share on this!</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "haml"], "comments": [{"owner": {"reputation": 3736, "user_id": 1031061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/8IZUV.jpg?s=128&g=1", "display_name": "Pardeep Dhingra", "link": "https://stackoverflow.com/users/1031061/pardeep-dhingra"}, "edited": false, "score": 0, "creation_date": 1576813344, "post_id": 59418322, "comment_id": 105026169, "body": "Your haml looks good to me. I assume some global javascript in your application may be triggering this."}, {"owner": {"reputation": 1, "user_id": 12520269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9eb5c2c503e4837a9f0b0f2f8b9f1dd7?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Etz", "link": "https://stackoverflow.com/users/12520269/jordan-etz"}, "reply_to_user": {"reputation": 3736, "user_id": 1031061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/8IZUV.jpg?s=128&g=1", "display_name": "Pardeep Dhingra", "link": "https://stackoverflow.com/users/1031061/pardeep-dhingra"}, "edited": false, "score": 0, "creation_date": 1576819333, "post_id": 59418322, "comment_id": 105027204, "body": "@PardeepDhingra i put my javascript up. Whenever ticket and ticketform javascript is loaded upload.js isnt uploaded."}], "owner": {"reputation": 1, "user_id": 12520269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9eb5c2c503e4837a9f0b0f2f8b9f1dd7?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Etz", "link": "https://stackoverflow.com/users/12520269/jordan-etz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577596307, "creation_date": 1576799674, "last_edit_date": 1577596307, "question_id": 59418322, "link": "https://stackoverflow.com/questions/59418322/how-to-fix-file-field-button-submitting-form-multiple-times", "title": "How to fix file field button submitting form multiple times", "body": "<p>The button for file field keeps submitting the form when it should be opening a window to select files to upload. Does anyone have an idea why?</p>\n\n<pre><code>= render 'show'\n.row\n  .col-12\n    %ZenForm{ path: zen_support_urls.ticket_path, id: @zendesk_ticket.id, method: :put, :multipart =&gt; true, data: { remote: true } }\n      %button.fileUpload.btn.btn-default#upload_button{data: {type: \"button\"}}\n        Attach File\n        %input.upload#file_input{:name =&gt; \"attachments[]\",  multiple: true, :type =&gt; \"file\"}/\n      %ul#filelist\n      - @zendesk_ticket.comments.each do | comment |\n        = render 'files', comment: comment\n      %ZenTextArea#comment{ label: \"Comments\", placeholder: \"Add any comments you think will help us address your issue.\", error: @zendesk_ticket.errors&amp;.dig(:comment) }\n</code></pre>\n\n<p>Here is my JavaScript in app.js:</p>\n\n<pre><code>//= require jquery\n//= require bootstrap-sprockets\n//= require select2\n//= require ./base\n//= require ./tickets\n//= require_tree .\n</code></pre>\n\n<p>Here is my CoffeeScript for tickets:</p>\n\n<pre><code>$(document).on \"ready page:load\", () -&gt;\n  # this method forwards clicks to the first &lt;a&gt; element in the row\n  $.activateRowClick = (selector) -&gt;\n    $(selector).click (e) -&gt;\n      if !$(e.target).is('a')\n        $(this).find('a').click()\n    $(selector).css('cursor', 'pointer')\n\n  $.activateRowClick('tr.clickable')\n</code></pre>\n\n<p>Here is my JavaScript for ticketform.js:</p>\n\n<pre><code>$(document).on \"ready page:load\", -&gt;\n\n  $support = new ZenSupport.Form \"zs-ticket-form\"\n\n  $support.comment = $support.form.find('textarea')\n  $support.subject = $(\"#zs-ticket-form__subject\")\n  $support.priority = $(\"#zs-ticket-form__priority\")\n  # $support.actions = $support.form.find('.support-ticket__action-btns')\n\n  $support.fields =\n    inputs: [$support.comment]\n    select2: [\n      $support.subject, \n      $support.priority\n    ]\n\n  $support.subject.select2\n    theme: \"bootstrap\"\n    placeholder: \"Please select...\"\n    width: \"100%\"\n    allowClear: true\n    tags: true\n\n  $support.priority.select2\n    theme: \"bootstrap\"\n    placeholder: \"Please select...\"\n    width: \"100%\"\n    allowClear: true\n    tags: false\n\n  # Provide the beforeSend\n  $support.beforeSend = -&gt;\n    has_subject = $support.subject.val().length\n    has_comment = $support.comment.val().length\n    placeholder = $support.comment.attr('placeholder')\n\n    required_inputs = $support.form.find(\".required:visible\")\n\n    inputs_valid = true\n\n    $.each required_inputs, (index, element) -&gt;\n      console.log $(element).val().length\n\n      if($(element).val().length == 0)\n        $(element).parent().addClass('has-error')\n        inputs_valid = false\n      else\n        $(element).parent().removeClass('has-error')\n      return\n\n    if has_subject and has_comment and has_comment isnt placeholder and inputs_valid\n      $support.showLoader false\n      return true\n    else\n      $support.comment.parent('.form-group').toggleClass 'has-error', !has_comment\n      $support.subject.parent('.form-group').toggleClass 'has-error', !has_subject\n      return false\n</code></pre>\n\n<p>Here is my code for uploads.js. This file is not getting called when <code>tickets</code> is being called so this code is currently not doing anything and I think that is the problem:</p>\n\n<pre><code>$ -&gt;\n    files = [];\n\n    $(\"#upload_button\").click -&gt;\n        $(\"#file_input\").trigger \"click\";\n\n    $(\"#file_input\").change (event) -&gt; \n        file = event.target.files[0];\n        files.push(file);\n        uploadfile files.length - 1, file;\n\n    uploadfile = (index, file) -&gt;\n        formData = new FormData();\n        formData.append \"file\", file;\n        fileitem = \"\n            &lt;li class='file-item success'&gt;\n                &lt;div class='active'&gt;\n                    &lt;span class='remove'&gt;\u00d7&lt;/span&gt;\n                    &lt;span&gt;#{file.name}&lt;/span&gt;\n                &lt;/div&gt;\n                &lt;div class='lds-ellipsis'&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;\n            &lt;/li&gt;\n        \";\n        $('#filelist').append fileitem;\n        setRemove();\n\n    setRemove = -&gt;\n        $(\".remove\").unbind();\n        $(\".remove\").click -&gt;\n           index = $(@).parent().parent().index();\n           files.splice index, 1;\n           $('.file-item').eq(index).remove();\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "cookies", "stimulusjs"], "answers": [{"tags": [], "owner": {"reputation": 629, "user_id": 8122327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2a936a33692423f5560172fb1b4ae04?s=128&d=identicon&r=PG&f=1", "display_name": "gsumk", "link": "https://stackoverflow.com/users/8122327/gsumk"}, "is_accepted": false, "score": 0, "last_activity_date": 1576859003, "creation_date": 1576859003, "answer_id": 59428450, "question_id": 59418036, "link": "https://stackoverflow.com/questions/59418036/how-to-use-stimulus-to-fix-cookies-is-not-defined/59428450#59428450", "title": "How to use Stimulus to fix &quot;Cookies is not defined&quot;", "body": "<p>I figured out the thing that thing responsible for not loading the JavaScript in Rails application is <a href=\"https://github.com/turbolinks/turbolinks\" rel=\"nofollow noreferrer\">Turbolinks</a>. So I disable Turbolinks in the button where it is called from and JavaScript is loaded on first time too.</p>\n\n<pre><code> &lt;%= link_to \"More Page\", more_page_path, data:{turbolinks: false}, class: \"nav-item nav-link\"%&gt;\n\n</code></pre>\n"}], "owner": {"reputation": 629, "user_id": 8122327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2a936a33692423f5560172fb1b4ae04?s=128&d=identicon&r=PG&f=1", "display_name": "gsumk", "link": "https://stackoverflow.com/users/8122327/gsumk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 228, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576859003, "creation_date": 1576797076, "last_edit_date": 1576799182, "question_id": 59418036, "link": "https://stackoverflow.com/questions/59418036/how-to-use-stimulus-to-fix-cookies-is-not-defined", "title": "How to use Stimulus to fix &quot;Cookies is not defined&quot;", "body": "<p>I have a Rails v5.2.4 application using Ruby 2.5.3 and using the Stimulus 1.1.1 framework. I have some cookies set in my Rails controller and accessing  them from the Stimulus controller, but when I load the page for the first time I got:</p>\n\n<pre><code>ReferenceError: Cookies is not defined\n    at Controller.connect (summary_controller.js:92)\n    at Context.connect (context.js:23)\n</code></pre>\n\n<p>But when I reload the same page, I get the cookie value and everything works fine. I am not using any gem to handle cookies.</p>\n\n<p>My stimulusjs method with corresponding line numbers is:</p>\n\n<pre><code>91  connect(){\n92    var tech_and_monitor = Cookies.get('tech_and_monitor');\n93    var tech_only = Cookies.get('tech_only');\n95    var manager_only = Cookies.get('manager_only');\n96    }\n</code></pre>\n\n<p>On the first load, when I used the live expression on browser <code>Cookies.get('tech_and_monitor');</code> I got the cookie value.</p>\n\n<p>I don't understand the reason why I am not getting a reference to Cookies on first load and getting it on second? </p>\n"}, {"tags": ["ruby", "selenium", "rspec", "selenium-chromedriver", "capybara"], "comments": [{"owner": {"reputation": 855, "user_id": 4744568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/125cdb7d43927756913b920de016f420?s=128&d=identicon&r=PG", "display_name": "pcalkins", "link": "https://stackoverflow.com/users/4744568/pcalkins"}, "edited": false, "score": 1, "creation_date": 1576797455, "post_id": 59417671, "comment_id": 105023414, "body": "For Firefox it looks like you can set a profile option:  <a href=\"https://stackoverflow.com/questions/21310797/using-selenium-webdriver-and-python-how-do-i-suppress-the-prompt-to-share-my-ca\" title=\"using selenium webdriver and python how do i suppress the prompt to share my ca\">stackoverflow.com/questions/21310797/&hellip;</a>  Other browsers should have a similar profile option you can set and use in Selenium.  eg: create a new profile, set the option.  Send that profile as argument when launching driver."}, {"owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "edited": false, "score": 0, "creation_date": 1576827052, "post_id": 59417671, "comment_id": 105029240, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/38234576/how-to-use-fake-web-cam-on-mozilla-firefox-using-selenium-java\">How to use fake-web cam on mozilla firefox using selenium java</a>"}], "owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1576794609, "creation_date": 1576794609, "question_id": 59417671, "link": "https://stackoverflow.com/questions/59417671/rspec-system-tests-with-selenium-allow-access-to-camera", "title": "RSpec system tests with selenium - Allow access to Camera", "body": "<p>In my Ruby on Rails 6.0, I'm trying to test a page that has access to the camera. \nThe problem is that when I visit this page, there is a popup message that I should permit to use the camera. \nThis is breaking my tests, how can I click allow to that popup or somehow give permissions to the camera to Selenium WebDrvier.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["ruby", "chef-infra"], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 10081422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8507bc7a8d6f7670cc7e480804a8b30a?s=128&d=identicon&r=PG&f=1", "display_name": "Bruna Magrini", "link": "https://stackoverflow.com/users/10081422/bruna-magrini"}, "edited": false, "score": 0, "creation_date": 1576868965, "post_id": 59422823, "comment_id": 105046312, "body": "I thought that when I do &quot;berks install&quot; it downloads the cookbooks that I set like depedency. If it doesn&#39;t, why do I have to do &quot;berks install&quot;?"}, {"owner": {"reputation": 6316, "user_id": 1184717, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7f8710cd5754a79df5dc5cd3d5308da2?s=128&d=identicon&r=PG", "display_name": "Mr.", "link": "https://stackoverflow.com/users/1184717/mr"}, "reply_to_user": {"reputation": 19, "user_id": 10081422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8507bc7a8d6f7670cc7e480804a8b30a?s=128&d=identicon&r=PG&f=1", "display_name": "Bruna Magrini", "link": "https://stackoverflow.com/users/10081422/bruna-magrini"}, "edited": false, "score": 0, "creation_date": 1576910628, "post_id": 59422823, "comment_id": 105053359, "body": "<code>berks install</code> does download the cookboks, but <code>berks vendor</code> does some other stuff. the main thing to note here, that you need to instruct chef where the cookbooks are located."}, {"owner": {"reputation": 19, "user_id": 10081422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8507bc7a8d6f7670cc7e480804a8b30a?s=128&d=identicon&r=PG&f=1", "display_name": "Bruna Magrini", "link": "https://stackoverflow.com/users/10081422/bruna-magrini"}, "edited": false, "score": 0, "creation_date": 1576912239, "post_id": 59422823, "comment_id": 105053570, "body": "I see. I will try. But if I did &quot;berks install&quot;, where are the cookbooks? And i thought that client.rb was created on a node after bootstrap, if doesnt, who do I created? (sorry, I&#39;m very new)"}, {"owner": {"reputation": 6316, "user_id": 1184717, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7f8710cd5754a79df5dc5cd3d5308da2?s=128&d=identicon&r=PG", "display_name": "Mr.", "link": "https://stackoverflow.com/users/1184717/mr"}, "reply_to_user": {"reputation": 19, "user_id": 10081422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8507bc7a8d6f7670cc7e480804a8b30a?s=128&d=identicon&r=PG&f=1", "display_name": "Bruna Magrini", "link": "https://stackoverflow.com/users/10081422/bruna-magrini"}, "edited": false, "score": 0, "creation_date": 1576921751, "post_id": 59422823, "comment_id": 105055049, "body": "@BrunaMagrini: you are confusing, there is difference between the client.rb on the chef node and the client.rb on the operator node (used to be called knife.rb). by default, berkshelf will download the cookboks to <code>~&#47;.berkshelf&#47;cookbooks&#47;</code>. but you are asking too many questions other than your original question. please createa another question and if you find my answer helpful, please accept it :)"}], "tags": [], "owner": {"reputation": 6316, "user_id": 1184717, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7f8710cd5754a79df5dc5cd3d5308da2?s=128&d=identicon&r=PG", "display_name": "Mr.", "link": "https://stackoverflow.com/users/1184717/mr"}, "is_accepted": true, "score": 0, "last_activity_date": 1576834204, "last_edit_date": 1592644375, "creation_date": 1576834204, "answer_id": 59422823, "question_id": 59416643, "link": "https://stackoverflow.com/questions/59416643/chefexceptionscookbooknotfound-cookbook-sudo-not-found-and-chef-solo-undef/59422823#59422823", "title": "Chef::Exceptions::CookbookNotFound: Cookbook sudo not found and Chef-Solo \u201cundefined method `[]&#39; for nil:NilClass\u201d", "body": "<p>i have a feeling that you are confusing something, since the title of your question mentions <code>chef-solo</code> when you are really using <code>chef-zero</code> (<code>--local-mode</code>).</p>\n<p>you should definitely favor chef-zero over chef-solo (but i won't get into the reasons why).</p>\n<p>in both cases (using chef-zero or chef-solo), you will have to download all the cookbooks and make verify chef-client knows where are the <a href=\"https://docs.chef.io/ctl_chef_client.html#run-in-local-mode\" rel=\"nofollow noreferrer\">cookbooks located</a>.</p>\n<p>if you ase using chef-zero, here are some references:</p>\n<blockquote>\n<p>Local mode does not require a configuration file, instead it will look for a directory named <code>/cookbooks</code> and will set <code>chef_repo_path</code> to be just above that. (Local mode will honor the settings in a configuration file, if desired.) If the <code>client.rb</code> file is not found and no configuration file is specified, local mode will search for a <code>config.rb</code> file.</p>\n</blockquote>\n<p><a href=\"https://docs.chef.io/config_rb_client.html#settings\" rel=\"nofollow noreferrer\"><code>client.rb</code> settings</a>:</p>\n<blockquote>\n<p><code>chef_repo_path</code>: The path to the chef-repo containing cookbooks and other files, such as environments or data bags, when running Chef Infra Client in local mode.</p>\n<p><code>cookbook_path</code>: The sub-directory for Chef Infra Client cookbooks. This value can be a string or an array of file system locations, processed in the specified order. The last cookbook is considered to override local modifications.</p>\n</blockquote>\n<p>since i see that you are using berkshelf, you can use <a href=\"https://docs.chef.io/berkshelf.html#berks-vendor\" rel=\"nofollow noreferrer\">vendor sub-command</a> to download all the cookbooks dependencies and place them in the same directory. then, have a custom configuration for chef-client, that sets the value of <code>cookbook_path</code> to the same directory which you used in conjunction with <code>berks vendor</code>, and finally execute chef-client.</p>\n"}], "owner": {"reputation": 19, "user_id": 10081422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8507bc7a8d6f7670cc7e480804a8b30a?s=128&d=identicon&r=PG&f=1", "display_name": "Bruna Magrini", "link": "https://stackoverflow.com/users/10081422/bruna-magrini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 59422823, "answer_count": 1, "score": 0, "last_activity_date": 1576834204, "creation_date": 1576788025, "last_edit_date": 1576789574, "question_id": 59416643, "link": "https://stackoverflow.com/questions/59416643/chefexceptionscookbooknotfound-cookbook-sudo-not-found-and-chef-solo-undef", "title": "Chef::Exceptions::CookbookNotFound: Cookbook sudo not found and Chef-Solo \u201cundefined method `[]&#39; for nil:NilClass\u201d", "body": "<p>I'm trying to make a cookbook that has some dependencies, but it doesn't work</p>\n\n<p><strong>/recipe</strong>\n<code>ls</code></p>\n\n<p>default.rb</p>\n\n<p><strong>Recipe:</strong></p>\n\n<pre><code>include_recipe 'sudo::default'\ninclude_recipe 'user'\n\ndef will_create_user?(username, user)\n    return false if node['etc']['passwd'].key?(username)\n    return true if user['action'] == 'create' || !user.key?('action')\n    false\nend\n\nnode['authorization']['sudo']['groups'].each do |group|\n        group group\nend\n\n\nnode['vms']['users'].each do |username, user| \n    send_notification = will_create_user? username, user \n\n    user_account username do\n        comment user['comment'] if user['comment']\n        ssh_keys user['ssh_keys'] \n        groups user['groups'] if user['groups'] \n\n        if send_notification\n            notifies :run, \"execute[reset_password_#{username}]\", :delayed \n        end\n    end\n\n    execute \"reset_password_#{username}\" do\n        command \"passwd -d #{username} &amp;&amp; chage -d 0 #{username}\" \n        action :nothing \n    end\n\nend\n</code></pre>\n\n<p><strong>Metadata.rb</strong></p>\n\n<pre><code>...\nversion '0.1.0'\nchef_version '&gt;= 14.0'\n\ndepends \"sudo\"\ndepends \"user\"\n</code></pre>\n\n<p><strong>Berksfile.lock</strong></p>\n\n<pre><code>DEPENDENCIES\n  vms-users\n    path: .\n    metadata: true\n\nGRAPH\n  sudo (5.4.5)\n  user (0.7.0)\n  vms-users (0.1.0)\n    sudo (&gt;= 0.0.0)\n    user (&gt;= 0.0.0)\n</code></pre>\n\n<p><strong>Attributes/default.rb</strong></p>\n\n<pre><code>{\n   \"vms\": { \n     \"users\": {\n        'magrini' =&gt; {\n                'comment' =&gt; 'Bruna Magrini',\n                'groups' =&gt; ['sysadmin'],\n            'ssh_keys' =&gt; ['chave ssh'],        \n               },\n        }\n   } \n}\n</code></pre>\n\n<p>I'm executing using <code>chef-client --local-mode default.rb</code></p>\n\n<p><strong>Error:</strong>  Chef::Exceptions::CookbookNotFound: Cookbook sudo not found</p>\n\n<pre><code>Recipe `sudo::default` is not in the run_list, and cookbook 'sudo'\nis not a dependency of any cookbook in the run_list.  To load this recipe,\nfirst add a dependency on cookbook 'sudo' in the cookbook you're\nincluding it from in that cookbook's metadata.\n\n\nRunning handlers:\n[2019-12-19T20:42:12+00:00] ERROR: Running exception handlers\nRunning handlers complete\n[2019-12-19T20:42:12+00:00] ERROR: Exception handlers complete\nChef Infra Client failed. 0 resources updated in 01 seconds\n[2019-12-19T20:42:12+00:00] FATAL: Stacktrace dumped to /home/chef-repo/.chef/local-mode-cache/cache/chef-stacktrace.out\n[2019-12-19T20:42:12+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report\n[2019-12-19T20:42:12+00:00] FATAL: Chef::Exceptions::CookbookNotFound: Cookbook sudo not found. If you're loading sudo from another cookbook, make sure you configure the dependency in your metadata\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 3151, "user_id": 1346367, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/efc695256efbe2e850ee509a951efb97?s=128&d=identicon&r=PG", "display_name": "Flame", "link": "https://stackoverflow.com/users/1346367/flame"}, "edited": false, "score": 0, "creation_date": 1576785326, "post_id": 59416050, "comment_id": 105019612, "body": "you got a syntax error on line 13."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1576793621, "post_id": 59416050, "comment_id": 105022413, "body": "In future, please consider waiting longer before selecting an answer. A quick selection may discourage other answers and may not be appreciated by those still working on their answers. Most members wait at least a couple of hours; some wait much longer, giving then-sleeping members around the world a chance to respond. The point is that there is no rush to make a selection."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1576798772, "post_id": 59416050, "comment_id": 105023702, "body": "To add to what @CarySwoveland said: Consider whether you want to immediately select the first answer that appears, and then later one that is much more elegant appears... do you switch selected answers... do you remove the initial code from your code? It takes 24 hours for the world to rotate, and many potential answerers won&#39;t respond until the weekend."}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1576825565, "post_id": 59416050, "comment_id": 105028775, "body": "@Mike : What is the expected outcome if the minimum value occurs more than once? Would you like then to get the first key in the hash, or a random one of those which match?"}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1576792817, "post_id": 59416094, "comment_id": 105022156, "body": "I&#39;m guessing that the OP means to check if the number is even (<code>numb % 2 == 0</code>), better written <code>numb.even?</code>. I&#39;d have upvoted your answer had you not asked for an upvote and acceptance from a newbie when the question was only eight minutes old."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1576798842, "post_id": 59416094, "comment_id": 105023719, "body": "See &quot;<a href=\"https://meta.stackexchange.com/questions/109773/what-happens-if-you-answered-a-question-questioner-says-thanks-but-didnt-acce\">What happens if you answered a question, questioner says thanks, but didn&#39;t accept your answer as correct?</a>&quot; and &quot;<a href=\"https://meta.stackexchange.com/questions/14994/do-you-feel-dirty-if-you-nudge-new-users-to-accept-your-answer-when-they-indicat\">Do you feel dirty if you nudge new users to accept your answer when they indicate you&#39;ve answered their question?</a>&quot;"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1576827915, "post_id": 59416094, "comment_id": 105029537, "body": "Thanks for the feedback, folks, it&#39;s very valuable!"}, {"owner": {"reputation": 19, "user_id": 9011156, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jRTuv.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/9011156/mike"}, "edited": false, "score": 0, "creation_date": 1576879020, "post_id": 59416094, "comment_id": 105049319, "body": "Thanks for the advice. I see your point with waiting to see other answers, as there can be multiple ways to write it. I changed it to use numb.even? as that does seem cleaner."}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 2, "last_activity_date": 1576785019, "creation_date": 1576785019, "answer_id": 59416094, "question_id": 59416050, "link": "https://stackoverflow.com/questions/59416050/how-to-use-a-random-number-generator-to-determine-path-in-if-statement/59416094#59416094", "title": "How to use a random number generator to determine path in &quot;if&quot; statement", "body": "<p>You need the second argument for modulo operator (<code>%</code>). Now you have</p>\n\n<pre><code> numb % == 2\n</code></pre>\n\n<p>and you need to insert a number (or a numeric variable) between modulo and equals, e.g.</p>\n\n<pre><code>numb % 5 == 2\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 9011156, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jRTuv.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/9011156/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 59416094, "answer_count": 1, "score": 0, "last_activity_date": 1576798560, "creation_date": 1576784834, "last_edit_date": 1576798560, "question_id": 59416050, "link": "https://stackoverflow.com/questions/59416050/how-to-use-a-random-number-generator-to-determine-path-in-if-statement", "title": "How to use a random number generator to determine path in &quot;if&quot; statement", "body": "<p>I'm trying to use a random number to determine if an event will happen using an <code>if</code> statement.</p>\n\n<p>I keep getting the following error:</p>\n\n<pre><code> lunarlander.rb:13: syntax error, unexpected '='\n    if (numb % = 2)*\n</code></pre>\n\n<p>Here is the code:</p>\n\n<pre><code>def space_travel\n    puts \"\\n\"\n    puts \"You engage the main thrusters and you feel the ship jerk forward.\"\n    numb = rand(10)\n    if (numb % == 2)\n        puts \"Everything functions as expected. You settle in for the trip.\"\n    else\n        spacewalk()\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "sendgrid-api-v3", "sendgrid-templates", "sendgrid-ruby"], "comments": [{"owner": {"reputation": 1147, "user_id": 2917523, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1fda5c2c4d936aec156661783420984b?s=128&d=identicon&r=PG", "display_name": "Milo P", "link": "https://stackoverflow.com/users/2917523/milo-p"}, "edited": false, "score": 1, "creation_date": 1576784910, "post_id": 59416036, "comment_id": 105019445, "body": "Can you tell if there&#39;s any difference between the emails and the emails without, besides the links? (for example, time sent, user account delivered to, application that makes the send request?)"}, {"owner": {"reputation": 9, "user_id": 12567183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7365ff72052e2be39e536ed4a9af2ec?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Singh", "link": "https://stackoverflow.com/users/12567183/paul-singh"}, "reply_to_user": {"reputation": 1147, "user_id": 2917523, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1fda5c2c4d936aec156661783420984b?s=128&d=identicon&r=PG", "display_name": "Milo P", "link": "https://stackoverflow.com/users/2917523/milo-p"}, "edited": false, "score": 0, "creation_date": 1576785055, "post_id": 59416036, "comment_id": 105019505, "body": "@MiloPsupportsGoFundMonica, I migrated our site over to SendGrid today... and I can&#39;t seem to find a pattern just yet. It&#39;s just random that some work and others don&#39;t.  For the record, this particular method is using the same template ID for all the emails. The request that we&#39;re sending off to SendGrid is formed the same way each time."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1576798481, "post_id": 59416036, "comment_id": 105023643, "body": "Please see &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot;, &quot;<a href=\"https://meta.stackoverflow.com/questions/260648\">Stack Overflow question checklist</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">MCVE</a>&quot; and all their linked pages. You haven&#39;t told us enough to help you without shooting in the dark."}], "owner": {"reputation": 9, "user_id": 12567183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7365ff72052e2be39e536ed4a9af2ec?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Singh", "link": "https://stackoverflow.com/users/12567183/paul-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1576784776, "creation_date": 1576784776, "question_id": 59416036, "link": "https://stackoverflow.com/questions/59416036/best-practices-for-using-sendgrids-v3-api", "title": "Best practices for using SendGrid&#39;s v3 API?", "body": "<p>I'm using the v3 API to send confirmation emails to my new users. All of the emails appear to be sending BUT over half of the emails don't contain the dynamically-inserted confirmation URL that I send along in the request.</p>\n\n<p>I'm not sure where to start debugging this: if ~50% of the emails are getting the links within their emails and the rest aren't, where would you start with digging into this problem?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12567055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0621b7b46cffe3817650dc1f3eca82ac?s=128&d=identicon&r=PG&f=1", "display_name": "Ben S", "link": "https://stackoverflow.com/users/12567055/ben-s"}, "edited": false, "score": 0, "creation_date": 1576858776, "post_id": 59420297, "comment_id": 105042720, "body": "added dockerfile"}, {"owner": {"reputation": 2215, "user_id": 1996540, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/609b69cbb09257883a4e32d7d5aff098?s=128&d=identicon&r=PG", "display_name": "ZedTuX", "link": "https://stackoverflow.com/users/1996540/zedtux"}, "reply_to_user": {"reputation": 1, "user_id": 12567055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0621b7b46cffe3817650dc1f3eca82ac?s=128&d=identicon&r=PG&f=1", "display_name": "Ben S", "link": "https://stackoverflow.com/users/12567055/ben-s"}, "edited": false, "score": 0, "creation_date": 1576994759, "post_id": 59420297, "comment_id": 105067483, "body": "The Dockerfile looks ok. Looking at the error, and the Rails source code, the only way to get that error is really to no have the <code>pg</code> gem available in the Rails app. If you have have it in your <code>Gemfile</code> and <code>Gemfile.lock</code>, then check in the container if they are present: <code>docker run --rm &lt;docker image name&gt; cat Gemfile*</code>"}], "tags": [], "owner": {"reputation": 2215, "user_id": 1996540, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/609b69cbb09257883a4e32d7d5aff098?s=128&d=identicon&r=PG", "display_name": "ZedTuX", "link": "https://stackoverflow.com/users/1996540/zedtux"}, "is_accepted": false, "score": 1, "last_activity_date": 1576820004, "creation_date": 1576820004, "answer_id": 59420297, "question_id": 59415954, "link": "https://stackoverflow.com/questions/59415954/how-do-i-set-up-rails-app-in-docker-thats-already-been-developed/59420297#59420297", "title": "How do I set up rails app in docker thats already been developed", "body": "<p>The error says you're missing the <code>pg</code> gem while you've defined the database adapter to <code>postgresql</code> in the <code>config/database.yml</code> file.</p>\n\n<p>The question title says \"already been developed\" so I guess your Gemfile has the <code>gem 'pg'</code> line, and your <code>Gemfile.lock</code> has also a line referring to the version to install ... but can you check? :)</p>\n\n<p>Then you're not sharing your <code>Dockerfile</code> so it's harder to guess what's your issue, but I would bet on a missing <code>bundle install</code> command in the <code>Dockerfile</code>.</p>\n\n<p>Be sure to have a line like that in your <code>Dockerfile</code>:</p>\n\n<pre><code>RUN bundle install\n</code></pre>\n\n<p><em>In the case this doesn't help, please update your question with your <code>Dockerfile</code>.</em></p>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 1753044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8970202d04b38247284101875ac06ed6?s=128&d=identicon&r=PG", "display_name": "mariotux", "link": "https://stackoverflow.com/users/1753044/mariotux"}, "is_accepted": false, "score": 0, "last_activity_date": 1576840519, "creation_date": 1576840519, "answer_id": 59424388, "question_id": 59415954, "link": "https://stackoverflow.com/questions/59415954/how-do-i-set-up-rails-app-in-docker-thats-already-been-developed/59424388#59424388", "title": "How do I set up rails app in docker thats already been developed", "body": "<p>I think is easy to use docker to avoid to install anything in your development environment.</p>\n\n<p>Usually, I use docker to do that, I use a container exposing the ports of the service like I have the service installed in my machine. Doing that, I am avoiding to install any additional services. </p>\n\n<p>If you want to use a few services in your environment, you can find containers for anything, but if you need to build your own image you need to learn more about docker.</p>\n\n<p>And for example, to use postgres I use a docker-compose.yml like that:</p>\n\n<pre>\nversion: '3'\nservices:\n  postgres:\n    image: postgres:alpine\n    ports:\n      - \"5432:5432\"\n    volumes:\n      - pg-data:/var/lib/postgresql/data\nvolumes:\n  pg-data: {}\n</pre>\n"}], "owner": {"reputation": 1, "user_id": 12567055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0621b7b46cffe3817650dc1f3eca82ac?s=128&d=identicon&r=PG&f=1", "display_name": "Ben S", "link": "https://stackoverflow.com/users/12567055/ben-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1577009265, "creation_date": 1576784432, "last_edit_date": 1577009265, "question_id": 59415954, "link": "https://stackoverflow.com/questions/59415954/how-do-i-set-up-rails-app-in-docker-thats-already-been-developed", "title": "How do I set up rails app in docker thats already been developed", "body": "<p>Im new to using docker and I cant seem to get the app to build and make correctly. I'm sure its some easy DB setup or PG gem config. </p>\n\n<p>Here's the output after trying to </p>\n\n<p>=> Booting Puma<br>\n=> Rails 4.2.10 application starting in development on <a href=\"http://0.0.0.0:3000\" rel=\"nofollow noreferrer\">http://0.0.0.0:3000</a><br>\n=> Run <code>rails server -h</code> for more startup options<br>\n=> Ctrl-C to shutdown server  </p>\n\n<p>Exiting</p>\n\n<pre><code>/usr/local/bundle/gems/activerecord-4.2.10/lib/active_record/connection_adapters/connection\n_specification.rb:177:in `rescue in spec': Specified 'postgresql' for database adapter, but\n the gem is not loaded. Add `gem 'pg'` to your Gemfile (and ensure its version is at the mi\nnimum required by ActiveRecord). (Gem::LoadError)\n        from /usr/local/bundle/gems/activerecord-4.2.10/lib/active_record/connection_adapte\nrs/connection_specification.\nrb:174:in `spec'\n        from /usr/local/bundle/gems/activerecord-4.2.10/lib/active_record/connection_handli\nng.\nrb:50:in `establish_connection'\n        from /usr/local/bundle/gems/activerecord-4.2.10/lib/active_record/railtie.rb:122:in\n `block (2 levels) in &lt;class:Railtie&gt;'\n        from /usr/local/bundle/gems/activesupport-4.2.10/lib/active_support/lazy_load_hooks\n.rb:38:in `instance_eval'\n        from /usr/local/bundle/gems/activesupport-4.2.10/lib/active_support/lazy_load_hooks\n.rb:38:in `execute_hook'\n        from /usr/local/bundle/gems/activesupport-4.2.10/lib/active_support/lazy_load_hooks\n.rb:28:in `block in on_load'\n        from /usr/local/bundle/gems/activesupport-4.2.10/lib/active_support/lazy_load_hooks\n.rb:27:in `each'\n        from /usr/local/bundle/gems/activesupport-4.2.10/lib/active_support/lazy_load_hooks\n.rb:27:in `on_load'\n        from /usr/local/bundle/gems/activerecord-4.2.10/lib/active_record/railtie.\nrb:118:in\n `block in &lt;class:Railtie&gt;'\n        from /usr/local/bundle/gems/railties-4.2.10/lib/rails/initializable.rb:30:in `insta\nnce_exec'\n        from /usr/local/bundle/gems/railties-4.2.10/lib/rails/initializable.rb:30:in `run'\n        from /usr/local/bundle/gems/railties-4.2.10/lib/rails/initializable.rb:55:in `block\n in run_initializers'\n        from /usr/local/lib/ruby/2.4.0/tsort.\n\nrb:228:in `block in tsort_each'\n        from /usr/local/lib/ruby/2.4.0/tsort.\nrb:350:in `block (2 levels) in each_strongly_connected_component'\n        from /usr/local/lib/ruby/2.4.0/tsort.\nrb:431:in `each_strongly_connected_component_from'\n        from /usr/local/lib/ruby/2.4.0/tsort.\nrb:349:in `block in each_strongly_connected_component'\n        from /usr/local/lib/ruby/2.4.0/tsort.\nrb:347:in `each'\n        from /usr/local/lib/ruby/2.4.0/tsort.\nrb:347:in `call'\n        from /usr/local/lib/ruby/2.4.0/tsort.\nrb:347:in `each_strongly_connected_component'\n        from /usr/local/lib/ruby/2.4.0/tsort.\nrb:226:in `tsort_each'\n        from /usr/local/lib/ruby/2.4.0/tsort.\nrb:205:in `tsort_each'\n        from /usr/local/bundle/gems/railties-4.2.10/lib/rails/initializable.\nrb:54:in `run_initializers'\n        from /usr/local/bundle/gems/railties-4.2.10/lib/rails/application.\nrb:352:in `initia\nlize!'\n        from /app/config/environment.rb:7:in `&lt;top (required)&gt;'\n        from /usr/local/bundle/gems/activesupport-4.2.10/lib/active_support/dependencies.\nrb:274:in `require'\n        from /usr/local/bundle/gems/activesupport-4.2.10/lib/active_support/dependencies.\nrb:274:in `block in require'\n        from /usr/local/bundle/gems/activesupport-4.2.10/lib/active_support/dependencies.\nrb:240:in `load_dependency'\n        from /usr/local/bundle/gems/activesupport-4.2.10/lib/active_support/dependencies.rb\n:274:in `require'\n        from /app/config.ru:3:in `block in &lt;main&gt;'\n        from /usr/local/bundle/gems/rack-1.6.12/lib/rack/builder.rb:55:in `instance_eval'\n        from /usr/local/bundle/gems/rack-1.6.12/lib/rack/builder.rb:55:in `initialize'\n        from /app/config.ru:in `new'\n        from /app/config.ru:in `&lt;main&gt;'\n        from /usr/local/bundle/gems/rack-1.6.12/lib/rack/builder.\nrb:49:in `eval'\n        from /usr/local/bundle/gems/rack-1.6.12/lib/rack/builder.\nrb:49:in `new_from_string'\n        from /usr/local/bundle/gems/rack-1.6.12/lib/rack/builder.\nrb:40:in `parse_file'\n        from /usr/local/bundle/gems/rack-1.6.12/lib/rack/server.\nrb:300:in `build_app_and_op\ntions_from_config'\n        from /usr/local/bundle/gems/rack-1.6.12/lib/rack/server.\nrb:209:in `app'\n        from /usr/local/bundle/gems/railties-4.2.10/lib/rails/commands/server.\nrb:61:in `app\n'\n        from /usr/local/bundle/gems/rack-1.6.12/lib/rack/server.rb:337:in `wrapped_app'\n        from /usr/local/bundle/gems/railties-4.2.10/lib/rails/commands/server.\nrb:139:in `lo\ng_to_stdout'\n        from /usr/local/bundle/gems/railties-4.2.10/lib/rails/commands/server.\nrb:78:in `start'\n        from /usr/local/bundle/gems/railties-4.2.10/lib/rails/commands/commands_tasks.\nrb:80\n:in `block in server'\n        from /usr/local/bundle/gems/railties-4.2.10/lib/rails/commands/commands_tasks.\nrb:75:in `tap'\n        from /usr/local/bundle/gems/railties-4.2.10/lib/rails/commands/commands_tasks.\nrb:75\n:in `server'\n        from /usr/local/bundle/gems/railties-4.2.10/lib/rails/commands/commands_tasks.\nrb:39\n:in `run_command!'\n        from /usr/local/bundle/gems/railties-4.2.10/lib/rails/commands.\nrb:17:in `&lt;top (requ\nired)&gt;'\n        from bin/rails:4:in `require'\n        from bin/rails:4:in `&lt;main&gt;'\n</code></pre>\n\n<p>Dockerfile</p>\n\n<pre><code>FROM ruby:2.4.2-alpine\n\n# Open port 3000 to access the Rails applications\n# This does not belong in production as a reverse proxy should route to the application internally\nEXPOSE 3000\n\n# Starting command line arguments wrapped in `bundle exec`\nENTRYPOINT [\"bundle\", \"exec\"]\n\n# Required pager to using irb or rails console within container\nENV PAGER=\"busybox less\"\n\n# Start Rails server by default bound to 0.0.0.0:3000 of the container\nCMD [\"rails\", \"server\", \"-p\", \"3000\", \"-b\", \"0.0.0.0\"]\n\n# Create main application directory\nRUN mkdir /app\n\n# Copy all contents of the current directory to the main application directory\nCOPY . /app\n\n# Set the working directory to the main application directory\nWORKDIR /app\n\n# Install required system libraries, latest version of bundle and fetch all dependencies\nRUN rm -f /app/tmp/pids/server.pid \\\n  &amp;&amp; apk add --no-cache --verbose \\\n  bash \\\n  build-base \\\n  ca-certificates \\\n  gcc \\\n  git \\\n  libffi-dev \\\n  libxml2 \\\n  libxml2-dev \\\n  libxslt \\\n  libxslt-dev \\\n  nodejs \\\n  patch \\\n  postgresql-dev \\\n  ruby \\\n  ruby-dev \\\n  tzdata \\\n  &amp;&amp; gem install bundler --pre \\\n  &amp;&amp; gem install tzinfo:1.2.2 tzinfo-data \\\n  &amp;&amp; gem install nokogiri --version 1.8.1 -- --use-system-libraries --with-xml2-config=/usr/local/bin/xml2-config --with-xslt-config=/usr/local/bin/xslt-config \\\n  &amp;&amp; bundle install\n\n# Once the container is built, run it using the following:\n# &gt; docker run --detach &lt;image-name-or-hash&gt;\n# This will run the container and start Rails as follows from the application directory:\n# &gt; bundle exec rails server -p 3000 -b 0.0.0.0\n\n# If you want to run something different like the Rails console:\n# &gt; docker run --interactive -tty &lt;image-name-or-hash&gt; rails console\n# This will run the conatiner and start the Rails console as follows from the application directory:\n# &gt; bundle exec rails console\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "yard"], "owner": {"reputation": 6067, "user_id": 181902, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/04b9238a7f9d2c25e22913f0126da1c4?s=128&d=identicon&r=PG", "display_name": "thornomad", "link": "https://stackoverflow.com/users/181902/thornomad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 183, "favorite_count": 1, "answer_count": 0, "score": 5, "last_activity_date": 1580592892, "creation_date": 1576784107, "last_edit_date": 1580592892, "question_id": 59415894, "link": "https://stackoverflow.com/questions/59415894/yard-doc-and-dynamic-assignment-of-constants-instance-and-class-methods", "title": "Yard doc and dynamic assignment of constants, instance, and class methods", "body": "<p>I have a module I include to help define certain methods, constants and class methods.  It is creating them all dynamically.  I need help understanding how I can use Yard Doc's <code>@macro</code> feature to align the documentation and set the instance, class, and constant documentation all from inside an included module.  </p>\n\n<p>At its basic, it looks like this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>module Constantizer\n  extend ActiveSupport::Concern\n\n  # @!macro [attach] define_constant\n  #   @method $1?\n  #   Is this a $1?\n  #   @return [Boolean]\n\n  module ClassMethods\n\n    def define_constant(label, value, description)\n      const_set(label.to_s.upcase, value)\n      define_method(\"#{label}?\") { self.id == value }\n      define_singleton_method(label) { find(value) }\n    end\n\n  end\nend\n\nclass MyRecord &lt; ActiveRecord::Base\n  include Constantizer \n  # @!parse include Constantizer\n\n  attr_accessor :label, :id\n\n  define_constant :one, 1, 'the number one'\n  define_constant :two, 2, 'the number two'\n  # ... etc ...\nend\n</code></pre>\n\n<p>This <code>define_constant</code> creates an instance methods, one constant, and a class method.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>MyRecord::ONE #=&gt; 1\nMyRecord.one  #=&gt; MyRecord.find(1)\nMyRecord#one? #=&gt; true || false\n</code></pre>\n\n<h3>help with yard</h3>\n\n<p>I found <a href=\"https://stackoverflow.com/a/28415890/181902\">this answer on SO</a> as well as <a href=\"https://gnuu.org/2011/04/28/an-update-on-macros-in-yard-0-7-x/\" rel=\"nofollow noreferrer\">this post</a> and I can get this to sort of work at the instance method level by what you see, above.  However, I can't get the class method or the constant on the class to document.  I tried adding the same kind of thing inside of <code>ClassMethods</code> but it was using <code>label</code> instead of the value passed to <code>define_constant</code>.</p>\n\n<p>Kind of just copying pasting and trying to guess so I thought I would ask.  </p>\n"}]